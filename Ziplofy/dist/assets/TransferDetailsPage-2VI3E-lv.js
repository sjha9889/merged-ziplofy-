import{p as X,u as Z,f as ee,r,w as se,v as te,j as e,o as $,x as A,y as ae,z as re,F as q}from"./index-C7S6h9OR.js";import{G as W}from"./GridBackgroundWrapper-Du1VLjut.js";import{M as p}from"./Modal-DsfhGJdg.js";import{F as ne}from"./ArrowLeftIcon-C1qOxHB_.js";import{F as S}from"./ExclamationTriangleIcon-C8O-WV1K.js";import{F as z}from"./MapPinIcon-uL6bt2XU.js";import{F as ie}from"./CalendarIcon-t3DuckOm.js";import{F as le}from"./TrashIcon-B2-WJkmb.js";import"./index-CCB_rw4P.js";const ue=()=>{const{id:j}=X(),o=Z(),{transfers:N,deleteTransfer:C,updateTransfer:T,markReadyToShip:D,setTransfers:m}=ee(),s=r.useMemo(()=>N.find(t=>t._id===j),[N,j]),[I,n]=r.useState(!1),[d,i]=r.useState(!1),[x,l]=r.useState(!1),{entries:c,loading:h,error:g,fetchByTransferId:y}=se(),{getShipmentByTransferId:f,updateShipment:B,deleteShipment:P,shipments:_,loading:Y,markShipmentInTransit:G}=te(),a=r.useMemo(()=>s?._id&&_.find(t=>t.transferId===s._id)||null,[_,s?._id]),[K,v]=r.useState(!1),[U,w]=r.useState(!1),[F,L]=r.useState(""),[O,R]=r.useState(""),[M,E]=r.useState(""),[V,k]=r.useState(!1);r.useEffect(()=>{s?._id&&(y(s._id).catch(()=>{}),f(s._id).catch(()=>{}))},[s?._id,y,f]);const Q=async()=>{if(s)try{await C(s._id),n(!1),o("/products/transfers")}catch(t){console.error("Failed to delete transfer:",t)}},H=async()=>{if(s)try{await T(s._id,{status:"cancelled"}),i(!1)}catch(t){console.error("Failed to cancel transfer:",t)}},J=async()=>{if(s)try{await D(s._id),l(!1)}catch(t){console.error("Failed to mark ready to ship:",t)}};return s?e.jsx(W,{children:e.jsxs("div",{className:"min-h-screen",children:[e.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>o("/products/transfers"),className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:e.jsx(ne,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl font-medium text-gray-900",children:["Transfer #",s._id.slice(-8)]}),e.jsxs("p",{className:"text-xs text-gray-600 mt-0.5",children:["Created ",new Date(s.createdAt).toLocaleString()]})]})]}),e.jsx(ce,{currentLabel:s.status.replace(/_/g," "),transferId:s._id,onDeleteClick:()=>n(!0),onCancelClick:()=>i(!0),isCancelled:s.status==="cancelled",status:s.status,onReadyClick:()=>l(!0),onCreateShipment:()=>o(`/products/transfers/${s._id}/shipment/new`,{state:{transferId:s._id,entries:c}}),hasShipment:!!a})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 space-y-4",children:[s.status==="cancelled"&&e.jsx("div",{className:"border border-red-200 bg-red-50 p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-5 h-5 text-red-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm font-medium text-red-900 mb-0.5",children:"Transfer Cancelled"}),e.jsx("p",{className:"text-xs text-red-700",children:"This transfer has been cancelled and cannot be modified. You can view the details but no actions are available."})]})]})}),e.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[e.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Shipment"}),Y?e.jsx("p",{className:"text-sm text-gray-600",children:"Loading shipment..."}):a?e.jsxs("div",{className:"border border-gray-200 bg-gray-50 p-3",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 mb-1",children:["Scheduled for ",a.carrier||"—"," delivery for ",a.estimatedArrivalDate?new Date(a.estimatedArrivalDate).toLocaleDateString():"—"]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Tracking number: ",e.jsx("span",{className:"font-medium",children:a.trackingNumber||"—"})]}),e.jsx("span",{className:"inline-block px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-700",children:a.status.replace("_"," ")}),e.jsx("div",{className:"flex gap-2 mt-3 flex-wrap",children:a.status==="in_transit"?e.jsx("button",{onClick:()=>o(`/products/transfers/${s._id}/shipment/${a._id}/receive`),className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Receive shipment"}):a.status==="received"?null:e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{L(a.trackingNumber||""),R(a.carrier||""),E(a.estimatedArrivalDate?a.estimatedArrivalDate.slice(0,10):""),v(!0)},className:"px-3 py-1.5 text-sm font-medium border border-gray-200 hover:bg-gray-50 transition-colors",children:"Edit tracking"}),e.jsx("button",{onClick:()=>w(!0),className:"px-3 py-1.5 text-sm font-medium border border-gray-200 hover:bg-gray-50 transition-colors text-red-600",children:"Delete shipment"}),e.jsx("button",{onClick:()=>k(!0),className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Mark as in transit"})]})})]}):e.jsx("div",{className:"text-center py-2",children:e.jsx("p",{className:"text-sm text-gray-600",children:"No shipment created yet."})})]}),e.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[e.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Transfer Locations"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"border border-gray-200 bg-gray-50 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(z,{className:"w-4 h-4 text-gray-600"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Origin Location"})]}),e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:s.originLocationId?.name}),e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:s.originLocationId?.address}),e.jsxs("p",{className:"text-xs text-gray-600",children:[s.originLocationId?.city,", ",s.originLocationId?.state," ",s.originLocationId?.postalCode]})]}),e.jsxs("div",{className:"border border-gray-200 bg-gray-50 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(z,{className:"w-4 h-4 text-gray-600"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Destination Location"})]}),e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:s.destinationLocationId?.name}),e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:s.destinationLocationId?.address}),e.jsxs("p",{className:"text-xs text-gray-600",children:[s.destinationLocationId?.city,", ",s.destinationLocationId?.state," ",s.destinationLocationId?.postalCode]})]})]})]}),e.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[e.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Transfer Entries"}),e.jsxs("div",{className:"border border-gray-200 bg-gray-50 p-3",children:[h&&e.jsx("p",{className:"text-sm text-gray-600",children:"Loading entries..."}),g&&e.jsx("p",{className:"text-sm text-red-600",children:g}),!h&&!g&&(c.length?e.jsx("div",{className:"border border-gray-200 overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Products"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"SKU"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"At origin"}),e.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Quantity"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[t.variantId.images?.[0]?e.jsx("img",{src:t.variantId.images[0],alt:t.variantId.productName||"Product",className:"w-10 h-10 object-cover"}):e.jsx("div",{className:"w-10 h-10 bg-gray-200"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.variantId.productName||"Unnamed product"}),!!Object.keys(t.variantId.optionValues||{}).length&&e.jsx("p",{className:"text-xs text-gray-600",children:Object.entries(t.variantId.optionValues).map(([u,b])=>`${u}: ${b}`).join(" • ")})]})]})}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:t.variantId.sku}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:typeof t.atOrigin=="number"?t.atOrigin:0}),e.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-900 text-right",children:t.quantity})]},t._id))})]})}):e.jsxs("div",{className:"text-center py-3",children:[e.jsx($,{className:"w-8 h-8 text-gray-400 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600",children:"No entries added to this transfer"})]}))]})]}),e.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[e.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Transfer Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"border border-gray-200 bg-gray-50 p-3",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[e.jsx(A,{className:"w-4 h-4 text-gray-600"}),e.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Reference Name"})]}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.referenceName||"No reference"})]}),e.jsxs("div",{className:"border border-gray-200 bg-gray-50 p-3",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[e.jsx(ie,{className:"w-4 h-4 text-gray-600"}),e.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Transfer Date"})]}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.transferDate?new Date(s.transferDate).toLocaleDateString():"Not set"}),s.transferDate&&e.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:new Date(s.transferDate).toLocaleTimeString()})]}),e.jsxs("div",{className:"border border-gray-200 bg-gray-50 p-3",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[e.jsx(A,{className:"w-4 h-4 text-gray-600"}),e.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Store ID"})]}),e.jsx("p",{className:"text-sm font-medium text-gray-900 font-mono",children:s.storeId})]})]})]}),e.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[e.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Transfer Tags"}),e.jsx("div",{className:"border border-gray-200 bg-gray-50 p-3 min-h-[80px] flex items-center",children:s.tags?.length?e.jsx("div",{className:"flex flex-wrap gap-1",children:s.tags.map(t=>e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-700",children:t.name},t._id))}):e.jsxs("div",{className:"text-center w-full",children:[e.jsx(ae,{className:"w-8 h-8 text-gray-400 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600",children:"No tags assigned to this transfer"})]})})]}),e.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[e.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Transfer Notes"}),e.jsx("div",{className:"border border-gray-200 bg-gray-50 p-3 min-h-[100px]",children:s.note?e.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:s.note}):e.jsxs("div",{className:"text-center py-2",children:[e.jsx(re,{className:"w-8 h-8 text-gray-400 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600",children:"No notes added to this transfer"})]})})]})]}),e.jsxs(p,{open:I,onClose:()=>n(!1),title:e.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[e.jsx(S,{className:"w-5 h-5"}),e.jsx("span",{children:"Delete Transfer"})]}),actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>n(!1),className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"No, Cancel"}),e.jsx("button",{onClick:Q,className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Yes, Delete Transfer"})]}),children:[e.jsx("p",{className:"text-sm text-gray-900 mb-2",children:"Do you really want to delete this transfer?"}),e.jsx("div",{className:"p-2 bg-red-50 border border-red-200 mb-2",children:e.jsxs("p",{className:"text-xs text-red-600 font-medium",children:["Transfer ID: ",s?._id]})}),e.jsx("p",{className:"text-xs text-gray-600",children:"This action cannot be undone. The transfer and all its associated entries will be permanently deleted."})]}),e.jsxs(p,{open:d,onClose:()=>i(!1),title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{children:"Cancel Transfer"})]}),actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>i(!1),className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"No, Keep Transfer"}),e.jsx("button",{onClick:H,className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Yes, Cancel Transfer"})]}),children:[e.jsx("p",{className:"text-sm text-gray-900 mb-2",children:"Are you sure you want to cancel this transfer?"}),e.jsx("div",{className:"p-2 bg-gray-50 border border-gray-200 mb-2",children:e.jsxs("p",{className:"text-xs text-gray-600 font-medium",children:["Transfer ID: ",s?._id]})}),e.jsx("p",{className:"text-xs text-gray-600",children:"Once cancelled, this transfer cannot be modified or reactivated. The transfer will remain in your records for reference."})]}),e.jsxs(p,{open:x,onClose:()=>l(!1),title:"Mark as Ready to Ship",maxWidth:"md",actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>l(!1),className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:J,className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Confirm"})]}),children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Mark as ready to ship"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Marking the transfer as ready to ship will automatically reserve all inventory and stock all unavailable items at the shop location."}),e.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 mb-3",children:[e.jsxs("p",{className:"text-xs text-gray-600",children:["Origin: ",e.jsx("span",{className:"font-medium",children:s.originLocationId?.name})]}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Destination: ",e.jsx("span",{className:"font-medium",children:s.destinationLocationId?.name})]})]}),e.jsxs("div",{className:"p-3 bg-white border border-gray-200",children:[e.jsx("p",{className:"text-xs font-medium text-gray-900 mb-2",children:"What happens next"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs text-gray-600",children:[e.jsxs("li",{children:["We will ",e.jsx("span",{className:"font-medium",children:"reserve"})," the transfer quantities at the origin location so they cannot be sold."]}),e.jsxs("li",{children:["Origin inventory will be updated: ",e.jsx("span",{className:"font-medium",children:"unavailable increases"})," by the transfer quantity and ",e.jsx("span",{className:"font-medium",children:"available decreases"})," accordingly. On hand does not change."]}),e.jsx("li",{children:"No stock physically moves yet. Destination inventory remains unchanged until shipment is created and received."})]})]})]}),e.jsx(p,{open:K,onClose:()=>v(!1),title:"Edit shipment",actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>v(!1),className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:async()=>{a&&(await B(a._id,{trackingNumber:F,carrier:O,estimatedArrivalDate:M||void 0}),v(!1))},className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Save"})]}),children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Tracking number"}),e.jsx("input",{type:"text",value:F,onChange:t=>L(t.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Shipping carrier"}),e.jsx("input",{type:"text",value:O,onChange:t=>R(t.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Estimated arrival date"}),e.jsx("input",{type:"date",value:M,onChange:t=>E(t.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]})]})}),e.jsx(p,{open:U,onClose:()=>w(!1),title:e.jsx("span",{className:"text-red-600",children:"Delete shipment"}),actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>w(!1),className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:async()=>{a&&(await P(a._id),w(!1))},className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Delete"})]}),children:e.jsx("p",{className:"text-sm text-gray-900",children:"Are you sure you want to delete this shipment?"})}),e.jsxs(p,{open:V,onClose:()=>k(!1),title:"Mark shipment as in transit",maxWidth:"md",actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>k(!1),className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:async()=>{if(a)try{const t=await G(a._id);m(u=>u.map(b=>b._id===t.transferId?{...b,status:"in_progress"}:b)),k(!1)}catch(t){console.error("Failed to mark in transit",t)}},className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Mark as in transit"})]}),children:[e.jsx("p",{className:"text-sm text-gray-900 mb-3",children:"Are you sure you want to mark this transfer as in transit? These units will be marked as incoming to the destination and allowed to be received."}),e.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 mb-3",children:[e.jsxs("p",{className:"text-xs text-gray-600",children:["Origin: ",e.jsx("span",{className:"font-medium",children:s.originLocationId?.name})]}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Destination: ",e.jsx("span",{className:"font-medium",children:s.destinationLocationId?.name})]}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Total units: ",e.jsx("span",{className:"font-medium",children:c.reduce((t,u)=>t+(u.quantity||0),0)})]})]}),e.jsxs("div",{className:"p-3 bg-white border border-gray-200",children:[e.jsx("p",{className:"text-xs font-medium text-gray-900 mb-2",children:"What happens next"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs text-gray-600",children:[e.jsx("li",{children:"Origin: unavailable decreases by the transfer quantity."}),e.jsx("li",{children:"Destination: incoming increases by the transfer quantity."}),e.jsxs("li",{children:["Transfer status changes to ",e.jsx("span",{className:"font-medium",children:"in progress"}),"."]}),e.jsxs("li",{children:["Shipment status changes to ",e.jsx("span",{className:"font-medium",children:"in transit"}),"."]})]})]})]})]})}):e.jsx(W,{children:e.jsx("div",{className:"min-h-screen",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:e.jsxs("div",{className:"border border-gray-200 p-8 text-center",children:[e.jsx($,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("h1",{className:"text-lg font-medium text-gray-900 mb-1",children:"Transfer Not Found"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"The transfer you're looking for doesn't exist or has been removed."}),e.jsx("button",{onClick:()=>o("/products/transfers"),className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Back to Transfers"})]})})})})},ce=({currentLabel:j,transferId:o,onDeleteClick:N,onCancelClick:C,onReadyClick:T,onCreateShipment:D,isCancelled:m,status:s,hasShipment:I})=>{const[n,d]=r.useState(!1),[i,x]=r.useState(!1),l=r.useRef(null),c=r.useRef(null);r.useEffect(()=>{const y=f=>{l.current&&!l.current.contains(f.target)&&d(!1),c.current&&!c.current.contains(f.target)&&x(!1)};return(n||i)&&document.addEventListener("mousedown",y),()=>{document.removeEventListener("mousedown",y)}},[n,i]);const h=s==="draft",g=s==="ready_to_ship";return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-700 capitalize",children:j}),g&&!I&&e.jsx("button",{onClick:D,className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Create shipment"}),h&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",ref:l,children:[e.jsxs("button",{disabled:m,onClick:()=>d(!n),className:"px-3 py-1.5 text-sm font-medium border border-gray-200 hover:bg-gray-50 transition-colors disabled:bg-gray-50 disabled:text-gray-400 disabled:cursor-not-allowed flex items-center gap-1",children:["Mark as",e.jsx(q,{className:"w-4 h-4"})]}),n&&e.jsxs("div",{className:"absolute right-0 mt-1 w-48 bg-white border border-gray-200 shadow-lg z-10",children:[h&&e.jsx("button",{onClick:()=>{d(!1),T()},className:"w-full text-left px-4 py-2 text-sm text-gray-900 hover:bg-gray-50 transition-colors",children:"Ready to ship"}),e.jsx("button",{onClick:()=>d(!1),className:"w-full text-left px-4 py-2 text-sm text-gray-900 hover:bg-gray-50 transition-colors",children:"In progress"}),e.jsx("button",{onClick:()=>d(!1),className:"w-full text-left px-4 py-2 text-sm text-gray-900 hover:bg-gray-50 transition-colors",children:"Transferred"})]})]}),e.jsxs("div",{className:"relative",ref:c,children:[e.jsxs("button",{disabled:m,onClick:()=>x(!i),className:"px-3 py-1.5 text-sm font-medium border border-gray-200 hover:bg-gray-50 transition-colors disabled:bg-gray-50 disabled:text-gray-400 disabled:cursor-not-allowed flex items-center gap-1",children:["More actions",e.jsx(q,{className:"w-4 h-4"})]}),i&&e.jsxs("div",{className:"absolute right-0 mt-1 w-48 bg-white border border-gray-200 shadow-lg z-10",children:[!m&&e.jsx("button",{onClick:()=>{x(!1),C()},className:"w-full text-left px-4 py-2 text-sm text-gray-900 hover:bg-gray-50 transition-colors",children:"Cancel transfer"}),h&&!m&&!g&&e.jsxs("button",{onClick:()=>{x(!1),N()},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-50 transition-colors flex items-center gap-2",children:[e.jsx(le,{className:"w-4 h-4"}),"Delete transfer"]})]})]})]})]})};export{ue as default};
