import{u as A,b as R,I as B,r as s,j as e}from"./index-C7S6h9OR.js";import{G as O}from"./GridBackgroundWrapper-Du1VLjut.js";import{F}from"./ArrowLeftIcon-C1qOxHB_.js";import{F as T}from"./EllipsisHorizontalIcon-CCX74wqb.js";const U=()=>{const l=A(),{activeStoreId:d}=R(),{settings:t,loading:j,error:h,fetchByStoreId:b,update:v}=B(),[x,f]=s.useState(null),[a,c]=s.useState(!0),[N,o]=s.useState(!1),[p,y]=s.useState(!1),m=s.useRef(null),u=s.useRef(null);s.useEffect(()=>{d&&b(d).catch(()=>{})},[d,b]),s.useEffect(()=>{if(!t){c(!0),o(!1);return}c(!!t.shopAuth?.enabled),o(!1)},[t]),s.useEffect(()=>{if(!t){o(!1);return}o(!!t.shopAuth?.enabled!==a)},[a,t]),s.useEffect(()=>{const r=n=>{m.current&&!m.current.contains(n.target)&&u.current&&!u.current.contains(n.target)&&g()};return x&&document.addEventListener("mousedown",r),()=>{document.removeEventListener("mousedown",r)}},[x]);const w=()=>{l("/settings/customer-accounts")},C=(r,n)=>{f({element:r.currentTarget,id:n})},g=()=>{f(null)},S=()=>{c(!1),g()},k=()=>{c(!0),g()},E=async()=>{if(t?._id)try{y(!0),await v(t._id,{shopAuth:{enabled:a}}),o(!1)}catch{}finally{y(!1)}},i=j||p||!t;return e.jsx(O,{children:e.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 border-b border-gray-200 pb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:w,className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:e.jsx(F,{className:"w-5 h-5"})}),e.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Authentication"})]}),t&&e.jsx("button",{onClick:E,disabled:!N||i,className:"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-700 min-w-[100px] disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:p?"Saving...":"Save"})]}),e.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Manage sign-in options and account access"}),h&&e.jsx("div",{className:"bg-gray-50 border border-gray-200 text-gray-700 px-4 py-3 mb-4 text-xs",children:h}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4",children:[e.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-4",children:"Sign-in options"}),e.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-600 flex items-center justify-center",children:e.jsx("div",{className:`w-4 h-4 border-2 border-white border-t-transparent border-r-transparent rounded-full ${a?"animate-spin":""}`})}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Shop"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[a?e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-700 text-xs font-medium border border-gray-200",children:"On"}):e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-500 text-xs font-medium border border-gray-200",children:"Off"}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{ref:u,onClick:r=>C(r,"shop"),className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-50 transition-colors",disabled:i,children:e.jsx(T,{className:"w-4 h-4"})}),x?.id==="shop"&&e.jsx("div",{ref:m,className:"absolute right-0 top-full mt-1 bg-white border border-gray-200 z-10 min-w-[120px]",children:a?e.jsx("button",{onClick:S,disabled:i,className:"w-full px-3 py-2 text-left text-xs text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Turn off"}):e.jsx("button",{onClick:k,disabled:i,className:"w-full px-3 py-2 text-left text-xs text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Turn on"})})]})]})]})]}),e.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4",children:[e.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-4",children:"Available connections"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:"https://www.google.com/favicon.ico",alt:"Google",className:"w-5 h-5",onError:r=>{const n=r.target;n.style.display="none"}}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Google"})]}),e.jsx("button",{onClick:()=>l("/settings/customer-accounts/authentication/google"),className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Connect"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-5 h-5 bg-blue-600 rounded-full flex items-center justify-center text-white text-xs font-bold",children:"f"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Facebook"})]}),e.jsx("button",{onClick:()=>l("/settings/customer-accounts/authentication/facebook"),className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Connect"})]})]})]})]})]})})};export{U as default};
