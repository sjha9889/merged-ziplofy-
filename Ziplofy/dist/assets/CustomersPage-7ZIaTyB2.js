import{r as t,u as y,b as j,C as N,j as e,Y as v,g as w}from"./index-C7S6h9OR.js";import{F as u}from"./ArrowUpTrayIcon-Unc2xeT8.js";import{F as c}from"./UsersIcon-BqNcbeHW.js";function C({title:i,titleId:a,...l},d){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":a},l),i?t.createElement("title",{id:a},i):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const g=t.forwardRef(C),L=()=>{const i=y(),{activeStoreId:a}=j(),{customers:l,loading:d,error:m,fetchCustomersByStoreId:o}=N(),[n,p]=t.useState("");t.useEffect(()=>{a&&o(a)},[a,o]);const x=t.useMemo(()=>{if(!n.trim())return l??[];const s=n.toLowerCase();return(l??[]).filter(r=>`${r.firstName} ${r.lastName}`.toLowerCase().includes(s)||r.email?.toLowerCase().includes(s)||r.phoneNumber?.toLowerCase().includes(s))},[l,n]),f=t.useMemo(()=>(l??[]).filter(s=>Array.isArray(s.tagIds)&&s.tagIds.length>0),[l]),h=t.useCallback(()=>i("/customers/new"),[i]),b=t.useCallback(s=>i(`/customers/${s}`),[i]);return e.jsx("div",{className:"min-h-screen bg-page-background-color",children:e.jsxs("div",{className:"max-w-[1400px] mx-auto px-3 sm:px-4 py-4",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:"Customers"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage customer details, order history, and segments"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>{},className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(u,{className:"w-4 h-4"}),"Import customers"]}),e.jsxs("button",{type:"button",onClick:h,className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(g,{className:"w-4 h-4"}),"Add customer"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white rounded-xl border border-gray-200/80 p-5 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total customers"}),e.jsx("p",{className:"mt-1 text-2xl font-bold text-gray-900",children:l?.length??0})]}),e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 flex items-center justify-center",children:e.jsx(c,{className:"w-5 h-5 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200/80 p-5 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Tagged"}),e.jsx("p",{className:"mt-1 text-2xl font-bold text-gray-900",children:f.length})]}),e.jsx("div",{className:"w-10 h-10 rounded-lg bg-violet-50 flex items-center justify-center",children:e.jsx("span",{className:"text-violet-600 font-semibold text-sm",children:"#"})})]})}),e.jsx(v,{to:"/customers/segments",className:"bg-white rounded-xl border border-gray-200/80 p-5 shadow-sm hover:border-blue-200 transition-colors block",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Segments"}),e.jsx("p",{className:"mt-1 text-base font-medium text-blue-600 hover:text-blue-700",children:"Manage segments →"})]}),e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 flex items-center justify-center",children:e.jsx(c,{className:"w-5 h-5 text-blue-600"})})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200/80 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-5 py-4 border-b border-gray-100 flex flex-col sm:flex-row sm:items-center gap-4",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(w,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name, email, or phone...",value:n,onChange:s=>p(s.target.value),className:"w-full pl-10 pr-4 py-2.5 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500/30 focus:border-blue-400 outline-none transition-all"})]})}),d?e.jsxs("div",{className:"py-24 flex flex-col items-center justify-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-gray-200 border-t-blue-600 animate-spin"}),e.jsx("p",{className:"mt-4 text-sm text-gray-500",children:"Loading customers..."})]}):m?e.jsxs("div",{className:"py-24 flex flex-col items-center justify-center",children:[e.jsx("p",{className:"text-sm text-red-600",children:m}),a&&e.jsx("button",{type:"button",onClick:()=>o(a),className:"mt-4 text-sm font-medium text-gray-900 hover:underline",children:"Retry"})]}):x.length===0?e.jsxs("div",{className:"py-24 flex flex-col items-center justify-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mb-4",children:e.jsx(c,{className:"w-8 h-8 text-gray-400"})}),e.jsx("p",{className:"text-base font-medium text-gray-900",children:n?"No customers match your search":"No customers yet"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n?"Try a different search term.":"Everything customers-related in one place. Manage details, order history, and segments."}),!n&&e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsxs("button",{type:"button",onClick:h,className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(g,{className:"w-4 h-4"}),"Add customer"]}),e.jsxs("button",{type:"button",className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(u,{className:"w-4 h-4"}),"Import customers"]})]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50/80",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-5 py-3.5 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-5 py-3.5 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-5 py-3.5 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Phone"}),e.jsx("th",{className:"px-5 py-3.5 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Tags"}),e.jsx("th",{className:"px-5 py-3.5 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Created"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:x.map(s=>e.jsxs("tr",{onClick:()=>b(s._id),className:"hover:bg-gray-50/80 cursor-pointer transition-colors",children:[e.jsx("td",{className:"px-5 py-4",children:e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[s.firstName," ",s.lastName]})}),e.jsx("td",{className:"px-5 py-4 text-sm text-gray-600",children:s.email}),e.jsx("td",{className:"px-5 py-4 text-sm text-gray-600",children:s.phoneNumber||e.jsx("span",{className:"text-gray-400",children:"—"})}),e.jsx("td",{className:"px-5 py-4",children:Array.isArray(s.tagIds)&&s.tagIds.length>0?e.jsx("div",{className:"flex flex-wrap gap-1.5",children:s.tagIds.map(r=>e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-medium bg-violet-50 text-violet-700",children:r.name||r},r._id||r))}):e.jsx("span",{className:"text-gray-400",children:"—"})}),e.jsx("td",{className:"px-5 py-4 text-sm text-gray-500",children:new Date(s.createdAt).toLocaleDateString()})]},s._id))})]})})]})]})})};export{L as default};
