import{p as R,u as $,J as O,K as M,r as a,j as e,O as j}from"./index-C7S6h9OR.js";import{B as d,T as r}from"./Box-Cgm3ZkZ8.js";import{B as q,C as F}from"./ChevronRight-D9wfCgb-.js";import{L as x}from"./Link-BuWh3ioJ.js";import{B as h}from"./Button-CdPvNkrY.js";import{P as y}from"./Paper-DocVmpOE.js";import{T as S}from"./TextField-CwtyivJh.js";import"./DefaultPropsProvider-CZkfTDs_.js";import"./createSvgIcon-Yi9Vo0kN.js";import"./Select-Bus390RW.js";import"./index-CCB_rw4P.js";const Z=()=>{const{categoryId:t,categorySlug:n,optionId:s}=R(),c=$(),{options:u,fetchByCategoryId:C}=O(),{categories:m,fetchAll:k}=M(),[i,E]=a.useState(null),[D,p]=a.useState(""),[B,b]=a.useState(""),[N,f]=a.useState(!1),T=n?.includes("customer"),g=t&&n?`/settings/notifications/${t}/${n}`:"/settings/notifications",v=a.useMemo(()=>{if(!t)return"Notifications";const o=m.find(l=>l._id===t);return o?.name?o.name:n?n.split("-").map(l=>l.charAt(0).toUpperCase()+l.slice(1)).join(" "):"Notifications"},[m,t,n]);a.useEffect(()=>{m.length===0&&k().catch(()=>{})},[m.length,k]),a.useEffect(()=>{if(s&&u.length>0){const o=u.find(l=>l._id===s);o&&(E(o),p(o.emailSubject||""),b(o.emailBody||""),f(!1))}},[s,u]),a.useEffect(()=>{!t||u.length>0||C(t).catch(()=>{})},[t,u.length,C]);const L=o=>{p(o.target.value),f(!0)},w=o=>{b(o.target.value),f(!0)},z=()=>{console.log("Localize")},I=()=>{!s||!t||!n||c(`/settings/notifications/${t}/${n}/${s}`,{state:{categoryId:t,parentPath:g,categoryName:v}})},W=()=>{i&&(p(i.emailSubject||""),b(i.emailBody||""),f(!1),j.success("Reverted to default values"))},P=async()=>{if(i)try{await new Promise(o=>setTimeout(o,1e3)),j.success("Email template updated successfully"),f(!1)}catch(o){j.error(o?.message||"Failed to update email template")}};return!t||!n?e.jsx(d,{sx:{maxWidth:1200,mx:"auto",py:4},children:e.jsx(r,{children:"Notification category not found."})}):i?e.jsxs(d,{sx:{maxWidth:1200,mx:"auto",py:4},children:[e.jsxs(q,{separator:e.jsx(F,{sx:{fontSize:16}}),sx:{mb:3},children:[e.jsx(x,{component:"button",variant:"body2",onClick:()=>c("/settings/notifications"),sx:{color:"#666",textDecoration:"none","&:hover":{textDecoration:"underline"},cursor:"pointer"},children:"Notifications"}),e.jsx(x,{component:"button",variant:"body2",onClick:()=>{t&&n?c(g,{state:{categoryId:t}}):c("/settings/notifications")},sx:{color:"#666",textDecoration:"none","&:hover":{textDecoration:"underline"},cursor:"pointer"},children:v}),e.jsx(x,{component:"button",variant:"body2",onClick:()=>{!s||!t||!n||c(`/settings/notifications/${t}/${n}/${s}`,{state:{categoryId:t,parentPath:g,categoryName:v}})},sx:{color:"#666",textDecoration:"none","&:hover":{textDecoration:"underline"},cursor:"pointer"},children:i.optionName}),e.jsxs(r,{variant:"body2",sx:{color:"#111"},children:["Edit ",i.optionName]})]}),e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsxs(r,{variant:"h4",sx:{fontWeight:600,color:"#111"},children:["Edit ",i.optionName]}),e.jsxs(d,{sx:{display:"flex",gap:1},children:[e.jsx(h,{variant:"outlined",onClick:z,sx:{textTransform:"none",color:"#111",borderColor:"#ddd","&:hover":{borderColor:"#999",backgroundColor:"#f5f5f5"}},children:"Localize"}),e.jsx(h,{variant:"outlined",onClick:I,sx:{textTransform:"none",color:"#111",borderColor:"#ddd","&:hover":{borderColor:"#999",backgroundColor:"#f5f5f5"}},children:"Preview"})]})]}),e.jsxs(y,{sx:{p:3,borderRadius:2,boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",mb:3},children:[e.jsx(r,{variant:"h6",sx:{fontWeight:600,color:"#111",mb:2},children:"Liquid variables"}),e.jsxs(r,{variant:"body2",sx:{color:"#666",mb:1},children:["You can use"," ",e.jsx(x,{href:"#",sx:{color:"#1976d2",textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"liquid variables"})," ","to customize your templates. Learn more about liquid variables."]}),e.jsxs(r,{variant:"body2",sx:{color:"#666"},children:["You can customize the look and feel across all email notifications from the"," ",e.jsx(x,{href:"#",onClick:o=>{o.preventDefault(),T&&c("/settings/notifications/customer/templates")},sx:{color:"#1976d2",textDecoration:"none","&:hover":{textDecoration:"underline"},cursor:"pointer"},children:"Customize email templates"})," ","page."]})]}),e.jsxs(y,{sx:{p:3,borderRadius:2,boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",mb:3},children:[e.jsx(r,{variant:"h6",sx:{fontWeight:600,color:"#111",mb:2},children:"Email subject"}),e.jsx(S,{fullWidth:!0,value:D,onChange:L,placeholder:"Enter email subject",variant:"outlined",sx:{"& .MuiOutlinedInput-root":{backgroundColor:"#fff"}}})]}),e.jsxs(y,{sx:{p:3,borderRadius:2,boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",mb:3},children:[e.jsx(r,{variant:"h6",sx:{fontWeight:600,color:"#111",mb:2},children:"Email body (HTML)"}),e.jsx(S,{fullWidth:!0,multiline:!0,rows:20,value:B,onChange:w,placeholder:"Enter email body HTML",variant:"outlined",sx:{"& .MuiOutlinedInput-root":{backgroundColor:"#fff",fontFamily:"monospace",fontSize:"0.875rem"}}})]}),e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(h,{variant:"outlined",onClick:W,sx:{textTransform:"none",color:"#111",borderColor:"#ddd","&:hover":{borderColor:"#999",backgroundColor:"#f5f5f5"}},children:"Revert to default"}),N&&e.jsx(h,{variant:"contained",onClick:P,sx:{textTransform:"none",backgroundColor:"#111",color:"#fff","&:hover":{backgroundColor:"#333"}},children:"Save"})]})]}):e.jsx(d,{sx:{maxWidth:1200,mx:"auto",py:4},children:e.jsx(r,{children:"Loading..."})})};export{Z as default};
