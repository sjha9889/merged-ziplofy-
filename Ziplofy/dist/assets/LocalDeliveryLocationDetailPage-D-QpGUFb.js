import{r as t,u as re,p as ne,c as le,b as ie,j as e,i as oe}from"./index-C7S6h9OR.js";import{G as B}from"./GridBackgroundWrapper-Du1VLjut.js";import{M as G}from"./Modal-DsfhGJdg.js";import{F as ce}from"./ArrowLeftIcon-C1qOxHB_.js";import{F as de}from"./TruckIcon-BgeMuXfC.js";import{F as xe}from"./ChevronRightIcon-CVun6pAX.js";import{F as me}from"./MapPinIcon-uL6bt2XU.js";import{F as ue}from"./EllipsisHorizontalIcon-CCX74wqb.js";import{F as ge}from"./Squares2X2Icon-BWDWCp4N.js";import"./index-CCB_rw4P.js";function pe({title:x,titleId:o,...a},l){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":o},a),x?t.createElement("title",{id:o},x):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}const he=t.forwardRef(pe),Me=()=>{const x=re(),{localDeliveryId:o,locationId:a}=ne(),{locations:l,fetchLocationsByStoreId:M,updateLocation:H,loading:ye}=le(),{activeStoreId:f}=ie(),[v,b]=t.useState(!1),[c,F]=t.useState("radius"),[_,V]=t.useState(!1),[m,L]=t.useState("km"),[q,j]=t.useState(null),[d,N]=t.useState(null),[Y,O]=t.useState(!1),[R,w]=t.useState(null),[I,C]=t.useState("Local Delivery"),[J,k]=t.useState(""),[K,D]=t.useState("0"),[P,S]=t.useState("0"),[$,E]=t.useState(""),[i,u]=t.useState(!1),[Q,g]=t.useState("0"),[X,p]=t.useState(""),[A,h]=t.useState("0"),[z,y]=t.useState(!1),[ee,T]=t.useState(null),r=l.find(s=>s._id===a),se=[{id:"1",name:"Local Delivery",radius:10,unit:"km",postalCodes:0,minOrder:null,price:0,hasDeliveryInfo:!1}],W=()=>{C("Local Delivery"),k(""),D("0"),S("0"),E(""),u(!1),g("0"),p(""),h("0")},U=s=>{s?(w(s),C(s.name),k(String(s.radius)),D(s.minOrder?String(s.minOrder):"0"),S(String(s.price)),u(!1),g("0"),p(""),h("0")):(w(null),W()),O(!0)},Z=()=>{O(!1),w(null),W()},te=()=>{Z()};t.useEffect(()=>{if(f&&a){const s=l.some(n=>n._id===a);(!l.length||!s)&&M(f)}},[f,a,l,M]),t.useEffect(()=>{r&&b(r.canLocalDeliver)},[r]);const ae=async s=>{const n=s.target.checked;if(b(n),a)try{await H(a,{canLocalDeliver:n})}catch{b(!n)}};return r?e.jsxs(B,{children:[e.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b border-gray-200 pb-4",children:[e.jsx("button",{onClick:()=>x(o?`/settings/shipping-and-delivery/local_deliveries/${o}`:"/settings/shipping-and-delivery"),className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:e.jsx(ce,{className:"w-5 h-5"})}),e.jsx(de,{className:"w-5 h-5 text-gray-700"}),e.jsx(xe,{className:"w-4 h-4 text-gray-500"}),e.jsxs("h1",{className:"text-xl font-medium text-gray-900",children:["Local delivery for ",r.name]})]}),e.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4 mb-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-1",children:"Location status"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Deliver orders to customers directly from this location."})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:v,onChange:ae,className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-gray-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gray-900"})]})]}),e.jsx("div",{className:"border border-gray-200 p-3 bg-gray-50 mb-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(me,{className:"w-5 h-5 text-gray-600 shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:r.name}),e.jsx("p",{className:"text-xs text-gray-600",children:r.countryRegion||"No country specified"})]})]})}),v&&e.jsx("div",{className:"mt-3",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Delivery prices for this location are in Indian rupees (INR)."," ",e.jsx("button",{onClick:s=>{s.preventDefault()},className:"text-xs text-gray-600 hover:text-gray-900 underline",children:"Change Currency"})]})})]}),v&&e.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4 mb-4",children:[e.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-4",children:"Delivery zones"}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx("input",{type:"radio",value:"pin-codes",checked:c==="pin-codes",onChange:s=>F(s.target.value),className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Use PIN codes"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Choose specific areas that you deliver to"})]})]}),e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx("input",{type:"radio",value:"radius",checked:c==="radius",onChange:s=>F(s.target.value),className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Set a delivery radius"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Set a distance around your location that you deliver to"})]})]})]}),c==="radius"&&e.jsxs("div",{className:"mb-4 ml-7",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mb-3",children:[e.jsx("input",{type:"checkbox",checked:_,onChange:s=>V(s.target.checked),className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Include neighboring states or regions"})]}),e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Measure radius in"}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",value:"km",checked:m==="km",onChange:s=>L(s.target.value),className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400"}),e.jsx("span",{className:"text-sm text-gray-700",children:"km"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",value:"mi",checked:m==="mi",onChange:s=>L(s.target.value),className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400"}),e.jsx("span",{className:"text-sm text-gray-700",children:"mi"})]})]})]}),e.jsx("div",{className:"space-y-3 mb-4",children:se.map(s=>e.jsx("div",{className:"border border-gray-200 p-3 bg-gray-50",children:e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:s.name}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:c==="pin-codes"?`${s.postalCodes} postal codes • ${s.hasDeliveryInfo?"Has delivery information":"No delivery information"}`:`Up to ${s.radius}${s.unit} • ${s.hasDeliveryInfo?"Has delivery information":"No delivery information"}`}),c==="pin-codes"&&s.postalCodes===0&&e.jsxs("div",{className:"mt-2 bg-red-50 border border-red-200 text-red-700 px-3 py-2 text-xs flex items-start gap-2",children:[e.jsx(he,{className:"w-4 h-4 mt-0.5 shrink-0"}),e.jsx("span",{children:"Postal codes required to activate this delivery zone"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-xs text-gray-600",children:s.minOrder?`Minimum order: ${s.minOrder}`:"No minimum order"}),s.price===0&&e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-600",children:"Free"}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:n=>{j(n.currentTarget),N(s)},className:"p-1 text-gray-500 hover:text-gray-700 transition-colors",children:e.jsx(ue,{className:"w-5 h-5"})}),q&&d?.id===s.id&&e.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white border border-gray-200 z-10 min-w-[150px]",children:[e.jsx("button",{onClick:()=>{d&&U(d),j(null),N(null)},className:"w-full px-3 py-2 text-left text-xs text-gray-700 hover:bg-gray-50 transition-colors",children:"Edit zone"}),e.jsx("button",{onClick:()=>{d&&(T(d),y(!0)),j(null),N(null)},className:"w-full px-3 py-2 text-left text-xs text-red-600 hover:bg-gray-50 transition-colors",children:"Delete zone"})]})]})]})]})},s.id))}),e.jsxs("button",{onClick:()=>U(),className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors flex items-center gap-2",children:[e.jsx(oe,{className:"w-4 h-4"}),"Add zone"]})]}),e.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4",children:[e.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-1",children:"Manage local deliveries"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Get an optimized route or plan the order of delivery stops yourself. With local delivery apps, you and your staff can view routes, contact customers, update delivery statuses, and more."}),e.jsxs("div",{className:"border border-gray-200 p-3 bg-gray-50 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ge,{className:"w-5 h-5 text-gray-600 shrink-0"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Recommended local delivery apps"})]}),e.jsx("button",{className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-white transition-colors",children:"View apps"})]})]})]}),e.jsx(G,{open:Y,onClose:Z,maxWidth:"sm",title:R?"Edit zone":"Add zone",actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:Z,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:te,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:R?"Save changes":"Save"})]}),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Zone name"}),e.jsx("input",{type:"text",value:I,placeholder:"Local Delivery",maxLength:50,onChange:s=>C(s.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"}),e.jsxs("p",{className:"text-xs text-gray-600 text-right mt-1",children:[I.length,"/50"]})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 mb-2",children:["Delivery radius from ",e.jsx("strong",{children:"10"})," ",m," up to"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:J,onChange:s=>k(s.target.value),className:"w-full px-3 py-1.5 pr-12 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-sm text-gray-600",children:m})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Minimum order price"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-sm text-gray-600",children:"₹"}),e.jsx("input",{type:"number",value:K,onChange:s=>D(s.target.value),className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Delivery price"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-sm text-gray-600",children:"₹"}),e.jsx("input",{type:i?"text":"number",disabled:i,value:i?"":P,onChange:s=>S(s.target.value),placeholder:i?"Conditional":void 0,className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 disabled:opacity-50 disabled:cursor-not-allowed"})]}),!i&&Number(P||0)===0&&e.jsx("span",{className:"inline-block mt-1 px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-600",children:"Free"})]})]}),i?e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>{u(!1),g("0"),p(""),h("0")},className:"text-xs text-gray-600 hover:text-gray-900 underline",children:"Remove conditional pricing"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Orders from ₹0.00 up to"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-sm text-gray-600",children:"₹"}),e.jsx("input",{type:"number",value:Q,onChange:s=>g(s.target.value),className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]}),e.jsxs("div",{className:"relative flex-1",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-sm text-gray-600",children:"₹"}),e.jsx("input",{type:"number",value:X,onChange:s=>p(s.target.value),placeholder:"No limit",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]})]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Delivery price"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-sm text-gray-600",children:"₹"}),e.jsx("input",{type:"number",value:A,onChange:s=>h(s.target.value),className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]}),Number(A||0)===0&&e.jsx("span",{className:"inline-block mt-1 px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-600",children:"Free"})]})})]}):e.jsx("button",{onClick:()=>u(!0),className:"text-xs text-gray-600 hover:text-gray-900 underline",children:"Add conditional pricing"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Delivery information"}),e.jsx("textarea",{value:$,onChange:s=>E(s.target.value),maxLength:255,placeholder:"This message will appear at checkout...",rows:4,className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 resize-none"}),e.jsxs("p",{className:"text-xs text-gray-600 text-right mt-1",children:[$.length,"/255"]}),e.jsxs("p",{className:"text-xs text-gray-600 mt-2",children:["This message will appear at checkout and in the"," ",e.jsx("button",{onClick:s=>s.preventDefault(),className:"text-xs text-gray-600 hover:text-gray-900 underline",children:"order confirmation notification"}),"."]})]})]})}),e.jsx(G,{open:z,onClose:()=>y(!1),maxWidth:"sm",title:"Delete zone",actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>y(!1),className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"No"}),e.jsx("button",{onClick:()=>{y(!1),T(null)},className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-red-600 hover:bg-red-50 transition-colors",children:"Yes"})]}),children:e.jsxs("p",{className:"text-sm text-gray-900",children:["Are you sure you want to delete"," ",e.jsx("strong",{children:ee?.name??"this zone"}),"?"]})})]}):e.jsx(B,{children:e.jsx("div",{className:"max-w-7xl mx-auto py-8 px-4",children:e.jsx("p",{className:"text-sm text-gray-900",children:"Location not found"})})})};export{Me as default};
