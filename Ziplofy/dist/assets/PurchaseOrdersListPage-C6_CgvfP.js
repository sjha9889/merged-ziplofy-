import{j as e,b as m,q as p,u as h,r as d,i as o,z as g}from"./index-C7S6h9OR.js";const b=({purchaseOrder:t,onRowClick:s})=>{const a=typeof t.supplierId=="string"?t.supplierId:t.supplierId?.name||t.supplierId?._id,l=typeof t.destinationLocationId=="string"?t.destinationLocationId:t.destinationLocationId?.name||t.destinationLocationId?._id,i=t.status.replaceAll("_"," "),r=t.status==="ordered",n=t.status==="received";return e.jsxs("tr",{onClick:()=>s(t._id),className:"hover:bg-blue-50/50 cursor-pointer transition-colors",children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:t._id}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-600",children:a}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-600",children:l}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-1 text-xs font-medium rounded-lg border ${n?"bg-green-50 text-green-700 border-green-200/80":r?"bg-blue-50 text-blue-700 border-blue-200/80":"bg-gray-100 text-gray-600 border-gray-200/80"}`,children:i})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-600 text-right",children:t.totalCost!=null?t.totalCost.toFixed(2):"-"}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-600",children:t.expectedArrivalDate?new Date(t.expectedArrivalDate).toLocaleDateString():"-"})]})},u=({purchaseOrders:t,onRowClick:s})=>e.jsxs("tbody",{className:"bg-white divide-y divide-gray-100",children:[t.map(a=>e.jsx(b,{purchaseOrder:a,onRowClick:s},a._id)),t.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-12 text-center text-sm text-gray-500",children:"No purchase orders"})})]}),y=({purchaseOrders:t,onRowClick:s})=>e.jsxs("table",{className:"min-w-full divide-y divide-gray-100",children:[e.jsx("thead",{className:"bg-gray-50/80",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"PO ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Supplier"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Destination"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600",children:"Total"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Expected Arrival"})]})}),e.jsx(u,{purchaseOrders:t,onRowClick:s})]});function f(){const{activeStoreId:t}=m(),{purchaseOrders:s,fetchPurchaseOrdersByStore:a,loading:l,error:i}=p(),r=h();d.useEffect(()=>{t&&a(t).catch(()=>{})},[t,a]);const n=d.useCallback(()=>{r("/products/purchase-orders/new")},[r]),x=d.useCallback(c=>{r(`/products/purchase-orders/${c}`)},[r]);return e.jsx("div",{className:"min-h-screen bg-page-background-color",children:e.jsxs("div",{className:"max-w-[1400px] mx-auto px-3 sm:px-4 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 flex-wrap gap-4",children:[e.jsxs("div",{className:"pl-3 border-l-4 border-blue-500/60",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:"Purchase Orders"}),e.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:"Create and manage purchase orders from suppliers"})]}),e.jsxs("button",{onClick:n,className:"inline-flex items-center gap-1.5 px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 text-sm font-semibold transition-colors shadow-sm",children:[e.jsx(o,{className:"w-4 h-4"}),"Create purchase order"]})]}),i&&e.jsx("div",{className:"mb-4 rounded-lg border border-red-200 bg-red-50 px-4 py-3",children:e.jsx("p",{className:"text-sm text-red-600",children:i})}),l&&e.jsx("div",{className:"bg-white rounded-xl border border-gray-200/80 shadow-sm flex justify-center items-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-2 border-gray-200 border-t-blue-600"})}),!l&&s.length===0&&e.jsx("div",{className:"bg-white rounded-xl border border-gray-200/80 shadow-sm min-h-[320px] flex justify-center items-center p-12",children:e.jsxs("div",{className:"flex flex-col justify-center items-center text-center gap-4 max-w-md",children:[e.jsx("div",{className:"w-14 h-14 rounded-xl bg-blue-50 flex items-center justify-center",children:e.jsx(g,{className:"w-7 h-7 text-blue-600"})}),e.jsx("p",{className:"text-sm text-gray-500",children:"No purchase orders yet"}),e.jsxs("button",{onClick:n,className:"inline-flex items-center gap-1.5 px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 text-sm font-semibold transition-colors shadow-sm",children:[e.jsx(o,{className:"w-4 h-4"}),"Create purchase order"]})]})}),!l&&s.length>0&&e.jsx("div",{className:"bg-white rounded-xl border border-gray-200/80 shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsx(y,{purchaseOrders:s,onRowClick:x})})})]})})}export{f as default};
