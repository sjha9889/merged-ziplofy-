import{c as P,b as _,t as E,u as R,R as i,r as o,j as a}from"./index-C7S6h9OR.js";import{G as y}from"./GridBackgroundWrapper-Du1VLjut.js";import{T as h}from"./ToggleSwitch-DRYMOlwW.js";import{F as T}from"./ArrowLeftIcon-C1qOxHB_.js";const W=()=>{const{locations:j,updateLocation:l}=P(),{activeStoreId:u,stores:f}=_(),v=E(),g=R(),[p,x]=i.useState(!1),[k,r]=i.useState(!1),[w,d]=i.useState(!1),[C,m]=i.useState(!1),N=v.pathname.split("/").pop(),e=j.find(s=>s._id===N),n=i.useMemo(()=>f.find(t=>t._id===u)?.defaultLocation===e?._id,[f,u,e]);i.useEffect(()=>{e&&(x(n?!0:e.isFulfillmentAllowed),r(e.canShip),d(e.canLocalDeliver),m(e.canPickup))},[e,n]);const b=o.useCallback(()=>{g("/settings/locations")},[g]),S=o.useCallback(async s=>{const t=s;x(t);try{if(!e)return;t?await l(e._id,{isFulfillmentAllowed:!0}):(r(!1),d(!1),m(!1),await l(e._id,{isFulfillmentAllowed:!1,canShip:!1,canLocalDeliver:!1,canPickup:!1}))}catch{x(c=>!c)}},[e,l]),L=o.useCallback(async s=>{const t=s;r(t);try{await l(e._id,{canShip:t})}catch{r(c=>!c)}},[e,l]),D=o.useCallback(async s=>{const t=s;d(t);try{await l(e._id,{canLocalDeliver:t})}catch{d(c=>!c)}},[e,l]),A=o.useCallback(async s=>{const t=s;m(t);try{await l(e._id,{canPickup:t})}catch{m(c=>!c)}},[e,l]);if(!e)return a.jsx(y,{children:a.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Location not found"}),a.jsx("button",{onClick:b,className:"mt-3 px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Back"})]})});const F=[e.address,e.apartment,e.city,e.state,e.postalCode,e.countryRegion].filter(Boolean).join(", ");return a.jsx(y,{children:a.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3 border-b border-gray-200 pb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:b,className:"p-1 hover:bg-gray-50 transition-colors",children:a.jsx(T,{className:"w-5 h-5 text-gray-600"})}),a.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Location"})]}),a.jsx("span",{className:`px-2 py-0.5 text-xs font-medium ${e.isActive?"bg-gray-100 text-gray-700":"bg-gray-100 text-gray-500"}`,children:e.isActive?"Active":"Inactive"})]}),a.jsxs("div",{className:"bg-white/95 p-3 border border-gray-200 mb-3",children:[a.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-1",children:e.name}),a.jsx("p",{className:"text-xs text-gray-500",children:F})]}),a.jsxs("div",{className:"bg-white/95 p-3 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Fulfillment"}),a.jsx(h,{checked:p,onChange:S,disabled:n,label:n?"Enable (Default location locked)":"Enable"})]}),n&&a.jsx("p",{className:"text-xs text-gray-500 mb-3 block",children:"This is your default location. To change whether you fulfill online orders from this location, select another default location first."}),(n||p)&&a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[a.jsx("div",{children:a.jsx(h,{checked:k,onChange:L,label:"Allow Shipping"})}),a.jsx("div",{children:a.jsx(h,{checked:w,onChange:D,label:"Allow Local Delivery"})}),a.jsx("div",{children:a.jsx(h,{checked:C,onChange:A,label:"Allow Pickup In-Store"})})]})]})]})})};export{W as default};
