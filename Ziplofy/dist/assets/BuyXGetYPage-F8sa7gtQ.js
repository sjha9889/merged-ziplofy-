import{u as me,b as de,d as ue,h as xe,B as he,C as ge,E as pe,r as i,j as e,k as ye}from"./index-C7S6h9OR.js";import{G as be}from"./GridBackgroundWrapper-Du1VLjut.js";import{M as n}from"./MultiSelect-DYMnqjW0.js";import{S as Q}from"./Select-DGEw1X1o.js";import{F as je}from"./ArrowLeftIcon-C1qOxHB_.js";const Se=()=>{const o=me(),{activeStoreId:l}=de(),{searchBasic:N,loading:v}=ue(),{searchCollections:C,loading:w,collections:m}=xe(),{segments:b,searchCustomerSegments:S,fetchSegmentsByStoreId:k,loading:M}=he(),{customers:j,searchCustomers:D,fetchCustomersByStoreId:I,loading:_}=ge(),{createDiscount:P,loading:f,error:O}=pe(),[s,L]=i.useState({method:"discount-code",discountCode:"",title:"",allowDiscountOnChannels:!1,customerBuys:"minimum-quantity",quantity:"",amount:"",anyItemsFrom:"specific-products",searchQuery:"",customerGetsQuantity:"",customerGetsAnyItemsFrom:"specific-products",customerGetsSearchQuery:"",discountedValue:"free",discountedAmount:"",discountedPercentage:"",setMaxUsersPerOrder:!1,maxUsersPerOrder:"",eligibility:"all-customers",eligibilitySearchQuery:"",applyOnPOSPro:!1,limitTotalUses:!1,totalUsesLimit:"",limitOneUsePerCustomer:!1,productDiscounts:!1,orderDiscounts:!1,shippingDiscounts:!1,startDate:"",startTime:"",setEndDate:!1,endDate:"",endTime:""}),[F,T]=i.useState([]),[d,R]=i.useState([]),[u,$]=i.useState([]),[A,B]=i.useState([]),[x,X]=i.useState([]),[h,Y]=i.useState([]),[g,W]=i.useState([]),[p,z]=i.useState([]),[H,J]=i.useState(""),[K,Z]=i.useState(""),r=i.useCallback((t,a)=>{L(c=>({...c,[t]:a}))},[]),E=i.useCallback((()=>{let t;return async(a,c)=>{window.clearTimeout(t),t=window.setTimeout(async()=>{if(l){if(!a.trim()){c==="buy"?T([]):B([]);return}try{const q=(await N({q:a,storeId:l})).map(y=>({_id:y._id,title:y.title,sku:y.sku,imageUrl:y.imageUrl}));c==="buy"?T(q):B(q)}catch{}}},300)}})(),[l,N]),U=i.useCallback((()=>{let t;return async a=>{window.clearTimeout(t),t=window.setTimeout(async()=>{if(l)try{await C(l,a||"",1,10)}catch{}},300)}})(),[l,C]),ee=i.useCallback((()=>{let t;return async a=>{window.clearTimeout(t),t=window.setTimeout(async()=>{if(l)if(a.trim())try{await S(l,a)}catch{}else try{await k(l)}catch{}},300)}})(),[l,S,k]),se=i.useCallback((()=>{let t;return async a=>{window.clearTimeout(t),t=window.setTimeout(async()=>{if(l)if(a.trim())try{await D(l,a)}catch{}else try{await I(l)}catch{}},300)}})(),[l,D,I]),G=i.useCallback(()=>{o("/discounts?createDiscountModal=open")},[o]),te=i.useCallback(async t=>{t.preventDefault();try{const a={storeId:l,method:s.method,...s.method==="discount-code"?{discountCode:s.discountCode}:{},...s.method==="automatic"?{title:s.title}:{},allowDiscountOnChannels:s.allowDiscountOnChannels,customerBuys:s.customerBuys,...s.customerBuys==="minimum-quantity"?{quantity:Number(s.quantity)||0}:{},...s.customerBuys==="minimum-amount"?{amount:Number(s.amount)||0}:{},anyItemsFrom:s.anyItemsFrom,customerGetsQuantity:Number(s.customerGetsQuantity)||1,customerGetsAnyItemsFrom:s.customerGetsAnyItemsFrom,discountedValue:s.discountedValue,...s.discountedValue==="amount"?{discountedAmount:Number(s.discountedAmount)||0}:{},...s.discountedValue==="percentage"?{discountedPercentage:Number(s.discountedPercentage)||0}:{},setMaxUsersPerOrder:s.setMaxUsersPerOrder,...s.setMaxUsersPerOrder?{maxUsersPerOrder:Number(s.maxUsersPerOrder)||0}:{},eligibility:s.eligibility,applyOnPOSPro:s.applyOnPOSPro,limitTotalUses:s.limitTotalUses,...s.limitTotalUses?{totalUsesLimit:Number(s.totalUsesLimit)||0}:{},limitOneUsePerCustomer:s.limitOneUsePerCustomer,productDiscounts:s.productDiscounts,orderDiscounts:s.orderDiscounts,shippingDiscounts:s.shippingDiscounts,startDate:s.startDate||void 0,startTime:s.startTime||void 0,setEndDate:s.setEndDate,endDate:s.endDate||void 0,endTime:s.endTime||void 0,status:"active",buysProductIds:d,buysCollectionIds:u,getsProductIds:x,getsCollectionIds:h,targetCustomerSegmentIds:g,targetCustomerIds:p};(await P(a)).success&&o("/discounts")}catch{}},[s,d,u,x,h,g,p,l,P,o]),V=[{value:"specific-products",label:"Specific products"},{value:"specific-collections",label:"Specific collections"}],ae=F.map(t=>({value:t._id,label:t.title})),re=m.map(t=>({value:t._id,label:t.title})),ce=A.map(t=>({value:t._id,label:t.title})),ie=m.map(t=>({value:t._id,label:t.title})),le=b.map(t=>({value:t._id,label:t.name})),ne=j.map(t=>({value:t._id,label:`${t.firstName} ${t.lastName}`.trim()||t.email,secondaryText:t.email}));return e.jsx(be,{children:e.jsxs("div",{className:"min-h-screen",children:[e.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:G,className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:e.jsx(je,{className:"w-4 h-4"})}),e.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Buy X get Y"})]})}),e.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:e.jsxs("form",{onSubmit:te,children:[O&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-red-800",children:O}),e.jsx("button",{type:"button",onClick:()=>{},className:"text-red-600 hover:text-red-800",children:e.jsx(ye,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[e.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Method"}),e.jsxs("fieldset",{className:"mb-3",children:[e.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Discount Method"}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"method",value:"discount-code",checked:s.method==="discount-code",onChange:t=>r("method",t.target.value),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Discount code"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"method",value:"automatic",checked:s.method==="automatic",onChange:t=>r("method",t.target.value),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Automatic discount"})]})]})]}),s.method==="discount-code"&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Discount code"}),e.jsx("input",{type:"text",value:s.discountCode,onChange:t=>r("discountCode",t.target.value),placeholder:"Enter discount code",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),e.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Customers will enter this code at checkout"})]}),s.method==="automatic"&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Title"}),e.jsx("input",{type:"text",value:s.title,onChange:t=>r("title",t.target.value),placeholder:"Enter discount title",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),e.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"This title will be shown to customers"})]})]}),s.method==="discount-code"&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"my-4 border-gray-200"}),e.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[e.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Sales channel access"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.allowDiscountOnChannels,onChange:t=>r("allowDiscountOnChannels",t.target.checked),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Allow discount to be featured on selected channels"})]})]})]}),e.jsx("hr",{className:"my-4 border-gray-200"}),e.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[e.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:s.customerBuys==="minimum-amount"?"Customer spends":"Customer buys"}),e.jsxs("fieldset",{className:"mb-3",children:[e.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:s.customerBuys==="minimum-amount"?"Customer spends":"Customer buys"}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"customerBuys",value:"minimum-quantity",checked:s.customerBuys==="minimum-quantity",onChange:t=>r("customerBuys",t.target.value),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Minimum quantity of items"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"customerBuys",value:"minimum-amount",checked:s.customerBuys==="minimum-amount",onChange:t=>r("customerBuys",t.target.value),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Minimum purchase amount"})]})]})]}),(s.customerBuys==="minimum-quantity"||s.customerBuys==="minimum-amount")&&e.jsx("div",{className:"mt-3",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:s.customerBuys==="minimum-quantity"?"Quantity":"Amount"}),s.customerBuys==="minimum-amount"?e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2 text-gray-500 text-sm",children:"₹"}),e.jsx("input",{type:"number",value:s.amount,onChange:t=>r("amount",t.target.value),placeholder:"Enter minimum amount",className:"w-full px-3 py-1.5 pl-8 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"})]}):e.jsx("input",{type:"number",value:s.quantity,onChange:t=>r("quantity",t.target.value),placeholder:"Enter minimum quantity",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),e.jsx("p",{className:"mt-1 text-xs text-gray-600",children:s.customerBuys==="minimum-quantity"?"Enter the minimum quantity of items required":"Enter the minimum purchase amount in rupees"})]}),e.jsx("div",{children:e.jsx(Q,{label:"Any items from",value:s.anyItemsFrom,options:V,onChange:t=>r("anyItemsFrom",t)})}),e.jsxs("div",{className:"col-span-full",children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:s.anyItemsFrom==="specific-products"?"Search products":"Search collections"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:s.searchQuery,onChange:t=>{const a=t.target.value;r("searchQuery",a),s.anyItemsFrom==="specific-products"?E(a,"buy"):U(a)},placeholder:s.anyItemsFrom==="specific-products"?"Search for products...":"Search for collections...",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 pr-10 text-base"}),(s.anyItemsFrom==="specific-products"&&v||s.anyItemsFrom==="specific-collections"&&w)&&e.jsx("div",{className:"absolute right-3 top-2",children:e.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-600",children:s.anyItemsFrom==="specific-products"?"Search and select products to apply the discount to":"Search and select collections to apply the discount to"})]}),s.anyItemsFrom==="specific-products"&&e.jsxs("div",{className:"col-span-full",children:[e.jsx(n,{label:"Choose Products",value:d,options:ae,onChange:R,renderValue:t=>F.filter(c=>t.includes(c._id)).map(c=>c.title).join(", ")}),e.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[d.length," product(s) selected"]})]}),s.anyItemsFrom==="specific-collections"&&e.jsxs("div",{className:"col-span-full",children:[e.jsx(n,{label:"Choose Collections",value:u,options:re,onChange:$,renderValue:t=>m.filter(c=>t.includes(c._id)).map(c=>c.title).join(", ")}),e.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[u.length," collection(s) selected"]})]})]})})]}),e.jsx("hr",{className:"my-4 border-gray-200"}),e.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[e.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Customer gets"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Quantity"}),e.jsx("input",{type:"number",value:s.customerGetsQuantity,onChange:t=>r("customerGetsQuantity",t.target.value),placeholder:"Enter quantity",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),e.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the quantity of items customers will get"})]}),e.jsx("div",{children:e.jsx(Q,{label:"Any items from",value:s.customerGetsAnyItemsFrom,options:V,onChange:t=>r("customerGetsAnyItemsFrom",t)})}),e.jsxs("div",{className:"col-span-full",children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:s.customerGetsAnyItemsFrom==="specific-products"?"Search products":"Search collections"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:s.customerGetsSearchQuery,onChange:t=>{const a=t.target.value;r("customerGetsSearchQuery",a),s.customerGetsAnyItemsFrom==="specific-products"?E(a,"get"):U(a)},placeholder:s.customerGetsAnyItemsFrom==="specific-products"?"Search for products...":"Search for collections...",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 pr-10 text-base"}),(s.customerGetsAnyItemsFrom==="specific-products"&&v||s.customerGetsAnyItemsFrom==="specific-collections"&&w)&&e.jsx("div",{className:"absolute right-3 top-2",children:e.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-600",children:s.customerGetsAnyItemsFrom==="specific-products"?"Search and select products to apply the discount to":"Search and select collections to apply the discount to"})]}),s.customerGetsAnyItemsFrom==="specific-products"&&e.jsxs("div",{className:"col-span-full",children:[e.jsx(n,{label:"Choose Products",value:x,options:ce,onChange:X,renderValue:t=>A.filter(c=>t.includes(c._id)).map(c=>c.title).join(", ")}),e.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[x.length," product(s) selected"]})]}),s.customerGetsAnyItemsFrom==="specific-collections"&&e.jsxs("div",{className:"col-span-full",children:[e.jsx(n,{label:"Choose Collections",value:h,options:ie,onChange:Y,renderValue:t=>m.filter(c=>t.includes(c._id)).map(c=>c.title).join(", ")}),e.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[h.length," collection(s) selected"]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"text-base font-medium mb-3 text-gray-900",children:"At a discounted value"}),e.jsxs("fieldset",{className:"mb-3",children:[e.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Discounted Value"}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"discountedValue",value:"free",checked:s.discountedValue==="free",onChange:t=>r("discountedValue",t.target.value),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Free"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"discountedValue",value:"amount",checked:s.discountedValue==="amount",onChange:t=>r("discountedValue",t.target.value),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Amount of each"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"discountedValue",value:"percentage",checked:s.discountedValue==="percentage",onChange:t=>r("discountedValue",t.target.value),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Percentage"})]})]})]}),s.discountedValue==="amount"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2 text-gray-500 text-sm",children:"₹"}),e.jsx("input",{type:"number",value:s.discountedAmount,onChange:t=>r("discountedAmount",t.target.value),placeholder:"Enter amount",className:"w-full px-3 py-1.5 pl-8 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the amount in rupees"})]}),e.jsx("p",{className:"mt-2 text-xs text-gray-600",children:"For multiple quantities, the discount amount will be taken off each eligible item."})]}),s.discountedValue==="percentage"&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Percentage"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:s.discountedPercentage,onChange:t=>r("discountedPercentage",t.target.value),placeholder:"Enter percentage",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 pr-8 text-base"}),e.jsx("span",{className:"absolute right-3 top-2 text-gray-500 text-sm",children:"%"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the percentage discount"})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.setMaxUsersPerOrder,onChange:t=>r("setMaxUsersPerOrder",t.target.checked),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Set a maximum number of users per order"})]}),s.setMaxUsersPerOrder&&e.jsxs("div",{className:"ml-6 mt-2",children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Maximum number of users per order"}),e.jsx("input",{type:"number",value:s.maxUsersPerOrder,onChange:t=>r("maxUsersPerOrder",t.target.value),placeholder:"Enter maximum number",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),e.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the maximum number of users per order"})]})]})]})]}),e.jsx("hr",{className:"my-4 border-gray-200"}),e.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[e.jsx("h2",{className:"text-base font-medium mb-1 text-gray-900",children:"Eligibility"}),e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Available on all sales channels"}),e.jsxs("fieldset",{className:"mb-3",children:[e.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Customer Eligibility"}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"eligibility",value:"all-customers",checked:s.eligibility==="all-customers",onChange:t=>r("eligibility",t.target.value),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"All customers"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"eligibility",value:"specific-customer-segments",checked:s.eligibility==="specific-customer-segments",onChange:t=>r("eligibility",t.target.value),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Specific customer segments"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"eligibility",value:"specific-customers",checked:s.eligibility==="specific-customers",onChange:t=>r("eligibility",t.target.value),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Specific customers"})]})]})]}),s.method==="automatic"&&s.eligibility==="all-customers"&&e.jsx("div",{className:"ml-2 mt-2",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.applyOnPOSPro,onChange:t=>r("applyOnPOSPro",t.target.checked),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Apply on POS Pro locations"})]})}),(s.eligibility==="specific-customer-segments"||s.eligibility==="specific-customers")&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:s.eligibility==="specific-customer-segments"?"Search customer segments":"Search customers"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:s.eligibility==="specific-customer-segments"?H:K,onChange:t=>{const a=t.target.value;s.eligibility==="specific-customer-segments"?(J(a),ee(a)):(Z(a),se(a))},placeholder:s.eligibility==="specific-customer-segments"?"Search for customer segments...":"Search for customers...",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 pr-10 text-base"}),(s.eligibility==="specific-customer-segments"&&M||s.eligibility==="specific-customers"&&_)&&e.jsx("div",{className:"absolute right-3 top-2",children:e.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-600",children:s.eligibility==="specific-customer-segments"?"Search and select customer segments to apply the discount to":"Search and select customers to apply the discount to"}),s.eligibility==="specific-customer-segments"&&b.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx(n,{label:"Choose Customer Segments",value:g,options:le,onChange:W,renderValue:t=>b.filter(a=>t.includes(a._id)).map(a=>a.name).join(", ")}),e.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[g.length," segment(s) selected"]})]}),s.eligibility==="specific-customers"&&j.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx(n,{label:"Choose Customers",value:p,options:ne,onChange:z,renderValue:t=>j.filter(a=>t.includes(a._id)).map(a=>`${a.firstName} ${a.lastName}`.trim()||a.email).join(", ")}),e.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[p.length," customer(s) selected"]})]})]})]}),s.method==="discount-code"&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"my-4 border-gray-200"}),e.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[e.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Maximum discount uses"}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.limitTotalUses,onChange:t=>r("limitTotalUses",t.target.checked),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Limit number of times this discount can be used in total"})]}),s.limitTotalUses&&e.jsxs("div",{className:"ml-6 mt-2",children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Total uses limit"}),e.jsx("input",{type:"number",value:s.totalUsesLimit,onChange:t=>r("totalUsesLimit",t.target.value),placeholder:"Enter maximum number of uses",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),e.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the maximum number of times this discount can be used"})]})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.limitOneUsePerCustomer,onChange:t=>r("limitOneUsePerCustomer",t.target.checked),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Limit to one use per customer"})]})})]})]}),e.jsx("hr",{className:"my-4 border-gray-200"}),e.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[e.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Combinations"}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.productDiscounts,onChange:t=>r("productDiscounts",t.target.checked),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Product Discounts"})]}),s.productDiscounts&&e.jsx("p",{className:"mt-1 ml-6 text-xs text-gray-600",children:"Each eligible item in the cart may receive up to one product discount."})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.orderDiscounts,onChange:t=>r("orderDiscounts",t.target.checked),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Order Discounts"})]}),s.orderDiscounts&&e.jsx("p",{className:"mt-1 ml-6 text-xs text-gray-600",children:"All eligible order discounts will apply in addition to eligible product discounts."})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.shippingDiscounts,onChange:t=>r("shippingDiscounts",t.target.checked),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Shipping Discounts"})]}),s.shippingDiscounts&&e.jsx("p",{className:"mt-1 ml-6 text-xs text-gray-600",children:"The largest eligible shipping discount will apply in addition to eligible product discounts."})]}),(s.productDiscounts||s.orderDiscounts||s.shippingDiscounts)&&e.jsx("div",{className:"mt-3 p-3 bg-white/95 border border-gray-200",children:e.jsx("p",{className:"text-xs text-gray-600",children:"This discount won't combine with any other discount at checkout."})})]}),e.jsx("hr",{className:"my-4 border-gray-200"}),e.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[e.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Active dates"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Start date"}),e.jsx("input",{type:"date",value:s.startDate,onChange:t=>r("startDate",t.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Start time (IST)"}),e.jsx("input",{type:"time",value:s.startTime,onChange:t=>r("startTime",t.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),e.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Indian Standard Time"})]})]}),e.jsx("div",{className:"mt-3",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.setEndDate,onChange:t=>r("setEndDate",t.target.checked),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Set end date"})]})}),s.setEndDate&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mt-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"End date"}),e.jsx("input",{type:"date",value:s.endDate,onChange:t=>r("endDate",t.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"End time (IST)"}),e.jsx("input",{type:"time",value:s.endTime,onChange:t=>r("endTime",t.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),e.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Indian Standard Time"})]})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end mt-4",children:[e.jsx("button",{type:"button",onClick:G,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:f,className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:[f&&e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),f?"Creating...":"Create Discount"]})]})]})})]})})};export{Se as default};
