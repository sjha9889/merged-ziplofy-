function p9(s,r){for(var e=0;e<r.length;e++){const t=r[e];if(typeof t!="string"&&!Array.isArray(t)){for(const a in t)if(a!=="default"&&!(a in s)){const o=Object.getOwnPropertyDescriptor(t,a);o&&Object.defineProperty(s,a,o.get?o:{enumerable:!0,get:()=>t[a]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))t(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function e(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(a){if(a.ep)return;a.ep=!0;const o=e(a);fetch(a.href,o)}})();var X0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bw(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var A1={exports:{}},Wg={};var S5;function h9(){if(S5)return Wg;S5=1;var s=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function e(t,a,o){var i=null;if(o!==void 0&&(i=""+o),a.key!==void 0&&(i=""+a.key),"key"in a){o={};for(var l in a)l!=="key"&&(o[l]=a[l])}else o=a;return a=o.ref,{$$typeof:s,type:t,key:i,ref:a!==void 0?a:null,props:o}}return Wg.Fragment=r,Wg.jsx=e,Wg.jsxs=e,Wg}var N5;function m9(){return N5||(N5=1,A1.exports=h9()),A1.exports}var n=m9(),M1={exports:{}},Bn={};var k5;function g9(){if(k5)return Bn;k5=1;var s=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),t=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),i=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),g=Symbol.iterator;function y(K){return K===null||typeof K!="object"?null:(K=g&&K[g]||K["@@iterator"],typeof K=="function"?K:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,w={};function C(K,Z,ve){this.props=K,this.context=Z,this.refs=w,this.updater=ve||b}C.prototype.isReactComponent={},C.prototype.setState=function(K,Z){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,Z,"setState")},C.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function k(){}k.prototype=C.prototype;function N(K,Z,ve){this.props=K,this.context=Z,this.refs=w,this.updater=ve||b}var O=N.prototype=new k;O.constructor=N,v(O,C.prototype),O.isPureReactComponent=!0;var R=Array.isArray;function L(){}var B={H:null,A:null,T:null,S:null},G=Object.prototype.hasOwnProperty;function $(K,Z,ve){var ae=ve.ref;return{$$typeof:s,type:K,key:Z,ref:ae!==void 0?ae:null,props:ve}}function z(K,Z){return $(K.type,Z,K.props)}function Y(K){return typeof K=="object"&&K!==null&&K.$$typeof===s}function M(K){var Z={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(ve){return Z[ve]})}var q=/\/+/g;function P(K,Z){return typeof K=="object"&&K!==null&&K.key!=null?M(""+K.key):Z.toString(36)}function H(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(L,L):(K.status="pending",K.then(function(Z){K.status==="pending"&&(K.status="fulfilled",K.value=Z)},function(Z){K.status==="pending"&&(K.status="rejected",K.reason=Z)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function D(K,Z,ve,ae,Se){var Pe=typeof K;(Pe==="undefined"||Pe==="boolean")&&(K=null);var $e=!1;if(K===null)$e=!0;else switch(Pe){case"bigint":case"string":case"number":$e=!0;break;case"object":switch(K.$$typeof){case s:case r:$e=!0;break;case p:return $e=K._init,D($e(K._payload),Z,ve,ae,Se)}}if($e)return Se=Se(K),$e=ae===""?"."+P(K,0):ae,R(Se)?(ve="",$e!=null&&(ve=$e.replace(q,"$&/")+"/"),D(Se,Z,ve,"",function(ze){return ze})):Se!=null&&(Y(Se)&&(Se=z(Se,ve+(Se.key==null||K&&K.key===Se.key?"":(""+Se.key).replace(q,"$&/")+"/")+$e)),Z.push(Se)),1;$e=0;var we=ae===""?".":ae+":";if(R(K))for(var Ae=0;Ae<K.length;Ae++)ae=K[Ae],Pe=we+P(ae,Ae),$e+=D(ae,Z,ve,Pe,Se);else if(Ae=y(K),typeof Ae=="function")for(K=Ae.call(K),Ae=0;!(ae=K.next()).done;)ae=ae.value,Pe=we+P(ae,Ae++),$e+=D(ae,Z,ve,Pe,Se);else if(Pe==="object"){if(typeof K.then=="function")return D(H(K),Z,ve,ae,Se);throw Z=String(K),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return $e}function X(K,Z,ve){if(K==null)return K;var ae=[],Se=0;return D(K,ae,"","",function(Pe){return Z.call(ve,Pe,Se++)}),ae}function se(K){if(K._status===-1){var Z=K._result;Z=Z(),Z.then(function(ve){(K._status===0||K._status===-1)&&(K._status=1,K._result=ve)},function(ve){(K._status===0||K._status===-1)&&(K._status=2,K._result=ve)}),K._status===-1&&(K._status=0,K._result=Z)}if(K._status===1)return K._result.default;throw K._result}var Q=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)},xe={map:X,forEach:function(K,Z,ve){X(K,function(){Z.apply(this,arguments)},ve)},count:function(K){var Z=0;return X(K,function(){Z++}),Z},toArray:function(K){return X(K,function(Z){return Z})||[]},only:function(K){if(!Y(K))throw Error("React.Children.only expected to receive a single React element child.");return K}};return Bn.Activity=h,Bn.Children=xe,Bn.Component=C,Bn.Fragment=e,Bn.Profiler=a,Bn.PureComponent=N,Bn.StrictMode=t,Bn.Suspense=c,Bn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,Bn.__COMPILER_RUNTIME={__proto__:null,c:function(K){return B.H.useMemoCache(K)}},Bn.cache=function(K){return function(){return K.apply(null,arguments)}},Bn.cacheSignal=function(){return null},Bn.cloneElement=function(K,Z,ve){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var ae=v({},K.props),Se=K.key;if(Z!=null)for(Pe in Z.key!==void 0&&(Se=""+Z.key),Z)!G.call(Z,Pe)||Pe==="key"||Pe==="__self"||Pe==="__source"||Pe==="ref"&&Z.ref===void 0||(ae[Pe]=Z[Pe]);var Pe=arguments.length-2;if(Pe===1)ae.children=ve;else if(1<Pe){for(var $e=Array(Pe),we=0;we<Pe;we++)$e[we]=arguments[we+2];ae.children=$e}return $(K.type,Se,ae)},Bn.createContext=function(K){return K={$$typeof:i,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:o,_context:K},K},Bn.createElement=function(K,Z,ve){var ae,Se={},Pe=null;if(Z!=null)for(ae in Z.key!==void 0&&(Pe=""+Z.key),Z)G.call(Z,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(Se[ae]=Z[ae]);var $e=arguments.length-2;if($e===1)Se.children=ve;else if(1<$e){for(var we=Array($e),Ae=0;Ae<$e;Ae++)we[Ae]=arguments[Ae+2];Se.children=we}if(K&&K.defaultProps)for(ae in $e=K.defaultProps,$e)Se[ae]===void 0&&(Se[ae]=$e[ae]);return $(K,Pe,Se)},Bn.createRef=function(){return{current:null}},Bn.forwardRef=function(K){return{$$typeof:l,render:K}},Bn.isValidElement=Y,Bn.lazy=function(K){return{$$typeof:p,_payload:{_status:-1,_result:K},_init:se}},Bn.memo=function(K,Z){return{$$typeof:d,type:K,compare:Z===void 0?null:Z}},Bn.startTransition=function(K){var Z=B.T,ve={};B.T=ve;try{var ae=K(),Se=B.S;Se!==null&&Se(ve,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(L,Q)}catch(Pe){Q(Pe)}finally{Z!==null&&ve.types!==null&&(Z.types=ve.types),B.T=Z}},Bn.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},Bn.use=function(K){return B.H.use(K)},Bn.useActionState=function(K,Z,ve){return B.H.useActionState(K,Z,ve)},Bn.useCallback=function(K,Z){return B.H.useCallback(K,Z)},Bn.useContext=function(K){return B.H.useContext(K)},Bn.useDebugValue=function(){},Bn.useDeferredValue=function(K,Z){return B.H.useDeferredValue(K,Z)},Bn.useEffect=function(K,Z){return B.H.useEffect(K,Z)},Bn.useEffectEvent=function(K){return B.H.useEffectEvent(K)},Bn.useId=function(){return B.H.useId()},Bn.useImperativeHandle=function(K,Z,ve){return B.H.useImperativeHandle(K,Z,ve)},Bn.useInsertionEffect=function(K,Z){return B.H.useInsertionEffect(K,Z)},Bn.useLayoutEffect=function(K,Z){return B.H.useLayoutEffect(K,Z)},Bn.useMemo=function(K,Z){return B.H.useMemo(K,Z)},Bn.useOptimistic=function(K,Z){return B.H.useOptimistic(K,Z)},Bn.useReducer=function(K,Z,ve){return B.H.useReducer(K,Z,ve)},Bn.useRef=function(K){return B.H.useRef(K)},Bn.useState=function(K){return B.H.useState(K)},Bn.useSyncExternalStore=function(K,Z,ve){return B.H.useSyncExternalStore(K,Z,ve)},Bn.useTransition=function(){return B.H.useTransition()},Bn.version="19.2.4",Bn}var _5;function gx(){return _5||(_5=1,M1.exports=g9()),M1.exports}var u=gx();const pt=Bw(u),vS=p9({__proto__:null,default:pt},[u]);var I1={exports:{}},qg={},R1={exports:{}},D1={};var E5;function y9(){return E5||(E5=1,(function(s){function r(D,X){var se=D.length;D.push(X);e:for(;0<se;){var Q=se-1>>>1,xe=D[Q];if(0<a(xe,X))D[Q]=X,D[se]=xe,se=Q;else break e}}function e(D){return D.length===0?null:D[0]}function t(D){if(D.length===0)return null;var X=D[0],se=D.pop();if(se!==X){D[0]=se;e:for(var Q=0,xe=D.length,K=xe>>>1;Q<K;){var Z=2*(Q+1)-1,ve=D[Z],ae=Z+1,Se=D[ae];if(0>a(ve,se))ae<xe&&0>a(Se,ve)?(D[Q]=Se,D[ae]=se,Q=ae):(D[Q]=ve,D[Z]=se,Q=Z);else if(ae<xe&&0>a(Se,se))D[Q]=Se,D[ae]=se,Q=ae;else break e}}return X}function a(D,X){var se=D.sortIndex-X.sortIndex;return se!==0?se:D.id-X.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;s.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();s.unstable_now=function(){return i.now()-l}}var c=[],d=[],p=1,h=null,g=3,y=!1,b=!1,v=!1,w=!1,C=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function O(D){for(var X=e(d);X!==null;){if(X.callback===null)t(d);else if(X.startTime<=D)t(d),X.sortIndex=X.expirationTime,r(c,X);else break;X=e(d)}}function R(D){if(v=!1,O(D),!b)if(e(c)!==null)b=!0,L||(L=!0,M());else{var X=e(d);X!==null&&H(R,X.startTime-D)}}var L=!1,B=-1,G=5,$=-1;function z(){return w?!0:!(s.unstable_now()-$<G)}function Y(){if(w=!1,L){var D=s.unstable_now();$=D;var X=!0;try{e:{b=!1,v&&(v=!1,k(B),B=-1),y=!0;var se=g;try{t:{for(O(D),h=e(c);h!==null&&!(h.expirationTime>D&&z());){var Q=h.callback;if(typeof Q=="function"){h.callback=null,g=h.priorityLevel;var xe=Q(h.expirationTime<=D);if(D=s.unstable_now(),typeof xe=="function"){h.callback=xe,O(D),X=!0;break t}h===e(c)&&t(c),O(D)}else t(c);h=e(c)}if(h!==null)X=!0;else{var K=e(d);K!==null&&H(R,K.startTime-D),X=!1}}break e}finally{h=null,g=se,y=!1}X=void 0}}finally{X?M():L=!1}}}var M;if(typeof N=="function")M=function(){N(Y)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,P=q.port2;q.port1.onmessage=Y,M=function(){P.postMessage(null)}}else M=function(){C(Y,0)};function H(D,X){B=C(function(){D(s.unstable_now())},X)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(D){D.callback=null},s.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<D?Math.floor(1e3/D):5},s.unstable_getCurrentPriorityLevel=function(){return g},s.unstable_next=function(D){switch(g){case 1:case 2:case 3:var X=3;break;default:X=g}var se=g;g=X;try{return D()}finally{g=se}},s.unstable_requestPaint=function(){w=!0},s.unstable_runWithPriority=function(D,X){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var se=g;g=D;try{return X()}finally{g=se}},s.unstable_scheduleCallback=function(D,X,se){var Q=s.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?Q+se:Q):se=Q,D){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=se+xe,D={id:p++,callback:X,priorityLevel:D,startTime:se,expirationTime:xe,sortIndex:-1},se>Q?(D.sortIndex=se,r(d,D),e(c)===null&&D===e(d)&&(v?(k(B),B=-1):v=!0,H(R,se-Q))):(D.sortIndex=xe,r(c,D),b||y||(b=!0,L||(L=!0,M()))),D},s.unstable_shouldYield=z,s.unstable_wrapCallback=function(D){var X=g;return function(){var se=g;g=X;try{return D.apply(this,arguments)}finally{g=se}}}})(D1)),D1}var T5;function x9(){return T5||(T5=1,R1.exports=y9()),R1.exports}var L1={exports:{}},Ko={};var O5;function v9(){if(O5)return Ko;O5=1;var s=gx();function r(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var t={d:{f:e,r:function(){throw Error(r(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(c,d,p){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:h==null?null:""+h,children:c,containerInfo:d,implementation:p}}var i=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Ko.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=t,Ko.createPortal=function(c,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(r(299));return o(c,d,null,p)},Ko.flushSync=function(c){var d=i.T,p=t.p;try{if(i.T=null,t.p=2,c)return c()}finally{i.T=d,t.p=p,t.d.f()}},Ko.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,t.d.C(c,d))},Ko.prefetchDNS=function(c){typeof c=="string"&&t.d.D(c)},Ko.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var p=d.as,h=l(p,d.crossOrigin),g=typeof d.integrity=="string"?d.integrity:void 0,y=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?t.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:h,integrity:g,fetchPriority:y}):p==="script"&&t.d.X(c,{crossOrigin:h,integrity:g,fetchPriority:y,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Ko.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=l(d.as,d.crossOrigin);t.d.M(c,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&t.d.M(c)},Ko.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,h=l(p,d.crossOrigin);t.d.L(c,p,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Ko.preloadModule=function(c,d){if(typeof c=="string")if(d){var p=l(d.as,d.crossOrigin);t.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else t.d.m(c)},Ko.requestFormReset=function(c){t.d.r(c)},Ko.unstable_batchedUpdates=function(c,d){return c(d)},Ko.useFormState=function(c,d,p){return i.H.useFormState(c,d,p)},Ko.useFormStatus=function(){return i.H.useHostTransitionStatus()},Ko.version="19.2.4",Ko}var P5;function gO(){if(P5)return L1.exports;P5=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(r){console.error(r)}}return s(),L1.exports=v9(),L1.exports}var A5;function b9(){if(A5)return qg;A5=1;var s=x9(),r=gx(),e=gO();function t(f){var x="https://react.dev/errors/"+f;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)x+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+f+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function o(f){var x=f,S=f;if(f.alternate)for(;x.return;)x=x.return;else{f=x;do x=f,(x.flags&4098)!==0&&(S=x.return),f=x.return;while(f)}return x.tag===3?S:null}function i(f){if(f.tag===13){var x=f.memoizedState;if(x===null&&(f=f.alternate,f!==null&&(x=f.memoizedState)),x!==null)return x.dehydrated}return null}function l(f){if(f.tag===31){var x=f.memoizedState;if(x===null&&(f=f.alternate,f!==null&&(x=f.memoizedState)),x!==null)return x.dehydrated}return null}function c(f){if(o(f)!==f)throw Error(t(188))}function d(f){var x=f.alternate;if(!x){if(x=o(f),x===null)throw Error(t(188));return x!==f?null:f}for(var S=f,T=x;;){var F=S.return;if(F===null)break;var W=F.alternate;if(W===null){if(T=F.return,T!==null){S=T;continue}break}if(F.child===W.child){for(W=F.child;W;){if(W===S)return c(F),f;if(W===T)return c(F),x;W=W.sibling}throw Error(t(188))}if(S.return!==T.return)S=F,T=W;else{for(var me=!1,Le=F.child;Le;){if(Le===S){me=!0,S=F,T=W;break}if(Le===T){me=!0,T=F,S=W;break}Le=Le.sibling}if(!me){for(Le=W.child;Le;){if(Le===S){me=!0,S=W,T=F;break}if(Le===T){me=!0,T=W,S=F;break}Le=Le.sibling}if(!me)throw Error(t(189))}}if(S.alternate!==T)throw Error(t(190))}if(S.tag!==3)throw Error(t(188));return S.stateNode.current===S?f:x}function p(f){var x=f.tag;if(x===5||x===26||x===27||x===6)return f;for(f=f.child;f!==null;){if(x=p(f),x!==null)return x;f=f.sibling}return null}var h=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),N=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),$=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function M(f){return f===null||typeof f!="object"?null:(f=Y&&f[Y]||f["@@iterator"],typeof f=="function"?f:null)}var q=Symbol.for("react.client.reference");function P(f){if(f==null)return null;if(typeof f=="function")return f.$$typeof===q?null:f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case v:return"Fragment";case C:return"Profiler";case w:return"StrictMode";case R:return"Suspense";case L:return"SuspenseList";case $:return"Activity"}if(typeof f=="object")switch(f.$$typeof){case b:return"Portal";case N:return f.displayName||"Context";case k:return(f._context.displayName||"Context")+".Consumer";case O:var x=f.render;return f=f.displayName,f||(f=x.displayName||x.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case B:return x=f.displayName||null,x!==null?x:P(f.type)||"Memo";case G:x=f._payload,f=f._init;try{return P(f(x))}catch{}}return null}var H=Array.isArray,D=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},Q=[],xe=-1;function K(f){return{current:f}}function Z(f){0>xe||(f.current=Q[xe],Q[xe]=null,xe--)}function ve(f,x){xe++,Q[xe]=f.current,f.current=x}var ae=K(null),Se=K(null),Pe=K(null),$e=K(null);function we(f,x){switch(ve(Pe,x),ve(Se,f),ve(ae,null),x.nodeType){case 9:case 11:f=(f=x.documentElement)&&(f=f.namespaceURI)?G_(f):0;break;default:if(f=x.tagName,x=x.namespaceURI)x=G_(x),f=K_(x,f);else switch(f){case"svg":f=1;break;case"math":f=2;break;default:f=0}}Z(ae),ve(ae,f)}function Ae(){Z(ae),Z(Se),Z(Pe)}function ze(f){f.memoizedState!==null&&ve($e,f);var x=ae.current,S=K_(x,f.type);x!==S&&(ve(Se,f),ve(ae,S))}function Ge(f){Se.current===f&&(Z(ae),Z(Se)),$e.current===f&&(Z($e),$g._currentValue=se)}var Ue,ht;function ee(f){if(Ue===void 0)try{throw Error()}catch(S){var x=S.stack.trim().match(/\n( *(at )?)/);Ue=x&&x[1]||"",ht=-1<S.stack.indexOf(`
    at`)?" (<anonymous>)":-1<S.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ue+f+ht}var ue=!1;function Oe(f,x){if(!f||ue)return"";ue=!0;var S=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var T={DetermineComponentFrameRoot:function(){try{if(x){var pr=function(){throw Error()};if(Object.defineProperty(pr.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pr,[])}catch(Gt){var Ut=Gt}Reflect.construct(f,[],pr)}else{try{pr.call()}catch(Gt){Ut=Gt}f.call(pr.prototype)}}else{try{throw Error()}catch(Gt){Ut=Gt}(pr=f())&&typeof pr.catch=="function"&&pr.catch(function(){})}}catch(Gt){if(Gt&&Ut&&typeof Gt.stack=="string")return[Gt.stack,Ut.stack]}return[null,null]}};T.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var F=Object.getOwnPropertyDescriptor(T.DetermineComponentFrameRoot,"name");F&&F.configurable&&Object.defineProperty(T.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var W=T.DetermineComponentFrameRoot(),me=W[0],Le=W[1];if(me&&Le){var ft=me.split(`
`),Dt=Le.split(`
`);for(F=T=0;T<ft.length&&!ft[T].includes("DetermineComponentFrameRoot");)T++;for(;F<Dt.length&&!Dt[F].includes("DetermineComponentFrameRoot");)F++;if(T===ft.length||F===Dt.length)for(T=ft.length-1,F=Dt.length-1;1<=T&&0<=F&&ft[T]!==Dt[F];)F--;for(;1<=T&&0<=F;T--,F--)if(ft[T]!==Dt[F]){if(T!==1||F!==1)do if(T--,F--,0>F||ft[T]!==Dt[F]){var nr=`
`+ft[T].replace(" at new "," at ");return f.displayName&&nr.includes("<anonymous>")&&(nr=nr.replace("<anonymous>",f.displayName)),nr}while(1<=T&&0<=F);break}}}finally{ue=!1,Error.prepareStackTrace=S}return(S=f?f.displayName||f.name:"")?ee(S):""}function J(f,x){switch(f.tag){case 26:case 27:case 5:return ee(f.type);case 16:return ee("Lazy");case 13:return f.child!==x&&x!==null?ee("Suspense Fallback"):ee("Suspense");case 19:return ee("SuspenseList");case 0:case 15:return Oe(f.type,!1);case 11:return Oe(f.type.render,!1);case 1:return Oe(f.type,!0);case 31:return ee("Activity");default:return""}}function I(f){try{var x="",S=null;do x+=J(f,S),S=f,f=f.return;while(f);return x}catch(T){return`
Error generating stack: `+T.message+`
`+T.stack}}var V=Object.prototype.hasOwnProperty,re=s.unstable_scheduleCallback,pe=s.unstable_cancelCallback,ge=s.unstable_shouldYield,Ce=s.unstable_requestPaint,he=s.unstable_now,ie=s.unstable_getCurrentPriorityLevel,Fe=s.unstable_ImmediatePriority,We=s.unstable_UserBlockingPriority,Qe=s.unstable_NormalPriority,de=s.unstable_LowPriority,Ee=s.unstable_IdlePriority,le=s.log,Ye=s.unstable_setDisableYieldValue,De=null,ct=null;function ot(f){if(typeof le=="function"&&Ye(f),ct&&typeof ct.setStrictMode=="function")try{ct.setStrictMode(De,f)}catch{}}var dt=Math.clz32?Math.clz32:At,Ke=Math.log,kt=Math.LN2;function At(f){return f>>>=0,f===0?32:31-(Ke(f)/kt|0)|0}var xt=256,Xt=262144,br=4194304;function zt(f){var x=f&42;if(x!==0)return x;switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return f&261888;case 262144:case 524288:case 1048576:case 2097152:return f&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return f&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return f}}function be(f,x,S){var T=f.pendingLanes;if(T===0)return 0;var F=0,W=f.suspendedLanes,me=f.pingedLanes;f=f.warmLanes;var Le=T&134217727;return Le!==0?(T=Le&~W,T!==0?F=zt(T):(me&=Le,me!==0?F=zt(me):S||(S=Le&~f,S!==0&&(F=zt(S))))):(Le=T&~W,Le!==0?F=zt(Le):me!==0?F=zt(me):S||(S=T&~f,S!==0&&(F=zt(S)))),F===0?0:x!==0&&x!==F&&(x&W)===0&&(W=F&-F,S=x&-x,W>=S||W===32&&(S&4194048)!==0)?x:F}function Be(f,x){return(f.pendingLanes&~(f.suspendedLanes&~f.pingedLanes)&x)===0}function et(f,x){switch(f){case 1:case 2:case 4:case 8:case 64:return x+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wt(){var f=br;return br<<=1,(br&62914560)===0&&(br=4194304),f}function $t(f){for(var x=[],S=0;31>S;S++)x.push(f);return x}function tr(f,x){f.pendingLanes|=x,x!==268435456&&(f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0)}function Lr(f,x,S,T,F,W){var me=f.pendingLanes;f.pendingLanes=S,f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0,f.expiredLanes&=S,f.entangledLanes&=S,f.errorRecoveryDisabledLanes&=S,f.shellSuspendCounter=0;var Le=f.entanglements,ft=f.expirationTimes,Dt=f.hiddenUpdates;for(S=me&~S;0<S;){var nr=31-dt(S),pr=1<<nr;Le[nr]=0,ft[nr]=-1;var Ut=Dt[nr];if(Ut!==null)for(Dt[nr]=null,nr=0;nr<Ut.length;nr++){var Gt=Ut[nr];Gt!==null&&(Gt.lane&=-536870913)}S&=~pr}T!==0&&tn(f,T,0),W!==0&&F===0&&f.tag!==0&&(f.suspendedLanes|=W&~(me&~x))}function tn(f,x,S){f.pendingLanes|=x,f.suspendedLanes&=~x;var T=31-dt(x);f.entangledLanes|=x,f.entanglements[T]=f.entanglements[T]|1073741824|S&261930}function bn(f,x){var S=f.entangledLanes|=x;for(f=f.entanglements;S;){var T=31-dt(S),F=1<<T;F&x|f[T]&x&&(f[T]|=x),S&=~F}}function Fr(f,x){var S=x&-x;return S=(S&42)!==0?1:rr(S),(S&(f.suspendedLanes|x))!==0?0:S}function rr(f){switch(f){case 2:f=1;break;case 8:f=4;break;case 32:f=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:f=128;break;case 268435456:f=134217728;break;default:f=0}return f}function wr(f){return f&=-f,2<f?8<f?(f&134217727)!==0?32:268435456:8:2}function an(){var f=X.p;return f!==0?f:(f=window.event,f===void 0?32:y5(f.type))}function En(f,x){var S=X.p;try{return X.p=f,x()}finally{X.p=S}}var rn=Math.random().toString(36).slice(2),kr="__reactFiber$"+rn,jr="__reactProps$"+rn,mt="__reactContainer$"+rn,yr="__reactEvents$"+rn,An="__reactListeners$"+rn,fn="__reactHandles$"+rn,wn="__reactResources$"+rn,zr="__reactMarker$"+rn;function In(f){delete f[kr],delete f[jr],delete f[yr],delete f[An],delete f[fn]}function ne(f){var x=f[kr];if(x)return x;for(var S=f.parentNode;S;){if(x=S[mt]||S[kr]){if(S=x.alternate,x.child!==null||S!==null&&S.child!==null)for(f=t5(f);f!==null;){if(S=f[kr])return S;f=t5(f)}return x}f=S,S=f.parentNode}return null}function ke(f){if(f=f[kr]||f[mt]){var x=f.tag;if(x===5||x===6||x===13||x===31||x===26||x===27||x===3)return f}return null}function Re(f){var x=f.tag;if(x===5||x===26||x===27||x===6)return f.stateNode;throw Error(t(33))}function Ze(f){var x=f[wn];return x||(x=f[wn]={hoistableStyles:new Map,hoistableScripts:new Map}),x}function st(f){f[zr]=!0}var Ct=new Set,Xe={};function Ve(f,x){je(f,x),je(f+"Capture",x)}function je(f,x){for(Xe[f]=x,f=0;f<x.length;f++)Ct.add(x[f])}var He=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),at={},Ot={};function ce(f){return V.call(Ot,f)?!0:V.call(at,f)?!1:He.test(f)?Ot[f]=!0:(at[f]=!0,!1)}function Te(f,x,S){if(ce(x))if(S===null)f.removeAttribute(x);else{switch(typeof S){case"undefined":case"function":case"symbol":f.removeAttribute(x);return;case"boolean":var T=x.toLowerCase().slice(0,5);if(T!=="data-"&&T!=="aria-"){f.removeAttribute(x);return}}f.setAttribute(x,""+S)}}function ut(f,x,S){if(S===null)f.removeAttribute(x);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(x);return}f.setAttribute(x,""+S)}}function jt(f,x,S,T){if(T===null)f.removeAttribute(S);else{switch(typeof T){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(S);return}f.setAttributeNS(x,S,""+T)}}function Lt(f){switch(typeof f){case"bigint":case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function ur(f){var x=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(x==="checkbox"||x==="radio")}function Br(f,x,S){var T=Object.getOwnPropertyDescriptor(f.constructor.prototype,x);if(!f.hasOwnProperty(x)&&typeof T<"u"&&typeof T.get=="function"&&typeof T.set=="function"){var F=T.get,W=T.set;return Object.defineProperty(f,x,{configurable:!0,get:function(){return F.call(this)},set:function(me){S=""+me,W.call(this,me)}}),Object.defineProperty(f,x,{enumerable:T.enumerable}),{getValue:function(){return S},setValue:function(me){S=""+me},stopTracking:function(){f._valueTracker=null,delete f[x]}}}}function _t(f){if(!f._valueTracker){var x=ur(f)?"checked":"value";f._valueTracker=Br(f,x,""+f[x])}}function Kr(f){if(!f)return!1;var x=f._valueTracker;if(!x)return!0;var S=x.getValue(),T="";return f&&(T=ur(f)?f.checked?"true":"false":f.value),f=T,f!==S?(x.setValue(f),!0):!1}function Zr(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}var ps=/[\n"\\]/g;function Xn(f){return f.replace(ps,function(x){return"\\"+x.charCodeAt(0).toString(16)+" "})}function ds(f,x,S,T,F,W,me,Le){f.name="",me!=null&&typeof me!="function"&&typeof me!="symbol"&&typeof me!="boolean"?f.type=me:f.removeAttribute("type"),x!=null?me==="number"?(x===0&&f.value===""||f.value!=x)&&(f.value=""+Lt(x)):f.value!==""+Lt(x)&&(f.value=""+Lt(x)):me!=="submit"&&me!=="reset"||f.removeAttribute("value"),x!=null?sa(f,me,Lt(x)):S!=null?sa(f,me,Lt(S)):T!=null&&f.removeAttribute("value"),F==null&&W!=null&&(f.defaultChecked=!!W),F!=null&&(f.checked=F&&typeof F!="function"&&typeof F!="symbol"),Le!=null&&typeof Le!="function"&&typeof Le!="symbol"&&typeof Le!="boolean"?f.name=""+Lt(Le):f.removeAttribute("name")}function Ea(f,x,S,T,F,W,me,Le){if(W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"&&(f.type=W),x!=null||S!=null){if(!(W!=="submit"&&W!=="reset"||x!=null)){_t(f);return}S=S!=null?""+Lt(S):"",x=x!=null?""+Lt(x):S,Le||x===f.value||(f.value=x),f.defaultValue=x}T=T??F,T=typeof T!="function"&&typeof T!="symbol"&&!!T,f.checked=Le?f.checked:!!T,f.defaultChecked=!!T,me!=null&&typeof me!="function"&&typeof me!="symbol"&&typeof me!="boolean"&&(f.name=me),_t(f)}function sa(f,x,S){x==="number"&&Zr(f.ownerDocument)===f||f.defaultValue===""+S||(f.defaultValue=""+S)}function Is(f,x,S,T){if(f=f.options,x){x={};for(var F=0;F<S.length;F++)x["$"+S[F]]=!0;for(S=0;S<f.length;S++)F=x.hasOwnProperty("$"+f[S].value),f[S].selected!==F&&(f[S].selected=F),F&&T&&(f[S].defaultSelected=!0)}else{for(S=""+Lt(S),x=null,F=0;F<f.length;F++){if(f[F].value===S){f[F].selected=!0,T&&(f[F].defaultSelected=!0);return}x!==null||f[F].disabled||(x=f[F])}x!==null&&(x.selected=!0)}}function ya(f,x,S){if(x!=null&&(x=""+Lt(x),x!==f.value&&(f.value=x),S==null)){f.defaultValue!==x&&(f.defaultValue=x);return}f.defaultValue=S!=null?""+Lt(S):""}function Ir(f,x,S,T){if(x==null){if(T!=null){if(S!=null)throw Error(t(92));if(H(T)){if(1<T.length)throw Error(t(93));T=T[0]}S=T}S==null&&(S=""),x=S}S=Lt(x),f.defaultValue=S,T=f.textContent,T===S&&T!==""&&T!==null&&(f.value=T),_t(f)}function _r(f,x){if(x){var S=f.firstChild;if(S&&S===f.lastChild&&S.nodeType===3){S.nodeValue=x;return}}f.textContent=x}var gt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ar(f,x,S){var T=x.indexOf("--")===0;S==null||typeof S=="boolean"||S===""?T?f.setProperty(x,""):x==="float"?f.cssFloat="":f[x]="":T?f.setProperty(x,S):typeof S!="number"||S===0||gt.has(x)?x==="float"?f.cssFloat=S:f[x]=(""+S).trim():f[x]=S+"px"}function Or(f,x,S){if(x!=null&&typeof x!="object")throw Error(t(62));if(f=f.style,S!=null){for(var T in S)!S.hasOwnProperty(T)||x!=null&&x.hasOwnProperty(T)||(T.indexOf("--")===0?f.setProperty(T,""):T==="float"?f.cssFloat="":f[T]="");for(var F in x)T=x[F],x.hasOwnProperty(F)&&S[F]!==T&&ar(f,F,T)}else for(var W in x)x.hasOwnProperty(W)&&ar(f,W,x[W])}function Mr(f){if(f.indexOf("-")===-1)return!1;switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sn=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $n(f){return jn.test(""+f)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":f}function Fn(){}var Wn=null;function so(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var xa=null,qn=null;function Vn(f){var x=ke(f);if(x&&(f=x.stateNode)){var S=f[jr]||null;e:switch(f=x.stateNode,x.type){case"input":if(ds(f,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name),x=S.name,S.type==="radio"&&x!=null){for(S=f;S.parentNode;)S=S.parentNode;for(S=S.querySelectorAll('input[name="'+Xn(""+x)+'"][type="radio"]'),x=0;x<S.length;x++){var T=S[x];if(T!==f&&T.form===f.form){var F=T[jr]||null;if(!F)throw Error(t(90));ds(T,F.value,F.defaultValue,F.defaultValue,F.checked,F.defaultChecked,F.type,F.name)}}for(x=0;x<S.length;x++)T=S[x],T.form===f.form&&Kr(T)}break e;case"textarea":ya(f,S.value,S.defaultValue);break e;case"select":x=S.value,x!=null&&Is(f,!!S.multiple,x,!1)}}}var Gn=!1;function _s(f,x,S){if(Gn)return f(x,S);Gn=!0;try{var T=f(x);return T}finally{if(Gn=!1,(xa!==null||qn!==null)&&(T0(),xa&&(x=xa,f=qn,qn=xa=null,Vn(x),f)))for(x=0;x<f.length;x++)Vn(f[x])}}function Ta(f,x){var S=f.stateNode;if(S===null)return null;var T=S[jr]||null;if(T===null)return null;S=T[x];e:switch(x){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(T=!T.disabled)||(f=f.type,T=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!T;break e;default:f=!1}if(f)return null;if(S&&typeof S!="function")throw Error(t(231,x,typeof S));return S}var Fs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vs=!1;if(Fs)try{var Kn={};Object.defineProperty(Kn,"passive",{get:function(){vs=!0}}),window.addEventListener("test",Kn,Kn),window.removeEventListener("test",Kn,Kn)}catch{vs=!1}var Rs=null,aa=null,Wr=null;function qr(){if(Wr)return Wr;var f,x=aa,S=x.length,T,F="value"in Rs?Rs.value:Rs.textContent,W=F.length;for(f=0;f<S&&x[f]===F[f];f++);var me=S-f;for(T=1;T<=me&&x[S-T]===F[W-T];T++);return Wr=F.slice(f,1<T?1-T:void 0)}function on(f){var x=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&x===13&&(f=13)):f=x,f===10&&(f=13),32<=f||f===13?f:0}function nn(){return!0}function Ie(){return!1}function it(f){function x(S,T,F,W,me){this._reactName=S,this._targetInst=F,this.type=T,this.nativeEvent=W,this.target=me,this.currentTarget=null;for(var Le in f)f.hasOwnProperty(Le)&&(S=f[Le],this[Le]=S?S(W):W[Le]);return this.isDefaultPrevented=(W.defaultPrevented!=null?W.defaultPrevented:W.returnValue===!1)?nn:Ie,this.isPropagationStopped=Ie,this}return h(x.prototype,{preventDefault:function(){this.defaultPrevented=!0;var S=this.nativeEvent;S&&(S.preventDefault?S.preventDefault():typeof S.returnValue!="unknown"&&(S.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var S=this.nativeEvent;S&&(S.stopPropagation?S.stopPropagation():typeof S.cancelBubble!="unknown"&&(S.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),x}var Et={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mt=it(Et),Pt=h({},Et,{view:0,detail:0}),or=it(Pt),Vt,Ft,Cr,Rt=h({},Pt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:va,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==Cr&&(Cr&&f.type==="mousemove"?(Vt=f.screenX-Cr.screenX,Ft=f.screenY-Cr.screenY):Ft=Vt=0,Cr=f),Vt)},movementY:function(f){return"movementY"in f?f.movementY:Ft}}),fr=it(Rt),Rr=h({},Rt,{dataTransfer:0}),Er=it(Rr),Yr=h({},Pt,{relatedTarget:0}),Gr=it(Yr),mn=h({},Et,{animationName:0,elapsedTime:0,pseudoElement:0}),Xr=it(mn),Vr=h({},Et,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),Yn=it(Vr),Qr=h({},Et,{data:0}),da=it(Qr),Rn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hs(f){var x=this.nativeEvent;return x.getModifierState?x.getModifierState(f):(f=Jr[f])?!!x[f]:!1}function va(){return hs}var rs=h({},Pt,{key:function(f){if(f.key){var x=Rn[f.key]||f.key;if(x!=="Unidentified")return x}return f.type==="keypress"?(f=on(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?Qo[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:va,charCode:function(f){return f.type==="keypress"?on(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?on(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),Bs=it(rs),Uo=h({},Rt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vo=it(Uo),Ds=h({},Pt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:va}),Li=it(Ds),ui=h({},Et,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ho=it(ui),sd=h({},Rt,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),Al=it(sd),gc=h({},Et,{newState:0,oldState:0}),yc=it(gc),tt=[9,13,27,32],Ht=Fs&&"CompositionEvent"in window,qt=null;Fs&&"documentMode"in document&&(qt=document.documentMode);var er=Fs&&"TextEvent"in window&&!qt,xr=Fs&&(!Ht||qt&&8<qt&&11>=qt),pn=" ",Un=!1;function zs(f,x){switch(f){case"keyup":return tt.indexOf(x.keyCode)!==-1;case"keydown":return x.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ns(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var $s=!1;function Jo(f,x){switch(f){case"compositionend":return ns(x);case"keypress":return x.which!==32?null:(Un=!0,pn);case"textInput":return f=x.data,f===pn&&Un?null:f;default:return null}}function Xa(f,x){if($s)return f==="compositionend"||!Ht&&zs(f,x)?(f=qr(),Wr=aa=Rs=null,$s=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(x.ctrlKey||x.altKey||x.metaKey)||x.ctrlKey&&x.altKey){if(x.char&&1<x.char.length)return x.char;if(x.which)return String.fromCharCode(x.which)}return null;case"compositionend":return xr&&x.locale!=="ko"?null:x.data;default:return null}}var rl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ye(f){var x=f&&f.nodeName&&f.nodeName.toLowerCase();return x==="input"?!!rl[f.type]:x==="textarea"}function Me(f,x,S,T){xa?qn?qn.push(T):qn=[T]:xa=T,x=D0(x,"onChange"),0<x.length&&(S=new Mt("onChange","change",null,S,T),f.push({event:S,listeners:x}))}var Je=null,lt=null;function Nt(f){$_(f,0)}function bt(f){var x=Re(f);if(Kr(x))return f}function Jt(f,x){if(f==="change")return x}var Nr=!1;if(Fs){var _n;if(Fs){var Cn="oninput"in document;if(!Cn){var Oa=document.createElement("div");Oa.setAttribute("oninput","return;"),Cn=typeof Oa.oninput=="function"}_n=Cn}else _n=!1;Nr=_n&&(!document.documentMode||9<document.documentMode)}function Qa(){Je&&(Je.detachEvent("onpropertychange",hf),lt=Je=null)}function hf(f){if(f.propertyName==="value"&&bt(lt)){var x=[];Me(x,lt,f,so(f)),_s(Nt,x)}}function mf(f,x,S){f==="focusin"?(Qa(),Je=x,lt=S,Je.attachEvent("onpropertychange",hf)):f==="focusout"&&Qa()}function qx(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return bt(lt)}function gf(f,x){if(f==="click")return bt(x)}function Gx(f,x){if(f==="input"||f==="change")return bt(x)}function Kx(f,x){return f===x&&(f!==0||1/f===1/x)||f!==f&&x!==x}var To=typeof Object.is=="function"?Object.is:Kx;function xc(f,x){if(To(f,x))return!0;if(typeof f!="object"||f===null||typeof x!="object"||x===null)return!1;var S=Object.keys(f),T=Object.keys(x);if(S.length!==T.length)return!1;for(T=0;T<S.length;T++){var F=S[T];if(!V.call(x,F)||!To(f[F],x[F]))return!1}return!0}function Bm(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function yf(f,x){var S=Bm(f);f=0;for(var T;S;){if(S.nodeType===3){if(T=f+S.textContent.length,f<=x&&T>=x)return{node:S,offset:x-f};f=T}e:{for(;S;){if(S.nextSibling){S=S.nextSibling;break e}S=S.parentNode}S=void 0}S=Bm(S)}}function fi(f,x){return f&&x?f===x?!0:f&&f.nodeType===3?!1:x&&x.nodeType===3?fi(f,x.parentNode):"contains"in f?f.contains(x):f.compareDocumentPosition?!!(f.compareDocumentPosition(x)&16):!1:!1}function zm(f){f=f!=null&&f.ownerDocument!=null&&f.ownerDocument.defaultView!=null?f.ownerDocument.defaultView:window;for(var x=Zr(f.document);x instanceof f.HTMLIFrameElement;){try{var S=typeof x.contentWindow.location.href=="string"}catch{S=!1}if(S)f=x.contentWindow;else break;x=Zr(f.document)}return x}function xf(f){var x=f&&f.nodeName&&f.nodeName.toLowerCase();return x&&(x==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||x==="textarea"||f.contentEditable==="true")}var $m=Fs&&"documentMode"in document&&11>=document.documentMode,ad=null,Bp=null,od=null,Um=!1;function Yx(f,x,S){var T=S.window===S?S.document:S.nodeType===9?S:S.ownerDocument;Um||ad==null||ad!==Zr(T)||(T=ad,"selectionStart"in T&&xf(T)?T={start:T.selectionStart,end:T.selectionEnd}:(T=(T.ownerDocument&&T.ownerDocument.defaultView||window).getSelection(),T={anchorNode:T.anchorNode,anchorOffset:T.anchorOffset,focusNode:T.focusNode,focusOffset:T.focusOffset}),od&&xc(od,T)||(od=T,T=D0(Bp,"onSelect"),0<T.length&&(x=new Mt("onSelect","select",null,x,S),f.push({event:x,listeners:T}),x.target=ad)))}function id(f,x){var S={};return S[f.toLowerCase()]=x.toLowerCase(),S["Webkit"+f]="webkit"+x,S["Moz"+f]="moz"+x,S}var pi={animationend:id("Animation","AnimationEnd"),animationiteration:id("Animation","AnimationIteration"),animationstart:id("Animation","AnimationStart"),transitionrun:id("Transition","TransitionRun"),transitionstart:id("Transition","TransitionStart"),transitioncancel:id("Transition","TransitionCancel"),transitionend:id("Transition","TransitionEnd")},vc={},ld={};Fs&&(ld=document.createElement("div").style,"AnimationEvent"in window||(delete pi.animationend.animation,delete pi.animationiteration.animation,delete pi.animationstart.animation),"TransitionEvent"in window||delete pi.transitionend.transition);function Ml(f){if(vc[f])return vc[f];if(!pi[f])return f;var x=pi[f],S;for(S in x)if(x.hasOwnProperty(S)&&S in ld)return vc[f]=x[S];return f}var zp=Ml("animationend"),Vm=Ml("animationiteration"),$p=Ml("animationstart"),cd=Ml("transitionrun"),dd=Ml("transitionstart"),Oo=Ml("transitioncancel"),Il=Ml("transitionend"),Rl=new Map,cu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");cu.push("scrollEnd");function Fi(f,x){Rl.set(f,x),Ve(x,[f])}var vf=typeof reportError=="function"?reportError:function(f){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var x=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof f=="object"&&f!==null&&typeof f.message=="string"?String(f.message):String(f),error:f});if(!window.dispatchEvent(x))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",f);return}console.error(f)},vo=[],ud=0,Up=0;function fd(){for(var f=ud,x=Up=ud=0;x<f;){var S=vo[x];vo[x++]=null;var T=vo[x];vo[x++]=null;var F=vo[x];vo[x++]=null;var W=vo[x];if(vo[x++]=null,T!==null&&F!==null){var me=T.pending;me===null?F.next=F:(F.next=me.next,me.next=F),T.pending=F}W!==0&&Hp(S,F,W)}}function Vp(f,x,S,T){vo[ud++]=f,vo[ud++]=x,vo[ud++]=S,vo[ud++]=T,Up|=T,f.lanes|=T,f=f.alternate,f!==null&&(f.lanes|=T)}function bf(f,x,S,T){return Vp(f,x,S,T),du(f)}function bc(f,x){return Vp(f,null,null,x),du(f)}function Hp(f,x,S){f.lanes|=S;var T=f.alternate;T!==null&&(T.lanes|=S);for(var F=!1,W=f.return;W!==null;)W.childLanes|=S,T=W.alternate,T!==null&&(T.childLanes|=S),W.tag===22&&(f=W.stateNode,f===null||f._visibility&1||(F=!0)),f=W,W=W.return;return f.tag===3?(W=f.stateNode,F&&x!==null&&(F=31-dt(S),f=W.hiddenUpdates,T=f[F],T===null?f[F]=[x]:T.push(x),x.lane=S|536870912),W):null}function du(f){if(50<Ig)throw Ig=0,r1=null,Error(t(185));for(var x=f.return;x!==null;)f=x,x=f.return;return f.tag===3?f.stateNode:null}var Bi={};function Wp(f,x,S,T){this.tag=f,this.key=S,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=x,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=T,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wo(f,x,S,T){return new Wp(f,x,S,T)}function uu(f){return f=f.prototype,!(!f||!f.isReactComponent)}function Dl(f,x){var S=f.alternate;return S===null?(S=Wo(f.tag,x,f.key,f.mode),S.elementType=f.elementType,S.type=f.type,S.stateNode=f.stateNode,S.alternate=f,f.alternate=S):(S.pendingProps=x,S.type=f.type,S.flags=0,S.subtreeFlags=0,S.deletions=null),S.flags=f.flags&65011712,S.childLanes=f.childLanes,S.lanes=f.lanes,S.child=f.child,S.memoizedProps=f.memoizedProps,S.memoizedState=f.memoizedState,S.updateQueue=f.updateQueue,x=f.dependencies,S.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext},S.sibling=f.sibling,S.index=f.index,S.ref=f.ref,S.refCleanup=f.refCleanup,S}function Zx(f,x){f.flags&=65011714;var S=f.alternate;return S===null?(f.childLanes=0,f.lanes=x,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=S.childLanes,f.lanes=S.lanes,f.child=S.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=S.memoizedProps,f.memoizedState=S.memoizedState,f.updateQueue=S.updateQueue,f.type=S.type,x=S.dependencies,f.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext}),f}function qp(f,x,S,T,F,W){var me=0;if(T=f,typeof f=="function")uu(f)&&(me=1);else if(typeof f=="string")me=t9(f,S,ae.current)?26:f==="html"||f==="head"||f==="body"?27:5;else e:switch(f){case $:return f=Wo(31,S,x,F),f.elementType=$,f.lanes=W,f;case v:return Ll(S.children,F,W,x);case w:me=8,F|=24;break;case C:return f=Wo(12,S,x,F|2),f.elementType=C,f.lanes=W,f;case R:return f=Wo(13,S,x,F),f.elementType=R,f.lanes=W,f;case L:return f=Wo(19,S,x,F),f.elementType=L,f.lanes=W,f;default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case N:me=10;break e;case k:me=9;break e;case O:me=11;break e;case B:me=14;break e;case G:me=16,T=null;break e}me=29,S=Error(t(130,f===null?"null":typeof f,"")),T=null}return x=Wo(me,S,x,F),x.elementType=f,x.type=T,x.lanes=W,x}function Ll(f,x,S,T){return f=Wo(7,f,T,x),f.lanes=S,f}function wf(f,x,S){return f=Wo(6,f,null,x),f.lanes=S,f}function pd(f){var x=Wo(18,null,null,0);return x.stateNode=f,x}function hd(f,x,S){return x=Wo(4,f.children!==null?f.children:[],f.key,x),x.lanes=S,x.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},x}var Xx=new WeakMap;function Po(f,x){if(typeof f=="object"&&f!==null){var S=Xx.get(f);return S!==void 0?S:(x={value:f,source:x,stack:I(x)},Xx.set(f,x),x)}return{value:f,source:x,stack:I(x)}}var md=[],nl=0,jf=null,zi=0,bo=[],Ja=0,hi=null,Ao=1,$i="";function sl(f,x){md[nl++]=zi,md[nl++]=jf,jf=f,zi=x}function Hm(f,x,S){bo[Ja++]=Ao,bo[Ja++]=$i,bo[Ja++]=hi,hi=f;var T=Ao;f=$i;var F=32-dt(T)-1;T&=~(1<<F),S+=1;var W=32-dt(x)+F;if(30<W){var me=F-F%5;W=(T&(1<<me)-1).toString(32),T>>=me,F-=me,Ao=1<<32-dt(x)+F|S<<F|T,$i=W+f}else Ao=1<<W|S<<F|T,$i=f}function Wm(f){f.return!==null&&(sl(f,1),Hm(f,1,0))}function Fl(f){for(;f===jf;)jf=md[--nl],md[nl]=null,zi=md[--nl],md[nl]=null;for(;f===hi;)hi=bo[--Ja],bo[Ja]=null,$i=bo[--Ja],bo[Ja]=null,Ao=bo[--Ja],bo[Ja]=null}function wc(f,x){bo[Ja++]=Ao,bo[Ja++]=$i,bo[Ja++]=hi,Ao=x.id,$i=x.overflow,hi=f}var ao=null,oa=null,ss=!1,jc=null,mi=!1,qm=Error(t(519));function Pa(f){var x=Error(t(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Cc(Po(x,f)),qm}function La(f){var x=f.stateNode,S=f.type,T=f.memoizedProps;switch(x[kr]=f,x[jr]=T,S){case"dialog":os("cancel",x),os("close",x);break;case"iframe":case"object":case"embed":os("load",x);break;case"video":case"audio":for(S=0;S<Dg.length;S++)os(Dg[S],x);break;case"source":os("error",x);break;case"img":case"image":case"link":os("error",x),os("load",x);break;case"details":os("toggle",x);break;case"input":os("invalid",x),Ea(x,T.value,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name,!0);break;case"select":os("invalid",x);break;case"textarea":os("invalid",x),Ir(x,T.value,T.defaultValue,T.children)}S=T.children,typeof S!="string"&&typeof S!="number"&&typeof S!="bigint"||x.textContent===""+S||T.suppressHydrationWarning===!0||W_(x.textContent,S)?(T.popover!=null&&(os("beforetoggle",x),os("toggle",x)),T.onScroll!=null&&os("scroll",x),T.onScrollEnd!=null&&os("scrollend",x),T.onClick!=null&&(x.onclick=Fn),x=!0):x=!1,x||Pa(f,!0)}function oo(f){for(ao=f.return;ao;)switch(ao.tag){case 5:case 31:case 13:mi=!1;return;case 27:case 3:mi=!0;return;default:ao=ao.return}}function ua(f){if(f!==ao)return!1;if(!ss)return oo(f),ss=!0,!1;var x=f.tag,S;if((S=x!==3&&x!==27)&&((S=x===5)&&(S=f.type,S=!(S!=="form"&&S!=="button")||y1(f.type,f.memoizedProps)),S=!S),S&&oa&&Pa(f),oo(f),x===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(t(317));oa=e5(f)}else if(x===31){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(t(317));oa=e5(f)}else x===27?(x=oa,Ru(f.type)?(f=j1,j1=null,oa=f):oa=x):oa=ao?pl(f.stateNode.nextSibling):null;return!0}function Ui(){oa=ao=null,ss=!1}function Gm(){var f=jc;return f!==null&&(ji===null?ji=f:ji.push.apply(ji,f),jc=null),f}function Cc(f){jc===null?jc=[f]:jc.push(f)}var Km=K(null),gd=null,Bl=null;function al(f,x,S){ve(Km,x._currentValue),x._currentValue=S}function ol(f){f._currentValue=Km.current,Z(Km)}function Cf(f,x,S){for(;f!==null;){var T=f.alternate;if((f.childLanes&x)!==x?(f.childLanes|=x,T!==null&&(T.childLanes|=x)):T!==null&&(T.childLanes&x)!==x&&(T.childLanes|=x),f===S)break;f=f.return}}function Ym(f,x,S,T){var F=f.child;for(F!==null&&(F.return=f);F!==null;){var W=F.dependencies;if(W!==null){var me=F.child;W=W.firstContext;e:for(;W!==null;){var Le=W;W=F;for(var ft=0;ft<x.length;ft++)if(Le.context===x[ft]){W.lanes|=S,Le=W.alternate,Le!==null&&(Le.lanes|=S),Cf(W.return,S,f),T||(me=null);break e}W=Le.next}}else if(F.tag===18){if(me=F.return,me===null)throw Error(t(341));me.lanes|=S,W=me.alternate,W!==null&&(W.lanes|=S),Cf(me,S,f),me=null}else me=F.child;if(me!==null)me.return=F;else for(me=F;me!==null;){if(me===f){me=null;break}if(F=me.sibling,F!==null){F.return=me.return,me=F;break}me=me.return}F=me}}function Sc(f,x,S,T){f=null;for(var F=x,W=!1;F!==null;){if(!W){if((F.flags&524288)!==0)W=!0;else if((F.flags&262144)!==0)break}if(F.tag===10){var me=F.alternate;if(me===null)throw Error(t(387));if(me=me.memoizedProps,me!==null){var Le=F.type;To(F.pendingProps.value,me.value)||(f!==null?f.push(Le):f=[Le])}}else if(F===$e.current){if(me=F.alternate,me===null)throw Error(t(387));me.memoizedState.memoizedState!==F.memoizedState.memoizedState&&(f!==null?f.push($g):f=[$g])}F=F.return}f!==null&&Ym(x,f,S,T),x.flags|=262144}function fu(f){for(f=f.firstContext;f!==null;){if(!To(f.context._currentValue,f.memoizedValue))return!0;f=f.next}return!1}function Nc(f){gd=f,Bl=null,f=f.dependencies,f!==null&&(f.firstContext=null)}function eo(f){return Zm(gd,f)}function pu(f,x){return gd===null&&Nc(f),Zm(f,x)}function Zm(f,x){var S=x._currentValue;if(x={context:x,memoizedValue:S,next:null},Bl===null){if(f===null)throw Error(t(308));Bl=x,f.dependencies={lanes:0,firstContext:x},f.flags|=524288}else Bl=Bl.next=x;return S}var Sf=typeof AbortController<"u"?AbortController:function(){var f=[],x=this.signal={aborted:!1,addEventListener:function(S,T){f.push(T)}};this.abort=function(){x.aborted=!0,f.forEach(function(S){return S()})}},qj=s.unstable_scheduleCallback,Gp=s.unstable_NormalPriority,ms={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Kp(){return{controller:new Sf,data:new Map,refCount:0}}function Nf(f){f.refCount--,f.refCount===0&&qj(Gp,function(){f.controller.abort()})}var hu=null,Mo=0,Qn=0,wo=null;function kc(f,x){if(hu===null){var S=hu=[];Mo=0,Qn=l1(),wo={status:"pending",value:void 0,then:function(T){S.push(T)}}}return Mo++,x.then(zl,zl),x}function zl(){if(--Mo===0&&hu!==null){wo!==null&&(wo.status="fulfilled");var f=hu;hu=null,Qn=0,wo=null;for(var x=0;x<f.length;x++)(0,f[x])()}}function Qx(f,x){var S=[],T={status:"pending",value:null,reason:null,then:function(F){S.push(F)}};return f.then(function(){T.status="fulfilled",T.value=x;for(var F=0;F<S.length;F++)(0,S[F])(x)},function(F){for(T.status="rejected",T.reason=F,F=0;F<S.length;F++)(0,S[F])(void 0)}),T}var Yp=D.S;D.S=function(f,x){m_=he(),typeof x=="object"&&x!==null&&typeof x.then=="function"&&kc(f,x),Yp!==null&&Yp(f,x)};var _c=K(null);function Xm(){var f=_c.current;return f!==null?f:ca.pooledCache}function mu(f,x){x===null?ve(_c,_c.current):ve(_c,x.pool)}function gu(){var f=Xm();return f===null?null:{parent:ms._currentValue,pool:f}}var yd=Error(t(460)),kf=Error(t(474)),Vi=Error(t(542)),_f={then:function(){}};function Qm(f){return f=f.status,f==="fulfilled"||f==="rejected"}function Jx(f,x,S){switch(S=f[S],S===void 0?f.push(x):S!==x&&(x.then(Fn,Fn),x=S),x.status){case"fulfilled":return x.value;case"rejected":throw f=x.reason,e0(f),f;default:if(typeof x.status=="string")x.then(Fn,Fn);else{if(f=ca,f!==null&&100<f.shellSuspendCounter)throw Error(t(482));f=x,f.status="pending",f.then(function(T){if(x.status==="pending"){var F=x;F.status="fulfilled",F.value=T}},function(T){if(x.status==="pending"){var F=x;F.status="rejected",F.reason=T}})}switch(x.status){case"fulfilled":return x.value;case"rejected":throw f=x.reason,e0(f),f}throw $l=x,yd}}function il(f){try{var x=f._init;return x(f._payload)}catch(S){throw S!==null&&typeof S=="object"&&typeof S.then=="function"?($l=S,yd):S}}var $l=null;function Jm(){if($l===null)throw Error(t(459));var f=$l;return $l=null,f}function e0(f){if(f===yd||f===Vi)throw Error(t(483))}var xd=null,Ef=0;function Zp(f){var x=Ef;return Ef+=1,xd===null&&(xd=[]),Jx(xd,f,x)}function Ec(f,x){x=x.props.ref,f.ref=x!==void 0?x:null}function Tf(f,x){throw x.$$typeof===g?Error(t(525)):(f=Object.prototype.toString.call(x),Error(t(31,f==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":f)))}function t0(f){function x(Tt,vt){if(f){var It=Tt.deletions;It===null?(Tt.deletions=[vt],Tt.flags|=16):It.push(vt)}}function S(Tt,vt){if(!f)return null;for(;vt!==null;)x(Tt,vt),vt=vt.sibling;return null}function T(Tt){for(var vt=new Map;Tt!==null;)Tt.key!==null?vt.set(Tt.key,Tt):vt.set(Tt.index,Tt),Tt=Tt.sibling;return vt}function F(Tt,vt){return Tt=Dl(Tt,vt),Tt.index=0,Tt.sibling=null,Tt}function W(Tt,vt,It){return Tt.index=It,f?(It=Tt.alternate,It!==null?(It=It.index,It<vt?(Tt.flags|=67108866,vt):It):(Tt.flags|=67108866,vt)):(Tt.flags|=1048576,vt)}function me(Tt){return f&&Tt.alternate===null&&(Tt.flags|=67108866),Tt}function Le(Tt,vt,It,lr){return vt===null||vt.tag!==6?(vt=wf(It,Tt.mode,lr),vt.return=Tt,vt):(vt=F(vt,It),vt.return=Tt,vt)}function ft(Tt,vt,It,lr){var hn=It.type;return hn===v?nr(Tt,vt,It.props.children,lr,It.key):vt!==null&&(vt.elementType===hn||typeof hn=="object"&&hn!==null&&hn.$$typeof===G&&il(hn)===vt.type)?(vt=F(vt,It.props),Ec(vt,It),vt.return=Tt,vt):(vt=qp(It.type,It.key,It.props,null,Tt.mode,lr),Ec(vt,It),vt.return=Tt,vt)}function Dt(Tt,vt,It,lr){return vt===null||vt.tag!==4||vt.stateNode.containerInfo!==It.containerInfo||vt.stateNode.implementation!==It.implementation?(vt=hd(It,Tt.mode,lr),vt.return=Tt,vt):(vt=F(vt,It.children||[]),vt.return=Tt,vt)}function nr(Tt,vt,It,lr,hn){return vt===null||vt.tag!==7?(vt=Ll(It,Tt.mode,lr,hn),vt.return=Tt,vt):(vt=F(vt,It),vt.return=Tt,vt)}function pr(Tt,vt,It){if(typeof vt=="string"&&vt!==""||typeof vt=="number"||typeof vt=="bigint")return vt=wf(""+vt,Tt.mode,It),vt.return=Tt,vt;if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case y:return It=qp(vt.type,vt.key,vt.props,null,Tt.mode,It),Ec(It,vt),It.return=Tt,It;case b:return vt=hd(vt,Tt.mode,It),vt.return=Tt,vt;case G:return vt=il(vt),pr(Tt,vt,It)}if(H(vt)||M(vt))return vt=Ll(vt,Tt.mode,It,null),vt.return=Tt,vt;if(typeof vt.then=="function")return pr(Tt,Zp(vt),It);if(vt.$$typeof===N)return pr(Tt,pu(Tt,vt),It);Tf(Tt,vt)}return null}function Ut(Tt,vt,It,lr){var hn=vt!==null?vt.key:null;if(typeof It=="string"&&It!==""||typeof It=="number"||typeof It=="bigint")return hn!==null?null:Le(Tt,vt,""+It,lr);if(typeof It=="object"&&It!==null){switch(It.$$typeof){case y:return It.key===hn?ft(Tt,vt,It,lr):null;case b:return It.key===hn?Dt(Tt,vt,It,lr):null;case G:return It=il(It),Ut(Tt,vt,It,lr)}if(H(It)||M(It))return hn!==null?null:nr(Tt,vt,It,lr,null);if(typeof It.then=="function")return Ut(Tt,vt,Zp(It),lr);if(It.$$typeof===N)return Ut(Tt,vt,pu(Tt,It),lr);Tf(Tt,It)}return null}function Gt(Tt,vt,It,lr,hn){if(typeof lr=="string"&&lr!==""||typeof lr=="number"||typeof lr=="bigint")return Tt=Tt.get(It)||null,Le(vt,Tt,""+lr,hn);if(typeof lr=="object"&&lr!==null){switch(lr.$$typeof){case y:return Tt=Tt.get(lr.key===null?It:lr.key)||null,ft(vt,Tt,lr,hn);case b:return Tt=Tt.get(lr.key===null?It:lr.key)||null,Dt(vt,Tt,lr,hn);case G:return lr=il(lr),Gt(Tt,vt,It,lr,hn)}if(H(lr)||M(lr))return Tt=Tt.get(It)||null,nr(vt,Tt,lr,hn,null);if(typeof lr.then=="function")return Gt(Tt,vt,It,Zp(lr),hn);if(lr.$$typeof===N)return Gt(Tt,vt,It,pu(vt,lr),hn);Tf(vt,lr)}return null}function sn(Tt,vt,It,lr){for(var hn=null,Cs=null,un=vt,Hn=vt=0,cs=null;un!==null&&Hn<It.length;Hn++){un.index>Hn?(cs=un,un=null):cs=un.sibling;var Ss=Ut(Tt,un,It[Hn],lr);if(Ss===null){un===null&&(un=cs);break}f&&un&&Ss.alternate===null&&x(Tt,un),vt=W(Ss,vt,Hn),Cs===null?hn=Ss:Cs.sibling=Ss,Cs=Ss,un=cs}if(Hn===It.length)return S(Tt,un),ss&&sl(Tt,Hn),hn;if(un===null){for(;Hn<It.length;Hn++)un=pr(Tt,It[Hn],lr),un!==null&&(vt=W(un,vt,Hn),Cs===null?hn=un:Cs.sibling=un,Cs=un);return ss&&sl(Tt,Hn),hn}for(un=T(un);Hn<It.length;Hn++)cs=Gt(un,Tt,Hn,It[Hn],lr),cs!==null&&(f&&cs.alternate!==null&&un.delete(cs.key===null?Hn:cs.key),vt=W(cs,vt,Hn),Cs===null?hn=cs:Cs.sibling=cs,Cs=cs);return f&&un.forEach(function(zu){return x(Tt,zu)}),ss&&sl(Tt,Hn),hn}function Nn(Tt,vt,It,lr){if(It==null)throw Error(t(151));for(var hn=null,Cs=null,un=vt,Hn=vt=0,cs=null,Ss=It.next();un!==null&&!Ss.done;Hn++,Ss=It.next()){un.index>Hn?(cs=un,un=null):cs=un.sibling;var zu=Ut(Tt,un,Ss.value,lr);if(zu===null){un===null&&(un=cs);break}f&&un&&zu.alternate===null&&x(Tt,un),vt=W(zu,vt,Hn),Cs===null?hn=zu:Cs.sibling=zu,Cs=zu,un=cs}if(Ss.done)return S(Tt,un),ss&&sl(Tt,Hn),hn;if(un===null){for(;!Ss.done;Hn++,Ss=It.next())Ss=pr(Tt,Ss.value,lr),Ss!==null&&(vt=W(Ss,vt,Hn),Cs===null?hn=Ss:Cs.sibling=Ss,Cs=Ss);return ss&&sl(Tt,Hn),hn}for(un=T(un);!Ss.done;Hn++,Ss=It.next())Ss=Gt(un,Tt,Hn,Ss.value,lr),Ss!==null&&(f&&Ss.alternate!==null&&un.delete(Ss.key===null?Hn:Ss.key),vt=W(Ss,vt,Hn),Cs===null?hn=Ss:Cs.sibling=Ss,Cs=Ss);return f&&un.forEach(function(f9){return x(Tt,f9)}),ss&&sl(Tt,Hn),hn}function ra(Tt,vt,It,lr){if(typeof It=="object"&&It!==null&&It.type===v&&It.key===null&&(It=It.props.children),typeof It=="object"&&It!==null){switch(It.$$typeof){case y:e:{for(var hn=It.key;vt!==null;){if(vt.key===hn){if(hn=It.type,hn===v){if(vt.tag===7){S(Tt,vt.sibling),lr=F(vt,It.props.children),lr.return=Tt,Tt=lr;break e}}else if(vt.elementType===hn||typeof hn=="object"&&hn!==null&&hn.$$typeof===G&&il(hn)===vt.type){S(Tt,vt.sibling),lr=F(vt,It.props),Ec(lr,It),lr.return=Tt,Tt=lr;break e}S(Tt,vt);break}else x(Tt,vt);vt=vt.sibling}It.type===v?(lr=Ll(It.props.children,Tt.mode,lr,It.key),lr.return=Tt,Tt=lr):(lr=qp(It.type,It.key,It.props,null,Tt.mode,lr),Ec(lr,It),lr.return=Tt,Tt=lr)}return me(Tt);case b:e:{for(hn=It.key;vt!==null;){if(vt.key===hn)if(vt.tag===4&&vt.stateNode.containerInfo===It.containerInfo&&vt.stateNode.implementation===It.implementation){S(Tt,vt.sibling),lr=F(vt,It.children||[]),lr.return=Tt,Tt=lr;break e}else{S(Tt,vt);break}else x(Tt,vt);vt=vt.sibling}lr=hd(It,Tt.mode,lr),lr.return=Tt,Tt=lr}return me(Tt);case G:return It=il(It),ra(Tt,vt,It,lr)}if(H(It))return sn(Tt,vt,It,lr);if(M(It)){if(hn=M(It),typeof hn!="function")throw Error(t(150));return It=hn.call(It),Nn(Tt,vt,It,lr)}if(typeof It.then=="function")return ra(Tt,vt,Zp(It),lr);if(It.$$typeof===N)return ra(Tt,vt,pu(Tt,It),lr);Tf(Tt,It)}return typeof It=="string"&&It!==""||typeof It=="number"||typeof It=="bigint"?(It=""+It,vt!==null&&vt.tag===6?(S(Tt,vt.sibling),lr=F(vt,It),lr.return=Tt,Tt=lr):(S(Tt,vt),lr=wf(It,Tt.mode,lr),lr.return=Tt,Tt=lr),me(Tt)):S(Tt,vt)}return function(Tt,vt,It,lr){try{Ef=0;var hn=ra(Tt,vt,It,lr);return xd=null,hn}catch(un){if(un===yd||un===Vi)throw un;var Cs=Wo(29,un,null,Tt.mode);return Cs.lanes=lr,Cs.return=Tt,Cs}}}var vd=t0(!0),eg=t0(!1),ei=!1;function Of(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yu(f,x){f=f.updateQueue,x.updateQueue===f&&(x.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,callbacks:null})}function Ul(f){return{lane:f,tag:0,payload:null,callback:null,next:null}}function ll(f,x,S){var T=f.updateQueue;if(T===null)return null;if(T=T.shared,(Es&2)!==0){var F=T.pending;return F===null?x.next=x:(x.next=F.next,F.next=x),T.pending=x,x=du(f),Hp(f,null,S),x}return Vp(f,T,x,S),du(f)}function xu(f,x,S){if(x=x.updateQueue,x!==null&&(x=x.shared,(S&4194048)!==0)){var T=x.lanes;T&=f.pendingLanes,S|=T,x.lanes=S,bn(f,S)}}function tg(f,x){var S=f.updateQueue,T=f.alternate;if(T!==null&&(T=T.updateQueue,S===T)){var F=null,W=null;if(S=S.firstBaseUpdate,S!==null){do{var me={lane:S.lane,tag:S.tag,payload:S.payload,callback:null,next:null};W===null?F=W=me:W=W.next=me,S=S.next}while(S!==null);W===null?F=W=x:W=W.next=x}else F=W=x;S={baseState:T.baseState,firstBaseUpdate:F,lastBaseUpdate:W,shared:T.shared,callbacks:T.callbacks},f.updateQueue=S;return}f=S.lastBaseUpdate,f===null?S.firstBaseUpdate=x:f.next=x,S.lastBaseUpdate=x}var Xp=!1;function Aa(){if(Xp){var f=wo;if(f!==null)throw f}}function Tc(f,x,S,T){Xp=!1;var F=f.updateQueue;ei=!1;var W=F.firstBaseUpdate,me=F.lastBaseUpdate,Le=F.shared.pending;if(Le!==null){F.shared.pending=null;var ft=Le,Dt=ft.next;ft.next=null,me===null?W=Dt:me.next=Dt,me=ft;var nr=f.alternate;nr!==null&&(nr=nr.updateQueue,Le=nr.lastBaseUpdate,Le!==me&&(Le===null?nr.firstBaseUpdate=Dt:Le.next=Dt,nr.lastBaseUpdate=ft))}if(W!==null){var pr=F.baseState;me=0,nr=Dt=ft=null,Le=W;do{var Ut=Le.lane&-536870913,Gt=Ut!==Le.lane;if(Gt?(ls&Ut)===Ut:(T&Ut)===Ut){Ut!==0&&Ut===Qn&&(Xp=!0),nr!==null&&(nr=nr.next={lane:0,tag:Le.tag,payload:Le.payload,callback:null,next:null});e:{var sn=f,Nn=Le;Ut=x;var ra=S;switch(Nn.tag){case 1:if(sn=Nn.payload,typeof sn=="function"){pr=sn.call(ra,pr,Ut);break e}pr=sn;break e;case 3:sn.flags=sn.flags&-65537|128;case 0:if(sn=Nn.payload,Ut=typeof sn=="function"?sn.call(ra,pr,Ut):sn,Ut==null)break e;pr=h({},pr,Ut);break e;case 2:ei=!0}}Ut=Le.callback,Ut!==null&&(f.flags|=64,Gt&&(f.flags|=8192),Gt=F.callbacks,Gt===null?F.callbacks=[Ut]:Gt.push(Ut))}else Gt={lane:Ut,tag:Le.tag,payload:Le.payload,callback:Le.callback,next:null},nr===null?(Dt=nr=Gt,ft=pr):nr=nr.next=Gt,me|=Ut;if(Le=Le.next,Le===null){if(Le=F.shared.pending,Le===null)break;Gt=Le,Le=Gt.next,Gt.next=null,F.lastBaseUpdate=Gt,F.shared.pending=null}}while(!0);nr===null&&(ft=pr),F.baseState=ft,F.firstBaseUpdate=Dt,F.lastBaseUpdate=nr,W===null&&(F.shared.lanes=0),Ou|=me,f.lanes=me,f.memoizedState=pr}}function rg(f,x){if(typeof f!="function")throw Error(t(191,f));f.call(x)}function ng(f,x){var S=f.callbacks;if(S!==null)for(f.callbacks=null,f=0;f<S.length;f++)rg(S[f],x)}var bd=K(null),Vl=K(0);function Pf(f,x){f=Ed,ve(Vl,f),ve(bd,x),Ed=f|x.baseLanes}function Qp(){ve(Vl,Ed),ve(bd,bd.current)}function Jp(){Ed=Vl.current,Z(bd),Z(Vl)}var qo=K(null),io=null;function Hl(f){var x=f.alternate;ve(Qs,Qs.current&1),ve(qo,f),io===null&&(x===null||bd.current!==null||x.memoizedState!==null)&&(io=f)}function vu(f){ve(Qs,Qs.current),ve(qo,f),io===null&&(io=f)}function sg(f){f.tag===22?(ve(Qs,Qs.current),ve(qo,f),io===null&&(io=f)):gi()}function gi(){ve(Qs,Qs.current),ve(qo,qo.current)}function ti(f){Z(qo),io===f&&(io=null),Z(Qs)}var Qs=K(0);function Af(f){for(var x=f;x!==null;){if(x.tag===13){var S=x.memoizedState;if(S!==null&&(S=S.dehydrated,S===null||b1(S)||w1(S)))return x}else if(x.tag===19&&(x.memoizedProps.revealOrder==="forwards"||x.memoizedProps.revealOrder==="backwards"||x.memoizedProps.revealOrder==="unstable_legacy-backwards"||x.memoizedProps.revealOrder==="together")){if((x.flags&128)!==0)return x}else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===f)break;for(;x.sibling===null;){if(x.return===null||x.return===f)return null;x=x.return}x.sibling.return=x.return,x=x.sibling}return null}var cl=0,Dn=null,gs=null,fa=null,Oc=!1,dl=!1,Pc=!1,eh=0,bu=0,ri=null,wu=0;function Js(){throw Error(t(321))}function ag(f,x){if(x===null)return!1;for(var S=0;S<x.length&&S<f.length;S++)if(!To(f[S],x[S]))return!1;return!0}function th(f,x,S,T,F,W){return cl=W,Dn=x,x.memoizedState=null,x.updateQueue=null,x.lanes=0,D.H=f===null||f.memoizedState===null?v0:Us,Pc=!1,W=S(T,F),Pc=!1,dl&&(W=n0(x,S,T,F)),r0(f),W}function r0(f){D.H=Vf;var x=gs!==null&&gs.next!==null;if(cl=0,fa=gs=Dn=null,Oc=!1,bu=0,ri=null,x)throw Error(t(300));f===null||Fa||(f=f.dependencies,f!==null&&fu(f)&&(Fa=!0))}function n0(f,x,S,T){Dn=f;var F=0;do{if(dl&&(ri=null),bu=0,dl=!1,25<=F)throw Error(t(301));if(F+=1,fa=gs=null,f.updateQueue!=null){var W=f.updateQueue;W.lastEffect=null,W.events=null,W.stores=null,W.memoCache!=null&&(W.memoCache.index=0)}D.H=b0,W=x(S,T)}while(dl);return W}function Gj(){var f=D.H,x=f.useState()[0];return x=typeof x.then=="function"?ju(x):x,f=f.useState()[0],(gs!==null?gs.memoizedState:null)!==f&&(Dn.flags|=1024),x}function lo(){var f=eh!==0;return eh=0,f}function rh(f,x,S){x.updateQueue=f.updateQueue,x.flags&=-2053,f.lanes&=~S}function og(f){if(Oc){for(f=f.memoizedState;f!==null;){var x=f.queue;x!==null&&(x.pending=null),f=f.next}Oc=!1}cl=0,fa=gs=Dn=null,dl=!1,bu=eh=0,ri=null}function Io(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fa===null?Dn.memoizedState=fa=f:fa=fa.next=f,fa}function Ma(){if(gs===null){var f=Dn.alternate;f=f!==null?f.memoizedState:null}else f=gs.next;var x=fa===null?Dn.memoizedState:fa.next;if(x!==null)fa=x,gs=f;else{if(f===null)throw Dn.alternate===null?Error(t(467)):Error(t(310));gs=f,f={memoizedState:gs.memoizedState,baseState:gs.baseState,baseQueue:gs.baseQueue,queue:gs.queue,next:null},fa===null?Dn.memoizedState=fa=f:fa=fa.next=f}return fa}function Mf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ju(f){var x=bu;return bu+=1,ri===null&&(ri=[]),f=Jx(ri,f,x),x=Dn,(fa===null?x.memoizedState:fa.next)===null&&(x=x.alternate,D.H=x===null||x.memoizedState===null?v0:Us),f}function If(f){if(f!==null&&typeof f=="object"){if(typeof f.then=="function")return ju(f);if(f.$$typeof===N)return eo(f)}throw Error(t(438,String(f)))}function ig(f){var x=null,S=Dn.updateQueue;if(S!==null&&(x=S.memoCache),x==null){var T=Dn.alternate;T!==null&&(T=T.updateQueue,T!==null&&(T=T.memoCache,T!=null&&(x={data:T.data.map(function(F){return F.slice()}),index:0})))}if(x==null&&(x={data:[],index:0}),S===null&&(S=Mf(),Dn.updateQueue=S),S.memoCache=x,S=x.data[x.index],S===void 0)for(S=x.data[x.index]=Array(f),T=0;T<f;T++)S[T]=z;return x.index++,S}function Wl(f,x){return typeof x=="function"?x(f):x}function nh(f){var x=Ma();return ul(x,gs,f)}function ul(f,x,S){var T=f.queue;if(T===null)throw Error(t(311));T.lastRenderedReducer=S;var F=f.baseQueue,W=T.pending;if(W!==null){if(F!==null){var me=F.next;F.next=W.next,W.next=me}x.baseQueue=F=W,T.pending=null}if(W=f.baseState,F===null)f.memoizedState=W;else{x=F.next;var Le=me=null,ft=null,Dt=x,nr=!1;do{var pr=Dt.lane&-536870913;if(pr!==Dt.lane?(ls&pr)===pr:(cl&pr)===pr){var Ut=Dt.revertLane;if(Ut===0)ft!==null&&(ft=ft.next={lane:0,revertLane:0,gesture:null,action:Dt.action,hasEagerState:Dt.hasEagerState,eagerState:Dt.eagerState,next:null}),pr===Qn&&(nr=!0);else if((cl&Ut)===Ut){Dt=Dt.next,Ut===Qn&&(nr=!0);continue}else pr={lane:0,revertLane:Dt.revertLane,gesture:null,action:Dt.action,hasEagerState:Dt.hasEagerState,eagerState:Dt.eagerState,next:null},ft===null?(Le=ft=pr,me=W):ft=ft.next=pr,Dn.lanes|=Ut,Ou|=Ut;pr=Dt.action,Pc&&S(W,pr),W=Dt.hasEagerState?Dt.eagerState:S(W,pr)}else Ut={lane:pr,revertLane:Dt.revertLane,gesture:Dt.gesture,action:Dt.action,hasEagerState:Dt.hasEagerState,eagerState:Dt.eagerState,next:null},ft===null?(Le=ft=Ut,me=W):ft=ft.next=Ut,Dn.lanes|=pr,Ou|=pr;Dt=Dt.next}while(Dt!==null&&Dt!==x);if(ft===null?me=W:ft.next=Le,!To(W,f.memoizedState)&&(Fa=!0,nr&&(S=wo,S!==null)))throw S;f.memoizedState=W,f.baseState=me,f.baseQueue=ft,T.lastRenderedState=W}return F===null&&(T.lanes=0),[f.memoizedState,T.dispatch]}function wd(f){var x=Ma(),S=x.queue;if(S===null)throw Error(t(311));S.lastRenderedReducer=f;var T=S.dispatch,F=S.pending,W=x.memoizedState;if(F!==null){S.pending=null;var me=F=F.next;do W=f(W,me.action),me=me.next;while(me!==F);To(W,x.memoizedState)||(Fa=!0),x.memoizedState=W,x.baseQueue===null&&(x.baseState=W),S.lastRenderedState=W}return[W,T]}function Rf(f,x,S){var T=Dn,F=Ma(),W=ss;if(W){if(S===void 0)throw Error(t(407));S=S()}else S=x();var me=!To((gs||F).memoizedState,S);if(me&&(F.memoizedState=S,Fa=!0),F=F.queue,ug(s0.bind(null,T,F,f),[f]),F.getSnapshot!==x||me||fa!==null&&fa.memoizedState.tag&1){if(T.flags|=2048,Nu(9,{destroy:void 0},fl.bind(null,T,F,S,x),null),ca===null)throw Error(t(349));W||(cl&127)!==0||Cu(T,x,S)}return S}function Cu(f,x,S){f.flags|=16384,f={getSnapshot:x,value:S},x=Dn.updateQueue,x===null?(x=Mf(),Dn.updateQueue=x,x.stores=[f]):(S=x.stores,S===null?x.stores=[f]:S.push(f))}function fl(f,x,S,T){x.value=S,x.getSnapshot=T,a0(x)&&jd(f)}function s0(f,x,S){return S(function(){a0(x)&&jd(f)})}function a0(f){var x=f.getSnapshot;f=f.value;try{var S=x();return!To(f,S)}catch{return!0}}function jd(f){var x=bc(f,2);x!==null&&Ci(x,f,2)}function sh(f){var x=Io();if(typeof f=="function"){var S=f;if(f=S(),Pc){ot(!0);try{S()}finally{ot(!1)}}}return x.memoizedState=x.baseState=f,x.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wl,lastRenderedState:f},x}function lg(f,x,S,T){return f.baseState=S,ul(f,gs,typeof T=="function"?T:Wl)}function o0(f,x,S,T,F){if($f(f))throw Error(t(485));if(f=x.action,f!==null){var W={payload:F,action:f,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(me){W.listeners.push(me)}};D.T!==null?S(!0):W.isTransition=!1,T(W),S=x.pending,S===null?(W.next=x.pending=W,Df(x,W)):(W.next=S.next,x.pending=S.next=W)}}function Df(f,x){var S=x.action,T=x.payload,F=f.state;if(x.isTransition){var W=D.T,me={};D.T=me;try{var Le=S(F,T),ft=D.S;ft!==null&&ft(me,Le),Cd(f,x,Le)}catch(Dt){Lf(f,x,Dt)}finally{W!==null&&me.types!==null&&(W.types=me.types),D.T=W}}else try{W=S(F,T),Cd(f,x,W)}catch(Dt){Lf(f,x,Dt)}}function Cd(f,x,S){S!==null&&typeof S=="object"&&typeof S.then=="function"?S.then(function(T){ah(f,x,T)},function(T){return Lf(f,x,T)}):ah(f,x,S)}function ah(f,x,S){x.status="fulfilled",x.value=S,oh(x),f.state=S,x=f.pending,x!==null&&(S=x.next,S===x?f.pending=null:(S=S.next,x.next=S,Df(f,S)))}function Lf(f,x,S){var T=f.pending;if(f.pending=null,T!==null){T=T.next;do x.status="rejected",x.reason=S,oh(x),x=x.next;while(x!==T)}f.action=null}function oh(f){f=f.listeners;for(var x=0;x<f.length;x++)(0,f[x])()}function i0(f,x){return x}function Su(f,x){if(ss){var S=ca.formState;if(S!==null){e:{var T=Dn;if(ss){if(oa){t:{for(var F=oa,W=mi;F.nodeType!==8;){if(!W){F=null;break t}if(F=pl(F.nextSibling),F===null){F=null;break t}}W=F.data,F=W==="F!"||W==="F"?F:null}if(F){oa=pl(F.nextSibling),T=F.data==="F!";break e}}Pa(T)}T=!1}T&&(x=S[0])}}return S=Io(),S.memoizedState=S.baseState=x,T={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i0,lastRenderedState:x},S.queue=T,S=y0.bind(null,Dn,T),T.dispatch=S,T=sh(!1),W=Mc.bind(null,Dn,!1,T.queue),T=Io(),F={state:x,dispatch:null,action:f,pending:null},T.queue=F,S=o0.bind(null,Dn,F,W,S),F.dispatch=S,T.memoizedState=f,[x,S,!1]}function cg(f){var x=Ma();return l0(x,gs,f)}function l0(f,x,S){if(x=ul(f,x,i0)[0],f=nh(Wl)[0],typeof x=="object"&&x!==null&&typeof x.then=="function")try{var T=ju(x)}catch(me){throw me===yd?Vi:me}else T=x;x=Ma();var F=x.queue,W=F.dispatch;return S!==x.memoizedState&&(Dn.flags|=2048,Nu(9,{destroy:void 0},c0.bind(null,F,S),null)),[T,W,f]}function c0(f,x){f.action=x}function Ff(f){var x=Ma(),S=gs;if(S!==null)return l0(x,S,f);Ma(),x=x.memoizedState,S=Ma();var T=S.queue.dispatch;return S.memoizedState=f,[x,T,!1]}function Nu(f,x,S,T){return f={tag:f,create:S,deps:T,inst:x,next:null},x=Dn.updateQueue,x===null&&(x=Mf(),Dn.updateQueue=x),S=x.lastEffect,S===null?x.lastEffect=f.next=f:(T=S.next,S.next=f,f.next=T,x.lastEffect=f),f}function d0(){return Ma().memoizedState}function Ac(f,x,S,T){var F=Io();Dn.flags|=f,F.memoizedState=Nu(1|x,{destroy:void 0},S,T===void 0?null:T)}function Bf(f,x,S,T){var F=Ma();T=T===void 0?null:T;var W=F.memoizedState.inst;gs!==null&&T!==null&&ag(T,gs.memoizedState.deps)?F.memoizedState=Nu(x,W,S,T):(Dn.flags|=f,F.memoizedState=Nu(1|x,W,S,T))}function dg(f,x){Ac(8390656,8,f,x)}function ug(f,x){Bf(2048,8,f,x)}function fg(f){Dn.flags|=4;var x=Dn.updateQueue;if(x===null)x=Mf(),Dn.updateQueue=x,x.events=[f];else{var S=x.events;S===null?x.events=[f]:S.push(f)}}function pg(f){var x=Ma().memoizedState;return fg({ref:x,nextImpl:f}),function(){if((Es&2)!==0)throw Error(t(440));return x.impl.apply(void 0,arguments)}}function u0(f,x){return Bf(4,2,f,x)}function hg(f,x){return Bf(4,4,f,x)}function mg(f,x){if(typeof x=="function"){f=f();var S=x(f);return function(){typeof S=="function"?S():x(null)}}if(x!=null)return f=f(),x.current=f,function(){x.current=null}}function f0(f,x,S){S=S!=null?S.concat([f]):null,Bf(4,4,mg.bind(null,x,f),S)}function zf(){}function ku(f,x){var S=Ma();x=x===void 0?null:x;var T=S.memoizedState;return x!==null&&ag(x,T[1])?T[0]:(S.memoizedState=[f,x],f)}function _u(f,x){var S=Ma();x=x===void 0?null:x;var T=S.memoizedState;if(x!==null&&ag(x,T[1]))return T[0];if(T=f(),Pc){ot(!0);try{f()}finally{ot(!1)}}return S.memoizedState=[T,x],T}function gg(f,x,S){return S===void 0||(cl&1073741824)!==0&&(ls&261930)===0?f.memoizedState=x:(f.memoizedState=S,f=y_(),Dn.lanes|=f,Ou|=f,S)}function yg(f,x,S,T){return To(S,x)?S:bd.current!==null?(f=gg(f,S,T),To(f,x)||(Fa=!0),f):(cl&42)===0||(cl&1073741824)!==0&&(ls&261930)===0?(Fa=!0,f.memoizedState=S):(f=y_(),Dn.lanes|=f,Ou|=f,x)}function p0(f,x,S,T,F){var W=X.p;X.p=W!==0&&8>W?W:8;var me=D.T,Le={};D.T=Le,Mc(f,!1,x,S);try{var ft=F(),Dt=D.S;if(Dt!==null&&Dt(Le,ft),ft!==null&&typeof ft=="object"&&typeof ft.then=="function"){var nr=Qx(ft,T);Eu(f,x,nr,qi(f))}else Eu(f,x,T,qi(f))}catch(pr){Eu(f,x,{then:function(){},status:"rejected",reason:pr},qi())}finally{X.p=W,me!==null&&Le.types!==null&&(me.types=Le.types),D.T=me}}function Kj(){}function xg(f,x,S,T){if(f.tag!==5)throw Error(t(476));var F=h0(f).queue;p0(f,F,x,se,S===null?Kj:function(){return vg(f),S(T)})}function h0(f){var x=f.memoizedState;if(x!==null)return x;x={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wl,lastRenderedState:se},next:null};var S={};return x.next={memoizedState:S,baseState:S,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wl,lastRenderedState:S},next:null},f.memoizedState=x,f=f.alternate,f!==null&&(f.memoizedState=x),x}function vg(f){var x=h0(f);x.next===null&&(x=f.alternate.memoizedState),Eu(f,x.next.queue,{},qi())}function bg(){return eo($g)}function m0(){return Ma().memoizedState}function wg(){return Ma().memoizedState}function jg(f){for(var x=f.return;x!==null;){switch(x.tag){case 24:case 3:var S=qi();f=Ul(S);var T=ll(x,f,S);T!==null&&(Ci(T,x,S),xu(T,x,S)),x={cache:Kp()},f.payload=x;return}x=x.return}}function g0(f,x,S){var T=qi();S={lane:T,revertLane:0,gesture:null,action:S,hasEagerState:!1,eagerState:null,next:null},$f(f)?Uf(x,S):(S=bf(f,x,S,T),S!==null&&(Ci(S,f,T),x0(S,x,T)))}function y0(f,x,S){var T=qi();Eu(f,x,S,T)}function Eu(f,x,S,T){var F={lane:T,revertLane:0,gesture:null,action:S,hasEagerState:!1,eagerState:null,next:null};if($f(f))Uf(x,F);else{var W=f.alternate;if(f.lanes===0&&(W===null||W.lanes===0)&&(W=x.lastRenderedReducer,W!==null))try{var me=x.lastRenderedState,Le=W(me,S);if(F.hasEagerState=!0,F.eagerState=Le,To(Le,me))return Vp(f,x,F,0),ca===null&&fd(),!1}catch{}if(S=bf(f,x,F,T),S!==null)return Ci(S,f,T),x0(S,x,T),!0}return!1}function Mc(f,x,S,T){if(T={lane:2,revertLane:l1(),gesture:null,action:T,hasEagerState:!1,eagerState:null,next:null},$f(f)){if(x)throw Error(t(479))}else x=bf(f,S,T,2),x!==null&&Ci(x,f,2)}function $f(f){var x=f.alternate;return f===Dn||x!==null&&x===Dn}function Uf(f,x){dl=Oc=!0;var S=f.pending;S===null?x.next=x:(x.next=S.next,S.next=x),f.pending=x}function x0(f,x,S){if((S&4194048)!==0){var T=x.lanes;T&=f.pendingLanes,S|=T,x.lanes=S,bn(f,S)}}var Vf={readContext:eo,use:If,useCallback:Js,useContext:Js,useEffect:Js,useImperativeHandle:Js,useLayoutEffect:Js,useInsertionEffect:Js,useMemo:Js,useReducer:Js,useRef:Js,useState:Js,useDebugValue:Js,useDeferredValue:Js,useTransition:Js,useSyncExternalStore:Js,useId:Js,useHostTransitionStatus:Js,useFormState:Js,useActionState:Js,useOptimistic:Js,useMemoCache:Js,useCacheRefresh:Js};Vf.useEffectEvent=Js;var v0={readContext:eo,use:If,useCallback:function(f,x){return Io().memoizedState=[f,x===void 0?null:x],f},useContext:eo,useEffect:dg,useImperativeHandle:function(f,x,S){S=S!=null?S.concat([f]):null,Ac(4194308,4,mg.bind(null,x,f),S)},useLayoutEffect:function(f,x){return Ac(4194308,4,f,x)},useInsertionEffect:function(f,x){Ac(4,2,f,x)},useMemo:function(f,x){var S=Io();x=x===void 0?null:x;var T=f();if(Pc){ot(!0);try{f()}finally{ot(!1)}}return S.memoizedState=[T,x],T},useReducer:function(f,x,S){var T=Io();if(S!==void 0){var F=S(x);if(Pc){ot(!0);try{S(x)}finally{ot(!1)}}}else F=x;return T.memoizedState=T.baseState=F,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:F},T.queue=f,f=f.dispatch=g0.bind(null,Dn,f),[T.memoizedState,f]},useRef:function(f){var x=Io();return f={current:f},x.memoizedState=f},useState:function(f){f=sh(f);var x=f.queue,S=y0.bind(null,Dn,x);return x.dispatch=S,[f.memoizedState,S]},useDebugValue:zf,useDeferredValue:function(f,x){var S=Io();return gg(S,f,x)},useTransition:function(){var f=sh(!1);return f=p0.bind(null,Dn,f.queue,!0,!1),Io().memoizedState=f,[!1,f]},useSyncExternalStore:function(f,x,S){var T=Dn,F=Io();if(ss){if(S===void 0)throw Error(t(407));S=S()}else{if(S=x(),ca===null)throw Error(t(349));(ls&127)!==0||Cu(T,x,S)}F.memoizedState=S;var W={value:S,getSnapshot:x};return F.queue=W,dg(s0.bind(null,T,W,f),[f]),T.flags|=2048,Nu(9,{destroy:void 0},fl.bind(null,T,W,S,x),null),S},useId:function(){var f=Io(),x=ca.identifierPrefix;if(ss){var S=$i,T=Ao;S=(T&~(1<<32-dt(T)-1)).toString(32)+S,x="_"+x+"R_"+S,S=eh++,0<S&&(x+="H"+S.toString(32)),x+="_"}else S=wu++,x="_"+x+"r_"+S.toString(32)+"_";return f.memoizedState=x},useHostTransitionStatus:bg,useFormState:Su,useActionState:Su,useOptimistic:function(f){var x=Io();x.memoizedState=x.baseState=f;var S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return x.queue=S,x=Mc.bind(null,Dn,!0,S),S.dispatch=x,[f,x]},useMemoCache:ig,useCacheRefresh:function(){return Io().memoizedState=jg.bind(null,Dn)},useEffectEvent:function(f){var x=Io(),S={impl:f};return x.memoizedState=S,function(){if((Es&2)!==0)throw Error(t(440));return S.impl.apply(void 0,arguments)}}},Us={readContext:eo,use:If,useCallback:ku,useContext:eo,useEffect:ug,useImperativeHandle:f0,useInsertionEffect:u0,useLayoutEffect:hg,useMemo:_u,useReducer:nh,useRef:d0,useState:function(){return nh(Wl)},useDebugValue:zf,useDeferredValue:function(f,x){var S=Ma();return yg(S,gs.memoizedState,f,x)},useTransition:function(){var f=nh(Wl)[0],x=Ma().memoizedState;return[typeof f=="boolean"?f:ju(f),x]},useSyncExternalStore:Rf,useId:m0,useHostTransitionStatus:bg,useFormState:cg,useActionState:cg,useOptimistic:function(f,x){var S=Ma();return lg(S,gs,f,x)},useMemoCache:ig,useCacheRefresh:wg};Us.useEffectEvent=pg;var b0={readContext:eo,use:If,useCallback:ku,useContext:eo,useEffect:ug,useImperativeHandle:f0,useInsertionEffect:u0,useLayoutEffect:hg,useMemo:_u,useReducer:wd,useRef:d0,useState:function(){return wd(Wl)},useDebugValue:zf,useDeferredValue:function(f,x){var S=Ma();return gs===null?gg(S,f,x):yg(S,gs.memoizedState,f,x)},useTransition:function(){var f=wd(Wl)[0],x=Ma().memoizedState;return[typeof f=="boolean"?f:ju(f),x]},useSyncExternalStore:Rf,useId:m0,useHostTransitionStatus:bg,useFormState:Ff,useActionState:Ff,useOptimistic:function(f,x){var S=Ma();return gs!==null?lg(S,gs,f,x):(S.baseState=f,[f,S.queue.dispatch])},useMemoCache:ig,useCacheRefresh:wg};b0.useEffectEvent=pg;function Hf(f,x,S,T){x=f.memoizedState,S=S(T,x),S=S==null?x:h({},x,S),f.memoizedState=S,f.lanes===0&&(f.updateQueue.baseState=S)}var Sd={enqueueSetState:function(f,x,S){f=f._reactInternals;var T=qi(),F=Ul(T);F.payload=x,S!=null&&(F.callback=S),x=ll(f,F,T),x!==null&&(Ci(x,f,T),xu(x,f,T))},enqueueReplaceState:function(f,x,S){f=f._reactInternals;var T=qi(),F=Ul(T);F.tag=1,F.payload=x,S!=null&&(F.callback=S),x=ll(f,F,T),x!==null&&(Ci(x,f,T),xu(x,f,T))},enqueueForceUpdate:function(f,x){f=f._reactInternals;var S=qi(),T=Ul(S);T.tag=2,x!=null&&(T.callback=x),x=ll(f,T,S),x!==null&&(Ci(x,f,S),xu(x,f,S))}};function yi(f,x,S,T,F,W,me){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(T,W,me):x.prototype&&x.prototype.isPureReactComponent?!xc(S,T)||!xc(F,W):!0}function Wf(f,x,S,T){f=x.state,typeof x.componentWillReceiveProps=="function"&&x.componentWillReceiveProps(S,T),typeof x.UNSAFE_componentWillReceiveProps=="function"&&x.UNSAFE_componentWillReceiveProps(S,T),x.state!==f&&Sd.enqueueReplaceState(x,x.state,null)}function ql(f,x){var S=x;if("ref"in x){S={};for(var T in x)T!=="ref"&&(S[T]=x[T])}if(f=f.defaultProps){S===x&&(S=h({},S));for(var F in f)S[F]===void 0&&(S[F]=f[F])}return S}function Cg(f){vf(f)}function Sg(f){console.error(f)}function Ng(f){vf(f)}function qf(f,x){try{var S=f.onUncaughtError;S(x.value,{componentStack:x.stack})}catch(T){setTimeout(function(){throw T})}}function kg(f,x,S){try{var T=f.onCaughtError;T(S.value,{componentStack:S.stack,errorBoundary:x.tag===1?x.stateNode:null})}catch(F){setTimeout(function(){throw F})}}function _g(f,x,S){return S=Ul(S),S.tag=3,S.payload={element:null},S.callback=function(){qf(f,x)},S}function ih(f){return f=Ul(f),f.tag=3,f}function Eg(f,x,S,T){var F=S.type.getDerivedStateFromError;if(typeof F=="function"){var W=T.value;f.payload=function(){return F(W)},f.callback=function(){kg(x,S,T)}}var me=S.stateNode;me!==null&&typeof me.componentDidCatch=="function"&&(f.callback=function(){kg(x,S,T),typeof F!="function"&&(Pu===null?Pu=new Set([this]):Pu.add(this));var Le=T.stack;this.componentDidCatch(T.value,{componentStack:Le!==null?Le:""})})}function js(f,x,S,T,F){if(S.flags|=32768,T!==null&&typeof T=="object"&&typeof T.then=="function"){if(x=S.alternate,x!==null&&Sc(x,S,F,!0),S=qo.current,S!==null){switch(S.tag){case 31:case 13:return io===null?O0():S.alternate===null&&Ba===0&&(Ba=3),S.flags&=-257,S.flags|=65536,S.lanes=F,T===_f?S.flags|=16384:(x=S.updateQueue,x===null?S.updateQueue=new Set([T]):x.add(T),a1(f,T,F)),!1;case 22:return S.flags|=65536,T===_f?S.flags|=16384:(x=S.updateQueue,x===null?(x={transitions:null,markerInstances:null,retryQueue:new Set([T])},S.updateQueue=x):(S=x.retryQueue,S===null?x.retryQueue=new Set([T]):S.add(T)),a1(f,T,F)),!1}throw Error(t(435,S.tag))}return a1(f,T,F),O0(),!1}if(ss)return x=qo.current,x!==null?((x.flags&65536)===0&&(x.flags|=256),x.flags|=65536,x.lanes=F,T!==qm&&(f=Error(t(422),{cause:T}),Cc(Po(f,S)))):(T!==qm&&(x=Error(t(423),{cause:T}),Cc(Po(x,S))),f=f.current.alternate,f.flags|=65536,F&=-F,f.lanes|=F,T=Po(T,S),F=_g(f.stateNode,T,F),tg(f,F),Ba!==4&&(Ba=2)),!1;var W=Error(t(520),{cause:T});if(W=Po(W,S),Mg===null?Mg=[W]:Mg.push(W),Ba!==4&&(Ba=2),x===null)return!0;T=Po(T,S),S=x;do{switch(S.tag){case 3:return S.flags|=65536,f=F&-F,S.lanes|=f,f=_g(S.stateNode,T,f),tg(S,f),!1;case 1:if(x=S.type,W=S.stateNode,(S.flags&128)===0&&(typeof x.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(Pu===null||!Pu.has(W))))return S.flags|=65536,F&=-F,S.lanes|=F,F=ih(F),Eg(F,f,S,T),tg(S,F),!1}S=S.return}while(S!==null);return!1}var lh=Error(t(461)),Fa=!1;function Ca(f,x,S,T){x.child=f===null?eg(x,null,S,T):vd(x,f.child,S,T)}function w0(f,x,S,T,F){S=S.render;var W=x.ref;if("ref"in T){var me={};for(var Le in T)Le!=="ref"&&(me[Le]=T[Le])}else me=T;return Nc(x),T=th(f,x,S,me,W,F),Le=lo(),f!==null&&!Fa?(rh(f,x,F),hr(f,x,F)):(ss&&Le&&Wm(x),x.flags|=1,Ca(f,x,T,F),x.child)}function Gf(f,x,S,T,F){if(f===null){var W=S.type;return typeof W=="function"&&!uu(W)&&W.defaultProps===void 0&&S.compare===null?(x.tag=15,x.type=W,j0(f,x,W,T,F)):(f=qp(S.type,null,T,x,x.mode,F),f.ref=x.ref,f.return=x,x.child=f)}if(W=f.child,!Tr(f,F)){var me=W.memoizedProps;if(S=S.compare,S=S!==null?S:xc,S(me,T)&&f.ref===x.ref)return hr(f,x,F)}return x.flags|=1,f=Dl(W,T),f.ref=x.ref,f.return=x,x.child=f}function j0(f,x,S,T,F){if(f!==null){var W=f.memoizedProps;if(xc(W,T)&&f.ref===x.ref)if(Fa=!1,x.pendingProps=T=W,Tr(f,F))(f.flags&131072)!==0&&(Fa=!0);else return x.lanes=f.lanes,hr(f,x,F)}return E(f,x,S,T,F)}function ba(f,x,S,T){var F=T.children,W=f!==null?f.memoizedState:null;if(f===null&&x.stateNode===null&&(x.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),T.mode==="hidden"){if((x.flags&128)!==0){if(W=W!==null?W.baseLanes|S:S,f!==null){for(T=x.child=f.child,F=0;T!==null;)F=F|T.lanes|T.childLanes,T=T.sibling;T=F&~W}else T=0,x.child=null;return C0(f,x,W,S,T)}if((S&536870912)!==0)x.memoizedState={baseLanes:0,cachePool:null},f!==null&&mu(x,W!==null?W.cachePool:null),W!==null?Pf(x,W):Qp(),sg(x);else return T=x.lanes=536870912,C0(f,x,W!==null?W.baseLanes|S:S,S,T)}else W!==null?(mu(x,W.cachePool),Pf(x,W),gi(),x.memoizedState=null):(f!==null&&mu(x,null),Qp(),gi());return Ca(f,x,F,S),x.child}function Kf(f,x){return f!==null&&f.tag===22||x.stateNode!==null||(x.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),x.sibling}function C0(f,x,S,T,F){var W=Xm();return W=W===null?null:{parent:ms._currentValue,pool:W},x.memoizedState={baseLanes:S,cachePool:W},f!==null&&mu(x,null),Qp(),sg(x),f!==null&&Sc(f,x,T,!0),x.childLanes=F,null}function ch(f,x){return x=rt({mode:x.mode,children:x.children},f.mode),x.ref=f.ref,f.child=x,x.return=f,x}function Yf(f,x,S){return vd(x,f.child,null,S),f=ch(x,x.pendingProps),f.flags|=2,ti(x),x.memoizedState=null,f}function m(f,x,S){var T=x.pendingProps,F=(x.flags&128)!==0;if(x.flags&=-129,f===null){if(ss){if(T.mode==="hidden")return f=ch(x,T),x.lanes=536870912,Kf(null,f);if(vu(x),(f=oa)?(f=J_(f,mi),f=f!==null&&f.data==="&"?f:null,f!==null&&(x.memoizedState={dehydrated:f,treeContext:hi!==null?{id:Ao,overflow:$i}:null,retryLane:536870912,hydrationErrors:null},S=pd(f),S.return=x,x.child=S,ao=x,oa=null)):f=null,f===null)throw Pa(x);return x.lanes=536870912,null}return ch(x,T)}var W=f.memoizedState;if(W!==null){var me=W.dehydrated;if(vu(x),F)if(x.flags&256)x.flags&=-257,x=Yf(f,x,S);else if(x.memoizedState!==null)x.child=f.child,x.flags|=128,x=null;else throw Error(t(558));else if(Fa||Sc(f,x,S,!1),F=(S&f.childLanes)!==0,Fa||F){if(T=ca,T!==null&&(me=Fr(T,S),me!==0&&me!==W.retryLane))throw W.retryLane=me,bc(f,me),Ci(T,f,me),lh;O0(),x=Yf(f,x,S)}else f=W.treeContext,oa=pl(me.nextSibling),ao=x,ss=!0,jc=null,mi=!1,f!==null&&wc(x,f),x=ch(x,T),x.flags|=4096;return x}return f=Dl(f.child,{mode:T.mode,children:T.children}),f.ref=x.ref,x.child=f,f.return=x,f}function j(f,x){var S=x.ref;if(S===null)f!==null&&f.ref!==null&&(x.flags|=4194816);else{if(typeof S!="function"&&typeof S!="object")throw Error(t(284));(f===null||f.ref!==S)&&(x.flags|=4194816)}}function E(f,x,S,T,F){return Nc(x),S=th(f,x,S,T,void 0,F),T=lo(),f!==null&&!Fa?(rh(f,x,F),hr(f,x,F)):(ss&&T&&Wm(x),x.flags|=1,Ca(f,x,S,F),x.child)}function _(f,x,S,T,F,W){return Nc(x),x.updateQueue=null,S=n0(x,T,S,F),r0(f),T=lo(),f!==null&&!Fa?(rh(f,x,W),hr(f,x,W)):(ss&&T&&Wm(x),x.flags|=1,Ca(f,x,S,W),x.child)}function A(f,x,S,T,F){if(Nc(x),x.stateNode===null){var W=Bi,me=S.contextType;typeof me=="object"&&me!==null&&(W=eo(me)),W=new S(T,W),x.memoizedState=W.state!==null&&W.state!==void 0?W.state:null,W.updater=Sd,x.stateNode=W,W._reactInternals=x,W=x.stateNode,W.props=T,W.state=x.memoizedState,W.refs={},Of(x),me=S.contextType,W.context=typeof me=="object"&&me!==null?eo(me):Bi,W.state=x.memoizedState,me=S.getDerivedStateFromProps,typeof me=="function"&&(Hf(x,S,me,T),W.state=x.memoizedState),typeof S.getDerivedStateFromProps=="function"||typeof W.getSnapshotBeforeUpdate=="function"||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(me=W.state,typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount(),me!==W.state&&Sd.enqueueReplaceState(W,W.state,null),Tc(x,T,W,F),Aa(),W.state=x.memoizedState),typeof W.componentDidMount=="function"&&(x.flags|=4194308),T=!0}else if(f===null){W=x.stateNode;var Le=x.memoizedProps,ft=ql(S,Le);W.props=ft;var Dt=W.context,nr=S.contextType;me=Bi,typeof nr=="object"&&nr!==null&&(me=eo(nr));var pr=S.getDerivedStateFromProps;nr=typeof pr=="function"||typeof W.getSnapshotBeforeUpdate=="function",Le=x.pendingProps!==Le,nr||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(Le||Dt!==me)&&Wf(x,W,T,me),ei=!1;var Ut=x.memoizedState;W.state=Ut,Tc(x,T,W,F),Aa(),Dt=x.memoizedState,Le||Ut!==Dt||ei?(typeof pr=="function"&&(Hf(x,S,pr,T),Dt=x.memoizedState),(ft=ei||yi(x,S,ft,T,Ut,Dt,me))?(nr||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount()),typeof W.componentDidMount=="function"&&(x.flags|=4194308)):(typeof W.componentDidMount=="function"&&(x.flags|=4194308),x.memoizedProps=T,x.memoizedState=Dt),W.props=T,W.state=Dt,W.context=me,T=ft):(typeof W.componentDidMount=="function"&&(x.flags|=4194308),T=!1)}else{W=x.stateNode,yu(f,x),me=x.memoizedProps,nr=ql(S,me),W.props=nr,pr=x.pendingProps,Ut=W.context,Dt=S.contextType,ft=Bi,typeof Dt=="object"&&Dt!==null&&(ft=eo(Dt)),Le=S.getDerivedStateFromProps,(Dt=typeof Le=="function"||typeof W.getSnapshotBeforeUpdate=="function")||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(me!==pr||Ut!==ft)&&Wf(x,W,T,ft),ei=!1,Ut=x.memoizedState,W.state=Ut,Tc(x,T,W,F),Aa();var Gt=x.memoizedState;me!==pr||Ut!==Gt||ei||f!==null&&f.dependencies!==null&&fu(f.dependencies)?(typeof Le=="function"&&(Hf(x,S,Le,T),Gt=x.memoizedState),(nr=ei||yi(x,S,nr,T,Ut,Gt,ft)||f!==null&&f.dependencies!==null&&fu(f.dependencies))?(Dt||typeof W.UNSAFE_componentWillUpdate!="function"&&typeof W.componentWillUpdate!="function"||(typeof W.componentWillUpdate=="function"&&W.componentWillUpdate(T,Gt,ft),typeof W.UNSAFE_componentWillUpdate=="function"&&W.UNSAFE_componentWillUpdate(T,Gt,ft)),typeof W.componentDidUpdate=="function"&&(x.flags|=4),typeof W.getSnapshotBeforeUpdate=="function"&&(x.flags|=1024)):(typeof W.componentDidUpdate!="function"||me===f.memoizedProps&&Ut===f.memoizedState||(x.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||me===f.memoizedProps&&Ut===f.memoizedState||(x.flags|=1024),x.memoizedProps=T,x.memoizedState=Gt),W.props=T,W.state=Gt,W.context=ft,T=nr):(typeof W.componentDidUpdate!="function"||me===f.memoizedProps&&Ut===f.memoizedState||(x.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||me===f.memoizedProps&&Ut===f.memoizedState||(x.flags|=1024),T=!1)}return W=T,j(f,x),T=(x.flags&128)!==0,W||T?(W=x.stateNode,S=T&&typeof S.getDerivedStateFromError!="function"?null:W.render(),x.flags|=1,f!==null&&T?(x.child=vd(x,f.child,null,F),x.child=vd(x,null,S,F)):Ca(f,x,S,F),x.memoizedState=W.state,f=x.child):f=hr(f,x,F),f}function U(f,x,S,T){return Ui(),x.flags|=256,Ca(f,x,S,T),x.child}var te={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function oe(f){return{baseLanes:f,cachePool:gu()}}function fe(f,x,S){return f=f!==null?f.childLanes&~S:0,x&&(f|=Wi),f}function Ne(f,x,S){var T=x.pendingProps,F=!1,W=(x.flags&128)!==0,me;if((me=W)||(me=f!==null&&f.memoizedState===null?!1:(Qs.current&2)!==0),me&&(F=!0,x.flags&=-129),me=(x.flags&32)!==0,x.flags&=-33,f===null){if(ss){if(F?Hl(x):gi(),(f=oa)?(f=J_(f,mi),f=f!==null&&f.data!=="&"?f:null,f!==null&&(x.memoizedState={dehydrated:f,treeContext:hi!==null?{id:Ao,overflow:$i}:null,retryLane:536870912,hydrationErrors:null},S=pd(f),S.return=x,x.child=S,ao=x,oa=null)):f=null,f===null)throw Pa(x);return w1(f)?x.lanes=32:x.lanes=536870912,null}var Le=T.children;return T=T.fallback,F?(gi(),F=x.mode,Le=rt({mode:"hidden",children:Le},F),T=Ll(T,F,S,null),Le.return=x,T.return=x,Le.sibling=T,x.child=Le,T=x.child,T.memoizedState=oe(S),T.childLanes=fe(f,me,S),x.memoizedState=te,Kf(null,T)):(Hl(x),qe(x,Le))}var ft=f.memoizedState;if(ft!==null&&(Le=ft.dehydrated,Le!==null)){if(W)x.flags&256?(Hl(x),x.flags&=-257,x=St(f,x,S)):x.memoizedState!==null?(gi(),x.child=f.child,x.flags|=128,x=null):(gi(),Le=T.fallback,F=x.mode,T=rt({mode:"visible",children:T.children},F),Le=Ll(Le,F,S,null),Le.flags|=2,T.return=x,Le.return=x,T.sibling=Le,x.child=T,vd(x,f.child,null,S),T=x.child,T.memoizedState=oe(S),T.childLanes=fe(f,me,S),x.memoizedState=te,x=Kf(null,T));else if(Hl(x),w1(Le)){if(me=Le.nextSibling&&Le.nextSibling.dataset,me)var Dt=me.dgst;me=Dt,T=Error(t(419)),T.stack="",T.digest=me,Cc({value:T,source:null,stack:null}),x=St(f,x,S)}else if(Fa||Sc(f,x,S,!1),me=(S&f.childLanes)!==0,Fa||me){if(me=ca,me!==null&&(T=Fr(me,S),T!==0&&T!==ft.retryLane))throw ft.retryLane=T,bc(f,T),Ci(me,f,T),lh;b1(Le)||O0(),x=St(f,x,S)}else b1(Le)?(x.flags|=192,x.child=f.child,x=null):(f=ft.treeContext,oa=pl(Le.nextSibling),ao=x,ss=!0,jc=null,mi=!1,f!==null&&wc(x,f),x=qe(x,T.children),x.flags|=4096);return x}return F?(gi(),Le=T.fallback,F=x.mode,ft=f.child,Dt=ft.sibling,T=Dl(ft,{mode:"hidden",children:T.children}),T.subtreeFlags=ft.subtreeFlags&65011712,Dt!==null?Le=Dl(Dt,Le):(Le=Ll(Le,F,S,null),Le.flags|=2),Le.return=x,T.return=x,T.sibling=Le,x.child=T,Kf(null,T),T=x.child,Le=f.child.memoizedState,Le===null?Le=oe(S):(F=Le.cachePool,F!==null?(ft=ms._currentValue,F=F.parent!==ft?{parent:ft,pool:ft}:F):F=gu(),Le={baseLanes:Le.baseLanes|S,cachePool:F}),T.memoizedState=Le,T.childLanes=fe(f,me,S),x.memoizedState=te,Kf(f.child,T)):(Hl(x),S=f.child,f=S.sibling,S=Dl(S,{mode:"visible",children:T.children}),S.return=x,S.sibling=null,f!==null&&(me=x.deletions,me===null?(x.deletions=[f],x.flags|=16):me.push(f)),x.child=S,x.memoizedState=null,S)}function qe(f,x){return x=rt({mode:"visible",children:x},f.mode),x.return=f,f.child=x}function rt(f,x){return f=Wo(22,f,null,x),f.lanes=0,f}function St(f,x,S){return vd(x,f.child,null,S),f=qe(x,x.pendingProps.children),f.flags|=2,x.memoizedState=null,f}function yt(f,x,S){f.lanes|=x;var T=f.alternate;T!==null&&(T.lanes|=x),Cf(f.return,x,S)}function Wt(f,x,S,T,F,W){var me=f.memoizedState;me===null?f.memoizedState={isBackwards:x,rendering:null,renderingStartTime:0,last:T,tail:S,tailMode:F,treeForkCount:W}:(me.isBackwards=x,me.rendering=null,me.renderingStartTime=0,me.last=T,me.tail=S,me.tailMode=F,me.treeForkCount=W)}function ir(f,x,S){var T=x.pendingProps,F=T.revealOrder,W=T.tail;T=T.children;var me=Qs.current,Le=(me&2)!==0;if(Le?(me=me&1|2,x.flags|=128):me&=1,ve(Qs,me),Ca(f,x,T,S),T=ss?zi:0,!Le&&f!==null&&(f.flags&128)!==0)e:for(f=x.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&yt(f,S,x);else if(f.tag===19)yt(f,S,x);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===x)break e;for(;f.sibling===null;){if(f.return===null||f.return===x)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}switch(F){case"forwards":for(S=x.child,F=null;S!==null;)f=S.alternate,f!==null&&Af(f)===null&&(F=S),S=S.sibling;S=F,S===null?(F=x.child,x.child=null):(F=S.sibling,S.sibling=null),Wt(x,!1,F,S,W,T);break;case"backwards":case"unstable_legacy-backwards":for(S=null,F=x.child,x.child=null;F!==null;){if(f=F.alternate,f!==null&&Af(f)===null){x.child=F;break}f=F.sibling,F.sibling=S,S=F,F=f}Wt(x,!0,S,null,W,T);break;case"together":Wt(x,!1,null,null,void 0,T);break;default:x.memoizedState=null}return x.child}function hr(f,x,S){if(f!==null&&(x.dependencies=f.dependencies),Ou|=x.lanes,(S&x.childLanes)===0)if(f!==null){if(Sc(f,x,S,!1),(S&x.childLanes)===0)return null}else return null;if(f!==null&&x.child!==f.child)throw Error(t(153));if(x.child!==null){for(f=x.child,S=Dl(f,f.pendingProps),x.child=S,S.return=x;f.sibling!==null;)f=f.sibling,S=S.sibling=Dl(f,f.pendingProps),S.return=x;S.sibling=null}return x.child}function Tr(f,x){return(f.lanes&x)!==0?!0:(f=f.dependencies,!!(f!==null&&fu(f)))}function $r(f,x,S){switch(x.tag){case 3:we(x,x.stateNode.containerInfo),al(x,ms,f.memoizedState.cache),Ui();break;case 27:case 5:ze(x);break;case 4:we(x,x.stateNode.containerInfo);break;case 10:al(x,x.type,x.memoizedProps.value);break;case 31:if(x.memoizedState!==null)return x.flags|=128,vu(x),null;break;case 13:var T=x.memoizedState;if(T!==null)return T.dehydrated!==null?(Hl(x),x.flags|=128,null):(S&x.child.childLanes)!==0?Ne(f,x,S):(Hl(x),f=hr(f,x,S),f!==null?f.sibling:null);Hl(x);break;case 19:var F=(f.flags&128)!==0;if(T=(S&x.childLanes)!==0,T||(Sc(f,x,S,!1),T=(S&x.childLanes)!==0),F){if(T)return ir(f,x,S);x.flags|=128}if(F=x.memoizedState,F!==null&&(F.rendering=null,F.tail=null,F.lastEffect=null),ve(Qs,Qs.current),T)break;return null;case 22:return x.lanes=0,ba(f,x,S,x.pendingProps);case 24:al(x,ms,f.memoizedState.cache)}return hr(f,x,S)}function Pr(f,x,S){if(f!==null)if(f.memoizedProps!==x.pendingProps)Fa=!0;else{if(!Tr(f,S)&&(x.flags&128)===0)return Fa=!1,$r(f,x,S);Fa=(f.flags&131072)!==0}else Fa=!1,ss&&(x.flags&1048576)!==0&&Hm(x,zi,x.index);switch(x.lanes=0,x.tag){case 16:e:{var T=x.pendingProps;if(f=il(x.elementType),x.type=f,typeof f=="function")uu(f)?(T=ql(f,T),x.tag=1,x=A(null,x,f,T,S)):(x.tag=0,x=E(null,x,f,T,S));else{if(f!=null){var F=f.$$typeof;if(F===O){x.tag=11,x=w0(null,x,f,T,S);break e}else if(F===B){x.tag=14,x=Gf(null,x,f,T,S);break e}}throw x=P(f)||f,Error(t(306,x,""))}}return x;case 0:return E(f,x,x.type,x.pendingProps,S);case 1:return T=x.type,F=ql(T,x.pendingProps),A(f,x,T,F,S);case 3:e:{if(we(x,x.stateNode.containerInfo),f===null)throw Error(t(387));T=x.pendingProps;var W=x.memoizedState;F=W.element,yu(f,x),Tc(x,T,null,S);var me=x.memoizedState;if(T=me.cache,al(x,ms,T),T!==W.cache&&Ym(x,[ms],S,!0),Aa(),T=me.element,W.isDehydrated)if(W={element:T,isDehydrated:!1,cache:me.cache},x.updateQueue.baseState=W,x.memoizedState=W,x.flags&256){x=U(f,x,T,S);break e}else if(T!==F){F=Po(Error(t(424)),x),Cc(F),x=U(f,x,T,S);break e}else for(f=x.stateNode.containerInfo,f.nodeType===9?f=f.body:f=f.nodeName==="HTML"?f.ownerDocument.body:f,oa=pl(f.firstChild),ao=x,ss=!0,jc=null,mi=!0,S=eg(x,null,T,S),x.child=S;S;)S.flags=S.flags&-3|4096,S=S.sibling;else{if(Ui(),T===F){x=hr(f,x,S);break e}Ca(f,x,T,S)}x=x.child}return x;case 26:return j(f,x),f===null?(S=a5(x.type,null,x.pendingProps,null))?x.memoizedState=S:ss||(S=x.type,f=x.pendingProps,T=L0(Pe.current).createElement(S),T[kr]=x,T[jr]=f,Ro(T,S,f),st(T),x.stateNode=T):x.memoizedState=a5(x.type,f.memoizedProps,x.pendingProps,f.memoizedState),null;case 27:return ze(x),f===null&&ss&&(T=x.stateNode=r5(x.type,x.pendingProps,Pe.current),ao=x,mi=!0,F=oa,Ru(x.type)?(j1=F,oa=pl(T.firstChild)):oa=F),Ca(f,x,x.pendingProps.children,S),j(f,x),f===null&&(x.flags|=4194304),x.child;case 5:return f===null&&ss&&((F=T=oa)&&(T=UL(T,x.type,x.pendingProps,mi),T!==null?(x.stateNode=T,ao=x,oa=pl(T.firstChild),mi=!1,F=!0):F=!1),F||Pa(x)),ze(x),F=x.type,W=x.pendingProps,me=f!==null?f.memoizedProps:null,T=W.children,y1(F,W)?T=null:me!==null&&y1(F,me)&&(x.flags|=32),x.memoizedState!==null&&(F=th(f,x,Gj,null,null,S),$g._currentValue=F),j(f,x),Ca(f,x,T,S),x.child;case 6:return f===null&&ss&&((f=S=oa)&&(S=VL(S,x.pendingProps,mi),S!==null?(x.stateNode=S,ao=x,oa=null,f=!0):f=!1),f||Pa(x)),null;case 13:return Ne(f,x,S);case 4:return we(x,x.stateNode.containerInfo),T=x.pendingProps,f===null?x.child=vd(x,null,T,S):Ca(f,x,T,S),x.child;case 11:return w0(f,x,x.type,x.pendingProps,S);case 7:return Ca(f,x,x.pendingProps,S),x.child;case 8:return Ca(f,x,x.pendingProps.children,S),x.child;case 12:return Ca(f,x,x.pendingProps.children,S),x.child;case 10:return T=x.pendingProps,al(x,x.type,T.value),Ca(f,x,T.children,S),x.child;case 9:return F=x.type._context,T=x.pendingProps.children,Nc(x),F=eo(F),T=T(F),x.flags|=1,Ca(f,x,T,S),x.child;case 14:return Gf(f,x,x.type,x.pendingProps,S);case 15:return j0(f,x,x.type,x.pendingProps,S);case 19:return ir(f,x,S);case 31:return m(f,x,S);case 22:return ba(f,x,S,x.pendingProps);case 24:return Nc(x),T=eo(ms),f===null?(F=Xm(),F===null&&(F=ca,W=Kp(),F.pooledCache=W,W.refCount++,W!==null&&(F.pooledCacheLanes|=S),F=W),x.memoizedState={parent:T,cache:F},Of(x),al(x,ms,F)):((f.lanes&S)!==0&&(yu(f,x),Tc(x,null,null,S),Aa()),F=f.memoizedState,W=x.memoizedState,F.parent!==T?(F={parent:T,cache:T},x.memoizedState=F,x.lanes===0&&(x.memoizedState=x.updateQueue.baseState=F),al(x,ms,T)):(T=W.cache,al(x,ms,T),T!==F.cache&&Ym(x,[ms],S,!0))),Ca(f,x,x.pendingProps.children,S),x.child;case 29:throw x.pendingProps}throw Error(t(156,x.tag))}function Dr(f){f.flags|=4}function dn(f,x,S,T,F){if((x=(f.mode&32)!==0)&&(x=!1),x){if(f.flags|=16777216,(F&335544128)===F)if(f.stateNode.complete)f.flags|=8192;else if(w_())f.flags|=8192;else throw $l=_f,kf}else f.flags&=-16777217}function ln(f,x){if(x.type!=="stylesheet"||(x.state.loading&4)!==0)f.flags&=-16777217;else if(f.flags|=16777216,!d5(x))if(w_())f.flags|=8192;else throw $l=_f,kf}function Mn(f,x){x!==null&&(f.flags|=4),f.flags&16384&&(x=f.tag!==22?wt():536870912,f.lanes|=x,hh|=x)}function ys(f,x){if(!ss)switch(f.tailMode){case"hidden":x=f.tail;for(var S=null;x!==null;)x.alternate!==null&&(S=x),x=x.sibling;S===null?f.tail=null:S.sibling=null;break;case"collapsed":S=f.tail;for(var T=null;S!==null;)S.alternate!==null&&(T=S),S=S.sibling;T===null?x||f.tail===null?f.tail=null:f.tail.sibling=null:T.sibling=null}}function Ln(f){var x=f.alternate!==null&&f.alternate.child===f.child,S=0,T=0;if(x)for(var F=f.child;F!==null;)S|=F.lanes|F.childLanes,T|=F.subtreeFlags&65011712,T|=F.flags&65011712,F.return=f,F=F.sibling;else for(F=f.child;F!==null;)S|=F.lanes|F.childLanes,T|=F.subtreeFlags,T|=F.flags,F.return=f,F=F.sibling;return f.subtreeFlags|=T,f.childLanes=S,x}function pa(f,x,S){var T=x.pendingProps;switch(Fl(x),x.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ln(x),null;case 1:return Ln(x),null;case 3:return S=x.stateNode,T=null,f!==null&&(T=f.memoizedState.cache),x.memoizedState.cache!==T&&(x.flags|=2048),ol(ms),Ae(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(f===null||f.child===null)&&(ua(x)?Dr(x):f===null||f.memoizedState.isDehydrated&&(x.flags&256)===0||(x.flags|=1024,Gm())),Ln(x),null;case 26:var F=x.type,W=x.memoizedState;return f===null?(Dr(x),W!==null?(Ln(x),ln(x,W)):(Ln(x),dn(x,F,null,T,S))):W?W!==f.memoizedState?(Dr(x),Ln(x),ln(x,W)):(Ln(x),x.flags&=-16777217):(f=f.memoizedProps,f!==T&&Dr(x),Ln(x),dn(x,F,f,T,S)),null;case 27:if(Ge(x),S=Pe.current,F=x.type,f!==null&&x.stateNode!=null)f.memoizedProps!==T&&Dr(x);else{if(!T){if(x.stateNode===null)throw Error(t(166));return Ln(x),null}f=ae.current,ua(x)?La(x):(f=r5(F,T,S),x.stateNode=f,Dr(x))}return Ln(x),null;case 5:if(Ge(x),F=x.type,f!==null&&x.stateNode!=null)f.memoizedProps!==T&&Dr(x);else{if(!T){if(x.stateNode===null)throw Error(t(166));return Ln(x),null}if(W=ae.current,ua(x))La(x);else{var me=L0(Pe.current);switch(W){case 1:W=me.createElementNS("http://www.w3.org/2000/svg",F);break;case 2:W=me.createElementNS("http://www.w3.org/1998/Math/MathML",F);break;default:switch(F){case"svg":W=me.createElementNS("http://www.w3.org/2000/svg",F);break;case"math":W=me.createElementNS("http://www.w3.org/1998/Math/MathML",F);break;case"script":W=me.createElement("div"),W.innerHTML="<script><\/script>",W=W.removeChild(W.firstChild);break;case"select":W=typeof T.is=="string"?me.createElement("select",{is:T.is}):me.createElement("select"),T.multiple?W.multiple=!0:T.size&&(W.size=T.size);break;default:W=typeof T.is=="string"?me.createElement(F,{is:T.is}):me.createElement(F)}}W[kr]=x,W[jr]=T;e:for(me=x.child;me!==null;){if(me.tag===5||me.tag===6)W.appendChild(me.stateNode);else if(me.tag!==4&&me.tag!==27&&me.child!==null){me.child.return=me,me=me.child;continue}if(me===x)break e;for(;me.sibling===null;){if(me.return===null||me.return===x)break e;me=me.return}me.sibling.return=me.return,me=me.sibling}x.stateNode=W;e:switch(Ro(W,F,T),F){case"button":case"input":case"select":case"textarea":T=!!T.autoFocus;break e;case"img":T=!0;break e;default:T=!1}T&&Dr(x)}}return Ln(x),dn(x,x.type,f===null?null:f.memoizedProps,x.pendingProps,S),null;case 6:if(f&&x.stateNode!=null)f.memoizedProps!==T&&Dr(x);else{if(typeof T!="string"&&x.stateNode===null)throw Error(t(166));if(f=Pe.current,ua(x)){if(f=x.stateNode,S=x.memoizedProps,T=null,F=ao,F!==null)switch(F.tag){case 27:case 5:T=F.memoizedProps}f[kr]=x,f=!!(f.nodeValue===S||T!==null&&T.suppressHydrationWarning===!0||W_(f.nodeValue,S)),f||Pa(x,!0)}else f=L0(f).createTextNode(T),f[kr]=x,x.stateNode=f}return Ln(x),null;case 31:if(S=x.memoizedState,f===null||f.memoizedState!==null){if(T=ua(x),S!==null){if(f===null){if(!T)throw Error(t(318));if(f=x.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(t(557));f[kr]=x}else Ui(),(x.flags&128)===0&&(x.memoizedState=null),x.flags|=4;Ln(x),f=!1}else S=Gm(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=S),f=!0;if(!f)return x.flags&256?(ti(x),x):(ti(x),null);if((x.flags&128)!==0)throw Error(t(558))}return Ln(x),null;case 13:if(T=x.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(F=ua(x),T!==null&&T.dehydrated!==null){if(f===null){if(!F)throw Error(t(318));if(F=x.memoizedState,F=F!==null?F.dehydrated:null,!F)throw Error(t(317));F[kr]=x}else Ui(),(x.flags&128)===0&&(x.memoizedState=null),x.flags|=4;Ln(x),F=!1}else F=Gm(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=F),F=!0;if(!F)return x.flags&256?(ti(x),x):(ti(x),null)}return ti(x),(x.flags&128)!==0?(x.lanes=S,x):(S=T!==null,f=f!==null&&f.memoizedState!==null,S&&(T=x.child,F=null,T.alternate!==null&&T.alternate.memoizedState!==null&&T.alternate.memoizedState.cachePool!==null&&(F=T.alternate.memoizedState.cachePool.pool),W=null,T.memoizedState!==null&&T.memoizedState.cachePool!==null&&(W=T.memoizedState.cachePool.pool),W!==F&&(T.flags|=2048)),S!==f&&S&&(x.child.flags|=8192),Mn(x,x.updateQueue),Ln(x),null);case 4:return Ae(),f===null&&f1(x.stateNode.containerInfo),Ln(x),null;case 10:return ol(x.type),Ln(x),null;case 19:if(Z(Qs),T=x.memoizedState,T===null)return Ln(x),null;if(F=(x.flags&128)!==0,W=T.rendering,W===null)if(F)ys(T,!1);else{if(Ba!==0||f!==null&&(f.flags&128)!==0)for(f=x.child;f!==null;){if(W=Af(f),W!==null){for(x.flags|=128,ys(T,!1),f=W.updateQueue,x.updateQueue=f,Mn(x,f),x.subtreeFlags=0,f=S,S=x.child;S!==null;)Zx(S,f),S=S.sibling;return ve(Qs,Qs.current&1|2),ss&&sl(x,T.treeForkCount),x.child}f=f.sibling}T.tail!==null&&he()>_0&&(x.flags|=128,F=!0,ys(T,!1),x.lanes=4194304)}else{if(!F)if(f=Af(W),f!==null){if(x.flags|=128,F=!0,f=f.updateQueue,x.updateQueue=f,Mn(x,f),ys(T,!0),T.tail===null&&T.tailMode==="hidden"&&!W.alternate&&!ss)return Ln(x),null}else 2*he()-T.renderingStartTime>_0&&S!==536870912&&(x.flags|=128,F=!0,ys(T,!1),x.lanes=4194304);T.isBackwards?(W.sibling=x.child,x.child=W):(f=T.last,f!==null?f.sibling=W:x.child=W,T.last=W)}return T.tail!==null?(f=T.tail,T.rendering=f,T.tail=f.sibling,T.renderingStartTime=he(),f.sibling=null,S=Qs.current,ve(Qs,F?S&1|2:S&1),ss&&sl(x,T.treeForkCount),f):(Ln(x),null);case 22:case 23:return ti(x),Jp(),T=x.memoizedState!==null,f!==null?f.memoizedState!==null!==T&&(x.flags|=8192):T&&(x.flags|=8192),T?(S&536870912)!==0&&(x.flags&128)===0&&(Ln(x),x.subtreeFlags&6&&(x.flags|=8192)):Ln(x),S=x.updateQueue,S!==null&&Mn(x,S.retryQueue),S=null,f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(S=f.memoizedState.cachePool.pool),T=null,x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(T=x.memoizedState.cachePool.pool),T!==S&&(x.flags|=2048),f!==null&&Z(_c),null;case 24:return S=null,f!==null&&(S=f.memoizedState.cache),x.memoizedState.cache!==S&&(x.flags|=2048),ol(ms),Ln(x),null;case 25:return null;case 30:return null}throw Error(t(156,x.tag))}function Go(f,x){switch(Fl(x),x.tag){case 1:return f=x.flags,f&65536?(x.flags=f&-65537|128,x):null;case 3:return ol(ms),Ae(),f=x.flags,(f&65536)!==0&&(f&128)===0?(x.flags=f&-65537|128,x):null;case 26:case 27:case 5:return Ge(x),null;case 31:if(x.memoizedState!==null){if(ti(x),x.alternate===null)throw Error(t(340));Ui()}return f=x.flags,f&65536?(x.flags=f&-65537|128,x):null;case 13:if(ti(x),f=x.memoizedState,f!==null&&f.dehydrated!==null){if(x.alternate===null)throw Error(t(340));Ui()}return f=x.flags,f&65536?(x.flags=f&-65537|128,x):null;case 19:return Z(Qs),null;case 4:return Ae(),null;case 10:return ol(x.type),null;case 22:case 23:return ti(x),Jp(),f!==null&&Z(_c),f=x.flags,f&65536?(x.flags=f&-65537|128,x):null;case 24:return ol(ms),null;case 25:return null;default:return null}}function jo(f,x){switch(Fl(x),x.tag){case 3:ol(ms),Ae();break;case 26:case 27:case 5:Ge(x);break;case 4:Ae();break;case 31:x.memoizedState!==null&&ti(x);break;case 13:ti(x);break;case 19:Z(Qs);break;case 10:ol(x.type);break;case 22:case 23:ti(x),Jp(),f!==null&&Z(_c);break;case 24:ol(ms)}}function ia(f,x){try{var S=x.updateQueue,T=S!==null?S.lastEffect:null;if(T!==null){var F=T.next;S=F;do{if((S.tag&f)===f){T=void 0;var W=S.create,me=S.inst;T=W(),me.destroy=T}S=S.next}while(S!==F)}}catch(Le){Hs(x,x.return,Le)}}function Sa(f,x,S){try{var T=x.updateQueue,F=T!==null?T.lastEffect:null;if(F!==null){var W=F.next;T=W;do{if((T.tag&f)===f){var me=T.inst,Le=me.destroy;if(Le!==void 0){me.destroy=void 0,F=x;var ft=S,Dt=Le;try{Dt()}catch(nr){Hs(F,ft,nr)}}}T=T.next}while(T!==W)}}catch(nr){Hs(x,x.return,nr)}}function qa(f){var x=f.updateQueue;if(x!==null){var S=f.stateNode;try{ng(x,S)}catch(T){Hs(f,f.return,T)}}}function Ia(f,x,S){S.props=ql(f.type,f.memoizedProps),S.state=f.memoizedState;try{S.componentWillUnmount()}catch(T){Hs(f,x,T)}}function la(f,x){try{var S=f.ref;if(S!==null){switch(f.tag){case 26:case 27:case 5:var T=f.stateNode;break;case 30:T=f.stateNode;break;default:T=f.stateNode}typeof S=="function"?f.refCleanup=S(T):S.current=T}}catch(F){Hs(f,x,F)}}function xs(f,x){var S=f.ref,T=f.refCleanup;if(S!==null)if(typeof T=="function")try{T()}catch(F){Hs(f,x,F)}finally{f.refCleanup=null,f=f.alternate,f!=null&&(f.refCleanup=null)}else if(typeof S=="function")try{S(null)}catch(F){Hs(f,x,F)}else S.current=null}function Co(f){var x=f.type,S=f.memoizedProps,T=f.stateNode;try{e:switch(x){case"button":case"input":case"select":case"textarea":S.autoFocus&&T.focus();break e;case"img":S.src?T.src=S.src:S.srcSet&&(T.srcset=S.srcSet)}}catch(F){Hs(f,f.return,F)}}function Ic(f,x,S){try{var T=f.stateNode;DL(T,f.type,S,x),T[jr]=x}catch(F){Hs(f,f.return,F)}}function Gl(f){return f.tag===5||f.tag===3||f.tag===26||f.tag===27&&Ru(f.type)||f.tag===4}function Ga(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||Gl(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.tag===27&&Ru(f.type)||f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function xi(f,x,S){var T=f.tag;if(T===5||T===6)f=f.stateNode,x?(S.nodeType===9?S.body:S.nodeName==="HTML"?S.ownerDocument.body:S).insertBefore(f,x):(x=S.nodeType===9?S.body:S.nodeName==="HTML"?S.ownerDocument.body:S,x.appendChild(f),S=S._reactRootContainer,S!=null||x.onclick!==null||(x.onclick=Fn));else if(T!==4&&(T===27&&Ru(f.type)&&(S=f.stateNode,x=null),f=f.child,f!==null))for(xi(f,x,S),f=f.sibling;f!==null;)xi(f,x,S),f=f.sibling}function Na(f,x,S){var T=f.tag;if(T===5||T===6)f=f.stateNode,x?S.insertBefore(f,x):S.appendChild(f);else if(T!==4&&(T===27&&Ru(f.type)&&(S=f.stateNode),f=f.child,f!==null))for(Na(f,x,S),f=f.sibling;f!==null;)Na(f,x,S),f=f.sibling}function dh(f){var x=f.stateNode,S=f.memoizedProps;try{for(var T=f.type,F=x.attributes;F.length;)x.removeAttributeNode(F[0]);Ro(x,T,S),x[kr]=f,x[jr]=S}catch(W){Hs(f,f.return,W)}}var co=!1,ea=!1,Kl=!1,uo=typeof WeakSet=="function"?WeakSet:Set,wa=null;function Tg(f,x){if(f=f.containerInfo,m1=H0,f=zm(f),xf(f)){if("selectionStart"in f)var S={start:f.selectionStart,end:f.selectionEnd};else e:{S=(S=f.ownerDocument)&&S.defaultView||window;var T=S.getSelection&&S.getSelection();if(T&&T.rangeCount!==0){S=T.anchorNode;var F=T.anchorOffset,W=T.focusNode;T=T.focusOffset;try{S.nodeType,W.nodeType}catch{S=null;break e}var me=0,Le=-1,ft=-1,Dt=0,nr=0,pr=f,Ut=null;t:for(;;){for(var Gt;pr!==S||F!==0&&pr.nodeType!==3||(Le=me+F),pr!==W||T!==0&&pr.nodeType!==3||(ft=me+T),pr.nodeType===3&&(me+=pr.nodeValue.length),(Gt=pr.firstChild)!==null;)Ut=pr,pr=Gt;for(;;){if(pr===f)break t;if(Ut===S&&++Dt===F&&(Le=me),Ut===W&&++nr===T&&(ft=me),(Gt=pr.nextSibling)!==null)break;pr=Ut,Ut=pr.parentNode}pr=Gt}S=Le===-1||ft===-1?null:{start:Le,end:ft}}else S=null}S=S||{start:0,end:0}}else S=null;for(g1={focusedElem:f,selectionRange:S},H0=!1,wa=x;wa!==null;)if(x=wa,f=x.child,(x.subtreeFlags&1028)!==0&&f!==null)f.return=x,wa=f;else for(;wa!==null;){switch(x=wa,W=x.alternate,f=x.flags,x.tag){case 0:if((f&4)!==0&&(f=x.updateQueue,f=f!==null?f.events:null,f!==null))for(S=0;S<f.length;S++)F=f[S],F.ref.impl=F.nextImpl;break;case 11:case 15:break;case 1:if((f&1024)!==0&&W!==null){f=void 0,S=x,F=W.memoizedProps,W=W.memoizedState,T=S.stateNode;try{var sn=ql(S.type,F);f=T.getSnapshotBeforeUpdate(sn,W),T.__reactInternalSnapshotBeforeUpdate=f}catch(Nn){Hs(S,S.return,Nn)}}break;case 3:if((f&1024)!==0){if(f=x.stateNode.containerInfo,S=f.nodeType,S===9)v1(f);else if(S===1)switch(f.nodeName){case"HEAD":case"HTML":case"BODY":v1(f);break;default:f.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((f&1024)!==0)throw Error(t(163))}if(f=x.sibling,f!==null){f.return=x.return,wa=f;break}wa=x.return}}function n_(f,x,S){var T=S.flags;switch(S.tag){case 0:case 11:case 15:kd(f,S),T&4&&ia(5,S);break;case 1:if(kd(f,S),T&4)if(f=S.stateNode,x===null)try{f.componentDidMount()}catch(me){Hs(S,S.return,me)}else{var F=ql(S.type,x.memoizedProps);x=x.memoizedState;try{f.componentDidUpdate(F,x,f.__reactInternalSnapshotBeforeUpdate)}catch(me){Hs(S,S.return,me)}}T&64&&qa(S),T&512&&la(S,S.return);break;case 3:if(kd(f,S),T&64&&(f=S.updateQueue,f!==null)){if(x=null,S.child!==null)switch(S.child.tag){case 27:case 5:x=S.child.stateNode;break;case 1:x=S.child.stateNode}try{ng(f,x)}catch(me){Hs(S,S.return,me)}}break;case 27:x===null&&T&4&&dh(S);case 26:case 5:kd(f,S),x===null&&T&4&&Co(S),T&512&&la(S,S.return);break;case 12:kd(f,S);break;case 31:kd(f,S),T&4&&o_(f,S);break;case 13:kd(f,S),T&4&&i_(f,S),T&64&&(f=S.memoizedState,f!==null&&(f=f.dehydrated,f!==null&&(S=SL.bind(null,S),HL(f,S))));break;case 22:if(T=S.memoizedState!==null||co,!T){x=x!==null&&x.memoizedState!==null||ea,F=co;var W=ea;co=T,(ea=x)&&!W?_d(f,S,(S.subtreeFlags&8772)!==0):kd(f,S),co=F,ea=W}break;case 30:break;default:kd(f,S)}}function s_(f){var x=f.alternate;x!==null&&(f.alternate=null,s_(x)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(x=f.stateNode,x!==null&&In(x)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}var ka=null,vi=!1;function Nd(f,x,S){for(S=S.child;S!==null;)a_(f,x,S),S=S.sibling}function a_(f,x,S){if(ct&&typeof ct.onCommitFiberUnmount=="function")try{ct.onCommitFiberUnmount(De,S)}catch{}switch(S.tag){case 26:ea||xs(S,x),Nd(f,x,S),S.memoizedState?S.memoizedState.count--:S.stateNode&&(S=S.stateNode,S.parentNode.removeChild(S));break;case 27:ea||xs(S,x);var T=ka,F=vi;Ru(S.type)&&(ka=S.stateNode,vi=!1),Nd(f,x,S),Fg(S.stateNode),ka=T,vi=F;break;case 5:ea||xs(S,x);case 6:if(T=ka,F=vi,ka=null,Nd(f,x,S),ka=T,vi=F,ka!==null)if(vi)try{(ka.nodeType===9?ka.body:ka.nodeName==="HTML"?ka.ownerDocument.body:ka).removeChild(S.stateNode)}catch(W){Hs(S,x,W)}else try{ka.removeChild(S.stateNode)}catch(W){Hs(S,x,W)}break;case 18:ka!==null&&(vi?(f=ka,X_(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,S.stateNode),jh(f)):X_(ka,S.stateNode));break;case 4:T=ka,F=vi,ka=S.stateNode.containerInfo,vi=!0,Nd(f,x,S),ka=T,vi=F;break;case 0:case 11:case 14:case 15:Sa(2,S,x),ea||Sa(4,S,x),Nd(f,x,S);break;case 1:ea||(xs(S,x),T=S.stateNode,typeof T.componentWillUnmount=="function"&&Ia(S,x,T)),Nd(f,x,S);break;case 21:Nd(f,x,S);break;case 22:ea=(T=ea)||S.memoizedState!==null,Nd(f,x,S),ea=T;break;default:Nd(f,x,S)}}function o_(f,x){if(x.memoizedState===null&&(f=x.alternate,f!==null&&(f=f.memoizedState,f!==null))){f=f.dehydrated;try{jh(f)}catch(S){Hs(x,x.return,S)}}}function i_(f,x){if(x.memoizedState===null&&(f=x.alternate,f!==null&&(f=f.memoizedState,f!==null&&(f=f.dehydrated,f!==null))))try{jh(f)}catch(S){Hs(x,x.return,S)}}function gL(f){switch(f.tag){case 31:case 13:case 19:var x=f.stateNode;return x===null&&(x=f.stateNode=new uo),x;case 22:return f=f.stateNode,x=f._retryCache,x===null&&(x=f._retryCache=new uo),x;default:throw Error(t(435,f.tag))}}function S0(f,x){var S=gL(f);x.forEach(function(T){if(!S.has(T)){S.add(T);var F=NL.bind(null,f,T);T.then(F,F)}})}function bi(f,x){var S=x.deletions;if(S!==null)for(var T=0;T<S.length;T++){var F=S[T],W=f,me=x,Le=me;e:for(;Le!==null;){switch(Le.tag){case 27:if(Ru(Le.type)){ka=Le.stateNode,vi=!1;break e}break;case 5:ka=Le.stateNode,vi=!1;break e;case 3:case 4:ka=Le.stateNode.containerInfo,vi=!0;break e}Le=Le.return}if(ka===null)throw Error(t(160));a_(W,me,F),ka=null,vi=!1,W=F.alternate,W!==null&&(W.return=null),F.return=null}if(x.subtreeFlags&13886)for(x=x.child;x!==null;)l_(x,f),x=x.sibling}var Yl=null;function l_(f,x){var S=f.alternate,T=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:bi(x,f),wi(f),T&4&&(Sa(3,f,f.return),ia(3,f),Sa(5,f,f.return));break;case 1:bi(x,f),wi(f),T&512&&(ea||S===null||xs(S,S.return)),T&64&&co&&(f=f.updateQueue,f!==null&&(T=f.callbacks,T!==null&&(S=f.shared.hiddenCallbacks,f.shared.hiddenCallbacks=S===null?T:S.concat(T))));break;case 26:var F=Yl;if(bi(x,f),wi(f),T&512&&(ea||S===null||xs(S,S.return)),T&4){var W=S!==null?S.memoizedState:null;if(T=f.memoizedState,S===null)if(T===null)if(f.stateNode===null){e:{T=f.type,S=f.memoizedProps,F=F.ownerDocument||F;t:switch(T){case"title":W=F.getElementsByTagName("title")[0],(!W||W[zr]||W[kr]||W.namespaceURI==="http://www.w3.org/2000/svg"||W.hasAttribute("itemprop"))&&(W=F.createElement(T),F.head.insertBefore(W,F.querySelector("head > title"))),Ro(W,T,S),W[kr]=f,st(W),T=W;break e;case"link":var me=l5("link","href",F).get(T+(S.href||""));if(me){for(var Le=0;Le<me.length;Le++)if(W=me[Le],W.getAttribute("href")===(S.href==null||S.href===""?null:S.href)&&W.getAttribute("rel")===(S.rel==null?null:S.rel)&&W.getAttribute("title")===(S.title==null?null:S.title)&&W.getAttribute("crossorigin")===(S.crossOrigin==null?null:S.crossOrigin)){me.splice(Le,1);break t}}W=F.createElement(T),Ro(W,T,S),F.head.appendChild(W);break;case"meta":if(me=l5("meta","content",F).get(T+(S.content||""))){for(Le=0;Le<me.length;Le++)if(W=me[Le],W.getAttribute("content")===(S.content==null?null:""+S.content)&&W.getAttribute("name")===(S.name==null?null:S.name)&&W.getAttribute("property")===(S.property==null?null:S.property)&&W.getAttribute("http-equiv")===(S.httpEquiv==null?null:S.httpEquiv)&&W.getAttribute("charset")===(S.charSet==null?null:S.charSet)){me.splice(Le,1);break t}}W=F.createElement(T),Ro(W,T,S),F.head.appendChild(W);break;default:throw Error(t(468,T))}W[kr]=f,st(W),T=W}f.stateNode=T}else c5(F,f.type,f.stateNode);else f.stateNode=i5(F,T,f.memoizedProps);else W!==T?(W===null?S.stateNode!==null&&(S=S.stateNode,S.parentNode.removeChild(S)):W.count--,T===null?c5(F,f.type,f.stateNode):i5(F,T,f.memoizedProps)):T===null&&f.stateNode!==null&&Ic(f,f.memoizedProps,S.memoizedProps)}break;case 27:bi(x,f),wi(f),T&512&&(ea||S===null||xs(S,S.return)),S!==null&&T&4&&Ic(f,f.memoizedProps,S.memoizedProps);break;case 5:if(bi(x,f),wi(f),T&512&&(ea||S===null||xs(S,S.return)),f.flags&32){F=f.stateNode;try{_r(F,"")}catch(sn){Hs(f,f.return,sn)}}T&4&&f.stateNode!=null&&(F=f.memoizedProps,Ic(f,F,S!==null?S.memoizedProps:F)),T&1024&&(Kl=!0);break;case 6:if(bi(x,f),wi(f),T&4){if(f.stateNode===null)throw Error(t(162));T=f.memoizedProps,S=f.stateNode;try{S.nodeValue=T}catch(sn){Hs(f,f.return,sn)}}break;case 3:if(z0=null,F=Yl,Yl=F0(x.containerInfo),bi(x,f),Yl=F,wi(f),T&4&&S!==null&&S.memoizedState.isDehydrated)try{jh(x.containerInfo)}catch(sn){Hs(f,f.return,sn)}Kl&&(Kl=!1,c_(f));break;case 4:T=Yl,Yl=F0(f.stateNode.containerInfo),bi(x,f),wi(f),Yl=T;break;case 12:bi(x,f),wi(f);break;case 31:bi(x,f),wi(f),T&4&&(T=f.updateQueue,T!==null&&(f.updateQueue=null,S0(f,T)));break;case 13:bi(x,f),wi(f),f.child.flags&8192&&f.memoizedState!==null!=(S!==null&&S.memoizedState!==null)&&(k0=he()),T&4&&(T=f.updateQueue,T!==null&&(f.updateQueue=null,S0(f,T)));break;case 22:F=f.memoizedState!==null;var ft=S!==null&&S.memoizedState!==null,Dt=co,nr=ea;if(co=Dt||F,ea=nr||ft,bi(x,f),ea=nr,co=Dt,wi(f),T&8192)e:for(x=f.stateNode,x._visibility=F?x._visibility&-2:x._visibility|1,F&&(S===null||ft||co||ea||Zf(f)),S=null,x=f;;){if(x.tag===5||x.tag===26){if(S===null){ft=S=x;try{if(W=ft.stateNode,F)me=W.style,typeof me.setProperty=="function"?me.setProperty("display","none","important"):me.display="none";else{Le=ft.stateNode;var pr=ft.memoizedProps.style,Ut=pr!=null&&pr.hasOwnProperty("display")?pr.display:null;Le.style.display=Ut==null||typeof Ut=="boolean"?"":(""+Ut).trim()}}catch(sn){Hs(ft,ft.return,sn)}}}else if(x.tag===6){if(S===null){ft=x;try{ft.stateNode.nodeValue=F?"":ft.memoizedProps}catch(sn){Hs(ft,ft.return,sn)}}}else if(x.tag===18){if(S===null){ft=x;try{var Gt=ft.stateNode;F?Q_(Gt,!0):Q_(ft.stateNode,!1)}catch(sn){Hs(ft,ft.return,sn)}}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===f)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===f)break e;for(;x.sibling===null;){if(x.return===null||x.return===f)break e;S===x&&(S=null),x=x.return}S===x&&(S=null),x.sibling.return=x.return,x=x.sibling}T&4&&(T=f.updateQueue,T!==null&&(S=T.retryQueue,S!==null&&(T.retryQueue=null,S0(f,S))));break;case 19:bi(x,f),wi(f),T&4&&(T=f.updateQueue,T!==null&&(f.updateQueue=null,S0(f,T)));break;case 30:break;case 21:break;default:bi(x,f),wi(f)}}function wi(f){var x=f.flags;if(x&2){try{for(var S,T=f.return;T!==null;){if(Gl(T)){S=T;break}T=T.return}if(S==null)throw Error(t(160));switch(S.tag){case 27:var F=S.stateNode,W=Ga(f);Na(f,W,F);break;case 5:var me=S.stateNode;S.flags&32&&(_r(me,""),S.flags&=-33);var Le=Ga(f);Na(f,Le,me);break;case 3:case 4:var ft=S.stateNode.containerInfo,Dt=Ga(f);xi(f,Dt,ft);break;default:throw Error(t(161))}}catch(nr){Hs(f,f.return,nr)}f.flags&=-3}x&4096&&(f.flags&=-4097)}function c_(f){if(f.subtreeFlags&1024)for(f=f.child;f!==null;){var x=f;c_(x),x.tag===5&&x.flags&1024&&x.stateNode.reset(),f=f.sibling}}function kd(f,x){if(x.subtreeFlags&8772)for(x=x.child;x!==null;)n_(f,x.alternate,x),x=x.sibling}function Zf(f){for(f=f.child;f!==null;){var x=f;switch(x.tag){case 0:case 11:case 14:case 15:Sa(4,x,x.return),Zf(x);break;case 1:xs(x,x.return);var S=x.stateNode;typeof S.componentWillUnmount=="function"&&Ia(x,x.return,S),Zf(x);break;case 27:Fg(x.stateNode);case 26:case 5:xs(x,x.return),Zf(x);break;case 22:x.memoizedState===null&&Zf(x);break;case 30:Zf(x);break;default:Zf(x)}f=f.sibling}}function _d(f,x,S){for(S=S&&(x.subtreeFlags&8772)!==0,x=x.child;x!==null;){var T=x.alternate,F=f,W=x,me=W.flags;switch(W.tag){case 0:case 11:case 15:_d(F,W,S),ia(4,W);break;case 1:if(_d(F,W,S),T=W,F=T.stateNode,typeof F.componentDidMount=="function")try{F.componentDidMount()}catch(Dt){Hs(T,T.return,Dt)}if(T=W,F=T.updateQueue,F!==null){var Le=T.stateNode;try{var ft=F.shared.hiddenCallbacks;if(ft!==null)for(F.shared.hiddenCallbacks=null,F=0;F<ft.length;F++)rg(ft[F],Le)}catch(Dt){Hs(T,T.return,Dt)}}S&&me&64&&qa(W),la(W,W.return);break;case 27:dh(W);case 26:case 5:_d(F,W,S),S&&T===null&&me&4&&Co(W),la(W,W.return);break;case 12:_d(F,W,S);break;case 31:_d(F,W,S),S&&me&4&&o_(F,W);break;case 13:_d(F,W,S),S&&me&4&&i_(F,W);break;case 22:W.memoizedState===null&&_d(F,W,S),la(W,W.return);break;case 30:break;default:_d(F,W,S)}x=x.sibling}}function Yj(f,x){var S=null;f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(S=f.memoizedState.cachePool.pool),f=null,x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(f=x.memoizedState.cachePool.pool),f!==S&&(f!=null&&f.refCount++,S!=null&&Nf(S))}function Zj(f,x){f=null,x.alternate!==null&&(f=x.alternate.memoizedState.cache),x=x.memoizedState.cache,x!==f&&(x.refCount++,f!=null&&Nf(f))}function Zl(f,x,S,T){if(x.subtreeFlags&10256)for(x=x.child;x!==null;)d_(f,x,S,T),x=x.sibling}function d_(f,x,S,T){var F=x.flags;switch(x.tag){case 0:case 11:case 15:Zl(f,x,S,T),F&2048&&ia(9,x);break;case 1:Zl(f,x,S,T);break;case 3:Zl(f,x,S,T),F&2048&&(f=null,x.alternate!==null&&(f=x.alternate.memoizedState.cache),x=x.memoizedState.cache,x!==f&&(x.refCount++,f!=null&&Nf(f)));break;case 12:if(F&2048){Zl(f,x,S,T),f=x.stateNode;try{var W=x.memoizedProps,me=W.id,Le=W.onPostCommit;typeof Le=="function"&&Le(me,x.alternate===null?"mount":"update",f.passiveEffectDuration,-0)}catch(ft){Hs(x,x.return,ft)}}else Zl(f,x,S,T);break;case 31:Zl(f,x,S,T);break;case 13:Zl(f,x,S,T);break;case 23:break;case 22:W=x.stateNode,me=x.alternate,x.memoizedState!==null?W._visibility&2?Zl(f,x,S,T):Og(f,x):W._visibility&2?Zl(f,x,S,T):(W._visibility|=2,uh(f,x,S,T,(x.subtreeFlags&10256)!==0||!1)),F&2048&&Yj(me,x);break;case 24:Zl(f,x,S,T),F&2048&&Zj(x.alternate,x);break;default:Zl(f,x,S,T)}}function uh(f,x,S,T,F){for(F=F&&((x.subtreeFlags&10256)!==0||!1),x=x.child;x!==null;){var W=f,me=x,Le=S,ft=T,Dt=me.flags;switch(me.tag){case 0:case 11:case 15:uh(W,me,Le,ft,F),ia(8,me);break;case 23:break;case 22:var nr=me.stateNode;me.memoizedState!==null?nr._visibility&2?uh(W,me,Le,ft,F):Og(W,me):(nr._visibility|=2,uh(W,me,Le,ft,F)),F&&Dt&2048&&Yj(me.alternate,me);break;case 24:uh(W,me,Le,ft,F),F&&Dt&2048&&Zj(me.alternate,me);break;default:uh(W,me,Le,ft,F)}x=x.sibling}}function Og(f,x){if(x.subtreeFlags&10256)for(x=x.child;x!==null;){var S=f,T=x,F=T.flags;switch(T.tag){case 22:Og(S,T),F&2048&&Yj(T.alternate,T);break;case 24:Og(S,T),F&2048&&Zj(T.alternate,T);break;default:Og(S,T)}x=x.sibling}}var Pg=8192;function fh(f,x,S){if(f.subtreeFlags&Pg)for(f=f.child;f!==null;)u_(f,x,S),f=f.sibling}function u_(f,x,S){switch(f.tag){case 26:fh(f,x,S),f.flags&Pg&&f.memoizedState!==null&&r9(S,Yl,f.memoizedState,f.memoizedProps);break;case 5:fh(f,x,S);break;case 3:case 4:var T=Yl;Yl=F0(f.stateNode.containerInfo),fh(f,x,S),Yl=T;break;case 22:f.memoizedState===null&&(T=f.alternate,T!==null&&T.memoizedState!==null?(T=Pg,Pg=16777216,fh(f,x,S),Pg=T):fh(f,x,S));break;default:fh(f,x,S)}}function f_(f){var x=f.alternate;if(x!==null&&(f=x.child,f!==null)){x.child=null;do x=f.sibling,f.sibling=null,f=x;while(f!==null)}}function Ag(f){var x=f.deletions;if((f.flags&16)!==0){if(x!==null)for(var S=0;S<x.length;S++){var T=x[S];wa=T,h_(T,f)}f_(f)}if(f.subtreeFlags&10256)for(f=f.child;f!==null;)p_(f),f=f.sibling}function p_(f){switch(f.tag){case 0:case 11:case 15:Ag(f),f.flags&2048&&Sa(9,f,f.return);break;case 3:Ag(f);break;case 12:Ag(f);break;case 22:var x=f.stateNode;f.memoizedState!==null&&x._visibility&2&&(f.return===null||f.return.tag!==13)?(x._visibility&=-3,N0(f)):Ag(f);break;default:Ag(f)}}function N0(f){var x=f.deletions;if((f.flags&16)!==0){if(x!==null)for(var S=0;S<x.length;S++){var T=x[S];wa=T,h_(T,f)}f_(f)}for(f=f.child;f!==null;){switch(x=f,x.tag){case 0:case 11:case 15:Sa(8,x,x.return),N0(x);break;case 22:S=x.stateNode,S._visibility&2&&(S._visibility&=-3,N0(x));break;default:N0(x)}f=f.sibling}}function h_(f,x){for(;wa!==null;){var S=wa;switch(S.tag){case 0:case 11:case 15:Sa(8,S,x);break;case 23:case 22:if(S.memoizedState!==null&&S.memoizedState.cachePool!==null){var T=S.memoizedState.cachePool.pool;T!=null&&T.refCount++}break;case 24:Nf(S.memoizedState.cache)}if(T=S.child,T!==null)T.return=S,wa=T;else e:for(S=f;wa!==null;){T=wa;var F=T.sibling,W=T.return;if(s_(T),T===S){wa=null;break e}if(F!==null){F.return=W,wa=F;break e}wa=W}}}var yL={getCacheForType:function(f){var x=eo(ms),S=x.data.get(f);return S===void 0&&(S=f(),x.data.set(f,S)),S},cacheSignal:function(){return eo(ms).controller.signal}},xL=typeof WeakMap=="function"?WeakMap:Map,Es=0,ca=null,as=null,ls=0,Vs=0,Hi=null,Tu=!1,ph=!1,Xj=!1,Ed=0,Ba=0,Ou=0,Xf=0,Qj=0,Wi=0,hh=0,Mg=null,ji=null,Jj=!1,k0=0,m_=0,_0=1/0,E0=null,Pu=null,fo=0,Au=null,mh=null,Td=0,e1=0,t1=null,g_=null,Ig=0,r1=null;function qi(){return(Es&2)!==0&&ls!==0?ls&-ls:D.T!==null?l1():an()}function y_(){if(Wi===0)if((ls&536870912)===0||ss){var f=Xt;Xt<<=1,(Xt&3932160)===0&&(Xt=262144),Wi=f}else Wi=536870912;return f=qo.current,f!==null&&(f.flags|=32),Wi}function Ci(f,x,S){(f===ca&&(Vs===2||Vs===9)||f.cancelPendingCommit!==null)&&(gh(f,0),Mu(f,ls,Wi,!1)),tr(f,S),((Es&2)===0||f!==ca)&&(f===ca&&((Es&2)===0&&(Xf|=S),Ba===4&&Mu(f,ls,Wi,!1)),Rc(f))}function x_(f,x,S){if((Es&6)!==0)throw Error(t(327));var T=!S&&(x&127)===0&&(x&f.expiredLanes)===0||Be(f,x),F=T?wL(f,x):s1(f,x,!0),W=T;do{if(F===0){ph&&!T&&Mu(f,x,0,!1);break}else{if(S=f.current.alternate,W&&!vL(S)){F=s1(f,x,!1),W=!1;continue}if(F===2){if(W=x,f.errorRecoveryDisabledLanes&W)var me=0;else me=f.pendingLanes&-536870913,me=me!==0?me:me&536870912?536870912:0;if(me!==0){x=me;e:{var Le=f;F=Mg;var ft=Le.current.memoizedState.isDehydrated;if(ft&&(gh(Le,me).flags|=256),me=s1(Le,me,!1),me!==2){if(Xj&&!ft){Le.errorRecoveryDisabledLanes|=W,Xf|=W,F=4;break e}W=ji,ji=F,W!==null&&(ji===null?ji=W:ji.push.apply(ji,W))}F=me}if(W=!1,F!==2)continue}}if(F===1){gh(f,0),Mu(f,x,0,!0);break}e:{switch(T=f,W=F,W){case 0:case 1:throw Error(t(345));case 4:if((x&4194048)!==x)break;case 6:Mu(T,x,Wi,!Tu);break e;case 2:ji=null;break;case 3:case 5:break;default:throw Error(t(329))}if((x&62914560)===x&&(F=k0+300-he(),10<F)){if(Mu(T,x,Wi,!Tu),be(T,0,!0)!==0)break e;Td=x,T.timeoutHandle=Y_(v_.bind(null,T,S,ji,E0,Jj,x,Wi,Xf,hh,Tu,W,"Throttled",-0,0),F);break e}v_(T,S,ji,E0,Jj,x,Wi,Xf,hh,Tu,W,null,-0,0)}}break}while(!0);Rc(f)}function v_(f,x,S,T,F,W,me,Le,ft,Dt,nr,pr,Ut,Gt){if(f.timeoutHandle=-1,pr=x.subtreeFlags,pr&8192||(pr&16785408)===16785408){pr={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Fn},u_(x,W,pr);var sn=(W&62914560)===W?k0-he():(W&4194048)===W?m_-he():0;if(sn=n9(pr,sn),sn!==null){Td=W,f.cancelPendingCommit=sn(__.bind(null,f,x,W,S,T,F,me,Le,ft,nr,pr,null,Ut,Gt)),Mu(f,W,me,!Dt);return}}__(f,x,W,S,T,F,me,Le,ft)}function vL(f){for(var x=f;;){var S=x.tag;if((S===0||S===11||S===15)&&x.flags&16384&&(S=x.updateQueue,S!==null&&(S=S.stores,S!==null)))for(var T=0;T<S.length;T++){var F=S[T],W=F.getSnapshot;F=F.value;try{if(!To(W(),F))return!1}catch{return!1}}if(S=x.child,x.subtreeFlags&16384&&S!==null)S.return=x,x=S;else{if(x===f)break;for(;x.sibling===null;){if(x.return===null||x.return===f)return!0;x=x.return}x.sibling.return=x.return,x=x.sibling}}return!0}function Mu(f,x,S,T){x&=~Qj,x&=~Xf,f.suspendedLanes|=x,f.pingedLanes&=~x,T&&(f.warmLanes|=x),T=f.expirationTimes;for(var F=x;0<F;){var W=31-dt(F),me=1<<W;T[W]=-1,F&=~me}S!==0&&tn(f,S,x)}function T0(){return(Es&6)===0?(Rg(0),!1):!0}function n1(){if(as!==null){if(Vs===0)var f=as.return;else f=as,Bl=gd=null,og(f),xd=null,Ef=0,f=as;for(;f!==null;)jo(f.alternate,f),f=f.return;as=null}}function gh(f,x){var S=f.timeoutHandle;S!==-1&&(f.timeoutHandle=-1,BL(S)),S=f.cancelPendingCommit,S!==null&&(f.cancelPendingCommit=null,S()),Td=0,n1(),ca=f,as=S=Dl(f.current,null),ls=x,Vs=0,Hi=null,Tu=!1,ph=Be(f,x),Xj=!1,hh=Wi=Qj=Xf=Ou=Ba=0,ji=Mg=null,Jj=!1,(x&8)!==0&&(x|=x&32);var T=f.entangledLanes;if(T!==0)for(f=f.entanglements,T&=x;0<T;){var F=31-dt(T),W=1<<F;x|=f[F],T&=~W}return Ed=x,fd(),S}function b_(f,x){Dn=null,D.H=Vf,x===yd||x===Vi?(x=Jm(),Vs=3):x===kf?(x=Jm(),Vs=4):Vs=x===lh?8:x!==null&&typeof x=="object"&&typeof x.then=="function"?6:1,Hi=x,as===null&&(Ba=1,qf(f,Po(x,f.current)))}function w_(){var f=qo.current;return f===null?!0:(ls&4194048)===ls?io===null:(ls&62914560)===ls||(ls&536870912)!==0?f===io:!1}function j_(){var f=D.H;return D.H=Vf,f===null?Vf:f}function C_(){var f=D.A;return D.A=yL,f}function O0(){Ba=4,Tu||(ls&4194048)!==ls&&qo.current!==null||(ph=!0),(Ou&134217727)===0&&(Xf&134217727)===0||ca===null||Mu(ca,ls,Wi,!1)}function s1(f,x,S){var T=Es;Es|=2;var F=j_(),W=C_();(ca!==f||ls!==x)&&(E0=null,gh(f,x)),x=!1;var me=Ba;e:do try{if(Vs!==0&&as!==null){var Le=as,ft=Hi;switch(Vs){case 8:n1(),me=6;break e;case 3:case 2:case 9:case 6:qo.current===null&&(x=!0);var Dt=Vs;if(Vs=0,Hi=null,yh(f,Le,ft,Dt),S&&ph){me=0;break e}break;default:Dt=Vs,Vs=0,Hi=null,yh(f,Le,ft,Dt)}}bL(),me=Ba;break}catch(nr){b_(f,nr)}while(!0);return x&&f.shellSuspendCounter++,Bl=gd=null,Es=T,D.H=F,D.A=W,as===null&&(ca=null,ls=0,fd()),me}function bL(){for(;as!==null;)S_(as)}function wL(f,x){var S=Es;Es|=2;var T=j_(),F=C_();ca!==f||ls!==x?(E0=null,_0=he()+500,gh(f,x)):ph=Be(f,x);e:do try{if(Vs!==0&&as!==null){x=as;var W=Hi;t:switch(Vs){case 1:Vs=0,Hi=null,yh(f,x,W,1);break;case 2:case 9:if(Qm(W)){Vs=0,Hi=null,N_(x);break}x=function(){Vs!==2&&Vs!==9||ca!==f||(Vs=7),Rc(f)},W.then(x,x);break e;case 3:Vs=7;break e;case 4:Vs=5;break e;case 7:Qm(W)?(Vs=0,Hi=null,N_(x)):(Vs=0,Hi=null,yh(f,x,W,7));break;case 5:var me=null;switch(as.tag){case 26:me=as.memoizedState;case 5:case 27:var Le=as;if(me?d5(me):Le.stateNode.complete){Vs=0,Hi=null;var ft=Le.sibling;if(ft!==null)as=ft;else{var Dt=Le.return;Dt!==null?(as=Dt,P0(Dt)):as=null}break t}}Vs=0,Hi=null,yh(f,x,W,5);break;case 6:Vs=0,Hi=null,yh(f,x,W,6);break;case 8:n1(),Ba=6;break e;default:throw Error(t(462))}}jL();break}catch(nr){b_(f,nr)}while(!0);return Bl=gd=null,D.H=T,D.A=F,Es=S,as!==null?0:(ca=null,ls=0,fd(),Ba)}function jL(){for(;as!==null&&!ge();)S_(as)}function S_(f){var x=Pr(f.alternate,f,Ed);f.memoizedProps=f.pendingProps,x===null?P0(f):as=x}function N_(f){var x=f,S=x.alternate;switch(x.tag){case 15:case 0:x=_(S,x,x.pendingProps,x.type,void 0,ls);break;case 11:x=_(S,x,x.pendingProps,x.type.render,x.ref,ls);break;case 5:og(x);default:jo(S,x),x=as=Zx(x,Ed),x=Pr(S,x,Ed)}f.memoizedProps=f.pendingProps,x===null?P0(f):as=x}function yh(f,x,S,T){Bl=gd=null,og(x),xd=null,Ef=0;var F=x.return;try{if(js(f,F,x,S,ls)){Ba=1,qf(f,Po(S,f.current)),as=null;return}}catch(W){if(F!==null)throw as=F,W;Ba=1,qf(f,Po(S,f.current)),as=null;return}x.flags&32768?(ss||T===1?f=!0:ph||(ls&536870912)!==0?f=!1:(Tu=f=!0,(T===2||T===9||T===3||T===6)&&(T=qo.current,T!==null&&T.tag===13&&(T.flags|=16384))),k_(x,f)):P0(x)}function P0(f){var x=f;do{if((x.flags&32768)!==0){k_(x,Tu);return}f=x.return;var S=pa(x.alternate,x,Ed);if(S!==null){as=S;return}if(x=x.sibling,x!==null){as=x;return}as=x=f}while(x!==null);Ba===0&&(Ba=5)}function k_(f,x){do{var S=Go(f.alternate,f);if(S!==null){S.flags&=32767,as=S;return}if(S=f.return,S!==null&&(S.flags|=32768,S.subtreeFlags=0,S.deletions=null),!x&&(f=f.sibling,f!==null)){as=f;return}as=f=S}while(f!==null);Ba=6,as=null}function __(f,x,S,T,F,W,me,Le,ft){f.cancelPendingCommit=null;do A0();while(fo!==0);if((Es&6)!==0)throw Error(t(327));if(x!==null){if(x===f.current)throw Error(t(177));if(W=x.lanes|x.childLanes,W|=Up,Lr(f,S,W,me,Le,ft),f===ca&&(as=ca=null,ls=0),mh=x,Au=f,Td=S,e1=W,t1=F,g_=T,(x.subtreeFlags&10256)!==0||(x.flags&10256)!==0?(f.callbackNode=null,f.callbackPriority=0,kL(Qe,function(){return A_(),null})):(f.callbackNode=null,f.callbackPriority=0),T=(x.flags&13878)!==0,(x.subtreeFlags&13878)!==0||T){T=D.T,D.T=null,F=X.p,X.p=2,me=Es,Es|=4;try{Tg(f,x,S)}finally{Es=me,X.p=F,D.T=T}}fo=1,E_(),T_(),O_()}}function E_(){if(fo===1){fo=0;var f=Au,x=mh,S=(x.flags&13878)!==0;if((x.subtreeFlags&13878)!==0||S){S=D.T,D.T=null;var T=X.p;X.p=2;var F=Es;Es|=4;try{l_(x,f);var W=g1,me=zm(f.containerInfo),Le=W.focusedElem,ft=W.selectionRange;if(me!==Le&&Le&&Le.ownerDocument&&fi(Le.ownerDocument.documentElement,Le)){if(ft!==null&&xf(Le)){var Dt=ft.start,nr=ft.end;if(nr===void 0&&(nr=Dt),"selectionStart"in Le)Le.selectionStart=Dt,Le.selectionEnd=Math.min(nr,Le.value.length);else{var pr=Le.ownerDocument||document,Ut=pr&&pr.defaultView||window;if(Ut.getSelection){var Gt=Ut.getSelection(),sn=Le.textContent.length,Nn=Math.min(ft.start,sn),ra=ft.end===void 0?Nn:Math.min(ft.end,sn);!Gt.extend&&Nn>ra&&(me=ra,ra=Nn,Nn=me);var Tt=yf(Le,Nn),vt=yf(Le,ra);if(Tt&&vt&&(Gt.rangeCount!==1||Gt.anchorNode!==Tt.node||Gt.anchorOffset!==Tt.offset||Gt.focusNode!==vt.node||Gt.focusOffset!==vt.offset)){var It=pr.createRange();It.setStart(Tt.node,Tt.offset),Gt.removeAllRanges(),Nn>ra?(Gt.addRange(It),Gt.extend(vt.node,vt.offset)):(It.setEnd(vt.node,vt.offset),Gt.addRange(It))}}}}for(pr=[],Gt=Le;Gt=Gt.parentNode;)Gt.nodeType===1&&pr.push({element:Gt,left:Gt.scrollLeft,top:Gt.scrollTop});for(typeof Le.focus=="function"&&Le.focus(),Le=0;Le<pr.length;Le++){var lr=pr[Le];lr.element.scrollLeft=lr.left,lr.element.scrollTop=lr.top}}H0=!!m1,g1=m1=null}finally{Es=F,X.p=T,D.T=S}}f.current=x,fo=2}}function T_(){if(fo===2){fo=0;var f=Au,x=mh,S=(x.flags&8772)!==0;if((x.subtreeFlags&8772)!==0||S){S=D.T,D.T=null;var T=X.p;X.p=2;var F=Es;Es|=4;try{n_(f,x.alternate,x)}finally{Es=F,X.p=T,D.T=S}}fo=3}}function O_(){if(fo===4||fo===3){fo=0,Ce();var f=Au,x=mh,S=Td,T=g_;(x.subtreeFlags&10256)!==0||(x.flags&10256)!==0?fo=5:(fo=0,mh=Au=null,P_(f,f.pendingLanes));var F=f.pendingLanes;if(F===0&&(Pu=null),wr(S),x=x.stateNode,ct&&typeof ct.onCommitFiberRoot=="function")try{ct.onCommitFiberRoot(De,x,void 0,(x.current.flags&128)===128)}catch{}if(T!==null){x=D.T,F=X.p,X.p=2,D.T=null;try{for(var W=f.onRecoverableError,me=0;me<T.length;me++){var Le=T[me];W(Le.value,{componentStack:Le.stack})}}finally{D.T=x,X.p=F}}(Td&3)!==0&&A0(),Rc(f),F=f.pendingLanes,(S&261930)!==0&&(F&42)!==0?f===r1?Ig++:(Ig=0,r1=f):Ig=0,Rg(0)}}function P_(f,x){(f.pooledCacheLanes&=x)===0&&(x=f.pooledCache,x!=null&&(f.pooledCache=null,Nf(x)))}function A0(){return E_(),T_(),O_(),A_()}function A_(){if(fo!==5)return!1;var f=Au,x=e1;e1=0;var S=wr(Td),T=D.T,F=X.p;try{X.p=32>S?32:S,D.T=null,S=t1,t1=null;var W=Au,me=Td;if(fo=0,mh=Au=null,Td=0,(Es&6)!==0)throw Error(t(331));var Le=Es;if(Es|=4,p_(W.current),d_(W,W.current,me,S),Es=Le,Rg(0,!1),ct&&typeof ct.onPostCommitFiberRoot=="function")try{ct.onPostCommitFiberRoot(De,W)}catch{}return!0}finally{X.p=F,D.T=T,P_(f,x)}}function M_(f,x,S){x=Po(S,x),x=_g(f.stateNode,x,2),f=ll(f,x,2),f!==null&&(tr(f,2),Rc(f))}function Hs(f,x,S){if(f.tag===3)M_(f,f,S);else for(;x!==null;){if(x.tag===3){M_(x,f,S);break}else if(x.tag===1){var T=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof T.componentDidCatch=="function"&&(Pu===null||!Pu.has(T))){f=Po(S,f),S=ih(2),T=ll(x,S,2),T!==null&&(Eg(S,T,x,f),tr(T,2),Rc(T));break}}x=x.return}}function a1(f,x,S){var T=f.pingCache;if(T===null){T=f.pingCache=new xL;var F=new Set;T.set(x,F)}else F=T.get(x),F===void 0&&(F=new Set,T.set(x,F));F.has(S)||(Xj=!0,F.add(S),f=CL.bind(null,f,x,S),x.then(f,f))}function CL(f,x,S){var T=f.pingCache;T!==null&&T.delete(x),f.pingedLanes|=f.suspendedLanes&S,f.warmLanes&=~S,ca===f&&(ls&S)===S&&(Ba===4||Ba===3&&(ls&62914560)===ls&&300>he()-k0?(Es&2)===0&&gh(f,0):Qj|=S,hh===ls&&(hh=0)),Rc(f)}function I_(f,x){x===0&&(x=wt()),f=bc(f,x),f!==null&&(tr(f,x),Rc(f))}function SL(f){var x=f.memoizedState,S=0;x!==null&&(S=x.retryLane),I_(f,S)}function NL(f,x){var S=0;switch(f.tag){case 31:case 13:var T=f.stateNode,F=f.memoizedState;F!==null&&(S=F.retryLane);break;case 19:T=f.stateNode;break;case 22:T=f.stateNode._retryCache;break;default:throw Error(t(314))}T!==null&&T.delete(x),I_(f,S)}function kL(f,x){return re(f,x)}var M0=null,xh=null,o1=!1,I0=!1,i1=!1,Iu=0;function Rc(f){f!==xh&&f.next===null&&(xh===null?M0=xh=f:xh=xh.next=f),I0=!0,o1||(o1=!0,EL())}function Rg(f,x){if(!i1&&I0){i1=!0;do for(var S=!1,T=M0;T!==null;){if(f!==0){var F=T.pendingLanes;if(F===0)var W=0;else{var me=T.suspendedLanes,Le=T.pingedLanes;W=(1<<31-dt(42|f)+1)-1,W&=F&~(me&~Le),W=W&201326741?W&201326741|1:W?W|2:0}W!==0&&(S=!0,F_(T,W))}else W=ls,W=be(T,T===ca?W:0,T.cancelPendingCommit!==null||T.timeoutHandle!==-1),(W&3)===0||Be(T,W)||(S=!0,F_(T,W));T=T.next}while(S);i1=!1}}function _L(){R_()}function R_(){I0=o1=!1;var f=0;Iu!==0&&FL()&&(f=Iu);for(var x=he(),S=null,T=M0;T!==null;){var F=T.next,W=D_(T,x);W===0?(T.next=null,S===null?M0=F:S.next=F,F===null&&(xh=S)):(S=T,(f!==0||(W&3)!==0)&&(I0=!0)),T=F}fo!==0&&fo!==5||Rg(f),Iu!==0&&(Iu=0)}function D_(f,x){for(var S=f.suspendedLanes,T=f.pingedLanes,F=f.expirationTimes,W=f.pendingLanes&-62914561;0<W;){var me=31-dt(W),Le=1<<me,ft=F[me];ft===-1?((Le&S)===0||(Le&T)!==0)&&(F[me]=et(Le,x)):ft<=x&&(f.expiredLanes|=Le),W&=~Le}if(x=ca,S=ls,S=be(f,f===x?S:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),T=f.callbackNode,S===0||f===x&&(Vs===2||Vs===9)||f.cancelPendingCommit!==null)return T!==null&&T!==null&&pe(T),f.callbackNode=null,f.callbackPriority=0;if((S&3)===0||Be(f,S)){if(x=S&-S,x===f.callbackPriority)return x;switch(T!==null&&pe(T),wr(S)){case 2:case 8:S=We;break;case 32:S=Qe;break;case 268435456:S=Ee;break;default:S=Qe}return T=L_.bind(null,f),S=re(S,T),f.callbackPriority=x,f.callbackNode=S,x}return T!==null&&T!==null&&pe(T),f.callbackPriority=2,f.callbackNode=null,2}function L_(f,x){if(fo!==0&&fo!==5)return f.callbackNode=null,f.callbackPriority=0,null;var S=f.callbackNode;if(A0()&&f.callbackNode!==S)return null;var T=ls;return T=be(f,f===ca?T:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),T===0?null:(x_(f,T,x),D_(f,he()),f.callbackNode!=null&&f.callbackNode===S?L_.bind(null,f):null)}function F_(f,x){if(A0())return null;x_(f,x,!0)}function EL(){zL(function(){(Es&6)!==0?re(Fe,_L):R_()})}function l1(){if(Iu===0){var f=Qn;f===0&&(f=xt,xt<<=1,(xt&261888)===0&&(xt=256)),Iu=f}return Iu}function B_(f){return f==null||typeof f=="symbol"||typeof f=="boolean"?null:typeof f=="function"?f:$n(""+f)}function z_(f,x){var S=x.ownerDocument.createElement("input");return S.name=x.name,S.value=x.value,f.id&&S.setAttribute("form",f.id),x.parentNode.insertBefore(S,x),f=new FormData(f),S.parentNode.removeChild(S),f}function TL(f,x,S,T,F){if(x==="submit"&&S&&S.stateNode===F){var W=B_((F[jr]||null).action),me=T.submitter;me&&(x=(x=me[jr]||null)?B_(x.formAction):me.getAttribute("formAction"),x!==null&&(W=x,me=null));var Le=new Mt("action","action",null,T,F);f.push({event:Le,listeners:[{instance:null,listener:function(){if(T.defaultPrevented){if(Iu!==0){var ft=me?z_(F,me):new FormData(F);xg(S,{pending:!0,data:ft,method:F.method,action:W},null,ft)}}else typeof W=="function"&&(Le.preventDefault(),ft=me?z_(F,me):new FormData(F),xg(S,{pending:!0,data:ft,method:F.method,action:W},W,ft))},currentTarget:F}]})}}for(var c1=0;c1<cu.length;c1++){var d1=cu[c1],OL=d1.toLowerCase(),PL=d1[0].toUpperCase()+d1.slice(1);Fi(OL,"on"+PL)}Fi(zp,"onAnimationEnd"),Fi(Vm,"onAnimationIteration"),Fi($p,"onAnimationStart"),Fi("dblclick","onDoubleClick"),Fi("focusin","onFocus"),Fi("focusout","onBlur"),Fi(cd,"onTransitionRun"),Fi(dd,"onTransitionStart"),Fi(Oo,"onTransitionCancel"),Fi(Il,"onTransitionEnd"),je("onMouseEnter",["mouseout","mouseover"]),je("onMouseLeave",["mouseout","mouseover"]),je("onPointerEnter",["pointerout","pointerover"]),je("onPointerLeave",["pointerout","pointerover"]),Ve("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ve("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ve("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ve("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ve("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ve("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AL=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dg));function $_(f,x){x=(x&4)!==0;for(var S=0;S<f.length;S++){var T=f[S],F=T.event;T=T.listeners;e:{var W=void 0;if(x)for(var me=T.length-1;0<=me;me--){var Le=T[me],ft=Le.instance,Dt=Le.currentTarget;if(Le=Le.listener,ft!==W&&F.isPropagationStopped())break e;W=Le,F.currentTarget=Dt;try{W(F)}catch(nr){vf(nr)}F.currentTarget=null,W=ft}else for(me=0;me<T.length;me++){if(Le=T[me],ft=Le.instance,Dt=Le.currentTarget,Le=Le.listener,ft!==W&&F.isPropagationStopped())break e;W=Le,F.currentTarget=Dt;try{W(F)}catch(nr){vf(nr)}F.currentTarget=null,W=ft}}}}function os(f,x){var S=x[yr];S===void 0&&(S=x[yr]=new Set);var T=f+"__bubble";S.has(T)||(U_(x,f,2,!1),S.add(T))}function u1(f,x,S){var T=0;x&&(T|=4),U_(S,f,T,x)}var R0="_reactListening"+Math.random().toString(36).slice(2);function f1(f){if(!f[R0]){f[R0]=!0,Ct.forEach(function(S){S!=="selectionchange"&&(AL.has(S)||u1(S,!1,f),u1(S,!0,f))});var x=f.nodeType===9?f:f.ownerDocument;x===null||x[R0]||(x[R0]=!0,u1("selectionchange",!1,x))}}function U_(f,x,S,T){switch(y5(x)){case 2:var F=o9;break;case 8:F=i9;break;default:F=_1}S=F.bind(null,x,S,f),F=void 0,!vs||x!=="touchstart"&&x!=="touchmove"&&x!=="wheel"||(F=!0),T?F!==void 0?f.addEventListener(x,S,{capture:!0,passive:F}):f.addEventListener(x,S,!0):F!==void 0?f.addEventListener(x,S,{passive:F}):f.addEventListener(x,S,!1)}function p1(f,x,S,T,F){var W=T;if((x&1)===0&&(x&2)===0&&T!==null)e:for(;;){if(T===null)return;var me=T.tag;if(me===3||me===4){var Le=T.stateNode.containerInfo;if(Le===F)break;if(me===4)for(me=T.return;me!==null;){var ft=me.tag;if((ft===3||ft===4)&&me.stateNode.containerInfo===F)return;me=me.return}for(;Le!==null;){if(me=ne(Le),me===null)return;if(ft=me.tag,ft===5||ft===6||ft===26||ft===27){T=W=me;continue e}Le=Le.parentNode}}T=T.return}_s(function(){var Dt=W,nr=so(S),pr=[];e:{var Ut=Rl.get(f);if(Ut!==void 0){var Gt=Mt,sn=f;switch(f){case"keypress":if(on(S)===0)break e;case"keydown":case"keyup":Gt=Bs;break;case"focusin":sn="focus",Gt=Gr;break;case"focusout":sn="blur",Gt=Gr;break;case"beforeblur":case"afterblur":Gt=Gr;break;case"click":if(S.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Gt=fr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Gt=Er;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Gt=Li;break;case zp:case Vm:case $p:Gt=Xr;break;case Il:Gt=Ho;break;case"scroll":case"scrollend":Gt=or;break;case"wheel":Gt=Al;break;case"copy":case"cut":case"paste":Gt=Yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Gt=Vo;break;case"toggle":case"beforetoggle":Gt=yc}var Nn=(x&4)!==0,ra=!Nn&&(f==="scroll"||f==="scrollend"),Tt=Nn?Ut!==null?Ut+"Capture":null:Ut;Nn=[];for(var vt=Dt,It;vt!==null;){var lr=vt;if(It=lr.stateNode,lr=lr.tag,lr!==5&&lr!==26&&lr!==27||It===null||Tt===null||(lr=Ta(vt,Tt),lr!=null&&Nn.push(Lg(vt,lr,It))),ra)break;vt=vt.return}0<Nn.length&&(Ut=new Gt(Ut,sn,null,S,nr),pr.push({event:Ut,listeners:Nn}))}}if((x&7)===0){e:{if(Ut=f==="mouseover"||f==="pointerover",Gt=f==="mouseout"||f==="pointerout",Ut&&S!==Wn&&(sn=S.relatedTarget||S.fromElement)&&(ne(sn)||sn[mt]))break e;if((Gt||Ut)&&(Ut=nr.window===nr?nr:(Ut=nr.ownerDocument)?Ut.defaultView||Ut.parentWindow:window,Gt?(sn=S.relatedTarget||S.toElement,Gt=Dt,sn=sn?ne(sn):null,sn!==null&&(ra=o(sn),Nn=sn.tag,sn!==ra||Nn!==5&&Nn!==27&&Nn!==6)&&(sn=null)):(Gt=null,sn=Dt),Gt!==sn)){if(Nn=fr,lr="onMouseLeave",Tt="onMouseEnter",vt="mouse",(f==="pointerout"||f==="pointerover")&&(Nn=Vo,lr="onPointerLeave",Tt="onPointerEnter",vt="pointer"),ra=Gt==null?Ut:Re(Gt),It=sn==null?Ut:Re(sn),Ut=new Nn(lr,vt+"leave",Gt,S,nr),Ut.target=ra,Ut.relatedTarget=It,lr=null,ne(nr)===Dt&&(Nn=new Nn(Tt,vt+"enter",sn,S,nr),Nn.target=It,Nn.relatedTarget=ra,lr=Nn),ra=lr,Gt&&sn)t:{for(Nn=ML,Tt=Gt,vt=sn,It=0,lr=Tt;lr;lr=Nn(lr))It++;lr=0;for(var hn=vt;hn;hn=Nn(hn))lr++;for(;0<It-lr;)Tt=Nn(Tt),It--;for(;0<lr-It;)vt=Nn(vt),lr--;for(;It--;){if(Tt===vt||vt!==null&&Tt===vt.alternate){Nn=Tt;break t}Tt=Nn(Tt),vt=Nn(vt)}Nn=null}else Nn=null;Gt!==null&&V_(pr,Ut,Gt,Nn,!1),sn!==null&&ra!==null&&V_(pr,ra,sn,Nn,!0)}}e:{if(Ut=Dt?Re(Dt):window,Gt=Ut.nodeName&&Ut.nodeName.toLowerCase(),Gt==="select"||Gt==="input"&&Ut.type==="file")var Cs=Jt;else if(ye(Ut))if(Nr)Cs=Gx;else{Cs=qx;var un=mf}else Gt=Ut.nodeName,!Gt||Gt.toLowerCase()!=="input"||Ut.type!=="checkbox"&&Ut.type!=="radio"?Dt&&Mr(Dt.elementType)&&(Cs=Jt):Cs=gf;if(Cs&&(Cs=Cs(f,Dt))){Me(pr,Cs,S,nr);break e}un&&un(f,Ut,Dt),f==="focusout"&&Dt&&Ut.type==="number"&&Dt.memoizedProps.value!=null&&sa(Ut,"number",Ut.value)}switch(un=Dt?Re(Dt):window,f){case"focusin":(ye(un)||un.contentEditable==="true")&&(ad=un,Bp=Dt,od=null);break;case"focusout":od=Bp=ad=null;break;case"mousedown":Um=!0;break;case"contextmenu":case"mouseup":case"dragend":Um=!1,Yx(pr,S,nr);break;case"selectionchange":if($m)break;case"keydown":case"keyup":Yx(pr,S,nr)}var Hn;if(Ht)e:{switch(f){case"compositionstart":var cs="onCompositionStart";break e;case"compositionend":cs="onCompositionEnd";break e;case"compositionupdate":cs="onCompositionUpdate";break e}cs=void 0}else $s?zs(f,S)&&(cs="onCompositionEnd"):f==="keydown"&&S.keyCode===229&&(cs="onCompositionStart");cs&&(xr&&S.locale!=="ko"&&($s||cs!=="onCompositionStart"?cs==="onCompositionEnd"&&$s&&(Hn=qr()):(Rs=nr,aa="value"in Rs?Rs.value:Rs.textContent,$s=!0)),un=D0(Dt,cs),0<un.length&&(cs=new da(cs,f,null,S,nr),pr.push({event:cs,listeners:un}),Hn?cs.data=Hn:(Hn=ns(S),Hn!==null&&(cs.data=Hn)))),(Hn=er?Jo(f,S):Xa(f,S))&&(cs=D0(Dt,"onBeforeInput"),0<cs.length&&(un=new da("onBeforeInput","beforeinput",null,S,nr),pr.push({event:un,listeners:cs}),un.data=Hn)),TL(pr,f,Dt,S,nr)}$_(pr,x)})}function Lg(f,x,S){return{instance:f,listener:x,currentTarget:S}}function D0(f,x){for(var S=x+"Capture",T=[];f!==null;){var F=f,W=F.stateNode;if(F=F.tag,F!==5&&F!==26&&F!==27||W===null||(F=Ta(f,S),F!=null&&T.unshift(Lg(f,F,W)),F=Ta(f,x),F!=null&&T.push(Lg(f,F,W))),f.tag===3)return T;f=f.return}return[]}function ML(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5&&f.tag!==27);return f||null}function V_(f,x,S,T,F){for(var W=x._reactName,me=[];S!==null&&S!==T;){var Le=S,ft=Le.alternate,Dt=Le.stateNode;if(Le=Le.tag,ft!==null&&ft===T)break;Le!==5&&Le!==26&&Le!==27||Dt===null||(ft=Dt,F?(Dt=Ta(S,W),Dt!=null&&me.unshift(Lg(S,Dt,ft))):F||(Dt=Ta(S,W),Dt!=null&&me.push(Lg(S,Dt,ft)))),S=S.return}me.length!==0&&f.push({event:x,listeners:me})}var IL=/\r\n?/g,RL=/\u0000|\uFFFD/g;function H_(f){return(typeof f=="string"?f:""+f).replace(IL,`
`).replace(RL,"")}function W_(f,x){return x=H_(x),H_(f)===x}function ta(f,x,S,T,F,W){switch(S){case"children":typeof T=="string"?x==="body"||x==="textarea"&&T===""||_r(f,T):(typeof T=="number"||typeof T=="bigint")&&x!=="body"&&_r(f,""+T);break;case"className":ut(f,"class",T);break;case"tabIndex":ut(f,"tabindex",T);break;case"dir":case"role":case"viewBox":case"width":case"height":ut(f,S,T);break;case"style":Or(f,T,W);break;case"data":if(x!=="object"){ut(f,"data",T);break}case"src":case"href":if(T===""&&(x!=="a"||S!=="href")){f.removeAttribute(S);break}if(T==null||typeof T=="function"||typeof T=="symbol"||typeof T=="boolean"){f.removeAttribute(S);break}T=$n(""+T),f.setAttribute(S,T);break;case"action":case"formAction":if(typeof T=="function"){f.setAttribute(S,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof W=="function"&&(S==="formAction"?(x!=="input"&&ta(f,x,"name",F.name,F,null),ta(f,x,"formEncType",F.formEncType,F,null),ta(f,x,"formMethod",F.formMethod,F,null),ta(f,x,"formTarget",F.formTarget,F,null)):(ta(f,x,"encType",F.encType,F,null),ta(f,x,"method",F.method,F,null),ta(f,x,"target",F.target,F,null)));if(T==null||typeof T=="symbol"||typeof T=="boolean"){f.removeAttribute(S);break}T=$n(""+T),f.setAttribute(S,T);break;case"onClick":T!=null&&(f.onclick=Fn);break;case"onScroll":T!=null&&os("scroll",f);break;case"onScrollEnd":T!=null&&os("scrollend",f);break;case"dangerouslySetInnerHTML":if(T!=null){if(typeof T!="object"||!("__html"in T))throw Error(t(61));if(S=T.__html,S!=null){if(F.children!=null)throw Error(t(60));f.innerHTML=S}}break;case"multiple":f.multiple=T&&typeof T!="function"&&typeof T!="symbol";break;case"muted":f.muted=T&&typeof T!="function"&&typeof T!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(T==null||typeof T=="function"||typeof T=="boolean"||typeof T=="symbol"){f.removeAttribute("xlink:href");break}S=$n(""+T),f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",S);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":T!=null&&typeof T!="function"&&typeof T!="symbol"?f.setAttribute(S,""+T):f.removeAttribute(S);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":T&&typeof T!="function"&&typeof T!="symbol"?f.setAttribute(S,""):f.removeAttribute(S);break;case"capture":case"download":T===!0?f.setAttribute(S,""):T!==!1&&T!=null&&typeof T!="function"&&typeof T!="symbol"?f.setAttribute(S,T):f.removeAttribute(S);break;case"cols":case"rows":case"size":case"span":T!=null&&typeof T!="function"&&typeof T!="symbol"&&!isNaN(T)&&1<=T?f.setAttribute(S,T):f.removeAttribute(S);break;case"rowSpan":case"start":T==null||typeof T=="function"||typeof T=="symbol"||isNaN(T)?f.removeAttribute(S):f.setAttribute(S,T);break;case"popover":os("beforetoggle",f),os("toggle",f),Te(f,"popover",T);break;case"xlinkActuate":jt(f,"http://www.w3.org/1999/xlink","xlink:actuate",T);break;case"xlinkArcrole":jt(f,"http://www.w3.org/1999/xlink","xlink:arcrole",T);break;case"xlinkRole":jt(f,"http://www.w3.org/1999/xlink","xlink:role",T);break;case"xlinkShow":jt(f,"http://www.w3.org/1999/xlink","xlink:show",T);break;case"xlinkTitle":jt(f,"http://www.w3.org/1999/xlink","xlink:title",T);break;case"xlinkType":jt(f,"http://www.w3.org/1999/xlink","xlink:type",T);break;case"xmlBase":jt(f,"http://www.w3.org/XML/1998/namespace","xml:base",T);break;case"xmlLang":jt(f,"http://www.w3.org/XML/1998/namespace","xml:lang",T);break;case"xmlSpace":jt(f,"http://www.w3.org/XML/1998/namespace","xml:space",T);break;case"is":Te(f,"is",T);break;case"innerText":case"textContent":break;default:(!(2<S.length)||S[0]!=="o"&&S[0]!=="O"||S[1]!=="n"&&S[1]!=="N")&&(S=Sn.get(S)||S,Te(f,S,T))}}function h1(f,x,S,T,F,W){switch(S){case"style":Or(f,T,W);break;case"dangerouslySetInnerHTML":if(T!=null){if(typeof T!="object"||!("__html"in T))throw Error(t(61));if(S=T.__html,S!=null){if(F.children!=null)throw Error(t(60));f.innerHTML=S}}break;case"children":typeof T=="string"?_r(f,T):(typeof T=="number"||typeof T=="bigint")&&_r(f,""+T);break;case"onScroll":T!=null&&os("scroll",f);break;case"onScrollEnd":T!=null&&os("scrollend",f);break;case"onClick":T!=null&&(f.onclick=Fn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xe.hasOwnProperty(S))e:{if(S[0]==="o"&&S[1]==="n"&&(F=S.endsWith("Capture"),x=S.slice(2,F?S.length-7:void 0),W=f[jr]||null,W=W!=null?W[S]:null,typeof W=="function"&&f.removeEventListener(x,W,F),typeof T=="function")){typeof W!="function"&&W!==null&&(S in f?f[S]=null:f.hasAttribute(S)&&f.removeAttribute(S)),f.addEventListener(x,T,F);break e}S in f?f[S]=T:T===!0?f.setAttribute(S,""):Te(f,S,T)}}}function Ro(f,x,S){switch(x){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":os("error",f),os("load",f);var T=!1,F=!1,W;for(W in S)if(S.hasOwnProperty(W)){var me=S[W];if(me!=null)switch(W){case"src":T=!0;break;case"srcSet":F=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(t(137,x));default:ta(f,x,W,me,S,null)}}F&&ta(f,x,"srcSet",S.srcSet,S,null),T&&ta(f,x,"src",S.src,S,null);return;case"input":os("invalid",f);var Le=W=me=F=null,ft=null,Dt=null;for(T in S)if(S.hasOwnProperty(T)){var nr=S[T];if(nr!=null)switch(T){case"name":F=nr;break;case"type":me=nr;break;case"checked":ft=nr;break;case"defaultChecked":Dt=nr;break;case"value":W=nr;break;case"defaultValue":Le=nr;break;case"children":case"dangerouslySetInnerHTML":if(nr!=null)throw Error(t(137,x));break;default:ta(f,x,T,nr,S,null)}}Ea(f,W,Le,ft,Dt,me,F,!1);return;case"select":os("invalid",f),T=me=W=null;for(F in S)if(S.hasOwnProperty(F)&&(Le=S[F],Le!=null))switch(F){case"value":W=Le;break;case"defaultValue":me=Le;break;case"multiple":T=Le;default:ta(f,x,F,Le,S,null)}x=W,S=me,f.multiple=!!T,x!=null?Is(f,!!T,x,!1):S!=null&&Is(f,!!T,S,!0);return;case"textarea":os("invalid",f),W=F=T=null;for(me in S)if(S.hasOwnProperty(me)&&(Le=S[me],Le!=null))switch(me){case"value":T=Le;break;case"defaultValue":F=Le;break;case"children":W=Le;break;case"dangerouslySetInnerHTML":if(Le!=null)throw Error(t(91));break;default:ta(f,x,me,Le,S,null)}Ir(f,T,F,W);return;case"option":for(ft in S)S.hasOwnProperty(ft)&&(T=S[ft],T!=null)&&(ft==="selected"?f.selected=T&&typeof T!="function"&&typeof T!="symbol":ta(f,x,ft,T,S,null));return;case"dialog":os("beforetoggle",f),os("toggle",f),os("cancel",f),os("close",f);break;case"iframe":case"object":os("load",f);break;case"video":case"audio":for(T=0;T<Dg.length;T++)os(Dg[T],f);break;case"image":os("error",f),os("load",f);break;case"details":os("toggle",f);break;case"embed":case"source":case"link":os("error",f),os("load",f);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Dt in S)if(S.hasOwnProperty(Dt)&&(T=S[Dt],T!=null))switch(Dt){case"children":case"dangerouslySetInnerHTML":throw Error(t(137,x));default:ta(f,x,Dt,T,S,null)}return;default:if(Mr(x)){for(nr in S)S.hasOwnProperty(nr)&&(T=S[nr],T!==void 0&&h1(f,x,nr,T,S,void 0));return}}for(Le in S)S.hasOwnProperty(Le)&&(T=S[Le],T!=null&&ta(f,x,Le,T,S,null))}function DL(f,x,S,T){switch(x){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var F=null,W=null,me=null,Le=null,ft=null,Dt=null,nr=null;for(Gt in S){var pr=S[Gt];if(S.hasOwnProperty(Gt)&&pr!=null)switch(Gt){case"checked":break;case"value":break;case"defaultValue":ft=pr;default:T.hasOwnProperty(Gt)||ta(f,x,Gt,null,T,pr)}}for(var Ut in T){var Gt=T[Ut];if(pr=S[Ut],T.hasOwnProperty(Ut)&&(Gt!=null||pr!=null))switch(Ut){case"type":W=Gt;break;case"name":F=Gt;break;case"checked":Dt=Gt;break;case"defaultChecked":nr=Gt;break;case"value":me=Gt;break;case"defaultValue":Le=Gt;break;case"children":case"dangerouslySetInnerHTML":if(Gt!=null)throw Error(t(137,x));break;default:Gt!==pr&&ta(f,x,Ut,Gt,T,pr)}}ds(f,me,Le,ft,Dt,nr,W,F);return;case"select":Gt=me=Le=Ut=null;for(W in S)if(ft=S[W],S.hasOwnProperty(W)&&ft!=null)switch(W){case"value":break;case"multiple":Gt=ft;default:T.hasOwnProperty(W)||ta(f,x,W,null,T,ft)}for(F in T)if(W=T[F],ft=S[F],T.hasOwnProperty(F)&&(W!=null||ft!=null))switch(F){case"value":Ut=W;break;case"defaultValue":Le=W;break;case"multiple":me=W;default:W!==ft&&ta(f,x,F,W,T,ft)}x=Le,S=me,T=Gt,Ut!=null?Is(f,!!S,Ut,!1):!!T!=!!S&&(x!=null?Is(f,!!S,x,!0):Is(f,!!S,S?[]:"",!1));return;case"textarea":Gt=Ut=null;for(Le in S)if(F=S[Le],S.hasOwnProperty(Le)&&F!=null&&!T.hasOwnProperty(Le))switch(Le){case"value":break;case"children":break;default:ta(f,x,Le,null,T,F)}for(me in T)if(F=T[me],W=S[me],T.hasOwnProperty(me)&&(F!=null||W!=null))switch(me){case"value":Ut=F;break;case"defaultValue":Gt=F;break;case"children":break;case"dangerouslySetInnerHTML":if(F!=null)throw Error(t(91));break;default:F!==W&&ta(f,x,me,F,T,W)}ya(f,Ut,Gt);return;case"option":for(var sn in S)Ut=S[sn],S.hasOwnProperty(sn)&&Ut!=null&&!T.hasOwnProperty(sn)&&(sn==="selected"?f.selected=!1:ta(f,x,sn,null,T,Ut));for(ft in T)Ut=T[ft],Gt=S[ft],T.hasOwnProperty(ft)&&Ut!==Gt&&(Ut!=null||Gt!=null)&&(ft==="selected"?f.selected=Ut&&typeof Ut!="function"&&typeof Ut!="symbol":ta(f,x,ft,Ut,T,Gt));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Nn in S)Ut=S[Nn],S.hasOwnProperty(Nn)&&Ut!=null&&!T.hasOwnProperty(Nn)&&ta(f,x,Nn,null,T,Ut);for(Dt in T)if(Ut=T[Dt],Gt=S[Dt],T.hasOwnProperty(Dt)&&Ut!==Gt&&(Ut!=null||Gt!=null))switch(Dt){case"children":case"dangerouslySetInnerHTML":if(Ut!=null)throw Error(t(137,x));break;default:ta(f,x,Dt,Ut,T,Gt)}return;default:if(Mr(x)){for(var ra in S)Ut=S[ra],S.hasOwnProperty(ra)&&Ut!==void 0&&!T.hasOwnProperty(ra)&&h1(f,x,ra,void 0,T,Ut);for(nr in T)Ut=T[nr],Gt=S[nr],!T.hasOwnProperty(nr)||Ut===Gt||Ut===void 0&&Gt===void 0||h1(f,x,nr,Ut,T,Gt);return}}for(var Tt in S)Ut=S[Tt],S.hasOwnProperty(Tt)&&Ut!=null&&!T.hasOwnProperty(Tt)&&ta(f,x,Tt,null,T,Ut);for(pr in T)Ut=T[pr],Gt=S[pr],!T.hasOwnProperty(pr)||Ut===Gt||Ut==null&&Gt==null||ta(f,x,pr,Ut,T,Gt)}function q_(f){switch(f){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function LL(){if(typeof performance.getEntriesByType=="function"){for(var f=0,x=0,S=performance.getEntriesByType("resource"),T=0;T<S.length;T++){var F=S[T],W=F.transferSize,me=F.initiatorType,Le=F.duration;if(W&&Le&&q_(me)){for(me=0,Le=F.responseEnd,T+=1;T<S.length;T++){var ft=S[T],Dt=ft.startTime;if(Dt>Le)break;var nr=ft.transferSize,pr=ft.initiatorType;nr&&q_(pr)&&(ft=ft.responseEnd,me+=nr*(ft<Le?1:(Le-Dt)/(ft-Dt)))}if(--T,x+=8*(W+me)/(F.duration/1e3),f++,10<f)break}}if(0<f)return x/f/1e6}return navigator.connection&&(f=navigator.connection.downlink,typeof f=="number")?f:5}var m1=null,g1=null;function L0(f){return f.nodeType===9?f:f.ownerDocument}function G_(f){switch(f){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function K_(f,x){if(f===0)switch(x){case"svg":return 1;case"math":return 2;default:return 0}return f===1&&x==="foreignObject"?0:f}function y1(f,x){return f==="textarea"||f==="noscript"||typeof x.children=="string"||typeof x.children=="number"||typeof x.children=="bigint"||typeof x.dangerouslySetInnerHTML=="object"&&x.dangerouslySetInnerHTML!==null&&x.dangerouslySetInnerHTML.__html!=null}var x1=null;function FL(){var f=window.event;return f&&f.type==="popstate"?f===x1?!1:(x1=f,!0):(x1=null,!1)}var Y_=typeof setTimeout=="function"?setTimeout:void 0,BL=typeof clearTimeout=="function"?clearTimeout:void 0,Z_=typeof Promise=="function"?Promise:void 0,zL=typeof queueMicrotask=="function"?queueMicrotask:typeof Z_<"u"?function(f){return Z_.resolve(null).then(f).catch($L)}:Y_;function $L(f){setTimeout(function(){throw f})}function Ru(f){return f==="head"}function X_(f,x){var S=x,T=0;do{var F=S.nextSibling;if(f.removeChild(S),F&&F.nodeType===8)if(S=F.data,S==="/$"||S==="/&"){if(T===0){f.removeChild(F),jh(x);return}T--}else if(S==="$"||S==="$?"||S==="$~"||S==="$!"||S==="&")T++;else if(S==="html")Fg(f.ownerDocument.documentElement);else if(S==="head"){S=f.ownerDocument.head,Fg(S);for(var W=S.firstChild;W;){var me=W.nextSibling,Le=W.nodeName;W[zr]||Le==="SCRIPT"||Le==="STYLE"||Le==="LINK"&&W.rel.toLowerCase()==="stylesheet"||S.removeChild(W),W=me}}else S==="body"&&Fg(f.ownerDocument.body);S=F}while(S);jh(x)}function Q_(f,x){var S=f;f=0;do{var T=S.nextSibling;if(S.nodeType===1?x?(S._stashedDisplay=S.style.display,S.style.display="none"):(S.style.display=S._stashedDisplay||"",S.getAttribute("style")===""&&S.removeAttribute("style")):S.nodeType===3&&(x?(S._stashedText=S.nodeValue,S.nodeValue=""):S.nodeValue=S._stashedText||""),T&&T.nodeType===8)if(S=T.data,S==="/$"){if(f===0)break;f--}else S!=="$"&&S!=="$?"&&S!=="$~"&&S!=="$!"||f++;S=T}while(S)}function v1(f){var x=f.firstChild;for(x&&x.nodeType===10&&(x=x.nextSibling);x;){var S=x;switch(x=x.nextSibling,S.nodeName){case"HTML":case"HEAD":case"BODY":v1(S),In(S);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(S.rel.toLowerCase()==="stylesheet")continue}f.removeChild(S)}}function UL(f,x,S,T){for(;f.nodeType===1;){var F=S;if(f.nodeName.toLowerCase()!==x.toLowerCase()){if(!T&&(f.nodeName!=="INPUT"||f.type!=="hidden"))break}else if(T){if(!f[zr])switch(x){case"meta":if(!f.hasAttribute("itemprop"))break;return f;case"link":if(W=f.getAttribute("rel"),W==="stylesheet"&&f.hasAttribute("data-precedence"))break;if(W!==F.rel||f.getAttribute("href")!==(F.href==null||F.href===""?null:F.href)||f.getAttribute("crossorigin")!==(F.crossOrigin==null?null:F.crossOrigin)||f.getAttribute("title")!==(F.title==null?null:F.title))break;return f;case"style":if(f.hasAttribute("data-precedence"))break;return f;case"script":if(W=f.getAttribute("src"),(W!==(F.src==null?null:F.src)||f.getAttribute("type")!==(F.type==null?null:F.type)||f.getAttribute("crossorigin")!==(F.crossOrigin==null?null:F.crossOrigin))&&W&&f.hasAttribute("async")&&!f.hasAttribute("itemprop"))break;return f;default:return f}}else if(x==="input"&&f.type==="hidden"){var W=F.name==null?null:""+F.name;if(F.type==="hidden"&&f.getAttribute("name")===W)return f}else return f;if(f=pl(f.nextSibling),f===null)break}return null}function VL(f,x,S){if(x==="")return null;for(;f.nodeType!==3;)if((f.nodeType!==1||f.nodeName!=="INPUT"||f.type!=="hidden")&&!S||(f=pl(f.nextSibling),f===null))return null;return f}function J_(f,x){for(;f.nodeType!==8;)if((f.nodeType!==1||f.nodeName!=="INPUT"||f.type!=="hidden")&&!x||(f=pl(f.nextSibling),f===null))return null;return f}function b1(f){return f.data==="$?"||f.data==="$~"}function w1(f){return f.data==="$!"||f.data==="$?"&&f.ownerDocument.readyState!=="loading"}function HL(f,x){var S=f.ownerDocument;if(f.data==="$~")f._reactRetry=x;else if(f.data!=="$?"||S.readyState!=="loading")x();else{var T=function(){x(),S.removeEventListener("DOMContentLoaded",T)};S.addEventListener("DOMContentLoaded",T),f._reactRetry=T}}function pl(f){for(;f!=null;f=f.nextSibling){var x=f.nodeType;if(x===1||x===3)break;if(x===8){if(x=f.data,x==="$"||x==="$!"||x==="$?"||x==="$~"||x==="&"||x==="F!"||x==="F")break;if(x==="/$"||x==="/&")return null}}return f}var j1=null;function e5(f){f=f.nextSibling;for(var x=0;f;){if(f.nodeType===8){var S=f.data;if(S==="/$"||S==="/&"){if(x===0)return pl(f.nextSibling);x--}else S!=="$"&&S!=="$!"&&S!=="$?"&&S!=="$~"&&S!=="&"||x++}f=f.nextSibling}return null}function t5(f){f=f.previousSibling;for(var x=0;f;){if(f.nodeType===8){var S=f.data;if(S==="$"||S==="$!"||S==="$?"||S==="$~"||S==="&"){if(x===0)return f;x--}else S!=="/$"&&S!=="/&"||x++}f=f.previousSibling}return null}function r5(f,x,S){switch(x=L0(S),f){case"html":if(f=x.documentElement,!f)throw Error(t(452));return f;case"head":if(f=x.head,!f)throw Error(t(453));return f;case"body":if(f=x.body,!f)throw Error(t(454));return f;default:throw Error(t(451))}}function Fg(f){for(var x=f.attributes;x.length;)f.removeAttributeNode(x[0]);In(f)}var hl=new Map,n5=new Set;function F0(f){return typeof f.getRootNode=="function"?f.getRootNode():f.nodeType===9?f:f.ownerDocument}var Od=X.d;X.d={f:WL,r:qL,D:GL,C:KL,L:YL,m:ZL,X:QL,S:XL,M:JL};function WL(){var f=Od.f(),x=T0();return f||x}function qL(f){var x=ke(f);x!==null&&x.tag===5&&x.type==="form"?vg(x):Od.r(f)}var vh=typeof document>"u"?null:document;function s5(f,x,S){var T=vh;if(T&&typeof x=="string"&&x){var F=Xn(x);F='link[rel="'+f+'"][href="'+F+'"]',typeof S=="string"&&(F+='[crossorigin="'+S+'"]'),n5.has(F)||(n5.add(F),f={rel:f,crossOrigin:S,href:x},T.querySelector(F)===null&&(x=T.createElement("link"),Ro(x,"link",f),st(x),T.head.appendChild(x)))}}function GL(f){Od.D(f),s5("dns-prefetch",f,null)}function KL(f,x){Od.C(f,x),s5("preconnect",f,x)}function YL(f,x,S){Od.L(f,x,S);var T=vh;if(T&&f&&x){var F='link[rel="preload"][as="'+Xn(x)+'"]';x==="image"&&S&&S.imageSrcSet?(F+='[imagesrcset="'+Xn(S.imageSrcSet)+'"]',typeof S.imageSizes=="string"&&(F+='[imagesizes="'+Xn(S.imageSizes)+'"]')):F+='[href="'+Xn(f)+'"]';var W=F;switch(x){case"style":W=bh(f);break;case"script":W=wh(f)}hl.has(W)||(f=h({rel:"preload",href:x==="image"&&S&&S.imageSrcSet?void 0:f,as:x},S),hl.set(W,f),T.querySelector(F)!==null||x==="style"&&T.querySelector(Bg(W))||x==="script"&&T.querySelector(zg(W))||(x=T.createElement("link"),Ro(x,"link",f),st(x),T.head.appendChild(x)))}}function ZL(f,x){Od.m(f,x);var S=vh;if(S&&f){var T=x&&typeof x.as=="string"?x.as:"script",F='link[rel="modulepreload"][as="'+Xn(T)+'"][href="'+Xn(f)+'"]',W=F;switch(T){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":W=wh(f)}if(!hl.has(W)&&(f=h({rel:"modulepreload",href:f},x),hl.set(W,f),S.querySelector(F)===null)){switch(T){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(S.querySelector(zg(W)))return}T=S.createElement("link"),Ro(T,"link",f),st(T),S.head.appendChild(T)}}}function XL(f,x,S){Od.S(f,x,S);var T=vh;if(T&&f){var F=Ze(T).hoistableStyles,W=bh(f);x=x||"default";var me=F.get(W);if(!me){var Le={loading:0,preload:null};if(me=T.querySelector(Bg(W)))Le.loading=5;else{f=h({rel:"stylesheet",href:f,"data-precedence":x},S),(S=hl.get(W))&&C1(f,S);var ft=me=T.createElement("link");st(ft),Ro(ft,"link",f),ft._p=new Promise(function(Dt,nr){ft.onload=Dt,ft.onerror=nr}),ft.addEventListener("load",function(){Le.loading|=1}),ft.addEventListener("error",function(){Le.loading|=2}),Le.loading|=4,B0(me,x,T)}me={type:"stylesheet",instance:me,count:1,state:Le},F.set(W,me)}}}function QL(f,x){Od.X(f,x);var S=vh;if(S&&f){var T=Ze(S).hoistableScripts,F=wh(f),W=T.get(F);W||(W=S.querySelector(zg(F)),W||(f=h({src:f,async:!0},x),(x=hl.get(F))&&S1(f,x),W=S.createElement("script"),st(W),Ro(W,"link",f),S.head.appendChild(W)),W={type:"script",instance:W,count:1,state:null},T.set(F,W))}}function JL(f,x){Od.M(f,x);var S=vh;if(S&&f){var T=Ze(S).hoistableScripts,F=wh(f),W=T.get(F);W||(W=S.querySelector(zg(F)),W||(f=h({src:f,async:!0,type:"module"},x),(x=hl.get(F))&&S1(f,x),W=S.createElement("script"),st(W),Ro(W,"link",f),S.head.appendChild(W)),W={type:"script",instance:W,count:1,state:null},T.set(F,W))}}function a5(f,x,S,T){var F=(F=Pe.current)?F0(F):null;if(!F)throw Error(t(446));switch(f){case"meta":case"title":return null;case"style":return typeof S.precedence=="string"&&typeof S.href=="string"?(x=bh(S.href),S=Ze(F).hoistableStyles,T=S.get(x),T||(T={type:"style",instance:null,count:0,state:null},S.set(x,T)),T):{type:"void",instance:null,count:0,state:null};case"link":if(S.rel==="stylesheet"&&typeof S.href=="string"&&typeof S.precedence=="string"){f=bh(S.href);var W=Ze(F).hoistableStyles,me=W.get(f);if(me||(F=F.ownerDocument||F,me={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},W.set(f,me),(W=F.querySelector(Bg(f)))&&!W._p&&(me.instance=W,me.state.loading=5),hl.has(f)||(S={rel:"preload",as:"style",href:S.href,crossOrigin:S.crossOrigin,integrity:S.integrity,media:S.media,hrefLang:S.hrefLang,referrerPolicy:S.referrerPolicy},hl.set(f,S),W||e9(F,f,S,me.state))),x&&T===null)throw Error(t(528,""));return me}if(x&&T!==null)throw Error(t(529,""));return null;case"script":return x=S.async,S=S.src,typeof S=="string"&&x&&typeof x!="function"&&typeof x!="symbol"?(x=wh(S),S=Ze(F).hoistableScripts,T=S.get(x),T||(T={type:"script",instance:null,count:0,state:null},S.set(x,T)),T):{type:"void",instance:null,count:0,state:null};default:throw Error(t(444,f))}}function bh(f){return'href="'+Xn(f)+'"'}function Bg(f){return'link[rel="stylesheet"]['+f+"]"}function o5(f){return h({},f,{"data-precedence":f.precedence,precedence:null})}function e9(f,x,S,T){f.querySelector('link[rel="preload"][as="style"]['+x+"]")?T.loading=1:(x=f.createElement("link"),T.preload=x,x.addEventListener("load",function(){return T.loading|=1}),x.addEventListener("error",function(){return T.loading|=2}),Ro(x,"link",S),st(x),f.head.appendChild(x))}function wh(f){return'[src="'+Xn(f)+'"]'}function zg(f){return"script[async]"+f}function i5(f,x,S){if(x.count++,x.instance===null)switch(x.type){case"style":var T=f.querySelector('style[data-href~="'+Xn(S.href)+'"]');if(T)return x.instance=T,st(T),T;var F=h({},S,{"data-href":S.href,"data-precedence":S.precedence,href:null,precedence:null});return T=(f.ownerDocument||f).createElement("style"),st(T),Ro(T,"style",F),B0(T,S.precedence,f),x.instance=T;case"stylesheet":F=bh(S.href);var W=f.querySelector(Bg(F));if(W)return x.state.loading|=4,x.instance=W,st(W),W;T=o5(S),(F=hl.get(F))&&C1(T,F),W=(f.ownerDocument||f).createElement("link"),st(W);var me=W;return me._p=new Promise(function(Le,ft){me.onload=Le,me.onerror=ft}),Ro(W,"link",T),x.state.loading|=4,B0(W,S.precedence,f),x.instance=W;case"script":return W=wh(S.src),(F=f.querySelector(zg(W)))?(x.instance=F,st(F),F):(T=S,(F=hl.get(W))&&(T=h({},S),S1(T,F)),f=f.ownerDocument||f,F=f.createElement("script"),st(F),Ro(F,"link",T),f.head.appendChild(F),x.instance=F);case"void":return null;default:throw Error(t(443,x.type))}else x.type==="stylesheet"&&(x.state.loading&4)===0&&(T=x.instance,x.state.loading|=4,B0(T,S.precedence,f));return x.instance}function B0(f,x,S){for(var T=S.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),F=T.length?T[T.length-1]:null,W=F,me=0;me<T.length;me++){var Le=T[me];if(Le.dataset.precedence===x)W=Le;else if(W!==F)break}W?W.parentNode.insertBefore(f,W.nextSibling):(x=S.nodeType===9?S.head:S,x.insertBefore(f,x.firstChild))}function C1(f,x){f.crossOrigin==null&&(f.crossOrigin=x.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=x.referrerPolicy),f.title==null&&(f.title=x.title)}function S1(f,x){f.crossOrigin==null&&(f.crossOrigin=x.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=x.referrerPolicy),f.integrity==null&&(f.integrity=x.integrity)}var z0=null;function l5(f,x,S){if(z0===null){var T=new Map,F=z0=new Map;F.set(S,T)}else F=z0,T=F.get(S),T||(T=new Map,F.set(S,T));if(T.has(f))return T;for(T.set(f,null),S=S.getElementsByTagName(f),F=0;F<S.length;F++){var W=S[F];if(!(W[zr]||W[kr]||f==="link"&&W.getAttribute("rel")==="stylesheet")&&W.namespaceURI!=="http://www.w3.org/2000/svg"){var me=W.getAttribute(x)||"";me=f+me;var Le=T.get(me);Le?Le.push(W):T.set(me,[W])}}return T}function c5(f,x,S){f=f.ownerDocument||f,f.head.insertBefore(S,x==="title"?f.querySelector("head > title"):null)}function t9(f,x,S){if(S===1||x.itemProp!=null)return!1;switch(f){case"meta":case"title":return!0;case"style":if(typeof x.precedence!="string"||typeof x.href!="string"||x.href==="")break;return!0;case"link":if(typeof x.rel!="string"||typeof x.href!="string"||x.href===""||x.onLoad||x.onError)break;return x.rel==="stylesheet"?(f=x.disabled,typeof x.precedence=="string"&&f==null):!0;case"script":if(x.async&&typeof x.async!="function"&&typeof x.async!="symbol"&&!x.onLoad&&!x.onError&&x.src&&typeof x.src=="string")return!0}return!1}function d5(f){return!(f.type==="stylesheet"&&(f.state.loading&3)===0)}function r9(f,x,S,T){if(S.type==="stylesheet"&&(typeof T.media!="string"||matchMedia(T.media).matches!==!1)&&(S.state.loading&4)===0){if(S.instance===null){var F=bh(T.href),W=x.querySelector(Bg(F));if(W){x=W._p,x!==null&&typeof x=="object"&&typeof x.then=="function"&&(f.count++,f=$0.bind(f),x.then(f,f)),S.state.loading|=4,S.instance=W,st(W);return}W=x.ownerDocument||x,T=o5(T),(F=hl.get(F))&&C1(T,F),W=W.createElement("link"),st(W);var me=W;me._p=new Promise(function(Le,ft){me.onload=Le,me.onerror=ft}),Ro(W,"link",T),S.instance=W}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(S,x),(x=S.state.preload)&&(S.state.loading&3)===0&&(f.count++,S=$0.bind(f),x.addEventListener("load",S),x.addEventListener("error",S))}}var N1=0;function n9(f,x){return f.stylesheets&&f.count===0&&V0(f,f.stylesheets),0<f.count||0<f.imgCount?function(S){var T=setTimeout(function(){if(f.stylesheets&&V0(f,f.stylesheets),f.unsuspend){var W=f.unsuspend;f.unsuspend=null,W()}},6e4+x);0<f.imgBytes&&N1===0&&(N1=62500*LL());var F=setTimeout(function(){if(f.waitingForImages=!1,f.count===0&&(f.stylesheets&&V0(f,f.stylesheets),f.unsuspend)){var W=f.unsuspend;f.unsuspend=null,W()}},(f.imgBytes>N1?50:800)+x);return f.unsuspend=S,function(){f.unsuspend=null,clearTimeout(T),clearTimeout(F)}}:null}function $0(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)V0(this,this.stylesheets);else if(this.unsuspend){var f=this.unsuspend;this.unsuspend=null,f()}}}var U0=null;function V0(f,x){f.stylesheets=null,f.unsuspend!==null&&(f.count++,U0=new Map,x.forEach(s9,f),U0=null,$0.call(f))}function s9(f,x){if(!(x.state.loading&4)){var S=U0.get(f);if(S)var T=S.get(null);else{S=new Map,U0.set(f,S);for(var F=f.querySelectorAll("link[data-precedence],style[data-precedence]"),W=0;W<F.length;W++){var me=F[W];(me.nodeName==="LINK"||me.getAttribute("media")!=="not all")&&(S.set(me.dataset.precedence,me),T=me)}T&&S.set(null,T)}F=x.instance,me=F.getAttribute("data-precedence"),W=S.get(me)||T,W===T&&S.set(null,F),S.set(me,F),this.count++,T=$0.bind(this),F.addEventListener("load",T),F.addEventListener("error",T),W?W.parentNode.insertBefore(F,W.nextSibling):(f=f.nodeType===9?f.head:f,f.insertBefore(F,f.firstChild)),x.state.loading|=4}}var $g={$$typeof:N,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function a9(f,x,S,T,F,W,me,Le,ft){this.tag=1,this.containerInfo=f,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$t(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$t(0),this.hiddenUpdates=$t(null),this.identifierPrefix=T,this.onUncaughtError=F,this.onCaughtError=W,this.onRecoverableError=me,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ft,this.incompleteTransitions=new Map}function u5(f,x,S,T,F,W,me,Le,ft,Dt,nr,pr){return f=new a9(f,x,S,me,ft,Dt,nr,pr,Le),x=1,W===!0&&(x|=24),W=Wo(3,null,null,x),f.current=W,W.stateNode=f,x=Kp(),x.refCount++,f.pooledCache=x,x.refCount++,W.memoizedState={element:T,isDehydrated:S,cache:x},Of(W),f}function f5(f){return f?(f=Bi,f):Bi}function p5(f,x,S,T,F,W){F=f5(F),T.context===null?T.context=F:T.pendingContext=F,T=Ul(x),T.payload={element:S},W=W===void 0?null:W,W!==null&&(T.callback=W),S=ll(f,T,x),S!==null&&(Ci(S,f,x),xu(S,f,x))}function h5(f,x){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var S=f.retryLane;f.retryLane=S!==0&&S<x?S:x}}function k1(f,x){h5(f,x),(f=f.alternate)&&h5(f,x)}function m5(f){if(f.tag===13||f.tag===31){var x=bc(f,67108864);x!==null&&Ci(x,f,67108864),k1(f,67108864)}}function g5(f){if(f.tag===13||f.tag===31){var x=qi();x=rr(x);var S=bc(f,x);S!==null&&Ci(S,f,x),k1(f,x)}}var H0=!0;function o9(f,x,S,T){var F=D.T;D.T=null;var W=X.p;try{X.p=2,_1(f,x,S,T)}finally{X.p=W,D.T=F}}function i9(f,x,S,T){var F=D.T;D.T=null;var W=X.p;try{X.p=8,_1(f,x,S,T)}finally{X.p=W,D.T=F}}function _1(f,x,S,T){if(H0){var F=E1(T);if(F===null)p1(f,x,T,W0,S),x5(f,T);else if(c9(F,f,x,S,T))T.stopPropagation();else if(x5(f,T),x&4&&-1<l9.indexOf(f)){for(;F!==null;){var W=ke(F);if(W!==null)switch(W.tag){case 3:if(W=W.stateNode,W.current.memoizedState.isDehydrated){var me=zt(W.pendingLanes);if(me!==0){var Le=W;for(Le.pendingLanes|=2,Le.entangledLanes|=2;me;){var ft=1<<31-dt(me);Le.entanglements[1]|=ft,me&=~ft}Rc(W),(Es&6)===0&&(_0=he()+500,Rg(0))}}break;case 31:case 13:Le=bc(W,2),Le!==null&&Ci(Le,W,2),T0(),k1(W,2)}if(W=E1(T),W===null&&p1(f,x,T,W0,S),W===F)break;F=W}F!==null&&T.stopPropagation()}else p1(f,x,T,null,S)}}function E1(f){return f=so(f),T1(f)}var W0=null;function T1(f){if(W0=null,f=ne(f),f!==null){var x=o(f);if(x===null)f=null;else{var S=x.tag;if(S===13){if(f=i(x),f!==null)return f;f=null}else if(S===31){if(f=l(x),f!==null)return f;f=null}else if(S===3){if(x.stateNode.current.memoizedState.isDehydrated)return x.tag===3?x.stateNode.containerInfo:null;f=null}else x!==f&&(f=null)}}return W0=f,null}function y5(f){switch(f){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ie()){case Fe:return 2;case We:return 8;case Qe:case de:return 32;case Ee:return 268435456;default:return 32}default:return 32}}var O1=!1,Du=null,Lu=null,Fu=null,Ug=new Map,Vg=new Map,Bu=[],l9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function x5(f,x){switch(f){case"focusin":case"focusout":Du=null;break;case"dragenter":case"dragleave":Lu=null;break;case"mouseover":case"mouseout":Fu=null;break;case"pointerover":case"pointerout":Ug.delete(x.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vg.delete(x.pointerId)}}function Hg(f,x,S,T,F,W){return f===null||f.nativeEvent!==W?(f={blockedOn:x,domEventName:S,eventSystemFlags:T,nativeEvent:W,targetContainers:[F]},x!==null&&(x=ke(x),x!==null&&m5(x)),f):(f.eventSystemFlags|=T,x=f.targetContainers,F!==null&&x.indexOf(F)===-1&&x.push(F),f)}function c9(f,x,S,T,F){switch(x){case"focusin":return Du=Hg(Du,f,x,S,T,F),!0;case"dragenter":return Lu=Hg(Lu,f,x,S,T,F),!0;case"mouseover":return Fu=Hg(Fu,f,x,S,T,F),!0;case"pointerover":var W=F.pointerId;return Ug.set(W,Hg(Ug.get(W)||null,f,x,S,T,F)),!0;case"gotpointercapture":return W=F.pointerId,Vg.set(W,Hg(Vg.get(W)||null,f,x,S,T,F)),!0}return!1}function v5(f){var x=ne(f.target);if(x!==null){var S=o(x);if(S!==null){if(x=S.tag,x===13){if(x=i(S),x!==null){f.blockedOn=x,En(f.priority,function(){g5(S)});return}}else if(x===31){if(x=l(S),x!==null){f.blockedOn=x,En(f.priority,function(){g5(S)});return}}else if(x===3&&S.stateNode.current.memoizedState.isDehydrated){f.blockedOn=S.tag===3?S.stateNode.containerInfo:null;return}}}f.blockedOn=null}function q0(f){if(f.blockedOn!==null)return!1;for(var x=f.targetContainers;0<x.length;){var S=E1(f.nativeEvent);if(S===null){S=f.nativeEvent;var T=new S.constructor(S.type,S);Wn=T,S.target.dispatchEvent(T),Wn=null}else return x=ke(S),x!==null&&m5(x),f.blockedOn=S,!1;x.shift()}return!0}function b5(f,x,S){q0(f)&&S.delete(x)}function d9(){O1=!1,Du!==null&&q0(Du)&&(Du=null),Lu!==null&&q0(Lu)&&(Lu=null),Fu!==null&&q0(Fu)&&(Fu=null),Ug.forEach(b5),Vg.forEach(b5)}function G0(f,x){f.blockedOn===x&&(f.blockedOn=null,O1||(O1=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,d9)))}var K0=null;function w5(f){K0!==f&&(K0=f,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){K0===f&&(K0=null);for(var x=0;x<f.length;x+=3){var S=f[x],T=f[x+1],F=f[x+2];if(typeof T!="function"){if(T1(T||S)===null)continue;break}var W=ke(S);W!==null&&(f.splice(x,3),x-=3,xg(W,{pending:!0,data:F,method:S.method,action:T},T,F))}}))}function jh(f){function x(ft){return G0(ft,f)}Du!==null&&G0(Du,f),Lu!==null&&G0(Lu,f),Fu!==null&&G0(Fu,f),Ug.forEach(x),Vg.forEach(x);for(var S=0;S<Bu.length;S++){var T=Bu[S];T.blockedOn===f&&(T.blockedOn=null)}for(;0<Bu.length&&(S=Bu[0],S.blockedOn===null);)v5(S),S.blockedOn===null&&Bu.shift();if(S=(f.ownerDocument||f).$$reactFormReplay,S!=null)for(T=0;T<S.length;T+=3){var F=S[T],W=S[T+1],me=F[jr]||null;if(typeof W=="function")me||w5(S);else if(me){var Le=null;if(W&&W.hasAttribute("formAction")){if(F=W,me=W[jr]||null)Le=me.formAction;else if(T1(F)!==null)continue}else Le=me.action;typeof Le=="function"?S[T+1]=Le:(S.splice(T,3),T-=3),w5(S)}}}function j5(){function f(W){W.canIntercept&&W.info==="react-transition"&&W.intercept({handler:function(){return new Promise(function(me){return F=me})},focusReset:"manual",scroll:"manual"})}function x(){F!==null&&(F(),F=null),T||setTimeout(S,20)}function S(){if(!T&&!navigation.transition){var W=navigation.currentEntry;W&&W.url!=null&&navigation.navigate(W.url,{state:W.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var T=!1,F=null;return navigation.addEventListener("navigate",f),navigation.addEventListener("navigatesuccess",x),navigation.addEventListener("navigateerror",x),setTimeout(S,100),function(){T=!0,navigation.removeEventListener("navigate",f),navigation.removeEventListener("navigatesuccess",x),navigation.removeEventListener("navigateerror",x),F!==null&&(F(),F=null)}}}function P1(f){this._internalRoot=f}Y0.prototype.render=P1.prototype.render=function(f){var x=this._internalRoot;if(x===null)throw Error(t(409));var S=x.current,T=qi();p5(S,T,f,x,null,null)},Y0.prototype.unmount=P1.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var x=f.containerInfo;p5(f.current,2,null,f,null,null),T0(),x[mt]=null}};function Y0(f){this._internalRoot=f}Y0.prototype.unstable_scheduleHydration=function(f){if(f){var x=an();f={blockedOn:null,target:f,priority:x};for(var S=0;S<Bu.length&&x!==0&&x<Bu[S].priority;S++);Bu.splice(S,0,f),S===0&&v5(f)}};var C5=r.version;if(C5!=="19.2.4")throw Error(t(527,C5,"19.2.4"));X.findDOMNode=function(f){var x=f._reactInternals;if(x===void 0)throw typeof f.render=="function"?Error(t(188)):(f=Object.keys(f).join(","),Error(t(268,f)));return f=d(x),f=f!==null?p(f):null,f=f===null?null:f.stateNode,f};var u9={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Z0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Z0.isDisabled&&Z0.supportsFiber)try{De=Z0.inject(u9),ct=Z0}catch{}}return qg.createRoot=function(f,x){if(!a(f))throw Error(t(299));var S=!1,T="",F=Cg,W=Sg,me=Ng;return x!=null&&(x.unstable_strictMode===!0&&(S=!0),x.identifierPrefix!==void 0&&(T=x.identifierPrefix),x.onUncaughtError!==void 0&&(F=x.onUncaughtError),x.onCaughtError!==void 0&&(W=x.onCaughtError),x.onRecoverableError!==void 0&&(me=x.onRecoverableError)),x=u5(f,1,!1,null,null,S,T,null,F,W,me,j5),f[mt]=x.current,f1(f),new P1(x)},qg.hydrateRoot=function(f,x,S){if(!a(f))throw Error(t(299));var T=!1,F="",W=Cg,me=Sg,Le=Ng,ft=null;return S!=null&&(S.unstable_strictMode===!0&&(T=!0),S.identifierPrefix!==void 0&&(F=S.identifierPrefix),S.onUncaughtError!==void 0&&(W=S.onUncaughtError),S.onCaughtError!==void 0&&(me=S.onCaughtError),S.onRecoverableError!==void 0&&(Le=S.onRecoverableError),S.formState!==void 0&&(ft=S.formState)),x=u5(f,1,!0,x,S??null,T,F,ft,W,me,Le,j5),x.context=f5(null),S=x.current,T=qi(),T=rr(T),F=Ul(T),F.callback=null,ll(S,F,T),S=T,x.current.lanes=S,tr(x,S),Rc(x),f[mt]=x.current,f1(f),new Y0(x)},qg.version="19.2.4",qg}var M5;function w9(){if(M5)return I1.exports;M5=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(r){console.error(r)}}return s(),I1.exports=b9(),I1.exports}var j9=w9();let C9={data:""},S9=s=>{if(typeof window=="object"){let r=(s?s.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return r.nonce=window.__nonce__,r.parentNode||(s||document.head).appendChild(r),r.firstChild}return s||C9},N9=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,k9=/\/\*[^]*?\*\/|  +/g,I5=/\n+/g,Ku=(s,r)=>{let e="",t="",a="";for(let o in s){let i=s[o];o[0]=="@"?o[1]=="i"?e=o+" "+i+";":t+=o[1]=="f"?Ku(i,o):o+"{"+Ku(i,o[1]=="k"?"":r)+"}":typeof i=="object"?t+=Ku(i,r?r.replace(/([^,])+/g,l=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):o):i!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=Ku.p?Ku.p(o,i):o+":"+i+";")}return e+(r&&a?r+"{"+a+"}":a)+t},Pd={},yO=s=>{if(typeof s=="object"){let r="";for(let e in s)r+=e+yO(s[e]);return r}return s},_9=(s,r,e,t,a)=>{let o=yO(s),i=Pd[o]||(Pd[o]=(c=>{let d=0,p=11;for(;d<c.length;)p=101*p+c.charCodeAt(d++)>>>0;return"go"+p})(o));if(!Pd[i]){let c=o!==s?s:(d=>{let p,h,g=[{}];for(;p=N9.exec(d.replace(k9,""));)p[4]?g.shift():p[3]?(h=p[3].replace(I5," ").trim(),g.unshift(g[0][h]=g[0][h]||{})):g[0][p[1]]=p[2].replace(I5," ").trim();return g[0]})(s);Pd[i]=Ku(a?{["@keyframes "+i]:c}:c,e?"":"."+i)}let l=e&&Pd.g?Pd.g:null;return e&&(Pd.g=Pd[i]),((c,d,p,h)=>{h?d.data=d.data.replace(h,c):d.data.indexOf(c)===-1&&(d.data=p?c+d.data:d.data+c)})(Pd[i],r,t,l),i},E9=(s,r,e)=>s.reduce((t,a,o)=>{let i=r[o];if(i&&i.call){let l=i(e),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;i=c?"."+c:l&&typeof l=="object"?l.props?"":Ku(l,""):l===!1?"":l}return t+a+(i??"")},"");function zw(s){let r=this||{},e=s.call?s(r.p):s;return _9(e.unshift?e.raw?E9(e,[].slice.call(arguments,1),r.p):e.reduce((t,a)=>Object.assign(t,a&&a.call?a(r.p):a),{}):e,S9(r.target),r.g,r.o,r.k)}let xO,bS,wS;zw.bind({g:1});let Zd=zw.bind({k:1});function T9(s,r,e,t){Ku.p=r,xO=s,bS=e,wS=t}function df(s,r){let e=this||{};return function(){let t=arguments;function a(o,i){let l=Object.assign({},o),c=l.className||a.className;e.p=Object.assign({theme:bS&&bS()},l),e.o=/ *go\d+/.test(c),l.className=zw.apply(e,t)+(c?" "+c:"");let d=s;return s[0]&&(d=l.as||s,delete l.as),wS&&d[0]&&wS(l),xO(d,l)}return a}}var O9=s=>typeof s=="function",nb=(s,r)=>O9(s)?s(r):s,P9=(()=>{let s=0;return()=>(++s).toString()})(),vO=(()=>{let s;return()=>{if(s===void 0&&typeof window<"u"){let r=matchMedia("(prefers-reduced-motion: reduce)");s=!r||r.matches}return s}})(),A9=20,d2="default",bO=(s,r)=>{let{toastLimit:e}=s.settings;switch(r.type){case 0:return{...s,toasts:[r.toast,...s.toasts].slice(0,e)};case 1:return{...s,toasts:s.toasts.map(i=>i.id===r.toast.id?{...i,...r.toast}:i)};case 2:let{toast:t}=r;return bO(s,{type:s.toasts.find(i=>i.id===t.id)?1:0,toast:t});case 3:let{toastId:a}=r;return{...s,toasts:s.toasts.map(i=>i.id===a||a===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return r.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(i=>i.id!==r.toastId)};case 5:return{...s,pausedAt:r.time};case 6:let o=r.time-(s.pausedAt||0);return{...s,pausedAt:void 0,toasts:s.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+o}))}}},Av=[],wO={toasts:[],pausedAt:void 0,settings:{toastLimit:A9}},Yc={},jO=(s,r=d2)=>{Yc[r]=bO(Yc[r]||wO,s),Av.forEach(([e,t])=>{e===r&&t(Yc[r])})},CO=s=>Object.keys(Yc).forEach(r=>jO(s,r)),M9=s=>Object.keys(Yc).find(r=>Yc[r].toasts.some(e=>e.id===s)),$w=(s=d2)=>r=>{jO(r,s)},I9={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},R9=(s={},r=d2)=>{let[e,t]=u.useState(Yc[r]||wO),a=u.useRef(Yc[r]);u.useEffect(()=>(a.current!==Yc[r]&&t(Yc[r]),Av.push([r,t]),()=>{let i=Av.findIndex(([l])=>l===r);i>-1&&Av.splice(i,1)}),[r]);let o=e.toasts.map(i=>{var l,c,d;return{...s,...s[i.type],...i,removeDelay:i.removeDelay||((l=s[i.type])==null?void 0:l.removeDelay)||s?.removeDelay,duration:i.duration||((c=s[i.type])==null?void 0:c.duration)||s?.duration||I9[i.type],style:{...s.style,...(d=s[i.type])==null?void 0:d.style,...i.style}}});return{...e,toasts:o}},D9=(s,r="blank",e)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:r,ariaProps:{role:"status","aria-live":"polite"},message:s,pauseDuration:0,...e,id:e?.id||P9()}),yx=s=>(r,e)=>{let t=D9(r,s,e);return $w(t.toasterId||M9(t.id))({type:2,toast:t}),t.id},ha=(s,r)=>yx("blank")(s,r);ha.error=yx("error");ha.success=yx("success");ha.loading=yx("loading");ha.custom=yx("custom");ha.dismiss=(s,r)=>{let e={type:3,toastId:s};r?$w(r)(e):CO(e)};ha.dismissAll=s=>ha.dismiss(void 0,s);ha.remove=(s,r)=>{let e={type:4,toastId:s};r?$w(r)(e):CO(e)};ha.removeAll=s=>ha.remove(void 0,s);ha.promise=(s,r,e)=>{let t=ha.loading(r.loading,{...e,...e?.loading});return typeof s=="function"&&(s=s()),s.then(a=>{let o=r.success?nb(r.success,a):void 0;return o?ha.success(o,{id:t,...e,...e?.success}):ha.dismiss(t),a}).catch(a=>{let o=r.error?nb(r.error,a):void 0;o?ha.error(o,{id:t,...e,...e?.error}):ha.dismiss(t)}),s};var L9=1e3,F9=(s,r="default")=>{let{toasts:e,pausedAt:t}=R9(s,r),a=u.useRef(new Map).current,o=u.useCallback((h,g=L9)=>{if(a.has(h))return;let y=setTimeout(()=>{a.delete(h),i({type:4,toastId:h})},g);a.set(h,y)},[]);u.useEffect(()=>{if(t)return;let h=Date.now(),g=e.map(y=>{if(y.duration===1/0)return;let b=(y.duration||0)+y.pauseDuration-(h-y.createdAt);if(b<0){y.visible&&ha.dismiss(y.id);return}return setTimeout(()=>ha.dismiss(y.id,r),b)});return()=>{g.forEach(y=>y&&clearTimeout(y))}},[e,t,r]);let i=u.useCallback($w(r),[r]),l=u.useCallback(()=>{i({type:5,time:Date.now()})},[i]),c=u.useCallback((h,g)=>{i({type:1,toast:{id:h,height:g}})},[i]),d=u.useCallback(()=>{t&&i({type:6,time:Date.now()})},[t,i]),p=u.useCallback((h,g)=>{let{reverseOrder:y=!1,gutter:b=8,defaultPosition:v}=g||{},w=e.filter(N=>(N.position||v)===(h.position||v)&&N.height),C=w.findIndex(N=>N.id===h.id),k=w.filter((N,O)=>O<C&&N.visible).length;return w.filter(N=>N.visible).slice(...y?[k+1]:[0,k]).reduce((N,O)=>N+(O.height||0)+b,0)},[e]);return u.useEffect(()=>{e.forEach(h=>{if(h.dismissed)o(h.id,h.removeDelay);else{let g=a.get(h.id);g&&(clearTimeout(g),a.delete(h.id))}})},[e,o]),{toasts:e,handlers:{updateHeight:c,startPause:l,endPause:d,calculateOffset:p}}},B9=Zd`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,z9=Zd`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,$9=Zd`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,U9=df("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${B9} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${z9} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${s=>s.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${$9} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,V9=Zd`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,H9=df("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${s=>s.secondary||"#e0e0e0"};
  border-right-color: ${s=>s.primary||"#616161"};
  animation: ${V9} 1s linear infinite;
`,W9=Zd`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,q9=Zd`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,G9=df("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${W9} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${q9} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${s=>s.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,K9=df("div")`
  position: absolute;
`,Y9=df("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Z9=Zd`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,X9=df("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Z9} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Q9=({toast:s})=>{let{icon:r,type:e,iconTheme:t}=s;return r!==void 0?typeof r=="string"?u.createElement(X9,null,r):r:e==="blank"?null:u.createElement(Y9,null,u.createElement(H9,{...t}),e!=="loading"&&u.createElement(K9,null,e==="error"?u.createElement(U9,{...t}):u.createElement(G9,{...t})))},J9=s=>`
0% {transform: translate3d(0,${s*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,e7=s=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${s*-150}%,-1px) scale(.6); opacity:0;}
`,t7="0%{opacity:0;} 100%{opacity:1;}",r7="0%{opacity:1;} 100%{opacity:0;}",n7=df("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,s7=df("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,a7=(s,r)=>{let e=s.includes("top")?1:-1,[t,a]=vO()?[t7,r7]:[J9(e),e7(e)];return{animation:r?`${Zd(t)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Zd(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},o7=u.memo(({toast:s,position:r,style:e,children:t})=>{let a=s.height?a7(s.position||r||"top-center",s.visible):{opacity:0},o=u.createElement(Q9,{toast:s}),i=u.createElement(s7,{...s.ariaProps},nb(s.message,s));return u.createElement(n7,{className:s.className,style:{...a,...e,...s.style}},typeof t=="function"?t({icon:o,message:i}):u.createElement(u.Fragment,null,o,i))});T9(u.createElement);var i7=({id:s,className:r,style:e,onHeightUpdate:t,children:a})=>{let o=u.useCallback(i=>{if(i){let l=()=>{let c=i.getBoundingClientRect().height;t(s,c)};l(),new MutationObserver(l).observe(i,{subtree:!0,childList:!0,characterData:!0})}},[s,t]);return u.createElement("div",{ref:o,className:r,style:e},a)},l7=(s,r)=>{let e=s.includes("top"),t=e?{top:0}:{bottom:0},a=s.includes("center")?{justifyContent:"center"}:s.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:vO()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${r*(e?1:-1)}px)`,...t,...a}},c7=zw`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Q0=16,d7=({reverseOrder:s,position:r="top-center",toastOptions:e,gutter:t,children:a,toasterId:o,containerStyle:i,containerClassName:l})=>{let{toasts:c,handlers:d}=F9(e,o);return u.createElement("div",{"data-rht-toaster":o||"",style:{position:"fixed",zIndex:9999,top:Q0,left:Q0,right:Q0,bottom:Q0,pointerEvents:"none",...i},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(p=>{let h=p.position||r,g=d.calculateOffset(p,{reverseOrder:s,gutter:t,defaultPosition:r}),y=l7(h,g);return u.createElement(i7,{id:p.id,key:p.id,onHeightUpdate:d.updateHeight,className:p.visible?c7:"",style:y},p.type==="custom"?nb(p.message,p):a?a(p):u.createElement(o7,{toast:p,position:h}))}))},gr=ha;var R5="popstate";function u7(s={}){function r(t,a){let{pathname:o,search:i,hash:l}=t.location;return jS("",{pathname:o,search:i,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function e(t,a){return typeof a=="string"?a:Hy(a)}return p7(r,e,null,s)}function Ra(s,r){if(s===!1||s===null||typeof s>"u")throw new Error(r)}function lc(s,r){if(!s){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function f7(){return Math.random().toString(36).substring(2,10)}function D5(s,r){return{usr:s.state,key:s.key,idx:r}}function jS(s,r,e=null,t){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof r=="string"?Om(r):r,state:e,key:r&&r.key||t||f7()}}function Hy({pathname:s="/",search:r="",hash:e=""}){return r&&r!=="?"&&(s+=r.charAt(0)==="?"?r:"?"+r),e&&e!=="#"&&(s+=e.charAt(0)==="#"?e:"#"+e),s}function Om(s){let r={};if(s){let e=s.indexOf("#");e>=0&&(r.hash=s.substring(e),s=s.substring(0,e));let t=s.indexOf("?");t>=0&&(r.search=s.substring(t),s=s.substring(0,t)),s&&(r.pathname=s)}return r}function p7(s,r,e,t={}){let{window:a=document.defaultView,v5Compat:o=!1}=t,i=a.history,l="POP",c=null,d=p();d==null&&(d=0,i.replaceState({...i.state,idx:d},""));function p(){return(i.state||{idx:null}).idx}function h(){l="POP";let w=p(),C=w==null?null:w-d;d=w,c&&c({action:l,location:v.location,delta:C})}function g(w,C){l="PUSH";let k=jS(v.location,w,C);d=p()+1;let N=D5(k,d),O=v.createHref(k);try{i.pushState(N,"",O)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;a.location.assign(O)}o&&c&&c({action:l,location:v.location,delta:1})}function y(w,C){l="REPLACE";let k=jS(v.location,w,C);d=p();let N=D5(k,d),O=v.createHref(k);i.replaceState(N,"",O),o&&c&&c({action:l,location:v.location,delta:0})}function b(w){return h7(w)}let v={get action(){return l},get location(){return s(a,i)},listen(w){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(R5,h),c=w,()=>{a.removeEventListener(R5,h),c=null}},createHref(w){return r(a,w)},createURL:b,encodeLocation(w){let C=b(w);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:g,replace:y,go(w){return i.go(w)}};return v}function h7(s,r=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),Ra(e,"No window.location.(origin|href) available to create URL");let t=typeof s=="string"?s:Hy(s);return t=t.replace(/ $/,"%20"),!r&&t.startsWith("//")&&(t=e+t),new URL(t,e)}function SO(s,r,e="/"){return m7(s,r,e,!1)}function m7(s,r,e,t){let a=typeof r=="string"?Om(r):r,o=Xd(a.pathname||"/",e);if(o==null)return null;let i=NO(s);g7(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let d=_7(o);l=N7(i[c],d,t)}return l}function NO(s,r=[],e=[],t="",a=!1){let o=(i,l,c=a,d)=>{let p={relativePath:d===void 0?i.path||"":d,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(t)&&c)return;Ra(p.relativePath.startsWith(t),`Absolute route path "${p.relativePath}" nested under path "${t}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(t.length)}let h=Wd([t,p.relativePath]),g=e.concat(p);i.children&&i.children.length>0&&(Ra(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),NO(i.children,r,g,h,c)),!(i.path==null&&!i.index)&&r.push({path:h,score:C7(h,i.index),routesMeta:g})};return s.forEach((i,l)=>{if(i.path===""||!i.path?.includes("?"))o(i,l);else for(let c of kO(i.path))o(i,l,!0,c)}),r}function kO(s){let r=s.split("/");if(r.length===0)return[];let[e,...t]=r,a=e.endsWith("?"),o=e.replace(/\?$/,"");if(t.length===0)return a?[o,""]:[o];let i=kO(t.join("/")),l=[];return l.push(...i.map(c=>c===""?o:[o,c].join("/"))),a&&l.push(...i),l.map(c=>s.startsWith("/")&&c===""?"/":c)}function g7(s){s.sort((r,e)=>r.score!==e.score?e.score-r.score:S7(r.routesMeta.map(t=>t.childrenIndex),e.routesMeta.map(t=>t.childrenIndex)))}var y7=/^:[\w-]+$/,x7=3,v7=2,b7=1,w7=10,j7=-2,L5=s=>s==="*";function C7(s,r){let e=s.split("/"),t=e.length;return e.some(L5)&&(t+=j7),r&&(t+=v7),e.filter(a=>!L5(a)).reduce((a,o)=>a+(y7.test(o)?x7:o===""?b7:w7),t)}function S7(s,r){return s.length===r.length&&s.slice(0,-1).every((t,a)=>t===r[a])?s[s.length-1]-r[r.length-1]:0}function N7(s,r,e=!1){let{routesMeta:t}=s,a={},o="/",i=[];for(let l=0;l<t.length;++l){let c=t[l],d=l===t.length-1,p=o==="/"?r:r.slice(o.length)||"/",h=sb({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},p),g=c.route;if(!h&&d&&e&&!t[t.length-1].route.index&&(h=sb({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},p)),!h)return null;Object.assign(a,h.params),i.push({params:a,pathname:Wd([o,h.pathname]),pathnameBase:P7(Wd([o,h.pathnameBase])),route:g}),h.pathnameBase!=="/"&&(o=Wd([o,h.pathnameBase]))}return i}function sb(s,r){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[e,t]=k7(s.path,s.caseSensitive,s.end),a=r.match(e);if(!a)return null;let o=a[0],i=o.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:t.reduce((d,{paramName:p,isOptional:h},g)=>{if(p==="*"){let b=l[g]||"";i=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const y=l[g];return h&&!y?d[p]=void 0:d[p]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:i,pattern:s}}function k7(s,r=!1,e=!0){lc(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let t=[],a="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(t.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(t.push({paramName:"*"}),a+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":s!==""&&s!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,r?void 0:"i"),t]}function _7(s){try{return s.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return lc(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),s}}function Xd(s,r){if(r==="/")return s;if(!s.toLowerCase().startsWith(r.toLowerCase()))return null;let e=r.endsWith("/")?r.length-1:r.length,t=s.charAt(e);return t&&t!=="/"?null:s.slice(e)||"/"}var E7=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function T7(s,r="/"){let{pathname:e,search:t="",hash:a=""}=typeof s=="string"?Om(s):s,o;return e?(e=e.replace(/\/\/+/g,"/"),e.startsWith("/")?o=F5(e.substring(1),"/"):o=F5(e,r)):o=r,{pathname:o,search:A7(t),hash:M7(a)}}function F5(s,r){let e=r.replace(/\/+$/,"").split("/");return s.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function F1(s,r,e,t){return`Cannot include a '${s}' character in a manually specified \`to.${r}\` field [${JSON.stringify(t)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function O7(s){return s.filter((r,e)=>e===0||r.route.path&&r.route.path.length>0)}function _O(s){let r=O7(s);return r.map((e,t)=>t===r.length-1?e.pathname:e.pathnameBase)}function EO(s,r,e,t=!1){let a;typeof s=="string"?a=Om(s):(a={...s},Ra(!a.pathname||!a.pathname.includes("?"),F1("?","pathname","search",a)),Ra(!a.pathname||!a.pathname.includes("#"),F1("#","pathname","hash",a)),Ra(!a.search||!a.search.includes("#"),F1("#","search","hash",a)));let o=s===""||a.pathname==="",i=o?"/":a.pathname,l;if(i==null)l=e;else{let h=r.length-1;if(!t&&i.startsWith("..")){let g=i.split("/");for(;g[0]==="..";)g.shift(),h-=1;a.pathname=g.join("/")}l=h>=0?r[h]:"/"}let c=T7(a,l),d=i&&i!=="/"&&i.endsWith("/"),p=(o||i===".")&&e.endsWith("/");return!c.pathname.endsWith("/")&&(d||p)&&(c.pathname+="/"),c}var Wd=s=>s.join("/").replace(/\/\/+/g,"/"),P7=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),A7=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,M7=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,I7=class{constructor(s,r,e,t=!1){this.status=s,this.statusText=r||"",this.internal=t,e instanceof Error?(this.data=e.toString(),this.error=e):this.data=e}};function R7(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function D7(s){return s.map(r=>r.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var TO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function OO(s,r){let e=s;if(typeof e!="string"||!E7.test(e))return{absoluteURL:void 0,isExternal:!1,to:e};let t=e,a=!1;if(TO)try{let o=new URL(window.location.href),i=e.startsWith("//")?new URL(o.protocol+e):new URL(e),l=Xd(i.pathname,r);i.origin===o.origin&&l!=null?e=l+i.search+i.hash:a=!0}catch{lc(!1,`<Link to="${e}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:t,isExternal:a,to:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var PO=["POST","PUT","PATCH","DELETE"];new Set(PO);var L7=["GET",...PO];new Set(L7);var Pm=u.createContext(null);Pm.displayName="DataRouter";var Uw=u.createContext(null);Uw.displayName="DataRouterState";var F7=u.createContext(!1),AO=u.createContext({isTransitioning:!1});AO.displayName="ViewTransition";var B7=u.createContext(new Map);B7.displayName="Fetchers";var z7=u.createContext(null);z7.displayName="Await";var Tl=u.createContext(null);Tl.displayName="Navigation";var xx=u.createContext(null);xx.displayName="Location";var fc=u.createContext({outlet:null,matches:[],isDataRoute:!1});fc.displayName="Route";var u2=u.createContext(null);u2.displayName="RouteError";var MO="REACT_ROUTER_ERROR",$7="REDIRECT",U7="ROUTE_ERROR_RESPONSE";function V7(s){if(s.startsWith(`${MO}:${$7}:{`))try{let r=JSON.parse(s.slice(28));if(typeof r=="object"&&r&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.location=="string"&&typeof r.reloadDocument=="boolean"&&typeof r.replace=="boolean")return r}catch{}}function H7(s){if(s.startsWith(`${MO}:${U7}:{`))try{let r=JSON.parse(s.slice(40));if(typeof r=="object"&&r&&typeof r.status=="number"&&typeof r.statusText=="string")return new I7(r.status,r.statusText,r.data)}catch{}}function W7(s,{relative:r}={}){Ra(vx(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:t}=u.useContext(Tl),{hash:a,pathname:o,search:i}=bx(s,{relative:r}),l=o;return e!=="/"&&(l=o==="/"?e:Wd([e,o])),t.createHref({pathname:l,search:i,hash:a})}function vx(){return u.useContext(xx)!=null}function Ri(){return Ra(vx(),"useLocation() may be used only in the context of a <Router> component."),u.useContext(xx).location}var IO="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function RO(s){u.useContext(Tl).static||u.useLayoutEffect(s)}function dr(){let{isDataRoute:s}=u.useContext(fc);return s?o8():q7()}function q7(){Ra(vx(),"useNavigate() may be used only in the context of a <Router> component.");let s=u.useContext(Pm),{basename:r,navigator:e}=u.useContext(Tl),{matches:t}=u.useContext(fc),{pathname:a}=Ri(),o=JSON.stringify(_O(t)),i=u.useRef(!1);return RO(()=>{i.current=!0}),u.useCallback((c,d={})=>{if(lc(i.current,IO),!i.current)return;if(typeof c=="number"){e.go(c);return}let p=EO(c,JSON.parse(o),a,d.relative==="path");s==null&&r!=="/"&&(p.pathname=p.pathname==="/"?r:Wd([r,p.pathname])),(d.replace?e.replace:e.push)(p,d.state,d)},[r,e,o,a,s])}var G7=u.createContext(null);function K7(s){let r=u.useContext(fc).outlet;return u.useMemo(()=>r&&u.createElement(G7.Provider,{value:s},r),[r,s])}function ks(){let{matches:s}=u.useContext(fc),r=s[s.length-1];return r?r.params:{}}function bx(s,{relative:r}={}){let{matches:e}=u.useContext(fc),{pathname:t}=Ri(),a=JSON.stringify(_O(e));return u.useMemo(()=>EO(s,JSON.parse(a),t,r==="path"),[s,a,t,r])}function Y7(s,r){return DO(s,r)}function DO(s,r,e,t,a){Ra(vx(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=u.useContext(Tl),{matches:i}=u.useContext(fc),l=i[i.length-1],c=l?l.params:{},d=l?l.pathname:"/",p=l?l.pathnameBase:"/",h=l&&l.route;{let k=h&&h.path||"";FO(d,!h||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let g=Ri(),y;if(r){let k=typeof r=="string"?Om(r):r;Ra(p==="/"||k.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${k.pathname}" was given in the \`location\` prop.`),y=k}else y=g;let b=y.pathname||"/",v=b;if(p!=="/"){let k=p.replace(/^\//,"").split("/");v="/"+b.replace(/^\//,"").split("/").slice(k.length).join("/")}let w=SO(s,{pathname:v});lc(h||w!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),lc(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=e8(w&&w.map(k=>Object.assign({},k,{params:Object.assign({},c,k.params),pathname:Wd([p,o.encodeLocation?o.encodeLocation(k.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?p:Wd([p,o.encodeLocation?o.encodeLocation(k.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathnameBase])})),i,e,t,a);return r&&C?u.createElement(xx.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},C):C}function Z7(){let s=a8(),r=R7(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),e=s instanceof Error?s.stack:null,t="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:t},o={padding:"2px 4px",backgroundColor:t},i=null;return console.error("Error handled by React Router default ErrorBoundary:",s),i=u.createElement(u.Fragment,null,u.createElement("p",null," Hey developer "),u.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",u.createElement("code",{style:o},"ErrorBoundary")," or"," ",u.createElement("code",{style:o},"errorElement")," prop on your route.")),u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},r),e?u.createElement("pre",{style:a},e):null,i)}var X7=u.createElement(Z7,null),LO=class extends u.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,r){return r.location!==s.location||r.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:r.error,location:r.location,revalidation:s.revalidation||r.revalidation}}componentDidCatch(s,r){this.props.onError?this.props.onError(s,r):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const e=H7(s.digest);e&&(s=e)}let r=s!==void 0?u.createElement(fc.Provider,{value:this.props.routeContext},u.createElement(u2.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?u.createElement(Q7,{error:s},r):r}};LO.contextType=F7;var B1=new WeakMap;function Q7({children:s,error:r}){let{basename:e}=u.useContext(Tl);if(typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){let t=V7(r.digest);if(t){let a=B1.get(r);if(a)throw a;let o=OO(t.location,e);if(TO&&!B1.get(r))if(o.isExternal||t.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const i=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:t.replace}));throw B1.set(r,i),i}return u.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return s}function J7({routeContext:s,match:r,children:e}){let t=u.useContext(Pm);return t&&t.static&&t.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(t.staticContext._deepestRenderedBoundaryId=r.route.id),u.createElement(fc.Provider,{value:s},e)}function e8(s,r=[],e=null,t=null,a=null){if(s==null){if(!e)return null;if(e.errors)s=e.matches;else if(r.length===0&&!e.initialized&&e.matches.length>0)s=e.matches;else return null}let o=s,i=e?.errors;if(i!=null){let p=o.findIndex(h=>h.route.id&&i?.[h.route.id]!==void 0);Ra(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let l=!1,c=-1;if(e)for(let p=0;p<o.length;p++){let h=o[p];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=p),h.route.id){let{loaderData:g,errors:y}=e,b=h.route.loader&&!g.hasOwnProperty(h.route.id)&&(!y||y[h.route.id]===void 0);if(h.route.lazy||b){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}let d=e&&t?(p,h)=>{t(p,{location:e.location,params:e.matches?.[0]?.params??{},unstable_pattern:D7(e.matches),errorInfo:h})}:void 0;return o.reduceRight((p,h,g)=>{let y,b=!1,v=null,w=null;e&&(y=i&&h.route.id?i[h.route.id]:void 0,v=h.route.errorElement||X7,l&&(c<0&&g===0?(FO("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,w=null):c===g&&(b=!0,w=h.route.hydrateFallbackElement||null)));let C=r.concat(o.slice(0,g+1)),k=()=>{let N;return y?N=v:b?N=w:h.route.Component?N=u.createElement(h.route.Component,null):h.route.element?N=h.route.element:N=p,u.createElement(J7,{match:h,routeContext:{outlet:p,matches:C,isDataRoute:e!=null},children:N})};return e&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?u.createElement(LO,{location:e.location,revalidation:e.revalidation,component:v,error:y,children:k(),routeContext:{outlet:null,matches:C,isDataRoute:!0},onError:d}):k()},null)}function f2(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function t8(s){let r=u.useContext(Pm);return Ra(r,f2(s)),r}function r8(s){let r=u.useContext(Uw);return Ra(r,f2(s)),r}function n8(s){let r=u.useContext(fc);return Ra(r,f2(s)),r}function p2(s){let r=n8(s),e=r.matches[r.matches.length-1];return Ra(e.route.id,`${s} can only be used on routes that contain a unique "id"`),e.route.id}function s8(){return p2("useRouteId")}function a8(){let s=u.useContext(u2),r=r8("useRouteError"),e=p2("useRouteError");return s!==void 0?s:r.errors?.[e]}function o8(){let{router:s}=t8("useNavigate"),r=p2("useNavigate"),e=u.useRef(!1);return RO(()=>{e.current=!0}),u.useCallback(async(a,o={})=>{lc(e.current,IO),e.current&&(typeof a=="number"?await s.navigate(a):await s.navigate(a,{fromRouteId:r,...o}))},[s,r])}var B5={};function FO(s,r,e){!r&&!B5[s]&&(B5[s]=!0,lc(!1,e))}u.memo(i8);function i8({routes:s,future:r,state:e,onError:t}){return DO(s,void 0,e,t,r)}function l8(s){return K7(s.context)}function Qt(s){Ra(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function c8({basename:s="/",children:r=null,location:e,navigationType:t="POP",navigator:a,static:o=!1,unstable_useTransitions:i}){Ra(!vx(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=s.replace(/^\/*/,"/"),c=u.useMemo(()=>({basename:l,navigator:a,static:o,unstable_useTransitions:i,future:{}}),[l,a,o,i]);typeof e=="string"&&(e=Om(e));let{pathname:d="/",search:p="",hash:h="",state:g=null,key:y="default"}=e,b=u.useMemo(()=>{let v=Xd(d,l);return v==null?null:{location:{pathname:v,search:p,hash:h,state:g,key:y},navigationType:t}},[l,d,p,h,g,y,t]);return lc(b!=null,`<Router basename="${l}"> is not able to match the URL "${d}${p}${h}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:u.createElement(Tl.Provider,{value:c},u.createElement(xx.Provider,{children:r,value:b}))}function d8({children:s,location:r}){return Y7(CS(s),r)}function CS(s,r=[]){let e=[];return u.Children.forEach(s,(t,a)=>{if(!u.isValidElement(t))return;let o=[...r,a];if(t.type===u.Fragment){e.push.apply(e,CS(t.props.children,o));return}Ra(t.type===Qt,`[${typeof t.type=="string"?t.type:t.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ra(!t.props.index||!t.props.children,"An index route cannot have child routes.");let i={id:t.props.id||o.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,middleware:t.props.middleware,loader:t.props.loader,action:t.props.action,hydrateFallbackElement:t.props.hydrateFallbackElement,HydrateFallback:t.props.HydrateFallback,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:t.props.hasErrorBoundary===!0||t.props.ErrorBoundary!=null||t.props.errorElement!=null,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(i.children=CS(t.props.children,o)),e.push(i)}),e}var Mv="get",Iv="application/x-www-form-urlencoded";function Vw(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function u8(s){return Vw(s)&&s.tagName.toLowerCase()==="button"}function f8(s){return Vw(s)&&s.tagName.toLowerCase()==="form"}function p8(s){return Vw(s)&&s.tagName.toLowerCase()==="input"}function h8(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function m8(s,r){return s.button===0&&(!r||r==="_self")&&!h8(s)}function SS(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((r,e)=>{let t=s[e];return r.concat(Array.isArray(t)?t.map(a=>[e,a]):[[e,t]])},[]))}function g8(s,r){let e=SS(s);return r&&r.forEach((t,a)=>{e.has(a)||r.getAll(a).forEach(o=>{e.append(a,o)})}),e}var J0=null;function y8(){if(J0===null)try{new FormData(document.createElement("form"),0),J0=!1}catch{J0=!0}return J0}var x8=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function z1(s){return s!=null&&!x8.has(s)?(lc(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Iv}"`),null):s}function v8(s,r){let e,t,a,o,i;if(f8(s)){let l=s.getAttribute("action");t=l?Xd(l,r):null,e=s.getAttribute("method")||Mv,a=z1(s.getAttribute("enctype"))||Iv,o=new FormData(s)}else if(u8(s)||p8(s)&&(s.type==="submit"||s.type==="image")){let l=s.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=s.getAttribute("formaction")||l.getAttribute("action");if(t=c?Xd(c,r):null,e=s.getAttribute("formmethod")||l.getAttribute("method")||Mv,a=z1(s.getAttribute("formenctype"))||z1(l.getAttribute("enctype"))||Iv,o=new FormData(l,s),!y8()){let{name:d,type:p,value:h}=s;if(p==="image"){let g=d?`${d}.`:"";o.append(`${g}x`,"0"),o.append(`${g}y`,"0")}else d&&o.append(d,h)}}else{if(Vw(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=Mv,t=null,a=Iv,i=s}return o&&a==="text/plain"&&(i=o,o=void 0),{action:t,method:e.toLowerCase(),encType:a,formData:o,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function h2(s,r){if(s===!1||s===null||typeof s>"u")throw new Error(r)}function b8(s,r,e,t){let a=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return e?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${t}`:a.pathname=`${a.pathname}.${t}`:a.pathname==="/"?a.pathname=`_root.${t}`:r&&Xd(a.pathname,r)==="/"?a.pathname=`${r.replace(/\/$/,"")}/_root.${t}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${t}`,a}async function w8(s,r){if(s.id in r)return r[s.id];try{let e=await import(s.module);return r[s.id]=e,e}catch(e){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function j8(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function C8(s,r,e){let t=await Promise.all(s.map(async a=>{let o=r.routes[a.route.id];if(o){let i=await w8(o,e);return i.links?i.links():[]}return[]}));return _8(t.flat(1).filter(j8).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function z5(s,r,e,t,a,o){let i=(c,d)=>e[d]?c.route.id!==e[d].route.id:!0,l=(c,d)=>e[d].pathname!==c.pathname||e[d].route.path?.endsWith("*")&&e[d].params["*"]!==c.params["*"];return o==="assets"?r.filter((c,d)=>i(c,d)||l(c,d)):o==="data"?r.filter((c,d)=>{let p=t.routes[c.route.id];if(!p||!p.hasLoader)return!1;if(i(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function S8(s,r,{includeHydrateFallback:e}={}){return N8(s.map(t=>{let a=r.routes[t.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),e&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function N8(s){return[...new Set(s)]}function k8(s){let r={},e=Object.keys(s).sort();for(let t of e)r[t]=s[t];return r}function _8(s,r){let e=new Set;return new Set(r),s.reduce((t,a)=>{let o=JSON.stringify(k8(a));return e.has(o)||(e.add(o),t.push({key:o,link:a})),t},[])}function BO(){let s=u.useContext(Pm);return h2(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function E8(){let s=u.useContext(Uw);return h2(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var m2=u.createContext(void 0);m2.displayName="FrameworkContext";function zO(){let s=u.useContext(m2);return h2(s,"You must render this element inside a <HydratedRouter> element"),s}function T8(s,r){let e=u.useContext(m2),[t,a]=u.useState(!1),[o,i]=u.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:p,onTouchStart:h}=r,g=u.useRef(null);u.useEffect(()=>{if(s==="render"&&i(!0),s==="viewport"){let v=C=>{C.forEach(k=>{i(k.isIntersecting)})},w=new IntersectionObserver(v,{threshold:.5});return g.current&&w.observe(g.current),()=>{w.disconnect()}}},[s]),u.useEffect(()=>{if(t){let v=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(v)}}},[t]);let y=()=>{a(!0)},b=()=>{a(!1),i(!1)};return e?s!=="intent"?[o,g,{}]:[o,g,{onFocus:Gg(l,y),onBlur:Gg(c,b),onMouseEnter:Gg(d,y),onMouseLeave:Gg(p,b),onTouchStart:Gg(h,y)}]:[!1,g,{}]}function Gg(s,r){return e=>{s&&s(e),e.defaultPrevented||r(e)}}function O8({page:s,...r}){let{router:e}=BO(),t=u.useMemo(()=>SO(e.routes,s,e.basename),[e.routes,s,e.basename]);return t?u.createElement(A8,{page:s,matches:t,...r}):null}function P8(s){let{manifest:r,routeModules:e}=zO(),[t,a]=u.useState([]);return u.useEffect(()=>{let o=!1;return C8(s,r,e).then(i=>{o||a(i)}),()=>{o=!0}},[s,r,e]),t}function A8({page:s,matches:r,...e}){let t=Ri(),{future:a,manifest:o,routeModules:i}=zO(),{basename:l}=BO(),{loaderData:c,matches:d}=E8(),p=u.useMemo(()=>z5(s,r,d,o,t,"data"),[s,r,d,o,t]),h=u.useMemo(()=>z5(s,r,d,o,t,"assets"),[s,r,d,o,t]),g=u.useMemo(()=>{if(s===t.pathname+t.search+t.hash)return[];let v=new Set,w=!1;if(r.forEach(k=>{let N=o.routes[k.route.id];!N||!N.hasLoader||(!p.some(O=>O.route.id===k.route.id)&&k.route.id in c&&i[k.route.id]?.shouldRevalidate||N.hasClientLoader?w=!0:v.add(k.route.id))}),v.size===0)return[];let C=b8(s,l,a.unstable_trailingSlashAwareDataRequests,"data");return w&&v.size>0&&C.searchParams.set("_routes",r.filter(k=>v.has(k.route.id)).map(k=>k.route.id).join(",")),[C.pathname+C.search]},[l,a.unstable_trailingSlashAwareDataRequests,c,t,o,p,r,s,i]),y=u.useMemo(()=>S8(h,o),[h,o]),b=P8(h);return u.createElement(u.Fragment,null,g.map(v=>u.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...e})),y.map(v=>u.createElement("link",{key:v,rel:"modulepreload",href:v,...e})),b.map(({key:v,link:w})=>u.createElement("link",{key:v,nonce:e.nonce,...w,crossOrigin:w.crossOrigin??e.crossOrigin})))}function M8(...s){return r=>{s.forEach(e=>{typeof e=="function"?e(r):e!=null&&(e.current=r)})}}var I8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{I8&&(window.__reactRouterVersion="7.13.0")}catch{}function R8({basename:s,children:r,unstable_useTransitions:e,window:t}){let a=u.useRef();a.current==null&&(a.current=u7({window:t,v5Compat:!0}));let o=a.current,[i,l]=u.useState({action:o.action,location:o.location}),c=u.useCallback(d=>{e===!1?l(d):u.startTransition(()=>l(d))},[e]);return u.useLayoutEffect(()=>o.listen(c),[o,c]),u.createElement(c8,{basename:s,children:r,location:i.location,navigationType:i.action,navigator:o,unstable_useTransitions:e})}var $O=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zc=u.forwardRef(function({onClick:r,discover:e="render",prefetch:t="none",relative:a,reloadDocument:o,replace:i,state:l,target:c,to:d,preventScrollReset:p,viewTransition:h,unstable_defaultShouldRevalidate:g,...y},b){let{basename:v,unstable_useTransitions:w}=u.useContext(Tl),C=typeof d=="string"&&$O.test(d),k=OO(d,v);d=k.to;let N=W7(d,{relative:a}),[O,R,L]=T8(t,y),B=B8(d,{replace:i,state:l,target:c,preventScrollReset:p,relative:a,viewTransition:h,unstable_defaultShouldRevalidate:g,unstable_useTransitions:w});function G(z){r&&r(z),z.defaultPrevented||B(z)}let $=u.createElement("a",{...y,...L,href:k.absoluteURL||N,onClick:k.isExternal||o?r:G,ref:M8(b,R),target:c,"data-discover":!C&&e==="render"?"true":void 0});return O&&!C?u.createElement(u.Fragment,null,$,u.createElement(O8,{page:N})):$});Zc.displayName="Link";var D8=u.forwardRef(function({"aria-current":r="page",caseSensitive:e=!1,className:t="",end:a=!1,style:o,to:i,viewTransition:l,children:c,...d},p){let h=bx(i,{relative:d.relative}),g=Ri(),y=u.useContext(Uw),{navigator:b,basename:v}=u.useContext(Tl),w=y!=null&&H8(h)&&l===!0,C=b.encodeLocation?b.encodeLocation(h).pathname:h.pathname,k=g.pathname,N=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;e||(k=k.toLowerCase(),N=N?N.toLowerCase():null,C=C.toLowerCase()),N&&v&&(N=Xd(N,v)||N);const O=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let R=k===C||!a&&k.startsWith(C)&&k.charAt(O)==="/",L=N!=null&&(N===C||!a&&N.startsWith(C)&&N.charAt(C.length)==="/"),B={isActive:R,isPending:L,isTransitioning:w},G=R?r:void 0,$;typeof t=="function"?$=t(B):$=[t,R?"active":null,L?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let z=typeof o=="function"?o(B):o;return u.createElement(Zc,{...d,"aria-current":G,className:$,ref:p,style:z,to:i,viewTransition:l},typeof c=="function"?c(B):c)});D8.displayName="NavLink";var L8=u.forwardRef(({discover:s="render",fetcherKey:r,navigate:e,reloadDocument:t,replace:a,state:o,method:i=Mv,action:l,onSubmit:c,relative:d,preventScrollReset:p,viewTransition:h,unstable_defaultShouldRevalidate:g,...y},b)=>{let{unstable_useTransitions:v}=u.useContext(Tl),w=U8(),C=V8(l,{relative:d}),k=i.toLowerCase()==="get"?"get":"post",N=typeof l=="string"&&$O.test(l),O=R=>{if(c&&c(R),R.defaultPrevented)return;R.preventDefault();let L=R.nativeEvent.submitter,B=L?.getAttribute("formmethod")||i,G=()=>w(L||R.currentTarget,{fetcherKey:r,method:B,navigate:e,replace:a,state:o,relative:d,preventScrollReset:p,viewTransition:h,unstable_defaultShouldRevalidate:g});v&&e!==!1?u.startTransition(()=>G()):G()};return u.createElement("form",{ref:b,method:k,action:C,onSubmit:t?c:O,...y,"data-discover":!N&&s==="render"?"true":void 0})});L8.displayName="Form";function F8(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function UO(s){let r=u.useContext(Pm);return Ra(r,F8(s)),r}function B8(s,{target:r,replace:e,state:t,preventScrollReset:a,relative:o,viewTransition:i,unstable_defaultShouldRevalidate:l,unstable_useTransitions:c}={}){let d=dr(),p=Ri(),h=bx(s,{relative:o});return u.useCallback(g=>{if(m8(g,r)){g.preventDefault();let y=e!==void 0?e:Hy(p)===Hy(h),b=()=>d(s,{replace:y,state:t,preventScrollReset:a,relative:o,viewTransition:i,unstable_defaultShouldRevalidate:l});c?u.startTransition(()=>b()):b()}},[p,d,h,e,t,r,s,a,o,i,l,c])}function VO(s){lc(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let r=u.useRef(SS(s)),e=u.useRef(!1),t=Ri(),a=u.useMemo(()=>g8(t.search,e.current?null:r.current),[t.search]),o=dr(),i=u.useCallback((l,c)=>{const d=SS(typeof l=="function"?l(new URLSearchParams(a)):l);e.current=!0,o("?"+d,c)},[o,a]);return[a,i]}var z8=0,$8=()=>`__${String(++z8)}__`;function U8(){let{router:s}=UO("useSubmit"),{basename:r}=u.useContext(Tl),e=s8(),t=s.fetch,a=s.navigate;return u.useCallback(async(o,i={})=>{let{action:l,method:c,encType:d,formData:p,body:h}=v8(o,r);if(i.navigate===!1){let g=i.fetcherKey||$8();await t(g,e,i.action||l,{unstable_defaultShouldRevalidate:i.unstable_defaultShouldRevalidate,preventScrollReset:i.preventScrollReset,formData:p,body:h,formMethod:i.method||c,formEncType:i.encType||d,flushSync:i.flushSync})}else await a(i.action||l,{unstable_defaultShouldRevalidate:i.unstable_defaultShouldRevalidate,preventScrollReset:i.preventScrollReset,formData:p,body:h,formMethod:i.method||c,formEncType:i.encType||d,replace:i.replace,state:i.state,fromRouteId:e,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,a,r,e])}function V8(s,{relative:r}={}){let{basename:e}=u.useContext(Tl),t=u.useContext(fc);Ra(t,"useFormAction must be used inside a RouteContext");let[a]=t.matches.slice(-1),o={...bx(s||".",{relative:r})},i=Ri();if(s==null){o.search=i.search;let l=new URLSearchParams(o.search),c=l.getAll("index");if(c.some(p=>p==="")){l.delete("index"),c.filter(h=>h).forEach(h=>l.append("index",h));let p=l.toString();o.search=p?`?${p}`:""}}return(!s||s===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(o.pathname=o.pathname==="/"?e:Wd([e,o.pathname])),Hy(o)}function H8(s,{relative:r}={}){let e=u.useContext(AO);Ra(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:t}=UO("useViewTransitionState"),a=bx(s,{relative:r});if(!e.isTransitioning)return!1;let o=Xd(e.currentLocation.pathname,t)||e.currentLocation.pathname,i=Xd(e.nextLocation.pathname,t)||e.nextLocation.pathname;return sb(a.pathname,i)!=null||sb(a.pathname,o)!=null}var Hw=gO();const ev=Bw(Hw);function W8({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const HO=u.forwardRef(W8);function q8({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"}))}const lm=u.forwardRef(q8);function G8({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const gn=u.forwardRef(G8);function K8({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const ou=u.forwardRef(K8);function Y8({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const Z8=u.forwardRef(Y8);function X8({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const NS=u.forwardRef(X8);function Q8({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"}))}const g2=u.forwardRef(Q8);function J8({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18"}))}const cm=u.forwardRef(J8);function eF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7.5 7.5 3m0 0L12 7.5M7.5 3v13.5m13.5 0L16.5 21m0 0L12 16.5m4.5 4.5V7.5"}))}const y2=u.forwardRef(eF);function tF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const wx=u.forwardRef(tF);function rF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 21v-7.5a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 .75.75V21m-4.5 0H2.36m11.14 0H18m0 0h3.64m-1.39 0V9.349M3.75 21V9.349m0 0a3.001 3.001 0 0 0 3.75-.615A2.993 2.993 0 0 0 9.75 9.75c.896 0 1.7-.393 2.25-1.016a2.993 2.993 0 0 0 2.25 1.016c.896 0 1.7-.393 2.25-1.015a3.001 3.001 0 0 0 3.75.614m-16.5 0a3.004 3.004 0 0 1-.621-4.72l1.189-1.19A1.5 1.5 0 0 1 5.378 3h13.243a1.5 1.5 0 0 1 1.06.44l1.19 1.189a3 3 0 0 1-.621 4.72M6.75 18h3.75a.75.75 0 0 0 .75-.75V13.5a.75.75 0 0 0-.75-.75H6.75a.75.75 0 0 0-.75.75v3.75c0 .414.336.75.75.75Z"}))}const ab=u.forwardRef(rF);function nF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 15.75V18m-7.5-6.75h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V13.5Zm0 2.25h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V18Zm2.498-6.75h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V13.5Zm0 2.25h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V18Zm2.504-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5Zm0 2.25h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V18Zm2.498-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5ZM8.25 6h7.5v2.25h-7.5V6ZM12 2.25c-1.892 0-3.758.11-5.593.322C5.307 2.7 4.5 3.65 4.5 4.757V19.5a2.25 2.25 0 0 0 2.25 2.25h10.5a2.25 2.25 0 0 0 2.25-2.25V4.757c0-1.108-.806-2.057-1.907-2.185A48.507 48.507 0 0 0 12 2.25Z"}))}const sF=u.forwardRef(nF);function aF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"}))}const $1=u.forwardRef(aF);function oF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const Ww=u.forwardRef(oF);function iF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const WO=u.forwardRef(iF);function lF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))}const rp=u.forwardRef(lF);function cF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const dF=u.forwardRef(cF);function uF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const Hc=u.forwardRef(uF);function fF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const Ys=u.forwardRef(fF);function pF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const hF=u.forwardRef(pF);function mF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const As=u.forwardRef(mF);function gF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}const uf=u.forwardRef(gF);function yF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"}))}const Ch=u.forwardRef(yF);function xF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08M15.75 18.75v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5A3.375 3.375 0 0 0 6.375 7.5H5.25m11.9-3.664A2.251 2.251 0 0 0 15 2.25h-1.5a2.251 2.251 0 0 0-2.15 1.586m5.8 0c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75 7.5H4.875c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V16.5a9 9 0 0 0-9-9Z"}))}const vF=u.forwardRef(xF);function bF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9.75v6.75m0 0-3-3m3 3 3-3m-8.25 6a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"}))}const wF=u.forwardRef(bF);function jF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 6.75 22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3-4.5 16.5"}))}const x2=u.forwardRef(jF);function CF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const v2=u.forwardRef(CF);function SF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"}))}const ob=u.forwardRef(SF);function NF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"}))}const ed=u.forwardRef(NF);function kF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const b2=u.forwardRef(kF);function _F({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Qd=u.forwardRef(_F);function EF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"}))}const Jd=u.forwardRef(EF);function TF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 12.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 18.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5Z"}))}const w2=u.forwardRef(TF);function OF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const jx=u.forwardRef(OF);function PF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}const AF=u.forwardRef(PF);function MF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const Zu=u.forwardRef(MF);function IF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const RF=u.forwardRef(IF);function DF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const af=u.forwardRef(DF);function LF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 11.25v8.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5v-8.25M12 4.875A2.625 2.625 0 1 0 9.375 7.5H12m0-2.625V7.5m0-2.625A2.625 2.625 0 1 1 14.625 7.5H12m0 0V21m-8.625-9.75h18c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125h-18c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"}))}const qO=u.forwardRef(LF);function FF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"}))}const Do=u.forwardRef(FF);function BF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const GO=u.forwardRef(BF);function zF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Zm6-10.125a1.875 1.875 0 1 1-3.75 0 1.875 1.875 0 0 1 3.75 0Zm1.294 6.336a6.721 6.721 0 0 1-3.17.789 6.721 6.721 0 0 1-3.168-.789 3.376 3.376 0 0 1 6.338 0Z"}))}const KO=u.forwardRef(zF);function $F({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))}const Ps=u.forwardRef($F);function UF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m10.5 21 5.25-11.25L21 21m-9-3h7.5M3 5.621a48.474 48.474 0 0 1 6-.371m0 0c1.12 0 2.233.038 3.334.114M9 5.25V3m3.334 2.364C11.176 10.658 7.69 15.08 3 17.502m9.334-12.138c.896.061 1.785.147 2.666.257m-4.589 8.495a18.023 18.023 0 0 1-3.827-5.802"}))}const ib=u.forwardRef(UF);function VF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"}))}const HF=u.forwardRef(VF);function WF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const j2=u.forwardRef(WF);function qF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const no=u.forwardRef(qF);function GF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))}const kp=u.forwardRef(GF);function KF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.34 15.84c-.688-.06-1.386-.09-2.09-.09H7.5a4.5 4.5 0 1 1 0-9h.75c.704 0 1.402-.03 2.09-.09m0 9.18c.253.962.584 1.892.985 2.783.247.55.06 1.21-.463 1.511l-.657.38c-.551.318-1.26.117-1.527-.461a20.845 20.845 0 0 1-1.44-4.282m3.102.069a18.03 18.03 0 0 1-.59-4.59c0-1.586.205-3.124.59-4.59m0 9.18a23.848 23.848 0 0 1 8.835 2.535M10.34 6.66a23.847 23.847 0 0 0 8.835-2.535m0 0A23.74 23.74 0 0 0 18.795 3m.38 1.125a23.91 23.91 0 0 1 1.014 5.395m-1.014 8.855c-.118.38-.245.754-.38 1.125m.38-1.125a23.91 23.91 0 0 0 1.014-5.395m0-3.46c.495.413.811 1.035.811 1.73 0 .695-.316 1.317-.811 1.73m0-3.46a24.347 24.347 0 0 1 0 3.46"}))}const YF=u.forwardRef(KF);function ZF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9 9 10.5-3m0 6.553v3.75a2.25 2.25 0 0 1-1.632 2.163l-1.32.377a1.803 1.803 0 1 1-.99-3.467l2.31-.66a2.25 2.25 0 0 0 1.632-2.163Zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 0 1-1.632 2.163l-1.32.377a1.803 1.803 0 0 1-.99-3.467l2.31-.66A2.25 2.25 0 0 0 9 15.553Z"}))}const $5=u.forwardRef(ZF);function XF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))}const YO=u.forwardRef(XF);function QF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const Bo=u.forwardRef(QF);function JF({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"}))}const eB=u.forwardRef(JF);function tB({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const xl=u.forwardRef(tB);function rB({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const On=u.forwardRef(rB);function nB({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 6.087c0-.355.186-.676.401-.959.221-.29.349-.634.349-1.003 0-1.036-1.007-1.875-2.25-1.875s-2.25.84-2.25 1.875c0 .369.128.713.349 1.003.215.283.401.604.401.959v0a.64.64 0 0 1-.657.643 48.39 48.39 0 0 1-4.163-.3c.186 1.613.293 3.25.315 4.907a.656.656 0 0 1-.658.663v0c-.355 0-.676-.186-.959-.401a1.647 1.647 0 0 0-1.003-.349c-1.036 0-1.875 1.007-1.875 2.25s.84 2.25 1.875 2.25c.369 0 .713-.128 1.003-.349.283-.215.604-.401.959-.401v0c.31 0 .555.26.532.57a48.039 48.039 0 0 1-.642 5.056c1.518.19 3.058.309 4.616.354a.64.64 0 0 0 .657-.643v0c0-.355-.186-.676-.401-.959a1.647 1.647 0 0 1-.349-1.003c0-1.035 1.008-1.875 2.25-1.875 1.243 0 2.25.84 2.25 1.875 0 .369-.128.713-.349 1.003-.215.283-.4.604-.4.959v0c0 .333.277.599.61.58a48.1 48.1 0 0 0 5.427-.63 48.05 48.05 0 0 0 .582-4.717.532.532 0 0 0-.533-.57v0c-.355 0-.676.186-.959.401-.29.221-.634.349-1.003.349-1.035 0-1.875-1.007-1.875-2.25s.84-2.25 1.875-2.25c.37 0 .713.128 1.003.349.283.215.604.401.96.401v0a.656.656 0 0 0 .658-.663 48.422 48.422 0 0 0-.37-5.36c-1.886.342-3.81.574-5.766.689a.578.578 0 0 1-.61-.58v0Z"}))}const sB=u.forwardRef(nB);function aB({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"}))}const ZO=u.forwardRef(aB);function oB({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 9.75h4.875a2.625 2.625 0 0 1 0 5.25H12M8.25 9.75 10.5 7.5M8.25 9.75 10.5 12m9-7.243V21.75l-3.75-1.5-3.75 1.5-3.75-1.5-3.75 1.5V4.757c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0c1.1.128 1.907 1.077 1.907 2.185Z"}))}const iB=u.forwardRef(oB);function lB({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6.878V6a2.25 2.25 0 0 1 2.25-2.25h7.5A2.25 2.25 0 0 1 18 6v.878m-12 0c.235-.083.487-.128.75-.128h10.5c.263 0 .515.045.75.128m-12 0A2.25 2.25 0 0 0 4.5 9v.878m13.5-3A2.25 2.25 0 0 1 19.5 9v.878m0 0a2.246 2.246 0 0 0-.75-.128H5.25c-.263 0-.515.045-.75.128m15 0A2.25 2.25 0 0 1 21 12v6a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18v-6c0-.98.626-1.813 1.5-2.122"}))}const Cx=u.forwardRef(lB);function cB({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v17.25m0 0c-1.472 0-2.882.265-4.185.75M12 20.25c1.472 0 2.882.265 4.185.75M18.75 4.97A48.416 48.416 0 0 0 12 4.5c-2.291 0-4.545.16-6.75.47m13.5 0c1.01.143 2.01.317 3 .52m-3-.52 2.62 10.726c.122.499-.106 1.028-.589 1.202a5.988 5.988 0 0 1-2.031.352 5.988 5.988 0 0 1-2.031-.352c-.483-.174-.711-.703-.59-1.202L18.75 4.971Zm-16.5.52c.99-.203 1.99-.377 3-.52m0 0 2.62 10.726c.122.499-.106 1.028-.589 1.202a5.989 5.989 0 0 1-2.031.352 5.989 5.989 0 0 1-2.031-.352c-.483-.174-.711-.703-.59-1.202L5.25 4.971Z"}))}const dB=u.forwardRef(cB);function uB({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"}))}const fB=u.forwardRef(uB);function pB({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))}const C2=u.forwardRef(pB);function hB({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const qw=u.forwardRef(hB);function mB({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"}))}const Am=u.forwardRef(mB);function gB({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"}))}const Wy=u.forwardRef(gB);function yB({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"}))}const XO=u.forwardRef(yB);function xB({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.098 19.902a3.75 3.75 0 0 0 5.304 0l6.401-6.402M6.75 21A3.75 3.75 0 0 1 3 17.25V4.125C3 3.504 3.504 3 4.125 3h5.25c.621 0 1.125.504 1.125 1.125v4.072M6.75 21a3.75 3.75 0 0 0 3.75-3.75V8.197M6.75 21h13.125c.621 0 1.125-.504 1.125-1.125v-5.25c0-.621-.504-1.125-1.125-1.125h-4.072M10.5 8.197l2.88-2.88c.438-.439 1.15-.439 1.59 0l3.712 3.713c.44.44.44 1.152 0 1.59l-2.879 2.88M6.75 17.25h.008v.008H6.75v-.008Z"}))}const Ud=u.forwardRef(xB);function vB({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"}))}const _p=u.forwardRef(vB);function bB({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const Xs=u.forwardRef(bB);function wB({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"}))}const ff=u.forwardRef(wB);function jB({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const CB=u.forwardRef(jB);function SB({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const qy=u.forwardRef(SB);function NB({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const U5=u.forwardRef(NB);function kB({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const Gw=u.forwardRef(kB);function _B({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const QO=u.forwardRef(_B);function EB({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25h-9A2.25 2.25 0 0 0 2.25 7.5v9a2.25 2.25 0 0 0 2.25 2.25Z"}))}const U1=u.forwardRef(EB);function TB({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Zs=u.forwardRef(TB);var kS=function(s,r){return kS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])},kS(s,r)};function Sx(s,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");kS(s,r);function e(){this.constructor=s}s.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var Gy=function(){return Gy=Object.assign||function(r){for(var e,t=1,a=arguments.length;t<a;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}return r},Gy.apply(this,arguments)};function OB(s,r){r===void 0&&(r={});var e=r.insertAt;if(!(typeof document>"u")){var t=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",e==="top"&&t.firstChild?t.insertBefore(a,t.firstChild):t.appendChild(a),a.styleSheet?a.styleSheet.cssText=s:a.appendChild(document.createTextNode(s))}}var PB=`/*
  code is extracted from Calendly's embed stylesheet: https://assets.calendly.com/assets/external/widget.css
*/

.calendly-inline-widget,
.calendly-inline-widget *,
.calendly-badge-widget,
.calendly-badge-widget *,
.calendly-overlay,
.calendly-overlay * {
  font-size: 16px;
  line-height: 1.2em;
}

.calendly-inline-widget {
  min-width: 320px;
  height: 630px;
}

.calendly-inline-widget iframe,
.calendly-badge-widget iframe,
.calendly-overlay iframe {
  display: inline;
  width: 100%;
  height: 100%;
}

.calendly-popup-content {
  position: relative;
}

.calendly-popup-content.calendly-mobile {
  -webkit-overflow-scrolling: touch;
  overflow-y: auto;
}

.calendly-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  z-index: 9999;
  background-color: #a5a5a5;
  background-color: rgba(31, 31, 31, 0.4);
}

.calendly-overlay .calendly-close-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
}

.calendly-overlay .calendly-popup {
  box-sizing: border-box;
  position: absolute;
  top: 50%;
  left: 50%;
  -webkit-transform: translateY(-50%) translateX(-50%);
  transform: translateY(-50%) translateX(-50%);
  width: 80%;
  min-width: 900px;
  max-width: 1000px;
  height: 90%;
  max-height: 680px;
}

@media (max-width: 975px) {
  .calendly-overlay .calendly-popup {
    position: fixed;
    top: 50px;
    left: 0;
    right: 0;
    bottom: 0;
    -webkit-transform: none;
    transform: none;
    width: 100%;
    height: auto;
    min-width: 0;
    max-height: none;
  }
}

.calendly-overlay .calendly-popup .calendly-popup-content {
  height: 100%;
}

.calendly-overlay .calendly-popup-close {
  position: absolute;
  top: 25px;
  right: 25px;
  color: #fff;
  width: 19px;
  height: 19px;
  cursor: pointer;
  background: url(https://assets.calendly.com/assets/external/close-icon.svg)
    no-repeat;
  background-size: contain;
}

@media (max-width: 975px) {
  .calendly-overlay .calendly-popup-close {
    top: 15px;
    right: 15px;
  }
}

.calendly-badge-widget {
  position: fixed;
  right: 20px;
  bottom: 15px;
  z-index: 9998;
}

.calendly-badge-widget .calendly-badge-content {
  display: table-cell;
  width: auto;
  height: 45px;
  padding: 0 30px;
  border-radius: 25px;
  box-shadow: rgba(0, 0, 0, 0.25) 0 2px 5px;
  font-family: sans-serif;
  text-align: center;
  vertical-align: middle;
  font-weight: bold;
  font-size: 14px;
  color: #fff;
  cursor: pointer;
}

.calendly-badge-widget .calendly-badge-content.calendly-white {
  color: #666a73;
}

.calendly-badge-widget .calendly-badge-content span {
  display: block;
  font-size: 12px;
}

.calendly-spinner {
  position: absolute;
  top: 50%;
  left: 0;
  right: 0;
  -webkit-transform: translateY(-50%);
  transform: translateY(-50%);
  text-align: center;
  z-index: -1;
}

.calendly-spinner > div {
  display: inline-block;
  width: 18px;
  height: 18px;
  background-color: #e1e1e1;
  border-radius: 50%;
  vertical-align: middle;
  -webkit-animation: calendly-bouncedelay 1.4s infinite ease-in-out;
  animation: calendly-bouncedelay 1.4s infinite ease-in-out;
  -webkit-animation-fill-mode: both;
  animation-fill-mode: both;
}

.calendly-spinner .calendly-bounce1 {
  -webkit-animation-delay: -0.32s;
  animation-delay: -0.32s;
}

.calendly-spinner .calendly-bounce2 {
  -webkit-animation-delay: -0.16s;
  animation-delay: -0.16s;
}

@-webkit-keyframes calendly-bouncedelay {
  0%,
  80%,
  100% {
    -webkit-transform: scale(0);
    transform: scale(0);
  }

  40% {
    -webkit-transform: scale(1);
    transform: scale(1);
  }
}

@keyframes calendly-bouncedelay {
  0%,
  80%,
  100% {
    -webkit-transform: scale(0);
    transform: scale(0);
  }

  40% {
    -webkit-transform: scale(1);
    transform: scale(1);
  }
}
`;OB(PB);function V1(s){return s.charAt(0)==="#"?s.slice(1):s}function AB(s){return s?.primaryColor&&(s.primaryColor=V1(s.primaryColor)),s?.textColor&&(s.textColor=V1(s.textColor)),s?.backgroundColor&&(s.backgroundColor=V1(s.backgroundColor)),s}var V5;(function(s){s.PROFILE_PAGE_VIEWED="calendly.profile_page_viewed",s.EVENT_TYPE_VIEWED="calendly.event_type_viewed",s.DATE_AND_TIME_SELECTED="calendly.date_and_time_selected",s.EVENT_SCHEDULED="calendly.event_scheduled",s.PAGE_HEIGHT="calendly.page_height"})(V5||(V5={}));var JO=function(s){var r=s.url,e=s.prefill,t=e===void 0?{}:e,a=s.pageSettings,o=a===void 0?{}:a,i=s.utm,l=i===void 0?{}:i,c=s.embedType,d=AB(o),p=d.backgroundColor,h=d.hideEventTypeDetails,g=d.hideLandingPageDetails,y=d.primaryColor,b=d.textColor,v=d.hideGdprBanner,w=t.customAnswers,C=t.date,k=t.email,N=t.firstName,O=t.guests,R=t.lastName,L=t.location,B=t.name,G=l.utmCampaign,$=l.utmContent,z=l.utmMedium,Y=l.utmSource,M=l.utmTerm,q=l.salesforce_uuid,P=r.indexOf("?"),H=P>-1,D=r.slice(P+1),X=H?r.slice(0,P):r,se=[H?D:null,p?"background_color=".concat(p):null,h?"hide_event_type_details=1":null,g?"hide_landing_page_details=1":null,y?"primary_color=".concat(y):null,b?"text_color=".concat(b):null,v?"hide_gdpr_banner=1":null,B?"name=".concat(encodeURIComponent(B)):null,L?"location=".concat(encodeURIComponent(L)):null,N?"first_name=".concat(encodeURIComponent(N)):null,R?"last_name=".concat(encodeURIComponent(R)):null,O?"guests=".concat(O.map(encodeURIComponent).join(",")):null,k?"email=".concat(encodeURIComponent(k)):null,C&&C instanceof Date?"date=".concat(MB(C)):null,G?"utm_campaign=".concat(encodeURIComponent(G)):null,$?"utm_content=".concat(encodeURIComponent($)):null,z?"utm_medium=".concat(encodeURIComponent(z)):null,Y?"utm_source=".concat(encodeURIComponent(Y)):null,M?"utm_term=".concat(encodeURIComponent(M)):null,q?"salesforce_uuid=".concat(encodeURIComponent(q)):null,c?"embed_type=".concat(c):null,"embed_domain=1"].concat(w?RB(w):[]).filter(function(Q){return Q!==null}).join("&");return"".concat(X,"?").concat(se)},MB=function(s){var r=s.getMonth()+1,e=s.getDate(),t=s.getFullYear();return[t,r<10?"0".concat(r):r,e<10?"0".concat(e):e].join("-")},IB=/^a\d{1,2}$/,RB=function(s){var r=Object.keys(s).filter(function(e){return e.match(IB)});return r.length?r.map(function(e){return"".concat(e,"=").concat(encodeURIComponent(s[e]))}):[]},eP=(function(s){Sx(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.render=function(){return u.createElement("div",{className:"calendly-spinner"},u.createElement("div",{className:"calendly-bounce1"}),u.createElement("div",{className:"calendly-bounce2"}),u.createElement("div",{className:"calendly-bounce3"}))},r})(u.Component),DB="calendly-inline-widget",LB=(function(s){Sx(r,s);function r(e){var t=s.call(this,e)||this;return t.state={isLoading:!0},t.onLoad=t.onLoad.bind(t),t}return r.prototype.onLoad=function(){this.setState({isLoading:!1})},r.prototype.render=function(){var e=JO({url:this.props.url,pageSettings:this.props.pageSettings,prefill:this.props.prefill,utm:this.props.utm,embedType:"Inline"}),t=this.props.LoadingSpinner||eP;return u.createElement("div",{className:this.props.className||DB,style:this.props.styles||{}},this.state.isLoading&&u.createElement(t,null),u.createElement("iframe",{width:"100%",height:"100%",frameBorder:"0",title:this.props.iframeTitle||"Calendly Scheduling Page",onLoad:this.onLoad,src:e}))},r})(u.Component),FB=(function(s){Sx(r,s);function r(e){var t=s.call(this,e)||this;return t.state={isLoading:!0},t.onLoad=t.onLoad.bind(t),t}return r.prototype.onLoad=function(){this.setState({isLoading:!1})},r.prototype.render=function(){var e=JO({url:this.props.url,pageSettings:this.props.pageSettings,prefill:this.props.prefill,utm:this.props.utm,embedType:"Inline"}),t=this.props.LoadingSpinner||eP;return u.createElement(u.Fragment,null,this.state.isLoading&&u.createElement(t,null),u.createElement("iframe",{width:"100%",height:"100%",frameBorder:"0",title:this.props.iframeTitle||"Calendly Scheduling Page",onLoad:this.onLoad,src:e}))},r})(u.Component),tP=(function(s){if(!s.open)return null;if(!s.rootElement)throw new Error("[react-calendly]: PopupModal rootElement property cannot be undefined");return Hw.createPortal(u.createElement("div",{className:"calendly-overlay"},u.createElement("div",{onClick:s.onModalClose,className:"calendly-close-overlay"}),u.createElement("div",{className:"calendly-popup"},u.createElement("div",{className:"calendly-popup-content"},u.createElement(FB,Gy({},s)))),u.createElement("button",{className:"calendly-popup-close",onClick:s.onModalClose,"aria-label":"Close modal",style:{display:"block",border:"none",padding:0}})),s.rootElement)});(function(s){Sx(r,s);function r(e){var t=s.call(this,e)||this;return t.state={isOpen:!1},t.onClick=t.onClick.bind(t),t.onClose=t.onClose.bind(t),t}return r.prototype.onClick=function(e){e.preventDefault(),this.setState({isOpen:!0})},r.prototype.onClose=function(e){e.stopPropagation(),this.setState({isOpen:!1})},r.prototype.render=function(){return u.createElement(u.Fragment,null,u.createElement("button",{onClick:this.onClick,style:this.props.styles||{},className:this.props.className||""},this.props.text),u.createElement(tP,Gy({},this.props,{open:this.state.isOpen,onModalClose:this.onClose,rootElement:this.props.rootElement})))},r})(u.Component);(function(s){Sx(r,s);function r(e){var t=s.call(this,e)||this;return t.state={isOpen:!1},t.onClick=t.onClick.bind(t),t.onClose=t.onClose.bind(t),t}return r.prototype.onClick=function(){this.setState({isOpen:!0})},r.prototype.onClose=function(e){e.stopPropagation(),this.setState({isOpen:!1})},r.prototype.render=function(){return u.createElement("div",{className:"calendly-badge-widget",onClick:this.onClick},u.createElement("div",{className:"calendly-badge-content",style:{background:this.props.color||"#00a2ff",color:this.props.textColor||"#ffffff"}},this.props.text||"Schedule time with me",this.props.branding&&u.createElement("span",null,"powered by Calendly")),u.createElement(tP,Gy({},this.props,{open:this.state.isOpen,onModalClose:this.onClose,rootElement:this.props.rootElement})))},r})(u.Component);const td=Object.create(null);td.open="0";td.close="1";td.ping="2";td.pong="3";td.message="4";td.upgrade="5";td.noop="6";const Rv=Object.create(null);Object.keys(td).forEach(s=>{Rv[td[s]]=s});const _S={type:"error",data:"parser error"},rP=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",nP=typeof ArrayBuffer=="function",sP=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer,S2=({type:s,data:r},e,t)=>rP&&r instanceof Blob?e?t(r):H5(r,t):nP&&(r instanceof ArrayBuffer||sP(r))?e?t(r):H5(new Blob([r]),t):t(td[s]+(r||"")),H5=(s,r)=>{const e=new FileReader;return e.onload=function(){const t=e.result.split(",")[1];r("b"+(t||""))},e.readAsDataURL(s)};function W5(s){return s instanceof Uint8Array?s:s instanceof ArrayBuffer?new Uint8Array(s):new Uint8Array(s.buffer,s.byteOffset,s.byteLength)}let H1;function BB(s,r){if(rP&&s.data instanceof Blob)return s.data.arrayBuffer().then(W5).then(r);if(nP&&(s.data instanceof ArrayBuffer||sP(s.data)))return r(W5(s.data));S2(s,!1,e=>{H1||(H1=new TextEncoder),r(H1.encode(e))})}const q5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",my=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let s=0;s<q5.length;s++)my[q5.charCodeAt(s)]=s;const zB=s=>{let r=s.length*.75,e=s.length,t,a=0,o,i,l,c;s[s.length-1]==="="&&(r--,s[s.length-2]==="="&&r--);const d=new ArrayBuffer(r),p=new Uint8Array(d);for(t=0;t<e;t+=4)o=my[s.charCodeAt(t)],i=my[s.charCodeAt(t+1)],l=my[s.charCodeAt(t+2)],c=my[s.charCodeAt(t+3)],p[a++]=o<<2|i>>4,p[a++]=(i&15)<<4|l>>2,p[a++]=(l&3)<<6|c&63;return d},$B=typeof ArrayBuffer=="function",N2=(s,r)=>{if(typeof s!="string")return{type:"message",data:aP(s,r)};const e=s.charAt(0);return e==="b"?{type:"message",data:UB(s.substring(1),r)}:Rv[e]?s.length>1?{type:Rv[e],data:s.substring(1)}:{type:Rv[e]}:_S},UB=(s,r)=>{if($B){const e=zB(s);return aP(e,r)}else return{base64:!0,data:s}},aP=(s,r)=>r==="blob"?s instanceof Blob?s:new Blob([s]):s instanceof ArrayBuffer?s:s.buffer,oP="",VB=(s,r)=>{const e=s.length,t=new Array(e);let a=0;s.forEach((o,i)=>{S2(o,!1,l=>{t[i]=l,++a===e&&r(t.join(oP))})})},HB=(s,r)=>{const e=s.split(oP),t=[];for(let a=0;a<e.length;a++){const o=N2(e[a],r);if(t.push(o),o.type==="error")break}return t};function WB(){return new TransformStream({transform(s,r){BB(s,e=>{const t=e.length;let a;if(t<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,t);else if(t<65536){a=new Uint8Array(3);const o=new DataView(a.buffer);o.setUint8(0,126),o.setUint16(1,t)}else{a=new Uint8Array(9);const o=new DataView(a.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(t))}s.data&&typeof s.data!="string"&&(a[0]|=128),r.enqueue(a),r.enqueue(e)})}})}let W1;function tv(s){return s.reduce((r,e)=>r+e.length,0)}function rv(s,r){if(s[0].length===r)return s.shift();const e=new Uint8Array(r);let t=0;for(let a=0;a<r;a++)e[a]=s[0][t++],t===s[0].length&&(s.shift(),t=0);return s.length&&t<s[0].length&&(s[0]=s[0].slice(t)),e}function qB(s,r){W1||(W1=new TextDecoder);const e=[];let t=0,a=-1,o=!1;return new TransformStream({transform(i,l){for(e.push(i);;){if(t===0){if(tv(e)<1)break;const c=rv(e,1);o=(c[0]&128)===128,a=c[0]&127,a<126?t=3:a===126?t=1:t=2}else if(t===1){if(tv(e)<2)break;const c=rv(e,2);a=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),t=3}else if(t===2){if(tv(e)<8)break;const c=rv(e,8),d=new DataView(c.buffer,c.byteOffset,c.length),p=d.getUint32(0);if(p>Math.pow(2,21)-1){l.enqueue(_S);break}a=p*Math.pow(2,32)+d.getUint32(4),t=3}else{if(tv(e)<a)break;const c=rv(e,a);l.enqueue(N2(o?c:W1.decode(c),r)),t=0}if(a===0||a>s){l.enqueue(_S);break}}}})}const iP=4;function ro(s){if(s)return GB(s)}function GB(s){for(var r in ro.prototype)s[r]=ro.prototype[r];return s}ro.prototype.on=ro.prototype.addEventListener=function(s,r){return this._callbacks=this._callbacks||{},(this._callbacks["$"+s]=this._callbacks["$"+s]||[]).push(r),this};ro.prototype.once=function(s,r){function e(){this.off(s,e),r.apply(this,arguments)}return e.fn=r,this.on(s,e),this};ro.prototype.off=ro.prototype.removeListener=ro.prototype.removeAllListeners=ro.prototype.removeEventListener=function(s,r){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+s];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+s],this;for(var t,a=0;a<e.length;a++)if(t=e[a],t===r||t.fn===r){e.splice(a,1);break}return e.length===0&&delete this._callbacks["$"+s],this};ro.prototype.emit=function(s){this._callbacks=this._callbacks||{};for(var r=new Array(arguments.length-1),e=this._callbacks["$"+s],t=1;t<arguments.length;t++)r[t-1]=arguments[t];if(e){e=e.slice(0);for(var t=0,a=e.length;t<a;++t)e[t].apply(this,r)}return this};ro.prototype.emitReserved=ro.prototype.emit;ro.prototype.listeners=function(s){return this._callbacks=this._callbacks||{},this._callbacks["$"+s]||[]};ro.prototype.hasListeners=function(s){return!!this.listeners(s).length};const Kw=typeof Promise=="function"&&typeof Promise.resolve=="function"?r=>Promise.resolve().then(r):(r,e)=>e(r,0),vl=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),KB="arraybuffer";function lP(s,...r){return r.reduce((e,t)=>(s.hasOwnProperty(t)&&(e[t]=s[t]),e),{})}const YB=vl.setTimeout,ZB=vl.clearTimeout;function Yw(s,r){r.useNativeTimers?(s.setTimeoutFn=YB.bind(vl),s.clearTimeoutFn=ZB.bind(vl)):(s.setTimeoutFn=vl.setTimeout.bind(vl),s.clearTimeoutFn=vl.clearTimeout.bind(vl))}const XB=1.33;function QB(s){return typeof s=="string"?JB(s):Math.ceil((s.byteLength||s.size)*XB)}function JB(s){let r=0,e=0;for(let t=0,a=s.length;t<a;t++)r=s.charCodeAt(t),r<128?e+=1:r<2048?e+=2:r<55296||r>=57344?e+=3:(t++,e+=4);return e}function cP(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function ez(s){let r="";for(let e in s)s.hasOwnProperty(e)&&(r.length&&(r+="&"),r+=encodeURIComponent(e)+"="+encodeURIComponent(s[e]));return r}function tz(s){let r={},e=s.split("&");for(let t=0,a=e.length;t<a;t++){let o=e[t].split("=");r[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return r}class rz extends Error{constructor(r,e,t){super(r),this.description=e,this.context=t,this.type="TransportError"}}class k2 extends ro{constructor(r){super(),this.writable=!1,Yw(this,r),this.opts=r,this.query=r.query,this.socket=r.socket,this.supportsBinary=!r.forceBase64}onError(r,e,t){return super.emitReserved("error",new rz(r,e,t)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(r){this.readyState==="open"&&this.write(r)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(r){const e=N2(r,this.socket.binaryType);this.onPacket(e)}onPacket(r){super.emitReserved("packet",r)}onClose(r){this.readyState="closed",super.emitReserved("close",r)}pause(r){}createUri(r,e={}){return r+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){const r=this.opts.hostname;return r.indexOf(":")===-1?r:"["+r+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(r){const e=ez(r);return e.length?"?"+e:""}}class nz extends k2{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(r){this.readyState="pausing";const e=()=>{this.readyState="paused",r()};if(this._polling||!this.writable){let t=0;this._polling&&(t++,this.once("pollComplete",function(){--t||e()})),this.writable||(t++,this.once("drain",function(){--t||e()}))}else e()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(r){const e=t=>{if(this.readyState==="opening"&&t.type==="open"&&this.onOpen(),t.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(t)};HB(r,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const r=()=>{this.write([{type:"close"}])};this.readyState==="open"?r():this.once("open",r)}write(r){this.writable=!1,VB(r,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const r=this.opts.secure?"https":"http",e=this.query||{};return this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=cP()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.createUri(r,e)}}let dP=!1;try{dP=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const sz=dP;function az(){}class oz extends nz{constructor(r){if(super(r),typeof location<"u"){const e=location.protocol==="https:";let t=location.port;t||(t=e?"443":"80"),this.xd=typeof location<"u"&&r.hostname!==location.hostname||t!==r.port}}doWrite(r,e){const t=this.request({method:"POST",data:r});t.on("success",e),t.on("error",(a,o)=>{this.onError("xhr post error",a,o)})}doPoll(){const r=this.request();r.on("data",this.onData.bind(this)),r.on("error",(e,t)=>{this.onError("xhr poll error",e,t)}),this.pollXhr=r}}class Xc extends ro{constructor(r,e,t){super(),this.createRequest=r,Yw(this,t),this._opts=t,this._method=t.method||"GET",this._uri=e,this._data=t.data!==void 0?t.data:null,this._create()}_create(){var r;const e=lP(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this._opts.xd;const t=this._xhr=this.createRequest(e);try{t.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&t.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{t.setRequestHeader("Accept","*/*")}catch{}(r=this._opts.cookieJar)===null||r===void 0||r.addCookies(t),"withCredentials"in t&&(t.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(t.timeout=this._opts.requestTimeout),t.onreadystatechange=()=>{var a;t.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(t.getResponseHeader("set-cookie"))),t.readyState===4&&(t.status===200||t.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof t.status=="number"?t.status:0)},0))},t.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=Xc.requestsCount++,Xc.requests[this._index]=this)}_onError(r){this.emitReserved("error",r,this._xhr),this._cleanup(!0)}_cleanup(r){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=az,r)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Xc.requests[this._index],this._xhr=null}}_onLoad(){const r=this._xhr.responseText;r!==null&&(this.emitReserved("data",r),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Xc.requestsCount=0;Xc.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",G5);else if(typeof addEventListener=="function"){const s="onpagehide"in vl?"pagehide":"unload";addEventListener(s,G5,!1)}}function G5(){for(let s in Xc.requests)Xc.requests.hasOwnProperty(s)&&Xc.requests[s].abort()}const iz=(function(){const s=uP({xdomain:!1});return s&&s.responseType!==null})();class lz extends oz{constructor(r){super(r);const e=r&&r.forceBase64;this.supportsBinary=iz&&!e}request(r={}){return Object.assign(r,{xd:this.xd},this.opts),new Xc(uP,this.uri(),r)}}function uP(s){const r=s.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!r||sz))return new XMLHttpRequest}catch{}if(!r)try{return new vl[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const fP=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class cz extends k2{get name(){return"websocket"}doOpen(){const r=this.uri(),e=this.opts.protocols,t=fP?{}:lP(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(t.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(r,e,t)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=r=>this.onClose({description:"websocket connection closed",context:r}),this.ws.onmessage=r=>this.onData(r.data),this.ws.onerror=r=>this.onError("websocket error",r)}write(r){this.writable=!1;for(let e=0;e<r.length;e++){const t=r[e],a=e===r.length-1;S2(t,this.supportsBinary,o=>{try{this.doWrite(t,o)}catch{}a&&Kw(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const r=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=cP()),this.supportsBinary||(e.b64=1),this.createUri(r,e)}}const q1=vl.WebSocket||vl.MozWebSocket;class dz extends cz{createSocket(r,e,t){return fP?new q1(r,e,t):e?new q1(r,e):new q1(r)}doWrite(r,e){this.ws.send(e)}}class uz extends k2{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(r){return this.emitReserved("error",r)}this._transport.closed.then(()=>{this.onClose()}).catch(r=>{this.onError("webtransport error",r)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(r=>{const e=qB(Number.MAX_SAFE_INTEGER,this.socket.binaryType),t=r.readable.pipeThrough(e).getReader(),a=WB();a.readable.pipeTo(r.writable),this._writer=a.writable.getWriter();const o=()=>{t.read().then(({done:l,value:c})=>{l||(this.onPacket(c),o())}).catch(l=>{})};o();const i={type:"open"};this.query.sid&&(i.data=`{"sid":"${this.query.sid}"}`),this._writer.write(i).then(()=>this.onOpen())})})}write(r){this.writable=!1;for(let e=0;e<r.length;e++){const t=r[e],a=e===r.length-1;this._writer.write(t).then(()=>{a&&Kw(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var r;(r=this._transport)===null||r===void 0||r.close()}}const fz={websocket:dz,webtransport:uz,polling:lz},pz=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,hz=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function ES(s){if(s.length>8e3)throw"URI too long";const r=s,e=s.indexOf("["),t=s.indexOf("]");e!=-1&&t!=-1&&(s=s.substring(0,e)+s.substring(e,t).replace(/:/g,";")+s.substring(t,s.length));let a=pz.exec(s||""),o={},i=14;for(;i--;)o[hz[i]]=a[i]||"";return e!=-1&&t!=-1&&(o.source=r,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=mz(o,o.path),o.queryKey=gz(o,o.query),o}function mz(s,r){const e=/\/{2,9}/g,t=r.replace(e,"/").split("/");return(r.slice(0,1)=="/"||r.length===0)&&t.splice(0,1),r.slice(-1)=="/"&&t.splice(t.length-1,1),t}function gz(s,r){const e={};return r.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(t,a,o){a&&(e[a]=o)}),e}const TS=typeof addEventListener=="function"&&typeof removeEventListener=="function",Dv=[];TS&&addEventListener("offline",()=>{Dv.forEach(s=>s())},!1);class Xu extends ro{constructor(r,e){if(super(),this.binaryType=KB,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,r&&typeof r=="object"&&(e=r,r=null),r){const t=ES(r);e.hostname=t.host,e.secure=t.protocol==="https"||t.protocol==="wss",e.port=t.port,t.query&&(e.query=t.query)}else e.host&&(e.hostname=ES(e.host).host);Yw(this,e),this.secure=e.secure!=null?e.secure:typeof location<"u"&&location.protocol==="https:",e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=e.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},e.transports.forEach(t=>{const a=t.prototype.name;this.transports.push(a),this._transportsByName[a]=t}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},e),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=tz(this.opts.query)),TS&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Dv.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(r){const e=Object.assign({},this.opts.query);e.EIO=iP,e.transport=r,this.id&&(e.sid=this.id);const t=Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[r]);return new this._transportsByName[r](t)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const r=this.opts.rememberUpgrade&&Xu.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const e=this.createTransport(r);e.open(),this.setTransport(e)}setTransport(r){this.transport&&this.transport.removeAllListeners(),this.transport=r,r.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",Xu.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",r),this.emitReserved("heartbeat"),r.type){case"open":this.onHandshake(JSON.parse(r.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const e=new Error("server error");e.code=r.data,this._onError(e);break;case"message":this.emitReserved("data",r.data),this.emitReserved("message",r.data);break}}onHandshake(r){this.emitReserved("handshake",r),this.id=r.sid,this.transport.query.sid=r.sid,this._pingInterval=r.pingInterval,this._pingTimeout=r.pingTimeout,this._maxPayload=r.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const r=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+r,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},r),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const r=this._getWritablePackets();this.transport.send(r),this._prevBufferLen=r.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let t=0;t<this.writeBuffer.length;t++){const a=this.writeBuffer[t].data;if(a&&(e+=QB(a)),t>0&&e>this._maxPayload)return this.writeBuffer.slice(0,t);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const r=Date.now()>this._pingTimeoutTime;return r&&(this._pingTimeoutTime=0,Kw(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),r}write(r,e,t){return this._sendPacket("message",r,e,t),this}send(r,e,t){return this._sendPacket("message",r,e,t),this}_sendPacket(r,e,t,a){if(typeof e=="function"&&(a=e,e=void 0),typeof t=="function"&&(a=t,t=null),this.readyState==="closing"||this.readyState==="closed")return;t=t||{},t.compress=t.compress!==!1;const o={type:r,data:e,options:t};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),a&&this.once("flush",a),this.flush()}close(){const r=()=>{this._onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),r()},t=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?t():r()}):this.upgrading?t():r()),this}_onError(r){if(Xu.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",r),this._onClose("transport error",r)}_onClose(r,e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),TS&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const t=Dv.indexOf(this._offlineEventListener);t!==-1&&Dv.splice(t,1)}this.readyState="closed",this.id=null,this.emitReserved("close",r,e),this.writeBuffer=[],this._prevBufferLen=0}}}Xu.protocol=iP;class yz extends Xu{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let r=0;r<this._upgrades.length;r++)this._probe(this._upgrades[r])}_probe(r){let e=this.createTransport(r),t=!1;Xu.priorWebsocketSuccess=!1;const a=()=>{t||(e.send([{type:"ping",data:"probe"}]),e.once("packet",h=>{if(!t)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;Xu.priorWebsocketSuccess=e.name==="websocket",this.transport.pause(()=>{t||this.readyState!=="closed"&&(p(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{const g=new Error("probe error");g.transport=e.name,this.emitReserved("upgradeError",g)}}))};function o(){t||(t=!0,p(),e.close(),e=null)}const i=h=>{const g=new Error("probe error: "+h);g.transport=e.name,o(),this.emitReserved("upgradeError",g)};function l(){i("transport closed")}function c(){i("socket closed")}function d(h){e&&h.name!==e.name&&o()}const p=()=>{e.removeListener("open",a),e.removeListener("error",i),e.removeListener("close",l),this.off("close",c),this.off("upgrading",d)};e.once("open",a),e.once("error",i),e.once("close",l),this.once("close",c),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&r!=="webtransport"?this.setTimeoutFn(()=>{t||e.open()},200):e.open()}onHandshake(r){this._upgrades=this._filterUpgrades(r.upgrades),super.onHandshake(r)}_filterUpgrades(r){const e=[];for(let t=0;t<r.length;t++)~this.transports.indexOf(r[t])&&e.push(r[t]);return e}}let xz=class extends yz{constructor(r,e={}){const t=typeof r=="object"?r:e;(!t.transports||t.transports&&typeof t.transports[0]=="string")&&(t.transports=(t.transports||["polling","websocket","webtransport"]).map(a=>fz[a]).filter(a=>!!a)),super(r,t)}};function vz(s,r="",e){let t=s;e=e||typeof location<"u"&&location,s==null&&(s=e.protocol+"//"+e.host),typeof s=="string"&&(s.charAt(0)==="/"&&(s.charAt(1)==="/"?s=e.protocol+s:s=e.host+s),/^(https?|wss?):\/\//.test(s)||(typeof e<"u"?s=e.protocol+"//"+s:s="https://"+s),t=ES(s)),t.port||(/^(http|ws)$/.test(t.protocol)?t.port="80":/^(http|ws)s$/.test(t.protocol)&&(t.port="443")),t.path=t.path||"/";const o=t.host.indexOf(":")!==-1?"["+t.host+"]":t.host;return t.id=t.protocol+"://"+o+":"+t.port+r,t.href=t.protocol+"://"+o+(e&&e.port===t.port?"":":"+t.port),t}const bz=typeof ArrayBuffer=="function",wz=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s.buffer instanceof ArrayBuffer,pP=Object.prototype.toString,jz=typeof Blob=="function"||typeof Blob<"u"&&pP.call(Blob)==="[object BlobConstructor]",Cz=typeof File=="function"||typeof File<"u"&&pP.call(File)==="[object FileConstructor]";function _2(s){return bz&&(s instanceof ArrayBuffer||wz(s))||jz&&s instanceof Blob||Cz&&s instanceof File}function Lv(s,r){if(!s||typeof s!="object")return!1;if(Array.isArray(s)){for(let e=0,t=s.length;e<t;e++)if(Lv(s[e]))return!0;return!1}if(_2(s))return!0;if(s.toJSON&&typeof s.toJSON=="function"&&arguments.length===1)return Lv(s.toJSON(),!0);for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e)&&Lv(s[e]))return!0;return!1}function Sz(s){const r=[],e=s.data,t=s;return t.data=OS(e,r),t.attachments=r.length,{packet:t,buffers:r}}function OS(s,r){if(!s)return s;if(_2(s)){const e={_placeholder:!0,num:r.length};return r.push(s),e}else if(Array.isArray(s)){const e=new Array(s.length);for(let t=0;t<s.length;t++)e[t]=OS(s[t],r);return e}else if(typeof s=="object"&&!(s instanceof Date)){const e={};for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&(e[t]=OS(s[t],r));return e}return s}function Nz(s,r){return s.data=PS(s.data,r),delete s.attachments,s}function PS(s,r){if(!s)return s;if(s&&s._placeholder===!0){if(typeof s.num=="number"&&s.num>=0&&s.num<r.length)return r[s.num];throw new Error("illegal attachments")}else if(Array.isArray(s))for(let e=0;e<s.length;e++)s[e]=PS(s[e],r);else if(typeof s=="object")for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&(s[e]=PS(s[e],r));return s}const kz=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];var us;(function(s){s[s.CONNECT=0]="CONNECT",s[s.DISCONNECT=1]="DISCONNECT",s[s.EVENT=2]="EVENT",s[s.ACK=3]="ACK",s[s.CONNECT_ERROR=4]="CONNECT_ERROR",s[s.BINARY_EVENT=5]="BINARY_EVENT",s[s.BINARY_ACK=6]="BINARY_ACK"})(us||(us={}));class _z{constructor(r){this.replacer=r}encode(r){return(r.type===us.EVENT||r.type===us.ACK)&&Lv(r)?this.encodeAsBinary({type:r.type===us.EVENT?us.BINARY_EVENT:us.BINARY_ACK,nsp:r.nsp,data:r.data,id:r.id}):[this.encodeAsString(r)]}encodeAsString(r){let e=""+r.type;return(r.type===us.BINARY_EVENT||r.type===us.BINARY_ACK)&&(e+=r.attachments+"-"),r.nsp&&r.nsp!=="/"&&(e+=r.nsp+","),r.id!=null&&(e+=r.id),r.data!=null&&(e+=JSON.stringify(r.data,this.replacer)),e}encodeAsBinary(r){const e=Sz(r),t=this.encodeAsString(e.packet),a=e.buffers;return a.unshift(t),a}}class E2 extends ro{constructor(r){super(),this.reviver=r}add(r){let e;if(typeof r=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(r);const t=e.type===us.BINARY_EVENT;t||e.type===us.BINARY_ACK?(e.type=t?us.EVENT:us.ACK,this.reconstructor=new Ez(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else if(_2(r)||r.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(r),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+r)}decodeString(r){let e=0;const t={type:Number(r.charAt(0))};if(us[t.type]===void 0)throw new Error("unknown packet type "+t.type);if(t.type===us.BINARY_EVENT||t.type===us.BINARY_ACK){const o=e+1;for(;r.charAt(++e)!=="-"&&e!=r.length;);const i=r.substring(o,e);if(i!=Number(i)||r.charAt(e)!=="-")throw new Error("Illegal attachments");t.attachments=Number(i)}if(r.charAt(e+1)==="/"){const o=e+1;for(;++e&&!(r.charAt(e)===","||e===r.length););t.nsp=r.substring(o,e)}else t.nsp="/";const a=r.charAt(e+1);if(a!==""&&Number(a)==a){const o=e+1;for(;++e;){const i=r.charAt(e);if(i==null||Number(i)!=i){--e;break}if(e===r.length)break}t.id=Number(r.substring(o,e+1))}if(r.charAt(++e)){const o=this.tryParse(r.substr(e));if(E2.isPayloadValid(t.type,o))t.data=o;else throw new Error("invalid payload")}return t}tryParse(r){try{return JSON.parse(r,this.reviver)}catch{return!1}}static isPayloadValid(r,e){switch(r){case us.CONNECT:return K5(e);case us.DISCONNECT:return e===void 0;case us.CONNECT_ERROR:return typeof e=="string"||K5(e);case us.EVENT:case us.BINARY_EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&kz.indexOf(e[0])===-1);case us.ACK:case us.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Ez{constructor(r){this.packet=r,this.buffers=[],this.reconPack=r}takeBinaryData(r){if(this.buffers.push(r),this.buffers.length===this.reconPack.attachments){const e=Nz(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function K5(s){return Object.prototype.toString.call(s)==="[object Object]"}const Tz=Object.freeze(Object.defineProperty({__proto__:null,Decoder:E2,Encoder:_z,get PacketType(){return us}},Symbol.toStringTag,{value:"Module"}));function tc(s,r,e){return s.on(r,e),function(){s.off(r,e)}}const Oz=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class hP extends ro{constructor(r,e,t){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=r,this.nsp=e,t&&t.auth&&(this.auth=t.auth),this._opts=Object.assign({},t),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const r=this.io;this.subs=[tc(r,"open",this.onopen.bind(this)),tc(r,"packet",this.onpacket.bind(this)),tc(r,"error",this.onerror.bind(this)),tc(r,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...r){return r.unshift("message"),this.emit.apply(this,r),this}emit(r,...e){var t,a,o;if(Oz.hasOwnProperty(r))throw new Error('"'+r.toString()+'" is a reserved event name');if(e.unshift(r),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;const i={type:us.EVENT,data:e};if(i.options={},i.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){const p=this.ids++,h=e.pop();this._registerAckCallback(p,h),i.id=p}const l=(a=(t=this.io.engine)===null||t===void 0?void 0:t.transport)===null||a===void 0?void 0:a.writable,c=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(r,e){var t;const a=(t=this.flags.timeout)!==null&&t!==void 0?t:this._opts.ackTimeout;if(a===void 0){this.acks[r]=e;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[r];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===r&&this.sendBuffer.splice(l,1);e.call(this,new Error("operation has timed out"))},a),i=(...l)=>{this.io.clearTimeoutFn(o),e.apply(this,l)};i.withError=!0,this.acks[r]=i}emitWithAck(r,...e){return new Promise((t,a)=>{const o=(i,l)=>i?a(i):t(l);o.withError=!0,e.push(o),this.emit(r,...e)})}_addToQueue(r){let e;typeof r[r.length-1]=="function"&&(e=r.pop());const t={id:this._queueSeq++,tryCount:0,pending:!1,args:r,flags:Object.assign({fromQueue:!0},this.flags)};r.push((a,...o)=>(this._queue[0],a!==null?t.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(a)):(this._queue.shift(),e&&e(null,...o)),t.pending=!1,this._drainQueue())),this._queue.push(t),this._drainQueue()}_drainQueue(r=!1){if(!this.connected||this._queue.length===0)return;const e=this._queue[0];e.pending&&!r||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(r){r.nsp=this.nsp,this.io._packet(r)}onopen(){typeof this.auth=="function"?this.auth(r=>{this._sendConnectPacket(r)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(r){this.packet({type:us.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},r):r})}onerror(r){this.connected||this.emitReserved("connect_error",r)}onclose(r,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",r,e),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(r=>{if(!this.sendBuffer.some(t=>String(t.id)===r)){const t=this.acks[r];delete this.acks[r],t.withError&&t.call(this,new Error("socket has been disconnected"))}})}onpacket(r){if(r.nsp===this.nsp)switch(r.type){case us.CONNECT:r.data&&r.data.sid?this.onconnect(r.data.sid,r.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case us.EVENT:case us.BINARY_EVENT:this.onevent(r);break;case us.ACK:case us.BINARY_ACK:this.onack(r);break;case us.DISCONNECT:this.ondisconnect();break;case us.CONNECT_ERROR:this.destroy();const t=new Error(r.data.message);t.data=r.data.data,this.emitReserved("connect_error",t);break}}onevent(r){const e=r.data||[];r.id!=null&&e.push(this.ack(r.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(r){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const t of e)t.apply(this,r)}super.emit.apply(this,r),this._pid&&r.length&&typeof r[r.length-1]=="string"&&(this._lastOffset=r[r.length-1])}ack(r){const e=this;let t=!1;return function(...a){t||(t=!0,e.packet({type:us.ACK,id:r,data:a}))}}onack(r){const e=this.acks[r.id];typeof e=="function"&&(delete this.acks[r.id],e.withError&&r.data.unshift(null),e.apply(this,r.data))}onconnect(r,e){this.id=r,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(r=>this.emitEvent(r)),this.receiveBuffer=[],this.sendBuffer.forEach(r=>{this.notifyOutgoingListeners(r),this.packet(r)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(r=>r()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:us.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(r){return this.flags.compress=r,this}get volatile(){return this.flags.volatile=!0,this}timeout(r){return this.flags.timeout=r,this}onAny(r){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(r),this}prependAny(r){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(r),this}offAny(r){if(!this._anyListeners)return this;if(r){const e=this._anyListeners;for(let t=0;t<e.length;t++)if(r===e[t])return e.splice(t,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(r){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(r),this}prependAnyOutgoing(r){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(r),this}offAnyOutgoing(r){if(!this._anyOutgoingListeners)return this;if(r){const e=this._anyOutgoingListeners;for(let t=0;t<e.length;t++)if(r===e[t])return e.splice(t,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(r){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const t of e)t.apply(this,r.data)}}}function Mm(s){s=s||{},this.ms=s.min||100,this.max=s.max||1e4,this.factor=s.factor||2,this.jitter=s.jitter>0&&s.jitter<=1?s.jitter:0,this.attempts=0}Mm.prototype.duration=function(){var s=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var r=Math.random(),e=Math.floor(r*this.jitter*s);s=(Math.floor(r*10)&1)==0?s-e:s+e}return Math.min(s,this.max)|0};Mm.prototype.reset=function(){this.attempts=0};Mm.prototype.setMin=function(s){this.ms=s};Mm.prototype.setMax=function(s){this.max=s};Mm.prototype.setJitter=function(s){this.jitter=s};class AS extends ro{constructor(r,e){var t;super(),this.nsps={},this.subs=[],r&&typeof r=="object"&&(e=r,r=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,Yw(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((t=e.randomizationFactor)!==null&&t!==void 0?t:.5),this.backoff=new Mm({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=r;const a=e.parser||Tz;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(r){return arguments.length?(this._reconnection=!!r,r||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(r){return r===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=r,this)}reconnectionDelay(r){var e;return r===void 0?this._reconnectionDelay:(this._reconnectionDelay=r,(e=this.backoff)===null||e===void 0||e.setMin(r),this)}randomizationFactor(r){var e;return r===void 0?this._randomizationFactor:(this._randomizationFactor=r,(e=this.backoff)===null||e===void 0||e.setJitter(r),this)}reconnectionDelayMax(r){var e;return r===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=r,(e=this.backoff)===null||e===void 0||e.setMax(r),this)}timeout(r){return arguments.length?(this._timeout=r,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(r){if(~this._readyState.indexOf("open"))return this;this.engine=new xz(this.uri,this.opts);const e=this.engine,t=this;this._readyState="opening",this.skipReconnect=!1;const a=tc(e,"open",function(){t.onopen(),r&&r()}),o=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),r?r(l):this.maybeReconnectOnOpen()},i=tc(e,"error",o);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{a(),o(new Error("timeout")),e.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(a),this.subs.push(i),this}connect(r){return this.open(r)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const r=this.engine;this.subs.push(tc(r,"ping",this.onping.bind(this)),tc(r,"data",this.ondata.bind(this)),tc(r,"error",this.onerror.bind(this)),tc(r,"close",this.onclose.bind(this)),tc(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(r){try{this.decoder.add(r)}catch(e){this.onclose("parse error",e)}}ondecoded(r){Kw(()=>{this.emitReserved("packet",r)},this.setTimeoutFn)}onerror(r){this.emitReserved("error",r)}socket(r,e){let t=this.nsps[r];return t?this._autoConnect&&!t.active&&t.connect():(t=new hP(this,r,e),this.nsps[r]=t),t}_destroy(r){const e=Object.keys(this.nsps);for(const t of e)if(this.nsps[t].active)return;this._close()}_packet(r){const e=this.encoder.encode(r);for(let t=0;t<e.length;t++)this.engine.write(e[t],r.options)}cleanup(){this.subs.forEach(r=>r()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(r,e){var t;this.cleanup(),(t=this.engine)===null||t===void 0||t.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",r,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const r=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const t=this.setTimeoutFn(()=>{r.skipReconnect||(this.emitReserved("reconnect_attempt",r.backoff.attempts),!r.skipReconnect&&r.open(a=>{a?(r._reconnecting=!1,r.reconnect(),this.emitReserved("reconnect_error",a)):r.onreconnect()}))},e);this.opts.autoUnref&&t.unref(),this.subs.push(()=>{this.clearTimeoutFn(t)})}}onreconnect(){const r=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",r)}}const Kg={};function Fv(s,r){typeof s=="object"&&(r=s,s=void 0),r=r||{};const e=vz(s,r.path||"/socket.io"),t=e.source,a=e.id,o=e.path,i=Kg[a]&&o in Kg[a].nsps,l=r.forceNew||r["force new connection"]||r.multiplex===!1||i;let c;return l?c=new AS(t,r):(Kg[a]||(Kg[a]=new AS(t,r)),c=Kg[a]),e.query&&!r.query&&(r.query=e.queryKey),c.socket(e.path,r)}Object.assign(Fv,{Manager:AS,Socket:hP,io:Fv,connect:Fv});var lb=(s=>(s.Connect="connect",s.Disconnect="disconnect",s.HireDeveloper="hireDeveloper",s.Welcome="welcome",s.EndMeeting="endMeeting",s.DeveloperAssigned="developerAssigned",s))(lb||{});const mP=u.createContext(void 0),Pz=()=>{const s=u.useContext(mP);if(!s)throw new Error("useSocket must be used within a SocketProvider");return s},Az=({children:s})=>{const[r,e]=u.useState(null),[t,a]=u.useState(!1);u.useEffect(()=>{const l=localStorage.getItem("accessToken");if(!l)return;const c=Fv("https://backend.ziplofy.com",{autoConnect:!0,reconnection:!0,reconnectionDelay:1e3,reconnectionAttempts:5,timeout:2e4,extraHeaders:{token:l}});return c.on("connect",()=>{console.log("Socket connected:",c.id),a(!0)}),c.on("disconnect",d=>{console.log("Socket disconnected:",d),a(!1)}),c.on(lb.HireDeveloper,d=>{gr.success(d.message)}),c.on(lb.DeveloperAssigned,d=>{gr.success(d.message)}),e(c),()=>{c.close()}},[]);const i={socket:r,isConnected:t,getSocket:()=>r};return n.jsx(mP.Provider,{value:i,children:s})};function gP(s,r){return function(){return s.apply(r,arguments)}}const{toString:Mz}=Object.prototype,{getPrototypeOf:T2}=Object,{iterator:Zw,toStringTag:yP}=Symbol,Xw=(s=>r=>{const e=Mz.call(r);return s[e]||(s[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),pc=s=>(s=s.toLowerCase(),r=>Xw(r)===s),Qw=s=>r=>typeof r===s,{isArray:Im}=Array,xm=Qw("undefined");function Nx(s){return s!==null&&!xm(s)&&s.constructor!==null&&!xm(s.constructor)&&Ai(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}const xP=pc("ArrayBuffer");function Iz(s){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(s):r=s&&s.buffer&&xP(s.buffer),r}const Rz=Qw("string"),Ai=Qw("function"),vP=Qw("number"),kx=s=>s!==null&&typeof s=="object",Dz=s=>s===!0||s===!1,Bv=s=>{if(Xw(s)!=="object")return!1;const r=T2(s);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(yP in s)&&!(Zw in s)},Lz=s=>{if(!kx(s)||Nx(s))return!1;try{return Object.keys(s).length===0&&Object.getPrototypeOf(s)===Object.prototype}catch{return!1}},Fz=pc("Date"),Bz=pc("File"),zz=pc("Blob"),$z=pc("FileList"),Uz=s=>kx(s)&&Ai(s.pipe),Vz=s=>{let r;return s&&(typeof FormData=="function"&&s instanceof FormData||Ai(s.append)&&((r=Xw(s))==="formdata"||r==="object"&&Ai(s.toString)&&s.toString()==="[object FormData]"))},Hz=pc("URLSearchParams"),[Wz,qz,Gz,Kz]=["ReadableStream","Request","Response","Headers"].map(pc),Yz=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function _x(s,r,{allOwnKeys:e=!1}={}){if(s===null||typeof s>"u")return;let t,a;if(typeof s!="object"&&(s=[s]),Im(s))for(t=0,a=s.length;t<a;t++)r.call(null,s[t],t,s);else{if(Nx(s))return;const o=e?Object.getOwnPropertyNames(s):Object.keys(s),i=o.length;let l;for(t=0;t<i;t++)l=o[t],r.call(null,s[l],l,s)}}function bP(s,r){if(Nx(s))return null;r=r.toLowerCase();const e=Object.keys(s);let t=e.length,a;for(;t-- >0;)if(a=e[t],r===a.toLowerCase())return a;return null}const fp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,wP=s=>!xm(s)&&s!==fp;function MS(){const{caseless:s,skipUndefined:r}=wP(this)&&this||{},e={},t=(a,o)=>{const i=s&&bP(e,o)||o;Bv(e[i])&&Bv(a)?e[i]=MS(e[i],a):Bv(a)?e[i]=MS({},a):Im(a)?e[i]=a.slice():(!r||!xm(a))&&(e[i]=a)};for(let a=0,o=arguments.length;a<o;a++)arguments[a]&&_x(arguments[a],t);return e}const Zz=(s,r,e,{allOwnKeys:t}={})=>(_x(r,(a,o)=>{e&&Ai(a)?Object.defineProperty(s,o,{value:gP(a,e),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(s,o,{value:a,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:t}),s),Xz=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),Qz=(s,r,e,t)=>{s.prototype=Object.create(r.prototype,t),Object.defineProperty(s.prototype,"constructor",{value:s,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(s,"super",{value:r.prototype}),e&&Object.assign(s.prototype,e)},Jz=(s,r,e,t)=>{let a,o,i;const l={};if(r=r||{},s==null)return r;do{for(a=Object.getOwnPropertyNames(s),o=a.length;o-- >0;)i=a[o],(!t||t(i,s,r))&&!l[i]&&(r[i]=s[i],l[i]=!0);s=e!==!1&&T2(s)}while(s&&(!e||e(s,r))&&s!==Object.prototype);return r},e$=(s,r,e)=>{s=String(s),(e===void 0||e>s.length)&&(e=s.length),e-=r.length;const t=s.indexOf(r,e);return t!==-1&&t===e},t$=s=>{if(!s)return null;if(Im(s))return s;let r=s.length;if(!vP(r))return null;const e=new Array(r);for(;r-- >0;)e[r]=s[r];return e},r$=(s=>r=>s&&r instanceof s)(typeof Uint8Array<"u"&&T2(Uint8Array)),n$=(s,r)=>{const t=(s&&s[Zw]).call(s);let a;for(;(a=t.next())&&!a.done;){const o=a.value;r.call(s,o[0],o[1])}},s$=(s,r)=>{let e;const t=[];for(;(e=s.exec(r))!==null;)t.push(e);return t},a$=pc("HTMLFormElement"),o$=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,a){return t.toUpperCase()+a}),Y5=(({hasOwnProperty:s})=>(r,e)=>s.call(r,e))(Object.prototype),i$=pc("RegExp"),jP=(s,r)=>{const e=Object.getOwnPropertyDescriptors(s),t={};_x(e,(a,o)=>{let i;(i=r(a,o,s))!==!1&&(t[o]=i||a)}),Object.defineProperties(s,t)},l$=s=>{jP(s,(r,e)=>{if(Ai(s)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const t=s[e];if(Ai(t)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},c$=(s,r)=>{const e={},t=a=>{a.forEach(o=>{e[o]=!0})};return Im(s)?t(s):t(String(s).split(r)),e},d$=()=>{},u$=(s,r)=>s!=null&&Number.isFinite(s=+s)?s:r;function f$(s){return!!(s&&Ai(s.append)&&s[yP]==="FormData"&&s[Zw])}const p$=s=>{const r=new Array(10),e=(t,a)=>{if(kx(t)){if(r.indexOf(t)>=0)return;if(Nx(t))return t;if(!("toJSON"in t)){r[a]=t;const o=Im(t)?[]:{};return _x(t,(i,l)=>{const c=e(i,a+1);!xm(c)&&(o[l]=c)}),r[a]=void 0,o}}return t};return e(s,0)},h$=pc("AsyncFunction"),m$=s=>s&&(kx(s)||Ai(s))&&Ai(s.then)&&Ai(s.catch),CP=((s,r)=>s?setImmediate:r?((e,t)=>(fp.addEventListener("message",({source:a,data:o})=>{a===fp&&o===e&&t.length&&t.shift()()},!1),a=>{t.push(a),fp.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",Ai(fp.postMessage)),g$=typeof queueMicrotask<"u"?queueMicrotask.bind(fp):typeof process<"u"&&process.nextTick||CP,y$=s=>s!=null&&Ai(s[Zw]),Kt={isArray:Im,isArrayBuffer:xP,isBuffer:Nx,isFormData:Vz,isArrayBufferView:Iz,isString:Rz,isNumber:vP,isBoolean:Dz,isObject:kx,isPlainObject:Bv,isEmptyObject:Lz,isReadableStream:Wz,isRequest:qz,isResponse:Gz,isHeaders:Kz,isUndefined:xm,isDate:Fz,isFile:Bz,isBlob:zz,isRegExp:i$,isFunction:Ai,isStream:Uz,isURLSearchParams:Hz,isTypedArray:r$,isFileList:$z,forEach:_x,merge:MS,extend:Zz,trim:Yz,stripBOM:Xz,inherits:Qz,toFlatObject:Jz,kindOf:Xw,kindOfTest:pc,endsWith:e$,toArray:t$,forEachEntry:n$,matchAll:s$,isHTMLForm:a$,hasOwnProperty:Y5,hasOwnProp:Y5,reduceDescriptors:jP,freezeMethods:l$,toObjectSet:c$,toCamelCase:o$,noop:d$,toFiniteNumber:u$,findKey:bP,global:fp,isContextDefined:wP,isSpecCompliantForm:f$,toJSONObject:p$,isAsyncFn:h$,isThenable:m$,setImmediate:CP,asap:g$,isIterable:y$};let Tn=class SP extends Error{static from(r,e,t,a,o,i){const l=new SP(r.message,e||r.code,t,a,o);return l.cause=r,l.name=r.name,i&&Object.assign(l,i),l}constructor(r,e,t,a,o){super(r),this.name="AxiosError",this.isAxiosError=!0,e&&(this.code=e),t&&(this.config=t),a&&(this.request=a),o&&(this.response=o,this.status=o.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Kt.toJSONObject(this.config),code:this.code,status:this.status}}};Tn.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";Tn.ERR_BAD_OPTION="ERR_BAD_OPTION";Tn.ECONNABORTED="ECONNABORTED";Tn.ETIMEDOUT="ETIMEDOUT";Tn.ERR_NETWORK="ERR_NETWORK";Tn.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";Tn.ERR_DEPRECATED="ERR_DEPRECATED";Tn.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";Tn.ERR_BAD_REQUEST="ERR_BAD_REQUEST";Tn.ERR_CANCELED="ERR_CANCELED";Tn.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";Tn.ERR_INVALID_URL="ERR_INVALID_URL";const x$=null;function IS(s){return Kt.isPlainObject(s)||Kt.isArray(s)}function NP(s){return Kt.endsWith(s,"[]")?s.slice(0,-2):s}function Z5(s,r,e){return s?s.concat(r).map(function(a,o){return a=NP(a),!e&&o?"["+a+"]":a}).join(e?".":""):r}function v$(s){return Kt.isArray(s)&&!s.some(IS)}const b$=Kt.toFlatObject(Kt,{},null,function(r){return/^is[A-Z]/.test(r)});function Jw(s,r,e){if(!Kt.isObject(s))throw new TypeError("target must be an object");r=r||new FormData,e=Kt.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,w){return!Kt.isUndefined(w[v])});const t=e.metaTokens,a=e.visitor||p,o=e.dots,i=e.indexes,c=(e.Blob||typeof Blob<"u"&&Blob)&&Kt.isSpecCompliantForm(r);if(!Kt.isFunction(a))throw new TypeError("visitor must be a function");function d(b){if(b===null)return"";if(Kt.isDate(b))return b.toISOString();if(Kt.isBoolean(b))return b.toString();if(!c&&Kt.isBlob(b))throw new Tn("Blob is not supported. Use a Buffer instead.");return Kt.isArrayBuffer(b)||Kt.isTypedArray(b)?c&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function p(b,v,w){let C=b;if(b&&!w&&typeof b=="object"){if(Kt.endsWith(v,"{}"))v=t?v:v.slice(0,-2),b=JSON.stringify(b);else if(Kt.isArray(b)&&v$(b)||(Kt.isFileList(b)||Kt.endsWith(v,"[]"))&&(C=Kt.toArray(b)))return v=NP(v),C.forEach(function(N,O){!(Kt.isUndefined(N)||N===null)&&r.append(i===!0?Z5([v],O,o):i===null?v:v+"[]",d(N))}),!1}return IS(b)?!0:(r.append(Z5(w,v,o),d(b)),!1)}const h=[],g=Object.assign(b$,{defaultVisitor:p,convertValue:d,isVisitable:IS});function y(b,v){if(!Kt.isUndefined(b)){if(h.indexOf(b)!==-1)throw Error("Circular reference detected in "+v.join("."));h.push(b),Kt.forEach(b,function(C,k){(!(Kt.isUndefined(C)||C===null)&&a.call(r,C,Kt.isString(k)?k.trim():k,v,g))===!0&&y(C,v?v.concat(k):[k])}),h.pop()}}if(!Kt.isObject(s))throw new TypeError("data must be an object");return y(s),r}function X5(s){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(t){return r[t]})}function O2(s,r){this._pairs=[],s&&Jw(s,this,r)}const kP=O2.prototype;kP.append=function(r,e){this._pairs.push([r,e])};kP.toString=function(r){const e=r?function(t){return r.call(this,t,X5)}:X5;return this._pairs.map(function(a){return e(a[0])+"="+e(a[1])},"").join("&")};function w$(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function _P(s,r,e){if(!r)return s;const t=e&&e.encode||w$,a=Kt.isFunction(e)?{serialize:e}:e,o=a&&a.serialize;let i;if(o?i=o(r,a):i=Kt.isURLSearchParams(r)?r.toString():new O2(r,a).toString(t),i){const l=s.indexOf("#");l!==-1&&(s=s.slice(0,l)),s+=(s.indexOf("?")===-1?"?":"&")+i}return s}class Q5{constructor(){this.handlers=[]}use(r,e,t){return this.handlers.push({fulfilled:r,rejected:e,synchronous:t?t.synchronous:!1,runWhen:t?t.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){Kt.forEach(this.handlers,function(t){t!==null&&r(t)})}}const EP={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},j$=typeof URLSearchParams<"u"?URLSearchParams:O2,C$=typeof FormData<"u"?FormData:null,S$=typeof Blob<"u"?Blob:null,N$={isBrowser:!0,classes:{URLSearchParams:j$,FormData:C$,Blob:S$},protocols:["http","https","file","blob","url","data"]},P2=typeof window<"u"&&typeof document<"u",RS=typeof navigator=="object"&&navigator||void 0,k$=P2&&(!RS||["ReactNative","NativeScript","NS"].indexOf(RS.product)<0),_$=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",E$=P2&&window.location.href||"http://localhost",T$=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:P2,hasStandardBrowserEnv:k$,hasStandardBrowserWebWorkerEnv:_$,navigator:RS,origin:E$},Symbol.toStringTag,{value:"Module"})),Xo={...T$,...N$};function O$(s,r){return Jw(s,new Xo.classes.URLSearchParams,{visitor:function(e,t,a,o){return Xo.isNode&&Kt.isBuffer(e)?(this.append(t,e.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...r})}function P$(s){return Kt.matchAll(/\w+|\[(\w*)]/g,s).map(r=>r[0]==="[]"?"":r[1]||r[0])}function A$(s){const r={},e=Object.keys(s);let t;const a=e.length;let o;for(t=0;t<a;t++)o=e[t],r[o]=s[o];return r}function TP(s){function r(e,t,a,o){let i=e[o++];if(i==="__proto__")return!0;const l=Number.isFinite(+i),c=o>=e.length;return i=!i&&Kt.isArray(a)?a.length:i,c?(Kt.hasOwnProp(a,i)?a[i]=[a[i],t]:a[i]=t,!l):((!a[i]||!Kt.isObject(a[i]))&&(a[i]=[]),r(e,t,a[i],o)&&Kt.isArray(a[i])&&(a[i]=A$(a[i])),!l)}if(Kt.isFormData(s)&&Kt.isFunction(s.entries)){const e={};return Kt.forEachEntry(s,(t,a)=>{r(P$(t),a,e,0)}),e}return null}function M$(s,r,e){if(Kt.isString(s))try{return(r||JSON.parse)(s),Kt.trim(s)}catch(t){if(t.name!=="SyntaxError")throw t}return(e||JSON.stringify)(s)}const Ex={transitional:EP,adapter:["xhr","http","fetch"],transformRequest:[function(r,e){const t=e.getContentType()||"",a=t.indexOf("application/json")>-1,o=Kt.isObject(r);if(o&&Kt.isHTMLForm(r)&&(r=new FormData(r)),Kt.isFormData(r))return a?JSON.stringify(TP(r)):r;if(Kt.isArrayBuffer(r)||Kt.isBuffer(r)||Kt.isStream(r)||Kt.isFile(r)||Kt.isBlob(r)||Kt.isReadableStream(r))return r;if(Kt.isArrayBufferView(r))return r.buffer;if(Kt.isURLSearchParams(r))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let l;if(o){if(t.indexOf("application/x-www-form-urlencoded")>-1)return O$(r,this.formSerializer).toString();if((l=Kt.isFileList(r))||t.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Jw(l?{"files[]":r}:r,c&&new c,this.formSerializer)}}return o||a?(e.setContentType("application/json",!1),M$(r)):r}],transformResponse:[function(r){const e=this.transitional||Ex.transitional,t=e&&e.forcedJSONParsing,a=this.responseType==="json";if(Kt.isResponse(r)||Kt.isReadableStream(r))return r;if(r&&Kt.isString(r)&&(t&&!this.responseType||a)){const i=!(e&&e.silentJSONParsing)&&a;try{return JSON.parse(r,this.parseReviver)}catch(l){if(i)throw l.name==="SyntaxError"?Tn.from(l,Tn.ERR_BAD_RESPONSE,this,null,this.response):l}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Xo.classes.FormData,Blob:Xo.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Kt.forEach(["delete","get","head","post","put","patch"],s=>{Ex.headers[s]={}});const I$=Kt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),R$=s=>{const r={};let e,t,a;return s&&s.split(`
`).forEach(function(i){a=i.indexOf(":"),e=i.substring(0,a).trim().toLowerCase(),t=i.substring(a+1).trim(),!(!e||r[e]&&I$[e])&&(e==="set-cookie"?r[e]?r[e].push(t):r[e]=[t]:r[e]=r[e]?r[e]+", "+t:t)}),r},J5=Symbol("internals");function Yg(s){return s&&String(s).trim().toLowerCase()}function zv(s){return s===!1||s==null?s:Kt.isArray(s)?s.map(zv):String(s)}function D$(s){const r=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let t;for(;t=e.exec(s);)r[t[1]]=t[2];return r}const L$=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function G1(s,r,e,t,a){if(Kt.isFunction(t))return t.call(this,r,e);if(a&&(r=e),!!Kt.isString(r)){if(Kt.isString(t))return r.indexOf(t)!==-1;if(Kt.isRegExp(t))return t.test(r)}}function F$(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,e,t)=>e.toUpperCase()+t)}function B$(s,r){const e=Kt.toCamelCase(" "+r);["get","set","has"].forEach(t=>{Object.defineProperty(s,t+e,{value:function(a,o,i){return this[t].call(this,r,a,o,i)},configurable:!0})})}let Mi=class{constructor(r){r&&this.set(r)}set(r,e,t){const a=this;function o(l,c,d){const p=Yg(c);if(!p)throw new Error("header name must be a non-empty string");const h=Kt.findKey(a,p);(!h||a[h]===void 0||d===!0||d===void 0&&a[h]!==!1)&&(a[h||c]=zv(l))}const i=(l,c)=>Kt.forEach(l,(d,p)=>o(d,p,c));if(Kt.isPlainObject(r)||r instanceof this.constructor)i(r,e);else if(Kt.isString(r)&&(r=r.trim())&&!L$(r))i(R$(r),e);else if(Kt.isObject(r)&&Kt.isIterable(r)){let l={},c,d;for(const p of r){if(!Kt.isArray(p))throw TypeError("Object iterator must return a key-value pair");l[d=p[0]]=(c=l[d])?Kt.isArray(c)?[...c,p[1]]:[c,p[1]]:p[1]}i(l,e)}else r!=null&&o(e,r,t);return this}get(r,e){if(r=Yg(r),r){const t=Kt.findKey(this,r);if(t){const a=this[t];if(!e)return a;if(e===!0)return D$(a);if(Kt.isFunction(e))return e.call(this,a,t);if(Kt.isRegExp(e))return e.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,e){if(r=Yg(r),r){const t=Kt.findKey(this,r);return!!(t&&this[t]!==void 0&&(!e||G1(this,this[t],t,e)))}return!1}delete(r,e){const t=this;let a=!1;function o(i){if(i=Yg(i),i){const l=Kt.findKey(t,i);l&&(!e||G1(t,t[l],l,e))&&(delete t[l],a=!0)}}return Kt.isArray(r)?r.forEach(o):o(r),a}clear(r){const e=Object.keys(this);let t=e.length,a=!1;for(;t--;){const o=e[t];(!r||G1(this,this[o],o,r,!0))&&(delete this[o],a=!0)}return a}normalize(r){const e=this,t={};return Kt.forEach(this,(a,o)=>{const i=Kt.findKey(t,o);if(i){e[i]=zv(a),delete e[o];return}const l=r?F$(o):String(o).trim();l!==o&&delete e[o],e[l]=zv(a),t[l]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const e=Object.create(null);return Kt.forEach(this,(t,a)=>{t!=null&&t!==!1&&(e[a]=r&&Kt.isArray(t)?t.join(", "):t)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,e])=>r+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...e){const t=new this(r);return e.forEach(a=>t.set(a)),t}static accessor(r){const t=(this[J5]=this[J5]={accessors:{}}).accessors,a=this.prototype;function o(i){const l=Yg(i);t[l]||(B$(a,i),t[l]=!0)}return Kt.isArray(r)?r.forEach(o):o(r),this}};Mi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Kt.reduceDescriptors(Mi.prototype,({value:s},r)=>{let e=r[0].toUpperCase()+r.slice(1);return{get:()=>s,set(t){this[e]=t}}});Kt.freezeMethods(Mi);function K1(s,r){const e=this||Ex,t=r||e,a=Mi.from(t.headers);let o=t.data;return Kt.forEach(s,function(l){o=l.call(e,o,a.normalize(),r?r.status:void 0)}),a.normalize(),o}function OP(s){return!!(s&&s.__CANCEL__)}let Tx=class extends Tn{constructor(r,e,t){super(r??"canceled",Tn.ERR_CANCELED,e,t),this.name="CanceledError",this.__CANCEL__=!0}};function PP(s,r,e){const t=e.config.validateStatus;!e.status||!t||t(e.status)?s(e):r(new Tn("Request failed with status code "+e.status,[Tn.ERR_BAD_REQUEST,Tn.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function z$(s){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return r&&r[1]||""}function $$(s,r){s=s||10;const e=new Array(s),t=new Array(s);let a=0,o=0,i;return r=r!==void 0?r:1e3,function(c){const d=Date.now(),p=t[o];i||(i=d),e[a]=c,t[a]=d;let h=o,g=0;for(;h!==a;)g+=e[h++],h=h%s;if(a=(a+1)%s,a===o&&(o=(o+1)%s),d-i<r)return;const y=p&&d-p;return y?Math.round(g*1e3/y):void 0}}function U$(s,r){let e=0,t=1e3/r,a,o;const i=(d,p=Date.now())=>{e=p,a=null,o&&(clearTimeout(o),o=null),s(...d)};return[(...d)=>{const p=Date.now(),h=p-e;h>=t?i(d,p):(a=d,o||(o=setTimeout(()=>{o=null,i(a)},t-h)))},()=>a&&i(a)]}const cb=(s,r,e=3)=>{let t=0;const a=$$(50,250);return U$(o=>{const i=o.loaded,l=o.lengthComputable?o.total:void 0,c=i-t,d=a(c),p=i<=l;t=i;const h={loaded:i,total:l,progress:l?i/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&p?(l-i)/d:void 0,event:o,lengthComputable:l!=null,[r?"download":"upload"]:!0};s(h)},e)},eE=(s,r)=>{const e=s!=null;return[t=>r[0]({lengthComputable:e,total:s,loaded:t}),r[1]]},tE=s=>(...r)=>Kt.asap(()=>s(...r)),V$=Xo.hasStandardBrowserEnv?((s,r)=>e=>(e=new URL(e,Xo.origin),s.protocol===e.protocol&&s.host===e.host&&(r||s.port===e.port)))(new URL(Xo.origin),Xo.navigator&&/(msie|trident)/i.test(Xo.navigator.userAgent)):()=>!0,H$=Xo.hasStandardBrowserEnv?{write(s,r,e,t,a,o,i){if(typeof document>"u")return;const l=[`${s}=${encodeURIComponent(r)}`];Kt.isNumber(e)&&l.push(`expires=${new Date(e).toUTCString()}`),Kt.isString(t)&&l.push(`path=${t}`),Kt.isString(a)&&l.push(`domain=${a}`),o===!0&&l.push("secure"),Kt.isString(i)&&l.push(`SameSite=${i}`),document.cookie=l.join("; ")},read(s){if(typeof document>"u")return null;const r=document.cookie.match(new RegExp("(?:^|; )"+s+"=([^;]*)"));return r?decodeURIComponent(r[1]):null},remove(s){this.write(s,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function W$(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function q$(s,r){return r?s.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):s}function AP(s,r,e){let t=!W$(r);return s&&(t||e==!1)?q$(s,r):r}const rE=s=>s instanceof Mi?{...s}:s;function Ep(s,r){r=r||{};const e={};function t(d,p,h,g){return Kt.isPlainObject(d)&&Kt.isPlainObject(p)?Kt.merge.call({caseless:g},d,p):Kt.isPlainObject(p)?Kt.merge({},p):Kt.isArray(p)?p.slice():p}function a(d,p,h,g){if(Kt.isUndefined(p)){if(!Kt.isUndefined(d))return t(void 0,d,h,g)}else return t(d,p,h,g)}function o(d,p){if(!Kt.isUndefined(p))return t(void 0,p)}function i(d,p){if(Kt.isUndefined(p)){if(!Kt.isUndefined(d))return t(void 0,d)}else return t(void 0,p)}function l(d,p,h){if(h in r)return t(d,p);if(h in s)return t(void 0,d)}const c={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:l,headers:(d,p,h)=>a(rE(d),rE(p),h,!0)};return Kt.forEach(Object.keys({...s,...r}),function(p){const h=c[p]||a,g=h(s[p],r[p],p);Kt.isUndefined(g)&&h!==l||(e[p]=g)}),e}const MP=s=>{const r=Ep({},s);let{data:e,withXSRFToken:t,xsrfHeaderName:a,xsrfCookieName:o,headers:i,auth:l}=r;if(r.headers=i=Mi.from(i),r.url=_P(AP(r.baseURL,r.url,r.allowAbsoluteUrls),s.params,s.paramsSerializer),l&&i.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Kt.isFormData(e)){if(Xo.hasStandardBrowserEnv||Xo.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(Kt.isFunction(e.getHeaders)){const c=e.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([p,h])=>{d.includes(p.toLowerCase())&&i.set(p,h)})}}if(Xo.hasStandardBrowserEnv&&(t&&Kt.isFunction(t)&&(t=t(r)),t||t!==!1&&V$(r.url))){const c=a&&o&&H$.read(o);c&&i.set(a,c)}return r},G$=typeof XMLHttpRequest<"u",K$=G$&&function(s){return new Promise(function(e,t){const a=MP(s);let o=a.data;const i=Mi.from(a.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=a,p,h,g,y,b;function v(){y&&y(),b&&b(),a.cancelToken&&a.cancelToken.unsubscribe(p),a.signal&&a.signal.removeEventListener("abort",p)}let w=new XMLHttpRequest;w.open(a.method.toUpperCase(),a.url,!0),w.timeout=a.timeout;function C(){if(!w)return;const N=Mi.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),R={data:!l||l==="text"||l==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:N,config:s,request:w};PP(function(B){e(B),v()},function(B){t(B),v()},R),w=null}"onloadend"in w?w.onloadend=C:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(C)},w.onabort=function(){w&&(t(new Tn("Request aborted",Tn.ECONNABORTED,s,w)),w=null)},w.onerror=function(O){const R=O&&O.message?O.message:"Network Error",L=new Tn(R,Tn.ERR_NETWORK,s,w);L.event=O||null,t(L),w=null},w.ontimeout=function(){let O=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const R=a.transitional||EP;a.timeoutErrorMessage&&(O=a.timeoutErrorMessage),t(new Tn(O,R.clarifyTimeoutError?Tn.ETIMEDOUT:Tn.ECONNABORTED,s,w)),w=null},o===void 0&&i.setContentType(null),"setRequestHeader"in w&&Kt.forEach(i.toJSON(),function(O,R){w.setRequestHeader(R,O)}),Kt.isUndefined(a.withCredentials)||(w.withCredentials=!!a.withCredentials),l&&l!=="json"&&(w.responseType=a.responseType),d&&([g,b]=cb(d,!0),w.addEventListener("progress",g)),c&&w.upload&&([h,y]=cb(c),w.upload.addEventListener("progress",h),w.upload.addEventListener("loadend",y)),(a.cancelToken||a.signal)&&(p=N=>{w&&(t(!N||N.type?new Tx(null,s,w):N),w.abort(),w=null)},a.cancelToken&&a.cancelToken.subscribe(p),a.signal&&(a.signal.aborted?p():a.signal.addEventListener("abort",p)));const k=z$(a.url);if(k&&Xo.protocols.indexOf(k)===-1){t(new Tn("Unsupported protocol "+k+":",Tn.ERR_BAD_REQUEST,s));return}w.send(o||null)})},Y$=(s,r)=>{const{length:e}=s=s?s.filter(Boolean):[];if(r||e){let t=new AbortController,a;const o=function(d){if(!a){a=!0,l();const p=d instanceof Error?d:this.reason;t.abort(p instanceof Tn?p:new Tx(p instanceof Error?p.message:p))}};let i=r&&setTimeout(()=>{i=null,o(new Tn(`timeout of ${r}ms exceeded`,Tn.ETIMEDOUT))},r);const l=()=>{s&&(i&&clearTimeout(i),i=null,s.forEach(d=>{d.unsubscribe?d.unsubscribe(o):d.removeEventListener("abort",o)}),s=null)};s.forEach(d=>d.addEventListener("abort",o));const{signal:c}=t;return c.unsubscribe=()=>Kt.asap(l),c}},Z$=function*(s,r){let e=s.byteLength;if(e<r){yield s;return}let t=0,a;for(;t<e;)a=t+r,yield s.slice(t,a),t=a},X$=async function*(s,r){for await(const e of Q$(s))yield*Z$(e,r)},Q$=async function*(s){if(s[Symbol.asyncIterator]){yield*s;return}const r=s.getReader();try{for(;;){const{done:e,value:t}=await r.read();if(e)break;yield t}}finally{await r.cancel()}},nE=(s,r,e,t)=>{const a=X$(s,r);let o=0,i,l=c=>{i||(i=!0,t&&t(c))};return new ReadableStream({async pull(c){try{const{done:d,value:p}=await a.next();if(d){l(),c.close();return}let h=p.byteLength;if(e){let g=o+=h;e(g)}c.enqueue(new Uint8Array(p))}catch(d){throw l(d),d}},cancel(c){return l(c),a.return()}},{highWaterMark:2})},sE=64*1024,{isFunction:nv}=Kt,J$=(({Request:s,Response:r})=>({Request:s,Response:r}))(Kt.global),{ReadableStream:aE,TextEncoder:oE}=Kt.global,iE=(s,...r)=>{try{return!!s(...r)}catch{return!1}},eU=s=>{s=Kt.merge.call({skipUndefined:!0},J$,s);const{fetch:r,Request:e,Response:t}=s,a=r?nv(r):typeof fetch=="function",o=nv(e),i=nv(t);if(!a)return!1;const l=a&&nv(aE),c=a&&(typeof oE=="function"?(b=>v=>b.encode(v))(new oE):async b=>new Uint8Array(await new e(b).arrayBuffer())),d=o&&l&&iE(()=>{let b=!1;const v=new e(Xo.origin,{body:new aE,method:"POST",get duplex(){return b=!0,"half"}}).headers.has("Content-Type");return b&&!v}),p=i&&l&&iE(()=>Kt.isReadableStream(new t("").body)),h={stream:p&&(b=>b.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(b=>{!h[b]&&(h[b]=(v,w)=>{let C=v&&v[b];if(C)return C.call(v);throw new Tn(`Response type '${b}' is not supported`,Tn.ERR_NOT_SUPPORT,w)})});const g=async b=>{if(b==null)return 0;if(Kt.isBlob(b))return b.size;if(Kt.isSpecCompliantForm(b))return(await new e(Xo.origin,{method:"POST",body:b}).arrayBuffer()).byteLength;if(Kt.isArrayBufferView(b)||Kt.isArrayBuffer(b))return b.byteLength;if(Kt.isURLSearchParams(b)&&(b=b+""),Kt.isString(b))return(await c(b)).byteLength},y=async(b,v)=>{const w=Kt.toFiniteNumber(b.getContentLength());return w??g(v)};return async b=>{let{url:v,method:w,data:C,signal:k,cancelToken:N,timeout:O,onDownloadProgress:R,onUploadProgress:L,responseType:B,headers:G,withCredentials:$="same-origin",fetchOptions:z}=MP(b),Y=r||fetch;B=B?(B+"").toLowerCase():"text";let M=Y$([k,N&&N.toAbortSignal()],O),q=null;const P=M&&M.unsubscribe&&(()=>{M.unsubscribe()});let H;try{if(L&&d&&w!=="get"&&w!=="head"&&(H=await y(G,C))!==0){let K=new e(v,{method:"POST",body:C,duplex:"half"}),Z;if(Kt.isFormData(C)&&(Z=K.headers.get("content-type"))&&G.setContentType(Z),K.body){const[ve,ae]=eE(H,cb(tE(L)));C=nE(K.body,sE,ve,ae)}}Kt.isString($)||($=$?"include":"omit");const D=o&&"credentials"in e.prototype,X={...z,signal:M,method:w.toUpperCase(),headers:G.normalize().toJSON(),body:C,duplex:"half",credentials:D?$:void 0};q=o&&new e(v,X);let se=await(o?Y(q,z):Y(v,X));const Q=p&&(B==="stream"||B==="response");if(p&&(R||Q&&P)){const K={};["status","statusText","headers"].forEach(Se=>{K[Se]=se[Se]});const Z=Kt.toFiniteNumber(se.headers.get("content-length")),[ve,ae]=R&&eE(Z,cb(tE(R),!0))||[];se=new t(nE(se.body,sE,ve,()=>{ae&&ae(),P&&P()}),K)}B=B||"text";let xe=await h[Kt.findKey(h,B)||"text"](se,b);return!Q&&P&&P(),await new Promise((K,Z)=>{PP(K,Z,{data:xe,headers:Mi.from(se.headers),status:se.status,statusText:se.statusText,config:b,request:q})})}catch(D){throw P&&P(),D&&D.name==="TypeError"&&/Load failed|fetch/i.test(D.message)?Object.assign(new Tn("Network Error",Tn.ERR_NETWORK,b,q),{cause:D.cause||D}):Tn.from(D,D&&D.code,b,q)}}},tU=new Map,IP=s=>{let r=s&&s.env||{};const{fetch:e,Request:t,Response:a}=r,o=[t,a,e];let i=o.length,l=i,c,d,p=tU;for(;l--;)c=o[l],d=p.get(c),d===void 0&&p.set(c,d=l?new Map:eU(r)),p=d;return d};IP();const A2={http:x$,xhr:K$,fetch:{get:IP}};Kt.forEach(A2,(s,r)=>{if(s){try{Object.defineProperty(s,"name",{value:r})}catch{}Object.defineProperty(s,"adapterName",{value:r})}});const lE=s=>`- ${s}`,rU=s=>Kt.isFunction(s)||s===null||s===!1;function nU(s,r){s=Kt.isArray(s)?s:[s];const{length:e}=s;let t,a;const o={};for(let i=0;i<e;i++){t=s[i];let l;if(a=t,!rU(t)&&(a=A2[(l=String(t)).toLowerCase()],a===void 0))throw new Tn(`Unknown adapter '${l}'`);if(a&&(Kt.isFunction(a)||(a=a.get(r))))break;o[l||"#"+i]=a}if(!a){const i=Object.entries(o).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let l=e?i.length>1?`since :
`+i.map(lE).join(`
`):" "+lE(i[0]):"as no adapter specified";throw new Tn("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return a}const RP={getAdapter:nU,adapters:A2};function Y1(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new Tx(null,s)}function cE(s){return Y1(s),s.headers=Mi.from(s.headers),s.data=K1.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),RP.getAdapter(s.adapter||Ex.adapter,s)(s).then(function(t){return Y1(s),t.data=K1.call(s,s.transformResponse,t),t.headers=Mi.from(t.headers),t},function(t){return OP(t)||(Y1(s),t&&t.response&&(t.response.data=K1.call(s,s.transformResponse,t.response),t.response.headers=Mi.from(t.response.headers))),Promise.reject(t)})}const DP="1.13.4",ej={};["object","boolean","number","function","string","symbol"].forEach((s,r)=>{ej[s]=function(t){return typeof t===s||"a"+(r<1?"n ":" ")+s}});const dE={};ej.transitional=function(r,e,t){function a(o,i){return"[Axios v"+DP+"] Transitional option '"+o+"'"+i+(t?". "+t:"")}return(o,i,l)=>{if(r===!1)throw new Tn(a(i," has been removed"+(e?" in "+e:"")),Tn.ERR_DEPRECATED);return e&&!dE[i]&&(dE[i]=!0,console.warn(a(i," has been deprecated since v"+e+" and will be removed in the near future"))),r?r(o,i,l):!0}};ej.spelling=function(r){return(e,t)=>(console.warn(`${t} is likely a misspelling of ${r}`),!0)};function sU(s,r,e){if(typeof s!="object")throw new Tn("options must be an object",Tn.ERR_BAD_OPTION_VALUE);const t=Object.keys(s);let a=t.length;for(;a-- >0;){const o=t[a],i=r[o];if(i){const l=s[o],c=l===void 0||i(l,o,s);if(c!==!0)throw new Tn("option "+o+" must be "+c,Tn.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new Tn("Unknown option "+o,Tn.ERR_BAD_OPTION)}}const $v={assertOptions:sU,validators:ej},Dc=$v.validators;let wp=class{constructor(r){this.defaults=r||{},this.interceptors={request:new Q5,response:new Q5}}async request(r,e){try{return await this._request(r,e)}catch(t){if(t instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const o=a.stack?a.stack.replace(/^.+\n/,""):"";try{t.stack?o&&!String(t.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(t.stack+=`
`+o):t.stack=o}catch{}}throw t}}_request(r,e){typeof r=="string"?(e=e||{},e.url=r):e=r||{},e=Ep(this.defaults,e);const{transitional:t,paramsSerializer:a,headers:o}=e;t!==void 0&&$v.assertOptions(t,{silentJSONParsing:Dc.transitional(Dc.boolean),forcedJSONParsing:Dc.transitional(Dc.boolean),clarifyTimeoutError:Dc.transitional(Dc.boolean)},!1),a!=null&&(Kt.isFunction(a)?e.paramsSerializer={serialize:a}:$v.assertOptions(a,{encode:Dc.function,serialize:Dc.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),$v.assertOptions(e,{baseUrl:Dc.spelling("baseURL"),withXsrfToken:Dc.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let i=o&&Kt.merge(o.common,o[e.method]);o&&Kt.forEach(["delete","get","head","post","put","patch","common"],b=>{delete o[b]}),e.headers=Mi.concat(i,o);const l=[];let c=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(e)===!1||(c=c&&v.synchronous,l.unshift(v.fulfilled,v.rejected))});const d=[];this.interceptors.response.forEach(function(v){d.push(v.fulfilled,v.rejected)});let p,h=0,g;if(!c){const b=[cE.bind(this),void 0];for(b.unshift(...l),b.push(...d),g=b.length,p=Promise.resolve(e);h<g;)p=p.then(b[h++],b[h++]);return p}g=l.length;let y=e;for(;h<g;){const b=l[h++],v=l[h++];try{y=b(y)}catch(w){v.call(this,w);break}}try{p=cE.call(this,y)}catch(b){return Promise.reject(b)}for(h=0,g=d.length;h<g;)p=p.then(d[h++],d[h++]);return p}getUri(r){r=Ep(this.defaults,r);const e=AP(r.baseURL,r.url,r.allowAbsoluteUrls);return _P(e,r.params,r.paramsSerializer)}};Kt.forEach(["delete","get","head","options"],function(r){wp.prototype[r]=function(e,t){return this.request(Ep(t||{},{method:r,url:e,data:(t||{}).data}))}});Kt.forEach(["post","put","patch"],function(r){function e(t){return function(o,i,l){return this.request(Ep(l||{},{method:r,headers:t?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}wp.prototype[r]=e(),wp.prototype[r+"Form"]=e(!0)});let aU=class LP{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(o){e=o});const t=this;this.promise.then(a=>{if(!t._listeners)return;let o=t._listeners.length;for(;o-- >0;)t._listeners[o](a);t._listeners=null}),this.promise.then=a=>{let o;const i=new Promise(l=>{t.subscribe(l),o=l}).then(a);return i.cancel=function(){t.unsubscribe(o)},i},r(function(o,i,l){t.reason||(t.reason=new Tx(o,i,l),e(t.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const e=this._listeners.indexOf(r);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const r=new AbortController,e=t=>{r.abort(t)};return this.subscribe(e),r.signal.unsubscribe=()=>this.unsubscribe(e),r.signal}static source(){let r;return{token:new LP(function(a){r=a}),cancel:r}}};function oU(s){return function(e){return s.apply(null,e)}}function iU(s){return Kt.isObject(s)&&s.isAxiosError===!0}const DS={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(DS).forEach(([s,r])=>{DS[r]=s});function FP(s){const r=new wp(s),e=gP(wp.prototype.request,r);return Kt.extend(e,wp.prototype,r,{allOwnKeys:!0}),Kt.extend(e,r,null,{allOwnKeys:!0}),e.create=function(a){return FP(Ep(s,a))},e}const Ya=FP(Ex);Ya.Axios=wp;Ya.CanceledError=Tx;Ya.CancelToken=aU;Ya.isCancel=OP;Ya.VERSION=DP;Ya.toFormData=Jw;Ya.AxiosError=Tn;Ya.Cancel=Ya.CanceledError;Ya.all=function(r){return Promise.all(r)};Ya.spread=oU;Ya.isAxiosError=iU;Ya.mergeConfig=Ep;Ya.AxiosHeaders=Mi;Ya.formToJSON=s=>TP(Kt.isHTMLForm(s)?new FormData(s):s);Ya.getAdapter=RP.getAdapter;Ya.HttpStatusCode=DS;Ya.default=Ya;const{Axios:j2e,AxiosError:C2e,CanceledError:S2e,isCancel:N2e,CancelToken:k2e,VERSION:_2e,all:E2e,Cancel:T2e,isAxiosError:O2e,spread:P2e,toFormData:A2e,AxiosHeaders:M2e,HttpStatusCode:I2e,formToJSON:R2e,getAdapter:D2e,mergeConfig:L2e}=Ya,Uv={getItem:s=>{try{return typeof window>"u"||!window.localStorage?null:localStorage.getItem(s)}catch(r){return console.error("Error reading from localStorage:",r),null}},setItem:(s,r)=>{try{if(typeof window>"u"||!window.localStorage)return;localStorage.setItem(s,r)}catch(e){console.error("Error writing to localStorage:",e)}},removeItem:s=>{try{if(typeof window>"u"||!window.localStorage)return;localStorage.removeItem(s)}catch(r){console.error("Error removing from localStorage:",r)}},clear:()=>{try{if(typeof window>"u"||!window.localStorage)return;localStorage.clear()}catch(s){console.error("Error clearing localStorage:",s)}}},nt=Ya.create({baseURL:"https://backend.ziplofy.com/api",timeout:1e4,headers:{"Content-Type":"application/json"},withCredentials:!0});nt.interceptors.request.use(s=>{const r=Uv.getItem("accessToken");return r&&(s.headers.Authorization=`Bearer ${r}`),s},s=>Promise.reject(s));const uE=Object.freeze(Object.defineProperty({__proto__:null,axiosi:nt},Symbol.toStringTag,{value:"Module"})),BP=u.createContext(void 0),lU=({children:s})=>{const[r,e]=u.useState(null);u.useEffect(()=>{const i=new URLSearchParams(window.location.search),l=i.get("accessToken");if(l){console.log("Token found in URL, setting in localStorage"),localStorage.setItem("accessToken",l),i.delete("accessToken");const c=`${window.location.pathname}${i.toString()?"?"+i.toString():""}`;window.history.replaceState({},"",c)}},[]);const t=u.useCallback(async()=>{try{const{data:i}=await nt.get("/auth/me");e(i)}catch(i){console.error("Error fetching user:",i),i.response?.status===401&&(console.log("User unauthorized, clearing user state and redirecting to auth service"),e(null),localStorage.removeItem("accessToken"),localStorage.removeItem("token"))}},[]);u.useEffect(()=>{localStorage.getItem("accessToken")&&!r&&t()},[t]);const a=u.useCallback(()=>{e(null)},[]),o={loggedInUser:r,fetchLoggedInUser:t,clearUser:a};return n.jsx(BP.Provider,{value:o,children:s})},M2=()=>{const s=u.useContext(BP);if(!s)throw new Error("useUser must be used within a UserProvider");return s},zP=u.createContext(void 0),cU=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(null),[o,i]=u.useState(!1),[l,c]=u.useState(null),d=u.useCallback(async()=>{try{i(!0),c(null);const b=await nt.get("/stores/my-stores"),{success:v,data:w}=b.data;v?Array.isArray(w)?(e(w),w.length>0?a(w[0]._id):a(null)):(e([w]),a(w._id)):c("Failed to fetch stores")}catch(b){console.error("Error fetching stores:",b),c(b.response?.data?.message||"Failed to fetch stores")}finally{i(!1)}},[]),p=u.useCallback(async b=>{try{i(!0),c(null);const v=await nt.post("/stores/",b),{success:w,data:C}=v.data;if(w){const k=C;e(N=>[k,...N]),a(k._id)}else c("Failed to create store")}catch(v){throw console.error("Error creating store:",v),c(v.response?.data?.message||"Failed to create store"),v}finally{i(!1)}},[]),h=u.useCallback(async(b,v)=>{try{i(!0),c(null);const w=await nt.put(`/stores/${b}`,v),{success:C,data:k}=w.data;if(!C)throw new Error("Failed to update store");return e(N=>N.map(O=>O._id===b?k:O)),k}catch(w){throw console.error("Error updating store:",w),c(w.response?.data?.message||"Failed to update store"),w}finally{i(!1)}},[]),g=u.useCallback(()=>{e([]),a(null),c(null),i(!1)},[]);u.useEffect(()=>{d()},[d]),u.useEffect(()=>{if(t)try{localStorage.setItem("activeStoreId",t),sessionStorage.setItem("activeStoreId",t),localStorage.setItem("storeId",t),sessionStorage.setItem("storeId",t)}catch(b){console.warn("Failed to persist activeStoreId:",b)}},[t]),u.useEffect(()=>{if(!t)try{const b=localStorage.getItem("activeStoreId")||sessionStorage.getItem("activeStoreId");b&&r.some(w=>w._id===b)&&a(b)}catch(b){console.warn("Failed to load activeStoreId from storage:",b)}},[]),u.useEffect(()=>{if(!t)return;const b=r.find(v=>v._id===t);b&&(ha.dismiss(),ha.success(`Switched to ${b.storeName}`))},[t,r]);const y={stores:r,activeStoreId:t,loading:o,error:l,fetchStores:d,createStore:p,updateStore:h,setActiveStoreId:a,clearStores:g,setStores:e};return n.jsx(zP.Provider,{value:y,children:s})},Ur=()=>{const s=u.useContext(zP);if(s===void 0)throw new Error("useStore must be used within a StoreProvider");return s},$P=u.createContext(void 0),dU=({children:s})=>{const[r,e]=u.useState(null),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async p=>{a(!0),i(null);try{const{data:h}=await nt.get(`/store-subdomain/store/${p}`);e(h.data)}catch(h){i(h?.response?.data?.message||"Failed to fetch store subdomain"),e(null)}finally{a(!1)}},[]),c=u.useCallback(async p=>{try{a(!0),i(null);const{data:h}=await nt.get("/store-subdomain/check",{params:{subdomain:p}});return h.data}catch(h){return i(h?.response?.data?.message||"Invalid or unknown subdomain"),null}finally{a(!1)}},[]),d=u.useMemo(()=>({storeSubdomain:r,loading:t,error:o,getByStoreId:l,validateSubdomain:c}),[r,t,o,l,c]);return n.jsx($P.Provider,{value:d,children:s})},uU=()=>{const s=u.useContext($P);if(!s)throw new Error("useStoreSubdomain must be used within StoreSubdomainProvider");return s},fU=()=>{const{activeStoreId:s}=Ur(),{storeSubdomain:r,getByStoreId:e,loading:t,error:a}=uU();u.useEffect(()=>{s&&e(s)},[s,e]);const o=u.useCallback(()=>{console.log("Manage domain clicked")},[]);return n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h6",{className:"text-base font-medium text-gray-900 mb-1.5",children:"Customize your domain"}),a?n.jsx("p",{className:"text-sm text-red-600",children:a}):n.jsxs("p",{className:"text-sm text-gray-600",children:["Default domain:"," ",t?"Loading...":r?.url?n.jsx("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"text-gray-900 hover:underline",children:r.url.replace(/^https?:\/\//,"")}):""]})]}),n.jsx("button",{onClick:o,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:"Manage"})]})},pU=({newCustomers:s=110,percentageChange:r=7.5,lastMonth:e=89,minWidth:t})=>n.jsxs("div",{className:"bg-white rounded-lg p-4 flex-1 border border-gray-200",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsx("h3",{className:"text-gray-900 font-medium text-base",children:"New Customer"}),n.jsx("div",{className:"w-9 h-9 rounded-full bg-gray-100 flex items-center justify-center",children:n.jsx(qy,{className:"w-5 h-5 text-gray-600"})})]}),n.jsxs("div",{className:"flex items-baseline gap-2 mb-3",children:[n.jsx("span",{className:"text-2xl font-semibold text-gray-900",children:s.toLocaleString()}),n.jsxs("div",{className:"flex items-center gap-1 bg-pink-50 text-pink-700 px-2 py-1 rounded text-xs",children:[n.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"})}),n.jsxs("span",{className:"font-medium",children:[r,"%"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx("span",{className:"text-gray-500",children:"Last month:"}),n.jsx("span",{className:"text-gray-900 font-medium",children:e.toLocaleString()})]})]}),hU=({returnProducts:s=72,percentageChange:r=6,lastMonth:e=60,minWidth:t})=>n.jsxs("div",{className:"bg-white rounded-lg p-4 flex-1 border border-gray-200",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsx("h3",{className:"text-gray-900 font-medium text-base",children:"Return Products"}),n.jsx("div",{className:"w-9 h-9 rounded-full bg-gray-100 flex items-center justify-center",children:n.jsx(ed,{className:"w-5 h-5 text-gray-600"})})]}),n.jsxs("div",{className:"flex items-baseline gap-2 mb-3",children:[n.jsx("span",{className:"text-2xl font-semibold text-gray-900",children:s.toLocaleString()}),n.jsxs("div",{className:"flex items-center gap-1 bg-red-50 text-red-700 px-2 py-1 rounded text-xs",children:[n.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})}),n.jsxs("span",{className:"font-medium",children:[r,"%"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx("span",{className:"text-gray-500",children:"Last month:"}),n.jsx("span",{className:"text-gray-900 font-medium",children:e.toLocaleString()})]})]}),mU=({timeframe:s="This Week",data:r=[{day:"Fri",value:17},{day:"Sat",value:13},{day:"Sun",value:22},{day:"Mon",value:13},{day:"Tue",value:17},{day:"Wed",value:22},{day:"Thu",value:17}]})=>{const[e,t]=u.useState(s),[a,o]=u.useState(!1),i=u.useRef(null),l=30,c=150,d=600,p=60,h=30,g=60,y=20,b=["This Week","This Month","This Year"],v=C=>C/l*c,w=C=>g+C*(p+h);return u.useEffect(()=>{const C=k=>{i.current&&!i.current.contains(k.target)&&o(!1)};return a&&document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[a]),n.jsxs("div",{className:"bg-white rounded-lg p-4 min-h-80 border border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"text-base font-medium text-gray-900",children:"Revenue analytics"}),n.jsxs("div",{className:"relative",ref:i,children:[n.jsxs("button",{onClick:()=>o(!a),className:"flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:[e,n.jsx(Ys,{className:"w-4 h-4"})]}),a&&n.jsx("div",{className:"absolute right-0 top-full mt-1 bg-white border border-gray-200 rounded shadow-md py-1 z-10 min-w-[120px]",children:b.map(C=>n.jsx("button",{onClick:()=>{t(C),o(!1)},className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:C},C))})]})]}),n.jsx("div",{className:"relative",children:n.jsxs("svg",{width:"100%",height:c+y+40,viewBox:`0 0 ${d} ${c+y+40}`,children:[[0,5,10,15,20,25,30].map(C=>{const k=y+c-C/l*c;return n.jsxs("g",{children:[n.jsx("line",{x1:g-10,y1:k,x2:d-20,y2:k,stroke:"#e5e7eb",strokeWidth:"1",strokeDasharray:"4 4"}),n.jsxs("text",{x:g-15,y:k+4,textAnchor:"end",className:"text-xs fill-gray-500",fontSize:"12",children:[C,"k"]})]},C)}),r.map((C,k)=>{const N=v(C.value),O=w(k),R=y+c-N;return n.jsxs("g",{children:[n.jsx("rect",{x:O,y:R,width:p,height:N,fill:"#6366f1",rx:"4",className:"hover:opacity-80 transition-opacity"}),n.jsx("text",{x:O+p/2,y:y+c+20,textAnchor:"middle",className:"text-xs fill-gray-600",fontSize:"12",children:C.day})]},C.day)})]})})]})},gU=({data:s=[{month:"Jan",profit:23,loss:23},{month:"Feb",profit:20,loss:23},{month:"Mar",profit:23,loss:28},{month:"Apr",profit:37,loss:18},{month:"May",profit:33,loss:20},{month:"Jun",profit:23,loss:18},{month:"Jul",profit:21,loss:22}]})=>{const c=p=>p/50*150,d=p=>60+p*85;return n.jsxs("div",{className:"bg-white rounded-lg p-4 min-h-80 border border-gray-200",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("h3",{className:"text-base font-medium text-gray-900 mb-1.5",children:"Total Income"}),n.jsx("p",{className:"text-sm text-gray-500",children:"View your income on a certain period of time"})]}),n.jsx("div",{className:"mb-3",children:n.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Profit and Loss"})}),n.jsx("div",{className:"relative",children:n.jsxs("svg",{width:"100%",height:210,viewBox:"0 0 600 210",children:[[0,10,20,30,40,50].map(p=>{const h=170-p/50*150;return n.jsxs("g",{children:[n.jsx("line",{x1:50,y1:h,x2:580,y2:h,stroke:"#e5e7eb",strokeWidth:"1",strokeDasharray:"4 4"}),n.jsx("text",{x:45,y:h+4,textAnchor:"end",className:"text-xs fill-gray-500",fontSize:"12",children:p===0?"00":`${p}k`})]},p)}),s.map((p,h)=>{const g=c(p.profit),y=c(p.loss),b=g+y,v=d(h),w=170-b,C=w+g;return n.jsxs("g",{children:[n.jsx("rect",{x:v,y:w,width:60,height:g,fill:"#6366f1",rx:"4",className:"hover:opacity-80 transition-opacity"}),n.jsx("rect",{x:v,y:C,width:60,height:y,fill:"#e5e7eb",rx:"4",className:"hover:opacity-80 transition-opacity"}),n.jsx("text",{x:v+60/2,y:190,textAnchor:"middle",className:"text-xs fill-gray-600",fontSize:"12",children:p.month})]},p.month)})]})})]})},yU=({totalRevenue:s=8220.64,lastMonth:r=620,currency:e="$",minWidth:t})=>{const a=o=>`${e}${o.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`;return n.jsxs("div",{className:"bg-white rounded-lg p-4 flex-1 border border-gray-200",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsx("h3",{className:"text-gray-900 font-medium text-base",children:"Total Revenue"}),n.jsx("div",{className:"w-9 h-9 rounded-full bg-gray-100 flex items-center justify-center",children:n.jsx(b2,{className:"w-5 h-5 text-gray-600"})})]}),n.jsx("div",{className:"mb-3",children:n.jsx("span",{className:"text-2xl font-semibold text-gray-900",children:a(s)})}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx("span",{className:"text-gray-500",children:"Last month:"}),n.jsx("span",{className:"text-gray-900 font-medium",children:a(r)})]})]})},xU=({totalSales:s=2500,percentageChange:r=4.9,lastMonth:e=2345})=>n.jsxs("div",{className:"bg-white rounded-lg p-4 flex-1 border border-gray-200",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsx("h3",{className:"text-gray-900 font-medium text-base",children:"Total Sales"}),n.jsx("div",{className:"w-9 h-9 rounded-full bg-gray-100 flex items-center justify-center",children:n.jsx(Am,{className:"w-5 h-5 text-gray-600"})})]}),n.jsxs("div",{className:"flex items-baseline gap-2 mb-3",children:[n.jsx("span",{className:"text-2xl font-semibold text-gray-900",children:s.toLocaleString()}),n.jsxs("div",{className:"flex items-center gap-1 bg-green-50 text-green-700 px-2 py-1 rounded text-xs",children:[n.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"})}),n.jsxs("span",{className:"font-medium",children:[r,"%"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx("span",{className:"text-gray-500",children:"Last month:"}),n.jsx("span",{className:"text-gray-900 font-medium",children:e.toLocaleString()})]})]}),UP=()=>n.jsxs("div",{className:"flex gap-3 w-full",children:[n.jsxs("div",{className:"flex-1 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex gap-3",children:[n.jsx(xU,{}),n.jsx(hU,{})]}),n.jsx("div",{children:n.jsx(mU,{})})]}),n.jsxs("div",{className:"flex-1 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex gap-3",children:[n.jsx(pU,{}),n.jsx(yU,{})]}),n.jsx("div",{children:n.jsx(gU,{})})]})]}),vU=({steps:s=[{id:"theme",title:"Make your store stand out with the right theme",buttonText:"Configure Theme",buttonVariant:"primary"},{id:"domain",title:"Set your own domain for your store",description:"Added Domain: fashion-0-60058040737.ziplofy.com",buttonText:"Add Domain",buttonVariant:"primary"},{id:"items",title:"Add all the items that you'll be selling on your store",buttonText:"Add Itmes",buttonVariant:"primary"},{id:"shipping",title:"Set up shipping zones to deliver your items efficiently",buttonText:"Added",buttonVariant:"added"},{id:"payment",title:"Connect payment gateways to start accepting online payments",buttonText:"Configure Online Payments",buttonVariant:"primary"}],onStepClick:r,onTestOrderClick:e})=>{const t=u.useCallback(o=>{r?r(o):console.log("Step clicked:",o)},[r]),a=u.useCallback(()=>{e?e():console.log("Test order clicked")},[e]);return n.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[n.jsx("div",{className:"text-center mb-3",children:n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Complete these few steps to launch your store"})}),n.jsx("div",{className:"space-y-2 mb-3",children:s.map(o=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded border border-gray-200",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-0.5",children:o.title}),o.description&&n.jsx("p",{className:"text-xs text-gray-500 truncate",children:o.description})]}),n.jsx("button",{onClick:()=>t(o.id),className:`ml-3 px-3 py-1.5 text-sm font-medium rounded border transition-colors whitespace-nowrap flex-shrink-0 ${o.buttonVariant==="added"?"bg-white text-gray-600 border-gray-200 hover:bg-gray-50":"bg-white text-gray-900 border-gray-200 hover:bg-gray-50"}`,children:o.buttonText})]},o.id))}),n.jsx("div",{className:"bg-gray-50 rounded p-3 border border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-0.5",children:"Try placing a test order yourself"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Experience how the process works from start to finish"})]}),n.jsx("button",{onClick:a,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-600 rounded hover:bg-gray-500 transition-colors whitespace-nowrap flex-shrink-0",children:"See How It Works"})]})})]})},bU=({resource:s,onClick:r})=>n.jsxs("button",{onClick:()=>r?.(s.id),className:"w-full flex items-center gap-3 p-3 bg-white border border-gray-200 rounded hover:bg-gray-50 transition-colors text-left",children:[n.jsx("div",{className:"flex-shrink-0 w-5 h-5 flex items-center justify-center",children:s.icon}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.title})}),n.jsx("div",{className:"flex-shrink-0",children:n.jsx(As,{className:"w-4 h-4 text-gray-400"})})]}),wU=({resources:s=[{id:"help-center",title:"Visit our Help Cneter",icon:n.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})},{id:"academy",title:"Try our Academy Page",icon:n.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})},{id:"forum",title:"Try our Forum Area",icon:n.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}],onResourceClick:r})=>{const e=u.useCallback(t=>{r?r(t):console.log("Resource clicked:",t)},[r]);return n.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200 flex-1",children:[n.jsx("div",{className:"mb-3",children:n.jsxs("h3",{className:"text-base font-medium text-gray-900",children:["Other Helpful ",n.jsx("span",{className:"font-medium",children:"Resources"})]})}),n.jsx("div",{className:"space-y-2",children:s.map(t=>n.jsx(bU,{resource:t,onClick:e},t.id))})]})},Zg=({item:s,onClick:r})=>n.jsxs("button",{onClick:()=>r?.(s.id),className:"w-full flex items-start gap-3 p-3 bg-white border border-gray-200 rounded hover:bg-gray-50 transition-colors text-left",children:[n.jsx("div",{className:"flex-shrink-0 w-8 h-8 flex items-center justify-center",children:s.icon}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:s.title}),n.jsx("p",{className:"text-xs text-gray-600",children:s.description})]}),n.jsx("div",{className:"flex-shrink-0",children:n.jsx(As,{className:"w-4 h-4 text-gray-400"})})]}),jU=({onItemClick:s})=>{const r=u.useCallback(e=>{s?s(e):console.log("Improvement item clicked:",e)},[s]);return n.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[n.jsx("div",{className:"mb-3",children:n.jsxs("h3",{className:"text-base font-medium text-gray-900",children:["Here are some ways to ",n.jsx("span",{className:"font-medium",children:"improve your store"})]})}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("div",{className:"flex-1 flex gap-2 flex-col",children:[n.jsx(Zg,{item:{id:"taxes",title:"Set Up taxes",description:"Configure Tax Rates & Rules to boost Sales",icon:n.jsxs("svg",{className:"w-5 h-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[n.jsx("circle",{cx:"7",cy:"11",r:"2.5",strokeWidth:1.5}),n.jsx("circle",{cx:"15",cy:"13",r:"2.5",strokeWidth:1.5}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 11l8 2"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v3m0 10v3"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 6l-3 3M5 16l3-3"})]})},onClick:r}),n.jsx(Zg,{item:{id:"collections",title:"Manage Collections",description:"Combine different items to show under a common filter",icon:n.jsxs("svg",{className:"w-5 h-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[n.jsx("rect",{x:"6",y:"4",width:"12",height:"4",rx:"1",strokeWidth:1.5}),n.jsx("rect",{x:"6",y:"10",width:"12",height:"4",rx:"1",strokeWidth:1.5}),n.jsx("rect",{x:"6",y:"16",width:"12",height:"4",rx:"1",strokeWidth:1.5})]})},onClick:r}),n.jsx(Zg,{item:{id:"digital-downloads",title:"Enable Digital Downloads",description:"Add digital files to be downloaded with orders",icon:n.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})},onClick:r})]}),n.jsxs("div",{className:"flex-1 flex gap-2 flex-col",children:[n.jsx(Zg,{item:{id:"coupons",title:"Create Coupons",description:"Add and manage discounts for orders",icon:n.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"})})},onClick:r}),n.jsx(Zg,{item:{id:"shipping",title:"Shipping Integration",description:"Integrate with shipping carriers for real-time tracking and shipping",icon:n.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h1m8-1a1 1 0 01-1 1H9m4-1V8a1 1 0 011-1h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V16a1 1 0 01-1 1h-1m-6-1a1 1 0 001 1h1M5 17a2 2 0 104 0m-4 0a2 2 0 114 0m6 0a2 2 0 104 0m-4 0a2 2 0 114 0"})})},onClick:r})]})]})]})},CU=({videoUrl:s,title:r="Watch a quick overview video",onPlay:e})=>n.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200 flex-1",children:[n.jsx("div",{className:"mb-3",children:n.jsxs("h3",{className:"text-base font-medium text-gray-900",children:["Watch a quick ",n.jsx("span",{className:"font-medium",children:"overview video"})]})}),n.jsx("div",{className:"relative w-full aspect-video bg-gray-600 rounded overflow-hidden",children:s?n.jsx("iframe",{src:s,className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Overview Video"}):n.jsx("div",{className:"w-full h-full bg-gray-600"})})]}),SU=({onStepClick:s,onTestOrderClick:r,onImprovementClick:e,onResourceClick:t})=>n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"text-center mb-2",children:[n.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-1.5",children:"Welcome to Ziplofy"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Let's set up your e-commerce store and manage your business effectively"})]}),n.jsx(vU,{onStepClick:s,onTestOrderClick:r}),n.jsx(jU,{onItemClick:e}),n.jsxs("div",{className:"flex gap-3 bg-white border border-gray-200 rounded-lg p-4",children:[n.jsx(CU,{}),n.jsx(wU,{onResourceClick:t})]})]}),Yt=({children:s,gridSize:r="20px",gridColor:e="102,102,102",gridOpacity:t=.1})=>n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%",backgroundImage:`
            linear-gradient(to right, rgba(${e}, ${t}) 1px, transparent 1px),
            linear-gradient(to bottom, rgba(${e}, ${t}) 1px, transparent 1px)
          `,backgroundSize:`${r} ${r}`,backgroundPosition:"0 0",zIndex:0,pointerEvents:"none"}}),n.jsx("div",{className:"min-h-screen relative",style:{position:"relative",zIndex:1},children:s})]});function NU(){const[s,r]=u.useState(!1),[e,t]=u.useState("dashboard"),{socket:a}=Pz(),{loggedInUser:o}=M2(),i=u.useRef(null);u.useCallback(()=>{a&&a.connected?a.emit("hireDeveloper"):gr.error("socket not connected")},[a]),u.useCallback(()=>{a&&a.connected?(a.emit(lb.EndMeeting),gr.success("we have notified the developer to send requirements form, so that you can approve it")):gr.error("Socket not connected")},[a,o?.assignedSupportDeveloperId?.id]),u.useCallback(()=>{r(!0)},[]);const l=u.useMemo(()=>{if(!o?.assignedSupportDeveloperId)return console.log("No assigned developer found"),"https://calendly.com/default/30min";const g=o.assignedSupportDeveloperId?.email;console.log("Developer email:",g);const y="gibberish";console.log("Extracted username:",y);const b=`https://calendly.com/${y}/30min`;return console.log("Generated Calendly URL:",b),b},[o?.assignedSupportDeveloperId]),c=u.useCallback(()=>{r(!1)},[]),d=u.useCallback(g=>{i.current&&!i.current.contains(g.target)&&c()},[c]),p=u.useCallback(g=>{g.key==="Escape"&&s&&c()},[s,c]),h=u.useCallback(g=>{g.stopPropagation()},[]);return u.useCallback(()=>{console.log("Ask AI clicked")},[]),u.useCallback(()=>{console.log("Get tasks updates clicked")},[]),u.useCallback(()=>{console.log("Create workspace clicked")},[]),u.useCallback(()=>{console.log("Connect apps clicked")},[]),u.useEffect(()=>(s&&(document.addEventListener("mousedown",d),document.body.style.overflow="hidden"),()=>{document.removeEventListener("mousedown",d),document.body.style.overflow="unset"}),[s,d]),u.useEffect(()=>(s&&document.addEventListener("keydown",p),()=>{document.removeEventListener("keydown",p)}),[s,p]),o?.name?.split(" ")[0],n.jsx(n.Fragment,{children:n.jsxs(Yt,{children:[n.jsx("div",{className:"relative pt-3 px-4 pb-6",style:{position:"relative",zIndex:1},children:n.jsxs("div",{className:"max-w-[1400px] mx-auto flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[n.jsx("button",{onClick:()=>t("dashboard"),className:`pb-2 text-base px-1 font-medium transition-colors ${e==="dashboard"?"text-gray-900 border-b-2 border-gray-900":"text-gray-500 hover:text-gray-700"}`,children:"Dashboard"}),n.jsx("button",{onClick:()=>t("getting-started"),className:`pb-2 px-1 text-base font-medium transition-colors ${e==="getting-started"?"text-gray-900 border-b-2 border-gray-900":"text-gray-500 hover:text-gray-700"}`,children:"Getting Started"})]}),n.jsxs("div",{className:"flex flex-col gap-3",children:[e==="dashboard"?n.jsx(UP,{}):n.jsx(SU,{}),e==="dashboard"&&n.jsx("div",{children:n.jsx(fU,{})})]})]})}),s&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[1400]",onClick:c,"aria-hidden":"true"}),n.jsx("div",{className:"fixed inset-0 z-[1500] flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{ref:i,className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] flex flex-col shadow-2xl pointer-events-auto",onClick:h,children:[n.jsx("button",{onClick:c,className:"absolute top-2 right-2 p-1.5 bg-white/80 hover:bg-white/90 rounded-lg transition-colors z-10","aria-label":"Close",children:n.jsx(Zs,{className:"w-5 h-5 text-gray-500"})}),n.jsx("div",{className:"relative h-[80vh] min-h-[600px]",children:n.jsx(LB,{url:l,styles:{height:"100%",width:"100%"},pageSettings:{backgroundColor:"ffffff",hideEventTypeDetails:!1,hideLandingPageDetails:!1,primaryColor:"4caf50",textColor:"4d5055"},prefill:{name:o?.name||"",email:o?.email||""},utm:{utmCampaign:"developer-meeting",utmSource:"ziplofy",utmMedium:"website"}})})]})})]})]})})}const kU=240,fE=[{text:"Home",icon:GO,path:"/"},{text:"Orders",icon:Am,path:"/orders",children:[{text:"Orders",path:"/orders"},{text:"Drafts",path:"/orders/drafts"},{text:"Abandoned Carts",path:"/orders/abandoned-carts"}]},{text:"Products",icon:ed,path:"/products",children:[{text:"Collections",path:"/products/collections"},{text:"Inventory",path:"/products/inventory"},{text:"Purchase orders",path:"/products/purchase-orders"},{text:"Transfers",path:"/products/transfers"},{text:"Gift cards",path:"/products/gift-cards"}]},{text:"Customers",icon:qy,path:"/customers",children:[{text:"Segments",path:"/customers/segments"}]},{text:"Marketing",icon:YF,path:"/marketing",children:[{text:"Campaigns",path:"/marketing/campaigns"},{text:"Attribution",path:"/marketing/attribution"},{text:"Automations",path:"/marketing/automations"}]},{text:"Discounts",icon:_p,path:"/discounts"},{text:"Content",icon:Qd,path:"/content",children:[{text:"Metaobjects",path:"/content/metaobjects"},{text:"Files",path:"/content/files"},{text:"Menus",path:"/content/menus"},{text:"Blog posts",path:"/content/blog-posts"}]},{text:"Markets",icon:Do,path:"/markets",children:[{text:"Catalogs",path:"/markets/catalogs"}]},{text:"Analytics",icon:WO,path:"/analytics",children:[{text:"Reports",path:"/analytics/reports"},{text:"Live View",path:"/analytics/live-view"}]},{text:"Online Store",icon:Do,path:"/online-store",children:[{text:"Themes",path:"/online-store/themes"},{text:"Pages",path:"/online-store/pages"},{text:"Preference",path:"/online-store/preference"}]},{text:"Themes",icon:sB,path:"/themes/all-themes"},{text:"Tag Management",icon:_p,path:"/tag-management"},{text:"Vendors",icon:qy,path:"/vendors"}];function _U(){const s=Ri(),r=u.useMemo(()=>{const i={};return fE.forEach(l=>{l.children&&(i[l.text]=s.pathname.startsWith(l.path))}),i},[s.pathname]),[e,t]=u.useState(r);u.useEffect(()=>t(r),[r]);const a=u.useCallback(i=>{t(l=>({...l,[i]:!l[i]}))},[]),o=u.useCallback(i=>s.pathname===i||s.pathname.startsWith(i+"/"),[s.pathname]);return n.jsxs("aside",{className:"fixed bg-white border-r border-gray-200 left-0 top-[60px] h-[calc(100vh-60px)] w-[240px] flex flex-col shrink-0 z-50",style:{width:`${kU}px`},children:[n.jsx("nav",{className:"flex-1 overflow-y-auto",children:n.jsx("ul",{className:"p-0 m-0 list-none",children:fE.map(i=>{const l=!!i.children?.length,c=e[i.text]??!1,d=i.icon,p=o(i.path);return n.jsxs("li",{children:[n.jsxs(Zc,{to:i.path,onClick:()=>{l&&a(i.text)},className:`flex items-center gap-3 px-4 py-2.5 text-gray-700 hover:bg-gray-50 transition-colors ${p?"bg-gray-50":""}`,children:[n.jsx(d,{className:"w-4 h-4 shrink-0"}),n.jsx("span",{className:"flex-1 text-sm font-medium",children:i.text}),l&&n.jsx("span",{className:"shrink-0",children:c?n.jsx(uf,{className:"w-4 h-4 text-gray-500"}):n.jsx(Ys,{className:"w-4 h-4 text-gray-500"})})]}),l&&n.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${c?"max-h-[1000px] opacity-100":"max-h-0 opacity-0"}`,children:n.jsx("ul",{className:"p-0 m-0 list-none",children:i.children.map(h=>{const g=s.pathname===h.path;return n.jsx("li",{children:n.jsx(Zc,{to:h.path,className:`flex items-center gap-2 px-3 py-1.5 pl-10 text-gray-600 hover:bg-gray-50 transition-colors ${g?"bg-gray-50 text-gray-900":""}`,children:n.jsx("span",{className:"text-xs",children:h.text})})},h.text)})})})]},i.text)})})}),n.jsx("div",{className:"border-t border-gray-200 w-full mt-2"}),n.jsx("nav",{children:n.jsx("ul",{className:"p-0 m-0 list-none",children:n.jsx("li",{children:n.jsxs(Zc,{to:"/settings/general",className:`flex items-center gap-3 px-4 py-2.5 text-gray-700 hover:bg-gray-50 transition-colors ${s.pathname.startsWith("/settings")?"bg-gray-50":""}`,children:[n.jsx(v2,{className:"w-4 h-4 shrink-0"}),n.jsx("span",{className:"flex-1 text-sm font-medium",children:"Settings"})]})})})})]})}const VP=u.createContext(void 0),EU=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),[l,c]=u.useState(null),d=u.useCallback(()=>{i(null)},[]),p=u.useCallback(async y=>{try{a(!0),i(null);const b=await nt.post("/amount-off-products-discounts",y);return b.data.success&&e(v=>[b.data.data,...v]),b.data}catch(b){const v=b.response?.data?.error||b.message||"Failed to create discount";throw i(v),new Error(v)}finally{a(!1)}},[]),h=u.useCallback(async(y,b)=>{try{a(!0),i(null);const v=new URLSearchParams;b?.page&&v.append("page",String(b.page)),b?.limit&&v.append("limit",String(b.limit)),b?.status&&v.append("status",b.status),b?.method&&v.append("method",b.method);const w=`/amount-off-products-discounts/store/${y}${v.toString()?`?${v.toString()}`:""}`,k=(await nt.get(w)).data,N=(k.data||[]).map(O=>({_id:O._id,storeId:O.storeId,method:O.method,discountCode:O.discountCode,title:O.title,allowDiscountOnChannels:O.allowDiscountOnChannels,limitTotalUses:O.limitTotalUses,totalUsesLimit:O.totalUsesLimit,limitOneUsePerCustomer:O.limitOneUsePerCustomer,valueType:O.valueType,percentage:O.percentage,fixedAmount:O.fixedAmount,appliesTo:O.appliesTo,oncePerOrder:O.oncePerOrder,eligibility:O.eligibility,applyOnPOSPro:O.applyOnPOSPro,minimumPurchase:O.minimumPurchase,minimumAmount:O.minimumAmount,minimumQuantity:O.minimumQuantity,productDiscounts:O.productDiscounts,orderDiscounts:O.orderDiscounts,shippingDiscounts:O.shippingDiscounts,startDate:O.startDate,startTime:O.startTime,setEndDate:O.setEndDate,endDate:O.endDate,endTime:O.endTime,status:O.status,createdAt:O.createdAt,updatedAt:O.updatedAt,targetProductIds:Array.isArray(O.targetProductIds)?O.targetProductIds.map(R=>typeof R=="string"?R:R?._id).filter(Boolean):[],targetCollectionIds:Array.isArray(O.targetCollectionIds)?O.targetCollectionIds.map(R=>typeof R=="string"?R:R?._id).filter(Boolean):[],targetCustomerSegmentIds:Array.isArray(O.targetCustomerSegmentIds)?O.targetCustomerSegmentIds.map(R=>typeof R=="string"?R:R?._id).filter(Boolean):[],targetCustomerIds:Array.isArray(O.targetCustomerIds)?O.targetCustomerIds.map(R=>typeof R=="string"?R:R?._id).filter(Boolean):[],targetProductDetails:Array.isArray(O.targetProductIds)?O.targetProductIds.filter(R=>typeof R!="string"):[],targetCollectionDetails:Array.isArray(O.targetCollectionIds)?O.targetCollectionIds.filter(R=>typeof R!="string"):[],targetCustomerSegmentDetails:Array.isArray(O.targetCustomerSegmentIds)?O.targetCustomerSegmentIds.filter(R=>typeof R!="string"):[],targetCustomerDetails:Array.isArray(O.targetCustomerIds)?O.targetCustomerIds.filter(R=>typeof R!="string"):[]}));return e(N),c(k.pagination||null),k}catch(v){const w=v.response?.data?.error||v.message||"Failed to fetch discounts";throw i(w),new Error(w)}finally{a(!1)}},[]),g={discounts:r,loading:t,error:o,pagination:l,createDiscount:p,fetchDiscountsByStoreId:h,clearError:d,setDiscounts:e};return n.jsx(VP.Provider,{value:g,children:s})},I2=()=>{const s=u.useContext(VP);if(s===void 0)throw new Error("useAmountOffProductsDiscount must be used within an AmountOffProductsDiscountProvider");return s},HP=u.createContext(void 0),TU=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async y=>{try{a(!0),i(null);const b=await nt.get(`/customer-tags/store/${y}`);e(b.data.data)}catch(b){const v=b.response?.data?.message||b.message||"Failed to fetch customer tags";i(v),console.error("Error fetching customer tags:",b)}finally{a(!1)}},[]),c=u.useCallback(async(y,b)=>{try{a(!0),i(null);const w=(await nt.post("/customer-tags",{storeId:y,name:b.trim()})).data.data;return e(C=>[w,...C]),w}catch(v){const w=v.response?.data?.message||v.message||"Failed to create customer tag";throw i(w),console.error("Error creating customer tag:",v),v}finally{a(!1)}},[]),d=u.useCallback(async y=>{try{a(!0),i(null),await nt.delete(`/customer-tags/${y}`),e(b=>b.filter(v=>v._id!==y))}catch(b){const v=b.response?.data?.message||b.message||"Failed to delete customer tag";throw i(v),console.error("Error deleting customer tag:",b),b}finally{a(!1)}},[]),p=u.useCallback(()=>{i(null)},[]),h=u.useCallback(()=>{e([])},[]),g={customerTags:r,loading:t,error:o,fetchCustomerTags:l,addCustomerTag:c,deleteCustomerTag:d,clearError:p,clearCustomerTags:h};return n.jsx(HP.Provider,{value:g,children:s})},R2=()=>{const s=u.useContext(HP);if(s===void 0)throw new Error("useCustomerTags must be used within a CustomerTagsProvider");return s},WP=u.createContext(void 0),OU=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async b=>{try{a(!0),i(null);const v=await nt.get(`/customer-timeline/customer/${b}`);e(v.data.data)}catch(v){const w=v.response?.data?.message||v.message||"Failed to fetch timeline";throw i(w),v}finally{a(!1)}},[]),c=u.useCallback(async b=>{try{a(!0),i(null);const w=(await nt.post("/customer-timeline",b)).data.data;return e(C=>[w,...C]),w}catch(v){const w=v.response?.data?.message||v.message||"Failed to create timeline entry";throw i(w),v}finally{a(!1)}},[]),d=u.useCallback(async(b,v)=>{try{a(!0),i(null);const C=(await nt.patch(`/customer-timeline/${b}`,v)).data.data;return e(k=>k.map(N=>N._id===b?C:N)),C}catch(w){const C=w.response?.data?.message||w.message||"Failed to update timeline entry";throw i(C),w}finally{a(!1)}},[]),p=u.useCallback(async b=>{try{a(!0),i(null),await nt.delete(`/customer-timeline/${b}`),e(v=>v.filter(w=>w._id!==b))}catch(v){const w=v.response?.data?.message||v.message||"Failed to delete timeline entry";throw i(w),v}finally{a(!1)}},[]),h=u.useCallback(()=>i(null),[]),g=u.useCallback(()=>e([]),[]),y={timeline:r,loading:t,error:o,fetchCustomerTimelineByCustomerId:l,createCustomerTimeline:c,updateCustomerTimeline:d,deleteCustomerTimeline:p,clearError:h,clearTimeline:g};return n.jsx(WP.Provider,{value:y,children:s})},PU=()=>{const s=u.useContext(WP);if(!s)throw new Error("useCustomerTimeline must be used within a CustomerTimelineProvider");return s},qP=u.createContext(void 0),AU=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async b=>{try{a(!0),i(null);const v=await nt.get(`/customers/store/${b}`);e(v.data.data)}catch(v){const w=v.response?.data?.message||v.message||"Failed to fetch customers";i(w)}finally{a(!1)}},[]),c=u.useCallback(async(b,v,w=1,C=10)=>{try{a(!0),i(null);const k=await nt.get(`/customers/search/${b}?q=${encodeURIComponent(v)}&page=${w}&limit=${C}`),{success:N,data:O,pagination:R}=k.data;if(!N)throw new Error("Failed to search customers");return e(O),{success:N,data:O,pagination:R}}catch(k){const N=k.response?.data?.message||k.message||"Failed to search customers";throw i(N),new Error(N)}finally{a(!1)}},[]),d=u.useCallback(async b=>{try{a(!0),i(null);const w=(await nt.post("/customers",b)).data.data;return e(C=>[w,...C]),w}catch(v){const w=v.response?.data?.message||v.message||"Failed to create customer";throw i(w),v}finally{a(!1)}},[]),p=u.useCallback(async b=>{try{a(!0),i(null),await nt.delete(`/customers/${b}`),e(v=>v.filter(w=>w._id!==b))}catch(v){const w=v.response?.data?.message||v.message||"Failed to delete customer";throw i(w),v}finally{a(!1)}},[]),h=u.useCallback(()=>i(null),[]),g=u.useCallback(()=>e([]),[]),y={customers:r,loading:t,error:o,fetchCustomersByStoreId:l,searchCustomers:c,addCustomer:d,deleteCustomer:p,clearError:h,clearCustomers:g};return n.jsx(qP.Provider,{value:y,children:s})},iu=()=>{const s=u.useContext(qP);if(!s)throw new Error("useCustomers must be used within a CustomerProvider");return s},GP=u.createContext(void 0),MU=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async y=>{try{a(!0),i(null);const b=await nt.get(`/product-tags/store/${y}`);e(b.data.data)}catch(b){const v=b.response?.data?.message||b.message||"Failed to fetch product tags";i(v),console.error("Error fetching product tags:",b)}finally{a(!1)}},[]),c=u.useCallback(async(y,b)=>{try{a(!0),i(null);const w=(await nt.post("/product-tags",{storeId:y,name:b.trim()})).data.data;return e(C=>[w,...C]),w}catch(v){const w=v.response?.data?.message||v.message||"Failed to create product tag";throw i(w),console.error("Error creating product tag:",v),v}finally{a(!1)}},[]),d=u.useCallback(async y=>{try{a(!0),i(null),await nt.delete(`/product-tags/${y}`),e(b=>b.filter(v=>v._id!==y))}catch(b){const v=b.response?.data?.message||b.message||"Failed to delete product tag";throw i(v),console.error("Error deleting product tag:",b),b}finally{a(!1)}},[]),p=u.useCallback(()=>{i(null)},[]),h=u.useCallback(()=>{e([])},[]),g={productTags:r,loading:t,error:o,fetchProductTags:l,addProductTag:c,deleteProductTag:d,clearError:p,clearProductTags:h};return n.jsx(GP.Provider,{value:g,children:s})},tj=()=>{const s=u.useContext(GP);if(s===void 0)throw new Error("useProductTags must be used within a ProductTagsProvider");return s},IU="/assets/ziplofy-logo-Cl7-STQb.png",RU=({onStoreChange:s})=>{const{stores:r,activeStoreId:e,loading:t,error:a,createStore:o}=Ur(),[i,l]=u.useState(!1),[c,d]=u.useState(!1),[p,h]=u.useState(!1),[g,y]=u.useState(!1),[b,v]=u.useState(""),[w,C]=u.useState(""),[k,N]=u.useState(!1),O=u.useRef(null),R=u.useRef(null),L=u.useRef(null),B=u.useRef(null),G=u.useRef(null),$=u.useCallback(()=>{l(Z=>!Z)},[]),z=u.useCallback(()=>{l(!1)},[]),Y=u.useCallback(Z=>{s&&s(Z),z()},[s,z]),M=u.useCallback(()=>{d(!0),z()},[z]),q=u.useCallback(()=>{d(!1)},[]),P=u.useCallback(()=>{h(!0)},[]),H=u.useCallback(()=>{h(!1),v(""),C(""),N(!1)},[]),D=u.useCallback(async()=>{if(!(!b.trim()||!w.trim()))try{N(!0),await o({storeName:b.trim(),storeDescription:w.trim()}),H()}catch(Z){console.error("Error creating store:",Z)}finally{N(!1)}},[b,w,o,H]),X=u.useCallback(()=>{y(!0),z()},[z]),se=u.useCallback(()=>{y(!1)},[]),Q=u.useCallback(()=>{window.location.href="https://auth.ziplofy.com?logout=true"},[]);u.useEffect(()=>{const Z=ve=>{O.current&&R.current&&!O.current.contains(ve.target)&&!R.current.contains(ve.target)&&z()};return i&&document.addEventListener("mousedown",Z),()=>{document.removeEventListener("mousedown",Z)}},[i,z]),u.useEffect(()=>{const Z=ve=>{ve.key==="Escape"&&(c&&q(),p&&H(),g&&se())};return(c||p||g)&&document.addEventListener("keydown",Z),()=>{document.removeEventListener("keydown",Z)}},[c,p,g,q,H,se]);const xe=r.find(Z=>Z._id===e),K=Z=>Z.split(" ").map(ve=>ve.charAt(0)).join("").toUpperCase().slice(0,2);return t?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"bg-gray-600 w-6 h-6 rounded-full flex items-center justify-center text-white text-xs font-medium",children:"..."}),n.jsx("span",{className:"text-gray-900 text-sm",children:"Loading..."})]}):a||!xe?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"bg-gray-600 w-6 h-6 rounded-full flex items-center justify-center text-white text-xs font-medium",children:"?"}),n.jsx("span",{className:"text-gray-900 text-sm",children:"No Store"})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-2 relative",children:[n.jsxs("button",{ref:R,onClick:$,className:"flex items-center gap-2 hover:bg-gray-100 rounded px-2.5 py-1.5 transition-colors",children:[n.jsx("div",{className:"bg-gray-600 w-6 h-6 rounded-full flex items-center justify-center text-white text-xs font-medium",children:K(xe.storeName)}),n.jsx("span",{className:"text-gray-900 text-sm font-medium max-w-[100px] truncate",children:xe.storeName}),n.jsx(Ys,{className:"w-4 h-4 text-gray-500"})]}),i&&n.jsxs("div",{ref:O,className:"absolute right-0 top-full mt-1 min-w-[220px] bg-white border border-gray-200 rounded shadow-md py-1.5 z-50",children:[xe&&n.jsx("div",{className:"px-3 py-2 bg-gray-50 border-b border-gray-100",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-600 flex items-center justify-center text-white text-xs font-medium shrink-0",children:K(xe.storeName)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:xe.storeName}),xe.storeDescription&&n.jsx("div",{className:"text-xs text-gray-500 truncate mt-0.5",children:xe.storeDescription})]})]})}),n.jsx("div",{className:"max-h-[280px] overflow-y-auto py-1",children:r.map(Z=>n.jsxs("button",{onClick:()=>Y(Z._id),className:`w-full flex items-center gap-2 px-3 py-2 hover:bg-gray-50 transition-colors text-left ${Z._id===e?"bg-gray-50":""}`,children:[n.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-white text-xs font-medium shrink-0 ${Z._id===e?"bg-gray-600":"bg-gray-400"}`,children:K(Z.storeName)}),n.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[n.jsx("div",{className:`text-sm truncate ${Z._id===e?"font-medium text-gray-900":"text-gray-700"}`,children:Z.storeName}),Z.storeDescription&&n.jsx("div",{className:"text-xs text-gray-500 truncate mt-0.5",children:Z.storeDescription})]}),Z._id===e&&n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gray-600 shrink-0"})]},Z._id))}),n.jsx("div",{className:"border-t border-gray-100 my-1"}),n.jsxs("button",{onClick:M,className:"w-full flex items-center gap-2 px-3 py-2 hover:bg-gray-50 transition-colors text-left",children:[n.jsx(ab,{className:"w-4 h-4 text-gray-500 shrink-0"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Manage Stores"})]}),n.jsxs("button",{onClick:X,className:"w-full flex items-center gap-2 px-3 py-2 hover:bg-red-50 transition-colors text-left",children:[n.jsx(Z8,{className:"w-4 h-4 text-red-500 shrink-0"}),n.jsx("span",{className:"text-sm text-red-600",children:"Logout"})]})]})]}),c&&n.jsx("div",{className:"fixed inset-0 bg-gray-500/20 z-[1400] flex items-center justify-center p-4",onClick:q,children:n.jsxs("div",{ref:L,className:"bg-white rounded-lg w-full max-w-3xl max-h-[85vh] flex flex-col shadow-lg border border-gray-200",onClick:Z=>Z.stopPropagation(),children:[n.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-gray-200",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Manage Stores"}),n.jsx("button",{onClick:q,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:n.jsx(Zs,{className:"w-5 h-5 text-gray-500"})})]}),n.jsxs("div",{className:"p-4 overflow-y-auto flex-1",children:[n.jsx("div",{className:"mb-4",children:n.jsxs("button",{onClick:P,className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 transition-colors",children:[n.jsx(On,{className:"w-4 h-4"}),"Create New Store"]})}),n.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-600 uppercase tracking-wider",children:"Store Name"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-600 uppercase tracking-wider",children:"Description"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-600 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-600 uppercase tracking-wider",children:"Created"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(Z=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[n.jsx("td",{className:"px-3 py-2.5",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-600 flex items-center justify-center text-white text-xs font-medium shrink-0",children:K(Z.storeName)}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:Z.storeName})]})}),n.jsx("td",{className:"px-3 py-2.5",children:n.jsx("span",{className:"text-sm text-gray-600 max-w-[200px] truncate block",children:Z.storeDescription||""})}),n.jsx("td",{className:"px-3 py-2.5",children:n.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${Z._id===e?"bg-gray-100 text-gray-700":"bg-gray-50 text-gray-600"}`,children:Z._id===e?"Active":"Inactive"})}),n.jsx("td",{className:"px-3 py-2.5",children:n.jsx("span",{className:"text-sm text-gray-600",children:new Date(Z.createdAt).toLocaleDateString()})})]},Z._id))})]})})})]}),n.jsx("div",{className:"px-4 py-3 border-t border-gray-200 flex justify-end",children:n.jsx("button",{onClick:q,className:"px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded transition-colors",children:"Close"})})]})}),p&&n.jsx("div",{className:"fixed inset-0 bg-gray-500/20 z-[1400] flex items-center justify-center p-4",onClick:H,children:n.jsxs("div",{ref:B,className:"bg-white rounded-lg w-full max-w-md max-h-[85vh] flex flex-col shadow-lg border border-gray-200",onClick:Z=>Z.stopPropagation(),children:[n.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-gray-200",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Create New Store"}),n.jsx("button",{onClick:H,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:n.jsx(Zs,{className:"w-5 h-5 text-gray-500"})})]}),n.jsx("div",{className:"p-4 overflow-y-auto flex-1",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:["Store Name",n.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),n.jsx("input",{type:"text",value:b,onChange:Z=>v(Z.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded text-sm text-gray-900 placeholder:text-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-300 transition-all",placeholder:"Enter store name"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:["Store Description",n.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),n.jsx("textarea",{value:w,onChange:Z=>C(Z.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-200 rounded text-sm text-gray-900 placeholder:text-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-300 transition-all resize-none",placeholder:"Enter store description"})]})]})}),n.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 flex justify-end gap-2",children:[n.jsx("button",{onClick:H,className:"px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded transition-colors",children:"Cancel"}),n.jsx("button",{onClick:D,disabled:!b.trim()||!w.trim()||k,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 rounded hover:bg-gray-800 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:k?"Creating...":"Create Store"})]})]})}),g&&n.jsx("div",{className:"fixed inset-0 bg-gray-500/20 z-[1400] flex items-center justify-center p-4",onClick:se,children:n.jsxs("div",{ref:G,className:"bg-white rounded-lg w-full max-w-md shadow-lg border border-gray-200",onClick:Z=>Z.stopPropagation(),children:[n.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Confirm Logout"})}),n.jsx("div",{className:"px-4 py-4",children:n.jsx("p",{className:"text-sm text-gray-700",children:"Are you sure you want to logout?"})}),n.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 flex justify-end gap-2",children:[n.jsx("button",{onClick:se,className:"px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded transition-colors",children:"No"}),n.jsx("button",{onClick:Q,className:"px-3 py-1.5 text-sm font-medium text-white bg-red-600 rounded hover:bg-red-700 transition-colors",children:"Yes, Logout"})]})]})})]})},KP=u.createContext(void 0),DU=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(null),[o,i]=u.useState(!1),[l,c]=u.useState(null),d=u.useCallback(async w=>{try{i(!0),c(null);const C=await nt.get(`/packaging/store/${w}`),{success:k,data:N}=C.data;k?e(N):c("Failed to fetch packagings")}catch(C){console.error("Error fetching packagings:",C),c(C.response?.data?.message||"Failed to fetch packagings")}finally{i(!1)}},[]),p=u.useCallback(async w=>{try{i(!0),c(null);const C=await nt.post("/packaging/",w),{success:k,data:N}=C.data;if(k){const O=N;e(R=>[O,...R]),O.isDefault&&(a(O),e(R=>R.map(L=>L._id!==O._id?{...L,isDefault:!1}:L)))}else c("Failed to create packaging")}catch(C){throw console.error("Error creating packaging:",C),c(C.response?.data?.message||"Failed to create packaging"),C}finally{i(!1)}},[]),h=u.useCallback(async(w,C)=>{try{i(!0),c(null);const k=await nt.put(`/packaging/${w}`,C),{success:N,data:O}=k.data;if(N){const R=O;e(L=>L.map(B=>B._id===w?R:B)),R.isDefault?(a(R),e(L=>L.map(B=>B._id!==w?{...B,isDefault:!1}:B))):t?._id===w&&a(null)}else c("Failed to update packaging")}catch(k){throw console.error("Error updating packaging:",k),c(k.response?.data?.message||"Failed to update packaging"),k}finally{i(!1)}},[t]),g=u.useCallback(async w=>{try{i(!0),c(null);const C=await nt.delete(`/packaging/${w}`),{success:k,data:N}=C.data;if(k){const O=N.deletedPackaging;e(R=>R.filter(L=>L._id!==w)),t?._id===w&&a(null)}else c("Failed to delete packaging")}catch(C){throw console.error("Error deleting packaging:",C),c(C.response?.data?.message||"Failed to delete packaging"),C}finally{i(!1)}},[t]),y=u.useCallback(async w=>{try{i(!0),c(null);const C=await nt.get(`/packaging/store/${w}/default`),{success:k,data:N}=C.data;k?a(N):c("Failed to fetch default packaging")}catch(C){console.error("Error fetching default packaging:",C),c(C.response?.data?.message||"Failed to fetch default packaging")}finally{i(!1)}},[]),b=u.useCallback(()=>{e([]),a(null),c(null),i(!1)},[]),v={packagings:r,defaultPackaging:t,loading:o,error:l,fetchPackagingsByStoreId:d,createPackaging:p,updatePackaging:h,deletePackaging:g,getDefaultPackaging:y,clearPackagings:b};return n.jsx(KP.Provider,{value:v,children:s})},rj=()=>{const s=u.useContext(KP);if(s===void 0)throw new Error("usePackaging must be used within a PackagingProvider");return s},YP=u.createContext(void 0),LU=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async g=>{try{a(!0),i(null);const y=await nt.post("/product-types/",g),{success:b,data:v}=y.data;if(b){const w=v;return e(C=>[w,...C]),w}else throw i("Failed to create product type"),new Error("Failed to create product type")}catch(y){throw console.error("Error creating product type:",y),i(y.response?.data?.message||"Failed to create product type"),y}finally{a(!1)}},[]),c=u.useCallback(async g=>{try{a(!0),i(null);const y=await nt.get(`/product-types/store/${g}`),{success:b,data:v}=y.data;b?e(v):i("Failed to fetch product types")}catch(y){console.error("Error fetching product types:",y),i(y.response?.data?.message||"Failed to fetch product types")}finally{a(!1)}},[]),d=u.useCallback(async g=>{try{a(!0),i(null);const y=await nt.delete(`/product-types/${g}`),{success:b,data:v}=y.data;if(b)return e(w=>w.filter(C=>C._id!==g)),v._id;throw i("Failed to delete product type"),new Error("Failed to delete product type")}catch(y){throw console.error("Error deleting product type:",y),i(y.response?.data?.message||"Failed to delete product type"),y}finally{a(!1)}},[]),p=u.useCallback(()=>{e([]),i(null),a(!1)},[]),h={productTypes:r,loading:t,error:o,createProductType:l,getProductTypesByStoreId:c,deleteProductType:d,clearProductTypes:p};return n.jsx(YP.Provider,{value:h,children:s})},D2=()=>{const s=u.useContext(YP);if(s===void 0)throw new Error("useProductType must be used within a ProductTypeProvider");return s},ZP=u.createContext(void 0),FU=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(()=>i(null),[]),c=u.useCallback(async g=>{try{a(!0),i(null);const y=await nt.get(`/transfer-tags/store/${g}`);if(!y.data.success)throw new Error("Failed to fetch transfer tags");e(y.data.data||[])}catch(y){const b=y?.response?.data?.message||y?.message||"Failed to fetch transfer tags";throw i(b),y}finally{a(!1)}},[]),d=u.useCallback(async(g,y)=>{try{a(!0),i(null);const b=await nt.post("/transfer-tags",{storeId:g,name:y});if(!b.data.success)throw new Error("Failed to create transfer tag");const v=b.data.data;return e(w=>w.some(k=>k._id===v._id)?w:[v,...w]),v}catch(b){const v=b?.response?.data?.message||b?.message||"Failed to create transfer tag";throw i(v),b}finally{a(!1)}},[]),p=u.useCallback(async g=>{try{if(a(!0),i(null),!(await nt.delete(`/transfer-tags/${g}`)).data.success)throw new Error("Failed to delete transfer tag");e(b=>b.filter(v=>v._id!==g))}catch(y){const b=y?.response?.data?.message||y?.message||"Failed to delete transfer tag";throw i(b),y}finally{a(!1)}},[]),h={tags:r,loading:t,error:o,fetchByStore:c,createTag:d,deleteTag:p,clearError:l};return n.jsx(ZP.Provider,{value:h,children:s})},L2=()=>{const s=u.useContext(ZP);if(!s)throw new Error("useTransferTags must be used within a TransferTagsProvider");return s},XP=u.createContext(void 0),BU=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async g=>{try{a(!0),i(null);const y=await nt.post("/vendors",g),{success:b,data:v}=y.data;if(!b)throw new Error("Failed to create vendor");return e(w=>[v,...w]),v}catch(y){const b=y?.response?.data?.message||y?.message||"Failed to create vendor";throw i(b),y}finally{a(!1)}},[]),c=u.useCallback(async g=>{try{a(!0),i(null);const y=await nt.delete(`/vendors/${g}`),{success:b,data:v}=y.data;if(!b)throw new Error("Failed to delete vendor");return e(w=>w.filter(C=>C._id!==v.deletedVendor.id)),v.deletedVendor.id}catch(y){const b=y?.response?.data?.message||y?.message||"Failed to delete vendor";throw i(b),y}finally{a(!1)}},[]),d=u.useCallback(async g=>{try{a(!0),i(null);const y=await nt.get(`/vendors/store/${g}`),{success:b,data:v}=y.data;if(!b)throw new Error("Failed to fetch vendors");e(v)}catch(y){const b=y?.response?.data?.message||y?.message||"Failed to fetch vendors";throw i(b),y}finally{a(!1)}},[]),p=u.useCallback(()=>{e([]),i(null),a(!1)},[]),h={vendors:r,loading:t,error:o,createVendor:l,deleteVendor:c,fetchVendorsByStoreId:d,clearVendors:p};return n.jsx(XP.Provider,{value:h,children:s})},nj=()=>{const s=u.useContext(XP);if(!s)throw new Error("useVendors must be used within a VendorProvider");return s},zU=()=>{const[s,r]=u.useState(""),[e,t]=u.useState(!1),[a,o]=u.useState(!1),{setActiveStoreId:i,activeStoreId:l}=Ur(),{fetchCustomersByStoreId:c}=iu(),{fetchCustomerTags:d}=R2(),{fetchProductTags:p}=tj(),{getProductTypesByStoreId:h}=D2(),{fetchPackagingsByStoreId:g}=rj(),{fetchVendorsByStoreId:y}=nj(),{fetchByStore:b}=L2(),v=u.useRef(null),w=u.useRef(null);u.useEffect(()=>{l&&(c(l),d(l),p(l),h(l),g(l),y(l),b(l))},[l,c,d,p,h,g,y,b]);const C=u.useCallback(L=>{r(L.target.value)},[]),k=u.useCallback(()=>{t(!0)},[]),N=u.useCallback(()=>{t(!1)},[]),O=u.useCallback(L=>{o(L)},[]),R=u.useCallback(L=>{i(L)},[i]);return u.useEffect(()=>{const L=B=>{v.current&&w.current&&!v.current.contains(B.target)&&!w.current.contains(B.target)&&N()};return e&&document.addEventListener("mousedown",L),()=>{document.removeEventListener("mousedown",L)}},[e,N]),u.useEffect(()=>{const L=B=>{B.key==="Escape"&&a&&O(!1)};return a&&document.addEventListener("keydown",L),()=>{document.removeEventListener("keydown",L)}},[a,O]),n.jsxs(n.Fragment,{children:[n.jsx("header",{className:"fixed top-0 left-0 right-0 h-12 bg-white border-b border-gray-200 z-[1201]",children:n.jsxs("div",{className:"h-full px-3 flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center gap-3",children:n.jsx("img",{src:IU,alt:"Ziplofy Logo",className:"h-8 w-auto object-contain"})}),n.jsx("div",{className:"flex-1 max-w-[500px] mx-4",children:n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-2.5 flex items-center pointer-events-none",children:n.jsx(no,{className:"w-4 h-4 text-gray-400"})}),n.jsx("input",{type:"text",placeholder:"Search",value:s,onChange:C,className:"w-full h-8 pl-8 pr-3 bg-gray-50 border border-gray-200 rounded text-sm text-gray-900 placeholder:text-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-300 transition-all"})]})}),n.jsxs("div",{className:"flex gap-1.5",children:[n.jsxs("div",{className:"flex items-center gap-1 bg-gray-50 rounded border border-gray-200",children:[n.jsxs("div",{className:"relative",children:[n.jsx("button",{ref:w,onClick:k,className:"p-1.5 rounded transition-colors hover:bg-gray-100","aria-label":"Notifications","aria-expanded":e,"aria-haspopup":"true",children:n.jsx(wx,{className:"w-4 h-4 text-gray-600"})}),e&&n.jsx("div",{ref:v,className:"absolute right-0 top-full mt-1 min-w-[200px] bg-white border border-gray-200 rounded shadow-md py-1.5 z-50",children:n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm cursor-default",children:"No alerts as of now"})})]}),n.jsx("button",{onClick:()=>O(!0),className:"p-1.5 hover:bg-gray-100 rounded transition-colors","aria-label":"Setup guide",children:n.jsx(ZO,{className:"w-4 h-4 text-gray-600"})})]}),n.jsx("div",{className:"relative bg-gray-50 rounded border border-gray-200",children:n.jsx(RU,{onStoreChange:R})})]})]})}),n.jsx("div",{className:`fixed top-0 right-0 h-full w-[300px] bg-white border-l border-gray-200 shadow-lg z-[1300] transform transition-transform duration-300 ease-in-out ${a?"translate-x-0":"translate-x-full"}`,children:n.jsxs("div",{className:"h-full flex flex-col",children:[n.jsxs("div",{className:"p-3 border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Setup guide"}),n.jsx("button",{onClick:()=>O(!1),className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors","aria-label":"Close",children:n.jsx(Zs,{className:"w-5 h-5"})})]}),n.jsx("p",{className:"text-sm text-gray-500",children:"Follow these steps to get your store ready."})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-3",children:n.jsxs("ul",{className:"space-y-2",children:[n.jsxs("li",{className:"flex items-center gap-2 py-1",children:[n.jsx("div",{className:"flex items-center justify-center",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 text-gray-600 border-gray-300 rounded focus:ring-gray-400"})}),n.jsx("span",{className:"text-sm text-gray-700",children:"Add store name"})]}),n.jsxs("li",{className:"flex items-center gap-2 py-1",children:[n.jsx("div",{className:"flex items-center justify-center",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 text-gray-600 border-gray-300 rounded focus:ring-gray-400"})}),n.jsx("span",{className:"text-sm text-gray-700",children:"Add your first product"})]}),n.jsxs("li",{className:"flex items-center gap-2 py-1",children:[n.jsx("div",{className:"flex items-center justify-center",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 text-gray-600 border-gray-300 rounded focus:ring-gray-400"})}),n.jsx("span",{className:"text-sm text-gray-700",children:"Design your store"})]}),n.jsxs("li",{className:"flex items-center gap-2 py-1",children:[n.jsx("div",{className:"flex items-center justify-center",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 text-gray-600 border-gray-300 rounded focus:ring-gray-400"})}),n.jsx("span",{className:"text-sm text-gray-700",children:"Unlock your store"})]}),n.jsxs("li",{className:"flex items-center gap-2 py-1",children:[n.jsx("div",{className:"flex items-center justify-center",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 text-gray-600 border-gray-300 rounded focus:ring-gray-400"})}),n.jsx("span",{className:"text-sm text-gray-700",children:"Set up a payment provider"})]})]})})]})}),a&&n.jsx("div",{className:"fixed inset-0 bg-gray-500/20 z-[1250]",onClick:()=>O(!1),"aria-hidden":"true"})]})};function sv(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Z1={exports:{}};var pE;function $U(){return pE||(pE=1,(function(s,r){(function(e){s.exports=e()})(function(){return(function e(t,a,o){function i(d,p){if(!a[d]){if(!t[d]){var h=typeof sv=="function"&&sv;if(!p&&h)return h(d,!0);if(l)return l(d,!0);var g=new Error("Cannot find module '"+d+"'");throw g.code="MODULE_NOT_FOUND",g}var y=a[d]={exports:{}};t[d][0].call(y.exports,function(b){var v=t[d][1][b];return i(v||b)},y,y.exports,e,t,a,o)}return a[d].exports}for(var l=typeof sv=="function"&&sv,c=0;c<o.length;c++)i(o[c]);return i})({1:[function(e,t,a){var o=e("./utils"),i=e("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(c){for(var d,p,h,g,y,b,v,w=[],C=0,k=c.length,N=k,O=o.getTypeOf(c)!=="string";C<c.length;)N=k-C,h=O?(d=c[C++],p=C<k?c[C++]:0,C<k?c[C++]:0):(d=c.charCodeAt(C++),p=C<k?c.charCodeAt(C++):0,C<k?c.charCodeAt(C++):0),g=d>>2,y=(3&d)<<4|p>>4,b=1<N?(15&p)<<2|h>>6:64,v=2<N?63&h:64,w.push(l.charAt(g)+l.charAt(y)+l.charAt(b)+l.charAt(v));return w.join("")},a.decode=function(c){var d,p,h,g,y,b,v=0,w=0,C="data:";if(c.substr(0,C.length)===C)throw new Error("Invalid base64 input, it looks like a data url.");var k,N=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===l.charAt(64)&&N--,c.charAt(c.length-2)===l.charAt(64)&&N--,N%1!=0)throw new Error("Invalid base64 input, bad content length.");for(k=i.uint8array?new Uint8Array(0|N):new Array(0|N);v<c.length;)d=l.indexOf(c.charAt(v++))<<2|(g=l.indexOf(c.charAt(v++)))>>4,p=(15&g)<<4|(y=l.indexOf(c.charAt(v++)))>>2,h=(3&y)<<6|(b=l.indexOf(c.charAt(v++))),k[w++]=d,y!==64&&(k[w++]=p),b!==64&&(k[w++]=h);return k}},{"./support":30,"./utils":32}],2:[function(e,t,a){var o=e("./external"),i=e("./stream/DataWorker"),l=e("./stream/Crc32Probe"),c=e("./stream/DataLengthProbe");function d(p,h,g,y,b){this.compressedSize=p,this.uncompressedSize=h,this.crc32=g,this.compression=y,this.compressedContent=b}d.prototype={getContentWorker:function(){var p=new i(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),h=this;return p.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),p},getCompressedWorker:function(){return new i(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(p,h,g){return p.pipe(new l).pipe(new c("uncompressedSize")).pipe(h.compressWorker(g)).pipe(new c("compressedSize")).withStreamInfo("compression",h)},t.exports=d},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,a){var o=e("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},a.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,a){var o=e("./utils"),i=(function(){for(var l,c=[],d=0;d<256;d++){l=d;for(var p=0;p<8;p++)l=1&l?3988292384^l>>>1:l>>>1;c[d]=l}return c})();t.exports=function(l,c){return l!==void 0&&l.length?o.getTypeOf(l)!=="string"?(function(d,p,h,g){var y=i,b=g+h;d^=-1;for(var v=g;v<b;v++)d=d>>>8^y[255&(d^p[v])];return-1^d})(0|c,l,l.length,0):(function(d,p,h,g){var y=i,b=g+h;d^=-1;for(var v=g;v<b;v++)d=d>>>8^y[255&(d^p.charCodeAt(v))];return-1^d})(0|c,l,l.length,0):0}},{"./utils":32}],5:[function(e,t,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(e,t,a){var o=null;o=typeof Promise<"u"?Promise:e("lie"),t.exports={Promise:o}},{lie:37}],7:[function(e,t,a){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",i=e("pako"),l=e("./utils"),c=e("./stream/GenericWorker"),d=o?"uint8array":"array";function p(h,g){c.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=g,this.meta={}}a.magic="\b\0",l.inherits(p,c),p.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(d,h.data),!1)},p.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},p.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},p.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(g){h.push({data:g,meta:h.meta})}},a.compressWorker=function(h){return new p("Deflate",h)},a.uncompressWorker=function(){return new p("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,a){function o(y,b){var v,w="";for(v=0;v<b;v++)w+=String.fromCharCode(255&y),y>>>=8;return w}function i(y,b,v,w,C,k){var N,O,R=y.file,L=y.compression,B=k!==d.utf8encode,G=l.transformTo("string",k(R.name)),$=l.transformTo("string",d.utf8encode(R.name)),z=R.comment,Y=l.transformTo("string",k(z)),M=l.transformTo("string",d.utf8encode(z)),q=$.length!==R.name.length,P=M.length!==z.length,H="",D="",X="",se=R.dir,Q=R.date,xe={crc32:0,compressedSize:0,uncompressedSize:0};b&&!v||(xe.crc32=y.crc32,xe.compressedSize=y.compressedSize,xe.uncompressedSize=y.uncompressedSize);var K=0;b&&(K|=8),B||!q&&!P||(K|=2048);var Z=0,ve=0;se&&(Z|=16),C==="UNIX"?(ve=798,Z|=(function(Se,Pe){var $e=Se;return Se||($e=Pe?16893:33204),(65535&$e)<<16})(R.unixPermissions,se)):(ve=20,Z|=(function(Se){return 63&(Se||0)})(R.dosPermissions)),N=Q.getUTCHours(),N<<=6,N|=Q.getUTCMinutes(),N<<=5,N|=Q.getUTCSeconds()/2,O=Q.getUTCFullYear()-1980,O<<=4,O|=Q.getUTCMonth()+1,O<<=5,O|=Q.getUTCDate(),q&&(D=o(1,1)+o(p(G),4)+$,H+="up"+o(D.length,2)+D),P&&(X=o(1,1)+o(p(Y),4)+M,H+="uc"+o(X.length,2)+X);var ae="";return ae+=`
\0`,ae+=o(K,2),ae+=L.magic,ae+=o(N,2),ae+=o(O,2),ae+=o(xe.crc32,4),ae+=o(xe.compressedSize,4),ae+=o(xe.uncompressedSize,4),ae+=o(G.length,2),ae+=o(H.length,2),{fileRecord:h.LOCAL_FILE_HEADER+ae+G+H,dirRecord:h.CENTRAL_FILE_HEADER+o(ve,2)+ae+o(Y.length,2)+"\0\0\0\0"+o(Z,4)+o(w,4)+G+H+Y}}var l=e("../utils"),c=e("../stream/GenericWorker"),d=e("../utf8"),p=e("../crc32"),h=e("../signature");function g(y,b,v,w){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=b,this.zipPlatform=v,this.encodeFileName=w,this.streamFiles=y,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}l.inherits(g,c),g.prototype.push=function(y){var b=y.meta.percent||0,v=this.entriesCount,w=this._sources.length;this.accumulate?this.contentBuffer.push(y):(this.bytesWritten+=y.data.length,c.prototype.push.call(this,{data:y.data,meta:{currentFile:this.currentFile,percent:v?(b+100*(v-w-1))/v:100}}))},g.prototype.openedSource=function(y){this.currentSourceOffset=this.bytesWritten,this.currentFile=y.file.name;var b=this.streamFiles&&!y.file.dir;if(b){var v=i(y,b,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:v.fileRecord,meta:{percent:0}})}else this.accumulate=!0},g.prototype.closedSource=function(y){this.accumulate=!1;var b=this.streamFiles&&!y.file.dir,v=i(y,b,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(v.dirRecord),b)this.push({data:(function(w){return h.DATA_DESCRIPTOR+o(w.crc32,4)+o(w.compressedSize,4)+o(w.uncompressedSize,4)})(y),meta:{percent:100}});else for(this.push({data:v.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},g.prototype.flush=function(){for(var y=this.bytesWritten,b=0;b<this.dirRecords.length;b++)this.push({data:this.dirRecords[b],meta:{percent:100}});var v=this.bytesWritten-y,w=(function(C,k,N,O,R){var L=l.transformTo("string",R(O));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(C,2)+o(C,2)+o(k,4)+o(N,4)+o(L.length,2)+L})(this.dirRecords.length,v,y,this.zipComment,this.encodeFileName);this.push({data:w,meta:{percent:100}})},g.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},g.prototype.registerPrevious=function(y){this._sources.push(y);var b=this;return y.on("data",function(v){b.processChunk(v)}),y.on("end",function(){b.closedSource(b.previous.streamInfo),b._sources.length?b.prepareNextSource():b.end()}),y.on("error",function(v){b.error(v)}),this},g.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},g.prototype.error=function(y){var b=this._sources;if(!c.prototype.error.call(this,y))return!1;for(var v=0;v<b.length;v++)try{b[v].error(y)}catch{}return!0},g.prototype.lock=function(){c.prototype.lock.call(this);for(var y=this._sources,b=0;b<y.length;b++)y[b].lock()},t.exports=g},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,a){var o=e("../compressions"),i=e("./ZipFileWorker");a.generateWorker=function(l,c,d){var p=new i(c.streamFiles,d,c.platform,c.encodeFileName),h=0;try{l.forEach(function(g,y){h++;var b=(function(k,N){var O=k||N,R=o[O];if(!R)throw new Error(O+" is not a valid compression method !");return R})(y.options.compression,c.compression),v=y.options.compressionOptions||c.compressionOptions||{},w=y.dir,C=y.date;y._compressWorker(b,v).withStreamInfo("file",{name:g,dir:w,date:C,comment:y.comment||"",unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions}).pipe(p)}),p.entriesCount=h}catch(g){p.error(g)}return p}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,a){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var i=new o;for(var l in this)typeof this[l]!="function"&&(i[l]=this[l]);return i}}(o.prototype=e("./object")).loadAsync=e("./load"),o.support=e("./support"),o.defaults=e("./defaults"),o.version="3.10.1",o.loadAsync=function(i,l){return new o().loadAsync(i,l)},o.external=e("./external"),t.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,a){var o=e("./utils"),i=e("./external"),l=e("./utf8"),c=e("./zipEntries"),d=e("./stream/Crc32Probe"),p=e("./nodejsUtils");function h(g){return new i.Promise(function(y,b){var v=g.decompressed.getContentWorker().pipe(new d);v.on("error",function(w){b(w)}).on("end",function(){v.streamInfo.crc32!==g.decompressed.crc32?b(new Error("Corrupted zip : CRC32 mismatch")):y()}).resume()})}t.exports=function(g,y){var b=this;return y=o.extend(y||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),p.isNode&&p.isStream(g)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",g,!0,y.optimizedBinaryString,y.base64).then(function(v){var w=new c(y);return w.load(v),w}).then(function(v){var w=[i.Promise.resolve(v)],C=v.files;if(y.checkCRC32)for(var k=0;k<C.length;k++)w.push(h(C[k]));return i.Promise.all(w)}).then(function(v){for(var w=v.shift(),C=w.files,k=0;k<C.length;k++){var N=C[k],O=N.fileNameStr,R=o.resolve(N.fileNameStr);b.file(R,N.decompressed,{binary:!0,optimizedBinaryString:!0,date:N.date,dir:N.dir,comment:N.fileCommentStr.length?N.fileCommentStr:null,unixPermissions:N.unixPermissions,dosPermissions:N.dosPermissions,createFolders:y.createFolders}),N.dir||(b.file(R).unsafeOriginalName=O)}return w.zipComment.length&&(b.comment=w.zipComment),b})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,a){var o=e("../utils"),i=e("../stream/GenericWorker");function l(c,d){i.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(d)}o.inherits(l,i),l.prototype._bindStream=function(c){var d=this;(this._stream=c).pause(),c.on("data",function(p){d.push({data:p,meta:{percent:0}})}).on("error",function(p){d.isPaused?this.generatedError=p:d.error(p)}).on("end",function(){d.isPaused?d._upstreamEnded=!0:d.end()})},l.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,a){var o=e("readable-stream").Readable;function i(l,c,d){o.call(this,c),this._helper=l;var p=this;l.on("data",function(h,g){p.push(h)||p._helper.pause(),d&&d(g)}).on("error",function(h){p.emit("error",h)}).on("end",function(){p.push(null)})}e("../utils").inherits(i,o),i.prototype._read=function(){this._helper.resume()},t.exports=i},{"../utils":32,"readable-stream":16}],14:[function(e,t,a){t.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,i){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,i);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,i)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var i=new Buffer(o);return i.fill(0),i},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(e,t,a){function o(R,L,B){var G,$=l.getTypeOf(L),z=l.extend(B||{},p);z.date=z.date||new Date,z.compression!==null&&(z.compression=z.compression.toUpperCase()),typeof z.unixPermissions=="string"&&(z.unixPermissions=parseInt(z.unixPermissions,8)),z.unixPermissions&&16384&z.unixPermissions&&(z.dir=!0),z.dosPermissions&&16&z.dosPermissions&&(z.dir=!0),z.dir&&(R=C(R)),z.createFolders&&(G=w(R))&&k.call(this,G,!0);var Y=$==="string"&&z.binary===!1&&z.base64===!1;B&&B.binary!==void 0||(z.binary=!Y),(L instanceof h&&L.uncompressedSize===0||z.dir||!L||L.length===0)&&(z.base64=!1,z.binary=!0,L="",z.compression="STORE",$="string");var M=null;M=L instanceof h||L instanceof c?L:b.isNode&&b.isStream(L)?new v(R,L):l.prepareContent(R,L,z.binary,z.optimizedBinaryString,z.base64);var q=new g(R,M,z);this.files[R]=q}var i=e("./utf8"),l=e("./utils"),c=e("./stream/GenericWorker"),d=e("./stream/StreamHelper"),p=e("./defaults"),h=e("./compressedObject"),g=e("./zipObject"),y=e("./generate"),b=e("./nodejsUtils"),v=e("./nodejs/NodejsStreamInputAdapter"),w=function(R){R.slice(-1)==="/"&&(R=R.substring(0,R.length-1));var L=R.lastIndexOf("/");return 0<L?R.substring(0,L):""},C=function(R){return R.slice(-1)!=="/"&&(R+="/"),R},k=function(R,L){return L=L!==void 0?L:p.createFolders,R=C(R),this.files[R]||o.call(this,R,null,{dir:!0,createFolders:L}),this.files[R]};function N(R){return Object.prototype.toString.call(R)==="[object RegExp]"}var O={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(R){var L,B,G;for(L in this.files)G=this.files[L],(B=L.slice(this.root.length,L.length))&&L.slice(0,this.root.length)===this.root&&R(B,G)},filter:function(R){var L=[];return this.forEach(function(B,G){R(B,G)&&L.push(G)}),L},file:function(R,L,B){if(arguments.length!==1)return R=this.root+R,o.call(this,R,L,B),this;if(N(R)){var G=R;return this.filter(function(z,Y){return!Y.dir&&G.test(z)})}var $=this.files[this.root+R];return $&&!$.dir?$:null},folder:function(R){if(!R)return this;if(N(R))return this.filter(function($,z){return z.dir&&R.test($)});var L=this.root+R,B=k.call(this,L),G=this.clone();return G.root=B.name,G},remove:function(R){R=this.root+R;var L=this.files[R];if(L||(R.slice(-1)!=="/"&&(R+="/"),L=this.files[R]),L&&!L.dir)delete this.files[R];else for(var B=this.filter(function($,z){return z.name.slice(0,R.length)===R}),G=0;G<B.length;G++)delete this.files[B[G].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(R){var L,B={};try{if((B=l.extend(R||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=B.type.toLowerCase(),B.compression=B.compression.toUpperCase(),B.type==="binarystring"&&(B.type="string"),!B.type)throw new Error("No output type specified.");l.checkSupport(B.type),B.platform!=="darwin"&&B.platform!=="freebsd"&&B.platform!=="linux"&&B.platform!=="sunos"||(B.platform="UNIX"),B.platform==="win32"&&(B.platform="DOS");var G=B.comment||this.comment||"";L=y.generateWorker(this,B,G)}catch($){(L=new c("error")).error($)}return new d(L,B.type||"string",B.mimeType)},generateAsync:function(R,L){return this.generateInternalStream(R).accumulate(L)},generateNodeStream:function(R,L){return(R=R||{}).type||(R.type="nodebuffer"),this.generateInternalStream(R).toNodejsStream(L)}};t.exports=O},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,a){t.exports=e("stream")},{stream:void 0}],17:[function(e,t,a){var o=e("./DataReader");function i(l){o.call(this,l);for(var c=0;c<this.data.length;c++)l[c]=255&l[c]}e("../utils").inherits(i,o),i.prototype.byteAt=function(l){return this.data[this.zero+l]},i.prototype.lastIndexOfSignature=function(l){for(var c=l.charCodeAt(0),d=l.charCodeAt(1),p=l.charCodeAt(2),h=l.charCodeAt(3),g=this.length-4;0<=g;--g)if(this.data[g]===c&&this.data[g+1]===d&&this.data[g+2]===p&&this.data[g+3]===h)return g-this.zero;return-1},i.prototype.readAndCheckSignature=function(l){var c=l.charCodeAt(0),d=l.charCodeAt(1),p=l.charCodeAt(2),h=l.charCodeAt(3),g=this.readData(4);return c===g[0]&&d===g[1]&&p===g[2]&&h===g[3]},i.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},t.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,t,a){var o=e("../utils");function i(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var c,d=0;for(this.checkOffset(l),c=this.index+l-1;c>=this.index;c--)d=(d<<8)+this.byteAt(c);return this.index+=l,d},readString:function(l){return o.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC(1980+(l>>25&127),(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(31&l)<<1))}},t.exports=i},{"../utils":32}],19:[function(e,t,a){var o=e("./Uint8ArrayReader");function i(l){o.call(this,l)}e("../utils").inherits(i,o),i.prototype.readData=function(l){this.checkOffset(l);var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},t.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,a){var o=e("./DataReader");function i(l){o.call(this,l)}e("../utils").inherits(i,o),i.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},i.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},i.prototype.readAndCheckSignature=function(l){return l===this.readData(4)},i.prototype.readData=function(l){this.checkOffset(l);var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},t.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,t,a){var o=e("./ArrayReader");function i(l){o.call(this,l)}e("../utils").inherits(i,o),i.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},t.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,a){var o=e("../utils"),i=e("../support"),l=e("./ArrayReader"),c=e("./StringReader"),d=e("./NodeBufferReader"),p=e("./Uint8ArrayReader");t.exports=function(h){var g=o.getTypeOf(h);return o.checkSupport(g),g!=="string"||i.uint8array?g==="nodebuffer"?new d(h):i.uint8array?new p(o.transformTo("uint8array",h)):new l(o.transformTo("array",h)):new c(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,t,a){var o=e("./GenericWorker"),i=e("../utils");function l(c){o.call(this,"ConvertWorker to "+c),this.destType=c}i.inherits(l,o),l.prototype.processChunk=function(c){this.push({data:i.transformTo(this.destType,c.data),meta:c.meta})},t.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,a){var o=e("./GenericWorker"),i=e("../crc32");function l(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(l,o),l.prototype.processChunk=function(c){this.streamInfo.crc32=i(c.data,this.streamInfo.crc32||0),this.push(c)},t.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,a){var o=e("../utils"),i=e("./GenericWorker");function l(c){i.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}o.inherits(l,i),l.prototype.processChunk=function(c){if(c){var d=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=d+c.data.length}i.prototype.processChunk.call(this,c)},t.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,a){var o=e("../utils"),i=e("./GenericWorker");function l(c){i.call(this,"DataWorker");var d=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(p){d.dataIsReady=!0,d.data=p,d.max=p&&p.length||0,d.type=o.getTypeOf(p),d.isPaused||d._tickAndRepeat()},function(p){d.error(p)})}o.inherits(l,i),l.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,d=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,d);break;case"uint8array":c=this.data.subarray(this.index,d);break;case"array":case"nodebuffer":c=this.data.slice(this.index,d)}return this.index=d,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,a){function o(i){this.name=i||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(i){this.emit("data",i)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(i){this.emit("error",i)}return!0},error:function(i){return!this.isFinished&&(this.isPaused?this.generatedError=i:(this.isFinished=!0,this.emit("error",i),this.previous&&this.previous.error(i),this.cleanUp()),!0)},on:function(i,l){return this._listeners[i].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(i,l){if(this._listeners[i])for(var c=0;c<this._listeners[i].length;c++)this._listeners[i][c].call(this,l)},pipe:function(i){return i.registerPrevious(this)},registerPrevious:function(i){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=i.streamInfo,this.mergeStreamInfo(),this.previous=i;var l=this;return i.on("data",function(c){l.processChunk(c)}),i.on("end",function(){l.end()}),i.on("error",function(c){l.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var i=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),i=!0),this.previous&&this.previous.resume(),!i},flush:function(){},processChunk:function(i){this.push(i)},withStreamInfo:function(i,l){return this.extraStreamInfo[i]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var i in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,i)&&(this.streamInfo[i]=this.extraStreamInfo[i])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var i="Worker "+this.name;return this.previous?this.previous+" -> "+i:i}},t.exports=o},{}],29:[function(e,t,a){var o=e("../utils"),i=e("./ConvertWorker"),l=e("./GenericWorker"),c=e("../base64"),d=e("../support"),p=e("../external"),h=null;if(d.nodestream)try{h=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function g(b,v){return new p.Promise(function(w,C){var k=[],N=b._internalType,O=b._outputType,R=b._mimeType;b.on("data",function(L,B){k.push(L),v&&v(B)}).on("error",function(L){k=[],C(L)}).on("end",function(){try{var L=(function(B,G,$){switch(B){case"blob":return o.newBlob(o.transformTo("arraybuffer",G),$);case"base64":return c.encode(G);default:return o.transformTo(B,G)}})(O,(function(B,G){var $,z=0,Y=null,M=0;for($=0;$<G.length;$++)M+=G[$].length;switch(B){case"string":return G.join("");case"array":return Array.prototype.concat.apply([],G);case"uint8array":for(Y=new Uint8Array(M),$=0;$<G.length;$++)Y.set(G[$],z),z+=G[$].length;return Y;case"nodebuffer":return Buffer.concat(G);default:throw new Error("concat : unsupported type '"+B+"'")}})(N,k),R);w(L)}catch(B){C(B)}k=[]}).resume()})}function y(b,v,w){var C=v;switch(v){case"blob":case"arraybuffer":C="uint8array";break;case"base64":C="string"}try{this._internalType=C,this._outputType=v,this._mimeType=w,o.checkSupport(C),this._worker=b.pipe(new i(C)),b.lock()}catch(k){this._worker=new l("error"),this._worker.error(k)}}y.prototype={accumulate:function(b){return g(this,b)},on:function(b,v){var w=this;return b==="data"?this._worker.on(b,function(C){v.call(w,C.data,C.meta)}):this._worker.on(b,function(){o.delay(v,arguments,w)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(b){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},b)}},t.exports=y},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var o=new ArrayBuffer(0);try{a.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(o),a.blob=i.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!e("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,a){for(var o=e("./utils"),i=e("./support"),l=e("./nodejsUtils"),c=e("./stream/GenericWorker"),d=new Array(256),p=0;p<256;p++)d[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;d[254]=d[254]=1;function h(){c.call(this,"utf-8 decode"),this.leftOver=null}function g(){c.call(this,"utf-8 encode")}a.utf8encode=function(y){return i.nodebuffer?l.newBufferFrom(y,"utf-8"):(function(b){var v,w,C,k,N,O=b.length,R=0;for(k=0;k<O;k++)(64512&(w=b.charCodeAt(k)))==55296&&k+1<O&&(64512&(C=b.charCodeAt(k+1)))==56320&&(w=65536+(w-55296<<10)+(C-56320),k++),R+=w<128?1:w<2048?2:w<65536?3:4;for(v=i.uint8array?new Uint8Array(R):new Array(R),k=N=0;N<R;k++)(64512&(w=b.charCodeAt(k)))==55296&&k+1<O&&(64512&(C=b.charCodeAt(k+1)))==56320&&(w=65536+(w-55296<<10)+(C-56320),k++),w<128?v[N++]=w:(w<2048?v[N++]=192|w>>>6:(w<65536?v[N++]=224|w>>>12:(v[N++]=240|w>>>18,v[N++]=128|w>>>12&63),v[N++]=128|w>>>6&63),v[N++]=128|63&w);return v})(y)},a.utf8decode=function(y){return i.nodebuffer?o.transformTo("nodebuffer",y).toString("utf-8"):(function(b){var v,w,C,k,N=b.length,O=new Array(2*N);for(v=w=0;v<N;)if((C=b[v++])<128)O[w++]=C;else if(4<(k=d[C]))O[w++]=65533,v+=k-1;else{for(C&=k===2?31:k===3?15:7;1<k&&v<N;)C=C<<6|63&b[v++],k--;1<k?O[w++]=65533:C<65536?O[w++]=C:(C-=65536,O[w++]=55296|C>>10&1023,O[w++]=56320|1023&C)}return O.length!==w&&(O.subarray?O=O.subarray(0,w):O.length=w),o.applyFromCharCode(O)})(y=o.transformTo(i.uint8array?"uint8array":"array",y))},o.inherits(h,c),h.prototype.processChunk=function(y){var b=o.transformTo(i.uint8array?"uint8array":"array",y.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var v=b;(b=new Uint8Array(v.length+this.leftOver.length)).set(this.leftOver,0),b.set(v,this.leftOver.length)}else b=this.leftOver.concat(b);this.leftOver=null}var w=(function(k,N){var O;for((N=N||k.length)>k.length&&(N=k.length),O=N-1;0<=O&&(192&k[O])==128;)O--;return O<0||O===0?N:O+d[k[O]]>N?O:N})(b),C=b;w!==b.length&&(i.uint8array?(C=b.subarray(0,w),this.leftOver=b.subarray(w,b.length)):(C=b.slice(0,w),this.leftOver=b.slice(w,b.length))),this.push({data:a.utf8decode(C),meta:y.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=h,o.inherits(g,c),g.prototype.processChunk=function(y){this.push({data:a.utf8encode(y.data),meta:y.meta})},a.Utf8EncodeWorker=g},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,a){var o=e("./support"),i=e("./base64"),l=e("./nodejsUtils"),c=e("./external");function d(v){return v}function p(v,w){for(var C=0;C<v.length;++C)w[C]=255&v.charCodeAt(C);return w}e("setimmediate"),a.newBlob=function(v,w){a.checkSupport("blob");try{return new Blob([v],{type:w})}catch{try{var C=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return C.append(v),C.getBlob(w)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(v,w,C){var k=[],N=0,O=v.length;if(O<=C)return String.fromCharCode.apply(null,v);for(;N<O;)w==="array"||w==="nodebuffer"?k.push(String.fromCharCode.apply(null,v.slice(N,Math.min(N+C,O)))):k.push(String.fromCharCode.apply(null,v.subarray(N,Math.min(N+C,O)))),N+=C;return k.join("")},stringifyByChar:function(v){for(var w="",C=0;C<v.length;C++)w+=String.fromCharCode(v[C]);return w},applyCanBeUsed:{uint8array:(function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}})()}};function g(v){var w=65536,C=a.getTypeOf(v),k=!0;if(C==="uint8array"?k=h.applyCanBeUsed.uint8array:C==="nodebuffer"&&(k=h.applyCanBeUsed.nodebuffer),k)for(;1<w;)try{return h.stringifyByChunk(v,C,w)}catch{w=Math.floor(w/2)}return h.stringifyByChar(v)}function y(v,w){for(var C=0;C<v.length;C++)w[C]=v[C];return w}a.applyFromCharCode=g;var b={};b.string={string:d,array:function(v){return p(v,new Array(v.length))},arraybuffer:function(v){return b.string.uint8array(v).buffer},uint8array:function(v){return p(v,new Uint8Array(v.length))},nodebuffer:function(v){return p(v,l.allocBuffer(v.length))}},b.array={string:g,array:d,arraybuffer:function(v){return new Uint8Array(v).buffer},uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return l.newBufferFrom(v)}},b.arraybuffer={string:function(v){return g(new Uint8Array(v))},array:function(v){return y(new Uint8Array(v),new Array(v.byteLength))},arraybuffer:d,uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return l.newBufferFrom(new Uint8Array(v))}},b.uint8array={string:g,array:function(v){return y(v,new Array(v.length))},arraybuffer:function(v){return v.buffer},uint8array:d,nodebuffer:function(v){return l.newBufferFrom(v)}},b.nodebuffer={string:g,array:function(v){return y(v,new Array(v.length))},arraybuffer:function(v){return b.nodebuffer.uint8array(v).buffer},uint8array:function(v){return y(v,new Uint8Array(v.length))},nodebuffer:d},a.transformTo=function(v,w){if(w=w||"",!v)return w;a.checkSupport(v);var C=a.getTypeOf(w);return b[C][v](w)},a.resolve=function(v){for(var w=v.split("/"),C=[],k=0;k<w.length;k++){var N=w[k];N==="."||N===""&&k!==0&&k!==w.length-1||(N===".."?C.pop():C.push(N))}return C.join("/")},a.getTypeOf=function(v){return typeof v=="string"?"string":Object.prototype.toString.call(v)==="[object Array]"?"array":o.nodebuffer&&l.isBuffer(v)?"nodebuffer":o.uint8array&&v instanceof Uint8Array?"uint8array":o.arraybuffer&&v instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(v){if(!o[v.toLowerCase()])throw new Error(v+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(v){var w,C,k="";for(C=0;C<(v||"").length;C++)k+="\\x"+((w=v.charCodeAt(C))<16?"0":"")+w.toString(16).toUpperCase();return k},a.delay=function(v,w,C){setImmediate(function(){v.apply(C||null,w||[])})},a.inherits=function(v,w){function C(){}C.prototype=w.prototype,v.prototype=new C},a.extend=function(){var v,w,C={};for(v=0;v<arguments.length;v++)for(w in arguments[v])Object.prototype.hasOwnProperty.call(arguments[v],w)&&C[w]===void 0&&(C[w]=arguments[v][w]);return C},a.prepareContent=function(v,w,C,k,N){return c.Promise.resolve(w).then(function(O){return o.blob&&(O instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(O))!==-1)&&typeof FileReader<"u"?new c.Promise(function(R,L){var B=new FileReader;B.onload=function(G){R(G.target.result)},B.onerror=function(G){L(G.target.error)},B.readAsArrayBuffer(O)}):O}).then(function(O){var R=a.getTypeOf(O);return R?(R==="arraybuffer"?O=a.transformTo("uint8array",O):R==="string"&&(N?O=i.decode(O):C&&k!==!0&&(O=(function(L){return p(L,o.uint8array?new Uint8Array(L.length):new Array(L.length))})(O))),O):c.Promise.reject(new Error("Can't read the data of '"+v+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,a){var o=e("./reader/readerFor"),i=e("./utils"),l=e("./signature"),c=e("./zipEntry"),d=e("./support");function p(h){this.files=[],this.loadOptions=h}p.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var g=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(g)+", expected "+i.pretty(h)+")")}},isSignature:function(h,g){var y=this.reader.index;this.reader.setIndex(h);var b=this.reader.readString(4)===g;return this.reader.setIndex(y),b},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),g=d.uint8array?"uint8array":"array",y=i.transformTo(g,h);this.zipComment=this.loadOptions.decodeFileName(y)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,g,y,b=this.zip64EndOfCentralSize-44;0<b;)h=this.reader.readInt(2),g=this.reader.readInt(4),y=this.reader.readData(g),this.zip64ExtensibleData[h]={id:h,length:g,value:y}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,g;for(h=0;h<this.files.length;h++)g=this.files[h],this.reader.setIndex(g.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),g.readLocalPart(this.reader),g.handleUTF8(),g.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)(h=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var g=h;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var y=this.centralDirOffset+this.centralDirSize;this.zip64&&(y+=20,y+=12+this.zip64EndOfCentralSize);var b=g-y;if(0<b)this.isSignature(g,l.CENTRAL_FILE_HEADER)||(this.reader.zero=b);else if(b<0)throw new Error("Corrupted zip: missing "+Math.abs(b)+" bytes.")},prepareReader:function(h){this.reader=o(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=p},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,a){var o=e("./reader/readerFor"),i=e("./utils"),l=e("./compressedObject"),c=e("./crc32"),d=e("./utf8"),p=e("./compressions"),h=e("./support");function g(y,b){this.options=y,this.loadOptions=b}g.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(y){var b,v;if(y.skip(22),this.fileNameLength=y.readInt(2),v=y.readInt(2),this.fileName=y.readData(this.fileNameLength),y.skip(v),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((b=(function(w){for(var C in p)if(Object.prototype.hasOwnProperty.call(p,C)&&p[C].magic===w)return p[C];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,b,y.readData(this.compressedSize))},readCentralPart:function(y){this.versionMadeBy=y.readInt(2),y.skip(2),this.bitFlag=y.readInt(2),this.compressionMethod=y.readString(2),this.date=y.readDate(),this.crc32=y.readInt(4),this.compressedSize=y.readInt(4),this.uncompressedSize=y.readInt(4);var b=y.readInt(2);if(this.extraFieldsLength=y.readInt(2),this.fileCommentLength=y.readInt(2),this.diskNumberStart=y.readInt(2),this.internalFileAttributes=y.readInt(2),this.externalFileAttributes=y.readInt(4),this.localHeaderOffset=y.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");y.skip(b),this.readExtraFields(y),this.parseZIP64ExtraField(y),this.fileComment=y.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var y=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),y==0&&(this.dosPermissions=63&this.externalFileAttributes),y==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var y=o(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=y.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=y.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=y.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=y.readInt(4))}},readExtraFields:function(y){var b,v,w,C=y.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});y.index+4<C;)b=y.readInt(2),v=y.readInt(2),w=y.readData(v),this.extraFields[b]={id:b,length:v,value:w};y.setIndex(C)},handleUTF8:function(){var y=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=d.utf8decode(this.fileName),this.fileCommentStr=d.utf8decode(this.fileComment);else{var b=this.findExtraFieldUnicodePath();if(b!==null)this.fileNameStr=b;else{var v=i.transformTo(y,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(v)}var w=this.findExtraFieldUnicodeComment();if(w!==null)this.fileCommentStr=w;else{var C=i.transformTo(y,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(C)}}},findExtraFieldUnicodePath:function(){var y=this.extraFields[28789];if(y){var b=o(y.value);return b.readInt(1)!==1||c(this.fileName)!==b.readInt(4)?null:d.utf8decode(b.readData(y.length-5))}return null},findExtraFieldUnicodeComment:function(){var y=this.extraFields[25461];if(y){var b=o(y.value);return b.readInt(1)!==1||c(this.fileComment)!==b.readInt(4)?null:d.utf8decode(b.readData(y.length-5))}return null}},t.exports=g},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,a){function o(b,v,w){this.name=b,this.dir=w.dir,this.date=w.date,this.comment=w.comment,this.unixPermissions=w.unixPermissions,this.dosPermissions=w.dosPermissions,this._data=v,this._dataBinary=w.binary,this.options={compression:w.compression,compressionOptions:w.compressionOptions}}var i=e("./stream/StreamHelper"),l=e("./stream/DataWorker"),c=e("./utf8"),d=e("./compressedObject"),p=e("./stream/GenericWorker");o.prototype={internalStream:function(b){var v=null,w="string";try{if(!b)throw new Error("No output type specified.");var C=(w=b.toLowerCase())==="string"||w==="text";w!=="binarystring"&&w!=="text"||(w="string"),v=this._decompressWorker();var k=!this._dataBinary;k&&!C&&(v=v.pipe(new c.Utf8EncodeWorker)),!k&&C&&(v=v.pipe(new c.Utf8DecodeWorker))}catch(N){(v=new p("error")).error(N)}return new i(v,w,"")},async:function(b,v){return this.internalStream(b).accumulate(v)},nodeStream:function(b,v){return this.internalStream(b||"nodebuffer").toNodejsStream(v)},_compressWorker:function(b,v){if(this._data instanceof d&&this._data.compression.magic===b.magic)return this._data.getCompressedWorker();var w=this._decompressWorker();return this._dataBinary||(w=w.pipe(new c.Utf8EncodeWorker)),d.createWorkerFrom(w,b,v)},_decompressWorker:function(){return this._data instanceof d?this._data.getContentWorker():this._data instanceof p?this._data:new l(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],g=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},y=0;y<h.length;y++)o.prototype[h[y]]=g;t.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,a){(function(o){var i,l,c=o.MutationObserver||o.WebKitMutationObserver;if(c){var d=0,p=new c(b),h=o.document.createTextNode("");p.observe(h,{characterData:!0}),i=function(){h.data=d=++d%2}}else if(o.setImmediate||o.MessageChannel===void 0)i="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var v=o.document.createElement("script");v.onreadystatechange=function(){b(),v.onreadystatechange=null,v.parentNode.removeChild(v),v=null},o.document.documentElement.appendChild(v)}:function(){setTimeout(b,0)};else{var g=new o.MessageChannel;g.port1.onmessage=b,i=function(){g.port2.postMessage(0)}}var y=[];function b(){var v,w;l=!0;for(var C=y.length;C;){for(w=y,y=[],v=-1;++v<C;)w[v]();C=y.length}l=!1}t.exports=function(v){y.push(v)!==1||l||i()}}).call(this,typeof X0<"u"?X0:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,t,a){var o=e("immediate");function i(){}var l={},c=["REJECTED"],d=["FULFILLED"],p=["PENDING"];function h(C){if(typeof C!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,C!==i&&v(this,C)}function g(C,k,N){this.promise=C,typeof k=="function"&&(this.onFulfilled=k,this.callFulfilled=this.otherCallFulfilled),typeof N=="function"&&(this.onRejected=N,this.callRejected=this.otherCallRejected)}function y(C,k,N){o(function(){var O;try{O=k(N)}catch(R){return l.reject(C,R)}O===C?l.reject(C,new TypeError("Cannot resolve promise with itself")):l.resolve(C,O)})}function b(C){var k=C&&C.then;if(C&&(typeof C=="object"||typeof C=="function")&&typeof k=="function")return function(){k.apply(C,arguments)}}function v(C,k){var N=!1;function O(B){N||(N=!0,l.reject(C,B))}function R(B){N||(N=!0,l.resolve(C,B))}var L=w(function(){k(R,O)});L.status==="error"&&O(L.value)}function w(C,k){var N={};try{N.value=C(k),N.status="success"}catch(O){N.status="error",N.value=O}return N}(t.exports=h).prototype.finally=function(C){if(typeof C!="function")return this;var k=this.constructor;return this.then(function(N){return k.resolve(C()).then(function(){return N})},function(N){return k.resolve(C()).then(function(){throw N})})},h.prototype.catch=function(C){return this.then(null,C)},h.prototype.then=function(C,k){if(typeof C!="function"&&this.state===d||typeof k!="function"&&this.state===c)return this;var N=new this.constructor(i);return this.state!==p?y(N,this.state===d?C:k,this.outcome):this.queue.push(new g(N,C,k)),N},g.prototype.callFulfilled=function(C){l.resolve(this.promise,C)},g.prototype.otherCallFulfilled=function(C){y(this.promise,this.onFulfilled,C)},g.prototype.callRejected=function(C){l.reject(this.promise,C)},g.prototype.otherCallRejected=function(C){y(this.promise,this.onRejected,C)},l.resolve=function(C,k){var N=w(b,k);if(N.status==="error")return l.reject(C,N.value);var O=N.value;if(O)v(C,O);else{C.state=d,C.outcome=k;for(var R=-1,L=C.queue.length;++R<L;)C.queue[R].callFulfilled(k)}return C},l.reject=function(C,k){C.state=c,C.outcome=k;for(var N=-1,O=C.queue.length;++N<O;)C.queue[N].callRejected(k);return C},h.resolve=function(C){return C instanceof this?C:l.resolve(new this(i),C)},h.reject=function(C){var k=new this(i);return l.reject(k,C)},h.all=function(C){var k=this;if(Object.prototype.toString.call(C)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=C.length,O=!1;if(!N)return this.resolve([]);for(var R=new Array(N),L=0,B=-1,G=new this(i);++B<N;)$(C[B],B);return G;function $(z,Y){k.resolve(z).then(function(M){R[Y]=M,++L!==N||O||(O=!0,l.resolve(G,R))},function(M){O||(O=!0,l.reject(G,M))})}},h.race=function(C){var k=this;if(Object.prototype.toString.call(C)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=C.length,O=!1;if(!N)return this.resolve([]);for(var R=-1,L=new this(i);++R<N;)B=C[R],k.resolve(B).then(function(G){O||(O=!0,l.resolve(L,G))},function(G){O||(O=!0,l.reject(L,G))});var B;return L}},{immediate:36}],38:[function(e,t,a){var o={};(0,e("./lib/utils/common").assign)(o,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,a){var o=e("./zlib/deflate"),i=e("./utils/common"),l=e("./utils/strings"),c=e("./zlib/messages"),d=e("./zlib/zstream"),p=Object.prototype.toString,h=0,g=-1,y=0,b=8;function v(C){if(!(this instanceof v))return new v(C);this.options=i.assign({level:g,method:b,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},C||{});var k=this.options;k.raw&&0<k.windowBits?k.windowBits=-k.windowBits:k.gzip&&0<k.windowBits&&k.windowBits<16&&(k.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var N=o.deflateInit2(this.strm,k.level,k.method,k.windowBits,k.memLevel,k.strategy);if(N!==h)throw new Error(c[N]);if(k.header&&o.deflateSetHeader(this.strm,k.header),k.dictionary){var O;if(O=typeof k.dictionary=="string"?l.string2buf(k.dictionary):p.call(k.dictionary)==="[object ArrayBuffer]"?new Uint8Array(k.dictionary):k.dictionary,(N=o.deflateSetDictionary(this.strm,O))!==h)throw new Error(c[N]);this._dict_set=!0}}function w(C,k){var N=new v(k);if(N.push(C,!0),N.err)throw N.msg||c[N.err];return N.result}v.prototype.push=function(C,k){var N,O,R=this.strm,L=this.options.chunkSize;if(this.ended)return!1;O=k===~~k?k:k===!0?4:0,typeof C=="string"?R.input=l.string2buf(C):p.call(C)==="[object ArrayBuffer]"?R.input=new Uint8Array(C):R.input=C,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new i.Buf8(L),R.next_out=0,R.avail_out=L),(N=o.deflate(R,O))!==1&&N!==h)return this.onEnd(N),!(this.ended=!0);R.avail_out!==0&&(R.avail_in!==0||O!==4&&O!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(i.shrinkBuf(R.output,R.next_out))):this.onData(i.shrinkBuf(R.output,R.next_out)))}while((0<R.avail_in||R.avail_out===0)&&N!==1);return O===4?(N=o.deflateEnd(this.strm),this.onEnd(N),this.ended=!0,N===h):O!==2||(this.onEnd(h),!(R.avail_out=0))},v.prototype.onData=function(C){this.chunks.push(C)},v.prototype.onEnd=function(C){C===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=C,this.msg=this.strm.msg},a.Deflate=v,a.deflate=w,a.deflateRaw=function(C,k){return(k=k||{}).raw=!0,w(C,k)},a.gzip=function(C,k){return(k=k||{}).gzip=!0,w(C,k)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,a){var o=e("./zlib/inflate"),i=e("./utils/common"),l=e("./utils/strings"),c=e("./zlib/constants"),d=e("./zlib/messages"),p=e("./zlib/zstream"),h=e("./zlib/gzheader"),g=Object.prototype.toString;function y(v){if(!(this instanceof y))return new y(v);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},v||{});var w=this.options;w.raw&&0<=w.windowBits&&w.windowBits<16&&(w.windowBits=-w.windowBits,w.windowBits===0&&(w.windowBits=-15)),!(0<=w.windowBits&&w.windowBits<16)||v&&v.windowBits||(w.windowBits+=32),15<w.windowBits&&w.windowBits<48&&(15&w.windowBits)==0&&(w.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var C=o.inflateInit2(this.strm,w.windowBits);if(C!==c.Z_OK)throw new Error(d[C]);this.header=new h,o.inflateGetHeader(this.strm,this.header)}function b(v,w){var C=new y(w);if(C.push(v,!0),C.err)throw C.msg||d[C.err];return C.result}y.prototype.push=function(v,w){var C,k,N,O,R,L,B=this.strm,G=this.options.chunkSize,$=this.options.dictionary,z=!1;if(this.ended)return!1;k=w===~~w?w:w===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof v=="string"?B.input=l.binstring2buf(v):g.call(v)==="[object ArrayBuffer]"?B.input=new Uint8Array(v):B.input=v,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new i.Buf8(G),B.next_out=0,B.avail_out=G),(C=o.inflate(B,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&$&&(L=typeof $=="string"?l.string2buf($):g.call($)==="[object ArrayBuffer]"?new Uint8Array($):$,C=o.inflateSetDictionary(this.strm,L)),C===c.Z_BUF_ERROR&&z===!0&&(C=c.Z_OK,z=!1),C!==c.Z_STREAM_END&&C!==c.Z_OK)return this.onEnd(C),!(this.ended=!0);B.next_out&&(B.avail_out!==0&&C!==c.Z_STREAM_END&&(B.avail_in!==0||k!==c.Z_FINISH&&k!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(N=l.utf8border(B.output,B.next_out),O=B.next_out-N,R=l.buf2string(B.output,N),B.next_out=O,B.avail_out=G-O,O&&i.arraySet(B.output,B.output,N,O,0),this.onData(R)):this.onData(i.shrinkBuf(B.output,B.next_out)))),B.avail_in===0&&B.avail_out===0&&(z=!0)}while((0<B.avail_in||B.avail_out===0)&&C!==c.Z_STREAM_END);return C===c.Z_STREAM_END&&(k=c.Z_FINISH),k===c.Z_FINISH?(C=o.inflateEnd(this.strm),this.onEnd(C),this.ended=!0,C===c.Z_OK):k!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(B.avail_out=0))},y.prototype.onData=function(v){this.chunks.push(v)},y.prototype.onEnd=function(v){v===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},a.Inflate=y,a.inflate=b,a.inflateRaw=function(v,w){return(w=w||{}).raw=!0,b(v,w)},a.ungzip=b},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,a){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(c){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var p=d.shift();if(p){if(typeof p!="object")throw new TypeError(p+"must be non-object");for(var h in p)p.hasOwnProperty(h)&&(c[h]=p[h])}}return c},a.shrinkBuf=function(c,d){return c.length===d?c:c.subarray?c.subarray(0,d):(c.length=d,c)};var i={arraySet:function(c,d,p,h,g){if(d.subarray&&c.subarray)c.set(d.subarray(p,p+h),g);else for(var y=0;y<h;y++)c[g+y]=d[p+y]},flattenChunks:function(c){var d,p,h,g,y,b;for(d=h=0,p=c.length;d<p;d++)h+=c[d].length;for(b=new Uint8Array(h),d=g=0,p=c.length;d<p;d++)y=c[d],b.set(y,g),g+=y.length;return b}},l={arraySet:function(c,d,p,h,g){for(var y=0;y<h;y++)c[g+y]=d[p+y]},flattenChunks:function(c){return[].concat.apply([],c)}};a.setTyped=function(c){c?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,i)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,l))},a.setTyped(o)},{}],42:[function(e,t,a){var o=e("./common"),i=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var c=new o.Buf8(256),d=0;d<256;d++)c[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;function p(h,g){if(g<65537&&(h.subarray&&l||!h.subarray&&i))return String.fromCharCode.apply(null,o.shrinkBuf(h,g));for(var y="",b=0;b<g;b++)y+=String.fromCharCode(h[b]);return y}c[254]=c[254]=1,a.string2buf=function(h){var g,y,b,v,w,C=h.length,k=0;for(v=0;v<C;v++)(64512&(y=h.charCodeAt(v)))==55296&&v+1<C&&(64512&(b=h.charCodeAt(v+1)))==56320&&(y=65536+(y-55296<<10)+(b-56320),v++),k+=y<128?1:y<2048?2:y<65536?3:4;for(g=new o.Buf8(k),v=w=0;w<k;v++)(64512&(y=h.charCodeAt(v)))==55296&&v+1<C&&(64512&(b=h.charCodeAt(v+1)))==56320&&(y=65536+(y-55296<<10)+(b-56320),v++),y<128?g[w++]=y:(y<2048?g[w++]=192|y>>>6:(y<65536?g[w++]=224|y>>>12:(g[w++]=240|y>>>18,g[w++]=128|y>>>12&63),g[w++]=128|y>>>6&63),g[w++]=128|63&y);return g},a.buf2binstring=function(h){return p(h,h.length)},a.binstring2buf=function(h){for(var g=new o.Buf8(h.length),y=0,b=g.length;y<b;y++)g[y]=h.charCodeAt(y);return g},a.buf2string=function(h,g){var y,b,v,w,C=g||h.length,k=new Array(2*C);for(y=b=0;y<C;)if((v=h[y++])<128)k[b++]=v;else if(4<(w=c[v]))k[b++]=65533,y+=w-1;else{for(v&=w===2?31:w===3?15:7;1<w&&y<C;)v=v<<6|63&h[y++],w--;1<w?k[b++]=65533:v<65536?k[b++]=v:(v-=65536,k[b++]=55296|v>>10&1023,k[b++]=56320|1023&v)}return p(k,b)},a.utf8border=function(h,g){var y;for((g=g||h.length)>h.length&&(g=h.length),y=g-1;0<=y&&(192&h[y])==128;)y--;return y<0||y===0?g:y+c[h[y]]>g?y:g}},{"./common":41}],43:[function(e,t,a){t.exports=function(o,i,l,c){for(var d=65535&o|0,p=o>>>16&65535|0,h=0;l!==0;){for(l-=h=2e3<l?2e3:l;p=p+(d=d+i[c++]|0)|0,--h;);d%=65521,p%=65521}return d|p<<16|0}},{}],44:[function(e,t,a){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,a){var o=(function(){for(var i,l=[],c=0;c<256;c++){i=c;for(var d=0;d<8;d++)i=1&i?3988292384^i>>>1:i>>>1;l[c]=i}return l})();t.exports=function(i,l,c,d){var p=o,h=d+c;i^=-1;for(var g=d;g<h;g++)i=i>>>8^p[255&(i^l[g])];return-1^i}},{}],46:[function(e,t,a){var o,i=e("../utils/common"),l=e("./trees"),c=e("./adler32"),d=e("./crc32"),p=e("./messages"),h=0,g=4,y=0,b=-2,v=-1,w=4,C=2,k=8,N=9,O=286,R=30,L=19,B=2*O+1,G=15,$=3,z=258,Y=z+$+1,M=42,q=113,P=1,H=2,D=3,X=4;function se(ee,ue){return ee.msg=p[ue],ue}function Q(ee){return(ee<<1)-(4<ee?9:0)}function xe(ee){for(var ue=ee.length;0<=--ue;)ee[ue]=0}function K(ee){var ue=ee.state,Oe=ue.pending;Oe>ee.avail_out&&(Oe=ee.avail_out),Oe!==0&&(i.arraySet(ee.output,ue.pending_buf,ue.pending_out,Oe,ee.next_out),ee.next_out+=Oe,ue.pending_out+=Oe,ee.total_out+=Oe,ee.avail_out-=Oe,ue.pending-=Oe,ue.pending===0&&(ue.pending_out=0))}function Z(ee,ue){l._tr_flush_block(ee,0<=ee.block_start?ee.block_start:-1,ee.strstart-ee.block_start,ue),ee.block_start=ee.strstart,K(ee.strm)}function ve(ee,ue){ee.pending_buf[ee.pending++]=ue}function ae(ee,ue){ee.pending_buf[ee.pending++]=ue>>>8&255,ee.pending_buf[ee.pending++]=255&ue}function Se(ee,ue){var Oe,J,I=ee.max_chain_length,V=ee.strstart,re=ee.prev_length,pe=ee.nice_match,ge=ee.strstart>ee.w_size-Y?ee.strstart-(ee.w_size-Y):0,Ce=ee.window,he=ee.w_mask,ie=ee.prev,Fe=ee.strstart+z,We=Ce[V+re-1],Qe=Ce[V+re];ee.prev_length>=ee.good_match&&(I>>=2),pe>ee.lookahead&&(pe=ee.lookahead);do if(Ce[(Oe=ue)+re]===Qe&&Ce[Oe+re-1]===We&&Ce[Oe]===Ce[V]&&Ce[++Oe]===Ce[V+1]){V+=2,Oe++;do;while(Ce[++V]===Ce[++Oe]&&Ce[++V]===Ce[++Oe]&&Ce[++V]===Ce[++Oe]&&Ce[++V]===Ce[++Oe]&&Ce[++V]===Ce[++Oe]&&Ce[++V]===Ce[++Oe]&&Ce[++V]===Ce[++Oe]&&Ce[++V]===Ce[++Oe]&&V<Fe);if(J=z-(Fe-V),V=Fe-z,re<J){if(ee.match_start=ue,pe<=(re=J))break;We=Ce[V+re-1],Qe=Ce[V+re]}}while((ue=ie[ue&he])>ge&&--I!=0);return re<=ee.lookahead?re:ee.lookahead}function Pe(ee){var ue,Oe,J,I,V,re,pe,ge,Ce,he,ie=ee.w_size;do{if(I=ee.window_size-ee.lookahead-ee.strstart,ee.strstart>=ie+(ie-Y)){for(i.arraySet(ee.window,ee.window,ie,ie,0),ee.match_start-=ie,ee.strstart-=ie,ee.block_start-=ie,ue=Oe=ee.hash_size;J=ee.head[--ue],ee.head[ue]=ie<=J?J-ie:0,--Oe;);for(ue=Oe=ie;J=ee.prev[--ue],ee.prev[ue]=ie<=J?J-ie:0,--Oe;);I+=ie}if(ee.strm.avail_in===0)break;if(re=ee.strm,pe=ee.window,ge=ee.strstart+ee.lookahead,Ce=I,he=void 0,he=re.avail_in,Ce<he&&(he=Ce),Oe=he===0?0:(re.avail_in-=he,i.arraySet(pe,re.input,re.next_in,he,ge),re.state.wrap===1?re.adler=c(re.adler,pe,he,ge):re.state.wrap===2&&(re.adler=d(re.adler,pe,he,ge)),re.next_in+=he,re.total_in+=he,he),ee.lookahead+=Oe,ee.lookahead+ee.insert>=$)for(V=ee.strstart-ee.insert,ee.ins_h=ee.window[V],ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[V+1])&ee.hash_mask;ee.insert&&(ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[V+$-1])&ee.hash_mask,ee.prev[V&ee.w_mask]=ee.head[ee.ins_h],ee.head[ee.ins_h]=V,V++,ee.insert--,!(ee.lookahead+ee.insert<$)););}while(ee.lookahead<Y&&ee.strm.avail_in!==0)}function $e(ee,ue){for(var Oe,J;;){if(ee.lookahead<Y){if(Pe(ee),ee.lookahead<Y&&ue===h)return P;if(ee.lookahead===0)break}if(Oe=0,ee.lookahead>=$&&(ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[ee.strstart+$-1])&ee.hash_mask,Oe=ee.prev[ee.strstart&ee.w_mask]=ee.head[ee.ins_h],ee.head[ee.ins_h]=ee.strstart),Oe!==0&&ee.strstart-Oe<=ee.w_size-Y&&(ee.match_length=Se(ee,Oe)),ee.match_length>=$)if(J=l._tr_tally(ee,ee.strstart-ee.match_start,ee.match_length-$),ee.lookahead-=ee.match_length,ee.match_length<=ee.max_lazy_match&&ee.lookahead>=$){for(ee.match_length--;ee.strstart++,ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[ee.strstart+$-1])&ee.hash_mask,Oe=ee.prev[ee.strstart&ee.w_mask]=ee.head[ee.ins_h],ee.head[ee.ins_h]=ee.strstart,--ee.match_length!=0;);ee.strstart++}else ee.strstart+=ee.match_length,ee.match_length=0,ee.ins_h=ee.window[ee.strstart],ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[ee.strstart+1])&ee.hash_mask;else J=l._tr_tally(ee,0,ee.window[ee.strstart]),ee.lookahead--,ee.strstart++;if(J&&(Z(ee,!1),ee.strm.avail_out===0))return P}return ee.insert=ee.strstart<$-1?ee.strstart:$-1,ue===g?(Z(ee,!0),ee.strm.avail_out===0?D:X):ee.last_lit&&(Z(ee,!1),ee.strm.avail_out===0)?P:H}function we(ee,ue){for(var Oe,J,I;;){if(ee.lookahead<Y){if(Pe(ee),ee.lookahead<Y&&ue===h)return P;if(ee.lookahead===0)break}if(Oe=0,ee.lookahead>=$&&(ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[ee.strstart+$-1])&ee.hash_mask,Oe=ee.prev[ee.strstart&ee.w_mask]=ee.head[ee.ins_h],ee.head[ee.ins_h]=ee.strstart),ee.prev_length=ee.match_length,ee.prev_match=ee.match_start,ee.match_length=$-1,Oe!==0&&ee.prev_length<ee.max_lazy_match&&ee.strstart-Oe<=ee.w_size-Y&&(ee.match_length=Se(ee,Oe),ee.match_length<=5&&(ee.strategy===1||ee.match_length===$&&4096<ee.strstart-ee.match_start)&&(ee.match_length=$-1)),ee.prev_length>=$&&ee.match_length<=ee.prev_length){for(I=ee.strstart+ee.lookahead-$,J=l._tr_tally(ee,ee.strstart-1-ee.prev_match,ee.prev_length-$),ee.lookahead-=ee.prev_length-1,ee.prev_length-=2;++ee.strstart<=I&&(ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[ee.strstart+$-1])&ee.hash_mask,Oe=ee.prev[ee.strstart&ee.w_mask]=ee.head[ee.ins_h],ee.head[ee.ins_h]=ee.strstart),--ee.prev_length!=0;);if(ee.match_available=0,ee.match_length=$-1,ee.strstart++,J&&(Z(ee,!1),ee.strm.avail_out===0))return P}else if(ee.match_available){if((J=l._tr_tally(ee,0,ee.window[ee.strstart-1]))&&Z(ee,!1),ee.strstart++,ee.lookahead--,ee.strm.avail_out===0)return P}else ee.match_available=1,ee.strstart++,ee.lookahead--}return ee.match_available&&(J=l._tr_tally(ee,0,ee.window[ee.strstart-1]),ee.match_available=0),ee.insert=ee.strstart<$-1?ee.strstart:$-1,ue===g?(Z(ee,!0),ee.strm.avail_out===0?D:X):ee.last_lit&&(Z(ee,!1),ee.strm.avail_out===0)?P:H}function Ae(ee,ue,Oe,J,I){this.good_length=ee,this.max_lazy=ue,this.nice_length=Oe,this.max_chain=J,this.func=I}function ze(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=k,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*B),this.dyn_dtree=new i.Buf16(2*(2*R+1)),this.bl_tree=new i.Buf16(2*(2*L+1)),xe(this.dyn_ltree),xe(this.dyn_dtree),xe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(G+1),this.heap=new i.Buf16(2*O+1),xe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*O+1),xe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ge(ee){var ue;return ee&&ee.state?(ee.total_in=ee.total_out=0,ee.data_type=C,(ue=ee.state).pending=0,ue.pending_out=0,ue.wrap<0&&(ue.wrap=-ue.wrap),ue.status=ue.wrap?M:q,ee.adler=ue.wrap===2?0:1,ue.last_flush=h,l._tr_init(ue),y):se(ee,b)}function Ue(ee){var ue=Ge(ee);return ue===y&&(function(Oe){Oe.window_size=2*Oe.w_size,xe(Oe.head),Oe.max_lazy_match=o[Oe.level].max_lazy,Oe.good_match=o[Oe.level].good_length,Oe.nice_match=o[Oe.level].nice_length,Oe.max_chain_length=o[Oe.level].max_chain,Oe.strstart=0,Oe.block_start=0,Oe.lookahead=0,Oe.insert=0,Oe.match_length=Oe.prev_length=$-1,Oe.match_available=0,Oe.ins_h=0})(ee.state),ue}function ht(ee,ue,Oe,J,I,V){if(!ee)return b;var re=1;if(ue===v&&(ue=6),J<0?(re=0,J=-J):15<J&&(re=2,J-=16),I<1||N<I||Oe!==k||J<8||15<J||ue<0||9<ue||V<0||w<V)return se(ee,b);J===8&&(J=9);var pe=new ze;return(ee.state=pe).strm=ee,pe.wrap=re,pe.gzhead=null,pe.w_bits=J,pe.w_size=1<<pe.w_bits,pe.w_mask=pe.w_size-1,pe.hash_bits=I+7,pe.hash_size=1<<pe.hash_bits,pe.hash_mask=pe.hash_size-1,pe.hash_shift=~~((pe.hash_bits+$-1)/$),pe.window=new i.Buf8(2*pe.w_size),pe.head=new i.Buf16(pe.hash_size),pe.prev=new i.Buf16(pe.w_size),pe.lit_bufsize=1<<I+6,pe.pending_buf_size=4*pe.lit_bufsize,pe.pending_buf=new i.Buf8(pe.pending_buf_size),pe.d_buf=1*pe.lit_bufsize,pe.l_buf=3*pe.lit_bufsize,pe.level=ue,pe.strategy=V,pe.method=Oe,Ue(ee)}o=[new Ae(0,0,0,0,function(ee,ue){var Oe=65535;for(Oe>ee.pending_buf_size-5&&(Oe=ee.pending_buf_size-5);;){if(ee.lookahead<=1){if(Pe(ee),ee.lookahead===0&&ue===h)return P;if(ee.lookahead===0)break}ee.strstart+=ee.lookahead,ee.lookahead=0;var J=ee.block_start+Oe;if((ee.strstart===0||ee.strstart>=J)&&(ee.lookahead=ee.strstart-J,ee.strstart=J,Z(ee,!1),ee.strm.avail_out===0)||ee.strstart-ee.block_start>=ee.w_size-Y&&(Z(ee,!1),ee.strm.avail_out===0))return P}return ee.insert=0,ue===g?(Z(ee,!0),ee.strm.avail_out===0?D:X):(ee.strstart>ee.block_start&&(Z(ee,!1),ee.strm.avail_out),P)}),new Ae(4,4,8,4,$e),new Ae(4,5,16,8,$e),new Ae(4,6,32,32,$e),new Ae(4,4,16,16,we),new Ae(8,16,32,32,we),new Ae(8,16,128,128,we),new Ae(8,32,128,256,we),new Ae(32,128,258,1024,we),new Ae(32,258,258,4096,we)],a.deflateInit=function(ee,ue){return ht(ee,ue,k,15,8,0)},a.deflateInit2=ht,a.deflateReset=Ue,a.deflateResetKeep=Ge,a.deflateSetHeader=function(ee,ue){return ee&&ee.state?ee.state.wrap!==2?b:(ee.state.gzhead=ue,y):b},a.deflate=function(ee,ue){var Oe,J,I,V;if(!ee||!ee.state||5<ue||ue<0)return ee?se(ee,b):b;if(J=ee.state,!ee.output||!ee.input&&ee.avail_in!==0||J.status===666&&ue!==g)return se(ee,ee.avail_out===0?-5:b);if(J.strm=ee,Oe=J.last_flush,J.last_flush=ue,J.status===M)if(J.wrap===2)ee.adler=0,ve(J,31),ve(J,139),ve(J,8),J.gzhead?(ve(J,(J.gzhead.text?1:0)+(J.gzhead.hcrc?2:0)+(J.gzhead.extra?4:0)+(J.gzhead.name?8:0)+(J.gzhead.comment?16:0)),ve(J,255&J.gzhead.time),ve(J,J.gzhead.time>>8&255),ve(J,J.gzhead.time>>16&255),ve(J,J.gzhead.time>>24&255),ve(J,J.level===9?2:2<=J.strategy||J.level<2?4:0),ve(J,255&J.gzhead.os),J.gzhead.extra&&J.gzhead.extra.length&&(ve(J,255&J.gzhead.extra.length),ve(J,J.gzhead.extra.length>>8&255)),J.gzhead.hcrc&&(ee.adler=d(ee.adler,J.pending_buf,J.pending,0)),J.gzindex=0,J.status=69):(ve(J,0),ve(J,0),ve(J,0),ve(J,0),ve(J,0),ve(J,J.level===9?2:2<=J.strategy||J.level<2?4:0),ve(J,3),J.status=q);else{var re=k+(J.w_bits-8<<4)<<8;re|=(2<=J.strategy||J.level<2?0:J.level<6?1:J.level===6?2:3)<<6,J.strstart!==0&&(re|=32),re+=31-re%31,J.status=q,ae(J,re),J.strstart!==0&&(ae(J,ee.adler>>>16),ae(J,65535&ee.adler)),ee.adler=1}if(J.status===69)if(J.gzhead.extra){for(I=J.pending;J.gzindex<(65535&J.gzhead.extra.length)&&(J.pending!==J.pending_buf_size||(J.gzhead.hcrc&&J.pending>I&&(ee.adler=d(ee.adler,J.pending_buf,J.pending-I,I)),K(ee),I=J.pending,J.pending!==J.pending_buf_size));)ve(J,255&J.gzhead.extra[J.gzindex]),J.gzindex++;J.gzhead.hcrc&&J.pending>I&&(ee.adler=d(ee.adler,J.pending_buf,J.pending-I,I)),J.gzindex===J.gzhead.extra.length&&(J.gzindex=0,J.status=73)}else J.status=73;if(J.status===73)if(J.gzhead.name){I=J.pending;do{if(J.pending===J.pending_buf_size&&(J.gzhead.hcrc&&J.pending>I&&(ee.adler=d(ee.adler,J.pending_buf,J.pending-I,I)),K(ee),I=J.pending,J.pending===J.pending_buf_size)){V=1;break}V=J.gzindex<J.gzhead.name.length?255&J.gzhead.name.charCodeAt(J.gzindex++):0,ve(J,V)}while(V!==0);J.gzhead.hcrc&&J.pending>I&&(ee.adler=d(ee.adler,J.pending_buf,J.pending-I,I)),V===0&&(J.gzindex=0,J.status=91)}else J.status=91;if(J.status===91)if(J.gzhead.comment){I=J.pending;do{if(J.pending===J.pending_buf_size&&(J.gzhead.hcrc&&J.pending>I&&(ee.adler=d(ee.adler,J.pending_buf,J.pending-I,I)),K(ee),I=J.pending,J.pending===J.pending_buf_size)){V=1;break}V=J.gzindex<J.gzhead.comment.length?255&J.gzhead.comment.charCodeAt(J.gzindex++):0,ve(J,V)}while(V!==0);J.gzhead.hcrc&&J.pending>I&&(ee.adler=d(ee.adler,J.pending_buf,J.pending-I,I)),V===0&&(J.status=103)}else J.status=103;if(J.status===103&&(J.gzhead.hcrc?(J.pending+2>J.pending_buf_size&&K(ee),J.pending+2<=J.pending_buf_size&&(ve(J,255&ee.adler),ve(J,ee.adler>>8&255),ee.adler=0,J.status=q)):J.status=q),J.pending!==0){if(K(ee),ee.avail_out===0)return J.last_flush=-1,y}else if(ee.avail_in===0&&Q(ue)<=Q(Oe)&&ue!==g)return se(ee,-5);if(J.status===666&&ee.avail_in!==0)return se(ee,-5);if(ee.avail_in!==0||J.lookahead!==0||ue!==h&&J.status!==666){var pe=J.strategy===2?(function(ge,Ce){for(var he;;){if(ge.lookahead===0&&(Pe(ge),ge.lookahead===0)){if(Ce===h)return P;break}if(ge.match_length=0,he=l._tr_tally(ge,0,ge.window[ge.strstart]),ge.lookahead--,ge.strstart++,he&&(Z(ge,!1),ge.strm.avail_out===0))return P}return ge.insert=0,Ce===g?(Z(ge,!0),ge.strm.avail_out===0?D:X):ge.last_lit&&(Z(ge,!1),ge.strm.avail_out===0)?P:H})(J,ue):J.strategy===3?(function(ge,Ce){for(var he,ie,Fe,We,Qe=ge.window;;){if(ge.lookahead<=z){if(Pe(ge),ge.lookahead<=z&&Ce===h)return P;if(ge.lookahead===0)break}if(ge.match_length=0,ge.lookahead>=$&&0<ge.strstart&&(ie=Qe[Fe=ge.strstart-1])===Qe[++Fe]&&ie===Qe[++Fe]&&ie===Qe[++Fe]){We=ge.strstart+z;do;while(ie===Qe[++Fe]&&ie===Qe[++Fe]&&ie===Qe[++Fe]&&ie===Qe[++Fe]&&ie===Qe[++Fe]&&ie===Qe[++Fe]&&ie===Qe[++Fe]&&ie===Qe[++Fe]&&Fe<We);ge.match_length=z-(We-Fe),ge.match_length>ge.lookahead&&(ge.match_length=ge.lookahead)}if(ge.match_length>=$?(he=l._tr_tally(ge,1,ge.match_length-$),ge.lookahead-=ge.match_length,ge.strstart+=ge.match_length,ge.match_length=0):(he=l._tr_tally(ge,0,ge.window[ge.strstart]),ge.lookahead--,ge.strstart++),he&&(Z(ge,!1),ge.strm.avail_out===0))return P}return ge.insert=0,Ce===g?(Z(ge,!0),ge.strm.avail_out===0?D:X):ge.last_lit&&(Z(ge,!1),ge.strm.avail_out===0)?P:H})(J,ue):o[J.level].func(J,ue);if(pe!==D&&pe!==X||(J.status=666),pe===P||pe===D)return ee.avail_out===0&&(J.last_flush=-1),y;if(pe===H&&(ue===1?l._tr_align(J):ue!==5&&(l._tr_stored_block(J,0,0,!1),ue===3&&(xe(J.head),J.lookahead===0&&(J.strstart=0,J.block_start=0,J.insert=0))),K(ee),ee.avail_out===0))return J.last_flush=-1,y}return ue!==g?y:J.wrap<=0?1:(J.wrap===2?(ve(J,255&ee.adler),ve(J,ee.adler>>8&255),ve(J,ee.adler>>16&255),ve(J,ee.adler>>24&255),ve(J,255&ee.total_in),ve(J,ee.total_in>>8&255),ve(J,ee.total_in>>16&255),ve(J,ee.total_in>>24&255)):(ae(J,ee.adler>>>16),ae(J,65535&ee.adler)),K(ee),0<J.wrap&&(J.wrap=-J.wrap),J.pending!==0?y:1)},a.deflateEnd=function(ee){var ue;return ee&&ee.state?(ue=ee.state.status)!==M&&ue!==69&&ue!==73&&ue!==91&&ue!==103&&ue!==q&&ue!==666?se(ee,b):(ee.state=null,ue===q?se(ee,-3):y):b},a.deflateSetDictionary=function(ee,ue){var Oe,J,I,V,re,pe,ge,Ce,he=ue.length;if(!ee||!ee.state||(V=(Oe=ee.state).wrap)===2||V===1&&Oe.status!==M||Oe.lookahead)return b;for(V===1&&(ee.adler=c(ee.adler,ue,he,0)),Oe.wrap=0,he>=Oe.w_size&&(V===0&&(xe(Oe.head),Oe.strstart=0,Oe.block_start=0,Oe.insert=0),Ce=new i.Buf8(Oe.w_size),i.arraySet(Ce,ue,he-Oe.w_size,Oe.w_size,0),ue=Ce,he=Oe.w_size),re=ee.avail_in,pe=ee.next_in,ge=ee.input,ee.avail_in=he,ee.next_in=0,ee.input=ue,Pe(Oe);Oe.lookahead>=$;){for(J=Oe.strstart,I=Oe.lookahead-($-1);Oe.ins_h=(Oe.ins_h<<Oe.hash_shift^Oe.window[J+$-1])&Oe.hash_mask,Oe.prev[J&Oe.w_mask]=Oe.head[Oe.ins_h],Oe.head[Oe.ins_h]=J,J++,--I;);Oe.strstart=J,Oe.lookahead=$-1,Pe(Oe)}return Oe.strstart+=Oe.lookahead,Oe.block_start=Oe.strstart,Oe.insert=Oe.lookahead,Oe.lookahead=0,Oe.match_length=Oe.prev_length=$-1,Oe.match_available=0,ee.next_in=pe,ee.input=ge,ee.avail_in=re,Oe.wrap=V,y},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,a){t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,a){t.exports=function(o,i){var l,c,d,p,h,g,y,b,v,w,C,k,N,O,R,L,B,G,$,z,Y,M,q,P,H;l=o.state,c=o.next_in,P=o.input,d=c+(o.avail_in-5),p=o.next_out,H=o.output,h=p-(i-o.avail_out),g=p+(o.avail_out-257),y=l.dmax,b=l.wsize,v=l.whave,w=l.wnext,C=l.window,k=l.hold,N=l.bits,O=l.lencode,R=l.distcode,L=(1<<l.lenbits)-1,B=(1<<l.distbits)-1;e:do{N<15&&(k+=P[c++]<<N,N+=8,k+=P[c++]<<N,N+=8),G=O[k&L];t:for(;;){if(k>>>=$=G>>>24,N-=$,($=G>>>16&255)===0)H[p++]=65535&G;else{if(!(16&$)){if((64&$)==0){G=O[(65535&G)+(k&(1<<$)-1)];continue t}if(32&$){l.mode=12;break e}o.msg="invalid literal/length code",l.mode=30;break e}z=65535&G,($&=15)&&(N<$&&(k+=P[c++]<<N,N+=8),z+=k&(1<<$)-1,k>>>=$,N-=$),N<15&&(k+=P[c++]<<N,N+=8,k+=P[c++]<<N,N+=8),G=R[k&B];r:for(;;){if(k>>>=$=G>>>24,N-=$,!(16&($=G>>>16&255))){if((64&$)==0){G=R[(65535&G)+(k&(1<<$)-1)];continue r}o.msg="invalid distance code",l.mode=30;break e}if(Y=65535&G,N<($&=15)&&(k+=P[c++]<<N,(N+=8)<$&&(k+=P[c++]<<N,N+=8)),y<(Y+=k&(1<<$)-1)){o.msg="invalid distance too far back",l.mode=30;break e}if(k>>>=$,N-=$,($=p-h)<Y){if(v<($=Y-$)&&l.sane){o.msg="invalid distance too far back",l.mode=30;break e}if(q=C,(M=0)===w){if(M+=b-$,$<z){for(z-=$;H[p++]=C[M++],--$;);M=p-Y,q=H}}else if(w<$){if(M+=b+w-$,($-=w)<z){for(z-=$;H[p++]=C[M++],--$;);if(M=0,w<z){for(z-=$=w;H[p++]=C[M++],--$;);M=p-Y,q=H}}}else if(M+=w-$,$<z){for(z-=$;H[p++]=C[M++],--$;);M=p-Y,q=H}for(;2<z;)H[p++]=q[M++],H[p++]=q[M++],H[p++]=q[M++],z-=3;z&&(H[p++]=q[M++],1<z&&(H[p++]=q[M++]))}else{for(M=p-Y;H[p++]=H[M++],H[p++]=H[M++],H[p++]=H[M++],2<(z-=3););z&&(H[p++]=H[M++],1<z&&(H[p++]=H[M++]))}break}}break}}while(c<d&&p<g);c-=z=N>>3,k&=(1<<(N-=z<<3))-1,o.next_in=c,o.next_out=p,o.avail_in=c<d?d-c+5:5-(c-d),o.avail_out=p<g?g-p+257:257-(p-g),l.hold=k,l.bits=N}},{}],49:[function(e,t,a){var o=e("../utils/common"),i=e("./adler32"),l=e("./crc32"),c=e("./inffast"),d=e("./inftrees"),p=1,h=2,g=0,y=-2,b=1,v=852,w=592;function C(M){return(M>>>24&255)+(M>>>8&65280)+((65280&M)<<8)+((255&M)<<24)}function k(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function N(M){var q;return M&&M.state?(q=M.state,M.total_in=M.total_out=q.total=0,M.msg="",q.wrap&&(M.adler=1&q.wrap),q.mode=b,q.last=0,q.havedict=0,q.dmax=32768,q.head=null,q.hold=0,q.bits=0,q.lencode=q.lendyn=new o.Buf32(v),q.distcode=q.distdyn=new o.Buf32(w),q.sane=1,q.back=-1,g):y}function O(M){var q;return M&&M.state?((q=M.state).wsize=0,q.whave=0,q.wnext=0,N(M)):y}function R(M,q){var P,H;return M&&M.state?(H=M.state,q<0?(P=0,q=-q):(P=1+(q>>4),q<48&&(q&=15)),q&&(q<8||15<q)?y:(H.window!==null&&H.wbits!==q&&(H.window=null),H.wrap=P,H.wbits=q,O(M))):y}function L(M,q){var P,H;return M?(H=new k,(M.state=H).window=null,(P=R(M,q))!==g&&(M.state=null),P):y}var B,G,$=!0;function z(M){if($){var q;for(B=new o.Buf32(512),G=new o.Buf32(32),q=0;q<144;)M.lens[q++]=8;for(;q<256;)M.lens[q++]=9;for(;q<280;)M.lens[q++]=7;for(;q<288;)M.lens[q++]=8;for(d(p,M.lens,0,288,B,0,M.work,{bits:9}),q=0;q<32;)M.lens[q++]=5;d(h,M.lens,0,32,G,0,M.work,{bits:5}),$=!1}M.lencode=B,M.lenbits=9,M.distcode=G,M.distbits=5}function Y(M,q,P,H){var D,X=M.state;return X.window===null&&(X.wsize=1<<X.wbits,X.wnext=0,X.whave=0,X.window=new o.Buf8(X.wsize)),H>=X.wsize?(o.arraySet(X.window,q,P-X.wsize,X.wsize,0),X.wnext=0,X.whave=X.wsize):(H<(D=X.wsize-X.wnext)&&(D=H),o.arraySet(X.window,q,P-H,D,X.wnext),(H-=D)?(o.arraySet(X.window,q,P-H,H,0),X.wnext=H,X.whave=X.wsize):(X.wnext+=D,X.wnext===X.wsize&&(X.wnext=0),X.whave<X.wsize&&(X.whave+=D))),0}a.inflateReset=O,a.inflateReset2=R,a.inflateResetKeep=N,a.inflateInit=function(M){return L(M,15)},a.inflateInit2=L,a.inflate=function(M,q){var P,H,D,X,se,Q,xe,K,Z,ve,ae,Se,Pe,$e,we,Ae,ze,Ge,Ue,ht,ee,ue,Oe,J,I=0,V=new o.Buf8(4),re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!M||!M.state||!M.output||!M.input&&M.avail_in!==0)return y;(P=M.state).mode===12&&(P.mode=13),se=M.next_out,D=M.output,xe=M.avail_out,X=M.next_in,H=M.input,Q=M.avail_in,K=P.hold,Z=P.bits,ve=Q,ae=xe,ue=g;e:for(;;)switch(P.mode){case b:if(P.wrap===0){P.mode=13;break}for(;Z<16;){if(Q===0)break e;Q--,K+=H[X++]<<Z,Z+=8}if(2&P.wrap&&K===35615){V[P.check=0]=255&K,V[1]=K>>>8&255,P.check=l(P.check,V,2,0),Z=K=0,P.mode=2;break}if(P.flags=0,P.head&&(P.head.done=!1),!(1&P.wrap)||(((255&K)<<8)+(K>>8))%31){M.msg="incorrect header check",P.mode=30;break}if((15&K)!=8){M.msg="unknown compression method",P.mode=30;break}if(Z-=4,ee=8+(15&(K>>>=4)),P.wbits===0)P.wbits=ee;else if(ee>P.wbits){M.msg="invalid window size",P.mode=30;break}P.dmax=1<<ee,M.adler=P.check=1,P.mode=512&K?10:12,Z=K=0;break;case 2:for(;Z<16;){if(Q===0)break e;Q--,K+=H[X++]<<Z,Z+=8}if(P.flags=K,(255&P.flags)!=8){M.msg="unknown compression method",P.mode=30;break}if(57344&P.flags){M.msg="unknown header flags set",P.mode=30;break}P.head&&(P.head.text=K>>8&1),512&P.flags&&(V[0]=255&K,V[1]=K>>>8&255,P.check=l(P.check,V,2,0)),Z=K=0,P.mode=3;case 3:for(;Z<32;){if(Q===0)break e;Q--,K+=H[X++]<<Z,Z+=8}P.head&&(P.head.time=K),512&P.flags&&(V[0]=255&K,V[1]=K>>>8&255,V[2]=K>>>16&255,V[3]=K>>>24&255,P.check=l(P.check,V,4,0)),Z=K=0,P.mode=4;case 4:for(;Z<16;){if(Q===0)break e;Q--,K+=H[X++]<<Z,Z+=8}P.head&&(P.head.xflags=255&K,P.head.os=K>>8),512&P.flags&&(V[0]=255&K,V[1]=K>>>8&255,P.check=l(P.check,V,2,0)),Z=K=0,P.mode=5;case 5:if(1024&P.flags){for(;Z<16;){if(Q===0)break e;Q--,K+=H[X++]<<Z,Z+=8}P.length=K,P.head&&(P.head.extra_len=K),512&P.flags&&(V[0]=255&K,V[1]=K>>>8&255,P.check=l(P.check,V,2,0)),Z=K=0}else P.head&&(P.head.extra=null);P.mode=6;case 6:if(1024&P.flags&&(Q<(Se=P.length)&&(Se=Q),Se&&(P.head&&(ee=P.head.extra_len-P.length,P.head.extra||(P.head.extra=new Array(P.head.extra_len)),o.arraySet(P.head.extra,H,X,Se,ee)),512&P.flags&&(P.check=l(P.check,H,Se,X)),Q-=Se,X+=Se,P.length-=Se),P.length))break e;P.length=0,P.mode=7;case 7:if(2048&P.flags){if(Q===0)break e;for(Se=0;ee=H[X+Se++],P.head&&ee&&P.length<65536&&(P.head.name+=String.fromCharCode(ee)),ee&&Se<Q;);if(512&P.flags&&(P.check=l(P.check,H,Se,X)),Q-=Se,X+=Se,ee)break e}else P.head&&(P.head.name=null);P.length=0,P.mode=8;case 8:if(4096&P.flags){if(Q===0)break e;for(Se=0;ee=H[X+Se++],P.head&&ee&&P.length<65536&&(P.head.comment+=String.fromCharCode(ee)),ee&&Se<Q;);if(512&P.flags&&(P.check=l(P.check,H,Se,X)),Q-=Se,X+=Se,ee)break e}else P.head&&(P.head.comment=null);P.mode=9;case 9:if(512&P.flags){for(;Z<16;){if(Q===0)break e;Q--,K+=H[X++]<<Z,Z+=8}if(K!==(65535&P.check)){M.msg="header crc mismatch",P.mode=30;break}Z=K=0}P.head&&(P.head.hcrc=P.flags>>9&1,P.head.done=!0),M.adler=P.check=0,P.mode=12;break;case 10:for(;Z<32;){if(Q===0)break e;Q--,K+=H[X++]<<Z,Z+=8}M.adler=P.check=C(K),Z=K=0,P.mode=11;case 11:if(P.havedict===0)return M.next_out=se,M.avail_out=xe,M.next_in=X,M.avail_in=Q,P.hold=K,P.bits=Z,2;M.adler=P.check=1,P.mode=12;case 12:if(q===5||q===6)break e;case 13:if(P.last){K>>>=7&Z,Z-=7&Z,P.mode=27;break}for(;Z<3;){if(Q===0)break e;Q--,K+=H[X++]<<Z,Z+=8}switch(P.last=1&K,Z-=1,3&(K>>>=1)){case 0:P.mode=14;break;case 1:if(z(P),P.mode=20,q!==6)break;K>>>=2,Z-=2;break e;case 2:P.mode=17;break;case 3:M.msg="invalid block type",P.mode=30}K>>>=2,Z-=2;break;case 14:for(K>>>=7&Z,Z-=7&Z;Z<32;){if(Q===0)break e;Q--,K+=H[X++]<<Z,Z+=8}if((65535&K)!=(K>>>16^65535)){M.msg="invalid stored block lengths",P.mode=30;break}if(P.length=65535&K,Z=K=0,P.mode=15,q===6)break e;case 15:P.mode=16;case 16:if(Se=P.length){if(Q<Se&&(Se=Q),xe<Se&&(Se=xe),Se===0)break e;o.arraySet(D,H,X,Se,se),Q-=Se,X+=Se,xe-=Se,se+=Se,P.length-=Se;break}P.mode=12;break;case 17:for(;Z<14;){if(Q===0)break e;Q--,K+=H[X++]<<Z,Z+=8}if(P.nlen=257+(31&K),K>>>=5,Z-=5,P.ndist=1+(31&K),K>>>=5,Z-=5,P.ncode=4+(15&K),K>>>=4,Z-=4,286<P.nlen||30<P.ndist){M.msg="too many length or distance symbols",P.mode=30;break}P.have=0,P.mode=18;case 18:for(;P.have<P.ncode;){for(;Z<3;){if(Q===0)break e;Q--,K+=H[X++]<<Z,Z+=8}P.lens[re[P.have++]]=7&K,K>>>=3,Z-=3}for(;P.have<19;)P.lens[re[P.have++]]=0;if(P.lencode=P.lendyn,P.lenbits=7,Oe={bits:P.lenbits},ue=d(0,P.lens,0,19,P.lencode,0,P.work,Oe),P.lenbits=Oe.bits,ue){M.msg="invalid code lengths set",P.mode=30;break}P.have=0,P.mode=19;case 19:for(;P.have<P.nlen+P.ndist;){for(;Ae=(I=P.lencode[K&(1<<P.lenbits)-1])>>>16&255,ze=65535&I,!((we=I>>>24)<=Z);){if(Q===0)break e;Q--,K+=H[X++]<<Z,Z+=8}if(ze<16)K>>>=we,Z-=we,P.lens[P.have++]=ze;else{if(ze===16){for(J=we+2;Z<J;){if(Q===0)break e;Q--,K+=H[X++]<<Z,Z+=8}if(K>>>=we,Z-=we,P.have===0){M.msg="invalid bit length repeat",P.mode=30;break}ee=P.lens[P.have-1],Se=3+(3&K),K>>>=2,Z-=2}else if(ze===17){for(J=we+3;Z<J;){if(Q===0)break e;Q--,K+=H[X++]<<Z,Z+=8}Z-=we,ee=0,Se=3+(7&(K>>>=we)),K>>>=3,Z-=3}else{for(J=we+7;Z<J;){if(Q===0)break e;Q--,K+=H[X++]<<Z,Z+=8}Z-=we,ee=0,Se=11+(127&(K>>>=we)),K>>>=7,Z-=7}if(P.have+Se>P.nlen+P.ndist){M.msg="invalid bit length repeat",P.mode=30;break}for(;Se--;)P.lens[P.have++]=ee}}if(P.mode===30)break;if(P.lens[256]===0){M.msg="invalid code -- missing end-of-block",P.mode=30;break}if(P.lenbits=9,Oe={bits:P.lenbits},ue=d(p,P.lens,0,P.nlen,P.lencode,0,P.work,Oe),P.lenbits=Oe.bits,ue){M.msg="invalid literal/lengths set",P.mode=30;break}if(P.distbits=6,P.distcode=P.distdyn,Oe={bits:P.distbits},ue=d(h,P.lens,P.nlen,P.ndist,P.distcode,0,P.work,Oe),P.distbits=Oe.bits,ue){M.msg="invalid distances set",P.mode=30;break}if(P.mode=20,q===6)break e;case 20:P.mode=21;case 21:if(6<=Q&&258<=xe){M.next_out=se,M.avail_out=xe,M.next_in=X,M.avail_in=Q,P.hold=K,P.bits=Z,c(M,ae),se=M.next_out,D=M.output,xe=M.avail_out,X=M.next_in,H=M.input,Q=M.avail_in,K=P.hold,Z=P.bits,P.mode===12&&(P.back=-1);break}for(P.back=0;Ae=(I=P.lencode[K&(1<<P.lenbits)-1])>>>16&255,ze=65535&I,!((we=I>>>24)<=Z);){if(Q===0)break e;Q--,K+=H[X++]<<Z,Z+=8}if(Ae&&(240&Ae)==0){for(Ge=we,Ue=Ae,ht=ze;Ae=(I=P.lencode[ht+((K&(1<<Ge+Ue)-1)>>Ge)])>>>16&255,ze=65535&I,!(Ge+(we=I>>>24)<=Z);){if(Q===0)break e;Q--,K+=H[X++]<<Z,Z+=8}K>>>=Ge,Z-=Ge,P.back+=Ge}if(K>>>=we,Z-=we,P.back+=we,P.length=ze,Ae===0){P.mode=26;break}if(32&Ae){P.back=-1,P.mode=12;break}if(64&Ae){M.msg="invalid literal/length code",P.mode=30;break}P.extra=15&Ae,P.mode=22;case 22:if(P.extra){for(J=P.extra;Z<J;){if(Q===0)break e;Q--,K+=H[X++]<<Z,Z+=8}P.length+=K&(1<<P.extra)-1,K>>>=P.extra,Z-=P.extra,P.back+=P.extra}P.was=P.length,P.mode=23;case 23:for(;Ae=(I=P.distcode[K&(1<<P.distbits)-1])>>>16&255,ze=65535&I,!((we=I>>>24)<=Z);){if(Q===0)break e;Q--,K+=H[X++]<<Z,Z+=8}if((240&Ae)==0){for(Ge=we,Ue=Ae,ht=ze;Ae=(I=P.distcode[ht+((K&(1<<Ge+Ue)-1)>>Ge)])>>>16&255,ze=65535&I,!(Ge+(we=I>>>24)<=Z);){if(Q===0)break e;Q--,K+=H[X++]<<Z,Z+=8}K>>>=Ge,Z-=Ge,P.back+=Ge}if(K>>>=we,Z-=we,P.back+=we,64&Ae){M.msg="invalid distance code",P.mode=30;break}P.offset=ze,P.extra=15&Ae,P.mode=24;case 24:if(P.extra){for(J=P.extra;Z<J;){if(Q===0)break e;Q--,K+=H[X++]<<Z,Z+=8}P.offset+=K&(1<<P.extra)-1,K>>>=P.extra,Z-=P.extra,P.back+=P.extra}if(P.offset>P.dmax){M.msg="invalid distance too far back",P.mode=30;break}P.mode=25;case 25:if(xe===0)break e;if(Se=ae-xe,P.offset>Se){if((Se=P.offset-Se)>P.whave&&P.sane){M.msg="invalid distance too far back",P.mode=30;break}Pe=Se>P.wnext?(Se-=P.wnext,P.wsize-Se):P.wnext-Se,Se>P.length&&(Se=P.length),$e=P.window}else $e=D,Pe=se-P.offset,Se=P.length;for(xe<Se&&(Se=xe),xe-=Se,P.length-=Se;D[se++]=$e[Pe++],--Se;);P.length===0&&(P.mode=21);break;case 26:if(xe===0)break e;D[se++]=P.length,xe--,P.mode=21;break;case 27:if(P.wrap){for(;Z<32;){if(Q===0)break e;Q--,K|=H[X++]<<Z,Z+=8}if(ae-=xe,M.total_out+=ae,P.total+=ae,ae&&(M.adler=P.check=P.flags?l(P.check,D,ae,se-ae):i(P.check,D,ae,se-ae)),ae=xe,(P.flags?K:C(K))!==P.check){M.msg="incorrect data check",P.mode=30;break}Z=K=0}P.mode=28;case 28:if(P.wrap&&P.flags){for(;Z<32;){if(Q===0)break e;Q--,K+=H[X++]<<Z,Z+=8}if(K!==(4294967295&P.total)){M.msg="incorrect length check",P.mode=30;break}Z=K=0}P.mode=29;case 29:ue=1;break e;case 30:ue=-3;break e;case 31:return-4;default:return y}return M.next_out=se,M.avail_out=xe,M.next_in=X,M.avail_in=Q,P.hold=K,P.bits=Z,(P.wsize||ae!==M.avail_out&&P.mode<30&&(P.mode<27||q!==4))&&Y(M,M.output,M.next_out,ae-M.avail_out)?(P.mode=31,-4):(ve-=M.avail_in,ae-=M.avail_out,M.total_in+=ve,M.total_out+=ae,P.total+=ae,P.wrap&&ae&&(M.adler=P.check=P.flags?l(P.check,D,ae,M.next_out-ae):i(P.check,D,ae,M.next_out-ae)),M.data_type=P.bits+(P.last?64:0)+(P.mode===12?128:0)+(P.mode===20||P.mode===15?256:0),(ve==0&&ae===0||q===4)&&ue===g&&(ue=-5),ue)},a.inflateEnd=function(M){if(!M||!M.state)return y;var q=M.state;return q.window&&(q.window=null),M.state=null,g},a.inflateGetHeader=function(M,q){var P;return M&&M.state?(2&(P=M.state).wrap)==0?y:((P.head=q).done=!1,g):y},a.inflateSetDictionary=function(M,q){var P,H=q.length;return M&&M.state?(P=M.state).wrap!==0&&P.mode!==11?y:P.mode===11&&i(1,q,H,0)!==P.check?-3:Y(M,q,H,H)?(P.mode=31,-4):(P.havedict=1,g):y},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,a){var o=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(p,h,g,y,b,v,w,C){var k,N,O,R,L,B,G,$,z,Y=C.bits,M=0,q=0,P=0,H=0,D=0,X=0,se=0,Q=0,xe=0,K=0,Z=null,ve=0,ae=new o.Buf16(16),Se=new o.Buf16(16),Pe=null,$e=0;for(M=0;M<=15;M++)ae[M]=0;for(q=0;q<y;q++)ae[h[g+q]]++;for(D=Y,H=15;1<=H&&ae[H]===0;H--);if(H<D&&(D=H),H===0)return b[v++]=20971520,b[v++]=20971520,C.bits=1,0;for(P=1;P<H&&ae[P]===0;P++);for(D<P&&(D=P),M=Q=1;M<=15;M++)if(Q<<=1,(Q-=ae[M])<0)return-1;if(0<Q&&(p===0||H!==1))return-1;for(Se[1]=0,M=1;M<15;M++)Se[M+1]=Se[M]+ae[M];for(q=0;q<y;q++)h[g+q]!==0&&(w[Se[h[g+q]]++]=q);if(B=p===0?(Z=Pe=w,19):p===1?(Z=i,ve-=257,Pe=l,$e-=257,256):(Z=c,Pe=d,-1),M=P,L=v,se=q=K=0,O=-1,R=(xe=1<<(X=D))-1,p===1&&852<xe||p===2&&592<xe)return 1;for(;;){for(G=M-se,z=w[q]<B?($=0,w[q]):w[q]>B?($=Pe[$e+w[q]],Z[ve+w[q]]):($=96,0),k=1<<M-se,P=N=1<<X;b[L+(K>>se)+(N-=k)]=G<<24|$<<16|z|0,N!==0;);for(k=1<<M-1;K&k;)k>>=1;if(k!==0?(K&=k-1,K+=k):K=0,q++,--ae[M]==0){if(M===H)break;M=h[g+w[q]]}if(D<M&&(K&R)!==O){for(se===0&&(se=D),L+=P,Q=1<<(X=M-se);X+se<H&&!((Q-=ae[X+se])<=0);)X++,Q<<=1;if(xe+=1<<X,p===1&&852<xe||p===2&&592<xe)return 1;b[O=K&R]=D<<24|X<<16|L-v|0}}return K!==0&&(b[L+K]=M-se<<24|64<<16|0),C.bits=D,0}},{"../utils/common":41}],51:[function(e,t,a){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,a){var o=e("../utils/common"),i=0,l=1;function c(I){for(var V=I.length;0<=--V;)I[V]=0}var d=0,p=29,h=256,g=h+1+p,y=30,b=19,v=2*g+1,w=15,C=16,k=7,N=256,O=16,R=17,L=18,B=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],G=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],$=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Y=new Array(2*(g+2));c(Y);var M=new Array(2*y);c(M);var q=new Array(512);c(q);var P=new Array(256);c(P);var H=new Array(p);c(H);var D,X,se,Q=new Array(y);function xe(I,V,re,pe,ge){this.static_tree=I,this.extra_bits=V,this.extra_base=re,this.elems=pe,this.max_length=ge,this.has_stree=I&&I.length}function K(I,V){this.dyn_tree=I,this.max_code=0,this.stat_desc=V}function Z(I){return I<256?q[I]:q[256+(I>>>7)]}function ve(I,V){I.pending_buf[I.pending++]=255&V,I.pending_buf[I.pending++]=V>>>8&255}function ae(I,V,re){I.bi_valid>C-re?(I.bi_buf|=V<<I.bi_valid&65535,ve(I,I.bi_buf),I.bi_buf=V>>C-I.bi_valid,I.bi_valid+=re-C):(I.bi_buf|=V<<I.bi_valid&65535,I.bi_valid+=re)}function Se(I,V,re){ae(I,re[2*V],re[2*V+1])}function Pe(I,V){for(var re=0;re|=1&I,I>>>=1,re<<=1,0<--V;);return re>>>1}function $e(I,V,re){var pe,ge,Ce=new Array(w+1),he=0;for(pe=1;pe<=w;pe++)Ce[pe]=he=he+re[pe-1]<<1;for(ge=0;ge<=V;ge++){var ie=I[2*ge+1];ie!==0&&(I[2*ge]=Pe(Ce[ie]++,ie))}}function we(I){var V;for(V=0;V<g;V++)I.dyn_ltree[2*V]=0;for(V=0;V<y;V++)I.dyn_dtree[2*V]=0;for(V=0;V<b;V++)I.bl_tree[2*V]=0;I.dyn_ltree[2*N]=1,I.opt_len=I.static_len=0,I.last_lit=I.matches=0}function Ae(I){8<I.bi_valid?ve(I,I.bi_buf):0<I.bi_valid&&(I.pending_buf[I.pending++]=I.bi_buf),I.bi_buf=0,I.bi_valid=0}function ze(I,V,re,pe){var ge=2*V,Ce=2*re;return I[ge]<I[Ce]||I[ge]===I[Ce]&&pe[V]<=pe[re]}function Ge(I,V,re){for(var pe=I.heap[re],ge=re<<1;ge<=I.heap_len&&(ge<I.heap_len&&ze(V,I.heap[ge+1],I.heap[ge],I.depth)&&ge++,!ze(V,pe,I.heap[ge],I.depth));)I.heap[re]=I.heap[ge],re=ge,ge<<=1;I.heap[re]=pe}function Ue(I,V,re){var pe,ge,Ce,he,ie=0;if(I.last_lit!==0)for(;pe=I.pending_buf[I.d_buf+2*ie]<<8|I.pending_buf[I.d_buf+2*ie+1],ge=I.pending_buf[I.l_buf+ie],ie++,pe===0?Se(I,ge,V):(Se(I,(Ce=P[ge])+h+1,V),(he=B[Ce])!==0&&ae(I,ge-=H[Ce],he),Se(I,Ce=Z(--pe),re),(he=G[Ce])!==0&&ae(I,pe-=Q[Ce],he)),ie<I.last_lit;);Se(I,N,V)}function ht(I,V){var re,pe,ge,Ce=V.dyn_tree,he=V.stat_desc.static_tree,ie=V.stat_desc.has_stree,Fe=V.stat_desc.elems,We=-1;for(I.heap_len=0,I.heap_max=v,re=0;re<Fe;re++)Ce[2*re]!==0?(I.heap[++I.heap_len]=We=re,I.depth[re]=0):Ce[2*re+1]=0;for(;I.heap_len<2;)Ce[2*(ge=I.heap[++I.heap_len]=We<2?++We:0)]=1,I.depth[ge]=0,I.opt_len--,ie&&(I.static_len-=he[2*ge+1]);for(V.max_code=We,re=I.heap_len>>1;1<=re;re--)Ge(I,Ce,re);for(ge=Fe;re=I.heap[1],I.heap[1]=I.heap[I.heap_len--],Ge(I,Ce,1),pe=I.heap[1],I.heap[--I.heap_max]=re,I.heap[--I.heap_max]=pe,Ce[2*ge]=Ce[2*re]+Ce[2*pe],I.depth[ge]=(I.depth[re]>=I.depth[pe]?I.depth[re]:I.depth[pe])+1,Ce[2*re+1]=Ce[2*pe+1]=ge,I.heap[1]=ge++,Ge(I,Ce,1),2<=I.heap_len;);I.heap[--I.heap_max]=I.heap[1],(function(Qe,de){var Ee,le,Ye,De,ct,ot,dt=de.dyn_tree,Ke=de.max_code,kt=de.stat_desc.static_tree,At=de.stat_desc.has_stree,xt=de.stat_desc.extra_bits,Xt=de.stat_desc.extra_base,br=de.stat_desc.max_length,zt=0;for(De=0;De<=w;De++)Qe.bl_count[De]=0;for(dt[2*Qe.heap[Qe.heap_max]+1]=0,Ee=Qe.heap_max+1;Ee<v;Ee++)br<(De=dt[2*dt[2*(le=Qe.heap[Ee])+1]+1]+1)&&(De=br,zt++),dt[2*le+1]=De,Ke<le||(Qe.bl_count[De]++,ct=0,Xt<=le&&(ct=xt[le-Xt]),ot=dt[2*le],Qe.opt_len+=ot*(De+ct),At&&(Qe.static_len+=ot*(kt[2*le+1]+ct)));if(zt!==0){do{for(De=br-1;Qe.bl_count[De]===0;)De--;Qe.bl_count[De]--,Qe.bl_count[De+1]+=2,Qe.bl_count[br]--,zt-=2}while(0<zt);for(De=br;De!==0;De--)for(le=Qe.bl_count[De];le!==0;)Ke<(Ye=Qe.heap[--Ee])||(dt[2*Ye+1]!==De&&(Qe.opt_len+=(De-dt[2*Ye+1])*dt[2*Ye],dt[2*Ye+1]=De),le--)}})(I,V),$e(Ce,We,I.bl_count)}function ee(I,V,re){var pe,ge,Ce=-1,he=V[1],ie=0,Fe=7,We=4;for(he===0&&(Fe=138,We=3),V[2*(re+1)+1]=65535,pe=0;pe<=re;pe++)ge=he,he=V[2*(pe+1)+1],++ie<Fe&&ge===he||(ie<We?I.bl_tree[2*ge]+=ie:ge!==0?(ge!==Ce&&I.bl_tree[2*ge]++,I.bl_tree[2*O]++):ie<=10?I.bl_tree[2*R]++:I.bl_tree[2*L]++,Ce=ge,We=(ie=0)===he?(Fe=138,3):ge===he?(Fe=6,3):(Fe=7,4))}function ue(I,V,re){var pe,ge,Ce=-1,he=V[1],ie=0,Fe=7,We=4;for(he===0&&(Fe=138,We=3),pe=0;pe<=re;pe++)if(ge=he,he=V[2*(pe+1)+1],!(++ie<Fe&&ge===he)){if(ie<We)for(;Se(I,ge,I.bl_tree),--ie!=0;);else ge!==0?(ge!==Ce&&(Se(I,ge,I.bl_tree),ie--),Se(I,O,I.bl_tree),ae(I,ie-3,2)):ie<=10?(Se(I,R,I.bl_tree),ae(I,ie-3,3)):(Se(I,L,I.bl_tree),ae(I,ie-11,7));Ce=ge,We=(ie=0)===he?(Fe=138,3):ge===he?(Fe=6,3):(Fe=7,4)}}c(Q);var Oe=!1;function J(I,V,re,pe){ae(I,(d<<1)+(pe?1:0),3),(function(ge,Ce,he,ie){Ae(ge),ve(ge,he),ve(ge,~he),o.arraySet(ge.pending_buf,ge.window,Ce,he,ge.pending),ge.pending+=he})(I,V,re)}a._tr_init=function(I){Oe||((function(){var V,re,pe,ge,Ce,he=new Array(w+1);for(ge=pe=0;ge<p-1;ge++)for(H[ge]=pe,V=0;V<1<<B[ge];V++)P[pe++]=ge;for(P[pe-1]=ge,ge=Ce=0;ge<16;ge++)for(Q[ge]=Ce,V=0;V<1<<G[ge];V++)q[Ce++]=ge;for(Ce>>=7;ge<y;ge++)for(Q[ge]=Ce<<7,V=0;V<1<<G[ge]-7;V++)q[256+Ce++]=ge;for(re=0;re<=w;re++)he[re]=0;for(V=0;V<=143;)Y[2*V+1]=8,V++,he[8]++;for(;V<=255;)Y[2*V+1]=9,V++,he[9]++;for(;V<=279;)Y[2*V+1]=7,V++,he[7]++;for(;V<=287;)Y[2*V+1]=8,V++,he[8]++;for($e(Y,g+1,he),V=0;V<y;V++)M[2*V+1]=5,M[2*V]=Pe(V,5);D=new xe(Y,B,h+1,g,w),X=new xe(M,G,0,y,w),se=new xe(new Array(0),$,0,b,k)})(),Oe=!0),I.l_desc=new K(I.dyn_ltree,D),I.d_desc=new K(I.dyn_dtree,X),I.bl_desc=new K(I.bl_tree,se),I.bi_buf=0,I.bi_valid=0,we(I)},a._tr_stored_block=J,a._tr_flush_block=function(I,V,re,pe){var ge,Ce,he=0;0<I.level?(I.strm.data_type===2&&(I.strm.data_type=(function(ie){var Fe,We=4093624447;for(Fe=0;Fe<=31;Fe++,We>>>=1)if(1&We&&ie.dyn_ltree[2*Fe]!==0)return i;if(ie.dyn_ltree[18]!==0||ie.dyn_ltree[20]!==0||ie.dyn_ltree[26]!==0)return l;for(Fe=32;Fe<h;Fe++)if(ie.dyn_ltree[2*Fe]!==0)return l;return i})(I)),ht(I,I.l_desc),ht(I,I.d_desc),he=(function(ie){var Fe;for(ee(ie,ie.dyn_ltree,ie.l_desc.max_code),ee(ie,ie.dyn_dtree,ie.d_desc.max_code),ht(ie,ie.bl_desc),Fe=b-1;3<=Fe&&ie.bl_tree[2*z[Fe]+1]===0;Fe--);return ie.opt_len+=3*(Fe+1)+5+5+4,Fe})(I),ge=I.opt_len+3+7>>>3,(Ce=I.static_len+3+7>>>3)<=ge&&(ge=Ce)):ge=Ce=re+5,re+4<=ge&&V!==-1?J(I,V,re,pe):I.strategy===4||Ce===ge?(ae(I,2+(pe?1:0),3),Ue(I,Y,M)):(ae(I,4+(pe?1:0),3),(function(ie,Fe,We,Qe){var de;for(ae(ie,Fe-257,5),ae(ie,We-1,5),ae(ie,Qe-4,4),de=0;de<Qe;de++)ae(ie,ie.bl_tree[2*z[de]+1],3);ue(ie,ie.dyn_ltree,Fe-1),ue(ie,ie.dyn_dtree,We-1)})(I,I.l_desc.max_code+1,I.d_desc.max_code+1,he+1),Ue(I,I.dyn_ltree,I.dyn_dtree)),we(I),pe&&Ae(I)},a._tr_tally=function(I,V,re){return I.pending_buf[I.d_buf+2*I.last_lit]=V>>>8&255,I.pending_buf[I.d_buf+2*I.last_lit+1]=255&V,I.pending_buf[I.l_buf+I.last_lit]=255&re,I.last_lit++,V===0?I.dyn_ltree[2*re]++:(I.matches++,V--,I.dyn_ltree[2*(P[re]+h+1)]++,I.dyn_dtree[2*Z(V)]++),I.last_lit===I.lit_bufsize-1},a._tr_align=function(I){ae(I,2,3),Se(I,N,Y),(function(V){V.bi_valid===16?(ve(V,V.bi_buf),V.bi_buf=0,V.bi_valid=0):8<=V.bi_valid&&(V.pending_buf[V.pending++]=255&V.bi_buf,V.bi_buf>>=8,V.bi_valid-=8)})(I)}},{"../utils/common":41}],53:[function(e,t,a){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,a){(function(o){(function(i,l){if(!i.setImmediate){var c,d,p,h,g=1,y={},b=!1,v=i.document,w=Object.getPrototypeOf&&Object.getPrototypeOf(i);w=w&&w.setTimeout?w:i,c={}.toString.call(i.process)==="[object process]"?function(O){process.nextTick(function(){k(O)})}:(function(){if(i.postMessage&&!i.importScripts){var O=!0,R=i.onmessage;return i.onmessage=function(){O=!1},i.postMessage("","*"),i.onmessage=R,O}})()?(h="setImmediate$"+Math.random()+"$",i.addEventListener?i.addEventListener("message",N,!1):i.attachEvent("onmessage",N),function(O){i.postMessage(h+O,"*")}):i.MessageChannel?((p=new MessageChannel).port1.onmessage=function(O){k(O.data)},function(O){p.port2.postMessage(O)}):v&&"onreadystatechange"in v.createElement("script")?(d=v.documentElement,function(O){var R=v.createElement("script");R.onreadystatechange=function(){k(O),R.onreadystatechange=null,d.removeChild(R),R=null},d.appendChild(R)}):function(O){setTimeout(k,0,O)},w.setImmediate=function(O){typeof O!="function"&&(O=new Function(""+O));for(var R=new Array(arguments.length-1),L=0;L<R.length;L++)R[L]=arguments[L+1];var B={callback:O,args:R};return y[g]=B,c(g),g++},w.clearImmediate=C}function C(O){delete y[O]}function k(O){if(b)setTimeout(k,0,O);else{var R=y[O];if(R){b=!0;try{(function(L){var B=L.callback,G=L.args;switch(G.length){case 0:B();break;case 1:B(G[0]);break;case 2:B(G[0],G[1]);break;case 3:B(G[0],G[1],G[2]);break;default:B.apply(l,G)}})(R)}finally{C(O),b=!1}}}}function N(O){O.source===i&&typeof O.data=="string"&&O.data.indexOf(h)===0&&k(+O.data.slice(h.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,typeof X0<"u"?X0:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Z1)),Z1.exports}var UU=$U();const hE=Bw(UU),QP=u.createContext(void 0),VU=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async()=>{a(!0),i(null);try{const{data:b}=await nt.get("/custom-themes");if(b.success){const v=(b.data||[]).filter(w=>{const C=/^[0-9a-fA-F]{24}$/.test(w._id);return C||console.warn(`Theme "${w.name}" has invalid ID format: ${w._id}. Skipping.`),C});e(v)}else e([])}catch(b){i(b?.response?.data?.message||"Failed to fetch custom themes"),e([])}finally{a(!1)}},[]),c=u.useCallback(async(b,v,w,C)=>{a(!0),i(null);try{const k=new hE;k.file("index.html",v),w&&k.file("style.css",w),(async B=>{const G=[],$=/<img[^>]+src=["']([^"']+)["']/gi,z=/srcset=["']([^"']+)["']/gi,Y=/background-image\s*:\s*url\(["']?([^"')]+)["']?\)/gi;let M;for(;(M=$.exec(B))!==null;){const D=M[1];D&&!D.startsWith("http")&&!D.startsWith("data:")&&!D.startsWith("#")&&!D.startsWith("mailto:")&&G.push(D)}for(;(M=z.exec(B))!==null;)M[1].split(",").forEach(X=>{const se=X.trim().split(/\s+/)[0];se&&!se.startsWith("http")&&!se.startsWith("data:")&&!se.startsWith("#")&&G.push(se)});for(;(M=Y.exec(B))!==null;){const D=M[1];D&&!D.startsWith("http")&&!D.startsWith("data:")&&!D.startsWith("#")&&G.push(D)}const q=[...new Set(G.map(D=>D.startsWith("/")?D.substring(1):D))],P="https://backend.ziplofy.com/api",H=()=>{const D={},X=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken")||localStorage.getItem("token")||sessionStorage.getItem("token");return X&&(D.Authorization=`Bearer ${X}`),D};for(const D of q)try{console.log(" Image reference found:",D)}catch(X){console.warn("Failed to fetch image:",D,X)}})(v).catch(B=>{console.warn("Error extracting images:",B)});const O=await k.generateAsync({type:"blob"}),R=new FormData;R.append("name",b),R.append("zipFile",O,`${b.replace(/[^a-zA-Z0-9]/g,"_")}.zip`),C&&R.append("thumbnail",C,"thumbnail.png");const{data:L}=await nt.post("/custom-themes",R,{headers:{"Content-Type":"multipart/form-data"},timeout:6e5,maxContentLength:1/0,maxBodyLength:1/0,onUploadProgress:B=>{if(B.total){const G=Math.round(B.loaded*100/B.total);console.log(`Upload progress: ${G}%`)}}});return L.success?(await l(),gr.success("Theme created successfully!"),L.data):(gr.error("Failed to create theme."),null)}catch(k){let N="Failed to create custom theme";return k?.code==="ECONNABORTED"||k?.message?.includes("timeout")?N="Upload timeout: The theme is very large. Please try again or reduce the theme size.":k?.response?.status===413||k?.message?.includes("File too large")||k?.message?.includes("MulterError")?N="Theme too large: The theme exceeds the maximum size limit (500MB). Please reduce the theme size.":k?.response?.data?.message?N=k.response.data.message:k?.message&&(N=k.message),i(N),gr.error(N),null}finally{a(!1)}},[l]),d=u.useCallback(async(b,v,w,C,k)=>{a(!0),i(null);try{const N=new hE;N.file("index.html",w),C&&N.file("style.css",C);const O=await N.generateAsync({type:"blob"}),R=new FormData;R.append("name",v),R.append("zipFile",O,`${v.replace(/[^a-zA-Z0-9]/g,"_")}.zip`),k&&R.append("thumbnail",k,"thumbnail.png");const{data:L}=await nt.put(`/custom-themes/${b}`,R,{headers:{"Content-Type":"multipart/form-data"},timeout:6e5,maxContentLength:1/0,maxBodyLength:1/0,onUploadProgress:B=>{if(B.total){const G=Math.round(B.loaded*100/B.total);console.log(`Upload progress: ${G}%`)}}});return L.success?(await l(),gr.success("Theme updated successfully!"),L.data):(gr.error("Failed to update theme."),null)}catch(N){if(N?.response?.status===404)return console.warn("Theme not found (404) - updateTheme returning null for fallback handling"),i(null),null;let O="Failed to update custom theme";return N?.code==="ECONNABORTED"||N?.message?.includes("timeout")?O="Upload timeout: The theme is very large. Please try again or reduce the theme size.":N?.response?.status===413||N?.message?.includes("File too large")||N?.message?.includes("MulterError")?O="Theme too large: The theme exceeds the maximum size limit (500MB). Please reduce the theme size.":N?.response?.data?.message?O=N.response.data.message:N?.message&&(O=N.message),i(O),gr.error(O),null}finally{a(!1)}},[l]),p=u.useCallback(async b=>{a(!0),i(null);try{const{data:v}=await nt.delete(`/custom-themes/${b}`);return v.success?(await l(),!0):!1}catch(v){return i(v?.response?.data?.message||"Failed to delete custom theme"),!1}finally{a(!1)}},[l]),h=u.useCallback(async(b,v)=>{a(!0),i(null);try{const C=(()=>{try{const N=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken")||localStorage.getItem("token")||sessionStorage.getItem("token");if(!N)return null;const O=N.split(".");if(O.length<2)return null;const R=JSON.parse(atob(O[1].replace(/-/g,"+").replace(/_/g,"/")));return String(R.uid||R.userId||R.id||"")}catch{return null}})();if(!C)throw new Error("User authentication required");const{data:k}=await nt.post("/custom-themes/install",{customThemeId:b,userId:C,storeId:v});if(k.success){const N=`custom-${b}`;return localStorage.setItem("ziplofy.appliedCustomThemeId",N),localStorage.setItem("ziplofy.appliedCustomThemeStoreId",v),await new Promise(O=>setTimeout(O,500)),!0}return gr.error("Failed to install custom theme."),!1}catch(w){const C=w?.response?.data?.message||"Failed to install custom theme";return i(C),gr.error(C),!1}finally{a(!1)}},[]),g=u.useCallback(async(b,v)=>{a(!0),i(null);try{const C=(()=>{try{const N=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken")||localStorage.getItem("token")||sessionStorage.getItem("token");if(!N)return null;const O=N.split(".");if(O.length<2)return null;const R=JSON.parse(atob(O[1].replace(/-/g,"+").replace(/_/g,"/")));return String(R.uid||R.userId||R.id||"")}catch{return null}})();if(!C)throw new Error("User authentication required");const{data:k}=await nt.post("/custom-themes/uninstall",{customThemeId:b,userId:C,storeId:v});return k.success?(localStorage.removeItem("ziplofy.appliedCustomThemeId"),localStorage.removeItem("ziplofy.appliedCustomThemeStoreId"),!0):(gr.error("Failed to uninstall custom theme."),!1)}catch(w){const C=w?.response?.data?.message||"Failed to uninstall custom theme";return i(C),gr.error(C),!1}finally{a(!1)}},[]),y=u.useMemo(()=>({customThemes:r,loading:t,error:o,fetchAll:l,createTheme:c,updateTheme:d,deleteTheme:p,installTheme:h,uninstallTheme:g}),[r,t,o,l,c,d,p,h,g]);return n.jsx(QP.Provider,{value:y,children:s})};function F2(){const s=u.useContext(QP);if(!s)throw new Error("useCustomThemes must be used within CustomThemesProvider");return s}var HU={4729:((s,r,e)=>{var t,a,o;(function(i){a=[e(5706),e(4193)],t=i,o=typeof t=="function"?t.apply(r,a):t,o!==void 0&&(s.exports=o)})(function(i,l){var c=Array.prototype.slice;function d($,z,Y){return Y.length<=4?$.call(z,Y[0],Y[1],Y[2],Y[3]):$.apply(z,Y)}function p($,z){return c.call($,z)}function h($,z){return $==null?!1:(i.isArray(z)||(z=p(arguments,1)),i.all(z,function(Y){return Y in $}))}var g=(function(){var $=!1,z=-1;function Y(){z++,$=!0,i.defer(function(){$=!1})}return function(){return $||Y(),z}})();function y(){this.registeredObjects=[],this.cidIndexes=[]}y.prototype={isRegistered:function($){return $&&$.cid?this.registeredObjects[$.cid]:i.contains(this.registeredObjects,$)},register:function($){return this.isRegistered($)?!1:($&&$.cid?(this.registeredObjects[$.cid]=$,this.cidIndexes.push($.cid)):this.registeredObjects.push($),!0)},unregister:function($){if(this.isRegistered($)){if($&&$.cid)delete this.registeredObjects[$.cid],this.cidIndexes.splice(i.indexOf(this.cidIndexes,$.cid),1);else{var z=i.indexOf(this.registeredObjects,$);this.registeredObjects.splice(z,1)}return!0}return!1},get:function(){return i.map(this.cidIndexes,function($){return this.registeredObjects[$]},this).concat(this.registeredObjects)}};function b($,z,Y,M){for(var q=0,P=z.length,H;q<P;q++)if(H=z[q],!!H){if($==="on"){if(!M.objectRegistry.register(H))continue}else if(!M.objectRegistry.unregister(H))continue;i.isFunction(H[$])&&H[$]("all",Y,M)}}function v($,z){var Y=z.type,M=z.undoTypes,q=!M[Y]||M[Y][$];i.isFunction(q)&&q(z.object,z.before,z.after,z.options)}function w($,z,Y,M,q){if(!(Y.isCurrentlyUndoRedoing||$==="undo"&&Y.pointer===-1||$==="redo"&&Y.pointer===Y.length-1)){Y.isCurrentlyUndoRedoing=!0;var P,H,D=$==="undo";for(q?H=D&&Y.pointer===Y.length-1||!D&&Y.pointer===-1?i.clone(Y.models):c.apply(Y.models,D?[0,Y.pointer]:[Y.pointer,Y.length-1]):(P=Y.at(D?Y.pointer:Y.pointer+1),H=M?Y.where({magicFusionIndex:P.get("magicFusionIndex")}):[P]),Y.pointer+=(D?-1:1)*H.length;P=D?H.pop():H.shift();)P[$]();Y.isCurrentlyUndoRedoing=!1,z.trigger($,z)}}function C($,z){var Y=$.condition,M=typeof Y;return M==="function"?!!d(Y,$,z):M==="boolean"?Y:!0}function k($,z,Y,M){if($.track&&!$.isCurrentlyUndoRedoing&&z in M&&C(M[z],Y)){var q=d(M[z].on,M[z],Y),P;if(h(q,"object","before","after")){if(q.type=z,q.magicFusionIndex=g(),q.undoTypes=M,$.pointer<$.length-1)for(var P=$.length-$.pointer-1;P--;)$.pop();$.pointer=$.length,$.add(q),$.length>$.maximumStackLength&&($.shift(),$.pointer--)}}}var N={add:{undo:function($,z,Y,M){$.remove(Y,M)},redo:function($,z,Y,M){M.index&&(M.at=M.index),$.add(Y,M)},on:function($,z,Y){return{object:z,before:void 0,after:$,options:i.clone(Y)}}},remove:{undo:function($,z,Y,M){"index"in M&&(M.at=M.index),$.add(z,M)},redo:function($,z,Y,M){$.remove(z,M)},on:function($,z,Y){return{object:z,before:$,after:void 0,options:i.clone(Y)}}},change:{undo:function($,z,Y,M){i.isEmpty(z)?i.each(i.keys(Y),$.unset,$):($.set(z),M&&M.unsetData&&M.unsetData.before&&M.unsetData.before.length&&i.each(M.unsetData.before,$.unset,$))},redo:function($,z,Y,M){i.isEmpty(Y)?i.each(i.keys(z),$.unset,$):($.set(Y),M&&M.unsetData&&M.unsetData.after&&M.unsetData.after.length&&i.each(M.unsetData.after,$.unset,$))},on:function($,z){var Y=$.changedAttributes(),M=i.keys(Y),q=i.pick($.previousAttributes(),M),P=i.keys(q),H=(z||(z={})).unsetData={after:[],before:[]};return M.length!=P.length&&(M.length>P.length?i.each(M,function(D){D in q||H.before.push(D)},this):i.each(P,function(D){D in Y||H.after.push(D)})),{object:$,before:q,after:Y,options:i.clone(z)}}},reset:{undo:function($,z,Y){$.reset(z)},redo:function($,z,Y){$.reset(Y)},on:function($,z){return{object:$,before:z.previousModels,after:i.clone($.models)}}}};function O(){}O.prototype=N;function R($,z,Y,M){if(typeof z=="object")return i.each(z,function(q,P){$===2?R($,q,Y,M):R($,P,q,Y)});switch($){case 0:h(Y,"undo","redo","on")&&i.all(i.pick(Y,"undo","redo","on"),i.isFunction)&&(M[z]=Y);break;case 1:M[z]&&i.isObject(Y)&&(M[z]=i.extend({},M[z],Y));break;case 2:delete M[z];break}return this}var L=l.Model.extend({defaults:{type:null,object:null,before:null,after:null,magicFusionIndex:null},undo:function($){v("undo",this.attributes)},redo:function($){v("redo",this.attributes)}}),B=l.Collection.extend({model:L,pointer:-1,track:!1,isCurrentlyUndoRedoing:!1,maximumStackLength:1/0,setMaxLength:function($){this.maximumStackLength=$}}),G=l.Model.extend({defaults:{maximumStackLength:1/0,track:!1},initialize:function($){this.stack=new B,this.objectRegistry=new y,this.undoTypes=new O,this.stack.setMaxLength(this.get("maximumStackLength")),this.on("change:maximumStackLength",function(z,Y){this.stack.setMaxLength(Y)},this),$&&$.track&&this.startTracking(),$&&$.register&&(i.isArray($.register)||i.isArguments($.register)?d(this.register,this,$.register):this.register($.register))},startTracking:function(){this.set("track",!0),this.stack.track=!0},stopTracking:function(){this.set("track",!1),this.stack.track=!1},isTracking:function(){return this.get("track")},_addToStack:function($){k(this.stack,$,p(arguments,1),this.undoTypes)},register:function(){b("on",arguments,this._addToStack,this)},unregister:function(){b("off",arguments,this._addToStack,this)},unregisterAll:function(){d(this.unregister,this,this.objectRegistry.get())},undo:function($){w("undo",this,this.stack,$)},undoAll:function(){w("undo",this,this.stack,!1,!0)},redo:function($){w("redo",this,this.stack,$)},redoAll:function(){w("redo",this,this.stack,!1,!0)},isAvailable:function($){var z=this.stack,Y=z.length;switch($){case"undo":return Y>0&&z.pointer>-1;case"redo":return Y>0&&z.pointer<Y-1;default:return!1}},merge:function($){for(var z=i.isArray($)?$:p(arguments),Y;Y=z.pop();)Y instanceof G&&Y.stack instanceof B&&(Y.stack=this.stack)},addUndoType:function($,z){R(0,$,z,this.undoTypes)},changeUndoType:function($,z){R(1,$,z,this.undoTypes)},removeUndoType:function($){R(2,$,void 0,this.undoTypes)},clear:function(){this.stack.reset(),this.stack.pointer=-1}});return i.extend(G,{defaults:function($){i.extend(G.prototype.defaults,$)},addUndoType:function($,z){R(0,$,z,N)},changeUndoType:function($,z){R(1,$,z,N)},removeUndoType:function($){R(2,$,void 0,N)}}),l.UndoManager=G})}),4193:((s,r,e)=>{var t,a;(function(o){var i=typeof self=="object"&&self.self===self&&self||typeof e.g=="object"&&e.g.global===e.g&&e.g;t=[e(5706),e(7774),r],a=(function(l,c,d){i.Backbone=o(i,d,l,c)}).apply(r,t),a!==void 0&&(s.exports=a)})(function(o,i,l,c){var d=o.Backbone,p=Array.prototype.slice;i.VERSION="1.4.1",i.$=c,i.noConflict=function(){return o.Backbone=d,this},i.emulateHTTP=!1,i.emulateJSON=!1;var h=i.Events={},g=/\s+/,y,b=function(I,V,re,pe,ge){var Ce=0,he;if(re&&typeof re=="object")for(pe!==void 0&&("context"in ge)&&ge.context===void 0&&(ge.context=pe),he=l.keys(re);Ce<he.length;Ce++)V=b(I,V,he[Ce],re[he[Ce]],ge);else if(re&&g.test(re))for(he=re.split(g);Ce<he.length;Ce++)V=I(V,he[Ce],pe,ge);else V=I(V,re,pe,ge);return V};h.on=function(I,V,re){if(this._events=b(v,this._events||{},I,V,{context:re,ctx:this,listening:y}),y){var pe=this._listeners||(this._listeners={});pe[y.id]=y,y.interop=!1}return this},h.listenTo=function(I,V,re){if(!I)return this;var pe=I._listenId||(I._listenId=l.uniqueId("l")),ge=this._listeningTo||(this._listeningTo={}),Ce=y=ge[pe];Ce||(this._listenId||(this._listenId=l.uniqueId("l")),Ce=y=ge[pe]=new R(this,I));var he=w(I,V,re,this);if(y=void 0,he)throw he;return Ce.interop&&Ce.on(V,re),this};var v=function(I,V,re,pe){if(re){var ge=I[V]||(I[V]=[]),Ce=pe.context,he=pe.ctx,ie=pe.listening;ie&&ie.count++,ge.push({callback:re,context:Ce,ctx:Ce||he,listening:ie})}return I},w=function(I,V,re,pe){try{I.on(V,re,pe)}catch(ge){return ge}};h.off=function(I,V,re){return this._events?(this._events=b(C,this._events,I,V,{context:re,listeners:this._listeners}),this):this},h.stopListening=function(I,V,re){var pe=this._listeningTo;if(!pe)return this;for(var ge=I?[I._listenId]:l.keys(pe),Ce=0;Ce<ge.length;Ce++){var he=pe[ge[Ce]];if(!he)break;he.obj.off(V,re,this),he.interop&&he.off(V,re)}return l.isEmpty(pe)&&(this._listeningTo=void 0),this};var C=function(I,V,re,pe){if(I){var ge=pe.context,Ce=pe.listeners,he=0,ie;if(!V&&!ge&&!re){for(ie=l.keys(Ce);he<ie.length;he++)Ce[ie[he]].cleanup();return}for(ie=V?[V]:l.keys(I);he<ie.length;he++){V=ie[he];var Fe=I[V];if(!Fe)break;for(var We=[],Qe=0;Qe<Fe.length;Qe++){var de=Fe[Qe];if(re&&re!==de.callback&&re!==de.callback._callback||ge&&ge!==de.context)We.push(de);else{var Ee=de.listening;Ee&&Ee.off(V,re)}}We.length?I[V]=We:delete I[V]}return I}};h.once=function(I,V,re){var pe=b(k,{},I,V,this.off.bind(this));return typeof I=="string"&&re==null&&(V=void 0),this.on(pe,V,re)},h.listenToOnce=function(I,V,re){var pe=b(k,{},V,re,this.stopListening.bind(this,I));return this.listenTo(I,pe)};var k=function(I,V,re,pe){if(re){var ge=I[V]=l.once(function(){pe(V,ge),re.apply(this,arguments)});ge._callback=re}return I};h.trigger=function(I){if(!this._events)return this;for(var V=Math.max(0,arguments.length-1),re=Array(V),pe=0;pe<V;pe++)re[pe]=arguments[pe+1];return b(N,this._events,I,void 0,re),this};var N=function(I,V,re,pe){if(I){var ge=I[V],Ce=I.all;ge&&Ce&&(Ce=Ce.slice()),ge&&O(ge,pe),Ce&&O(Ce,[V].concat(pe))}return I},O=function(I,V){var re,pe=-1,ge=I.length,Ce=V[0],he=V[1],ie=V[2];switch(V.length){case 0:for(;++pe<ge;)(re=I[pe]).callback.call(re.ctx);return;case 1:for(;++pe<ge;)(re=I[pe]).callback.call(re.ctx,Ce);return;case 2:for(;++pe<ge;)(re=I[pe]).callback.call(re.ctx,Ce,he);return;case 3:for(;++pe<ge;)(re=I[pe]).callback.call(re.ctx,Ce,he,ie);return;default:for(;++pe<ge;)(re=I[pe]).callback.apply(re.ctx,V);return}},R=function(I,V){this.id=I._listenId,this.listener=I,this.obj=V,this.interop=!0,this.count=0,this._events=void 0};R.prototype.on=h.on,R.prototype.off=function(I,V){var re;this.interop?(this._events=b(C,this._events,I,V,{context:void 0,listeners:void 0}),re=!this._events):(this.count--,re=this.count===0),re&&this.cleanup()},R.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},h.bind=h.on,h.unbind=h.off,l.extend(i,h);var L=i.Model=function(I,V){var re=I||{};V||(V={}),this.preinitialize.apply(this,arguments),this.cid=l.uniqueId(this.cidPrefix),this.attributes={},V.collection&&(this.collection=V.collection),V.parse&&(re=this.parse(re,V)||{});var pe=l.result(this,"defaults");re=l.defaults(l.extend({},pe,re),pe),this.set(re,V),this.changed={},this.initialize.apply(this,arguments)};l.extend(L.prototype,h,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(I){return l.clone(this.attributes)},sync:function(){return i.sync.apply(this,arguments)},get:function(I){return this.attributes[I]},escape:function(I){return l.escape(this.get(I))},has:function(I){return this.get(I)!=null},matches:function(I){return!!l.iteratee(I,this)(this.attributes)},set:function(I,V,re){if(I==null)return this;var pe;if(typeof I=="object"?(pe=I,re=V):(pe={})[I]=V,re||(re={}),!this._validate(pe,re))return!1;var ge=re.unset,Ce=re.silent,he=[],ie=this._changing;this._changing=!0,ie||(this._previousAttributes=l.clone(this.attributes),this.changed={});var Fe=this.attributes,We=this.changed,Qe=this._previousAttributes;for(var de in pe)V=pe[de],l.isEqual(Fe[de],V)||he.push(de),l.isEqual(Qe[de],V)?delete We[de]:We[de]=V,ge?delete Fe[de]:Fe[de]=V;if(this.idAttribute in pe){var Ee=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,Ee,re)}if(!Ce){he.length&&(this._pending=re);for(var le=0;le<he.length;le++)this.trigger("change:"+he[le],this,Fe[he[le]],re)}if(ie)return this;if(!Ce)for(;this._pending;)re=this._pending,this._pending=!1,this.trigger("change",this,re);return this._pending=!1,this._changing=!1,this},unset:function(I,V){return this.set(I,void 0,l.extend({},V,{unset:!0}))},clear:function(I){var V={};for(var re in this.attributes)V[re]=void 0;return this.set(V,l.extend({},I,{unset:!0}))},hasChanged:function(I){return I==null?!l.isEmpty(this.changed):l.has(this.changed,I)},changedAttributes:function(I){if(!I)return this.hasChanged()?l.clone(this.changed):!1;var V=this._changing?this._previousAttributes:this.attributes,re={},pe;for(var ge in I){var Ce=I[ge];l.isEqual(V[ge],Ce)||(re[ge]=Ce,pe=!0)}return pe?re:!1},previous:function(I){return I==null||!this._previousAttributes?null:this._previousAttributes[I]},previousAttributes:function(){return l.clone(this._previousAttributes)},fetch:function(I){I=l.extend({parse:!0},I);var V=this,re=I.success;return I.success=function(pe){var ge=I.parse?V.parse(pe,I):pe;if(!V.set(ge,I))return!1;re&&re.call(I.context,V,pe,I),V.trigger("sync",V,pe,I)},J(this,I),this.sync("read",this,I)},save:function(I,V,re){var pe;I==null||typeof I=="object"?(pe=I,re=V):(pe={})[I]=V,re=l.extend({validate:!0,parse:!0},re);var ge=re.wait;if(pe&&!ge){if(!this.set(pe,re))return!1}else if(!this._validate(pe,re))return!1;var Ce=this,he=re.success,ie=this.attributes;re.success=function(Qe){Ce.attributes=ie;var de=re.parse?Ce.parse(Qe,re):Qe;if(ge&&(de=l.extend({},pe,de)),de&&!Ce.set(de,re))return!1;he&&he.call(re.context,Ce,Qe,re),Ce.trigger("sync",Ce,Qe,re)},J(this,re),pe&&ge&&(this.attributes=l.extend({},ie,pe));var Fe=this.isNew()?"create":re.patch?"patch":"update";Fe==="patch"&&!re.attrs&&(re.attrs=pe);var We=this.sync(Fe,this,re);return this.attributes=ie,We},destroy:function(I){I=I?l.clone(I):{};var V=this,re=I.success,pe=I.wait,ge=function(){V.stopListening(),V.trigger("destroy",V,V.collection,I)};I.success=function(he){pe&&ge(),re&&re.call(I.context,V,he,I),V.isNew()||V.trigger("sync",V,he,I)};var Ce=!1;return this.isNew()?l.defer(I.success):(J(this,I),Ce=this.sync("delete",this,I)),pe||ge(),Ce},url:function(){var I=l.result(this,"urlRoot")||l.result(this.collection,"url")||Oe();if(this.isNew())return I;var V=this.get(this.idAttribute);return I.replace(/[^\/]$/,"$&/")+encodeURIComponent(V)},parse:function(I,V){return I},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(I){return this._validate({},l.extend({},I,{validate:!0}))},_validate:function(I,V){if(!V.validate||!this.validate)return!0;I=l.extend({},this.attributes,I);var re=this.validationError=this.validate(I,V)||null;return re?(this.trigger("invalid",this,re,l.extend(V,{validationError:re})),!1):!0}});var B=i.Collection=function(I,V){V||(V={}),this.preinitialize.apply(this,arguments),V.model&&(this.model=V.model),V.comparator!==void 0&&(this.comparator=V.comparator),this._reset(),this.initialize.apply(this,arguments),I&&this.reset(I,l.extend({silent:!0},V))},G={add:!0,remove:!0,merge:!0},$={add:!0,remove:!1},z=function(I,V,re){re=Math.min(Math.max(re,0),I.length);var pe=Array(I.length-re),ge=V.length,Ce;for(Ce=0;Ce<pe.length;Ce++)pe[Ce]=I[Ce+re];for(Ce=0;Ce<ge;Ce++)I[Ce+re]=V[Ce];for(Ce=0;Ce<pe.length;Ce++)I[Ce+ge+re]=pe[Ce]};l.extend(B.prototype,h,{model:L,preinitialize:function(){},initialize:function(){},toJSON:function(I){return this.map(function(V){return V.toJSON(I)})},sync:function(){return i.sync.apply(this,arguments)},add:function(I,V){return this.set(I,l.extend({merge:!1},V,$))},remove:function(I,V){V=l.extend({},V);var re=!l.isArray(I);I=re?[I]:I.slice();var pe=this._removeModels(I,V);return!V.silent&&pe.length&&(V.changes={added:[],merged:[],removed:pe},this.trigger("update",this,V)),re?pe[0]:pe},set:function(I,V){if(I!=null){V=l.extend({},G,V),V.parse&&!this._isModel(I)&&(I=this.parse(I,V)||[]);var re=!l.isArray(I);I=re?[I]:I.slice();var pe=V.at;pe!=null&&(pe=+pe),pe>this.length&&(pe=this.length),pe<0&&(pe+=this.length+1);var ge=[],Ce=[],he=[],ie=[],Fe={},We=V.add,Qe=V.merge,de=V.remove,Ee=!1,le=this.comparator&&pe==null&&V.sort!==!1,Ye=l.isString(this.comparator)?this.comparator:null,De,ct;for(ct=0;ct<I.length;ct++){De=I[ct];var ot=this.get(De);if(ot){if(Qe&&De!==ot){var dt=this._isModel(De)?De.attributes:De;V.parse&&(dt=ot.parse(dt,V)),ot.set(dt,V),he.push(ot),le&&!Ee&&(Ee=ot.hasChanged(Ye))}Fe[ot.cid]||(Fe[ot.cid]=!0,ge.push(ot)),I[ct]=ot}else We&&(De=I[ct]=this._prepareModel(De,V),De&&(Ce.push(De),this._addReference(De,V),Fe[De.cid]=!0,ge.push(De)))}if(de){for(ct=0;ct<this.length;ct++)De=this.models[ct],Fe[De.cid]||ie.push(De);ie.length&&this._removeModels(ie,V)}var Ke=!1,kt=!le&&We&&de;if(ge.length&&kt?(Ke=this.length!==ge.length||l.some(this.models,function(At,xt){return At!==ge[xt]}),this.models.length=0,z(this.models,ge,0),this.length=this.models.length):Ce.length&&(le&&(Ee=!0),z(this.models,Ce,pe??this.length),this.length=this.models.length),Ee&&this.sort({silent:!0}),!V.silent){for(ct=0;ct<Ce.length;ct++)pe!=null&&(V.index=pe+ct),De=Ce[ct],De.trigger("add",De,this,V);(Ee||Ke)&&this.trigger("sort",this,V),(Ce.length||ie.length||he.length)&&(V.changes={added:Ce,removed:ie,merged:he},this.trigger("update",this,V))}return re?I[0]:I}},reset:function(I,V){V=V?l.clone(V):{};for(var re=0;re<this.models.length;re++)this._removeReference(this.models[re],V);return V.previousModels=this.models,this._reset(),I=this.add(I,l.extend({silent:!0},V)),V.silent||this.trigger("reset",this,V),I},push:function(I,V){return this.add(I,l.extend({at:this.length},V))},pop:function(I){var V=this.at(this.length-1);return this.remove(V,I)},unshift:function(I,V){return this.add(I,l.extend({at:0},V))},shift:function(I){var V=this.at(0);return this.remove(V,I)},slice:function(){return p.apply(this.models,arguments)},get:function(I){if(I!=null)return this._byId[I]||this._byId[this.modelId(this._isModel(I)?I.attributes:I,I.idAttribute)]||I.cid&&this._byId[I.cid]},has:function(I){return this.get(I)!=null},at:function(I){return I<0&&(I+=this.length),this.models[I]},where:function(I,V){return this[V?"find":"filter"](I)},findWhere:function(I){return this.where(I,!0)},sort:function(I){var V=this.comparator;if(!V)throw new Error("Cannot sort a set without a comparator");I||(I={});var re=V.length;return l.isFunction(V)&&(V=V.bind(this)),re===1||l.isString(V)?this.models=this.sortBy(V):this.models.sort(V),I.silent||this.trigger("sort",this,I),this},pluck:function(I){return this.map(I+"")},fetch:function(I){I=l.extend({parse:!0},I);var V=I.success,re=this;return I.success=function(pe){var ge=I.reset?"reset":"set";re[ge](pe,I),V&&V.call(I.context,re,pe,I),re.trigger("sync",re,pe,I)},J(this,I),this.sync("read",this,I)},create:function(I,V){V=V?l.clone(V):{};var re=V.wait;if(I=this._prepareModel(I,V),!I)return!1;re||this.add(I,V);var pe=this,ge=V.success;return V.success=function(Ce,he,ie){re&&pe.add(Ce,ie),ge&&ge.call(ie.context,Ce,he,ie)},I.save(null,V),I},parse:function(I,V){return I},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(I,V){return I[V||this.model.prototype.idAttribute||"id"]},values:function(){return new M(this,q)},keys:function(){return new M(this,P)},entries:function(){return new M(this,H)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(I,V){if(this._isModel(I))return I.collection||(I.collection=this),I;V=V?l.clone(V):{},V.collection=this;var re;return this.model.prototype?re=new this.model(I,V):re=this.model(I,V),re.validationError?(this.trigger("invalid",this,re.validationError,V),!1):re},_removeModels:function(I,V){for(var re=[],pe=0;pe<I.length;pe++){var ge=this.get(I[pe]);if(ge){var Ce=this.indexOf(ge);this.models.splice(Ce,1),this.length--,delete this._byId[ge.cid];var he=this.modelId(ge.attributes,ge.idAttribute);he!=null&&delete this._byId[he],V.silent||(V.index=Ce,ge.trigger("remove",ge,this,V)),re.push(ge),this._removeReference(ge,V)}}return re},_isModel:function(I){return I instanceof L},_addReference:function(I,V){this._byId[I.cid]=I;var re=this.modelId(I.attributes,I.idAttribute);re!=null&&(this._byId[re]=I),I.on("all",this._onModelEvent,this)},_removeReference:function(I,V){delete this._byId[I.cid];var re=this.modelId(I.attributes,I.idAttribute);re!=null&&delete this._byId[re],this===I.collection&&delete I.collection,I.off("all",this._onModelEvent,this)},_onModelEvent:function(I,V,re,pe){if(V){if((I==="add"||I==="remove")&&re!==this)return;if(I==="destroy"&&this.remove(V,pe),I==="changeId"){var ge=this.modelId(V.previousAttributes(),V.idAttribute),Ce=this.modelId(V.attributes,V.idAttribute);ge!=null&&delete this._byId[ge],Ce!=null&&(this._byId[Ce]=V)}}this.trigger.apply(this,arguments)}});var Y=typeof Symbol=="function"&&Symbol.iterator;Y&&(B.prototype[Y]=B.prototype.values);var M=function(I,V){this._collection=I,this._kind=V,this._index=0},q=1,P=2,H=3;Y&&(M.prototype[Y]=function(){return this}),M.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var I=this._collection.at(this._index);this._index++;var V;if(this._kind===q)V=I;else{var re=this._collection.modelId(I.attributes,I.idAttribute);this._kind===P?V=re:V=[re,I]}return{value:V,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var D=i.View=function(I){this.cid=l.uniqueId("view"),this.preinitialize.apply(this,arguments),l.extend(this,l.pick(I,se)),this._ensureElement(),this.initialize.apply(this,arguments)},X=/^(\S+)\s*(.*)$/,se=["model","collection","el","id","attributes","className","tagName","events"];l.extend(D.prototype,h,{tagName:"div",$:function(I){return this.$el.find(I)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(I){return this.undelegateEvents(),this._setElement(I),this.delegateEvents(),this},_setElement:function(I){this.$el=I instanceof i.$?I:i.$(I),this.el=this.$el[0]},delegateEvents:function(I){if(I||(I=l.result(this,"events")),!I)return this;this.undelegateEvents();for(var V in I){var re=I[V];if(l.isFunction(re)||(re=this[re]),!!re){var pe=V.match(X);this.delegate(pe[1],pe[2],re.bind(this))}}return this},delegate:function(I,V,re){return this.$el.on(I+".delegateEvents"+this.cid,V,re),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(I,V,re){return this.$el.off(I+".delegateEvents"+this.cid,V,re),this},_createElement:function(I){return document.createElement(I)},_ensureElement:function(){if(this.el)this.setElement(l.result(this,"el"));else{var I=l.extend({},l.result(this,"attributes"));this.id&&(I.id=l.result(this,"id")),this.className&&(I.class=l.result(this,"className")),this.setElement(this._createElement(l.result(this,"tagName"))),this._setAttributes(I)}},_setAttributes:function(I){this.$el.attr(I)}});var Q=function(I,V,re,pe){switch(V){case 1:return function(){return I[re](this[pe])};case 2:return function(ge){return I[re](this[pe],ge)};case 3:return function(ge,Ce){return I[re](this[pe],K(ge,this),Ce)};case 4:return function(ge,Ce,he){return I[re](this[pe],K(ge,this),Ce,he)};default:return function(){var ge=p.call(arguments);return ge.unshift(this[pe]),I[re].apply(I,ge)}}},xe=function(I,V,re,pe){l.each(re,function(ge,Ce){V[Ce]&&(I.prototype[Ce]=Q(V,ge,Ce,pe))})},K=function(I,V){return l.isFunction(I)?I:l.isObject(I)&&!V._isModel(I)?Z(I):l.isString(I)?function(re){return re.get(I)}:I},Z=function(I){var V=l.matches(I);return function(re){return V(re.attributes)}},ve={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},ae={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};l.each([[B,ve,"models"],[L,ae,"attributes"]],function(I){var V=I[0],re=I[1],pe=I[2];V.mixin=function(ge){var Ce=l.reduce(l.functions(ge),function(he,ie){return he[ie]=0,he},{});xe(V,ge,Ce,pe)},xe(V,l,re,pe)}),i.sync=function(I,V,re){var pe=Se[I];l.defaults(re||(re={}),{emulateHTTP:i.emulateHTTP,emulateJSON:i.emulateJSON});var ge={type:pe,dataType:"json"};if(re.url||(ge.url=l.result(V,"url")||Oe()),re.data==null&&V&&(I==="create"||I==="update"||I==="patch")&&(ge.contentType="application/json",ge.data=JSON.stringify(re.attrs||V.toJSON(re))),re.emulateJSON&&(ge.contentType="application/x-www-form-urlencoded",ge.data=ge.data?{model:ge.data}:{}),re.emulateHTTP&&(pe==="PUT"||pe==="DELETE"||pe==="PATCH")){ge.type="POST",re.emulateJSON&&(ge.data._method=pe);var Ce=re.beforeSend;re.beforeSend=function(Fe){if(Fe.setRequestHeader("X-HTTP-Method-Override",pe),Ce)return Ce.apply(this,arguments)}}ge.type!=="GET"&&!re.emulateJSON&&(ge.processData=!1);var he=re.error;re.error=function(Fe,We,Qe){re.textStatus=We,re.errorThrown=Qe,he&&he.call(re.context,Fe,We,Qe)};var ie=re.xhr=i.ajax(l.extend(ge,re));return V.trigger("request",V,ie,re),ie};var Se={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};i.ajax=function(){return i.$.ajax.apply(i.$,arguments)};var Pe=i.Router=function(I){I||(I={}),this.preinitialize.apply(this,arguments),I.routes&&(this.routes=I.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},$e=/\((.*?)\)/g,we=/(\(\?)?:\w+/g,Ae=/\*\w+/g,ze=/[\-{}\[\]+?.,\\\^$|#\s]/g;l.extend(Pe.prototype,h,{preinitialize:function(){},initialize:function(){},route:function(I,V,re){l.isRegExp(I)||(I=this._routeToRegExp(I)),l.isFunction(V)&&(re=V,V=""),re||(re=this[V]);var pe=this;return i.history.route(I,function(ge){var Ce=pe._extractParameters(I,ge);pe.execute(re,Ce,V)!==!1&&(pe.trigger.apply(pe,["route:"+V].concat(Ce)),pe.trigger("route",V,Ce),i.history.trigger("route",pe,V,Ce))}),this},execute:function(I,V,re){I&&I.apply(this,V)},navigate:function(I,V){return i.history.navigate(I,V),this},_bindRoutes:function(){if(this.routes){this.routes=l.result(this,"routes");for(var I,V=l.keys(this.routes);(I=V.pop())!=null;)this.route(I,this.routes[I])}},_routeToRegExp:function(I){return I=I.replace(ze,"\\$&").replace($e,"(?:$1)?").replace(we,function(V,re){return re?V:"([^/?]+)"}).replace(Ae,"([^?]*?)"),new RegExp("^"+I+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(I,V){var re=I.exec(V).slice(1);return l.map(re,function(pe,ge){return ge===re.length-1?pe||null:pe?decodeURIComponent(pe):null})}});var Ge=i.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},Ue=/^[#\/]|\s+$/g,ht=/^\/+|\/+$/g,ee=/#.*$/;Ge.started=!1,l.extend(Ge.prototype,h,{interval:50,atRoot:function(){var I=this.location.pathname.replace(/[^\/]$/,"$&/");return I===this.root&&!this.getSearch()},matchRoot:function(){var I=this.decodeFragment(this.location.pathname),V=I.slice(0,this.root.length-1)+"/";return V===this.root},decodeFragment:function(I){return decodeURI(I.replace(/%25/g,"%2525"))},getSearch:function(){var I=this.location.href.replace(/#.*/,"").match(/\?.+/);return I?I[0]:""},getHash:function(I){var V=(I||this).location.href.match(/#(.*)$/);return V?V[1]:""},getPath:function(){var I=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return I.charAt(0)==="/"?I.slice(1):I},getFragment:function(I){return I==null&&(this._usePushState||!this._wantsHashChange?I=this.getPath():I=this.getHash()),I.replace(Ue,"")},start:function(I){if(Ge.started)throw new Error("Backbone.history has already been started");if(Ge.started=!0,this.options=l.extend({root:"/"},this.options,I),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.history&&this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(ht,"/"),this._wantsHashChange&&this._wantsPushState)if(!this._hasPushState&&!this.atRoot()){var V=this.root.slice(0,-1)||"/";return this.location.replace(V+"#"+this.getPath()),!0}else this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0});if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var re=document.body,pe=re.insertBefore(this.iframe,re.firstChild).contentWindow;pe.document.open(),pe.document.close(),pe.location.hash="#"+this.fragment}var ge=window.addEventListener||function(Ce,he){return attachEvent("on"+Ce,he)};if(this._usePushState?ge("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?ge("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var I=window.removeEventListener||function(V,re){return detachEvent("on"+V,re)};this._usePushState?I("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&I("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),Ge.started=!1},route:function(I,V){this.handlers.unshift({route:I,callback:V})},checkUrl:function(I){var V=this.getFragment();if(V===this.fragment&&this.iframe&&(V=this.getHash(this.iframe.contentWindow)),V===this.fragment)return!1;this.iframe&&this.navigate(V),this.loadUrl()},loadUrl:function(I){return this.matchRoot()?(I=this.fragment=this.getFragment(I),l.some(this.handlers,function(V){if(V.route.test(I))return V.callback(I),!0})):!1},navigate:function(I,V){if(!Ge.started)return!1;(!V||V===!0)&&(V={trigger:!!V}),I=this.getFragment(I||"");var re=this.root;(I===""||I.charAt(0)==="?")&&(re=re.slice(0,-1)||"/");var pe=re+I;I=I.replace(ee,"");var ge=this.decodeFragment(I);if(this.fragment!==ge){if(this.fragment=ge,this._usePushState)this.history[V.replace?"replaceState":"pushState"]({},document.title,pe);else if(this._wantsHashChange){if(this._updateHash(this.location,I,V.replace),this.iframe&&I!==this.getHash(this.iframe.contentWindow)){var Ce=this.iframe.contentWindow;V.replace||(Ce.document.open(),Ce.document.close()),this._updateHash(Ce.location,I,V.replace)}}else return this.location.assign(pe);if(V.trigger)return this.loadUrl(I)}},_updateHash:function(I,V,re){if(re){var pe=I.href.replace(/(javascript:|#).*$/,"");I.replace(pe+"#"+V)}else I.hash="#"+V}}),i.history=new Ge;var ue=function(I,V){var re=this,pe;return I&&l.has(I,"constructor")?pe=I.constructor:pe=function(){return re.apply(this,arguments)},l.extend(pe,re,V),pe.prototype=l.create(re.prototype,I),pe.prototype.constructor=pe,pe.__super__=re.prototype,pe};L.extend=B.extend=Pe.extend=D.extend=Ge.extend=ue;var Oe=function(){throw new Error('A "url" property or function must be specified')},J=function(I,V){var re=V.error;V.error=function(pe){re&&re.call(V.context,I,pe,V),I.trigger("error",I,pe,V)}};return i})}),3640:((s,r,e)=>{(function(t){t(e(4408))})(function(t){t.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(o,i){return/^[;{}]$/.test(i)}}),t.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(o,i,l,c){return this.jsonMode?/^[\[,{]$/.test(i)||/^}/.test(l):i==";"&&c.lexical&&c.lexical.type==")"?!1:/^[;{}]$/.test(i)&&!/^;/.test(l)}});var a=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;t.extendMode("xml",{commentStart:"<!--",commentEnd:"-->",newlineAfterToken:function(o,i,l,c){var d=!1;return this.configuration=="html"&&(d=c.context?a.test(c.context.tagName):!1),!d&&(o=="tag"&&/>$/.test(i)&&c.context||/^</.test(l))}}),t.defineExtension("commentRange",function(o,i,l){var c=this,d=t.innerMode(c.getMode(),c.getTokenAt(i).state).mode;c.operation(function(){if(o)c.replaceRange(d.commentEnd,l),c.replaceRange(d.commentStart,i),i.line==l.line&&i.ch==l.ch&&c.setCursor(i.line,i.ch+d.commentStart.length);else{var p=c.getRange(i,l),h=p.indexOf(d.commentStart),g=p.lastIndexOf(d.commentEnd);h>-1&&g>-1&&g>h&&(p=p.substr(0,h)+p.substring(h+d.commentStart.length,g)+p.substr(g+d.commentEnd.length)),c.replaceRange(p,i,l)}})}),t.defineExtension("autoIndentRange",function(o,i){var l=this;this.operation(function(){for(var c=o.line;c<=i.line;c++)l.indentLine(c,"smart")})}),t.defineExtension("autoFormatRange",function(o,i){var l=this,c=l.getMode(),d=l.getRange(o,i).split(`
`),p=t.copyState(c,l.getTokenAt(o).state),h=l.getOption("tabSize"),g="",y=0,b=o.ch===0;function v(){g+=`
`,b=!0,++y}for(var w=0;w<d.length;++w){for(var C=new t.StringStream(d[w],h);!C.eol();){var k=t.innerMode(c,p),N=c.token(C,p),O=C.current();C.start=C.pos,(!b||/\S/.test(O))&&(g+=O,b=!1),!b&&k.mode.newlineAfterToken&&k.mode.newlineAfterToken(N,O,C.string.slice(C.pos)||d[w+1]||"",k.state)&&v()}!C.pos&&c.blankLine&&c.blankLine(p),!b&&w<d.length-1&&v()}l.operation(function(){l.replaceRange(g,o,i);for(var R=o.line+1,L=o.line+y;R<=L;++R)l.indentLine(R,"smart");l.setSelection(o,l.getCursor(!1))})})})}),4408:(function(s){(function(r,e){s.exports=e()})(this,(function(){var r=navigator.userAgent,e=navigator.platform,t=/gecko\/\d/i.test(r),a=/MSIE \d/.test(r),o=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(r),i=/Edge\/(\d+)/.exec(r),l=a||o||i,c=l&&(a?document.documentMode||6:+(i||o)[1]),d=!i&&/WebKit\//.test(r),p=d&&/Qt\/\d+\.\d+/.test(r),h=!i&&/Chrome\//.test(r),g=/Opera\//.test(r),y=/Apple Computer/.test(navigator.vendor),b=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(r),v=/PhantomJS/.test(r),w=y&&(/Mobile\/\w+/.test(r)||navigator.maxTouchPoints>2),C=/Android/.test(r),k=w||C||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(r),N=w||/Mac/.test(e),O=/\bCrOS\b/.test(r),R=/win/i.test(e),L=g&&r.match(/Version\/(\d*\.\d*)/);L&&(L=Number(L[1])),L&&L>=15&&(g=!1,d=!0);var B=N&&(p||g&&(L==null||L<12.11)),G=t||l&&c>=9;function $(m){return new RegExp("(^|\\s)"+m+"(?:$|\\s)\\s*")}var z=function(m,j){var E=m.className,_=$(j).exec(E);if(_){var A=E.slice(_.index+_[0].length);m.className=E.slice(0,_.index)+(A?_[1]+A:"")}};function Y(m){for(var j=m.childNodes.length;j>0;--j)m.removeChild(m.firstChild);return m}function M(m,j){return Y(m).appendChild(j)}function q(m,j,E,_){var A=document.createElement(m);if(E&&(A.className=E),_&&(A.style.cssText=_),typeof j=="string")A.appendChild(document.createTextNode(j));else if(j)for(var U=0;U<j.length;++U)A.appendChild(j[U]);return A}function P(m,j,E,_){var A=q(m,j,E,_);return A.setAttribute("role","presentation"),A}var H;document.createRange?H=function(m,j,E,_){var A=document.createRange();return A.setEnd(_||m,E),A.setStart(m,j),A}:H=function(m,j,E){var _=document.body.createTextRange();try{_.moveToElementText(m.parentNode)}catch{return _}return _.collapse(!0),_.moveEnd("character",E),_.moveStart("character",j),_};function D(m,j){if(j.nodeType==3&&(j=j.parentNode),m.contains)return m.contains(j);do if(j.nodeType==11&&(j=j.host),j==m)return!0;while(j=j.parentNode)}function X(){var m;try{m=document.activeElement}catch{m=document.body||null}for(;m&&m.shadowRoot&&m.shadowRoot.activeElement;)m=m.shadowRoot.activeElement;return m}function se(m,j){var E=m.className;$(j).test(E)||(m.className+=(E?" ":"")+j)}function Q(m,j){for(var E=m.split(" "),_=0;_<E.length;_++)E[_]&&!$(E[_]).test(j)&&(j+=" "+E[_]);return j}var xe=function(m){m.select()};w?xe=function(m){m.selectionStart=0,m.selectionEnd=m.value.length}:l&&(xe=function(m){try{m.select()}catch{}});function K(m){var j=Array.prototype.slice.call(arguments,1);return function(){return m.apply(null,j)}}function Z(m,j,E){j||(j={});for(var _ in m)m.hasOwnProperty(_)&&(E!==!1||!j.hasOwnProperty(_))&&(j[_]=m[_]);return j}function ve(m,j,E,_,A){j==null&&(j=m.search(/[^\s\u00a0]/),j==-1&&(j=m.length));for(var U=_||0,te=A||0;;){var oe=m.indexOf("	",U);if(oe<0||oe>=j)return te+(j-U);te+=oe-U,te+=E-te%E,U=oe+1}}var ae=function(){this.id=null,this.f=null,this.time=0,this.handler=K(this.onTimeout,this)};ae.prototype.onTimeout=function(m){m.id=0,m.time<=+new Date?m.f():setTimeout(m.handler,m.time-+new Date)},ae.prototype.set=function(m,j){this.f=j;var E=+new Date+m;(!this.id||E<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,m),this.time=E)};function Se(m,j){for(var E=0;E<m.length;++E)if(m[E]==j)return E;return-1}var Pe=50,$e={toString:function(){return"CodeMirror.Pass"}},we={scroll:!1},Ae={origin:"*mouse"},ze={origin:"+move"};function Ge(m,j,E){for(var _=0,A=0;;){var U=m.indexOf("	",_);U==-1&&(U=m.length);var te=U-_;if(U==m.length||A+te>=j)return _+Math.min(te,j-A);if(A+=U-_,A+=E-A%E,_=U+1,A>=j)return _}}var Ue=[""];function ht(m){for(;Ue.length<=m;)Ue.push(ee(Ue)+" ");return Ue[m]}function ee(m){return m[m.length-1]}function ue(m,j){for(var E=[],_=0;_<m.length;_++)E[_]=j(m[_],_);return E}function Oe(m,j,E){for(var _=0,A=E(j);_<m.length&&E(m[_])<=A;)_++;m.splice(_,0,j)}function J(){}function I(m,j){var E;return Object.create?E=Object.create(m):(J.prototype=m,E=new J),j&&Z(j,E),E}var V=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function re(m){return/\w/.test(m)||m>""&&(m.toUpperCase()!=m.toLowerCase()||V.test(m))}function pe(m,j){return j?j.source.indexOf("\\w")>-1&&re(m)?!0:j.test(m):re(m)}function ge(m){for(var j in m)if(m.hasOwnProperty(j)&&m[j])return!1;return!0}var Ce=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function he(m){return m.charCodeAt(0)>=768&&Ce.test(m)}function ie(m,j,E){for(;(E<0?j>0:j<m.length)&&he(m.charAt(j));)j+=E;return j}function Fe(m,j,E){for(var _=j>E?-1:1;;){if(j==E)return j;var A=(j+E)/2,U=_<0?Math.ceil(A):Math.floor(A);if(U==j)return m(U)?j:E;m(U)?E=U:j=U+_}}function We(m,j,E,_){if(!m)return _(j,E,"ltr",0);for(var A=!1,U=0;U<m.length;++U){var te=m[U];(te.from<E&&te.to>j||j==E&&te.to==j)&&(_(Math.max(te.from,j),Math.min(te.to,E),te.level==1?"rtl":"ltr",U),A=!0)}A||_(j,E,"ltr")}var Qe=null;function de(m,j,E){var _;Qe=null;for(var A=0;A<m.length;++A){var U=m[A];if(U.from<j&&U.to>j)return A;U.to==j&&(U.from!=U.to&&E=="before"?_=A:Qe=A),U.from==j&&(U.from!=U.to&&E!="before"?_=A:Qe=A)}return _??Qe}var Ee=(function(){var m="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",j="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function E(Ne){return Ne<=247?m.charAt(Ne):1424<=Ne&&Ne<=1524?"R":1536<=Ne&&Ne<=1785?j.charAt(Ne-1536):1774<=Ne&&Ne<=2220?"r":8192<=Ne&&Ne<=8203?"w":Ne==8204?"b":"L"}var _=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,A=/[stwN]/,U=/[LRr]/,te=/[Lb1n]/,oe=/[1n]/;function fe(Ne,qe,rt){this.level=Ne,this.from=qe,this.to=rt}return function(Ne,qe){var rt=qe=="ltr"?"L":"R";if(Ne.length==0||qe=="ltr"&&!_.test(Ne))return!1;for(var St=Ne.length,yt=[],Wt=0;Wt<St;++Wt)yt.push(E(Ne.charCodeAt(Wt)));for(var ir=0,hr=rt;ir<St;++ir){var Tr=yt[ir];Tr=="m"?yt[ir]=hr:hr=Tr}for(var $r=0,Pr=rt;$r<St;++$r){var Dr=yt[$r];Dr=="1"&&Pr=="r"?yt[$r]="n":U.test(Dr)&&(Pr=Dr,Dr=="r"&&(yt[$r]="R"))}for(var dn=1,ln=yt[0];dn<St-1;++dn){var Mn=yt[dn];Mn=="+"&&ln=="1"&&yt[dn+1]=="1"?yt[dn]="1":Mn==","&&ln==yt[dn+1]&&(ln=="1"||ln=="n")&&(yt[dn]=ln),ln=Mn}for(var ys=0;ys<St;++ys){var Ln=yt[ys];if(Ln==",")yt[ys]="N";else if(Ln=="%"){var pa=void 0;for(pa=ys+1;pa<St&&yt[pa]=="%";++pa);for(var Go=ys&&yt[ys-1]=="!"||pa<St&&yt[pa]=="1"?"1":"N",jo=ys;jo<pa;++jo)yt[jo]=Go;ys=pa-1}}for(var ia=0,Sa=rt;ia<St;++ia){var qa=yt[ia];Sa=="L"&&qa=="1"?yt[ia]="L":U.test(qa)&&(Sa=qa)}for(var Ia=0;Ia<St;++Ia)if(A.test(yt[Ia])){var la=void 0;for(la=Ia+1;la<St&&A.test(yt[la]);++la);for(var xs=(Ia?yt[Ia-1]:rt)=="L",Co=(la<St?yt[la]:rt)=="L",Ic=xs==Co?xs?"L":"R":rt,Gl=Ia;Gl<la;++Gl)yt[Gl]=Ic;Ia=la-1}for(var Ga=[],xi,Na=0;Na<St;)if(te.test(yt[Na])){var dh=Na;for(++Na;Na<St&&te.test(yt[Na]);++Na);Ga.push(new fe(0,dh,Na))}else{var co=Na,ea=Ga.length,Kl=qe=="rtl"?1:0;for(++Na;Na<St&&yt[Na]!="L";++Na);for(var uo=co;uo<Na;)if(oe.test(yt[uo])){co<uo&&(Ga.splice(ea,0,new fe(1,co,uo)),ea+=Kl);var wa=uo;for(++uo;uo<Na&&oe.test(yt[uo]);++uo);Ga.splice(ea,0,new fe(2,wa,uo)),ea+=Kl,co=uo}else++uo;co<Na&&Ga.splice(ea,0,new fe(1,co,Na))}return qe=="ltr"&&(Ga[0].level==1&&(xi=Ne.match(/^\s+/))&&(Ga[0].from=xi[0].length,Ga.unshift(new fe(0,0,xi[0].length))),ee(Ga).level==1&&(xi=Ne.match(/\s+$/))&&(ee(Ga).to-=xi[0].length,Ga.push(new fe(0,St-xi[0].length,St)))),qe=="rtl"?Ga.reverse():Ga}})();function le(m,j){var E=m.order;return E==null&&(E=m.order=Ee(m.text,j)),E}var Ye=[],De=function(m,j,E){if(m.addEventListener)m.addEventListener(j,E,!1);else if(m.attachEvent)m.attachEvent("on"+j,E);else{var _=m._handlers||(m._handlers={});_[j]=(_[j]||Ye).concat(E)}};function ct(m,j){return m._handlers&&m._handlers[j]||Ye}function ot(m,j,E){if(m.removeEventListener)m.removeEventListener(j,E,!1);else if(m.detachEvent)m.detachEvent("on"+j,E);else{var _=m._handlers,A=_&&_[j];if(A){var U=Se(A,E);U>-1&&(_[j]=A.slice(0,U).concat(A.slice(U+1)))}}}function dt(m,j){var E=ct(m,j);if(E.length)for(var _=Array.prototype.slice.call(arguments,2),A=0;A<E.length;++A)E[A].apply(null,_)}function Ke(m,j,E){return typeof j=="string"&&(j={type:j,preventDefault:function(){this.defaultPrevented=!0}}),dt(m,E||j.type,m,j),zt(j)||j.codemirrorIgnore}function kt(m){var j=m._handlers&&m._handlers.cursorActivity;if(j)for(var E=m.curOp.cursorActivityHandlers||(m.curOp.cursorActivityHandlers=[]),_=0;_<j.length;++_)Se(E,j[_])==-1&&E.push(j[_])}function At(m,j){return ct(m,j).length>0}function xt(m){m.prototype.on=function(j,E){De(this,j,E)},m.prototype.off=function(j,E){ot(this,j,E)}}function Xt(m){m.preventDefault?m.preventDefault():m.returnValue=!1}function br(m){m.stopPropagation?m.stopPropagation():m.cancelBubble=!0}function zt(m){return m.defaultPrevented!=null?m.defaultPrevented:m.returnValue==!1}function be(m){Xt(m),br(m)}function Be(m){return m.target||m.srcElement}function et(m){var j=m.which;return j==null&&(m.button&1?j=1:m.button&2?j=3:m.button&4&&(j=2)),N&&m.ctrlKey&&j==1&&(j=3),j}var wt=(function(){if(l&&c<9)return!1;var m=q("div");return"draggable"in m||"dragDrop"in m})(),$t;function tr(m){if($t==null){var j=q("span","");M(m,q("span",[j,document.createTextNode("x")])),m.firstChild.offsetHeight!=0&&($t=j.offsetWidth<=1&&j.offsetHeight>2&&!(l&&c<8))}var E=$t?q("span",""):q("span","",null,"display: inline-block; width: 1px; margin-right: -1px");return E.setAttribute("cm-text",""),E}var Lr;function tn(m){if(Lr!=null)return Lr;var j=M(m,document.createTextNode("AA")),E=H(j,0,1).getBoundingClientRect(),_=H(j,1,2).getBoundingClientRect();return Y(m),!E||E.left==E.right?!1:Lr=_.right-E.right<3}var bn=`

b`.split(/\n/).length!=3?function(m){for(var j=0,E=[],_=m.length;j<=_;){var A=m.indexOf(`
`,j);A==-1&&(A=m.length);var U=m.slice(j,m.charAt(A-1)=="\r"?A-1:A),te=U.indexOf("\r");te!=-1?(E.push(U.slice(0,te)),j+=te+1):(E.push(U),j=A+1)}return E}:function(m){return m.split(/\r\n?|\n/)},Fr=window.getSelection?function(m){try{return m.selectionStart!=m.selectionEnd}catch{return!1}}:function(m){var j;try{j=m.ownerDocument.selection.createRange()}catch{}return!j||j.parentElement()!=m?!1:j.compareEndPoints("StartToEnd",j)!=0},rr=(function(){var m=q("div");return"oncopy"in m?!0:(m.setAttribute("oncopy","return;"),typeof m.oncopy=="function")})(),wr=null;function an(m){if(wr!=null)return wr;var j=M(m,q("span","x")),E=j.getBoundingClientRect(),_=H(j,0,1).getBoundingClientRect();return wr=Math.abs(E.left-_.left)>1}var En={},rn={};function kr(m,j){arguments.length>2&&(j.dependencies=Array.prototype.slice.call(arguments,2)),En[m]=j}function jr(m,j){rn[m]=j}function mt(m){if(typeof m=="string"&&rn.hasOwnProperty(m))m=rn[m];else if(m&&typeof m.name=="string"&&rn.hasOwnProperty(m.name)){var j=rn[m.name];typeof j=="string"&&(j={name:j}),m=I(j,m),m.name=j.name}else{if(typeof m=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(m))return mt("application/xml");if(typeof m=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(m))return mt("application/json")}return typeof m=="string"?{name:m}:m||{name:"null"}}function yr(m,j){j=mt(j);var E=En[j.name];if(!E)return yr(m,"text/plain");var _=E(m,j);if(An.hasOwnProperty(j.name)){var A=An[j.name];for(var U in A)A.hasOwnProperty(U)&&(_.hasOwnProperty(U)&&(_["_"+U]=_[U]),_[U]=A[U])}if(_.name=j.name,j.helperType&&(_.helperType=j.helperType),j.modeProps)for(var te in j.modeProps)_[te]=j.modeProps[te];return _}var An={};function fn(m,j){var E=An.hasOwnProperty(m)?An[m]:An[m]={};Z(j,E)}function wn(m,j){if(j===!0)return j;if(m.copyState)return m.copyState(j);var E={};for(var _ in j){var A=j[_];A instanceof Array&&(A=A.concat([])),E[_]=A}return E}function zr(m,j){for(var E;m.innerMode&&(E=m.innerMode(j),!(!E||E.mode==m));)j=E.state,m=E.mode;return E||{mode:m,state:j}}function In(m,j,E){return m.startState?m.startState(j,E):!0}var ne=function(m,j,E){this.pos=this.start=0,this.string=m,this.tabSize=j||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=E};ne.prototype.eol=function(){return this.pos>=this.string.length},ne.prototype.sol=function(){return this.pos==this.lineStart},ne.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},ne.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},ne.prototype.eat=function(m){var j=this.string.charAt(this.pos),E;if(typeof m=="string"?E=j==m:E=j&&(m.test?m.test(j):m(j)),E)return++this.pos,j},ne.prototype.eatWhile=function(m){for(var j=this.pos;this.eat(m););return this.pos>j},ne.prototype.eatSpace=function(){for(var m=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>m},ne.prototype.skipToEnd=function(){this.pos=this.string.length},ne.prototype.skipTo=function(m){var j=this.string.indexOf(m,this.pos);if(j>-1)return this.pos=j,!0},ne.prototype.backUp=function(m){this.pos-=m},ne.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=ve(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?ve(this.string,this.lineStart,this.tabSize):0)},ne.prototype.indentation=function(){return ve(this.string,null,this.tabSize)-(this.lineStart?ve(this.string,this.lineStart,this.tabSize):0)},ne.prototype.match=function(m,j,E){if(typeof m=="string"){var _=function(te){return E?te.toLowerCase():te},A=this.string.substr(this.pos,m.length);if(_(A)==_(m))return j!==!1&&(this.pos+=m.length),!0}else{var U=this.string.slice(this.pos).match(m);return U&&U.index>0?null:(U&&j!==!1&&(this.pos+=U[0].length),U)}},ne.prototype.current=function(){return this.string.slice(this.start,this.pos)},ne.prototype.hideFirstChars=function(m,j){this.lineStart+=m;try{return j()}finally{this.lineStart-=m}},ne.prototype.lookAhead=function(m){var j=this.lineOracle;return j&&j.lookAhead(m)},ne.prototype.baseToken=function(){var m=this.lineOracle;return m&&m.baseToken(this.pos)};function ke(m,j){if(j-=m.first,j<0||j>=m.size)throw new Error("There is no line "+(j+m.first)+" in the document.");for(var E=m;!E.lines;)for(var _=0;;++_){var A=E.children[_],U=A.chunkSize();if(j<U){E=A;break}j-=U}return E.lines[j]}function Re(m,j,E){var _=[],A=j.line;return m.iter(j.line,E.line+1,function(U){var te=U.text;A==E.line&&(te=te.slice(0,E.ch)),A==j.line&&(te=te.slice(j.ch)),_.push(te),++A}),_}function Ze(m,j,E){var _=[];return m.iter(j,E,function(A){_.push(A.text)}),_}function st(m,j){var E=j-m.height;if(E)for(var _=m;_;_=_.parent)_.height+=E}function Ct(m){if(m.parent==null)return null;for(var j=m.parent,E=Se(j.lines,m),_=j.parent;_;j=_,_=_.parent)for(var A=0;_.children[A]!=j;++A)E+=_.children[A].chunkSize();return E+j.first}function Xe(m,j){var E=m.first;e:do{for(var _=0;_<m.children.length;++_){var A=m.children[_],U=A.height;if(j<U){m=A;continue e}j-=U,E+=A.chunkSize()}return E}while(!m.lines);for(var te=0;te<m.lines.length;++te){var oe=m.lines[te],fe=oe.height;if(j<fe)break;j-=fe}return E+te}function Ve(m,j){return j>=m.first&&j<m.first+m.size}function je(m,j){return String(m.lineNumberFormatter(j+m.firstLineNumber))}function He(m,j,E){if(E===void 0&&(E=null),!(this instanceof He))return new He(m,j,E);this.line=m,this.ch=j,this.sticky=E}function at(m,j){return m.line-j.line||m.ch-j.ch}function Ot(m,j){return m.sticky==j.sticky&&at(m,j)==0}function ce(m){return He(m.line,m.ch)}function Te(m,j){return at(m,j)<0?j:m}function ut(m,j){return at(m,j)<0?m:j}function jt(m,j){return Math.max(m.first,Math.min(j,m.first+m.size-1))}function Lt(m,j){if(j.line<m.first)return He(m.first,0);var E=m.first+m.size-1;return j.line>E?He(E,ke(m,E).text.length):ur(j,ke(m,j.line).text.length)}function ur(m,j){var E=m.ch;return E==null||E>j?He(m.line,j):E<0?He(m.line,0):m}function Br(m,j){for(var E=[],_=0;_<j.length;_++)E[_]=Lt(m,j[_]);return E}var _t=function(m,j){this.state=m,this.lookAhead=j},Kr=function(m,j,E,_){this.state=j,this.doc=m,this.line=E,this.maxLookAhead=_||0,this.baseTokens=null,this.baseTokenPos=1};Kr.prototype.lookAhead=function(m){var j=this.doc.getLine(this.line+m);return j!=null&&m>this.maxLookAhead&&(this.maxLookAhead=m),j},Kr.prototype.baseToken=function(m){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=m;)this.baseTokenPos+=2;var j=this.baseTokens[this.baseTokenPos+1];return{type:j&&j.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-m}},Kr.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Kr.fromSaved=function(m,j,E){return j instanceof _t?new Kr(m,wn(m.mode,j.state),E,j.lookAhead):new Kr(m,wn(m.mode,j),E)},Kr.prototype.save=function(m){var j=m!==!1?wn(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new _t(j,this.maxLookAhead):j};function Zr(m,j,E,_){var A=[m.state.modeGen],U={};_r(m,j.text,m.doc.mode,E,function(Ne,qe){return A.push(Ne,qe)},U,_);for(var te=E.state,oe=function(Ne){E.baseTokens=A;var qe=m.state.overlays[Ne],rt=1,St=0;E.state=!0,_r(m,j.text,qe.mode,E,function(yt,Wt){for(var ir=rt;St<yt;){var hr=A[rt];hr>yt&&A.splice(rt,1,yt,A[rt+1],hr),rt+=2,St=Math.min(yt,hr)}if(Wt)if(qe.opaque)A.splice(ir,rt-ir,yt,"overlay "+Wt),rt=ir+2;else for(;ir<rt;ir+=2){var Tr=A[ir+1];A[ir+1]=(Tr?Tr+" ":"")+"overlay "+Wt}},U),E.state=te,E.baseTokens=null,E.baseTokenPos=1},fe=0;fe<m.state.overlays.length;++fe)oe(fe);return{styles:A,classes:U.bgClass||U.textClass?U:null}}function ps(m,j,E){if(!j.styles||j.styles[0]!=m.state.modeGen){var _=Xn(m,Ct(j)),A=j.text.length>m.options.maxHighlightLength&&wn(m.doc.mode,_.state),U=Zr(m,j,_);A&&(_.state=A),j.stateAfter=_.save(!A),j.styles=U.styles,U.classes?j.styleClasses=U.classes:j.styleClasses&&(j.styleClasses=null),E===m.doc.highlightFrontier&&(m.doc.modeFrontier=Math.max(m.doc.modeFrontier,++m.doc.highlightFrontier))}return j.styles}function Xn(m,j,E){var _=m.doc,A=m.display;if(!_.mode.startState)return new Kr(_,!0,j);var U=gt(m,j,E),te=U>_.first&&ke(_,U-1).stateAfter,oe=te?Kr.fromSaved(_,te,U):new Kr(_,In(_.mode),U);return _.iter(U,j,function(fe){ds(m,fe.text,oe);var Ne=oe.line;fe.stateAfter=Ne==j-1||Ne%5==0||Ne>=A.viewFrom&&Ne<A.viewTo?oe.save():null,oe.nextLine()}),E&&(_.modeFrontier=oe.line),oe}function ds(m,j,E,_){var A=m.doc.mode,U=new ne(j,m.options.tabSize,E);for(U.start=U.pos=_||0,j==""&&Ea(A,E.state);!U.eol();)sa(A,U,E.state),U.start=U.pos}function Ea(m,j){if(m.blankLine)return m.blankLine(j);if(m.innerMode){var E=zr(m,j);if(E.mode.blankLine)return E.mode.blankLine(E.state)}}function sa(m,j,E,_){for(var A=0;A<10;A++){_&&(_[0]=zr(m,E).mode);var U=m.token(j,E);if(j.pos>j.start)return U}throw new Error("Mode "+m.name+" failed to advance stream.")}var Is=function(m,j,E){this.start=m.start,this.end=m.pos,this.string=m.current(),this.type=j||null,this.state=E};function ya(m,j,E,_){var A=m.doc,U=A.mode,te;j=Lt(A,j);var oe=ke(A,j.line),fe=Xn(m,j.line,E),Ne=new ne(oe.text,m.options.tabSize,fe),qe;for(_&&(qe=[]);(_||Ne.pos<j.ch)&&!Ne.eol();)Ne.start=Ne.pos,te=sa(U,Ne,fe.state),_&&qe.push(new Is(Ne,te,wn(A.mode,fe.state)));return _?qe:new Is(Ne,te,fe.state)}function Ir(m,j){if(m)for(;;){var E=m.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!E)break;m=m.slice(0,E.index)+m.slice(E.index+E[0].length);var _=E[1]?"bgClass":"textClass";j[_]==null?j[_]=E[2]:new RegExp("(?:^|\\s)"+E[2]+"(?:$|\\s)").test(j[_])||(j[_]+=" "+E[2])}return m}function _r(m,j,E,_,A,U,te){var oe=E.flattenSpans;oe==null&&(oe=m.options.flattenSpans);var fe=0,Ne=null,qe=new ne(j,m.options.tabSize,_),rt,St=m.options.addModeClass&&[null];for(j==""&&Ir(Ea(E,_.state),U);!qe.eol();){if(qe.pos>m.options.maxHighlightLength?(oe=!1,te&&ds(m,j,_,qe.pos),qe.pos=j.length,rt=null):rt=Ir(sa(E,qe,_.state,St),U),St){var yt=St[0].name;yt&&(rt="m-"+(rt?yt+" "+rt:yt))}if(!oe||Ne!=rt){for(;fe<qe.start;)fe=Math.min(qe.start,fe+5e3),A(fe,Ne);Ne=rt}qe.start=qe.pos}for(;fe<qe.pos;){var Wt=Math.min(qe.pos,fe+5e3);A(Wt,Ne),fe=Wt}}function gt(m,j,E){for(var _,A,U=m.doc,te=E?-1:j-(m.doc.mode.innerMode?1e3:100),oe=j;oe>te;--oe){if(oe<=U.first)return U.first;var fe=ke(U,oe-1),Ne=fe.stateAfter;if(Ne&&(!E||oe+(Ne instanceof _t?Ne.lookAhead:0)<=U.modeFrontier))return oe;var qe=ve(fe.text,null,m.options.tabSize);(A==null||_>qe)&&(A=oe-1,_=qe)}return A}function ar(m,j){if(m.modeFrontier=Math.min(m.modeFrontier,j),!(m.highlightFrontier<j-10)){for(var E=m.first,_=j-1;_>E;_--){var A=ke(m,_).stateAfter;if(A&&(!(A instanceof _t)||_+A.lookAhead<j)){E=_+1;break}}m.highlightFrontier=Math.min(m.highlightFrontier,E)}}var Or=!1,Mr=!1;function Sn(){Or=!0}function jn(){Mr=!0}function $n(m,j,E){this.marker=m,this.from=j,this.to=E}function Fn(m,j){if(m)for(var E=0;E<m.length;++E){var _=m[E];if(_.marker==j)return _}}function Wn(m,j){for(var E,_=0;_<m.length;++_)m[_]!=j&&(E||(E=[])).push(m[_]);return E}function so(m,j,E){var _=E&&window.WeakSet&&(E.markedSpans||(E.markedSpans=new WeakSet));_&&_.has(m.markedSpans)?m.markedSpans.push(j):(m.markedSpans=m.markedSpans?m.markedSpans.concat([j]):[j],_&&_.add(m.markedSpans)),j.marker.attachLine(m)}function xa(m,j,E){var _;if(m)for(var A=0;A<m.length;++A){var U=m[A],te=U.marker,oe=U.from==null||(te.inclusiveLeft?U.from<=j:U.from<j);if(oe||U.from==j&&te.type=="bookmark"&&(!E||!U.marker.insertLeft)){var fe=U.to==null||(te.inclusiveRight?U.to>=j:U.to>j);(_||(_=[])).push(new $n(te,U.from,fe?null:U.to))}}return _}function qn(m,j,E){var _;if(m)for(var A=0;A<m.length;++A){var U=m[A],te=U.marker,oe=U.to==null||(te.inclusiveRight?U.to>=j:U.to>j);if(oe||U.from==j&&te.type=="bookmark"&&(!E||U.marker.insertLeft)){var fe=U.from==null||(te.inclusiveLeft?U.from<=j:U.from<j);(_||(_=[])).push(new $n(te,fe?null:U.from-j,U.to==null?null:U.to-j))}}return _}function Vn(m,j){if(j.full)return null;var E=Ve(m,j.from.line)&&ke(m,j.from.line).markedSpans,_=Ve(m,j.to.line)&&ke(m,j.to.line).markedSpans;if(!E&&!_)return null;var A=j.from.ch,U=j.to.ch,te=at(j.from,j.to)==0,oe=xa(E,A,te),fe=qn(_,U,te),Ne=j.text.length==1,qe=ee(j.text).length+(Ne?A:0);if(oe)for(var rt=0;rt<oe.length;++rt){var St=oe[rt];if(St.to==null){var yt=Fn(fe,St.marker);yt?Ne&&(St.to=yt.to==null?null:yt.to+qe):St.to=A}}if(fe)for(var Wt=0;Wt<fe.length;++Wt){var ir=fe[Wt];if(ir.to!=null&&(ir.to+=qe),ir.from==null){var hr=Fn(oe,ir.marker);hr||(ir.from=qe,Ne&&(oe||(oe=[])).push(ir))}else ir.from+=qe,Ne&&(oe||(oe=[])).push(ir)}oe&&(oe=Gn(oe)),fe&&fe!=oe&&(fe=Gn(fe));var Tr=[oe];if(!Ne){var $r=j.text.length-2,Pr;if($r>0&&oe)for(var Dr=0;Dr<oe.length;++Dr)oe[Dr].to==null&&(Pr||(Pr=[])).push(new $n(oe[Dr].marker,null,null));for(var dn=0;dn<$r;++dn)Tr.push(Pr);Tr.push(fe)}return Tr}function Gn(m){for(var j=0;j<m.length;++j){var E=m[j];E.from!=null&&E.from==E.to&&E.marker.clearWhenEmpty!==!1&&m.splice(j--,1)}return m.length?m:null}function _s(m,j,E){var _=null;if(m.iter(j.line,E.line+1,function(yt){if(yt.markedSpans)for(var Wt=0;Wt<yt.markedSpans.length;++Wt){var ir=yt.markedSpans[Wt].marker;ir.readOnly&&(!_||Se(_,ir)==-1)&&(_||(_=[])).push(ir)}}),!_)return null;for(var A=[{from:j,to:E}],U=0;U<_.length;++U)for(var te=_[U],oe=te.find(0),fe=0;fe<A.length;++fe){var Ne=A[fe];if(!(at(Ne.to,oe.from)<0||at(Ne.from,oe.to)>0)){var qe=[fe,1],rt=at(Ne.from,oe.from),St=at(Ne.to,oe.to);(rt<0||!te.inclusiveLeft&&!rt)&&qe.push({from:Ne.from,to:oe.from}),(St>0||!te.inclusiveRight&&!St)&&qe.push({from:oe.to,to:Ne.to}),A.splice.apply(A,qe),fe+=qe.length-3}}return A}function Ta(m){var j=m.markedSpans;if(j){for(var E=0;E<j.length;++E)j[E].marker.detachLine(m);m.markedSpans=null}}function Fs(m,j){if(j){for(var E=0;E<j.length;++E)j[E].marker.attachLine(m);m.markedSpans=j}}function vs(m){return m.inclusiveLeft?-1:0}function Kn(m){return m.inclusiveRight?1:0}function Rs(m,j){var E=m.lines.length-j.lines.length;if(E!=0)return E;var _=m.find(),A=j.find(),U=at(_.from,A.from)||vs(m)-vs(j);if(U)return-U;var te=at(_.to,A.to)||Kn(m)-Kn(j);return te||j.id-m.id}function aa(m,j){var E=Mr&&m.markedSpans,_;if(E)for(var A=void 0,U=0;U<E.length;++U)A=E[U],A.marker.collapsed&&(j?A.from:A.to)==null&&(!_||Rs(_,A.marker)<0)&&(_=A.marker);return _}function Wr(m){return aa(m,!0)}function qr(m){return aa(m,!1)}function on(m,j){var E=Mr&&m.markedSpans,_;if(E)for(var A=0;A<E.length;++A){var U=E[A];U.marker.collapsed&&(U.from==null||U.from<j)&&(U.to==null||U.to>j)&&(!_||Rs(_,U.marker)<0)&&(_=U.marker)}return _}function nn(m,j,E,_,A){var U=ke(m,j),te=Mr&&U.markedSpans;if(te)for(var oe=0;oe<te.length;++oe){var fe=te[oe];if(fe.marker.collapsed){var Ne=fe.marker.find(0),qe=at(Ne.from,E)||vs(fe.marker)-vs(A),rt=at(Ne.to,_)||Kn(fe.marker)-Kn(A);if(!(qe>=0&&rt<=0||qe<=0&&rt>=0)&&(qe<=0&&(fe.marker.inclusiveRight&&A.inclusiveLeft?at(Ne.to,E)>=0:at(Ne.to,E)>0)||qe>=0&&(fe.marker.inclusiveRight&&A.inclusiveLeft?at(Ne.from,_)<=0:at(Ne.from,_)<0)))return!0}}}function Ie(m){for(var j;j=Wr(m);)m=j.find(-1,!0).line;return m}function it(m){for(var j;j=qr(m);)m=j.find(1,!0).line;return m}function Et(m){for(var j,E;j=qr(m);)m=j.find(1,!0).line,(E||(E=[])).push(m);return E}function Mt(m,j){var E=ke(m,j),_=Ie(E);return E==_?j:Ct(_)}function Pt(m,j){if(j>m.lastLine())return j;var E=ke(m,j),_;if(!or(m,E))return j;for(;_=qr(E);)E=_.find(1,!0).line;return Ct(E)+1}function or(m,j){var E=Mr&&j.markedSpans;if(E){for(var _=void 0,A=0;A<E.length;++A)if(_=E[A],!!_.marker.collapsed){if(_.from==null)return!0;if(!_.marker.widgetNode&&_.from==0&&_.marker.inclusiveLeft&&Vt(m,j,_))return!0}}}function Vt(m,j,E){if(E.to==null){var _=E.marker.find(1,!0);return Vt(m,_.line,Fn(_.line.markedSpans,E.marker))}if(E.marker.inclusiveRight&&E.to==j.text.length)return!0;for(var A=void 0,U=0;U<j.markedSpans.length;++U)if(A=j.markedSpans[U],A.marker.collapsed&&!A.marker.widgetNode&&A.from==E.to&&(A.to==null||A.to!=E.from)&&(A.marker.inclusiveLeft||E.marker.inclusiveRight)&&Vt(m,j,A))return!0}function Ft(m){m=Ie(m);for(var j=0,E=m.parent,_=0;_<E.lines.length;++_){var A=E.lines[_];if(A==m)break;j+=A.height}for(var U=E.parent;U;E=U,U=E.parent)for(var te=0;te<U.children.length;++te){var oe=U.children[te];if(oe==E)break;j+=oe.height}return j}function Cr(m){if(m.height==0)return 0;for(var j=m.text.length,E,_=m;E=Wr(_);){var A=E.find(0,!0);_=A.from.line,j+=A.from.ch-A.to.ch}for(_=m;E=qr(_);){var U=E.find(0,!0);j-=_.text.length-U.from.ch,_=U.to.line,j+=_.text.length-U.to.ch}return j}function Rt(m){var j=m.display,E=m.doc;j.maxLine=ke(E,E.first),j.maxLineLength=Cr(j.maxLine),j.maxLineChanged=!0,E.iter(function(_){var A=Cr(_);A>j.maxLineLength&&(j.maxLineLength=A,j.maxLine=_)})}var fr=function(m,j,E){this.text=m,Fs(this,j),this.height=E?E(this):1};fr.prototype.lineNo=function(){return Ct(this)},xt(fr);function Rr(m,j,E,_){m.text=j,m.stateAfter&&(m.stateAfter=null),m.styles&&(m.styles=null),m.order!=null&&(m.order=null),Ta(m),Fs(m,E);var A=_?_(m):1;A!=m.height&&st(m,A)}function Er(m){m.parent=null,Ta(m)}var Yr={},Gr={};function mn(m,j){if(!m||/^\s*$/.test(m))return null;var E=j.addModeClass?Gr:Yr;return E[m]||(E[m]=m.replace(/\S+/g,"cm-$&"))}function Xr(m,j){var E=P("span",null,null,d?"padding-right: .1px":null),_={pre:P("pre",[E],"CodeMirror-line"),content:E,col:0,pos:0,cm:m,trailingSpace:!1,splitSpaces:m.getOption("lineWrapping")};j.measure={};for(var A=0;A<=(j.rest?j.rest.length:0);A++){var U=A?j.rest[A-1]:j.line,te=void 0;_.pos=0,_.addToken=Yn,tn(m.display.measure)&&(te=le(U,m.doc.direction))&&(_.addToken=da(_.addToken,te)),_.map=[];var oe=j!=m.display.externalMeasured&&Ct(U);Qo(U,_,ps(m,U,oe)),U.styleClasses&&(U.styleClasses.bgClass&&(_.bgClass=Q(U.styleClasses.bgClass,_.bgClass||"")),U.styleClasses.textClass&&(_.textClass=Q(U.styleClasses.textClass,_.textClass||""))),_.map.length==0&&_.map.push(0,0,_.content.appendChild(tr(m.display.measure))),A==0?(j.measure.map=_.map,j.measure.cache={}):((j.measure.maps||(j.measure.maps=[])).push(_.map),(j.measure.caches||(j.measure.caches=[])).push({}))}if(d){var fe=_.content.lastChild;(/\bcm-tab\b/.test(fe.className)||fe.querySelector&&fe.querySelector(".cm-tab"))&&(_.content.className="cm-tab-wrap-hack")}return dt(m,"renderLine",m,j.line,_.pre),_.pre.className&&(_.textClass=Q(_.pre.className,_.textClass||"")),_}function Vr(m){var j=q("span","","cm-invalidchar");return j.title="\\u"+m.charCodeAt(0).toString(16),j.setAttribute("aria-label",j.title),j}function Yn(m,j,E,_,A,U,te){if(j){var oe=m.splitSpaces?Qr(j,m.trailingSpace):j,fe=m.cm.state.specialChars,Ne=!1,qe;if(!fe.test(j))m.col+=j.length,qe=document.createTextNode(oe),m.map.push(m.pos,m.pos+j.length,qe),l&&c<9&&(Ne=!0),m.pos+=j.length;else{qe=document.createDocumentFragment();for(var rt=0;;){fe.lastIndex=rt;var St=fe.exec(j),yt=St?St.index-rt:j.length-rt;if(yt){var Wt=document.createTextNode(oe.slice(rt,rt+yt));l&&c<9?qe.appendChild(q("span",[Wt])):qe.appendChild(Wt),m.map.push(m.pos,m.pos+yt,Wt),m.col+=yt,m.pos+=yt}if(!St)break;rt+=yt+1;var ir=void 0;if(St[0]=="	"){var hr=m.cm.options.tabSize,Tr=hr-m.col%hr;ir=qe.appendChild(q("span",ht(Tr),"cm-tab")),ir.setAttribute("role","presentation"),ir.setAttribute("cm-text","	"),m.col+=Tr}else St[0]=="\r"||St[0]==`
`?(ir=qe.appendChild(q("span",St[0]=="\r"?"":"","cm-invalidchar")),ir.setAttribute("cm-text",St[0]),m.col+=1):(ir=m.cm.options.specialCharPlaceholder(St[0]),ir.setAttribute("cm-text",St[0]),l&&c<9?qe.appendChild(q("span",[ir])):qe.appendChild(ir),m.col+=1);m.map.push(m.pos,m.pos+1,ir),m.pos++}}if(m.trailingSpace=oe.charCodeAt(j.length-1)==32,E||_||A||Ne||U||te){var $r=E||"";_&&($r+=_),A&&($r+=A);var Pr=q("span",[qe],$r,U);if(te)for(var Dr in te)te.hasOwnProperty(Dr)&&Dr!="style"&&Dr!="class"&&Pr.setAttribute(Dr,te[Dr]);return m.content.appendChild(Pr)}m.content.appendChild(qe)}}function Qr(m,j){if(m.length>1&&!/  /.test(m))return m;for(var E=j,_="",A=0;A<m.length;A++){var U=m.charAt(A);U==" "&&E&&(A==m.length-1||m.charCodeAt(A+1)==32)&&(U=""),_+=U,E=U==" "}return _}function da(m,j){return function(E,_,A,U,te,oe,fe){A=A?A+" cm-force-border":"cm-force-border";for(var Ne=E.pos,qe=Ne+_.length;;){for(var rt=void 0,St=0;St<j.length&&(rt=j[St],!(rt.to>Ne&&rt.from<=Ne));St++);if(rt.to>=qe)return m(E,_,A,U,te,oe,fe);m(E,_.slice(0,rt.to-Ne),A,U,null,oe,fe),U=null,_=_.slice(rt.to-Ne),Ne=rt.to}}}function Rn(m,j,E,_){var A=!_&&E.widgetNode;A&&m.map.push(m.pos,m.pos+j,A),!_&&m.cm.display.input.needsContentAttribute&&(A||(A=m.content.appendChild(document.createElement("span"))),A.setAttribute("cm-marker",E.id)),A&&(m.cm.display.input.setUneditable(A),m.content.appendChild(A)),m.pos+=j,m.trailingSpace=!1}function Qo(m,j,E){var _=m.markedSpans,A=m.text,U=0;if(!_){for(var te=1;te<E.length;te+=2)j.addToken(j,A.slice(U,U=E[te]),mn(E[te+1],j.cm.options));return}for(var oe=A.length,fe=0,Ne=1,qe="",rt,St,yt=0,Wt,ir,hr,Tr,$r;;){if(yt==fe){Wt=ir=hr=St="",$r=null,Tr=null,yt=1/0;for(var Pr=[],Dr=void 0,dn=0;dn<_.length;++dn){var ln=_[dn],Mn=ln.marker;if(Mn.type=="bookmark"&&ln.from==fe&&Mn.widgetNode)Pr.push(Mn);else if(ln.from<=fe&&(ln.to==null||ln.to>fe||Mn.collapsed&&ln.to==fe&&ln.from==fe)){if(ln.to!=null&&ln.to!=fe&&yt>ln.to&&(yt=ln.to,ir=""),Mn.className&&(Wt+=" "+Mn.className),Mn.css&&(St=(St?St+";":"")+Mn.css),Mn.startStyle&&ln.from==fe&&(hr+=" "+Mn.startStyle),Mn.endStyle&&ln.to==yt&&(Dr||(Dr=[])).push(Mn.endStyle,ln.to),Mn.title&&(($r||($r={})).title=Mn.title),Mn.attributes)for(var ys in Mn.attributes)($r||($r={}))[ys]=Mn.attributes[ys];Mn.collapsed&&(!Tr||Rs(Tr.marker,Mn)<0)&&(Tr=ln)}else ln.from>fe&&yt>ln.from&&(yt=ln.from)}if(Dr)for(var Ln=0;Ln<Dr.length;Ln+=2)Dr[Ln+1]==yt&&(ir+=" "+Dr[Ln]);if(!Tr||Tr.from==fe)for(var pa=0;pa<Pr.length;++pa)Rn(j,0,Pr[pa]);if(Tr&&(Tr.from||0)==fe){if(Rn(j,(Tr.to==null?oe+1:Tr.to)-fe,Tr.marker,Tr.from==null),Tr.to==null)return;Tr.to==fe&&(Tr=!1)}}if(fe>=oe)break;for(var Go=Math.min(oe,yt);;){if(qe){var jo=fe+qe.length;if(!Tr){var ia=jo>Go?qe.slice(0,Go-fe):qe;j.addToken(j,ia,rt?rt+Wt:Wt,hr,fe+ia.length==yt?ir:"",St,$r)}if(jo>=Go){qe=qe.slice(Go-fe),fe=Go;break}fe=jo,hr=""}qe=A.slice(U,U=E[Ne++]),rt=mn(E[Ne++],j.cm.options)}}}function Jr(m,j,E){this.line=j,this.rest=Et(j),this.size=this.rest?Ct(ee(this.rest))-E+1:1,this.node=this.text=null,this.hidden=or(m,j)}function hs(m,j,E){for(var _=[],A,U=j;U<E;U=A){var te=new Jr(m.doc,ke(m.doc,U),U);A=U+te.size,_.push(te)}return _}var va=null;function rs(m){va?va.ops.push(m):m.ownsGroup=va={ops:[m],delayedCallbacks:[]}}function Bs(m){var j=m.delayedCallbacks,E=0;do{for(;E<j.length;E++)j[E].call(null);for(var _=0;_<m.ops.length;_++){var A=m.ops[_];if(A.cursorActivityHandlers)for(;A.cursorActivityCalled<A.cursorActivityHandlers.length;)A.cursorActivityHandlers[A.cursorActivityCalled++].call(null,A.cm)}}while(E<j.length)}function Uo(m,j){var E=m.ownsGroup;if(E)try{Bs(E)}finally{va=null,j(E)}}var Vo=null;function Ds(m,j){var E=ct(m,j);if(E.length){var _=Array.prototype.slice.call(arguments,2),A;va?A=va.delayedCallbacks:Vo?A=Vo:(A=Vo=[],setTimeout(Li,0));for(var U=function(oe){A.push(function(){return E[oe].apply(null,_)})},te=0;te<E.length;++te)U(te)}}function Li(){var m=Vo;Vo=null;for(var j=0;j<m.length;++j)m[j]()}function ui(m,j,E,_){for(var A=0;A<j.changes.length;A++){var U=j.changes[A];U=="text"?gc(m,j):U=="gutter"?tt(m,j,E,_):U=="class"?yc(m,j):U=="widget"&&Ht(m,j,_)}j.changes=null}function Ho(m){return m.node==m.text&&(m.node=q("div",null,null,"position: relative"),m.text.parentNode&&m.text.parentNode.replaceChild(m.node,m.text),m.node.appendChild(m.text),l&&c<8&&(m.node.style.zIndex=2)),m.node}function sd(m,j){var E=j.bgClass?j.bgClass+" "+(j.line.bgClass||""):j.line.bgClass;if(E&&(E+=" CodeMirror-linebackground"),j.background)E?j.background.className=E:(j.background.parentNode.removeChild(j.background),j.background=null);else if(E){var _=Ho(j);j.background=_.insertBefore(q("div",null,E),_.firstChild),m.display.input.setUneditable(j.background)}}function Al(m,j){var E=m.display.externalMeasured;return E&&E.line==j.line?(m.display.externalMeasured=null,j.measure=E.measure,E.built):Xr(m,j)}function gc(m,j){var E=j.text.className,_=Al(m,j);j.text==j.node&&(j.node=_.pre),j.text.parentNode.replaceChild(_.pre,j.text),j.text=_.pre,_.bgClass!=j.bgClass||_.textClass!=j.textClass?(j.bgClass=_.bgClass,j.textClass=_.textClass,yc(m,j)):E&&(j.text.className=E)}function yc(m,j){sd(m,j),j.line.wrapClass?Ho(j).className=j.line.wrapClass:j.node!=j.text&&(j.node.className="");var E=j.textClass?j.textClass+" "+(j.line.textClass||""):j.line.textClass;j.text.className=E||""}function tt(m,j,E,_){if(j.gutter&&(j.node.removeChild(j.gutter),j.gutter=null),j.gutterBackground&&(j.node.removeChild(j.gutterBackground),j.gutterBackground=null),j.line.gutterClass){var A=Ho(j);j.gutterBackground=q("div",null,"CodeMirror-gutter-background "+j.line.gutterClass,"left: "+(m.options.fixedGutter?_.fixedPos:-_.gutterTotalWidth)+"px; width: "+_.gutterTotalWidth+"px"),m.display.input.setUneditable(j.gutterBackground),A.insertBefore(j.gutterBackground,j.text)}var U=j.line.gutterMarkers;if(m.options.lineNumbers||U){var te=Ho(j),oe=j.gutter=q("div",null,"CodeMirror-gutter-wrapper","left: "+(m.options.fixedGutter?_.fixedPos:-_.gutterTotalWidth)+"px");if(oe.setAttribute("aria-hidden","true"),m.display.input.setUneditable(oe),te.insertBefore(oe,j.text),j.line.gutterClass&&(oe.className+=" "+j.line.gutterClass),m.options.lineNumbers&&(!U||!U["CodeMirror-linenumbers"])&&(j.lineNumber=oe.appendChild(q("div",je(m.options,E),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+_.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+m.display.lineNumInnerWidth+"px"))),U)for(var fe=0;fe<m.display.gutterSpecs.length;++fe){var Ne=m.display.gutterSpecs[fe].className,qe=U.hasOwnProperty(Ne)&&U[Ne];qe&&oe.appendChild(q("div",[qe],"CodeMirror-gutter-elt","left: "+_.gutterLeft[Ne]+"px; width: "+_.gutterWidth[Ne]+"px"))}}}function Ht(m,j,E){j.alignable&&(j.alignable=null);for(var _=$("CodeMirror-linewidget"),A=j.node.firstChild,U=void 0;A;A=U)U=A.nextSibling,_.test(A.className)&&j.node.removeChild(A);er(m,j,E)}function qt(m,j,E,_){var A=Al(m,j);return j.text=j.node=A.pre,A.bgClass&&(j.bgClass=A.bgClass),A.textClass&&(j.textClass=A.textClass),yc(m,j),tt(m,j,E,_),er(m,j,_),j.node}function er(m,j,E){if(xr(m,j.line,j,E,!0),j.rest)for(var _=0;_<j.rest.length;_++)xr(m,j.rest[_],j,E,!1)}function xr(m,j,E,_,A){if(j.widgets)for(var U=Ho(E),te=0,oe=j.widgets;te<oe.length;++te){var fe=oe[te],Ne=q("div",[fe.node],"CodeMirror-linewidget"+(fe.className?" "+fe.className:""));fe.handleMouseEvents||Ne.setAttribute("cm-ignore-events","true"),pn(fe,Ne,E,_),m.display.input.setUneditable(Ne),A&&fe.above?U.insertBefore(Ne,E.gutter||E.text):U.appendChild(Ne),Ds(fe,"redraw")}}function pn(m,j,E,_){if(m.noHScroll){(E.alignable||(E.alignable=[])).push(j);var A=_.wrapperWidth;j.style.left=_.fixedPos+"px",m.coverGutter||(A-=_.gutterTotalWidth,j.style.paddingLeft=_.gutterTotalWidth+"px"),j.style.width=A+"px"}m.coverGutter&&(j.style.zIndex=5,j.style.position="relative",m.noHScroll||(j.style.marginLeft=-_.gutterTotalWidth+"px"))}function Un(m){if(m.height!=null)return m.height;var j=m.doc.cm;if(!j)return 0;if(!D(document.body,m.node)){var E="position: relative;";m.coverGutter&&(E+="margin-left: -"+j.display.gutters.offsetWidth+"px;"),m.noHScroll&&(E+="width: "+j.display.wrapper.clientWidth+"px;"),M(j.display.measure,q("div",[m.node],null,E))}return m.height=m.node.parentNode.offsetHeight}function zs(m,j){for(var E=Be(j);E!=m.wrapper;E=E.parentNode)if(!E||E.nodeType==1&&E.getAttribute("cm-ignore-events")=="true"||E.parentNode==m.sizer&&E!=m.mover)return!0}function ns(m){return m.lineSpace.offsetTop}function $s(m){return m.mover.offsetHeight-m.lineSpace.offsetHeight}function Jo(m){if(m.cachedPaddingH)return m.cachedPaddingH;var j=M(m.measure,q("pre","x","CodeMirror-line-like")),E=window.getComputedStyle?window.getComputedStyle(j):j.currentStyle,_={left:parseInt(E.paddingLeft),right:parseInt(E.paddingRight)};return!isNaN(_.left)&&!isNaN(_.right)&&(m.cachedPaddingH=_),_}function Xa(m){return Pe-m.display.nativeBarWidth}function rl(m){return m.display.scroller.clientWidth-Xa(m)-m.display.barWidth}function ye(m){return m.display.scroller.clientHeight-Xa(m)-m.display.barHeight}function Me(m,j,E){var _=m.options.lineWrapping,A=_&&rl(m);if(!j.measure.heights||_&&j.measure.width!=A){var U=j.measure.heights=[];if(_){j.measure.width=A;for(var te=j.text.firstChild.getClientRects(),oe=0;oe<te.length-1;oe++){var fe=te[oe],Ne=te[oe+1];Math.abs(fe.bottom-Ne.bottom)>2&&U.push((fe.bottom+Ne.top)/2-E.top)}}U.push(E.bottom-E.top)}}function Je(m,j,E){if(m.line==j)return{map:m.measure.map,cache:m.measure.cache};for(var _=0;_<m.rest.length;_++)if(m.rest[_]==j)return{map:m.measure.maps[_],cache:m.measure.caches[_]};for(var A=0;A<m.rest.length;A++)if(Ct(m.rest[A])>E)return{map:m.measure.maps[A],cache:m.measure.caches[A],before:!0}}function lt(m,j){j=Ie(j);var E=Ct(j),_=m.display.externalMeasured=new Jr(m.doc,j,E);_.lineN=E;var A=_.built=Xr(m,_);return _.text=A.pre,M(m.display.lineMeasure,A.pre),_}function Nt(m,j,E,_){return Nr(m,Jt(m,j),E,_)}function bt(m,j){if(j>=m.display.viewFrom&&j<m.display.viewTo)return m.display.view[dd(m,j)];var E=m.display.externalMeasured;if(E&&j>=E.lineN&&j<E.lineN+E.size)return E}function Jt(m,j){var E=Ct(j),_=bt(m,E);_&&!_.text?_=null:_&&_.changes&&(ui(m,_,E,Ml(m)),m.curOp.forceUpdate=!0),_||(_=lt(m,j));var A=Je(_,j,E);return{line:j,view:_,rect:null,map:A.map,cache:A.cache,before:A.before,hasHeights:!1}}function Nr(m,j,E,_,A){j.before&&(E=-1);var U=E+(_||""),te;return j.cache.hasOwnProperty(U)?te=j.cache[U]:(j.rect||(j.rect=j.view.text.getBoundingClientRect()),j.hasHeights||(Me(m,j.view,j.rect),j.hasHeights=!0),te=Qa(m,j,E,_),te.bogus||(j.cache[U]=te)),{left:te.left,right:te.right,top:A?te.rtop:te.top,bottom:A?te.rbottom:te.bottom}}var _n={left:0,right:0,top:0,bottom:0};function Cn(m,j,E){for(var _,A,U,te,oe,fe,Ne=0;Ne<m.length;Ne+=3)if(oe=m[Ne],fe=m[Ne+1],j<oe?(A=0,U=1,te="left"):j<fe?(A=j-oe,U=A+1):(Ne==m.length-3||j==fe&&m[Ne+3]>j)&&(U=fe-oe,A=U-1,j>=fe&&(te="right")),A!=null){if(_=m[Ne+2],oe==fe&&E==(_.insertLeft?"left":"right")&&(te=E),E=="left"&&A==0)for(;Ne&&m[Ne-2]==m[Ne-3]&&m[Ne-1].insertLeft;)_=m[(Ne-=3)+2],te="left";if(E=="right"&&A==fe-oe)for(;Ne<m.length-3&&m[Ne+3]==m[Ne+4]&&!m[Ne+5].insertLeft;)_=m[(Ne+=3)+2],te="right";break}return{node:_,start:A,end:U,collapse:te,coverStart:oe,coverEnd:fe}}function Oa(m,j){var E=_n;if(j=="left")for(var _=0;_<m.length&&(E=m[_]).left==E.right;_++);else for(var A=m.length-1;A>=0&&(E=m[A]).left==E.right;A--);return E}function Qa(m,j,E,_){var A=Cn(j.map,E,_),U=A.node,te=A.start,oe=A.end,fe=A.collapse,Ne;if(U.nodeType==3){for(var qe=0;qe<4;qe++){for(;te&&he(j.line.text.charAt(A.coverStart+te));)--te;for(;A.coverStart+oe<A.coverEnd&&he(j.line.text.charAt(A.coverStart+oe));)++oe;if(l&&c<9&&te==0&&oe==A.coverEnd-A.coverStart?Ne=U.parentNode.getBoundingClientRect():Ne=Oa(H(U,te,oe).getClientRects(),_),Ne.left||Ne.right||te==0)break;oe=te,te=te-1,fe="right"}l&&c<11&&(Ne=hf(m.display.measure,Ne))}else{te>0&&(fe=_="right");var rt;m.options.lineWrapping&&(rt=U.getClientRects()).length>1?Ne=rt[_=="right"?rt.length-1:0]:Ne=U.getBoundingClientRect()}if(l&&c<9&&!te&&(!Ne||!Ne.left&&!Ne.right)){var St=U.parentNode.getClientRects()[0];St?Ne={left:St.left,right:St.left+ld(m.display),top:St.top,bottom:St.bottom}:Ne=_n}for(var yt=Ne.top-j.rect.top,Wt=Ne.bottom-j.rect.top,ir=(yt+Wt)/2,hr=j.view.measure.heights,Tr=0;Tr<hr.length-1&&!(ir<hr[Tr]);Tr++);var $r=Tr?hr[Tr-1]:0,Pr=hr[Tr],Dr={left:(fe=="right"?Ne.right:Ne.left)-j.rect.left,right:(fe=="left"?Ne.left:Ne.right)-j.rect.left,top:$r,bottom:Pr};return!Ne.left&&!Ne.right&&(Dr.bogus=!0),m.options.singleCursorHeightPerLine||(Dr.rtop=yt,Dr.rbottom=Wt),Dr}function hf(m,j){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!an(m))return j;var E=screen.logicalXDPI/screen.deviceXDPI,_=screen.logicalYDPI/screen.deviceYDPI;return{left:j.left*E,right:j.right*E,top:j.top*_,bottom:j.bottom*_}}function mf(m){if(m.measure&&(m.measure.cache={},m.measure.heights=null,m.rest))for(var j=0;j<m.rest.length;j++)m.measure.caches[j]={}}function qx(m){m.display.externalMeasure=null,Y(m.display.lineMeasure);for(var j=0;j<m.display.view.length;j++)mf(m.display.view[j])}function gf(m){qx(m),m.display.cachedCharWidth=m.display.cachedTextHeight=m.display.cachedPaddingH=null,m.options.lineWrapping||(m.display.maxLineChanged=!0),m.display.lineNumChars=null}function Gx(){return h&&C?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Kx(){return h&&C?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function To(m){var j=0;if(m.widgets)for(var E=0;E<m.widgets.length;++E)m.widgets[E].above&&(j+=Un(m.widgets[E]));return j}function xc(m,j,E,_,A){if(!A){var U=To(j);E.top+=U,E.bottom+=U}if(_=="line")return E;_||(_="local");var te=Ft(j);if(_=="local"?te+=ns(m.display):te-=m.display.viewOffset,_=="page"||_=="window"){var oe=m.display.lineSpace.getBoundingClientRect();te+=oe.top+(_=="window"?0:Kx());var fe=oe.left+(_=="window"?0:Gx());E.left+=fe,E.right+=fe}return E.top+=te,E.bottom+=te,E}function Bm(m,j,E){if(E=="div")return j;var _=j.left,A=j.top;if(E=="page")_-=Gx(),A-=Kx();else if(E=="local"||!E){var U=m.display.sizer.getBoundingClientRect();_+=U.left,A+=U.top}var te=m.display.lineSpace.getBoundingClientRect();return{left:_-te.left,top:A-te.top}}function yf(m,j,E,_,A){return _||(_=ke(m.doc,j.line)),xc(m,_,Nt(m,_,j.ch,A),E)}function fi(m,j,E,_,A,U){_=_||ke(m.doc,j.line),A||(A=Jt(m,_));function te(Wt,ir){var hr=Nr(m,A,Wt,ir?"right":"left",U);return ir?hr.left=hr.right:hr.right=hr.left,xc(m,_,hr,E)}var oe=le(_,m.doc.direction),fe=j.ch,Ne=j.sticky;if(fe>=_.text.length?(fe=_.text.length,Ne="before"):fe<=0&&(fe=0,Ne="after"),!oe)return te(Ne=="before"?fe-1:fe,Ne=="before");function qe(Wt,ir,hr){var Tr=oe[ir],$r=Tr.level==1;return te(hr?Wt-1:Wt,$r!=hr)}var rt=de(oe,fe,Ne),St=Qe,yt=qe(fe,rt,Ne=="before");return St!=null&&(yt.other=qe(fe,St,Ne!="before")),yt}function zm(m,j){var E=0;j=Lt(m.doc,j),m.options.lineWrapping||(E=ld(m.display)*j.ch);var _=ke(m.doc,j.line),A=Ft(_)+ns(m.display);return{left:E,right:E,top:A,bottom:A+_.height}}function xf(m,j,E,_,A){var U=He(m,j,E);return U.xRel=A,_&&(U.outside=_),U}function $m(m,j,E){var _=m.doc;if(E+=m.display.viewOffset,E<0)return xf(_.first,0,null,-1,-1);var A=Xe(_,E),U=_.first+_.size-1;if(A>U)return xf(_.first+_.size-1,ke(_,U).text.length,null,1,1);j<0&&(j=0);for(var te=ke(_,A);;){var oe=Um(m,te,A,j,E),fe=on(te,oe.ch+(oe.xRel>0||oe.outside>0?1:0));if(!fe)return oe;var Ne=fe.find(1);if(Ne.line==A)return Ne;te=ke(_,A=Ne.line)}}function ad(m,j,E,_){_-=To(j);var A=j.text.length,U=Fe(function(te){return Nr(m,E,te-1).bottom<=_},A,0);return A=Fe(function(te){return Nr(m,E,te).top>_},U,A),{begin:U,end:A}}function Bp(m,j,E,_){E||(E=Jt(m,j));var A=xc(m,j,Nr(m,E,_),"line").top;return ad(m,j,E,A)}function od(m,j,E,_){return m.bottom<=E?!1:m.top>E?!0:(_?m.left:m.right)>j}function Um(m,j,E,_,A){A-=Ft(j);var U=Jt(m,j),te=To(j),oe=0,fe=j.text.length,Ne=!0,qe=le(j,m.doc.direction);if(qe){var rt=(m.options.lineWrapping?id:Yx)(m,j,E,U,qe,_,A);Ne=rt.level!=1,oe=Ne?rt.from:rt.to-1,fe=Ne?rt.to:rt.from-1}var St=null,yt=null,Wt=Fe(function(dn){var ln=Nr(m,U,dn);return ln.top+=te,ln.bottom+=te,od(ln,_,A,!1)?(ln.top<=A&&ln.left<=_&&(St=dn,yt=ln),!0):!1},oe,fe),ir,hr,Tr=!1;if(yt){var $r=_-yt.left<yt.right-_,Pr=$r==Ne;Wt=St+(Pr?0:1),hr=Pr?"after":"before",ir=$r?yt.left:yt.right}else{!Ne&&(Wt==fe||Wt==oe)&&Wt++,hr=Wt==0?"after":Wt==j.text.length?"before":Nr(m,U,Wt-(Ne?1:0)).bottom+te<=A==Ne?"after":"before";var Dr=fi(m,He(E,Wt,hr),"line",j,U);ir=Dr.left,Tr=A<Dr.top?-1:A>=Dr.bottom?1:0}return Wt=ie(j.text,Wt,1),xf(E,Wt,hr,Tr,_-ir)}function Yx(m,j,E,_,A,U,te){var oe=Fe(function(rt){var St=A[rt],yt=St.level!=1;return od(fi(m,He(E,yt?St.to:St.from,yt?"before":"after"),"line",j,_),U,te,!0)},0,A.length-1),fe=A[oe];if(oe>0){var Ne=fe.level!=1,qe=fi(m,He(E,Ne?fe.from:fe.to,Ne?"after":"before"),"line",j,_);od(qe,U,te,!0)&&qe.top>te&&(fe=A[oe-1])}return fe}function id(m,j,E,_,A,U,te){var oe=ad(m,j,_,te),fe=oe.begin,Ne=oe.end;/\s/.test(j.text.charAt(Ne-1))&&Ne--;for(var qe=null,rt=null,St=0;St<A.length;St++){var yt=A[St];if(!(yt.from>=Ne||yt.to<=fe)){var Wt=yt.level!=1,ir=Nr(m,_,Wt?Math.min(Ne,yt.to)-1:Math.max(fe,yt.from)).right,hr=ir<U?U-ir+1e9:ir-U;(!qe||rt>hr)&&(qe=yt,rt=hr)}}return qe||(qe=A[A.length-1]),qe.from<fe&&(qe={from:fe,to:qe.to,level:qe.level}),qe.to>Ne&&(qe={from:qe.from,to:Ne,level:qe.level}),qe}var pi;function vc(m){if(m.cachedTextHeight!=null)return m.cachedTextHeight;if(pi==null){pi=q("pre",null,"CodeMirror-line-like");for(var j=0;j<49;++j)pi.appendChild(document.createTextNode("x")),pi.appendChild(q("br"));pi.appendChild(document.createTextNode("x"))}M(m.measure,pi);var E=pi.offsetHeight/50;return E>3&&(m.cachedTextHeight=E),Y(m.measure),E||1}function ld(m){if(m.cachedCharWidth!=null)return m.cachedCharWidth;var j=q("span","xxxxxxxxxx"),E=q("pre",[j],"CodeMirror-line-like");M(m.measure,E);var _=j.getBoundingClientRect(),A=(_.right-_.left)/10;return A>2&&(m.cachedCharWidth=A),A||10}function Ml(m){for(var j=m.display,E={},_={},A=j.gutters.clientLeft,U=j.gutters.firstChild,te=0;U;U=U.nextSibling,++te){var oe=m.display.gutterSpecs[te].className;E[oe]=U.offsetLeft+U.clientLeft+A,_[oe]=U.clientWidth}return{fixedPos:zp(j),gutterTotalWidth:j.gutters.offsetWidth,gutterLeft:E,gutterWidth:_,wrapperWidth:j.wrapper.clientWidth}}function zp(m){return m.scroller.getBoundingClientRect().left-m.sizer.getBoundingClientRect().left}function Vm(m){var j=vc(m.display),E=m.options.lineWrapping,_=E&&Math.max(5,m.display.scroller.clientWidth/ld(m.display)-3);return function(A){if(or(m.doc,A))return 0;var U=0;if(A.widgets)for(var te=0;te<A.widgets.length;te++)A.widgets[te].height&&(U+=A.widgets[te].height);return E?U+(Math.ceil(A.text.length/_)||1)*j:U+j}}function $p(m){var j=m.doc,E=Vm(m);j.iter(function(_){var A=E(_);A!=_.height&&st(_,A)})}function cd(m,j,E,_){var A=m.display;if(!E&&Be(j).getAttribute("cm-not-content")=="true")return null;var U,te,oe=A.lineSpace.getBoundingClientRect();try{U=j.clientX-oe.left,te=j.clientY-oe.top}catch{return null}var fe=$m(m,U,te),Ne;if(_&&fe.xRel>0&&(Ne=ke(m.doc,fe.line).text).length==fe.ch){var qe=ve(Ne,Ne.length,m.options.tabSize)-Ne.length;fe=He(fe.line,Math.max(0,Math.round((U-Jo(m.display).left)/ld(m.display))-qe))}return fe}function dd(m,j){if(j>=m.display.viewTo||(j-=m.display.viewFrom,j<0))return null;for(var E=m.display.view,_=0;_<E.length;_++)if(j-=E[_].size,j<0)return _}function Oo(m,j,E,_){j==null&&(j=m.doc.first),E==null&&(E=m.doc.first+m.doc.size),_||(_=0);var A=m.display;if(_&&E<A.viewTo&&(A.updateLineNumbers==null||A.updateLineNumbers>j)&&(A.updateLineNumbers=j),m.curOp.viewChanged=!0,j>=A.viewTo)Mr&&Mt(m.doc,j)<A.viewTo&&Rl(m);else if(E<=A.viewFrom)Mr&&Pt(m.doc,E+_)>A.viewFrom?Rl(m):(A.viewFrom+=_,A.viewTo+=_);else if(j<=A.viewFrom&&E>=A.viewTo)Rl(m);else if(j<=A.viewFrom){var U=cu(m,E,E+_,1);U?(A.view=A.view.slice(U.index),A.viewFrom=U.lineN,A.viewTo+=_):Rl(m)}else if(E>=A.viewTo){var te=cu(m,j,j,-1);te?(A.view=A.view.slice(0,te.index),A.viewTo=te.lineN):Rl(m)}else{var oe=cu(m,j,j,-1),fe=cu(m,E,E+_,1);oe&&fe?(A.view=A.view.slice(0,oe.index).concat(hs(m,oe.lineN,fe.lineN)).concat(A.view.slice(fe.index)),A.viewTo+=_):Rl(m)}var Ne=A.externalMeasured;Ne&&(E<Ne.lineN?Ne.lineN+=_:j<Ne.lineN+Ne.size&&(A.externalMeasured=null))}function Il(m,j,E){m.curOp.viewChanged=!0;var _=m.display,A=m.display.externalMeasured;if(A&&j>=A.lineN&&j<A.lineN+A.size&&(_.externalMeasured=null),!(j<_.viewFrom||j>=_.viewTo)){var U=_.view[dd(m,j)];if(U.node!=null){var te=U.changes||(U.changes=[]);Se(te,E)==-1&&te.push(E)}}}function Rl(m){m.display.viewFrom=m.display.viewTo=m.doc.first,m.display.view=[],m.display.viewOffset=0}function cu(m,j,E,_){var A=dd(m,j),U,te=m.display.view;if(!Mr||E==m.doc.first+m.doc.size)return{index:A,lineN:E};for(var oe=m.display.viewFrom,fe=0;fe<A;fe++)oe+=te[fe].size;if(oe!=j){if(_>0){if(A==te.length-1)return null;U=oe+te[A].size-j,A++}else U=oe-j;j+=U,E+=U}for(;Mt(m.doc,E)!=E;){if(A==(_<0?0:te.length-1))return null;E+=_*te[A-(_<0?1:0)].size,A+=_}return{index:A,lineN:E}}function Fi(m,j,E){var _=m.display,A=_.view;A.length==0||j>=_.viewTo||E<=_.viewFrom?(_.view=hs(m,j,E),_.viewFrom=j):(_.viewFrom>j?_.view=hs(m,j,_.viewFrom).concat(_.view):_.viewFrom<j&&(_.view=_.view.slice(dd(m,j))),_.viewFrom=j,_.viewTo<E?_.view=_.view.concat(hs(m,_.viewTo,E)):_.viewTo>E&&(_.view=_.view.slice(0,dd(m,E)))),_.viewTo=E}function vf(m){for(var j=m.display.view,E=0,_=0;_<j.length;_++){var A=j[_];!A.hidden&&(!A.node||A.changes)&&++E}return E}function vo(m){m.display.input.showSelection(m.display.input.prepareSelection())}function ud(m,j){j===void 0&&(j=!0);for(var E=m.doc,_={},A=_.cursors=document.createDocumentFragment(),U=_.selection=document.createDocumentFragment(),te=0;te<E.sel.ranges.length;te++)if(!(!j&&te==E.sel.primIndex)){var oe=E.sel.ranges[te];if(!(oe.from().line>=m.display.viewTo||oe.to().line<m.display.viewFrom)){var fe=oe.empty();(fe||m.options.showCursorWhenSelecting)&&Up(m,oe.head,A),fe||Vp(m,oe,U)}}return _}function Up(m,j,E){var _=fi(m,j,"div",null,null,!m.options.singleCursorHeightPerLine),A=E.appendChild(q("div","","CodeMirror-cursor"));if(A.style.left=_.left+"px",A.style.top=_.top+"px",A.style.height=Math.max(0,_.bottom-_.top)*m.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(m.getWrapperElement().className)){var U=yf(m,j,"div",null,null);U.right-U.left>0&&(A.style.width=U.right-U.left+"px")}if(_.other){var te=E.appendChild(q("div","","CodeMirror-cursor CodeMirror-secondarycursor"));te.style.display="",te.style.left=_.other.left+"px",te.style.top=_.other.top+"px",te.style.height=(_.other.bottom-_.other.top)*.85+"px"}}function fd(m,j){return m.top-j.top||m.left-j.left}function Vp(m,j,E){var _=m.display,A=m.doc,U=document.createDocumentFragment(),te=Jo(m.display),oe=te.left,fe=Math.max(_.sizerWidth,rl(m)-_.sizer.offsetLeft)-te.right,Ne=A.direction=="ltr";function qe(Pr,Dr,dn,ln){Dr<0&&(Dr=0),Dr=Math.round(Dr),ln=Math.round(ln),U.appendChild(q("div",null,"CodeMirror-selected","position: absolute; left: "+Pr+`px;
                             top: `+Dr+"px; width: "+(dn??fe-Pr)+`px;
                             height: `+(ln-Dr)+"px"))}function rt(Pr,Dr,dn){var ln=ke(A,Pr),Mn=ln.text.length,ys,Ln;function pa(ia,Sa){return yf(m,He(Pr,ia),"div",ln,Sa)}function Go(ia,Sa,qa){var Ia=Bp(m,ln,null,ia),la=Sa=="ltr"==(qa=="after")?"left":"right",xs=qa=="after"?Ia.begin:Ia.end-(/\s/.test(ln.text.charAt(Ia.end-1))?2:1);return pa(xs,la)[la]}var jo=le(ln,A.direction);return We(jo,Dr||0,dn??Mn,function(ia,Sa,qa,Ia){var la=qa=="ltr",xs=pa(ia,la?"left":"right"),Co=pa(Sa-1,la?"right":"left"),Ic=Dr==null&&ia==0,Gl=dn==null&&Sa==Mn,Ga=Ia==0,xi=!jo||Ia==jo.length-1;if(Co.top-xs.top<=3){var Na=(Ne?Ic:Gl)&&Ga,dh=(Ne?Gl:Ic)&&xi,co=Na?oe:(la?xs:Co).left,ea=dh?fe:(la?Co:xs).right;qe(co,xs.top,ea-co,xs.bottom)}else{var Kl,uo,wa,Tg;la?(Kl=Ne&&Ic&&Ga?oe:xs.left,uo=Ne?fe:Go(ia,qa,"before"),wa=Ne?oe:Go(Sa,qa,"after"),Tg=Ne&&Gl&&xi?fe:Co.right):(Kl=Ne?Go(ia,qa,"before"):oe,uo=!Ne&&Ic&&Ga?fe:xs.right,wa=!Ne&&Gl&&xi?oe:Co.left,Tg=Ne?Go(Sa,qa,"after"):fe),qe(Kl,xs.top,uo-Kl,xs.bottom),xs.bottom<Co.top&&qe(oe,xs.bottom,null,Co.top),qe(wa,Co.top,Tg-wa,Co.bottom)}(!ys||fd(xs,ys)<0)&&(ys=xs),fd(Co,ys)<0&&(ys=Co),(!Ln||fd(xs,Ln)<0)&&(Ln=xs),fd(Co,Ln)<0&&(Ln=Co)}),{start:ys,end:Ln}}var St=j.from(),yt=j.to();if(St.line==yt.line)rt(St.line,St.ch,yt.ch);else{var Wt=ke(A,St.line),ir=ke(A,yt.line),hr=Ie(Wt)==Ie(ir),Tr=rt(St.line,St.ch,hr?Wt.text.length+1:null).end,$r=rt(yt.line,hr?0:null,yt.ch).start;hr&&(Tr.top<$r.top-2?(qe(Tr.right,Tr.top,null,Tr.bottom),qe(oe,$r.top,$r.left,$r.bottom)):qe(Tr.right,Tr.top,$r.left-Tr.right,Tr.bottom)),Tr.bottom<$r.top&&qe(oe,Tr.bottom,null,$r.top)}E.appendChild(U)}function bf(m){if(m.state.focused){var j=m.display;clearInterval(j.blinker);var E=!0;j.cursorDiv.style.visibility="",m.options.cursorBlinkRate>0?j.blinker=setInterval(function(){m.hasFocus()||Bi(m),j.cursorDiv.style.visibility=(E=!E)?"":"hidden"},m.options.cursorBlinkRate):m.options.cursorBlinkRate<0&&(j.cursorDiv.style.visibility="hidden")}}function bc(m){m.hasFocus()||(m.display.input.focus(),m.state.focused||du(m))}function Hp(m){m.state.delayingBlurEvent=!0,setTimeout(function(){m.state.delayingBlurEvent&&(m.state.delayingBlurEvent=!1,m.state.focused&&Bi(m))},100)}function du(m,j){m.state.delayingBlurEvent&&!m.state.draggingText&&(m.state.delayingBlurEvent=!1),m.options.readOnly!="nocursor"&&(m.state.focused||(dt(m,"focus",m,j),m.state.focused=!0,se(m.display.wrapper,"CodeMirror-focused"),!m.curOp&&m.display.selForContextMenu!=m.doc.sel&&(m.display.input.reset(),d&&setTimeout(function(){return m.display.input.reset(!0)},20)),m.display.input.receivedFocus()),bf(m))}function Bi(m,j){m.state.delayingBlurEvent||(m.state.focused&&(dt(m,"blur",m,j),m.state.focused=!1,z(m.display.wrapper,"CodeMirror-focused")),clearInterval(m.display.blinker),setTimeout(function(){m.state.focused||(m.display.shift=!1)},150))}function Wp(m){for(var j=m.display,E=j.lineDiv.offsetTop,_=Math.max(0,j.scroller.getBoundingClientRect().top),A=j.lineDiv.getBoundingClientRect().top,U=0,te=0;te<j.view.length;te++){var oe=j.view[te],fe=m.options.lineWrapping,Ne=void 0,qe=0;if(!oe.hidden){if(A+=oe.line.height,l&&c<8){var rt=oe.node.offsetTop+oe.node.offsetHeight;Ne=rt-E,E=rt}else{var St=oe.node.getBoundingClientRect();Ne=St.bottom-St.top,!fe&&oe.text.firstChild&&(qe=oe.text.firstChild.getBoundingClientRect().right-St.left-1)}var yt=oe.line.height-Ne;if((yt>.005||yt<-.005)&&(A<_&&(U-=yt),st(oe.line,Ne),Wo(oe.line),oe.rest))for(var Wt=0;Wt<oe.rest.length;Wt++)Wo(oe.rest[Wt]);if(qe>m.display.sizerWidth){var ir=Math.ceil(qe/ld(m.display));ir>m.display.maxLineLength&&(m.display.maxLineLength=ir,m.display.maxLine=oe.line,m.display.maxLineChanged=!0)}}}Math.abs(U)>2&&(j.scroller.scrollTop+=U)}function Wo(m){if(m.widgets)for(var j=0;j<m.widgets.length;++j){var E=m.widgets[j],_=E.node.parentNode;_&&(E.height=_.offsetHeight)}}function uu(m,j,E){var _=E&&E.top!=null?Math.max(0,E.top):m.scroller.scrollTop;_=Math.floor(_-ns(m));var A=E&&E.bottom!=null?E.bottom:_+m.wrapper.clientHeight,U=Xe(j,_),te=Xe(j,A);if(E&&E.ensure){var oe=E.ensure.from.line,fe=E.ensure.to.line;oe<U?(U=oe,te=Xe(j,Ft(ke(j,oe))+m.wrapper.clientHeight)):Math.min(fe,j.lastLine())>=te&&(U=Xe(j,Ft(ke(j,fe))-m.wrapper.clientHeight),te=fe)}return{from:U,to:Math.max(te,U+1)}}function Dl(m,j){if(!Ke(m,"scrollCursorIntoView")){var E=m.display,_=E.sizer.getBoundingClientRect(),A=null;if(j.top+_.top<0?A=!0:j.bottom+_.top>(window.innerHeight||document.documentElement.clientHeight)&&(A=!1),A!=null&&!v){var U=q("div","",null,`position: absolute;
                         top: `+(j.top-E.viewOffset-ns(m.display))+`px;
                         height: `+(j.bottom-j.top+Xa(m)+E.barHeight)+`px;
                         left: `+j.left+"px; width: "+Math.max(2,j.right-j.left)+"px;");m.display.lineSpace.appendChild(U),U.scrollIntoView(A),m.display.lineSpace.removeChild(U)}}}function Zx(m,j,E,_){_==null&&(_=0);var A;!m.options.lineWrapping&&j==E&&(E=j.sticky=="before"?He(j.line,j.ch+1,"before"):j,j=j.ch?He(j.line,j.sticky=="before"?j.ch-1:j.ch,"after"):j);for(var U=0;U<5;U++){var te=!1,oe=fi(m,j),fe=!E||E==j?oe:fi(m,E);A={left:Math.min(oe.left,fe.left),top:Math.min(oe.top,fe.top)-_,right:Math.max(oe.left,fe.left),bottom:Math.max(oe.bottom,fe.bottom)+_};var Ne=Ll(m,A),qe=m.doc.scrollTop,rt=m.doc.scrollLeft;if(Ne.scrollTop!=null&&(nl(m,Ne.scrollTop),Math.abs(m.doc.scrollTop-qe)>1&&(te=!0)),Ne.scrollLeft!=null&&(zi(m,Ne.scrollLeft),Math.abs(m.doc.scrollLeft-rt)>1&&(te=!0)),!te)break}return A}function qp(m,j){var E=Ll(m,j);E.scrollTop!=null&&nl(m,E.scrollTop),E.scrollLeft!=null&&zi(m,E.scrollLeft)}function Ll(m,j){var E=m.display,_=vc(m.display);j.top<0&&(j.top=0);var A=m.curOp&&m.curOp.scrollTop!=null?m.curOp.scrollTop:E.scroller.scrollTop,U=ye(m),te={};j.bottom-j.top>U&&(j.bottom=j.top+U);var oe=m.doc.height+$s(E),fe=j.top<_,Ne=j.bottom>oe-_;if(j.top<A)te.scrollTop=fe?0:j.top;else if(j.bottom>A+U){var qe=Math.min(j.top,(Ne?oe:j.bottom)-U);qe!=A&&(te.scrollTop=qe)}var rt=m.options.fixedGutter?0:E.gutters.offsetWidth,St=m.curOp&&m.curOp.scrollLeft!=null?m.curOp.scrollLeft:E.scroller.scrollLeft-rt,yt=rl(m)-E.gutters.offsetWidth,Wt=j.right-j.left>yt;return Wt&&(j.right=j.left+yt),j.left<10?te.scrollLeft=0:j.left<St?te.scrollLeft=Math.max(0,j.left+rt-(Wt?0:10)):j.right>yt+St-3&&(te.scrollLeft=j.right+(Wt?0:10)-yt),te}function wf(m,j){j!=null&&(Po(m),m.curOp.scrollTop=(m.curOp.scrollTop==null?m.doc.scrollTop:m.curOp.scrollTop)+j)}function pd(m){Po(m);var j=m.getCursor();m.curOp.scrollToPos={from:j,to:j,margin:m.options.cursorScrollMargin}}function hd(m,j,E){(j!=null||E!=null)&&Po(m),j!=null&&(m.curOp.scrollLeft=j),E!=null&&(m.curOp.scrollTop=E)}function Xx(m,j){Po(m),m.curOp.scrollToPos=j}function Po(m){var j=m.curOp.scrollToPos;if(j){m.curOp.scrollToPos=null;var E=zm(m,j.from),_=zm(m,j.to);md(m,E,_,j.margin)}}function md(m,j,E,_){var A=Ll(m,{left:Math.min(j.left,E.left),top:Math.min(j.top,E.top)-_,right:Math.max(j.right,E.right),bottom:Math.max(j.bottom,E.bottom)+_});hd(m,A.scrollLeft,A.scrollTop)}function nl(m,j){Math.abs(m.doc.scrollTop-j)<2||(t||Cf(m,{top:j}),jf(m,j,!0),t&&Cf(m),Ui(m,100))}function jf(m,j,E){j=Math.max(0,Math.min(m.display.scroller.scrollHeight-m.display.scroller.clientHeight,j)),!(m.display.scroller.scrollTop==j&&!E)&&(m.doc.scrollTop=j,m.display.scrollbars.setScrollTop(j),m.display.scroller.scrollTop!=j&&(m.display.scroller.scrollTop=j))}function zi(m,j,E,_){j=Math.max(0,Math.min(j,m.display.scroller.scrollWidth-m.display.scroller.clientWidth)),!((E?j==m.doc.scrollLeft:Math.abs(m.doc.scrollLeft-j)<2)&&!_)&&(m.doc.scrollLeft=j,Nc(m),m.display.scroller.scrollLeft!=j&&(m.display.scroller.scrollLeft=j),m.display.scrollbars.setScrollLeft(j))}function bo(m){var j=m.display,E=j.gutters.offsetWidth,_=Math.round(m.doc.height+$s(m.display));return{clientHeight:j.scroller.clientHeight,viewHeight:j.wrapper.clientHeight,scrollWidth:j.scroller.scrollWidth,clientWidth:j.scroller.clientWidth,viewWidth:j.wrapper.clientWidth,barLeft:m.options.fixedGutter?E:0,docHeight:_,scrollHeight:_+Xa(m)+j.barHeight,nativeBarWidth:j.nativeBarWidth,gutterWidth:E}}var Ja=function(m,j,E){this.cm=E;var _=this.vert=q("div",[q("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),A=this.horiz=q("div",[q("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");_.tabIndex=A.tabIndex=-1,m(_),m(A),De(_,"scroll",function(){_.clientHeight&&j(_.scrollTop,"vertical")}),De(A,"scroll",function(){A.clientWidth&&j(A.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,l&&c<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Ja.prototype.update=function(m){var j=m.scrollWidth>m.clientWidth+1,E=m.scrollHeight>m.clientHeight+1,_=m.nativeBarWidth;if(E){this.vert.style.display="block",this.vert.style.bottom=j?_+"px":"0";var A=m.viewHeight-(j?_:0);this.vert.firstChild.style.height=Math.max(0,m.scrollHeight-m.clientHeight+A)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(j){this.horiz.style.display="block",this.horiz.style.right=E?_+"px":"0",this.horiz.style.left=m.barLeft+"px";var U=m.viewWidth-m.barLeft-(E?_:0);this.horiz.firstChild.style.width=Math.max(0,m.scrollWidth-m.clientWidth+U)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&m.clientHeight>0&&(_==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:E?_:0,bottom:j?_:0}},Ja.prototype.setScrollLeft=function(m){this.horiz.scrollLeft!=m&&(this.horiz.scrollLeft=m),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Ja.prototype.setScrollTop=function(m){this.vert.scrollTop!=m&&(this.vert.scrollTop=m),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Ja.prototype.zeroWidthHack=function(){var m=N&&!b?"12px":"18px";this.horiz.style.height=this.vert.style.width=m,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new ae,this.disableVert=new ae},Ja.prototype.enableZeroWidthBar=function(m,j,E){m.style.pointerEvents="auto";function _(){var A=m.getBoundingClientRect(),U=E=="vert"?document.elementFromPoint(A.right-1,(A.top+A.bottom)/2):document.elementFromPoint((A.right+A.left)/2,A.bottom-1);U!=m?m.style.pointerEvents="none":j.set(1e3,_)}j.set(1e3,_)},Ja.prototype.clear=function(){var m=this.horiz.parentNode;m.removeChild(this.horiz),m.removeChild(this.vert)};var hi=function(){};hi.prototype.update=function(){return{bottom:0,right:0}},hi.prototype.setScrollLeft=function(){},hi.prototype.setScrollTop=function(){},hi.prototype.clear=function(){};function Ao(m,j){j||(j=bo(m));var E=m.display.barWidth,_=m.display.barHeight;$i(m,j);for(var A=0;A<4&&E!=m.display.barWidth||_!=m.display.barHeight;A++)E!=m.display.barWidth&&m.options.lineWrapping&&Wp(m),$i(m,bo(m)),E=m.display.barWidth,_=m.display.barHeight}function $i(m,j){var E=m.display,_=E.scrollbars.update(j);E.sizer.style.paddingRight=(E.barWidth=_.right)+"px",E.sizer.style.paddingBottom=(E.barHeight=_.bottom)+"px",E.heightForcer.style.borderBottom=_.bottom+"px solid transparent",_.right&&_.bottom?(E.scrollbarFiller.style.display="block",E.scrollbarFiller.style.height=_.bottom+"px",E.scrollbarFiller.style.width=_.right+"px"):E.scrollbarFiller.style.display="",_.bottom&&m.options.coverGutterNextToScrollbar&&m.options.fixedGutter?(E.gutterFiller.style.display="block",E.gutterFiller.style.height=_.bottom+"px",E.gutterFiller.style.width=j.gutterWidth+"px"):E.gutterFiller.style.display=""}var sl={native:Ja,null:hi};function Hm(m){m.display.scrollbars&&(m.display.scrollbars.clear(),m.display.scrollbars.addClass&&z(m.display.wrapper,m.display.scrollbars.addClass)),m.display.scrollbars=new sl[m.options.scrollbarStyle](function(j){m.display.wrapper.insertBefore(j,m.display.scrollbarFiller),De(j,"mousedown",function(){m.state.focused&&setTimeout(function(){return m.display.input.focus()},0)}),j.setAttribute("cm-not-content","true")},function(j,E){E=="horizontal"?zi(m,j):nl(m,j)},m),m.display.scrollbars.addClass&&se(m.display.wrapper,m.display.scrollbars.addClass)}var Wm=0;function Fl(m){m.curOp={cm:m,viewChanged:!1,startHeight:m.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Wm,markArrays:null},rs(m.curOp)}function wc(m){var j=m.curOp;j&&Uo(j,function(E){for(var _=0;_<E.ops.length;_++)E.ops[_].cm.curOp=null;ao(E)})}function ao(m){for(var j=m.ops,E=0;E<j.length;E++)oa(j[E]);for(var _=0;_<j.length;_++)ss(j[_]);for(var A=0;A<j.length;A++)jc(j[A]);for(var U=0;U<j.length;U++)mi(j[U]);for(var te=0;te<j.length;te++)qm(j[te])}function oa(m){var j=m.cm,E=j.display;Km(j),m.updateMaxLine&&Rt(j),m.mustUpdate=m.viewChanged||m.forceUpdate||m.scrollTop!=null||m.scrollToPos&&(m.scrollToPos.from.line<E.viewFrom||m.scrollToPos.to.line>=E.viewTo)||E.maxLineChanged&&j.options.lineWrapping,m.update=m.mustUpdate&&new Cc(j,m.mustUpdate&&{top:m.scrollTop,ensure:m.scrollToPos},m.forceUpdate)}function ss(m){m.updatedDisplay=m.mustUpdate&&al(m.cm,m.update)}function jc(m){var j=m.cm,E=j.display;m.updatedDisplay&&Wp(j),m.barMeasure=bo(j),E.maxLineChanged&&!j.options.lineWrapping&&(m.adjustWidthTo=Nt(j,E.maxLine,E.maxLine.text.length).left+3,j.display.sizerWidth=m.adjustWidthTo,m.barMeasure.scrollWidth=Math.max(E.scroller.clientWidth,E.sizer.offsetLeft+m.adjustWidthTo+Xa(j)+j.display.barWidth),m.maxScrollLeft=Math.max(0,E.sizer.offsetLeft+m.adjustWidthTo-rl(j))),(m.updatedDisplay||m.selectionChanged)&&(m.preparedSelection=E.input.prepareSelection())}function mi(m){var j=m.cm;m.adjustWidthTo!=null&&(j.display.sizer.style.minWidth=m.adjustWidthTo+"px",m.maxScrollLeft<j.doc.scrollLeft&&zi(j,Math.min(j.display.scroller.scrollLeft,m.maxScrollLeft),!0),j.display.maxLineChanged=!1);var E=m.focus&&m.focus==X();m.preparedSelection&&j.display.input.showSelection(m.preparedSelection,E),(m.updatedDisplay||m.startHeight!=j.doc.height)&&Ao(j,m.barMeasure),m.updatedDisplay&&fu(j,m.barMeasure),m.selectionChanged&&bf(j),j.state.focused&&m.updateInput&&j.display.input.reset(m.typing),E&&bc(m.cm)}function qm(m){var j=m.cm,E=j.display,_=j.doc;if(m.updatedDisplay&&ol(j,m.update),E.wheelStartX!=null&&(m.scrollTop!=null||m.scrollLeft!=null||m.scrollToPos)&&(E.wheelStartX=E.wheelStartY=null),m.scrollTop!=null&&jf(j,m.scrollTop,m.forceScroll),m.scrollLeft!=null&&zi(j,m.scrollLeft,!0,!0),m.scrollToPos){var A=Zx(j,Lt(_,m.scrollToPos.from),Lt(_,m.scrollToPos.to),m.scrollToPos.margin);Dl(j,A)}var U=m.maybeHiddenMarkers,te=m.maybeUnhiddenMarkers;if(U)for(var oe=0;oe<U.length;++oe)U[oe].lines.length||dt(U[oe],"hide");if(te)for(var fe=0;fe<te.length;++fe)te[fe].lines.length&&dt(te[fe],"unhide");E.wrapper.offsetHeight&&(_.scrollTop=j.display.scroller.scrollTop),m.changeObjs&&dt(j,"changes",j,m.changeObjs),m.update&&m.update.finish()}function Pa(m,j){if(m.curOp)return j();Fl(m);try{return j()}finally{wc(m)}}function La(m,j){return function(){if(m.curOp)return j.apply(m,arguments);Fl(m);try{return j.apply(m,arguments)}finally{wc(m)}}}function oo(m){return function(){if(this.curOp)return m.apply(this,arguments);Fl(this);try{return m.apply(this,arguments)}finally{wc(this)}}}function ua(m){return function(){var j=this.cm;if(!j||j.curOp)return m.apply(this,arguments);Fl(j);try{return m.apply(this,arguments)}finally{wc(j)}}}function Ui(m,j){m.doc.highlightFrontier<m.display.viewTo&&m.state.highlight.set(j,K(Gm,m))}function Gm(m){var j=m.doc;if(!(j.highlightFrontier>=m.display.viewTo)){var E=+new Date+m.options.workTime,_=Xn(m,j.highlightFrontier),A=[];j.iter(_.line,Math.min(j.first+j.size,m.display.viewTo+500),function(U){if(_.line>=m.display.viewFrom){var te=U.styles,oe=U.text.length>m.options.maxHighlightLength?wn(j.mode,_.state):null,fe=Zr(m,U,_,!0);oe&&(_.state=oe),U.styles=fe.styles;var Ne=U.styleClasses,qe=fe.classes;qe?U.styleClasses=qe:Ne&&(U.styleClasses=null);for(var rt=!te||te.length!=U.styles.length||Ne!=qe&&(!Ne||!qe||Ne.bgClass!=qe.bgClass||Ne.textClass!=qe.textClass),St=0;!rt&&St<te.length;++St)rt=te[St]!=U.styles[St];rt&&A.push(_.line),U.stateAfter=_.save(),_.nextLine()}else U.text.length<=m.options.maxHighlightLength&&ds(m,U.text,_),U.stateAfter=_.line%5==0?_.save():null,_.nextLine();if(+new Date>E)return Ui(m,m.options.workDelay),!0}),j.highlightFrontier=_.line,j.modeFrontier=Math.max(j.modeFrontier,_.line),A.length&&Pa(m,function(){for(var U=0;U<A.length;U++)Il(m,A[U],"text")})}}var Cc=function(m,j,E){var _=m.display;this.viewport=j,this.visible=uu(_,m.doc,j),this.editorIsHidden=!_.wrapper.offsetWidth,this.wrapperHeight=_.wrapper.clientHeight,this.wrapperWidth=_.wrapper.clientWidth,this.oldDisplayWidth=rl(m),this.force=E,this.dims=Ml(m),this.events=[]};Cc.prototype.signal=function(m,j){At(m,j)&&this.events.push(arguments)},Cc.prototype.finish=function(){for(var m=0;m<this.events.length;m++)dt.apply(null,this.events[m])};function Km(m){var j=m.display;!j.scrollbarsClipped&&j.scroller.offsetWidth&&(j.nativeBarWidth=j.scroller.offsetWidth-j.scroller.clientWidth,j.heightForcer.style.height=Xa(m)+"px",j.sizer.style.marginBottom=-j.nativeBarWidth+"px",j.sizer.style.borderRightWidth=Xa(m)+"px",j.scrollbarsClipped=!0)}function gd(m){if(m.hasFocus())return null;var j=X();if(!j||!D(m.display.lineDiv,j))return null;var E={activeElt:j};if(window.getSelection){var _=window.getSelection();_.anchorNode&&_.extend&&D(m.display.lineDiv,_.anchorNode)&&(E.anchorNode=_.anchorNode,E.anchorOffset=_.anchorOffset,E.focusNode=_.focusNode,E.focusOffset=_.focusOffset)}return E}function Bl(m){if(!(!m||!m.activeElt||m.activeElt==X())&&(m.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(m.activeElt.nodeName)&&m.anchorNode&&D(document.body,m.anchorNode)&&D(document.body,m.focusNode))){var j=window.getSelection(),E=document.createRange();E.setEnd(m.anchorNode,m.anchorOffset),E.collapse(!1),j.removeAllRanges(),j.addRange(E),j.extend(m.focusNode,m.focusOffset)}}function al(m,j){var E=m.display,_=m.doc;if(j.editorIsHidden)return Rl(m),!1;if(!j.force&&j.visible.from>=E.viewFrom&&j.visible.to<=E.viewTo&&(E.updateLineNumbers==null||E.updateLineNumbers>=E.viewTo)&&E.renderedView==E.view&&vf(m)==0)return!1;eo(m)&&(Rl(m),j.dims=Ml(m));var A=_.first+_.size,U=Math.max(j.visible.from-m.options.viewportMargin,_.first),te=Math.min(A,j.visible.to+m.options.viewportMargin);E.viewFrom<U&&U-E.viewFrom<20&&(U=Math.max(_.first,E.viewFrom)),E.viewTo>te&&E.viewTo-te<20&&(te=Math.min(A,E.viewTo)),Mr&&(U=Mt(m.doc,U),te=Pt(m.doc,te));var oe=U!=E.viewFrom||te!=E.viewTo||E.lastWrapHeight!=j.wrapperHeight||E.lastWrapWidth!=j.wrapperWidth;Fi(m,U,te),E.viewOffset=Ft(ke(m.doc,E.viewFrom)),m.display.mover.style.top=E.viewOffset+"px";var fe=vf(m);if(!oe&&fe==0&&!j.force&&E.renderedView==E.view&&(E.updateLineNumbers==null||E.updateLineNumbers>=E.viewTo))return!1;var Ne=gd(m);return fe>4&&(E.lineDiv.style.display="none"),Ym(m,E.updateLineNumbers,j.dims),fe>4&&(E.lineDiv.style.display=""),E.renderedView=E.view,Bl(Ne),Y(E.cursorDiv),Y(E.selectionDiv),E.gutters.style.height=E.sizer.style.minHeight=0,oe&&(E.lastWrapHeight=j.wrapperHeight,E.lastWrapWidth=j.wrapperWidth,Ui(m,400)),E.updateLineNumbers=null,!0}function ol(m,j){for(var E=j.viewport,_=!0;;_=!1){if(!_||!m.options.lineWrapping||j.oldDisplayWidth==rl(m)){if(E&&E.top!=null&&(E={top:Math.min(m.doc.height+$s(m.display)-ye(m),E.top)}),j.visible=uu(m.display,m.doc,E),j.visible.from>=m.display.viewFrom&&j.visible.to<=m.display.viewTo)break}else _&&(j.visible=uu(m.display,m.doc,E));if(!al(m,j))break;Wp(m);var A=bo(m);vo(m),Ao(m,A),fu(m,A),j.force=!1}j.signal(m,"update",m),(m.display.viewFrom!=m.display.reportedViewFrom||m.display.viewTo!=m.display.reportedViewTo)&&(j.signal(m,"viewportChange",m,m.display.viewFrom,m.display.viewTo),m.display.reportedViewFrom=m.display.viewFrom,m.display.reportedViewTo=m.display.viewTo)}function Cf(m,j){var E=new Cc(m,j);if(al(m,E)){Wp(m),ol(m,E);var _=bo(m);vo(m),Ao(m,_),fu(m,_),E.finish()}}function Ym(m,j,E){var _=m.display,A=m.options.lineNumbers,U=_.lineDiv,te=U.firstChild;function oe(Wt){var ir=Wt.nextSibling;return d&&N&&m.display.currentWheelTarget==Wt?Wt.style.display="none":Wt.parentNode.removeChild(Wt),ir}for(var fe=_.view,Ne=_.viewFrom,qe=0;qe<fe.length;qe++){var rt=fe[qe];if(!rt.hidden)if(!rt.node||rt.node.parentNode!=U){var St=qt(m,rt,Ne,E);U.insertBefore(St,te)}else{for(;te!=rt.node;)te=oe(te);var yt=A&&j!=null&&j<=Ne&&rt.lineNumber;rt.changes&&(Se(rt.changes,"gutter")>-1&&(yt=!1),ui(m,rt,Ne,E)),yt&&(Y(rt.lineNumber),rt.lineNumber.appendChild(document.createTextNode(je(m.options,Ne)))),te=rt.node.nextSibling}Ne+=rt.size}for(;te;)te=oe(te)}function Sc(m){var j=m.gutters.offsetWidth;m.sizer.style.marginLeft=j+"px",Ds(m,"gutterChanged",m)}function fu(m,j){m.display.sizer.style.minHeight=j.docHeight+"px",m.display.heightForcer.style.top=j.docHeight+"px",m.display.gutters.style.height=j.docHeight+m.display.barHeight+Xa(m)+"px"}function Nc(m){var j=m.display,E=j.view;if(!(!j.alignWidgets&&(!j.gutters.firstChild||!m.options.fixedGutter))){for(var _=zp(j)-j.scroller.scrollLeft+m.doc.scrollLeft,A=j.gutters.offsetWidth,U=_+"px",te=0;te<E.length;te++)if(!E[te].hidden){m.options.fixedGutter&&(E[te].gutter&&(E[te].gutter.style.left=U),E[te].gutterBackground&&(E[te].gutterBackground.style.left=U));var oe=E[te].alignable;if(oe)for(var fe=0;fe<oe.length;fe++)oe[fe].style.left=U}m.options.fixedGutter&&(j.gutters.style.left=_+A+"px")}}function eo(m){if(!m.options.lineNumbers)return!1;var j=m.doc,E=je(m.options,j.first+j.size-1),_=m.display;if(E.length!=_.lineNumChars){var A=_.measure.appendChild(q("div",[q("div",E)],"CodeMirror-linenumber CodeMirror-gutter-elt")),U=A.firstChild.offsetWidth,te=A.offsetWidth-U;return _.lineGutter.style.width="",_.lineNumInnerWidth=Math.max(U,_.lineGutter.offsetWidth-te)+1,_.lineNumWidth=_.lineNumInnerWidth+te,_.lineNumChars=_.lineNumInnerWidth?E.length:-1,_.lineGutter.style.width=_.lineNumWidth+"px",Sc(m.display),!0}return!1}function pu(m,j){for(var E=[],_=!1,A=0;A<m.length;A++){var U=m[A],te=null;if(typeof U!="string"&&(te=U.style,U=U.className),U=="CodeMirror-linenumbers")if(j)_=!0;else continue;E.push({className:U,style:te})}return j&&!_&&E.push({className:"CodeMirror-linenumbers",style:null}),E}function Zm(m){var j=m.gutters,E=m.gutterSpecs;Y(j),m.lineGutter=null;for(var _=0;_<E.length;++_){var A=E[_],U=A.className,te=A.style,oe=j.appendChild(q("div",null,"CodeMirror-gutter "+U));te&&(oe.style.cssText=te),U=="CodeMirror-linenumbers"&&(m.lineGutter=oe,oe.style.width=(m.lineNumWidth||1)+"px")}j.style.display=E.length?"":"none",Sc(m)}function Sf(m){Zm(m.display),Oo(m),Nc(m)}function qj(m,j,E,_){var A=this;this.input=E,A.scrollbarFiller=q("div",null,"CodeMirror-scrollbar-filler"),A.scrollbarFiller.setAttribute("cm-not-content","true"),A.gutterFiller=q("div",null,"CodeMirror-gutter-filler"),A.gutterFiller.setAttribute("cm-not-content","true"),A.lineDiv=P("div",null,"CodeMirror-code"),A.selectionDiv=q("div",null,null,"position: relative; z-index: 1"),A.cursorDiv=q("div",null,"CodeMirror-cursors"),A.measure=q("div",null,"CodeMirror-measure"),A.lineMeasure=q("div",null,"CodeMirror-measure"),A.lineSpace=P("div",[A.measure,A.lineMeasure,A.selectionDiv,A.cursorDiv,A.lineDiv],null,"position: relative; outline: none");var U=P("div",[A.lineSpace],"CodeMirror-lines");A.mover=q("div",[U],null,"position: relative"),A.sizer=q("div",[A.mover],"CodeMirror-sizer"),A.sizerWidth=null,A.heightForcer=q("div",null,null,"position: absolute; height: "+Pe+"px; width: 1px;"),A.gutters=q("div",null,"CodeMirror-gutters"),A.lineGutter=null,A.scroller=q("div",[A.sizer,A.heightForcer,A.gutters],"CodeMirror-scroll"),A.scroller.setAttribute("tabIndex","-1"),A.wrapper=q("div",[A.scrollbarFiller,A.gutterFiller,A.scroller],"CodeMirror"),A.wrapper.setAttribute("translate","no"),l&&c<8&&(A.gutters.style.zIndex=-1,A.scroller.style.paddingRight=0),!d&&!(t&&k)&&(A.scroller.draggable=!0),m&&(m.appendChild?m.appendChild(A.wrapper):m(A.wrapper)),A.viewFrom=A.viewTo=j.first,A.reportedViewFrom=A.reportedViewTo=j.first,A.view=[],A.renderedView=null,A.externalMeasured=null,A.viewOffset=0,A.lastWrapHeight=A.lastWrapWidth=0,A.updateLineNumbers=null,A.nativeBarWidth=A.barHeight=A.barWidth=0,A.scrollbarsClipped=!1,A.lineNumWidth=A.lineNumInnerWidth=A.lineNumChars=null,A.alignWidgets=!1,A.cachedCharWidth=A.cachedTextHeight=A.cachedPaddingH=null,A.maxLine=null,A.maxLineLength=0,A.maxLineChanged=!1,A.wheelDX=A.wheelDY=A.wheelStartX=A.wheelStartY=null,A.shift=!1,A.selForContextMenu=null,A.activeTouch=null,A.gutterSpecs=pu(_.gutters,_.lineNumbers),Zm(A),E.init(A)}var Gp=0,ms=null;l?ms=-.53:t?ms=15:h?ms=-.7:y&&(ms=-1/3);function Kp(m){var j=m.wheelDeltaX,E=m.wheelDeltaY;return j==null&&m.detail&&m.axis==m.HORIZONTAL_AXIS&&(j=m.detail),E==null&&m.detail&&m.axis==m.VERTICAL_AXIS?E=m.detail:E==null&&(E=m.wheelDelta),{x:j,y:E}}function Nf(m){var j=Kp(m);return j.x*=ms,j.y*=ms,j}function hu(m,j){var E=Kp(j),_=E.x,A=E.y,U=m.display,te=U.scroller,oe=te.scrollWidth>te.clientWidth,fe=te.scrollHeight>te.clientHeight;if(_&&oe||A&&fe){if(A&&N&&d){e:for(var Ne=j.target,qe=U.view;Ne!=te;Ne=Ne.parentNode)for(var rt=0;rt<qe.length;rt++)if(qe[rt].node==Ne){m.display.currentWheelTarget=Ne;break e}}if(_&&!t&&!g&&ms!=null){A&&fe&&nl(m,Math.max(0,te.scrollTop+A*ms)),zi(m,Math.max(0,te.scrollLeft+_*ms)),(!A||A&&fe)&&Xt(j),U.wheelStartX=null;return}if(A&&ms!=null){var St=A*ms,yt=m.doc.scrollTop,Wt=yt+U.wrapper.clientHeight;St<0?yt=Math.max(0,yt+St-50):Wt=Math.min(m.doc.height,Wt+St+50),Cf(m,{top:yt,bottom:Wt})}Gp<20&&(U.wheelStartX==null?(U.wheelStartX=te.scrollLeft,U.wheelStartY=te.scrollTop,U.wheelDX=_,U.wheelDY=A,setTimeout(function(){if(U.wheelStartX!=null){var ir=te.scrollLeft-U.wheelStartX,hr=te.scrollTop-U.wheelStartY,Tr=hr&&U.wheelDY&&hr/U.wheelDY||ir&&U.wheelDX&&ir/U.wheelDX;U.wheelStartX=U.wheelStartY=null,Tr&&(ms=(ms*Gp+Tr)/(Gp+1),++Gp)}},200)):(U.wheelDX+=_,U.wheelDY+=A))}}var Mo=function(m,j){this.ranges=m,this.primIndex=j};Mo.prototype.primary=function(){return this.ranges[this.primIndex]},Mo.prototype.equals=function(m){if(m==this)return!0;if(m.primIndex!=this.primIndex||m.ranges.length!=this.ranges.length)return!1;for(var j=0;j<this.ranges.length;j++){var E=this.ranges[j],_=m.ranges[j];if(!Ot(E.anchor,_.anchor)||!Ot(E.head,_.head))return!1}return!0},Mo.prototype.deepCopy=function(){for(var m=[],j=0;j<this.ranges.length;j++)m[j]=new Qn(ce(this.ranges[j].anchor),ce(this.ranges[j].head));return new Mo(m,this.primIndex)},Mo.prototype.somethingSelected=function(){for(var m=0;m<this.ranges.length;m++)if(!this.ranges[m].empty())return!0;return!1},Mo.prototype.contains=function(m,j){j||(j=m);for(var E=0;E<this.ranges.length;E++){var _=this.ranges[E];if(at(j,_.from())>=0&&at(m,_.to())<=0)return E}return-1};var Qn=function(m,j){this.anchor=m,this.head=j};Qn.prototype.from=function(){return ut(this.anchor,this.head)},Qn.prototype.to=function(){return Te(this.anchor,this.head)},Qn.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function wo(m,j,E){var _=m&&m.options.selectionsMayTouch,A=j[E];j.sort(function(St,yt){return at(St.from(),yt.from())}),E=Se(j,A);for(var U=1;U<j.length;U++){var te=j[U],oe=j[U-1],fe=at(oe.to(),te.from());if(_&&!te.empty()?fe>0:fe>=0){var Ne=ut(oe.from(),te.from()),qe=Te(oe.to(),te.to()),rt=oe.empty()?te.from()==te.head:oe.from()==oe.head;U<=E&&--E,j.splice(--U,2,new Qn(rt?qe:Ne,rt?Ne:qe))}}return new Mo(j,E)}function kc(m,j){return new Mo([new Qn(m,j||m)],0)}function zl(m){return m.text?He(m.from.line+m.text.length-1,ee(m.text).length+(m.text.length==1?m.from.ch:0)):m.to}function Qx(m,j){if(at(m,j.from)<0)return m;if(at(m,j.to)<=0)return zl(j);var E=m.line+j.text.length-(j.to.line-j.from.line)-1,_=m.ch;return m.line==j.to.line&&(_+=zl(j).ch-j.to.ch),He(E,_)}function Yp(m,j){for(var E=[],_=0;_<m.sel.ranges.length;_++){var A=m.sel.ranges[_];E.push(new Qn(Qx(A.anchor,j),Qx(A.head,j)))}return wo(m.cm,E,m.sel.primIndex)}function _c(m,j,E){return m.line==j.line?He(E.line,m.ch-j.ch+E.ch):He(E.line+(m.line-j.line),m.ch)}function Xm(m,j,E){for(var _=[],A=He(m.first,0),U=A,te=0;te<j.length;te++){var oe=j[te],fe=_c(oe.from,A,U),Ne=_c(zl(oe),A,U);if(A=oe.to,U=Ne,E=="around"){var qe=m.sel.ranges[te],rt=at(qe.head,qe.anchor)<0;_[te]=new Qn(rt?Ne:fe,rt?fe:Ne)}else _[te]=new Qn(fe,fe)}return new Mo(_,m.sel.primIndex)}function mu(m){m.doc.mode=yr(m.options,m.doc.modeOption),gu(m)}function gu(m){m.doc.iter(function(j){j.stateAfter&&(j.stateAfter=null),j.styles&&(j.styles=null)}),m.doc.modeFrontier=m.doc.highlightFrontier=m.doc.first,Ui(m,100),m.state.modeGen++,m.curOp&&Oo(m)}function yd(m,j){return j.from.ch==0&&j.to.ch==0&&ee(j.text)==""&&(!m.cm||m.cm.options.wholeLineUpdateBefore)}function kf(m,j,E,_){function A($r){return E?E[$r]:null}function U($r,Pr,Dr){Rr($r,Pr,Dr,_),Ds($r,"change",$r,j)}function te($r,Pr){for(var Dr=[],dn=$r;dn<Pr;++dn)Dr.push(new fr(Ne[dn],A(dn),_));return Dr}var oe=j.from,fe=j.to,Ne=j.text,qe=ke(m,oe.line),rt=ke(m,fe.line),St=ee(Ne),yt=A(Ne.length-1),Wt=fe.line-oe.line;if(j.full)m.insert(0,te(0,Ne.length)),m.remove(Ne.length,m.size-Ne.length);else if(yd(m,j)){var ir=te(0,Ne.length-1);U(rt,rt.text,yt),Wt&&m.remove(oe.line,Wt),ir.length&&m.insert(oe.line,ir)}else if(qe==rt)if(Ne.length==1)U(qe,qe.text.slice(0,oe.ch)+St+qe.text.slice(fe.ch),yt);else{var hr=te(1,Ne.length-1);hr.push(new fr(St+qe.text.slice(fe.ch),yt,_)),U(qe,qe.text.slice(0,oe.ch)+Ne[0],A(0)),m.insert(oe.line+1,hr)}else if(Ne.length==1)U(qe,qe.text.slice(0,oe.ch)+Ne[0]+rt.text.slice(fe.ch),A(0)),m.remove(oe.line+1,Wt);else{U(qe,qe.text.slice(0,oe.ch)+Ne[0],A(0)),U(rt,St+rt.text.slice(fe.ch),yt);var Tr=te(1,Ne.length-1);Wt>1&&m.remove(oe.line+1,Wt-1),m.insert(oe.line+1,Tr)}Ds(m,"change",m,j)}function Vi(m,j,E){function _(A,U,te){if(A.linked)for(var oe=0;oe<A.linked.length;++oe){var fe=A.linked[oe];if(fe.doc!=U){var Ne=te&&fe.sharedHist;E&&!Ne||(j(fe.doc,Ne),_(fe.doc,A,Ne))}}}_(m,null,!0)}function _f(m,j){if(j.cm)throw new Error("This document is already in use.");m.doc=j,j.cm=m,$p(m),mu(m),Qm(m),m.options.direction=j.direction,m.options.lineWrapping||Rt(m),m.options.mode=j.modeOption,Oo(m)}function Qm(m){(m.doc.direction=="rtl"?se:z)(m.display.lineDiv,"CodeMirror-rtl")}function Jx(m){Pa(m,function(){Qm(m),Oo(m)})}function il(m){this.done=[],this.undone=[],this.undoDepth=m?m.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=m?m.maxGeneration:1}function $l(m,j){var E={from:ce(j.from),to:zl(j),text:Re(m,j.from,j.to)};return Tf(m,E,j.from.line,j.to.line+1),Vi(m,function(_){return Tf(_,E,j.from.line,j.to.line+1)},!0),E}function Jm(m){for(;m.length;){var j=ee(m);if(j.ranges)m.pop();else break}}function e0(m,j){if(j)return Jm(m.done),ee(m.done);if(m.done.length&&!ee(m.done).ranges)return ee(m.done);if(m.done.length>1&&!m.done[m.done.length-2].ranges)return m.done.pop(),ee(m.done)}function xd(m,j,E,_){var A=m.history;A.undone.length=0;var U=+new Date,te,oe;if((A.lastOp==_||A.lastOrigin==j.origin&&j.origin&&(j.origin.charAt(0)=="+"&&A.lastModTime>U-(m.cm?m.cm.options.historyEventDelay:500)||j.origin.charAt(0)=="*"))&&(te=e0(A,A.lastOp==_)))oe=ee(te.changes),at(j.from,j.to)==0&&at(j.from,oe.to)==0?oe.to=zl(j):te.changes.push($l(m,j));else{var fe=ee(A.done);for((!fe||!fe.ranges)&&Ec(m.sel,A.done),te={changes:[$l(m,j)],generation:A.generation},A.done.push(te);A.done.length>A.undoDepth;)A.done.shift(),A.done[0].ranges||A.done.shift()}A.done.push(E),A.generation=++A.maxGeneration,A.lastModTime=A.lastSelTime=U,A.lastOp=A.lastSelOp=_,A.lastOrigin=A.lastSelOrigin=j.origin,oe||dt(m,"historyAdded")}function Ef(m,j,E,_){var A=j.charAt(0);return A=="*"||A=="+"&&E.ranges.length==_.ranges.length&&E.somethingSelected()==_.somethingSelected()&&new Date-m.history.lastSelTime<=(m.cm?m.cm.options.historyEventDelay:500)}function Zp(m,j,E,_){var A=m.history,U=_&&_.origin;E==A.lastSelOp||U&&A.lastSelOrigin==U&&(A.lastModTime==A.lastSelTime&&A.lastOrigin==U||Ef(m,U,ee(A.done),j))?A.done[A.done.length-1]=j:Ec(j,A.done),A.lastSelTime=+new Date,A.lastSelOrigin=U,A.lastSelOp=E,_&&_.clearRedo!==!1&&Jm(A.undone)}function Ec(m,j){var E=ee(j);E&&E.ranges&&E.equals(m)||j.push(m)}function Tf(m,j,E,_){var A=j["spans_"+m.id],U=0;m.iter(Math.max(m.first,E),Math.min(m.first+m.size,_),function(te){te.markedSpans&&((A||(A=j["spans_"+m.id]={}))[U]=te.markedSpans),++U})}function t0(m){if(!m)return null;for(var j,E=0;E<m.length;++E)m[E].marker.explicitlyCleared?j||(j=m.slice(0,E)):j&&j.push(m[E]);return j?j.length?j:null:m}function vd(m,j){var E=j["spans_"+m.id];if(!E)return null;for(var _=[],A=0;A<j.text.length;++A)_.push(t0(E[A]));return _}function eg(m,j){var E=vd(m,j),_=Vn(m,j);if(!E)return _;if(!_)return E;for(var A=0;A<E.length;++A){var U=E[A],te=_[A];if(U&&te)e:for(var oe=0;oe<te.length;++oe){for(var fe=te[oe],Ne=0;Ne<U.length;++Ne)if(U[Ne].marker==fe.marker)continue e;U.push(fe)}else te&&(E[A]=te)}return E}function ei(m,j,E){for(var _=[],A=0;A<m.length;++A){var U=m[A];if(U.ranges){_.push(E?Mo.prototype.deepCopy.call(U):U);continue}var te=U.changes,oe=[];_.push({changes:oe});for(var fe=0;fe<te.length;++fe){var Ne=te[fe],qe=void 0;if(oe.push({from:Ne.from,to:Ne.to,text:Ne.text}),j)for(var rt in Ne)(qe=rt.match(/^spans_(\d+)$/))&&Se(j,Number(qe[1]))>-1&&(ee(oe)[rt]=Ne[rt],delete Ne[rt])}}return _}function Of(m,j,E,_){if(_){var A=m.anchor;if(E){var U=at(j,A)<0;U!=at(E,A)<0?(A=j,j=E):U!=at(j,E)<0&&(j=E)}return new Qn(A,j)}else return new Qn(E||j,j)}function yu(m,j,E,_,A){A==null&&(A=m.cm&&(m.cm.display.shift||m.extend)),Aa(m,new Mo([Of(m.sel.primary(),j,E,A)],0),_)}function Ul(m,j,E){for(var _=[],A=m.cm&&(m.cm.display.shift||m.extend),U=0;U<m.sel.ranges.length;U++)_[U]=Of(m.sel.ranges[U],j[U],null,A);var te=wo(m.cm,_,m.sel.primIndex);Aa(m,te,E)}function ll(m,j,E,_){var A=m.sel.ranges.slice(0);A[j]=E,Aa(m,wo(m.cm,A,m.sel.primIndex),_)}function xu(m,j,E,_){Aa(m,kc(j,E),_)}function tg(m,j,E){var _={ranges:j.ranges,update:function(A){this.ranges=[];for(var U=0;U<A.length;U++)this.ranges[U]=new Qn(Lt(m,A[U].anchor),Lt(m,A[U].head))},origin:E&&E.origin};return dt(m,"beforeSelectionChange",m,_),m.cm&&dt(m.cm,"beforeSelectionChange",m.cm,_),_.ranges!=j.ranges?wo(m.cm,_.ranges,_.ranges.length-1):j}function Xp(m,j,E){var _=m.history.done,A=ee(_);A&&A.ranges?(_[_.length-1]=j,Tc(m,j,E)):Aa(m,j,E)}function Aa(m,j,E){Tc(m,j,E),Zp(m,m.sel,m.cm?m.cm.curOp.id:NaN,E)}function Tc(m,j,E){(At(m,"beforeSelectionChange")||m.cm&&At(m.cm,"beforeSelectionChange"))&&(j=tg(m,j,E));var _=E&&E.bias||(at(j.primary().head,m.sel.primary().head)<0?-1:1);rg(m,bd(m,j,_,!0)),!(E&&E.scroll===!1)&&m.cm&&m.cm.getOption("readOnly")!="nocursor"&&pd(m.cm)}function rg(m,j){j.equals(m.sel)||(m.sel=j,m.cm&&(m.cm.curOp.updateInput=1,m.cm.curOp.selectionChanged=!0,kt(m.cm)),Ds(m,"cursorActivity",m))}function ng(m){rg(m,bd(m,m.sel,null,!1))}function bd(m,j,E,_){for(var A,U=0;U<j.ranges.length;U++){var te=j.ranges[U],oe=j.ranges.length==m.sel.ranges.length&&m.sel.ranges[U],fe=Pf(m,te.anchor,oe&&oe.anchor,E,_),Ne=Pf(m,te.head,oe&&oe.head,E,_);(A||fe!=te.anchor||Ne!=te.head)&&(A||(A=j.ranges.slice(0,U)),A[U]=new Qn(fe,Ne))}return A?wo(m.cm,A,j.primIndex):j}function Vl(m,j,E,_,A){var U=ke(m,j.line);if(U.markedSpans)for(var te=0;te<U.markedSpans.length;++te){var oe=U.markedSpans[te],fe=oe.marker,Ne="selectLeft"in fe?!fe.selectLeft:fe.inclusiveLeft,qe="selectRight"in fe?!fe.selectRight:fe.inclusiveRight;if((oe.from==null||(Ne?oe.from<=j.ch:oe.from<j.ch))&&(oe.to==null||(qe?oe.to>=j.ch:oe.to>j.ch))){if(A&&(dt(fe,"beforeCursorEnter"),fe.explicitlyCleared))if(U.markedSpans){--te;continue}else break;if(!fe.atomic)continue;if(E){var rt=fe.find(_<0?1:-1),St=void 0;if((_<0?qe:Ne)&&(rt=Qp(m,rt,-_,rt&&rt.line==j.line?U:null)),rt&&rt.line==j.line&&(St=at(rt,E))&&(_<0?St<0:St>0))return Vl(m,rt,j,_,A)}var yt=fe.find(_<0?-1:1);return(_<0?Ne:qe)&&(yt=Qp(m,yt,_,yt.line==j.line?U:null)),yt?Vl(m,yt,j,_,A):null}}return j}function Pf(m,j,E,_,A){var U=_||1,te=Vl(m,j,E,U,A)||!A&&Vl(m,j,E,U,!0)||Vl(m,j,E,-U,A)||!A&&Vl(m,j,E,-U,!0);return te||(m.cantEdit=!0,He(m.first,0))}function Qp(m,j,E,_){return E<0&&j.ch==0?j.line>m.first?Lt(m,He(j.line-1)):null:E>0&&j.ch==(_||ke(m,j.line)).text.length?j.line<m.first+m.size-1?He(j.line+1,0):null:new He(j.line,j.ch+E)}function Jp(m){m.setSelection(He(m.firstLine(),0),He(m.lastLine()),we)}function qo(m,j,E){var _={canceled:!1,from:j.from,to:j.to,text:j.text,origin:j.origin,cancel:function(){return _.canceled=!0}};return E&&(_.update=function(A,U,te,oe){A&&(_.from=Lt(m,A)),U&&(_.to=Lt(m,U)),te&&(_.text=te),oe!==void 0&&(_.origin=oe)}),dt(m,"beforeChange",m,_),m.cm&&dt(m.cm,"beforeChange",m.cm,_),_.canceled?(m.cm&&(m.cm.curOp.updateInput=2),null):{from:_.from,to:_.to,text:_.text,origin:_.origin}}function io(m,j,E){if(m.cm){if(!m.cm.curOp)return La(m.cm,io)(m,j,E);if(m.cm.state.suppressEdits)return}if(!((At(m,"beforeChange")||m.cm&&At(m.cm,"beforeChange"))&&(j=qo(m,j,!0),!j))){var _=Or&&!E&&_s(m,j.from,j.to);if(_)for(var A=_.length-1;A>=0;--A)Hl(m,{from:_[A].from,to:_[A].to,text:A?[""]:j.text,origin:j.origin});else Hl(m,j)}}function Hl(m,j){if(!(j.text.length==1&&j.text[0]==""&&at(j.from,j.to)==0)){var E=Yp(m,j);xd(m,j,E,m.cm?m.cm.curOp.id:NaN),gi(m,j,E,Vn(m,j));var _=[];Vi(m,function(A,U){!U&&Se(_,A.history)==-1&&(Dn(A.history,j),_.push(A.history)),gi(A,j,null,Vn(A,j))})}}function vu(m,j,E){var _=m.cm&&m.cm.state.suppressEdits;if(!(_&&!E)){for(var A=m.history,U,te=m.sel,oe=j=="undo"?A.done:A.undone,fe=j=="undo"?A.undone:A.done,Ne=0;Ne<oe.length&&(U=oe[Ne],!(E?U.ranges&&!U.equals(m.sel):!U.ranges));Ne++);if(Ne!=oe.length){for(A.lastOrigin=A.lastSelOrigin=null;;)if(U=oe.pop(),U.ranges){if(Ec(U,fe),E&&!U.equals(m.sel)){Aa(m,U,{clearRedo:!1});return}te=U}else if(_){oe.push(U);return}else break;var qe=[];Ec(te,fe),fe.push({changes:qe,generation:A.generation}),A.generation=U.generation||++A.maxGeneration;for(var rt=At(m,"beforeChange")||m.cm&&At(m.cm,"beforeChange"),St=function(ir){var hr=U.changes[ir];if(hr.origin=j,rt&&!qo(m,hr,!1))return oe.length=0,{};qe.push($l(m,hr));var Tr=ir?Yp(m,hr):ee(oe);gi(m,hr,Tr,eg(m,hr)),!ir&&m.cm&&m.cm.scrollIntoView({from:hr.from,to:zl(hr)});var $r=[];Vi(m,function(Pr,Dr){!Dr&&Se($r,Pr.history)==-1&&(Dn(Pr.history,hr),$r.push(Pr.history)),gi(Pr,hr,null,eg(Pr,hr))})},yt=U.changes.length-1;yt>=0;--yt){var Wt=St(yt);if(Wt)return Wt.v}}}}function sg(m,j){if(j!=0&&(m.first+=j,m.sel=new Mo(ue(m.sel.ranges,function(A){return new Qn(He(A.anchor.line+j,A.anchor.ch),He(A.head.line+j,A.head.ch))}),m.sel.primIndex),m.cm)){Oo(m.cm,m.first,m.first-j,j);for(var E=m.cm.display,_=E.viewFrom;_<E.viewTo;_++)Il(m.cm,_,"gutter")}}function gi(m,j,E,_){if(m.cm&&!m.cm.curOp)return La(m.cm,gi)(m,j,E,_);if(j.to.line<m.first){sg(m,j.text.length-1-(j.to.line-j.from.line));return}if(!(j.from.line>m.lastLine())){if(j.from.line<m.first){var A=j.text.length-1-(m.first-j.from.line);sg(m,A),j={from:He(m.first,0),to:He(j.to.line+A,j.to.ch),text:[ee(j.text)],origin:j.origin}}var U=m.lastLine();j.to.line>U&&(j={from:j.from,to:He(U,ke(m,U).text.length),text:[j.text[0]],origin:j.origin}),j.removed=Re(m,j.from,j.to),E||(E=Yp(m,j)),m.cm?ti(m.cm,j,_):kf(m,j,_),Tc(m,E,we),m.cantEdit&&Pf(m,He(m.firstLine(),0))&&(m.cantEdit=!1)}}function ti(m,j,E){var _=m.doc,A=m.display,U=j.from,te=j.to,oe=!1,fe=U.line;m.options.lineWrapping||(fe=Ct(Ie(ke(_,U.line))),_.iter(fe,te.line+1,function(yt){if(yt==A.maxLine)return oe=!0,!0})),_.sel.contains(j.from,j.to)>-1&&kt(m),kf(_,j,E,Vm(m)),m.options.lineWrapping||(_.iter(fe,U.line+j.text.length,function(yt){var Wt=Cr(yt);Wt>A.maxLineLength&&(A.maxLine=yt,A.maxLineLength=Wt,A.maxLineChanged=!0,oe=!1)}),oe&&(m.curOp.updateMaxLine=!0)),ar(_,U.line),Ui(m,400);var Ne=j.text.length-(te.line-U.line)-1;j.full?Oo(m):U.line==te.line&&j.text.length==1&&!yd(m.doc,j)?Il(m,U.line,"text"):Oo(m,U.line,te.line+1,Ne);var qe=At(m,"changes"),rt=At(m,"change");if(rt||qe){var St={from:U,to:te,text:j.text,removed:j.removed,origin:j.origin};rt&&Ds(m,"change",m,St),qe&&(m.curOp.changeObjs||(m.curOp.changeObjs=[])).push(St)}m.display.selForContextMenu=null}function Qs(m,j,E,_,A){var U;_||(_=E),at(_,E)<0&&(U=[_,E],E=U[0],_=U[1]),typeof j=="string"&&(j=m.splitLines(j)),io(m,{from:E,to:_,text:j,origin:A})}function Af(m,j,E,_){E<m.line?m.line+=_:j<m.line&&(m.line=j,m.ch=0)}function cl(m,j,E,_){for(var A=0;A<m.length;++A){var U=m[A],te=!0;if(U.ranges){U.copied||(U=m[A]=U.deepCopy(),U.copied=!0);for(var oe=0;oe<U.ranges.length;oe++)Af(U.ranges[oe].anchor,j,E,_),Af(U.ranges[oe].head,j,E,_);continue}for(var fe=0;fe<U.changes.length;++fe){var Ne=U.changes[fe];if(E<Ne.from.line)Ne.from=He(Ne.from.line+_,Ne.from.ch),Ne.to=He(Ne.to.line+_,Ne.to.ch);else if(j<=Ne.to.line){te=!1;break}}te||(m.splice(0,A+1),A=0)}}function Dn(m,j){var E=j.from.line,_=j.to.line,A=j.text.length-(_-E)-1;cl(m.done,E,_,A),cl(m.undone,E,_,A)}function gs(m,j,E,_){var A=j,U=j;return typeof j=="number"?U=ke(m,jt(m,j)):A=Ct(j),A==null?null:(_(U,A)&&m.cm&&Il(m.cm,A,E),U)}function fa(m){this.lines=m,this.parent=null;for(var j=0,E=0;E<m.length;++E)m[E].parent=this,j+=m[E].height;this.height=j}fa.prototype={chunkSize:function(){return this.lines.length},removeInner:function(m,j){for(var E=m,_=m+j;E<_;++E){var A=this.lines[E];this.height-=A.height,Er(A),Ds(A,"delete")}this.lines.splice(m,j)},collapse:function(m){m.push.apply(m,this.lines)},insertInner:function(m,j,E){this.height+=E,this.lines=this.lines.slice(0,m).concat(j).concat(this.lines.slice(m));for(var _=0;_<j.length;++_)j[_].parent=this},iterN:function(m,j,E){for(var _=m+j;m<_;++m)if(E(this.lines[m]))return!0}};function Oc(m){this.children=m;for(var j=0,E=0,_=0;_<m.length;++_){var A=m[_];j+=A.chunkSize(),E+=A.height,A.parent=this}this.size=j,this.height=E,this.parent=null}Oc.prototype={chunkSize:function(){return this.size},removeInner:function(m,j){this.size-=j;for(var E=0;E<this.children.length;++E){var _=this.children[E],A=_.chunkSize();if(m<A){var U=Math.min(j,A-m),te=_.height;if(_.removeInner(m,U),this.height-=te-_.height,A==U&&(this.children.splice(E--,1),_.parent=null),(j-=U)==0)break;m=0}else m-=A}if(this.size-j<25&&(this.children.length>1||!(this.children[0]instanceof fa))){var oe=[];this.collapse(oe),this.children=[new fa(oe)],this.children[0].parent=this}},collapse:function(m){for(var j=0;j<this.children.length;++j)this.children[j].collapse(m)},insertInner:function(m,j,E){this.size+=j.length,this.height+=E;for(var _=0;_<this.children.length;++_){var A=this.children[_],U=A.chunkSize();if(m<=U){if(A.insertInner(m,j,E),A.lines&&A.lines.length>50){for(var te=A.lines.length%25+25,oe=te;oe<A.lines.length;){var fe=new fa(A.lines.slice(oe,oe+=25));A.height-=fe.height,this.children.splice(++_,0,fe),fe.parent=this}A.lines=A.lines.slice(0,te),this.maybeSpill()}break}m-=U}},maybeSpill:function(){if(!(this.children.length<=10)){var m=this;do{var j=m.children.splice(m.children.length-5,5),E=new Oc(j);if(m.parent){m.size-=E.size,m.height-=E.height;var A=Se(m.parent.children,m);m.parent.children.splice(A+1,0,E)}else{var _=new Oc(m.children);_.parent=m,m.children=[_,E],m=_}E.parent=m.parent}while(m.children.length>10);m.parent.maybeSpill()}},iterN:function(m,j,E){for(var _=0;_<this.children.length;++_){var A=this.children[_],U=A.chunkSize();if(m<U){var te=Math.min(j,U-m);if(A.iterN(m,te,E))return!0;if((j-=te)==0)break;m=0}else m-=U}}};var dl=function(m,j,E){if(E)for(var _ in E)E.hasOwnProperty(_)&&(this[_]=E[_]);this.doc=m,this.node=j};dl.prototype.clear=function(){var m=this.doc.cm,j=this.line.widgets,E=this.line,_=Ct(E);if(!(_==null||!j)){for(var A=0;A<j.length;++A)j[A]==this&&j.splice(A--,1);j.length||(E.widgets=null);var U=Un(this);st(E,Math.max(0,E.height-U)),m&&(Pa(m,function(){Pc(m,E,-U),Il(m,_,"widget")}),Ds(m,"lineWidgetCleared",m,this,_))}},dl.prototype.changed=function(){var m=this,j=this.height,E=this.doc.cm,_=this.line;this.height=null;var A=Un(this)-j;A&&(or(this.doc,_)||st(_,_.height+A),E&&Pa(E,function(){E.curOp.forceUpdate=!0,Pc(E,_,A),Ds(E,"lineWidgetChanged",E,m,Ct(_))}))},xt(dl);function Pc(m,j,E){Ft(j)<(m.curOp&&m.curOp.scrollTop||m.doc.scrollTop)&&wf(m,E)}function eh(m,j,E,_){var A=new dl(m,E,_),U=m.cm;return U&&A.noHScroll&&(U.display.alignWidgets=!0),gs(m,j,"widget",function(te){var oe=te.widgets||(te.widgets=[]);if(A.insertAt==null?oe.push(A):oe.splice(Math.min(oe.length,Math.max(0,A.insertAt)),0,A),A.line=te,U&&!or(m,te)){var fe=Ft(te)<m.scrollTop;st(te,te.height+Un(A)),fe&&wf(U,A.height),U.curOp.forceUpdate=!0}return!0}),U&&Ds(U,"lineWidgetAdded",U,A,typeof j=="number"?j:Ct(j)),A}var bu=0,ri=function(m,j){this.lines=[],this.type=j,this.doc=m,this.id=++bu};ri.prototype.clear=function(){if(!this.explicitlyCleared){var m=this.doc.cm,j=m&&!m.curOp;if(j&&Fl(m),At(this,"clear")){var E=this.find();E&&Ds(this,"clear",E.from,E.to)}for(var _=null,A=null,U=0;U<this.lines.length;++U){var te=this.lines[U],oe=Fn(te.markedSpans,this);m&&!this.collapsed?Il(m,Ct(te),"text"):m&&(oe.to!=null&&(A=Ct(te)),oe.from!=null&&(_=Ct(te))),te.markedSpans=Wn(te.markedSpans,oe),oe.from==null&&this.collapsed&&!or(this.doc,te)&&m&&st(te,vc(m.display))}if(m&&this.collapsed&&!m.options.lineWrapping)for(var fe=0;fe<this.lines.length;++fe){var Ne=Ie(this.lines[fe]),qe=Cr(Ne);qe>m.display.maxLineLength&&(m.display.maxLine=Ne,m.display.maxLineLength=qe,m.display.maxLineChanged=!0)}_!=null&&m&&this.collapsed&&Oo(m,_,A+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,m&&ng(m.doc)),m&&Ds(m,"markerCleared",m,this,_,A),j&&wc(m),this.parent&&this.parent.clear()}},ri.prototype.find=function(m,j){m==null&&this.type=="bookmark"&&(m=1);for(var E,_,A=0;A<this.lines.length;++A){var U=this.lines[A],te=Fn(U.markedSpans,this);if(te.from!=null&&(E=He(j?U:Ct(U),te.from),m==-1))return E;if(te.to!=null&&(_=He(j?U:Ct(U),te.to),m==1))return _}return E&&{from:E,to:_}},ri.prototype.changed=function(){var m=this,j=this.find(-1,!0),E=this,_=this.doc.cm;!j||!_||Pa(_,function(){var A=j.line,U=Ct(j.line),te=bt(_,U);if(te&&(mf(te),_.curOp.selectionChanged=_.curOp.forceUpdate=!0),_.curOp.updateMaxLine=!0,!or(E.doc,A)&&E.height!=null){var oe=E.height;E.height=null;var fe=Un(E)-oe;fe&&st(A,A.height+fe)}Ds(_,"markerChanged",_,m)})},ri.prototype.attachLine=function(m){if(!this.lines.length&&this.doc.cm){var j=this.doc.cm.curOp;(!j.maybeHiddenMarkers||Se(j.maybeHiddenMarkers,this)==-1)&&(j.maybeUnhiddenMarkers||(j.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(m)},ri.prototype.detachLine=function(m){if(this.lines.splice(Se(this.lines,m),1),!this.lines.length&&this.doc.cm){var j=this.doc.cm.curOp;(j.maybeHiddenMarkers||(j.maybeHiddenMarkers=[])).push(this)}},xt(ri);function wu(m,j,E,_,A){if(_&&_.shared)return ag(m,j,E,_,A);if(m.cm&&!m.cm.curOp)return La(m.cm,wu)(m,j,E,_,A);var U=new ri(m,A),te=at(j,E);if(_&&Z(_,U,!1),te>0||te==0&&U.clearWhenEmpty!==!1)return U;if(U.replacedWith&&(U.collapsed=!0,U.widgetNode=P("span",[U.replacedWith],"CodeMirror-widget"),_.handleMouseEvents||U.widgetNode.setAttribute("cm-ignore-events","true"),_.insertLeft&&(U.widgetNode.insertLeft=!0)),U.collapsed){if(nn(m,j.line,j,E,U)||j.line!=E.line&&nn(m,E.line,j,E,U))throw new Error("Inserting collapsed marker partially overlapping an existing one");jn()}U.addToHistory&&xd(m,{from:j,to:E,origin:"markText"},m.sel,NaN);var oe=j.line,fe=m.cm,Ne;if(m.iter(oe,E.line+1,function(rt){fe&&U.collapsed&&!fe.options.lineWrapping&&Ie(rt)==fe.display.maxLine&&(Ne=!0),U.collapsed&&oe!=j.line&&st(rt,0),so(rt,new $n(U,oe==j.line?j.ch:null,oe==E.line?E.ch:null),m.cm&&m.cm.curOp),++oe}),U.collapsed&&m.iter(j.line,E.line+1,function(rt){or(m,rt)&&st(rt,0)}),U.clearOnEnter&&De(U,"beforeCursorEnter",function(){return U.clear()}),U.readOnly&&(Sn(),(m.history.done.length||m.history.undone.length)&&m.clearHistory()),U.collapsed&&(U.id=++bu,U.atomic=!0),fe){if(Ne&&(fe.curOp.updateMaxLine=!0),U.collapsed)Oo(fe,j.line,E.line+1);else if(U.className||U.startStyle||U.endStyle||U.css||U.attributes||U.title)for(var qe=j.line;qe<=E.line;qe++)Il(fe,qe,"text");U.atomic&&ng(fe.doc),Ds(fe,"markerAdded",fe,U)}return U}var Js=function(m,j){this.markers=m,this.primary=j;for(var E=0;E<m.length;++E)m[E].parent=this};Js.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var m=0;m<this.markers.length;++m)this.markers[m].clear();Ds(this,"clear")}},Js.prototype.find=function(m,j){return this.primary.find(m,j)},xt(Js);function ag(m,j,E,_,A){_=Z(_),_.shared=!1;var U=[wu(m,j,E,_,A)],te=U[0],oe=_.widgetNode;return Vi(m,function(fe){oe&&(_.widgetNode=oe.cloneNode(!0)),U.push(wu(fe,Lt(fe,j),Lt(fe,E),_,A));for(var Ne=0;Ne<fe.linked.length;++Ne)if(fe.linked[Ne].isParent)return;te=ee(U)}),new Js(U,te)}function th(m){return m.findMarks(He(m.first,0),m.clipPos(He(m.lastLine())),function(j){return j.parent})}function r0(m,j){for(var E=0;E<j.length;E++){var _=j[E],A=_.find(),U=m.clipPos(A.from),te=m.clipPos(A.to);if(at(U,te)){var oe=wu(m,U,te,_.primary,_.primary.type);_.markers.push(oe),oe.parent=_}}}function n0(m){for(var j=function(_){var A=m[_],U=[A.primary.doc];Vi(A.primary.doc,function(fe){return U.push(fe)});for(var te=0;te<A.markers.length;te++){var oe=A.markers[te];Se(U,oe.doc)==-1&&(oe.parent=null,A.markers.splice(te--,1))}},E=0;E<m.length;E++)j(E)}var Gj=0,lo=function(m,j,E,_,A){if(!(this instanceof lo))return new lo(m,j,E,_,A);E==null&&(E=0),Oc.call(this,[new fa([new fr("",null)])]),this.first=E,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=E;var U=He(E,0);this.sel=kc(U),this.history=new il(null),this.id=++Gj,this.modeOption=j,this.lineSep=_,this.direction=A=="rtl"?"rtl":"ltr",this.extend=!1,typeof m=="string"&&(m=this.splitLines(m)),kf(this,{from:U,to:U,text:m}),Aa(this,kc(U),we)};lo.prototype=I(Oc.prototype,{constructor:lo,iter:function(m,j,E){E?this.iterN(m-this.first,j-m,E):this.iterN(this.first,this.first+this.size,m)},insert:function(m,j){for(var E=0,_=0;_<j.length;++_)E+=j[_].height;this.insertInner(m-this.first,j,E)},remove:function(m,j){this.removeInner(m-this.first,j)},getValue:function(m){var j=Ze(this,this.first,this.first+this.size);return m===!1?j:j.join(m||this.lineSeparator())},setValue:ua(function(m){var j=He(this.first,0),E=this.first+this.size-1;io(this,{from:j,to:He(E,ke(this,E).text.length),text:this.splitLines(m),origin:"setValue",full:!0},!0),this.cm&&hd(this.cm,0,0),Aa(this,kc(j),we)}),replaceRange:function(m,j,E,_){j=Lt(this,j),E=E?Lt(this,E):j,Qs(this,m,j,E,_)},getRange:function(m,j,E){var _=Re(this,Lt(this,m),Lt(this,j));return E===!1?_:E===""?_.join(""):_.join(E||this.lineSeparator())},getLine:function(m){var j=this.getLineHandle(m);return j&&j.text},getLineHandle:function(m){if(Ve(this,m))return ke(this,m)},getLineNumber:function(m){return Ct(m)},getLineHandleVisualStart:function(m){return typeof m=="number"&&(m=ke(this,m)),Ie(m)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(m){return Lt(this,m)},getCursor:function(m){var j=this.sel.primary(),E;return m==null||m=="head"?E=j.head:m=="anchor"?E=j.anchor:m=="end"||m=="to"||m===!1?E=j.to():E=j.from(),E},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:ua(function(m,j,E){xu(this,Lt(this,typeof m=="number"?He(m,j||0):m),null,E)}),setSelection:ua(function(m,j,E){xu(this,Lt(this,m),Lt(this,j||m),E)}),extendSelection:ua(function(m,j,E){yu(this,Lt(this,m),j&&Lt(this,j),E)}),extendSelections:ua(function(m,j){Ul(this,Br(this,m),j)}),extendSelectionsBy:ua(function(m,j){var E=ue(this.sel.ranges,m);Ul(this,Br(this,E),j)}),setSelections:ua(function(m,j,E){if(m.length){for(var _=[],A=0;A<m.length;A++)_[A]=new Qn(Lt(this,m[A].anchor),Lt(this,m[A].head||m[A].anchor));j==null&&(j=Math.min(m.length-1,this.sel.primIndex)),Aa(this,wo(this.cm,_,j),E)}}),addSelection:ua(function(m,j,E){var _=this.sel.ranges.slice(0);_.push(new Qn(Lt(this,m),Lt(this,j||m))),Aa(this,wo(this.cm,_,_.length-1),E)}),getSelection:function(m){for(var j=this.sel.ranges,E,_=0;_<j.length;_++){var A=Re(this,j[_].from(),j[_].to());E=E?E.concat(A):A}return m===!1?E:E.join(m||this.lineSeparator())},getSelections:function(m){for(var j=[],E=this.sel.ranges,_=0;_<E.length;_++){var A=Re(this,E[_].from(),E[_].to());m!==!1&&(A=A.join(m||this.lineSeparator())),j[_]=A}return j},replaceSelection:function(m,j,E){for(var _=[],A=0;A<this.sel.ranges.length;A++)_[A]=m;this.replaceSelections(_,j,E||"+input")},replaceSelections:ua(function(m,j,E){for(var _=[],A=this.sel,U=0;U<A.ranges.length;U++){var te=A.ranges[U];_[U]={from:te.from(),to:te.to(),text:this.splitLines(m[U]),origin:E}}for(var oe=j&&j!="end"&&Xm(this,_,j),fe=_.length-1;fe>=0;fe--)io(this,_[fe]);oe?Xp(this,oe):this.cm&&pd(this.cm)}),undo:ua(function(){vu(this,"undo")}),redo:ua(function(){vu(this,"redo")}),undoSelection:ua(function(){vu(this,"undo",!0)}),redoSelection:ua(function(){vu(this,"redo",!0)}),setExtending:function(m){this.extend=m},getExtending:function(){return this.extend},historySize:function(){for(var m=this.history,j=0,E=0,_=0;_<m.done.length;_++)m.done[_].ranges||++j;for(var A=0;A<m.undone.length;A++)m.undone[A].ranges||++E;return{undo:j,redo:E}},clearHistory:function(){var m=this;this.history=new il(this.history),Vi(this,function(j){return j.history=m.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(m){return m&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(m){return this.history.generation==(m||this.cleanGeneration)},getHistory:function(){return{done:ei(this.history.done),undone:ei(this.history.undone)}},setHistory:function(m){var j=this.history=new il(this.history);j.done=ei(m.done.slice(0),null,!0),j.undone=ei(m.undone.slice(0),null,!0)},setGutterMarker:ua(function(m,j,E){return gs(this,m,"gutter",function(_){var A=_.gutterMarkers||(_.gutterMarkers={});return A[j]=E,!E&&ge(A)&&(_.gutterMarkers=null),!0})}),clearGutter:ua(function(m){var j=this;this.iter(function(E){E.gutterMarkers&&E.gutterMarkers[m]&&gs(j,E,"gutter",function(){return E.gutterMarkers[m]=null,ge(E.gutterMarkers)&&(E.gutterMarkers=null),!0})})}),lineInfo:function(m){var j;if(typeof m=="number"){if(!Ve(this,m)||(j=m,m=ke(this,m),!m))return null}else if(j=Ct(m),j==null)return null;return{line:j,handle:m,text:m.text,gutterMarkers:m.gutterMarkers,textClass:m.textClass,bgClass:m.bgClass,wrapClass:m.wrapClass,widgets:m.widgets}},addLineClass:ua(function(m,j,E){return gs(this,m,j=="gutter"?"gutter":"class",function(_){var A=j=="text"?"textClass":j=="background"?"bgClass":j=="gutter"?"gutterClass":"wrapClass";if(!_[A])_[A]=E;else{if($(E).test(_[A]))return!1;_[A]+=" "+E}return!0})}),removeLineClass:ua(function(m,j,E){return gs(this,m,j=="gutter"?"gutter":"class",function(_){var A=j=="text"?"textClass":j=="background"?"bgClass":j=="gutter"?"gutterClass":"wrapClass",U=_[A];if(U)if(E==null)_[A]=null;else{var te=U.match($(E));if(!te)return!1;var oe=te.index+te[0].length;_[A]=U.slice(0,te.index)+(!te.index||oe==U.length?"":" ")+U.slice(oe)||null}else return!1;return!0})}),addLineWidget:ua(function(m,j,E){return eh(this,m,j,E)}),removeLineWidget:function(m){m.clear()},markText:function(m,j,E){return wu(this,Lt(this,m),Lt(this,j),E,E&&E.type||"range")},setBookmark:function(m,j){var E={replacedWith:j&&(j.nodeType==null?j.widget:j),insertLeft:j&&j.insertLeft,clearWhenEmpty:!1,shared:j&&j.shared,handleMouseEvents:j&&j.handleMouseEvents};return m=Lt(this,m),wu(this,m,m,E,"bookmark")},findMarksAt:function(m){m=Lt(this,m);var j=[],E=ke(this,m.line).markedSpans;if(E)for(var _=0;_<E.length;++_){var A=E[_];(A.from==null||A.from<=m.ch)&&(A.to==null||A.to>=m.ch)&&j.push(A.marker.parent||A.marker)}return j},findMarks:function(m,j,E){m=Lt(this,m),j=Lt(this,j);var _=[],A=m.line;return this.iter(m.line,j.line+1,function(U){var te=U.markedSpans;if(te)for(var oe=0;oe<te.length;oe++){var fe=te[oe];!(fe.to!=null&&A==m.line&&m.ch>=fe.to||fe.from==null&&A!=m.line||fe.from!=null&&A==j.line&&fe.from>=j.ch)&&(!E||E(fe.marker))&&_.push(fe.marker.parent||fe.marker)}++A}),_},getAllMarks:function(){var m=[];return this.iter(function(j){var E=j.markedSpans;if(E)for(var _=0;_<E.length;++_)E[_].from!=null&&m.push(E[_].marker)}),m},posFromIndex:function(m){var j,E=this.first,_=this.lineSeparator().length;return this.iter(function(A){var U=A.text.length+_;if(U>m)return j=m,!0;m-=U,++E}),Lt(this,He(E,j))},indexFromPos:function(m){m=Lt(this,m);var j=m.ch;if(m.line<this.first||m.ch<0)return 0;var E=this.lineSeparator().length;return this.iter(this.first,m.line,function(_){j+=_.text.length+E}),j},copy:function(m){var j=new lo(Ze(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return j.scrollTop=this.scrollTop,j.scrollLeft=this.scrollLeft,j.sel=this.sel,j.extend=!1,m&&(j.history.undoDepth=this.history.undoDepth,j.setHistory(this.getHistory())),j},linkedDoc:function(m){m||(m={});var j=this.first,E=this.first+this.size;m.from!=null&&m.from>j&&(j=m.from),m.to!=null&&m.to<E&&(E=m.to);var _=new lo(Ze(this,j,E),m.mode||this.modeOption,j,this.lineSep,this.direction);return m.sharedHist&&(_.history=this.history),(this.linked||(this.linked=[])).push({doc:_,sharedHist:m.sharedHist}),_.linked=[{doc:this,isParent:!0,sharedHist:m.sharedHist}],r0(_,th(this)),_},unlinkDoc:function(m){if(m instanceof Us&&(m=m.doc),this.linked)for(var j=0;j<this.linked.length;++j){var E=this.linked[j];if(E.doc==m){this.linked.splice(j,1),m.unlinkDoc(this),n0(th(this));break}}if(m.history==this.history){var _=[m.id];Vi(m,function(A){return _.push(A.id)},!0),m.history=new il(null),m.history.done=ei(this.history.done,_),m.history.undone=ei(this.history.undone,_)}},iterLinkedDocs:function(m){Vi(this,m)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(m){return this.lineSep?m.split(this.lineSep):bn(m)},lineSeparator:function(){return this.lineSep||`
`},setDirection:ua(function(m){m!="rtl"&&(m="ltr"),m!=this.direction&&(this.direction=m,this.iter(function(j){return j.order=null}),this.cm&&Jx(this.cm))})}),lo.prototype.eachLine=lo.prototype.iter;var rh=0;function og(m){var j=this;if(Mf(j),!(Ke(j,m)||zs(j.display,m))){Xt(m),l&&(rh=+new Date);var E=cd(j,m,!0),_=m.dataTransfer.files;if(!(!E||j.isReadOnly()))if(_&&_.length&&window.FileReader&&window.File)for(var A=_.length,U=Array(A),te=0,oe=function(){++te==A&&La(j,function(){E=Lt(j.doc,E);var yt={from:E,to:E,text:j.doc.splitLines(U.filter(function(Wt){return Wt!=null}).join(j.doc.lineSeparator())),origin:"paste"};io(j.doc,yt),Xp(j.doc,kc(Lt(j.doc,E),Lt(j.doc,zl(yt))))})()},fe=function(yt,Wt){if(j.options.allowDropFileTypes&&Se(j.options.allowDropFileTypes,yt.type)==-1){oe();return}var ir=new FileReader;ir.onerror=function(){return oe()},ir.onload=function(){var hr=ir.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(hr)){oe();return}U[Wt]=hr,oe()},ir.readAsText(yt)},Ne=0;Ne<_.length;Ne++)fe(_[Ne],Ne);else{if(j.state.draggingText&&j.doc.sel.contains(E)>-1){j.state.draggingText(m),setTimeout(function(){return j.display.input.focus()},20);return}try{var qe=m.dataTransfer.getData("Text");if(qe){var rt;if(j.state.draggingText&&!j.state.draggingText.copy&&(rt=j.listSelections()),Tc(j.doc,kc(E,E)),rt)for(var St=0;St<rt.length;++St)Qs(j.doc,"",rt[St].anchor,rt[St].head,"drag");j.replaceSelection(qe,"around","paste"),j.display.input.focus()}}catch{}}}}function Io(m,j){if(l&&(!m.state.draggingText||+new Date-rh<100)){be(j);return}if(!(Ke(m,j)||zs(m.display,j))&&(j.dataTransfer.setData("Text",m.getSelection()),j.dataTransfer.effectAllowed="copyMove",j.dataTransfer.setDragImage&&!y)){var E=q("img",null,null,"position: fixed; left: 0; top: 0;");E.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",g&&(E.width=E.height=1,m.display.wrapper.appendChild(E),E._top=E.offsetTop),j.dataTransfer.setDragImage(E,0,0),g&&E.parentNode.removeChild(E)}}function Ma(m,j){var E=cd(m,j);if(E){var _=document.createDocumentFragment();Up(m,E,_),m.display.dragCursor||(m.display.dragCursor=q("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),m.display.lineSpace.insertBefore(m.display.dragCursor,m.display.cursorDiv)),M(m.display.dragCursor,_)}}function Mf(m){m.display.dragCursor&&(m.display.lineSpace.removeChild(m.display.dragCursor),m.display.dragCursor=null)}function ju(m){if(document.getElementsByClassName){for(var j=document.getElementsByClassName("CodeMirror"),E=[],_=0;_<j.length;_++){var A=j[_].CodeMirror;A&&E.push(A)}E.length&&E[0].operation(function(){for(var U=0;U<E.length;U++)m(E[U])})}}var If=!1;function ig(){If||(Wl(),If=!0)}function Wl(){var m;De(window,"resize",function(){m==null&&(m=setTimeout(function(){m=null,ju(nh)},100))}),De(window,"blur",function(){return ju(Bi)})}function nh(m){var j=m.display;j.cachedCharWidth=j.cachedTextHeight=j.cachedPaddingH=null,j.scrollbarsClipped=!1,m.setSize()}for(var ul={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},wd=0;wd<10;wd++)ul[wd+48]=ul[wd+96]=String(wd);for(var Rf=65;Rf<=90;Rf++)ul[Rf]=String.fromCharCode(Rf);for(var Cu=1;Cu<=12;Cu++)ul[Cu+111]=ul[Cu+63235]="F"+Cu;var fl={};fl.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},fl.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},fl.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},fl.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},fl.default=N?fl.macDefault:fl.pcDefault;function s0(m){var j=m.split(/-(?!$)/);m=j[j.length-1];for(var E,_,A,U,te=0;te<j.length-1;te++){var oe=j[te];if(/^(cmd|meta|m)$/i.test(oe))U=!0;else if(/^a(lt)?$/i.test(oe))E=!0;else if(/^(c|ctrl|control)$/i.test(oe))_=!0;else if(/^s(hift)?$/i.test(oe))A=!0;else throw new Error("Unrecognized modifier name: "+oe)}return E&&(m="Alt-"+m),_&&(m="Ctrl-"+m),U&&(m="Cmd-"+m),A&&(m="Shift-"+m),m}function a0(m){var j={};for(var E in m)if(m.hasOwnProperty(E)){var _=m[E];if(/^(name|fallthrough|(de|at)tach)$/.test(E))continue;if(_=="..."){delete m[E];continue}for(var A=ue(E.split(" "),s0),U=0;U<A.length;U++){var te=void 0,oe=void 0;U==A.length-1?(oe=A.join(" "),te=_):(oe=A.slice(0,U+1).join(" "),te="...");var fe=j[oe];if(!fe)j[oe]=te;else if(fe!=te)throw new Error("Inconsistent bindings for "+oe)}delete m[E]}for(var Ne in j)m[Ne]=j[Ne];return m}function jd(m,j,E,_){j=Df(j);var A=j.call?j.call(m,_):j[m];if(A===!1)return"nothing";if(A==="...")return"multi";if(A!=null&&E(A))return"handled";if(j.fallthrough){if(Object.prototype.toString.call(j.fallthrough)!="[object Array]")return jd(m,j.fallthrough,E,_);for(var U=0;U<j.fallthrough.length;U++){var te=jd(m,j.fallthrough[U],E,_);if(te)return te}}}function sh(m){var j=typeof m=="string"?m:ul[m.keyCode];return j=="Ctrl"||j=="Alt"||j=="Shift"||j=="Mod"}function lg(m,j,E){var _=m;return j.altKey&&_!="Alt"&&(m="Alt-"+m),(B?j.metaKey:j.ctrlKey)&&_!="Ctrl"&&(m="Ctrl-"+m),(B?j.ctrlKey:j.metaKey)&&_!="Mod"&&(m="Cmd-"+m),!E&&j.shiftKey&&_!="Shift"&&(m="Shift-"+m),m}function o0(m,j){if(g&&m.keyCode==34&&m.char)return!1;var E=ul[m.keyCode];return E==null||m.altGraphKey?!1:(m.keyCode==3&&m.code&&(E=m.code),lg(E,m,j))}function Df(m){return typeof m=="string"?fl[m]:m}function Cd(m,j){for(var E=m.doc.sel.ranges,_=[],A=0;A<E.length;A++){for(var U=j(E[A]);_.length&&at(U.from,ee(_).to)<=0;){var te=_.pop();if(at(te.from,U.from)<0){U.from=te.from;break}}_.push(U)}Pa(m,function(){for(var oe=_.length-1;oe>=0;oe--)Qs(m.doc,"",_[oe].from,_[oe].to,"+delete");pd(m)})}function ah(m,j,E){var _=ie(m.text,j+E,E);return _<0||_>m.text.length?null:_}function Lf(m,j,E){var _=ah(m,j.ch,E);return _==null?null:new He(j.line,_,E<0?"after":"before")}function oh(m,j,E,_,A){if(m){j.doc.direction=="rtl"&&(A=-A);var U=le(E,j.doc.direction);if(U){var te=A<0?ee(U):U[0],oe=A<0==(te.level==1),fe=oe?"after":"before",Ne;if(te.level>0||j.doc.direction=="rtl"){var qe=Jt(j,E);Ne=A<0?E.text.length-1:0;var rt=Nr(j,qe,Ne).top;Ne=Fe(function(St){return Nr(j,qe,St).top==rt},A<0==(te.level==1)?te.from:te.to-1,Ne),fe=="before"&&(Ne=ah(E,Ne,1))}else Ne=A<0?te.to:te.from;return new He(_,Ne,fe)}}return new He(_,A<0?E.text.length:0,A<0?"before":"after")}function i0(m,j,E,_){var A=le(j,m.doc.direction);if(!A)return Lf(j,E,_);E.ch>=j.text.length?(E.ch=j.text.length,E.sticky="before"):E.ch<=0&&(E.ch=0,E.sticky="after");var U=de(A,E.ch,E.sticky),te=A[U];if(m.doc.direction=="ltr"&&te.level%2==0&&(_>0?te.to>E.ch:te.from<E.ch))return Lf(j,E,_);var oe=function(Tr,$r){return ah(j,Tr instanceof He?Tr.ch:Tr,$r)},fe,Ne=function(Tr){return m.options.lineWrapping?(fe=fe||Jt(m,j),Bp(m,j,fe,Tr)):{begin:0,end:j.text.length}},qe=Ne(E.sticky=="before"?oe(E,-1):E.ch);if(m.doc.direction=="rtl"||te.level==1){var rt=te.level==1==_<0,St=oe(E,rt?1:-1);if(St!=null&&(rt?St<=te.to&&St<=qe.end:St>=te.from&&St>=qe.begin)){var yt=rt?"before":"after";return new He(E.line,St,yt)}}var Wt=function(Tr,$r,Pr){for(var Dr=function(ys,Ln){return Ln?new He(E.line,oe(ys,1),"before"):new He(E.line,ys,"after")};Tr>=0&&Tr<A.length;Tr+=$r){var dn=A[Tr],ln=$r>0==(dn.level!=1),Mn=ln?Pr.begin:oe(Pr.end,-1);if(dn.from<=Mn&&Mn<dn.to||(Mn=ln?dn.from:oe(dn.to,-1),Pr.begin<=Mn&&Mn<Pr.end))return Dr(Mn,ln)}},ir=Wt(U+_,_,qe);if(ir)return ir;var hr=_>0?qe.end:oe(qe.begin,-1);return hr!=null&&!(_>0&&hr==j.text.length)&&(ir=Wt(_>0?0:A.length-1,_,Ne(hr)),ir)?ir:null}var Su={selectAll:Jp,singleSelection:function(m){return m.setSelection(m.getCursor("anchor"),m.getCursor("head"),we)},killLine:function(m){return Cd(m,function(j){if(j.empty()){var E=ke(m.doc,j.head.line).text.length;return j.head.ch==E&&j.head.line<m.lastLine()?{from:j.head,to:He(j.head.line+1,0)}:{from:j.head,to:He(j.head.line,E)}}else return{from:j.from(),to:j.to()}})},deleteLine:function(m){return Cd(m,function(j){return{from:He(j.from().line,0),to:Lt(m.doc,He(j.to().line+1,0))}})},delLineLeft:function(m){return Cd(m,function(j){return{from:He(j.from().line,0),to:j.from()}})},delWrappedLineLeft:function(m){return Cd(m,function(j){var E=m.charCoords(j.head,"div").top+5,_=m.coordsChar({left:0,top:E},"div");return{from:_,to:j.from()}})},delWrappedLineRight:function(m){return Cd(m,function(j){var E=m.charCoords(j.head,"div").top+5,_=m.coordsChar({left:m.display.lineDiv.offsetWidth+100,top:E},"div");return{from:j.from(),to:_}})},undo:function(m){return m.undo()},redo:function(m){return m.redo()},undoSelection:function(m){return m.undoSelection()},redoSelection:function(m){return m.redoSelection()},goDocStart:function(m){return m.extendSelection(He(m.firstLine(),0))},goDocEnd:function(m){return m.extendSelection(He(m.lastLine()))},goLineStart:function(m){return m.extendSelectionsBy(function(j){return cg(m,j.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(m){return m.extendSelectionsBy(function(j){return c0(m,j.head)},{origin:"+move",bias:1})},goLineEnd:function(m){return m.extendSelectionsBy(function(j){return l0(m,j.head.line)},{origin:"+move",bias:-1})},goLineRight:function(m){return m.extendSelectionsBy(function(j){var E=m.cursorCoords(j.head,"div").top+5;return m.coordsChar({left:m.display.lineDiv.offsetWidth+100,top:E},"div")},ze)},goLineLeft:function(m){return m.extendSelectionsBy(function(j){var E=m.cursorCoords(j.head,"div").top+5;return m.coordsChar({left:0,top:E},"div")},ze)},goLineLeftSmart:function(m){return m.extendSelectionsBy(function(j){var E=m.cursorCoords(j.head,"div").top+5,_=m.coordsChar({left:0,top:E},"div");return _.ch<m.getLine(_.line).search(/\S/)?c0(m,j.head):_},ze)},goLineUp:function(m){return m.moveV(-1,"line")},goLineDown:function(m){return m.moveV(1,"line")},goPageUp:function(m){return m.moveV(-1,"page")},goPageDown:function(m){return m.moveV(1,"page")},goCharLeft:function(m){return m.moveH(-1,"char")},goCharRight:function(m){return m.moveH(1,"char")},goColumnLeft:function(m){return m.moveH(-1,"column")},goColumnRight:function(m){return m.moveH(1,"column")},goWordLeft:function(m){return m.moveH(-1,"word")},goGroupRight:function(m){return m.moveH(1,"group")},goGroupLeft:function(m){return m.moveH(-1,"group")},goWordRight:function(m){return m.moveH(1,"word")},delCharBefore:function(m){return m.deleteH(-1,"codepoint")},delCharAfter:function(m){return m.deleteH(1,"char")},delWordBefore:function(m){return m.deleteH(-1,"word")},delWordAfter:function(m){return m.deleteH(1,"word")},delGroupBefore:function(m){return m.deleteH(-1,"group")},delGroupAfter:function(m){return m.deleteH(1,"group")},indentAuto:function(m){return m.indentSelection("smart")},indentMore:function(m){return m.indentSelection("add")},indentLess:function(m){return m.indentSelection("subtract")},insertTab:function(m){return m.replaceSelection("	")},insertSoftTab:function(m){for(var j=[],E=m.listSelections(),_=m.options.tabSize,A=0;A<E.length;A++){var U=E[A].from(),te=ve(m.getLine(U.line),U.ch,_);j.push(ht(_-te%_))}m.replaceSelections(j)},defaultTab:function(m){m.somethingSelected()?m.indentSelection("add"):m.execCommand("insertTab")},transposeChars:function(m){return Pa(m,function(){for(var j=m.listSelections(),E=[],_=0;_<j.length;_++)if(j[_].empty()){var A=j[_].head,U=ke(m.doc,A.line).text;if(U){if(A.ch==U.length&&(A=new He(A.line,A.ch-1)),A.ch>0)A=new He(A.line,A.ch+1),m.replaceRange(U.charAt(A.ch-1)+U.charAt(A.ch-2),He(A.line,A.ch-2),A,"+transpose");else if(A.line>m.doc.first){var te=ke(m.doc,A.line-1).text;te&&(A=new He(A.line,1),m.replaceRange(U.charAt(0)+m.doc.lineSeparator()+te.charAt(te.length-1),He(A.line-1,te.length-1),A,"+transpose"))}}E.push(new Qn(A,A))}m.setSelections(E)})},newlineAndIndent:function(m){return Pa(m,function(){for(var j=m.listSelections(),E=j.length-1;E>=0;E--)m.replaceRange(m.doc.lineSeparator(),j[E].anchor,j[E].head,"+input");j=m.listSelections();for(var _=0;_<j.length;_++)m.indentLine(j[_].from().line,null,!0);pd(m)})},openLine:function(m){return m.replaceSelection(`
`,"start")},toggleOverwrite:function(m){return m.toggleOverwrite()}};function cg(m,j){var E=ke(m.doc,j),_=Ie(E);return _!=E&&(j=Ct(_)),oh(!0,m,_,j,1)}function l0(m,j){var E=ke(m.doc,j),_=it(E);return _!=E&&(j=Ct(_)),oh(!0,m,E,j,-1)}function c0(m,j){var E=cg(m,j.line),_=ke(m.doc,E.line),A=le(_,m.doc.direction);if(!A||A[0].level==0){var U=Math.max(E.ch,_.text.search(/\S/)),te=j.line==E.line&&j.ch<=U&&j.ch;return He(E.line,te?0:U,E.sticky)}return E}function Ff(m,j,E){if(typeof j=="string"&&(j=Su[j],!j))return!1;m.display.input.ensurePolled();var _=m.display.shift,A=!1;try{m.isReadOnly()&&(m.state.suppressEdits=!0),E&&(m.display.shift=!1),A=j(m)!=$e}finally{m.display.shift=_,m.state.suppressEdits=!1}return A}function Nu(m,j,E){for(var _=0;_<m.state.keyMaps.length;_++){var A=jd(j,m.state.keyMaps[_],E,m);if(A)return A}return m.options.extraKeys&&jd(j,m.options.extraKeys,E,m)||jd(j,m.options.keyMap,E,m)}var d0=new ae;function Ac(m,j,E,_){var A=m.state.keySeq;if(A){if(sh(j))return"handled";if(/\'$/.test(j)?m.state.keySeq=null:d0.set(50,function(){m.state.keySeq==A&&(m.state.keySeq=null,m.display.input.reset())}),Bf(m,A+" "+j,E,_))return!0}return Bf(m,j,E,_)}function Bf(m,j,E,_){var A=Nu(m,j,_);return A=="multi"&&(m.state.keySeq=j),A=="handled"&&Ds(m,"keyHandled",m,j,E),(A=="handled"||A=="multi")&&(Xt(E),bf(m)),!!A}function dg(m,j){var E=o0(j,!0);return E?j.shiftKey&&!m.state.keySeq?Ac(m,"Shift-"+E,j,function(_){return Ff(m,_,!0)})||Ac(m,E,j,function(_){if(typeof _=="string"?/^go[A-Z]/.test(_):_.motion)return Ff(m,_)}):Ac(m,E,j,function(_){return Ff(m,_)}):!1}function ug(m,j,E){return Ac(m,"'"+E+"'",j,function(_){return Ff(m,_,!0)})}var fg=null;function pg(m){var j=this;if(!(m.target&&m.target!=j.display.input.getField())&&(j.curOp.focus=X(),!Ke(j,m))){l&&c<11&&m.keyCode==27&&(m.returnValue=!1);var E=m.keyCode;j.display.shift=E==16||m.shiftKey;var _=dg(j,m);g&&(fg=_?E:null,!_&&E==88&&!rr&&(N?m.metaKey:m.ctrlKey)&&j.replaceSelection("",null,"cut")),t&&!N&&!_&&E==46&&m.shiftKey&&!m.ctrlKey&&document.execCommand&&document.execCommand("cut"),E==18&&!/\bCodeMirror-crosshair\b/.test(j.display.lineDiv.className)&&u0(j)}}function u0(m){var j=m.display.lineDiv;se(j,"CodeMirror-crosshair");function E(_){(_.keyCode==18||!_.altKey)&&(z(j,"CodeMirror-crosshair"),ot(document,"keyup",E),ot(document,"mouseover",E))}De(document,"keyup",E),De(document,"mouseover",E)}function hg(m){m.keyCode==16&&(this.doc.sel.shift=!1),Ke(this,m)}function mg(m){var j=this;if(!(m.target&&m.target!=j.display.input.getField())&&!(zs(j.display,m)||Ke(j,m)||m.ctrlKey&&!m.altKey||N&&m.metaKey)){var E=m.keyCode,_=m.charCode;if(g&&E==fg){fg=null,Xt(m);return}if(!(g&&(!m.which||m.which<10)&&dg(j,m))){var A=String.fromCharCode(_??E);A!="\b"&&(ug(j,m,A)||j.display.input.onKeyPress(m))}}}var f0=400,zf=function(m,j,E){this.time=m,this.pos=j,this.button=E};zf.prototype.compare=function(m,j,E){return this.time+f0>m&&at(j,this.pos)==0&&E==this.button};var ku,_u;function gg(m,j){var E=+new Date;return _u&&_u.compare(E,m,j)?(ku=_u=null,"triple"):ku&&ku.compare(E,m,j)?(_u=new zf(E,m,j),ku=null,"double"):(ku=new zf(E,m,j),_u=null,"single")}function yg(m){var j=this,E=j.display;if(!(Ke(j,m)||E.activeTouch&&E.input.supportsTouch())){if(E.input.ensurePolled(),E.shift=m.shiftKey,zs(E,m)){d||(E.scroller.draggable=!1,setTimeout(function(){return E.scroller.draggable=!0},100));return}if(!jg(j,m)){var _=cd(j,m),A=et(m),U=_?gg(_,A):"single";window.focus(),A==1&&j.state.selectingText&&j.state.selectingText(m),!(_&&p0(j,A,_,U,m))&&(A==1?_?xg(j,_,U,m):Be(m)==E.scroller&&Xt(m):A==2?(_&&yu(j.doc,_),setTimeout(function(){return E.input.focus()},20)):A==3&&(G?j.display.input.onContextMenu(m):Hp(j)))}}}function p0(m,j,E,_,A){var U="Click";return _=="double"?U="Double"+U:_=="triple"&&(U="Triple"+U),U=(j==1?"Left":j==2?"Middle":"Right")+U,Ac(m,lg(U,A),A,function(te){if(typeof te=="string"&&(te=Su[te]),!te)return!1;var oe=!1;try{m.isReadOnly()&&(m.state.suppressEdits=!0),oe=te(m,E)!=$e}finally{m.state.suppressEdits=!1}return oe})}function Kj(m,j,E){var _=m.getOption("configureMouse"),A=_?_(m,j,E):{};if(A.unit==null){var U=O?E.shiftKey&&E.metaKey:E.altKey;A.unit=U?"rectangle":j=="single"?"char":j=="double"?"word":"line"}return(A.extend==null||m.doc.extend)&&(A.extend=m.doc.extend||E.shiftKey),A.addNew==null&&(A.addNew=N?E.metaKey:E.ctrlKey),A.moveOnDrag==null&&(A.moveOnDrag=!(N?E.altKey:E.ctrlKey)),A}function xg(m,j,E,_){l?setTimeout(K(bc,m),0):m.curOp.focus=X();var A=Kj(m,E,_),U=m.doc.sel,te;m.options.dragDrop&&wt&&!m.isReadOnly()&&E=="single"&&(te=U.contains(j))>-1&&(at((te=U.ranges[te]).from(),j)<0||j.xRel>0)&&(at(te.to(),j)>0||j.xRel<0)?h0(m,_,j,A):bg(m,_,j,A)}function h0(m,j,E,_){var A=m.display,U=!1,te=La(m,function(Ne){d&&(A.scroller.draggable=!1),m.state.draggingText=!1,m.state.delayingBlurEvent&&(m.hasFocus()?m.state.delayingBlurEvent=!1:Hp(m)),ot(A.wrapper.ownerDocument,"mouseup",te),ot(A.wrapper.ownerDocument,"mousemove",oe),ot(A.scroller,"dragstart",fe),ot(A.scroller,"drop",te),U||(Xt(Ne),_.addNew||yu(m.doc,E,null,null,_.extend),d&&!y||l&&c==9?setTimeout(function(){A.wrapper.ownerDocument.body.focus({preventScroll:!0}),A.input.focus()},20):A.input.focus())}),oe=function(Ne){U=U||Math.abs(j.clientX-Ne.clientX)+Math.abs(j.clientY-Ne.clientY)>=10},fe=function(){return U=!0};d&&(A.scroller.draggable=!0),m.state.draggingText=te,te.copy=!_.moveOnDrag,De(A.wrapper.ownerDocument,"mouseup",te),De(A.wrapper.ownerDocument,"mousemove",oe),De(A.scroller,"dragstart",fe),De(A.scroller,"drop",te),m.state.delayingBlurEvent=!0,setTimeout(function(){return A.input.focus()},20),A.scroller.dragDrop&&A.scroller.dragDrop()}function vg(m,j,E){if(E=="char")return new Qn(j,j);if(E=="word")return m.findWordAt(j);if(E=="line")return new Qn(He(j.line,0),Lt(m.doc,He(j.line+1,0)));var _=E(m,j);return new Qn(_.from,_.to)}function bg(m,j,E,_){l&&Hp(m);var A=m.display,U=m.doc;Xt(j);var te,oe,fe=U.sel,Ne=fe.ranges;if(_.addNew&&!_.extend?(oe=U.sel.contains(E),oe>-1?te=Ne[oe]:te=new Qn(E,E)):(te=U.sel.primary(),oe=U.sel.primIndex),_.unit=="rectangle")_.addNew||(te=new Qn(E,E)),E=cd(m,j,!0,!0),oe=-1;else{var qe=vg(m,E,_.unit);_.extend?te=Of(te,qe.anchor,qe.head,_.extend):te=qe}_.addNew?oe==-1?(oe=Ne.length,Aa(U,wo(m,Ne.concat([te]),oe),{scroll:!1,origin:"*mouse"})):Ne.length>1&&Ne[oe].empty()&&_.unit=="char"&&!_.extend?(Aa(U,wo(m,Ne.slice(0,oe).concat(Ne.slice(oe+1)),0),{scroll:!1,origin:"*mouse"}),fe=U.sel):ll(U,oe,te,Ae):(oe=0,Aa(U,new Mo([te],0),Ae),fe=U.sel);var rt=E;function St(Pr){if(at(rt,Pr)!=0)if(rt=Pr,_.unit=="rectangle"){for(var Dr=[],dn=m.options.tabSize,ln=ve(ke(U,E.line).text,E.ch,dn),Mn=ve(ke(U,Pr.line).text,Pr.ch,dn),ys=Math.min(ln,Mn),Ln=Math.max(ln,Mn),pa=Math.min(E.line,Pr.line),Go=Math.min(m.lastLine(),Math.max(E.line,Pr.line));pa<=Go;pa++){var jo=ke(U,pa).text,ia=Ge(jo,ys,dn);ys==Ln?Dr.push(new Qn(He(pa,ia),He(pa,ia))):jo.length>ia&&Dr.push(new Qn(He(pa,ia),He(pa,Ge(jo,Ln,dn))))}Dr.length||Dr.push(new Qn(E,E)),Aa(U,wo(m,fe.ranges.slice(0,oe).concat(Dr),oe),{origin:"*mouse",scroll:!1}),m.scrollIntoView(Pr)}else{var Sa=te,qa=vg(m,Pr,_.unit),Ia=Sa.anchor,la;at(qa.anchor,Ia)>0?(la=qa.head,Ia=ut(Sa.from(),qa.anchor)):(la=qa.anchor,Ia=Te(Sa.to(),qa.head));var xs=fe.ranges.slice(0);xs[oe]=m0(m,new Qn(Lt(U,Ia),la)),Aa(U,wo(m,xs,oe),Ae)}}var yt=A.wrapper.getBoundingClientRect(),Wt=0;function ir(Pr){var Dr=++Wt,dn=cd(m,Pr,!0,_.unit=="rectangle");if(dn)if(at(dn,rt)!=0){m.curOp.focus=X(),St(dn);var ln=uu(A,U);(dn.line>=ln.to||dn.line<ln.from)&&setTimeout(La(m,function(){Wt==Dr&&ir(Pr)}),150)}else{var Mn=Pr.clientY<yt.top?-20:Pr.clientY>yt.bottom?20:0;Mn&&setTimeout(La(m,function(){Wt==Dr&&(A.scroller.scrollTop+=Mn,ir(Pr))}),50)}}function hr(Pr){m.state.selectingText=!1,Wt=1/0,Pr&&(Xt(Pr),A.input.focus()),ot(A.wrapper.ownerDocument,"mousemove",Tr),ot(A.wrapper.ownerDocument,"mouseup",$r),U.history.lastSelOrigin=null}var Tr=La(m,function(Pr){Pr.buttons===0||!et(Pr)?hr(Pr):ir(Pr)}),$r=La(m,hr);m.state.selectingText=$r,De(A.wrapper.ownerDocument,"mousemove",Tr),De(A.wrapper.ownerDocument,"mouseup",$r)}function m0(m,j){var E=j.anchor,_=j.head,A=ke(m.doc,E.line);if(at(E,_)==0&&E.sticky==_.sticky)return j;var U=le(A);if(!U)return j;var te=de(U,E.ch,E.sticky),oe=U[te];if(oe.from!=E.ch&&oe.to!=E.ch)return j;var fe=te+(oe.from==E.ch==(oe.level!=1)?0:1);if(fe==0||fe==U.length)return j;var Ne;if(_.line!=E.line)Ne=(_.line-E.line)*(m.doc.direction=="ltr"?1:-1)>0;else{var qe=de(U,_.ch,_.sticky),rt=qe-te||(_.ch-E.ch)*(oe.level==1?-1:1);qe==fe-1||qe==fe?Ne=rt<0:Ne=rt>0}var St=U[fe+(Ne?-1:0)],yt=Ne==(St.level==1),Wt=yt?St.from:St.to,ir=yt?"after":"before";return E.ch==Wt&&E.sticky==ir?j:new Qn(new He(E.line,Wt,ir),_)}function wg(m,j,E,_){var A,U;if(j.touches)A=j.touches[0].clientX,U=j.touches[0].clientY;else try{A=j.clientX,U=j.clientY}catch{return!1}if(A>=Math.floor(m.display.gutters.getBoundingClientRect().right))return!1;_&&Xt(j);var te=m.display,oe=te.lineDiv.getBoundingClientRect();if(U>oe.bottom||!At(m,E))return zt(j);U-=oe.top-te.viewOffset;for(var fe=0;fe<m.display.gutterSpecs.length;++fe){var Ne=te.gutters.childNodes[fe];if(Ne&&Ne.getBoundingClientRect().right>=A){var qe=Xe(m.doc,U),rt=m.display.gutterSpecs[fe];return dt(m,E,m,qe,rt.className,j),zt(j)}}}function jg(m,j){return wg(m,j,"gutterClick",!0)}function g0(m,j){zs(m.display,j)||y0(m,j)||Ke(m,j,"contextmenu")||G||m.display.input.onContextMenu(j)}function y0(m,j){return At(m,"gutterContextMenu")?wg(m,j,"gutterContextMenu",!1):!1}function Eu(m){m.display.wrapper.className=m.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+m.options.theme.replace(/(^|\s)\s*/g," cm-s-"),gf(m)}var Mc={toString:function(){return"CodeMirror.Init"}},$f={},Uf={};function x0(m){var j=m.optionHandlers;function E(_,A,U,te){m.defaults[_]=A,U&&(j[_]=te?function(oe,fe,Ne){Ne!=Mc&&U(oe,fe,Ne)}:U)}m.defineOption=E,m.Init=Mc,E("value","",function(_,A){return _.setValue(A)},!0),E("mode",null,function(_,A){_.doc.modeOption=A,mu(_)},!0),E("indentUnit",2,mu,!0),E("indentWithTabs",!1),E("smartIndent",!0),E("tabSize",4,function(_){gu(_),gf(_),Oo(_)},!0),E("lineSeparator",null,function(_,A){if(_.doc.lineSep=A,!!A){var U=[],te=_.doc.first;_.doc.iter(function(fe){for(var Ne=0;;){var qe=fe.text.indexOf(A,Ne);if(qe==-1)break;Ne=qe+A.length,U.push(He(te,qe))}te++});for(var oe=U.length-1;oe>=0;oe--)Qs(_.doc,A,U[oe],He(U[oe].line,U[oe].ch+A.length))}}),E("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(_,A,U){_.state.specialChars=new RegExp(A.source+(A.test("	")?"":"|	"),"g"),U!=Mc&&_.refresh()}),E("specialCharPlaceholder",Vr,function(_){return _.refresh()},!0),E("electricChars",!0),E("inputStyle",k?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),E("spellcheck",!1,function(_,A){return _.getInputField().spellcheck=A},!0),E("autocorrect",!1,function(_,A){return _.getInputField().autocorrect=A},!0),E("autocapitalize",!1,function(_,A){return _.getInputField().autocapitalize=A},!0),E("rtlMoveVisually",!R),E("wholeLineUpdateBefore",!0),E("theme","default",function(_){Eu(_),Sf(_)},!0),E("keyMap","default",function(_,A,U){var te=Df(A),oe=U!=Mc&&Df(U);oe&&oe.detach&&oe.detach(_,te),te.attach&&te.attach(_,oe||null)}),E("extraKeys",null),E("configureMouse",null),E("lineWrapping",!1,v0,!0),E("gutters",[],function(_,A){_.display.gutterSpecs=pu(A,_.options.lineNumbers),Sf(_)},!0),E("fixedGutter",!0,function(_,A){_.display.gutters.style.left=A?zp(_.display)+"px":"0",_.refresh()},!0),E("coverGutterNextToScrollbar",!1,function(_){return Ao(_)},!0),E("scrollbarStyle","native",function(_){Hm(_),Ao(_),_.display.scrollbars.setScrollTop(_.doc.scrollTop),_.display.scrollbars.setScrollLeft(_.doc.scrollLeft)},!0),E("lineNumbers",!1,function(_,A){_.display.gutterSpecs=pu(_.options.gutters,A),Sf(_)},!0),E("firstLineNumber",1,Sf,!0),E("lineNumberFormatter",function(_){return _},Sf,!0),E("showCursorWhenSelecting",!1,vo,!0),E("resetSelectionOnContextMenu",!0),E("lineWiseCopyCut",!0),E("pasteLinesPerSelection",!0),E("selectionsMayTouch",!1),E("readOnly",!1,function(_,A){A=="nocursor"&&(Bi(_),_.display.input.blur()),_.display.input.readOnlyChanged(A)}),E("screenReaderLabel",null,function(_,A){A=A===""?null:A,_.display.input.screenReaderLabelChanged(A)}),E("disableInput",!1,function(_,A){A||_.display.input.reset()},!0),E("dragDrop",!0,Vf),E("allowDropFileTypes",null),E("cursorBlinkRate",530),E("cursorScrollMargin",0),E("cursorHeight",1,vo,!0),E("singleCursorHeightPerLine",!0,vo,!0),E("workTime",100),E("workDelay",100),E("flattenSpans",!0,gu,!0),E("addModeClass",!1,gu,!0),E("pollInterval",100),E("undoDepth",200,function(_,A){return _.doc.history.undoDepth=A}),E("historyEventDelay",1250),E("viewportMargin",10,function(_){return _.refresh()},!0),E("maxHighlightLength",1e4,gu,!0),E("moveInputWithCursor",!0,function(_,A){A||_.display.input.resetPosition()}),E("tabindex",null,function(_,A){return _.display.input.getField().tabIndex=A||""}),E("autofocus",null),E("direction","ltr",function(_,A){return _.doc.setDirection(A)},!0),E("phrases",null)}function Vf(m,j,E){var _=E&&E!=Mc;if(!j!=!_){var A=m.display.dragFunctions,U=j?De:ot;U(m.display.scroller,"dragstart",A.start),U(m.display.scroller,"dragenter",A.enter),U(m.display.scroller,"dragover",A.over),U(m.display.scroller,"dragleave",A.leave),U(m.display.scroller,"drop",A.drop)}}function v0(m){m.options.lineWrapping?(se(m.display.wrapper,"CodeMirror-wrap"),m.display.sizer.style.minWidth="",m.display.sizerWidth=null):(z(m.display.wrapper,"CodeMirror-wrap"),Rt(m)),$p(m),Oo(m),gf(m),setTimeout(function(){return Ao(m)},100)}function Us(m,j){var E=this;if(!(this instanceof Us))return new Us(m,j);this.options=j=j?Z(j):{},Z($f,j,!1);var _=j.value;typeof _=="string"?_=new lo(_,j.mode,null,j.lineSeparator,j.direction):j.mode&&(_.modeOption=j.mode),this.doc=_;var A=new Us.inputStyles[j.inputStyle](this),U=this.display=new qj(m,_,A,j);U.wrapper.CodeMirror=this,Eu(this),j.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Hm(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new ae,keySeq:null,specialChars:null},j.autofocus&&!k&&U.input.focus(),l&&c<11&&setTimeout(function(){return E.display.input.reset(!0)},20),b0(this),ig(),Fl(this),this.curOp.forceUpdate=!0,_f(this,_),j.autofocus&&!k||this.hasFocus()?setTimeout(function(){E.hasFocus()&&!E.state.focused&&du(E)},20):Bi(this);for(var te in Uf)Uf.hasOwnProperty(te)&&Uf[te](this,j[te],Mc);eo(this),j.finishInit&&j.finishInit(this);for(var oe=0;oe<Hf.length;++oe)Hf[oe](this);wc(this),d&&j.lineWrapping&&getComputedStyle(U.lineDiv).textRendering=="optimizelegibility"&&(U.lineDiv.style.textRendering="auto")}Us.defaults=$f,Us.optionHandlers=Uf;function b0(m){var j=m.display;De(j.scroller,"mousedown",La(m,yg)),l&&c<11?De(j.scroller,"dblclick",La(m,function(fe){if(!Ke(m,fe)){var Ne=cd(m,fe);if(!(!Ne||jg(m,fe)||zs(m.display,fe))){Xt(fe);var qe=m.findWordAt(Ne);yu(m.doc,qe.anchor,qe.head)}}})):De(j.scroller,"dblclick",function(fe){return Ke(m,fe)||Xt(fe)}),De(j.scroller,"contextmenu",function(fe){return g0(m,fe)}),De(j.input.getField(),"contextmenu",function(fe){j.scroller.contains(fe.target)||g0(m,fe)});var E,_={end:0};function A(){j.activeTouch&&(E=setTimeout(function(){return j.activeTouch=null},1e3),_=j.activeTouch,_.end=+new Date)}function U(fe){if(fe.touches.length!=1)return!1;var Ne=fe.touches[0];return Ne.radiusX<=1&&Ne.radiusY<=1}function te(fe,Ne){if(Ne.left==null)return!0;var qe=Ne.left-fe.left,rt=Ne.top-fe.top;return qe*qe+rt*rt>400}De(j.scroller,"touchstart",function(fe){if(!Ke(m,fe)&&!U(fe)&&!jg(m,fe)){j.input.ensurePolled(),clearTimeout(E);var Ne=+new Date;j.activeTouch={start:Ne,moved:!1,prev:Ne-_.end<=300?_:null},fe.touches.length==1&&(j.activeTouch.left=fe.touches[0].pageX,j.activeTouch.top=fe.touches[0].pageY)}}),De(j.scroller,"touchmove",function(){j.activeTouch&&(j.activeTouch.moved=!0)}),De(j.scroller,"touchend",function(fe){var Ne=j.activeTouch;if(Ne&&!zs(j,fe)&&Ne.left!=null&&!Ne.moved&&new Date-Ne.start<300){var qe=m.coordsChar(j.activeTouch,"page"),rt;!Ne.prev||te(Ne,Ne.prev)?rt=new Qn(qe,qe):!Ne.prev.prev||te(Ne,Ne.prev.prev)?rt=m.findWordAt(qe):rt=new Qn(He(qe.line,0),Lt(m.doc,He(qe.line+1,0))),m.setSelection(rt.anchor,rt.head),m.focus(),Xt(fe)}A()}),De(j.scroller,"touchcancel",A),De(j.scroller,"scroll",function(){j.scroller.clientHeight&&(nl(m,j.scroller.scrollTop),zi(m,j.scroller.scrollLeft,!0),dt(m,"scroll",m))}),De(j.scroller,"mousewheel",function(fe){return hu(m,fe)}),De(j.scroller,"DOMMouseScroll",function(fe){return hu(m,fe)}),De(j.wrapper,"scroll",function(){return j.wrapper.scrollTop=j.wrapper.scrollLeft=0}),j.dragFunctions={enter:function(fe){Ke(m,fe)||be(fe)},over:function(fe){Ke(m,fe)||(Ma(m,fe),be(fe))},start:function(fe){return Io(m,fe)},drop:La(m,og),leave:function(fe){Ke(m,fe)||Mf(m)}};var oe=j.input.getField();De(oe,"keyup",function(fe){return hg.call(m,fe)}),De(oe,"keydown",La(m,pg)),De(oe,"keypress",La(m,mg)),De(oe,"focus",function(fe){return du(m,fe)}),De(oe,"blur",function(fe){return Bi(m,fe)})}var Hf=[];Us.defineInitHook=function(m){return Hf.push(m)};function Sd(m,j,E,_){var A=m.doc,U;E==null&&(E="add"),E=="smart"&&(A.mode.indent?U=Xn(m,j).state:E="prev");var te=m.options.tabSize,oe=ke(A,j),fe=ve(oe.text,null,te);oe.stateAfter&&(oe.stateAfter=null);var Ne=oe.text.match(/^\s*/)[0],qe;if(!_&&!/\S/.test(oe.text))qe=0,E="not";else if(E=="smart"&&(qe=A.mode.indent(U,oe.text.slice(Ne.length),oe.text),qe==$e||qe>150)){if(!_)return;E="prev"}E=="prev"?j>A.first?qe=ve(ke(A,j-1).text,null,te):qe=0:E=="add"?qe=fe+m.options.indentUnit:E=="subtract"?qe=fe-m.options.indentUnit:typeof E=="number"&&(qe=fe+E),qe=Math.max(0,qe);var rt="",St=0;if(m.options.indentWithTabs)for(var yt=Math.floor(qe/te);yt;--yt)St+=te,rt+="	";if(St<qe&&(rt+=ht(qe-St)),rt!=Ne)return Qs(A,rt,He(j,0),He(j,Ne.length),"+input"),oe.stateAfter=null,!0;for(var Wt=0;Wt<A.sel.ranges.length;Wt++){var ir=A.sel.ranges[Wt];if(ir.head.line==j&&ir.head.ch<Ne.length){var hr=He(j,Ne.length);ll(A,Wt,new Qn(hr,hr));break}}}var yi=null;function Wf(m){yi=m}function ql(m,j,E,_,A){var U=m.doc;m.display.shift=!1,_||(_=U.sel);var te=+new Date-200,oe=A=="paste"||m.state.pasteIncoming>te,fe=bn(j),Ne=null;if(oe&&_.ranges.length>1)if(yi&&yi.text.join(`
`)==j){if(_.ranges.length%yi.text.length==0){Ne=[];for(var qe=0;qe<yi.text.length;qe++)Ne.push(U.splitLines(yi.text[qe]))}}else fe.length==_.ranges.length&&m.options.pasteLinesPerSelection&&(Ne=ue(fe,function(Tr){return[Tr]}));for(var rt=m.curOp.updateInput,St=_.ranges.length-1;St>=0;St--){var yt=_.ranges[St],Wt=yt.from(),ir=yt.to();yt.empty()&&(E&&E>0?Wt=He(Wt.line,Wt.ch-E):m.state.overwrite&&!oe?ir=He(ir.line,Math.min(ke(U,ir.line).text.length,ir.ch+ee(fe).length)):oe&&yi&&yi.lineWise&&yi.text.join(`
`)==fe.join(`
`)&&(Wt=ir=He(Wt.line,0)));var hr={from:Wt,to:ir,text:Ne?Ne[St%Ne.length]:fe,origin:A||(oe?"paste":m.state.cutIncoming>te?"cut":"+input")};io(m.doc,hr),Ds(m,"inputRead",m,hr)}j&&!oe&&Sg(m,j),pd(m),m.curOp.updateInput<2&&(m.curOp.updateInput=rt),m.curOp.typing=!0,m.state.pasteIncoming=m.state.cutIncoming=-1}function Cg(m,j){var E=m.clipboardData&&m.clipboardData.getData("Text");if(E)return m.preventDefault(),!j.isReadOnly()&&!j.options.disableInput&&Pa(j,function(){return ql(j,E,0,null,"paste")}),!0}function Sg(m,j){if(!(!m.options.electricChars||!m.options.smartIndent))for(var E=m.doc.sel,_=E.ranges.length-1;_>=0;_--){var A=E.ranges[_];if(!(A.head.ch>100||_&&E.ranges[_-1].head.line==A.head.line)){var U=m.getModeAt(A.head),te=!1;if(U.electricChars){for(var oe=0;oe<U.electricChars.length;oe++)if(j.indexOf(U.electricChars.charAt(oe))>-1){te=Sd(m,A.head.line,"smart");break}}else U.electricInput&&U.electricInput.test(ke(m.doc,A.head.line).text.slice(0,A.head.ch))&&(te=Sd(m,A.head.line,"smart"));te&&Ds(m,"electricInput",m,A.head.line)}}}function Ng(m){for(var j=[],E=[],_=0;_<m.doc.sel.ranges.length;_++){var A=m.doc.sel.ranges[_].head.line,U={anchor:He(A,0),head:He(A+1,0)};E.push(U),j.push(m.getRange(U.anchor,U.head))}return{text:j,ranges:E}}function qf(m,j,E,_){m.setAttribute("autocorrect",E?"":"off"),m.setAttribute("autocapitalize",_?"":"off"),m.setAttribute("spellcheck",!!j)}function kg(){var m=q("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),j=q("div",[m],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return d?m.style.width="1000px":m.setAttribute("wrap","off"),w&&(m.style.border="1px solid black"),qf(m),j}function _g(m){var j=m.optionHandlers,E=m.helpers={};m.prototype={constructor:m,focus:function(){window.focus(),this.display.input.focus()},setOption:function(_,A){var U=this.options,te=U[_];U[_]==A&&_!="mode"||(U[_]=A,j.hasOwnProperty(_)&&La(this,j[_])(this,A,te),dt(this,"optionChange",this,_))},getOption:function(_){return this.options[_]},getDoc:function(){return this.doc},addKeyMap:function(_,A){this.state.keyMaps[A?"push":"unshift"](Df(_))},removeKeyMap:function(_){for(var A=this.state.keyMaps,U=0;U<A.length;++U)if(A[U]==_||A[U].name==_)return A.splice(U,1),!0},addOverlay:oo(function(_,A){var U=_.token?_:m.getMode(this.options,_);if(U.startState)throw new Error("Overlays may not be stateful.");Oe(this.state.overlays,{mode:U,modeSpec:_,opaque:A&&A.opaque,priority:A&&A.priority||0},function(te){return te.priority}),this.state.modeGen++,Oo(this)}),removeOverlay:oo(function(_){for(var A=this.state.overlays,U=0;U<A.length;++U){var te=A[U].modeSpec;if(te==_||typeof _=="string"&&te.name==_){A.splice(U,1),this.state.modeGen++,Oo(this);return}}}),indentLine:oo(function(_,A,U){typeof A!="string"&&typeof A!="number"&&(A==null?A=this.options.smartIndent?"smart":"prev":A=A?"add":"subtract"),Ve(this.doc,_)&&Sd(this,_,A,U)}),indentSelection:oo(function(_){for(var A=this.doc.sel.ranges,U=-1,te=0;te<A.length;te++){var oe=A[te];if(oe.empty())oe.head.line>U&&(Sd(this,oe.head.line,_,!0),U=oe.head.line,te==this.doc.sel.primIndex&&pd(this));else{var fe=oe.from(),Ne=oe.to(),qe=Math.max(U,fe.line);U=Math.min(this.lastLine(),Ne.line-(Ne.ch?0:1))+1;for(var rt=qe;rt<U;++rt)Sd(this,rt,_);var St=this.doc.sel.ranges;fe.ch==0&&A.length==St.length&&St[te].from().ch>0&&ll(this.doc,te,new Qn(fe,St[te].to()),we)}}}),getTokenAt:function(_,A){return ya(this,_,A)},getLineTokens:function(_,A){return ya(this,He(_),A,!0)},getTokenTypeAt:function(_){_=Lt(this.doc,_);var A=ps(this,ke(this.doc,_.line)),U=0,te=(A.length-1)/2,oe=_.ch,fe;if(oe==0)fe=A[2];else for(;;){var Ne=U+te>>1;if((Ne?A[Ne*2-1]:0)>=oe)te=Ne;else if(A[Ne*2+1]<oe)U=Ne+1;else{fe=A[Ne*2+2];break}}var qe=fe?fe.indexOf("overlay "):-1;return qe<0?fe:qe==0?null:fe.slice(0,qe-1)},getModeAt:function(_){var A=this.doc.mode;return A.innerMode?m.innerMode(A,this.getTokenAt(_).state).mode:A},getHelper:function(_,A){return this.getHelpers(_,A)[0]},getHelpers:function(_,A){var U=[];if(!E.hasOwnProperty(A))return U;var te=E[A],oe=this.getModeAt(_);if(typeof oe[A]=="string")te[oe[A]]&&U.push(te[oe[A]]);else if(oe[A])for(var fe=0;fe<oe[A].length;fe++){var Ne=te[oe[A][fe]];Ne&&U.push(Ne)}else oe.helperType&&te[oe.helperType]?U.push(te[oe.helperType]):te[oe.name]&&U.push(te[oe.name]);for(var qe=0;qe<te._global.length;qe++){var rt=te._global[qe];rt.pred(oe,this)&&Se(U,rt.val)==-1&&U.push(rt.val)}return U},getStateAfter:function(_,A){var U=this.doc;return _=jt(U,_??U.first+U.size-1),Xn(this,_+1,A).state},cursorCoords:function(_,A){var U,te=this.doc.sel.primary();return _==null?U=te.head:typeof _=="object"?U=Lt(this.doc,_):U=_?te.from():te.to(),fi(this,U,A||"page")},charCoords:function(_,A){return yf(this,Lt(this.doc,_),A||"page")},coordsChar:function(_,A){return _=Bm(this,_,A||"page"),$m(this,_.left,_.top)},lineAtHeight:function(_,A){return _=Bm(this,{top:_,left:0},A||"page").top,Xe(this.doc,_+this.display.viewOffset)},heightAtLine:function(_,A,U){var te=!1,oe;if(typeof _=="number"){var fe=this.doc.first+this.doc.size-1;_<this.doc.first?_=this.doc.first:_>fe&&(_=fe,te=!0),oe=ke(this.doc,_)}else oe=_;return xc(this,oe,{top:0,left:0},A||"page",U||te).top+(te?this.doc.height-Ft(oe):0)},defaultTextHeight:function(){return vc(this.display)},defaultCharWidth:function(){return ld(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(_,A,U,te,oe){var fe=this.display;_=fi(this,Lt(this.doc,_));var Ne=_.bottom,qe=_.left;if(A.style.position="absolute",A.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(A),fe.sizer.appendChild(A),te=="over")Ne=_.top;else if(te=="above"||te=="near"){var rt=Math.max(fe.wrapper.clientHeight,this.doc.height),St=Math.max(fe.sizer.clientWidth,fe.lineSpace.clientWidth);(te=="above"||_.bottom+A.offsetHeight>rt)&&_.top>A.offsetHeight?Ne=_.top-A.offsetHeight:_.bottom+A.offsetHeight<=rt&&(Ne=_.bottom),qe+A.offsetWidth>St&&(qe=St-A.offsetWidth)}A.style.top=Ne+"px",A.style.left=A.style.right="",oe=="right"?(qe=fe.sizer.clientWidth-A.offsetWidth,A.style.right="0px"):(oe=="left"?qe=0:oe=="middle"&&(qe=(fe.sizer.clientWidth-A.offsetWidth)/2),A.style.left=qe+"px"),U&&qp(this,{left:qe,top:Ne,right:qe+A.offsetWidth,bottom:Ne+A.offsetHeight})},triggerOnKeyDown:oo(pg),triggerOnKeyPress:oo(mg),triggerOnKeyUp:hg,triggerOnMouseDown:oo(yg),execCommand:function(_){if(Su.hasOwnProperty(_))return Su[_].call(null,this)},triggerElectric:oo(function(_){Sg(this,_)}),findPosH:function(_,A,U,te){var oe=1;A<0&&(oe=-1,A=-A);for(var fe=Lt(this.doc,_),Ne=0;Ne<A&&(fe=ih(this.doc,fe,oe,U,te),!fe.hitSide);++Ne);return fe},moveH:oo(function(_,A){var U=this;this.extendSelectionsBy(function(te){return U.display.shift||U.doc.extend||te.empty()?ih(U.doc,te.head,_,A,U.options.rtlMoveVisually):_<0?te.from():te.to()},ze)}),deleteH:oo(function(_,A){var U=this.doc.sel,te=this.doc;U.somethingSelected()?te.replaceSelection("",null,"+delete"):Cd(this,function(oe){var fe=ih(te,oe.head,_,A,!1);return _<0?{from:fe,to:oe.head}:{from:oe.head,to:fe}})}),findPosV:function(_,A,U,te){var oe=1,fe=te;A<0&&(oe=-1,A=-A);for(var Ne=Lt(this.doc,_),qe=0;qe<A;++qe){var rt=fi(this,Ne,"div");if(fe==null?fe=rt.left:rt.left=fe,Ne=Eg(this,rt,oe,U),Ne.hitSide)break}return Ne},moveV:oo(function(_,A){var U=this,te=this.doc,oe=[],fe=!this.display.shift&&!te.extend&&te.sel.somethingSelected();if(te.extendSelectionsBy(function(qe){if(fe)return _<0?qe.from():qe.to();var rt=fi(U,qe.head,"div");qe.goalColumn!=null&&(rt.left=qe.goalColumn),oe.push(rt.left);var St=Eg(U,rt,_,A);return A=="page"&&qe==te.sel.primary()&&wf(U,yf(U,St,"div").top-rt.top),St},ze),oe.length)for(var Ne=0;Ne<te.sel.ranges.length;Ne++)te.sel.ranges[Ne].goalColumn=oe[Ne]}),findWordAt:function(_){var A=this.doc,U=ke(A,_.line).text,te=_.ch,oe=_.ch;if(U){var fe=this.getHelper(_,"wordChars");(_.sticky=="before"||oe==U.length)&&te?--te:++oe;for(var Ne=U.charAt(te),qe=pe(Ne,fe)?function(rt){return pe(rt,fe)}:/\s/.test(Ne)?function(rt){return/\s/.test(rt)}:function(rt){return!/\s/.test(rt)&&!pe(rt)};te>0&&qe(U.charAt(te-1));)--te;for(;oe<U.length&&qe(U.charAt(oe));)++oe}return new Qn(He(_.line,te),He(_.line,oe))},toggleOverwrite:function(_){_!=null&&_==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?se(this.display.cursorDiv,"CodeMirror-overwrite"):z(this.display.cursorDiv,"CodeMirror-overwrite"),dt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==X()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:oo(function(_,A){hd(this,_,A)}),getScrollInfo:function(){var _=this.display.scroller;return{left:_.scrollLeft,top:_.scrollTop,height:_.scrollHeight-Xa(this)-this.display.barHeight,width:_.scrollWidth-Xa(this)-this.display.barWidth,clientHeight:ye(this),clientWidth:rl(this)}},scrollIntoView:oo(function(_,A){_==null?(_={from:this.doc.sel.primary().head,to:null},A==null&&(A=this.options.cursorScrollMargin)):typeof _=="number"?_={from:He(_,0),to:null}:_.from==null&&(_={from:_,to:null}),_.to||(_.to=_.from),_.margin=A||0,_.from.line!=null?Xx(this,_):md(this,_.from,_.to,_.margin)}),setSize:oo(function(_,A){var U=this,te=function(fe){return typeof fe=="number"||/^\d+$/.test(String(fe))?fe+"px":fe};_!=null&&(this.display.wrapper.style.width=te(_)),A!=null&&(this.display.wrapper.style.height=te(A)),this.options.lineWrapping&&qx(this);var oe=this.display.viewFrom;this.doc.iter(oe,this.display.viewTo,function(fe){if(fe.widgets){for(var Ne=0;Ne<fe.widgets.length;Ne++)if(fe.widgets[Ne].noHScroll){Il(U,oe,"widget");break}}++oe}),this.curOp.forceUpdate=!0,dt(this,"refresh",this)}),operation:function(_){return Pa(this,_)},startOperation:function(){return Fl(this)},endOperation:function(){return wc(this)},refresh:oo(function(){var _=this.display.cachedTextHeight;Oo(this),this.curOp.forceUpdate=!0,gf(this),hd(this,this.doc.scrollLeft,this.doc.scrollTop),Sc(this.display),(_==null||Math.abs(_-vc(this.display))>.5||this.options.lineWrapping)&&$p(this),dt(this,"refresh",this)}),swapDoc:oo(function(_){var A=this.doc;return A.cm=null,this.state.selectingText&&this.state.selectingText(),_f(this,_),gf(this),this.display.input.reset(),hd(this,_.scrollLeft,_.scrollTop),this.curOp.forceScroll=!0,Ds(this,"swapDoc",this,A),A}),phrase:function(_){var A=this.options.phrases;return A&&Object.prototype.hasOwnProperty.call(A,_)?A[_]:_},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},xt(m),m.registerHelper=function(_,A,U){E.hasOwnProperty(_)||(E[_]=m[_]={_global:[]}),E[_][A]=U},m.registerGlobalHelper=function(_,A,U,te){m.registerHelper(_,A,te),E[_]._global.push({pred:U,val:te})}}function ih(m,j,E,_,A){var U=j,te=E,oe=ke(m,j.line),fe=A&&m.direction=="rtl"?-E:E;function Ne(){var $r=j.line+fe;return $r<m.first||$r>=m.first+m.size?!1:(j=new He($r,j.ch,j.sticky),oe=ke(m,$r))}function qe($r){var Pr;if(_=="codepoint"){var Dr=oe.text.charCodeAt(j.ch+(E>0?0:-1));if(isNaN(Dr))Pr=null;else{var dn=E>0?Dr>=55296&&Dr<56320:Dr>=56320&&Dr<57343;Pr=new He(j.line,Math.max(0,Math.min(oe.text.length,j.ch+E*(dn?2:1))),-E)}}else A?Pr=i0(m.cm,oe,j,E):Pr=Lf(oe,j,E);if(Pr==null)if(!$r&&Ne())j=oh(A,m.cm,oe,j.line,fe);else return!1;else j=Pr;return!0}if(_=="char"||_=="codepoint")qe();else if(_=="column")qe(!0);else if(_=="word"||_=="group")for(var rt=null,St=_=="group",yt=m.cm&&m.cm.getHelper(j,"wordChars"),Wt=!0;!(E<0&&!qe(!Wt));Wt=!1){var ir=oe.text.charAt(j.ch)||`
`,hr=pe(ir,yt)?"w":St&&ir==`
`?"n":!St||/\s/.test(ir)?null:"p";if(St&&!Wt&&!hr&&(hr="s"),rt&&rt!=hr){E<0&&(E=1,qe(),j.sticky="after");break}if(hr&&(rt=hr),E>0&&!qe(!Wt))break}var Tr=Pf(m,j,U,te,!0);return Ot(U,Tr)&&(Tr.hitSide=!0),Tr}function Eg(m,j,E,_){var A=m.doc,U=j.left,te;if(_=="page"){var oe=Math.min(m.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),fe=Math.max(oe-.5*vc(m.display),3);te=(E>0?j.bottom:j.top)+E*fe}else _=="line"&&(te=E>0?j.bottom+3:j.top-3);for(var Ne;Ne=$m(m,U,te),!!Ne.outside;){if(E<0?te<=0:te>=A.height){Ne.hitSide=!0;break}te+=E*5}return Ne}var js=function(m){this.cm=m,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new ae,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};js.prototype.init=function(m){var j=this,E=this,_=E.cm,A=E.div=m.lineDiv;A.contentEditable=!0,qf(A,_.options.spellcheck,_.options.autocorrect,_.options.autocapitalize);function U(oe){for(var fe=oe.target;fe;fe=fe.parentNode){if(fe==A)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(fe.className))break}return!1}De(A,"paste",function(oe){!U(oe)||Ke(_,oe)||Cg(oe,_)||c<=11&&setTimeout(La(_,function(){return j.updateFromDOM()}),20)}),De(A,"compositionstart",function(oe){j.composing={data:oe.data,done:!1}}),De(A,"compositionupdate",function(oe){j.composing||(j.composing={data:oe.data,done:!1})}),De(A,"compositionend",function(oe){j.composing&&(oe.data!=j.composing.data&&j.readFromDOMSoon(),j.composing.done=!0)}),De(A,"touchstart",function(){return E.forceCompositionEnd()}),De(A,"input",function(){j.composing||j.readFromDOMSoon()});function te(oe){if(!(!U(oe)||Ke(_,oe))){if(_.somethingSelected())Wf({lineWise:!1,text:_.getSelections()}),oe.type=="cut"&&_.replaceSelection("",null,"cut");else if(_.options.lineWiseCopyCut){var fe=Ng(_);Wf({lineWise:!0,text:fe.text}),oe.type=="cut"&&_.operation(function(){_.setSelections(fe.ranges,0,we),_.replaceSelection("",null,"cut")})}else return;if(oe.clipboardData){oe.clipboardData.clearData();var Ne=yi.text.join(`
`);if(oe.clipboardData.setData("Text",Ne),oe.clipboardData.getData("Text")==Ne){oe.preventDefault();return}}var qe=kg(),rt=qe.firstChild;_.display.lineSpace.insertBefore(qe,_.display.lineSpace.firstChild),rt.value=yi.text.join(`
`);var St=X();xe(rt),setTimeout(function(){_.display.lineSpace.removeChild(qe),St.focus(),St==A&&E.showPrimarySelection()},50)}}De(A,"copy",te),De(A,"cut",te)},js.prototype.screenReaderLabelChanged=function(m){m?this.div.setAttribute("aria-label",m):this.div.removeAttribute("aria-label")},js.prototype.prepareSelection=function(){var m=ud(this.cm,!1);return m.focus=X()==this.div,m},js.prototype.showSelection=function(m,j){!m||!this.cm.display.view.length||((m.focus||j)&&this.showPrimarySelection(),this.showMultipleSelections(m))},js.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},js.prototype.showPrimarySelection=function(){var m=this.getSelection(),j=this.cm,E=j.doc.sel.primary(),_=E.from(),A=E.to();if(j.display.viewTo==j.display.viewFrom||_.line>=j.display.viewTo||A.line<j.display.viewFrom){m.removeAllRanges();return}var U=Gf(j,m.anchorNode,m.anchorOffset),te=Gf(j,m.focusNode,m.focusOffset);if(!(U&&!U.bad&&te&&!te.bad&&at(ut(U,te),_)==0&&at(Te(U,te),A)==0)){var oe=j.display.view,fe=_.line>=j.display.viewFrom&&lh(j,_)||{node:oe[0].measure.map[2],offset:0},Ne=A.line<j.display.viewTo&&lh(j,A);if(!Ne){var qe=oe[oe.length-1].measure,rt=qe.maps?qe.maps[qe.maps.length-1]:qe.map;Ne={node:rt[rt.length-1],offset:rt[rt.length-2]-rt[rt.length-3]}}if(!fe||!Ne){m.removeAllRanges();return}var St=m.rangeCount&&m.getRangeAt(0),yt;try{yt=H(fe.node,fe.offset,Ne.offset,Ne.node)}catch{}yt&&(!t&&j.state.focused?(m.collapse(fe.node,fe.offset),yt.collapsed||(m.removeAllRanges(),m.addRange(yt))):(m.removeAllRanges(),m.addRange(yt)),St&&m.anchorNode==null?m.addRange(St):t&&this.startGracePeriod()),this.rememberSelection()}},js.prototype.startGracePeriod=function(){var m=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){m.gracePeriod=!1,m.selectionChanged()&&m.cm.operation(function(){return m.cm.curOp.selectionChanged=!0})},20)},js.prototype.showMultipleSelections=function(m){M(this.cm.display.cursorDiv,m.cursors),M(this.cm.display.selectionDiv,m.selection)},js.prototype.rememberSelection=function(){var m=this.getSelection();this.lastAnchorNode=m.anchorNode,this.lastAnchorOffset=m.anchorOffset,this.lastFocusNode=m.focusNode,this.lastFocusOffset=m.focusOffset},js.prototype.selectionInEditor=function(){var m=this.getSelection();if(!m.rangeCount)return!1;var j=m.getRangeAt(0).commonAncestorContainer;return D(this.div,j)},js.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||X()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},js.prototype.blur=function(){this.div.blur()},js.prototype.getField=function(){return this.div},js.prototype.supportsTouch=function(){return!0},js.prototype.receivedFocus=function(){var m=this,j=this;this.selectionInEditor()?setTimeout(function(){return m.pollSelection()},20):Pa(this.cm,function(){return j.cm.curOp.selectionChanged=!0});function E(){j.cm.state.focused&&(j.pollSelection(),j.polling.set(j.cm.options.pollInterval,E))}this.polling.set(this.cm.options.pollInterval,E)},js.prototype.selectionChanged=function(){var m=this.getSelection();return m.anchorNode!=this.lastAnchorNode||m.anchorOffset!=this.lastAnchorOffset||m.focusNode!=this.lastFocusNode||m.focusOffset!=this.lastFocusOffset},js.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var m=this.getSelection(),j=this.cm;if(C&&h&&this.cm.display.gutterSpecs.length&&Fa(m.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var E=Gf(j,m.anchorNode,m.anchorOffset),_=Gf(j,m.focusNode,m.focusOffset);E&&_&&Pa(j,function(){Aa(j.doc,kc(E,_),we),(E.bad||_.bad)&&(j.curOp.selectionChanged=!0)})}}},js.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var m=this.cm,j=m.display,E=m.doc.sel.primary(),_=E.from(),A=E.to();if(_.ch==0&&_.line>m.firstLine()&&(_=He(_.line-1,ke(m.doc,_.line-1).length)),A.ch==ke(m.doc,A.line).text.length&&A.line<m.lastLine()&&(A=He(A.line+1,0)),_.line<j.viewFrom||A.line>j.viewTo-1)return!1;var U,te,oe;_.line==j.viewFrom||(U=dd(m,_.line))==0?(te=Ct(j.view[0].line),oe=j.view[0].node):(te=Ct(j.view[U].line),oe=j.view[U-1].node.nextSibling);var fe=dd(m,A.line),Ne,qe;if(fe==j.view.length-1?(Ne=j.viewTo-1,qe=j.lineDiv.lastChild):(Ne=Ct(j.view[fe+1].line)-1,qe=j.view[fe+1].node.previousSibling),!oe)return!1;for(var rt=m.doc.splitLines(w0(m,oe,qe,te,Ne)),St=Re(m.doc,He(te,0),He(Ne,ke(m.doc,Ne).text.length));rt.length>1&&St.length>1;)if(ee(rt)==ee(St))rt.pop(),St.pop(),Ne--;else if(rt[0]==St[0])rt.shift(),St.shift(),te++;else break;for(var yt=0,Wt=0,ir=rt[0],hr=St[0],Tr=Math.min(ir.length,hr.length);yt<Tr&&ir.charCodeAt(yt)==hr.charCodeAt(yt);)++yt;for(var $r=ee(rt),Pr=ee(St),Dr=Math.min($r.length-(rt.length==1?yt:0),Pr.length-(St.length==1?yt:0));Wt<Dr&&$r.charCodeAt($r.length-Wt-1)==Pr.charCodeAt(Pr.length-Wt-1);)++Wt;if(rt.length==1&&St.length==1&&te==_.line)for(;yt&&yt>_.ch&&$r.charCodeAt($r.length-Wt-1)==Pr.charCodeAt(Pr.length-Wt-1);)yt--,Wt++;rt[rt.length-1]=$r.slice(0,$r.length-Wt).replace(/^\u200b+/,""),rt[0]=rt[0].slice(yt).replace(/\u200b+$/,"");var dn=He(te,yt),ln=He(Ne,St.length?ee(St).length-Wt:0);if(rt.length>1||rt[0]||at(dn,ln))return Qs(m.doc,rt,dn,ln,"+input"),!0},js.prototype.ensurePolled=function(){this.forceCompositionEnd()},js.prototype.reset=function(){this.forceCompositionEnd()},js.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},js.prototype.readFromDOMSoon=function(){var m=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(m.readDOMTimeout=null,m.composing)if(m.composing.done)m.composing=null;else return;m.updateFromDOM()},80))},js.prototype.updateFromDOM=function(){var m=this;(this.cm.isReadOnly()||!this.pollContent())&&Pa(this.cm,function(){return Oo(m.cm)})},js.prototype.setUneditable=function(m){m.contentEditable="false"},js.prototype.onKeyPress=function(m){m.charCode==0||this.composing||(m.preventDefault(),this.cm.isReadOnly()||La(this.cm,ql)(this.cm,String.fromCharCode(m.charCode==null?m.keyCode:m.charCode),0))},js.prototype.readOnlyChanged=function(m){this.div.contentEditable=String(m!="nocursor")},js.prototype.onContextMenu=function(){},js.prototype.resetPosition=function(){},js.prototype.needsContentAttribute=!0;function lh(m,j){var E=bt(m,j.line);if(!E||E.hidden)return null;var _=ke(m.doc,j.line),A=Je(E,_,j.line),U=le(_,m.doc.direction),te="left";if(U){var oe=de(U,j.ch);te=oe%2?"right":"left"}var fe=Cn(A.map,j.ch,te);return fe.offset=fe.collapse=="right"?fe.end:fe.start,fe}function Fa(m){for(var j=m;j;j=j.parentNode)if(/CodeMirror-gutter-wrapper/.test(j.className))return!0;return!1}function Ca(m,j){return j&&(m.bad=!0),m}function w0(m,j,E,_,A){var U="",te=!1,oe=m.doc.lineSeparator(),fe=!1;function Ne(yt){return function(Wt){return Wt.id==yt}}function qe(){te&&(U+=oe,fe&&(U+=oe),te=fe=!1)}function rt(yt){yt&&(qe(),U+=yt)}function St(yt){if(yt.nodeType==1){var Wt=yt.getAttribute("cm-text");if(Wt){rt(Wt);return}var ir=yt.getAttribute("cm-marker"),hr;if(ir){var Tr=m.findMarks(He(_,0),He(A+1,0),Ne(+ir));Tr.length&&(hr=Tr[0].find(0))&&rt(Re(m.doc,hr.from,hr.to).join(oe));return}if(yt.getAttribute("contenteditable")=="false")return;var $r=/^(pre|div|p|li|table|br)$/i.test(yt.nodeName);if(!/^br$/i.test(yt.nodeName)&&yt.textContent.length==0)return;$r&&qe();for(var Pr=0;Pr<yt.childNodes.length;Pr++)St(yt.childNodes[Pr]);/^(pre|p)$/i.test(yt.nodeName)&&(fe=!0),$r&&(te=!0)}else yt.nodeType==3&&rt(yt.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;St(j),j!=E;)j=j.nextSibling,fe=!1;return U}function Gf(m,j,E){var _;if(j==m.display.lineDiv){if(_=m.display.lineDiv.childNodes[E],!_)return Ca(m.clipPos(He(m.display.viewTo-1)),!0);j=null,E=0}else for(_=j;;_=_.parentNode){if(!_||_==m.display.lineDiv)return null;if(_.parentNode&&_.parentNode==m.display.lineDiv)break}for(var A=0;A<m.display.view.length;A++){var U=m.display.view[A];if(U.node==_)return j0(U,j,E)}}function j0(m,j,E){var _=m.text.firstChild,A=!1;if(!j||!D(_,j))return Ca(He(Ct(m.line),0),!0);if(j==_&&(A=!0,j=_.childNodes[E],E=0,!j)){var U=m.rest?ee(m.rest):m.line;return Ca(He(Ct(U),U.text.length),A)}var te=j.nodeType==3?j:null,oe=j;for(!te&&j.childNodes.length==1&&j.firstChild.nodeType==3&&(te=j.firstChild,E&&(E=te.nodeValue.length));oe.parentNode!=_;)oe=oe.parentNode;var fe=m.measure,Ne=fe.maps;function qe(hr,Tr,$r){for(var Pr=-1;Pr<(Ne?Ne.length:0);Pr++)for(var Dr=Pr<0?fe.map:Ne[Pr],dn=0;dn<Dr.length;dn+=3){var ln=Dr[dn+2];if(ln==hr||ln==Tr){var Mn=Ct(Pr<0?m.line:m.rest[Pr]),ys=Dr[dn]+$r;return($r<0||ln!=hr)&&(ys=Dr[dn+($r?1:0)]),He(Mn,ys)}}}var rt=qe(te,oe,E);if(rt)return Ca(rt,A);for(var St=oe.nextSibling,yt=te?te.nodeValue.length-E:0;St;St=St.nextSibling){if(rt=qe(St,St.firstChild,0),rt)return Ca(He(rt.line,rt.ch-yt),A);yt+=St.textContent.length}for(var Wt=oe.previousSibling,ir=E;Wt;Wt=Wt.previousSibling){if(rt=qe(Wt,Wt.firstChild,-1),rt)return Ca(He(rt.line,rt.ch+ir),A);ir+=Wt.textContent.length}}var ba=function(m){this.cm=m,this.prevInput="",this.pollingFast=!1,this.polling=new ae,this.hasSelection=!1,this.composing=null};ba.prototype.init=function(m){var j=this,E=this,_=this.cm;this.createField(m);var A=this.textarea;m.wrapper.insertBefore(this.wrapper,m.wrapper.firstChild),w&&(A.style.width="0px"),De(A,"input",function(){l&&c>=9&&j.hasSelection&&(j.hasSelection=null),E.poll()}),De(A,"paste",function(te){Ke(_,te)||Cg(te,_)||(_.state.pasteIncoming=+new Date,E.fastPoll())});function U(te){if(!Ke(_,te)){if(_.somethingSelected())Wf({lineWise:!1,text:_.getSelections()});else if(_.options.lineWiseCopyCut){var oe=Ng(_);Wf({lineWise:!0,text:oe.text}),te.type=="cut"?_.setSelections(oe.ranges,null,we):(E.prevInput="",A.value=oe.text.join(`
`),xe(A))}else return;te.type=="cut"&&(_.state.cutIncoming=+new Date)}}De(A,"cut",U),De(A,"copy",U),De(m.scroller,"paste",function(te){if(!(zs(m,te)||Ke(_,te))){if(!A.dispatchEvent){_.state.pasteIncoming=+new Date,E.focus();return}var oe=new Event("paste");oe.clipboardData=te.clipboardData,A.dispatchEvent(oe)}}),De(m.lineSpace,"selectstart",function(te){zs(m,te)||Xt(te)}),De(A,"compositionstart",function(){var te=_.getCursor("from");E.composing&&E.composing.range.clear(),E.composing={start:te,range:_.markText(te,_.getCursor("to"),{className:"CodeMirror-composing"})}}),De(A,"compositionend",function(){E.composing&&(E.poll(),E.composing.range.clear(),E.composing=null)})},ba.prototype.createField=function(m){this.wrapper=kg(),this.textarea=this.wrapper.firstChild},ba.prototype.screenReaderLabelChanged=function(m){m?this.textarea.setAttribute("aria-label",m):this.textarea.removeAttribute("aria-label")},ba.prototype.prepareSelection=function(){var m=this.cm,j=m.display,E=m.doc,_=ud(m);if(m.options.moveInputWithCursor){var A=fi(m,E.sel.primary().head,"div"),U=j.wrapper.getBoundingClientRect(),te=j.lineDiv.getBoundingClientRect();_.teTop=Math.max(0,Math.min(j.wrapper.clientHeight-10,A.top+te.top-U.top)),_.teLeft=Math.max(0,Math.min(j.wrapper.clientWidth-10,A.left+te.left-U.left))}return _},ba.prototype.showSelection=function(m){var j=this.cm,E=j.display;M(E.cursorDiv,m.cursors),M(E.selectionDiv,m.selection),m.teTop!=null&&(this.wrapper.style.top=m.teTop+"px",this.wrapper.style.left=m.teLeft+"px")},ba.prototype.reset=function(m){if(!(this.contextMenuPending||this.composing)){var j=this.cm;if(j.somethingSelected()){this.prevInput="";var E=j.getSelection();this.textarea.value=E,j.state.focused&&xe(this.textarea),l&&c>=9&&(this.hasSelection=E)}else m||(this.prevInput=this.textarea.value="",l&&c>=9&&(this.hasSelection=null))}},ba.prototype.getField=function(){return this.textarea},ba.prototype.supportsTouch=function(){return!1},ba.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!k||X()!=this.textarea))try{this.textarea.focus()}catch{}},ba.prototype.blur=function(){this.textarea.blur()},ba.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},ba.prototype.receivedFocus=function(){this.slowPoll()},ba.prototype.slowPoll=function(){var m=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){m.poll(),m.cm.state.focused&&m.slowPoll()})},ba.prototype.fastPoll=function(){var m=!1,j=this;j.pollingFast=!0;function E(){var _=j.poll();!_&&!m?(m=!0,j.polling.set(60,E)):(j.pollingFast=!1,j.slowPoll())}j.polling.set(20,E)},ba.prototype.poll=function(){var m=this,j=this.cm,E=this.textarea,_=this.prevInput;if(this.contextMenuPending||!j.state.focused||Fr(E)&&!_&&!this.composing||j.isReadOnly()||j.options.disableInput||j.state.keySeq)return!1;var A=E.value;if(A==_&&!j.somethingSelected())return!1;if(l&&c>=9&&this.hasSelection===A||N&&/[\uf700-\uf7ff]/.test(A))return j.display.input.reset(),!1;if(j.doc.sel==j.display.selForContextMenu){var U=A.charCodeAt(0);if(U==8203&&!_&&(_=""),U==8666)return this.reset(),this.cm.execCommand("undo")}for(var te=0,oe=Math.min(_.length,A.length);te<oe&&_.charCodeAt(te)==A.charCodeAt(te);)++te;return Pa(j,function(){ql(j,A.slice(te),_.length-te,null,m.composing?"*compose":null),A.length>1e3||A.indexOf(`
`)>-1?E.value=m.prevInput="":m.prevInput=A,m.composing&&(m.composing.range.clear(),m.composing.range=j.markText(m.composing.start,j.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ba.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},ba.prototype.onKeyPress=function(){l&&c>=9&&(this.hasSelection=null),this.fastPoll()},ba.prototype.onContextMenu=function(m){var j=this,E=j.cm,_=E.display,A=j.textarea;j.contextMenuPending&&j.contextMenuPending();var U=cd(E,m),te=_.scroller.scrollTop;if(!U||g)return;var oe=E.options.resetSelectionOnContextMenu;oe&&E.doc.sel.contains(U)==-1&&La(E,Aa)(E.doc,kc(U),we);var fe=A.style.cssText,Ne=j.wrapper.style.cssText,qe=j.wrapper.offsetParent.getBoundingClientRect();j.wrapper.style.cssText="position: static",A.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(m.clientY-qe.top-5)+"px; left: "+(m.clientX-qe.left-5)+`px;
      z-index: 1000; background: `+(l?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var rt;d&&(rt=window.scrollY),_.input.focus(),d&&window.scrollTo(null,rt),_.input.reset(),E.somethingSelected()||(A.value=j.prevInput=" "),j.contextMenuPending=yt,_.selForContextMenu=E.doc.sel,clearTimeout(_.detectingSelectAll);function St(){if(A.selectionStart!=null){var ir=E.somethingSelected(),hr=""+(ir?A.value:"");A.value="",A.value=hr,j.prevInput=ir?"":"",A.selectionStart=1,A.selectionEnd=hr.length,_.selForContextMenu=E.doc.sel}}function yt(){if(j.contextMenuPending==yt&&(j.contextMenuPending=!1,j.wrapper.style.cssText=Ne,A.style.cssText=fe,l&&c<9&&_.scrollbars.setScrollTop(_.scroller.scrollTop=te),A.selectionStart!=null)){(!l||l&&c<9)&&St();var ir=0,hr=function(){_.selForContextMenu==E.doc.sel&&A.selectionStart==0&&A.selectionEnd>0&&j.prevInput==""?La(E,Jp)(E):ir++<10?_.detectingSelectAll=setTimeout(hr,500):(_.selForContextMenu=null,_.input.reset())};_.detectingSelectAll=setTimeout(hr,200)}}if(l&&c>=9&&St(),G){be(m);var Wt=function(){ot(window,"mouseup",Wt),setTimeout(yt,20)};De(window,"mouseup",Wt)}else setTimeout(yt,50)},ba.prototype.readOnlyChanged=function(m){m||this.reset(),this.textarea.disabled=m=="nocursor",this.textarea.readOnly=!!m},ba.prototype.setUneditable=function(){},ba.prototype.needsContentAttribute=!1;function Kf(m,j){if(j=j?Z(j):{},j.value=m.value,!j.tabindex&&m.tabIndex&&(j.tabindex=m.tabIndex),!j.placeholder&&m.placeholder&&(j.placeholder=m.placeholder),j.autofocus==null){var E=X();j.autofocus=E==m||m.getAttribute("autofocus")!=null&&E==document.body}function _(){m.value=oe.getValue()}var A;if(m.form&&(De(m.form,"submit",_),!j.leaveSubmitMethodAlone)){var U=m.form;A=U.submit;try{var te=U.submit=function(){_(),U.submit=A,U.submit(),U.submit=te}}catch{}}j.finishInit=function(fe){fe.save=_,fe.getTextArea=function(){return m},fe.toTextArea=function(){fe.toTextArea=isNaN,_(),m.parentNode.removeChild(fe.getWrapperElement()),m.style.display="",m.form&&(ot(m.form,"submit",_),!j.leaveSubmitMethodAlone&&typeof m.form.submit=="function"&&(m.form.submit=A))}},m.style.display="none";var oe=Us(function(fe){return m.parentNode.insertBefore(fe,m.nextSibling)},j);return oe}function C0(m){m.off=ot,m.on=De,m.wheelEventPixels=Nf,m.Doc=lo,m.splitLines=bn,m.countColumn=ve,m.findColumn=Ge,m.isWordChar=re,m.Pass=$e,m.signal=dt,m.Line=fr,m.changeEnd=zl,m.scrollbarModel=sl,m.Pos=He,m.cmpPos=at,m.modes=En,m.mimeModes=rn,m.resolveMode=mt,m.getMode=yr,m.modeExtensions=An,m.extendMode=fn,m.copyState=wn,m.startState=In,m.innerMode=zr,m.commands=Su,m.keyMap=fl,m.keyName=o0,m.isModifierKey=sh,m.lookupKey=jd,m.normalizeKeyMap=a0,m.StringStream=ne,m.SharedTextMarker=Js,m.TextMarker=ri,m.LineWidget=dl,m.e_preventDefault=Xt,m.e_stopPropagation=br,m.e_stop=be,m.addClass=se,m.contains=D,m.rmClass=z,m.keyNames=ul}x0(Us),_g(Us);var ch="iter insert remove copy getEditor constructor".split(" ");for(var Yf in lo.prototype)lo.prototype.hasOwnProperty(Yf)&&Se(ch,Yf)<0&&(Us.prototype[Yf]=(function(m){return function(){return m.apply(this.doc,arguments)}})(lo.prototype[Yf]));return xt(lo),Us.inputStyles={textarea:ba,contenteditable:js},Us.defineMode=function(m){!Us.defaults.mode&&m!="null"&&(Us.defaults.mode=m),kr.apply(this,arguments)},Us.defineMIME=jr,Us.defineMode("null",function(){return{token:function(m){return m.skipToEnd()}}}),Us.defineMIME("text/plain","null"),Us.defineExtension=function(m,j){Us.prototype[m]=j},Us.defineDocExtension=function(m,j){lo.prototype[m]=j},Us.fromTextArea=Kf,C0(Us),Us.version="5.63.0",Us}))}),7389:((s,r,e)=>{(function(t){t(e(4408))})(function(t){t.defineMode("css",function(Y,M){var q=M.inline;M.propertyKeywords||(M=t.resolveMode("text/css"));var P=Y.indentUnit,H=M.tokenHooks,D=M.documentTypes||{},X=M.mediaTypes||{},se=M.mediaFeatures||{},Q=M.mediaValueKeywords||{},xe=M.propertyKeywords||{},K=M.nonStandardPropertyKeywords||{},Z=M.fontProperties||{},ve=M.counterDescriptors||{},ae=M.colorKeywords||{},Se=M.valueKeywords||{},Pe=M.allowNested,$e=M.lineComment,we=M.supportsAtComponent===!0,Ae=Y.highlightNonStandardPropertyKeywords!==!1,ze,Ge;function Ue(Ce,he){return ze=he,Ce}function ht(Ce,he){var ie=Ce.next();if(H[ie]){var Fe=H[ie](Ce,he);if(Fe!==!1)return Fe}if(ie=="@")return Ce.eatWhile(/[\w\\\-]/),Ue("def",Ce.current());if(ie=="="||(ie=="~"||ie=="|")&&Ce.eat("="))return Ue(null,"compare");if(ie=='"'||ie=="'")return he.tokenize=ee(ie),he.tokenize(Ce,he);if(ie=="#")return Ce.eatWhile(/[\w\\\-]/),Ue("atom","hash");if(ie=="!")return Ce.match(/^\s*\w*/),Ue("keyword","important");if(/\d/.test(ie)||ie=="."&&Ce.eat(/\d/))return Ce.eatWhile(/[\w.%]/),Ue("number","unit");if(ie==="-"){if(/[\d.]/.test(Ce.peek()))return Ce.eatWhile(/[\w.%]/),Ue("number","unit");if(Ce.match(/^-[\w\\\-]*/))return Ce.eatWhile(/[\w\\\-]/),Ce.match(/^\s*:/,!1)?Ue("variable-2","variable-definition"):Ue("variable-2","variable");if(Ce.match(/^\w+-/))return Ue("meta","meta")}else return/[,+>*\/]/.test(ie)?Ue(null,"select-op"):ie=="."&&Ce.match(/^-?[_a-z][_a-z0-9-]*/i)?Ue("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(ie)?Ue(null,ie):Ce.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test(Ce.current())&&(he.tokenize=ue),Ue("variable callee","variable")):/[\w\\\-]/.test(ie)?(Ce.eatWhile(/[\w\\\-]/),Ue("property","word")):Ue(null,null)}function ee(Ce){return function(he,ie){for(var Fe=!1,We;(We=he.next())!=null;){if(We==Ce&&!Fe){Ce==")"&&he.backUp(1);break}Fe=!Fe&&We=="\\"}return(We==Ce||!Fe&&Ce!=")")&&(ie.tokenize=null),Ue("string","string")}}function ue(Ce,he){return Ce.next(),Ce.match(/^\s*[\"\')]/,!1)?he.tokenize=null:he.tokenize=ee(")"),Ue(null,"(")}function Oe(Ce,he,ie){this.type=Ce,this.indent=he,this.prev=ie}function J(Ce,he,ie,Fe){return Ce.context=new Oe(ie,he.indentation()+(Fe===!1?0:P),Ce.context),ie}function I(Ce){return Ce.context.prev&&(Ce.context=Ce.context.prev),Ce.context.type}function V(Ce,he,ie){return ge[ie.context.type](Ce,he,ie)}function re(Ce,he,ie,Fe){for(var We=Fe||1;We>0;We--)ie.context=ie.context.prev;return V(Ce,he,ie)}function pe(Ce){var he=Ce.current().toLowerCase();Se.hasOwnProperty(he)?Ge="atom":ae.hasOwnProperty(he)?Ge="keyword":Ge="variable"}var ge={};return ge.top=function(Ce,he,ie){if(Ce=="{")return J(ie,he,"block");if(Ce=="}"&&ie.context.prev)return I(ie);if(we&&/@component/i.test(Ce))return J(ie,he,"atComponentBlock");if(/^@(-moz-)?document$/i.test(Ce))return J(ie,he,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(Ce))return J(ie,he,"atBlock");if(/^@(font-face|counter-style)/i.test(Ce))return ie.stateArg=Ce,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(Ce))return"keyframes";if(Ce&&Ce.charAt(0)=="@")return J(ie,he,"at");if(Ce=="hash")Ge="builtin";else if(Ce=="word")Ge="tag";else{if(Ce=="variable-definition")return"maybeprop";if(Ce=="interpolation")return J(ie,he,"interpolation");if(Ce==":")return"pseudo";if(Pe&&Ce=="(")return J(ie,he,"parens")}return ie.context.type},ge.block=function(Ce,he,ie){if(Ce=="word"){var Fe=he.current().toLowerCase();return xe.hasOwnProperty(Fe)?(Ge="property","maybeprop"):K.hasOwnProperty(Fe)?(Ge=Ae?"string-2":"property","maybeprop"):Pe?(Ge=he.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(Ge+=" error","maybeprop")}else return Ce=="meta"?"block":!Pe&&(Ce=="hash"||Ce=="qualifier")?(Ge="error","block"):ge.top(Ce,he,ie)},ge.maybeprop=function(Ce,he,ie){return Ce==":"?J(ie,he,"prop"):V(Ce,he,ie)},ge.prop=function(Ce,he,ie){if(Ce==";")return I(ie);if(Ce=="{"&&Pe)return J(ie,he,"propBlock");if(Ce=="}"||Ce=="{")return re(Ce,he,ie);if(Ce=="(")return J(ie,he,"parens");if(Ce=="hash"&&!/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(he.current()))Ge+=" error";else if(Ce=="word")pe(he);else if(Ce=="interpolation")return J(ie,he,"interpolation");return"prop"},ge.propBlock=function(Ce,he,ie){return Ce=="}"?I(ie):Ce=="word"?(Ge="property","maybeprop"):ie.context.type},ge.parens=function(Ce,he,ie){return Ce=="{"||Ce=="}"?re(Ce,he,ie):Ce==")"?I(ie):Ce=="("?J(ie,he,"parens"):Ce=="interpolation"?J(ie,he,"interpolation"):(Ce=="word"&&pe(he),"parens")},ge.pseudo=function(Ce,he,ie){return Ce=="meta"?"pseudo":Ce=="word"?(Ge="variable-3",ie.context.type):V(Ce,he,ie)},ge.documentTypes=function(Ce,he,ie){return Ce=="word"&&D.hasOwnProperty(he.current())?(Ge="tag",ie.context.type):ge.atBlock(Ce,he,ie)},ge.atBlock=function(Ce,he,ie){if(Ce=="(")return J(ie,he,"atBlock_parens");if(Ce=="}"||Ce==";")return re(Ce,he,ie);if(Ce=="{")return I(ie)&&J(ie,he,Pe?"block":"top");if(Ce=="interpolation")return J(ie,he,"interpolation");if(Ce=="word"){var Fe=he.current().toLowerCase();Fe=="only"||Fe=="not"||Fe=="and"||Fe=="or"?Ge="keyword":X.hasOwnProperty(Fe)?Ge="attribute":se.hasOwnProperty(Fe)?Ge="property":Q.hasOwnProperty(Fe)?Ge="keyword":xe.hasOwnProperty(Fe)?Ge="property":K.hasOwnProperty(Fe)?Ge=Ae?"string-2":"property":Se.hasOwnProperty(Fe)?Ge="atom":ae.hasOwnProperty(Fe)?Ge="keyword":Ge="error"}return ie.context.type},ge.atComponentBlock=function(Ce,he,ie){return Ce=="}"?re(Ce,he,ie):Ce=="{"?I(ie)&&J(ie,he,Pe?"block":"top",!1):(Ce=="word"&&(Ge="error"),ie.context.type)},ge.atBlock_parens=function(Ce,he,ie){return Ce==")"?I(ie):Ce=="{"||Ce=="}"?re(Ce,he,ie,2):ge.atBlock(Ce,he,ie)},ge.restricted_atBlock_before=function(Ce,he,ie){return Ce=="{"?J(ie,he,"restricted_atBlock"):Ce=="word"&&ie.stateArg=="@counter-style"?(Ge="variable","restricted_atBlock_before"):V(Ce,he,ie)},ge.restricted_atBlock=function(Ce,he,ie){return Ce=="}"?(ie.stateArg=null,I(ie)):Ce=="word"?(ie.stateArg=="@font-face"&&!Z.hasOwnProperty(he.current().toLowerCase())||ie.stateArg=="@counter-style"&&!ve.hasOwnProperty(he.current().toLowerCase())?Ge="error":Ge="property","maybeprop"):"restricted_atBlock"},ge.keyframes=function(Ce,he,ie){return Ce=="word"?(Ge="variable","keyframes"):Ce=="{"?J(ie,he,"top"):V(Ce,he,ie)},ge.at=function(Ce,he,ie){return Ce==";"?I(ie):Ce=="{"||Ce=="}"?re(Ce,he,ie):(Ce=="word"?Ge="tag":Ce=="hash"&&(Ge="builtin"),"at")},ge.interpolation=function(Ce,he,ie){return Ce=="}"?I(ie):Ce=="{"||Ce==";"?re(Ce,he,ie):(Ce=="word"?Ge="variable":Ce!="variable"&&Ce!="("&&Ce!=")"&&(Ge="error"),"interpolation")},{startState:function(Ce){return{tokenize:null,state:q?"block":"top",stateArg:null,context:new Oe(q?"block":"top",Ce||0,null)}},token:function(Ce,he){if(!he.tokenize&&Ce.eatSpace())return null;var ie=(he.tokenize||ht)(Ce,he);return ie&&typeof ie=="object"&&(ze=ie[1],ie=ie[0]),Ge=ie,ze!="comment"&&(he.state=ge[he.state](ze,Ce,he)),Ge},indent:function(Ce,he){var ie=Ce.context,Fe=he&&he.charAt(0),We=ie.indent;return ie.type=="prop"&&(Fe=="}"||Fe==")")&&(ie=ie.prev),ie.prev&&(Fe=="}"&&(ie.type=="block"||ie.type=="top"||ie.type=="interpolation"||ie.type=="restricted_atBlock")?(ie=ie.prev,We=ie.indent):(Fe==")"&&(ie.type=="parens"||ie.type=="atBlock_parens")||Fe=="{"&&(ie.type=="at"||ie.type=="atBlock"))&&(We=Math.max(0,ie.indent-P))),We},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:$e,fold:"brace"}});function a(Y){for(var M={},q=0;q<Y.length;++q)M[Y[q].toLowerCase()]=!0;return M}var o=["domain","regexp","url","url-prefix"],i=a(o),l=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],c=a(l),d=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme"],p=a(d),h=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light"],g=a(h),y=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-content","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],b=a(y),v=["accent-color","aspect-ratio","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","content-visibility","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","overflow-anchor","overscroll-behavior","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],w=a(v),C=["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],k=a(C),N=["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"],O=a(N),R=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],L=a(R),B=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","blur","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","brightness","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","contrast","copy","counter","counters","cover","crop","cross","crosshair","cubic-bezier","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","drop-shadow","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","grayscale","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","hue-rotate","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturate","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","sepia","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],G=a(B),$=o.concat(l).concat(d).concat(h).concat(y).concat(v).concat(R).concat(B);t.registerHelper("hintWords","css",$);function z(Y,M){for(var q=!1,P;(P=Y.next())!=null;){if(q&&P=="/"){M.tokenize=null;break}q=P=="*"}return["comment","comment"]}t.defineMIME("text/css",{documentTypes:i,mediaTypes:c,mediaFeatures:p,mediaValueKeywords:g,propertyKeywords:b,nonStandardPropertyKeywords:w,fontProperties:k,counterDescriptors:O,colorKeywords:L,valueKeywords:G,tokenHooks:{"/":function(Y,M){return Y.eat("*")?(M.tokenize=z,z(Y,M)):!1}},name:"css"}),t.defineMIME("text/x-scss",{mediaTypes:c,mediaFeatures:p,mediaValueKeywords:g,propertyKeywords:b,nonStandardPropertyKeywords:w,colorKeywords:L,valueKeywords:G,fontProperties:k,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(Y,M){return Y.eat("/")?(Y.skipToEnd(),["comment","comment"]):Y.eat("*")?(M.tokenize=z,z(Y,M)):["operator","operator"]},":":function(Y){return Y.match(/^\s*\{/,!1)?[null,null]:!1},$:function(Y){return Y.match(/^[\w-]+/),Y.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(Y){return Y.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"}),t.defineMIME("text/x-less",{mediaTypes:c,mediaFeatures:p,mediaValueKeywords:g,propertyKeywords:b,nonStandardPropertyKeywords:w,colorKeywords:L,valueKeywords:G,fontProperties:k,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(Y,M){return Y.eat("/")?(Y.skipToEnd(),["comment","comment"]):Y.eat("*")?(M.tokenize=z,z(Y,M)):["operator","operator"]},"@":function(Y){return Y.eat("{")?[null,"interpolation"]:Y.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)?!1:(Y.eatWhile(/[\w\\\-]/),Y.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),t.defineMIME("text/x-gss",{documentTypes:i,mediaTypes:c,mediaFeatures:p,propertyKeywords:b,nonStandardPropertyKeywords:w,fontProperties:k,counterDescriptors:O,colorKeywords:L,valueKeywords:G,supportsAtComponent:!0,tokenHooks:{"/":function(Y,M){return Y.eat("*")?(M.tokenize=z,z(Y,M)):!1}},name:"css",helperType:"gss"})})}),8253:((s,r,e)=>{(function(t){t(e(4408),e(9701),e(6061),e(7389))})(function(t){var a={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};function o(g,y,b){var v=g.current(),w=v.search(y);return w>-1?g.backUp(v.length-w):v.match(/<\/?$/)&&(g.backUp(v.length),g.match(y,!1)||g.match(v)),b}var i={};function l(g){var y=i[g];return y||(i[g]=new RegExp("\\s+"+g+`\\s*=\\s*('|")?([^'"]+)('|")?\\s*`))}function c(g,y){var b=g.match(l(y));return b?/^\s*(.*?)\s*$/.exec(b[2])[1]:""}function d(g,y){return new RegExp((y?"^":"")+"</s*"+g+"s*>","i")}function p(g,y){for(var b in g)for(var v=y[b]||(y[b]=[]),w=g[b],C=w.length-1;C>=0;C--)v.unshift(w[C])}function h(g,y){for(var b=0;b<g.length;b++){var v=g[b];if(!v[0]||v[1].test(c(y,v[0])))return v[2]}}t.defineMode("htmlmixed",function(g,y){var b=t.getMode(g,{name:"xml",htmlMode:!0,multilineTagIndentFactor:y.multilineTagIndentFactor,multilineTagIndentPastTag:y.multilineTagIndentPastTag,allowMissingTagName:y.allowMissingTagName}),v={},w=y&&y.tags,C=y&&y.scriptTypes;if(p(a,v),w&&p(w,v),C)for(var k=C.length-1;k>=0;k--)v.script.unshift(["type",C[k].matches,C[k].mode]);function N(O,R){var L=b.token(O,R.htmlState),B=/\btag\b/.test(L),G;if(B&&!/[<>\s\/]/.test(O.current())&&(G=R.htmlState.tagName&&R.htmlState.tagName.toLowerCase())&&v.hasOwnProperty(G))R.inTag=G+" ";else if(R.inTag&&B&&/>$/.test(O.current())){var $=/^([\S]+) (.*)/.exec(R.inTag);R.inTag=null;var z=O.current()==">"&&h(v[$[1]],$[2]),Y=t.getMode(g,z),M=d($[1],!0),q=d($[1],!1);R.token=function(P,H){return P.match(M,!1)?(H.token=N,H.localState=H.localMode=null,null):o(P,q,H.localMode.token(P,H.localState))},R.localMode=Y,R.localState=t.startState(Y,b.indent(R.htmlState,"",""))}else R.inTag&&(R.inTag+=O.current(),O.eol()&&(R.inTag+=" "));return L}return{startState:function(){var O=t.startState(b);return{token:N,inTag:null,localMode:null,localState:null,htmlState:O}},copyState:function(O){var R;return O.localState&&(R=t.copyState(O.localMode,O.localState)),{token:O.token,inTag:O.inTag,localMode:O.localMode,localState:R,htmlState:t.copyState(b,O.htmlState)}},token:function(O,R){return R.token(O,R)},indent:function(O,R,L){return!O.localMode||/^\s*<\//.test(R)?b.indent(O.htmlState,R,L):O.localMode.indent?O.localMode.indent(O.localState,R,L):t.Pass},innerMode:function(O){return{state:O.localState||O.htmlState,mode:O.localMode||b}}}},"xml","javascript","css"),t.defineMIME("text/html","htmlmixed")})}),6061:((s,r,e)=>{(function(t){t(e(4408))})(function(t){t.defineMode("javascript",function(a,o){var i=a.indentUnit,l=o.statementIndent,c=o.jsonld,d=o.json||c,p=o.trackScope!==!1,h=o.typescript,g=o.wordCharacters||/[\w$\xa1-\uffff]/,y=(function(){function ce(_t){return{type:_t,style:"keyword"}}var Te=ce("keyword a"),ut=ce("keyword b"),jt=ce("keyword c"),Lt=ce("keyword d"),ur=ce("operator"),Br={type:"atom",style:"atom"};return{if:ce("if"),while:Te,with:Te,else:ut,do:ut,try:ut,finally:ut,return:Lt,break:Lt,continue:Lt,new:ce("new"),delete:jt,void:jt,throw:jt,debugger:ce("debugger"),var:ce("var"),const:ce("var"),let:ce("var"),function:ce("function"),catch:ce("catch"),for:ce("for"),switch:ce("switch"),case:ce("case"),default:ce("default"),in:ur,typeof:ur,instanceof:ur,true:Br,false:Br,null:Br,undefined:Br,NaN:Br,Infinity:Br,this:ce("this"),class:ce("class"),super:ce("atom"),yield:jt,export:ce("export"),import:ce("import"),extends:jt,await:jt}})(),b=/[+\-*&%=<>!?|~^@]/,v=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function w(ce){for(var Te=!1,ut,jt=!1;(ut=ce.next())!=null;){if(!Te){if(ut=="/"&&!jt)return;ut=="["?jt=!0:jt&&ut=="]"&&(jt=!1)}Te=!Te&&ut=="\\"}}var C,k;function N(ce,Te,ut){return C=ce,k=ut,Te}function O(ce,Te){var ut=ce.next();if(ut=='"'||ut=="'")return Te.tokenize=R(ut),Te.tokenize(ce,Te);if(ut=="."&&ce.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return N("number","number");if(ut=="."&&ce.match(".."))return N("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(ut))return N(ut);if(ut=="="&&ce.eat(">"))return N("=>","operator");if(ut=="0"&&ce.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return N("number","number");if(/\d/.test(ut))return ce.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),N("number","number");if(ut=="/")return ce.eat("*")?(Te.tokenize=L,L(ce,Te)):ce.eat("/")?(ce.skipToEnd(),N("comment","comment")):Ot(ce,Te,1)?(w(ce),ce.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),N("regexp","string-2")):(ce.eat("="),N("operator","operator",ce.current()));if(ut=="`")return Te.tokenize=B,B(ce,Te);if(ut=="#"&&ce.peek()=="!")return ce.skipToEnd(),N("meta","meta");if(ut=="#"&&ce.eatWhile(g))return N("variable","property");if(ut=="<"&&ce.match("!--")||ut=="-"&&ce.match("->")&&!/\S/.test(ce.string.slice(0,ce.start)))return ce.skipToEnd(),N("comment","comment");if(b.test(ut))return(ut!=">"||!Te.lexical||Te.lexical.type!=">")&&(ce.eat("=")?(ut=="!"||ut=="=")&&ce.eat("="):/[<>*+\-|&?]/.test(ut)&&(ce.eat(ut),ut==">"&&ce.eat(ut))),ut=="?"&&ce.eat(".")?N("."):N("operator","operator",ce.current());if(g.test(ut)){ce.eatWhile(g);var jt=ce.current();if(Te.lastType!="."){if(y.propertyIsEnumerable(jt)){var Lt=y[jt];return N(Lt.type,Lt.style,jt)}if(jt=="async"&&ce.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return N("async","keyword",jt)}return N("variable","variable",jt)}}function R(ce){return function(Te,ut){var jt=!1,Lt;if(c&&Te.peek()=="@"&&Te.match(v))return ut.tokenize=O,N("jsonld-keyword","meta");for(;(Lt=Te.next())!=null&&!(Lt==ce&&!jt);)jt=!jt&&Lt=="\\";return jt||(ut.tokenize=O),N("string","string")}}function L(ce,Te){for(var ut=!1,jt;jt=ce.next();){if(jt=="/"&&ut){Te.tokenize=O;break}ut=jt=="*"}return N("comment","comment")}function B(ce,Te){for(var ut=!1,jt;(jt=ce.next())!=null;){if(!ut&&(jt=="`"||jt=="$"&&ce.eat("{"))){Te.tokenize=O;break}ut=!ut&&jt=="\\"}return N("quasi","string-2",ce.current())}var G="([{}])";function $(ce,Te){Te.fatArrowAt&&(Te.fatArrowAt=null);var ut=ce.string.indexOf("=>",ce.start);if(!(ut<0)){if(h){var jt=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(ce.string.slice(ce.start,ut));jt&&(ut=jt.index)}for(var Lt=0,ur=!1,Br=ut-1;Br>=0;--Br){var _t=ce.string.charAt(Br),Kr=G.indexOf(_t);if(Kr>=0&&Kr<3){if(!Lt){++Br;break}if(--Lt==0){_t=="("&&(ur=!0);break}}else if(Kr>=3&&Kr<6)++Lt;else if(g.test(_t))ur=!0;else if(/["'\/`]/.test(_t))for(;;--Br){if(Br==0)return;var Zr=ce.string.charAt(Br-1);if(Zr==_t&&ce.string.charAt(Br-2)!="\\"){Br--;break}}else if(ur&&!Lt){++Br;break}}ur&&!Lt&&(Te.fatArrowAt=Br)}}var z={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function Y(ce,Te,ut,jt,Lt,ur){this.indented=ce,this.column=Te,this.type=ut,this.prev=Lt,this.info=ur,jt!=null&&(this.align=jt)}function M(ce,Te){if(!p)return!1;for(var ut=ce.localVars;ut;ut=ut.next)if(ut.name==Te)return!0;for(var jt=ce.context;jt;jt=jt.prev)for(var ut=jt.vars;ut;ut=ut.next)if(ut.name==Te)return!0}function q(ce,Te,ut,jt,Lt){var ur=ce.cc;for(P.state=ce,P.stream=Lt,P.marked=null,P.cc=ur,P.style=Te,ce.lexical.hasOwnProperty("align")||(ce.lexical.align=!0);;){var Br=ur.length?ur.pop():d?Ue:ze;if(Br(ut,jt)){for(;ur.length&&ur[ur.length-1].lex;)ur.pop()();return P.marked?P.marked:ut=="variable"&&M(ce,jt)?"variable-2":Te}}}var P={state:null,marked:null,cc:null};function H(){for(var ce=arguments.length-1;ce>=0;ce--)P.cc.push(arguments[ce])}function D(){return H.apply(null,arguments),!0}function X(ce,Te){for(var ut=Te;ut;ut=ut.next)if(ut.name==ce)return!0;return!1}function se(ce){var Te=P.state;if(P.marked="def",!!p){if(Te.context){if(Te.lexical.info=="var"&&Te.context&&Te.context.block){var ut=Q(ce,Te.context);if(ut!=null){Te.context=ut;return}}else if(!X(ce,Te.localVars)){Te.localVars=new Z(ce,Te.localVars);return}}o.globalVars&&!X(ce,Te.globalVars)&&(Te.globalVars=new Z(ce,Te.globalVars))}}function Q(ce,Te){if(Te)if(Te.block){var ut=Q(ce,Te.prev);return ut?ut==Te.prev?Te:new K(ut,Te.vars,!0):null}else return X(ce,Te.vars)?Te:new K(Te.prev,new Z(ce,Te.vars),!1);else return null}function xe(ce){return ce=="public"||ce=="private"||ce=="protected"||ce=="abstract"||ce=="readonly"}function K(ce,Te,ut){this.prev=ce,this.vars=Te,this.block=ut}function Z(ce,Te){this.name=ce,this.next=Te}var ve=new Z("this",new Z("arguments",null));function ae(){P.state.context=new K(P.state.context,P.state.localVars,!1),P.state.localVars=ve}function Se(){P.state.context=new K(P.state.context,P.state.localVars,!0),P.state.localVars=null}function Pe(){P.state.localVars=P.state.context.vars,P.state.context=P.state.context.prev}Pe.lex=!0;function $e(ce,Te){var ut=function(){var jt=P.state,Lt=jt.indented;if(jt.lexical.type=="stat")Lt=jt.lexical.indented;else for(var ur=jt.lexical;ur&&ur.type==")"&&ur.align;ur=ur.prev)Lt=ur.indented;jt.lexical=new Y(Lt,P.stream.column(),ce,null,jt.lexical,Te)};return ut.lex=!0,ut}function we(){var ce=P.state;ce.lexical.prev&&(ce.lexical.type==")"&&(ce.indented=ce.lexical.indented),ce.lexical=ce.lexical.prev)}we.lex=!0;function Ae(ce){function Te(ut){return ut==ce?D():ce==";"||ut=="}"||ut==")"||ut=="]"?H():D(Te)}return Te}function ze(ce,Te){return ce=="var"?D($e("vardef",Te),tr,Ae(";"),we):ce=="keyword a"?D($e("form"),ee,ze,we):ce=="keyword b"?D($e("form"),ze,we):ce=="keyword d"?P.stream.match(/^\s*$/,!1)?D():D($e("stat"),Oe,Ae(";"),we):ce=="debugger"?D(Ae(";")):ce=="{"?D($e("}"),Se,De,we,Pe):ce==";"?D():ce=="if"?(P.state.lexical.info=="else"&&P.state.cc[P.state.cc.length-1]==we&&P.state.cc.pop()(),D($e("form"),ee,ze,we,wr)):ce=="function"?D(kr):ce=="for"?D($e("form"),Se,an,ze,Pe,we):ce=="class"||h&&Te=="interface"?(P.marked="keyword",D($e("form",ce=="class"?ce:Te),fn,we)):ce=="variable"?h&&Te=="declare"?(P.marked="keyword",D(ze)):h&&(Te=="module"||Te=="enum"||Te=="type")&&P.stream.match(/^\s*\w/,!1)?(P.marked="keyword",Te=="enum"?D(je):Te=="type"?D(mt,Ae("operator"),kt,Ae(";")):D($e("form"),Lr,Ae("{"),$e("}"),De,we,we)):h&&Te=="namespace"?(P.marked="keyword",D($e("form"),Ue,ze,we)):h&&Te=="abstract"?(P.marked="keyword",D(ze)):D($e("stat"),Fe):ce=="switch"?D($e("form"),ee,Ae("{"),$e("}","switch"),Se,De,we,we,Pe):ce=="case"?D(Ue,Ae(":")):ce=="default"?D(Ae(":")):ce=="catch"?D($e("form"),ae,Ge,ze,we,Pe):ce=="export"?D($e("stat"),ne,we):ce=="import"?D($e("stat"),Re,we):ce=="async"?D(ze):Te=="@"?D(Ue,ze):H($e("stat"),Ue,Ae(";"),we)}function Ge(ce){if(ce=="(")return D(yr,Ae(")"))}function Ue(ce,Te){return ue(ce,Te,!1)}function ht(ce,Te){return ue(ce,Te,!0)}function ee(ce){return ce!="("?H():D($e(")"),Oe,Ae(")"),we)}function ue(ce,Te,ut){if(P.state.fatArrowAt==P.stream.start){var jt=ut?ge:pe;if(ce=="(")return D(ae,$e(")"),le(yr,")"),we,Ae("=>"),jt,Pe);if(ce=="variable")return H(ae,Lr,Ae("=>"),jt,Pe)}var Lt=ut?I:J;return z.hasOwnProperty(ce)?D(Lt):ce=="function"?D(kr,Lt):ce=="class"||h&&Te=="interface"?(P.marked="keyword",D($e("form"),An,we)):ce=="keyword c"||ce=="async"?D(ut?ht:Ue):ce=="("?D($e(")"),Oe,Ae(")"),we,Lt):ce=="operator"||ce=="spread"?D(ut?ht:Ue):ce=="["?D($e("]"),Ve,we,Lt):ce=="{"?Ye(Qe,"}",null,Lt):ce=="quasi"?H(V,Lt):ce=="new"?D(Ce(ut)):D()}function Oe(ce){return ce.match(/[;\}\)\],]/)?H():H(Ue)}function J(ce,Te){return ce==","?D(Oe):I(ce,Te,!1)}function I(ce,Te,ut){var jt=ut==!1?J:I,Lt=ut==!1?Ue:ht;if(ce=="=>")return D(ae,ut?ge:pe,Pe);if(ce=="operator")return/\+\+|--/.test(Te)||h&&Te=="!"?D(jt):h&&Te=="<"&&P.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?D($e(">"),le(kt,">"),we,jt):Te=="?"?D(Ue,Ae(":"),Lt):D(Lt);if(ce=="quasi")return H(V,jt);if(ce!=";"){if(ce=="(")return Ye(ht,")","call",jt);if(ce==".")return D(We,jt);if(ce=="[")return D($e("]"),Oe,Ae("]"),we,jt);if(h&&Te=="as")return P.marked="keyword",D(kt,jt);if(ce=="regexp")return P.state.lastType=P.marked="operator",P.stream.backUp(P.stream.pos-P.stream.start-1),D(Lt)}}function V(ce,Te){return ce!="quasi"?H():Te.slice(Te.length-2)!="${"?D(V):D(Oe,re)}function re(ce){if(ce=="}")return P.marked="string-2",P.state.tokenize=B,D(V)}function pe(ce){return $(P.stream,P.state),H(ce=="{"?ze:Ue)}function ge(ce){return $(P.stream,P.state),H(ce=="{"?ze:ht)}function Ce(ce){return function(Te){return Te=="."?D(ce?ie:he):Te=="variable"&&h?D(et,ce?I:J):H(ce?ht:Ue)}}function he(ce,Te){if(Te=="target")return P.marked="keyword",D(J)}function ie(ce,Te){if(Te=="target")return P.marked="keyword",D(I)}function Fe(ce){return ce==":"?D(we,ze):H(J,Ae(";"),we)}function We(ce){if(ce=="variable")return P.marked="property",D()}function Qe(ce,Te){if(ce=="async")return P.marked="property",D(Qe);if(ce=="variable"||P.style=="keyword"){if(P.marked="property",Te=="get"||Te=="set")return D(de);var ut;return h&&P.state.fatArrowAt==P.stream.start&&(ut=P.stream.match(/^\s*:\s*/,!1))&&(P.state.fatArrowAt=P.stream.pos+ut[0].length),D(Ee)}else{if(ce=="number"||ce=="string")return P.marked=c?"property":P.style+" property",D(Ee);if(ce=="jsonld-keyword")return D(Ee);if(h&&xe(Te))return P.marked="keyword",D(Qe);if(ce=="[")return D(Ue,ct,Ae("]"),Ee);if(ce=="spread")return D(ht,Ee);if(Te=="*")return P.marked="keyword",D(Qe);if(ce==":")return H(Ee)}}function de(ce){return ce!="variable"?H(Ee):(P.marked="property",D(kr))}function Ee(ce){if(ce==":")return D(ht);if(ce=="(")return H(kr)}function le(ce,Te,ut){function jt(Lt,ur){if(ut?ut.indexOf(Lt)>-1:Lt==","){var Br=P.state.lexical;return Br.info=="call"&&(Br.pos=(Br.pos||0)+1),D(function(_t,Kr){return _t==Te||Kr==Te?H():H(ce)},jt)}return Lt==Te||ur==Te?D():ut&&ut.indexOf(";")>-1?H(ce):D(Ae(Te))}return function(Lt,ur){return Lt==Te||ur==Te?D():H(ce,jt)}}function Ye(ce,Te,ut){for(var jt=3;jt<arguments.length;jt++)P.cc.push(arguments[jt]);return D($e(Te,ut),le(ce,Te),we)}function De(ce){return ce=="}"?D():H(ze,De)}function ct(ce,Te){if(h){if(ce==":")return D(kt);if(Te=="?")return D(ct)}}function ot(ce,Te){if(h&&(ce==":"||Te=="in"))return D(kt)}function dt(ce){if(h&&ce==":")return P.stream.match(/^\s*\w+\s+is\b/,!1)?D(Ue,Ke,kt):D(kt)}function Ke(ce,Te){if(Te=="is")return P.marked="keyword",D()}function kt(ce,Te){if(Te=="keyof"||Te=="typeof"||Te=="infer"||Te=="readonly")return P.marked="keyword",D(Te=="typeof"?ht:kt);if(ce=="variable"||Te=="void")return P.marked="type",D(Be);if(Te=="|"||Te=="&")return D(kt);if(ce=="string"||ce=="number"||ce=="atom")return D(Be);if(ce=="[")return D($e("]"),le(kt,"]",","),we,Be);if(ce=="{")return D($e("}"),xt,we,Be);if(ce=="(")return D(le(be,")"),At,Be);if(ce=="<")return D(le(kt,">"),kt);if(ce=="quasi")return H(br,Be)}function At(ce){if(ce=="=>")return D(kt)}function xt(ce){return ce.match(/[\}\)\]]/)?D():ce==","||ce==";"?D(xt):H(Xt,xt)}function Xt(ce,Te){if(ce=="variable"||P.style=="keyword")return P.marked="property",D(Xt);if(Te=="?"||ce=="number"||ce=="string")return D(Xt);if(ce==":")return D(kt);if(ce=="[")return D(Ae("variable"),ot,Ae("]"),Xt);if(ce=="(")return H(jr,Xt);if(!ce.match(/[;\}\)\],]/))return D()}function br(ce,Te){return ce!="quasi"?H():Te.slice(Te.length-2)!="${"?D(br):D(kt,zt)}function zt(ce){if(ce=="}")return P.marked="string-2",P.state.tokenize=B,D(br)}function be(ce,Te){return ce=="variable"&&P.stream.match(/^\s*[?:]/,!1)||Te=="?"?D(be):ce==":"?D(kt):ce=="spread"?D(be):H(kt)}function Be(ce,Te){if(Te=="<")return D($e(">"),le(kt,">"),we,Be);if(Te=="|"||ce=="."||Te=="&")return D(kt);if(ce=="[")return D(kt,Ae("]"),Be);if(Te=="extends"||Te=="implements")return P.marked="keyword",D(kt);if(Te=="?")return D(kt,Ae(":"),kt)}function et(ce,Te){if(Te=="<")return D($e(">"),le(kt,">"),we,Be)}function wt(){return H(kt,$t)}function $t(ce,Te){if(Te=="=")return D(kt)}function tr(ce,Te){return Te=="enum"?(P.marked="keyword",D(je)):H(Lr,ct,Fr,rr)}function Lr(ce,Te){if(h&&xe(Te))return P.marked="keyword",D(Lr);if(ce=="variable")return se(Te),D();if(ce=="spread")return D(Lr);if(ce=="[")return Ye(bn,"]");if(ce=="{")return Ye(tn,"}")}function tn(ce,Te){return ce=="variable"&&!P.stream.match(/^\s*:/,!1)?(se(Te),D(Fr)):(ce=="variable"&&(P.marked="property"),ce=="spread"?D(Lr):ce=="}"?H():ce=="["?D(Ue,Ae("]"),Ae(":"),tn):D(Ae(":"),Lr,Fr))}function bn(){return H(Lr,Fr)}function Fr(ce,Te){if(Te=="=")return D(ht)}function rr(ce){if(ce==",")return D(tr)}function wr(ce,Te){if(ce=="keyword b"&&Te=="else")return D($e("form","else"),ze,we)}function an(ce,Te){if(Te=="await")return D(an);if(ce=="(")return D($e(")"),En,we)}function En(ce){return ce=="var"?D(tr,rn):ce=="variable"?D(rn):H(rn)}function rn(ce,Te){return ce==")"?D():ce==";"?D(rn):Te=="in"||Te=="of"?(P.marked="keyword",D(Ue,rn)):H(Ue,rn)}function kr(ce,Te){if(Te=="*")return P.marked="keyword",D(kr);if(ce=="variable")return se(Te),D(kr);if(ce=="(")return D(ae,$e(")"),le(yr,")"),we,dt,ze,Pe);if(h&&Te=="<")return D($e(">"),le(wt,">"),we,kr)}function jr(ce,Te){if(Te=="*")return P.marked="keyword",D(jr);if(ce=="variable")return se(Te),D(jr);if(ce=="(")return D(ae,$e(")"),le(yr,")"),we,dt,Pe);if(h&&Te=="<")return D($e(">"),le(wt,">"),we,jr)}function mt(ce,Te){if(ce=="keyword"||ce=="variable")return P.marked="type",D(mt);if(Te=="<")return D($e(">"),le(wt,">"),we)}function yr(ce,Te){return Te=="@"&&D(Ue,yr),ce=="spread"?D(yr):h&&xe(Te)?(P.marked="keyword",D(yr)):h&&ce=="this"?D(ct,Fr):H(Lr,ct,Fr)}function An(ce,Te){return ce=="variable"?fn(ce,Te):wn(ce,Te)}function fn(ce,Te){if(ce=="variable")return se(Te),D(wn)}function wn(ce,Te){if(Te=="<")return D($e(">"),le(wt,">"),we,wn);if(Te=="extends"||Te=="implements"||h&&ce==",")return Te=="implements"&&(P.marked="keyword"),D(h?kt:Ue,wn);if(ce=="{")return D($e("}"),zr,we)}function zr(ce,Te){if(ce=="async"||ce=="variable"&&(Te=="static"||Te=="get"||Te=="set"||h&&xe(Te))&&P.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return P.marked="keyword",D(zr);if(ce=="variable"||P.style=="keyword")return P.marked="property",D(In,zr);if(ce=="number"||ce=="string")return D(In,zr);if(ce=="[")return D(Ue,ct,Ae("]"),In,zr);if(Te=="*")return P.marked="keyword",D(zr);if(h&&ce=="(")return H(jr,zr);if(ce==";"||ce==",")return D(zr);if(ce=="}")return D();if(Te=="@")return D(Ue,zr)}function In(ce,Te){if(Te=="!"||Te=="?")return D(In);if(ce==":")return D(kt,Fr);if(Te=="=")return D(ht);var ut=P.state.lexical.prev,jt=ut&&ut.info=="interface";return H(jt?jr:kr)}function ne(ce,Te){return Te=="*"?(P.marked="keyword",D(Xe,Ae(";"))):Te=="default"?(P.marked="keyword",D(Ue,Ae(";"))):ce=="{"?D(le(ke,"}"),Xe,Ae(";")):H(ze)}function ke(ce,Te){if(Te=="as")return P.marked="keyword",D(Ae("variable"));if(ce=="variable")return H(ht,ke)}function Re(ce){return ce=="string"?D():ce=="("?H(Ue):ce=="."?H(J):H(Ze,st,Xe)}function Ze(ce,Te){return ce=="{"?Ye(Ze,"}"):(ce=="variable"&&se(Te),Te=="*"&&(P.marked="keyword"),D(Ct))}function st(ce){if(ce==",")return D(Ze,st)}function Ct(ce,Te){if(Te=="as")return P.marked="keyword",D(Ze)}function Xe(ce,Te){if(Te=="from")return P.marked="keyword",D(Ue)}function Ve(ce){return ce=="]"?D():H(le(ht,"]"))}function je(){return H($e("form"),Lr,Ae("{"),$e("}"),le(He,"}"),we,we)}function He(){return H(Lr,Fr)}function at(ce,Te){return ce.lastType=="operator"||ce.lastType==","||b.test(Te.charAt(0))||/[,.]/.test(Te.charAt(0))}function Ot(ce,Te,ut){return Te.tokenize==O&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(Te.lastType)||Te.lastType=="quasi"&&/\{\s*$/.test(ce.string.slice(0,ce.pos-(ut||0)))}return{startState:function(ce){var Te={tokenize:O,lastType:"sof",cc:[],lexical:new Y((ce||0)-i,0,"block",!1),localVars:o.localVars,context:o.localVars&&new K(null,null,!1),indented:ce||0};return o.globalVars&&typeof o.globalVars=="object"&&(Te.globalVars=o.globalVars),Te},token:function(ce,Te){if(ce.sol()&&(Te.lexical.hasOwnProperty("align")||(Te.lexical.align=!1),Te.indented=ce.indentation(),$(ce,Te)),Te.tokenize!=L&&ce.eatSpace())return null;var ut=Te.tokenize(ce,Te);return C=="comment"?ut:(Te.lastType=C=="operator"&&(k=="++"||k=="--")?"incdec":C,q(Te,ut,C,k,ce))},indent:function(ce,Te){if(ce.tokenize==L||ce.tokenize==B)return t.Pass;if(ce.tokenize!=O)return 0;var ut=Te&&Te.charAt(0),jt=ce.lexical,Lt;if(!/^\s*else\b/.test(Te))for(var ur=ce.cc.length-1;ur>=0;--ur){var Br=ce.cc[ur];if(Br==we)jt=jt.prev;else if(Br!=wr&&Br!=Pe)break}for(;(jt.type=="stat"||jt.type=="form")&&(ut=="}"||(Lt=ce.cc[ce.cc.length-1])&&(Lt==J||Lt==I)&&!/^[,\.=+\-*:?[\(]/.test(Te));)jt=jt.prev;l&&jt.type==")"&&jt.prev.type=="stat"&&(jt=jt.prev);var _t=jt.type,Kr=ut==_t;return _t=="vardef"?jt.indented+(ce.lastType=="operator"||ce.lastType==","?jt.info.length+1:0):_t=="form"&&ut=="{"?jt.indented:_t=="form"?jt.indented+i:_t=="stat"?jt.indented+(at(ce,Te)?l||i:0):jt.info=="switch"&&!Kr&&o.doubleIndentSwitch!=!1?jt.indented+(/^(?:case|default)\b/.test(Te)?i:2*i):jt.align?jt.column+(Kr?0:1):jt.indented+(Kr?0:i)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:d?null:"/*",blockCommentEnd:d?null:"*/",blockCommentContinue:d?null:" * ",lineComment:d?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:d?"json":"javascript",jsonldMode:c,jsonMode:d,expressionAllowed:Ot,skipExpression:function(ce){q(ce,"atom","atom","true",new t.StringStream("",2,null))}}}),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/manifest+json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})})}),9701:((s,r,e)=>{(function(t){t(e(4408))})(function(t){var a={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},o={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};t.defineMode("xml",function(i,l){var c=i.indentUnit,d={},p=l.htmlMode?a:o;for(var h in p)d[h]=p[h];for(var h in l)d[h]=l[h];var g,y;function b(D,X){function se(K){return X.tokenize=K,K(D,X)}var Q=D.next();if(Q=="<")return D.eat("!")?D.eat("[")?D.match("CDATA[")?se(C("atom","]]>")):null:D.match("--")?se(C("comment","-->")):D.match("DOCTYPE",!0,!0)?(D.eatWhile(/[\w\._\-]/),se(k(1))):null:D.eat("?")?(D.eatWhile(/[\w\._\-]/),X.tokenize=C("meta","?>"),"meta"):(g=D.eat("/")?"closeTag":"openTag",X.tokenize=v,"tag bracket");if(Q=="&"){var xe;return D.eat("#")?D.eat("x")?xe=D.eatWhile(/[a-fA-F\d]/)&&D.eat(";"):xe=D.eatWhile(/[\d]/)&&D.eat(";"):xe=D.eatWhile(/[\w\.\-:]/)&&D.eat(";"),xe?"atom":"error"}else return D.eatWhile(/[^&<]/),null}b.isInText=!0;function v(D,X){var se=D.next();if(se==">"||se=="/"&&D.eat(">"))return X.tokenize=b,g=se==">"?"endTag":"selfcloseTag","tag bracket";if(se=="=")return g="equals",null;if(se=="<"){X.tokenize=b,X.state=B,X.tagName=X.tagStart=null;var Q=X.tokenize(D,X);return Q?Q+" tag error":"tag error"}else return/[\'\"]/.test(se)?(X.tokenize=w(se),X.stringStartCol=D.column(),X.tokenize(D,X)):(D.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function w(D){var X=function(se,Q){for(;!se.eol();)if(se.next()==D){Q.tokenize=v;break}return"string"};return X.isInAttribute=!0,X}function C(D,X){return function(se,Q){for(;!se.eol();){if(se.match(X)){Q.tokenize=b;break}se.next()}return D}}function k(D){return function(X,se){for(var Q;(Q=X.next())!=null;){if(Q=="<")return se.tokenize=k(D+1),se.tokenize(X,se);if(Q==">")if(D==1){se.tokenize=b;break}else return se.tokenize=k(D-1),se.tokenize(X,se)}return"meta"}}function N(D){return D&&D.toLowerCase()}function O(D,X,se){this.prev=D.context,this.tagName=X||"",this.indent=D.indented,this.startOfLine=se,(d.doNotIndent.hasOwnProperty(X)||D.context&&D.context.noIndent)&&(this.noIndent=!0)}function R(D){D.context&&(D.context=D.context.prev)}function L(D,X){for(var se;;){if(!D.context||(se=D.context.tagName,!d.contextGrabbers.hasOwnProperty(N(se))||!d.contextGrabbers[N(se)].hasOwnProperty(N(X))))return;R(D)}}function B(D,X,se){return D=="openTag"?(se.tagStart=X.column(),G):D=="closeTag"?$:B}function G(D,X,se){return D=="word"?(se.tagName=X.current(),y="tag",M):d.allowMissingTagName&&D=="endTag"?(y="tag bracket",M(D,X,se)):(y="error",G)}function $(D,X,se){if(D=="word"){var Q=X.current();return se.context&&se.context.tagName!=Q&&d.implicitlyClosed.hasOwnProperty(N(se.context.tagName))&&R(se),se.context&&se.context.tagName==Q||d.matchClosing===!1?(y="tag",z):(y="tag error",Y)}else return d.allowMissingTagName&&D=="endTag"?(y="tag bracket",z(D,X,se)):(y="error",Y)}function z(D,X,se){return D!="endTag"?(y="error",z):(R(se),B)}function Y(D,X,se){return y="error",z(D,X,se)}function M(D,X,se){if(D=="word")return y="attribute",q;if(D=="endTag"||D=="selfcloseTag"){var Q=se.tagName,xe=se.tagStart;return se.tagName=se.tagStart=null,D=="selfcloseTag"||d.autoSelfClosers.hasOwnProperty(N(Q))?L(se,Q):(L(se,Q),se.context=new O(se,Q,xe==se.indented)),B}return y="error",M}function q(D,X,se){return D=="equals"?P:(d.allowMissing||(y="error"),M(D,X,se))}function P(D,X,se){return D=="string"?H:D=="word"&&d.allowUnquoted?(y="string",M):(y="error",M(D,X,se))}function H(D,X,se){return D=="string"?H:M(D,X,se)}return{startState:function(D){var X={tokenize:b,state:B,indented:D||0,tagName:null,tagStart:null,context:null};return D!=null&&(X.baseIndent=D),X},token:function(D,X){if(!X.tagName&&D.sol()&&(X.indented=D.indentation()),D.eatSpace())return null;g=null;var se=X.tokenize(D,X);return(se||g)&&se!="comment"&&(y=null,X.state=X.state(g||se,D,X),y&&(se=y=="error"?se+" error":y)),se},indent:function(D,X,se){var Q=D.context;if(D.tokenize.isInAttribute)return D.tagStart==D.indented?D.stringStartCol+1:D.indented+c;if(Q&&Q.noIndent)return t.Pass;if(D.tokenize!=v&&D.tokenize!=b)return se?se.match(/^(\s*)/)[0].length:0;if(D.tagName)return d.multilineTagIndentPastTag!==!1?D.tagStart+D.tagName.length+2:D.tagStart+c*(d.multilineTagIndentFactor||1);if(d.alignCDATA&&/<!\[CDATA\[/.test(X))return 0;var xe=X&&/^<(\/)?([\w_:\.-]*)/.exec(X);if(xe&&xe[1])for(;Q;)if(Q.tagName==xe[2]){Q=Q.prev;break}else if(d.implicitlyClosed.hasOwnProperty(N(Q.tagName)))Q=Q.prev;else break;else if(xe)for(;Q;){var K=d.contextGrabbers[N(Q.tagName)];if(K&&K.hasOwnProperty(N(xe[2])))Q=Q.prev;else break}for(;Q&&Q.prev&&!Q.startOfLine;)Q=Q.prev;return Q?Q.indent+c:D.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:d.htmlMode?"html":"xml",helperType:d.htmlMode?"html":"xml",skipAttribute:function(D){D.state==P&&(D.state=M)},xmlCurrentTag:function(D){return D.tagName?{name:D.tagName,close:D.type=="closeTag"}:null},xmlCurrentContext:function(D){for(var X=[],se=D.context;se;se=se.prev)X.push(se.tagName);return X.reverse()}}}),t.defineMIME("text/xml","xml"),t.defineMIME("application/xml","xml"),t.mimeModes.hasOwnProperty("text/html")||t.defineMIME("text/html",{name:"xml",htmlMode:!0})})}),7058:((s,r,e)=>{e.d(r,{A:()=>i});var t=e(9156),a=(function(){var l=function(c,d){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(p[g]=h[g])},l(c,d)};return function(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");l(c,d);function p(){this.constructor=c}c.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)}})(),o=(function(l){a(c,l);function c(d,p,h){var g=l.call(this,p,h)||this;return g._module=d,g}return Object.defineProperty(c.prototype,"module",{get:function(){return this._module},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"config",{get:function(){return this._module.config},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"em",{get:function(){return this._module.em},enumerable:!1,configurable:!0}),c})(t.Kx);const i=o}),179:((s,r,e)=>{e.d(r,{A:()=>l,F:()=>o});var t=e(7058),a=(function(){var c=function(d,p){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(h[y]=g[y])},c(d,p)};return function(d,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");c(d,p);function h(){this.constructor=d}d.prototype=p===null?Object.create(p):(h.prototype=p.prototype,new h)}})(),o;(function(c){c.Select="select",c.Hover="hover",c.Spacing="spacing",c.Target="target",c.Resize="resize"})(o||(o={}));var i=(function(c){a(d,c);function d(){return c!==null&&c.apply(this,arguments)||this}return d.prototype.defaults=function(){return{id:"",type:""}},Object.defineProperty(d.prototype,"type",{get:function(){return this.get("type")||""},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"component",{get:function(){var p,h=this.get("component");return h||((p=this.get("componentView"))===null||p===void 0?void 0:p.model)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"componentView",{get:function(){var p,h=this.get("componentView");return h||((p=this.get("component"))===null||p===void 0?void 0:p.getView())},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"el",{get:function(){var p;return(p=this.componentView)===null||p===void 0?void 0:p.el},enumerable:!1,configurable:!0}),d.prototype.getBoxRect=function(p){var h=this,g=h.el,y=h.em,b=y.Canvas.getCanvasView(),v=this.get("boxRect");return v||(g&&b?b.getElBoxRect(g,p):{x:0,y:0,width:0,height:0})},d.prototype.getStyle=function(p){p===void 0&&(p={});var h=p.boxRect||this.getBoxRect(p),g=h.width,y=h.height,b=h.x,v=h.y;return{width:"".concat(g,"px"),height:"".concat(y,"px"),top:"0",left:"0",position:"absolute",translate:"".concat(b,"px ").concat(v,"px")}},d.prototype.isType=function(p){return this.type===p},d})(t.A);const l=i}),1738:((s,r,e)=>{e.d(r,{A:()=>a});var t;(function(o){o.run="command:run",o.runCommand="command:run:",o.runBeforeCommand="command:run:before:",o.abort="command:abort:",o.stop="command:stop",o.stopCommand="command:stop:",o.stopBeforeCommand="command:stop:before:",o.call="command:call",o.callCommand="command:call:"})(t||(t={}));const a=t}),9484:((s,r,e)=>{e.r(r),e.d(r,{default:()=>t});const t={run:function(a){a.Components.clear(),a.Css.clear()}}}),9516:((s,r,e)=>{e.r(r),e.d(r,{default:()=>i});var t=e(5706),a=e(9966),o=e(6294);const i={run:function(l){(0,t.bindAll)(this,"onKeyUp","enableDragger","disableDragger"),this.editor=l,this.canvasModel=this.canvas.getCanvasView().model,this.toggleMove(1)},stop:function(l){this.toggleMove(),this.disableDragger()},onKeyUp:function(l){(0,o.Ch)(l)===" "&&this.editor.stopCommand(this.id)},enableDragger:function(l){this.toggleDragger(1,l)},disableDragger:function(l){this.toggleDragger(0,l)},toggleDragger:function(l,c){var d=this,p=d.canvasModel,h=d.em,g=this.dragger,y=l?"add":"remove";this.getCanvas().classList[y]("".concat(this.ppfx,"is__grabbing")),g||(g=new a.A({getPosition:function(){return{x:p.get("x"),y:p.get("y")}},setPosition:function(b){var v=b.x,w=b.y;p.set({x:v,y:w})},onStart:function(b,v){h.trigger("canvas:move:start",v)},onDrag:function(b,v){h.trigger("canvas:move",v)},onEnd:function(b,v){h.trigger("canvas:move:end",v)}}),this.dragger=g),l?g.start(c):g.stop()},toggleMove:function(l){var c=this.ppfx,d=l?"add":"remove",p=l?"on":"off",h={on:o.on,off:o.AU},g=this.getCanvas(),y=["".concat(c,"is__grab")];!l&&y.push("".concat(c,"is__grabbing")),y.forEach(function(b){return g.classList[d](b)}),h[p](document,"keyup",this.onKeyUp),h[p](g,"mousedown",this.enableDragger),h[p](document,"mouseup",this.disableDragger)}}}),9946:((s,r,e)=>{e.r(r),e.d(r,{default:()=>d,defineCommand:()=>l});var t=e(9156),a=e(1738),o=(function(){var p=function(h,g){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,b){y.__proto__=b}||function(y,b){for(var v in b)Object.prototype.hasOwnProperty.call(b,v)&&(y[v]=b[v])},p(h,g)};return function(h,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");p(h,g);function y(){this.constructor=h}h.prototype=g===null?Object.create(g):(y.prototype=g.prototype,new y)}})(),i=function(){return i=Object.assign||function(p){for(var h,g=1,y=arguments.length;g<y;g++){h=arguments[g];for(var b in h)Object.prototype.hasOwnProperty.call(h,b)&&(p[b]=h[b])}return p},i.apply(this,arguments)};function l(p){return p}var c=(function(p){o(h,p);function h(g){var y=p.call(this,0)||this;y.config=g||{},y.em=y.config.em||{};var b=y.config.stylePrefix;return y.pfx=b,y.ppfx=y.config.pStylePrefix,y.hoverClass="".concat(b,"hover"),y.badgeClass="".concat(b,"badge"),y.plhClass="".concat(b,"placeholder"),y.freezClass="".concat(y.ppfx,"freezed"),y.canvas=y.em.Canvas,y.init(y.config),y}return h.prototype.onFrameScroll=function(g){},h.prototype.getCanvas=function(){return this.canvas.getElement()},h.prototype.getCanvasBody=function(){return this.canvas.getBody()},h.prototype.getCanvasTools=function(){return this.canvas.getToolsEl()},h.prototype.offset=function(g){var y=g.getBoundingClientRect();return{top:y.top+g.ownerDocument.body.scrollTop,left:y.left+g.ownerDocument.body.scrollLeft}},h.prototype.init=function(g){},h.prototype.callRun=function(g,y){y===void 0&&(y={});var b=this.id;if(g.trigger("".concat(a.A.runBeforeCommand).concat(b),{options:y}),y.abort){g.trigger("".concat(a.A.abort).concat(b),{options:y});return}var v=y.sender||g,w=this.run(g,v,y),C={id:b,result:w,options:y},k=i(i({},C),{type:"run"});return this.noStop||(g.Commands.active[b]=w),g.trigger("".concat(a.A.runCommand).concat(b),C),g.trigger("".concat(a.A.callCommand).concat(b),k),g.trigger(a.A.run,C),g.trigger(a.A.call,k),w},h.prototype.callStop=function(g,y){y===void 0&&(y={});var b=this.id,v=y.sender||g;g.trigger("".concat(a.A.stopBeforeCommand).concat(b),{options:y});var w=this.stop(g,v,y),C={id:b,result:w,options:y},k=i(i({},C),{type:"stop"});return delete g.Commands.active[b],g.trigger("".concat(a.A.stopCommand).concat(b),C),g.trigger("".concat(a.A.callCommand).concat(b),k),g.trigger(a.A.stop,C),g.trigger(a.A.call,k),w},h.prototype.stopCommand=function(g){this.em.Commands.stop(this.id,g)},h.prototype.run=function(g,y,b){},h.prototype.stop=function(g,y,b){},h})(t.Kx);const d=c}),7801:((s,r,e)=>{e.r(r),e.d(r,{default:()=>i});var t=e(5706),a=function(l,c,d){if(d||arguments.length===2)for(var p=0,h=c.length,g;p<h;p++)(g||!(p in c))&&(g||(g=Array.prototype.slice.call(c,0,p)),g[p]=c[p]);return l.concat(g||Array.prototype.slice.call(c))},o={run:function(l,c,d){var p=this;d===void 0&&(d={});var h=[],g=d.component||l.getSelectedAll();return g=(0,t.isArray)(g)?a([],g,!0):[g],g.filter(Boolean).forEach(function(y){var b,v;if(!y.get("removable"))return p.em.logWarning("The element is not removable",{component:y});h.push(y);var w=((v=(b=y.delegate)===null||b===void 0?void 0:b.remove)===null||v===void 0?void 0:v.call(b,y))||y;w.remove()}),l.selectRemove(h),h}};const i=o}),4864:((s,r,e)=>{e.r(r),e.d(r,{default:()=>c});var t=e(5706),a=e(9966),o=e(1166),i=function(){return i=Object.assign||function(d){for(var p,h=1,g=arguments.length;h<g;h++){p=arguments[h];for(var y in p)Object.prototype.hasOwnProperty.call(p,y)&&(d[y]=p[y])}return d},i.apply(this,arguments)},l="dmode";const c={run:function(d,p,h){var g=this,y,b;if(h===void 0&&(h={}),(0,t.bindAll)(this,"setPosition","onStart","onDrag","onEnd","getPosition","getGuidesStatic","renderGuide","getGuidesTarget"),!h.target)throw new Error("Target option is required");var v=i({doc:(y=h.target.getEl())===null||y===void 0?void 0:y.ownerDocument,onStart:this.onStart,onEnd:this.onEnd,onDrag:this.onDrag,getPosition:this.getPosition,setPosition:this.setPosition,guidesStatic:function(){var C;return(C=g.guidesStatic)!==null&&C!==void 0?C:[]},guidesTarget:function(){var C;return(C=g.guidesTarget)!==null&&C!==void 0?C:[]}},(b=h.dragger)!==null&&b!==void 0?b:{});this.setupGuides(),this.opts=h,this.editor=d,this.em=d.getModel(),this.target=h.target,this.isTran=h.mode=="translate",this.guidesContainer=this.getGuidesContainer(),this.guidesTarget=this.getGuidesTarget(),this.guidesStatic=this.getGuidesStatic();var w=this.dragger;return w?w.setOptions(v):(w=new a.A(v),this.dragger=w),h.event&&w.start(h.event),this.toggleDrag(!0),this.em.trigger("".concat(l,":start"),this.getEventOpts()),w},getEventOpts:function(){var d,p,h=(p=(d=this.guidesTarget)===null||d===void 0?void 0:d.filter(function(g){return g.active}))!==null&&p!==void 0?p:[];return{mode:this.opts.mode,component:this.target,target:this.target,guidesTarget:this.guidesTarget,guidesStatic:this.guidesStatic,guidesMatched:this.getGuidesMatched(h),command:this}},stop:function(){this.toggleDrag()},setupGuides:function(){var d;((d=this.guides)!==null&&d!==void 0?d:[]).forEach(function(p){var h,g=p.guide;(h=g?.parentNode)===null||h===void 0||h.removeChild(g)}),this.guides=[]},getGuidesContainer:function(){var d=this,p,h,g,y,b=this.guidesEl;if(!b){var v=this,w=v.editor,C=v.em,k=v.opts,N=(p=w.getConfig().stylePrefix)!==null&&p!==void 0?p:"",O=document.createElement("div"),R=document.createElement("div"),L='<div class="'.concat(N,"guide-info__line ").concat(N,`danger-bg">
        <div class="`).concat(N,"guide-info__content ").concat(N,`danger-color"></div>
      </div>`);b=document.createElement("div"),b.className="".concat(N,"guides"),O.className="".concat(N,"guide-info ").concat(N,"guide-info__x"),R.className="".concat(N,"guide-info ").concat(N,"guide-info__y"),O.innerHTML=L,R.innerHTML=L,b.appendChild(O),b.appendChild(R),(h=w.Canvas.getGlobalToolsEl())===null||h===void 0||h.appendChild(b),this.guidesEl=b,this.elGuideInfoX=O,this.elGuideInfoY=R,this.elGuideInfoContentX=(g=O.querySelector(".".concat(N,"guide-info__content")))!==null&&g!==void 0?g:void 0,this.elGuideInfoContentY=(y=R.querySelector(".".concat(N,"guide-info__content")))!==null&&y!==void 0?y:void 0,C.on("canvas:update frame:scroll",(0,t.debounce)(function(){var B;d.updateGuides(),k.debug&&((B=d.guides)===null||B===void 0||B.forEach(function(G){return d.renderGuide(G)}))},200))}return b},getGuidesStatic:function(){var d=this,p=[],h=this.target.getEl(),g=h?.parentElement;return g?((0,t.each)(g.children,function(y){return p=p.concat(h!==y?d.getElementGuides(y):[])}),p.concat(this.getElementGuides(g))):[]},getGuidesTarget:function(){return this.getElementGuides(this.target.getEl())},updateGuides:function(d){var p=this,h,g,y,b=(h=d??this.guides)!==null&&h!==void 0?h:[];b.forEach(function(v){var w=v.origin,C=g===w?y:p.getElementPos(w);g=w,y=C,(0,t.each)(p.getGuidePosUpdate(v,C),function(k,N){v[N]=k}),v.originRect=C})},getGuidePosUpdate:function(d,p){var h={},g=p.top,y=p.height,b=p.left,v=p.width;switch(d.type){case"t":h.y=g;break;case"b":h.y=g+y;break;case"l":h.x=b;break;case"r":h.x=b+v;break;case"x":h.x=b+v/2;break;case"y":h.y=g+y/2;break}return h},renderGuide:function(d){var p,h;if(!this.opts.skipGuidesRender){var g=(p=d.guide)!==null&&p!==void 0?p:document.createElement("div"),y="px",b=d.active?2:1;if(g.style.cssText="position: absolute; background-color: ".concat(d.active?"green":"red",";"),!g.children.length){var v=document.createElement("div");v.style.cssText="position: absolute; color: red; padding: 5px; top: 0; left: 0;",g.appendChild(v)}return d.y?(g.style.width="100%",g.style.height="".concat(b).concat(y),g.style.top="".concat(d.y).concat(y),g.style.left="0"):(g.style.width="".concat(b).concat(y),g.style.height="100%",g.style.left="".concat(d.x).concat(y),g.style.top="0".concat(y)),!d.guide&&((h=this.guidesContainer)===null||h===void 0||h.appendChild(g)),g}},getElementPos:function(d){return this.editor.Canvas.getElementPos(d,{noScroll:1})},getElementGuides:function(d){var p=this,h=this.opts,g=d,y=this.getElementPos(d),b=(0,o.getComponentModel)(d),v=(0,o.getComponentView)(d),w=y.top,C=y.height,k=y.left,N=y.width,O=[{type:"t",y:w},{type:"b",y:w+C},{type:"l",x:k},{type:"r",x:k+N},{type:"x",x:k+N/2},{type:"y",y:w+C/2}],R=O.map(function(L){var B=h.debug?p.renderGuide(L):void 0;return i(i({},L),{component:b,componentView:v,componentEl:g,origin:g,componentElRect:y,originRect:y,guideEl:B,guide:B})});return R.forEach(function(L){var B;return(B=p.guides)===null||B===void 0?void 0:B.push(L)}),R},getTranslate:function(d,p){p===void 0&&(p="x");var h=0;return(d||"").split(" ").forEach(function(g){var y=g.trim(),b="translate".concat(p.toUpperCase(),"(");y.indexOf(b)===0&&(h=parseFloat(y.replace(b,"")))}),h},setTranslate:function(d,p,h){var g="translate".concat(p.toUpperCase(),"("),y="".concat(g).concat(h,")"),b=(d||"").split(" ").map(function(v){var w=v.trim();return w.indexOf(g)===0&&(v=y),v}).join(" ");return b.indexOf(g)<0&&(b+=" ".concat(y)),b},getPosition:function(){var d=this,p=d.target,h=d.isTran,g=p.getStyle(),y=g.transform,b=g.left,v=g.top,w=0,C=0;return h&&y?(w=this.getTranslate(y),C=this.getTranslate(y,"y")):(w=parseFloat(b??"0"),C=parseFloat(v??"0")),{x:w,y:C}},setPosition:function(d){var p,h,g=d.x,y=d.y,b=d.end,v=d.position,w=d.width,C=d.height,k=this,N=k.target,O=k.isTran,R=k.em,L=k.opts,B="px",G=!b,$="".concat(parseInt("".concat(g),10)).concat(B),z="".concat(parseInt("".concat(y),10)).concat(B),Y={};if(O){var M=(h=(p=N.getStyle())===null||p===void 0?void 0:p.transform)!==null&&h!==void 0?h:"";M=this.setTranslate(M,"x",$),M=this.setTranslate(M,"y",z),Y={transform:M,__p:G}}else{var q={position:v,width:w,height:C},P={left:$,top:z,__p:G};(0,t.keys)(q).forEach(function(H){var D=q[H];D&&(P[H]=D)}),Y=P}L.addStyle?L.addStyle({component:N,styles:Y,partial:!b}):N.addStyle(Y,{avoidStore:!b}),R.Styles.__emitCmpStyleUpdate(Y,{components:R.getSelected()})},_getDragData:function(){var d=this.target;return{target:d,parent:d.parent(),index:d.index()}},onStart:function(d){var p,h=this,g=h.target,y=h.editor,b=h.isTran,v=h.opts,w=y.Canvas,C=g.getStyle(),k="absolute",N=[k,"relative"];if((p=v.onStart)===null||p===void 0||p.call(v,this._getDragData()),!b){if(C.position!==k){var O=w.offset(g.getEl()),R=O.left,L=O.top,B=O.width,G=O.height,$=g.parent(),z=null;do{var Y=$?.getStyle(),M=Y?.position;M&&(z=N.indexOf(M)>=0?$:null),$=$?.parent()}while($&&!z);if(v.center){var q=w.getMouseRelativeCanvas(d),P=q.x,H=q.y;R=P,L=H}else if(z){var D=w.offset(z.getEl());R=R-D.left,L=L-D.top}this.setPosition({x:R,y:L,width:"".concat(B,"px"),height:"".concat(G,"px"),position:k})}this.guidesStatic=this.getGuidesStatic()}},onDrag:function(d){var p=this,h,g,y=this,b=y.guidesTarget,v=y.opts;this.updateGuides(b),v.debug&&b?.forEach(function(w){return p.renderGuide(w)}),v.guidesInfo&&this.renderGuideInfo((h=b?.filter(function(w){return w.active}))!==null&&h!==void 0?h:[]),(g=v.onDrag)===null||g===void 0||g.call(v,this._getDragData()),this.opts.event=d,this.em.trigger("".concat(l,":move"),this.getEventOpts())},onEnd:function(d,p,h){var g,y=this,b=y.editor,v=y.opts,w=y.id;(g=v.onEnd)===null||g===void 0||g.call(v,d,h,i(i({event:d},h),this._getDragData())),b.stopCommand("".concat(w)),this.hideGuidesInfo(),this.em.trigger("".concat(l,":end"),this.getEventOpts())},hideGuidesInfo:function(){var d=this;["X","Y"].forEach(function(p){var h=d["elGuideInfo".concat(p)];h&&(h.style.display="none")})},renderGuideInfo:function(d){var p=this;d===void 0&&(d=[]),this.hideGuidesInfo();var h=this.getGuidesMatched(d);h.forEach(function(g){p.opts.skipGuidesRender||p.renderSingleGuideInfo(g),p.em.trigger("".concat(l,":active"),i(i({},p.getEventOpts()),g))})},renderSingleGuideInfo:function(d){var p=d.posFirst,h=d.posSecond,g=d.size,y=d.sizeRaw,b=d.guide,v=d.elGuideInfo,w=d.elGuideInfoCnt,C=(0,t.isUndefined)(b.x)?"y":"x",k=C==="y",N=v.style;N.display="",N[k?"top":"left"]="".concat(p,"px"),N[k?"left":"top"]="".concat(h,"px"),N[k?"width":"height"]="".concat(g,"px"),w.innerHTML="".concat(Math.round(y),"px")},getGuidesMatched:function(d){var p=this;d===void 0&&(d=[]);var h=this.guidesStatic,g=h===void 0?[]:h;return d.map(function(y){var b=y.origin,v=y.x,w=p.getElementPos(b),C=(0,t.isUndefined)(v)?"y":"x",k=C==="y",N=w[k?"left":"top"],O=w.rect[k?"left":"top"],R=k?N+w.width:N+w.height,L=k?O+w.rect.width:O+w.rect.height,B=g.filter(function(Pe){var $e,we={l:["r","x"],r:["l","x"],x:["l","r"],t:["b","y"],b:["t","y"],y:["t","b"]};return Pe.type===y.type||(($e=we[y.type])===null||$e===void 0?void 0:$e.includes(Pe.type))}).map(function(Pe){var $e=Pe.originRect,we=$e.left,Ae=$e.width,ze=$e.top,Ge=$e.height,Ue=k?we:ze,ht=k?we+Ae:ze+Ge;return{gap:ht<N?N-ht:Ue-R,guide:Pe}}).filter(function(Pe){return Pe.gap>0}).sort(function(Pe,$e){return Pe.gap-$e.gap}).map(function(Pe){return Pe.guide}).filter(function(Pe){switch(y.type){case"l":case"r":case"x":return Math.abs(Pe.x-y.x)<1;case"t":case"b":case"y":return Math.abs(Pe.y-y.y)<1;default:return!1}}),G=B[0];if(G){var $=G.originRect,z=$.left,Y=$.width,M=$.top,q=$.height,P=$.rect,H=k?z<w.left:M<w.top,D=k?z:M,X=k?P.left:P.top,se=k?z+Y:M+q,Q=k?P.left+P.width:P.top+P.height,xe=k?y.y:y.x,K=H?se:R,Z=H?N-se:D-R,ve=H?O-Q:X-L,ae=p["elGuideInfo".concat(C.toUpperCase())],Se=p["elGuideInfoContent".concat(C.toUpperCase())];return{guide:y,guidesStatic:g,matched:G,posFirst:xe,posSecond:K,size:Z,sizeRaw:ve,elGuideInfo:ae,elGuideInfoCnt:Se}}else return null}).filter(Boolean)},toggleDrag:function(d){var p=this,h=p.ppfx,g=p.editor,y=d?"add":"remove",b=["".concat(h,"is__grabbing")],v=g.Canvas,w=v.getBody();b.forEach(function(C){return w.classList[y](C)}),v[d?"startAutoscroll":"stopAutoscroll"]()},editor:void 0,em:void 0,opts:void 0,target:void 0}}),6134:((s,r,e)=>{e.r(r),e.d(r,{default:()=>t});const t={run:function(a){if(a.Canvas.hasFocus()){var o=[];a.getSelectedAll().forEach(function(i){var l=i.components(),c=l&&l.filter(function(d){return d.get("selectable")})[0];c&&o.push(c)}),o.length&&a.select(o)}}}}),914:((s,r,e)=>{e.r(r),e.d(r,{default:()=>t});const t={run:function(a,o,i){if(i===void 0&&(i={}),!(!a.Canvas.hasFocus()&&!i.force)){var l=[];a.getSelectedAll().forEach(function(c){for(var d=c.parent();d&&!d.get("selectable");)d=d.parent();d&&l.push(d)}),l.length&&a.select(l)}}}}),5547:((s,r,e)=>{e.r(r),e.d(r,{default:()=>t});const t={run:function(a){if(a.Canvas.hasFocus()){var o=[];a.getSelectedAll().forEach(function(i){var l=i.parent();if(l){var c=l.components().length,d=0,p=0,h;do d++,p=i.index()+d,h=p<=c?l.getChildAt(p):null;while(h&&!h.get("selectable"));o.push(h||i)}}),o.length&&a.select(o)}}}}),8655:((s,r,e)=>{e.r(r),e.d(r,{default:()=>t});const t={run:function(a){if(a.Canvas.hasFocus()){var o=[];a.getSelectedAll().forEach(function(i){var l=i.parent();if(l){var c=0,d=0,p;do c++,d=i.index()-c,p=d>=0?l.getChildAt(d):null;while(p&&!p.get("selectable"));o.push(p||i)}}),o.length&&a.select(o)}}}}),7640:((s,r,e)=>{e.r(r),e.d(r,{default:()=>a});var t=e(5706);const a={run:function(o,i,l){l===void 0&&(l={});var c=l.target,d=[];if(!c.get("styles"))return d;var p=c.get("type"),h=o.Pages.getAllWrappers(),g=(0,t.flatten)(h.map(function(b){return b.findType(p)})).length;if(!g){var y=o.CssComposer.getAll();d=y.filter(function(b){return b.get("group")==="cmp:".concat(p)}),y.remove(d)}return d}}}),5837:((s,r,e)=>{e.r(r),e.d(r,{default:()=>a});var t=function(o,i,l){if(l||arguments.length===2)for(var c=0,d=i.length,p;c<d;c++)(p||!(c in i))&&(p||(p=Array.prototype.slice.call(i,0,c)),p[c]=i[c]);return o.concat(p||Array.prototype.slice.call(i))};const a={run:function(o){var i=o.getModel(),l=t([],o.getSelectedAll(),!0).map(function(c){var d,p;return((p=(d=c.delegate)===null||d===void 0?void 0:d.copy)===null||p===void 0?void 0:p.call(d,c))||c}).filter(Boolean);l.length&&i.set("clipboard",l)}}}),6477:((s,r,e)=>{e.r(r),e.d(r,{default:()=>a});var t=e(6294);const a={run:function(o,i,l){var c=this;l===void 0&&(l={}),i&&i.set&&i.set("active",0);var d=o.getConfig(),p=o.Modal,h=d.stylePrefix;if(this.cm=o.CodeManager||null,!this.editors){var g=this.buildEditor("htmlmixed","hopscotch","HTML"),y=this.buildEditor("css","hopscotch","CSS");this.htmlEditor=g.model,this.cssEditor=y.model;var b=(0,t.a_)("div",{class:"".concat(h,"export-dl")});b.appendChild(g.el),b.appendChild(y.el),this.editors=b}p.open({title:d.textViewCode,content:this.editors}).getModel().once("change:open",function(){return o.stopCommand("".concat(c.id))}),this.htmlEditor.setContent(o.getHtml(l.optsHtml)),this.cssEditor.setContent(o.getCss(l.optsCss))},stop:function(o){var i=o.Modal;i&&i.close()},buildEditor:function(o,i,l){var c=this.em.CodeManager,d=c.createViewer({label:l,codeName:o,theme:i}),p=new c.EditorView({model:d,config:c.getConfig()}).render().el;return{model:d,el:p}}}}),1772:((s,r,e)=>{e.r(r),e.d(r,{default:()=>a});var t=e(5706);const a={isEnabled:function(){var o=document;return!!(o.fullscreenElement||o.webkitFullscreenElement||o.mozFullScreenElement)},enable:function(o){var i="";return o.requestFullscreen?o.requestFullscreen():o.webkitRequestFullscreen?(i="webkit",o.webkitRequestFullscreen()):o.mozRequestFullScreen?(i="moz",o.mozRequestFullScreen()):o.msRequestFullscreen&&o.msRequestFullscreen(),i},disable:function(){var o=document;this.isEnabled()&&(o.exitFullscreen?o.exitFullscreen():o.webkitExitFullscreen?o.webkitExitFullscreen():o.mozCancelFullScreen?o.mozCancelFullScreen():o.msExitFullscreen&&o.msExitFullscreen())},fsChanged:function(o){this.isEnabled()||(this.stopCommand({sender:this.sender}),document.removeEventListener("".concat(o||"","fullscreenchange"),this.fsChanged))},run:function(o,i,l){l===void 0&&(l={}),this.sender=i;var c=l.target,d=(0,t.isElement)(c)?c:document.querySelector(c),p=this.enable(d||o.getContainer());this.fsChanged=this.fsChanged.bind(this,p),document.addEventListener(p+"fullscreenchange",this.fsChanged)},stop:function(o,i){i&&i.set&&i.set("active",!1),this.disable()}}}),741:((s,r,e)=>{e.r(r),e.d(r,{default:()=>c});var t=e(5706),a=e(7774),o=e(6294),i=e(9317),l=e(1406);const c=(0,t.extend)({},l.default,i.default,{init:function(d){i.default.init.apply(this,arguments),(0,t.bindAll)(this,"initSorter","rollback","onEndMove"),this.opt=d,this.hoverClass=this.ppfx+"highlighter-warning",this.badgeClass=this.ppfx+"badge-warning",this.noSelClass=this.ppfx+"no-select"},enable:function(){for(var d=[],p=0;p<arguments.length;p++)d[p]=arguments[p];i.default.enable.apply(this,d),this.getBadgeEl().addClass(this.badgeClass),this.getHighlighterEl().addClass(this.hoverClass);var h=this.$wrapper;h.css("cursor","move"),h.on("mousedown",this.initSorter),h.addClass(this.noSelClass)},toggleClipboard:function(){},initSorter:function(d){var p=(0,a.default)(d.target).data("model"),h=p.get("draggable");h&&(this.cacheEl=null,this.startSelectPosition(d.target,this.frameEl.contentDocument),this.sorter.draggable=h,this.sorter.eventHandlers.legacyOnEndMove=this.onEndMove.bind(this),this.stopSelectComponent(),this.$wrapper.off("mousedown",this.initSorter),(0,o.on)(this.getContentWindow(),"keydown",this.rollback))},initSorterFromModel:function(d){var p=d.get("draggable");if(p){this.cacheEl=null;var h=d.view.el;this.startSelectPosition(h,this.frameEl.contentDocument),this.sorter.draggable=p,this.sorter.eventHandlers.legacyOnEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,o.on)(this.getContentWindow(),"keydown",this.rollback)}},initSorterFromModels:function(d){this.cacheEl=null;var p=d[d.length-1],h=this.em.getCurrentFrame(),g=p.getEl(h?.model),y=g.ownerDocument,b=d.map(function(v){var w;return(w=v?.view)===null||w===void 0?void 0:w.el});this.startSelectPosition(b,y,{onStart:this.onStart}),this.sorter.eventHandlers.legacyOnMoveClb=this.onDrag,this.sorter.eventHandlers.legacyOnEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,o.on)(this.getContentWindow(),"keydown",this.rollback)},onEndMoveFromModel:function(){(0,o.AU)(this.getContentWindow(),"keydown",this.rollback)},onEndMove:function(){this.enable(),(0,o.AU)(this.getContentWindow(),"keydown",this.rollback)},onSelect:function(d,p){},rollback:function(d,p){var h=d.which||d.keyCode;(h==27||p)&&this.sorter.cancelDrag()},getBadgeEl:function(){return this.$badge||(this.$badge=(0,a.default)(this.getBadge())),this.$badge},getHighlighterEl:function(){return this.$hl||(this.$hl=(0,a.default)(this.canvas.getHighlighter())),this.$hl},stop:function(){for(var d=[],p=0;p<arguments.length;p++)d[p]=arguments[p];i.default.stop.apply(this,d),this.getBadgeEl().removeClass(this.badgeClass),this.getHighlighterEl().removeClass(this.hoverClass);var h=this.$wrapper;h.css("cursor","").unbind().removeClass(this.noSelClass)}})}),2924:((s,r,e)=>{e.r(r),e.d(r,{default:()=>o});var t=e(5706),a=e(6294);const o={open:function(i){var l=this,c=this,d=c.editor,p=c.title,h=c.config,g=c.am,y=h.custom;if((0,t.isFunction)(y.open))return y.open(g.__customData());var b=d.Modal;b.open({title:p,content:i}).onceClose(function(){return d.stopCommand(l.id)})},close:function(){var i=this.config.custom;if((0,t.isFunction)(i.close))return i.close(this.am.__customData());var l=this.editor.Modal;l&&l.close()},run:function(i,l,c){c===void 0&&(c={});var d=i.AssetManager,p=d.getConfig(),h=c.types,g=h===void 0?[]:h,y=c.accept,b=c.select;if(this.title=c.modalTitle||i.t("assetManager.modalTitle")||"",this.editor=i,this.config=p,this.am=d,d.setTarget(c.target),d.onClick(c.onClick),d.onDblClick(c.onDblClick),d.onSelect(c.onSelect),d.__behaviour({select:b,types:g,options:c}),p.custom)this.rendered=this.rendered||(0,a.a_)("div"),this.rendered.className="".concat(p.stylePrefix,"custom-wrp"),d.__behaviour({container:this.rendered}),d.__trgCustom();else{if(!this.rendered||g){var v=d.getAll().filter(function(C){return C});g&&g.length&&(v=v.filter(function(C){return g.indexOf(C.get("type"))!==-1})),d.render(v),this.rendered=d.getContainer()}if(y){var w=this.rendered.querySelector("input#".concat(p.stylePrefix,"uploadFile"));w&&w.setAttribute("accept",y)}}return this.open(this.rendered),this},stop:function(i){this.editor=i,this.close(this.rendered)}}}),3963:((s,r,e)=>{e.r(r),e.d(r,{default:()=>o});var t=e(5706),a=e(6294);const o={open:function(){var i=this,l=i.container,c=i.editor,d=i.bm,p=i.config,h=p.custom,g=p.appendTo;if((0,t.isFunction)(h.open))return h.open(d.__customData());if(this.firstRender&&!g){var y="views-container",b=c.Panels,v=b.getPanel(y)||b.addPanel({id:y});v.set("appendContent",l).trigger("change:appendContent"),h||l.appendChild(d.render())}l&&(l.style.display="block")},close:function(){var i=this,l=i.container,c=i.config,d=c.custom;if((0,t.isFunction)(d.close))return d.close(this.bm.__customData());l&&(l.style.display="none")},run:function(i){var l=i.Blocks;this.config=l.getConfig(),this.firstRender=!this.container,this.container=this.container||(0,a.a_)("div"),this.editor=i,this.bm=l;var c=this.container;l.__behaviour({container:c}),this.config.custom&&l.__trgCustom(),this.open()},stop:function(){this.close()}}}),1479:((s,r,e)=>{e.r(r),e.d(r,{default:()=>t});const t={run:function(a){var o=a.LayerManager,i=a.Panels,l=o.getConfig();if(!l.appendTo){if(!this.layers){var c="views-container",d=document.createElement("div"),p=i.getPanel(c)||i.addPanel({id:c});l.custom?o.__trgCustom({container:d}):d.appendChild(o.render()),p.set("appendContent",d).trigger("change:appendContent"),this.layers=d}this.layers.style.display="block"}},stop:function(){var a=this.layers;a&&(a.style.display="none")}}}),3473:((s,r,e)=>{e.r(r),e.d(r,{default:()=>a});var t=e(7774);const a={run:function(o,i){if(this.sender=i,!this.$cnt){var l=o.getConfig(),c=o.Panels,d=o.DeviceManager,p=o.SelectorManager,h=o.StyleManager,g="change:appendContent",y=(0,t.default)("<div></div>"),b=(0,t.default)("<div></div>"),v=(0,t.default)("<div></div>"),w=(0,t.default)("<div></div>");if(this.$cnt=y,this.$cntInner=b,b.append(v),b.append(w),y.append(b),d&&l.showDevices){var C=c.addPanel({id:"devices-c"}),k=d.render();C.set("appendContent",k).trigger(g)}var N=p.getConfig();N.custom?p.__trgCustom({container:v.get(0)}):N.appendTo||v.append(p.render([])),this.sm=h;var O=h.getConfig(),R=O.stylePrefix;this.$header=(0,t.default)('<div class="'.concat(R,'header">').concat(o.t("styleManager.empty"),"</div>")),y.append(this.$header),O.custom?h.__trgCustom({container:w.get(0)}):O.appendTo||w.append(h.render());var L="views-container",B=c.getPanel(L)||c.addPanel({id:L});B.set("appendContent",y).trigger(g);var G=o.getModel();this.listenTo(G,h.events.target,this.toggleSm)}this.toggleSm()},toggleSm:function(){var o=this,i=o.sender,l=o.sm,c=o.$cntInner,d=o.$header;i&&i.get&&!i.get("active")||!l||(l.getSelected()?(c?.show(),d?.hide()):(c?.hide(),d?.show()))},stop:function(){var o,i;(o=this.$cntInner)===null||o===void 0||o.hide(),(i=this.$header)===null||i===void 0||i.hide()}}}),5054:((s,r,e)=>{e.r(r),e.d(r,{default:()=>a});var t=e(7774);const a={run:function(o,i){this.sender=i;var l=o.getModel(),c=o.Config,d=c.stylePrefix,p=o.TraitManager,h=p.getConfig(),g;if(!h.appendTo){if(!this.$cn){this.$cn=(0,t.default)("<div></div>"),this.$cn2=(0,t.default)("<div></div>"),this.$cn.append(this.$cn2),this.$header=(0,t.default)("<div>").append('<div class="'.concat(h.stylePrefix,'header">').concat(l.t("traitManager.empty"),"</div>")),this.$cn.append(this.$header),h.custom?p.__trgCustom({container:this.$cn2.get(0)}):(this.$cn2.append('<div class="'.concat(d,'traits-label">').concat(l.t("traitManager.label"),"</div>")),this.$cn2.append(p.render()));var y=o.Panels;y.getPanel("views-container")?g=y.getPanel("views-container"):g=y.addPanel({id:"views-container"}),g?.set("appendContent",this.$cn.get(0)).trigger("change:appendContent"),this.target=o.getModel(),this.listenTo(this.target,"component:toggled",this.toggleTm)}this.toggleTm()}},toggleTm:function(){var o=this.sender;o&&o.get&&!o.get("active")||(this.target.getSelectedAll().length===1?(this.$cn2.show(),this.$header.hide()):(this.$cn2.hide(),this.$header.show()))},stop:function(){this.$cn2&&this.$cn2.hide(),this.$header&&this.$header.hide()}}}),6979:((s,r,e)=>{e.r(r),e.d(r,{default:()=>a});var t=e(5706);const a={run:function(i,l,c){c===void 0&&(c={});var d=i.getModel(),p=d.get("clipboard"),h=i.getSelected();p?.length&&h&&(i.getSelectedAll().forEach(function(g){var y,b,v,w=((b=(y=g.delegate)===null||y===void 0?void 0:y.copy)===null||b===void 0?void 0:b.call(y,g))||g,C=w.collection,k;if(C){var N=w.index()+1,O={at:N,action:c.action||"paste-component"};(0,t.contains)(p,w)&&w.get("copyable")?k=C.add(w.clone(),O):k=o(i,p,w.parent(),O)}else{var R=(v=d.Pages.getSelected())===null||v===void 0?void 0:v.getMainComponent(),O={at:R?.components().length||0,action:c.action||"paste-component"};k=o(i,p,R,O)}k=(0,t.isArray)(k)?k:[k],k.forEach(function(L){return i.trigger("component:paste",L)})}),h.emitUpdate())}};function o(i,l,c,d){var p=l.filter(function(g){return g.get("copyable")}),h=p.filter(function(g){return i.Components.canMove(c,g).result});return c.components().add(h.map(function(g){return g.clone()}),d)}}),4457:((s,r,e)=>{e.r(r),e.d(r,{default:()=>i});var t=e(5706),a=function(l,c,d){if(d||arguments.length===2)for(var p=0,h=c.length,g;p<h;p++)(g||!(p in c))&&(g||(g=Array.prototype.slice.call(c,0,p)),g[p]=c[p]);return l.concat(g||Array.prototype.slice.call(c))},o="core:component-outline";const i={getPanels:function(l){return this.panels||(this.panels=l.Panels.getPanels()),this.panels},preventDrag:function(l){l.abort=1},tglEffects:function(l){var c=this.em,d=l?"on":"off";if(c){var p=c.Canvas,h=p.getBody(),g=p.getToolbarEl();g&&(g.style.display=l?"none":"");var y=h.querySelectorAll(".".concat(this.ppfx,"no-pointer"));(0,t.each)(y,function(b){return b.style.pointerEvents=l?"all":""}),c[d]("run:tlb-move:before",this.preventDrag)}},run:function(l,c){var d=this;this.sender=c,this.selected=a([],l.getSelectedAll(),!0),l.select(),this.shouldRunSwVisibility||(this.shouldRunSwVisibility=l.Commands.isActive(o)),this.shouldRunSwVisibility&&l.stopCommand(o),l.getModel().stopDefault();var p=this.getPanels(l),h=l.Canvas.getElement(),g=l.getEl(),y=l.Config.stylePrefix;if(!this.helper){var b=document.createElement("span");b.className="".concat(y,"off-prv fa fa-eye-slash"),g.appendChild(b),b.onclick=function(){return d.stopCommand()},this.helper=b}this.helper.style.display="inline-block",p.forEach(function(w){return w.set("visible",!1)});var v=h.style;v.width="100%",v.height="100%",v.top="0",v.left="0",v.padding="0",v.margin="0",l.refresh(),this.tglEffects(1)},stop:function(l){var c=this,d=c.sender,p=d===void 0?{}:d,h=c.selected;p.set&&p.set("active",0);var g=this.getPanels(l);this.shouldRunSwVisibility&&(l.runCommand(o),this.shouldRunSwVisibility=!1),l.getModel().runDefault(),g.forEach(function(b){return b.set("visible",!0)});var y=l.Canvas.getElement();y.setAttribute("style",""),h&&l.select(h),delete this.selected,this.helper&&(this.helper.style.display="none"),l.refresh(),this.tglEffects()}}}),5493:((s,r,e)=>{e.r(r),e.d(r,{ConvertUnitsToPx:()=>l,default:()=>c});var t=e(2225),a=e(1166),o=function(){return o=Object.assign||function(d){for(var p,h=1,g=arguments.length;h<g;h++){p=arguments[h];for(var y in p)Object.prototype.hasOwnProperty.call(p,y)&&(d[y]=p[y])}return d},o.apply(this,arguments)},i=function(d,p){var h={};for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&p.indexOf(g)<0&&(h[g]=d[g]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,g=Object.getOwnPropertySymbols(d);y<g.length;y++)p.indexOf(g[y])<0&&Object.prototype.propertyIsEnumerable.call(d,g[y])&&(h[g[y]]=d[g[y]]);return h},l;(function(d){d.pt="pt",d.pc="pc",d.in="in",d.cm="cm",d.mm="mm",d.vw="vw",d.vh="vh",d.vmin="vmin",d.vmax="vmax",d.svw="svw",d.lvw="lvw",d.dvw="dvw",d.svh="svh",d.lvh="lvh",d.dvh="dvh",d.perc="%"})(l||(l={}));const c={run:function(d,p,h){var g=this,y=d.Canvas,b=d.Utils,v=d.em,w=y.getCanvasView(),C=v.config.stylePrefix||"",k="".concat(C,"resizing"),N=h.onStart,O=N===void 0?function(){}:N,R=h.onMove,L=R===void 0?function(){}:R,B=h.onEnd,G=B===void 0?function(){}:B,$=h.updateTarget,z=$===void 0?function(){}:$,Y=h.el,M=h.componentView,q=h.component,P=h.skipPositionUpdate,H=i(h,["onStart","onMove","onEnd","updateTarget","el","componentView","component","skipPositionUpdate"]),D=Y||M?.el||q.getEl(),X={component:q,el:D},se,Q,xe=function(ve,ae,Se){var Pe=Se.docs;Pe&&Pe.forEach(function($e){var we=$e.body,Ae=we.className||"";we.className=(ve=="add"?"".concat(Ae," ").concat(k):Ae.replace(k,"")).trim()})},K=o(o({appendTo:y.getResizerEl(),prefix:d.getConfig().stylePrefix,posFetcher:w.getElementPos.bind(w),mousePosFetcher:y.getMouseRelativePos.bind(y),docs:[document],updateOnMove:!0,skipUnitAdjustments:!0,onStart:function(ve,ae){var Se;O(ve,ae);var Pe=ae.el,$e=ae.config,we=ae.resizer,Ae=$e.keyHeight,ze=$e.keyWidth,Ge=$e.currentUnit,Ue=$e.keepAutoHeight,ht=$e.keepAutoWidth;xe("add",ve,ae),se=v.Styles.getModelToStyle(q),Q=getComputedStyle(Pe);var ee=se.getStyle(),ue=o({},we.startDim),Oe=ee[ze];$e.autoWidth=ht&&Oe==="auto",isNaN(parseFloat(Oe))&&(Oe=Q[ze]);var J=ee[Ae];$e.autoHeight=Ue&&J==="auto",isNaN(parseFloat(J))&&(J=Q[Ae]);var I=parseFloat(Oe),V=parseFloat(J),re=(0,a.getUnitFromValue)(Oe),pe=(0,a.getUnitFromValue)(J);Ge&&($e.unitWidth=re,$e.unitHeight=pe);var ge=o(o({},X),{event:ve,rect:ue,model:se,modelWidth:{value:Oe,property:ze,number:I,unit:re},modelHeight:{value:J,property:Ae,number:V,unit:pe}});d.trigger(t.I.resizeStart,ge),d.trigger(t.I.resize,o(o({},ge),{type:"start"})),(Se=h.afterStart)===null||Se===void 0||Se.call(h)},onMove:function(ve,ae){L(ve,ae);var Se=ae.resizer,Pe=o(o({},X),{event:ve,delta:Se.delta,pointer:Se.currentPos,rect:Se.rectDim});d.trigger(t.I.resizeStart,Pe),d.trigger(t.I.resize,o(o({},Pe),{type:"move"}))},onEnd:function(ve,ae){var Se;G(ve,ae),xe("remove",ve,ae);var Pe=ae.resizer,$e=o(o({},X),{event:ve,rect:Pe.rectDim,moved:Pe.moved});d.trigger(t.I.resizeEnd,$e),d.trigger(t.I.resize,o(o({},X),{type:"end"})),(Se=h.afterEnd)===null||Se===void 0||Se.call(h)},updateTarget:function(ve,ae,Se){var Pe;if(z(ve,ae,Se),!!se){var $e=Se.store,we=Se.selectedHandler,Ae=Se.config,ze=Se.resizer,Ge=Se.event,Ue=Ae.keyHeight,ht=Ae.keyWidth,ee=Ae.autoHeight,ue=Ae.autoWidth,Oe=Ae.unitWidth,J=Ae.unitHeight,I=["tc","bc"].indexOf(we)>=0,V=["cl","cr"].indexOf(we)>=0,re=!$e,pe={};if(!I){var ge=((Pe=y.getBody())===null||Pe===void 0?void 0:Pe.offsetWidth)||0,Ce=ae.w<ge?ae.w:ge;pe[ht]=ue?"auto":g.convertPxToUnit({el:D,elComputedStyle:Q,valuePx:Ce,unit:Oe})}V||(pe[Ue]=ee?"auto":g.convertPxToUnit({el:D,elComputedStyle:Q,valuePx:ae.h,unit:J,isHeight:!0})),!P&&v.getDragMode(q)&&(pe.top="".concat(ae.t,"px"),pe.left="".concat(ae.l,"px"));var he=!1,ie=function(We){he=!0;var Qe=o(o({},We||pe),{__p:re});se.addStyle(Qe,{avoidStore:re}),v.Styles.__emitCmpStyleUpdate(Qe,{components:q})},Fe=o(o({},X),{rect:ae,partial:re,event:Ge,style:pe,updateStyle:ie,convertPxToUnit:function(We){return g.convertPxToUnit(o({el:D,elComputedStyle:Q},We))},delta:ze.delta,pointer:ze.currentPos});d.trigger(t.I.resizeUpdate,Fe),!he&&ie()}}},H),h.options),Z=this.canvasResizer;return Z||(this.canvasResizer=new b.Resizer(K),Z=this.canvasResizer),Z.setOptions(K,!0),Z.blur(),Z.focus(D),Z},stop:function(){var d;(d=this.canvasResizer)===null||d===void 0||d.blur()},convertPxToUnit:function(d){var p=d.el,h=d.valuePx,g=d.unit,y=d.dpi,b=y===void 0?96:y,v=d.roundDecimals,w=v===void 0?3:v,C=d.isHeight,k=d.elComputedStyle,N=p.ownerDocument.defaultView,O=N?.innerWidth||1,R=window.innerHeight||1,L=h,B=g;switch(g){case l.pt:L=h*(72/b);break;case l.pc:L=h*(6/b);break;case l.in:L=h/b;break;case l.cm:L=h/(b/2.54);break;case l.mm:L=h/(b/25.4);break;case l.vw:L=h/O*100;break;case l.vh:L=h/R*100;break;case l.vmin:{var G=Math.min(O,R);L=h/G*100;break}case l.vmax:{var $=Math.max(O,R);L=h/$*100;break}case l.perc:{var z=p.parentElement,Y=p.offsetParent,M=k?.position==="absolute"?Y:z,q=M?.offsetWidth||1,P=M?.offsetHeight||1,H=C?P:q;L=h/H*100;break}case l.svw:case l.lvw:case l.dvw:L=h/O*100;break;case l.svh:case l.lvh:case l.dvh:L=h/R*100;break;default:B="px"}return"".concat(+L.toFixed(w)).concat(B)}}}),9317:((s,r,e)=>{e.r(r),e.d(r,{default:()=>$});var t=e(5706),a=e(179),o=e(9156),i=(function(){var z=function(Y,M){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,P){q.__proto__=P}||function(q,P){for(var H in P)Object.prototype.hasOwnProperty.call(P,H)&&(q[H]=P[H])},z(Y,M)};return function(Y,M){if(typeof M!="function"&&M!==null)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");z(Y,M);function q(){this.constructor=Y}Y.prototype=M===null?Object.create(M):(q.prototype=M.prototype,new q)}})(),l=(function(z){i(Y,z);function Y(){return z!==null&&z.apply(this,arguments)||this}return Y.prototype.defaults=function(){return{command:"",attributes:{}}},Y})(o.Kx);const c=l;var d=(function(){var z=function(Y,M){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,P){q.__proto__=P}||function(q,P){for(var H in P)Object.prototype.hasOwnProperty.call(P,H)&&(q[H]=P[H])},z(Y,M)};return function(Y,M){if(typeof M!="function"&&M!==null)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");z(Y,M);function q(){this.constructor=Y}Y.prototype=M===null?Object.create(M):(q.prototype=M.prototype,new q)}})(),p=(function(z){d(Y,z);function Y(){return z!==null&&z.apply(this,arguments)||this}return Y})(o.pM);const h=p;p.prototype.model=c;var g=e(2225),y=e(8242),b=(function(){var z=function(Y,M){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,P){q.__proto__=P}||function(q,P){for(var H in P)Object.prototype.hasOwnProperty.call(P,H)&&(q[H]=P[H])},z(Y,M)};return function(Y,M){if(typeof M!="function"&&M!==null)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");z(Y,M);function q(){this.constructor=Y}Y.prototype=M===null?Object.create(M):(q.prototype=M.prototype,new q)}})(),v=function(){return v=Object.assign||function(z){for(var Y,M=1,q=arguments.length;M<q;M++){Y=arguments[M];for(var P in Y)Object.prototype.hasOwnProperty.call(Y,P)&&(z[P]=Y[P])}return z},v.apply(this,arguments)},w=(function(z){b(Y,z);function Y(M){var q=z.call(this,M)||this;return q.em=M.config.em,q}return Y.prototype.events=function(){return this.model.get("events")||{mousedown:"handleClick"}},Y.prototype.attributes=function(){return this.model.get("attributes")},Y.prototype.handleClick=function(M){M.preventDefault(),M.stopPropagation();var q=this.em,P=q.Canvas.getFrameEl().getBoundingClientRect(),H=P.left,D=P.top,X=v(v({},M),{clientX:M.clientX-H,clientY:M.clientY-D});q.trigger("toolbar:run:before",{event:X}),this.execCommand(X)},Y.prototype.execCommand=function(M){var q=this,P=q.em,H=q.model,D={event:M},X=H.get("command"),se=P.Editor;(0,t.isFunction)(X)&&X(se,null,D),(0,t.isString)(X)&&se.runCommand(X,D)},Y.prototype.render=function(){var M=this,q=M.em,P=M.$el,H=M.model,D=H.get("id"),X=H.get("label"),se=q.getConfig().stylePrefix;return P.addClass("".concat(se,"toolbar-item")),D&&P.addClass("".concat(se,"toolbar-item__").concat(D)),X&&P.append(X),this},Y})(o.Ss);const C=w;var k=(function(){var z=function(Y,M){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,P){q.__proto__=P}||function(q,P){for(var H in P)Object.prototype.hasOwnProperty.call(P,H)&&(q[H]=P[H])},z(Y,M)};return function(Y,M){if(typeof M!="function"&&M!==null)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");z(Y,M);function q(){this.constructor=Y}Y.prototype=M===null?Object.create(M):(q.prototype=M.prototype,new q)}})(),N=(function(z){k(Y,z);function Y(M){var q=z.call(this,M)||this,P=M.em;return q.em=P,q.config={em:P},q.listenTo(q.collection,"reset",q.render),q}return Y.prototype.onRender=function(){var M=this.em.config.stylePrefix;this.el.className="".concat(M,"toolbar-items")},Y})(y.A);const O=N;N.prototype.itemView=C;var R=e(6294),L=e(1166),B=function(){return B=Object.assign||function(z){for(var Y,M=1,q=arguments.length;M<q;M++){Y=arguments[M];for(var P in Y)Object.prototype.hasOwnProperty.call(Y,P)&&(z[P]=Y[P])}return z},B.apply(this,arguments)},G;const $={activeResizer:!1,init:function(){this.onSelect=(0,t.debounce)(this.onSelect,0),(0,t.bindAll)(this,"onHover","onOut","onClick","onCanvasScroll","onFrameScroll","onFrameResize","onFrameUpdated","onContainerChange")},enable:function(){this.frameOff=this.canvasOff=this.adjScroll=null,this.startSelectComponent(),G=!0},startSelectComponent:function(){this.toggleSelectComponent(1),this.em.getSelected()&&this.onSelect()},stopSelectComponent:function(){this.toggleSelectComponent()},toggleSelectComponent:function(z){var Y=this,M=this,q=M.em,P=M.canvas,H=P.getCanvasView().el,D=q.getConfig().listenToEl,X=q.getContainer().parentNode,se=z?"on":"off",Q={on:R.on,off:R.AU},xe=g.I.update;!D.length&&X&&D.push(X);var K=function(Z,ve,ae){Q[se](ae,"scroll",Y.onCanvasScroll,!0),Q[se](ve,"mouseover",Y.onHover),Q[se](ve,"mouseleave",Y.onOut),Q[se](ve,"click",Y.onClick),Q[se](Z,"scroll",Y.onFrameScroll,!0),Q[se](Z,"resize",Y.onFrameResize)};Q[se](window,"resize",this.onFrameUpdated),Q[se](D,"scroll",this.onContainerChange),q[se]("component:toggled ".concat(xe," undo redo"),this.onSelect,this),q[se]("change:componentHovered",this.onHovered,this),q[se]("".concat(g.I.resize," styleable:change ").concat(g.I.input),this.updateGlobalPos,this),q[se]("".concat(xe,":toolbar"),this._upToolbar,this),q[se]("frame:updated",this.onFrameUpdated,this),q[se]("canvas:updateTools",this.onFrameUpdated,this),q[se](q.Canvas.events.refresh,this.updateAttached,this),q.Canvas.getFrames().forEach(function(Z){var ve=Z.view,ae=ve?.getWindow();ae&&K(ae,ve?.getBody(),H)})},onHover:function(z){z.stopPropagation();var Y=this.em,M=z.target,q=(0,L.getComponentView)(M),P=q?.frameView,H=q?.model;if(!H)for(var D=M.parentNode;!H&&D&&!(0,R.ZQ)(D);)H=(0,L.getComponentModel)(D),D=D.parentNode;this.currentDoc=M.ownerDocument,Y.setHovered(H,{useValid:!0}),P&&Y.setCurrentFrame(P)},onFrameUpdated:function(){this.updateLocalPos(),this.updateGlobalPos()},onHovered:function(z,Y){var M=this,q,P={};Y?(q=Y.views)===null||q===void 0||q.forEach(function(H){var D=H.el,X=M.getElementPos(D);P={el:D,pos:X,component:Y,view:H},D.ownerDocument===M.currentDoc&&(M.elHovered=P),M.updateToolsLocal(P)}):(this.currentDoc=null,this.elHovered=0,this.updateToolsLocal(),this.canvas.getFrames().forEach(function(H){var D=H.view,X=D&&D.getToolsEl();X&&M.toggleToolsEl(0,0,{el:X})}))},onSelect:function(){var z=this.em,Y=z.getSelected(),M=z.getCurrentFrame(),q=Y&&Y.getView(M?.model),P=q?.el,H={};if(P&&(0,R.zN)(P)){var D=this.getElementPos(P);H={el:P,pos:D,component:Y,view:q}}this.elSelected=H,this.updateToolsGlobal(),this.updateLocalPos(H),this.initResize(Y)},updateGlobalPos:function(){var z=this.getElSelected();z.el&&(z.pos=this.getElementPos(z.el),this.updateToolsGlobal())},updateLocalPos:function(z){var Y=this.getElHovered();Y.el&&(Y.pos=this.getElementPos(Y.el),this.updateToolsLocal(z))},getElHovered:function(){return this.elHovered||{}},getElSelected:function(){return this.elSelected||{}},onOut:function(){this.em.setHovered()},toggleToolsEl:function(z,Y,M){M===void 0&&(M={});var q=M.el||this.canvas.getToolsEl(Y);return q&&(q.style.display=z?"":"none"),q||{}},showElementOffset:function(z,Y,M){M===void 0&&(M={}),G&&this.editor.runCommand("show-offset",{el:z,elPos:Y,view:M.view,force:1,top:0,left:0})},hideElementOffset:function(z){this.editor.stopCommand("show-offset",{view:z})},showFixedElementOffset:function(z,Y){this.editor.runCommand("show-offset",{el:z,elPos:Y,state:"Fixed"})},hideFixedElementOffset:function(){this.editor&&this.editor.stopCommand("show-offset",{state:"Fixed"})},hideHighlighter:function(z){this.canvas.getHighlighter(z).style.opacity=0},onClick:function(z){z.stopPropagation(),z.preventDefault();var Y=this.em;if(Y.get("_cmpDrag"))return Y.set("_cmpDrag");var M=z.target,q=(0,L.getComponentModel)(M);if(!q)for(var P=M.parentNode;!q&&P&&!(0,R.ZQ)(P);)q=(0,L.getComponentModel)(P),P=P.parentNode;if(q){if(Y.isEditing()&&(!q.get("textable")&&q.isChildOf("text")||Y.getEditing()!==q))return;this.select(q,z)}},select:function(z,Y){if(z){var M=this.em;M.setSelected(z,{event:Y,useValid:!0}),this.initResize(M.getSelected())}},updateBadge:function(z,Y,M){M===void 0&&(M={});var q=this.canvas,P=(0,L.getComponentModel)(z),H=this.getBadge(M),D=H.style;if(!P||!P.get("badgable")){D.display="none";return}if(!M.posOnly){var X=this.canvas.getConfig(),se=P.getIcon(),Q=X.pStylePrefix||"",xe="".concat(Q,"badge"),K=X.customBadgeLabel,Z="".concat(se?'<div class="'.concat(xe,'__icon">').concat(se,"</div>"):"",`
        <div class="`).concat(xe,'__name">').concat(P.getName(),"</div>");H.innerHTML=K?K(P):Z}var ve="px";D.display="block";var ae=q.getTargetToElementFixed(z,H,{pos:Y}),Se=ae.top,Pe=M.leftOff<0?-M.leftOff:0;D.top=Se+ve,D.left=Pe+ve},showHighlighter:function(z){this.canvas.getHighlighter(z).style.opacity=""},initResize:function(z){var Y=this,M,q=this,P=q.em,H=q.canvas,D=P.Editor,X=!(0,t.isElement)(z)&&(0,R.GW)(z)?z:P.getSelected(),se=(M=X?.get)===null||M===void 0?void 0:M.call(X,"resizable"),Q=a.F.Resize,xe=H.hasCustomSpot(Q);H.removeSpots({type:Q});var K={component:X,hasCustomResize:xe,resizable:se};X&&P.trigger(g.I.resizeInit,K);var Z=K.resizable;if(X&&Z){H.addSpot({type:Q,component:X});var ve=(0,t.isElement)(z)?z:X.getEl(),ae=(0,L.isObject)(Z)?Z:{};if(xe||!ve||this.activeResizer)return;this.resizer=D.runCommand("resize",B(B({},ae),{el:ve,component:X,force:!0,afterStart:function(){G=!1,Y.activeResizer=!0},afterEnd:function(){G=!0,Y.activeResizer=!1}}))}else{if(xe)return;D.stopCommand("resize"),this.resizer=null}},updateToolbar:function(z){var Y=this.canvas,M=this.config.em,q=z===M?M.getSelected():z,P=Y.getToolbarEl(),H=P.style,D=q.get("toolbar"),X=M.config.showToolbar,se=!Y.hasCustomSpot(a.F.Select);if(q&&X&&D&&D.length&&se){if(H.display="",!this.toolbar){P.innerHTML="",this.toolbar=new h(D);var Q=new O({collection:this.toolbar,em:M});P.appendChild(Q.render().el)}this.toolbar.reset(D),H.top="-100px",H.left="0"}else H.display="none"},updateToolbarPos:function(z){var Y="px",M=this.canvas.getToolbarEl().style;M.top="".concat(z.top).concat(Y),M.left="".concat(z.left).concat(Y),M.opacity=""},getCanvasPosition:function(){return this.canvas.getCanvasView().getPosition()},getBadge:function(z){return z===void 0&&(z={}),this.canvas.getBadgeEl(z.view)},onCanvasScroll:function(z){this.onFrameScroll(z),this.onContainerChange()},onFrameScroll:function(){this.updateTools(),this.canvas.refreshSpots()},onFrameResize:function(){this.canvas.refresh({all:!0})},updateTools:function(){this.updateLocalPos(),this.updateGlobalPos()},isCompSelected:function(z){return z&&z.get("status")==="selected"},updateToolsLocal:function(z){var Y=this.em.getConfig(),M=z||this.getElHovered(),q=M.el,P=M.pos,H=M.view,D=M.component;if(!q){this.lastHovered=0;return}var X=D.get("hoverable"),se=this.lastHovered!==q,Q=se?{}:{posOnly:1},xe=this.canvas.hasCustomSpot(a.F.Hover);se&&X&&(this.lastHovered=q,xe?this.hideHighlighter(H):this.showHighlighter(H),this.showElementOffset(q,P,{view:H})),this.isCompSelected(D)&&(this.hideHighlighter(H),!Y.showOffsetsSelected&&this.hideElementOffset(H));var K="px",Z=this.toggleToolsEl(1,H),ve=Z.style,ae=this.canvas.canvasRectOffset(q,P),Se=ae.top,Pe=ae.left;!xe&&this.updateBadge(q,P,B(B({},Q),{view:H,topOff:Se,leftOff:Pe})),ve.top=Se+K,ve.left=Pe+K,ve.width=P.width+K,ve.height=P.height+K,this._trgToolUp("local",{component:D,el:Z,top:Se,left:Pe,width:P.width,height:P.height})},_upToolbar:(0,t.debounce)(function(){this.updateToolsGlobal({force:1})},0),_trgToolUp:function(z,Y){Y===void 0&&(Y={}),this.em.trigger("canvas:tools:update",B({type:z},Y))},updateToolsGlobal:function(z){z===void 0&&(z={});var Y=this.getElSelected(),M=Y.el,q=Y.pos,P=Y.component;if(!M){this.toggleToolsEl(),this.lastSelected=0;return}var H=this.canvas,D=this.lastSelected!==M;(D||z.force)&&(this.lastSelected=M,this.updateToolbar(P));var X="px",se=this.toggleToolsEl(1),Q=se.style,xe=H.getTargetToElementFixed(M,H.getToolbarEl(),{pos:q}),K=xe.canvasOffsetTop,Z=xe.canvasOffsetLeft;Q.top=K+X,Q.left=Z+X,Q.width=q.width+X,Q.height=q.height+X,this.updateToolbarPos({top:xe.top,left:xe.left}),this._trgToolUp("global",{component:P,el:se,top:K,left:Z,width:q.width,height:q.height})},updateAttached:(0,t.debounce)(function(){this.updateGlobalPos()},0),onContainerChange:(0,t.debounce)(function(){this.em.refreshCanvas()},150),getElementPos:function(z){return this.canvas.getCanvasView().getElementPos(z,{noScroll:!0})},hideBadge:function(){this.getBadge().style.display="none"},cleanPrevious:function(z){z&&z.set({status:"",state:""})},getContentWindow:function(){return this.canvas.getWindow()},run:function(z){(0,L.hasWin)()&&(this.editor=z&&z.get("Editor"),this.enable())},stop:function(z,Y,M){if(M===void 0&&(M={}),!!(0,L.hasWin)()){var q=this,P=q.em,H=q.editor;this.onHovered(),this.stopSelectComponent(),!M.preserveSelected&&P.setSelected(),this.toggleToolsEl(),this.updateAttached.cancel(),H&&H.stopCommand("resize")}}}}),1406:((s,r,e)=>{e.r(r),e.d(r,{default:()=>i});var t=e(7774),a=e(1447),o=e(8433);const i={startSelectPosition:function(l,c,d){d===void 0&&(d={}),this.isPointed=!1;var p=this.em.Utils,h=l[0].ownerDocument.body;p&&(this.sorter=new p.ComponentSorter({em:this.em,treeClass:a.A,containerContext:{container:h,containerSel:"*",itemSel:"*",pfx:this.ppfx,document:c,placeholderElement:this.canvas.getPlacerEl()},positionOptions:{windowMargin:1,canvasRelative:!0},dragBehavior:{dragDirection:o.A.BothDirections,nested:!0}})),d.onStart&&(this.sorter.eventHandlers.legacyOnStartSort=d.onStart),l&&l.length>0&&this.sorter.startSort(l.map(function(g){return{element:g}}))},getOffsetDim:function(){var l=this.offset(this.canvas.getFrameEl()),c=this.offset(this.canvas.getElement()),d=l.top-c.top,p=l.left-c.left;return{top:d,left:p}},stopSelectPosition:function(){this.posTargetCollection=null,this.posIndex=this.posMethod=="after"&&this.cDim.length!==0?this.posIndex+1:this.posIndex,this.sorter&&this.sorter.cancelDrag(),this.cDim&&(this.posIsLastEl=this.cDim.length!==0&&this.posMethod=="after"&&this.posIndex==this.cDim.length,this.posTargetEl=this.cDim.length===0?(0,t.default)(this.outsideElem):!this.posIsLastEl&&this.cDim[this.posIndex]?(0,t.default)(this.cDim[this.posIndex][5]).parent():(0,t.default)(this.outsideElem),this.posTargetModel=this.posTargetEl.data("model"),this.posTargetCollection=this.posTargetEl.data("model-comp"))},enable:function(){this.startSelectPosition()},nearFloat:function(l,c,d){var p=l||0,h=c||"before",g=d.length,y=g!==0&&h=="after"&&p==g;return g!==0&&(!y&&!d[p][4]||d[p-1]&&!d[p-1][4]||y&&!d[p-1][4])?1:0},run:function(){this.enable()},stop:function(){this.stopSelectPosition(),this.$wrapper.css("cursor",""),this.$wrapper.unbind()}}}),9395:((s,r,e)=>{e.r(r),e.d(r,{default:()=>l});var t=e(5706),a=e(179),o=e(7774),i=function(){return i=Object.assign||function(c){for(var d,p=1,h=arguments.length;p<h;p++){d=arguments[p];for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(c[g]=d[g])}return c},i.apply(this,arguments)};const l={getOffsetMethod:function(c){var d=c||"";return"get"+d+"OffsetViewerEl"},run:function(c,d,p){var h=this.canvas,g=p||{},y=g.state||"",b=c.getConfig(),v=this.em.getZoomDecimal(),w=g.el;if(!b.showOffsets||!(w instanceof HTMLElement)||!b.showOffsetsSelected&&y=="Fixed"){c.stopCommand("".concat(this.id),p);return}if(!h.hasCustomSpot(a.F.Spacing)){var C=i({},g.elPos||h.getElementPos(w));(0,t.isUndefined)(g.top)||(C.top=g.top),(0,t.isUndefined)(g.left)||(C.left=g.left);var k=window.getComputedStyle(w),N=this.ppfx,O=y+"State",R=this.getOffsetMethod(y),L=h[R](p.view);L.style.opacity="";var B=this["marginT"+y],G=this["marginB"+y],$=this["marginL"+y],z=this["marginR"+y],Y=this["padT"+y],M=this["padB"+y],q=this["padL"+y],P=this["padR"+y];if(L.childNodes.length&&(this[O]="1",B=L.querySelector("[data-offset-m-t]"),G=L.querySelector("[data-offset-m-b]"),$=L.querySelector("[data-offset-m-l]"),z=L.querySelector("[data-offset-m-r]"),Y=L.querySelector("[data-offset-p-t]"),M=L.querySelector("[data-offset-p-b]"),q=L.querySelector("[data-offset-p-l]"),P=L.querySelector("[data-offset-p-r]")),!this[O]){var H=y.toLowerCase(),D=H+"margin-v",X=H+"padding-v",se=(0,o.default)('<div class="'.concat(N,'marginName">')).get(0),Q=(0,o.default)('<div class="'.concat(N,'paddingName">')).get(0),xe=N+D+"-el",K=N+X+"-el",Z="".concat(xe," ").concat(N+D),ve="".concat(K," ").concat(N+X);B=(0,o.default)('<div class="'.concat(Z,'-top"></div>')).get(0),G=(0,o.default)('<div class="'.concat(Z,'-bottom"></div>')).get(0),$=(0,o.default)('<div class="'.concat(Z,'-left"></div>')).get(0),z=(0,o.default)('<div class="'.concat(Z,'-right"></div>')).get(0),Y=(0,o.default)('<div class="'.concat(ve,'-top"></div>')).get(0),M=(0,o.default)('<div class="'.concat(ve,'-bottom"></div>')).get(0),q=(0,o.default)('<div class="'.concat(ve,'-left"></div>')).get(0),P=(0,o.default)('<div class="'.concat(ve,'-right"></div>')).get(0),this["marginT"+y]=B,this["marginB"+y]=G,this["marginL"+y]=$,this["marginR"+y]=z,this["padT"+y]=Y,this["padB"+y]=M,this["padL"+y]=q,this["padR"+y]=P,se.appendChild(B),se.appendChild(G),se.appendChild($),se.appendChild(z),Q.appendChild(Y),Q.appendChild(M),Q.appendChild(q),Q.appendChild(P),L.appendChild(se),L.appendChild(Q),this[O]="1"}var ae="px",Se=parseFloat(k.marginLeft.replace(ae,""))*v,Pe=parseFloat(k.marginRight.replace(ae,""))*v,$e=parseFloat(k.marginTop.replace(ae,""))*v,we=parseFloat(k.marginBottom.replace(ae,""))*v,Ae=B.style,ze=G.style,Ge=$.style,Ue=z.style,ht=Y.style,ee=M.style,ue=q.style,Oe=P.style,J=parseFloat(C.left),I=parseFloat(k.width)*v+ae;Ae.height=$e+ae,Ae.width=I,Ae.top=C.top-$e+ae,Ae.left=J+ae,ze.height=we+ae,ze.width=I,ze.top=C.top+C.height+ae,ze.left=J+ae;var V=C.height+$e+we+ae,re=C.top-$e+ae;Ge.height=V,Ge.width=Se+ae,Ge.top=re,Ge.left=J-Se+ae,Ue.height=V,Ue.width=Pe+ae,Ue.top=re,Ue.left=J+C.width+ae;var pe=parseFloat(k.paddingTop)*v;ht.height=pe+ae;var ge=parseFloat(k.paddingBottom)*v;ee.height=ge+ae;var Ce=C.height-ge-pe+ae,he=C.top+pe+ae;ue.height=Ce,ue.width=parseFloat(k.paddingLeft)*v+ae,ue.top=he;var ie=parseFloat(k.paddingRight)*v;Oe.height=Ce,Oe.width=ie+ae,Oe.top=he}},stop:function(c,d,p){p===void 0&&(p={});var h=p||{},g=h.state||"",y=this.getOffsetMethod(g),b=p.view,v=this.canvas,w=v[y](b);w.style.opacity=0}}}),7285:((s,r,e)=>{e.r(r),e.d(r,{default:()=>o});var t=e(5706),a=e(1166);const o={init:function(){(0,t.bindAll)(this,"_onFramesChange")},run:function(i){this.toggleVis(i,!0)},stop:function(i){this.toggleVis(i,!1)},toggleVis:function(i,l){if(l===void 0&&(l=!0),!i.Commands.isActive("preview")){var c=i.Canvas,d=l?"on":"off",p=c.getModel();p[d]("change:frames",this._onFramesChange),this.handleFrames(c.getFrames(),l)}},handleFrames:function(i,l){var c=this;i.forEach(function(d){var p;!((p=d.view)===null||p===void 0)&&p.loaded&&c._upFrame(d,l),d.__ol||(d.on("loaded",function(){return c._upFrame(d)}),d.__ol=!0)})},_onFramesChange:function(i,l){this.handleFrames(l)},_upFrame:function(i,l){var c,d=this,p=d.ppfx,h=d.em,g=d.id,y=(0,a.isDef)(l)?l:h.Commands.isActive(g),b=y?"add":"remove",v="".concat(p,"dashed");(c=i.view)===null||c===void 0||c.getBody().classList[b](v)}}}),9156:((s,r,e)=>{e.d(r,{Kx:()=>c,Ss:()=>p,e2:()=>l,lK:()=>g,pM:()=>d,x2:()=>h});var t=e(4193),a=e.n(t),o=(function(){var y=function(b,v){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,C){w.__proto__=C}||function(w,C){for(var k in C)Object.prototype.hasOwnProperty.call(C,k)&&(w[k]=C[k])},y(b,v)};return function(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");y(b,v);function w(){this.constructor=b}b.prototype=v===null?Object.create(v):(w.prototype=v.prototype,new w)}})(),i=function(){return i=Object.assign||function(y){for(var b,v=1,w=arguments.length;v<w;v++){b=arguments[v];for(var C in b)Object.prototype.hasOwnProperty.call(b,C)&&(y[C]=b[C])}return y},i.apply(this,arguments)},l="add remove reset change",c=(function(y){o(b,y);function b(){return y!==null&&y.apply(this,arguments)||this}return b})(a().Model),d=(function(y){o(b,y);function b(){return y!==null&&y.apply(this,arguments)||this}return b})(a().Collection),p=(function(y){o(b,y);function b(){return y!==null&&y.apply(this,arguments)||this}return b})(a().View),h;(function(y){y.Screen="screen",y.World="world"})(h||(h={}));var g={x:0,y:0};i(i({},g),{width:0,height:0})}),2225:((s,r,e)=>{e.d(r,{I:()=>a,t:()=>t});var t;(function(o){o.remove="component:remove",o.add="component:add",o.move="component:move"})(t||(t={}));var a;(function(o){o.add="component:add",o.remove="component:remove",o.removeBefore="component:remove:before",o.removed="component:removed",o.create="component:create",o.update="component:update",o.updateInside="component:update-inside",o.styleUpdate="component:styleUpdate",o.styleUpdateProperty="component:styleUpdate:",o.select="component:select",o.selectBefore="component:select:before",o.mount="component:mount",o.scriptMount="component:script:mount",o.scriptMountBefore="component:script:mount:before",o.scriptUnmount="component:script:unmount",o.render="component:render",o.input="component:input",o.resize="component:resize",o.resizeStart="component:resize:start",o.resizeMove="component:resize:move",o.resizeEnd="component:resize:end",o.resizeUpdate="component:resize:update",o.resizeInit="component:resize:init",o.symbolMainAdd="symbol:main:add",o.symbolMainUpdate="symbol:main:update",o.symbolMainUpdateDeep="symbol:main:update-deep",o.symbolMainRemove="symbol:main:remove",o.symbolMain="symbol:main",o.symbolInstanceAdd="symbol:instance:add",o.symbolInstanceRemove="symbol:instance:remove",o.symbolInstance="symbol:instance",o.symbol="symbol"})(a||(a={}))}),8242:((s,r,e)=>{e.d(r,{A:()=>l});var t=e(5706),a=e(9156),o=(function(){var c=function(d,p){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(h[y]=g[y])},c(d,p)};return function(d,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");c(d,p);function h(){this.constructor=d}d.prototype=p===null?Object.create(p):(h.prototype=p.prototype,new h)}})(),i=(function(c){o(d,c);function d(p,h,g){p===void 0&&(p={}),g===void 0&&(g=!1);var y=c.call(this,p)||this;return y.itemsView="",y.itemType="type",y.reuseView=!1,y.config=h||p.config||{},g&&y.listenTo(y.collection,"add",y.addTo),y.items=[],y}return d.prototype.addTo=function(p){this.add(p)},d.prototype.itemViewNotFound=function(p){var h=this,g=h.config,y=h.ns,b=g.em,v="".concat(y?"[".concat(y,"]: "):"","'").concat(p,"' type not found");b&&b.logWarning(v)},d.prototype.add=function(p,h){var g=this,y=g.config,b=g.reuseView,v=g.items,w=this.itemsView||{},C=["button","checkbox","color","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"],k=h||null,N=this.itemView,O=p.get(this.itemType),R;w[O]?N=w[O]:O&&!w[O]&&!(0,t.includes)(C,O)&&this.itemViewNotFound(O),p.view&&b?R=p.view:R=new N({model:p,config:y},y),v&&v.push(R);var L=R.render().el;k?k.appendChild(L):this.$el.append(L)},d.prototype.render=function(){var p=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(h){this.add(h,p)},this),this.$el.append(p),this.onRender(),this},d.prototype.onRender=function(){},d.prototype.onRemoveBefore=function(p,h){},d.prototype.onRemove=function(p,h){},d.prototype.remove=function(p){p===void 0&&(p={});var h=this.items;return this.onRemoveBefore(h,p),this.clearItems(),c.prototype.remove.call(this),this.onRemove(h,p),this},d.prototype.clearItems=function(){this.items},d})(a.Ss);const l=i;i.prototype.itemView=""}),9966:((s,r,e)=>{e.d(r,{A:()=>d});var t=e(5706),a=e(6294),o=function(){return o=Object.assign||function(p){for(var h,g=1,y=arguments.length;g<y;g++){h=arguments[g];for(var b in h)Object.prototype.hasOwnProperty.call(h,b)&&(p[b]=h[b])}return p},o.apply(this,arguments)},i=function(){return{x:0,y:0}},l=["x","y"],c=(function(){function p(h){return h===void 0&&(h={}),this.opts={snapGuides:{x:5,y:5},snapOffset:5,scale:1},(0,t.bindAll)(this,"drag","stop","keyHandle","handleScroll"),this.setOptions(h),this.delta=i(),this.lastScroll=i(),this.lastScrollDiff=i(),this.startPointer=i(),this.startPosition=i(),this.globScrollDiff=i(),this.currentPointer=i(),this.position=i(),this.guidesStatic=[],this.guidesTarget=[],this.docs=[],this}return p.prototype.setOptions=function(h){h===void 0&&(h={}),this.opts=o(o({},this.opts),h)},p.prototype.toggleDrag=function(h){var g=this.getDocumentEl(),y=this.getContainerEl(),b=this.getWindowEl(),v=h?"on":"off",w={on:a.on,off:a.AU};w[v](y,"mousemove dragover",this.drag),w[v](g,"mouseup dragend touchend",this.stop),w[v](g,"keydown",this.keyHandle),w[v](b,"scroll",this.handleScroll)},p.prototype.handleScroll=function(){var h=this,g=h.lastScroll,y=h.delta,b=this.getScrollInfo(),v={x:b.x-g.x,y:b.y-g.y};this.move(y.x+v.x,y.y+v.y),this.lastScrollDiff=v},p.prototype.start=function(h){var g=this.opts,y=g.onStart;this.toggleDrag(!0),this.startPointer=this.getPointerPos(h),this.guidesStatic=(0,t.result)(g,"guidesStatic")||[],this.guidesTarget=(0,t.result)(g,"guidesTarget")||[],(0,t.isFunction)(y)&&y(h,this),this.startPosition=this.getStartPosition(),this.lastScrollDiff=i(),this.globScrollDiff=i(),this.drag(h)},p.prototype.drag=function(h){var g=this,y=this,b=y.opts,v=y.lastScrollDiff,w=y.globScrollDiff,C=b.onDrag,k=this.startPointer,N=this.getPointerPos(h),O={x:w.x+v.x,y:w.y+v.y};this.globScrollDiff=O;var R={x:N.x-k.x+O.x,y:N.y-k.y+O.y};this.lastScrollDiff=i();var L=function(M){l.forEach(function(q){return M[q]=M[q]*(0,t.result)(b,"scale")}),g.delta=M,g.move(M.x,M.y),(0,t.isFunction)(C)&&C(h,g)},B=o({},R);if(this.currentPointer=N,this.lastScroll=this.getScrollInfo(),L(R),this.guidesTarget.length){var G=this.snapGuides(B),$=G.newDelta,z=G.trgX,Y=G.trgY;(z||Y)&&L($)}h.which===0&&this.stop(h)},p.prototype.snapGuides=function(h){var g=this,y=o({},h),b=this,v=b.trgX,w=b.trgY;return this.guidesTarget.forEach(function(C){C.x&&g.trgX||C.y&&g.trgY||(C.active=!1,g.guidesStatic.forEach(function(k){if(!(C.y&&k.x||C.x&&k.y)){var N=C.y&&k.y,O=N?"y":"x",R=C[O],L=k[O],B=h[O],G=N?w:v;if(g.isPointIn(R,L,{axis:O})&&(0,t.isUndefined)(G)){var $=B-(R-L);g.setGuideLock(C,$)}}}))}),v=this.trgX,w=this.trgY,l.forEach(function(C){var k=C.toUpperCase(),N=g["trg".concat(k)];N&&!g.isPointIn(h[C],N.lock,{axis:C})&&(g.setGuideLock(N,null),N=null),N&&!(0,t.isUndefined)(N.lock)&&(y[C]=N.lock)}),{newDelta:y,trgX:this.trgX,trgY:this.trgY}},p.prototype.isPointIn=function(h,g,y){var b,v=y===void 0?{}:y,w=v.offset,C=v.axis,k=this.opts,N=k.snapGuides,O=N===void 0?{}:N,R=k.snapOffset,L=R===void 0?0:R,B=C==="x"?O.x:C==="y"?O.y:void 0,G=B===0?0:(b=w??B)!==null&&b!==void 0?b:L;return G===0?!1:h>=g&&h<=g+G||h<=g&&h>=g-G},p.prototype.setGuideLock=function(h,g){var y=(0,t.isUndefined)(h.x)?"Y":"X",b="trg".concat(y);return g!==null?(h.active=!0,h.lock=g,this[b]=h):(delete h.active,delete h.lock,delete this[b]),h},p.prototype.stop=function(h,g){g===void 0&&(g={});var y=this.delta,b=!!g.cancel,v=b?0:y.x,w=b?0:y.y;this.toggleDrag(),this.move(v,w,!0);var C=this.opts.onEnd;(0,t.isFunction)(C)&&C(h,this,{cancelled:b})},p.prototype.keyHandle=function(h){(0,a.v$)(h)&&this.stop(h,{cancel:!0})},p.prototype.move=function(h,g,y){var b=this,v=b.el,w=b.opts,C=this.startPosition;if(C){var k=w.setPosition,N=C.x+h,O=C.y+g;this.position={x:N,y:O,end:y},(0,t.isFunction)(k)&&k(this.position),v&&(v.style.left="".concat(N,"px"),v.style.top="".concat(O,"px"))}},p.prototype.getContainerEl=function(){var h=this.opts.container;return h?[h]:this.getDocumentEl()},p.prototype.getWindowEl=function(){var h=this.getContainerEl();return h.map(function(g){var y=g.ownerDocument||g;return y.defaultView||y.parentWindow})},p.prototype.getDocumentEl=function(h){var g=this.opts.doc;if(h=h||this.el,!this.docs.length){var y=[document];h&&y.push(h.ownerDocument),g&&y.push(g),this.docs=y}return this.docs},p.prototype.getPointerPos=function(h){var g=this.opts.getPointerPosition,y=(0,a.G2)(h);return g?g(h):{x:y.clientX,y:y.clientY}},p.prototype.getStartPosition=function(){var h=this,g=h.el,y=h.opts,b=y.getPosition,v=i();return(0,t.isFunction)(b)?v=b():g&&(v={x:parseFloat(g.style.left),y:parseFloat(g.style.top)}),v},p.prototype.getScrollInfo=function(){var h=this.opts.doc,g=h&&h.body;return{y:g?g.scrollTop:0,x:g?g.scrollLeft:0}},p.prototype.detectAxisLock=function(h,g){var y=h,b=g,v=Math.abs(y),w=Math.abs(b);if(b>=v||b<=-v)return"x";if(y>w||y<-w)return"y"},p})();const d=c}),7774:((s,r,e)=>{e.r(r),e.d(r,{default:()=>zt});var t=typeof document<"u"?document:null,a=typeof window<"u"?window:null,o=Array.prototype,i=o.filter,l=o.indexOf,c=o.map,d=o.push,p=o.reverse,h=o.slice,g=o.splice,y=/^#[\w-]*$/,b=/^\.[\w-]*$/,v=/<.+>/,w=/^\w+$/;function C(be,Be){return Be===void 0&&(Be=t),b.test(be)?Be.getElementsByClassName(be.slice(1)):w.test(be)?Be.getElementsByTagName(be):Be.querySelectorAll(be)}function k(be,Be){if(Be===void 0&&(Be=t),!!be){if(be.__cash)return be;var et=be;if(q(be)){if(Be.__cash&&(Be=Be[0]),et=y.test(be)?Be.getElementById(be.slice(1)):v.test(be)?At(be):C(be,Be),!et)return}else if(M(be))return this.ready(be);(et.nodeType||et===a)&&(et=[et]),this.length=et.length;for(var wt=0,$t=this.length;wt<$t;wt++)this[wt]=et[wt]}}function N(be,Be){return new k(be,Be)}var O=N.fn=N.prototype=k.prototype={constructor:N,__cash:!0,length:0,splice:g};O.get=function(be){return be===void 0?h.call(this):this[be<0?be+this.length:be]},O.eq=function(be){return N(this.get(be))},O.first=function(){return this.eq(0)},O.last=function(){return this.eq(-1)},O.map=function(be){return N(c.call(this,function(Be,et){return be.call(Be,et,Be)}))},O.slice=function(){return N(h.apply(this,arguments))};var R=/(?:^\w|[A-Z]|\b\w)/g,L=/[\s-_]+/g;function B(be){return be.replace(R,function(Be,et){return Be[et?"toUpperCase":"toLowerCase"]()}).replace(L,"")}N.camelCase=B;function G(be,Be){for(var et=0,wt=be.length;et<wt&&Be.call(be[et],be[et],et,be)!==!1;et++);}N.each=G,O.each=function(be){return G(this,function(Be,et){return be.call(Be,et,Be)}),this},O.removeProp=function(be){return this.each(function(Be,et){delete et[be]})};function $(be){be===void 0&&(be=this);for(var Be=arguments,et=Be.length,wt=et<2?0:1;wt<et;wt++)for(var $t in Be[wt])be[$t]=Be[wt][$t];return be}N.extend=O.extend=$;var z=1;N.guid=z;function Y(be,Be){var et=be&&(be.matches||be.webkitMatchesSelector||be.mozMatchesSelector||be.msMatchesSelector||be.oMatchesSelector);return!!et&&et.call(be,Be)}N.matches=Y;function M(be){return typeof be=="function"}N.isFunction=M;function q(be){return typeof be=="string"}N.isString=q;function P(be){return!isNaN(parseFloat(be))&&isFinite(be)}N.isNumeric=P;var H=Array.isArray;N.isArray=H,O.prop=function(be,Be){if(be){if(q(be))return arguments.length<2?this[0]&&this[0][be]:this.each(function(wt,$t){$t[be]=Be});for(var et in be)this.prop(et,be[et]);return this}};function D(be){return q(be)?function(Be,et){return Y(et,be)}:be.__cash?function(Be,et){return be.is(et)}:function(Be,et,wt){return et===wt}}O.filter=function(be){if(!be)return N();var Be=M(be)?be:D(be);return N(i.call(this,function(et,wt){return Be.call(et,wt,et,be)}))};var X=/\S+/g;function se(be){return q(be)?be.match(X)||[]:[]}O.hasClass=function(be){var Be=se(be),et=!1;return Be.length&&this.each(function(wt,$t){return et=$t.classList.contains(Be[0]),!et}),et},O.removeAttr=function(be){var Be=se(be);return Be.length?this.each(function(et,wt){G(Be,function($t){wt.removeAttribute($t)})}):this},O.attr=function(be,Be){if(be){if(q(be)){if(arguments.length<2){if(!this[0])return;var et=this[0].getAttribute(be);return et===null?void 0:et}return Be===null?this.removeAttr(be):this.each(function($t,tr){tr.setAttribute(be,Be)})}for(var wt in be)this.attr(wt,be[wt]);return this}},O.toggleClass=function(be,Be){var et=se(be),wt=Be!==void 0;return et.length?this.each(function($t,tr){G(et,function(Lr){wt?Be?tr.classList.add(Lr):tr.classList.remove(Lr):tr.classList.toggle(Lr)})}):this},O.addClass=function(be){return this.toggleClass(be,!0)},O.removeClass=function(be){return arguments.length?this.toggleClass(be,!1):this.attr("class","")};function Q(be){return be.filter(function(Be,et,wt){return wt.indexOf(Be)===et})}N.unique=Q,O.add=function(be,Be){return N(Q(this.get().concat(N(be,Be).get())))};function xe(be,Be,et){if(be.nodeType===1){var wt=a.getComputedStyle(be,null);return Be?et?wt.getPropertyValue(Be):wt[Be]:wt}}function K(be,Be){return parseInt(xe(be,Be),10)||0}var Z=/^--/;function ve(be){return Z.test(be)}var ae={},Se=t&&t.createElement("div"),Pe=Se?Se.style:{},$e=["webkit","moz","ms","o"];function we(be,Be){if(Be===void 0&&(Be=ve(be)),Be)return be;if(!ae[be]){var et=B(be),wt=""+et.charAt(0).toUpperCase()+et.slice(1),$t=(et+" "+$e.join(wt+" ")+wt).split(" ");G($t,function(tr){if(tr in Pe)return ae[be]=tr,!1})}return ae[be]}N.prefixedProp=we;var Ae={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function ze(be,Be,et){return et===void 0&&(et=ve(be)),!et&&!Ae[be]&&P(Be)?Be+"px":Be}O.css=function(be,Be){if(q(be)){var et=ve(be);return be=we(be,et),arguments.length<2?this[0]&&xe(this[0],be,et):be?(Be=ze(be,Be,et),this.each(function($t,tr){tr.nodeType===1&&(et?tr.style.setProperty(be,Be):tr.style[be]=Be)})):this}for(var wt in be)this.css(wt,be[wt]);return this};var Ge="__cashData",Ue=/^data-(.*)/;N.hasData=function(be){return Ge in be};function ht(be){return be[Ge]=be[Ge]||{}}function ee(be,Be){var et=ht(be);if(Be){if(!(Be in et)){var wt=be.dataset?be.dataset[Be]||be.dataset[B(Be)]:N(be).attr("data-"+Be);if(wt!==void 0){try{wt=JSON.parse(wt)}catch{}et[Be]=wt}}return et[Be]}return et}function ue(be,Be){Be===void 0?delete be[Ge]:delete ht(be)[Be]}function Oe(be,Be,et){ht(be)[Be]=et}O.data=function(be,Be){var et=this;if(!be)return this[0]?(G(this[0].attributes,function($t){var tr=$t.name.match(Ue);tr&&et.data(tr[1])}),ee(this[0])):void 0;if(q(be))return Be===void 0?this[0]&&ee(this[0],be):this.each(function($t,tr){return Oe(tr,be,Be)});for(var wt in be)this.data(wt,be[wt]);return this},O.removeData=function(be){return this.each(function(Be,et){return ue(et,be)})};function J(be,Be){return K(be,"border"+(Be?"Left":"Top")+"Width")+K(be,"padding"+(Be?"Left":"Top"))+K(be,"padding"+(Be?"Right":"Bottom"))+K(be,"border"+(Be?"Right":"Bottom")+"Width")}G(["Width","Height"],function(be){O["inner"+be]=function(){if(this[0])return this[0]===a?a["inner"+be]:this[0]["client"+be]}}),G(["width","height"],function(be,Be){O[be]=function(et){return this[0]?arguments.length?(et=parseInt(et,10),this.each(function(wt,$t){if($t.nodeType===1){var tr=xe($t,"boxSizing");$t.style[be]=ze(be,et+(tr==="border-box"?J($t,!Be):0))}})):this[0]===a?this[0][B("outer-"+be)]:this[0].getBoundingClientRect()[be]-J(this[0],!Be):et===void 0?void 0:this}}),G(["Width","Height"],function(be,Be){O["outer"+be]=function(et){if(this[0])return this[0]===a?a["outer"+be]:this[0]["offset"+be]+(et?K(this[0],"margin"+(Be?"Top":"Left"))+K(this[0],"margin"+(Be?"Bottom":"Right")):0)}});function I(be,Be){for(var et=0,wt=Be.length;et<wt;et++)if(be.indexOf(Be[et])<0)return!1;return!0}function V(be,Be,et){G(be[et],function(wt){wt[0];var $t=wt[1];Be.removeEventListener(et,$t)}),delete be[et]}var re="__cashEvents",pe=".";function ge(be){return be[re]=be[re]||{}}function Ce(be,Be,et,wt){wt.guid=wt.guid||z++;var $t=ge(be);$t[Be]=$t[Be]||[],$t[Be].push([et,wt]),be.addEventListener(Be,wt)}function he(be){var Be=be.split(pe);return[Be[0],Be.slice(1).sort()]}function ie(be,Be,et,wt){var $t=ge(be);if(Be){var tr=$t[Be];if(!tr)return;wt&&(wt.guid=wt.guid||z++),$t[Be]=tr.filter(function(Lr){var tn=Lr[0],bn=Lr[1];if(wt&&bn.guid!==wt.guid||!I(tn,et))return!0;be.removeEventListener(Be,bn)})}else if(!et||!et.length)for(Be in $t)V($t,be,Be);else for(Be in $t)ie(be,Be,et,wt)}O.off=function(be,Be){var et=this;return be===void 0?this.each(function(wt,$t){return ie($t)}):G(se(be),function(wt){var $t=he(wt),tr=$t[0],Lr=$t[1];et.each(function(tn,bn){return ie(bn,tr,Lr,Be)})}),this},O.on=function(be,Be,et,wt){var $t=this;if(!q(be)){for(var tr in be)this.on(tr,Be,be[tr]);return this}return M(Be)&&(et=Be,Be=!1),G(se(be),function(Lr){var tn=he(Lr),bn=tn[0],Fr=tn[1];$t.each(function(rr,wr){var an=function En(rn){if(!(rn.namespace&&!I(Fr,rn.namespace.split(pe)))){var kr=wr;if(Be){for(var jr=rn.target;!Y(jr,Be);)if(jr===wr||(jr=jr.parentNode,!jr))return;kr=jr}rn.namespace=rn.namespace||"";var mt=et.call(kr,rn,rn.data);wt&&ie(wr,bn,Fr,En),mt===!1&&(rn.preventDefault(),rn.stopPropagation())}};an.guid=et.guid=et.guid||z++,Ce(wr,bn,Fr,an)})}),this},O.one=function(be,Be,et){return this.on(be,Be,et,!0)},O.ready=function(be){var Be=function(){return be(N)};return t.readyState!=="loading"?setTimeout(Be):t.addEventListener("DOMContentLoaded",Be),this},O.trigger=function(be,Be){var et=be;if(q(be)){var wt=he(be),$t=wt[0],tr=wt[1];et=t.createEvent("HTMLEvents"),et.initEvent($t,!0,!0),et.namespace=tr.join(pe)}return et.data=Be,this.each(function(Lr,tn){tn.dispatchEvent(et)})};function Fe(be){var Be=[];return G(be.options,function(et){et.selected&&!et.disabled&&!et.parentNode.disabled&&Be.push(et.value)}),Be}function We(be){return be.selectedIndex<0?null:be.options[be.selectedIndex].value}var Qe=/select-one/i,de=/select-multiple/i;function Ee(be){var Be=be.type;return Qe.test(Be)?We(be):de.test(Be)?Fe(be):be.value}var le=/%20/g;function Ye(be,Be){return"&"+encodeURIComponent(be)+"="+encodeURIComponent(Be).replace(le,"+")}var De=/file|reset|submit|button|image/i,ct=/radio|checkbox/i;O.serialize=function(){var be="";return this.each(function(Be,et){G(et.elements||[et],function(wt){if(!(wt.disabled||!wt.name||wt.tagName==="FIELDSET")&&!De.test(wt.type)&&!(ct.test(wt.type)&&!wt.checked)){var $t=Ee(wt);if($t!==void 0){var tr=H($t)?$t:[$t];G(tr,function(Lr){be+=Ye(wt.name,Lr)})}}})}),be.substr(1)},O.val=function(be){return be===void 0?this[0]&&Ee(this[0]):this.each(function(Be,et){var wt=de.test(et.type),$t=be===null?wt?[]:"":be;wt&&H($t)?G(et.options,function(tr){tr.selected=$t.indexOf(tr.value)>=0}):et.value=$t})},O.clone=function(){return this.map(function(be,Be){return Be.cloneNode(!0)})},O.detach=function(){return this.each(function(be,Be){Be.parentNode&&Be.parentNode.removeChild(Be)})};var ot=/^\s*<(\w+)[^>]*>/,dt=/^\s*<(\w+)\s*\/?>(?:<\/\1>)?\s*$/,Ke;function kt(){if(!Ke){var be=t.createElement("table"),Be=t.createElement("tr");Ke={"*":t.createElement("div"),tr:t.createElement("tbody"),td:Be,th:Be,thead:be,tbody:be,tfoot:be}}}function At(be){if(kt(),!q(be))return[];if(dt.test(be))return[t.createElement(RegExp.$1)];var Be=ot.test(be)&&RegExp.$1,et=Ke[Be]||Ke["*"];return et.innerHTML=be,N(et.childNodes).detach().get()}N.parseHTML=At,O.empty=function(){var be=this[0];if(be)for(;be.firstChild;)be.removeChild(be.firstChild);return this};function xt(be,Be,et){et?be.insertBefore(Be,be.childNodes[0]):be.appendChild(Be)}function Xt(be,Be,et){if(Be!==void 0){var wt=q(Be);!wt&&Be.length?G(Be,function($t){return Xt(be,$t,et)}):G(be,wt?function($t){$t.insertAdjacentHTML(et?"afterbegin":"beforeend",Be)}:function($t,tr){return xt($t,tr?Be.cloneNode(!0):Be,et)})}}O.append=function(){var be=this;return G(arguments,function(Be){Xt(be,Be)}),this},O.appendTo=function(be){return Xt(N(be),this),this},O.html=function(be){if(be===void 0)return this[0]&&this[0].innerHTML;var Be=be.nodeType?be[0].outerHTML:be;return this.each(function(et,wt){wt.innerHTML=Be})},O.insertAfter=function(be){var Be=this;return N(be).each(function(et,wt){var $t=wt.parentNode;Be.each(function(tr,Lr){$t.insertBefore(et?Lr.cloneNode(!0):Lr,wt.nextSibling)})}),this},O.after=function(){var be=this;return G(p.apply(arguments),function(Be){p.apply(N(Be).slice()).insertAfter(be)}),this},O.insertBefore=function(be){var Be=this;return N(be).each(function(et,wt){var $t=wt.parentNode;Be.each(function(tr,Lr){$t.insertBefore(et?Lr.cloneNode(!0):Lr,wt)})}),this},O.before=function(){var be=this;return G(arguments,function(Be){N(Be).insertBefore(be)}),this},O.prepend=function(){var be=this;return G(arguments,function(Be){Xt(be,Be,!0)}),this},O.prependTo=function(be){return Xt(N(be),p.apply(this.slice()),!0),this},O.remove=function(){return this.detach().off()},O.replaceWith=function(be){var Be=this;return this.each(function(et,wt){var $t=wt.parentNode;if($t){var tr=et?N(be).clone():N(be);if(!tr[0])return Be.remove(),!1;$t.replaceChild(tr[0],wt),N(tr[0]).after(tr.slice(1))}})},O.replaceAll=function(be){return N(be).replaceWith(this),this},O.text=function(be){return be===void 0?this[0]?this[0].textContent:"":this.each(function(Be,et){et.textContent=be})};var br=t&&t.documentElement;O.offset=function(){var be=this[0];if(be){var Be=be.getBoundingClientRect();return{top:Be.top+a.pageYOffset-br.clientTop,left:Be.left+a.pageXOffset-br.clientLeft}}},O.offsetParent=function(){return N(this[0]&&this[0].offsetParent)},O.position=function(){var be=this[0];if(be)return{left:be.offsetLeft,top:be.offsetTop}},O.children=function(be){var Be=[];return this.each(function(et,wt){d.apply(Be,wt.children)}),Be=N(Q(Be)),be?Be.filter(function(et,wt){return Y(wt,be)}):Be},O.contents=function(){var be=[];return this.each(function(Be,et){d.apply(be,et.tagName==="IFRAME"?[et.contentDocument]:et.childNodes)}),N(be.length&&Q(be))},O.find=function(be){for(var Be=[],et=0,wt=this.length;et<wt;et++){var $t=C(be,this[et]);$t.length&&d.apply(Be,$t)}return N(Be.length&&Q(Be))},O.has=function(be){var Be=q(be)?function(et,wt){return!!C(be,wt).length}:function(et,wt){return wt.contains(be)};return this.filter(Be)},O.is=function(be){if(!be||!this[0])return!1;var Be=D(be),et=!1;return this.each(function(wt,$t){return et=Be(wt,$t,be),!et}),et},O.next=function(){return N(this[0]&&this[0].nextElementSibling)},O.not=function(be){if(!be||!this[0])return this;var Be=D(be);return this.filter(function(et,wt){return!Be(et,wt,be)})},O.parent=function(){var be=[];return this.each(function(Be,et){et&&et.parentNode&&be.push(et.parentNode)}),N(Q(be))},O.index=function(be){var Be=be?N(be)[0]:this[0],et=be?this:N(Be).parent().children();return l.call(et,Be)},O.closest=function(be){return!be||!this[0]?N():this.is(be)?this.filter(be):this.parent().closest(be)},O.parents=function(be){var Be=[],et;return this.each(function(wt,$t){for(et=$t;et&&et.parentNode&&et!==t.body.parentNode;)et=et.parentNode,(!be||be&&Y(et,be))&&Be.push(et)}),N(Q(Be))},O.prev=function(){return N(this[0]&&this[0].previousElementSibling)},O.siblings=function(){var be=this[0];return this.parent().children().filter(function(Be,et){return et!==be})};const zt=N}),6294:((s,r,e)=>{e.d(r,{AU:()=>xe,BC:()=>w,C8:()=>G,Ch:()=>Y,Ci:()=>P,D8:()=>l,G2:()=>M,GW:()=>B,GZ:()=>k,I6:()=>h,LJ:()=>X,Sc:()=>v,X6:()=>g,Xy:()=>$,YZ:()=>d,ZQ:()=>c,_I:()=>K,a_:()=>C,af:()=>O,bG:()=>b,cx:()=>p,ir:()=>R,kk:()=>se,on:()=>Q,rp:()=>D,v$:()=>q,yL:()=>N,zN:()=>y});var t=e(5706),a=function(Z,ve,ae){if(ae||arguments.length===2)for(var Se=0,Pe=ve.length,$e;Se<Pe;Se++)($e||!(Se in ve))&&($e||($e=Array.prototype.slice.call(ve,0,Se)),$e[Se]=ve[Se]);return Z.concat($e||Array.prototype.slice.call(ve))},o="tag",i="attributes",l="transitionend oTransitionEnd transitionend webkitTransitionEnd",c=function(Z){return Z?.nodeType===Node.DOCUMENT_NODE},d=function(Z){var ve=Z&&Z.parentNode;ve&&ve.removeChild(Z)};function p(){for(var Z=[],ve=0;ve<arguments.length;ve++)Z[ve]=arguments[ve];var ae=Array.isArray(Z[0])?Z[0]:a([],Z,!0);return ae.filter(Boolean).join(" ")}var h=function(Z,ve){return Z.querySelectorAll(ve)},g=function(Z,ve){return ve===void 0&&(ve={}),Z&&Z.setAttribute&&(0,t.each)(ve,function(ae,Se){return Z.setAttribute(Se,ae)})},y=function(Z){var ve;return Z&&!!(Z.offsetWidth||Z.offsetHeight||!((ve=Z.getClientRects)===null||ve===void 0)&&ve.call(Z).length)},b=function(Z,ve){var ae;(ae=Z.parentNode)===null||ae===void 0||ae.replaceChild(ve,Z)},v=function(Z,ve,ae){var Se=Z.childNodes,Pe=Se.length,$e=(0,t.isUndefined)(ae)?Pe:ae;(0,t.isString)(ve)&&(Z.insertAdjacentHTML("beforeEnd",ve),ve=Z.lastChild,Z.removeChild(ve)),$e>=Pe?Z.appendChild(ve):Z.insertBefore(ve,Se[$e])},w=function(Z,ve){return v(Z,ve)},C=function(Z,ve,ae){ve===void 0&&(ve={});var Se=document.createElement(Z);return ve&&(0,t.each)(ve,function(Pe,$e){return Se.setAttribute($e,Pe)}),ae&&((0,t.isString)(ae)?Se.innerHTML=ae:Se.appendChild(ae)),Se},k=function(Z){return document.createTextNode(Z)},N=function(Z,ve){var ae,Se=Z.type;try{ae=new window[ve](Se,Z)}catch{ae=document.createEvent(ve),ae.initEvent(Se,!0,!0)}return ae._parentEvent=Z,Se.indexOf("key")===0&&(ae.keyCodeVal=Z.keyCode,["keyCode","which"].forEach(function(Pe){Object.defineProperty(ae,Pe,{get:function(){return this.keyCodeVal}})})),ae},O=function(Z,ve){ve===void 0&&(ve=[]);var ae=Array.isArray(ve)?ve:[ve];ae.forEach(function(Se){var Pe=Se[o]||"div",$e=Se[i]||{},we=document.createElement(Pe);(0,t.each)($e,function(Ae,ze){we.setAttribute(ze,Ae)}),Z.appendChild(we)})},R=function(Z){return Z?.nodeType===Node.TEXT_NODE},L=function(Z){return Z?.nodeType===Node.COMMENT_NODE},B=function(Z){return Z&&!R(Z)&&!L(Z)},G=function(Z){var ve={top:0,left:0,width:0,height:0};if(!Z)return ve;var ae;if(R(Z)){var Se=document.createRange();Se.selectNode(Z),ae=Se.getBoundingClientRect(),Se.detach()}return ae||(Z.getBoundingClientRect?Z.getBoundingClientRect():ve)},$=function(Z){var ve=Z?.ownerDocument||document,ae=ve.documentElement,Se=ve.defaultView||window;return{x:(Se.pageXOffset||ae.scrollLeft||0)-(ae.clientLeft||0),y:(Se.pageYOffset||ae.scrollTop||0)-(ae.clientTop||0)}},z=function(Z){return Z.which||Z.keyCode},Y=function(Z){return String.fromCharCode(z(Z))},M=function(Z){return Z.touches&&Z.touches[0]?Z.touches[0]:Z},q=function(Z){return z(Z)===27},P=function(Z){return z(Z)===13},H=function(Z){return Z.ctrlKey},D=function(Z){return H(Z)||Z.metaKey},X=function(Z){if(!Z)return"";var ve=Z.name,ae=Z.publicId,Se=Z.systemId,Pe=ae?' PUBLIC "'.concat(ae,'"'):"",$e=!ae&&Se?' SYSTEM "'.concat(Se,'"'):"";return"<!DOCTYPE ".concat(ve).concat(Pe).concat($e,">")},se=function(Z){Z===void 0&&(Z={});var ve=[];return(0,t.each)(Z,function(ae,Se){return ve.push("".concat(Se,'="').concat(ae,'"'))}),ve.join(" ")},Q=function(Z,ve,ae,Se){var Pe=ve.split(/\s+/),$e=(0,t.isArray)(Z)?Z:[Z];Pe.forEach(function(we){$e.forEach(function(Ae){return Ae?.addEventListener(we,ae,Se)})})},xe=function(Z,ve,ae,Se){var Pe=ve.split(/\s+/),$e=(0,t.isArray)(Z)?Z:[Z];Pe.forEach(function(we){$e.forEach(function(Ae){return Ae?.removeEventListener(we,ae,Se)})})},K=function(Z){var ve=Z.replace(/-([a-zA-Z0-9])/g,function(ae,Se){return Se.toUpperCase()});return ve}}),1166:((s,r,e)=>{e.r(r),e.d(r,{appendStyles:()=>$,buildBase64UrlFromSvg:()=>ee,camelCase:()=>q,capitalize:()=>Pe,createId:()=>ht,deepMerge:()=>Z,escape:()=>se,escapeAltQuoteAttrValue:()=>K,escapeAttrValue:()=>xe,escapeNodeContent:()=>Q,find:()=>X,get:()=>g,getComponentModel:()=>Ge,getComponentView:()=>ze,getElement:()=>D,getGlobal:()=>O,getModel:()=>ve,getUiClass:()=>G,getUnitFromValue:()=>Y,getViewEl:()=>we,hasDnd:()=>H,hasWin:()=>N,isBultInMethod:()=>v,isComponent:()=>Ae,isDef:()=>k,isEmptyObj:()=>Se,isObject:()=>ae,isRule:()=>$e,matches:()=>B,normalizeFloat:()=>P,normalizeKey:()=>w,serialize:()=>b,set:()=>y,setViewEl:()=>Ue,shallowDiff:()=>z,stringToPath:()=>p,toLowerCase:()=>R,upFirst:()=>M,wait:()=>C});var t=e(5706),a=e(6294),o=function(){return o=Object.assign||function(ue){for(var Oe,J=1,I=arguments.length;J<I;J++){Oe=arguments[J];for(var V in Oe)Object.prototype.hasOwnProperty.call(Oe,V)&&(ue[V]=Oe[V])}return ue},o.apply(this,arguments)},i=function(ue,Oe,J){if(J||arguments.length===2)for(var I=0,V=Oe.length,re;I<V;I++)(re||!(I in Oe))&&(re||(re=Array.prototype.slice.call(Oe,0,I)),re[I]=Oe[I]);return ue.concat(re||Array.prototype.slice.call(Oe))},l={},c=/\\(\\)?/g,d=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,p=function(ue){var Oe=[];return ue.charCodeAt(0)===46&&Oe.push(""),ue.replace(d,function(J,I,V,re){return Oe.push(V?re.replace(c,"$1"):I||J),""}),Oe};function h(ue,Oe){return(0,t.isArray)(ue)?ue:Oe.hasOwnProperty(ue)?[ue]:p(ue)}var g=function(ue,Oe,J){for(var I,V=h(Oe,ue),re=V.length,pe=0;ue!=null&&pe<re;)ue=ue["".concat(V[pe++])];return(I=pe&&pe==re?ue:void 0)!==null&&I!==void 0?I:J},y=function(ue,Oe,J){if(!ae(ue))return!1;var I=h(Oe,ue),V=I.length;if(V===0)return!1;if(V===1)return ue[I[0]]=J,!0;var re=I.slice(0,-1),pe=I[V-1],ge=g(ue,re);if(ge){if(Array.isArray(ge)){var Ce=+pe;if(!isNaN(Ce))return ge[Ce]=J,!0}else if(ae(ge))return ge[pe]=J,!0}return!1},b=function(ue){return JSON.parse(JSON.stringify(ue))},v=function(ue){return(0,t.isFunction)(l[ue])},w=function(ue){return v(ue)?"_".concat(ue):ue},C=function(ue){return ue===void 0&&(ue=0),new Promise(function(Oe){return setTimeout(Oe,ue)})},k=function(ue){return typeof ue<"u"},N=function(){return typeof window<"u"},O=function(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:e.g},R=function(ue){return(ue||"").toLowerCase()},L=N()?window.Element.prototype:{},B=L.matches||L.webkitMatchesSelector||L.mozMatchesSelector||L.msMatchesSelector,G=function(ue,Oe){var J=ue.getConfig(),I=J.stylePrefix,V=J.customUI;return[V&&"".concat(I,"cui"),Oe].filter(function(re){return re}).join(" ")},$=function(ue,Oe){Oe===void 0&&(Oe={});var J=(0,t.isArray)(ue)?i([],ue,!0):[ue];if(J.length){var I=J.shift();if(I&&(!Oe.unique||!document.querySelector('link[href="'.concat(I,'"]')))){var V=document.head,re=document.createElement("link");re.href=I,re.rel="stylesheet",Oe.prepand?V.insertBefore(re,V.firstChild):V.appendChild(re)}$(J)}},z=function(ue,Oe){var J={},I=(0,t.keys)(Oe);for(var V in ue)if(ue.hasOwnProperty(V)){var re=ue[V],pe=Oe[V];I.indexOf(V)>=0?re!==pe&&(J[V]=pe):J[V]=null}for(var V in Oe)Oe.hasOwnProperty(V)&&(0,t.isUndefined)(ue[V])&&(J[V]=Oe[V]);return J},Y=function(ue){return ue.replace(parseFloat(ue),"")},M=function(ue){return ue[0].toUpperCase()+ue.toLowerCase().slice(1)},q=function(ue){return ue.replace(/-./g,function(Oe){return Oe[1].toUpperCase()})},P=function(ue,Oe,J){Oe===void 0&&(Oe=1),J===void 0&&(J=0);var I=0;if(isNaN(ue))return J;if(ue=parseFloat(ue),Math.floor(ue)!==ue){var V=Oe.toString().split(".")[1];I=V?V.length:0}return I?parseFloat(ue.toFixed(I)):ue},H=function(ue){return"draggable"in document.createElement("i")&&(ue?ue.config.nativeDnD:!0)},D=function(ue){if((0,t.isElement)(ue)||(0,a.ir)(ue))return ue;if(ue&&ue.getEl)return ue.getEl()},X=function(ue,Oe){var J=null;return ue.some(function(I,V){return Oe(I,V,ue)?(J=I,1):0}),J},se=function(ue){return ue===void 0&&(ue=""),"".concat(ue).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/`/g,"&#96;")},Q=function(ue){return ue===void 0&&(ue=""),"".concat(ue).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},xe=function(ue){return ue===void 0&&(ue=""),"".concat(ue).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},K=function(ue){return ue===void 0&&(ue=""),"".concat(ue).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;")},Z=function(){for(var ue=[],Oe=0;Oe<arguments.length;Oe++)ue[Oe]=arguments[Oe];for(var J=o({},ue[0]),I=1;I<ue.length;I++){var V=o({},ue[I]);for(var re in V){var pe=J[re],ge=V[re];ae(pe)&&ae(ge)?J[re]=Z(pe,ge):J[re]=ge}}return J},ve=function(ue,Oe){var J;return!Oe&&ue&&ue.__cashData?J=ue.__cashData.model:Oe&&(0,t.isElement)(ue)&&(J=Oe(ue).data("model")),J},ae=function(ue){return ue&&!Array.isArray(ue)&&typeof ue=="object"},Se=function(ue){return Object.keys(ue).length<=0},Pe=function(ue){return ue===void 0&&(ue=""),ue&&ue.charAt(0).toUpperCase()+ue.substring(1)},$e=function(ue){return ue&&ue.toCSS},we=function(ue){return ue?.__gjsv},Ae=function(ue){return!!ue?.toHTML},ze=function(ue){return we(ue)},Ge=function(ue){var Oe;return(Oe=ze(ue))===null||Oe===void 0?void 0:Oe.model},Ue=function(ue,Oe){ue.__gjsv=Oe},ht=function(ue){ue===void 0&&(ue=16);for(var Oe="",J="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",I=J.length,V=0;V<ue;V++)Oe+=J.charAt(Math.floor(Math.random()*I));return Oe},ee=function(ue){if(ue&&ue.substr(0,4)==="<svg"){var Oe="";return N()?Oe=window.btoa(ue):typeof Buffer<"u"&&(Oe=Buffer.from(ue,"utf8").toString("base64")),Oe?"data:image/svg+xml;base64,".concat(Oe):ue}return ue}}),6756:((s,r,e)=>{e.d(r,{h:()=>o});var t=e(3178),a=(function(){var l=function(c,d){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(p[g]=h[g])},l(c,d)};return function(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");l(c,d);function p(){this.constructor=c}c.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)}})(),o=(function(l){a(c,l);function c(){var d=l!==null&&l.apply(this,arguments)||this;return d.displayCache=new Map,d}return c.prototype.getChildren=function(){return this.getDisplayedChildren()},c.prototype.getDisplayedChildren=function(){var d=this,p=this.model.components(),h=p.filter(function(g){return d.isChildDisplayed(g)});return h.map(function(g){return new d.constructor(g)})},c.prototype.isChildDisplayed=function(d){if(this.displayCache.has(d))return this.displayCache.get(d);var p=d.getEl(),h=i(p);return this.displayCache.set(d,h),h},c.prototype.getParent=function(){var d=this.model.parent();return d?new this.constructor(d):null},c.prototype.addChildAt=function(d,p,h){var g,y,b,v,w,C,k,N;h===void 0&&(h={action:"add-component"});var O=((y=(g=this.model)===null||g===void 0?void 0:g.isInstanceOf)===null||y===void 0?void 0:y.call(g,"text"))&&((v=(b=d?.model)===null||b===void 0?void 0:b.get)===null||v===void 0?void 0:v.call(b,"textable"));if(O)return(N=(k=(C=(w=this.model)===null||w===void 0?void 0:w.getView)===null||C===void 0?void 0:C.call(w))===null||k===void 0?void 0:k.insertComponent)===null||N===void 0?void 0:N.call(k,d?.model,{action:h.action});var R=this.model.components().add(d.model,{at:this.getRealIndex(p),action:h.action});return new this.constructor(R)},c.prototype.removeChildAt=function(d,p){p===void 0&&(p={temporary:!1});var h=this.model.components().at(this.getRealIndex(d));h&&this.model.components().remove(h,p)},c.prototype.indexOfChild=function(d){return this.getDisplayIndex(d)},c.prototype.getDisplayIndex=function(d){var p=this.getDisplayedChildren();return p?p.findIndex(function(h){return h.model===d.model}):-1},c.prototype.getRealIndex=function(d){if(d===-1)return-1;for(var p=0,h=this.model.components(),g=0;g<h.length;g++){var y=h.at(g),b=this.isChildDisplayed(y);if(b&&p++,p===d+1)return g}return-1},c.prototype.canMove=function(d,p){return this.model.em.Components.canMove(this.model,d.model,this.getRealIndex(p)).result},c.prototype.equals=function(d){return!!d?._model&&this._model.getId()===d._model.getId()},c.prototype.restNodeState=function(){this.clearState();var d=this.model;this.setContentEditable(!1),d.em.getEditing()===d&&this.disableEditing()},c.prototype.setContentEditable=function(d){this.element&&this.isTextNode()&&(this.element.contentEditable=d?"true":"false")},c.prototype.disableEditing=function(){var d,p;(p=(d=this.view)===null||d===void 0?void 0:d.disableEditing)===null||p===void 0||p.call(d)},c.prototype.clearState=function(){var d,p;(p=(d=this.model).set)===null||p===void 0||p.call(d,"status","")},c.prototype.setSelectedParentState=function(){var d,p;(p=(d=this.model).set)===null||p===void 0||p.call(d,"status","selected-parent")},c.prototype.isTextNode=function(){var d,p;return(p=(d=this.model).isInstanceOf)===null||p===void 0?void 0:p.call(d,"text")},c.prototype.isTextable=function(){var d,p;return(p=(d=this.model).get)===null||p===void 0?void 0:p.call(d,"textable")},c})(t.$);function i(l){return l?typeof l=="object"&&l.nodeType===Node.ELEMENT_NODE&&window.getComputedStyle(l).display!=="none"&&l.offsetWidth>0&&l.offsetHeight>0:!1}}),1447:((s,r,e)=>{e.d(r,{A:()=>i});var t=e(6756),a=(function(){var l=function(c,d){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(p[g]=h[g])},l(c,d)};return function(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");l(c,d);function p(){this.constructor=c}c.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)}})(),o=(function(l){a(c,l);function c(){var d=l!==null&&l.apply(this,arguments)||this;return d._dropAreaConfig={ratio:.8,minUndroppableDimension:1,maxUndroppableDimension:15},d}return Object.defineProperty(c.prototype,"view",{get:function(){var d,p;return(p=(d=this.model).getView)===null||p===void 0?void 0:p.call(d)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"element",{get:function(){var d,p;return(p=(d=this.model).getEl)===null||p===void 0?void 0:p.call(d)},enumerable:!1,configurable:!0}),c})(t.h);const i=o}),3178:((s,r,e)=>{e.d(r,{$:()=>t});var t=(function(){function a(o,i){i===void 0&&(i={}),this._dropAreaConfig={ratio:1,minUndroppableDimension:0,maxUndroppableDimension:0},this._model=o,this._dragSource=i}return Object.defineProperty(a.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"dragSource",{get:function(){return this._dragSource},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"dropArea",{get:function(){var o,i;return this.getParent()?(i=this.nodeDimensions)===null||i===void 0?void 0:i.getDropArea(this._dropAreaConfig):(o=this.nodeDimensions)===null||o===void 0?void 0:o.clone()},enumerable:!1,configurable:!0}),a.prototype.isWithinDropBounds=function(o,i){return!!this.dropArea&&this.dropArea.isWithinBounds(o,i)},a.prototype.equals=function(o){return!!o?._model&&this._model===o._model},a.prototype.adjustDimensions=function(o){var i,l;o.topDifference===0&&o.leftDifference===0||((i=this.nodeDimensions)===null||i===void 0||i.adjustDimensions(o),(l=this.childrenDimensions)===null||l===void 0||l.forEach(function(c){return c.adjustDimensions(o)}))},a})()}),8433:((s,r,e)=>{e.d(r,{A:()=>t});var t;(function(a){a.Vertical="Vertical",a.Horizontal="Horizontal",a.BothDirections="BothDirections"})(t||(t={}))}),585:((s,r,e)=>{var t={"./CanvasClear":9484,"./CanvasClear.ts":9484,"./CanvasMove":9516,"./CanvasMove.ts":9516,"./CommandAbstract":9946,"./CommandAbstract.ts":9946,"./ComponentDelete":7801,"./ComponentDelete.ts":7801,"./ComponentDrag":4864,"./ComponentDrag.ts":4864,"./ComponentEnter":6134,"./ComponentEnter.ts":6134,"./ComponentExit":914,"./ComponentExit.ts":914,"./ComponentNext":5547,"./ComponentNext.ts":5547,"./ComponentPrev":8655,"./ComponentPrev.ts":8655,"./ComponentStyleClear":7640,"./ComponentStyleClear.ts":7640,"./CopyComponent":5837,"./CopyComponent.ts":5837,"./ExportTemplate":6477,"./ExportTemplate.ts":6477,"./Fullscreen":1772,"./Fullscreen.ts":1772,"./MoveComponent":741,"./MoveComponent.ts":741,"./OpenAssets":2924,"./OpenAssets.ts":2924,"./OpenBlocks":3963,"./OpenBlocks.ts":3963,"./OpenLayers":1479,"./OpenLayers.ts":1479,"./OpenStyleManager":3473,"./OpenStyleManager.ts":3473,"./OpenTraitManager":5054,"./OpenTraitManager.ts":5054,"./PasteComponent":6979,"./PasteComponent.ts":6979,"./Preview":4457,"./Preview.ts":4457,"./Resize":5493,"./Resize.ts":5493,"./SelectComponent":9317,"./SelectComponent.ts":9317,"./SelectPosition":1406,"./SelectPosition.ts":1406,"./ShowOffset":9395,"./ShowOffset.ts":9395,"./SwitchVisibility":7285,"./SwitchVisibility.ts":7285};function a(i){var l=o(i);return e(l)}function o(i){if(!e.o(t,i)){var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}return t[i]}a.keys=function(){return Object.keys(t)},a.resolve=o,s.exports=a,a.id=585}),5706:((s,r,e)=>{e.r(r),e.d(r,{VERSION:()=>a,after:()=>Gn,all:()=>Cr,allKeys:()=>Ke,any:()=>Rt,assign:()=>an,before:()=>_s,bind:()=>ar,bindAll:()=>Sn,chain:()=>ya,chunk:()=>zs,clone:()=>mt,collect:()=>Et,compact:()=>sd,compose:()=>Vn,constant:()=>J,contains:()=>fr,countBy:()=>Qo,create:()=>jr,debounce:()=>so,default:()=>rl,defaults:()=>En,defer:()=>Fn,delay:()=>$n,detect:()=>nn,difference:()=>gc,drop:()=>ui,each:()=>it,escape:()=>jt,every:()=>Cr,extend:()=>wr,extendOwn:()=>an,filter:()=>Vt,find:()=>nn,findIndex:()=>Kn,findKey:()=>Fs,findLastIndex:()=>Rs,findWhere:()=>Ie,first:()=>Li,flatten:()=>Al,foldl:()=>Pt,foldr:()=>or,forEach:()=>it,functions:()=>Fr,get:()=>zr,groupBy:()=>da,has:()=>In,head:()=>Li,identity:()=>ne,include:()=>fr,includes:()=>fr,indexBy:()=>Rn,indexOf:()=>qr,initial:()=>Ds,inject:()=>Pt,intersection:()=>qt,invert:()=>bn,invoke:()=>Rr,isArguments:()=>ee,isArray:()=>Ge,isArrayBuffer:()=>K,isBoolean:()=>M,isDataView:()=>ze,isDate:()=>X,isElement:()=>q,isEmpty:()=>de,isEqual:()=>dt,isError:()=>Q,isFinite:()=>ue,isFunction:()=>ae,isMap:()=>et,isMatch:()=>Ee,isNaN:()=>Oe,isNull:()=>z,isNumber:()=>D,isObject:()=>$,isRegExp:()=>se,isSet:()=>$t,isString:()=>H,isSymbol:()=>xe,isTypedArray:()=>he,isUndefined:()=>Y,isWeakMap:()=>wt,isWeakSet:()=>tr,iteratee:()=>Ct,keys:()=>Qe,last:()=>Ho,lastIndexOf:()=>on,map:()=>Et,mapObject:()=>Ve,matcher:()=>ke,matches:()=>ke,max:()=>Gr,memoize:()=>jn,methods:()=>Fr,min:()=>mn,mixin:()=>$s,negate:()=>qn,noop:()=>je,now:()=>ce,object:()=>pn,omit:()=>Vo,once:()=>Ta,pairs:()=>tn,partial:()=>gt,partition:()=>Jr,pick:()=>Uo,pluck:()=>Er,property:()=>Re,propertyOf:()=>He,random:()=>Ot,range:()=>Un,reduce:()=>Pt,reduceRight:()=>or,reject:()=>Ft,rest:()=>ui,restArguments:()=>G,result:()=>Ea,sample:()=>Xr,select:()=>Vt,shuffle:()=>Vr,size:()=>rs,some:()=>Rt,sortBy:()=>Yn,sortedIndex:()=>aa,tail:()=>ui,take:()=>Li,tap:()=>yr,template:()=>ds,templateSettings:()=>Br,throttle:()=>Wn,times:()=>at,toArray:()=>va,toPath:()=>An,transpose:()=>er,unescape:()=>ur,union:()=>Ht,uniq:()=>tt,unique:()=>tt,uniqueId:()=>Is,unzip:()=>er,values:()=>Lr,where:()=>Yr,without:()=>yc,wrap:()=>xa,zip:()=>xr});var t={};e.r(t),e.d(t,{VERSION:()=>a,after:()=>Gn,all:()=>Cr,allKeys:()=>Ke,any:()=>Rt,assign:()=>an,before:()=>_s,bind:()=>ar,bindAll:()=>Sn,chain:()=>ya,chunk:()=>zs,clone:()=>mt,collect:()=>Et,compact:()=>sd,compose:()=>Vn,constant:()=>J,contains:()=>fr,countBy:()=>Qo,create:()=>jr,debounce:()=>so,default:()=>Jo,defaults:()=>En,defer:()=>Fn,delay:()=>$n,detect:()=>nn,difference:()=>gc,drop:()=>ui,each:()=>it,escape:()=>jt,every:()=>Cr,extend:()=>wr,extendOwn:()=>an,filter:()=>Vt,find:()=>nn,findIndex:()=>Kn,findKey:()=>Fs,findLastIndex:()=>Rs,findWhere:()=>Ie,first:()=>Li,flatten:()=>Al,foldl:()=>Pt,foldr:()=>or,forEach:()=>it,functions:()=>Fr,get:()=>zr,groupBy:()=>da,has:()=>In,head:()=>Li,identity:()=>ne,include:()=>fr,includes:()=>fr,indexBy:()=>Rn,indexOf:()=>qr,initial:()=>Ds,inject:()=>Pt,intersection:()=>qt,invert:()=>bn,invoke:()=>Rr,isArguments:()=>ee,isArray:()=>Ge,isArrayBuffer:()=>K,isBoolean:()=>M,isDataView:()=>ze,isDate:()=>X,isElement:()=>q,isEmpty:()=>de,isEqual:()=>dt,isError:()=>Q,isFinite:()=>ue,isFunction:()=>ae,isMap:()=>et,isMatch:()=>Ee,isNaN:()=>Oe,isNull:()=>z,isNumber:()=>D,isObject:()=>$,isRegExp:()=>se,isSet:()=>$t,isString:()=>H,isSymbol:()=>xe,isTypedArray:()=>he,isUndefined:()=>Y,isWeakMap:()=>wt,isWeakSet:()=>tr,iteratee:()=>Ct,keys:()=>Qe,last:()=>Ho,lastIndexOf:()=>on,map:()=>Et,mapObject:()=>Ve,matcher:()=>ke,matches:()=>ke,max:()=>Gr,memoize:()=>jn,methods:()=>Fr,min:()=>mn,mixin:()=>$s,negate:()=>qn,noop:()=>je,now:()=>ce,object:()=>pn,omit:()=>Vo,once:()=>Ta,pairs:()=>tn,partial:()=>gt,partition:()=>Jr,pick:()=>Uo,pluck:()=>Er,property:()=>Re,propertyOf:()=>He,random:()=>Ot,range:()=>Un,reduce:()=>Pt,reduceRight:()=>or,reject:()=>Ft,rest:()=>ui,restArguments:()=>G,result:()=>Ea,sample:()=>Xr,select:()=>Vt,shuffle:()=>Vr,size:()=>rs,some:()=>Rt,sortBy:()=>Yn,sortedIndex:()=>aa,tail:()=>ui,take:()=>Li,tap:()=>yr,template:()=>ds,templateSettings:()=>Br,throttle:()=>Wn,times:()=>at,toArray:()=>va,toPath:()=>An,transpose:()=>er,unescape:()=>ur,union:()=>Ht,uniq:()=>tt,unique:()=>tt,uniqueId:()=>Is,unzip:()=>er,values:()=>Lr,where:()=>Yr,without:()=>yc,wrap:()=>xa,zip:()=>xr});var a="1.13.1",o=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},i=Array.prototype,l=Object.prototype,c=typeof Symbol<"u"?Symbol.prototype:null,d=i.push,p=i.slice,h=l.toString,g=l.hasOwnProperty,y=typeof ArrayBuffer<"u",b=typeof DataView<"u",v=Array.isArray,w=Object.keys,C=Object.create,k=y&&ArrayBuffer.isView,N=isNaN,O=isFinite,R=!{toString:null}.propertyIsEnumerable("toString"),L=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],B=Math.pow(2,53)-1;function G(ye,Me){return Me=Me==null?ye.length-1:+Me,function(){for(var Je=Math.max(arguments.length-Me,0),lt=Array(Je),Nt=0;Nt<Je;Nt++)lt[Nt]=arguments[Nt+Me];switch(Me){case 0:return ye.call(this,lt);case 1:return ye.call(this,arguments[0],lt);case 2:return ye.call(this,arguments[0],arguments[1],lt)}var bt=Array(Me+1);for(Nt=0;Nt<Me;Nt++)bt[Nt]=arguments[Nt];return bt[Me]=lt,ye.apply(this,bt)}}function $(ye){var Me=typeof ye;return Me==="function"||Me==="object"&&!!ye}function z(ye){return ye===null}function Y(ye){return ye===void 0}function M(ye){return ye===!0||ye===!1||h.call(ye)==="[object Boolean]"}function q(ye){return!!(ye&&ye.nodeType===1)}function P(ye){var Me="[object "+ye+"]";return function(Je){return h.call(Je)===Me}}const H=P("String"),D=P("Number"),X=P("Date"),se=P("RegExp"),Q=P("Error"),xe=P("Symbol"),K=P("ArrayBuffer");var Z=P("Function"),ve=o.document&&o.document.childNodes;typeof Int8Array!="object"&&typeof ve!="function"&&(Z=function(ye){return typeof ye=="function"||!1});const ae=Z,Se=P("Object");var Pe=b&&Se(new DataView(new ArrayBuffer(8))),$e=typeof Map<"u"&&Se(new Map),we=P("DataView");function Ae(ye){return ye!=null&&ae(ye.getInt8)&&K(ye.buffer)}const ze=Pe?Ae:we,Ge=v||P("Array");function Ue(ye,Me){return ye!=null&&g.call(ye,Me)}var ht=P("Arguments");(function(){ht(arguments)||(ht=function(ye){return Ue(ye,"callee")})})();const ee=ht;function ue(ye){return!xe(ye)&&O(ye)&&!isNaN(parseFloat(ye))}function Oe(ye){return D(ye)&&N(ye)}function J(ye){return function(){return ye}}function I(ye){return function(Me){var Je=ye(Me);return typeof Je=="number"&&Je>=0&&Je<=B}}function V(ye){return function(Me){return Me?.[ye]}}const re=V("byteLength"),pe=I(re);var ge=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function Ce(ye){return k?k(ye)&&!ze(ye):pe(ye)&&ge.test(h.call(ye))}const he=y?Ce:J(!1),ie=V("length");function Fe(ye){for(var Me={},Je=ye.length,lt=0;lt<Je;++lt)Me[ye[lt]]=!0;return{contains:function(Nt){return Me[Nt]},push:function(Nt){return Me[Nt]=!0,ye.push(Nt)}}}function We(ye,Me){Me=Fe(Me);var Je=L.length,lt=ye.constructor,Nt=ae(lt)&&lt.prototype||l,bt="constructor";for(Ue(ye,bt)&&!Me.contains(bt)&&Me.push(bt);Je--;)bt=L[Je],bt in ye&&ye[bt]!==Nt[bt]&&!Me.contains(bt)&&Me.push(bt)}function Qe(ye){if(!$(ye))return[];if(w)return w(ye);var Me=[];for(var Je in ye)Ue(ye,Je)&&Me.push(Je);return R&&We(ye,Me),Me}function de(ye){if(ye==null)return!0;var Me=ie(ye);return typeof Me=="number"&&(Ge(ye)||H(ye)||ee(ye))?Me===0:ie(Qe(ye))===0}function Ee(ye,Me){var Je=Qe(Me),lt=Je.length;if(ye==null)return!lt;for(var Nt=Object(ye),bt=0;bt<lt;bt++){var Jt=Je[bt];if(Me[Jt]!==Nt[Jt]||!(Jt in Nt))return!1}return!0}function le(ye){if(ye instanceof le)return ye;if(!(this instanceof le))return new le(ye);this._wrapped=ye}le.VERSION=a,le.prototype.value=function(){return this._wrapped},le.prototype.valueOf=le.prototype.toJSON=le.prototype.value,le.prototype.toString=function(){return String(this._wrapped)};function Ye(ye){return new Uint8Array(ye.buffer||ye,ye.byteOffset||0,re(ye))}var De="[object DataView]";function ct(ye,Me,Je,lt){if(ye===Me)return ye!==0||1/ye===1/Me;if(ye==null||Me==null)return!1;if(ye!==ye)return Me!==Me;var Nt=typeof ye;return Nt!=="function"&&Nt!=="object"&&typeof Me!="object"?!1:ot(ye,Me,Je,lt)}function ot(ye,Me,Je,lt){ye instanceof le&&(ye=ye._wrapped),Me instanceof le&&(Me=Me._wrapped);var Nt=h.call(ye);if(Nt!==h.call(Me))return!1;if(Pe&&Nt=="[object Object]"&&ze(ye)){if(!ze(Me))return!1;Nt=De}switch(Nt){case"[object RegExp]":case"[object String]":return""+ye==""+Me;case"[object Number]":return+ye!=+ye?+Me!=+Me:+ye==0?1/+ye===1/Me:+ye==+Me;case"[object Date]":case"[object Boolean]":return+ye==+Me;case"[object Symbol]":return c.valueOf.call(ye)===c.valueOf.call(Me);case"[object ArrayBuffer]":case De:return ot(Ye(ye),Ye(Me),Je,lt)}var bt=Nt==="[object Array]";if(!bt&&he(ye)){var Jt=re(ye);if(Jt!==re(Me))return!1;if(ye.buffer===Me.buffer&&ye.byteOffset===Me.byteOffset)return!0;bt=!0}if(!bt){if(typeof ye!="object"||typeof Me!="object")return!1;var Nr=ye.constructor,_n=Me.constructor;if(Nr!==_n&&!(ae(Nr)&&Nr instanceof Nr&&ae(_n)&&_n instanceof _n)&&"constructor"in ye&&"constructor"in Me)return!1}Je=Je||[],lt=lt||[];for(var Cn=Je.length;Cn--;)if(Je[Cn]===ye)return lt[Cn]===Me;if(Je.push(ye),lt.push(Me),bt){if(Cn=ye.length,Cn!==Me.length)return!1;for(;Cn--;)if(!ct(ye[Cn],Me[Cn],Je,lt))return!1}else{var Oa=Qe(ye),Qa;if(Cn=Oa.length,Qe(Me).length!==Cn)return!1;for(;Cn--;)if(Qa=Oa[Cn],!(Ue(Me,Qa)&&ct(ye[Qa],Me[Qa],Je,lt)))return!1}return Je.pop(),lt.pop(),!0}function dt(ye,Me){return ct(ye,Me)}function Ke(ye){if(!$(ye))return[];var Me=[];for(var Je in ye)Me.push(Je);return R&&We(ye,Me),Me}function kt(ye){var Me=ie(ye);return function(Je){if(Je==null)return!1;var lt=Ke(Je);if(ie(lt))return!1;for(var Nt=0;Nt<Me;Nt++)if(!ae(Je[ye[Nt]]))return!1;return ye!==be||!ae(Je[At])}}var At="forEach",xt="has",Xt=["clear","delete"],br=["get",xt,"set"],zt=Xt.concat(At,br),be=Xt.concat(br),Be=["add"].concat(Xt,At,xt);const et=$e?kt(zt):P("Map"),wt=$e?kt(be):P("WeakMap"),$t=$e?kt(Be):P("Set"),tr=P("WeakSet");function Lr(ye){for(var Me=Qe(ye),Je=Me.length,lt=Array(Je),Nt=0;Nt<Je;Nt++)lt[Nt]=ye[Me[Nt]];return lt}function tn(ye){for(var Me=Qe(ye),Je=Me.length,lt=Array(Je),Nt=0;Nt<Je;Nt++)lt[Nt]=[Me[Nt],ye[Me[Nt]]];return lt}function bn(ye){for(var Me={},Je=Qe(ye),lt=0,Nt=Je.length;lt<Nt;lt++)Me[ye[Je[lt]]]=Je[lt];return Me}function Fr(ye){var Me=[];for(var Je in ye)ae(ye[Je])&&Me.push(Je);return Me.sort()}function rr(ye,Me){return function(Je){var lt=arguments.length;if(Me&&(Je=Object(Je)),lt<2||Je==null)return Je;for(var Nt=1;Nt<lt;Nt++)for(var bt=arguments[Nt],Jt=ye(bt),Nr=Jt.length,_n=0;_n<Nr;_n++){var Cn=Jt[_n];(!Me||Je[Cn]===void 0)&&(Je[Cn]=bt[Cn])}return Je}}const wr=rr(Ke),an=rr(Qe),En=rr(Ke,!0);function rn(){return function(){}}function kr(ye){if(!$(ye))return{};if(C)return C(ye);var Me=rn();Me.prototype=ye;var Je=new Me;return Me.prototype=null,Je}function jr(ye,Me){var Je=kr(ye);return Me&&an(Je,Me),Je}function mt(ye){return $(ye)?Ge(ye)?ye.slice():wr({},ye):ye}function yr(ye,Me){return Me(ye),ye}function An(ye){return Ge(ye)?ye:[ye]}le.toPath=An;function fn(ye){return le.toPath(ye)}function wn(ye,Me){for(var Je=Me.length,lt=0;lt<Je;lt++){if(ye==null)return;ye=ye[Me[lt]]}return Je?ye:void 0}function zr(ye,Me,Je){var lt=wn(ye,fn(Me));return Y(lt)?Je:lt}function In(ye,Me){Me=fn(Me);for(var Je=Me.length,lt=0;lt<Je;lt++){var Nt=Me[lt];if(!Ue(ye,Nt))return!1;ye=ye[Nt]}return!!Je}function ne(ye){return ye}function ke(ye){return ye=an({},ye),function(Me){return Ee(Me,ye)}}function Re(ye){return ye=fn(ye),function(Me){return wn(Me,ye)}}function Ze(ye,Me,Je){if(Me===void 0)return ye;switch(Je??3){case 1:return function(lt){return ye.call(Me,lt)};case 3:return function(lt,Nt,bt){return ye.call(Me,lt,Nt,bt)};case 4:return function(lt,Nt,bt,Jt){return ye.call(Me,lt,Nt,bt,Jt)}}return function(){return ye.apply(Me,arguments)}}function st(ye,Me,Je){return ye==null?ne:ae(ye)?Ze(ye,Me,Je):$(ye)&&!Ge(ye)?ke(ye):Re(ye)}function Ct(ye,Me){return st(ye,Me,1/0)}le.iteratee=Ct;function Xe(ye,Me,Je){return le.iteratee!==Ct?le.iteratee(ye,Me):st(ye,Me,Je)}function Ve(ye,Me,Je){Me=Xe(Me,Je);for(var lt=Qe(ye),Nt=lt.length,bt={},Jt=0;Jt<Nt;Jt++){var Nr=lt[Jt];bt[Nr]=Me(ye[Nr],Nr,ye)}return bt}function je(){}function He(ye){return ye==null?je:function(Me){return zr(ye,Me)}}function at(ye,Me,Je){var lt=Array(Math.max(0,ye));Me=Ze(Me,Je,1);for(var Nt=0;Nt<ye;Nt++)lt[Nt]=Me(Nt);return lt}function Ot(ye,Me){return Me==null&&(Me=ye,ye=0),ye+Math.floor(Math.random()*(Me-ye+1))}const ce=Date.now||function(){return new Date().getTime()};function Te(ye){var Me=function(bt){return ye[bt]},Je="(?:"+Qe(ye).join("|")+")",lt=RegExp(Je),Nt=RegExp(Je,"g");return function(bt){return bt=bt==null?"":""+bt,lt.test(bt)?bt.replace(Nt,Me):bt}}const ut={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},jt=Te(ut),Lt=bn(ut),ur=Te(Lt),Br=le.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var _t=/(.)^/,Kr={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Zr=/\\|'|\r|\n|\u2028|\u2029/g;function ps(ye){return"\\"+Kr[ye]}var Xn=/^\s*(\w|\$)+\s*$/;function ds(ye,Me,Je){!Me&&Je&&(Me=Je),Me=En({},Me,le.templateSettings);var lt=RegExp([(Me.escape||_t).source,(Me.interpolate||_t).source,(Me.evaluate||_t).source].join("|")+"|$","g"),Nt=0,bt="__p+='";ye.replace(lt,function(Cn,Oa,Qa,hf,mf){return bt+=ye.slice(Nt,mf).replace(Zr,ps),Nt=mf+Cn.length,Oa?bt+=`'+
((__t=(`+Oa+`))==null?'':_.escape(__t))+
'`:Qa?bt+=`'+
((__t=(`+Qa+`))==null?'':__t)+
'`:hf&&(bt+=`';
`+hf+`
__p+='`),Cn}),bt+=`';
`;var Jt=Me.variable;if(Jt){if(!Xn.test(Jt))throw new Error("variable is not a bare identifier: "+Jt)}else bt=`with(obj||{}){
`+bt+`}
`,Jt="obj";bt=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+bt+`return __p;
`;var Nr;try{Nr=new Function(Jt,"_",bt)}catch(Cn){throw Cn.source=bt,Cn}var _n=function(Cn){return Nr.call(this,Cn,le)};return _n.source="function("+Jt+`){
`+bt+"}",_n}function Ea(ye,Me,Je){Me=fn(Me);var lt=Me.length;if(!lt)return ae(Je)?Je.call(ye):Je;for(var Nt=0;Nt<lt;Nt++){var bt=ye?.[Me[Nt]];bt===void 0&&(bt=Je,Nt=lt),ye=ae(bt)?bt.call(ye):bt}return ye}var sa=0;function Is(ye){var Me=++sa+"";return ye?ye+Me:Me}function ya(ye){var Me=le(ye);return Me._chain=!0,Me}function Ir(ye,Me,Je,lt,Nt){if(!(lt instanceof Me))return ye.apply(Je,Nt);var bt=kr(ye.prototype),Jt=ye.apply(bt,Nt);return $(Jt)?Jt:bt}var _r=G(function(ye,Me){var Je=_r.placeholder,lt=function(){for(var Nt=0,bt=Me.length,Jt=Array(bt),Nr=0;Nr<bt;Nr++)Jt[Nr]=Me[Nr]===Je?arguments[Nt++]:Me[Nr];for(;Nt<arguments.length;)Jt.push(arguments[Nt++]);return Ir(ye,lt,this,this,Jt)};return lt});_r.placeholder=le;const gt=_r,ar=G(function(ye,Me,Je){if(!ae(ye))throw new TypeError("Bind must be called on a function");var lt=G(function(Nt){return Ir(ye,lt,Me,this,Je.concat(Nt))});return lt}),Or=I(ie);function Mr(ye,Me,Je,lt){if(lt=lt||[],!Me&&Me!==0)Me=1/0;else if(Me<=0)return lt.concat(ye);for(var Nt=lt.length,bt=0,Jt=ie(ye);bt<Jt;bt++){var Nr=ye[bt];if(Or(Nr)&&(Ge(Nr)||ee(Nr)))if(Me>1)Mr(Nr,Me-1,Je,lt),Nt=lt.length;else for(var _n=0,Cn=Nr.length;_n<Cn;)lt[Nt++]=Nr[_n++];else Je||(lt[Nt++]=Nr)}return lt}const Sn=G(function(ye,Me){Me=Mr(Me,!1,!1);var Je=Me.length;if(Je<1)throw new Error("bindAll must be passed function names");for(;Je--;){var lt=Me[Je];ye[lt]=ar(ye[lt],ye)}return ye});function jn(ye,Me){var Je=function(lt){var Nt=Je.cache,bt=""+(Me?Me.apply(this,arguments):lt);return Ue(Nt,bt)||(Nt[bt]=ye.apply(this,arguments)),Nt[bt]};return Je.cache={},Je}const $n=G(function(ye,Me,Je){return setTimeout(function(){return ye.apply(null,Je)},Me)}),Fn=gt($n,le,1);function Wn(ye,Me,Je){var lt,Nt,bt,Jt,Nr=0;Je||(Je={});var _n=function(){Nr=Je.leading===!1?0:ce(),lt=null,Jt=ye.apply(Nt,bt),lt||(Nt=bt=null)},Cn=function(){var Oa=ce();!Nr&&Je.leading===!1&&(Nr=Oa);var Qa=Me-(Oa-Nr);return Nt=this,bt=arguments,Qa<=0||Qa>Me?(lt&&(clearTimeout(lt),lt=null),Nr=Oa,Jt=ye.apply(Nt,bt),lt||(Nt=bt=null)):!lt&&Je.trailing!==!1&&(lt=setTimeout(_n,Qa)),Jt};return Cn.cancel=function(){clearTimeout(lt),Nr=0,lt=Nt=bt=null},Cn}function so(ye,Me,Je){var lt,Nt,bt,Jt,Nr,_n=function(){var Oa=ce()-Nt;Me>Oa?lt=setTimeout(_n,Me-Oa):(lt=null,Je||(Jt=ye.apply(Nr,bt)),lt||(bt=Nr=null))},Cn=G(function(Oa){return Nr=this,bt=Oa,Nt=ce(),lt||(lt=setTimeout(_n,Me),Je&&(Jt=ye.apply(Nr,bt))),Jt});return Cn.cancel=function(){clearTimeout(lt),lt=bt=Nr=null},Cn}function xa(ye,Me){return gt(Me,ye)}function qn(ye){return function(){return!ye.apply(this,arguments)}}function Vn(){var ye=arguments,Me=ye.length-1;return function(){for(var Je=Me,lt=ye[Me].apply(this,arguments);Je--;)lt=ye[Je].call(this,lt);return lt}}function Gn(ye,Me){return function(){if(--ye<1)return Me.apply(this,arguments)}}function _s(ye,Me){var Je;return function(){return--ye>0&&(Je=Me.apply(this,arguments)),ye<=1&&(Me=null),Je}}const Ta=gt(_s,2);function Fs(ye,Me,Je){Me=Xe(Me,Je);for(var lt=Qe(ye),Nt,bt=0,Jt=lt.length;bt<Jt;bt++)if(Nt=lt[bt],Me(ye[Nt],Nt,ye))return Nt}function vs(ye){return function(Me,Je,lt){Je=Xe(Je,lt);for(var Nt=ie(Me),bt=ye>0?0:Nt-1;bt>=0&&bt<Nt;bt+=ye)if(Je(Me[bt],bt,Me))return bt;return-1}}const Kn=vs(1),Rs=vs(-1);function aa(ye,Me,Je,lt){Je=Xe(Je,lt,1);for(var Nt=Je(Me),bt=0,Jt=ie(ye);bt<Jt;){var Nr=Math.floor((bt+Jt)/2);Je(ye[Nr])<Nt?bt=Nr+1:Jt=Nr}return bt}function Wr(ye,Me,Je){return function(lt,Nt,bt){var Jt=0,Nr=ie(lt);if(typeof bt=="number")ye>0?Jt=bt>=0?bt:Math.max(bt+Nr,Jt):Nr=bt>=0?Math.min(bt+1,Nr):bt+Nr+1;else if(Je&&bt&&Nr)return bt=Je(lt,Nt),lt[bt]===Nt?bt:-1;if(Nt!==Nt)return bt=Me(p.call(lt,Jt,Nr),Oe),bt>=0?bt+Jt:-1;for(bt=ye>0?Jt:Nr-1;bt>=0&&bt<Nr;bt+=ye)if(lt[bt]===Nt)return bt;return-1}}const qr=Wr(1,Kn,aa),on=Wr(-1,Rs);function nn(ye,Me,Je){var lt=Or(ye)?Kn:Fs,Nt=lt(ye,Me,Je);if(Nt!==void 0&&Nt!==-1)return ye[Nt]}function Ie(ye,Me){return nn(ye,ke(Me))}function it(ye,Me,Je){Me=Ze(Me,Je);var lt,Nt;if(Or(ye))for(lt=0,Nt=ye.length;lt<Nt;lt++)Me(ye[lt],lt,ye);else{var bt=Qe(ye);for(lt=0,Nt=bt.length;lt<Nt;lt++)Me(ye[bt[lt]],bt[lt],ye)}return ye}function Et(ye,Me,Je){Me=Xe(Me,Je);for(var lt=!Or(ye)&&Qe(ye),Nt=(lt||ye).length,bt=Array(Nt),Jt=0;Jt<Nt;Jt++){var Nr=lt?lt[Jt]:Jt;bt[Jt]=Me(ye[Nr],Nr,ye)}return bt}function Mt(ye){var Me=function(Je,lt,Nt,bt){var Jt=!Or(Je)&&Qe(Je),Nr=(Jt||Je).length,_n=ye>0?0:Nr-1;for(bt||(Nt=Je[Jt?Jt[_n]:_n],_n+=ye);_n>=0&&_n<Nr;_n+=ye){var Cn=Jt?Jt[_n]:_n;Nt=lt(Nt,Je[Cn],Cn,Je)}return Nt};return function(Je,lt,Nt,bt){var Jt=arguments.length>=3;return Me(Je,Ze(lt,bt,4),Nt,Jt)}}const Pt=Mt(1),or=Mt(-1);function Vt(ye,Me,Je){var lt=[];return Me=Xe(Me,Je),it(ye,function(Nt,bt,Jt){Me(Nt,bt,Jt)&&lt.push(Nt)}),lt}function Ft(ye,Me,Je){return Vt(ye,qn(Xe(Me)),Je)}function Cr(ye,Me,Je){Me=Xe(Me,Je);for(var lt=!Or(ye)&&Qe(ye),Nt=(lt||ye).length,bt=0;bt<Nt;bt++){var Jt=lt?lt[bt]:bt;if(!Me(ye[Jt],Jt,ye))return!1}return!0}function Rt(ye,Me,Je){Me=Xe(Me,Je);for(var lt=!Or(ye)&&Qe(ye),Nt=(lt||ye).length,bt=0;bt<Nt;bt++){var Jt=lt?lt[bt]:bt;if(Me(ye[Jt],Jt,ye))return!0}return!1}function fr(ye,Me,Je,lt){return Or(ye)||(ye=Lr(ye)),(typeof Je!="number"||lt)&&(Je=0),qr(ye,Me,Je)>=0}const Rr=G(function(ye,Me,Je){var lt,Nt;return ae(Me)?Nt=Me:(Me=fn(Me),lt=Me.slice(0,-1),Me=Me[Me.length-1]),Et(ye,function(bt){var Jt=Nt;if(!Jt){if(lt&&lt.length&&(bt=wn(bt,lt)),bt==null)return;Jt=bt[Me]}return Jt==null?Jt:Jt.apply(bt,Je)})});function Er(ye,Me){return Et(ye,Re(Me))}function Yr(ye,Me){return Vt(ye,ke(Me))}function Gr(ye,Me,Je){var lt=-1/0,Nt=-1/0,bt,Jt;if(Me==null||typeof Me=="number"&&typeof ye[0]!="object"&&ye!=null){ye=Or(ye)?ye:Lr(ye);for(var Nr=0,_n=ye.length;Nr<_n;Nr++)bt=ye[Nr],bt!=null&&bt>lt&&(lt=bt)}else Me=Xe(Me,Je),it(ye,function(Cn,Oa,Qa){Jt=Me(Cn,Oa,Qa),(Jt>Nt||Jt===-1/0&&lt===-1/0)&&(lt=Cn,Nt=Jt)});return lt}function mn(ye,Me,Je){var lt=1/0,Nt=1/0,bt,Jt;if(Me==null||typeof Me=="number"&&typeof ye[0]!="object"&&ye!=null){ye=Or(ye)?ye:Lr(ye);for(var Nr=0,_n=ye.length;Nr<_n;Nr++)bt=ye[Nr],bt!=null&&bt<lt&&(lt=bt)}else Me=Xe(Me,Je),it(ye,function(Cn,Oa,Qa){Jt=Me(Cn,Oa,Qa),(Jt<Nt||Jt===1/0&&lt===1/0)&&(lt=Cn,Nt=Jt)});return lt}function Xr(ye,Me,Je){if(Me==null||Je)return Or(ye)||(ye=Lr(ye)),ye[Ot(ye.length-1)];var lt=Or(ye)?mt(ye):Lr(ye),Nt=ie(lt);Me=Math.max(Math.min(Me,Nt),0);for(var bt=Nt-1,Jt=0;Jt<Me;Jt++){var Nr=Ot(Jt,bt),_n=lt[Jt];lt[Jt]=lt[Nr],lt[Nr]=_n}return lt.slice(0,Me)}function Vr(ye){return Xr(ye,1/0)}function Yn(ye,Me,Je){var lt=0;return Me=Xe(Me,Je),Er(Et(ye,function(Nt,bt,Jt){return{value:Nt,index:lt++,criteria:Me(Nt,bt,Jt)}}).sort(function(Nt,bt){var Jt=Nt.criteria,Nr=bt.criteria;if(Jt!==Nr){if(Jt>Nr||Jt===void 0)return 1;if(Jt<Nr||Nr===void 0)return-1}return Nt.index-bt.index}),"value")}function Qr(ye,Me){return function(Je,lt,Nt){var bt=Me?[[],[]]:{};return lt=Xe(lt,Nt),it(Je,function(Jt,Nr){var _n=lt(Jt,Nr,Je);ye(bt,Jt,_n)}),bt}}const da=Qr(function(ye,Me,Je){Ue(ye,Je)?ye[Je].push(Me):ye[Je]=[Me]}),Rn=Qr(function(ye,Me,Je){ye[Je]=Me}),Qo=Qr(function(ye,Me,Je){Ue(ye,Je)?ye[Je]++:ye[Je]=1}),Jr=Qr(function(ye,Me,Je){ye[Je?0:1].push(Me)},!0);var hs=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function va(ye){return ye?Ge(ye)?p.call(ye):H(ye)?ye.match(hs):Or(ye)?Et(ye,ne):Lr(ye):[]}function rs(ye){return ye==null?0:Or(ye)?ye.length:Qe(ye).length}function Bs(ye,Me,Je){return Me in Je}const Uo=G(function(ye,Me){var Je={},lt=Me[0];if(ye==null)return Je;ae(lt)?(Me.length>1&&(lt=Ze(lt,Me[1])),Me=Ke(ye)):(lt=Bs,Me=Mr(Me,!1,!1),ye=Object(ye));for(var Nt=0,bt=Me.length;Nt<bt;Nt++){var Jt=Me[Nt],Nr=ye[Jt];lt(Nr,Jt,ye)&&(Je[Jt]=Nr)}return Je}),Vo=G(function(ye,Me){var Je=Me[0],lt;return ae(Je)?(Je=qn(Je),Me.length>1&&(lt=Me[1])):(Me=Et(Mr(Me,!1,!1),String),Je=function(Nt,bt){return!fr(Me,bt)}),Uo(ye,Je,lt)});function Ds(ye,Me,Je){return p.call(ye,0,Math.max(0,ye.length-(Me==null||Je?1:Me)))}function Li(ye,Me,Je){return ye==null||ye.length<1?Me==null||Je?void 0:[]:Me==null||Je?ye[0]:Ds(ye,ye.length-Me)}function ui(ye,Me,Je){return p.call(ye,Me==null||Je?1:Me)}function Ho(ye,Me,Je){return ye==null||ye.length<1?Me==null||Je?void 0:[]:Me==null||Je?ye[ye.length-1]:ui(ye,Math.max(0,ye.length-Me))}function sd(ye){return Vt(ye,Boolean)}function Al(ye,Me){return Mr(ye,Me,!1)}const gc=G(function(ye,Me){return Me=Mr(Me,!0,!0),Vt(ye,function(Je){return!fr(Me,Je)})}),yc=G(function(ye,Me){return gc(ye,Me)});function tt(ye,Me,Je,lt){M(Me)||(lt=Je,Je=Me,Me=!1),Je!=null&&(Je=Xe(Je,lt));for(var Nt=[],bt=[],Jt=0,Nr=ie(ye);Jt<Nr;Jt++){var _n=ye[Jt],Cn=Je?Je(_n,Jt,ye):_n;Me&&!Je?((!Jt||bt!==Cn)&&Nt.push(_n),bt=Cn):Je?fr(bt,Cn)||(bt.push(Cn),Nt.push(_n)):fr(Nt,_n)||Nt.push(_n)}return Nt}const Ht=G(function(ye){return tt(Mr(ye,!0,!0))});function qt(ye){for(var Me=[],Je=arguments.length,lt=0,Nt=ie(ye);lt<Nt;lt++){var bt=ye[lt];if(!fr(Me,bt)){var Jt;for(Jt=1;Jt<Je&&fr(arguments[Jt],bt);Jt++);Jt===Je&&Me.push(bt)}}return Me}function er(ye){for(var Me=ye&&Gr(ye,ie).length||0,Je=Array(Me),lt=0;lt<Me;lt++)Je[lt]=Er(ye,lt);return Je}const xr=G(er);function pn(ye,Me){for(var Je={},lt=0,Nt=ie(ye);lt<Nt;lt++)Me?Je[ye[lt]]=Me[lt]:Je[ye[lt][0]]=ye[lt][1];return Je}function Un(ye,Me,Je){Me==null&&(Me=ye||0,ye=0),Je||(Je=Me<ye?-1:1);for(var lt=Math.max(Math.ceil((Me-ye)/Je),0),Nt=Array(lt),bt=0;bt<lt;bt++,ye+=Je)Nt[bt]=ye;return Nt}function zs(ye,Me){if(Me==null||Me<1)return[];for(var Je=[],lt=0,Nt=ye.length;lt<Nt;)Je.push(p.call(ye,lt,lt+=Me));return Je}function ns(ye,Me){return ye._chain?le(Me).chain():Me}function $s(ye){return it(Fr(ye),function(Me){var Je=le[Me]=ye[Me];le.prototype[Me]=function(){var lt=[this._wrapped];return d.apply(lt,arguments),ns(this,Je.apply(le,lt))}}),le}it(["pop","push","reverse","shift","sort","splice","unshift"],function(ye){var Me=i[ye];le.prototype[ye]=function(){var Je=this._wrapped;return Je!=null&&(Me.apply(Je,arguments),(ye==="shift"||ye==="splice")&&Je.length===0&&delete Je[0]),ns(this,Je)}}),it(["concat","join","slice"],function(ye){var Me=i[ye];le.prototype[ye]=function(){var Je=this._wrapped;return Je!=null&&(Je=Me.apply(Je,arguments)),ns(this,Je)}});const Jo=le;var Xa=$s(t);Xa._=Xa;const rl=Xa})},mE={};function fs(s){var r=mE[s];if(r!==void 0)return r.exports;var e=mE[s]={exports:{}};return HU[s].call(e.exports,e,e.exports,fs),e.exports}fs.n=s=>{var r=s&&s.__esModule?()=>s.default:()=>s;return fs.d(r,{a:r}),r};fs.d=(s,r)=>{for(var e in r)fs.o(r,e)&&!fs.o(s,e)&&Object.defineProperty(s,e,{enumerable:!0,get:r[e]})};fs.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})();fs.o=(s,r)=>Object.prototype.hasOwnProperty.call(s,r);fs.r=s=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var sj={};fs.d(sj,{Ay:()=>hte,I0:()=>P6,nu:()=>O6});var _e=fs(5706),Zt=fs(1166);function Ei(s){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];var t=s.raw;return t.reduce(function(a,o,i){var l=r[i-1],c=t[i-1];return Array.isArray(l)?l=l.join(""):c&&c.slice(-1)==="$"?a=a.slice(0,-1):l=(0,Zt.escape)(l),a+l+o})}var WU=function(){return{stylePrefix:"gjs-",components:"",style:"",fromElement:!1,projectData:void 0,noticeOnUnload:!0,showOffsets:!1,showOffsetsSelected:!1,forceClass:!0,height:"900px",width:"100%",log:["warning","error"],baseCss:"",protectedCss:"* { box-sizing: border-box; } body {margin: 0;}",canvasCss:"",defaultCommand:"select-comp",showToolbar:!0,showDevices:!0,devicePreviewMode:!1,mediaCondition:"max-width",tagVarStart:"{[ ",tagVarEnd:" ]}",jsInHtml:!0,nativeDnD:!0,multipleSelection:!0,optsHtml:{},optsCss:{},avoidInlineStyle:!0,avoidDefaults:!0,clearStyles:!1,listenToEl:[],cssIcons:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css",icons:{close:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',move:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"/></svg>',plus:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" /></svg>',caret:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7,10L12,15L17,10H7Z" /></svg>',delete:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" /></svg>',copy:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" /></svg>',arrowUp:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z" /></svg>',chevron:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z" /></svg>',eye:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z" /></svg>',eyeOff:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z" /></svg>'},i18n:{},undoManager:{},assetManager:{},canvas:{},layerManager:{},storageManager:{},richTextEditor:{},domComponents:{},modal:{},codeManager:{},panels:{},commands:{},cssComposer:{},selectorManager:{},deviceManager:{},styleManager:{},blockManager:{},traitManager:{},textViewCode:"Code",keepUnusedStyles:!1,customUI:!1,telemetry:!0}};const qU=WU;var B2=fs(4193),GU=fs.n(B2),go=fs(7774);const KU=(function(s){var r=s.$;if(r&&r.prototype&&r.prototype.constructor.name!=="jQuery"){var e=r.fn;e.hide=function(){return this.css("display","none")},e.show=function(){return this.css("display","block")},e.focus=function(){var o=this.get(0);return o&&o.focus(),this},e.bind=function(o,i){return this.on(o,i)},e.unbind=function(o,i){if((0,_e.isObject)(o)){for(var l in o)o.hasOwnProperty(l)&&this.off(l,o[l]);return this}else return this.off(o,i)},e.click=function(o){return o?this.on("click",o):this.trigger("click")},e.change=function(o){return o?this.on("change",o):this.trigger("change")},e.keydown=function(o){return o?this.on("keydown",o):this.trigger("keydown")},e.delegate=function(o,i,l,c){return c||(c=l),this.on(i,o,function(d){d.data=l,c(d)})},e.scrollLeft=function(){var o=this.get(0);o=o.nodeType==9?o.defaultView:o;var i=o instanceof Window?o:null;return i?i.pageXOffset:o.scrollLeft||0},e.scrollTop=function(){var o=this.get(0);o=o.nodeType==9?o.defaultView:o;var i=o instanceof Window?o:null;return i?i.pageYOffset:o.scrollTop||0};var t=r.prototype.offset;e.offset=function(o){var i,l;return o&&(i=o.top,l=o.left),typeof i<"u"&&this.css("top","".concat(i,"px")),typeof l<"u"&&this.css("left","".concat(l,"px")),t.call(this)},r.map=function(o,i){for(var l=[],c=0;c<o.length;c++)l.push(i(o[c],c));return l};var a=Array.prototype.indexOf;r.inArray=function(o,i,l){return i==null?-1:a.call(i,o,l)},r.Event=function(o,i){if(!(this instanceof r.Event))return new r.Event(o,i);this.type=o,this.isDefaultPrevented=function(){return!1}}}});var Sr=fs(9156),JP=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),YU=(function(s){JP(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r})(Sr.Kx),ZU=(function(s){JP(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.getByComponent=function(e){var t=this;return this.filter(function(a){return t.getComponent(a)===e})[0]},r.prototype.addComponent=function(e,t){var a=this,o=((0,_e.isArray)(e)?e:[e]).filter(function(i){return!a.hasComponent(i)}).map(function(i){return new YU({component:i})})[0];return this.push(o,t)},r.prototype.getComponent=function(e){return e.get("component")},r.prototype.hasComponent=function(e){var t=this.getByComponent(e);return t&&this.contains(t)},r.prototype.lastComponent=function(){var e=this.last();return e?this.getComponent(e):void 0},r.prototype.allComponents=function(){var e=this;return this.map(function(t){return e.getComponent(t)}).filter(function(t){return t})},r.prototype.removeComponent=function(e,t){var a=this,o=((0,_e.isArray)(e)?e:[e]).map(function(i){return a.getByComponent(i)});return this.remove(o,t)},r})(Sr.pM);const XU=ZU;var QU=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),LS=function(){return LS=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},LS.apply(this,arguments)},JU=function(s,r,e){if(e||arguments.length===2)for(var t=0,a=r.length,o;t<a;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return s.concat(o||Array.prototype.slice.call(r))},eA=(function(){function s(r,e,t){this.debounced=[],this.collections=[],this.cls=[],this.events={},this._em=r,this._name=e;var a=this.name.charAt(0).toLowerCase()+this.name.slice(1),o=(0,_e.isUndefined)(r.config[a])?r.config[this.name]:r.config[a],i=o===!0?{}:o||{};i.pStylePrefix=r.config.pStylePrefix||"",!(0,_e.isUndefined)(o)&&!o&&(i._disable=1),i.em=r,this._config=(0,Zt.deepMerge)(t||{},i)}return Object.defineProperty(s.prototype,"em",{get:function(){return this._em},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),s.prototype.render=function(r){},s.prototype.postLoad=function(r){},s.prototype.onInit=function(){},Object.defineProperty(s.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),s.prototype.getConfig=function(r){return r?this.config[r]:this.config},s.prototype.__logWarn=function(r,e){e===void 0&&(e={}),this.em.logWarning("[".concat(this.name,"]: ").concat(r),e)},s.prototype.destroy=function(){this.__destroy()},s.prototype.__destroy=function(){var r,e,t;(r=this.view)===null||r===void 0||r.remove(),(e=this.state)===null||e===void 0||e.stopListening(),(t=this.state)===null||t===void 0||t.clear(),this.debounced.forEach(function(a){return a.cancel()}),this.collections.forEach(function(a){a.stopListening(),a.reset()})},s.prototype.__appendTo=function(){var r=this.getConfig().appendTo;if(r){var e=(0,_e.isElement)(r)?r:document.querySelector(r);if(!e)return this.__logWarn('"appendTo" element not found');e.appendChild(this.render())}},s})();const Di=eA;var lu=(function(s){QU(r,s);function r(e,t,a,o,i,l){l===void 0&&(l={});var c=s.call(this,e,t,i)||this;return c.cls=[],c._itemCache=new Map,c.private=!1,c.all=a,o&&(c.events=o),!l.skipListen&&c.__initListen(),c}return r.prototype.postLoad=function(e){},r.prototype.render=function(e){},r.prototype.getProjectData=function(e){var t={},a=this.storageKey;return a&&(t[a]=e||this.getAll()),t},r.prototype.loadProjectData=function(e,t){e===void 0&&(e={}),t===void 0&&(t={});var a=t.all,o=t.onResult,i=t.reset,l=this.storageKey,c={action:"load"},d=a||this.all,p=e[l];if(typeof p=="string")try{p=JSON.parse(p)}catch{this.__logWarn("Data parsing failed",{input:p})}return i&&p&&d.reset(void 0,c),o?p&&o(p,c):p&&(0,Zt.isDef)(p.length)&&d.reset(p,c),p},r.prototype.clear=function(e){e===void 0&&(e={});var t=this.all;return t&&t.reset(void 0,e),this},r.prototype.getAll=function(){return JU([],this.all.models,!0)},r.prototype.getAllMap=function(){return this.getAll().reduce(function(e,t){return e[t.get(t.idAttribute)]=t,e},{})},r.prototype._makeCacheKey=function(e){return""},r.prototype._cacheItem=function(e){var t=this._makeCacheKey(e);t&&this._itemCache.set(t,e)},r.prototype._uncacheItem=function(e){var t=this._makeCacheKey(e);t&&this._itemCache.delete(t)},r.prototype._clearItemCache=function(){this._itemCache.clear()},r.prototype._onItemsResetCache=function(e){var t=this;this._clearItemCache(),e.each(function(a){return t._cacheItem(a)})},r.prototype._onItemKeyChange=function(e){for(var t,a=0,o=this._itemCache.entries();a<o.length;a++){var i=o[a],l=i[0],c=i[1];if(c===e){t=l;break}}t&&this._itemCache.delete(t),this._cacheItem(e)},r.prototype._setupCacheListeners=function(){this.em.listenTo(this.all,"add",this._cacheItem.bind(this)),this.em.listenTo(this.all,"remove",this._uncacheItem.bind(this)),this.em.listenTo(this.all,"reset",this._onItemsResetCache.bind(this))},r.prototype.__initListen=function(e){e===void 0&&(e={});var t=this,a=t.all,o=t.em,i=t.events;a&&o&&a.on("add",function(l,c,d){return o.trigger(i.add,l,d)}).on("remove",function(l,c,d){return o.trigger(i.remove,l,d)}).on("change",function(l,c){return o.trigger(i.update,l,l.changedAttributes(),c)}).on("all",this.__catchAllEvent,this),this.cls=[a].concat(e.collections||[]),(e.propagate||[]).forEach(function(l){var c=l.entity,d=l.event;c.on("all",function(p,h,g,y){var b=y||g,v=LS({event:p},b);[o,a].map(function(w){return w.trigger(d,h,v)})})})},r.prototype.__remove=function(e,t){var a=this;t===void 0&&(t={});var o=this.em,i=(0,_e.isString)(e)?this.get(e):e,l=function(){return i&&a.all.remove(i,t),i};return!t.silent&&o?.trigger(this.events.removeBefore,i,l,t),!t.abort&&l()},r.prototype.__catchAllEvent=function(e,t,a,o){var i=this,l=i.em,c=i.events,d=o||a;l&&c.all&&l.trigger(c.all,{event:e,model:t,options:d}),this.__onAllEvent()},r.prototype.__appendTo=function(e){var t=this.config.appendTo;if(t){var a=(0,_e.isElement)(t)?t:document.querySelector(t);if(!a)return this.__logWarn('"appendTo" element not found');a.appendChild(this.render(e))}},r.prototype.__onAllEvent=function(){},r.prototype._createId=function(e){e===void 0&&(e=16);var t=this.getAll(),a=t.length+e,o=this.getAllMap(),i;do i=(0,Zt.createId)(a);while(o[i]);return i},r.prototype.__listenAdd=function(e,t){var a=this;e.on("add",function(o,i,l){return a.em.trigger(t,o,l)})},r.prototype.__listenRemove=function(e,t){var a=this;e.on("remove",function(o,i,l){return a.em.trigger(t,o,l)})},r.prototype.__listenUpdate=function(e,t){var a=this;e.on("change",function(o,i){return a.em.trigger(t,o,o.changedAttributes(),i)})},r.prototype.__destroy=function(){var e;this.cls.forEach(function(t){t.stopListening(),t.reset()}),(e=this.view)===null||e===void 0||e.remove(),this.view=void 0},r})(eA),eV=function(){return{stylePrefix:"cv-",scripts:[],styles:[],customBadgeLabel:void 0,autoscrollLimit:50,extHl:!1,frameContent:"<!DOCTYPE html>",frameStyle:`
    body { background-color: #fff }
    * ::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.1) }
    * ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.2) }
    * ::-webkit-scrollbar { width: 10px }
  `,notTextable:["button","a","input[type=checkbox]","input[type=radio]"],allowExternalDrop:!0}};const tV=eV;var of=fs(7058),FS;(function(s){s.add="device:add",s.addBefore="device:add:before",s.remove="device:remove",s.removeBefore="device:remove:before",s.select="device:select",s.selectBefore="device:select:before",s.update="device:update",s.all="device"})(FS||(FS={}));const tA=FS;var BS;(function(s){s.add="page:add",s.addBefore="page:add:before",s.remove="page:remove",s.removeBefore="page:remove:before",s.select="page:select",s.selectBefore="page:select:before",s.update="page:update",s.all="page"})(BS||(BS={}));const zS=BS;var rV=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),nV=(function(s){rV(r,s);function r(e,t,a){return s.call(this,t,{module:e,modelConstructor:a})||this}return r.prototype.add=function(e,t){var a=this,o,i=(0,_e.isArray)(e)?e:(0,_e.isUndefined)(e)?void 0:[e];return i=(o=i?.map(function(l){return l instanceof a.newModel?l:new a.newModel(a.module,l)}))!==null&&o!==void 0?o:[void 0],s.prototype.add.call(this,(0,_e.isArray)(e)?i:i[0],t)},r.prototype.preinitialize=function(e,t){this.newModel=t.modelConstructor,this.module=t.module},r})(Sr.pM);const aj=nV;var db;(function(s){s.dragEnter="canvas:dragenter",s.dragOver="canvas:dragover",s.dragEnd="canvas:dragend",s.dragData="canvas:dragdata",s.drop="canvas:drop",s.spot="canvas:spot",s.spotAdd="canvas:spot:add",s.spotUpdate="canvas:spot:update",s.spotRemove="canvas:spot:remove",s.coords="canvas:coords",s.zoom="canvas:zoom",s.pointer="canvas:pointer",s.refresh="canvas:refresh",s.frameLoad="canvas:frame:load",s.frameLoadHead="canvas:frame:load:head",s.frameLoadBody="canvas:frame:load:body",s.frameUnload="canvas:frame:unload"})(db||(db={}));const Oy=db;var sV=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),$S=function(){return $S=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},$S.apply(this,arguments)},gE=function(s,r,e){if(e||arguments.length===2)for(var t=0,a=r.length,o;t<a;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return s.concat(o||Array.prototype.slice.call(r))},yE="__aw",xE="__ah",vE=function(s,r){var e,t=s.get(r),a=(e=s.view)===null||e===void 0?void 0:e.el[r==="width"?"offsetWidth":"offsetHeight"];return(0,_e.isNumber)(t)?t:(0,_e.isString)(t)&&t.endsWith("px")?parseFloat(t):a||0},aV=(function(s){sV(r,s);function r(e,t){var a=s.call(this,e,t)||this,o=a.em,i=a.attributes,l=i.styles,c=i.component,d=o.Components,p=d.getConfig(),h=o.Css.getAll(),g={},y={em:o,config:p,frame:a,idMap:g};if(!(0,Zt.isComponent)(c)){var b=(0,Zt.isObject)(c)?c:{components:c};!b.type&&(b.type="wrapper");var v=d.getType("wrapper").model;a.set("component",new v(b,y))}if(!l)a.set("styles",h);else if(!(0,Zt.isObject)(l)){var w=l;(0,_e.keys)(g).length&&(w=(0,_e.isString)(w)?o.Parser.parseCss(w):w,o.Css.checkId(w,{idMap:g})),h.add(w),a.set("styles",h)}return!t.width&&a.set(yE,1),!t.height&&a.set(xE,1),!a.id&&a.set("id",(0,Zt.createId)()),a}return r.prototype.defaults=function(){return{x:0,y:0,changesCount:0,attributes:{},width:null,height:null,head:[],component:"",styles:"",refFrame:null,_undo:!0,_undoexc:["changesCount"]}},Object.defineProperty(r.prototype,"width",{get:function(){return vE(this,"width")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return vE(this,"height")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"head",{get:function(){return this.get("head")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"refFrame",{get:function(){return this.get("refFrame")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"root",{get:function(){var e=this.refFrame;return e?.getComponent()||this.getComponent()},enumerable:!1,configurable:!0}),r.prototype.initRefs=function(){var e=this.refFrame;if((0,_e.isString)(e)){var t=this.module.framesById[e];t&&this.set({refFrame:t},{silent:!0})}},r.prototype.getBoxRect=function(){var e=this.attributes,t=e.x,a=e.y,o=this,i=o.width,l=o.height;return{x:t,y:a,width:i,height:l}},r.prototype.onRemove=function(){!this.refFrame&&this.getComponent().remove({root:1})},r.prototype.changesUp=function(e){e===void 0&&(e={}),!(e.temporary||e.noCount||e.avoidStore)&&this.set("changesCount",this.get("changesCount")+1)},r.prototype.getComponent=function(){return this.get("component")},r.prototype.getStyles=function(){return this.get("styles")},r.prototype.disable=function(){this.trigger("disable")},r.prototype.remove=function(){var e;(e=this.view)===null||e===void 0||e.remove(),this.view=void 0;var t=this.collection;return t&&t.remove(this)},r.prototype.getHead=function(){return gE([],this.head,!0)},r.prototype.setHead=function(e){return this.set("head",gE([],e,!0))},r.prototype.addHeadItem=function(e){this.head.push(e)},r.prototype.getHeadByAttr=function(e,t,a){return this.head.filter(function(o){return o.attributes&&o.attributes[e]==t&&(!a||a===o.tag)})[0]},r.prototype.removeHeadByAttr=function(e,t,a){var o=this.getHeadByAttr(e,t,a),i=this.head.indexOf(o);i>=0&&this.head.splice(i,1)},r.prototype.addLink=function(e){var t="link";!this.getHeadByAttr("href",e,t)&&this.addHeadItem({tag:t,attributes:{href:e,rel:"stylesheet"}})},r.prototype.removeLink=function(e){this.removeHeadByAttr("href",e,"link")},r.prototype.addScript=function(e){var t="script";!this.getHeadByAttr("src",e,t)&&this.addHeadItem({tag:t,attributes:{src:e}})},r.prototype.removeScript=function(e){this.removeHeadByAttr("src",e,"script")},r.prototype.getPage=function(){var e;return(e=this.collection)===null||e===void 0?void 0:e.page},r.prototype._emitUpdated=function(e){e===void 0&&(e={}),this.em.trigger("frame:updated",$S({frame:this},e))},r.prototype._emitUnload=function(){this._emitWithEditor(Oy.frameUnload,{frame:this})},r.prototype._emitWithEditor=function(e,t){[this.em,this].forEach(function(a){return a?.trigger(e,t)})},r.prototype.hasAutoHeight=function(){var e=this.attributes.height;return!!(e==="auto"||this.config.infiniteCanvas)},r.prototype.toJSON=function(e){e===void 0&&(e={});var t=of.A.prototype.toJSON.call(this,e),a=(0,_e.result)(this,"defaults");return e.fromUndo&&delete t.component,delete t.styles,delete t.changesCount,t[yE]&&delete t.width,t[xE]&&delete t.height,t.refFrame&&(t.refFrame=t.refFrame.id,delete t.component),(0,_e.forEach)(t,function(o,i){i.indexOf("_")===0&&delete t[i]}),(0,_e.forEach)(a,function(o,i){t[i]===o&&delete t[i]}),(0,_e.forEach)(["attributes","head"],function(o){(0,_e.isEmpty)(t[o])&&delete t[o]}),t},r})(of.A);const rA=aV;var oV=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),iV=(function(s){oV(r,s);function r(e,t){t===void 0&&(t=[]);var a=s.call(this,e,t,rA)||this;return a.loadedItems=0,a.itemsToLoad=0,(0,_e.bindAll)(a,"itemLoaded"),a.on("add",a.onAdd),a.on("reset",a.onReset),a.on("remove",a.onRemove),a.forEach(function(o){return a.onAdd(o)}),a}return r.prototype.onAdd=function(e){this.module.framesById[e.id]=e},r.prototype.onReset=function(e,t){var a=this,o=t?.previousModels||[];o.map(function(i){return a.onRemove(i)})},r.prototype.onRemove=function(e){e.onRemove(),delete this.module.framesById[e.id]},r.prototype.initRefs=function(){this.forEach(function(e){return e.initRefs()})},r.prototype.itemLoaded=function(){this.loadedItems++,this.loadedItems>=this.itemsToLoad&&(this.trigger("loaded:all"),this.listenToLoadItems(!1))},r.prototype.listenToLoad=function(){this.loadedItems=0,this.itemsToLoad=this.length,this.listenToLoadItems(!0)},r.prototype.listenToLoadItems=function(e){var t=this;this.forEach(function(a){return a[e?"on":"off"]("loaded",t.itemLoaded)})},r})(aj);const nA=iV;var lV=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),cV=(function(s){lV(r,s);function r(e){var t=this,a=e.em,o=e.config,i=o.scripts,l=o.styles;return t=s.call(this,e,{scripts:i,styles:l})||this,t.set("frames",new nA(e)),t.on("change:zoom",t.onZoomChange),t.on("change:x change:y",t.onCoordsChange),t.on("change:pointer change:pointerScreen",t.onPointerChange),t.listenTo(a,"change:device ".concat(tA.update),t.updateDevice),t.listenTo(a,zS.select,t._pageUpdated),t}return r.prototype.defaults=function(){return{frame:"",frames:[],rulers:!1,zoom:100,x:0,y:0,scripts:[],styles:[],pointer:Sr.lK,pointerScreen:Sr.lK}},Object.defineProperty(r.prototype,"frames",{get:function(){return this.get("frames")},enumerable:!1,configurable:!0}),r.prototype.init=function(){var e=this.em,t=e.Pages._initPage();this.set("frames",t.getFrames()),this.updateDevice({frame:t.getMainFrame()})},r.prototype._pageUpdated=function(e,t){var a=this.em;a.setSelected(),a.get("readyCanvas")&&a.stopDefault(),t?.getFrames().map(function(o){o.disable(),o._emitUnload()}),this.set("frames",e.getFrames()),this.updateDevice({frame:e.getMainFrame()})},r.prototype.updateDevice=function(e){e===void 0&&(e={});var t=this.em,a=t.getDeviceModel(),o=e.frame||t.getCurrentFrameModel();if(o&&a){var i=a.attributes,l=i.width,c=i.height,d=i.minHeight;o.set({width:l,height:c,minHeight:d},{noUndo:1})}},r.prototype.onZoomChange=function(e,t,a){var o=this,i=o.em,l=o.module,c=this.get("zoom");c<1&&this.set("zoom",1),i.trigger(l.events.zoom,{options:a})},r.prototype.onCoordsChange=function(){var e=this,t=e.em,a=e.module;t.trigger(a.events.coords)},r.prototype.onPointerChange=function(){var e=this,t=e.em,a=e.module;t.trigger(a.events.pointer)},r.prototype.getPointerCoords=function(e){e===void 0&&(e=Sr.x2.World);var t=this.attributes,a=t.pointer,o=t.pointerScreen;return e===Sr.x2.World?a:o},r})(of.A);const dV=cV;var Sl=fs(179),bs=fs(2225),uV=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),fV=(function(s){uV(r,s);function r(e,t){t===void 0&&(t=[]);var a=s.call(this,e,t,Sl.A)||this;a.on("add",a.onAdd),a.on("change",a.onChange),a.on("remove",a.onRemove);var o=a.em;a.refreshDbn=(0,_e.debounce)(function(){return a.refresh()},0);var i="".concat(bs.I.resize," styleable:change ").concat(bs.I.input," ").concat(bs.I.update," frame:updated undo redo");return a.listenTo(o,i,function(){return a.refreshDbn()}),a}return Object.defineProperty(r.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"events",{get:function(){return this.module.events},enumerable:!1,configurable:!0}),r.prototype.refresh=function(){var e=this,t=e.em,a=e.events;t.trigger(a.spot)},r.prototype.onAdd=function(e){this.__trgEvent(this.events.spotAdd,{spot:e})},r.prototype.onChange=function(e){this.__trgEvent(this.events.spotUpdate,{spot:e})},r.prototype.onRemove=function(e){this.__trgEvent(this.events.spotRemove,{spot:e})},r.prototype.__trgEvent=function(e,t){var a=this.module,o=a.em;o.trigger(e,t),this.refreshDbn()},r})(aj);const pV=fV;var hV=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),mV=(function(s){hV(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"pfx",{get:function(){return this.ppfx+this.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ppfx",{get:function(){return this.em.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"module",{get:function(){var e,t;return(t=(e=this.model)===null||e===void 0?void 0:e.module)!==null&&t!==void 0?t:this.collection.module},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"config",{get:function(){return this.module.config},enumerable:!1,configurable:!0}),r.prototype.preinitialize=function(e){this.className=""},r})(Sr.Ss);const El=mV;var Ar=fs(6294),gV=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),yV=(function(s){gV(r,s);function r(e,t){e===void 0&&(e={}),t===void 0&&(t=!1);var a=s.call(this,e)||this;return a.itemsView="",a.itemType="type",a.reuseView=!1,a.viewCollection=[],t&&a.listenTo(a.collection,"add",a.addTo),a}return r.prototype.addTo=function(e){this.add(e)},r.prototype.itemViewNotFound=function(e){},r.prototype.add=function(e,t){var a=this,o=a.reuseView,i=a.viewCollection,l=t||null,c=e.get(this.itemType),d;e.view&&o?d=e.view:d=this.renderView(e,c),i.push(d);var p=d.render().el;l?l.appendChild(p):this.$el.append(p)},r.prototype.render=function(){var e=this,t=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(a){return e.add(a,t)}),this.$el.append(t),this.onRender(),this},r.prototype.onRender=function(){},r.prototype.onRemoveBefore=function(e,t){},r.prototype.onRemove=function(e,t){},r.prototype.remove=function(e){e===void 0&&(e={});var t=this.viewCollection;return this.onRemoveBefore(t,e),this.clearItems(),Sr.Ss.prototype.remove.apply(this,e),this.onRemove(t,e),this},r.prototype.clearItems=function(){this.viewCollection},r})(El);const xV=yV;var vm;(function(s){s.mount="css:mount",s.mountBefore="css:mount:before"})(vm||(vm={}));var vV=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),bV=(function(s){vV(r,s);function r(e){e===void 0&&(e={});var t=s.call(this,e)||this;t.config=e.config||{};var a=t.model;return t.listenTo(a,"change",t.render),t.listenTo(a,"destroy remove",t.remove),t.listenTo(a.get("selectors"),"change",t.render),a.setView(t),t}return Object.defineProperty(r.prototype,"frameView",{get:function(){return this.config.frameView},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"em",{get:function(){return this.model.em},enumerable:!1,configurable:!0}),r.prototype.remove=function(){return s.prototype.remove.call(this),this.model.removeView(this),this},r.prototype.updateStyles=function(){this.render()},r.prototype.tagName=function(){return"style"},r.prototype.render=function(){var e=this,t=e.model,a=e.el,o=e.em,i=t.get("important"),l=t.toCSS({important:i}),c={rule:t,ruleView:this,css:l};return o?.trigger(vm.mountBefore,c),a.innerHTML=c.css,o?.trigger(vm.mount,c),this},r})(Sr.Ss);const z2=bV;var wV=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),jV=(function(s){wV(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype._createElement=function(){return document.createTextNode("")},r.prototype.render=function(){var e=this.model,t=e.get("important");return this.el.textContent=e.getDeclaration({important:t}),this},r})(z2);const CV=jV;var SV=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),X1=function(s,r){return"".concat(s).concat(r?"-".concat(parseFloat(r)):"")},NV=(function(s){SV(r,s);function r(e){var t=s.call(this,e)||this;(0,_e.bindAll)(t,"sortRules");var a=e.config||{};t.atRules={},t.config=a,t.em=a.em,t.pfx=a.stylePrefix||"",t.className=t.pfx+"rules";var o=t.collection;return t.listenTo(o,"add",t.addTo),t.listenTo(o,"reset",t.render),t}return r.prototype.addTo=function(e){this.addToCollection(e)},r.prototype.addToCollection=function(e,t){if(this.renderStarted){var a=t||null,o=this.config,i={model:e,config:o},l,c;if(e.get("atRuleType")==="keyframes"){var d=e.getAtRule(),p=this.atRules[d];if(!p){var h=document.createElement("style");p=document.createTextNode(""),h.appendChild(document.createTextNode("".concat(d,"{"))),h.appendChild(p),h.appendChild(document.createTextNode("}")),this.atRules[d]=p,l=h}c=new CV(i),p.appendData(c.render().el.textContent)}else c=new z2(i),l=c.render().el;var g=this.className,y=e.get("mediaText"),b=X1(g),v=b;if(y&&(v=X1(g,this.getMediaWidth(y))),l){var w=a||this.el,C=void 0;try{C=w.querySelector("#".concat(v))}catch{}C||(C=w.querySelector("#".concat(b))),C?.appendChild(l)}return l}},r.prototype.getMediaWidth=function(e){return e&&e.replace("(".concat(this.em.getConfig().mediaCondition,": "),"").replace(")","")},r.prototype.sortRules=function(e,t){var a=this.em,o=(a.getConfig().mediaCondition||"").indexOf("min-width")!==-1;if(!o)return 0;var i=o?e:t,l=o?t:e;return i-l},r.prototype.render=function(){var e=this;this.renderStarted=!0,this.atRules={};var t=this,a=t.em,o=t.$el,i=t.collection,l=this.className,c=document.createDocumentFragment();o.empty();var d=a.Devices.getAll().pluck("priority").sort(this.sortRules);return d.every(function(p){return p})&&d.unshift(0),d.forEach(function(p){return c.appendChild((0,Ar.a_)("div",{id:X1(l,p)}))}),i.each(function(p){return e.addToCollection(p,c)}),o.append(c),o.attr("class",l),this},r})(Sr.Ss);const US=NV;var Ka;(function(s){s.variable="data-variable",s.condition="data-condition",s.conditionTrue="data-condition-true-content",s.conditionFalse="data-condition-false-content",s.collection="data-collection",s.collectionItem="data-collection-item"})(Ka||(Ka={}));var Ky;(function(s){s.rootData="__rootData"})(Ky||(Ky={}));var VS;(function(s){s.string="string",s.number="number",s.boolean="boolean",s.date="date",s.json="json",s.relation="relation"})(VS||(VS={}));var qd;(function(s){s.add="data:add",s.addBefore="data:add:before",s.remove="data:remove",s.removeBefore="data:remove:before",s.update="data:update",s.path="data:path",s.pathSource="data:pathSource:",s.providerLoad="data:provider:load",s.providerLoadBefore="data:provider:load:before",s.providerLoadError="data:provider:load:error",s.providerLoadAll="data:provider:loadAll",s.providerLoadAllBefore="data:provider:loadAll:before",s.all="data"})(qd||(qd={}));var kV=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),ub=function(){return ub=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},ub.apply(this,arguments)},ac=Ka.variable,_V=(function(s){kV(r,s);function r(e,t){var a=s.call(this,e,t)||this;return a.em=t.em,a.collectionsStateMap=t.collectionsStateMap,a}return r.prototype.defaults=function(){return{type:ac,defaultValue:"",path:"",collectionId:void 0,variableType:void 0,asPlainText:void 0}},Object.defineProperty(r.prototype,"path",{get:function(){var e;return(e=this.get("path"))!==null&&e!==void 0?e:""},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"defaultValue",{get:function(){var e;return(e=this.get("defaultValue"))!==null&&e!==void 0?e:""},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"collectionId",{get:function(){return this.get("collectionId")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"variableType",{get:function(){return this.get("variableType")},enumerable:!1,configurable:!0}),r.prototype.resolvesFromCollection=function(){return!!this.collectionId},r.prototype.updateCollectionsStateMap=function(e){this.collectionsStateMap=e,this.trigger("change")},r.prototype.getResolverPath=function(){var e;if(this.resolvesFromCollection()){var t=this.resolveCollectionVariable();return wm(t)?(e=t.path)!==null&&e!==void 0?e:"":!1}return this.path},r.prototype.toJSON=function(e){var t=this.defaults(),a=s.prototype.toJSON.call(this,e),o=Object.fromEntries(Object.entries(a).filter(function(i){var l=i[0],c=i[1];return c!==t[l]}));return ub(ub({},o),{type:ac})},r.prototype.getDataValue=function(){var e={em:this.em,collectionsStateMap:this.collectionsStateMap};return r.resolveDataResolver({path:this.path,defaultValue:this.defaultValue,collectionId:this.collectionId,variableType:this.variableType},e)},r.resolveDataSourceVariable=function(e,t){var a,o;return t.em.DataSources.getValue((a=e.path)!==null&&a!==void 0?a:"",(o=e.defaultValue)!==null&&o!==void 0?o:"")},r.resolveDataResolver=function(e,t){var a,o,i,l;if(e.collectionId){var c=r.resolveCollectionVariable(e,t);return wm(c)?r.resolveDataSourceVariable({path:(a=c.path)!==null&&a!==void 0?a:"",defaultValue:(o=e.defaultValue)!==null&&o!==void 0?o:""},{em:t.em}):c}return r.resolveDataSourceVariable({path:(i=e.path)!==null&&i!==void 0?i:"",defaultValue:(l=e.defaultValue)!==null&&l!==void 0?l:""},{em:t.em})},r.prototype.resolveCollectionVariable=function(){var e=this,t=e.em,a=e.collectionsStateMap;return r.resolveCollectionVariable(this.attributes,{em:t,collectionsStateMap:a})},r.resolveCollectionVariable=function(e,t){var a,o,i=e.collectionId,l=i===void 0?"":i,c=e.variableType,d=e.path,p=e.defaultValue,h=p===void 0?"":p,g=t.em,y=t.collectionsStateMap;if(!y)return h;var b=y[l];if(!b)return h;if(!c)return g.logError("Missing collection variable type for collection: ".concat(l)),h;if(c==="currentItem")return(a=r.resolveCurrentItem(b,d,l,g))!==null&&a!==void 0?a:h;var v=b;return(o=v[c])!==null&&o!==void 0?o:h},r.resolveCurrentItem=function(e,t,a,o){var i=e.currentItem;if(!i){o.logError("Current item is missing for collection: ".concat(a));return}if(i.type===ac){var l=i.path?"".concat(i.path,".").concat(t):t;return{type:ac,path:l}}if(!(t&&!i[t]))return t?i[t]:i},r})(Sr.Kx);const Rm=_V;var EV=(function(){function s(r){var e=this;this.listeners=[],this.model=new Sr.Kx,this.onChange=function(){var t=e.resolver.getDataValue();e.onUpdate(t)},this.em=r.em,this.resolver=r.resolver,this.onUpdate=r.onUpdate,this.listenToResolver()}return s.prototype.createListener=function(r,e,t){return t===void 0&&(t=this.onChange),{obj:r,event:e,callback:t}},s.prototype.listenToResolver=function(){var r=this,e=r.resolver,t=r.model;this.removeListeners();var a=[],o=e.attributes.type;switch(o){case ac:a=this.listenToDataVariable(e);break;case bm:a=this.listenToConditionalVariable(e);break}a.forEach(function(i){return t.listenTo(i.obj,i.event,i.callback)}),this.listeners=a},s.prototype.listenToConditionalVariable=function(r){return[{obj:r,event:Vv,callback:this.onChange}]},s.prototype.listenToDataVariable=function(r){var e=this,t=this.em,a=[],o=function(){e.listenToResolver(),e.onChange()};a.push(this.createListener(r,"change",o));var i=r.getResolverPath();if(!i)return a;var l=(0,Zt.stringToPath)(i||"").join("."),c=t.DataSources.fromPath(i),d=c[0],p=c[1];return d&&a.push(this.createListener(d.records,"add remove reset",o)),p&&a.push(this.createListener(p,"change")),a.push(this.createListener(t.DataSources.all,"add remove reset",o),this.createListener(t,"".concat(qd.path,":").concat(l)),this.createListener(t,qd.path,function(h){var g=h.path;g!==i&&g.startsWith(i)&&e.onChange()})),a},s.prototype.removeListeners=function(){var r=this;this.listeners.forEach(function(e){return r.model.stopListening(e.obj,e.event,e.callback)}),this.listeners=[]},s.prototype.destroy=function(){this.removeListeners()},s})();const Ox=EV;var bE=(function(){function s(r,e,t){this.operator=r,this.statements=e,this.opts=t}return s.prototype.evaluate=function(){var r=this,e=this.statements.map(function(t){var a=new sA({condition:t},r.opts);return a.evaluate()});return this.operator.evaluate(e)},s})(),oj=(function(){function s(r,e){this.operationString=r,this.em=e.em}return s.prototype.getOperations=function(){return KV(this.operationsEnum)},s})(),TV=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Yy;(function(s){s.equals="equals",s.isTruthy="isTruthy",s.isFalsy="isFalsy",s.isDefined="isDefined",s.isNull="isNull",s.isUndefined="isUndefined",s.isArray="isArray",s.isObject="isObject",s.isString="isString",s.isNumber="isNumber",s.isBoolean="isBoolean",s.isDefaultValue="isDefaultValue"})(Yy||(Yy={}));var OV=(function(s){TV(r,s);function r(){var e=s!==null&&s.apply(this,arguments)||this;return e.operationsEnum=Yy,e}return r.prototype.evaluate=function(e,t){var a;switch(this.operationString){case"equals":return e===t;case"isTruthy":return!!e;case"isFalsy":return!e;case"isDefined":return e!=null;case"isNull":return e===null;case"isUndefined":return e===void 0;case"isArray":return Array.isArray(e);case"isObject":return typeof e=="object"&&e!==null;case"isString":return typeof e=="string";case"isNumber":return typeof e=="number";case"isBoolean":return typeof e=="boolean";case"isDefaultValue":return e instanceof Rm&&e.get("defaultValue")===t;default:return(a=this.em)===null||a===void 0||a.logWarning("Unsupported generic operation: ".concat(this.operationString)),!1}},r})(oj),PV=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),pp;(function(s){s.and="and",s.or="or",s.xor="xor"})(pp||(pp={}));var AV=(function(s){PV(r,s);function r(){var e=s!==null&&s.apply(this,arguments)||this;return e.operationsEnum=pp,e}return r.prototype.evaluate=function(e){if(!e?.length)return!1;switch(this.operationString){case pp.and:return e.every(Boolean);case pp.or:return e.some(Boolean);case pp.xor:return e.filter(Boolean).length===1;default:return this.em.logWarning("Unsupported boolean operation: ".concat(this.operationString)),!1}},r})(oj),MV=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),zc;(function(s){s.greaterThan=">",s.lessThan="<",s.greaterThanOrEqual=">=",s.lessThanOrEqual="<=",s.equals="=",s.notEquals="!="})(zc||(zc={}));var IV=(function(s){MV(r,s);function r(){var e=s!==null&&s.apply(this,arguments)||this;return e.operationsEnum=zc,e}return r.prototype.evaluate=function(e,t){if(typeof e!="number")return!1;switch(this.operationString){case zc.greaterThan:return e>t;case zc.lessThan:return e<t;case zc.greaterThanOrEqual:return e>=t;case zc.lessThanOrEqual:return e<=t;case zc.equals:return e===t;case zc.notEquals:return e!==t;default:return this.em.logWarning("Unsupported number operation: ".concat(this.operationString)),!1}},r})(oj),RV=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),gl;(function(s){s.contains="contains",s.startsWith="startsWith",s.endsWith="endsWith",s.matchesRegex="matchesRegex",s.equalsIgnoreCase="equalsIgnoreCase",s.trimEquals="trimEquals"})(gl||(gl={}));var DV=(function(s){RV(r,s);function r(){var e=s!==null&&s.apply(this,arguments)||this;return e.operationsEnum=gl,e}return r.prototype.evaluate=function(e,t){if(typeof e!="string")return!1;switch(this.operationString){case gl.contains:return e.includes(t);case gl.startsWith:return e.startsWith(t);case gl.endsWith:return e.endsWith(t);case gl.matchesRegex:return t||this.em.logWarning("Regex pattern must be provided."),new RegExp(t??"").test(e);case gl.equalsIgnoreCase:return e.toLowerCase()===t.toLowerCase();case gl.trimEquals:return e.trim()===t.trim();default:return this.em.logWarning("Unsupported string operation: ".concat(this.operationString)),!1}},r})(oj),LV=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),sA=(function(s){LV(r,s);function r(e,t){var a,o=s.call(this,e)||this;return o.collectionsStateMap={},o.em=t.em,o.collectionsStateMap=(a=t.collectionsStateMap)!==null&&a!==void 0?a:{},o}return r.prototype.evaluate=function(){var e=this.get("condition");if(!e||(0,_e.isBoolean)(e))return!!e;var t=this.getOperator();return t?t.evaluate(this.getResolvedLeftValue(),this.getResolvedRightValue()):!1},r.prototype.getDependentDataVariables=function(){var e=this.get("condition");return e?this.extractDataVariables(e):[]},r.prototype.getOperations=function(){var e=this.getOperator();return!e||e instanceof bE?[]:e.getOperations()},r.prototype.updateCollectionStateMap=function(e){this.collectionsStateMap=e},r.prototype.getOperator=function(){var e={em:this.em,collectionsStateMap:this.collectionsStateMap},t=this.get("condition");if(!(!t||(0,_e.isBoolean)(t))){var a;if(this.isLogicGroup(t)){var o=t.logicalOperator,i=t.statements,l=new AV(o,e);a=new bE(l,i,e)}if(this.isExpression(t)){var c=t.left,l=t.operator,d=pb(c,e);a=this.resolveOperator(d,l)}return a}},r.prototype.resolveOperator=function(e,t){var a=this.em;if(this.isOperatorInEnum(t,Yy))return new OV(t,{em:a});if(typeof e=="number")return new IV(t,{em:a});if(typeof e=="string")return new DV(t,{em:a})},r.prototype.extractDataVariables=function(e){var t=this,a=[];return this.isExpression(e)?(wm(e.left)&&a.push(e.left),wm(e.right)&&a.push(e.right)):this.isLogicGroup(e)&&e.statements.forEach(function(o){return a.push.apply(a,t.extractDataVariables(o))}),a},r.prototype.isLogicGroup=function(e){return e&&typeof e.logicalOperator<"u"&&Array.isArray(e.statements)},r.prototype.isExpression=function(e){return e&&typeof e.left<"u"&&typeof e.operator=="string"},r.prototype.isOperatorInEnum=function(e,t){return Object.values(t).includes(e)},r.prototype.resolveExpressionSide=function(e){var t=this.get("condition"),a=this,o=a.em,i=a.collectionsStateMap;if(!t||typeof t=="boolean")return t;if(t&&typeof t=="object"&&e in t){var l=t[e];return pb(l,{em:o,collectionsStateMap:i})}},r.prototype.getResolvedLeftValue=function(){return this.resolveExpressionSide("left")},r.prototype.getResolvedRightValue=function(){return this.resolveExpressionSide("right")},r.prototype.toJSON=function(e){var t=this.get("condition");if(typeof t=="object"){var a=JSON.parse(JSON.stringify(t));return a}return t},r})(Sr.Kx),FV=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),bm="data-condition",BV="data-condition-evaluation-changed",Vv="data-condition-output-changed",aA=(function(s){FV(r,s);function r(e,t){var a,o=s.call(this,e,t)||this;o.collectionsStateMap={},o.resolverListeners=[],o._previousEvaluationResult=null,o.em=t.em,o.collectionsStateMap=(a=t.collectionsStateMap)!==null&&a!==void 0?a:{};var i=e.condition,l=i===void 0?{}:i,c=new sA({condition:l},{em:o.em});return o._conditionEvaluator=c,o.listenToDataVariables(),o.listenToPropsChange(),o}return r.prototype.defaults=function(){return{type:bm,condition:{left:"",operator:gl.equalsIgnoreCase,right:""},ifTrue:{},ifFalse:{}}},r.prototype.getCondition=function(){return this._conditionEvaluator.get("condition")},r.prototype.getIfTrue=function(){return this.get("ifTrue")},r.prototype.getIfFalse=function(){return this.get("ifFalse")},r.prototype.getOperations=function(){return this._conditionEvaluator.getOperations()},r.prototype.setCondition=function(e){this.set("condition",e),this._conditionEvaluator.set("condition",e),this.trigger(Vv,this.getDataValue())},r.prototype.setIfTrue=function(e){this.set("ifTrue",e)},r.prototype.setIfFalse=function(e){this.set("ifFalse",e)},r.prototype.isTrue=function(){return this._conditionEvaluator.evaluate()},r.prototype.getDataValue=function(e){e===void 0&&(e=!1);var t=this,a=t.em,o=t.collectionsStateMap,i={em:a,collectionsStateMap:o},l=this.getIfTrue(),c=this.getIfFalse(),d=this.isTrue();return e?d?l:c:pb(d?l:c,i)},r.prototype.resolvesFromCollection=function(){return!1},r.prototype.updateCollectionsStateMap=function(e){this.collectionsStateMap=e,this._conditionEvaluator.updateCollectionStateMap(e),this.listenToDataVariables(),this.emitConditionEvaluationChange()},r.prototype.listenToPropsChange=function(){var e=this;this.on("change:condition",this.handleConditionChange.bind(this)),this.on("change:condition change:ifTrue change:ifFalse",function(){e.listenToDataVariables()})},r.prototype.handleConditionChange=function(){this.setCondition(this.get("condition"))},r.prototype.listenToDataVariables=function(){this.cleanupListeners(),this.setupConditionDataVariableListeners(),this.setupOutputDataVariableListeners()},r.prototype.setupConditionDataVariableListeners=function(){var e=this;this._conditionEvaluator.getDependentDataVariables().forEach(function(t){e.addListener(t,function(){e.emitConditionEvaluationChange()})})},r.prototype.setupOutputDataVariableListeners=function(){var e=this.isTrue();this.setupOutputVariableListener(this.getIfTrue(),e),this.setupOutputVariableListener(this.getIfFalse(),!e)},r.prototype.setupOutputVariableListener=function(e,t){var a=this;wm(e)&&this.addListener(e,function(){t&&a.trigger(Vv,e)})},r.prototype.addListener=function(e,t){var a=new Ox({em:this.em,resolver:new Rm(e,{em:this.em,collectionsStateMap:this.collectionsStateMap}),onUpdate:t});this.resolverListeners.push(a)},r.prototype.emitConditionEvaluationChange=function(){var e=this.isTrue();this._previousEvaluationResult!==e&&(this._previousEvaluationResult=e,this.trigger(BV,e),this.emitOutputValueChange())},r.prototype.emitOutputValueChange=function(){var e=this.getDataValue();this.trigger(Vv,e)},r.prototype.cleanupListeners=function(){this.resolverListeners.forEach(function(e){return e.destroy()}),this.resolverListeners=[]},r.prototype.toJSON=function(){var e=this.getIfTrue(),t=this.getIfFalse();return{type:bm,condition:this._conditionEvaluator.toJSON(),ifTrue:e,ifFalse:t}},r})(Sr.Kx),gy="dataResolver",ki=function(){return ki=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},ki.apply(this,arguments)},oA=function(s,r,e){if(e||arguments.length===2)for(var t=0,a=r.length,o;t<a;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return s.concat(o||Array.prototype.slice.call(r))},hp=function(s){return(0,_e.isArray)(s.get(oi))},fb=function(s){return!!s.get(_i)},cc=function(s){return!!(hp(s)||fb(s))},Tp=function(s){var r=s.parent();return cc(s)&&(!r||!cc(r))},Xg=function(s){s.__symbReady||(s.on("change",s.__upSymbProps),s.__symbReady=!0)},_l=function(s){var r=s.get(_i);if(r&&(0,_e.isString)(r)){var e=s.__getAllById()[r];e?(r=e,s.set(_i,e)):r=0}return r||void 0},Oi=function(s){var r=s?.get(oi);return r&&(0,_e.isArray)(r)&&(r.forEach(function(e,t){e&&(0,_e.isString)(e)&&(r[t]=s.__getAllById()[e])}),r=r.filter(function(e){return e&&!(0,_e.isString)(e)})),r||void 0},Zy=function(s,r){r===void 0&&(r="");var e=s?.get(mp),t=r.split(":")[0],a=r!==t?[r,t]:[r];return e===!0||(0,_e.isArray)(e)&&a.some(function(o){return e.indexOf(o)>=0})},Vd=function(s,r){r===void 0&&(r={});var e=[],t=r.changed;if(r.fromInstance||r.noPropagate||r.fromUndo||t&&Zy(s,t))return e;var a=Oi(s)||[],o=_l(s),i=o?oA([o],Oi(o)||[],!0):a;return e=i.filter(function(l){return l!==s}).filter(function(l){return!(t&&Zy(l,t))}),e},Xy=function(s,r){for(var e=s,t=s.parent(r);t&&cc(t);)e=t,t=t.parent(r);return e},ij=function(s,r){r===void 0&&(r={});var e=_l(s),t=e&&Oi(e);!r.skipRefs&&t&&e.set(oi,t.filter(function(a){return a!==s})),s.set(_i,0),s.components().forEach(function(a){return ij(a,r)})},Py=function(s,r,e,t){t===void 0&&(t={});var a=_l(s),o=Oi(s);!a&&!o||s.em.log(r,{model:s,toUp:e,context:"symbols",opts:t})},zV=function(s,r){r===void 0&&(r={});var e=s.changedAttributes();if(e){var t=s.dataResolverWatchers.getProps(e);if($V(t),!(0,Zt.isEmptyObj)(t)){var a=Vd(s,r);t=wE(t,s),Py(s,"props",a,{opts:r,changed:t}),a.forEach(function(o){var i=wE(t,o);o.set(i,ki({fromInstance:s},r))})}}},$V=function(s){var r,e,t=["status","open",oi,_i,mp];t.forEach(function(a){return delete s[a]}),(r=s.attributes)===null||r===void 0||delete r.id,(0,Zt.isEmptyObj)((e=s.attributes)!==null&&e!==void 0?e:{})&&delete s.attributes},wE=function(s,r){var e=ki({},s);return(0,_e.keys)(s).forEach(function(t){HV(s,t,r)||delete e[t]}),e},UV=function(s){return s?Object.values(s).some(function(r){return!!r?.collectionId}):!1},VV=function(s,r){var e;switch(r){case"attributes":case"style":return UV(s[r]);default:return!!(!((e=s[r])===null||e===void 0)&&e.collectionId)}},HV=function(s,r,e){var t=VV(s,r);return!Zy(e,r)||t},WV=function(s,r){r===void 0&&(r={});var e=Vd(s,r);Py(s,"classes",e,{opts:r}),e.forEach(function(t){t.set("classes",s.get("classes"),{fromInstance:s})}),s.__changesUp(r)},iA=function(s,r,e,t){var a=t||e||{},o=a.fromInstance,i=a.fromUndo,l={fromInstance:o,fromUndo:i},c=r.opt.temporary;if(t)if(t.add){var y=[],b=!!Oi(s),p=Vd(s,ki(ki({},l),{changed:"components:add"}));if(p.length){var v=_l(r);y=Oi(v||r)||[],y=oA([],y,!0),y.push(v||r)}!c&&Py(s,"add",p,{opts:t,addedInstances:y.map(function(G){return G.cid}),added:r.cid}),p.forEach(function(G){var $=Xy(G),z=y.filter(function(M){var q=Xy(M,{prev:1});return $&&q&&q===$})[0],Y=z||r.clone({symbol:!0,symbolInv:b});G.append(Y,ki({fromInstance:s},t))})}else{var w=_l(r);if(w&&!t.temporary&&w.set(oi,Oi(w).filter(function(B){return B!==r})),!Tp(r)&&!t.skipRefsUp){var C="components:remove",k=t.index,N=r.parent(),O=ki({fromInstance:r},t),R=Tp(r),L=function(G){var $=G.parent();$&&!Zy($,C)&&G.remove(O)},p=Zy(N,C)?[]:Vd(r,l);R&&(p=N&&Vd(N,ki(ki({},l),{changed:C})),L=function(G){var $=G.components().at(k);$&&$.remove(ki({fromInstance:N},O))}),!c&&Py(s,"remove",p,{opts:t,removed:r.cid,isSymbNested:R}),p.forEach(L)}}else{var d=r,p=Vd(s,ki(ki({},l),{changed:"components:reset"})),h=d.models,g=new Set;Py(s,"reset",p,{components:h}),p.forEach(function(B){var G=B.components(),$=h.map(function(z,Y){return s.get(gy)?z.clone({symbol:cc(z)}):!cc(z)||g.has(z)?(g.add(z),z.clone({symbol:!0})):G.at(Y)});G.reset($,ki({fromInstance:s},e))})}s.__changesUp(a)},qV="id";function HS(s){return typeof s=="object"&&[ac,bm].includes(s?.type)}function wm(s){return s?.type===ac}function pb(s,r){return HS(s)?(wm(s)&&Rm.resolveDataResolver(s,r),cA(s,r)):s}function lA(s,r){var e,t=s.type,a;switch(t){case ac:a=new Rm(s,r);break;case bm:{a=new aA(s,r);break}default:(e=r.em)===null||e===void 0||e.logWarning("Unsupported resolver type: ".concat(t));return}return a}function cA(s,r){var e=lA(s,r);return e?.getDataValue()}var GV=function(s){return!!s&&[Ka.collectionItem,Ka.conditionTrue,Ka.conditionFalse].includes(s)};function KV(s){return Object.keys(s).filter(function(r){return isNaN(Number(r))}).map(function(r){return s[r]})}function YV(s){var r=s.collectionsStateMap;if(!r)return!1;var e=Object.keys(r);if(!e.length)return!1;var t=_l(s);if(!t||t===s)return!1;var a=t.collectionsStateMap,o=Object.keys(a),i=o.every(function(l){return e.includes(l)});return i}function ZV(s){var r=_l(s);return r?r.getId():""}function XV(s){var r=YV(s),e=r?ZV(s):null;return{shouldSync:r,itemId:e}}var dA="text/html",QV=dA;const JV=(function(s,r){r===void 0&&(r={});var e=new DOMParser,t=r.htmlType||QV,a=t===dA,o=a?s:"<div>".concat(s,"</div>"),i=e.parseFromString(o,t),l;if(a){if(r.asDocument)return i;var c=i.head,d=i.body,p=c.querySelectorAll("script");(0,_e.each)(p,function(g){return d.appendChild(g)});var h=[];(0,_e.each)(c.children,function(g){return h.push(g)}),(0,_e.each)(h,function(g,y){return d.insertBefore(g,d.children[y])}),l=d}else l=i.firstChild;return l});var Qu;(function(s){s.html="parse:html",s.htmlRoot="parse:html:root",s.htmlBefore="parse:html:before",s.css="parse:css",s.cssBefore="parse:css:before",s.all="parse"})(Qu||(Qu={}));var Jl=function(){return Jl=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Jl.apply(this,arguments)},eH="data-gjs-",tH=function(s,r){return r===void 0&&(r={}),{compTypes:[],modelAttrStart:eH,getPropAttribute:function(e,t){var a=e.replace(this.modelAttrStart,""),o=t?.length||0,i=t?.substring(0,1),l=t?.substring(o-1),c=t==="true"?!0:t==="false"?!1:t;try{c=i=="{"&&l=="}"||i=="["&&l=="]"?JSON.parse(c):c}catch{}return{name:a,value:c}},splitPropsFromAttr:function(e){var t=this;e===void 0&&(e={});var a={},o={};return(0,_e.each)(e,function(i,l){if(l.indexOf(t.modelAttrStart)===0){var c=t.getPropAttribute(l,i);a[c.name]=c.value}else o[l]=i}),{props:a,attrs:o}},parseStyle:function(e){for(var t={};e.indexOf("/*")>=0;){var a=e.indexOf("/*"),o=e.indexOf("*/"),i=o>-1?o+2:void 0;e=e.replace(e.slice(a,i),"")}for(var l=e.split(";"),c=0,d=l.length;c<d;c++){var p=l[c].trim();if(p){var h=p.split(":"),g=h[0].trim(),y=h.slice(1).join(":").trim();t[g]?((0,_e.isArray)(t[g])||(t[g]=[t[g]]),t[g].push(y)):t[g]=y}}return t},parseClass:function(e){for(var t=[],a=e.split(" "),o=0,i=a.length;o<i;o++){var l=a[o].trim();l&&t.push(l)}return t},parseNodeAttr:function(e,t){for(var a,o,i=t||{},l=e.attributes||[],c=l.length,d=!!(!((a=r?.optionsHtml)===null||a===void 0)&&a.convertDataGjsAttributesHyphens),p=d&&!!i.type&&(0,_e.result)((o=s?.Components.getType(i.type))===null||o===void 0?void 0:o.model.prototype,"defaults")||{},h=0;h<c;h++){var g=l[h].nodeName,y=l[h].nodeValue;if(g=="style")i.style=this.parseStyle(y);else if(g=="class")i.classes=this.parseClass(y);else{if(g=="contenteditable")continue;if(g.indexOf(this.modelAttrStart)===0){var b=this.getPropAttribute(g,y),v=b.name;if(d&&!(v in p)){var w=(0,Ar._I)(v);v=w in p?w:v}i[v]=b.value}else y===""&&e[g]===!0&&(y=!0),i.attributes||(i.attributes={}),i.attributes[g]=y}}return i},detectNode:function(e,t){var a;t===void 0&&(t={});var o=this.compTypes,i={};if(o){var l=(a=e.getAttribute)===null||a===void 0?void 0:a.call(e,"".concat(this.modelAttrStart,"type"));if(l)i={type:l};else for(var c=0;c<o.length;c++){var d=o[c],p=d.model.isComponent(e,t);if(p){typeof p!="object"&&(p={type:d.id}),i=p;break}}}return i},parseNode:function(e,t){var a;t===void 0&&(t={});var o=((a=e.content)===null||a===void 0?void 0:a.childNodes)||e.childNodes,i=o.length,l=this.detectNode(e,t);if(!l.tagName){var c=e.tagName||"",d=e.namespaceURI||"";l.tagName=c&&d==="http://www.w3.org/1999/xhtml"?c.toLowerCase():c}if(l=this.parseNodeAttr(e,l),!i&&"".concat(e.outerHTML).slice(-2)==="/>"&&(l.void=!0),i&&!l.components&&!t.skipChildren){var p=o[0];i===1&&p.nodeType===3?(!l.type&&(l.type="text"),l.components={type:"textnode",content:p.nodeValue}):l.components=this.parseNodes(e,Jl(Jl({},t),{inSvg:t.inSvg||l.type==="svg"}))}var h=l.components;if(!l.type&&h?.length){for(var g=r.textTypes,y=g===void 0?[]:g,b=r.textTags,v=b===void 0?[]:b,w=!0,C=!1,k=0;k<h.length;k++){var N=h[k],O=N.type;if(!y.includes(O)&&!v.includes(N.tagName)){w=!1;break}O==="textnode"&&(C=!0)}w&&C&&(l.type="text")}return l},parseNodes:function(e,t){var a;t===void 0&&(t={});for(var o=[],i=((a=e.content)===null||a===void 0?void 0:a.childNodes)||e.childNodes,l=i.length,c=0;c<l;c++){var d=i[c],p=o[o.length-1],h=this.parseNode(d,t);if(h.type==="textnode"){if(p?.type==="textnode"){p.content+=h.content;continue}if(!t.keepEmptyTextNodes){var g=d.nodeValue||"",y=c===0||c===l-1,b=g.includes(`
`);if(g!=" "&&!g.trim()&&(y||b))continue}}!h.tagName&&(0,_e.isUndefined)(h.content)||o.push(h)}return o},parse:function(e,t,a){var o,i,l;a===void 0&&(a={});var c=s?.get("Config")||{},d=s?.Parser,p={html:[]},h=Jl(Jl(Jl({},r.optionsHtml),{htmlType:((o=r.optionsHtml)===null||o===void 0?void 0:o.htmlType)||r.htmlType}),a),g=Jl(Jl({},h),{asDocument:this.__checkAsDocument(e,h)}),y=Jl(Jl({},r),g),b=g.preParser,v=g.asDocument,w={input:(0,_e.isFunction)(b)?b(e,{editor:s?.getEditor()}):e};d?.__emitEvent(Qu.htmlBefore,w);var C=w.input,k=(0,_e.isFunction)(y.parserHtml)?y.parserHtml(C,g):JV(C,g),N=k,O=k;v&&(N=O.documentElement,p.doctype=(0,Ar.LJ)(O.doctype));var R=N.querySelectorAll("script"),L=R.length,B=(0,_e.isUndefined)(c.allowScripts)?g.allowScripts:c.allowScripts;if(!B)for(;L--;)(i=R[L].parentNode)===null||i===void 0||i.removeChild(R[L]);if((!g.allowUnsafeAttr||!g.allowUnsafeAttrValue)&&this.__sanitizeNode(N,g),t){for(var G=N.querySelectorAll("style"),$=G.length,z="";$--;)z=G[$].innerHTML+z,(l=G[$].parentNode)===null||l===void 0||l.removeChild(G[$]);z&&(p.css=t.parse(z))}d?.__emitEvent(Qu.htmlRoot,{input:C,root:N});var Y=[];if(v)p.head=this.parseNode(O.head,y),p.root=this.parseNodeAttr(N),Y=this.parseNode(O.body,y);else{var M=this.parseNodes(N,y);Y=M.length===1&&!y.returnArray?M[0]:M}return p.html=Y,d?.__emitEvent(Qu.html,{input:C,output:p,options:g}),p},__sanitizeNode:function(e,t){var a=this,o=e.attributes||[],i=e.childNodes||[],l=[];(0,_e.each)(o,function(c){var d=c.nodeName||"",p=c.nodeValue||"";!t.allowUnsafeAttr&&d.startsWith("on")&&l.push(d),!t.allowUnsafeAttrValue&&p.startsWith("javascript:")&&l.push(d)}),l.map(function(c){return e.removeAttribute(c)}),(0,_e.each)(i,function(c){return a.__sanitizeNode(c,t)})},__checkAsDocument:function(e,t){if((0,Zt.isDef)(t.asDocument))return t.asDocument;if((0,_e.isFunction)(t.detectDocument))return!!t.detectDocument(e);if(t.detectDocument)return e.toLowerCase().trim().startsWith("<!doctype")}}};const uA=tH;var hb=function(){return hb=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},hb.apply(this,arguments)},Q1=(function(){function s(r,e,t){this.model=r,this.updateFn=e,this.resolverListeners={},this.em=t.em}return s.prototype.bindModel=function(r){this.model=r},s.prototype.setDataValues=function(r,e){e===void 0&&(e={});var t=e.skipWatcherUpdates||e.fromDataSource;return t||this.removeListeners(),this.addDataValues(r,e)},s.prototype.addDataValues=function(r,e){if(e===void 0&&(e={}),!r)return{};var t=this.evaluateValues(r),a=e.skipWatcherUpdates||e.fromDataSource;return a||this.updateListeners(r),t},s.prototype.onCollectionsStateMapUpdate=function(){var r=this,e=this.getValuesResolvingFromCollections();if(e.length){var t=this.addDataValues(this.getValuesOrResolver(Object.fromEntries(e.map(function(a){return[a,""]}))));Object.entries(t).forEach(function(a){var o=a[0],i=a[1];return r.updateFn(r.model,o,i)})}},Object.defineProperty(s.prototype,"collectionsStateMap",{get:function(){var r,e=this.model;return(r=e?.collectionsStateMap)!==null&&r!==void 0?r:{}},enumerable:!1,configurable:!0}),s.prototype.updateListeners=function(r){var e=this,t=this,a=t.em,o=t.collectionsStateMap;this.removeListeners(Object.keys(r));for(var i=Object.keys(r),l=function(p){var h=i[p],g=r[h];if(!HS(g))return"continue";var y=lA(g,{em:a,collectionsStateMap:o});c.resolverListeners[h]=new Ox({em:a,resolver:y,onUpdate:function(b){return e.updateFn(e.model,h,b)}})},c=this,d=0;d<i.length;d++)l(d)},s.prototype.evaluateValues=function(r){for(var e=this,t=e.em,a=e.collectionsStateMap,o=hb({},r),i=Object.keys(r),l=0;l<i.length;l++){var c=i[l],d=r[c];HS(d)&&(o[c]=cA(d,{em:t,collectionsStateMap:a}))}return o},s.prototype.removeListeners=function(r){var e=this,t=r||Object.keys(this.resolverListeners);return t.forEach(function(a){var o,i;e.resolverListeners[a]&&((i=(o=e.resolverListeners[a]).destroy)===null||i===void 0||i.call(o),delete e.resolverListeners[a])}),t},s.prototype.getValuesOrResolver=function(r){if(!r)return{};for(var e=hb({},r),t=Object.keys(e),a=0;a<t.length;a++){var o=t[a],i=this.resolverListeners[o];i&&(e[o]=i.resolver.toJSON())}return e},s.prototype.getAllDataResolvers=function(){for(var r={},e=Object.keys(this.resolverListeners),t=0;t<e.length;t++){var a=e[t];r[a]=this.resolverListeners[a].resolver.toJSON()}return r},s.prototype.getValuesResolvingFromCollections=function(){var r=this,e=Object.keys(this.resolverListeners).filter(function(t){return r.resolverListeners[t].resolver.resolvesFromCollection()});return e},s.prototype.destroy=function(){this.removeListeners()},s})(),Ki=function(){return Ki=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Ki.apply(this,arguments)},rH=function(s,r,e){if(e||arguments.length===2)for(var t=0,a=r.length,o;t<a;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return s.concat(o||Array.prototype.slice.call(r))},Hv={fromDataSource:!0,avoidStore:!0},Fh="__data_values",nH=(function(){function s(r,e){var t=this;this.model=r,this.options=e,this.onPropertyUpdate=function(a,o,i){a?.set(o,i,Hv)},this.onAttributeUpdate=function(a,o,i){var l;t.isComponent(a)&&a?.addAttributes((l={},l[o]=i,l),Hv)},this.onStyleUpdate=function(a,o,i){var l;a?.addStyle((l={},l[o]=i,l),Ki(Ki({},Hv),{partial:!0,avoidStore:!0}))},this.propertyWatcher=new Q1(r,this.onPropertyUpdate,e),this.attributeWatcher=new Q1(r,this.onAttributeUpdate,e),this.styleWatcher=new Q1(r,this.onStyleUpdate,e)}return s.prototype.bindModel=function(r){this.model=r,this.watchers.forEach(function(e){return e.bindModel(r)}),this.updateSymbolOverride()},s.prototype.addProps=function(r,e){var t;e===void 0&&(e={});var a=(t=r[Fh])!==null&&t!==void 0?t:{},o=this.filterProps(r),i=Ki(Ki({},r),this.propertyWatcher.addDataValues(Ki(Ki({},o),a.props),e));this.shouldProcessProp("attributes",r,a)&&(i.attributes=this.processAttributes(r,a,e)),this.shouldProcessProp("style",r,a)&&(i.style=this.processStyles(r,a,e));var l=e.skipWatcherUpdates||e.fromDataSource;return l||(this.updateSymbolOverride(),i[Fh]={props:this.propertyWatcher.getAllDataResolvers(),style:this.styleWatcher.getAllDataResolvers(),attributes:this.attributeWatcher.getAllDataResolvers()}),i},s.prototype.getProps=function(r){var e=this.getValueOrResolver("props",r),t=Ki({},e);return delete t[Fh],(0,_e.isEmpty)(r.attributes)||(t.attributes=this.getValueOrResolver("attributes",r.attributes)),(0,_e.isObject)(r.style)&&!(0,_e.isEmpty)(r.style)&&(t.style=this.getValueOrResolver("styles",r.style)),t},s.prototype.getValueOrResolver=function(r,e){var t;switch(r){case"props":t=this.propertyWatcher;break;case"styles":t=this.styleWatcher;break;case"attributes":t=this.attributeWatcher;break;default:{var a=this.options.em;return a?.logError("Invalid target '".concat(r,"'. Must be 'props', 'styles', or 'attributes'.")),{}}}return e?t.getValuesOrResolver(e):t.getAllDataResolvers()},s.prototype.removeAttributes=function(r){this.attributeWatcher.removeListeners(r),this.updateSymbolOverride()},s.prototype.disableStyles=function(){this.styleWatcher.removeListeners(),this.styleWatcher.destroy()},s.prototype.onCollectionsStateMapUpdate=function(){this.watchers.forEach(function(r){return r.onCollectionsStateMapUpdate()})},s.prototype.destroy=function(){this.watchers.forEach(function(r){return r.destroy()})},Object.defineProperty(s.prototype,"watchers",{get:function(){return[this.propertyWatcher,this.styleWatcher,this.attributeWatcher]},enumerable:!1,configurable:!0}),s.prototype.isComponent=function(r){return r instanceof Wa},s.prototype.shouldProcessProp=function(r,e,t){var a=r==="attributes"?this.attributeWatcher:this.styleWatcher,o=t[r],i=!!e[r],l=o&&Object.keys(o).length>0,c=o&&Object.keys(a.getAllDataResolvers()).length>0;return i||l||c},s.prototype.updateSymbolOverride=function(){var r,e=this.model;if(!(!this.isComponent(e)||!cc(e))){var t=!!Object.keys((r=e?.collectionsStateMap)!==null&&r!==void 0?r:{}).length;if(t){var a=this.propertyWatcher.getValuesResolvingFromCollections(),o=this.attributeWatcher.getValuesResolvingFromCollections(),i=rH(["locked","layerable",Fh],a,!0),l=Object.keys(o).length;l&&i.push("attributes");var c=Vd(e);c.forEach(function(d){d.setSymbolOverride(i,{fromDataSource:!0})}),e.setSymbolOverride(i,{fromDataSource:!0})}}},s.prototype.filterProps=function(r){var e=["components","dataResolver","status","state","open",mp,Fh],t=Object.fromEntries(Object.entries(r).filter(function(a){var o=a[0];return!e.includes(o)}));return t},s.prototype.processAttributes=function(r,e,t){var a;return t===void 0&&(t={}),this.attributeWatcher.setDataValues(Ki(Ki({},r.attributes),(a=e.attributes)!==null&&a!==void 0?a:{}),t)},s.prototype.processStyles=function(r,e,t){var a;return t===void 0&&(t={}),typeof r=="string"?(this.styleWatcher.removeListeners(),r):this.styleWatcher.setDataValues(Ki(Ki({},r.style),(a=e.style)!==null&&a!==void 0?a:{}),t)},s})(),sH=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),So=function(){return So=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},So.apply(this,arguments)},aH=uA(),WS=function(s){return(0,_e.isArray)(s)?s[s.length-1]:s},oH=(function(s){sH(r,s);function r(e,t){t===void 0&&(t={});var a=this,o=t.em,i=new nH(void 0,{em:o});return a=s.call(this,e,So(So({},t),{dataResolverWatchers:i}))||this,a.views=[],a.collectionsStateMap={},i.bindModel(a),a.dataResolverWatchers=i,a.em=t.em,a.opt=t,a}return r.prototype.get=function(e,t){return t?.skipResolve?this.dataResolverWatchers.getValueOrResolver("props")[e]:s.prototype.get.call(this,e)},r.prototype.set=function(e,t,a){var o,i,l={skipWatcherUpdates:!1,fromDataSource:!1},c,d;typeof e=="object"?(c=e,d=t||l):typeof e=="string"?(c=(o={},o[e]=t,o),d=a||l):(c={},d=l),this.dataResolverWatchers=(i=this.dataResolverWatchers)!==null&&i!==void 0?i:d.dataResolverWatchers;var p=this.dataResolverWatchers.addProps(c,d);return s.prototype.set.call(this,p,d)},r.prototype.parseStyle=function(e){return aH.parseStyle(e)},r.prototype.extendStyle=function(e){return So(So({},this.getStyle("",{skipResolve:!0})),e)},r.prototype.getStyle=function(e,t){t===void 0&&(t={});var a=this.get("style"),o=(0,_e.isString)(a)?this.parseStyle(a):(0,_e.isObject)(a)?So({},a):{};delete o.__p;var i=!e||e===""||(0,_e.isObject)(e);if(!t.skipResolve)return i?o:o[e];var l=this.dataResolverWatchers.getValueOrResolver("styles",o);return i?l:l[e]},r.prototype.setStyle=function(e,t){var a=this;e===void 0&&(e={}),t===void 0&&(t={}),(0,_e.isString)(e)&&(e=this.parseStyle(e));var o=this.getStyle("",{skipResolve:!0});t.partial||t.avoidStore?(t.avoidStore=!0,e.__p=!0):delete e.__p;var i=So({},e),l=So({},i);(0,_e.keys)(l).forEach(function(p){if(l[p]===""){delete l[p];return}}),this.set({style:l},t),l=this.attributes.style;var c=Object.keys((0,Zt.shallowDiff)(o,i)),d=c.reduce(function(p,h){var g;return So(So({},p),(g={},g[h]=l[h],g))},{});return delete d.__p,(0,_e.keys)(d).forEach(function(p){var h=a.em;t.noEvent||(a.trigger("change:style:".concat(p)),h&&(h.trigger("styleable:change",a,p,t),h.trigger("styleable:change:".concat(p),a,p,t)))}),l},r.prototype.getView=function(e){var t=this,a=t.views,o=t.em,i=e||o?.getCurrentFrameModel();return i?a.find(function(l){return l.frameView===i.view}):a[0]},r.prototype.setView=function(e){var t=this.views;!t.includes(e)&&t.push(e)},r.prototype.removeView=function(e){var t=this.views;t.splice(t.indexOf(e),1)},r.prototype.updateView=function(){this.views.forEach(function(e){return e.updateStyles()})},r.prototype.addStyle=function(e,t,a){var o;t===void 0&&(t=""),a===void 0&&(a={}),typeof e=="string"?e=(o={},o[e]=t,o):a=t||{},a.addStyle=e,e=this.extendStyle(e),this.setStyle(e,a)},r.prototype.removeStyle=function(e){var t=this.getStyle();delete t[e],this.setStyle(t)},r.prototype.styleToString=function(e){e===void 0&&(e={});var t=[],a=e.style||this.getStyle(e),o=e.important,i=function(c){var d=(0,_e.isArray)(o)?o.indexOf(c)>=0:o,p=c.substring(0,2),h=p==="__";if(h)return"continue";var g=a[c],y=(0,_e.isArray)(g)?g:[g];y.forEach(function(b){var v="".concat(b).concat(d?" !important":"");v&&t.push("".concat(c,":").concat(v,";"))})};for(var l in a)i(l);return t.join("")},r.prototype.getSelectors=function(){return this.get("selectors")||this.get("classes")},r.prototype.getSelectorsString=function(e){return this.selectorsToString?this.selectorsToString(e):this.getSelectors().getFullString()},r.prototype.onCollectionsStateMapUpdate=function(e){this.collectionsStateMap=e,this.dataResolverWatchers.onCollectionsStateMapUpdate()},r.prototype.clone=function(e,t){var a=this.dataResolverWatchers.getProps(this.attributes),o=So(So({},a),e),i=So(So({},this.opt),t),l=this.constructor;return new l(o,i)},r.prototype.toJSON=function(e,t){if(e?.fromUndo)return So({},s.prototype.toJSON.call(this,e));var a=So(So({},this.attributes),t),o=this.dataResolverWatchers.getProps(a);return o},r})(Sr.Kx);const fA=oH;var iH=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),av=1,J1=2,pA=(function(s){iH(r,s);function r(e,t){t===void 0&&(t={});var a=s.call(this,e,t)||this,o=t.config,i=o===void 0?{}:o,l=a.get("name"),c=a.get("label");l?c||a.set("label",l):a.set("name",c);var d=a.get("name"),p=i.escapeName,h=p?p(d):r.escapeName(d);return a.set("name",h),a.em=t.em,a}return r.prototype.defaults=function(){return{name:"",label:"",type:av,active:!0,private:!1,protected:!1,_undo:!0}},r.prototype.isId=function(){return this.get("type")===J1},r.prototype.isClass=function(){return this.get("type")===av},r.prototype.getFullName=function(e){e===void 0&&(e={});var t=e.escape,a=this.get("name"),o="";switch(this.get("type")){case av:o=".";break;case J1:o="#";break}return o+(t?t(a):a)},r.prototype.toString=function(){return this.getFullName()},r.prototype.getName=function(){return this.get("name")||""},r.prototype.getLabel=function(){return this.get("label")||""},r.prototype.setLabel=function(e){return this.set("label",e)},r.prototype.getActive=function(){return!!this.get("active")},r.prototype.setActive=function(e){return this.set("active",e)},r.prototype.toJSON=function(e){e===void 0&&(e={});var t=this.em,a=Sr.Kx.prototype.toJSON.call(this,[e]),o=(0,_e.result)(this,"defaults");if(t?.getConfig().avoidDefaults){(0,_e.forEach)(o,function(l,c){a[c]===l&&delete a[c]}),a.label===a.name&&delete a.label;var i=(0,_e.keys)(a).length;i===1&&a.name&&(a=a.name),i===2&&a.name&&a.type&&(a=this.getFullName())}return a},r.escapeName=function(e){return"".concat(e).trim().replace(/\s+/g,"-")},r.TYPE_CLASS=av,r.TYPE_ID=J1,r})(Sr.Kx);const ci=pA;pA.prototype.idAttribute="name";var lH=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),hA=function(s,r){return s.reduce(function(e,t,a){return e.concat(hA(s.slice(a+1),"".concat(r).concat(t)))},[r])},mA=(function(s){lH(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.modelId=function(e){return"".concat(e.name,"_").concat(e.type||ci.TYPE_CLASS)},r.prototype.getStyleable=function(){return(0,_e.filter)(this.models,function(e){return e.getActive()&&!e.get("private")})},r.prototype.getValid=function(e){var t=e===void 0?{}:e,a=t.noDisabled;return(0,_e.filter)(this.models,function(o){return!o.get("private")}).filter(function(o){return a?o.get("active"):1})},r.prototype.getFullString=function(e,t){t===void 0&&(t={});var a=[],o=e||this;return o.forEach(function(i){return a.push(i.getFullName(t))}),t.sort&&a.sort(),a.join("").trim()},r.prototype.getFullName=function(e){e===void 0&&(e={});var t=e.combination,a=e.array,o=[],i=this.map(function(l){return l.getFullName(e)}).sort();return t?i.forEach(function(l,c){o=o.concat(hA(i.slice(c+1),l))}):o=i,a?o:t?o.join(","):o.join("")},r})(Sr.pM);const Yu=mA;mA.prototype.model=ci;var cH=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),jE=function(s,r,e){if(e||arguments.length===2)for(var t=0,a=r.length,o;t<a;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return s.concat(o||Array.prototype.slice.call(r))},dH=(function(s){cH(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.defaults=function(){return{id:"",label:"",open:!0,attributes:{}}},r.prototype.getId=function(){return this.get("id")},r.prototype.getLabel=function(){return this.get("label")},r})(Sr.Kx);const Px=dH;function gA(s){var r=new Set,e=new Map,t={items:[]};s.forEach(function(o){var i=o.category;if(i){r.add(i);var l=e.get(i);l?l.push(o):e.set(i,[o])}else t.items.push(o)});var a=Array.from(r).map(function(o){return{category:o,items:e.get(o)||[]}});return jE(jE([],a,!0),[t],!1)}var uH=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),CE="category",yA=(function(s){uH(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.initCategory=function(e){var t=e.get(CE),a=t instanceof Px;if(t&&!a){(0,_e.isString)(t)?t={id:t,label:t}:(0,Zt.isObject)(t)&&!t.id&&(t.id=t.label);var o=this.getCategories().add(t);return e.set(CE,o,{silent:!0}),o}else if(a){var o=t;return this.getCategories().add(o),o}},r})(Sr.pM),fH=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),xA=(function(s){fH(r,s);function r(e,t){t===void 0&&(t={});var a=s.call(this,e,t)||this,o=t.events,i=t.em,l=o?.update;return i&&l&&a.on("change",function(c,d){return i.trigger(l,{category:c,changes:c.changedAttributes(),options:d})}),a}return r.prototype.add=function(e,t){var a=(0,_e.isArray)(e)?e:[e];return a.forEach(function(o){return o&&(o.id=(0,Zt.normalizeKey)("".concat(o.id)))}),s.prototype.add.call(this,e,t)},r.prototype.get=function(e){return s.prototype.get.call(this,(0,_e.isString)(e)?(0,Zt.normalizeKey)(e):e)},r})(Sr.pM);const mb=xA;xA.prototype.model=Px;var gb;(function(s){s.select="trait:select",s.value="trait:value",s.categoryUpdate="trait:category:update",s.custom="trait:custom",s.all="trait"})(gb||(gb={}));const qS=gb;var pH=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),yb=function(){return yb=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},yb.apply(this,arguments)},hH=(function(s){pH(r,s);function r(e,t){var a=s.call(this,e)||this,o=a.attributes,i=o.target,l=o.name;return!a.get("id")&&a.set("id",l),i&&a.setTarget(i),a.em=t,a}return r.prototype.defaults=function(){return{type:"text",label:"",name:"",unit:"",step:1,value:"",default:"",placeholder:"",category:"",changeProp:!1,options:[]}},Object.defineProperty(r.prototype,"parent",{get:function(){return this.collection},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"category",{get:function(){var e=this.get("category");return e instanceof Px?e:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"component",{get:function(){return this.target},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"changeProp",{get:function(){return!!this.get("changeProp")},enumerable:!1,configurable:!0}),r.prototype.setTarget=function(e){if(e){var t=this.attributes,a=t.name,o=t.changeProp,i=t.value,l=t.getValue;this.target=e,this.unset("target");var c=o?"change:".concat(a):"change:attributes:".concat(a);this.listenTo(e,c,this.targetUpdated);var d=i||(l?void 0:this.getValue());!(0,_e.isUndefined)(d)&&this.set({value:d},{silent:!0})}},r.prototype.getId=function(){return this.get("id")},r.prototype.getType=function(){return this.get("type")},r.prototype.getName=function(){return this.get("name")},r.prototype.getLabel=function(e){var t;e===void 0&&(e={});var a=e.locale,o=a===void 0?!0:a,i=this.getId(),l=this.get("label")||this.getName();return o&&((t=this.em)===null||t===void 0?void 0:t.t("traitManager.traits.labels.".concat(i)))||l},r.prototype.getValue=function(e){return this.getTargetValue(e)},r.prototype.setValue=function(e,t){var a=this;t===void 0&&(t={});var o=this,i=o.component,l=o.em,c=t.partial,d={},p=this.attributes.setValue;if(p){p({value:e,component:i,editor:l?.getEditor(),trait:this,partial:!!c,options:t,emitUpdate:function(){return a.targetUpdated()}});return}c&&(d.avoidStore=!0),this.setTargetValue(e,d)},r.prototype.getDefault=function(){return this.get("default")},r.prototype.getOptions=function(){return this.get("options")||[]},r.prototype.getOption=function(e){var t=this,a=(0,Zt.isDef)(e)?e:this.getValue();return this.getOptions().filter(function(o){return t.getOptionId(o)===a})[0]},r.prototype.getOptionId=function(e){return e.id||e.value},r.prototype.getOptionLabel=function(e,t){var a;t===void 0&&(t={});var o=t.locale,i=o===void 0?!0:o,l=(0,_e.isString)(e)?this.getOption(e):e,c=this.getOptionId(l),d=l.label||l.name||c,p=this.getName();return i&&((a=this.em)===null||a===void 0?void 0:a.t("traitManager.traits.options.".concat(p,".").concat(c)))||d},r.prototype.getCategoryLabel=function(e){e===void 0&&(e={});var t=this,a=t.em,o=t.category,i=e.locale,l=i===void 0?!0:i,c=o?.getId(),d=o?.getLabel();return l&&a?.t("traitManager.categories.".concat(c))||d||""},r.prototype.runCommand=function(){var e=this.em,t=this.attributes.command;if(t&&e)return(0,_e.isString)(t)?e.Commands.run(t):t(e.Editor,this)},r.prototype.props=function(){return this.attributes},r.prototype.targetUpdated=function(){var e=this,t=e.component,a=e.em,o=this.getTargetValue({useType:!0});this.set({value:o},{fromTarget:1});var i={trait:this,component:t,value:o};t.trigger(qS.value,i),a?.trigger(qS.value,i),a?.trigger("trait:update",i)},r.prototype.getTargetValue=function(e){var t;e===void 0&&(e={});var a=this,o=a.component,i=a.em,l=this.getName(),c=this.get("getValue"),d,p=e.skipResolve;if(c?d=c({editor:i?.getEditor(),trait:this,component:o}):this.changeProp?(d=o.get(l),p&&(d=o.dataResolverWatchers.getValueOrResolver("props",(t={},t[l]=d,t))[l])):d=o.getAttributes({skipResolve:p})[l],e.useType){var h=this.getType();if(h==="checkbox"){var g=this.attributes,y=g.valueTrue,b=g.valueFalse;!(0,_e.isUndefined)(y)&&y===d?d=!0:!(0,_e.isUndefined)(b)&&b===d&&(d=!1)}}return(0,_e.isUndefined)(d)?"":d},r.prototype.setTargetValue=function(e,t){var a;t===void 0&&(t={});var o=this,i=o.component,l=o.attributes,c=this.getName();if(!(0,_e.isUndefined)(e)){var d=e;if(e==="false"?d=!1:e==="true"&&(d=!0),this.getType()==="checkbox"){var p=l.valueTrue,h=l.valueFalse;d&&!(0,_e.isUndefined)(p)&&(d=p),!d&&!(0,_e.isUndefined)(h)&&(d=h)}var g=(a={},a[c]=d,a);g.__p=t.avoidStore?null:void 0,this.changeProp?i.set(g,t):i.addAttributes(g,t)}},r.prototype.setValueFromInput=function(e,t,a){t===void 0&&(t=!0),a===void 0&&(a={});var o={value:e};this.set(o,yb(yb({},a),{avoidStore:1})),t&&(this.set("value","",a),this.set(o,a))},r.prototype.getInitValue=function(){var e=this.component,t=this.getName(),a;if(e){var o=e.get("attributes");a=this.changeProp?e.get(t):o[t]}return a||this.get("value")||this.get("default")},r})(Sr.Kx);const xb=hH;var mH=(function(){function s(r){r===void 0&&(r={}),this.config=r}return s.prototype.build=function(r,e){return(0,_e.isString)(r)?this.buildFromString(r,e):new xb(r,e)},s.prototype.buildFromString=function(r,e){var t={name:r,type:"text"};return r==="target"&&(t.type="select",t.default=!1,t.options=this.config.optionsTarget),new xb(t,e)},s})();const gH=mH;var yH=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),xH=(function(s){yH(r,s);function r(e,t){var a=s.call(this,e)||this;a.categories=new mb;var o=t.em;a.em=o,a.categories=new mb([],{em:o,events:{update:qS.categoryUpdate}}),a.on("add",a.handleAdd),a.on("reset",a.handleReset);var i=a.module,l=i?.getConfig();return a.tf=new gH(l),a}return Object.defineProperty(r.prototype,"module",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),r.prototype.getCategories=function(){return this.categories},r.prototype.handleReset=function(e,t){var a=t===void 0?{}:t,o=a.previousModels,i=o===void 0?[]:o;i.forEach(function(l){return l.trigger("remove")})},r.prototype.handleAdd=function(e){e.em=this.em;var t=this.target;t&&(e.target=t),this.initCategory(e)},r.prototype.setTarget=function(e){this.target=e,this.models.forEach(function(t){return t.setTarget(e)})},r.prototype.add=function(e,t){if(e!=null){var a=this,o=a.target,i=a.em;if((0,_e.isArray)(e)){for(var l=[],c=0,d=e.length;c<d;c++){var p=e[c];l[c]=p instanceof xb?p:this.tf.build(p,i),l[c].setTarget(o)}return s.prototype.add.call(this,l,t)}var h=e instanceof xb?e:this.tf.build(e,i);return h.setTarget(o),s.prototype.add.call(this,h,t)}},r})(yA);const vb=xH;var vH=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Zo=function(){return Zo=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Zo.apply(this,arguments)},Wv=function(s,r){var e={};for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&r.indexOf(t)<0&&(e[t]=s[t]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(s);a<t.length;a++)r.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(s,t[a])&&(e[t[a]]=s[t[a]]);return e},eC=function(s,r,e){if(e||arguments.length===2)for(var t=0,a=r.length,o;t<a;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return s.concat(o||Array.prototype.slice.call(r))},Uh=function(s,r){if(r===void 0&&(r=[]),!s)return[];var e=(0,_e.isArray)(s)||(0,_e.isFunction)(s.map)?s:[s];return e.map(function(t){r.push(t.getId()),Uh(t.components().models,r)}),r},vA=function(s,r,e){r===void 0&&(r={}),e===void 0&&(e={}),e.visitedCmps=e.visitedCmps||{};var t=e.visitedCmps,a=e.updateOptions||{},o=(0,_e.isArray)(s)?s:[s];return o.map(function(i){var l=i.attributes,c=l===void 0?{}:l,d=i.components,p=i.tagName,h=i.style,g=c.id;c.draggable;var y=Wv(c,["id","draggable"]),b=i;if(g){if(t[g])t[g].push(b),g=Wa.getNewId(r),b.attributes.id=g;else if(t[g]=[],r[g]){b=r[g];var v=a.onAttributes,w=a.onStyle,C=b;p&&C.set({tagName:p},Zo(Zo({},e),{silent:!0})),v?v({item:i,component:C,attributes:y,options:e}):(0,_e.keys)(y).length&&C.addAttributes(y,Zo({},e)),w?w({item:i,component:C,style:h,options:e}):(0,_e.keys)(h).length&&C.addStyle(h,e)}}var k=(0,_e.isFunction)(b.components)?b:null;if(d){var N=vA(d,r,e);k?k.components().reset(N,e):b.components=N}else k&&k.components().reset([],e);return b})},bH=(function(s){vH(r,s);function r(e,t){var a=s.call(this,e,t)||this;a.opt=t,a.listenTo(a,"add",a.onAdd),a.listenTo(a,"remove",a.removeChildren),a.listenTo(a,"reset",a.resetChildren);var o=t.em,i=t.config;return a.config=i,a.em=o,a.domc=t.domc||o?.Components,a}return Object.defineProperty(r.prototype,"events",{get:function(){var e;return(e=this.domc)===null||e===void 0?void 0:e.events},enumerable:!1,configurable:!0}),r.prototype.resetChildren=function(e,t){var a=this;t===void 0&&(t={});var o=this,i=t.previousModels||[],l=i.filter(function(p){return!e.get(p.cid)}),c=Uh(e),d=Uh(i).filter(function(p){return c.indexOf(p)>=0});t.keepIds=(t.keepIds||[]).concat(d),l.forEach(function(p){return a.removeChildren(p,o,t)}),e.each(function(p){return a.onAdd(p)})},r.prototype.resetFromString=function(e,t){var a,o;e===void 0&&(e=""),t===void 0&&(t={}),t.keepIds=Uh(this);var i=this,l=i.domc,c=i.em,d=i.parent,p=l?.allById()||{},h=this.parseString(e,Zo(Zo({},t),{cloneRules:!0})),g=Zo({skipViewUpdate:!0},t),y=vA(h,p,g);r.cloneCssRules(c,g.visitedCmps),this.reset(y,t),c?.trigger("component:content",d,t,e),(o=(a=d).__checkInnerChilds)===null||o===void 0||o.call(a)},r.prototype.removeChildren=function(e,t,a){var o=this;if(a===void 0&&(a={}),!!e){var i=this,l=i.domc,c=i.em,d=a.temporary||a.fromUndo;if(e.prevColl=this,!d){var p=e.getId(),h=c.Selectors.getAll(),g=c.Css.getAll(),y=(a.keepIds||[]).indexOf(p)<0,b=l?l.allById():{};delete b[p];var v=y?g.remove(g.filter(function(N){return N.getSelectors().getFullString()==="#".concat(p)}),a):[];h.remove(v.map(function(N){return N.getSelectors().at(0)})),e.opt.temporary||(c.Commands.run("core:component-style-clear",{target:e}),e.views.forEach(function(N){N.scriptContainer&&e.emitWithEditor(bs.I.scriptUnmount,{component:e,view:N,el:N.el})}),e.removed(),e.trigger("removed"),c.trigger(bs.I.remove,e),l&&fb(e)&&Tp(e)&&l.symbols.__trgEvent(l.events.symbolInstanceRemove,{component:e},!0));var w=e.components();w.forEach(function(N){iA(N,N,w,Zo(Zo({},a),{skipRefsUp:!0})),o.removeChildren(N,t,a)})}var C=e.components();if(c.stopListening(C),c.stopListening(e),c.stopListening(e.get("classes")),e.__postRemove(),!e.opt.temporary){var k=function(N){N.emitWithEditor(bs.I.removed,N,{removeOptions:a}),N.components().forEach(function(O){return k(O)})};k(e)}}},r.prototype.model=function(e,t){var a=t.collection.opt,o=a.em,i,l=o.Components.componentTypes;t.em=o,t.config=a.config,t.componentTypes=l,t.domc=a.domc;for(var c=0;c<l.length;c++){var d=l[c].id;if(d==e.type){i=l[c].model;break}}return i||(i=l[l.length-1].model,o&&e.type&&o.logWarning("Component type '".concat(e.type,"' not found"),{attrs:e,options:t})),new i(e,t)},r.prototype.parseString=function(e,t){t===void 0&&(t={});var a=this,o=a.em,i=a.domc,l=a.parent,c=l?.is("wrapper"),d=t.asDocument&&c,p=o.Css,h=o.Parser.parseHtml(e,Zo({asDocument:d},t.parserOptions)),g=h.html;if(c&&h.doctype){var y=l,b=h.html||{},v=b.components,w=v===void 0?[]:v,C=Wv(b,["components"]),k=h.head||{},N=k.components,O=Wv(k,["components"]);g=w,y.set(C,t),y.head.set(O,t),y.head.components(N,t),y.docEl.set(h.root,t),y.set({doctype:h.doctype})}var R=Wa.checkId(g,h.css,i.componentsById,t);if(t.cloneRules&&r.cloneCssRules(o,R.updatedIds),h.css&&p&&!t.temporary){t.at;var L=Wv(t,["at"]);p.addCollection(h.css,Zo(Zo({},L),{extend:1}))}return g},r.prototype.add=function(e,t){var a=this;if(t===void 0&&(t={}),e!=null){t.keepIds=eC(eC([],t.keepIds||[],!0),Uh(t.previousModels),!0),(0,_e.isString)(e)?e=this.parseString(e,t):(0,_e.isArray)(e)&&(e=eC([],e,!0),e.forEach(function(i,l){if((0,_e.isString)(i)){var c=a.parseString(i,t);e[l]=(0,_e.isArray)(c)&&!c.length?null:c}}));var o=((0,_e.isArray)(e)?e:[e]).filter(Boolean).map(function(i){return a.processDef(i)});return e=(0,_e.isArray)(e)?(0,_e.flatten)(o,1):o[0],s.prototype.add.call(this,e,t)}},r.prototype.processDef=function(e){if(e.cid&&e.ccid)return e;var t=this,a=t.em,o=t.config,i=o===void 0?{}:o,l=i.processor,c=e;if(l){c=Zo({},c);var d=l(c);d&&((0,_e.each)(c,function(w,C){return delete c[C]}),(0,_e.extend)(c,d))}if(c.$$typeof&&typeof c.props=="object"){c=Zo({},c),c.props=Zo({},c.props);var p=a.Components,h=a.Parser,g=h.parserHtml;(0,_e.each)(c,function(w,C){(0,_e.includes)(["props","type"],C)||delete c[C]});var y=c.props,b=y.children;delete y.children,delete c.props;var v=g.splitPropsFromAttr(y);c.attributes=v.attrs,b&&(c.components=b),c.type?p.getType(c.type)||(c.tagName=c.type,delete c.type):c.type="textnode",(0,_e.extend)(c,v.props)}return c},r.prototype.onAdd=function(e,t,a){a===void 0&&(a={});var o=this,i=o.domc,l=o.em,c=l.config.avoidInlineStyle;if(i&&i.Component.ensureInList(e),!c&&l.config.forceClass&&!a.temporary){var d=e.getStyle();if(!(0,_e.isEmpty)(d)){var p=e.cid;l.Css.setClassRule(p,d),e.setStyle({}),e.addClass(p)}}if(e.__postAdd({recursive:!0}),l&&!a.temporary){var h=function(g){l.trigger(bs.I.add,g,a),g.components().forEach(function(y){return h(y)})};h(e),i&&fb(e)&&Tp(e)&&i.symbols.__trgEvent(i.events.symbolInstanceAdd,{component:e},!0)}},r.cloneCssRules=function(e,t){t===void 0&&(t={});var a=e.Css;Object.keys(t).forEach(function(o){var i=t[o];if(i.length){var l=(a.getRules("#".concat(o))||[]).filter(function(d){return!(0,_e.isEmpty)(d.attributes.style)});if(l.length){var c=a.getAll();i.forEach(function(d){l.forEach(function(p){var h=p.clone();h.set("selectors",["#".concat(d.attributes.id)]),c.add(h)})})}}})},r})(Sr.pM);const Qy=bH;var wH=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Gs=function(){return Gs=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Gs.apply(this,arguments)},jH=function(s,r){var e={};for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&r.indexOf(t)<0&&(e[t]=s[t]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(s);a<t.length;a++)r.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(s,t[a])&&(e[t[a]]=s[t[a]]);return e},Gi=function(s,r,e){if(e||arguments.length===2)for(var t=0,a=r.length,o;t<a;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return s.concat(o||Array.prototype.slice.call(r))},SE=function(s){return s.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},np=function(s){return!!s?.getConfig().avoidInlineStyle},$2="component:drag",oi="__symbols",_i="__symbol",mp="__symbol_ovrd",qv=bs.I.update,GS=bs.I.updateInside,CH=(function(s){wH(r,s);function r(e,t){e===void 0&&(e={});var a=this,o=t.em;a=s.call(this,e,t)||this,(0,_e.bindAll)(a,"__upSymbProps","__upSymbCls","__upSymbComps","syncOnComponentChange");var i=a.parent(),l=i?.attributes,c=a.get("propagate");if(c&&a.set("propagate",(0,_e.isArray)(c)?c:[c]),l&&l.propagate&&!c){var d={},p=l.propagate;p.forEach(function(C){return d[C]=i.get(C)}),d.propagate=p,a.set(Gs(Gs({},d),e))}t&&t.config&&t.config.voidElements.indexOf(a.get("tagName"))>=0&&a.set("void",!0),t.em=o,a.opt=t,a.em=o,a.config=t.config||{};var h=Gs(Gs({},(0,_e.result)(a,"defaults").attributes||{}),a.get("attributes")||{}),g=a.dataResolverWatchers.getValueOrResolver("attributes",h);if(a.setAttributes(g),a.ccid=r.createId(a,t),a.preInit(),a.initClasses(),a.initComponents(),a.initTraits(),a.initToolbar(),a.initScriptProps(),a.listenTo(a,"change:script",a.scriptUpdated),a.listenTo(a,"change:tagName",a.tagUpdated),a.listenTo(a,"change:attributes",a.attrUpdated),a.listenTo(a,"change:attributes:id",a._idUpdated),a.on("change:toolbar",a.__emitUpdateTlb),a.on("change",a.__onChange),a.on(GS,a.__propToParent),a.set("status",""),a.views=[],["classes","traits","components"].forEach(function(C){var k="add remove reset ".concat(C!=="components"?"change":"");a.listenTo(a.get(C),k.trim(),function(){for(var N=[],O=0;O<arguments.length;O++)N[O]=arguments[O];return a.emitUpdate.apply(a,Gi([C],N,!1))})}),!t.temporary){var y=o&&o.Css,b=a.attributes,v=b.styles,w=b.type;v&&y&&y.addCollection(v,{avoidUpdateStyle:!0},{group:"cmp:".concat(w)}),a._moveInlineStyleToRule(),a.__postAdd(),a.init(),cc(a)&&Xg(a),o?.trigger(bs.I.create,a,t)}return np(o)&&a.dataResolverWatchers.disableStyles(),a}return Object.defineProperty(r.prototype,"defaults",{get:function(){var e;return e={tagName:"div",type:"",name:"",removable:!0,draggable:!0,droppable:!0,badgable:!0,stylable:!0,"stylable-require":"","style-signature":"",unstylable:"",highlightable:!0,copyable:!0,resizable:!1,editable:!1,layerable:!0,selectable:!0,hoverable:!0,void:!1,state:"",status:"",content:"",icon:"",style:"",styles:"",classes:"",script:"","script-props":"","script-export":"",attributes:{},traits:["id","title"],propagate:"",dmode:"",toolbar:null,delegate:null},e[_i]=0,e[oi]=0,e[mp]=0,e._undo=!0,e._undoexc=["status","open"],e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tagName",{get:function(){return this.get("tagName")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"classes",{get:function(){return this.get("classes")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"traits",{get:function(){return this.get("traits")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"content",{get:function(){var e;return(e=this.get("content"))!==null&&e!==void 0?e:""},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"toolbar",{get:function(){return this.get("toolbar")||[]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"resizable",{get:function(){return this.get("resizable")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"delegate",{get:function(){return this.get("delegate")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"locked",{get:function(){return this.get("locked")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"frame",{get:function(){return this.opt.frame},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"page",{get:function(){var e;return(e=this.frame)===null||e===void 0?void 0:e.getPage()},enumerable:!1,configurable:!0}),r.prototype.getType=function(){return this.get("type")||"default"},r.prototype.preInit=function(){},r.prototype.init=function(){},r.prototype.updated=function(e,t,a){},r.prototype.removed=function(){},r.prototype.onCollectionsStateMapUpdate=function(e){var t;s.prototype.onCollectionsStateMapUpdate.call(this,e),(t=this._getStyleRule())===null||t===void 0||t.onCollectionsStateMapUpdate(e);var a=this.components();a.forEach(function(o){return o.onCollectionsStateMapUpdate(e)})},r.prototype.syncComponentsCollectionState=function(){this.stopListening(this.components(),"add remove reset",this.syncOnComponentChange),this.listenTo(this.components(),"add remove reset",this.syncOnComponentChange),this.components().forEach(function(e){return e.syncComponentsCollectionState()})},r.prototype.stopSyncComponentCollectionState=function(){this.stopListening(this.components(),"add remove reset",this.syncOnComponentChange),this.collectionsStateMap={},this.components().forEach(function(e){return e.stopSyncComponentCollectionState()})},r.prototype.syncOnComponentChange=function(e,t,a){var o=this;if(!(!this.collectionsStateMap||!Object.keys(this.collectionsStateMap).length)){var i=a||t||{};if(a)if(i.add){var c=e;c.syncComponentsCollectionState(),c.onCollectionsStateMapUpdate(this.collectionsStateMap)}else{var d=e;d.stopSyncComponentCollectionState()}else{var l=i.previousModels||[];l.forEach(function(p){return p.stopSyncComponentCollectionState()}),this.components().forEach(function(p){p.syncComponentsCollectionState(),p.onCollectionsStateMapUpdate(o.collectionsStateMap)})}}},r.prototype.__postAdd=function(e){e===void 0&&(e={});var t=this.em,a=t?.UndoManager,o=this.components();a&&!this.__hasUm&&(a.add(o),a.add(this.getSelectors()),this.__hasUm=!0),e.recursive&&o.map(function(i){return i.__postAdd(e)})},r.prototype.__postRemove=function(){var e=this.em,t=e?.UndoManager;t&&(t.remove(this.components()),t.remove(this.getSelectors()),delete this.__hasUm)},r.prototype.__onChange=function(e,t){var a=this,o=this.changedAttributes()||{};(0,_e.keys)(o).forEach(function(i){return a.emitUpdate(i)}),["status","open","toolbar","traits"].forEach(function(i){return delete o[i]}),(0,Zt.isEmptyObj)(o)||(this.__changesUp(t,{changed:o}),this.__propSelfToParent({component:this,changed:o,options:t}))},r.prototype.__onStyleChange=function(e,t){var a=this,o=this,i=o.collectionsStateMap,l=o.em;if(!(!l||t?.noEvent)){var c=(0,_e.keys)(e),d={style:e};this.emitWithEditor(bs.I.styleUpdate,this,d),c.forEach(function(y){return a.emitWithEditor("".concat(bs.I.styleUpdateProperty).concat(y),a,d)});var p=Object.keys(i).filter(function(y){return y!==Ky.rootData});if(p.length!==0){var h=p.every(function(y){var b=i[y];return b.currentIndex===b.startIndex});if(h){var g=Vd(this);g.forEach(function(y){var b=y.collectionsStateMap,v=Object.keys(b),w=v.every(function(C){return p.includes(C)});w&&y.addStyle(Gs({},e),{noEvent:!0})})}}}},r.prototype.__changesUp=function(e,t){var a=this;t===void 0&&(t={});var o=this,i=o.em,l=o.frame;[l,i].forEach(function(c){c?.changesUp(e,Gs({component:a,options:e},t))})},r.prototype.__propSelfToParent=function(e){this.trigger(qv,e),this.__propToParent(e)},r.prototype.__propToParent=function(e){var t=this.parent();t&&t.trigger(GS,e)},r.prototype.__emitUpdateTlb=function(){this.emitUpdate("toolbar")},r.prototype.__getAllById=function(){var e=this.em;return e?e.Components.allById():{}},r.prototype.__upSymbProps=function(e,t){t===void 0&&(t={}),zV(this,t)},r.prototype.__upSymbCls=function(e,t,a){a===void 0&&(a={}),WV(this,a)},r.prototype.__upSymbComps=function(e,t,a){iA(this,e,t,a)},r.prototype.__onDestroy=function(){},r.prototype.is=function(e){return this.get("type")==e},r.prototype.props=function(){return this.attributes},r.prototype.index=function(){var e=this.collection;return e?e.indexOf(this):0},r.prototype.setDragMode=function(e){return this.set("dmode",e)},r.prototype.getDragMode=function(){return this.get("dmode")||""},r.prototype.setSymbolOverride=function(e,t){var a,o;t===void 0&&(t={}),this.set((a={},a[mp]=(o=(0,_e.isString)(e)?[e]:e)!==null&&o!==void 0?o:0,a),t)},r.prototype.getSymbolOverride=function(){return this.get(mp)},r.prototype.find=function(e){var t,a=[],o=(t=this.view)===null||t===void 0?void 0:t.$el.find(e);return o?.each(function(i){var l=o.eq(i),c=l.data("model");c&&a.push(c)}),a},r.prototype.findType=function(e){var t=[],a=function(o){return o.forEach(function(i){i.is(e)&&t.push(i),a(i.components())})};return a(this.components()),t},r.prototype.findFirstType=function(e){return this.findType(e).at(0)},r.prototype.closest=function(e){var t,a=(t=this.view)===null||t===void 0?void 0:t.$el.closest(e);return a?.length?a.data("model"):void 0},r.prototype.closestType=function(e){for(var t=this.parent();t&&!t.is(e);)t=t.parent();return t},r.prototype.contains=function(e){var t=!1;if(!e)return t;var a=function(o){!t&&o.forEach(function(i){i===e&&(t=!0),!t&&a(i.components())})};return a(this.components()),t},r.prototype.tagUpdated=function(){this.trigger("rerender")},r.prototype.replaceWith=function(e,t){t===void 0&&(t={});var a=this.collection,o=a.indexOf(this);a.remove(this);var i=a.add(e,Gs(Gs({},t),{at:o}));return(0,_e.isArray)(i)?i:[i]},r.prototype.attrUpdated=function(e,t,a){var o=this;a===void 0&&(a={});var i=this.get("attributes"),l=i.class;l&&this.setClass(l),delete i.class;var c=i.style;c&&this.setStyle(c,a),delete i.style;var d=Gs({},this.previous("attributes")),p=(0,Zt.shallowDiff)(d,this.get("attributes"));(0,_e.keys)(p).forEach(function(h){var g,y="attributes:".concat(h);o.trigger("change:".concat(y),o,p[h],a),(g=o.em)===null||g===void 0||g.trigger("".concat(qv,":").concat(y),o,p[h],a)})},r.prototype.setAttributes=function(e,t){return t===void 0&&(t={skipWatcherUpdates:!1,fromDataSource:!1}),this.set("attributes",Gs({},e),t),this},r.prototype.addAttributes=function(e,t){t===void 0&&(t={});var a=this.dataResolverWatchers.getValueOrResolver("attributes",this.getAttributes({noClass:!0,noStyle:!0}));return this.setAttributes(Gs(Gs({},a),e),t)},r.prototype.removeAttributes=function(e,t){e===void 0&&(e=[]),t===void 0&&(t={});var a=Array.isArray(e)?e:[e],o=this.getAttributes();return a.map(function(i){return delete o[i]}),this.setAttributes(o,t)},r.prototype.getStyle=function(e,t){var a=this.em,o=(0,_e.isString)(e),i=o?e:"",l=o?t:e,c=!!l?.skipResolve;if(np(a)&&!l?.inline){var d=a.get("state"),p=a.Css,h=p.getIdRule(this.getId(),Gs({state:d},l));return this.rule=h,h?h.getStyle(i,{skipResolve:c}):{}}return s.prototype.getStyle.call(this,i,{skipResolve:c})},r.prototype.setStyle=function(e,t){var a=this;e===void 0&&(e={}),t===void 0&&(t={});var o=this,i=o.opt,l=o.em;if(np(l)&&!i.temporary&&!t.inline){var c=this.get("style")||{};e=(0,_e.isString)(e)?this.parseStyle(e):e,e=Gs(Gs({},c),e);var d=l.get("state"),p=l.Css,h=this.getStyle(Gs(Gs({},t),{skipResolve:!0}));this.rule=p.setIdRule(this.getId(),e,Gs({state:d},t));var g=(0,Zt.shallowDiff)(h,e);this.set("style","",{silent:!0}),(0,_e.keys)(g).forEach(function(y){return a.trigger("change:style:".concat(y))})}else e=s.prototype.setStyle.apply(this,arguments);return i.temporary||this.__onStyleChange(t.addStyle||e,t),e},r.prototype.getAttributes=function(e){e===void 0&&(e={});var t=this.em,a=[],o=Gs({},this.get("attributes")),i=e?.skipResolve?this.dataResolverWatchers.getValueOrResolver("attributes",o):o,l=t?.Selectors,c=this.getId();if(e.noClass?delete i.class:(this.classes.forEach(function(h){return a.push((0,_e.isString)(h)?h:h.getName())}),a.length&&(i.class=a.join(" "))),!e.noStyle){var d=this.getStyle({inline:!0});(0,Zt.isObject)(d)&&!(0,Zt.isEmptyObj)(d)&&(i.style=this.styleToString({inline:!0}))}if(!(0,_e.has)(i,"id")){var p=!1;(np(t)||!(0,_e.isEmpty)(this.getStyle()))&&(p=!!l?.get(c,l.Selector.TYPE_ID)),(cc(this)||this.get("script-export")||this.get("script"))&&(p=!0),p&&(i.id=c)}return i},r.prototype.addClass=function(e){var t=this.em.Selectors.addClass(e);return this.classes.add(t)},r.prototype.setClass=function(e){return this.classes.reset(),this.addClass(e)},r.prototype.removeClass=function(e){var t=[];e=(0,_e.isArray)(e)?e:[e];var a=this.classes,o=ci.TYPE_CLASS;return e.forEach(function(i){var l=i.split(" ");l.forEach(function(c){var d=a.where({name:c,type:o})[0];d&&t.push(a.remove(d))})}),t},r.prototype.getClasses=function(){var e=this.getAttributes(),t=e.class;return t?t.split(" "):[]},r.prototype.initClasses=function(e,t,a){a===void 0&&(a={});var o="change:classes",i=this.get("attributes")||{},l=i.class,c=jH(i,["class"]),d=[this,o,this.initClasses],p=this.get("classes")||l||[],h=(0,_e.isString)(p)?p.split(" "):p;this.stopListening.apply(this,d);var g=this.normalizeClasses(h),y=new Yu([]);return this.set("classes",y,a),y.add(g),y.on("add remove reset",this.__upSymbCls),l&&g.length&&this.set("attributes",c),this.listenTo.apply(this,d),this},r.prototype.initComponents=function(){var e="change:components",t=[this,e,this.initComponents];this.stopListening.apply(this,t);var a=new Qy([],this.opt);a.parent=this;var o=this.get("components"),i=!this.opt.avoidChildren;return this.set("components",a),i&&o&&a.add((0,_e.isFunction)(o)?o(this):o,this.opt),a.on("add remove reset",this.__upSymbComps),this.listenTo.apply(this,t),this},r.prototype.initTraits=function(e){var t=this,a=this.em,o="change:traits";this.off(o,this.initTraits),this.__loadTraits();var i=Gs({},this.get("attributes")),l=this.traits;l.each(function(d){var p=d.getName(),h=d.getInitValue();d.changeProp?(0,_e.isUndefined)(t.get(p))&&t.set(p,h):p&&h&&(i[p]=h)});var c=this.dataResolverWatchers.getValueOrResolver("attributes",i);return l.length&&this.setAttributes(c),this.on(o,this.initTraits),e&&a&&a.trigger("component:toggled"),this},r.prototype.initScriptProps=function(){if(!this.opt.temporary){var e="script-props",t=["change:".concat(e),this.initScriptProps];this.off.apply(this,t);var a=this.previous(e)||[],o=this.get(e)||[],i=a.map(function(c){return"change:".concat(c)}).join(" "),l=o.map(function(c){return"change:".concat(c)}).join(" ");i&&this.off(i,this.__scriptPropsChange),l&&this.on(l,this.__scriptPropsChange),this.on.apply(this,t)}},r.prototype.__scriptPropsChange=function(e,t,a){a===void 0&&(a={}),!a.avoidStore&&this.trigger("rerender")},r.prototype.append=function(e,t){t===void 0&&(t={});var a=(0,_e.isArray)(e)?Gi([],e,!0):[e],o=a.map(function(l){return(0,_e.isString)(l)||l.collection&&l.collection.remove(l,{temporary:!0}),l}),i=this.components().add(o,Gs({action:bs.t.add},t));return i},r.prototype.components=function(e,t){t===void 0&&(t={});var a=this.get("components");return(0,_e.isUndefined)(e)?a:(a.reset(void 0,t),e?this.append(e,t):[])},r.prototype.getChildAt=function(e){return this.components().at(e||0)||void 0},r.prototype.getLastChild=function(){var e=this.components();return e.at(e.length-1)||null},r.prototype.empty=function(e){return e===void 0&&(e={}),this.components().reset(void 0,e),this},r.prototype.parent=function(e){e===void 0&&(e={});var t=this.collection||e.prev&&this.prevColl;return t?t.parent:void 0},r.prototype.parents=function(){var e=this.parent();return e?[e].concat(e.parents()):[]},r.prototype.scriptUpdated=function(){this.set("scriptUpdated",1)},r.prototype.initToolbar=function(){var e=this.em,t=this,a=e&&e.getConfig().stylePrefix||"";if(!t.get("toolbar")&&e){var o=[];t.collection&&o.push({label:e.getIcon("arrowUp"),command:function(i){return i.runCommand("core:component-exit",{force:1})}}),t.get("draggable")&&o.push({attributes:{class:"".concat(a,"no-touch-actions"),draggable:!0},label:e.getIcon("move"),command:"tlb-move"}),t.get("copyable")&&o.push({label:e.getIcon("copy"),command:"tlb-clone"}),t.get("removable")&&o.push({label:e.getIcon("delete"),command:"tlb-delete"}),t.set("toolbar",o)}},r.prototype.__loadTraits=function(e,t){t===void 0&&(t={});var a=e||this.traits;if(!(a instanceof vb)){a=(0,_e.isFunction)(a)?a(this):a;var o=new vb([],this.opt);o.setTarget(this),a.length&&o.add(a),this.set({traits:o},t)}return this},r.prototype.getTraits=function(){return this.__loadTraits(),Gi([],this.traits.models,!0)},r.prototype.setTraits=function(e){var t=(0,_e.isArray)(e)?e:[e];return this.set({traits:t}),this.getTraits()},r.prototype.getTrait=function(e){return this.getTraits().filter(function(t){return t.get("id")===e||t.get("name")===e})[0]||null},r.prototype.updateTrait=function(e,t){var a,o=this.getTrait(e);return o&&o.set(t),(a=this.em)===null||a===void 0||a.trigger("component:toggled"),this},r.prototype.getTraitIndex=function(e){var t=this.getTrait(e);return t?this.traits.indexOf(t):-1},r.prototype.removeTrait=function(e){var t=this,a,o=(0,_e.isArray)(e)?e:[e],i=o.map(function(d){return t.getTrait(d)}),l=this.traits,c=i.length?l.remove(i):[];return(a=this.em)===null||a===void 0||a.trigger("component:toggled"),(0,_e.isArray)(c)?c:[c]},r.prototype.addTrait=function(e,t){var a;t===void 0&&(t={}),this.__loadTraits();var o=this.traits.add(e,t);return(a=this.em)===null||a===void 0||a.trigger("component:toggled"),(0,_e.isArray)(o)?o:[o]},r.prototype.normalizeClasses=function(e){var t=[],a=this.em,o=a?.Selectors;return o?e.models?Gi([],e.models,!0):(e.forEach(function(i){return t.push(o.add(i))}),t):[]},r.prototype.clone=function(e){var t;e===void 0&&(e={});var a=this.em,o=this.dataResolverWatchers.getProps(this.attributes),i=Gs({},this.opt),l=this.getId(),c=a?.Css;o.components=[],o.classes=[],o.traits=[],Tp(this)&&(e.symbol=!0),this.get("components").each(function(w,C){o.components[C]=w.clone(Gs(Gs({},e),{_inner:1}))}),this.get("traits").each(function(w,C){o.traits[C]=w.clone()}),this.get("classes").each(function(w,C){o.classes[C]=w.get("name")}),o.status="",i.collection=null,i.forCloning=!0;var d=new this.constructor(o,i),p="#".concat(d.getId()),h=c?c.getRules("#".concat(l)):[];h.forEach(function(w){var C=w.clone();C.set("selectors",[p]),c.getAll().add(C)}),d.set(oi,0);var g=_l(this),y=Oi(this);if(!e.symbol&&(g||y))d.set(_i,0),d.set(oi,0);else if(g){var b=(t=Oi(g))!==null&&t!==void 0?t:[];g.set(oi,Gi(Gi([],b,!0),[d],!1)),Xg(d)}else e.symbol&&(hp(this)?(this.set(oi,Gi(Gi([],y,!0),[d],!1)),d.set(_i,this),Xg(d)):e.symbolInv?(this.set(oi,[d]),d.set(_i,this),[this,d].map(function(w){return Xg(w)})):(d.set(oi,[this]),[this,d].map(function(w){return Xg(w)}),this.set(_i,d)));var v="component:clone";return a&&a.trigger(v,d),this.trigger(v,d),d},r.prototype.getName=function(e){e===void 0&&(e={});var t=this.em,a=this.attributes,o=a.type,i=a.tagName,l=a.name,c=o||i,d=o?"":i,p="domComponents.names.",h=l&&t?.t("".concat(p).concat(l)),g=d&&t?.t("".concat(p).concat(d)),y=t&&(t.t("".concat(p).concat(o))||t.t("".concat(p).concat(i))),b=this.get("custom-name");return(e.noCustom?"":b)||h||l||g||(0,Zt.capitalize)(d)||y||(0,Zt.capitalize)(c)},r.prototype.setName=function(e,t){t===void 0&&(t={}),this.set("custom-name",e,t)},r.prototype.getIcon=function(){var e=this.get("icon");return e?e+" ":""},r.prototype.toHTML=function(e){e===void 0&&(e={});var t=e.tag,a=t||this.get("tagName");delete e.tag;var o=this.__attrToString(e),i=o?" ".concat(o):"",l=this.getInnerHTML(e),c=!l&&this.get("void"),d="<".concat(a).concat(i).concat(c?"/":"",">").concat(l);return!c&&(d+="</".concat(a,">")),d},r.prototype.getInnerHTML=function(e){return this.__innerHTML(e)},r.prototype.__innerHTML=function(e){e===void 0&&(e={});var t=this.components();return t.length?t.map(function(a){return a.toHTML(e)}).join(""):this.content},r.prototype.__attrToString=function(e){e===void 0&&(e={});var t=[],a=e.attributes,o=this.getAttrToHTML(e);if(a&&((0,_e.isFunction)(a)?o=a(this,o)||{}:(0,Zt.isObject)(a)&&(o=a)),e.withProps){var i=this.toJSON();(0,_e.forEach)(i,function(h,g){var y=["classes","attributes","components"];g[0]!=="_"&&y.indexOf(g)<0&&(o["data-gjs-".concat(g)]=(0,_e.isArray)(h)||(0,Zt.isObject)(h)?JSON.stringify(h):(0,_e.isBoolean)(h)?"".concat(h):h)})}for(var l in o){var c=o[l];if(!(0,_e.isUndefined)(c)&&c!==null)if((0,_e.isBoolean)(c))c&&t.push(l);else{var d="";if(e.altQuoteAttr&&(0,_e.isString)(c)&&c.indexOf('"')>=0)d="'".concat((0,Zt.escapeAltQuoteAttrValue)(c),"'");else{var p=(0,_e.isString)(c)?(0,Zt.escapeAttrValue)(c):c;d='"'.concat(p,'"')}t.push("".concat(l,"=").concat(d))}}return t.join(" ")},r.prototype.getAttrToHTML=function(e){var t=this.getAttributes();return np(this.em)&&e?.keepInlineStyle!==!0&&delete t.style,t},r.prototype.toJSON=function(e){e===void 0&&(e={});var t=s.prototype.toJSON.call(this,e,{attributes:this.getAttributes()});if(delete t.dataResolverWatchers,delete t.attributes.class,delete t.toolbar,delete t.traits,delete t.status,delete t.open,delete t._undoexc,delete t.delegate,this.collectionsStateMap&&Object.getOwnPropertyNames(this.collectionsStateMap).length>0&&(delete t[_i],delete t[mp],delete t[oi]),!e.fromUndo){var a=t[_i],o=t[oi];o&&(0,_e.isArray)(o)&&(t[oi]=o.filter(function(i){return i}).map(function(i){return i.getId?i.getId():i})),a&&!(0,_e.isString)(a)&&(t[_i]=a.getId())}return this.em.getConfig().avoidDefaults&&this.getChangedProps(t),t},r.prototype.getChangedProps=function(e){var t=e||B2.Model.prototype.toJSON.apply(this),a=(0,_e.result)(this,"defaults");return(0,_e.forEach)(a,function(o,i){["type"].indexOf(i)===-1&&t[i]===o&&delete t[i]}),(0,_e.isEmpty)(t.type)&&delete t.type,(0,_e.forEach)(["attributes","style"],function(o){(0,_e.isEmpty)(a[o])&&(0,_e.isEmpty)(t[o])&&delete t[o]}),(0,_e.forEach)(["classes","components"],function(o){(!t[o]||(0,_e.isEmpty)(a[o])&&!t[o].length)&&delete t[o]}),t},r.prototype.getId=function(){var e=this.get("attributes")||{},t=XV(this),a=t.shouldSync,o=t.itemId;return a&&(e.id=o),e.id||this.ccid||this.cid},r.prototype.setId=function(e,t){return this.addAttributes({id:e},t),this},r.prototype.getEl=function(e){var t=this.getView(e);return t&&t.el},r.prototype.getView=function(e){var t=this,a=t.view,o=t.views,i=t.em,l=e||i?.getCurrentFrameModel();return l&&(a=o.filter(function(c){return c.frameView===l.view})[0]),a},r.prototype.getCurrentView=function(){var e=this.em.getCurrentFrame(),t=e?.model;return this.getView(t)},r.prototype.__getScriptProps=function(){var e=this.props(),t=this.get("script-props")||[];return t.reduce(function(a,o){return a[o]=e[o],a},{})},r.prototype.getScriptString=function(e){var t=this,a=e||this.get("script")||"";if(!a)return a;if(this.get("script-props"))a=a.toString().trim();else{if((0,_e.isFunction)(a)){var o=a.toString().trim();o=o.slice(o.indexOf("{")+1,o.lastIndexOf("}")),a=o.trim()}var i=this.em.getConfig(),l=SE(i.tagVarStart||"{[ "),c=SE(i.tagVarEnd||" ]}"),d=new RegExp("".concat(l,"([\\w\\d-]*)").concat(c),"g");a=a.replace(d,function(p,h){t.scriptUpdated();var g=t.attributes[h]||"";return(0,_e.isArray)(g)||typeof g=="object"?JSON.stringify(g):g})}return a},r.prototype.emitUpdate=function(e){for(var t,a=[],o=1;o<arguments.length;o++)a[o-1]=arguments[o];var i=this.em,l=qv+(e?":".concat(e):""),c=e&&this.get(e);e&&this.updated.apply(this,Gi([e,c,e&&this.previous(e)],a,!1)),this.trigger.apply(this,Gi([l],a,!1)),i&&i.trigger.apply(i,Gi([l,this],a,!1)),["components","classes"].indexOf(e)>=0&&this.__propSelfToParent({component:this,changed:(t={},t[e]=c,t),options:a[2]||a[1]||{}})},r.prototype.emitWithEditor=function(e,t,a){[this.em,this].forEach(function(o){return o?.trigger(e,t,a)})},r.prototype.onAll=function(e){return(0,_e.isFunction)(e)&&(e(this),this.components().forEach(function(t){return t.onAll(e)})),this},r.prototype.forEachChild=function(e){(0,_e.isFunction)(e)&&this.components().forEach(function(t){e(t),t.forEachChild(e)})},r.prototype.remove=function(e){var t=this;e===void 0&&(e={});var a=this.em,o=this.collection,i=function(){o&&o.remove(t,Gs({action:bs.t.remove},e)),o||(t.components("",e),t.components().removeChildren(t,void 0,e))},l=Gs({},e);return[this,a].map(function(c){return c.trigger(bs.I.removeBefore,t,i,l)}),!l.abort&&i(),this},r.prototype.destroy=function(e){return this.stopListening(this.components(),"add remove reset",this.syncOnComponentChange),this.dataResolverWatchers.destroy(),this.__onDestroy(),s.prototype.destroy.call(this,e)},r.prototype.move=function(e,t){if(t===void 0&&(t={}),e){var a=t.at,o=this.index(),i=e===this.parent(),l=o===a||o===a-1;if(!i||!l){i&&a&&a>o&&(t.at=a-1);var c=bs.t.move;this.remove({action:c,temporary:1}),e.append(this,Gs({action:c},t)),this.emitUpdate()}}return this},r.prototype.isInstanceOf=function(e){var t,a,o=(a=(t=this.em)===null||t===void 0?void 0:t.Components.getType(e))===null||a===void 0?void 0:a.model;if(!o)return!1;var i=this.constructor.typeExtends;return this instanceof o||i.has(e)},r.prototype.isChildOf=function(e){for(var t=(0,_e.isString)(e),a=this.parent();a;){if(t){if(a.isInstanceOf(e))return!0}else if(a===e)return!0;a=a.parent()}return!1},r.prototype.resetId=function(e){var t=this.em,a=this.getId();if(!a)return this;var o=r.createId(this);this.setId(o);var i=t?.Css.getIdRule(a),l=i?.get("selectors").at(0);return l?.set("name",o),this},r.prototype._getStyleRule=function(e){var t=e===void 0?{}:e,a=t.id,o=this.em,i=a||this.getId();return o?.Css.getIdRule(i)},r.prototype._getStyleSelector=function(e){var t=this._getStyleRule(e);return t?.get("selectors").at(0)},r.prototype._moveInlineStyleToRule=function(){var e=this.get("style"),t=(0,_e.isString)(e)&&e.length>0||(0,Zt.isObject)(e)&&Object.keys(e).length>0;np(this.em)&&t&&this.addStyle((0,Zt.isObject)(e)?this.dataResolverWatchers.getValueOrResolver("styles",e):e,{avoidStore:!0,noUndo:!0})},r.prototype._idUpdated=function(e,t,a){if(a===void 0&&(a={}),!a.idUpdate){var o=this.ccid,i=(this.get("attributes")||{}).id,l=(this.previous("attributes")||{}).id||o,c=r.getList(this);if(c[i]||!i&&l)return this.setId(l,{idUpdate:!0});delete c[l],c[i]=this,this.ccid=i;var d=this._getStyleSelector({id:l});d&&d.set({name:i,label:i})}},r.getDefaults=function(){return(0,_e.result)(this.prototype,"defaults")},r.isComponent=function(e,t){return{tagName:(0,Zt.toLowerCase)(e.tagName)}},r.ensureInList=function(e){var t=r.getList(e),a=e.getId(),o=t[a];if(!o)t[a]=e;else if(o!==e){var i=r.getIncrementId(a,t);e.setId(i),t[i]=e}e.components().forEach(function(l){return r.ensureInList(l)})},r.createId=function(e,t){t===void 0&&(t={});var a=r.getList(e),o=t.idMap,i=o===void 0?{}:o,l=e.get("attributes").id,c;return l?(c=r.getIncrementId(l,a,t),e.setId(c),l!==c&&(i[l]=c)):c=r.getNewId(a),a[c]=e,c},r.getNewId=function(e){for(var t=Object.keys(e).length,a=t.toString().length+2,o=(Math.random()+1.1).toString(36).slice(-a),i="i".concat(o);e[i];)i=r.getNewId(e);return i},r.getIncrementId=function(e,t,a){a===void 0&&(a={});var o=a.keepIds,i=o===void 0?[]:o,l=1,c=e;if(i.indexOf(e)<0)for(;t[c];)l++,c="".concat(e,"-").concat(l);return c},r.getList=function(e){var t,a=e.em,o=a?.Components;return(t=o?.componentsById)!==null&&t!==void 0?t:{}},r.checkId=function(e,t,a,o){t===void 0&&(t=[]),a===void 0&&(a={}),o===void 0&&(o={}),o.updatedIds=o.updatedIds||{};var i=(0,_e.isArray)(e)?e:[e],l=o.keepIds,c=l===void 0?[]:l,d=o.idMap,p=d===void 0?{}:d,h=o.updatedIds;return i.forEach(function(g){g.attributes;var y=g.attributes,b=y===void 0?{}:y,v=g.components,w=b.id;if(w&&a[w]&&c.indexOf(w)<0){var C=r.getIncrementId(w,a);h[w]=h[w]?Gi(Gi([],h[w],!0),[g],!1):[g],p[w]=C,b.id=C,(0,_e.isArray)(t)&&t.forEach(function(k){var N=k.selectors;N.forEach(function(O,R){O==="#".concat(w)&&(N[R]="#".concat(C))})})}v&&r.checkId(v,t,a,o)}),{updatedIds:o.updatedIds}},r.typeExtends=new Set,r})(fA);const Wa=CH;var SH=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),bb=function(){return bb=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},bb.apply(this,arguments)},dm="head",NH=["title","style","base","link","meta","script","noscript"],kH=(function(s){SH(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return bb(bb({},s.prototype.defaults),{type:dm,tagName:dm,draggable:!1,highlightable:!1,droppable:(function(e){var t=e.tagName;return!t||NH.includes((0,Zt.toLowerCase)(t))})})},enumerable:!1,configurable:!0}),r.isComponent=function(e){return(0,Zt.toLowerCase)(e.tagName)===dm},r})(Wa);const _H=kH;var EH=(function(){function s(r,e){r===void 0&&(r=50);var t;this.dragging=!1,this.lastMaxHeight=0,this.zoom=1,this.rectIsInScrollIframe=!1,this.autoscrollLimit=r,this.lastMaxHeight=(t=e?.lastMaxHeight)!==null&&t!==void 0?t:0,this.onScroll=e?.onScroll,this.rectIsInScrollIframe=!!e?.rectIsInScrollIframe,(0,_e.bindAll)(this,"start","autoscroll","updateClientY","stop")}return s.prototype.start=function(r,e,t){var a=this;this.eventEl=r,this.scrollEl=e,this.lastMaxHeight=t?.lastMaxHeight||Number.POSITIVE_INFINITY,this.zoom=t?.zoom||1,this.ignoredElement=t?.ignoredElement,setTimeout(function(){a.toggleAutoscrollFx(!0),requestAnimationFrame(a.autoscroll)},0)},s.prototype.autoscroll=function(){var r=this,e,t,a=this.scrollEl;if(!(!this.dragging||!a)){if(this.lastClientY===void 0){setTimeout(function(){requestAnimationFrame(r.autoscroll)},50);return}var o=(e=this.lastClientY)!==null&&e!==void 0?e:0,i=this.autoscrollLimit,l=this.getEventElHeight(),c=l-i,d=0;o<i&&(d+=o-i),o>c&&(d+=o-c);var p=this.getElScrollTop(a);d=Math.min(d,this.lastMaxHeight-p),d=Math.max(d,-p),d!==0&&(a.scrollBy({top:d,behavior:"auto"}),(t=this.onScroll)===null||t===void 0||t.call(this)),requestAnimationFrame(this.autoscroll)}},s.prototype.getEventElHeight=function(){var r=this.eventEl;if(!r)return 0;var e=r.getBoundingClientRect();return e.height},s.prototype.updateClientY=function(r){var e=r.target;if(!(this.ignoredElement&&this.ignoredElement.contains(e))){var t=this.scrollEl;r.preventDefault();var a=this.rectIsInScrollIframe?0:this.getElScrollTop(t);this.lastClientY=(0,Ar.G2)(r).clientY*this.zoom-a}},s.prototype.getElScrollTop=function(r){return(r instanceof HTMLElement?r.scrollTop:r?.scrollY)||0},s.prototype.toggleAutoscrollFx=function(r){this.dragging=r;var e=this.eventEl;if(e){var t=r?"on":"off",a={on:Ar.on,off:Ar.AU};a[t](e,"mousemove dragover",this.updateClientY),a[t](e,"mouseup",this.stop)}},s.prototype.stop=function(){this.toggleAutoscrollFx(!1),this.lastClientY=void 0,this.ignoredElement=void 0},s})();const bA=EH;var TH=fs(1447),OH=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),PH=(function(s){OH(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.canMove=function(e,t){var a=this,o=this.getRealIndex(t),i=e._dragSource,l=i.model,c=i.content,d=i.dragDef,p=!l||!this.isSourceSameSymbol(l),h=((0,_e.isFunction)(c)?d:c)||e.model;return Array.isArray(h)?p&&h.every(function(g,y){return a.canMoveSingleContent(g,o+y)}):p&&this.canMoveSingleContent(h,o)},r.prototype.canMoveSingleContent=function(e,t){return this.model.em.Components.canMove(this.model,e,t).result},r.prototype.addChildAt=function(e,t){var a=e._dragSource,o=a.content,i=this.isTextNode()&&e.isTextable(),l=(0,_e.isFunction)(o)?o():o;return Array.isArray(l)?this.addMultipleChildren(l,t,i):this.addSingleChild(l,t,i)},r.prototype.addSingleChild=function(e,t,a){var o,i,l,c,d;return a?d=(c=(l=(i=(o=this.model)===null||o===void 0?void 0:o.getView)===null||i===void 0?void 0:i.call(o))===null||l===void 0?void 0:l.insertComponent)===null||c===void 0?void 0:c.call(l,e,{action:"add-component"}):d=this.model.components().add(e,{at:this.getRealIndex(t),action:"add-component"}),new this.constructor(d)},r.prototype.addMultipleChildren=function(e,t,a){var o=this,i;return e.forEach(function(l,c){i=o.addSingleChild(l,t+c,a)}),i},r.prototype.isSourceSameSymbol=function(e){if(cc(this.model)){var t=Xy(this.model),a=hp(t)?t:_l(t);if(a===e)return!0}return!1},Object.defineProperty(r.prototype,"content",{set:function(e){this._dragSource.content=e},enumerable:!1,configurable:!0}),r})(TH.A);const wA=PH;var Op=fs(8433),KS=function(){return KS=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},KS.apply(this,arguments)},AH=(function(){function s(r,e){var t=this;this.em=r,this.canvas=r.Canvas;var a=e||this.canvas.getFrames().map(function(i){return i.getComponent().getEl()}),o=Array.isArray(a)?a:[a];this.el=o[0],this.counter=0,(0,_e.bindAll)(this,"handleDragEnter","handleDragOver","handleDrop","handleDragLeave","handleDragEnd"),o.forEach(function(i){return t.toggleEffects(i,!0)})}return s.prototype.toggleEffects=function(r,e){var t={on:Ar.on,off:Ar.AU},a=e?"on":"off";t[a](r,"dragenter",this.handleDragEnter),t[a](r,"dragover",this.handleDragOver),t[a](r,"drop",this.handleDrop),t[a](r,"dragleave",this.handleDragLeave)},s.prototype.__customTglEff=function(r){var e,t=r?Ar.on:Ar.AU,a=this.el.ownerDocument,o=(e=a.defaultView)===null||e===void 0?void 0:e.frameElement,i=function(l){return{legacyOnStartSort:function(){(0,Ar.on)(o,"pointermove",l.onMove)},legacyOnEnd:function(){(0,Ar.AU)(o,"pointermove",l.onMove)},customTarget:function(c){var d=c.event;return a.elementFromPoint(d.clientX,d.clientY)}}};this.getSorterOptions=r?i:void 0,t(o,"pointerenter",this.handleDragEnter),t(o,"pointermove",this.handleDragOver),t(document,"pointerup",this.handleDrop),t(o,"pointerout",this.handleDragLeave)},s.prototype.startCustom=function(){this.__customTglEff(!0)},s.prototype.endCustom=function(r){this.over?this.endDrop(r):this.__customTglEff(!1)},s.prototype.endDrop=function(r,e){var t=this,a=t.em,o=t.dragStop;this.counter=0,o&&o(r||!this.over),this.__customTglEff(!1),a.trigger("canvas:dragend",e)},s.prototype.handleDragLeave=function(r){this.updateCounter(-1,r)},s.prototype.updateCounter=function(r,e){this.counter+=r,this.counter===0&&this.endDrop(!0,e)},s.prototype.handleDragEnter=function(r){var e=this,t,a,o=this,i=o.em,l=o.canvas,c=r.dataTransfer,d=i.get("dragSource");if(!(!d?.content&&!l.getConfig().allowExternalDrop)&&(this.updateCounter(1,r),!this.over)){this.over=!0;var p=i.Utils,h=d?.content||"<br>",g;if(i.stopDefault(),i.inAbsoluteMode()){var y=i.Components.getWrapper(),b=y.append({})[0],v=i.Commands.run("core:component-drag",{event:r,guidesInfo:1,center:1,target:b,onEnd:function(L,B,G){var $=G.cancelled,z;if(!$&&h){z=y.append(h)[0];var Y=l.getOffset(),M=b.getStyle(),q=M.top,P=M.left,H=M.position,D=(0,Ar.Xy)(L.target),X=parseInt("".concat(parseFloat(P)+D.x-Y.left),10),se=parseInt("".concat(parseFloat(q)+D.y-Y.top),10);z.addStyle({left:X+"px",top:se+"px",position:H})}e.handleDragEnd(z,c),b.remove()}});g=function(L){return v.stop(r,{cancel:L})},this.setAbsoluteDragContent=function(L){return h=L}}else{var w=new p.ComponentSorter({em:i,treeClass:wA,containerContext:{container:this.el,containerSel:"*",itemSel:"*",pfx:"gjs-",placeholderElement:l.getPlacerEl(),document:this.el.ownerDocument},dragBehavior:{dragDirection:Op.A.BothDirections,nested:!0},positionOptions:{windowMargin:1,canvasRelative:!0},eventHandlers:{legacyOnEndMove:this.handleDragEnd}}),C=(t=this.getSorterOptions)===null||t===void 0?void 0:t.call(this,w);C&&(w.eventHandlers.legacyOnStartSort=C.legacyOnStart,w.eventHandlers.legacyOnEnd=C.legacyOnEnd,w.containerContext.customTarget=C.customTarget);var k=i.Components.getShallowWrapper(),N=k?.append(h,{temporary:!0})[0],O=N?.getEl(),R=[{element:O,dragSource:KS({model:N},d)}];w.startSort(R),this.sorter=w,this.draggedNode=(a=w.sourceNodes)===null||a===void 0?void 0:a[0],g=function(L){L?w.cancelDrag():w.endDrag()}}this.dragStop=g,i.trigger("canvas:dragenter",c,h)}},s.prototype.handleDragEnd=function(r,e){var t=this.em;this.over=!1,r&&(t.set("dragResult",r),t.trigger("canvas:drop",e,r)),t.runDefault({preserveSelected:1})},s.prototype.handleDragOver=function(r){r.preventDefault(),this.em.trigger("canvas:dragover",r)},s.prototype.handleDrop=function(r){var e;r.preventDefault();var t=r.dataTransfer,a=this.getContentByData(t).content||"";this.draggedNode&&(this.draggedNode.content=a),(e=this.setAbsoluteDragContent)===null||e===void 0||e.call(this,a),this.endDrop(!a,r)},s.prototype.getContentByData=function(r){var e=this.em,t=r?.types||[],a=r?.files||[],o=e.get("dragSource"),i=r?.getData("text")||"";if(a.length){i=[];for(var l=0;l<a.length;l++){var c=a[l],d=c.type.split("/")[0];d=="image"&&i.push({type:d,file:c,attributes:{alt:c.name}})}}else if(o?.content)i=o.content;else if((0,_e.indexOf)(t,"text/html")>=0)i=r&&r.getData("text/html").replace(/<\/?meta[^>]*>/g,"");else if((0,_e.indexOf)(t,"text/uri-list")>=0)i={type:"link",attributes:{href:i},content:i};else if((0,_e.indexOf)(t,"text/json")>=0){var p=r&&r.getData("text/json");p&&(i=JSON.parse(p))}else t.length===1&&t[0]==="text/plain"&&(i="<div>".concat(i,"</div>"));var h={content:i,setContent:function(g){h.content=g}};return e.trigger("canvas:dragdata",r,h),h},s})();const MH=AH;var IH=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),ml=function(){return ml=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},ml.apply(this,arguments)},RH=function(s,r,e){if(e||arguments.length===2)for(var t=0,a=r.length,o;t<a;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return s.concat(o||Array.prototype.slice.call(r))},DH=(function(s){IH(r,s);function r(e,t){var a=s.call(this,{model:e})||this;a.dragging=!1,a.loaded=!1,a.lastMaxHeight=0,a.tools={},(0,_e.bindAll)(a,"startAutoscroll","stopAutoscroll","_emitUpdate");var o=a.el;a.module._config=ml(ml({},a.config||{}),{frameView:a}),a.frameWrapView=t,a.showGlobalTools=(0,_e.debounce)(a.showGlobalTools.bind(a),50);var i=a.getCanvasModel();return a.listenTo(e,"change:head",a.updateHead),a.listenTo(i,"change:styles",a.renderStyles),e.view=a,(0,Zt.setViewEl)(o,a),a.autoScroller=new bA(a.config.autoscrollLimit,{rectIsInScrollIframe:!0,onScroll:function(){var l=a.getGlobalToolsEl();l.style.opacity="0",a.showGlobalTools(),a.em.Canvas.spots.refreshDbn()}}),a}return Object.defineProperty(r.prototype,"tagName",{get:function(){return"iframe"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"attributes",{get:function(){return{allowfullscreen:"allowfullscreen"}},enumerable:!1,configurable:!0}),r.prototype.getBoxRect=function(){var e=this,t=e.el,a=e.module,o=a.getCanvasView(),i=a.getCoords(),l=t.getBoundingClientRect(),c=o.getCanvasOffset(),d=o.getViewportDelta(),p=a.getZoomMultiplier(),h=(l.x-c.left-d.x-i.x)*p,g=(l.y-c.top-d.y-i.y)*p,y=l.width*p,b=l.height*p;return{x:h,y:g,width:y,height:b}},r.prototype.updateHead=function(){var e=this.model,t=this.getHead(),a=[],o=[],i=e.head,l=e.previous("head"),c=function(p){return p===void 0&&(p={}),Object.keys(p).sort().map(function(h){return"[".concat(h,'="').concat(p[h],'"]')}).join("")},d=function(p,h,g){p.forEach(function(y){var b=y.tag,v=y.attributes,w=h.some(function(C){return C.tag===b&&c(C.attributes)===c(v)});!w&&g.push(y)})};d(i,l,o),d(l,i,a),a.forEach(function(p){var h,g=t.querySelector("".concat(p.tag).concat(c(p.attributes)));(h=g?.parentNode)===null||h===void 0||h.removeChild(g)}),(0,Ar.af)(t,o)},r.prototype.getEl=function(){return this.el},r.prototype.getCanvasModel=function(){var e;return(e=this===null||this===void 0?void 0:this.em.Canvas)===null||e===void 0?void 0:e.getModel()},r.prototype.getWindow=function(){return this.getEl().contentWindow},r.prototype.getDoc=function(){return this.getEl().contentDocument},r.prototype.getHead=function(){return this.getDoc().querySelector("head")},r.prototype.getBody=function(){return this.getDoc().querySelector("body")},r.prototype.getWrapper=function(){return this.getBody().querySelector("[data-gjs-type=wrapper]")},r.prototype.getJsContainer=function(){return this.jsContainer||(this.jsContainer=(0,Ar.a_)("div",{class:"".concat(this.ppfx,"js-cont")})),this.jsContainer},r.prototype.getToolsEl=function(){var e;return(e=this.frameWrapView)===null||e===void 0?void 0:e.elTools},r.prototype.getGlobalToolsEl=function(){return this.em.Canvas.getGlobalToolsEl()},r.prototype.getHighlighter=function(){return this._getTool("[data-hl]")},r.prototype.getBadgeEl=function(){return this._getTool("[data-badge]")},r.prototype.getOffsetViewerEl=function(){return this._getTool("[data-offset]")},r.prototype.getRect=function(){return this.rect||(this.rect=this.el.getBoundingClientRect()),this.rect},r.prototype.getOffsetRect=function(){var e=this.el,t=this.getBody(),a=t.scrollTop,o=t.scrollLeft,i=e.offsetHeight,l=e.offsetWidth;return{top:e.offsetTop,left:e.offsetLeft,height:i,width:l,scrollTop:a,scrollLeft:o,scrollBottom:a+i,scrollRight:o+l}},r.prototype._getTool=function(e){var t=this.tools,a=this.getToolsEl();return t[e]||(t[e]=a.querySelector(e)),t[e]},r.prototype.remove=function(){for(var e,t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return this._toggleEffects(!1),this.tools={},(e=this.wrapper)===null||e===void 0||e.remove(),El.prototype.remove.apply(this,t),this},r.prototype.startAutoscroll=function(){this.autoScroller.start(this.el,this.getWindow(),{lastMaxHeight:this.getWrapper().offsetHeight-this.el.offsetHeight,zoom:this.em.getZoomDecimal(),ignoredElement:this.em.Canvas.getSpotsEl()})},r.prototype.stopAutoscroll=function(){this.autoScroller.stop()},r.prototype.showGlobalTools=function(){this.getGlobalToolsEl().style.opacity=""},r.prototype.render=function(){var e=this,t=e.$el,a=e.ppfx,o=e.em;return t.attr({class:"".concat(a,"frame")}),this.renderScripts(),o.trigger("frame:render",this),this},r.prototype.renderScripts=function(){var e=this,t=this,a=t.el,o=t.model,i=t.em,l="frame:load",c={el:a,model:o,view:this},d=this.getCanvasModel(),p=function(h){var g;if(h.length>0){var y=h.shift(),b=(0,Ar.a_)("script",ml({type:"text/javascript"},(0,_e.isString)(y)?{src:y}:y));(g=a.contentDocument)===null||g===void 0||g.head.appendChild(b),b.hasAttribute("nomodule")&&"noModule"in HTMLScriptElement.prototype?p(h):b.onerror=b.onload=p.bind(null,h)}else i?.trigger(Oy.frameLoadHead,c),e.renderBody(),i?.trigger(Oy.frameLoadBody,c),i?.trigger(l,c)};a.onload=function(){var h=e.config.frameContent;if(h){var g=e.getDoc();g.open(),g.write(h),g.close()}c.window=e.getWindow(),i?.trigger("".concat(l,":before"),c),i?.trigger(Oy.frameLoad,c),e.renderHead(),p(RH([],d.get("scripts"),!0))}},r.prototype.renderStyles=function(e){e===void 0&&(e={});var t=this.getHead(),a=this.getCanvasModel(),o=function(h){return h===void 0&&(h=[]),h.map(function(g){return{tag:"link",attributes:ml({rel:"stylesheet"},(0,_e.isString)(g)?{href:g}:g)}})},i=o(e.prev||a.previous("styles")),l=o(a?.get("styles")),c=[],d=[],p=function(h,g,y){h.forEach(function(b){var v=b.attributes.href,w=g.some(function(C){return C.attributes.href===v});!w&&y.push(b)})};p(l,i,d),p(i,l,c),c.forEach(function(h){var g,y=t.querySelector('link[href="'.concat(h.attributes.href,'"]'));(g=y?.parentNode)===null||g===void 0||g.removeChild(y)}),(0,Ar.af)(t,d)},r.prototype.renderHead=function(){var e,t=this,a=t.model,o=t.em,i=a.root,l=(e=o?.Components)===null||e===void 0?void 0:e.getType(dm).view;l&&(this.headView=new l({el:this.getHead(),model:i.head,config:ml(ml({},i.config),{frameView:this})}).render())},r.prototype.renderBody=function(){var e=this,t,a=this,o=a.config,i=a.em,l=a.model,c=a.ppfx,d=this.getBody(),p=this.getWindow(),h=l.hasAutoHeight(),g=i.config;p._isEditor=!0,this.renderStyles({prev:[]});var y="#ffca6f";(0,Ar.BC)(d,`<style>
      `.concat(g.baseCss||o.frameStyle||"",`

      `).concat(h?"body { overflow: hidden }":"",`

      [data-gjs-type="wrapper"] {
        `).concat(h?"":"min-height: 100vh;",`
        padding-top: 0.001em;
      }

      .`).concat(c,`dashed *[data-gjs-highlightable] {
        outline: 1px dashed rgba(170,170,170,0.7);
        outline-offset: -2px;
      }

      .`).concat(c,`selected {
        outline: 2px solid #3b97e3 !important;
        outline-offset: -2px;
      }

      .`).concat(c,`selected-parent {
        outline: 2px solid `).concat(y,` !important
      }

      .`).concat(c,`no-select {
        user-select: none;
        -webkit-user-select:none;
        -moz-user-select: none;
      }

      .`).concat(c,`freezed {
        opacity: 0.5;
        pointer-events: none;
      }

      .`).concat(c,`no-pointer {
        pointer-events: none;
      }

      .`).concat(c,`pointer-init {
        pointer-events: initial;
      }

      .`).concat(c,`plh-image {
        background: #f5f5f5;
        border: none;
        height: 100px;
        width: 100px;
        display: block;
        outline: 3px solid #ffca6f;
        cursor: pointer;
        outline-offset: -2px
      }

      .`).concat(c,`grabbing {
        cursor: grabbing;
        cursor: -webkit-grabbing;
      }

      .`).concat(c,`is__grabbing {
        overflow-x: hidden;
      }

      .`).concat(c,`is__grabbing,
      .`).concat(c,`is__grabbing * {
        cursor: grabbing !important;
      }

      `).concat(g.canvasCss||"",`
      `).concat(g.protectedCss||"",`
    </style>`));var b=l.root,v=(((t=i?.Components)===null||t===void 0?void 0:t.getType("wrapper"))||{}).view;v&&((0,_e.isFunction)(o.customRenderer)?o.customRenderer({editor:i.Editor,frame:l,window:p,frameView:this,onMount:function(w){e.wrapper=w,e._onRootMount(w)}}):(this.wrapper=new v({model:b,config:ml(ml({},b.config),{em:i,frameView:this})}).render(),this._onRootMount(this.wrapper)))},r.prototype._onRootMount=function(e){var t=this,a,o=this,i=o.config,l=o.em,c=o.model,d=this.getDoc(),p=d.body;(0,Ar.BC)(p,e.el),(0,Ar.BC)(p,new US({collection:c.getStyles(),config:ml(ml({},l.Css.getConfig()),{frameView:this})}).render().el),(0,Ar.BC)(p,this.getJsContainer()),(0,Ar.on)(p,"click",function(h){var g;return h&&((g=h.target)===null||g===void 0?void 0:g.tagName)=="A"&&h.preventDefault()}),(0,Ar.on)(p,"submit",function(h){return h&&h.preventDefault()}),[{event:"keydown keyup keypress",class:"KeyboardEvent"},{event:"mousedown mousemove mouseup",class:"MouseEvent"},{event:"pointerdown pointermove pointerup",class:"PointerEvent"},{event:"wheel",class:"WheelEvent",opts:{passive:!i.infiniteCanvas}}].forEach(function(h){return h.event.split(" ").forEach(function(g){d.addEventListener(g,function(y){return t.el.dispatchEvent((0,Ar.yL)(y,h.class))},h.opts)})}),this._toggleEffects(!0),(0,Zt.hasDnd)(l)&&(this.droppable=new MH(l,(a=this.wrapper)===null||a===void 0?void 0:a.el)),this.loaded=!0,c.trigger("loaded")},r.prototype._toggleEffects=function(e){var t=e?Ar.on:Ar.AU,a=this.getWindow();a&&t(a,"".concat(Ar.D8," resize"),this._emitUpdate)},r.prototype._emitUpdate=function(){this.model._emitUpdated()},r})(El);const LH=DH;var jA=fs(9966),FH=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Vh=function(){return Vh=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Vh.apply(this,arguments)},BH=(function(s){FH(r,s);function r(e,t){var a=s.call(this,{model:e})||this;return(0,_e.bindAll)(a,"onScroll","frameLoaded","updateOffset","remove","startDrag"),Vh(Vh({},e.config),{frameWrapView:a}),a.cv=t,a.frame=new LH(e,a),a.classAnim="".concat(a.ppfx,"frame-wrapper--anim"),a.updateOffset=(0,_e.debounce)(a.updateOffset.bind(a),0),a.updateSize=(0,_e.debounce)(a.updateSize.bind(a),0),a.listenTo(e,"loaded",a.frameLoaded),a.listenTo(e,"change:x change:y",a.updatePos),a.listenTo(e,"change:width change:height",a.updateSize),a.listenTo(e,"destroy remove",a.remove),a.updatePos(),a.setupDragger(),a}return r.prototype.events=function(){return{"click [data-action-remove]":"remove","mousedown [data-action-move]":"startDrag"}},r.prototype.setupDragger=function(){var e=this,t=this,a=t.module,o=t.model,i,l,c,d=function(p){a.toggleFramesEvents(p)};this.dragger=new jA.A({onStart:function(){var p=o.attributes,h=p.x,g=p.y;c=e.em.getZoomMultiplier(),i=h,l=g,d(!1)},onEnd:function(){return d(!0)},setPosition:function(p){o.set({x:i+p.x*c,y:l+p.y*c})}})},r.prototype.startDrag=function(e){var t;e&&((t=this.dragger)===null||t===void 0||t.start(e))},r.prototype.__clear=function(e){var t=this.frame;t&&t.remove(e),(0,Ar.YZ)(this.elTools)},r.prototype.remove=function(e){var t=this,a;return(a=this.sizeObserver)===null||a===void 0||a.disconnect(),this.__clear(e),El.prototype.remove.apply(this,e),["frame","dragger","cv","elTools"].forEach(function(o){return t[o]=0}),this},r.prototype.updateOffset=function(){var e,t=this,a=t.em,o=t.$el,i=t.frame;!a||a.destroyed||(a.runDefault({preserveSelected:1}),o.removeClass(this.classAnim),(e=i?.model)===null||e===void 0||e._emitUpdated())},r.prototype.updatePos=function(e){var t=this,a=t.model,o=t.el,i=a.attributes,l=i.x,c=i.y,d=o.style;this.frame.rect=void 0,d.left=isNaN(l)?l:"".concat(l,"px"),d.top=isNaN(c)?c:"".concat(c,"px"),e&&this.updateOffset()},r.prototype.updateSize=function(){this.updateDim()},r.prototype.updateDim=function(){var e=this,t=e.em,a=e.el,o=e.$el,i=e.model,l=e.classAnim,c=e.frame;if(c){c.rect=void 0,o.addClass(l);var d=this.__handleSize(),p=d.noChanges,h=d.width,g=d.height;((0,_e.isNull)(h)||(0,_e.isNull)(g))&&i.set(Vh(Vh({},h?{}:{width:a.offsetWidth}),g?{}:{height:a.offsetHeight}),{silent:1}),t.stopDefault({preserveSelected:1}),p?this.updateOffset():setTimeout(this.updateOffset,350)}},r.prototype.onScroll=function(){var e=this,t=e.frame,a=e.em;a.trigger("frame:scroll",{frame:t,body:t.getBody(),target:t.getWindow()})},r.prototype.frameLoaded=function(){var e=this,t=e.frame;e.config,t.getWindow().onscroll=this.onScroll,this.updateDim()},r.prototype.__handleSize=function(){var e,t="px",a=this,o=a.model,i=a.el,l=i.style,c=o.attributes,d=c.width,p=c.height,h=l.width||"",g=l.height||"",y=d||"",b=p||"",v=h==y&&g==b,w=(0,_e.isNumber)(y)?"".concat(y).concat(t):y,C=(0,_e.isNumber)(b)?"".concat(b).concat(t):b;if(l.width=w,(e=this.sizeObserver)===null||e===void 0||e.disconnect(),o.hasAutoHeight()){var k=this.frame.el,N=k.contentDocument;if(N){var O=new ResizeObserver(function(){requestAnimationFrame(function(){var R=parseFloat(o.get("minHeight"))||0,L=Math.max(N.body.scrollHeight,R);l.height="".concat(L,"px")})});O.observe(N.body),this.sizeObserver=O}}else l.height=C,delete this.sizeObserver;return{noChanges:v,width:d,height:p,newW:y,newH:b}},r.prototype.render=function(){var e=this,t=e.frame,a=e.$el,o=e.ppfx,i=e.cv,l=e.model,c=e.el,d=l.attributes.onRender;this.__clear(),this.__handleSize(),t.render(),a.empty().attr({class:"".concat(o,"frame-wrapper")}).append(`
      <div class="`.concat(o,`frame-wrapper__top gjs-two-color" data-frame-top>
        <div class="`).concat(o,`frame-wrapper__name" data-action-move>
          `).concat(l.get("name")||"",`
        </div>
        <div class="`).concat(o,`frame-wrapper__top-r">
          <div class="`).concat(o,`frame-wrapper__icon" data-action-remove style="display: none">
            <svg viewBox="0 0 24 24"><path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12z"></path></svg>
          </div>
        </div>
      </div>
      <div class="`).concat(o,`frame-wrapper__right" data-frame-right></div>
      <div class="`).concat(o,`frame-wrapper__left" data-frame-left></div>
      <div class="`).concat(o,`frame-wrapper__bottom" data-frame-bottom></div>
      `)).append(t.el);var p=(0,Ar.a_)("div",{class:"".concat(o,"tools"),style:"pointer-events:none; display: none"},`
      <div class="`.concat(o,`highlighter" data-hl></div>
      <div class="`).concat(o,`badge" data-badge></div>
      <div class="`).concat(o,`placeholder">
        <div class="`).concat(o,`placeholder-int"></div>
      </div>
      <div class="`).concat(o,`ghost"></div>
      <div class="`).concat(o,`toolbar" style="pointer-events:all"></div>
      <div class="`).concat(o,`resizer"></div>
      <div class="`).concat(o,`offset-v" data-offset>
        <div class="gjs-marginName" data-offset-m>
          <div class="gjs-margin-v-el gjs-margin-v-top" data-offset-m-t></div>
          <div class="gjs-margin-v-el gjs-margin-v-bottom" data-offset-m-b></div>
          <div class="gjs-margin-v-el gjs-margin-v-left" data-offset-m-l></div>
          <div class="gjs-margin-v-el gjs-margin-v-right" data-offset-m-r></div>
        </div>
        <div class="gjs-paddingName" data-offset-m>
          <div class="gjs-padding-v-el gjs-padding-v-top" data-offset-p-t></div>
          <div class="gjs-padding-v-el gjs-padding-v-bottom" data-offset-p-b></div>
          <div class="gjs-padding-v-el gjs-padding-v-left" data-offset-p-l></div>
          <div class="gjs-padding-v-el gjs-padding-v-right" data-offset-p-r></div>
        </div>
      </div>
      <div class="`).concat(o,`offset-fixed-v"></div>
    `));this.elTools=p;var h=i?.toolsWrapper;return h&&h.appendChild(p),d&&d({el:c,elTop:c.querySelector("[data-frame-top]"),elRight:c.querySelector("[data-frame-right]"),elBottom:c.querySelector("[data-frame-bottom]"),elLeft:c.querySelector("[data-frame-left]"),frame:l,frameWrapperView:this,remove:this.remove,startDrag:this.startDrag}),this},r})(El);const zH=BH;var $H=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),UH=(function(s){$H(r,s);function r(e,t){e===void 0&&(e={});var a=s.call(this,e,!0)||this;return a.listenTo(a.collection,"reset",a.render),a.canvasView=t.canvasView,a._module=t.module,a}return r.prototype.onRemoveBefore=function(e,t){t===void 0&&(t={}),e.forEach(function(a){return a.remove(t)})},r.prototype.onRender=function(){var e=this,t=e.$el,a=e.ppfx;t.attr({class:"".concat(a,"frames")})},r.prototype.clearItems=function(){var e=this.viewCollection||[];e.forEach(function(t){return t.remove()}),this.viewCollection=[]},r.prototype.renderView=function(e,t){return new zH(e,this.canvasView)},r})(xV);const VH=UH;var HH=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),wb=function(){return wb=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},wb.apply(this,arguments)},WH=(function(s){HH(r,s);function r(e){var t=s.call(this,{model:e})||this;t.ready=!1,(0,_e.bindAll)(t,"clearOff","onKeyPress","onWheel","onPointer");var a=t,o=a.em,i=a.pfx,l=a.ppfx,c=t.module.events;return t.className="".concat(i,"canvas ").concat(l,"no-touch-actions").concat(o.config.customUI?"":" ".concat(i,"canvas-bg")),t.clsUnscale="".concat(i,"unscale"),t._initFrames(),t.listenTo(o,c.refresh,t.clearOff),t.listenTo(o,"component:selected",t.checkSelected),t.listenTo(o,"".concat(c.coords," ").concat(c.zoom),t.updateFrames),t.listenTo(e,"change:frames",t._onFramesUpdate),t.toggleListeners(!0),t}return r.prototype.template=function(){var e=this.pfx;return`
      <div class="`.concat(e,`canvas__frames" data-frames>
        <div class="`).concat(e,`canvas__spots" data-spots></div>
      </div>
      <div id="`).concat(e,'tools" class="').concat(e,`canvas__tools" data-tools></div>
      <style data-canvas-style></style>
    `)},r.prototype._onFramesUpdate=function(){this._initFrames(),this._renderFrames()},r.prototype._initFrames=function(){var e=this,t=e.frames,a=e.model,o=e.config,i=e.em,l=a.frames;i.set("readyCanvas",0),l.once("loaded:all",function(){return i.set("readyCanvas",1)}),t?.remove(),this.frames=new VH({collection:l},wb(wb({},o),{canvasView:this}))},r.prototype.checkSelected=function(e,t){var a;t===void 0&&(t={});var o=t.scroll,i=this.em.getCurrentFrame();o&&((a=e.views)===null||a===void 0||a.forEach(function(l){l.frameView===i&&l.scrollIntoView(o)}))},r.prototype.remove=function(){for(var e,t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return clearTimeout(this.timerZoom),(e=this.frames)===null||e===void 0||e.remove(),this.frames=void 0,El.prototype.remove.apply(this,t),this.toggleListeners(!1),this},r.prototype.preventDefault=function(e){var t;e&&(e.preventDefault(),(t=e._parentEvent)===null||t===void 0||t.preventDefault())},r.prototype.toggleListeners=function(e){var t=this,a=t.el,o=t.config,i=e?Ar.on:Ar.AU;i(document,"keypress",this.onKeyPress),i(window,"scroll resize",this.clearOff),i(a,"wheel",this.onWheel,{passive:!o.infiniteCanvas}),i(a,"pointermove",this.onPointer)},r.prototype.screenToWorld=function(e,t){var a=this.module,o=a.getCoords(),i=a.getZoomMultiplier(),l=this.getViewportDelta();return{x:(e-o.x-l.x)*i,y:(t-o.y-l.y)*i}},r.prototype.onPointer=function(e){if(this.config.infiniteCanvas){var t=this.getCanvasOffset(),a=(0,Ar.Xy)(),o={x:e.clientX-t.left+a.x,y:e.clientY-t.top+a.y};if(e._parentEvent){var i=e.target.getBoundingClientRect(),l=this.module.getZoomDecimal();o.x=i.left-t.left+a.x+e.clientX*l,o.y=i.top-t.top+a.y+e.clientY*l}this.model.set({pointerScreen:o,pointer:this.screenToWorld(o.x,o.y)})}},r.prototype.onKeyPress=function(e){var t=this.em,a=(0,Ar.Ch)(e);a===" "&&t.getZoomDecimal()!==1&&!t.Canvas.isInputFocused()&&(this.preventDefault(e),t.Editor.runCommand("core:canvas-move"))},r.prototype.onWheel=function(e){var t=this,a=t.module,o=t.config;if(o.infiniteCanvas){this.preventDefault(e);var i=e.deltaX,l=e.deltaY,c=a.getZoomDecimal(),d=(0,Ar.rp)(e),p=a.getCoords();if(d){var h=c-l*c*.01;a.setZoom(h*100);var g=this.model.getPointerCoords(Sr.x2.Screen),y=this.getCanvasOffset(),b=g.x-y.width/2,v=g.y-y.height/2,w=h/c,C=b-(b-p.x)*w,k=v-(v-p.y)*w;a.setCoords(C,k)}else this.onPointer(e),a.setCoords(p.x-i,p.y-l)}},r.prototype.updateFrames=function(e){var t=this.em,a=this.toolsWrapper,o={preserveSelected:1};this.updateFramesArea(),this.clearOff(),a.style.display="none",t.trigger("canvas:update",e),clearTimeout(this.timerZoom),this.timerZoom=setTimeout(function(){t.stopDefault(o),t.runDefault(o),a.style.display=""},300)},r.prototype.updateFramesArea=function(){var e=this,t=e.framesArea,a=e.model,o=e.module,i=e.cvStyle,l=e.clsUnscale,c=o.getZoomMultiplier();if(t){var d=a.attributes,p=d.x,h=d.y,g=o.getZoomDecimal();t.style.transform="scale(".concat(g,") translate(").concat(p*c,"px, ").concat(h*c,"px)")}i&&(i.innerHTML=`
        .`.concat(l," { scale: ").concat(c,` }
      `))},r.prototype.fitViewport=function(e){var t,a,o;e===void 0&&(e={});var i=this,l=i.em,c=i.module,d=i.model;this.clearOff();var p=this.getCanvasOffset(),h=e.el,g=h&&((t=(0,Zt.getComponentView)(h))===null||t===void 0?void 0:t.frameView),y=g?g.model:e.frame||l.getCurrentFrameModel()||d.frames.at(0),b=y.attributes,v=b.x,w=b.y,C={x:v??0,y:w??0,width:y.width,height:y.height};if(h){var k=this.getElBoxRect(h);C.x=C.x+k.x,C.y=C.y+k.y,C.width=k.width,C.height=k.height}var N=e.ignoreHeight,O=(a=e.gap)!==null&&a!==void 0?a:0,R=(0,_e.isNumber)(O),L=R?O:O.x,B=R?O:O.y,G=C.width+L*2,$=C.height+B*2,z=p.width,Y=p.height,M=z/G,q=Y/$,P=N?M:Math.min(M,q),H=P*100,D=(o=(0,_e.isFunction)(e.zoom)?e.zoom(H):e.zoom)!==null&&o!==void 0?o:H;c.setZoom(D,{from:"fitViewport"});var X=-C.x+(y.width>=z?z/2-G/2:-L),se=-C.y+Y/2-$/2,Q=c.getZoomDecimal(),xe={x:(X+L)*Q,y:(se+B)*Q};if(N){var K=c.getZoomMultiplier(),Z=Y*K,ve=Z-Y,ae=ve/2;xe.y=(-C.y+B)*Q-ae/K}c.setCoords(xe.x,xe.y)},r.prototype.isElInViewport=function(e){var t=(0,Zt.getElement)(e),a=(0,Ar.C8)(t),o=this.getFrameOffset(t),i=a.top,l=a.left;return i>=0&&l>=0&&i<=o.height&&l<=o.width},r.prototype.offset=function(e,t){t===void 0&&(t={});var a=t.noScroll,o=(0,Ar.C8)(e),i=a?{x:0,y:0}:(0,Ar.Xy)(e);return{top:o.top+i.y,left:o.left+i.x,width:o.width,height:o.height}},r.prototype.getRectToScreen=function(e){var t,a,o,i,l=this.getCanvasScroll(),c=this.module.getZoomDecimal(),d=this.module.getCoords(),p=this.getViewportDelta(),h=((t=e.x)!==null&&t!==void 0?t:0)*c-l.scrollLeft+d.x+p.x||0,g=((a=e.y)!==null&&a!==void 0?a:0)*c-l.scrollTop+d.y+p.y||0;return{x:h,y:g,width:((o=e.width)!==null&&o!==void 0?o:0)*c,height:((i=e.height)!==null&&i!==void 0?i:0)*c}},r.prototype.getElBoxRect=function(e,t){var a,o,i;t===void 0&&(t={});var l=this.module,c=(0,Ar.C8)(e),d=c.width,p=c.height,h=c.left,g=c.top,y=(a=(0,Zt.getComponentView)(e))===null||a===void 0?void 0:a.frameView,b=y?.getBoxRect(),v=l.getZoomMultiplier(),w=(o=b?.x)!==null&&o!==void 0?o:0,C=(i=b?.y)!==null&&i!==void 0?i:0,k=this.el,N=(0,Ar.Xy)(),O=h+w+(k.scrollLeft+N.x)*v,R=g+C+(k.scrollTop+N.y)*v,L={x:O,y:R,width:d,height:p};return t.local&&(L.x=h,L.y=g),t.toScreen?this.getRectToScreen(L):L},r.prototype.getViewportRect=function(e){e===void 0&&(e={});var t=this.getCanvasOffset(),a=t.top,o=t.left,i=t.width,l=t.height,c=this.module;if(e.toWorld){var d=c.getZoomMultiplier(),p=c.getCoords(),h=this.getViewportDelta(),g=-p.x-h.x||0,y=-p.y-h.y||0;return{x:g*d,y:y*d,width:i*d,height:l*d}}else return{x:o,y:a,width:i,height:l}},r.prototype.getViewportDelta=function(e){var t=this.module.getZoomMultiplier(),a=this.getCanvasOffset(),o=a.width,i=a.height,l=o*t,c=i*t,d=l-o,p=c-i;return{x:d/2/t,y:p/2/t}},r.prototype.clearOff=function(){this.frmOff=void 0,this.cvsOff=void 0},r.prototype.getFrameOffset=function(e){var t;if(!this.frmOff||e){var a=(t=this.frame)===null||t===void 0?void 0:t.el,o=e?.ownerDocument.defaultView,i=o?o.frameElement:a;this.frmOff=this.offset(i||a)}return this.frmOff},r.prototype.getCanvasOffset=function(){return this.cvsOff||(this.cvsOff=this.offset(this.el)),this.cvsOff},r.prototype.getElementPos=function(e,t){t===void 0&&(t={});var a=this.module.getZoomDecimal(),o=this.getFrameOffset(e),i=this.el,l=this.getCanvasOffset(),c=this.offset(e,t),d=t.avoidFrameOffset?0:o.top,p=t.avoidFrameOffset?0:o.left,h=t.avoidFrameZoom?c.top:c.top*a,g=t.avoidFrameZoom?c.left:c.left*a,y=t.avoidFrameOffset?h:h+d-l.top+i.scrollTop,b=t.avoidFrameOffset?g:g+p-l.left+i.scrollLeft,v=t.avoidFrameZoom?c.height:c.height*a,w=t.avoidFrameZoom?c.width:c.width*a;return{top:y,left:b,height:v,width:w,zoom:a,rect:c}},r.prototype.getElementOffsets=function(e){if(!e||(0,Ar.ir)(e))return{};var t={},a=window.getComputedStyle(e),o=this.module.getZoomDecimal(),i=["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"];return i.forEach(function(l){t[l]=parseFloat(a[l])*o}),t},r.prototype.getPosition=function(e){var t;e===void 0&&(e={});var a=(t=this.frame)===null||t===void 0?void 0:t.el.contentDocument;if(!a)return{top:0,left:0,width:0,height:0};var o=a.body,i=this.module.getZoomDecimal(),l=this.getFrameOffset(),c=this.getCanvasOffset(),d=e.noScroll;return{top:l.top+(d?0:o.scrollTop)*i-c.top,left:l.left+(d?0:o.scrollLeft)*i-c.left,width:c.width,height:c.height}},r.prototype.getCanvasScroll=function(){return this.config.scrollableCanvas?{scrollTop:this.el.scrollTop,scrollLeft:this.el.scrollLeft}:{scrollTop:0,scrollLeft:0}},r.prototype.updateScript=function(e){var t=e.model,a=t.getId(),o={component:t,view:e,el:e.el};if(!e.scriptContainer){e.scriptContainer=(0,Ar.a_)("div",{"data-id":a});var i=this.getJsContainer();i?.appendChild(e.scriptContainer)}e.el.id=a,e.scriptContainer.innerHTML="";var l=document.createElement("script"),c=t.getScriptString(),d=t.get("script-props")?c:`function(){
`.concat(c,`
;}`),p=JSON.stringify(t.__getScriptProps());l.innerHTML=`
      setTimeout(function() {
        var item = document.getElementById('`.concat(a,`');
        if (!item) return;
        var script = (`).concat(d,`).bind(item);
        script(`).concat(p,`, { el: item });
      }, 1);`),setTimeout(function(){t.emitWithEditor(bs.I.scriptMountBefore,o);var h=e.scriptContainer;h?.appendChild(l),t.emitWithEditor(bs.I.scriptMount,o)},0)},r.prototype.getJsContainer=function(e){var t=this.getFrameView(e);return t?.getJsContainer()},r.prototype.getFrameView=function(e){return e?.frameView||this.em.getCurrentFrame()},r.prototype._renderFrames=function(){if(this.ready){var e=this,t=e.model,a=e.frames,o=e.em,i=e.framesArea,l=t.frames;l.listenToLoad(),a.render();var c=l.at(0),d=c?.view;o.setCurrentFrame(d),i?.appendChild(a.el),this.frame=d,this.updateFramesArea()}},r.prototype.renderFrames=function(){this._renderFrames()},r.prototype.render=function(){var e=this,t=e.el,a=e.$el,o=e.ppfx,i=e.config,l=e.em;a.html(this.template());var c=a.find("[data-frames]");this.framesArea=c.get(0);var d=a.find("[data-tools]");return this.toolsWrapper=d.get(0),d.append(`
      <div class="`.concat(o,"tools ").concat(o,`tools-gl" style="pointer-events:none">
        <div class="`).concat(o,`placeholder">
          <div class="`).concat(o,`placeholder-int"></div>
        </div>
      </div>
      <div id="`).concat(o,`tools" style="pointer-events:none">
        `).concat(i.extHl?'<div class="'.concat(o,'highlighter-sel"></div>'):"",`
        <div class="`).concat(o,`badge"></div>
        <div class="`).concat(o,`ghost"></div>
        <div class="`).concat(o,`toolbar" style="pointer-events:all"></div>
        <div class="`).concat(o,`resizer"></div>
        <div class="`).concat(o,`offset-v"></div>
        <div class="`).concat(o,`offset-fixed-v"></div>
      </div>
    `)),this.toolsEl=t.querySelector("#".concat(o,"tools")),this.hlEl=t.querySelector(".".concat(o,"highlighter")),this.badgeEl=t.querySelector(".".concat(o,"badge")),this.placerEl=t.querySelector(".".concat(o,"placeholder")),this.ghostEl=t.querySelector(".".concat(o,"ghost")),this.toolbarEl=t.querySelector(".".concat(o,"toolbar")),this.resizerEl=t.querySelector(".".concat(o,"resizer")),this.offsetEl=t.querySelector(".".concat(o,"offset-v")),this.fixedOffsetEl=t.querySelector(".".concat(o,"offset-fixed-v")),this.toolsGlobEl=t.querySelector(".".concat(o,"tools-gl")),this.spotsEl=t.querySelector("[data-spots]"),this.cvStyle=t.querySelector("[data-canvas-style]"),t.className=(0,Zt.getUiClass)(l,this.className),i.scrollableCanvas===!0&&(t.style.overflow="auto"),this.ready=!0,this._renderFrames(),this},r})(El);const qH=WH;var GH=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),ip=function(){return ip=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},ip.apply(this,arguments)},KH=function(s,r,e){if(e||arguments.length===2)for(var t=0,a=r.length,o;t<a;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return s.concat(o||Array.prototype.slice.call(r))},YH=(function(s){GH(r,s);function r(e){var t=s.call(this,e,"Canvas",tV())||this;return t.events=db,t.framesById={},t.canvas=new dV(t),t.spots=new pV(t),t.model=t.canvas,t.startAutoscroll=t.startAutoscroll.bind(t),t.stopAutoscroll=t.stopAutoscroll.bind(t),t.autoScroller=new bA,t}return r.prototype.getCanvasView=function(){return this.canvasView},r.prototype.postLoad=function(){this.model.init()},r.prototype.getModel=function(){return this.canvas},r.prototype.getElement=function(){return this.getCanvasView().el},r.prototype.getFrame=function(e){return this.getFrames()[e||0]},r.prototype.getFrameEl=function(){var e=(this.canvasView||{}).frame;return e?.el},r.prototype.getFramesEl=function(){var e;return(e=this.canvasView)===null||e===void 0?void 0:e.framesArea},r.prototype.getWindow=function(){var e=(this.canvasView||{}).frame;return e?.getWindow()},r.prototype.getDocument=function(){var e=this.getFrameEl();return e?.contentDocument},r.prototype.getBody=function(){var e=this.getDocument();return e?.body},r.prototype._getLocalEl=function(e,t,a){var o=e,i=t?.frameView;return o=i?i[a]():o,o},r.prototype.getGlobalToolsEl=function(){var e;return(e=this.canvasView)===null||e===void 0?void 0:e.toolsGlobEl},r.prototype.getToolsEl=function(e){return this._getLocalEl(this.getCanvasView().toolsEl,e,"getToolsEl")},r.prototype.getHighlighter=function(e){return this._getLocalEl(this.getCanvasView().hlEl,e,"getHighlighter")},r.prototype.getBadgeEl=function(e){return this._getLocalEl(this.getCanvasView().badgeEl,e,"getBadgeEl")},r.prototype.getPlacerEl=function(){return this.getCanvasView().placerEl},r.prototype.getGhostEl=function(){return this.getCanvasView().ghostEl},r.prototype.getToolbarEl=function(){return this.getCanvasView().toolbarEl},r.prototype.getResizerEl=function(){return this.getCanvasView().resizerEl},r.prototype.getOffsetViewerEl=function(e){return this._getLocalEl(this.getCanvasView().offsetEl,e,"getOffsetViewerEl")},r.prototype.getFixedOffsetViewerEl=function(){return this.getCanvasView().fixedOffsetEl},r.prototype.getSpotsEl=function(){var e;return(e=this.canvasView)===null||e===void 0?void 0:e.spotsEl},r.prototype.render=function(){var e;return(e=this.canvasView)===null||e===void 0||e.remove(),this.canvasView=new qH(this.canvas),this.canvasView.render().el},r.prototype.getOffset=function(){var e=this.offset(this.getFrameEl()),t=this.offset(this.getElement());return{top:e.top-t.top,left:e.left-t.left}},r.prototype.offset=function(e){return this.getCanvasView().offset(e)},r.prototype.setCustomBadgeLabel=function(e){this.config.customBadgeLabel=e},r.prototype.getElementPos=function(e,t){return this.getCanvasView().getElementPos(e,t)},r.prototype.getElementOffsets=function(e){return this.getCanvasView().getElementOffsets(e)},r.prototype.getRect=function(){var e,t=(e=this.getCanvasView().getPosition())!==null&&e!==void 0?e:{},a=t.top,o=a===void 0?0:a,i=t.left,l=i===void 0?0:i;return ip(ip({},this.getCanvasView().getCanvasOffset()),{topScroll:o,leftScroll:l})},r.prototype.getTargetToElementDim=function(e,t,a){a===void 0&&(a={});var o=a||{},i=this.getCanvasView().getPosition();if(i){var l=o.elPos||this.getCanvasView().getElementPos(t),c=a.toRight||0,d=o.targetHeight||e.offsetHeight,p=o.targetWidth||e.offsetWidth,h=o.event||null,g=l.top-d,y=l.left;y+=c?l.width:0,y=c?y-p:y;var b=y<i.left?i.left:y,v=g<i.top?i.top:g;v=v>l.top+l.height?l.top+l.height:v;var w={top:v,left:b,elementTop:l.top,elementLeft:l.left,elementWidth:l.width,elementHeight:l.height,targetWidth:e.offsetWidth,targetHeight:e.offsetHeight,canvasTop:i.top,canvasLeft:i.left,canvasWidth:i.width,canvasHeight:i.height};return h&&this.em&&this.em.trigger(h,w),w}},r.prototype.canvasRectOffset=function(e,t,a){var o=this;a===void 0&&(a={});var i=function(c){var d=c.defaultView;return d?.frameElement},l=function(c,d,p){d===void 0&&(d=1);var h=o.em.getZoomDecimal(),g=d?"top":"left",y=c.ownerDocument,b=a.offset?i(y):{},v=b.offsetTop,w=v===void 0?0:v,C=b.offsetLeft,k=C===void 0?0:C,N=y.body||{},O=N.scrollTop,R=O===void 0?0:O,L=N.scrollLeft,B=L===void 0?0:L,G=d?R:B,$=d?w:k;return p[g]-(G-$)*h};return{top:l(e,1,t),left:l(e,0,t)}},r.prototype.getTargetToElementFixed=function(e,t,a){a===void 0&&(a={});var o=a.pos||this.getElementPos(e,{noScroll:!0}),i=a.canvasOff||this.canvasRectOffset(e,o),l=t.offsetHeight||0,c=t.offsetWidth||0,d=this.getCanvasView(),p=d.getCanvasScroll(),h=p.scrollTop,g=p.scrollLeft,y=d.getPosition(),b=a.event,v=o.width-c,w=-l,C=(0,_e.isUndefined)(a.left)?v:a.left,k=Math.max(-o.left+g,0);C=Math.max(C,k);var N=o.width-c;C=Math.min(C,N);var O=y.width+g-c-o.left;C=Math.min(C,O);var R=i.top<l+h,L=w;if(R){var B=o.height+l,G=B<y.height;if(G)L=L+B;else{var $=-i.top+h;L=$<o.height?$:o.height}}var z={top:L,left:C,canvasOffsetTop:i.top,canvasOffsetLeft:i.left,elRect:o,canvasOffset:i,canvasRect:y,targetWidth:c,targetHeight:l};return b&&this.em.trigger(b,z),z},r.prototype.getMouseRelativePos=function(e,t){t===void 0&&(t={});var a=t.subWinOffset,o=e.target,i=o.nodeType===Node.DOCUMENT_NODE?o:o.ownerDocument,l=i.defaultView||i.parentWindow,c=l.frameElement,d=a?l.pageYOffset:0,p=a?l.pageXOffset:0,h=this.getZoomMultiplier(),g=0,y=0;if(c){var b=c.getBoundingClientRect();g=b.top||0,y=b.left||0}return{y:(e.clientY+g-d)*h,x:(e.clientX+y-p)*h}},r.prototype.getMouseRelativeCanvas=function(e,t){var a,o=this.getZoomDecimal(),i=this.getCanvasView(),l=(a=i.getPosition(t))!==null&&a!==void 0?a:{top:0,left:0},c=i.getCanvasScroll(),d={top:l.top+c.scrollTop,left:l.left+c.scrollLeft},p=d.top,h=d.left;return{y:e.clientY*o+p,x:e.clientX*o+h}},r.prototype.startDrag=function(e){this.em.set("dragSource",e)},r.prototype.endDrag=function(){this.em.set({dragResult:null,dragSource:void 0})},r.prototype.hasFocus=function(){return this.getDocument().hasFocus()},r.prototype.isInputFocused=function(){var e=this.getDocument(),t=this.getFrameEl(),a=KH(["body"],this.config.notTextable,!0),o=t&&document.activeElement===t,i=o?e&&e.activeElement:document.activeElement;return i&&!a.some(function(l){return i.matches(l)})},r.prototype.scrollTo=function(e,t){t===void 0&&(t={});var a=(0,Zt.getElement)(e),o=a&&(0,Zt.getViewEl)(a);o&&o.scrollIntoView(t)},r.prototype.startAutoscroll=function(e){var t=e&&e.view||this.em.getCurrentFrame();if(t&&t.startAutoscroll(),this.config.scrollableCanvas){var a=this.getCanvasView().el;this.autoScroller.start(a,a,{zoom:this.em.getZoomDecimal(),ignoredElement:this.getSpotsEl()})}},r.prototype.stopAutoscroll=function(e){var t=e&&e.view||this.em.getCurrentFrame();t&&t.stopAutoscroll(),this.config.scrollableCanvas&&this.autoScroller.stop()},r.prototype.setZoom=function(e,t){return t===void 0&&(t={}),this.canvas.set("zoom",typeof e=="string"?parseFloat(e):e,t),this},r.prototype.getZoom=function(){return parseFloat(this.canvas.get("zoom"))},r.prototype.setCoords=function(e,t,a){var o;a===void 0&&(a={});var i=e||e===0,l=t||t===0,c={x:this.canvas.get("x"),y:this.canvas.get("y")};if(i&&(c.x=parseFloat("".concat(e))),l&&(c.y=parseFloat("".concat(t))),a.toWorld){var d=(o=this.canvasView)===null||o===void 0?void 0:o.getViewportDelta();d&&(i&&(c.x=c.x-d.x),l&&(c.y=c.y-d.y))}return this.canvas.set(c),this},r.prototype.getCoords=function(){var e=this.canvas.attributes,t=e.x,a=e.y;return{x:t,y:a}},r.prototype.getPointer=function(e){var t=this.canvas.attributes,a=t.pointer,o=t.pointerScreen;return e?o:a},r.prototype.getZoomDecimal=function(){return this.getZoom()/100},r.prototype.getZoomMultiplier=function(){var e=this.getZoomDecimal();return e?1/e:1},r.prototype.fitViewport=function(e){var t;(t=this.canvasView)===null||t===void 0||t.fitViewport(e)},r.prototype.toggleFramesEvents=function(e){var t=this.getFramesEl().style;t.pointerEvents=e?"":"none"},r.prototype.getFrames=function(){return this.canvas.frames.map(function(e){return e})},r.prototype.addFrame=function(e,t){return e===void 0&&(e={}),t===void 0&&(t={}),this.canvas.frames.add(new rA(this,ip({},e)),t)},r.prototype.getLastDragResult=function(){return this.em.get("dragResult")},r.prototype.addSpot=function(e,t){var a;t===void 0&&(t={});var o=e,i=this.getSpots(o);if(i.length){var l=i[0];return l.set(o),l}var c=o.componentView||((a=o.component)===null||a===void 0?void 0:a.view),d=new Sl.A(this,ip(ip({},o),{id:o.id||"cs_".concat(o.type,"_").concat(c?.cid),type:o.type||""}));return this.spots.add(d,t),d},r.prototype.getSpots=function(e){return e===void 0&&(e={}),this.spots.where(e.id?{id:e.id}:e)},r.prototype.removeSpots=function(e){e===void 0&&(e={});var t=(0,_e.isArray)(e)?e:this.getSpots(e),a=this.spots.remove(t);return a},r.prototype.hasCustomSpot=function(e){var t=this.config.customSpots;return!!(t===!0||t&&e&&t[e])},r.prototype.getWorldRectToScreen=function(e){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.getRectToScreen(e)},r.prototype.refresh=function(e){e===void 0&&(e={});var t=this,a=t.em,o=t.events,i=t.canvasView;i?.clearOff(),(e.spots||e.all)&&(this.refreshSpots(),a.trigger("canvas:updateTools")),a.set("canvasOffset",this.getOffset()),a.trigger(o.refresh,e)},r.prototype.refreshSpots=function(){this.spots.refresh()},r.prototype.destroy=function(){var e=this,t;this.canvas.stopListening(),(t=this.canvasView)===null||t===void 0||t.remove(),["model","droppable"].forEach(function(a){return e[a]={}})},r})(Di);const ZH=YH;var XH=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Hh=function(){return Hh=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Hh.apply(this,arguments)},CA=(function(s){XH(r,s);function r(e,t){var a=s.call(this,e,t)||this;return a.dataResolver=a.initializeDataResolver(e,t),a.listenToPropsChange(),a}return r.prototype.initializeDataResolver=function(e,t){var a,o=(a=e.dataResolver)!==null&&a!==void 0?a:{type:e.type},i=this.createResolverInstance(o,Hh(Hh({},t),{collectionsStateMap:this.collectionsStateMap}));return i},r.prototype.getDataResolver=function(){return this.get("dataResolver")},r.prototype.setDataResolver=function(e){return this.set("dataResolver",e)},r.prototype.onCollectionsStateMapUpdate=function(e){this.dataResolver.updateCollectionsStateMap(e),s.prototype.onCollectionsStateMapUpdate.call(this,e)},r.prototype.listenToPropsChange=function(){var e=this;this.on("change:dataResolver",function(){e.dataResolver.set(e.get("dataResolver"))})},r.prototype.removePropsListeners=function(){this.stopListening(this.dataResolver),this.off("change:dataResolver"),this.off("change:".concat(this.collectionsStateMap))},r.prototype.destroy=function(e){return this.removePropsListeners(),s.prototype.destroy.call(this,e)},r.prototype.toJSON=function(e){var t=s.prototype.toJSON.call(this,e),a=this.dataResolver.toJSON();return delete a.type,Hh(Hh({},t),{dataResolver:a})},r})(Wa),QH=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),jb=function(){return jb=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},jb.apply(this,arguments)},JH=(function(s){QH(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return jb(jb({},s.prototype.defaults),{type:ac,dataResolver:{},droppable:!1})},enumerable:!1,configurable:!0}),r.prototype.getPath=function(){return this.dataResolver.get("path")},r.prototype.getCollectionId=function(){return this.dataResolver.get("collectionId")},r.prototype.getVariableType=function(){return this.dataResolver.get("variableType")},r.prototype.getDefaultValue=function(){return this.dataResolver.get("defaultValue")},r.prototype.getDataValue=function(){return this.dataResolver.getDataValue()},r.prototype.resolvesFromCollection=function(){return this.dataResolver.resolvesFromCollection()},r.prototype.getInnerHTML=function(){return this.getDataValue()},r.prototype.setPath=function(e){this.dataResolver.set("path",e)},r.prototype.setDefaultValue=function(e){this.dataResolver.set("defaultValue",e)},r.prototype.resetDataSourcePath=function(e){this.set("dataResolver",{path:e,collectionId:void 0,variableType:void 0})},r.prototype.createResolverInstance=function(e,t){return new Rm(e,t)},r.isComponent=function(e){return(0,Zt.toLowerCase)(e.tagName)===ac},r})(CA);const eW=JH;var tW=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Cb=function(){return Cb=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Cb.apply(this,arguments)},rW=(function(s){tW(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return Cb(Cb({},s.prototype.defaults),{droppable:!1,type:Ka.condition,dataResolver:{condition:{left:"",operator:gl.equalsIgnoreCase,right:""}},components:[{type:Ka.conditionTrue},{type:Ka.conditionFalse}]})},enumerable:!1,configurable:!0}),r.prototype.isTrue=function(){return this.dataResolver.isTrue()},r.prototype.getCondition=function(){return this.dataResolver.getCondition()},r.prototype.getIfTrueContent=function(){return this.components().at(0)},r.prototype.getIfFalseContent=function(){return this.components().at(1)},r.prototype.getOutputContent=function(){return this.isTrue()?this.getIfTrueContent():this.getIfFalseContent()},r.prototype.setCondition=function(e){this.dataResolver.setCondition(e)},r.prototype.setIfTrueComponents=function(e){this.setComponentsAtIndex(0,e)},r.prototype.setIfFalseComponents=function(e){this.setComponentsAtIndex(1,e)},r.prototype.getInnerHTML=function(e){var t,a;return(a=(t=this.getOutputContent())===null||t===void 0?void 0:t.getInnerHTML(e))!==null&&a!==void 0?a:""},r.prototype.createResolverInstance=function(e,t){return new aA(e,t)},r.prototype.setComponentsAtIndex=function(e,t){var a=this.components().at(e);a?.components(t)},r.isComponent=function(e){return(0,Zt.toLowerCase)(e.tagName)===bm},r})(CA);const nW=rW;var sW=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Sb=function(){return Sb=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Sb.apply(this,arguments)},aW=(function(s){sW(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return Sb(Sb({},s.prototype.defaults),{removable:!1,draggable:!1})},enumerable:!1,configurable:!0}),r.isComponent=function(e){return GV((0,Zt.toLowerCase)(e.tagName))},r})(Wa);const tC=aW;var oW=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Nb=function(){return Nb=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Nb.apply(this,arguments)},iW=(function(s){oW(r,s);function r(e,t){t===void 0&&(t={});var a,o=s.call(this,e,t)||this;return o.mutable=(a=e.mutable)!==null&&a!==void 0?a:!0,o.on("change",o.handleChange),o}return Object.defineProperty(r.prototype,"cl",{get:function(){return this.collection},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dataSource",{get:function(){return this.cl.dataSource},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"em",{get:function(){return this.dataSource.em},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"index",{get:function(){return this.cl.indexOf(this)},enumerable:!1,configurable:!0}),r.prototype.handleChange=function(e,t){var a=this,o=this.changedAttributes();(0,_e.keys)(o).forEach(function(i){return a.triggerChange(i,t)})},r.prototype.getPath=function(e,t){t===void 0&&(t={});var a=this,o=a.dataSource,i=a.id,l=a.index,c=o.id,d=e?".".concat(e):"";return"".concat(c,".").concat(t.useIndex?l:i).concat(d)},r.prototype.getPaths=function(e){return[this.getPath(e),this.getPath(e,{useIndex:!0})]},r.prototype.triggerChange=function(e,t){t===void 0&&(t={});var a=this,o=a.dataSource,i=a.em,l=this.getPaths(e),c={dataSource:o,dataRecord:this,path:l[0],options:t};i.trigger(qd.path,c),i.trigger("".concat(qd.pathSource,":").concat(o.id),c),l.forEach(function(d){return i.trigger("".concat(qd.path,":").concat(d),Nb(Nb({},c),{path:d}))})},r.prototype.set=function(e,t,a){var o=this,i,l;if(!this.isNew()&&this.attributes.mutable===!1)throw new Error("Cannot modify immutable record");var c=(l=(i=this.dataSource)===null||i===void 0?void 0:i.transformers)===null||l===void 0?void 0:l.onRecordSetValue,d=function(w,C,k){k===void 0&&(k={});var N=k?.avoidTransformers||!c?C:c({id:o.id,key:w,value:C});s.prototype.set.call(o,w,N,k),s.prototype.set.call(o,{__p:k.partial?!0:void 0},k)};if(typeof e=="object"&&e!==null)for(var p=e,h=0,g=Object.entries(p);h<g.length;h++){var y=g[h],b=y[0],v=y[1];d(b,v,t)}else d(e,t,a);return this},r})(Sr.Kx);const lW=iW;var cW=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),SA=(function(s){cW(r,s);function r(e,t){var a=s.call(this,e,t)||this;return a.dataSource=t.dataSource,a}return r})(Sr.pM);const NE=SA;SA.prototype.model=lW;var dW=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Dd=function(){return Dd=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Dd.apply(this,arguments)},kE=function(s,r,e,t){function a(o){return o instanceof e?o:new e(function(i){i(o)})}return new(e||(e=Promise))(function(o,i){function l(p){try{d(t.next(p))}catch(h){i(h)}}function c(p){try{d(t.throw(p))}catch(h){i(h)}}function d(p){p.done?o(p.value):a(p.value).then(l,c)}d((t=t.apply(s,r||[])).next())})},_E=function(s,r){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},t,a,o,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(d){return function(p){return c([d,p])}}function c(d){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,d[0]&&(e=0)),e;)try{if(t=1,a&&(o=d[0]&2?a.return:d[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,d[1])).done)return o;switch(a=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return e.label++,{value:d[1],done:!1};case 5:e.label++,a=d[1],d=[0];continue;case 7:d=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){e=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){e.label=d[1];break}if(d[0]===6&&e.label<o[1]){e.label=o[1],o=d;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(d);break}o[2]&&e.ops.pop(),e.trys.pop();continue}d=r.call(s,e)}catch(p){d=[6,p],a=0}finally{t=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},uW=function(s,r,e){if(e||arguments.length===2)for(var t=0,a=r.length,o;t<a;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return s.concat(o||Array.prototype.slice.call(r))},fW=(function(s){dW(r,s);function r(e,t){var a=s.call(this,Dd(Dd({schema:{}},e),{records:[]}),t)||this,o=e.records,i=e.transformers;return a.transformers=i||{},o instanceof NE||a.set({records:new NE(o,{dataSource:a})}),a.listenTo(a.records,"add",a.onAdd),a.listenTo(a.records,Sr.e2,a.handleChanges),a}return r.prototype.defaults=function(){return{records:[],transformers:{}}},Object.defineProperty(r.prototype,"records",{get:function(){return this.attributes.records},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"schema",{get:function(){return this.attributes.schema},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"em",{get:function(){return this.collection.em},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hasProvider",{get:function(){return!!this.attributes.provider},enumerable:!1,configurable:!0}),r.prototype.onAdd=function(e){e.triggerChange()},r.prototype.addRecord=function(e,t){return this.records.add(e,t)},r.prototype.getRecord=function(e){return this.records.get(e)},r.prototype.getRecords=function(){var e=this;return uW([],this.records.models,!0).map(function(t){return e.getRecord(t.id)})},r.prototype.getResolvedRecords=function(){var e=this,t=Object.entries(this.schema),a=this.getRecords().map(function(o){var i=Dd({},o.attributes);return t.length===0||t.forEach(function(l){var c=l[0],d=l[1],p=d;if(p?.type===VS.relation&&p.target){var h=i[c];if(h){var g=e.em.DataSources.get(p.target);if(g){var y=g.records,b=p.targetField||qV;if(p.isMany){var v=Array.isArray(h)?h:[h],w=y.filter(function(k){return v.includes(k.attributes[b])});i[c]=w.map(function(k){return Dd({},k.attributes)})}else{var C=g.records.find(function(k){return k.attributes[b]===h});C&&(i[c]=Dd({},C.attributes))}}}}}),i});return a},r.prototype.loadProvider=function(){return kE(this,void 0,void 0,function(){var e,t,a,o,i,l,c,d,p,h,g=this;return _E(this,function(y){switch(y.label){case 0:return e=this,t=e.attributes,a=e.em,o=t.provider,o?(0,_e.isString)(o)?[2]:(i=(0,_e.isString)(o.get)?{url:o.get}:o.get,l=i.url,c=i.method,d=i.headers,p=i.body,h=function(){return kE(g,void 0,void 0,function(){var b,v,w,C,k;return _E(this,function(N){switch(N.label){case 0:b=this,N.label=1;case 1:return N.trys.push([1,6,,7]),a.trigger(a.DataSources.events.providerLoadBefore,{dataSource:b}),[4,fetch(l,{method:c,headers:d,body:p})];case 2:return v=N.sent(),v.ok?[3,4]:(w=Error.bind,[4,v.text()]);case 3:throw new(w.apply(Error,[void 0,N.sent()]));case 4:return[4,v.json()];case 5:return C=N.sent(),C?.records&&this.setRecords(C.records),C?.schema&&this.upSchema(C.schema),a.trigger(a.DataSources.events.providerLoad,{result:C,dataSource:b}),[3,7];case 6:return k=N.sent(),a.logError(k.message),a.trigger(a.DataSources.events.providerLoadError,{dataSource:b,error:k}),[3,7];case 7:return[2]}})})},[4,h()]):[2];case 1:return y.sent(),[2]}})})},r.prototype.removeRecord=function(e,t){var a=this.getRecord(e);if(a?.mutable===!1&&!t?.dangerously)throw new Error("Cannot remove immutable record");return this.records.remove(e,t)},r.prototype.setRecords=function(e){var t=this;this.records.reset([],{silent:!0}),e.forEach(function(a){t.records.add(a)})},r.prototype.upSchema=function(e,t){this.set("schema",Dd(Dd({},this.schema),e),t)},r.prototype.getSchemaField=function(e){return this.schema[e]},r.prototype.handleChanges=function(e,t,a){var o=a||t;this.em.changesUp(o,{dataRecord:e,options:o})},r})(Sr.Kx);const NA=fW;var pW=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),YS=function(){return YS=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},YS.apply(this,arguments)},hW=(function(s){pW(r,s);function r(e,t){var a=s.call(this,e,t)||this;return a.collectionsStateMap={},a.listenToPropsChange(),a}return r.prototype.onCollectionsStateMapUpdate=function(e){var t,a;this.collectionsStateMap=e,(a=(t=this.dataResolverWatchers)===null||t===void 0?void 0:t.onCollectionsStateMapUpdate)===null||a===void 0||a.call(t),this.components().forEach(function(o){var i;(i=o.onCollectionsStateMapUpdate)===null||i===void 0||i.call(o,e)})},r.prototype.syncOnComponentChange=function(e,t,a){var o=this.collectionsStateMap;this.collectionsStateMap={},s.prototype.syncOnComponentChange.call(this,e,t,a),this.collectionsStateMap=o,this.onCollectionsStateMapUpdate(o)},r.prototype.setDataResolver=function(e){return this.set("dataResolver",e)},r.prototype.getDataResolver=function(){return this.dataResolverProps},Object.defineProperty(r.prototype,"dataResolverProps",{get:function(){return this.get("dataResolver")},enumerable:!1,configurable:!0}),r.prototype.listenToDataSource=function(){var e=this,t,a=this.dataResolverPath;if(a){var o=this,i=o.em,l=o.collectionsStateMap;(t=this.dataSourceWatcher)===null||t===void 0||t.destroy(),this.dataSourceWatcher=new Ox({em:i,resolver:new Rm({type:ac,path:a},{em:i,collectionsStateMap:l}),onUpdate:function(){return e.onDataSourceChange()}})}},r.prototype.listenToPropsChange=function(){var e=this;this.on("change:dataResolver",function(){e.listenToDataSource()}),this.listenToDataSource()},Object.defineProperty(r.prototype,"dataSourceProps",{get:function(){return this.get("dataResolver")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dataResolverPath",{get:function(){var e;return(e=this.dataSourceProps)===null||e===void 0?void 0:e.path},enumerable:!1,configurable:!0}),r.prototype.onDataSourceChange=function(){this.onCollectionsStateMapUpdate(this.collectionsStateMap)},r.prototype.getDataSourceItems=function(){var e=this.dataSourceProps;if(!e)return[];var t=this.listDataSourceItems(e);if(t&&(0,_e.isArray)(t))return t;var a=YS({},t);return a},r.prototype.listDataSourceItems=function(e){var t=e instanceof NA?e.get("id"):e.path;if(!t)return[];var a=this.em.DataSources.getValue(t,[]),o=t.split(".").length===1;return o&&(a=Object.entries(a).map(function(i){i[0];var l=i[1];return l})),a},r.prototype.getItemKey=function(e,t){return(0,_e.isArray)(e)?t:Object.keys(e)[t]},r.prototype.removePropsListeners=function(){var e;this.off("change:dataResolver"),(e=this.dataSourceWatcher)===null||e===void 0||e.destroy(),this.dataSourceWatcher=void 0},r.prototype.destroy=function(e){return this.removePropsListeners(),s.prototype.destroy.call(this,e)},r})(Wa);const kA=hW;var mW=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Si=function(){return Si=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Si.apply(this,arguments)},rC={avoidStore:!0,partial:!0},gW=(function(s){mW(r,s);function r(e,t){var a=this;if(t.forCloning)return a=s.call(this,e,t)||this;var o=Si(Si({},e),{droppable:!1}),i=a=s.call(this,o,t)||this;return a.rebuildChildrenFromCollection=a.rebuildChildrenFromCollection.bind(a),a.listenToPropsChange(),a.rebuildChildrenFromCollection(),i}return Object.defineProperty(r.prototype,"defaults",{get:function(){return Si(Si({},s.prototype.defaults),{droppable:!1,dataResolver:{},type:Ka.collection,components:[{type:Ka.collectionItem}]})},enumerable:!1,configurable:!0}),r.prototype.getItemsCount=function(){var e,t,a=this.getDataSourceItems(),o=xW(a),i=Math.max(0,(e=this.getConfigStartIndex())!==null&&e!==void 0?e:0),l=(t=this.getConfigEndIndex())!==null&&t!==void 0?t:Number.MAX_VALUE,c=Math.min(o-1,l),d=c-i+1;return Math.max(0,d)},r.prototype.getConfigStartIndex=function(){return this.dataResolver.startIndex},r.prototype.getConfigEndIndex=function(){return this.dataResolver.endIndex},r.prototype.getDataSource=function(){var e;return(e=this.dataResolver)===null||e===void 0?void 0:e.dataSource},r.prototype.getCollectionId=function(){var e;return(e=this.dataResolver)===null||e===void 0?void 0:e.collectionId},r.prototype.getCollectionItemComponents=function(){return this.firstChild.components()},r.prototype.setCollectionId=function(e){this.updateCollectionConfig({collectionId:e})},r.prototype.setStartIndex=function(e){if(e<0){this.em.logError("Start index should be greater than or equal to 0");return}this.updateCollectionConfig({startIndex:e})},r.prototype.setEndIndex=function(e){this.updateCollectionConfig({endIndex:e})},r.prototype.setDataSource=function(e){this.set(gy,Si(Si({},this.dataResolver),{dataSource:e}))},r.prototype.setCollectionItemComponents=function(e){this.firstChild.components(e)},r.prototype.onCollectionsStateMapUpdate=function(e){var t=this;s.prototype.onCollectionsStateMapUpdate.call(this,e);var a=this.getDataSourceItems(),o=this.resolveCollectionConfig(a).startIndex,i=this.components();i.forEach(function(l,c){var d=t.getItemKey(a,o+c),p=t.getCollectionsStateMapForItem(a,d);l.onCollectionsStateMapUpdate(p)})},r.prototype.stopSyncComponentCollectionState=function(){this.stopListening(this.components(),"add remove reset",this.syncOnComponentChange),this.onCollectionsStateMapUpdate({})},r.prototype.setCollectionStateMapAndPropagate=function(e,t){e.setSymbolOverride(["locked","layerable",Fh]),e.syncComponentsCollectionState(),e.onCollectionsStateMapUpdate(t)},r.prototype.onDataSourceChange=function(){this.rebuildChildrenFromCollection()},r.prototype.listenToPropsChange=function(){var e=this;this.on("change:".concat(gy),function(){e.rebuildChildrenFromCollection(),e.listenToDataSource()}),this.listenToDataSource()},Object.defineProperty(r.prototype,"dataSourceProps",{get:function(){return this.dataResolver.dataSource},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dataResolver",{get:function(){return this.get(gy)||{}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"firstChild",{get:function(){return this.components().at(0)},enumerable:!1,configurable:!0}),r.prototype.updateCollectionConfig=function(e){this.set(gy,Si(Si({},this.dataResolver),e))},r.prototype.rebuildChildrenFromCollection=function(){var e=this.getDataSourceItems(),t=this.resolveCollectionConfig(e).totalItems;if(t===this.components().length){this.onCollectionsStateMapUpdate(this.collectionsStateMap);return}var a=this.getCollectionItems(e);this.components().reset(a,Hv)},r.prototype.getCollectionItems=function(e){var t,a=this.ensureFirstChild(),o=a.getStyle().display,i=!o||o==="none",l=i?"":o;a.addStyle({display:"none"},rC);var c=[a],d=bW(this.dataResolver,this.em);if(!d)return c;var p=this.collectionId,h=e??this.getDataSourceItems(),g=this.resolveCollectionConfig(h),y=g.startIndex,b=g.endIndex,v=this.hasDuplicateCollectionId();if(v)return this.em.logError('The collection ID "'.concat(p,'" already exists in the parent collection state. Overriding it is not allowed.')),c;for(var w=y;w<=b;w++){var C=w===y,k=this.getItemKey(h,w),N=this.getCollectionsStateMapForItem(h,k);if(C){(t=Oi(a))===null||t===void 0||t.forEach(function(R){return ij(R)}),this.setCollectionStateMapAndPropagate(a,N),a.addStyle({display:l},rC);continue}var O=a.clone({symbol:!0,symbolInv:!0});O.set({locked:!0,layerable:!1},rC),this.setCollectionStateMapAndPropagate(O,N),c.push(O)}return c},r.prototype.getCollectionsStateMapForItem=function(e,t){var a,o=this.resolveCollectionConfig(e),i=o.startIndex,l=o.endIndex,c=o.totalItems,d=this.collectionId,p=e[t],h=this.collectionsStateMap,g=typeof t=="string"?Object.keys(e).indexOf(t):t,y=g-i,b=c-(1+y),v={collectionId:d,currentIndex:g,currentItem:p,currentKey:t,startIndex:i,endIndex:l,totalItems:c,remainingItems:b},w=Si(Si({},h),(a={},a[d]=v,a));return w},r.prototype.hasDuplicateCollectionId=function(){var e=this.collectionId,t=this.collectionsStateMap;return!!t[e]},r.prototype.resolveCollectionConfig=function(e){var t,a,o=Array.isArray(e),i=o?e.length:Object.keys(e).length,l=(t=this.getConfigStartIndex())!==null&&t!==void 0?t:0,c=(a=this.getConfigEndIndex())!==null&&a!==void 0?a:Number.MAX_VALUE,d=Math.min(i-1,c),p=0;return i>0&&(p=Math.max(0,d-l+1)),{startIndex:l,endIndex:d,totalItems:p,isArray:o}},r.prototype.ensureFirstChild=function(){var e=this.em.Components.getType(Ka.collectionItem).model;return this.firstChild||new e({type:Ka.collectionItem},this.opt)},Object.defineProperty(r.prototype,"collectionId",{get:function(){var e,t;return(t=(e=this.dataResolverProps)===null||e===void 0?void 0:e.collectionId)!==null&&t!==void 0?t:""},enumerable:!1,configurable:!0}),r.isComponent=function(e){return(0,Zt.toLowerCase)(e.tagName)===Ka.collection},r.prototype.toJSON=function(e){var t=s.prototype.toJSON.call(this,e);delete t.droppable,delete t[_i];var a=this.firstChild;return Si(Si({},t),{components:[a]})},r})(kA);const yW=gW;function xW(s){return(0,_e.isArray)(s)?s.length:Object.keys(s).length}function vW(s,r,e){return s?!0:(e.logError('The "'.concat(r,'" property is required in the collection definition.')),!1)}function bW(s,r){for(var e=[{property:s?.collectionId,propertyPath:"dataResolver.collectionId"},{property:s?.dataSource,propertyPath:"dataResolver.dataSource"}],t=0,a=e;t<a.length;t++){var o=a[t].propertyPath;if(!vW(s,o,r))return[]}var i=s?.startIndex;return i!==void 0&&(i<0||!Number.isInteger(i))&&r.logError("Invalid startIndex: ".concat(i,". It must be a non-negative integer.")),!0}var wW=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),jW=(function(s){wW(r,s);function r(){var e=s!==null&&s.apply(this,arguments)||this;return e.compView=ma,e}return r.prototype.initialize=function(e){this.opts=e||{},this.config=e.config||{},this.em=this.config.em;var t=this.collection;this.listenTo(t,"add",this.addTo),this.listenTo(t,"reset",this.resetChildren),this.listenTo(t,"remove",this.removeChildren)},r.prototype.removeChildren=function(e,t,a){var o=this;a===void 0&&(a={}),e.views.forEach(function(l){if(l){var c=l.childrenView,d=l.scriptContainer;c&&c.stopListening(),(0,Ar.YZ)(d),l.remove.apply(l)}});var i=e.components();i.forEach(function(l){return o.removeChildren(l,t,a)})},r.prototype.addTo=function(e){this.addToCollection(e,null,this.collection.indexOf(e))},r.prototype.addToCollection=function(e,t,a){for(var o=this,i=o.config,l=o.opts,c=o.em,d=i.frameView,p=d?.model&&e.getView(d.model),h=l.componentTypes||c?.Components.getTypes(),g=e.get("type")||"default",y=this.compView,b=0;b<h.length;b++)if(h[b].id==g){y=h[b].view;break}var v=p||new y({model:e,config:i,componentTypes:h}),w;try{w=v.render().el}catch(O){w=document.createTextNode(""),c.logError(O)}if(t)t.appendChild(w);else{var C=this.parentEl,k=C.childNodes;if((0,_e.isUndefined)(a))C.appendChild(w);else{var N=k.length==a;N&&a--,N||!k.length?C.appendChild(w):C.insertBefore(w,k[a])}}return e.opt.temporary||c?.trigger(bs.I.mount,e),w},r.prototype.resetChildren=function(e,t){var a=this;if(t===void 0&&(t={}),!t.skipViewUpdate){var o=t.previousModels;t.skipDomReset||(this.parentEl.innerHTML=""),o?.forEach(function(i){return a.removeChildren(i,a.collection)}),e.each(function(i){return a.addToCollection(i)})}},r.prototype.render=function(e){var t=this,a=this.el,o=document.createDocumentFragment();return this.parentEl=e||this.el,this.collection.each(function(i){return t.addToCollection(i,o)}),a.innerHTML="",a.appendChild(o),this},r})(Sr.Ss);const _A=jW;var CW=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Bc=function(){return Bc=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Bc.apply(this,arguments)},SW=(function(s){CW(r,s);function r(){var e=s!==null&&s.apply(this,arguments)||this;return e.rendered=!1,e}return r.prototype.className=function(){return this.getClasses()},r.prototype.tagName=function(){return this.model.get("tagName")},r.prototype.preinitialize=function(e){e===void 0&&(e={}),this.opts=e},r.prototype.initialize=function(e){e===void 0&&(e={});var t=this.model,a=e.config||{},o=a.em,i=t.opt||{},l=this,c=l.$el,d=l.el;this.opts=e,this.modelOpt=i,this.config=a,this.em=o,this.pfx=a.stylePrefix||"",this.ppfx=a.pStylePrefix||"",this.attr=t.get("attributes"),this.classe=this.attr.class||[],this.listenTo(t,"change:style",this.updateStyle),this.listenTo(t,"change:attributes",this.renderAttributes),this.listenTo(t,"change:highlightable",this.updateHighlight),this.listenTo(t,"change:status change:locked",this.updateStatus),this.listenTo(t,"change:script rerender",this.reset),this.listenTo(t,"change:content",this.updateContent),this.listenTo(t,"change",this.handleChange),this.listenTo(t,"active",this.onActive),this.listenTo(t,"disable",this.onDisable),c.data("model",t),(0,Zt.setViewEl)(d,this),t.view=this,this.frameView&&t.views.push(this),this.initClasses(),this.initComponents({avoidRender:!0}),this.events=Bc(Bc({},this.constructor.getEvents()),{dragstart:"handleDragStart"}),this.delegateEvents(),!i.temporary&&this.init(this._clbObj())},Object.defineProperty(r.prototype,"__cmpStyleOpts",{get:function(){return{state:"",mediaText:""}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"frameView",{get:function(){return this.opts.config.frameView},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"createDoc",{get:function(){var e,t,a=((e=this.frameView)===null||e===void 0?void 0:e.getDoc())||document;return!((t=this.opts.config)===null||t===void 0)&&t.useFrameDoc?a:document},enumerable:!1,configurable:!0}),r.prototype.__isDraggable=function(){var e=this,t=e.model,a=e.config,o=t.attributes.draggable;return a.draggableComponents&&o},r.prototype._clbObj=function(){var e=this,t=e.em,a=e.model,o=e.el;return{editor:t?.getEditor(),model:a,el:o}},r.prototype.init=function(e){},r.prototype.removed=function(e){},r.prototype.onRender=function(e){},r.prototype.onActive=function(e){},r.prototype.onDisable=function(e){},r.prototype.remove=function(){var e;s.prototype.remove.call(this);var t=this,a=t.model,o=t.$el,i=a.views,l=this.frameView||{};return a.components().forEach(function(c){var d=c.getView(l.model);d?.remove()}),(e=this.childrenView)===null||e===void 0||e.remove(),i.splice(i.indexOf(this),1),this.removed(this._clbObj()),o.data({model:"",collection:"",view:""}),this},r.prototype.handleDragStart=function(e){if(!this.__isDraggable())return!1;e.stopPropagation(),e.preventDefault();var t=this.em.getSelectedAll(),a=t.includes(this.model)?t:[this.model];this.em.Commands.run("tlb-move",{target:a,event:e})},r.prototype.initClasses=function(){var e=this.model,t=e.classes,a="change:classes";t instanceof Yu&&(this.stopListening(e,a,this.initClasses),this.listenTo(e,a,this.initClasses),this.listenTo(t,"add remove change reset",this.updateClasses),t.length&&this.importClasses())},r.prototype.initComponents=function(e){e===void 0&&(e={});var t=this,a=t.model,o=t.$el,i=t.childrenView,l="change:components",c=a.get("components"),d=[a,l,this.initComponents];c instanceof Qy&&(o.data("collection",c),i&&i.remove(),this.stopListening.apply(this,d),!e.avoidRender&&this.renderChildren(),this.listenTo.apply(this,d))},r.prototype.handleChange=function(){var e=this.model,t=(0,_e.keys)(e.changed);if(!(t.length===1&&t[0]==="status")){e.emitUpdate();for(var a in e.changed)e.emitUpdate(a)}},r.prototype.importClasses=function(){var e=this,t=e.em,a=e.model,o=t.Selectors;o&&a.classes.forEach(function(i){return o.add(i.getName())})},r.prototype.updateStatus=function(e){e===void 0&&(e={});var t=this,a=t.em,o=t.el,i=t.ppfx,l=t.model,c=a?.Canvas,d=c?.config.extHl,p=l.get("status"),h="".concat(i,"selected"),g="".concat(h,"-parent"),y="".concat(i,"freezed"),b="".concat(i,"hovered"),v="".concat(i,"no-pointer"),w="".concat(i,"pointer-init"),C=[h,g,y,b,v,w],k=d&&!e.noExtHl?"":h;this.$el.removeClass(C.join(" "));var N=o.getAttribute("class")||"",O=[N],R=!c?.hasCustomSpot(Sl.F.Select),L=!c?.hasCustomSpot(Sl.F.Target);switch(p){case"selected":R&&O.push(k);break;case"selected-parent":L&&O.push(g);break;case"freezed":O.push(y);break;case"freezed-selected":O.push(y),R&&O.push(k);break;case"hovered":!e.avoidHover&&O.push(b);break}(0,_e.isBoolean)(l.locked)&&O.push(l.locked?v:w);var B=O.filter(Boolean).join(" ");B&&o.setAttribute("class",B)},r.prototype.updateHighlight=function(){var e=this.model,t=e.get("textable"),a=e.get("highlightable")&&(t||!e.isChildOf("text"));this.setAttribute("data-gjs-highlightable",a?!0:"")},r.prototype.updateStyle=function(e,t,a){a===void 0&&(a={});var o=this,i=o.model,l=o.em;if(np(l)&&!a.inline){var c=this.__cmpStyleOpts,d=i.getStyle(Bc({inline:!0},c));!(0,_e.isEmpty)(d)&&i.setStyle(d,c)}else this.setAttribute("style",i.styleToString(a))},r.prototype.updateStyles=function(){this.updateStyle()},r.prototype.updateClasses=function(){var e,t,a=((t=(e=this.model.classes).pluck)===null||t===void 0?void 0:t.call(e,"name").join(" "))||"";this.setAttribute("class",a),this.updateStatus(),this.onAttrUpdate()},r.prototype.setAttribute=function(e,t){var a=this.$el;t?a.attr(e,t):a.removeAttr(e)},r.prototype.getClasses=function(){return this.model.getClasses().join(" ")},r.prototype.updateAttributes=function(){var e=this,t=e.model,a=e.$el;e.el;var o=t.attributes,i=o.textable,l=o.type,c=Bc(Bc({id:t.getId(),"data-gjs-type":l||"default"},this.__isDraggable()&&{draggable:!0}),i&&{contenteditable:"false"});this.__clearAttributes(),this.updateStyle(),this.updateHighlight();var d=Bc(Bc({},c),t.getAttributes());(0,_e.keys)(d).forEach(function(p){return d[p]===!1&&delete d[p]}),a.attr(d)},r.prototype.__clearAttributes=function(){var e=this,t=e.el,a=e.$el,o=[];(0,_e.each)(t.attributes,function(i){return o.push(i.nodeName)}),o.forEach(function(i){return a.removeAttr(i)})},r.prototype.updateContent=function(){var e=this.model.content,t=this.model.components().length;this.getChildrenContainer().innerHTML=t?"":e},r.prototype.prevDef=function(e){e.preventDefault()},r.prototype.updateScript=function(){var e=this,t=e.model,a=e.em;t.get("script")&&a?.Canvas.getCanvasView().updateScript(this)},r.prototype.getChildrenContainer=function(){var e=this.el;return typeof this.getChildrenSelector=="function"?e=this.el.querySelector(this.getChildrenSelector()):this.getTemplate,e},r.prototype.getOffsetRect=function(){var e={top:0,left:0,bottom:0,right:0},t=this.el,a=0,o=0,i=function(l){var c=l.offsetParent;c?(a+=c.offsetTop,o+=c.offsetLeft,i(c)):(e.top=t.offsetTop+a,e.left=t.offsetLeft+o,e.bottom=e.top+t.offsetHeight,e.right=e.left+t.offsetWidth)};return i(t),e},r.prototype.isInViewport=function(){var e=this,t=e.el,a=e.em,o=e.frameView,i=a.Canvas.getCanvasView(),l=i.getElBoxRect(t,{local:!0}),c=o.el,d=c.clientHeight,p=c.clientWidth,h=l.y,g=l.x,y=h+l.height,b=g+l.width,v=h>=0&&h<d,w=y>0&&y<d,C=b>=0&&b<p,k=g>0&&g<=p,N=(v||w)&&(C||k);return N},r.prototype.scrollIntoView=function(e){var t;e===void 0&&(e={});var a=this.isInViewport();if(!a||e.force){var o=this.el;if(e.behavior!=="smooth"){var i=this.getOffsetRect();(t=o.ownerDocument.defaultView)===null||t===void 0||t.scrollTo(0,i.top)}else o.scrollIntoView(Bc({behavior:"smooth",block:"nearest"},e))}},r.prototype.reset=function(){var e=this,t=e.el,a=e.model;e.scriptContainer&&a.emitWithEditor(bs.I.scriptUnmount,{component:a,view:e,el:t}),this.el="",this._ensureElement(),this._setData(),(0,Ar.bG)(t,this.el),this.render()},r.prototype._setData=function(){var e=this,t=e.model,a=e.el,o=t.components(),i=this;this.$el.data({model:t,collection:o,view:i}),(0,Zt.setViewEl)(a,this)},r.prototype._createElement=function(e){return this.createDoc.createElement(e)},r.prototype.renderChildren=function(){this.updateContent();var e=this.getChildrenContainer(),t=this.childrenView||new _A({collection:this.model.get("components"),config:this.config,componentTypes:this.opts.componentTypes});t.render(e),this.childrenView=t;for(var a=Array.prototype.slice.call(t.el.childNodes),o=0,i=a.length;o<i;o++)e.appendChild(a.shift())},r.prototype.renderAttributes=function(e,t,a){a===void 0&&(a={}),!a.skipViewUpdate&&(this.updateAttributes(),this.updateClasses())},r.prototype.onAttrUpdate=function(){},r.prototype.render=function(){return this.renderAttributes(),this.modelOpt.temporary?this:(this.renderChildren(),this.updateScript(),(0,Zt.setViewEl)(this.el,this),this.postRender(),this)},r.prototype.postRender=function(){if(!this.modelOpt.temporary){var e=this,t=e.model,a=e.el;this.onRender(this._clbObj()),t.emitWithEditor(bs.I.render,{component:t,view:this,el:a}),this.rendered=!0}},r.getEvents=function(){return(0,_e.result)(this.prototype,"events")},r})(Sr.Ss);const ma=SW;var NW=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),kW=(function(s){NW(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r})(ma);const _W=kW;var EW=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),TW=(function(s){EW(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.initialize=function(e){e===void 0&&(e={}),s.prototype.initialize.call(this,e),this.postRender=this.postRender.bind(this),this.listenTo(this.model.components(),"reset",this.postRender),this.dataResolverListener=new Ox({em:this.em,resolver:this.model.dataResolver,onUpdate:this.postRender})},r.prototype.renderDataResolver=function(){var e=this.model.getIfTrueContent(),t=this.model.getIfFalseContent(),a=e?.getEl(),o=t?.getEl(),i=this.model.isTrue();a&&(a.style.display=i?"":"none"),o&&(o.style.display=i?"none":"")},r.prototype.postRender=function(){this.renderDataResolver(),s.prototype.postRender.call(this)},r.prototype.remove=function(){return this.stopListening(this.model.components(),"reset",this.postRender),this.dataResolverListener.destroy(),s.prototype.remove.call(this)},r})(ma);const OW=TW;var PW=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),AW=(function(s){PW(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.initialize=function(e){var t=this;e===void 0&&(e={}),s.prototype.initialize.call(this,e),this.dataResolverListener=new Ox({em:this.em,resolver:this.model.dataResolver,onUpdate:function(){return t.postRender()}})},r.prototype.remove=function(){return this.dataResolverListener.destroy(),s.prototype.remove.call(this)},r.prototype.postRender=function(){var e=this.model,t=e.getDataResolver(),a=!!t.asPlainText;a?this.el.textContent=e.getDataValue():this.el.innerHTML=e.getDataValue(),s.prototype.postRender.call(this)},r})(ma);const MW=AW;var IW=function(){return{stylePrefix:"comp-",components:[],draggableComponents:!0,disableTextInnerChilds:!1,processor:void 0,useFrameDoc:!1,voidElements:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]}};const RW=IW;var DW=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),kb=function(){return kb=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},kb.apply(this,arguments)},LW=(function(s){DW(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return kb(kb({},s.prototype.defaults),{tagName:"",droppable:!1,layerable:!1,selectable:!1,editable:!0})},enumerable:!1,configurable:!0}),r.prototype.toHTML=function(){var e=this.content,t=this.parent();return t?.is("script")?e:this.__escapeContent(e)},r.prototype.__escapeContent=function(e){return(0,Zt.escapeNodeContent)(e)},r.isComponent=function(e){var t;if(e.nodeType===3)return{type:"textnode",content:(t=e.textContent)!==null&&t!==void 0?t:""}},r})(Wa);const EA=LW;var FW=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),ZS=function(){return ZS=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},ZS.apply(this,arguments)},BW=(function(s){FW(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return ZS({},s.prototype.defaults)},enumerable:!1,configurable:!0}),r.prototype.toHTML=function(){return"<!--".concat(this.content,"-->")},r.isComponent=function(e){var t;if(e.nodeType==8)return{type:"comment",content:(t=e.textContent)!==null&&t!==void 0?t:""}},r})(EA);const zW=BW;var $W=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),_b=function(){return _b=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},_b.apply(this,arguments)},nC="iframe",UW=(function(s){$W(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return _b(_b({},s.prototype.defaults),{type:nC,tagName:nC,droppable:!1,resizable:!0,traits:["id","title","src"],attributes:{frameborder:"0"}})},enumerable:!1,configurable:!0}),r.isComponent=function(e){return(0,Zt.toLowerCase)(e.tagName)===nC},r})(Wa);const VW=UW;var HW=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Eb=function(){return Eb=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Eb.apply(this,arguments)},EE='xmlns="http://www.w3.org/2000/svg" width="100" viewBox="0 0 24 24" style="fill: rgba(0,0,0,0.15); transform: scale(0.75)"',WW=(function(s){HW(r,s);function r(e,t){e===void 0&&(e={});var a=s.call(this,e,t)||this,o=a.get("attributes").src;return o&&(0,Zt.buildBase64UrlFromSvg)((0,_e.result)(a,"defaults").src)!==o&&a.set("src",o,{silent:!0}),a}return Object.defineProperty(r.prototype,"defaults",{get:function(){return Eb(Eb({},s.prototype.defaults),{type:"image",tagName:"img",void:!0,droppable:0,editable:1,highlightable:0,resizable:{ratioDefault:1},traits:["alt"],src:"<svg ".concat(EE,`>
        <path d="M8.5 13.5l2.5 3 3.5-4.5 4.5 6H5m16 1V5a2 2 0 0 0-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2z"></path>
      </svg>`),fallback:"<svg ".concat(EE,`>
        <path d="M2.28 3L1 4.27l2 2V19c0 1.1.9 2 2 2h12.73l2 2L21 21.72 2.28 3m2.55 0L21 19.17V5a2 2 0 0 0-2-2H4.83M8.5 13.5l2.5 3 1-1.25L14.73 18H5l3.5-4.5z"></path>
      </svg>`),file:""})},enumerable:!1,configurable:!0}),r.prototype.initToolbar=function(){s.prototype.initToolbar.call(this);var e=this.em;if(e){var t=e.Commands,a="image-editor";if(t.has(a)){for(var o=!1,i=this.get("toolbar"),l=0;l<i.length;l++)if(i[l].command==="image-editor"){o=!0;break}o||(i.push({attributes:{class:"fa fa-pencil"},command:a}),this.set("toolbar",i))}}},r.prototype.getAttrToHTML=function(){var e=s.prototype.getAttrToHTML.call(this),t=this.getSrcResult();return t&&(e.src=t),e},r.prototype.getSrcResult=function(e){e===void 0&&(e={});var t=this.get(e.fallback?"fallback":"src")||"",a=t;return t&&t.substr(0,4)==="<svg"&&(a=(0,Zt.buildBase64UrlFromSvg)(t)),a},r.prototype.isDefaultSrc=function(){var e=this.get("src"),t=(0,_e.result)(this,"defaults").src;return e===t||e===(0,Zt.buildBase64UrlFromSvg)(t)},r.prototype.toJSON=function(e){var t=s.prototype.toJSON.call(this,e),a=t.attributes;return a&&t.src===a.src&&delete t.src,t},r.prototype.parseUri=function(e){var t={},a=function(o){o===void 0&&(o="");for(var i={},l=o.substring(1).split("&"),c=0;c<l.length;c++){var d=l[c].split("="),p=decodeURIComponent(d[0]);p&&(i[p]=decodeURIComponent(d[1]||""))}return i};if((0,Zt.hasWin)())t=document.createElement("a"),t.href=e;else if(typeof URL<"u")try{t=new URL(e)}catch{}return{hostname:t.hostname||"",pathname:t.pathname||"",protocol:t.protocol||"",search:t.search||"",hash:t.hash||"",port:t.port||"",query:a(t.search)}},r.isComponent=function(e){return(0,Zt.toLowerCase)(e.tagName)==="img"},r})(Wa);const U2=WW;var qW=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Tb=function(){return Tb=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Tb.apply(this,arguments)},GW=(function(s){qW(r,s);function r(e,t){e===void 0&&(e={});var a=s.call(this,e,t)||this;return a.__checkInnerChilds(),a}return Object.defineProperty(r.prototype,"defaults",{get:function(){return Tb(Tb({},s.prototype.defaults),{type:"text",droppable:!1,editable:!0})},enumerable:!1,configurable:!0}),r.prototype.__checkInnerChilds=function(){var e=this.em.Components.config.disableTextInnerChilds;if(e){var t=function(a){a.isInstanceOf("textnode")||a.set({locked:!0,layerable:!1})};(0,_e.isFunction)(e)?this.forEachChild(function(a){e(a)&&t(a)}):this.forEachChild(t)}},r})(Wa);const V2=GW;var KW=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Ob=function(){return Ob=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Ob.apply(this,arguments)},sC="label",YW=(function(s){KW(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return Ob(Ob({},s.prototype.defaults),{type:sC,tagName:sC,traits:["id","title","for"]})},enumerable:!1,configurable:!0}),r.isComponent=function(e){return(0,Zt.toLowerCase)(e.tagName)===sC},r})(V2);const ZW=YW;var XW=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Pb=function(){return Pb=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Pb.apply(this,arguments)},TE="link",QW=(function(s){XW(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return Pb(Pb({},s.prototype.defaults),{type:TE,tagName:"a",traits:["title","href","target"]})},enumerable:!1,configurable:!0}),r.isComponent=function(e,t){t===void 0&&(t={});var a;if((0,Zt.toLowerCase)(e.tagName)==="a"){var o=t.textTags||[];a={type:TE,editable:!1};var i=e.childNodes,l=i.length;l||delete a.editable,(0,_e.forEach)(i,function(c){var d=c.tagName;(c.nodeType==3&&c.textContent.trim()!==""||d&&o.indexOf((0,Zt.toLowerCase)(d))>=0)&&delete a.editable})}return a},r})(V2);const JW=QW;var eq=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Ab=function(){return Ab=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Ab.apply(this,arguments)},tq=(function(s){eq(r,s);function r(e,t){e===void 0&&(e={});var a=s.call(this,e,t)||this;return a.get("src")?a.parseFromSrc():a.updateSrc(),a.listenTo(a,"change:address change:zoom change:mapType",a.updateSrc),a}return Object.defineProperty(r.prototype,"defaults",{get:function(){var e=s.prototype.defaults;return Ab(Ab({},e),{type:"map",src:"",void:!1,mapUrl:"https://maps.google.com/maps",tagName:"iframe",mapType:"q",address:"",zoom:"1",attributes:{frameborder:0},toolbar:e.toolbar,traits:[{label:"Address",name:"address",placeholder:"eg. London, UK",changeProp:!0},{type:"select",label:"Map type",name:"mapType",changeProp:!0,options:[{id:"q",label:"Roadmap"},{id:"w",label:"Satellite"}]},{label:"Zoom",name:"zoom",type:"range",min:1,max:20,changeProp:!0}]})},enumerable:!1,configurable:!0}),r.prototype.updateSrc=function(){this.set("src",this.getMapUrl())},r.prototype.getMapUrl=function(){var e=this.get("address"),t=this.get("zoom"),a=this.get("mapType");e=e?"&q="+e:"",t=t?"&z="+t:"",a=a?"&t="+a:"";var o=this.get("mapUrl")+"?"+e+t+a;return o+="&output=embed",o},r.prototype.parseFromSrc=function(){var e=this.parseUri(this.get("src")),t=e.query;t.q&&this.set("address",t.q),t.z&&this.set("zoom",t.z),t.t&&this.set("mapType",t.t)},r.isComponent=function(e){if((0,Zt.toLowerCase)(e.tagName)=="iframe"&&/maps\.google\.com/.test(e.src))return{type:"map",src:e.src}},r})(U2);const rq=tq;var nq=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Mb=function(){return Mb=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Mb.apply(this,arguments)},aC="script",sq=(function(s){nq(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return Mb(Mb({},s.prototype.defaults),{type:aC,tagName:aC,droppable:!1,draggable:!1,layerable:!1,highlightable:!1})},enumerable:!1,configurable:!0}),r.isComponent=function(e){return(0,Zt.toLowerCase)(e.tagName)===aC},r})(Wa);const aq=sq;var oq=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Ib=function(){return Ib=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Ib.apply(this,arguments)},oC="svg",iq=(function(s){oq(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return Ib(Ib({},s.prototype.defaults),{type:oC,tagName:oC,highlightable:!1,resizable:{ratioDefault:!0}})},enumerable:!1,configurable:!0}),r.prototype.getName=function(){var e=this.get("tagName"),t=this.get("custom-name");return e=e.charAt(0).toUpperCase()+e.slice(1),t||e},r.isComponent=function(e){return(0,Zt.toLowerCase)(e.tagName)===oC},r})(Wa);const TA=iq;var lq=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Rb=function(){return Rb=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Rb.apply(this,arguments)},cq=(function(s){lq(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return Rb(Rb({},s.prototype.defaults),{selectable:!1,hoverable:!1,layerable:!1})},enumerable:!1,configurable:!0}),r.isComponent=function(e,t){return t===void 0&&(t={}),!!t.inSvg},r})(TA);const dq=cq;var uq=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Db=function(){return Db=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Db.apply(this,arguments)},iC="table",fq=(function(s){uq(r,s);function r(e,t){e===void 0&&(e={});var a=s.call(this,e,t)||this,o=a.get("components");return!o.length&&o.add({type:"tbody"}),a}return Object.defineProperty(r.prototype,"defaults",{get:function(){return Db(Db({},s.prototype.defaults),{type:iC,tagName:iC,droppable:["tbody","thead","tfoot"]})},enumerable:!1,configurable:!0}),r.isComponent=function(e){return(0,Zt.toLowerCase)(e.tagName)===iC},r})(Wa);const pq=fq;var hq=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Lb=function(){return Lb=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Lb.apply(this,arguments)},lC="tbody",mq=(function(s){hq(r,s);function r(e,t){e===void 0&&(e={});var a=s.call(this,e,t)||this,o=a.get("components"),i=a.get("columns"),l=a.get("rows");if(!o.length){for(var c=[];l--;){for(var d=[],p=i;p--;)d.push({type:"cell",classes:["cell"]});c.push({type:"row",classes:["row"],components:d})}o.add(c)}return a}return Object.defineProperty(r.prototype,"defaults",{get:function(){return Lb(Lb({},s.prototype.defaults),{type:lC,tagName:lC,draggable:["table"],droppable:["tr"],columns:1,rows:1})},enumerable:!1,configurable:!0}),r.isComponent=function(e){return(0,Zt.toLowerCase)(e.tagName)===lC},r})(Wa);const H2=mq;var gq=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Fb=function(){return Fb=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Fb.apply(this,arguments)},yq=(function(s){gq(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return Fb(Fb({},s.prototype.defaults),{type:"cell",tagName:"td",draggable:["tr"]})},enumerable:!1,configurable:!0}),r.isComponent=function(e){return["td","th"].indexOf((0,Zt.toLowerCase)(e.tagName))>=0},r})(Wa);const xq=yq;var vq=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Bb=function(){return Bb=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Bb.apply(this,arguments)},cC="tfoot",bq=(function(s){vq(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return Bb(Bb({},s.prototype.defaults),{type:cC,tagName:cC})},enumerable:!1,configurable:!0}),r.isComponent=function(e){return(0,Zt.toLowerCase)(e.tagName)===cC},r})(H2);const wq=bq;var jq=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),zb=function(){return zb=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},zb.apply(this,arguments)},dC="thead",Cq=(function(s){jq(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return zb(zb({},s.prototype.defaults),{type:dC,tagName:dC})},enumerable:!1,configurable:!0}),r.isComponent=function(e){return(0,Zt.toLowerCase)(e.tagName)===dC},r})(H2);const Sq=Cq;var Nq=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),$b=function(){return $b=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},$b.apply(this,arguments)},OE="tr",kq=(function(s){Nq(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return $b($b({},s.prototype.defaults),{tagName:OE,draggable:["thead","tbody","tfoot"],droppable:["th","td"]})},enumerable:!1,configurable:!0}),r.isComponent=function(e){return(0,Zt.toLowerCase)(e.tagName)===OE},r})(Wa);const _q=kq;var Eq=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Ub=function(){return Ub=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Ub.apply(this,arguments)},uC="video",Sh="yt",Nh="vi",kh="ytnc",PE="so",fC=function(s){return s&&s!=="0"},Tq=(function(s){Eq(r,s);function r(e,t){e===void 0&&(e={});var a=s.call(this,e,t)||this;return a.get("src")&&a.parseFromSrc(),a.updatePropsFromAttr(),a.updateTraits(),a.on("change:provider",a.updateTraits),a.on("change:videoId change:provider",a.updateSrc),a}return Object.defineProperty(r.prototype,"defaults",{get:function(){return Ub(Ub({},s.prototype.defaults),{type:uC,tagName:uC,videoId:"",void:!1,provider:PE,ytUrl:"https://www.youtube.com/embed/",ytncUrl:"https://www.youtube-nocookie.com/embed/",viUrl:"https://player.vimeo.com/video/",loop:!1,poster:"",muted:!1,autoplay:!1,controls:!0,color:"",list:"",src:"",rel:1,modestbranding:0,sources:[],attributes:{allowfullscreen:"allowfullscreen"}})},enumerable:!1,configurable:!0}),r.prototype.updatePropsFromAttr=function(){if(this.get("provider")===PE){var e=this.get("attributes"),t=e.controls,a=e.autoplay,o=e.loop,i=e.muted,l={};(0,Zt.isDef)(t)&&(l.controls=!!t),(0,Zt.isDef)(a)&&(l.autoplay=!!a),(0,Zt.isDef)(o)&&(l.loop=!!o),(0,Zt.isDef)(i)&&(l.muted=!!i),(0,Zt.isEmptyObj)(l)||this.set(l)}},r.prototype.updateTraits=function(){var e=this.em,t=this.get("provider"),a="iframe",o;switch(t){case Sh:case kh:o=this.getYoutubeTraits();break;case Nh:o=this.getVimeoTraits();break;default:a="video",o=this.getSourceTraits()}this.set({tagName:a},{silent:!0}),this.set({traits:o}),e.get("ready")&&e.trigger("component:toggled")},r.prototype.parseFromSrc=function(){var e=this.get("provider"),t=this.parseUri(this.get("src")),a=t.query;switch(e){case Sh:case kh:case Nh:this.set("videoId",t.pathname.split("/").pop()),a.list&&this.set("list",a.list),fC(a.autoplay)&&this.set("autoplay",!0),fC(a.loop)&&this.set("loop",!0),parseInt(a.controls)===0&&this.set("controls",!1),fC(a.color)&&this.set("color",a.color),a.rel==="0"&&this.set("rel",0),a.modestbranding==="1"&&this.set("modestbranding",1),a.muted==="1"&&this.set("muted",!0);break}},r.prototype.updateSrc=function(){var e=this.get("provider"),t="";switch(e){case Sh:t=this.getYoutubeSrc();break;case kh:t=this.getYoutubeNoCookieSrc();break;case Nh:t=this.getVimeoSrc();break}this.set({src:t})},r.prototype.getAttrToHTML=function(){var e=s.prototype.getAttrToHTML.call(this),t=this.get("provider");switch(t){case Sh:case kh:case Nh:break;default:e.loop=!!this.get("loop"),e.autoplay=!!this.get("autoplay"),e.controls=!!this.get("controls"),e.muted=!!this.get("muted")}return e},r.prototype.getProviderTrait=function(){return{type:"select",label:"Provider",name:"provider",changeProp:!0,options:[{value:"so",name:"HTML5 Source"},{value:Sh,name:"Youtube"},{value:kh,name:"Youtube (no cookie)"},{value:Nh,name:"Vimeo"}]}},r.prototype.getSourceTraits=function(){return[this.getProviderTrait(),{label:"Source",name:"src",placeholder:"eg. ./media/video.mp4",changeProp:!0},{label:"Poster",name:"poster",placeholder:"eg. ./media/image.jpg"},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait(),this.getMutedTrait()]},r.prototype.getYoutubeTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. jNQXAC9IVRw",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait(),{type:"checkbox",label:"Related",name:"rel",changeProp:!0},{type:"checkbox",label:"Modest",name:"modestbranding",changeProp:!0},this.getMutedTrait()]},r.prototype.getVimeoTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. 123456789",changeProp:!0},{label:"Color",name:"color",placeholder:"eg. FF0000",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait(),this.getMutedTrait()]},r.prototype.getAutoplayTrait=function(){return{type:"checkbox",label:"Autoplay",name:"autoplay",changeProp:!0}},r.prototype.getLoopTrait=function(){return{type:"checkbox",label:"Loop",name:"loop",changeProp:!0}},r.prototype.getControlsTrait=function(){return{type:"checkbox",label:"Controls",name:"controls",changeProp:!0}},r.prototype.getMutedTrait=function(){return{type:"checkbox",label:"Muted",name:"muted",changeProp:!0}},r.prototype.getYoutubeSrc=function(){var e=this.get("videoId"),t=this.get("ytUrl"),a=this.get("list");return t+=e+(e.indexOf("?")<0?"?":""),t+=a?"&list=".concat(a):"",t+=this.get("autoplay")?"&autoplay=1":"",t+=this.get("muted")?"&mute=1":"",t+=this.get("controls")?"":"&controls=0&showinfo=0",t+=this.get("loop")?"&loop=1&playlist=".concat(e):"",t+=this.get("rel")?"":"&rel=0",t+=this.get("modestbranding")?"&modestbranding=1":"",t},r.prototype.getYoutubeNoCookieSrc=function(){var e=this.getYoutubeSrc();return e=e.replace(this.get("ytUrl"),this.get("ytncUrl")),e},r.prototype.getVimeoSrc=function(){var e=this.get("viUrl");return e+=this.get("videoId")+"?",e+=this.get("autoplay")?"&autoplay=1":"",e+=this.get("muted")?"&muted=1":"",e+=this.get("loop")?"&loop=1":"",e+=this.get("controls")?"":"&title=0&portrait=0&badge=0",e+=this.get("color")?"&color="+this.get("color"):"",e},r.isComponent=function(e){var t=e.tagName,a=e.src,o=/youtube\.com\/embed/.test(a),i=/youtube-nocookie\.com\/embed/.test(a),l=/player\.vimeo\.com\/video/.test(a),c=o||i||l;if((0,Zt.toLowerCase)(t)==uC||(0,Zt.toLowerCase)(t)=="iframe"&&c){var d={type:"video"};return a&&(d.src=a),c&&(o?d.provider=Sh:i?d.provider=kh:l&&(d.provider=Nh)),d}},r})(U2);const Oq=Tq;var Pq=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Wh=function(){return Wh=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Wh.apply(this,arguments)},Aq=(function(s){Pq(r,s);function r(e,t){e===void 0&&(e={});var a=s.call(this,e,t)||this;a._resolverCurrentItem=0,a._isWatchingCollectionStateMap=!1;var o=a.dataResolverProps;return o&&(a.onDataSourceChange(),a.syncComponentsCollectionState()),a}return Object.defineProperty(r.prototype,"defaults",{get:function(){return Wh(Wh({},s.prototype.defaults),{dataResolver:null,tagName:"body",removable:!1,copyable:!1,draggable:!1,components:[],traits:[],doctype:"",head:null,docEl:null,stylable:["background","background-color","background-image","background-repeat","background-attachment","background-position","background-size"]})},enumerable:!1,configurable:!0}),r.prototype.preInit=function(){var e,t,a=this,o=a.opt,i=a.attributes,l=(e=this.em)===null||e===void 0?void 0:e.Components,c=(t=l?.getType(dm))===null||t===void 0?void 0:t.model,d=l?.getType("default").model;if(c){var p=i.head,h=i.docEl;this.set({head:p&&p instanceof Wa?p:new c(Wh({},p),o),docEl:h&&h instanceof Wa?h:new d(Wh({tagName:"html"},h),o)},{silent:!0})}},Object.defineProperty(r.prototype,"head",{get:function(){return this.get("head")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"docEl",{get:function(){return this.get("docEl")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"doctype",{get:function(){return this.attributes.doctype||""},enumerable:!1,configurable:!0}),r.prototype.clone=function(e){var t=s.prototype.clone.call(this,e);return t.set("head",this.get("head").clone(e)),t.set("docEl",this.get("docEl").clone(e)),t},r.prototype.toHTML=function(e){e===void 0&&(e={});var t=this.doctype,a=(0,_e.isUndefined)(e.asDocument)?!!t:e.asDocument,o=this,i=o.head,l=o.docEl,c=s.prototype.toHTML.call(this,e),d=a&&i?.toHTML(e)||"",p=a&&(0,Ar.kk)(l?.getAttrToHTML())||"",h=p?" ".concat(p):"";return a?"".concat(t,"<html").concat(h,">").concat(d).concat(c,"</html>"):c},r.prototype.onCollectionsStateMapUpdate=function(e){var t=this.head;s.prototype.onCollectionsStateMapUpdate.call(this,e),t.onCollectionsStateMapUpdate(e)},r.prototype.syncComponentsCollectionState=function(){s.prototype.syncComponentsCollectionState.call(this),this.head.syncComponentsCollectionState()},r.prototype.syncOnComponentChange=function(e,t,a){var o=this.getCollectionsStateMap();this.collectionsStateMap=o,s.prototype.syncOnComponentChange.call(this,e,t,a),this.onCollectionsStateMapUpdate(o)},Object.defineProperty(r.prototype,"resolverCurrentItem",{get:function(){return this._resolverCurrentItem},set:function(e){this._resolverCurrentItem=e,this.onCollectionsStateMapUpdate(this.getCollectionsStateMap())},enumerable:!1,configurable:!0}),r.prototype.setResolverCurrentItem=function(e){this.resolverCurrentItem=e},r.prototype.onDataSourceChange=function(){this.onCollectionsStateMapUpdate(this.getCollectionsStateMap())},r.prototype.listenToPropsChange=function(){var e=this;this.on("change:dataResolver",function(t,a){var o=!(0,_e.isUndefined)(a);o&&!e._isWatchingCollectionStateMap?(e._isWatchingCollectionStateMap=!0,e.syncComponentsCollectionState(),e.onCollectionsStateMapUpdate(e.getCollectionsStateMap()),e.listenToDataSource()):!o&&e._isWatchingCollectionStateMap&&(e._isWatchingCollectionStateMap=!1,e.stopSyncComponentCollectionState())}),this.listenToDataSource()},r.prototype.getCollectionsStateMap=function(){var e,t=this,a=t.dataResolverPath,o=t.resolverCurrentItem,i=t.em,l=i.DataSources;if(!a)return{};var c=Ky.rootData,d=this.getDataSourceItems(),p=(0,_e.isNumber)(o)?d[o]:(0,_e.isString)(o)?l.getValue("".concat(a,".").concat(o)):d;return e={},e[c]={collectionId:c,currentItem:p},e},r.prototype.__postAdd=function(){var e,t=(e=this.em)===null||e===void 0?void 0:e.UndoManager;return!this.__hasUm&&t?.add(this),s.prototype.__postAdd.call(this)},r.prototype.__postRemove=function(){var e,t=(e=this.em)===null||e===void 0?void 0:e.UndoManager;return t?.remove(this),s.prototype.__postRemove.call(this)},r.isComponent=function(){return!1},r})(kA);const Mq=Aq;var Iq=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Vb=function(){return Vb=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Vb.apply(this,arguments)},Rq=(function(s){Iq(r,s);function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var a=s.apply(this,e)||this;a.refreshDbn=(0,_e.debounce)(function(){return a.refresh()},0);var o=a.events;return a.on(o.update,a.onUpdate),a.on(o.updateInside,a.onUpdateDeep),a}return r.prototype.removeChildren=function(e,t,a){var o;a===void 0&&(a={}),s.prototype.removeChildren.call(this,e,t,a),(o=Oi(e))===null||o===void 0||o.forEach(function(i){return ij(i,{skipRefs:!0})}),this.__trgEvent(this.events.symbolMainRemove,{component:e})},r.prototype.onAdd=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];s.prototype.onAdd.apply(this,e);var a=e[0];this.__trgEvent(this.events.symbolMainAdd,{component:a})},r.prototype.onUpdate=function(e){this.__trgEvent(this.events.symbolMainUpdate,e)},r.prototype.onUpdateDeep=function(e){this.__trgEvent(this.events.symbolMainUpdateDeep,e)},r.prototype.refresh=function(){var e=this,t=e.em,a=e.events;t.trigger(a.symbol)},r.prototype.__trgEvent=function(e,t,a){a===void 0&&(a=!1);var o=this,i=o.em,l=o.events,c=a?l.symbolInstance:l.symbolMain;i.trigger(e,t),i.trigger(c,Vb(Vb({},t),{event:e})),this.refreshDbn()},r})(Qy);const Dq=Rq;var Lq=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Fq=(function(s){Lq(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype._setAttributes=function(){},r.prototype.renderAttributes=function(){},r.prototype.updateStatus=function(){},r.prototype.updateClasses=function(){},r.prototype.setAttribute=function(){},r.prototype.updateAttributes=function(){},r.prototype.initClasses=function(){},r.prototype.initComponents=function(){},r.prototype.delegateEvents=function(){return this},r.prototype._createElement=function(){return document.createTextNode("")},r.prototype.render=function(){var e=this,t=e.model,a=e.el;return t.opt.temporary?this:(a.textContent=t.content,this)},r})(ma);const OA=Fq;var Bq=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),zq=(function(s){Bq(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype._createElement=function(){return document.createComment(this.model.content)},r})(OA);const $q=zq;var Uq=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Vq=(function(s){Uq(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.tagName=function(){return"div"},r.prototype.initialize=function(e){s.prototype.initialize.call(this,e),this.listenTo(this.model,"change:attributes:src",this.updateSrc)},r.prototype.updateSrc=function(){var e=(0,Ar.I6)(this.el,"iframe")[0];e&&(0,Ar.X6)(e,{src:this.__getSrc()})},r.prototype.render=function(){s.prototype.render.call(this);var e=(0,Ar.a_)("iframe",{class:"".concat(this.ppfx,"no-pointer"),style:"width: 100%; height: 100%; border: none",src:this.__getSrc()});return this.el.appendChild(e),this},r.prototype.__getSrc=function(){return this.model.getAttributes().src||""},r})(ma);const Hq=Vq;var Wq=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),qq=(function(s){Wq(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.tagName=function(){return"img"},r.prototype.events=function(){return{dblclick:"onActive",click:"initResize",error:"onError",load:"onLoad",dragstart:"noDrag"}},r.prototype.initialize=function(e){s.prototype.initialize.call(this,e),this.listenTo(this.model,"change:src",this.updateSrc),this.classEmpty="".concat(this.ppfx,"plh-image"),this.fetchFile()},r.prototype.fetchFile=function(){if(!this.modelOpt.temporary){var e=this,t=e.model,a=e.em,o=t.get("file");if(o&&a){var i=a.Assets.FileUploader();i?.uploadFile({dataTransfer:{files:[o]}},function(l){var c=l&&l.data&&l.data[0],d=c&&((0,_e.isString)(c)?c:c.src);d&&t.set({src:d})},{componentView:this,file:o}),t.set("file","")}}},r.prototype.updateSrc=function(){var e=this.model;e.addAttributes({src:e.getSrcResult()}),this.updateClasses()},r.prototype.updateClasses=function(){s.prototype.updateClasses.call(this);var e=this,t=e.el,a=e.classEmpty,o=e.model,i=o.getSrcResult()&&!o.isDefaultSrc(),l=i?"remove":"add";t.classList[l](a)},r.prototype.onActive=function(e){e?.stopPropagation();var t=this,a=t.em,o=t.model,i=a?.Assets;i&&o.get("editable")&&i.open({select:function(l,c){o.set({src:l.getSrc()}),c&&i.close()},target:o,types:["image"],accept:"image/*"})},r.prototype.onError=function(){var e=this,t=e.model,a=e.el,o=t.getSrcResult({fallback:!0});o&&(a.srcset&&(a.srcset=""),a.src=o)},r.prototype.onLoad=function(){this.em.Canvas.refresh({all:!0})},r.prototype.noDrag=function(e){return e.preventDefault(),!1},r.prototype.render=function(){if(this.renderAttributes(),this.modelOpt.temporary)return this;this.updateSrc();var e=this,t=e.$el,a=e.model,o=t.attr("class")||"";return!a.get("src")&&t.attr("class","".concat(o," ").concat(this.classEmpty).trim()),this.postRender(),this},r})(ma);const W2=qq;var Gq=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),lp=function(){return lp=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},lp.apply(this,arguments)},ov=function(s,r,e,t){function a(o){return o instanceof e?o:new e(function(i){i(o)})}return new(e||(e=Promise))(function(o,i){function l(p){try{d(t.next(p))}catch(h){i(h)}}function c(p){try{d(t.throw(p))}catch(h){i(h)}}function d(p){p.done?o(p.value):a(p.value).then(l,c)}d((t=t.apply(s,r||[])).next())})},iv=function(s,r){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},t,a,o,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(d){return function(p){return c([d,p])}}function c(d){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,d[0]&&(e=0)),e;)try{if(t=1,a&&(o=d[0]&2?a.return:d[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,d[1])).done)return o;switch(a=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return e.label++,{value:d[1],done:!1};case 5:e.label++,a=d[1],d=[0];continue;case 7:d=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){e=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){e.label=d[1];break}if(d[0]===6&&e.label<o[1]){e.label=o[1],o=d;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(d);break}o[2]&&e.ops.pop(),e.trys.pop();continue}d=r.call(s,e)}catch(p){d=[6,p],a=0}finally{t=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},Kq=(function(s){Gq(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.events=function(){return{dblclick:"onActive",input:"onInput"}},r.prototype.initialize=function(e){s.prototype.initialize.call(this,e),(0,_e.bindAll)(this,"disableEditing","onDisable");var t=this.model,a=this.em;this.listenTo(t,"focus",this.onActive),this.listenTo(t,"change:content",this.updateContentText),this.listenTo(t,"sync:content",this.syncContent),this.rte=a?.RichTextEditor},r.prototype.updateContentText=function(e,t,a){a===void 0&&(a={}),!a.fromDisable&&this.disableEditing()},r.prototype.canActivate=function(){var e=this,t=e.model,a=e.rteEnabled,o=e.em,i=o?.getEditing(),l=i===t,c=!0,d=!1,p;if((a||!t.get("editable")||l||(d=t.isChildOf("text")))&&(c=!1,d&&!t.get("textable"))){for(var h=t.parent();h&&!h.isInstanceOf("text");)h=h.parent();h&&h.get("editable")?p=h:c=!0}return{result:c,delegate:p}},r.prototype.onActive=function(e){return ov(this,void 0,void 0,function(){var t,a,o,i,l,c,d,p,h,g,y,b;return iv(this,function(v){switch(v.label){case 0:return t=this,a=t.rte,o=t.em,i=this.canActivate(),l=i.result,c=i.delegate,l?((b=e?.stopPropagation)===null||b===void 0||b.call(e),d=this,[4,this.getContent()]):(c&&((y=e?.stopPropagation)===null||y===void 0||y.call(e),o.setSelected(c),c.trigger("active",e)),[2]);case 1:if(d.lastContent=v.sent(),!a)return[3,5];v.label=2;case 2:return v.trys.push([2,4,,5]),p=this,h=this,[4,a.enable(p,this.activeRte,{event:e,view:p})];case 3:return h.activeRte=v.sent(),[3,5];case 4:return g=v.sent(),o.logError(g),[3,5];case 5:return this.toggleEvents(!0),[2]}})})},r.prototype.onDisable=function(e){this.disableEditing(e)},r.prototype.disableEditing=function(){return ov(this,arguments,void 0,function(e){var t,a,o,i,l,c,d,p,h;return e===void 0&&(e={}),iv(this,function(g){switch(g.label){case 0:return t=this,a=t.model,o=t.rte,i=t.activeRte,l=t.em,c=a&&a.get("editable"),o?(d={},[4,this.getContent()]):[3,7];case 1:p=g.sent(),g.label=2;case 2:return g.trys.push([2,4,,5]),[4,o.disable(this,i,e)];case 3:return d=g.sent(),[3,5];case 4:return h=g.sent(),l.logError(h),[3,5];case 5:return c&&(p!==this.lastContent||d.forceSync)?[4,this.syncContent(lp(lp({},e),{content:p}))]:[3,7];case 6:g.sent(),this.lastContent="",g.label=7;case 7:return this.toggleEvents(),[2]}})})},r.prototype.getContent=function(){return ov(this,void 0,void 0,function(){var e,t,a,o;return iv(this,function(i){switch(i.label){case 0:return e=this,t=e.rte,a=e.activeRte,o="",t?[4,t.getContent(this,a)]:[3,2];case 1:o=i.sent(),i.label=2;case 2:return[2,o]}})})},r.prototype.syncContent=function(){return ov(this,arguments,void 0,function(e){var t,a,o,i,l,c,d,p,h;return e===void 0&&(e={}),iv(this,function(g){switch(g.label){case 0:return t=this,a=t.model,o=t.rte,i=t.rteEnabled,!i&&!e.force?[2]:(h=e.content)!==null&&h!==void 0?(c=h,[3,3]):[3,1];case 1:return[4,this.getContent()];case 2:c=g.sent(),g.label=3;case 3:return l=c,d=a.components(),p=lp({fromDisable:1},e),a.set("content","",p),o?.customRte&&!o.customRte.parseContent?(d.length&&d.reset(void 0,lp(lp({},e),{keepIds:Uh(d)})),a.set("content",l,p)):d.resetFromString(l,e),[2]}})})},r.prototype.insertComponent=function(e,t){var a;t===void 0&&(t={});var o=this,i=o.model,l=o.el,c=l.ownerDocument,d=c.getSelection();if(d?.rangeCount){var p=d.getRangeAt(0),h=p.startContainer,g=p.startOffset,y=(0,Zt.getComponentModel)(h),b=[];if(y&&(!((a=y.is)===null||a===void 0)&&a.call(y,"textnode"))){var v=y.collection;v.forEach(function(k){if(k===y){var N="textnode",O=t.useDomContent?h.textContent||"":k.content;b.push({type:N,content:O.slice(0,g)}),b.push(e),b.push({type:N,content:O.slice(g)})}else b.push(k)});var w=b.filter(Boolean),C=w.indexOf(e);return v.reset(w,t),v.at(C)}}return i.append(e,t)},r.prototype.onInput=function(){var e=this.model,t=[bs.I.update,bs.I.input];t.forEach(function(a){return e.emitWithEditor(a,e)})},r.prototype.disablePropagation=function(e){e.stopPropagation()},r.prototype.toggleEvents=function(e){var t=this,a=t.em,o=t.model,i=t.$el,l={on:Ar.on,off:Ar.AU},c=e?"on":"off";a.setEditing(e?this:!1),this.rteEnabled=!!e;var d=[this.el.ownerDocument,document];if(l.off(d,"mousedown",this.onDisable),l[c](d,"mousedown",this.onDisable),a[c]("toolbar:run:before",this.onDisable),o){var p=a.RichTextEditor.events;o[c]("removed",this.onDisable),o.trigger(e?p.enable:p.disable)}if(i?.off("mousedown",this.disablePropagation),i&&i[c]("mousedown",this.disablePropagation),this.config.draggableComponents)for(var h=this.el;h;)h.draggable=!e,h=h.parentNode,h&&h.tagName=="BODY"&&(h=0)},r})(ma);const PA=Kq;var Yq=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Zq=(function(s){Yq(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.render=function(){return s.prototype.render.call(this),this.el.addEventListener("click",this.prevDef,!0),this},r})(PA);const AA=Zq;var Xq=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Qq=(function(s){Xq(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r})(AA);const Jq=Qq;var eG=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),tG=(function(s){eG(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.tagName=function(){return"div"},r.prototype.events=function(){return{}},r.prototype.initialize=function(e){s.prototype.initialize.call(this,e),this.classEmpty=this.ppfx+"plh-map"},r.prototype.updateSrc=function(){this.getIframe().src=this.model.get("src")},r.prototype.getIframe=function(){if(!this.iframe){var e=document.createElement("iframe");e.src=this.model.get("src"),e.frameBorder="0",e.style.height="100%",e.style.width="100%",e.className=this.ppfx+"no-pointer",this.iframe=e}return this.iframe},r.prototype.render=function(){return s.prototype.render.call(this),this.updateClasses(),this.el.appendChild(this.getIframe()),this},r})(W2);const rG=tG;var nG=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),sG=(function(s){nG(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.tagName=function(){return"script"},r.prototype.events=function(){return{}},r})(ma);const aG=sG;var oG=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),iG=(function(s){oG(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype._createElement=function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)},r})(ma);const AE=iG;var lG=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),cG=(function(s){lG(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r})(ma);const dG=cG;var uG=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),fG=(function(s){uG(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r})(ma);const pG=fG;var hG=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),mG=(function(s){hG(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r})(ma);const gG=mG;var yG=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),xG=(function(s){yG(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r})(ma);const vG=xG;var bG=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),wG=(function(s){bG(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r})(ma);const jG=wG;var CG=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),SG=(function(s){CG(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.events=function(){return{}},r})(ma);const NG=SG;var kG=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),_G=(function(s){kG(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.tagName=function(){return"div"},r.prototype.events=function(){return{}},r.prototype.initialize=function(){ma.prototype.initialize.apply(this,arguments);var e=this.model,t=["loop","autoplay","controls","color","rel","modestbranding","poster","muted"],a=t.map(function(o){return"change:".concat(o)}).join(" ");this.listenTo(e,"change:provider",this.updateProvider),this.listenTo(e,"change:src",this.updateSrc),this.listenTo(e,a,this.updateVideo)},r.prototype.updateProvider=function(){var e=this.model.get("provider");this.el.innerHTML="",this.el.appendChild(this.renderByProvider(e))},r.prototype.updateSrc=function(){var e=this,t=e.model,a=e.videoEl;if(a){var o=t.get("provider"),i=t.get("src");switch(o){case"yt":i=t.getYoutubeSrc();break;case"ytnc":i=t.getYoutubeNoCookieSrc();break;case"vi":i=t.getVimeoSrc();break}a.src=i}},r.prototype.updateVideo=function(){var e=this,t=e.model,a=e.videoEl,o=t.get("provider");switch(o){case"yt":case"ytnc":case"vi":t.trigger("change:videoId");break;default:if(a){var i=a;i.loop=t.get("loop"),i.autoplay=t.get("autoplay"),i.controls=t.get("controls"),i.poster=t.get("poster"),i.muted=t.get("muted")}}},r.prototype.renderByProvider=function(e){var t;switch(e){case"yt":t=this.renderYoutube();break;case"ytnc":t=this.renderYoutubeNoCookie();break;case"vi":t=this.renderVimeo();break;default:t=this.renderSource()}return this.videoEl=t,t},r.prototype.renderSource=function(){var e=document.createElement("video");return e.src=this.model.get("src"),this.initVideoEl(e),e},r.prototype.renderYoutube=function(){var e=document.createElement("iframe");return e.src=this.model.getYoutubeSrc(),e.frameBorder="0",e.setAttribute("allowfullscreen","true"),this.initVideoEl(e),e},r.prototype.renderYoutubeNoCookie=function(){var e=document.createElement("iframe");return e.src=this.model.getYoutubeNoCookieSrc(),e.frameBorder="0",e.setAttribute("allowfullscreen","true"),this.initVideoEl(e),e},r.prototype.renderVimeo=function(){var e=document.createElement("iframe");return e.src=this.model.getVimeoSrc(),e.frameBorder="0",e.setAttribute("allowfullscreen","true"),this.initVideoEl(e),e},r.prototype.initVideoEl=function(e){e.className=this.ppfx+"no-pointer",e.style.height="100%",e.style.width="100%"},r.prototype.render=function(){ma.prototype.render.apply(this),this.updateClasses();var e=this.model.get("provider");return this.el.appendChild(this.renderByProvider(e)),this.updateVideo(),this},r})(W2);const EG=_G;var TG=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),OG=(function(s){TG(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.tagName=function(){return"div"},r})(ma);const PG=OG;var AG=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),No=function(){return No=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},No.apply(this,arguments)},MG=function(s,r){var e={};for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&r.indexOf(t)<0&&(e[t]=s[t]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(s);a<t.length;a++)r.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(s,t[a])&&(e[t[a]]=s[t[a]]);return e},IG=function(s,r,e){if(e||arguments.length===2)for(var t=0,a=r.length,o;t<a;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return s.concat(o||Array.prototype.slice.call(r))},qh;(function(s){s[s.InvalidSource=0]="InvalidSource",s[s.SourceReject=1]="SourceReject",s[s.TargetReject=2]="TargetReject"})(qh||(qh={}));var RG=(function(s){AG(r,s);function r(e){var t=s.call(this,e,"DomComponents",new Qy(void 0,{em:e}),bs.I,RW())||this;t.componentTypes=[{id:Ka.collectionItem,model:tC,view:ma},{id:Ka.conditionTrue,model:tC,view:ma},{id:Ka.conditionFalse,model:tC,view:ma},{id:Ka.collection,model:yW,view:_W},{id:Ka.condition,model:nW,view:OW},{id:Ka.variable,model:eW,view:MW},{id:"cell",model:xq,view:pG},{id:"row",model:_q,view:jG},{id:"table",model:pq,view:NG},{id:"thead",model:Sq,view:vG},{id:"tbody",model:H2,view:dG},{id:"tfoot",model:wq,view:gG},{id:"map",model:rq,view:rG},{id:"link",model:JW,view:AA},{id:"label",model:ZW,view:Jq},{id:"video",model:Oq,view:EG},{id:"image",model:U2,view:W2},{id:"script",model:aq,view:aG},{id:"svg-in",model:dq,view:AE},{id:"svg",model:TA,view:AE},{id:"iframe",model:VW,view:Hq},{id:"comment",model:zW,view:$q},{id:"textnode",model:EA,view:OA},{id:dm,model:_H,view:ma},{id:"wrapper",model:Mq,view:PG},{id:"text",model:V2,view:PA},{id:"default",model:Wa,view:ma}],t.componentsById={},t.Component=Wa,t.Components=Qy,t.ComponentView=ma,t.ComponentsView=_A,t.storageKey="components",t.keySymbols="symbols",t.events=bs.I;var a=t.config;t.symbols=new Dq([],{em:e,config:a,domc:t}),e&&(t.config.components=e.config.components||t.config.components);var o=t.config.pStylePrefix;if(o&&(t.config.stylePrefix=o+t.config.stylePrefix),e){e.get("Parser").compTypes=t.componentTypes,e.on("change:componentHovered",t.componentHovered,t);var i=e.get("selected");e.listenTo(i,"add",function(l,c,d){return t.selectAdd(i.getComponent(l),d)}),e.listenTo(i,"remove",function(l,c,d){return t.selectRemove(i.getComponent(l),d)})}return t}return r.prototype.postLoad=function(){var e=this,t=e.em,a=e.symbols,o=t.UndoManager;o.add(a)},r.prototype.load=function(e){var t=this,a=this.loadProjectData(e,{onResult:function(o){var i=t.getWrapper();if(i||(t.em.Pages.add({},{select:!0}),i=t.getWrapper()),(0,_e.isArray)(o))o.length&&i.components(o);else{var l=o.components,c=l===void 0?[]:l,d=MG(o,["components"]);i.set(d),i.components(c)}}});return this.symbols.reset(e[this.keySymbols]||[]),a},r.prototype.store=function(){var e;return e={},e[this.keySymbols]=this.symbols,e},r.prototype.getComponent=function(){var e=this.em.Pages.getSelected(),t=e?.getMainFrame();return t?.getComponent()},r.prototype.getWrapper=function(){return this.getComponent()},r.prototype.getComponents=function(){var e=this.getWrapper();return e?.components()},r.prototype.addComponent=function(e,t){return t===void 0&&(t={}),this.getComponents().add(e,t)},r.prototype.render=function(){var e;return(e=this.componentView)===null||e===void 0?void 0:e.render().el},r.prototype.clear=function(e){e===void 0&&(e={});var t=this.getComponents();return t?.filter(Boolean).forEach(function(a){return a.remove(e)}),this},r.prototype.setComponents=function(e,t){t===void 0&&(t={}),this.clear(t).addComponent(e,t)},r.prototype.addType=function(e,t){var a=this.em,o=t.model,i=o===void 0?{}:o,l=t.view,c=l===void 0?{}:l,d=t.isComponent,p=t.extend,h=t.extendView,g=t.extendFn,y=g===void 0?[]:g,b=t.extendFnView,v=b===void 0?[]:b,w=t.block,C=this.getType(e),k=this.getType(p),N=this.getType(h),O=k||C||this.getType("default"),R=O.model,L=N?N.view:O.view,B=function(q,P,H){return q.reduce(function(D,X){var se=P[X],Q=H.prototype[X];return se&&Q&&(D[X]=function(){for(var xe=[],K=0;K<arguments.length;K++)xe[K]=arguments[K];Q.bind(this).apply(void 0,xe),se.bind(this).apply(void 0,xe)}),D},{})};if(typeof i=="object"){var G={defaults:i.defaults};delete i.defaults;var $=new Set(R.typeExtends);$.add(R.getDefaults().type),t.model=R.extend(No(No({},i),B(y,i,R)),{typeExtends:$,isComponent:C&&!k&&!d?R.isComponent:d||(function(){return 0})}),Object.defineProperty(t.model.prototype,"defaults",{get:function(){return No(No({},(0,_e.result)(R.prototype,"defaults")||{}),(0,_e.result)(G,"defaults")||{})}})}if(typeof c=="object"&&(t.view=L.extend(No(No({},c),B(v,c,L)))),C?(C.model=t.model,C.view=t.view):(t.id=e,this.componentTypes.unshift(t)),w){var z={id:e,label:e,content:{type:e}},Y=w===!0?z:No(No({},z),w);a.Blocks.add(Y.id||e,Y)}var M="component:type:".concat(C?"update":"add");return a?.trigger(M,C||t),this},r.prototype.getType=function(e){for(var t=this.componentTypes,a=0;a<t.length;a++){var o=t[a].id;if(o==e)return t[a]}},r.prototype.removeType=function(e){var t=this.componentTypes,a=this.getType(e);if(a){var o=t.indexOf(a);return t.splice(o,1),a}},r.prototype.getTypes=function(){return this.componentTypes},r.prototype.selectAdd=function(e,t){var a=this;t===void 0&&(t={}),e&&(e.set({status:"selected"}),["component:selected","component:toggled"].forEach(function(o){return a.em.trigger(o,e,t)}))},r.prototype.selectRemove=function(e,t){var a=this;t===void 0&&(t={}),e&&(this.em,e.set({status:"",state:""}),["component:deselected","component:toggled"].forEach(function(o){return a.em.trigger(o,e,t)}))},r.prototype.componentHovered=function(){var e=this.em,t=e.get("componentHovered"),a=e.previous("componentHovered"),o="hovered";a&&a.get("status")==o&&a.set({status:"",state:""}),t&&(0,_e.isEmpty)(t.get("status"))&&t.set("status",o)},r.prototype.getShallowWrapper=function(){var e=this,t=e.shallow,a=e.em;if(!t&&a){var o=a.shallow;if(!o)return;var i=o.Components;if(i.componentTypes=this.componentTypes,t=i.getWrapper(),t){var l=[qv,GS].join(" ");t.on(l,(0,_e.debounce)(function(){return t?.components("")},100))}this.shallow=t}return t},r.prototype.isComponent=function(e){return(0,Zt.isComponent)(e)},r.prototype.addSymbol=function(e){if(!((0,_e.isSymbol)(e)&&!Tp(e))){var t=e.clone({symbol:!0});return hp(t)&&this.symbols.add(t),this.em.trigger("component:toggled"),t}},r.prototype.getSymbols=function(){return IG([],this.symbols.models,!0)},r.prototype.detachSymbol=function(e){fb(e)&&ij(e)},r.prototype.getSymbolInfo=function(e,t){t===void 0&&(t={});var a=hp(e),o=_l(e),i=!!o,l=Oi(a?e:o)||[],c=o||(a?e:void 0),d=Vd(e,{changed:t.withChanges}),p=a||i,h=p&&Tp(e);return{isSymbol:p,isMain:a,isInstance:i,isRoot:h,main:c,instances:l,relatives:d||[]}},r.prototype.canMove=function(e,t,a){var o={result:!1,reason:qh.InvalidSource,target:e,source:null};if(!t||!e)return o;if(cc(e)&&t instanceof Wa&&cc(t)){var i=Xy(e),l=hp(i)?i:_l(i),c=Xy(t),d=hp(c)?c:_l(c),p=l===d,h=i!==c;if(p&&h)return No(No({},o),{reason:qh.TargetReject})}var g=(0,Zt.isComponent)(t)?t:null;if(!g){var y=this.getShallowWrapper();g=y?.append(t,{temporary:!0})[0]||null}if(o.source=g,!g)return o;var b=g.get("draggable");if((0,_e.isFunction)(b))b=!!b(g,e,a);else{var v=e.getEl();b=(0,_e.isArray)(b)?b.join(","):b,b=(0,_e.isString)(b)?v?.matches(b):b}if(!b)return No(No({},o),{reason:qh.SourceReject});var w=e.get("droppable");if((0,_e.isFunction)(w))w=!!w(g,e,a);else if(w===!1&&e.isInstanceOf("text")&&g.get("textable"))w=!0;else{var v=g.getEl();w=(0,_e.isArray)(w)?w.join(","):w,w=(0,_e.isString)(w)?v?.matches(w):w}var C=[e].concat(e.parents()).indexOf(g)>-1;return!w||C?No(No({},o),{reason:qh.TargetReject}):No(No({},o),{result:!0})},r.prototype.allById=function(){return this.componentsById},r.prototype.getById=function(e){return this.componentsById[e]||null},r.prototype.destroy=function(){var e,t=this.allById();Object.keys(t).forEach(function(a){return t[a]&&t[a].remove()}),(e=this.componentView)===null||e===void 0||e.remove(),[this.em,this.componentsById,this.componentView].forEach(function(a){return{}})},r})(lu);const DG=RG;var LG=function(){return{stylePrefix:"css-",rules:[]}};const FG=LG;var BG=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),zG=Number.MAX_VALUE,$G=function(s){var r=/(-?\d*\.?\d+)\w{0,}/.exec(s);return r?r[0]:""},UG=(function(s){BG(r,s);function r(){var e=s.call(this)||this;return(0,_e.bindAll)(e,"sortRules"),e.compCls=[],e.ids=[],e}return r.prototype.buildFromModel=function(e,t){var a=this;t===void 0&&(t={});var o="",i=this.em,l=i&&i.getConfig().avoidInlineStyle,c=e.styleToString(),d=e.classes;this.ids.push("#".concat(e.getId())),d.forEach(function(h){return a.compCls.push(h.getFullName())}),!l&&c&&(o="#".concat(e.getId(),"{").concat(c,"}"));var p=e.components();return p.forEach(function(h){return o+=a.buildFromModel(h,t)}),o},r.prototype.build=function(e,t){var a=this;t===void 0&&(t={});var o=t.json,i=t.em,l=t.cssc||i?.Css;this.em=i,this.compCls=[],this.ids=[],this.model=e;var c=[],d=e?this.buildFromModel(e,t):"",p=(0,_e.isUndefined)(t.clearStyles)&&i?i.getConfig().clearStyles:t.clearStyles;if(l){var h=t.rules||l.getAll(),g={},y=[];t.onlyMatched&&e&&(0,Zt.hasWin)()&&(h=this.matchedRules(e,h)),h.forEach(function(b){var v=b.getAtRule();if(v){var w=g[v];w?w.push(b):g[v]=[b];return}var C=a.buildFromRule(b,y,t);o?c.push(C):d+=C}),this.sortMediaObject(g).forEach(function(b){var v="",w=b.key,C=b.value;C.forEach(function(k){var N=a.buildFromRule(k,y,t);k.get("singleAtRule")?d+="".concat(w,"{").concat(N,"}"):v+=N,o&&c.push(N)}),v&&(d+="".concat(w,"{").concat(v,"}"))}),i&&p&&h.remove&&h.remove(y)}return o?c.filter(function(b){return b}):d},r.prototype.buildFromRule=function(e,t,a){var o=this,i;a===void 0&&(a={});var l="",c=this.model,d=e.selectorsToString({skipAdd:1}),p=e.get("selectorsAdd"),h=e.get("singleAtRule"),g;if((i=e.get("selectors"))===null||i===void 0||i.forEach(function(b){var v=b.getFullName();(o.compCls.indexOf(v)>=0||o.ids.indexOf(v)>=0||a.keepUnusedStyles)&&(g=1)}),d&&g||p||h||!c){var y=e.getDeclaration();y&&(a.json?l=e:l+=y)}else t.push(e);return l},r.prototype.matchedRules=function(e,t){var a=this,o=e.getEl(),i=[];return t.forEach(function(l){try{l.selectorsToString().split(",").some(function(c){return o?.matches(a.__cleanSelector(c))})&&i.push(l)}catch{}}),e.components().forEach(function(l){i=i.concat(a.matchedRules(l,t))}),i=i.filter(function(l,c){return i.indexOf(l)===c}),i},r.prototype.getQueryLength=function(e){var t=/(-?\d*\.?\d+)\w{0,}/.exec(e);return t?parseFloat(t[1]):zG},r.prototype.sortMediaObject=function(e){var t=this;e===void 0&&(e={});var a=[];return(0,_e.each)(e,function(o,i){return a.push({key:i,value:o})}),a.sort(function(o,i){var l=[o.key,i.key].every(function(p){return p.indexOf("min-width")!==-1}),c=l?o.key:i.key,d=l?i.key:o.key;return t.getQueryLength(c)-t.getQueryLength(d)})},r.prototype.sortRules=function(e,t){var a=function(c){return c.get("mediaText")||""},o=[a(e),a(t)].every(function(c){return c.indexOf("min-width")!==-1}),i=a(o?e:t),l=a(o?t:e);return this.getQueryLength(i)-this.getQueryLength(l)},r.prototype.__cleanSelector=function(e){return e.split(" ").map(function(t){return t.split(":")[0]}).join(" ")},r})(Sr.Kx);const VG=UG;var HG=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),XS=function(){return XS=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},XS.apply(this,arguments)},WG=function(s,r,e){if(e||arguments.length===2)for(var t=0,a=r.length,o;t<a;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return s.concat(o||Array.prototype.slice.call(r))},pC=((0,Zt.hasWin)()?window:{}).CSS,qG=(function(s){HG(r,s);function r(e,t){t===void 0&&(t={});var a=s.call(this,e,{em:t.em})||this;return a.views=[],a.config=e||{},a.opt=t,a.em=t.em,a.ensureSelectors(null,null,{}),a.setStyle(a.get("style"),{skipWatcherUpdates:!0}),a.on("change",a.__onChange),a}return r.prototype.defaults=function(){return{selectors:[],selectorsAdd:"",style:{},mediaText:"",state:"",stylable:!0,atRuleType:"",singleAtRule:!1,important:!1,group:"",shallow:!1,_undo:!0}},r.prototype.__onChange=function(e,t){var a=this.em,o=this.changedAttributes();o&&!(0,Zt.isEmptyObj)(o)&&a?.changesUp(t,{rule:e,changed:o,options:t})},r.prototype.clone=function(){var e=this.get("selectors").map(function(t){return t.clone()});return s.prototype.clone.call(this,{selectors:e})},r.prototype.ensureSelectors=function(e,t,a){var o=this.em,i=o?.Selectors,l=[this,"change:selectors",this.ensureSelectors],c=this.getSelectors();if(this.stopListening.apply(this,l),c.models&&(c=WG([],c.models,!0)),c=(0,_e.isString)(c)?[c]:c,Array.isArray(c)){var d=c.filter(function(p){return p}).map(function(p){return i?i.add(p):p});c=new Yu(d)}this.set("selectors",c,a),this.listenTo.apply(this,l)},r.prototype.getAtRule=function(){return r.getAtRuleFromProps(this.attributes)},r.getAtRuleFromProps=function(e){var t=e.atRuleType,a=e.mediaText,o=t?"@".concat(t):a?"@media":"";return o+(a&&o?" ".concat(a):"")},r.prototype.selectorsToString=function(e){e===void 0&&(e={});var t=[],a=this.get("state"),o=this.get("selectorsAdd"),i={escape:function(d){return pC&&pC.escape?pC.escape(d):d}},l=this.getSelectors().getFullString(0,i),c=a&&!e.skipState?":".concat(a):"";return l&&t.push("".concat(l).concat(c)),o&&!e.skipAdd&&t.push(o),t.join(", ")},r.prototype.getDeclaration=function(e){e===void 0&&(e={});var t="",a=this.attributes.important,o=this.selectorsToString(e),i=this.styleToString(XS({important:a},e)),l=this.get("singleAtRule");return(o||l)&&(i||e.allowEmpty)&&(t=l?i:"".concat(o,"{").concat(i,"}")),t},r.prototype.getDevice=function(){var e=this.em,t=this.attributes,a=t.atRuleType,o=t.mediaText,i=e?.Devices.getDevices()||[],l=i.filter(function(c){return c.getWidthMedia()===""})[0];return a!=="media"||!o?l||null:i.filter(function(c){return c.getWidthMedia()===$G(o)})[0]||null},r.prototype.getState=function(){var e=this.em,t=this.get("state"),a=e?.Selectors.getStates()||[];return a.filter(function(o){return o.getName()===t})[0]||null},r.prototype.getComponent=function(){var e,t=this.getSelectors(),a=t.length==1&&t.at(0),o=a&&a.isId()&&a.get("name");return o&&((e=this.em)===null||e===void 0?void 0:e.Components.getById(o))||null},r.prototype.toCSS=function(e){e===void 0&&(e={});var t="",a=this.getAtRule(),o=this.getDeclaration(e);return(o||e.allowEmpty)&&(t=o),a&&t&&(t="".concat(a,"{").concat(t,"}")),t},r.prototype.toJSON=function(e){var t,a=s.prototype.toJSON.call(this,e);if(!((t=this.em)===null||t===void 0)&&t.getConfig().avoidDefaults){var o=this.defaults();(0,_e.forEach)(o,function(i,l){a[l]===i&&delete a[l]}),delete a.style.__p,(0,_e.isEmpty)(a.selectors)&&delete a.selectors,(0,_e.isEmpty)(a.style)&&delete a.style}return a},r.prototype.compare=function(e,t,a,o){var i;o===void 0&&(o={});var l=t||"",c=a||"",d=o.selectorsAdd||"",p=o.atRuleType||"",h=!(0,_e.isArray)(e)&&!e.models?[e]:e.models||e;c&&!p&&(p="media");var g=h.map(function(w){return w.getFullName()}),y=(i=this.get("selectors"))===null||i===void 0?void 0:i.map(function(w){return w.getFullName()}),b=g.slice().sort(),v=y.slice().sort();return!(g.length!==y.length||!b.every(function(w,C){return w===v[C]})||this.get("state")!==l||this.get("mediaText")!==c||this.get("selectorsAdd")!==d||this.get("atRuleType")!==p)},r})(fA);const QS=qG;var GG=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),MA=(function(s){GG(r,s);function r(e,t){var a=s.call(this,e)||this;return a.editor=t?.em,setTimeout(function(){a.on("remove",a.onRemove),a.on("add",a.onAdd)}),a}return r.prototype.toJSON=function(e){var t=Sr.pM.prototype.toJSON.call(this,e);return t.filter(function(a){return a.style&&!a.shallow})},r.prototype.onAdd=function(e,t,a){e.ensureSelectors(e,t,a)},r.prototype.onRemove=function(e){var t=this.editor;t.stopListening(e),t.UndoManager.remove(e)},r.prototype.add=function(e,t){return t===void 0&&(t={}),typeof e=="string"&&(e=this.editor.get("Parser").parseCss(e)),t.em=this.editor,Sr.pM.prototype.add.apply(this,[e,t])},r})(Sr.pM);const ME=MA;MA.prototype.model=QS;var KG=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),ec=function(){return ec=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},ec.apply(this,arguments)},YG=function(s,r,e){if(e||arguments.length===2)for(var t=0,a=r.length,o;t<a;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return s.concat(o||Array.prototype.slice.call(r))},ZG=(function(s){KG(r,s);function r(e){var t=s.call(this,e,"CssComposer",null,vm,FG())||this;t.classes={CssRule:QS,CssRules:ME,CssRuleView:z2,CssRulesView:US},t.events=vm,t.Selectors=Yu,t.storageKey="styles",t._itemCache=new Map;var a=t.config,o=a.pStylePrefix;return o&&(a.stylePrefix=o+a.stylePrefix),a.rules=t.em.config.style||a.rules||"",t.rules=new ME([],a),t._setupCacheListeners(),t}return r.prototype._setupCacheListeners=function(){s.prototype._setupCacheListeners.call(this),this.em.listenTo(this.rules,"change:selectors change:state change:mediaText",this._onItemKeyChange.bind(this))},r.prototype._makeCacheKey=function(e){var t=e.getAtRule(),a=e.selectorsToString();return"".concat(t,"__").concat(a)},r.prototype._makeCacheKeyFromProps=function(e){var t=e.atRuleType,a=t===void 0?"":t,o=e.mediaText,i=o===void 0?"":o,l=e.state,c=l===void 0?"":l,d=e.selectorsAdd,p=d===void 0?"":d,h=e.selectors,g=h===void 0?[]:h,y=g.map(function(k){return(0,_e.isString)(k)?k:k.toString()}).join(""),b=[];y&&b.push("".concat(y).concat(c?":".concat(c):"")),p&&b.push(p);var v=b.join(", "),w=a?"@".concat(a):i?"@media":"",C=w+(i&&w?" ".concat(i):"");return"".concat(C,"__").concat(v)},r.prototype.onLoad=function(){this.rules.add(this.config.rules,{silent:!0}),this._onItemsResetCache(this.rules)},r.prototype.postLoad=function(){this.em.UndoManager.add(this.getAll())},r.prototype.store=function(){return this.getProjectData()},r.prototype.load=function(e){return this.loadProjectData(e,{all:this.rules})},r.prototype._findRule=function(e,t,a,o){var i=e;if((0,_e.isString)(e)){var l=this.em.Selectors,c=e.split(",")[0].trim(),d=this.em.Parser.parserCss.checkNode({selectors:c})[0];i=l.get(d.selectors)}var p=this.rules.find(function(h){return h.compare(i,t,a,o)})||null;return p},r.prototype.add=function(e,t,a,o,i){o===void 0&&(o={}),i===void 0&&(i={});var l=t||"",c=a||"",d=ec({},o),p=this._makeCacheKeyFromProps(ec(ec({state:l,mediaText:c},d),{selectors:Array.isArray(e)?e:[e]})),h=this._itemCache.get(p);if(h&&h.config&&!h.config.singleAtRule)return h;var g=this._findRule(e,l,c,d);return g&&g.config&&!g.config.singleAtRule?(this._cacheItem(g),g):(d.state=l,d.mediaText=c,d.selectors=[],c&&!d.atRuleType&&(d.atRuleType="media"),g=new QS(d,this.config),g.get("selectors").add(e,i),this.rules.add(g,i),this._cacheItem(g),g)},r.prototype.get=function(e,t,a,o){var i=this._makeCacheKeyFromProps(ec(ec({},o),{selectors:Array.isArray(e)?e:[e],state:t,width:a,mediaText:a})),l=this._itemCache.get(i);if(l)return l;var c=this._findRule(e,t,a,o);return c&&this._cacheItem(c),c},r.prototype.getAll=function(){return this.rules},r.prototype.addCollection=function(e,t,a){t===void 0&&(t={}),a===void 0&&(a={});var o=this.em,i=[];(0,_e.isString)(e)&&(e=o.Parser.parseCss(e));for(var l=e instanceof Array?e:[e],c=0,d=l.length;c<d;c++){var p=l[c]||{};if(p.selectors){var h=o?.Selectors;h||console.warn("Selector Manager not found");for(var g=p.selectors,y=g instanceof Array?g:[g],b=[],v=0,w=y.length;v<w;v++){var C=h.add(y[v]);b.push(C)}var k=this.get(b,p.state,p.mediaText,p),N=this.add(b,p.state,p.mediaText,p,t),O=!k||!t.avoidUpdateStyle,R=p.style||{};if((0,Zt.isObject)(a)&&N.set(a,t),O){var L=t.extend?ec(ec({},N.getStyle("",{skipResolve:!0})),R):R;N.setStyle(L,t)}i.push(N)}}return i},r.prototype.addRules=function(e){return this.addCollection(e)},r.prototype.setRule=function(e,t,a){t===void 0&&(t={}),a===void 0&&(a={});var o=a.atRuleType,i=a.atRuleParams,l=this.em.Parser.parserCss.checkNode({selectors:e,style:t})[0],c=l.state,d=l.selectorsAdd,p=this.em.Selectors,h=p.add(l.selectors),g=this.add(h,c,i,{selectorsAdd:d,atRule:o});return a.addStyles?g.addStyle(t,a):g.setStyle(t,a),g},r.prototype.getRule=function(e,t){t===void 0&&(t={});var a=this.em,o=a.Selectors,i=a.Parser.parserCss.checkNode({selectors:e})[0],l=o.get(i.selectors),c=i.state,d=i.selectorsAdd,p=t.atRuleType,h=t.atRuleParams;return l?this.get(l,c,h,{selectorsAdd:d,atRuleType:p}):void 0},r.prototype.getRules=function(e){var t=this.getAll();if(!e)return YG([],t.models,!0);var a={sort:!0},o=(0,_e.isString)(e)?e.split(",").map(function(l){return l.trim()}):e,i=t.filter(function(l){return o.indexOf(l.getSelectors().getFullString(null,a))>=0});return i},r.prototype.setIdRule=function(e,t,a){t===void 0&&(t={}),a===void 0&&(a={});var o=a.addOpts,i=o===void 0?{}:o,l=a.mediaText,c=a.state||"",d=(0,_e.isUndefined)(l)?this.em.getCurrentMedia():l,p=this.em.Selectors,h=p.add({name:e,type:ci.TYPE_ID},i),g=this.add(h,c,d,{},i);return g.setStyle(t,ec(ec({},a),i)),g},r.prototype.getIdRule=function(e,t){t===void 0&&(t={});var a=t.mediaText,o=t.state||"",i=(0,_e.isUndefined)(a)?this.em.getCurrentMedia():a,l=this.em.Selectors.get(e,ci.TYPE_ID);return l&&this.get(l,o,i)},r.prototype.setClassRule=function(e,t,a){t===void 0&&(t={}),a===void 0&&(a={});var o=a.state||"",i=a.mediaText||this.em.getCurrentMedia(),l=this.em.Selectors,c=l.add({name:e,type:ci.TYPE_CLASS}),d=this.add(c,o,i);return d.setStyle(t,a),d},r.prototype.getClassRule=function(e,t){t===void 0&&(t={});var a=t.state||"",o=t.mediaText||this.em.getCurrentMedia(),i=this.em.Selectors.get(e,ci.TYPE_CLASS);return i&&this.get(i,a,o)},r.prototype.remove=function(e,t){var a=(0,_e.isString)(e)?this.getRules(e):e,o=Array.isArray(a)?a:[a],i=this.getAll().remove(o,t);return Array.isArray(i)?i:[i]},r.prototype.clear=function(e){return e===void 0&&(e={}),this._clearItemCache(),this.getAll().reset([],e),this},r.prototype.getComponentRules=function(e,t){t===void 0&&(t={});var a=t.state,o=t.mediaText,i=t.current;i&&(a=this.em.get("state")||"",o=this.em.getCurrentMedia());var l=e.getId(),c=this.getAll().filter(function(d){return!(0,_e.isUndefined)(a)&&d.get("state")!==a||!(0,_e.isUndefined)(o)&&d.get("mediaText")!==o?!1:d.getSelectorsString()==="#".concat(l)});return c},r.prototype.render=function(){var e;return(e=this.rulesView)===null||e===void 0||e.remove(),this.rulesView=new US({collection:this.rules,config:this.config}),this.rulesView.render().el},r.prototype.checkId=function(e,t){t===void 0&&(t={});var a=t.idMap,o=a===void 0?{}:a,i=[];if(!Object.keys(o).length)return i;var l=Array.isArray(e)?e:[e];return l.forEach(function(c){var d=c.selectors;if(d&&d.length==1){var p=d[0];if((0,_e.isString)(p)){if(p[0]==="#"){var h=p.substring(1),g=o[h];h&&g&&(d[0]="#".concat(g),i.push(c))}}else if(p.name&&p.type===ci.TYPE_ID){var g=o[p.name];g&&(p.name=g,i.push(c))}}}),i},r.prototype.destroy=function(){var e;this.rules.reset(),this.rules.stopListening(),(e=this.rulesView)===null||e===void 0||e.remove()},r})(lu);const XG=ZG;var QG=function(){return{appendTo:"",blocks:[],appendOnClick:!1,custom:!1}};const JG=QG;var eK=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),tK=(function(s){eK(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.defaults=function(){return{label:"",content:"",media:"",category:"",activate:!1,select:void 0,resetId:!1,disable:!1,onClick:void 0,attributes:{},dragDef:{}}},Object.defineProperty(r.prototype,"category",{get:function(){var e=this.get("category");return e instanceof Px?e:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"parent",{get:function(){return this.collection},enumerable:!1,configurable:!0}),r.prototype.getId=function(){return this.id},r.prototype.getLabel=function(){return this.get("label")},r.prototype.getMedia=function(){return this.get("media")},r.prototype.getContent=function(){return this.get("content")},r.prototype.getDragDef=function(){return this.get("dragDef")},r.prototype.getCategoryLabel=function(){var e=this.get("category");return(0,_e.isFunction)(e?.get)?e.get("label"):e?.label?e?.label:e},r})(Sr.Kx);const IA=tK;var rK=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),RA=(function(s){rK(r,s);function r(e,t){var a=s.call(this,e)||this;return a.em=t.em,a.on("add",a.handleAdd),a}return r.prototype.getCategories=function(){return this.em.Blocks.getCategories()},r.prototype.handleAdd=function(e){this.initCategory(e)},r})(yA);const lv=RA;RA.prototype.model=IA;var Ay;(function(s){s.add="block:add",s.remove="block:remove",s.removeBefore="block:remove:before",s.update="block:update",s.dragStart="block:drag:start",s.drag="block:drag",s.dragEnd="block:drag:stop",s.categoryUpdate="block:category:update",s.custom="block:custom",s.all="block"})(Ay||(Ay={}));var nK=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Gh=function(){return Gh=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Gh.apply(this,arguments)},sK=(function(s){nK(r,s);function r(e,t){t===void 0&&(t={});var a=s.call(this,e)||this,o=a.model;return a.em=t.em,a.config=t,a.endDrag=a.endDrag.bind(a),a.ppfx=t.pStylePrefix||"",a.listenTo(o,"destroy remove",a.remove),a.listenTo(o,"change",a.render),a}return r.prototype.events=function(){return{click:"handleClick",mousedown:"startDrag",dragstart:"handleDragStart",drag:"handleDrag",dragend:"handleDragEnd"}},r.prototype.__getModule=function(){return this.em.Blocks},r.prototype.handleClick=function(e){var t,a,o=this,i=o.config,l=o.model,c=o.em,d=l.get("onClick")||i.appendOnClick;if(c.trigger("block:click",l,e),d){if((0,_e.isFunction)(d))return d(l,c?.getEditor(),{event:e})}else return;var p=(t=i.getSorter)===null||t===void 0?void 0:t.call(i);if(p){var h=l.get("content"),g=this.getTempDropModel(h),y=(a=g.view)===null||a===void 0?void 0:a.el,b=y?[{element:y,dragSource:{content:h}}]:[],v=c.getSelected(),w,C,k,N=0;if(v)if(C=p.validTarget(v.getEl(),b,N),C)w=v;else{var O=v.parent();O&&(C=p.validTarget(O.getEl(),b,N),C&&(w=O,k=O.components().indexOf(v)+1))}if(!w){var R=c.getWrapper();C=p.validTarget(R.getEl(),b,N),C&&(w=R)}var L=w&&w.append(h,{at:k})[0];L&&c.setSelected(L,{scroll:!0})}},r.prototype.startDrag=function(e){var t,a=this,o=a.config,i=a.em,l=a.model,c=l.get("disable");if(!(e.button!==0||!o.getSorter||this.el.draggable||c)){i.refreshCanvas();var d=o.getSorter();d.__currentBlock=l;var p=this.model.get("content"),h=this.getTempDropModel(p),g=(t=h.view)===null||t===void 0?void 0:t.el,y=g?[{element:g,dragSource:{content:p}}]:[];d.startSort(y),(0,Ar.on)(document,"mouseup",this.endDrag)}},r.prototype.handleDragStart=function(e){this.__getModule().__startDrag(this.model,e)},r.prototype.handleDrag=function(e){this.__getModule().__drag(e)},r.prototype.handleDragEnd=function(){this.__getModule().__endDrag()},r.prototype.endDrag=function(){var e,t;(0,Ar.AU)(document,"mouseup",this.endDrag);var a=(t=(e=this.config).getSorter)===null||t===void 0?void 0:t.call(e);a&&a.endDrag()},r.prototype.getTempDropModel=function(e){var t,a=this.em.Components.getComponents(),o={avoidChildren:1,avoidStore:1,avoidUpdateStyle:1},i=a.add(e,Gh(Gh({},o),{temporary:!0})),l=a.remove(i,Gh(Gh({},o),{temporary:!0}));return l=l instanceof Array?l[0]:l,(t=l.view)===null||t===void 0||t.$el.data("model",l),l},r.prototype.render=function(){var e,t=this,a=t.em,o=t.el,i=t.$el,l=t.ppfx,c=t.model,d=c.get("disable"),p=c.get("attributes")||{},h=p.class||"",g="".concat(l,"block"),y=a&&a.t("blockManager.labels.".concat(c.id))||c.get("label"),b=c.get("render"),v=c.get("media"),w=d?"".concat(g,"--disable"):"".concat(l,"four-color-h");i.attr(p),o.className="".concat(h," ").concat(g," ").concat(l,"one-bg ").concat(w).trim(),o.innerHTML=`
      `.concat(v?'<div class="'.concat(g,'__media">').concat(v,"</div>"):"",`
      <div class="`).concat(g,'-label">').concat(y,`</div>
    `),o.title=p.title||((e=o.textContent)===null||e===void 0?void 0:e.trim()),o.setAttribute("draggable","".concat(!!((0,Zt.hasDnd)(a)&&!d)));var C=b&&b({el:o,model:c,className:g,prefix:l});return C&&(o.innerHTML=C),this},r})(Sr.Ss);const aK=sK;var oK=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),iK=function(s,r){return Object.defineProperty?Object.defineProperty(s,"raw",{value:r}):s.raw=r,s},lK=(function(s){oK(r,s);function r(e,t,a){var o=s.call(this,e)||this;o.config=t;var i=t.pStylePrefix||"";return o.em=t.em,o.catName=a,o.pfx=i,o.caretR="fa fa-caret-right",o.caretD="fa fa-caret-down",o.iconClass="".concat(i,"caret-icon"),o.activeClass="".concat(i,"open"),o.className="".concat(i).concat(a,"-category"),o.listenTo(o.model,"change:open",o.updateVisibility),o.model.view=o,o}return r.prototype.events=function(){return{"click [data-title]":"toggle"}},r.prototype.template=function(e){var t=e.pfx,a=e.label,o=e.catName;return Ei(IE||(IE=iK([`
      <div class="`,`title" data-title>
        <i class="`,`caret-icon"></i>
        `,`
      </div>
      <div class="`,"",`s-c"></div>
    `],[`
      <div class="`,`title" data-title>
        <i class="`,`caret-icon"></i>
        `,`
      </div>
      <div class="`,"",`s-c"></div>
    `])),t,t,a,t,o)},r.prototype.attributes=function(){return this.model.get("attributes")||{}},r.prototype.updateVisibility=function(){this.model.get("open")?this.open():this.close()},r.prototype.open=function(){this.$el.addClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretD),this.getTypeEl().style.display=""},r.prototype.close=function(){this.$el.removeClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretR),this.getTypeEl().style.display="none"},r.prototype.toggle=function(){var e=this.model;e.set("open",!e.get("open"))},r.prototype.getIconEl=function(){return this.iconEl||(this.iconEl=this.el.querySelector(".".concat(this.iconClass))),this.iconEl},r.prototype.getTypeEl=function(){return this.typeEl||(this.typeEl=this.el.querySelector(".".concat(this.pfx).concat(this.catName,"s-c"))),this.typeEl},r.prototype.append=function(e){this.getTypeEl().appendChild(e)},r.prototype.render=function(){var e=this,t=e.em,a=e.el,o=e.$el,i=e.model,l=e.pfx,c=e.catName,d=t.t("".concat(c,"Manager.categories.").concat(i.id))||i.get("label");return a.innerHTML=this.template({pfx:l,label:d,catName:c}),o.addClass(this.className),o.css({order:i.get("order")}),this.updateVisibility(),this},r})(Sr.Ss);const DA=lK;var IE,cK=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Hb=function(){return Hb=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Hb.apply(this,arguments)},dK=(function(s){cK(r,s);function r(e,t){var a=s.call(this,e)||this;a.renderedCategories=new Map,(0,_e.bindAll)(a,"getSorter","onDrag","onDrop","onMove"),a.config=t||{},a.categories=e.categories||"";var o=a.config.pStylePrefix||"";a.ppfx=o,a.noCatClass="".concat(o,"blocks-no-cat"),a.blockContClass="".concat(o,"blocks-c"),a.catsClass="".concat(o,"block-categories");var i=a.collection;return a.listenTo(i,"add",a.addTo),a.listenTo(i,"reset",a.render),a.em=a.config.em,a.em&&(a.config.getSorter=a.getSorter),a}return r.prototype.__getModule=function(){return this.em.Blocks},r.prototype.updateConfig=function(e){e===void 0&&(e={}),this.config=Hb(Hb({},this.config),e)},r.prototype.getSorter=function(){var e=this.em;if(e){if(!this.sorter){var t=e.Utils,a=e.Canvas;this.sorter=new t.ComponentSorter({em:e,treeClass:wA,containerContext:{container:a.getBody(),containerSel:"*",itemSel:"*",pfx:this.ppfx,placeholderElement:a.getPlacerEl(),document:a.getBody().ownerDocument},dragBehavior:{dragDirection:Op.A.BothDirections,nested:!0},positionOptions:{windowMargin:1,canvasRelative:!0},eventHandlers:{legacyOnStartSort:this.onDrag,legacyOnEndMove:this.onDrop,legacyOnMoveClb:this.onMove}})}return this.sorter}},r.prototype.onDrag=function(e){this.em.stopDefault(),this.__getModule().__startDrag(this.sorter.__currentBlock,e)},r.prototype.onMove=function(e){this.__getModule().__drag(e)},r.prototype.onDrop=function(e){this.em.runDefault(),this.__getModule().__endDrag({component:e}),delete this.sorter.__currentBlock},r.prototype.addTo=function(e){this.add(e)},r.prototype.add=function(e,t){var a=this,o=a.config,i=a.renderedCategories,l=e.get("attributes"),c=new aK({model:e,attributes:l},o),d=c.render().el,p=e.parent.initCategory(e);if(p&&this.categories&&!o.ignoreCategories){var h=p.getId(),g=this.getCategoriesEl(),y=i.get(h);!y&&g&&(y=new DA({model:p},o,"block").render(),i.set(h,y),g.appendChild(y.el)),y?.append(d);return}t?t.appendChild(d):this.append(d)},r.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector(".".concat(this.catsClass))),this.catsEl},r.prototype.getBlocksEl=function(){return this.blocksEl||(this.blocksEl=this.el.querySelector(".".concat(this.noCatClass," .").concat(this.blockContClass))),this.blocksEl},r.prototype.append=function(e){var t=this.getBlocksEl();t&&t.appendChild(e)},r.prototype.render=function(){var e=this,t=this.ppfx,a=document.createDocumentFragment();delete this.catsEl,delete this.blocksEl,this.renderedCategories=new Map,this.el.innerHTML=`
      <div class="`.concat(this.catsClass,`"></div>
      <div class="`).concat(this.noCatClass,`">
        <div class="`).concat(this.blockContClass,`"></div>
      </div>
    `),this.collection.each(function(i){return e.add(i,a)}),this.append(a);var o="".concat(this.blockContClass,"s ").concat(t,"one-bg ").concat(t,"two-color");return this.$el.addClass(o),this.rendered=!0,this},r})(Sr.Ss);const RE=dK;var uK=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Vu=function(){return Vu=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Vu.apply(this,arguments)},fK=(function(s){uK(r,s);function r(e){var t=s.call(this,e,"BlockManager",new lv([],{em:e}),Ay,JG())||this;return t.events=Ay,t.Block=IA,t.Blocks=lv,t.Category=Px,t.Categories=mb,t.storageKey="",t.blocks=t.all,t.blocksVisible=new lv(t.blocks.models,{em:e}),t.categories=new mb([],{em:e,events:{update:Ay.categoryUpdate}}),t.__onAllEvent=(0,_e.debounce)(function(){return t.__trgCustom()},0),t}return r.prototype.onInit=function(){var e=this,t=e.config,a=e.blocks,o=e.blocksVisible;a.on("add",function(i){return o.add(i)}),a.on("remove",function(i){return o.remove(i)}),a.on("reset",function(i){return o.reset(i.models)}),a.add(t.blocks||[])},r.prototype.__trgCustom=function(){this.em.trigger(this.events.custom,this.__customData())},r.prototype.__customData=function(){var e=this,t=this.__getBehaviour();return{bm:this,blocks:this.getAll().models,container:t.container,dragStart:function(a,o){return e.startDrag(a,o)},drag:function(a){return e.__drag(a)},dragStop:function(a){return e.endDrag(a)}}},r.prototype.__startDrag=function(e,t){var a=this,o=a.em,i=a.events,l=a.blocks,c=e.getContent?e.getContent():e;this._dragBlock=e,o.set({dragResult:null,dragSource:{content:c,dragDef:e.getDragDef()}}),[o,l].map(function(d){return d.trigger(i.dragStart,e,t)})},r.prototype.__drag=function(e){var t=this,a=t.em,o=t.events,i=t.blocks,l=this._dragBlock;[a,i].map(function(c){return c.trigger(o.drag,l,e)})},r.prototype.__endDrag=function(e){e===void 0&&(e={});var t=this,a=t.em,o=t.events,i=t.blocks,l=this._dragBlock,c=e.component||a.get("dragResult");if(delete this._dragBlock,c&&l){var d="activeOnRender",p=c.get&&c.get(d),h=l.get("activate")||p,g=l.get("select"),y=(0,_e.isArray)(c)?c[0]:c,b=g||h&&g!==!1;b?a.setSelected(y,{activate:h}):h&&y.trigger("active"),h&&p&&y.unset(d),l.get("resetId")&&y.onAll(function(v){return v.resetId()})}a.set({dragResult:null,dragSource:void 0}),l&&[a,i].map(function(v){return v.trigger(o.dragEnd,c,l)})},r.prototype.__getFrameViews=function(){return this.em.Canvas.getFrames().map(function(e){return e.view}).filter(Boolean)},r.prototype.__behaviour=function(e){return e===void 0&&(e={}),this._bhv=Vu(Vu({},this._bhv||{}),e)},r.prototype.__getBehaviour=function(){return this._bhv||{}},r.prototype.startDrag=function(e,t){this.__startDrag(e,t),this.__getFrameViews().forEach(function(a){var o;return(o=a.droppable)===null||o===void 0?void 0:o.startCustom()})},r.prototype.endDrag=function(e){this.__getFrameViews().forEach(function(t){var a;return(a=t.droppable)===null||a===void 0?void 0:a.endCustom(e)}),this.__endDrag()},r.prototype.postRender=function(){var e=this,t=e.categories,a=e.config,o=e.em,i=this.blocksVisible;this.blocksView=new RE({collection:i,categories:t},Vu(Vu({},a),{em:o})),this.__appendTo(i.models),this.__trgCustom()},r.prototype.add=function(e,t,a){a===void 0&&(a={});var o=t||{};return o.id=e,this.blocks.add(o,a)},r.prototype.get=function(e){return this.blocks.get(e)},r.prototype.getAll=function(){return this.blocks},r.prototype.getAllVisible=function(){return this.blocksVisible},r.prototype.remove=function(e,t){return t===void 0&&(t={}),this.__remove(e,t)},r.prototype.getCategories=function(){return this.categories},r.prototype.getContainer=function(){var e;return(e=this.blocksView)===null||e===void 0?void 0:e.el},r.prototype.getDragBlock=function(){return this._dragBlock},r.prototype.getBlocksByCategory=function(e){return gA(e||this.getAll().models)},r.prototype.render=function(e,t){t===void 0&&(t={});var a=this,o=a.categories,i=a.config,l=a.em,c=e||this.getAll().models;if(t.external){var d=new lv(c,{em:l});return new RE({collection:d,categories:o},Vu(Vu({em:l},i),t)).render().el}return this.blocksView&&(this.blocksView.updateConfig(t),this.blocksView.collection.reset(c),this.blocksView.rendered||(this.blocksView.render(),this.blocksView.rendered=!0)),this.getContainer()},r.prototype.destroy=function(){var e,t=[this.blocks,this.blocksVisible,this.categories];t.map(function(a){return a.stopListening()}),t.map(function(a){return a.reset()}),(e=this.blocksView)===null||e===void 0||e.remove()},r})(lu);const pK=fK;var hK=function(){return{stylePrefix:"clm-",appendTo:"",selectors:[],states:[{name:"hover"},{name:"active"},{name:"nth-of-type(2n)"}],iconAdd:'<svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>',iconSync:'<svg viewBox="0 0 24 24"><path d="M12 18c-3.31 0-6-2.69-6-6 0-1 .25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4m0-11V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8z"></path></svg>',iconTagOn:'<svg viewBox="0 0 24 24"><path d="M19 19H5V5h10V3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8h-2m-11.09-.92L6.5 11.5 11 16 21 6l-1.41-1.42L11 13.17l-3.09-3.09z"></path></svg>',iconTagOff:'<svg viewBox="0 0 24 24"><path d="M19 3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5a2 2 0 0 0-2-2m0 2v14H5V5h14z"></path></svg>',iconTagRemove:'<svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',componentFirst:!1,custom:!1}};const mK=hK;var gK=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),LA=(function(s){gK(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.defaults=function(){return{name:"",label:""}},r.prototype.getName=function(){return this.get("name")},r.prototype.getLabel=function(){return this.get("label")||this.getName()},r})(Sr.Kx);const hC=LA;LA.prototype.idAttribute="name";var Wb;(function(s){s.add="selector:add",s.remove="selector:remove",s.removeBefore="selector:remove:before",s.update="selector:update",s.state="selector:state",s.custom="selector:custom",s.all="selector"})(Wb||(Wb={}));var yK=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),xK=function(s,r){return Object.defineProperty?Object.defineProperty(s,"raw",{value:r}):s.raw=r,s},DE="contentEditable",vK=(function(s){yK(r,s);function r(e){e===void 0&&(e={});var t=s.call(this,e)||this,a=e.config||{};return t.config=a,t.module=e.module,t.coll=e.coll||null,t.pfx=a.stylePrefix||"",t.ppfx=a.pStylePrefix||"",t.em=a.em,t.listenTo(t.model,"change:active",t.updateStatus),t}return r.prototype.template=function(){var e=this,t=e.pfx,a=e.model,o=e.config,i=a.get("label")||"";return Ei(LE||(LE=xK([`
      <span id="`,'checkbox" class="',`tag-status" data-tag-status></span>
      <span id="`,'tag-label" data-tag-name>',`</span>
      <span id="`,'close" class="','tag-close" data-tag-remove> $',` </span>
    `],[`
      <span id="`,'checkbox" class="',`tag-status" data-tag-status></span>
      <span id="`,'tag-label" data-tag-name>',`</span>
      <span id="`,'close" class="','tag-close" data-tag-remove> $',` </span>
    `])),t,t,t,i,t,t,o.iconTagRemove)},r.prototype.events=function(){return{"click [data-tag-remove]":"removeTag","click [data-tag-status]":"changeStatus","dblclick [data-tag-name]":"startEditTag","focusout [data-tag-name]":"endEditTag"}},r.prototype.getInputEl=function(){return this.inputEl||(this.inputEl=this.el.querySelector("[data-tag-name]")),this.inputEl},r.prototype.startEditTag=function(){var e=this.em,t=this.getInputEl();t[DE]="true",t.focus(),e?.setEditing(!0)},r.prototype.endEditTag=function(){var e=this,t=e.model,a=e.em,o=this.getInputEl(),i=o.textContent||"",l=a?.Selectors;o[DE]="false",a?.setEditing(!1),l&&l.rename(t,i)!==t&&(o.innerText=t.getLabel())},r.prototype.changeStatus=function(){var e=this.model;e.set("active",!e.getActive())},r.prototype.removeTag=function(){this.module.removeSelected(this.model)},r.prototype.updateStatus=function(){var e=this,t=e.model,a=e.$el,o=e.config,i=o.iconTagOn,l=o.iconTagOff,c=a.find("[data-tag-status]");t.get("active")?(c.html(i),a.removeClass("opac50")):(c.html(l),a.addClass("opac50"))},r.prototype.render=function(){var e=this,t=e.pfx,a=e.ppfx,o=e.$el,i=e.model,l="".concat(t,"tag"),c=["".concat(l," ").concat(a,"three-bg")];return i.get("protected")&&c.push("".concat(l,"-protected")),o.html(this.template()),o.attr("class",c.join(" ")),this.updateStatus(),this},r})(Sr.Ss);const bK=vK;var LE,wK=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Qg=function(s,r){return Object.defineProperty?Object.defineProperty(s,"raw",{value:r}):s.raw=r,s},jK=(function(s){wK(r,s);function r(e){e===void 0&&(e={});var t=s.call(this,e)||this;t.config=e.config||{},t.pfx=t.config.stylePrefix||"",t.ppfx=t.config.pStylePrefix||"",t.className=t.pfx+"tags",t.stateInputId=t.pfx+"states",t.stateInputC=t.pfx+"input-c",t.states=t.config.states||[];var a=t.config.em,o=t.collection;t.target=a;var i=a.Selectors;t.module=i,t.em=a,t.componentChanged=(0,_e.debounce)(t.componentChanged.bind(t),0),t.checkSync=(0,_e.debounce)(t.checkSync.bind(t),0);var l=bs.I.update,c="".concat(l,":classes"),d="component:toggled ".concat(c),p="".concat(c," ").concat(l,":attributes:id change:state");return t.listenTo(a,d,t.componentChanged),t.listenTo(a,"styleManager:update",t.componentChanged),t.listenTo(a,p,t.__handleStateChange),t.listenTo(a,"styleable:change change:device",t.checkSync),t.listenTo(o,"add",t.addNew),t.listenTo(o,"reset",t.renderClasses),t.listenTo(o,"remove",t.tagRemoved),t.listenTo(i.getAll(),i.events.state,(0,_e.debounce)(function(){return t.renderStates()},0)),t.delegateEvents(),t}return r.prototype.template=function(e){var t=e.labelInfo,a=e.labelHead,o=e.iconSync,i=e.iconAdd,l=e.pfx,c=e.ppfx;return Ei(FE||(FE=Qg([' <div id="','up" class="',`header">
        <div id="`,'label" class="','header-label">',`</div>
        <div id="`,'status-c" class="',`header-status">
          <span id="`,`input-c" data-states-c>
            <div class="`,"field ",`select">
              <span id="`,`input-holder">
                <select id="`,`states" data-states></select>
              </span>
              <div class="`,`sel-arrow">
                <div class="`,`d-s-arrow"></div>
              </div>
            </div>
          </span>
        </div>
      </div>
      <div id="`,'tags-field" class="',`field">
        <div id="`,`tags-c" data-selectors></div>
        <input id="`,`new" data-input />
        <span id="`,'add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',` </span>
        <span class="`,"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',` </span>
      </div>
      <div class="`,`sels-info">
        <div class="`,'label-sel">',`:</div>
        <div class="`,`sels" data-selected></div>
      </div>`],[' <div id="','up" class="',`header">
        <div id="`,'label" class="','header-label">',`</div>
        <div id="`,'status-c" class="',`header-status">
          <span id="`,`input-c" data-states-c>
            <div class="`,"field ",`select">
              <span id="`,`input-holder">
                <select id="`,`states" data-states></select>
              </span>
              <div class="`,`sel-arrow">
                <div class="`,`d-s-arrow"></div>
              </div>
            </div>
          </span>
        </div>
      </div>
      <div id="`,'tags-field" class="',`field">
        <div id="`,`tags-c" data-selectors></div>
        <input id="`,`new" data-input />
        <span id="`,'add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',` </span>
        <span class="`,"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',` </span>
      </div>
      <div class="`,`sels-info">
        <div class="`,'label-sel">',`:</div>
        <div class="`,`sels" data-selected></div>
      </div>`])),l,l,l,l,a,l,l,l,c,c,c,l,c,c,l,c,l,l,l,l,l,i,l,l,o,l,l,t,l)},r.prototype.events=function(){return{"change [data-states]":"stateChanged","click [data-add]":"startNewTag","focusout [data-input]":"endNewTag","keyup [data-input]":"onInputKeyUp","click [data-sync-style]":"syncStyle"}},r.prototype.syncStyle=function(){var e=this.em,t=this.getTarget(),a=e.Css,o={noDisabled:1},i=this.getCommonSelectors({opts:o}),l=e.get("state"),c=e.getCurrentMedia(),d=[],p=a.get(i,l,c)||a.add(i,l,c),h;this.getTargets().forEach(function(g){var y=a.getIdRule(g.getId(),{state:l,mediaText:c});h=y.getStyle(),y.setStyle({}),d.push(y)}),h&&p.addStyle(h),e.trigger("component:toggled"),e.trigger("component:sync-style",{component:t,selectors:i,mediaText:c,rule:p,ruleComponents:d,state:l})},r.prototype.tagRemoved=function(e){this.updateStateVis()},r.prototype.addNew=function(e){this.addToClasses(e)},r.prototype.startNewTag=function(){var e,t;(e=this.$addBtn)===null||e===void 0||e.css({display:"none"}),(t=this.$input)===null||t===void 0||t.show().focus()},r.prototype.endNewTag=function(){var e,t;(e=this.$addBtn)===null||e===void 0||e.css({display:""}),(t=this.$input)===null||t===void 0||t.hide().val("")},r.prototype.onInputKeyUp=function(e){var t;e.keyCode===13?(e.preventDefault(),this.addNewTag((t=this.$input)===null||t===void 0?void 0:t.val())):e.keyCode===27&&this.endNewTag()},r.prototype.checkStates=function(){var e=this.em.getState(),t=this.getStates();t&&t.val(e)},r.prototype.componentChanged=function(e){var t=e===void 0?{}:e,a=t.targets;this.updateSelection(a)},r.prototype.updateSelection=function(e){var t=e||this.getTargets();t=(0,_e.isArray)(t)?t:[t];var a=[];return t&&t.length&&(a=this.getCommonSelectors({targets:t}),this.checkSync({validSelectors:a})),this.collection.reset(a),this.updateStateVis(t),this.module.__trgCustom(),a},r.prototype.getCommonSelectors=function(e){var t=e===void 0?{}:e,a=t.targets,o=t.opts,i=o===void 0?{}:o,l=a||this.getTargets();return this.module.__getCommonSelectors(l,i)},r.prototype._commonSelectors=function(){for(var e,t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return(e=this.module).__common.apply(e,t)},r.prototype.checkSync=function(){var e=this,t=e.$btnSyncEl,a=e.config,o=e.collection,i=this.getTarget(),l;if(i&&a.componentFirst&&o.length){var c=i.getStyle();l=!(0,_e.isEmpty)(c)}t&&t[l?"show":"hide"]()},r.prototype.getTarget=function(){return this.target.getSelected()},r.prototype.getTargets=function(){return this.target.getSelectedAll()},r.prototype.updateStateVis=function(e){var t=this.em,a=t&&t.getConfig().avoidInlineStyle,o=this.collection.length||a?"":"none";this.getStatesC().css("display",o),this.updateSelector(e)},r.prototype.__handleStateChange=function(){this.updateSelector(this.getTargets())},r.prototype.updateSelector=function(e){var t=this,a=this.el.querySelector("[data-selected]"),o=[],i=e||this.getTargets();i=(0,_e.isArray)(i)?i:[i],i.forEach(function(l){return o.push(t.__getName(l))}),a&&(a.innerHTML=o.join(", ")),this.checkStates()},r.prototype.__getName=function(e){var t=this,a=t.pfx,o=t.config,i=t.em,l=o.selectedName,c=o.componentFirst,d;if((0,_e.isString)(e))d=Ei(BE||(BE=Qg(['<span class="','sel-gen">',"</span>"],['<span class="','sel-gen">',"</span>"])),a,e);else{var p=e?.getSelectors();if(!p)return"";var h=p.getStyleable(),g=i.get("state"),y=e.getId?Ei(zE||(zE=Qg(['<span class="','sel-cmp">',`</span>
            <span class="`,'sel-id">#',"</span>"],['<span class="','sel-cmp">',`</span>
            <span class="`,'sel-id">#',"</span>"])),a,e.getName(),a,e.getId()):"";d=this.collection.getFullString(h),d=d?Ei($E||($E=Qg(['<span class="','sel-rule">',"</span>"],['<span class="','sel-rule">',"</span>"])),a,d):e.get("selectorsAdd")||y,d=c&&y?y:d,d+=g?Ei(UE||(UE=Qg(['<span class="','sel-state">:',"</span>"],['<span class="','sel-state">:',"</span>"])),a,g):"",d=l?l({result:d,state:g,target:e}):d}return d&&'<span class="'.concat(a,'sel">').concat(d,"</span>")},r.prototype.stateChanged=function(e){var t=this.em,a=e.target.value;t.set("state",a)},r.prototype.addNewTag=function(e){var t=e.trim();t&&(this.module.addSelected({label:t}),this.endNewTag())},r.prototype.addToClasses=function(e,t){var a=t,o=this.getClasses(),i=new bK({model:e,config:this.config,coll:this.collection,module:this.module}).render().el;return a?a.appendChild(i):o.append(i),i},r.prototype.renderClasses=function(){var e=this,t=document.createDocumentFragment(),a=this.getClasses();a.empty(),this.collection.each(function(o){return e.addToClasses(o,t)}),a.append(t)},r.prototype.getClasses=function(){return this.$el.find("[data-selectors]")},r.prototype.getStates=function(){if(!this.$states){var e=this.$el.find("[data-states]");this.$states=e[0]&&e}return this.$states},r.prototype.getStatesC=function(){return this.$statesC||(this.$statesC=this.$el.find("#"+this.stateInputC)),this.$statesC},r.prototype.renderStates=function(){var e=this,t=e.module,a=e.em,o=a.t("selectorManager.emptyState"),i=t.getStates().map(function(c){var d=a.t("selectorManager.states.".concat(c.id))||c.getLabel()||c.id;return'<option value="'.concat(c.id,'">').concat(d,"</option>")}).join(""),l=this.getStates();l&&l.html('<option value="">'.concat(o,"</option>").concat(i)),this.checkStates()},r.prototype.render=function(){var e=this,t=e.em,a=e.pfx,o=e.ppfx,i=e.config,l=e.$el,c=e.el,d=i.render,p=i.iconSync,h=i.iconAdd,g={iconSync:p,iconAdd:h,labelHead:t.t("selectorManager.label"),labelInfo:t.t("selectorManager.selected"),ppfx:o,pfx:a,el:c};l.html(this.template(g));var y=d&&d(g);return y&&y!==c&&l.empty().append(y),this.$input=l.find("[data-input]"),this.$addBtn=l.find("[data-add]"),this.$classes=l.find("#"+a+"tags-c"),this.$btnSyncEl=l.find("[data-sync-style]"),this.$input.hide(),this.renderStates(),this.renderClasses(),l.attr("class","".concat(this.className," ").concat(o,"one-bg ").concat(o,"two-color")),this},r})(Sr.Ss);const CK=jK;var FE,BE,zE,$E,UE,SK=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),My=function(){return My=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},My.apply(this,arguments)},mC=function(s,r,e){if(e||arguments.length===2)for(var t=0,a=r.length,o;t<a;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return s.concat(o||Array.prototype.slice.call(r))},VE=function(s){return(0,_e.isString)(s)&&s[0]=="#"},HE=function(s){return(0,_e.isString)(s)&&s[0]=="."},NK=(function(s){SK(r,s);function r(e){var t=s.call(this,e,"SelectorManager",new Yu([]),Wb,mK(),{skipListen:!0})||this;t.Selector=ci,t.Selectors=Yu,t.events=Wb,t.storageKey="",(0,_e.bindAll)(t,"__updateSelectedByComponents");var a=t,o=a.config,i=a.events,l=o.pStylePrefix;l&&(o.stylePrefix=l+o.stylePrefix),t.all=new Yu(o.selectors),t.selected=new Yu([],{em:e,config:o}),t.states=new Sr.pM(o.states.map(function(p){return new hC(p)}),{model:hC}),t.model=new Sr.Kx({cFirst:o.componentFirst,_undo:!0}),t.__update=(0,_e.debounce)(function(){return t.__trgCustom()},0),t.__initListen({collections:[t.states,t.selected],propagate:[{entity:t.states,event:i.state}]}),e.on("change:state",function(p,h){return e.trigger(i.state,h)}),t.model.on("change:cFirst",function(p,h){return e.trigger("selector:type",h)});var c="".concat(bs.I.update,":classes");e.on("component:toggled ".concat(c),t.__updateSelectedByComponents);var d="component:toggled ".concat(c," change:device styleManager:update selector:state selector:type style:target");return t.model.listenTo(e,d,function(){return t.__update()}),t}return r.prototype.__trgCustom=function(e){this.em.trigger(this.events.custom,this.__customData(e))},r.prototype.getAll=function(e){return e===void 0&&(e={}),this.all?e.array?mC([],this.all.models,!0):this.all:[]},r.prototype.__customData=function(e){return e===void 0&&(e={}),this.__ctn=this.__ctn||e.container,{states:this.getStates(),selected:this.getSelected(),container:this.__ctn}},r.prototype.postRender=function(){this.__appendTo(),this.__trgCustom()},r.prototype.select=function(e,t){t===void 0&&(t={});var a=Array.isArray(e)?e:[e],o=this.em.Styles.select(a,t);this.selected.reset(this.__getCommonSelectors(o));var i=this.selectorTags,l=o.filter(function(c){return c}).map(function(c){return(0,Zt.isComponent)(c)||(0,Zt.isRule)(c)&&!c.get("selectorsAdd")?c:c.getSelectorsString()});return i&&i.componentChanged({targets:l}),this},r.prototype.addSelector=function(e,t,a){t===void 0&&(t={}),a===void 0&&(a={});var o=My({},t);(0,_e.isObject)(e)?o=e:o.name=e,VE(o.name)?(o.name=o.name.substr(1),o.type=ci.TYPE_ID):HE(o.name)&&(o.name=o.name.substr(1)),o.label&&!o.name&&(o.name=this.escapeName(o.label));var i=this,l=i.all,c=i.em,d=i.config,p=l.get(o);if(!p){var h=o instanceof ci?o:new ci(o,My(My({},a),{config:d,em:c}));return l.add(h,a)}return p},r.prototype.getSelector=function(e,t){return t===void 0&&(t=ci.TYPE_CLASS),VE(e)?(e=e.substr(1),t=ci.TYPE_ID):HE(e)&&(e=e.substr(1)),this.all.get({name:e,type:t})},r.prototype.add=function(e,t){var a=this;t===void 0&&(t={});var o=(0,_e.isString)(e)?{}:t;return(0,_e.isArray)(e)?e.map(function(i){return a.addSelector(i,t,o)}):this.addSelector(e,t,o)},r.prototype.addClass=function(e){var t=this,a=[];return(0,_e.isString)(e)&&(e=e.trim().split(" ").filter(Boolean)),e.forEach(function(o){return a.push(t.addSelector(o))}),a},r.prototype.get=function(e,t){var a=this;if((0,_e.isArray)(e)){var o=[],i=e.map(function(l){return a.getSelector(l)}).filter(Boolean);return i.forEach(function(l){return o.indexOf(l)<0&&o.push(l)}),o}else return this.getSelector(e,t)},r.prototype.remove=function(e,t){return this.__remove(e,t)},r.prototype.rename=function(e,t,a){var o=this.escapeName(t),i=this.get(o);return i||e.set({name:o,label:t},a)},r.prototype.setState=function(e){return this.em.setState(e),this},r.prototype.getState=function(){return this.em.getState()},r.prototype.getStates=function(){return mC([],this.states.models,!0)},r.prototype.setStates=function(e,t){return this.states.reset(e.map(function(a){return new hC(a)}),t)},r.prototype.getSelected=function(){return this.__getCommon()},r.prototype.getSelectedAll=function(){return mC([],this.selected.models,!0)},r.prototype.addSelected=function(e){var t=this.add(e);this.em.getSelectedAll().forEach(function(a){a.getSelectors().add(t)})},r.prototype.removeSelected=function(e){this.em.getSelectedAll().forEach(function(t){!e.get("protected")&&t&&t.getSelectors().remove(e)})},r.prototype.duplicateSelected=function(e,t){var a=this;t===void 0&&(t={});var o=this.em,i=this.getSelected();if(!(i.indexOf(e)<0)){var l=this.getState(),c=o.getCurrentMedia(),d=o.Css.get(i,l,c),p=d?.getStyle();if(o.getSelectedAll().forEach(function(g){var y=g.getSelectors();if(y.includes(e)){var b=t.suffix||" copy",v=e.getLabel(),w=a.addSelector("".concat(v).concat(b)),C=y.indexOf(e);y.remove(e),y.add(w,{at:C})}}),p){var h=o.Css.add(this.getSelected(),l,c);h.setStyle(p)}}},r.prototype.getSelectedTargets=function(){return this.em.Styles.getSelectedAll()},r.prototype.setComponentFirst=function(e){this.getConfig().componentFirst=e,this.model.set({cFirst:e})},r.prototype.getComponentFirst=function(){return this.getConfig().componentFirst},r.prototype.escapeName=function(e){var t=this.getConfig().escapeName;return t?t(e):ci.escapeName(e)},r.prototype.render=function(e){var t=this.selectorTags,a=this.getConfig(),o=t?.el;return this.selected.reset(e),this.selectorTags=new CK({el:o,collection:this.selected,module:this,config:a}),this.selectorTags.render().el},r.prototype.destroy=function(){var e=this,t=e.selectorTags,a=e.model;a.stopListening(),this.__update.cancel(),this.__destroy(),t?.remove(),this.selectorTags=void 0},r.prototype.load=function(){},r.prototype.store=function(){},r.prototype.__getCommon=function(){return this.__getCommonSelectors(this.em.getSelectedAll())},r.prototype.__getCommonSelectors=function(e,t){t===void 0&&(t={});var a=e.map(function(o){return o.getSelectors&&o.getSelectors().getValid(t)}).filter(Boolean);return this.__common.apply(this,a)},r.prototype.__common=function(){for(var e=this,t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return t.length?t.length===1?t[0]:t.length===2?t[0].filter(function(o){return t[1].indexOf(o)>=0}):t.slice(1).reduce(function(o,i){return e.__common(o,i)},t[0]):[]},r.prototype.__updateSelectedByComponents=function(){this.selected.reset(this.__getCommon())},r})(lu);const FA=NK;var kK=function(){return{textTags:["br","b","i","u","a","ul","ol"],textTypes:["text","textnode","comment"],parserCss:void 0,parserHtml:void 0,optionsHtml:{htmlType:"text/html",allowScripts:!1,allowUnsafeAttr:!1,allowUnsafeAttrValue:!1,keepEmptyTextNodes:!1,convertDataGjsAttributesHyphens:!1}}};const _K=kK;var Xl,Zi={MEDIA_RULE:4,FONT_FACE_RULE:5,PAGE_RULE:6,KEYFRAMES_RULE:7,COUNTER_STYLE_RULE:11,SUPPORTS_RULE:12,DOCUMENT_RULE:13,FONT_FEATURE_VALUES_RULE:14,VIEWPORT_RULE:15},um=(Xl={},Xl[Zi.MEDIA_RULE]="media",Xl[Zi.FONT_FACE_RULE]="font-face",Xl[Zi.PAGE_RULE]="page",Xl[Zi.KEYFRAMES_RULE]="keyframes",Xl[Zi.COUNTER_STYLE_RULE]="counter-style",Xl[Zi.SUPPORTS_RULE]="supports",Xl[Zi.DOCUMENT_RULE]="document",Xl[Zi.FONT_FEATURE_VALUES_RULE]="font-feature-values",Xl[Zi.VIEWPORT_RULE]="viewport",Xl),BA=(0,_e.keys)(um),q2=[Zi.FONT_FACE_RULE,Zi.PAGE_RULE,Zi.COUNTER_STYLE_RULE,Zi.VIEWPORT_RULE],EK=BA.filter(function(s){return q2.indexOf(Number(s))<0}).map(function(s){return um[s]}).concat(["container","layer"]),TK=q2.map(function(s){return um[s]}),zA=function(s){s===void 0&&(s="");for(var r=[],e=[],t=s.split(","),a=0,o=t.length;a<o;a++){var i=t[a].trim();if(/^(\.{1}[\w\-]+)+(:{1,2}[\w\-()]+)?$/gi.test(i)||/^(#{1}[\w\-]+){1}(:{1,2}[\w\-()]+)?$/gi.test(i)){var l=i.split(".").filter(Boolean);e.push(l)}else r.push(i)}return{result:e,add:r}},OK=function(s){for(var r=s.style,e={},t=0,a=r.length;t<a;t++){var o=r[t],i=r.getPropertyValue(o),l=r.getPropertyPriority(o);e[o]="".concat(i).concat(l?" !".concat(l):"")}return e},WE=function(s){var r=s.conditionText||s.media&&s.media.mediaText||s.name||s.selectorText||"";return r.trim()},JS=function(s,r,e){r===void 0&&(r={}),e===void 0&&(e={});var t={},a=s.length,o=s[a-1],i=o?o.split(/:(.+)/):[],l=i[1],c=e.atRule,d=e.selectorsAdd,p=e.mediaText,h=TK.indexOf(c)>=0;return h&&(t.singleAtRule=!0),c&&(t.atRuleType=c),d&&(t.selectorsAdd=d),p&&(t.mediaText=p),l&&(s[a-1]=i[0],t.state=l,i.splice(i.length-1,1)),t.selectors=s,t.style=r,t},qE=function(s){var r=s.cssText,e=r===void 0?"":r;return EK.find(function(t){return e.indexOf("@".concat(t))===0})},$A=function(s){for(var r=[],e=s.cssRules||[],t=0,a=e.length;t<a;t++){var o=e[t],i=o.type,l=!1,c="",d="",p=o.selectorText||o.keyText||"",h=q2.indexOf(i)>=0;if(h)l=!0,c=um[i],d=WE(o);else if(BA.indexOf("".concat(i))>=0||!i&&qE(o)){var g=$A(o),y=um[i]||qE(o);d=WE(o);for(var b=0,v=g.length;b<v;b++){var w=g[b];d&&(w.mediaText=d),w.atRuleType=y}r=r.concat(g)}if(!(!p&&!h)){for(var C=OK(o),k=zA(p),N=k.add,O=k.result,R=void 0,L=0,B=O.length;L<B;L++){var G=JS(O[L],C,{atRule:um[i]});r.push(G),R=G}if(N.length){var $=N.join(", ");if(R)R.selectorsAdd=$;else{var G={selectors:[],selectorsAdd:$,style:C};l&&(G.singleAtRule=l),c&&(G.atRuleType=c),d&&(G.mediaText=d),r.push(G)}}}}return r};const PK=(function(s){var r=document.createElement("style");r.innerHTML=s,document.head.appendChild(r);var e=r.sheet;return document.head.removeChild(r),e?$A(e):[]});var AK=function(s,r){return r===void 0&&(r={}),{parse:function(e,t){var a=this;t===void 0&&(t={});var o=[],i=r.parserCss,l=s?.Editor,c=[],d,p=s?.Parser,h={input:e};p?.__emitEvent(Qu.cssBefore,h);var g=h.input;try{c=i?i(g,l):PK(g)}catch(y){if(d=y,t.throwOnError)throw y}return c.forEach(function(y){return o=o.concat(a.checkNode(y))}),p?.__emitEvent(Qu.css,{input:g,output:o,nodes:c,error:d}),o},checkNode:function(e){var t=e.selectors,a=e.style,o=[e];if((0,_e.isString)(t)){var i=[],l=e,c=zA(t),d=c.result,p=c.add.join(", "),h={atRule:l.atRule,mediaText:l.params};if(d.length?d.forEach(function(y){i.push(JS(y,a,h))}):i.push(JS([],a,h)),p){var g=i[i.length-1];g.selectorsAdd=p}o=i}return o}}};const MK=AK;var IK=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),eN=function(){return eN=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},eN.apply(this,arguments)},RK=(function(s){IK(r,s);function r(e){var t=s.call(this,e,"Parser",_K())||this;t.events=Qu;var a=t.config;return t.parserCss=MK(e,a),t.parserHtml=uA(e,a),t}return r.prototype.parseHtml=function(e,t){t===void 0&&(t={});var a=this,o=a.em,i=a.parserHtml;return i.compTypes=o.Components.getTypes()||[],i.parse(e,this.parserCss,t)},r.prototype.parseCss=function(e){return this.parserCss.parse(e)},r.prototype.__emitEvent=function(e,t){var a=this,o=a.em,i=a.events;o.trigger(e,t),o.trigger(i.all,eN({event:e},t))},r.prototype.destroy=function(){},r})(Di);const DK=RK;var LK=function(){return{id:"gjs-",type:"local",autosave:!0,autoload:!0,stepsBeforeSave:1,recovery:!1,onStore:function(s){return s},onLoad:function(s){return s},options:{local:{key:"gjsProject",checkLocal:!0},remote:{headers:{},urlStore:"",urlLoad:"",contentTypeJson:!0,fetchOptions:"",credentials:"include",onStore:function(s){return s},onLoad:function(s){return s}}}}};const FK=LK;var GE=function(s,r,e,t){function a(o){return o instanceof e?o:new e(function(i){i(o)})}return new(e||(e=Promise))(function(o,i){function l(p){try{d(t.next(p))}catch(h){i(h)}}function c(p){try{d(t.throw(p))}catch(h){i(h)}}function d(p){p.done?o(p.value):a(p.value).then(l,c)}d((t=t.apply(s,r||[])).next())})},KE=function(s,r){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},t,a,o,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(d){return function(p){return c([d,p])}}function c(d){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,d[0]&&(e=0)),e;)try{if(t=1,a&&(o=d[0]&2?a.return:d[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,d[1])).done)return o;switch(a=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return e.label++,{value:d[1],done:!1};case 5:e.label++,a=d[1],d=[0];continue;case 7:d=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){e=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){e.label=d[1];break}if(d[0]===6&&e.label<o[1]){e.label=o[1],o=d;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(d);break}o[2]&&e.ops.pop(),e.trys.pop();continue}d=r.call(s,e)}catch(p){d=[6,p],a=0}finally{t=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},BK=(function(){function s(){}return s.prototype.store=function(r){return GE(this,arguments,void 0,function(e,t){return t===void 0&&(t={}),KE(this,function(a){return this.hasLocal(t,!0)&&localStorage.setItem(t.key,JSON.stringify(e)),[2,e]})})},s.prototype.load=function(){return GE(this,arguments,void 0,function(r){var e;return r===void 0&&(r={}),KE(this,function(t){return e={},this.hasLocal(r,!0)&&(e=JSON.parse(localStorage.getItem(r.key)||"{}")),[2,e]})})},s.prototype.hasLocal=function(r,e){if(r===void 0&&(r={}),r.checkLocal&&(!(0,Zt.hasWin)()||!localStorage)){if(e)throw new Error("localStorage not available");return!1}return!0},s})();const zK=BK;function Pp(s){"@babel/helpers - typeof";return Pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Pp(s)}function $K(s){var r=this.constructor;return this.then(function(e){return r.resolve(s()).then(function(){return e})},function(e){return r.resolve(s()).then(function(){return r.reject(e)})})}const UK=$K;function VK(s){var r=this;return new r(function(e,t){if(!(s&&typeof s.length<"u"))return t(new TypeError(Pp(s)+" "+s+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var a=Array.prototype.slice.call(s);if(a.length===0)return e([]);var o=a.length;function i(c,d){if(d&&(Pp(d)==="object"||typeof d=="function")){var p=d.then;if(typeof p=="function"){p.call(d,function(h){i(c,h)},function(h){a[c]={status:"rejected",reason:h},--o===0&&e(a)});return}}a[c]={status:"fulfilled",value:d},--o===0&&e(a)}for(var l=0;l<a.length;l++)i(l,a[l])})}const HK=VK;function UA(s,r){this.name="AggregateError",this.errors=s,this.message=r||""}UA.prototype=Error.prototype;function WK(s){var r=this;return new r(function(e,t){if(!(s&&typeof s.length<"u"))return t(new TypeError("Promise.any accepts an array"));var a=Array.prototype.slice.call(s);if(a.length===0)return t();for(var o=[],i=0;i<a.length;i++)try{r.resolve(a[i]).then(e).catch(function(l){o.push(l),o.length===a.length&&t(new UA(o,"All promises were rejected"))})}catch(l){t(l)}})}const qK=WK;var GK=setTimeout;function VA(s){return!!(s&&typeof s.length<"u")}function KK(){}function YK(s,r){return function(){s.apply(r,arguments)}}function Da(s){if(!(this instanceof Da))throw new TypeError("Promises must be constructed via new");if(typeof s!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],WA(s,this)}function HA(s,r){for(;s._state===3;)s=s._value;if(s._state===0){s._deferreds.push(r);return}s._handled=!0,Da._immediateFn(function(){var e=s._state===1?r.onFulfilled:r.onRejected;if(e===null){(s._state===1?tN:Jy)(r.promise,s._value);return}var t;try{t=e(s._value)}catch(a){Jy(r.promise,a);return}tN(r.promise,t)})}function tN(s,r){try{if(r===s)throw new TypeError("A promise cannot be resolved with itself.");if(r&&(Pp(r)==="object"||typeof r=="function")){var e=r.then;if(r instanceof Da){s._state=3,s._value=r,rN(s);return}else if(typeof e=="function"){WA(YK(e,r),s);return}}s._state=1,s._value=r,rN(s)}catch(t){Jy(s,t)}}function Jy(s,r){s._state=2,s._value=r,rN(s)}function rN(s){s._state===2&&s._deferreds.length===0&&Da._immediateFn(function(){s._handled||Da._unhandledRejectionFn(s._value)});for(var r=0,e=s._deferreds.length;r<e;r++)HA(s,s._deferreds[r]);s._deferreds=null}function ZK(s,r,e){this.onFulfilled=typeof s=="function"?s:null,this.onRejected=typeof r=="function"?r:null,this.promise=e}function WA(s,r){var e=!1;try{s(function(t){e||(e=!0,tN(r,t))},function(t){e||(e=!0,Jy(r,t))})}catch(t){if(e)return;e=!0,Jy(r,t)}}Da.prototype.catch=function(s){return this.then(null,s)};Da.prototype.then=function(s,r){var e=new this.constructor(KK);return HA(this,new ZK(s,r,e)),e};Da.prototype.finally=UK;Da.all=function(s){return new Da(function(r,e){if(!VA(s))return e(new TypeError("Promise.all accepts an array"));var t=Array.prototype.slice.call(s);if(t.length===0)return r([]);var a=t.length;function o(l,c){try{if(c&&(Pp(c)==="object"||typeof c=="function")){var d=c.then;if(typeof d=="function"){d.call(c,function(p){o(l,p)},e);return}}t[l]=c,--a===0&&r(t)}catch(p){e(p)}}for(var i=0;i<t.length;i++)o(i,t[i])})};Da.any=qK;Da.allSettled=HK;Da.resolve=function(s){return s&&Pp(s)==="object"&&s.constructor===Da?s:new Da(function(r){r(s)})};Da.reject=function(s){return new Da(function(r,e){e(s)})};Da.race=function(s){return new Da(function(r,e){if(!VA(s))return e(new TypeError("Promise.race accepts an array"));for(var t=0,a=s.length;t<a;t++)Da.resolve(s[t]).then(r,e)})};Da._immediateFn=typeof setImmediate=="function"&&function(s){setImmediate(s)}||function(s){GK(s,0)};Da._unhandledRejectionFn=function(r){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",r)};const nN=Da;(0,Zt.hasWin)()&&(window.Promise=window.Promise||nN);const qA=typeof fetch=="function"?fetch.bind():function(s,r){return new nN(function(e,t){var a=new XMLHttpRequest;a.open(r.method||"get",s),a.withCredentials=r.credentials=="include";for(var o in r.headers||{})a.setRequestHeader(o,r.headers[o]);a.onload=function(i){return e({status:a.status,statusText:a.statusText,text:function(){return nN.resolve(a.responseText)}})},a.onerror=t,a.upload&&r.onProgress&&(a.upload.onprogress=r.onProgress),r.body?a.send(r.body):a.send()})};var qb=function(){return qb=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},qb.apply(this,arguments)},YE=function(s,r,e,t){function a(o){return o instanceof e?o:new e(function(i){i(o)})}return new(e||(e=Promise))(function(o,i){function l(p){try{d(t.next(p))}catch(h){i(h)}}function c(p){try{d(t.throw(p))}catch(h){i(h)}}function d(p){p.done?o(p.value):a(p.value).then(l,c)}d((t=t.apply(s,r||[])).next())})},ZE=function(s,r){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},t,a,o,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(d){return function(p){return c([d,p])}}function c(d){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,d[0]&&(e=0)),e;)try{if(t=1,a&&(o=d[0]&2?a.return:d[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,d[1])).done)return o;switch(a=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return e.label++,{value:d[1],done:!1};case 5:e.label++,a=d[1],d=[0];continue;case 7:d=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){e=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){e.label=d[1];break}if(d[0]===6&&e.label<o[1]){e.label=o[1],o=d;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(d);break}o[2]&&e.ops.pop(),e.trys.pop();continue}d=r.call(s,e)}catch(p){d=[6,p],a=0}finally{t=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},XK=(function(){function s(){}return s.prototype.store=function(r){return YE(this,arguments,void 0,function(e,t){return t===void 0&&(t={}),ZE(this,function(a){switch(a.label){case 0:return[4,this.request(t.urlStore,this.__props(t,e),t)];case 1:return[2,a.sent()]}})})},s.prototype.load=function(){return YE(this,arguments,void 0,function(r){return r===void 0&&(r={}),ZE(this,function(e){switch(e.label){case 0:return[4,this.request(r.urlLoad,this.__props(r),r)];case 1:return[2,e.sent()]}})})},s.prototype.request=function(r,e,t){return e===void 0&&(e={}),t===void 0&&(t={}),qA(r,e).then(function(a){var o=a.text(),i=(a.status/200|0)===1;return i?o:o.then(Promise.reject)}).then(function(a){var o=a&&(0,_e.isString)(a);return t.contentTypeJson&&o?JSON.parse(a):a})},s.prototype.__props=function(r,e){r===void 0&&(r={});var t=r.contentTypeJson,a=r.headers||{},o=r.fetchOptions||{},i="X-Requested-With",l="Content-Type",c;if((0,_e.isUndefined)(a[i])&&(a[i]="XMLHttpRequest"),(0,_e.isUndefined)(a[l])&&t&&(a[l]="application/json; charset=utf-8"),e)if(t)c=JSON.stringify(e);else{c=new FormData;for(var d in e)c.append(d,e[d])}var p={method:c?"POST":"GET",credentials:r.credentials,headers:a,body:c};return qb(qb({},p),(0,_e.isFunction)(o)?o(p):o)},s})();const QK=XK;var sN;(function(s){s.start="storage:start",s.startStore="storage:start:store",s.startLoad="storage:start:load",s.load="storage:load",s.store="storage:store",s.after="storage:after",s.afterStore="storage:after:store",s.afterLoad="storage:after:load",s.end="storage:end",s.endStore="storage:end:store",s.endLoad="storage:end:load",s.error="storage:error",s.errorStore="storage:error:store",s.errorLoad="storage:error:load"})(sN||(sN={}));const ni=sN;var JK=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Kh=function(){return Kh=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Kh.apply(this,arguments)},gC=function(s,r,e,t){function a(o){return o instanceof e?o:new e(function(i){i(o)})}return new(e||(e=Promise))(function(o,i){function l(p){try{d(t.next(p))}catch(h){i(h)}}function c(p){try{d(t.throw(p))}catch(h){i(h)}}function d(p){p.done?o(p.value):a(p.value).then(l,c)}d((t=t.apply(s,r||[])).next())})},yC=function(s,r){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},t,a,o,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(d){return function(p){return c([d,p])}}function c(d){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,d[0]&&(e=0)),e;)try{if(t=1,a&&(o=d[0]&2?a.return:d[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,d[1])).done)return o;switch(a=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return e.label++,{value:d[1],done:!1};case 5:e.label++,a=d[1],d=[0];continue;case 7:d=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){e=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){e.label=d[1];break}if(d[0]===6&&e.label<o[1]){e.label=o[1],o=d;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(d);break}o[2]&&e.ops.pop(),e.trys.pop();continue}d=r.call(s,e)}catch(p){d=[6,p],a=0}finally{t=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},cv="local",XE="remote",eY=(function(s){JK(r,s);function r(e){var t=s.call(this,e,"StorageManager",FK())||this;t.storages={},t.events=ni;var a=t.config;return a._disable&&(a.type=void 0),t.storages={},t.add(cv,new zK),t.add(XE,new QK),t.setCurrent(a.type),t}return r.prototype.isAutosave=function(){return!!this.config.autosave},r.prototype.setAutosave=function(e){return this.config.autosave=!!e,this},r.prototype.getStepsBeforeSave=function(){return this.config.stepsBeforeSave},r.prototype.setStepsBeforeSave=function(e){return this.config.stepsBeforeSave=e,this},r.prototype.add=function(e,t){return this.storages[e]=t,this},r.prototype.get=function(e){return this.storages[e]},r.prototype.getStorages=function(){return this.storages},r.prototype.getCurrent=function(){return this.config.currentStorage},r.prototype.setCurrent=function(e){return this.getConfig().currentStorage=e,this},r.prototype.getCurrentStorage=function(){return this.get(this.getCurrent())},r.prototype.getStorageOptions=function(e){return this.getCurrentOptions(e)},r.prototype.store=function(e){return gC(this,arguments,void 0,function(t,a){var o,i,l,c,d,p;return a===void 0&&(a={}),yC(this,function(h){switch(h.label){case 0:o=this.getCurrentStorage(),i=Kh(Kh({},this.getCurrentOptions()),a),l=this.getRecoveryStorage(),c=this.getCurrentOptions(cv),h.label=1;case 1:return h.trys.push([1,5,,9]),[4,this.__exec(o,i,t)];case 2:return h.sent(),d=l,d?[4,this.__exec(l,c,{})]:[3,4];case 3:d=h.sent(),h.label=4;case 4:return[3,9];case 5:return p=h.sent(),l?[4,this.__exec(l,c,t)]:[3,7];case 6:return h.sent(),[3,8];case 7:throw p;case 8:return[3,9];case 9:return[2,t]}})})},r.prototype.load=function(){return gC(this,arguments,void 0,function(e){var t,a,o,i,l;return e===void 0&&(e={}),yC(this,function(c){switch(c.label){case 0:return t=this.getCurrentStorage(),a=Kh(Kh({},this.getCurrentOptions()),e),o=this.getRecoveryStorage(),o?[4,this.__exec(o,this.getCurrentOptions(cv))]:[3,5];case 1:if(l=c.sent(),(0,_e.isEmpty)(l))return[3,5];c.label=2;case 2:return c.trys.push([2,4,,5]),[4,this.__askRecovery()];case 3:return c.sent(),i=l,[3,5];case 4:return c.sent(),[3,5];case 5:return i?[3,7]:[4,this.__exec(t,a)];case 6:i=c.sent(),c.label=7;case 7:return[2,i||{}]}})})},r.prototype.__askRecovery=function(){var e=this.em,t=this.getRecovery();return new Promise(function(a,o){(0,_e.isFunction)(t)?t(a,o,e?.getEditor()):confirm(e?.t("storageManager.recover"))?a(null):o()})},r.prototype.getRecovery=function(){return this.config.recovery},r.prototype.getRecoveryStorage=function(){var e=this.getRecovery();return e&&this.getCurrent()===XE&&this.get(cv)},r.prototype.__exec=function(e,t,a){return gC(this,void 0,void 0,function(){var o,i,l,c,d,p,h,g,y,b,v,w,C,k;return yC(this,function(N){switch(N.label){case 0:if(o=a?"store":"load",i=this.getConfig(),l=i.onStore,c=i.onLoad,!e)return[2,a||{}];this.onStart(o,a),N.label=1;case 1:return N.trys.push([1,14,,15]),p=(k=this.em)===null||k===void 0?void 0:k.getEditor(),h=void 0,a?(y=l,y?[4,l(a,p)]:[3,3]):[3,7];case 2:y=N.sent(),N.label=3;case 3:return g=y||a,b=t.onStore,b?[4,t.onStore(g,p)]:[3,5];case 4:b=N.sent(),N.label=5;case 5:return g=b||g,[4,e.store(g,t)];case 6:return h=N.sent(),d=a,[3,13];case 7:return[4,e.load(t)];case 8:return h=N.sent(),d=this.__clearKeys(h),v=t.onLoad,v?[4,t.onLoad(d,p)]:[3,10];case 9:v=N.sent(),N.label=10;case 10:return d=v||d,w=c,w?[4,c(d,p)]:[3,12];case 11:w=N.sent(),N.label=12;case 12:d=w||d,N.label=13;case 13:return this.onAfter(o,d,h),this.onEnd(o,d,h),[3,15];case 14:throw C=N.sent(),this.onError(o,C),C;case 15:return[2,d]}})})},r.prototype.__clearKeys=function(e){e===void 0&&(e={});var t=this.getConfig(),a=new RegExp("^".concat(t.id)),o={};for(var i in e){var l=i.replace(a,"");o[l]=e[i]}return o},r.prototype.getCurrentOptions=function(e){var t=this.getConfig(),a=e||this.getCurrent();return t.options[a]||{}},r.prototype.onStart=function(e,t){var a=this.em;if(a){var o=e==="load"?ni.startLoad:ni.startStore;a.trigger(ni.start,e,t),a.trigger(o,t)}},r.prototype.onAfter=function(e,t,a){var o=this.em;if(o){var i=e==="load"?ni.afterLoad:ni.afterStore;o.trigger(ni.after),o.trigger(i,t,a);var l=e==="load"?ni.load:ni.store;o.trigger(l,t,a)}},r.prototype.onEnd=function(e,t,a){var o=this.em;if(o){var i=e==="load"?ni.endLoad:ni.endStore;o.trigger(ni.end,e,t,a),o.trigger(i,t,a)}},r.prototype.onError=function(e,t){var a=this.em;if(a){var o=e==="load"?ni.errorLoad:ni.errorStore;a.trigger(ni.error,t,e),a.trigger(o,t),this.onEnd(e,t)}},r.prototype.canAutoload=function(){var e=this.getCurrentStorage();return!!e&&!!this.config.autoload},r.prototype.destroy=function(){this.storages={}},r})(Di);const tY=eY;var rY=function(){return{stylePrefix:"trt-",appendTo:"",optionsTarget:[{value:!1},{value:"_blank"}],custom:!1}};const nY=rY;var sY=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Iy=function(){return Iy=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Iy.apply(this,arguments)},GA=(function(s){sY(r,s);function r(e){e===void 0&&(e={});var t=s.call(this,e)||this;t.events={},t.appendInput=!0;var a=e.config,o=a===void 0?{}:a,i=t,l=i.model,c=i.eventCapture,d=l.target,p=l.attributes.type;t.config=o,t.em=o.em,t.pfx=o.stylePrefix||"",t.ppfx=o.pStylePrefix||"",t.target=d,t.className=t.pfx+"trait",t.clsField="".concat(t.ppfx,"field ").concat(t.ppfx,"field-").concat(p);var h=[["change:value",t.onValueChange],["remove",t.removeView]];return h.forEach(function(g){var y=g[0],b=g[1];l.off(y,b),t.listenTo(l,y,b)}),l.view=t,t.listenTo(l,"change:label",t.render),t.listenTo(l,"change:placeholder",t.rerender),t.events={},c.forEach(function(g){return t.events[g]="onChange"}),t.delegateEvents(),t.init(),t}return r.prototype.attributes=function(){return this.model.get("attributes")||{}},r.prototype.templateLabel=function(e){var t=this.ppfx,a=this.getLabel();return'<div class="'.concat(t,'label" title="').concat(a,'">').concat(a,"</div>")},r.prototype.templateInput=function(e){var t=this.clsField;return'<div class="'.concat(t,'" data-input></div>')},r.prototype.getClbOpts=function(){return{component:this.target,trait:this.model,elInput:this.getInputElem()}},r.prototype.removeView=function(){this.remove(),this.removed()},r.prototype.init=function(){},r.prototype.removed=function(){},r.prototype.onRender=function(e){},r.prototype.onUpdate=function(e){},r.prototype.onEvent=function(e){},r.prototype.onChange=function(e){var t=this.getInputElem();t&&!(0,_e.isUndefined)(t.value)&&this.model.set("value",t.value),this.onEvent(Iy(Iy({},this.getClbOpts()),{event:e}))},r.prototype.getValueForTarget=function(){return this.model.get("value")},r.prototype.setInputValue=function(e){var t=this.getInputElem();t&&(t.value=e)},r.prototype.onValueChange=function(e,t,a){a===void 0&&(a={});var o=this.model,i=this.getValueForTarget();a.fromTarget?(this.setInputValue(i),this.postUpdate()):o.setValue(i,a)},r.prototype.renderLabel=function(){var e=this,t=e.$el,a=e.target,o=this.getLabel(),i=this.templateLabel(a);this.createLabel&&(i=this.createLabel({label:o,component:a,trait:this})||""),t.find("[data-label]").append(i)},r.prototype.getLabel=function(){var e=this.em,t=this.model.attributes,a=t.label,o=t.name;return e.t("traitManager.traits.labels.".concat(o))||(0,Zt.capitalize)(a||o).replace(/-/g," ")},r.prototype.getComponent=function(){return this.target},r.prototype.getInputEl=function(){if(!this.$input){var e=this,t=e.em,a=e.model,o=a,i=a.attributes.name,l=o.get("placeholder")||o.get("default")||"",c=o.get("type")||"text",d=o.get("min"),p=o.get("max"),h=this.getModelValue(),g=(0,go.default)('<input type="'.concat(c,'">')),y=t.t("traitManager.traits.attributes.".concat(i))||{};g.attr(Iy({placeholder:l},y)),(0,_e.isUndefined)(h)||(o.set({value:h},{silent:!0}),g.prop("value",h)),d&&g.prop("min",d),p&&g.prop("max",p),this.$input=g}return this.$input.get(0)},r.prototype.getInputElem=function(){var e=this,t=e.input,a=e.$input;return t||a&&a.get&&a.get(0)||this.getElInput()},r.prototype.getModelValue=function(){return this.model.getValue()},r.prototype.getElInput=function(){return this.elInput},r.prototype.renderField=function(){var e=this,t=e.$el,a=e.appendInput,o=e.model,i=t.find("[data-input]"),l=i[i.length-1],c=o.el;c||(c=this.createInput?this.createInput(this.getClbOpts()):this.getInputEl()),(0,_e.isString)(c)?(l.innerHTML=c,this.elInput=l.firstChild):(a?l.appendChild(c):l.insertBefore(c,l.firstChild),this.elInput=c),o.el=this.elInput},r.prototype.hasLabel=function(){var e=this.model.attributes.label;return!this.noLabel&&e!==!1},r.prototype.rerender=function(){delete this.model.el,this.render()},r.prototype.postUpdate=function(){this.onUpdate(this.getClbOpts())},r.prototype.render=function(){var e=this,t=e.$el,a=e.pfx,o=e.ppfx,i=e.model,l=i.attributes,c=l.type,d=l.id,p=this.hasLabel&&this.hasLabel(),h="".concat(a,"trait");delete this.$input;var g='<div class="'.concat(h," ").concat(h,"--").concat(c,`">
      `).concat(p?'<div class="'.concat(o,'label-wrp" data-label></div>'):"",`
      <div class="`).concat(o,"field-wrp ").concat(o,"field-wrp--").concat(c,`" data-input>
        `).concat(this.templateInput?(0,_e.isFunction)(this.templateInput)?this.templateInput(this.getClbOpts()):this.templateInput:"",`
      </div>
    </div>`);return t.empty().append(g),p&&this.renderLabel(),this.renderField(),this.el.className="".concat(h,"__wrp ").concat(h,"__wrp-").concat(d),this.postUpdate(),this.onRender(this.getClbOpts()),this},r})(Sr.Ss);const eu=GA;GA.prototype.eventCapture=["change"];var aY=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),KA=(function(s){aY(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.templateInput=function(){return""},r.prototype.onChange=function(){this.handleClick()},r.prototype.handleClick=function(){this.model.runCommand()},r.prototype.renderLabel=function(){this.model.get("label")&&eu.prototype.renderLabel.apply(this)},r.prototype.getInputEl=function(){var e=this,t=e.model,a=e.ppfx,o=t.props(),i=o.labelButton,l=o.text,c=o.full,d=i||l,p="".concat(a,"btn"),h='<button type="button" class="'.concat(p,"-prim").concat(c?" ".concat(p,"--full"):"",'">').concat(d,"</button>");return h},r})(eu);const oY=KA;KA.prototype.eventCapture=["click button"];var iY=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),lY=(function(s){iY(r,s);function r(){var e=s!==null&&s.apply(this,arguments)||this;return e.appendInput=!1,e}return r.prototype.templateInput=function(){var e=this,t=e.ppfx,a=e.clsField;return'<label class="'.concat(a,`" data-input>
    <i class="`).concat(t,`chk-icon"></i>
  </label>`)},r.prototype.onChange=function(){this.model.set("value",this.getInputElem().checked)},r.prototype.setInputValue=function(e){var t=this.getInputElem();t&&(t.checked=!!e)},r.prototype.getInputEl=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var a=!this.$input,o=eu.prototype.getInputEl.apply(this,e);if(a){var i=void 0,l=void 0,c=this,d=c.model,p=c.target,h=d.attributes.valueFalse,g=d.getName();d.changeProp?(i=p.get(g),l=i):(l=p.get("attributes")[g],i=!!(l||l==="")),!(0,_e.isUndefined)(h)&&l===h&&(i=!1),o.checked=i}return o},r})(eu);const cY=lY;function dY(s,r){if(!(0,Zt.hasWin)())return;var e={beforeShow:y,move:y,change:y,show:y,hide:y,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},t=[],a=!!/msie/i.exec(window.navigator.userAgent),o=(function(){function de(Ye,De){return!!~(""+Ye).indexOf(De)}var Ee=document.createElement("div"),le=Ee.style;return le.cssText="background-color:rgba(0,0,0,.5)",de(le.backgroundColor,"rgba")||de(le.backgroundColor,"hsla")})(),i=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),l=(function(){var de="";if(a)for(var Ee=1;Ee<=6;Ee++)de+="<div class='sp-"+Ee+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",de,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")})();function c(de,Ee,le,Ye){for(var De=[],ct=0;ct<de.length;ct++){var ot=de[ct];if(ot){var dt=M(ot),Ke=dt.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";Ke+=M.equals(Ee,ot)?" sp-thumb-active":"";var kt=dt.toString(Ye.preferredFormat||"rgb"),At=o?"background-color:"+dt.toRgbString():"filter:"+dt.toFilter();De.push('<span title="'+kt+'" data-color="'+dt.toRgbString()+'" class="'+Ke+'"><span class="sp-thumb-inner" style="'+At+';"></span></span>')}else{var xt="sp-clear-display";De.push(s("<div />").append(s('<span data-color="" style="background-color:transparent;" class="'+xt+'"></span>').attr("title",Ye.noColorSelectedText)).html())}}return"<div class='sp-cf "+le+"'>"+De.join("")+"</div>"}function d(){for(var de=0;de<t.length;de++)t[de]&&t[de].hide()}function p(de,Ee){var le=s.extend({},e,de);return le.callbacks={move:v(le.move,Ee),change:v(le.change,Ee),show:v(le.show,Ee),hide:v(le.hide,Ee),beforeShow:v(le.beforeShow,Ee)},le}function h(de,Ee){var le=p(Ee,de),Ye=le.flat,De=le.showSelectionPalette,ct=le.localStorageKey,ot=le.theme,dt=le.callbacks,Ke=C(_s,10),kt=!1,At=!1,xt=!0,Xt=0,br=0,zt=0,be=0,Be=0,et=0,wt=0,$t=0,tr=0,Lr=0,tn=1,bn=[],Fr=[],rr={},wr=le.selectionPalette.slice(0),an=le.maxSelectionSize,En="sp-dragging",rn=null,kr=de.ownerDocument;kr.body;var jr=s(de),mt=!1,yr=s(l,kr).addClass(ot),An=yr.find(".sp-picker-container"),fn=yr.find(".sp-color"),wn=yr.find(".sp-dragger"),zr=yr.find(".sp-hue"),In=yr.find(".sp-slider"),ne=yr.find(".sp-alpha-inner"),ke=yr.find(".sp-alpha"),Re=yr.find(".sp-alpha-handle"),Ze=yr.find(".sp-input"),st=yr.find(".sp-palette"),Ct=yr.find(".sp-initial"),Xe=yr.find(".sp-cancel"),Ve=yr.find(".sp-clear"),je=yr.find(".sp-choose"),He=yr.find(".sp-palette-toggle"),at=jr.is("input"),Ot=at&&jr.attr("type")==="color"&&k(),ce=at&&!Ye,Te=ce?s(i).addClass(ot).addClass(le.className).addClass(le.replacerClassName):s([]),ut=ce?Te:jr,jt=Te.find(".sp-preview-inner"),Lt=le.color||at&&jr.val(),ur=!1,Br=le.preferredFormat,_t=!le.showButtons||le.clickoutFiresChange,Kr=!Lt,Zr=le.allowEmpty&&!Ot;function ps(){if(le.showPaletteOnly&&(le.showPalette=!0),He.text(le.showPaletteOnly?le.togglePaletteMoreText:le.togglePaletteLessText),le.palette){bn=le.palette.slice(0),Fr=s.isArray(bn[0])?bn:[bn],rr={};for(var Wr=0;Wr<Fr.length;Wr++)for(var qr=0;qr<Fr[Wr].length;qr++){var on=M(Fr[Wr][qr]).toRgbString();rr[on]=!0}}yr.toggleClass("sp-flat",Ye),yr.toggleClass("sp-input-disabled",!le.showInput),yr.toggleClass("sp-alpha-enabled",le.showAlpha),yr.toggleClass("sp-clear-enabled",Zr),yr.toggleClass("sp-buttons-disabled",!le.showButtons),yr.toggleClass("sp-palette-buttons-disabled",!le.togglePaletteOnly),yr.toggleClass("sp-palette-disabled",!le.showPalette),yr.toggleClass("sp-palette-only",le.showPaletteOnly),yr.toggleClass("sp-initial-disabled",!le.showInitial),yr.addClass(le.className).addClass(le.containerClassName),_s()}function Xn(){if(a&&yr.find("*:not(input)").attr("unselectable","on"),ps(),ce&&jr.after(Te).hide(),Zr||Ve.hide(),Ye)jr.after(yr).hide();else{var Wr=le.appendTo==="parent"?jr.parent():s(le.appendTo);Wr.length!==1&&(Wr=s("body")),Wr.append(yr)}ds(),ut.bind("click.spectrum touchstart.spectrum",function(nn){mt||ar(),nn.stopPropagation(),s(nn.target).is("input")||nn.preventDefault()}),(jr.is(":disabled")||le.disabled===!0)&&Kn(),yr.click(b),Ze.change(gt),Ze.bind("paste",function(){setTimeout(gt,1)}),Ze.keydown(function(nn){nn.keyCode==13&&gt()}),Xe.text(le.cancelText),Xe.bind("click.spectrum",function(nn){nn.stopPropagation(),nn.preventDefault(),$n(),jn()}),Ve.attr("title",le.clearText),Ve.bind("click.spectrum",function(nn){nn.stopPropagation(),nn.preventDefault(),Kr=!0,xa(),Ye&&Gn(!0)}),je.text(le.chooseText),je.bind("click.spectrum",function(nn){nn.stopPropagation(),nn.preventDefault(),a&&Ze.is(":focus")&&Ze.trigger("change"),so()&&(Gn(!0),jn())}),He.text(le.showPaletteOnly?le.togglePaletteMoreText:le.togglePaletteLessText),He.bind("click.spectrum",function(nn){nn.stopPropagation(),nn.preventDefault(),le.showPaletteOnly=!le.showPaletteOnly,!le.showPaletteOnly&&!Ye&&yr.css("left","-="+(An.outerWidth(!0)+5)),ps()}),w(ke,function(nn,Ie,it){tn=nn/Be,Kr=!1,it.shiftKey&&(tn=Math.round(tn*10)/10),xa()},Ir,_r),w(zr,function(nn,Ie){$t=parseFloat(Ie/be),Kr=!1,le.showAlpha||(tn=1),xa()},Ir,_r),w(fn,function(nn,Ie,it){if(!it.shiftKey)rn=null;else if(!rn){var Et=tr*Xt,Mt=br-Lr*br,Pt=Math.abs(nn-Et)>Math.abs(Ie-Mt);rn=Pt?"x":"y"}var or=!rn||rn==="x",Vt=!rn||rn==="y";or&&(tr=parseFloat(nn/Xt)),Vt&&(Lr=parseFloat((br-Ie)/br)),Kr=!1,le.showAlpha||(tn=1),xa()},Ir,_r),Lt?(Fn(Lt),qn(),Br=le.preferredFormat||M(Lt).getFormat(),Ea(Lt)):qn(),Ye&&Or();function qr(nn){return nn.data&&nn.data.ignore?(Fn(s(nn.target).closest(".sp-thumb-el").data("color")),xa()):(Fn(s(nn.target).closest(".sp-thumb-el").data("color")),xa(),le.hideAfterPaletteSelect&&(Gn(!0),jn())),!1}var on=a?"mousedown.spectrum":"click.spectrum touchstart.spectrum";st.delegate(".sp-thumb-el",on,qr),Ct.delegate(".sp-thumb-el:nth-child(1)",on,{ignore:!0},qr)}function ds(){if(ct&&window.localStorage){try{var Wr=window.localStorage[ct].split(",#");Wr.length>1&&(delete window.localStorage[ct],s.each(Wr,function(qr,on){Ea(on)}))}catch{}try{wr=window.localStorage[ct].split(";")}catch{}}}function Ea(Wr){if(De){var qr=M(Wr).toRgbString();if(!rr[qr]&&s.inArray(qr,wr)===-1)for(wr.push(qr);wr.length>an;)wr.shift();if(ct&&window.localStorage)try{window.localStorage[ct]=wr.join(";")}catch{}}}function sa(){var Wr=[];if(le.showPalette)for(var qr=0;qr<wr.length;qr++){var on=M(wr[qr]).toRgbString();rr[on]||Wr.push(wr[qr])}return Wr.reverse().slice(0,le.maxSelectionSize)}function Is(){var Wr=Wn(),qr=s.map(Fr,function(on,nn){return c(on,Wr,"sp-palette-row sp-palette-row-"+nn,le)});ds(),wr&&qr.push(c(sa(),Wr,"sp-palette-row sp-palette-row-selection",le)),st.html(qr.join(""))}function ya(){if(le.showInitial){var Wr=ur,qr=Wn();Ct.html(c([Wr,qr],qr,"sp-palette-row-initial",le))}}function Ir(){(br<=0||Xt<=0||be<=0)&&_s(),At=!0,yr.addClass(En),rn=null,jr.trigger("dragstart.spectrum",[Wn()])}function _r(){At=!1,yr.removeClass(En),jr.trigger("dragstop.spectrum",[Wn()])}function gt(){var Wr=Ze.val();if((Wr===null||Wr==="")&&Zr)Fn(null),Gn(!0);else{var qr=M(Wr);qr.isValid()?(Fn(qr),Gn(!0)):Ze.addClass("sp-validation-error")}}function ar(){kt?jn():Or()}function Or(){var Wr=s.Event("beforeShow.spectrum");if(kt){_s();return}if(jr.trigger("beforeShow.spectrum",[Wn()]),!(dt.beforeShow(Wn())===!1||Wr.isDefaultPrevented())){d(),kt=!0;var qr=s(kr);qr.bind("keydown.spectrum",Mr),qr.bind("click.spectrum",Sn),s(window).bind("resize.spectrum",Ke),Te.addClass("sp-active"),yr.removeClass("sp-hidden"),_s(),qn(),ur=Wn(),ya(),dt.show(ur),jr.trigger("show.spectrum",[ur])}}function Mr(Wr){Wr.keyCode===27&&jn()}function Sn(Wr){Wr.button!=2&&(At||(_t?Gn(!0):$n(),jn()))}function jn(){!kt||Ye||(kt=!1,s(kr).unbind("keydown.spectrum",Mr),s(kr).unbind("click.spectrum",Sn),s(window).unbind("resize.spectrum",Ke),Te.removeClass("sp-active"),yr.addClass("sp-hidden"),dt.hide(Wn()),jr.trigger("hide.spectrum",[Wn()]))}function $n(){Fn(ur,!0)}function Fn(Wr,qr){if(M.equals(Wr,Wn())){qn();return}var on,nn;!Wr&&Zr?Kr=!0:(Kr=!1,xt=!Wr,on=M(Wr),nn=on.toHsv(),$t=nn.h%360/360,tr=nn.s,Lr=nn.v,tn=nn.a),qn(),on&&on.isValid()&&!qr&&(Br=le.preferredFormat||on.getFormat())}function Wn(Wr){return Wr=Wr||{},Zr&&Kr?null:M.fromRatio({h:$t,s:tr,v:Lr,a:Math.round(tn*100)/100},{format:Wr.format||Br})}function so(){return!Ze.hasClass("sp-validation-error")}function xa(){qn(),dt.move(Wn()),jr.trigger("move.spectrum",[Wn()])}function qn(){Ze.removeClass("sp-validation-error"),Vn();var Wr=M.fromRatio({h:$t,s:1,v:1});fn.css("background-color",Wr.toHexString());var qr=Br;tn<1&&!(tn===0&&qr==="name")&&(qr==="hex"||qr==="hex3"||qr==="hex6"||qr==="name")&&(qr="rgb");var on=Wn({format:qr}),nn="";if(jt.removeClass("sp-clear-display"),jt.css("background-color","transparent"),!on&&Zr)jt.addClass("sp-clear-display");else{var Ie=on.toHexString(),it=on.toRgbString();if(o||on.alpha===1?jt.css("background-color",it):(jt.css("background-color","transparent"),jt.css("filter",on.toFilter())),le.showAlpha){var Et=on.toRgb();Et.a=0;var Mt=M(Et).toRgbString(),Pt="linear-gradient(left, "+Mt+", "+Ie+")";a?ne.css("filter",M(Mt).toFilter({gradientType:1},Ie)):(ne.css("background","-webkit-"+Pt),ne.css("background","-moz-"+Pt),ne.css("background","-ms-"+Pt),ne.css("background","linear-gradient(to right, "+Mt+", "+Ie+")"))}nn=on.toString(qr)}le.showInput&&Ze.val(nn),le.showPalette&&Is(),ya()}function Vn(){var Wr=tr,qr=Lr;if(Zr&&Kr)Re.hide(),In.hide(),wn.hide();else{Re.show(),In.show(),wn.show();var on=Wr*Xt,nn=br-qr*br;on=Math.max(-zt,Math.min(Xt-zt,on-zt)),nn=Math.max(-zt,Math.min(br-zt,nn-zt)),wn.css({top:nn+"px",left:on+"px"});var Ie=tn*Be;Re.css({left:Ie-et/2+"px"});var it=$t*be;In.css({top:it-wt+"px"})}}function Gn(Wr){var qr=Wn(),on="",nn=xt?!0:!M.equals(qr,ur);qr&&(on=qr.toString(Br),!kt&&Ea(qr)),at&&jr.val(on),Wr&&nn&&(dt.change(qr),jr.trigger("change",[qr]))}function _s(){kt&&(Xt=fn.width(),br=fn.height(),zt=wn.height(),zr.width(),be=zr.height(),wt=In.height(),Be=ke.width(),et=Re.width(),Ye||(yr.css("position","absolute"),le.offset?yr.offset(le.offset):yr.offset(g(yr,ut))),Vn(),le.showPalette&&Is(),jr.trigger("reflow.spectrum"))}function Ta(){jr.show(),ut.unbind("click.spectrum touchstart.spectrum"),yr.remove(),Te.remove(),t[aa.id]=null}function Fs(Wr,qr){if(Wr===r)return s.extend({},le);if(qr===r)return le[Wr];le[Wr]=qr,Wr==="preferredFormat"&&(Br=le.preferredFormat),ps()}function vs(){mt=!1,jr.attr("disabled",!1),ut.removeClass("sp-disabled")}function Kn(){jn(),mt=!0,jr.attr("disabled",!0),ut.addClass("sp-disabled")}function Rs(Wr){le.offset=Wr,_s()}Xn();var aa={show:Or,hide:jn,toggle:ar,reflow:_s,option:Fs,enable:vs,disable:Kn,offset:Rs,set:function(Wr){Fn(Wr),Gn()},get:Wn,destroy:Ta,container:yr};return aa.id=t.push(aa)-1,aa}function g(de,Ee){for(var le=Ee[0],Ye=de[0],De=Ye.parentElement,ct=le.getBoundingClientRect(),ot=Ye.offsetWidth,dt=Ye.offsetHeight,Ke={top:0,left:0,width:le.offsetWidth,height:le.offsetHeight};le&&(Ke.top+=le.offsetTop-le.scrollTop,Ke.left+=le.offsetLeft-le.scrollLeft,!(le===De||!De.contains(le.offsetParent)));)le=le.offsetParent;return ct.right+ot>window.innerWidth-window.scrollX&&ct.right-ot>0&&(Ke.left-=ot-Ke.width),ct.bottom+dt<window.innerHeight-window.scrollY?Ke.top+=Ke.height:Ke.top-=dt,Ke}function y(){}function b(de){de.stopPropagation()}function v(de,Ee){var le=Array.prototype.slice,Ye=le.call(arguments,2);return function(){return de.apply(Ee,Ye.concat(le.call(arguments)))}}function w(de,Ee,le,Ye){Ee=Ee||function(){},le=le||function(){},Ye=Ye||function(){};var De=document,ct=!1,ot={},dt=0,Ke=0,kt="ontouchstart"in window,At={};At.selectstart=xt,At.dragstart=xt,At["touchmove mousemove"]=Xt,At["touchend mouseup"]=zt;function xt(be){be.stopPropagation&&be.stopPropagation(),be.preventDefault&&be.preventDefault(),be.returnValue=!1}function Xt(be){if(ct){if(a&&De.documentMode<9&&!be.button)return zt();var Be=be&&be.touches&&be.touches[0],et=Be&&Be.pageX||be.pageX,wt=Be&&Be.pageY||be.pageY,$t=Math.max(0,Math.min(et-ot.left,Ke)),tr=Math.max(0,Math.min(wt-ot.top,dt));kt&&xt(be),Ee.apply(de,[$t,tr,be])}}function br(be){var Be=be.which?be.which==3:be.button==2;!Be&&!ct&&le.apply(de,arguments)!==!1&&(ct=!0,dt=s(de).height(),Ke=s(de).width(),ot=s(de).offset(),s(De).bind(At),s(De.body).addClass("sp-dragging"),Xt(be),xt(be))}function zt(){ct&&(s(De).unbind(At),s(De.body).removeClass("sp-dragging"),setTimeout(function(){Ye.apply(de,arguments)},0)),ct=!1}s(de).bind("touchstart mousedown",br)}function C(de,Ee,le){var Ye;return function(){var De=this,ct=arguments,ot=function(){Ye=null,de.apply(De,ct)};Ye||(Ye=setTimeout(ot,Ee))}}function k(){return s.fn.spectrum.inputTypeColorSupport()}var N="spectrum.id";s.fn.spectrum=function(de,Ee){if(typeof de=="string"){var le=this,Ye=Array.prototype.slice.call(arguments,1);return this.each(function(){var De=t[s(this).data(N)];if(De){var ct=De[de];if(!ct)throw new Error("Spectrum: no such method: '"+de+"'");de=="get"?le=De.get():de=="container"?le=De.container:de=="option"?le=De.option.apply(De,Ye):de=="destroy"?(De.destroy(),s(this).removeData(N)):ct.apply(De,Ye)}}),le}return this.spectrum("destroy").each(function(){var De=s.extend({},de,s(this).data()),ct=h(this,De);s(this).data(N,ct.id)})},s.fn.spectrum.load=!0,s.fn.spectrum.loadOpts={},s.fn.spectrum.draggable=w,s.fn.spectrum.defaults=e,s.fn.spectrum.inputTypeColorSupport=function de(){if(typeof de._cachedResult>"u"){var Ee=s("<input type='color'/>")[0];de._cachedResult=Ee.type==="color"&&Ee.value!==""}return de._cachedResult},s.spectrum={},s.spectrum.localization={},s.spectrum.palettes={},s.fn.spectrum.processNativeColorInputs=function(){var de=s("input[type=color]");de.length&&!k()&&de.spectrum({preferredFormat:"hex6"})};var O=/^[\s,#]+/,R=/\s+$/,L=0,B=Math,G=B.round,$=B.min,z=B.max,Y=B.random,M=function(de,Ee){if(de=de||"",Ee=Ee||{},de instanceof M)return de;if(!(this instanceof M))return new M(de,Ee);var le=q(de);this._originalInput=de,this._r=le.r,this._g=le.g,this._b=le.b,this._a=le.a,this._roundA=G(100*this._a)/100,this._format=Ee.format||le.format,this._gradientType=Ee.gradientType,this._r<1&&(this._r=G(this._r)),this._g<1&&(this._g=G(this._g)),this._b<1&&(this._b=G(this._b)),this._ok=le.ok,this._tc_id=L++};M.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var de=this.toRgb();return(de.r*299+de.g*587+de.b*114)/1e3},setAlpha:function(de){return this._a=J(de),this._roundA=G(100*this._a)/100,this},toHsv:function(){var de=X(this._r,this._g,this._b);return{h:de.h*360,s:de.s,v:de.v,a:this._a}},toHsvString:function(){var de=X(this._r,this._g,this._b),Ee=G(de.h*360),le=G(de.s*100),Ye=G(de.v*100);return this._a==1?"hsv("+Ee+", "+le+"%, "+Ye+"%)":"hsva("+Ee+", "+le+"%, "+Ye+"%, "+this._roundA+")"},toHsl:function(){var de=H(this._r,this._g,this._b);return{h:de.h*360,s:de.s,l:de.l,a:this._a}},toHslString:function(){var de=H(this._r,this._g,this._b),Ee=G(de.h*360),le=G(de.s*100),Ye=G(de.l*100);return this._a==1?"hsl("+Ee+", "+le+"%, "+Ye+"%)":"hsla("+Ee+", "+le+"%, "+Ye+"%, "+this._roundA+")"},toHex:function(de){return Q(this._r,this._g,this._b,de)},toHexString:function(de){return"#"+this.toHex(de)},toHex8:function(){return xe(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:G(this._r),g:G(this._g),b:G(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+G(this._r)+", "+G(this._g)+", "+G(this._b)+")":"rgba("+G(this._r)+", "+G(this._g)+", "+G(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:G(I(this._r,255)*100)+"%",g:G(I(this._g,255)*100)+"%",b:G(I(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+G(I(this._r,255)*100)+"%, "+G(I(this._g,255)*100)+"%, "+G(I(this._b,255)*100)+"%)":"rgba("+G(I(this._r,255)*100)+"%, "+G(I(this._g,255)*100)+"%, "+G(I(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:ue[Q(this._r,this._g,this._b,!0)]||!1},toFilter:function(de){var Ee="#"+xe(this._r,this._g,this._b,this._a),le=Ee,Ye=this._gradientType?"GradientType = 1, ":"";if(de){var De=M(de);le=De.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+Ye+"startColorstr="+Ee+",endColorstr="+le+")"},toString:function(de){var Ee=!!de;de=de||this._format;var le=!1,Ye=this._a<1&&this._a>=0,De=!Ee&&Ye&&(de==="hex"||de==="hex6"||de==="hex3"||de==="name");return De?de==="name"&&this._a===0?this.toName():this.toRgbString():(de==="rgb"&&(le=this.toRgbString()),de==="prgb"&&(le=this.toPercentageRgbString()),(de==="hex"||de==="hex6")&&(le=this.toHexString()),de==="hex3"&&(le=this.toHexString(!0)),de==="hex8"&&(le=this.toHex8String()),de==="name"&&(le=this.toName()),de==="hsl"&&(le=this.toHslString()),de==="hsv"&&(le=this.toHsvString()),le||this.toHexString())},_applyModification:function(de,Ee){var le=de.apply(null,[this].concat([].slice.call(Ee)));return this._r=le._r,this._g=le._g,this._b=le._b,this.setAlpha(le._a),this},lighten:function(){return this._applyModification(ae,arguments)},brighten:function(){return this._applyModification(Se,arguments)},darken:function(){return this._applyModification(Pe,arguments)},desaturate:function(){return this._applyModification(K,arguments)},saturate:function(){return this._applyModification(Z,arguments)},greyscale:function(){return this._applyModification(ve,arguments)},spin:function(){return this._applyModification($e,arguments)},_applyCombination:function(de,Ee){return de.apply(null,[this].concat([].slice.call(Ee)))},analogous:function(){return this._applyCombination(Ue,arguments)},complement:function(){return this._applyCombination(we,arguments)},monochromatic:function(){return this._applyCombination(ht,arguments)},splitcomplement:function(){return this._applyCombination(Ge,arguments)},triad:function(){return this._applyCombination(Ae,arguments)},tetrad:function(){return this._applyCombination(ze,arguments)}},M.fromRatio=function(de,Ee){if(typeof de=="object"){var le={};for(var Ye in de)de.hasOwnProperty(Ye)&&(Ye==="a"?le[Ye]=de[Ye]:le[Ye]=he(de[Ye]));de=le}return M(de,Ee)};function q(de){var Ee={r:0,g:0,b:0},le=1,Ye=!1,De=!1;return typeof de=="string"&&(de=Qe(de)),typeof de=="object"&&(de.hasOwnProperty("r")&&de.hasOwnProperty("g")&&de.hasOwnProperty("b")?(Ee=P(de.r,de.g,de.b),Ye=!0,De=String(de.r).substr(-1)==="%"?"prgb":"rgb"):de.hasOwnProperty("h")&&de.hasOwnProperty("s")&&de.hasOwnProperty("v")?(de.s=he(de.s),de.v=he(de.v),Ee=se(de.h,de.s,de.v),Ye=!0,De="hsv"):de.hasOwnProperty("h")&&de.hasOwnProperty("s")&&de.hasOwnProperty("l")&&(de.s=he(de.s),de.l=he(de.l),Ee=D(de.h,de.s,de.l),Ye=!0,De="hsl"),de.hasOwnProperty("a")&&(le=de.a)),le=J(le),{ok:Ye,format:de.format||De,r:$(255,z(Ee.r,0)),g:$(255,z(Ee.g,0)),b:$(255,z(Ee.b,0)),a:le}}function P(de,Ee,le){return{r:I(de,255)*255,g:I(Ee,255)*255,b:I(le,255)*255}}function H(de,Ee,le){de=I(de,255),Ee=I(Ee,255),le=I(le,255);var Ye=z(de,Ee,le),De=$(de,Ee,le),ct,ot,dt=(Ye+De)/2;if(Ye==De)ct=ot=0;else{var Ke=Ye-De;switch(ot=dt>.5?Ke/(2-Ye-De):Ke/(Ye+De),Ye){case de:ct=(Ee-le)/Ke+(Ee<le?6:0);break;case Ee:ct=(le-de)/Ke+2;break;case le:ct=(de-Ee)/Ke+4;break}ct/=6}return{h:ct,s:ot,l:dt}}function D(de,Ee,le){var Ye,De,ct;de=I(de,360),Ee=I(Ee,100),le=I(le,100);function ot(kt,At,xt){return xt<0&&(xt+=1),xt>1&&(xt-=1),xt<1/6?kt+(At-kt)*6*xt:xt<1/2?At:xt<2/3?kt+(At-kt)*(2/3-xt)*6:kt}if(Ee===0)Ye=De=ct=le;else{var dt=le<.5?le*(1+Ee):le+Ee-le*Ee,Ke=2*le-dt;Ye=ot(Ke,dt,de+1/3),De=ot(Ke,dt,de),ct=ot(Ke,dt,de-1/3)}return{r:Ye*255,g:De*255,b:ct*255}}function X(de,Ee,le){de=I(de,255),Ee=I(Ee,255),le=I(le,255);var Ye=z(de,Ee,le),De=$(de,Ee,le),ct,ot,dt=Ye,Ke=Ye-De;if(ot=Ye===0?0:Ke/Ye,Ye==De)ct=0;else{switch(Ye){case de:ct=(Ee-le)/Ke+(Ee<le?6:0);break;case Ee:ct=(le-de)/Ke+2;break;case le:ct=(de-Ee)/Ke+4;break}ct/=6}return{h:ct,s:ot,v:dt}}function se(de,Ee,le){de=I(de,360)*6,Ee=I(Ee,100),le=I(le,100);var Ye=B.floor(de),De=de-Ye,ct=le*(1-Ee),ot=le*(1-De*Ee),dt=le*(1-(1-De)*Ee),Ke=Ye%6,kt=[le,ot,ct,ct,dt,le][Ke],At=[dt,le,le,ot,ct,ct][Ke],xt=[ct,ct,dt,le,le,ot][Ke];return{r:kt*255,g:At*255,b:xt*255}}function Q(de,Ee,le,Ye){var De=[Ce(G(de).toString(16)),Ce(G(Ee).toString(16)),Ce(G(le).toString(16))];return Ye&&De[0].charAt(0)==De[0].charAt(1)&&De[1].charAt(0)==De[1].charAt(1)&&De[2].charAt(0)==De[2].charAt(1)?De[0].charAt(0)+De[1].charAt(0)+De[2].charAt(0):De.join("")}function xe(de,Ee,le,Ye){var De=[Ce(ie(Ye)),Ce(G(de).toString(16)),Ce(G(Ee).toString(16)),Ce(G(le).toString(16))];return De.join("")}M.equals=function(de,Ee){return!de||!Ee?!1:M(de).toRgbString()==M(Ee).toRgbString()},M.random=function(){return M.fromRatio({r:Y(),g:Y(),b:Y()})};function K(de,Ee){Ee=Ee===0?0:Ee||10;var le=M(de).toHsl();return le.s-=Ee/100,le.s=V(le.s),M(le)}function Z(de,Ee){Ee=Ee===0?0:Ee||10;var le=M(de).toHsl();return le.s+=Ee/100,le.s=V(le.s),M(le)}function ve(de){return M(de).desaturate(100)}function ae(de,Ee){Ee=Ee===0?0:Ee||10;var le=M(de).toHsl();return le.l+=Ee/100,le.l=V(le.l),M(le)}function Se(de,Ee){Ee=Ee===0?0:Ee||10;var le=M(de).toRgb();return le.r=z(0,$(255,le.r-G(255*-(Ee/100)))),le.g=z(0,$(255,le.g-G(255*-(Ee/100)))),le.b=z(0,$(255,le.b-G(255*-(Ee/100)))),M(le)}function Pe(de,Ee){Ee=Ee===0?0:Ee||10;var le=M(de).toHsl();return le.l-=Ee/100,le.l=V(le.l),M(le)}function $e(de,Ee){var le=M(de).toHsl(),Ye=(G(le.h)+Ee)%360;return le.h=Ye<0?360+Ye:Ye,M(le)}function we(de){var Ee=M(de).toHsl();return Ee.h=(Ee.h+180)%360,M(Ee)}function Ae(de){var Ee=M(de).toHsl(),le=Ee.h;return[M(de),M({h:(le+120)%360,s:Ee.s,l:Ee.l}),M({h:(le+240)%360,s:Ee.s,l:Ee.l})]}function ze(de){var Ee=M(de).toHsl(),le=Ee.h;return[M(de),M({h:(le+90)%360,s:Ee.s,l:Ee.l}),M({h:(le+180)%360,s:Ee.s,l:Ee.l}),M({h:(le+270)%360,s:Ee.s,l:Ee.l})]}function Ge(de){var Ee=M(de).toHsl(),le=Ee.h;return[M(de),M({h:(le+72)%360,s:Ee.s,l:Ee.l}),M({h:(le+216)%360,s:Ee.s,l:Ee.l})]}function Ue(de,Ee,le){Ee=Ee||6,le=le||30;var Ye=M(de).toHsl(),De=360/le,ct=[M(de)];for(Ye.h=(Ye.h-(De*Ee>>1)+720)%360;--Ee;)Ye.h=(Ye.h+De)%360,ct.push(M(Ye));return ct}function ht(de,Ee){Ee=Ee||6;for(var le=M(de).toHsv(),Ye=le.h,De=le.s,ct=le.v,ot=[],dt=1/Ee;Ee--;)ot.push(M({h:Ye,s:De,v:ct})),ct=(ct+dt)%1;return ot}M.mix=function(de,Ee,le){le=le===0?0:le||50;var Ye=M(de).toRgb(),De=M(Ee).toRgb(),ct=le/100,ot=ct*2-1,dt=De.a-Ye.a,Ke;ot*dt==-1?Ke=ot:Ke=(ot+dt)/(1+ot*dt),Ke=(Ke+1)/2;var kt=1-Ke,At={r:De.r*Ke+Ye.r*kt,g:De.g*Ke+Ye.g*kt,b:De.b*Ke+Ye.b*kt,a:De.a*ct+Ye.a*(1-ct)};return M(At)},M.readability=function(de,Ee){var le=M(de),Ye=M(Ee),De=le.toRgb(),ct=Ye.toRgb(),ot=le.getBrightness(),dt=Ye.getBrightness(),Ke=Math.max(De.r,ct.r)-Math.min(De.r,ct.r)+Math.max(De.g,ct.g)-Math.min(De.g,ct.g)+Math.max(De.b,ct.b)-Math.min(De.b,ct.b);return{brightness:Math.abs(ot-dt),color:Ke}},M.isReadable=function(de,Ee){var le=M.readability(de,Ee);return le.brightness>125&&le.color>500},M.mostReadable=function(de,Ee){for(var le=null,Ye=0,De=!1,ct=0;ct<Ee.length;ct++){var ot=M.readability(de,Ee[ct]),dt=ot.brightness>125&&ot.color>500,Ke=3*(ot.brightness/125)+ot.color/500;(dt&&!De||dt&&De&&Ke>Ye||!dt&&!De&&Ke>Ye)&&(De=dt,Ye=Ke,le=M(Ee[ct]))}return le};var ee=M.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},ue=M.hexNames=Oe(ee);function Oe(de){var Ee={};for(var le in de)de.hasOwnProperty(le)&&(Ee[de[le]]=le);return Ee}function J(de){return de=parseFloat(de),(isNaN(de)||de<0||de>1)&&(de=1),de}function I(de,Ee){pe(de)&&(de="100%");var le=ge(de);return de=$(Ee,z(0,parseFloat(de))),le&&(de=parseInt(de*Ee,10)/100),B.abs(de-Ee)<1e-6?1:de%Ee/parseFloat(Ee)}function V(de){return $(1,z(0,de))}function re(de){return parseInt(de,16)}function pe(de){return typeof de=="string"&&de.indexOf(".")!=-1&&parseFloat(de)===1}function ge(de){return typeof de=="string"&&de.indexOf("%")!=-1}function Ce(de){return de.length==1?"0"+de:""+de}function he(de){return de<=1&&(de=de*100+"%"),de}function ie(de){return Math.round(parseFloat(de)*255).toString(16)}function Fe(de){return re(de)/255}var We=(function(){var de="[-\\+]?\\d+%?",Ee="[-\\+]?\\d*\\.\\d+%?",le="(?:"+Ee+")|(?:"+de+")",Ye="[\\s|\\(]+("+le+")[,|\\s]+("+le+")[,|\\s]+("+le+")\\s*\\)?",De="[\\s|\\(]+("+le+")[,|\\s]+("+le+")[,|\\s]+("+le+")[,|\\s]+("+le+")\\s*\\)?";return{rgb:new RegExp("rgb"+Ye),rgba:new RegExp("rgba"+De),hsl:new RegExp("hsl"+Ye),hsla:new RegExp("hsla"+De),hsv:new RegExp("hsv"+Ye),hsva:new RegExp("hsva"+De),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function Qe(de){de=de.replace(O,"").replace(R,"").toLowerCase();var Ee=!1;if(ee[de])de=ee[de],Ee=!0;else if(de=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var le;return(le=We.rgb.exec(de))?{r:le[1],g:le[2],b:le[3]}:(le=We.rgba.exec(de))?{r:le[1],g:le[2],b:le[3],a:le[4]}:(le=We.hsl.exec(de))?{h:le[1],s:le[2],l:le[3]}:(le=We.hsla.exec(de))?{h:le[1],s:le[2],l:le[3],a:le[4]}:(le=We.hsv.exec(de))?{h:le[1],s:le[2],v:le[3]}:(le=We.hsva.exec(de))?{h:le[1],s:le[2],v:le[3],a:le[4]}:(le=We.hex8.exec(de))?{a:Fe(le[1]),r:re(le[2]),g:re(le[3]),b:re(le[4]),format:Ee?"name":"hex8"}:(le=We.hex6.exec(de))?{r:re(le[1]),g:re(le[2]),b:re(le[3]),format:Ee?"name":"hex"}:(le=We.hex3.exec(de))?{r:re(le[1]+""+le[1]),g:re(le[2]+""+le[2]),b:re(le[3]+""+le[3]),format:Ee?"name":"hex"}:!1}window.tinycolor=M,s(function(){s.fn.spectrum.load&&s.fn.spectrum.processNativeColorInputs()})}var uY=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),YA=(function(s){uY(r,s);function r(e){e===void 0&&(e={});var t=s.call(this,e)||this,a=e.ppfx||"";return t.opts=e,t.ppfx=a,t.em=e.target||{},!e.onChange&&t.listenTo(t.model,"change:value",t.handleModelChange),t}return r.prototype.template=function(){return'<span class="'.concat(this.holderClass(),'"></span>')},r.prototype.inputClass=function(){return"".concat(this.ppfx,"field")},r.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},r.prototype.elementUpdated=function(){this.model.trigger("el:change")},r.prototype.setValue=function(e,t){var a=this.model,o=e||a.get("defaults"),i=this.getInputEl();i&&(i.value=o)},r.prototype.handleModelChange=function(e,t,a){this.setValue(t,a)},r.prototype.handleChange=function(e){e.stopPropagation();var t=this.getInputEl().value;this.__onInputChange(t),this.elementUpdated()},r.prototype.__onInputChange=function(e){this.model.set({value:e},{fromInput:1})},r.prototype.getInputEl=function(){if(!this.inputEl){var e=this,t=e.model,a=e.opts,o=a.type||"text",i=t.get("placeholder")||t.get("defaults")||t.get("default")||"";this.inputEl=(0,go.default)('<input type="'.concat(o,'" placeholder="').concat(i,'">'))}return this.inputEl.get(0)},r.prototype.render=function(){this.inputEl=null;var e=this.$el;return e.addClass(this.inputClass()),e.html(this.template()),e.find(".".concat(this.holderClass())).append(this.getInputEl()),this},r})(Sr.Ss);const Gb=YA;YA.prototype.events={change:"handleChange"};var fY=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Ry=function(){return Ry=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Ry.apply(this,arguments)};go.default&&dY(go.default);var dv=function(s){var r=s.getFormat()==="name"&&s.toName(),e=s.getAlpha()==1?s.toHexString():s.toRgbString();return r||e.replace(/ /g,"")},pY=(function(s){fY(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.template=function(){var e=this.ppfx;return`
      <div class="`.concat(this.holderClass(),`"></div>
      <div class="`).concat(e,`field-colorp">
        <div class="`).concat(e,`field-colorp-c" data-colorp-c>
          <div class="`).concat(e,`checker-bg"></div>
        </div>
      </div>
    `)},r.prototype.inputClass=function(){var e=this.ppfx;return"".concat(e,"field ").concat(e,"field-color")},r.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},r.prototype.remove=function(){return s.prototype.remove.call(this),this.colorEl.spectrum("destroy"),this},r.prototype.handleChange=function(e){e.stopPropagation();var t=e.target.value;(0,_e.isUndefined)(t)||this.__onInputChange(t)},r.prototype.__onInputChange=function(e){var t=this,a=t.model,o=t.opts,i=o.onChange,l=e,c=this.getColorEl();if(c){c.spectrum("set",l);var d=c.spectrum("get"),p=l&&dv(d);p&&(l=p)}i?i(l):a.set({value:l},{fromInput:1})},r.prototype.setValue=function(e,t){t===void 0&&(t={});var a=this.model,o=(0,_e.isUndefined)(t.def)?a.get("defaults"):t.def,i=(0,_e.isUndefined)(e)?(0,_e.isUndefined)(o)?"":o:e,l=this.getInputEl(),c=this.getColorEl(),d=i!="none"?i:"";l.value=i,c.get(0).style.backgroundColor=d,(t.fromTarget||t.fromInput&&!t.avoidStore)&&(c.spectrum("set",d),this.noneColor=i=="none",this.movedColor=d)},r.prototype.getColorEl=function(){var e=this;if(!this.colorEl){var t=this,a=t.em,o=t.model,i=t.opts,l=this.ppfx,c=i.onChange,d=(0,go.default)('<div class="'.concat(this.ppfx,'field-color-picker"></div>')),p=d.get(0).style,h=a&&a.getConfig&&a.getConfig().colorPicker||{};this.movedColor="";var g=!1,y;this.$el.find("[data-colorp-c]").append(d);var b=function(v,w){w===void 0&&(w=!0),c?c(v,!w):(w&&o.setValueFromInput(0,!1),o.setValueFromInput(v,w))};d.spectrum(Ry(Ry(Ry({color:o.getValue()||!1,containerClassName:"".concat(l,"one-bg ").concat(l,"two-color ").concat(l,"editor-sp"),maxSelectionSize:8,showPalette:!0,showAlpha:!0,chooseText:"Ok",cancelText:"",palette:[]},h),o.get("colorPicker")||{}),{move:function(v){var w=dv(v);e.movedColor=w,p.backgroundColor=w,b(w,!1)},change:function(v){g=!0;var w=dv(v);p.backgroundColor=w,b(w),e.noneColor=!1},show:function(v){g=!1,e.movedColor="",y=c?o.getValue({noDefault:!0}):dv(v)},hide:function(){!g&&(y||c)&&(e.noneColor&&(y=""),p.backgroundColor=y,d.spectrum("set",y),b(y,!1))}})),a&&a.on&&this.listenTo(a,"component:selected",function(){e.movedColor&&b(e.movedColor),g=!0,e.movedColor="",d.spectrum("hide")}),this.colorEl=d}return this.colorEl},r.prototype.render=function(){return Gb.prototype.render.call(this),this.getColorEl(),this},r})(Gb);const ZA=pY;var hY=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),mY=(function(s){hY(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.templateInput=function(){return""},r.prototype.getInputEl=function(){if(!this.input){var e=this.model,t=this.getModelValue(),a=new ZA({model:e,target:this.config.em,contClass:this.ppfx+"field-color",ppfx:this.ppfx}),o=a.render();o.setValue(t,{fromTarget:1}),this.input=o.el}return this.input},r})(eu);const gY=mY;var yY=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),XA=(function(s){yY(r,s);function r(e){e===void 0&&(e={});var t=s.call(this,e)||this;return(0,_e.bindAll)(t,"moveIncrement","upIncrement"),t.doc=document,t.listenTo(t.model,"change:unit",t.handleModelChange),t}return r.prototype.template=function(){var e=this.ppfx;return`
      <span class="`.concat(e,`input-holder"></span>
      <span class="`).concat(e,`field-units"></span>
      <div class="`).concat(e,`field-arrows" data-arrows>
        <div class="`).concat(e,`field-arrow-u" data-arrow-up></div>
        <div class="`).concat(e,`field-arrow-d" data-arrow-down></div>
      </div>
    `)},r.prototype.inputClass=function(){var e=this.ppfx;return this.opts.contClass||"".concat(e,"field ").concat(e,"field-integer")},r.prototype.setValue=function(e,t){var a=t||{},o=this.validateInputValue(e,{deepCheck:1}),i={value:o.value,unit:""};(o.unit||o.force)&&(i.unit=o.unit),this.model.set(i,a),a.silent&&this.handleModelChange()},r.prototype.handleChange=function(e){e.stopPropagation(),this.setValue(this.getInputEl().value),this.elementUpdated()},r.prototype.handleUnitChange=function(e){e.stopPropagation();var t=this.getUnitEl().value;this.model.set("unit",t),this.elementUpdated()},r.prototype.handleKeyDown=function(e){e.key==="ArrowUp"&&(e.preventDefault(),this.upArrowClick()),e.key==="ArrowDown"&&(e.preventDefault(),this.downArrowClick())},r.prototype.elementUpdated=function(){this.model.trigger("el:change")},r.prototype.handleModelChange=function(){var e=this.model;this.getInputEl().value=e.get("value");var t=this.getUnitEl();t&&(t.value=e.get("unit")||"")},r.prototype.getUnitEl=function(){if(!this.unitEl){var e=this.model,t=e.get("units")||[];if(t.length){var a=['<option value="" disabled hidden>-</option>'];t.forEach(function(i){var l=i==e.get("unit")?"selected":"";a.push("<option ".concat(l,">").concat(i,"</option>"))});var o=document.createElement("div");o.innerHTML='<select class="'.concat(this.ppfx,'input-unit">').concat(a.join(""),"</select>"),this.unitEl=o.firstChild}}return this.unitEl},r.prototype.upArrowClick=function(){var e=this.model,t=e.get("step"),a=parseFloat(this.getInputEl().value);this.setValue(this.normalizeValue(a+t)),this.elementUpdated()},r.prototype.downArrowClick=function(){var e=this.model,t=e.get("step"),a=parseFloat(this.getInputEl().value);this.setValue(this.normalizeValue(a-t)),this.elementUpdated()},r.prototype.downIncrement=function(e){e.preventDefault(),this.moved=!1;var t=this.model.get("value")||0;t=this.normalizeValue(t),this.current={y:e.pageY,val:t},(0,Ar.on)(this.doc,"mousemove",this.moveIncrement),(0,Ar.on)(this.doc,"mouseup",this.upIncrement)},r.prototype.moveIncrement=function(e){this.moved=!0;var t=this.model,a=t.get("step"),o=this.current,i=this.normalizeValue(o.val+(o.y-e.pageY)*a),l=this.validateInputValue(i),c=l.value,d=l.unit;return this.prValue=c,t.set({value:c,unit:d},{avoidStore:1}),!1},r.prototype.upIncrement=function(){var e=this.model,t=e.get("step");if((0,Ar.AU)(this.doc,"mouseup",this.upIncrement),(0,Ar.AU)(this.doc,"mousemove",this.moveIncrement),this.prValue&&this.moved){var a=this.prValue-t;e.set("value",a,{avoidStore:1}).set("value",a+t),this.elementUpdated()}},r.prototype.normalizeValue=function(e,t){t===void 0&&(t=0);var a=this.model,o=a.get("step"),i=0;if(isNaN(e))return t;if(e=parseFloat(e),Math.floor(e)!==e){var l=o.toString().split(".")[1];i=l?l.length:0}return i?parseFloat(e.toFixed(i)):e},r.prototype.validateInputValue=function(e,t){t===void 0&&(t={});var a=0,o=t||{},i=this.model,l="",c=(0,_e.isUndefined)(e)?l:e,d=t.units||i.get("units")||[],p=i.get("unit")||d.length&&d[0]||"",h=(0,_e.isUndefined)(t.max)?i.get("max"):t.max,g=(0,_e.isUndefined)(t.min)?i.get("min"):t.min,y=!!i.get("limitlessMax"),b=!!i.get("limitlessMin");if(o.deepCheck){var v=i.get("fixedValues")||[];if(c===""&&(p=""),c){var w=new RegExp("^"+v.join("|"),"g");if(v.length&&w.test(c))c=c.match(w)[0],p="",a=1;else{var C=c+"";c+="",c=parseFloat(c.replace(",",".")),c=isNaN(c)?l:c;var k=C.replace(c,"");(0,_e.indexOf)(d,k)>=0&&(p=k)}}}return!isNaN(c)&&c!==""&&(!y&&!(0,_e.isUndefined)(h)&&h!==""&&(c=c>h?h:c),!b&&!(0,_e.isUndefined)(g)&&g!==""&&(c=c<g?g:c)),{force:a,value:c,unit:p}},r.prototype.render=function(){Gb.prototype.render.call(this),this.unitEl=null;var e=this.getUnitEl();return e&&this.$el.find(".".concat(this.ppfx,"field-units")).get(0).appendChild(e),this},r})(Gb);const QA=XA;XA.prototype.events={"change input":"handleChange","change select":"handleUnitChange","click [data-arrow-up]":"upArrowClick","click [data-arrow-down]":"downArrowClick","mousedown [data-arrows]":"downIncrement",keydown:"handleKeyDown"};var xY=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),vY=(function(s){xY(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.getValueForTarget=function(){var e=this.model,t=e.attributes,a=t.value,o=t.unit;return!(0,_e.isUndefined)(a)&&a!==""?a+o:e.get("default")},r.prototype.getInputEl=function(){if(!this.input){var e=this,t=e.ppfx,a=e.model,o=this.getModelValue(),i=new QA({contClass:"".concat(t,"field-int"),type:"number",model:a,ppfx:t});i.render(),this.$input=i.inputEl,this.$unit=i.unitEl,a.set("value",o,{fromTarget:!0}),this.$input.val(o),this.input=i.el}return this.input},r})(eu);const bY=vY;var wY=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),jY=(function(s){wY(r,s);function r(e){e===void 0&&(e={});var t=s.call(this,e)||this;return t.listenTo(t.model,"change:options",t.rerender),t}return r.prototype.templateInput=function(){var e=this,t=e.ppfx,a=e.clsField;return'<div class="'.concat(a,`">
      <div data-input></div>
      <div class="`).concat(t,`sel-arrow">
        <div class="`).concat(t,`d-s-arrow"></div>
      </div>
    </div>`)},r.prototype.getInputEl=function(){if(!this.$input){var e=this,t=e.model,a=e.em,o=t.get("name"),i=t.get("options")||[],l=[],c="<select>";i.forEach(function(h){var g="",y,b,v;(0,_e.isString)(h)?(y=h,b=h):(y=h.name||h.label||h.value,b="".concat((0,_e.isUndefined)(h.value)?h.id:h.value).replace(/"/g,"&quot;"),v=h.style?h.style.replace(/"/g,"&quot;"):"",g+=v?' style="'.concat(v,'"'):"");var w=a.t("traitManager.traits.options.".concat(o,".").concat(b))||y;c+='<option value="'.concat(b,'"').concat(g,">").concat(w,"</option>"),l.push(b)}),c+="</select>",this.$input=(0,go.default)(c);var d=t.getTargetValue(),p=l.indexOf(d)>=0?d:t.get("default");!(0,_e.isUndefined)(p)&&this.$input.val(p)}return this.$input.get(0)},r})(eu);const CY=jY;var SY=fs(8242),NY=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),QE="data-categories",JE="data-no-categories",JA=(function(s){NY(r,s);function r(e,t){var a=s.call(this,e)||this;a.reuseView=!0,a.renderedCategories=new Map,a.itemsView=t;var o=e.config||{};a.config=o;var i=e.editor;a.em=i;var l=o.pStylePrefix||"";return a.ppfx=l,a.pfx=l+o.stylePrefix||"",a.className="".concat(a.pfx,"traits"),a.traitContClass="".concat(l,"traits-c"),a.classNoCat="".concat(l,"traits-empty-c"),a.catsClass="".concat(l,"trait-categories"),a.collection=new vb([],{em:i}),a.listenTo(i,"component:toggled",a.updatedCollection),a.updatedCollection(),a}return r.prototype.updatedCollection=function(){var e=this,t=e.ppfx,a=e.em,o=a.getSelected();this.el.className="".concat(this.traitContClass,"s ").concat(t,"one-bg ").concat(t,"two-color"),this.collection=o?.traits||new vb([],{em:a}),this.render()},r.prototype.add=function(e,t){var a=this,o=a.config,i=a.renderedCategories,l=this.itemView,c=e.get(this.itemType);this.itemsView&&this.itemsView[c]&&(l=this.itemsView[c]);var d=new l({config:o,model:e,attributes:e.get("attributes")}),p=d.render().el,h=e.parent.initCategory(e);if(h){var g=h.getId(),y=this.getCategoriesEl(),b=i.get(g);!b&&y&&(b=new DA({model:h},o,"trait").render(),i.set(g,b),y.appendChild(b.el)),b?.append(p);return}t?t.appendChild(p):this.append(p)},r.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector("[".concat(QE,"]"))),this.catsEl},r.prototype.getTraitsEl=function(){return this.traitsEl||(this.traitsEl=this.el.querySelector("[".concat(JE,"]"))),this.traitsEl},r.prototype.append=function(e){var t=this.getTraitsEl();t?.appendChild(e)},r.prototype.render=function(){var e=this,t=this,a=t.el,o=t.ppfx,i=t.catsClass,l=t.traitContClass,c=t.classNoCat,d=document.createDocumentFragment();delete this.catsEl,delete this.traitsEl,this.renderedCategories=new Map,a.innerHTML=`
      <div class="`.concat(i,'" ').concat(QE,`></div>
      <div class="`).concat(c," ").concat(l,'" ').concat(JE,`></div>
    `),this.collection.forEach(function(h){return e.add(h,d)}),this.append(d);var p="".concat(l,"s ").concat(o,"one-bg ").concat(o,"two-color");return this.$el.addClass(p),this.rendered=!0,this},r})(SY.A);const eT=JA;JA.prototype.itemView=eu;var kY=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),_Y=function(s,r,e){if(e||arguments.length===2)for(var t=0,a=r.length,o;t<a;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return s.concat(o||Array.prototype.slice.call(r))},EY=(function(s){kY(r,s);function r(e){var t=s.call(this,e,"TraitManager",nY())||this;t.TraitsView=eT,t.events=gb,t.state=new Sr.Kx({traits:[]}),t.types={text:eu,number:bY,select:CY,checkbox:cY,color:gY,button:oY};var a=t,o=a.state,i=a.config,l=a.events,c=i.pStylePrefix;c&&(i.stylePrefix="".concat(c).concat(i.stylePrefix)),(0,_e.bindAll)(t,"__onSelect");var d=(0,_e.debounce)(function(){return t.__upSel()},0),p=(0,_e.debounce)(function(){return t.__onUp()},0);return o.listenTo(e,"component:toggled",d),o.listenTo(e,l.value,p),o.on("change:traits",t.__onSelect),t.debounced=[d,p],t}return r.prototype.select=function(e){var t=e?.getTraits()||[];this.state.set({component:e,traits:t}),this.__trgCustom()},r.prototype.getCategories=function(){var e,t=this.getComponent(),a=((e=t?.traits.categories)===null||e===void 0?void 0:e.models)||[];return _Y([],a,!0)},r.prototype.getTraits=function(){return this.getCurrent()},r.prototype.getTraitsByCategory=function(e){return gA(e||this.getTraits())},r.prototype.getComponent=function(){return this.state.attributes.component},r.prototype.addType=function(e,t){var a=this.getType("text");this.types[e]=a.extend(t)},r.prototype.getType=function(e){return this.getTypes()[e]},r.prototype.getTypes=function(){return this.types},r.prototype.getTraitsViewer=function(){return this.view},r.prototype.getCurrent=function(){return this.state.get("traits")||[]},r.prototype.render=function(){var e=this.view,t=this.em;return e=new eT({el:e?.el,collection:[],editor:t,config:this.getConfig()},this.getTypes()),this.view=e,e.el},r.prototype.postRender=function(){this.__appendTo()},r.prototype.__onSelect=function(){var e=this,t=e.em,a=e.events,o=e.state,i=o.attributes,l=i.component,c=i.traits;t.trigger(a.select,{component:l,traits:c})},r.prototype.__trgCustom=function(e){e===void 0&&(e={});var t=this,a=t.em,o=t.events,i=t.__ctn;this.__ctn=i||e.container,a.trigger(o.custom,this.__customData())},r.prototype.__customData=function(){return{container:this.__ctn}},r.prototype.__upSel=function(){this.select(this.em.getSelected())},r.prototype.__onUp=function(){this.select(this.getComponent())},r})(Di);const TY=EY;var OY=function(){return{stylePrefix:"",appendTo:"",sortable:!0,hidable:!0,hideTextnode:!0,root:"",showWrapper:!0,showHover:!0,scrollCanvas:{behavior:"smooth",block:"nearest"},scrollLayers:{behavior:"auto",block:"nearest"},highlightHover:!0,custom:!1,onInit:function(){},onRender:function(){},extend:{}}};const PY=OY;var aN;(function(s){s.root="layer:root",s.component="layer:component",s.custom="layer:custom"})(aN||(aN={}));var AY=fs(6756),MY=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),IY=(function(s){MY(r,s);function r(){var e=s!==null&&s.apply(this,arguments)||this;return e._dropAreaConfig={ratio:.4,minUndroppableDimension:3,maxUndroppableDimension:20},e}return Object.defineProperty(r.prototype,"view",{get:function(){return this.model.viewLayer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"element",{get:function(){var e;return(e=this.model.viewLayer)===null||e===void 0?void 0:e.el},enumerable:!1,configurable:!0}),r})(AY.h);const RY=IY;var DY=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),LY=(function(s){DY(r,s);function r(e){e===void 0&&(e={});var t=s.call(this,e)||this;t.items=[],t.opt=e;var a=e.config||{};t.config=a,t.module=e.module,t.parentView=e.parentView;var o=a.stylePrefix||"";a.pStylePrefix;var i=t.collection;t.listenTo(i,"add",t.addTo),t.listenTo(i,"reset resetNavigator",t.render),t.listenTo(i,"remove",t.removeChildren),t.className="".concat(o,"layers");var l=a.em;if(a.sortable&&!t.opt.sorter){var c=l.Utils,d=a.sortContainer||t.el,p=t.createPlaceholder(o);t.opt.sorter=new c.ComponentSorter({em:l,treeClass:RY,containerContext:{container:d,containerSel:".".concat(t.className),itemSel:".".concat(o,"layer"),pfx:a.pStylePrefix,document,placeholderElement:p},dragBehavior:{dragDirection:Op.A.Vertical,nested:!0}})}return t.$el.data("collection",i),e.parent&&t.$el.data("model",e.parent),t}return r.prototype.createPlaceholder=function(e){var t=document.createElement("div"),a=document.createElement("div");return this.el.parentNode,t.className=e+"placeholder",t.style.display="none",t.style.pointerEvents="none",a.className=e+"placeholder-int",t.appendChild(a),t},r.prototype.removeChildren=function(e){var t=e.viewLayer;t&&(t.remove(),delete e.viewLayer)},r.prototype.addTo=function(e){this.addToCollection(e,null,this.collection.indexOf(e))},r.prototype.addToCollection=function(e,t,a){var o=this,i=o.parentView,l=o.opt,c=o.config,d=o.el,p=l.ItemView,h=l.opened,g=l.module,y=l.level,b=l.sorter,v=e.viewLayer||new p({ItemView:p,level:y,model:e,parentView:i,config:c,sorter:b,opened:h,module:g}),w=v.render().el;if(t)t.appendChild(w);else{var C=d,k=C.childNodes;if((0,_e.isUndefined)(a))C.appendChild(w);else{var N=k.length==a;N&&a--,N||!k.length?C.appendChild(w):C.insertBefore(w,k[a])}}return this.items.push(v),w},r.prototype.remove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Sr.Ss.prototype.remove.apply(this,e),this.items.map(function(a){return a.remove()}),this},r.prototype.render=function(){var e=this,t=this,a=t.el,o=t.module,i=document.createDocumentFragment();return a.innerHTML="",this.collection.map(function(l){return o.__getLayerFromComponent(l)}).forEach(function(l){return e.addToCollection(l,i)}),a.appendChild(i),a.className=this.className,this},r})(Sr.Ss);const FY=LY;var xC=fs(9946),BY=function(){return{stylePrefix:"com-",defaults:{},strict:!0,defaultOptions:{}}};const zY=BY;var $Y=fs(1738),UY=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Kb=function(){return Kb=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Kb.apply(this,arguments)},tT=function(s,r,e){if(e||arguments.length===2)for(var t=0,a=r.length,o;t<a;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return s.concat(o||Array.prototype.slice.call(r))},rT=[["preview","Preview","preview"],["resize","Resize","resize"],["fullscreen","Fullscreen","fullscreen"],["copy","CopyComponent"],["paste","PasteComponent"],["canvas-move","CanvasMove"],["canvas-clear","CanvasClear"],["open-code","ExportTemplate","export-template"],["open-layers","OpenLayers","open-layers"],["open-styles","OpenStyleManager","open-sm"],["open-traits","OpenTraitManager","open-tm"],["open-blocks","OpenBlocks","open-blocks"],["open-assets","OpenAssets","open-assets"],["component-select","SelectComponent","select-comp"],["component-outline","SwitchVisibility","sw-visibility"],["component-offset","ShowOffset","show-offset"],["component-move","MoveComponent","move-comp"],["component-next","ComponentNext"],["component-prev","ComponentPrev"],["component-enter","ComponentEnter"],["component-exit","ComponentExit","select-parent"],["component-delete","ComponentDelete"],["component-style-clear","ComponentStyleClear"],["component-drag","ComponentDrag"]],e6={preserveSelected:1},t6=function(s){return function(r){return s.trigger("".concat($2,":start"),r)}},r6=function(s){return function(r){return s.trigger($2,r)}},n6=function(s,r,e){return e===void 0&&(e={}),function(t,a,o){setTimeout(function(){r.forEach(function(i){return i.set("status",i.get("selectable")?"selected":"")}),s.setSelected(r),r[0].emitUpdate()}),s.trigger("".concat($2,":end"),o),setTimeout(function(){return s.runDefault(e6)}),(e.altMode||o.cancelled)&&s.set("_cmpDrag",1)}},VY=(function(s){UY(r,s);function r(e){var t=s.call(this,e,"Commands",zY())||this;t.CommandAbstract=xC.default,t.defaultCommands={},t.commands={},t.active={},t.events=$Y.A;var a=t.config,o=a.pStylePrefix,i=t.defaultCommands;o&&(a.stylePrefix=o+a.stylePrefix),Object.keys(a.defaults).forEach(function(c){var d=a.defaults[c];d.id&&t.add(d.id,d)}),i["tlb-delete"]={run:function(c){return c.runCommand("core:component-delete")}},i["tlb-clone"]={run:function(c){c.runCommand("core:copy"),c.runCommand("core:paste",{action:"clone-component"})}},i["tlb-move"]={run:function(c,d,p){var h,g;p===void 0&&(p={});var y=c.getModel(),b=p.event,v=p.target,w=Array.isArray(v)?v:v?[v]:tT([],c.getSelectedAll(),!0),C=w.map(function(M){var q,P;return((P=(q=M.delegate)===null||q===void 0?void 0:q.move)===null||P===void 0?void 0:P.call(q,M))||M}).filter(Boolean),k=C[C.length-1],N=b?.type==="dragstart",O=["absolute","translate"];if(!k?.get("draggable"))return y.logWarning("The element is not draggable");var R=p.mode||k.get("dmode")||y.get("dmode"),L=function(){return y.stopDefault(e6)},B=(0,_e.includes)(O,R);C.forEach(function(M){return M.trigger("disable",{fromMove:!0})}),N?setTimeout(L,0):L();var G=t6(y),$=r6(y),z=n6(y,C,{altMode:B});if(B)c.runCommand("core:component-drag",{guidesInfo:1,mode:R,target:k,onStart:G,onDrag:$,onEnd:z,event:b});else{N&&((h=b?.dataTransfer)===null||h===void 0||h.setDragImage((g=k.view)===null||g===void 0?void 0:g.el,0,0));var Y=c.Commands.get("move-comp");Y.onStart=G,Y.onDrag=$,Y.onEndMoveFromModel=z,Y.initSorterFromModels(C)}C.filter(function(M){return M.get("selectable")}).forEach(function(M){return M.set("status","freezed-selected")})}},i["core:undo"]=function(c){return c.UndoManager.undo()},i["core:redo"]=function(c){return c.UndoManager.redo()},rT.forEach(function(c){var d=c[2],p=fs(585)("./".concat(c[1])).default,h="core:".concat(c[0]);i[h]=p,d&&(i[d]=p,["run","stop"].forEach(function(g){e.on("".concat(g,":").concat(d),function(){for(var y=[],b=0;b<arguments.length;b++)y[b]=arguments[b];return e.trigger.apply(e,tT(["".concat(g,":").concat(h)],y,!1))})}))}),a.model=e.Canvas;for(var l in i)t.add(l,i[l]);return t}return r.prototype.add=function(e,t){var a=(0,_e.isFunction)(t)?{run:t}:t;return a.stop||(a.noStop=!0),delete a.initialize,a.id=e,this.commands[e]=xC.default.extend(a),this},r.prototype.get=function(e){var t=this.commands[e];return(0,_e.isFunction)(t)?(t=new t(this.config),this.commands[e]=t):t||this.em.logWarning("'".concat(e,"' command not found")),t},r.prototype.extend=function(e,t){t===void 0&&(t={});var a=this.get(e);if(a){var o=Kb(Kb({},a.constructor.prototype),t);this.add(e,o);var i=rT.filter(function(l){return"core:".concat(l[0])===e&&l[2]})[0];i&&this.add(i[2],o)}return this},r.prototype.has=function(e){return!!this.commands[e]},r.prototype.getAll=function(){return this.commands},r.prototype.run=function(e,t){return t===void 0&&(t={}),this.runCommand(this.get(e),t)},r.prototype.stop=function(e,t){return t===void 0&&(t={}),this.stopCommand(this.get(e),t)},r.prototype.isActive=function(e){return this.getActive().hasOwnProperty(e)},r.prototype.getActive=function(){return this.active},r.prototype.runCommand=function(e,t){var a,o;t===void 0&&(t={});var i;if(e?.run){var l=this,c=l.em,d=l.config,p=e.id,h=c.Editor;if(!this.isActive(p)||t.force||!d.strict){var g=(o=(a=d.defaultOptions)===null||a===void 0?void 0:a[p])===null||o===void 0?void 0:o.run;(0,_e.isFunction)(g)&&(t=g(t)),i=h&&e.callRun(h,t)}}return i},r.prototype.stopCommand=function(e,t){var a,o;t===void 0&&(t={});var i;if(e?.run){var l=this,c=l.em,d=l.config,p=e.id,h=c.Editor;if(this.isActive(p)||t.force||!d.strict){var g=(o=(a=d.defaultOptions)===null||a===void 0?void 0:a[p])===null||o===void 0?void 0:o.stop;(0,_e.isFunction)(g)&&(t=g(t)),i=e.callStop(h,t)}}return i},r.prototype.create=function(e){e.stop||(e.noStop=!0);var t=xC.default.extend(e);return new t(this.config)},r.prototype.__onRun=function(e,t){var a=this,o=a.em,i=a.events;o.on("".concat(i.runCommand).concat(e),t)},r.prototype.__onStop=function(e,t){var a=this,o=a.em,i=a.events;o.on("".concat(i.stopCommand).concat(e),t)},r.prototype.destroy=function(){this.defaultCommands={},this.commands={},this.active={}},r})(Di);const HY=VY;var WY=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),oN=function(){return oN=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},oN.apply(this,arguments)},nT="contentEditable",uv="data-toggle-move",qY=(function(s){WY(r,s);function r(e){var t=s.call(this,e)||this;(0,_e.bindAll)(t,"__render"),t.opt=e,t.module=e.module,t.config=e.config||{},t.sorter=e.sorter||"",t.parentView=e.parentView;var a=t,o=a.model,i=a.pfx,l=a.ppfx,c=o.get("type")||"default";return t.className="".concat(i,"layer ").concat(i,"layer__t-").concat(c," no-select ").concat(l,"two-color"),t.inputNameCls="".concat(l,"layer-name"),t.clsTitleC="".concat(i,"layer-title-c"),t.clsTitle="".concat(i,"layer-title"),t.clsCaret="".concat(i,"layer-caret"),t.clsCount="".concat(i,"layer-count"),t.clsMove="".concat(i,"layer-move"),t.clsChildren="".concat(i,"layer-children"),t.clsNoChild="".concat(i,"layer-no-chld"),t.clsEdit="".concat(t.inputNameCls,"--edit"),t.clsNoEdit="".concat(t.inputNameCls,"--no-edit"),t.initComponent(),t}return r.prototype.events=function(){var e;return e={},e["mousedown [".concat(uv,"]")]="startSort",e["touchstart [".concat(uv,"]")]="startSort",e["click [data-toggle-visible]"]="toggleVisibility",e["click [data-toggle-open]"]="toggleOpening",e["click [data-toggle-select]"]="handleSelect",e["mouseover [data-toggle-select]"]="handleHover",e["mouseout [data-toggle-select]"]="handleHoverOut",e["dblclick [data-name]"]="handleEdit",e["keydown [data-name]"]="handleEditKey",e["focusout [data-name]"]="handleEditEnd",e},r.prototype.template=function(e){var t=this,a=t.pfx,o=t.ppfx,i=t.config,l=t.clsNoEdit,c=t.module,d=t.opt,p=t.em,h=i.hidable,g=c.getComponents(e).length,y=g?"":this.clsNoChild,b="".concat(this.clsTitle," ").concat(y),v="".concat(this.clsTitleC),w="".concat(this.inputNameCls," ").concat(l," ").concat(o,"no-app"),C=d.level||0,k="".concat(C*10,"px"),N=e.getName(),O=e.getIcon(),R="".concat(a,"layer"),L=(p?.getConfig()).icons,B=L,G=B.move,$=B.eye,z=B.eyeOff,Y=B.chevron;return`
      <div class="`.concat(a,"layer-item ").concat(o,`one-bg" data-toggle-select>
        <div class="`).concat(a,`layer-item-left">
          `).concat(h?'<i class="'.concat(a,`layer-vis" data-toggle-visible>
                <i class="`).concat(a,'layer-vis-on">').concat($,`</i>
                <i class="`).concat(a,'layer-vis-off">').concat(z,`</i>
              </i>`):"",`
          <div class="`).concat(v,`">
            <div class="`).concat(b,'" style="padding-left: ').concat(k,`">
              <div class="`).concat(a,'layer-title-inn" title="').concat(N,`">
                <i class="`).concat(this.clsCaret,'" data-toggle-open>').concat(Y,`</i>
                  `).concat(O?'<span class="'.concat(R,'__icon">').concat(O,"</span>"):"",`
                <span class="`).concat(w,'" data-name>').concat(N,`</span>
              </div>
            </div>
          </div>
        </div>
        <div class="`).concat(a,`layer-item-right">
          <div class="`).concat(this.clsCount,'" data-count>').concat(g||"",`</div>
          <div class="`).concat(this.clsMove,'" ').concat(uv,">").concat(G||"",`</div>
        </div>
      </div>
      <div class="`).concat(this.clsChildren,`"></div>
    `)},Object.defineProperty(r.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ppfx",{get:function(){return this.em.getConfig().stylePrefix},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pfx",{get:function(){return this.config.stylePrefix},enumerable:!1,configurable:!0}),r.prototype.initComponent=function(){var e=this,t=this,a=t.model,o=t.config,i=o.onInit,l=a.components();this.listenTo(l,"remove add reset",this.checkChildren),[["change:status",this.updateStatus],["change:open",this.updateOpening],["change:layerable",this.updateLayerable],["change:style:display",this.updateVisibility],["change:draggable",this.updateMove],["rerender:layer",this.render],["change:name change:custom-name",this.updateName]].forEach(function(c){return e.listenTo(a,c[0],c[1])}),this.$el.data("model",a),this.$el.data("collection",l),a.viewLayer=this,i.bind(this)({component:a,render:this.__render,listenTo:this.listenTo})},r.prototype.updateName=function(){this.getInputName().innerText=this.model.getName()},r.prototype.getVisibilityEl=function(){return this.getItemContainer().find("[data-toggle-visible]")},r.prototype.updateVisibility=function(){var e=this,t=e.pfx,a=e.model,o=e.module,i="".concat(t,"layer-hidden"),l=!o.isVisible(a),c=l?"addClass":"removeClass";this.$el[c](i),this.getVisibilityEl()[c]("".concat(t,"layer-off"))},r.prototype.updateMove=function(){var e=this,t=e.model,a=e.config,o=this.getItemContainer().find("[".concat(uv,"]"))[0];if(o){var i=t.get("draggable")&&a.sortable;o.style.display=i?"":"none"}},r.prototype.toggleVisibility=function(e){e?.stopImmediatePropagation();var t=this,a=t.module,o=t.model;a.setVisible(o,!a.isVisible(o))},r.prototype.handleEdit=function(e){e?.stopPropagation();var t=this,a=t.em,o=t.$el,i=t.clsNoEdit,l=t.clsEdit,c=this.getInputName();c[nT]="true",c.focus(),document.execCommand("selectAll",!1),a.setEditing(!0),o.find(".".concat(this.inputNameCls)).removeClass(i).addClass(l)},r.prototype.handleEditKey=function(e){e.stopPropagation(),((0,Ar.v$)(e)||(0,Ar.Ci)(e))&&this.handleEditEnd(e)},r.prototype.handleEditEnd=function(e){e?.stopPropagation();var t=this,a=t.em,o=t.$el,i=t.clsNoEdit,l=t.clsEdit,c=t.model,d=this.getInputName(),p=d.textContent;d.scrollLeft=0,d[nT]="false",c.setName(p),a.setEditing(!1),o.find(".".concat(this.inputNameCls)).addClass(i).removeClass(l),this.updateName()},r.prototype.getInputName=function(){return this.inputName||(this.inputName=this.el.querySelector(".".concat(this.inputNameCls))),this.inputName},r.prototype.updateOpening=function(){var e=this,t=e.$el,a=e.model,o=e.pfx,i="open",l="".concat(o,"layer-open"),c=this.getCaret();this.module.isOpen(a)?(t.addClass(i),c.addClass(l)):(t.removeClass(i),c.removeClass(l))},r.prototype.toggleOpening=function(e){var t=this,a=t.model,o=t.module;e?.stopImmediatePropagation(),a.get("components").length&&o.setOpen(a,!o.isOpen(a))},r.prototype.handleSelect=function(e){e?.stopPropagation();var t=this,a=t.module,o=t.model;a.setLayerData(o,{selected:!0},{event:e})},r.prototype.handleHover=function(e){e?.stopPropagation();var t=this,a=t.module,o=t.model;a.setLayerData(o,{hovered:!0})},r.prototype.handleHoverOut=function(e){e?.stopPropagation();var t=this,a=t.module,o=t.model;a.setLayerData(o,{hovered:!1})},r.prototype.startSort=function(e){var t,a,o;e.stopPropagation();var i=this,l=i.em,c=i.sorter,d=i.model;if(!(e.button&&e.button!==0)&&c){var p=((a=(t=d.delegate)===null||t===void 0?void 0:t.move)===null||a===void 0?void 0:a.call(t,d))||d;c.eventHandlers=oN({legacyOnStartSort:t6(l),legacyOnMoveClb:r6(l),legacyOnEndMove:n6(l,[p])},c.eventHandlers);var h=((o=p.viewLayer)===null||o===void 0?void 0:o.el)||e.target;c.startSort([{element:h}])}},r.prototype.updateStatus=function(){ma.prototype.updateStatus.apply(this,[{avoidHover:!this.config.highlightHover,noExtHl:!0}])},r.prototype.getItemContainer=function(){return this.$el.children("[data-toggle-select]")},r.prototype.checkChildren=function(){var e=this,t=e.model,a=e.clsNoChild,o=e.module,i=o.getComponents(t).length,l=this.getItemContainer(),c=l.find(".".concat(this.clsTitle)),d=l.find("[data-count]");c[i?"removeClass":"addClass"](a),d.html("".concat(i||"")),!i&&o.setOpen(t,!1)},r.prototype.getCaret=function(){return(!this.caret||!this.caret.length)&&(this.caret=this.getItemContainer().find(".".concat(this.clsCaret))),this.caret},r.prototype.setRoot=function(e){var t,a=(0,_e.isString)(e)?(t=this.em.getWrapper())===null||t===void 0?void 0:t.find(e)[0]:e;a&&(this.stopListening(),this.model=a,this.initComponent(),this._rendered&&this.render())},r.prototype.updateLayerable=function(){var e=this.parentView,t=e||this;t.render()},r.prototype.__clearItems=function(){var e;(e=this.items)===null||e===void 0||e.remove()},r.prototype.remove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Sr.Ss.prototype.remove.apply(this,e),delete this.model.viewLayer,this.__clearItems(),this},r.prototype.render=function(){var e=this,t=e.model,a=e.config,o=e.pfx,i=e.ppfx,l=e.opt,c=e.sorter;this.__clearItems();var d=l.opened,p=l.module,h=l.ItemView,g=!p.__isLayerable(t),y=this.$el.empty(),b=l.level+1;delete this.inputName,this.items=new FY({ItemView:h,collection:t.get("components"),config:a,sorter:c,opened:d,parentView:this,parent:t,level:b,module:p});var v=this.items.render().$el;return!a.showWrapper&&b===1?y.append(v):(y.html(this.template(t)),y.find(".".concat(this.clsChildren)).append(v)),!p.isVisible(t)&&(this.className+=" ".concat(o,"hide")),g&&(this.className+=" ".concat(i,"hidden")),y.attr("class",this.className),this.updateStatus(),this.updateOpening(),this.updateVisibility(),this.updateMove(),this.__render(),this._rendered=!0,this},r.prototype.__render=function(){var e=this,t=e.model,a=e.config,o=e.el,i=a.onRender,l={component:t,el:o};i.bind(this)(l),this.em.trigger("layer:render",l)},r})(Sr.Ss);const GY=qY;var KY=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),iN=function(){return iN=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},iN.apply(this,arguments)},vC={mediaText:""},YY=["open","status","locked","custom-name","components","classes"].map(function(s){return"".concat(bs.I.update,":").concat(s)}).join(" "),ZY=function(s){return s===void 0&&(s={}),(s.display||"").trim().indexOf("none")===0},XY=(function(s){KY(r,s);function r(e){var t=s.call(this,e,"LayerManager",PY())||this;return t.events=aN,(0,_e.bindAll)(t,"componentChanged","__onRootChange","__onComponent"),t.model=new of.A(t,{opened:{}}),t.config.stylePrefix=t.config.pStylePrefix,t}return r.prototype.onLoad=function(){var e=this,t=this,a=t.em,o=t.config,i=t.model;i.listenTo(a,"component:selected",this.componentChanged),i.on("change:root",this.__onRootChange),i.listenTo(a,YY,this.__onComponent),this.componentChanged(),i.listenToOnce(a,"load",function(){e.setRoot(o.root),e.__appendTo()})},r.prototype.setRoot=function(e){var t=this.em.getWrapper(),a=(0,Zt.isComponent)(e)?e:t;e&&(0,_e.isString)(e)&&(0,Zt.hasWin)()&&(a=t.find(e)[0]||t);var o=this.__getLayerFromComponent(a);return this.model.set("root",o),o},r.prototype.getRoot=function(){return this.model.get("root")},r.prototype.getComponents=function(e){var t=this;return e.components().map(function(a){return t.__getLayerFromComponent(a)}).filter(function(a){return t.__isLayerable(a)})},r.prototype.setOpen=function(e,t){e.set("open",t)},r.prototype.isOpen=function(e){return!!e.get("open")},r.prototype.setVisible=function(e,t){var a="__prev-display",o=e.getStyle(vC),i=o.display;if(t){var l=e.get(a);delete o.display,l&&(o.display=l,e.unset(a))}else i&&e.set(a,i),o.display="none";e.setStyle(o,vC),this.updateLayer(e),this.em.trigger("component:toggled")},r.prototype.isVisible=function(e){return!ZY(e.getStyle(vC))},r.prototype.setLocked=function(e,t){e.set("locked",t)},r.prototype.isLocked=function(e){return!!e.get("locked")},r.prototype.setName=function(e,t){e.set("custom-name",t)},r.prototype.getName=function(e){return e.getName()},r.prototype.getLayerData=function(e){var t=e.get("status");return{name:e.getName(),open:this.isOpen(e),selected:t==="selected",hovered:t==="hovered",visible:this.isVisible(e),locked:this.isLocked(e),components:this.getComponents(e)}},r.prototype.setLayerData=function(e,t,a){var o;a===void 0&&(a={});var i=this,l=i.em,c=i.config,d=t.open,p=t.selected,h=t.hovered,g=t.visible,y=t.locked,b=t.name,v=iN({fromLayers:!0},a);if((0,Zt.isDef)(d)&&this.setOpen(e,d),(0,Zt.isDef)(p))if(p){l.setSelected(e,v);var w=c.scrollCanvas;w&&((o=e.views)===null||o===void 0||o.forEach(function(C){return C.scrollIntoView(w)}))}else l.removeSelected(e,v);(0,Zt.isDef)(h)&&c.showHover&&(h?l.setHovered(e,v):l.setHovered(null,v)),(0,Zt.isDef)(g)&&g!==this.isVisible(e)&&this.setVisible(e,g),(0,Zt.isDef)(y)&&this.setLocked(e,y),(0,Zt.isDef)(b)&&this.setName(e,b)},r.prototype.componentChanged=function(e,t){var a;if(t===void 0&&(t={}),!t.fromLayers){var o=this,i=o.em,l=o.config,c=l.scrollLayers,d=this.model.get("opened"),p=i.getSelected(),h=p?.parent();for(var g in d)d[g].set("open",!1),delete d[g];for(;h;)h.set("open",!0),d[h.cid]=h,h=h.parent();if(p&&c){var y=(a=p.viewLayer)===null||a===void 0?void 0:a.el;y?.scrollIntoView(c)}}},r.prototype.getAll=function(){return this.view},r.prototype.render=function(){var e,t,a=this,o=a.config,i=a.model,l=GY.extend(o.extend);return this.view=new l({el:(e=this.view)===null||e===void 0?void 0:e.el,ItemView:l,level:0,config:o,opened:i.get("opened"),model:this.getRoot(),module:this}),(t=this.view)===null||t===void 0?void 0:t.render().el},r.prototype.destroy=function(){var e;(e=this.view)===null||e===void 0||e.remove()},r.prototype.__onRootChange=function(){var e,t=this,a=t.em,o=t.events,i=this.getRoot();(e=this.view)===null||e===void 0||e.setRoot(i),a.trigger(o.root,i),this.__trgCustom()},r.prototype.__getLayerFromComponent=function(e){var t,a;return((a=(t=e.delegate)===null||t===void 0?void 0:t.layer)===null||a===void 0?void 0:a.call(t,e))||e},r.prototype.__onComponent=function(e){this.updateLayer(e)},r.prototype.__isLayerable=function(e){var t=e.tagName,a=this.config.hideTextnode,o=!a||!e.isInstanceOf("textnode")&&t!=="br";return o&&e.get("layerable")},r.prototype.__trgCustom=function(e){var t=this,a=t.__ctn,o=t.em,i=t.events;this.__ctn=a||e?.container,o.trigger(i.custom,{container:this.__ctn,root:this.getRoot()})},r.prototype.updateLayer=function(e,t){var a=this,o=a.em,i=a.events;o.trigger(i.component,e,t)},r})(Di);const QY=XY;var JY=function(){return{assets:[],noAssets:"",stylePrefix:"am-",upload:"",uploadName:"files",headers:{},params:{},credentials:"include",multiUpload:!0,multiUploadSuffix:"[]",autoAdd:!0,customFetch:void 0,uploadFile:void 0,embedAsBase64:!0,handleAdd:void 0,beforeUpload:void 0,showUrlInput:!0,custom:!1,dropzone:!1,openAssetsOnDrop:!0,dropzoneContent:""}};const eZ=JY;var tZ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),s6=(function(s){tZ(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.getDefaults=function(){return(0,_e.result)(this.prototype,"defaults")},r.prototype.defaults=function(){return{type:"",src:""}},r.prototype.getType=function(){return this.get("type")},r.prototype.getSrc=function(){return this.get("src")||""},r.prototype.getFilename=function(){return this.getSrc().split("/").pop().split("?").shift()},r.prototype.getExtension=function(){return this.getFilename().split(".").pop()},r})(Sr.Kx);const lN=s6;s6.prototype.idAttribute="src";var rZ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Yb=function(){return Yb=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Yb.apply(this,arguments)},nZ=(function(s){rZ(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.defaults=function(){return Yb(Yb({},lN.getDefaults()),{type:"image",unitDim:"px",height:0,width:0})},r})(lN);const sZ=nZ;var aZ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),oZ=(function(s){aZ(r,s);function r(e){var t=s.call(this,e)||this;t.options=e,t.collection=e.collection;var a=e.config||{};t.config=a,t.pfx=a.stylePrefix||"",t.ppfx=a.pStylePrefix||"",t.em=a.em,t.className=t.pfx+"asset",t.listenTo(t.model,"destroy remove",t.remove),t.model.view=t;var o=t.init&&t.init.bind(t);return o&&o(e),t}return r.prototype.__getBhv=function(){var e=this.em,t=e?.Assets;return t?.__getBehaviour()||{}},r.prototype.template=function(e,t){var a=this.pfx;return`
      <div class="`.concat(a,`preview-cont">
        `).concat(this.getPreview(),`
      </div>
      <div class="`).concat(a,`meta">
        `).concat(this.getInfo(),`
      </div>
      <div class="`).concat(a,`close" data-toggle="asset-remove">
        &Cross;
      </div>
    `)},r.prototype.updateTarget=function(e){e&&e.set&&(e.set("attributes",(0,_e.clone)(e.get("attributes"))),e.set("src",this.model.get("src")))},r.prototype.getPreview=function(){return""},r.prototype.getInfo=function(){return""},r.prototype.render=function(){var e=this.el;return e.innerHTML=this.template(this,this.model),e.className=this.className,this},r})(Sr.Ss);const iZ=oZ;var lZ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),sT=function(s,r){return Object.defineProperty?Object.defineProperty(s,"raw",{value:r}):s.raw=r,s},a6=(function(s){lZ(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.getPreview=function(){var e=this,t=e.pfx,a=e.ppfx,o=e.model,i=o.get("src");return Ei(aT||(aT=sT([`
      <div class="`,`preview" style="background-image: url('`,`');"></div>
      <div class="`,"preview-bg ",`checker-bg"></div>
    `],[`
      <div class="`,`preview" style="background-image: url('`,`');"></div>
      <div class="`,"preview-bg ",`checker-bg"></div>
    `])),t,i,t,a)},r.prototype.getInfo=function(){var e=this,t=e.pfx,a=e.model,o=a.get("name"),i=a.get("width"),l=a.get("height"),c=a.get("unitDim"),d=i&&l?"".concat(i,"x").concat(l).concat(c):"";return o=o||a.getFilename(),Ei(oT||(oT=sT([`
      <div class="`,'name">',`</div>
      <div class="`,'dimensions">',`</div>
    `],[`
      <div class="`,'name">',`</div>
      <div class="`,'dimensions">',`</div>
    `])),t,o,t,d)},r.prototype.init=function(e){var t=this.pfx;this.className+=" ".concat(t,"asset-image")},r.prototype.onClick=function(){var e=this,t=e.model,a=e.pfx,o=this.__getBhv().select,i=this.config.onClick,l=this.collection;l.trigger("deselectAll"),this.$el.addClass(a+"highlight"),(0,_e.isFunction)(o)?o(t,!1):(0,_e.isFunction)(i)?i(t):this.updateTarget(l.target)},r.prototype.onDblClick=function(){var e=this,t=e.em,a=e.model,o=this.__getBhv().select,i=this.config.onDblClick,l=this.collection,c=l.target,d=l.onSelect;(0,_e.isFunction)(o)?o(a,!0):(0,_e.isFunction)(i)?i(a):(this.updateTarget(c),t?.Modal.close()),(0,_e.isFunction)(d)&&d(a)},r.prototype.onRemove=function(e){e.stopImmediatePropagation(),this.model.collection.remove(this.model)},r})(iZ);const cZ=a6;a6.prototype.events={"click [data-toggle=asset-remove]":"onRemove",click:"onClick",dblclick:"onDblClick"};var aT,oT,Zb=function(){return Zb=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Zb.apply(this,arguments)},dZ={types:[],initialize:function(s,r){var e=this;r===void 0&&(r={});var t=r.em;this.em=t,this.opts=r,this.model=function(o,i){o===void 0&&(o={}),i===void 0&&(i={});var l,c,d;if(o&&o.type){var p=e.getBaseType();d=e.getType(o.type),l=d?d.model:p.model,c=d?d.view:p.view}else{var h=e.recognizeType(o);d=h.type,l=d.model,c=d.view,o=h.attributes}var g=new l(o,Zb(Zb({},i),{em:t}));return g.typeView=c,e.model.prototype=l.prototype,g};var a=this.init&&this.init.bind(this);a&&a()},recognizeType:function(s){for(var r=this.getTypes(),e=0;e<r.length;e++){var t=r[e],a=t.isType(s);if(a=typeof a=="boolean"&&a?{type:t.id}:a,a)return{type:t,attributes:a}}return{type:this.getBaseType(),attributes:s}},getBaseType:function(){var s=this.getTypes();return s[s.length-1]},getTypes:function(){return this.types},getType:function(s){for(var r=this.getTypes(),e=0;e<r.length;e++){var t=r[e];if(t.id===s)return t}},addType:function(s,r){var e=this.getType(s),t=this.getBaseType(),a=e?e.model:t.model,o=e?e.view:t.view,i=r.model,l=r.view,c=r.isType;i=i instanceof Sr.Kx||(0,_e.isFunction)(i)?i:a.extend(i||{}),l=l instanceof Sr.Ss||(0,_e.isFunction)(l)?l:o.extend(l||{}),this.extendViewApi&&!r.model&&!r.view&&(l=l.extend(r)),e?(e.model=i,e.view=l,e.isType=c||e.isType):(r.id=s,r.model=i,r.view=l,r.isType=c||function(d){if(d&&d.type==s)return!0},this.getTypes().unshift(r))}};const o6=dZ;var uZ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),fZ=Sr.pM.extend(o6),i6=(function(s){uZ(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r})(fZ);const bC=i6;i6.prototype.types=[{id:"image",model:sZ,view:cZ,isType:function(s){return typeof s=="string"?{type:"image",src:s}:s}}];var cN;(function(s){s.add="asset:add",s.remove="asset:remove",s.removeBefore="asset:remove:before",s.update="asset:update",s.open="asset:open",s.close="asset:close",s.uploadStart="asset:upload:start",s.uploadEnd="asset:upload:end",s.uploadError="asset:upload:error",s.uploadResponse="asset:upload:response",s.custom="asset:custom",s.all="asset"})(cN||(cN={}));const iT=cN;var pZ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),l6=(function(s){pZ(r,s);function r(e){e===void 0&&(e={});var t=s.call(this,e)||this;t.options=e,t.config=e.config,t.pfx=t.config.stylePrefix||"",t.ppfx=t.config.pStylePrefix||"",t.em=t.config.em;var a=t.collection;return t.listenTo(a,"reset",t.renderAssets),t.listenTo(a,"add",t.addToAsset),t.listenTo(a,"remove",t.removedAsset),t.listenTo(a,"deselectAll",t.deselectAll),t}return r.prototype.template=function(e){var t=e.pfx,a=e.ppfx,o=e.em,i="";return this.config.showUrlInput&&(i=`
          <form class="`.concat(t,`add-asset">
            <div class="`).concat(a,"field ").concat(t,`add-field">
              <input placeholder="`).concat(o?.t("assetManager.inputPlh"),`"/>
            </div>
            <button class="`).concat(a,'btn-prim">').concat(o?.t("assetManager.addButton"),`</button>
            <div style="clear:both"></div>
          </form>
      `)),`
    <div class="`.concat(t,`assets-cont">
      <div class="`).concat(t,`assets-header">
        `).concat(i,`
      </div>
      <div class="`).concat(t,`assets" data-el="assets"></div>
      <div style="clear:both"></div>
    </div>
    `)},r.prototype.handleSubmit=function(e){e.preventDefault();var t=this.getAddInput(),a=t&&t.value.trim(),o=this.config.handleAdd;if(a){t.value="";var i=this.getAssetsEl();i&&(i.scrollTop=0),o?o.bind(this)(a):this.options.globalCollection.add(a,{at:0})}},r.prototype.getAssetsEl=function(){return this.el.querySelector(".".concat(this.pfx,"assets"))},r.prototype.getAddInput=function(){return(!this.inputUrl||!this.inputUrl.value)&&(this.inputUrl=this.el.querySelector(".".concat(this.pfx,"add-asset input"))),this.inputUrl},r.prototype.removedAsset=function(e){this.collection.length||this.toggleNoAssets()},r.prototype.addToAsset=function(e){this.collection.length==1&&this.toggleNoAssets(!0),this.addAsset(e)},r.prototype.addAsset=function(e,t){t===void 0&&(t=null);var a=t,o=this.collection,i=this.config,l=new e.typeView({model:e,collection:o,config:i}).render().el;if(a)a.appendChild(l);else{var c=this.getAssetsEl();c&&c.insertBefore(l,c.firstChild)}return l},r.prototype.toggleNoAssets=function(e){e===void 0&&(e=!1);var t=this.$el.find(".".concat(this.pfx,"assets"));if(e)t.empty();else{var a=this.config.noAssets;a&&t.append(a)}},r.prototype.deselectAll=function(){var e=this.pfx;this.$el.find(".".concat(e,"highlight")).removeClass("".concat(e,"highlight"))},r.prototype.renderAssets=function(){var e=this,t=document.createDocumentFragment(),a=this.$el.find(".".concat(this.pfx,"assets"));a.empty(),this.toggleNoAssets(!!this.collection.length),this.collection.each(function(o){return e.addAsset(o,t)}),a.append(t)},r.prototype.render=function(){var e=this.options.fu.render().el;return this.$el.empty(),this.$el.append(e).append(this.template(this)),this.el.className="".concat(this.ppfx,"asset-manager"),this.renderAssets(),this},r})(Sr.Ss);const hZ=l6;l6.prototype.events={submit:"handleSubmit"};var mZ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),gZ=function(s,r){return Object.defineProperty?Object.defineProperty(s,"raw",{value:r}):s.raw=r,s},yZ=(function(s){mZ(r,s);function r(e){e===void 0&&(e={});var t=s.call(this,e)||this;t.options=e;var a=e.config||{};t.module=e.module,t.config=a,t.em=t.config.em,t.pfx=a.stylePrefix||"",t.ppfx=a.pStylePrefix||"",t.target=t.options.globalCollection||{},t.uploadId=t.pfx+"uploadFile",t.disabled=a.disableUpload!==void 0?a.disableUpload:!a.upload&&!a.embedAsBase64,t.multiUpload=a.multiUpload!==void 0?a.multiUpload:!0;var o=a.uploadFile;return o?t.uploadFile=o.bind(t):!a.upload&&a.embedAsBase64&&(t.uploadFile=r.embedAsBase64),t.delegateEvents(),t}return r.prototype.template=function(e){var t=e.pfx,a=e.title,o=e.uploadId,i=e.disabled,l=e.multiUpload;return Ei(lT||(lT=gZ([`
      <form>
        <div id="`,'title">',`</div>
        <input
          data-input
          type="file"
          id="`,`"
          name="file"
          accept="*/*"
          `,`
          `,`
        />
        <div style="clear:both;"></div>
      </form>
    `],[`
      <form>
        <div id="`,'title">',`</div>
        <input
          data-input
          type="file"
          id="`,`"
          name="file"
          accept="*/*"
          `,`
          `,`
        />
        <div style="clear:both;"></div>
      </form>
    `])),t,a,o,i?"disabled":"",l?"multiple":"")},r.prototype.events=function(){return{"change [data-input]":"uploadFile"}},r.prototype.onUploadStart=function(){var e=this.module;e?.__propEv(e.events.uploadStart)},r.prototype.onUploadEnd=function(e){var t=this,a=t.$el,o=t.module;o?.__propEv(o.events.uploadEnd,e);var i=a.find("input");i&&i.val("")},r.prototype.onUploadError=function(e){var t=this.module;console.error(e),this.onUploadEnd(e),t?.__propEv(t.events.uploadError,e)},r.prototype.onUploadResponse=function(e,t){var a=this,o=a.module,i=a.config,l=a.target,c;try{c=typeof e=="string"?JSON.parse(e):e}catch{c=e}o?.__propEv(o.events.uploadResponse,c),i.autoAdd&&l&&l.add(c.data,{at:0}),this.onUploadEnd(e),t?.(c)},r.prototype.uploadFile=function(e,t,a){var o=this,i,l=e.dataTransfer?e.dataTransfer.files:(i=e.target)===null||i===void 0?void 0:i.files,c=this.config,d=c.beforeUpload,p=d&&d(l);if(p!==!1){var h=new FormData,g=c.params,y=c.customFetch,b=c.fetchOptions;for(var v in g)h.append(v,g[v]);if(this.multiUpload)for(var w=0;w<l.length;w++)h.append("".concat(c.uploadName).concat(c.multiUploadSuffix),l[w]);else l.length&&h.append(c.uploadName,l[0]);var C=c.upload,k=c.headers,N="X-Requested-With";if(typeof k[N]>"u"&&(k[N]="XMLHttpRequest"),C){this.onUploadStart();var O={method:"post",credentials:c.credentials||"include",headers:k,body:h},R=b?.(O)||O,L=y?y(C,R):qA(C,R).then(function(B){return(B.status/200|0)==1?B.text():B.text().then(function(G){return Promise.reject(G)})});return L.then(function(B){return o.onUploadResponse(B,t)}).catch(function(B){return o.onUploadError(B)})}}},r.prototype.initDrop=function(){var e=this;if(!this.uploadForm){this.uploadForm=this.$el.find("form").get(0);var t=this.uploadForm;"draggable"in t&&(this.uploadForm.ondragover=function(){return t.className=e.pfx+"hover",!1},this.uploadForm.ondragleave=function(){return t.className="",!1},this.uploadForm.ondrop=function(a){t.className="",a.preventDefault(),e.uploadFile(a)})}},r.prototype.initDropzone=function(e){var t=this,a=0,o=this.config,i=e.model,l=e.el,c=i.Editor,d=i.Canvas.getBody(),p=this.ppfx,h="".concat(p,"dropzone-active"),g="".concat(p,"dropzone"),y=function(){l.className=l.className.replace(h,"").trim(),a=0},b=function(){return a||(l.className+=" ".concat(h),a=1),!1},v=function(){return y(),!1},w=function(C){if(y(),C.preventDefault(),C.stopPropagation(),t.uploadFile(C),o.openAssetsOnDrop&&c){var k=c.getSelected();c.runCommand("open-assets",{target:k,onSelect:function(){c.Modal.close(),c.AssetManager.setTarget(null)}})}return!1};e.$el.append('<div class="'.concat(g,'">').concat(o.dropzoneContent,"</div>")),y(),"draggable"in l&&[l,d].forEach(function(C){C.ondragover=b,C.ondragleave=v,C.ondrop=w})},r.prototype.render=function(){var e=this,t=e.$el,a=e.pfx,o=e.em;return t.html(this.template({title:o&&o.t("assetManager.uploadTitle"),uploadId:this.uploadId,disabled:this.disabled,multiUpload:this.multiUpload,pfx:a})),this.initDrop(),t.attr("class",a+"file-uploader"),this},r.embedAsBase64=function(e,t){var a=this,o=e.dataTransfer?e.dataTransfer.files:e.target.files,i={data:[]};if(!FileReader){this.onUploadError(new Error("Unsupported platform, FileReader is not defined"));return}for(var l=[],c=/^(.+)\/(.+)$/,d=function(y){var b=new Promise(function(v,w){var C=new FileReader;C.addEventListener("load",function(k){var N,O=y.name,R=c.exec(y.type);if(R?N=R[1]:N=y.type,N==="image"){var L={src:C.result,name:O,type:N,height:0,width:0},B=new Image;B.addEventListener("error",function(G){w(G)}),B.addEventListener("load",function(){L.height=B.height,L.width=B.width,v(L)}),B.src=L.src}else v(N?{src:C.result,name:O,type:N}:C.result)}),C.addEventListener("error",function(k){w(k)}),C.addEventListener("abort",function(k){w("Aborted")}),C.readAsDataURL(y)});l.push(b)},p=0,h=o;p<h.length;p++){var g=h[p];d(g)}return Promise.all(l).then(function(y){i.data=y,a.onUploadResponse(i,t)},function(y){a.onUploadError(y)})},r})(Sr.Ss);const xZ=yZ;var lT,vZ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Yh=function(){return Yh=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Yh.apply(this,arguments)},cT=function(s,r,e){if(e||arguments.length===2)for(var t=0,a=r.length,o;t<a;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return s.concat(o||Array.prototype.slice.call(r))},Jg="open-assets",bZ=(function(s){vZ(r,s);function r(e){var t=s.call(this,e,"AssetManager",new bC([],e),iT,eZ())||this;t.storageKey="assets",t.Asset=lN,t.Assets=bC,t.events=iT;var a=t,o=a.all,i=a.config;t.assetsVis=new bC([]);var l=i.pStylePrefix;return l&&(i.stylePrefix="".concat(l).concat(i.stylePrefix)),o.on("add",function(c){return t.getAllVisible().add(c)}),o.on("remove",function(c){return t.getAllVisible().remove(c)}),t.__onAllEvent=(0,_e.debounce)(function(){return t.__trgCustom()},0),t}return r.prototype.open=function(e){e===void 0&&(e={});var t=this.em.Commands;t.run(Jg,Yh({types:["image"],select:function(){}},e))},r.prototype.close=function(){var e=this.em.Commands;e.stop(Jg)},r.prototype.isOpen=function(){var e=this.em.Commands;return!!e?.isActive(Jg)},r.prototype.add=function(e,t){return t===void 0&&(t={}),typeof t.at>"u"&&(t.at=0),this.all.add(e,t)},r.prototype.get=function(e){return this.all.where({src:e})[0]||null},r.prototype.getAll=function(){return this.all},r.prototype.getAllVisible=function(){return this.assetsVis},r.prototype.remove=function(e,t){return this.__remove(e,t)},r.prototype.store=function(){return this.getProjectData()},r.prototype.load=function(e){return this.loadProjectData(e)},r.prototype.getContainer=function(){var e,t=this.__getBehaviour();return t.container||((e=this.am)===null||e===void 0?void 0:e.el)},r.prototype.getAssetsEl=function(){var e;return(e=this.am)===null||e===void 0?void 0:e.el.querySelector("[data-el=assets]")},r.prototype.render=function(e){if(!this.getConfig().custom){var t=e||this.getAll().models;if(!this.am){var a=this.__viewParams();a.fu=this.FileUploader(),this.am=new hZ(Yh({},a)),this.am.render()}return this.assetsVis.reset(t),this.getContainer()}},r.prototype.__viewParams=function(){return{collection:this.assetsVis,globalCollection:this.all,config:this.config,module:this,fu:void 0}},r.prototype.addType=function(e,t){this.getAll().addType(e,t)},r.prototype.getType=function(e){return this.getAll().getType(e)},r.prototype.getTypes=function(){return this.getAll().getTypes()},r.prototype.AssetsView=function(){return this.am},r.prototype.FileUploader=function(){return this.fu||(this.fu=new xZ(this.__viewParams())),this.fu},r.prototype.onLoad=function(){var e=this;this.getAll().reset(this.config.assets);var t=this,a=t.em,o=t.events;a.Commands.__onRun(Jg,function(){return e.__propEv(o.open)}),a.Commands.__onStop(Jg,function(){return e.__propEv(o.close)})},r.prototype.postRender=function(e){var t;this.config.dropzone&&((t=this.fu)===null||t===void 0||t.initDropzone(e))},r.prototype.setTarget=function(e){this.assetsVis.target=e},r.prototype.onSelect=function(e){this.assetsVis.onSelect=e},r.prototype.onClick=function(e){this.config.onClick=e},r.prototype.onDblClick=function(e){this.config.onDblClick=e},r.prototype.__propEv=function(e){for(var t,a,o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];(t=this.em).trigger.apply(t,cT([e],o,!1)),(a=this.getAll()).trigger.apply(a,cT([e],o,!1))},r.prototype.__trgCustom=function(){var e=this.__getBehaviour(),t=this.getConfig().custom;!e.container&&!t.open||this.em.trigger(this.events.custom,this.__customData())},r.prototype.__customData=function(){var e=this,t=this.__getBehaviour();return{am:this,open:this.isOpen(),assets:this.getAll().models,types:t.types||[],container:t.container,close:function(){return e.close()},remove:function(a,o){return e.remove(a,o)},select:function(a,o){var i=e.add(a);(0,_e.isFunction)(t.select)&&t.select(i,o)},options:t.options||{}}},r.prototype.__behaviour=function(e){return e===void 0&&(e={}),this._bhv=Yh(Yh({},this._bhv||{}),e)},r.prototype.__getBehaviour=function(e){return this._bhv||{}},r.prototype.destroy=function(){var e,t;this.all.stopListening(),this.all.reset(),this.assetsVis.stopListening(),this.assetsVis.reset(),(e=this.fu)===null||e===void 0||e.remove(),(t=this.am)===null||t===void 0||t.remove(),this._bhv={}},r})(lu);const wZ=bZ;var jZ=function(){return{default:"",devices:[{id:"desktop",name:"Desktop",width:""},{id:"tablet",name:"Tablet",width:"770px",widthMedia:"992px"},{id:"mobileLandscape",name:"Mobile landscape",width:"568px",widthMedia:"768px"},{id:"mobilePortrait",name:"Mobile portrait",width:"320px",widthMedia:"480px"}]}};const CZ=jZ;var SZ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),NZ=(function(s){SZ(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.defaults=function(){return{name:"",width:null,height:"",widthMedia:null,priority:null}},r.prototype.initialize=function(){var e=this;this.get("widthMedia")===null&&this.set("widthMedia",this.get("width")),this.get("width")===null&&this.set("width",this.get("widthMedia")),!this.get("priority")&&this.set("priority",parseFloat(this.get("widthMedia"))||0);var t=["width","height","widthMedia"];t.forEach(function(a){return e.checkUnit(a)})},r.prototype.checkUnit=function(e){var t=this.get(e)||"",a=(parseFloat(t)||0).toString()===t.toString();a&&this.set(e,"".concat(t,"px"))},r.prototype.getName=function(){return this.get("name")||this.get("id")},r.prototype.getWidthMedia=function(){return this.get("widthMedia")||""},r})(Sr.Kx);const c6=NZ;var kZ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),d6=(function(s){kZ(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r})(Sr.pM);const dT=d6;d6.prototype.model=c6;var _Z=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),EZ=function(s,r){return Object.defineProperty?Object.defineProperty(s,"raw",{value:r}):s.raw=r,s},TZ=(function(s){_Z(r,s);function r(e){var t=s.call(this,e)||this;return t.config=e.config||{},t.em=t.config.em,t.ppfx=t.config.pStylePrefix||"",t.listenTo(t.em,"change:device",t.updateSelect),t}return r.prototype.template=function(e){var t=e.ppfx,a=e.label;return Ei(uT||(uT=EZ([`
      <div class="`,'device-label">',`</div>
      <div class="`,"field ",`select">
        <span id="`,`input-holder">
          <select class="`,`devices"></select>
        </span>
        <div class="`,`sel-arrow">
          <div class="`,`d-s-arrow"></div>
        </div>
      </div>
      <button style="display:none" class="`,`add-trasp" data-add-trasp>+</button>
    `],[`
      <div class="`,'device-label">',`</div>
      <div class="`,"field ",`select">
        <span id="`,`input-holder">
          <select class="`,`devices"></select>
        </span>
        <div class="`,`sel-arrow">
          <div class="`,`d-s-arrow"></div>
        </div>
      </div>
      <button style="display:none" class="`,`add-trasp" data-add-trasp>+</button>
    `])),t,a,t,t,t,t,t,t,t)},r.prototype.events=function(){return{change:"updateDevice","click [data-add-trasp]":"startAdd"}},r.prototype.startAdd=function(){},r.prototype.updateDevice=function(){var e=this.em;if(e){var t=this.devicesEl;e.set("device",t?t.val():"")}},r.prototype.updateSelect=function(){var e=this,t=e.em,a=e.devicesEl;if(t&&t.getDeviceModel&&a){var o=t.getDeviceModel();a.val(o?o.get("id"):"")}},r.prototype.getOptions=function(){var e=this,t=e.collection,a=e.em,o="";return t.forEach(function(i){var l=i.attributes,c=l.name,d=l.id,p=a&&a.t&&a.t("deviceManager.devices.".concat(d))||c;o+='<option value="'.concat(d||c,'">').concat(p,"</option>")}),o},r.prototype.render=function(){var e=this,t=e.em,a=e.ppfx,o=e.$el,i=e.el,l=t&&t.t&&t.t("deviceManager.device");return o.html(this.template({ppfx:a,label:l})),this.devicesEl=o.find(".".concat(a,"devices")),this.devicesEl.append(this.getOptions()),this.devicesEl.val(t.get("device")),i.className="".concat(a,"devices-c"),this},r})(Sr.Ss);const OZ=TZ;var uT,PZ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Dy=function(){return Dy=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Dy.apply(this,arguments)},AZ=(function(s){PZ(r,s);function r(e){var t,a=s.call(this,e,"DeviceManager",new dT,tA,CZ())||this;return a.Device=c6,a.Devices=dT,a.storageKey="",a.devices=a.all,(t=a.config.devices)===null||t===void 0||t.forEach(function(o){return a.add(o,{silent:!0})}),a.select(a.config.default||a.devices.at(0)),e.on("change:device",a._onSelect,a),a}return r.prototype._onSelect=function(e,t,a){var o=this,i=o.em,l=o.events,c=e.previous("device"),d=this.get(t),p=l.select;i.trigger(p,d,this.get(c)),this.__catchAllEvent(p,d,a)},r.prototype.add=function(e,t){t===void 0&&(t={});var a,o=t;if((0,_e.isString)(e)){var i=t;o=arguments[2]||{},a=Dy(Dy({},o),{id:e,name:o.name||e,width:i})}else a=e;return a.id||(a.id=a.name||this._createId()),this.devices.add(a,o)},r.prototype.get=function(e){var t=this.getAll().filter(function(a){return a.get("name")===e})[0];return t||this.devices.get(e)||null},r.prototype.remove=function(e,t){return t===void 0&&(t={}),this.__remove(e,t)},r.prototype.getDevices=function(){return this.devices.models},r.prototype.select=function(e,t){t===void 0&&(t={});var a=(0,_e.isString)(e)?this.get(e):e;return a&&this.em.set("device",a.get("id"),t),this},r.prototype.getSelected=function(){return this.get(this.em.get("device"))},r.prototype.getAll=function(){return this.devices},r.prototype.render=function(){var e,t=this.em;return(e=this.view)===null||e===void 0||e.remove(),this.view=new OZ({collection:this.devices,config:Dy({em:t},this.config)}),this.view.render().el},r.prototype.destroy=function(){this.__destroy()},r})(lu);const MZ=AZ;var IZ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),RZ=(function(s){IZ(r,s);function r(e,t){t===void 0&&(t={});var a=s.call(this,e,t)||this,o=t.em,i={};a.em=o,e.frames||(i.component=e.component,i.styles=e.styles,["component","styles"].map(function(d){return a.unset(d)}));var l=e.frames||[i],c=new nA(o.Canvas,l);return c.page=a,a.set("frames",c),!a.getId()&&a.set("id",o?.Pages._createId()),o?.UndoManager.add(c),a}return r.prototype.defaults=function(){return{name:"",frames:[],_undo:!0}},r.prototype.onRemove=function(){this.getFrames().reset()},r.prototype.getFrames=function(){return this.get("frames")},r.prototype.getId=function(){return this.id},r.prototype.getName=function(){return this.get("name")},r.prototype.setName=function(e){return this.set({name:e})},r.prototype.getAllFrames=function(){return this.getFrames().models||[]},r.prototype.getMainFrame=function(){return this.getFrames().at(0)},r.prototype.getMainComponent=function(){var e=this.getMainFrame();return e?.getComponent()},r.prototype.toJSON=function(e){e===void 0&&(e={});var t=Sr.Kx.prototype.toJSON.call(this,e),a=(0,_e.result)(this,"defaults");return(0,_e.forEach)(t,function(o,i){i.indexOf("_")===0&&delete t[i]}),(0,_e.forEach)(a,function(o,i){t[i]===o&&delete t[i]}),t},r})(Sr.Kx);const dN=RZ;var DZ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Xb=function(){return Xb=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Xb.apply(this,arguments)},LZ=(function(s){DZ(r,s);function r(e,t){var a=s.call(this,e)||this;return a.on("reset",a.onReset),a.on("remove",a.onRemove),a.model=function(o,i){return i===void 0&&(i={}),new dN(o,Xb(Xb({},i),{em:t}))},a}return r.prototype.onReset=function(e,t){var a=this,o;(o=t?.previousModels)===null||o===void 0||o.map(function(i){return a.onRemove(i,a,t)})},r.prototype.onRemove=function(e,t,a){a===void 0&&(a={}),!(a.fromUndo||a.temporary)&&e?.onRemove()},r})(Sr.pM);const FZ=LZ;var BZ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Zh=function(){return Zh=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Zh.apply(this,arguments)},zZ=function(s,r){var e={};for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&r.indexOf(t)<0&&(e[t]=s[t]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(s);a<t.length;a++)r.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(s,t[a])&&(e[t[a]]=s[t[a]]);return e},$Z=function(s,r,e){if(e||arguments.length===2)for(var t=0,a=r.length,o;t<a;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return s.concat(o||Array.prototype.slice.call(r))},fT="change:selected",pT="main",UZ=(function(s){BZ(r,s);function r(e){var t=s.call(this,e,"PageManager",new FZ([],e),zS)||this;t.events=zS,t.storageKey="pages",(0,_e.bindAll)(t,"_onPageChange");var a=new of.A(t,{_undo:!0});return t.model=a,t.pages.on("reset",t.__onReset,t),t.pages.on("all",t.__onChange,t),a.on(fT,t._onPageChange),t}return Object.defineProperty(r.prototype,"pages",{get:function(){return this.all},enumerable:!1,configurable:!0}),r.prototype.getAll=function(){return $Z([],this.all.models,!0)},r.prototype.__onChange=function(e,t,a,o){var i=this,l=i.em,c=i.events,d=o||a;l.trigger(c.all,{event:e,page:t,options:d})},r.prototype.__onReset=function(){var e=this.pages.at(0);e&&this.select(e)},r.prototype.onLoad=function(){var e,t=this,a=t.pages,o=t.config,i=t.em,l={silent:!0},c=((e=o.pages)===null||e===void 0?void 0:e.map(function(p){return new dN(p,{em:i,config:o})}))||[];a.add(c,l);var d=a.length?this._initPage():this.add({type:pT},l);d&&this.select(d,l)},r.prototype._onPageChange=function(e,t,a){var o=this,i=o.em,l=o.events,c=i.Layers,d=t.getMainComponent();c&&d&&c.setRoot(d),i.trigger(l.select,t,e.previous("selected")),this.__onChange(fT,t,a)},r.prototype.postLoad=function(){var e=this,t=e.em,a=e.model,o=e.pages,i=t.UndoManager;i.add(a),i.add(o),o.on("add remove reset change",function(l,c,d){var p=d||c;t.changesUp(d||c,{page:l,options:p})})},r.prototype.add=function(e,t){var a=this;t===void 0&&(t={});var o=this,i=o.em,l=o.events;e.id=e.id||this._createId();var c=function(){var d=a.pages.add(new dN(e,{em:a.em,config:a.config}),t);return t.select&&a.select(d),d};return!t.silent&&i.trigger(l.addBefore,e,c,t),t.abort?void 0:c()},r.prototype.remove=function(e,t){var a=this;t===void 0&&(t={});var o=this,i=o.em,l=o.events,c=(0,_e.isString)(e)?this.get(e):e,d=function(){return c&&a.pages.remove(c,t),c};return!t.silent&&i.trigger(l.removeBefore,c,d,t),!t.abort&&d()},r.prototype.move=function(e,t){t===void 0&&(t={});var a=this.pages,o=(0,_e.isString)(e)?this.get(e):e,i=t.at,l=i===void 0?0:i,c=zZ(t,["at"]);if(o){var d=a.indexOf(o),p=d===l;if(!(l<0||l>=a.length||p))return this.remove(o,Zh(Zh({},c),{temporary:!0})),a.add(o,Zh(Zh({},c),{at:l})),o}},r.prototype.get=function(e){return this.pages.filter(function(t){return t.get(t.idAttribute)===e})[0]},r.prototype.getMain=function(){var e=this.pages;return e.filter(function(t){return t.get("type")===pT})[0]||e.at(0)},r.prototype.getAllWrappers=function(){var e=this.getAll();return(0,_e.unique)((0,_e.flatten)(e.map(function(t){return t.getAllFrames().map(function(a){return a.getComponent()})})))},r.prototype.select=function(e,t){t===void 0&&(t={});var a=this,o=a.em,i=a.model,l=a.events,c=(0,_e.isString)(e)?this.get(e):e;return c&&(o.trigger(l.selectBefore,c,t),i.set("selected",c,t)),this},r.prototype.getSelected=function(){return this.model.get("selected")},r.prototype.destroy=function(){var e=this;this.pages.off().reset(),this.model.stopListening(),this.model.clear({silent:!0}),["selected","model"].map(function(t){return e[t]=0})},r.prototype.store=function(){return this.getProjectData()},r.prototype.load=function(e){var t=this,a=this.loadProjectData(e,{all:this.pages,reset:!0,onResult:function(o,i){o.forEach(function(l){return t.add(l,i)}),t.__onReset()}});return this.pages.forEach(function(o){return o.getFrames().initRefs()}),a},r.prototype._initPage=function(){return this.get(this.config.selected)||this.getMain()},r.prototype._createId=function(){var e=this.getAll(),t=e.length+16,a=this.getAllMap(),o;do o=(0,Zt.createId)(t);while(a[o]);return o},r})(lu);const VZ=UZ;var wC={placeholder:"eg. Text here"};const HZ={assetManager:{addButton:"Add image",inputPlh:"http://path/to/the/image.jpg",modalTitle:"Select Image",uploadTitle:"Drop files here or click to upload"},blockManager:{labels:{},categories:{}},domComponents:{names:{"":"Box",wrapper:"Body",text:"Text",comment:"Comment",image:"Image",video:"Video",label:"Label",link:"Link",map:"Map",tfoot:"Table foot",tbody:"Table body",thead:"Table head",table:"Table",row:"Table row",cell:"Table cell"}},deviceManager:{device:"Device",devices:{desktop:"Desktop",tablet:"Tablet",mobileLandscape:"Mobile Landscape",mobilePortrait:"Mobile Portrait"}},panels:{buttons:{titles:{preview:"Preview",fullscreen:"Fullscreen","sw-visibility":"View components","export-template":"View code","open-sm":"Open Style Manager","open-tm":"Settings","open-layers":"Open Layer Manager","open-blocks":"Open Blocks"}}},selectorManager:{label:"Classes",selected:"Selected",emptyState:"- State -",states:{hover:"Hover",active:"Click","nth-of-type(2n)":"Even/Odd"}},styleManager:{empty:"Select an element before using Style Manager",layer:"Layer",fileButton:"Images",sectors:{general:"General",layout:"Layout",typography:"Typography",decorations:"Decorations",extra:"Extra",flex:"Flex",dimension:"Dimension"},properties:{"text-shadow-h":"X","text-shadow-v":"Y","text-shadow-blur":"Blur","text-shadow-color":"Color","box-shadow-h":"X","box-shadow-v":"Y","box-shadow-blur":"Blur","box-shadow-spread":"Spread","box-shadow-color":"Color","box-shadow-type":"Type","margin-top-sub":"Top","margin-right-sub":"Right","margin-bottom-sub":"Bottom","margin-left-sub":"Left","padding-top-sub":"Top","padding-right-sub":"Right","padding-bottom-sub":"Bottom","padding-left-sub":"Left","border-width-sub":"Width","border-style-sub":"Style","border-color-sub":"Color","border-top-left-radius-sub":"Top Left","border-top-right-radius-sub":"Top Right","border-bottom-right-radius-sub":"Bottom Right","border-bottom-left-radius-sub":"Bottom Left","transform-rotate-x":"Rotate X","transform-rotate-y":"Rotate Y","transform-rotate-z":"Rotate Z","transform-scale-x":"Scale X","transform-scale-y":"Scale Y","transform-scale-z":"Scale Z","transition-property-sub":"Property","transition-duration-sub":"Duration","transition-timing-function-sub":"Timing","background-image-sub":"Image","background-repeat-sub":"Repeat","background-position-sub":"Position","background-attachment-sub":"Attachment","background-size-sub":"Size"}},traitManager:{empty:"Select an element before using Trait Manager",label:"Component settings",categories:{},traits:{labels:{},attributes:{id:wC,alt:wC,title:wC,href:{placeholder:"eg. https://google.com"}},options:{target:{false:"This window",_blank:"New window"}}}},storageManager:{recover:"Do you want to recover unsaved changes?"}};var WZ=function(){return{locale:"en",localeFallback:"en",detectLocale:!0,debug:!1,messages:{en:HZ},messagesAdd:void 0}};const qZ=WZ;var uN;(function(s){s.add="i18n:add",s.update="i18n:update",s.locale="i18n:locale"})(uN||(uN={}));const GZ=uN;var KZ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),YZ=(function(s){KZ(r,s);function r(e){var t=s.call(this,e,"I18n",qZ())||this;t.events=GZ;var a=t.config.messagesAdd;return a&&t.addMessages(a),t.config.detectLocale&&(t.config.locale=t._localLang()),t}return r.prototype.setLocale=function(e){var t=this,a=t.em,o=t.config,i=t.events;return a.trigger(i.locale,{value:e,valuePrev:o.locale}),o.locale=e,this},r.prototype.getLocale=function(){return this.config.locale},r.prototype.getMessages=function(e,t){t===void 0&&(t={});var a=this.config.messages;return e&&!a[e]&&this._debug("'".concat(e,"' i18n lang not found"),t),e?a[e]:a},r.prototype.setMessages=function(e){var t=this,a=t.em,o=t.config,i=t.events;return o.messages=e,a.trigger(i.update,e),this},r.prototype.addMessages=function(e){var t=this,a=t.em,o=t.events,i=t.config,l=i.messages;return a.trigger(o.add,e),this.setMessages((0,Zt.deepMerge)(l,e)),this},r.prototype.t=function(e,t){t===void 0&&(t={});var a=this.config,o=t.params||{},i=t.l||this.getLocale(),l=t.lFlb||a.localeFallback,c=this._getMsg(e,i,t);return c||(c=this._getMsg(e,l,t)),!c&&this._debug("'".concat(e,"' i18n key not found in '").concat(i,"' lang"),t),c=c&&(0,_e.isString)(c)?this._addParams(c,o):c,c},r.prototype._localLang=function(){var e=(0,Zt.hasWin)()&&window.navigator||{},t=e.language||e.userLanguage;return t?t.split("-")[0]:"en"},r.prototype._addParams=function(e,t){var a=new RegExp("{([\\w\\d-]*)}","g");return e.replace(a,function(o,i){return t[i]||""}).trim()},r.prototype._getMsg=function(e,t,a){a===void 0&&(a={});var o=this.getMessages(t,a);if(o){var i=o[e];return!i&&e.indexOf(".")>0&&(i=e.split(".").reduce(function(l,c){if(!(0,_e.isUndefined)(l))return l[c]},o)),i}},r.prototype._debug=function(e,t){t===void 0&&(t={});var a=this,o=a.em,i=a.config;(t.debug||i.debug)&&o&&o.logWarning(e)},r.prototype.destroy=function(){},r})(Di);const ZZ=YZ;var cp=function(){return cp=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},cp.apply(this,arguments)},XZ=function(s,r){r===void 0&&(r={});var e=r.prefix||"",t=document.createElement("i");return t.className=e+"resizer-h "+e+"resizer-h-"+s,t.setAttribute("data-"+e+"handler",s),t},QZ=function(s,r){var e=window,t=s.getBoundingClientRect();return{left:t.left+e.pageXOffset,top:t.top+e.pageYOffset,width:t.width,height:t.height}},JZ=(function(){function s(r){r===void 0&&(r={}),this.moved=!1,this.defOpts={ratioDefault:!1,onUpdateContainer:function(){},step:1,minDim:10,maxDim:1/0,unitHeight:"px",unitWidth:"px",keyHeight:"height",keyWidth:"width",currentUnit:!0,silentFrames:!1,avoidContainerUpdate:!1,keepAutoHeight:!1,keepAutoWidth:!1,autoHeight:!1,autoWidth:!1,tl:!0,tc:!0,tr:!0,cl:!0,cr:!0,bl:!0,bc:!0,br:!0},this.opts=cp({},this.defOpts),this.setOptions(r),(0,_e.bindAll)(this,"handleKeyDown","handleMouseDown","move","stop")}return s.prototype.getConfig=function(){return this.opts},s.prototype.setOptions=function(r,e){r===void 0&&(r={}),this.opts=cp(cp({},e?this.defOpts:this.opts),r),this.setup()},s.prototype.setup=function(){var r=this.opts,e=r.prefix||"",t=r.appendTo||document.body,a=this.container;for(a||(a=document.createElement("div"),a.className="".concat(e,"resizer-c"),t.appendChild(a),this.container=a);a.firstChild;)a.removeChild(a.firstChild);var o={};["tl","tc","tr","cl","cr","bl","bc","br"].forEach(function(c){return o[c]=r[c]?XZ(c,r):null});for(var i in o){var l=o[i];l&&a.appendChild(l)}this.handlers=o,this.mousePosFetcher=r.mousePosFetcher,this.updateTarget=r.updateTarget,this.posFetcher=r.posFetcher,this.onStart=r.onStart,this.onMove=r.onMove,this.onEnd=r.onEnd,this.onUpdateContainer=r.onUpdateContainer},s.prototype.toggleFrames=function(r){if(this.opts.silentFrames){var e=document.querySelectorAll("iframe");(0,_e.each)(e,function(t){return t.style.pointerEvents=r?"none":""})}},s.prototype.isHandler=function(r){var e=this.handlers;for(var t in e)if(e[t]===r)return!0;return!1},s.prototype.getFocusedEl=function(){return this.el},s.prototype.getParentEl=function(){var r;return(r=this.el)===null||r===void 0?void 0:r.parentElement},s.prototype.getDocumentEl=function(){return this.opts.docs||[this.el.ownerDocument,document]},s.prototype.getElementPos=function(r,e){e===void 0&&(e={});var t=this.posFetcher;return t?t(r,e):QZ(r)},s.prototype.focus=function(r){r&&r===this.el||(this.el=r,this.updateContainer({forceShow:!0}),(0,Ar.on)(this.getDocumentEl(),"pointerdown",this.handleMouseDown))},s.prototype.blur=function(){this.container.style.display="none",this.el&&((0,Ar.AU)(this.getDocumentEl(),"pointerdown",this.handleMouseDown),delete this.el)},s.prototype.start=function(r){var e,t=this,a=t.el,o=t.opts,i=o===void 0?{}:o;if(this.moved=!1,!(r.button!==0||!a)){r.preventDefault(),r.stopPropagation(),(e=this.selectedHandler)===null||e===void 0||e.setPointerCapture(r.pointerId);var l=this.getParentEl(),c=this,d=i,p=this.mousePosFetcher,h="data-"+d.prefix+"handler",g=this.getElementPos(a,{avoidFrameZoom:!0,avoidFrameOffset:!0}),y=this.getElementPos(l),b=r.target;this.handlerAttr=b.getAttribute(h),this.clickedHandler=b,this.startDim={t:g.top,l:g.left,w:g.width,h:g.height},this.rectDim={t:g.top,l:g.left,w:g.width,h:g.height},this.startPos=p?p(r):{x:r.clientX,y:r.clientY},this.parentDim={t:y.top,l:y.left,w:y.width,h:y.height};var v=this.getDocumentEl();this.docs=v,(0,Ar.on)(v,"pointermove",this.move),(0,Ar.on)(v,"keydown",this.handleKeyDown),(0,Ar.on)(v,"pointerup",this.stop),(0,_e.isFunction)(this.onStart)&&this.onStart(r,{docs:v,config:d,el:a,resizer:c}),this.toggleFrames(!0),!d.updateOnMove&&this.move(r)}},s.prototype.move=function(r){var e,t;this.moved=!0;var a=this.el,o=this.opts,i=this.docs||this.getDocumentEl(),l=((e=this.mousePosFetcher)===null||e===void 0?void 0:e.call(this,r))||{x:r.clientX,y:r.clientY};this.currentPos=l,this.delta={x:l.x-this.startPos.x,y:l.y-this.startPos.y},this.keys={shift:r.shiftKey,ctrl:r.ctrlKey,alt:r.altKey},this.rectDim=this.calc(this),this.updateRect(!1,r),(t=this.onMove)===null||t===void 0||t.call(this,r,{docs:i,config:o,el:a,resizer:this})},s.prototype.stop=function(r){var e,t,a=this.el,o=this.opts,i=this.docs||this.getDocumentEl();(0,Ar.AU)(i,"pointermove",this.move),(0,Ar.AU)(i,"keydown",this.handleKeyDown),(0,Ar.AU)(i,"pointerup",this.stop),(this.moved||!o.updateOnMove)&&this.updateRect(!0,r),r.pointerId&&((e=this.selectedHandler)===null||e===void 0||e.releasePointerCapture(r.pointerId)),this.toggleFrames(),(t=this.onEnd)===null||t===void 0||t.call(this,r,{docs:i,config:o,el:a,resizer:this}),this.moved=!1,delete this.docs},s.prototype.updateRect=function(r,e){var t=this.el,a=this,o=this.opts,i=this.rectDim,l=this.updateTarget,c=this.getSelectedHandler(),d=o.unitHeight,p=o.unitWidth,h=o.keyWidth,g=o.keyHeight;if((0,_e.isFunction)(l))l(t,i,{store:r,selectedHandler:c,resizer:a,config:o,event:e});else{var y=t.style;y[h]=i.w+p,y[g]=i.h+d}this.updateContainer()},s.prototype.updateContainer=function(r){var e;r===void 0&&(r={});var t=this,a=t.opts,o=t.container,i=t.el,l=o.style;!a.avoidContainerUpdate&&i&&r.forceShow&&(l.display="block"),(e=this.onUpdateContainer)===null||e===void 0||e.call(this,{el:o,resizer:this,opts:cp(cp({},a),r)})},s.prototype.getSelectedHandler=function(){var r=this.handlers;if(this.selectedHandler){for(var e in r)if(r[e]===this.selectedHandler)return e}},s.prototype.handleKeyDown=function(r){r.keyCode===27&&(this.rectDim=this.startDim,this.stop(r))},s.prototype.handleMouseDown=function(r){var e=r.target;this.isHandler(e)?(this.selectedHandler=e,this.start(r)):e!==this.el&&(delete this.selectedHandler,this.blur())},s.prototype.calc=function(r){var e,t=this.opts||{},a=t.step,o=this.startDim,i=t.minDim,l=t.maxDim,c=r.delta.x,d=r.delta.y,p=this.parentDim.w,h=this.parentDim.h,g=t.unitWidth,y=t.unitHeight,b=t.skipUnitAdjustments,v=this.getParentRect(),w=g==="%"&&!b,C=y==="%"&&!b,k=w?o.w/100*p:o.w,N=C?o.h/100*h:o.h,O={t:o.t-v.top,l:o.l-v.left,w:k,h:N};if(r){var R=r.handlerAttr;~R.indexOf("r")&&(e=w?(0,Zt.normalizeFloat)((k+c*a)/p*100,.01):(0,Zt.normalizeFloat)(k+c*a,a),e=Math.max(i,e),l&&(e=Math.min(l,e)),O.w=e),~R.indexOf("b")&&(e=C?(0,Zt.normalizeFloat)((N+d*a)/h*100,.01):(0,Zt.normalizeFloat)(N+d*a,a),e=Math.max(i,e),l&&(e=Math.min(l,e)),O.h=e),~R.indexOf("l")&&(e=w?(0,Zt.normalizeFloat)((k-c*a)/p*100,.01):(0,Zt.normalizeFloat)(k-c*a,a),e=Math.max(i,e),l&&(e=Math.min(l,e)),O.w=e),~R.indexOf("t")&&(e=C?(0,Zt.normalizeFloat)((N-d*a)/h*100,.01):(0,Zt.normalizeFloat)(N-d*a,a),e=Math.max(i,e),l&&(e=Math.min(l,e)),O.h=e);var L=t.ratioDefault?!r.keys.shift:r.keys.shift;if(R.indexOf("c")<0&&L){var B=o.w/o.h;O.w/O.h>B?O.h=Math.round(O.w/B):O.w=Math.round(O.h*B)}~R.indexOf("l")&&(O.l+=o.w-O.w),~R.indexOf("t")&&(O.t+=o.h-O.h);for(var G in O){var $=G;O[$]=parseInt("".concat(O[$]),10)}return O}},s.prototype.getParentRect=function(){var r={left:0,top:0,width:0,height:0},e=this.el;if(!e)return r;var t=e.offsetParent;return t&&t.tagName!=="BODY"&&(r=this.getElementPos(t)),r},s})();const eX=JZ;var Yi=function(){return Yi=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Yi.apply(this,arguments)};function tX(s,r,e){for(var t={index:0,placement:"before"},a=0,o=0,i=0,l=0,c=0,d=0,p=0,h,g=0,y=s.length;g<y;g++){h=s[g];var b=h.top,v=h.left,w=h.height,C=h.width;if(i=v+C,p=b+w,c=v+C/2,d=b+w/2,!(o&&v>o||l&&d>=l||a&&i<a))if(t.index=g,!h.dir)e<p&&(l=p),r<c?(o=c,t.placement="before"):(a=c,t.placement="after");else if(e<d){t.placement="before";break}else t.placement="after"}return t}function hT(s){var r=s.getBoundingClientRect();return{top:r.top+document.body.scrollTop,left:r.left+document.body.scrollLeft}}function G2(s,r){return Zt.matches.call(s,r)}function rX(s,r){var e=fN(s),t=fN(r),a=t.filter(function(c){return e.includes(c)}),o=a[0];if(!o)return s.model.index()-r.model.index();var i=t[t.indexOf(o)-1],l=e[e.indexOf(o)-1];return l.index()-i.index()}function fN(s){return s?[s].concat(fN(s.parent())):[]}function nX(s,r){if(s)for(var e=s.parentNode;e&&e.nodeType===1;){if(G2(e,r))return e;e=e.parentNode}}function sX(s,r){if((0,Ar.ir)(s))return!1;var e=s.style||{},t=(0,go.default)(s),a=(0,go.default)(r);if(e.overflow&&e.overflow!=="visible")return!1;var o=t.css("float");return o&&o!=="none"||a.css("display")==="flex"&&a.css("flex-direction")!=="column"||!aX(e.position)?!1:oX(s)||iX(t)}function aX(s){switch(s){case"static":case"relative":case"":return!0;default:return!1}}function oX(s){var r=["TR","TBODY","THEAD","TFOOT"];return r.includes(s.tagName)}function iX(s){var r=s.css("display"),e=["block","list-item","table","flex","grid"];return e.includes(r)}function lX(s){var r={containerContext:{container:"",placeholderElement:"",containerSel:"*",itemSel:"*",pfx:"",document},positionOptions:{borderOffset:10,relative:!1,windowMargin:0,offsetTop:0,offsetLeft:0,scale:1,canvasRelative:!1},dragBehavior:{dragDirection:Op.A.Vertical,nested:!1,selectOnEnd:!0},eventHandlers:{}},e=Yi(Yi(Yi({},r),s),{containerContext:Yi(Yi({},r.containerContext),s.containerContext),positionOptions:Yi(Yi({},r.positionOptions),s.positionOptions),dragBehavior:Yi(Yi({},r.dragBehavior),s.dragBehavior),eventHandlers:Yi(Yi({},r.eventHandlers),s.eventHandlers)});return e}var u6=(function(){function s(r){this.timeout=null,this.threshold=r}return s.prototype.updateArgs=function(r){this.lastArgs=r},s.prototype.execute=function(r){var e=this;this.timeout||(this.timeout=setTimeout(function(){e.lastArgs&&r(e.lastArgs),e.timeout=null},this.threshold))},s.prototype.clearTimeout=function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),delete this.lastArgs},s})(),pN=function(){return pN=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},pN.apply(this,arguments)},cX=(function(){function s(r){this.top=r.top,this.left=r.left,this.height=r.height,this.width=r.width,this.offsets=r.offsets,this.dir=r.dir}return s.prototype.calculateDimensionDifference=function(r){var e=r.top-this.top,t=r.left-this.left;return{topDifference:e,leftDifference:t}},s.prototype.adjustDimensions=function(r){return this.top+=r.topDifference,this.left+=r.leftDifference,this},s.prototype.determinePlacement=function(r,e){var t=this.left+this.width/2,a=this.top+this.height/2;return this.dir?e<a?"before":"after":r<t?"before":"after"},s.prototype.equals=function(r){return r?this.top===r.top&&this.left===r.left&&this.height===r.height&&this.width===r.width&&this.dir===r.dir&&JSON.stringify(this.offsets)===JSON.stringify(r.offsets):!1},s.prototype.clone=function(){return new s({top:this.top,left:this.left,height:this.height,width:this.width,offsets:pN({},this.offsets),dir:this.dir})},s.prototype.getDropArea=function(r){var e=this.clone(),t=this.adjustDropDimension(this.width,this.left,r),a=t.newSize,o=t.newPosition;e.width=a,e.left=o;var i=this.adjustDropDimension(this.height,this.top,r),l=i.newSize,c=i.newPosition;return e.height=l,e.top=c,e},s.prototype.adjustDropDimension=function(r,e,t){var a=t.ratio,o=t.minUndroppableDimension,i=t.maxUndroppableDimension,l=r*(1-a)/2;l=Math.max(l,o),l=Math.min(l,i);var c=r-l*2,d=e+l;return{newSize:c,newPosition:d}},s.prototype.isWithinBounds=function(r,e){return r>=this.left&&r<=this.left+this.width&&e>=this.top&&e<=this.top+this.height},s})();const dX=cX;var uX=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),fX=(function(s){uX(r,s);function r(e){var t=s.call(this)||this;return t.sourceNodes=[],t.containerOffset={top:0,left:0},t.moveThreshold=20,t.treeClass=e.treeClass,t.em=e.em,t.containerContext=e.containerContext,t.positionOptions=e.positionOptions,t.dragDirection=e.dragDirection,t.eventHandlers=e.eventHandlers,(0,_e.bindAll)(t,"endDrag","cancelDrag","recalculateTargetOnScroll","startSort","onDragStart","onMove"),t.restLastMoveData(),t.rateLimiter=new u6(t.moveThreshold),t}return r.prototype.startSort=function(e){this.sourceNodes=e,this.bindDragEventHandlers()},r.prototype.bindDragEventHandlers=function(){(0,Ar.on)(this.containerContext.container,"dragstart",this.onDragStart),(0,Ar.on)(this.containerContext.container,"mousemove dragover",this.onMove),(0,Ar.on)(this.containerContext.document,"mouseup dragend touchend",this.endDrag)},r.prototype.recalculateTargetOnScroll=function(){var e=this.lastMoveData.mouseEvent;e&&this.onMove(e)},r.prototype.onMove=function(e){this.rateLimiter.updateArgs(e),this.rateLimiter.execute(this.handleMove.bind(this))},r.prototype.handleMove=function(e){var t,a,o,i,l,c,d;this.adjustForScroll();var p=this.lastMoveData.targetNode;(a=(t=this.eventHandlers).onMouseMove)===null||a===void 0||a.call(t,e),this.cacheContainerPosition();var h=this.getMousePositionRelativeToContainer(e.clientX,e.clientY),g=h.mouseXRelative,y=h.mouseYRelative,b=this.getMouseTargetElement(e),v=this.getFirstElementWithAModel(b),w=v?(o=(0,go.default)(v))===null||o===void 0?void 0:o.data("model"):void 0,C=w?this.getOrCreateHoveredNode(w):void 0,k=C?this.getIndexInParent(C,C.nodeDimensions,g,y):0,N=C?this.getValidParent(C,0,g,y):void 0,O=!N?.equals(p);if(O&&((l=(i=this.eventHandlers).onTargetChange)===null||l===void 0||l.call(i,p,N)),!N||!C){this.triggerLegacyOnMoveCallback(e,0),this.triggerMoveEvent(g,y),this.restLastMoveData();return}var R=this.getDropPosition(N,g,y),L=R.index,B=R.placement,G=R.placeholderDimensions,$=!G.equals(this.lastMoveData.placeholderDimensions)||B!==this.lastMoveData.placement;$&&((d=(c=this.eventHandlers).onPlaceholderPositionChange)===null||d===void 0||d.call(c,G,B)),this.lastMoveData={targetNode:N,hoveredNode:C,mouseEvent:e,index:L,hoveredIndex:k,placement:B,placeholderDimensions:G},this.triggerMoveEvent(g,y),this.triggerLegacyOnMoveCallback(e,L)},r.prototype.adjustForScroll=function(){var e,t,a=this.lastMoveData.targetNode;if(a?.element){var o=this.getDim(a?.element),i=(e=a.nodeDimensions)===null||e===void 0?void 0:e.calculateDimensionDifference(o);i&&a.adjustDimensions(i)}var l=this.lastMoveData.hoveredNode;if(l?.element){var o=this.getDim(l?.element),i=(t=l.nodeDimensions)===null||t===void 0?void 0:t.calculateDimensionDifference(o);i&&l.adjustDimensions(i)}},r.prototype.restLastMoveData=function(){this.lastMoveData={targetNode:void 0,index:void 0,placement:void 0,mouseEvent:void 0}},r.prototype.triggerLegacyOnMoveCallback=function(e,t){var a,o,i,l,c=(a=this.sourceNodes[0])===null||a===void 0?void 0:a.model;(i=(o=this.eventHandlers).legacyOnMoveClb)===null||i===void 0||i.call(o,{event:e,target:c,parent:(l=this.lastMoveData.targetNode)===null||l===void 0?void 0:l.model,index:t})},r.prototype.triggerMoveEvent=function(e,t){var a,o=this.lastMoveData,i=o.targetNode,l=o.placement,c=o.index,d=c?c+(l==="after"?-1:0):0;this.em.trigger("sorter:drag",{target:i?.element||null,targetModel:(a=this.lastMoveData.targetNode)===null||a===void 0?void 0:a.model,sourceModel:this.sourceNodes[0].model,dims:i?.childrenDimensions||[],pos:{index:d,indexEl:d,placement:l},x:e,y:t})},r.prototype.getDropPosition=function(e,t,a){var o,i=e.nodeDimensions,l=e.childrenDimensions,c=e.getChildren(),d=c&&c.length>0;i=i||this.getDim(e.element),e.nodeDimensions=i,l=l||this.getChildrenDim(e),e.childrenDimensions=l;var p=i.clone(),h=0,g="inside";return d&&(o=tX(l,t,a),h=o.index,g=o.placement,p=l[h].clone(),h=h+(g=="after"?1:0)),{index:h,placement:g,placeholderDimensions:p}},r.prototype.getOrCreateHoveredNode=function(e){var t=this.lastMoveData.hoveredNode,a=new this.treeClass(e),o=a.equals(t),i=o?t:a;return i.nodeDimensions=o?t.nodeDimensions:this.getDim(a.element),i},r.prototype.getMouseTargetElement=function(e){var t=this.containerContext.customTarget,a=this.containerContext.document.elementFromPoint(e.clientX,e.clientY),o=t?t({event:e}):a;return o},r.prototype.onDragStart=function(e){this.eventHandlers.onDragStart&&this.eventHandlers.onDragStart(e)},r.prototype.endDrag=function(){this.dropDragged()},r.prototype.cancelDrag=function(){var e,t,a=this.lastMoveData.targetNode;(t=(e=this.eventHandlers).onTargetChange)===null||t===void 0||t.call(e,a,void 0),this.finalizeMove()},r.prototype.finalizeMove=function(){var e,t,a,o;this.cleanupEventListeners(),this.triggerOnDragEndEvent(),(t=(e=this.eventHandlers).onEnd)===null||t===void 0||t.call(e),(o=(a=this.eventHandlers).legacyOnEnd)===null||o===void 0||o.call(a),this.restLastMoveData(),this.rateLimiter.clearTimeout()},r.prototype.dropDragged=function(){var e,t,a=this.lastMoveData,o=a.targetNode,i=a.index;(t=(e=this.eventHandlers).onDrop)===null||t===void 0||t.call(e,o,this.sourceNodes,i),this.finalizeMove()},r.prototype.triggerOnDragEndEvent=function(){var e=this.lastMoveData.targetNode,t=this.sourceNodes[0];this.em.trigger("sorter:drag:end",{targetCollection:e?e.getChildren():null,modelToDrop:t?.model,warns:[""],validResult:{result:!0,src:this.sourceNodes.map(function(a){return a.element}),srcModel:t?.model,trg:e?.element,trgModel:e?.model,draggable:!0,droppable:!0},dst:e?.element,srcEl:t?.element})},r.prototype.getFirstElementWithAModel=function(e){for(var t=function(a){return(0,go.default)(a).data("model")!==void 0};e&&this.containerContext.container.contains(e);){if(t(e))return e;e=e.parentElement}return null},r.prototype.getValidParent=function(e,t,a,o){var i,l;if(e){var c=this.lastMoveData,d=c.targetNode,p=c.hoveredNode,h=c.hoveredIndex,g=c.mouseEvent,y=e.equals(p);e.nodeDimensions=y?p.nodeDimensions:this.getDim(e.element);var b=this.getIndexInParent(e,e.nodeDimensions,a,o),v=b===h,w=e.isWithinDropBounds(a,o),C=y&&v&&w===e.isWithinDropBounds((i=g?.clientX)!==null&&i!==void 0?i:0,(l=g?.clientY)!==null&&l!==void 0?l:0);if(C&&d)return d;if(!w)return this.handleParentTraversal(e,a,o);var k=this.sourceNodes.some(function(N){return e.canMove(N,t)});return this.triggerDragValidation(k,e),k?e:this.handleParentTraversal(e,a,o)}},r.prototype.handleParentTraversal=function(e,t,a){var o=e.getParent();if(o){var i=this.getIndexInParent(e,e.nodeDimensions,t,a);if(i!==void 0)return this.getValidParent(o,i,t,a)}},r.prototype.getIndexInParent=function(e,t,a,o){var i=e.getParent();if(i){var l=i?.indexOfChild(e);return t.dir=this.getDirection(e.element,i.element),l=l+(t.determinePlacement(a,o)=="after"?1:0),l}},r.prototype.triggerDragValidation=function(e,t){var a=this.sourceNodes[0];return this.em.trigger("sorter:drag:validation",{valid:e,src:a?.element,srcModel:a?.model,trg:t.element,trgModel:t.model}),a},r.prototype.cleanupEventListeners=function(){var e=this.containerContext.container;(0,Ar.AU)(e,"dragstart",this.onDragStart),(0,Ar.AU)(e,"mousemove dragover",this.onMove),(0,Ar.AU)(this.containerContext.document,"mouseup dragend touchend",this.endDrag)},r.prototype.getDirection=function(e,t){var a;return this.dragDirection===Op.A.Vertical?a=!0:this.dragDirection===Op.A.Horizontal?a=!1:a=sX(e,t),a},r.prototype.getChildrenDim=function(e){var t=this,a=[],o=e.element;if(!o)return[];var i=e.getChildren();return!i||i.length===0?[]:((0,_e.each)(i,function(l,c){var d=l.element;if(d&&!(!(0,Ar.ir)(d)&&!G2(d,t.containerContext.itemSel))){var p=t.getDim(d);p.dir=t.getDirection(d,o),a.push(p)}}),a)},r.prototype.getMousePositionRelativeToContainer=function(e,t){var a=t-this.containerOffset.top+this.containerContext.container.scrollTop,o=e-this.containerOffset.left+this.containerContext.container.scrollLeft;if(this.positionOptions.canvasRelative){var i=this.em.Canvas.getMouseRelativeCanvas({clientX:e,clientY:t},{noScroll:1});o=i.x,a=i.y}return{mouseXRelative:o,mouseYRelative:a}},r.prototype.cacheContainerPosition=function(){var e=this.containerContext.container,t=hT(e),a=this.positionOptions.windowMargin?Math.abs(t.top):t.top,o=this.positionOptions.windowMargin?Math.abs(t.left):t.left;this.containerOffset={top:a,left:o}},r.prototype.getDim=function(e){var t=this.em,a=this.positionOptions.relative,o=this.positionOptions.windowMargin,i=t?.Canvas,l=i?i.getElementOffsets(e):{},c,d,p,h;if(this.positionOptions.canvasRelative&&this.em){var g=i.getElementPos(e,{noScroll:1});c=g.top,d=g.left,p=g.height,h=g.width}else{var y=hT(e);c=a?e.offsetTop:y.top-(o?-1:1)*this.containerOffset.top,d=a?e.offsetLeft:y.left-(o?-1:1)*this.containerOffset.left,p=e.offsetHeight,h=e.offsetWidth}return new dX({top:c,left:d,height:p,width:h,offsets:l})},r})(Sr.Ss),pX=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),hX=(function(s){pX(r,s);function r(e){var t=s.call(this)||this;return t.pfx=e.pfx||"",t.allowNesting=e.allowNesting||!1,t.container=e.container,t.setElement(e.el),t.offset={top:e.offset.top||0,left:e.offset.left||0},t.moveLimiter=new u6(100),t}return r.prototype.show=function(){this.el.style.display="block"},r.prototype.hide=function(){this.moveLimiter.clearTimeout(),this.el.style.display="none"},r.prototype.move=function(e,t){var a=this,o={elementDimension:e,placement:t};this.moveLimiter.updateArgs(o),this.moveLimiter.execute(function(i){var l=i.elementDimension,c=i.placement;a._move(l,c)})},r.prototype._move=function(e,t){var a=0,o="px",i=0,l=0,c="",d="";this.setOrientationForDimension(e);var p=e.top,h=e.left,g=e.height,y=e.width,b=e.dir,v=e.offsets;if(t==="inside"){if(this.setOrientation("horizontal"),!this.allowNesting){this.hide();return}var w=5,C=v?.paddingTop||w,k=v?.paddingLeft||w,N=v?.borderTopWidth||0,O=v?.borderLeftWidth||0,R=v?.borderRightWidth||0,L=O+R;i=p+C+N,l=h+k+O,c=Math.max(y-k*2-L,1)+"px",d="auto"}else b?(c=y+o,d="auto",i=t==="before"?p-a:p+g-a,l=h):(c="auto",d=g-a*2+o,i=p+a,l=t==="before"?h-a:h+y-a,this.setOrientation("vertical"));this.updateStyles(i,l,c,d),this.adjustOffset()},r.prototype.setOrientationForDimension=function(e){this.el.classList.remove("vertical"),this.el.classList.add("horizontal"),e&&!e.dir&&this.setOrientation("vertical")},r.prototype.setOrientation=function(e){this.el.classList.remove("horizontal"),this.el.classList.remove("vertical"),this.el.classList.add(e)},r.prototype.updateStyles=function(e,t,a,o){this.el.style.top=e+"px",this.el.style.left=t+"px",a&&(this.el.style.width=a),o&&(this.el.style.height=o)},r.prototype.adjustOffset=function(){this.$el.css("top","+="+this.offset.top+"px"),this.$el.css("left","+="+this.offset.left+"px")},r})(Sr.Ss),Xh=function(){return Xh=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Xh.apply(this,arguments)},mX=(function(){function s(r){var e=lX(r);(0,_e.bindAll)(this,"startSort","cancelDrag","recalculateTargetOnScroll","rollback","updateOffset","handlePlaceholderMove","finalizeMove"),this.containerContext=e.containerContext,this.positionOptions=e.positionOptions,this.dragBehavior=e.dragBehavior,this.eventHandlers=Xh(Xh({},e.eventHandlers),{onPlaceholderPositionChange:this.handlePlaceholderMove,onEnd:this.finalizeMove}),this.em=r.em,this.treeClass=r.treeClass,this.updateOffset(),this.em.on(this.em.Canvas.events.refresh,this.updateOffset),this.placeholder=this.createPlaceholder(),this.dropLocationDeterminer=new fX({em:this.em,treeClass:this.treeClass,containerContext:this.containerContext,positionOptions:this.positionOptions,dragDirection:this.dragBehavior.dragDirection,eventHandlers:this.eventHandlers})}return s.prototype.startSort=function(r){var e,t,a,o,i,l,c,d=this.getSourceNodes(r),p=d.sourceNodes,h=d.sourcesWithModel;this.sourceNodes=p,this.dropLocationDeterminer.startSort(p),this.bindDragEventHandlers(),(t=(e=this.eventHandlers).onStartSort)===null||t===void 0||t.call(e,this.sourceNodes,this.containerContext.container);var g=(a=this.sourceNodes[0])===null||a===void 0?void 0:a.model;(i=(o=this.eventHandlers).legacyOnStartSort)===null||i===void 0||i.call(o,{sorter:this,target:g,parent:g&&((l=g.parent)===null||l===void 0?void 0:l.call(g)),index:g&&((c=g.index)===null||c===void 0?void 0:c.call(g))}),this.em.trigger("sorter:drag:start",r[0],h[0])},s.prototype.validTarget=function(r,e,t){if(!r)return!1;var a=(0,go.default)(r).data("model");if(!a)return!1;var o=new this.treeClass(a),i=this.getSourceNodes(e).sourceNodes,l=i.some(function(c){return o.canMove(c,t)});return l},s.prototype.getSourceNodes=function(r){var e=this,t=r.filter(function(l){return!!l.dragSource||e.findValidSourceElement(l.element)}),a=t.map(function(l){var c,d;return{model:((c=l.dragSource)===null||c===void 0?void 0:c.model)||((d=(0,go.default)(l.element))===null||d===void 0?void 0:d.data("model")),content:l.dragSource}}),o=a.sort(function(l,c){return rX(l.model,c.model)}),i=o.map(function(l){return new e.treeClass(l.model,l.content)});return{sourceNodes:i,sourcesWithModel:a}},s.prototype.recalculateTargetOnScroll=function(){this.dropLocationDeterminer.recalculateTargetOnScroll()},s.prototype.cancelDrag=function(){this.triggerNullOnEndMove(!0),this.dropLocationDeterminer.cancelDrag()},s.prototype.endDrag=function(){this.dropLocationDeterminer.endDrag()},s.prototype.handlePlaceholderMove=function(r,e){this.ensurePlaceholderElement(),this.updatePlaceholderPosition(r,e)},s.prototype.createPlaceholder=function(){return new hX({container:this.containerContext.container,allowNesting:this.dragBehavior.nested,pfx:this.containerContext.pfx,el:this.containerContext.placeholderElement,offset:{top:this.positionOptions.offsetTop,left:this.positionOptions.offsetLeft}})},s.prototype.ensurePlaceholderElement=function(){var r=this.placeholder.el,e=this.containerContext.container;r.ownerDocument.contains(r)||e.append(this.placeholder.el)},s.prototype.updateOffset=function(){var r,e=((r=this.em)===null||r===void 0?void 0:r.get("canvasOffset"))||{};this.positionOptions.offsetTop=e.top,this.positionOptions.offsetLeft=e.left},s.prototype.findValidSourceElement=function(r){return r&&!G2(r,"".concat(this.containerContext.itemSel,", ").concat(this.containerContext.containerSel))&&(r=nX(r,this.containerContext.itemSel)),r},s.prototype.bindDragEventHandlers=function(){(0,Ar.on)(this.containerContext.document,"keydown",this.rollback)},s.prototype.updatePlaceholderPosition=function(r,e){this.placeholder.move(r,e)},s.prototype.cleanupEventListeners=function(){(0,Ar.AU)(this.containerContext.document,"keydown",this.rollback)},s.prototype.finalizeMove=function(){this.cleanupEventListeners(),this.placeholder.hide(),delete this.sourceNodes},s.prototype.rollback=function(r){(0,Ar.AU)(this.containerContext.document,"keydown",this.rollback);var e="Escape";r.key===e&&this.cancelDrag()},s.prototype.triggerNullOnEndMove=function(r){var e,t,a,o,i,l=(e=this.sourceNodes)===null||e===void 0?void 0:e[0].model,c={target:l,parent:l&&((t=l.parent)===null||t===void 0?void 0:t.call(l)),index:l&&((a=l.index)===null||a===void 0?void 0:a.call(l))};(i=(o=this.eventHandlers).legacyOnEndMove)===null||i===void 0||i.call(o,null,this,Xh(Xh({},c),{cancelled:r}))},s})();const f6=mX;var gX=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Qh=function(){return Qh=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Qh.apply(this,arguments)},yX=Sl.F.Target,jC={id:"sorter-target",type:yX},xX=(function(s){gX(r,s);function r(e){var t=e.em,a=e.treeClass,o=e.containerContext,i=e.dragBehavior,l=e.positionOptions,c=l===void 0?{}:l,d=e.eventHandlers,p=d===void 0?{}:d,h=s.call(this,{em:t,treeClass:a,containerContext:o,positionOptions:c,dragBehavior:i,eventHandlers:Qh(Qh({},p),{onStartSort:function(g,y){var b;(b=p.onStartSort)===null||b===void 0||b.call(p,g,y),h.onStartSort()},onDrop:function(g,y,b){var v;(v=p.onDrop)===null||v===void 0||v.call(p,g,y,b),h.onDrop(g,y,b)},onTargetChange:function(g,y){var b;(b=p.onTargetChange)===null||b===void 0||b.call(p,g,y),h.onTargetChange(g,y)},onMouseMove:function(g){var y;(y=p.onMouseMove)===null||y===void 0||y.call(p,g),h.onMouseMove(g)}})})||this;return h.targetIsText=!1,h.onMouseMove=function(g){var y,b=h.targetIsText&&((y=h.sourceNodes)===null||y===void 0?void 0:y.some(function(v){return v.isTextable()}));b&&h.updateTextViewCursorPosition(g)},h.onDrop=function(g,y,b){var v=typeof b=="number"?b:-1;if(g&&y.length>0){var w=h.handleNodeAddition(g,y,v);w.length===0&&h.triggerNullOnEndMove(!1)}else h.triggerNullOnEndMove(!0);g?.restNodeState(),h.placeholder.hide()},h.onTargetChange=function(g,y){var b;g?.restNodeState();var v=h.em.Canvas;if(!y){h.placeholder.hide(),v.removeSpots(jC);return}y?.setSelectedParentState(),h.targetIsText=y.isTextNode();var w=h.targetIsText&&((b=h.sourceNodes)===null||b===void 0?void 0:b.some(function(O){return O.isTextable()}));w?(y.setContentEditable(!0),h.placeholder.hide()):h.placeholder.show();var C=Sl.F.Select,k=Sl.F.Hover,N=Sl.F.Spacing;[C,k,N].forEach(function(O){return v.removeSpots({type:O})}),v.addSpot(Qh(Qh({},jC),{component:y.model}))},(0,_e.bindAll)(h,"handleScrollEvent"),h}return r.prototype.onStartSort=function(){this.em.clearSelection(),this.setAutoCanvasScroll(!0)},r.prototype.bindDragEventHandlers=function(){this.em.on("frame:scroll",this.handleScrollEvent),s.prototype.bindDragEventHandlers.call(this)},r.prototype.cleanupEventListeners=function(){this.em.off("frame:scroll",this.handleScrollEvent),s.prototype.cleanupEventListeners.call(this)},r.prototype.handleScrollEvent=function(){for(var e,t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];var o=(e=t?.[0])===null||e===void 0?void 0:e.frame,i=this.em.Canvas.getCanvasView().frame===o;i&&this.recalculateTargetOnScroll()},r.prototype.handleNodeAddition=function(e,t,a){var o=this;return t.reduce(function(i,l){if(!e.canMove(l,a))return i;if(o.isPositionChanged(e,l,a)){var c=o.moveNode(e,l,a),d=c.index,p=c.addedNode;i.push(p),a=d}return a++,i},[])},r.prototype.isPositionChanged=function(e,t,a){var o=t.getParent(),i=o?o.indexOfChild(t):-1;o?.model.cid===e.model.cid&&i<a&&a--;var l=o?.model.cid===e.model.cid,c=i===a,d=this.targetIsText&&t.isTextable();return!(l&&c&&!d)},r.prototype.moveNode=function(e,t,a){var o=t.getParent();if(o){var i=o.indexOfChild(t);o.removeChildAt(i,{temporary:!0}),o.model.cid===e.model.cid&&i<a&&a--}var l=e.addChildAt(t,a,{action:"move-component"});return l&&this.triggerEndMoveEvent(l),{addedNode:l,index:a}},r.prototype.triggerEndMoveEvent=function(e){var t,a,o,i,l,c;(a=(t=this.eventHandlers).legacyOnEndMove)===null||a===void 0||a.call(t,e.model,this,{target:e.model,parent:e.model&&((i=(o=e.model).parent)===null||i===void 0?void 0:i.call(o)),index:e.model&&((c=(l=e.model).index)===null||c===void 0?void 0:c.call(l))})},r.prototype.finalizeMove=function(){var e,t;(e=this.em)===null||e===void 0||e.Canvas.removeSpots(jC),(t=this.sourceNodes)===null||t===void 0||t.forEach(function(a){return a.restNodeState()}),this.setAutoCanvasScroll(!1),s.prototype.finalizeMove.call(this)},r.prototype.updateTextViewCursorPosition=function(e){var t=this.em;if(t){var a=t.Canvas,o=a.getDocument(),i=null,l=(0,Ar.G2)(e);if(o.caretPositionFromPoint){var c=o.caretPositionFromPoint(l.clientX,l.clientY);c&&(i=o.createRange(),i.setStart(c.offsetNode,c.offset))}else o.caretRangeFromPoint?i=o.caretRangeFromPoint(l.clientX,l.clientY):e.rangeParent&&(i=o.createRange(),i.setStart(e.rangeParent,e.rangeOffset));var d=a.getWindow().getSelection();a.getFrameEl().focus(),d?.removeAllRanges(),i&&d?.addRange(i)}},r.prototype.setAutoCanvasScroll=function(e){var t=this.em,a=t?.Canvas;a&&(e?a.startAutoscroll():a.stopAutoscroll())},r})(f6);const mT=xX;var vX=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Qb=function(){return Qb=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Qb.apply(this,arguments)},bX=(function(s){vX(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.defaults=function(){return{values:{}}},r.prototype.initialize=function(){var e=this.collection;this.prop=e?.prop},r.prototype.getId=function(){return this.cid},r.prototype.getIndex=function(){var e=this.collection;return e?e.indexOf(this):-1},r.prototype.getValues=function(e){e===void 0&&(e={});var t=this.get("values");return e.camelCase?Object.keys(t).reduce(function(a,o){return a[(0,Zt.camelCase)(o)]=t[o],a},{}):t},r.prototype.getLabel=function(){var e;return(e=this.prop)===null||e===void 0?void 0:e.getLayerLabel(this)},r.prototype.isSelected=function(){var e;return((e=this.prop)===null||e===void 0?void 0:e.getSelectedLayer())===this},r.prototype.select=function(){var e;return(e=this.prop)===null||e===void 0?void 0:e.selectLayer(this)},r.prototype.remove=function(){var e;return(e=this.prop)===null||e===void 0?void 0:e.removeLayer(this)},r.prototype.move=function(e){var t;return(t=this.prop)===null||t===void 0?void 0:t.moveLayer(this,e)},r.prototype.getStylePreview=function(e){var t;return e===void 0&&(e={}),(t=this.prop)===null||t===void 0?void 0:t.getStylePreview(this,e)},r.prototype.hasPreview=function(){var e;return!!(!((e=this.prop)===null||e===void 0)&&e.get("preview"))},r.prototype.upValues=function(e){return e===void 0&&(e={}),this.set("values",Qb(Qb({},this.getValues()),e))},r})(Sr.Kx);const yy=bX;var wX=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),p6=(function(s){wX(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.initialize=function(e,t){t===void 0&&(t={}),this.prop=t.prop},r})(Sr.pM);const Gv=p6;p6.prototype.model=yy;var jX=fs(3178),CX=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),SX=(function(s){CX(r,s);function r(e){return s.call(this,e)||this}return r.prototype.getChildren=function(){return this.model instanceof Gv?this.model.models.map(function(e){return new r(e)}):null},r.prototype.getParent=function(){var e=this.model instanceof yy?this.model.collection:null;return e?new r(e):null},r.prototype.addChildAt=function(e,t){if(this.model instanceof yy)throw Error("Cannot add a layer model to another layer model");var a=this.model.add(e.model,{at:t});return new r(a)},r.prototype.removeChildAt=function(e){if(this.model instanceof yy)throw Error("Cannot remove a layer model from another layer model");var t=this.model.at(e);t&&this.model.remove(t)},r.prototype.indexOfChild=function(e){return!(e.model instanceof yy)||!(this.model instanceof Gv)?-1:this.model.indexOf(e.model)},r.prototype.canMove=function(e,t){return this.model instanceof Gv&&!!e.model},Object.defineProperty(r.prototype,"view",{get:function(){return this.model.view},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"element",{get:function(){var e;return(e=this.view)===null||e===void 0?void 0:e.el},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),r})(jX.$),NX=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),hN=function(){return hN=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},hN.apply(this,arguments)},kX=(function(s){NX(r,s);function r(e){var t=e.em,a=e.containerContext,o=e.dragBehavior,i=e.positionOptions,l=i===void 0?{}:i,c=e.eventHandlers,d=c===void 0?{}:c,p=s.call(this,{em:t,treeClass:SX,containerContext:a,positionOptions:l,dragBehavior:o,eventHandlers:hN({onStartSort:function(h,g){var y;(y=d.onStartSort)===null||y===void 0||y.call(d,h,g),p.onLayerStartSort(h)},onDrop:function(h,g,y){var b;(b=d.onDrop)===null||b===void 0||b.call(d,h,g,y),p.onLayerDrop(h,g,y)},onEnd:function(){p.placeholder.hide()}},d)})||this;return p.onLayerStartSort=function(h){p.em.clearSelection();var g=h[0];p.em.trigger("sorter:drag:start",g?.element,g?.model),p.placeholder.show()},p.onLayerDrop=function(h,g,y){if(h){y=typeof y=="number"?y:-1;for(var b=0;b<g.length;b++){var v=g[b];if(h.canMove(v,b)){var w=v.getParent(),C=-1;w&&(C=w.indexOfChild(v),w.removeChildAt(C)),y=C<y?y-1:y,h.addChildAt(v,y)}}p.placeholder.hide()}},p}return r})(f6);const _X=kX;var EX=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),mN=function(){return mN=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},mN.apply(this,arguments)},TX=(function(s){EX(r,s);function r(e){var t=s.call(this,e,"Utils")||this;return t.Sorter=mT,t.Resizer=eX,t.Dragger=jA.A,t.ComponentSorter=mT,t.StyleManagerSorter=_X,t.helpers=mN({},Zt),t}return r.prototype.destroy=function(){},r})(Di);const OX=TX;var Ti,Ji={},ii={16:!1,18:!1,17:!1,91:!1},h6="all",Ap={"":16,shift:16,"":18,alt:18,option:18,"":17,ctrl:17,control:17,"":91,command:91},m6={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},K2=function(s){return m6[s]||s.toUpperCase().charCodeAt(0)},jm=[];for(Ti=1;Ti<20;Ti++)m6["f"+Ti]=111+Ti;function Ly(s,r){for(var e=s.length;e--;)if(s[e]===r)return e;return-1}function PX(s,r){if(s.length!=r.length)return!1;for(var e=0;e<s.length;e++)if(s[e]!==r[e])return!1;return!0}var AX={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function MX(s){for(Ti in ii)ii[Ti]=s[AX[Ti]]}function IX(s){var r,e,t,a,o,i;if(r=s.keyCode,Ly(jm,r)==-1&&jm.push(r),(r==93||r==224)&&(r=91),r in ii){ii[r]=!0;for(t in Ap)Ap[t]==r&&(di[t]=!0);return}if(MX(s),!!di.filter.call(this,s)&&r in Ji){for(i=Y2(),a=0;a<Ji[r].length;a++)if(e=Ji[r][a],e.scope==i||e.scope=="all"){o=e.mods.length>0;for(t in ii)(!ii[t]&&Ly(e.mods,+t)>-1||ii[t]&&Ly(e.mods,+t)==-1)&&(o=!1);(e.mods.length==0&&!ii[16]&&!ii[18]&&!ii[17]&&!ii[91]||o)&&e.method(s,e)===!1&&(s.preventDefault?s.preventDefault():s.returnValue=!1,s.stopPropagation&&s.stopPropagation(),s.cancelBubble&&(s.cancelBubble=!0))}}}function RX(s){var r=s.keyCode,e,t=Ly(jm,r);if(t>=0&&jm.splice(t,1),(r==93||r==224)&&(r=91),r in ii){ii[r]=!1;for(e in Ap)Ap[e]==r&&(di[e]=!1)}}function DX(){for(Ti in ii)ii[Ti]=!1;for(Ti in Ap)di[Ti]=!1}function di(s,r,e){var t,a;t=g6(s),e===void 0&&(e=r,r="all");for(var o=0;o<t.length;o++)a=[],s=t[o].split("+"),s.length>1&&(a=y6(s),s=[s[s.length-1]]),s=s[0],s=K2(s),s in Ji||(Ji[s]=[]),Ji[s].push({shortcut:t[o],scope:r,method:e,key:t[o],mods:a})}function LX(s,r){var e,t,a=[],o,i,l;for(e=g6(s),i=0;i<e.length;i++){if(t=e[i].split("+"),t.length>1&&(a=y6(t)),s=t[t.length-1],s=K2(s),r===void 0&&(r=Y2()),!Ji[s])return;for(o=0;o<Ji[s].length;o++)l=Ji[s][o],l.scope===r&&PX(l.mods,a)&&(Ji[s][o]={})}}function FX(s){return typeof s=="string"&&(s=K2(s)),Ly(jm,s)!=-1}function BX(){return jm.slice(0)}function zX(s){var r=(s.target||s.srcElement).tagName;return!(r=="INPUT"||r=="SELECT"||r=="TEXTAREA")}for(Ti in Ap)di[Ti]=!1;function $X(s){h6=s||"all"}function Y2(){return h6||"all"}function UX(s){var r,e,t;for(r in Ji)for(e=Ji[r],t=0;t<e.length;)e[t].scope===s?e.splice(t,1):t++}function g6(s){var r;return s=s.replace(/\s/g,""),r=s.split(","),r[r.length-1]==""&&(r[r.length-2]+=","),r}function y6(s){for(var r=s.slice(0,s.length-1),e=0;e<r.length;e++)r[e]=Ap[r[e]];return r}function CC(s,r,e){s.addEventListener?s.addEventListener(r,e,!1):s.attachEvent&&s.attachEvent("on"+r,function(){e(window.event)})}di.setScope=$X;di.getScope=Y2;di.deleteScope=UX;di.filter=zX;di.isPressed=FX;di.getPressedKeyCodes=BX;di.unbind=LX;di.handlers=Ji;di.init=function(s){CC(s.document,"keydown",function(r){IX(r)}),CC(s.document,"keyup",RX),CC(s,"focus",DX)};const xy=di;var VX=function(){return{defaults:{"core:undo":{keys:"+z, ctrl+z",handler:"core:undo",opts:{prevent:!0}},"core:redo":{keys:"+shift+z, ctrl+shift+z",handler:"core:redo",opts:{prevent:!0}},"core:copy":{keys:"+c, ctrl+c",handler:"core:copy"},"core:paste":{keys:"+v, ctrl+v",handler:"core:paste"},"core:component-next":{keys:"s",handler:"core:component-next"},"core:component-prev":{keys:"w",handler:"core:component-prev"},"core:component-enter":{keys:"d",handler:"core:component-enter"},"core:component-exit":{keys:"a",handler:"core:component-exit"},"core:component-delete":{keys:"backspace, delete",handler:"core:component-delete",opts:{prevent:!0}}}}};const HX=VX;var gN;(function(s){s.add="keymap:add",s.remove="keymap:remove",s.emit="keymap:emit",s.emitId="keymap:emit:"})(gN||(gN={}));var WX=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),gT=function(s,r,e){if(e||arguments.length===2)for(var t=0,a=r.length,o;t<a;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return s.concat(o||Array.prototype.slice.call(r))};(0,Zt.hasWin)()&&xy.init(window);var qX=(function(s){WX(r,s);function r(e){var t=s.call(this,e,"Keymaps",HX())||this;return t.keymaster=xy,t.events=gN,t.keymaps={},t}return r.prototype.onLoad=function(){if(!this.em.isHeadless){var e=this.config.defaults;for(var t in e){var a=e[t];this.add(t,a.keys,a.handler,a.opts||{})}}},r.prototype.add=function(e,t,a,o){o===void 0&&(o={});var i=this,l=i.em,c=i.events,d=l.Commands,p=l.getEditor(),h=l.Canvas,g={id:e,keys:t,handler:a},y=this.keymaps[e];return y&&this.remove(e),this.keymaps[e]=g,xy(t,function(b,v){var w,C={event:b,h:v},k=(0,_e.isString)(a)?d.get(a):a,N=!l.isEditing()&&!p.Canvas.isInputFocused();if(N||o.force){o.prevent&&((w=h.getCanvasView())===null||w===void 0||w.preventDefault(b)),(0,_e.isFunction)(k)?k(p,0,C):d.runCommand(k,C);var O=[e,v.shortcut,b];l.trigger.apply(l,gT([c.emit],O,!1)),l.trigger.apply(l,gT(["".concat(c.emitId).concat(e)],O,!1))}},void 0),l.trigger(c.add,g),g},r.prototype.get=function(e){return this.keymaps[e]},r.prototype.getAll=function(){return this.keymaps},r.prototype.remove=function(e){var t=this,a=t.em,o=t.events,i=this.get(e);if(i)return delete this.keymaps[e],i.keys.split(", ").forEach(function(l){xy.unbind(l.trim())}),a?.trigger(o.remove,i),i},r.prototype.removeAll=function(){var e=this;return Object.keys(this.keymaps).forEach(function(t){return e.remove(t)}),xy.handlers={},this},r.prototype.destroy=function(){this.removeAll(),this.keymaps={}},r})(Di);const GX=qX;var KX=function(){return{stylePrefix:"mdl-",title:"",content:"",backdrop:!0,custom:!1,extend:{}}};const YX=KX;var ZX=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),XX=(function(s){ZX(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.defaults=function(){return{title:"",content:"",attributes:{},open:!1}},r.prototype.open=function(){this.set("open",!0)},r.prototype.close=function(){this.set("open",!1)},r})(of.A);const QX=XX;var yN;(function(s){s.open="modal:open",s.close="modal:close",s.all="modal"})(yN||(yN={}));var JX=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Jb=function(){return Jb=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Jb.apply(this,arguments)},eQ=(function(s){JX(r,s);function r(e){var t=s.call(this,e)||this,a=t.model;return t.listenTo(a,"change:open",t.updateOpen),t.listenTo(a,"change:title",t.updateTitle),t.listenTo(a,"change:content",t.updateContent),t}return r.prototype.template=function(e){var t=e.pfx,a=e.ppfx,o=e.content,i=e.title;return'<div class="'.concat(t,"dialog ").concat(a,"one-bg ").concat(a,`two-color">
      <div class="`).concat(t,`header">
        <div class="`).concat(t,'title">').concat(i,`</div>
        <div class="`).concat(t,`btn-close" data-close-modal>&Cross;</div>
      </div>
      <div class="`).concat(t,`content">
        <div id="`).concat(t,'c">').concat(o,`</div>
        <div style="clear:both"></div>
      </div>
    </div>
    <div class="`).concat(t,'collector" style="display: none"></div>')},r.prototype.events=function(){return{click:"onClick","click [data-close-modal]":"hide"}},r.prototype.onClick=function(e){var t=this.config.backdrop;t&&e.target===this.el&&this.hide()},r.prototype.getCollector=function(){return this.$collector||(this.$collector=this.$el.find("."+this.pfx+"collector")),this.$collector},r.prototype.getContent=function(){var e=this.pfx;return this.$content||(this.$content=this.$el.find(".".concat(e,"content #").concat(e,"c"))),this.$content},r.prototype.getTitle=function(e){return e===void 0&&(e={}),this.$title||(this.$title=this.$el.find("."+this.pfx+"title")),e.$?this.$title:this.$title.get(0)},r.prototype.updateContent=function(){var e=this.getContent(),t=e.children(),a=this.getCollector(),o=this.model.get("content");t.length&&a.append(t),e.empty().append(o)},r.prototype.updateTitle=function(){var e=this.getTitle({$:!0});e&&e.empty().append(this.model.get("title"))},r.prototype.updateOpen=function(){this.el.style.display=this.model.get("open")?"":"none"},r.prototype.hide=function(){this.model.close()},r.prototype.show=function(){this.model.open()},r.prototype.updateAttr=function(e){var t=this,a=t.pfx,o=t.$el,i=t.el,l=[].slice.call(i.attributes).map(function(c){return c.name});o.removeAttr(l.join(" ")),o.attr(Jb(Jb({},e||{}),{class:"".concat(a,"container ").concat(e&&e.class||"").trim()}))},r.prototype.render=function(){var e=this.$el,t=this.model.toJSON();return t.pfx=this.pfx,t.ppfx=this.ppfx,e.html(this.template(t)),this.updateAttr(),this.updateOpen(),this},r})(El);const tQ=eQ;var rQ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),nQ=(function(s){rQ(r,s);function r(e){var t=s.call(this,e,"Modal",YX())||this;t.events=yN;var a=t.events;return t.model=new QX(t),t.model.on("change:open",function(o,i){e.trigger(i?a.open:a.close)}),t.model.on("change",(0,_e.debounce)(function(){var o=t._evData(),i=t.config.custom;(0,_e.isFunction)(i)&&i(o),e.trigger(a.all,o)},0)),t}return r.prototype._evData=function(){var e=this,t=this.getTitle(),a=this.getContent(),o=this.model.attributes,i=o.open,l=o.attributes;return{open:i,attributes:l,title:(0,_e.isString)(t)?(0,Ar.GZ)(t):t,content:(0,_e.isString)(a)?(0,Ar.GZ)(a):a.get?a.get(0):a,close:function(){e.close()}}},r.prototype.postRender=function(e){var t=e.model.config.el||e.el,a=this.render();a&&t?.appendChild(a)},r.prototype.open=function(e){e===void 0&&(e={});var t=e.attributes||{};return e.title&&this.setTitle(e.title),e.content&&this.setContent(e.content),this.model.set("attributes",t),this.model.open(),this.modal&&this.modal.updateAttr(t),this},r.prototype.close=function(){return this.model.close(),this},r.prototype.onceClose=function(e){var t=this,a=t.em,o=t.events;return a.once(o.close,e),this},r.prototype.onceOpen=function(e){var t=this,a=t.em,o=t.events;return a.once(o.open,e),this},r.prototype.isOpen=function(){return!!this.model.get("open")},r.prototype.setTitle=function(e){return this.model.set("title",e),this},r.prototype.getTitle=function(){return this.model.get("title")},r.prototype.setContent=function(e){return this.model.set("content"," "),this.model.set("content",e),this},r.prototype.getContent=function(){return this.model.get("content")},r.prototype.getContentEl=function(){var e;return(e=this.modal)===null||e===void 0?void 0:e.getContent().get(0)},r.prototype.getModel=function(){return this.model},r.prototype.render=function(){var e;if(!this.config.custom){var t=tQ.extend(this.config.extend),a=this.modal&&this.modal.el;return this.modal=new t({el:a,model:this.model,config:this.config}),(e=this.modal)===null||e===void 0?void 0:e.render().el}},r.prototype.destroy=function(){var e;(e=this.modal)===null||e===void 0||e.remove()},r})(Di);const sQ=nQ;var yT="sw-visibility",xT="export-template",vT="open-sm",bT="open-tm",wT="open-layers",jT="open-blocks",SC="fullscreen",NC="preview",aQ=function(){return{stylePrefix:"pn-",defaults:[{id:"commands",buttons:[{}]},{id:"options",buttons:[{active:!0,id:yT,className:"fa fa-square-o",command:"core:component-outline",context:yT,attributes:{title:"View components"}},{id:NC,className:"fa fa-eye",command:NC,context:NC,attributes:{title:"Preview"}},{id:SC,className:"fa fa-arrows-alt",command:SC,context:SC,attributes:{title:"Fullscreen"}},{id:xT,className:"fa fa-code",command:xT,attributes:{title:"View code"}}]},{id:"views",buttons:[{id:vT,className:"fa fa-paint-brush",command:vT,active:!0,togglable:!1,attributes:{title:"Open Style Manager"}},{id:bT,className:"fa fa-cog",command:bT,togglable:!1,attributes:{title:"Settings"}},{id:wT,className:"fa fa-bars",command:wT,togglable:!1,attributes:{title:"Open Layer Manager"}},{id:jT,className:"fa fa-th-large",command:jT,togglable:!1,attributes:{title:"Open Blocks"}}]}]}};const oQ=aQ;var iQ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),lQ=(function(s){iQ(r,s);function r(e,t){var a=s.call(this,e,t)||this;return a.get("buttons").length&&a.set("buttons",new b6(a.module,a.get("buttons"))),a}return r.prototype.defaults=function(){return{id:"",label:"",tagName:"span",className:"",command:"",context:"",buttons:[],attributes:{},options:{},active:!1,dragDrop:!1,togglable:!0,runDefaultCommand:!0,stopDefaultCommand:!1,disable:!1}},Object.defineProperty(r.prototype,"className",{get:function(){return this.get("className")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"command",{get:function(){return this.get("command")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"active",{get:function(){return this.get("active")},set:function(e){this.set("active",e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"togglable",{get:function(){return this.get("togglable")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"runDefaultCommand",{get:function(){return this.get("runDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"stopDefaultCommand",{get:function(){return this.get("stopDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"disable",{get:function(){return this.get("disable")},enumerable:!1,configurable:!0}),r})(of.A);const x6=lQ;var cQ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),v6=(function(s){cQ(r,s);function r(e,t){return s.call(this,e,t,x6)||this}return r.prototype.deactivateAllExceptOne=function(e,t){this.forEach(function(a,o){a!==e&&(a.set("active",!1),t&&a.get("buttons").length&&a.get("buttons").deactivateAllExceptOne(e,t))})},r.prototype.deactivateAll=function(e,t){var a=e||"";this.forEach(function(o){o.get("context")==a&&o!==t&&o.set("active",!1,{fromCollection:!0})})},r.prototype.disableAllButtons=function(e){var t=e||"";this.forEach(function(a,o){a.get("context")==t&&a.set("disable",!0)})},r.prototype.disableAllButtonsExceptOne=function(e,t){this.forEach(function(a,o){a!==e&&(a.set("disable",!0),t&&a.get("buttons").length&&a.get("buttons").disableAllButtonsExceptOne(e,t))})},r})(aj);const b6=v6;v6.prototype.model=x6;var dQ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),uQ=(function(s){dQ(r,s);function r(e,t){var a=s.call(this,e,t)||this,o=a.get("buttons")||[];return a.buttons=new b6(e,o),a}return r.prototype.defaults=function(){return{id:"",content:"",visible:!0,buttons:[],attributes:{}}},Object.defineProperty(r.prototype,"buttons",{get:function(){return this.get("buttons")},set:function(e){this.set("buttons",e)},enumerable:!1,configurable:!0}),r})(of.A);const w6=uQ;var fQ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),j6=(function(s){fQ(r,s);function r(e,t){return s.call(this,e,t,w6)||this}return r})(aj);const pQ=j6;j6.prototype.model=w6;var hQ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Jh=function(){return Jh=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Jh.apply(this,arguments)},mQ=(function(s){hQ(r,s);function r(e){var t=s.call(this,e)||this,a=t,o=a.model,i=a.em,l=a.pfx,c=a.ppfx,d=o.className,p=o.attributes,h=p.command,g=p.listen;if(t.id=l+o.get("id"),t.activeCls="".concat(l,"active ").concat(c,"four-color"),t.disableCls="".concat(c,"disabled"),t.btnsVisCls="".concat(l,"visible"),t.className=l+"btn"+(d?" "+d:""),t.listenTo(o,"change",t.render),t.listenTo(o,"change:active updateActive",t.updateActive),t.listenTo(o,"checkActive",t.checkActive),t.listenTo(o,"change:bntsVis",t.updateBtnsVis),t.listenTo(o,"change:attributes",t.updateAttributes),t.listenTo(o,"change:className",t.updateClassName),t.listenTo(o,"change:disable",t.updateDisable),i&&(0,_e.isString)(h)&&g){var y={fromListen:!0};t.listenTo(i,"run:".concat(h),function(){return o.set("active",!0,y)}),t.listenTo(i,"stop:".concat(h),function(){return o.set("active",!1,y)})}return i&&i.get&&(t.commands=i.get("Commands")),t}return r.prototype.tagName=function(){return this.model.get("tagName")},r.prototype.events=function(){return{click:"clicked"}},r.prototype.updateClassName=function(){var e=this,t=e.model,a=e.pfx,o=t.className,i=t.get("attributes").class,l="".concat(i||""," ").concat(a,"btn ").concat(o||"");this.$el.attr("class",l.trim())},r.prototype.updateAttributes=function(){var e=this,t=e.em,a=e.model,o=e.$el,i=a.get("attributes")||{},l=t&&t.t&&t.t("panels.buttons.titles.".concat(a.id));o.attr(i),l&&o.attr({title:l}),this.updateClassName()},r.prototype.updateBtnsVis=function(){this.$buttons&&(this.model.get("bntsVis")?this.$buttons.addClass(this.btnsVisCls):this.$buttons.removeClass(this.btnsVisCls))},r.prototype.updateActive=function(e,t,a){var o;a===void 0&&(a={});var i=this,l=i.model,c=i.commands,d=i.$el,p=i.activeCls,h=a.fromCollection,g=a.fromListen,y=l.get("context"),b=l.get("options"),v=l.command,w={};v&&(c&&(0,_e.isString)(v)?w=c.get(v)||{}:(0,_e.isFunction)(v)?w=c.create({run:v}):v!==null&&(0,_e.isObject)(v)&&(w=c.create(v)),l.active?(!h&&((o=l.collection)===null||o===void 0||o.deactivateAll(y,l)),l.set("active",!0,{silent:!0}).trigger("checkActive"),!g&&c.runCommand(w,Jh(Jh({},b),{sender:l})),w.noStop&&l.set("active",!1)):(d.removeClass(p),!g&&c.stopCommand(w,Jh(Jh({},b),{sender:l,force:1}))))},r.prototype.updateDisable=function(){var e=this,t=e.disableCls,a=e.model,o=a.disable;this.$el[o?"addClass":"removeClass"](t)},r.prototype.checkActive=function(){var e=this,t=e.model,a=e.$el,o=e.activeCls;t.active?a.addClass(o):a.removeClass(o)},r.prototype.clicked=function(){var e=this.model;e.get("bntsVis")||e.disable||!e.command||this.toggleActive()},r.prototype.toggleActive=function(){var e=this,t=e.model,a=e.em,o=t.active,i=t.togglable;o&&!i||(t.active=!o,o?t.runDefaultCommand&&a.runDefault():t.stopDefaultCommand&&a.stopDefault())},r.prototype.render=function(){var e=this.model,t=e.get("label"),a=this.$el;return!e.get("el")&&a.empty(),this.updateAttributes(),t&&a.append(t),this.checkActive(),this.updateDisable(),this},r})(El);const gQ=mQ;var yQ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),xQ=(function(s){yQ(r,s);function r(e){var t=s.call(this,{collection:e})||this;return t.listenTo(t.collection,"add",t.addTo),t.listenTo(t.collection,"reset remove",t.render),t.className=t.pfx+"buttons",t}return r.prototype.addTo=function(e){this.addToCollection(e)},r.prototype.addToCollection=function(e,t){var a=t||null,o=e.get("el"),i=new gQ({el:o,model:e}),l=i.render().el;return a?a.appendChild(l):this.$el.append(l),l},r.prototype.render=function(){var e=this,t=document.createDocumentFragment();return this.$el.empty(),this.collection.each(function(a){return e.addToCollection(a,t)}),this.$el.append(t),this.$el.attr("class",(0,_e.result)(this,"className")),this},r})(El);const vQ=xQ;var bQ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),xN=function(){return xN=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},xN.apply(this,arguments)},wQ=(function(s){bQ(r,s);function r(e){var t=s.call(this,{model:e,el:e.get("el")})||this;return t.className=t.pfx+"panel",t.id=t.pfx+e.get("id"),t.listenTo(e,"change:appendContent",t.appendContent),t.listenTo(e,"change:content",t.updateContent),t.listenTo(e,"change:visible",t.toggleVisible),e.view=t,t}return r.prototype.appendContent=function(){this.$el.append(this.model.get("appendContent"))},r.prototype.updateContent=function(){this.$el.html(this.model.get("content"))},r.prototype.toggleVisible=function(){if(!this.model.get("visible")){this.$el.addClass("".concat(this.ppfx,"hidden"));return}this.$el.removeClass("".concat(this.ppfx,"hidden"))},r.prototype.attributes=function(){return this.model.get("attributes")},r.prototype.initResize=function(){var e=this.em,t=e?.Editor,a=this.model.get("resizable");if(t&&a){var o=a===!0?[!0,!0,!0,!0]:a,i=o.length,l=void 0,c=void 0,d=void 0,p=!1;if(i==2){var h=o;l=h[0],d=h[0],c=h[1],p=h[1]}else if(i==4){var h=o;l=h[0],c=h[1],d=h[2],p=h[3]}var g=new t.Utils.Resizer(xN({tc:l,cr:c,bc:d,cl:p,tl:!1,tr:!1,bl:!1,br:!1,appendTo:this.el,silentFrames:!0,avoidContainerUpdate:!0,prefix:t.getConfig().stylePrefix,onEnd:function(){e.Canvas.refresh({all:!0})},posFetcher:function(y,b){var v=b.target,w=y.style,C=g.getConfig(),k=C.keyWidth,N=C.keyHeight,O=y.getBoundingClientRect(),R=v=="container",L=w[k],B=w[N],G=L&&!R?parseFloat(L):O.width,$=B&&!R?parseFloat(B):O.height;return{left:0,top:0,width:G,height:$}}},a&&typeof a!="boolean"?a:{}));g.blur=function(){},g.focus(this.el)}},r.prototype.render=function(){var e=this.model.buttons,t=this.$el,a=this.ppfx,o="".concat(this.className," ").concat(this.id," ").concat(a,"one-bg ").concat(a,"two-color");if(t.addClass(o),this.toggleVisible(),e.length){var i=new vQ(e);t.append(i.render().el)}return t.append(this.model.get("content")),this},r})(El);const jQ=wQ;var CQ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),SQ=(function(s){CQ(r,s);function r(e){var t=s.call(this,{collection:e})||this;return t.listenTo(e,"add",t.addTo),t.listenTo(e,"reset",t.render),t.listenTo(e,"remove",t.onRemove),t.className=t.pfx+"panels",t}return r.prototype.onRemove=function(e){var t=e.view;t&&t.remove()},r.prototype.addTo=function(e){this.addToCollection(e)},r.prototype.addToCollection=function(e,t){var a=t||null,o=e.get("el"),i=new jQ(e),l=i.render().el,c=e.get("appendTo");if(!o)if(c){var d=document.querySelector(c);d?.appendChild(l)}else a?a.appendChild(l):this.$el.append(l);return i.initResize(),l},r.prototype.render=function(){var e=this,t=this.$el,a=document.createDocumentFragment();return t.empty(),this.collection.each(function(o){return e.addToCollection(o,a)}),t.append(a),t.attr("class",this.className),this},r})(El);const NQ=SQ;var kQ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),_Q=(function(s){kQ(r,s);function r(e){var t=s.call(this,e,"Panels",oQ())||this;return t.panels=new pQ(t,t.config.defaults),t}return r.prototype.getPanels=function(){return this.panels},r.prototype.getPanelsEl=function(){var e;return(e=this.PanelsViewObj)===null||e===void 0?void 0:e.el},r.prototype.addPanel=function(e){return this.panels.add(e)},r.prototype.removePanel=function(e){return this.panels.remove(e)},r.prototype.getPanel=function(e){var t=this.panels.where({id:e});return t.length?t[0]:null},r.prototype.addButton=function(e,t){var a=this.getPanel(e);return a?a.buttons.add(t):null},r.prototype.removeButton=function(e,t){var a=this.getPanel(e);return a&&a.buttons.remove(t)},r.prototype.getButton=function(e,t){var a=this.getPanel(e);if(a){var o=a.buttons.where({id:t});return o.length?o[0]:null}return null},r.prototype.render=function(){var e;return(e=this.PanelsViewObj)===null||e===void 0||e.remove(),this.PanelsViewObj=new NQ(this.panels),this.PanelsViewObj.render().el},r.prototype.active=function(){this.getPanels().each(function(e){e.buttons.each(function(t){t.get("active")&&t.trigger("updateActive")})})},r.prototype.disableButtons=function(){this.getPanels().each(function(e){e.buttons.each(function(t){t.get("disable")&&t.trigger("change:disable")})})},r.prototype.destroy=function(){this.panels.reset(),this.panels.stopListening(),this.PanelsViewObj&&this.PanelsViewObj.remove()},r})(Di);const EQ=_Q;var TQ=function(){return{stylePrefix:"cm-",optsCodeViewer:{}}};const OQ=TQ;var PQ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),AQ=function(s,r){var e={};for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&r.indexOf(t)<0&&(e[t]=s[t]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(s);a<t.length;a++)r.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(s,t[a])&&(e[t[a]]=s[t[a]]);return e},MQ=(function(s){PQ(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.build=function(e,t){t===void 0&&(t={});var a=t.em,o=AQ(t,["em"]),i=o;if(t.cleanId&&a){var l=a.Css.getAll(),c=l.toJSON().map(function(p){var h=p.selectors,g=h&&h.length===1&&h.models[0];return g&&g.isId()&&g.get("name")}).filter(Boolean),d=i.attributes;i.attributes=function(p,h){h=typeof d=="function"?d(p,h):h;var g=h.id;return g&&g[0]==="i"&&!p.get("script")&&!p.get("script-export")&&!p.get("attributes").id&&c.indexOf(g)<0&&delete h.id,h}}return e.toHTML(i)},r})(Sr.Kx);const IQ=MQ;var RQ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),DQ=(function(s){RQ(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.build=function(e){var t=this,a=e.toJSON();return this.beforeEach(a),(0,_e.each)(a,function(o,i){var l=a[i];if(l instanceof Sr.Kx)a[i]=t.build(l);else if(l instanceof Sr.pM){var c=l;a[i]=[],c.length&&c.forEach(function(d,p){a[i][p]=t.build(d)})}}),a},r.prototype.beforeEach=function(e){delete e.status},r})(Sr.Kx);const LQ=DQ;var FQ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})();function BQ(s){var r,e=((r=s.toString().match(/\{([\s\S]*)\}/m))===null||r===void 0?void 0:r[1])||"";return e.replace(/^\s*\/\/.*$/gm,"").trim().length===0}var zQ=(function(s){FQ(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.mapModel=function(e){var t,a=this,o="",i=e.get("script-export")||e.get("script"),l=e.get("type"),c=e.get("components"),d=e.getId();if(i){var p=e.get("attributes");p=(0,_e.extend)({},p,{id:d}),e.set("attributes",p,{silent:!0});var h=e.getScriptString(i),g=e.get("script-props");if(e.get("scriptUpdated")&&!g)this.mapJs[l+"-"+d]={ids:[d],code:h};else{var y=void 0,b=this.mapJs[l];if(g&&(y=e.__getScriptProps()),b)b.ids.push(d),y&&(b.props[d]=y);else{var v={ids:[d],code:h};y&&(v.props=(t={},t[d]=y,t)),this.mapJs[l]=v}}}return c.forEach(function(w){o+=a.mapModel(w)}),o},r.prototype.build=function(e){this.mapJs={},this.mapModel(e);var t="";for(var a in this.mapJs){var o=this.mapJs[a];if(o.code)if(o.props){if(BQ(o.code))continue;t+=`
          var props = `.concat(JSON.stringify(o.props),`;
          var ids = Object.keys(props).map(function(id) { return '#'+id }).join(',');
          var els = document.querySelectorAll(ids);
          for (var i = 0, len = els.length; i < len; i++) {
            var el = els[i];
            (`).concat(o.code,`.bind(el))(props[el.id]);
          }`)}else{var i="#"+o.ids.join(", #");t+=`
          var items = document.querySelectorAll('`.concat(i,`');
          for (var i = 0, len = items.length; i < len; i++) {
            (function(){
`).concat(o.code,`
}.bind(items[i]))();
          }`)}}return t},r})(Sr.Kx);const $Q=zQ;var UQ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),vN=function(){return vN=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},vN.apply(this,arguments)},Fy;(0,Zt.hasWin)()&&(Fy=fs(4408),fs(8253),fs(7389),fs(3640));var C6=(function(s){UQ(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.defaults=function(){return{input:"",label:"",codeName:"",theme:"hopscotch",readOnly:!0,lineNumbers:!0,autoFormat:!0}},r.prototype.init=function(e){return(0,_e.bindAll)(this,"onChange"),this.editor=Fy.fromTextArea(e,vN({dragDrop:!1,lineWrapping:!0,mode:this.get("codeName")},this.attributes)),this.element=e,this.editor.on("change",this.onChange),this},r.prototype.onChange=function(){this.trigger("update",this)},r.prototype.getEditor=function(){return this.editor},r.prototype.getElement=function(){return this.element},r.prototype.setElement=function(e){return this.element=e,this},r.prototype.refresh=function(){return this.getEditor().refresh(),this},r.prototype.focus=function(){return this.getEditor().focus(),this},r.prototype.getContent=function(){var e=this.getEditor();return e&&e.getValue()},r.prototype.setContent=function(e,t){var a=this;t===void 0&&(t={});var o=this.editor;if(o){o.setValue(e);var i=this.get("autoFormat"),l=o.autoFormatRange&&(i===!0||Array.isArray(i)&&i.includes(this.get("codeName")));l&&(Fy.commands.selectAll(o),o.autoFormatRange(o.getCursor(!0),o.getCursor(!1)),Fy.commands.goDocStart(o)),!t.noRefresh&&setTimeout(function(){return a.refresh()})}},r})(Sr.Kx);const VQ=C6;C6.prototype.CodeMirror=Fy;var HQ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),WQ=function(s,r){return Object.defineProperty?Object.defineProperty(s,"raw",{value:r}):s.raw=r,s},qQ=(function(s){HQ(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.template=function(e){var t=e.pfx,a=e.codeName,o=e.label;return Ei(CT||(CT=WQ([`
      <div class="`,'editor" id="',"",`">
        <div id="`,'title">',`</div>
        <div id="`,`code"></div>
      </div>
    `],[`
      <div class="`,'editor" id="',"",`">
        <div id="`,'title">',`</div>
        <div id="`,`code"></div>
      </div>
    `])),t,t,a,t,o,t)},r.prototype.initialize=function(e){this.config=e.config||{},this.pfx=this.config.stylePrefix},r.prototype.render=function(){var e,t,a=this,o=a.model,i=a.pfx,l=a.$el,c=o.toJSON(),d=o.get("input")||((t=(e=o).getElement)===null||t===void 0?void 0:t.call(e));return c.pfx=i,l.html(this.template(c)),l.attr("class","".concat(i,"editor-c")),l.find("#".concat(i,"code")).append(d),this},r})(Sr.Ss);const GQ=qQ;var CT,KQ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),ew=function(){return ew=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},ew.apply(this,arguments)},YQ="CodeMirror",ZQ=(function(s){KQ(r,s);function r(e){var t=s.call(this,e,"CodeManager",OQ())||this;t.EditorView=GQ;var a=t.config,o=a.pStylePrefix;return o&&(a.stylePrefix=o+a.stylePrefix),t.generators={},t.viewers={},t.defGenerators={html:new IQ,css:new VG,json:new LQ,js:new $Q},t.defViewers={CodeMirror:new VQ},t.loadDefaultGenerators().loadDefaultViewers(),t}return r.prototype.addGenerator=function(e,t){return this.generators[e]=t,this},r.prototype.getGenerator=function(e){return this.generators[e]},r.prototype.getGenerators=function(){return this.generators},r.prototype.addViewer=function(e,t){return this.viewers[e]=t,this},r.prototype.getViewer=function(e){return this.viewers[e]},r.prototype.getViewers=function(){return this.viewers},r.prototype.createViewer=function(e){e===void 0&&(e={});var t=(0,_e.isUndefined)(e.type)?YQ:e.type,a=this.getViewer(t)&&this.getViewer(t).clone(),o=document.createElement("div"),i=document.createElement("textarea");return o.appendChild(i),a.set(ew(ew({},this.config.optsCodeViewer),e)),a.init(i),a.setElement(o),a},r.prototype.updateViewer=function(e,t){e.setContent(t)},r.prototype.getCode=function(e,t,a){a===void 0&&(a={}),a.em=this.em;var o=this.getGenerator(t);return o?o.build(e,a):""},r.prototype.loadDefaultGenerators=function(){for(var e in this.defGenerators)this.addGenerator(e,this.defGenerators[e]);return this},r.prototype.loadDefaultViewers=function(){for(var e in this.defViewers)this.addViewer(e,this.defViewers[e]);return this},r.prototype.destroy=function(){},r})(Di);const XQ=ZQ;var QQ=fs(4729),JQ=fs.n(QQ),eJ=function(){return{maximumStackLength:500,trackSelection:!0}};const tJ=eJ;var li;(function(s){s.update="update",s.updateBefore="updateBefore",s.undo="undo",s.redo="redo",s.load="load",s.projectLoad="project:load",s.projectLoaded="project:loaded",s.projectGet="project:get",s.log="log",s.telemetryInit="telemetry:init",s.destroy="destroy",s.destroyed="destroyed"})(li||(li={}));var rJ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Ld=function(){return Ld=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Ld.apply(this,arguments)},nJ=function(s,r,e){if(e||arguments.length===2)for(var t=0,a=r.length,o;t<a;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return s.concat(o||Array.prototype.slice.call(r))},fv=function(s){return s.avoidStore||s.noUndo||s.partial},ST=function(s){return Object.keys(s.changedAttributes())},pv=new WeakMap,sJ=(function(s){rJ(r,s);function r(e){var t=s.call(this,e,"UndoManager",tJ())||this;t.config._disable&&(t.config.maximumStackLength=0);var a=!0;return t.um=new(JQ())(Ld({track:!0,register:[]},t.config)),t.um.changeUndoType("change",{condition:function(o){var i=o.get("_undo");if(i){var l=o.get("_undoexc");if((0,_e.isArray)(l)&&ST(o).some(function(c){return l.indexOf(c)>=0}))return!1;if((0,_e.isBoolean)(i)||(0,_e.isArray)(i)&&ST(o).some(function(c){return i.indexOf(c)>=0}))return!0}return!1},on:function(o,i,l){var c=pv.get(o);c||(c=o.previousAttributes(),pv.set(o,c));var d=l||i||{};if(d.noUndo&&setTimeout(function(){pv.delete(o)}),!fv(d)){var p=o.toJSON({fromUndo:a}),h={object:o,before:c,after:p};return pv.delete(o),(0,_e.isEmpty)(p)?void 0:h}}}),t.um.changeUndoType("add",{on:function(o,i,l){if(l===void 0&&(l={}),!(fv(l)||!t.isRegistered(i)))return{object:i,before:void 0,after:o,options:Ld(Ld({},l),{fromUndo:a})}}}),t.um.changeUndoType("remove",{on:function(o,i,l){if(l===void 0&&(l={}),!(fv(l)||!t.isRegistered(i)))return{object:i,before:o,after:void 0,options:Ld(Ld({},l),{fromUndo:a})}}}),t.um.changeUndoType("reset",{undo:function(o,i){o.reset(i,{fromUndo:a})},redo:function(o,i,l){o.reset(l,{fromUndo:a})},on:function(o,i){if(i===void 0&&(i={}),!(fv(i)||!t.isRegistered(o)))return{object:o,before:i.previousModels,after:nJ([],o.models,!0),options:Ld(Ld({},i),{fromUndo:a})}}}),t.um.on("undo redo",function(){e.getSelectedAll().map(function(o){return o.trigger("rerender:layer")})}),[li.undo,li.redo].forEach(function(o){return t.um.on(o,function(){return e.trigger(o)})}),t}return r.prototype.postLoad=function(){var e=this,t=e.config,a=e.em;t.trackSelection&&a&&this.add(a.get("selected"))},r.prototype.add=function(e){return this.um.register(e),this},r.prototype.remove=function(e){return this.um.unregister(e),this},r.prototype.removeAll=function(){return this.um.unregisterAll(),this},r.prototype.start=function(){return this.um.startTracking(),this},r.prototype.stop=function(){return this.um.stopTracking(),this},r.prototype.undo=function(e){e===void 0&&(e=!0);var t=this,a=t.em,o=t.um;return!a.isEditing()&&o.undo(e),this},r.prototype.undoAll=function(){return this.um.undoAll(),this},r.prototype.redo=function(e){e===void 0&&(e=!0);var t=this,a=t.em,o=t.um;return!a.isEditing()&&o.redo(e),this},r.prototype.redoAll=function(){return this.um.redoAll(),this},r.prototype.hasUndo=function(){return!!this.um.isAvailable("undo")},r.prototype.hasRedo=function(){return!!this.um.isAvailable("redo")},r.prototype.isRegistered=function(e){return!!this.getInstance().objectRegistry.isRegistered(e)},r.prototype.getStack=function(){return this.um.stack},r.prototype.getStackGroup=function(){var e=[],t=[];return this.getStack().forEach(function(a){var o=a.get("magicFusionIndex");t.indexOf(o)<0&&(t.push(o),e.push(a))}),e},r.prototype.skip=function(e){var t=!!this.um.isTracking();t&&this.stop(),e(),t&&this.start()},r.prototype.getGroupedStack=function(){var e={},t=this.getStack(),a=function(o,i){var l=o.attributes,c=l.type,d=l.after,p=l.before,h=l.object,g=l.options,y=g===void 0?{}:g;return{index:i,type:c,after:d,before:p,object:h,options:y}};return t.forEach(function(o,i){var l=o.get("magicFusionIndex"),c=a(o,i);e[l]?e[l].push(c):e[l]=[c]}),Object.keys(e).map(function(o){var i=e[o];return{index:i[i.length-1].index,actions:i,labels:(0,_e.unique)(i.reduce(function(l,c){var d,p=(d=c.options)===null||d===void 0?void 0:d.action;return p&&l.push(p),l},[]))}})},r.prototype.goToGroup=function(e){var t=this;if(e){var a=this.getPointer(),o=e.index-a;(0,_e.times)(Math.abs(o),function(){t[o<0?"undo":"redo"](!1)})}},r.prototype.getPointer=function(){return this.getStack().pointer},r.prototype.clear=function(){return this.um.clear(),this},r.prototype.getInstance=function(){return this.um},r.prototype.destroy=function(){this.clear().removeAll()},r})(Di);const aJ=sJ;var oJ=function(){return{stylePrefix:"rte-",adjustToolbar:!0,actions:["bold","italic","underline","strikethrough","link","wrap"],custom:!1}};const iJ=oJ;var em=function(){return em=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},em.apply(this,arguments)},tw;(function(s){s[s.ACTIVE=1]="ACTIVE",s[s.INACTIVE=0]="INACTIVE",s[s.DISABLED=-1]="DISABLED"})(tw||(tw={}));var kC="_rte",gp={ACTIVE:1,INACTIVE:0,DISABLED:-1},hv=function(s,r){r===void 0&&(r="A");var e=s.selection()||{},t=e.anchorNode,a=e.focusNode,o=t?.parentNode,i=a?.parentNode;return o?.nodeName==r||i?.nodeName==r},rw="data-selectme",ey={bold:{name:"bold",icon:"<b>B</b>",attributes:{title:"Bold"},result:function(s){return s.exec("bold")}},italic:{name:"italic",icon:"<i>I</i>",attributes:{title:"Italic"},result:function(s){return s.exec("italic")}},underline:{name:"underline",icon:"<u>U</u>",attributes:{title:"Underline"},result:function(s){return s.exec("underline")}},strikethrough:{name:"strikethrough",icon:"<s>S</s>",attributes:{title:"Strike-through"},result:function(s){return s.exec("strikeThrough")}},link:{icon:`<svg viewBox="0 0 24 24">
          <path fill="currentColor" d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z" />
        </svg>`,name:"link",attributes:{style:"font-size:1.4rem;padding:0 4px 2px;",title:"Link"},state:function(s){return s&&s.selection()&&hv(s)?gp.ACTIVE:gp.INACTIVE},result:function(s){hv(s)?s.exec("unlink"):s.insertHTML('<a href="" '.concat(rw,">").concat(s.selection(),"</a>"),{select:!0})}},wrap:{name:"wrap",icon:`<svg viewBox="0 0 24 24">
            <path fill="currentColor" d="M20.71,4.63L19.37,3.29C19,2.9 18.35,2.9 17.96,3.29L9,12.25L11.75,15L20.71,6.04C21.1,5.65 21.1,5 20.71,4.63M7,14A3,3 0 0,0 4,17C4,18.31 2.84,19 2,19C2.92,20.22 4.5,21 6,21A4,4 0 0,0 10,17A3,3 0 0,0 7,14Z" />
        </svg>`,attributes:{title:"Wrap for style"},state:function(s){return s?.selection()&&hv(s,"SPAN")?gp.DISABLED:gp.INACTIVE},result:function(s){!hv(s,"SPAN")&&s.insertHTML("<span ".concat(rw,">").concat(s.selection(),"</span>"),{select:!0})}}},lJ=(function(){function s(r,e,t){t===void 0&&(t={});var a=this;if(this.em=r,this.settings=t,e[kC])return e[kC];e[kC]=this,this.setEl(e),this.updateActiveActions=this.updateActiveActions.bind(this),this.__onKeydown=this.__onKeydown.bind(this),this.__onPaste=this.__onPaste.bind(this);var o=(t.actions||[]).map(function(p){var h=p;return(0,_e.isString)(p)?h=em({},ey[p]):ey[p.name]&&(h=em(em({},ey[p.name]),p)),h}),i=o.length?o:Object.keys(ey).map(function(p){return ey[p]});t.classes=em({actionbar:"actionbar",button:"action",active:"active",disabled:"disabled",inactive:"inactive"},t.classes);var l=t.classes,c=t.actionbar;if(this.actionbar=c,this.classes=l,this.actions=i,!c){if(!this.isCustom(t.module)){var d=t.actionbarContainer;c=document.createElement("div"),c.className=l.actionbar,d?.appendChild(c),this.actionbar=c}i.forEach(function(p){return a.addAction(p)})}return t.styleWithCSS&&this.exec("styleWithCSS"),this}return s.prototype.isCustom=function(r){var e=r||this.em.RichTextEditor;return!!(e?.config.custom||e?.customRte)},s.prototype.destroy=function(){},s.prototype.setEl=function(r){this.el=r,this.doc=r.ownerDocument},s.prototype.updateActiveActions=function(){var r=this,e=this.getActions();e.forEach(function(t){var a=t.update,o=t.btn,i=r.classes,l=i.active,c=i.inactive,d=i.disabled,p=t.state,h=t.name,g=r.doc,y=tw.INACTIVE;if(o&&(o.className=o.className.replace(l,"").trim(),o.className=o.className.replace(c,"").trim(),o.className=o.className.replace(d,"").trim()),p){var b=p(r,g);if(y=b,o)switch(b){case gp.ACTIVE:o.className+=" ".concat(l);break;case gp.INACTIVE:o.className+=" ".concat(c);break;case gp.DISABLED:o.className+=" ".concat(d);break}}else g.queryCommandSupported(h)&&g.queryCommandState(h)&&(o&&(o.className+=" ".concat(l)),y=tw.ACTIVE);t.currentState=y,a?.(r,t)}),e.length&&this.em.RichTextEditor.__dbdTrgCustom()},s.prototype.enable=function(r){return this.enabled?this:this.__toggleEffects(!0,r)},s.prototype.disable=function(){return this.__toggleEffects(!1)},s.prototype.__toggleEffects=function(r,e){r===void 0&&(r=!1),e===void 0&&(e={});var t=r?Ar.on:Ar.AU,a=this,o=a.el,i=a.doc,l=this.actionbarEl();if(l&&(l.style.display=r?"":"none"),o.contentEditable="".concat(!!r),t(o,"mouseup keyup",this.updateActiveActions),t(i,"keydown",this.__onKeydown),t(i,"paste",this.__onPaste),this.enabled=r,r){var c=e.event;if(this.syncActions(),this.updateActiveActions(),c){var d=null;if(i.caretRangeFromPoint){var p=(0,Ar.G2)(c);d=i.caretRangeFromPoint(p.clientX,p.clientY)}else c.rangeParent&&(d=i.createRange(),d.setStart(c.rangeParent,c.rangeOffset));var h=i.getSelection();h?.removeAllRanges(),d&&h?.addRange(d)}o.focus()}return this},s.prototype.__onKeydown=function(r){var e=this.em,t=e.RichTextEditor.getConfig().onKeydown;if(t)return t({ev:r,rte:this,editor:e.getEditor()});var a=this.doc,o=["insertOrderedList","insertUnorderedList"];r.key==="Enter"&&!o.some(function(i){return a.queryCommandState(i)})&&(a.execCommand("insertLineBreak"),r.preventDefault())},s.prototype.__onPaste=function(r){var e=this.em,t=e.RichTextEditor.getConfig().onPaste;if(t)return t({ev:r,rte:this,editor:e.getEditor()});var a=r.clipboardData,o=a.getData("text"),i=a.getData("text/html");if(o&&!i){r.preventDefault();var l=o.replace(/(?:\r\n|\r|\n)/g,"<br/>");this.doc.execCommand("insertHTML",!1,l)}},s.prototype.syncActions=function(){var r=this;this.getActions().forEach(function(e){if(r.actionbar&&(!e.state||e.state&&e.state(r,r.doc)>=0)){var t=e.event||"click",a=e.btn;a&&(a["on".concat(t)]=function(){e.result(r,e),r.updateActiveActions()})}})},s.prototype.addAction=function(r,e){e===void 0&&(e={});var t=e.sync,a=this.actionbarEl();if(a){var o=r.icon,i=r.attributes,l=i===void 0?{}:i,c=document.createElement("span");c.className=this.classes.button,r.btn=c;for(var d in l)c.setAttribute(d,l[d]);typeof o=="string"?c.innerHTML=o:c.appendChild(o),a.appendChild(c)}t&&(this.actions.push(r),this.syncActions())},s.prototype.getActions=function(){return this.actions},s.prototype.selection=function(){return this.doc.getSelection()},s.prototype.exec=function(r,e){this.doc.execCommand(r,!1,e)},s.prototype.actionbarEl=function(){return this.actionbar},s.prototype.insertHTML=function(r,e){var t=e===void 0?{}:e,a=t.select,o=this,i=o.em,l=o.doc,c=o.el,d=l.getSelection();if(d&&d.rangeCount){var p=(0,Zt.getComponentModel)(c)||i.getSelected(),h=l.createElement("div"),g=d.getRangeAt(0);g.deleteContents(),(0,_e.isString)(r)?h.innerHTML=r:r&&h.appendChild(r),Array.prototype.slice.call(h.childNodes).forEach(function(y){g.insertNode(y)}),d.removeAllRanges(),d.addRange(g),c.focus(),a&&p&&(p.once("rte:disable",function(){var y=p.find("[".concat(rw,"]"))[0];y&&(i.setSelected(y),y.removeAttributes(rw))}),p.trigger("disable"))}},s})();const cJ=lJ;var bN;(function(s){s.enable="rte:enable",s.disable="rte:disable",s.custom="rte:custom"})(bN||(bN={}));var dJ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),nw=function(){return nw=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},nw.apply(this,arguments)},_C=function(s,r,e,t){function a(o){return o instanceof e?o:new e(function(i){i(o)})}return new(e||(e=Promise))(function(o,i){function l(p){try{d(t.next(p))}catch(h){i(h)}}function c(p){try{d(t.throw(p))}catch(h){i(h)}}function d(p){p.done?o(p.value):a(p.value).then(l,c)}d((t=t.apply(s,r||[])).next())})},EC=function(s,r){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},t,a,o,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(d){return function(p){return c([d,p])}}function c(d){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,d[0]&&(e=0)),e;)try{if(t=1,a&&(o=d[0]&2?a.return:d[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,d[1])).done)return o;switch(a=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return e.label++,{value:d[1],done:!1};case 5:e.label++,a=d[1],d=[0];continue;case 7:d=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){e=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){e.label=d[1];break}if(d[0]===6&&e.label<o[1]){e.label=o[1],o=d;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(d);break}o[2]&&e.ops.pop(),e.trys.pop();continue}d=r.call(s,e)}catch(p){d=[6,p],a=0}finally{t=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},uJ=function(s,r,e){if(e||arguments.length===2)for(var t=0,a=r.length,o;t<a;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return s.concat(o||Array.prototype.slice.call(r))},TC="".concat(Oy.refresh," frame:scroll ").concat(bs.I.update),fJ=(function(s){dJ(r,s);function r(e){var t=s.call(this,e,"RichTextEditor",iJ())||this;t.events=bN;var a=t.config,o=a.pStylePrefix;o&&(a.stylePrefix=o+a.stylePrefix),t.pfx=a.stylePrefix,t.actions=a.actions||[];var i=new Sr.Kx;return t.model=i,i.on("change:currentView",t.__trgCustom,t),t.__dbdTrgCustom=(0,_e.debounce)(function(){return t.__trgCustom()},0),t}return r.prototype.onLoad=function(){if((0,Zt.hasWin)()){var e=this.config,t=e.pStylePrefix,a=e.custom,o=(0,Ar.a_)("div",{class:(0,Ar.cx)("".concat(t,"rte-toolbar"),!a&&"".concat(t,"one-bg ").concat(t,"rte-toolbar-ui"))});this.toolbar=o,this.initRte((0,Ar.a_)("div")),(0,Ar.on)(o,"mousedown",function(i){return i.stopPropagation()})}},r.prototype.__trgCustom=function(){var e=this,t=e.model,a=e.em,o=e.events;a.trigger(o.custom,{enabled:!!t.get("currentView"),container:this.getToolbarEl(),actions:this.getAll()})},r.prototype.destroy=function(){var e,t,a;(e=this.globalRte)===null||e===void 0||e.destroy(),(a=(t=this.customRte)===null||t===void 0?void 0:t.destroy)===null||a===void 0||a.call(t),this.model.stopListening().clear({silent:!0}),this.__dbdTrgCustom.cancel(),(0,Ar.YZ)(this.toolbar)},r.prototype.postRender=function(e){var t=e.model.get("Canvas");this.toolbar.style.pointerEvents="all",this.hideToolbar(),t.getToolsEl().appendChild(this.toolbar)},r.prototype.initRte=function(e){var t=this.globalRte,a=this,o=a.em,i=a.pfx,l=a.actionbar,c=a.config,d=this.actions||uJ([],c.actions,!0),p={actionbar:"".concat(i,"actionbar"),button:"".concat(i,"action"),active:"".concat(i,"active"),inactive:"".concat(i,"inactive"),disabled:"".concat(i,"disabled")};return t?(t.em=o,t.setEl(e)):(t=new cJ(o,e,{classes:p,actions:d,actionbar:l,actionbarContainer:this.toolbar,module:this}),this.globalRte=t),t.actionbar&&(this.actionbar=t.actionbar),t.actions&&(this.actions=t.actions),t},r.prototype.add=function(e,t){var a;t===void 0&&(t={}),t.name=e,(a=this.globalRte)===null||a===void 0||a.addAction(t,{sync:!0})},r.prototype.get=function(e){var t,a;return(t=this.globalRte)===null||t===void 0||t.getActions().forEach(function(o){o.name==e&&(a=o)}),a},r.prototype.getAll=function(){var e;return((e=this.globalRte)===null||e===void 0?void 0:e.getActions())||[]},r.prototype.remove=function(e){var t,a=this.getAll(),o=this.get(e);if(o){var i=o.btn,l=a.indexOf(o);(t=i?.parentNode)===null||t===void 0||t.removeChild(i),a.splice(l,1)}return o},r.prototype.run=function(e){var t=this.globalRte,a=(0,_e.isString)(e)?this.get(e):e;t&&a&&(a.result(t,a),t.updateActiveActions())},r.prototype.getToolbarEl=function(){return this.toolbar},r.prototype.updatePosition=function(){var e=this,t=e.em,a=e.toolbar,o="px",i=t.Canvas,l=a.style,c=i.getTargetToElementFixed(this.lastEl,a,{event:"rteToolbarPosUpdate",left:0});["top","left","bottom","right"].forEach(function(d){var p=c[d];(0,Zt.isDef)(p)&&(l[d]=(0,_e.isString)(p)?p:(p||0)+o)})},r.prototype.enable=function(e,t,a){return _C(this,void 0,void 0,function(){var o,i,l,c,d,p;return EC(this,function(h){switch(h.label){case 0:return this.lastEl=e.el,o=this,i=o.customRte,l=o.em,c=o.events,d=e.getChildrenContainer(),this.toolbar.style.display="",[4,i?i.enable(d,t,a):this.initRte(d).enable(a)];case 1:return p=h.sent(),l&&(setTimeout(this.updatePosition.bind(this),0),l.off(TC,this.updatePosition,this),l.on(TC,this.updatePosition,this),l.trigger(c.enable,e,p)),this.model.set({currentView:e}),[2,p]}})})},r.prototype.getContent=function(e,t){return _C(this,void 0,void 0,function(){var a,o;return EC(this,function(i){switch(i.label){case 0:return a=this.customRte,o=e.getChildrenContainer(),a&&t&&(0,_e.isFunction)(a.getContent)?[4,a.getContent(o,t,{view:e})]:[3,2];case 1:return[2,i.sent()];case 2:return[2,o.innerHTML]}})})},r.prototype.hideToolbar=function(){var e=this.toolbar.style,t="-1000px";e.top=t,e.left=t,e.display="none"},r.prototype.disable=function(e,t){return _C(this,arguments,void 0,function(a,o,i){var l,c,d,p,h,g;return i===void 0&&(i={}),EC(this,function(y){switch(y.label){case 0:return l={},c=this,d=c.em,p=c.events,h=this.customRte,h?[4,h.disable(a.getChildrenContainer(),o,nw(nw({},i),{view:a}))]:[3,2];case 1:return g=y.sent(),g&&(l=g),[3,3];case 2:o&&o.disable(),y.label=3;case 3:return this.hideToolbar(),d&&(d.off(TC,this.updatePosition,this),!i.fromMove&&d.trigger(p.disable,a,o)),this.model.unset("currentView"),[2,l]}})})},r})(Di);const pJ=fJ;var hJ=function(){return{sectors:[{name:"General",open:!1,properties:["display","float","position","top","right","left","bottom"]},{name:"Flex",open:!1,properties:["flex-direction","flex-wrap","justify-content","align-items","align-content","order","flex-basis","flex-grow","flex-shrink","align-self"]},{name:"Dimension",open:!1,properties:["width","height","max-width","min-height","margin","padding"]},{name:"Typography",open:!1,properties:["font-family","font-size","font-weight","letter-spacing","color","line-height","text-align","text-shadow"]},{name:"Decorations",open:!1,properties:["background-color","border-radius","border","box-shadow","background"]},{name:"Extra",open:!1,properties:["opacity","transition","transform"]}],appendTo:"",stylePrefix:"sm-",custom:!1,hideNotStylable:!0,highlightChanged:!0,highlightComputed:!0,showComputed:!0,clearProperties:!0,avoidComputed:["width","height"]}};const mJ=hJ;var gJ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),ai=function(){return ai=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},ai.apply(this,arguments)},yJ=function(s,r){var e={};for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&r.indexOf(t)<0&&(e[t]=s[t]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(s);a<t.length;a++)r.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(s,t[a])&&(e[t[a]]=s[t[a]]);return e},NT=function(s,r,e){if(e||arguments.length===2)for(var t=0,a=r.length,o;t<a;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return s.concat(o||Array.prototype.slice.call(r))},Z2=(function(s){gJ(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.getDefaults=function(){return(0,_e.result)(this.prototype,"defaults")},r.prototype.defaults=function(){return{name:"",property:"",type:"",defaults:"",info:"",value:"",icon:"",functionName:"",status:"",visible:!0,fixedValues:["initial","inherit"],full:!1,important:!1,toRequire:!1,requires:void 0,requiresParent:null,parentTarget:null}},r.prototype.initialize=function(e,t){e===void 0&&(e={}),t===void 0&&(t={}),this.em=t.em;var a=this.getId()||"",o=this.get("name")||this.get("label")||"";!this.get("property")&&this.set("property",(o||a).replace(/ /g,"-"));var i=this.get("property");!this.get("id")&&this.set("id",i),!o&&this.set("name",(0,Zt.capitalize)(i).replace(/-/g," ")),this.on("change",this.__upTargets),r.callInit(this,e,t)},r.prototype.__getParentProp=function(){var e,t;return(t=(e=this.collection)===null||e===void 0?void 0:e.opts)===null||t===void 0?void 0:t.parentProp},r.prototype.__upTargets=function(e,t){var a,o=this;t===void 0&&(t={});var i=this.em,l=i.Styles,c=this.getName(),d=t.__clear,p=d?"":this.__getFullValue(t),h=this.__getParentProp(),g=this.changedAttributes(),y=(0,_e.keys)(g).reduce(function(N,O){return N[O]=o.previous(O),N},{}),b=NT(NT([],(0,_e.keys)(this.__getClearProps()),!0),["__p"],!1),v=(0,_e.keys)(g),w=!t.__up&&!h&&(d||b.some(function(N){return v.indexOf(N)>=0})),C=this.get("onChange"),k={property:this,from:y,to:g,value:p,opts:t};l.__trgEv(l.events.propertyUpdate,k),C&&C(k),w&&this.__upTargetsStyle((a={},a[c]=p,a),t)},r.prototype.__upTargetsStyle=function(e,t){var a,o=(a=this.em)===null||a===void 0?void 0:a.get("StyleManager");o?.addStyleTargets(ai(ai({},e),{__p:!!t.avoidStore}),t)},r.prototype._up=function(e,t){t===void 0&&(t={}),t.noTarget&&(t.__up=!0);var a=t.partial,o=yJ(t,["partial"]);return e.__p=!!(o.avoidStore||a),this.set(e,ai(ai({},o),{avoidStore:e.__p}))},r.prototype.up=function(e,t){t===void 0&&(t={}),this.set(e,ai(ai({},t),{__up:!0}))},r.prototype.init=function(){},r.prototype.getId=function(){return this.get("id")},r.prototype.getType=function(){return this.get("type")},r.prototype.getName=function(){return this.get("property")},r.prototype.getLabel=function(e){var t;e===void 0&&(e={});var a=e.locale,o=a===void 0?!0:a,i=this.getId(),l=this.get("name")||this.get("label");return o&&((t=this.em)===null||t===void 0?void 0:t.t("styleManager.properties.".concat(i)))||l},r.prototype.getValue=function(e){e===void 0&&(e={});var t=e.noDefault,a=this.get("value");return!this.hasValue()&&!t?this.getDefaultValue():a},r.prototype.hasValue=function(e){e===void 0&&(e={});var t=e.noParent,a=t&&this.getParentTarget(),o=this.get("value");return!(0,_e.isUndefined)(o)&&o!==""&&!a},r.prototype.hasValueParent=function(){return this.hasValue()&&!this.hasValue({noParent:!0})},r.prototype.getStyle=function(e){var t;e===void 0&&(e={});var a=this.getName(),o=e.camelCase?(0,Zt.camelCase)(a):a;return t={},t[o]=this.__getFullValue(e),t},r.prototype.getDefaultValue=function(){var e=this.get("default");return"".concat((0,_e.isUndefined)(e)?this.get("defaults"):e)},r.prototype.upValue=function(e,t){t===void 0&&(t={});var a=e===null||e===""?this.__getClearProps():this.__parseValue(e,t);return this._up(a,t)},r.prototype.isVisible=function(){return!!this.get("visible")},r.prototype.clear=function(e){return e===void 0&&(e={}),this._up(this.__getClearProps(),ai(ai({},e),{__clear:!0})),this},r.prototype.canClear=function(){var e=this.getParent();return e?e.__canClearProp(this):this.hasValue({noParent:!0})},r.prototype.getParent=function(){return this.__getParentProp()},r.prototype.isFull=function(){return!!this.get("full")},r.prototype.__parseValue=function(e,t){return this.parseValue(e,t)},r.prototype.__getClearProps=function(){return{value:"",important:!1}},r.prototype.setValue=function(e,t,a){t===void 0&&(t=!0),a===void 0&&(a={});var o=this.parseValue(e),i=!t;!i&&this.set({value:void 0},{avoidStore:i,silent:!0}),this.set(o,ai({avoidStore:i},a))},r.prototype.setValueFromInput=function(e,t,a){a===void 0&&(a={}),this.setValue(e,t,ai(ai({},a),{fromInput:1}))},r.prototype.parseValue=function(e,t){t===void 0&&(t={});var a={value:e},o="!important",i=this.get("functionName")||"";if((0,_e.isString)(e)&&e.indexOf(o)!==-1&&(a.value=e.replace(o,"").trim(),a.important=!0),!i&&!t.complete)return a;var l=[],c="".concat(a.value).trim(),d=c.indexOf("(")+1,p=i||c.substring(0,d-1);if(p&&(a.functionName=p),!i||c.indexOf("".concat(i,"("))===0){var h=c.lastIndexOf(")");l.push(d),h>=0&&l.push(h),a.value=String.prototype.substring.apply(c,l)}if(t.numeric){var g=parseFloat(a.value);a.unit=a.value.replace(g,""),a.value=g}return a},r.prototype.__getFullValue=function(e){var t=e===void 0?{}:e,a=t.withDefault;return!this.hasValue()&&a?this.getDefaultValue():this.getFullValue()},r.prototype.getFullValue=function(e,t){t===void 0&&(t={});var a=this.get("functionName"),o=this.getDefaultValue(),i=(0,_e.isUndefined)(e)?this.get("value"):e,l=this.hasValue();if(i&&o&&i===o)return o;if(a&&l){var c=a==="url"?"'".concat(i.replace(/'|"/g,""),"'"):i;i="".concat(a,"(").concat(c,")")}return l&&this.get("important")&&!t.skipImportant&&(i="".concat(i," !important")),i||""},r.prototype.__setParentTarget=function(e){this.up({parentTarget:e})},r.prototype.getParentTarget=function(){return this.get("parentTarget")||null},r.prototype.__parseFn=function(e){e===void 0&&(e="");var t=e.indexOf("(")+1,a=e.lastIndexOf(")");return{name:e.substring(0,t-1).trim(),value:String.prototype.substring.apply(e,[t,a>=0?a:void 0]).trim()}},r.prototype.__checkVisibility=function(e){var t=e.target,a=e.component,o=e.sector,i=e.sectors,l=a||t;if(!l)return!1;var c=this.getId(),d=this.getName(),p=this.attributes,h=p.requires,g=p.requiresParent,y=p.toRequire,b=p.isVisible,v=l.get("unstylable"),w=l.get("stylable-require"),C=l.get("stylable");if((0,_e.isFunction)(b))return!!b({property:this,sector:o,target:t,component:a});if((0,_e.isArray)(C)&&(C=C.indexOf(d)>=0),(0,_e.isArray)(v)&&(C=v.indexOf(d)<0),y&&(C=!t||w&&(w.indexOf(c)>=0||w.indexOf(d)>=0)),i&&h){var k=(0,_e.keys)(h);i.forEach(function(L){L.getProperties().forEach(function(B){if((0,_e.includes)(k,B.id)){var G=h[B.id];C=C&&(0,_e.includes)(G,B.get("value"))}})})}if(g){var N=a&&a.parent(),O=N&&N.getEl();if(O){var R=(0,Zt.hasWin)()?window.getComputedStyle(O):{};(0,_e.each)(g,function(L,B){C=C&&R[B]&&(0,_e.includes)(L,R[B])})}else C=!1}return!!C},r})(Sr.Kx);const ja=Z2;Z2.callParentInit=function(s,r,e,t){t===void 0&&(t={}),s.prototype.initialize.apply(r,[e,ai(ai({},t),{skipInit:1})])};Z2.callInit=function(s,r,e){e===void 0&&(e={}),!e.skipInit&&s.init(r,e)};var xJ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),tm=function(){return tm=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},tm.apply(this,arguments)},kT=function(s,r,e){if(e||arguments.length===2)for(var t=0,a=r.length,o;t<a;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return s.concat(o||Array.prototype.slice.call(r))},S6=function(s){return s==="integer"||s==="number"},vJ=(function(s){xJ(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.defaults=function(){return tm(tm({},ja.getDefaults()),{detached:!1,properties:[],separator:" ",join:null,fromStyle:null,toStyle:null,full:!0})},r.prototype.initialize=function(e,t){e===void 0&&(e={}),t===void 0&&(t={}),ja.callParentInit(ja,this,e,t);var a=this.em,o=new Q2(this.get("properties")||[],{em:a,parentProp:this});this.set("properties",o,{silent:!0}),this.listenTo(o,"change",this.__upProperties),ja.callInit(this,e,t)},Object.defineProperty(r.prototype,"properties",{get:function(){return this.get("properties")||[]},enumerable:!1,configurable:!0}),r.prototype.getProperties=function(){return kT([],this.get("properties").models,!0)},r.prototype.getProperty=function(e){return this.properties.filter(function(t){return t.getId()===e||t.getName()===e})[0]},r.prototype.getPropertyAt=function(e){return this.get("properties").at(e)},r.prototype.isDetached=function(){return!!this.get("detached")},r.prototype.getValues=function(e){var t=e===void 0?{}:e,a=t.byName;return this.getProperties().reduce(function(o,i){var l=a?i.getName():i.getId();return o[l]="".concat(i.__getFullValue()),o},{})},r.prototype.getSeparator=function(){return this.getSplitSeparator()},r.prototype.getJoin=function(){return this.__getJoin()},r.prototype.getStyleFromProps=function(e){var t;e===void 0&&(e={});var a=this.getName(),o=this.__getJoin(),i=this.get("toStyle"),l=this.getValues(),c={};if(i)c=i(l,{join:o,name:a,property:this});else if(l=this.getValues({byName:!0}),this.isDetached())c=l;else{var d=this.getProperties().map(function(p){return p.__getFullValue({withDefault:1})}).filter(Boolean).join(o);c=(t={},t[a]=d,t)}return this.isDetached()?c[a]="":(c[a]=c[a]||"",c=tm(tm({},c),this.getProperties().reduce(function(p,h){return p[h.getName()]="",p},{}))),e.camelCase?Object.keys(c).reduce(function(p,h){return p[(0,Zt.camelCase)(h)]=c[h],p},{}):c},r.prototype.getSplitSeparator=function(){return new RegExp("".concat(this.get("separator"),"(?![^\\(]*\\))"))},r.prototype.__upProperties=function(e,t){if(t===void 0&&(t={}),!(t.__up||t.__clearIn)){var a=this.__getParentProp();if(a)return a.__upProperties(this,t);this.__upTargetsStyleProps(t,e)}},r.prototype.__upTargetsStyleProps=function(e,t){var a;e===void 0&&(e={});var o=this.getStyleFromProps();if(this.isDetached()&&t){var i=t.getName();o=(a={},a[i]=o[i],a)}this.__upTargetsStyle(o,e)},r.prototype._up=function(e,t){return t===void 0&&(t={}),this.__setProperties(this.__getSplitValue(e.value),t),ja.prototype._up.call(this,e,t),this},r.prototype.getStyle=function(e){return this.getStyleFromProps(e)},r.prototype.__getFullValue=function(e){if(e===void 0&&(e={}),this.isDetached()||e.__clear)return"";var t=this.getStyleFromProps()[this.getName()]||"";return WS(t)},r.prototype.__getJoin=function(){var e=this.get("join");return(0,_e.isString)(e)?e:this.get("separator")},r.prototype.__styleHasProps=function(e){e===void 0&&(e={});var t=this.getName(),a=this.getProperties(),o=a.map(function(l){return l.getName()}),i=kT([t],o,!0);return i.some(function(l){return!(0,_e.isUndefined)(e[l])&&e[l]!==""})},r.prototype.__splitValue=function(e,t){return WS(e).split(t).map(function(a){return a.trim()}).filter(Boolean)},r.prototype.__splitStyleName=function(e,t,a){var o=e[t];return this.__splitValue(o||"",a)},r.prototype.__getSplitValue=function(e,t){e===void 0&&(e="");var a=t===void 0?{}:t,o=a.byName,i=this.getProperties(),l=i.length===4&&i.every(function(p){return S6(p.getType())}),c=this.__splitValue(e,this.getSplitSeparator()),d={};return i.forEach(function(p,h){var g=c[h],y=(0,_e.isUndefined)(g)?"":g;if(l){var b=c.length;y=c[h]||c[h%b+(b!=1&&b%2?1:0)]||y}var v=o?p.getName():p.getId();d[v]=y||""}),d},r.prototype.__getPropsFromStyle=function(e,t){if(e===void 0&&(e={}),t===void 0&&(t={}),!this.__styleHasProps(e))return null;var a=t.byName,o=this.getName(),i=this.getProperties(),l=this.getSplitSeparator(),c=this.get("fromStyle"),d=c?c(e,{property:this,name:o,separator:l}):{};if(!c){var p=e[o];d=this.__getSplitValue(p||"",{byName:a}),i.forEach(function(h){var g=e[h.getName()],y=a?h.getName():h.getId();!(0,_e.isUndefined)(g)&&g!==""&&(d[y]=g)})}return d},r.prototype.__setProperties=function(e,t){e===void 0&&(e={}),t===void 0&&(t={}),this.getProperties().forEach(function(o){var i=e[o.getId()];o.__getFullValue()!==i&&o.upValue(i,t)});var a=(0,_e.keys)(e).map(function(o){return e[o]}).join(" ");this.set("value",a,{silent:!0})},r.prototype.clear=function(){var e=this;return this.getProperties().map(function(t){return t.clear({__clearIn:!e.isDetached()})}),ja.prototype.clear.call(this),this},r.prototype.hasValue=function(e){return this.getProperties().some(function(t){return t.hasValue(e)})},r.prototype.getFullValue=function(){return this.__getFullValue()},r.prototype.__canClearProp=function(e){return this.isDetached()&&e.hasValue({noParent:!0})},r})(ja);const Bh=vJ;var bJ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Ni=function(){return Ni=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Ni.apply(this,arguments)},wJ=function(s,r){var e={};for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&r.indexOf(t)<0&&(e[t]=s[t]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(s);a<t.length;a++)r.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(s,t[a])&&(e[t[a]]=s[t[a]]);return e},jJ=/,(?![^\(]*\))/,CJ=/\s(?![^(]*\))/,SJ=(function(s){bJ(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.defaults=function(){return Ni(Ni({},Bh.getDefaults()),{layers:[],emptyValue:"unset",layerSeparator:", ",layerJoin:"",prepend:0,preview:!1,layerLabel:null,selectedLayer:null})},r.prototype.initialize=function(e,t){e===void 0&&(e={}),t===void 0&&(t={}),Bh.callParentInit(Bh,this,e,t);var a=this.get("layers"),o=new Gv(a,{prop:this});o.property=this,o.properties=this.get("properties"),this.set("layers",o,{silent:!0}),this.on("change:selectedLayer",this.__upSelected),this.listenTo(o,"add remove",this.__upLayers),Bh.callInit(this,e,t)},Object.defineProperty(r.prototype,"layers",{get:function(){return this.get("layers")},enumerable:!1,configurable:!0}),r.prototype.getLayers=function(){return this.layers.models},r.prototype.hasLayers=function(){return this.getLayers().length>0},r.prototype.getLayer=function(e){return e===void 0&&(e=0),this.layers.at(e)||void 0},r.prototype.getSelectedLayer=function(){var e=this.get("selectedLayer");return e&&e.getIndex()>=0?e:void 0},r.prototype.selectLayer=function(e){return this.set("selectedLayer",e,{__select:!0})},r.prototype.selectLayerAt=function(e){e===void 0&&(e=0);var t=this.getLayer(e);return t&&this.selectLayer(t)},r.prototype.moveLayer=function(e,t){t===void 0&&(t=0);var a=this.layers,o=e?e.getIndex():-1;o>=0&&(0,_e.isNumber)(t)&&t>=0&&t<a.length&&o!==t&&(this.removeLayer(e),a.add(e,{at:t}))},r.prototype.addLayer=function(e,t){e===void 0&&(e={}),t===void 0&&(t={});var a={};this.getProperties().forEach(function(i){var l=i.getId(),c=e[l];a[l]=(0,_e.isUndefined)(c)?i.getDefaultValue():c});var o=this.layers.push({values:a},t);return o},r.prototype.removeLayer=function(e){return this.layers.remove(e)},r.prototype.removeLayerAt=function(e){e===void 0&&(e=0);var t=this.getLayer(e);return t?this.removeLayer(t):null},r.prototype.getLayerLabel=function(e){var t="";if(e){var a=this.get("layerLabel"),o=e.getValues(),i=e.getIndex();if(a)t=a(e,{index:i,values:o,property:this});else{var l=[];this.getProperties().map(function(c){l.push(o[c.getId()])}),t=l.filter(Boolean).join(" ")}}return t},r.prototype.getStyleFromLayer=function(e,t){var a;t===void 0&&(t={});var o=this.__getJoin(),i=this.__getJoinLayers(),l=this.get("toStyle"),c=this.getName(),d=e.getValues(),p;if(l)p=l(d,{join:o,joinLayers:i,name:c,layer:e,property:this});else{var h=this.getProperties().map(function(g){var y=g.getName(),b=d[g.getId()],v=(0,_e.isUndefined)(b)?g.getDefaultValue():b;if(t.number&&S6(g.getType())){var w=g.parseValue(b,t.number);v="".concat(w.value).concat(w.unit)}return{name:y,value:v}});p=this.isDetached()?h.reduce(function(g,y){return g[y.name]=y.value,g},{}):(a={},a[this.getName()]=h.map(function(g){return g.value}).join(o),a)}return t.camelCase?Object.keys(p).reduce(function(g,y){return g[(0,Zt.camelCase)(y)]=p[y],g},{}):p},r.prototype.getStylePreview=function(e,t){t===void 0&&(t={});var a={},o=this.get("preview");return o&&(a=this.getStyleFromLayer(e,t)),a},r.prototype.getLayerSeparator=function(){var e=this.get("layerSeparator");return(0,_e.isString)(e)?new RegExp("".concat(e,"(?![^\\(]*\\))")):e},r.prototype.hasEmptyValue=function(){return!this.hasLayers()&&!!this.attributes.isEmptyValue},r.prototype.__upProperties=function(e,t){var a;t===void 0&&(t={});var o=this.getSelectedLayer();o&&(o.upValues((a={},a[e.getId()]=e.__getFullValue(),a)),!t.__up&&this.__upTargetsStyleProps(t))},r.prototype.__upLayers=function(e,t,a){this.__upTargetsStyleProps(a||t)},r.prototype.__upTargets=function(e,t){if(t===void 0&&(t={}),!t.__select)return ja.prototype.__upTargets.call(this,e,t)},r.prototype.__upTargetsStyleProps=function(e){e===void 0&&(e={}),this.__upTargetsStyle(this.getStyleFromLayers(e),e)},r.prototype.__upTargetsStyle=function(e,t){return ja.prototype.__upTargetsStyle.call(this,e,t)},r.prototype.__upSelected=function(e,t){var a=e===void 0?{}:e,o=a.noEvent;t===void 0&&(t={});var i=this.em.Styles,l=this.getSelectedLayer(),c=l?.getValues();c&&this.getProperties().forEach(function(d){var p,h=(p=c[d.getId()])!==null&&p!==void 0?p:"";d.__getFullValue()!==h&&d.upValue(h,Ni(Ni({},t),{__up:!0}))}),!o&&i.__trgEv(i.events.layerSelect,{property:this})},r.prototype._up=function(e,t){t===void 0&&(t={});var a=e.__layers,o=a===void 0?[]:a,i=wJ(e,["__layers"]);return!this.isDetached()&&this.__setLayers(o),this.__upSelected({noEvent:!0},t),ja.prototype._up.call(this,i,t),this},r.prototype.__setLayers=function(e,t){e===void 0&&(e=[]),t===void 0&&(t={});var a=this.layers,o=e.map(function(i){return{values:i}});a.length===o.length?o.map(function(i,l){var c;return(c=a.at(l))===null||c===void 0?void 0:c.upValues(i.values)}):a.reset(o),this.set({isEmptyValue:!!t.isEmptyValue}),this.__upSelected({noEvent:!0})},r.prototype.__parseValue=function(e){var t=this,a=this.parseValue(e);return a.__layers=e.split(jJ).map(function(o){return o.trim()}).map(function(o){return t.__parseLayer(o)}).filter(Boolean),a},r.prototype.__parseLayer=function(e){var t=this.get("parseLayer"),a=e.split(CJ),o=this.getProperties();return t?t({value:e,values:a}):o.reduce(function(i,l,c){var d=a[c];return i[l.getId()]=(0,_e.isUndefined)(d)?l.getDefaultValue():d,i},{})},r.prototype.__getLayersFromStyle=function(e){var t=this;if(e===void 0&&(e={}),!this.__styleHasProps(e))return null;if(this.isEmptyValueStyle(e))return[];var a=this.getName(),o=this.getProperties(),i=this.getLayerSeparator(),l=this.attributes.fromStyle,c=l?l(e,{property:this,name:a,separatorLayers:i}):[];if(!l){var d=this.__splitStyleName(e,a,i).map(function(p){return p.split(t.getSplitSeparator())}).map(function(p){var h={};return o.forEach(function(g,y){var b=p[y];h[g.getId()]=(0,_e.isUndefined)(b)?g.getDefaultValue():b}),h});o.forEach(function(p){var h=p.getId();t.__splitStyleName(e,p.getName(),i).map(function(g){var y;return y={},y[h]=g||p.getDefaultValue(),y}).forEach(function(g,y){d[y]=d[y]?Ni(Ni({},d[y]),g):g})}),c=d}return(0,_e.isArray)(c)?c:[c]},r.prototype.getStyle=function(e){return e===void 0&&(e={}),this.getStyleFromLayers(e)},r.prototype.getStyleFromLayers=function(e){var t=this;e===void 0&&(e={});var a={},o=this.getName(),i=this.getLayers(),l=this.getProperties(),c=i.map(function(p){return t.getStyleFromLayer(p,e)});if(c.forEach(function(p){(0,_e.keys)(p).map(function(h){a[h]||(a[h]=[]),a[h].push(p[h])})}),(0,_e.keys)(a).map(function(p){a[p]=a[p].join(t.__getJoinLayers())}),this.isDetached())a[o]="",!i.length&&l.map(function(p){a[p.getName()]=""});else{var d=l.reduce(function(p,h){return p[h.getName()]="",p},{});a[o]=a[o]||"",a=Ni(Ni({},a),d)}return Ni(Ni({},a),e.__clear?{}:this.getEmptyValueStyle())},r.prototype.isEmptyValueStyle=function(e){e===void 0&&(e={});var t=this.getEmptyValueStyle({force:!0}),a=(0,_e.keys)(t);return!!a.length&&a.every(function(o){return t[o]===e[o]})},r.prototype.getEmptyValueStyle=function(e){e===void 0&&(e={});var t=this.attributes.emptyValue;if(t&&(!this.hasLayers()||e.force)){var a=this.getName(),o=this.getProperties(),i=(0,_e.isString)(t)?t:t({property:this});if((0,_e.isString)(i)){var l={};return this.isDetached()?o.map(function(c){l[c.getName()]=i}):l[a]=i,l}else return i}else return{}},r.prototype.__getJoinLayers=function(){var e=this.get("layerJoin"),t=this.get("layerSeparator");return e||((0,_e.isString)(t)?t:e)},r.prototype.__getFullValue=function(){if(this.get("detached"))return"";var e=this.getStyleFromLayers();return WS(e[this.getName()])},r.prototype.hasValue=function(e){e===void 0&&(e={});var t=e.noParent,a=t&&this.getParentTarget();return(this.hasLayers()||this.hasEmptyValue())&&!a},r.prototype.clear=function(e){return e===void 0&&(e={}),this.layers.reset(),this.__upTargetsStyleProps(Ni(Ni({},e),{__clear:!0})),ja.prototype.clear.call(this),this},r.prototype.__canClearProp=function(){return!1},r.prototype.__getLayers=function(){return this.layers},r})(Bh);const NJ=SJ;var kJ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),sw=function(){return sw=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},sw.apply(this,arguments)},_J=function(s,r){var e={};for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&r.indexOf(t)<0&&(e[t]=s[t]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(s);a<t.length;a++)r.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(s,t[a])&&(e[t[a]]=s[t[a]]);return e},EJ=function(s,r,e){if(e||arguments.length===2)for(var t=0,a=r.length,o;t<a;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return s.concat(o||Array.prototype.slice.call(r))},OC="data-clear-style",TJ=(function(s){kJ(r,s);function r(e){e===void 0&&(e={});var t=s.call(this,e)||this;(0,_e.bindAll)(t,"__change","__updateStyle");var a=e.config||{},o=a.em;t.config=a,t.em=o,t.pfx=a.stylePrefix||"",t.ppfx=a.pStylePrefix||"",t.__destroyFn=t.destroy?t.destroy.bind(t):function(){};var i=t.model;i.view=t,t.onValueChange=(0,_e.debounce)(t.onValueChange.bind(t),10),t.updateStatus=(0,_e.debounce)(t.updateStatus.bind(t),0),t.listenTo(i,"destroy remove",t.remove),t.listenTo(i,"change:visible",t.updateVisibility),t.listenTo(i,"change:name change:className change:full",t.render),t.listenTo(i,"change:value",t.onValueChange),t.listenTo(i,"change:parentTarget",t.updateStatus),t.listenTo(o,"change:device",t.onValueChange);var l=t.init&&t.init.bind(t);return l&&l(),t}return r.prototype.events=function(){var e;return e={change:"inputValueChanged"},e["click [".concat(OC,"]")]="clear",e},r.prototype.template=function(e){var t=this,a=t.pfx,o=t.ppfx;return`
      <div class="`.concat(a,`label" data-sm-label></div>
      <div class="`).concat(o,`fields" data-sm-fields></div>
    `)},r.prototype.templateLabel=function(e){var t=this,a=t.pfx,o=t.em,i=e.parent,l=e.attributes,c=l.icon,d=c===void 0?"":c,p=l.info,h=p===void 0?"":p,g=o?.getConfig().icons,y=g?.close||"";return`
      <span class="`.concat(a,"icon ").concat(d,'" title="').concat(h,`">
        `).concat(e.getLabel(),`
      </span>
      `).concat(i?"":'<div class="'.concat(a,'clear" style="display: none" ').concat(OC,">").concat(y,"</div>"),`
    `)},r.prototype.templateInput=function(e){return`
      <div class="`.concat(this.ppfx,`field">
        <input placeholder="`).concat(e.getDefaultValue(),`"/>
      </div>
    `)},r.prototype.remove=function(){var e=this;return Sr.Ss.prototype.remove.apply(this,arguments),["em","input","$input","view"].forEach(function(t){return e[t]=null}),this.__destroyFn(this._getClbOpts()),this},r.prototype.updateStatus=function(){var e,t=this,a=t.model,o=t.pfx,i=t.ppfx,l=t.config,c="".concat(i,"four-color"),d="".concat(i,"color-warn"),p=this.$el.children(".".concat(o,"label")),h=this.getClearEl(),g=h?h.style:{};p.removeClass("".concat(c," ").concat(d)),g.display="none",a.hasValue({noParent:!0})&&l.highlightChanged?(p.addClass(c),l.clearProperties&&(g.display="")):a.hasValue()&&l.highlightComputed&&p.addClass(d),(e=this.parent)===null||e===void 0||e.updateStatus()},r.prototype.clear=function(e){e&&e.stopPropagation(),this.model.clear()},r.prototype.getClearEl=function(){return this.clearEl||(this.clearEl=this.el.querySelector("[".concat(OC,"]"))),this.clearEl},r.prototype.inputValueChanged=function(e){e&&e.stopPropagation(),!this.emit&&this.model.upValue(e.target.value)},r.prototype.onValueChange=function(e,t,a){this.setValue(this.model.getFullValue(void 0,{skipImportant:!0})),this.updateStatus()},r.prototype.setValue=function(e){var t=this.model,a=(0,_e.isUndefined)(e)||e===""?t.getDefaultValue():e;if(this.update)return this.__update(a);this.__setValueInput(a)},r.prototype.__setValueInput=function(e){var t=this.getInputEl();t&&(t.value=e)},r.prototype.getInputEl=function(){return this.input||(this.input=this.el.querySelector("input")),this.input},r.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},r.prototype.clearCached=function(){delete this.clearEl,delete this.input,delete this.$input},r.prototype.__unset=function(){var e=this.unset&&this.unset.bind(this);e&&e(this._getClbOpts())},r.prototype.__update=function(e){var t=this.update&&this.update.bind(this);t&&t(sw(sw({},this._getClbOpts()),{value:e}))},r.prototype.__change=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var a=this.emit&&this.emit.bind(this);a&&a.apply(void 0,EJ([this._getClbOpts()],e,!1))},r.prototype.__updateStyle=function(e,t){t===void 0&&(t={});var a=t.complete,o=t.partial;_J(t,["complete","partial"]);var i=this.model,l=a!==!1&&o!==!0;(0,Zt.isObject)(e)?i.__upTargetsStyle(e,{avoidStore:!l}):i.upValue(e,{partial:!l})},r.prototype._getClbOpts=function(){var e=this,t=e.model,a=e.el,o=e.createdEl;return{el:a,createdEl:o,property:t,props:t.attributes,change:this.__change,updateStyle:this.__updateStyle}},r.prototype.render=function(){this.clearCached();var e=this,t=e.pfx,a=e.model,o=e.el,i=e.$el,l=a.getName(),c=a.getType(),d=a.get("className")||"",p="".concat(t,"property"),h=c==="number"?"".concat(t).concat(c," ").concat(t,"integer"):"".concat(t).concat(c);this.createdEl&&this.__destroyFn(this._getClbOpts()),i.empty().append(this.template(a)),i.find("[data-sm-label]").append(this.templateLabel(a));var g=this.create&&this.create.bind(this);this.createdEl=g&&g(this._getClbOpts()),i.find("[data-sm-fields]").append(this.createdEl||this.templateInput(a)),o.className="".concat(p," ").concat(h," ").concat(p,"__").concat(l," ").concat(d).trim(),o.className+=a.isFull()?" ".concat(p,"--full"):"";var y=this.onRender&&this.onRender.bind(this);return y&&y(),this.setValue(a.getValue()),this},r.prototype.onRender=function(){},r})(Sr.Ss);const Gd=TJ;var OJ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),PJ=(function(s){OJ(r,s);function r(e){var t=s.call(this,e)||this;t.config=e.config||{},t.pfx=t.config.stylePrefix||"",t.properties=[],t.parent=e.parent;var a=t.collection;return t.listenTo(a,"add",t.addTo),t.listenTo(a,"reset",t.render),t}return r.prototype.addTo=function(e,t,a){this.add(e,null,a)},r.prototype.add=function(e,t,a){a===void 0&&(a={});var o=this,i=o.parent,l=o.config,c=t||this.el,d=new e.typeView({model:e,config:l});i&&(d.parent=i),d.render();var p=d.el;this.properties.push(d),(0,Ar.Sc)(c,p,a.at)},r.prototype.remove=function(){return Sr.Ss.prototype.remove.apply(this,arguments),this.clearItems(),this},r.prototype.clearItems=function(){this.properties.forEach(function(e){return e.remove()}),this.properties=[]},r.prototype.render=function(){var e=this,t=this,a=t.$el,o=t.pfx;this.clearItems();var i=document.createDocumentFragment();return this.collection.forEach(function(l){return e.add(l,i)}),a.empty(),a.append(i),a.attr("class","".concat(o,"properties")),this},r})(Sr.Ss);const X2=PJ;var AJ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),aw=function(){return aw=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},aw.apply(this,arguments)},MJ=(function(s){AJ(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.templateInput=function(){var e=this.pfx;return`
      <div class="`.concat(e,"field ").concat(e,`composite">
        <span id="`).concat(e,`input-holder"></span>
      </div>
    `)},r.prototype.remove=function(){var e;return(e=this.props)===null||e===void 0||e.remove(),Gd.prototype.remove.apply(this,arguments),this},r.prototype.onValueChange=function(){},r.prototype.onRender=function(){var e=this.pfx,t=this.model,a=t.get("properties");if(a.length&&!this.props){var o=t.isDetached(),i=new X2({config:aw(aw({},this.config),{highlightComputed:o,highlightChanged:o}),collection:a,parent:this});i.render(),this.$el.find("#".concat(e,"input-holder")).append(i.el),this.props=i}},r.prototype.clearCached=function(){Gd.prototype.clearCached.apply(this,arguments),delete this.props},r})(Gd);const vy=MJ;var IJ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),RJ=(function(s){IJ(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.events=function(){return{click:"select","click [data-close-layer]":"removeItem","mousedown [data-move-layer]":"initSorter","touchstart [data-move-layer]":"initSorter"}},r.prototype.template=function(){var e=this,t=e.pfx,a=e.ppfx,o=e.em,i=o?.getConfig().icons,l=i?.close||"",c=i?.move||"";return`
      <div class="`.concat(t,`label-wrp">
        <div id="`).concat(t,'move" class="').concat(a,`no-touch-actions" data-move-layer>
          `).concat(c,`
        </div>
        <div id="`).concat(t,`label" data-label></div>
        <div id="`).concat(t,'preview-box" class="').concat(t,`layer-preview" style="display: none" data-preview-box>
          <div id="`).concat(t,'preview" class="').concat(t,`layer-preview-cnt" data-preview></div>
        </div>
        <div id="`).concat(t,'close-layer" class="').concat(t,`btn-close" data-close-layer>
          `).concat(l,`
        </div>
      </div>
      <div id="`).concat(t,`inputs" data-properties></div>
    `)},r.prototype.initialize=function(e){e===void 0&&(e={});var t=this.model,a=e.config||{};this.em=a.em,this.config=a,this.sorter=e.sorter,this.pfx=a.stylePrefix||"",this.ppfx=a.pStylePrefix||"",this.propertyView=e.propertyView;var o=this.propertyView.model;this.listenTo(t,"destroy remove",this.remove),this.listenTo(t,"change:values",this.updateLabel),this.listenTo(o,"change:selectedLayer",this.updateVisibility),t.view=this,t.set({droppable:0,draggable:1}),this.$el.data("model",t)},r.prototype.initSorter=function(){var e;(e=this.sorter)===null||e===void 0||e.startSort([{element:this.el}])},r.prototype.removeItem=function(e){e&&e.stopPropagation(),this.model.remove()},r.prototype.select=function(){this.model.select()},r.prototype.getPropertiesWrapper=function(){return this.propsWrapEl||(this.propsWrapEl=this.el.querySelector("[data-properties]")),this.propsWrapEl},r.prototype.getPreviewEl=function(){return this.previewEl||(this.previewEl=this.el.querySelector("[data-preview]")),this.previewEl},r.prototype.getLabelEl=function(){return this.labelEl||(this.labelEl=this.el.querySelector("[data-label]")),this.labelEl},r.prototype.updateLabel=function(){var e=this.model,t=e.getLabel();if(this.getLabelEl().innerHTML=t,e.hasPreview()){var a=this.getPreviewEl(),o=e.getStylePreview({number:{min:-3,max:3}}),i=(0,_e.keys)(o).map(function(l){return"".concat(l,":").concat(o[l])}).join(";");a.setAttribute("style",i)}},r.prototype.updateVisibility=function(){var e,t=this,a=t.pfx,o=t.model,i=t.propertyView,l=this.getPropertiesWrapper(),c=o.isSelected();l.style.display=c?"":"none",this.$el[c?"addClass":"removeClass"]("".concat(a,"active")),c&&l.appendChild((e=i.props)===null||e===void 0?void 0:e.el)},r.prototype.render=function(){var e=this,t=e.el,a=e.pfx,o=e.model;return t.innerHTML=this.template(),t.className="".concat(a,"layer"),o.hasPreview()&&(t.querySelector("[data-preview-box]").style.display=""),this.updateLabel(),this.updateVisibility(),this},r})(Sr.Ss);const DJ=RJ;var LJ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),FJ=(function(s){LJ(r,s);function r(e){var t=s.call(this,e)||this,a=t.collection,o=e.config||{},i=o.em,l=o.stylePrefix||"",c=o.pStylePrefix||"";t.config=o,t.pfx=l,t.ppfx=c,t.propertyView=e.propertyView,t.className="".concat(l,"layers ").concat(c,"field"),t.listenTo(a,"add",t.addTo),t.listenTo(a,"reset",t.reset),t.items=[];var d=t.createPlaceholder(o.pStylePrefix);t.$el.append(d);var p=i?.Utils;return t.sorter=p?new p.StyleManagerSorter({em:i,containerContext:{container:t.el,containerSel:".".concat(l,"layers"),itemSel:".".concat(l,"layer"),pfx:o.pStylePrefix,document,placeholderElement:d},dragBehavior:{dragDirection:Op.A.Vertical,nested:!1}}):void 0,a.view=t,t.$el.data("model",a),t.$el.data("collection",a),t}return r.prototype.addTo=function(e){var t=this.collection.indexOf(e);this.addToCollection(e,null,t)},r.prototype.addToCollection=function(e,t,a){var o=t||null,i=this,l=i.propertyView,c=i.config,d=i.sorter,p=i.$el,h=new DJ({model:e,config:c,sorter:d,propertyView:l}),g=h.render().el;if(this.items.push(h),o)o.appendChild(g);else if(typeof a<"u"){var y="before";p.children().length===a&&(a--,y="after"),a<0?p.append(g):p.children().eq(a)[y](g)}else p.append(g);return g},r.prototype.reset=function(e,t){this.clearItems(),this.render()},r.prototype.remove=function(){return this.clearItems(),Sr.Ss.prototype.remove.apply(this,arguments),this},r.prototype.clearItems=function(){this.items.forEach(function(e){return e.remove()}),this.items=[]},r.prototype.render=function(){var e=this,t=this.$el,a=document.createDocumentFragment();return t.empty(),this.collection.forEach(function(o){return e.addToCollection(o,a)}),t.append(a),t.attr("class",this.className),this},r.prototype.createPlaceholder=function(e){var t=document.createElement("div"),a=document.createElement("div");return this.el.parentNode,t.className=e+"placeholder",t.style.display="none",t.style.pointerEvents="none",a.className=e+"placeholder-int",t.appendChild(a),t},r})(Sr.Ss);const BJ=FJ;var zJ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),rm=function(){return rm=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},rm.apply(this,arguments)},$J=(function(s){zJ(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.events=function(){return rm(rm({},vy.prototype.events()),{"click [data-add-layer]":"addLayer",change:""})},r.prototype.templateInput=function(){var e=this,t=e.pfx,a=e.em,o=a?.getConfig().icons,i=o?.plus||"+";return`
      <div class="`.concat(t,"field ").concat(t,`stack">
        <button type="button" id="`).concat(t,`add" data-add-layer>
          `).concat(i,`
        </button>
        <div data-layers-wrapper></div>
      </div>
    `)},r.prototype.init=function(){var e=this.model;this.listenTo(e.layers,"change reset",this.updateStatus),this.listenTo(e,"change:isEmptyValue",this.updateStatus)},r.prototype.addLayer=function(){this.model.addLayer({},{at:0})},r.prototype.setValue=function(){},r.prototype.remove=function(){var e;return(e=this.layersView)===null||e===void 0||e.remove(),vy.prototype.remove.apply(this,arguments),this},r.prototype.clearCached=function(){vy.prototype.clearCached.apply(this,arguments),delete this.layersView},r.prototype.onRender=function(){var e=this,t=e.model,a=e.el,o=e.config,i=t.get("properties");if(i.length&&!this.props){var l=new X2({config:rm(rm({},o),{highlightComputed:!1,highlightChanged:!1}),collection:i,parent:this});l.render();var c=new BJ({collection:t.layers,config:o,propertyView:this});c.render();var d=a.querySelector("[data-layers-wrapper]");d.appendChild(c.el),this.props=l,this.layersView=c}},r})(vy);const UJ=$J;var VJ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),ow=function(){return ow=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},ow.apply(this,arguments)},HJ=(function(s){VJ(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.events=function(){return ow(ow({},Gd.prototype.events()),{"click [data-clear-asset]":"clear","click [data-open-assets]":"openAssetManager"})},r.prototype.templateInput=function(){var e,t=this,a=t.pfx,o=t.em,i=(e=this.em)===null||e===void 0?void 0:e.getConfig().icons,l=i?.close;return`
      <div class="`.concat(a,"field ").concat(a,`file">
        <div id='`).concat(a,`input-holder'>
          <div class="`).concat(a,`btn-c">
            <button class="`).concat(a,'btn" id="').concat(a,`images" type="button" data-open-assets>
              `).concat(o.t("styleManager.fileButton"),`
            </button>
          </div>
          <div style="clear:both;"></div>
        </div>
        <div id="`).concat(a,'preview-box" class="').concat(a,`preview-file" data-preview-box>
          <div id="`).concat(a,'preview-file" class="').concat(a,`preview-file-cnt" data-preview></div>
          <div id="`).concat(a,'close" class="').concat(a,'preview-file-close" data-clear-asset>').concat(l,`</div>
        </div>
      </div>
    `)},r.prototype.__setValueInput=function(e){var t=this,a=t.model,o=t.el,i=a.getDefaultValue(),l=o.querySelector("[data-preview-box]"),c=o.querySelector("[data-preview]");l.style.display=!e||e===i?"none":"",c.style.backgroundImage=e||a.getDefaultValue()},r.prototype.openAssetManager=function(){var e=this,t,a=(t=this.em)===null||t===void 0?void 0:t.Assets;a?.open({select:function(o,i){var l=(0,_e.isString)(o)?o:o.get("src");e.model.upValue(l,{partial:!i}),i&&a.close()},types:["image"],accept:"image/*"})},r})(Gd);const WJ=HJ;var qJ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),GJ=(function(s){qJ(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.templateInput=function(e){return""},r.prototype.init=function(){var e=this.model;this.listenTo(e,"change:unit",this.onValueChange),this.listenTo(e,"change:units",this.render)},r.prototype.setValue=function(e){},r.prototype.onRender=function(){var e=this,t=e.ppfx,a=e.model,o=e.el;if(!this.inputInst){var i=a.input;i.ppfx=t,i.render();var l=o.querySelector(".".concat(t,"fields"));l.appendChild(i.el),this.input=i.inputEl.get(0),this.inputInst=i}},r.prototype.clearCached=function(){Gd.prototype.clearCached.apply(this,arguments),this.inputInst=null},r})(Gd);const zd=GJ;var KJ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),YJ=(function(s){KJ(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.setValue=function(e){var t;(t=this.inputInst)===null||t===void 0||t.setValue(e,{fromTarget:1,def:this.model.getDefaultValue()})},r.prototype.remove=function(){var e=this;zd.prototype.remove.apply(this,arguments);var t=this.inputInst;return t&&t.remove&&t.remove(),["inputInst","$color"].forEach(function(a){return e[a]=null}),this},r.prototype.__handleChange=function(e,t){this.model.upValue(e,{partial:t})},r.prototype.onRender=function(){var e;if(!this.inputInst){this.__handleChange=this.__handleChange.bind(this);var t=this,a=t.ppfx,o=t.model,i=t.em,l=t.el,c=new ZA({target:i,model:o,ppfx:a,onChange:this.__handleChange}),d=c.render();l.querySelector(".".concat(a,"fields")).appendChild(d.el),this.input=(e=d.inputEl)===null||e===void 0?void 0:e.get(0),this.inputInst=d}},r})(zd);const ZJ=YJ;var XJ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),iw=function(){return iw=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},iw.apply(this,arguments)},_T=function(s,r,e){if(e||arguments.length===2)for(var t=0,a=r.length,o;t<a;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return s.concat(o||Array.prototype.slice.call(r))},QJ=(function(s){XJ(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.defaults=function(){return iw(iw({},ja.getDefaults()),{options:[],full:0})},r.prototype.getOptions=function(){var e=this.attributes,t=e.options,a=e.list;return(t&&t.length?t:a)||[]},r.prototype.getOption=function(e){var t=this,a=(0,Zt.isDef)(e)?e:this.getValue();return this.getOptions().filter(function(o){return t.getOptionId(o)===a})[0]||null},r.prototype.setOptions=function(e){return e===void 0&&(e=[]),this.set("options",e),this},r.prototype.addOption=function(e){if(e){var t=this.getOptions();this.setOptions(_T(_T([],t,!0),[e],!1))}return this},r.prototype.getOptionId=function(e){return(0,Zt.isDef)(e.id)?e.id:e.value},r.prototype.getOptionLabel=function(e,t){var a;t===void 0&&(t={});var o=t.locale,i=o===void 0?!0:o,l=((0,_e.isString)(e)?this.getOption(e):e)||{},c=this.getOptionId(l),d=l.label||l.name||c,p=t.property||this.getId();return i&&((a=this.em)===null||a===void 0?void 0:a.t("styleManager.options.".concat(p,".").concat(c)))||d},r.prototype.initialize=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];ja.prototype.initialize.apply(this,e),this.listenTo(this,"change:options",this.__onOptionChange)},r.prototype.__onOptionChange=function(){this.set("list",this.get("options"))},r})(ja);const wN=QJ;var JJ=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),eee=(function(s){JJ(r,s);function r(e){var t=s.call(this,e)||this;return t.listenTo(t.model,"change:options",t.updateOptions),t}return r.prototype.templateInput=function(){var e=this,t=e.pfx,a=e.ppfx;return`
      <div class="`.concat(a,"field ").concat(a,`select">
        <span id="`).concat(t,`input-holder"></span>
        <div class="`).concat(a,`sel-arrow">
          <div class="`).concat(a,`d-s-arrow"></div>
        </div>
      </div>
    `)},r.prototype.updateOptions=function(){delete this.input,this.onRender()},r.prototype.onRender=function(){var e=this.pfx,t=this.model,a=t.getOptions();if(!this.input){var o=[];a.forEach(function(l){var c=t.getOptionId(l),d=t.getOptionLabel(c),p=l.style?l.style.replace(/"/g,"&quot;"):"",h=p?'style="'.concat(p,'"'):"",g=c.replace(/"/g,"&quot;");o.push('<option value="'.concat(g,'" ').concat(h,">").concat(d,"</option>"))});var i=this.el.querySelector("#".concat(e,"input-holder"));i.innerHTML="<select>".concat(o.join(""),"</select>"),this.input=i.firstChild}},r.prototype.__setValueInput=function(e){var t=this.model,a=this.getInputEl(),o=t.getOptions()[0],i=o?t.getOptionId(o):"";a&&(a.value=e||i)},r})(Gd);const N6=eee;var tee=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),lw=function(){return lw=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},lw.apply(this,arguments)},ree=(function(s){tee(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.defaults=function(){return lw(lw({},wN.getDefaults()),{full:1})},r})(wN);const nee=ree;var see=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),aee=(function(s){see(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.templateInput=function(){var e=this.ppfx;return'<div class="'.concat(e,"field ").concat(e,'field-radio"></div>')},r.prototype.onRender=function(){var e=this,t=e.pfx,a=e.ppfx,o=this.model,i="".concat(a,"radio-item-label"),l=o.getName(),c=o.getOptions(),d="".concat(t,"radio ").concat(t,"radio-").concat(l),p=o.cid;if(!this.input){var h=[];c.forEach(function(y){var b=y.className?"".concat(y.className," ").concat(t,"icon ").concat(i):"",v=o.getOptionId(y),w="".concat(l,"-").concat(v,"-").concat(p),C=b?"":o.getOptionLabel(v),k=y.title?'title="'.concat(y.title,'"'):"",N=o.getValue()===v?"checked":"";h.push(`
          <div class="`.concat(a,`radio-item">
            <input type="radio" class="`).concat(d,'" id="').concat(w,'" name="').concat(l,"-").concat(p,'" value="').concat(v,'" ').concat(N,`/>
            <label class="`).concat(b||i,'" ').concat(k,' for="').concat(w,'">').concat(C,`</label>
          </div>
        `))});var g=this.el.querySelector(".".concat(a,"field"));g.innerHTML='<div class="'.concat(a,'radio-items">').concat(h.join(""),"</div>"),this.input=g.firstChild}},r.prototype.__setValueInput=function(e){var t,a=this.model,o=e||a.getDefaultValue(),i=(t=this.getInputEl())===null||t===void 0?void 0:t.querySelector('[value="'.concat(o,'"]'));i&&(i.checked=!0)},r})(N6);const oee=aee;var iee=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),dp=function(){return dp=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},dp.apply(this,arguments)},lee=(function(s){iee(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.defaults=function(){return dp(dp({},ja.getDefaults()),{units:[],unit:"",min:"",max:"",step:1})},r.prototype.getUnits=function(){return this.get("units")||[]},r.prototype.getUnit=function(){return this.get("unit")},r.prototype.getMin=function(){return this.get("min")},r.prototype.getMax=function(){return this.get("max")},r.prototype.getStep=function(){return this.get("step")},r.prototype.upUnit=function(e,t){return t===void 0&&(t={}),this._up({unit:e},t)},r.prototype.initialize=function(e,t){e===void 0&&(e={}),t===void 0&&(t={}),ja.callParentInit(ja,this,e,t);var a=this.get("unit"),o=this.getUnits();this.input=(0,Zt.hasWin)()?new QA({model:this}):void 0,o.length&&!a&&this.set("unit",o[0],{silent:!0}),ja.callInit(this,e,t)},r.prototype.__getClearProps=function(){return dp(dp({},ja.prototype.__getClearProps()),{unit:""})},r.prototype.parseValue=function(e,t){t===void 0&&(t={});var a=ja.prototype.parseValue.apply(this,arguments),o=this.input.validateInputValue(a.value,dp({deepCheck:1},t)),i=o.value,l=o.unit;return a.value=i,a.unit=l,a},r.prototype.getFullValue=function(){var e=this.get("value"),t=this.get("unit"),a=(0,_e.isUndefined)(e)?"":"".concat(e),o=!(0,_e.isUndefined)(t)&&a?t:"",i="".concat(a).concat(o);return ja.prototype.getFullValue.apply(this,[i])},r})(ja);const cw=lee;var cee=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),dw=function(){return dw=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},dw.apply(this,arguments)},dee=(function(s){cee(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.defaults=function(){return dw(dw({},cw.getDefaults()),{showInput:1})},r})(cw);const uee=dee;var fee=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),uw=function(){return uw=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},uw.apply(this,arguments)},pee=(function(s){fee(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.events=function(){return uw(uw({},zd.prototype.events()),{"change [type=range]":"inputValueChanged","input [type=range]":"inputValueChangedSoft",change:""})},r.prototype.templateInput=function(e){var t=this.ppfx;return`
      <div class="`.concat(t,"field ").concat(t,`field-range">
        <input type="range" min="`).concat(e.get("min"),'" max="').concat(e.get("max"),'" step="').concat(e.get("step"),`"/>
      </div>
    `)},r.prototype.getSliderEl=function(){return this.slider||(this.slider=this.el.querySelector("input[type=range]")),this.slider},r.prototype.inputValueChanged=function(e){e.stopPropagation(),this.model.upValue(this.getSliderEl().value)},r.prototype.inputValueChangedSoft=function(e){e.stopPropagation(),this.model.upValue(this.getSliderEl().value,{partial:!0})},r.prototype.setValue=function(e){var t=this.model,a=t.parseValue(e);this.getSliderEl().value=e===""?t.getDefaultValue():parseFloat(a.value),zd.prototype.setValue.apply(this,arguments)},r.prototype.onRender=function(){zd.prototype.onRender.apply(this,arguments),this.model.get("showInput")||(this.inputInst.el.style.display="none")},r.prototype.clearCached=function(){zd.prototype.clearCached.apply(this,arguments),delete this.slider},r})(zd);const hee=pee;var mee=Sr.pM.extend(o6),gee=mee.extend({extendViewApi:1,init:function(){var s=this,r=s.opts,e=s.em,t=r.module||e?.get("StyleManager");t&&(t.__listenAdd(this,t.events.propertyAdd),t.__listenRemove(this,t.events.propertyRemove))},types:[{id:"stack",model:NJ,view:UJ,isType:function(s){if(s&&s.type=="stack")return s}},{id:"composite",model:Bh,view:vy,isType:function(s){if(s&&s.type=="composite")return s}},{id:"file",model:ja,view:WJ,isType:function(s){if(s&&s.type=="file")return s}},{id:"color",model:ja,view:ZJ,isType:function(s){if(s&&s.type=="color")return s}},{id:"select",model:wN,view:N6,isType:function(s){if(s&&s.type=="select")return s}},{id:"radio",model:nee,view:oee,isType:function(s){if(s&&s.type=="radio")return s}},{id:"slider",model:uee,view:hee,isType:function(s){if(s&&s.type=="slider")return s}},{id:"integer",model:cw,view:zd,isType:function(s){if(s&&s.type=="integer")return s}},{id:"number",model:cw,view:zd,isType:function(s){if(s&&s.type=="number")return s}},{id:"base",model:ja,view:Gd,isType:function(s){return s.type="base",s}}]});const Q2=gee;var Hu=function(){return Hu=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Hu.apply(this,arguments)},yee=function(s,r){var e={};for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&r.indexOf(t)<0&&(e[t]=s[t]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(s);a<t.length;a++)r.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(s,t[a])&&(e[t[a]]=s[t[a]]);return e},Qf=function(s,r,e){if(e||arguments.length===2)for(var t=0,a=r.length,o;t<a;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return s.concat(o||Array.prototype.slice.call(r))},po=function(s){return s.map(function(r){return{id:r}})},xee=(function(){function s(){this.props={},this.typeNumber="number",this.typeColor="color",this.typeRadio="radio",this.typeSelect="select",this.typeFile="file",this.typeSlider="slider",this.typeComposite="composite",this.typeStack="stack",this.unitsSize=["px","%","em","rem","vh","vw"],this.unitsSizeNoPerc=["px","em","rem","vh","vw"],this.unitsTime=["s","ms"],this.unitsAngle=["deg","rad","grad"],this.fixedValues=["initial","inherit","auto"];var r=", sans-serif",e=["flex-start","flex-end","center"],t=Qf(Qf([],e,!0),["baseline","stretch"],!1);this.optsBgSize=po(["auto","cover","contain"]),this.optsBgAttach=po(["scroll","fixed","local"]),this.optsBgRepeat=po(["repeat","repeat-x","repeat-y","no-repeat"]),this.optsWrap=po(["nowrap","wrap","wrap-reverse"]),this.optsOverflow=po(["visible","hidden","scroll","auto"]),this.optsDir=po(["row","row-reverse","column","column-reverse"]),this.opstDisplay=po(["block","inline","inline-block","flex","none"]),this.optsTransitFn=po(["linear","ease","ease-in","ease-out","ease-in-out"]),this.optsCursor=po(["auto","pointer","copy","crosshair","grab","grabbing","help","move","text"]),this.optsFloat=po(["none","left","right"]),this.optsPos=po(["static","relative","absolute","fixed"]),this.optsTextAlign=po(["left","center","right","justify"]),this.optsFlexAlign=po(t),this.optsJustCont=po(Qf(Qf([],e,!0),["space-between","space-around","space-evenly"],!1)),this.optsAlignCont=po(Qf(Qf([],e,!0),["space-between","space-around","stretch"],!1)),this.optsAlignSelf=po(Qf(["auto"],t,!0)),this.optsTransitProp=po(["all","width","height","background-color","transform","box-shadow","opacity"]),this.optsBorderStyle=po(["none","solid","dotted","dashed","double","groove","ridge","inset","outset"]),this.optsBgPos=po(["left top","left center","left bottom","right top","right center","right bottom","center top","center center","center bottom"]),this.optsWeight=[{id:"100",label:"Thin"},{id:"200",label:"Extra-Light"},{id:"300",label:"Light"},{id:"400",label:"Normal"},{id:"500",label:"Medium"},{id:"600",label:"Semi-Bold"},{id:"700",label:"Bold"},{id:"800",label:"Extra-Bold"},{id:"900",label:"Ultra-Bold"}],this.optsShadowType=[{id:"",label:"Outside"},{id:"inset",label:"Inside"}],this.optsFonts=["Arial, Helvetica"+r,"Arial Black, Gadget"+r,"Brush Script MT"+r,"Comic Sans MS, cursive"+r,"Courier New, Courier, monospace","Georgia, serif","Helvetica"+r,"Impact, Charcoal"+r,"Lucida Sans Unicode, Lucida Grande"+r,"Tahoma, Geneva"+r,"Times New Roman, Times, serif","Trebuchet MS, Helvetica"+r,"Verdana, Geneva"+r].map(function(a){return{id:a,label:a.split(",")[0]}}),this.fixedFontSizes=["medium","xx-small","x-small","small","large","x-large","xx-large","smaller","larger","length","initial","inherit"],this.fixedLetSpace=["normal","initial","inherit"],this.requireFlex={display:["flex"]},this.init()}return s.prototype.__sub=function(r){var e=this;return function(){return r.map(function(t){if((0,_e.isString)(t))return e.get(t);var a=t.extend,o=yee(t,["extend"]);return Hu(Hu({},e.get(a)),o)})}},s.prototype.init=function(){var r=this,e=this,t=e.fixedValues,a=e.requireFlex,o=e.typeNumber;this.props={};var i=[["text-shadow-h",{type:o,default:"0",units:this.unitsSizeNoPerc}],["top",{default:"auto",units:this.unitsSize,fixedValues:t},"text-shadow-h"],["right",{},"top"],["bottom",{},"top"],["left",{},"top"],["margin-top",{default:"0"},"top"],["margin-right",{},"margin-top"],["margin-bottom",{},"margin-top"],["margin-left",{},"margin-top"],["padding-top",{min:0},"margin-top"],["padding-right",{},"padding-top"],["padding-bottom",{},"padding-top"],["padding-left",{},"padding-top"],["width",{min:0},"top"],["min-width",{},"width"],["max-width",{},"width"],["height",{},"width"],["min-height",{},"width"],["max-height",{},"width"],["flex-basis",{requiresParent:a},"width"],["font-size",{default:"medium",fixedValues:this.fixedFontSizes},"width"],["letter-spacing",{default:"normal",fixedValues:this.fixedLetSpace},"top"],["line-height",{},"letter-spacing"],["text-shadow-v",{},"text-shadow-h"],["text-shadow-blur",{min:0},"text-shadow-h"],["border-radius-c",{property:"border-radius",fixedValues:void 0},"padding-top"],["border-top-left-radius",{},"border-radius-c"],["border-top-right-radius",{},"border-radius-c"],["border-bottom-left-radius",{},"border-radius-c"],["border-bottom-right-radius",{},"border-radius-c"],["border-width",{units:this.unitsSizeNoPerc},"border-radius-c"],["box-shadow-h",{},"text-shadow-h"],["box-shadow-v",{},"text-shadow-h"],["box-shadow-blur",{default:"5px"},"text-shadow-blur"],["box-shadow-spread",{},"text-shadow-h"],["transition-duration",{default:"2s",units:this.unitsTime},"border-radius-c"],["perspective",{},"border-radius-c"],["order",{type:o,default:"0",requiresParent:a}],["flex-grow",{},"order"],["flex-shrink",{default:"1"},"order"],["float",{type:this.typeRadio,default:"none",options:this.optsFloat}],["position",{default:"static",options:this.optsPos},"float"],["text-align",{default:"left",options:this.optsTextAlign},"float"],["color",{type:this.typeColor,default:"black",full:!0}],["text-shadow-color",{},"color"],["border-color",{},"color"],["box-shadow-color",{},"color"],["background-color",{default:"none"},"color"],["background-image",{type:this.typeFile,functionName:"url",default:"none",full:!0}],["opacity",{type:this.typeSlider,default:"1",min:0,max:1,step:.01,full:!0}],["display",{type:this.typeSelect,default:"block",options:this.opstDisplay}],["flex-direction",{default:"row",options:this.optsDir,requires:a},"display"],["flex-wrap",{default:"nowrap",options:this.optsWrap},"flex-direction"],["justify-content",{default:"flex-start",options:this.optsJustCont},"flex-wrap"],["align-items",{default:"stretch",options:this.optsFlexAlign},"flex-wrap"],["align-content",{options:this.optsAlignCont},"align-items"],["align-self",{default:"auto",options:this.optsAlignSelf,requiresParent:a},"display"],["font-family",{default:"Arial, Helvetica, sans-serif",options:this.optsFonts},"display"],["font-weight",{default:"400",options:this.optsWeight},"display"],["border-style",{default:"solid",options:this.optsBorderStyle},"display"],["box-shadow-type",{default:"",options:this.optsShadowType},"display"],["background-repeat",{default:"repeat",options:this.optsBgRepeat},"display"],["background-position",{default:"left top",options:this.optsBgPos},"display"],["background-attachment",{default:"scroll",options:this.optsBgAttach},"display"],["background-size",{default:"auto",options:this.optsBgSize},"display"],["transition-property",{default:"width",options:this.optsTransitProp},"display"],["transition-timing-function",{default:"ease",options:this.optsTransitFn},"display"],["cursor",{default:"auto",options:this.optsCursor},"display"],["overflow",{default:"visible",options:this.optsOverflow},"display"],["overflow-x",{},"overflow"],["overflow-y",{},"overflow"],["margin",{type:this.typeComposite,properties:this.__sub([{extend:"margin-top",id:"margin-top-sub"},{extend:"margin-right",id:"margin-right-sub"},{extend:"margin-bottom",id:"margin-bottom-sub"},{extend:"margin-left",id:"margin-left-sub"}])}],["padding",{properties:this.__sub([{extend:"padding-top",id:"padding-top-sub"},{extend:"padding-right",id:"padding-right-sub"},{extend:"padding-bottom",id:"padding-bottom-sub"},{extend:"padding-left",id:"padding-left-sub"}])},"margin"],["border",{properties:this.__sub([{extend:"border-width",id:"border-width-sub"},{extend:"border-style",id:"border-style-sub"},{extend:"border-color",id:"border-color-sub"}])},"margin"],["border-radius",{properties:this.__sub([{extend:"border-top-left-radius",id:"border-top-left-radius-sub"},{extend:"border-top-right-radius",id:"border-top-right-radius-sub"},{extend:"border-bottom-left-radius",id:"border-bottom-left-radius-sub"},{extend:"border-bottom-right-radius",id:"border-bottom-right-radius-sub"}])},"margin"],["transition",{type:this.typeStack,properties:this.__sub([{extend:"transition-property",id:"transition-property-sub"},{extend:"transition-duration",id:"transition-duration-sub"},{extend:"transition-timing-function",id:"transition-timing-function-sub"}])}],["box-shadow",{preview:!0,layerLabel:function(l,c){var d=c.values,p=d["box-shadow-h"],h=d["box-shadow-v"],g=d["box-shadow-blur"],y=d["box-shadow-spread"];return"".concat(p," ").concat(h," ").concat(g," ").concat(y)},properties:this.__sub(["box-shadow-h","box-shadow-v","box-shadow-blur","box-shadow-spread","box-shadow-color","box-shadow-type"])},"transition"],["text-shadow",{default:"none",layerLabel:function(l,c){var d=c.values,p=d["text-shadow-h"],h=d["text-shadow-v"],g=d["text-shadow-blur"];return"".concat(p," ").concat(h," ").concat(g)},properties:this.__sub(["text-shadow-h","text-shadow-v","text-shadow-blur","text-shadow-color"])},"box-shadow"],["background",{detached:!0,layerLabel:function(l,c){var d=c.values,p=d["background-repeat-sub"]||"",h=d["background-position-sub"]||"",g=d["background-attachment-sub"]||"",y=d["background-size-sub"]||"";return[p,h,g,y].join(" ")},properties:this.__sub([{extend:"background-image",id:"background-image-sub"},{extend:"background-repeat",id:"background-repeat-sub"},{extend:"background-position",id:"background-position-sub"},{extend:"background-attachment",id:"background-attachment-sub"},{extend:"background-size",id:"background-size-sub"}])},"box-shadow"],["transform",{type:"stack",layerSeparator:" ",fromStyle:function(l,c){var d=c.property,p=c.name,h=l[p]||"",g=d.getLayerSeparator();return h?h.split(g).map(function(y){var b=d.__parseFn(y),v=b.name,w=b.value;return{"transform-type":v,"transform-value":w}}):[]},toStyle:function(l,c){var d,p=c.name;return d={},d[p]="".concat(l["transform-type"],"(").concat(l["transform-value"],")"),d},properties:[{property:"transform-type",name:"Type",type:this.typeSelect,default:"rotateZ",full:!0,options:[{id:"scaleX",propValue:{units:[""],step:.01}},{id:"scaleY",propValue:{units:[""],step:.01}},{id:"scaleZ",propValue:{units:[""],step:.01}},{id:"rotateX",propValue:{units:this.unitsAngle,step:1}},{id:"rotateY",propValue:{units:this.unitsAngle,step:1}},{id:"rotateZ",propValue:{units:this.unitsAngle,step:1}},{id:"translateX",propValue:{units:this.unitsSize,step:1}},{id:"translateY",propValue:{units:this.unitsSize,step:1}}],onChange:function(l){var c=l.property,d=l.to;if(d.value){var p=c.getOption(),h=Hu({},p.propValue||{}),g=c.getParent().getProperty("transform-value"),y=g.getUnit();(!y||h?.units.indexOf(y)<0)&&(h.unit=h?.units[0]||""),g.up(h)}}},{property:"transform-value",type:this.typeNumber,default:"0",full:!0}]}]];return i.forEach(function(l){var c=l[0],d=l[1],p=l[2];r.add(c,d||{},{from:p})}),this},s.prototype.add=function(r,e,t){e===void 0&&(e={}),t===void 0&&(t={});var a=t.from||"",o=this.props[a||r]||{},i=Hu(Hu(Hu({},o),{property:r}),e);return i.properties&&(0,_e.isFunction)(i.properties)&&(i.properties=i.properties()),this.props[r]=i,i},s.prototype.get=function(r){return this.props[r]},s.prototype.build=function(r){var e=this,t=[],a=(0,_e.isString)(r)?[r]:r;return a.forEach(function(o){t.push(e.get(o)||{property:o})}),t},s})();const vee=xee;var bee=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),fw=function(){return fw=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},fw.apply(this,arguments)},wee=function(s,r){var e={};for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&r.indexOf(t)<0&&(e[t]=s[t]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(s);a<t.length;a++)r.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(s,t[a])&&(e[t[a]]=s[t[a]]);return e},jee=function(s,r,e){if(e||arguments.length===2)for(var t=0,a=r.length,o;t<a;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return s.concat(o||Array.prototype.slice.call(r))},Cee=(function(s){bee(r,s);function r(e,t){t===void 0&&(t={});var a=s.call(this,e)||this,o=t.em;a.em=o;var i=e||{},l=a.buildProperties(i.buildProps),c=a.get("name")||"",d=[];!a.get("id")&&a.set("id",c.replace(/ /g,"_").toLowerCase()),l?d=a.extendProperties(l):d=a.get("properties").map(function(h){return(0,_e.isString)(h)?a.buildProperties(h)[0]:h}).filter(Boolean),d=d.map(function(h){return a.checkExtend(h)});var p=new Q2(d,{em:o});return p.sector=a,a.set("properties",p),a}return r.prototype.defaults=function(){return{id:"",name:"",open:!0,visible:!0,extendBuilded:!0,properties:[]}},Object.defineProperty(r.prototype,"properties",{get:function(){return this.get("properties")},enumerable:!1,configurable:!0}),r.prototype.getId=function(){return this.get("id")},r.prototype.getName=function(){var e,t=this.getId();return((e=this.em)===null||e===void 0?void 0:e.t("styleManager.sectors.".concat(t)))||this.get("name")},r.prototype.setName=function(e){return this.set("name",e)},r.prototype.isOpen=function(){return!!this.get("open")},r.prototype.setOpen=function(e){return this.set("open",e)},r.prototype.isVisible=function(){return!!this.get("visible")},r.prototype.getProperties=function(e){e===void 0&&(e={});var t=this.properties,a=t.models?jee([],t.models,!0):t;return a.filter(function(o){var i=!0;if(e.withValue&&(i=o.hasValue({noParent:!0})),e.withParentValue){var l=o.hasValue({noParent:!0});i=!l&&o.hasValue()}return i})},r.prototype.getProperty=function(e){return this.getProperties().filter(function(t){return t.get("id")===e})[0]||void 0},r.prototype.addProperty=function(e,t){return this.properties.add(this.checkExtend(e),t)},r.prototype.extendProperties=function(e,t,a){a===void 0&&(a=!1);for(var o=e.length,i=t||this.get("properties"),l=this.get("extendBuilded"),c=[],d=0,p=i.length;d<p;d++){for(var h=i[d],g=0,y=0;y<o;y++){var b=e[y];if(h.property==b.property||h.id==b.property){var v=h.properties;v&&v.length&&(h.properties=this.extendProperties(b.properties||[],v,1)),e[y]=l?(0,_e.extend)(b,h):h,c[y]=e[y],g=1;continue}}g||(e.push(h),c.push(h))}return a?c.filter(function(w){return w}):e},r.prototype.checkExtend=function(e){var t=((0,_e.isString)(e)?{extend:e}:e)||{},a=t.extend,o=wee(t,["extend"]);return a?fw(fw({},this.buildProperties([a])[0]||{}),o):e},r.prototype.buildProperties=function(e){var t,a=e||[];if(!a.length)return[];var o=(t=this.em)===null||t===void 0?void 0:t.Styles.builtIn;return o?.build(a)},r})(Sr.Kx);const k6=Cee;var See=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),pw=function(){return pw=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},pw.apply(this,arguments)},Nee=(function(s){See(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.initialize=function(e,t){t===void 0&&(t={});var a=t.module,o=t.em;this.em=o,this.module=a,this.listenTo(this,"reset",this.onReset)},r.prototype.model=function(e,t){t===void 0&&(t={});var a=t.collection.em;return new k6(e,pw(pw({},t),{em:a}))},r.prototype.onReset=function(e,t){t===void 0&&(t={});var a=t.previousModels||[];a.forEach(function(o){return o.get("properties").reset()})},r})(Sr.pM);const kee=Nee;var hw;(function(s){s.sectorAdd="style:sector:add",s.sectorRemove="style:sector:remove",s.sectorUpdate="style:sector:update",s.propertyAdd="style:property:add",s.propertyRemove="style:property:remove",s.propertyUpdate="style:property:update",s.target="style:target",s.layerSelect="style:layer:select",s.custom="style:custom",s.all="style"})(hw||(hw={}));var _ee=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Eee=function(s,r){return Object.defineProperty?Object.defineProperty(s,"raw",{value:r}):s.raw=r,s},Tee=(function(s){_ee(r,s);function r(e){var t=s.call(this,e)||this,a=e.config||{},o=t.model,i=a.em;return t.config=a,t.em=i,t.pfx=a.stylePrefix||"",t.listenTo(o,"destroy remove",t.remove),t.listenTo(o,"change:open",t.updateOpen),t.listenTo(o,"change:visible",t.updateVisibility),t}return r.prototype.template=function(e){var t,a=e.pfx,o=e.label,i=(t=this.em)===null||t===void 0?void 0:t.getConfig().icons,l=i?.caret||"",c="".concat(a,"sector-");return Ei(ET||(ET=Eee([`
      <div class="`,`title" data-sector-title>
        <div class="`,'caret">$',`</div>
        <div class="`,'label">',`</div>
      </div>
    `],[`
      <div class="`,`title" data-sector-title>
        <div class="`,'caret">$',`</div>
        <div class="`,'label">',`</div>
      </div>
    `])),c,c,l,c,o)},r.prototype.events=function(){return{"click [data-sector-title]":"toggle"}},r.prototype.updateOpen=function(){var e=this,t=e.$el,a=e.model,o=e.pfx,i=a.isOpen();t[i?"addClass":"removeClass"]("".concat(o,"open")),this.getPropertiesEl().style.display=i?"":"none"},r.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},r.prototype.getPropertiesEl=function(){var e=this,t=e.$el,a=e.pfx;return t.find(".".concat(a,"properties")).get(0)},r.prototype.toggle=function(){var e=this.model;e.setOpen(!e.get("open"))},r.prototype.renderProperties=function(){var e=this,t=e.model,a=e.config,o=t.get("properties");if(o){var i=new X2({collection:o,config:a});this.$el.append(i.render().el)}},r.prototype.render=function(){var e=this,t=e.pfx,a=e.model,o=e.$el,i=a.getId(),l=a.getName();return o.html(this.template({pfx:t,label:l})),this.renderProperties(),o.attr("class","".concat(t,"sector ").concat(t,"sector__").concat(i," no-select")),this.updateOpen(),this},r})(Sr.Ss);const Oee=Tee;var ET,Pee=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Aee=(function(s){Pee(r,s);function r(e){e===void 0&&(e={});var t=s.call(this,e)||this,a=e.module,o=e.config,i=t.collection;return t.pfx=o?.stylePrefix||"",t.ppfx=o?.pStylePrefix||"",t.config=o,t.module=a,t.listenTo(i,"add",t.addTo),t.listenTo(i,"reset",t.render),t}return r.prototype.remove=function(){var e=this;return Sr.Ss.prototype.remove.apply(this,arguments),["config","module","em"].forEach(function(t){return e[t]={}}),this},r.prototype.addTo=function(e,t,a){a===void 0&&(a={}),this.addToCollection(e,null,a)},r.prototype.addToCollection=function(e,t,a){a===void 0&&(a={});var o=this,i=o.config,l=o.el,c=t||l,d=new Oee({model:e,config:i}).render().el;return(0,Ar.Sc)(c,d,a.at),d},r.prototype.render=function(){var e=this,t=this,a=t.$el,o=t.pfx,i=t.ppfx;a.empty();var l=document.createDocumentFragment();return this.collection.each(function(c){return e.addToCollection(c,l)}),a.append(l),a.addClass("".concat(o,"sectors ").concat(i,"one-bg ").concat(i,"two-color")),this},r})(Sr.Ss);const Mee=Aee;var Iee=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Wu=function(){return Wu=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Wu.apply(this,arguments)},TT=function(s,r,e){if(e||arguments.length===2)for(var t=0,a=r.length,o;t<a;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return s.concat(o||Array.prototype.slice.call(r))},OT=function(s){return s||s===0},Ree=(function(s){Iee(r,s);function r(e){var t=s.call(this,e,"StyleManager",new kee([],{em:e}),hw,mJ())||this;t.events=hw,t.Sector=k6,t.storageKey="",(0,_e.bindAll)(t,"__clearStateTarget");var a=t.events,o=t.config,i=o.pStylePrefix;i&&(o.stylePrefix=i+o.stylePrefix),t.builtIn=new vee,t.properties=new Q2([],{em:e,module:t}),t.sectors=t.all;var l=new Sr.Kx({targets:[]});t.model=l;var c=bs.I.update,d="component:toggled ".concat(c,":classes change:state change:device frame:resized selector:type");t.upAll=(0,_e.debounce)(function(){return t.__upSel()},0),l.listenTo(e,d,t.upAll),l.listenTo(e,"component:toggled",t.__clearStateTarget);var p=(0,_e.debounce)(function(){t.__upProps(),t.__trgCustom()},0);l.listenTo(e,"styleable:change undo redo",p);var h=(0,_e.debounce)(function(){return t.__trgCustom()},0);return l.listenTo(e,"".concat(a.layerSelect," ").concat(a.target),h),l.on("change:lastTarget",function(){return e.trigger(a.target,t.getSelected())}),t}return r.prototype.__upSel=function(){this.select(this.em.getSelectedAll())},r.prototype.__trgCustom=function(e){e===void 0&&(e={}),this.__ctn=this.__ctn||e.container,this.em.trigger(this.events.custom,{container:this.__ctn})},r.prototype.__trgEv=function(e){for(var t,a=[],o=1;o<arguments.length;o++)a[o-1]=arguments[o];(t=this.em).trigger.apply(t,TT([e],a,!1))},r.prototype.__clearStateTarget=function(){var e=this,t=this.em,a=this.__getStateTarget();a&&t?.skip(function(){t.Css.remove(a),e.model.set({stateTarget:null})})},r.prototype.onLoad=function(){this.sectors.add(this.config.sectors,{silent:!0})},r.prototype.postRender=function(){this.__appendTo()},r.prototype.addSector=function(e,t,a){a===void 0&&(a={});var o=this.getSector(e);return o||(t.id=e,o=this.sectors.add(t,a)),o},r.prototype.getSector=function(e,t){t===void 0&&(t={});var a=this.sectors.where({id:e})[0];return!a&&t.warn&&this._logNoSector(e),a||null},r.prototype.getSectors=function(e){e===void 0&&(e={});var t=this.sectors,a=t&&t.models?e.array?TT([],t.models,!0):t:[];return e.visible?a.filter(function(o){return o.isVisible()}):a},r.prototype.removeSector=function(e){return this.getSectors().remove(this.getSector(e,{warn:!0}))},r.prototype.addProperty=function(e,t,a){a===void 0&&(a={});var o=this.getSector(e,{warn:!0}),i;return o&&(i=o.addProperty(t,a)),i},r.prototype.getProperty=function(e,t){var a=this.getSector(e,{warn:!0}),o;return a&&(o=a.properties.filter(function(i){return i.get("property")===t||i.get("id")===t})[0]),o},r.prototype.getProperties=function(e){var t,a=this.getSector(e,{warn:!0});return a&&(t=a.properties),t},r.prototype.removeProperty=function(e,t){var a=this.getProperties(e);return a?a.remove(this.getProperty(e,t)):null},r.prototype.select=function(e,t){var a=this;t===void 0&&(t={});var o=this.em,i=(0,_e.isArray)(e)?e:[e],l=t.stylable,c=o.Css,d=[];i.filter(Boolean).forEach(function(v){var w=v;if((0,_e.isString)(v)){var C=c.getRule(v)||c.setRule(v);!(0,_e.isUndefined)(l)&&C.set({stylable:l}),w=C}d.push(w)});var p=t.component||d.filter(function(v){return(0,Zt.isComponent)(v)}).reverse()[0];d=d.map(function(v){return a.getModelToStyle(v)});var h=o.getState(),g=d.slice().reverse()[0],y=this.getParentRules(g,{state:h,component:p}),b=this.__getStateTarget();return o.skip(function(){var v;if(h&&(!((v=g?.getState)===null||v===void 0)&&v.call(g))){var w=g.getStyle();b?b.setStyle(w):b=c.getAll().add({selectors:"gjs-selected",style:w,shallow:!0,important:!0})}else b&&(c.remove(b),b=void 0)}),this.model.set({targets:d,lastTarget:g,lastTargetParents:y,stateTarget:b,component:p}),this.__upProps(t),d},r.prototype.getSelected=function(){return this.model.get("lastTarget")},r.prototype.getSelectedAll=function(){return this.model.get("targets")},r.prototype.getSelectedParents=function(){return this.model.get("lastTargetParents")||[]},r.prototype.__getStateTarget=function(){return this.model.get("stateTarget")},r.prototype.addStyleTargets=function(e,t){this.getSelectedAll().map(function(i){return i.addStyle(e,t)});var a=this.getSelected();a&&this.__emitCmpStyleUpdate(e);var o=this.__getStateTarget();a&&o?.setStyle(a.getStyle(),t)},r.prototype.getBuiltIn=function(e){return this.builtIn.get(e)},r.prototype.getBuiltInAll=function(){return this.builtIn.props},r.prototype.addBuiltIn=function(e,t){return this.builtIn.add(e,t)},r.prototype.getModelToStyle=function(e,t){t===void 0&&(t={});var a=this.em,o=t.skipAdd;if(a&&e?.toHTML){var i=a.getConfig(),l=a.UndoManager,c=a.Css,d=a.Selectors,p=d?d.getConfig():{},h=i.devicePreviewMode?"":a.get("state"),g=e.get("classes"),y=g.getStyleable(),b=y.length,v=!p.componentFirst||t.useClasses,w={noCount:1},C={state:h,addOpts:w};l.skip(function(){var k;if(b&&v){var N=a.getCurrentMedia();k=c.get(y,h,N),!k&&!o&&(k=c.add(y,h,N,{},w))}else if(i.avoidInlineStyle){var O=e.getId();k=c.getIdRule(O,C),!k&&!o&&(k=c.setIdRule(O,{},C)),e.is("wrapper")&&k.set("wrapper",1,w)}k&&(e=k)})}return e},r.prototype.getParentRules=function(e,t){var a=t===void 0?{}:t,o=a.state,i=a.component,l=this.em,c=[];if(l&&e){var d=i,p=l.Css,h=l.CodeManager.getGenerator("css"),g=e.toHTML?e:e.getComponent(),y={array:!0},b=[],v=[],w=[],C=[],k=[],N=function(G){return G.length?p.getRules().filter(function($){var z=$.getSelectors().map(function(Y){return Y.getFullName()});return z.length===0?!1:z.every(function(Y){return G.indexOf(Y)>=0})}):[]},O=function(G){return G?p.getRules().filter(function($){return $.selectorsToString()===G}):[]};if(g)b=p.getRules("#".concat(g.getId())),v=O(g.get("tagName")),C=d?N(d.getSelectors().getFullName(y)):[],k=C.concat(v).concat(b);else{b=d?p.getRules("#".concat(d.getId())):[],v=O(d?.get("tagName")||"");var R=d?.getSelectors().getFullName(y)||[],L=R.filter(function(G){return e.getSelectors().getFullName(y).findIndex(function($){return $===G})===-1});w=N(L.concat(e.getSelectors().getFullName(y))),k=v.concat(b).concat(w)}var B=k.filter(function(G){return(0,_e.isUndefined)(o)?1:G.get("state")===o}).sort(h.sortRules).reverse();c=B.slice(B.indexOf(e)+1)}return c},r.prototype.addType=function(e,t){this.properties.addType(e,t)},r.prototype.getType=function(e){return this.properties.getType(e)},r.prototype.getTypes=function(){return this.properties.getTypes()},r.prototype.createType=function(e,t){var a=t===void 0?{}:t,o=a.model,i=o===void 0?{}:o,l=a.view,c=l===void 0?{}:l,d=this.config,p=this.getType(e);if(p)return new p.view(Wu({model:new p.model(i),config:d},c))},r.prototype.render=function(){var e=this,t=e.config,a=e.em,o=e.SectView,i=o&&o.el;return this.SectView=new Mee({el:i,em:a,config:t,module:this,collection:this.sectors}),this.SectView.render().el},r.prototype._logNoSector=function(e){var t=this.em;t&&t.logWarning("'".concat(e,"' sector not found"))},r.prototype.__emitCmpStyleUpdate=function(e,t){t===void 0&&(t={});var a=this.em;if(!e.__p){var o=this.getSelectedAll(),i=t.components||a.getSelectedAll(),l=Array.isArray(i)?i:[i],c=Wu({},e);delete c.__p,l.forEach(function(d){return!o.includes(d)&&d.__onStyleChange(c)})}},r.prototype.__upProps=function(e){var t=this;e===void 0&&(e={});var a=this.getSelected();if(a){var o=this.sectors,i=this.model.get("component"),l=this.getSelectedParents(),c=a.getStyle(),d=l.map(function(p){return{target:p,style:p.getStyle()}});o.map(function(p){p.getProperties().map(function(h){t.__upProp(h,c,d,e)})}),o.forEach(function(p){var h=p.getProperties();h.forEach(function(y){var b=y.__checkVisibility({target:a,sector:p,component:i,sectors:o.models});y.set("visible",b)});var g=h.some(function(y){return y.isVisible()});p.set("visible",g)})}},r.prototype.__upProp=function(e,t,a,o){var i=this,l=e.getName(),c=t[l],d=OT(c),p=e.getType()==="stack",h=e.getType()==="composite",g=Wu(Wu({},o),{__up:!0}),y=!h&&!p,b=e,v=e,w=p?b.__getLayersFromStyle(t):[],C=h?v.__getPropsFromStyle(t):{},k=d?c:null,N=null;if(p&&w===null||h&&C===null){var O=p?"__getLayersFromStyle":"__getPropsFromStyle",R=a.filter(function(z){return b[O](z.style)!==null})[0];if(R){k=R.style[l],N=R.target;var L=b[O](R.style);p?w=L:C=L}}else if(!d){k=null;var R=a.filter(function(Y){return OT(Y.style[l])})[0];R&&(k=R.style[l],N=R.target)}if(e.__setParentTarget(N),y&&e.__getFullValue()!==k&&e.upValue(k,g),p&&b.__setLayers(w||[],{isEmptyValue:b.isEmptyValueStyle(t)}),h){var B=v.getProperties();if(v.isDetached()){var G=v.__getPropsFromStyle(t,{byName:!0})||{},$=a.map(function(z){return Wu(Wu({},z),{style:v.__getPropsFromStyle(z.style,{byName:!0})||{}})});B.map(function(z){return i.__upProp(z,G,$,o)})}else v.__setProperties(C||{},g),v.getProperties().map(function(z){return z.__setParentTarget(N)})}},r.prototype.destroy=function(){var e;[this.properties,this.sectors].forEach(function(t){t.reset(),t.stopListening()}),(e=this.SectView)===null||e===void 0||e.remove(),this.model.stopListening(),this.upAll.cancel()},r})(lu);const Dee=Ree;var Lee=function(){return{autoloadProviders:!1}};const Fee=Lee;var jN;(function(s){s.currentIndex="currentIndex",s.startIndex="startIndex",s.currentItem="currentItem",s.currentKey="currentKey",s.endIndex="endIndex",s.collectionId="collectionId",s.totalItems="totalItems",s.remainingItems="remainingItems"})(jN||(jN={}));var Bee=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),mw=function(){return mw=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},mw.apply(this,arguments)},zee=(function(s){Bee(r,s);function r(e,t){var a=s.call(this,e,t)||this;return a.em=t,a.model=function(o,i){return i===void 0&&(i={}),new NA(o,mw(mw({},i),{em:t}))},a}return r})(Sr.pM);const $ee=zee;var Uee=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),nm=function(){return nm=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},nm.apply(this,arguments)},Vee=function(s,r,e,t){function a(o){return o instanceof e?o:new e(function(i){i(o)})}return new(e||(e=Promise))(function(o,i){function l(p){try{d(t.next(p))}catch(h){i(h)}}function c(p){try{d(t.throw(p))}catch(h){i(h)}}function d(p){p.done?o(p.value):a(p.value).then(l,c)}d((t=t.apply(s,r||[])).next())})},Hee=function(s,r){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},t,a,o,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(d){return function(p){return c([d,p])}}function c(d){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,d[0]&&(e=0)),e;)try{if(t=1,a&&(o=d[0]&2?a.return:d[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,d[1])).done)return o;switch(a=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return e.label++,{value:d[1],done:!1};case 5:e.label++,a=d[1],d=[0];continue;case 7:d=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){e=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){e.label=d[1];break}if(d[0]===6&&e.label<o[1]){e.label=o[1],o=d;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(d);break}o[2]&&e.ops.pop(),e.trys.pop();continue}d=r.call(s,e)}catch(p){d=[6,p],a=0}finally{t=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},Wee=function(s,r){var e={};for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&r.indexOf(t)<0&&(e[t]=s[t]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(s);a<t.length;a++)r.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(s,t[a])&&(e[t[a]]=s[t[a]]);return e},qee=function(s,r,e){if(e||arguments.length===2)for(var t=0,a=r.length,o;t<a;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return s.concat(o||Array.prototype.slice.call(r))},Gee=(function(s){Uee(r,s);function r(e){var t=s.call(this,e,"DataSources",new $ee([],e),qd,Fee())||this;return t.storageKey="dataSources",t.events=qd,t.dataComponentTypes=Ka,t.dataCollectionKeys=Ky,t.dataCollectionStateTypes=jN,t.dataOperationTypes={any:Yy,boolean:pp,number:zc,string:gl},Object.assign(t,B2.Events),t}return r.prototype.destroy=function(){},r.prototype.add=function(e,t){t===void 0&&(t={});var a=this.all;return e.id=e.id||this._createId(),a.add(e,t)},r.prototype.get=function(e){return this.all.get(e)},r.prototype.getAll=function(){return qee([],this.all.models,!0)},r.prototype.getValue=function(e,t,a){return(0,Zt.get)(a?.context||this.getContext(),e,t)},r.prototype.setValue=function(e,t){var a=this.fromPath(e);a[0];var o=a[1],i=a[2];if(o&&(i||i==="")){var l=nm({},o.attributes);if((0,Zt.set)(l,i||"",t))return o.set(l),!0}return!1},r.prototype.getContext=function(){return this.all.reduce(function(e,t){return e[t.id]=t.records.reduce(function(a,o,i){var l=o,c=nm({},l.attributes);return delete c.__p,a[l.id||i]=c,a},{}),e},{})},r.prototype.remove=function(e,t){return this.__remove(e,t)},r.prototype.fromPath=function(e){var t=[],a=(0,Zt.stringToPath)(e||""),o=a[0],i=a[1],l=a.slice(2),c=this.get(o),d=c?.records.get(i);return c&&t.push(c),d&&(t.push(d),l.length&&t.push(l.join("."))),t},r.prototype.store=function(){var e,t=[];return this.all.forEach(function(a){var o=a.attributes,i=o.skipFromStorage;o.transformers;var l=o.records,c=o.schema,d=Wee(o,["skipFromStorage","transformers","records","schema"]);i||t.push(nm(nm({},d),{id:d.id,schema:(0,_e.isEmpty)(c)?void 0:c,records:d.provider?void 0:l}))}),e={},e[this.storageKey]=t,e},r.prototype.load=function(e){var t=this,a=this,o=a.config,i=a.all,l=a.events,c=a.em,d=this.loadProjectData(e);if(o.autoloadProviders){var p=i.filter(function(g){return g.hasProvider});if(p.length){var h=function(){return Vee(t,void 0,void 0,function(){var g;return Hee(this,function(y){switch(y.label){case 0:return c.trigger(l.providerLoadAllBefore),g=p.map(function(b){return b.loadProvider()}),[4,Promise.all(g)];case 1:return y.sent(),c.trigger(l.providerLoadAll),[2]}})})};h()}}return d},r.prototype.postLoad=function(){var e=this,t=e.em,a=e.all;t.listenTo(a,Sr.e2,function(o,i,l){var c=l||i;t.changesUp(c,{dataSource:o,options:c})}),this.em.UndoManager.add(a)},r})(lu);const _6=Gee;var Kee=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),ko=function(){return ko=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},ko.apply(this,arguments)},PC=function(s,r,e,t){function a(o){return o instanceof e?o:new e(function(i){i(o)})}return new(e||(e=Promise))(function(o,i){function l(p){try{d(t.next(p))}catch(h){i(h)}}function c(p){try{d(t.throw(p))}catch(h){i(h)}}function d(p){p.done?o(p.value):a(p.value).then(l,c)}d((t=t.apply(s,r||[])).next())})},AC=function(s,r){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},t,a,o,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(d){return function(p){return c([d,p])}}function c(d){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,d[0]&&(e=0)),e;)try{if(t=1,a&&(o=d[0]&2?a.return:d[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,d[1])).done)return o;switch(a=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return e.label++,{value:d[1],done:!1};case 5:e.label++,a=d[1],d=[0];continue;case 7:d=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){e=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){e.label=d[1];break}if(d[0]===6&&e.label<o[1]){e.label=o[1],o=d;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(d);break}o[2]&&e.ops.pop(),e.trys.pop();continue}d=r.call(s,e)}catch(p){d=[6,p],a=0}finally{t=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},Yee=function(s,r){var e={};for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&r.indexOf(t)<0&&(e[t]=s[t]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(s);a<t.length;a++)r.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(s,t[a])&&(e[t[a]]=s[t[a]]);return e},Zee=function(s,r,e){if(e||arguments.length===2)for(var t=0,a=r.length,o;t<a;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return s.concat(o||Array.prototype.slice.call(r))};GU().$=go.default;var Xee=[OX,ZZ,GX,aJ,tY,MZ,DK,Dee,FA,sQ,XQ,EQ,pJ,TY,QY,ZH,HY,pK,_6],Qee=[_6,wZ,XG,VZ,DG,FA];KU({$:go.default});var PT={debug:console.log,info:console.info,warning:console.warn,error:console.error},Jee=(function(s){Kee(r,s);function r(e){e===void 0&&(e={});var t=s.call(this)||this;t.Model=Sr.Kx,t.Collection=Sr.pM,t.events=li,t.__skip=!1,t.defaultRunning=!1,t.loadTriggered=!1,t.destroyed=!1,t._isStoring=!1,t._config=e;var a=t.config;t.set("Config",e),t.set("modules",[]),t.set("toLoad",[]),t.set("storables",[]),t.set("selected",new XU),t.set("dmode",a.dragMode);var o=a.el,i=a.log,l=i===!0?(0,_e.keys)(PT):(0,_e.isArray)(i)?i:[];return(0,_e.bindAll)(t,"initBaseColorPicker"),o&&a.fromElement&&(a.components=o.innerHTML),t.attrsOrig=o?(0,_e.toArray)(o.attributes).reduce(function(c,d){return c[d.nodeName]=d.nodeValue,c},{}):"",a.components&&!a.pageManager&&(a.pageManager={pages:[{component:a.components}]}),Xee.forEach(function(c){return t.loadModule(c)}),Qee.forEach(function(c){return t.loadStorableModule(c)}),t.on("change:componentHovered",t.componentHovered,t),t.on("change:changesCount",t.updateChanges,t),t.on("change:readyLoad change:readyCanvas",t._checkReady,t),l.forEach(function(c){return t.listenLog(c)}),[{from:"change:selectedComponent",to:"component:toggled"}].forEach(function(c){var d=c.from,p=c.to;t.listenTo(t,d,function(){for(var h=[],g=0;g<arguments.length;g++)h[g]=arguments[g];t.trigger.apply(t,Zee([p],h,!1)),t.logWarning("The event '".concat(d,"' is deprecated, replace it with '").concat(p,"'"))})}),t}return r.prototype.defaults=function(){return{editing:0,selected:0,clipboard:null,dmode:0,componentHovered:null,previousModel:null,changesCount:0,storables:[],modules:[],toLoad:[],opened:{},device:""}},Object.defineProperty(r.prototype,"storables",{get:function(){return this.get("storables")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"modules",{get:function(){return this.get("modules")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"toLoad",{get:function(){return this.get("toLoad")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"selected",{get:function(){return this.get("selected")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"shallow",{get:function(){return this.get("shallow")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"I18n",{get:function(){return this.get("I18n")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Utils",{get:function(){return this.get("Utils")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Commands",{get:function(){return this.get("Commands")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Keymaps",{get:function(){return this.get("Keymaps")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Modal",{get:function(){return this.get("Modal")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Panels",{get:function(){return this.get("Panels")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"CodeManager",{get:function(){return this.get("CodeManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"UndoManager",{get:function(){return this.get("UndoManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"RichTextEditor",{get:function(){return this.get("RichTextEditor")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Canvas",{get:function(){return this.get("Canvas")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Editor",{get:function(){return this.get("Editor")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Components",{get:function(){return this.get("DomComponents")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Css",{get:function(){return this.get("CssComposer")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Blocks",{get:function(){return this.get("BlockManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Selectors",{get:function(){return this.get("SelectorManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Storage",{get:function(){return this.get("StorageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Traits",{get:function(){return this.get("TraitManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Parser",{get:function(){return this.get("Parser")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Layers",{get:function(){return this.get("LayerManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Assets",{get:function(){return this.get("AssetManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Devices",{get:function(){return this.get("DeviceManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Pages",{get:function(){return this.get("PageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Styles",{get:function(){return this.get("StyleManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"DataSources",{get:function(){return this.get("DataSources")},enumerable:!1,configurable:!0}),r.prototype._checkReady=function(){this.get("readyLoad")&&this.get("readyCanvas")&&!this.get("ready")&&this.set("ready",!0)},r.prototype.getContainer=function(){return this.config.el},r.prototype.listenLog=function(e){var t=this;this.listenTo(this,"log:".concat(e),function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];if(t.config.log){var i=PT[e];i?.apply(void 0,a)}})},Object.defineProperty(r.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){var e;return((e=this.config.grapesjs)===null||e===void 0?void 0:e.version)||""},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isHeadless",{get:function(){return!!this.config.headless},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isShallow",{get:function(){return!!this.get("isShallow")},enumerable:!1,configurable:!0}),r.prototype.initModules=function(){this.modules.forEach(function(e){return e.onInit()})},r.prototype.getConfig=function(e){var t=this.config;return(0,_e.isUndefined)(e)?t:t[e]},r.prototype.loadOnStart=function(){var e=this,t=this.config,a=t.projectData,o=t.headless,i={initial:!0},l=this.Storage;this.toLoad.reverse().forEach(function(p){return p.onLoad()});var c=function(){e.modules.forEach(function(p){return p.postLoad&&p.postLoad(e)}),e.set("readyLoad",1)};o?(a&&this.loadData(a,i),c()):this._storageTimeout=setTimeout(function(){return PC(e,void 0,void 0,function(){var p;return AC(this,function(h){switch(h.label){case 0:return a?(this.loadData(a,i),[3,5]):[3,1];case 1:if(!l?.canAutoload())return[3,5];h.label=2;case 2:return h.trys.push([2,4,,5]),[4,this.load({},i)];case 3:return h.sent(),[3,5];case 4:return p=h.sent(),this.logError(p),[3,5];case 5:return c(),[2]}})})});var d=new r({noticeOnUnload:!1,storageManager:!1,undoManager:!1});d.set({isShallow:!0}),d.Pages.onLoad(),d.Canvas.postLoad(),this.set("shallow",d)},r.prototype.updateChanges=function(e,t,a){var o=this,i=this.Storage,l=this.getDirtyCount();a.isClear||(this.updateItr&&clearTimeout(this.updateItr),this.updateItr=setTimeout(function(){return o.trigger(li.update)})),this.config.noticeOnUnload&&(window.onbeforeunload=l?function(){return!0}:null),i.isAutosave()&&l>=i.getStepsBeforeSave()&&this.store().catch(function(c){return o.logError(c)})},r.prototype.loadModule=function(e){var t=new e(this);return this.set(t.name,t),t.onLoad&&this.toLoad.push(t),this.modules.push(t),t},r.prototype.loadStorableModule=function(e){var t=this.loadModule(e);return this.storables.push(t),t},r.prototype.init=function(e,t){t===void 0&&(t={}),this.destroyed&&(this.initialize(t),this.destroyed=!1),this.set("Editor",e)},r.prototype.getEditor=function(){return this.get("Editor")},r.prototype.handleUpdates=function(e,t){var a=this;e===void 0&&(e={}),!(this.__skip||!this.loadTriggered||e.temporary||e.noCount||e.avoidStore||e.partial)&&(this.trigger(this.events.updateBefore,t),this.timedInterval&&clearTimeout(this.timedInterval),this.timedInterval=setTimeout(function(){var o=a.getDirtyCount()||0;e.unset;var i=Yee(e,["unset"]);a.set("changesCount",o+1,i)},0))},r.prototype.changesUp=function(e,t){this.handleUpdates(e,t)},r.prototype.componentHovered=function(e,t,a){var o=this.previous("componentHovered");o&&this.trigger("component:unhovered",o,a),t&&this.trigger("component:hovered",t,a)},r.prototype.getSelected=function(){return this.selected.lastComponent()},r.prototype.getSelectedAll=function(){return this.selected.allComponents()},r.prototype.setSelected=function(e,t){var a=this;t===void 0&&(t={});var o=t.event,i=o&&(o.ctrlKey||o.metaKey),l=(o||{}).shiftKey,c=((0,_e.isArray)(e)?e:[e]).map(function(g){var y,b;return((b=(y=g?.delegate)===null||y===void 0?void 0:y.select)===null||b===void 0?void 0:b.call(y,g))||g}).filter(Boolean),d=this.getSelectedAll(),p=this.getConfig().multipleSelection,h=(0,_e.isArray)(e);(h||!e)&&this.removeSelected(d.filter(function(g){return!(0,_e.contains)(c,g)})),c.forEach(function(g){if(g&&(a.trigger(bs.I.selectBefore,g,t),!g.get("selectable")||t.abort))if(t.useValid){for(var y=g.parent();y&&!y.get("selectable");)y=y.parent();g=y}else return;if(i&&p)return a.toggleSelected(g);if(l&&p){if(a.isEditing())return;a.clearSelection(a.Canvas.getWindow());var b=g.collection,v=g.index(),w,C;if(a.getSelectedAll().forEach(function(k){var N=k.collection,O=k.index();N===b&&(O<v?w=(0,_e.isUndefined)(w)?O:Math.max(w,O):O>v&&(C=(0,_e.isUndefined)(C)?O:Math.min(C,O)))}),!(0,_e.isUndefined)(w))for(;w!==v;)a.addSelected(b.at(w),t),w++;if(!(0,_e.isUndefined)(C))for(;C!==v;)a.addSelected(b.at(C),t),C--;return a.addSelected(g,t)}!h&&a.removeSelected(d.filter(function(k){return k!==g})),a.addSelected(g,t)})},r.prototype.addSelected=function(e,t){var a=this;t===void 0&&(t={});var o=(0,_e.isArray)(e)?e:[e];o.forEach(function(i){var l=a.selected;if(!(!i||!i.get("selectable")||i.parents().some(function(p){return l.hasComponent(p)}))){t.forceChange&&a.removeSelected(i,t);var c=l.allComponents().filter(function(p){return(0,_e.contains)(p.parents(),i)});if(c.forEach(function(p){return a.removeSelected(p,t)}),l.addComponent(i,t),a.trigger(bs.I.select,i,t),a.Canvas.addSpot({type:Sl.F.Select,component:i}),t.activate){var d=i.getView();d?.rendered?d.onActive(t.event):i.once(bs.I.render,function(p){var h=p.view;return h.onActive(t.event)})}}})},r.prototype.removeSelected=function(e,t){var a=this;t===void 0&&(t={}),this.selected.removeComponent(e,t);var o=(0,_e.isArray)(e)?e:[e];o.forEach(function(i){return a.Canvas.removeSpots({type:Sl.F.Select,component:i})})},r.prototype.toggleSelected=function(e,t){var a=this;t===void 0&&(t={});var o=(0,_e.isArray)(e)?e:[e];o.forEach(function(i){a.selected.hasComponent(i)?a.removeSelected(i,t):a.addSelected(i,t)})},r.prototype.setHovered=function(e,t){var a=this;t===void 0&&(t={});var o=function(c,d){var p=a,h=p.config,g=p.Canvas,y=a.getHovered(),b=a.getSelectedAll(),v=Sl.F.Hover,w=Sl.F.Spacing;a.set("componentHovered",c||null,d),y&&(g.removeSpots({type:v,component:y}),g.removeSpots({type:w,component:y})),c&&(g.addSpot({type:v,component:c}),(!b.includes(c)||h.showOffsetsSelected)&&g.addSpot({type:w,component:c}))};if(!e)return o();var i="component:hover";if(t.forceChange&&o(),this.trigger("".concat(i,":before"),e,t),!e.get("hoverable"))if(t.useValid&&!t.abort){for(var l=e.parent();l&&!l.get("hoverable");)l=l.parent();e=l}else return;t.abort||(o(e,t),this.trigger(i,e,t))},r.prototype.getHovered=function(){return this.get("componentHovered")},r.prototype.setComponents=function(e,t){return t===void 0&&(t={}),this.Components.setComponents(e,t)},r.prototype.getComponents=function(){var e=this.Components,t=this.CodeManager;if(!(!e||!t)){var a=e.getComponents();return t.getCode(a,"json")}},r.prototype.setStyle=function(e,t){t===void 0&&(t={});var a=this.Css;return a.clear(t),a.getAll().add(e,t),this},r.prototype.addStyle=function(e,t){t===void 0&&(t={});var a=this.getStyle().add(e,t);return(0,_e.isArray)(a)?a:[a]},r.prototype.getStyle=function(){return this.Css.getAll()},r.prototype.setState=function(e){return this.set("state",e),this},r.prototype.getState=function(){return this.get("state")||""},r.prototype.getHtml=function(e){e===void 0&&(e={});var t=this.config,a=t.optsHtml,o=t.jsInHtml?this.getJs(e):"",i=e.component||this.Components.getComponent(),l=i?this.CodeManager.getCode(i,"html",ko(ko({},a),e)):"";return l+=o?"<script>".concat(o,"<\/script>"):"",l},r.prototype.getCss=function(e){e===void 0&&(e={});var t=this.config,a=t.optsCss,o=e.avoidProtected,i=(0,_e.isUndefined)(e.keepUnusedStyles)?t.keepUnusedStyles:e.keepUnusedStyles,l=this.Css,c=e.component||this.Components.getComponent(),d=o?"":t.protectedCss||"",p=c&&this.CodeManager.getCode(c,"css",ko(ko({cssc:l,keepUnusedStyles:i},a),e));return c?e.json?p:d+p:""},r.prototype.getJs=function(e){e===void 0&&(e={});var t=e.component||this.Components.getWrapper();return t?this.CodeManager.getCode(t,"js").trim():""},r.prototype.store=function(e){return PC(this,void 0,void 0,function(){var t,a=this;return AC(this,function(o){switch(o.label){case 0:return this._isStoring?[2]:(this._isStoring=!0,setTimeout(function(){a.clearDirtyCount()},1),t=this.storeData(),[4,this.Storage.store(t,e)]);case 1:return o.sent(),setTimeout(function(){a._isStoring=!1},1),[2,t]}})})},r.prototype.load=function(e){return PC(this,arguments,void 0,function(t,a){var o;return a===void 0&&(a={}),AC(this,function(i){switch(i.label){case 0:return[4,this.Storage.load(t)];case 1:return o=i.sent(),this.loadData(o,a),[4,(0,Zt.wait)()];case 2:return i.sent(),a.clear&&(this.UndoManager.clear(),this.clearDirtyCount()),[2,o]}})})},r.prototype.storeData=function(){var e={},t=this.getEditing();t&&t.trigger("sync:content",{noCount:!0}),this.storables.forEach(function(o){e=ko(ko({},e),o.store(1))});var a=JSON.parse(JSON.stringify(e));return this.trigger(li.projectGet,{project:a}),a},r.prototype.loadData=function(e,t){e===void 0&&(e={}),t===void 0&&(t={});var a={project:e,options:t,initial:!!t.initial},o=!1;return(0,Zt.isEmptyObj)(e)||(this.storables.forEach(function(i){return i.clear()}),this.storables.forEach(function(i){return i.load(e)}),o=!0),this.trigger(li.projectLoad,ko(ko({},a),{loaded:o})),o&&this.trigger(li.projectLoaded,a),e},r.prototype.getDeviceModel=function(){var e=this.get("device");return this.Devices.get(e)},r.prototype.runDefault=function(e){e===void 0&&(e={});var t=this.Commands.get(this.config.defaultCommand);!t||this.defaultRunning||(t.stop(this,this,e),t.run(this,this,e),this.defaultRunning=!0)},r.prototype.stopDefault=function(e){e===void 0&&(e={});var t=this.Commands;if(t){var a=t.get(this.config.defaultCommand);!a||!this.defaultRunning||(a.stop(this,this,e),this.defaultRunning=!1)}},r.prototype.refreshCanvas=function(e){e===void 0&&(e={}),this.Canvas.refresh({spots:e.tools})},r.prototype.clearSelection=function(e){var t,a=e||window;(t=a.getSelection())===null||t===void 0||t.removeAllRanges()},r.prototype.getCurrentMedia=function(){var e=this.config,t=this.getDeviceModel(),a=e.mediaCondition,o=e.devicePreviewMode,i=t&&t.get("widthMedia");return t&&i&&!o?"(".concat(a,": ").concat(i,")"):""},r.prototype.getWrapper=function(){return this.Components.getWrapper()},r.prototype.setCurrentFrame=function(e){return this.set("currentFrame",e)},r.prototype.getCurrentFrame=function(){return this.get("currentFrame")},r.prototype.getCurrentFrameModel=function(){var e;return(e=this.getCurrentFrame()||{})===null||e===void 0?void 0:e.model},r.prototype.getIcon=function(e){var t=this.config.icons||{};return t[e]||""},r.prototype.getDirtyCount=function(){return this.get("changesCount")},r.prototype.clearDirtyCount=function(){return this.set({changesCount:0},{isClear:!0})},r.prototype.getZoomDecimal=function(){return this.Canvas.getZoomDecimal()},r.prototype.getZoomMultiplier=function(){return this.Canvas.getZoomMultiplier()},r.prototype.setDragMode=function(e){return this.set("dmode",e)},r.prototype.getDragMode=function(e){var t=e?.getDragMode()||this.get("dmode");return t||""},r.prototype.t=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var a=this.get("I18n");return a?.t.apply(a,e)},r.prototype.inAbsoluteMode=function(e){return this.getDragMode(e)==="absolute"},r.prototype.destroyAll=function(){var e=this,t=this,a=t.config,o=t.view;this.trigger(li.destroy);var i=this.getEditor(),l=(a.grapesjs||{}).editors,c=l===void 0?[]:l,d=this.get("shallow");this._storageTimeout&&clearTimeout(this._storageTimeout),d?.destroyAll(),this.stopListening(),this.stopDefault(),(this.modules||[]).slice().reverse().forEach(function(p){return p.destroy()}),o?.remove&&o.remove(),this.clear({silent:!0}),this.destroyed=!0,["_config","view","_previousAttributes","_events","_listeners"].forEach(function(p){return e[p]={}}),c.splice(c.indexOf(i),1),(0,Zt.hasWin)()&&(0,go.default)(a.el).empty().attr(this.attrsOrig),this.trigger(li.destroyed)},r.prototype.getEditing=function(){var e=this.get("editing");return e&&e.model||void 0},r.prototype.setEditing=function(e){return this.set("editing",e),this},r.prototype.isEditing=function(){return!!this.get("editing")},r.prototype.log=function(e,t){t===void 0&&(t={});var a=li.log,o=t.ns,i=t.level,l=i===void 0?"debug":i;if(this.trigger(a,e,t),l&&this.trigger("".concat(a,":").concat(l),e,t),o){var c="".concat(a,"-").concat(o);this.trigger(c,e,t),l&&this.trigger("".concat(c,":").concat(l),e,t)}},r.prototype.logInfo=function(e,t){this.log(e,ko(ko({},t),{level:"info"}))},r.prototype.logWarning=function(e,t){this.log(e,ko(ko({},t),{level:"warning"}))},r.prototype.logError=function(e,t){this.log(e,ko(ko({},t),{level:"error"}))},r.prototype.initBaseColorPicker=function(e,t){t===void 0&&(t={});var a=this.config,o=a.colorPicker,i=o===void 0?{}:o,l=a.el,c=a.stylePrefix;return(0,go.default)(e).spectrum(ko(ko({containerClassName:"".concat(c,"one-bg ").concat(c,"two-color"),appendTo:l||"body",maxSelectionSize:8,showPalette:!0,palette:[],showAlpha:!0,chooseText:"Ok",cancelText:""},t),i))},r.prototype.skip=function(e){this.__skip=!0;var t=this.UndoManager;t?t.skip(e):e(),this.__skip=!1},r.prototype.data=function(e,t,a){var o="_gjs-data";if(e[o]||(e[o]={}),(0,_e.isUndefined)(a))return e[o][t];e[o][t]=a},r})(Sr.Kx);const ete=Jee;function tte(){return window.location.hostname}var rte=(function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),nte=function(s,r,e,t){function a(o){return o instanceof e?o:new e(function(i){i(o)})}return new(e||(e=Promise))(function(o,i){function l(p){try{d(t.next(p))}catch(h){i(h)}}function c(p){try{d(t.throw(p))}catch(h){i(h)}}function d(p){p.done?o(p.value):a(p.value).then(l,c)}d((t=t.apply(s,r||[])).next())})},ste=function(s,r){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},t,a,o,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(d){return function(p){return c([d,p])}}function c(d){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,d[0]&&(e=0)),e;)try{if(t=1,a&&(o=d[0]&2?a.return:d[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,d[1])).done)return o;switch(a=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return e.label++,{value:d[1],done:!1};case 5:e.label++,a=d[1],d=[0];continue;case 7:d=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){e=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){e.label=d[1];break}if(d[0]===6&&e.label<o[1]){e.label=o[1],o=d;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(d);break}o[2]&&e.ops.pop(),e.trys.pop();continue}d=r.call(s,e)}catch(p){d=[6,p],a=0}finally{t=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},ate=(function(s){rte(r,s);function r(e){var t=s.call(this,{model:e})||this,a=e.Panels,o=e.UndoManager;return e.view=t,e.once("change:ready",function(){a.active(),a.disableButtons(),e.getConfig().telemetry&&t.sendTelemetryData().catch(function(){}),setTimeout(function(){e.trigger(li.load,e.Editor),e.loadTriggered=!0,o.clear(),e.clearDirtyCount()})}),t}return r.prototype.render=function(){var e=this,t=this,a=t.$el,o=t.model,i=o.Panels,l=o.Canvas,c=o.config,d=o.modules,p=c.stylePrefix,h=["".concat(p,"editor")];!c.customUI&&h.push("".concat(p,"one-bg ").concat(p,"two-color"));var g=(0,go.default)(c.el||"body ".concat(c.container));c.cssIcons&&(0,Zt.appendStyles)(c.cssIcons,{unique:!0,prepand:!0}),a.empty(),c.width&&g.css("width",c.width),c.height&&g.css("height",c.height),a.append(l.render()),a.append(i.render());var y=o.shallow,b=y.Canvas.render();return b.style.display="none",a.append(b),a.attr("class",h.join(" ")),g.addClass("".concat(p,"editor-cont")).empty().append(a),d.forEach(function(v){var w;return(w=v.postRender)===null||w===void 0?void 0:w.call(v,e)}),this},r.prototype.sendTelemetryData=function(){return nte(this,void 0,void 0,function(){var e,t,a,o,i,l,c,d;return ste(this,function(p){switch(p.label){case 0:return e=tte(),e==="localhost"||e.includes("localhost")?[2]:(t="gjs_telemetry_sent_",a=this.model.version,o="".concat(t).concat(a),sessionStorage.getItem(o)?[2]:(i="https://app.grapesjs.com",[4,fetch("".concat(i,"/api/gjs/telemetry/collect"),{method:"POST",body:JSON.stringify({domain:e,version:a})})]));case 1:return l=p.sent(),l.ok?[3,3]:(c=Error.bind,d="Failed to send telemetry data ".concat,[4,l.text()]);case 2:throw new(c.apply(Error,[void 0,d.apply("Failed to send telemetry data ",[p.sent()])]));case 3:return sessionStorage.setItem(o,"true"),Object.keys(sessionStorage).forEach(function(h){h.startsWith(t)&&h!==o&&sessionStorage.removeItem(h)}),this.trigger(li.telemetryInit),[2]}})})},r})(Sr.Ss);const ote=ate;var By=function(){return By=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},By.apply(this,arguments)},AT=function(s,r,e,t){function a(o){return o instanceof e?o:new e(function(i){i(o)})}return new(e||(e=Promise))(function(o,i){function l(p){try{d(t.next(p))}catch(h){i(h)}}function c(p){try{d(t.throw(p))}catch(h){i(h)}}function d(p){p.done?o(p.value):a(p.value).then(l,c)}d((t=t.apply(s,r||[])).next())})},MT=function(s,r){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},t,a,o,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(d){return function(p){return c([d,p])}}function c(d){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,d[0]&&(e=0)),e;)try{if(t=1,a&&(o=d[0]&2?a.return:d[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,d[1])).done)return o;switch(a=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return e.label++,{value:d[1],done:!1};case 5:e.label++,a=d[1],d=[0];continue;case 7:d=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){e=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){e.label=d[1];break}if(d[0]===6&&e.label<o[1]){e.label=o[1],o=d;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(d);break}o[2]&&e.ops.pop(),e.trys.pop();continue}d=r.call(s,e)}catch(p){d=[6,p],a=0}finally{t=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},ite=function(s,r,e){if(e||arguments.length===2)for(var t=0,a=r.length,o;t<a;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return s.concat(o||Array.prototype.slice.call(r))},lte=(function(){function s(r,e){r===void 0&&(r={}),e===void 0&&(e={});var t;this.events=li,this.html=Ei;var a=qU();this.config=By(By(By({},a),r),{pStylePrefix:(t=r.stylePrefix)!==null&&t!==void 0?t:a.stylePrefix}),this.em=new ete(this.config),this.$=e.$,this.em.init(this),this.editor=this.em}return Object.defineProperty(s.prototype,"Config",{get:function(){return this.em.config},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"I18n",{get:function(){return this.em.I18n},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Utils",{get:function(){return this.em.Utils},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Commands",{get:function(){return this.em.Commands},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Keymaps",{get:function(){return this.em.Keymaps},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Modal",{get:function(){return this.em.Modal},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Panels",{get:function(){return this.em.Panels},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Canvas",{get:function(){return this.em.Canvas},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Parser",{get:function(){return this.em.Parser},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"CodeManager",{get:function(){return this.em.CodeManager},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"UndoManager",{get:function(){return this.em.UndoManager},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"RichTextEditor",{get:function(){return this.em.RichTextEditor},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Pages",{get:function(){return this.em.Pages},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Components",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"DomComponents",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Layers",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"LayerManager",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Css",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"CssComposer",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Storage",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"StorageManager",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Assets",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"AssetManager",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Blocks",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"BlockManager",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Traits",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"TraitManager",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Selectors",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"SelectorManager",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Styles",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"StyleManager",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Devices",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"DeviceManager",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"DataSources",{get:function(){return this.em.DataSources},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"EditorModel",{get:function(){return this.em},enumerable:!1,configurable:!0}),s.prototype.getConfig=function(r){return this.em.getConfig(r)},s.prototype.getHtml=function(r){return this.em.getHtml(r)},s.prototype.getCss=function(r){return this.em.getCss(r)},s.prototype.getJs=function(r){return this.em.getJs(r)},s.prototype.getComponents=function(){return this.Components.getComponents()},s.prototype.getWrapper=function(){return this.Components.getWrapper()},s.prototype.setComponents=function(r,e){return e===void 0&&(e={}),this.em.setComponents(r,e),this},s.prototype.addComponents=function(r,e){return this.getWrapper().append(r,e)},s.prototype.getStyle=function(){return this.em.Css.getAll()},s.prototype.setStyle=function(r,e){return e===void 0&&(e={}),this.em.setStyle(r,e),this},s.prototype.addStyle=function(r,e){return e===void 0&&(e={}),this.em.addStyle(r,e)},s.prototype.getSelected=function(){return this.em.getSelected()},s.prototype.getSelectedAll=function(){return this.em.getSelectedAll()},s.prototype.getSelectedToStyle=function(){var r=this.em.getSelected();if(r)return this.StyleManager.getModelToStyle(r)},s.prototype.select=function(r,e){return this.em.setSelected(r,e),this},s.prototype.selectAdd=function(r){return this.em.addSelected(r),this},s.prototype.selectRemove=function(r){return this.em.removeSelected(r),this},s.prototype.selectToggle=function(r){return this.em.toggleSelected(r),this},s.prototype.getEditing=function(){return this.em.getEditing()},s.prototype.setDevice=function(r){return this.em.set("device",r),this},s.prototype.getDevice=function(){return this.em.get("device")},s.prototype.runCommand=function(r,e){return e===void 0&&(e={}),this.Commands.run(r,e)},s.prototype.stopCommand=function(r,e){return e===void 0&&(e={}),this.Commands.stop(r,e)},s.prototype.store=function(r){return AT(this,void 0,void 0,function(){return MT(this,function(e){switch(e.label){case 0:return[4,this.em.store(r)];case 1:return[2,e.sent()]}})})},s.prototype.load=function(r){return AT(this,arguments,void 0,function(e,t){return t===void 0&&(t={}),MT(this,function(a){switch(a.label){case 0:return[4,this.em.load(e,t)];case 1:return[2,a.sent()]}})})},s.prototype.getProjectData=function(){return this.em.storeData()},s.prototype.loadProjectData=function(r,e){return e===void 0&&(e={}),this.em.loadData(r,e)},s.prototype.storeData=function(){return this.em.storeData()},s.prototype.loadData=function(r){return this.em.loadData(r)},s.prototype.getContainer=function(){return this.config.el},s.prototype.getDirtyCount=function(){return this.em.getDirtyCount()},s.prototype.clearDirtyCount=function(){return this.em.clearDirtyCount()},s.prototype.refresh=function(r){this.em.refreshCanvas(r)},s.prototype.setCustomRte=function(r){this.RichTextEditor.customRte=r},s.prototype.setCustomParserCss=function(r){return this.Parser.getConfig().parserCss=r,this},s.prototype.setDragMode=function(r){return this.em.setDragMode(r),this},s.prototype.log=function(r,e){return e===void 0&&(e={}),this.em.log(r,e),this},s.prototype.t=function(){for(var r,e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(r=this.em).t.apply(r,e)},s.prototype.on=function(r,e){return this.em.on(r,e),this},s.prototype.once=function(r,e){return this.em.once(r,e),this},s.prototype.off=function(r,e){return this.em.off(r,e),this},s.prototype.trigger=function(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return this.em.trigger.apply(this.em,ite([r],e,!0)),this},s.prototype.destroy=function(){this.em&&(this.em.destroyAll(),this.editorView=void 0)},s.prototype.getEl=function(){var r;return(r=this.editorView)===null||r===void 0?void 0:r.el},s.prototype.getModel=function(){return this.em},s.prototype.render=function(){var r;return(r=this.editorView)===null||r===void 0||r.remove(),this.editorView=new ote(this.em),this.editorView.render().el},s.prototype.onReady=function(r){this.em.get("ready")?r(this):this.em.on("load",r)},s})();const cte=lte;var dte=function(s,r){var e=r.get(s);if(!e){var t=(0,Zt.getGlobal)()[s];e=t?.default||t}return e},E6=function(s,r){return(0,_e.isString)(s)?dte(s,r):s?.default||s},T6=function(s,r){s.getModel().logWarning("Plugin ".concat(r," not found"),{context:"plugins",plugin:r})},ute=(function(){function s(){this.plugins={}}return s.prototype.add=function(r,e){var t=this.get(r);return t||(this.plugins[r]=e,e)},s.prototype.get=function(r){return this.plugins[r]},s.prototype.getAll=function(){return this.plugins},s})();const fte=ute,pte=(function(){var s=function(){for(var e,t=window.navigator.userAgent,a=[["edge",/Edge\/([0-9\._]+)/],["ie",/MSIE\s(7\.0)/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/]],o=0;o<a.length;o++){var i=a[o];if(e=i[1].exec(t),e)break}return!!e};if((0,Zt.hasWin)()&&s()){var r=DOMImplementation.prototype.createHTMLDocument;DOMImplementation.prototype.createHTMLDocument=function(e){return e||(e=""),r.apply(document.implementation,[e])}}});var gw=function(){return gw=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},gw.apply(this,arguments)};pte();var CN=new fte,IT=[],O6=function(s,r){var e=E6(s,CN);return function(t){e?e(t,r||{}):T6(t,s)}},P6={$:go.default,editors:IT,plugins:CN,usePlugin:O6,version:"0.22.14",init:function(s){s===void 0&&(s={});var r=s.headless,e=s.container;if(!e&&!r)throw new Error("'container' is required");var t=gw(gw({autorender:!0,plugins:[],pluginsOpts:{}},s),{grapesjs:this,el:r?void 0:(0,_e.isElement)(e)?e:document.querySelector(e)}),a=new cte(t,{$:go.default}),o=a.getModel();return o.initModules(),t.plugins.forEach(function(i){var l=E6(i,CN),c=t.pluginsOpts[i]||{};l?l(a,c):T6(a,i)}),o.loadOnStart(),t.autorender&&!r&&a.render(),IT.push(a),a}};const hte=P6;var A6=sj.Ay;sj.I0;sj.nu;const M6=Object.freeze(Object.defineProperty({__proto__:null,default:A6},Symbol.toStringTag,{value:"Module"})),I6=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),MC='<section style="padding: 60px 20px; min-height: 400px; background: #ffffff; position: relative; border: 2px dashed #d1d5db; border-radius: 4px; max-width: 1200px; margin: 60px auto;"><div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); display: flex; flex-direction: column; align-items: center; gap: 12px; color: #6b7280; font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;"><div style="display: flex; gap: 12px; align-items: center;"><span style="width: 40px; height: 40px; border-radius: 50%; background: #1e1e1e; display: inline-flex; align-items: center; justify-content: center; color: #fff; font-size: 18px;">+</span><span style="width: 40px; height: 40px; border-radius: 50%; background: #1e1e1e; display: inline-flex; align-items: center; justify-content: center; color: #fff; font-size: 18px;"></span></div><p style="margin: 0; font-size: 14px; font-weight: 500;">Start building your page</p><p style="margin: 0; font-size: 12px; opacity: 0.7;">Drag blocks from the sidebar or click to add content</p></div></section>',IC={Header:["header",".header","#header","[class*='header']","[id*='header']","nav",".navbar",".navigation"],"Hero section":[".hero-section",".hero","[class*='hero']","[id*='hero']",".banner","[class*='banner']",".jumbotron","[class*='jumbotron']"],"Logo banner":[".logo-banner","[class*='logo-banner']","[class*='logo']",".banner","[class*='banner']"],"Collection list: Grid":[".collection-grid","[class*='collection'][class*='grid']",".product-grid","[class*='product-grid']",".grid","[class*='collection-list']"],"Product highlight":[".product-highlight","[class*='product-highlight']",".featured-product","[class*='featured-product']",".highlight"],"Product card":[".product-card","[class*='product-card']","[class*='productCard']",".product-item","[class*='product-item']","[class*='productItem']",".product","[class*='product']:not([class*='product-grid']):not([class*='product-list'])","[data-product]",".card","[class*='card']","article","[role='article']",".item","[class*='item']"],"Featured collection":[".featured-collection","[class*='featured-collection']",".featured-products","[class*='featured-products']"],"Collection list: Carousel":[".collection-carousel","[class*='carousel']","[class*='slider']",".product-carousel","[class*='collection'][class*='carousel']"],Marquee:[".marquee","[class*='marquee']",".scrolling-text","[class*='scrolling']"],Footer:["footer",".footer","#footer","[class*='footer']","[id*='footer']"],Logo:[".logo","[class*='logo']","[id*='logo']","img[alt*='logo' i]","img[src*='logo' i]"]},mte=()=>{const[s]=VO(),r=dr(),{activeStoreId:e}=Ur(),{createTheme:t,updateTheme:a}=F2(),o=u.useRef(null),i=u.useRef(null),l=u.useRef(""),c=u.useRef([]),[d,p]=u.useState(!0),[h,g]=u.useState(null),[y,b]=u.useState(""),[v,w]=u.useState("desktop"),[C,k]=u.useState(null),[N,O]=u.useState(!1),[R,L]=u.useState(!0),[B,G]=u.useState(!1),[$,z]=u.useState(!1),[Y,M]=u.useState(!1),[q,P]=u.useState(!1),[H,D]=u.useState(!1),[X,se]=u.useState(""),[Q,xe]=u.useState({header:!0,template:!0,footer:!0}),[K,Z]=u.useState([{id:"page-1",name:"Home",html:MC,css:""}]),ve=u.useRef([{id:"page-1",name:"Home",html:MC,css:""}]),[ae,Se]=u.useState("page-1"),Pe=s.get("id")||s.get("themeId")||"",$e=s.get("type")||"",we=u.useCallback(async(ie,Fe,We,Qe)=>{const de=[];try{const Ee=new DOMParser,le=Ee.parseFromString(Fe,"text/html"),Ye=new Set;le.querySelectorAll("a[href]").forEach(Ke=>{const kt=Ke.getAttribute("href");if(!kt||/^(?:https?:|mailto:|tel:|javascript:|#|\/\/)/i.test(kt))return;const At=kt.split("?")[0].split("#")[0].trim();if(!At||At==="index.html"||At==="/")return;const xt=At.replace(/^\/+/,"");xt&&!Ye.has(xt)&&Ye.add(xt)}),console.log(` Discovered ${Ye.size} potential pages from hyperlinks:`,Array.from(Ye));const De=Ke=>{if(Ke.startsWith("http://")||Ke.startsWith("https://")||Ke.startsWith("//"))return Ke.startsWith("//")?"https:"+Ke:Ke;const kt=ie.endsWith("/")?ie:`${ie}/`;if(Ke.startsWith("/"))return`${kt}${Ke.replace(/^\/+/,"")}`;try{return new URL(Ke,kt).href}catch{return kt+Ke}},ct=async Ke=>{try{const kt=[];Ke.toLowerCase().endsWith(".html")?kt.push(`${ie}/${Ke}?v=${Date.now()}`):(kt.push(`${ie}/${Ke}/index.html?v=${Date.now()}`),kt.push(`${ie}/${Ke}.html?v=${Date.now()}`));let At=null;for(const $t of kt)try{const tr=await fetch($t,{credentials:"include",headers:Qe()});if(tr.ok){At=await tr.text();break}}catch(tr){console.warn(`Failed to fetch page from ${$t}:`,tr)}if(!At)return console.warn(`Could not fetch page: ${Ke}`),null;const xt=Ee.parseFromString(At,"text/html"),br=await(async $t=>{const tr=[],Lr=Array.from($t.querySelectorAll('link[rel="stylesheet"]')).map(async Fr=>{const rr=Fr.getAttribute("href");if(!rr)return"";const wr=De(rr);try{const an=await fetch(wr,{credentials:"include",headers:Qe()});return an.ok?await an.text()||"":`@import url('${wr}');`}catch{return`@import url('${wr}');`}}),tn=await Promise.all(Lr);tr.push(...tn.filter(Fr=>Fr.trim()));const bn=Array.from($t.querySelectorAll("style")).map(Fr=>Fr.textContent||"").filter(Fr=>Fr.trim());return tr.push(...bn),tr.join(`

`).trim()})(xt),zt=We?br?`${We}

/* Page-specific styles */
${br}`:We:br,be=xt.body?xt.body.innerHTML:At,Be=Ke.replace(/\.html$/i,"").replace(/\/index$/i,"").replace(/\//g,"-").replace(/[^a-z0-9-]/gi,"-").toLowerCase()||`page-${Date.now()}`,wt=(Ke.replace(/\.html$/i,"").replace(/\/index$/i,"").split("/").pop()||"Page").split("-").map($t=>$t.charAt(0).toUpperCase()+$t.slice(1)).join(" ");return{id:Be,name:wt,html:be||MC,css:zt||""}}catch(kt){return console.error(`Error fetching page ${Ke}:`,kt),null}},ot=Array.from(Ye).map(Ke=>ct(Ke));(await Promise.all(ot)).forEach(Ke=>{Ke&&de.push(Ke)}),console.log(` Successfully discovered and fetched ${de.length} additional pages`)}catch(Ee){console.error("Error discovering pages:",Ee)}return de},[]),Ae=u.useCallback(async ie=>{try{const Fe="https://backend.ziplofy.com/api",We=`?v=${Date.now()}`,Qe=()=>{try{const kr=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken");if(!kr)return null;const jr=kr.split(".");if(jr.length<2)return null;const mt=JSON.parse(atob(jr[1].replace(/-/g,"+").replace(/_/g,"/")));return String(mt.uid||mt.userId||mt.id||"")}catch{return null}},de=()=>{const kr={},jr=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken")||localStorage.getItem("token")||sessionStorage.getItem("token");return jr&&(kr.Authorization=`Bearer ${jr}`),kr},Ee=Qe(),le=Pe&&/^[0-9a-fA-F]{24}$/.test(Pe);let Ye="";if($e==="installed"){const kr=e?`${Fe}/themes/installed/${e}/${Pe}/unzippedTheme`:Ee?`${Fe}/themes/installed/${Ee}/${Pe}/unzippedTheme`:null;if(kr)Ye=`${kr}/index.html${We}`,console.log(" Using installed theme:",Ye);else throw new Error("Store ID or User ID required for installed themes")}else le?(Ye=`${Fe}/custom-themes/${Pe}/files/index.html${We}`,console.log(" Using custom theme:",Ye)):(Ye=`${Fe}/themes/preview/${Pe}${We}`,console.log(" Using preview theme:",Ye));console.log("Fetching theme from:",Ye);const De=await fetch(Ye,{credentials:"include",headers:de()});if(!De.ok){const kr=await De.text().catch(()=>"Unknown error");let jr=`Failed to load theme HTML: ${De.status} ${De.statusText}. ${kr}`;if(De.status===404)try{JSON.parse(kr).error?.includes("not found")&&(jr=`Theme not found. The theme with ID "${Pe}" does not exist in the database. Please create a new theme or use an existing theme ID.`)}catch{}else De.status===401&&(jr="Authentication failed. Please log in again and try loading the theme.");throw new Error(jr)}let ct=await De.text();const ot=Ye.substring(0,Ye.lastIndexOf("/")+1),dt=/<style[^>]*>([\s\S]*?)<\/style>/gi;let Ke="",kt;for(;(kt=dt.exec(ct))!==null;)Ke+=kt[1]+`
`;const At=/<link[^>]*rel\s*=\s*["']stylesheet["'][^>]*>/gi,xt=[];let Xt;for(;(Xt=At.exec(ct))!==null;){const jr=Xt[0].match(/href\s*=\s*["']([^"']+)["']/i);if(jr&&jr[1]){let mt=jr[1];if(mt.startsWith("./")||mt.startsWith("../")||!mt.startsWith("http"))if(mt.startsWith("./"))mt=ot+mt.substring(2);else if(mt.startsWith("../")){const yr=ot.split("/").filter(fn=>fn),An=mt.split("/").filter(fn=>fn);for(const fn of An)fn===".."?yr.pop():fn!=="."&&yr.push(fn);mt=yr.join("/"),mt.startsWith("http")||(mt=ot.replace(/\/[^\/]*$/,"/")+mt)}else mt=ot+mt;xt.push(mt)}}c.current=xt;const br=kr=>{try{const mt=new URL(kr).hostname.toLowerCase();return mt.includes("googleapis.com")||mt.includes("cdnjs.cloudflare.com")||mt.includes("stackpath.bootstrapcdn.com")||mt.includes("cdn.jsdelivr.net")||mt.includes("unpkg.com")||mt.includes("fonts.googleapis.com")||mt.includes("fonts.gstatic.com")}catch{return!1}},zt=kr=>kr.startsWith("http://")||kr.startsWith("https://")||kr.startsWith("//")?kr.startsWith("//")?"https:"+kr:kr:ot+kr.replace(/^\.\//,"");let be=Ke;const Be=xt.map(async kr=>{const jr=zt(kr);if(br(jr))return console.log(`Using @import for external CDN: ${jr}`),`@import url('${jr}');`;try{const mt=await fetch(jr,{credentials:"include",headers:de()});if(mt.ok){const yr=await mt.text();return console.log(" Fetched external CSS:",jr,yr.length,"chars"),yr||""}else return console.warn(`Failed to fetch CSS from ${jr}:`,mt.status),`@import url('${jr}');`}catch(mt){return console.warn(`Error fetching CSS from ${jr}, using @import:`,mt),`@import url('${jr}');`}}),wt=(await Promise.all(Be)).filter(kr=>kr.trim()).join(`

`);wt&&(be+=`

`+wt),l.current=be,console.log(" Stored original theme CSS:",be.length,"chars"),ct=ct.replace(/<script[^>]*>[\s\S]*?<\/script>/gi,""),ct=ct.replace(/<link[^>]*rel\s*=\s*["']stylesheet["'][^>]*>/gi,"");const $t=ct.match(/<body[^>]*>([\s\S]*)<\/body>/i),tr=$t?$t[1]:ct,Lr=ct.match(/<html[^>]*>([\s\S]*)<\/html>/i),tn=tr||(Lr?Lr[1]:ct),bn=await we(ot,ct,be,de),rr=[{id:"page-1",name:"Home",html:tn,css:be},...bn];Z(rr),ve.current=rr,Se("page-1"),console.log(` Loaded ${rr.length} pages:`,rr.map(kr=>({id:kr.id,name:kr.name}))),ie.setComponents(tn);const wr=()=>{try{const kr=ie.Canvas;if(!kr)return console.warn("Canvas not available yet"),!1;const jr=kr.getFrameEl();if(!jr||!jr.contentDocument)return console.warn("Frame or frame document not available"),!1;const mt=jr.contentDocument,yr=mt.head||mt.getElementsByTagName("head")[0];if(!yr)return console.warn("Head element not found"),!1;if(yr.querySelectorAll("#ziplofy-theme-styles, style[data-ziplofy-theme], link[data-ziplofy-theme]").forEach(fn=>fn.remove()),Ke.trim()){const fn=mt.createElement("style");fn.id="ziplofy-theme-styles",fn.setAttribute("data-ziplofy-theme","true"),fn.textContent=Ke,yr.appendChild(fn),console.log(" Injected inline CSS")}if(xt.forEach((fn,wn)=>{const zr=mt.createElement("link");zr.rel="stylesheet",zr.href=fn,zr.setAttribute("data-ziplofy-theme","true"),zr.crossOrigin="anonymous",zr.onerror=()=>{console.warn(`Failed to load stylesheet: ${fn}`)},zr.onload=()=>{console.log(` Loaded stylesheet: ${fn}`)},yr.appendChild(zr)}),Ke){const fn=Ke.matchAll(/@import\s+(?:url\()?['"]?([^'")]+)['"]?\)?/gi);for(const wn of fn){let zr=wn[1];if(!zr.startsWith("http")&&!zr.startsWith("//"))if(zr.startsWith("./")||zr.startsWith("../")){const ne=ot.split("/").filter(Re=>Re),ke=zr.split("/").filter(Re=>Re);for(const Re of ke)Re===".."?ne.pop():Re!=="."&&ne.push(Re);zr=ne.join("/"),zr.startsWith("http")||(zr=ot.replace(/\/[^\/]*$/,"/")+zr)}else zr=ot+zr;if(!Array.from(yr.querySelectorAll('link[rel="stylesheet"]')).find(ne=>ne.href===zr||ne.href.endsWith(zr))&&zr){const ne=mt.createElement("link");ne.rel="stylesheet",ne.href=zr,ne.setAttribute("data-ziplofy-theme","true"),ne.crossOrigin="anonymous",yr.appendChild(ne),console.log(` Added @import stylesheet: ${zr}`)}}}return!0}catch(kr){return console.error("Error injecting CSS:",kr),!1}};let an=0;const En=15,rn=()=>{if(wr()){console.log(" CSS injection successful");return}if(an++,an<En)setTimeout(rn,200);else if(console.error("Failed to inject CSS after multiple retries"),Ke.trim())try{ie.setStyle(Ke),console.log(" Applied CSS via editor.setStyle fallback")}catch(kr){console.error("Failed to set CSS via editor.setStyle:",kr)}};setTimeout(rn,100),setTimeout(rn,300),setTimeout(rn,500),setTimeout(rn,800),setTimeout(rn,1200),setTimeout(rn,2e3),console.log(" Theme loaded into GrapesJS editor")}catch(Fe){throw console.error("Failed to load theme:",Fe),g(Fe?.message||"Failed to load theme. Please check the console for details."),Fe}},[Pe,$e,e]);u.useEffect(()=>{if(!Pe){g("No theme ID provided. Please select a theme to edit."),p(!1);return}return(async()=>{let Fe=0;for(;!o.current&&Fe<10;)await new Promise(We=>setTimeout(We,100)),Fe++;if(!o.current){g("Editor container not found"),p(!1);return}try{p(!0),g(null);const We="https://backend.ziplofy.com/api",Qe=()=>{const ot={},dt=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken")||localStorage.getItem("token")||sessionStorage.getItem("token");return dt&&(ot.Authorization=`Bearer ${dt}`),ot};try{const ot=Pe&&/^[0-9a-fA-F]{24}$/.test(Pe);let dt="";ot&&$e!=="installed"?dt=`${We}/custom-themes/${Pe}`:dt=`${We}/themes/${Pe}`;const Ke=await fetch(dt,{credentials:"include",headers:Qe()});if(Ke.ok){const kt=await Ke.json(),At=kt?.data?.name||kt?.name||"Theme";b(At)}}catch{}let de=document.getElementById("style-panel-wrapper");de||(de=document.createElement("div"),de.id="style-panel-wrapper",de.className="style-panel-content-wrapper",de.style.display="none",document.body.appendChild(de),console.log(" Created style-panel-wrapper element for StyleManager"));const Ee=A6.init({container:o.current,height:"100%",width:"100%",fromElement:!1,storageManager:!1,deviceManager:{devices:[{name:"Desktop",width:""},{name:"Tablet",width:"768px",widthMedia:"992px"},{name:"Mobile",width:"320px",widthMedia:"768px"}]},selectorManager:{componentFirst:!0},styleManager:{appendTo:"#style-panel-wrapper",sectors:[{name:"Layout",open:!0,buildProps:["width","height","min-width","min-height","max-width","max-height","padding","margin","display","position","top","right","bottom","left","z-index"]},{name:"Typography",open:!0,buildProps:["font-family","font-size","font-weight","font-style","text-decoration","text-align","color","line-height","letter-spacing"]},{name:"Background",open:!0,buildProps:["background-color","background-image","background-repeat","background-position","background-size"]},{name:"Border",open:!0,buildProps:["border","border-radius","box-shadow"]},{name:"Extra",open:!0,buildProps:["opacity","cursor","overflow","transition"]}],showComputed:!0},panels:{defaults:[]},canvas:{styles:[]}});i.current=Ee,setTimeout(()=>{if(Ee&&Ee.setDevice){const dt={desktop:"Desktop",tablet:"Tablet",mobile:"Mobile"}[v]||v;Ee.setDevice(dt),console.log(" Initial device set:",dt),setTimeout(()=>{const Ke=Ee.Canvas;if(Ke){const kt=Ke.getCanvasEl?Ke.getCanvasEl():document.querySelector(".gjs-cv-canvas"),At=Ke.getFrameEl();kt&&(kt.style.cssText=`
                    display: flex !important;
                    justify-content: center !important;
                    align-items: flex-start !important;
                    width: 100% !important;
                    height: 100% !important;
                    margin: 0 !important;
                    padding: 24px !important;
                    left: auto !important;
                    right: auto !important;
                  `),At&&(At.style.cssText=`
                    margin: 0 auto !important;
                    display: block !important;
                    left: auto !important;
                    right: auto !important;
                  `)}},200)}},100),Ee.on("change:device",()=>{setTimeout(()=>{const ot=Ee.Canvas;if(ot){const dt=ot.getCanvasEl?ot.getCanvasEl():document.querySelector(".gjs-cv-canvas"),Ke=ot.getFrameEl();dt&&(dt.style.cssText=`
                  display: flex !important;
                  justify-content: center !important;
                  align-items: flex-start !important;
                  width: 100% !important;
                  height: 100% !important;
                  margin: 0 !important;
                  padding: 24px !important;
                  left: auto !important;
                  right: auto !important;
                `),Ke&&(Ke.style.cssText=`
                  margin: 0 auto !important;
                  display: block !important;
                  left: auto !important;
                  right: auto !important;
                `)}},100)}),setTimeout(()=>{const ot=document.querySelector("#style-panel-wrapper");if(ot&&Ee.StyleManager)try{const dt=Ee.StyleManager;dt.setContainer?dt.setContainer(ot):dt.container&&(dt.container.el=ot,dt.container=ot),console.log(" StyleManager container configured:",{wrapperExists:!!ot,wrapperId:ot.id,hasSetContainer:typeof dt.setContainer=="function",hasContainer:!!dt.container})}catch(dt){console.warn("Could not update StyleManager container:",dt)}if(Ee.StyleManager)try{const dt=Ee.StyleManager.getSectors();console.log(" StyleManager available:",{sectors:dt?.length||0,sectorNames:dt?.map(Ke=>Ke.getName?Ke.getName():Ke.name||"Unknown")||[],wrapperExists:!!ot})}catch(dt){console.warn("StyleManager initialization check:",dt)}},500),Ee.on("style:custom",()=>{});const le=()=>{const ot=Ee.UndoManager;ot&&(G(ot.hasUndo()),z(ot.hasRedo()))};Ee.on("update",le),Ee.on("component:update",le),Ee.on("style:update",le);const Ye=ot=>{try{ot&&ot.set&&(ot.set("draggable",!1),ot.set("droppable",!1),ot.set("resizable",!1))}catch{}};Ee.on("component:add",ot=>{Ye(ot),ot.components&&ot.components().forEach(dt=>{Ye(dt)})}),Ee.on("component:drag",ot=>(ot&&ot.stop&&ot.stop(),ot&&ot.preventDefault&&ot.preventDefault(),!1)),Ee.on("component:drag:start",ot=>(ot&&ot.stop&&ot.stop(),ot&&ot.preventDefault&&ot.preventDefault(),!1)),setTimeout(()=>{const ot=Ee.Canvas;if(ot){const dt=ot.getFrameEl();if(dt&&dt.contentDocument){const Ke=dt.contentDocument.createElement("style");Ke.setAttribute("data-ziplofy-disable-drag","true"),Ke.textContent=`
                * {
                  -webkit-user-drag: none !important;
                  -moz-user-drag: none !important;
                  -ms-user-drag: none !important;
                  user-drag: none !important;
                }
                .gjs-selected {
                  cursor: default !important;
                }
                .gjs-dashed * {
                  cursor: default !important;
                }
              `,dt.contentDocument.head.appendChild(Ke)}}},500),setTimeout(()=>{try{const ot=Ee.getWrapper();if(ot){const dt=[],Ke=kt=>{kt&&(dt.push(kt),(kt.components?kt.components():[]).forEach(xt=>Ke(xt)))};Ke(ot),dt.forEach(kt=>{Ye(kt)}),console.log(` Disabled drag on ${dt.length} components`)}}catch(ot){console.warn("Error disabling drag on components:",ot)}},1e3);const ct=ot=>{if(!ot)return null;const dt=ot.getEl();if(!dt)return null;const Ke=dt.tagName?.toLowerCase(),kt=typeof dt.className=="string"?dt.className:dt.className?.baseVal||"",At=dt.id||"",xt=kt.toLowerCase().split(/\s+/).filter(Xt=>Xt);for(const[Xt,br]of Object.entries(IC))for(const zt of br)try{const be=zt.toLowerCase().trim();if(be===Ke)return Xt;if(be.startsWith(".")){const wt=be.substring(1).toLowerCase();if(xt.includes(wt)||kt.toLowerCase().includes(wt))return Xt}if(be.startsWith("#")){const wt=be.substring(1).toLowerCase();if(At.toLowerCase()===wt)return Xt}if(be.includes("["))try{if(dt.matches&&dt.matches(zt))return Xt}catch{}let Be=dt,et=0;for(;Be&&et<5;)try{if(Be.matches&&Be.matches(zt))return Xt;const wt=Be.tagName?.toLowerCase(),$t=(Be.className||"").toString().toLowerCase(),tr=(Be.id||"").toLowerCase();if(be===wt||be.startsWith(".")&&$t.includes(be.substring(1))||be.startsWith("#")&&tr===be.substring(1))return Xt;Be=Be.parentElement,et++}catch{break}}catch{}return Ke==="header"||xt.some(Xt=>Xt.includes("header"))?"Header":Ke==="footer"||xt.some(Xt=>Xt.includes("footer"))?"Footer":Ke==="nav"||xt.some(Xt=>Xt.includes("nav"))?"Header":xt.some(Xt=>Xt.includes("hero"))?"Hero section":xt.some(Xt=>Xt.includes("product")&&Xt.includes("card"))?"Product card":xt.some(Xt=>Xt.includes("product")&&Xt.includes("highlight"))?"Product highlight":null};Ee.on("component:selected",ot=>{console.log(" Component selected:",ot);const Ke=ct(ot)||ot.getName()||ot.get("tagName")||"Selected Element";k(Ke),L(!1),O(!0);const kt=()=>{const At=document.querySelector(".style-editor-panel"),xt=At?.querySelector("#style-panel-wrapper"),Xt=document.getElementById("style-panel-wrapper");if(!xt){console.warn(" React wrapper not found, retrying..."),setTimeout(kt,100);return}if(!Ee.StyleManager){console.error(" StyleManager not available");return}At&&(At.style.display="flex",At.style.visibility="visible",At.style.opacity="1"),xt.style.display="block",xt.style.visibility="visible",xt.style.opacity="1",xt.style.width="100%",xt.style.height="100%";const br=Ee.StyleManager;if(br.container?br.container.el=xt:br.container={el:xt},br.config&&(br.config.appendTo=xt),br.view&&br.view.container&&(br.view.container=xt),Xt){const be=Xt.querySelector(".gjs-sm");be&&be.parentElement===Xt&&(xt.innerHTML="",xt.appendChild(be),console.log(" Moved StyleManager content to React panel"))}if(Ee.select(ot),br.setTarget)try{br.setTarget(ot),console.log(" Set StyleManager target to component")}catch{console.warn("setTarget not available, using default behavior")}xt.innerHTML="";try{br.render(),console.log(" StyleManager.render() called")}catch(be){if(console.error(" Error rendering StyleManager:",be),br.view&&br.view.render)try{br.view.render(),br.view.el&&br.view.el.parentElement!==xt&&xt.appendChild(br.view.el),console.log(" StyleManager view rendered")}catch(Be){console.error(" Error with alternative render:",Be)}}const zt=(be=0)=>{if(!xt.querySelector(".gjs-sm")&&Xt){const wt=Xt.querySelector(".gjs-sm");wt&&(xt.innerHTML="",xt.appendChild(wt),console.log(" Moved StyleManager from static wrapper"))}const et=xt.querySelector(".gjs-sm");if(et){const wt=et.querySelectorAll(".gjs-sm-sector");wt.length>0?(wt.forEach($t=>{const tr=$t;tr.classList.remove("gjs-sm-sector--closed"),tr.classList.add("gjs-sm-sector--open");const Lr=tr.querySelector(".gjs-sm-sector-content");Lr&&(Lr.style.cssText="display: block !important; visibility: visible !important; opacity: 1 !important; max-height: none !important;"),tr.querySelectorAll(".gjs-sm-properties").forEach(bn=>{bn.style.cssText="display: block !important; visibility: visible !important; opacity: 1 !important;"})}),console.log(" StyleManager ready with",wt.length,"sectors")):be<3?setTimeout(()=>zt(be+1),100):(console.warn(" No sectors found after multiple attempts"),setTimeout(()=>{xt.innerHTML="",br.render(),setTimeout(()=>zt(0),200)},200))}else be<3?setTimeout(()=>zt(be+1),100):console.error(" StyleManager element not found after multiple attempts")};setTimeout(()=>zt(0),100),setTimeout(()=>zt(0),300),setTimeout(()=>zt(0),500)};requestAnimationFrame(()=>{setTimeout(kt,150)})}),Ee.on("component:deselected",()=>{console.log(" Component deselected"),O(!1),L(!0),k(null)}),Ee.on("canvas:click",ot=>{console.log("Canvas clicked:",ot)}),Ee.on("component:update",()=>{if(Ee.getSelected()&&N&&(console.log("Component updated, ensuring StyleManager is rendered"),document.querySelector("#style-panel-wrapper")&&Ee.StyleManager))try{Ee.StyleManager.render()}catch(Ke){console.warn("Error re-rendering StyleManager on component update:",Ke)}}),Ee.on("canvas:frame:load",()=>{console.log("Canvas frame loaded, ensuring CSS is injected"),setTimeout(()=>{const ot=Ee.Canvas;if(ot){const dt=ot.getFrameEl();if(dt&&dt.contentDocument){const kt=dt.contentDocument.head;kt&&kt.querySelectorAll("[data-ziplofy-theme]").length===0&&console.log("No CSS found, triggering re-injection...")}}},100)});try{await Ae(Ee)}catch(ot){console.error("Failed to load theme:",ot),g(ot?.message||"Failed to load theme. Please check if the theme exists and you have access to it."),p(!1);return}p(!1)}catch(We){console.error("Failed to initialize editor:",We),g(We?.message||"Failed to initialize editor"),p(!1)}})(),()=>{i.current&&(i.current.destroy(),i.current=null)}},[Pe,Ae]);const ze=u.useCallback(()=>{const ie=i.current;if(!ie||typeof ie.getHtml!="function")return;const Fe=ie.getHtml()||"";let We="";ie.getCss&&(We=ie.getCss()||""),Z(Qe=>{const de=Qe.map(Ee=>Ee.id===ae?{...Ee,html:Fe,css:We}:Ee);return ve.current=de,de})},[ae]),Ge=u.useCallback(async ie=>{if(ie===ae)return;const Fe=i.current;if(!Fe)return;ze();const We=ve.current.find(Qe=>Qe.id===ie);if(!We){console.warn(`Page ${ie} not found`);return}if(Se(ie),Fe.setComponents(We.html),We.css)try{const Qe=Fe.Canvas;if(Qe){const de=Qe.getFrameEl();if(de&&de.contentDocument){const Ee=de.contentDocument,le=Ee.head||Ee.getElementsByTagName("head")[0];if(le){le.querySelectorAll("#ziplofy-theme-styles, style[data-ziplofy-theme]").forEach(ct=>ct.remove());const De=Ee.createElement("style");De.id="ziplofy-theme-styles",De.setAttribute("data-ziplofy-theme","true"),De.textContent=We.css,le.appendChild(De)}}}}catch(Qe){console.error("Error injecting page CSS:",Qe)}O(!1),L(!0),k(null),console.log(` Switched to page: ${We.name}`)},[ae,ze]),Ue=ie=>{xe(Fe=>({...Fe,[ie]:!Fe[ie]}))},ht=ie=>{const Fe=i.current;if(!Fe)return;k(ie);const We=IC[ie]||[],Qe=Fe.getWrapper();if(Qe)for(const de of We)try{const Ee=Qe.find(de)[0];if(Ee){const le=Fe.Canvas.getFrameEl();if(le&&le.contentWindow){const Ye=Ee.getEl();Ye&&le.contentWindow.document.contains(Ye)&&Ye.scrollIntoView({behavior:"smooth",block:"center"})}break}}catch{continue}},ee=(ie,Fe)=>{Fe.stopPropagation();const We=i.current;if(!We)return;k(ie),O(!0),L(!1);const Qe=IC[ie]||[],de=We.getWrapper();if(de)for(const Ee of Qe)try{const le=de.find(Ee)[0];if(le){We.select(le);const Ye=We.Canvas.getFrameEl();if(Ye&&Ye.contentWindow){const De=le.getEl();De&&Ye.contentWindow.document.contains(De)&&De.scrollIntoView({behavior:"smooth",block:"center"})}break}}catch{continue}};u.useEffect(()=>{const ie=i.current;if(!ie){console.warn("Editor not available for device change");return}const We={desktop:"Desktop",tablet:"Tablet",mobile:"Mobile"}[v]||v;console.log(" Changing device to:",We);try{ie.setDevice&&typeof ie.setDevice=="function"?(ie.setDevice(We),console.log(" Device set via API:",We),ie.refresh&&ie.refresh(),ie.trigger&&ie.trigger("canvas:frame:load"),setTimeout(()=>{const Qe=ie.Canvas;if(!Qe){console.warn("Canvas not available");return}const de=Qe.getFrameEl(),Ee=document.querySelector(".gjs-cv-canvas");Ee&&(Ee.style.cssText=`
              display: flex !important;
              justify-content: center !important;
              align-items: flex-start !important;
              width: 100% !important;
              height: 100% !important;
              margin: 0 !important;
              padding: 24px !important;
              left: auto !important;
              right: auto !important;
            `),de&&(de.style.cssText=`
              margin: 0 auto !important;
              display: block !important;
              left: auto !important;
              right: auto !important;
            `);try{const le=ie.getDevice?ie.getDevice():null;le&&(console.log(" Device verification - Current:",le,"Expected:",We),le!==We&&(console.warn(" Device mismatch, retrying..."),setTimeout(()=>{ie.setDevice(We),ie.refresh&&ie.refresh()},100)))}catch{console.log("Device verification skipped (getDevice not available)")}},100)):console.error(" setDevice method not available on editor")}catch(Qe){console.error(" Error setting device:",Qe)}},[v]),u.useEffect(()=>{if(N){const ie=i.current;ie&&ie.StyleManager&&setTimeout(()=>{const We=document.querySelector("#style-panel-wrapper")||document.querySelector(".style-panel-content-wrapper");if(We)try{const Qe=ie.getSelected();if(!Qe){console.warn("No component selected, cannot render StyleManager");return}const de=document.querySelector(".style-editor-panel"),le=de?.querySelector("#style-panel-wrapper")||We;de&&(de.style.display="flex",de.style.visibility="visible",de.style.opacity="1"),le.style.display="block",le.style.visibility="visible",le.style.opacity="1",le.style.width="100%",le.style.height="100%";const Ye=ie.StyleManager;if(Ye.container?Ye.container.el=le:Ye.container={el:le},Ye.config&&(Ye.config.appendTo=le),Ye.view&&Ye.view.container&&(Ye.view.container=le),ie.select(Qe),Ye.setTarget)try{Ye.setTarget(Qe),console.log(" Set StyleManager target to component")}catch{console.warn("setTarget not available, using default behavior")}le.innerHTML="";try{Ye.render(),console.log(" StyleManager.render() called in useEffect")}catch(ct){if(console.error(" Error rendering StyleManager:",ct),Ye.view&&Ye.view.render)try{Ye.view.render(),Ye.view.el&&Ye.view.el.parentElement!==le&&le.appendChild(Ye.view.el),console.log(" StyleManager view rendered")}catch(ot){console.error(" Error with alternative render:",ot)}}const De=(ct=0)=>{const ot=le.querySelector(".gjs-sm");if(ot){const dt=ot.querySelectorAll(".gjs-sm-sector");dt.length>0?(dt.forEach(Ke=>{const kt=Ke;kt.classList.remove("gjs-sm-sector--closed"),kt.classList.add("gjs-sm-sector--open");const At=kt.querySelector(".gjs-sm-sector-content");At&&(At.style.cssText="display: block !important; visibility: visible !important; opacity: 1 !important; max-height: none !important;"),kt.querySelectorAll(".gjs-sm-properties").forEach(Xt=>{Xt.style.cssText="display: block !important; visibility: visible !important; opacity: 1 !important;"})}),console.log(" StyleManager ready with",dt.length,"sectors")):ct<3&&setTimeout(()=>De(ct+1),100)}else ct<3?setTimeout(()=>De(ct+1),100):(console.warn(" StyleManager element not found after multiple attempts, forcing re-render"),le.innerHTML="",Ye.render(),setTimeout(()=>De(0),200))};setTimeout(()=>De(0),100),setTimeout(()=>De(0),300),setTimeout(()=>De(0),500)}catch(Qe){console.error("Error rendering StyleManager:",Qe)}},100)}},[N]);const ue=()=>{const ie=i.current;ie&&ie.UndoManager.undo()},Oe=()=>{const ie=i.current;ie&&ie.UndoManager.redo()},J=u.useCallback(ie=>new Promise(Fe=>{const We=document.createElement("canvas");We.width=800,We.height=600;const Qe=We.getContext("2d");if(!Qe){const De=`<svg xmlns="http://www.w3.org/2000/svg" width="800" height="600">
          <defs>
            <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
              <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
            </linearGradient>
          </defs>
          <rect width="800" height="600" fill="url(#grad)"/>
          <text x="400" y="280" font-family="Arial, sans-serif" font-size="48" font-weight="bold" fill="white" text-anchor="middle">${ie}</text>
          <text x="400" y="340" font-family="Arial, sans-serif" font-size="24" fill="rgba(255,255,255,0.9)" text-anchor="middle">Custom Theme</text>
        </svg>`,ct=new Blob([De],{type:"image/svg+xml"});Fe(ct);return}const de=Qe.createLinearGradient(0,0,We.width,We.height);de.addColorStop(0,"#667eea"),de.addColorStop(1,"#764ba2"),Qe.fillStyle=de,Qe.fillRect(0,0,We.width,We.height),Qe.fillStyle="rgba(255, 255, 255, 0.1)",Qe.beginPath(),Qe.arc(100,100,60,0,Math.PI*2),Qe.fill(),Qe.beginPath(),Qe.arc(700,500,80,0,Math.PI*2),Qe.fill(),Qe.beginPath(),Qe.arc(650,100,40,0,Math.PI*2),Qe.fill(),Qe.fillStyle="#ffffff",Qe.font="bold 56px Arial, sans-serif",Qe.textAlign="center",Qe.textBaseline="middle";const Ee=700;let le=56,Ye=Qe.measureText(ie).width;Ye>Ee&&(le=Ee/Ye*le,Qe.font=`bold ${le}px Arial, sans-serif`),Qe.fillText(ie,We.width/2,We.height/2-30),Qe.font="24px Arial, sans-serif",Qe.fillStyle="rgba(255, 255, 255, 0.9)",Qe.fillText("Custom Theme",We.width/2,We.height/2+40),We.toBlob(De=>{if(De)Fe(De);else{const ct=`<svg xmlns="http://www.w3.org/2000/svg" width="800" height="600">
            <defs>
              <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
              </linearGradient>
            </defs>
            <rect width="800" height="600" fill="url(#grad)"/>
            <text x="400" y="280" font-family="Arial, sans-serif" font-size="48" font-weight="bold" fill="white" text-anchor="middle">${ie}</text>
            <text x="400" y="340" font-family="Arial, sans-serif" font-size="24" fill="rgba(255,255,255,0.9)" text-anchor="middle">Custom Theme</text>
          </svg>`;Fe(new Blob([ct],{type:"image/svg+xml"}))}},"image/png")}),[]),I=u.useCallback(ie=>{try{return JSON.stringify(ie).replace(/</g,"\\u003c").replace(/>/g,"\\u003e").replace(/&/g,"\\u0026")}catch(Fe){return console.error("Error encoding pages data:",Fe),"[]"}},[]),V=u.useCallback((ie,Fe,We)=>{const Qe=(Fe||"Ziplofy Theme").replace(/</g,"&lt;").replace(/>/g,"&gt;"),de=I(ie);return`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>${Qe}</title>
  <style>
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      line-height: 1.6;
      color: #1e1e1e;
      background: #ffffff;
    }
    * {
      box-sizing: border-box;
    }
    .ziplofy-page {
      display: none;
      width: 100%;
      min-height: 100vh;
    }
    .ziplofy-page.active {
      display: block;
    }
    .ziplofy-page > .gjs-wrapper-body,
    .ziplofy-page.gjs-wrapper-body {
      width: 100%;
      min-height: 100vh;
    }
    ${We||""}
  </style>
</head>
<body>
  <div id="ziplofy-page-container"></div>
  <script id="ziplofy-pages-data" type="application/json">${de}<\/script>
  <script>
    (function() {
      try {
        const container = document.getElementById('ziplofy-page-container');
        const dataEl = document.getElementById('ziplofy-pages-data');
        if (!container || !dataEl) return;
        const pagesText = dataEl.textContent || dataEl.innerText || '[]';
        const pages = JSON.parse(pagesText);
        const normalizeId = function(value) {
          if (value === null || value === undefined) return '';
          return String(value).replace(/^#/, '').trim();
        };
        const renderPages = function() {
          container.innerHTML = '';
          pages.forEach(function(page, index) {
            const wrapper = document.createElement('div');
            wrapper.className = 'ziplofy-page gjs-wrapper-body' + (index === 0 ? ' active' : '');
            wrapper.setAttribute('data-page-id', page.id || ('page-' + (index + 1)));
            wrapper.style.display = index === 0 ? 'block' : 'none';
            wrapper.innerHTML = page.html || '';
            container.appendChild(wrapper);
          });
        };
        const showPage = function(pageId) {
          const normalizedRequest = normalizeId(pageId);
          if (!normalizedRequest) return false;
          const pages = document.querySelectorAll('.ziplofy-page');
          let found = false;
          pages.forEach(function(pageEl) {
            const pageIdAttr = pageEl.getAttribute('data-page-id');
            const normalizedPageId = normalizeId(pageIdAttr);
            if (normalizedPageId === normalizedRequest) {
              pageEl.classList.add('active');
              pageEl.style.display = 'block';
              found = true;
            } else {
              pageEl.classList.remove('active');
              pageEl.style.display = 'none';
            }
          });
          return found;
        };
        renderPages();
        const hashChange = function() {
          const hash = window.location.hash.replace(/^#/, '');
          if (hash) {
            showPage(hash);
          } else {
            showPage(pages[0]?.id || 'page-1');
          }
        };
        window.addEventListener('hashchange', hashChange);
        hashChange();
      } catch (e) {
        console.error('Error initializing pages:', e);
      }
    })();
  <\/script>
</body>
</html>`},[I]);u.useCallback((ie,Fe,We)=>{const Qe=(We||"Ziplofy Theme").replace(/</g,"&lt;").replace(/>/g,"&gt;"),de=Fe.split(`
`),Ee=[],le=[];de.forEach(De=>{const ct=De.trim();ct.startsWith("@import")?Ee.push(ct):le.push(De)});const Ye=Ee.join(`
`)+(Ee.length>0?`

`:"")+le.join(`
`);return`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>${Qe}</title>
  <style>
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      line-height: 1.6;
      color: #1e1e1e;
      background: #ffffff;
    }
    * {
      box-sizing: border-box;
    }
    ${Ye}
  </style>
</head>
<body>
  ${ie}
</body>
</html>`},[]);const re=u.useCallback(async ie=>{try{const Fe=i.current;if(!Fe){alert("Editor not ready");return}M(!0),await new Promise(zt=>requestAnimationFrame(zt)),await new Promise(zt=>setTimeout(zt,150)),Fe.trigger&&Fe.trigger("update");const We=Fe.getWrapper();We&&We.view&&We.view.render?.();let Qe="";try{We?(Qe=Fe.getHtml({component:We})||"",(!Qe||Qe.trim().length===0)&&(Qe=Fe.getHtml()||"")):Qe=Fe.getHtml()||"",(!Qe||Qe.trim().length===0)&&(console.warn(" No HTML from editor, using default"),Qe="<div>Empty Theme</div>")}catch(zt){console.error("Error getting HTML from editor:",zt),Qe=Fe.getHtml()||"<div>Empty Theme</div>"}let de="";const Ee=[];try{if(Fe.getCss){const zt=Fe.getCss()||"";zt&&zt.trim().length>0&&(Ee.push(zt),console.log(" Method 1 - Standard getCss():",zt.length,"chars"))}}catch(zt){console.warn("Error getting CSS from editor.getCss():",zt)}try{if(Fe.CssComposer){const zt=Fe.CssComposer.getAll();if(zt&&zt.length>0){const be=zt.map(Be=>{try{if(Be.toCSS)return Be.toCSS();const et=Be.selectorsToString?Be.selectorsToString():Be.getSelectors?Be.getSelectors().join(", "):"",wt=Be.getStyle?Be.getStyle():{};if(et&&wt&&Object.keys(wt).length>0){const $t=Object.entries(wt).map(([tr,Lr])=>`  ${tr}: ${Lr};`).join(`
`);return`${et} {
${$t}
}`}return""}catch{return""}}).filter(Boolean).join(`

`);be&&be.trim().length>0&&(Ee.push(be),console.log(" Method 2 - CssComposer:",be.length,"chars"))}}}catch(zt){console.warn("Failed to get CSS from CssComposer:",zt)}if(de=Ee.join(`

`),We){const zt=We.getId();if(zt&&de.includes(`#${zt}`)){console.log(` Converting wrapper ID selector #${zt} to class .gjs-wrapper-body`);const be=new RegExp(`#${zt}(?![a-zA-Z0-9_-])`,"g");de=de.replace(be,".gjs-wrapper-body"),console.log(" Converted wrapper selectors to class-based")}}try{if(We){const zt=We.getStyle?We.getStyle():null;if(zt&&Object.keys(zt).length>0){const Be=`.gjs-wrapper-body {
${Object.entries(zt).map(([et,wt])=>`  ${et}: ${wt};`).join(`
`)}
}`;de.includes(".gjs-wrapper-body")?de=de.replace(/\.gjs-wrapper-body\s*\{[^}]*\}/g,Be):de=Be+`

`+de,console.log(" Method 3 - Wrapper styles:",Object.keys(zt).length,"properties")}}}catch(zt){console.warn("Failed to extract wrapper styles:",zt)}try{const zt=Fe.Canvas;if(zt){const be=zt.getFrameEl();if(be&&be.contentDocument){const Be=be.contentDocument,et=Be.querySelectorAll("style"),wt=[];et.forEach(Fr=>{Fr.textContent&&Fr.textContent.trim()&&wt.push(Fr.textContent)}),wt.length>0&&(de+=`

/* Canvas Frame Style Tags */
`+wt.join(`

`),console.log(" Method 4a - Canvas frame style tags:",et.length));const $t=Be.querySelectorAll('link[rel="stylesheet"]'),tr=()=>{const Fr={},rr=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken")||localStorage.getItem("token")||sessionStorage.getItem("token");return rr&&(Fr.Authorization=`Bearer ${rr}`),Fr},Lr=Array.from($t).map(async Fr=>{const wr=Fr.href;if(wr&&!wr.startsWith("data:"))try{const an=await fetch(wr,{credentials:"include",headers:tr()});if(an.ok)return await an.text()||""}catch(an){return console.warn("Failed to fetch stylesheet:",wr,an),`@import url('${wr}');`}return""}),bn=(await Promise.all(Lr)).filter(Fr=>Fr.trim()).join(`

`);bn&&(de+=`

/* Canvas Frame External Stylesheets */
`+bn,console.log(" Method 4b - Canvas frame stylesheets:",$t.length));try{if(Be.body){const rr=Array.from(Be.styleSheets),wr=[];rr.forEach(an=>{try{an.cssRules&&Array.from(an.cssRules).forEach(En=>{En.cssText&&wr.push(En.cssText)})}catch{}}),wr.length>0&&(de+=`

/* Computed Stylesheet Rules */
`+wr.join(`

`),console.log(" Method 4c - Computed stylesheet rules:",wr.length))}}catch(Fr){console.warn("Failed to extract computed stylesheet rules:",Fr)}}}}catch(zt){console.warn("Failed to get CSS from canvas frame:",zt)}if(l.current&&l.current.trim().length>0){const zt=l.current.split(`
`),be=[],Be=[];zt.forEach(wt=>{const $t=wt.trim();$t.startsWith("@import")?be.push($t):Be.push(wt)}),de=be.join(`
`)+(be.length>0?`

`:"")+Be.join(`
`)+`

/* GrapesJS Editor Styles */
`+de,de=de.replace(/color\s*:\s*#000000\s*;?/gi,"/* color removed - using original theme color */"),de=de.replace(/color\s*:\s*black\s*;?/gi,"/* color removed - using original theme color */"),de=de.replace(/color\s*:\s*rgb\(0,\s*0,\s*0\)\s*;?/gi,"/* color removed - using original theme color */"),console.log(" Method 5 - Original theme CSS:",l.current.length,"chars",{imports:be.length,regularCss:Be.length})}if((!de||de.trim().length===0)&&(console.warn(" WARNING: No CSS found! Using original theme CSS if available."),de=l.current||""),de.trim().length===0)throw console.error(" ERROR: No CSS content to save!"),new Error("No CSS content found. Cannot save theme without CSS.");const le={totalLength:de.length,hasOriginalCss:l.current&&l.current.length>0,originalCssLength:l.current?.length||0,hasImports:de.includes("@import"),hasWrapperStyles:de.includes(".gjs-wrapper-body"),hasBackgroundImages:de.includes("background-image")||de.includes("background:"),lineCount:de.split(`
`).length,preview:de.substring(0,500)};console.log(" Final CSS Statistics:",le),console.log(" Final CSS length:",de.length,"chars"),de.length<100&&console.warn(" WARNING: CSS content is very short. Theme may not display correctly.");const Ye=zt=>{const be=[],Be=/<img[^>]+src=["']([^"']+)["']/gi,et=/srcset=["']([^"']+)["']/gi,wt=/background-image\s*:\s*url\(["']?([^"')]+)["']?\)/gi;let $t;for(;($t=Be.exec(zt))!==null;){const tr=$t[1];tr&&!tr.startsWith("http")&&!tr.startsWith("data:")&&!tr.startsWith("#")&&!tr.startsWith("mailto:")&&be.push(tr)}for(;($t=et.exec(zt))!==null;)$t[1].split(",").forEach(Lr=>{const tn=Lr.trim().split(/\s+/)[0];tn&&!tn.startsWith("http")&&!tn.startsWith("data:")&&!tn.startsWith("#")&&be.push(tn)});for(;($t=wt.exec(zt))!==null;){const tr=$t[1];tr&&!tr.startsWith("http")&&!tr.startsWith("data:")&&!tr.startsWith("#")&&be.push(tr)}return[...new Set(be.map(tr=>tr.startsWith("/")?tr.substring(1):tr))]};ze();const De=ve.current.map(zt=>zt.id===ae?{...zt,html:Qe,css:de}:zt),ct=De.map(zt=>zt.css||"").filter(Boolean).join(`

`),ot=V(De,y||"My Theme",ct),dt=ot.match(/<style[^>]*>([\s\S]*?)<\/style>/i),Ke=dt?dt[1].length:0;if(console.log(" Built export HTML:",{htmlLength:ot.length,cssLength:de.length,embeddedCssLength:Ke,cssEmbedded:Ke>0,htmlPreview:ot.substring(0,300),cssPreview:de.substring(0,200)}),Ke===0)throw console.error(" ERROR: CSS was not embedded in HTML document!"),new Error("CSS embedding failed. Cannot save theme without CSS.");Ke<de.length*.9&&console.warn(" WARNING: CSS length mismatch. Some CSS may be missing from HTML.");const kt=Ye(ot);console.log(" Found image references:",kt);const At=await J(y||"My Theme"),xt=Pe&&/^[0-9a-fA-F]{24}$/.test(Pe),Xt=$e==="installed";let br=Pe||"";if(xt&&!Xt)try{const zt=await a(Pe,y||"My Theme",ot,de,At);if(zt)br=zt._id;else{const be=await t(y||"My Theme",ot,de,At);if(be){br=be._id;const Be=new URL(window.location.href);Be.searchParams.set("id",br),Be.searchParams.delete("type"),window.history.replaceState({},"",Be.toString())}}}catch(zt){if(zt?.response?.status===404){const be=await t(y||"My Theme",ot,de,At);if(be){br=be._id;const Be=new URL(window.location.href);Be.searchParams.set("id",br),Be.searchParams.delete("type"),window.history.replaceState({},"",Be.toString())}}else throw zt}else{console.log("Creating new theme...",{name:y||"My Theme",htmlLength:ot.length,cssLength:de.length,hasThumbnail:!!At});const zt=await t(y||"My Theme",ot,de,At);if(!zt)throw console.error("createTheme returned null - check console for error details"),new Error("Failed to create theme. Check console for details.");br=zt._id;const be=new URL(window.location.href);be.searchParams.set("id",br),be.searchParams.delete("type"),window.history.replaceState({},"",be.toString())}M(!1),ie&&(localStorage.setItem("ziplofy.appliedCustomThemeId",br),P(!0),setTimeout(()=>P(!1),3e3))}catch(Fe){M(!1),console.error("Error saving theme:",Fe),console.error("Error details:",{message:Fe?.message,response:Fe?.response,status:Fe?.response?.status,data:Fe?.response?.data,code:Fe?.code});let We="Failed to save theme";Fe?.code==="ECONNABORTED"||Fe?.message?.includes("timeout")?We="Upload timeout: The theme is very large. Please try again or reduce the theme size.":Fe?.response?.status===400?(We=Fe?.response?.data?.message||"Bad Request: Invalid theme data. Please check the console for details.",console.error("400 Bad Request details:",Fe?.response?.data)):Fe?.response?.status===500?We="Server error: The theme might be too large or there was a server issue. Please try again or reduce the theme size.":Fe?.response?.status===413||Fe?.message?.includes("File too large")||Fe?.message?.includes("MulterError")?We="Theme too large: The theme exceeds the maximum size limit (500MB). Please reduce the size of your theme content.":Fe?.response?.data?.message?We=Fe.response.data.message:Fe?.message&&(We=Fe.message),alert(We)}},[Pe,$e,y,t,a,V,J,ze,ae]),pe=()=>{re(!1)},ge=()=>{re(!0)},Ce=u.useCallback(async()=>{try{const ie=i.current;if(!ie||typeof ie.getHtml!="function"){alert("Editor not ready");return}ie.trigger&&ie.trigger("update");const Fe=ie.getWrapper();Fe&&Fe.view&&Fe.view.render?.();let We="";try{Fe?(We=ie.getHtml({component:Fe})||"",(!We||We.trim().length===0)&&(We=ie.getHtml()||"")):We=ie.getHtml()||"",(!We||We.trim().length===0)&&(console.warn(" No HTML from editor, using default"),We="<div>Empty Theme</div>")}catch(De){console.error("Error getting HTML from editor:",De),We=ie.getHtml()||"<div>Empty Theme</div>"}let Qe="";const de=[];try{if(ie.getCss){const De=ie.getCss()||"";De&&De.trim().length>0&&de.push(De)}}catch(De){console.warn("Error getting CSS from editor.getCss():",De)}try{if(ie.CssComposer){const De=ie.CssComposer.getAll();if(De&&De.length>0){const ct=De.map(ot=>{try{if(ot.toCSS)return ot.toCSS();const dt=ot.selectorsToString?ot.selectorsToString():ot.getSelectors?ot.getSelectors().join(", "):"",Ke=ot.getStyle?ot.getStyle():{};if(dt&&Ke&&Object.keys(Ke).length>0){const kt=Object.entries(Ke).map(([At,xt])=>`  ${At}: ${xt};`).join(`
`);return`${dt} {
${kt}
}`}return""}catch{return""}}).filter(Boolean).join(`

`);ct&&ct.trim().length>0&&de.push(ct)}}}catch(De){console.warn("Failed to get CSS from CssComposer:",De)}if(Qe=de.join(`

`),Fe){const De=Fe.getId();if(De&&Qe.includes(`#${De}`)){const ct=new RegExp(`#${De}(?![a-zA-Z0-9_-])`,"g");Qe=Qe.replace(ct,".gjs-wrapper-body")}}try{if(Fe){const De=Fe.getStyle?Fe.getStyle():null;if(De&&Object.keys(De).length>0){const ot=`.gjs-wrapper-body {
${Object.entries(De).map(([dt,Ke])=>`  ${dt}: ${Ke};`).join(`
`)}
}`;Qe.includes(".gjs-wrapper-body")?Qe=Qe.replace(/\.gjs-wrapper-body\s*\{[^}]*\}/g,ot):Qe=ot+`

`+Qe}}}catch(De){console.warn("Failed to extract wrapper styles:",De)}try{const De=ie.Canvas;if(De){const ct=De.getFrameEl();if(ct&&ct.contentDocument){const ot=ct.contentDocument,dt=ot.querySelectorAll("style"),Ke=[];dt.forEach(zt=>{zt.textContent&&zt.textContent.trim()&&Ke.push(zt.textContent)}),Ke.length>0&&(Qe+=`

/* Canvas Frame Style Tags */
`+Ke.join(`

`));const kt=ot.querySelectorAll('link[rel="stylesheet"]'),At=()=>{const zt={},be=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken")||localStorage.getItem("token")||sessionStorage.getItem("token");return be&&(zt.Authorization=`Bearer ${be}`),zt},xt=Array.from(kt).map(async zt=>{const Be=zt.href;if(Be&&!Be.startsWith("data:"))try{const et=await fetch(Be,{credentials:"include",headers:At()});if(et.ok)return await et.text()||""}catch(et){return console.warn("Failed to fetch stylesheet:",Be,et),`@import url('${Be}');`}return""}),br=(await Promise.all(xt)).filter(zt=>zt.trim()).join(`

`);br&&(Qe+=`

/* Canvas Frame External Stylesheets */
`+br)}}}catch(De){console.warn("Failed to get CSS from canvas frame:",De)}if(l.current&&l.current.trim().length>0){const De=l.current.split(`
`),ct=[],ot=[];De.forEach(Ke=>{const kt=Ke.trim();kt.startsWith("@import")?ct.push(kt):ot.push(Ke)}),Qe=ct.join(`
`)+(ct.length>0?`

`:"")+ot.join(`
`)+`

/* GrapesJS Editor Styles */
`+Qe}(!Qe||Qe.trim().length===0)&&(Qe=l.current||""),ze();const Ee=ve.current.map(De=>De.id===ae?{...De,html:We,css:Qe}:De),le=Ee.map(De=>De.css||"").filter(Boolean).join(`

`),Ye=V(Ee,y||"Theme Preview",le);console.log(" Preview HTML built:",{htmlLength:Ye.length,cssLength:Qe.length,containsCss:Ye.includes("<style>")}),se(""),setTimeout(()=>{se(Ye),D(!0),setTimeout(()=>{const De=document.getElementById("basic-elementor-preview-iframe");De&&De.contentDocument&&Ye&&(De.contentDocument.open(),De.contentDocument.write(Ye),De.contentDocument.close(),console.log(" Forced iframe content update"))},100)},50)}catch(ie){console.error("Preview error:",ie),alert("Failed to preview theme")}},[y,V,l,ae,ze]),he=["Hero section","Logo banner","Collection list: Grid","Product highlight","Product card","Featured collection","Collection list: Carousel","Marquee"];return n.jsxs("div",{className:"basic-elementor-container",children:[n.jsxs("div",{className:"basic-elementor-toolbar",children:[n.jsxs("div",{className:"toolbar-left",children:[n.jsx("button",{onClick:()=>r("/themes/all-themes"),className:"back-button",children:" Back"}),n.jsx("div",{className:"theme-name",children:y||"Editing Theme"}),K.length>1&&n.jsx("div",{className:"page-dropdown-wrapper",children:n.jsx("select",{value:ae,onChange:ie=>Ge(ie.target.value),className:"page-dropdown",title:"Select page",children:K.map(ie=>n.jsx("option",{value:ie.id,children:ie.name},ie.id))})})]}),n.jsx("div",{className:"toolbar-center",children:n.jsxs("div",{className:"device-selector",children:[n.jsx("button",{className:`device-btn ${v==="desktop"?"active":""}`,onClick:ie=>{ie.preventDefault(),ie.stopPropagation();const Fe=ie.nativeEvent;Fe&&typeof Fe.stopImmediatePropagation=="function"&&Fe.stopImmediatePropagation(),console.log(" Desktop button clicked"),v!=="desktop"&&w("desktop")},title:"Desktop View",type:"button","aria-label":"Switch to Desktop View",children:n.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[n.jsx("rect",{x:"2",y:"3",width:"12",height:"9",rx:"1",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),n.jsx("path",{d:"M5 12h6",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}),n.jsx("button",{className:`device-btn ${v==="tablet"?"active":""}`,onClick:ie=>{ie.preventDefault(),ie.stopPropagation();const Fe=ie.nativeEvent;Fe&&typeof Fe.stopImmediatePropagation=="function"&&Fe.stopImmediatePropagation(),console.log(" Tablet button clicked"),v!=="tablet"&&w("tablet")},title:"Tablet View",type:"button","aria-label":"Switch to Tablet View",children:n.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:n.jsx("rect",{x:"4",y:"2",width:"8",height:"12",rx:"1",stroke:"currentColor",strokeWidth:"1.5",fill:"none"})})}),n.jsx("button",{className:`device-btn ${v==="mobile"?"active":""}`,onClick:ie=>{ie.preventDefault(),ie.stopPropagation();const Fe=ie.nativeEvent;Fe&&typeof Fe.stopImmediatePropagation=="function"&&Fe.stopImmediatePropagation(),console.log(" Mobile button clicked"),v!=="mobile"&&w("mobile")},title:"Mobile View",type:"button","aria-label":"Switch to Mobile View",children:n.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[n.jsx("rect",{x:"5",y:"1",width:"6",height:"14",rx:"1",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),n.jsx("circle",{cx:"8",cy:"13",r:"1",fill:"currentColor"})]})})]})}),n.jsxs("div",{className:"toolbar-right",children:[n.jsx("button",{onClick:ue,className:"toolbar-btn",title:"Undo",children:n.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:n.jsx("path",{d:"M3 8h8M3 8l3-3M3 8l3 3",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),n.jsx("button",{onClick:Oe,className:"toolbar-btn",title:"Redo",children:n.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:n.jsx("path",{d:"M13 8H5M13 8l-3-3M13 8l-3 3",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),n.jsx("button",{onClick:Ce,className:"preview-btn",title:"Preview Theme",children:"Preview"}),n.jsx("button",{onClick:pe,className:"save-btn",disabled:Y,children:Y?"Saving...":"Save"}),n.jsx("button",{onClick:ge,className:"publish-btn",disabled:Y,children:Y?q?"Published!":"Publishing...":q?"Published!":"Publish"}),q&&n.jsx("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"8px",padding:"8px 16px",background:"#008060",color:"white",borderRadius:"6px",fontSize:"13px",whiteSpace:"nowrap",zIndex:1e3},children:"Theme published successfully!"})]})]}),n.jsxs("div",{className:"basic-elementor-content",children:[R&&!N&&n.jsxs("div",{className:"basic-elementor-sidebar",children:[n.jsx("div",{className:"sidebar-section",children:n.jsx("div",{className:"sidebar-title",children:"Home page"})}),n.jsxs("div",{className:"sidebar-section",children:[n.jsxs("div",{className:"sidebar-section-header",onClick:()=>Ue("header"),children:[n.jsx("span",{className:"section-title",children:"Header"}),n.jsx("span",{className:"section-toggle",children:Q.header?"":""})]}),Q.header&&n.jsxs("div",{className:"sidebar-section-content",children:[n.jsxs("div",{className:`section-item ${C==="Header"?"selected":""}`,onClick:()=>ht("Header"),children:[n.jsx("span",{children:"Header"}),n.jsx("button",{className:"section-edit-btn",onClick:ie=>ee("Header",ie),title:"Edit styles",children:"Edit"})]}),n.jsx("button",{className:"add-section-btn",children:"Add section"})]})]}),n.jsxs("div",{className:"sidebar-section",children:[n.jsxs("div",{className:"sidebar-section-header",onClick:()=>Ue("template"),children:[n.jsx("span",{className:"section-title",children:"Template"}),n.jsx("span",{className:"section-toggle",children:Q.template?"":""})]}),Q.template&&n.jsxs("div",{className:"sidebar-section-content",children:[he.map((ie,Fe)=>n.jsxs("div",{className:`section-item ${C===ie?"selected":""}`,onClick:()=>ht(ie),children:[n.jsx("span",{children:ie}),n.jsx("button",{className:"section-edit-btn",onClick:We=>ee(ie,We),title:"Edit styles",children:"Edit"})]},Fe)),n.jsx("button",{className:"add-section-btn",children:"Add section"})]})]}),n.jsxs("div",{className:"sidebar-section",children:[n.jsxs("div",{className:"sidebar-section-header",onClick:()=>Ue("footer"),children:[n.jsx("span",{className:"section-title",children:"Footer"}),n.jsx("span",{className:"section-toggle",children:Q.footer?"":""})]}),Q.footer&&n.jsxs("div",{className:"sidebar-section-content",children:[n.jsxs("div",{className:`section-item ${C==="Footer"?"selected":""}`,onClick:()=>ht("Footer"),children:[n.jsx("span",{children:"Footer"}),n.jsx("button",{className:"section-edit-btn",onClick:ie=>ee("Footer",ie),title:"Edit styles",children:"Edit"})]}),n.jsxs("div",{className:`section-item ${C==="Logo"?"selected":""}`,onClick:()=>ht("Logo"),children:[n.jsx("span",{children:"Logo"}),n.jsx("button",{className:"section-edit-btn",onClick:ie=>ee("Logo",ie),title:"Edit styles",children:"Edit"})]}),n.jsx("button",{className:"add-section-btn",children:"Add section"})]})]})]}),N&&n.jsxs("div",{className:"style-editor-panel",children:[n.jsxs("div",{className:"style-panel-header",children:[n.jsx("button",{className:"back-to-structure-btn",onClick:()=>{O(!1),L(!0);const ie=i.current;ie&&ie.select(null)},title:"Back to Structure",children:" Back"}),n.jsx("div",{children:n.jsxs("h3",{children:["Styles",C?`: ${C}`:""]})})]}),n.jsx("div",{className:"style-panel-content-wrapper",id:"style-panel-wrapper"})]}),n.jsxs("div",{className:"basic-elementor-preview",children:[d&&n.jsxs("div",{className:"loading-overlay",children:[n.jsx("div",{className:"loading-spinner"}),n.jsx("div",{children:"Loading theme..."})]}),h&&n.jsx("div",{className:"error-overlay",children:n.jsx("div",{children:h})}),n.jsx("div",{ref:o,id:"gjs-editor-container",style:{height:"100%",width:"100%",minHeight:0,position:"relative"}})]})]}),H&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e5,background:"rgba(0, 0, 0, 0.9)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},onClick:()=>D(!1),children:n.jsxs("div",{style:{width:"95%",height:"95%",background:"#fff",borderRadius:"8px",display:"flex",flexDirection:"column",position:"relative"},onClick:ie=>ie.stopPropagation(),children:[n.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",background:"#f9fafb",borderRadius:"8px 8px 0 0"},children:[n.jsx("h3",{style:{margin:0,fontSize:"16px",fontWeight:600,color:"#111827"},children:"Theme Preview"}),n.jsx("button",{onClick:()=>D(!1),style:{padding:"6px 12px",border:"1px solid #d1d5da",background:"#fff",color:"#111827",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Close"})]}),n.jsx("iframe",{id:"basic-elementor-preview-iframe",srcDoc:X,style:{width:"100%",height:"100%",border:"none",background:"#fff",flex:1},title:"Theme Preview",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-presentation",onLoad:ie=>{const Fe=ie.target;Fe&&Fe.contentDocument&&X&&(Fe.contentDocument.open(),Fe.contentDocument.write(X),Fe.contentDocument.close())}},`preview-${Date.now()}-${X.length}`)]})})]})},gte="modulepreload",yte=function(s){return"/"+s},RT={},up=function(r,e,t){let a=Promise.resolve();if(e&&e.length>0){let c=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=i?.nonce||i?.getAttribute("nonce");a=c(e.map(d=>{if(d=yte(d),d in RT)return;RT[d]=!0;const p=d.endsWith(".css"),h=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const g=document.createElement("link");if(g.rel=p?"stylesheet":gte,p||(g.as="script"),g.crossOrigin="",g.href=d,l&&g.setAttribute("nonce",l),document.head.appendChild(g),p)return new Promise((y,b)=>{g.addEventListener("load",y),g.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return a.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return r().catch(o)})},_h=[{id:"getting-started",title:"Getting Started",icon:"",description:"Welcome to the Elementor Builder! Start building your theme by dragging elements from the left panel.",steps:["Browse elements in the left panel","Drag and drop elements onto the canvas","Click on elements to select and edit them","Use the right panel to style your elements"],arrowTarget:"#blocks-panel",cardPosition:"right",arrowPosition:"left"},{id:"elements-panel",title:"Elements Panel",icon:"",description:"The left panel contains all available elements you can add to your page.",steps:["Search for elements using the search bar","Elements are organized by categories (Layout, Basic, Media, etc.)","Drag any element onto the canvas to add it","Double-click text elements to edit them directly"],arrowPosition:"left",arrowTarget:"#blocks-panel",cardPosition:"right"},{id:"style-panel",title:"Style Panel",icon:"",description:"Customize the appearance of your selected elements using the Style panel on the right.",steps:["Select any element on the canvas","The Style panel will show all available styling options","Adjust colors, spacing, typography, and more","Changes are applied instantly to your element"],arrowPosition:"right",arrowTarget:"#style-panel",cardPosition:"left"},{id:"structure-panel",title:"Structure Panel",icon:"",description:"View and manage the structure of your page elements in the Structure panel.",steps:["See all elements in a hierarchical view","Click on elements in the structure to select them","Navigate complex layouts easily","Understand parent-child relationships"],arrowPosition:"right",arrowTarget:"#layers-panel",cardPosition:"left"},{id:"responsive-design",title:"Responsive Design",icon:"",description:"Preview and customize your design for different screen sizes.",steps:["Use the device icons in the top bar (Desktop, Tablet, Mobile)","Switch between devices to see how your design looks","Adjust styles for each device size","Ensure your theme looks great on all devices"],arrowPosition:"top",arrowTarget:".panel__devices",cardPosition:"bottom"},{id:"save-preview",title:"Save & Preview",icon:"",description:"Save your work and preview how it will look to your users.",steps:['Click "Save" to save your current progress','Use "Preview" to see how your theme looks','Click "Apply" to make this theme active',"Your changes are saved automatically"],arrowPosition:"right",arrowTarget:".builder-top-bar button",cardPosition:"left"},{id:"tips-tricks",title:"Tips & Tricks",icon:"",description:"Helpful tips to make the most of the Elementor Builder.",steps:["Use sections and containers for better layout control","Combine multiple elements for complex designs","Experiment with different style options","Save frequently to avoid losing your work"],arrowTarget:".builder-center-panel",cardPosition:"top",arrowPosition:"bottom"}],xte=({onClose:s})=>{const[r,e]=u.useState(0),[t,a]=u.useState(!0),[o,i]=u.useState({top:0,left:0}),[l,c]=u.useState({visibility:"visible",opacity:1,display:"flex"}),[d,p]=u.useState(!1),[h,g]=u.useState(null),[y,b]=u.useState(null),v=u.useRef(null),w=_h[r],C=r===0,k=r===_h.length-1;u.useEffect(()=>{if(!w.arrowTarget||!t)return;const B=()=>{let $=null;if(w.id==="save-preview"){const X=document.querySelector(".builder-top-bar");if(X){const Q=Array.from(X.querySelectorAll("button")).filter(xe=>{const K=xe.textContent?.trim()||"";return K==="Save"||K==="Preview"||K==="Apply"||K==="Saving..."});if(Q.length>0){const xe=Q[0].getBoundingClientRect(),K=Q[Q.length-1].getBoundingClientRect(),Z={left:xe.left,top:xe.top,right:K.right,bottom:Math.max(xe.bottom,K.bottom),width:K.right-xe.left,height:Math.max(xe.height,K.height),x:xe.left,y:xe.top,toJSON:()=>({})};$=Q[0],$.__virtualRect=Z}else{const xe=X.querySelector('div[style*="flex: 1"]')?.nextElementSibling;if(xe){const K=Array.from(xe.querySelectorAll("button"));K.length>0&&($=K[0])}}}}else $=document.querySelector(w.arrowTarget);if(!$||!v.current)return;let z=$.getBoundingClientRect();$.__virtualRect&&(z=$.__virtualRect);const Y=v.current.getBoundingClientRect(),M=window.scrollY,q=window.scrollX;let P=0,H=0;switch(w.cardPosition){case"right":if(w.id==="save-preview"){P=z.top+M+z.height/2-Y.height/2;const se=z.right+q+20,Q=window.innerWidth+q-Y.width-20;se>Q?H=z.left+q-Y.width-20:H=se}else P=z.top+M+z.height/2-Y.height/2,H=z.right+q+20;break;case"left":if(w.id==="save-preview"){P=z.top+M+z.height/2-Y.height/2;const se=z.left+q-Y.width-20,Q=q+20;se<Q?H=z.right+q+20:H=se}else P=z.top+M+z.height/2-Y.height/2,H=z.left+q-Y.width-20;break;case"bottom":const X=w.id==="save-preview"?10:20;P=z.bottom+M+X,H=z.left+q+z.width/2-Y.width/2;break;case"top":P=z.top+M-Y.height-20,H=z.left+q+z.width/2-Y.width/2;break;default:P=window.innerHeight/2+M-Y.height/2,H=window.innerWidth/2+q-Y.width/2}const D=20;P=Math.max(D,Math.min(P,window.innerHeight+M-Y.height-D)),H=Math.max(D,Math.min(H,window.innerWidth+q-Y.width-D)),i({top:P,left:H})},G=setTimeout(()=>{B();const $=w.id==="save-preview"?100:50;setTimeout(()=>{if(v.current&&w.arrowTarget){let z=null,Y=null;if(w.id==="save-preview"){const M=document.querySelector(".builder-top-bar");if(M){const P=Array.from(M.querySelectorAll("button")).filter(H=>{const D=H.textContent?.trim()||"";return D==="Save"||D==="Preview"||D==="Apply"||D==="Saving..."});if(P.length>0){const H=P[0].getBoundingClientRect(),D=P[P.length-1].getBoundingClientRect();Y={left:H.left,top:H.top,right:D.right,bottom:Math.max(H.bottom,D.bottom),width:D.right-H.left,height:Math.max(H.height,D.height),x:H.left,y:H.top,toJSON:()=>({})}}else{const H=M.querySelector('div[style*="flex: 1"]')?.nextElementSibling;if(H){const D=Array.from(H.querySelectorAll("button"));if(D.length>0)z=D[0],Y=z.getBoundingClientRect();else return}else return}}else return}else if(z=document.querySelector(w.arrowTarget),z)Y=z.getBoundingClientRect();else return;if(Y){const M=v.current.getBoundingClientRect(),q=Y.left+Y.width/2,P=Y.top+Y.height/2;let H="",D="",X="";switch(w.arrowPosition){case"left":if(w.id==="save-preview"){const se=(P-M.top)/M.height*100;D="-22px",H=`${Math.max(10,Math.min(90,se))}%`,X="translateY(-50%)"}else D="-22px",H=`${(P-M.top)/M.height*100}%`,X="translateY(-50%)";break;case"right":if(w.id==="save-preview"){const se=(P-M.top)/M.height*100-15;D="calc(100% + 2px)",H=`${Math.max(10,Math.min(90,se))}%`,X="translateY(-50%)"}else D="calc(100% + 2px)",H=`${(P-M.top)/M.height*100}%`,X="translateY(-50%)";break;case"top":H="-22px",D=`${(q-M.left)/M.width*100}%`,X="translateX(-50%)";break;case"bottom":H="calc(100% + 2px)",D=`${(q-M.left)/M.width*100}%`,X="translateX(-50%)";break}c({top:H||"50%",left:D||"50%",transform:X||"translate(-50%, -50%)",visibility:"visible",opacity:1,display:"flex"})}else{const M={visibility:"visible",opacity:1,display:"flex"};switch(w.arrowPosition){case"left":M.left="-22px",M.top="50%",M.transform="translateY(-50%)";break;case"right":M.left="calc(100% + 2px)",M.top="50%",M.transform="translateY(-50%)";break;case"top":M.top="-22px",M.left="50%",M.transform="translateX(-50%)";break;case"bottom":M.top="calc(100% + 2px)",M.left="50%",M.transform="translateX(-50%)";break}c(M)}}},$)},50);return window.addEventListener("resize",B),window.addEventListener("scroll",B),()=>{clearTimeout(G),window.removeEventListener("resize",B),window.removeEventListener("scroll",B)}},[r,w.arrowTarget,w.cardPosition,w.arrowPosition,t]);const N=()=>{r<_h.length-1?(p(!0),g("next"),b("next"),setTimeout(()=>{e(r+1),setTimeout(()=>{p(!1),g(null)},10)},200)):R()},O=()=>{r>0&&(p(!0),g("prev"),b("prev"),setTimeout(()=>{e(r-1),setTimeout(()=>{p(!1),g(null)},10)},200))},R=()=>{a(!1),s&&s(),localStorage.setItem("ziplofy.elementorTutorialSeen","true")};if(!t)return null;const L=()=>w.arrowPosition?`arrow-${w.arrowPosition}`:"";return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"elementor-tutorial-overlay",onClick:R}),n.jsxs("div",{ref:v,className:`elementor-tutorial-card contextual ${L()} ${d?h==="next"?"slide-out-left":"slide-out-right":y==="next"?"slide-in-from-right":y==="prev"?"slide-in-from-left":"slide-in"}`,style:{top:`${o.top}px`,left:`${o.left}px`},onClick:B=>B.stopPropagation(),children:[w.arrowPosition&&n.jsx("div",{className:`tutorial-arrow arrow-${w.arrowPosition}`,style:{...l,visibility:"visible",opacity:1,display:"flex"},children:n.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 32 32",fill:"none",style:{display:"block"},children:[w.arrowPosition==="left"&&n.jsx("path",{d:"M28 16 L4 16 M8 8 L4 16 L8 24",stroke:"#ffffff",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),w.arrowPosition==="right"&&n.jsx("path",{d:"M4 16 L28 16 M24 8 L28 16 L24 24",stroke:"#ffffff",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),w.arrowPosition==="top"&&n.jsx("path",{d:"M16 28 L16 4 M8 12 L16 4 L24 12",stroke:"#ffffff",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),w.arrowPosition==="bottom"&&n.jsx("path",{d:"M16 4 L16 28 M8 20 L16 28 L24 20",stroke:"#ffffff",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]})}),n.jsxs("div",{className:"tutorial-header",children:[n.jsx("div",{className:"tutorial-icon",children:w.icon}),n.jsx("h2",{className:"tutorial-title",children:w.title}),n.jsx("button",{className:"tutorial-close-btn",onClick:R,"aria-label":"Close tutorial",children:""})]}),n.jsxs("div",{className:"tutorial-content",children:[n.jsx("p",{className:"tutorial-description",children:w.description}),w.steps&&w.steps.length>0&&n.jsxs("div",{className:"tutorial-steps",children:[n.jsx("h3",{className:"steps-title",children:"How to use:"}),n.jsx("ul",{className:"steps-list",children:w.steps.map((B,G)=>n.jsxs("li",{className:"step-item",children:[n.jsx("span",{className:"step-number",children:G+1}),n.jsx("span",{className:"step-text",children:B})]},G))})]})]}),n.jsxs("div",{className:"tutorial-footer",children:[n.jsxs("div",{className:"tutorial-progress",children:[n.jsxs("span",{className:"progress-text",children:[r+1," of ",_h.length]}),n.jsx("div",{className:"progress-bar",children:n.jsx("div",{className:"progress-fill",style:{width:`${(r+1)/_h.length*100}%`}})})]}),n.jsxs("div",{className:"tutorial-navigation",children:[n.jsx("button",{className:"tutorial-nav-btn prev",onClick:O,disabled:C,children:" Previous"}),n.jsx("button",{className:"tutorial-nav-btn next",onClick:N,children:k?"Got it!":"Next "})]})]}),n.jsx("div",{className:"tutorial-dots",children:_h.map((B,G)=>n.jsx("button",{className:`tutorial-dot ${G===r?"active":""}`,onClick:()=>e(G),"aria-label":`Go to tutorial ${G+1}`},G))})]})]})},vte=()=>{const[s]=VO(),r=dr(),{activeStoreId:e}=Ur(),t=u.useRef(null),a=u.useRef(null),o=u.useRef(null),i=u.useRef(!1),[l,c]=u.useState(!0),[d,p]=u.useState(!1),[h,g]=u.useState(!1),[y,b]=u.useState(null),[v,w]=u.useState("My Theme"),[C,k]=u.useState(!1),[N,O]=u.useState(!1),[R,L]=u.useState(!1),[B,G]=u.useState(!1),[$,z]=u.useState(""),[Y,M]=u.useState("desktop"),[q,P]=u.useState(!1),[H,D]=u.useState(!1),[X,se]=u.useState(""),[Q,xe]=u.useState("widgets"),[K,Z]=u.useState(!1),[ve,ae]=u.useState(!1),[Se,Pe]=u.useState(!1),[$e,we]=u.useState(""),[Ae,ze]=u.useState(!1),[Ge,Ue]=u.useState([]),[ht,ee]=u.useState(!1),[ue,Oe]=u.useState([]),[J,I]=u.useState(null),{createTheme:V,updateTheme:re,fetchAll:pe}=F2();u.useEffect(()=>{try{if(typeof window>"u")return;const ne=new URLSearchParams(window.location.search),ke=ne.get("accessToken");if(ke){Uv.setItem("accessToken",ke),ne.delete("accessToken");const Re=`${window.location.pathname}${ne.toString()?`?${ne.toString()}`:""}`;window.history.replaceState({},"",Re)}}catch(ne){console.warn("Failed to persist access token from URL:",ne)}},[]);const ge='<section style="padding: 60px 20px; min-height: 400px; background: #ffffff; position: relative; border: 2px dashed #d1d5db; border-radius: 4px; max-width: 1200px; margin: 60px auto;"><div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); display: flex; flex-direction: column; align-items: center; gap: 12px; color: #6b7280; font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;"><div style="display: flex; gap: 12px; align-items: center;"><span style="width: 40px; height: 40px; border-radius: 50%; background: #1e1e1e; display: inline-flex; align-items: center; justify-content: center; color: #fff; font-size: 18px;">+</span><span style="width: 40px; height: 40px; border-radius: 50%; background: #1e1e1e; display: inline-flex; align-items: center; justify-content: center; color: #fff; font-size: 18px;"></span><span style="width: 40px; height: 40px; border-radius: 50%; background: #93003c; display: inline-flex; align-items: center; justify-content: center; color: #fff; font-size: 18px;"></span></div><div style="font-size: 13px; font-weight: 500;">Drag widget here</div></div></section>',Ce=ne=>{if(!ne)return"";const ke=ne.trim();if(!ke)return"";const Re=ke.toLowerCase();return Re.startsWith("http://")||Re.startsWith("https://")||Re.startsWith("mailto:")||Re.startsWith("tel:")?ke:ke.startsWith("//")?`https:${ke}`:ke.includes("://")?ke:`https://${ke}`},he=u.useMemo(()=>{try{if(s&&typeof s.get=="function"){const ne=s.get("id")||s.get("themeId");if(ne){if(/^[0-9a-fA-F]{24}$/.test(ne))return ne;{console.warn("Invalid theme ID format detected:",ne,"- Clearing from URL");const Re=new URL(window.location.href);Re.searchParams.delete("id"),Re.searchParams.delete("themeId"),window.history.replaceState({},"",Re.toString());try{const Ze=`ziplofy.builder.pages.${ne}`;localStorage.removeItem(Ze)}catch(Ze){console.warn("Failed to clear localStorage for invalid ID:",Ze)}return null}}}}catch{}try{const ne=new URLSearchParams(window.location.search),ke=ne.get("id")||ne.get("themeId");if(ke){if(/^[0-9a-fA-F]{24}$/.test(ke))return ke;{console.warn("Invalid theme ID format detected:",ke,"- Clearing from URL");const Ze=new URL(window.location.href);Ze.searchParams.delete("id"),Ze.searchParams.delete("themeId"),window.history.replaceState({},"",Ze.toString());try{const st=`ziplofy.builder.pages.${ke}`;localStorage.removeItem(st)}catch(st){console.warn("Failed to clear localStorage for invalid ID:",st)}return null}}}catch{}return null},[s]),ie=u.useMemo(()=>!!(he&&/^[0-9a-fA-F]{24}$/.test(he)),[he]);u.useEffect(()=>{try{const ne=localStorage.getItem(`ziplofy-theme-notes-${he||"new"}`);if(ne){const ke=JSON.parse(ne);Array.isArray(ke)?Oe(ke):Oe(ke?[{id:Date.now().toString(),content:ke,createdAt:Date.now()}]:[])}else Oe([])}catch(ne){console.warn("Failed to load notes:",ne),Oe([])}},[he]),u.useEffect(()=>{if(ue.length>0||J!==null){const ne=setTimeout(()=>{try{localStorage.setItem(`ziplofy-theme-notes-${he||"new"}`,JSON.stringify(ue))}catch(ke){console.warn("Failed to auto-save notes:",ke)}},1e3);return()=>clearTimeout(ne)}},[ue,he,J]);const Fe=()=>{const ne={id:Date.now().toString(),content:"",createdAt:Date.now()};Oe([...ue,ne]),I(ne.id)},We=(ne,ke)=>{Oe(ue.map(Re=>Re.id===ne?{...Re,content:ke}:Re))},Qe=ne=>{if(confirm("Delete this note? This cannot be undone.")){Oe(ue.filter(ke=>ke.id!==ne)),J===ne&&I(null);try{const ke=ue.filter(Re=>Re.id!==ne);localStorage.setItem(`ziplofy-theme-notes-${he||"new"}`,JSON.stringify(ke))}catch(ke){console.warn("Failed to save after delete:",ke)}}},de=u.useMemo(()=>{try{const ne=s?.get?.("storeId");if(ne)return console.log(" Found storeId in URL via searchParams:",ne),ne}catch(ne){console.warn("Error reading storeId from searchParams:",ne)}try{const ne=new URLSearchParams(window.location.search).get("storeId");if(ne)return console.log(" Found storeId in URL via window.location:",ne),ne}catch(ne){console.warn("Error reading storeId from window.location:",ne)}return console.log(" No storeId found in URL"),""},[s]),Ee=u.useMemo(()=>{if(de)return console.log(" Using storeId from URL parameter:",de),de;if(e)return console.log(" Using activeStoreId from store context:",e),e;try{const ne=localStorage.getItem("activeStoreId")||sessionStorage.getItem("activeStoreId")||localStorage.getItem("storeId")||sessionStorage.getItem("storeId")||"";return ne?console.log(" Using storeId from localStorage/sessionStorage:",ne):console.warn(" No storeId found in URL, context, or storage"),ne}catch{return""}},[de,e]);u.useEffect(()=>{console.log(" Store ID resolution:",{storeIdParam:de,contextActiveStoreId:e,resolvedStoreId:Ee,localStorageActiveStoreId:localStorage.getItem("activeStoreId"),localStorageStoreId:localStorage.getItem("storeId"),appliedCustomThemeId:localStorage.getItem("ziplofy.appliedCustomThemeId")})},[de,e,Ee]);const le=u.useMemo(()=>{try{if(s?.get?.("type")==="installed")return!0;const ke=s?.get?.("installed")||s?.get?.("source");if(ke)return ke.toLowerCase()==="installed"||ke==="true"}catch{}try{const ne=new URLSearchParams(window.location.search);if(ne.get("type")==="installed")return!0;const ke=ne.get("installed")||ne.get("source");if(ke)return ke.toLowerCase()==="installed"||ke==="true"}catch{return!1}return!1},[s]),Ye=u.useMemo(()=>le?!0:he?!/^[0-9a-fA-F]{24}$/.test(he):!1,[le,he]),De=()=>{try{const ne=Uv.getItem("accessToken")||localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken")||localStorage.getItem("token")||sessionStorage.getItem("token");if(!ne)return"";const ke=ne.split(".");if(ke.length<2)return"";const Re=JSON.parse(atob(ke[1].replace(/-/g,"+").replace(/_/g,"/")));return String(Re.uid||Re.userId||Re.id||"")}catch{return""}},ct=()=>{const ne={},ke=Uv.getItem("accessToken")||localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken")||localStorage.getItem("token")||sessionStorage.getItem("token");return ke&&(ne.Authorization=`Bearer ${ke}`),ne},ot=async(ne=!1)=>{if(console.log(" fetchInstalledThemeFromFiles called:",{shouldLoadInstalledTheme:Ye,force:ne,id:he,isInstalledMode:le}),!Ye&&!ne||!he)return console.log(" Skipping installed theme fetch:",{shouldLoadInstalledTheme:Ye,force:ne,id:he}),null;try{if(typeof window>"u")return null;const ke=De(),Re=Ee||ke;if(console.log(" Store ID resolution:",{resolvedStoreId:Ee,extractedUserId:ke,storeIdParam:de,finalOwnerId:Re,localStorageActiveStoreId:localStorage.getItem("activeStoreId"),sessionStorageActiveStoreId:sessionStorage.getItem("activeStoreId"),localStorageStoreId:localStorage.getItem("storeId"),sessionStorageStoreId:sessionStorage.getItem("storeId")}),!Re)return console.error(" No store/user identifier provided for installed theme editing",{resolvedStoreId:Ee,extractedUserId:ke,storeIdParam:de,localStorageActiveStoreId:localStorage.getItem("activeStoreId"),sessionStorageActiveStoreId:sessionStorage.getItem("activeStoreId"),contextActiveStoreId:e}),b("Unable to identify store or user. Please ensure you are logged in and have selected a store."),null;const Ze="https://backend.ziplofy.com/api",st=Date.now(),Ct=`${Ze}/themes/installed/${Re}/${he}/unzippedTheme`,Xe=`${Ct}/index.html?v=${st}`;console.log(" Fetching installed theme from:",Xe,{ownerId:Re,themeId:he,apiBase:Ze,isInstalledMode:le,shouldLoadInstalledTheme:Ye,fullUrl:Xe});const Ve=ct();console.log(" Auth headers:",{hasToken:!!Ve.Authorization});const je=await fetch(Xe,{credentials:"include",headers:Ve});if(console.log(" Theme fetch response:",{status:je.status,statusText:je.statusText,ok:je.ok,url:Xe}),!je.ok){const Ir=await je.text().catch(()=>"Unable to read error response");return console.error(" Installed theme request failed:",{status:je.status,statusText:je.statusText,url:Xe,ownerId:Re,themeId:he,errorBody:Ir.substring(0,200)}),je.status===404?b(`Theme not found at ${Xe}. Please verify that theme ID "${he}" exists for store "${Re}" and you have permission to access it.`):je.status===403?b("You do not have permission to access this theme."):b(`Failed to load theme: ${je.status} ${je.statusText}. Check console for details.`),null}const He=await je.text();if(typeof DOMParser>"u")return{html:He||ge,css:"",name:"Installed Theme"};const at=new DOMParser,Ot=at.parseFromString(He,"text/html"),ce=Ir=>{if(!Ir)return"";const _r=Ir.trim();if(!_r)return"";if(/^(?:https?:|data:|mailto:|tel:|javascript:|\/\/)/i.test(_r)||_r.startsWith("#"))return _r;try{const gt=Ct.endsWith("/")?Ct:`${Ct}/`;return _r.startsWith("/")?`${gt}${_r.replace(/^\/+/,"")}`:new URL(_r,gt).href}catch{return _r}};((Ir,_r)=>{Ot.querySelectorAll(Ir).forEach(gt=>{const ar=gt.getAttribute(_r);ar&&(/^(?:https?:|data:|mailto:|tel:|javascript:|\/\/)/i.test(ar)||ar.startsWith("#")||gt.setAttribute(_r,ce(ar)))})})("[src]","src"),Ot.querySelectorAll("img[srcset], source[srcset]").forEach(Ir=>{const _r=Ir.getAttribute("srcset");if(!_r)return;const gt=_r.split(",").map(ar=>{const[Or,Mr]=ar.trim().split(/\s+/,2),Sn=ce(Or);return Mr?`${Sn} ${Mr}`:Sn}).join(", ");Ir.setAttribute("srcset",gt)}),Ot.querySelectorAll("[style]").forEach(Ir=>{const _r=Ir.getAttribute("style");if(!_r)return;const gt=_r.replace(/url\((['"]?)(?!https?:|data:|mailto:|tel:|javascript:|\/\/)([^'")]+)\1\)/gi,(ar,Or="",Mr)=>{const Sn=ce(Mr);return`url(${Or}${Sn}${Or})`});Ir.setAttribute("style",gt)});const ut=new Set;Ot.querySelectorAll("a[href]").forEach(Ir=>{const _r=Ir.getAttribute("href");if(!_r||/^(?:https?:|mailto:|tel:|javascript:|#|\/\/)/i.test(_r))return;const gt=_r.split("?")[0].split("#")[0].trim();if(!gt||gt==="index.html"||gt==="/")return;const ar=gt.replace(/^\/+/,"");ar&&!ut.has(ar)&&ut.add(ar)}),Ot.querySelectorAll("a[href]").forEach(Ir=>{const _r=Ir.getAttribute("href");_r&&(/^(mailto:|tel:|javascript:)/i.test(_r)||_r.startsWith("#")||Ir.setAttribute("href",ce(_r)))});const jt=async()=>{const Ir=[],_r=Mr=>{try{const Sn=new URL(Mr),jn="https://backend.ziplofy.com/api",$n=new URL(jn),Fn=Sn.hostname.includes("cdnjs.cloudflare.com")||Sn.hostname.includes("cdn.jsdelivr.net")||Sn.hostname.includes("unpkg.com")||Sn.hostname.includes("fonts.googleapis.com")||Sn.hostname.includes("fonts.gstatic.com"),Wn=Sn.origin!==$n.origin&&Sn.origin!==window.location.origin;return Fn||Wn}catch{return!1}},gt=Array.from(Ot.querySelectorAll('link[rel="stylesheet"]')).map(async Mr=>{const Sn=Mr.getAttribute("href");if(!Sn)return"";const jn=ce(Sn);if(_r(jn))return console.log(`Using @import for external CDN: ${jn}`),`@import url('${jn}');`;try{const $n=await fetch(jn,{credentials:"include",headers:ct()});return $n.ok?await $n.text()||"":(console.warn(`Failed to fetch CSS from ${jn}:`,$n.status),`@import url('${jn}');`)}catch($n){return console.warn(`Error fetching CSS from ${jn}, using @import:`,$n),`@import url('${jn}');`}}),ar=await Promise.all(gt);Ir.push(...ar.filter(Mr=>Mr.trim()));const Or=Array.from(Ot.querySelectorAll("style")).map(Mr=>Mr.textContent||"").filter(Mr=>Mr.trim());return Ir.push(...Or),Ir.join(`

`).trim()},Lt=[],ur=[];Ot.head.querySelectorAll("script").forEach(Ir=>{const _r={};Ir.src&&(_r.src=ce(Ir.getAttribute("src")||"")),Ir.textContent&&(_r.content=Ir.textContent),Ir.type&&(_r.type=Ir.type),_r.async=Ir.async,_r.defer=Ir.defer,(_r.src||_r.content)&&Lt.push(_r)}),Ot.body&&Ot.body.querySelectorAll("script").forEach(Ir=>{const _r={};Ir.src&&(_r.src=ce(Ir.getAttribute("src")||"")),Ir.textContent&&(_r.content=Ir.textContent),Ir.type&&(_r.type=Ir.type),_r.async=Ir.async,_r.defer=Ir.defer,(_r.src||_r.content)&&ur.push(_r)}),Ot.head.querySelectorAll("script").forEach(Ir=>Ir.remove()),Ot.body&&Ot.body.querySelectorAll("script").forEach(Ir=>Ir.remove());const Br=Ot.body?Ot.body.innerHTML:He;let _t=await jt();const Kr=[...Lt,...ur];console.log(` Extracted ${Kr.length} scripts from installed theme (${Lt.length} from head, ${ur.length} from body)`);const ps=`<!-- ZIPLOFY_SCRIPTS_DATA:${JSON.stringify(Kr)} -->`,Xn=Br+ps;_t&&(_t=_t.replace(/url\((['"]?)(?!https?:|data:|mailto:|tel:|javascript:|\/\/)([^'")]+)\1\)/gi,(Ir,_r="",gt)=>{const ar=ce(gt);return`url(${_r}${ar}${_r})`}));const ds=[];console.log(` Discovered ${ut.size} potential pages from hyperlinks:`,Array.from(ut));const Ea=async Ir=>{try{const _r=[];Ir.toLowerCase().endsWith(".html")?_r.push(`${Ct}/${Ir}?v=${st}`):(_r.push(`${Ct}/${Ir}/index.html?v=${st}`),_r.push(`${Ct}/${Ir}.html?v=${st}`));let gt=null,ar="";for(const qn of _r)try{const Vn=await fetch(qn,{credentials:"include",headers:ct()});if(Vn.ok){gt=await Vn.text(),ar=qn;break}}catch(Vn){console.warn(`Failed to fetch page from ${qn}:`,Vn)}if(!gt)return console.warn(`Could not fetch page: ${Ir}`),null;const Or=at.parseFromString(gt,"text/html");(qn=>{qn.querySelectorAll("img[src]").forEach(Vn=>{const Gn=Vn.getAttribute("src");Gn&&(/^(data:|https?:|\/\/)/i.test(Gn)||Vn.setAttribute("src",ce(Gn)))}),qn.querySelectorAll('[style*="background"]').forEach(Vn=>{const Gn=Vn.getAttribute("style");if(!Gn)return;const _s=Gn.replace(/url\((['"]?)(?!https?:|data:|mailto:|tel:|javascript:|\/\/)([^'")]+)\1\)/gi,(Ta,Fs="",vs)=>{const Kn=ce(vs);return`url(${Fs}${Kn}${Fs})`});Vn.setAttribute("style",_s)}),qn.querySelectorAll("a[href]").forEach(Vn=>{const Gn=Vn.getAttribute("href");Gn&&(/^(mailto:|tel:|javascript:|#)/i.test(Gn)||Gn.startsWith("http://")||Gn.startsWith("https://")||Gn.startsWith("//")||Vn.setAttribute("href",ce(Gn)))})})(Or);let jn=await(async qn=>{const Vn=[],Gn=vs=>{try{const Kn=new URL(vs),Rs="https://backend.ziplofy.com/api",aa=new URL(Rs),Wr=Kn.hostname.includes("cdnjs.cloudflare.com")||Kn.hostname.includes("cdn.jsdelivr.net")||Kn.hostname.includes("unpkg.com")||Kn.hostname.includes("fonts.googleapis.com")||Kn.hostname.includes("fonts.gstatic.com"),qr=Kn.origin!==aa.origin&&Kn.origin!==window.location.origin;return Wr||qr}catch{return!1}},_s=Array.from(qn.querySelectorAll('link[rel="stylesheet"]')).map(async vs=>{const Kn=vs.getAttribute("href");if(!Kn)return"";const Rs=ce(Kn);if(Gn(Rs))return`@import url('${Rs}');`;try{const aa=await fetch(Rs,{credentials:"include",headers:ct()});return aa.ok?await aa.text()||"":`@import url('${Rs}');`}catch{return`@import url('${Rs}');`}}),Ta=await Promise.all(_s);Vn.push(...Ta.filter(vs=>vs.trim()));const Fs=Array.from(qn.querySelectorAll("style")).map(vs=>vs.textContent||"").filter(vs=>vs.trim());return Vn.push(...Fs),Vn.join(`

`).trim()})(Or);jn&&(jn=jn.replace(/url\((['"]?)(?!https?:|data:|mailto:|tel:|javascript:|\/\/)([^'")]+)\1\)/gi,(qn,Vn="",Gn)=>{const _s=ce(Gn);return`url(${Vn}${_s}${Vn})`}));const $n=_t?jn?`${_t}

/* Page-specific styles */
${jn}`:_t:jn,Fn=Or.body?Or.body.innerHTML:gt,Wn=Ir.replace(/\.html$/i,"").replace(/\/index$/i,"").replace(/\//g,"-").replace(/[^a-z0-9-]/gi,"-").toLowerCase()||`page-${Date.now()}`,xa=(Ir.replace(/\.html$/i,"").replace(/\/index$/i,"").split("/").pop()||"Page").split("-").map(qn=>qn.charAt(0).toUpperCase()+qn.slice(1)).join(" ");return{id:Wn,name:xa,html:Fn||ge,css:$n||""}}catch(_r){return console.error(`Error fetching page ${Ir}:`,_r),null}},sa=Array.from(ut).map(Ir=>Ea(Ir));(await Promise.all(sa)).forEach(Ir=>{Ir&&ds.push(Ir)}),console.log(` Successfully discovered and fetched ${ds.length} additional pages`);const ya={html:Xn||Br||ge,css:_t,name:Ot.title||"Installed Theme",pages:ds.length>0?ds:void 0};return console.log("Successfully fetched installed theme:",{name:ya.name,htmlLength:ya.html.length,cssLength:ya.css?.length||0,discoveredPages:ds.length}),ya}catch(ke){return console.error("Failed to fetch installed theme files:",ke),null}},[dt,Ke]=u.useState([{id:"page-1",name:"Home",html:ge,css:""}]),kt=u.useRef([{id:"page-1",name:"Home",html:ge,css:""}]),[At,xt]=u.useState("page-1"),[Xt,br]=u.useState(!1),zt=u.useMemo(()=>he?`ziplofy.builder.pages.${he}`:null,[he]),be=u.useRef(`tab-${Math.random().toString(36).slice(2)}`),Be=u.useRef(!1),et=u.useRef(0),wt=u.useRef(!1),$t=u.useRef(!1),tr=u.useRef(!1),Lr=ne=>{try{return JSON.stringify(ne).replace(/</g,"\\u003c").replace(/>/g,"\\u003e").replace(/&/g,"\\u0026")}catch{return"[]"}};u.useEffect(()=>{const ne=ke=>{if(!B)return ke.preventDefault(),ke.returnValue="","Your theme is not yet published. Do you still want to close the tab?"};return window.addEventListener("beforeunload",ne),()=>{window.removeEventListener("beforeunload",ne)}},[B]),u.useEffect(()=>{kt.current=dt;const ne=o.current;ne&&ne.Components&&setTimeout(()=>{ne.Components.getAll().forEach(Ze=>{const st=Ze?.get("tagName")?.toLowerCase();if(st==="button"||st==="a"){const Xe=(Ze.get("traits")||[]).find(Ve=>typeof Ve=="object"?Ve.name==="pageLink":!1);if(Xe){const Ve=[{id:"",value:"",name:"-- Select Page --"},...dt.map(He=>({id:He.id,value:He.id,name:He.name}))];Xe.options=Ve;const je=ne.getSelected();if(je&&je===Ze&&ne.TraitManager){const at=ne.TraitManager.getTrait(Ze,"pageLink");at&&at.set&&at.set("options",Ve),setTimeout(()=>{typeof ne.TraitManager.render=="function"&&ne.TraitManager.render()},50)}}}})},100)},[dt]);const tn=(ne,ke,Re)=>{const Ze=(ke||"Ziplofy Theme").replace(/</g,"&lt;").replace(/>/g,"&gt;"),st=Lr(ne);return`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>${Ze}</title>
  <style>
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      line-height: 1.6;
      color: #1e1e1e;
      background: #ffffff;
    }
    * {
      box-sizing: border-box;
    }
    .ziplofy-page {
      display: none;
      width: 100%;
      min-height: 100vh;
    }
    .ziplofy-page.active {
      display: block;
    }
    /* CRITICAL: Ensure wrapper styles apply to page containers */
    .ziplofy-page > .gjs-wrapper-body,
    .ziplofy-page.gjs-wrapper-body {
      width: 100%;
      min-height: 100vh;
    }
    ${Re||""}
  </style>
</head>
<body>
  <div id="ziplofy-page-container"></div>
  <script id="ziplofy-pages-data" type="application/json">${st}<\/script>
  <script>
    (function() {
      try {
        const container = document.getElementById('ziplofy-page-container');
        const dataEl = document.getElementById('ziplofy-pages-data');
        if (!container || !dataEl) return;
        const pagesText = dataEl.textContent || dataEl.innerText || '[]';
        const pages = JSON.parse(pagesText);
        const normalizeId = function(value) {
          if (value === null || value === undefined) return '';
          return String(value).replace(/^#/, '').trim();
        };
        const idsMatch = function(a, b) {
          const normalizedA = normalizeId(a);
          const normalizedB = normalizeId(b);
          if (!normalizedA || !normalizedB) return false;
          if (normalizedA === normalizedB) return true;
          const stripA = normalizedA.replace(/^page-/, '');
          const stripB = normalizedB.replace(/^page-/, '');
          return stripA === stripB;
        };
        const normalizeExternalUrl = function(url) {
          if (!url) return '';
          const trimmed = String(url).trim();
          if (!trimmed) return '';
          const lower = trimmed.toLowerCase();
          if (lower.startsWith('http://') || lower.startsWith('https://') || lower.startsWith('mailto:') || lower.startsWith('tel:')) {
            return trimmed;
          }
          if (trimmed.startsWith('//')) {
            return 'https:' + trimmed;
          }
          if (trimmed.includes('://')) {
            return trimmed;
          }
          return 'https://' + trimmed;
        };
        const openExternal = function(url) {
          const finalUrl = normalizeExternalUrl(url);
          if (!finalUrl) return;
          window.open(finalUrl, '_blank', 'noopener,noreferrer');
        };
        const renderPages = function() {
          container.innerHTML = '';
          pages.forEach(function(page, index) {
            const wrapper = document.createElement('div');
            // CRITICAL: Add gjs-wrapper-body class so background images work
            wrapper.className = 'ziplofy-page gjs-wrapper-body' + (index === 0 ? ' active' : '');
            wrapper.setAttribute('data-page-id', page.id || ('page-' + (index + 1)));
            wrapper.style.display = index === 0 ? 'block' : 'none';
            wrapper.innerHTML = page.html || '';
            container.appendChild(wrapper);
          });
        };

        const showPage = function(pageId, updateHash) {
          const normalizedRequest = normalizeId(pageId);
          if (!normalizedRequest) return false;
          
          const wrappers = container.querySelectorAll('.ziplofy-page');
          let found = false;
          
          wrappers.forEach(function(wrapper) {
            const wrapperPageId = wrapper.getAttribute('data-page-id') || '';
            
            if (idsMatch(wrapperPageId, normalizedRequest)) {
              wrapper.classList.add('active');
              wrapper.style.display = 'block';
              found = true;
            } else {
              wrapper.classList.remove('active');
              wrapper.style.display = 'none';
            }
          });
          
          if (found && updateHash) {
            const activeWrapper = container.querySelector('.ziplofy-page.active');
            const actualPageId = activeWrapper ? (activeWrapper.getAttribute('data-page-id') || normalizedRequest) : normalizedRequest;
            window.location.hash = '#' + normalizeId(actualPageId);
          }
          
          return found;
        };

        const attachLinkHandlers = function() {
          // Remove old handlers first for links
          const oldLinks = container.querySelectorAll('a[data-page-link]');
          oldLinks.forEach(function(link) {
            const newLink = link.cloneNode(true);
            if (link.parentNode) {
              link.parentNode.replaceChild(newLink, link);
            }
          });
          
          // Remove old handlers for buttons
          const oldButtons = container.querySelectorAll('button[data-page-link]');
          oldButtons.forEach(function(button) {
            const newButton = button.cloneNode(true);
            if (button.parentNode) {
              button.parentNode.replaceChild(newButton, button);
            }
          });
          
          // Attach handlers to links
          const links = container.querySelectorAll('a[data-page-link]');
          links.forEach(function(link) {
            link.addEventListener('click', function(evt) {
              const targetPage = this.getAttribute('data-page-link');
              if (targetPage && targetPage.trim() !== '') {
                evt.preventDefault();
                evt.stopPropagation();
                if (!showPage(targetPage, true)) {
                  console.warn('Ziplofy: target page not found for link', targetPage);
                }
                return;
              }
              
              const href = this.getAttribute('href');
              if (href && href.startsWith('#')) {
                evt.preventDefault();
                evt.stopPropagation();
                if (!showPage(href, true)) {
                  console.warn('Ziplofy: target page not found for link href', href);
                }
                return;
              }
              
              if (href && href.trim() !== '') {
                evt.preventDefault();
                evt.stopPropagation();
                openExternal(href);
              }
            });
          });
          
          // Attach handlers to buttons
          const buttons = container.querySelectorAll('button[data-page-link]');
          buttons.forEach(function(button) {
            button.addEventListener('click', function(evt) {
              evt.preventDefault();
              evt.stopPropagation();
              
              const targetPage = this.getAttribute('data-page-link');
              const href = this.getAttribute('href');
              
              if (targetPage && targetPage.trim() !== '') {
                if (!showPage(targetPage, true)) {
                  console.warn('Ziplofy: target page not found for button', targetPage, 'Available pages:', Array.from(container.querySelectorAll('.ziplofy-page')).map(function(p) { return p.getAttribute('data-page-id'); }));
                }
                return;
              }
              
              if (href && href.startsWith('#')) {
                if (!showPage(href, true)) {
                  console.warn('Ziplofy: target page not found for button href', href);
                }
                return;
              }
              
              if (href && (href.startsWith('http://') || href.startsWith('https://'))) {
                openExternal(href);
                return;
              }
              
              if (href && href.trim() !== '') {
                openExternal(href);
              }
            });
          });
          
          // Also handle buttons with href attribute for external URLs
          const buttonsWithHref = container.querySelectorAll('button[href]');
          buttonsWithHref.forEach(function(button) {
            const href = button.getAttribute('href');
            const hasPageLink = button.hasAttribute('data-page-link');
            
            // Only add handler if it doesn't already have a page link handler
            if (!hasPageLink && href && (href.startsWith('http://') || href.startsWith('https://'))) {
              button.addEventListener('click', function(evt) {
                evt.preventDefault();
                window.open(href, '_blank', 'noopener,noreferrer');
              });
            }
          });
        };

        renderPages();
        attachLinkHandlers();
        
        // Re-attach handlers after any dynamic content changes (with debounce to prevent excessive calls)
        let attachTimeout = null;
        const observer = new MutationObserver(function() {
          if (attachTimeout) {
            clearTimeout(attachTimeout);
          }
          attachTimeout = setTimeout(function() {
            attachLinkHandlers();
          }, 300); // Debounce to 300ms
        });
        observer.observe(container, { childList: true, subtree: true });

        const handleHashChange = function() {
          const hash = window.location.hash.replace(/^#/, '');
          if (!hash) return;
          const clean = hash.replace(/^page-/, '');
          showPage(clean, false);
        };

        window.addEventListener('hashchange', handleHashChange);
        handleHashChange();
      } catch (err) {
        console.error('Ziplofy multipage preview error:', err);
      }

      // Initialize Countdown Timers
      function initCountdownTimers() {
        const timers = document.querySelectorAll('.ziplofy-countdown-timer');
        timers.forEach((timer) => {
          const daysEl = timer.querySelector('.countdown-days');
          const hoursEl = timer.querySelector('.countdown-hours');
          const minutesEl = timer.querySelector('.countdown-minutes');
          const secondsEl = timer.querySelector('.countdown-seconds');
          
          if (!daysEl || !hoursEl || !minutesEl || !secondsEl) return;
          
          let days = parseInt(timer.getAttribute('data-countdown-days') || '0', 10);
          let hours = parseInt(timer.getAttribute('data-countdown-hours') || '0', 10);
          let minutes = parseInt(timer.getAttribute('data-countdown-minutes') || '0', 10);
          let seconds = parseInt(timer.getAttribute('data-countdown-seconds') || '0', 10);
          
          // Convert to total seconds
          let totalSeconds = days * 86400 + hours * 3600 + minutes * 60 + seconds;
          
          function updateTimer() {
            if (totalSeconds <= 0) {
              daysEl.textContent = '0';
              hoursEl.textContent = '0';
              minutesEl.textContent = '0';
              secondsEl.textContent = '0';
              return;
            }
            
            const d = Math.floor(totalSeconds / 86400);
            const h = Math.floor((totalSeconds % 86400) / 3600);
            const m = Math.floor((totalSeconds % 3600) / 60);
            const s = totalSeconds % 60;
            
            daysEl.textContent = d.toString();
            hoursEl.textContent = h.toString().padStart(2, '0');
            minutesEl.textContent = m.toString().padStart(2, '0');
            secondsEl.textContent = s.toString().padStart(2, '0');
            
            totalSeconds--;
          }
          
          updateTimer();
          setInterval(updateTimer, 1000);
        });
      }
      
      // Initialize countdown timers when DOM is ready
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initCountdownTimers);
      } else {
        initCountdownTimers();
      }

      // Initialize Progress Bars - sync percentage text with bar width
      function initProgressBars() {
        const progressBars = document.querySelectorAll('.ziplofy-progress-bar');
        progressBars.forEach((bar) => {
          const percentageEl = bar.querySelector('.progress-percentage');
          const fillEl = bar.querySelector('.progress-bar-fill');
          
          if (!percentageEl || !fillEl) return;
          
          function updateProgressBar() {
            const text = percentageEl.textContent || percentageEl.innerText || '0%';
            const match = text.match(/(d+(?:.d+)?)/);
            if (match) {
              const percentage = parseFloat(match[1]);
              const clampedPercentage = Math.min(100, Math.max(0, percentage));
              fillEl.style.width = clampedPercentage + '%';
            }
          }
          
          // Initial update
          updateProgressBar();
          
          // Watch for changes using MutationObserver
          const observer = new MutationObserver(updateProgressBar);
          observer.observe(percentageEl, {
            childList: true,
            characterData: true,
            subtree: true
          });
        });
      }
      
      // Initialize progress bars when DOM is ready
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initProgressBars);
      } else {
        initProgressBars();
      }

      // Initialize Parallax Sections
      function initParallaxSections() {
        const parallaxSections = document.querySelectorAll('.ziplofy-parallax-section');
        
        if (parallaxSections.length === 0) return;
        
        function updateParallax() {
          parallaxSections.forEach((section) => {
            const background = section.querySelector('.parallax-background');
            const content = section.querySelector('.parallax-content');
            
            if (!background) return;
            
            const rect = section.getBoundingClientRect();
            const windowHeight = window.innerHeight;
            const sectionTop = rect.top;
            const sectionHeight = rect.height;
            
            // Calculate parallax effect based on scroll position
            // Parallax: background moves slower than foreground, creating depth
            const scrolled = window.pageYOffset || document.documentElement.scrollTop;
            const sectionOffset = section.offsetTop;
            
            // Calculate how much the page has scrolled past the section start
            // This creates the parallax effect where background lags behind
            const scrollPastSection = scrolled - sectionOffset;
            
            // Parallax effect: background moves at 50% of scroll speed
            // This creates the illusion that background is further away (moves slower)
            const parallaxSpeed = 0.5;
            const backgroundY = scrollPastSection * parallaxSpeed;
            
            // Only apply parallax when section is in viewport
            if (sectionTop < windowHeight && sectionTop + sectionHeight > 0) {
              // Apply transform to background (moves slower, creating parallax depth)
              background.style.transform = 'translate3d(0, ' + backgroundY + 'px, 0)';
              
              // Content moves even slower for subtle layered parallax effect
              if (content) {
                const contentSpeed = 0.15;
                const contentY = scrollPastSection * contentSpeed;
                content.style.transform = 'translate3d(0, ' + contentY + 'px, 0)';
              }
            } else {
              // Reset when out of viewport
              background.style.transform = 'translate3d(0, 0, 0)';
              if (content) {
                content.style.transform = 'translate3d(0, 0, 0)';
              }
            }
          });
        }
        
        // Throttle scroll events for better performance
        let ticking = false;
        function onScroll() {
          if (!ticking) {
            window.requestAnimationFrame(function() {
              updateParallax();
              ticking = false;
            });
            ticking = true;
          }
        }
        
        // Initial update
        updateParallax();
        
        // Listen to scroll events
        window.addEventListener('scroll', onScroll, { passive: true });
        window.addEventListener('resize', updateParallax, { passive: true });
      }
      
      // Initialize parallax sections when DOM is ready
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initParallaxSections);
      } else {
        initParallaxSections();
      }
    })();
  <\/script>
</body>
</html>`},bn=ne=>{if(!ne)return null;const ke=ne.trim();if(ke.startsWith("["))try{const Ze=JSON.parse(ke);return Array.isArray(Ze)?Ze:null}catch{}const Re=ne.match(/<script id="ziplofy-pages-data"[^>]*>([\s\S]*?)<\/script>/i);if(Re&&Re[1])try{const Ze=Re[1].trim(),st=JSON.parse(Ze);if(Array.isArray(st))return st.map((Ct,Xe)=>({id:Ct?.id||`page-${Xe+1}`,name:Ct?.name||`Page ${Xe+1}`,html:Ct?.html||ge,css:Ct?.css||""}))}catch(Ze){console.warn("Failed to parse multipage JSON from stored HTML:",Ze)}return null},Fr=u.useCallback(()=>{const ne=o.current;if(!ne||typeof ne.getHtml!="function")return{pagesSnapshot:dt,currentHtml:"",currentCss:""};const ke=ne.getHtml()||"";let Re="";const Ze=[];if(ne.getCss){const Ve=ne.getCss()||"";Ve&&Ve.trim().length>0&&(Ze.push(Ve),console.log("Method 1 - Standard getCss():",Ve.length,"characters"))}if(ne.CssComposer)try{const Ve=ne.CssComposer.getAll();if(Ve&&Ve.length>0){const je=Ve.map(He=>{try{if(He.toCSS)return He.toCSS();const at=He.selectorsToString?He.selectorsToString():He.getSelectors?He.getSelectors():"",Ot=He.getStyle?He.getStyle():{};if(at&&Ot&&Object.keys(Ot).length>0){const ce=Object.entries(Ot).map(([Te,ut])=>`  ${Te}: ${ut};`).join(`
`);return`${at} {
${ce}
}`}return""}catch{return""}}).filter(Boolean).join(`

`);je&&je.trim().length>0&&(Ze.push(je),console.log("Method 2 - CssComposer:",je.length,"characters"))}}catch(Ve){console.warn("Failed to get CSS from CssComposer:",Ve)}if(Re=Ze.join(`

`),ne.getWrapper){const je=ne.getWrapper().getId();if(je&&Re.includes(`#${je}`)){console.log(` Converting wrapper ID selector #${je} to class .gjs-wrapper-body`);const He=new RegExp(`#${je}(?![a-zA-Z0-9_-])`,"g");Re=Re.replace(He,".gjs-wrapper-body"),console.log(" Converted wrapper selectors to class-based")}}try{const Ve=ne.getWrapper();if(Ve){const je=Ve.getStyle?Ve.getStyle():null;if(je&&Object.keys(je).length>0){const at=`.gjs-wrapper-body {
${Object.entries(je).map(([Ot,ce])=>`  ${Ot}: ${ce};`).join(`
`)}
}`;!Re.includes(".gjs-wrapper-body")&&!Re.includes("background-image")?(Re=at+`

`+Re,console.log(" Method 3 - Added wrapper styles to CSS:",at)):console.log("Method 3 - Wrapper styles already in CSS or detected")}}}catch(Ve){console.warn("Failed to extract wrapper styles:",Ve)}if((!Re||Re.trim().length===0)&&ne.getWrapper)try{const Ve=ne.getWrapper(),je=[],He=Ot=>{Ot&&(je.push(Ot),(Ot.components?Ot.components():[]).forEach(Te=>He(Te)))};He(Ve);const at=je.map(Ot=>{const ce=Ot.getStyle?Ot.getStyle():null,Te=Ot.getClasses?Ot.getClasses():[];if(ce&&Object.keys(ce).length>0){const ut=Te.length>0?`.${Te.join(".")}`:`#${Ot.getId()}`,jt=Object.entries(ce).map(([Lt,ur])=>`  ${Lt}: ${ur};`).join(`
`);return`${ut} {
${jt}
}`}return null}).filter(Boolean).join(`

`);at&&(Re=at,console.log(" Method 4 - Extracted CSS from all component styles:",Re.length))}catch(Ve){console.warn("Failed to extract component styles:",Ve)}const st=Re.includes("background-image")||Re.includes("background:");if(console.log(" Getting pages snapshot - CSS info:",{currentPageId:At,currentCssLength:Re?.length||0,hasCss:!!Re&&Re.trim().length>0,hasBackgroundImage:st,cssPreview:Re?.substring(0,500),fullCss:Re}),!st){console.warn(" NO BACKGROUND IMAGE DETECTED IN CSS!"),console.log("Checking wrapper element directly...");const Ve=ne.getWrapper();if(Ve){const je=Ve.getStyle(),He=Ve.getClasses(),at=Ve.getAttributes();console.log("Wrapper details:",{styles:je,classes:He,attributes:at,hasBackgroundImage:je&&(je["background-image"]||je.background)})}}const Ct=dt.map(Ve=>{if(Ve.id===At){const je=Re&&Re.trim().length>0?Re:Ve.css||"";return{...Ve,html:ke||ge,css:je}}return Ve}),Xe=Ct.find(Ve=>Ve.id===At);return console.log(" Pages snapshot created:",{totalPages:Ct.length,currentPageId:At,currentPageHasCss:(Xe?.css?.length||0)>0,allPagesCss:Ct.map(Ve=>({id:Ve.id,cssLength:Ve.css?.length||0}))}),{pagesSnapshot:Ct,currentHtml:ke,currentCss:Re}},[dt,At]),rr=u.useCallback((ne,ke)=>{const Re=o.current;if(!Re){console.error("Cannot apply page: Editor instance is null"),b("Editor not initialized. Please refresh the page."),c(!1);return}const Ze=s.get("id")||s.get("themeId");try{console.log("Applying page to editor:",{hasHtml:!!ne,htmlLength:ne?.length,hasCss:!!ke,cssLength:ke?.length,themeId:Ze||"none"});const st=[];if(ne){const Xe=ne.match(/<!-- ZIPLOFY_SCRIPTS_DATA:(\[.*?\]) -->/);if(Xe&&Xe[1])try{const Ve=JSON.parse(Xe[1]);Array.isArray(Ve)&&(st.push(...Ve),console.log(` Loaded ${Ve.length} scripts from comment marker`))}catch(Ve){console.warn("Failed to parse scripts from comment marker:",Ve)}}if(ne&&st.length===0){const Xe=/<script([^>]*)>([\s\S]*?)<\/script>/gi;let Ve;for(;(Ve=Xe.exec(ne))!==null;){const je=Ve[1],He=Ve[2].trim();if(je.includes("ziplofy-pages-data"))continue;const at={},Ot=je.match(/src=["']([^"']+)["']/i);Ot&&(at.src=Ot[1]),He&&(at.content=He);const ce=je.match(/type=["']([^"']+)["']/i);ce&&(at.type=ce[1]),at.async=/async/i.test(je),at.defer=/defer/i.test(je),st.push(at)}console.log(` Extracted ${st.length} script tags from HTML`)}let Ct=ne?ne.replace(/<script[\s\S]*?<\/script>/gi,""):"";if(Ct=Ct.replace(/<!-- ZIPLOFY_SCRIPTS_DATA:\[.*?\] -->/g,""),Re.setComponents(Ct||ge),setTimeout(()=>{const Xe=Re.getWrapper();if(Xe){console.log(" Configuring wrapper for page..."),Xe.set({droppable:!0,selectable:!0,editable:!1,draggable:!1,hoverable:!0,stylable:!0,traits:[]},{silent:!0}),Xe.getClasses().includes("gjs-wrapper-body")||Xe.addClass("gjs-wrapper-body"),Xe.view&&Xe.view.render?.();const je=Xe.components();if(je&&je.length>0&&je.forEach(Ot=>{if(Ot)try{Ot.set({selectable:!0,hoverable:!0,draggable:!0,stylable:!0},{silent:!0})}catch{}}),Re.Canvas){const Ot=Re.Canvas.getElement();Ot&&(Ot.style.pointerEvents="auto");const ce=Re.Canvas.getFrameEl();if(ce&&ce.contentWindow){const Te=ce.contentWindow.document.body;Te&&(Te.style.pointerEvents="auto")}}console.log(" Wrapper configured as droppable. Wrapper has",je?.length||0,"components");const He=Xe.get("droppable");He?console.log(" Wrapper is droppable:",He):(console.error(" WRAPPER IS NOT DROPPABLE! Fixing..."),Xe.set("droppable","*"),console.log(" Fixed: Wrapper droppable set to *"));const at=setInterval(()=>{const Ot=Re.getWrapper();Ot&&!Ot.get("droppable")&&(console.warn(" Wrapper became non-droppable, restoring..."),Ot.set("droppable","*"))},2e3);setTimeout(()=>clearInterval(at),1e4),setTimeout(()=>{xe("widgets");const Ot=document.getElementById("blocks-panel"),ce=document.querySelector(".elementor-blocks-wrapper");if(ce&&(ce.style.setProperty("display","block","important"),ce.style.setProperty("visibility","visible","important"),ce.style.setProperty("opacity","1","important")),Ot){Ot.style.setProperty("display","block","important"),Ot.style.setProperty("visibility","visible","important"),Ot.style.setProperty("opacity","1","important");const Te=Ot.querySelectorAll(".gjs-block"),ut=!!Ot.querySelector(".gjs-blocks-c");Te.length===0||!ut?(console.log(" No blocks found after applying page, rendering blocks..."),Ot.innerHTML="",Re.BlockManager&&typeof Re.BlockManager.render=="function"&&(Re.BlockManager.render(),i.current=!0,setTimeout(()=>{const jt=Ot.querySelectorAll(".gjs-block");jt.forEach(ur=>{ur&&(ur.style.display="flex",ur.style.visibility="visible",ur.style.opacity="1",ur.style.pointerEvents="auto",ur.style.cursor="grab")}),Ot.querySelectorAll(".gjs-block-category").forEach(ur=>{ur&&(ur.style.display="block",ur.style.visibility="visible")}),console.log(` Rendered ${jt.length} blocks after applying page`)},200))):(console.log(` Found ${Te.length} existing blocks after applying page`),i.current=!0)}},300)}else console.error(" No wrapper found after setComponents!")},150),ke&&typeof ke=="string"&&ke.trim()){console.log(" Applying CSS to editor:",{cssLength:ke.length,cssPreview:ke.substring(0,200)});try{if(typeof Re.setStyle=="function")try{Re.setStyle(ke),console.log(" CSS applied via editor.setStyle")}catch(Xe){console.warn("Failed to apply CSS via editor.setStyle:",Xe)}if(Re.CssComposer)try{const Xe=Re.CssComposer.add({selectors:["body",".gjs-wrapper-body"],style:{}})}catch{}[100,300,500].forEach(Xe=>{setTimeout(()=>{try{const Ve=Re.Canvas;if(Ve){const je=Ve.getFrameEl();if(je&&je.contentDocument){const He=je.contentDocument,at=He.head||He.getElementsByTagName("head")[0];if(at){at.querySelectorAll("#ziplofy-theme-styles, style[data-ziplofy-theme]").forEach(ut=>ut.remove());const ce=He.createElement("style");ce.id="ziplofy-theme-styles",ce.setAttribute("data-ziplofy-theme","true"),ce.textContent=ke,at.appendChild(ce),console.log(` CSS injected directly into canvas iframe (attempt at ${Xe}ms):`,{cssLength:ke.length,styleElementExists:!!at.querySelector("#ziplofy-theme-styles")});const Te=ke.matchAll(/@import\s+url\(['"]?([^'")]+)['"]?\)/gi);for(const ut of Te){const jt=ut[1];if(!Array.from(at.querySelectorAll('link[rel="stylesheet"]')).find(ur=>ur.href===jt)&&jt){const ur=He.createElement("link");ur.rel="stylesheet",ur.href=jt,ur.crossOrigin="anonymous",at.appendChild(ur)}}}}}}catch(Ve){Xe===500&&console.warn("Failed to inject CSS into iframe:",Ve)}},Xe)})}catch(Xe){console.error("Failed to apply CSS to editor:",Xe)}}else console.log("No CSS content to apply");if(st.length>0){console.log(` Injecting ${st.length} scripts into iframe`);const Xe=Ve=>{if(/^(https?:|data:|mailto:|tel:|\/\/)/i.test(Ve))return Ve;if(Ze){const He=Ve.startsWith("/")?Ve.substring(1):Ve;return`${`${window.location.origin}/api/custom-themes/${Ze}/files`}/${He}`}const je="https://backend.ziplofy.com/api";return Ve.includes("/themes/installed/")?Ve.startsWith("http")?Ve:Ve.startsWith("/")?`${window.location.origin}${Ve}`:`${je}/${Ve}`:Ve.startsWith("/")?window.location.origin+Ve:(console.warn(` Relative script path detected without theme ID: ${Ve}, trying API base`),`${je}/${Ve}`)};[200,500,1e3].forEach(Ve=>{setTimeout(()=>{try{const je=Re.Canvas;if(je){const He=je.getFrameEl();if(He&&He.contentDocument){const at=He.contentDocument,Ot=at.head||at.getElementsByTagName("head")[0],ce=at.body||at.getElementsByTagName("body")[0];if(!Ot||!ce){Ve===1e3&&console.warn(" Head or body not found in iframe for script injection");return}let Te=Ot.querySelector("base[data-ziplofy-theme-base]");Te?Ze&&(Te.href=`${window.location.origin}/api/custom-themes/${Ze}/files/`):(Te=at.createElement("base"),Te.setAttribute("data-ziplofy-theme-base","true"),Ze?Te.href=`${window.location.origin}/api/custom-themes/${Ze}/files/`:Te.href=window.location.origin+"/",Ot.insertBefore(Te,Ot.firstChild)),Ot.querySelectorAll("script[data-ziplofy-theme-script]").forEach(ur=>ur.remove()),ce.querySelectorAll("script[data-ziplofy-theme-script]").forEach(ur=>ur.remove()),(async()=>{for(let _t=0;_t<st.length;_t++){const Kr=st[_t];try{const Zr=at.createElement("script");if(Zr.setAttribute("data-ziplofy-theme-script","true"),Kr.type&&(Zr.type=Kr.type),Kr.src){const ps=Xe(Kr.src);Zr.src=ps,Zr.async=Kr.async||!1,Zr.defer=Kr.defer||!1,!Kr.async&&!Kr.defer?await new Promise(Xn=>{Zr.onload=()=>{console.log(` Loaded external script: ${Kr.src}`),Xn()},Zr.onerror=()=>{console.warn(` Failed to load script: ${Kr.src} (resolved: ${ps})`),Xn()},setTimeout(()=>{console.warn(` Script load timeout: ${Kr.src}`),Xn()},1e4)}):(Zr.onload=()=>{console.log(` Loaded external script (async/defer): ${Kr.src}`)},Zr.onerror=()=>{console.warn(` Failed to load script: ${Kr.src} (resolved: ${ps})`)})}else Kr.content&&(Zr.textContent=Kr.content);Kr.src?Ot.appendChild(Zr):ce.appendChild(Zr),console.log(` Injected script ${_t+1}/${st.length}${Kr.src?`: ${Kr.src}`:" (inline)"}`)}catch(Zr){console.warn(` Failed to inject script ${_t+1}:`,Zr)}}const ur=_t=>{const Kr=typeof _t.PRODUCTS<"u"&&Array.isArray(_t.PRODUCTS),Zr=typeof _t.liquidjs<"u"||typeof _t.Liquid<"u",ps=typeof _t.jQuery<"u"||typeof _t.$<"u";return Kr&&(Zr||ps)},Br=()=>{try{const _t=He.contentWindow;if(!_t)return;if(!ur(_t)){console.log(" Waiting for dependencies (PRODUCTS, LiquidJS)..."),setTimeout(()=>Br(),500);return}if(console.log(" Dependencies ready, executing product rendering..."),at.readyState==="loading"||at.readyState==="interactive"||at.readyState==="complete"){const Zr=new Event("DOMContentLoaded",{bubbles:!0});at.dispatchEvent(Zr);const ps=new Event("load",{bubbles:!0});_t.dispatchEvent(ps)}if(typeof _t.renderFeaturedProducts=="function"){console.log(" Re-executing renderFeaturedProducts...");try{_t.renderFeaturedProducts()}catch(Zr){console.warn("Error calling renderFeaturedProducts:",Zr)}}if(typeof _t.renderNewArrivals=="function"){console.log(" Re-executing renderNewArrivals...");try{_t.renderNewArrivals()}catch(Zr){console.warn("Error calling renderNewArrivals:",Zr)}}if(typeof _t.initProductRendering=="function"){console.log(" Re-executing initProductRendering...");try{_t.initProductRendering()}catch(Zr){console.warn("Error calling initProductRendering:",Zr)}}if(typeof _t.renderTrendingWithLiquid=="function"){console.log(" Re-executing renderTrendingWithLiquid...");try{_t.renderTrendingWithLiquid()}catch(Zr){console.warn("Error calling renderTrendingWithLiquid:",Zr)}}if(typeof _t.renderProductGrid=="function"){console.log(" Found renderProductGrid function");const Zr=at.getElementById("featured-products-grid")||at.getElementById("unique-products")||at.querySelector('[id*="featured"], [class*="featured-products"]');if(Zr){console.log(" Attempting to render featured products grid...");try{_t.renderProductGrid({templateId:"unique-products-template",targetId:Zr.id||"unique-products",pick:function(ps){return(ps||[]).slice(0,4)}})}catch(ps){console.warn("Error calling renderProductGrid:",ps)}}}if(typeof _t.onload=="function")try{_t.onload({})}catch(Zr){console.warn("Error calling window.onload:",Zr)}if(typeof _t.init=="function")try{_t.init()}catch(Zr){console.warn("Error calling init:",Zr)}try{const Zr=new CustomEvent("themeLoaded",{bubbles:!0});at.dispatchEvent(Zr),_t.dispatchEvent&&_t.dispatchEvent(Zr)}catch(Zr){console.warn("Error dispatching custom event:",Zr)}}catch(_t){console.warn("Error re-executing product rendering:",_t)}};[1e3,2e3,3e3].forEach(_t=>{setTimeout(()=>{Br(),console.log(` Product rendering re-execution attempted at ${_t}ms (script injection delay: ${Ve}ms)`)},_t)}),console.log(` All scripts injected into iframe (attempt at ${Ve}ms)`)})().catch(ur=>{console.warn("Error during sequential script injection:",ur)})}}}catch(je){Ve===1e3&&console.warn("Failed to inject scripts into iframe:",je)}},Ve)})}setTimeout(()=>{try{const Xe=Re.getWrapper();if(Xe){const Ve=je=>{if(je){const He=je.getAttributes?.()||{},at=je.get("tagName")?.toLowerCase(),Ot=je.get("type"),ce=He["data-gjs-droppable"]==="*"||at==="form"||at==="section"||at==="div"||at==="main"||at==="article"||at==="header"||at==="footer"||at==="nav"||at==="aside",ut=["p","h1","h2","h3","h4","h5","h6","span","a","label","li","td","th","button","strong","em","b","i","u","small","sub","sup"].includes(at),jt=je.get("content")&&typeof je.get("content")=="string"&&je.get("content").trim().length>0,Lt=He["data-gjs-editable"]==="true"||Ot==="text"||ut||jt&&!je.components().length;je.set({stylable:!0,selectable:!0,hoverable:!0,draggable:!0,droppable:ce?"*":!1,editable:Lt,resizable:at==="img"||at==="video"||at==="iframe"||at==="canvas"},{silent:!0});const ur=je.getEl?.();if(ur&&ur.style)try{ur.style.display="",ur.style.visibility="visible",ur.style.opacity="1"}catch{}const Br=je.components?.();Br&&Br.length>0&&Br.forEach(_t=>Ve(_t))}};Ve(Xe),setTimeout(()=>{if(Re.LayerManager&&Q==="structure"){const je=document.getElementById("layers-panel");je&&(document.querySelectorAll(".gjs-layers, .gjs-layer-item, .gjs-layer-item-title").forEach(at=>{at.closest("#layers-panel")||at.remove()}),je.innerHTML="",Re.LayerManager.render())}},100)}}catch(Xe){console.warn("Error making components interactive:",Xe)}},300),xe("widgets"),[500,1e3,1500].forEach(Xe=>{setTimeout(()=>{try{const Ve=document.getElementById("blocks-panel"),je=document.querySelector(".elementor-blocks-wrapper");if(Ve&&Re.BlockManager){je&&(je.style.setProperty("display","block","important"),je.style.setProperty("visibility","visible","important"),je.style.setProperty("opacity","1","important"));const He=Ve.querySelectorAll(".gjs-block"),at=Ve.innerHTML.trim()==="",Ot=!!Ve.querySelector(".gjs-blocks-c");He.length===0&&(at||!Ot)?(console.log(`[applyPageToEditor] Blocks missing at ${Xe}ms, restoring...`),Ve.style.setProperty("display","block","important"),Ve.style.setProperty("visibility","visible","important"),Ve.style.setProperty("opacity","1","important"),Ve.innerHTML="",Re.BlockManager.render(),i.current=!0,setTimeout(()=>{const ce=Ve.querySelectorAll(".gjs-block");ce.length>0?(ce.forEach(ut=>{ut&&(ut.style.display="flex",ut.style.visibility="visible",ut.style.opacity="1",ut.style.pointerEvents="auto",ut.style.cursor="grab",ut.style.position="relative",ut.style.zIndex="1")}),Ve.querySelectorAll(".gjs-block-category").forEach(ut=>{ut&&(ut.style.display="block",ut.style.visibility="visible")}),console.log(`[applyPageToEditor] Restored ${ce.length} blocks at ${Xe}ms`)):console.warn(`[applyPageToEditor] No blocks found after render at ${Xe}ms`)},200)):He.length>0&&(i.current=!0)}}catch(Ve){console.warn(`[applyPageToEditor] Error checking blocks at ${Xe}ms:`,Ve)}},Xe)})}catch(st){console.error("Error in applyPageToEditor:",st),b(st?.message||"Failed to apply page content"),c(!1)}},[s]),wr=u.useCallback(()=>{const ne=o.current;if(!ne||typeof ne.getHtml!="function"){console.warn(" Cannot commit page: Editor not ready");return}const{currentHtml:ke,currentCss:Re}=Fr();console.log(" Committing current page:",{currentPageId:At,htmlLength:ke?.length||0,cssLength:Re?.length||0,htmlPreview:ke?.substring(0,100),cssPreview:Re?.substring(0,100)}),Ke(Ze=>{const st=Ze.map(Ct=>{if(Ct.id===At){const Xe=Re&&Re.trim().length>0?Re:Ct.css||"",Ve=ke&&ke.trim().length>0?ke:Ct.html||ge,je={...Ct,html:Ve,css:Xe};return console.log(` Committed page ${Ct.name}:`,{htmlLength:je.html?.length||0,cssLength:je.css?.length||0}),je}return Ct});return kt.current=st,st})},[At,Fr]),an=u.useCallback(ne=>{if(!ne||ne===At)return;const{pagesSnapshot:ke}=Fr(),Re=ke.map(st=>{const Ct=dt.find(Xe=>Xe.id===st.id);return{...st,html:st.html&&st.html.trim().length>0?st.html:Ct?.html||ge,css:st.css&&st.css.trim().length>0?st.css:Ct?.css||""}});Ke(Re),kt.current=Re;const Ze=Re.find(st=>st.id===ne);xt(ne),rr(Ze?.html||ge,Ze?.css||""),console.log(` Switched to page: ${Ze?.name||ne}`,{totalPages:Re.length,currentPageId:ne,hasHtml:!!Ze?.html,hasCss:!!Ze?.css,htmlLength:Ze?.html?.length||0,cssLength:Ze?.css?.length||0,allPages:Re.map(st=>({id:st.id,name:st.name,hasHtml:!!st.html,hasCss:!!st.css}))})},[At,dt,Fr,rr]),En=u.useCallback(()=>{L(!0),console.log(" Adding new page...");const{pagesSnapshot:ne}=Fr(),ke=`page-${Date.now()}`,Re={id:ke,name:`Page ${ne.length+1}`,html:ge,css:""},Ze=[...ne,Re];Ke(Ze),xt(ke),rr(Re.html,Re.css||""),setTimeout(()=>{const st=o.current;if(st){const Ct=st.getWrapper();Ct&&(console.log(" New page wrapper check - Droppable:",Ct.get("droppable")),Ct.get("droppable")||(console.warn(" New page wrapper not droppable, fixing..."),Ct.set("droppable","*")))}},300)},[Fr,rr]),rn=u.useCallback(ne=>{if(L(!0),dt.length<=1){alert("Cannot delete the last page. A theme must have at least one page.");return}const{pagesSnapshot:ke}=Fr(),Re=ke.filter(st=>st.id!==ne);Ke(Re);const Ze=Re[0];Ze&&(xt(Ze.id),rr(Ze.html,Ze.css||""))},[dt.length,Fr,rr]),kr=u.useCallback((ne,ke)=>{Ke(Re=>Re.map(Ze=>Ze.id===ne?{...Ze,name:ke||Ze.name}:Ze)),L(!0)},[]);u.useEffect(()=>{if(!zt){wt.current=!0;return}try{const ne=localStorage.getItem(zt);if(ne){const ke=JSON.parse(ne);if(ke&&Array.isArray(ke.pages)&&ke.pages.length>0){$t.current=!0,et.current=ke.updatedAt||Date.now(),Be.current=!0;const Re=ke.pages;kt.current=Re,Ke(Re);const Ze=ke.currentPageId||Re[0].id;if(Ze){xt(Ze);const st=Re.find(Ct=>Ct.id===Ze);st&&rr(st.html||ge,st.css||"")}}}}catch(ne){console.warn("Failed to restore builder state from storage:",ne)}finally{wt.current||(wt.current=!0)}},[zt,rr]),u.useEffect(()=>{if(!zt)return;const ne=ke=>{if(!(ke.key!==zt||!ke.newValue))try{const Re=JSON.parse(ke.newValue);if(!Re||Re.source===be.current||!Array.isArray(Re.pages)||Re.pages.length===0||Re.updatedAt&&Re.updatedAt<=et.current)return;et.current=Re.updatedAt||Date.now(),Be.current=!0;const Ze=Re.pages;kt.current=Ze,Ke(Ze);const st=Re.currentPageId||Ze[0].id;if(st){xt(st);const Ct=Ze.find(Xe=>Xe.id===st);Ct&&rr(Ct.html||ge,Ct.css||"")}}catch(Re){if(Re instanceof Error&&Re.message.includes("Extension context invalidated"))return;console.warn("Failed to process builder storage update:",Re)}};try{window.addEventListener("storage",ne)}catch(ke){if(ke instanceof Error&&ke.message.includes("Extension context invalidated"))return}return()=>{try{window.removeEventListener("storage",ne)}catch(ke){if(ke instanceof Error&&ke.message.includes("Extension context invalidated"))return}}},[zt,rr]);const jr=u.useCallback(()=>{try{const ne=[];for(let Re=0;Re<localStorage.length;Re++){const Ze=localStorage.key(Re);Ze&&Ze.startsWith("ziplofy.builder.pages.")&&ne.push(Ze)}ne.sort();const ke=zt;ne.forEach(Re=>{if(Re!==ke)try{localStorage.removeItem(Re)}catch{console.warn("Failed to remove old localStorage key:",Re)}}),console.log(`Cleared ${ne.length} old builder states from localStorage`)}catch(ne){console.warn("Error clearing old localStorage data:",ne)}},[zt]);u.useEffect(()=>{if(zt&&wt.current){if(Be.current){Be.current=!1;return}try{const{pagesSnapshot:ne}=Fr(),ke={pages:ne,currentPageId:At,updatedAt:Date.now(),source:be.current};et.current=ke.updatedAt,localStorage.setItem(zt,JSON.stringify(ke))}catch(ne){if(ne?.name==="QuotaExceededError"||ne?.message?.includes("quota")){console.warn("LocalStorage quota exceeded. Clearing old builder states..."),jr();try{const{pagesSnapshot:ke}=Fr(),Ze={pages:ke.map(st=>({...st,css:st.css?st.css.substring(0,5e4):""})),currentPageId:At,updatedAt:Date.now(),source:be.current};localStorage.setItem(zt,JSON.stringify(Ze)),console.log("Successfully persisted reduced builder state")}catch(ke){console.warn("Failed to persist builder state even after clearing old data:",ke)}}else console.warn("Failed to persist builder state:",ne)}}},[dt,At,Fr,zt]);const mt=u.useMemo(()=>s.get("page"),[s]);u.useEffect(()=>{if(tr.current)return;if(!mt){tr.current=!0;return}const ne=dt.find(ke=>ke.id===mt);ne&&(tr.current=!0,At!==ne.id&&(xt(ne.id),rr(ne.html||ge,ne.css||"")))},[mt,dt,At,rr]),u.useCallback(async()=>{if(!he)return null;if(!/^[0-9a-fA-F]{24}$/.test(he)){console.warn("Invalid theme ID format (not a MongoDB ObjectId). This might be an old theme from localStorage. Creating new theme.");const ke=new URL(window.location.href);return ke.searchParams.delete("id"),window.history.replaceState({},"",ke.toString()),null}try{const{axiosi:ke}=await up(async()=>{const{axiosi:Ze}=await Promise.resolve().then(()=>uE);return{axiosi:Ze}},[]),Re=await ke.get(`/custom-themes/${he}`);if(Re.data.success&&Re.data.data){const Ze=Re.data.data,st=Ze.html||"",Ct=Ze.css||"",Xe=bn(st);if(Xe&&Xe.length>0)return console.log(" Loaded pages from saved theme:",{totalPages:Xe.length,pages:Xe.map(je=>({id:je.id,name:je.name,hasHtml:!!je.html&&je.html.trim().length>0,hasCss:!!je.css&&je.css.trim().length>0,htmlLength:je.html?.length||0,cssLength:je.css?.length||0}))}),$t.current||(console.log(" Setting pages state from loaded theme:",{pagesCount:Xe.length,firstPage:{id:Xe[0].id,name:Xe[0].name,htmlLength:Xe[0].html?.length||0,cssLength:Xe[0].css?.length||0},allPages:Xe.map(je=>({id:je.id,name:je.name,htmlLength:je.html?.length||0,cssLength:je.css?.length||0}))}),Ke(Xe),kt.current=Xe,xt(Xe[0].id),setTimeout(()=>{o.current&&Xe[0]&&(console.log(" Applying first page to editor after load:",{pageId:Xe[0].id,pageName:Xe[0].name,htmlLength:Xe[0].html?.length||0,cssLength:Xe[0].css?.length||0}),rr(Xe[0].html||ge,Xe[0].css||""))},100)),wt.current=!0,{...Ze,html:Xe[0].html||ge,css:Ct};const Ve={id:"page-1",name:"Home",html:st||ge,css:Ct||""};return $t.current||(Ke([Ve]),kt.current=[Ve],xt("page-1")),wt.current=!0,{...Ze,html:Ve.html,css:Ct}}return null}catch(ke){if(ke?.response?.status===404||ke?.response?.status===400){const Re=new URL(window.location.href);Re.searchParams.delete("id"),window.history.replaceState({},"",Re.toString()),wt.current=!0}else console.error("Error loading custom theme:",ke);return null}},[he,bn]),u.useEffect(()=>{const ne=Re=>Re.error&&Re.error.message&&Re.error.message.includes("Extension context invalidated")?(Re.preventDefault(),Re.stopPropagation(),!1):!0,ke=Re=>Re.reason&&Re.reason.message&&Re.reason.message.includes("Extension context invalidated")?(Re.preventDefault(),!1):!0;return window.addEventListener("error",ne),window.addEventListener("unhandledrejection",ke),()=>{window.removeEventListener("error",ne),window.removeEventListener("unhandledrejection",ke)}},[]),u.useEffect(()=>{if(o.current)return;let ne=!1;const ke=[],Re=st=>{ke.push(st)},Ze=setTimeout(()=>{!ne&&l&&(console.warn(" Editor initialization timeout - forcing loading to false"),c(!1),b("Editor initialization is taking longer than expected. The editor may still be loading."))},1e4);return(async()=>{try{c(!0),b(null);let st=0;const Ct=10;for(;!t.current&&st<Ct;)await new Promise(Ie=>setTimeout(Ie,100)),st++;if(!t.current){console.error(" Editor container not found after retries"),b("Editor container not found. Please refresh the page."),c(!1),clearTimeout(Ze);return}console.log(" Editor container found, initializing GrapesJS..."),console.log(" Loading GrapesJS dependencies...");const Xe=(await up(async()=>{const{default:Ie}=await Promise.resolve().then(()=>M6);return{default:Ie}},void 0)).default;console.log(" GrapesJS loaded"),await up(()=>Promise.resolve().then(()=>I6),void 0),console.log(" GrapesJS CSS loaded");const Ve=(await up(async()=>{const{default:Ie}=await import("./index-Cb6cA6cp.js").then(it=>it.i);return{default:Ie}},[])).default;console.log(" GrapesJS preset-webpage loaded"),console.log(" Initializing GrapesJS editor...",{container:t.current,hasContainer:!!t.current,containerId:t.current?.id,containerClasses:t.current?.className});const je=Xe.init({container:t.current,fromElement:!1,height:"calc(100vh - 60px)",width:"100%",noticeOnUnload:!1,avoidInlineStyle:!0,plugins:[Ve],pluginsOpts:{[Ve]:{}},deviceManager:{devices:[{id:"desktop",name:"Desktop",width:""},{id:"tablet",name:"Tablet",width:"768px"},{id:"mobile",name:"Mobile",width:"375px"}]},storageManager:{type:null},selectorManager:{componentFirst:!0,escapeName:Ie=>Ie,appendTo:"#style-panel"},styleManager:{appendTo:"#style-panel",sectors:[{name:"Layout",open:!0,buildProps:["width","height","min-width","min-height","max-width","max-height","padding","margin","display","position","top","right","bottom","left","z-index","overflow","overflow-x","overflow-y","float","clear","vertical-align","box-sizing"]},{name:"Typography",open:!0,buildProps:["font-family","font-size","font-weight","font-style","font-variant","text-decoration","text-align","text-transform","text-indent","line-height","letter-spacing","word-spacing","white-space","color","text-shadow","text-overflow","word-wrap","word-break"]},{name:"Background",open:!0,buildProps:["background-color","background-image","background-repeat","background-position","background-attachment","background-size","background-clip","background-origin","background-blend-mode"]},{name:"Border",open:!0,buildProps:["border","border-width","border-style","border-color","border-radius","border-top","border-right","border-bottom","border-left","border-top-width","border-right-width","border-bottom-width","border-left-width","border-top-style","border-right-style","border-bottom-style","border-left-style","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius","box-shadow","outline","outline-width","outline-style","outline-color","outline-offset"]},{name:"Flexbox",open:!1,buildProps:["flex-direction","flex-wrap","justify-content","align-items","align-content","align-self","flex","flex-grow","flex-shrink","flex-basis","order","gap","row-gap","column-gap"]},{name:"Grid",open:!1,buildProps:["grid-template-columns","grid-template-rows","grid-template-areas","grid-column","grid-row","grid-column-start","grid-column-end","grid-row-start","grid-row-end","grid-area","grid-gap","grid-row-gap","grid-column-gap","grid-auto-columns","grid-auto-rows","grid-auto-flow","justify-items","align-items","place-items","justify-content","align-content","place-content"]},{name:"Effects",open:!1,buildProps:["opacity","transition","transition-property","transition-duration","transition-timing-function","transition-delay","transform","transform-origin","transform-style","perspective","perspective-origin","filter","backdrop-filter","mix-blend-mode","isolation","box-shadow","text-shadow","clip-path","mask","mask-image"]},{name:"Spacing",open:!1,buildProps:["margin","margin-top","margin-right","margin-bottom","margin-left","padding","padding-top","padding-right","padding-bottom","padding-left","gap","row-gap","column-gap"]},{name:"Sizing",open:!1,buildProps:["width","height","min-width","min-height","max-width","max-height","box-sizing","object-fit","object-position","aspect-ratio"]},{name:"List",open:!1,buildProps:["list-style","list-style-type","list-style-position","list-style-image"]},{name:"Table",open:!1,buildProps:["border-collapse","border-spacing","caption-side","empty-cells","table-layout"]},{name:"Cursor",open:!1,buildProps:["cursor","pointer-events","user-select","touch-action"]},{name:"Animation",open:!1,buildProps:["animation","animation-name","animation-duration","animation-timing-function","animation-delay","animation-iteration-count","animation-direction","animation-fill-mode","animation-play-state"]}]},canvas:{styles:[]},blockManager:{appendTo:"#blocks-panel"},layerManager:{appendTo:"#layers-panel"},traitManager:{appendTo:"#traits-panel"}});o.current=je,console.log(" Editor instance created and stored",{hasEditor:!!je,hasComponents:!!je.Components,hasBlockManager:!!je.BlockManager});const He=()=>{const Ie=je.UndoManager;Ie&&(p(Ie.hasUndo()),g(Ie.hasRedo()))};je.on("update",He),je.on("component:update",He),je.on("style:update",He),je.on("component:update",Ie=>{try{const it=Ie.getEl?Ie.getEl():null;if(!it||it.nodeType!==1)return;const Et=it.closest?it.closest(".ziplofy-progress-bar"):null;if(!Et)return;const Mt=Et.querySelector(".progress-percentage"),Pt=Et.querySelector(".progress-bar-fill");if(!Mt||!Pt)return;const Vt=(Mt.textContent||Mt.innerText||"0%").match(/(\d+(?:\.\d+)?)/);if(Vt){const Ft=parseFloat(Vt[1]),Cr=Math.min(100,Math.max(0,Ft));Pt.style.width=Cr+"%"}}catch{}}),je.on("storage:load",He);const at=()=>{try{const Ie=je.Canvas;if(!Ie)return;const it=Ie.getFrameEl();if(!it||!it.contentWindow||!it.contentDocument)return;const Et=it.contentWindow,Mt=it.contentDocument;if(typeof Et.renderFeaturedProducts=="function")try{Et.renderFeaturedProducts(),console.log(" Re-executed renderFeaturedProducts after editor update")}catch{}if(typeof Et.renderNewArrivals=="function")try{Et.renderNewArrivals()}catch{}if(typeof Et.initProductRendering=="function")try{Et.initProductRendering()}catch{}if(typeof Et.renderTrendingWithLiquid=="function")try{Et.renderTrendingWithLiquid()}catch{}if(typeof Et.renderProductGrid=="function"){const Pt=Mt.getElementById("featured-products-grid")||Mt.getElementById("unique-products")||Mt.querySelector('[id*="featured"], [class*="featured-products"]');if(Pt)try{Et.renderProductGrid({templateId:"unique-products-template",targetId:Pt.id||"unique-products",pick:function(or){return(or||[]).slice(0,4)}})}catch{}}}catch{}};let Ot=null;je.on("component:add",Ie=>{setTimeout(()=>{try{const it=Et=>{if(!Et)return;const Mt=Et.get("tagName")?.toLowerCase(),Pt=Et.get("type"),or=Et.getAttributes?.()||{},Ft=["p","h1","h2","h3","h4","h5","h6","span","a","label","li","td","th","button","strong","em","b","i","u"].includes(Mt),Cr=or["data-gjs-editable"]==="true"||Pt==="text"||Ft,Rt=or["data-gjs-droppable"]==="*"||["form","section","div","main","article","header","footer","nav","aside"].includes(Mt);Et.set({stylable:!0,selectable:!0,hoverable:!0,draggable:!0,droppable:Rt?"*":!1,editable:Cr,resizable:["img","video","iframe","canvas"].includes(Mt)},{silent:!0});const fr=Et.components?.();fr&&fr.length>0&&fr.forEach(Rr=>it(Rr))};it(Ie)}catch(it){console.warn("Error making new component interactive:",it)}at()},100)}),je.on("component:update",Ie=>{Ot&&clearTimeout(Ot),Ot=setTimeout(()=>{at()},1e3);try{if(Ie){const it=Ie.get("tagName")?.toLowerCase(),Et=Ie.get("type"),Mt=Ie.getAttributes?.()||{},or=["p","h1","h2","h3","h4","h5","h6","span","a","label","li","td","th","button"].includes(it);(Mt["data-gjs-editable"]==="true"||Et==="text"||or)&&!Ie.get("editable")&&Ie.set("editable",!0,{silent:!0}),Ie.get("stylable")||Ie.set("stylable",!0,{silent:!0})}}catch{}}),He();let ce=!1;je.on("load",()=>{ce||ne||(ce=!0,console.log(" Editor loaded - ensuring widgets panel is visible"),requestAnimationFrame(()=>{if(ne)return;Q!=="widgets"&&xe("widgets");const Ie=()=>{if(ne)return;const it=document.getElementById("blocks-panel"),Et=document.querySelector(".elementor-blocks-wrapper");if(it&&je.BlockManager){Et&&(Et.style.setProperty("display","block","important"),Et.style.setProperty("visibility","visible","important"),Et.style.setProperty("opacity","1","important")),it.style.setProperty("display","block","important"),it.style.setProperty("visibility","visible","important"),it.style.setProperty("opacity","1","important");const Mt=it.querySelectorAll(".gjs-block"),Pt=!!it.querySelector(".gjs-blocks-c");Mt.length===0||!Pt?(console.log("No blocks found on editor load, rendering..."),it.innerHTML="",je.BlockManager.render(),i.current=!0,requestAnimationFrame(()=>{if(ne)return;const or=it.querySelectorAll(".gjs-block");or.forEach(Ft=>{Ft&&(Ft.style.display="flex",Ft.style.visibility="visible",Ft.style.opacity="1",Ft.style.pointerEvents="auto",Ft.style.cursor="grab")}),it.querySelectorAll(".gjs-block-category").forEach(Ft=>{Ft&&(Ft.style.display="block",Ft.style.visibility="visible")}),console.log(` Rendered ${or.length} blocks on editor load`)})):(console.log(` Found ${Mt.length} existing blocks on editor load`),i.current=!0)}else!it&&!ne&&(console.warn("blocks-panel not found, retrying..."),requestAnimationFrame(()=>{ne||Ie()}))};Ie()}))});const Te=Ie=>{try{Ie&&(Ie.preventDefault(),Ie.stopPropagation());const it=je.getSelected();if(it&&it.get("type")!=="wrapper"){const Et=it.toJSON(),Mt=je.getHtml({component:it});window.__ziplofyCopiedComponent={json:Et,html:Mt,component:it},console.log("Component copied:",it.get("tagName"),Et);const Pt=it.getEl?.();Pt&&(Pt.style.outline="2px dashed #5e72e4",setTimeout(()=>{Pt&&Pt.style&&(Pt.style.outline="")},500))}else console.log("No component selected to copy")}catch(it){console.error("Error copying component:",it)}},ut=Ie=>{try{Ie&&(Ie.preventDefault(),Ie.stopPropagation());const it=window.__ziplofyCopiedComponent;if(!it){console.log("No component copied");return}const Et=je.getSelected();let Mt=je.getWrapper();if(Et&&Et.get("type")!=="wrapper")if(Et.get("droppable")||Et.getAttributes?.()?.["data-gjs-droppable"]==="*")Mt=Et;else try{const Ft=Et.parent();Ft&&Ft.get&&Ft.get("type")!=="wrapper"&&(Mt=Ft)}catch(Ft){console.warn("Could not get parent, using wrapper:",Ft)}if(!Mt){console.log("No target to paste into");return}let Pt=null;if(it.component)try{Pt=it.component.clone()}catch(Vt){if(console.warn("Error cloning from component reference:",Vt),it.html)try{const Ft=je.getWrapper();if(Ft){const Cr=Ft.get("content");Ft.set("content",it.html);const Rt=Ft.components();if(Rt&&Rt.length>0){const fr=Rt.at(0);fr&&(Pt=fr,Ft.components().remove(Pt))}Ft.set("content",Cr)}}catch(Ft){console.error("Error parsing HTML:",Ft)}}else if(it.html)try{const Vt=je.getWrapper();if(Vt){const Ft=Vt.get("content");Vt.set("content",it.html);const Cr=Vt.components();if(Cr&&Cr.length>0){const Rt=Cr.at(0);Rt&&(Pt=Rt,Vt.components().remove(Pt))}Vt.set("content",Ft)}}catch(Vt){console.error("Error parsing HTML:",Vt)}else if(it.json)try{if(je.getWrapper()&&it.json&&it.json.components){const Ft=je.Components.getWrapper();if(Ft){const Cr=Ft.get("content"),Rt=Ft.components().add(it.json);Rt&&(Pt=Array.isArray(Rt)?Rt[0]:Rt,Pt&&Ft.components().remove(Pt)),Ft.set("content",Cr)}}}catch(Vt){console.error("Error recreating from JSON:",Vt)}if(!Pt){console.error("Failed to clone component");return}const or=Vt=>{try{const Ft=Vt.getAttributes?.()||{},Cr=Vt.get?.("tagName")?.toLowerCase?.()||"",Rt=Vt.get("type"),fr=Ft["data-gjs-droppable"]==="*"||["form","section","div","main","article","header","footer","nav","aside"].includes(Cr),Rr=Ft["data-gjs-selectable"]!=="false",Yr=["p","h1","h2","h3","h4","h5","h6","span","a","label","li","td","th","button","strong","em","b","i","u"].includes(Cr),Gr=Ft["data-gjs-editable"]==="true"||Ft["data-gjs-type"]==="text"||Rt==="text"||Yr;if(Vt.set({selectable:Rr,hoverable:!0,draggable:!0,stylable:!0,droppable:fr?"*":!1,editable:Gr,resizable:["img","video","iframe","canvas"].includes(Cr)},{silent:!0}),Gr&&Vt.set({editable:!0,type:"text"},{silent:!0}),je.CssComposer){const Xr=Vt.cid||Vt.getId?.();if(Xr){let Yn=Vt.getClasses().find(Qr=>Qr&&!Qr.startsWith("gjs-"));Yn||(Yn=`gjs-comp-${Xr}`,Vt.addClass(Yn))}}const mn=Vt.components();mn&&mn.length>0&&mn.forEach(Xr=>{or(Xr)})}catch(Ft){console.warn("Error configuring pasted component:",Ft)}};or(Pt);try{Mt.components?Mt.components().add(Pt):Mt.append(Pt)}catch(Vt){console.warn("Error adding to target, using wrapper:",Vt);const Ft=je.getWrapper();Ft&&Ft.append(Pt)}setTimeout(()=>{try{je.select(Pt)}catch(Vt){console.warn("Error selecting pasted component:",Vt)}},100),console.log("Component pasted successfully")}catch(it){console.error("Error pasting component:",it)}},jt=Ie=>{const it=Ie.target;if(!(it.tagName==="INPUT"||it.tagName==="TEXTAREA"||it.isContentEditable)){if((Ie.ctrlKey||Ie.metaKey)&&Ie.key==="c"&&!Ie.shiftKey){Te(Ie);return}if((Ie.ctrlKey||Ie.metaKey)&&Ie.key==="v"&&!Ie.shiftKey){ut(Ie);return}(Ie.ctrlKey||Ie.metaKey)&&Ie.key==="z"&&!Ie.shiftKey&&(Ie.preventDefault(),d&&je.UndoManager&&je.UndoManager.undo()),(Ie.ctrlKey||Ie.metaKey)&&Ie.key==="z"&&Ie.shiftKey&&(Ie.preventDefault(),h&&je.UndoManager&&je.UndoManager.redo()),(Ie.ctrlKey||Ie.metaKey)&&Ie.key==="y"&&(Ie.preventDefault(),h&&je.UndoManager&&je.UndoManager.redo())}};window.addEventListener("keydown",jt),Re(()=>{window.removeEventListener("keydown",jt)});let Lt=null,ur=null;const Br=()=>{if(ur=document.getElementById("style-panel"),!ur)return;Lt&&Lt.disconnect();let Ie=null;Lt=new MutationObserver(()=>{Ie&&clearTimeout(Ie),Ie=setTimeout(()=>{if(!ur)return;const it=window.getComputedStyle(ur);(it.display==="none"||it.visibility==="hidden")&&requestAnimationFrame(()=>{ur&&(ur.style.display="block",ur.style.visibility="visible",ur.style.opacity="1");const Et=a.current?.querySelector(".builder-right-panel");Et&&(Et.style.display="flex",Et.style.visibility="visible",Et.style.opacity="1")})},50)}),Lt.observe(ur,{attributes:!0,attributeFilter:["style"],childList:!1,subtree:!1})};requestAnimationFrame(()=>{if(!ne){const Ie=a.current?.querySelector(".builder-right-panel");Ie&&(Ie.style.display="flex",Ie.style.visibility="visible",Ie.style.opacity="1",Ie.style.width="300px",Ie.style.flexShrink="0"),Br()}}),requestAnimationFrame(()=>{if(!(ne||!je.StyleManager))try{const Ie=a.current?.querySelector(".builder-right-panel");Ie&&(Ie.style.display="flex",Ie.style.visibility="visible",Ie.style.opacity="1",Ie.style.width="300px",Ie.style.flexShrink="0");const it=je.getWrapper();it&&(je.select(it),it.set({stylable:!0}),je.runCommand("open-sm"));const Et=document.getElementById("style-panel");if(!Et||typeof je.StyleManager.render!="function")return;Et.style.display="block",Et.style.visibility="visible",Et.style.opacity="1",Et.style.width="100%",Et.style.height="100%",Et.style.minHeight="300px",Et.style.background="#1e1e1e",Q==="style"&&(Et.innerHTML="",je.StyleManager.render()),requestAnimationFrame(()=>{const Mt=Et.querySelectorAll(".gjs-sm-sector"),Pt=document.createDocumentFragment(),or=[];Mt.forEach(Vt=>{Vt&&or.push(()=>{Vt.classList.remove("gjs-sm-sector--closed"),Vt.classList.add("gjs-sm-sector--open");const Ft=Vt.querySelector(".gjs-sm-sector-content");Ft&&(Ft.style.cssText="display: block !important; visibility: visible !important; opacity: 1 !important; max-height: none !important;")})}),or.forEach(Vt=>Vt())})}catch(Ie){console.warn("Error initializing Style Manager:",Ie)}});const _t=je.BlockManager;_t?console.log(" BlockManager is available"):console.error(" BlockManager is not available!"),document.getElementById("blocks-panel")?console.log(" blocks-panel exists during block registration"):console.warn(" blocks-panel not found during block registration, will retry later");const Zr=_t&&_t.getAll?_t.getAll().length:0;console.log(` Blocks before registration: ${Zr}`),_t.add("section",{label:"Section",category:"Layout",content:'<section style="padding: 60px 20px; min-height: 300px; background: #f9fafb; position: relative;" data-gjs-droppable="*" data-gjs-selectable="true"><div style="max-width: 1200px; margin: 0 auto;">Section Content</div></section>'}),_t.add("container",{label:"Container",category:"Layout",content:'<div style="max-width: 1200px; margin: 0 auto; padding: 20px;" data-gjs-droppable="*" data-gjs-selectable="true">Container</div>'}),_t.add("columns-2",{label:"2 Columns",category:"Layout",content:'<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; padding: 20px;" data-gjs-droppable="*" data-gjs-selectable="true"><div data-gjs-droppable="*" style="min-height: 150px; padding: 20px; background: #fff; border: 1px dashed #e5e7eb;">Column 1</div><div data-gjs-droppable="*" style="min-height: 150px; padding: 20px; background: #fff; border: 1px dashed #e5e7eb;">Column 2</div></div>'}),_t.add("columns-3",{label:"3 Columns",category:"Layout",content:'<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 30px; padding: 20px;" data-gjs-droppable="*" data-gjs-selectable="true"><div data-gjs-droppable="*" style="min-height: 150px; padding: 20px; background: #fff; border: 1px dashed #e5e7eb;">Col 1</div><div data-gjs-droppable="*" style="min-height: 150px; padding: 20px; background: #fff; border: 1px dashed #e5e7eb;">Col 2</div><div data-gjs-droppable="*" style="min-height: 150px; padding: 20px; background: #fff; border: 1px dashed #e5e7eb;">Col 3</div></div>'}),_t.add("columns-4",{label:"4 Columns",category:"Layout",content:'<div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; padding: 20px;" data-gjs-droppable="*" data-gjs-selectable="true"><div data-gjs-droppable="*" style="min-height: 150px; padding: 15px; background: #fff; border: 1px dashed #e5e7eb;">Col 1</div><div data-gjs-droppable="*" style="min-height: 150px; padding: 15px; background: #fff; border: 1px dashed #e5e7eb;">Col 2</div><div data-gjs-droppable="*" style="min-height: 150px; padding: 15px; background: #fff; border: 1px dashed #e5e7eb;">Col 3</div><div data-gjs-droppable="*" style="min-height: 150px; padding: 15px; background: #fff; border: 1px dashed #e5e7eb;">Col 4</div></div>'}),_t.add("row",{label:"Row",category:"Layout",content:'<div style="display: flex; gap: 20px; padding: 20px; flex-wrap: wrap;" data-gjs-droppable="*" data-gjs-selectable="true"><div data-gjs-droppable="*" style="flex: 1; min-width: 200px; min-height: 150px; padding: 20px; background: #fff; border: 1px dashed #e5e7eb;">Row Item</div></div>'}),_t.add("divider",{label:"Divider",category:"Layout",content:'<div style="padding: 40px 20px; text-align: center;" data-gjs-selectable="true"><hr style="border: none; border-top: 2px solid #e5e7eb; margin: 0;" /></div>'}),_t.add("spacer",{label:"Spacer",category:"Layout",content:'<div style="height: 50px; width: 100%;" data-gjs-selectable="true"></div>'}),_t.add("navbar",{label:"Navbar",category:"Layout",content:'<nav style="background: #ffffff; padding: 16px 40px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 1000;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="max-width: 1200px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap;"><div style="display: flex; align-items: center; gap: 12px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="width: 40px; height: 40px; background: #5e72e4; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 18px;" data-gjs-type="text" data-gjs-editable="true">L</div><span style="font-size: 20px; font-weight: 700; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Logo</span></div><ul style="display: flex; list-style: none; gap: 32px; margin: 0; padding: 0; align-items: center; flex-wrap: wrap;" data-gjs-selectable="true" data-gjs-droppable="*"><li style="margin: 0;" data-gjs-selectable="true"><a href="#" style="color: #495157; text-decoration: none; font-size: 16px; font-weight: 500; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Home</a></li><li style="margin: 0;" data-gjs-selectable="true"><a href="#" style="color: #495157; text-decoration: none; font-size: 16px; font-weight: 500; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">About</a></li><li style="margin: 0;" data-gjs-selectable="true"><a href="#" style="color: #495157; text-decoration: none; font-size: 16px; font-weight: 500; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Services</a></li><li style="margin: 0;" data-gjs-selectable="true"><a href="#" style="color: #495157; text-decoration: none; font-size: 16px; font-weight: 500; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Contact</a></li></ul><div style="display: flex; align-items: center; gap: 12px;" data-gjs-selectable="true" data-gjs-droppable="*"><button style="padding: 10px 24px; background: transparent; color: #5e72e4; border: 2px solid #5e72e4; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 600; transition: all 0.3s;" data-gjs-type="text" data-gjs-editable="true">Login</button><button style="padding: 10px 24px; background: #5e72e4; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 600; transition: all 0.3s;" data-gjs-type="text" data-gjs-editable="true">Sign Up</button></div></div></nav>'}),_t.add("heading-1",{label:"Heading 1",category:"Basic",content:'<h1 style="font-size: 48px; font-weight: 700; margin: 20px 0; line-height: 1.2; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true" data-gjs-selectable="true">Heading</h1>'}),_t.add("heading-2",{label:"Heading 2",category:"Basic",content:'<h2 style="font-size: 36px; font-weight: 600; margin: 20px 0; line-height: 1.3; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true" data-gjs-selectable="true">Sub Heading</h2>'}),_t.add("heading-3",{label:"Heading 3",category:"Basic",content:'<h3 style="font-size: 28px; font-weight: 600; margin: 20px 0; line-height: 1.4; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true" data-gjs-selectable="true">Heading 3</h3>'}),_t.add("heading-4",{label:"Heading 4",category:"Basic",content:'<h4 style="font-size: 24px; font-weight: 600; margin: 20px 0; line-height: 1.4; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true" data-gjs-selectable="true">Heading 4</h4>'}),_t.add("paragraph",{label:"Text Editor",category:"Basic",content:'<p style="font-size: 16px; line-height: 1.8; margin: 20px 0; color: #495157;" data-gjs-type="text" data-gjs-editable="true" data-gjs-selectable="true">Add your text here. You can edit this text and change how it looks.</p>'}),_t.add("text-block",{label:"Text Block",category:"Basic",content:'<div style="padding: 30px; background: #fff;" data-gjs-selectable="true" data-gjs-droppable="*"><p style="font-size: 16px; line-height: 1.8; color: #495157; margin: 0;" data-gjs-type="text" data-gjs-editable="true">Text content</p></div>'}),_t.add("quote",{label:"Quote",category:"Basic",content:'<blockquote style="padding: 30px; margin: 30px 0; border-left: 4px solid #5e72e4; background: #f9fafb; font-style: italic; font-size: 18px; line-height: 1.6; color: #495157;" data-gjs-type="text" data-gjs-editable="true" data-gjs-selectable="true">Your quote text here</blockquote>'}),_t.add("list",{label:"List",category:"Basic",content:'<ul style="padding: 20px 20px 20px 40px; margin: 20px 0; list-style: disc; color: #495157; font-size: 16px; line-height: 1.8;" data-gjs-selectable="true" data-gjs-droppable="*"><li style="margin: 10px 0;" data-gjs-type="text" data-gjs-editable="true">List item 1</li><li style="margin: 10px 0;" data-gjs-type="text" data-gjs-editable="true">List item 2</li><li style="margin: 10px 0;" data-gjs-type="text" data-gjs-editable="true">List item 3</li></ul>'}),_t.add("link-block",{label:"Link Block",category:"Basic",content:'<div style="padding: 20px; background: #fff; border: 1px solid #e5e7eb; border-radius: 8px;" data-gjs-selectable="true" data-gjs-droppable="*"><a href="#" style="color: #5e72e4; text-decoration: none; font-size: 16px; font-weight: 500;" data-gjs-type="text" data-gjs-editable="true">Link Text</a></div>'}),_t.add("button",{label:"Button",category:"Buttons",content:'<div style="padding: 20px; text-align: center;" data-gjs-selectable="true"><button style="padding: 14px 32px; background: #5e72e4; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; font-weight: 600; transition: all 0.3s;" data-gjs-type="text" data-gjs-editable="true">Click Here</button></div>'}),_t.add("button-outline",{label:"Button Outline",category:"Buttons",content:'<div style="padding: 20px; text-align: center;" data-gjs-selectable="true"><button style="padding: 14px 32px; background: transparent; color: #5e72e4; border: 2px solid #5e72e4; border-radius: 4px; cursor: pointer; font-size: 16px; font-weight: 600; transition: all 0.3s;" data-gjs-type="text" data-gjs-editable="true">Click Here</button></div>'}),_t.add("button-text",{label:"Button Text",category:"Buttons",content:'<div style="padding: 20px; text-align: center;" data-gjs-selectable="true"><button style="padding: 14px 32px; background: transparent; color: #5e72e4; border: none; cursor: pointer; font-size: 16px; font-weight: 600; text-decoration: underline;" data-gjs-type="text" data-gjs-editable="true">Click Here</button></div>'}),_t.add("link",{label:"Link",category:"Buttons",content:'<div style="padding: 20px;" data-gjs-selectable="true"><a href="#" style="color: #5e72e4; text-decoration: none; font-size: 16px; font-weight: 500; border-bottom: 1px solid #5e72e4;" data-gjs-type="text" data-gjs-editable="true">Link Text</a></div>'}),_t.add("page-link",{label:"Page Link",category:"Buttons",content:'<div style="padding: 20px;" data-gjs-selectable="true"><a href="#page-page-1" data-page-link="page-1" style="color: #5e72e4; text-decoration: none; font-size: 16px; font-weight: 500; border-bottom: 1px solid #5e72e4;" data-gjs-type="text" data-gjs-editable="true">Link to Page</a></div>'}),_t.add("image",{label:"Image",category:"Media",content:'<div style="padding: 20px; text-align: center;" data-gjs-selectable="true"><img src="https://via.placeholder.com/800x600/5e72e4/ffffff?text=Image" alt="Image" style="max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);" /></div>'}),_t.add("image-gallery",{label:"Image Gallery",category:"Media",content:'<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; padding: 20px;" data-gjs-selectable="true" data-gjs-droppable="*"><div data-gjs-selectable="true"><img src="https://via.placeholder.com/300x300/5e72e4/ffffff?text=1" alt="Gallery Image" style="width: 100%; height: auto; border-radius: 8px;" /></div><div data-gjs-selectable="true"><img src="https://via.placeholder.com/300x300/5e72e4/ffffff?text=2" alt="Gallery Image" style="width: 100%; height: auto; border-radius: 8px;" /></div><div data-gjs-selectable="true"><img src="https://via.placeholder.com/300x300/5e72e4/ffffff?text=3" alt="Gallery Image" style="width: 100%; height: auto; border-radius: 8px;" /></div></div>'}),_t.add("video",{label:"Video",category:"Media",content:'<div style="padding: 20px; text-align: center; background: #000; border-radius: 8px;" data-gjs-selectable="true"><div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%;"><iframe style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" src="https://www.youtube.com/embed/dQw4w9WgXcQ" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div></div>'}),_t.add("icon",{label:"Icon",category:"Media",content:'<div style="padding: 30px; text-align: center;" data-gjs-selectable="true"><div style="width: 64px; height: 64px; margin: 0 auto; background: #5e72e4; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 32px; font-weight: bold;"></div></div>'}),_t.add("google-maps",{label:"Google Maps",category:"Media",content:'<div style="padding: 20px; text-align: center;" data-gjs-selectable="true"><div style="width: 100%; height: 400px; background: #e5e7eb; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: #6b7280; font-size: 14px;">Google Maps Embed</div></div>'}),_t.add("form",{label:"Contact Form",category:"Forms",content:'<form style="padding: 20px; max-width: 500px; background: #fff; border-radius: 8px;" data-gjs-selectable="true" data-gjs-droppable="*"><input type="text" placeholder="Name" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;" data-gjs-selectable="true" /><input type="email" placeholder="Email" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;" data-gjs-selectable="true" /><input type="tel" placeholder="Phone" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;" data-gjs-selectable="true" /><textarea placeholder="Message" rows="4" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px; resize: vertical;" data-gjs-selectable="true"></textarea><button type="submit" style="padding: 12px 24px; background: #10b981; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 500; width: 100%; margin-top: 10px;" data-gjs-selectable="true">Submit</button></form>'}),_t.add("form-simple",{label:"Simple Form",category:"Forms",content:'<form style="padding: 20px; max-width: 500px; background: #fff; border-radius: 8px;" data-gjs-selectable="true" data-gjs-droppable="*"><input type="text" placeholder="Name" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;" data-gjs-selectable="true" /><input type="email" placeholder="Email" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;" data-gjs-selectable="true" /><button type="submit" style="padding: 12px 24px; background: #10b981; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 500; width: 100%; margin-top: 10px;" data-gjs-selectable="true">Submit</button></form>'}),_t.add("input-text",{label:"Text Input",category:"Forms",content:'<input type="text" placeholder="Enter text" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;" data-gjs-selectable="true" data-gjs-draggable="*" />'}),_t.add("input-email",{label:"Email Input",category:"Forms",content:'<input type="email" placeholder="Enter email" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;" data-gjs-selectable="true" data-gjs-draggable="*" />'}),_t.add("input-phone",{label:"Phone Input",category:"Forms",content:'<input type="tel" placeholder="Enter phone" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;" data-gjs-selectable="true" data-gjs-draggable="*" />'}),_t.add("textarea-field",{label:"Textarea",category:"Forms",content:'<textarea placeholder="Enter message" rows="4" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px; resize: vertical;" data-gjs-selectable="true" data-gjs-draggable="*"></textarea>'}),_t.add("form-button",{label:"Submit Button",category:"Forms",content:'<button type="submit" style="padding: 12px 24px; background: #10b981; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 500;" data-gjs-selectable="true" data-gjs-draggable="*">Submit</button>'}),_t.add("input-number",{label:"Number Input",category:"Forms",content:'<input type="number" placeholder="Enter number" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;" data-gjs-selectable="true" data-gjs-draggable="*" />'}),_t.add("input-password",{label:"Password Input",category:"Forms",content:'<input type="password" placeholder="Enter password" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;" data-gjs-selectable="true" data-gjs-draggable="*" />'}),_t.add("input-date",{label:"Date Input",category:"Forms",content:'<input type="date" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;" data-gjs-selectable="true" data-gjs-draggable="*" />'}),_t.add("select-dropdown",{label:"Select Dropdown",category:"Forms",content:'<select style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;" data-gjs-selectable="true" data-gjs-draggable="*"><option>Option 1</option><option>Option 2</option></select>'}),_t.add("checkbox",{label:"Checkbox",category:"Forms",content:'<label style="display: flex; align-items: center; gap: 8px; margin: 10px 0;"><input type="checkbox" style="width: 18px; height: 18px;" data-gjs-selectable="true" data-gjs-draggable="*" /><span>Checkbox label</span></label>'}),_t.add("radio",{label:"Radio Button",category:"Forms",content:'<label style="display: flex; align-items: center; gap: 8px; margin: 10px 0;"><input type="radio" name="radio-group" style="width: 18px; height: 18px;" data-gjs-selectable="true" data-gjs-draggable="*" /><span>Radio option</span></label>'}),_t.add("tabs",{label:"Tabs",category:"Advanced",content:'<div style="padding: 20px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="display: flex; border-bottom: 2px solid #e5e7eb; margin-bottom: 20px;"><button style="padding: 12px 24px; background: transparent; border: none; border-bottom: 2px solid #5e72e4; color: #5e72e4; font-weight: 600; cursor: pointer;" data-gjs-type="text" data-gjs-editable="true">Tab 1</button><button style="padding: 12px 24px; background: transparent; border: none; color: #6b7280; cursor: pointer;" data-gjs-type="text" data-gjs-editable="true">Tab 2</button><button style="padding: 12px 24px; background: transparent; border: none; color: #6b7280; cursor: pointer;" data-gjs-type="text" data-gjs-editable="true">Tab 3</button></div><div style="padding: 20px; min-height: 200px; background: #f9fafb; border-radius: 8px;" data-gjs-droppable="*">Tab content goes here</div></div>'}),_t.add("accordion",{label:"Accordion",category:"Advanced",content:'<div style="padding: 20px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="border: 1px solid #e5e7eb; border-radius: 8px; margin-bottom: 10px; overflow: hidden;"><div style="padding: 16px; background: #f9fafb; border-bottom: 1px solid #e5e7eb; cursor: pointer; font-weight: 600; display: flex; justify-content: space-between; align-items: center;"><span data-gjs-type="text" data-gjs-editable="true">Accordion Item 1</span><span></span></div><div style="padding: 16px; background: #fff;" data-gjs-droppable="*">Content for accordion item 1</div></div><div style="border: 1px solid #e5e7eb; border-radius: 8px; margin-bottom: 10px; overflow: hidden;"><div style="padding: 16px; background: #f9fafb; cursor: pointer; font-weight: 600; display: flex; justify-content: space-between; align-items: center;"><span data-gjs-type="text" data-gjs-editable="true">Accordion Item 2</span><span></span></div></div></div>'}),_t.add("card",{label:"Card",category:"Advanced",content:'<div style="border: 1px solid #e5e7eb; border-radius: 12px; overflow: hidden; background: #fff; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" data-gjs-selectable="true" data-gjs-droppable="*"><div style="padding: 20px; border-bottom: 1px solid #e5e7eb;"><h3 style="margin: 0; font-size: 20px; font-weight: 600; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Card Title</h3></div><div style="padding: 20px;"><p style="margin: 0; color: #495157; line-height: 1.6;" data-gjs-type="text" data-gjs-editable="true">Card content goes here. You can add any content inside this card.</p></div></div>'}),_t.add("testimonial",{label:"Testimonial",category:"Advanced",content:'<div style="padding: 40px; background: #f9fafb; border-radius: 12px; text-align: center; max-width: 600px; margin: 0 auto;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="font-size: 24px; color: #5e72e4; margin-bottom: 20px;">"</div><p style="font-size: 18px; font-style: italic; color: #495157; line-height: 1.8; margin-bottom: 20px;" data-gjs-type="text" data-gjs-editable="true">This is a testimonial. You can edit this text to add your own testimonial content.</p><div style="margin-top: 20px;"><div style="width: 60px; height: 60px; border-radius: 50%; background: #5e72e4; margin: 0 auto 10px;"></div><div style="font-weight: 600; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Customer Name</div><div style="font-size: 14px; color: #6b7280;" data-gjs-type="text" data-gjs-editable="true">Company Name</div></div></div>'}),_t.add("pricing-table",{label:"Pricing Table",category:"Advanced",content:'<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 30px; padding: 40px 20px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="border: 2px solid #e5e7eb; border-radius: 12px; padding: 30px; text-align: center; background: #fff;" data-gjs-droppable="*" data-gjs-selectable="true"><h3 style="font-size: 24px; margin-bottom: 10px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Basic</h3><div style="font-size: 48px; font-weight: 700; color: #5e72e4; margin: 20px 0;"><span data-gjs-type="text" data-gjs-editable="true">$29</span></div><ul style="list-style: none; padding: 0; margin: 20px 0; text-align: left;"><li style="padding: 10px 0; border-bottom: 1px solid #e5e7eb;" data-gjs-type="text" data-gjs-editable="true">Feature 1</li><li style="padding: 10px 0; border-bottom: 1px solid #e5e7eb;" data-gjs-type="text" data-gjs-editable="true">Feature 2</li><li style="padding: 10px 0;" data-gjs-type="text" data-gjs-editable="true">Feature 3</li></ul><button style="width: 100%; padding: 14px; background: #5e72e4; color: white; border: none; border-radius: 6px; font-weight: 600; cursor: pointer; margin-top: 20px;" data-gjs-type="text" data-gjs-editable="true">Get Started</button></div></div>'}),_t.add("footer",{label:"Footer",category:"Layout",content:'<footer style="background: #1e1e1e; color: #ffffff; padding: 60px 40px 20px; margin-top: 80px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="max-width: 1200px; margin: 0 auto;"><div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 40px; margin-bottom: 40px; flex-wrap: wrap;" data-gjs-selectable="true" data-gjs-droppable="*"><div data-gjs-selectable="true" data-gjs-droppable="*"><h3 style="font-size: 18px; font-weight: 700; margin-bottom: 20px; color: #ffffff;" data-gjs-type="text" data-gjs-editable="true">Company</h3><ul style="list-style: none; padding: 0; margin: 0;"><li style="margin-bottom: 12px;"><a href="#" style="color: #9ca3af; text-decoration: none; font-size: 14px; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">About Us</a></li><li style="margin-bottom: 12px;"><a href="#" style="color: #9ca3af; text-decoration: none; font-size: 14px; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Careers</a></li><li style="margin-bottom: 12px;"><a href="#" style="color: #9ca3af; text-decoration: none; font-size: 14px; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Contact</a></li></ul></div><div data-gjs-selectable="true" data-gjs-droppable="*"><h3 style="font-size: 18px; font-weight: 700; margin-bottom: 20px; color: #ffffff;" data-gjs-type="text" data-gjs-editable="true">Products</h3><ul style="list-style: none; padding: 0; margin: 0;"><li style="margin-bottom: 12px;"><a href="#" style="color: #9ca3af; text-decoration: none; font-size: 14px; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Features</a></li><li style="margin-bottom: 12px;"><a href="#" style="color: #9ca3af; text-decoration: none; font-size: 14px; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Pricing</a></li><li style="margin-bottom: 12px;"><a href="#" style="color: #9ca3af; text-decoration: none; font-size: 14px; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">FAQ</a></li></ul></div><div data-gjs-selectable="true" data-gjs-droppable="*"><h3 style="font-size: 18px; font-weight: 700; margin-bottom: 20px; color: #ffffff;" data-gjs-type="text" data-gjs-editable="true">Legal</h3><ul style="list-style: none; padding: 0; margin: 0;"><li style="margin-bottom: 12px;"><a href="#" style="color: #9ca3af; text-decoration: none; font-size: 14px; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Privacy</a></li><li style="margin-bottom: 12px;"><a href="#" style="color: #9ca3af; text-decoration: none; font-size: 14px; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Terms</a></li><li style="margin-bottom: 12px;"><a href="#" style="color: #9ca3af; text-decoration: none; font-size: 14px; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Cookies</a></li></ul></div><div data-gjs-selectable="true" data-gjs-droppable="*"><h3 style="font-size: 18px; font-weight: 700; margin-bottom: 20px; color: #ffffff;" data-gjs-type="text" data-gjs-editable="true">Follow Us</h3><div style="display: flex; gap: 12px; margin-top: 20px;"><a href="#" style="width: 40px; height: 40px; background: #374151; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #ffffff; text-decoration: none; transition: background 0.3s;" data-gjs-type="text" data-gjs-editable="true">f</a><a href="#" style="width: 40px; height: 40px; background: #374151; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #ffffff; text-decoration: none; transition: background 0.3s;" data-gjs-type="text" data-gjs-editable="true">t</a><a href="#" style="width: 40px; height: 40px; background: #374151; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #ffffff; text-decoration: none; transition: background 0.3s;" data-gjs-type="text" data-gjs-editable="true">in</a></div></div></div><div style="border-top: 1px solid #374151; padding-top: 20px; text-align: center; color: #9ca3af; font-size: 14px;" data-gjs-selectable="true" data-gjs-droppable="*"><p style="margin: 0;" data-gjs-type="text" data-gjs-editable="true"> 2024 Your Company. All rights reserved.</p></div></div></footer>'}),_t.add("hero-section",{label:"Hero Section",category:"Layout",content:'<section style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 100px 40px; text-align: center; color: #ffffff;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="max-width: 800px; margin: 0 auto;"><h1 style="font-size: 56px; font-weight: 800; margin-bottom: 24px; line-height: 1.2;" data-gjs-type="text" data-gjs-editable="true">Welcome to Our Platform</h1><p style="font-size: 20px; margin-bottom: 40px; line-height: 1.6; opacity: 0.9;" data-gjs-type="text" data-gjs-editable="true">Build amazing experiences with our powerful tools and features</p><div style="display: flex; gap: 16px; justify-content: center; flex-wrap: wrap;" data-gjs-selectable="true" data-gjs-droppable="*"><button style="padding: 16px 32px; background: #ffffff; color: #667eea; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: transform 0.3s;" data-gjs-type="text" data-gjs-editable="true">Get Started</button><button style="padding: 16px 32px; background: transparent; color: #ffffff; border: 2px solid #ffffff; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: transform 0.3s;" data-gjs-type="text" data-gjs-editable="true">Learn More</button></div></div></section>'}),_t.add("feature-section",{label:"Feature Section",category:"Layout",content:'<section style="padding: 80px 40px; background: #f9fafb;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="max-width: 1200px; margin: 0 auto;"><h2 style="text-align: center; font-size: 42px; font-weight: 700; margin-bottom: 16px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Our Features</h2><p style="text-align: center; font-size: 18px; color: #6b7280; margin-bottom: 60px; max-width: 600px; margin-left: auto; margin-right: auto;" data-gjs-type="text" data-gjs-editable="true">Everything you need to build amazing websites</p><div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 40px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="text-align: center; padding: 40px 20px; background: #ffffff; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);" data-gjs-selectable="true" data-gjs-droppable="*"><div style="width: 64px; height: 64px; background: #5e72e4; border-radius: 12px; margin: 0 auto 24px; display: flex; align-items: center; justify-content: center; color: white; font-size: 32px;"></div><h3 style="font-size: 24px; font-weight: 600; margin-bottom: 12px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Fast Performance</h3><p style="color: #6b7280; line-height: 1.6;" data-gjs-type="text" data-gjs-editable="true">Lightning-fast loading times for better user experience</p></div><div style="text-align: center; padding: 40px 20px; background: #ffffff; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);" data-gjs-selectable="true" data-gjs-droppable="*"><div style="width: 64px; height: 64px; background: #10b981; border-radius: 12px; margin: 0 auto 24px; display: flex; align-items: center; justify-content: center; color: white; font-size: 32px;"></div><h3 style="font-size: 24px; font-weight: 600; margin-bottom: 12px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Secure</h3><p style="color: #6b7280; line-height: 1.6;" data-gjs-type="text" data-gjs-editable="true">Enterprise-grade security to protect your data</p></div><div style="text-align: center; padding: 40px 20px; background: #ffffff; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);" data-gjs-selectable="true" data-gjs-droppable="*"><div style="width: 64px; height: 64px; background: #f59e0b; border-radius: 12px; margin: 0 auto 24px; display: flex; align-items: center; justify-content: center; color: white; font-size: 32px;"></div><h3 style="font-size: 24px; font-weight: 600; margin-bottom: 12px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Responsive</h3><p style="color: #6b7280; line-height: 1.6;" data-gjs-type="text" data-gjs-editable="true">Works perfectly on all devices and screen sizes</p></div></div></div></section>'}),_t.add("team-section",{label:"Team Section",category:"Advanced",content:'<section style="padding: 80px 40px; background: #ffffff;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="max-width: 1200px; margin: 0 auto;"><h2 style="text-align: center; font-size: 42px; font-weight: 700; margin-bottom: 16px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Our Team</h2><p style="text-align: center; font-size: 18px; color: #6b7280; margin-bottom: 60px;" data-gjs-type="text" data-gjs-editable="true">Meet the talented people behind our success</p><div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 30px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="text-align: center;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="width: 200px; height: 200px; border-radius: 50%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; color: white; font-size: 64px; font-weight: 700;">JD</div><h3 style="font-size: 20px; font-weight: 600; margin-bottom: 8px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">John Doe</h3><p style="color: #6b7280; margin-bottom: 12px;" data-gjs-type="text" data-gjs-editable="true">CEO & Founder</p><div style="display: flex; gap: 12px; justify-content: center;"><a href="#" style="color: #6b7280; text-decoration: none;" data-gjs-type="text" data-gjs-editable="true">in</a><a href="#" style="color: #6b7280; text-decoration: none;" data-gjs-type="text" data-gjs-editable="true">@</a></div></div><div style="text-align: center;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="width: 200px; height: 200px; border-radius: 50%; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; color: white; font-size: 64px; font-weight: 700;">JS</div><h3 style="font-size: 20px; font-weight: 600; margin-bottom: 8px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Jane Smith</h3><p style="color: #6b7280; margin-bottom: 12px;" data-gjs-type="text" data-gjs-editable="true">CTO</p><div style="display: flex; gap: 12px; justify-content: center;"><a href="#" style="color: #6b7280; text-decoration: none;" data-gjs-type="text" data-gjs-editable="true">in</a><a href="#" style="color: #6b7280; text-decoration: none;" data-gjs-type="text" data-gjs-editable="true">@</a></div></div><div style="text-align: center;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="width: 200px; height: 200px; border-radius: 50%; background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; color: white; font-size: 64px; font-weight: 700;">MJ</div><h3 style="font-size: 20px; font-weight: 600; margin-bottom: 8px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Mike Johnson</h3><p style="color: #6b7280; margin-bottom: 12px;" data-gjs-type="text" data-gjs-editable="true">Designer</p><div style="display: flex; gap: 12px; justify-content: center;"><a href="#" style="color: #6b7280; text-decoration: none;" data-gjs-type="text" data-gjs-editable="true">in</a><a href="#" style="color: #6b7280; text-decoration: none;" data-gjs-type="text" data-gjs-editable="true">@</a></div></div><div style="text-align: center;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="width: 200px; height: 200px; border-radius: 50%; background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; color: white; font-size: 64px; font-weight: 700;">SW</div><h3 style="font-size: 20px; font-weight: 600; margin-bottom: 8px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Sarah Williams</h3><p style="color: #6b7280; margin-bottom: 12px;" data-gjs-type="text" data-gjs-editable="true">Developer</p><div style="display: flex; gap: 12px; justify-content: center;"><a href="#" style="color: #6b7280; text-decoration: none;" data-gjs-type="text" data-gjs-editable="true">in</a><a href="#" style="color: #6b7280; text-decoration: none;" data-gjs-type="text" data-gjs-editable="true">@</a></div></div></div></div></section>'}),_t.add("faq-section",{label:"FAQ Section",category:"Advanced",content:'<section style="padding: 80px 40px; background: #f9fafb;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="max-width: 800px; margin: 0 auto;"><h2 style="text-align: center; font-size: 42px; font-weight: 700; margin-bottom: 16px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Frequently Asked Questions</h2><p style="text-align: center; font-size: 18px; color: #6b7280; margin-bottom: 60px;" data-gjs-type="text" data-gjs-editable="true">Everything you need to know</p><div style="display: flex; flex-direction: column; gap: 16px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="background: #ffffff; border-radius: 12px; padding: 24px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);" data-gjs-selectable="true" data-gjs-droppable="*"><div style="display: flex; justify-content: space-between; align-items: center; cursor: pointer;"><h3 style="font-size: 18px; font-weight: 600; color: #1e1e1e; margin: 0;" data-gjs-type="text" data-gjs-editable="true">What is your return policy?</h3><span style="font-size: 24px; color: #6b7280;">+</span></div><p style="margin-top: 16px; color: #6b7280; line-height: 1.6; display: none;" data-gjs-type="text" data-gjs-editable="true">We offer a 30-day money-back guarantee on all our products.</p></div><div style="background: #ffffff; border-radius: 12px; padding: 24px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);" data-gjs-selectable="true" data-gjs-droppable="*"><div style="display: flex; justify-content: space-between; align-items: center; cursor: pointer;"><h3 style="font-size: 18px; font-weight: 600; color: #1e1e1e; margin: 0;" data-gjs-type="text" data-gjs-editable="true">How do I cancel my subscription?</h3><span style="font-size: 24px; color: #6b7280;">+</span></div><p style="margin-top: 16px; color: #6b7280; line-height: 1.6; display: none;" data-gjs-type="text" data-gjs-editable="true">You can cancel your subscription anytime from your account settings.</p></div><div style="background: #ffffff; border-radius: 12px; padding: 24px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);" data-gjs-selectable="true" data-gjs-droppable="*"><div style="display: flex; justify-content: space-between; align-items: center; cursor: pointer;"><h3 style="font-size: 18px; font-weight: 600; color: #1e1e1e; margin: 0;" data-gjs-type="text" data-gjs-editable="true">Do you offer customer support?</h3><span style="font-size: 24px; color: #6b7280;">+</span></div><p style="margin-top: 16px; color: #6b7280; line-height: 1.6; display: none;" data-gjs-type="text" data-gjs-editable="true">Yes, we offer 24/7 customer support via email and live chat.</p></div></div></div></section>'}),_t.add("blog-card",{label:"Blog Post Card",category:"Advanced",content:'<div style="border: 1px solid #e5e7eb; border-radius: 12px; overflow: hidden; background: #ffffff; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: transform 0.3s;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="width: 100%; height: 200px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); position: relative;" data-gjs-selectable="true"><div style="position: absolute; top: 16px; left: 16px; background: rgba(255,255,255,0.9); padding: 6px 12px; border-radius: 6px; font-size: 12px; font-weight: 600; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Category</div></div><div style="padding: 24px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px; font-size: 14px; color: #6b7280;"><span data-gjs-type="text" data-gjs-editable="true">Jan 15, 2024</span><span></span><span data-gjs-type="text" data-gjs-editable="true">5 min read</span></div><h3 style="font-size: 24px; font-weight: 700; margin-bottom: 12px; color: #1e1e1e; line-height: 1.3;" data-gjs-type="text" data-gjs-editable="true">Blog Post Title</h3><p style="color: #6b7280; line-height: 1.6; margin-bottom: 20px;" data-gjs-type="text" data-gjs-editable="true">This is a preview of the blog post content. You can edit this text to add your own content.</p><a href="#" style="color: #5e72e4; text-decoration: none; font-weight: 600; font-size: 14px;" data-gjs-type="text" data-gjs-editable="true">Read More </a></div></div>'});const ps='<div style="border: 1px solid #e5e7eb; border-radius: 12px; overflow: hidden; background: #ffffff; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: transform 0.3s;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="width: 100%; height: 250px; background: #f3f4f6; position: relative; display: flex; align-items: center; justify-content: center;" data-gjs-selectable="true"><div style="width: 150px; height: 150px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px;"></div><div style="position: absolute; top: 12px; right: 12px; background: #ffffff; width: 36px; height: 36px; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 4px rgba(0,0,0,0.1); cursor: pointer;"></div></div><div style="padding: 20px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;"><span style="background: #fef3c7; color: #92400e; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: 600;" data-gjs-type="text" data-gjs-editable="true">New</span><span style="color: #6b7280; font-size: 14px;" data-gjs-type="text" data-gjs-editable="true">In Stock</span></div><h3 style="font-size: 20px; font-weight: 600; margin-bottom: 8px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Product Name</h3><p style="color: #6b7280; font-size: 14px; margin-bottom: 16px; line-height: 1.5;" data-gjs-type="text" data-gjs-editable="true">Product description goes here</p><div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;"><div><span style="font-size: 24px; font-weight: 700; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">$99</span><span style="font-size: 16px; color: #9ca3af; text-decoration: line-through; margin-left: 8px;" data-gjs-type="text" data-gjs-editable="true">$149</span></div><div style="color: #f59e0b; font-size: 14px;"></div></div><button style="width: 100%; padding: 12px; background: #5e72e4; color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer;" data-gjs-type="text" data-gjs-editable="true">Add to Cart</button></div></div>';_t.add("product-card",{label:"Product Card",category:"Advanced",content:ps,activate:!0}),je.on("block:drag:stop",Ie=>{Ie&&Ie.get&&Ie.get("id")==="product-card"&&setTimeout(()=>{const it=je.getSelected();let Et=null;const Mt=je.getWrapper();if(Mt){const Er=Mt.components();Er&&Er.length>0&&(Et=Er.at(-1))}const Pt=prompt("How many product cards would you like to add?","1");if(!Pt){Et&&Et.remove();return}const or=parseInt(Pt,10);if(isNaN(or)||or<1){alert("Please enter a valid number greater than 0"),Et&&Et.remove();return}if(or>50&&!window.confirm(`You're about to add ${or} product cards. This might slow down the editor. Continue?`)){Et&&Et.remove();return}const Vt=je.getWrapper(),Ft=je.getSelected();let Cr=Vt;if(Ft&&Ft.get&&Ft.get("type")!=="wrapper")if(Ft.get("droppable")||Ft.getAttributes?.()?.["data-gjs-droppable"]==="*")Cr=Ft;else try{const Yr=Ft.parent();Yr&&Yr.get&&Yr.get("type")!=="wrapper"&&(Yr.get("droppable")||Yr.getAttributes?.()?.["data-gjs-droppable"]==="*")&&(Cr=Yr)}catch{}Et&&Et.remove&&Et.remove();const fr=Cr.components().add('<div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 24px; padding: 20px;" data-gjs-droppable="*" data-gjs-selectable="true"></div>'),Rr=Array.isArray(fr)?fr[0]:fr;if(!Rr||typeof Rr.set!="function"){console.error("Failed to create container");return}Rr.set({selectable:!0,hoverable:!0,draggable:!0,stylable:!0,droppable:"*"},{silent:!0});for(let Er=0;Er<or;Er++){const Yr=Rr.components().add(ps),Gr=Array.isArray(Yr)?Yr[0]:Yr;if(Gr&&typeof Gr.set=="function"&&(Gr.set({selectable:!0,hoverable:!0,draggable:!0,stylable:!0,droppable:!1},{silent:!0}),je.CssComposer&&Gr.cid)){let Xr=(Gr.getClasses?Gr.getClasses():[]).find(Vr=>Vr&&!Vr.startsWith("gjs-"));!Xr&&Gr.addClass&&(Xr=`gjs-comp-${Gr.cid}`,Gr.addClass(Xr))}}je.select(Rr),console.log(` Added ${or} product card${or>1?"s":""} to the page`)},100)}),_t.add("stats-section",{label:"Stats Section",category:"Advanced",content:'<section style="padding: 80px 40px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #ffffff;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="max-width: 1200px; margin: 0 auto;"><div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 40px; text-align: center;" data-gjs-selectable="true" data-gjs-droppable="*"><div data-gjs-selectable="true" data-gjs-droppable="*"><div style="font-size: 56px; font-weight: 800; margin-bottom: 12px;" data-gjs-type="text" data-gjs-editable="true">10K+</div><div style="font-size: 18px; opacity: 0.9;" data-gjs-type="text" data-gjs-editable="true">Active Users</div></div><div data-gjs-selectable="true" data-gjs-droppable="*"><div style="font-size: 56px; font-weight: 800; margin-bottom: 12px;" data-gjs-type="text" data-gjs-editable="true">500+</div><div style="font-size: 18px; opacity: 0.9;" data-gjs-type="text" data-gjs-editable="true">Projects</div></div><div data-gjs-selectable="true" data-gjs-droppable="*"><div style="font-size: 56px; font-weight: 800; margin-bottom: 12px;" data-gjs-type="text" data-gjs-editable="true">98%</div><div style="font-size: 18px; opacity: 0.9;" data-gjs-type="text" data-gjs-editable="true">Satisfaction</div></div><div data-gjs-selectable="true" data-gjs-droppable="*"><div style="font-size: 56px; font-weight: 800; margin-bottom: 12px;" data-gjs-type="text" data-gjs-editable="true">24/7</div><div style="font-size: 18px; opacity: 0.9;" data-gjs-type="text" data-gjs-editable="true">Support</div></div></div></div></section>'}),_t.add("cta-section",{label:"Call to Action",category:"Layout",content:'<section style="padding: 80px 40px; background: #5e72e4; color: #ffffff; text-align: center;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="max-width: 800px; margin: 0 auto;"><h2 style="font-size: 42px; font-weight: 700; margin-bottom: 20px; line-height: 1.2;" data-gjs-type="text" data-gjs-editable="true">Ready to Get Started?</h2><p style="font-size: 20px; margin-bottom: 40px; opacity: 0.9; line-height: 1.6;" data-gjs-type="text" data-gjs-editable="true">Join thousands of satisfied customers and start building today</p><div style="display: flex; gap: 16px; justify-content: center; flex-wrap: wrap;" data-gjs-selectable="true" data-gjs-droppable="*"><button style="padding: 16px 40px; background: #ffffff; color: #5e72e4; border: none; border-radius: 8px; font-size: 18px; font-weight: 600; cursor: pointer; transition: transform 0.3s;" data-gjs-type="text" data-gjs-editable="true">Start Free Trial</button><button style="padding: 16px 40px; background: transparent; color: #ffffff; border: 2px solid #ffffff; border-radius: 8px; font-size: 18px; font-weight: 600; cursor: pointer; transition: transform 0.3s;" data-gjs-type="text" data-gjs-editable="true">Contact Sales</button></div></div></section>'}),_t.add("social-links",{label:"Social Media Links",category:"Basic",content:'<div style="padding: 30px; text-align: center;" data-gjs-selectable="true" data-gjs-droppable="*"><h3 style="font-size: 20px; font-weight: 600; margin-bottom: 20px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Follow Us</h3><div style="display: flex; gap: 16px; justify-content: center; flex-wrap: wrap;" data-gjs-selectable="true" data-gjs-droppable="*"><a href="#" style="width: 50px; height: 50px; background: #1877f2; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #ffffff; text-decoration: none; font-size: 24px; font-weight: 700; transition: transform 0.3s;" data-gjs-type="text" data-gjs-editable="true">f</a><a href="#" style="width: 50px; height: 50px; background: #1da1f2; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #ffffff; text-decoration: none; font-size: 24px; font-weight: 700; transition: transform 0.3s;" data-gjs-type="text" data-gjs-editable="true">t</a><a href="#" style="width: 50px; height: 50px; background: #0077b5; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #ffffff; text-decoration: none; font-size: 24px; font-weight: 700; transition: transform 0.3s;" data-gjs-type="text" data-gjs-editable="true">in</a><a href="#" style="width: 50px; height: 50px; background: #e4405f; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #ffffff; text-decoration: none; font-size: 24px; font-weight: 700; transition: transform 0.3s;" data-gjs-type="text" data-gjs-editable="true">ig</a><a href="#" style="width: 50px; height: 50px; background: #ff0000; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #ffffff; text-decoration: none; font-size: 24px; font-weight: 700; transition: transform 0.3s;" data-gjs-type="text" data-gjs-editable="true">yt</a></div></div>'}),_t.add("breadcrumbs",{label:"Breadcrumbs",category:"Basic",content:'<nav style="padding: 20px 40px; background: #f9fafb; border-bottom: 1px solid #e5e7eb;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="max-width: 1200px; margin: 0 auto;"><div style="display: flex; align-items: center; gap: 8px; font-size: 14px; color: #6b7280;" data-gjs-selectable="true" data-gjs-droppable="*"><a href="#" style="color: #5e72e4; text-decoration: none;" data-gjs-type="text" data-gjs-editable="true">Home</a><span>/</span><a href="#" style="color: #5e72e4; text-decoration: none;" data-gjs-type="text" data-gjs-editable="true">Category</a><span>/</span><span style="color: #1e1e1e; font-weight: 500;" data-gjs-type="text" data-gjs-editable="true">Current Page</span></div></div></nav>'}),_t.add("sidebar",{label:"Sidebar",category:"Layout",content:'<aside style="background: #f9fafb; padding: 30px; border-radius: 12px; min-height: 400px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="margin-bottom: 30px;" data-gjs-selectable="true" data-gjs-droppable="*"><h3 style="font-size: 20px; font-weight: 700; margin-bottom: 16px; color: #1e1e1e; border-bottom: 2px solid #e5e7eb; padding-bottom: 12px;" data-gjs-type="text" data-gjs-editable="true">Categories</h3><ul style="list-style: none; padding: 0; margin: 0;"><li style="margin-bottom: 12px;"><a href="#" style="color: #6b7280; text-decoration: none; font-size: 14px; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Category 1</a></li><li style="margin-bottom: 12px;"><a href="#" style="color: #6b7280; text-decoration: none; font-size: 14px; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Category 2</a></li><li style="margin-bottom: 12px;"><a href="#" style="color: #6b7280; text-decoration: none; font-size: 14px; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Category 3</a></li></ul></div><div style="margin-bottom: 30px;" data-gjs-selectable="true" data-gjs-droppable="*"><h3 style="font-size: 20px; font-weight: 700; margin-bottom: 16px; color: #1e1e1e; border-bottom: 2px solid #e5e7eb; padding-bottom: 12px;" data-gjs-type="text" data-gjs-editable="true">Recent Posts</h3><div style="margin-bottom: 16px; padding-bottom: 16px; border-bottom: 1px solid #e5e7eb;"><a href="#" style="color: #1e1e1e; text-decoration: none; font-weight: 600; font-size: 14px; display: block; margin-bottom: 8px;" data-gjs-type="text" data-gjs-editable="true">Recent Post Title</a><span style="color: #6b7280; font-size: 12px;" data-gjs-type="text" data-gjs-editable="true">Jan 15, 2024</span></div><div style="margin-bottom: 16px; padding-bottom: 16px; border-bottom: 1px solid #e5e7eb;"><a href="#" style="color: #1e1e1e; text-decoration: none; font-weight: 600; font-size: 14px; display: block; margin-bottom: 8px;" data-gjs-type="text" data-gjs-editable="true">Another Post Title</a><span style="color: #6b7280; font-size: 12px;" data-gjs-type="text" data-gjs-editable="true">Jan 10, 2024</span></div></div><div data-gjs-selectable="true" data-gjs-droppable="*"><h3 style="font-size: 20px; font-weight: 700; margin-bottom: 16px; color: #1e1e1e; border-bottom: 2px solid #e5e7eb; padding-bottom: 12px;" data-gjs-type="text" data-gjs-editable="true">Tags</h3><div style="display: flex; flex-wrap: wrap; gap: 8px;"><span style="background: #e5e7eb; color: #1e1e1e; padding: 6px 12px; border-radius: 6px; font-size: 12px; font-weight: 500;" data-gjs-type="text" data-gjs-editable="true">Tag 1</span><span style="background: #e5e7eb; color: #1e1e1e; padding: 6px 12px; border-radius: 6px; font-size: 12px; font-weight: 500;" data-gjs-type="text" data-gjs-editable="true">Tag 2</span><span style="background: #e5e7eb; color: #1e1e1e; padding: 6px 12px; border-radius: 6px; font-size: 12px; font-weight: 500;" data-gjs-type="text" data-gjs-editable="true">Tag 3</span></div></div></aside>'}),_t.add("progress-bar",{label:"Progress Bar",category:"Advanced",content:'<div class="ziplofy-progress-bar" style="padding: 30px; background: #ffffff; border-radius: 12px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="margin-bottom: 20px;"><div style="display: flex; justify-content: space-between; margin-bottom: 8px;"><span class="progress-label" style="font-size: 14px; font-weight: 600; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Skill Name</span><span class="progress-percentage" style="font-size: 14px; font-weight: 600; color: #5e72e4;" data-gjs-type="text" data-gjs-editable="true">75%</span></div><div class="progress-bar-container" style="width: 100%; height: 12px; background: #e5e7eb; border-radius: 6px; overflow: hidden;"><div class="progress-bar-fill" style="width: 75%; height: 100%; background: linear-gradient(90deg, #5e72e4 0%, #667eea 100%); border-radius: 6px; transition: width 0.3s ease;"></div></div></div></div>'}),_t.add("counter",{label:"Counter",category:"Advanced",content:'<div style="text-align: center; padding: 40px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 16px; color: #ffffff;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="font-size: 64px; font-weight: 800; margin-bottom: 12px; line-height: 1;" data-gjs-type="text" data-gjs-editable="true">1,234</div><div style="font-size: 20px; font-weight: 500; opacity: 0.9;" data-gjs-type="text" data-gjs-editable="true">Total Users</div></div>'}),_t.add("image-carousel",{label:"Image Carousel",category:"Media",content:'<div style="position: relative; padding: 20px; background: #ffffff; border-radius: 12px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="display: flex; gap: 16px; overflow-x: auto; scroll-snap-type: x mandatory; scrollbar-width: none; -ms-overflow-style: none;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="min-width: 300px; scroll-snap-align: start; flex-shrink: 0;" data-gjs-selectable="true"><img src="https://via.placeholder.com/600x400/667eea/ffffff?text=Slide+1" alt="Carousel Image" style="width: 100%; height: auto; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);" /></div><div style="min-width: 300px; scroll-snap-align: start; flex-shrink: 0;" data-gjs-selectable="true"><img src="https://via.placeholder.com/600x400/764ba2/ffffff?text=Slide+2" alt="Carousel Image" style="width: 100%; height: auto; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);" /></div><div style="min-width: 300px; scroll-snap-align: start; flex-shrink: 0;" data-gjs-selectable="true"><img src="https://via.placeholder.com/600x400/f093fb/ffffff?text=Slide+3" alt="Carousel Image" style="width: 100%; height: auto; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);" /></div></div><div style="display: flex; justify-content: center; gap: 8px; margin-top: 16px;"><div style="width: 12px; height: 12px; border-radius: 50%; background: #5e72e4;"></div><div style="width: 12px; height: 12px; border-radius: 50%; background: #e5e7eb;"></div><div style="width: 12px; height: 12px; border-radius: 50%; background: #e5e7eb;"></div></div></div>'}),_t.add("card-hover",{label:"Card Hover",category:"Advanced",content:'<div style="border: 1px solid #e5e7eb; border-radius: 16px; overflow: hidden; background: #ffffff; box-shadow: 0 4px 6px rgba(0,0,0,0.1); transition: transform 0.3s ease, box-shadow 0.3s ease; cursor: pointer;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="width: 100%; height: 200px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); position: relative; overflow: hidden;" data-gjs-selectable="true"><div style="position: absolute; top: 16px; right: 16px; background: rgba(255,255,255,0.2); backdrop-filter: blur(10px); padding: 8px 16px; border-radius: 20px; font-size: 12px; font-weight: 600; color: #ffffff;" data-gjs-type="text" data-gjs-editable="true">Featured</div></div><div style="padding: 24px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px;"><span style="background: #fef3c7; color: #92400e; padding: 4px 12px; border-radius: 6px; font-size: 12px; font-weight: 600;" data-gjs-type="text" data-gjs-editable="true">Category</span><span style="color: #6b7280; font-size: 12px;" data-gjs-type="text" data-gjs-editable="true">Jan 15, 2024</span></div><h3 style="font-size: 24px; font-weight: 700; margin-bottom: 12px; color: #1e1e1e; line-height: 1.3;" data-gjs-type="text" data-gjs-editable="true">Card Title</h3><p style="color: #6b7280; line-height: 1.6; margin-bottom: 20px;" data-gjs-type="text" data-gjs-editable="true">This is an advanced card with hover effects. Edit this content to customize.</p><a href="#" style="color: #5e72e4; text-decoration: none; font-weight: 600; font-size: 14px; display: inline-flex; align-items: center; gap: 8px;" data-gjs-type="text" data-gjs-editable="true">Learn More </a></div></div>'}),_t.add("timeline",{label:"Timeline",category:"Advanced",content:'<div style="padding: 40px; background: #ffffff; position: relative;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="position: relative; padding-left: 40px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="position: absolute; left: 0; top: 0; bottom: 0; width: 2px; background: #e5e7eb;"></div><div style="position: relative; margin-bottom: 40px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="position: absolute; left: -32px; top: 0; width: 16px; height: 16px; border-radius: 50%; background: #5e72e4; border: 3px solid #ffffff; box-shadow: 0 0 0 2px #5e72e4;"></div><div style="background: #f9fafb; padding: 24px; border-radius: 12px; border-left: 3px solid #5e72e4;"><div style="font-size: 14px; font-weight: 600; color: #5e72e4; margin-bottom: 8px;" data-gjs-type="text" data-gjs-editable="true">2024</div><h3 style="font-size: 20px; font-weight: 700; margin-bottom: 8px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Event Title</h3><p style="color: #6b7280; line-height: 1.6;" data-gjs-type="text" data-gjs-editable="true">Event description goes here. You can edit this text.</p></div></div><div style="position: relative; margin-bottom: 40px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="position: absolute; left: -32px; top: 0; width: 16px; height: 16px; border-radius: 50%; background: #10b981; border: 3px solid #ffffff; box-shadow: 0 0 0 2px #10b981;"></div><div style="background: #f9fafb; padding: 24px; border-radius: 12px; border-left: 3px solid #10b981;"><div style="font-size: 14px; font-weight: 600; color: #10b981; margin-bottom: 8px;" data-gjs-type="text" data-gjs-editable="true">2023</div><h3 style="font-size: 20px; font-weight: 700; margin-bottom: 8px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Another Event</h3><p style="color: #6b7280; line-height: 1.6;" data-gjs-type="text" data-gjs-editable="true">Another event description. Customize as needed.</p></div></div></div></div>'}),_t.add("testimonials-slider",{label:"Testimonials Slider",category:"Advanced",content:'<section style="padding: 80px 40px; background: #f9fafb;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="max-width: 1200px; margin: 0 auto;"><h2 style="text-align: center; font-size: 42px; font-weight: 700; margin-bottom: 60px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">What Our Clients Say</h2><div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 30px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="background: #ffffff; padding: 32px; border-radius: 16px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);" data-gjs-selectable="true" data-gjs-droppable="*"><div style="color: #f59e0b; font-size: 20px; margin-bottom: 16px;"></div><p style="font-size: 16px; line-height: 1.7; color: #495157; margin-bottom: 24px; font-style: italic;" data-gjs-type="text" data-gjs-editable="true">"Excellent service and amazing results. Highly recommended!"</p><div style="display: flex; align-items: center; gap: 16px;"><div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 20px;">JD</div><div><div style="font-weight: 600; color: #1e1e1e; margin-bottom: 4px;" data-gjs-type="text" data-gjs-editable="true">John Doe</div><div style="font-size: 14px; color: #6b7280;" data-gjs-type="text" data-gjs-editable="true">CEO, Company</div></div></div></div><div style="background: #ffffff; padding: 32px; border-radius: 16px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);" data-gjs-selectable="true" data-gjs-droppable="*"><div style="color: #f59e0b; font-size: 20px; margin-bottom: 16px;"></div><p style="font-size: 16px; line-height: 1.7; color: #495157; margin-bottom: 24px; font-style: italic;" data-gjs-type="text" data-gjs-editable="true">"Outstanding quality and professional team. Very satisfied!"</p><div style="display: flex; align-items: center; gap: 16px;"><div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 20px;">JS</div><div><div style="font-weight: 600; color: #1e1e1e; margin-bottom: 4px;" data-gjs-type="text" data-gjs-editable="true">Jane Smith</div><div style="font-size: 14px; color: #6b7280;" data-gjs-type="text" data-gjs-editable="true">CTO, Tech Corp</div></div></div></div><div style="background: #ffffff; padding: 32px; border-radius: 16px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);" data-gjs-selectable="true" data-gjs-droppable="*"><div style="color: #f59e0b; font-size: 20px; margin-bottom: 16px;"></div><p style="font-size: 16px; line-height: 1.7; color: #495157; margin-bottom: 24px; font-style: italic;" data-gjs-type="text" data-gjs-editable="true">"Best decision we made. Exceeded all expectations!"</p><div style="display: flex; align-items: center; gap: 16px;"><div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 20px;">MJ</div><div><div style="font-weight: 600; color: #1e1e1e; margin-bottom: 4px;" data-gjs-type="text" data-gjs-editable="true">Mike Johnson</div><div style="font-size: 14px; color: #6b7280;" data-gjs-type="text" data-gjs-editable="true">Founder, Startup</div></div></div></div></div></div></section>'}),_t.add("modal",{label:"Modal Popup",category:"Advanced",content:'<div style="padding: 20px; text-align: center;" data-gjs-selectable="true" data-gjs-droppable="*"><button style="padding: 14px 32px; background: #5e72e4; color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s;" data-gjs-type="text" data-gjs-editable="true">Open Modal</button><div style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="background: #ffffff; padding: 40px; border-radius: 16px; max-width: 500px; width: 90%; position: relative; box-shadow: 0 20px 60px rgba(0,0,0,0.3);" data-gjs-selectable="true" data-gjs-droppable="*"><button style="position: absolute; top: 16px; right: 16px; background: transparent; border: none; font-size: 24px; cursor: pointer; color: #6b7280; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: background 0.3s;"></button><h2 style="font-size: 28px; font-weight: 700; margin-bottom: 16px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Modal Title</h2><p style="color: #6b7280; line-height: 1.6; margin-bottom: 24px;" data-gjs-type="text" data-gjs-editable="true">This is a modal popup. You can customize the content and styling.</p><button style="padding: 12px 24px; background: #5e72e4; color: white; border: none; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer;" data-gjs-type="text" data-gjs-editable="true">Close</button></div></div></div>'}),_t.add("countdown-timer",{label:"Countdown Timer",category:"Advanced",content:'<div class="ziplofy-countdown-timer" data-countdown-days="30" data-countdown-hours="12" data-countdown-minutes="45" data-countdown-seconds="30" style="padding: 40px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 16px; text-align: center; color: #ffffff;" data-gjs-selectable="true" data-gjs-droppable="*"><h2 style="font-size: 32px; font-weight: 700; margin-bottom: 32px;" data-gjs-type="text" data-gjs-editable="true">Limited Time Offer</h2><div style="display: flex; justify-content: center; gap: 20px; flex-wrap: wrap;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="background: rgba(255,255,255,0.2); backdrop-filter: blur(10px); padding: 20px; border-radius: 12px; min-width: 100px;"><div class="countdown-days" style="font-size: 48px; font-weight: 800; line-height: 1;">30</div><div style="font-size: 14px; margin-top: 8px; opacity: 0.9;">Days</div></div><div style="background: rgba(255,255,255,0.2); backdrop-filter: blur(10px); padding: 20px; border-radius: 12px; min-width: 100px;"><div class="countdown-hours" style="font-size: 48px; font-weight: 800; line-height: 1;">12</div><div style="font-size: 14px; margin-top: 8px; opacity: 0.9;">Hours</div></div><div style="background: rgba(255,255,255,0.2); backdrop-filter: blur(10px); padding: 20px; border-radius: 12px; min-width: 100px;"><div class="countdown-minutes" style="font-size: 48px; font-weight: 800; line-height: 1;">45</div><div style="font-size: 14px; margin-top: 8px; opacity: 0.9;">Minutes</div></div><div style="background: rgba(255,255,255,0.2); backdrop-filter: blur(10px); padding: 20px; border-radius: 12px; min-width: 100px;"><div class="countdown-seconds" style="font-size: 48px; font-weight: 800; line-height: 1;">30</div><div style="font-size: 14px; margin-top: 8px; opacity: 0.9;">Seconds</div></div></div></div>'}),_t.add("button-icon",{label:"Button with Icon",category:"Buttons",content:'<div style="padding: 20px; text-align: center;" data-gjs-selectable="true" data-gjs-droppable="*"><button style="display: inline-flex; align-items: center; gap: 12px; padding: 14px 32px; background: #5e72e4; color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s; box-shadow: 0 4px 6px rgba(94,114,228,0.3);" data-gjs-type="text" data-gjs-editable="true"><span style="font-size: 20px;"></span><span>Get Started</span></button></div>'}),_t.add("video-background",{label:"Video Background",category:"Media",content:'<section style="position: relative; height: 500px; overflow: hidden; display: flex; align-items: center; justify-content: center; color: #ffffff;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); z-index: 1;"></div><div style="position: relative; z-index: 2; text-align: center; padding: 40px; max-width: 800px;" data-gjs-selectable="true" data-gjs-droppable="*"><h1 style="font-size: 56px; font-weight: 800; margin-bottom: 24px; line-height: 1.2; text-shadow: 0 2px 10px rgba(0,0,0,0.3);" data-gjs-type="text" data-gjs-editable="true">Video Background Section</h1><p style="font-size: 20px; margin-bottom: 40px; opacity: 0.95; line-height: 1.6; text-shadow: 0 2px 10px rgba(0,0,0,0.3);" data-gjs-type="text" data-gjs-editable="true">Add your video background here. This section supports video backgrounds.</p><button style="padding: 16px 40px; background: #ffffff; color: #5e72e4; border: none; border-radius: 8px; font-size: 18px; font-weight: 600; cursor: pointer; transition: transform 0.3s; box-shadow: 0 4px 20px rgba(0,0,0,0.2);" data-gjs-type="text" data-gjs-editable="true">Watch Video</button></div></section>'}),_t.add("parallax-section",{label:"Parallax Section",category:"Layout",content:`<section class="ziplofy-parallax-section" style="position: relative; min-height: 600px; overflow: hidden; display: flex; align-items: center; justify-content: center;" data-gjs-selectable="true" data-gjs-droppable="*"><div class="parallax-background" style="position: absolute; top: -20%; left: 0; width: 100%; height: 140%; background-image: linear-gradient(135deg, rgba(102,126,234,0.9) 0%, rgba(118,75,162,0.9) 100%), url('https://via.placeholder.com/1920x1080'); background-size: cover; background-position: center; background-repeat: no-repeat; will-change: transform; transform: translateZ(0);"></div><div class="parallax-content" style="position: relative; z-index: 2; text-align: center; color: #ffffff; padding: 80px 40px; max-width: 800px;" data-gjs-selectable="true" data-gjs-droppable="*"><h1 style="font-size: 56px; font-weight: 800; margin-bottom: 24px; line-height: 1.2; text-shadow: 0 4px 20px rgba(0,0,0,0.3);" data-gjs-type="text" data-gjs-editable="true">Parallax Effect</h1><p style="font-size: 20px; margin-bottom: 40px; line-height: 1.6; opacity: 0.95; text-shadow: 0 2px 10px rgba(0,0,0,0.3);" data-gjs-type="text" data-gjs-editable="true">Create stunning parallax scrolling effects with this section.</p><button style="padding: 16px 40px; background: #ffffff; color: #5e72e4; border: none; border-radius: 8px; font-size: 18px; font-weight: 600; cursor: pointer; transition: transform 0.3s; box-shadow: 0 4px 20px rgba(0,0,0,0.2);" data-gjs-type="text" data-gjs-editable="true">Learn More</button></div></section>`}),_t.add("form-advanced",{label:"Advanced Form",category:"Forms",content:`<form style="max-width: 600px; margin: 0 auto; padding: 40px; background: #ffffff; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);" data-gjs-selectable="true" data-gjs-droppable="*"><h2 style="font-size: 32px; font-weight: 700; margin-bottom: 8px; color: #1e1e1e; text-align: center;" data-gjs-type="text" data-gjs-editable="true">Contact Us</h2><p style="text-align: center; color: #6b7280; margin-bottom: 32px; font-size: 16px;" data-gjs-type="text" data-gjs-editable="true">Fill out the form below and we'll get back to you</p><div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 20px;" data-gjs-selectable="true" data-gjs-droppable="*"><input type="text" placeholder="First Name" style="padding: 14px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 14px; transition: border-color 0.3s;" data-gjs-selectable="true" /><input type="text" placeholder="Last Name" style="padding: 14px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 14px; transition: border-color 0.3s;" data-gjs-selectable="true" /></div><input type="email" placeholder="Email Address" style="width: 100%; padding: 14px; margin-bottom: 20px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 14px; transition: border-color 0.3s; box-sizing: border-box;" data-gjs-selectable="true" /><select style="width: 100%; padding: 14px; margin-bottom: 20px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 14px; background: white; cursor: pointer;" data-gjs-selectable="true"><option>Select Subject</option><option>General Inquiry</option><option>Support</option><option>Sales</option></select><textarea placeholder="Your Message" rows="5" style="width: 100%; padding: 14px; margin-bottom: 20px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 14px; resize: vertical; font-family: inherit; box-sizing: border-box;" data-gjs-selectable="true"></textarea><label style="display: flex; align-items: center; gap: 12px; margin-bottom: 24px; cursor: pointer;"><input type="checkbox" style="width: 20px; height: 20px; cursor: pointer;" data-gjs-selectable="true" /><span style="font-size: 14px; color: #6b7280;">I agree to the terms and conditions</span></label><button type="submit" style="width: 100%; padding: 16px; background: linear-gradient(135deg, #5e72e4 0%, #667eea 100%); color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: transform 0.3s, box-shadow 0.3s; box-shadow: 0 4px 15px rgba(94,114,228,0.3);" data-gjs-selectable="true">Send Message</button></form>`}),_t.add("badge",{label:"Badge",category:"Basic",content:'<div style="padding: 20px; display: flex; gap: 12px; flex-wrap: wrap; align-items: center;" data-gjs-selectable="true" data-gjs-droppable="*"><span style="background: #dbeafe; color: #1e40af; padding: 6px 12px; border-radius: 6px; font-size: 14px; font-weight: 600;" data-gjs-type="text" data-gjs-editable="true">New</span><span style="background: #fef3c7; color: #92400e; padding: 6px 12px; border-radius: 6px; font-size: 14px; font-weight: 600;" data-gjs-type="text" data-gjs-editable="true">Featured</span><span style="background: #d1fae5; color: #065f46; padding: 6px 12px; border-radius: 6px; font-size: 14px; font-weight: 600;" data-gjs-type="text" data-gjs-editable="true">Popular</span><span style="background: #fce7f3; color: #831843; padding: 6px 12px; border-radius: 6px; font-size: 14px; font-weight: 600;" data-gjs-type="text" data-gjs-editable="true">Sale</span></div>'}),_t.add("alert",{label:"Alert",category:"Basic",content:'<div style="padding: 20px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="background: #dbeafe; border-left: 4px solid #3b82f6; padding: 16px; border-radius: 8px; display: flex; align-items: start; gap: 12px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="font-size: 20px; color: #3b82f6;"></div><div style="flex: 1;"><div style="font-weight: 600; color: #1e40af; margin-bottom: 4px;" data-gjs-type="text" data-gjs-editable="true">Information</div><div style="color: #1e3a8a; font-size: 14px; line-height: 1.5;" data-gjs-type="text" data-gjs-editable="true">This is an informational alert. You can customize the message.</div></div></div></div>'}),Object.entries({section:"",container:"","columns-2":"","columns-3":"","columns-4":"",row:"",divider:"",spacer:"",navbar:"","heading-1":"H1","heading-2":"H2","heading-3":"H3","heading-4":"H4",paragraph:"","text-block":"Tx",quote:"",list:"","link-block":"",button:"","button-outline":"","button-text":"Aa",link:"","page-link":"",image:"","image-gallery":"",video:"",icon:"",form:"","form-simple":"","input-text":"T","input-email":"@","input-phone":"","textarea-field":"","form-button":"","input-number":"#","input-password":"","input-date":"","select-dropdown":"",checkbox:"",radio:"",tabs:"",accordion:"",card:"",testimonial:"","pricing-table":"$","google-maps":"",footer:"","hero-section":"","feature-section":"","team-section":"","faq-section":"","blog-card":"","product-card":"","stats-section":"","cta-section":"","social-links":"",breadcrumbs:"",sidebar:"","progress-bar":"",counter:"","image-carousel":"","card-hover":"",timeline:"","testimonials-slider":"",modal:"","countdown-timer":"","button-icon":"","video-background":"","parallax-section":"","form-advanced":"",badge:"",alert:""}).forEach(([Ie,it])=>{const Et=_t.get(Ie);Et&&Et.set({media:`<span class="elementor-widget-icon">${it}</span>`})});const ds=_t&&_t.getAll?_t.getAll().length:0,Ea=_t&&_t.getCategories?_t.getCategories().length:0;console.log(` Blocks registered: ${ds} blocks in ${Ea} categories`),ds===0?console.error(" CRITICAL: No blocks registered! BlockManager might not be initialized correctly."):console.log(" Blocks successfully registered"),[100,300,500,1e3].forEach(Ie=>{setTimeout(()=>{const it=document.getElementById("blocks-panel");if(!it||!_t||ds===0){Ie===1e3&&console.warn(` blocks-panel not ready after ${Ie}ms, blocks may not render`);return}const Et=it.querySelectorAll(".gjs-block");if(Et.length>0&&Ie<1e3){console.log(` Blocks already rendered (${Et.length} found), skipping delay ${Ie}ms`);return}it.style.setProperty("display","block","important"),it.style.setProperty("visibility","visible","important"),it.style.setProperty("opacity","1","important");const Mt=it.closest(".elementor-blocks-wrapper");if(Mt&&(Mt.style.setProperty("display","block","important"),Mt.style.setProperty("visibility","visible","important"),Mt.style.setProperty("opacity","1","important")),Et.length===0){console.log(` Rendering blocks at ${Ie}ms delay...`);try{it.innerHTML="";const Pt=_t.getAll?_t.getAll():[],or=Array.isArray(Pt)?Pt:[];console.log(` Found ${or.length} registered blocks, attempting render...`);let Vt;try{Vt=_t.render(),console.log(` BlockManager.render() called at ${Ie}ms`)}catch(Ft){console.error(" BlockManager.render() threw error:",Ft),Vt=null}i.current=!0,setTimeout(()=>{let Ft=it.querySelectorAll(".gjs-block");if(console.log(` After standard render at ${Ie}ms: ${Ft.length} blocks found in DOM`),Ft.length===0&&or.length>0){console.warn(` BlockManager.render() returned 0 blocks, manually rendering ${or.length} blocks...`),it.innerHTML="";const Cr=document.createElement("div");Cr.className="gjs-blocks-c",Cr.style.setProperty("display","flex","important"),Cr.style.setProperty("flex-direction","column","important"),Cr.style.setProperty("gap","0","important"),Cr.style.setProperty("padding","0","important"),Cr.style.setProperty("background","#ffffff","important"),Cr.style.setProperty("width","100%","important");const Rt={};or.forEach(fr=>{try{const Er=(fr.get?fr.get("category"):fr.category||"Basic")||"Basic";Rt[Er]||(Rt[Er]=[]),Rt[Er].push(fr)}catch(Rr){console.warn("Error getting block category:",Rr),Rt.Basic||(Rt.Basic=[]),Rt.Basic.push(fr)}}),console.log(` Grouped blocks into ${Object.keys(Rt).length} categories:`,Object.keys(Rt)),Object.entries(Rt).forEach(([fr,Rr])=>{const Er=document.createElement("div");Er.className="gjs-block-category",Er.setAttribute("data-open","true");const Yr=document.createElement("div");Yr.className="gjs-block-category-title",Yr.textContent=fr,Yr.style.cursor="pointer",Yr.style.padding="12px 16px",Yr.style.fontSize="11px",Yr.style.fontWeight="600",Yr.style.color="rgba(255, 255, 255, 0.5)",Yr.style.textTransform="uppercase",Yr.style.borderBottom="1px solid rgba(255, 255, 255, 0.05)",Er.appendChild(Yr);const Gr=document.createElement("div");Gr.className="gjs-block-category-blocks",Gr.style.setProperty("display","grid","important"),Gr.style.setProperty("grid-template-columns","repeat(2, 1fr)","important"),Gr.style.setProperty("gap","10px","important"),Gr.style.setProperty("padding","12px","important"),Gr.style.setProperty("background","#ffffff","important"),Rr.forEach(mn=>{try{const Xr=mn.getId?mn.getId():mn.id||"unknown",Vr=mn.get?mn.get("label"):mn.label||Xr,Yn=mn.get?mn.get("media"):mn.media||"",Qr=document.createElement("div");Qr.className="gjs-block",Qr.setAttribute("data-gjs-type",Xr),Qr.style.setProperty("display","flex","important"),Qr.style.setProperty("align-items","center","important"),Qr.style.setProperty("justify-content","center","important"),Qr.style.setProperty("min-height","90px","important"),Qr.style.setProperty("height","90px","important"),Qr.style.setProperty("max-height","90px","important"),Qr.style.setProperty("background","linear-gradient(145deg, #1e1e26 0%, #1a1a22 100%)","important"),Qr.style.setProperty("border-radius","8px","important"),Qr.style.setProperty("cursor","grab","important"),Qr.style.setProperty("color","#fff","important"),Qr.style.setProperty("font-size","12px","important"),Qr.style.setProperty("font-weight","500","important"),Qr.style.setProperty("width","100%","important"),Qr.style.setProperty("max-width","100%","important"),Qr.style.setProperty("box-sizing","border-box","important"),Qr.style.setProperty("position","relative","important"),Qr.style.setProperty("z-index","1","important"),Yn?Qr.innerHTML=Yn:Qr.textContent=Vr,Qr.addEventListener("mousedown",da=>{if(da.preventDefault(),da.stopPropagation(),_t&&typeof _t.startDrag=="function")_t.startDrag(mn,da);else if(je&&je.BlockManager){const Rn=new MouseEvent("mousedown",{bubbles:!0,cancelable:!0,clientX:da.clientX,clientY:da.clientY});Qr.dispatchEvent(Rn)}}),Gr.appendChild(Qr)}catch(Xr){console.warn("Error creating block element:",Xr)}}),Er.appendChild(Gr),Cr.appendChild(Er)}),it.appendChild(Cr),Ft=it.querySelectorAll(".gjs-block"),console.log(` Manually rendered ${Ft.length} blocks in ${Object.keys(Rt).length} categories`)}Ft.length===0&&ds>0&&Ie===1e3?(console.error(" CRITICAL: Blocks registered but still not rendered after all attempts!"),console.error("BlockManager state:",{registeredCount:ds,registeredArrayLength:or.length,hasRender:!!_t.render,panelExists:!!it,panelVisible:it.style.display!=="none",panelParent:it.parentElement?.tagName,panelInnerHTML:it.innerHTML.substring(0,100)})):Ft.length>0&&console.log(` Successfully rendered ${Ft.length} blocks!`)},300)}catch(Pt){console.error(` Error rendering blocks at ${Ie}ms:`,Pt)}}},Ie)}),je.on("load",()=>{try{const Ie=je.getWrapper();if(Ie){Ie.set({droppable:!0,selectable:!0,editable:!1,draggable:!1,hoverable:!1,stylable:!0}),Ie.addClass("gjs-wrapper-body");const it=Ie.getId();if(it){const Vt=Ie.getStyle();if(je.CssComposer&&Object.keys(Vt).length>0){const Ft=je.CssComposer.getRule(`#${it}`);if(Ft){const Cr=Ft.get("style");je.CssComposer.remove(Ft);const Rt=je.CssComposer.getRule(".gjs-wrapper-body")||je.CssComposer.add(".gjs-wrapper-body");Rt&&Cr&&(Rt.set("style",{...Rt.get("style"),...Cr}),console.log(" Migrated wrapper styles from ID to class selector"))}}}const Et=Ie.getStyle();if(!Et||Object.keys(Et).length===0){const Vt=je.CssComposer;if(Vt){const Ft=Vt.add(".gjs-wrapper-body");Ft&&Ft.set("style",{"min-height":"600px",padding:"40px",background:"#fff"})}}const Mt=je.Canvas.getBody();Mt&&(Mt.style.margin="0",Mt.style.padding="0");const Pt=he;let or=null;or=setTimeout(()=>{!ne&&l&&(console.warn("Theme load timeout after 30s - forcing completion"),c(!1),b("Theme load timeout. Please refresh the page."))},3e4),(async()=>{try{let Vt=null,Ft=!1,Cr=!1;if(Pt&&!Ye&&/^[0-9a-fA-F]{24}$/.test(Pt)){Ft=!0;try{const{axiosi:fr}=await up(async()=>{const{axiosi:Er}=await Promise.resolve().then(()=>uE);return{axiosi:Er}},void 0),Rr=await fr.get(`/custom-themes/${Pt}`);if(Rr.data.success&&Rr.data.data){const Er=Rr.data.data,Yr=Er.html||"",Gr=Er.css||"",mn=bn(Yr);if(mn&&mn.length>0)Ke(mn),xt(mn[0].id),Vt={...Er,html:mn[0].html||ge,css:Gr};else{const Xr={id:"page-1",name:"Home",html:Yr||ge,css:Gr||""};Ke([Xr]),xt("page-1"),Vt={...Er,html:Xr.html,css:Gr}}}}catch(fr){fr?.response?.status===404||fr?.response?.status===400?Cr=!0:console.error("Error loading custom theme:",fr)}}if(!Vt&&(Ye||Cr)){Cr||console.log("Loading installed theme...",{themeId:Pt,shouldLoadInstalledTheme:Ye});const Rt=await ot(Cr);if(Rt){console.log(" Installed theme loaded successfully:",Rt.name);const fr={id:"page-1",name:Rt.name||"Home",html:Rt.html||ge,css:Rt.css||""},Rr=Rt.pages&&Rt.pages.length>0?[fr,...Rt.pages]:[fr];console.log(` Loaded ${Rr.length} pages:`,Rr.map(Er=>Er.name)),Ke(Rr),kt.current=Rr,xt("page-1"),Vt=Rt}else Cr?(console.error(" Theme not found as custom theme (404) and failed to load as installed theme",{themeId:Pt,ownerId:Ee||De(),shouldLoadInstalledTheme:Ye,isInstalledMode:le}),y||b("Theme not found. Please check if the theme exists and you have permission to access it.")):(console.error(" Failed to load installed theme - fallbackTheme is null",{themeId:Pt,ownerId:Ee||De(),shouldLoadInstalledTheme:Ye,isInstalledMode:le,resolvedStoreId:Ee,extractedUserId:De()}),y||b("Failed to load theme. Please check the browser console for details.")),console.log("Initializing editor with default content due to theme load failure")}if(ne)return;console.log(" Applying theme to editor:",{hasExisting:!!Vt,hasHtml:!!Vt?.html,hasCss:!!Vt?.css,htmlLength:Vt?.html?.length,cssLength:Vt?.css?.length,themeId:Pt,isInstalledMode:le,shouldLoadInstalledTheme:Ye});try{Vt?.html?(console.log(" Applying existing theme HTML to editor"),rr(Vt.html,Vt.css||"")):(console.warn(" No existing theme found, using default content"),rr(ge,Vt?.css||"")),console.log(" Theme content applied to editor successfully")}catch(Rt){if(console.error(" Error applying page to editor:",Rt),console.error("Error stack:",Rt?.stack),!ne){console.warn(" Continuing with default content due to apply error");try{rr(ge,"")}catch(fr){console.error(" Failed to apply default content:",fr),b(Rt?.message||"Failed to apply theme content. Editor may still work."),c(!1)}}}setTimeout(()=>{if(ne)return;xe("widgets");const Rt=document.getElementById("blocks-panel"),fr=document.querySelector(".elementor-blocks-wrapper");fr&&(fr.style.setProperty("display","block","important"),fr.style.setProperty("visibility","visible","important"),fr.style.setProperty("opacity","1","important")),Rt&&(Rt.style.setProperty("display","block","important"),Rt.style.setProperty("visibility","visible","important"),Rt.style.setProperty("opacity","1","important"))},200),[400,800,1200,2e3].forEach(Rt=>{setTimeout(()=>{const fr=document.getElementById("blocks-panel");if(fr&&je.BlockManager){const Rr=fr.closest(".elementor-blocks-wrapper");Rr&&(Rr.style.setProperty("display","block","important"),Rr.style.setProperty("visibility","visible","important"),Rr.style.setProperty("opacity","1","important"));const Er=fr.querySelectorAll(".gjs-block"),Yr=fr.innerHTML.trim()==="",Gr=!!fr.querySelector(".gjs-blocks-c");Er.length===0&&(Yr||!Gr)?(console.log(`[Theme Load] Blocks missing at ${Rt}ms, re-rendering...`),fr.style.setProperty("display","block","important"),fr.style.setProperty("visibility","visible","important"),fr.style.setProperty("opacity","1","important"),fr.innerHTML="",je.BlockManager.render(),i.current=!0,setTimeout(()=>{const mn=fr.querySelectorAll(".gjs-block");mn.length>0?(mn.forEach(Vr=>{Vr&&(Vr.style.display="flex",Vr.style.visibility="visible",Vr.style.opacity="1",Vr.style.pointerEvents="auto",Vr.style.cursor="grab",Vr.style.position="relative",Vr.style.zIndex="1")}),fr.querySelectorAll(".gjs-block-category").forEach(Vr=>{Vr&&(Vr.style.display="block",Vr.style.visibility="visible")}),console.log(`[Theme Load]  Restored ${mn.length} blocks at ${Rt}ms`)):(console.warn(`[Theme Load]  No blocks found after render at ${Rt}ms`),Rt===2e3&&setTimeout(()=>{fr.querySelectorAll(".gjs-block").length===0&&(console.log("[Theme Load]  Final attempt to restore blocks..."),fr.innerHTML="",je.BlockManager.render(),i.current=!0)},500))},200)):Er.length>0&&(i.current=!0,Er.forEach(Xr=>{Xr&&(Xr.style.display="flex",Xr.style.visibility="visible",Xr.style.opacity="1",Xr.style.pointerEvents="auto",Xr.style.cursor="grab",Xr.style.position="relative",Xr.style.zIndex="1")}),fr.querySelectorAll(".gjs-block-category").forEach(Xr=>{Xr&&(Xr.style.display="block",Xr.style.visibility="visible")}),console.log(`[Theme Load]  Found ${Er.length} existing blocks at ${Rt}ms`))}},Rt)}),Vt?.name&&w(Vt.name),Vt&&Pt?(G(!0),L(!1)):(G(!1),L(!0)),ne||(c(!1),or&&clearTimeout(or))}catch(Vt){if(console.error("Error in editor load handler:",Vt),ne)return;or&&clearTimeout(or);try{rr(ge),ne||c(!1)}catch(Ft){console.error("Error applying default content:",Ft),ne||(b(Ft?.message||"Failed to load theme"),c(!1))}}finally{or&&clearTimeout(or),ne||c(!1)}})()}}catch(Ie){console.error("Error setting up editor load handler:",Ie),loadTimeout&&clearTimeout(loadTimeout),ne||(b(Ie?.message||"Failed to initialize editor"),c(!1))}});let sa=0;je.on("block:drag:start",Ie=>{gt=!0,console.log(" Block drag started:",Ie?.get?.("label")||"unknown");const it=je.getWrapper();if(it){const Et=it.get("droppable");console.log("  Wrapper droppable status:",Et),console.log("  Wrapper exists:",!!it),console.log("  Wrapper components count:",it.components?.()?.length||0),Et||(console.warn("   Wrapper not droppable! Fixing..."),it.set("droppable","*"),console.log("   Set wrapper droppable to: *"));const Mt=it.getEl?.();Mt&&(Mt.style.pointerEvents="auto",Mt.style.minHeight="600px",console.log("   Wrapper element configured for drops"))}else console.error("   NO WRAPPER FOUND!")}),je.on("block:drag:stop",Ie=>{console.log(" Block drag stopped:",Ie?.get?.("label")||"unknown"),setTimeout(()=>{if(gt=!1,Or.size>0){ar&&(clearTimeout(ar),ar=null);const it=Array.from(Or);Or.clear();const Et=it.find(Mt=>{try{const Pt=Mt.getParent();return!Pt||Pt.get("type")==="wrapper"}catch{return!0}})||it[0];Et&&setTimeout(()=>{try{je.select(Et)}catch{}},100)}},300);try{if(!Ie)return;setTimeout(()=>{try{const it=je.getWrapper();if(!it)return;const Et=it.components(),Mt=Et?Et.length:0;if(Ie.get){const Pt=Ie.get("content");if(Pt){const or=it.append(Pt);if(or){const Vt=Array.isArray(or)?or[0]:or;if(Vt){Vt.set({selectable:!0,hoverable:!0,draggable:!0});const Ft=Vt.getEl?.();Ft&&(Ft.style.display="",Ft.style.visibility="visible",Ft.style.opacity="1"),setTimeout(()=>{if(je.select(Vt),je.runCommand("open-sm"),je.LayerManager&&Q==="structure"){const Rt=document.getElementById("layers-panel");Rt&&(document.querySelectorAll(".gjs-layers, .gjs-layer-item, .gjs-layer-item-title").forEach(Rr=>{Rr.closest("#layers-panel")||Rr.remove()}),Rt.innerHTML="",je.LayerManager.render())}},50);const Cr=it.components();sa=Cr?Cr.length:0}}}}}catch(it){console.error("Error in block:drag:stop:",it)}},100)}catch(it){console.error("Error in block:drag:stop handler:",it)}}),je.on("component:add",Ie=>{try{if(!Ie||!Ie.collection||!Ie.cid)return;if(gt){Or.add(Ie);return}ar&&clearTimeout(ar),Or.add(Ie),ar=setTimeout(()=>{const it=Array.from(Or);Or.clear();const Et=it.find(Er=>{try{const Yr=Er.getParent();return!Yr||Yr.get("type")==="wrapper"}catch{return!0}})||it[0];if(!Et)return;const Mt=Et,Pt=je.UndoManager;if(Pt)try{Pt.stop()}catch{}const or=je.getWrapper();if(or){const Er=or.components();sa=Er?Er.length:0}const Vt=Mt.getAttributes?.()||{},Ft=Mt.get?.("tagName")?.toLowerCase?.()||"",Cr=Vt["data-gjs-droppable"]==="*"||Ft==="form",Rt=Er=>{try{const Yr=Er.getAttributes?.()||{},Gr=Er.get?.("tagName")?.toLowerCase?.()||"",mn=Yr["data-gjs-droppable"]==="*"||Gr==="form",Xr=Yr["data-gjs-selectable"]!=="false";if(Er.set({selectable:Xr,hoverable:!0,draggable:!0,stylable:!0,droppable:mn},{silent:!0}),(Yr["data-gjs-editable"]==="true"||Yr["data-gjs-type"]==="text")&&Er.set({editable:!0,type:"text"},{silent:!0}),je.CssComposer){const Vr=Er.cid||Er.getId?.();if(Vr){let Qr=Er.getClasses().find(da=>da&&!da.startsWith("gjs-"));Qr||(Qr=`gjs-comp-${Vr}`,Er.addClass(Qr))}}}catch{}};Rt(Mt);const fr=Er=>{try{const Yr=Er.components();Yr&&Yr.length>0&&Yr.forEach(Gr=>{Rt(Gr),fr(Gr)})}catch{}};if(fr(Mt),Pt)try{Pt.start()}catch{}const Rr=Mt.getEl?.();Rr&&(Rr.style.display="",Rr.style.visibility="visible",Rr.style.opacity="1");try{je.stopCommand("preview")}catch{}requestAnimationFrame(()=>{try{if(Mt&&Mt.cid&&!gt){if(je.select(Mt),Rr)try{je.Canvas.scrollTo(Rr)}catch{}try{je.runCommand("open-sm"),Sn(Mt,100)}catch{}}setTimeout(()=>{try{if(je.LayerManager&&Q==="structure"){const Er=document.getElementById("layers-panel");Er&&(document.querySelectorAll(".gjs-layers, .gjs-layer-item, .gjs-layer-item-title").forEach(Gr=>{Gr.closest("#layers-panel")||Gr.remove()}),Er.innerHTML="",je.LayerManager.render(),setTimeout(()=>{if(je.LayerManager&&Q==="structure"){const Gr=document.getElementById("layers-panel");Gr&&(Gr.innerHTML="",je.LayerManager.render())}},200))}}catch{}},50)}catch{}})},150)}catch(it){console.error("Error in component:add:",it)}});const Is=je.Commands.get("close-sm");Is?je.Commands.add("close-sm",{...Is,run:function(Ie){const it=document.getElementById("style-panel");it&&(it.style.display="block",it.style.visibility="visible",it.style.opacity="1");const Et=a.current?.querySelector(".builder-right-panel");Et&&(Et.style.display="flex",Et.style.visibility="visible",Et.style.opacity="1"),Ie.runCommand("open-sm")}}):je.Commands.add("close-sm",{run:function(Ie){const it=document.getElementById("style-panel");it&&(it.style.display="block",it.style.visibility="visible",it.style.opacity="1");const Et=a.current?.querySelector(".builder-right-panel");Et&&(Et.style.display="flex",Et.style.visibility="visible",Et.style.opacity="1")},stop:function(Ie){}});let ya=null,Ir=null,_r=!1,gt=!1,ar=null,Or=new Set,Mr=null;const Sn=(Ie,it=150)=>{ya&&clearTimeout(ya),ya=setTimeout(()=>{if(!Ie||!je.StyleManager)return;if(!(document.querySelector('.elementor-primary-tab-icon[title="Style"]')?.classList.contains("active")||Q==="style")){console.log("Style tab not active, skipping StyleManager render");return}const Pt=Ie.cid||Ie.getId?.();if(Pt===Ir&&Mr?.innerHTML.trim()!==""){console.log("Same component already rendered, skipping");return}if(Ir=Pt,Mr||(Mr=document.getElementById("style-panel")),!Mr){console.warn("Style panel element not found");return}const or=Mr.closest('.elementor-panel-card[data-panel-type="style"]');if(or)or.style.display="flex",or.style.visibility="visible",or.style.opacity="1";else{console.warn("Style panel not in correct container, attempting to fix...");const Ft=document.querySelector('.elementor-panel-card[data-panel-type="style"]');if(Ft)Ft.style.display="flex",Ft.style.visibility="visible",Ft.style.opacity="1";else{console.error("Style panel card not found in DOM");return}}Mr.style.display="block",Mr.style.visibility="visible",Mr.style.opacity="1",Mr.style.width="100%",Mr.style.height="100%",Mr.style.minHeight="300px",Ie===je.getWrapper()&&(Ie.getClasses().includes("gjs-wrapper-body")||(Ie.addClass("gjs-wrapper-body"),console.log(" Added gjs-wrapper-body class to wrapper"))),requestAnimationFrame(()=>{if(!(document.querySelector('.elementor-primary-tab-icon[title="Style"]')?.classList.contains("active")||Q==="style")){console.log("Style tab no longer active, aborting render");return}try{console.log(" Rendering StyleManager for component:",Pt),je.select(Ie),je.StyleManager.setTarget&&je.StyleManager.setTarget(Ie),Mr.innerHTML="",je.StyleManager.render(),console.log(" StyleManager.render() called"),je.StyleManager.setTarget&&je.StyleManager.setTarget(Ie),setTimeout(()=>{if(!ne&&Ie&&je.StyleManager){const Cr=Mr.querySelectorAll(".gjs-sm-sector");Cr.forEach(Rt=>{const fr=Rt;fr.classList.remove("gjs-sm-sector--closed"),fr.classList.add("gjs-sm-sector--open");const Rr=fr.querySelector(".gjs-sm-sector-content");Rr&&(Rr.style.cssText="display: block !important; visibility: visible !important; opacity: 1 !important; max-height: none !important;")}),console.log(" StyleManager sectors opened:",Cr.length),je.StyleManager.render()}},100)}catch(Cr){console.error(" Error rendering Style Manager:",Cr)}})},it)};let jn=!1;const $n=Ie=>{(Ie.key==="Alt"||Ie.keyCode===18)&&(jn=!0)},Fn=Ie=>{(Ie.key==="Alt"||Ie.keyCode===18)&&(jn=!1)};window.addEventListener("keydown",$n),window.addEventListener("keyup",Fn),Re(()=>{window.removeEventListener("keydown",$n),window.removeEventListener("keyup",Fn)}),je.on("component:selected",Ie=>{try{if(_r)return;if(jn&&Ie)try{const Pt=Ie.getParent();if(Pt&&Pt.get("type")!=="wrapper"){_r=!0,requestAnimationFrame(()=>{je.select(Pt),setTimeout(()=>{_r=!1},100)});return}}catch(Pt){console.warn("Error selecting parent:",Pt)}const it=Ie?.cid||Ie?.getId?.()||null;if(it===Ir){Q==="style"&&je.StyleManager&&Sn(Ie,50);return}if(_r=!0,Ir=it,Ie&&Ie.cid)try{Ie.set({stylable:!0},{silent:!0})}catch{}const Et=a.current?.querySelector(".builder-right-panel");Et&&(Et.style.display="flex",Et.style.visibility="visible",Et.style.opacity="1",Et.style.width="300px",Et.style.flexShrink="0");const Mt=document.getElementById("traits-panel");if(Mt&&je.TraitManager){Mt.style.display="block",Mt.style.visibility="visible",Mt.style.opacity="1";const Pt=Ie?.get("tagName")?.toLowerCase();let or=null,Vt=Pt;try{const Er=Ie.getView?.();Er&&Er.el&&Er.el.nodeType===1&&typeof Er.el.querySelector=="function"&&(or=Er.el,Vt=or.tagName?.toLowerCase()||Pt)}catch(Er){console.warn("Could not get view element:",Er)}let Ft=Vt==="button"||Pt==="button",Cr=Vt==="a"||Pt==="a";if(!Ft&&!Cr&&or&&typeof or.querySelector=="function"){const Er=or.querySelector("button"),Yr=or.querySelector("a");if(Er){Ft=!0;try{const Gr=je.Components.getComponent?je.Components.getComponent(Er):null;Gr&&Gr.cid!==Ie.cid&&(Ie=Gr,requestAnimationFrame(()=>{_r=!0,je.select(Gr),setTimeout(()=>{_r=!1},100)}))}catch{console.log("Could not get button component, using wrapper")}}else if(Yr){Cr=!0;try{const Gr=je.Components.getComponent?je.Components.getComponent(Yr):null;Gr&&Gr.cid!==Ie.cid&&(Ie=Gr,requestAnimationFrame(()=>{_r=!0,je.select(Gr),setTimeout(()=>{_r=!1},100)}))}catch{console.log("Could not get link component, using wrapper")}}}const Rt=kt.current;let fr=Vt==="img"||Pt==="img",Rr=Ie;if(!fr&&or&&typeof or.querySelector=="function"){const Er=or.querySelector("img");if(Er){fr=!0;try{const Yr=je.Components.getComponent?je.Components.getComponent(Er):null;Yr&&Yr.cid!==Ie.cid&&(Rr=Yr,requestAnimationFrame(()=>{_r=!0,je.select(Yr),setTimeout(()=>{_r=!1},100)}))}catch{console.log("Could not get image component, using wrapper")}}}if(fr){Q!=="widgets"&&xe("widgets");const Er=Rr.get("traits")||[],Yr=Er.some(mn=>typeof mn=="object"&&mn.name==="src"||mn==="src"),Gr=Er.some(mn=>typeof mn=="object"&&mn.name==="alt"||mn==="alt");if(!Yr||!Gr){const mn=[];Yr||mn.push({type:"text",name:"src",label:"Image URL",placeholder:"https://example.com/image.jpg",changeProp:!0}),Gr||mn.push({type:"text",name:"alt",label:"Alt Text",placeholder:"Image description",changeProp:!0});const Xr=Er.filter(Rn=>typeof Rn=="string"?Rn!=="src"&&Rn!=="alt":Rn.name!=="src"&&Rn.name!=="alt");Rr.set("traits",[...Xr,...mn]),setTimeout(()=>{je.TraitManager&&typeof je.TraitManager.render=="function"&&je.TraitManager.render()},50);const Vr=Rr.getAttributes?.()||{},Yn=Vr.src||Rr.get("src")||"",Qr=Vr.alt||Rr.get("alt")||"";Yn&&!Rr.get("src")&&Rr.set("src",Yn),Qr&&!Rr.get("alt")&&Rr.set("alt",Qr);const da=()=>{const Rn=Rr.get("src")||"",Qo=Rr.get("alt")||"";if(Rn){Rr.addAttributes({src:Rn});const Jr=Rr.getView();if(Jr&&Jr.el){Jr.el.setAttribute("src",Rn);const hs=Jr.el.tagName==="IMG"?Jr.el:Jr.el.querySelector("img");hs&&hs.setAttribute("src",Rn)}}if(Qo!==void 0){Rr.addAttributes({alt:Qo});const Jr=Rr.getView();if(Jr&&Jr.el){Jr.el.setAttribute("alt",Qo);const hs=Jr.el.tagName==="IMG"?Jr.el:Jr.el.querySelector("img");hs&&hs.setAttribute("alt",Qo)}}Rr.trigger("change"),je.trigger("component:update",Rr)};Rr._updateImageAttributes=da,Rr.on("change:src",()=>{const Rn=Rr._updateImageAttributes;Rn&&setTimeout(Rn,50)}),Rr.on("change:alt",()=>{const Rn=Rr._updateImageAttributes;Rn&&setTimeout(Rn,50)})}}if(Ft||Cr){Q!=="widgets"&&xe("widgets");const Er=Ie.get("traits")||[],Yr=Er.some(Xr=>typeof Xr=="object"&&Xr.name==="linkType"||Xr==="linkType"),Gr=Er.some(Xr=>typeof Xr=="object"&&Xr.name==="pageLink"||Xr==="pageLink"),mn=Xr=>{if(!Xr)return;const Vr=[{id:"",value:"",name:"-- Select Page --"},...(Rt||[]).map(Yn=>({id:Yn.id,value:Yn.id,name:Yn.name}))];Xr.set?Xr.set("options",Vr):Xr.options&&(Xr.options=Vr)};if(!Yr){const Xr=[{type:"select",name:"linkType",label:Ft?"Button Action":"Link Type",options:Ft?[{id:"none",value:"none",name:"No Action"},{id:"page",value:"page",name:"Navigate to Page"},{id:"url",value:"url",name:"Open URL"}]:[{id:"page",value:"page",name:"Link to Page"},{id:"url",value:"url",name:"External URL"}],changeProp:!0},{type:"select",name:"pageLink",label:"Select Page",options:[{id:"",value:"",name:"-- Select Page --"},...(Rt||[]).map(Jr=>({id:Jr.id,value:Jr.id,name:Jr.name}))],changeProp:!0},{type:"text",name:"href",label:"URL",placeholder:"https://example.com or #page-1",changeProp:!0}],Vr=Er.filter(Jr=>typeof Jr=="string"?Jr!=="id"&&Jr!=="title"&&Jr!=="linkType"&&Jr!=="pageLink":Jr.name!=="id"&&Jr.name!=="title"&&Jr.name!=="linkType"&&Jr.name!=="pageLink"&&Jr.name!=="href");Ie.set("traits",[...Vr,...Xr]),setTimeout(()=>{je.TraitManager&&typeof je.TraitManager.render=="function"&&je.TraitManager.render()},50);const Yn=Ie.getAttributes?.()||{},Qr=Yn.href||Ie.get("href")||"",da=Yn["data-page-link"]||"";da?(Ie.set("linkType","page"),Ie.set("pageLink",da),Ie.set("href",`#page-${da}`)):Qr&&Qr!=="#"&&!Qr.startsWith("#")?(Ie.set("linkType","url"),Ie.set("href",Ce(Qr))):Ft?Ie.set("linkType","none"):Ie.set("linkType","page");const Rn=()=>{const Jr=Ie.get("linkType"),hs=document.getElementById("traits-panel");hs&&hs.querySelectorAll(".gjs-trt-trait").forEach(rs=>{const Bs=rs.querySelector("label, .gjs-trt-trait__label");if(Bs){const Uo=Bs.textContent||"";Uo.includes("Select Page")?rs.style.display=Jr==="page"?"block":"none":Uo.includes("URL")&&!Uo.includes("Select")&&(rs.style.display=Jr==="url"?"block":"none")}})};Ie._updateTraitVisibility=Rn,setTimeout(()=>{if(je.TraitManager){je.select(Ie),typeof je.TraitManager.render=="function"&&je.TraitManager.render();const Jr=document.getElementById("traits-panel");if(Jr){Jr.style.display="block",Jr.style.visibility="visible",Jr.style.opacity="1",setTimeout(Rn,100);const hs=new MutationObserver(()=>{Rn()});hs.observe(Jr,{childList:!0,subtree:!0}),Ie._traitVisibilityObserver=hs}}},150);const Qo=()=>{const Jr=Ie.get("linkType"),hs=Ie.get("pageLink"),va=Ie.get("href");if(Jr==="page")if(hs&&hs.trim()!==""){const rs=hs.replace(/^#/,"").trim();Ie.addAttributes({"data-page-link":rs}),Ie.set("href",`#${rs}`);const Bs=Ie.getView();Bs&&Bs.el&&(Bs.el.setAttribute("data-page-link",rs),Bs.el.setAttribute("href",`#${rs}`))}else{Ie.removeAttributes("data-page-link"),Ie.set("href","#");const rs=Ie.getView();rs&&rs.el&&(rs.el.removeAttribute("data-page-link"),rs.el.setAttribute("href","#"))}else if(Jr==="url"){Ie.removeAttributes("data-page-link");const rs=va?Ce(va):"";if(rs){Ie.set("href",rs);const Bs=Ie.getView();Bs&&Bs.el&&Bs.el.setAttribute("href",rs)}else{Ie.set("href","#");const Bs=Ie.getView();Bs&&Bs.el&&Bs.el.setAttribute("href","#")}}else Jr==="none"&&(Ie.removeAttributes("data-page-link"),Ie.removeAttributes("href"));Ie.trigger("change"),je.trigger("component:update",Ie)};if(Ie._updateNavigationAttributes=Qo,Ie._updateTraitVisibility=Rn,Ie.on("change:linkType",()=>{const Jr=Ie._updateNavigationAttributes;Jr&&setTimeout(Jr,50);const hs=Ie._updateTraitVisibility;hs&&setTimeout(hs,100),setTimeout(()=>{je.TraitManager&&(je.select(Ie),typeof je.TraitManager.render=="function"&&je.TraitManager.render(),hs&&setTimeout(hs,50))},150)}),Ie.on("change:pageLink",()=>{const Jr=Ie._updateNavigationAttributes;Jr&&setTimeout(Jr,50)}),Ie.on("change:href",()=>{const Jr=Ie._updateNavigationAttributes;Jr&&setTimeout(Jr,50)}),je.TraitManager){const Jr=je.TraitManager,hs=Jr?.updateTarget;hs&&(Jr.updateTarget=function(va){const rs=hs.call(this,va);return va&&va===Ie&&setTimeout(()=>{const Bs=va._updateNavigationAttributes;Bs&&Bs()},100),rs}),je.on("trait:update",(va,rs)=>{rs&&(rs===Ie||rs.cid&&Ie.cid&&rs.cid===Ie.cid)&&setTimeout(()=>{const Bs=rs.get("linkType"),Uo=rs.get("pageLink"),Vo=rs.get("href");Bs!==void 0&&Ie.set("linkType",Bs),Uo!==void 0&&Ie.set("pageLink",Uo),Vo!==void 0&&Ie.set("href",Vo);const Ds=rs._updateNavigationAttributes;Ds&&Ds()},50)})}}setTimeout(()=>{if(je.TraitManager){(je.TraitManager.getTraits?je.TraitManager.getTraits(Ie):[]).forEach(Yn=>{Yn&&(Yn.get?.("name")==="pageLink"||Yn.name==="pageLink")&&mn(Yn)}),typeof je.TraitManager.render=="function"&&je.TraitManager.render();const Vr=Ie._updateTraitVisibility;Vr&&setTimeout(Vr,50)}},100)}}if(Q==="style"&&Sn(Ie),je.TraitManager&&(je.select(Ie),setTimeout(()=>{typeof je.TraitManager.render=="function"&&je.TraitManager.render();const Pt=document.getElementById("traits-panel");if(Pt){Pt.style.display="block",Pt.style.visibility="visible",Pt.style.opacity="1";const or=je.TraitManager.render();or&&Pt!==or.parentNode&&(Pt.innerHTML="",Pt.appendChild(or));const Vt=()=>{document.querySelectorAll("#traits-panel input, #traits-panel select, #traits-panel textarea").forEach(Rt=>{Rt&&(Rt.style.pointerEvents="auto",Rt.style.cursor=Rt.tagName==="SELECT"?"pointer":"text",Rt.style.zIndex="1",Rt.style.position="relative",Rt.disabled=!1,Rt.readOnly=!1,Rt.addEventListener("input",()=>{if(Ie){const fr=Ie._updateNavigationAttributes;fr&&setTimeout(fr,50)}}),Rt.addEventListener("change",()=>{if(Ie){const fr=Ie._updateNavigationAttributes;fr&&setTimeout(fr,50)}}))})};Vt();const Ft=document.getElementById("traits-panel");if(Ft){const Cr=new MutationObserver(()=>{Vt()});Cr.observe(Ft,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style","disabled","readonly"]}),Ie._traitObserver=Cr}}},200)),Ie){const Pt=Ie.getAttributes?.()||{};(Pt["data-gjs-editable"]==="true"||Pt["data-gjs-type"]==="text")&&Ie.set({editable:!0},{silent:!0}),Ie.set({stylable:!0,selectable:!0,hoverable:!0},{silent:!0})}requestAnimationFrame(()=>{if(ne){_r=!1;return}Q!=="style"&&xe("style");const Pt=document.getElementById("style-panel");Pt&&(Pt.style.display="block",Pt.style.visibility="visible",Pt.style.opacity="1");const or=a.current?.querySelector(".builder-right-panel");or&&(or.style.display="flex",or.style.visibility="visible",or.style.opacity="1");try{je.runCommand("open-sm")}catch{}Sn(Ie,50),setTimeout(()=>{_r=!1},150)})}catch(it){console.warn("Component selected error:",it),_r=!1}}),je.on("component:deselected",()=>{Ir=null}),je.on("component:update",()=>{C||L(!0)}),je.on("component:add",()=>{C||L(!0)}),je.on("component:remove",()=>{C||L(!0)}),je.on("style:property:update",(Ie,it,Et)=>{C||L(!0);try{const Mt=Et||je.getSelected();if(Mt){if(Mt.set({stylable:!0},{silent:!0}),Mt===je.getWrapper()){if(Mt.getClasses().includes("gjs-wrapper-body")||Mt.addClass("gjs-wrapper-body"),Ie&&it!==void 0&&je.CssComposer){const Vt=je.CssComposer.getRule(".gjs-wrapper-body")||je.CssComposer.add(".gjs-wrapper-body");if(Vt){const Ft=Vt.get("style")||{};Ft[Ie]=it,Vt.set("style",Ft),console.log(` Wrapper ${Ie} set via CSS rule:`,it)}}}else if(Ie&&it!==void 0){if(typeof Mt.addStyle=="function")Mt.addStyle(Ie,it);else{const or=Mt.getStyle()||{};or[Ie]=it,Mt.setStyle(or)}if(je.CssComposer){const or=Mt.cid||Mt.getId?.();if(or){let Ft=Mt.getClasses().find(fr=>fr&&!fr.startsWith("gjs-"));if(!Ft){const fr=Mt.get("tagName")?.toLowerCase()||"div";Ft=`gjs-comp-${or}`,Mt.addClass(Ft)}const Cr=`.${Ft}`;let Rt=je.CssComposer.getRule(Cr);if(Rt||(Rt=je.CssComposer.add(Cr)),Rt){const fr=Rt.get("style")||{};fr[Ie]=it,Rt.set("style",fr)}}}}requestAnimationFrame(()=>{try{Mt.getEl?.()&&(Mt.view?.updateStyle&&Mt.view.updateStyle(),Mt.trigger("change:style"),je.refresh(),Mt.trigger("component:update"))}catch(or){console.warn("Error updating component view:",or)}})}}catch(Mt){console.warn("Style property update error:",Mt)}}),je.on("style:change",(Ie,it)=>{try{const Et=it||je.getSelected();Et&&(Et.set({stylable:!0}),Et.view?.updateStyle?.(),Et.trigger("change:style"),je.refresh())}catch(Et){console.warn("Style change error:",Et)}}),je.on("component:styleUpdate",Ie=>{try{if(C||L(!0),Ie){if(Ie.set({stylable:!0},{silent:!0}),Ie===je.getWrapper()){Ie.getClasses().includes("gjs-wrapper-body")||Ie.addClass("gjs-wrapper-body");const Mt=Ie.getStyle();if(Mt&&Object.keys(Mt).length>0&&je.CssComposer){const Pt=je.CssComposer.getRule(".gjs-wrapper-body");if(Pt)Pt.set("style",Mt);else{const or=je.CssComposer.add(".gjs-wrapper-body");or&&or.set("style",Mt)}console.log(" Wrapper styles saved as CSS rule:",Mt)}}Ie.view?.updateStyle?.(),je.refresh()}}catch(it){console.warn("Component style update error:",it)}}),je.on("component:dblclick",Ie=>{try{if(!Ie)return;const it=Ie.get("tagName")?.toLowerCase(),Et=Ie.get("type"),Mt=Ie.getAttributes?.()||{},Pt=Ie.get("content")||"",Vt=["p","h1","h2","h3","h4","h5","h6","span","a","label","li","td","th","button","strong","em","b","i","u","small","sub","sup","blockquote","cite"].includes(it),Ft=typeof Pt=="string"&&Pt.trim().length>0&&!Ie.components().length;(Mt["data-gjs-editable"]==="true"||Mt["data-gjs-type"]==="text"||Et==="text"||Vt||Ft)&&(Ie.get("editable")||Ie.set({editable:!0,type:"text"}),je.runCommand("core:component-edit",{force:!0}))}catch(it){console.warn("Error enabling double-click editing:",it)}});let Wn=null,so=0;const xa=50,qn=(Ie=!1)=>{try{if(Q!=="style")return;const it=Date.now();if(!Ie&&it-so<xa){Wn&&cancelAnimationFrame(Wn),Wn=requestAnimationFrame(()=>qn(!0));return}if(so=it,Wn&&(cancelAnimationFrame(Wn),Wn=null),Mr||(Mr=document.getElementById("style-panel")),!Mr||!je.StyleManager)return;const Et=Mr,Mt=Et.querySelectorAll(".gjs-sm-sector");if(Mt.length>0&&Mt.length<=13&&!Ie||(Mt.length>13&&(Et.innerHTML=""),!(Ie||Mt.length===0||Mt.length>13)))return;if(typeof je.StyleManager.render=="function"){const Vt=je.getSelected()||je.getWrapper();if(Vt)try{if(Vt.set({stylable:!0},{silent:!0}),je.CssComposer&&Vt!==je.getWrapper()){const Ft=Vt.cid||Vt.getId?.();if(Ft){let Rt=Vt.getClasses().find(fr=>fr&&!fr.startsWith("gjs-"));Rt||(Rt=`gjs-comp-${Ft}`,Vt.addClass(Rt))}}je.StyleManager.setTarget&&je.StyleManager.setTarget(Vt)}catch{}Q==="style"&&(Et.innerHTML="",je.StyleManager.render()),Vt&&je.StyleManager.setTarget&&je.StyleManager.setTarget(Vt)}}catch(it){console.warn("Error rendering Style Manager:",it)}};je.on("component:update",Ie=>{try{if(!Ie)return;const it=Ie.getAttributes?.()||{};(it["data-gjs-editable"]==="true"||it["data-gjs-type"]==="text")&&Ie.set({editable:!0,selectable:!0},{silent:!0}),Ie.set({stylable:!0},{silent:!0})}catch{}}),je.on("style:custom",(Ie,it,Et)=>{try{const Mt=Et||je.getSelected();if(Mt&&Ie&&it!==void 0){if(Mt.set({stylable:!0},{silent:!0}),typeof Mt.addStyle=="function")Mt.addStyle(Ie,it);else{const Pt=Mt.getStyle()||{};Pt[Ie]=it,Mt.setStyle(Pt)}if(je.CssComposer){const Pt=Mt.cid||Mt.getId?.();if(Pt){let Vt=Mt.getClasses().find(Rt=>Rt&&!Rt.startsWith("gjs-"));Vt||(Vt=`gjs-comp-${Pt}`,Mt.addClass(Vt));const Ft=`.${Vt}`;let Cr=je.CssComposer.getRule(Ft);if(Cr||(Cr=je.CssComposer.add(Ft)),Cr){const Rt=Cr.get("style")||{};Rt[Ie]=it,Cr.set("style",Rt)}}}requestAnimationFrame(()=>{Mt.view?.updateStyle?.(),Mt.trigger("change:style"),je.refresh()})}}catch(Mt){console.warn("Style custom error:",Mt)}});let Vn=null;je.on("change",()=>{Vn&&clearTimeout(Vn),Vn=setTimeout(()=>{try{const Ie=je.getSelected();if(Ie&&je.StyleManager){const it=Ie.getStyle();it&&Object.keys(it).length>0&&(Ie.view?.updateStyle?.(),je.refresh())}}catch{}},100)});const Gn=()=>{if(ne)return;const Ie=a.current?.querySelector(".builder-right-panel");Ie&&(Ie.style.display="flex",Ie.style.visibility="visible",Ie.style.opacity="1",Ie.style.width="300px",Ie.style.flexShrink="0");const it=document.getElementById("style-panel");it&&(it.style.display="block",it.style.visibility="visible",it.style.opacity="1",it.style.width="100%")},_s=()=>{try{a.current&&(je.getEl?.()?.classList.contains("gjs-fullscreen")||document.querySelector(".gjs-editor.gjs-fullscreen")!==null?(a.current.classList.add("gjs-fullscreen"),setTimeout(()=>{try{a.current?.querySelectorAll("button")?.forEach(Rt=>{Rt&&(Rt.style.display="flex",Rt.style.visibility="visible",Rt.style.opacity="1",Rt.style.pointerEvents="auto",Rt.style.cursor="pointer",Rt.style.zIndex="10001")}),a.current?.querySelectorAll("input, select, textarea")?.forEach(Rt=>{Rt&&(Rt.style.display="block",Rt.style.visibility="visible",Rt.style.opacity="1",Rt.style.pointerEvents="auto",Rt.style.zIndex="10001")});const Pt=a.current?.querySelector(".builder-left-panel"),or=a.current?.querySelector(".builder-right-panel"),Vt=a.current?.querySelector(".builder-center-panel");Pt&&(Pt.style.display="flex",Pt.style.visibility="visible",Pt.style.opacity="1",Pt.style.pointerEvents="auto",Pt.style.width="280px",Pt.style.zIndex="10001"),or&&(or.style.display="flex",or.style.visibility="visible",or.style.opacity="1",or.style.pointerEvents="auto",or.style.width="300px",or.style.zIndex="10001"),Vt&&(Vt.style.display="flex",Vt.style.visibility="visible",Vt.style.opacity="1",Vt.style.pointerEvents="auto");const Ft=a.current?.querySelector("#style-panel");if(Ft&&je.StyleManager){Ft.style.display="block",Ft.style.visibility="visible",Ft.style.opacity="1",Ft.style.background="#1e1e1e",Ft.style.minHeight="200px";const Rt=Ft.querySelectorAll(".gjs-sm-sector");(Rt.length===0||Rt.length<13)&&Q==="style"&&typeof je.StyleManager.render=="function"&&je.StyleManager.render(),setTimeout(()=>{Ft.querySelectorAll(".gjs-sm-sector").forEach(Rr=>{Rr&&(Rr.style.display="block",Rr.style.visibility="visible",Rr.style.opacity="1")})},100)}const Cr=a.current?.querySelector(".panel__devices");Cr&&(Cr.style.display="flex",Cr.style.visibility="visible",Cr.style.opacity="1",Cr.style.pointerEvents="auto")}catch(Et){console.warn("Error ensuring fullscreen elements visibility:",Et)}},50)):a.current.classList.remove("gjs-fullscreen"))}catch{}},Ta=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],Fs=()=>{ne||_s()};Ta.forEach(Ie=>{document.addEventListener(Ie,Fs,{passive:!0}),Re(()=>document.removeEventListener(Ie,Fs))}),_s(),je.on("load",()=>{setTimeout(_s,100);try{const Ie=je.getDevice();Ie&&M(Ie)}catch{}}),je.on("change:device",()=>{try{const Ie=je.getDevice();Ie&&M(Ie),vs()}catch{}}),je.on("run:fullscreen",()=>{setTimeout(()=>{try{const Ie=document.getElementById("style-panel");Ie&&je.StyleManager&&(Ie.style.display="block",Ie.style.visibility="visible",Ie.style.opacity="1",Ie.style.background="#1e1e1e",Q==="style"&&typeof je.StyleManager.render=="function"&&je.StyleManager.render(),setTimeout(()=>{Ie.querySelectorAll(".gjs-sm-sector").forEach(Et=>{Et&&(Et.style.display="block",Et.style.visibility="visible",Et.style.opacity="1")})},100))}catch(Ie){console.warn("Error rendering Style Manager on fullscreen:",Ie)}},200)});const vs=()=>{if(!ne)try{const Ie=document.querySelector(".panel__devices");Ie&&Ie.querySelectorAll("button").forEach(Et=>{Et&&(Et.style.display="flex",Et.style.visibility="visible",Et.style.opacity="1")})}catch{}},Kn=(Ie=!1)=>{if(ne)return;const it=je.BlockManager;if(!it){console.warn(" BlockManager not available in renderBlocks");return}const Et=it.getAll?it.getAll():[],Mt=Array.isArray(Et)?Et.length:0;if(Mt===0){console.error(" CRITICAL: No blocks registered in BlockManager! Cannot render.");return}if(console.log(` renderBlocks called: ${Mt} blocks registered, force=${Ie}`),!Ie&&i.current){const or=document.getElementById("blocks-panel")?.querySelectorAll(".gjs-block");if(or&&or.length>0){console.log(` Blocks already rendered (${or.length} found), skipping`);return}console.log(" blocksRenderedRef is true but no blocks in DOM, re-rendering...")}try{const Pt=document.getElementById("blocks-panel");if(!Pt){console.warn(" blocks-panel not found, retrying..."),setTimeout(()=>Kn(Ie),200);return}const or=Pt.closest(".elementor-blocks-wrapper");if(or){const Rt=or,fr=window.getComputedStyle(Rt);if(Rt.style.setProperty("display","block","important"),Rt.style.setProperty("visibility","visible","important"),Rt.style.setProperty("opacity","1","important"),window.getComputedStyle(Rt).display==="none"){console.error("Wrapper is still hidden after forcing visibility!"),setTimeout(()=>Kn(Ie),100);return}}Pt.style.setProperty("display","block","important"),Pt.style.setProperty("visibility","visible","important"),Pt.style.setProperty("opacity","1","important"),Pt.style.setProperty("min-height","200px","important"),Pt.innerHTML="";const Vt=document.querySelectorAll("#blocks-panel");if(Vt.length>1)for(let Rt=1;Rt<Vt.length;Rt++)Vt[Rt].remove();const Ft=je.BlockManager.getAll?je.BlockManager.getAll():[],Cr=Array.isArray(Ft)?Ft.length:0;if(Cr===0){console.error(" CRITICAL: No blocks registered in BlockManager! Cannot render."),console.error("BlockManager state:",{hasGetAll:!!je.BlockManager.getAll,hasRender:!!je.BlockManager.render,hasGetCategories:!!je.BlockManager.getCategories});return}console.log(` Rendering ${Cr} registered blocks into blocks-panel...`);try{const Rt=je.BlockManager.getAll?je.BlockManager.getAll():[],fr=Array.isArray(Rt)?Rt:[];console.log(` renderBlocks: Attempting to render ${fr.length} registered blocks...`);const Rr=je.BlockManager.render();console.log(" BlockManager.render() called successfully"),i.current=!0,setTimeout(()=>{Pt.querySelectorAll(".gjs-block").length===0&&fr.length>0&&(console.warn(" BlockManager.render() returned 0 blocks, using manual render fallback..."),renderBlocksManually(Pt,fr,je.BlockManager,je))},200)}catch(Rt){console.error(" Error calling BlockManager.render():",Rt),i.current=!1}setTimeout(()=>{const Rt=document.getElementById("blocks-panel");if(Rt){const fr=Rt.querySelectorAll(".gjs-block"),Rr=Rt.querySelectorAll(".gjs-block-category-blocks"),Er=Rt.querySelectorAll(".gjs-block-category");if(console.log(` After render: ${fr.length} blocks, ${Rr.length} category containers, ${Er.length} categories`),fr.length===0&&Cr>0){console.error(" CRITICAL: Blocks were registered but not rendered! Retrying..."),Rt.innerHTML="";try{je.BlockManager.render(),console.log(" Retry render called")}catch(Vr){console.error(" Retry render failed:",Vr)}return}Rr.forEach(Vr=>{Vr.style.setProperty("display","grid","important"),Vr.style.setProperty("grid-template-columns","repeat(2, 1fr)","important"),Vr.style.setProperty("gap","10px","important"),Vr.style.setProperty("width","100%","important"),Vr.style.setProperty("box-sizing","border-box","important")});const Yr=new Set;fr.forEach(Vr=>{const Yn=Vr.getAttribute("data-gjs-type")+"-"+Vr.textContent;Yr.has(Yn)?Vr.remove():(Yr.add(Yn),Vr.style.setProperty("display","flex","important"),Vr.style.setProperty("visibility","visible","important"),Vr.style.setProperty("opacity","1","important"),Vr.style.setProperty("pointer-events","auto","important"),Vr.style.setProperty("cursor","grab","important"),Vr.style.setProperty("position","relative","important"),Vr.style.setProperty("z-index","1","important"),Vr.style.setProperty("width","100%","important"),Vr.style.setProperty("max-width","100%","important"),Vr.style.setProperty("min-width","0","important"),Vr.style.setProperty("box-sizing","border-box","important"))});const Gr=Rt.querySelectorAll(".gjs-block");console.log(` Final blocks count: ${Gr.length} blocks rendered and visible`),Rt.querySelectorAll(".gjs-block-category").forEach(Vr=>{Vr.style.position="relative",Vr.style.zIndex="1",Vr.style.display="block",Vr.style.visibility="visible";const Yn=Vr.querySelector(".gjs-block-category-title");Yn&&!Yn.hasAttribute("data-toggle-bound")&&(Yn.setAttribute("data-toggle-bound","true"),Yn.addEventListener("click",Qr=>{Qr.preventDefault(),Qr.stopPropagation();const da=Vr.getAttribute("data-open")!=="false",Rn=Vr.querySelector(".gjs-block-category-blocks");da?(Vr.setAttribute("data-open","false"),Rn&&(Rn.style.display="none")):(Vr.setAttribute("data-open","true"),Rn&&(Rn.style.display="grid",Rn.style.setProperty("display","grid","important"),Rn.style.setProperty("grid-template-columns","repeat(2, 1fr)","important"),Rn.style.setProperty("gap","10px","important")))}))});const Xr=Rt.querySelector(".gjs-blocks-c");Xr&&(Xr.style.display="flex",Xr.style.visibility="visible",Xr.style.opacity="1"),requestAnimationFrame(()=>{Rt.querySelectorAll(".gjs-block-category-blocks").forEach(Qr=>{Qr&&(Qr.style.setProperty("display","grid","important"),Qr.style.setProperty("grid-template-columns","repeat(2, 1fr)","important"),Qr.style.setProperty("gap","10px","important"),Qr.style.setProperty("width","100%","important"),Qr.style.setProperty("box-sizing","border-box","important"),Qr.style.setProperty("grid-auto-rows","90px","important"),Qr.style.setProperty("grid-auto-flow","row","important"))}),Rt.querySelectorAll(".gjs-block-category-blocks .gjs-block").forEach(Qr=>{Qr&&(Qr.style.setProperty("width","100%","important"),Qr.style.setProperty("max-width","100%","important"),Qr.style.setProperty("min-width","0","important"),Qr.style.setProperty("box-sizing","border-box","important"))})}),console.log(`Rendered ${fr.length} blocks in 2-column grid`),i.current=!0}},150)}catch(Pt){console.error("Error rendering blocks:",Pt)}};je.on("load",()=>{setTimeout(()=>{Kn(!0)},300),setTimeout(()=>{const it=document.getElementById("blocks-panel")?.querySelectorAll(".gjs-block");(!it||it.length===0)&&(console.log("No blocks found, retrying render..."),Kn(!0))},800),setTimeout(vs,200),setTimeout(()=>{try{const Ie=je.getWrapper();if(Ie){const it=Ie.components();let Et=null;if(it&&it.length>0){const Pt=it.at(0);Pt&&(je.select(Pt),Pt.set({stylable:!0}),Et=Pt)}else je.select(Ie),Ie.set({stylable:!0}),Et=Ie;je.runCommand("open-sm");const Mt=document.getElementById("style-panel");Mt&&je.StyleManager&&Et&&(Mt.innerHTML="",je.StyleManager.setTarget&&je.StyleManager.setTarget(Et),Q==="style"&&typeof je.StyleManager.render=="function"&&je.StyleManager.render(),Mt.style.display="block",Mt.style.visibility="visible",Mt.style.opacity="1",Mt.style.background="#1e1e1e",Mt.style.minHeight="300px")}}catch(Ie){console.warn("Error selecting component on load:",Ie)}},250),setTimeout(()=>{qn(!0)},500)}),setTimeout(vs,400);const Rs=()=>{if(ne)return!1;vs();const Ie=document.querySelector(".panel__devices");if(!Ie)return!1;const it=new MutationObserver(()=>vs());return it.observe(Ie,{childList:!0,subtree:!0,attributes:!0}),Re(()=>it.disconnect()),!0},aa=()=>{Rs()||ne||setTimeout(aa,800)};setTimeout(aa,500),je.on("style:target",Ie=>{try{Ie&&Ie.component&&Ie.component.set({stylable:!0},{silent:!0})}catch{}}),setTimeout(()=>{if(!ne)try{if(je.LayerManager&&Q==="structure"){const Ie=document.getElementById("layers-panel");if(Ie){document.querySelectorAll(".gjs-layers, .gjs-layer-item, .gjs-layer-item-title").forEach(Mt=>{Mt.closest("#layers-panel")||Mt.remove()}),Ie.innerHTML="";const Et=je.LayerManager.render();Et&&Ie&&(typeof Et=="object"&&Et.nodeType&&Ie.appendChild(Et),setTimeout(()=>{In(je,Ie)},150))}}}catch{}},500);const Wr=(()=>{let Ie=null;return()=>{ne||(Ie&&clearTimeout(Ie),Ie=window.setTimeout(()=>{if(!ne)try{if(je.LayerManager&&typeof je.LayerManager.render=="function"&&Q==="structure"){const it=document.getElementById("layers-panel");if(it){document.querySelectorAll(".gjs-layers, .gjs-layer-item, .gjs-layer-item-title").forEach(Pt=>{Pt.closest("#layers-panel")||Pt.remove()}),it.innerHTML="";const Mt=je.LayerManager.render();Mt&&it&&(typeof Mt=="object"&&Mt.nodeType&&it.appendChild(Mt),setTimeout(()=>{In(je,it),zr(je,it)},150)),setTimeout(()=>{const Pt=document.getElementById("layers-panel");Pt&&(zr(je,Pt),Pt.querySelectorAll(".gjs-lm-layer").forEach(Vt=>{if(Vt){const Ft=Vt.querySelector(".gjs-lm-title"),Cr=Vt.querySelector(".gjs-lm-items");Ft&&Cr&&Cr.children.length>0&&(Vt.hasAttribute("data-expand-handler")||(Vt.setAttribute("data-expand-handler","true"),Ft.addEventListener("click",Rt=>{Rt.stopPropagation(),Vt.classList.toggle("gjs-lm-open")})))}}))},100)}}}catch{}Ie=null},250))}})();["component:add","component:remove","component:update","component:styleUpdate","component:selected"].forEach(Ie=>{const it=()=>Wr();je.on(Ie,it),Re(()=>je.off(Ie,it))}),Wr();const on=()=>{if(ne)return!1;Gn();const Ie=[];let it=!1;const Et=a.current?.querySelector(".builder-right-panel");if(Et){const Mt=new MutationObserver(()=>Gn());Mt.observe(Et,{attributes:!0,attributeFilter:["style","class"]}),Ie.push(Mt),it=!0}return Re(()=>{Ie.forEach(Mt=>Mt.disconnect())}),it},nn=()=>{on()||ne||setTimeout(nn,800)};setTimeout(nn,600),ne||(clearTimeout(Ze),c(!1),console.log(" Editor initialized successfully"))}catch(st){console.error(" Error initializing editor:",st),ne||(clearTimeout(Ze),b(st?.message||"Failed to initialize editor. Please check the console for details."),c(!1),t.current&&(t.current.innerHTML=`
              <div style="padding: 40px; text-align: center; color: #6b7280;">
                <h3>Editor Initialization Error</h3>
                <p>${st?.message||"Failed to initialize editor"}</p>
                <button onclick="window.location.reload()" style="margin-top: 20px; padding: 10px 20px; background: #5e72e4; color: white; border: none; border-radius: 6px; cursor: pointer;">
                  Reload Page
                </button>
              </div>
            `))}})(),()=>{if(ne=!0,clearTimeout(Ze),ke.forEach(st=>{try{st()}catch{}}),document.getElementById("style-panel"),o.current){try{o.current.destroy()}catch{}o.current=null}}},[]),u.useEffect(()=>{if(!t.current&&!o.current){const ne=setTimeout(()=>{t.current&&!o.current&&console.log(" EditorRef became available, editor should initialize now")},100);return()=>clearTimeout(ne)}},[t.current]),u.useEffect(()=>{const ne=document.getElementById("blocks-panel");if(!ne)return;const ke=ne.querySelectorAll(".gjs-block");if(ke.length===0)return;const Re=$.trim().toLowerCase(),Ze=ne.querySelectorAll(".gjs-block-category");ke.forEach(st=>{const Ct=(st.textContent||"").toLowerCase(),Xe=!Re||Ct.includes(Re);st.style.display=Xe?"flex":"none",st.style.visibility=Xe?"visible":"hidden",Xe&&(st.style.width="100%",st.style.maxWidth="100%",st.style.minWidth="0")}),Ze.forEach(st=>{const Ct=!!st.querySelector('.gjs-block[style*="display: flex"]');st.style.display=Ct?"block":"none"})},[$]),u.useEffect(()=>{const ne=document.getElementById("blocks-panel");if(!ne)return;const ke=()=>{ne.querySelectorAll(".gjs-block-category").forEach(st=>{const Ct=st.querySelector(".gjs-block-category-title");Ct&&!Ct.hasAttribute("data-toggle-bound")&&(Ct.setAttribute("data-toggle-bound","true"),Ct.addEventListener("click",Xe=>{Xe.preventDefault(),Xe.stopPropagation();const Ve=st.getAttribute("data-open")!=="false",je=st.querySelector(".gjs-block-category-blocks");Ve?(st.setAttribute("data-open","false"),je&&(je.style.display="none")):(st.setAttribute("data-open","true"),je&&(je.style.setProperty("display","grid","important"),je.style.setProperty("grid-template-columns","repeat(2, 1fr)","important"),je.style.setProperty("gap","10px","important")))}))})};ke();const Re=new MutationObserver(()=>{ke()});return Re.observe(ne,{childList:!0,subtree:!0}),()=>{Re.disconnect()}},[Q]);const yr=u.useCallback(ne=>new Promise(ke=>{const Re=document.createElement("canvas");Re.width=800,Re.height=600;const Ze=Re.getContext("2d");if(!Ze){const He=`<svg xmlns="http://www.w3.org/2000/svg" width="800" height="600">
          <defs>
            <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
              <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
            </linearGradient>
          </defs>
          <rect width="800" height="600" fill="url(#grad)"/>
          <text x="400" y="280" font-family="Arial, sans-serif" font-size="48" font-weight="bold" fill="white" text-anchor="middle">${ne}</text>
          <text x="400" y="340" font-family="Arial, sans-serif" font-size="24" fill="rgba(255,255,255,0.9)" text-anchor="middle">Custom Theme</text>
        </svg>`,at=new Blob([He],{type:"image/svg+xml"});ke(at);return}const st=Ze.createLinearGradient(0,0,Re.width,Re.height);st.addColorStop(0,"#667eea"),st.addColorStop(1,"#764ba2"),Ze.fillStyle=st,Ze.fillRect(0,0,Re.width,Re.height),Ze.fillStyle="rgba(255, 255, 255, 0.1)",Ze.beginPath(),Ze.arc(100,100,60,0,Math.PI*2),Ze.fill(),Ze.beginPath(),Ze.arc(700,500,80,0,Math.PI*2),Ze.fill(),Ze.beginPath(),Ze.arc(650,100,40,0,Math.PI*2),Ze.fill(),Ze.fillStyle="#ffffff",Ze.font="bold 56px Arial, sans-serif",Ze.textAlign="center",Ze.textBaseline="middle";const Ct=700,Xe=ne.split(" ");let Ve="",je=250;for(let He=0;He<Xe.length;He++){const at=Ve+Xe[He]+" ";Ze.measureText(at).width>Ct&&He>0?(Ze.fillText(Ve,Re.width/2,je),Ve=Xe[He]+" ",je+=70):Ve=at}Ze.fillText(Ve,Re.width/2,je),Ze.font="28px Arial, sans-serif",Ze.fillStyle="rgba(255, 255, 255, 0.9)",Ze.fillText("Custom Theme",Re.width/2,je+60),Re.toBlob(He=>{if(He)ke(He);else{const at=`<svg xmlns="http://www.w3.org/2000/svg" width="800" height="600">
            <defs>
              <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
              </linearGradient>
            </defs>
            <rect width="800" height="600" fill="url(#grad)"/>
            <text x="400" y="280" font-family="Arial, sans-serif" font-size="48" font-weight="bold" fill="white" text-anchor="middle">${ne}</text>
            <text x="400" y="340" font-family="Arial, sans-serif" font-size="24" fill="rgba(255,255,255,0.9)" text-anchor="middle">Custom Theme</text>
          </svg>`;ke(new Blob([at],{type:"image/svg+xml"}))}},"image/png")}),[]),An=u.useCallback(async ne=>{try{const ke=o.current;if(!ke||typeof ke.getHtml!="function"){alert("Editor not ready");return}k(!0),await new Promise(Te=>requestAnimationFrame(Te)),wr(),await new Promise(Te=>setTimeout(Te,50)),await new Promise(Te=>setTimeout(Te,150));const{pagesSnapshot:Re}=Fr();console.log(" Captured snapshot before save:",{currentPageId:At,snapshotPages:Re.map(Te=>({id:Te.id,name:Te.name,htmlLength:Te.html?.length||0,cssLength:Te.css?.length||0}))});const Ze=Re.map(Te=>{const ut=dt.find(jt=>jt.id===Te.id);return{...Te,html:Te.html&&Te.html.trim().length>0?Te.html:ut?.html||ge,css:Te.css&&Te.css.trim().length>0?Te.css:ut?.css||""}});Ke(Ze),kt.current=Ze;const st=Ze.map(Te=>({id:Te.id,name:Te.name,hasHtml:!!Te.html&&Te.html.trim().length>0,hasCss:!!Te.css&&Te.css.trim().length>0,htmlLength:Te.html?.length||0,cssLength:Te.css?.length||0}));console.log(" Saving theme with pages:",{totalPages:Ze.length,currentPageId:At,pages:st,pagesData:Ze.map(Te=>({id:Te.id,name:Te.name,htmlPreview:Te.html?.substring(0,100),cssPreview:Te.css?.substring(0,100)}))}),st.forEach((Te,ut)=>{Te.hasHtml||console.warn(` Page ${ut+1} (${Te.name}) has no HTML content!`),Te.hasCss||console.warn(` Page ${ut+1} (${Te.name}) has no CSS content!`)});const Ct=Ze.map(Te=>Te.css||"").filter(Boolean).join(`

`),Xe=tn(Ze,v||"Theme",Ct);Xe.match(/ziplofy-pages-data/)?console.log(" Pages data found in export HTML"):console.error(" ERROR: Pages data not found in export HTML!"),console.log(" Built export HTML:",{htmlLength:Xe.length,containsPagesData:Xe.includes("ziplofy-pages-data"),combinedCssLength:Ct.length});let je;const He=he&&/^[0-9a-fA-F]{24}$/.test(he);He?je=await yr(v||"My Theme"):je=await yr(v||"My Theme"),await new Promise(Te=>setTimeout(Te,50));let at=he||"";const Ot=le||Ye;let ce=!1;if(He&&!Ot)try{const Te=await re(he,v,Xe,Ct,je);Te?at=Te._id:(console.warn("Update returned empty result; will create a new theme instead."),ce=!0)}catch(Te){if(Te?.response?.status===404)console.warn("Theme not found while updating (404); creating a new theme instead."),ce=!0;else throw Te}else Ot&&(console.log("Editing installed theme - will create a new custom theme"),ce=!0);if(!He||ce){if(he&&!He){console.warn(`Invalid theme ID format (${he}). Creating new theme instead.`);try{const Lt=`ziplofy.builder.pages.${he}`;localStorage.removeItem(Lt),console.log("Cleared localStorage for invalid theme ID:",he)}catch(Lt){console.warn("Failed to clear old localStorage:",Lt)}const jt=new URL(window.location.href);jt.searchParams.delete("id"),window.history.replaceState({},"",jt.toString())}const Te=await V(v,Xe,Ct,je);if(!Te)throw new Error("Failed to create theme");at=Te._id;const ut=new URL(window.location.href);ut.searchParams.set("id",at),window.history.replaceState({},"",ut.toString()),jr()}k(!1),setTimeout(()=>{const Te=kt.current.find(ut=>ut.id===At);Te&&o.current&&(console.log(" Refreshing editor with saved state after save..."),rr(Te.html||ge,Te.css||""))},200),ne?(localStorage.setItem("ziplofy.appliedCustomThemeId",at),O(!0),G(!0),L(!1),setTimeout(()=>O(!1),3e3)):L(!1)}catch(ke){k(!1),console.error("Error saving theme:",ke);let Re="Failed to save theme";ke?.code==="ECONNABORTED"||ke?.message?.includes("timeout")?Re="Upload timeout: The theme is very large. Please try again or reduce the theme size.":ke?.response?.status===500?Re="Server error: The theme might be too large or there was a server issue. Please try again or reduce the theme size.":ke?.response?.status===413||ke?.message?.includes("File too large")||ke?.message?.includes("MulterError")?Re="Theme too large: The theme exceeds the maximum size limit (500MB). Please reduce the size of your theme content.":ke?.response?.data?.message?Re=ke.response.data.message:ke?.message&&(Re=ke.message),alert(Re)}},[V,Fr,he,v,re,tn,wr,At,rr]),fn=u.useCallback(()=>{try{const ne=o.current;if(!ne||typeof ne.getHtml!="function"){alert("Editor not ready");return}ne.trigger&&ne.trigger("update");const ke=ne.getWrapper();ke&&ke.view&&ke.view.render?.();let Re="";try{ke?(Re=ne.getHtml({component:ke})||"",(!Re||Re.trim().length===0)&&(Re=ne.getHtml()||"")):Re=ne.getHtml()||"",(!Re||Re.trim().length===0)&&(console.warn(" No HTML from editor, using default"),Re=ge)}catch(at){console.error("Error getting HTML from editor:",at),Re=ne.getHtml()||ge}console.log(" Preview - Current HTML length:",Re.length,"Preview:",Re.substring(0,300));let Ze="";if(ne.getCss){const at=ne.getCss()||"";at&&at.trim().length>0&&(Ze=at,console.log(" Got CSS from editor.getCss():",at.length,"chars"))}if(ne.CssComposer)try{const at=ne.CssComposer.getAll();if(at&&at.length>0){const Ot=at.map(ce=>{try{if(ce.toCSS)return ce.toCSS();const Te=ce.selectorsToString?ce.selectorsToString():"",ut=ce.getStyle?ce.getStyle():{};if(Te&&ut&&Object.keys(ut).length>0){const jt=Object.entries(ut).map(([Lt,ur])=>`  ${Lt}: ${ur};`).join(`
`);return`${Te} {
${jt}
}`}return""}catch{return""}}).filter(Boolean).join(`

`);Ot&&Ot.trim().length>0&&(Ze=Ot+(Ze?`

`+Ze:""))}}catch(at){console.warn("Failed to get CSS from CssComposer:",at)}try{if(ke){const at=ke.getStyle?ke.getStyle():null;if(at&&Object.keys(at).length>0){const ce=`.gjs-wrapper-body {
${Object.entries(at).map(([Te,ut])=>`  ${Te}: ${ut};`).join(`
`)}
}`;Ze.includes(".gjs-wrapper-body")?Ze=Ze.replace(/\.gjs-wrapper-body\s*\{[^}]*\}/g,ce):Ze=ce+`

`+Ze,console.log(" Added wrapper styles:",Object.keys(at).length,"properties")}}}catch(at){console.warn("Failed to extract wrapper styles:",at)}if(!Ze||Ze.trim().length===0)try{if(ke){const at=[],Ot=Te=>{Te&&(at.push(Te),(Te.components?Te.components():[]).forEach(jt=>Ot(jt)))};Ot(ke);const ce=at.map(Te=>{const ut=Te.getStyle?Te.getStyle():null,jt=Te.getClasses?Te.getClasses():[];if(ut&&Object.keys(ut).length>0){const Lt=jt.length>0?`.${jt.join(".")}`:`#${Te.getId()}`,ur=Object.entries(ut).map(([Br,_t])=>`  ${Br}: ${_t};`).join(`
`);return`${Lt} {
${ur}
}`}return null}).filter(Boolean).join(`

`);ce&&(Ze=ce,console.log(" Extracted CSS from all components:",Ze.length,"chars"))}}catch(at){console.warn("Failed to extract component styles:",at)}const Ct=(kt.current||dt).map(at=>at.id===At?{...at,html:Re||ge,css:Ze||at.css||""}:at);console.log(" Preview - Using latest editor state:",{currentPageId:At,htmlLength:Re.length,cssLength:Ze.length,totalPages:Ct.length,htmlPreview:Re.substring(0,200),cssPreview:Ze.substring(0,500)});let Xe=Ct.map(at=>at.css||"").filter(Boolean).join(`

`);const Ve=Xe.includes("background-image")||Xe.includes("background:");if(console.log(" Preview Theme - CSS Debug:",{totalPages:Ct.length,pagesWithCss:Ct.filter(at=>at.css&&at.css.trim()).length,combinedCssLength:Xe.length,hasBackgroundImage:Ve,backgroundImageCount:(Xe.match(/background-image/g)||[]).length,fullCss:Xe,firstPage:{name:Ct[0]?.name,cssLength:Ct[0]?.css?.length||0,cssPreview:Ct[0]?.css?.substring(0,500)}}),!Xe||Xe.trim().length===0){console.warn(" WARNING: No CSS found! Styles might not appear in preview."),console.log("Attempting to get CSS directly from editor...");const at=ne.getCss?ne.getCss():"";console.log("Direct CSS from editor:",{length:at?.length,preview:at?.substring(0,500)}),at&&at.trim().length>0&&(Xe=at)}if(!Ve){console.warn(" WARNING: No background-image found in CSS!"),console.log("Checking wrapper element directly for background...");const at=ne.getWrapper();if(at){const Ot=at.getStyle();if(console.log("Wrapper styles:",Ot),Ot&&(Ot["background-image"]||Ot.background)){console.log(" FORCE FIX: Manually adding wrapper background to CSS");const Te=`.gjs-wrapper-body {
${Object.entries(Ot).map(([ut,jt])=>`  ${ut}: ${jt};`).join(`
`)}
}`;Xe=Te+`

`+Xe,console.log(" Added wrapper CSS manually:",Te)}}}const je=ne.Canvas?.getFrameEl();if(je&&je.contentWindow){const at=je.contentWindow.location;Xe=Xe.replace(/url\((['"]?)(?!data:)(?!http)([^'")]+)(['"]?)\)/gi,(Ot,ce,Te,ut)=>{try{const jt=new URL(Te,at.href).href;return console.log("Converting relative URL:",{original:Te,absolute:jt}),`url(${ce}${jt}${ut})`}catch{return Ot}})}console.log("Final CSS for preview (first 500 chars):",Xe.substring(0,500)),console.log(" Building preview HTML with:",{pagesCount:Ct.length,cssLength:Xe.length,firstPageHtmlLength:Ct[0]?.html?.length||0,firstPageCssLength:Ct[0]?.css?.length||0});const He=tn(Ct,v||"Theme Preview",Xe);console.log(" Preview HTML built:",{htmlLength:He.length,containsCss:He.includes("<style>"),containsPages:He.includes("ziplofy-pages-data"),htmlPreview:He.substring(0,500)}),se(""),setTimeout(()=>{se(He),D(!0),setTimeout(()=>{const at=document.getElementById("theme-preview-iframe");at&&at.contentDocument&&He&&(at.contentDocument.open(),at.contentDocument.write(He),at.contentDocument.close(),console.log(" Forced iframe content update"))},100)},50),wr()}catch(ne){console.error("Preview error:",ne),alert("Failed to preview theme")}},[tn,v,wr,At,kt]);u.useEffect(()=>{if(o.current&&At){const ne=setTimeout(()=>{wr()},100);return()=>clearTimeout(ne)}},[At]),u.useEffect(()=>{if(Q==="style"&&o.current){const ne=o.current;ne.getSelected()&&ne.StyleManager&&setTimeout(()=>{const Re=document.getElementById("style-panel"),Ze=document.querySelector('.elementor-panel-card[data-panel-type="style"]');if(Re&&Ze){Ze.style.display="flex",Ze.style.visibility="visible",Ze.style.opacity="1",Re.style.display="block",Re.style.visibility="visible",Re.style.opacity="1";try{Re.innerHTML="",ne.StyleManager.render(),setTimeout(()=>{Re.querySelectorAll(".gjs-sm-sector").forEach(Ct=>{const Xe=Ct;Xe.classList.remove("gjs-sm-sector--closed"),Xe.classList.add("gjs-sm-sector--open");const Ve=Xe.querySelector(".gjs-sm-sector-content");Ve&&(Ve.style.cssText="display: block !important; visibility: visible !important; opacity: 1 !important; max-height: none !important;")})},100)}catch(st){console.error("Error rendering StyleManager on tab switch:",st)}}},150)}},[Q]),u.useEffect(()=>{if(o.current){const ne=o.current,ke=Ze=>{const st=Ze?.get("type");if(Ze&&(st==="link"||st==="button"||st==="button-outline"||st==="button-text")){const Xe=Ze.getTrait("pageLink");if(Xe){const Ve=dt.map(je=>({id:je.id,value:je.id,name:je.name}));Ve.unshift({id:"",value:"",name:"-- Select Page --"}),Xe.set("options",Ve)}}const Ct=Ze?.components?.();Ct&&typeof Ct.forEach=="function"&&Ct.forEach(Xe=>ke(Xe))},Re=ne.getWrapper&&ne.getWrapper();Re&&ke(Re)}},[dt]),u.useEffect(()=>{const ne=ke=>{const Re=ke.target;Xt&&!Re.closest("[data-page-manager]")&&br(!1)};return document.addEventListener("mousedown",ne),()=>{document.removeEventListener("mousedown",ne)}},[Xt]),u.useEffect(()=>{localStorage.getItem("ziplofy.elementorTutorialSeen")||setTimeout(()=>{P(!0)},1e3)},[]);const wn=u.useCallback(()=>{const ne=document.getElementById("blocks-panel");if(!ne)return;const ke=ne.querySelectorAll(".gjs-block");if(ke.length===0)return;const Re=($||"").toLowerCase();ke.forEach(Ze=>{const st=(Ze.textContent||"").toLowerCase(),Ct=!Re||st.includes(Re);Ze.style.display=Ct?"flex":"none",Ze.style.visibility=Ct?"visible":"hidden"})},[$]);u.useEffect(()=>{wn()},[wn]),u.useEffect(()=>{he&&o.current&&(console.log(" Editing custom theme - ensuring widgets are visible"),xe("widgets"),setTimeout(()=>{const ne=o.current,ke=document.getElementById("blocks-panel"),Re=document.querySelector(".elementor-blocks-wrapper");ne?.BlockManager&&ke&&(Re&&(Re.style.setProperty("display","block","important"),Re.style.setProperty("visibility","visible","important"),Re.style.setProperty("opacity","1","important")),ke.style.setProperty("display","block","important"),ke.style.setProperty("visibility","visible","important"),ke.style.setProperty("opacity","1","important"),ke.querySelectorAll(".gjs-block").length===0&&(console.log("No blocks found when editing theme, rendering..."),ke.innerHTML="",ne.BlockManager.render(),i.current=!0))},500))},[he]),u.useEffect(()=>{if(Q==="widgets"){const ne=document.querySelector(".elementor-blocks-wrapper");ne&&(ne.style.setProperty("display","block","important"),ne.style.setProperty("visibility","visible","important"),ne.style.setProperty("opacity","1","important"));const ke=()=>{const Re=o.current;if(!Re?.BlockManager){console.warn("BlockManager not available yet, retrying..."),setTimeout(ke,200);return}const Ze=document.getElementById("blocks-panel");if(!Ze){console.warn("blocks-panel not found, retrying..."),setTimeout(()=>{const Ve=document.getElementById("blocks-panel"),je=o.current;if(Ve&&je?.BlockManager){const He=Ve.closest(".elementor-blocks-wrapper");He&&(He.style.setProperty("display","block","important"),He.style.setProperty("visibility","visible","important"),He.style.setProperty("opacity","1","important")),Ve.style.setProperty("display","block","important"),Ve.style.setProperty("visibility","visible","important"),Ve.style.setProperty("opacity","1","important"),Ve.innerHTML="",je.BlockManager.render(),i.current=!0}},200);return}const st=Ze.closest(".elementor-blocks-wrapper");st&&(st.style.setProperty("display","block","important"),st.style.setProperty("visibility","visible","important"),st.style.setProperty("opacity","1","important")),Ze.style.setProperty("display","block","important"),Ze.style.setProperty("visibility","visible","important"),Ze.style.setProperty("opacity","1","important");const Ct=Ze.querySelectorAll(".gjs-block"),Xe=!!Ze.querySelector(".gjs-blocks-c");if(Ct.length===0||!Xe)console.log("No blocks found in widgets tab, rendering..."),Ze.innerHTML="",Re.BlockManager.render(),i.current=!0,setTimeout(()=>{const Ve=o.current;Ze.querySelectorAll(".gjs-block").length===0&&Ve?.BlockManager&&(console.log("Still no blocks after render, retrying..."),Ze.innerHTML="",Ve.BlockManager.render()),setTimeout(()=>{const He=Ze.querySelectorAll(".gjs-block");He.forEach(ce=>{ce&&(ce.style.display="flex",ce.style.visibility="visible",ce.style.opacity="1",ce.style.pointerEvents="auto",ce.style.cursor="grab",ce.style.position="relative",ce.style.zIndex="1")}),Ze.querySelectorAll(".gjs-block-category").forEach(ce=>{ce&&(ce.style.display="block",ce.style.visibility="visible")});const Ot=Ze.querySelector(".gjs-blocks-c");Ot&&(Ot.style.display="flex",Ot.style.visibility="visible",Ot.style.opacity="1"),console.log(`Rendered ${He.length} blocks in widgets tab`),wn()},100)},200);else{i.current=!0,Ct.forEach(He=>{He&&(He.style.display="flex",He.style.visibility="visible",He.style.opacity="1",He.style.pointerEvents="auto",He.style.cursor="grab",He.style.position="relative",He.style.zIndex="1")}),Ze.querySelectorAll(".gjs-block-category").forEach(He=>{He&&(He.style.display="block",He.style.visibility="visible")});const je=Ze.querySelector(".gjs-blocks-c");je&&(je.style.display="flex",je.style.visibility="visible",je.style.opacity="1"),wn()}};ke()}},[Q,wn]),u.useEffect(()=>{if(Q==="widgets"){const ne=document.getElementById("blocks-panel"),ke=document.querySelector(".elementor-blocks-wrapper");if(!ne||!ke)return;ke.style.setProperty("display","block","important"),ke.style.setProperty("visibility","visible","important"),ke.style.setProperty("opacity","1","important");const Re=new MutationObserver(()=>{if(Q==="widgets"){const He=window.getComputedStyle(ke);(He.display==="none"||He.visibility==="hidden"||He.opacity==="0")&&(console.warn("Wrapper was hidden! Restoring visibility..."),ke.style.setProperty("display","block","important"),ke.style.setProperty("visibility","visible","important"),ke.style.setProperty("opacity","1","important"))}});Re.observe(ke,{attributes:!0,attributeFilter:["style","class"],subtree:!1});let Ze=ne.querySelectorAll(".gjs-block").length;ne.innerHTML;let st=null,Ct=!1;const Xe=new MutationObserver(He=>{if(Ct)return;const Ot=ne.querySelectorAll(".gjs-block").length;ne.innerHTML,He.forEach(ce=>{ce.type==="childList"&&ce.removedNodes.length>0&&Array.from(ce.removedNodes).filter(ut=>ut.nodeType===Node.ELEMENT_NODE&&(ut.classList.contains("gjs-block")||ut.querySelector(".gjs-block"))).length>0&&Ot===0&&Ze>0&&ne.innerHTML.trim()===""&&(st&&clearTimeout(st),st=setTimeout(()=>{if(ne.querySelectorAll(".gjs-block").length===0&&ne.innerHTML.trim()===""&&o.current?.BlockManager){console.warn("Blocks were removed! Restoring..."),Ct=!0;const jt=ne.closest(".elementor-blocks-wrapper");jt&&(jt.style.setProperty("display","block","important"),jt.style.setProperty("visibility","visible","important"),jt.style.setProperty("opacity","1","important")),o.current.BlockManager.render(),setTimeout(()=>{const Lt=ne.querySelectorAll(".gjs-block");Lt.forEach(Br=>{Br&&(Br.style.display="flex",Br.style.visibility="visible",Br.style.opacity="1",Br.style.pointerEvents="auto",Br.style.cursor="grab",Br.style.position="relative",Br.style.zIndex="1")}),ne.querySelectorAll(".gjs-block-category").forEach(Br=>{Br&&(Br.style.display="block",Br.style.visibility="visible")}),Ze=Lt.length,ne.innerHTML,Ct=!1,console.log(`Restored ${Lt.length} blocks`)},150)}},300))}),Ot>0&&(Ze=Ot)});Xe.observe(ne,{childList:!0,subtree:!0,attributes:!1,characterData:!1});const Ve=()=>{if(Ct)return;const He=document.querySelector(".elementor-blocks-wrapper");He&&(He.style.setProperty("display","block","important"),He.style.setProperty("visibility","visible","important"),He.style.setProperty("opacity","1","important")),ne.style.setProperty("display","block","important"),ne.style.setProperty("visibility","visible","important"),ne.style.setProperty("opacity","1","important");const at=ne.querySelectorAll(".gjs-block");at.length>0?at.forEach(Ot=>{Ot&&(Ot.style.display="flex",Ot.style.visibility="visible",Ot.style.opacity="1",Ot.style.pointerEvents="auto",Ot.style.cursor="grab")}):i.current&&o.current?.BlockManager&&ne.innerHTML.trim()===""&&(console.warn("Periodic check: Blocks missing, restoring..."),ne.innerHTML="",o.current.BlockManager.render(),i.current=!0)};Ve();const je=setInterval(()=>{const He=document.querySelector(".elementor-blocks-wrapper");He&&Q==="widgets"&&(He.style.setProperty("display","block","important"),He.style.setProperty("visibility","visible","important"),He.style.setProperty("opacity","1","important")),Ve()},500);return()=>{st&&clearTimeout(st),Xe.disconnect(),Re.disconnect(),clearInterval(je)}}},[Q]),u.useEffect(()=>{if(Q==="style"){const ne=()=>{const Re=o.current;if(!Re?.StyleManager){console.warn("StyleManager not available yet, retrying..."),setTimeout(ne,200);return}const Ze=document.getElementById("style-panel");if(!Ze){console.warn("style-panel not found, retrying..."),setTimeout(ne,200);return}document.querySelectorAll(".gjs-sm-sector, .gjs-sm-property, .gjs-sm-properties").forEach(Ve=>{Ve.closest("#style-panel")||Ve.remove()});let Ct=Re.getSelected();if(Ct)Ct.set({stylable:!0});else{const Ve=Re.getWrapper();Ve&&(Re.select(Ve),Ve.set({stylable:!0}),Ct=Ve)}Ze.innerHTML="",Ct&&Re.StyleManager.setTarget&&Re.StyleManager.setTarget(Ct);const Xe=Re.StyleManager.render();Xe&&Ze.appendChild(Xe),setTimeout(()=>{const Ve=Ze.querySelectorAll(".gjs-sm-sector");if(console.log(`Style Manager rendered with ${Ve.length} sectors`),Ve.length===0){console.warn("No sectors found after render, retrying..."),setTimeout(ne,300);return}Ve.forEach(He=>{if(He){He.style.display="block",He.style.visibility="visible",He.style.opacity="1",He.style.background="#ffffff";const at=He.querySelector(".gjs-sm-sector-content");at&&(at.style.display="block",at.style.visibility="visible",at.style.opacity="1")}}),Ze.querySelectorAll(".gjs-sm-property").forEach(He=>{He&&(He.style.display="block",He.style.visibility="visible",He.style.opacity="1",He.querySelectorAll("input, select, textarea").forEach(Ot=>{Ot&&(Ot.style.pointerEvents="auto",Ot.style.cursor=Ot.tagName==="SELECT"?"pointer":"text",Ot.style.position="relative",Ot.style.zIndex="10")}))})},200)};setTimeout(()=>{try{const Re=document.getElementById("style-panel");if(!Re){console.warn("style-panel not found, starting render loop..."),ne();return}Re.style.setProperty("display","block","important"),Re.style.setProperty("visibility","visible","important"),Re.style.setProperty("opacity","1","important"),Re.style.setProperty("background","#ffffff","important"),Re.style.setProperty("min-height","200px","important"),Re.style.setProperty("width","100%","important"),Re.style.setProperty("height","auto","important"),Re.style.setProperty("position","relative","important"),Re.style.setProperty("z-index","1","important");const Ze=Re.closest(".elementor-panel-card");Ze&&(Ze.style.setProperty("display","flex","important"),Ze.style.setProperty("visibility","visible","important"),Ze.style.setProperty("opacity","1","important"));const st=Re.closest(".elementor-left-scroll");st&&(st.style.setProperty("display","flex","important"),st.style.setProperty("visibility","visible","important"),st.style.setProperty("opacity","1","important")),ne()}catch(Re){console.warn("Error rendering Style Manager:",Re)}},100);const ke=setInterval(()=>{if(Q!=="style"){clearInterval(ke);return}const Re=document.getElementById("style-panel");if(!Re)return;Re.querySelectorAll("input, select, textarea").forEach(st=>{st&&!st.disabled&&(st.style.pointerEvents="auto",st.style.cursor=st.tagName==="SELECT"?"pointer":"text",st.style.position="relative",st.style.zIndex="10")})},1e3);return()=>clearInterval(ke)}},[Q]);const zr=(ne,ke)=>{try{ke.querySelectorAll(".gjs-lm-layer, .gjs-lm-item").forEach(Ze=>{if(Ze.dataset.enriched==="true")return;Ze.dataset.enriched="true";let st=null;if(ne.LayerManager){const Ct=ne.LayerManager.views||[];for(const Xe of Ct)if(Xe.el===Ze||Ze.contains(Xe.el)){st=Xe.model;break}!st&&ne.LayerManager.getComponentFromView&&(st=ne.LayerManager.getComponentFromView(Ze))}if(st)try{const Ct=st.get("tagName")||"div",Xe=st.get("attributes")?.id||st.get("id")||"",Ve=st.get("classes")?.map(jt=>jt.getName?.()||jt.name||jt).join(" ")||"",je=st.get("type")||Ct.toLowerCase(),He=st.components?st.components().length:0;let at=0,Ot=st.getParent();for(;Ot;)at++,Ot=Ot.getParent();Ze.setAttribute("data-depth",at.toString());const ce=Ze.querySelector(".gjs-lm-title");if(ce&&(ce.setAttribute("data-element-type",Ct.toUpperCase()),He>0)){let jt=ce.querySelector(".gjs-lm-badge");jt||(jt=document.createElement("span"),jt.className="gjs-lm-badge",ce.appendChild(jt)),jt.textContent=He.toString()}let Te=Ze.querySelector(".gjs-lm-element-info");if(!Te&&(Xe||Ve)&&(Te=document.createElement("div"),Te.className="gjs-lm-element-info",Ze.appendChild(Te)),Te){if(Te.innerHTML="",Xe){const jt=document.createElement("span");jt.className="element-id",jt.textContent=`#${Xe}`,Te.appendChild(jt)}Ve&&Ve.split(" ").filter(Lt=>Lt.trim()).forEach(Lt=>{if(Lt){const ur=document.createElement("span");ur.className="element-class",ur.textContent=`.${Lt}`,Te.appendChild(ur)}})}const ut=[];ut.push(`Type: ${Ct.toUpperCase()}`),je&&je!==Ct.toLowerCase()&&ut.push(`Component: ${je}`),Xe&&ut.push(`ID: ${Xe}`),Ve&&ut.push(`Classes: ${Ve}`),He>0&&ut.push(`Children: ${He}`),Ze.setAttribute("title",ut.join("  "))}catch(Ct){console.warn("Error enriching layer item:",Ct)}})}catch(Re){console.warn("Error enriching layer items:",Re)}},In=(ne,ke)=>{try{zr(ne,ke),ke.querySelectorAll(".gjs-lm-layer, .gjs-lm-item").forEach(Ct=>{if(Ct.dataset.selectionHandlerAttached==="true")return;Ct.dataset.selectionHandlerAttached="true",(Ct.querySelector(".gjs-lm-title")||Ct).addEventListener("click",Ve=>{const je=Ve.target;if(!(je.classList.contains("gjs-lm-caret")||je.closest(".gjs-lm-caret"))){Ve.stopPropagation();try{let He=null;if(ne.LayerManager){const at=ne.LayerManager.views||[];for(const Ot of at)if(Ot.el===Ct||Ct.contains(Ot.el)){He=Ot.model;break}!He&&ne.LayerManager.getComponentFromView&&(He=ne.LayerManager.getComponentFromView(Ct))}if(!He){const at=ne.getComponents(),Ot=(ce,Te)=>{const ut=Te.textContent?.trim()||"";for(const jt of ce.models||ce)try{if(jt.getEl?.()){const ur=jt.get("type")||"",Br=jt.get("tagName")||"",_t=ut.toLowerCase().includes(Br.toLowerCase()),Kr=ut.toLowerCase().includes(ur.toLowerCase());if(_t||Kr)return jt}if(jt.components){const ur=Ot(jt.components(),Te);if(ur)return ur}}catch{}return null};He=Ot(at,Ct)}He?(ne.select(He),xe("style"),setTimeout(()=>{ne.runCommand("open-sm")},100)):(xe("style"),setTimeout(()=>{ne.runCommand("open-sm")},100))}catch(He){console.warn("Error selecting component from layer:",He),xe("style")}}})});let Ze=!1;ke.addEventListener("click",()=>{Ze=!0,setTimeout(()=>{Ze=!1},300)},!0);const st=Ct=>{Ze&&Ct&&(xe("style"),setTimeout(()=>{ne.runCommand("open-sm")},100))};ne._layerSelectionListenerAdded||(ne.on("component:selected",st),ne._layerSelectionListenerAdded=!0)}catch(Re){console.warn("Error attaching layer selection handlers:",Re)}};return u.useEffect(()=>{const ne=o.current;ne?.LayerManager&&Q==="structure"&&setTimeout(()=>{try{const ke=document.getElementById("layers-panel");if(!ke){console.warn("layers-panel not found, retrying..."),setTimeout(()=>{const Xe=document.getElementById("layers-panel");if(Xe&&ne.LayerManager){Xe.style.setProperty("display","block","important"),Xe.style.setProperty("visibility","visible","important"),Xe.style.setProperty("opacity","1","important"),document.querySelectorAll(".gjs-layers, .gjs-layer-item, .gjs-layer-item-title").forEach(at=>{at.closest("#layers-panel")||at.remove()}),Xe.querySelectorAll('.gjs-sm-sector, .gjs-sm-property, .gjs-sm-properties, .gjs-sm-sector-content, .gjs-sm-property__field, .gjs-field, [class*="gjs-sm"]').forEach(at=>{at.remove()}),Xe.innerHTML="";const He=ne.LayerManager.render();He&&(Xe.appendChild(He),setTimeout(()=>{In(ne,Xe),zr(ne,Xe)},150))}},100);return}document.querySelectorAll(".gjs-layers, .gjs-layer-item, .gjs-layer-item-title").forEach(Xe=>{Xe.closest("#layers-panel")||Xe.remove()}),ke.querySelectorAll('.gjs-sm-sector, .gjs-sm-property, .gjs-sm-properties, .gjs-sm-sector-content, .gjs-sm-property__field, .gjs-field, [class*="gjs-sm"]').forEach(Xe=>{Xe.remove()}),ke.style.setProperty("display","block","important"),ke.style.setProperty("visibility","visible","important"),ke.style.setProperty("opacity","1","important");const st=ke.closest(".elementor-panel-card");st&&(st.style.setProperty("display","flex","important"),st.style.setProperty("visibility","visible","important"),st.style.setProperty("opacity","1","important"));const Ct=document.getElementById("style-panel");if(Ct){const Xe=Ct.closest('.elementor-panel-card[data-panel-type="style"]');Xe&&Xe.style.setProperty("display","none","important")}if(ke.innerHTML="",typeof ne.LayerManager.render=="function"){const Xe=ne.LayerManager.render();Xe&&(ke.appendChild(Xe),setTimeout(()=>{In(ne,ke),zr(ne,ke)},150))}console.log("Layer Manager rendered in layers-panel")}catch(ke){console.warn("Error rendering Layer Manager:",ke)}},100)},[Q]),u.useEffect(()=>{let ne=null;const ke=()=>{const Re=document.getElementById("layers-panel"),Ze=document.getElementById("style-panel"),st=document.querySelector(".elementor-blocks-wrapper"),Ct=document.getElementById("blocks-panel");if(Q==="widgets"){if(st&&st.querySelectorAll('.gjs-sm-sector, .gjs-sm-property, .gjs-sm-properties, .gjs-sm-sector-content, .gjs-sm-property__field, .gjs-field, [class*="gjs-sm"]').forEach(Ve=>{Ve.remove()}),Ct&&Ct.querySelectorAll('.gjs-sm-sector, .gjs-sm-property, .gjs-sm-properties, .gjs-sm-sector-content, .gjs-sm-property__field, .gjs-field, [class*="gjs-sm"]').forEach(Ve=>{Ve.remove()}),Ze){const Xe=Ze.closest('.elementor-panel-card[data-panel-type="style"]');Xe&&Xe.style.setProperty("display","none","important")}if(Re){const Xe=Re.closest('.elementor-panel-card[data-panel-type="structure"]');Xe&&Xe.style.setProperty("display","none","important")}}if(Q==="structure"&&(Re&&Re.querySelectorAll('.gjs-sm-sector, .gjs-sm-property, .gjs-sm-properties, .gjs-sm-sector-content, .gjs-sm-property__field, .gjs-field, [class*="gjs-sm"]').forEach(Ve=>{Ve.remove()}),Ze)){const Xe=Ze.closest('.elementor-panel-card[data-panel-type="style"]');Xe&&Xe.style.setProperty("display","none","important")}if(Q==="style"&&(Ze&&Ze.querySelectorAll('.gjs-layers, .gjs-layer-item, .gjs-layer-item-title, .gjs-lm-layer, .gjs-lm-title, .gjs-lm-items, [class*="gjs-lm"]').forEach(Ve=>{Ve.remove()}),Re)){const Xe=Re.closest('.elementor-panel-card[data-panel-type="structure"]');Xe&&Xe.style.setProperty("display","none","important")}Q!=="style"&&document.querySelectorAll('.gjs-sm-sector, .gjs-sm-property, .gjs-sm-properties, .gjs-sm-sector-content, .gjs-sm-property__field, .gjs-field, [class*="gjs-sm"]').forEach(Ve=>{Ve.closest("#style-panel")||Ve.remove()}),Q!=="structure"&&document.querySelectorAll('.gjs-layers, .gjs-layer-item, .gjs-layer-item-title, .gjs-lm-layer, .gjs-lm-title, .gjs-lm-items, [class*="gjs-lm"]').forEach(Ve=>{Ve.closest("#layers-panel")||Ve.remove()})};return ke(),ne&&clearTimeout(ne),ne=setTimeout(()=>{ke()},100),()=>{ne&&clearTimeout(ne)}},[Q]),n.jsxs("div",{ref:a,className:"custom-theme-builder-root",style:{display:"flex",flexDirection:"column",height:"100vh",background:"#fff"},children:[N&&n.jsxs("div",{style:{position:"fixed",top:"70px",left:"50%",transform:"translateX(-50%)",zIndex:1e4,background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"#fff",padding:"14px 28px",borderRadius:"8px",boxShadow:"0 4px 20px rgba(16, 185, 129, 0.4)",display:"flex",alignItems:"center",gap:"10px",fontSize:"14px",fontWeight:600,animation:"slideDown 0.3s ease-out"},children:[n.jsx("span",{style:{fontSize:"18px"},children:""}),"Theme published successfully!"]}),n.jsxs("div",{className:"elementor-top-bar",children:[n.jsxs("div",{className:"elementor-top-bar-left",children:[n.jsx("div",{className:"elementor-top-bar-icon",onClick:()=>r("/themes/all-themes"),title:"Back to Themes",children:""}),n.jsxs("div",{style:{marginLeft:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("span",{style:{fontSize:"11px",color:"rgba(0, 0, 0, 0.4)",fontWeight:600,letterSpacing:"0.5px",textTransform:"uppercase"},children:"Theme:"}),n.jsx("input",{type:"text",value:v,onChange:ne=>{w(ne.target.value),L(!0)},placeholder:"Theme Name",style:{background:"rgba(0, 0, 0, 0.02)",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"6px",padding:"6px 12px",color:"#000",fontSize:"13px",fontWeight:500,minWidth:"180px",maxWidth:"250px",outline:"none",transition:"all 0.2s ease"},onFocus:ne=>{ne.target.style.borderColor="#00d2be",ne.target.style.background="rgba(0, 210, 190, 0.08)",ne.target.style.boxShadow="0 0 0 3px rgba(0, 210, 190, 0.12)"},onBlur:ne=>{ne.target.style.borderColor="rgba(0, 0, 0, 0.1)",ne.target.style.background="rgba(0, 0, 0, 0.02)",ne.target.style.boxShadow="none"}})]}),n.jsx("button",{onClick:()=>{const ne=o.current;ne&&ne.UndoManager&&ne.UndoManager.undo()},disabled:!d,title:"Undo (Ctrl+Z)",style:{background:d?"rgba(0, 0, 0, 0.05)":"rgba(0, 0, 0, 0.02)",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"6px",padding:"6px 10px",color:d?"#000":"rgba(0, 0, 0, 0.3)",cursor:d?"pointer":"not-allowed",fontSize:"13px",fontWeight:500,display:"flex",alignItems:"center",gap:"4px",transition:"all 0.2s ease",opacity:d?1:.5,marginLeft:"8px"},onMouseEnter:ne=>{d&&(ne.currentTarget.style.background="rgba(0, 0, 0, 0.08)",ne.currentTarget.style.borderColor="rgba(0, 0, 0, 0.2)")},onMouseLeave:ne=>{d&&(ne.currentTarget.style.background="rgba(0, 0, 0, 0.05)",ne.currentTarget.style.borderColor="rgba(0, 0, 0, 0.1)")},children:" Undo"}),n.jsx("button",{onClick:()=>{const ne=o.current;ne&&ne.UndoManager&&ne.UndoManager.redo()},disabled:!h,title:"Redo (Ctrl+Shift+Z)",style:{background:h?"rgba(0, 0, 0, 0.05)":"rgba(0, 0, 0, 0.02)",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"6px",padding:"6px 10px",color:h?"#000":"rgba(0, 0, 0, 0.3)",cursor:h?"pointer":"not-allowed",fontSize:"13px",fontWeight:500,display:"flex",alignItems:"center",gap:"4px",transition:"all 0.2s ease",opacity:h?1:.5,marginLeft:"4px"},onMouseEnter:ne=>{h&&(ne.currentTarget.style.background="rgba(0, 0, 0, 0.08)",ne.currentTarget.style.borderColor="rgba(0, 0, 0, 0.2)")},onMouseLeave:ne=>{h&&(ne.currentTarget.style.background="rgba(0, 0, 0, 0.05)",ne.currentTarget.style.borderColor="rgba(0, 0, 0, 0.1)")},children:" Redo"}),n.jsx("div",{className:"elementor-top-bar-icon",title:"Add Widget",onClick:()=>{xe("widgets"),Z(!1)},style:{cursor:"pointer"},children:"+"}),n.jsx("div",{className:"elementor-top-bar-icon",title:"Toggle Grid Overlay",onClick:()=>{ae(!ve);const ne=o.current;if(ne){const ke=ne.Canvas;if(ke){const Re=ke.getFrameEl();if(Re&&Re.contentDocument){const Ze=Re.contentDocument.body;if(Ze)if(ve){const st=Re.contentDocument.getElementById("ziplofy-grid-overlay");st&&st.remove()}else{const st=Re.contentDocument.createElement("div");st.id="ziplofy-grid-overlay",st.style.cssText=`
                          position: fixed;
                          top: 0;
                          left: 0;
                          width: 100%;
                          height: 100%;
                          background-image: 
                            linear-gradient(rgba(0, 0, 0, 0.1) 1px, transparent 1px),
                            linear-gradient(90deg, rgba(0, 0, 0, 0.1) 1px, transparent 1px);
                          background-size: 20px 20px;
                          pointer-events: none;
                          z-index: 9999;
                        `,Ze.appendChild(st)}}}}},style:{cursor:"pointer",opacity:ve?1:.6},children:""}),n.jsx("div",{className:"elementor-top-bar-icon",title:"Settings",onClick:()=>{xe("style"),Z(!1)},style:{cursor:"pointer"},children:""})]}),n.jsxs("div",{className:"elementor-top-bar-center",children:[n.jsxs("div",{"data-page-manager":!0,style:{position:"relative",display:"flex",alignItems:"center",gap:8,zIndex:1e4},children:[n.jsxs("button",{onClick:()=>br(!Xt),style:{padding:"8px 16px",background:"rgba(0, 210, 190, 0.08)",border:"1px solid rgba(0, 210, 190, 0.3)",borderRadius:"8px",color:"#00b8a8",cursor:"pointer",fontSize:13,fontWeight:500,display:"flex",alignItems:"center",gap:6,transition:"all 0.2s ease",position:"relative",zIndex:10001},onMouseEnter:ne=>{ne.currentTarget.style.background="rgba(0, 210, 190, 0.15)",ne.currentTarget.style.borderColor="#00d2be"},onMouseLeave:ne=>{ne.currentTarget.style.background="rgba(0, 210, 190, 0.08)",ne.currentTarget.style.borderColor="rgba(0, 210, 190, 0.3)"},children:[n.jsx("span",{children:dt.find(ne=>ne.id===At)?.name||"Home"}),n.jsx("span",{style:{fontSize:10,transition:"transform 0.2s ease",transform:Xt?"rotate(180deg)":"rotate(0deg)"},children:""})]}),Xt&&n.jsxs("div",{style:{position:"absolute",top:"100%",left:0,marginTop:8,background:"linear-gradient(145deg, #1a1a22 0%, #141418 100%)",border:"1px solid rgba(0, 210, 190, 0.3)",borderRadius:10,minWidth:280,maxHeight:450,overflowY:"auto",zIndex:99999,boxShadow:"0 12px 40px rgba(0, 0, 0, 0.6), 0 0 0 1px rgba(255, 255, 255, 0.05), 0 0 20px rgba(0, 210, 190, 0.15)",backdropFilter:"blur(10px)"},children:[n.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid rgba(255, 255, 255, 0.08)",fontSize:10,color:"rgba(0, 210, 190, 0.8)",fontWeight:700,letterSpacing:"1px",textTransform:"uppercase",background:"rgba(0, 210, 190, 0.05)"},children:["PAGES (",dt.length,")"]}),dt.map(ne=>n.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid rgba(255, 255, 255, 0.05)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",background:ne.id===At?"rgba(0, 210, 190, 0.12)":"transparent",transition:"all 0.2s ease",position:"relative"},onMouseEnter:ke=>{ne.id!==At&&(ke.currentTarget.style.background="rgba(255, 255, 255, 0.05)")},onMouseLeave:ke=>{ne.id!==At&&(ke.currentTarget.style.background="transparent")},onClick:()=>{an(ne.id),br(!1)},children:[ne.id===At&&n.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:"3px",background:"linear-gradient(180deg, #00d2be 0%, #00b8a8 100%)",borderRadius:"0 2px 2px 0"}}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flex:1,paddingLeft:ne.id===At?8:0},children:[n.jsx("input",{type:"text",value:ne.name,onClick:ke=>ke.stopPropagation(),onChange:ke=>{ke.stopPropagation(),kr(ne.id,ke.target.value)},style:{background:"transparent",border:"none",color:ne.id===At?"#00d2be":"#fff",fontSize:13,padding:"4px 6px",flex:1,outline:"none",fontWeight:ne.id===At?600:400,borderRadius:"4px"},onFocus:ke=>{ke.target.style.background="rgba(255, 255, 255, 0.05)",ke.target.style.border="1px solid rgba(0, 210, 190, 0.3)",ke.target.style.padding="3px 5px"},onBlur:ke=>{ke.target.style.background="transparent",ke.target.style.border="none",ke.target.style.padding="4px 6px"}}),ne.id===At&&n.jsx("span",{style:{fontSize:8,color:"#00d2be",fontWeight:700},children:""})]}),dt.length>1&&n.jsx("button",{onClick:ke=>{ke.stopPropagation(),rn(ne.id)},style:{background:"transparent",border:"none",color:"rgba(220, 38, 38, 0.7)",cursor:"pointer",padding:"6px 10px",fontSize:14,borderRadius:6,transition:"all 0.2s ease"},onMouseEnter:ke=>{ke.currentTarget.style.background="rgba(220, 38, 38, 0.15)",ke.currentTarget.style.color="#dc2626"},onMouseLeave:ke=>{ke.currentTarget.style.background="transparent",ke.currentTarget.style.color="rgba(220, 38, 38, 0.7)"},children:""})]},ne.id)),n.jsxs("div",{onClick:()=>{En(),br(!1)},style:{padding:"14px 16px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8,color:"#00d2be",fontSize:13,fontWeight:600,borderTop:"1px solid rgba(255, 255, 255, 0.08)",background:"rgba(0, 210, 190, 0.05)",transition:"all 0.2s ease"},onMouseEnter:ne=>{ne.currentTarget.style.background="rgba(0, 210, 190, 0.12)",ne.currentTarget.style.color="#00e5d1"},onMouseLeave:ne=>{ne.currentTarget.style.background="rgba(0, 210, 190, 0.05)",ne.currentTarget.style.color="#00d2be"},children:[n.jsx("span",{style:{fontSize:16,fontWeight:400},children:"+"}),n.jsx("span",{children:"Add New Page"})]})]})]}),n.jsx("div",{className:"elementor-top-bar-icon",title:"Settings",onClick:()=>{xe("style"),Z(!1)},style:{cursor:"pointer"},children:""}),n.jsxs("div",{className:"elementor-device-switcher",children:[n.jsx("button",{className:`elementor-device-btn ${Y==="desktop"?"active":""}`,onClick:()=>{try{const ne=o.current;ne&&ne.setDevice&&(ne.setDevice("desktop"),M("desktop"),setTimeout(()=>{const ke=document.querySelector(".gjs-cv-canvas"),Re=document.querySelector(".gjs-frame");ke&&(ke.style.setProperty("display","flex","important"),ke.style.setProperty("justify-content","center","important"),ke.style.setProperty("align-items","flex-start","important"),ke.style.setProperty("width","100%","important"),ke.style.setProperty("margin","0","important"),ke.style.setProperty("padding","24px","important")),Re&&(Re.style.setProperty("min-width","1200px","important"),Re.style.setProperty("max-width","1200px","important"),Re.style.setProperty("width","1200px","important"),Re.style.setProperty("margin","0 auto","important"))},100))}catch(ne){console.error("Error switching to desktop:",ne)}},title:"Desktop",children:""}),n.jsx("button",{className:`elementor-device-btn ${Y==="tablet"?"active":""}`,onClick:()=>{try{const ne=o.current;ne&&ne.setDevice&&(ne.setDevice("tablet"),M("tablet"),setTimeout(()=>{const ke=document.querySelector(".gjs-cv-canvas"),Re=document.querySelector(".gjs-frame");ke&&(ke.style.setProperty("display","flex","important"),ke.style.setProperty("justify-content","center","important"),ke.style.setProperty("align-items","flex-start","important"),ke.style.setProperty("width","100%","important"),ke.style.setProperty("margin","0","important"),ke.style.setProperty("padding","24px","important")),Re&&(Re.style.setProperty("min-width","768px","important"),Re.style.setProperty("max-width","768px","important"),Re.style.setProperty("width","768px","important"),Re.style.setProperty("margin","0 auto","important"))},100))}catch(ne){console.error("Error switching to tablet:",ne)}},title:"Tablet",children:""}),n.jsx("button",{className:`elementor-device-btn ${Y==="mobile"?"active":""}`,onClick:()=>{try{const ne=o.current;ne&&ne.setDevice&&(ne.setDevice("mobile"),M("mobile"),setTimeout(()=>{const ke=document.querySelector(".gjs-cv-canvas"),Re=document.querySelector(".gjs-frame");ke&&(ke.style.setProperty("display","flex","important"),ke.style.setProperty("justify-content","center","important"),ke.style.setProperty("align-items","flex-start","important"),ke.style.setProperty("width","100%","important"),ke.style.setProperty("margin","0","important"),ke.style.setProperty("padding","24px","important")),Re&&(Re.style.setProperty("min-width","375px","important"),Re.style.setProperty("max-width","375px","important"),Re.style.setProperty("width","375px","important"),Re.style.setProperty("margin","0 auto","important"))},100))}catch(ne){console.error("Error switching to mobile:",ne)}},title:"Mobile",children:""})]})]}),n.jsxs("div",{className:"elementor-top-bar-right",children:[n.jsx("div",{className:"elementor-top-bar-icon",onClick:()=>{try{const ne=o.current;if(ne){const ke=ne.getSelected();if(ke){const Re=ke.getParent();Re&&Re.get("type")!=="wrapper"?ne.select(Re):console.log("No parent component to select")}else console.log("No component selected")}}catch(ne){console.error("Error selecting parent:",ne)}},title:"Select Parent (Alt+Click)",style:{cursor:"pointer"},children:""}),n.jsx("div",{className:"elementor-top-bar-icon",onClick:()=>{ee(!0)},title:"Notes & Changes",style:{cursor:"pointer"},children:""}),n.jsx("div",{className:"elementor-top-bar-icon",onClick:()=>{try{const ne=o.current;if(ne){const ke=window.__ziplofyCopiedComponent;if(!ke){console.log("No component copied");return}const Re=ne.getSelected();let Ze=ne.getWrapper();if(Re&&Re.get("type")!=="wrapper")if(Re.get("droppable")||Re.getAttributes?.()?.["data-gjs-droppable"]==="*")Ze=Re;else try{const Ve=Re.parent();Ve&&Ve.get&&Ve.get("type")!=="wrapper"&&(Ze=Ve)}catch(Ve){console.warn("Could not get parent, using wrapper:",Ve)}if(!Ze){console.log("No target to paste into");return}let st=null;if(ke.component)try{st=ke.component.clone()}catch(Xe){if(console.warn("Error cloning from component reference:",Xe),ke.html)try{const Ve=ne.getWrapper();if(Ve){const je=Ve.get("content");Ve.set("content",ke.html);const He=Ve.components();if(He&&He.length>0){const at=He.at(0);at&&(st=at,Ve.components().remove(st))}Ve.set("content",je)}}catch(Ve){console.error("Error parsing HTML:",Ve)}}else if(ke.html)try{const Xe=ne.getWrapper();if(Xe){const Ve=Xe.get("content");Xe.set("content",ke.html);const je=Xe.components();if(je&&je.length>0){const He=je.at(0);He&&(st=He,Xe.components().remove(st))}Xe.set("content",Ve)}}catch(Xe){console.error("Error parsing HTML:",Xe)}if(!st){console.error("Failed to clone component");return}const Ct=Xe=>{try{const Ve=Xe.getAttributes?.()||{},je=Xe.get?.("tagName")?.toLowerCase?.()||"",He=Ve["data-gjs-droppable"]==="*"||je==="form",at=Ve["data-gjs-selectable"]!=="false";if(Xe.set({selectable:at,hoverable:!0,draggable:!0,stylable:!0,droppable:He},{silent:!0}),(Ve["data-gjs-editable"]==="true"||Ve["data-gjs-type"]==="text")&&Xe.set({editable:!0,type:"text"},{silent:!0}),ne.CssComposer){const ce=Xe.cid||Xe.getId?.();if(ce){let ut=Xe.getClasses().find(jt=>jt&&!jt.startsWith("gjs-"));ut||(ut=`gjs-comp-${ce}`,Xe.addClass(ut))}}const Ot=Xe.components();Ot&&Ot.length>0&&Ot.forEach(ce=>{Ct(ce)})}catch(Ve){console.warn("Error configuring pasted component:",Ve)}};Ct(st),Ze.components?Ze.components().add(st):Ze.append(st),setTimeout(()=>{ne.select(st)},50),console.log("Component pasted")}}catch(ne){console.error("Error pasting component:",ne)}},title:"Paste (Ctrl+V)",style:{cursor:"pointer"},children:""}),n.jsx("div",{className:"elementor-top-bar-icon",title:"Link Manager",onClick:()=>{const ne=o.current;if(ne){const ke=ne.getWrapper();if(ke){const Re=st=>{const Ct=[];if(!st)return Ct;try{const Xe=st.get?.("tagName")?.toLowerCase?.()||"",Ve=st.get?.("type")||"",je=st.getEl?.(),He=Xe==="a"||Ve==="link";let Ot=He||(Xe==="button"||Ve==="button"||Ve==="button-outline"||Ve==="button-text");if(je&&!Ot){const Te=je.nodeName?.toLowerCase();Ot=Te==="a"||Te==="button"}if(Ot){const Te=st.getAttributes?.()||{},ut=Te.href||st.get?.("href")||je?.getAttribute?.("href")||"",jt=Te["data-page-link"]||st.get?.("data-page-link")||je?.getAttribute?.("data-page-link")||"",Lt=je?.textContent?.trim()||je?.innerText?.trim()||st.get?.("content")||"Untitled";Ct.push({id:st.cid||st.getId?.()||Date.now().toString()+Math.random(),type:He?"link":"button",text:Lt.substring(0,50)+(Lt.length>50?"...":""),href:ut,pageLink:jt,component:st})}const ce=st.components?.();ce&&(typeof ce.forEach=="function"?ce.forEach(Te=>{Ct.push(...Re(Te))}):Array.isArray(ce)&&ce.forEach(Te=>{Ct.push(...Re(Te))}))}catch(Xe){console.warn("Error finding links in component:",Xe)}return Ct},Ze=Re(ke);console.log("Link Manager: Found",Ze.length,"links/buttons"),Ue(Ze),ze(!0)}}else ze(!0)},style:{cursor:"pointer"},children:""}),n.jsx("div",{className:"elementor-top-bar-icon",title:"Global Search",onClick:()=>{Pe(!Se),Se||we("")},style:{cursor:"pointer"},children:""}),n.jsx("div",{className:"elementor-top-bar-icon",onClick:()=>P(!0),title:"Help",style:{cursor:"pointer"},children:"?"}),n.jsx("button",{className:"elementor-preview-btn",onClick:fn,title:"Preview",children:"Preview"}),n.jsx("button",{className:"elementor-publish-btn",onClick:()=>An(!0),disabled:C,children:C?ie?"Modifying...":"Publishing...":ie?"Modify":"Publish"})]})]}),n.jsxs("div",{className:"builder-main-editor",style:{flex:1,display:"flex",overflow:"hidden",background:"#f1f3f5"},children:[n.jsxs("div",{className:`builder-left-panel ${K?"collapsed":""}`,children:[n.jsxs("div",{className:"elementor-elements-header",style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"18px 22px"},children:[!K&&n.jsx("span",{style:{fontSize:"13px",fontWeight:700,textTransform:"uppercase",letterSpacing:"1px",color:"#fff",textShadow:"0 1px 2px rgba(0, 0, 0, 0.3)"},children:"Elements"}),n.jsx("button",{onClick:ne=>{ne.preventDefault(),ne.stopPropagation(),Z(!K)},className:"sidebar-toggle-btn",style:{position:K?"static":"absolute",right:K?"auto":"12px",top:K?"auto":"50%",transform:K?"none":"translateY(-50%)",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.12) 0%, rgba(255, 255, 255, 0.08) 100%)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"rgba(255, 255, 255, 0.9)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",fontSize:"16px",zIndex:10,margin:K?"0 auto":"0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)"},onMouseEnter:ne=>{ne.currentTarget.style.background="linear-gradient(135deg, rgba(0, 210, 190, 0.25) 0%, rgba(0, 210, 190, 0.15) 100%)",ne.currentTarget.style.color="#00d2be",ne.currentTarget.style.boxShadow="0 4px 16px rgba(0, 210, 190, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2)",ne.currentTarget.style.borderColor="rgba(0, 210, 190, 0.3)",ne.currentTarget.style.transform=K?"scale(1.1)":"translateY(-50%) scale(1.1)"},onMouseLeave:ne=>{ne.currentTarget.style.background="linear-gradient(135deg, rgba(255, 255, 255, 0.12) 0%, rgba(255, 255, 255, 0.08) 100%)",ne.currentTarget.style.color="rgba(255, 255, 255, 0.9)",ne.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1)",ne.currentTarget.style.borderColor="rgba(255, 255, 255, 0.1)",ne.currentTarget.style.transform=K?"scale(1)":"translateY(-50%) scale(1)"},title:K?"Expand Sidebar":"Collapse Sidebar",children:K?"":""})]}),!K&&n.jsxs("div",{className:"elementor-primary-tabs",children:[n.jsx("button",{className:`elementor-primary-tab ${Q==="widgets"?"active":""}`,onClick:()=>xe("widgets"),children:"Widgets"}),n.jsx("button",{className:`elementor-primary-tab ${Q==="globals"?"active":""}`,onClick:()=>xe("globals"),children:"Globals"}),n.jsx("button",{className:`elementor-primary-tab ${Q==="structure"?"active":""}`,onClick:()=>xe("structure"),children:"Structure"}),n.jsx("button",{className:`elementor-primary-tab ${Q==="style"?"active":""}`,onClick:()=>xe("style"),children:"Style"})]}),K&&n.jsxs("div",{className:"elementor-primary-tabs-collapsed",style:{display:"flex",flexDirection:"column",gap:"8px",padding:"12px"},children:[n.jsx("button",{className:`elementor-primary-tab-icon ${Q==="widgets"?"active":""}`,onClick:()=>{Z(!1),xe("widgets")},title:"Widgets",style:{width:"36px",height:"36px",borderRadius:"8px",border:"none",background:Q==="widgets"?"rgba(0, 210, 190, 0.2)":"transparent",color:Q==="widgets"?"#00d2be":"rgba(255, 255, 255, 0.6)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",transition:"all 0.2s ease"},onMouseEnter:ne=>{Q!=="widgets"&&(ne.currentTarget.style.background="rgba(255, 255, 255, 0.1)",ne.currentTarget.style.color="#00d2be")},onMouseLeave:ne=>{Q!=="widgets"&&(ne.currentTarget.style.background="transparent",ne.currentTarget.style.color="rgba(255, 255, 255, 0.6)")},children:""}),n.jsx("button",{className:`elementor-primary-tab-icon ${Q==="globals"?"active":""}`,onClick:()=>{Z(!1),xe("globals")},title:"Globals",style:{width:"36px",height:"36px",borderRadius:"8px",border:"none",background:Q==="globals"?"rgba(0, 210, 190, 0.2)":"transparent",color:Q==="globals"?"#00d2be":"rgba(255, 255, 255, 0.6)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",transition:"all 0.2s ease"},onMouseEnter:ne=>{Q!=="globals"&&(ne.currentTarget.style.background="rgba(255, 255, 255, 0.1)",ne.currentTarget.style.color="#00d2be")},onMouseLeave:ne=>{Q!=="globals"&&(ne.currentTarget.style.background="transparent",ne.currentTarget.style.color="rgba(255, 255, 255, 0.6)")},children:""}),n.jsx("button",{className:`elementor-primary-tab-icon ${Q==="structure"?"active":""}`,onClick:()=>{Z(!1),xe("structure")},title:"Structure",style:{width:"36px",height:"36px",borderRadius:"8px",border:"none",background:Q==="structure"?"rgba(0, 210, 190, 0.2)":"transparent",color:Q==="structure"?"#00d2be":"rgba(255, 255, 255, 0.6)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",transition:"all 0.2s ease"},onMouseEnter:ne=>{Q!=="structure"&&(ne.currentTarget.style.background="rgba(255, 255, 255, 0.1)",ne.currentTarget.style.color="#00d2be")},onMouseLeave:ne=>{Q!=="structure"&&(ne.currentTarget.style.background="transparent",ne.currentTarget.style.color="rgba(255, 255, 255, 0.6)")},children:""}),n.jsx("button",{className:`elementor-primary-tab-icon ${Q==="style"?"active":""}`,onClick:()=>{Z(!1),xe("style")},title:"Style",style:{width:"36px",height:"36px",borderRadius:"8px",border:"none",background:Q==="style"?"rgba(0, 210, 190, 0.2)":"transparent",color:Q==="style"?"#00d2be":"rgba(255, 255, 255, 0.6)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",transition:"all 0.2s ease"},onMouseEnter:ne=>{Q!=="style"&&(ne.currentTarget.style.background="rgba(255, 255, 255, 0.1)",ne.currentTarget.style.color="#00d2be")},onMouseLeave:ne=>{Q!=="style"&&(ne.currentTarget.style.background="transparent",ne.currentTarget.style.color="rgba(255, 255, 255, 0.6)")},children:""})]}),!K&&(Q==="widgets"||Q==="globals")&&n.jsxs("div",{className:"elementor-search-widget",children:[n.jsx("span",{className:"elementor-search-icon",children:""}),n.jsx("input",{value:$,onChange:ne=>z(ne.target.value),placeholder:"Search Widget..."})]}),!K&&n.jsxs("div",{className:"elementor-left-scroll",children:[n.jsx("div",{className:"elementor-blocks-wrapper",style:{display:Q==="widgets"?"block":"none",visibility:Q==="widgets"?"visible":"hidden",opacity:Q==="widgets"?"1":"0"},"aria-hidden":Q!=="widgets",ref:ne=>{ne&&Q==="widgets"&&(ne.style.setProperty("display","block","important"),ne.style.setProperty("visibility","visible","important"),ne.style.setProperty("opacity","1","important"))},children:n.jsx("div",{id:"blocks-panel",style:{display:"block",visibility:"visible",opacity:1,minHeight:"200px"}})}),n.jsxs("div",{className:"elementor-secondary-panel",style:{display:Q==="widgets"?"block":"none"},children:[n.jsx("div",{className:"elementor-secondary-title",children:"Settings"}),n.jsx("div",{id:"traits-panel",className:"elementor-secondary-body"})]}),n.jsx("div",{className:"elementor-blocks-wrapper elementor-globals-placeholder",style:{display:Q==="globals"?"block":"none"},"aria-hidden":Q!=="globals",children:"Globals coming soon"}),n.jsxs("div",{className:"elementor-panel-card","data-panel-type":"structure",style:{display:Q==="structure"?"flex":"none"},"aria-hidden":Q!=="structure",children:[n.jsx("div",{className:"elementor-panel-card-title",children:"Structure"}),n.jsx("div",{id:"layers-panel",className:"elementor-panel-card-body",style:{display:"block"}})]}),n.jsxs("div",{className:"elementor-panel-card","data-panel-type":"style",style:{display:Q==="style"?"flex":"none"},"aria-hidden":Q!=="style",children:[n.jsx("div",{className:"elementor-panel-card-title",children:"Style"}),n.jsx("div",{id:"style-panel",className:"elementor-panel-card-body elementor-style-body",style:{display:"block"}})]})]})]}),n.jsx("div",{className:"builder-center-panel",style:{flex:1,display:"flex",flexDirection:"column",background:"#f1f3f5",position:"relative"},children:n.jsxs("div",{style:{flex:1,overflow:"auto",display:"flex",flexDirection:"column",alignItems:"center",padding:"20px"},children:[n.jsxs("div",{className:"elementor-canvas-header",style:{width:"100%",maxWidth:"1200px",marginBottom:0},children:[n.jsx("div",{className:"elementor-canvas-site-name",children:v||"Ziplofy Theme"}),n.jsx("div",{className:"elementor-canvas-page-name",children:dt.find(ne=>ne.id===At)?.name||"Home"})]}),n.jsxs("div",{style:{width:"100%",maxWidth:"1200px",background:"#fff",minHeight:"600px",position:"relative",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[l&&n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",minHeight:"600px",fontSize:14,color:"#6b7280",gap:"16px"},children:[n.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #e5e7eb",borderTop:"4px solid #5e72e4",borderRadius:"50%",animation:"spin 1s linear infinite"}}),n.jsx("div",{children:"Loading Elementor Editor..."}),n.jsx("div",{style:{fontSize:"12px",color:"#9ca3af"},children:"This may take a few moments"}),n.jsx("style",{children:`
                    @keyframes spin {
                      0% { transform: rotate(0deg); }
                      100% { transform: rotate(360deg); }
                    }
                  `})]}),y&&n.jsx("div",{style:{padding:12,background:"#fef2f2",color:"#dc2626",borderRadius:6,fontSize:13,border:"1px solid #fecaca",margin:"20px"},children:y}),n.jsx("div",{ref:t,style:{minHeight:"600px"}})]}),n.jsxs("div",{className:"elementor-canvas-footer",style:{width:"100%",maxWidth:"1200px",marginTop:0},children:["Copyright  ",new Date().getFullYear()," ",v||"Ziplofy Theme"," | Powered by"," ",n.jsx("a",{href:"#",onClick:ne=>ne.preventDefault(),children:"Ziplofy Theme Builder"})]})]})})]}),q&&n.jsx(xte,{onClose:()=>P(!1)}),Se&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e5,background:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>Pe(!1),children:n.jsxs("div",{style:{background:"#ffffff",border:"1px solid rgba(0, 0, 0, 0.2)",borderRadius:"12px",width:"600px",maxWidth:"90vw",maxHeight:"70vh",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.15)",display:"flex",flexDirection:"column"},onClick:ne=>ne.stopPropagation(),children:[n.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[n.jsx("h3",{style:{margin:0,color:"#000",fontSize:"18px",fontWeight:600},children:"Global Search"}),n.jsx("button",{onClick:()=>Pe(!1),style:{background:"transparent",border:"none",color:"#000",fontSize:"24px",cursor:"pointer",padding:"0",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"6px",transition:"all 0.2s ease"},onMouseEnter:ne=>{ne.currentTarget.style.background="rgba(255, 255, 255, 0.1)"},onMouseLeave:ne=>{ne.currentTarget.style.background="transparent"},children:""})]}),n.jsx("input",{type:"text",value:$e,onChange:ne=>we(ne.target.value),placeholder:"Search components, text, styles...",autoFocus:!0,style:{width:"100%",padding:"12px 16px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#fff",fontSize:"14px",outline:"none"},onKeyDown:ne=>{ne.key==="Escape"&&Pe(!1)}})]}),n.jsx("div",{style:{padding:"16px",overflowY:"auto",flex:1},children:$e?n.jsxs("div",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"14px"},children:['Searching for "',$e,'"...',n.jsx("div",{style:{marginTop:"12px",fontSize:"13px",color:"rgba(255, 255, 255, 0.4)"},children:"Search functionality will find components, text content, and styles matching your query."})]}):n.jsx("div",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"14px",textAlign:"center",padding:"40px 0"},children:"Type to search for components, text, or styles..."})})]})}),Ae&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e5,background:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>ze(!1),children:n.jsxs("div",{style:{background:"#ffffff",border:"1px solid rgba(0, 0, 0, 0.2)",borderRadius:"12px",width:"600px",maxWidth:"90vw",maxHeight:"70vh",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.15)",display:"flex",flexDirection:"column"},onClick:ne=>ne.stopPropagation(),children:[n.jsx("div",{style:{padding:"20px",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsx("h3",{style:{margin:0,color:"#000",fontSize:"18px",fontWeight:600},children:"Link Manager"}),n.jsx("button",{onClick:()=>ze(!1),style:{background:"transparent",border:"none",color:"#000",fontSize:"24px",cursor:"pointer",padding:"0",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"6px",transition:"all 0.2s ease"},onMouseEnter:ne=>{ne.currentTarget.style.background="rgba(0, 0, 0, 0.05)"},onMouseLeave:ne=>{ne.currentTarget.style.background="transparent"},children:""})]})}),n.jsxs("div",{style:{padding:"16px",overflowY:"auto",flex:1},children:[Ge.length>0&&n.jsxs("div",{style:{fontSize:"11px",color:"rgba(255, 255, 255, 0.6)",marginBottom:"12px",padding:"10px",background:"rgba(0, 210, 190, 0.1)",borderRadius:"6px",border:"1px solid rgba(0, 210, 190, 0.2)",lineHeight:"1.5"},children:[n.jsx("strong",{style:{color:"#00d2be"},children:" How to use:"})," Click any link/button below to select it in the editor. The Widgets panel will open automatically where you can edit the link settings (Link Type, Page, or URL)."]}),Ge.length===0?n.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"rgba(255, 255, 255, 0.4)",fontSize:"13px"},children:[n.jsx("div",{style:{fontSize:"32px",marginBottom:"12px"},children:""}),n.jsx("div",{children:"No links or buttons found"}),n.jsx("div",{style:{fontSize:"11px",marginTop:"8px",color:"rgba(255, 255, 255, 0.3)"},children:"Add links or buttons to your theme to manage them here"})]}):n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[n.jsxs("div",{style:{fontSize:"12px",color:"rgba(255, 255, 255, 0.5)",marginBottom:"8px"},children:["Found ",Ge.length," ",Ge.length===1?"link/button":"links/buttons"]}),Ge.map(ne=>n.jsxs("div",{onClick:()=>{const ke=o.current;ke&&ne.component&&(ze(!1),Z(!1),xe("widgets"),requestAnimationFrame(()=>{setTimeout(()=>{const Re=document.querySelector(".elementor-secondary-panel");Re&&(Re.style.setProperty("display","block","important"),Re.style.setProperty("visibility","visible","important"),Re.style.setProperty("opacity","1","important")),ke.select(ne.component),setTimeout(()=>{const Ze=ne.component?.get("tagName")?.toLowerCase(),st=Ze==="button";if(st||Ze==="a"){const Ve=ne.component.get("traits")||[];if(!Ve.some(He=>typeof He=="object"&&He.name==="linkType"||He==="linkType")){const He=kt.current||[],at=[{type:"select",name:"linkType",label:st?"Button Action":"Link Type",options:st?[{id:"none",value:"none",name:"No Action"},{id:"page",value:"page",name:"Navigate to Page"},{id:"url",value:"url",name:"Open URL"}]:[{id:"page",value:"page",name:"Link to Page"},{id:"url",value:"url",name:"External URL"}],changeProp:!0},{type:"select",name:"pageLink",label:"Select Page",options:[{id:"",value:"",name:"-- Select Page --"},...He.map(ce=>({id:ce.id,value:ce.id,name:ce.name}))],changeProp:!0},{type:"text",name:"href",label:"URL",placeholder:"https://example.com or #page-1",changeProp:!0}],Ot=Ve.filter(ce=>typeof ce=="string"?ce!=="id"&&ce!=="title"&&ce!=="linkType"&&ce!=="pageLink":ce.name!=="id"&&ce.name!=="title"&&ce.name!=="linkType"&&ce.name!=="pageLink"&&ce.name!=="href");ne.component.set("traits",[...Ot,...at])}}const Xe=document.getElementById("traits-panel");if(Xe&&(Xe.style.setProperty("display","block","important"),Xe.style.setProperty("visibility","visible","important"),Xe.style.setProperty("opacity","1","important"),ke.TraitManager))try{ke.select(ne.component),setTimeout(()=>{if(typeof ke.TraitManager.render=="function"){const Ve=ke.TraitManager.render();Ve&&Xe&&(Xe.innerHTML="",Ve.nodeType===1?Xe.appendChild(Ve):typeof Ve=="string"&&(Xe.innerHTML=Ve))}setTimeout(()=>{const Ve=ne.component.get?.("linkType");Ve!==void 0&&Xe.querySelectorAll(".gjs-trt-trait").forEach(He=>{const at=He.querySelector("label, .gjs-trt-trait__label");if(at){const Ot=at.textContent||"";Ot.includes("Select Page")?He.style.display=Ve==="page"?"block":"none":Ot.includes("URL")&&!Ot.includes("Select")&&(He.style.display=Ve==="url"?"block":"none")}})},100)},100)}catch(Ve){console.warn("Error rendering traits:",Ve)}structurePanel&&structurePanel.scrollIntoView({behavior:"smooth",block:"nearest"})},300)},150)}))},style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"12px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:ke=>{ke.currentTarget.style.background="rgba(255, 255, 255, 0.1)",ke.currentTarget.style.borderColor="rgba(0, 210, 190, 0.3)",ke.currentTarget.style.transform="translateX(4px)"},onMouseLeave:ke=>{ke.currentTarget.style.background="rgba(255, 255, 255, 0.05)",ke.currentTarget.style.borderColor="rgba(255, 255, 255, 0.1)",ke.currentTarget.style.transform="translateX(0)"},children:[n.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flex:1},children:[n.jsx("span",{style:{fontSize:"12px",padding:"2px 8px",borderRadius:"4px",background:ne.type==="link"?"rgba(0, 210, 190, 0.15)":"rgba(255, 193, 7, 0.15)",color:ne.type==="link"?"#00d2be":"#ffc107",fontWeight:600,flexShrink:0},children:ne.type==="link"?" Link":" Button"}),n.jsx("span",{style:{color:"#fff",fontSize:"13px",fontWeight:500,flex:1},children:ne.text||"Untitled"})]})}),n.jsx("div",{style:{fontSize:"11px",color:"rgba(255, 255, 255, 0.5)",marginTop:"4px",marginBottom:"4px"},children:ne.pageLink?n.jsxs("span",{children:[" Internal: ",n.jsx("strong",{children:dt.find(ke=>ke.id===ne.pageLink)?.name||ne.pageLink})]}):ne.href?n.jsxs("span",{children:[" External: ",n.jsx("strong",{children:ne.href.length>40?ne.href.substring(0,40)+"...":ne.href})]}):n.jsx("span",{style:{fontStyle:"italic",color:"rgba(255, 255, 255, 0.3)"},children:" No link set"})}),n.jsxs("div",{style:{fontSize:"10px",color:"rgba(0, 210, 190, 0.8)",marginTop:"6px",fontWeight:500,display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx("span",{children:""}),n.jsx("span",{children:"Click to select and edit link settings"})]})]},ne.id))]})]})]})}),ht&&n.jsxs("div",{style:{position:"fixed",top:"80px",right:"20px",zIndex:1e5,width:"400px",maxWidth:"calc(100vw - 40px)",maxHeight:"calc(100vh - 100px)",background:"#ffffff",border:"1px solid rgba(0, 0, 0, 0.2)",borderRadius:"16px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.15), 0 0 0 1px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",animation:"slideInRight 0.3s ease-out"},onClick:ne=>ne.stopPropagation(),children:[n.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[n.jsx("h3",{style:{margin:0,color:"#000",fontSize:"16px",fontWeight:600},children:" Notes & Changes"}),n.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[n.jsx("button",{onClick:Fe,title:"Create New Note",style:{background:"rgba(0, 210, 190, 0.15)",border:"1px solid rgba(0, 210, 190, 0.3)",color:"#00d2be",fontSize:"18px",cursor:"pointer",padding:"4px 10px",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"6px",transition:"all 0.2s ease"},onMouseEnter:ne=>{ne.currentTarget.style.background="rgba(0, 210, 190, 0.25)",ne.currentTarget.style.borderColor="#00d2be"},onMouseLeave:ne=>{ne.currentTarget.style.background="rgba(0, 210, 190, 0.15)",ne.currentTarget.style.borderColor="rgba(0, 210, 190, 0.3)"},children:"+"}),n.jsx("button",{onClick:()=>{try{localStorage.setItem(`ziplofy-theme-notes-${he||"new"}`,JSON.stringify(ue))}catch(ne){console.warn("Failed to save notes:",ne)}ee(!1)},style:{background:"transparent",border:"none",color:"#fff",fontSize:"20px",cursor:"pointer",padding:"0",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"6px",transition:"all 0.2s ease"},onMouseEnter:ne=>{ne.currentTarget.style.background="rgba(255, 255, 255, 0.1)"},onMouseLeave:ne=>{ne.currentTarget.style.background="transparent"},children:""})]})]}),n.jsxs("div",{style:{fontSize:"11px",color:"rgba(255, 255, 255, 0.5)"},children:[ue.length," ",ue.length===1?"note":"notes"]})]}),n.jsx("div",{style:{padding:"12px",flex:1,overflowY:"auto",display:"flex",flexDirection:"column",gap:"12px"},children:ue.length===0?n.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"rgba(255, 255, 255, 0.4)",fontSize:"13px"},children:[n.jsx("div",{style:{fontSize:"32px",marginBottom:"12px"},children:""}),n.jsx("div",{children:"No notes yet"}),n.jsx("div",{style:{fontSize:"11px",marginTop:"8px",color:"rgba(255, 255, 255, 0.3)"},children:"Click the + button to create your first note"})]}):ue.map(ne=>n.jsxs("div",{style:{background:J===ne.id?"rgba(0, 210, 190, 0.1)":"rgba(255, 255, 255, 0.05)",border:J===ne.id?"1px solid rgba(0, 210, 190, 0.3)":"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"12px",transition:"all 0.2s ease"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[n.jsxs("div",{style:{fontSize:"10px",color:"rgba(255, 255, 255, 0.4)"},children:[new Date(ne.createdAt).toLocaleDateString()," ",new Date(ne.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),n.jsx("button",{onClick:()=>Qe(ne.id),style:{background:"transparent",border:"none",color:"rgba(220, 38, 38, 0.6)",fontSize:"14px",cursor:"pointer",padding:"2px 6px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:ke=>{ke.currentTarget.style.background="rgba(220, 38, 38, 0.15)",ke.currentTarget.style.color="#ef4444"},onMouseLeave:ke=>{ke.currentTarget.style.background="transparent",ke.currentTarget.style.color="rgba(220, 38, 38, 0.6)"},title:"Delete note",children:""})]}),J===ne.id?n.jsx("textarea",{value:ne.content,onChange:ke=>We(ne.id,ke.target.value),onBlur:()=>{ne.content.trim()===""?Qe(ne.id):I(null)},autoFocus:!0,placeholder:"Write your note here...",style:{width:"100%",minHeight:"100px",maxHeight:"200px",padding:"8px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"#fff",fontSize:"13px",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',lineHeight:"1.5",outline:"none",resize:"vertical"},onKeyDown:ke=>{ke.key==="Escape"&&(ne.content.trim()===""?Qe(ne.id):I(null))}}):n.jsx("div",{onClick:()=>I(ne.id),style:{color:"#fff",fontSize:"13px",lineHeight:"1.6",cursor:"text",whiteSpace:"pre-wrap",wordBreak:"break-word",minHeight:"40px",padding:"8px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:ke=>{ke.currentTarget.style.background="rgba(255, 255, 255, 0.05)"},onMouseLeave:ke=>{ke.currentTarget.style.background="transparent"},children:ne.content||n.jsx("span",{style:{color:"rgba(255, 255, 255, 0.3)",fontStyle:"italic"},children:"Click to edit..."})})]},ne.id))})]}),H&&n.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e5,background:"rgba(0, 0, 0, 0.9)",display:"flex",flexDirection:"column"},children:[n.jsxs("div",{style:{background:"#1a1a1a",padding:"16px 24px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsxs("h2",{style:{margin:0,color:"#fff",fontSize:"18px",fontWeight:600},children:["Theme Preview: ",v||"My Theme"]}),n.jsx("span",{style:{background:"rgba(0, 210, 190, 0.2)",color:"#00d2be",padding:"4px 12px",borderRadius:"4px",fontSize:"12px",fontWeight:600},children:"Live Preview"})]}),n.jsxs("div",{style:{display:"flex",gap:"8px"},children:[n.jsx("button",{onClick:()=>{const ne=document.getElementById("theme-preview-iframe");ne&&ne.contentWindow&&ne.contentWindow.location.reload()},style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"#fff",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:500,transition:"all 0.2s"},onMouseEnter:ne=>{ne.currentTarget.style.background="rgba(255, 255, 255, 0.15)"},onMouseLeave:ne=>{ne.currentTarget.style.background="rgba(255, 255, 255, 0.1)"},children:" Reload"}),n.jsx("button",{onClick:()=>D(!1),style:{background:"rgba(220, 38, 38, 0.2)",border:"1px solid rgba(220, 38, 38, 0.3)",color:"#ff6b6b",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:500,transition:"all 0.2s"},onMouseEnter:ne=>{ne.currentTarget.style.background="rgba(220, 38, 38, 0.3)"},onMouseLeave:ne=>{ne.currentTarget.style.background="rgba(220, 38, 38, 0.2)"},children:" Close"})]})]}),n.jsx("div",{style:{flex:1,position:"relative",overflow:"hidden"},children:n.jsx("iframe",{id:"theme-preview-iframe",srcDoc:X,style:{width:"100%",height:"100%",border:"none",background:"#fff"},title:"Theme Preview",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-presentation",onLoad:ne=>{const ke=ne.currentTarget;ke&&ke.contentDocument&&X&&(ke.contentDocument.open(),ke.contentDocument.write(X),ke.contentDocument.close())}},`preview-${Date.now()}-${X.length}`)})]})]})};function DT(s,r){(r==null||r>s.length)&&(r=s.length);for(var e=0,t=Array(r);e<r;e++)t[e]=s[e];return t}function bte(s){if(Array.isArray(s))return s}function wte(s,r,e){return(r=Ete(r))in s?Object.defineProperty(s,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):s[r]=e,s}function jte(s,r){var e=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(e!=null){var t,a,o,i,l=[],c=!0,d=!1;try{if(o=(e=e.call(s)).next,r!==0)for(;!(c=(t=o.call(e)).done)&&(l.push(t.value),l.length!==r);c=!0);}catch(p){d=!0,a=p}finally{try{if(!c&&e.return!=null&&(i=e.return(),Object(i)!==i))return}finally{if(d)throw a}}return l}}function Cte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LT(s,r){var e=Object.keys(s);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(s);r&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(s,a).enumerable})),e.push.apply(e,t)}return e}function FT(s){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?LT(Object(e),!0).forEach(function(t){wte(s,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(e)):LT(Object(e)).forEach(function(t){Object.defineProperty(s,t,Object.getOwnPropertyDescriptor(e,t))})}return s}function Ste(s,r){if(s==null)return{};var e,t,a=Nte(s,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(s);for(t=0;t<o.length;t++)e=o[t],r.indexOf(e)===-1&&{}.propertyIsEnumerable.call(s,e)&&(a[e]=s[e])}return a}function Nte(s,r){if(s==null)return{};var e={};for(var t in s)if({}.hasOwnProperty.call(s,t)){if(r.indexOf(t)!==-1)continue;e[t]=s[t]}return e}function kte(s,r){return bte(s)||jte(s,r)||Tte(s,r)||Cte()}function _te(s,r){if(typeof s!="object"||!s)return s;var e=s[Symbol.toPrimitive];if(e!==void 0){var t=e.call(s,r);if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(s)}function Ete(s){var r=_te(s,"string");return typeof r=="symbol"?r:r+""}function Tte(s,r){if(s){if(typeof s=="string")return DT(s,r);var e={}.toString.call(s).slice(8,-1);return e==="Object"&&s.constructor&&(e=s.constructor.name),e==="Map"||e==="Set"?Array.from(s):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?DT(s,r):void 0}}function Ote(s,r,e){return r in s?Object.defineProperty(s,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):s[r]=e,s}function BT(s,r){var e=Object.keys(s);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(s);r&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(s,a).enumerable})),e.push.apply(e,t)}return e}function zT(s){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?BT(Object(e),!0).forEach(function(t){Ote(s,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(e)):BT(Object(e)).forEach(function(t){Object.defineProperty(s,t,Object.getOwnPropertyDescriptor(e,t))})}return s}function Pte(){for(var s=arguments.length,r=new Array(s),e=0;e<s;e++)r[e]=arguments[e];return function(t){return r.reduceRight(function(a,o){return o(a)},t)}}function by(s){return function r(){for(var e=this,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return a.length>=s.length?s.apply(this,a):function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];return r.apply(e,[].concat(a,l))}}}function yw(s){return{}.toString.call(s).includes("Object")}function Ate(s){return!Object.keys(s).length}function ex(s){return typeof s=="function"}function Mte(s,r){return Object.prototype.hasOwnProperty.call(s,r)}function Ite(s,r){return yw(r)||Ju("changeType"),Object.keys(r).some(function(e){return!Mte(s,e)})&&Ju("changeField"),r}function Rte(s){ex(s)||Ju("selectorType")}function Dte(s){ex(s)||yw(s)||Ju("handlerType"),yw(s)&&Object.values(s).some(function(r){return!ex(r)})&&Ju("handlersType")}function Lte(s){s||Ju("initialIsRequired"),yw(s)||Ju("initialType"),Ate(s)&&Ju("initialContent")}function Fte(s,r){throw new Error(s[r]||s.default)}var Bte={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Ju=by(Fte)(Bte),mv={changes:Ite,selector:Rte,handler:Dte,initial:Lte};function zte(s){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};mv.initial(s),mv.handler(r);var e={current:s},t=by(Vte)(e,r),a=by(Ute)(e),o=by(mv.changes)(s),i=by($te)(e);function l(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(p){return p};return mv.selector(d),d(e.current)}function c(d){Pte(t,a,o,i)(d)}return[l,c]}function $te(s,r){return ex(r)?r(s.current):r}function Ute(s,r){return s.current=zT(zT({},s.current),r),r}function Vte(s,r,e){return ex(r)?r(s.current):Object.keys(e).forEach(function(t){var a;return(a=r[t])===null||a===void 0?void 0:a.call(r,s.current[t])}),e}var Hte={create:zte},Wte={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function qte(s){return function r(){for(var e=this,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return a.length>=s.length?s.apply(this,a):function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];return r.apply(e,[].concat(a,l))}}}function Gte(s){return{}.toString.call(s).includes("Object")}function Kte(s){return s||$T("configIsRequired"),Gte(s)||$T("configType"),s.urls?(Yte(),{paths:{vs:s.urls.monacoBase}}):s}function Yte(){console.warn(R6.deprecation)}function Zte(s,r){throw new Error(s[r]||s.default)}var R6={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},$T=qte(Zte)(R6),Xte={config:Kte},Qte=function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return function(a){return e.reduceRight(function(o,i){return i(o)},a)}};function D6(s,r){return Object.keys(r).forEach(function(e){r[e]instanceof Object&&s[e]&&Object.assign(r[e],D6(s[e],r[e]))}),FT(FT({},s),r)}var Jte={type:"cancelation",msg:"operation is manually canceled"};function RC(s){var r=!1,e=new Promise(function(t,a){s.then(function(o){return r?a(Jte):t(o)}),s.catch(a)});return e.cancel=function(){return r=!0},e}var ere=["monaco"],tre=Hte.create({config:Wte,isInitialized:!1,resolve:null,reject:null,monaco:null}),L6=kte(tre,2),Ax=L6[0],lj=L6[1];function rre(s){var r=Xte.config(s),e=r.monaco,t=Ste(r,ere);lj(function(a){return{config:D6(a.config,t),monaco:e}})}function nre(){var s=Ax(function(r){var e=r.monaco,t=r.isInitialized,a=r.resolve;return{monaco:e,isInitialized:t,resolve:a}});if(!s.isInitialized){if(lj({isInitialized:!0}),s.monaco)return s.resolve(s.monaco),RC(DC);if(window.monaco&&window.monaco.editor)return F6(window.monaco),s.resolve(window.monaco),RC(DC);Qte(sre,ore)(ire)}return RC(DC)}function sre(s){return document.body.appendChild(s)}function are(s){var r=document.createElement("script");return s&&(r.src=s),r}function ore(s){var r=Ax(function(t){var a=t.config,o=t.reject;return{config:a,reject:o}}),e=are("".concat(r.config.paths.vs,"/loader.js"));return e.onload=function(){return s()},e.onerror=r.reject,e}function ire(){var s=Ax(function(e){var t=e.config,a=e.resolve,o=e.reject;return{config:t,resolve:a,reject:o}}),r=window.require;r.config(s.config),r(["vs/editor/editor.main"],function(e){var t=e.m||e;F6(t),s.resolve(t)},function(e){s.reject(e)})}function F6(s){Ax().monaco||lj({monaco:s})}function lre(){return Ax(function(s){var r=s.monaco;return r})}var DC=new Promise(function(s,r){return lj({resolve:s,reject:r})}),B6={config:rre,init:nre,__getMonacoInstance:lre},cre={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},LC=cre,dre={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},ure=dre;function fre({children:s}){return pt.createElement("div",{style:ure.container},s)}var pre=fre,hre=pre;function mre({width:s,height:r,isEditorReady:e,loading:t,_ref:a,className:o,wrapperProps:i}){return pt.createElement("section",{style:{...LC.wrapper,width:s,height:r},...i},!e&&pt.createElement(hre,null,t),pt.createElement("div",{ref:a,style:{...LC.fullWidth,...!e&&LC.hide},className:o}))}var gre=mre,z6=u.memo(gre);function yre(s){u.useEffect(s,[])}var $6=yre;function xre(s,r,e=!0){let t=u.useRef(!0);u.useEffect(t.current||!e?()=>{t.current=!1}:s,r)}var Xi=xre;function zy(){}function sm(s,r,e,t){return vre(s,t)||bre(s,r,e,t)}function vre(s,r){return s.editor.getModel(U6(s,r))}function bre(s,r,e,t){return s.editor.createModel(r,e,t?U6(s,t):void 0)}function U6(s,r){return s.Uri.parse(r)}function wre({original:s,modified:r,language:e,originalLanguage:t,modifiedLanguage:a,originalModelPath:o,modifiedModelPath:i,keepCurrentOriginalModel:l=!1,keepCurrentModifiedModel:c=!1,theme:d="light",loading:p="Loading...",options:h={},height:g="100%",width:y="100%",className:b,wrapperProps:v={},beforeMount:w=zy,onMount:C=zy}){let[k,N]=u.useState(!1),[O,R]=u.useState(!0),L=u.useRef(null),B=u.useRef(null),G=u.useRef(null),$=u.useRef(C),z=u.useRef(w),Y=u.useRef(!1);$6(()=>{let H=B6.init();return H.then(D=>(B.current=D)&&R(!1)).catch(D=>D?.type!=="cancelation"&&console.error("Monaco initialization: error:",D)),()=>L.current?P():H.cancel()}),Xi(()=>{if(L.current&&B.current){let H=L.current.getOriginalEditor(),D=sm(B.current,s||"",t||e||"text",o||"");D!==H.getModel()&&H.setModel(D)}},[o],k),Xi(()=>{if(L.current&&B.current){let H=L.current.getModifiedEditor(),D=sm(B.current,r||"",a||e||"text",i||"");D!==H.getModel()&&H.setModel(D)}},[i],k),Xi(()=>{let H=L.current.getModifiedEditor();H.getOption(B.current.editor.EditorOption.readOnly)?H.setValue(r||""):r!==H.getValue()&&(H.executeEdits("",[{range:H.getModel().getFullModelRange(),text:r||"",forceMoveMarkers:!0}]),H.pushUndoStop())},[r],k),Xi(()=>{L.current?.getModel()?.original.setValue(s||"")},[s],k),Xi(()=>{let{original:H,modified:D}=L.current.getModel();B.current.editor.setModelLanguage(H,t||e||"text"),B.current.editor.setModelLanguage(D,a||e||"text")},[e,t,a],k),Xi(()=>{B.current?.editor.setTheme(d)},[d],k),Xi(()=>{L.current?.updateOptions(h)},[h],k);let M=u.useCallback(()=>{if(!B.current)return;z.current(B.current);let H=sm(B.current,s||"",t||e||"text",o||""),D=sm(B.current,r||"",a||e||"text",i||"");L.current?.setModel({original:H,modified:D})},[e,r,a,s,t,o,i]),q=u.useCallback(()=>{!Y.current&&G.current&&(L.current=B.current.editor.createDiffEditor(G.current,{automaticLayout:!0,...h}),M(),B.current?.editor.setTheme(d),N(!0),Y.current=!0)},[h,d,M]);u.useEffect(()=>{k&&$.current(L.current,B.current)},[k]),u.useEffect(()=>{!O&&!k&&q()},[O,k,q]);function P(){let H=L.current?.getModel();l||H?.original?.dispose(),c||H?.modified?.dispose(),L.current?.dispose()}return pt.createElement(z6,{width:y,height:g,isEditorReady:k,loading:p,_ref:G,className:b,wrapperProps:v})}var jre=wre;u.memo(jre);function Cre(s){let r=u.useRef();return u.useEffect(()=>{r.current=s},[s]),r.current}var Sre=Cre,gv=new Map;function Nre({defaultValue:s,defaultLanguage:r,defaultPath:e,value:t,language:a,path:o,theme:i="light",line:l,loading:c="Loading...",options:d={},overrideServices:p={},saveViewState:h=!0,keepCurrentModel:g=!1,width:y="100%",height:b="100%",className:v,wrapperProps:w={},beforeMount:C=zy,onMount:k=zy,onChange:N,onValidate:O=zy}){let[R,L]=u.useState(!1),[B,G]=u.useState(!0),$=u.useRef(null),z=u.useRef(null),Y=u.useRef(null),M=u.useRef(k),q=u.useRef(C),P=u.useRef(),H=u.useRef(t),D=Sre(o),X=u.useRef(!1),se=u.useRef(!1);$6(()=>{let K=B6.init();return K.then(Z=>($.current=Z)&&G(!1)).catch(Z=>Z?.type!=="cancelation"&&console.error("Monaco initialization: error:",Z)),()=>z.current?xe():K.cancel()}),Xi(()=>{let K=sm($.current,s||t||"",r||a||"",o||e||"");K!==z.current?.getModel()&&(h&&gv.set(D,z.current?.saveViewState()),z.current?.setModel(K),h&&z.current?.restoreViewState(gv.get(o)))},[o],R),Xi(()=>{z.current?.updateOptions(d)},[d],R),Xi(()=>{!z.current||t===void 0||(z.current.getOption($.current.editor.EditorOption.readOnly)?z.current.setValue(t):t!==z.current.getValue()&&(se.current=!0,z.current.executeEdits("",[{range:z.current.getModel().getFullModelRange(),text:t,forceMoveMarkers:!0}]),z.current.pushUndoStop(),se.current=!1))},[t],R),Xi(()=>{let K=z.current?.getModel();K&&a&&$.current?.editor.setModelLanguage(K,a)},[a],R),Xi(()=>{l!==void 0&&z.current?.revealLine(l)},[l],R),Xi(()=>{$.current?.editor.setTheme(i)},[i],R);let Q=u.useCallback(()=>{if(!(!Y.current||!$.current)&&!X.current){q.current($.current);let K=o||e,Z=sm($.current,t||s||"",r||a||"",K||"");z.current=$.current?.editor.create(Y.current,{model:Z,automaticLayout:!0,...d},p),h&&z.current.restoreViewState(gv.get(K)),$.current.editor.setTheme(i),l!==void 0&&z.current.revealLine(l),L(!0),X.current=!0}},[s,r,e,t,a,o,d,p,h,i,l]);u.useEffect(()=>{R&&M.current(z.current,$.current)},[R]),u.useEffect(()=>{!B&&!R&&Q()},[B,R,Q]),H.current=t,u.useEffect(()=>{R&&N&&(P.current?.dispose(),P.current=z.current?.onDidChangeModelContent(K=>{se.current||N(z.current.getValue(),K)}))},[R,N]),u.useEffect(()=>{if(R){let K=$.current.editor.onDidChangeMarkers(Z=>{let ve=z.current.getModel()?.uri;if(ve&&Z.find(ae=>ae.path===ve.path)){let ae=$.current.editor.getModelMarkers({resource:ve});O?.(ae)}});return()=>{K?.dispose()}}return()=>{}},[R,O]);function xe(){P.current?.dispose(),g?h&&gv.set(o,z.current.saveViewState()):z.current.getModel()?.dispose(),z.current.dispose()}return pt.createElement(z6,{width:y,height:b,isEditorReady:R,loading:c,_ref:Y,className:v,wrapperProps:w})}var kre=Nre,_re=u.memo(kre),Ere=_re;const UT=["index.html","assets/css/style.css","assets/js/script.js"],V6=({fullScreen:s=!1})=>{const{themeId:r=""}=ks(),{activeStoreId:e}=Ur(),[t,a]=u.useState("index.html"),[o,i]=u.useState({}),[l,c]=u.useState(UT),[d,p]=u.useState(""),h=dr(),[g,y]=u.useState(!0),[b,v]=u.useState(null),[w,C]=u.useState(null),[k,N]=u.useState(new Set),[O,R]=u.useState(null),L=u.useRef(null),B=u.useRef(null),G=u.useRef(null),[$,z]=u.useState(280),[Y,M]=u.useState(420),[q,P]=u.useState(!1),[H,D]=u.useState(!1),[X,se]=u.useState(null),Q=X==="explorer",xe=X==="editor",K=X==="preview",Z=u.useMemo(()=>"https://backend.ziplofy.com/api",[]),ve=u.useMemo(()=>`${Z}/themes/preview/${r}`,[Z,r]),[ae,Se]=u.useState(!1),[Pe,$e]=u.useState(null),[we,Ae]=u.useState(null),ze=u.useCallback(()=>typeof window>"u"?"":localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken")||localStorage.getItem("token")||sessionStorage.getItem("token")||localStorage.getItem("authToken")||sessionStorage.getItem("authToken")||"",[]),Ge=u.useCallback(()=>{const he=ze();return he?{Authorization:`Bearer ${he}`}:{}},[ze]),Ue=u.useMemo(()=>!!ze(),[ze]),ht=u.useCallback(()=>{const he=ze();if(!he)return"";try{const ie=he.split(".");if(ie.length<2)return"";const Fe=JSON.parse(atob(ie[1].replace(/-/g,"+").replace(/_/g,"/")));return String(Fe.uid||Fe.userId||Fe.id||"")}catch{return""}},[ze]),ee=u.useMemo(()=>{if(e)return`${Z}/themes/installed/${e}/${r}/unzippedTheme/`;const he=ht();return he?`${Z}/themes/installed/${he}/${r}/unzippedTheme/`:""},[Z,r,e,ht]),ue=u.useCallback(async()=>{if(!r||!t){Ae("No file selected to save.");return}if(!Ue){Ae("Login required to save.");return}if(!e){Ae("Please select a store before saving.");return}const he=o[t]??"";!he&&he!==""&&console.warn("Warning: Saving empty content"),Se(!0),Ae(null);try{const ie={"Content-Type":"application/json",...Ge()},Fe={path:t,content:he,storeId:e};console.log(" Saving file:",{themeId:r,path:t,storeId:e,contentLength:he.length});const We=await fetch(`${Z}/themes/${r}/save-edit`,{method:"POST",headers:ie,credentials:"include",body:JSON.stringify(Fe)});if(!We.ok){const Ee=await We.text().catch(()=>"")||`Save failed with status ${We.status}`;throw console.error(" Save failed:",Ee),new Error(Ee)}const Qe=await We.json().catch(()=>({}));if(Qe.success!==!1)console.log(" File saved successfully:",{themeId:r,path:t,storeId:e}),$e(new Date),Ae(null);else throw new Error(Qe.error||Qe.message||"Save failed")}catch(ie){const Fe=ie?.message||"Failed to save file";console.error(" Save error:",Fe),Ae(Fe)}finally{Se(!1)}},[Z,r,t,o,Ge,Ue,e]);u.useEffect(()=>{let he=!1;async function ie(){try{y(!0),v(null),console.log(` Store changed, clearing file cache. New storeId: ${e||"none"}`),i({});try{const Ee=e?`?storeId=${encodeURIComponent(e)}`:"",le=await fetch(`${Z}/themes/files/${r}${Ee}`,{credentials:"include",headers:Ge()});if(le.ok){const Ye=await le.json();Ye?.files?.length&&c(Ye.files)}}catch{}try{const Ee=await fetch(`${Z}/themes/${r}`,{credentials:"include",headers:Ge()});if(Ee.ok){const le=await Ee.json(),Ye=le?.data?.name||le?.name||"Theme";he||p(Ye)}}catch{}const Fe=e?`&storeId=${encodeURIComponent(e)}`:"";console.log(` Loading files for storeId: ${e||"none (user-specific)"}`);const[We,Qe,de]=await Promise.all([fetch(`${Z}/themes/file/${r}?path=${encodeURIComponent("index.html")}${Fe}`,{credentials:"include",headers:Ge()}).then(Ee=>Ee.ok?Ee.text():""),fetch(`${Z}/themes/file/${r}?path=${encodeURIComponent("assets/css/style.css")}${Fe}`,{credentials:"include",headers:Ge()}).then(Ee=>Ee.ok?Ee.text():""),fetch(`${Z}/themes/file/${r}?path=${encodeURIComponent("assets/js/script.js")}${Fe}`,{credentials:"include",headers:Ge()}).then(Ee=>Ee.ok?Ee.text():"")]);if(he)return;i(Ee=>({...Ee,"index.html":We,"assets/css/style.css":Qe,"assets/js/script.js":de})),a("index.html")}catch(Fe){v(Fe?.message||"Failed to load theme files")}finally{y(!1)}}return ie(),()=>{he=!0}},[ve,e,Z,r,Ge]),u.useEffect(()=>{async function he(ie){if(o[ie]===void 0)try{C(ie);const Fe=e?`&storeId=${encodeURIComponent(e)}`:"",We=await fetch(`${Z}/themes/file/${r}?path=${encodeURIComponent(ie)}${Fe}`,{credentials:"include",headers:Ge()});if(We.ok){const Qe=await We.text();i(de=>({...de,[ie]:Qe}))}}catch{}finally{C(Fe=>Fe===ie?null:Fe)}}t&&!UT.includes(t)&&he(t)},[t,Z,r,o,e,Ge]);const Oe=u.useCallback(()=>{const he=o["index.html"]||"",ie=o["assets/js/script.js"]||"";let Fe=he.replace(/<base[^>]*>/gi,"").replace(/<script[\s\S]*?<\/script>/gi,"");const We=Fe.includes("</head>")?Fe:Fe.replace(/<html[^>]*>/i,"$&<head></head>"),Qe=ee||`${ve}/`;return We.replace(/<head>/i,`<head><base href="${Qe}">`).replace(/<\/body>/i,`${ie?`<script type="module" src="${Qe}assets/js/script.js"><\/script>`:""}</body>`)},[o,ve,ee]);u.useEffect(()=>{if(!L.current)return;const he=L.current.contentDocument;he&&(he.open(),he.write(Oe()),he.close())},[o,Oe]),u.useEffect(()=>{const he=ie=>{if((navigator.platform.toUpperCase().indexOf("MAC")>=0?ie.metaKey:ie.ctrlKey)&&(ie.key==="f"||ie.key==="F")){ie.preventDefault();try{B.current?.focus?.(),B.current?.trigger?.("keyboard","actions.find",null)}catch{}}};return window.addEventListener("keydown",he,{capture:!0}),()=>window.removeEventListener("keydown",he,{capture:!0})},[]),u.useEffect(()=>{const he=Fe=>{if(!G.current)return;const We=G.current.getBoundingClientRect(),Qe=180,de=280,Ee=300,le=We.width;if(q){const Ye=Fe.clientX-We.left,De=Math.max(Qe,Math.min(Ye,le-Y-Ee));z(De)}else if(H){const Ye=We.right-Fe.clientX,De=Math.max(de,Math.min(Ye,le-$-Ee));M(De)}},ie=()=>{P(!1),D(!1)};return window.addEventListener("mousemove",he),window.addEventListener("mouseup",ie),()=>{window.removeEventListener("mousemove",he),window.removeEventListener("mouseup",ie)}},[q,H,$,Y]);const J=he=>{typeof he=="string"&&i(ie=>({...ie,[t]:he}))},I=u.useMemo(()=>{const he=t.toLowerCase();return he.endsWith(".html")||he.endsWith(".htm")?"html":he.endsWith(".css")?"css":he.endsWith(".js")||he.endsWith(".mjs")||he.endsWith(".cjs")?"javascript":he.endsWith(".json")?"json":he.endsWith(".ts")||he.endsWith(".tsx")?"typescript":he.endsWith(".jsx")?"javascript":he.endsWith(".md")?"markdown":"plaintext"},[t]),V=u.useMemo(()=>{const he=t.toLowerCase();return/\.(html?|css|js|mjs|cjs|json|ts|tsx|jsx|md|txt|svg|xml|yml|yaml|env|ini|cfg|conf)$/i.test(he)},[t]),re=u.useMemo(()=>{const he={};return l.forEach(ie=>{const Fe=ie.split("/");let We=he;for(let Qe=0;Qe<Fe.length;Qe++){const de=Fe[Qe],Ee=Qe===Fe.length-1;We[de]||(We[de]=Ee?{type:"file",path:ie}:{type:"folder",children:{}}),Ee||(We=We[de].children)}}),he},[l]),pe=he=>{N(ie=>{const Fe=new Set(ie);return Fe.has(he)?Fe.delete(he):Fe.add(he),Fe})},ge=(he,ie="",Fe=0)=>{const We=[];return Object.entries(he).forEach(([Qe,de])=>{if(Qe==="files")return;const Ee=ie?`${ie}/${Qe}`:Qe,le=k.has(Ee);if(de.type==="folder")We.push(n.jsxs("div",{children:[n.jsxs("div",{onClick:()=>pe(Ee),onMouseEnter:()=>R(Ee),onMouseLeave:()=>R(null),style:{display:"flex",alignItems:"center",padding:"4px 8px",paddingLeft:`${8+Fe*16}px`,cursor:"pointer",fontSize:"13px",color:"#8B949E",backgroundColor:O===Ee?"#21262D":"transparent",borderRadius:"3px",margin:"1px 0"},children:[n.jsx("span",{style:{marginRight:"6px",fontSize:"12px"},children:le?"":""}),Qe]}),le&&n.jsx("div",{children:ge(de.children,Ee,Fe+1)})]},Ee));else{const Ye=t===de.path,De=w===de.path,ct=O===de.path;We.push(n.jsxs("div",{onClick:()=>a(de.path),onMouseEnter:()=>R(de.path),onMouseLeave:()=>R(null),style:{display:"flex",alignItems:"center",padding:"4px 8px",paddingLeft:`${8+Fe*16}px`,cursor:"pointer",fontSize:"13px",color:Ye?"#FFFFFF":"#8B949E",backgroundColor:Ye?"#0969DA":ct?"#21262D":"transparent",borderRadius:"3px",margin:"1px 0"},children:[n.jsx("span",{style:{marginRight:"6px",fontSize:"12px"},children:Ce(Qe)}),Qe,De&&n.jsx("span",{style:{marginLeft:"6px",fontSize:"11px",color:"#6b7280"},children:"(loading)"})]},de.path))}}),We},Ce=he=>{switch(he.split(".").pop()?.toLowerCase()){case"html":case"htm":return"";case"css":return"";case"js":case"mjs":case"cjs":return"";case"ts":case"tsx":return"";case"jsx":return"";case"json":return"";case"md":return"";case"png":case"jpg":case"jpeg":case"gif":case"svg":return"";case"txt":return"";default:return""}};return n.jsxs("div",{style:{display:"flex",flexDirection:"column",height:s?"100vh":"calc(100vh - 60px)",gap:8},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8,padding:"6px 8px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("button",{onClick:()=>{h("/themes/all-themes")},style:{border:"1px solid #d1d5da",background:"#fff",color:"#111827",padding:"6px 10px",borderRadius:6,cursor:"pointer"},children:" Back"}),n.jsx("div",{style:{fontWeight:700,fontSize:16},children:d?`Editing Code: ${d}`:"Editing Code"})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[we&&n.jsx("span",{style:{color:"#dc2626",fontSize:12},children:we}),ae&&n.jsx("span",{style:{color:"#6b7280",fontSize:12},children:" Saving"}),!ae&&Pe&&n.jsxs("span",{style:{color:"#6b7280",fontSize:12},children:[" Saved ",Pe.toLocaleTimeString()]}),n.jsx("button",{onClick:ue,disabled:ae,style:{border:"1px solid #10b981",background:"#10b981",color:"#ffffff",padding:"6px 12px",borderRadius:6,cursor:ae?"not-allowed":"pointer",fontWeight:700},children:"Save"})]})]}),n.jsxs("div",{ref:G,style:{display:"flex",gap:0,flex:1,minHeight:0,position:"relative",overflow:"hidden"},children:[n.jsxs("div",{style:{flex:Q?"1 1 auto":`0 0 ${xe||K?0:$}px`,minWidth:0,borderRight:"1px solid #30363D",backgroundColor:"#161B22",color:"#F0F6FC",display:"flex",flexDirection:"column",transition:"flex-basis 120ms ease",overflow:"hidden"},children:[n.jsx("div",{style:{padding:"12px 16px",borderBottom:"1px solid #30363D",fontWeight:600,fontSize:"13px",color:"#F0F6FC"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[n.jsx("span",{children:"EXPLORER"}),n.jsx("div",{style:{display:"flex",gap:6},children:n.jsx("button",{onClick:()=>se(X==="explorer"?null:"explorer"),title:X==="explorer"?"Restore layout":"Expand Explorer",style:{border:"1px solid #30363D",background:"#0D1117",color:"#E6EDF3",padding:"2px 6px",borderRadius:4,cursor:"pointer",fontSize:12},children:X==="explorer"?"Restore":"Expand"})})]})}),n.jsx("div",{style:{flex:1,overflow:"auto",padding:"8px 0"},children:ge(re)})]}),X===null&&n.jsx("div",{onMouseDown:()=>P(!0),style:{width:8,cursor:"col-resize",background:"#0d1117",borderRight:"1px solid #30363D",borderLeft:"1px solid #0b0f14"}}),n.jsxs("div",{style:{flex:xe?"1 1 auto":X?"0 0 0px":"1 1 auto",minWidth:0,display:"flex",flexDirection:"column",transition:"flex-basis 120ms ease",overflow:X&&!xe?"hidden":"initial"},children:[n.jsx("div",{style:{padding:"6px 8px",borderBottom:"1px solid #e5e7eb",fontWeight:600},children:t}),n.jsxs("div",{style:{flex:1,minHeight:300},children:[!g&&V&&n.jsx(Ere,{height:"100%",language:I,theme:"vs-dark",value:o[t]??(w===t?"":o[t]??""),onChange:J,onMount:he=>{B.current=he},options:{fontSize:14,minimap:{enabled:!1}}}),!g&&!V&&n.jsx("div",{style:{padding:12,color:"#6b7280"},children:"Preview not available for this file type. Select a text file to edit."}),g&&n.jsx("div",{style:{padding:12},children:"Loading files"}),b&&n.jsx("div",{style:{padding:12,color:"#dc2626"},children:b})]}),n.jsx("div",{style:{padding:"6px 8px",borderTop:"1px solid #e5e7eb",display:"flex",justifyContent:"flex-end"},children:n.jsx("button",{onClick:()=>se(X==="editor"?null:"editor"),title:X==="editor"?"Restore layout":"Expand Editor",style:{border:"1px solid #d1d5da",background:"#fff",color:"#111827",padding:"4px 8px",borderRadius:6,cursor:"pointer",fontWeight:600},children:X==="editor"?"Restore":"Expand"})})]}),X===null&&n.jsx("div",{onMouseDown:()=>D(!0),style:{width:6,cursor:"col-resize",background:"transparent"}}),n.jsxs("div",{style:{flex:K?"1 1 auto":`0 0 ${Q||xe?0:Y}px`,minWidth:0,borderLeft:"1px solid #e5e7eb",display:"flex",flexDirection:"column",transition:"flex-basis 120ms ease",overflow:"hidden"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8,padding:"6px 8px",borderBottom:"1px solid #e5e7eb"},children:[n.jsx("div",{style:{fontWeight:600},children:"Preview"}),!s&&n.jsx("button",{onClick:()=>window.open(`/themes/code-fullscreen/${r}`,"_blank","noopener,noreferrer"),style:{border:"1px solid #d1d5da",background:"#fff",color:"#111827",padding:"6px 10px",borderRadius:6,cursor:"pointer",fontWeight:600},children:"Edit in new tab"}),n.jsx("button",{onClick:()=>{P(!1),D(!1),se(he=>he==="preview"?null:"preview")},title:X==="preview"?"Restore layout":"Expand Preview",style:{border:"1px solid #d1d5da",background:"#fff",color:"#111827",padding:"6px 10px",borderRadius:6,cursor:"pointer",fontWeight:600},children:X==="preview"?"Restore":"Expand"})]}),n.jsx("iframe",{ref:L,style:{flex:1,border:0,background:"#fff"},title:"Theme Preview"})]})]})]})},Tre=()=>n.jsx(V6,{fullScreen:!0}),VT=()=>{const{themeId:s=""}=ks(),r=u.useRef(null),e=dr(),{activeStoreId:t}=Ur(),[a,o]=u.useState(!0),[i,l]=u.useState(null),[c,d]=u.useState("");return u.useEffect(()=>{let p,h=!1;async function g(){try{o(!0),l(null);const y=(await up(async()=>{const{default:G}=await Promise.resolve().then(()=>M6);return{default:G}},void 0)).default;await up(()=>Promise.resolve().then(()=>I6),void 0);const b="https://backend.ziplofy.com/api",v=`?v=${Date.now()}`,C=(()=>{try{const G=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken")||localStorage.getItem("token")||sessionStorage.getItem("token");if(!G)return null;const $=G.split(".");if($.length<2)return null;const z=JSON.parse(atob($[1].replace(/-/g,"+").replace(/_/g,"/")));return String(z.uid||z.userId||z.id||"")}catch{return null}})();try{const G=await fetch(`${b}/themes/${s}`,{credentials:"include"});if(G.ok){const $=await G.json(),z=$?.data?.name||$?.name||"Theme";d(z)}}catch{}const k=t?`${b}/themes/installed/${t}/${s}/unzippedTheme`:C?`${b}/themes/installed/${C}/${s}/unzippedTheme`:null;let N=`${b}/themes/preview/${s}`,O=`${b}/themes/preview/${s}/assets/css/style.css`;k&&(await fetch(`${k}/index.html${v}`,{credentials:"include"})).ok&&(N=`${k}/index.html${v}`,O=`${k}/assets/css/style.css${v}`);const R=await fetch(N,{credentials:"include"});if(!R.ok)throw new Error("Failed to load theme HTML for editor");const L=await R.text();if(h)return;p=y.init({container:r.current,fromElement:!1,height:"calc(100vh - 100px)",storageManager:{autoload:!1},canvas:{styles:[O]},selectorManager:{componentFirst:!0}}),p.setComponents(L),p.Panels.addButton("options",{id:"preview-page",className:"fa fa-eye",attributes:{title:"Preview"},command:"preview"}),o(!1)}catch(y){l(y?.message||"Failed to initialize editor"),o(!1)}}return g(),()=>{h=!0}},[s]),n.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"8px 0"},children:[n.jsx("button",{onClick:()=>{typeof window<"u"&&window.history.length>1?e(-1):e("/themes/all-themes")},style:{border:"1px solid #d1d5da",background:"#fff",color:"#111827",padding:"6px 10px",borderRadius:6,cursor:"pointer"},children:" Back"}),n.jsx("div",{style:{fontWeight:700,fontSize:16},children:c?`Editing: ${c}`:"Editing Theme"})]}),a&&n.jsx("div",{children:"Loading editor..."}),i&&n.jsx("div",{style:{color:"red"},children:i}),n.jsx("div",{ref:r,style:{flex:1,minHeight:600,border:"1px solid #e5e7eb",borderRadius:6}})]})},H6=u.createContext(void 0),Ore=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async()=>{try{a(!0),i(null);const h=await nt.get("/categories/base"),{success:g,data:y}=h.data;g?e(y):i("Failed to fetch base categories")}catch(h){i(h?.response?.data?.message||"Failed to fetch base categories")}finally{a(!1)}},[]),c=u.useCallback(async h=>{try{a(!0),i(null);const g=await nt.get(`/categories/parent/${h}`),{success:y,data:b}=g.data;y?e(b):i("Failed to fetch categories by parent")}catch(g){i(g?.response?.data?.message||"Failed to fetch categories by parent")}finally{a(!1)}},[]),d=u.useCallback(()=>{e([]),i(null),a(!1)},[]),p={categories:r,loading:t,error:o,fetchBaseCategories:l,fetchCategoriesByParentId:c,clearCategories:d};return n.jsx(H6.Provider,{value:p,children:s})},W6=()=>{const s=u.useContext(H6);if(!s)throw new Error("useCategories must be used within a CategoryProvider");return s},q6=u.createContext(void 0),Pre=({children:s})=>{const[r,e]=u.useState({}),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async(b,v,w=!1)=>{const C=`${b}:${v}`;if(!w&&r[C])return r[C];try{a(!0),i(null);const k=await nt.get("/notification-overrides/exists",{params:{storeId:b,optionId:v}}),{success:N,data:O,message:R}=k.data;if(!N)throw new Error(R||"Failed to check override existence");const L={exists:!!O?.exists,override:O?.override??null};return e(B=>({...B,[C]:L})),L}catch(k){const N=k?.response?.data?.message||k?.message||"Failed to check override existence";throw i(N),new Error(N)}finally{a(!1)}},[r]),c=u.useCallback((b,v)=>{const w=`${b}:${v}`;e(C=>{const k={...C};return delete k[w],k})},[]),d=u.useCallback(()=>{e({}),i(null)},[]),p=u.useCallback(async b=>{try{a(!0),i(null);const v=await nt.post("/notification-overrides",b),{success:w,data:C,message:k}=v.data;if(!w)throw new Error(k||"Failed to create notification override");const N=`${b.storeId}:${b.notificationOptionId}`;return e(O=>({...O,[N]:{exists:!0,override:{_id:C._id,storeId:C.storeId,notificationOptionId:C.notificationOptionId,notificationKey:C.notificationKey,emailSubject:C.emailSubject,emailBody:C.emailBody,smsData:C.smsData,enabled:C.enabled,createdAt:C.createdAt,updatedAt:C.updatedAt}}})),C}catch(v){const w=v?.response?.data?.message||v?.message||"Failed to create notification override";throw i(w),new Error(w)}finally{a(!1)}},[]),h=u.useCallback(async b=>{try{a(!0),i(null);const v=await nt.delete(`/notification-overrides/${b}`),{success:w,data:C,message:k}=v.data;if(!w)throw new Error(k||"Failed to delete notification override");const N=`${C.storeId}:${C.notificationOptionId}`;return e(O=>({...O,[N]:{exists:!1,override:null}})),C}catch(v){const w=v?.response?.data?.message||v?.message||"Failed to delete notification override";throw i(w),new Error(w)}finally{a(!1)}},[]),g=u.useCallback(()=>{i(null)},[]),y=u.useMemo(()=>({cache:r,loading:t,error:o,checkExists:l,create:p,remove:h,clear:d,clearError:g,clearCacheEntry:c}),[r,t,o,l,p,h,d,g,c]);return n.jsx(q6.Provider,{value:y,children:s})},Are=()=>{const s=u.useContext(q6);if(!s)throw new Error("useNotificationOverrides must be used within a NotificationOverridesProvider");return s},G6=u.createContext(void 0),Mre=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async()=>{try{a(!0),i(null);const h=await nt.get("/permissions"),{success:g,data:y,message:b}=h.data;if(!g)throw new Error(b||"Failed to fetch permissions");const v=Array.isArray(y)?y:[];return e(v),v}catch(h){const g=h?.response?.data?.message||h?.message||"Failed to fetch permissions";throw i(g),new Error(g)}finally{a(!1)}},[]),c=u.useCallback(()=>{e([]),i(null)},[]),d=u.useCallback(()=>{i(null)},[]),p=u.useMemo(()=>({permissions:r,loading:t,error:o,fetchAll:l,clear:c,clearError:d}),[r,t,o,l,c,d]);return n.jsx(G6.Provider,{value:p,children:s})},K6=()=>{const s=u.useContext(G6);if(!s)throw new Error("usePermissions must be used within a PermissionsProvider");return s},Y6=u.createContext(void 0);function Ire({children:s}){const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async g=>{a(!0),i(null);try{const{data:y}=await nt.post("/purchase-orders",g),b=y.data.purchaseOrder;return e(v=>[b,...v]),b}catch(y){const b=y?.response?.data?.message||"Failed to create purchase order";throw i(b),y}finally{a(!1)}},[]),c=u.useCallback(async g=>{a(!0),i(null);try{const{data:y}=await nt.get(`/purchase-orders/store/${g}`);e(y.data.purchaseOrders)}catch(y){const b=y?.response?.data?.message||"Failed to fetch purchase orders";throw i(b),y}finally{a(!1)}},[]),d=u.useCallback(async g=>{a(!0),i(null);try{await nt.patch(`/purchase-orders/${g}/mark-ordered`);let y=null;return e(b=>b.map(v=>v._id===g?(y={...v,status:"ordered"},y):v)),y||(y={_id:g,status:"ordered"}),y}catch(y){const b=y?.response?.data?.message||"Failed to mark as ordered";throw i(b),y}finally{a(!1)}},[]),p=u.useCallback(async(g,y)=>{a(!0),i(null);try{const{data:b}=await nt.post(`/purchase-orders/${g}/receive`,{entries:y}),v=b.data.status;return e(w=>w.map(C=>C._id===g?{...C,status:v}:C)),v}catch(b){const v=b?.response?.data?.message||"Failed to receive inventory";throw i(v),b}finally{a(!1)}},[]),h=u.useMemo(()=>({purchaseOrders:r,loading:t,error:o,createPurchaseOrder:l,fetchPurchaseOrdersByStore:c,markAsOrdered:d,receiveInventory:p}),[r,t,o,l,c,d,p]);return n.jsx(Y6.Provider,{value:h,children:s})}function cj(){const s=u.useContext(Y6);if(!s)throw new Error("usePurchaseOrders must be used within a PurchaseOrderProvider");return s}const Z6=u.createContext(void 0),Rre=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async b=>{try{a(!0),i(null);const v=await nt.get("/store-roles",{params:{storeId:b}}),{success:w,data:C,message:k}=v.data;if(!w)throw new Error(k||"Failed to fetch roles");const N=Array.isArray(C)?C:[];return e(N),N}catch(v){const w=v?.response?.data?.message||v?.message||"Failed to fetch roles";throw i(w),new Error(w)}finally{a(!1)}},[]),c=u.useCallback(async b=>{try{a(!0),i(null);const v=await nt.post("/store-roles",b),{success:w,data:C,message:k}=v.data;if(!w)throw new Error(k||"Failed to create role");return e(N=>[C,...N]),C}catch(v){const w=v?.response?.data?.message||v?.message||"Failed to create role";throw i(w),new Error(w)}finally{a(!1)}},[]),d=u.useCallback(async(b,v)=>{try{a(!0),i(null);const w=await nt.patch(`/store-roles/${b}`,v),{success:C,data:k,message:N}=w.data;if(!C)throw new Error(N||"Failed to update role");return e(O=>O.map(R=>R._id===b?k:R)),k}catch(w){const C=w?.response?.data?.message||w?.message||"Failed to update role";throw i(C),new Error(C)}finally{a(!1)}},[]),p=u.useCallback(async b=>{try{a(!0),i(null);const v=await nt.delete(`/store-roles/${b}`),{success:w,data:C,message:k}=v.data;if(!w)throw new Error(k||"Failed to delete role");return e(N=>N.filter(O=>O._id!==b)),C}catch(v){const w=v?.response?.data?.message||v?.message||"Failed to delete role";throw i(w),new Error(w)}finally{a(!1)}},[]),h=u.useCallback(()=>{e([]),i(null)},[]),g=u.useCallback(()=>{i(null)},[]),y=u.useMemo(()=>({roles:r,loading:t,error:o,fetchByStoreId:l,create:c,update:d,remove:p,clear:h,clearError:g}),[r,t,o,l,c,d,p,h,g]);return n.jsx(Z6.Provider,{value:y,children:s})},J2=()=>{const s=u.useContext(Z6);if(!s)throw new Error("useStoreRoles must be used within a StoreRolesProvider");return s},X6=u.createContext(void 0),Dre=({children:s})=>{const[r,e]=u.useState(null),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async y=>{try{a(!0),i(null);const b=await nt.get(`/store-security-settings/${y}`),{success:v,data:w,message:C}=b.data;if(!v)throw new Error(C||"Failed to fetch security settings");return e(w),w}catch(b){const v=b?.response?.data?.message||b?.message||"Failed to fetch security settings";throw i(v),new Error(v)}finally{a(!1)}},[]),c=u.useCallback(async(y,b)=>{try{a(!0),i(null);const v=await nt.patch(`/store-security-settings/${y}`,b),{success:w,data:C,message:k}=v.data;if(!w)throw new Error(k||"Failed to update security settings");return e(C),C}catch(v){const w=v?.response?.data?.message||v?.message||"Failed to update security settings";throw i(w),new Error(w)}finally{a(!1)}},[]),d=u.useCallback(async y=>{try{a(!0),i(null);const b=await nt.get(`/store-security-settings/${y}/generateNewCode`),{success:v,data:w,message:C}=b.data;if(!v)throw new Error(C||"Failed to generate new security code");return e(w),w}catch(b){const v=b?.response?.data?.message||b?.message||"Failed to generate new security code";throw i(v),new Error(v)}finally{a(!1)}},[]),p=u.useCallback(()=>{e(null),i(null)},[]),h=u.useCallback(()=>{i(null)},[]),g=u.useMemo(()=>({settings:r,loading:t,error:o,fetchByStoreId:l,update:c,generateNewCode:d,clear:p,clearError:h}),[r,t,o,l,c,d,p,h]);return n.jsx(X6.Provider,{value:g,children:s})},Lre=()=>{const s=u.useContext(X6);if(!s)throw new Error("useStoreSecuritySettings must be used within a StoreSecuritySettingsProvider");return s},Fre=()=>n.jsx(Yt,{children:n.jsx("div",{className:"min-h-screen",children:n.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 py-6",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Analytics"}),n.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"View your store's analytics and performance metrics"})]}),n.jsx(UP,{})]})})});function Bre(){return n.jsx(n.Fragment,{children:n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Metaobjects"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{className:"cursor-pointer inline-flex items-center gap-1.5 px-3 py-1.5 border border-gray-200 text-sm text-gray-700 hover:bg-gray-50 transition-colors",type:"button",children:[n.jsx(v2,{className:"w-4 h-4"}),n.jsx("span",{children:"Manage"})]}),n.jsxs("button",{className:"cursor-pointer inline-flex items-center gap-1.5 px-3 py-1.5 text-sm bg-gray-900 text-white hover:bg-gray-800 transition-colors",type:"button",children:[n.jsx(On,{className:"w-4 h-4"}),n.jsx("span",{children:"Add definition"})]})]})]})})})}function zre({title:s,description:r,empty:e}){return n.jsxs("div",{className:"border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-1.5",children:s}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:r}),n.jsx("div",{className:"flex items-center justify-center min-h-[300px] border border-dashed border-gray-200 bg-gray-50",children:n.jsx("p",{className:"text-xs text-gray-600 text-center px-4",children:e})})]})}function $re({tabs:s,activeIndex:r}){return n.jsx(n.Fragment,{children:s.map((e,t)=>r===t?n.jsx(zre,{title:e.title,description:e.description,empty:e.empty},e.label):null)})}function Ure({label:s,active:r,onClick:e}){return n.jsx("button",{role:"tab","aria-selected":r,onClick:e,className:`py-2 text-sm font-medium border-b transition-colors ${r?"border-gray-900 text-gray-900":"border-transparent text-gray-600 hover:text-gray-900"}`,children:s})}function Vre({tabs:s,activeIndex:r,onChange:e}){return n.jsx(n.Fragment,{children:s.map((t,a)=>{const o=r===a;return n.jsx(Ure,{label:t.label,active:o,onClick:()=>e(a)},t.label)})})}function Hre({tabs:s,activeIndex:r,onChange:e}){return n.jsx("div",{className:"flex gap-3",role:"tablist","aria-label":"Metaobjects tabs",children:n.jsx(Vre,{tabs:s,activeIndex:r,onChange:e})})}const HT=[{label:"All Definitions",title:"All Metaobject Definitions",description:"Manage all your metaobject definitions in one place.",empty:'No metaobject definitions found. Click "Add definition" to create one.'},{label:"Product References",title:"Product References",description:"Metaobjects that reference products in your store.",empty:"No product reference metaobjects found."},{label:"Content Blocks",title:"Content Blocks",description:"Reusable content blocks for your store.",empty:"No content block metaobjects found."}];function Wre(){const[s,r]=u.useState(0);return n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx(Bre,{}),n.jsx("div",{className:"max-w-7xl mx-auto px-4",children:n.jsx(Hre,{tabs:HT,activeIndex:s,onChange:r})}),n.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:n.jsx($re,{tabs:HT,activeIndex:s})})]})})}const en=({open:s=!1,onClose:r,children:e,width:t,height:a,isCallModal:o=!1,title:i,maxWidth:l="sm",actions:c})=>{const[d,p]=u.useState(!1);if(u.useEffect(()=>(p(!0),()=>p(!1)),[]),u.useEffect(()=>(s&&d?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[s,d]),!s||!d)return null;const h={sm:"max-w-md",md:"max-w-lg",lg:"max-w-4xl"},g=t?`${t}px`:void 0,y=a?`${a}px`:void 0;return Hw.createPortal(n.jsx("div",{onClick:o?()=>{}:r,className:"z-5000 bg-black/20 w-screen h-screen fixed inset-0 flex items-center justify-center",children:n.jsxs("div",{onClick:b=>b.stopPropagation(),className:`relative bg-white border border-gray-200 w-full ${h[l]} ${y?"":"max-h-[calc(100vh-80px)]"} flex flex-col shadow-xl`,style:{width:g,height:y},children:[i&&n.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200",children:[typeof i=="string"?n.jsx("h2",{className:"text-base font-medium text-gray-900",children:i}):i,n.jsx("button",{onClick:r,className:"p-1 text-gray-600 hover:text-gray-900 transition-colors","aria-label":"Close",children:n.jsx(Zs,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-4",children:e}),c&&n.jsx("div",{className:"px-4 py-3 border-t border-gray-200 flex justify-end gap-2",children:c})]})}),document.getElementById("modal-root"))},qre=({isOpen:s,onClose:r,onAdd:e})=>{const[t,a]=u.useState({name:"",price:0,quantity:1,isTaxable:!0,isPhysicalProduct:!0,weight:void 0}),o=u.useCallback((c,d)=>{a(p=>({...p,[c]:d}))},[]),i=u.useCallback(()=>{!t.name.trim()||t.price<=0||t.quantity<=0||(e(t),a({name:"",price:0,quantity:1,isTaxable:!0,isPhysicalProduct:!0,weight:void 0}),r())},[t,e,r]),l=u.useCallback(()=>{a({name:"",price:0,quantity:1,isTaxable:!0,isPhysicalProduct:!0,weight:void 0}),r()},[r]);return n.jsx(en,{open:s,onClose:l,title:"Add custom item",maxWidth:"md",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:l,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:i,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Done"})]}),children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{className:"col-span-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Item name"}),n.jsx("input",{type:"text",value:t.name,onChange:c=>o("name",c.target.value),placeholder:"Item name",className:"w-full px-3 py-1.5 text-sm text-gray-900 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{className:"col-span-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Price"}),n.jsx("input",{type:"number",step:"0.01",min:"0",value:t.price||"",onChange:c=>o("price",parseFloat(c.target.value)||0),placeholder:"0.00",className:"w-full px-3 py-1.5 text-sm text-gray-900 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{className:"col-span-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Quantity"}),n.jsx("input",{type:"number",min:"1",value:t.quantity,onChange:c=>o("quantity",parseInt(c.target.value,10)||1),className:"w-full px-3 py-1.5 text-sm text-gray-900 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:t.isTaxable,onChange:c=>o("isTaxable",c.target.checked),className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Item is taxable"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:t.isPhysicalProduct,onChange:c=>o("isPhysicalProduct",c.target.checked),className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Item is a physical product"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Item weight (optional)"}),n.jsx("input",{type:"number",step:"0.01",min:"0",value:t.weight||"",onChange:c=>o("weight",parseFloat(c.target.value)||void 0),placeholder:"0.00",className:"w-full px-3 py-1.5 text-sm text-gray-900 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1.5",children:"Used to calculate shipping rates accurately"})]})]})})},Gre=({customer:s={name:"Alex Jander",orderCount:0,isTaxExempt:!0},onCreateNewCustomer:r})=>{const e=u.useCallback(()=>{r?r():console.log("Create new customer clicked")},[r]);return n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100",children:n.jsxs("div",{className:"px-6 py-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Customer"}),n.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-sm font-medium text-gray-700 hover:text-gray-900 transition-colors",children:[n.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-gray-400 flex items-center justify-center",children:n.jsx(On,{className:"w-4 h-4 text-gray-400"})}),n.jsx("span",{children:"Create a new customer"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Gw,{className:"w-5 h-5 text-gray-500"}),n.jsx("span",{className:"text-sm text-gray-900",children:s.name})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qw,{className:"w-5 h-5 text-gray-500"}),n.jsx("span",{className:"text-sm text-gray-900",children:s.orderCount===0||s.orderCount===void 0?"No orders":`${s.orderCount} ${s.orderCount===1?"order":"orders"}`})]})]}),s.isTaxExempt&&n.jsx("p",{className:"text-sm text-gray-500 mt-3",children:"Customer is tax-exempt"})]})})},WT=5e3,Kre=({isOpen:s,onClose:r,onSave:e,initialNote:t=""})=>{const[a,o]=u.useState(t),i=u.useRef(null);u.useEffect(()=>{s&&(o(t),setTimeout(()=>{i.current?.focus()},100))},[s,t]);const l=u.useCallback(y=>{const b=y.target.value;b.length<=WT&&o(b)},[]),c=u.useCallback(()=>{e(a),r()},[a,e,r]),d=u.useCallback(()=>{o(t),r()},[t,r]),p=a.length,g=!a.trim();return n.jsx(en,{open:s,onClose:d,title:"Add Note",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:d,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:c,disabled:g,className:`px-3 py-1.5 text-sm font-medium transition-colors ${g?"bg-gray-300 text-white cursor-not-allowed":"bg-gray-900 text-white hover:bg-gray-800"}`,children:"Done"})]}),children:n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx("textarea",{ref:i,value:a,onChange:l,placeholder:"Add a note...",rows:8,className:"w-full px-3 py-2 text-sm text-gray-900 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 resize-none"}),n.jsx("div",{className:"absolute bottom-2 right-2",children:n.jsxs("span",{className:"text-xs text-gray-500",children:[p,"/",WT]})})]}),n.jsx("p",{className:"text-xs text-gray-500",children:"To comment on a draft order or mention a staff member, use Timeline instead"})]})})},Yre=({notes:s="",onNotesChange:r})=>{const[e,t]=u.useState(!1),a=u.useCallback(()=>{t(!0)},[]),o=u.useCallback(()=>{t(!1)},[]),i=u.useCallback(l=>{r&&r(l)},[r]);return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100",children:n.jsx("div",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Notes"}),n.jsx("p",{className:"text-sm text-gray-500",children:s.trim()||"No notes"})]}),n.jsx("button",{onClick:a,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors","aria-label":"Edit notes",children:n.jsx(Bo,{className:"w-5 h-5"})})]})})}),n.jsx(Kre,{isOpen:e,onClose:o,onSave:i,initialNote:s})]})},Zre=({paymentSummary:s={subtotal:1500,itemCount:1,discount:{amount:1,description:"New customer"},shipping:{cost:0,description:"Free shipping (0.0 lb)"},total:1499,paidByCustomer:0,paymentDueDescription:"Payment due when invoice is sent"},onEditPaymentDue:r})=>{const e=a=>`$${a.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,t=u.useCallback(()=>{r?r():console.log("Edit payment due clicked")},[r]);return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100",children:[n.jsxs("div",{className:"px-6 pt-6 pb-4 border-b border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Payment"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Use this personalized guide to get your store up and running."})]}),n.jsx("div",{className:"px-6 py-4",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex-1",children:n.jsx("p",{className:"text-sm text-gray-900",children:"Subtotal"})}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("span",{className:"text-sm text-gray-600",children:[s.itemCount," ",s.itemCount===1?"item":"items"]}),n.jsx("span",{className:"text-sm font-medium text-gray-900 w-24 text-right",children:e(s.subtotal)})]})]}),s.discount&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex-1",children:n.jsx("p",{className:"text-sm text-gray-900",children:"Discount"})}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-sm text-gray-600",children:s.discount.description}),n.jsxs("span",{className:"text-sm font-medium text-red-600 w-24 text-right",children:["-",e(s.discount.amount)]})]})]}),s.shipping!==void 0&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex-1",children:n.jsx("p",{className:"text-sm text-gray-900",children:"Shipping"})}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-sm text-gray-600",children:s.shipping.description}),n.jsx("span",{className:"text-sm font-medium text-gray-900 w-24 text-right",children:e(s.shipping.cost)})]})]}),n.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-200",children:[n.jsx("div",{className:"flex-1",children:n.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Total"})}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-sm text-gray-600 w-[100px]"}),n.jsx("span",{className:"text-sm font-bold text-gray-900 w-24 text-right",children:e(s.total)})]})]}),n.jsxs("div",{className:"flex items-center justify-between pt-2",children:[n.jsx("div",{className:"flex-1",children:n.jsx("p",{className:"text-sm text-gray-900",children:"Paid by customer"})}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-sm text-gray-600 w-[100px]"}),n.jsx("span",{className:"text-sm font-medium text-gray-900 w-24 text-right",children:e(s.paidByCustomer)})]})]}),s.paymentDueDescription&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex-1",children:n.jsx("p",{className:"text-sm text-gray-900",children:s.paymentDueDescription})}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-sm text-gray-600 w-[100px]"}),n.jsx("button",{onClick:t,className:"text-sm text-gray-500 hover:text-gray-700 font-medium w-24 text-right transition-colors",children:"Edit"})]})]})]})})]})},Xre=({product:s,onQuantityChange:r,onRemove:e})=>{const t=o=>`$${o.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`;u.useCallback(o=>{const i=parseInt(o.target.value,10)||1;i>0&&r&&r(s.id,i)},[s.id,r]);const a=u.useCallback(()=>{e&&e(s.id)},[s.id,e]);return n.jsxs("div",{className:"flex items-center justify-between py-4 border-b border-gray-100 last:border-b-0",children:[n.jsxs("div",{className:"flex-1",children:[s.collectionName&&n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:s.collectionName}),n.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-1",children:s.productName}),n.jsxs("div",{className:"flex items-center gap-2",children:[s.variant&&n.jsx("span",{className:"text-xs text-gray-600",children:s.variant}),s.color&&n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("span",{className:"text-xs text-gray-600",children:s.color}),s.colorSwatch&&n.jsx("div",{className:"w-3 h-3 rounded border border-gray-300",style:{backgroundColor:s.colorSwatch}})]})]})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("button",{onClick:()=>{const o=document.createElement("input");o.type="number",o.min="1",o.value=s.quantity.toString()},className:"px-3 py-1.5 text-sm text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:[s.quantity,"  ",t(s.unitPrice)]}),n.jsx("span",{className:"text-sm font-semibold text-gray-900 w-24 text-right",children:t(s.totalPrice)}),n.jsx("button",{onClick:a,className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors","aria-label":"Remove product",children:n.jsx(Xs,{className:"w-5 h-5"})})]})]})},Qre=({products:s=[{id:"1",collectionName:"Collection Name",productName:"Gaming Console",variant:"Medium",color:"Gray",colorSwatch:"#9CA3AF",quantity:3,unitPrice:500,totalPrice:1500}],onProductsChange:r,onAddCustomItem:e,onBrowse:t})=>{const[a,o]=u.useState(""),i=u.useCallback(g=>{o(g.target.value)},[]),l=u.useCallback((g,y)=>{const b=s.map(v=>v.id===g?{...v,quantity:y,totalPrice:y*v.unitPrice}:v);r&&r(b)},[s,r]),c=u.useCallback(g=>{const y=s.filter(b=>b.id!==g);r&&r(y)},[s,r]),d=u.useCallback(()=>{e?e():console.log("Add custom item clicked")},[e]),p=u.useCallback(()=>{t?t():console.log("Browse clicked")},[t]),h=u.useCallback(()=>{const g=new Date,y=g.getHours(),b=g.getMinutes(),v=y>=12?"pm":"am";return`Items reserved until today at ${y%12||12}:${b.toString().padStart(2,"0")} ${v}`},[]);return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100",children:[n.jsxs("div",{className:"px-6 pt-6 pb-4 border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Products"}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("span",{className:"text-xs text-gray-600",children:h()}),n.jsx("button",{onClick:d,className:"text-sm text-gray-700 hover:text-gray-900 font-medium transition-colors",children:"Add custom item"}),n.jsx("button",{onClick:p,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Browse"})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:n.jsx(no,{className:"w-5 h-5 text-gray-400"})}),n.jsx("input",{type:"text",placeholder:"Search products",value:a,onChange:i,className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg text-sm text-gray-900 placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"Use this personalized guide to get your store up and running."})]}),n.jsx("div",{className:"px-6 py-4",children:s.length>0?n.jsx("div",{className:"space-y-0",children:s.map(g=>n.jsx(Xre,{product:g,onQuantityChange:l,onRemove:c},g.id))}):n.jsx("div",{className:"py-8 text-center",children:n.jsx("p",{className:"text-sm text-gray-500",children:"No products added yet. Search and add products to this order."})})})]})},Jre=({paymentTerms:s="Due on receipt",onPaymentTermsChange:r,onCancel:e,onCreateOrder:t,onSetupReminders:a})=>{const[o,i]=u.useState(s),l=["Due on receipt","Net 15","Net 30","Net 60","Due on delivery"],c=u.useCallback(g=>{const y=g.target.value;i(y),r&&r(y)},[r]),d=u.useCallback(()=>{e?e():console.log("Cancel clicked")},[e]),p=u.useCallback(()=>{t?t():console.log("Create order clicked")},[t]),h=u.useCallback(()=>{a?a():console.log("Setup automatic payment reminders clicked")},[a]);return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100",children:[n.jsxs("div",{className:"px-6 pt-6 pb-4 border-b border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Payment due letter"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Your Ziplofy Payment is Due - Ensure Uninterrupted Service Today!"})]}),n.jsxs("div",{className:"px-6 py-4",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Payment terms"}),n.jsx("select",{value:o,onChange:c,className:"w-full px-3 py-2 text-sm text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",children:l.map(g=>n.jsx("option",{value:g,children:g},g))})]}),n.jsx("div",{className:"h-px bg-gray-200 my-4"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Payment due when invoice is sent. You'll be able to collect payment from the order page."}),n.jsxs("p",{className:"text-sm text-gray-600",children:["you can also"," ",n.jsx("button",{onClick:h,className:"text-purple-600 hover:text-purple-700 font-medium underline",children:"set up automatic payment reminders"})," ","for customers."]})]})]}),n.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 rounded-b-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Review your order at a glance on the Order Summary page."}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:d,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:p,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",children:"Create order"})]})]})})]})},ene=()=>{const s=dr(),[r,e]=u.useState([{id:"1",collectionName:"Collection Name",productName:"Gaming Console",variant:"Medium",color:"Gray",colorSwatch:"#9CA3AF",quantity:3,unitPrice:500,totalPrice:1500}]),[t,a]=u.useState(""),[o,i]=u.useState({name:"Alex Jander",orderCount:0,isTaxExempt:!0}),[l,c]=u.useState(!1),d=u.useCallback(()=>{s("/orders")},[s]),p=u.useCallback(B=>{e(B)},[]),h=u.useCallback(()=>{c(!0)},[]),g=u.useCallback(()=>{c(!1)},[]),y=u.useCallback(B=>{const G={id:`custom-${Date.now()}`,productName:B.name,quantity:B.quantity,unitPrice:B.price,totalPrice:B.price*B.quantity};e($=>[...$,G]),c(!1)},[]),b=u.useCallback(()=>{console.log("Browse clicked")},[]),v=u.useCallback(()=>{console.log("Edit payment due clicked")},[]),w=u.useCallback(B=>{console.log("Payment terms changed:",B)},[]),C=u.useCallback(()=>{console.log("Setup automatic payment reminders clicked")},[]),k=u.useCallback(()=>{s("/orders")},[s]),N=u.useCallback(()=>{console.log("Create order clicked")},[]),O=u.useCallback(B=>{a(B)},[]),R=u.useCallback(()=>{s("/customers/new")},[s]),L=u.useMemo(()=>{const B=r.reduce((M,q)=>M+q.totalPrice,0),G=r.reduce((M,q)=>M+q.quantity,0),$={amount:1,description:"New customer"},z={cost:0,description:"Free shipping (0.0 lb)"},Y=B-($?.amount||0)+(z?.cost||0);return{subtotal:B,itemCount:G,discount:$,shipping:z,total:Y,paidByCustomer:0,paymentDueDescription:"Payment due when invoice is sent"}},[r]);return n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen p-6",children:[n.jsxs("div",{className:"max-w-[1600px] mx-auto",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("button",{onClick:d,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4 transition-colors",children:[n.jsx(gn,{className:"w-5 h-5"}),n.jsx("span",{className:"text-sm font-medium",children:"Back to Orders"})]}),n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Create Order"})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx(Qre,{products:r,onProductsChange:p,onAddCustomItem:h,onBrowse:b}),n.jsx(Zre,{paymentSummary:L,onEditPaymentDue:v}),n.jsx(Jre,{paymentTerms:"Due on receipt",onPaymentTermsChange:w,onCancel:k,onCreateOrder:N,onSetupReminders:C}),n.jsx(Yre,{notes:t,onNotesChange:O}),n.jsx(Gre,{customer:o,onCreateNewCustomer:R})]})]}),n.jsx(qre,{isOpen:l,onClose:g,onAdd:y})]})})},fm=[{code:"AF",name:"Afghanistan"},{code:"AL",name:"Albania"},{code:"DZ",name:"Algeria"},{code:"AS",name:"American Samoa"},{code:"AD",name:"Andorra"},{code:"AO",name:"Angola"},{code:"AI",name:"Anguilla"},{code:"AQ",name:"Antarctica"},{code:"AG",name:"Antigua and Barbuda"},{code:"AR",name:"Argentina"},{code:"AM",name:"Armenia"},{code:"AW",name:"Aruba"},{code:"AU",name:"Australia"},{code:"AT",name:"Austria"},{code:"AZ",name:"Azerbaijan"},{code:"BS",name:"Bahamas"},{code:"BH",name:"Bahrain"},{code:"BD",name:"Bangladesh"},{code:"BB",name:"Barbados"},{code:"BY",name:"Belarus"},{code:"BE",name:"Belgium"},{code:"BZ",name:"Belize"},{code:"BJ",name:"Benin"},{code:"BM",name:"Bermuda"},{code:"BT",name:"Bhutan"},{code:"BO",name:"Bolivia"},{code:"BA",name:"Bosnia and Herzegovina"},{code:"BW",name:"Botswana"},{code:"BV",name:"Bouvet Island"},{code:"BR",name:"Brazil"},{code:"IO",name:"British Indian Ocean Territory"},{code:"BN",name:"Brunei Darussalam"},{code:"BG",name:"Bulgaria"},{code:"BF",name:"Burkina Faso"},{code:"BI",name:"Burundi"},{code:"KH",name:"Cambodia"},{code:"CM",name:"Cameroon"},{code:"CA",name:"Canada"},{code:"CV",name:"Cape Verde"},{code:"KY",name:"Cayman Islands"},{code:"CF",name:"Central African Republic"},{code:"TD",name:"Chad"},{code:"CL",name:"Chile"},{code:"CN",name:"China"},{code:"CX",name:"Christmas Island"},{code:"CC",name:"Cocos (Keeling) Islands"},{code:"CO",name:"Colombia"},{code:"KM",name:"Comoros"},{code:"CG",name:"Congo"},{code:"CD",name:"Congo, Democratic Republic of the"},{code:"CK",name:"Cook Islands"},{code:"CR",name:"Costa Rica"},{code:"CI",name:"Cte d'Ivoire"},{code:"HR",name:"Croatia"},{code:"CU",name:"Cuba"},{code:"CY",name:"Cyprus"},{code:"CZ",name:"Czech Republic"},{code:"DK",name:"Denmark"},{code:"DJ",name:"Djibouti"},{code:"DM",name:"Dominica"},{code:"DO",name:"Dominican Republic"},{code:"EC",name:"Ecuador"},{code:"EG",name:"Egypt"},{code:"SV",name:"El Salvador"},{code:"GQ",name:"Equatorial Guinea"},{code:"ER",name:"Eritrea"},{code:"EE",name:"Estonia"},{code:"ET",name:"Ethiopia"},{code:"FK",name:"Falkland Islands (Malvinas)"},{code:"FO",name:"Faroe Islands"},{code:"FJ",name:"Fiji"},{code:"FI",name:"Finland"},{code:"FR",name:"France"},{code:"GF",name:"French Guiana"},{code:"PF",name:"French Polynesia"},{code:"TF",name:"French Southern Territories"},{code:"GA",name:"Gabon"},{code:"GM",name:"Gambia"},{code:"GE",name:"Georgia"},{code:"DE",name:"Germany"},{code:"GH",name:"Ghana"},{code:"GI",name:"Gibraltar"},{code:"GR",name:"Greece"},{code:"GL",name:"Greenland"},{code:"GD",name:"Grenada"},{code:"GP",name:"Guadeloupe"},{code:"GU",name:"Guam"},{code:"GT",name:"Guatemala"},{code:"GG",name:"Guernsey"},{code:"GN",name:"Guinea"},{code:"GW",name:"Guinea-Bissau"},{code:"GY",name:"Guyana"},{code:"HT",name:"Haiti"},{code:"HM",name:"Heard Island and McDonald Islands"},{code:"VA",name:"Holy See (Vatican City State)"},{code:"HN",name:"Honduras"},{code:"HK",name:"Hong Kong"},{code:"HU",name:"Hungary"},{code:"IS",name:"Iceland"},{code:"IN",name:"India"},{code:"ID",name:"Indonesia"},{code:"IR",name:"Iran, Islamic Republic of"},{code:"IQ",name:"Iraq"},{code:"IE",name:"Ireland"},{code:"IM",name:"Isle of Man"},{code:"IL",name:"Israel"},{code:"IT",name:"Italy"},{code:"JM",name:"Jamaica"},{code:"JP",name:"Japan"},{code:"JE",name:"Jersey"},{code:"JO",name:"Jordan"},{code:"KZ",name:"Kazakhstan"},{code:"KE",name:"Kenya"},{code:"KI",name:"Kiribati"},{code:"KP",name:"Korea, Democratic People's Republic of"},{code:"KR",name:"Korea, Republic of"},{code:"KW",name:"Kuwait"},{code:"KG",name:"Kyrgyzstan"},{code:"LA",name:"Lao People's Democratic Republic"},{code:"LV",name:"Latvia"},{code:"LB",name:"Lebanon"},{code:"LS",name:"Lesotho"},{code:"LR",name:"Liberia"},{code:"LY",name:"Libya"},{code:"LI",name:"Liechtenstein"},{code:"LT",name:"Lithuania"},{code:"LU",name:"Luxembourg"},{code:"MO",name:"Macao"},{code:"MK",name:"Macedonia, the former Yugoslav Republic of"},{code:"MG",name:"Madagascar"},{code:"MW",name:"Malawi"},{code:"MY",name:"Malaysia"},{code:"MV",name:"Maldives"},{code:"ML",name:"Mali"},{code:"MT",name:"Malta"},{code:"MH",name:"Marshall Islands"},{code:"MQ",name:"Martinique"},{code:"MR",name:"Mauritania"},{code:"MU",name:"Mauritius"},{code:"YT",name:"Mayotte"},{code:"MX",name:"Mexico"},{code:"FM",name:"Micronesia, Federated States of"},{code:"MD",name:"Moldova, Republic of"},{code:"MC",name:"Monaco"},{code:"MN",name:"Mongolia"},{code:"ME",name:"Montenegro"},{code:"MS",name:"Montserrat"},{code:"MA",name:"Morocco"},{code:"MZ",name:"Mozambique"},{code:"MM",name:"Myanmar"},{code:"NA",name:"Namibia"},{code:"NR",name:"Nauru"},{code:"NP",name:"Nepal"},{code:"NL",name:"Netherlands"},{code:"NC",name:"New Caledonia"},{code:"NZ",name:"New Zealand"},{code:"NI",name:"Nicaragua"},{code:"NE",name:"Niger"},{code:"NG",name:"Nigeria"},{code:"NU",name:"Niue"},{code:"NF",name:"Norfolk Island"},{code:"MP",name:"Northern Mariana Islands"},{code:"NO",name:"Norway"},{code:"OM",name:"Oman"},{code:"PK",name:"Pakistan"},{code:"PW",name:"Palau"},{code:"PS",name:"Palestinian Territory, Occupied"},{code:"PA",name:"Panama"},{code:"PG",name:"Papua New Guinea"},{code:"PY",name:"Paraguay"},{code:"PE",name:"Peru"},{code:"PH",name:"Philippines"},{code:"PN",name:"Pitcairn"},{code:"PL",name:"Poland"},{code:"PT",name:"Portugal"},{code:"PR",name:"Puerto Rico"},{code:"QA",name:"Qatar"},{code:"RE",name:"Runion"},{code:"RO",name:"Romania"},{code:"RU",name:"Russian Federation"},{code:"RW",name:"Rwanda"},{code:"BL",name:"Saint Barthlemy"},{code:"SH",name:"Saint Helena, Ascension and Tristan da Cunha"},{code:"KN",name:"Saint Kitts and Nevis"},{code:"LC",name:"Saint Lucia"},{code:"MF",name:"Saint Martin (French part)"},{code:"PM",name:"Saint Pierre and Miquelon"},{code:"VC",name:"Saint Vincent and the Grenadines"},{code:"WS",name:"Samoa"},{code:"SM",name:"San Marino"},{code:"ST",name:"Sao Tome and Principe"},{code:"SA",name:"Saudi Arabia"},{code:"SN",name:"Senegal"},{code:"RS",name:"Serbia"},{code:"SC",name:"Seychelles"},{code:"SL",name:"Sierra Leone"},{code:"SG",name:"Singapore"},{code:"SX",name:"Sint Maarten (Dutch part)"},{code:"SK",name:"Slovakia"},{code:"SI",name:"Slovenia"},{code:"SB",name:"Solomon Islands"},{code:"SO",name:"Somalia"},{code:"ZA",name:"South Africa"},{code:"GS",name:"South Georgia and the South Sandwich Islands"},{code:"SS",name:"South Sudan"},{code:"ES",name:"Spain"},{code:"LK",name:"Sri Lanka"},{code:"SD",name:"Sudan"},{code:"SR",name:"Suriname"},{code:"SJ",name:"Svalbard and Jan Mayen"},{code:"SZ",name:"Swaziland"},{code:"SE",name:"Sweden"},{code:"CH",name:"Switzerland"},{code:"SY",name:"Syrian Arab Republic"},{code:"TW",name:"Taiwan, Province of China"},{code:"TJ",name:"Tajikistan"},{code:"TZ",name:"Tanzania, United Republic of"},{code:"TH",name:"Thailand"},{code:"TL",name:"Timor-Leste"},{code:"TG",name:"Togo"},{code:"TK",name:"Tokelau"},{code:"TO",name:"Tonga"},{code:"TT",name:"Trinidad and Tobago"},{code:"TN",name:"Tunisia"},{code:"TR",name:"Turkey"},{code:"TM",name:"Turkmenistan"},{code:"TC",name:"Turks and Caicos Islands"},{code:"TV",name:"Tuvalu"},{code:"UG",name:"Uganda"},{code:"UA",name:"Ukraine"},{code:"AE",name:"United Arab Emirates"},{code:"GB",name:"United Kingdom"},{code:"US",name:"United States"},{code:"UM",name:"United States Minor Outlying Islands"},{code:"UY",name:"Uruguay"},{code:"UZ",name:"Uzbekistan"},{code:"VU",name:"Vanuatu"},{code:"VE",name:"Venezuela, Bolivarian Republic of"},{code:"VN",name:"Viet Nam"},{code:"VG",name:"Virgin Islands, British"},{code:"VI",name:"Virgin Islands, U.S."},{code:"WF",name:"Wallis and Futuna"},{code:"EH",name:"Western Sahara"},{code:"YE",name:"Yemen"},{code:"ZM",name:"Zambia"},{code:"ZW",name:"Zimbabwe"}],qT=s=>{const r=fm.find(e=>e.code===s);return r?r.name:s},tne=({isOpen:s,onClose:r,onSubmit:e,customerId:t})=>{const[a,o]=u.useState({addressType:"home",country:"",firstName:"",lastName:"",company:"",address:"",apartment:"",city:"",state:"",pinCode:"",phoneNumber:""}),i=u.useCallback((d,p)=>{o(h=>({...h,[d]:p}))},[]),l=u.useCallback(async()=>{if(!t)return;const d={customerId:t,addressType:a.addressType,country:a.country,firstName:a.firstName,lastName:a.lastName,company:a.company||void 0,address:a.address,apartment:a.apartment||void 0,city:a.city,state:a.state,pinCode:a.pinCode,phoneNumber:a.phoneNumber};await e(d),o({addressType:"home",country:"",firstName:"",lastName:"",company:"",address:"",apartment:"",city:"",state:"",pinCode:"",phoneNumber:""})},[t,a,e]),c=u.useCallback(()=>{o({addressType:"home",country:"",firstName:"",lastName:"",company:"",address:"",apartment:"",city:"",state:"",pinCode:"",phoneNumber:""}),r()},[r]);return u.useEffect(()=>{s&&o({addressType:"home",country:"",firstName:"",lastName:"",company:"",address:"",apartment:"",city:"",state:"",pinCode:"",phoneNumber:""})},[s]),n.jsx(en,{open:s,onClose:c,title:"Add Customer Address",maxWidth:"lg",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:c,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Close"}),n.jsx("button",{onClick:l,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Save Address"})]}),children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Address Type (home / office / other)"}),n.jsx("input",{type:"text",value:a.addressType,onChange:d=>i("addressType",d.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Country"}),n.jsxs("select",{value:a.country,onChange:d=>i("country",d.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors",children:[n.jsx("option",{value:"",children:"Select Country"}),fm.map(d=>n.jsx("option",{value:d.code,children:d.name},d.code))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Company"}),n.jsx("input",{type:"text",value:a.company,onChange:d=>i("company",d.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"First Name"}),n.jsx("input",{type:"text",value:a.firstName,onChange:d=>i("firstName",d.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Last Name"}),n.jsx("input",{type:"text",value:a.lastName,onChange:d=>i("lastName",d.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Address"}),n.jsx("input",{type:"text",value:a.address,onChange:d=>i("address",d.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Apartment, Suite, etc."}),n.jsx("input",{type:"text",value:a.apartment,onChange:d=>i("apartment",d.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"City"}),n.jsx("input",{type:"text",value:a.city,onChange:d=>i("city",d.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"State"}),n.jsx("input",{type:"text",value:a.state,onChange:d=>i("state",d.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Pin Code"}),n.jsx("input",{type:"text",value:a.pinCode,onChange:d=>i("pinCode",d.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Phone Number"}),n.jsx("input",{type:"text",value:a.phoneNumber,onChange:d=>i("phoneNumber",d.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]})})},Q6=u.createContext(void 0),rne=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async b=>{try{a(!0),i(null);const v=await nt.get(`/customer-address/customer/${b}`);e(v.data.data)}catch(v){const w=v.response?.data?.message||v.message||"Failed to fetch customer addresses";throw i(w),v}finally{a(!1)}},[]),c=u.useCallback(async b=>{try{a(!0),i(null);const w=(await nt.post("/customer-address",b)).data.data;return e(C=>[w,...C]),w}catch(v){const w=v.response?.data?.message||v.message||"Failed to create customer address";throw i(w),v}finally{a(!1)}},[]),d=u.useCallback(async(b,v)=>{try{a(!0),i(null);const C=(await nt.put(`/customer-address/${b}`,v)).data.data;return e(k=>k.map(N=>N._id===b?C:N)),C}catch(w){const C=w.response?.data?.message||w.message||"Failed to update customer address";throw i(C),w}finally{a(!1)}},[]),p=u.useCallback(async b=>{try{a(!0),i(null),await nt.delete(`/customer-address/${b}`),e(v=>v.filter(w=>w._id!==b))}catch(v){const w=v.response?.data?.message||v.message||"Failed to delete customer address";throw i(w),v}finally{a(!1)}},[]),h=u.useCallback(()=>i(null),[]),g=u.useCallback(()=>e([]),[]),y={addresses:r,loading:t,error:o,fetchCustomerAddressesByCustomerId:l,addCustomerAddress:c,updateCustomerAddress:d,deleteCustomerAddress:p,clearError:h,clearAddresses:g};return n.jsx(Q6.Provider,{value:y,children:s})},J6=()=>{const s=u.useContext(Q6);if(!s)throw new Error("useCustomerAddresses must be used within a CustomerAddressProvider");return s},nne=({address:s,onUpdate:r,onDelete:e})=>n.jsxs("div",{className:"bg-white border border-gray-200 rounded p-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 capitalize",children:s.addressType||"home"}),n.jsxs("div",{className:"flex gap-1.5",children:[n.jsx("button",{onClick:()=>r(s),className:"px-2 py-1 text-xs font-medium text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:"Update"}),n.jsx("button",{onClick:()=>e(s._id),className:"px-2 py-1 text-xs font-medium text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:"Delete"})]})]}),n.jsxs("div",{className:"space-y-1 text-sm text-gray-700",children:[n.jsxs("p",{className:"font-medium text-gray-900",children:[s.firstName," ",s.lastName]}),n.jsxs("p",{className:"text-gray-600",children:[s.address,s.apartment?`, ${s.apartment}`:""]}),n.jsxs("p",{className:"text-gray-600",children:[s.city,", ",s.state," ",s.pinCode]}),n.jsx("p",{className:"text-gray-600",children:s.country}),n.jsx("p",{className:"text-gray-600",children:s.phoneNumber})]})]}),sne=({addresses:s,onUpdate:r,onDelete:e})=>n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map(t=>n.jsx(nne,{address:t,onUpdate:r,onDelete:e},t._id))}),ane=({isOpen:s,onClose:r,onConfirm:e})=>n.jsx(en,{open:s,onClose:r,title:"Delete Address",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"No"}),n.jsx("button",{onClick:e,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Yes"})]}),children:n.jsx("p",{className:"text-sm text-gray-700",children:"Do you really want to delete this address?"})}),one=({isOpen:s,addressForm:r,onAddressChange:e,onClose:t,onSubmit:a})=>n.jsx(en,{open:s,onClose:t,title:"Update Customer Address",maxWidth:"lg",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:t,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:a,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Update Address"})]}),children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Address Type (home / office / other)"}),n.jsx("input",{type:"text",value:r.addressType,onChange:o=>e("addressType",o.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Country"}),n.jsxs("select",{value:r.country,onChange:o=>e("country",o.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors",children:[n.jsx("option",{value:"",children:"Select Country"}),fm.map(o=>n.jsx("option",{value:o.code,children:o.name},o.code))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Company"}),n.jsx("input",{type:"text",value:r.company,onChange:o=>e("company",o.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"First Name"}),n.jsx("input",{type:"text",value:r.firstName,onChange:o=>e("firstName",o.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Last Name"}),n.jsx("input",{type:"text",value:r.lastName,onChange:o=>e("lastName",o.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Address"}),n.jsx("input",{type:"text",value:r.address,onChange:o=>e("address",o.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Apartment, Suite, etc."}),n.jsx("input",{type:"text",value:r.apartment,onChange:o=>e("apartment",o.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"City"}),n.jsx("input",{type:"text",value:r.city,onChange:o=>e("city",o.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"State"}),n.jsx("input",{type:"text",value:r.state,onChange:o=>e("state",o.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Pin Code"}),n.jsx("input",{type:"text",value:r.pinCode,onChange:o=>e("pinCode",o.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Phone Number"}),n.jsx("input",{type:"text",value:r.phoneNumber,onChange:o=>e("phoneNumber",o.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]})}),ine=({customerId:s})=>{const{addresses:r,loading:e,error:t,fetchCustomerAddressesByCustomerId:a,updateCustomerAddress:o,deleteCustomerAddress:i}=J6(),[l,c]=u.useState(!1),[d,p]=u.useState(null),[h,g]=u.useState(!1),[y,b]=u.useState(null),[v,w]=u.useState({addressType:"home",country:"",firstName:"",lastName:"",company:"",address:"",apartment:"",city:"",state:"",pinCode:"",phoneNumber:""});u.useEffect(()=>{s&&a(s)},[s,a]);const C=u.useCallback((B,G)=>{w($=>({...$,[B]:G}))},[]),k=u.useCallback(async()=>{!y||!s||(await o(y,{addressType:v.addressType,country:v.country,firstName:v.firstName,lastName:v.lastName,company:v.company||void 0,address:v.address,apartment:v.apartment||void 0,city:v.city,state:v.state,pinCode:v.pinCode,phoneNumber:v.phoneNumber}),g(!1),b(null),a(s))},[y,s,v,o,a]),N=u.useCallback(async()=>{!d||!s||(await i(d),c(!1),p(null),a(s))},[d,s,i,a]),O=u.useCallback(B=>{b(B._id),w({addressType:B.addressType||"home",country:B.country,firstName:B.firstName,lastName:B.lastName,company:B.company||"",address:B.address,apartment:B.apartment||"",city:B.city,state:B.state,pinCode:B.pinCode,phoneNumber:B.phoneNumber}),g(!0)},[]),R=u.useCallback(()=>{g(!1),b(null)},[]),L=u.useCallback(B=>{p(B),c(!0)},[]);return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Addresses"}),e?n.jsx("p",{className:"text-sm text-gray-600",children:"Loading addresses..."}):t?n.jsx("p",{className:"text-sm text-red-600",children:t}):r&&r.length>0?n.jsx(sne,{addresses:r,onUpdate:O,onDelete:L}):n.jsx("p",{className:"text-sm text-gray-600",children:"Currently no address added."})]}),n.jsx(one,{isOpen:h,addressForm:v,onAddressChange:C,onClose:R,onSubmit:k}),n.jsx(ane,{isOpen:l,onClose:()=>{c(!1),p(null)},onConfirm:N})]})},lne=({agreedToMarketingEmails:s,agreedToSmsMarketing:r,notes:e})=>n.jsxs("div",{className:"pt-3 border-t border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Marketing Emails"}),n.jsx("p",{className:"text-sm",children:s?n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:"Agreed"}):n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-700",children:"Not Agreed"})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"SMS Marketing"}),n.jsx("p",{className:"text-sm",children:r?n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:"Agreed"}):n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-700",children:"Not Agreed"})})]})]}),e&&n.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Notes"}),n.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:e})]})]}),cne=({firstName:s,lastName:r,email:e,phoneNumber:t})=>n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"First Name"}),n.jsx("p",{className:"text-sm text-gray-900",children:s})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Last Name"}),n.jsx("p",{className:"text-sm text-gray-900",children:r})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Email"}),n.jsx("p",{className:"text-sm text-gray-900",children:e})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Phone Number"}),n.jsx("p",{className:"text-sm text-gray-900",children:t})]})]}),dne=({language:s,collectTax:r,storeId:e})=>n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Language"}),n.jsx("p",{className:"text-sm text-gray-900",children:s})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Collect Tax"}),n.jsx("p",{className:"text-sm text-gray-900 capitalize",children:r==="collect"?"Collect Tax":r==="dont_collect"?"Don't Collect Tax":"Collect Tax Unless Exempt"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Store ID"}),n.jsx("p",{className:"text-xs text-gray-700 font-mono",children:e})]})]}),une=({tags:s})=>n.jsxs("div",{className:"pt-3 border-t border-gray-200",children:[n.jsx("h3",{className:"text-xs text-gray-600 mb-2",children:"Tags"}),n.jsx("div",{className:"flex flex-wrap gap-1.5",children:Array.isArray(s)&&s.length>0?s.map(r=>n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-700",children:r.name||r},r._id||r)):n.jsx("span",{className:"text-xs text-gray-500",children:"No tags"})})]}),fne=({comment:s,onCommentChange:r,onSubmit:e})=>{const t=a=>{a.key==="Enter"&&(a.ctrlKey||a.metaKey)&&e()};return n.jsxs("div",{className:"flex gap-2 items-start",children:[n.jsx("textarea",{value:s,onChange:a=>r(a.target.value),placeholder:"Leave a comment",rows:2,className:"flex-1 px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 resize-none",onKeyDown:t}),n.jsx("button",{onClick:e,disabled:!s.trim(),className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 rounded hover:bg-gray-800 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors whitespace-nowrap",children:"Post"})]})},pne=({entry:s,onEdit:r,onDelete:e})=>n.jsxs("div",{className:"border border-gray-200 rounded p-3",children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap pr-2 flex-1",children:s.comment}),n.jsxs("div",{className:"flex gap-1 shrink-0",children:[n.jsx("button",{onClick:()=>r(s),className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors","aria-label":"edit timeline",children:n.jsx(Bo,{className:"w-3.5 h-3.5"})}),n.jsx("button",{onClick:()=>e(s._id),className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors","aria-label":"delete timeline",children:n.jsx(Xs,{className:"w-3.5 h-3.5"})})]})]}),n.jsx("p",{className:"text-xs text-gray-600",children:new Date(s.createdAt).toLocaleDateString()})]}),hne=({timeline:s,loading:r,error:e,onEdit:t,onDelete:a})=>n.jsx("div",{className:"mb-4 space-y-2",children:r?n.jsx("p",{className:"text-sm text-gray-600",children:"Loading timeline..."}):e?n.jsx("p",{className:"text-sm text-red-600",children:e}):s&&s.length>0?s.map(o=>n.jsx(pne,{entry:o,onEdit:t,onDelete:a},o._id)):n.jsx("p",{className:"text-sm text-gray-600",children:"No timeline entries yet."})}),mne=({isOpen:s,onClose:r,onConfirm:e})=>n.jsx(en,{open:s,onClose:r,title:"Delete Timeline Item",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"No"}),n.jsx("button",{onClick:e,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Yes"})]}),children:n.jsx("p",{className:"text-sm text-gray-700",children:"Do you really want to delete this timeline item?"})}),gne=({isOpen:s,comment:r,onCommentChange:e,onClose:t,onSubmit:a})=>n.jsx(en,{open:s,onClose:t,title:"Edit Timeline Comment",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:t,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:a,disabled:!r.trim(),className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:"Submit"})]}),children:n.jsx("textarea",{value:r,onChange:o=>e(o.target.value),rows:3,className:"w-full px-3 py-2 text-base border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 resize-none transition-colors",placeholder:"Comment"})}),yne=({customerId:s})=>{const{timeline:r,loading:e,error:t,createCustomerTimeline:a,updateCustomerTimeline:o,deleteCustomerTimeline:i,fetchCustomerTimelineByCustomerId:l}=PU(),[c,d]=u.useState(""),[p,h]=u.useState(!1),[g,y]=u.useState(null),[b,v]=u.useState(!1),[w,C]=u.useState(null),[k,N]=u.useState(""),O=u.useCallback(async()=>{!s||!c.trim()||(await a({customerId:s,comment:c.trim()}),d(""),l(s))},[s,c,a,l]),R=u.useCallback(async()=>{!w||!k.trim()||!s||(await o(w,{comment:k.trim()}),v(!1),C(null),N(""),l(s))},[w,k,s,o,l]),L=u.useCallback(async()=>{!g||!s||(await i(g),h(!1),y(null),l(s))},[g,s,i,l]),B=u.useCallback(G=>{C(G._id),N(G.comment),v(!0)},[]);return u.useEffect(()=>{s&&l(s)},[s,l]),n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Timeline"}),n.jsx(hne,{timeline:r,loading:e,error:t,onEdit:B,onDelete:G=>{y(G),h(!0)}}),n.jsx(fne,{comment:c,onCommentChange:d,onSubmit:O})]}),n.jsx(mne,{isOpen:p,onClose:()=>{h(!1),y(null)},onConfirm:L}),n.jsx(gne,{isOpen:b,comment:k,onCommentChange:N,onClose:()=>{v(!1),C(null),N("")},onSubmit:R})]})},xne=({createdAt:s,updatedAt:r})=>n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 pt-3 border-t border-gray-200",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Created At"}),n.jsx("p",{className:"text-sm text-gray-900",children:new Date(s).toLocaleDateString()})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Updated At"}),n.jsx("p",{className:"text-sm text-gray-900",children:new Date(r).toLocaleDateString()})]})]}),vne=()=>{const{id:s}=ks(),r=dr(),{customers:e}=iu(),{fetchCustomerAddressesByCustomerId:t,addCustomerAddress:a}=J6(),[o,i]=u.useState(!1),l=u.useMemo(()=>e.find(p=>p._id===s),[e,s]),c=u.useCallback(async p=>{s&&(await a(p),i(!1),t(s))},[s,a,t]),d=u.useCallback(()=>{i(!1)},[]);return n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-4",children:n.jsx("div",{className:"max-w-6xl mx-auto",children:n.jsxs("div",{className:"flex items-center justify-between gap-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:()=>r("/customers"),className:"flex items-center gap-1.5 px-3 py-1.5 text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:n.jsx(gn,{className:"w-4 h-4"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:l?`${l.firstName} ${l.lastName}`:"Customer"}),n.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:"Customer details and information"})]})]}),n.jsx("button",{onClick:()=>i(!0),className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:"Add Customer Address"})]})})}),n.jsx("div",{className:"max-w-6xl mx-auto py-6 px-4",children:n.jsx("div",{children:l?n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Customer Information"}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(cne,{firstName:l.firstName,lastName:l.lastName,email:l.email,phoneNumber:l.phoneNumber}),n.jsx(dne,{language:l.language,collectTax:l.collectTax,storeId:l.storeId})]}),n.jsx(xne,{createdAt:l.createdAt,updatedAt:l.updatedAt}),n.jsx(lne,{agreedToMarketingEmails:l.agreedToMarketingEmails,agreedToSmsMarketing:l.agreedToSmsMarketing,notes:l.notes}),n.jsx(une,{tags:l.tagIds})]})]}),s&&n.jsx(ine,{customerId:s}),s&&n.jsx(yne,{customerId:s})]}):n.jsx("p",{className:"text-sm text-gray-600",children:"Customer not found in state."})})}),s&&n.jsx(tne,{isOpen:o,onClose:d,onSubmit:c,customerId:s})]})})},bne=({isOpen:s,onClose:r,selectedCustomerId:e,onCustomerChange:t,customers:a,canSave:o,onSave:i})=>n.jsx(en,{open:s,onClose:r,title:"Add customer to segment",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:i,disabled:!o,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Save"})]}),children:n.jsxs("div",{children:[n.jsx("label",{htmlFor:"customer-select",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Customer"}),n.jsxs("select",{id:"customer-select",value:e,onChange:t,className:"w-full px-3 py-1.5 text-base border border-gray-200 focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors bg-white",children:[n.jsx("option",{value:"",children:"Select a customer"}),a.map(l=>n.jsxs("option",{value:l._id,children:[`${l.firstName} ${l.lastName}`," - ",l.email]},l._id))]})]})}),wne=({entry:s,onDelete:r})=>{const e=u.useCallback(a=>typeof a=="string"?a:a.fullName||`${a.firstName||""} ${a.lastName||""}`.trim(),[]),t=u.useCallback(()=>{r(s)},[s,r]);return n.jsxs("div",{className:"flex justify-between items-center py-2.5 px-3 hover:bg-gray-50 transition-colors group",children:[n.jsx("span",{className:"text-sm text-gray-900",children:e(s.customerId)}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-xs text-gray-600",children:new Date(s.createdAt).toLocaleDateString()}),n.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded transition-colors opacity-0 group-hover:opacity-100","aria-label":"delete",children:n.jsx(Xs,{className:"w-3.5 h-3.5 text-gray-500 hover:text-gray-700 transition-colors"})})]})]})},jne=({entries:s,onDelete:r})=>n.jsx("div",{className:"divide-y divide-gray-200",children:s.map(e=>n.jsx(wne,{entry:e,onDelete:r},e._id))}),Cne=({isOpen:s,onClose:r,entry:e,onConfirm:t})=>{const a=u.useCallback(l=>typeof l=="string"?l:l.fullName||`${l.firstName||""} ${l.lastName||""}`.trim(),[]),o=u.useCallback(()=>{t(),r()},[t,r]);if(!s||!e)return null;const i=a(e.customerId);return n.jsx(en,{open:s,onClose:r,title:"Delete Customer",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"No"}),n.jsx("button",{onClick:o,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Yes"})]}),children:n.jsxs("p",{className:"text-sm text-gray-700",children:["Do you really want to delete ",n.jsx("span",{className:"font-medium",children:i})," from this segment?"]})})},eM=u.createContext(void 0),Sne=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async h=>{a(!0),i(null);try{const y=(await nt.get(`/customer-segment-entries/segment/${h}`)).data?.data??[];return e(y),y}catch(g){const y=g?.response?.data?.message||g?.message||"Failed to fetch customer segment entries";throw i(y),new Error(y)}finally{a(!1)}},[]),c=u.useCallback(async(h,g)=>{a(!0),i(null);try{const b=(await nt.post("/customer-segment-entries",{segmentId:h,customerId:g})).data.data;return e(v=>[b,...v]),b}catch(y){const b=y?.response?.data?.message||y?.message||"Failed to add customer to segment";throw i(b),new Error(b)}finally{a(!1)}},[]),d=u.useCallback(async h=>{a(!0),i(null);try{await nt.delete(`/customer-segment-entries/${h}`),e(g=>g.filter(y=>y._id!==h))}catch(g){const y=g?.response?.data?.message||g?.message||"Failed to remove customer from segment";throw i(y),new Error(y)}finally{a(!1)}},[]),p=u.useMemo(()=>({entries:r,loading:t,error:o,createEntry:c,fetchEntriesBySegmentId:l,deleteEntry:d}),[r,t,o,c,l,d]);return n.jsx(eM.Provider,{value:p,children:s})},Nne=()=>{const s=u.useContext(eM);if(!s)throw new Error("useCustomerSegmentEntries must be used within a CustomerSegmentsEntryProvider");return s},tM=u.createContext(void 0),kne=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async g=>{a(!0),i(null);try{const b=(await nt.get(`/customer-segments/store/${g}`)).data?.data??[];return e(b),b}catch(y){const b=y?.response?.data?.message||y?.message||"Failed to fetch customer segments";throw i(b),new Error(b)}finally{a(!1)}},[]),c=u.useCallback(async(g,y)=>{a(!0),i(null);try{const v=(await nt.post("/customer-segments",{storeId:g,name:y})).data.data;return e(w=>[v,...w]),v}catch(b){const v=b?.response?.data?.message||b?.message||"Failed to create customer segment";throw i(v),new Error(v)}finally{a(!1)}},[]),d=u.useCallback(async(g,y,b=1,v=10)=>{a(!0),i(null);try{const w=await nt.get(`/customer-segments/search/${g}?q=${encodeURIComponent(y)}&page=${b}&limit=${v}`),{success:C,data:k,pagination:N}=w.data;if(!C)throw new Error("Failed to search customer segments");return e(k),{success:C,data:k,pagination:N}}catch(w){const C=w?.response?.data?.message||w?.message||"Failed to search customer segments";throw i(C),new Error(C)}finally{a(!1)}},[]),p=u.useCallback(async(g,y)=>{a(!0),i(null);try{const v=(await nt.patch(`/customer-segments/${g}`,{name:y})).data.data;return e(w=>w.map(C=>C._id===v._id?v:C)),v}catch(b){const v=b?.response?.data?.message||b?.message||"Failed to update customer segment";throw i(v),new Error(v)}finally{a(!1)}},[]),h=u.useMemo(()=>({segments:r,loading:t,error:o,createCustomerSegment:c,fetchSegmentsByStoreId:l,searchCustomerSegments:d,updateCustomerSegmentName:p}),[r,t,o,c,l,d,p]);return n.jsx(tM.Provider,{value:h,children:s})},Dm=()=>{const s=u.useContext(tM);if(!s)throw new Error("useCustomerSegments must be used within a CustomerSegmentProvider");return s},_ne=()=>{const{id:s}=ks(),r=dr(),{entries:e,fetchEntriesBySegmentId:t,createEntry:a,deleteEntry:o,loading:i}=Nne(),{customers:l,fetchCustomersByStoreId:c}=iu(),{segments:d,fetchSegmentsByStoreId:p}=Dm(),{activeStoreId:h}=Ur(),[g,y]=u.useState(!1),[b,v]=u.useState(""),[w,C]=u.useState(!1),[k,N]=u.useState(null),O=u.useMemo(()=>!!b&&!!s,[b,s]),R=u.useMemo(()=>d.find(q=>q._id===s),[d,s]);u.useEffect(()=>{s&&t(s).catch(()=>{})},[s,t]),u.useEffect(()=>{h&&l.length===0&&c(h).catch(()=>{})},[h,l.length,c]),u.useEffect(()=>{h&&d.length===0&&p(h).catch(()=>{})},[h,d.length,p]);const L=u.useCallback(()=>{y(!0)},[]),B=u.useCallback(()=>{y(!1),v("")},[]),G=u.useCallback(q=>{v(q.target.value)},[]),$=u.useCallback(async()=>{if(!(!s||!b))try{await a(s,b),v(""),y(!1)}catch{}},[s,b,a]),z=u.useCallback(q=>{N(q),C(!0)},[]),Y=u.useCallback(()=>{C(!1),N(null)},[]),M=u.useCallback(async()=>{if(k)try{await o(k._id),C(!1),N(null)}catch{}},[k,o]);return n.jsxs(Yt,{children:[n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>r("/customers/segments"),className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(gn,{className:"w-4 h-4"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:R?.name||"Segment details"})]}),n.jsx("button",{onClick:L,className:"px-3 py-1.5 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 transition-colors",children:"Add Customer"})]})})}),n.jsx("div",{className:"max-w-7xl mx-auto py-4 px-4",children:i?n.jsx("div",{className:"py-6 text-center",children:n.jsx("p",{className:"text-sm text-gray-600",children:"Loading customers..."})}):e.length===0?n.jsx("div",{className:"py-6 text-center",children:n.jsx("p",{className:"text-sm text-gray-600",children:"No customers in this segment yet"})}):n.jsx("div",{className:"bg-white border border-gray-200",children:n.jsx(jne,{entries:e,onDelete:z})})})]}),n.jsx(bne,{isOpen:g,onClose:B,selectedCustomerId:b,onCustomerChange:G,customers:l,canSave:O,onSave:$}),n.jsx(Cne,{isOpen:w,onClose:Y,entry:k,onConfirm:M})]})},Ene=()=>{const s=dr(),{activeStoreId:r}=Ur(),{customers:e,loading:t,fetchCustomersByStoreId:a}=iu();return u.useEffect(()=>{r&&a(r)},[r,a]),n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-4",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(QO,{className:"w-5 h-5 text-gray-600"}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Customers"})]}),e&&e.length>0&&n.jsxs("button",{onClick:()=>s("/customers/new"),className:"flex items-center gap-1.5 px-3 py-1.5 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 transition-colors",children:[n.jsx(U5,{className:"w-4 h-4"}),"Add customer"]})]})})}),n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:!t&&(!e||e.length===0)?n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-6 text-center",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-2",children:"Everything customers-related in one place"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Manage customer details, see customer order history, and group customers into segments."}),n.jsxs("div",{className:"flex gap-2 justify-center flex-wrap",children:[n.jsxs("button",{onClick:()=>s("/customers/new"),className:"flex items-center gap-1.5 px-3 py-1.5 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 transition-colors",children:[n.jsx(U5,{className:"w-4 h-4"}),"Add customer"]}),n.jsxs("button",{className:"flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:[n.jsx(g2,{className:"w-4 h-4"}),"Import customers"]})]})]}):n.jsxs("div",{className:"bg-white rounded border border-gray-200",children:[n.jsx("div",{className:"p-3 border-b border-gray-200 bg-gray-50",children:n.jsxs("h2",{className:"text-base font-medium text-gray-900",children:[e?.length||0," Customer",(e?.length||0)!==1?"s":""]})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Name"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Email"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Phone"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Tags"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Created"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t?n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"px-3 py-6 text-center text-sm text-gray-600",children:"Loading customers..."})}):e&&e.length>0?e.map(o=>n.jsxs("tr",{onClick:()=>s(`/customers/${o._id}`),className:"hover:bg-gray-50 cursor-pointer transition-colors",children:[n.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium text-gray-900",children:[o.firstName," ",o.lastName]}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-700",children:o.email}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-700",children:o.phoneNumber}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:Array.isArray(o.tagIds)&&o.tagIds.length>0?n.jsx("div",{className:"flex flex-wrap gap-1",children:o.tagIds.map(i=>n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-700",children:i.name||i},i._id||i))}):n.jsx("span",{className:"text-gray-400",children:""})}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-600",children:new Date(o.createdAt).toLocaleDateString()})]},o._id)):n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"px-3 py-6 text-center text-sm text-gray-600",children:"No customers found"})})})]})})]})})]})})},Tne=({isOpen:s,name:r,storeId:e,onNameChange:t,onClose:a,onCreate:o})=>{const i=u.useCallback(l=>{t(l.target.value)},[t]);return n.jsx(en,{open:s,onClose:a,title:"Create customer segment",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:a,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:o,disabled:!r.trim()||!e,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Create customer segment"})]}),children:n.jsxs("div",{children:[n.jsx("label",{htmlFor:"create-segment-name",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Name"}),n.jsx("input",{id:"create-segment-name",type:"text",value:r,onChange:i,className:"w-full px-3 py-1.5 text-base border border-gray-200 focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors",placeholder:"Enter segment name",autoFocus:!0})]})})},One=({segment:s,onSegmentClick:r,onEditClick:e})=>{const t=u.useCallback(()=>{r(s._id)},[s._id,r]),a=u.useCallback(o=>{e(o,s._id,s.name)},[s._id,s.name,e]);return n.jsxs("tr",{className:"cursor-pointer hover:bg-gray-50 transition-colors",onClick:t,children:[n.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:n.jsx("span",{className:"font-medium text-gray-900 text-sm",children:s.name})}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:n.jsx("span",{className:"text-sm text-gray-600",children:new Date(s.createdAt).toLocaleDateString()})}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-right",children:n.jsx("button",{className:"px-2 py-1 text-xs font-medium text-gray-700 hover:bg-gray-100 rounded transition-colors",onClick:a,children:"Edit"})})]})},Pne=({segments:s,sortOrder:r,onSortToggle:e,onSegmentClick:t,onEditClick:a})=>{const o=u.useCallback(()=>{e()},[e]);return n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Segment Name"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700 cursor-pointer hover:bg-gray-100 transition-colors",onClick:o,children:n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("span",{children:"Created"}),r==="asc"?n.jsx(cm,{className:"w-3.5 h-3.5 text-gray-600"}):n.jsx(lm,{className:"w-3.5 h-3.5 text-gray-600"})]})}),n.jsx("th",{className:"px-3 py-2 text-right text-sm font-medium text-gray-700",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(i=>n.jsx(One,{segment:i,onSegmentClick:t,onEditClick:a},i._id))})]})})},Ane=({isOpen:s,editName:r,onNameChange:e,onClose:t,onSave:a})=>{const o=u.useCallback(i=>{e(i.target.value)},[e]);return n.jsx(en,{open:s,onClose:t,title:"Edit customer segment",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:t,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:a,disabled:!r.trim(),className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Save"})]}),children:n.jsxs("div",{children:[n.jsx("label",{htmlFor:"edit-segment-name",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Name"}),n.jsx("input",{id:"edit-segment-name",type:"text",value:r,onChange:o,className:"w-full px-3 py-1.5 text-base border border-gray-200 focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors",placeholder:"Enter segment name",autoFocus:!0})]})})},Mne=()=>{const{segments:s,createCustomerSegment:r,fetchSegmentsByStoreId:e,updateCustomerSegmentName:t,loading:a}=Dm(),{activeStoreId:o}=Ur(),[i,l]=u.useState(!1),[c,d]=u.useState(""),[p,h]=u.useState(!1),[g,y]=u.useState(""),[b,v]=u.useState(""),[w,C]=u.useState("desc"),k=dr(),N=u.useMemo(()=>o||"",[o]),O=u.useMemo(()=>[...s].sort((H,D)=>{const X=new Date(H.createdAt).getTime(),se=new Date(D.createdAt).getTime();return w==="asc"?X-se:se-X}),[s,w]);u.useEffect(()=>{N&&e(N).catch(()=>{})},[N,e]);const R=u.useCallback(async()=>{if(!(!c.trim()||!N))try{await r(N,c.trim()),d(""),l(!1)}catch{}},[c,N,r]),L=u.useCallback(async()=>{if(!(!g.trim()||!b))try{await t(b,g.trim()),h(!1)}catch{}},[g,b,t]),B=u.useCallback(()=>{l(!0)},[]),G=u.useCallback(()=>{l(!1)},[]),$=u.useCallback((P,H)=>{v(P),y(H),h(!0)},[]),z=u.useCallback(()=>{h(!1)},[]),Y=u.useCallback(P=>{k(`/customers/segments/${P}`)},[k]),M=u.useCallback((P,H,D)=>{P.stopPropagation(),$(H,D)},[$]),q=u.useCallback(()=>{C(P=>P==="asc"?"desc":"asc")},[]);return n.jsxs(Yt,{children:[n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-4",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Customer segments"}),n.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:"Organize customers into groups"})]}),n.jsx("button",{onClick:B,className:"px-3 py-1.5 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 transition-colors",children:"Create customer segment"})]})})}),n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsx("div",{className:"bg-white rounded border border-gray-200 overflow-hidden",children:a?n.jsx("div",{className:"p-4",children:n.jsx("p",{className:"text-sm text-gray-600",children:"Loading..."})}):s.length===0?n.jsx("div",{className:"p-6 text-center",children:n.jsx("p",{className:"text-sm text-gray-600",children:"No customer segments"})}):n.jsx(Pne,{segments:O,sortOrder:w,onSortToggle:q,onSegmentClick:Y,onEditClick:M})})})]}),n.jsx(Tne,{isOpen:i,name:c,storeId:N,onNameChange:d,onClose:G,onCreate:R}),n.jsx(Ane,{isOpen:p,editName:g,onNameChange:y,onClose:z,onSave:L})]})},Ine=({discounts:s})=>{const r=dr(),e=u.useCallback(t=>{r(`/discounts/amount-off-order/${t}`)},[r]);return s.length===0?null:n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsx("div",{className:"bg-white border border-gray-200 overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Code / Title"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Method"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Value"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Eligibility"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Min Requirement"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Combinations"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Status"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Created"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(t=>{const a=t.method==="discount-code"?t.discountCode:t.title,o=t.valueType==="percentage"?`${t.percentage??0}%`:`${t.fixedAmount??0}`,i=t.minimumPurchase==="minimum-amount"?`Min Amount ${t.minimumAmount??0}`:t.minimumPurchase==="minimum-quantity"?`Min Qty ${t.minimumQuantity??0}`:"None",l=`P:${t.productDiscounts?"Y":"N"} / O:${t.orderDiscounts?"Y":"N"} / S:${t.shippingDiscounts?"Y":"N"}`;return n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>e(t._id),children:[n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:a||"-"}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t.method}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:o}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t.eligibility}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:i}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:l}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t.status||"active"}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t.createdAt?new Date(t.createdAt).toLocaleDateString():"-"})]},t._id)})})]})})})},Rne=({discounts:s})=>{const r=dr(),e=u.useCallback(a=>{r(`/discounts/${a}`)},[r]),t=u.useCallback(a=>a?"Yes":"No",[]);return s.length===0?null:n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsx("div",{className:"bg-white border border-gray-200 overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Code / Title"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Method"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Value"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Applies to"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Eligibility"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Min Purchase"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Min Qty"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Product Disc."}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Order Disc."}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Shipping Disc."}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Total Uses Limit"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Limit Total Uses"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Status"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Created"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(a=>{const o=a.valueType==="percentage"?`${a.percentage??0}%`:`${a.fixedAmount??0}`,i=a.method==="discount-code"?a.discountCode:a.title;return n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>e(a._id),children:[n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:i||"-"}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:a.method}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:o}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:a.appliesTo}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:a.eligibility}),n.jsxs("td",{className:"px-3 py-2 text-sm text-gray-900",children:[a.minimumPurchase||"-",a.minimumPurchase==="minimum-amount"&&a.minimumAmount!==void 0?` (${a.minimumAmount})`:""]}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:a.minimumQuantity??"-"}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t(a.productDiscounts)}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t(a.orderDiscounts)}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t(a.shippingDiscounts)}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:a.totalUsesLimit??"-"}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t(a.limitTotalUses)}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:a.status||"active"}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:new Date(a.createdAt).toLocaleDateString()})]},a._id)})})]})})})},Dne=({discounts:s})=>{const r=dr(),e=u.useCallback(t=>{r(`/discounts/pyxgety/${t}`)},[r]);return s.length===0?null:n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsx("div",{className:"bg-white border border-gray-200 overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Code / Title"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Method"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Customer Buys"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Any Items From"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Gets Qty"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Gets From"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Value"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Eligibility"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Status"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Created"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(t=>{const a=t.method==="discount-code"?t.discountCode:t.title,o=t.discountedValue==="percentage"?`${t.discountedPercentage??0}%`:t.discountedValue==="amount"?`${t.discountedAmount??0}`:"Free";return n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>e(t._id),children:[n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:a||"-"}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t.method}),n.jsxs("td",{className:"px-3 py-2 text-sm text-gray-900",children:[t.customerBuys,t.customerBuys==="minimum-quantity"&&t.quantity?` (${t.quantity})`:t.customerBuys==="minimum-amount"&&t.amount?` (${t.amount})`:""]}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t.anyItemsFrom}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t.customerGetsQuantity}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t.customerGetsAnyItemsFrom}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:o}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t.eligibility}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t.status||"active"}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t.createdAt?new Date(t.createdAt).toLocaleDateString():"-"})]},t._id)})})]})})})},Lne=({onExport:s,onCreateDiscount:r})=>n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Discounts"}),n.jsxs("div",{className:"flex gap-2",children:[s&&n.jsx("button",{onClick:s,className:"px-3 py-1.5 bg-white text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors text-sm font-medium",children:"Export"}),n.jsx("button",{onClick:r,className:"px-3 py-1.5 bg-gray-900 text-white rounded hover:bg-gray-800 transition-colors text-sm font-medium",children:"Create discount"})]})]}),Fne=({discounts:s})=>{const r=dr(),e=u.useCallback(t=>{r(`/discounts/free-shipping/${t}`)},[r]);return s.length===0?null:n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsx("div",{className:"bg-white border border-gray-200 overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Code / Title"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Method"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Country Selection"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Exclude Rates"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Rate Limit"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Eligibility"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Min Requirement"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Combinations"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Status"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Created"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(t=>{const a=t.method==="discount-code"?t.discountCode:t.title,o=t.minimumPurchase==="minimum-amount"?`Min Amount ${t.minimumAmount??0}`:t.minimumPurchase==="minimum-quantity"?`Min Qty ${t.minimumQuantity??0}`:"None",i=`P:${t.productDiscounts?"Y":"N"} / O:${t.orderDiscounts?"Y":"N"}`;return n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>e(t._id),children:[n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:a||"-"}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t.method}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t.countrySelection}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t.excludeShippingRates?"Yes":"No"}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t.excludeShippingRates?t.shippingRateLimit??"-":"-"}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t.eligibility}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:o}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:i}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t.status||"active"}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t.createdAt?new Date(t.createdAt).toLocaleDateString():"-"})]},t._id)})})]})})})},Bne=({id:s,label:r,isActive:e,onClick:t})=>n.jsx("button",{onClick:()=>t(s),className:`px-3 py-1.5 text-sm font-medium transition-colors ${e?"text-gray-900 border-b-2 border-gray-900":"text-gray-600 hover:text-gray-900"}`,children:r}),ek=({tabs:s,activeTab:r,onTabChange:e})=>n.jsx("div",{className:"flex gap-1 border-b border-gray-200",children:s.map(t=>n.jsx(Bne,{id:t.id,label:t.label,isActive:r===t.id,onClick:e},t.id))}),rM=u.createContext(void 0),zne=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),[l,c]=u.useState(null),d=u.useCallback(()=>i(null),[]),p=u.useCallback(async y=>{try{a(!0),i(null);const b=await nt.post("/amount-off-order-discounts",y);return b.data?.success&&b.data?.data&&e(v=>[b.data.data,...v]),b.data}catch(b){const v=b?.response?.data?.error||b?.message||"Failed to create Amount Off Order discount";throw i(v),new Error(v)}finally{a(!1)}},[]),h=u.useCallback(async(y,b)=>{try{a(!0),i(null);const v=new URLSearchParams;b?.page&&v.append("page",String(b.page)),b?.limit&&v.append("limit",String(b.limit)),b?.status&&v.append("status",b.status),b?.method&&v.append("method",b.method);const w=await nt.get(`/amount-off-order-discounts/store/${y}${v.toString()?`?${v.toString()}`:""}`);return w.data?.success&&(e(w.data.data||[]),c(w.data.pagination||null)),w.data}catch(v){const w=v?.response?.data?.error||v?.message||"Failed to fetch Amount Off Order discounts";throw i(w),new Error(w)}finally{a(!1)}},[]),g=u.useMemo(()=>({discounts:r,loading:t,error:o,pagination:l,createDiscount:p,fetchDiscountsByStoreId:h,clearError:d,setDiscounts:e}),[r,t,o,l,p,h,d]);return n.jsx(rM.Provider,{value:g,children:s})},tk=()=>{const s=u.useContext(rM);if(!s)throw new Error("useAmountOffOrderDiscount must be used within an AmountOffOrderDiscountProvider");return s},nM=u.createContext(void 0),$ne=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),[l,c]=u.useState(null),d=u.useCallback(()=>i(null),[]),p=u.useCallback(async y=>{try{a(!0),i(null);const b=await nt.post("/buy-x-get-y-discounts",y);return b.data?.success&&b.data?.data&&e(v=>[b.data.data,...v]),b.data}catch(b){const v=b?.response?.data?.error||b?.message||"Failed to create Buy X Get Y discount";throw i(v),new Error(v)}finally{a(!1)}},[]),h=u.useCallback(async(y,b)=>{try{a(!0),i(null);const v=new URLSearchParams;b?.page&&v.append("page",String(b.page)),b?.limit&&v.append("limit",String(b.limit)),b?.status&&v.append("status",b.status),b?.method&&v.append("method",b.method);const w=await nt.get(`/buy-x-get-y-discounts/store/${y}${v.toString()?`?${v.toString()}`:""}`);return w.data?.success&&(e(w.data.data||[]),c(w.data.pagination||null)),w.data}catch(v){const w=v?.response?.data?.error||v?.message||"Failed to fetch Buy X Get Y discounts";throw i(w),new Error(w)}finally{a(!1)}},[]),g=u.useMemo(()=>({discounts:r,loading:t,error:o,pagination:l,createDiscount:p,fetchDiscountsByStoreId:h,clearError:d,setDiscounts:e}),[r,t,o,l,p,h,d]);return n.jsx(nM.Provider,{value:g,children:s})},rk=()=>{const s=u.useContext(nM);if(!s)throw new Error("useBuyXGetYDiscount must be used within a BuyXGetYDiscountProvider");return s},sM=u.createContext(void 0),Une=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),[l,c]=u.useState(null),d=u.useCallback(()=>i(null),[]),p=u.useCallback(async y=>{try{a(!0),i(null);const b=await nt.post("/free-shipping-discounts",y);return b.data?.success&&b.data?.data&&e(v=>[b.data.data,...v]),b.data}catch(b){const v=b?.response?.data?.error||b?.message||"Failed to create Free Shipping discount";throw i(v),new Error(v)}finally{a(!1)}},[]),h=u.useCallback(async(y,b)=>{try{a(!0),i(null);const v=new URLSearchParams;b?.page&&v.append("page",String(b.page)),b?.limit&&v.append("limit",String(b.limit)),b?.status&&v.append("status",b.status),b?.method&&v.append("method",b.method);const w=await nt.get(`/free-shipping-discounts/store/${y}${v.toString()?`?${v.toString()}`:""}`);return w.data?.success&&(e(w.data.data||[]),c(w.data.pagination||null)),w.data}catch(v){const w=v?.response?.data?.error||v?.message||"Failed to fetch Free Shipping discounts";throw i(w),new Error(w)}finally{a(!1)}},[]),g=u.useMemo(()=>({discounts:r,loading:t,error:o,pagination:l,createDiscount:p,fetchDiscountsByStoreId:h,clearError:d,setDiscounts:e}),[r,t,o,l,p,h,d]);return n.jsx(sM.Provider,{value:g,children:s})},nk=()=>{const s=u.useContext(sM);if(!s)throw new Error("useFreeShippingDiscount must be used within a FreeShippingDiscountProvider");return s},Vne=()=>{const s=dr(),{discounts:r,error:e,fetchDiscountsByStoreId:t}=I2(),{discounts:a,loading:o,error:i,fetchDiscountsByStoreId:l}=rk(),{discounts:c,loading:d,error:p,fetchDiscountsByStoreId:h}=tk(),{discounts:g,loading:y,error:b,fetchDiscountsByStoreId:v}=nk(),{activeStoreId:w}=Ur(),[C,k]=u.useState("amount-off-products");u.useEffect(()=>{(async()=>{if(w)try{C==="amount-off-products"?await t(w,{page:1,limit:10}):C==="buy-x-get-y"?await l(w,{page:1,limit:10}):C==="amount-off-order"?await h(w,{page:1,limit:10}):C==="free-shipping"&&await v(w,{page:1,limit:10})}catch{}})()},[w,C,t,l,h,v]);const N=u.useCallback(()=>{s("/discounts/select-discount-to-create")},[s]),O=u.useCallback(L=>{k(L)},[]),R=[{id:"amount-off-products",label:"Amount off products"},{id:"buy-x-get-y",label:"Buy X Get Y"},{id:"amount-off-order",label:"Amount off order"},{id:"free-shipping",label:"Free shipping"}];return n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsx(Lne,{onCreateDiscount:N}),n.jsx("div",{className:"mt-3",children:n.jsx(ek,{tabs:R,activeTab:C,onTabChange:O})})]})}),C==="amount-off-products"&&e&&n.jsx("div",{className:"max-w-7xl mx-auto mt-3 px-4",children:n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-800 px-3 py-2 text-sm",children:e})}),C==="buy-x-get-y"&&i&&n.jsx("div",{className:"max-w-7xl mx-auto mt-3 px-4",children:n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-800 px-3 py-2 text-sm",children:i})}),C==="amount-off-order"&&p&&n.jsx("div",{className:"max-w-7xl mx-auto mt-3 px-4",children:n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-800 px-3 py-2 text-sm",children:p})}),C==="free-shipping"&&b&&n.jsx("div",{className:"max-w-7xl mx-auto mt-3 px-4",children:n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-800 px-3 py-2 text-sm",children:b})}),C==="amount-off-products"&&r.length>0&&n.jsx(Rne,{discounts:r}),C==="buy-x-get-y"&&a.length>0&&n.jsx(Dne,{discounts:a}),C==="amount-off-order"&&c.length>0&&n.jsx(Ine,{discounts:c}),C==="free-shipping"&&g.length>0&&n.jsx(Fne,{discounts:g}),C==="amount-off-products"&&r.length===0&&n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsx("p",{className:"text-sm text-gray-600",children:"No amount off products discount yet"})}),C==="buy-x-get-y"&&a.length===0&&n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsx("p",{className:"text-sm text-gray-600",children:"No buy x get y discounts yet"})}),C==="amount-off-order"&&c.length===0&&n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsx("p",{className:"text-sm text-gray-600",children:"No amount off order discounts yet"})}),C==="free-shipping"&&g.length===0&&n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsx("p",{className:"text-sm text-gray-600",children:"No free shipping discounts yet"})})]})})},Hne=({isOpen:s,isDeactivating:r,onCancel:e,onConfirm:t})=>n.jsx(en,{open:s,onClose:e,title:"Deactivate Gift Card",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:e,disabled:r,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors disabled:opacity-50",children:"No"}),n.jsx("button",{onClick:t,disabled:r,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Deactivating...":"Yes, Deactivate"})]}),children:n.jsx("p",{className:"text-sm text-gray-700",children:"Are you sure you want to deactivate this gift card? This action will make the gift card inactive and prevent further operations on it."})}),Wne=({isOpen:s,expirationOption:r,newExpirationDate:e,isUpdating:t,onClose:a,onExpirationOptionChange:o,onExpirationDateChange:i,onSave:l,hasChanges:c})=>n.jsxs(en,{open:s,onClose:a,title:"Edit Gift Card Expiration",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:a,disabled:t,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:l,disabled:!c()||t,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:t?"Updating...":"Done"})]}),children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Expiration Date Options"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center cursor-pointer",children:[n.jsx("input",{type:"radio",name:"expirationOption",value:"no-expiration",checked:r==="no-expiration",onChange:o,className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400 cursor-pointer"}),n.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"No expiration date"})]}),n.jsxs("label",{className:"flex items-center cursor-pointer",children:[n.jsx("input",{type:"radio",name:"expirationOption",value:"set-expiration",checked:r==="set-expiration",onChange:o,className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400 cursor-pointer"}),n.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Set expiration date"})]})]})]}),r==="set-expiration"&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{htmlFor:"expirationDate",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Expiration Date"}),n.jsx("input",{id:"expirationDate",type:"date",value:e,onChange:d=>i(d.target.value),min:new Date().toISOString().split("T")[0],className:"w-full px-3 py-1.5 border border-gray-200 rounded focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors text-sm"})]})]}),qne=({onBack:s,onDeactivate:r,isActive:e})=>n.jsx("div",{className:"mb-6 border-b border-gray-200 pb-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:s,className:"flex items-center gap-1.5 px-3 py-1.5 text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:n.jsx(gn,{className:"w-4 h-4"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Gift Card Details"}),n.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:"Manage and view gift card information"})]})]}),n.jsxs("button",{onClick:r,disabled:!e,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(Xs,{className:"w-4 h-4"}),"Deactivate"]})]})}),Gne=({giftCard:s,onEdit:r})=>n.jsx("div",{className:"md:col-span-4",children:n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-4 flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center mr-2",children:n.jsx(qO,{className:"w-4 h-4 text-gray-600"})}),n.jsx("h3",{className:"text-base font-medium text-gray-900",children:"Gift Card"})]}),s.isActive&&n.jsx("button",{onClick:r,className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors",children:n.jsx(Bo,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Code"}),n.jsx("p",{className:"text-lg font-medium font-mono tracking-wide break-all text-gray-900",children:s.code})]}),n.jsxs("div",{className:"mb-4 flex items-center",children:[n.jsx(b2,{className:"w-5 h-5 mr-2 text-gray-600"}),n.jsxs("span",{className:"text-xl font-medium text-gray-900",children:["",s.initialValue]})]}),n.jsx("div",{className:"mt-auto pt-3 border-t border-gray-200",children:n.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${s.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.isActive?"Active":"Inactive"})})]})}),Kne=({giftCard:s})=>n.jsx("div",{className:"md:col-span-4",children:n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-4 h-full",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center mr-2",children:n.jsx(qO,{className:"w-4 h-4 text-gray-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Gift Card Information"}),n.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:"Detailed information about this gift card"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"pb-3 border-b border-gray-200",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Gift Card Code"}),n.jsx("p",{className:"text-sm font-medium font-mono tracking-wide text-gray-900",children:s.code})]}),n.jsxs("div",{className:"pb-3 border-b border-gray-200",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Initial Value"}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(b2,{className:"w-4 h-4 text-gray-600 mr-1.5"}),n.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",s.initialValue]})]})]}),n.jsxs("div",{className:"pb-3 border-b border-gray-200",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Status"}),n.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${s.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.isActive?"Active":"Inactive"})]}),n.jsxs("div",{className:"pb-3 border-b border-gray-200",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Created Date"}),n.jsxs("div",{className:"flex items-center",children:[n.jsx($1,{className:"w-3.5 h-3.5 text-gray-600 mr-1.5"}),n.jsx("span",{className:"text-sm text-gray-700",children:new Date(s.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]}),s.expirationDate&&n.jsxs("div",{className:"pb-3 border-b border-gray-200",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Expiration Date"}),n.jsxs("div",{className:"flex items-center",children:[n.jsx($1,{className:"w-3.5 h-3.5 text-gray-600 mr-1.5"}),n.jsx("span",{className:"text-sm text-gray-700",children:new Date(s.expirationDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Last Updated"}),n.jsxs("div",{className:"flex items-center",children:[n.jsx($1,{className:"w-3.5 h-3.5 text-gray-600 mr-1.5"}),n.jsx("span",{className:"text-sm text-gray-700",children:new Date(s.updatedAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]})]})]})}),Yne=({giftCard:s,isEditingNotes:r,editedNotes:e,isUpdatingNotes:t,onEditNotes:a,onCancelEditNotes:o,onSaveNotes:i,onNotesChange:l})=>n.jsx("div",{className:"md:col-span-4",children:n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-4 h-full",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center mr-2",children:n.jsx(Bo,{className:"w-4 h-4 text-gray-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Notes"}),n.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:"Additional information about this gift card"})]})]}),!r&&s.isActive&&n.jsx("button",{onClick:a,className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors",children:n.jsx(Bo,{className:"w-4 h-4"})})]}),r?n.jsxs("div",{children:[n.jsx("textarea",{value:e,onChange:c=>l(c.target.value),rows:4,placeholder:"Enter notes for this gift card...",className:"w-full px-3 py-2 border border-gray-200 rounded focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors resize-none mb-3 text-sm"}),n.jsxs("div",{className:"flex gap-2 justify-end",children:[n.jsx("button",{onClick:o,disabled:t,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:i,disabled:t,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 rounded hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Saving...":"Save"})]})]}):n.jsx("div",{className:"p-3 bg-gray-50 rounded border border-gray-200 min-h-[100px]",children:s.notes?n.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap leading-relaxed",children:s.notes}):n.jsx("p",{className:"text-sm text-gray-500 italic text-center py-6",children:"No notes available for this gift card"})})]})}),Zne=({isOpen:s,timelineLoading:r,onCancel:e,onConfirm:t})=>n.jsx(en,{open:s,onClose:e,title:"Delete Timeline Entry",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:e,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"No"}),n.jsx("button",{onClick:t,disabled:r,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Yes, Delete"})]}),children:n.jsx("p",{className:"text-sm text-gray-700",children:"Do you really want to delete this timeline comment? This action cannot be undone."})}),Xne=({comment:s,onCommentChange:r,onPostComment:e})=>n.jsx("div",{className:"mb-4",children:n.jsxs("div",{className:"relative",children:[n.jsx("textarea",{value:s,onChange:t=>r(t.target.value),rows:3,placeholder:"Add a comment to this gift card...",className:"w-full px-3 py-2 pr-20 border border-gray-200 rounded focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors resize-none text-sm"}),n.jsxs("button",{onClick:e,disabled:!s.trim(),className:"absolute bottom-2 right-2 flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium text-white bg-gray-900 rounded hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:[n.jsx(YO,{className:"w-3.5 h-3.5"}),"Post"]})]})}),Qne=({entry:s,editingTimelineId:r,editComment:e,onEditCommentChange:t,onEditTimeline:a,onDeleteTimeline:o,onCancelEdit:i,onSaveEdit:l})=>{const c=r===s._id;return n.jsxs("div",{className:`p-3 rounded border ${s.type==="event"?"bg-blue-50 border-blue-200":"bg-white border-gray-200"}`,children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${s.type==="event"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-700"}`,children:s.type==="event"?"Event":"Comment"}),n.jsx("span",{className:"text-xs text-gray-600",children:new Date(s.createdAt).toLocaleString()})]}),!c&&n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{onClick:()=>a(s._id,s.comment),className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors",children:n.jsx(Bo,{className:"w-3.5 h-3.5"})}),n.jsx("button",{onClick:()=>o(s._id),className:"p-1 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded transition-colors",children:n.jsx(Xs,{className:"w-3.5 h-3.5"})})]})]}),c?n.jsxs("div",{children:[n.jsx("textarea",{value:e,onChange:d=>t(d.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-200 rounded focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors resize-none mb-3 text-sm"}),n.jsxs("div",{className:"flex gap-2 justify-end",children:[n.jsx("button",{onClick:i,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:l,disabled:!e.trim(),className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 rounded hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Save"})]})]}):n.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:s.comment})]})},Jne=({timelineEntries:s,editingTimelineId:r,editComment:e,onEditCommentChange:t,onEditTimeline:a,onDeleteTimeline:o,onCancelEdit:i,onSaveEdit:l})=>n.jsx("div",{className:"flex flex-col gap-4",children:s.map(c=>n.jsx(Qne,{entry:c,editingTimelineId:r,editComment:e,onEditCommentChange:t,onEditTimeline:a,onDeleteTimeline:o,onCancelEdit:i,onSaveEdit:l},c._id))}),ese=({comment:s,onCommentChange:r,onPostComment:e,timelineEntries:t,timelineLoading:a,timelineError:o,editingTimelineId:i,editComment:l,onEditCommentChange:c,onEditTimeline:d,onDeleteTimeline:p,onCancelEdit:h,onSaveEdit:g,deleteDialogOpen:y,onConfirmDelete:b,onCancelDelete:v})=>n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"mt-6",children:n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-4",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center mr-2",children:n.jsx(w2,{className:"w-4 h-4 text-gray-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Timeline"}),n.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:"Track gift card activities and comments"})]})]}),n.jsx(Xne,{comment:s,onCommentChange:r,onPostComment:e}),a?n.jsx("div",{className:"flex justify-center items-center py-6",children:n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-gray-900"})}):o?n.jsx("div",{className:"mb-3 bg-red-50 border border-red-200 text-red-700 px-3 py-2 rounded text-sm",children:o}):t.length===0?n.jsx("div",{className:"p-4 bg-gray-50 rounded border border-dashed border-gray-300",children:n.jsx("p",{className:"text-sm text-gray-500 text-center",children:"No timeline entries yet. Be the first to add a comment!"})}):n.jsx(Jne,{timelineEntries:t,editingTimelineId:i,editComment:l,onEditCommentChange:c,onEditTimeline:d,onDeleteTimeline:p,onCancelEdit:h,onSaveEdit:g})]})}),n.jsx(Zne,{isOpen:y,timelineLoading:a,onCancel:v,onConfirm:b})]}),aM=u.createContext(void 0),tse=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async b=>{try{a(!0),i(null);const v=await nt.get(`/gift-card-timeline/gift-card/${b}`),{success:w,data:C}=v.data;w?e(C):i("Failed to fetch timeline entries")}catch(v){const w=v?.response?.data?.message||v?.message||"Failed to fetch timeline entries";i(w),console.error("Error fetching timeline entries:",v)}finally{a(!1)}},[]),c=u.useCallback(async b=>{try{a(!0),i(null);const v=await nt.post("/gift-card-timeline",b),{success:w,data:C}=v.data;if(w)return e(k=>[C,...k]),C;throw new Error("Failed to create timeline entry")}catch(v){const w=v?.response?.data?.message||v?.message||"Failed to create timeline entry";throw i(w),console.error("Error creating timeline entry:",v),v}finally{a(!1)}},[]),d=u.useCallback(async(b,v)=>{try{a(!0),i(null);const w=await nt.put(`/gift-card-timeline/${b}`,v),{success:C,data:k}=w.data;if(C)return e(N=>N.map(O=>O._id===b?k:O)),k;throw new Error("Failed to update timeline entry")}catch(w){const C=w?.response?.data?.message||w?.message||"Failed to update timeline entry";throw i(C),console.error("Error updating timeline entry:",w),w}finally{a(!1)}},[]),p=u.useCallback(async b=>{try{a(!0),i(null);const v=await nt.delete(`/gift-card-timeline/${b}`),{success:w}=v.data;if(w)e(C=>C.filter(k=>k._id!==b));else throw new Error("Failed to delete timeline entry")}catch(v){const w=v?.response?.data?.message||v?.message||"Failed to delete timeline entry";throw i(w),console.error("Error deleting timeline entry:",v),v}finally{a(!1)}},[]),h=u.useCallback(()=>{i(null)},[]),g=u.useCallback(()=>{e([]),i(null),a(!1)},[]),y={timelineEntries:r,loading:t,error:o,getTimelineByGiftCardId:l,createTimelineEntry:c,updateTimelineEntry:d,deleteTimelineEntry:p,clearError:h,clearTimelineEntries:g};return n.jsx(aM.Provider,{value:y,children:s})},rse=()=>{const s=u.useContext(aM);if(s===void 0)throw new Error("useGiftCardTimeline must be used within a GiftCardTimelineProvider");return s},oM=u.createContext(void 0),nse=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async b=>{try{a(!0),i(null);const v=await nt.get(`/gift-cards/store/${b}`),{success:w,data:C}=v.data;w?e(C):i("Failed to fetch gift cards")}catch(v){const w=v?.response?.data?.message||v?.message||"Failed to fetch gift cards";i(w),console.error("Error fetching gift cards:",v)}finally{a(!1)}},[]),c=u.useCallback(async b=>{try{a(!0),i(null);const v=await nt.post("/gift-cards",b),{success:w,data:C}=v.data;if(w)return e(k=>[C,...k]),C;throw new Error("Failed to create gift card")}catch(v){const w=v?.response?.data?.message||v?.message||"Failed to create gift card";throw i(w),console.error("Error creating gift card:",v),v}finally{a(!1)}},[]),d=u.useCallback(async(b,v)=>{try{a(!0),i(null);const w=await nt.put(`/gift-cards/${b}`,v),{success:C,data:k}=w.data;if(C)return e(N=>N.map(O=>O._id===b?k:O)),k;throw new Error("Failed to update gift card")}catch(w){const C=w?.response?.data?.message||w?.message||"Failed to update gift card";throw i(C),console.error("Error updating gift card:",w),w}finally{a(!1)}},[]),p=u.useCallback(async b=>{try{a(!0),i(null);const v=await nt.delete(`/gift-cards/${b}`),{success:w}=v.data;if(w)e(C=>C.filter(k=>k._id!==b));else throw new Error("Failed to delete gift card")}catch(v){const w=v?.response?.data?.message||v?.message||"Failed to delete gift card";throw i(w),console.error("Error deleting gift card:",v),v}finally{a(!1)}},[]),h=u.useCallback(()=>{i(null)},[]),g=u.useCallback(()=>{e([]),i(null),a(!1)},[]),y={giftCards:r,loading:t,error:o,fetchGiftCardsByStoreId:l,createGiftCard:c,updateGiftCard:d,deleteGiftCard:p,clearError:h,clearGiftCards:g};return n.jsx(oM.Provider,{value:y,children:s})},sk=()=>{const s=u.useContext(oM);if(s===void 0)throw new Error("useGiftCards must be used within a GiftCardsProvider");return s},sse=()=>{const{giftCardId:s}=ks(),r=dr(),{giftCards:e,loading:t,error:a,fetchGiftCardsByStoreId:o,updateGiftCard:i}=sk(),{activeStoreId:l}=Ur(),{timelineEntries:c,loading:d,error:p,getTimelineByGiftCardId:h,deleteTimelineEntry:g,createTimelineEntry:y,updateTimelineEntry:b}=rse(),v=u.useMemo(()=>e.find(We=>We._id===s),[e,s]),[w,C]=u.useState(""),[k,N]=u.useState(!1),[O,R]=u.useState(null),[L,B]=u.useState(null),[G,$]=u.useState(""),[z,Y]=u.useState(!1),[M,q]=u.useState("no-expiration"),[P,H]=u.useState(""),[D,X]=u.useState(!1),[se,Q]=u.useState(!1),[xe,K]=u.useState(""),[Z,ve]=u.useState(!1),[ae,Se]=u.useState(!1),[Pe,$e]=u.useState(!1);u.useEffect(()=>{l&&e.length===0&&o(l)},[l,e.length,o]),u.useEffect(()=>{s&&h(s)},[s,h]);const we=u.useCallback(()=>{r("/products/gift-cards")},[r]),Ae=u.useCallback(()=>{v?.expirationDate?(q("set-expiration"),H(v.expirationDate.split("T")[0])):(q("no-expiration"),H("")),Y(!0)},[v]),ze=u.useCallback(()=>{Se(!0)},[]),Ge=u.useCallback(We=>{R(We),N(!0)},[]),Ue=u.useCallback(async()=>{if(O)try{await g(O),N(!1),R(null)}catch(We){console.error("Error deleting timeline entry:",We)}},[O,g]),ht=u.useCallback(()=>{N(!1),R(null)},[]),ee=u.useCallback(async()=>{if(!(!w.trim()||!s))try{await y({giftCardId:s,comment:w.trim()}),C("")}catch(We){console.error("Error posting comment:",We)}},[w,s,y]),ue=u.useCallback((We,Qe)=>{B(We),$(Qe)},[]),Oe=u.useCallback(async()=>{if(!(!L||!G.trim()))try{await b(L,{comment:G.trim()}),B(null),$("")}catch(We){console.error("Error updating timeline entry:",We)}},[L,G,b]),J=u.useCallback(()=>{B(null),$("")},[]),I=u.useCallback(()=>{Y(!1),q("no-expiration"),H(""),X(!1)},[]),V=u.useCallback(We=>{q(We.target.value),We.target.value==="no-expiration"&&H("")},[]),re=u.useCallback(async()=>{if(v){X(!0);try{let We={};M==="no-expiration"?We.expirationDate=void 0:P&&(We.expirationDate=new Date(P).toISOString()),(v.expirationDate?v.expirationDate.split("T")[0]:null)!==(M==="no-expiration"?null:P)&&await i(v._id,We),I()}catch(We){console.error("Error updating gift card:",We)}finally{X(!1)}}},[v,M,P,i,I]),pe=u.useCallback(()=>v?(v.expirationDate?v.expirationDate.split("T")[0]:null)!==(M==="no-expiration"?null:P):!1,[v,M,P]),ge=u.useCallback(()=>{K(v?.notes||""),Q(!0)},[v]),Ce=u.useCallback(()=>{K(""),Q(!1)},[]),he=u.useCallback(async()=>{if(v){ve(!0);try{await i(v._id,{notes:xe}),Q(!1),K("")}catch(We){console.error("Error updating notes:",We)}finally{ve(!1)}}},[v,xe,i]),ie=u.useCallback(()=>{Se(!1)},[]),Fe=u.useCallback(async()=>{if(v){$e(!0);try{await i(v._id,{isActive:!1}),Se(!1)}catch(We){console.error("Error deactivating gift card:",We)}finally{$e(!1)}}},[v,i]);return t?n.jsx(Yt,{children:n.jsx("div",{className:"min-h-screen p-4",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsx("div",{className:"flex justify-center items-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})})})})}):a?n.jsx(Yt,{children:n.jsx("div",{className:"min-h-screen p-4",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 text-red-700 px-3 py-2 rounded text-sm",children:a}),n.jsx("button",{onClick:we,className:"mt-3 px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:"Back to Gift Cards"})]})})}):v?n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsxs("div",{className:"max-w-7xl mx-auto py-6 px-4",children:[n.jsx(qne,{onBack:we,onDeactivate:ze,isActive:v.isActive}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6 mb-6",children:[n.jsx(Gne,{giftCard:v,onEdit:Ae}),n.jsx(Kne,{giftCard:v}),n.jsx(Yne,{giftCard:v,isEditingNotes:se,editedNotes:xe,isUpdatingNotes:Z,onEditNotes:ge,onCancelEditNotes:Ce,onSaveNotes:he,onNotesChange:K})]}),n.jsx(ese,{comment:w,onCommentChange:C,onPostComment:ee,timelineEntries:c,timelineLoading:d,timelineError:p,editingTimelineId:L,editComment:G,onEditCommentChange:$,onEditTimeline:ue,onDeleteTimeline:Ge,onCancelEdit:J,onSaveEdit:Oe,deleteDialogOpen:k,onConfirmDelete:Ue,onCancelDelete:ht})]}),n.jsx(Wne,{isOpen:z,giftCard:v,expirationOption:M,newExpirationDate:P,isUpdating:D,onClose:I,onExpirationOptionChange:V,onExpirationDateChange:H,onSave:re,hasChanges:pe}),n.jsx(Hne,{isOpen:ae,isDeactivating:Pe,onCancel:ie,onConfirm:Fe})]})}):n.jsx(Yt,{children:n.jsx("div",{className:"min-h-screen p-4",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsx("div",{className:"mt-4 bg-yellow-50 border border-yellow-200 text-yellow-700 px-3 py-2 rounded text-sm",children:"Gift card not found"}),n.jsx("button",{onClick:we,className:"mt-3 px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:"Back to Gift Cards"})]})})})},ase=({giftCard:s,onClick:r})=>{const e=()=>{r(s._id)};return n.jsxs("tr",{onClick:e,className:"hover:bg-gray-50 cursor-pointer transition-colors",children:[n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium text-gray-900",children:n.jsx("div",{className:"font-mono",children:s.code})}),n.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-700",children:["",s.initialValue.toFixed(2)]}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:n.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${s.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.isActive?"Active":"Inactive"})}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-600",children:s.expirationDate?new Date(s.expirationDate).toLocaleDateString():""}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-600",children:new Date(s.createdAt).toLocaleDateString()})]})},ose=({giftCards:s,onGiftCardClick:r,loading:e=!1,sortOrder:t,onSortToggle:a})=>n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Gift Card Code"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Initial Value"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Status"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Expiration Date"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:a?n.jsxs("button",{onClick:a,className:"flex items-center gap-1 hover:text-gray-900 transition-colors cursor-pointer",children:["Created Date",t&&n.jsx("span",{className:"inline-flex items-center",children:t==="asc"?n.jsx(cm,{className:"w-3.5 h-3.5"}):n.jsx(lm,{className:"w-3.5 h-3.5"})})]}):n.jsx("span",{children:"Created Date"})})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e?n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"px-3 py-6 text-center text-sm text-gray-600",children:"Loading gift cards..."})}):s.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"px-3 py-6 text-center text-sm text-gray-600",children:"No gift cards found"})}):s.map(o=>n.jsx(ase,{giftCard:o,onClick:r},o._id))})]})}),ise=()=>{const s=dr(),{giftCards:r,loading:e,error:t,fetchGiftCardsByStoreId:a}=sk(),{activeStoreId:o}=Ur(),[i,l]=u.useState("desc"),c=u.useCallback(()=>{s("/products/gift-cards/new")},[s]),d=u.useCallback(g=>{s(`/products/gift-cards/${g}`)},[s]);u.useEffect(()=>{o&&a(o)},[o,a]);const p=u.useMemo(()=>[...r].sort((y,b)=>{const v=new Date(y.createdAt).getTime(),w=new Date(b.createdAt).getTime();return i==="asc"?v-w:w-v}),[r,i]),h=u.useCallback(()=>{l(g=>g==="asc"?"desc":"asc")},[]);return n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-4",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Gift Cards"}),n.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:"Manage your gift cards and create new ones"})]}),r.length>0&&n.jsxs("button",{onClick:c,className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 transition-colors",children:[n.jsx(On,{className:"w-4 h-4"}),"Create Gift Card"]})]})})}),n.jsxs("div",{className:"max-w-7xl mx-auto py-6 px-4",children:[e&&n.jsx("div",{className:"flex justify-center items-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}),t&&n.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-3 py-2 rounded text-sm",children:t}),!e&&!t&&n.jsx(n.Fragment,{children:r.length===0?n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-6 text-center",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-2",children:"No gift cards yet"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Create your first gift card to get started"}),n.jsxs("button",{onClick:c,className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 transition-colors",children:[n.jsx(On,{className:"w-4 h-4"}),"Create Gift Card"]})]}):n.jsxs("div",{className:"bg-white rounded border border-gray-200",children:[n.jsx("div",{className:"p-3 border-b border-gray-200 bg-gray-50",children:n.jsxs("h2",{className:"text-base font-medium text-gray-900",children:[r.length," Gift Card",r.length!==1?"s":""]})}),n.jsx(ose,{giftCards:p,onGiftCardClick:d,sortOrder:i,onSortToggle:h})]})})]})]})})},lse=()=>{const[s,r]=u.useState(!1),[e,t]=u.useState(!1),[a,o]=u.useState(!1),[i,l]=u.useState(!1),[c,d]=u.useState("Channels"),[p,h]=u.useState("Daily"),[g,y]=u.useState("Last non-direct click"),[b,v]=u.useState("Sessions by top 5 channels over time"),w=u.useCallback(()=>{r(D=>!D)},[]),C=u.useCallback(()=>{r(!1)},[]),k=u.useCallback(()=>{t(D=>!D)},[]),N=u.useCallback(()=>{t(!1)},[]),O=u.useCallback(()=>{o(D=>!D)},[]),R=u.useCallback(()=>{o(!1)},[]),L=u.useCallback(()=>{l(D=>!D)},[]),B=u.useCallback(()=>{l(!1)},[]),G=u.useCallback(D=>{d(D),r(!1)},[]),$=u.useCallback(D=>{h(D),t(!1)},[]),z=u.useCallback(D=>{y(D),o(!1)},[]),Y=u.useCallback(D=>{v(D),l(!1)},[]),M=["Channels","Campaign activities"],q=["Daily","Hourly","Weekly"],P=["Last non-direct click","Last click","First click","Any click","Linear"],H=["Sessions by top 5 channels over time","Sales by top 5 channels over time","Orders by top 5 channels over time","AOV by top 5 channels over time","Orders from new customers by top 5 channels over time","Orders from returning customers by top 5 channels over time"];return n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Attribution"})}),n.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[n.jsxs("div",{className:"relative",children:[n.jsxs("button",{className:"flex items-center gap-1 px-3 py-1.5 rounded text-sm font-medium bg-white text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",onClick:w,children:[c,n.jsx(Ys,{className:"w-3.5 h-3.5"})]}),s&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:C}),n.jsxs("div",{className:"absolute top-full left-0 mt-1 w-[220px] bg-white border border-gray-200 shadow-lg z-20",children:[n.jsx("div",{className:"px-3 py-2 border-b border-gray-200",children:n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Channels"})}),M.map(D=>n.jsx("button",{onClick:()=>G(D),className:`w-full text-left px-3 py-1.5 text-sm hover:bg-gray-50 transition-colors ${c===D?"bg-gray-100 text-gray-900":"text-gray-700"}`,children:D},D))]})]})]}),n.jsx("button",{className:"px-3 py-1.5 bg-gray-900 text-white rounded hover:bg-gray-800 transition-colors text-sm font-medium",children:"Last 30 days"}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{className:"flex items-center gap-1 px-3 py-1.5 rounded text-sm font-medium bg-white text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",onClick:k,children:[p,n.jsx(Ys,{className:"w-3.5 h-3.5"})]}),e&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:N}),n.jsx("div",{className:"absolute top-full left-0 mt-1 w-[220px] bg-white border border-gray-200 shadow-lg z-20",children:q.map(D=>n.jsx("button",{onClick:()=>$(D),className:`w-full text-left px-3 py-1.5 text-sm hover:bg-gray-50 transition-colors ${p===D?"bg-gray-100 text-gray-900":"text-gray-700"}`,children:D},D))})]})]}),n.jsx("button",{className:"px-3 py-1.5 bg-white text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors text-sm font-medium",children:"Print"}),n.jsx("button",{className:"px-3 py-1.5 bg-white text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors text-sm font-medium",children:"Export"}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{className:"flex items-center gap-1 px-3 py-1.5 rounded text-sm font-medium bg-white text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",onClick:O,children:[g,n.jsx(Ys,{className:"w-3.5 h-3.5"})]}),a&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:R}),n.jsxs("div",{className:"absolute top-full left-0 mt-1 w-[260px] bg-white border border-gray-200 shadow-lg z-20",children:[n.jsx("div",{className:"px-3 py-2 border-b border-gray-200",children:n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Attribution model"})}),P.map(D=>n.jsx("button",{onClick:()=>z(D),className:`w-full text-left px-3 py-1.5 text-sm hover:bg-gray-50 transition-colors ${g===D?"bg-gray-100 text-gray-900":"text-gray-700"}`,children:D},D)),n.jsx("div",{className:"px-3 py-2 border-t border-gray-200",children:n.jsxs("p",{className:"text-xs text-gray-600",children:["A 30-day attribution window applies."," ",n.jsx("button",{className:"text-gray-700 hover:text-gray-900 underline",children:"Learn more"})]})})]})]})]})]})]})}),n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx("div",{className:"p-4 border border-gray-200 bg-white",children:n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsx("div",{className:"flex items-center",children:n.jsxs("div",{className:"relative",children:[n.jsxs("button",{className:"flex items-center gap-1 px-3 py-1.5 rounded text-sm font-medium bg-white text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",onClick:L,children:[b,n.jsx(Ys,{className:"w-3.5 h-3.5"})]}),i&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:B}),n.jsx("div",{className:"absolute top-full left-0 mt-1 w-[400px] bg-white border border-gray-200 shadow-lg z-20",children:H.map(D=>n.jsx("button",{onClick:()=>Y(D),className:`w-full text-left px-3 py-1.5 text-sm hover:bg-gray-50 transition-colors ${b===D?"bg-gray-100 text-gray-900":"text-gray-700"}`,children:D},D))})]})]})}),n.jsx("p",{className:"text-sm text-gray-600",children:"No data found for the date range selected. Please select a different period."})]})}),n.jsxs("div",{className:"border border-gray-200 bg-white",children:[n.jsxs("div",{className:"flex items-center justify-between px-2 py-2",children:[n.jsx("button",{className:"p-1 text-gray-600 hover:bg-gray-100 rounded transition-colors",children:n.jsx(af,{className:"w-4 h-4"})}),n.jsx("button",{className:"p-1 text-gray-600 hover:bg-gray-100 rounded transition-colors",children:n.jsx(Wy,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"px-4 pb-4",children:[n.jsx("p",{className:"text-center mt-8 mb-1.5 text-sm font-medium text-gray-900",children:"No data found for the date range selected"}),n.jsx("p",{className:"text-center text-sm text-gray-600",children:"Please select a different period"})]})]}),n.jsxs("div",{className:"border border-gray-200 bg-white",children:[n.jsxs("div",{className:"flex items-center justify-between px-2 py-2",children:[n.jsx("button",{className:"p-1 text-gray-600 hover:bg-gray-100 rounded transition-colors",children:n.jsx(af,{className:"w-4 h-4"})}),n.jsx("button",{className:"p-1 text-gray-600 hover:bg-gray-100 rounded transition-colors",children:n.jsx(Wy,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"px-4 pb-4",children:[n.jsx("p",{className:"text-center mt-8 mb-1.5 text-sm font-medium text-gray-900",children:"No data found for the date range selected"}),n.jsx("p",{className:"text-center text-sm text-gray-600",children:"Please select a different period"})]})]})]})})]})})},iM=u.createContext(void 0),cse=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async h=>{try{a(!0),i(null);const g=await nt.get(`/automation-flows/${encodeURIComponent(h)}`),{success:y,data:b,message:v}=g.data;if(!y)throw new Error(v||"Failed to fetch automation flows");return e(b||[]),b||[]}catch(g){const y=g?.response?.data?.message||g?.message||"Failed to fetch automation flows";throw i(y),new Error(y)}finally{a(!1)}},[]),c=u.useCallback(async h=>{try{a(!0),i(null);const g=await nt.post("/automation-flows",h),{success:y,data:b,message:v}=g.data;if(!y)throw new Error(v||"Failed to create automation flow");return e(w=>[b,...w]),ha.success("Automation flow created successfully"),b}catch(g){const y=g?.response?.data?.message||g?.message||"Failed to create automation flow";throw i(y),ha.error(y),new Error(y)}finally{a(!1)}},[]),d=u.useCallback(async(h,g)=>{try{a(!0),i(null);const y=await nt.put(`/automation-flows/${encodeURIComponent(h)}`,g),{success:b,data:v,message:w}=y.data;if(!b)throw new Error(w||"Failed to update automation flow");return e(C=>C.map(k=>k._id===v._id?v:k)),ha.success("Automation flow updated successfully"),v}catch(y){const b=y?.response?.data?.message||y?.message||"Failed to update automation flow";throw i(b),ha.error(b),new Error(b)}finally{a(!1)}},[]),p={flows:r,loading:t,error:o,getByStoreId:l,create:c,update:d};return n.jsx(iM.Provider,{value:p,children:s})},xw=()=>{const s=u.useContext(iM);if(!s)throw new Error("useAutomationFlows must be used within an AutomationFlowProvider");return s},dse=()=>{const s=dr(),[r,e]=u.useState(0),t=5,{activeStoreId:a}=Ur(),{flows:o,getByStoreId:i,update:l}=xw();u.useEffect(()=>{a&&i(a).catch(()=>{})},[a,i]),u.useCallback(h=>{e(g=>g+1)},[]);const c=u.useCallback(()=>{s("/marketing/automations/templates")},[s]),d=u.useCallback((h,g)=>{l(h,{isActive:!g}).catch(()=>{})},[l]),p=u.useCallback(h=>{s(`/marketing/automations/${h}`)},[s]);return n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Automations"}),n.jsx("button",{onClick:c,className:"px-3 py-1.5 bg-gray-900 text-white rounded hover:bg-gray-800 transition-colors text-sm font-medium",children:"View templates"})]})})}),n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx("div",{className:"p-4 border border-gray-200 bg-white",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex-1 pr-8",children:[n.jsx("h2",{className:"text-base font-medium mb-2 text-gray-900",children:"Automate multi-channel customer journeys."}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Marketing automations are set up once and run for as long as you want."}),n.jsx("button",{onClick:c,className:"px-3 py-1.5 bg-gray-900 text-white rounded hover:bg-gray-800 transition-colors text-sm font-medium",children:"View templates"})]}),n.jsx("div",{className:"w-[200px] h-[120px] flex items-center justify-center relative",children:n.jsxs("div",{className:"relative w-full h-full",children:[n.jsx("div",{className:"absolute top-2.5 left-1/2 transform -translate-x-1/2",style:{width:0,height:0,borderLeft:"15px solid transparent",borderRight:"15px solid transparent",borderBottom:"25px solid #20b2aa"}}),n.jsx("div",{className:"absolute top-12 left-5 w-5 h-5 bg-red-400"}),n.jsx("div",{className:"absolute top-12 right-5 w-5 h-5 rounded-full bg-orange-400"}),n.jsx("div",{className:"absolute top-9 left-1/2 w-[60%] h-px bg-gray-300 transform -translate-x-1/2"}),n.jsx("div",{className:"absolute top-15 left-[30%] w-[40%] h-px bg-gray-300"})]})})]})}),o.length>0&&n.jsxs("div",{className:"p-4 border border-gray-200 bg-white",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Your automations"}),n.jsx("div",{className:"flex flex-col gap-2",children:o.map(h=>n.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>p(h._id),children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:h.name}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Trigger: ",h.triggerKey,"  ",h.isActive?"Active":"Inactive"]})]}),n.jsx("div",{onClick:g=>g.stopPropagation(),children:n.jsxs("label",{className:"relative inline-block w-11 h-6 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:!!h.isActive,onChange:g=>{g.stopPropagation(),d(h._id,!!h.isActive)},className:"sr-only peer"}),n.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-gray-400 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gray-900"})]})})]},h._id))})]}),n.jsxs("div",{className:"p-4 border border-gray-200 bg-white",children:[n.jsx("h2",{className:"text-base font-medium mb-2 text-gray-900",children:"Turn visitors into subscribers."}),n.jsxs("p",{className:"text-sm text-gray-600",children:["From opt-in forms to automated welcome emails and marketing campaigns, set your business growth in motion."," ",n.jsx("button",{className:"text-gray-700 hover:text-gray-900 underline",children:"View case study"})]})]}),n.jsxs("div",{className:"p-4 border border-gray-200 bg-white",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx(Ch,{className:"w-4 h-4 text-gray-600"}),n.jsxs("p",{className:"text-xs text-gray-600",children:[r," of ",t," tasks complete"]})]}),n.jsx("h2",{className:"text-base font-medium mb-2 text-gray-900",children:"Start with these essential templates"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Automate customer communications to increase engagement, sales, and return on your marketing spend."}),n.jsxs("div",{className:"flex items-start gap-4 p-3 border border-gray-200 bg-gray-50",children:[n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx(Ch,{className:"w-4 h-4 text-gray-600"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Recover abandoned cart"})]}),n.jsxs("div",{className:"flex-1 ml-6",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"An automated email is already created for you. Take a moment to review the email and make any additional adjustments to the design, messaging, or recipient list."}),n.jsx("button",{className:"px-3 py-1.5 bg-gray-900 text-white rounded hover:bg-gray-800 transition-colors text-sm font-medium",children:"Review email"})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Am,{className:"w-6 h-6 text-gray-700"}),n.jsx("div",{className:"absolute -top-1 -right-1 w-2.5 h-2.5 bg-red-400 rounded-full"})]}),n.jsx(jx,{className:"w-5 h-5 text-gray-600"})]})]}),n.jsxs("div",{className:"mt-3 flex flex-col gap-2",children:[n.jsxs("div",{className:"flex items-center gap-2 p-2",children:[n.jsx(Ch,{className:"w-4 h-4 text-gray-600"}),n.jsx("p",{className:"text-sm text-gray-900",children:"Recover abandoned cart"})]}),n.jsxs("div",{className:"flex items-center gap-2 p-2",children:[n.jsx(Ch,{className:"w-4 h-4 text-gray-600"}),n.jsx("p",{className:"text-sm text-gray-900",children:"Convert abandoned product browse"})]}),n.jsxs("div",{className:"flex items-center gap-2 p-2",children:[n.jsx(Ch,{className:"w-4 h-4 text-gray-600"}),n.jsx("p",{className:"text-sm text-gray-900",children:"Welcome new subscribers with a discount email"})]}),n.jsxs("div",{className:"flex items-center gap-2 p-2",children:[n.jsx(Ch,{className:"w-4 h-4 text-gray-600"}),n.jsx("p",{className:"text-sm text-gray-900",children:"Thank customers after they purchase"})]})]})]}),n.jsx("div",{className:"flex justify-center pb-4",children:n.jsxs("p",{className:"text-sm text-gray-600",children:["Learn more about"," ",n.jsx("button",{className:"text-gray-700 hover:text-gray-900 underline",children:"automations"})]})})]})})]})})},use=({onCreateCampaign:s,onLearnMore:r})=>n.jsx("div",{className:"p-4 border border-gray-200 bg-white",children:n.jsxs("div",{className:"flex items-center justify-between gap-8",children:[n.jsxs("div",{className:"max-w-[760px]",children:[n.jsx("h2",{className:"text-base font-medium mb-2 text-gray-900",children:"Centralize your campaign tracking"}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Create campaigns to evaluate how marketing initiatives drive business goals. Capture online and offline touchpoints, add campaign activities from multiple marketing channels, and monitor results."}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:s,className:"px-3 py-1.5 bg-gray-900 text-white rounded hover:bg-gray-800 transition-colors text-sm font-medium",children:"Create campaign"}),n.jsx("button",{onClick:r,className:"px-3 py-1.5 text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors text-sm font-medium",children:"Learn more"})]})]}),n.jsxs("div",{className:"w-[220px] h-[140px] relative",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-200 to-gray-100 opacity-30"}),n.jsx("div",{className:"absolute right-0 bottom-1.5 w-[180px] h-[110px] bg-gray-200"})]})]})}),fse=({onBrowseApps:s})=>n.jsx("div",{className:"p-4 border border-gray-200 bg-white",children:n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Generate traffic with marketing apps"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Grow your audience on social platforms, capture new leads with newsletter sign-ups, increase conversion with chat, and more."}),n.jsx("div",{className:"mt-3",children:n.jsx("button",{onClick:s,className:"px-3 py-1.5 bg-white text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors text-sm font-medium",children:"Browse marketing apps"})})]})}),pse=()=>{const s=u.useCallback(()=>{},[]),r=u.useCallback(()=>{},[]),e=u.useCallback(()=>{},[]);return n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Campaigns"}),n.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-700 rounded",children:"All"})]})})}),n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx(use,{onCreateCampaign:s,onLearnMore:r}),n.jsx(fse,{onBrowseApps:e})]})})]})})},hse=({isOpen:s,options:r,selectedValue:e,onSelect:t,onClose:a})=>s?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:a}),n.jsxs("div",{className:"absolute top-full left-0 mt-1 w-56 bg-white border border-gray-200 shadow-lg z-20",children:[n.jsx("div",{className:"px-3 py-2 border-b border-gray-200",children:n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Attribution model"})}),r.map(o=>n.jsx("button",{onClick:()=>t(o),className:`w-full text-left px-3 py-1.5 text-sm hover:bg-gray-50 transition-colors ${e===o?"bg-gray-100 text-gray-900":"text-gray-700"}`,children:o},o)),n.jsx("div",{className:"px-3 py-2 border-t border-gray-200",children:n.jsxs("p",{className:"text-xs text-gray-600",children:["A 30-day attribution window applies."," ",n.jsx("button",{className:"text-gray-700 hover:text-gray-900 underline",children:"Learn more"})]})})]})]}):null,mse=({onCreateCampaign:s,onLearnMore:r})=>n.jsxs("div",{className:"p-4 border border-gray-200 bg-white",children:[n.jsx("h2",{className:"text-base font-medium mb-2 text-gray-900",children:"Centralize your campaign tracking"}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Create campaigns to evaluate how marketing initiatives drive business goals, capture online and offline touch points, add campaign activities from multiple marketing channels, and monitor results."}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:s,className:"px-3 py-1.5 bg-gray-900 text-white rounded hover:bg-gray-800 transition-colors text-sm font-medium",children:"Create campaign"}),n.jsx("button",{onClick:r,className:"px-3 py-1.5 text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors text-sm font-medium",children:"Learn more"})]})]}),gse=({onBrowseApps:s})=>n.jsxs("div",{className:"p-4 border border-gray-200 bg-white",children:[n.jsx("h2",{className:"text-base font-medium mb-2 text-gray-900",children:"Generate traffic with marketing apps"}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Grow your audience on social platforms, capture new leads with newsletters, signups, increase conversion with chat and more."}),n.jsx("button",{onClick:s,className:"px-3 py-1.5 bg-white text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors text-sm font-medium",children:"Browse marketing apps"})]}),ty=({title:s,value:r=""})=>n.jsxs("div",{className:"p-3 border border-gray-200 bg-white",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:s}),n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:r})]}),yse=({message:s="No data found for the date range selected. Please select a different period."})=>n.jsxs("div",{className:"p-4 border border-gray-200 bg-white",children:[n.jsx("h2",{className:"text-base font-medium mb-2 text-gray-900",children:"Top marketing channels"}),n.jsx("p",{className:"text-sm text-gray-600",children:s})]}),xse=()=>{const[s,r]=u.useState(!1),[e,t]=u.useState("Last non-direct click"),[a,o]=u.useState("Last 30 days"),i=u.useCallback(()=>{r(h=>!h)},[]),l=u.useCallback(()=>{r(!1)},[]),c=u.useCallback(h=>{t(h),r(!1)},[]),d=u.useCallback(h=>{o(h)},[]),p=["Last non-direct click","Last click","First click","Any click","Linear"];return n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Marketing"}),n.jsxs("div",{className:"flex gap-2 items-center",children:[n.jsx("button",{className:`px-3 py-1.5 rounded text-sm font-medium transition-colors ${a==="Last 30 days"?"bg-gray-900 text-white hover:bg-gray-800":"bg-white text-gray-700 border border-gray-200 hover:bg-gray-50"}`,onClick:()=>d("Last 30 days"),children:"Last 30 days"}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{className:"flex items-center gap-1 px-3 py-1.5 rounded text-sm font-medium bg-white text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",onClick:i,children:[e,n.jsx(Ys,{className:"w-3.5 h-3.5"})]}),n.jsx(hse,{isOpen:s,options:p,selectedValue:e,onSelect:c,onClose:l})]})]})]})})}),n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:[n.jsx(ty,{title:"Sessions",value:"12,450"}),n.jsx(ty,{title:"Sales attributed to marketing",value:"$45,230"}),n.jsx(ty,{title:"Orders attributed to marketing",value:"342"}),n.jsx(ty,{title:"Conversion rate",value:"2.75%"}),n.jsx(ty,{title:"AOV attributed to marketing",value:"$132.15"})]}),n.jsx(yse,{}),n.jsx(mse,{}),n.jsx(gse,{})]})})]})})},vse=({data:s,onChange:r})=>{const e=u.useCallback(t=>a=>{r(t,a.target.value)},[r]);return n.jsxs("div",{className:"bg-white p-4 rounded border border-gray-200",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:["First Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:s.firstName,onChange:e("firstName"),required:!0,className:"w-full px-3 py-1.5 text-base text-gray-900 border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:s.lastName,onChange:e("lastName"),required:!0,className:"w-full px-3 py-1.5 text-base text-gray-900 border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:["Email ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",value:s.email,onChange:e("email"),required:!0,className:"w-full px-3 py-1.5 text-base text-gray-900 border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:["Phone Number ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"tel",value:s.phoneNumber,onChange:e("phoneNumber"),required:!0,className:"w-full px-3 py-1.5 text-base text-gray-900 border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Language"}),n.jsxs("select",{value:s.language,onChange:e("language"),className:"w-full px-3 py-1.5 text-base text-gray-900 border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors",children:[n.jsx("option",{value:"en",children:"English"}),n.jsx("option",{value:"es",children:"Spanish"}),n.jsx("option",{value:"fr",children:"French"}),n.jsx("option",{value:"de",children:"German"})]})]})]})]})},bse=({notes:s,onChange:r})=>{const e=u.useCallback(t=>{r(t.target.value)},[r]);return n.jsxs("div",{className:"bg-white p-4 rounded border border-gray-200",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Notes"}),n.jsx("textarea",{value:s,onChange:e,placeholder:"Add any additional notes about this customer...",rows:4,className:"w-full px-3 py-2 text-base text-gray-900 border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors resize-none"})]})},wse=({selectedTagIds:s,customerTags:r,onTagSelect:e,onTagRemove:t,onCreateTag:a})=>{const[o,i]=pt.useState(""),[l,c]=pt.useState(!1),[d,p]=pt.useState(""),h=u.useRef(null),g=u.useRef(null),y=u.useCallback(k=>{i(k.target.value),l||c(!0)},[l]),b=u.useCallback(k=>{e(k),i(""),c(!0)},[e]),v=u.useCallback(async()=>{d.trim()&&(await a(d),i(""),c(!0))},[d,a]);u.useEffect(()=>{const k=setTimeout(()=>p(o.trim()),250);return()=>clearTimeout(k)},[o]),u.useEffect(()=>{const k=N=>{h.current&&!h.current.contains(N.target)&&g.current&&!g.current.contains(N.target)&&c(!1)};return l&&document.addEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}},[l]);const w=u.useMemo(()=>{const k=d.toLowerCase();if(!k)return r.slice(0,10);const N=r.filter(R=>R.name.toLowerCase().startsWith(k)),O=r.filter(R=>!R.name.toLowerCase().startsWith(k)&&R.name.toLowerCase().includes(k)).sort((R,L)=>R.name.toLowerCase().indexOf(k)-L.name.toLowerCase().indexOf(k));return[...N,...O].slice(0,10)},[d,r]),C=u.useMemo(()=>{const k=d.trim();return k&&!r.some(N=>N.name.toLowerCase()===k.toLowerCase())},[d,r]);return n.jsxs("div",{className:"bg-white p-4 rounded border border-gray-200",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Customer Tags"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{ref:g,type:"text",value:o,placeholder:"Search or create customer tags",onChange:y,onFocus:()=>c(!0),className:"w-full px-3 py-1.5 text-base text-gray-900 border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"}),s.length>0&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[s.length," selected"]}),l&&(w.length>0||C)&&n.jsxs("div",{ref:h,className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded shadow-lg max-h-[300px] overflow-y-auto",onMouseDown:k=>k.preventDefault(),children:[w.map(k=>{const N=s.includes(k._id);return n.jsxs("div",{onClick:()=>b(k._id),className:"px-3 py-2 cursor-pointer flex items-center gap-2 hover:bg-gray-50 transition-colors",children:[n.jsx("input",{type:"checkbox",checked:N,readOnly:!0,className:"w-4 h-4 text-gray-900 border-gray-300 rounded focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:k.name})]},k._id)}),C&&n.jsx("div",{onClick:v,className:"px-3 py-2 cursor-pointer hover:bg-gray-50 transition-colors font-medium",children:n.jsxs("span",{className:"text-sm text-gray-700",children:["+ ",d]})})]})]}),s.length>0&&n.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:s.map(k=>{const N=r.find(O=>O._id===k);return n.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2 py-0.5 bg-gray-100 border border-gray-200 rounded text-sm text-gray-700",children:[n.jsx("span",{children:N?.name||"Unknown"}),n.jsx("button",{type:"button",onClick:()=>t(k),className:"p-0.5 hover:bg-gray-200 rounded transition-colors","aria-label":"Remove tag",children:n.jsx(Zs,{className:"w-3.5 h-3.5 text-gray-500"})})]},k)})})]})},jse=({data:s,onChange:r})=>{const e=u.useCallback(t=>a=>{r(t,a.target.checked)},[r]);return n.jsxs("div",{className:"bg-white p-4 rounded border border-gray-200",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Marketing Preferences"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:s.agreedToMarketingEmails,onChange:e("agreedToMarketingEmails"),className:"w-4 h-4 text-gray-900 border-gray-300 rounded focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Agreed to receive marketing emails"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:s.agreedToSmsMarketing,onChange:e("agreedToSmsMarketing"),className:"w-4 h-4 text-gray-900 border-gray-300 rounded focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Agreed to receive SMS marketing"})]})]})]})},Cse=({data:s,onChange:r})=>{const e=u.useCallback(t=>a=>{r("taxSettings.collectTax",t)},[r]);return n.jsxs("div",{className:"bg-white p-4 rounded border border-gray-200",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Tax Settings"}),n.jsxs("fieldset",{children:[n.jsx("legend",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax Collection"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"collectTax",value:"collect",checked:s.collectTax==="collect",onChange:e("collect"),className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Collect Tax"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"collectTax",value:"dont_collect",checked:s.collectTax==="dont_collect",onChange:e("dont_collect"),className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Don't collect tax"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"collectTax",value:"collect_unless_exempt",checked:s.collectTax==="collect_unless_exempt",onChange:e("collect_unless_exempt"),className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Collect tax unless exemptions apply"})]})]})]})]})},Sse=()=>{const s=dr(),{addCustomer:r,loading:e,error:t}=iu(),{activeStoreId:a}=Ur(),{customerTags:o,fetchCustomerTags:i,addCustomerTag:l}=R2(),[c,d]=u.useState([]),[p,h]=u.useState({firstName:"",lastName:"",email:"",phoneNumber:"",language:"en",agreedToMarketingEmails:!1,agreedToSmsMarketing:!1,taxSettings:{collectTax:"collect"},notes:"",tags:""}),g=u.useCallback((k,N)=>{if(k.includes(".")){const[O,R]=k.split(".");h(L=>({...L,[O]:{...L[O],[R]:N}}))}else h(O=>({...O,[k]:N}))},[]),y=u.useCallback(async k=>{k.preventDefault();try{if(!a)return;const N={storeId:a,firstName:p.firstName,lastName:p.lastName,language:p.language,email:p.email,phoneNumber:p.phoneNumber,agreedToMarketingEmails:p.agreedToMarketingEmails,agreedToSmsMarketing:p.agreedToSmsMarketing,collectTax:p.taxSettings.collectTax,notes:p.notes,tagIds:c};await r(N),s("/customers")}catch(N){console.error("Error creating customer:",N)}},[a,p,c,r,s]),b=u.useCallback(()=>{s("/customers")},[s]),v=u.useCallback(k=>{d(N=>N.includes(k)?N.filter(O=>O!==k):[...N,k])},[]),w=u.useCallback(async k=>{if(!(!a||!k.trim()))try{const N=await l(a,k);d(O=>[...new Set([...O,N._id])])}catch(N){throw console.error("Error creating tag:",N),N}},[a,l]),C=u.useCallback(k=>{d(N=>N.filter(O=>O!==k))},[]);return u.useEffect(()=>{a&&i(a)},[a,i]),n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-4",children:n.jsx("div",{className:"max-w-4xl mx-auto",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:b,className:"flex items-center gap-1.5 px-3 py-1.5 text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors","aria-label":"Go back",children:n.jsx(gn,{className:"w-4 h-4"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Add New Customer"}),n.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:"Create a new customer for your store"})]})]})})}),n.jsx("div",{className:"max-w-4xl mx-auto py-6 px-4",children:n.jsxs("form",{className:"flex flex-col gap-4",onSubmit:y,children:[n.jsx(vse,{data:{firstName:p.firstName,lastName:p.lastName,email:p.email,phoneNumber:p.phoneNumber,language:p.language},onChange:g}),n.jsx(jse,{data:{agreedToMarketingEmails:p.agreedToMarketingEmails,agreedToSmsMarketing:p.agreedToSmsMarketing},onChange:g}),n.jsx(Cse,{data:{collectTax:p.taxSettings.collectTax},onChange:g}),n.jsx(bse,{notes:p.notes,onChange:k=>g("notes",k)}),n.jsx(wse,{selectedTagIds:c,customerTags:o,onTagSelect:v,onTagRemove:C,onCreateTag:w,activeStoreId:a||void 0}),t&&n.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded text-sm",children:n.jsx("p",{className:"text-sm text-red-600",children:t})}),n.jsxs("div",{className:"flex items-center justify-end gap-2 mt-4 pt-4 border-t border-gray-200",children:[n.jsx("button",{type:"button",onClick:b,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:e,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 rounded hover:bg-gray-800 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:e?n.jsxs(n.Fragment,{children:[n.jsxs("svg",{className:"animate-spin h-4 w-4 text-white inline mr-1.5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Customer..."]}):"Save Customer"})]})]})})]})})},Nse=()=>{const s=dr(),{createGiftCard:r,loading:e}=sk(),{activeStoreId:t}=Ur(),[a,o]=u.useState({giftCardCode:"",initialValue:"",noExpirationDate:!1,setExpirationDate:!1,expirationDate:"",notes:""}),i=u.useCallback((h,g)=>{o(y=>({...y,[h]:g}))},[]),l=u.useCallback((h,g)=>{o(y=>({...y,[h]:g,...h==="setExpirationDate"&&g?{noExpirationDate:!1}:{},...h==="noExpirationDate"&&g?{setExpirationDate:!1}:{}}))},[]),c=u.useCallback(()=>{const h="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let g="";for(let y=0;y<12;y++)g+=h.charAt(Math.floor(Math.random()*h.length));i("giftCardCode",g)},[i]),d=u.useCallback(()=>{s("/products/gift-cards")},[s]),p=u.useCallback(async()=>{try{if(!a.giftCardCode.trim()){alert("Please enter a gift card code");return}if(!a.initialValue||parseFloat(a.initialValue)<=0){alert("Please enter a valid initial value");return}if(!t){alert("No active store selected");return}const h={storeId:t,code:a.giftCardCode.trim(),initialValue:parseFloat(a.initialValue),expirationDate:a.setExpirationDate&&a.expirationDate?a.expirationDate:void 0,notes:a.notes.trim()||void 0,isActive:!0};await r(h),s("/products/gift-cards")}catch(h){console.error("Error creating gift card:",h),alert("Failed to create gift card. Please try again.")}},[a,t,r,s]);return n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-4",children:n.jsx("div",{className:"max-w-4xl mx-auto",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:d,className:"flex items-center gap-1.5 px-3 py-1.5 text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:n.jsx(gn,{className:"w-4 h-4"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Create Gift Card"}),n.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:"Create a new gift card for your store"})]})]})})}),n.jsxs("div",{className:"max-w-4xl mx-auto py-6 px-4",children:[n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-4 mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Gift Card Details"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"sm:col-span-1",children:[n.jsx("label",{htmlFor:"giftCardCode",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Gift Card Code"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{id:"giftCardCode",type:"text",value:a.giftCardCode,onChange:h=>i("giftCardCode",h.target.value),placeholder:"Enter gift card code",className:"w-full px-3 py-1.5 pr-10 border border-gray-200 rounded focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors text-base"}),n.jsx("button",{onClick:c,className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors",title:"Generate random code",type:"button",children:n.jsx(ou,{className:"w-4 h-4"})})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Unique code for the gift card"})]}),n.jsxs("div",{className:"sm:col-span-1",children:[n.jsx("label",{htmlFor:"initialValue",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Initial Value"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-600 text-base",children:""}),n.jsx("input",{id:"initialValue",type:"number",value:a.initialValue,onChange:h=>i("initialValue",h.target.value),placeholder:"Enter initial value",className:"w-full pl-8 pr-3 py-1.5 border border-gray-200 rounded focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors text-base"})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Initial value in INR"})]})]})]}),n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-4 mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-2",children:"Expiration Date"}),n.jsx("p",{className:"text-xs text-gray-600 mb-4 italic",children:"Countries have different laws for gift card expiry dates. Check the laws for your country before starting this tutorial."}),n.jsx("div",{className:"mb-3",children:n.jsxs("label",{className:"flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:a.noExpirationDate,onChange:h=>l("noExpirationDate",h.target.checked),className:"w-4 h-4 text-gray-900 border-gray-300 rounded focus:ring-gray-400 cursor-pointer"}),n.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"No expiration date"})]})}),n.jsx("div",{className:"mb-3",children:n.jsxs("label",{className:"flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:a.setExpirationDate,onChange:h=>l("setExpirationDate",h.target.checked),className:"w-4 h-4 text-gray-900 border-gray-300 rounded focus:ring-gray-400 cursor-pointer"}),n.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Set expiration date"})]})}),a.setExpirationDate&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{htmlFor:"expirationDate",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Expiration Date"}),n.jsx("input",{id:"expirationDate",type:"date",value:a.expirationDate,onChange:h=>i("expirationDate",h.target.value),className:"w-full px-3 py-1.5 border border-gray-200 rounded focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Select the date when this gift card expires"})]})]}),n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-4 mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Notes"}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Notes"}),n.jsx("textarea",{id:"notes",rows:4,value:a.notes,onChange:h=>i("notes",h.target.value),placeholder:"Enter any additional notes for this gift card...",className:"w-full px-3 py-2 border border-gray-200 rounded focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors resize-none text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Optional: Add any notes or comments about this gift card"})]})]}),n.jsx("div",{className:"flex justify-center mt-4",children:n.jsx("button",{onClick:p,disabled:e,className:"px-4 py-2 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:e?n.jsxs("span",{className:"flex items-center justify-center gap-2",children:[n.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):"Create Gift Card"})})]})]})})},kse=({category:s,onSelect:r})=>{const e=u.useCallback(()=>{r(s)},[s,r]);return n.jsxs("button",{onClick:e,className:"cursor-pointer w-full px-4 py-3 flex items-center justify-between hover:bg-gray-50 transition-colors text-left",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name}),n.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:s.hasChildren?"Has subcategories":"Select this category"})]}),s.hasChildren&&n.jsx(NS,{className:"w-4 h-4 text-gray-400 flex-shrink-0 ml-2"})]})},_se=({categories:s,onCategorySelect:r})=>n.jsx("div",{className:"divide-y divide-gray-200",children:s.map(e=>n.jsx(kse,{category:e,onSelect:r},e._id))}),Ese=({selectedCategory:s,onCategorySelect:r,storeId:e})=>{const{categories:t,loading:a,fetchBaseCategories:o,fetchCategoriesByParentId:i}=W6(),[l,c]=u.useState([]),[d,p]=u.useState(null),[h,g]=u.useState("");u.useEffect(()=>{o()},[o]);const y=u.useCallback(C=>{C.hasChildren?(c(k=>[...k,{id:C._id,name:C.name}]),p(C._id),i(C._id)):(r(C._id,C.name),g(C.name))},[r,i]),b=u.useCallback(()=>{if(l.length>0){const C=[...l];if(C.pop(),c(C),C.length===0)p(null),o();else{const k=C[C.length-1];p(k.id),i(k.id)}}},[l,o,i]),v=u.useCallback(()=>{c([]),p(null),o()},[o]),w=u.useCallback(()=>l.length===0?"Base Categories":l.map(C=>C.name).join(" > "),[l]);return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 max-h-96 overflow-hidden",children:[n.jsxs("div",{className:"p-4 border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-gray-600",children:w()}),n.jsxs("div",{className:"flex items-center gap-1",children:[l.length>0&&n.jsx("button",{onClick:b,title:"Go Back",className:"p-1.5 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsx(gn,{className:"w-4 h-4"})}),n.jsx("button",{onClick:v,title:"Home",className:"p-1.5 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsx(GO,{className:"w-4 h-4"})})]})]}),h&&n.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 mt-2 text-xs font-medium text-gray-900 bg-gray-100 border border-gray-300 rounded-lg",children:["Selected: ",h]})]}),n.jsx("div",{className:"max-h-72 overflow-y-auto",children:a?n.jsx("div",{className:"flex justify-center items-center p-6",children:n.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 border-t-gray-900 rounded-full animate-spin"})}):t.length>0?n.jsx(_se,{categories:t,onCategorySelect:y}):n.jsx("div",{className:"p-6 text-center",children:n.jsx("p",{className:"text-sm text-gray-500",children:"No categories found"})})})]})},Tse=({value:s,onChange:r,placeholder:e="Describe your product...",rows:t=4})=>n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),n.jsx("textarea",{value:s,onChange:a=>r(a.target.value),placeholder:e,rows:t,className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors resize-none"})]}),Ose=({value:s,onChange:r,required:e=!0})=>n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Product Title ",e&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:s,onChange:t=>r(t.target.value),placeholder:"Enter product title",required:e,className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),Pse=({title:s,category:r,description:e,activeStoreId:t,onTitleChange:a,onCategoryChange:o,onDescriptionChange:i})=>n.jsxs("div",{className:"mb-6 border border-gray-200 p-3 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(Ose,{value:s,onChange:a,required:!0}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),n.jsx(Ese,{selectedCategory:r,onCategorySelect:(l,c)=>{o(l)},storeId:t||""})]}),n.jsx(Tse,{value:e,onChange:i})]})]}),Ase=({imageUrl:s,index:r,onUpdateImage:e,onRemoveImage:t})=>{const a=u.useCallback(l=>{e(r,l.target.value)},[r,e]),o=u.useCallback(()=>{t(r)},[r,t]),i=u.useCallback(l=>{l.currentTarget.style.display="none"},[]);return n.jsxs("div",{className:"border border-gray-200 rounded p-3",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsxs("span",{className:"text-xs text-gray-600",children:["Image ",r+1]}),n.jsx("button",{type:"button",onClick:o,className:"p-1 text-gray-600 hover:bg-gray-100 rounded transition-colors",children:n.jsx(Xs,{className:"w-3.5 h-3.5"})})]}),n.jsx("input",{type:"text",placeholder:"Enter image URL",value:s,onChange:a,className:"w-full px-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors mb-2"}),s.trim()?n.jsx("img",{src:s,alt:`Preview ${r+1}`,className:"w-full h-32 object-cover rounded border border-gray-200",onError:i}):n.jsx("div",{className:"w-full h-32 border border-dashed border-gray-200 rounded flex items-center justify-center text-gray-500 text-xs",children:"No image preview"})]})},Mse=({images:s,onUpdateImage:r,onRemoveImage:e})=>n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:s.map((t,a)=>n.jsx(Ase,{imageUrl:t,index:a,onUpdateImage:r,onRemoveImage:e},a))}),Ise=({images:s,onAddImage:r,onUpdateImage:e,onRemoveImage:t})=>n.jsxs("div",{className:"mt-6 border border-gray-200 p-3 bg-white/95",children:[n.jsx("h3",{className:"text-base font-medium text-gray-900 mb-4",children:"Product Images"}),n.jsxs("button",{type:"button",onClick:r,className:"flex items-center gap-1.5 px-3 py-1.5 border border-gray-200 rounded text-sm text-gray-700 hover:bg-gray-50 transition-colors mb-4",children:[n.jsx(On,{className:"w-4 h-4"}),"Add Image"]}),s.length>0?n.jsx(Mse,{images:s,onUpdateImage:e,onRemoveImage:t}):n.jsx("div",{className:"text-center py-8 text-gray-600",children:'No images added yet. Click "Add Image" to get started.'})]}),Rse=({inventoryTrackingEnabled:s,sku:r,barcode:e,continueSellingWhenOutOfStock:t,onInventoryTrackingEnabledChange:a,onSkuChange:o,onBarcodeChange:i,onContinueSellingWhenOutOfStockChange:l})=>{const c=u.useCallback(g=>{a(g.target.checked)},[a]),d=u.useCallback(g=>{o(g.target.value)},[o]),p=u.useCallback(g=>{i(g.target.value)},[i]),h=u.useCallback(g=>{l(g.target.checked)},[l]);return n.jsxs("div",{className:"mb-6 border border-gray-200 p-3 bg-white/95",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Inventory"}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:s,onChange:c,className:"w-3.5 h-3.5 text-gray-900 focus:ring-gray-400 rounded border-gray-300"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Inventory tracking enabled"})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"More Details"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SKU (Stock Keeping Unit)"}),n.jsx("input",{type:"text",value:r,onChange:d,placeholder:"Enter SKU",className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Barcode (ISBN, UPC, GTIN, etc.)"}),n.jsx("input",{type:"text",value:e,onChange:p,placeholder:"Enter barcode",className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]}),s&&n.jsx("div",{className:"mt-3",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:t,onChange:h,className:"w-3.5 h-3.5 text-gray-900 focus:ring-gray-400 rounded border-gray-300"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Continue selling when out of stock"})]})})]})]})},Dse=({tag:s,selected:r,onSelect:e})=>{const t=u.useCallback(()=>{e(s._id)},[s._id,e]);return n.jsxs("div",{className:"px-4 py-2 cursor-pointer hover:bg-gray-100 transition-colors flex items-center gap-2",onClick:t,children:[n.jsx("input",{type:"checkbox",checked:r,readOnly:!0,className:"w-4 h-4 text-gray-900 focus:ring-gray-900"}),s.name]})},Lse=({tags:s,selectedTags:r,onTagSelect:e})=>n.jsx(n.Fragment,{children:s.map(t=>{const a=r.includes(t._id);return n.jsx(Dse,{tag:t,selected:a,onSelect:e},t._id)})}),Fse=({tags:s,selectedTags:r,debouncedQuery:e,queryExists:t,onTagSelect:a,onCreateTag:o})=>{const i=u.useCallback(l=>{l.preventDefault()},[]);return n.jsxs("div",{className:"absolute z-10 top-full left-0 right-0 bg-white border border-gray-200 rounded-lg mt-1 max-h-72 overflow-y-auto shadow-lg",onMouseDown:i,children:[n.jsx(Lse,{tags:s,selectedTags:r,onTagSelect:a}),e&&!t&&n.jsx("div",{className:"px-4 py-2 cursor-pointer hover:bg-gray-100 transition-colors font-medium",onClick:o,children:`+ ${e}`})]})},Bse=({selectedTags:s,activeStoreId:r,onTagsChange:e})=>{const{productTags:t,fetchProductTags:a,addProductTag:o}=tj(),[i,l]=u.useState(""),[c,d]=u.useState(!1),[p,h]=u.useState("");u.useEffect(()=>{r&&a(r)},[r,a]),u.useEffect(()=>{const N=setTimeout(()=>h(i.trim()),250);return()=>clearTimeout(N)},[i]);const g=u.useMemo(()=>{const N=p.toLowerCase();if(!N)return t.slice(0,10);const O=t.filter(L=>L.name.toLowerCase().startsWith(N)),R=t.filter(L=>!L.name.toLowerCase().startsWith(N)&&L.name.toLowerCase().includes(N)).sort((L,B)=>L.name.toLowerCase().indexOf(N)-B.name.toLowerCase().indexOf(N));return[...O,...R].slice(0,10)},[p,t]),y=u.useCallback(N=>{s.includes(N)?e(s.filter(O=>O!==N)):e([...s,N]),l(""),d(!0)},[s,e]),b=u.useCallback(N=>{l(N.target.value),c||d(!0)},[c]),v=u.useCallback(()=>{d(!0)},[]),w=u.useCallback(()=>{setTimeout(()=>d(!1),150)},[]),C=u.useCallback(async()=>{if(!r)return;const N=await o(r,p);y(N._id)},[r,p,o,y]),k=u.useMemo(()=>t.some(N=>N.name.toLowerCase()===p.toLowerCase()),[p,t]);return n.jsxs("div",{className:"mt-4 relative",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Tags"}),n.jsx("input",{type:"text",value:i,placeholder:"Search or create tags",onChange:b,onFocus:v,onBlur:w,className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"}),s.length>0&&n.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:[s.length," selected"]}),c&&n.jsx(Fse,{tags:g,selectedTags:s,debouncedQuery:p,queryExists:k,onTagSelect:y,onCreateTag:C})]})},zse=({productType:s,onSelect:r})=>{const e=u.useCallback(()=>{r(s)},[s,r]);return n.jsx("div",{className:"px-4 py-2 cursor-pointer hover:bg-gray-100 transition-colors",onClick:e,children:s.name})},$se=({productTypes:s,onProductTypeSelect:r})=>n.jsx(n.Fragment,{children:s.map(e=>n.jsx(zse,{productType:e,onSelect:r},e._id))}),Use=({productTypes:s,debouncedQuery:r,queryExists:e,onProductTypeSelect:t,onCreateProductType:a})=>{const o=u.useCallback(i=>{i.preventDefault()},[]);return n.jsxs("div",{className:"absolute z-10 top-full left-0 right-0 bg-white border border-gray-200 rounded-lg mt-1 max-h-72 overflow-y-auto shadow-lg",onMouseDown:o,children:[n.jsx($se,{productTypes:s,onProductTypeSelect:t}),r&&!e&&n.jsx("div",{className:"px-4 py-2 cursor-pointer hover:bg-gray-100 transition-colors font-medium",onClick:a,children:`+ ${r}`})]})},Vse=({selectedProductTypeId:s,activeStoreId:r,onProductTypeChange:e})=>{const{productTypes:t,getProductTypesByStoreId:a,createProductType:o}=D2(),[i,l]=u.useState(""),[c,d]=u.useState(!1),[p,h]=u.useState("");u.useEffect(()=>{r&&a(r)},[r,a]),u.useEffect(()=>{const N=setTimeout(()=>h(i.trim()),250);return()=>clearTimeout(N)},[i]);const g=u.useMemo(()=>{const N=p.toLowerCase();if(!N)return t.slice(0,10);const O=t.filter(L=>L.name.toLowerCase().startsWith(N)),R=t.filter(L=>!L.name.toLowerCase().startsWith(N)&&L.name.toLowerCase().includes(N)).sort((L,B)=>L.name.toLowerCase().indexOf(N)-B.name.toLowerCase().indexOf(N));return[...O,...R].slice(0,10)},[p,t]);u.useEffect(()=>{if(s){const N=t.find(O=>O._id===s);N&&l(N.name)}else l("")},[s,t]);const y=u.useCallback(N=>{e(N._id),l(N.name),d(!1)},[e]),b=u.useCallback(N=>{l(N.target.value),c||d(!0)},[c]),v=u.useCallback(()=>{d(!0)},[]),w=u.useCallback(()=>{setTimeout(()=>d(!1),150)},[]),C=u.useCallback(async()=>{if(!r)return;const N=await o({storeId:r,name:p});y(N)},[r,p,o,y]),k=u.useMemo(()=>t.some(N=>N.name.toLowerCase()===p.toLowerCase()),[p,t]);return n.jsxs("div",{className:"relative",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Type"}),n.jsx("input",{type:"text",value:i,placeholder:"Search or create a product type",onChange:b,onFocus:v,onBlur:w,className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"}),c&&n.jsx(Use,{productTypes:g,debouncedQuery:p,queryExists:k,onProductTypeSelect:y,onCreateProductType:C})]})},Hse=({tagName:s,onRemove:r})=>{const e=u.useCallback(()=>{r()},[r]);return n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 border border-gray-200 rounded text-sm text-gray-700 bg-gray-50",children:[s||"Unknown",n.jsx("button",{type:"button",onClick:e,className:"text-gray-500 hover:text-gray-700",children:n.jsx(Zs,{className:"w-3.5 h-3.5"})})]})},Wse=({tagIds:s,productTags:r,onTagRemove:e})=>s.length===0?null:n.jsx("div",{className:"mt-3 flex gap-2 flex-wrap",children:s.map(t=>{const a=r.find(o=>o._id===t);return n.jsx(Hse,{tagName:a?.name||"Unknown",onRemove:()=>e(t)},t)})}),qse=({vendor:s,onSelect:r})=>{const e=u.useCallback(()=>{r(s._id,s.name)},[s,r]);return n.jsx("div",{className:"px-4 py-2 cursor-pointer hover:bg-gray-100 transition-colors",onClick:e,children:s.name})},Gse=({vendors:s,onVendorSelect:r})=>n.jsx(n.Fragment,{children:s.map(e=>n.jsx(qse,{vendor:e,onSelect:r},e._id))}),Kse=({vendors:s,debouncedQuery:r,queryExists:e,onVendorSelect:t,onCreateVendor:a})=>{const o=u.useCallback(i=>{i.preventDefault()},[]);return n.jsxs("div",{className:"absolute z-10 top-full left-0 right-0 bg-white border border-gray-200 rounded-lg mt-1 max-h-72 overflow-y-auto shadow-lg",onMouseDown:o,children:[n.jsx(Gse,{vendors:s,onVendorSelect:t}),r&&!e&&n.jsx("div",{className:"px-4 py-2 cursor-pointer hover:bg-gray-100 transition-colors font-medium",onClick:a,children:`+ ${r}`})]})},Yse=({selectedVendorId:s,activeStoreId:r,onVendorChange:e})=>{const{vendors:t,fetchVendorsByStoreId:a,createVendor:o}=nj(),[i,l]=u.useState(""),[c,d]=u.useState(!1),[p,h]=u.useState("");u.useEffect(()=>{r&&a(r)},[r,a]),u.useEffect(()=>{const N=setTimeout(()=>h(i.trim()),250);return()=>clearTimeout(N)},[i]);const g=u.useMemo(()=>{const N=p.toLowerCase();if(!N)return t.slice(0,10);const O=t.filter(L=>L.name.toLowerCase().startsWith(N)),R=t.filter(L=>!L.name.toLowerCase().startsWith(N)&&L.name.toLowerCase().includes(N)).sort((L,B)=>L.name.toLowerCase().indexOf(N)-B.name.toLowerCase().indexOf(N));return[...O,...R].slice(0,10)},[p,t]);u.useEffect(()=>{if(s){const N=t.find(O=>O._id===s);N&&l(N.name)}else l("")},[s,t]);const y=u.useCallback((N,O)=>{e(N),l(O),d(!1)},[e]),b=u.useCallback(N=>{l(N.target.value),c||d(!0)},[c]),v=u.useCallback(()=>{d(!0)},[]),w=u.useCallback(()=>{setTimeout(()=>d(!1),150)},[]),C=u.useCallback(async()=>{if(!r)return;const N=await o({storeId:r,name:p});y(N._id,N.name)},[r,p,o,y]),k=u.useMemo(()=>t.some(N=>N.name.toLowerCase()===p.toLowerCase()),[p,t]);return n.jsxs("div",{className:"relative",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vendor"}),n.jsx("input",{type:"text",value:i,placeholder:"Search or create a vendor",onChange:b,onFocus:v,onBlur:w,className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"}),c&&n.jsx(Kse,{vendors:g,debouncedQuery:p,queryExists:k,onVendorSelect:y,onCreateVendor:C})]})},Zse=({productType:s,vendor:r,tags:e,onProductTypeChange:t,onVendorChange:a,onTagsChange:o,activeStoreId:i})=>{const{productTags:l}=tj(),c=u.useCallback(d=>{o(e.filter(p=>p!==d))},[e,o]);return n.jsxs("div",{className:"mb-6 border border-gray-200 p-3 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Product Organization"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsx(Vse,{selectedProductTypeId:s,activeStoreId:i,onProductTypeChange:t}),n.jsx(Yse,{selectedVendorId:r,activeStoreId:i,onVendorChange:a})]}),n.jsx(Bse,{selectedTags:e,activeStoreId:i,onTagsChange:o}),n.jsx(Wse,{tagIds:e,productTags:l,onTagRemove:c})]})},Xse=({value:s,onChange:r})=>{const e=u.useCallback(t=>{r(t.target.value)},[r]);return n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Compare at price"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-base",children:""}),n.jsx("input",{type:"number",value:s,onChange:e,placeholder:"0.00",className:"w-full pl-8 pr-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]})},Qse=({checked:s,onChange:r})=>{const e=u.useCallback(t=>{r(t.target.checked)},[r]);return n.jsx("div",{className:"mt-3",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:s,onChange:e,className:"w-3.5 h-3.5 text-gray-900 focus:ring-gray-400 rounded border-gray-300"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Charge tax on this product"})]})})},GT={weight:["milligram","gram","kilogram"],volume:["milliliter","centiliter","liter","cubic meter"],size:["millimeter","centimeter","meter"],area:["square meter"],"per item":["item"]},Jse=({unitPriceTotalAmount:s,unitPriceBaseMeasure:r,selectedUnit:e,selectedBaseMeasureUnit:t,onUnitPriceTotalAmountChange:a,onUnitPriceBaseMeasureChange:o,onSelectedUnitChange:i,onSelectedBaseMeasureUnitChange:l})=>{const[c,d]=u.useState(!1),p=u.useCallback(()=>{if(!e)return[];for(const[C,k]of Object.entries(GT))if(k.includes(e))return k;return[]},[e]),h=u.useCallback(C=>{i(C),l("")},[i,l]),g=u.useCallback(()=>{d(C=>!C)},[]),y=u.useCallback(C=>{a(C.target.value)},[a]),b=u.useCallback(C=>{h(C.target.value)},[h]),v=u.useCallback(C=>{o(C.target.value)},[o]),w=u.useCallback(C=>{l(C.target.value)},[l]);return n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between border border-gray-200 rounded px-3 py-1.5 cursor-pointer hover:border-gray-400 transition-colors",onClick:g,children:[n.jsx("span",{className:"text-base text-gray-600",children:"Unit price"}),c?n.jsx(uf,{className:"w-4 h-4 text-gray-500"}):n.jsx(Ys,{className:"w-4 h-4 text-gray-500"})]}),c&&n.jsx("div",{className:"mt-2 p-3 border border-gray-200 rounded bg-gray-50",children:n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx("span",{className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-500 text-xs",children:""}),n.jsx("input",{type:"number",placeholder:"0.00",value:s,onChange:y,className:"w-full pl-7 pr-2 py-2 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("select",{value:e,onChange:b,className:"px-2 py-2 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors min-w-[100px]",children:[n.jsx("option",{value:"",disabled:!0,children:"Select unit"}),Object.entries(GT).map(([C,k])=>[n.jsx("optgroup",{label:C.charAt(0).toUpperCase()+C.slice(1),children:k.map(N=>n.jsx("option",{value:N,children:N},N))},C)])]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx("span",{className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-500 text-xs",children:""}),n.jsx("input",{type:"number",placeholder:"0.00",value:r,onChange:v,className:"w-full pl-7 pr-2 py-2 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("select",{value:t,onChange:w,disabled:!e,className:"px-2 py-2 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors min-w-[100px] disabled:bg-gray-100 disabled:cursor-not-allowed",children:[n.jsx("option",{value:"",disabled:!0,children:e?"Select unit":"Select total unit first"}),p().map(C=>n.jsx("option",{value:C,children:C},C))]})]})]})})]})},eae=({compareAtPrice:s,unitPriceTotalAmount:r,unitPriceBaseMeasure:e,selectedUnit:t,selectedBaseMeasureUnit:a,chargeTaxOnProduct:o,cost:i,profit:l,margin:c,onCompareAtPriceChange:d,onUnitPriceTotalAmountChange:p,onUnitPriceBaseMeasureChange:h,onSelectedUnitChange:g,onSelectedBaseMeasureUnitChange:y,onChargeTaxOnProductChange:b,onCostChange:v})=>{const w=u.useCallback(C=>{v(C.target.value)},[v]);return n.jsxs("div",{className:"mt-4",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-3",children:"Additional Display Prices"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsx(Xse,{value:s,onChange:d}),n.jsx(Jse,{unitPriceTotalAmount:r,unitPriceBaseMeasure:e,selectedUnit:t,selectedBaseMeasureUnit:a,onUnitPriceTotalAmountChange:p,onUnitPriceBaseMeasureChange:h,onSelectedUnitChange:g,onSelectedBaseMeasureUnitChange:y})]}),n.jsx(Qse,{checked:o,onChange:b}),n.jsx("div",{className:"mt-4",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Cost"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-base",children:""}),n.jsx("input",{type:"number",value:i,onChange:w,placeholder:"0.00",className:"w-full pl-8 pr-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Profit"}),n.jsx("input",{type:"text",value:`${l.toFixed(2)}`,readOnly:!0,className:`w-full px-3 py-2 border border-gray-200 rounded text-base bg-gray-50 font-medium ${l>=0?"text-green-500":"text-red-500"}`})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Margin"}),n.jsx("input",{type:"text",value:`${c.toFixed(2)}%`,readOnly:!0,className:`w-full px-3 py-2 border border-gray-200 rounded text-base bg-gray-50 font-medium ${c>=0?"text-green-500":"text-red-500"}`})]})]})})]})},tae=({price:s,compareAtPrice:r,unitPriceTotalAmount:e,unitPriceBaseMeasure:t,selectedUnit:a,selectedBaseMeasureUnit:o,chargeTaxOnProduct:i,cost:l,onPriceChange:c,onCompareAtPriceChange:d,onUnitPriceTotalAmountChange:p,onUnitPriceBaseMeasureChange:h,onSelectedUnitChange:g,onSelectedBaseMeasureUnitChange:y,onChargeTaxOnProductChange:b,onCostChange:v})=>{const{profit:w,margin:C}=u.useMemo(()=>{const N=parseFloat(s)||0,O=parseFloat(l)||0;if(N===0||O===0)return{profit:0,margin:0};const R=N-O,L=R/N*100;return{profit:R,margin:L}},[s,l]),k=u.useCallback(N=>{c(N.target.value)},[c]);return n.jsxs("div",{className:"mb-6 border border-gray-200 p-3 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Price"}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-base",children:""}),n.jsx("input",{type:"number",value:s,onChange:k,placeholder:"0.00",className:"w-full pl-8 pr-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]})}),n.jsx(eae,{compareAtPrice:r,unitPriceTotalAmount:e,unitPriceBaseMeasure:t,selectedUnit:a,selectedBaseMeasureUnit:o,chargeTaxOnProduct:i,cost:l,profit:w,margin:C,onCompareAtPriceChange:d,onUnitPriceTotalAmountChange:p,onUnitPriceBaseMeasureChange:h,onSelectedUnitChange:g,onSelectedBaseMeasureUnitChange:y,onChargeTaxOnProductChange:b,onCostChange:v})]})},rae=({pageTitle:s,metaDescription:r,urlHandle:e,onPageTitleChange:t,onMetaDescriptionChange:a,onUrlHandleChange:o})=>{const i=u.useCallback(d=>{t(d.target.value)},[t]),l=u.useCallback(d=>{a(d.target.value)},[a]),c=u.useCallback(d=>{o(d.target.value)},[o]);return n.jsxs("div",{className:"mb-6 border border-gray-200 p-3 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-2",children:"Search Engine Listing"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Add a title and description to see how this product might appear in a search engine listing."}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Page Title"}),n.jsx("input",{type:"text",value:s,onChange:i,placeholder:"Enter page title",maxLength:70,className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"}),n.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:[s.length,"/70 characters"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta Description"}),n.jsx("textarea",{value:r,onChange:l,placeholder:"Enter meta description",maxLength:160,rows:3,className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors resize-none"}),n.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:[r.length,"/160 characters"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL Handle"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-base",children:"products/"}),n.jsx("input",{type:"text",value:e,onChange:c,placeholder:"Enter URL handle",className:"w-full pl-20 pr-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"This will be the URL for your product page"})]})]})]})},nae=["lb","oz","kg","grams"],sae=["United States","Canada","United Kingdom","Germany","France","Italy","Spain","Netherlands","Belgium","Switzerland","Austria","Sweden","Norway","Denmark","Finland","Poland","Czech Republic","Hungary","Portugal","Greece","Ireland","Luxembourg","Slovakia","Slovenia","Croatia","Romania","Bulgaria","Lithuania","Latvia","Estonia","Malta","Cyprus","Japan","South Korea","China","India","Australia","New Zealand","Brazil","Argentina","Chile","Mexico","South Africa","Israel","Turkey","Russia","Ukraine","Thailand","Singapore","Malaysia","Indonesia","Philippines","Vietnam","Taiwan","Hong Kong","Saudi Arabia","United Arab Emirates","Egypt","Morocco","Nigeria","Kenya","Ghana","Ethiopia","Tanzania","Uganda","Rwanda","Senegal","Ivory Coast","Cameroon","Algeria","Tunisia","Libya","Sudan","Angola","Mozambique","Zambia","Zimbabwe","Botswana","Namibia","Lesotho","Swaziland","Madagascar","Mauritius","Seychelles","Comoros","Djibouti","Somalia","Eritrea","South Sudan","Central African Republic","Chad","Niger","Mali","Burkina Faso","Guinea","Sierra Leone","Liberia","Gambia","Guinea-Bissau","Cape Verde","So Tom and Prncipe","Equatorial Guinea","Gabon","Republic of the Congo","Democratic Republic of the Congo","Burundi","Malawi"],aae=({physicalProduct:s,selectedPackage:r,productWeight:e,weightUnit:t,countryOfOrigin:a,hsCode:o,onPhysicalProductChange:i,onSelectedPackageChange:l,onProductWeightChange:c,onWeightUnitChange:d,onCountryOfOriginChange:p,onHsCodeChange:h,activeStoreId:g})=>{const{packagings:y,fetchPackagingsByStoreId:b}=rj();u.useEffect(()=>{g&&b(g)},[g,b]);const v=u.useCallback(R=>{i(R.target.checked)},[i]),w=u.useCallback(R=>{l(R.target.value)},[l]),C=u.useCallback(R=>{c(R.target.value)},[c]),k=u.useCallback(R=>{d(R.target.value)},[d]),N=u.useCallback(R=>{p(R.target.value)},[p]),O=u.useCallback(R=>{h(R.target.value)},[h]);return n.jsxs("div",{className:"mb-6 border border-gray-200 p-3 bg-white/95",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Shipping"}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:s,onChange:v,className:"w-3.5 h-3.5 text-gray-900 focus:ring-gray-400 rounded border-gray-300"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Physical product"})]})]}),s&&n.jsxs("div",{children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Package"}),n.jsxs("select",{value:r,onChange:w,className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors",children:[n.jsx("option",{value:"",children:"Select a package"}),y.map(R=>n.jsxs("option",{value:R._id,children:[R.packageName," - ",R.length," x ",R.width," x ",R.height," ",R.dimensionsUnit,", ",R.weight," ",R.weightUnit]},R._id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product weight"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"number",value:e,onChange:C,placeholder:"0.00",className:"flex-1 px-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"}),n.jsxs("select",{value:t,onChange:k,className:"px-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors min-w-[100px]",children:[n.jsx("option",{value:"",disabled:!0,children:"Unit"}),nae.map(R=>n.jsx("option",{value:R,children:R},R))]})]})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Customs Information"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country/Region of Origin"}),n.jsxs("select",{value:a,onChange:N,className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors",children:[n.jsx("option",{value:"",children:"Select a country"}),sae.map(R=>n.jsx("option",{value:R,children:R},R))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Harmonized System (HS) Code"}),n.jsx("input",{type:"text",value:o,onChange:O,placeholder:"Enter a six-digit code or search by keyword",className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Enter a six-digit code or search by keyword"})]})]})]})]})]})},oae=({status:s,onChange:r})=>{const e=u.useCallback(t=>{r(t.target.value)},[r]);return n.jsxs("div",{className:"mb-6 border border-gray-200 p-3 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Status"}),n.jsxs("fieldset",{children:[n.jsx("legend",{className:"text-xs font-medium text-gray-600 mb-2",children:"Product Status"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",value:"active",checked:s==="active",onChange:e,className:"w-3.5 h-3.5 text-gray-900 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Active (visible to customers)"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",value:"draft",checked:s==="draft",onChange:e,className:"w-3.5 h-3.5 text-gray-900 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Draft (not visible to customers)"})]})]})]})]})},lM=u.createContext(void 0),iae=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),[l,c]=u.useState([]),[d,p]=u.useState(null),h=u.useCallback(async L=>{try{a(!0),i(null);const B=await nt.post("/products",L),{success:G,data:$}=B.data;if(!G)throw new Error("Failed to create product");return e(z=>[$,...z]),$}catch(B){const G=B?.response?.data?.message||B?.message||"Failed to create product";throw i(G),B}finally{a(!1)}},[]),g=u.useCallback(async L=>{try{a(!0),i(null);const B=await nt.get(`/products/store/${L}`),{success:G,data:$}=B.data;if(!G)throw new Error("Failed to fetch products");e($)}catch(B){const G=B?.response?.data?.message||B?.message||"Failed to fetch products";i(G)}finally{a(!1)}},[]),y=u.useCallback(()=>{e([]),i(null),a(!1)},[]),b=u.useCallback(async(L,B)=>{try{a(!0),i(null);const G=await nt.post(`/products/${L}/variants`,{variants:B}),{success:$,data:z}=G.data;if(!$)throw new Error("Failed to add variants");return z}catch(G){const $=G?.response?.data?.message||G?.message||"Failed to add variants";throw i($),G}finally{a(!1)}},[]),v=u.useCallback(async(L,B)=>{try{a(!0),i(null);const G=await nt.delete(`/products/${L}/variants`,{data:{dimensionName:B}}),{success:$}=G.data;if(!$)throw new Error("Failed to delete variant dimension")}catch(G){const $=G?.response?.data?.message||G?.message||"Failed to delete variant dimension";throw i($),G}finally{a(!1)}},[]),w=u.useCallback(async(L,B,G)=>{try{a(!0),i(null);const $=await nt.post(`/products/${L}/variants/${B}/options`,{optionName:B,values:G}),{success:z,data:Y}=$.data;if(!z)throw new Error("Failed to add option values");return Y}catch($){const z=$?.response?.data?.message||$?.message||"Failed to add option values";throw i(z),$}finally{a(!1)}},[]),C=u.useCallback(async L=>{const{storeId:B,q:G="",originLocationId:$,destinationLocationId:z,page:Y=1,limit:M=20}=L;try{a(!0),i(null);const q=await nt.get("/products/search",{params:{storeId:B,q:G,originLocationId:$,destinationLocationId:z,page:Y,limit:M}});return c(q.data.data||[]),p(q.data.pagination||null),q.data}catch(q){const P=q?.response?.data?.message||q?.message||"Failed to search products";throw i(P),q}finally{a(!1)}},[]),k=u.useCallback(async L=>{const{q:B,storeId:G}=L;try{return a(!0),i(null),(await nt.get("/products/search-basic",{params:{q:B,storeId:G}})).data.data||[]}catch($){const z=$?.response?.data?.message||$?.message||"Failed to search products";throw i(z),$}finally{a(!1)}},[]),N=u.useCallback(async L=>{const{storeId:B,q:G="",page:$=1,limit:z=20}=L;try{return a(!0),i(null),(await nt.get("/products/search-with-variants",{params:{storeId:B,q:G,page:$,limit:z}})).data}catch(Y){const M=Y?.response?.data?.message||Y?.message||"Failed to search products with variants";throw i(M),Y}finally{a(!1)}},[]),O=u.useCallback(async L=>{const{storeId:B,q:G="",destinationLocationId:$,page:z=1,limit:Y=20}=L;try{return a(!0),i(null),(await nt.get("/products/search-product-with-variant-and-destination",{params:{storeId:B,q:G,destinationLocationId:$,page:z,limit:Y}})).data}catch(M){const q=M?.response?.data?.message||M?.message||"Failed to search products with destination availability";throw i(q),M}finally{a(!1)}},[]),R=u.useMemo(()=>({products:r,loading:t,error:o,transferProductSearchResult:l,transferProductSearchPagination:d,createProduct:h,fetchProductsByStoreId:g,clearProducts:y,addVariantsToProduct:b,deleteVariantFromProduct:v,addOptionToProduct:w,searchProductForTransfer:C,searchProductsWithVariants:N,searchBasic:k,searchProductWithVariantAndDestination:O}),[r,t,o,l,d,h,g,y,b,v,w,C,N,k,O]);return n.jsx(lM.Provider,{value:R,children:s})},Ol=()=>{const s=u.useContext(lM);if(!s)throw new Error("useProducts must be used within a ProductProvider");return s},lae=()=>{const{categories:s,fetchBaseCategories:r}=W6(),{createProduct:e,loading:t}=Ol(),{activeStoreId:a}=Ur(),o=dr(),[i,l]=u.useState({title:"",category:"",description:"",status:"draft",productType:"",vendor:"",tags:[],price:"",compareAtPrice:"",unitPriceTotalAmount:"",unitPriceBaseMeasure:"",selectedUnit:"",selectedBaseMeasureUnit:"",chargeTaxOnProduct:!1,cost:"",inventoryTrackingEnabled:!1,quantity:"",sku:"",barcode:"",continueSellingWhenOutOfStock:!1,physicalProduct:!1,selectedPackage:"",productWeight:"",weightUnit:"",countryOfOrigin:"",hsCode:"",variants:[],pageTitle:"",metaDescription:"",urlHandle:"",images:[]});u.useEffect(()=>{r()},[r]);const c=u.useCallback((N,O)=>{l(R=>({...R,[N]:O}))},[]),d=u.useCallback(async()=>{if(!a){alert("Please select a store first");return}try{const N=parseFloat(i.price)||0,O=parseFloat(i.cost)||0,R=N-O,L=N>0?R/N*100:0,B={title:i.title,description:i.description,category:i.category,price:N,compareAtPrice:i.compareAtPrice?parseFloat(i.compareAtPrice):void 0,chargeTax:i.chargeTaxOnProduct,cost:O,profit:R,marginPercent:L,storeId:a,unitPriceTotalAmount:i.unitPriceTotalAmount?parseFloat(i.unitPriceTotalAmount):void 0,unitPriceTotalAmountMetric:i.selectedUnit||void 0,unitPriceBaseMeasure:i.unitPriceBaseMeasure?parseFloat(i.unitPriceBaseMeasure):void 0,unitPriceBaseMeasureMetric:i.selectedBaseMeasureUnit||void 0,inventoryTrackingEnabled:i.inventoryTrackingEnabled,continueSellingWhenOutOfStock:i.continueSellingWhenOutOfStock,sku:i.sku,barcode:i.barcode,isPhysicalProduct:i.physicalProduct,package:i.physicalProduct?i.selectedPackage:void 0,productWeight:i.physicalProduct?parseFloat(i.productWeight):void 0,productWeightUnit:i.physicalProduct?i.weightUnit:void 0,countryOfOrigin:i.physicalProduct?i.countryOfOrigin:void 0,harmonizedSystemCode:i.physicalProduct?i.hsCode:void 0,variants:i.variants,pageTitle:i.pageTitle,metaDescription:i.metaDescription,urlHandle:i.urlHandle,status:i.status,onlineStorePublishing:!0,pointOfSalePublishing:!1,images:i.images.filter(G=>G.trim()!==""),productType:i.productType,vendor:i.vendor,tagIds:i.tags||[]};await e(B),setTimeout(()=>o("/products"),800),l({title:"",category:"",description:"",status:"draft",productType:"",vendor:"",tags:[],price:"",compareAtPrice:"",unitPriceTotalAmount:"",unitPriceBaseMeasure:"",selectedUnit:"",selectedBaseMeasureUnit:"",chargeTaxOnProduct:!1,cost:"",inventoryTrackingEnabled:!1,quantity:"",sku:"",barcode:"",continueSellingWhenOutOfStock:!1,physicalProduct:!1,selectedPackage:"",productWeight:"",weightUnit:"kg",countryOfOrigin:"",hsCode:"",variants:[],pageTitle:"",metaDescription:"",urlHandle:"",images:[]})}catch(N){console.error("Error creating product:",N),alert(`Error creating product: ${N.message||"Unknown error"}`),ha.error("Error creating product")}},[a,i,e,o]),p=u.useCallback(()=>{l(N=>({...N,images:[...N.images,""]}))},[]),h=u.useCallback((N,O)=>{l(R=>({...R,images:R.images.map((L,B)=>B===N?O:L)}))},[]),g=u.useCallback(N=>{l(O=>({...O,images:O.images.filter((R,L)=>L!==N)}))},[]),y=u.useCallback(()=>{l(N=>({...N,variants:[...N.variants,{optionName:"",values:[""]}]}))},[]),b=u.useCallback(N=>{l(O=>({...O,variants:O.variants.filter((R,L)=>L!==N)}))},[]),v=u.useCallback((N,O)=>{l(R=>({...R,variants:R.variants.map((L,B)=>B===N?{...L,optionName:O}:L)}))},[]),w=u.useCallback(N=>{l(O=>({...O,variants:O.variants.map((R,L)=>L===N?{...R,values:[...R.values,""]}:R)}))},[]),C=u.useCallback((N,O)=>{l(R=>({...R,variants:R.variants.map((L,B)=>B===N?{...L,values:L.values.filter((G,$)=>$!==O)}:L)}))},[]),k=u.useCallback((N,O,R)=>{l(L=>({...L,variants:L.variants.map((B,G)=>G===N?{...B,values:B.values.map(($,z)=>z===O?R:$)}:B)}))},[]);return n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsxs("div",{className:"max-w-7xl mx-auto pt-6 px-4 pb-6",children:[n.jsx(Pse,{title:i.title,category:i.category,description:i.description,activeStoreId:a,onTitleChange:N=>c("title",N),onCategoryChange:N=>c("category",N),onDescriptionChange:N=>c("description",N)}),n.jsx(Ise,{images:i.images,onAddImage:p,onUpdateImage:h,onRemoveImage:g}),n.jsx("div",{className:"border-t border-gray-200 my-6"}),n.jsx(oae,{status:i.status,onChange:N=>c("status",N)}),n.jsx("div",{className:"border-t border-gray-200 my-6"}),n.jsx(Zse,{productType:i.productType,vendor:i.vendor,tags:i.tags,onProductTypeChange:N=>c("productType",N),onVendorChange:N=>c("vendor",N),onTagsChange:N=>c("tags",N),activeStoreId:a}),n.jsx("div",{className:"border-t border-gray-200 my-6"}),n.jsx(tae,{price:i.price,compareAtPrice:i.compareAtPrice,unitPriceTotalAmount:i.unitPriceTotalAmount,unitPriceBaseMeasure:i.unitPriceBaseMeasure,selectedUnit:i.selectedUnit,selectedBaseMeasureUnit:i.selectedBaseMeasureUnit,chargeTaxOnProduct:i.chargeTaxOnProduct,cost:i.cost,onPriceChange:N=>c("price",N),onCompareAtPriceChange:N=>c("compareAtPrice",N),onUnitPriceTotalAmountChange:N=>c("unitPriceTotalAmount",N),onUnitPriceBaseMeasureChange:N=>c("unitPriceBaseMeasure",N),onSelectedUnitChange:N=>c("selectedUnit",N),onSelectedBaseMeasureUnitChange:N=>c("selectedBaseMeasureUnit",N),onChargeTaxOnProductChange:N=>c("chargeTaxOnProduct",N),onCostChange:N=>c("cost",N)}),n.jsx("div",{className:"border-t border-gray-200 my-6"}),n.jsx(Rse,{inventoryTrackingEnabled:i.inventoryTrackingEnabled,sku:i.sku,barcode:i.barcode,continueSellingWhenOutOfStock:i.continueSellingWhenOutOfStock,onInventoryTrackingEnabledChange:N=>c("inventoryTrackingEnabled",N),onSkuChange:N=>c("sku",N),onBarcodeChange:N=>c("barcode",N),onContinueSellingWhenOutOfStockChange:N=>c("continueSellingWhenOutOfStock",N)}),n.jsx("div",{className:"border-t border-gray-200 my-6"}),n.jsx(aae,{physicalProduct:i.physicalProduct,selectedPackage:i.selectedPackage,productWeight:i.productWeight,weightUnit:i.weightUnit,countryOfOrigin:i.countryOfOrigin,hsCode:i.hsCode,onPhysicalProductChange:N=>c("physicalProduct",N),onSelectedPackageChange:N=>c("selectedPackage",N),onProductWeightChange:N=>c("productWeight",N),onWeightUnitChange:N=>c("weightUnit",N),onCountryOfOriginChange:N=>c("countryOfOrigin",N),onHsCodeChange:N=>c("hsCode",N),activeStoreId:a}),n.jsx("div",{className:"border-t border-gray-200 my-6"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-3 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Variants"}),n.jsxs("button",{type:"button",onClick:y,className:"flex items-center gap-1.5 px-3 py-1.5 border border-gray-200 rounded text-sm text-gray-700 hover:bg-gray-50 transition-colors mb-4",children:[n.jsx(On,{className:"w-4 h-4"}),"Add options like size or color"]}),i.variants.map((N,O)=>n.jsxs("div",{className:"mb-3 p-4 border border-gray-200 rounded bg-gray-50",children:[n.jsxs("div",{className:"flex justify-between items-center mb-3",children:[n.jsxs("h4",{className:"text-sm font-medium text-gray-900",children:["Option ",O+1]}),n.jsx("button",{type:"button",onClick:()=>b(O),className:"p-1 text-gray-600 hover:bg-gray-100 rounded transition-colors",children:n.jsx(Xs,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1.5",children:"Option Name"}),n.jsx("input",{type:"text",value:N.optionName,onChange:R=>v(O,R.target.value),placeholder:"e.g., Size, Color, Material",className:"w-full px-3 py-1.5 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1.5",children:"Option Values"}),N.values.map((R,L)=>n.jsxs("div",{className:"flex gap-2 mb-2",children:[n.jsx("input",{type:"text",value:R,onChange:B=>k(O,L,B.target.value),placeholder:"Enter value",className:"flex-1 px-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"}),n.jsx("button",{type:"button",onClick:()=>C(O,L),disabled:N.values.length===1,className:"p-1.5 text-gray-600 hover:bg-gray-100 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n.jsx(Xs,{className:"w-3.5 h-3.5"})})]},L)),n.jsxs("button",{type:"button",onClick:()=>w(O),className:"flex items-center gap-1.5 text-xs text-gray-600 hover:text-gray-900 mt-2",children:[n.jsx(On,{className:"w-3.5 h-3.5"}),"Add another value"]})]})]})]},O))]}),n.jsx("div",{className:"border-t border-gray-200 my-6"}),n.jsx(rae,{pageTitle:i.pageTitle,metaDescription:i.metaDescription,urlHandle:i.urlHandle,onPageTitleChange:N=>c("pageTitle",N),onMetaDescriptionChange:N=>c("metaDescription",N),onUrlHandleChange:N=>c("urlHandle",N)})]}),n.jsx("div",{className:"mt-6 flex justify-center",children:n.jsx("button",{type:"button",onClick:d,disabled:t||!a,className:"px-6 py-2.5 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Creating Product...":"Add Product"})})]})})},cM=u.createContext(void 0),cae=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async b=>{a(!0),i(null);try{const{data:v}=await nt.get(`/locations/store/${b}`);e(v.data)}catch(v){i(v?.response?.data?.message||"Failed to fetch locations")}finally{a(!1)}},[]),c=u.useCallback(async b=>{a(!0),i(null);try{const{data:v}=await nt.post("/locations",b);return e(w=>[v.data,...w]),v.data}catch(v){throw i(v?.response?.data?.message||"Failed to create location"),v}finally{a(!1)}},[]),d=u.useCallback(async(b,v)=>{a(!0),i(null);try{const{data:w}=await nt.put(`/locations/${b}`,v);return e(C=>C.map(k=>k._id===b?w.data:k)),w.data}catch(w){throw i(w?.response?.data?.message||"Failed to update location"),w}finally{a(!1)}},[]),p=u.useCallback(async b=>{a(!0),i(null);try{await nt.delete(`/locations/${b}`),e(v=>v.filter(w=>w._id!==b))}catch(v){throw i(v?.response?.data?.message||"Failed to delete location"),v}finally{a(!1)}},[]),h=u.useCallback(()=>i(null),[]),g=u.useCallback(()=>{e([]),i(null),a(!1)},[]),y={locations:r,loading:t,error:o,fetchLocationsByStoreId:l,createLocation:c,updateLocation:d,deleteLocation:p,clearError:h,clearLocations:g};return n.jsx(cM.Provider,{value:y,children:s})},Lp=()=>{const s=u.useContext(cM);if(!s)throw new Error("useLocations must be used within a LocationsProvider");return s},dM=u.createContext(void 0),dae=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(()=>i(null),[]),c=u.useCallback(async b=>{try{a(!0),i(null);const v=await nt.post("/transfers",b);if(!v.data.success)throw new Error("Failed to create transfer");const w=v.data.data;return e(C=>[w,...C]),w}catch(v){const w=v?.response?.data?.message||v?.message||"Failed to create transfer";throw i(w),v}finally{a(!1)}},[]),d=u.useCallback(async b=>{try{a(!0),i(null);const v=await nt.get(`/transfers/store/${b}`);if(!v.data.success)throw new Error("Failed to fetch transfers");const w=v.data.data||[];return e(w),w}catch(v){const w=v?.response?.data?.message||v?.message||"Failed to fetch transfers";throw i(w),v}finally{a(!1)}},[]),p=u.useCallback(async(b,v)=>{try{a(!0),i(null);const w=await nt.put(`/transfers/${b}`,v);if(!w.data.success)throw new Error("Failed to update transfer");return e(C=>C.map(k=>k._id===b?w.data.data:k)),w.data.data}catch(w){const C=w?.response?.data?.message||w?.message||"Failed to update transfer";throw i(C),w}finally{a(!1)}},[]),h=u.useCallback(async b=>{try{if(a(!0),i(null),!(await nt.delete(`/transfers/${b}`)).data.success)throw new Error("Failed to delete transfer");e(w=>w.filter(C=>C._id!==b))}catch(v){const w=v?.response?.data?.message||v?.message||"Failed to delete transfer";throw i(w),v}finally{a(!1)}},[]),g=u.useCallback(async b=>{try{a(!0),i(null),await nt.post(`/transfers/${b}/ready-to-ship`);let v=null;if(e(w=>w.map(C=>C._id===b?(v={...C,status:"ready_to_ship"},v):C)),!v)throw new Error("Transfer not found in local state");return v}catch(v){const w=v?.response?.data?.message||v?.message||"Failed to mark as ready to ship";throw i(w),v}finally{a(!1)}},[]),y={transfers:r,loading:t,error:o,createTransfer:c,fetchTransfersByStoreId:d,updateTransfer:p,deleteTransfer:h,markReadyToShip:g,setTransfers:e,clearError:l};return n.jsx(dM.Provider,{value:y,children:s})},ak=()=>{const s=u.useContext(dM);if(!s)throw new Error("useTransfers must be used within a TransferProvider");return s},Va=({label:s,value:r,options:e,onChange:t,placeholder:a="Select...",disabled:o=!1})=>{const[i,l]=u.useState(!1),c=u.useRef(null);u.useEffect(()=>{const g=y=>{c.current&&!c.current.contains(y.target)&&l(!1)};return document.addEventListener("mousedown",g),()=>{document.removeEventListener("mousedown",g)}},[]);const d=u.useCallback(()=>{o||l(!i)},[o,i]),p=u.useCallback(g=>{t(g),l(!1)},[t]),h=e.find(g=>g.value===r);return n.jsxs("div",{className:"relative",ref:c,children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:s}),n.jsxs("div",{onClick:d,className:`
          w-full min-h-[36px] px-3 py-1.5 text-sm border border-gray-200
          bg-white cursor-pointer flex items-center justify-between
          ${o?"bg-gray-50 cursor-not-allowed":"hover:border-gray-300"}
          ${i?"border-gray-400 ring-1 ring-gray-400":""}
        `,children:[n.jsx("span",{className:h?"text-gray-900":"text-gray-500",children:h?h.label:a}),n.jsx(Ys,{className:`w-4 h-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]}),i&&!o&&n.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 shadow-lg max-h-60 overflow-auto",children:e.length===0?n.jsx("div",{className:"px-3 py-2 text-sm text-gray-600",children:"No options available"}):e.map(g=>{const y=r===g.value;return n.jsx("div",{onClick:()=>p(g.value),className:`
                    px-3 py-2 text-sm cursor-pointer hover:bg-gray-50
                    ${y?"bg-gray-100 text-gray-900":"text-gray-900"}
                  `,children:g.label},g.value)})})]})},Fo=({label:s,value:r,options:e,onChange:t,placeholder:a="Select...",disabled:o=!1,renderValue:i})=>{const[l,c]=u.useState(!1),d=u.useRef(null);u.useEffect(()=>{const b=v=>{d.current&&!d.current.contains(v.target)&&c(!1)};return document.addEventListener("mousedown",b),()=>{document.removeEventListener("mousedown",b)}},[]);const p=u.useCallback(()=>{o||c(!l)},[o,l]),h=u.useCallback(b=>{r.includes(b)?t(r.filter(v=>v!==b)):t([...r,b])},[r,t]),g=u.useCallback((b,v)=>{v.stopPropagation(),t(r.filter(w=>w!==b))},[r,t]),y=u.useCallback(()=>i?i(r):r.length===0?a:e.filter(v=>r.includes(v.value)).map(v=>v.label).join(", "),[r,e,a,i]);return n.jsxs("div",{className:"relative",ref:d,children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:s}),n.jsxs("div",{onClick:p,className:`
          w-full min-h-[36px] px-3 py-1.5 text-sm border border-gray-200
          bg-white cursor-pointer flex items-center justify-between
          ${o?"bg-gray-50 cursor-not-allowed":"hover:border-gray-300"}
          ${l?"border-gray-400 ring-1 ring-gray-400":""}
        `,children:[n.jsx("div",{className:"flex-1 flex flex-wrap gap-1",children:r.length===0?n.jsx("span",{className:"text-gray-500",children:a}):n.jsxs(n.Fragment,{children:[i?n.jsx("span",{className:"text-gray-900",children:y()}):r.slice(0,3).map(b=>{const v=e.find(w=>w.value===b);return v?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-gray-100 text-gray-700 text-xs",children:[v.label,n.jsx("button",{type:"button",onClick:w=>g(b,w),className:"hover:text-gray-900",children:n.jsx(Zs,{className:"w-3 h-3"})})]},b):null}),r.length>3&&n.jsxs("span",{className:"text-gray-600 text-xs",children:["+",r.length-3," more"]})]})}),n.jsx(Ys,{className:`w-4 h-4 text-gray-400 transition-transform ${l?"rotate-180":""}`})]}),l&&!o&&n.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 shadow-lg max-h-60 overflow-auto",children:e.length===0?n.jsx("div",{className:"px-3 py-2 text-sm text-gray-600",children:"No options available"}):e.map(b=>{const v=r.includes(b.value);return n.jsxs("div",{onClick:()=>h(b.value),className:`
                    px-3 py-2 text-sm cursor-pointer hover:bg-gray-50 flex items-center justify-between
                    ${v?"bg-gray-100":""}
                  `,children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-sm text-gray-900",children:b.label}),b.secondaryText&&n.jsx("div",{className:"text-xs text-gray-600",children:b.secondaryText})]}),v&&n.jsx("div",{className:"w-4 h-4 bg-gray-900 flex items-center justify-center",children:n.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},b.value)})})]})},uae=()=>{const{activeStoreId:s}=Ur(),{locations:r,fetchLocationsByStoreId:e}=Lp(),{searchProductForTransfer:t,transferProductSearchResult:a,loading:o}=Ol(),{tags:i,fetchByStore:l}=L2(),{createTransfer:c,loading:d}=ak(),p=dr(),[h,g]=u.useState(""),[y,b]=u.useState(""),[v,w]=u.useState(""),[C,k]=u.useState(""),[N,O]=u.useState(new Set),[R,L]=u.useState(""),[B,G]=u.useState(""),[$,z]=u.useState(""),[Y,M]=u.useState([]),q=u.useMemo(()=>i.map(Pe=>({value:Pe.name,label:Pe.name})),[i]),[P,H]=u.useState(!1),[D,X]=u.useState([]),[se,Q]=u.useState({}),xe=Pe=>{O($e=>{const we=new Set($e);return we.delete(Pe),we}),X($e=>$e.filter(we=>we.variantId!==Pe)),Q($e=>{const{[Pe]:we,...Ae}=$e;return Ae})};u.useEffect(()=>{s&&e(s)},[s,e]),u.useEffect(()=>{s&&l(s)},[s,l]),u.useEffect(()=>{const Pe=setTimeout(()=>k(v.trim()),450);return()=>clearTimeout(Pe)},[v]),u.useEffect(()=>{s&&h&&y&&C.length>0&&(async()=>{try{await t({storeId:String(s),q:C,originLocationId:h,destinationLocationId:y,page:1,limit:20})}catch{}})()},[C,h,y,s,t]);const K=u.useMemo(()=>!!(h&&y),[h,y]),Z=N.size,ve=Pe=>{O($e=>{const we=new Set($e);return we.has(Pe)?we.delete(Pe):we.add(Pe),we})},ae=u.useMemo(()=>r.map(Pe=>({value:Pe._id,label:Pe.name})),[r]),Se=u.useMemo(()=>r.map(Pe=>({value:Pe._id,label:Pe.name})),[r]);return n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-2",children:[n.jsx("button",{onClick:()=>p("/products/transfers"),className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(gn,{className:"w-4 h-4"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Create Transfer"})]})}),n.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 space-y-4",children:[n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Origin and Destination"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[n.jsx(Va,{label:"Origin Location",value:h,options:ae,onChange:Pe=>{Pe!==y&&g(Pe)},placeholder:"Select origin location"}),n.jsx(Va,{label:"Destination Location",value:y,options:Se,onChange:Pe=>{Pe!==h&&b(Pe)},placeholder:"Select destination location"})]})]}),n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Add Products"}),n.jsxs("div",{className:"relative mb-3",children:[n.jsx("input",{type:"text",placeholder:K?"Search products by title or SKU":"Select origin and destination to start searching",value:v,onChange:Pe=>w(Pe.target.value),disabled:!K,className:"w-full px-3 py-1.5 pl-10 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 disabled:bg-gray-50 disabled:text-gray-500"}),n.jsx(no,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"})]}),K&&n.jsxs("div",{className:"space-y-3 mt-3",children:[a.map(Pe=>{const $e=Pe.product.imageUrls?.[0];return n.jsxs("div",{className:"border border-gray-200 p-3",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[$e?n.jsx("img",{src:$e,alt:Pe.product.title,className:"w-12 h-12 object-cover"}):n.jsx("div",{className:"w-12 h-12 bg-gray-200"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:Pe.product.title}),n.jsxs("p",{className:"text-xs text-gray-600 font-mono",children:["SKU: ",Pe.product.sku]})]})]}),n.jsx("div",{className:"border border-gray-200 overflow-hidden",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-white",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 w-12"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-900",children:"Variant"}),n.jsx("th",{className:"px-3 py-2 text-right text-sm font-medium text-gray-900",children:"Available at Origin"}),n.jsx("th",{className:"px-3 py-2 text-right text-sm font-medium text-gray-900",children:"Available at Destination"})]})}),n.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[Pe.variants.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:4,className:"px-3 py-4 text-center text-sm text-gray-600",children:"No variants available"})}),Pe.variants.map(we=>{const Ae=Object.entries(we.optionValues||{}).map(([ze,Ge])=>String(Ge)).join(" / ");return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"checkbox",checked:N.has(we._id),onChange:()=>ve(we._id),className:"w-4 h-4 text-gray-900 border-gray-200 focus:ring-gray-400"})}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("p",{className:"text-sm text-gray-900",children:Ae||"Default"})}),n.jsx("td",{className:"px-3 py-2 text-right",children:n.jsx("p",{className:`text-sm font-medium ${(we.availability?.origin??0)>0?"text-gray-900":"text-gray-600"}`,children:we.availability?.origin??0})}),n.jsx("td",{className:"px-3 py-2 text-right",children:n.jsx("p",{className:`text-sm font-medium ${(we.availability?.destination??0)>0?"text-gray-900":"text-gray-600"}`,children:we.availability?.destination??0})})]},we._id)})]})]})})]},Pe.product._id)}),o&&n.jsx("div",{className:"text-center py-4",children:n.jsx("div",{className:"animate-spin rounded-full w-4 h-4 border-2 border-gray-300 border-t-gray-900 mx-auto"})}),!o&&K&&C&&a.length===0&&n.jsx("div",{className:"text-center py-4",children:n.jsx("p",{className:"text-sm text-gray-600",children:"No products found matching your search."})}),a.length>0&&n.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 border border-gray-200",children:[n.jsxs("p",{className:"text-sm text-gray-600",children:[Z," variant",Z===1?"":"s"," selected"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>O(new Set),className:"px-3 py-1.5 text-sm font-medium border border-gray-200 hover:bg-gray-50 transition-colors",children:"Clear Selection"}),n.jsxs("button",{disabled:Z===0,onClick:()=>{const Pe=[];a.forEach(we=>{const Ae=we.product.imageUrls?.[0];we.variants.forEach(ze=>{if(!N.has(ze._id))return;const Ge=Object.entries(ze.optionValues||{}).map(([Ue,ht])=>String(ht)).join(" / ");Pe.push({variantId:ze._id,productTitle:we.product.title,productSku:we.product.sku,productImage:Ae,variantLabel:Ge||"Default",sku:ze.sku,originAvailable:ze.availability?.origin??0})})}),X(Pe);const $e={};Pe.forEach(we=>{$e[we.variantId]=$e[we.variantId]??0}),Q($e),H(!0)},className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:["Add ",Z||0," Variant",Z===1?"":"s"," to Transfer"]})]})]})]})]}),P&&n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Selected Variants"}),n.jsx("div",{className:"border border-gray-200 overflow-hidden",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-white",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Product"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"SKU"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Available at Origin"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Transfer Quantity"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Actions"})]})}),n.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[D.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-sm text-gray-600",children:"No variants selected."})}),D.map(Pe=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[Pe.productImage?n.jsx("img",{src:Pe.productImage,alt:Pe.productTitle,className:"w-10 h-10 object-cover"}):n.jsx("div",{className:"w-10 h-10 bg-gray-200"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:Pe.productTitle}),n.jsx("p",{className:"text-xs text-gray-600",children:Pe.variantLabel})]})]})}),n.jsx("td",{className:"px-4 py-2",children:n.jsx("p",{className:"text-sm text-gray-900 font-mono",children:Pe.sku})}),n.jsx("td",{className:"px-4 py-2 text-right",children:n.jsx("p",{className:`text-sm font-medium ${Pe.originAvailable>0?"text-gray-900":"text-gray-600"}`,children:Pe.originAvailable})}),n.jsx("td",{className:"px-4 py-2 text-right",children:n.jsx("input",{type:"number",min:0,max:Pe.originAvailable,value:se[Pe.variantId]??0,onChange:$e=>{const we=Math.max(0,Math.min(Number($e.target.value||0),Pe.originAvailable));Q(Ae=>({...Ae,[Pe.variantId]:we}))},className:"w-24 px-2 py-1 text-sm border border-gray-200 text-right focus:outline-none focus:ring-1 focus:ring-gray-400"})}),n.jsx("td",{className:"px-4 py-2 text-right",children:n.jsx("button",{onClick:()=>xe(Pe.variantId),className:"p-1 text-gray-600 hover:text-red-600 transition-colors",children:n.jsx(Xs,{className:"w-4 h-4"})})})]},Pe.variantId))]})]})})]}),n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Notes"}),n.jsx("textarea",{rows:4,placeholder:"Add any notes for this transfer...",value:R,onChange:Pe=>L(Pe.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 resize-y"})]}),n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Transfer Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Transfer Date"}),n.jsx("input",{type:"date",value:B,onChange:Pe=>G(Pe.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Reference Name"}),n.jsx("input",{type:"text",placeholder:"Optional reference name",value:$,onChange:Pe=>z(Pe.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]})]})]}),n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Tags"}),n.jsx(Fo,{label:"Select Tags",value:Y,options:q,onChange:M,placeholder:"No tags"})]}),n.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:n.jsx("button",{disabled:!h||!y||Object.values(se).every(Pe=>(Pe||0)<=0)||d,onClick:async()=>{const Pe=Object.entries(se).filter(([,we])=>(we||0)>0).map(([we,Ae])=>({variantId:we,quantity:Ae}));if(!s||!h||!y||Pe.length===0)return;const $e=Y.map(we=>i.find(Ae=>Ae.name===we)?._id).filter(Boolean);try{await c({storeId:String(s),originLocationId:h,destinationLocationId:y,referenceName:$,note:R,tags:$e,transferDate:B||void 0,entries:Pe}),p("/products/transfers")}catch{}},className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:d?"Creating Transfer":"Create Transfer"})})]})]})})},fae=s=>({orderId:s||"#1002",orderDate:"2024-02-11T10:30:00Z",status:"fulfilled",paymentStatus:"paid",items:[{id:"1",name:"Classic White T-Shirt",sku:"TSH-001-WHT",image:"https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=200&h=200&fit=crop",quantity:2,price:29.99,total:59.98},{id:"2",name:"Denim Jeans",sku:"JNS-002-BLU",image:"https://images.unsplash.com/photo-1542272604-787c3835535d?w=200&h=200&fit=crop",quantity:1,price:79.99,total:79.99},{id:"3",name:"Leather Sneakers",sku:"SNK-003-BLK",image:"https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=200&h=200&fit=crop",quantity:1,price:129.99,total:129.99}],customer:{name:"Wade Warren",email:"wade.warren@example.com",phone:"+1 (555) 123-4567"},shippingAddress:{name:"Wade Warren",address:"123 Main Street",apartment:"Apt 4B",city:"New York",state:"NY",zipCode:"10001",country:"United States",phone:"+1 (555) 123-4567"},billingAddress:{name:"Wade Warren",address:"123 Main Street",apartment:"Apt 4B",city:"New York",state:"NY",zipCode:"10001",country:"United States"},payment:{method:"Credit Card",cardLast4:"4242",status:"paid"},summary:{subtotal:269.96,tax:21.6,shipping:9.99,total:301.55},notes:"Please leave package at front door. Ring doorbell twice.",createdAt:"2024-02-11T10:30:00Z",updatedAt:"2024-02-12T14:20:00Z"}),pae=()=>{const{orderId:s}=ks(),r=dr(),e=fae(s||""),t=o=>`$${o.toFixed(2)}`,a=o=>new Date(o).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return n.jsx(Yt,{children:n.jsx("div",{className:"min-h-screen",children:n.jsxs("div",{className:"max-w-7xl mx-auto pt-6 px-4 pb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("button",{onClick:()=>r("/orders"),className:"flex items-center gap-1.5 px-3 py-1.5 text-sm text-gray-700 hover:text-gray-900 hover:bg-gray-50 rounded transition-colors",children:[n.jsx(gn,{className:"w-4 h-4"}),"Back"]}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-xl font-medium text-gray-900",children:["Order ",e.orderId]}),n.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:a(e.orderDate)})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"px-2.5 py-1 rounded text-xs font-medium bg-green-100 text-green-700",children:e.status.charAt(0).toUpperCase()+e.status.slice(1)}),n.jsx("span",{className:"px-2.5 py-1 rounded text-xs font-medium bg-green-100 text-green-700",children:e.paymentStatus.charAt(0).toUpperCase()+e.paymentStatus.slice(1)})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(qw,{className:"w-5 h-5 text-gray-600"}),n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Order Items"})]}),n.jsx("div",{className:"space-y-4",children:e.items.map((o,i)=>n.jsxs("div",{children:[n.jsxs("div",{className:"flex gap-4",children:[n.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded flex-shrink-0 overflow-hidden",children:n.jsx("img",{src:o.image,alt:o.name,className:"w-full h-full object-cover",onError:l=>{l.target.src="https://via.placeholder.com/80?text=Product"}})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:o.name}),n.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:["SKU: ",o.sku]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"text-xs text-gray-600",children:["Quantity: ",o.quantity,"  ",t(o.price)]}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:t(o.total)})]})]})]}),i<e.items.length-1&&n.jsx("div",{className:"border-t border-gray-200 mt-4"})]},o.id))})]}),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Order Notes"}),n.jsx("p",{className:"text-sm text-gray-600",children:e.notes})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(iB,{className:"w-5 h-5 text-gray-600"}),n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Order Summary"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Subtotal"}),n.jsx("span",{className:"text-gray-900 font-medium",children:t(e.summary.subtotal)})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Tax"}),n.jsx("span",{className:"text-gray-900 font-medium",children:t(e.summary.tax)})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Shipping"}),n.jsx("span",{className:"text-gray-900 font-medium",children:t(e.summary.shipping)})]}),n.jsx("div",{className:"border-t border-gray-200 pt-2 mt-2",children:n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Total"}),n.jsx("span",{className:"text-base font-medium text-gray-900",children:t(e.summary.total)})]})})]})]}),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(Gw,{className:"w-5 h-5 text-gray-600"}),n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Customer"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Name"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.customer.name})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Email"}),n.jsx("p",{className:"text-sm text-gray-900",children:e.customer.email})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Phone"}),n.jsx("p",{className:"text-sm text-gray-900",children:e.customer.phone})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(ff,{className:"w-5 h-5 text-gray-600"}),n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Shipping Address"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.shippingAddress.name}),n.jsx("p",{className:"text-sm text-gray-600",children:e.shippingAddress.address}),n.jsx("p",{className:"text-sm text-gray-600",children:e.shippingAddress.apartment}),n.jsxs("p",{className:"text-sm text-gray-600",children:[e.shippingAddress.city,", ",e.shippingAddress.state," ",e.shippingAddress.zipCode]}),n.jsx("p",{className:"text-sm text-gray-600",children:e.shippingAddress.country}),n.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Phone: ",e.shippingAddress.phone]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(kp,{className:"w-5 h-5 text-gray-600"}),n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Billing Address"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.billingAddress.name}),n.jsx("p",{className:"text-sm text-gray-600",children:e.billingAddress.address}),n.jsx("p",{className:"text-sm text-gray-600",children:e.billingAddress.apartment}),n.jsxs("p",{className:"text-sm text-gray-600",children:[e.billingAddress.city,", ",e.billingAddress.state," ",e.billingAddress.zipCode]}),n.jsx("p",{className:"text-sm text-gray-600",children:e.billingAddress.country})]})]}),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(ob,{className:"w-5 h-5 text-gray-600"}),n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Payment"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Payment Method"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.payment.method}),n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["   ",e.payment.cardLast4]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Payment Status"}),n.jsx("span",{className:"inline-block px-2.5 py-1 rounded text-xs font-medium bg-green-100 text-green-700",children:e.payment.status.charAt(0).toUpperCase()+e.payment.status.slice(1)})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(Ww,{className:"w-5 h-5 text-gray-600"}),n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Order Information"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Order Date"}),n.jsx("p",{className:"text-sm text-gray-900",children:a(e.orderDate)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Created At"}),n.jsx("p",{className:"text-sm text-gray-900",children:a(e.createdAt)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Last Updated"}),n.jsx("p",{className:"text-sm text-gray-900",children:a(e.updatedAt)})]})]})]})]})]})]})})})},hae=({fulfilledOrders:s=12,percentageChange:r=12.2,minWidth:e})=>n.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200 flex-1 min-w-64",style:e?{minWidth:e}:{},children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("h3",{className:"text-xs text-gray-600 font-normal mb-2",children:"Fulfilled orders over time"}),n.jsx("div",{className:"mb-3",children:n.jsx("span",{className:"text-2xl font-semibold text-gray-900",children:s})}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("svg",{className:"w-3 h-3 text-gray-600",fill:"currentColor",viewBox:"0 0 12 12",children:n.jsx("path",{d:"M6 0L10.392 8H1.608L6 0Z"})}),n.jsxs("span",{className:"text-xs text-gray-600",children:[r>0?"+":"",r,"% last week"]})]})]})}),mae=({orderItems:s=15,percentageChange:r=18.2,minWidth:e})=>n.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200 flex-1 min-w-64",style:e?{minWidth:e}:{},children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("h3",{className:"text-xs text-gray-600 font-normal mb-2",children:"Order items over time"}),n.jsx("div",{className:"mb-3",children:n.jsx("span",{className:"text-2xl font-semibold text-gray-900",children:s})}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("svg",{className:"w-3 h-3 text-gray-600",fill:"currentColor",viewBox:"0 0 12 12",children:n.jsx("path",{d:"M6 0L10.392 8H1.608L6 0Z"})}),n.jsxs("span",{className:"text-xs text-gray-600",children:[r,"% last week"]})]})]})}),gae=({order:s,isSelected:r=!1,onSelect:e,onView:t,onChat:a})=>{const o=l=>`$${l.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,i=l=>{const c=new Date(l),d=c.getDate(),p=c.toLocaleDateString("en-US",{month:"short"}),h=c.getFullYear();return`${d} ${p}, ${h}`};return n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[n.jsx("td",{className:"px-4 py-4",children:n.jsx("input",{type:"radio",checked:r,onChange:()=>e?.(s.orderId),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})}),n.jsx("td",{className:"px-4 py-4",children:n.jsx("button",{onClick:()=>t?.(s.orderId),className:"text-sm font-medium text-gray-900 hover:text-gray-700 hover:underline transition-colors cursor-pointer",children:s.orderId})}),n.jsx("td",{className:"px-4 py-4",children:n.jsx("span",{className:"text-sm text-gray-600",children:i(s.date)})}),n.jsx("td",{className:"px-4 py-4",children:n.jsx("span",{className:"text-sm text-gray-900",children:s.customer})}),n.jsx("td",{className:"px-4 py-4",children:n.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${s.paymentStatus==="pending"?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700"}`,children:[n.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${s.paymentStatus==="pending"?"bg-orange-500":"bg-green-500"}`}),s.paymentStatus==="pending"?"Pending":"Success"]})}),n.jsx("td",{className:"px-4 py-4",children:n.jsx("span",{className:"text-sm font-semibold text-gray-900",children:o(s.total)})}),n.jsx("td",{className:"px-4 py-4",children:n.jsx("span",{className:"text-sm text-gray-600",children:s.delivery})}),n.jsx("td",{className:"px-4 py-4",children:n.jsxs("span",{className:"text-sm text-gray-600",children:[s.items,"items"]})}),n.jsx("td",{className:"px-4 py-4",children:n.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${s.fulfillmentStatus==="unfulfilled"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:[n.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${s.fulfillmentStatus==="unfulfilled"?"bg-red-500":"bg-green-500"}`}),s.fulfillmentStatus==="unfulfilled"?"Unfulfilled":"Fulfilled"]})}),n.jsx("td",{className:"px-4 py-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:()=>t?.(s.orderId),className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors","aria-label":"View order",children:n.jsx(Qd,{className:"w-5 h-5"})}),n.jsx("button",{onClick:()=>a?.(s.orderId),className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors","aria-label":"Chat",children:n.jsx(rp,{className:"w-5 h-5"})})]})})]})},yae=({orders:s,selectedOrderId:r,onOrderSelect:e,onOrderView:t,onOrderChat:a})=>n.jsx("tbody",{className:"bg-white",children:s.length>0?s.map(o=>n.jsx(gae,{order:o,isSelected:r===o.orderId,onSelect:e,onView:t,onChat:a},o.orderId)):n.jsx("tr",{children:n.jsx("td",{colSpan:9,className:"px-4 py-8 text-center text-sm text-gray-500",children:"No orders found"})})}),xae=({orders:s=[{orderId:"#1002",date:"2024-02-11",customer:"Wade Warren",paymentStatus:"pending",total:20,delivery:"N/A",items:2,fulfillmentStatus:"unfulfilled"},{orderId:"#1003",date:"2024-02-11",customer:"Wade Warren",paymentStatus:"success",total:20,delivery:"N/A",items:2,fulfillmentStatus:"fulfilled"},{orderId:"#1004",date:"2024-02-11",customer:"Wade Warren",paymentStatus:"pending",total:20,delivery:"N/A",items:2,fulfillmentStatus:"unfulfilled"},{orderId:"#1005",date:"2024-02-11",customer:"Wade Warren",paymentStatus:"success",total:20,delivery:"N/A",items:2,fulfillmentStatus:"fulfilled"},{orderId:"#1006",date:"2024-02-11",customer:"Wade Warren",paymentStatus:"pending",total:20,delivery:"N/A",items:2,fulfillmentStatus:"unfulfilled"},{orderId:"#1007",date:"2024-02-11",customer:"Wade Warren",paymentStatus:"success",total:20,delivery:"N/A",items:2,fulfillmentStatus:"fulfilled"},{orderId:"#1008",date:"2024-02-11",customer:"Wade Warren",paymentStatus:"success",total:20,delivery:"N/A",items:2,fulfillmentStatus:"fulfilled"},{orderId:"#1009",date:"2024-02-11",customer:"Wade Warren",paymentStatus:"success",total:20,delivery:"N/A",items:2,fulfillmentStatus:"fulfilled"},{orderId:"#1010",date:"2024-02-11",customer:"Wade Warren",paymentStatus:"success",total:20,delivery:"N/A",items:2,fulfillmentStatus:"fulfilled"},{orderId:"#1011",date:"2024-02-11",customer:"Wade Warren",paymentStatus:"success",total:20,delivery:"N/A",items:2,fulfillmentStatus:"fulfilled"},{orderId:"#1012",date:"2024-02-11",customer:"Wade Warren",paymentStatus:"success",total:20,delivery:"N/A",items:2,fulfillmentStatus:"fulfilled"},{orderId:"#1013",date:"2024-02-11",customer:"Wade Warren",paymentStatus:"success",total:20,delivery:"N/A",items:2,fulfillmentStatus:"fulfilled"},{orderId:"#1014",date:"2024-02-11",customer:"Wade Warren",paymentStatus:"success",total:20,delivery:"N/A",items:2,fulfillmentStatus:"fulfilled"},{orderId:"#1015",date:"2024-02-11",customer:"Wade Warren",paymentStatus:"success",total:20,delivery:"N/A",items:2,fulfillmentStatus:"fulfilled"},{orderId:"#1016",date:"2024-02-11",customer:"Wade Warren",paymentStatus:"success",total:20,delivery:"N/A",items:2,fulfillmentStatus:"fulfilled"},{orderId:"#1017",date:"2024-02-11",customer:"Wade Warren",paymentStatus:"success",total:20,delivery:"N/A",items:2,fulfillmentStatus:"fulfilled"}],onAddOrder:r,onOrderSelect:e,onOrderView:t,onOrderChat:a})=>{const[o,i]=u.useState("all"),[l,c]=u.useState(null),d=u.useCallback(y=>{i(y)},[]),p=u.useCallback(()=>{r?r():console.log("Add order clicked")},[r]),h=u.useCallback(y=>{c(y),e&&e(y)},[e]),g=s.filter(y=>{switch(o){case"unfulfilled":return y.fulfillmentStatus==="unfulfilled";case"unpaid":return y.paymentStatus==="pending";case"open":return y.fulfillmentStatus==="unfulfilled"||y.paymentStatus==="pending";case"closed":return y.fulfillmentStatus==="fulfilled"&&y.paymentStatus==="success";default:return!0}});return n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between px-4 pt-4 pb-3 border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-0",children:[n.jsxs("button",{onClick:()=>d("all"),className:`px-3 py-1.5 text-xs font-medium transition-colors relative ${o==="all"?"text-gray-900":"text-gray-600 hover:text-gray-900"}`,children:["All",o==="all"&&n.jsx("span",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gray-900"})]}),n.jsxs("button",{onClick:()=>d("unfulfilled"),className:`px-3 py-1.5 text-xs font-medium transition-colors relative ${o==="unfulfilled"?"text-gray-900":"text-gray-600 hover:text-gray-900"}`,children:["Unfulfilled",o==="unfulfilled"&&n.jsx("span",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gray-900"})]}),n.jsxs("button",{onClick:()=>d("unpaid"),className:`px-3 py-1.5 text-xs font-medium transition-colors relative ${o==="unpaid"?"text-gray-900":"text-gray-600 hover:text-gray-900"}`,children:["Unpaid",o==="unpaid"&&n.jsx("span",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gray-900"})]}),n.jsxs("button",{onClick:()=>d("open"),className:`px-3 py-1.5 text-xs font-medium transition-colors relative ${o==="open"?"text-gray-900":"text-gray-600 hover:text-gray-900"}`,children:["Open",o==="open"&&n.jsx("span",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gray-900"})]}),n.jsxs("button",{onClick:()=>d("closed"),className:`px-3 py-1.5 text-xs font-medium transition-colors relative ${o==="closed"?"text-gray-900":"text-gray-600 hover:text-gray-900"}`,children:["Closed",o==="closed"&&n.jsx("span",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gray-900"})]})]}),n.jsxs("button",{onClick:p,className:"flex items-center gap-1.5 px-3 py-1.5 bg-gray-900 text-white text-xs font-medium rounded hover:bg-gray-800 transition-colors",children:[n.jsx(On,{className:"w-3.5 h-3.5"}),"Add"]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsx("div",{className:"relative max-h-[600px] overflow-y-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"sticky top-0 z-10 bg-gray-50",children:n.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[n.jsx("th",{className:"px-4 py-2 text-left bg-gray-50",children:n.jsx("input",{type:"radio",className:"w-3.5 h-3.5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-600 uppercase tracking-wider bg-gray-50",children:"Order"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-600 uppercase tracking-wider bg-gray-50",children:"Date"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-600 uppercase tracking-wider bg-gray-50",children:"Customer"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-600 uppercase tracking-wider bg-gray-50",children:"Payment"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-600 uppercase tracking-wider bg-gray-50",children:"Total"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-600 uppercase tracking-wider bg-gray-50",children:"Delivery"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-600 uppercase tracking-wider bg-gray-50",children:"Items"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-600 uppercase tracking-wider bg-gray-50",children:"Fulfillment"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-600 uppercase tracking-wider bg-gray-50",children:"Action"})]})}),n.jsx(yae,{orders:g,selectedOrderId:l,onOrderSelect:h,onOrderView:t,onOrderChat:a})]})})})]})},vae=({returnsOrders:s=0,percentageChange:r=-1.2,minWidth:e})=>n.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200 flex-1 min-w-64",style:e?{minWidth:e}:{},children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("h3",{className:"text-xs text-gray-600 font-normal mb-2",children:"Returns Orders"}),n.jsx("div",{className:"mb-3",children:n.jsx("span",{className:"text-2xl font-semibold text-gray-900",children:s})}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[r>=0?n.jsx("svg",{className:"w-3 h-3 text-gray-600",fill:"currentColor",viewBox:"0 0 12 12",children:n.jsx("path",{d:"M6 0L10.392 8H1.608L6 0Z"})}):n.jsx("svg",{className:"w-3 h-3 text-gray-600",fill:"currentColor",viewBox:"0 0 12 12",children:n.jsx("path",{d:"M6 12L1.608 4H10.392L6 12Z"})}),n.jsxs("span",{className:"text-xs text-gray-600",children:[r>0?"+":"",r,"% last week"]})]})]})}),bae=({totalOrders:s=21,percentageChange:r=25.2,minWidth:e})=>n.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200 flex-1 min-w-64",style:e?{minWidth:e}:{},children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("h3",{className:"text-xs text-gray-600 font-normal mb-2",children:"Total Orders"}),n.jsx("div",{className:"mb-3",children:n.jsx("span",{className:"text-2xl font-semibold text-gray-900",children:s})}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("svg",{className:"w-3 h-3 text-gray-600",fill:"currentColor",viewBox:"0 0 12 12",children:n.jsx("path",{d:"M6 0L10.392 8H1.608L6 0Z"})}),n.jsxs("span",{className:"text-xs text-gray-600",children:[r,"% last week"]})]})]})}),wae=()=>{const s=dr(),[r,e]=u.useState(!1),[t,a]=u.useState(!1),o=u.useCallback(()=>{console.log("Export clicked")},[]),i=u.useCallback(()=>{s("/orders/create")},[s]),l=u.useCallback(()=>{console.log("Add order clicked")},[]),c=u.useCallback(y=>{console.log("Order selected:",y)},[]),d=u.useCallback(y=>{const b=y.startsWith("#")?y.slice(1):y;s(`/orders/${b}`)},[s]),p=u.useCallback(y=>{console.log("Chat with order:",y)},[]),h=u.useCallback(()=>{e(y=>!y)},[]),g=u.useCallback(()=>{a(y=>!y)},[]);return n.jsx(Yt,{children:n.jsx("div",{className:"min-h-screen pt-3 px-4 pb-6 relative",style:{position:"relative",zIndex:1},children:n.jsxs("div",{className:"max-w-[1600px] mx-auto",children:[n.jsx("div",{className:"mb-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Orders"}),n.jsxs("button",{onClick:h,className:"flex items-center gap-1.5 px-2.5 py-1.5 border border-gray-200 rounded text-xs text-gray-600 bg-white hover:bg-gray-50 transition-colors",children:[n.jsx(Ww,{className:"w-3.5 h-3.5 text-gray-500"}),n.jsx("span",{children:"Oct 1 - Oct 30, 2025"}),n.jsx(Ys,{className:"w-3.5 h-3.5 text-gray-500"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:o,className:"flex items-center gap-1.5 px-3 py-1.5 border border-gray-200 rounded text-xs text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[n.jsx(g2,{className:"w-3.5 h-3.5"}),"Export"]}),n.jsxs("button",{onClick:g,className:"flex items-center gap-1.5 px-3 py-1.5 border border-gray-200 rounded text-xs text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:["More actions",n.jsx(Ys,{className:"w-3.5 h-3.5"})]}),n.jsxs("button",{onClick:i,className:"flex items-center gap-1.5 px-3 py-1.5 bg-gray-900 text-white text-xs font-medium rounded hover:bg-gray-800 transition-colors",children:[n.jsx(On,{className:"w-3.5 h-3.5"}),"Create Order"]})]})]})}),n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{className:"flex gap-3",children:[n.jsx(bae,{totalOrders:21,percentageChange:25.2}),n.jsx(mae,{orderItems:15,percentageChange:18.2}),n.jsx(vae,{returnsOrders:0,percentageChange:-1.2}),n.jsx(hae,{fulfilledOrders:12,percentageChange:12.2})]}),n.jsx(xae,{onAddOrder:l,onOrderSelect:c,onOrderView:d,onOrderChat:p})]})]})})})},uM=u.createContext(void 0),jae=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async v=>{try{a(!0),i(null);const w=await nt.get(`/collections/store/${v}`),{success:C,data:k}=w.data;if(!C)throw new Error("Failed to fetch collections");e(k)}catch(w){i(w?.response?.data?.message||w?.message||"Failed to fetch collections")}finally{a(!1)}},[]),c=u.useCallback(async(v,w,C=1,k=10)=>{try{a(!0),i(null);const N=await nt.get(`/collections/search/${v}?q=${encodeURIComponent(w)}&page=${C}&limit=${k}`),{success:O,data:R,pagination:L}=N.data;if(!O)throw new Error("Failed to search collections");return e(R),{success:O,data:R,pagination:L}}catch(N){const O=N?.response?.data?.message||N?.message||"Failed to search collections";throw i(O),new Error(O)}finally{a(!1)}},[]),d=u.useCallback(async(v,w,C=1,k=10)=>{try{a(!0),i(null);const N=await nt.get(`/collections/${v}/products/search?q=${encodeURIComponent(w)}&page=${C}&limit=${k}`),{success:O,data:R,pagination:L}=N.data;if(!O)throw new Error("Failed to search products in collection");return{success:O,data:R,pagination:L}}catch(N){const O=N?.response?.data?.message||N?.message||"Failed to search products in collection";throw i(O),new Error(O)}finally{a(!1)}},[]),p=u.useCallback(async v=>{try{a(!0),i(null);const w=await nt.post("/collections",v),{success:C,data:k}=w.data;if(!C)throw new Error("Failed to create collection");return e(N=>[k,...N]),k}catch(w){const C=w?.response?.data?.message||w?.message||"Failed to create collection";throw i(C),w}finally{a(!1)}},[]),h=u.useCallback(async(v,w)=>{try{a(!0),i(null);const C=await nt.put(`/collections/${v}`,w),{success:k,data:N}=C.data;if(!k)throw new Error("Failed to update collection");return e(O=>O.map(R=>R._id===v?N:R)),N}catch(C){const k=C?.response?.data?.message||C?.message||"Failed to update collection";throw i(k),C}finally{a(!1)}},[]),g=u.useCallback(async v=>{try{a(!0),i(null);const w=await nt.delete(`/collections/${v}`),{success:C,data:k}=w.data;if(!C)throw new Error("Failed to delete collection");return e(N=>N.filter(O=>O._id!==v)),k.deletedId}catch(w){const C=w?.response?.data?.message||w?.message||"Failed to delete collection";throw i(C),w}finally{a(!1)}},[]),y=u.useCallback(()=>{e([]),i(null),a(!1)},[]),b={collections:r,loading:t,error:o,fetchCollectionsByStoreId:l,searchCollections:c,searchProductsInCollection:d,createCollection:p,updateCollection:h,deleteCollection:g,clearCollections:y};return n.jsx(uM.Provider,{value:b,children:s})},Fp=()=>{const s=u.useContext(uM);if(!s)throw new Error("useCollections must be used within a CollectionProvider");return s},Cae=()=>{const s=dr(),{createCollection:r}=Fp(),{activeStoreId:e}=Ur(),[t,a]=u.useState({title:"",description:"",pageTitle:"",metaDescription:"",urlHandle:"",status:"published"}),o=u.useCallback((c,d)=>{a(p=>({...p,[c]:d}))},[]),i=u.useCallback(()=>{s("/products/collections")},[s]),l=u.useCallback(async()=>{if(!e){s("/products/collections");return}try{await r({storeId:e,title:t.title,description:t.description,pageTitle:t.pageTitle,metaDescription:t.metaDescription,urlHandle:t.urlHandle,onlineStorePublishing:!0,pointOfSalePublishing:!1,status:t.status}),s("/products/collections")}catch{}},[e,t,r,s]);return n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-4",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:i,className:"p-1.5 hover:bg-gray-100 rounded transition-colors","aria-label":"Back",children:n.jsx(gn,{className:"w-4 h-4"})}),n.jsx(Cx,{className:"w-5 h-5 text-gray-600"}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Create Collection"})]}),n.jsxs("button",{onClick:l,className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 transition-colors",children:[n.jsx(On,{className:"w-4 h-4"}),"Save Collection"]})]})})}),n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-4 mb-6",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Title and description"}),n.jsx("div",{className:"border-t border-gray-200 mb-3"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:["Title ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{id:"title",type:"text",value:t.title,onChange:c=>o("title",c.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors",placeholder:"Enter collection title"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),n.jsx("textarea",{id:"description",value:t.description,onChange:c=>o("description",c.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors resize-none",placeholder:"Enter collection description"})]})]})]}),n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-2",children:"Search engine listing"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Add a title and description to see how this collection might appear in a search engine listing."}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"pageTitle",className:"block text-sm font-medium text-gray-700 mb-2",children:"Page title"}),n.jsx("input",{id:"pageTitle",type:"text",value:t.pageTitle,onChange:c=>o("pageTitle",c.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors",placeholder:"Enter page title"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"metaDescription",className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta description"}),n.jsx("textarea",{id:"metaDescription",value:t.metaDescription,onChange:c=>o("metaDescription",c.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors resize-none",placeholder:"Enter meta description"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"urlHandle",className:"block text-sm font-medium text-gray-700 mb-2",children:"URL handle"}),n.jsx("input",{id:"urlHandle",type:"text",value:t.urlHandle,onChange:c=>o("urlHandle",c.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors",placeholder:"Enter URL handle"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Lowercase letters, numbers, and hyphens only"})]})]})]})]}),n.jsx("div",{className:"w-full md:w-[360px]",children:n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Status"}),n.jsx("div",{className:"border-t border-gray-200 mb-3"}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsxs("select",{id:"status",value:t.status,onChange:c=>o("status",c.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors bg-white",children:[n.jsx("option",{value:"draft",children:"Draft"}),n.jsx("option",{value:"published",children:"Published"})]})]})]})})]})})]})})},Sae=({searchQuery:s,filteredProducts:r,selectedProducts:e,onSearchChange:t,onProductSelect:a})=>{const o=s.trim()&&r.length>0;return n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-4 mb-6",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Add products into the collection"}),n.jsx("div",{className:"border-t border-gray-200 mb-3"}),n.jsxs("div",{className:"relative",children:[n.jsxs("div",{className:"relative",children:[n.jsx(no,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search products by title, description, or SKU",value:s,onChange:t,className:"w-full pl-9 pr-3 py-2 text-base border border-gray-200 rounded focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors"})]}),o&&n.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded shadow-lg max-h-[300px] overflow-y-auto",children:r.slice(0,10).map(i=>{const l=e.some(c=>c?._id===i?._id);return n.jsxs("button",{onClick:()=>a(i),disabled:l,className:`w-full text-left px-3 py-2 flex items-center gap-2 hover:bg-gray-50 transition-colors ${l?"opacity-60 bg-gray-50 cursor-not-allowed":"cursor-pointer"}`,children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center shrink-0 ${l?"bg-green-500":"bg-gray-900"}`,children:i?.imageUrl?n.jsx("img",{src:i.imageUrl,alt:i.title||"Product",className:"w-full h-full rounded-full object-cover"}):n.jsx(Cx,{className:"w-4 h-4 text-white"})}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm font-medium text-gray-900 truncate",children:i?.title||"Untitled Product"}),l&&n.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:"Selected"})]})})]},i?._id||Math.random())})}),s.trim()&&r.length===0&&n.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded shadow-lg",children:n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No products found"})})]})]})},Nae=({collection:s,onEdit:r,onDelete:e})=>n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-4 mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Overview"}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("button",{onClick:r,className:"p-1.5 hover:bg-gray-100 rounded transition-colors","aria-label":"Edit collection",children:n.jsx(Bo,{className:"w-4 h-4 text-gray-600"})}),n.jsx("button",{onClick:e,className:"p-1.5 hover:bg-gray-100 rounded transition-colors","aria-label":"Delete collection",children:n.jsx(Xs,{className:"w-4 h-4 text-gray-600"})})]})]}),n.jsx("div",{className:"border-t border-gray-200 mb-3"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:s.description||"No description"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Page title"}),n.jsx("p",{className:"text-sm text-gray-900",children:s.pageTitle||"-"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"URL handle"}),n.jsx("p",{className:"text-sm text-gray-900",children:s.urlHandle||"-"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Status"}),n.jsx("p",{className:"text-sm text-gray-900 capitalize",children:n.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${s.status==="published"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.status||"draft"})})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Meta description"}),n.jsx("p",{className:"text-sm text-gray-900",children:s.metaDescription||"-"})]})]}),n.jsx("div",{className:"border-t border-gray-200 my-3"}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Last updated: ",new Date(s.updatedAt).toLocaleDateString()]})]}),kae=({isOpen:s,collectionTitle:r,onClose:e,onConfirm:t})=>n.jsx(en,{open:s,onClose:e,title:"Delete collection",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:e,className:"px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-100 transition-colors",children:"No"}),n.jsx("button",{onClick:t,className:"px-3 py-1.5 text-sm font-medium text-white bg-red-600 hover:bg-red-700 transition-colors",children:"Yes"})]}),children:n.jsxs("p",{className:"text-sm text-gray-700",children:["Do you really want to delete"," ",r?`'${r}'`:"this collection","?"]})}),_ae=({isOpen:s,formData:r,onChange:e,onClose:t,onUpdate:a})=>n.jsx(en,{open:s,onClose:t,title:"Edit collection",maxWidth:"md",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:t,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:a,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Update"})]}),children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"edit-title",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Title"}),n.jsx("input",{id:"edit-title",type:"text",value:r.title,onChange:o=>e("title",o.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"edit-description",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Description"}),n.jsx("textarea",{id:"edit-description",value:r.description,onChange:o=>e("description",o.target.value),rows:3,className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors resize-none"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"edit-page-title",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Page title"}),n.jsx("input",{id:"edit-page-title",type:"text",value:r.pageTitle,onChange:o=>e("pageTitle",o.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"edit-meta-description",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Meta description"}),n.jsx("textarea",{id:"edit-meta-description",value:r.metaDescription,onChange:o=>e("metaDescription",o.target.value),rows:3,className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors resize-none"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"edit-url-handle",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"URL handle"}),n.jsx("input",{id:"edit-url-handle",type:"text",value:r.urlHandle,onChange:o=>e("urlHandle",o.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"edit-status",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Status"}),n.jsxs("select",{id:"edit-status",value:r.status,onChange:o=>e("status",o.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors bg-white",children:[n.jsx("option",{value:"draft",children:"Draft"}),n.jsx("option",{value:"published",children:"Published"})]})]})]})}),Eae=({entry:s,onProductClick:r,onRemoveProduct:e})=>{const t=u.useCallback(()=>{s?.productId?._id&&r(s.productId._id)},[s?.productId?._id,r]),a=u.useCallback(o=>{e(o,s?._id)},[s?._id,e]);return n.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded bg-gray-50 hover:bg-gray-100 cursor-pointer transition-colors",onClick:t,children:[n.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-900 flex items-center justify-center shrink-0",children:s?.productId?.images?.[0]?n.jsx("img",{src:s.productId.images[0],alt:s?.productId?.title||"Product",className:"w-full h-full rounded-full object-cover"}):n.jsx(Cx,{className:"w-4 h-4 text-white"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:s?.productId?.title||"Untitled Product"}),n.jsxs("p",{className:"text-xs text-gray-600 mt-0.5 line-clamp-1",children:[s?.productId?.description?.substring(0,80)||"No description available","..."]}),n.jsxs("div",{className:"flex items-center gap-1.5 mt-1.5 flex-wrap",children:[n.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:["$",s?.productId?.price||0]}),n.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium border border-gray-200 text-gray-700",children:s?.productId?.sku||"No SKU"}),n.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium border border-gray-200 text-gray-700",children:s?.productId?.category?.name||"No Category"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[n.jsxs("p",{className:"text-xs text-gray-500 whitespace-nowrap",children:["Added"," ",s?.createdAt?new Date(s.createdAt).toLocaleDateString():"Unknown date"]}),n.jsx("button",{onClick:a,className:"p-1.5 hover:bg-gray-200 rounded transition-colors",children:n.jsx(Xs,{className:"w-4 h-4 text-gray-600"})})]})]})},Tae=({collectionEntries:s,onProductClick:r,onRemoveProduct:e})=>n.jsx("div",{className:"space-y-3",children:s.map(t=>n.jsx(Eae,{entry:t,onProductClick:r,onRemoveProduct:e},t?._id||Math.random()))}),Oae=({collectionEntries:s,loading:r=!1,onProductClick:e,onRemoveProduct:t})=>n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-4",children:[n.jsxs("h2",{className:"text-base font-medium text-gray-900 mb-3",children:["Products in this collection (",s.length,")"]}),n.jsx("div",{className:"border-t border-gray-200 mb-3"}),r?n.jsx("p",{className:"text-sm text-gray-600",children:"Loading products..."}):s.length>0?n.jsx(Tae,{collectionEntries:s,onProductClick:e,onRemoveProduct:t}):n.jsx("p",{className:"text-sm text-gray-600",children:"No products in this collection yet. Use the search above to add products."})]}),Pae=({selectedProducts:s,loading:r=!1,onRemoveProduct:e,onAddProducts:t,onClearAll:a})=>n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-4 mb-6",children:[n.jsxs("h2",{className:"text-base font-medium text-gray-900 mb-3",children:["Products to add to collection (",s.length,")"]}),n.jsx("div",{className:"border-t border-gray-200 mb-3"}),s.length>0?n.jsxs("div",{className:"space-y-2",children:[s.map(o=>n.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded bg-gray-50",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-900 flex items-center justify-center shrink-0",children:o?.imageUrl?n.jsx("img",{src:o.imageUrl,alt:o.title||"Product",className:"w-full h-full rounded-full object-cover"}):n.jsx(Cx,{className:"w-4 h-4 text-white"})}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:o?.title||"Untitled Product"})]}),n.jsx("button",{onClick:()=>e(o?._id),className:"p-1.5 hover:bg-gray-200 rounded transition-colors",children:n.jsx(Xs,{className:"w-4 h-4 text-gray-600"})})]},o?._id||Math.random())),n.jsxs("div",{className:"flex gap-2 mt-3",children:[n.jsx("button",{onClick:t,disabled:s.length===0||r,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 rounded hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:r?"Adding products...":`Add ${s.length===1?"one product":s.length+" products"} to collection`}),n.jsx("button",{onClick:a,disabled:s.length===0,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Clear all"})]})]}):n.jsx("p",{className:"text-sm text-gray-600",children:"No products selected. Use the search above to add products to this collection."})]}),fM=u.createContext(void 0),Aae=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async h=>{a(!0),i(null);try{const y=(await nt.post("/collection-entries",h)).data.data;return e(b=>[y,...b]),y}catch(g){const y=g?.response?.data?.message||g?.message||"Failed to create collection entry";throw i(y),new Error(y)}finally{a(!1)}},[]),c=u.useCallback(async h=>{a(!0),i(null);try{const y=(await nt.get(`/collection-entries/collection/${h}`)).data?.data??[];return e(y),y}catch(g){const y=g?.response?.data?.message||g?.message||"Failed to fetch collection entries";throw i(y),new Error(y)}finally{a(!1)}},[]),d=u.useCallback(async h=>{a(!0),i(null);try{const g=await nt.delete(`/collection-entries/${h}`);e(y=>y.filter(b=>b._id!==h))}catch(g){const y=g?.response?.data?.message||g?.message||"Failed to delete collection entry";throw i(y),new Error(y)}finally{a(!1)}},[]),p=u.useMemo(()=>({collectionEntries:r,loading:t,error:o,createCollectionEntry:l,fetchCollectionEntriesByCollectionId:c,deleteCollectionEntry:d}),[r,t,o,l,c,d]);return n.jsx(fM.Provider,{value:p,children:s})},Mae=()=>{const s=u.useContext(fM);if(!s)throw new Error("useCollectionEntries must be used within a CollectionEntriesProvider");return s},Iae=()=>{const{id:s}=ks(),r=dr(),{collections:e,deleteCollection:t,updateCollection:a}=Fp(),{fetchProductsByStoreId:o,searchBasic:i}=Ol(),{createCollectionEntry:l,deleteCollectionEntry:c,fetchCollectionEntriesByCollectionId:d,collectionEntries:p,loading:h}=Mae(),[g,y]=u.useState(!1),[b,v]=u.useState(!1),[w,C]=u.useState(""),[k,N]=u.useState([]),[O,R]=u.useState([]),L=e.find(Ae=>Ae._id===s),B=u.useMemo(()=>({title:L?.title||"",description:L?.description||"",pageTitle:L?.pageTitle||"",metaDescription:L?.metaDescription||"",urlHandle:L?.urlHandle||"",status:L?.status||"published"}),[L]),[G,$]=u.useState(B);u.useEffect(()=>{$(B)},[B]),u.useEffect(()=>{L?.storeId&&o(L.storeId)},[L?.storeId,o]),u.useEffect(()=>{s&&d(s)},[s,d]),u.useEffect(()=>{let Ae=!1;const ze=async()=>{const Ue=w.trim();if(!Ue){N([]);return}try{const ht=await i({q:Ue,storeId:L?.storeId});Ae||N(ht)}catch{Ae||N([])}},Ge=setTimeout(()=>{ze()},300);return()=>{Ae=!0,clearTimeout(Ge)}},[w,i,L?.storeId]);const z=u.useCallback(()=>{r("/products/collections")},[r]),Y=u.useCallback(Ae=>{const ze=Ae.target.value;C(ze)},[]),M=u.useCallback(()=>{C("")},[]),q=u.useCallback(Ae=>{O.some(Ge=>Ge._id===Ae._id)||R(Ge=>[...Ge,Ae]),M()},[O,M]),P=u.useCallback(Ae=>{R(ze=>ze.filter(Ge=>Ge._id!==Ae))},[]),H=u.useCallback(async()=>{if(!(!L?._id||O.length===0))try{const Ae=O.map(ze=>l({collectionId:L._id,productId:ze._id}));await Promise.all(Ae),R([]),console.log("Successfully added products to collection")}catch(Ae){console.error("Failed to add products to collection:",Ae)}},[L?._id,O,l]),D=u.useCallback(async Ae=>{try{await c(Ae),console.log("Successfully removed product from collection")}catch(ze){console.error("Failed to remove product from collection:",ze)}},[c]),X=u.useCallback(async()=>{if(L?._id)try{await t(L._id)}finally{r("/products/collections")}else y(!1)},[L?._id,t,r]),se=u.useCallback(async()=>{if(!L?._id){v(!1);return}try{await a(L._id,{title:G.title,description:G.description,pageTitle:G.pageTitle,metaDescription:G.metaDescription,urlHandle:G.urlHandle,status:G.status}),v(!1)}catch{}},[L?._id,G,a]),Q=u.useCallback(()=>{v(!0)},[]),xe=u.useCallback(()=>{v(!1)},[]),K=u.useCallback(()=>{y(!0)},[]),Z=u.useCallback(()=>{y(!1)},[]),ve=u.useCallback(()=>{R([])},[]),ae=u.useCallback(Ae=>{q(Ae)},[q]),Se=u.useCallback(Ae=>{P(Ae)},[P]),Pe=u.useCallback(Ae=>{Ae&&r(`/products/${Ae}`)},[r]),$e=u.useCallback((Ae,ze)=>{Ae.stopPropagation(),D(ze)},[D]),we=u.useCallback((Ae,ze)=>{$(Ge=>({...Ge,[Ae]:ze}))},[]);return w.trim()&&k.length>0,n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-4",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:z,className:"p-1.5 hover:bg-gray-100 rounded transition-colors","aria-label":"Back",children:n.jsx(gn,{className:"w-4 h-4"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:L?.title||"Collection"})]})})}),n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:L?n.jsxs(n.Fragment,{children:[n.jsx(Nae,{collection:L,onEdit:Q,onDelete:K}),n.jsx(Sae,{searchQuery:w,filteredProducts:k,selectedProducts:O,onSearchChange:Y,onProductSelect:ae}),n.jsx(Pae,{selectedProducts:O,loading:h,onRemoveProduct:Se,onAddProducts:H,onClearAll:ve}),n.jsx(Oae,{collectionEntries:p,loading:h,onProductClick:Pe,onRemoveProduct:$e})]}):n.jsx("div",{className:"text-sm text-gray-600",children:"Collection not found in state."})}),n.jsx(_ae,{isOpen:b,formData:G,onChange:we,onClose:xe,onUpdate:se}),n.jsx(kae,{isOpen:g,collectionTitle:L?.title,onClose:Z,onConfirm:X})]})})},Rae=({collection:s,onClick:r})=>{const e=u.useCallback(()=>{r(s._id)},[r,s._id]);return n.jsxs("tr",{onClick:e,className:"hover:bg-gray-50 cursor-pointer transition-colors",children:[n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium text-gray-900",children:s.title}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-700",children:s.pageTitle}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-700",children:s.urlHandle}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-700 capitalize",children:s.status}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-600",children:s.onlineStorePublishing?"Yes":"No"}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-600",children:s.pointOfSalePublishing?"Yes":"No"}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-600",children:new Date(s.updatedAt).toLocaleDateString()})]})},Dae=({collections:s,onCollectionClick:r,sortOrder:e,onSortToggle:t})=>n.jsx("div",{className:"bg-white rounded border border-gray-200",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Title"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Page Title"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"URL Handle"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Status"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Online Store"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"POS"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:t?n.jsxs("button",{onClick:t,className:"flex items-center gap-1 hover:text-gray-900 transition-colors cursor-pointer",children:["Updated",e&&n.jsx("span",{className:"inline-flex items-center",children:e==="asc"?n.jsx(cm,{className:"w-3.5 h-3.5"}):n.jsx(lm,{className:"w-3.5 h-3.5"})})]}):n.jsx("span",{children:"Updated"})})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(a=>n.jsx(Rae,{collection:a,onClick:r},a._id))})]})})}),Lae=()=>{const{collections:s,fetchCollectionsByStoreId:r,loading:e}=Fp(),{activeStoreId:t}=Ur(),a=dr(),[o,i]=u.useState("desc");u.useEffect(()=>{t&&r(t)},[t,r]);const l=u.useCallback(()=>{a("/products/collections/new")},[a]),c=u.useCallback(h=>{a(`/products/collections/${h}`)},[a]),d=u.useMemo(()=>[...s].sort((g,y)=>{const b=new Date(g.updatedAt).getTime(),v=new Date(y.updatedAt).getTime();return o==="asc"?b-v:v-b}),[s,o]),p=u.useCallback(()=>{i(h=>h==="asc"?"desc":"asc")},[]);return n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-4",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Cx,{className:"w-5 h-5 text-gray-600"}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Collections"})]}),n.jsxs("button",{onClick:l,className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 transition-colors",children:[n.jsx(On,{className:"w-4 h-4"}),"Add Collection"]})]})})}),n.jsxs("div",{className:"max-w-7xl mx-auto py-6 px-4",children:[e&&n.jsx("div",{className:"flex justify-center items-center py-12",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}),!e&&s.length===0&&n.jsx("div",{className:"bg-white rounded border border-gray-200 p-6 text-center",children:n.jsx("p",{className:"text-sm text-gray-600",children:"No collections found for this store."})}),!e&&s.length>0&&n.jsx(Dae,{collections:d,onCollectionClick:c,sortOrder:o,onSortToggle:p})]})]})})},Fae=({isOpen:s,product:r,selectedOptionName:e,newOptionValues:t,submittingOption:a,onClose:o,onSubmit:i,onOptionNameChange:l,onUpdateNewOptionValue:c,onAddNewOptionValue:d,onRemoveNewOptionValue:p})=>n.jsx(en,{open:s,onClose:o,title:"Add Option Values",maxWidth:"md",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:o,disabled:a,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:i,disabled:!e||t.every(h=>!h.trim())||a,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Adding...":"Add Values"})]}),children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Add new values to an existing variant option. This will create new variants with the additional values."}),n.jsxs("select",{value:e,onChange:h=>l(h.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400",children:[n.jsx("option",{value:"",disabled:!0,children:"Select an option to add values to"}),r?.variants?.map((h,g)=>n.jsx("option",{value:h.optionName,children:h.optionName},g))]}),e&&n.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200",children:[n.jsxs("p",{className:"text-sm font-medium mb-2",children:['Current values for "',e,'":']}),n.jsx("div",{className:"flex gap-2 flex-wrap",children:r?.variants?.find(h=>h.optionName===e)?.values?.map((h,g)=>n.jsx("span",{className:"px-2 py-1 text-xs font-medium border border-gray-200 text-gray-700",children:h},g))})]}),n.jsx("p",{className:"text-sm font-medium",children:"New Option Values"}),t.map((h,g)=>n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",className:"flex-1 px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400",placeholder:"Enter new value",value:h,onChange:y=>c(g,y.target.value)}),n.jsx("button",{onClick:()=>p(g),disabled:t.length===1,className:"p-2 text-gray-600 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n.jsx(Xs,{className:"w-4 h-4"})})]},g)),n.jsxs("button",{onClick:d,className:"text-sm text-gray-700 hover:text-gray-900 font-medium mt-1 flex items-center gap-1 w-fit",children:[n.jsx(On,{className:"w-4 h-4"}),"Add another value"]})]})}),Bae=({isOpen:s,variantsForm:r,submittingVariants:e,onClose:t,onSubmit:a,onAddVariantRow:o,onRemoveVariantRow:i,onUpdateVariantOptionName:l,onAddVariantValue:c,onRemoveVariantValue:d,onUpdateVariantValue:p})=>n.jsx(en,{open:s,onClose:t,title:"Add Product Variants",maxWidth:"md",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:t,disabled:e,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:a,disabled:e,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:e?"Saving...":"Save"})]}),children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Add options like size or color. Each option can have multiple values."}),n.jsxs("div",{className:"flex flex-col gap-4",children:[r.map((h,g)=>n.jsxs("div",{className:"p-3 border border-gray-200 bg-gray-50",children:[n.jsxs("div",{className:"flex justify-between items-center mb-3",children:[n.jsxs("p",{className:"text-sm font-medium",children:["Option ",g+1]}),n.jsx("button",{onClick:()=>i(g),className:"p-1 text-gray-600 hover:bg-gray-100 transition-colors",children:n.jsx(Xs,{className:"w-4 h-4"})})]}),n.jsx("input",{type:"text",className:"w-full px-3 py-1.5 text-sm border border-gray-200 mb-3 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400",placeholder:"e.g., Size, Color, Material",value:h.optionName,onChange:y=>l(g,y.target.value)}),n.jsx("p",{className:"text-sm font-medium mb-2",children:"Option Values"}),h.values.map((y,b)=>n.jsxs("div",{className:"flex gap-2 mb-2",children:[n.jsx("input",{type:"text",className:"flex-1 px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400",placeholder:"Enter value",value:y,onChange:v=>p(g,b,v.target.value)}),n.jsx("button",{onClick:()=>d(g,b),disabled:h.values.length===1,className:"p-2 text-gray-600 hover:bg-gray-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n.jsx(Xs,{className:"w-4 h-4"})})]},b)),n.jsxs("button",{onClick:()=>c(g),className:"text-sm text-gray-700 hover:text-gray-900 font-medium mt-1 flex items-center gap-1 w-fit",children:[n.jsx(On,{className:"w-4 h-4"}),"Add another value"]})]},g)),n.jsxs("button",{onClick:o,className:"w-full border border-gray-200 text-gray-700 px-4 py-2 text-sm font-medium hover:bg-gray-50 transition-colors flex items-center justify-center gap-2",children:[n.jsx(On,{className:"w-4 h-4"}),"Add options like size or color"]})]})]})}),zae=({isOpen:s,selectedDimension:r,deletingVariant:e,onClose:t,onConfirm:a})=>n.jsx(en,{open:s,onClose:t,title:n.jsx("span",{className:"text-red-600",children:" Confirm Deletion"}),maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:t,disabled:e,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:a,disabled:e,className:"px-3 py-1.5 text-sm font-medium text-white bg-red-600 hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:e?"Deleting...":"Delete Permanently"})]}),children:n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("p",{className:"text-sm text-gray-900",children:["Are you sure you want to delete the ",n.jsxs("strong",{children:['"',r,'"']})," dimension?"]}),n.jsx("p",{className:"text-sm text-red-600",children:" This action cannot be undone. All product variants containing this dimension will be permanently removed."}),n.jsx("p",{className:"text-sm text-gray-600",children:"If this is the only dimension, the product will revert to a single default variant."})]})}),$ae=({isOpen:s,product:r,selectedDimension:e,onClose:t,onContinue:a,onDimensionChange:o})=>n.jsx(en,{open:s,onClose:t,title:"Delete Variant Dimension",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:t,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:a,disabled:!e,className:"px-3 py-1.5 text-sm font-medium text-white bg-red-600 hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Continue"})]}),children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Select the variant dimension you want to delete from this product. This action will remove all variants that contain this dimension."}),n.jsxs("select",{value:e,onChange:i=>o(i.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400",children:[n.jsx("option",{value:"",disabled:!0,children:"Select a dimension to delete"}),r?.variants?.map((i,l)=>n.jsx("option",{value:i.optionName,children:i.optionName},l))]})]})}),Uae=({product:s})=>n.jsxs("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Category"}),n.jsx("p",{className:"text-sm text-gray-900",children:s.category?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"SKU"}),n.jsx("p",{className:"text-sm text-gray-900",children:s.sku})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Barcode"}),n.jsx("p",{className:"text-sm text-gray-900",children:s.barcode||"N/A"})]})]})]}),Vae=({product:s,variantsCount:r,onAddVariants:e,onDeleteVariant:t,onAddOption:a})=>{const o=dr();return n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex items-center mb-4 justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>o("/products"),className:"p-1.5 hover:bg-gray-50 rounded transition-colors",children:n.jsx(gn,{className:"w-4 h-4 text-gray-700"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:s.title})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:e,className:"bg-gray-900 text-white px-3 py-1.5 rounded text-sm font-medium hover:bg-gray-800 transition-colors",children:"Add Variants"}),n.jsx("button",{onClick:t,disabled:!s?.variants||s.variants.length===0,className:"border border-gray-200 text-gray-700 px-3 py-1.5 rounded text-sm font-medium hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Delete Variant"}),n.jsx("button",{onClick:a,disabled:!s?.variants||s.variants.length===0||r<=1,className:"border border-gray-200 text-gray-700 px-3 py-1.5 rounded text-sm font-medium hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Add Option"})]})]}),s.description&&n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:s.description}),n.jsxs("div",{className:"flex gap-2 flex-wrap",children:[n.jsx("span",{className:`px-2.5 py-1 rounded text-xs font-medium ${s.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:s.status}),s.onlineStorePublishing&&n.jsx("span",{className:"px-2.5 py-1 rounded text-xs font-medium border border-gray-200 text-gray-700",children:"Online"}),s.pointOfSalePublishing&&n.jsx("span",{className:"px-2.5 py-1 rounded text-xs font-medium border border-gray-200 text-gray-700",children:"POS"})]})]})},Hae=({imageUrls:s})=>!Array.isArray(s)||s.length===0?null:n.jsxs("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Images"}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:s.map((r,e)=>n.jsx("div",{className:"relative rounded overflow-hidden border border-gray-200 aspect-square bg-gray-50",children:n.jsx("img",{src:r,alt:`Product image ${e+1}`,className:"w-full h-full object-cover block",onError:t=>{t.currentTarget.style.display="none"}})},`${r}-${e}`))})]}),pM=({onBack:s})=>{const r=dr(),e=()=>{s?s():r("/products")};return n.jsx("div",{className:"max-w-5xl mx-auto py-8",children:n.jsxs("div",{className:"bg-white p-12 text-center rounded-lg border border-gray-200",children:[n.jsx("div",{className:"bg-red-100 w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center",children:n.jsx(Zs,{className:"w-8 h-8 text-red-600"})}),n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Product Not Found"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"The product you're looking for doesn't exist or has been removed."}),n.jsxs("button",{onClick:e,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 mx-auto",children:[n.jsx(gn,{className:"w-5 h-5"}),"Back to Products"]})]})})},Wae=({product:s})=>!s.variants||s.variants.length===0?null:n.jsxs("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Product Options"}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:s.variants.map(r=>n.jsxs("div",{className:"p-4 border border-gray-200 rounded",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:r.optionName}),n.jsx("div",{className:"flex gap-2 flex-wrap",children:r.values.map(e=>n.jsx("span",{className:"px-2.5 py-1 rounded text-xs font-medium border border-gray-200 text-gray-700",children:e},e))})]},r._id))})]}),qae=({product:s})=>n.jsxs("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Organization"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Product Type"}),n.jsx("p",{className:"text-sm text-gray-900",children:s.productType?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Vendor"}),n.jsx("p",{className:"text-sm text-gray-900",children:s.vendor?.name||"N/A"})]})]}),s.tagIds&&s.tagIds.length>0&&n.jsxs("div",{className:"mt-4",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Tags"}),n.jsx("div",{className:"flex gap-2 flex-wrap",children:s.tagIds.map(r=>n.jsx("span",{className:"px-2.5 py-1 rounded text-xs font-medium border border-gray-200 text-gray-700",children:r?.name||"N/A"},r._id))})]})]}),Gae=({product:s})=>n.jsxs("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Pricing"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Price"}),n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["$",s.price.toFixed(2)]})]}),typeof s.compareAtPrice=="number"&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Compare At"}),n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["$",s.compareAtPrice.toFixed(2)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Cost"}),n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["$",s.cost?.toFixed(2)??"0.00"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Profit"}),n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["$",s.profit?.toFixed(2)??"0.00"," (",s.marginPercent?.toFixed(1)??"0.0","%)"]})]})]})]}),Kae=({product:s})=>s.isPhysicalProduct?n.jsxs("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Shipping Information"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Package"}),n.jsx("p",{className:"text-sm text-gray-900",children:s.package?.packageName||"N/A"}),s.package&&n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[s.package.length,"  ",s.package.width,"  ",s.package.height," ",s.package.dimensionsUnit]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Weight"}),n.jsxs("p",{className:"text-sm text-gray-900",children:[s.productWeight," ",s.productWeightUnit]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Origin"}),n.jsx("p",{className:"text-sm text-gray-900",children:s.countryOfOrigin||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"HS Code"}),n.jsx("p",{className:"text-sm text-gray-900",children:s.harmonizedSystemCode||"N/A"})]})]})]}):null,Yae=({product:s})=>n.jsxs("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Status & Details"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Status"}),n.jsx("span",{className:`inline-block px-2.5 py-1 rounded text-xs font-medium ${s.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:s.status})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Inventory Tracking"}),n.jsx("p",{className:"text-sm text-gray-900",children:s.inventoryTrackingEnabled?"Enabled":"Disabled"}),s.inventoryTrackingEnabled&&n.jsxs("p",{className:"text-sm text-gray-900 mt-1",children:["Quantity: ",s.quantity??0]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Continue Selling When Out of Stock"}),n.jsx("p",{className:"text-sm text-gray-900",children:s.continueSellingWhenOutOfStock?"Yes":"No"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Created"}),n.jsx("p",{className:"text-sm text-gray-900",children:new Date(s.createdAt).toLocaleDateString()})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Updated"}),n.jsx("p",{className:"text-sm text-gray-900",children:new Date(s.updatedAt).toLocaleDateString()})]})]})]}),Zae=({variant:s,productId:r})=>{const e=dr(),t=()=>{e(`/products/${r}/variants/${s._id}`)};return n.jsxs("div",{className:"p-6 border border-gray-200 rounded-lg cursor-pointer transition-all hover:shadow-md hover:border-blue-500",onClick:t,children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("p",{className:"text-base font-medium",children:s.sku||"N/A"}),n.jsxs("p",{className:"text-base font-medium",children:["$",s.price?.toFixed(2)||"0.00"]})]}),n.jsx("div",{className:"flex gap-2 flex-wrap mb-4",children:s.optionValues&&Object.entries(s.optionValues).map(([a,o])=>n.jsxs("span",{className:"px-2 py-1 text-xs font-semibold rounded border border-gray-300 text-gray-700",children:[a,": ",o]},`${a}-${o}`))}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Inventory Tracking"}),n.jsx("p",{className:"text-base",children:s.isInventoryTrackingEnabled?"Enabled":"Disabled"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Weight"}),n.jsxs("p",{className:"text-base",children:[s.weightValue||0," ",s.weightUnit||"kg"]})]})]}),n.jsx("div",{className:"mt-4",children:n.jsxs("p",{className:"text-sm text-gray-600",children:["Continue selling: ",s.outOfStockContinueSelling?"Yes":"No"]})})]})},Xae=({variants:s,productId:r,loading:e})=>n.jsxs("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:[n.jsxs("h2",{className:"text-base font-medium text-gray-900 mb-4",children:["Product Variants (",s.length,")"]}),e&&n.jsx("p",{className:"text-sm text-gray-600",children:"Loading variants..."}),!e&&s.length===0&&n.jsx("p",{className:"text-sm text-gray-600",children:"No variants available."}),!e&&s.length>0&&n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(t=>n.jsx(Zae,{variant:t,productId:r},t._id))})]}),hM=u.createContext(void 0),Qae=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async h=>{try{a(!0),i(null);const g=await nt.get(`/product-variants/product/${h}`),{success:y,data:b}=g.data;if(!y)throw new Error("Failed to fetch variants");e(b)}catch(g){const y=g?.response?.data?.message||g?.message||"Failed to fetch variants";i(y)}finally{a(!1)}},[]),c=u.useCallback(async(h,g)=>{try{a(!0),i(null);const y=await nt.put(`/product-variants/${h}`,g),{success:b,data:v}=y.data;if(!b||!v)throw new Error("Failed to update variant");return e(w=>w.map(C=>C._id===h?v:C)),v}catch(y){const b=y?.response?.data?.message||y?.message||"Failed to update variant";throw i(b),y}finally{a(!1)}},[]),d=u.useCallback(()=>{e([]),i(null),a(!1)},[]),p={variants:r,loading:t,error:o,fetchVariantsByProductId:l,updateVariant:c,clearVariants:d};return n.jsx(hM.Provider,{value:p,children:s})},mM=()=>{const s=u.useContext(hM);if(!s)throw new Error("useProductVariants must be used within a ProductVariantProvider");return s},Jae=()=>{const{id:s}=ks();dr();const{products:r,addVariantsToProduct:e,deleteVariantFromProduct:t,addOptionToProduct:a}=Ol(),{fetchVariantsByProductId:o,variants:i,loading:l}=mM(),c=u.useMemo(()=>r.find(ue=>ue._id===s),[r,s]),[d,p]=u.useState(!1),[h,g]=u.useState([{optionName:"",values:[""]}]),[y,b]=u.useState(!1),[v,w]=u.useState(!1),[C,k]=u.useState(""),[N,O]=u.useState(!1),[R,L]=u.useState(!1),[B,G]=u.useState(""),[$,z]=u.useState([""]),[Y,M]=u.useState(!1),q=u.useCallback(()=>{p(!0)},[]),P=u.useCallback(()=>{p(!1),g([{optionName:"",values:[""]}])},[]),H=u.useCallback(()=>{b(!0)},[]),D=u.useCallback(()=>{b(!1),k("")},[]),X=u.useCallback(()=>{C&&(b(!1),w(!0))},[C]),se=u.useCallback(()=>{w(!1),k("")},[]),Q=u.useCallback(()=>{L(!0)},[]),xe=u.useCallback(()=>{L(!1),G(""),z([""])},[]),K=u.useCallback(async()=>{if(!(!c||!C))try{O(!0),await t(c._id,C),await o(c._id),se()}catch(ue){console.error("Failed to delete variant dimension:",ue)}finally{O(!1)}},[c,C,t,o,se]),Z=u.useCallback(()=>{g(ue=>[...ue,{optionName:"",values:[""]}])},[]),ve=u.useCallback(ue=>{g(Oe=>Oe.filter((J,I)=>I!==ue))},[]),ae=u.useCallback((ue,Oe)=>{g(J=>J.map((I,V)=>V===ue?{...I,optionName:Oe}:I))},[]),Se=u.useCallback(ue=>{g(Oe=>Oe.map((J,I)=>I===ue?{...J,values:[...J.values,""]}:J))},[]),Pe=u.useCallback((ue,Oe)=>{g(J=>J.map((I,V)=>V===ue?{...I,values:I.values.filter((re,pe)=>pe!==Oe)}:I))},[]),$e=u.useCallback((ue,Oe,J)=>{g(I=>I.map((V,re)=>re===ue?{...V,values:V.values.map((pe,ge)=>ge===Oe?J:pe)}:V))},[]),[we,Ae]=u.useState(!1),ze=u.useCallback(async()=>{if(!s)return;const ue=h.map(Oe=>({optionName:Oe.optionName.trim(),values:Oe.values.map(J=>J.trim()).filter(Boolean)})).filter(Oe=>Oe.optionName&&Oe.values.length>0);if(ue.length!==0)try{Ae(!0),await e(s,ue),P(),o(s)}catch{}finally{Ae(!1)}},[s,h,e,o,P]),Ge=u.useCallback(async()=>{if(!s||!B)return;const ue=$.filter(Oe=>Oe.trim().length>0);if(ue.length!==0)try{M(!0),console.log("Calling addOptionToProduct with:",{productId:s,optionName:B,values:ue}),await a(s,B,ue),console.log("Successfully added option values"),xe(),o(s)}catch(Oe){console.error("Error adding option values:",Oe)}finally{M(!1)}},[s,B,$,a,o,xe]),Ue=u.useCallback((ue,Oe)=>{z(J=>{const I=[...J];return I[ue]=Oe,I})},[]),ht=u.useCallback(()=>{z(ue=>[...ue,""])},[]),ee=u.useCallback(ue=>{z(Oe=>{const J=Oe.filter((I,V)=>V!==ue);return J.length>0?J:[""]})},[]);return u.useEffect(()=>{s&&o(s)},[s,o]),c?n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsxs("div",{className:"max-w-7xl mx-auto pt-6 px-4 pb-6",children:[n.jsx(Vae,{product:c,variantsCount:i.length,onAddVariants:q,onDeleteVariant:H,onAddOption:Q}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n.jsx(Hae,{imageUrls:c.imageUrls||[]}),n.jsx(Uae,{product:c}),n.jsx(Gae,{product:c}),n.jsx(qae,{product:c}),n.jsx(Kae,{product:c}),n.jsx(Wae,{product:c}),n.jsx(Xae,{variants:i,productId:s||"",loading:l})]}),n.jsx("div",{className:"lg:col-span-1",children:n.jsx(Yae,{product:c})})]})]}),n.jsx(Bae,{isOpen:d,variantsForm:h,submittingVariants:we,onClose:P,onSubmit:ze,onAddVariantRow:Z,onRemoveVariantRow:ve,onUpdateVariantOptionName:ae,onAddVariantValue:Se,onRemoveVariantValue:Pe,onUpdateVariantValue:$e}),n.jsx($ae,{isOpen:y,product:c,selectedDimension:C,onClose:D,onContinue:X,onDimensionChange:k}),n.jsx(zae,{isOpen:v,selectedDimension:C,deletingVariant:N,onClose:se,onConfirm:K}),n.jsx(Fae,{isOpen:R,product:c,selectedOptionName:B,newOptionValues:$,submittingOption:Y,onClose:xe,onSubmit:Ge,onOptionNameChange:G,onUpdateNewOptionValue:Ue,onAddNewOptionValue:ht,onRemoveNewOptionValue:ee})]})}):n.jsx(pM,{})},eoe=({variant:s,formData:r,isEditing:e,onEdit:t,onSave:a,onCancel:o,onInputChange:i})=>n.jsxs("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Basic Information"}),e?n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{onClick:a,className:"p-1 text-gray-700 hover:bg-gray-50 rounded transition-colors",children:n.jsx(Hc,{className:"w-4 h-4"})}),n.jsx("button",{onClick:o,className:"p-1 text-gray-700 hover:bg-gray-50 rounded transition-colors",children:n.jsx(Zs,{className:"w-4 h-4"})})]}):n.jsx("button",{onClick:t,className:"p-1 text-gray-600 hover:bg-gray-50 rounded transition-colors",children:n.jsx(Bo,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"SKU"}),e?n.jsx("input",{type:"text",className:"w-full px-3 py-1.5 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors",value:r.sku,onChange:l=>i("sku",l.target.value)}):n.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.sku})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Barcode"}),e?n.jsx("input",{type:"text",className:"w-full px-3 py-1.5 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors",value:r.barcode,onChange:l=>i("barcode",l.target.value)}):n.jsx("p",{className:"text-sm text-gray-900",children:s.barcode||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Continue Selling When Out of Stock"}),e?n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsxs("div",{className:"relative inline-block w-10 h-5",children:[n.jsx("input",{type:"checkbox",checked:r.outOfStockContinueSelling,onChange:l=>i("outOfStockContinueSelling",l.target.checked),className:"sr-only peer"}),n.jsx("div",{className:"w-10 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-gray-400 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-gray-900"})]}),n.jsx("span",{className:"text-sm text-gray-900",children:r.outOfStockContinueSelling?"Yes":"No"})]}):n.jsx("p",{className:"text-sm text-gray-900",children:s.outOfStockContinueSelling?"Yes":"No"})]})]})]}),toe=({product:s,variant:r,productId:e})=>{const t=dr(),a=u.useCallback(()=>{t(`/products/${e}`)},[t,e]);return n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex items-center mb-2",children:[n.jsx("button",{onClick:a,className:"p-1.5 hover:bg-gray-50 rounded transition-colors mr-2",children:n.jsx(gn,{className:"w-4 h-4 text-gray-700"})}),n.jsxs("h1",{className:"text-xl font-medium text-gray-900",children:[s.title," - ",r.sku]})]}),n.jsx("p",{className:"text-sm text-gray-600",children:"Variant Details"})]})},roe=({isPhysicalProduct:s,isInventoryTrackingEnabled:r,onIsPhysicalProductChange:e,onIsInventoryTrackingEnabledChange:t,onSaveChanges:a})=>n.jsx("div",{className:"bg-white border border-gray-200 p-4 mb-6 rounded-lg",children:n.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[n.jsxs("div",{className:"flex gap-6 flex-wrap items-center",children:[n.jsxs("label",{className:"flex items-center gap-2.5 cursor-pointer",children:[n.jsxs("div",{className:"relative inline-block w-10 h-5",children:[n.jsx("input",{type:"checkbox",checked:s,onChange:o=>e(o.target.checked),className:"sr-only peer"}),n.jsx("div",{className:"w-10 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-gray-400 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-gray-900"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Is Physical Product"}),n.jsx("p",{className:"text-xs text-gray-600",children:s?"This is a physical product":"This is a digital product"})]})]}),n.jsxs("label",{className:"flex items-center gap-2.5 cursor-pointer",children:[n.jsxs("div",{className:"relative inline-block w-10 h-5",children:[n.jsx("input",{type:"checkbox",checked:r,onChange:o=>t(o.target.checked),className:"sr-only peer"}),n.jsx("div",{className:"w-10 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-gray-400 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-gray-900"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Inventory Tracking"}),n.jsx("p",{className:"text-xs text-gray-600",children:r?"Track inventory for this variant":"Do not track inventory"})]})]})]}),n.jsx("button",{onClick:a,className:"bg-gray-900 text-white px-3 py-1.5 rounded text-sm font-medium hover:bg-gray-800 transition-colors",children:"Save Changes"})]})}),noe=({productId:s,onBack:r})=>{const e=dr(),t=u.useCallback(()=>{r?r():e(s?`/products/${s}`:"/products")},[e,r,s]);return n.jsx("div",{className:"bg-white min-h-screen",children:n.jsx("div",{className:"max-w-5xl mx-auto py-8",children:n.jsxs("div",{className:"bg-white p-12 text-center rounded-lg border border-gray-200",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Variant Not Found"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"The variant you're looking for doesn't exist."}),n.jsxs("button",{onClick:t,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 mx-auto",children:[n.jsx(gn,{className:"w-5 h-5"}),"Back to Product"]})]})})})},soe=()=>{const{id:s,variantId:r}=ks();dr();const{products:e}=Ol(),{fetchVariantsByProductId:t,variants:a,loading:o,updateVariant:i}=mM(),{packagings:l,loading:c,fetchPackagingsByStoreId:d}=rj(),{activeStoreId:p}=Ur(),h=u.useMemo(()=>e.find(M=>M._id===s),[e,s]),g=u.useMemo(()=>a.find(M=>M._id===r),[a,r]),[y,b]=u.useState({basic:!1,pricing:!1,inventory:!1,package:!1,images:!1}),[v,w]=u.useState({sku:"",barcode:"",price:0,compareAtPrice:0,cost:0,chargeTax:!1,unitPriceTotalAmount:0,unitPriceTotalAmountMetric:"item",unitPriceBaseMeasure:0,unitPriceBaseMeasureMetric:"item",weightValue:0,weightUnit:"kg",countryOfOrigin:"",hsCode:"",outOfStockContinueSelling:!1,packageId:"",isPhysicalProduct:!0,isInventoryTrackingEnabled:!1,images:[]}),C={weight:["milligram","gram","kilogram"],volume:["milliliter","centiliter","liter","cubic meter"],size:["millimeter","centimeter","meter"],area:["square meter"],"per item":["item"]},k=u.useCallback(()=>{if(!v.unitPriceTotalAmountMetric)return[];for(const[M,q]of Object.entries(C))if(q.includes(v.unitPriceTotalAmountMetric))return q;return[]},[v.unitPriceTotalAmountMetric]),N=u.useCallback(()=>{const M=v.price||0,q=v.cost||0,P=M-q,H=M>0?P/M*100:0;return{profit:P,marginPercent:H}},[v.price,v.cost]),O=u.useCallback(()=>{w(M=>({...M,images:[...M.images,""]}))},[]),R=u.useCallback((M,q)=>{w(P=>({...P,images:P.images.map((H,D)=>D===M?q:H)}))},[]),L=u.useCallback(M=>{w(q=>({...q,images:q.images.filter((P,H)=>H!==M)}))},[]);u.useEffect(()=>{g&&w({sku:g.sku||"",barcode:g.barcode||"",price:g.price||0,compareAtPrice:g.compareAtPrice||0,cost:g.cost||0,chargeTax:g.chargeTax||!1,unitPriceTotalAmount:g.unitPriceTotalAmount||0,unitPriceTotalAmountMetric:g.unitPriceTotalAmountMetric||"item",unitPriceBaseMeasure:g.unitPriceBaseMeasure||0,unitPriceBaseMeasureMetric:g.unitPriceBaseMeasureMetric||"item",weightValue:g.weightValue||0,weightUnit:g.weightUnit||"kg",countryOfOrigin:g.countryOfOrigin||"",hsCode:g.hsCode||"",outOfStockContinueSelling:g.outOfStockContinueSelling||!1,packageId:g.package?._id||"",isPhysicalProduct:g.isPhysicalProduct??!0,isInventoryTrackingEnabled:g.isInventoryTrackingEnabled||!1,images:g.images||[]})},[g]);const B=u.useCallback((M,q)=>{w(P=>{const H={...P,[M]:q};return M==="unitPriceTotalAmountMetric"&&(H.unitPriceBaseMeasureMetric=""),H})},[]),G=u.useCallback(M=>{b(q=>({...q,[M]:!0}))},[]),$=u.useCallback(async M=>{if(g)try{let q={};switch(M){case"basic":q={sku:v.sku,barcode:v.barcode,outOfStockContinueSelling:v.outOfStockContinueSelling};break;case"pricing":const{profit:P,marginPercent:H}=N();q={price:v.price,compareAtPrice:v.compareAtPrice,cost:v.cost,profit:P,marginPercent:H,unitPriceTotalAmount:v.unitPriceTotalAmount,unitPriceTotalAmountMetric:v.unitPriceTotalAmountMetric,unitPriceBaseMeasure:v.unitPriceBaseMeasure,unitPriceBaseMeasureMetric:v.unitPriceBaseMeasureMetric,chargeTax:v.chargeTax};break;case"package":q={package:v.packageId||null,countryOfOrigin:v.countryOfOrigin,hsCode:v.hsCode,weightValue:v.weightValue,weightUnit:v.weightUnit};break;case"images":q={images:v.images.filter(D=>D.trim()!=="")};break}await i(g._id,q),b(P=>({...P,[M]:!1}))}catch(q){console.error("Error updating variant:",q)}},[g,v,N,i]),z=u.useCallback(M=>{g&&w({sku:g.sku||"",barcode:g.barcode||"",price:g.price||0,compareAtPrice:g.compareAtPrice||0,cost:g.cost||0,chargeTax:g.chargeTax||!1,unitPriceTotalAmount:g.unitPriceTotalAmount||0,unitPriceTotalAmountMetric:g.unitPriceTotalAmountMetric||"item",unitPriceBaseMeasure:g.unitPriceBaseMeasure||0,unitPriceBaseMeasureMetric:g.unitPriceBaseMeasureMetric||"item",weightValue:g.weightValue||0,weightUnit:g.weightUnit||"kg",countryOfOrigin:g.countryOfOrigin||"",hsCode:g.hsCode||"",outOfStockContinueSelling:g.outOfStockContinueSelling||!1,packageId:g.package?._id||"",isPhysicalProduct:g.isPhysicalProduct??!0,isInventoryTrackingEnabled:g.isInventoryTrackingEnabled||!1,images:g.images||[]}),b(q=>({...q,[M]:!1}))},[g]),Y=u.useCallback(async()=>{if(g)try{await i(g._id,{isPhysicalProduct:v.isPhysicalProduct,isInventoryTrackingEnabled:v.isInventoryTrackingEnabled})}catch(M){console.error("Error updating variant:",M)}},[g,v.isPhysicalProduct,v.isInventoryTrackingEnabled,i]);return u.useEffect(()=>{s&&t(s)},[s,t]),u.useEffect(()=>{p&&d(p)},[p,d]),h?g?n.jsx(Yt,{children:n.jsx("div",{className:"min-h-screen",children:n.jsxs("div",{className:"max-w-7xl mx-auto pt-6 px-4 pb-6",children:[n.jsx(toe,{product:h,variant:g,productId:s||""}),n.jsx(roe,{isPhysicalProduct:v.isPhysicalProduct,isInventoryTrackingEnabled:v.isInventoryTrackingEnabled,onIsPhysicalProductChange:M=>B("isPhysicalProduct",M),onIsInventoryTrackingEnabledChange:M=>B("isInventoryTrackingEnabled",M),onSaveChanges:Y}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n.jsx(eoe,{variant:g,formData:{sku:v.sku,barcode:v.barcode,outOfStockContinueSelling:v.outOfStockContinueSelling},isEditing:y.basic,onEdit:()=>G("basic"),onSave:()=>$("basic"),onCancel:()=>z("basic"),onInputChange:B}),n.jsxs("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Pricing Information"}),y.pricing?n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{onClick:()=>$("pricing"),className:"p-1 text-gray-700 hover:bg-gray-50 rounded transition-colors",children:n.jsx(Hc,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>z("pricing"),className:"p-1 text-gray-700 hover:bg-gray-50 rounded transition-colors",children:n.jsx(Zs,{className:"w-4 h-4"})})]}):n.jsx("button",{onClick:()=>G("pricing"),className:"p-1 text-gray-600 hover:bg-gray-50 rounded transition-colors",children:n.jsx(Bo,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Selling Price"}),y.pricing?n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm",children:"$"}),n.jsx("input",{type:"number",className:"w-full pl-6 pr-3 py-1.5 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors",value:v.price,onChange:M=>B("price",parseFloat(M.target.value)||0)})]}):n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["$",g.price.toFixed(2)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Compare At Price"}),y.pricing?n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm",children:"$"}),n.jsx("input",{type:"number",className:"w-full pl-6 pr-3 py-1.5 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors",value:v.compareAtPrice,onChange:M=>B("compareAtPrice",parseFloat(M.target.value)||0)})]}):n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["$",g.compareAtPrice?.toFixed(2)||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Cost"}),y.pricing?n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm",children:"$"}),n.jsx("input",{type:"number",className:"w-full pl-6 pr-3 py-1.5 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors",value:v.cost,onChange:M=>B("cost",parseFloat(M.target.value)||0)})]}):n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["$",g.cost?.toFixed(2)||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Profit"}),n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["$",y.pricing?N().profit.toFixed(2):g.profit?.toFixed(2)||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Margin Percentage"}),n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[y.pricing?N().marginPercent.toFixed(2):g.marginPercent?.toFixed(2)||"0.00","%"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Unit Price Total Amount"}),y.pricing?n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx("span",{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm",children:"$"}),n.jsx("input",{type:"number",className:"w-full pl-6 pr-3 py-1.5 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors",value:v.unitPriceTotalAmount,onChange:M=>B("unitPriceTotalAmount",parseFloat(M.target.value)||0)})]}),n.jsxs("select",{className:"px-3 py-1.5 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors min-w-[120px]",value:v.unitPriceTotalAmountMetric,onChange:M=>B("unitPriceTotalAmountMetric",M.target.value),children:[n.jsx("option",{value:"",disabled:!0,children:"Select unit"}),Object.entries(C).map(([M,q])=>n.jsx("optgroup",{label:M.charAt(0).toUpperCase()+M.slice(1),children:q.map(P=>n.jsx("option",{value:P,children:P},P))},M))]})]}):n.jsxs("p",{className:"text-sm text-gray-900",children:["$",g.unitPriceTotalAmount?.toFixed(2)||"N/A"," per ",g.unitPriceTotalAmountMetric||"item"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Unit Price Base Measure"}),y.pricing?n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"number",className:"flex-1 px-3 py-1.5 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors",value:v.unitPriceBaseMeasure,onChange:M=>B("unitPriceBaseMeasure",parseFloat(M.target.value)||0)}),n.jsxs("select",{className:"px-3 py-1.5 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors min-w-[120px] disabled:bg-gray-50 disabled:cursor-not-allowed",value:v.unitPriceBaseMeasureMetric,onChange:M=>B("unitPriceBaseMeasureMetric",M.target.value),disabled:!v.unitPriceTotalAmountMetric,children:[n.jsx("option",{value:"",disabled:!0,children:v.unitPriceTotalAmountMetric?"Select unit":"Select total unit first"}),k().map(M=>n.jsx("option",{value:M,children:M},M))]})]}):n.jsxs("p",{className:"text-sm text-gray-900",children:[g.unitPriceBaseMeasure||"N/A"," ",g.unitPriceBaseMeasureMetric||"item"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Charge Tax"}),y.pricing?n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsxs("div",{className:"relative inline-block w-10 h-5",children:[n.jsx("input",{type:"checkbox",checked:v.chargeTax,onChange:M=>B("chargeTax",M.target.checked),className:"sr-only peer"}),n.jsx("div",{className:"w-10 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-gray-400 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-gray-900"})]}),n.jsx("span",{className:"text-sm text-gray-900",children:v.chargeTax?"Yes":"No"})]}):n.jsx("p",{className:"text-sm text-gray-900",children:g.chargeTax?"Yes":"No"})]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Inventory & Status"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Inventory Tracking"}),n.jsx("p",{className:"text-sm text-gray-900",children:g.isInventoryTrackingEnabled?"Enabled":"Disabled"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Artificial Variant"}),n.jsx("p",{className:"text-sm text-gray-900",children:g.isSynthetic?"Yes":"No"})]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Option Values"}),n.jsx("div",{className:"flex gap-2 flex-wrap",children:Object.entries(g.optionValues||{}).map(([M,q])=>n.jsxs("span",{className:"px-2.5 py-1 rounded text-xs font-medium border border-gray-200 text-gray-700",children:[M,": ",q]},`${M}-${q}`))})]}),n.jsxs("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Images"}),y.images?n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{onClick:()=>$("images"),className:"p-1 text-gray-700 hover:bg-gray-50 rounded transition-colors",children:n.jsx(Hc,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>z("images"),className:"p-1 text-gray-700 hover:bg-gray-50 rounded transition-colors",children:n.jsx(Zs,{className:"w-4 h-4"})})]}):n.jsx("button",{onClick:()=>G("images"),className:"p-1 text-gray-600 hover:bg-gray-50 rounded transition-colors",children:n.jsx(Bo,{className:"w-4 h-4"})})]}),y.images?n.jsxs("div",{children:[n.jsxs("button",{onClick:O,className:"border border-gray-200 text-gray-700 px-3 py-1.5 rounded text-sm font-medium hover:bg-gray-50 transition-colors flex items-center gap-1.5 mb-4",children:[n.jsx(On,{className:"w-4 h-4"}),"Add Image"]}),v.images.length>0?n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:v.images.map((M,q)=>n.jsxs("div",{className:"border border-gray-200 rounded p-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-3",children:[n.jsxs("p",{className:"text-xs text-gray-600",children:["Image ",q+1]}),n.jsx("button",{onClick:()=>L(q),className:"p-1 text-gray-600 hover:bg-gray-50 rounded transition-colors",children:n.jsx(Xs,{className:"w-4 h-4"})})]}),n.jsx("input",{type:"text",className:"w-full px-3 py-1.5 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors mb-3",placeholder:"Enter image URL",value:M,onChange:P=>R(q,P.target.value)}),M.trim()?n.jsx("img",{src:M,alt:`Preview ${q+1}`,className:"w-full h-36 object-cover rounded border border-gray-200",onError:P=>{P.currentTarget.style.display="none"}}):n.jsx("div",{className:"w-full h-36 border-2 border-dashed border-gray-300 rounded flex items-center justify-center text-gray-500",children:n.jsx("p",{className:"text-sm",children:"No image preview"})})]},q))}):n.jsx("div",{className:"text-center py-6",children:n.jsx("p",{className:"text-sm text-gray-600",children:'No images added yet. Click "Add Image" to get started.'})})]}):n.jsx("div",{children:g.images&&g.images.length>0?n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:g.images.map((M,q)=>n.jsx("div",{children:n.jsx("img",{src:M,alt:`Variant image ${q+1}`,className:"w-full h-40 object-cover rounded border border-gray-200",onError:P=>{P.currentTarget.style.display="none"}})},q))}):n.jsx("div",{className:"text-center py-6",children:n.jsx("p",{className:"text-sm text-gray-600",children:"No images for this variant yet."})})})]}),v.isPhysicalProduct&&n.jsxs("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Shipping Information"}),y.package?n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{onClick:()=>$("package"),className:"p-1 text-gray-700 hover:bg-gray-50 rounded transition-colors",children:n.jsx(Hc,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>z("package"),className:"p-1 text-gray-700 hover:bg-gray-50 rounded transition-colors",children:n.jsx(Zs,{className:"w-4 h-4"})})]}):n.jsx("button",{onClick:()=>G("package"),className:"p-1 text-gray-600 hover:bg-gray-50 rounded transition-colors",children:n.jsx(Bo,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Package"}),y.package?n.jsxs("select",{className:"w-full px-3 py-1.5 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors",value:v.packageId||g.package?._id||"",onChange:M=>B("packageId",M.target.value),children:[n.jsx("option",{value:"",children:"No Package"}),l.map(M=>n.jsxs("option",{value:M._id,children:[M.packageName," (",M.packageType,") - ",M.length,"",M.width,"",M.height," ",M.dimensionsUnit]},M._id))]}):n.jsx("p",{className:"text-sm text-gray-900",children:g.package?`${g.package.packageName} (${g.package.packageType}) - ${g.package.length}${g.package.width}${g.package.height} ${g.package.dimensionsUnit}`:"No Package"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Country of Origin"}),y.package?n.jsx("input",{type:"text",className:"w-full px-3 py-1.5 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors",value:v.countryOfOrigin,onChange:M=>B("countryOfOrigin",M.target.value)}):n.jsx("p",{className:"text-sm text-gray-900",children:g.countryOfOrigin||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"HS Code"}),y.package?n.jsx("input",{type:"text",className:"w-full px-3 py-1.5 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors",value:v.hsCode,onChange:M=>B("hsCode",M.target.value)}):n.jsx("p",{className:"text-sm text-gray-900",children:g.hsCode||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Product Weight"}),y.package?n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"number",className:"flex-1 px-3 py-1.5 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors",value:v.weightValue,onChange:M=>B("weightValue",parseFloat(M.target.value)||0)}),n.jsxs("select",{className:"px-3 py-1.5 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors min-w-[80px]",value:v.weightUnit,onChange:M=>B("weightUnit",M.target.value),children:[n.jsx("option",{value:"kg",children:"kg"}),n.jsx("option",{value:"g",children:"g"}),n.jsx("option",{value:"lb",children:"lb"}),n.jsx("option",{value:"oz",children:"oz"})]})]}):n.jsxs("p",{className:"text-sm text-gray-900",children:[g.weightValue," ",g.weightUnit]})]})]})]})]}),n.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[n.jsxs("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Variant ID & References"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Variant ID"}),n.jsx("p",{className:"text-xs font-mono text-gray-900",children:g._id})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Product ID"}),n.jsx("p",{className:"text-xs font-mono text-gray-900",children:g.productId})]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Status & Flags"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Inventory Tracking"}),n.jsx("p",{className:"text-sm text-gray-900",children:g.isInventoryTrackingEnabled?"Enabled":"Disabled"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Artificial Variant"}),n.jsx("p",{className:"text-sm text-gray-900",children:g.isSynthetic?"Yes":"No"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Continue Selling When Out of Stock"}),n.jsx("p",{className:"text-sm text-gray-900",children:g.outOfStockContinueSelling?"Yes":"No"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Charge Tax"}),n.jsx("p",{className:"text-sm text-gray-900",children:g.chargeTax?"Yes":"No"})]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Financial Summary"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Selling Price"}),n.jsxs("p",{className:"text-base font-medium text-gray-900",children:["$",g.price.toFixed(2)]})]}),g.compareAtPrice&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Compare At Price"}),n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["$",g.compareAtPrice.toFixed(2)]})]}),g.cost&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Cost"}),n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["$",g.cost.toFixed(2)]})]}),g.profit&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Profit"}),n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["$",g.profit.toFixed(2)]})]}),g.marginPercent&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Margin"}),n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[g.marginPercent.toFixed(2),"%"]})]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Timeline"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Created"}),n.jsx("p",{className:"text-sm text-gray-900",children:new Date(g.createdAt).toLocaleDateString()}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:new Date(g.createdAt).toLocaleTimeString()})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Last Updated"}),n.jsx("p",{className:"text-sm text-gray-900",children:new Date(g.updatedAt).toLocaleDateString()}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:new Date(g.updatedAt).toLocaleTimeString()})]})]})]})]})]})]})})}):n.jsx(Yt,{children:n.jsx(noe,{productId:s})}):n.jsx(Yt,{children:n.jsx(pM,{})})},gM=u.createContext(void 0),aoe=()=>{const s=u.useContext(gM);if(!s)throw new Error("useInventoryLevels must be used within InventoryLevelsProvider");return s},ooe=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async g=>{try{a(!0),i(null);const{data:y}=await nt.get(`/inventory-levels/location/${g}`);if(y?.success)e(y.data);else throw new Error(y?.message||"Failed to fetch inventory levels")}catch(y){const b=y?.response?.data?.message||y?.message||"Failed to fetch inventory levels";i(b)}finally{a(!1)}},[]),c=u.useCallback(async(g,y)=>{try{a(!0),i(null);const{data:b}=await nt.put(`/inventory-levels/${g}`,y);if(b?.success){const v=b.data;e(w=>w.map(C=>C._id===v._id?v:C))}else throw new Error(b?.message||"Failed to update inventory level")}catch(b){const v=b?.response?.data?.message||b?.message||"Failed to update inventory level";i(v)}finally{a(!1)}},[]),h={inventoryLevels:r,loading:t,error:o,fetchByLocation:l,updateById:c,clear:()=>e([]),clearError:()=>i(null)};return n.jsx(gM.Provider,{value:h,children:s})},ioe=()=>{const{activeStoreId:s}=Ur(),{locations:r,fetchLocationsByStoreId:e}=Lp(),{inventoryLevels:t,fetchByLocation:a,updateById:o,loading:i}=aoe(),[l,c]=u.useState(""),[d,p]=u.useState(""),[h,g]=u.useState(null),[y,b]=u.useState(null),[v,w]=u.useState(null),[C,k]=u.useState(!1),[N,O]=u.useState(null),[R,L]=u.useState(0),[B,G]=u.useState(!1),[$,z]=u.useState(null),[Y,M]=u.useState(0),[q,P]=u.useState(!1);u.useEffect(()=>{s&&e(s)},[s,e]),u.useEffect(()=>{l&&a(l)},[l,a]),u.useEffect(()=>{if(!l&&r&&r.length>0){const we=r.find(Ae=>Ae.isDefault)||r[0];we?._id&&c(we._id)}},[r,l]);const H=u.useMemo(()=>{if(!d.trim())return t;const we=d.toLowerCase();return t.filter(Ae=>Ae.variantId.sku.toLowerCase().includes(we)||(Ae.variantId.productId.title||"").toLowerCase().includes(we))},[d,t]),D=u.useCallback(we=>{c(we)},[]),X=u.useCallback(()=>{l&&a(l)},[l,a]),se=u.useCallback((we,Ae)=>{g(we.currentTarget),b(Ae);const ze=t.find(Ge=>Ge._id===Ae);w(ze?{...ze.unavailable}:{damaged:0,qualityControl:0,safetyStock:0,other:0})},[t]),Q=u.useCallback(()=>{g(null),b(null),w(null)},[]),xe=u.useCallback((we,Ae)=>{const ze=Math.max(0,Number(Ae)||0);w(Ge=>Ge&&{...Ge,[we]:ze})},[]),K=u.useCallback(async()=>{if(!(!y||!v))try{k(!0);const we=t.find(ht=>ht._id===y),Ae=we?.committed??0,ze=we?.onHand??0,Ge=(v.damaged||0)+(v.qualityControl||0)+(v.safetyStock||0)+(v.other||0),Ue=Math.max(0,ze-Ae-Ge);await o(y,{unavailable:v,available:Ue}),Q()}finally{k(!1)}},[y,v,t,o,Q]),Z=u.useCallback((we,Ae)=>{O(we),L(Ae??0)},[]),ve=u.useCallback(()=>{O(null)},[]),ae=u.useCallback(async()=>{if(N)try{G(!0);const we=t.find(ee=>ee._id===N),Ae=we?.committed??0,ze=we?.unavailable||{damaged:0,qualityControl:0,safetyStock:0,other:0},Ge=(ze.damaged||0)+(ze.qualityControl||0)+(ze.safetyStock||0)+(ze.other||0),Ue=Math.max(0,R||0),ht=Math.max(0,Ue+Ae+Ge);await o(N,{available:Ue,onHand:ht}),O(null)}finally{G(!1)}},[N,R,t,o]),Se=u.useCallback((we,Ae)=>{z(we),M(Ae??0)},[]),Pe=u.useCallback(()=>{z(null)},[]),$e=u.useCallback(async()=>{if($)try{P(!0);const we=t.find(ee=>ee._id===$),Ae=we?.committed??0,ze=we?.unavailable||{damaged:0,qualityControl:0,safetyStock:0,other:0},Ge=(ze.damaged||0)+(ze.qualityControl||0)+(ze.safetyStock||0)+(ze.other||0),Ue=Math.max(0,Y||0),ht=Math.max(0,Ue-Ae-Ge);await o($,{onHand:Ue,available:ht}),z(null)}finally{P(!1)}},[$,Y,t,o]);return n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-4",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ed,{className:"w-5 h-5 text-gray-600"}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Inventory"})]}),n.jsx("div",{className:"flex gap-2",children:n.jsxs("button",{className:"px-3 py-1.5 border border-gray-200 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5 text-sm font-medium text-gray-700 transition-colors",onClick:X,disabled:!l||i,children:[n.jsx(ou,{className:"w-4 h-4"}),"Refresh"]})})]})})}),n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsxs("div",{className:"bg-white border border-gray-200 rounded p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Inventory by Location"}),n.jsx("div",{className:"flex gap-4 mb-4 items-center",children:n.jsxs("div",{className:"min-w-[200px]",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Location"}),n.jsxs("select",{value:l,onChange:we=>D(we.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors",children:[n.jsx("option",{value:"",children:"Select a location"}),r.map(we=>n.jsxs("option",{value:we._id,children:[we.name," - ",we.city,", ",we.state]},we._id))]})]})}),l&&n.jsxs("div",{className:"flex gap-2 mb-4",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:n.jsx(no,{className:"h-4 w-4 text-gray-400"})}),n.jsx("input",{type:"text",placeholder:"Search by SKU or product title...",value:d,onChange:we=>p(we.target.value),className:"w-full pl-9 pr-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsx("button",{className:"p-2 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:n.jsx(af,{className:"w-4 h-4 text-gray-600"})})]}),l?i?n.jsx("div",{className:"text-center py-6",children:n.jsx("p",{className:"text-sm text-gray-600",children:"Loading inventory..."})}):H.length>0?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Product"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"SKU"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Unavailable"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Committed"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Incoming"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Available"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"On Hand"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:H.map(we=>{const Ae=we.unavailable.damaged+we.unavailable.qualityControl+we.unavailable.safetyStock+we.unavailable.other,ze=Object.values(we.variantId.optionValues||{}).join(" / ");return n.jsxs("tr",{className:"hover:bg-gray-50 group",children:[n.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("img",{src:we.variantId.productId.imageUrl||void 0,alt:we.variantId.productId.title,className:"w-6 h-6 rounded-full object-cover bg-gray-200",onError:Ge=>{Ge.target.style.display="none"}}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:we.variantId.productId.title}),n.jsx("p",{className:"text-xs text-gray-600",children:ze})]})]})}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:n.jsx("span",{className:"text-sm font-medium text-gray-700",children:we.variantId.sku})}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:n.jsxs("div",{className:"inline-flex items-center gap-1 relative",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:Ae}),n.jsx("button",{"aria-label":"unavailable details",onClick:Ge=>se(Ge,we._id),className:"ml-1 opacity-0 group-hover:opacity-100 p-1 hover:bg-gray-200 rounded transition-colors",children:n.jsx(af,{className:"w-3.5 h-3.5 text-gray-600"})})]})}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:n.jsx("span",{className:"text-sm font-medium text-gray-700",children:we.committed})}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:n.jsx("span",{className:"text-sm font-medium text-gray-700",children:we.incoming??0})}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:N===we._id?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"number",min:"0",value:R,onChange:Ge=>L(Number(Ge.target.value)||0),className:"w-20 px-2 py-1 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"}),n.jsx("button",{className:"px-2 py-1 text-xs border border-gray-200 rounded hover:bg-gray-50 disabled:opacity-50 transition-colors",onClick:ve,disabled:B,children:"Cancel"}),n.jsx("button",{className:"px-2 py-1 text-xs bg-gray-900 text-white rounded hover:bg-gray-800 disabled:opacity-50 transition-colors",onClick:ae,disabled:B,children:B?"Saving...":"Save"})]}):n.jsxs("div",{className:"inline-flex items-center gap-2",children:[n.jsx("span",{className:`px-1.5 py-0.5 text-xs font-medium rounded ${we.available>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:we.available}),n.jsx("button",{className:"text-xs text-gray-600 hover:text-gray-900 transition-colors",onClick:()=>Z(we._id,we.available),children:"Edit"})]})}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:$===we._id?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"number",min:"0",value:Y,onChange:Ge=>M(Number(Ge.target.value)||0),className:"w-20 px-2 py-1 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"}),n.jsx("button",{className:"px-2 py-1 text-xs border border-gray-200 rounded hover:bg-gray-50 disabled:opacity-50 transition-colors",onClick:Pe,disabled:q,children:"Cancel"}),n.jsx("button",{className:"px-2 py-1 text-xs bg-gray-900 text-white rounded hover:bg-gray-800 disabled:opacity-50 transition-colors",onClick:$e,disabled:q,children:q?"Saving...":"Save"})]}):n.jsxs("div",{className:"inline-flex items-center gap-2",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:we.onHand}),n.jsx("button",{className:"text-xs text-gray-600 hover:text-gray-900 transition-colors",onClick:()=>Se(we._id,we.onHand),children:"Edit"})]})})]},we._id)})})]})}),h&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-40",onClick:Q}),n.jsxs("div",{className:"fixed z-50 mt-2 bg-white border border-gray-200 rounded shadow-lg",style:{top:h.getBoundingClientRect().bottom+window.scrollY+4,left:h.getBoundingClientRect().left+window.scrollX},onClick:we=>we.stopPropagation(),children:[n.jsx("div",{className:"px-3 pt-2 pb-2",children:n.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Unavailable inventory"})}),n.jsx("div",{className:"border-t border-gray-200"}),v&&n.jsxs("div",{className:"min-w-[240px] py-2",children:[n.jsxs("div",{className:"px-3 py-2 flex items-center justify-between gap-4 hover:bg-gray-50 transition-colors",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Damaged"}),n.jsx("input",{type:"number",min:"0",value:v.damaged,onChange:we=>xe("damaged",we.target.value),className:"w-20 px-2 py-1 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{className:"px-3 py-2 flex items-center justify-between gap-4 hover:bg-gray-50 transition-colors",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Quality Control"}),n.jsx("input",{type:"number",min:"0",value:v.qualityControl,onChange:we=>xe("qualityControl",we.target.value),className:"w-20 px-2 py-1 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{className:"px-3 py-2 flex items-center justify-between gap-4 hover:bg-gray-50 transition-colors",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Safety Stock"}),n.jsx("input",{type:"number",min:"0",value:v.safetyStock,onChange:we=>xe("safetyStock",we.target.value),className:"w-20 px-2 py-1 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{className:"px-3 py-2 flex items-center justify-between gap-4 hover:bg-gray-50 transition-colors",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Other"}),n.jsx("input",{type:"number",min:"0",value:v.other,onChange:we=>xe("other",we.target.value),className:"w-20 px-2 py-1 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{className:"flex justify-end gap-2 px-3 pb-2 pt-2",children:[n.jsx("button",{className:"px-2 py-1 text-xs border border-gray-200 rounded hover:bg-gray-50 disabled:opacity-50 transition-colors",onClick:Q,disabled:C,children:"Cancel"}),n.jsx("button",{className:"px-2 py-1 text-xs bg-gray-900 text-white rounded hover:bg-gray-800 disabled:opacity-50 transition-colors",onClick:K,disabled:C,children:C?"Saving...":"Save"})]})]})]})]})]}):n.jsx("div",{className:"text-center py-6",children:n.jsx("p",{className:"text-sm text-gray-600",children:d?"No items match your search.":"No inventory found for this location."})}):n.jsxs("div",{className:"text-center py-6",children:[n.jsx(ed,{className:"w-10 h-10 text-gray-400 mx-auto mb-3"}),n.jsx("h3",{className:"text-base font-medium text-gray-700 mb-1",children:"Select a location to view inventory"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Choose a location from the dropdown above to see inventory levels."})]})]})})]})})},loe=()=>{const s=dr(),r=u.useCallback(()=>{s("/products/new")},[s]);return n.jsxs("div",{className:"flex flex-col items-center text-center max-w-2xl mx-auto py-8",children:[n.jsxs("div",{className:"relative w-64 h-40 mb-6",children:[n.jsx("div",{className:"absolute top-0 right-4 w-16 h-10 bg-blue-600 rounded-lg transform -rotate-12"}),n.jsx("div",{className:"absolute top-4 right-0 w-8 h-16 bg-green-500 rounded"}),n.jsx("div",{className:"absolute bottom-8 right-10 w-12 h-6 bg-yellow-500 rounded transform rotate-6"}),n.jsxs("div",{className:"absolute bottom-4 right-0 w-14 h-5 flex items-center gap-1 transform -rotate-12",children:[n.jsx("div",{className:"w-6 h-4 bg-gray-800 rounded-full"}),n.jsx("div",{className:"w-1 h-1 bg-gray-800 rounded"}),n.jsx("div",{className:"w-6 h-4 bg-gray-800 rounded-full"})]})]}),n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-1.5",children:"Add your products"}),n.jsx("p",{className:"mb-6 text-sm text-gray-600",children:"Start by stocking your store with products your customers will love"}),n.jsxs("div",{className:"flex gap-2 mb-8",children:[n.jsxs("button",{onClick:r,className:"flex items-center gap-1.5 px-4 py-2 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 transition-colors",children:[n.jsx(On,{className:"w-4 h-4"}),"Add product"]}),n.jsxs("button",{className:"flex items-center gap-1.5 px-4 py-2 border border-gray-200 text-gray-700 text-sm font-medium rounded hover:bg-gray-50 transition-colors",children:[n.jsx(HO,{className:"w-4 h-4"}),"Import"]})]}),n.jsx("div",{className:"w-full border-t border-gray-200 my-6"}),n.jsx("h3",{className:"text-base font-medium text-gray-900 mb-1.5",children:"Find products to sell"}),n.jsx("p",{className:"mb-6 text-sm text-gray-600 max-w-lg",children:"Have dropshipping or print on demand products shipped directly from the supplier to your customer, and only pay for what you sell."}),n.jsx("button",{className:"px-4 py-2 border border-gray-200 text-gray-700 text-sm font-medium rounded hover:bg-gray-50 transition-colors",children:"Browse product sourcing apps"})]})},coe=()=>n.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-3",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"px-2.5 py-1 bg-gray-50 border border-gray-200 rounded text-xs font-medium text-gray-900",children:"All"}),n.jsx("button",{className:"p-1 text-gray-600 hover:bg-gray-50 rounded transition-colors",children:n.jsx(On,{className:"w-3.5 h-3.5"})})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"relative",children:[n.jsx(no,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search products",className:"pl-9 pr-3 py-1.5 border border-gray-200 rounded text-sm w-[280px] focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsx("button",{className:"p-1 text-gray-600 hover:bg-gray-50 rounded transition-colors",children:n.jsx(af,{className:"w-4 h-4"})}),n.jsx("button",{className:"p-1 text-gray-600 hover:bg-gray-50 rounded transition-colors",children:n.jsx(Wy,{className:"w-4 h-4"})})]})]})}),doe=()=>{const s=dr(),r=u.useCallback(()=>{s("/products/new")},[s]);return n.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ed,{className:"w-5 h-5 text-gray-600"}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Products"})]}),n.jsxs("button",{onClick:r,className:"flex items-center gap-1.5 px-3 py-1.5 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 transition-colors",children:[n.jsx(On,{className:"w-4 h-4"}),"Add Product"]})]})})},uoe=({product:s,onRowClick:r})=>{const e=u.useCallback(()=>{r(s._id)},[s._id,r]);return n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:e,children:[n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium text-gray-900",children:s.title}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-600",children:s.category&&typeof s.category=="object"?s.category.name:s.category}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-600",children:s.price}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-600",children:s.sku}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-600 capitalize",children:s.status}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-600",children:typeof s.quantity=="number"?s.quantity:0}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-600",children:new Date(s.updatedAt).toLocaleString()})]})},foe=({products:s})=>{const r=dr(),[e,t]=u.useState(null),[a,o]=u.useState("asc"),i=u.useCallback(d=>{r(`/products/${d}`)},[r]),l=u.useCallback(d=>{e===d?o(p=>p==="asc"?"desc":"asc"):(t(d),o("asc"))},[e]),c=u.useMemo(()=>e?[...s].sort((d,p)=>{let h,g;return e==="price"?(h=d.price,g=p.price):e==="quantity"?(h=typeof d.quantity=="number"?d.quantity:0,g=typeof p.quantity=="number"?p.quantity:0):(h=new Date(d.updatedAt).getTime(),g=new Date(p.updatedAt).getTime()),h<g?a==="asc"?-1:1:h>g?a==="asc"?1:-1:0}):s,[s,e,a]);return n.jsx("div",{className:"bg-white rounded-lg border border-gray-200",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-600",children:"Title"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-600",children:"Category"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-600 cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>l("price"),children:n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("span",{children:"Price"}),e==="price"&&(a==="asc"?n.jsx(cm,{className:"w-3.5 h-3.5 text-gray-900"}):n.jsx(lm,{className:"w-3.5 h-3.5 text-gray-900"}))]})}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-600",children:"SKU"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-600",children:"Status"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-600 cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>l("quantity"),children:n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("span",{children:"Qty"}),e==="quantity"&&(a==="asc"?n.jsx(cm,{className:"w-3.5 h-3.5 text-gray-900"}):n.jsx(lm,{className:"w-3.5 h-3.5 text-gray-900"}))]})}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-600 cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>l("updatedAt"),children:n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("span",{children:"Updated"}),e==="updatedAt"&&(a==="asc"?n.jsx(cm,{className:"w-3.5 h-3.5 text-gray-900"}):n.jsx(lm,{className:"w-3.5 h-3.5 text-gray-900"}))]})})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(d=>n.jsx(uoe,{product:d,onRowClick:i},d._id))})]})})})},poe=()=>{const{products:s,fetchProductsByStoreId:r}=Ol(),{activeStoreId:e}=Ur();return u.useEffect(()=>{e&&r(e)},[e,r]),n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx(doe,{}),n.jsx(coe,{}),n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:!s||s.length===0?n.jsx(loe,{}):n.jsx(foe,{products:s})})]})})},yM=u.createContext(void 0);function hoe({children:s}){const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async p=>{a(!0),i(null);try{const{data:h}=await nt.get(`/purchase-order-entries/purchase-order/${p}`);e(h.data)}catch(h){const g=h?.response?.data?.message||"Failed to fetch purchase order entries";throw i(g),h}finally{a(!1)}},[]),c=u.useCallback(()=>{e([]),i(null),a(!1)},[]),d=u.useMemo(()=>({entries:r,loading:t,error:o,fetchEntriesByPurchaseOrderId:l,clearEntries:c}),[r,t,o,l,c]);return n.jsx(yM.Provider,{value:d,children:s})}function xM(){const s=u.useContext(yM);if(!s)throw new Error("usePurchaseOrderEntries must be used within a PurchaseOrderEntryProvider");return s}function moe(){const{id:s}=ks(),r=dr(),{purchaseOrders:e,markAsOrdered:t}=cj(),a=u.useMemo(()=>e.find(C=>C._id===s)||null,[e,s]),{entries:o,fetchEntriesByPurchaseOrderId:i,loading:l,error:c,clearEntries:d}=xM(),[p,h]=u.useState(!1),[g,y]=u.useState(!1),b=u.useRef(null);u.useEffect(()=>{const C=k=>{b.current&&!b.current.contains(k.target)&&h(!1)};return p&&document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[p]),u.useEffect(()=>{if(a?._id)return i(a._id).catch(()=>{}),()=>{d()}},[a?._id]);const v=u.useMemo(()=>a?typeof a.supplierId=="string"?a.supplierId:a.supplierId?.name||a.supplierId?._id:"-",[a]),w=u.useMemo(()=>a?typeof a.destinationLocationId=="string"?a.destinationLocationId:a.destinationLocationId?.name||a.destinationLocationId?._id:"-",[a]);return n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs("button",{onClick:()=>r("/products/purchase-orders"),className:"text-sm text-gray-600 hover:text-gray-900 transition-colors",children:[n.jsx(gn,{className:"w-4 h-4 inline mr-1"}),"Purchase Orders"]})})})}),n.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[!a&&n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Purchase order not found in current view. Go back to the list and select one."}),n.jsx("button",{onClick:()=>r("/products/purchase-orders"),className:"w-fit px-3 py-1.5 text-sm font-medium border border-gray-200 hover:bg-gray-50 transition-colors",children:"Back to Purchase Orders"})]}),a&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Purchase Order Details"}),n.jsx("span",{className:`px-2 py-0.5 text-xs font-medium ${a.status==="ordered"?"bg-gray-900 text-white":"bg-gray-100 text-gray-700"}`,children:(a.status||"draft").replaceAll("_"," ")})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[a.status==="draft"&&n.jsx("button",{onClick:()=>y(!0),className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Mark as ordered"}),a.status!=="draft"&&n.jsx("button",{onClick:()=>r(`/products/purchase-orders/${a._id}/receive`),className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Receive Inventory"}),a.status==="draft"&&n.jsxs("div",{className:"relative",ref:b,children:[n.jsxs("button",{onClick:()=>h(!p),className:"px-3 py-1.5 text-sm font-medium border border-gray-200 hover:bg-gray-50 transition-colors flex items-center gap-1",children:["More actions",n.jsx(Ys,{className:"w-4 h-4"})]}),p&&n.jsx("div",{className:"absolute right-0 mt-1 w-48 bg-white border border-gray-200 shadow-lg z-10",children:n.jsx("button",{onClick:()=>h(!1),className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-50 transition-colors",children:"Delete"})})]})]})]}),g&&n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-2",children:"Mark as ordered"}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"After marking as ordered, you will be able to receive incoming inventory from your supplier. The purchase order can't be turned into a draft again."}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{onClick:()=>y(!1),className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:async()=>{a&&(await t(a._id),y(!1))},className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Mark as ordered"})]})]}),n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Supplier"}),n.jsx("p",{className:"text-sm text-gray-900",children:v})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Destination"}),n.jsx("p",{className:"text-sm text-gray-900",children:w})]})]}),n.jsx("div",{className:"border-t border-gray-200 my-3"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Payment Terms"}),n.jsx("p",{className:"text-sm text-gray-900",children:a.paymentTerm||"-"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Supplier Currency"}),n.jsx("p",{className:"text-sm text-gray-900",children:a.supplierCurrency||"-"})]})]})]}),n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Shipment Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Estimated Arrival"}),n.jsx("p",{className:"text-sm text-gray-900",children:a.expectedArrivalDate?new Date(a.expectedArrivalDate).toLocaleDateString():"-"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Shipping Carrier"}),n.jsx("p",{className:"text-sm text-gray-900",children:a.shippingCarrier||"-"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Tracking Number"}),n.jsx("p",{className:"text-sm text-gray-900",children:a.trackingNumber||"-"})]})]})]}),n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Products"}),c&&n.jsx("p",{className:"text-sm text-red-600 mb-2",children:c}),n.jsx("div",{className:"border border-gray-200 overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-white",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Product"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Supplier SKU"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"RSKU"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Quantity"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Cost"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Tax %"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Total"})]})}),n.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[o.map(C=>{const k=C.variantId,N=k?.productId?.title||"-",O=k?.optionValues?Object.values(k.optionValues).join(" / "):"";return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-2",children:n.jsxs("div",{className:"space-y-0.5",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:N}),O&&n.jsx("p",{className:"text-xs text-gray-600",children:O}),n.jsxs("p",{className:"text-xs text-gray-600",children:["SKU: ",k?.sku||"-"]})]})}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:C.supplierSku||"-"}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:k?.sku||"-"}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 text-right",children:C.quantityOrdered}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 text-right",children:C.cost.toFixed(2)}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 text-right",children:(C.taxPercent??0).toFixed(0)}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 text-right",children:C.totalCost.toFixed(2)})]},C._id)}),!l&&o.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-sm text-gray-600",children:"No products"})})]})]})})})]}),n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Additional Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Reference Number"}),n.jsx("p",{className:"text-sm text-gray-900",children:a.referenceNumber||"-"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Note to Supplier"}),n.jsx("p",{className:"text-sm text-gray-900",children:a.noteToSupplier||"-"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Tax"}),n.jsx("p",{className:"text-sm text-gray-900",children:a.totalTax?.toFixed(2)??"-"})]})]})]}),n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Cost Summary"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"PO ID"}),n.jsx("p",{className:"text-sm text-gray-900",children:a._id})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Status"}),n.jsx("p",{className:"text-sm text-gray-900 capitalize",children:a.status.replaceAll("_"," ")})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Expected Arrival"}),n.jsx("p",{className:"text-sm text-gray-900",children:a.expectedArrivalDate?new Date(a.expectedArrivalDate).toLocaleDateString():"-"})]})]}),n.jsx("div",{className:"border-t border-gray-200 my-3"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Subtotal"}),n.jsx("p",{className:"text-sm text-gray-900",children:a.subtotalCost?.toFixed(2)??"-"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Taxes"}),n.jsx("p",{className:"text-sm text-gray-900",children:a.totalTax?.toFixed(2)??"-"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Total"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:a.totalCost?.toFixed(2)??"-"})]})]}),n.jsx("div",{className:"border-t border-gray-200 my-3"}),n.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Cost Adjustments"}),n.jsxs("div",{className:"space-y-1",children:[(a.costAdjustments??[]).length===0&&n.jsx("p",{className:"text-sm text-gray-600",children:"No adjustments"}),(a.costAdjustments??[]).map((C,k)=>n.jsxs("div",{className:"flex justify-between",children:[n.jsx("p",{className:"text-sm text-gray-900 capitalize",children:C.name}),n.jsxs("p",{className:"text-sm text-gray-900",children:[C.amount.toFixed(2),C.currency?` ${C.currency}`:""]})]},k))]}),n.jsx("div",{className:"border-t border-gray-200 my-3"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Converted Total"}),n.jsxs("p",{className:"text-sm text-gray-900",children:[a.totalCost?.toFixed(2)," ",a.supplierCurrency||""]})]})})]}),n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Timeline"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("textarea",{className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 resize-y min-h-[100px]",placeholder:"Leave a comment..."}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Post"})})]})]})]})]})]})})}const goe=({productImage:s,productTitle:r})=>n.jsx("tr",{className:"bg-white",children:n.jsx("td",{colSpan:2,className:"px-4 py-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[s?n.jsx("img",{src:s,alt:r||"Product",className:"w-8 h-8 object-cover"}):n.jsx("div",{className:"w-8 h-8 bg-gray-200"}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:r||"Unnamed product"})]})})}),yoe=({variantId:s,variant:r,isSelected:e,onToggle:t})=>{const a=(()=>{const i=r.optionValues||{};return Object.values(i).map(c=>String(c)).join(" / ")})(),o=typeof r.availability=="number"?r.availability:0;return n.jsxs("tr",{onClick:()=>t(s),className:`cursor-pointer hover:bg-gray-50 ${e?"bg-gray-100":""}`,children:[n.jsx("td",{className:"px-4 py-2",children:n.jsx("span",{className:"text-sm text-gray-900",children:a})}),n.jsx("td",{className:"px-4 py-2 text-right text-sm text-gray-900",children:o})]},`var-${s}`)},xoe=({productId:s,productImage:r,productTitle:e,variants:t,selectedVariantIds:a,onVariantToggle:o})=>n.jsxs(pt.Fragment,{children:[n.jsx(goe,{productImage:r,productTitle:e}),(t||[]).map(i=>n.jsx(yoe,{variantId:String(i._id),variant:i,isSelected:a.has(String(i._id)),onToggle:o},`var-${i._id}`))]},`prod-${s}`),voe=({results:s,selectedVariantIds:r,onVariantToggle:e})=>n.jsx(n.Fragment,{children:s.map(t=>n.jsx(xoe,{productId:t.product?._id,productImage:t.product?.imageUrls?.[0],productTitle:t.product?.title||"Unnamed product",variants:t.variants||[],selectedVariantIds:r,onVariantToggle:e},`prod-${t.product?._id}`))}),boe=({searching:s,results:r,selectedVariantIds:e,onVariantToggle:t})=>n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-white",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Product / Variant"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Availability"})]})}),n.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[s&&n.jsx("tr",{children:n.jsx("td",{colSpan:2,className:"px-4 py-2 text-sm text-gray-600",children:"Searching..."})}),!s&&r.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:2,className:"px-4 py-2 text-sm text-gray-600",children:"No results"})}),!s&&n.jsx(voe,{results:r,selectedVariantIds:e,onVariantToggle:t})]})]}),woe=({item:s,index:r,onSupplierSkuChange:e,onQtyChange:t,onCostChange:a,onTaxPctChange:o,onRemove:i})=>{const l=(s.qty||0)*(s.cost||0)*(1+(s.taxPct||0)/100);return n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[s.productImage?n.jsx("img",{src:s.productImage,alt:s.productTitle,className:"w-8 h-8 object-cover"}):n.jsx("div",{className:"w-8 h-8 bg-gray-200"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.productTitle}),n.jsxs("div",{className:"text-xs text-gray-600",children:[s.variantLabel,"  ",s.variantSku||"-"]})]})]})}),n.jsx("td",{className:"px-4 py-2",children:n.jsx("input",{type:"text",placeholder:"Supplier SKU",value:s.supplierSku,onChange:c=>e(r,c.target.value),className:"px-2 py-1 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})}),n.jsx("td",{className:"px-4 py-2 text-right",children:n.jsx("input",{type:"number",min:1,value:s.qty,onChange:c=>t(r,Number(c.target.value)||1),className:"w-[90px] px-2 py-1 text-sm border border-gray-200 text-right focus:outline-none focus:ring-1 focus:ring-gray-400"})}),n.jsx("td",{className:"px-4 py-2 text-right",children:n.jsx("input",{type:"number",min:0,step:"0.01",value:s.cost,onChange:c=>a(r,Number(c.target.value)||0),className:"w-[110px] px-2 py-1 text-sm border border-gray-200 text-right focus:outline-none focus:ring-1 focus:ring-gray-400"})}),n.jsx("td",{className:"px-4 py-2 text-right",children:n.jsx("input",{type:"number",min:0,max:100,step:"0.01",value:s.taxPct,onChange:c=>o(r,Number(c.target.value)),className:"w-[100px] px-2 py-1 text-sm border border-gray-200 text-right focus:outline-none focus:ring-1 focus:ring-gray-400"})}),n.jsx("td",{className:"px-4 py-2 text-right text-sm text-gray-900",children:l.toFixed(2)}),n.jsx("td",{className:"px-4 py-2 text-right",children:n.jsx("button",{onClick:()=>i(r),className:"p-1 text-gray-600 hover:text-red-600 transition-colors","aria-label":"Remove",children:n.jsx(Xs,{className:"w-4 h-4"})})})]})},joe=({items:s,onSupplierSkuChange:r,onQtyChange:e,onCostChange:t,onTaxPctChange:a,onRemove:o})=>n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map((i,l)=>n.jsx(woe,{item:i,index:l,onSupplierSkuChange:r,onQtyChange:e,onCostChange:t,onTaxPctChange:a,onRemove:o},i.variantId))}),Coe=({items:s,onSupplierSkuChange:r,onQtyChange:e,onCostChange:t,onTaxPctChange:a,onRemove:o})=>n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-white",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Product"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Supplier SKU"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Qty"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Cost"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Tax %"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Total"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900"})]})}),n.jsx(joe,{items:s,onSupplierSkuChange:r,onQtyChange:e,onCostChange:t,onTaxPctChange:a,onRemove:o})]}),Soe=({search:s,onSearchChange:r,searching:e,results:t,selectedVariantIds:a,onVariantToggle:o,onAddSelected:i,items:l,onItemsChange:c})=>{const d=(b,v)=>{c(l.map((w,C)=>C===b?{...w,supplierSku:v}:w))},p=(b,v)=>{const w=Math.max(1,v||1);c(l.map((C,k)=>k===b?{...C,qty:w}:C))},h=(b,v)=>{const w=Math.max(0,v||0);c(l.map((C,k)=>k===b?{...C,cost:w}:C))},g=(b,v)=>{let w=v;isNaN(w)?w=0:w=Math.min(100,Math.max(0,w)),c(l.map((C,k)=>k===b?{...C,taxPct:w}:C))},y=b=>{c(l.filter((v,w)=>w!==b))};return n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Add products"}),n.jsx("input",{type:"text",placeholder:"Search products",value:s,onChange:b=>r(b.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 mb-3 focus:outline-none focus:ring-1 focus:ring-gray-400"}),n.jsx("div",{className:"flex justify-end mb-2",children:n.jsx("button",{onClick:i,disabled:a.size===0,className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:"Add selected"})}),n.jsx("div",{className:"border border-gray-200 overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsx(boe,{searching:e,results:t,selectedVariantIds:a,onVariantToggle:o})})}),l.length>0&&n.jsxs("div",{className:"mt-4",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Selected items"}),n.jsx("div",{className:"border border-gray-200 overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsx(Coe,{items:l,onSupplierSkuChange:d,onQtyChange:p,onCostChange:h,onTaxPctChange:g,onRemove:y})})})]})]})},Noe=({reference:s,onReferenceChange:r,tagIds:e,onTagIdsChange:t,note:a,onNoteChange:o,tagOptions:i,tagsLoading:l})=>n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Additional details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Reference number"}),n.jsx("input",{type:"text",value:s,onChange:c=>r(c.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]}),n.jsx("div",{className:"flex-1",children:n.jsx(Fo,{label:"Tags",value:e,options:i,onChange:t,placeholder:l?"Loading":"No tags",disabled:l&&i.length===0})})]}),n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Note to supplier"}),n.jsx("textarea",{value:a,onChange:c=>o(c.target.value),rows:3,className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]})]}),koe=({itemsCount:s,subtotal:r,taxAmount:e,adjustmentsTotal:t,adjustmentsRows:a,shippingCost:o,total:i,onManageClick:l,onCancel:c,onCreatePurchaseOrder:d,creatingPO:p,canCreate:h})=>n.jsxs("div",{className:"border border-gray-200 p-4 mb-24 bg-white/95",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Cost summary"}),n.jsx("button",{onClick:l,className:"px-3 py-1.5 text-sm font-medium border border-gray-200 hover:bg-gray-50 transition-colors",children:"Manage"})]}),n.jsxs("div",{className:"space-y-1 text-sm",children:[n.jsxs("div",{className:"text-sm text-gray-900",children:["Items: ",n.jsx("span",{className:"font-medium",children:s})]}),n.jsxs("div",{className:"text-sm text-gray-900",children:["Subtotal: ",n.jsx("span",{className:"font-medium",children:r.toFixed(2)})]}),n.jsxs("div",{className:"text-sm text-gray-900",children:["Tax: ",n.jsx("span",{className:"font-medium",children:e.toFixed(2)})]}),n.jsxs("div",{className:"text-sm text-gray-900",children:["Cost adjustments: ",n.jsx("span",{className:"font-medium",children:t.toFixed(2)})]}),a.length>0&&n.jsx("div",{className:"pl-3 space-y-0.5",children:a.map((g,y)=>{const b=g.type?g.type.replace(/_/g," "):"adjustment",v=g.type?.toLowerCase()==="discount"?-Math.abs(g.amount||0):g.amount||0;return n.jsxs("div",{className:"text-xs text-gray-600",children:[b,": ",v.toFixed(2)]},y)})}),n.jsxs("div",{className:"text-sm text-gray-900",children:["Shipping: ",n.jsx("span",{className:"font-medium",children:o.toFixed(2)})]}),n.jsx("div",{className:"border-t border-gray-200 my-2"}),n.jsxs("div",{className:"text-sm text-gray-900",children:["Total: ",n.jsx("span",{className:"font-medium",children:i.toFixed(2)})]})]}),n.jsxs("div",{className:"flex justify-end mt-4 gap-2",children:[n.jsx("button",{onClick:c,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:d,disabled:!h,className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:p?"Creating":"Create purchase order"})]})]}),_oe=({open:s,onClose:r,adjustmentsRows:e,onAdjustmentsRowsChange:t,adjustmentTypeOptions:a})=>{const o=(d,p)=>{t(e.map((h,g)=>g===d?{...h,type:p}:h))},i=(d,p)=>{const h=Number(p)||0;t(e.map((g,y)=>y===d?{...g,amount:h}:g))},l=d=>{t(e.filter((p,h)=>h!==d))},c=()=>{t([...e,{type:"discount",amount:0}])};return n.jsx(en,{open:s,onClose:r,title:"Manage cost summary",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Save"})]}),children:n.jsxs("div",{className:"space-y-3 mt-2",children:[e.map((d,p)=>n.jsxs("div",{className:"flex flex-col md:flex-row gap-3 items-center",children:[n.jsx("div",{className:"flex-1",children:n.jsx(Va,{label:"Adjustment",value:p===0?"shipping":d.type,options:a,onChange:h=>o(p,h),placeholder:"Select adjustment",disabled:p===0})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Amount"}),n.jsx("input",{type:"number",value:d.amount,onChange:h=>i(p,Number(h.target.value)),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]}),p!==0&&n.jsx("button",{onClick:()=>l(p),className:"p-1 text-gray-600 hover:text-red-600 transition-colors","aria-label":"Remove adjustment",children:n.jsx(Xs,{className:"w-4 h-4"})})]},p)),e.length<8&&n.jsx("button",{onClick:c,className:"w-full px-3 py-1.5 text-sm font-medium border border-gray-200 hover:bg-gray-50 transition-colors",children:"Add adjustment"})]})})},Eoe=({eta:s,onEtaChange:r,carrier:e,onCarrierChange:t,tracking:a,onTrackingChange:o,carrierOptions:i})=>n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Shipment"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Estimated arrival"}),n.jsx("input",{type:"date",value:s,onChange:l=>r(l.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]}),n.jsx(Va,{label:"Shipping carrier",value:e,options:i,onChange:t,placeholder:"Select carrier"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Tracking number"}),n.jsx("input",{type:"text",placeholder:"Enter tracking",value:a,onChange:l=>o(l.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]})]})]}),Toe=({supplierId:s,onSupplierIdChange:r,destinationId:e,onDestinationIdChange:t,paymentTerms:a,onPaymentTermsChange:o,currency:i,onCurrencyChange:l,vendorOptions:c,locationOptions:d,paymentTermsOptions:p,currencyOptions:h})=>n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Supplier & Destination"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[n.jsx(Va,{label:"Supplier",value:s,options:c,onChange:r,placeholder:"Select supplier"}),n.jsx(Va,{label:"Destination",value:e,options:d,onChange:t,placeholder:"Select destination"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:[n.jsx(Va,{label:"Payment terms (optional)",value:a,options:p,onChange:o,placeholder:"Select payment terms"}),n.jsx(Va,{label:"Supplier currency",value:i,options:h,onChange:l,placeholder:"Select currency"})]})]}),vM=u.createContext(void 0),Ooe=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),g={tags:r,loading:t,error:o,fetchTagsByStoreId:async y=>{try{a(!0),i(null);const b=await nt.get(`/purchase-order-tags/store/${y}`);e(b.data.data)}catch(b){const v=b.response?.data?.message||b.message||"Failed to fetch purchase order tags";i(v),console.error("Error fetching purchase order tags:",b)}finally{a(!1)}},createTag:async(y,b)=>{try{a(!0),i(null);const w=(await nt.post("/purchase-order-tags",{storeId:y,name:b.trim()})).data.data;return e(C=>[w,...C]),w}catch(v){const w=v.response?.data?.message||v.message||"Failed to create purchase order tag";throw i(w),console.error("Error creating purchase order tag:",v),v}finally{a(!1)}},deleteTag:async y=>{try{a(!0),i(null),await nt.delete(`/purchase-order-tags/${y}`),e(b=>b.filter(v=>v._id!==y))}catch(b){const v=b.response?.data?.message||b.message||"Failed to delete purchase order tag";throw i(v),console.error("Error deleting purchase order tag:",b),b}finally{a(!1)}},clearError:()=>{i(null)},clearTags:()=>{e([])}};return n.jsx(vM.Provider,{value:g,children:s})},bM=()=>{const s=u.useContext(vM);if(s===void 0)throw new Error("usePurchaseOrderTags must be used within a PurchaseOrderTagsProvider");return s},Poe=()=>{const[s,r]=u.useState(""),[e,t]=u.useState(""),[a,o]=u.useState(""),[i,l]=u.useState("INR"),[c,d]=u.useState(""),[p,h]=u.useState(""),[g,y]=u.useState(""),[b,v]=u.useState(""),[w,C]=u.useState([]),[k,N]=u.useState([]),[O,R]=u.useState(!1),L=u.useRef(0),B=u.useRef(k);u.useEffect(()=>{B.current=k},[k]);const[G,$]=u.useState(new Set),[z,Y]=u.useState(""),[M,q]=u.useState(""),[P,H]=u.useState([]),D=u.useMemo(()=>w.reduce((de,Ee)=>de+Ee.qty*Ee.cost,0),[w]),X=u.useMemo(()=>0,[D]),se=0,[Q,xe]=u.useState([]),[K,Z]=u.useState(!1),ve=u.useMemo(()=>Q.reduce((de,Ee)=>de+(Ee.type?.toLowerCase()==="discount"?-Math.abs(Ee.amount||0):Ee.amount||0),0),[Q]),ae=u.useMemo(()=>D+X+se+ve,[D,X,se,ve]),{activeStoreId:Se}=Ur(),{searchProductWithVariantAndDestination:Pe}=Ol();u.useEffect(()=>{const de=b.trim();if(!de||!e){B.current.length>0&&N([]);return}const Ee=++L.current,le=setTimeout(async()=>{R(!0);try{const Ye=await Pe({storeId:Se,q:de,destinationLocationId:e});Ee===L.current&&N(Array.isArray(Ye)?Ye:Ye?.data||[])}finally{Ee===L.current&&R(!1)}},400);return()=>{clearTimeout(le)}},[b,e,Pe,Se]);const{vendors:$e,fetchVendorsByStoreId:we}=nj(),{locations:Ae,fetchLocationsByStoreId:ze}=Lp(),{tags:Ge,fetchTagsByStoreId:Ue,loading:ht}=bM(),{createPurchaseOrder:ee,loading:ue}=cj(),Oe=dr();u.useEffect(()=>{Se&&we?.(Se)},[Se,we]),u.useEffect(()=>{Se&&ze?.(Se)},[Se,ze]),u.useEffect(()=>{Se&&Ue(Se).catch(()=>{})},[Se,Ue]);const J=u.useMemo(()=>[{value:"none",label:"None"},{value:"cash on delivery",label:"Cash on delivery"},{value:"payment on receipt",label:"Payment on receipt"},{value:"payment in advance",label:"Payment in advance"},{value:"net 7",label:"Net 7"},{value:"net 15",label:"Net 15"},{value:"net 30",label:"Net 30"},{value:"net 45",label:"Net 45"},{value:"net 60",label:"Net 60"}],[]),I=u.useMemo(()=>[{value:"INR",label:"INR"},{value:"USD",label:"USD"},{value:"EUR",label:"EUR"},{value:"GBP",label:"GBP"},{value:"JPY",label:"JPY"},{value:"AUD",label:"AUD"},{value:"CAD",label:"CAD"}],[]),V=u.useMemo(()=>["4PX-99 Minutos","Aeronet","ATS","Amazon","Amazon Logistics UK","AMM Speedreturn","AN Post","Anjun Logistics","Australia Post","Better Trucks","Bonshaw","Border Express","B Post","B Post International","Canada Post","Cargo Expresso GT","Cargo Expresso SV","Deliver It","Delivery"].map(de=>({value:de,label:de})),[]),re=u.useMemo(()=>($e||[]).map(de=>({value:de._id,label:de.name||de.title||"Unnamed vendor"})),[$e]),pe=u.useMemo(()=>(Ae||[]).map(de=>({value:de._id,label:de.name})),[Ae]),ge=u.useMemo(()=>Ge.map(de=>({value:de._id,label:de.name})),[Ge]),Ce=u.useMemo(()=>[{value:"shipping",label:"Shipping"},{value:"discount",label:"Discount"},{value:"handling",label:"Handling"},{value:"insurance",label:"Insurance"},{value:"packaging",label:"Packaging"},{value:"surcharge",label:"Surcharge"},{value:"customs",label:"Customs"},{value:"duty",label:"Duty"},{value:"other",label:"Other"}],[]),he=u.useCallback(()=>{const de=[],Ee=new Set(G);for(const le of B.current)for(const Ye of le?.variants||[])if(Ee.has(String(Ye._id))){const De=(()=>{const ct=Ye.optionValues||{};return Object.values(ct).map(dt=>String(dt)).join(" / ")})();de.push({variantId:String(Ye._id),productTitle:le?.product?.title||"Unnamed product",productImage:le?.product?.imageUrls?.[0],variantLabel:De,variantSku:Ye.sku,supplierSku:"",qty:1,cost:0,taxPct:0})}C(le=>{const Ye=new Set(le.map(ct=>ct.variantId)),De=[...le];for(const ct of de)Ye.has(ct.variantId)||De.push(ct);return De}),$(new Set)},[G]),ie=u.useCallback(de=>{$(Ee=>{const le=new Set(Ee),Ye=String(de);return le.has(Ye)?le.delete(Ye):le.add(Ye),le})},[]),Fe=u.useCallback(()=>{xe(de=>{const le=de.some(De=>(De.type||"").toLowerCase()==="shipping")?de:[{type:"shipping",amount:0},...de],Ye=le.findIndex(De=>(De.type||"").toLowerCase()==="shipping");if(Ye>0){const De=[...le],[ct]=De.splice(Ye,1);return De.unshift(ct),De}return le}),Z(!0)},[]),We=u.useCallback(async()=>{try{const de={storeId:Se,supplierId:s,destinationLocationId:e,referenceNumber:z||void 0,noteToSupplier:M||void 0,tags:P,paymentTerm:a||void 0,supplierCurrency:i||void 0,shippingCarrier:p||void 0,trackingNumber:g||void 0,expectedArrivalDate:c?new Date(c).toISOString():void 0,status:"draft",costAdjustments:Q.map(Ee=>({name:Ee.type,amount:Ee.amount})).concat([{name:"shipping",amount:0}]).reduce((Ee,le)=>{const Ye=Ee.findIndex(De=>De.name===le.name);return Ye===-1?Ee.push(le):Ee[Ye]={...Ee[Ye],amount:Ee[Ye].amount+le.amount},Ee},[]),entries:w.map(Ee=>({variantId:Ee.variantId,supplierSku:Ee.supplierSku||void 0,quantityOrdered:Ee.qty,cost:Ee.cost,taxPercent:Ee.taxPct||void 0}))};await ee(de),Oe("/products/purchase-orders")}catch{}},[Se,s,e,z,M,P,a,i,p,g,c,Q,w,ee,Oe]),Qe=u.useCallback(()=>{Oe("/products/purchase-orders")},[Oe]);return n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Create Purchase Order"})})}),n.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 space-y-4",children:[n.jsx(Toe,{supplierId:s,onSupplierIdChange:r,destinationId:e,onDestinationIdChange:t,paymentTerms:a,onPaymentTermsChange:o,currency:i,onCurrencyChange:l,vendorOptions:re,locationOptions:pe,paymentTermsOptions:J,currencyOptions:I}),n.jsx(Eoe,{eta:c,onEtaChange:d,carrier:p,onCarrierChange:h,tracking:g,onTrackingChange:y,carrierOptions:V}),n.jsx(Soe,{search:b,onSearchChange:v,searching:O,results:k,selectedVariantIds:G,onVariantToggle:ie,onAddSelected:he,items:w,onItemsChange:C}),n.jsx(Noe,{reference:z,onReferenceChange:Y,tagIds:P,onTagIdsChange:H,note:M,onNoteChange:q,tagOptions:ge,tagsLoading:ht}),n.jsx(koe,{itemsCount:w.length,subtotal:D,taxAmount:X,adjustmentsTotal:ve,adjustmentsRows:Q,shippingCost:se,total:ae,onManageClick:Fe,onCancel:Qe,onCreatePurchaseOrder:We,creatingPO:ue,canCreate:!ue&&!!Se&&!!s&&!!e&&w.length>0}),n.jsx(_oe,{open:K,onClose:()=>Z(!1),adjustmentsRows:Q,onAdjustmentsRowsChange:xe,adjustmentTypeOptions:Ce})]})]})})};function Aoe(){const{id:s}=ks(),r=dr(),{entries:e,fetchEntriesByPurchaseOrderId:t,loading:a,error:o,clearEntries:i}=xM(),{receiveInventory:l}=cj(),[c,d]=u.useState({}),[p,h]=u.useState({});u.useEffect(()=>{if(s)return t(s).catch(()=>{}),()=>i()},[s]);const g=u.useMemo(()=>e.map(v=>{const w=v.variantId,C=w?.productId?.title||"-",k=w?.optionValues?Object.values(w.optionValues).join(" / "):"",N=w?.sku||"-";return{e:v,productTitle:C,optionText:k,rsku:N}}),[e]),y=(v,w)=>C=>{const k=Number(C.target.value||0),N=Math.max(0,Math.min(k,w)),O=p[v]??0,R=Math.max(0,w-N),L=Math.min(O,R);d(B=>({...B,[v]:N})),L!==O&&h(B=>({...B,[v]:L}))},b=(v,w)=>C=>{const k=Number(C.target.value||0),N=c[v]??0,O=Math.max(0,w-N),R=Math.max(0,Math.min(k,O));h(L=>({...L,[v]:R}))};return n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>r(`/products/purchase-orders/${s}`),className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(gn,{className:"w-4 h-4"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Receive Inventory"})]}),n.jsx("button",{onClick:async()=>{if(!s)return;const v=e.map(w=>({entryId:w._id,accept:Number(c[w._id]??0)||0,reject:Number(p[w._id]??0)||0}));try{await l(s,v),r(`/products/purchase-orders/${s}`)}catch{}},className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Save"})]})}),n.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[o&&n.jsx("div",{className:"mb-4 px-3 py-2 border border-red-200 bg-red-50",children:n.jsx("p",{className:"text-sm text-red-600",children:o})}),a&&n.jsx("div",{className:"py-12 text-center",children:n.jsx("div",{className:"animate-spin rounded-full w-4 h-4 border-2 border-gray-300 border-t-gray-900 mx-auto"})}),!a&&n.jsx("div",{className:"border border-gray-200 p-4",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-white",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Product"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Supplier SKU"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"RSKU"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Ordered"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Received"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Accept"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Reject"})]})}),n.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[g.map(({e:v,productTitle:w,optionText:C,rsku:k})=>{const N=Math.max(0,(v.quantityOrdered||0)-(v.quantityReceived||0)),O=c[v._id]??0,R=p[v._id]??0,L=Math.max(0,N-R),B=Math.max(0,N-O);return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-2",children:n.jsxs("div",{className:"space-y-0.5",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:w}),C&&n.jsx("p",{className:"text-xs text-gray-600",children:C}),n.jsxs("p",{className:"text-xs text-gray-600",children:["SKU: ",k]})]})}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:v.supplierSku||"-"}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:k}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 text-right",children:v.quantityOrdered}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 text-right",children:v.quantityReceived}),n.jsx("td",{className:"px-4 py-2 text-right",children:n.jsx("input",{type:"number",min:0,max:L,value:O,onChange:y(v._id,N),className:"w-[140px] px-2 py-1 text-sm border border-gray-200 text-right focus:outline-none focus:ring-1 focus:ring-gray-400"})}),n.jsx("td",{className:"px-4 py-2 text-right",children:n.jsx("input",{type:"number",min:0,max:B,value:R,onChange:b(v._id,N),className:"w-[140px] px-2 py-1 text-sm border border-gray-200 text-right focus:outline-none focus:ring-1 focus:ring-gray-400"})})]},v._id)}),!a&&g.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-sm text-gray-600",children:"No entries"})})]})]})})})]})]})})}const Moe=({purchaseOrder:s,onRowClick:r})=>{const e=typeof s.supplierId=="string"?s.supplierId:s.supplierId?.name||s.supplierId?._id,t=typeof s.destinationLocationId=="string"?s.destinationLocationId:s.destinationLocationId?.name||s.destinationLocationId?._id;return n.jsxs("tr",{onClick:()=>r(s._id),className:"hover:bg-gray-50 cursor-pointer transition-colors",children:[n.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:s._id}),n.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:e}),n.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:t}),n.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900 capitalize",children:s.status.replaceAll("_"," ")}),n.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900 text-right",children:s.totalCost?.toFixed(2)}),n.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:s.expectedArrivalDate?new Date(s.expectedArrivalDate).toLocaleDateString():"-"})]})},Ioe=({purchaseOrders:s,onRowClick:r})=>n.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[s.map(e=>n.jsx(Moe,{purchaseOrder:e,onRowClick:r},e._id)),s.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-sm text-gray-600",children:"No purchase orders"})})]}),Roe=({purchaseOrders:s,onRowClick:r})=>n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-white",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"PO ID"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Supplier"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Destination"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Status"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Total"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Expected Arrival"})]})}),n.jsx(Ioe,{purchaseOrders:s,onRowClick:r})]});function Doe(){const{activeStoreId:s}=Ur(),{purchaseOrders:r,fetchPurchaseOrdersByStore:e,loading:t,error:a}=cj(),o=dr();u.useEffect(()=>{s&&e(s).catch(()=>{})},[s,e]);const i=u.useCallback(()=>{o("/products/purchase-orders/new")},[o]),l=u.useCallback(c=>{o(`/products/purchase-orders/${c}`)},[o]);return n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Purchase Orders"}),n.jsx("button",{onClick:i,className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Create purchase order"})]})}),n.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[t&&n.jsx("div",{className:"flex justify-center py-12",children:n.jsx("div",{className:"animate-spin rounded-full w-4 h-4 border-2 border-gray-300 border-t-gray-900"})}),a&&n.jsx("div",{className:"mb-4 px-3 py-2 border border-red-200 bg-red-50",children:n.jsx("p",{className:"text-sm text-red-600",children:a})}),!t&&n.jsx("div",{className:"border border-gray-200 overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsx(Roe,{purchaseOrders:r,onRowClick:l})})})]})]})})}const tx={black:"#000",white:"#fff"},Eh={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Th={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Oh={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Ph={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Ah={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},ry={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},Loe={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function tu(s,...r){const e=new URL(`https://mui.com/production-error/?code=${s}`);return r.forEach(t=>e.searchParams.append("args[]",t)),`Minified MUI error #${s}; visit ${e} for the full message.`}const dj="$$material";function vw(){return vw=Object.assign?Object.assign.bind():function(s){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var t in e)({}).hasOwnProperty.call(e,t)&&(s[t]=e[t])}return s},vw.apply(null,arguments)}function Foe(s){if(s.sheet)return s.sheet;for(var r=0;r<document.styleSheets.length;r++)if(document.styleSheets[r].ownerNode===s)return document.styleSheets[r]}function Boe(s){var r=document.createElement("style");return r.setAttribute("data-emotion",s.key),s.nonce!==void 0&&r.setAttribute("nonce",s.nonce),r.appendChild(document.createTextNode("")),r.setAttribute("data-s",""),r}var zoe=(function(){function s(e){var t=this;this._insertTag=function(a){var o;t.tags.length===0?t.insertionPoint?o=t.insertionPoint.nextSibling:t.prepend?o=t.container.firstChild:o=t.before:o=t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(a,o),t.tags.push(a)},this.isSpeedy=e.speedy===void 0?!0:e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var r=s.prototype;return r.hydrate=function(t){t.forEach(this._insertTag)},r.insert=function(t){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Boe(this));var a=this.tags[this.tags.length-1];if(this.isSpeedy){var o=Foe(a);try{o.insertRule(t,o.cssRules.length)}catch{}}else a.appendChild(document.createTextNode(t));this.ctr++},r.flush=function(){this.tags.forEach(function(t){var a;return(a=t.parentNode)==null?void 0:a.removeChild(t)}),this.tags=[],this.ctr=0},s})(),Yo="-ms-",bw="-moz-",Ts="-webkit-",wM="comm",ok="rule",ik="decl",$oe="@import",jM="@keyframes",Uoe="@layer",Voe=Math.abs,uj=String.fromCharCode,Hoe=Object.assign;function Woe(s,r){return Lo(s,0)^45?(((r<<2^Lo(s,0))<<2^Lo(s,1))<<2^Lo(s,2))<<2^Lo(s,3):0}function CM(s){return s.trim()}function qoe(s,r){return(s=r.exec(s))?s[0]:s}function Os(s,r,e){return s.replace(r,e)}function SN(s,r){return s.indexOf(r)}function Lo(s,r){return s.charCodeAt(r)|0}function rx(s,r,e){return s.slice(r,e)}function Wc(s){return s.length}function lk(s){return s.length}function yv(s,r){return r.push(s),s}function Goe(s,r){return s.map(r).join("")}var fj=1,Cm=1,SM=0,Ii=0,to=0,Lm="";function pj(s,r,e,t,a,o,i){return{value:s,root:r,parent:e,type:t,props:a,children:o,line:fj,column:Cm,length:i,return:""}}function ny(s,r){return Hoe(pj("",null,null,"",null,null,0),s,{length:-s.length},r)}function Koe(){return to}function Yoe(){return to=Ii>0?Lo(Lm,--Ii):0,Cm--,to===10&&(Cm=1,fj--),to}function el(){return to=Ii<SM?Lo(Lm,Ii++):0,Cm++,to===10&&(Cm=1,fj++),to}function Qc(){return Lo(Lm,Ii)}function Kv(){return Ii}function Mx(s,r){return rx(Lm,s,r)}function nx(s){switch(s){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function NM(s){return fj=Cm=1,SM=Wc(Lm=s),Ii=0,[]}function kM(s){return Lm="",s}function Yv(s){return CM(Mx(Ii-1,NN(s===91?s+2:s===40?s+1:s)))}function Zoe(s){for(;(to=Qc())&&to<33;)el();return nx(s)>2||nx(to)>3?"":" "}function Xoe(s,r){for(;--r&&el()&&!(to<48||to>102||to>57&&to<65||to>70&&to<97););return Mx(s,Kv()+(r<6&&Qc()==32&&el()==32))}function NN(s){for(;el();)switch(to){case s:return Ii;case 34:case 39:s!==34&&s!==39&&NN(to);break;case 40:s===41&&NN(s);break;case 92:el();break}return Ii}function Qoe(s,r){for(;el()&&s+to!==57;)if(s+to===84&&Qc()===47)break;return"/*"+Mx(r,Ii-1)+"*"+uj(s===47?s:el())}function Joe(s){for(;!nx(Qc());)el();return Mx(s,Ii)}function eie(s){return kM(Zv("",null,null,null,[""],s=NM(s),0,[0],s))}function Zv(s,r,e,t,a,o,i,l,c){for(var d=0,p=0,h=i,g=0,y=0,b=0,v=1,w=1,C=1,k=0,N="",O=a,R=o,L=t,B=N;w;)switch(b=k,k=el()){case 40:if(b!=108&&Lo(B,h-1)==58){SN(B+=Os(Yv(k),"&","&\f"),"&\f")!=-1&&(C=-1);break}case 34:case 39:case 91:B+=Yv(k);break;case 9:case 10:case 13:case 32:B+=Zoe(b);break;case 92:B+=Xoe(Kv()-1,7);continue;case 47:switch(Qc()){case 42:case 47:yv(tie(Qoe(el(),Kv()),r,e),c);break;default:B+="/"}break;case 123*v:l[d++]=Wc(B)*C;case 125*v:case 59:case 0:switch(k){case 0:case 125:w=0;case 59+p:C==-1&&(B=Os(B,/\f/g,"")),y>0&&Wc(B)-h&&yv(y>32?YT(B+";",t,e,h-1):YT(Os(B," ","")+";",t,e,h-2),c);break;case 59:B+=";";default:if(yv(L=KT(B,r,e,d,p,a,l,N,O=[],R=[],h),o),k===123)if(p===0)Zv(B,r,L,L,O,o,h,l,R);else switch(g===99&&Lo(B,3)===110?100:g){case 100:case 108:case 109:case 115:Zv(s,L,L,t&&yv(KT(s,L,L,0,0,a,l,N,a,O=[],h),R),a,R,h,l,t?O:R);break;default:Zv(B,L,L,L,[""],R,0,l,R)}}d=p=y=0,v=C=1,N=B="",h=i;break;case 58:h=1+Wc(B),y=b;default:if(v<1){if(k==123)--v;else if(k==125&&v++==0&&Yoe()==125)continue}switch(B+=uj(k),k*v){case 38:C=p>0?1:(B+="\f",-1);break;case 44:l[d++]=(Wc(B)-1)*C,C=1;break;case 64:Qc()===45&&(B+=Yv(el())),g=Qc(),p=h=Wc(N=B+=Joe(Kv())),k++;break;case 45:b===45&&Wc(B)==2&&(v=0)}}return o}function KT(s,r,e,t,a,o,i,l,c,d,p){for(var h=a-1,g=a===0?o:[""],y=lk(g),b=0,v=0,w=0;b<t;++b)for(var C=0,k=rx(s,h+1,h=Voe(v=i[b])),N=s;C<y;++C)(N=CM(v>0?g[C]+" "+k:Os(k,/&\f/g,g[C])))&&(c[w++]=N);return pj(s,r,e,a===0?ok:l,c,d,p)}function tie(s,r,e){return pj(s,r,e,wM,uj(Koe()),rx(s,2,-2),0)}function YT(s,r,e,t){return pj(s,r,e,ik,rx(s,0,t),rx(s,t+1,-1),t)}function pm(s,r){for(var e="",t=lk(s),a=0;a<t;a++)e+=r(s[a],a,s,r)||"";return e}function rie(s,r,e,t){switch(s.type){case Uoe:if(s.children.length)break;case $oe:case ik:return s.return=s.return||s.value;case wM:return"";case jM:return s.return=s.value+"{"+pm(s.children,t)+"}";case ok:s.value=s.props.join(",")}return Wc(e=pm(s.children,t))?s.return=s.value+"{"+e+"}":""}function nie(s){var r=lk(s);return function(e,t,a,o){for(var i="",l=0;l<r;l++)i+=s[l](e,t,a,o)||"";return i}}function sie(s){return function(r){r.root||(r=r.return)&&s(r)}}function _M(s){var r=Object.create(null);return function(e){return r[e]===void 0&&(r[e]=s(e)),r[e]}}var aie=function(r,e,t){for(var a=0,o=0;a=o,o=Qc(),a===38&&o===12&&(e[t]=1),!nx(o);)el();return Mx(r,Ii)},oie=function(r,e){var t=-1,a=44;do switch(nx(a)){case 0:a===38&&Qc()===12&&(e[t]=1),r[t]+=aie(Ii-1,e,t);break;case 2:r[t]+=Yv(a);break;case 4:if(a===44){r[++t]=Qc()===58?"&\f":"",e[t]=r[t].length;break}default:r[t]+=uj(a)}while(a=el());return r},iie=function(r,e){return kM(oie(NM(r),e))},ZT=new WeakMap,lie=function(r){if(!(r.type!=="rule"||!r.parent||r.length<1)){for(var e=r.value,t=r.parent,a=r.column===t.column&&r.line===t.line;t.type!=="rule";)if(t=t.parent,!t)return;if(!(r.props.length===1&&e.charCodeAt(0)!==58&&!ZT.get(t))&&!a){ZT.set(r,!0);for(var o=[],i=iie(e,o),l=t.props,c=0,d=0;c<i.length;c++)for(var p=0;p<l.length;p++,d++)r.props[d]=o[c]?i[c].replace(/&\f/g,l[p]):l[p]+" "+i[c]}}},cie=function(r){if(r.type==="decl"){var e=r.value;e.charCodeAt(0)===108&&e.charCodeAt(2)===98&&(r.return="",r.value="")}};function EM(s,r){switch(Woe(s,r)){case 5103:return Ts+"print-"+s+s;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ts+s+s;case 5349:case 4246:case 4810:case 6968:case 2756:return Ts+s+bw+s+Yo+s+s;case 6828:case 4268:return Ts+s+Yo+s+s;case 6165:return Ts+s+Yo+"flex-"+s+s;case 5187:return Ts+s+Os(s,/(\w+).+(:[^]+)/,Ts+"box-$1$2"+Yo+"flex-$1$2")+s;case 5443:return Ts+s+Yo+"flex-item-"+Os(s,/flex-|-self/,"")+s;case 4675:return Ts+s+Yo+"flex-line-pack"+Os(s,/align-content|flex-|-self/,"")+s;case 5548:return Ts+s+Yo+Os(s,"shrink","negative")+s;case 5292:return Ts+s+Yo+Os(s,"basis","preferred-size")+s;case 6060:return Ts+"box-"+Os(s,"-grow","")+Ts+s+Yo+Os(s,"grow","positive")+s;case 4554:return Ts+Os(s,/([^-])(transform)/g,"$1"+Ts+"$2")+s;case 6187:return Os(Os(Os(s,/(zoom-|grab)/,Ts+"$1"),/(image-set)/,Ts+"$1"),s,"")+s;case 5495:case 3959:return Os(s,/(image-set\([^]*)/,Ts+"$1$`$1");case 4968:return Os(Os(s,/(.+:)(flex-)?(.*)/,Ts+"box-pack:$3"+Yo+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ts+s+s;case 4095:case 3583:case 4068:case 2532:return Os(s,/(.+)-inline(.+)/,Ts+"$1$2")+s;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Wc(s)-1-r>6)switch(Lo(s,r+1)){case 109:if(Lo(s,r+4)!==45)break;case 102:return Os(s,/(.+:)(.+)-([^]+)/,"$1"+Ts+"$2-$3$1"+bw+(Lo(s,r+3)==108?"$3":"$2-$3"))+s;case 115:return~SN(s,"stretch")?EM(Os(s,"stretch","fill-available"),r)+s:s}break;case 4949:if(Lo(s,r+1)!==115)break;case 6444:switch(Lo(s,Wc(s)-3-(~SN(s,"!important")&&10))){case 107:return Os(s,":",":"+Ts)+s;case 101:return Os(s,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ts+(Lo(s,14)===45?"inline-":"")+"box$3$1"+Ts+"$2$3$1"+Yo+"$2box$3")+s}break;case 5936:switch(Lo(s,r+11)){case 114:return Ts+s+Yo+Os(s,/[svh]\w+-[tblr]{2}/,"tb")+s;case 108:return Ts+s+Yo+Os(s,/[svh]\w+-[tblr]{2}/,"tb-rl")+s;case 45:return Ts+s+Yo+Os(s,/[svh]\w+-[tblr]{2}/,"lr")+s}return Ts+s+Yo+s+s}return s}var die=function(r,e,t,a){if(r.length>-1&&!r.return)switch(r.type){case ik:r.return=EM(r.value,r.length);break;case jM:return pm([ny(r,{value:Os(r.value,"@","@"+Ts)})],a);case ok:if(r.length)return Goe(r.props,function(o){switch(qoe(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return pm([ny(r,{props:[Os(o,/:(read-\w+)/,":"+bw+"$1")]})],a);case"::placeholder":return pm([ny(r,{props:[Os(o,/:(plac\w+)/,":"+Ts+"input-$1")]}),ny(r,{props:[Os(o,/:(plac\w+)/,":"+bw+"$1")]}),ny(r,{props:[Os(o,/:(plac\w+)/,Yo+"input-$1")]})],a)}return""})}},uie=[die],fie=function(r){var e=r.key;if(e==="css"){var t=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(t,function(v){var w=v.getAttribute("data-emotion");w.indexOf(" ")!==-1&&(document.head.appendChild(v),v.setAttribute("data-s",""))})}var a=r.stylisPlugins||uie,o={},i,l=[];i=r.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),function(v){for(var w=v.getAttribute("data-emotion").split(" "),C=1;C<w.length;C++)o[w[C]]=!0;l.push(v)});var c,d=[lie,cie];{var p,h=[rie,sie(function(v){p.insert(v)})],g=nie(d.concat(a,h)),y=function(w){return pm(eie(w),g)};c=function(w,C,k,N){p=k,y(w?w+"{"+C.styles+"}":C.styles),N&&(b.inserted[C.name]=!0)}}var b={key:e,sheet:new zoe({key:e,container:i,nonce:r.nonce,speedy:r.speedy,prepend:r.prepend,insertionPoint:r.insertionPoint}),nonce:r.nonce,inserted:o,registered:{},insert:c};return b.sheet.hydrate(l),b},FC={exports:{}},Ls={};var XT;function pie(){if(XT)return Ls;XT=1;var s=typeof Symbol=="function"&&Symbol.for,r=s?Symbol.for("react.element"):60103,e=s?Symbol.for("react.portal"):60106,t=s?Symbol.for("react.fragment"):60107,a=s?Symbol.for("react.strict_mode"):60108,o=s?Symbol.for("react.profiler"):60114,i=s?Symbol.for("react.provider"):60109,l=s?Symbol.for("react.context"):60110,c=s?Symbol.for("react.async_mode"):60111,d=s?Symbol.for("react.concurrent_mode"):60111,p=s?Symbol.for("react.forward_ref"):60112,h=s?Symbol.for("react.suspense"):60113,g=s?Symbol.for("react.suspense_list"):60120,y=s?Symbol.for("react.memo"):60115,b=s?Symbol.for("react.lazy"):60116,v=s?Symbol.for("react.block"):60121,w=s?Symbol.for("react.fundamental"):60117,C=s?Symbol.for("react.responder"):60118,k=s?Symbol.for("react.scope"):60119;function N(R){if(typeof R=="object"&&R!==null){var L=R.$$typeof;switch(L){case r:switch(R=R.type,R){case c:case d:case t:case o:case a:case h:return R;default:switch(R=R&&R.$$typeof,R){case l:case p:case b:case y:case i:return R;default:return L}}case e:return L}}}function O(R){return N(R)===d}return Ls.AsyncMode=c,Ls.ConcurrentMode=d,Ls.ContextConsumer=l,Ls.ContextProvider=i,Ls.Element=r,Ls.ForwardRef=p,Ls.Fragment=t,Ls.Lazy=b,Ls.Memo=y,Ls.Portal=e,Ls.Profiler=o,Ls.StrictMode=a,Ls.Suspense=h,Ls.isAsyncMode=function(R){return O(R)||N(R)===c},Ls.isConcurrentMode=O,Ls.isContextConsumer=function(R){return N(R)===l},Ls.isContextProvider=function(R){return N(R)===i},Ls.isElement=function(R){return typeof R=="object"&&R!==null&&R.$$typeof===r},Ls.isForwardRef=function(R){return N(R)===p},Ls.isFragment=function(R){return N(R)===t},Ls.isLazy=function(R){return N(R)===b},Ls.isMemo=function(R){return N(R)===y},Ls.isPortal=function(R){return N(R)===e},Ls.isProfiler=function(R){return N(R)===o},Ls.isStrictMode=function(R){return N(R)===a},Ls.isSuspense=function(R){return N(R)===h},Ls.isValidElementType=function(R){return typeof R=="string"||typeof R=="function"||R===t||R===d||R===o||R===a||R===h||R===g||typeof R=="object"&&R!==null&&(R.$$typeof===b||R.$$typeof===y||R.$$typeof===i||R.$$typeof===l||R.$$typeof===p||R.$$typeof===w||R.$$typeof===C||R.$$typeof===k||R.$$typeof===v)},Ls.typeOf=N,Ls}var QT;function hie(){return QT||(QT=1,FC.exports=pie()),FC.exports}var BC,JT;function mie(){if(JT)return BC;JT=1;var s=hie(),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},e={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},t={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};o[s.ForwardRef]=t,o[s.Memo]=a;function i(b){return s.isMemo(b)?a:o[b.$$typeof]||r}var l=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,g=Object.prototype;function y(b,v,w){if(typeof v!="string"){if(g){var C=h(v);C&&C!==g&&y(b,C,w)}var k=c(v);d&&(k=k.concat(d(v)));for(var N=i(b),O=i(v),R=0;R<k.length;++R){var L=k[R];if(!e[L]&&!(w&&w[L])&&!(O&&O[L])&&!(N&&N[L])){var B=p(v,L);try{l(b,L,B)}catch{}}}}return b}return BC=y,BC}mie();var gie=!0;function TM(s,r,e){var t="";return e.split(" ").forEach(function(a){s[a]!==void 0?r.push(s[a]+";"):a&&(t+=a+" ")}),t}var ck=function(r,e,t){var a=r.key+"-"+e.name;(t===!1||gie===!1)&&r.registered[a]===void 0&&(r.registered[a]=e.styles)},dk=function(r,e,t){ck(r,e,t);var a=r.key+"-"+e.name;if(r.inserted[e.name]===void 0){var o=e;do r.insert(e===o?"."+a:"",o,r.sheet,!0),o=o.next;while(o!==void 0)}};function yie(s){for(var r=0,e,t=0,a=s.length;a>=4;++t,a-=4)e=s.charCodeAt(t)&255|(s.charCodeAt(++t)&255)<<8|(s.charCodeAt(++t)&255)<<16|(s.charCodeAt(++t)&255)<<24,e=(e&65535)*1540483477+((e>>>16)*59797<<16),e^=e>>>24,r=(e&65535)*1540483477+((e>>>16)*59797<<16)^(r&65535)*1540483477+((r>>>16)*59797<<16);switch(a){case 3:r^=(s.charCodeAt(t+2)&255)<<16;case 2:r^=(s.charCodeAt(t+1)&255)<<8;case 1:r^=s.charCodeAt(t)&255,r=(r&65535)*1540483477+((r>>>16)*59797<<16)}return r^=r>>>13,r=(r&65535)*1540483477+((r>>>16)*59797<<16),((r^r>>>15)>>>0).toString(36)}var xie={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},vie=/[A-Z]|^ms/g,bie=/_EMO_([^_]+?)_([^]*?)_EMO_/g,OM=function(r){return r.charCodeAt(1)===45},e4=function(r){return r!=null&&typeof r!="boolean"},zC=_M(function(s){return OM(s)?s:s.replace(vie,"-$&").toLowerCase()}),t4=function(r,e){switch(r){case"animation":case"animationName":if(typeof e=="string")return e.replace(bie,function(t,a,o){return qc={name:a,styles:o,next:qc},a})}return xie[r]!==1&&!OM(r)&&typeof e=="number"&&e!==0?e+"px":e};function sx(s,r,e){if(e==null)return"";var t=e;if(t.__emotion_styles!==void 0)return t;switch(typeof e){case"boolean":return"";case"object":{var a=e;if(a.anim===1)return qc={name:a.name,styles:a.styles,next:qc},a.name;var o=e;if(o.styles!==void 0){var i=o.next;if(i!==void 0)for(;i!==void 0;)qc={name:i.name,styles:i.styles,next:qc},i=i.next;var l=o.styles+";";return l}return wie(s,r,e)}case"function":{if(s!==void 0){var c=qc,d=e(s);return qc=c,sx(s,r,d)}break}}var p=e;if(r==null)return p;var h=r[p];return h!==void 0?h:p}function wie(s,r,e){var t="";if(Array.isArray(e))for(var a=0;a<e.length;a++)t+=sx(s,r,e[a])+";";else for(var o in e){var i=e[o];if(typeof i!="object"){var l=i;r!=null&&r[l]!==void 0?t+=o+"{"+r[l]+"}":e4(l)&&(t+=zC(o)+":"+t4(o,l)+";")}else if(Array.isArray(i)&&typeof i[0]=="string"&&(r==null||r[i[0]]===void 0))for(var c=0;c<i.length;c++)e4(i[c])&&(t+=zC(o)+":"+t4(o,i[c])+";");else{var d=sx(s,r,i);switch(o){case"animation":case"animationName":{t+=zC(o)+":"+d+";";break}default:t+=o+"{"+d+"}"}}}return t}var r4=/label:\s*([^\s;{]+)\s*(;|$)/g,qc;function Ix(s,r,e){if(s.length===1&&typeof s[0]=="object"&&s[0]!==null&&s[0].styles!==void 0)return s[0];var t=!0,a="";qc=void 0;var o=s[0];if(o==null||o.raw===void 0)t=!1,a+=sx(e,r,o);else{var i=o;a+=i[0]}for(var l=1;l<s.length;l++)if(a+=sx(e,r,s[l]),t){var c=o;a+=c[l]}r4.lastIndex=0;for(var d="",p;(p=r4.exec(a))!==null;)d+="-"+p[1];var h=yie(a)+d;return{name:h,styles:a,next:qc}}var jie=function(r){return r()},PM=vS.useInsertionEffect?vS.useInsertionEffect:!1,AM=PM||jie,n4=PM||u.useLayoutEffect,MM=u.createContext(typeof HTMLElement<"u"?fie({key:"css"}):null);MM.Provider;var uk=function(r){return u.forwardRef(function(e,t){var a=u.useContext(MM);return r(e,a,t)})},hj=u.createContext({}),fk={}.hasOwnProperty,kN="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Cie=function(r,e){var t={};for(var a in e)fk.call(e,a)&&(t[a]=e[a]);return t[kN]=r,t},Sie=function(r){var e=r.cache,t=r.serialized,a=r.isStringTag;return ck(e,t,a),AM(function(){return dk(e,t,a)}),null},Nie=uk(function(s,r,e){var t=s.css;typeof t=="string"&&r.registered[t]!==void 0&&(t=r.registered[t]);var a=s[kN],o=[t],i="";typeof s.className=="string"?i=TM(r.registered,o,s.className):s.className!=null&&(i=s.className+" ");var l=Ix(o,void 0,u.useContext(hj));i+=r.key+"-"+l.name;var c={};for(var d in s)fk.call(s,d)&&d!=="css"&&d!==kN&&(c[d]=s[d]);return c.className=i,e&&(c.ref=e),u.createElement(u.Fragment,null,u.createElement(Sie,{cache:r,serialized:l,isStringTag:typeof a=="string"}),u.createElement(a,c))}),kie=Nie,s4=function(r,e){var t=arguments;if(e==null||!fk.call(e,"css"))return u.createElement.apply(void 0,t);var a=t.length,o=new Array(a);o[0]=kie,o[1]=Cie(r,e);for(var i=2;i<a;i++)o[i]=t[i];return u.createElement.apply(null,o)};(function(s){var r;r||(r=s.JSX||(s.JSX={}))})(s4||(s4={}));var _ie=uk(function(s,r){var e=s.styles,t=Ix([e],void 0,u.useContext(hj)),a=u.useRef();return n4(function(){var o=r.key+"-global",i=new r.sheet.constructor({key:o,nonce:r.sheet.nonce,container:r.sheet.container,speedy:r.sheet.isSpeedy}),l=!1,c=document.querySelector('style[data-emotion="'+o+" "+t.name+'"]');return r.sheet.tags.length&&(i.before=r.sheet.tags[0]),c!==null&&(l=!0,c.setAttribute("data-emotion",o),i.hydrate([c])),a.current=[i,l],function(){i.flush()}},[r]),n4(function(){var o=a.current,i=o[0],l=o[1];if(l){o[1]=!1;return}if(t.next!==void 0&&dk(r,t.next,!0),i.tags.length){var c=i.tags[i.tags.length-1].nextElementSibling;i.before=c,i.flush()}r.insert("",t,i,!1)},[r,t.name]),null});function pk(){for(var s=arguments.length,r=new Array(s),e=0;e<s;e++)r[e]=arguments[e];return Ix(r)}function Rx(){var s=pk.apply(void 0,arguments),r="animation-"+s.name;return{name:r,styles:"@keyframes "+r+"{"+s.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var Eie=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Tie=_M(function(s){return Eie.test(s)||s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&s.charCodeAt(2)<91}),Oie=Tie,Pie=function(r){return r!=="theme"},a4=function(r){return typeof r=="string"&&r.charCodeAt(0)>96?Oie:Pie},o4=function(r,e,t){var a;if(e){var o=e.shouldForwardProp;a=r.__emotion_forwardProp&&o?function(i){return r.__emotion_forwardProp(i)&&o(i)}:o}return typeof a!="function"&&t&&(a=r.__emotion_forwardProp),a},Aie=function(r){var e=r.cache,t=r.serialized,a=r.isStringTag;return ck(e,t,a),AM(function(){return dk(e,t,a)}),null},Mie=function s(r,e){var t=r.__emotion_real===r,a=t&&r.__emotion_base||r,o,i;e!==void 0&&(o=e.label,i=e.target);var l=o4(r,e,t),c=l||a4(a),d=!c("as");return function(){var p=arguments,h=t&&r.__emotion_styles!==void 0?r.__emotion_styles.slice(0):[];if(o!==void 0&&h.push("label:"+o+";"),p[0]==null||p[0].raw===void 0)h.push.apply(h,p);else{var g=p[0];h.push(g[0]);for(var y=p.length,b=1;b<y;b++)h.push(p[b],g[b])}var v=uk(function(w,C,k){var N=d&&w.as||a,O="",R=[],L=w;if(w.theme==null){L={};for(var B in w)L[B]=w[B];L.theme=u.useContext(hj)}typeof w.className=="string"?O=TM(C.registered,R,w.className):w.className!=null&&(O=w.className+" ");var G=Ix(h.concat(R),C.registered,L);O+=C.key+"-"+G.name,i!==void 0&&(O+=" "+i);var $=d&&l===void 0?a4(N):c,z={};for(var Y in w)d&&Y==="as"||$(Y)&&(z[Y]=w[Y]);return z.className=O,k&&(z.ref=k),u.createElement(u.Fragment,null,u.createElement(Aie,{cache:C,serialized:G,isStringTag:typeof N=="string"}),u.createElement(N,z))});return v.displayName=o!==void 0?o:"Styled("+(typeof a=="string"?a:a.displayName||a.name||"Component")+")",v.defaultProps=r.defaultProps,v.__emotion_real=v,v.__emotion_base=a,v.__emotion_styles=h,v.__emotion_forwardProp=l,Object.defineProperty(v,"toString",{value:function(){return"."+i}}),v.withComponent=function(w,C){var k=s(w,vw({},e,C,{shouldForwardProp:o4(v,C,!0)}));return k.apply(void 0,h)},v}},Iie=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],_N=Mie.bind(null);Iie.forEach(function(s){_N[s]=_N(s)});function Rie(s){return s==null||Object.keys(s).length===0}function Die(s){const{styles:r,defaultTheme:e={}}=s,t=typeof r=="function"?a=>r(Rie(a)?e:a):r;return n.jsx(_ie,{styles:t})}function IM(s,r){return _N(s,r)}function Lie(s,r){Array.isArray(s.__emotion_styles)&&(s.__emotion_styles=r(s.__emotion_styles))}const i4=[];function ef(s){return i4[0]=s,Ix(i4)}var $C={exports:{}},na={};var l4;function Fie(){if(l4)return na;l4=1;var s=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),t=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),i=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.for("react.view_transition"),y=Symbol.for("react.client.reference");function b(v){if(typeof v=="object"&&v!==null){var w=v.$$typeof;switch(w){case s:switch(v=v.type,v){case e:case a:case t:case c:case d:case g:return v;default:switch(v=v&&v.$$typeof,v){case i:case l:case h:case p:return v;case o:return v;default:return w}}case r:return w}}}return na.ContextConsumer=o,na.ContextProvider=i,na.Element=s,na.ForwardRef=l,na.Fragment=e,na.Lazy=h,na.Memo=p,na.Portal=r,na.Profiler=a,na.StrictMode=t,na.Suspense=c,na.SuspenseList=d,na.isContextConsumer=function(v){return b(v)===o},na.isContextProvider=function(v){return b(v)===i},na.isElement=function(v){return typeof v=="object"&&v!==null&&v.$$typeof===s},na.isForwardRef=function(v){return b(v)===l},na.isFragment=function(v){return b(v)===e},na.isLazy=function(v){return b(v)===h},na.isMemo=function(v){return b(v)===p},na.isPortal=function(v){return b(v)===r},na.isProfiler=function(v){return b(v)===a},na.isStrictMode=function(v){return b(v)===t},na.isSuspense=function(v){return b(v)===c},na.isSuspenseList=function(v){return b(v)===d},na.isValidElementType=function(v){return typeof v=="string"||typeof v=="function"||v===e||v===a||v===t||v===c||v===d||typeof v=="object"&&v!==null&&(v.$$typeof===h||v.$$typeof===p||v.$$typeof===i||v.$$typeof===o||v.$$typeof===l||v.$$typeof===y||v.getModuleId!==void 0)},na.typeOf=b,na}var c4;function Bie(){return c4||(c4=1,$C.exports=Fie()),$C.exports}var RM=Bie();function Kc(s){if(typeof s!="object"||s===null)return!1;const r=Object.getPrototypeOf(s);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)}function DM(s){if(u.isValidElement(s)||RM.isValidElementType(s)||!Kc(s))return s;const r={};return Object.keys(s).forEach(e=>{r[e]=DM(s[e])}),r}function _o(s,r,e={clone:!0}){const t=e.clone?{...s}:s;return Kc(s)&&Kc(r)&&Object.keys(r).forEach(a=>{u.isValidElement(r[a])||RM.isValidElementType(r[a])?t[a]=r[a]:Kc(r[a])&&Object.prototype.hasOwnProperty.call(s,a)&&Kc(s[a])?t[a]=_o(s[a],r[a],e):e.clone?t[a]=Kc(r[a])?DM(r[a]):r[a]:t[a]=r[a]}),t}const zie=s=>{const r=Object.keys(s).map(e=>({key:e,val:s[e]}))||[];return r.sort((e,t)=>e.val-t.val),r.reduce((e,t)=>({...e,[t.key]:t.val}),{})};function $ie(s){const{values:r={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:e="px",step:t=5,...a}=s,o=zie(r),i=Object.keys(o);function l(g){return`@media (min-width:${typeof r[g]=="number"?r[g]:g}${e})`}function c(g){return`@media (max-width:${(typeof r[g]=="number"?r[g]:g)-t/100}${e})`}function d(g,y){const b=i.indexOf(y);return`@media (min-width:${typeof r[g]=="number"?r[g]:g}${e}) and (max-width:${(b!==-1&&typeof r[i[b]]=="number"?r[i[b]]:y)-t/100}${e})`}function p(g){return i.indexOf(g)+1<i.length?d(g,i[i.indexOf(g)+1]):l(g)}function h(g){const y=i.indexOf(g);return y===0?l(i[1]):y===i.length-1?c(i[y]):d(g,i[i.indexOf(g)+1]).replace("@media","@media not all and")}return{keys:i,values:o,up:l,down:c,between:d,only:p,not:h,unit:e,...a}}function d4(s,r){if(!s.containerQueries)return r;const e=Object.keys(r).filter(t=>t.startsWith("@container")).sort((t,a)=>{const o=/min-width:\s*([0-9.]+)/;return+(t.match(o)?.[1]||0)-+(a.match(o)?.[1]||0)});return e.length?e.reduce((t,a)=>{const o=r[a];return delete t[a],t[a]=o,t},{...r}):r}function Uie(s,r){return r==="@"||r.startsWith("@")&&(s.some(e=>r.startsWith(`@${e}`))||!!r.match(/^@\d/))}function Vie(s,r){const e=r.match(/^@([^/]+)?\/?(.+)?$/);if(!e)return null;const[,t,a]=e,o=Number.isNaN(+t)?t||0:+t;return s.containerQueries(a).up(o)}function Hie(s){const r=(o,i)=>o.replace("@media",i?`@container ${i}`:"@container");function e(o,i){o.up=(...l)=>r(s.breakpoints.up(...l),i),o.down=(...l)=>r(s.breakpoints.down(...l),i),o.between=(...l)=>r(s.breakpoints.between(...l),i),o.only=(...l)=>r(s.breakpoints.only(...l),i),o.not=(...l)=>{const c=r(s.breakpoints.not(...l),i);return c.includes("not all and")?c.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):c}}const t={},a=o=>(e(t,o),t);return e(a),{...s,containerQueries:a}}const Wie={borderRadius:4};function $y(s,r){return r?_o(s,r,{clone:!1}):s}const mj={xs:0,sm:600,md:900,lg:1200,xl:1536},u4={keys:["xs","sm","md","lg","xl"],up:s=>`@media (min-width:${mj[s]}px)`},qie={containerQueries:s=>({up:r=>{let e=typeof r=="number"?r:mj[r]||r;return typeof e=="number"&&(e=`${e}px`),s?`@container ${s} (min-width:${e})`:`@container (min-width:${e})`}})};function dc(s,r,e){const t=s.theme||{};if(Array.isArray(r)){const o=t.breakpoints||u4;return r.reduce((i,l,c)=>(i[o.up(o.keys[c])]=e(r[c]),i),{})}if(typeof r=="object"){const o=t.breakpoints||u4;return Object.keys(r).reduce((i,l)=>{if(Uie(o.keys,l)){const c=Vie(t.containerQueries?t:qie,l);c&&(i[c]=e(r[l],l))}else if(Object.keys(o.values||mj).includes(l)){const c=o.up(l);i[c]=e(r[l],l)}else{const c=l;i[c]=r[c]}return i},{})}return e(r)}function LM(s={}){return s.keys?.reduce((e,t)=>{const a=s.up(t);return e[a]={},e},{})||{}}function EN(s,r){return s.reduce((e,t)=>{const a=e[t];return(!a||Object.keys(a).length===0)&&delete e[t],e},r)}function Gie(s,...r){const e=LM(s),t=[e,...r].reduce((a,o)=>_o(a,o),{});return EN(Object.keys(e),t)}function Kie(s,r){if(typeof s!="object")return{};const e={},t=Object.keys(r);return Array.isArray(s)?t.forEach((a,o)=>{o<s.length&&(e[a]=!0)}):t.forEach(a=>{s[a]!=null&&(e[a]=!0)}),e}function UC({values:s,breakpoints:r,base:e}){const t=e||Kie(s,r),a=Object.keys(t);if(a.length===0)return s;let o;return a.reduce((i,l,c)=>(Array.isArray(s)?(i[l]=s[c]!=null?s[c]:s[o],o=c):typeof s=="object"?(i[l]=s[l]!=null?s[l]:s[o],o=l):i[l]=s,i),{})}function mr(s){if(typeof s!="string")throw new Error(tu(7));return s.charAt(0).toUpperCase()+s.slice(1)}function Gc(s,r,e=!0){if(!r||typeof r!="string")return null;if(s&&s.vars&&e){const t=`vars.${r}`.split(".").reduce((a,o)=>a&&a[o]?a[o]:null,s);if(t!=null)return t}return r.split(".").reduce((t,a)=>t&&t[a]!=null?t[a]:null,s)}function ww(s,r,e,t=e){let a;return typeof s=="function"?a=s(e):Array.isArray(s)?a=s[e]||t:a=Gc(s,e)||t,r&&(a=r(a,t,s)),a}function Za(s){const{prop:r,cssProperty:e=s.prop,themeKey:t,transform:a}=s,o=i=>{if(i[r]==null)return null;const l=i[r],c=i.theme,d=Gc(c,t)||{};return dc(i,l,h=>{let g=ww(d,a,h);return h===g&&typeof h=="string"&&(g=ww(d,a,`${r}${h==="default"?"":mr(h)}`,h)),e===!1?g:{[e]:g}})};return o.propTypes={},o.filterProps=[r],o}function Yie(s){const r={};return e=>(r[e]===void 0&&(r[e]=s(e)),r[e])}const Zie={m:"margin",p:"padding"},Xie={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},f4={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Qie=Yie(s=>{if(s.length>2)if(f4[s])s=f4[s];else return[s];const[r,e]=s.split(""),t=Zie[r],a=Xie[e]||"";return Array.isArray(a)?a.map(o=>t+o):[t+a]}),hk=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],mk=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...hk,...mk];function Dx(s,r,e,t){const a=Gc(s,r,!0)??e;return typeof a=="number"||typeof a=="string"?o=>typeof o=="string"?o:typeof a=="string"?a.startsWith("var(")&&o===0?0:a.startsWith("var(")&&o===1?a:`calc(${o} * ${a})`:a*o:Array.isArray(a)?o=>{if(typeof o=="string")return o;const i=Math.abs(o),l=a[i];return o>=0?l:typeof l=="number"?-l:typeof l=="string"&&l.startsWith("var(")?`calc(-1 * ${l})`:`-${l}`}:typeof a=="function"?a:()=>{}}function gj(s){return Dx(s,"spacing",8)}function Mp(s,r){return typeof r=="string"||r==null?r:s(r)}function Jie(s,r){return e=>s.reduce((t,a)=>(t[a]=Mp(r,e),t),{})}function ele(s,r,e,t){if(!r.includes(e))return null;const a=Qie(e),o=Jie(a,t),i=s[e];return dc(s,i,o)}function FM(s,r){const e=gj(s.theme);return Object.keys(s).map(t=>ele(s,r,t,e)).reduce($y,{})}function za(s){return FM(s,hk)}za.propTypes={};za.filterProps=hk;function $a(s){return FM(s,mk)}$a.propTypes={};$a.filterProps=mk;function BM(s=8,r=gj({spacing:s})){if(s.mui)return s;const e=(...t)=>(t.length===0?[1]:t).map(o=>{const i=r(o);return typeof i=="number"?`${i}px`:i}).join(" ");return e.mui=!0,e}function yj(...s){const r=s.reduce((t,a)=>(a.filterProps.forEach(o=>{t[o]=a}),t),{}),e=t=>Object.keys(t).reduce((a,o)=>r[o]?$y(a,r[o](t)):a,{});return e.propTypes={},e.filterProps=s.reduce((t,a)=>t.concat(a.filterProps),[]),e}function bl(s){return typeof s!="number"?s:`${s}px solid`}function Pl(s,r){return Za({prop:s,themeKey:"borders",transform:r})}const tle=Pl("border",bl),rle=Pl("borderTop",bl),nle=Pl("borderRight",bl),sle=Pl("borderBottom",bl),ale=Pl("borderLeft",bl),ole=Pl("borderColor"),ile=Pl("borderTopColor"),lle=Pl("borderRightColor"),cle=Pl("borderBottomColor"),dle=Pl("borderLeftColor"),ule=Pl("outline",bl),fle=Pl("outlineColor"),xj=s=>{if(s.borderRadius!==void 0&&s.borderRadius!==null){const r=Dx(s.theme,"shape.borderRadius",4),e=t=>({borderRadius:Mp(r,t)});return dc(s,s.borderRadius,e)}return null};xj.propTypes={};xj.filterProps=["borderRadius"];yj(tle,rle,nle,sle,ale,ole,ile,lle,cle,dle,xj,ule,fle);const vj=s=>{if(s.gap!==void 0&&s.gap!==null){const r=Dx(s.theme,"spacing",8),e=t=>({gap:Mp(r,t)});return dc(s,s.gap,e)}return null};vj.propTypes={};vj.filterProps=["gap"];const bj=s=>{if(s.columnGap!==void 0&&s.columnGap!==null){const r=Dx(s.theme,"spacing",8),e=t=>({columnGap:Mp(r,t)});return dc(s,s.columnGap,e)}return null};bj.propTypes={};bj.filterProps=["columnGap"];const wj=s=>{if(s.rowGap!==void 0&&s.rowGap!==null){const r=Dx(s.theme,"spacing",8),e=t=>({rowGap:Mp(r,t)});return dc(s,s.rowGap,e)}return null};wj.propTypes={};wj.filterProps=["rowGap"];const ple=Za({prop:"gridColumn"}),hle=Za({prop:"gridRow"}),mle=Za({prop:"gridAutoFlow"}),gle=Za({prop:"gridAutoColumns"}),yle=Za({prop:"gridAutoRows"}),xle=Za({prop:"gridTemplateColumns"}),vle=Za({prop:"gridTemplateRows"}),ble=Za({prop:"gridTemplateAreas"}),wle=Za({prop:"gridArea"});yj(vj,bj,wj,ple,hle,mle,gle,yle,xle,vle,ble,wle);function hm(s,r){return r==="grey"?r:s}const jle=Za({prop:"color",themeKey:"palette",transform:hm}),Cle=Za({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:hm}),Sle=Za({prop:"backgroundColor",themeKey:"palette",transform:hm});yj(jle,Cle,Sle);function Qi(s){return s<=1&&s!==0?`${s*100}%`:s}const Nle=Za({prop:"width",transform:Qi}),gk=s=>{if(s.maxWidth!==void 0&&s.maxWidth!==null){const r=e=>{const t=s.theme?.breakpoints?.values?.[e]||mj[e];return t?s.theme?.breakpoints?.unit!=="px"?{maxWidth:`${t}${s.theme.breakpoints.unit}`}:{maxWidth:t}:{maxWidth:Qi(e)}};return dc(s,s.maxWidth,r)}return null};gk.filterProps=["maxWidth"];const kle=Za({prop:"minWidth",transform:Qi}),_le=Za({prop:"height",transform:Qi}),Ele=Za({prop:"maxHeight",transform:Qi}),Tle=Za({prop:"minHeight",transform:Qi});Za({prop:"size",cssProperty:"width",transform:Qi});Za({prop:"size",cssProperty:"height",transform:Qi});const Ole=Za({prop:"boxSizing"});yj(Nle,gk,kle,_le,Ele,Tle,Ole);const Lx={border:{themeKey:"borders",transform:bl},borderTop:{themeKey:"borders",transform:bl},borderRight:{themeKey:"borders",transform:bl},borderBottom:{themeKey:"borders",transform:bl},borderLeft:{themeKey:"borders",transform:bl},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:bl},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:xj},color:{themeKey:"palette",transform:hm},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:hm},backgroundColor:{themeKey:"palette",transform:hm},p:{style:$a},pt:{style:$a},pr:{style:$a},pb:{style:$a},pl:{style:$a},px:{style:$a},py:{style:$a},padding:{style:$a},paddingTop:{style:$a},paddingRight:{style:$a},paddingBottom:{style:$a},paddingLeft:{style:$a},paddingX:{style:$a},paddingY:{style:$a},paddingInline:{style:$a},paddingInlineStart:{style:$a},paddingInlineEnd:{style:$a},paddingBlock:{style:$a},paddingBlockStart:{style:$a},paddingBlockEnd:{style:$a},m:{style:za},mt:{style:za},mr:{style:za},mb:{style:za},ml:{style:za},mx:{style:za},my:{style:za},margin:{style:za},marginTop:{style:za},marginRight:{style:za},marginBottom:{style:za},marginLeft:{style:za},marginX:{style:za},marginY:{style:za},marginInline:{style:za},marginInlineStart:{style:za},marginInlineEnd:{style:za},marginBlock:{style:za},marginBlockStart:{style:za},marginBlockEnd:{style:za},displayPrint:{cssProperty:!1,transform:s=>({"@media print":{display:s}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:vj},rowGap:{style:wj},columnGap:{style:bj},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Qi},maxWidth:{style:gk},minWidth:{transform:Qi},height:{transform:Qi},maxHeight:{transform:Qi},minHeight:{transform:Qi},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function Ple(...s){const r=s.reduce((t,a)=>t.concat(Object.keys(a)),[]),e=new Set(r);return s.every(t=>e.size===Object.keys(t).length)}function Ale(s,r){return typeof s=="function"?s(r):s}function Mle(){function s(e,t,a,o){const i={[e]:t,theme:a},l=o[e];if(!l)return{[e]:t};const{cssProperty:c=e,themeKey:d,transform:p,style:h}=l;if(t==null)return null;if(d==="typography"&&t==="inherit")return{[e]:t};const g=Gc(a,d)||{};return h?h(i):dc(i,t,b=>{let v=ww(g,p,b);return b===v&&typeof b=="string"&&(v=ww(g,p,`${e}${b==="default"?"":mr(b)}`,b)),c===!1?v:{[c]:v}})}function r(e){const{sx:t,theme:a={},nested:o}=e||{};if(!t)return null;const i=a.unstable_sxConfig??Lx;function l(c){let d=c;if(typeof c=="function")d=c(a);else if(typeof c!="object")return c;if(!d)return null;const p=LM(a.breakpoints),h=Object.keys(p);let g=p;return Object.keys(d).forEach(y=>{const b=Ale(d[y],a);if(b!=null)if(typeof b=="object")if(i[y])g=$y(g,s(y,b,a,i));else{const v=dc({theme:a},b,w=>({[y]:w}));Ple(v,b)?g[y]=r({sx:b,theme:a,nested:!0}):g=$y(g,v)}else g=$y(g,s(y,b,a,i))}),!o&&a.modularCssLayers?{"@layer sx":d4(a,EN(h,g))}:d4(a,EN(h,g))}return Array.isArray(t)?t.map(l):l(t)}return r}const Ip=Mle();Ip.filterProps=["sx"];function Ile(s,r){const e=this;if(e.vars){if(!e.colorSchemes?.[s]||typeof e.getColorSchemeSelector!="function")return{};let t=e.getColorSchemeSelector(s);return t==="&"?r:((t.includes("data-")||t.includes("."))&&(t=`*:where(${t.replace(/\s*&$/,"")}) &`),{[t]:r})}return e.palette.mode===s?r:{}}function jj(s={},...r){const{breakpoints:e={},palette:t={},spacing:a,shape:o={},...i}=s,l=$ie(e),c=BM(a);let d=_o({breakpoints:l,direction:"ltr",components:{},palette:{mode:"light",...t},spacing:c,shape:{...Wie,...o}},i);return d=Hie(d),d.applyStyles=Ile,d=r.reduce((p,h)=>_o(p,h),d),d.unstable_sxConfig={...Lx,...i?.unstable_sxConfig},d.unstable_sx=function(h){return Ip({sx:h,theme:this})},d}function Rle(s){return Object.keys(s).length===0}function Dle(s=null){const r=u.useContext(hj);return!r||Rle(r)?s:r}const Lle=jj();function Cj(s=Lle){return Dle(s)}function VC(s){const r=ef(s);return s!==r&&r.styles?(r.styles.match(/^@layer\s+[^{]*$/)||(r.styles=`@layer global{${r.styles}}`),r):s}function Fle({styles:s,themeId:r,defaultTheme:e={}}){const t=Cj(e),a=r&&t[r]||t;let o=typeof s=="function"?s(a):s;return a.modularCssLayers&&(Array.isArray(o)?o=o.map(i=>VC(typeof i=="function"?i(a):i)):o=VC(o)),n.jsx(Die,{styles:o})}const Ble=s=>{const r={systemProps:{},otherProps:{}},e=s?.theme?.unstable_sxConfig??Lx;return Object.keys(s).forEach(t=>{e[t]?r.systemProps[t]=s[t]:r.otherProps[t]=s[t]}),r};function yk(s){const{sx:r,...e}=s,{systemProps:t,otherProps:a}=Ble(e);let o;return Array.isArray(r)?o=[t,...r]:typeof r=="function"?o=(...i)=>{const l=r(...i);return Kc(l)?{...t,...l}:t}:o={...t,...r},{...a,sx:o}}const p4=s=>s,zle=()=>{let s=p4;return{configure(r){s=r},generate(r){return s(r)},reset(){s=p4}}},zM=zle();function $M(s){var r,e,t="";if(typeof s=="string"||typeof s=="number")t+=s;else if(typeof s=="object")if(Array.isArray(s)){var a=s.length;for(r=0;r<a;r++)s[r]&&(e=$M(s[r]))&&(t&&(t+=" "),t+=e)}else for(e in s)s[e]&&(t&&(t+=" "),t+=e);return t}function Hr(){for(var s,r,e=0,t="",a=arguments.length;e<a;e++)(s=arguments[e])&&(r=$M(s))&&(t&&(t+=" "),t+=r);return t}function $le(s={}){const{themeId:r,defaultTheme:e,defaultClassName:t="MuiBox-root",generateClassName:a}=s,o=IM("div",{shouldForwardProp:l=>l!=="theme"&&l!=="sx"&&l!=="as"})(Ip);return u.forwardRef(function(c,d){const p=Cj(e),{className:h,component:g="div",...y}=yk(c);return n.jsx(o,{as:g,ref:d,className:Hr(h,a?a(t):t),theme:r&&p[r]||p,...y})})}const Ule={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function yn(s,r,e="Mui"){const t=Ule[r];return t?`${e}-${t}`:`${zM.generate(s)}-${r}`}function xn(s,r,e="Mui"){const t={};return r.forEach(a=>{t[a]=yn(s,a,e)}),t}function UM(s){const{variants:r,...e}=s,t={variants:r,style:ef(e),isProcessed:!0};return t.style===e||r&&r.forEach(a=>{typeof a.style!="function"&&(a.style=ef(a.style))}),t}const Vle=jj();function HC(s){return s!=="ownerState"&&s!=="theme"&&s!=="sx"&&s!=="as"}function yp(s,r){return r&&s&&typeof s=="object"&&s.styles&&!s.styles.startsWith("@layer")&&(s.styles=`@layer ${r}{${String(s.styles)}}`),s}function Hle(s){return s?(r,e)=>e[s]:null}function Wle(s,r,e){s.theme=Gle(s.theme)?e:s.theme[r]||s.theme}function Xv(s,r,e){const t=typeof r=="function"?r(s):r;if(Array.isArray(t))return t.flatMap(a=>Xv(s,a,e));if(Array.isArray(t?.variants)){let a;if(t.isProcessed)a=e?yp(t.style,e):t.style;else{const{variants:o,...i}=t;a=e?yp(ef(i),e):i}return VM(s,t.variants,[a],e)}return t?.isProcessed?e?yp(ef(t.style),e):t.style:e?yp(ef(t),e):t}function VM(s,r,e=[],t=void 0){let a;e:for(let o=0;o<r.length;o+=1){const i=r[o];if(typeof i.props=="function"){if(a??={...s,...s.ownerState,ownerState:s.ownerState},!i.props(a))continue}else for(const l in i.props)if(s[l]!==i.props[l]&&s.ownerState?.[l]!==i.props[l])continue e;typeof i.style=="function"?(a??={...s,...s.ownerState,ownerState:s.ownerState},e.push(t?yp(ef(i.style(a)),t):i.style(a))):e.push(t?yp(ef(i.style),t):i.style)}return e}function HM(s={}){const{themeId:r,defaultTheme:e=Vle,rootShouldForwardProp:t=HC,slotShouldForwardProp:a=HC}=s;function o(l){Wle(l,r,e)}return(l,c={})=>{Lie(l,L=>L.filter(B=>B!==Ip));const{name:d,slot:p,skipVariantsResolver:h,skipSx:g,overridesResolver:y=Hle(Yle(p)),...b}=c,v=d&&d.startsWith("Mui")||p?"components":"custom",w=h!==void 0?h:p&&p!=="Root"&&p!=="root"||!1,C=g||!1;let k=HC;p==="Root"||p==="root"?k=t:p?k=a:Kle(l)&&(k=void 0);const N=IM(l,{shouldForwardProp:k,label:qle(),...b}),O=L=>{if(L.__emotion_real===L)return L;if(typeof L=="function")return function(G){return Xv(G,L,G.theme.modularCssLayers?v:void 0)};if(Kc(L)){const B=UM(L);return function($){return B.variants?Xv($,B,$.theme.modularCssLayers?v:void 0):$.theme.modularCssLayers?yp(B.style,v):B.style}}return L},R=(...L)=>{const B=[],G=L.map(O),$=[];if(B.push(o),d&&y&&$.push(function(q){const H=q.theme.components?.[d]?.styleOverrides;if(!H)return null;const D={};for(const X in H)D[X]=Xv(q,H[X],q.theme.modularCssLayers?"theme":void 0);return y(q,D)}),d&&!w&&$.push(function(q){const H=q.theme?.components?.[d]?.variants;return H?VM(q,H,[],q.theme.modularCssLayers?"theme":void 0):null}),C||$.push(Ip),Array.isArray(G[0])){const M=G.shift(),q=new Array(B.length).fill(""),P=new Array($.length).fill("");let H;H=[...q,...M,...P],H.raw=[...q,...M.raw,...P],B.unshift(H)}const z=[...B,...G,...$],Y=N(...z);return l.muiName&&(Y.muiName=l.muiName),Y};return N.withConfig&&(R.withConfig=N.withConfig),R}}function qle(s,r){return void 0}function Gle(s){for(const r in s)return!1;return!0}function Kle(s){return typeof s=="string"&&s.charCodeAt(0)>96}function Yle(s){return s&&s.charAt(0).toLowerCase()+s.slice(1)}const Zle=HM();function ax(s,r,e=!1){const t={...r};for(const a in s)if(Object.prototype.hasOwnProperty.call(s,a)){const o=a;if(o==="components"||o==="slots")t[o]={...s[o],...t[o]};else if(o==="componentsProps"||o==="slotProps"){const i=s[o],l=r[o];if(!l)t[o]=i||{};else if(!i)t[o]=l;else{t[o]={...l};for(const c in i)if(Object.prototype.hasOwnProperty.call(i,c)){const d=c;t[o][d]=ax(i[d],l[d],e)}}}else o==="className"&&e&&r.className?t.className=Hr(s?.className,r?.className):o==="style"&&e&&r.style?t.style={...s?.style,...r?.style}:t[o]===void 0&&(t[o]=s[o])}return t}function Xle(s){const{theme:r,name:e,props:t}=s;return!r||!r.components||!r.components[e]||!r.components[e].defaultProps?t:ax(r.components[e].defaultProps,t)}function Qle({props:s,name:r,defaultTheme:e,themeId:t}){let a=Cj(e);return t&&(a=a[t]||a),Xle({theme:a,name:r,props:s})}const ru=typeof window<"u"?u.useLayoutEffect:u.useEffect;function Jle(s,r=Number.MIN_SAFE_INTEGER,e=Number.MAX_SAFE_INTEGER){return Math.max(r,Math.min(s,e))}function xk(s,r=0,e=1){return Jle(s,r,e)}function ece(s){s=s.slice(1);const r=new RegExp(`.{1,${s.length>=6?2:1}}`,"g");let e=s.match(r);return e&&e[0].length===1&&(e=e.map(t=>t+t)),e?`rgb${e.length===4?"a":""}(${e.map((t,a)=>a<3?parseInt(t,16):Math.round(parseInt(t,16)/255*1e3)/1e3).join(", ")})`:""}function lf(s){if(s.type)return s;if(s.charAt(0)==="#")return lf(ece(s));const r=s.indexOf("("),e=s.substring(0,r);if(!["rgb","rgba","hsl","hsla","color"].includes(e))throw new Error(tu(9,s));let t=s.substring(r+1,s.length-1),a;if(e==="color"){if(t=t.split(" "),a=t.shift(),t.length===4&&t[3].charAt(0)==="/"&&(t[3]=t[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(a))throw new Error(tu(10,a))}else t=t.split(",");return t=t.map(o=>parseFloat(o)),{type:e,values:t,colorSpace:a}}const tce=s=>{const r=lf(s);return r.values.slice(0,3).map((e,t)=>r.type.includes("hsl")&&t!==0?`${e}%`:e).join(" ")},wy=(s,r)=>{try{return tce(s)}catch{return s}};function Sj(s){const{type:r,colorSpace:e}=s;let{values:t}=s;return r.includes("rgb")?t=t.map((a,o)=>o<3?parseInt(a,10):a):r.includes("hsl")&&(t[1]=`${t[1]}%`,t[2]=`${t[2]}%`),r.includes("color")?t=`${e} ${t.join(" ")}`:t=`${t.join(", ")}`,`${r}(${t})`}function WM(s){s=lf(s);const{values:r}=s,e=r[0],t=r[1]/100,a=r[2]/100,o=t*Math.min(a,1-a),i=(d,p=(d+e/30)%12)=>a-o*Math.max(Math.min(p-3,9-p,1),-1);let l="rgb";const c=[Math.round(i(0)*255),Math.round(i(8)*255),Math.round(i(4)*255)];return s.type==="hsla"&&(l+="a",c.push(r[3])),Sj({type:l,values:c})}function TN(s){s=lf(s);let r=s.type==="hsl"||s.type==="hsla"?lf(WM(s)).values:s.values;return r=r.map(e=>(s.type!=="color"&&(e/=255),e<=.03928?e/12.92:((e+.055)/1.055)**2.4)),Number((.2126*r[0]+.7152*r[1]+.0722*r[2]).toFixed(3))}function rce(s,r){const e=TN(s),t=TN(r);return(Math.max(e,t)+.05)/(Math.min(e,t)+.05)}function ox(s,r){return s=lf(s),r=xk(r),(s.type==="rgb"||s.type==="hsl")&&(s.type+="a"),s.type==="color"?s.values[3]=`/${r}`:s.values[3]=r,Sj(s)}function Jf(s,r,e){try{return ox(s,r)}catch{return s}}function Nj(s,r){if(s=lf(s),r=xk(r),s.type.includes("hsl"))s.values[2]*=1-r;else if(s.type.includes("rgb")||s.type.includes("color"))for(let e=0;e<3;e+=1)s.values[e]*=1-r;return Sj(s)}function Ws(s,r,e){try{return Nj(s,r)}catch{return s}}function kj(s,r){if(s=lf(s),r=xk(r),s.type.includes("hsl"))s.values[2]+=(100-s.values[2])*r;else if(s.type.includes("rgb"))for(let e=0;e<3;e+=1)s.values[e]+=(255-s.values[e])*r;else if(s.type.includes("color"))for(let e=0;e<3;e+=1)s.values[e]+=(1-s.values[e])*r;return Sj(s)}function qs(s,r,e){try{return kj(s,r)}catch{return s}}function ON(s,r=.15){return TN(s)>.5?Nj(s,r):kj(s,r)}function xv(s,r,e){try{return ON(s,r)}catch{return s}}const nce=u.createContext(),sce=()=>u.useContext(nce)??!1,ace=u.createContext(void 0);function oce(s){const{theme:r,name:e,props:t}=s;if(!r||!r.components||!r.components[e])return t;const a=r.components[e];return a.defaultProps?ax(a.defaultProps,t,r.components.mergeClassNameAndStyle):!a.styleOverrides&&!a.variants?ax(a,t,r.components.mergeClassNameAndStyle):t}function ice({props:s,name:r}){const e=u.useContext(ace);return oce({props:s,name:r,theme:{components:e}})}let h4=0;function lce(s){const[r,e]=u.useState(s),t=s||r;return u.useEffect(()=>{r==null&&(h4+=1,e(`mui-${h4}`))},[r]),t}const cce={...vS},m4=cce.useId;function Fm(s){if(m4!==void 0){const r=m4();return s??r}return lce(s)}const g4={theme:void 0};function dce(s){let r,e;return function(a){let o=r;return(o===void 0||a.theme!==e)&&(g4.theme=a.theme,o=UM(s(g4)),r=o,e=a.theme),o}}function uce(s=""){function r(...t){if(!t.length)return"";const a=t[0];return typeof a=="string"&&!a.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${s?`${s}-`:""}${a}${r(...t.slice(1))})`:`, ${a}`}return(t,...a)=>`var(--${s?`${s}-`:""}${t}${r(...a)})`}const y4=(s,r,e,t=[])=>{let a=s;r.forEach((o,i)=>{i===r.length-1?Array.isArray(a)?a[Number(o)]=e:a&&typeof a=="object"&&(a[o]=e):a&&typeof a=="object"&&(a[o]||(a[o]=t.includes(o)?[]:{}),a=a[o])})},fce=(s,r,e)=>{function t(a,o=[],i=[]){Object.entries(a).forEach(([l,c])=>{(!e||e&&!e([...o,l]))&&c!=null&&(typeof c=="object"&&Object.keys(c).length>0?t(c,[...o,l],Array.isArray(c)?[...i,l]:i):r([...o,l],c,i))})}t(s)},pce=(s,r)=>typeof r=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(t=>s.includes(t))||s[s.length-1].toLowerCase().includes("opacity")?r:`${r}px`:r;function WC(s,r){const{prefix:e,shouldSkipGeneratingVar:t}=r||{},a={},o={},i={};return fce(s,(l,c,d)=>{if((typeof c=="string"||typeof c=="number")&&(!t||!t(l,c))){const p=`--${e?`${e}-`:""}${l.join("-")}`,h=pce(l,c);Object.assign(a,{[p]:h}),y4(o,l,`var(${p})`,d),y4(i,l,`var(${p}, ${h})`,d)}},l=>l[0]==="vars"),{css:a,vars:o,varsWithDefaults:i}}function hce(s,r={}){const{getSelector:e=C,disableCssColorScheme:t,colorSchemeSelector:a,enableContrastVars:o}=r,{colorSchemes:i={},components:l,defaultColorScheme:c="light",...d}=s,{vars:p,css:h,varsWithDefaults:g}=WC(d,r);let y=g;const b={},{[c]:v,...w}=i;if(Object.entries(w||{}).forEach(([O,R])=>{const{vars:L,css:B,varsWithDefaults:G}=WC(R,r);y=_o(y,G),b[O]={css:B,vars:L}}),v){const{css:O,vars:R,varsWithDefaults:L}=WC(v,r);y=_o(y,L),b[c]={css:O,vars:R}}function C(O,R){let L=a;if(a==="class"&&(L=".%s"),a==="data"&&(L="[data-%s]"),a?.startsWith("data-")&&!a.includes("%s")&&(L=`[${a}="%s"]`),O){if(L==="media")return s.defaultColorScheme===O?":root":{[`@media (prefers-color-scheme: ${i[O]?.palette?.mode||O})`]:{":root":R}};if(L)return s.defaultColorScheme===O?`:root, ${L.replace("%s",String(O))}`:L.replace("%s",String(O))}return":root"}return{vars:y,generateThemeVars:()=>{let O={...p};return Object.entries(b).forEach(([,{vars:R}])=>{O=_o(O,R)}),O},generateStyleSheets:()=>{const O=[],R=s.defaultColorScheme||"light";function L($,z){Object.keys(z).length&&O.push(typeof $=="string"?{[$]:{...z}}:$)}L(e(void 0,{...h}),h);const{[R]:B,...G}=b;if(B){const{css:$}=B,z=i[R]?.palette?.mode,Y=!t&&z?{colorScheme:z,...$}:{...$};L(e(R,{...Y}),Y)}return Object.entries(G).forEach(([$,{css:z}])=>{const Y=i[$]?.palette?.mode,M=!t&&Y?{colorScheme:Y,...z}:{...z};L(e($,{...M}),M)}),o&&O.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),O}}}function mce(s){return function(e){return s==="media"?`@media (prefers-color-scheme: ${e})`:s?s.startsWith("data-")&&!s.includes("%s")?`[${s}="${e}"] &`:s==="class"?`.${e} &`:s==="data"?`[data-${e}] &`:`${s.replace("%s",e)} &`:"&"}}function vn(s,r,e=void 0){const t={};for(const a in s){const o=s[a];let i="",l=!0;for(let c=0;c<o.length;c+=1){const d=o[c];d&&(i+=(l===!0?"":" ")+r(d),l=!1,e&&e[d]&&(i+=" "+e[d]))}t[a]=i}return t}function Qv(s,r){return u.isValidElement(s)&&r.indexOf(s.type.muiName??s.type?._payload?.value?.muiName)!==-1}const gce=jj(),yce=Zle("div",{name:"MuiStack",slot:"Root"});function xce(s){return Qle({props:s,name:"MuiStack",defaultTheme:gce})}function vce(s,r){const e=u.Children.toArray(s).filter(Boolean);return e.reduce((t,a,o)=>(t.push(a),o<e.length-1&&t.push(u.cloneElement(r,{key:`separator-${o}`})),t),[])}const bce=s=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[s],wce=({ownerState:s,theme:r})=>{let e={display:"flex",flexDirection:"column",...dc({theme:r},UC({values:s.direction,breakpoints:r.breakpoints.values}),t=>({flexDirection:t}))};if(s.spacing){const t=gj(r),a=Object.keys(r.breakpoints.values).reduce((c,d)=>((typeof s.spacing=="object"&&s.spacing[d]!=null||typeof s.direction=="object"&&s.direction[d]!=null)&&(c[d]=!0),c),{}),o=UC({values:s.direction,base:a}),i=UC({values:s.spacing,base:a});typeof o=="object"&&Object.keys(o).forEach((c,d,p)=>{if(!o[c]){const g=d>0?o[p[d-1]]:"column";o[c]=g}}),e=_o(e,dc({theme:r},i,(c,d)=>s.useFlexGap?{gap:Mp(t,c)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${bce(d?o[d]:s.direction)}`]:Mp(t,c)}}))}return e=Gie(r.breakpoints,e),e};function jce(s={}){const{createStyledComponent:r=yce,useThemeProps:e=xce,componentName:t="MuiStack"}=s,a=()=>vn({root:["root"]},c=>yn(t,c),{}),o=r(wce);return u.forwardRef(function(c,d){const p=e(c),h=yk(p),{component:g="div",direction:y="column",spacing:b=0,divider:v,children:w,className:C,useFlexGap:k=!1,...N}=h,O={direction:y,spacing:b,useFlexGap:k},R=a();return n.jsx(o,{as:g,ownerState:O,ref:d,className:Hr(R.root,C),...N,children:v?vce(w,v):w})})}function qM(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:tx.white,default:tx.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const GM=qM();function KM(){return{text:{primary:tx.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:tx.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const PN=KM();function x4(s,r,e,t){const a=t.light||t,o=t.dark||t*1.5;s[r]||(s.hasOwnProperty(e)?s[r]=s[e]:r==="light"?s.light=kj(s.main,a):r==="dark"&&(s.dark=Nj(s.main,o)))}function v4(s,r,e,t,a){const o=a.light||a,i=a.dark||a*1.5;r[e]||(r.hasOwnProperty(t)?r[e]=r[t]:e==="light"?r.light=`color-mix(in ${s}, ${r.main}, #fff ${(o*100).toFixed(0)}%)`:e==="dark"&&(r.dark=`color-mix(in ${s}, ${r.main}, #000 ${(i*100).toFixed(0)}%)`))}function Cce(s="light"){return s==="dark"?{main:Oh[200],light:Oh[50],dark:Oh[400]}:{main:Oh[700],light:Oh[400],dark:Oh[800]}}function Sce(s="light"){return s==="dark"?{main:Th[200],light:Th[50],dark:Th[400]}:{main:Th[500],light:Th[300],dark:Th[700]}}function Nce(s="light"){return s==="dark"?{main:Eh[500],light:Eh[300],dark:Eh[700]}:{main:Eh[700],light:Eh[400],dark:Eh[800]}}function kce(s="light"){return s==="dark"?{main:Ph[400],light:Ph[300],dark:Ph[700]}:{main:Ph[700],light:Ph[500],dark:Ph[900]}}function _ce(s="light"){return s==="dark"?{main:Ah[400],light:Ah[300],dark:Ah[700]}:{main:Ah[800],light:Ah[500],dark:Ah[900]}}function Ece(s="light"){return s==="dark"?{main:ry[400],light:ry[300],dark:ry[700]}:{main:"#ed6c02",light:ry[500],dark:ry[900]}}function Tce(s){return`oklch(from ${s} var(--__l) 0 h / var(--__a))`}function vk(s){const{mode:r="light",contrastThreshold:e=3,tonalOffset:t=.2,colorSpace:a,...o}=s,i=s.primary||Cce(r),l=s.secondary||Sce(r),c=s.error||Nce(r),d=s.info||kce(r),p=s.success||_ce(r),h=s.warning||Ece(r);function g(w){return a?Tce(w):rce(w,PN.text.primary)>=e?PN.text.primary:GM.text.primary}const y=({color:w,name:C,mainShade:k=500,lightShade:N=300,darkShade:O=700})=>{if(w={...w},!w.main&&w[k]&&(w.main=w[k]),!w.hasOwnProperty("main"))throw new Error(tu(11,C?` (${C})`:"",k));if(typeof w.main!="string")throw new Error(tu(12,C?` (${C})`:"",JSON.stringify(w.main)));return a?(v4(a,w,"light",N,t),v4(a,w,"dark",O,t)):(x4(w,"light",N,t),x4(w,"dark",O,t)),w.contrastText||(w.contrastText=g(w.main)),w};let b;return r==="light"?b=qM():r==="dark"&&(b=KM()),_o({common:{...tx},mode:r,primary:y({color:i,name:"primary"}),secondary:y({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:y({color:c,name:"error"}),warning:y({color:h,name:"warning"}),info:y({color:d,name:"info"}),success:y({color:p,name:"success"}),grey:Loe,contrastThreshold:e,getContrastText:g,augmentColor:y,tonalOffset:t,...b},o)}function Oce(s){const r={};return Object.entries(s).forEach(t=>{const[a,o]=t;typeof o=="object"&&(r[a]=`${o.fontStyle?`${o.fontStyle} `:""}${o.fontVariant?`${o.fontVariant} `:""}${o.fontWeight?`${o.fontWeight} `:""}${o.fontStretch?`${o.fontStretch} `:""}${o.fontSize||""}${o.lineHeight?`/${o.lineHeight} `:""}${o.fontFamily||""}`)}),r}function Pce(s,r){return{toolbar:{minHeight:56,[s.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[s.up("sm")]:{minHeight:64}},...r}}function Ace(s){return Math.round(s*1e5)/1e5}const b4={textTransform:"uppercase"},w4='"Roboto", "Helvetica", "Arial", sans-serif';function Mce(s,r){const{fontFamily:e=w4,fontSize:t=14,fontWeightLight:a=300,fontWeightRegular:o=400,fontWeightMedium:i=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:d,pxToRem:p,...h}=typeof r=="function"?r(s):r,g=t/14,y=p||(w=>`${w/c*g}rem`),b=(w,C,k,N,O)=>({fontFamily:e,fontWeight:w,fontSize:y(C),lineHeight:k,...e===w4?{letterSpacing:`${Ace(N/C)}em`}:{},...O,...d}),v={h1:b(a,96,1.167,-1.5),h2:b(a,60,1.2,-.5),h3:b(o,48,1.167,0),h4:b(o,34,1.235,.25),h5:b(o,24,1.334,0),h6:b(i,20,1.6,.15),subtitle1:b(o,16,1.75,.15),subtitle2:b(i,14,1.57,.1),body1:b(o,16,1.5,.15),body2:b(o,14,1.43,.15),button:b(i,14,1.75,.4,b4),caption:b(o,12,1.66,.4),overline:b(o,12,2.66,1,b4),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return _o({htmlFontSize:c,pxToRem:y,fontFamily:e,fontSize:t,fontWeightLight:a,fontWeightRegular:o,fontWeightMedium:i,fontWeightBold:l,...v},h,{clone:!1})}const Ice=.2,Rce=.14,Dce=.12;function _a(...s){return[`${s[0]}px ${s[1]}px ${s[2]}px ${s[3]}px rgba(0,0,0,${Ice})`,`${s[4]}px ${s[5]}px ${s[6]}px ${s[7]}px rgba(0,0,0,${Rce})`,`${s[8]}px ${s[9]}px ${s[10]}px ${s[11]}px rgba(0,0,0,${Dce})`].join(",")}const Lce=["none",_a(0,2,1,-1,0,1,1,0,0,1,3,0),_a(0,3,1,-2,0,2,2,0,0,1,5,0),_a(0,3,3,-2,0,3,4,0,0,1,8,0),_a(0,2,4,-1,0,4,5,0,0,1,10,0),_a(0,3,5,-1,0,5,8,0,0,1,14,0),_a(0,3,5,-1,0,6,10,0,0,1,18,0),_a(0,4,5,-2,0,7,10,1,0,2,16,1),_a(0,5,5,-3,0,8,10,1,0,3,14,2),_a(0,5,6,-3,0,9,12,1,0,3,16,2),_a(0,6,6,-3,0,10,14,1,0,4,18,3),_a(0,6,7,-4,0,11,15,1,0,4,20,3),_a(0,7,8,-4,0,12,17,2,0,5,22,4),_a(0,7,8,-4,0,13,19,2,0,5,24,4),_a(0,7,9,-4,0,14,21,2,0,5,26,4),_a(0,8,9,-5,0,15,22,2,0,6,28,5),_a(0,8,10,-5,0,16,24,2,0,6,30,5),_a(0,8,11,-5,0,17,26,2,0,6,32,5),_a(0,9,11,-5,0,18,28,2,0,7,34,6),_a(0,9,12,-6,0,19,29,2,0,7,36,6),_a(0,10,13,-6,0,20,31,3,0,8,38,7),_a(0,10,13,-6,0,21,33,3,0,8,40,7),_a(0,10,14,-6,0,22,35,3,0,8,42,7),_a(0,11,14,-7,0,23,36,3,0,9,44,8),_a(0,11,15,-7,0,24,38,3,0,9,46,8)],Fce={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Bce={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function j4(s){return`${Math.round(s)}ms`}function zce(s){if(!s)return 0;const r=s/36;return Math.min(Math.round((4+15*r**.25+r/5)*10),3e3)}function $ce(s){const r={...Fce,...s.easing},e={...Bce,...s.duration};return{getAutoHeightDuration:zce,create:(a=["all"],o={})=>{const{duration:i=e.standard,easing:l=r.easeInOut,delay:c=0,...d}=o;return(Array.isArray(a)?a:[a]).map(p=>`${p} ${typeof i=="string"?i:j4(i)} ${l} ${typeof c=="string"?c:j4(c)}`).join(",")},...s,easing:r,duration:e}}const Uce={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Vce(s){return Kc(s)||typeof s>"u"||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||Array.isArray(s)}function YM(s={}){const r={...s};function e(t){const a=Object.entries(t);for(let o=0;o<a.length;o++){const[i,l]=a[o];!Vce(l)||i.startsWith("unstable_")?delete t[i]:Kc(l)&&(t[i]={...l},e(t[i]))}}return e(r),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(r,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function C4(s){return typeof s=="number"?`${(s*100).toFixed(0)}%`:`calc((${s}) * 100%)`}const Hce=s=>{if(!Number.isNaN(+s))return+s;const r=s.match(/\d*\.?\d+/g);if(!r)return 0;let e=0;for(let t=0;t<r.length;t+=1)e+=+r[t];return e};function Wce(s){Object.assign(s,{alpha(r,e){const t=this||s;return t.colorSpace?`oklch(from ${r} l c h / ${typeof e=="string"?`calc(${e})`:e})`:t.vars?`rgba(${r.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof e=="string"?`calc(${e})`:e})`:ox(r,Hce(e))},lighten(r,e){const t=this||s;return t.colorSpace?`color-mix(in ${t.colorSpace}, ${r}, #fff ${C4(e)})`:kj(r,e)},darken(r,e){const t=this||s;return t.colorSpace?`color-mix(in ${t.colorSpace}, ${r}, #000 ${C4(e)})`:Nj(r,e)}})}function AN(s={},...r){const{breakpoints:e,mixins:t={},spacing:a,palette:o={},transitions:i={},typography:l={},shape:c,colorSpace:d,...p}=s;if(s.vars&&s.generateThemeVars===void 0)throw new Error(tu(20));const h=vk({...o,colorSpace:d}),g=jj(s);let y=_o(g,{mixins:Pce(g.breakpoints,t),palette:h,shadows:Lce.slice(),typography:Mce(h,l),transitions:$ce(i),zIndex:{...Uce}});return y=_o(y,p),y=r.reduce((b,v)=>_o(b,v),y),y.unstable_sxConfig={...Lx,...p?.unstable_sxConfig},y.unstable_sx=function(v){return Ip({sx:v,theme:this})},y.toRuntimeSource=YM,Wce(y),y}function MN(s){let r;return s<1?r=5.11916*s**2:r=4.5*Math.log(s+1)+2,Math.round(r*10)/1e3}const qce=[...Array(25)].map((s,r)=>{if(r===0)return"none";const e=MN(r);return`linear-gradient(rgba(255 255 255 / ${e}), rgba(255 255 255 / ${e}))`});function ZM(s){return{inputPlaceholder:s==="dark"?.5:.42,inputUnderline:s==="dark"?.7:.42,switchTrackDisabled:s==="dark"?.2:.12,switchTrack:s==="dark"?.3:.38}}function XM(s){return s==="dark"?qce:[]}function Gce(s){const{palette:r={mode:"light"},opacity:e,overlays:t,colorSpace:a,...o}=s,i=vk({...r,colorSpace:a});return{palette:i,opacity:{...ZM(i.mode),...e},overlays:t||XM(i.mode),...o}}function Kce(s){return!!s[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!s[0].match(/sxConfig$/)||s[0]==="palette"&&!!s[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const Yce=s=>[...[...Array(25)].map((r,e)=>`--${s?`${s}-`:""}overlays-${e}`),`--${s?`${s}-`:""}palette-AppBar-darkBg`,`--${s?`${s}-`:""}palette-AppBar-darkColor`],Zce=s=>(r,e)=>{const t=s.rootSelector||":root",a=s.colorSchemeSelector;let o=a;if(a==="class"&&(o=".%s"),a==="data"&&(o="[data-%s]"),a?.startsWith("data-")&&!a.includes("%s")&&(o=`[${a}="%s"]`),s.defaultColorScheme===r){if(r==="dark"){const i={};return Yce(s.cssVarPrefix).forEach(l=>{i[l]=e[l],delete e[l]}),o==="media"?{[t]:e,"@media (prefers-color-scheme: dark)":{[t]:i}}:o?{[o.replace("%s",r)]:i,[`${t}, ${o.replace("%s",r)}`]:e}:{[t]:{...e,...i}}}if(o&&o!=="media")return`${t}, ${o.replace("%s",String(r))}`}else if(r){if(o==="media")return{[`@media (prefers-color-scheme: ${String(r)})`]:{[t]:e}};if(o)return o.replace("%s",String(r))}return t};function Xce(s,r){r.forEach(e=>{s[e]||(s[e]={})})}function sr(s,r,e){!s[r]&&e&&(s[r]=e)}function jy(s){return typeof s!="string"||!s.startsWith("hsl")?s:WM(s)}function Ad(s,r){`${r}Channel`in s||(s[`${r}Channel`]=wy(jy(s[r])))}function Qce(s){return typeof s=="number"?`${s}px`:typeof s=="string"||typeof s=="function"||Array.isArray(s)?s:"8px"}const Lc=s=>{try{return s()}catch{}},Jce=(s="mui")=>uce(s);function qC(s,r,e,t,a){if(!e)return;e=e===!0?{}:e;const o=a==="dark"?"dark":"light";if(!t){r[a]=Gce({...e,palette:{mode:o,...e?.palette},colorSpace:s});return}const{palette:i,...l}=AN({...t,palette:{mode:o,...e?.palette},colorSpace:s});return r[a]={...e,palette:i,opacity:{...ZM(o),...e?.opacity},overlays:e?.overlays||XM(o)},l}function ede(s={},...r){const{colorSchemes:e={light:!0},defaultColorScheme:t,disableCssColorScheme:a=!1,cssVarPrefix:o="mui",nativeColor:i=!1,shouldSkipGeneratingVar:l=Kce,colorSchemeSelector:c=e.light&&e.dark?"media":void 0,rootSelector:d=":root",...p}=s,h=Object.keys(e)[0],g=t||(e.light&&h!=="light"?"light":h),y=Jce(o),{[g]:b,light:v,dark:w,...C}=e,k={...C};let N=b;if((g==="dark"&&!("dark"in e)||g==="light"&&!("light"in e))&&(N=!0),!N)throw new Error(tu(21,g));let O;i&&(O="oklch");const R=qC(O,k,N,p,g);v&&!k.light&&qC(O,k,v,void 0,"light"),w&&!k.dark&&qC(O,k,w,void 0,"dark");let L={defaultColorScheme:g,...R,cssVarPrefix:o,colorSchemeSelector:c,rootSelector:d,getCssVar:y,colorSchemes:k,font:{...Oce(R.typography),...R.font},spacing:Qce(p.spacing)};Object.keys(L.colorSchemes).forEach(Y=>{const M=L.colorSchemes[Y].palette,q=H=>{const D=H.split("-"),X=D[1],se=D[2];return y(H,M[X][se])};M.mode==="light"&&(sr(M.common,"background","#fff"),sr(M.common,"onBackground","#000")),M.mode==="dark"&&(sr(M.common,"background","#000"),sr(M.common,"onBackground","#fff"));function P(H,D,X){if(O){let se;return H===Jf&&(se=`transparent ${((1-X)*100).toFixed(0)}%`),H===Ws&&(se=`#000 ${(X*100).toFixed(0)}%`),H===qs&&(se=`#fff ${(X*100).toFixed(0)}%`),`color-mix(in ${O}, ${D}, ${se})`}return H(D,X)}if(Xce(M,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),M.mode==="light"){sr(M.Alert,"errorColor",P(Ws,M.error.light,.6)),sr(M.Alert,"infoColor",P(Ws,M.info.light,.6)),sr(M.Alert,"successColor",P(Ws,M.success.light,.6)),sr(M.Alert,"warningColor",P(Ws,M.warning.light,.6)),sr(M.Alert,"errorFilledBg",q("palette-error-main")),sr(M.Alert,"infoFilledBg",q("palette-info-main")),sr(M.Alert,"successFilledBg",q("palette-success-main")),sr(M.Alert,"warningFilledBg",q("palette-warning-main")),sr(M.Alert,"errorFilledColor",Lc(()=>M.getContrastText(M.error.main))),sr(M.Alert,"infoFilledColor",Lc(()=>M.getContrastText(M.info.main))),sr(M.Alert,"successFilledColor",Lc(()=>M.getContrastText(M.success.main))),sr(M.Alert,"warningFilledColor",Lc(()=>M.getContrastText(M.warning.main))),sr(M.Alert,"errorStandardBg",P(qs,M.error.light,.9)),sr(M.Alert,"infoStandardBg",P(qs,M.info.light,.9)),sr(M.Alert,"successStandardBg",P(qs,M.success.light,.9)),sr(M.Alert,"warningStandardBg",P(qs,M.warning.light,.9)),sr(M.Alert,"errorIconColor",q("palette-error-main")),sr(M.Alert,"infoIconColor",q("palette-info-main")),sr(M.Alert,"successIconColor",q("palette-success-main")),sr(M.Alert,"warningIconColor",q("palette-warning-main")),sr(M.AppBar,"defaultBg",q("palette-grey-100")),sr(M.Avatar,"defaultBg",q("palette-grey-400")),sr(M.Button,"inheritContainedBg",q("palette-grey-300")),sr(M.Button,"inheritContainedHoverBg",q("palette-grey-A100")),sr(M.Chip,"defaultBorder",q("palette-grey-400")),sr(M.Chip,"defaultAvatarColor",q("palette-grey-700")),sr(M.Chip,"defaultIconColor",q("palette-grey-700")),sr(M.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),sr(M.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),sr(M.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),sr(M.LinearProgress,"primaryBg",P(qs,M.primary.main,.62)),sr(M.LinearProgress,"secondaryBg",P(qs,M.secondary.main,.62)),sr(M.LinearProgress,"errorBg",P(qs,M.error.main,.62)),sr(M.LinearProgress,"infoBg",P(qs,M.info.main,.62)),sr(M.LinearProgress,"successBg",P(qs,M.success.main,.62)),sr(M.LinearProgress,"warningBg",P(qs,M.warning.main,.62)),sr(M.Skeleton,"bg",O?P(Jf,M.text.primary,.11):`rgba(${q("palette-text-primaryChannel")} / 0.11)`),sr(M.Slider,"primaryTrack",P(qs,M.primary.main,.62)),sr(M.Slider,"secondaryTrack",P(qs,M.secondary.main,.62)),sr(M.Slider,"errorTrack",P(qs,M.error.main,.62)),sr(M.Slider,"infoTrack",P(qs,M.info.main,.62)),sr(M.Slider,"successTrack",P(qs,M.success.main,.62)),sr(M.Slider,"warningTrack",P(qs,M.warning.main,.62));const H=O?P(Ws,M.background.default,.6825):xv(M.background.default,.8);sr(M.SnackbarContent,"bg",H),sr(M.SnackbarContent,"color",Lc(()=>O?PN.text.primary:M.getContrastText(H))),sr(M.SpeedDialAction,"fabHoverBg",xv(M.background.paper,.15)),sr(M.StepConnector,"border",q("palette-grey-400")),sr(M.StepContent,"border",q("palette-grey-400")),sr(M.Switch,"defaultColor",q("palette-common-white")),sr(M.Switch,"defaultDisabledColor",q("palette-grey-100")),sr(M.Switch,"primaryDisabledColor",P(qs,M.primary.main,.62)),sr(M.Switch,"secondaryDisabledColor",P(qs,M.secondary.main,.62)),sr(M.Switch,"errorDisabledColor",P(qs,M.error.main,.62)),sr(M.Switch,"infoDisabledColor",P(qs,M.info.main,.62)),sr(M.Switch,"successDisabledColor",P(qs,M.success.main,.62)),sr(M.Switch,"warningDisabledColor",P(qs,M.warning.main,.62)),sr(M.TableCell,"border",P(qs,P(Jf,M.divider,1),.88)),sr(M.Tooltip,"bg",P(Jf,M.grey[700],.92))}if(M.mode==="dark"){sr(M.Alert,"errorColor",P(qs,M.error.light,.6)),sr(M.Alert,"infoColor",P(qs,M.info.light,.6)),sr(M.Alert,"successColor",P(qs,M.success.light,.6)),sr(M.Alert,"warningColor",P(qs,M.warning.light,.6)),sr(M.Alert,"errorFilledBg",q("palette-error-dark")),sr(M.Alert,"infoFilledBg",q("palette-info-dark")),sr(M.Alert,"successFilledBg",q("palette-success-dark")),sr(M.Alert,"warningFilledBg",q("palette-warning-dark")),sr(M.Alert,"errorFilledColor",Lc(()=>M.getContrastText(M.error.dark))),sr(M.Alert,"infoFilledColor",Lc(()=>M.getContrastText(M.info.dark))),sr(M.Alert,"successFilledColor",Lc(()=>M.getContrastText(M.success.dark))),sr(M.Alert,"warningFilledColor",Lc(()=>M.getContrastText(M.warning.dark))),sr(M.Alert,"errorStandardBg",P(Ws,M.error.light,.9)),sr(M.Alert,"infoStandardBg",P(Ws,M.info.light,.9)),sr(M.Alert,"successStandardBg",P(Ws,M.success.light,.9)),sr(M.Alert,"warningStandardBg",P(Ws,M.warning.light,.9)),sr(M.Alert,"errorIconColor",q("palette-error-main")),sr(M.Alert,"infoIconColor",q("palette-info-main")),sr(M.Alert,"successIconColor",q("palette-success-main")),sr(M.Alert,"warningIconColor",q("palette-warning-main")),sr(M.AppBar,"defaultBg",q("palette-grey-900")),sr(M.AppBar,"darkBg",q("palette-background-paper")),sr(M.AppBar,"darkColor",q("palette-text-primary")),sr(M.Avatar,"defaultBg",q("palette-grey-600")),sr(M.Button,"inheritContainedBg",q("palette-grey-800")),sr(M.Button,"inheritContainedHoverBg",q("palette-grey-700")),sr(M.Chip,"defaultBorder",q("palette-grey-700")),sr(M.Chip,"defaultAvatarColor",q("palette-grey-300")),sr(M.Chip,"defaultIconColor",q("palette-grey-300")),sr(M.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),sr(M.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),sr(M.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),sr(M.LinearProgress,"primaryBg",P(Ws,M.primary.main,.5)),sr(M.LinearProgress,"secondaryBg",P(Ws,M.secondary.main,.5)),sr(M.LinearProgress,"errorBg",P(Ws,M.error.main,.5)),sr(M.LinearProgress,"infoBg",P(Ws,M.info.main,.5)),sr(M.LinearProgress,"successBg",P(Ws,M.success.main,.5)),sr(M.LinearProgress,"warningBg",P(Ws,M.warning.main,.5)),sr(M.Skeleton,"bg",O?P(Jf,M.text.primary,.13):`rgba(${q("palette-text-primaryChannel")} / 0.13)`),sr(M.Slider,"primaryTrack",P(Ws,M.primary.main,.5)),sr(M.Slider,"secondaryTrack",P(Ws,M.secondary.main,.5)),sr(M.Slider,"errorTrack",P(Ws,M.error.main,.5)),sr(M.Slider,"infoTrack",P(Ws,M.info.main,.5)),sr(M.Slider,"successTrack",P(Ws,M.success.main,.5)),sr(M.Slider,"warningTrack",P(Ws,M.warning.main,.5));const H=O?P(qs,M.background.default,.985):xv(M.background.default,.98);sr(M.SnackbarContent,"bg",H),sr(M.SnackbarContent,"color",Lc(()=>O?GM.text.primary:M.getContrastText(H))),sr(M.SpeedDialAction,"fabHoverBg",xv(M.background.paper,.15)),sr(M.StepConnector,"border",q("palette-grey-600")),sr(M.StepContent,"border",q("palette-grey-600")),sr(M.Switch,"defaultColor",q("palette-grey-300")),sr(M.Switch,"defaultDisabledColor",q("palette-grey-600")),sr(M.Switch,"primaryDisabledColor",P(Ws,M.primary.main,.55)),sr(M.Switch,"secondaryDisabledColor",P(Ws,M.secondary.main,.55)),sr(M.Switch,"errorDisabledColor",P(Ws,M.error.main,.55)),sr(M.Switch,"infoDisabledColor",P(Ws,M.info.main,.55)),sr(M.Switch,"successDisabledColor",P(Ws,M.success.main,.55)),sr(M.Switch,"warningDisabledColor",P(Ws,M.warning.main,.55)),sr(M.TableCell,"border",P(Ws,P(Jf,M.divider,1),.68)),sr(M.Tooltip,"bg",P(Jf,M.grey[700],.92))}Ad(M.background,"default"),Ad(M.background,"paper"),Ad(M.common,"background"),Ad(M.common,"onBackground"),Ad(M,"divider"),Object.keys(M).forEach(H=>{const D=M[H];H!=="tonalOffset"&&D&&typeof D=="object"&&(D.main&&sr(M[H],"mainChannel",wy(jy(D.main))),D.light&&sr(M[H],"lightChannel",wy(jy(D.light))),D.dark&&sr(M[H],"darkChannel",wy(jy(D.dark))),D.contrastText&&sr(M[H],"contrastTextChannel",wy(jy(D.contrastText))),H==="text"&&(Ad(M[H],"primary"),Ad(M[H],"secondary")),H==="action"&&(D.active&&Ad(M[H],"active"),D.selected&&Ad(M[H],"selected")))})}),L=r.reduce((Y,M)=>_o(Y,M),L);const B={prefix:o,disableCssColorScheme:a,shouldSkipGeneratingVar:l,getSelector:Zce(L),enableContrastVars:i},{vars:G,generateThemeVars:$,generateStyleSheets:z}=hce(L,B);return L.vars=G,Object.entries(L.colorSchemes[L.defaultColorScheme]).forEach(([Y,M])=>{L[Y]=M}),L.generateThemeVars=$,L.generateStyleSheets=z,L.generateSpacing=function(){return BM(p.spacing,gj(this))},L.getColorSchemeSelector=mce(c),L.spacing=L.generateSpacing(),L.shouldSkipGeneratingVar=l,L.unstable_sxConfig={...Lx,...p?.unstable_sxConfig},L.unstable_sx=function(M){return Ip({sx:M,theme:this})},L.toRuntimeSource=YM,L}function S4(s,r,e){s.colorSchemes&&e&&(s.colorSchemes[r]={...e!==!0&&e,palette:vk({...e===!0?{}:e.palette,mode:r})})}function QM(s={},...r){const{palette:e,cssVariables:t=!1,colorSchemes:a=e?void 0:{light:!0},defaultColorScheme:o=e?.mode,...i}=s,l=o||"light",c=a?.[l],d={...a,...e?{[l]:{...typeof c!="boolean"&&c,palette:e}}:void 0};if(t===!1){if(!("colorSchemes"in s))return AN(s,...r);let p=e;"palette"in s||d[l]&&(d[l]!==!0?p=d[l].palette:l==="dark"&&(p={mode:"dark"}));const h=AN({...s,palette:p},...r);return h.defaultColorScheme=l,h.colorSchemes=d,h.palette.mode==="light"&&(h.colorSchemes.light={...d.light!==!0&&d.light,palette:h.palette},S4(h,"dark",d.dark)),h.palette.mode==="dark"&&(h.colorSchemes.dark={...d.dark!==!0&&d.dark,palette:h.palette},S4(h,"light",d.light)),h}return!e&&!("light"in d)&&l==="light"&&(d.light=!0),ede({...i,colorSchemes:d,defaultColorScheme:l,...typeof t!="boolean"&&t},...r)}const bk=QM();function Fx(){const s=Cj(bk);return s[dj]||s}function JM(s){return s!=="ownerState"&&s!=="theme"&&s!=="sx"&&s!=="as"}const zo=s=>JM(s)&&s!=="classes",vr=HM({themeId:dj,defaultTheme:bk,rootShouldForwardProp:zo});function IN(...s){return s.reduce((r,e)=>e==null?r:function(...a){r.apply(this,a),e.apply(this,a)},()=>{})}function tde(s){return n.jsx(Fle,{...s,defaultTheme:bk,themeId:dj})}function rde(s){return function(e){return n.jsx(tde,{styles:typeof s=="function"?t=>s({theme:t,...e}):s})}}function nde(){return yk}const Pn=dce;function kn(s){return ice(s)}function sde(s){return yn("MuiSvgIcon",s)}xn("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const ade=s=>{const{color:r,fontSize:e,classes:t}=s,a={root:["root",r!=="inherit"&&`color${mr(r)}`,`fontSize${mr(e)}`]};return vn(a,sde,t)},ode=vr("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[r.root,e.color!=="inherit"&&r[`color${mr(e.color)}`],r[`fontSize${mr(e.fontSize)}`]]}})(Pn(({theme:s})=>({userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:s.transitions?.create?.("fill",{duration:(s.vars??s).transitions?.duration?.shorter}),variants:[{props:r=>!r.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:s.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:s.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:s.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((s.vars??s).palette).filter(([,r])=>r&&r.main).map(([r])=>({props:{color:r},style:{color:(s.vars??s).palette?.[r]?.main}})),{props:{color:"action"},style:{color:(s.vars??s).palette?.action?.active}},{props:{color:"disabled"},style:{color:(s.vars??s).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}))),RN=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiSvgIcon"}),{children:a,className:o,color:i="inherit",component:l="svg",fontSize:c="medium",htmlColor:d,inheritViewBox:p=!1,titleAccess:h,viewBox:g="0 0 24 24",...y}=t,b=u.isValidElement(a)&&a.type==="svg",v={...t,color:i,component:l,fontSize:c,instanceFontSize:r.fontSize,inheritViewBox:p,viewBox:g,hasSvgAsChild:b},w={};p||(w.viewBox=g);const C=ade(v);return n.jsxs(ode,{as:l,className:Hr(C.root,o),focusable:"false",color:d,"aria-hidden":h?void 0:!0,role:h?"img":void 0,ref:e,...w,...y,...b&&a.props,ownerState:v,children:[b?a.props.children:a,h?n.jsx("title",{children:h}):null]})});RN.muiName="SvgIcon";function ws(s,r){function e(t,a){return n.jsx(RN,{"data-testid":void 0,ref:a,...t,children:s})}return e.muiName=RN.muiName,u.memo(u.forwardRef(e))}function eI(s,r=166){let e;function t(...a){const o=()=>{s.apply(this,a)};clearTimeout(e),e=setTimeout(o,r)}return t.clear=()=>{clearTimeout(e)},t}function uc(s){return s&&s.ownerDocument||document}function nu(s){return uc(s).defaultView||window}function N4(s,r){typeof s=="function"?s(r):s&&(s.current=r)}function jw(s){const{controlled:r,default:e,name:t,state:a="value"}=s,{current:o}=u.useRef(r!==void 0),[i,l]=u.useState(e),c=o?r:i,d=u.useCallback(p=>{o||l(p)},[]);return[c,d]}function jp(s){const r=u.useRef(s);return ru(()=>{r.current=s}),u.useRef((...e)=>(0,r.current)(...e)).current}function yo(...s){const r=u.useRef(void 0),e=u.useCallback(t=>{const a=s.map(o=>{if(o==null)return null;if(typeof o=="function"){const i=o,l=i(t);return typeof l=="function"?l:()=>{i(null)}}return o.current=t,()=>{o.current=null}});return()=>{a.forEach(o=>o?.())}},s);return u.useMemo(()=>s.every(t=>t==null)?null:t=>{r.current&&(r.current(),r.current=void 0),t!=null&&(r.current=e(t))},s)}function ide(s,r){const e=s.charCodeAt(2);return s[0]==="o"&&s[1]==="n"&&e>=65&&e<=90&&typeof r=="function"}function tI(s,r){if(!s)return r;function e(i,l){const c={};return Object.keys(l).forEach(d=>{ide(d,l[d])&&typeof i[d]=="function"&&(c[d]=(...p)=>{i[d](...p),l[d](...p)})}),c}if(typeof s=="function"||typeof r=="function")return i=>{const l=typeof r=="function"?r(i):r,c=typeof s=="function"?s({...i,...l}):s,d=Hr(i?.className,l?.className,c?.className),p=e(c,l);return{...l,...c,...p,...!!d&&{className:d},...l?.style&&c?.style&&{style:{...l.style,...c.style}},...l?.sx&&c?.sx&&{sx:[...Array.isArray(l.sx)?l.sx:[l.sx],...Array.isArray(c.sx)?c.sx:[c.sx]]}}};const t=r,a=e(s,t),o=Hr(t?.className,s?.className);return{...r,...s,...a,...!!o&&{className:o},...t?.style&&s?.style&&{style:{...t.style,...s.style}},...t?.sx&&s?.sx&&{sx:[...Array.isArray(t.sx)?t.sx:[t.sx],...Array.isArray(s.sx)?s.sx:[s.sx]]}}}function rI(s,r){if(s==null)return{};var e={};for(var t in s)if({}.hasOwnProperty.call(s,t)){if(r.indexOf(t)!==-1)continue;e[t]=s[t]}return e}function DN(s,r){return DN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},DN(s,r)}function nI(s,r){s.prototype=Object.create(r.prototype),s.prototype.constructor=s,DN(s,r)}const k4={disabled:!1},Cw=pt.createContext(null);var lde=function(r){return r.scrollTop},Cy="unmounted",sp="exited",ap="entering",zh="entered",LN="exiting",rd=(function(s){nI(r,s);function r(t,a){var o;o=s.call(this,t,a)||this;var i=a,l=i&&!i.isMounting?t.enter:t.appear,c;return o.appearStatus=null,t.in?l?(c=sp,o.appearStatus=ap):c=zh:t.unmountOnExit||t.mountOnEnter?c=Cy:c=sp,o.state={status:c},o.nextCallback=null,o}r.getDerivedStateFromProps=function(a,o){var i=a.in;return i&&o.status===Cy?{status:sp}:null};var e=r.prototype;return e.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},e.componentDidUpdate=function(a){var o=null;if(a!==this.props){var i=this.state.status;this.props.in?i!==ap&&i!==zh&&(o=ap):(i===ap||i===zh)&&(o=LN)}this.updateStatus(!1,o)},e.componentWillUnmount=function(){this.cancelNextCallback()},e.getTimeouts=function(){var a=this.props.timeout,o,i,l;return o=i=l=a,a!=null&&typeof a!="number"&&(o=a.exit,i=a.enter,l=a.appear!==void 0?a.appear:i),{exit:o,enter:i,appear:l}},e.updateStatus=function(a,o){if(a===void 0&&(a=!1),o!==null)if(this.cancelNextCallback(),o===ap){if(this.props.unmountOnExit||this.props.mountOnEnter){var i=this.props.nodeRef?this.props.nodeRef.current:ev.findDOMNode(this);i&&lde(i)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===sp&&this.setState({status:Cy})},e.performEnter=function(a){var o=this,i=this.props.enter,l=this.context?this.context.isMounting:a,c=this.props.nodeRef?[l]:[ev.findDOMNode(this),l],d=c[0],p=c[1],h=this.getTimeouts(),g=l?h.appear:h.enter;if(!a&&!i||k4.disabled){this.safeSetState({status:zh},function(){o.props.onEntered(d)});return}this.props.onEnter(d,p),this.safeSetState({status:ap},function(){o.props.onEntering(d,p),o.onTransitionEnd(g,function(){o.safeSetState({status:zh},function(){o.props.onEntered(d,p)})})})},e.performExit=function(){var a=this,o=this.props.exit,i=this.getTimeouts(),l=this.props.nodeRef?void 0:ev.findDOMNode(this);if(!o||k4.disabled){this.safeSetState({status:sp},function(){a.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:LN},function(){a.props.onExiting(l),a.onTransitionEnd(i.exit,function(){a.safeSetState({status:sp},function(){a.props.onExited(l)})})})},e.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},e.safeSetState=function(a,o){o=this.setNextCallback(o),this.setState(a,o)},e.setNextCallback=function(a){var o=this,i=!0;return this.nextCallback=function(l){i&&(i=!1,o.nextCallback=null,a(l))},this.nextCallback.cancel=function(){i=!1},this.nextCallback},e.onTransitionEnd=function(a,o){this.setNextCallback(o);var i=this.props.nodeRef?this.props.nodeRef.current:ev.findDOMNode(this),l=a==null&&!this.props.addEndListener;if(!i||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[i,this.nextCallback],d=c[0],p=c[1];this.props.addEndListener(d,p)}a!=null&&setTimeout(this.nextCallback,a)},e.render=function(){var a=this.state.status;if(a===Cy)return null;var o=this.props,i=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var l=rI(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return pt.createElement(Cw.Provider,{value:null},typeof i=="function"?i(a,l):pt.cloneElement(pt.Children.only(i),l))},r})(pt.Component);rd.contextType=Cw;rd.propTypes={};function Mh(){}rd.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Mh,onEntering:Mh,onEntered:Mh,onExit:Mh,onExiting:Mh,onExited:Mh};rd.UNMOUNTED=Cy;rd.EXITED=sp;rd.ENTERING=ap;rd.ENTERED=zh;rd.EXITING=LN;function cde(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function wk(s,r){var e=function(o){return r&&u.isValidElement(o)?r(o):o},t=Object.create(null);return s&&u.Children.map(s,function(a){return a}).forEach(function(a){t[a.key]=e(a)}),t}function dde(s,r){s=s||{},r=r||{};function e(p){return p in r?r[p]:s[p]}var t=Object.create(null),a=[];for(var o in s)o in r?a.length&&(t[o]=a,a=[]):a.push(o);var i,l={};for(var c in r){if(t[c])for(i=0;i<t[c].length;i++){var d=t[c][i];l[t[c][i]]=e(d)}l[c]=e(c)}for(i=0;i<a.length;i++)l[a[i]]=e(a[i]);return l}function xp(s,r,e){return e[r]!=null?e[r]:s.props[r]}function ude(s,r){return wk(s.children,function(e){return u.cloneElement(e,{onExited:r.bind(null,e),in:!0,appear:xp(e,"appear",s),enter:xp(e,"enter",s),exit:xp(e,"exit",s)})})}function fde(s,r,e){var t=wk(s.children),a=dde(r,t);return Object.keys(a).forEach(function(o){var i=a[o];if(u.isValidElement(i)){var l=o in r,c=o in t,d=r[o],p=u.isValidElement(d)&&!d.props.in;c&&(!l||p)?a[o]=u.cloneElement(i,{onExited:e.bind(null,i),in:!0,exit:xp(i,"exit",s),enter:xp(i,"enter",s)}):!c&&l&&!p?a[o]=u.cloneElement(i,{in:!1}):c&&l&&u.isValidElement(d)&&(a[o]=u.cloneElement(i,{onExited:e.bind(null,i),in:d.props.in,exit:xp(i,"exit",s),enter:xp(i,"enter",s)}))}}),a}var pde=Object.values||function(s){return Object.keys(s).map(function(r){return s[r]})},hde={component:"div",childFactory:function(r){return r}},jk=(function(s){nI(r,s);function r(t,a){var o;o=s.call(this,t,a)||this;var i=o.handleExited.bind(cde(o));return o.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},o}var e=r.prototype;return e.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},e.componentWillUnmount=function(){this.mounted=!1},r.getDerivedStateFromProps=function(a,o){var i=o.children,l=o.handleExited,c=o.firstRender;return{children:c?ude(a,l):fde(a,i,l),firstRender:!1}},e.handleExited=function(a,o){var i=wk(this.props.children);a.key in i||(a.props.onExited&&a.props.onExited(o),this.mounted&&this.setState(function(l){var c=vw({},l.children);return delete c[a.key],{children:c}}))},e.render=function(){var a=this.props,o=a.component,i=a.childFactory,l=rI(a,["component","childFactory"]),c=this.state.contextValue,d=pde(this.state.children).map(i);return delete l.appear,delete l.enter,delete l.exit,o===null?pt.createElement(Cw.Provider,{value:c},d):pt.createElement(Cw.Provider,{value:c},pt.createElement(o,l,d))},r})(pt.Component);jk.propTypes={};jk.defaultProps=hde;const _4={};function sI(s,r){const e=u.useRef(_4);return e.current===_4&&(e.current=s(r)),e}const mde=[];function gde(s){u.useEffect(s,mde)}class Ck{static create(){return new Ck}currentId=null;start(r,e){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,e()},r)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function aI(){const s=sI(Ck.create).current;return gde(s.disposeEffect),s}const oI=s=>s.scrollTop;function Sw(s,r){const{timeout:e,easing:t,style:a={}}=s;return{duration:a.transitionDuration??(typeof e=="number"?e:e[r.mode]||0),easing:a.transitionTimingFunction??(typeof t=="object"?t[r.mode]:t),delay:a.transitionDelay}}function Sm(s){return typeof s=="string"}function iI(s,r,e){return s===void 0||Sm(s)?r:{...r,ownerState:{...r.ownerState,...e}}}function lI(s,r,e){return typeof s=="function"?s(r,e):s}function cI(s,r=[]){if(s===void 0)return{};const e={};return Object.keys(s).filter(t=>t.match(/^on[A-Z]/)&&typeof s[t]=="function"&&!r.includes(t)).forEach(t=>{e[t]=s[t]}),e}function E4(s){if(s===void 0)return{};const r={};return Object.keys(s).filter(e=>!(e.match(/^on[A-Z]/)&&typeof s[e]=="function")).forEach(e=>{r[e]=s[e]}),r}function dI(s){const{getSlotProps:r,additionalProps:e,externalSlotProps:t,externalForwardedProps:a,className:o}=s;if(!r){const y=Hr(e?.className,o,a?.className,t?.className),b={...e?.style,...a?.style,...t?.style},v={...e,...a,...t};return y.length>0&&(v.className=y),Object.keys(b).length>0&&(v.style=b),{props:v,internalRef:void 0}}const i=cI({...a,...t}),l=E4(t),c=E4(a),d=r(i),p=Hr(d?.className,e?.className,o,a?.className,t?.className),h={...d?.style,...e?.style,...a?.style,...t?.style},g={...d,...e,...c,...l};return p.length>0&&(g.className=p),Object.keys(h).length>0&&(g.style=h),{props:g,internalRef:d.ref}}function ts(s,r){const{className:e,elementType:t,ownerState:a,externalForwardedProps:o,internalForwardedProps:i,shouldForwardComponentProp:l=!1,...c}=r,{component:d,slots:p={[s]:void 0},slotProps:h={[s]:void 0},...g}=o,y=p[s]||t,b=lI(h[s],a),{props:{component:v,...w},internalRef:C}=dI({className:e,...c,externalForwardedProps:s==="root"?g:void 0,externalSlotProps:b}),k=yo(C,b?.ref,r.ref),N=s==="root"?v||d:v,O=iI(y,{...s==="root"&&!d&&!p[s]&&i,...s!=="root"&&!p[s]&&i,...w,...N&&!l&&{as:N},...N&&l&&{component:N},ref:k},a);return[y,O]}function yde(s){return yn("MuiPaper",s)}xn("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const xde=s=>{const{square:r,elevation:e,variant:t,classes:a}=s,o={root:["root",t,!r&&"rounded",t==="elevation"&&`elevation${e}`]};return vn(o,yde,a)},vde=vr("div",{name:"MuiPaper",slot:"Root",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[r.root,r[e.variant],!e.square&&r.rounded,e.variant==="elevation"&&r[`elevation${e.elevation}`]]}})(Pn(({theme:s})=>({backgroundColor:(s.vars||s).palette.background.paper,color:(s.vars||s).palette.text.primary,transition:s.transitions.create("box-shadow"),variants:[{props:({ownerState:r})=>!r.square,style:{borderRadius:s.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(s.vars||s).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),Ms=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiPaper"}),a=Fx(),{className:o,component:i="div",elevation:l=1,square:c=!1,variant:d="elevation",...p}=t,h={...t,component:i,elevation:l,square:c,variant:d},g=xde(h);return n.jsx(vde,{as:i,ownerState:h,className:Hr(g.root,o),ref:e,...p,style:{...d==="elevation"&&{"--Paper-shadow":(a.vars||a).shadows[l],...a.vars&&{"--Paper-overlay":a.vars.overlays?.[l]},...!a.vars&&a.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${ox("#fff",MN(l))}, ${ox("#fff",MN(l))})`}},...p.style}})});function Nw(s){try{return s.matches(":focus-visible")}catch{}return!1}class kw{static create(){return new kw}static use(){const r=sI(kw.create).current,[e,t]=u.useState(!1);return r.shouldMount=e,r.setShouldMount=t,u.useEffect(r.mountEffect,[e]),r}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=wde(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())};start(...r){this.mount().then(()=>this.ref.current?.start(...r))}stop(...r){this.mount().then(()=>this.ref.current?.stop(...r))}pulsate(...r){this.mount().then(()=>this.ref.current?.pulsate(...r))}}function bde(){return kw.use()}function wde(){let s,r;const e=new Promise((t,a)=>{s=t,r=a});return e.resolve=s,e.reject=r,e}function jde(s){const{className:r,classes:e,pulsate:t=!1,rippleX:a,rippleY:o,rippleSize:i,in:l,onExited:c,timeout:d}=s,[p,h]=u.useState(!1),g=Hr(r,e.ripple,e.rippleVisible,t&&e.ripplePulsate),y={width:i,height:i,top:-(i/2)+o,left:-(i/2)+a},b=Hr(e.child,p&&e.childLeaving,t&&e.childPulsate);return!l&&!p&&h(!0),u.useEffect(()=>{if(!l&&c!=null){const v=setTimeout(c,d);return()=>{clearTimeout(v)}}},[c,l,d]),n.jsx("span",{className:g,style:y,children:n.jsx("span",{className:b})})}const yl=xn("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),FN=550,Cde=80,Sde=Rx`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,Nde=Rx`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,kde=Rx`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,_de=vr("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Ede=vr(jde,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${yl.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${Sde};
    animation-duration: ${FN}ms;
    animation-timing-function: ${({theme:s})=>s.transitions.easing.easeInOut};
  }

  &.${yl.ripplePulsate} {
    animation-duration: ${({theme:s})=>s.transitions.duration.shorter}ms;
  }

  & .${yl.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${yl.childLeaving} {
    opacity: 0;
    animation-name: ${Nde};
    animation-duration: ${FN}ms;
    animation-timing-function: ${({theme:s})=>s.transitions.easing.easeInOut};
  }

  & .${yl.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${kde};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:s})=>s.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,Tde=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiTouchRipple"}),{center:a=!1,classes:o={},className:i,...l}=t,[c,d]=u.useState([]),p=u.useRef(0),h=u.useRef(null);u.useEffect(()=>{h.current&&(h.current(),h.current=null)},[c]);const g=u.useRef(!1),y=aI(),b=u.useRef(null),v=u.useRef(null),w=u.useCallback(O=>{const{pulsate:R,rippleX:L,rippleY:B,rippleSize:G,cb:$}=O;d(z=>[...z,n.jsx(Ede,{classes:{ripple:Hr(o.ripple,yl.ripple),rippleVisible:Hr(o.rippleVisible,yl.rippleVisible),ripplePulsate:Hr(o.ripplePulsate,yl.ripplePulsate),child:Hr(o.child,yl.child),childLeaving:Hr(o.childLeaving,yl.childLeaving),childPulsate:Hr(o.childPulsate,yl.childPulsate)},timeout:FN,pulsate:R,rippleX:L,rippleY:B,rippleSize:G},p.current)]),p.current+=1,h.current=$},[o]),C=u.useCallback((O={},R={},L=()=>{})=>{const{pulsate:B=!1,center:G=a||R.pulsate,fakeElement:$=!1}=R;if(O?.type==="mousedown"&&g.current){g.current=!1;return}O?.type==="touchstart"&&(g.current=!0);const z=$?null:v.current,Y=z?z.getBoundingClientRect():{width:0,height:0,left:0,top:0};let M,q,P;if(G||O===void 0||O.clientX===0&&O.clientY===0||!O.clientX&&!O.touches)M=Math.round(Y.width/2),q=Math.round(Y.height/2);else{const{clientX:H,clientY:D}=O.touches&&O.touches.length>0?O.touches[0]:O;M=Math.round(H-Y.left),q=Math.round(D-Y.top)}if(G)P=Math.sqrt((2*Y.width**2+Y.height**2)/3),P%2===0&&(P+=1);else{const H=Math.max(Math.abs((z?z.clientWidth:0)-M),M)*2+2,D=Math.max(Math.abs((z?z.clientHeight:0)-q),q)*2+2;P=Math.sqrt(H**2+D**2)}O?.touches?b.current===null&&(b.current=()=>{w({pulsate:B,rippleX:M,rippleY:q,rippleSize:P,cb:L})},y.start(Cde,()=>{b.current&&(b.current(),b.current=null)})):w({pulsate:B,rippleX:M,rippleY:q,rippleSize:P,cb:L})},[a,w,y]),k=u.useCallback(()=>{C({},{pulsate:!0})},[C]),N=u.useCallback((O,R)=>{if(y.clear(),O?.type==="touchend"&&b.current){b.current(),b.current=null,y.start(0,()=>{N(O,R)});return}b.current=null,d(L=>L.length>0?L.slice(1):L),h.current=R},[y]);return u.useImperativeHandle(e,()=>({pulsate:k,start:C,stop:N}),[k,C,N]),n.jsx(_de,{className:Hr(yl.root,o.root,i),ref:v,...l,children:n.jsx(jk,{component:null,exit:!0,children:c})})});function Ode(s){return yn("MuiButtonBase",s)}const Pde=xn("MuiButtonBase",["root","disabled","focusVisible"]),Ade=s=>{const{disabled:r,focusVisible:e,focusVisibleClassName:t,classes:a}=s,i=vn({root:["root",r&&"disabled",e&&"focusVisible"]},Ode,a);return e&&t&&(i.root+=` ${t}`),i},Mde=vr("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Pde.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),cf=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiButtonBase"}),{action:a,centerRipple:o=!1,children:i,className:l,component:c="button",disabled:d=!1,disableRipple:p=!1,disableTouchRipple:h=!1,focusRipple:g=!1,focusVisibleClassName:y,LinkComponent:b="a",onBlur:v,onClick:w,onContextMenu:C,onDragLeave:k,onFocus:N,onFocusVisible:O,onKeyDown:R,onKeyUp:L,onMouseDown:B,onMouseLeave:G,onMouseUp:$,onTouchEnd:z,onTouchMove:Y,onTouchStart:M,tabIndex:q=0,TouchRippleProps:P,touchRippleRef:H,type:D,...X}=t,se=u.useRef(null),Q=bde(),xe=yo(Q.ref,H),[K,Z]=u.useState(!1);d&&K&&Z(!1),u.useImperativeHandle(a,()=>({focusVisible:()=>{Z(!0),se.current.focus()}}),[]);const ve=Q.shouldMount&&!p&&!d;u.useEffect(()=>{K&&g&&!p&&Q.pulsate()},[p,g,K,Q]);const ae=Md(Q,"start",B,h),Se=Md(Q,"stop",C,h),Pe=Md(Q,"stop",k,h),$e=Md(Q,"stop",$,h),we=Md(Q,"stop",ge=>{K&&ge.preventDefault(),G&&G(ge)},h),Ae=Md(Q,"start",M,h),ze=Md(Q,"stop",z,h),Ge=Md(Q,"stop",Y,h),Ue=Md(Q,"stop",ge=>{Nw(ge.target)||Z(!1),v&&v(ge)},!1),ht=jp(ge=>{se.current||(se.current=ge.currentTarget),Nw(ge.target)&&(Z(!0),O&&O(ge)),N&&N(ge)}),ee=()=>{const ge=se.current;return c&&c!=="button"&&!(ge.tagName==="A"&&ge.href)},ue=jp(ge=>{g&&!ge.repeat&&K&&ge.key===" "&&Q.stop(ge,()=>{Q.start(ge)}),ge.target===ge.currentTarget&&ee()&&ge.key===" "&&ge.preventDefault(),R&&R(ge),ge.target===ge.currentTarget&&ee()&&ge.key==="Enter"&&!d&&(ge.preventDefault(),w&&w(ge))}),Oe=jp(ge=>{g&&ge.key===" "&&K&&!ge.defaultPrevented&&Q.stop(ge,()=>{Q.pulsate(ge)}),L&&L(ge),w&&ge.target===ge.currentTarget&&ee()&&ge.key===" "&&!ge.defaultPrevented&&w(ge)});let J=c;J==="button"&&(X.href||X.to)&&(J=b);const I={};if(J==="button"){const ge=!!X.formAction;I.type=D===void 0&&!ge?"button":D,I.disabled=d}else!X.href&&!X.to&&(I.role="button"),d&&(I["aria-disabled"]=d);const V=yo(e,se),re={...t,centerRipple:o,component:c,disabled:d,disableRipple:p,disableTouchRipple:h,focusRipple:g,tabIndex:q,focusVisible:K},pe=Ade(re);return n.jsxs(Mde,{as:J,className:Hr(pe.root,l),ownerState:re,onBlur:Ue,onClick:w,onContextMenu:Se,onFocus:ht,onKeyDown:ue,onKeyUp:Oe,onMouseDown:ae,onMouseLeave:we,onMouseUp:$e,onDragLeave:Pe,onTouchEnd:ze,onTouchMove:Ge,onTouchStart:Ae,ref:V,tabIndex:d?-1:q,type:D,...I,...X,children:[i,ve?n.jsx(Tde,{ref:xe,center:o,...P}):null]})});function Md(s,r,e,t=!1){return jp(a=>(e&&e(a),t||s[r](a),!0))}function Ide(s){return typeof s.main=="string"}function Rde(s,r=[]){if(!Ide(s))return!1;for(const e of r)if(!s.hasOwnProperty(e)||typeof s[e]!="string")return!1;return!0}function ho(s=[]){return([,r])=>r&&Rde(r,s)}function Dde(s){return yn("MuiCircularProgress",s)}xn("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","track","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Ql=44,BN=Rx`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,zN=Rx`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,Lde=typeof BN!="string"?pk`
        animation: ${BN} 1.4s linear infinite;
      `:null,Fde=typeof zN!="string"?pk`
        animation: ${zN} 1.4s ease-in-out infinite;
      `:null,Bde=s=>{const{classes:r,variant:e,color:t,disableShrink:a}=s,o={root:["root",e,`color${mr(t)}`],svg:["svg"],track:["track"],circle:["circle",`circle${mr(e)}`,a&&"circleDisableShrink"]};return vn(o,Dde,r)},zde=vr("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[r.root,r[e.variant],r[`color${mr(e.color)}`]]}})(Pn(({theme:s})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:s.transitions.create("transform")}},{props:{variant:"indeterminate"},style:Lde||{animation:`${BN} 1.4s linear infinite`}},...Object.entries(s.palette).filter(ho()).map(([r])=>({props:{color:r},style:{color:(s.vars||s).palette[r].main}}))]}))),$de=vr("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),Ude=vr("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[r.circle,r[`circle${mr(e.variant)}`],e.disableShrink&&r.circleDisableShrink]}})(Pn(({theme:s})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:s.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:r})=>r.variant==="indeterminate"&&!r.disableShrink,style:Fde||{animation:`${zN} 1.4s ease-in-out infinite`}}]}))),Vde=vr("circle",{name:"MuiCircularProgress",slot:"Track"})(Pn(({theme:s})=>({stroke:"currentColor",opacity:(s.vars||s).palette.action.activatedOpacity}))),uI=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiCircularProgress"}),{className:a,color:o="primary",disableShrink:i=!1,enableTrackSlot:l=!1,size:c=40,style:d,thickness:p=3.6,value:h=0,variant:g="indeterminate",...y}=t,b={...t,color:o,disableShrink:i,size:c,thickness:p,value:h,variant:g,enableTrackSlot:l},v=Bde(b),w={},C={},k={};if(g==="determinate"){const N=2*Math.PI*((Ql-p)/2);w.strokeDasharray=N.toFixed(3),k["aria-valuenow"]=Math.round(h),w.strokeDashoffset=`${((100-h)/100*N).toFixed(3)}px`,C.transform="rotate(-90deg)"}return n.jsx(zde,{className:Hr(v.root,a),style:{width:c,height:c,...C,...d},ownerState:b,ref:e,role:"progressbar",...k,...y,children:n.jsxs($de,{className:v.svg,ownerState:b,viewBox:`${Ql/2} ${Ql/2} ${Ql} ${Ql}`,children:[l?n.jsx(Vde,{className:v.track,ownerState:b,cx:Ql,cy:Ql,r:(Ql-p)/2,fill:"none",strokeWidth:p,"aria-hidden":"true"}):null,n.jsx(Ude,{className:v.circle,style:w,ownerState:b,cx:Ql,cy:Ql,r:(Ql-p)/2,fill:"none",strokeWidth:p})]})})});function Hde(s){return yn("MuiIconButton",s)}const T4=xn("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),Wde=s=>{const{classes:r,disabled:e,color:t,edge:a,size:o,loading:i}=s,l={root:["root",i&&"loading",e&&"disabled",t!=="default"&&`color${mr(t)}`,a&&`edge${mr(a)}`,`size${mr(o)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return vn(l,Hde,r)},qde=vr(cf,{name:"MuiIconButton",slot:"Root",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[r.root,e.loading&&r.loading,e.color!=="default"&&r[`color${mr(e.color)}`],e.edge&&r[`edge${mr(e.edge)}`],r[`size${mr(e.size)}`]]}})(Pn(({theme:s})=>({textAlign:"center",flex:"0 0 auto",fontSize:s.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(s.vars||s).palette.action.active,transition:s.transitions.create("background-color",{duration:s.transitions.duration.shortest}),variants:[{props:r=>!r.disableRipple,style:{"--IconButton-hoverBg":s.alpha((s.vars||s).palette.action.active,(s.vars||s).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),Pn(({theme:s})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(s.palette).filter(ho()).map(([r])=>({props:{color:r},style:{color:(s.vars||s).palette[r].main}})),...Object.entries(s.palette).filter(ho()).map(([r])=>({props:{color:r},style:{"--IconButton-hoverBg":s.alpha((s.vars||s).palette[r].main,(s.vars||s).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:s.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:s.typography.pxToRem(28)}}],[`&.${T4.disabled}`]:{backgroundColor:"transparent",color:(s.vars||s).palette.action.disabled},[`&.${T4.loading}`]:{color:"transparent"}}))),Gde=vr("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:s})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(s.vars||s).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),es=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiIconButton"}),{edge:a=!1,children:o,className:i,color:l="default",disabled:c=!1,disableFocusRipple:d=!1,size:p="medium",id:h,loading:g=null,loadingIndicator:y,...b}=t,v=Fm(h),w=y??n.jsx(uI,{"aria-labelledby":v,color:"inherit",size:16}),C={...t,edge:a,color:l,disabled:c,disableFocusRipple:d,loading:g,loadingIndicator:w,size:p},k=Wde(C);return n.jsxs(qde,{id:g?v:h,className:Hr(k.root,i),centerRipple:!0,focusRipple:!d,disabled:c||g,ref:e,...b,ownerState:C,children:[typeof g=="boolean"&&n.jsx("span",{className:k.loadingWrapper,style:{display:"contents"},children:n.jsx(Gde,{className:k.loadingIndicator,ownerState:C,children:g&&w})}),o]})});function Kde(s){return yn("MuiTypography",s)}const O4=xn("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),Yde={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},Zde=nde(),Xde=s=>{const{align:r,gutterBottom:e,noWrap:t,paragraph:a,variant:o,classes:i}=s,l={root:["root",o,s.align!=="inherit"&&`align${mr(r)}`,e&&"gutterBottom",t&&"noWrap",a&&"paragraph"]};return vn(l,Kde,i)},Qde=vr("span",{name:"MuiTypography",slot:"Root",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[r.root,e.variant&&r[e.variant],e.align!=="inherit"&&r[`align${mr(e.align)}`],e.noWrap&&r.noWrap,e.gutterBottom&&r.gutterBottom,e.paragraph&&r.paragraph]}})(Pn(({theme:s})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(s.typography).filter(([r,e])=>r!=="inherit"&&e&&typeof e=="object").map(([r,e])=>({props:{variant:r},style:e})),...Object.entries(s.palette).filter(ho()).map(([r])=>({props:{color:r},style:{color:(s.vars||s).palette[r].main}})),...Object.entries(s.palette?.text||{}).filter(([,r])=>typeof r=="string").map(([r])=>({props:{color:`text${mr(r)}`},style:{color:(s.vars||s).palette.text[r]}})),{props:({ownerState:r})=>r.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:r})=>r.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:r})=>r.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:r})=>r.paragraph,style:{marginBottom:16}}]}))),P4={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Bt=u.forwardRef(function(r,e){const{color:t,...a}=kn({props:r,name:"MuiTypography"}),o=!Yde[t],i=Zde({...a,...o&&{color:t}}),{align:l="inherit",className:c,component:d,gutterBottom:p=!1,noWrap:h=!1,paragraph:g=!1,variant:y="body1",variantMapping:b=P4,...v}=i,w={...i,align:l,color:t,className:c,component:d,gutterBottom:p,noWrap:h,paragraph:g,variant:y,variantMapping:b},C=d||(g?"p":b[y]||P4[y])||"span",k=Xde(w);return n.jsx(Qde,{as:C,ref:e,className:Hr(k.root,c),...v,ownerState:w,style:{...l!=="inherit"&&{"--Typography-textAlign":l},...v.style}})});function fI(s){const{elementType:r,externalSlotProps:e,ownerState:t,skipResolvingSlotProps:a=!1,...o}=s,i=a?{}:lI(e,t),{props:l,internalRef:c}=dI({...o,externalSlotProps:i}),d=yo(c,i?.ref,s.additionalProps?.ref);return iI(r,{...l,ref:d},t)}function Bx(s){return parseInt(u.version,10)>=19?s?.props?.ref||null:s?.ref||null}function Jde(s){return typeof s=="function"?s():s}const eue=u.forwardRef(function(r,e){const{children:t,container:a,disablePortal:o=!1}=r,[i,l]=u.useState(null),c=yo(u.isValidElement(t)?Bx(t):null,e);if(ru(()=>{o||l(Jde(a)||document.body)},[a,o]),ru(()=>{if(i&&!o)return N4(e,i),()=>{N4(e,null)}},[e,i,o]),o){if(u.isValidElement(t)){const d={ref:c};return u.cloneElement(t,d)}return t}return i&&Hw.createPortal(t,i)}),tue=ws(n.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}));function rue(s){return yn("MuiChip",s)}const is=xn("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),nue=s=>{const{classes:r,disabled:e,size:t,color:a,iconColor:o,onDelete:i,clickable:l,variant:c}=s,d={root:["root",c,e&&"disabled",`size${mr(t)}`,`color${mr(a)}`,l&&"clickable",l&&`clickableColor${mr(a)}`,i&&"deletable",i&&`deletableColor${mr(a)}`,`${c}${mr(a)}`],label:["label",`label${mr(t)}`],avatar:["avatar",`avatar${mr(t)}`,`avatarColor${mr(a)}`],icon:["icon",`icon${mr(t)}`,`iconColor${mr(o)}`],deleteIcon:["deleteIcon",`deleteIcon${mr(t)}`,`deleteIconColor${mr(a)}`,`deleteIcon${mr(c)}Color${mr(a)}`]};return vn(d,rue,r)},sue=vr("div",{name:"MuiChip",slot:"Root",overridesResolver:(s,r)=>{const{ownerState:e}=s,{color:t,iconColor:a,clickable:o,onDelete:i,size:l,variant:c}=e;return[{[`& .${is.avatar}`]:r.avatar},{[`& .${is.avatar}`]:r[`avatar${mr(l)}`]},{[`& .${is.avatar}`]:r[`avatarColor${mr(t)}`]},{[`& .${is.icon}`]:r.icon},{[`& .${is.icon}`]:r[`icon${mr(l)}`]},{[`& .${is.icon}`]:r[`iconColor${mr(a)}`]},{[`& .${is.deleteIcon}`]:r.deleteIcon},{[`& .${is.deleteIcon}`]:r[`deleteIcon${mr(l)}`]},{[`& .${is.deleteIcon}`]:r[`deleteIconColor${mr(t)}`]},{[`& .${is.deleteIcon}`]:r[`deleteIcon${mr(c)}Color${mr(t)}`]},r.root,r[`size${mr(l)}`],r[`color${mr(t)}`],o&&r.clickable,o&&t!=="default"&&r[`clickableColor${mr(t)}`],i&&r.deletable,i&&t!=="default"&&r[`deletableColor${mr(t)}`],r[c],r[`${c}${mr(t)}`]]}})(Pn(({theme:s})=>{const r=s.palette.mode==="light"?s.palette.grey[700]:s.palette.grey[300];return{maxWidth:"100%",fontFamily:s.typography.fontFamily,fontSize:s.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,lineHeight:1.5,color:(s.vars||s).palette.text.primary,backgroundColor:(s.vars||s).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:s.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${is.disabled}`]:{opacity:(s.vars||s).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${is.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:s.vars?s.vars.palette.Chip.defaultAvatarColor:r,fontSize:s.typography.pxToRem(12)},[`& .${is.avatarColorPrimary}`]:{color:(s.vars||s).palette.primary.contrastText,backgroundColor:(s.vars||s).palette.primary.dark},[`& .${is.avatarColorSecondary}`]:{color:(s.vars||s).palette.secondary.contrastText,backgroundColor:(s.vars||s).palette.secondary.dark},[`& .${is.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:s.typography.pxToRem(10)},[`& .${is.icon}`]:{marginLeft:5,marginRight:-6},[`& .${is.deleteIcon}`]:{WebkitTapHighlightColor:"transparent",color:s.alpha((s.vars||s).palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:s.alpha((s.vars||s).palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,[`& .${is.icon}`]:{fontSize:18,marginLeft:4,marginRight:-4},[`& .${is.deleteIcon}`]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(s.palette).filter(ho(["contrastText"])).map(([e])=>({props:{color:e},style:{backgroundColor:(s.vars||s).palette[e].main,color:(s.vars||s).palette[e].contrastText,[`& .${is.deleteIcon}`]:{color:s.alpha((s.vars||s).palette[e].contrastText,.7),"&:hover, &:active":{color:(s.vars||s).palette[e].contrastText}}}})),{props:e=>e.iconColor===e.color,style:{[`& .${is.icon}`]:{color:s.vars?s.vars.palette.Chip.defaultIconColor:r}}},{props:e=>e.iconColor===e.color&&e.color!=="default",style:{[`& .${is.icon}`]:{color:"inherit"}}},{props:{onDelete:!0},style:{[`&.${is.focusVisible}`]:{backgroundColor:s.alpha((s.vars||s).palette.action.selected,`${(s.vars||s).palette.action.selectedOpacity} + ${(s.vars||s).palette.action.focusOpacity}`)}}},...Object.entries(s.palette).filter(ho(["dark"])).map(([e])=>({props:{color:e,onDelete:!0},style:{[`&.${is.focusVisible}`]:{background:(s.vars||s).palette[e].dark}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:s.alpha((s.vars||s).palette.action.selected,`${(s.vars||s).palette.action.selectedOpacity} + ${(s.vars||s).palette.action.hoverOpacity}`)},[`&.${is.focusVisible}`]:{backgroundColor:s.alpha((s.vars||s).palette.action.selected,`${(s.vars||s).palette.action.selectedOpacity} + ${(s.vars||s).palette.action.focusOpacity}`)},"&:active":{boxShadow:(s.vars||s).shadows[1]}}},...Object.entries(s.palette).filter(ho(["dark"])).map(([e])=>({props:{color:e,clickable:!0},style:{[`&:hover, &.${is.focusVisible}`]:{backgroundColor:(s.vars||s).palette[e].dark}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:s.vars?`1px solid ${s.vars.palette.Chip.defaultBorder}`:`1px solid ${s.palette.mode==="light"?s.palette.grey[400]:s.palette.grey[700]}`,[`&.${is.clickable}:hover`]:{backgroundColor:(s.vars||s).palette.action.hover},[`&.${is.focusVisible}`]:{backgroundColor:(s.vars||s).palette.action.focus},[`& .${is.avatar}`]:{marginLeft:4},[`& .${is.avatarSmall}`]:{marginLeft:2},[`& .${is.icon}`]:{marginLeft:4},[`& .${is.iconSmall}`]:{marginLeft:2},[`& .${is.deleteIcon}`]:{marginRight:5},[`& .${is.deleteIconSmall}`]:{marginRight:3}}},...Object.entries(s.palette).filter(ho()).map(([e])=>({props:{variant:"outlined",color:e},style:{color:(s.vars||s).palette[e].main,border:`1px solid ${s.alpha((s.vars||s).palette[e].main,.7)}`,[`&.${is.clickable}:hover`]:{backgroundColor:s.alpha((s.vars||s).palette[e].main,(s.vars||s).palette.action.hoverOpacity)},[`&.${is.focusVisible}`]:{backgroundColor:s.alpha((s.vars||s).palette[e].main,(s.vars||s).palette.action.focusOpacity)},[`& .${is.deleteIcon}`]:{color:s.alpha((s.vars||s).palette[e].main,.7),"&:hover, &:active":{color:(s.vars||s).palette[e].main}}}}))]}})),aue=vr("span",{name:"MuiChip",slot:"Label",overridesResolver:(s,r)=>{const{ownerState:e}=s,{size:t}=e;return[r.label,r[`label${mr(t)}`]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function A4(s){return s.key==="Backspace"||s.key==="Delete"}const Sk=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiChip"}),{avatar:a,className:o,clickable:i,color:l="default",component:c,deleteIcon:d,disabled:p=!1,icon:h,label:g,onClick:y,onDelete:b,onKeyDown:v,onKeyUp:w,size:C="medium",variant:k="filled",tabIndex:N,skipFocusWhenDisabled:O=!1,slots:R={},slotProps:L={},...B}=t,G=u.useRef(null),$=yo(G,e),z=Pe=>{Pe.stopPropagation(),b&&b(Pe)},Y=Pe=>{Pe.currentTarget===Pe.target&&A4(Pe)&&Pe.preventDefault(),v&&v(Pe)},M=Pe=>{Pe.currentTarget===Pe.target&&b&&A4(Pe)&&b(Pe),w&&w(Pe)},q=i!==!1&&y?!0:i,P=q||b?cf:c||"div",H={...t,component:P,disabled:p,size:C,color:l,iconColor:u.isValidElement(h)&&h.props.color||l,onDelete:!!b,clickable:q,variant:k},D=nue(H),X=P===cf?{component:c||"div",focusVisibleClassName:D.focusVisible,...b&&{disableRipple:!0}}:{};let se=null;b&&(se=d&&u.isValidElement(d)?u.cloneElement(d,{className:Hr(d.props.className,D.deleteIcon),onClick:z}):n.jsx(tue,{className:D.deleteIcon,onClick:z}));let Q=null;a&&u.isValidElement(a)&&(Q=u.cloneElement(a,{className:Hr(D.avatar,a.props.className)}));let xe=null;h&&u.isValidElement(h)&&(xe=u.cloneElement(h,{className:Hr(D.icon,h.props.className)}));const K={slots:R,slotProps:L},[Z,ve]=ts("root",{elementType:sue,externalForwardedProps:{...K,...B},ownerState:H,shouldForwardComponentProp:!0,ref:$,className:Hr(D.root,o),additionalProps:{disabled:q&&p?!0:void 0,tabIndex:O&&p?-1:N,...X},getSlotProps:Pe=>({...Pe,onClick:$e=>{Pe.onClick?.($e),y?.($e)},onKeyDown:$e=>{Pe.onKeyDown?.($e),Y($e)},onKeyUp:$e=>{Pe.onKeyUp?.($e),M($e)}})}),[ae,Se]=ts("label",{elementType:aue,externalForwardedProps:K,ownerState:H,className:D.label});return n.jsxs(Z,{as:P,...ve,children:[Q||xe,n.jsx(ae,{...Se,children:g}),se]})});function vv(s){return parseInt(s,10)||0}const oue={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function iue(s){for(const r in s)return!1;return!0}function M4(s){return iue(s)||s.outerHeightStyle===0&&!s.overflowing}const lue=u.forwardRef(function(r,e){const{onChange:t,maxRows:a,minRows:o=1,style:i,value:l,...c}=r,{current:d}=u.useRef(l!=null),p=u.useRef(null),h=yo(e,p),g=u.useRef(null),y=u.useRef(null),b=u.useCallback(()=>{const N=p.current,O=y.current;if(!N||!O)return;const L=nu(N).getComputedStyle(N);if(L.width==="0px")return{outerHeightStyle:0,overflowing:!1};O.style.width=L.width,O.value=N.value||r.placeholder||"x",O.value.slice(-1)===`
`&&(O.value+=" ");const B=L.boxSizing,G=vv(L.paddingBottom)+vv(L.paddingTop),$=vv(L.borderBottomWidth)+vv(L.borderTopWidth),z=O.scrollHeight;O.value="x";const Y=O.scrollHeight;let M=z;o&&(M=Math.max(Number(o)*Y,M)),a&&(M=Math.min(Number(a)*Y,M)),M=Math.max(M,Y);const q=M+(B==="border-box"?G+$:0),P=Math.abs(M-z)<=1;return{outerHeightStyle:q,overflowing:P}},[a,o,r.placeholder]),v=jp(()=>{const N=p.current,O=b();if(!N||!O||M4(O))return!1;const R=O.outerHeightStyle;return g.current!=null&&g.current!==R}),w=u.useCallback(()=>{const N=p.current,O=b();if(!N||!O||M4(O))return;const R=O.outerHeightStyle;g.current!==R&&(g.current=R,N.style.height=`${R}px`),N.style.overflow=O.overflowing?"hidden":""},[b]),C=u.useRef(-1);ru(()=>{const N=eI(w),O=p?.current;if(!O)return;const R=nu(O);R.addEventListener("resize",N);let L;return typeof ResizeObserver<"u"&&(L=new ResizeObserver(()=>{v()&&(L.unobserve(O),cancelAnimationFrame(C.current),w(),C.current=requestAnimationFrame(()=>{L.observe(O)}))}),L.observe(O)),()=>{N.clear(),cancelAnimationFrame(C.current),R.removeEventListener("resize",N),L&&L.disconnect()}},[b,w,v]),ru(()=>{w()});const k=N=>{d||w();const O=N.target,R=O.value.length,L=O.value.endsWith(`
`),B=O.selectionStart===R;L&&B&&O.setSelectionRange(R,R),t&&t(N)};return n.jsxs(u.Fragment,{children:[n.jsx("textarea",{value:l,onChange:k,ref:h,rows:o,style:i,...c}),n.jsx("textarea",{"aria-hidden":!0,className:r.className,readOnly:!0,ref:y,tabIndex:-1,style:{...oue.shadow,...i,paddingTop:0,paddingBottom:0}})]})});function pf({props:s,states:r,muiFormControl:e}){return r.reduce((t,a)=>(t[a]=s[a],e&&typeof s[a]>"u"&&(t[a]=e[a]),t),{})}const _j=u.createContext(void 0);function hc(){return u.useContext(_j)}function I4(s){return s!=null&&!(Array.isArray(s)&&s.length===0)}function _w(s,r=!1){return s&&(I4(s.value)&&s.value!==""||r&&I4(s.defaultValue)&&s.defaultValue!=="")}function cue(s){return s.startAdornment}function due(s){return yn("MuiInputBase",s)}const Nm=xn("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var R4;const Ej=(s,r)=>{const{ownerState:e}=s;return[r.root,e.formControl&&r.formControl,e.startAdornment&&r.adornedStart,e.endAdornment&&r.adornedEnd,e.error&&r.error,e.size==="small"&&r.sizeSmall,e.multiline&&r.multiline,e.color&&r[`color${mr(e.color)}`],e.fullWidth&&r.fullWidth,e.hiddenLabel&&r.hiddenLabel]},Tj=(s,r)=>{const{ownerState:e}=s;return[r.input,e.size==="small"&&r.inputSizeSmall,e.multiline&&r.inputMultiline,e.type==="search"&&r.inputTypeSearch,e.startAdornment&&r.inputAdornedStart,e.endAdornment&&r.inputAdornedEnd,e.hiddenLabel&&r.inputHiddenLabel]},uue=s=>{const{classes:r,color:e,disabled:t,error:a,endAdornment:o,focused:i,formControl:l,fullWidth:c,hiddenLabel:d,multiline:p,readOnly:h,size:g,startAdornment:y,type:b}=s,v={root:["root",`color${mr(e)}`,t&&"disabled",a&&"error",c&&"fullWidth",i&&"focused",l&&"formControl",g&&g!=="medium"&&`size${mr(g)}`,p&&"multiline",y&&"adornedStart",o&&"adornedEnd",d&&"hiddenLabel",h&&"readOnly"],input:["input",t&&"disabled",b==="search"&&"inputTypeSearch",p&&"inputMultiline",g==="small"&&"inputSizeSmall",d&&"inputHiddenLabel",y&&"inputAdornedStart",o&&"inputAdornedEnd",h&&"readOnly"]};return vn(v,due,r)},Oj=vr("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Ej})(Pn(({theme:s})=>({...s.typography.body1,color:(s.vars||s).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Nm.disabled}`]:{color:(s.vars||s).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:r})=>r.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:r,size:e})=>r.multiline&&e==="small",style:{paddingTop:1}},{props:({ownerState:r})=>r.fullWidth,style:{width:"100%"}}]}))),Pj=vr("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Tj})(Pn(({theme:s})=>{const r=s.palette.mode==="light",e={color:"currentColor",...s.vars?{opacity:s.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5},transition:s.transitions.create("opacity",{duration:s.transitions.duration.shorter})},t={opacity:"0 !important"},a=s.vars?{opacity:s.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":e,"&::-moz-placeholder":e,"&::-ms-input-placeholder":e,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Nm.formControl} &`]:{"&::-webkit-input-placeholder":t,"&::-moz-placeholder":t,"&::-ms-input-placeholder":t,"&:focus::-webkit-input-placeholder":a,"&:focus::-moz-placeholder":a,"&:focus::-ms-input-placeholder":a},[`&.${Nm.disabled}`]:{opacity:1,WebkitTextFillColor:(s.vars||s).palette.text.disabled},variants:[{props:({ownerState:o})=>!o.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:o})=>o.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),D4=rde({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),Nk=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiInputBase"}),{"aria-describedby":a,autoComplete:o,autoFocus:i,className:l,color:c,components:d={},componentsProps:p={},defaultValue:h,disabled:g,disableInjectingGlobalStyles:y,endAdornment:b,error:v,fullWidth:w=!1,id:C,inputComponent:k="input",inputProps:N={},inputRef:O,margin:R,maxRows:L,minRows:B,multiline:G=!1,name:$,onBlur:z,onChange:Y,onClick:M,onFocus:q,onKeyDown:P,onKeyUp:H,placeholder:D,readOnly:X,renderSuffix:se,rows:Q,size:xe,slotProps:K={},slots:Z={},startAdornment:ve,type:ae="text",value:Se,...Pe}=t,$e=N.value!=null?N.value:Se,{current:we}=u.useRef($e!=null),Ae=u.useRef(),ze=u.useCallback(le=>{},[]),Ge=yo(Ae,O,N.ref,ze),[Ue,ht]=u.useState(!1),ee=hc(),ue=pf({props:t,muiFormControl:ee,states:["color","disabled","error","hiddenLabel","size","required","filled"]});ue.focused=ee?ee.focused:Ue,u.useEffect(()=>{!ee&&g&&Ue&&(ht(!1),z&&z())},[ee,g,Ue,z]);const Oe=ee&&ee.onFilled,J=ee&&ee.onEmpty,I=u.useCallback(le=>{_w(le)?Oe&&Oe():J&&J()},[Oe,J]);ru(()=>{we&&I({value:$e})},[$e,I,we]);const V=le=>{q&&q(le),N.onFocus&&N.onFocus(le),ee&&ee.onFocus?ee.onFocus(le):ht(!0)},re=le=>{z&&z(le),N.onBlur&&N.onBlur(le),ee&&ee.onBlur?ee.onBlur(le):ht(!1)},pe=(le,...Ye)=>{if(!we){const De=le.target||Ae.current;if(De==null)throw new Error(tu(1));I({value:De.value})}N.onChange&&N.onChange(le,...Ye),Y&&Y(le,...Ye)};u.useEffect(()=>{I(Ae.current)},[]);const ge=le=>{Ae.current&&le.currentTarget===le.target&&Ae.current.focus(),M&&M(le)};let Ce=k,he=N;G&&Ce==="input"&&(Q?he={type:void 0,minRows:Q,maxRows:Q,...he}:he={type:void 0,maxRows:L,minRows:B,...he},Ce=lue);const ie=le=>{I(le.animationName==="mui-auto-fill-cancel"?Ae.current:{value:"x"})};u.useEffect(()=>{ee&&ee.setAdornedStart(!!ve)},[ee,ve]);const Fe={...t,color:ue.color||"primary",disabled:ue.disabled,endAdornment:b,error:ue.error,focused:ue.focused,formControl:ee,fullWidth:w,hiddenLabel:ue.hiddenLabel,multiline:G,size:ue.size,startAdornment:ve,type:ae},We=uue(Fe),Qe=Z.root||d.Root||Oj,de=K.root||p.root||{},Ee=Z.input||d.Input||Pj;return he={...he,...K.input??p.input},n.jsxs(u.Fragment,{children:[!y&&typeof D4=="function"&&(R4||(R4=n.jsx(D4,{}))),n.jsxs(Qe,{...de,ref:e,onClick:ge,...Pe,...!Sm(Qe)&&{ownerState:{...Fe,...de.ownerState}},className:Hr(We.root,de.className,l,X&&"MuiInputBase-readOnly"),children:[ve,n.jsx(_j.Provider,{value:null,children:n.jsx(Ee,{"aria-invalid":ue.error,"aria-describedby":a,autoComplete:o,autoFocus:i,defaultValue:h,disabled:ue.disabled,id:C,onAnimationStart:ie,name:$,placeholder:D,readOnly:X,required:ue.required,rows:Q,value:$e,onKeyDown:P,onKeyUp:H,type:ae,...he,...!Sm(Ee)&&{as:Ce,ownerState:{...Fe,...he.ownerState}},ref:Ge,className:Hr(We.input,he.className,X&&"MuiInputBase-readOnly"),onBlur:re,onChange:pe,onFocus:V})}),b,se?se({...ue,startAdornment:ve}):null]})]})});function fue(s){return yn("MuiInput",s)}const sy={...Nm,...xn("MuiInput",["root","underline","input"])};function pue(s){return yn("MuiOutlinedInput",s)}const Fc={...Nm,...xn("MuiOutlinedInput",["root","notchedOutline","input"])};function hue(s){return yn("MuiFilledInput",s)}const ep={...Nm,...xn("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},mue=ws(n.jsx("path",{d:"M7 10l5 5 5-5z"})),gue=ws(n.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}));function yue(s){return yn("MuiAvatar",s)}xn("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const xue=s=>{const{classes:r,variant:e,colorDefault:t}=s;return vn({root:["root",e,t&&"colorDefault"],img:["img"],fallback:["fallback"]},yue,r)},vue=vr("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[r.root,r[e.variant],e.colorDefault&&r.colorDefault]}})(Pn(({theme:s})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:s.typography.fontFamily,fontSize:s.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(s.vars||s).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(s.vars||s).palette.background.default,...s.vars?{backgroundColor:s.vars.palette.Avatar.defaultBg}:{backgroundColor:s.palette.grey[400],...s.applyStyles("dark",{backgroundColor:s.palette.grey[600]})}}}]}))),bue=vr("img",{name:"MuiAvatar",slot:"Img"})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),wue=vr(gue,{name:"MuiAvatar",slot:"Fallback"})({width:"75%",height:"75%"});function jue({crossOrigin:s,referrerPolicy:r,src:e,srcSet:t}){const[a,o]=u.useState(!1);return u.useEffect(()=>{if(!e&&!t)return;o(!1);let i=!0;const l=new Image;return l.onload=()=>{i&&o("loaded")},l.onerror=()=>{i&&o("error")},l.crossOrigin=s,l.referrerPolicy=r,l.src=e,t&&(l.srcset=t),()=>{i=!1}},[s,r,e,t]),a}const pI=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiAvatar"}),{alt:a,children:o,className:i,component:l="div",slots:c={},slotProps:d={},imgProps:p,sizes:h,src:g,srcSet:y,variant:b="circular",...v}=t;let w=null;const C={...t,component:l,variant:b},k=jue({...p,...typeof d.img=="function"?d.img(C):d.img,src:g,srcSet:y}),N=g||y,O=N&&k!=="error";C.colorDefault=!O,delete C.ownerState;const R=xue(C),[L,B]=ts("root",{ref:e,className:Hr(R.root,i),elementType:vue,externalForwardedProps:{slots:c,slotProps:d,component:l,...v},ownerState:C}),[G,$]=ts("img",{className:R.img,elementType:bue,externalForwardedProps:{slots:c,slotProps:{img:{...p,...d.img}}},additionalProps:{alt:a,src:g,srcSet:y,sizes:h},ownerState:C}),[z,Y]=ts("fallback",{className:R.fallback,elementType:wue,externalForwardedProps:{slots:c,slotProps:d},shouldForwardComponentProp:!0,ownerState:C});return O?w=n.jsx(G,{...$}):o||o===0?w=o:N&&a?w=a[0]:w=n.jsx(z,{...Y}),n.jsx(L,{...B,children:w})}),Cue={entering:{opacity:1},entered:{opacity:1}},$N=u.forwardRef(function(r,e){const t=Fx(),a={enter:t.transitions.duration.enteringScreen,exit:t.transitions.duration.leavingScreen},{addEndListener:o,appear:i=!0,children:l,easing:c,in:d,onEnter:p,onEntered:h,onEntering:g,onExit:y,onExited:b,onExiting:v,style:w,timeout:C=a,TransitionComponent:k=rd,...N}=r,O=u.useRef(null),R=yo(O,Bx(l),e),L=P=>H=>{if(P){const D=O.current;H===void 0?P(D):P(D,H)}},B=L(g),G=L((P,H)=>{oI(P);const D=Sw({style:w,timeout:C,easing:c},{mode:"enter"});P.style.webkitTransition=t.transitions.create("opacity",D),P.style.transition=t.transitions.create("opacity",D),p&&p(P,H)}),$=L(h),z=L(v),Y=L(P=>{const H=Sw({style:w,timeout:C,easing:c},{mode:"exit"});P.style.webkitTransition=t.transitions.create("opacity",H),P.style.transition=t.transitions.create("opacity",H),y&&y(P)}),M=L(b),q=P=>{o&&o(O.current,P)};return n.jsx(k,{appear:i,in:d,nodeRef:O,onEnter:G,onEntered:$,onEntering:B,onExit:Y,onExited:M,onExiting:z,addEndListener:q,timeout:C,...N,children:(P,{ownerState:H,...D})=>u.cloneElement(l,{style:{opacity:0,visibility:P==="exited"&&!d?"hidden":void 0,...Cue[P],...w,...l.props.style},ref:R,...D})})});function Sue(s){return yn("MuiBackdrop",s)}xn("MuiBackdrop",["root","invisible"]);const Nue=s=>{const{classes:r,invisible:e}=s;return vn({root:["root",e&&"invisible"]},Sue,r)},kue=vr("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[r.root,e.invisible&&r.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),hI=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiBackdrop"}),{children:a,className:o,component:i="div",invisible:l=!1,open:c,components:d={},componentsProps:p={},slotProps:h={},slots:g={},TransitionComponent:y,transitionDuration:b,...v}=t,w={...t,component:i,invisible:l},C=Nue(w),k={transition:y,root:d.Root,...g},N={...p,...h},O={component:i,slots:k,slotProps:N},[R,L]=ts("root",{elementType:kue,externalForwardedProps:O,className:Hr(C.root,o),ownerState:w}),[B,G]=ts("transition",{elementType:$N,externalForwardedProps:O,ownerState:w});return n.jsx(B,{in:c,timeout:b,...v,...G,children:n.jsx(R,{"aria-hidden":!0,...L,ref:e,children:a})})}),_ue=xn("MuiBox",["root"]),Eue=QM(),cr=$le({themeId:dj,defaultTheme:Eue,defaultClassName:_ue.root,generateClassName:zM.generate}),Tue=ws(n.jsx("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})),Oue=vr(cf,{name:"MuiBreadcrumbCollapsed"})(Pn(({theme:s})=>({display:"flex",marginLeft:`calc(${s.spacing(1)} * 0.5)`,marginRight:`calc(${s.spacing(1)} * 0.5)`,...s.palette.mode==="light"?{backgroundColor:s.palette.grey[100],color:s.palette.grey[700]}:{backgroundColor:s.palette.grey[700],color:s.palette.grey[100]},borderRadius:2,"&:hover, &:focus":{...s.palette.mode==="light"?{backgroundColor:s.palette.grey[200]}:{backgroundColor:s.palette.grey[600]}},"&:active":{boxShadow:s.shadows[0],...s.palette.mode==="light"?{backgroundColor:ON(s.palette.grey[200],.12)}:{backgroundColor:ON(s.palette.grey[600],.12)}}}))),Pue=vr(Tue)({width:24,height:16});function Aue(s){const{slots:r={},slotProps:e={},...t}=s,a=s;return n.jsx("li",{children:n.jsx(Oue,{focusRipple:!0,...t,ownerState:a,children:n.jsx(Pue,{as:r.CollapsedIcon,ownerState:a,...e.collapsedIcon})})})}function Mue(s){return yn("MuiBreadcrumbs",s)}const Iue=xn("MuiBreadcrumbs",["root","ol","li","separator"]),Rue=s=>{const{classes:r}=s;return vn({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},Mue,r)},Due=vr(Bt,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(s,r)=>[{[`& .${Iue.li}`]:r.li},r.root]})({}),Lue=vr("ol",{name:"MuiBreadcrumbs",slot:"Ol"})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),Fue=vr("li",{name:"MuiBreadcrumbs",slot:"Separator"})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function Bue(s,r,e,t){return s.reduce((a,o,i)=>(i<s.length-1?a=a.concat(o,n.jsx(Fue,{"aria-hidden":!0,className:r,ownerState:t,children:e},`separator-${i}`)):a.push(o),a),[])}const mI=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiBreadcrumbs"}),{children:a,className:o,component:i="nav",slots:l={},slotProps:c={},expandText:d="Show path",itemsAfterCollapse:p=1,itemsBeforeCollapse:h=1,maxItems:g=8,separator:y="/",...b}=t,[v,w]=u.useState(!1),C={...t,component:i,expanded:v,expandText:d,itemsAfterCollapse:p,itemsBeforeCollapse:h,maxItems:g,separator:y},k=Rue(C),N=fI({elementType:l.CollapsedIcon,externalSlotProps:c.collapsedIcon,ownerState:C}),O=u.useRef(null),R=B=>{const G=()=>{w(!0);const $=O.current.querySelector("a[href],button,[tabindex]");$&&$.focus()};return h+p>=B.length?B:[...B.slice(0,h),n.jsx(Aue,{"aria-label":d,slots:{CollapsedIcon:l.CollapsedIcon},slotProps:{collapsedIcon:N},onClick:G},"ellipsis"),...B.slice(B.length-p,B.length)]},L=u.Children.toArray(a).filter(B=>u.isValidElement(B)).map((B,G)=>n.jsx("li",{className:k.li,children:B},`child-${G}`));return n.jsx(Due,{ref:e,component:i,color:"textSecondary",className:Hr(k.root,o),ownerState:C,...b,children:n.jsx(Lue,{className:k.ol,ref:O,ownerState:C,children:Bue(v||g&&L.length<=g?L:R(L),k.separator,y,C)})})});function zue(s){return yn("MuiButton",s)}const tp=xn("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),$ue=u.createContext({}),Uue=u.createContext(void 0),Vue=s=>{const{color:r,disableElevation:e,fullWidth:t,size:a,variant:o,loading:i,loadingPosition:l,classes:c}=s,d={root:["root",i&&"loading",o,`${o}${mr(r)}`,`size${mr(a)}`,`${o}Size${mr(a)}`,`color${mr(r)}`,e&&"disableElevation",t&&"fullWidth",i&&`loadingPosition${mr(l)}`],startIcon:["icon","startIcon",`iconSize${mr(a)}`],endIcon:["icon","endIcon",`iconSize${mr(a)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},p=vn(d,zue,c);return{...c,...p}},gI=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],Hue=vr(cf,{shouldForwardProp:s=>zo(s)||s==="classes",name:"MuiButton",slot:"Root",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[r.root,r[e.variant],r[`${e.variant}${mr(e.color)}`],r[`size${mr(e.size)}`],r[`${e.variant}Size${mr(e.size)}`],e.color==="inherit"&&r.colorInherit,e.disableElevation&&r.disableElevation,e.fullWidth&&r.fullWidth,e.loading&&r.loading]}})(Pn(({theme:s})=>{const r=s.palette.mode==="light"?s.palette.grey[300]:s.palette.grey[800],e=s.palette.mode==="light"?s.palette.grey.A100:s.palette.grey[700];return{...s.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(s.vars||s).shape.borderRadius,transition:s.transitions.create(["background-color","box-shadow","border-color","color"],{duration:s.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${tp.disabled}`]:{color:(s.vars||s).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(s.vars||s).shadows[2],"&:hover":{boxShadow:(s.vars||s).shadows[4],"@media (hover: none)":{boxShadow:(s.vars||s).shadows[2]}},"&:active":{boxShadow:(s.vars||s).shadows[8]},[`&.${tp.focusVisible}`]:{boxShadow:(s.vars||s).shadows[6]},[`&.${tp.disabled}`]:{color:(s.vars||s).palette.action.disabled,boxShadow:(s.vars||s).shadows[0],backgroundColor:(s.vars||s).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${tp.disabled}`]:{border:`1px solid ${(s.vars||s).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(s.palette).filter(ho()).map(([t])=>({props:{color:t},style:{"--variant-textColor":(s.vars||s).palette[t].main,"--variant-outlinedColor":(s.vars||s).palette[t].main,"--variant-outlinedBorder":s.alpha((s.vars||s).palette[t].main,.5),"--variant-containedColor":(s.vars||s).palette[t].contrastText,"--variant-containedBg":(s.vars||s).palette[t].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(s.vars||s).palette[t].dark,"--variant-textBg":s.alpha((s.vars||s).palette[t].main,(s.vars||s).palette.action.hoverOpacity),"--variant-outlinedBorder":(s.vars||s).palette[t].main,"--variant-outlinedBg":s.alpha((s.vars||s).palette[t].main,(s.vars||s).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":s.vars?s.vars.palette.Button.inheritContainedBg:r,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":s.vars?s.vars.palette.Button.inheritContainedHoverBg:e,"--variant-textBg":s.alpha((s.vars||s).palette.text.primary,(s.vars||s).palette.action.hoverOpacity),"--variant-outlinedBg":s.alpha((s.vars||s).palette.text.primary,(s.vars||s).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:s.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:s.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:s.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:s.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:s.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:s.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${tp.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${tp.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:s.transitions.create(["background-color","box-shadow","border-color"],{duration:s.transitions.duration.short}),[`&.${tp.loading}`]:{color:"transparent"}}}]}})),Wue=vr("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[r.startIcon,e.loading&&r.startIconLoadingStart,r[`iconSize${mr(e.size)}`]]}})(({theme:s})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:s.transitions.create(["opacity"],{duration:s.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...gI]})),que=vr("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[r.endIcon,e.loading&&r.endIconLoadingEnd,r[`iconSize${mr(e.size)}`]]}})(({theme:s})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:s.transitions.create(["opacity"],{duration:s.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...gI]})),Gue=vr("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:s})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(s.vars||s).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),L4=vr("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),Zn=u.forwardRef(function(r,e){const t=u.useContext($ue),a=u.useContext(Uue),o=ax(t,r),i=kn({props:o,name:"MuiButton"}),{children:l,color:c="primary",component:d="button",className:p,disabled:h=!1,disableElevation:g=!1,disableFocusRipple:y=!1,endIcon:b,focusVisibleClassName:v,fullWidth:w=!1,id:C,loading:k=null,loadingIndicator:N,loadingPosition:O="center",size:R="medium",startIcon:L,type:B,variant:G="text",...$}=i,z=Fm(C),Y=N??n.jsx(uI,{"aria-labelledby":z,color:"inherit",size:16}),M={...i,color:c,component:d,disabled:h,disableElevation:g,disableFocusRipple:y,fullWidth:w,loading:k,loadingIndicator:Y,loadingPosition:O,size:R,type:B,variant:G},q=Vue(M),P=(L||k&&O==="start")&&n.jsx(Wue,{className:q.startIcon,ownerState:M,children:L||n.jsx(L4,{className:q.loadingIconPlaceholder,ownerState:M})}),H=(b||k&&O==="end")&&n.jsx(que,{className:q.endIcon,ownerState:M,children:b||n.jsx(L4,{className:q.loadingIconPlaceholder,ownerState:M})}),D=a||"",X=typeof k=="boolean"?n.jsx("span",{className:q.loadingWrapper,style:{display:"contents"},children:k&&n.jsx(Gue,{className:q.loadingIndicator,ownerState:M,children:Y})}):null;return n.jsxs(Hue,{ownerState:M,className:Hr(t.className,q.root,p,D),component:d,disabled:h||k,focusRipple:!y,focusVisibleClassName:Hr(q.focusVisible,v),ref:e,type:B,id:k?z:C,...$,classes:q,children:[P,O!=="end"&&X,l,O==="end"&&X,H]})});function Kue(s){return yn("PrivateSwitchBase",s)}xn("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Yue=s=>{const{classes:r,checked:e,disabled:t,edge:a}=s,o={root:["root",e&&"checked",t&&"disabled",a&&`edge${mr(a)}`],input:["input"]};return vn(o,Kue,r)},Zue=vr(cf,{name:"MuiSwitchBase"})({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:s,ownerState:r})=>s==="start"&&r.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:s,ownerState:r})=>s==="end"&&r.size!=="small",style:{marginRight:-12}}]}),Xue=vr("input",{name:"MuiSwitchBase",shouldForwardProp:zo})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),kk=u.forwardRef(function(r,e){const{autoFocus:t,checked:a,checkedIcon:o,defaultChecked:i,disabled:l,disableFocusRipple:c=!1,edge:d=!1,icon:p,id:h,inputProps:g,inputRef:y,name:b,onBlur:v,onChange:w,onFocus:C,readOnly:k,required:N=!1,tabIndex:O,type:R,value:L,slots:B={},slotProps:G={},...$}=r,[z,Y]=jw({controlled:a,default:!!i,name:"SwitchBase",state:"checked"}),M=hc(),q=Se=>{C&&C(Se),M&&M.onFocus&&M.onFocus(Se)},P=Se=>{v&&v(Se),M&&M.onBlur&&M.onBlur(Se)},H=Se=>{if(Se.nativeEvent.defaultPrevented||k)return;const Pe=Se.target.checked;Y(Pe),w&&w(Se,Pe)};let D=l;M&&typeof D>"u"&&(D=M.disabled);const X=R==="checkbox"||R==="radio",se={...r,checked:z,disabled:D,disableFocusRipple:c,edge:d},Q=Yue(se),xe={slots:B,slotProps:{input:g,...G}},[K,Z]=ts("root",{ref:e,elementType:Zue,className:Q.root,shouldForwardComponentProp:!0,externalForwardedProps:{...xe,component:"span",...$},getSlotProps:Se=>({...Se,onFocus:Pe=>{Se.onFocus?.(Pe),q(Pe)},onBlur:Pe=>{Se.onBlur?.(Pe),P(Pe)}}),ownerState:se,additionalProps:{centerRipple:!0,focusRipple:!c,disabled:D,role:void 0,tabIndex:null}}),[ve,ae]=ts("input",{ref:y,elementType:Xue,className:Q.input,externalForwardedProps:xe,getSlotProps:Se=>({...Se,onChange:Pe=>{Se.onChange?.(Pe),H(Pe)}}),ownerState:se,additionalProps:{autoFocus:t,checked:a,defaultChecked:i,disabled:D,id:X?h:void 0,name:b,readOnly:k,required:N,tabIndex:O,type:R,...R==="checkbox"&&L===void 0?{}:{value:L}}});return n.jsxs(K,{...Z,children:[n.jsx(ve,{...ae}),z?o:p]})}),Que=ws(n.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})),Jue=ws(n.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})),efe=ws(n.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}));function tfe(s){return yn("MuiCheckbox",s)}const GC=xn("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),rfe=s=>{const{classes:r,indeterminate:e,color:t,size:a}=s,o={root:["root",e&&"indeterminate",`color${mr(t)}`,`size${mr(a)}`]},i=vn(o,tfe,r);return{...r,...i}},nfe=vr(kk,{shouldForwardProp:s=>zo(s)||s==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[r.root,e.indeterminate&&r.indeterminate,r[`size${mr(e.size)}`],e.color!=="default"&&r[`color${mr(e.color)}`]]}})(Pn(({theme:s})=>({color:(s.vars||s).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:s.alpha((s.vars||s).palette.action.active,(s.vars||s).palette.action.hoverOpacity)}}},...Object.entries(s.palette).filter(ho()).map(([r])=>({props:{color:r,disableRipple:!1},style:{"&:hover":{backgroundColor:s.alpha((s.vars||s).palette[r].main,(s.vars||s).palette.action.hoverOpacity)}}})),...Object.entries(s.palette).filter(ho()).map(([r])=>({props:{color:r},style:{[`&.${GC.checked}, &.${GC.indeterminate}`]:{color:(s.vars||s).palette[r].main},[`&.${GC.disabled}`]:{color:(s.vars||s).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),sfe=n.jsx(Jue,{}),afe=n.jsx(Que,{}),ofe=n.jsx(efe,{}),ife=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiCheckbox"}),{checkedIcon:a=sfe,color:o="primary",icon:i=afe,indeterminate:l=!1,indeterminateIcon:c=ofe,inputProps:d,size:p="medium",disableRipple:h=!1,className:g,slots:y={},slotProps:b={},...v}=t,w=l?c:i,C=l?c:a,k={...t,disableRipple:h,color:o,indeterminate:l,size:p},N=rfe(k),O=b.input??d,[R,L]=ts("root",{ref:e,elementType:nfe,className:Hr(N.root,g),shouldForwardComponentProp:!0,externalForwardedProps:{slots:y,slotProps:b,...v},ownerState:k,additionalProps:{type:"checkbox",icon:u.cloneElement(w,{fontSize:w.props.fontSize??p}),checkedIcon:u.cloneElement(C,{fontSize:C.props.fontSize??p}),disableRipple:h,slots:y,slotProps:{input:tI(typeof O=="function"?O(k):O,{"data-indeterminate":l})}}});return n.jsx(R,{...L,classes:N})});function yI(s=window){const r=s.document.documentElement.clientWidth;return s.innerWidth-r}function lfe(s){const r=uc(s);return r.body===s?nu(s).innerWidth>r.documentElement.clientWidth:s.scrollHeight>s.clientHeight}function Uy(s,r){r?s.setAttribute("aria-hidden","true"):s.removeAttribute("aria-hidden")}function F4(s){return parseFloat(nu(s).getComputedStyle(s).paddingRight)||0}function cfe(s){const e=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(s.tagName),t=s.tagName==="INPUT"&&s.getAttribute("type")==="hidden";return e||t}function B4(s,r,e,t,a){const o=[r,e,...t];[].forEach.call(s.children,i=>{const l=!o.includes(i),c=!cfe(i);l&&c&&Uy(i,a)})}function KC(s,r){let e=-1;return s.some((t,a)=>r(t)?(e=a,!0):!1),e}function dfe(s,r){const e=[],t=s.container;if(!r.disableScrollLock){if(lfe(t)){const i=yI(nu(t));e.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight=`${F4(t)+i}px`;const l=uc(t).querySelectorAll(".mui-fixed");[].forEach.call(l,c=>{e.push({value:c.style.paddingRight,property:"padding-right",el:c}),c.style.paddingRight=`${F4(c)+i}px`})}let o;if(t.parentNode instanceof DocumentFragment)o=uc(t).body;else{const i=t.parentElement,l=nu(t);o=i?.nodeName==="HTML"&&l.getComputedStyle(i).overflowY==="scroll"?i:t}e.push({value:o.style.overflow,property:"overflow",el:o},{value:o.style.overflowX,property:"overflow-x",el:o},{value:o.style.overflowY,property:"overflow-y",el:o}),o.style.overflow="hidden"}return()=>{e.forEach(({value:o,el:i,property:l})=>{o?i.style.setProperty(l,o):i.style.removeProperty(l)})}}function ufe(s){const r=[];return[].forEach.call(s.children,e=>{e.getAttribute("aria-hidden")==="true"&&r.push(e)}),r}class ffe{constructor(){this.modals=[],this.containers=[]}add(r,e){let t=this.modals.indexOf(r);if(t!==-1)return t;t=this.modals.length,this.modals.push(r),r.modalRef&&Uy(r.modalRef,!1);const a=ufe(e);B4(e,r.mount,r.modalRef,a,!0);const o=KC(this.containers,i=>i.container===e);return o!==-1?(this.containers[o].modals.push(r),t):(this.containers.push({modals:[r],container:e,restore:null,hiddenSiblings:a}),t)}mount(r,e){const t=KC(this.containers,o=>o.modals.includes(r)),a=this.containers[t];a.restore||(a.restore=dfe(a,e))}remove(r,e=!0){const t=this.modals.indexOf(r);if(t===-1)return t;const a=KC(this.containers,i=>i.modals.includes(r)),o=this.containers[a];if(o.modals.splice(o.modals.indexOf(r),1),this.modals.splice(t,1),o.modals.length===0)o.restore&&o.restore(),r.modalRef&&Uy(r.modalRef,e),B4(o.container,r.mount,r.modalRef,o.hiddenSiblings,!1),this.containers.splice(a,1);else{const i=o.modals[o.modals.length-1];i.modalRef&&Uy(i.modalRef,!1)}return t}isTopModal(r){return this.modals.length>0&&this.modals[this.modals.length-1]===r}}function Sy(s){let r=s.activeElement;for(;r?.shadowRoot?.activeElement!=null;)r=r.shadowRoot.activeElement;return r}const pfe=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function hfe(s){const r=parseInt(s.getAttribute("tabindex")||"",10);return Number.isNaN(r)?s.contentEditable==="true"||(s.nodeName==="AUDIO"||s.nodeName==="VIDEO"||s.nodeName==="DETAILS")&&s.getAttribute("tabindex")===null?0:s.tabIndex:r}function mfe(s){if(s.tagName!=="INPUT"||s.type!=="radio"||!s.name)return!1;const r=t=>s.ownerDocument.querySelector(`input[type="radio"]${t}`);let e=r(`[name="${s.name}"]:checked`);return e||(e=r(`[name="${s.name}"]`)),e!==s}function gfe(s){return!(s.disabled||s.tagName==="INPUT"&&s.type==="hidden"||mfe(s))}function yfe(s){const r=[],e=[];return Array.from(s.querySelectorAll(pfe)).forEach((t,a)=>{const o=hfe(t);o===-1||!gfe(t)||(o===0?r.push(t):e.push({documentOrder:a,tabIndex:o,node:t}))}),e.sort((t,a)=>t.tabIndex===a.tabIndex?t.documentOrder-a.documentOrder:t.tabIndex-a.tabIndex).map(t=>t.node).concat(r)}function xfe(){return!0}function vfe(s){const{children:r,disableAutoFocus:e=!1,disableEnforceFocus:t=!1,disableRestoreFocus:a=!1,getTabbable:o=yfe,isEnabled:i=xfe,open:l}=s,c=u.useRef(!1),d=u.useRef(null),p=u.useRef(null),h=u.useRef(null),g=u.useRef(null),y=u.useRef(!1),b=u.useRef(null),v=yo(Bx(r),b),w=u.useRef(null);u.useEffect(()=>{!l||!b.current||(y.current=!e)},[e,l]),u.useEffect(()=>{if(!l||!b.current)return;const N=uc(b.current),O=Sy(N);return b.current.contains(O)||(b.current.hasAttribute("tabIndex")||b.current.setAttribute("tabIndex","-1"),y.current&&b.current.focus()),()=>{a||(h.current&&h.current.focus&&(c.current=!0,h.current.focus()),h.current=null)}},[l]),u.useEffect(()=>{if(!l||!b.current)return;const N=uc(b.current),O=B=>{if(w.current=B,t||!i()||B.key!=="Tab")return;Sy(N)===b.current&&B.shiftKey&&(c.current=!0,p.current&&p.current.focus())},R=()=>{const B=b.current;if(B===null)return;const G=Sy(N);if(!N.hasFocus()||!i()||c.current){c.current=!1;return}if(B.contains(G)||t&&G!==d.current&&G!==p.current)return;if(G!==g.current)g.current=null;else if(g.current!==null)return;if(!y.current)return;let $=[];if((G===d.current||G===p.current)&&($=o(b.current)),$.length>0){const z=!!(w.current?.shiftKey&&w.current?.key==="Tab"),Y=$[0],M=$[$.length-1];typeof Y!="string"&&typeof M!="string"&&(z?M.focus():Y.focus())}else B.focus()};N.addEventListener("focusin",R),N.addEventListener("keydown",O,!0);const L=setInterval(()=>{const B=Sy(N);B&&B.tagName==="BODY"&&R()},50);return()=>{clearInterval(L),N.removeEventListener("focusin",R),N.removeEventListener("keydown",O,!0)}},[e,t,a,i,l,o]);const C=N=>{h.current===null&&(h.current=N.relatedTarget),y.current=!0,g.current=N.target;const O=r.props.onFocus;O&&O(N)},k=N=>{h.current===null&&(h.current=N.relatedTarget),y.current=!0};return n.jsxs(u.Fragment,{children:[n.jsx("div",{tabIndex:l?0:-1,onFocus:k,ref:d,"data-testid":"sentinelStart"}),u.cloneElement(r,{ref:v,onFocus:C}),n.jsx("div",{tabIndex:l?0:-1,onFocus:k,ref:p,"data-testid":"sentinelEnd"})]})}function bfe(s){return typeof s=="function"?s():s}function wfe(s){return s?s.props.hasOwnProperty("in"):!1}const z4=()=>{},bv=new ffe;function jfe(s){const{container:r,disableEscapeKeyDown:e=!1,disableScrollLock:t=!1,closeAfterTransition:a=!1,onTransitionEnter:o,onTransitionExited:i,children:l,onClose:c,open:d,rootRef:p}=s,h=u.useRef({}),g=u.useRef(null),y=u.useRef(null),b=yo(y,p),[v,w]=u.useState(!d),C=wfe(l);let k=!0;(s["aria-hidden"]==="false"||s["aria-hidden"]===!1)&&(k=!1);const N=()=>uc(g.current),O=()=>(h.current.modalRef=y.current,h.current.mount=g.current,h.current),R=()=>{bv.mount(O(),{disableScrollLock:t}),y.current&&(y.current.scrollTop=0)},L=jp(()=>{const H=bfe(r)||N().body;bv.add(O(),H),y.current&&R()}),B=()=>bv.isTopModal(O()),G=jp(H=>{g.current=H,H&&(d&&B()?R():y.current&&Uy(y.current,k))}),$=u.useCallback(()=>{bv.remove(O(),k)},[k]);u.useEffect(()=>()=>{$()},[$]),u.useEffect(()=>{d?L():(!C||!a)&&$()},[d,$,C,a,L]);const z=H=>D=>{H.onKeyDown?.(D),!(D.key!=="Escape"||D.which===229||!B())&&(e||(D.stopPropagation(),c&&c(D,"escapeKeyDown")))},Y=H=>D=>{H.onClick?.(D),D.target===D.currentTarget&&c&&c(D,"backdropClick")};return{getRootProps:(H={})=>{const D=cI(s);delete D.onTransitionEnter,delete D.onTransitionExited;const X={...D,...H};return{role:"presentation",...X,onKeyDown:z(X),ref:b}},getBackdropProps:(H={})=>{const D=H;return{"aria-hidden":!0,...D,onClick:Y(D),open:d}},getTransitionProps:()=>{const H=()=>{w(!1),o&&o()},D=()=>{w(!0),i&&i(),a&&$()};return{onEnter:IN(H,l?.props.onEnter??z4),onExited:IN(D,l?.props.onExited??z4)}},rootRef:b,portalRef:G,isTopModal:B,exited:v,hasTransition:C}}function Cfe(s){return yn("MuiModal",s)}xn("MuiModal",["root","hidden","backdrop"]);const Sfe=s=>{const{open:r,exited:e,classes:t}=s;return vn({root:["root",!r&&e&&"hidden"],backdrop:["backdrop"]},Cfe,t)},Nfe=vr("div",{name:"MuiModal",slot:"Root",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[r.root,!e.open&&e.exited&&r.hidden]}})(Pn(({theme:s})=>({position:"fixed",zIndex:(s.vars||s).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:r})=>!r.open&&r.exited,style:{visibility:"hidden"}}]}))),kfe=vr(hI,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),xI=u.forwardRef(function(r,e){const t=kn({name:"MuiModal",props:r}),{BackdropComponent:a=kfe,BackdropProps:o,classes:i,className:l,closeAfterTransition:c=!1,children:d,container:p,component:h,components:g={},componentsProps:y={},disableAutoFocus:b=!1,disableEnforceFocus:v=!1,disableEscapeKeyDown:w=!1,disablePortal:C=!1,disableRestoreFocus:k=!1,disableScrollLock:N=!1,hideBackdrop:O=!1,keepMounted:R=!1,onClose:L,onTransitionEnter:B,onTransitionExited:G,open:$,slotProps:z={},slots:Y={},theme:M,...q}=t,P={...t,closeAfterTransition:c,disableAutoFocus:b,disableEnforceFocus:v,disableEscapeKeyDown:w,disablePortal:C,disableRestoreFocus:k,disableScrollLock:N,hideBackdrop:O,keepMounted:R},{getRootProps:H,getBackdropProps:D,getTransitionProps:X,portalRef:se,isTopModal:Q,exited:xe,hasTransition:K}=jfe({...P,rootRef:e}),Z={...P,exited:xe},ve=Sfe(Z),ae={};if(d.props.tabIndex===void 0&&(ae.tabIndex="-1"),K){const{onEnter:ze,onExited:Ge}=X();ae.onEnter=ze,ae.onExited=Ge}const Se={slots:{root:g.Root,backdrop:g.Backdrop,...Y},slotProps:{...y,...z}},[Pe,$e]=ts("root",{ref:e,elementType:Nfe,externalForwardedProps:{...Se,...q,component:h},getSlotProps:H,ownerState:Z,className:Hr(l,ve?.root,!Z.open&&Z.exited&&ve?.hidden)}),[we,Ae]=ts("backdrop",{ref:o?.ref,elementType:a,externalForwardedProps:Se,shouldForwardComponentProp:!0,additionalProps:o,getSlotProps:ze=>D({...ze,onClick:Ge=>{ze?.onClick&&ze.onClick(Ge)}}),className:Hr(o?.className,ve?.backdrop),ownerState:Z});return!R&&!$&&(!K||xe)?null:n.jsx(eue,{ref:se,container:p,disablePortal:C,children:n.jsxs(Pe,{...$e,children:[!O&&a?n.jsx(we,{...Ae}):null,n.jsx(vfe,{disableEnforceFocus:v,disableAutoFocus:b,disableRestoreFocus:k,isEnabled:Q,open:$,children:u.cloneElement(d,ae)})]})})});function _fe(s){return yn("MuiDialog",s)}const YC=xn("MuiDialog",["root","backdrop","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),vI=u.createContext({}),Efe=vr(hI,{name:"MuiDialog",slot:"Backdrop"})({zIndex:-1}),Tfe=s=>{const{classes:r,scroll:e,maxWidth:t,fullWidth:a,fullScreen:o}=s,i={root:["root"],backdrop:["backdrop"],container:["container",`scroll${mr(e)}`],paper:["paper",`paperScroll${mr(e)}`,`paperWidth${mr(String(t))}`,a&&"paperFullWidth",o&&"paperFullScreen"]};return vn(i,_fe,r)},Ofe=vr(xI,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),Pfe=vr("div",{name:"MuiDialog",slot:"Container",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[r.container,r[`scroll${mr(e.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),Afe=vr(Ms,{name:"MuiDialog",slot:"Paper",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[r.paper,r[`scrollPaper${mr(e.scroll)}`],r[`paperWidth${mr(String(e.maxWidth))}`],e.fullWidth&&r.paperFullWidth,e.fullScreen&&r.paperFullScreen]}})(Pn(({theme:s})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:r})=>!r.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:s.breakpoints.unit==="px"?Math.max(s.breakpoints.values.xs,444):`max(${s.breakpoints.values.xs}${s.breakpoints.unit}, 444px)`,[`&.${YC.paperScrollBody}`]:{[s.breakpoints.down(Math.max(s.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(s.breakpoints.values).filter(r=>r!=="xs").map(r=>({props:{maxWidth:r},style:{maxWidth:`${s.breakpoints.values[r]}${s.breakpoints.unit}`,[`&.${YC.paperScrollBody}`]:{[s.breakpoints.down(s.breakpoints.values[r]+64)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:r})=>r.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:r})=>r.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${YC.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),$c=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiDialog"}),a=Fx(),o={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{"aria-describedby":i,"aria-labelledby":l,"aria-modal":c=!0,BackdropComponent:d,BackdropProps:p,children:h,className:g,disableEscapeKeyDown:y=!1,fullScreen:b=!1,fullWidth:v=!1,maxWidth:w="sm",onClick:C,onClose:k,open:N,PaperComponent:O=Ms,PaperProps:R={},scroll:L="paper",slots:B={},slotProps:G={},TransitionComponent:$=$N,transitionDuration:z=o,TransitionProps:Y,...M}=t,q={...t,disableEscapeKeyDown:y,fullScreen:b,fullWidth:v,maxWidth:w,scroll:L},P=Tfe(q),H=u.useRef(),D=ht=>{H.current=ht.target===ht.currentTarget},X=ht=>{C&&C(ht),H.current&&(H.current=null,k&&k(ht,"backdropClick"))},se=Fm(l),Q=u.useMemo(()=>({titleId:se}),[se]),xe={transition:$,...B},K={transition:Y,paper:R,backdrop:p,...G},Z={slots:xe,slotProps:K},[ve,ae]=ts("root",{elementType:Ofe,shouldForwardComponentProp:!0,externalForwardedProps:Z,ownerState:q,className:Hr(P.root,g),ref:e}),[Se,Pe]=ts("backdrop",{elementType:Efe,shouldForwardComponentProp:!0,externalForwardedProps:Z,ownerState:q,className:P.backdrop}),[$e,we]=ts("paper",{elementType:Afe,shouldForwardComponentProp:!0,externalForwardedProps:Z,ownerState:q,className:Hr(P.paper,R.className)}),[Ae,ze]=ts("container",{elementType:Pfe,externalForwardedProps:Z,ownerState:q,className:P.container}),[Ge,Ue]=ts("transition",{elementType:$N,externalForwardedProps:Z,ownerState:q,additionalProps:{appear:!0,in:N,timeout:z,role:"presentation"}});return n.jsx(ve,{closeAfterTransition:!0,slots:{backdrop:Se},slotProps:{backdrop:{transitionDuration:z,as:d,...Pe}},disableEscapeKeyDown:y,onClose:k,open:N,onClick:X,...ae,...M,children:n.jsx(Ge,{...Ue,children:n.jsx(Ae,{onMouseDown:D,...ze,children:n.jsx($e,{as:O,elevation:24,role:"dialog","aria-describedby":i,"aria-labelledby":se,"aria-modal":c,...we,children:n.jsx(vI.Provider,{value:Q,children:h})})})})})});function Mfe(s){return yn("MuiDialogActions",s)}xn("MuiDialogActions",["root","spacing"]);const Ife=s=>{const{classes:r,disableSpacing:e}=s;return vn({root:["root",!e&&"spacing"]},Mfe,r)},Rfe=vr("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[r.root,!e.disableSpacing&&r.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:s})=>!s.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),Fd=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiDialogActions"}),{className:a,disableSpacing:o=!1,...i}=t,l={...t,disableSpacing:o},c=Ife(l);return n.jsx(Rfe,{className:Hr(c.root,a),ownerState:l,ref:e,...i})});function Dfe(s){return yn("MuiDialogContent",s)}xn("MuiDialogContent",["root","dividers"]);function Lfe(s){return yn("MuiDialogTitle",s)}const Ffe=xn("MuiDialogTitle",["root"]),Bfe=s=>{const{classes:r,dividers:e}=s;return vn({root:["root",e&&"dividers"]},Dfe,r)},zfe=vr("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[r.root,e.dividers&&r.dividers]}})(Pn(({theme:s})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:r})=>r.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(s.vars||s).palette.divider}`,borderBottom:`1px solid ${(s.vars||s).palette.divider}`}},{props:({ownerState:r})=>!r.dividers,style:{[`.${Ffe.root} + &`]:{paddingTop:0}}}]}))),Uc=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiDialogContent"}),{className:a,dividers:o=!1,...i}=t,l={...t,dividers:o},c=Bfe(l);return n.jsx(zfe,{className:Hr(c.root,a),ownerState:l,ref:e,...i})}),$fe=s=>{const{classes:r}=s;return vn({root:["root"]},Lfe,r)},Ufe=vr(Bt,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),Vc=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiDialogTitle"}),{className:a,id:o,...i}=t,l=t,c=$fe(l),{titleId:d=o}=u.useContext(vI);return n.jsx(Ufe,{component:"h2",className:Hr(c.root,a),ownerState:l,ref:e,variant:"h6",id:o??d,...i})});function Vfe(s){return yn("MuiDivider",s)}const $4=xn("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),Hfe=s=>{const{absolute:r,children:e,classes:t,flexItem:a,light:o,orientation:i,textAlign:l,variant:c}=s;return vn({root:["root",r&&"absolute",c,o&&"light",i==="vertical"&&"vertical",a&&"flexItem",e&&"withChildren",e&&i==="vertical"&&"withChildrenVertical",l==="right"&&i!=="vertical"&&"textAlignRight",l==="left"&&i!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",i==="vertical"&&"wrapperVertical"]},Vfe,t)},Wfe=vr("div",{name:"MuiDivider",slot:"Root",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[r.root,e.absolute&&r.absolute,r[e.variant],e.light&&r.light,e.orientation==="vertical"&&r.vertical,e.flexItem&&r.flexItem,e.children&&r.withChildren,e.children&&e.orientation==="vertical"&&r.withChildrenVertical,e.textAlign==="right"&&e.orientation!=="vertical"&&r.textAlignRight,e.textAlign==="left"&&e.orientation!=="vertical"&&r.textAlignLeft]}})(Pn(({theme:s})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(s.vars||s).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:s.alpha((s.vars||s).palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:s.spacing(2),marginRight:s.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:s.spacing(1),marginBottom:s.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:r})=>!!r.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:r})=>r.children&&r.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(s.vars||s).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:r})=>r.orientation==="vertical"&&r.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(s.vars||s).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:r})=>r.textAlign==="right"&&r.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:r})=>r.textAlign==="left"&&r.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),qfe=vr("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[r.wrapper,e.orientation==="vertical"&&r.wrapperVertical]}})(Pn(({theme:s})=>({display:"inline-block",paddingLeft:`calc(${s.spacing(1)} * 1.2)`,paddingRight:`calc(${s.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${s.spacing(1)} * 1.2)`,paddingBottom:`calc(${s.spacing(1)} * 1.2)`}}]}))),Ew=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiDivider"}),{absolute:a=!1,children:o,className:i,orientation:l="horizontal",component:c=o||l==="vertical"?"div":"hr",flexItem:d=!1,light:p=!1,role:h=c!=="hr"?"separator":void 0,textAlign:g="center",variant:y="fullWidth",...b}=t,v={...t,absolute:a,component:c,flexItem:d,light:p,orientation:l,role:h,textAlign:g,variant:y},w=Hfe(v);return n.jsx(Wfe,{as:c,className:Hr(w.root,i),role:h,ref:e,ownerState:v,"aria-orientation":h==="separator"&&(c!=="hr"||l==="vertical")?l:void 0,...b,children:o?n.jsx(qfe,{className:w.wrapper,ownerState:v,children:o}):null})});Ew&&(Ew.muiSkipListHighlight=!0);const Gfe=s=>{const{classes:r,disableUnderline:e,startAdornment:t,endAdornment:a,size:o,hiddenLabel:i,multiline:l}=s,c={root:["root",!e&&"underline",t&&"adornedStart",a&&"adornedEnd",o==="small"&&`size${mr(o)}`,i&&"hiddenLabel",l&&"multiline"],input:["input"]},d=vn(c,hue,r);return{...r,...d}},Kfe=vr(Oj,{shouldForwardProp:s=>zo(s)||s==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[...Ej(s,r),!e.disableUnderline&&r.underline]}})(Pn(({theme:s})=>{const r=s.palette.mode==="light",e=r?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",t=r?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",a=r?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",o=r?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:s.vars?s.vars.palette.FilledInput.bg:t,borderTopLeftRadius:(s.vars||s).shape.borderRadius,borderTopRightRadius:(s.vars||s).shape.borderRadius,transition:s.transitions.create("background-color",{duration:s.transitions.duration.shorter,easing:s.transitions.easing.easeOut}),"&:hover":{backgroundColor:s.vars?s.vars.palette.FilledInput.hoverBg:a,"@media (hover: none)":{backgroundColor:s.vars?s.vars.palette.FilledInput.bg:t}},[`&.${ep.focused}`]:{backgroundColor:s.vars?s.vars.palette.FilledInput.bg:t},[`&.${ep.disabled}`]:{backgroundColor:s.vars?s.vars.palette.FilledInput.disabledBg:o},variants:[{props:({ownerState:i})=>!i.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:s.transitions.create("transform",{duration:s.transitions.duration.shorter,easing:s.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${ep.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${ep.error}`]:{"&::before, &::after":{borderBottomColor:(s.vars||s).palette.error.main}},"&::before":{borderBottom:`1px solid ${s.vars?s.alpha(s.vars.palette.common.onBackground,s.vars.opacity.inputUnderline):e}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:s.transitions.create("border-bottom-color",{duration:s.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${ep.disabled}, .${ep.error}):before`]:{borderBottom:`1px solid ${(s.vars||s).palette.text.primary}`},[`&.${ep.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(s.palette).filter(ho()).map(([i])=>({props:{disableUnderline:!1,color:i},style:{"&::after":{borderBottom:`2px solid ${(s.vars||s).palette[i]?.main}`}}})),{props:({ownerState:i})=>i.startAdornment,style:{paddingLeft:12}},{props:({ownerState:i})=>i.endAdornment,style:{paddingRight:12}},{props:({ownerState:i})=>i.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:i,size:l})=>i.multiline&&l==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:i})=>i.multiline&&i.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:i})=>i.multiline&&i.hiddenLabel&&i.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),Yfe=vr(Pj,{name:"MuiFilledInput",slot:"Input",overridesResolver:Tj})(Pn(({theme:s})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!s.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:s.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:s.palette.mode==="light"?null:"#fff",caretColor:s.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...s.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[s.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:r})=>r.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:r})=>r.startAdornment,style:{paddingLeft:0}},{props:({ownerState:r})=>r.endAdornment,style:{paddingRight:0}},{props:({ownerState:r})=>r.hiddenLabel&&r.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:r})=>r.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),_k=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiFilledInput"}),{disableUnderline:a=!1,components:o={},componentsProps:i,fullWidth:l=!1,hiddenLabel:c,inputComponent:d="input",multiline:p=!1,slotProps:h,slots:g={},type:y="text",...b}=t,v={...t,disableUnderline:a,fullWidth:l,inputComponent:d,multiline:p,type:y},w=Gfe(t),C={root:{ownerState:v},input:{ownerState:v}},k=h??i?_o(C,h??i):C,N=g.root??o.Root??Kfe,O=g.input??o.Input??Yfe;return n.jsx(Nk,{slots:{root:N,input:O},slotProps:k,fullWidth:l,inputComponent:d,multiline:p,ref:e,type:y,...b,classes:w})});_k.muiName="Input";function Zfe(s){return yn("MuiFormControl",s)}xn("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const Xfe=s=>{const{classes:r,margin:e,fullWidth:t}=s,a={root:["root",e!=="none"&&`margin${mr(e)}`,t&&"fullWidth"]};return vn(a,Zfe,r)},Qfe=vr("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[r.root,r[`margin${mr(e.margin)}`],e.fullWidth&&r.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),tf=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiFormControl"}),{children:a,className:o,color:i="primary",component:l="div",disabled:c=!1,error:d=!1,focused:p,fullWidth:h=!1,hiddenLabel:g=!1,margin:y="none",required:b=!1,size:v="medium",variant:w="outlined",...C}=t,k={...t,color:i,component:l,disabled:c,error:d,fullWidth:h,hiddenLabel:g,margin:y,required:b,size:v,variant:w},N=Xfe(k),[O,R]=u.useState(()=>{let H=!1;return a&&u.Children.forEach(a,D=>{if(!Qv(D,["Input","Select"]))return;const X=Qv(D,["Select"])?D.props.input:D;X&&cue(X.props)&&(H=!0)}),H}),[L,B]=u.useState(()=>{let H=!1;return a&&u.Children.forEach(a,D=>{Qv(D,["Input","Select"])&&(_w(D.props,!0)||_w(D.props.inputProps,!0))&&(H=!0)}),H}),[G,$]=u.useState(!1);c&&G&&$(!1);const z=p!==void 0&&!c?p:G;let Y;u.useRef(!1);const M=u.useCallback(()=>{B(!0)},[]),q=u.useCallback(()=>{B(!1)},[]),P=u.useMemo(()=>({adornedStart:O,setAdornedStart:R,color:i,disabled:c,error:d,filled:L,focused:z,fullWidth:h,hiddenLabel:g,size:v,onBlur:()=>{$(!1)},onFocus:()=>{$(!0)},onEmpty:q,onFilled:M,registerEffect:Y,required:b,variant:w}),[O,i,c,d,L,z,h,g,Y,q,M,b,v,w]);return n.jsx(_j.Provider,{value:P,children:n.jsx(Qfe,{as:l,ownerState:k,className:Hr(N.root,o),ref:e,...C,children:a})})});function Jfe(s){return yn("MuiFormControlLabel",s)}const Ny=xn("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),epe=s=>{const{classes:r,disabled:e,labelPlacement:t,error:a,required:o}=s,i={root:["root",e&&"disabled",`labelPlacement${mr(t)}`,a&&"error",o&&"required"],label:["label",e&&"disabled"],asterisk:["asterisk",a&&"error"]};return vn(i,Jfe,r)},tpe=vr("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[{[`& .${Ny.label}`]:r.label},r.root,r[`labelPlacement${mr(e.labelPlacement)}`]]}})(Pn(({theme:s})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Ny.disabled}`]:{cursor:"default"},[`& .${Ny.label}`]:{[`&.${Ny.disabled}`]:{color:(s.vars||s).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:r})=>r==="start"||r==="top"||r==="bottom",style:{marginLeft:16}}]}))),rpe=vr("span",{name:"MuiFormControlLabel",slot:"Asterisk"})(Pn(({theme:s})=>({[`&.${Ny.error}`]:{color:(s.vars||s).palette.error.main}}))),Id=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiFormControlLabel"}),{checked:a,className:o,componentsProps:i={},control:l,disabled:c,disableTypography:d,inputRef:p,label:h,labelPlacement:g="end",name:y,onChange:b,required:v,slots:w={},slotProps:C={},value:k,...N}=t,O=hc(),R=c??l.props.disabled??O?.disabled,L=v??l.props.required,B={disabled:R,required:L};["checked","name","onChange","value","inputRef"].forEach(H=>{typeof l.props[H]>"u"&&typeof t[H]<"u"&&(B[H]=t[H])});const G=pf({props:t,muiFormControl:O,states:["error"]}),$={...t,disabled:R,labelPlacement:g,required:L,error:G.error},z=epe($),Y={slots:w,slotProps:{...i,...C}},[M,q]=ts("typography",{elementType:Bt,externalForwardedProps:Y,ownerState:$});let P=h;return P!=null&&P.type!==Bt&&!d&&(P=n.jsx(M,{component:"span",...q,className:Hr(z.label,q?.className),children:P})),n.jsxs(tpe,{className:Hr(z.root,o),ownerState:$,ref:e,...N,children:[u.cloneElement(l,B),L?n.jsxs("div",{children:[P,n.jsxs(rpe,{ownerState:$,"aria-hidden":!0,className:z.asterisk,children:["","*"]})]}):P]})});function npe(s){return yn("MuiFormGroup",s)}xn("MuiFormGroup",["root","row","error"]);const spe=s=>{const{classes:r,row:e,error:t}=s;return vn({root:["root",e&&"row",t&&"error"]},npe,r)},ape=vr("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[r.root,e.row&&r.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),ope=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiFormGroup"}),{className:a,row:o=!1,...i}=t,l=hc(),c=pf({props:t,muiFormControl:l,states:["error"]}),d={...t,row:o,error:c.error},p=spe(d);return n.jsx(ape,{className:Hr(p.root,a),ownerState:d,ref:e,...i})});function ipe(s){return yn("MuiFormHelperText",s)}const U4=xn("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var V4;const lpe=s=>{const{classes:r,contained:e,size:t,disabled:a,error:o,filled:i,focused:l,required:c}=s,d={root:["root",a&&"disabled",o&&"error",t&&`size${mr(t)}`,e&&"contained",l&&"focused",i&&"filled",c&&"required"]};return vn(d,ipe,r)},cpe=vr("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[r.root,e.size&&r[`size${mr(e.size)}`],e.contained&&r.contained,e.filled&&r.filled]}})(Pn(({theme:s})=>({color:(s.vars||s).palette.text.secondary,...s.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${U4.disabled}`]:{color:(s.vars||s).palette.text.disabled},[`&.${U4.error}`]:{color:(s.vars||s).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:r})=>r.contained,style:{marginLeft:14,marginRight:14}}]}))),dpe=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiFormHelperText"}),{children:a,className:o,component:i="p",disabled:l,error:c,filled:d,focused:p,margin:h,required:g,variant:y,...b}=t,v=hc(),w=pf({props:t,muiFormControl:v,states:["variant","size","disabled","error","filled","focused","required"]}),C={...t,component:i,contained:w.variant==="filled"||w.variant==="outlined",variant:w.variant,size:w.size,disabled:w.disabled,error:w.error,filled:w.filled,focused:w.focused,required:w.required};delete C.ownerState;const k=lpe(C);return n.jsx(cpe,{as:i,className:Hr(k.root,o),ref:e,...b,ownerState:C,children:a===" "?V4||(V4=n.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):a})});function upe(s){return yn("MuiFormLabel",s)}const Vy=xn("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),fpe=s=>{const{classes:r,color:e,focused:t,disabled:a,error:o,filled:i,required:l}=s,c={root:["root",`color${mr(e)}`,a&&"disabled",o&&"error",i&&"filled",t&&"focused",l&&"required"],asterisk:["asterisk",o&&"error"]};return vn(c,upe,r)},ppe=vr("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[r.root,e.color==="secondary"&&r.colorSecondary,e.filled&&r.filled]}})(Pn(({theme:s})=>({color:(s.vars||s).palette.text.secondary,...s.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(s.palette).filter(ho()).map(([r])=>({props:{color:r},style:{[`&.${Vy.focused}`]:{color:(s.vars||s).palette[r].main}}})),{props:{},style:{[`&.${Vy.disabled}`]:{color:(s.vars||s).palette.text.disabled},[`&.${Vy.error}`]:{color:(s.vars||s).palette.error.main}}}]}))),hpe=vr("span",{name:"MuiFormLabel",slot:"Asterisk"})(Pn(({theme:s})=>({[`&.${Vy.error}`]:{color:(s.vars||s).palette.error.main}}))),mpe=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiFormLabel"}),{children:a,className:o,color:i,component:l="label",disabled:c,error:d,filled:p,focused:h,required:g,...y}=t,b=hc(),v=pf({props:t,muiFormControl:b,states:["color","required","focused","disabled","error","filled"]}),w={...t,color:v.color||"primary",component:l,disabled:v.disabled,error:v.error,filled:v.filled,focused:v.focused,required:v.required},C=fpe(w);return n.jsxs(ppe,{as:l,ownerState:w,className:Hr(C.root,o),ref:e,...y,children:[a,v.required&&n.jsxs(hpe,{ownerState:w,"aria-hidden":!0,className:C.asterisk,children:["","*"]})]})});function UN(s){return`scale(${s}, ${s**2})`}const gpe={entering:{opacity:1,transform:UN(1)},entered:{opacity:1,transform:"none"}},ZC=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),VN=u.forwardRef(function(r,e){const{addEndListener:t,appear:a=!0,children:o,easing:i,in:l,onEnter:c,onEntered:d,onEntering:p,onExit:h,onExited:g,onExiting:y,style:b,timeout:v="auto",TransitionComponent:w=rd,...C}=r,k=aI(),N=u.useRef(),O=Fx(),R=u.useRef(null),L=yo(R,Bx(o),e),B=H=>D=>{if(H){const X=R.current;D===void 0?H(X):H(X,D)}},G=B(p),$=B((H,D)=>{oI(H);const{duration:X,delay:se,easing:Q}=Sw({style:b,timeout:v,easing:i},{mode:"enter"});let xe;v==="auto"?(xe=O.transitions.getAutoHeightDuration(H.clientHeight),N.current=xe):xe=X,H.style.transition=[O.transitions.create("opacity",{duration:xe,delay:se}),O.transitions.create("transform",{duration:ZC?xe:xe*.666,delay:se,easing:Q})].join(","),c&&c(H,D)}),z=B(d),Y=B(y),M=B(H=>{const{duration:D,delay:X,easing:se}=Sw({style:b,timeout:v,easing:i},{mode:"exit"});let Q;v==="auto"?(Q=O.transitions.getAutoHeightDuration(H.clientHeight),N.current=Q):Q=D,H.style.transition=[O.transitions.create("opacity",{duration:Q,delay:X}),O.transitions.create("transform",{duration:ZC?Q:Q*.666,delay:ZC?X:X||Q*.333,easing:se})].join(","),H.style.opacity=0,H.style.transform=UN(.75),h&&h(H)}),q=B(g),P=H=>{v==="auto"&&k.start(N.current||0,H),t&&t(R.current,H)};return n.jsx(w,{appear:a,in:l,nodeRef:R,onEnter:$,onEntered:z,onEntering:G,onExit:M,onExited:q,onExiting:Y,addEndListener:P,timeout:v==="auto"?null:v,...C,children:(H,{ownerState:D,...X})=>u.cloneElement(o,{style:{opacity:0,transform:UN(.75),visibility:H==="exited"&&!l?"hidden":void 0,...gpe[H],...b,...o.props.style},ref:L,...X})})});VN&&(VN.muiSupportAuto=!0);const ype=s=>{const{classes:r,disableUnderline:e}=s,a=vn({root:["root",!e&&"underline"],input:["input"]},fue,r);return{...r,...a}},xpe=vr(Oj,{shouldForwardProp:s=>zo(s)||s==="classes",name:"MuiInput",slot:"Root",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[...Ej(s,r),!e.disableUnderline&&r.underline]}})(Pn(({theme:s})=>{let e=s.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return s.vars&&(e=s.alpha(s.vars.palette.common.onBackground,s.vars.opacity.inputUnderline)),{position:"relative",variants:[{props:({ownerState:t})=>t.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:t})=>!t.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:s.transitions.create("transform",{duration:s.transitions.duration.shorter,easing:s.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${sy.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${sy.error}`]:{"&::before, &::after":{borderBottomColor:(s.vars||s).palette.error.main}},"&::before":{borderBottom:`1px solid ${e}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:s.transitions.create("border-bottom-color",{duration:s.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${sy.disabled}, .${sy.error}):before`]:{borderBottom:`2px solid ${(s.vars||s).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${e}`}},[`&.${sy.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(s.palette).filter(ho()).map(([t])=>({props:{color:t,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(s.vars||s).palette[t].main}`}}}))]}})),vpe=vr(Pj,{name:"MuiInput",slot:"Input",overridesResolver:Tj})({}),Ek=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiInput"}),{disableUnderline:a=!1,components:o={},componentsProps:i,fullWidth:l=!1,inputComponent:c="input",multiline:d=!1,slotProps:p,slots:h={},type:g="text",...y}=t,b=ype(t),w={root:{ownerState:{disableUnderline:a}}},C=p??i?_o(p??i,w):w,k=h.root??o.Root??xpe,N=h.input??o.Input??vpe;return n.jsx(Nk,{slots:{root:k,input:N},slotProps:C,fullWidth:l,inputComponent:c,multiline:d,ref:e,type:g,...y,classes:b})});Ek.muiName="Input";function bpe(s){return yn("MuiInputAdornment",s)}const H4=xn("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var W4;const wpe=(s,r)=>{const{ownerState:e}=s;return[r.root,r[`position${mr(e.position)}`],e.disablePointerEvents===!0&&r.disablePointerEvents,r[e.variant]]},jpe=s=>{const{classes:r,disablePointerEvents:e,hiddenLabel:t,position:a,size:o,variant:i}=s,l={root:["root",e&&"disablePointerEvents",a&&`position${mr(a)}`,i,t&&"hiddenLabel",o&&`size${mr(o)}`]};return vn(l,bpe,r)},Cpe=vr("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:wpe})(Pn(({theme:s})=>({display:"flex",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(s.vars||s).palette.action.active,variants:[{props:{variant:"filled"},style:{[`&.${H4.positionStart}&:not(.${H4.hiddenLabel})`]:{marginTop:16}}},{props:{position:"start"},style:{marginRight:8}},{props:{position:"end"},style:{marginLeft:8}},{props:{disablePointerEvents:!0},style:{pointerEvents:"none"}}]}))),wl=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiInputAdornment"}),{children:a,className:o,component:i="div",disablePointerEvents:l=!1,disableTypography:c=!1,position:d,variant:p,...h}=t,g=hc()||{};let y=p;p&&g.variant,g&&!y&&(y=g.variant);const b={...t,hiddenLabel:g.hiddenLabel,size:g.size,disablePointerEvents:l,position:d,variant:y},v=jpe(b);return n.jsx(_j.Provider,{value:null,children:n.jsx(Cpe,{as:i,ownerState:b,className:Hr(v.root,o),ref:e,...h,children:typeof a=="string"&&!c?n.jsx(Bt,{color:"textSecondary",children:a}):n.jsxs(u.Fragment,{children:[d==="start"?W4||(W4=n.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):null,a]})})})});function Spe(s){return yn("MuiInputLabel",s)}xn("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const Npe=s=>{const{classes:r,formControl:e,size:t,shrink:a,disableAnimation:o,variant:i,required:l}=s,c={root:["root",e&&"formControl",!o&&"animated",a&&"shrink",t&&t!=="medium"&&`size${mr(t)}`,i],asterisk:[l&&"asterisk"]},d=vn(c,Spe,r);return{...r,...d}},kpe=vr(mpe,{shouldForwardProp:s=>zo(s)||s==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[{[`& .${Vy.asterisk}`]:r.asterisk},r.root,e.formControl&&r.formControl,e.size==="small"&&r.sizeSmall,e.shrink&&r.shrink,!e.disableAnimation&&r.animated,e.focused&&r.focused,r[e.variant]]}})(Pn(({theme:s})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:r})=>r.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:r})=>r.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:r})=>!r.disableAnimation,style:{transition:s.transitions.create(["color","transform","max-width"],{duration:s.transitions.duration.shorter,easing:s.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:r,ownerState:e})=>r==="filled"&&e.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:r,ownerState:e,size:t})=>r==="filled"&&e.shrink&&t==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:r,ownerState:e})=>r==="outlined"&&e.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),ix=u.forwardRef(function(r,e){const t=kn({name:"MuiInputLabel",props:r}),{disableAnimation:a=!1,margin:o,shrink:i,variant:l,className:c,...d}=t,p=hc();let h=i;typeof h>"u"&&p&&(h=p.filled||p.focused||p.adornedStart);const g=pf({props:t,muiFormControl:p,states:["size","variant","required","focused"]}),y={...t,disableAnimation:a,formControl:p,shrink:h,size:g.size,variant:g.variant,required:g.required,focused:g.focused},b=Npe(y);return n.jsx(kpe,{"data-shrink":h,ref:e,className:Hr(b.root,c),...d,ownerState:y,classes:b})});function _pe(s){return yn("MuiLink",s)}const Epe=xn("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),Tpe=({theme:s,ownerState:r})=>{const e=r.color;if("colorSpace"in s&&s.colorSpace){const o=Gc(s,`palette.${e}.main`)||Gc(s,`palette.${e}`)||r.color;return s.alpha(o,.4)}const t=Gc(s,`palette.${e}.main`,!1)||Gc(s,`palette.${e}`,!1)||r.color,a=Gc(s,`palette.${e}.mainChannel`)||Gc(s,`palette.${e}Channel`);return"vars"in s&&a?`rgba(${a} / 0.4)`:ox(t,.4)},q4={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},Ope=s=>{const{classes:r,component:e,focusVisible:t,underline:a}=s,o={root:["root",`underline${mr(a)}`,e==="button"&&"button",t&&"focusVisible"]};return vn(o,_pe,r)},Ppe=vr(Bt,{name:"MuiLink",slot:"Root",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[r.root,r[`underline${mr(e.underline)}`],e.component==="button"&&r.button]}})(Pn(({theme:s})=>({variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:({underline:r,ownerState:e})=>r==="always"&&e.color!=="inherit",style:{textDecorationColor:"var(--Link-underlineColor)"}},{props:({underline:r,ownerState:e})=>r==="always"&&e.color==="inherit",style:s.colorSpace?{textDecorationColor:s.alpha("currentColor",.4)}:null},...Object.entries(s.palette).filter(ho()).map(([r])=>({props:{underline:"always",color:r},style:{"--Link-underlineColor":s.alpha((s.vars||s).palette[r].main,.4)}})),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":s.alpha((s.vars||s).palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":s.alpha((s.vars||s).palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(s.vars||s).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Epe.focusVisible}`]:{outline:"auto"}}}]}))),jl=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiLink"}),a=Fx(),{className:o,color:i="primary",component:l="a",onBlur:c,onFocus:d,TypographyClasses:p,underline:h="always",variant:g="inherit",sx:y,...b}=t,[v,w]=u.useState(!1),C=R=>{Nw(R.target)||w(!1),c&&c(R)},k=R=>{Nw(R.target)&&w(!0),d&&d(R)},N={...t,color:i,component:l,focusVisible:v,underline:h,variant:g},O=Ope(N);return n.jsx(Ppe,{color:i,className:Hr(O.root,o),classes:p,component:l,onBlur:C,onFocus:k,ref:e,ownerState:N,variant:g,...b,sx:[...q4[i]===void 0?[{color:i}]:[],...Array.isArray(y)?y:[y]],style:{...b.style,...h==="always"&&i!=="inherit"&&!q4[i]&&{"--Link-underlineColor":Tpe({theme:a,ownerState:N})}}})}),oc=u.createContext({});function Ape(s){return yn("MuiList",s)}xn("MuiList",["root","padding","dense","subheader"]);const Mpe=s=>{const{classes:r,disablePadding:e,dense:t,subheader:a}=s;return vn({root:["root",!e&&"padding",t&&"dense",a&&"subheader"]},Ape,r)},Ipe=vr("ul",{name:"MuiList",slot:"Root",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[r.root,!e.disablePadding&&r.padding,e.dense&&r.dense,e.subheader&&r.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:s})=>!s.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:s})=>s.subheader,style:{paddingTop:0}}]}),HN=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiList"}),{children:a,className:o,component:i="ul",dense:l=!1,disablePadding:c=!1,subheader:d,...p}=t,h=u.useMemo(()=>({dense:l}),[l]),g={...t,component:i,dense:l,disablePadding:c},y=Mpe(g);return n.jsx(oc.Provider,{value:h,children:n.jsxs(Ipe,{as:i,className:Hr(y.root,o),ref:e,ownerState:g,...p,children:[d,a]})})});function Rpe(s){return yn("MuiListItem",s)}xn("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);function Dpe(s){return yn("MuiListItemButton",s)}const $h=xn("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),Lpe=(s,r)=>{const{ownerState:e}=s;return[r.root,e.dense&&r.dense,e.alignItems==="flex-start"&&r.alignItemsFlexStart,e.divider&&r.divider,!e.disableGutters&&r.gutters]},Fpe=s=>{const{alignItems:r,classes:e,dense:t,disabled:a,disableGutters:o,divider:i,selected:l}=s,d=vn({root:["root",t&&"dense",!o&&"gutters",i&&"divider",a&&"disabled",r==="flex-start"&&"alignItemsFlexStart",l&&"selected"]},Dpe,e);return{...e,...d}},Bpe=vr(cf,{shouldForwardProp:s=>zo(s)||s==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:Lpe})(Pn(({theme:s})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:s.transitions.create("background-color",{duration:s.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(s.vars||s).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${$h.selected}`]:{backgroundColor:s.alpha((s.vars||s).palette.primary.main,(s.vars||s).palette.action.selectedOpacity),[`&.${$h.focusVisible}`]:{backgroundColor:s.alpha((s.vars||s).palette.primary.main,`${(s.vars||s).palette.action.selectedOpacity} + ${(s.vars||s).palette.action.focusOpacity}`)}},[`&.${$h.selected}:hover`]:{backgroundColor:s.alpha((s.vars||s).palette.primary.main,`${(s.vars||s).palette.action.selectedOpacity} + ${(s.vars||s).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:s.alpha((s.vars||s).palette.primary.main,(s.vars||s).palette.action.selectedOpacity)}},[`&.${$h.focusVisible}`]:{backgroundColor:(s.vars||s).palette.action.focus},[`&.${$h.disabled}`]:{opacity:(s.vars||s).palette.action.disabledOpacity},variants:[{props:({ownerState:r})=>r.divider,style:{borderBottom:`1px solid ${(s.vars||s).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:r})=>!r.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:r})=>r.dense,style:{paddingTop:4,paddingBottom:4}}]}))),G4=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiListItemButton"}),{alignItems:a="center",autoFocus:o=!1,component:i="div",children:l,dense:c=!1,disableGutters:d=!1,divider:p=!1,focusVisibleClassName:h,selected:g=!1,className:y,...b}=t,v=u.useContext(oc),w=u.useMemo(()=>({dense:c||v.dense||!1,alignItems:a,disableGutters:d}),[a,v.dense,c,d]),C=u.useRef(null);ru(()=>{o&&C.current&&C.current.focus()},[o]);const k={...t,alignItems:a,dense:w.dense,disableGutters:d,divider:p,selected:g},N=Fpe(k),O=yo(C,e);return n.jsx(oc.Provider,{value:w,children:n.jsx(Bpe,{ref:O,href:b.href||b.to,component:(b.href||b.to)&&i==="div"?"button":i,focusVisibleClassName:Hr(N.focusVisible,h),ownerState:k,className:Hr(N.root,y),...b,classes:N,children:l})})});function zpe(s){return yn("MuiListItemSecondaryAction",s)}xn("MuiListItemSecondaryAction",["root","disableGutters"]);const $pe=s=>{const{disableGutters:r,classes:e}=s;return vn({root:["root",r&&"disableGutters"]},zpe,e)},Upe=vr("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[r.root,e.disableGutters&&r.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:s})=>s.disableGutters,style:{right:0}}]}),bI=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiListItemSecondaryAction"}),{className:a,...o}=t,i=u.useContext(oc),l={...t,disableGutters:i.disableGutters},c=$pe(l);return n.jsx(Upe,{className:Hr(c.root,a),ownerState:l,ref:e,...o})});bI.muiName="ListItemSecondaryAction";const Vpe=(s,r)=>{const{ownerState:e}=s;return[r.root,e.dense&&r.dense,e.alignItems==="flex-start"&&r.alignItemsFlexStart,e.divider&&r.divider,!e.disableGutters&&r.gutters,!e.disablePadding&&r.padding,e.hasSecondaryAction&&r.secondaryAction]},Hpe=s=>{const{alignItems:r,classes:e,dense:t,disableGutters:a,disablePadding:o,divider:i,hasSecondaryAction:l}=s;return vn({root:["root",t&&"dense",!a&&"gutters",!o&&"padding",i&&"divider",r==="flex-start"&&"alignItemsFlexStart",l&&"secondaryAction"],container:["container"],secondaryAction:["secondaryAction"]},Rpe,e)},Wpe=vr("div",{name:"MuiListItem",slot:"Root",overridesResolver:Vpe})(Pn(({theme:s})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:r})=>!r.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:r})=>!r.disablePadding&&r.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:r})=>!r.disablePadding&&!r.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:r})=>!r.disablePadding&&!!r.secondaryAction,style:{paddingRight:48}},{props:({ownerState:r})=>!!r.secondaryAction,style:{[`& > .${$h.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:r})=>r.divider,style:{borderBottom:`1px solid ${(s.vars||s).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:r})=>r.button,style:{transition:s.transitions.create("background-color",{duration:s.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(s.vars||s).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:r})=>r.hasSecondaryAction,style:{paddingRight:48}}]}))),qpe=vr("li",{name:"MuiListItem",slot:"Container"})({position:"relative"}),K4=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiListItem"}),{alignItems:a="center",children:o,className:i,component:l,components:c={},componentsProps:d={},ContainerComponent:p="li",ContainerProps:{className:h,...g}={},dense:y=!1,disableGutters:b=!1,disablePadding:v=!1,divider:w=!1,secondaryAction:C,slotProps:k={},slots:N={},...O}=t,R=u.useContext(oc),L=u.useMemo(()=>({dense:y||R.dense||!1,alignItems:a,disableGutters:b}),[a,R.dense,y,b]),B=u.useRef(null),G=u.Children.toArray(o),$=G.length&&Qv(G[G.length-1],["ListItemSecondaryAction"]),z={...t,alignItems:a,dense:L.dense,disableGutters:b,disablePadding:v,divider:w,hasSecondaryAction:$},Y=Hpe(z),M=yo(B,e),q={slots:N,slotProps:k},[P,H]=ts("secondaryAction",{elementType:bI,externalForwardedProps:q,ownerState:z,className:Y.secondaryAction}),D=N.root||c.Root||Wpe,X=k.root||d.root||{},se={className:Hr(Y.root,X.className,i),...O};let Q=l||"li";return $?(Q=!se.component&&!l?"div":Q,p==="li"&&(Q==="li"?Q="div":se.component==="li"&&(se.component="div")),n.jsx(oc.Provider,{value:L,children:n.jsxs(qpe,{as:p,className:Hr(Y.container,h),ref:M,ownerState:z,...g,children:[n.jsx(D,{...X,...!Sm(D)&&{as:Q,ownerState:{...z,...X.ownerState}},...se,children:G}),G.pop()]})})):n.jsx(oc.Provider,{value:L,children:n.jsxs(D,{...X,as:Q,ref:M,...!Sm(D)&&{ownerState:{...z,...X.ownerState}},...se,children:[G,C&&n.jsx(P,{...H,children:C})]})})});function Gpe(s){return yn("MuiListItemIcon",s)}const Y4=xn("MuiListItemIcon",["root","alignItemsFlexStart"]),Kpe=s=>{const{alignItems:r,classes:e}=s;return vn({root:["root",r==="flex-start"&&"alignItemsFlexStart"]},Gpe,e)},Ype=vr("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[r.root,e.alignItems==="flex-start"&&r.alignItemsFlexStart]}})(Pn(({theme:s})=>({minWidth:56,color:(s.vars||s).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}))),WN=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiListItemIcon"}),{className:a,...o}=t,i=u.useContext(oc),l={...t,alignItems:i.alignItems},c=Kpe(l);return n.jsx(Ype,{className:Hr(c.root,a),ownerState:l,ref:e,...o})});function Zpe(s){return yn("MuiListItemText",s)}const am=xn("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),Xpe=s=>{const{classes:r,inset:e,primary:t,secondary:a,dense:o}=s;return vn({root:["root",e&&"inset",o&&"dense",t&&a&&"multiline"],primary:["primary"],secondary:["secondary"]},Zpe,r)},Qpe=vr("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[{[`& .${am.primary}`]:r.primary},{[`& .${am.secondary}`]:r.secondary},r.root,e.inset&&r.inset,e.primary&&e.secondary&&r.multiline,e.dense&&r.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${O4.root}:where(& .${am.primary})`]:{display:"block"},[`.${O4.root}:where(& .${am.secondary})`]:{display:"block"},variants:[{props:({ownerState:s})=>s.primary&&s.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:s})=>s.inset,style:{paddingLeft:56}}]}),Tw=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiListItemText"}),{children:a,className:o,disableTypography:i=!1,inset:l=!1,primary:c,primaryTypographyProps:d,secondary:p,secondaryTypographyProps:h,slots:g={},slotProps:y={},...b}=t,{dense:v}=u.useContext(oc);let w=c??a,C=p;const k={...t,disableTypography:i,inset:l,primary:!!w,secondary:!!C,dense:v},N=Xpe(k),O={slots:g,slotProps:{primary:d,secondary:h,...y}},[R,L]=ts("root",{className:Hr(N.root,o),elementType:Qpe,externalForwardedProps:{...O,...b},ownerState:k,ref:e}),[B,G]=ts("primary",{className:N.primary,elementType:Bt,externalForwardedProps:O,ownerState:k}),[$,z]=ts("secondary",{className:N.secondary,elementType:Bt,externalForwardedProps:O,ownerState:k});return w!=null&&w.type!==Bt&&!i&&(w=n.jsx(B,{variant:v?"body2":"body1",component:G?.variant?void 0:"span",...G,children:w})),C!=null&&C.type!==Bt&&!i&&(C=n.jsx($,{variant:"body2",color:"textSecondary",...z,children:C})),n.jsxs(R,{...L,children:[w,C]})});function XC(s,r,e){return s===r?s.firstChild:r&&r.nextElementSibling?r.nextElementSibling:e?null:s.firstChild}function Z4(s,r,e){return s===r?e?s.firstChild:s.lastChild:r&&r.previousElementSibling?r.previousElementSibling:e?null:s.lastChild}function wI(s,r){if(r===void 0)return!0;let e=s.innerText;return e===void 0&&(e=s.textContent),e=e.trim().toLowerCase(),e.length===0?!1:r.repeating?e[0]===r.keys[0]:e.startsWith(r.keys.join(""))}function ay(s,r,e,t,a,o){let i=!1,l=a(s,r,r?e:!1);for(;l;){if(l===s.firstChild){if(i)return!1;i=!0}const c=t?!1:l.disabled||l.getAttribute("aria-disabled")==="true";if(!l.hasAttribute("tabindex")||!wI(l,o)||c)l=a(s,l,e);else return l.focus(),!0}return!1}const Jpe=u.forwardRef(function(r,e){const{actions:t,autoFocus:a=!1,autoFocusItem:o=!1,children:i,className:l,disabledItemsFocusable:c=!1,disableListWrap:d=!1,onKeyDown:p,variant:h="selectedMenu",...g}=r,y=u.useRef(null),b=u.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});ru(()=>{a&&y.current.focus()},[a]),u.useImperativeHandle(t,()=>({adjustStyleForScrollbar:(N,{direction:O})=>{const R=!y.current.style.width;if(N.clientHeight<y.current.clientHeight&&R){const L=`${yI(nu(N))}px`;y.current.style[O==="rtl"?"paddingLeft":"paddingRight"]=L,y.current.style.width=`calc(100% + ${L})`}return y.current}}),[]);const v=N=>{const O=y.current,R=N.key;if(N.ctrlKey||N.metaKey||N.altKey){p&&p(N);return}const B=Sy(uc(O));if(R==="ArrowDown")N.preventDefault(),ay(O,B,d,c,XC);else if(R==="ArrowUp")N.preventDefault(),ay(O,B,d,c,Z4);else if(R==="Home")N.preventDefault(),ay(O,null,d,c,XC);else if(R==="End")N.preventDefault(),ay(O,null,d,c,Z4);else if(R.length===1){const G=b.current,$=R.toLowerCase(),z=performance.now();G.keys.length>0&&(z-G.lastTime>500?(G.keys=[],G.repeating=!0,G.previousKeyMatched=!0):G.repeating&&$!==G.keys[0]&&(G.repeating=!1)),G.lastTime=z,G.keys.push($);const Y=B&&!G.repeating&&wI(B,G);G.previousKeyMatched&&(Y||ay(O,B,!1,c,XC,G))?N.preventDefault():G.previousKeyMatched=!1}p&&p(N)},w=yo(y,e);let C=-1;u.Children.forEach(i,(N,O)=>{if(!u.isValidElement(N)){C===O&&(C+=1,C>=i.length&&(C=-1));return}N.props.disabled||(h==="selectedMenu"&&N.props.selected||C===-1)&&(C=O),C===O&&(N.props.disabled||N.props.muiSkipListHighlight||N.type.muiSkipListHighlight)&&(C+=1,C>=i.length&&(C=-1))});const k=u.Children.map(i,(N,O)=>{if(O===C){const R={};return o&&(R.autoFocus=!0),N.props.tabIndex===void 0&&h==="selectedMenu"&&(R.tabIndex=0),u.cloneElement(N,R)}return N});return n.jsx(HN,{role:"menu",ref:w,className:l,onKeyDown:v,tabIndex:a?0:-1,...g,children:k})});function ehe(s){return yn("MuiPopover",s)}xn("MuiPopover",["root","paper"]);function X4(s,r){let e=0;return typeof r=="number"?e=r:r==="center"?e=s.height/2:r==="bottom"&&(e=s.height),e}function Q4(s,r){let e=0;return typeof r=="number"?e=r:r==="center"?e=s.width/2:r==="right"&&(e=s.width),e}function J4(s){return[s.horizontal,s.vertical].map(r=>typeof r=="number"?`${r}px`:r).join(" ")}function wv(s){return typeof s=="function"?s():s}const the=s=>{const{classes:r}=s;return vn({root:["root"],paper:["paper"]},ehe,r)},rhe=vr(xI,{name:"MuiPopover",slot:"Root"})({}),jI=vr(Ms,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),nhe=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiPopover"}),{action:a,anchorEl:o,anchorOrigin:i={vertical:"top",horizontal:"left"},anchorPosition:l,anchorReference:c="anchorEl",children:d,className:p,container:h,elevation:g=8,marginThreshold:y=16,open:b,PaperProps:v={},slots:w={},slotProps:C={},transformOrigin:k={vertical:"top",horizontal:"left"},TransitionComponent:N,transitionDuration:O="auto",TransitionProps:R={},disableScrollLock:L=!1,...B}=t,G=u.useRef(),$={...t,anchorOrigin:i,anchorReference:c,elevation:g,marginThreshold:y,transformOrigin:k,TransitionComponent:N,transitionDuration:O,TransitionProps:R},z=the($),Y=u.useCallback(()=>{if(c==="anchorPosition")return l;const ze=wv(o),Ue=(ze&&ze.nodeType===1?ze:uc(G.current).body).getBoundingClientRect();return{top:Ue.top+X4(Ue,i.vertical),left:Ue.left+Q4(Ue,i.horizontal)}},[o,i.horizontal,i.vertical,l,c]),M=u.useCallback(ze=>({vertical:X4(ze,k.vertical),horizontal:Q4(ze,k.horizontal)}),[k.horizontal,k.vertical]),q=u.useCallback(ze=>{const Ge={width:ze.offsetWidth,height:ze.offsetHeight},Ue=M(Ge);if(c==="none")return{top:null,left:null,transformOrigin:J4(Ue)};const ht=Y();let ee=ht.top-Ue.vertical,ue=ht.left-Ue.horizontal;const Oe=ee+Ge.height,J=ue+Ge.width,I=nu(wv(o)),V=I.innerHeight-y,re=I.innerWidth-y;if(y!==null&&ee<y){const pe=ee-y;ee-=pe,Ue.vertical+=pe}else if(y!==null&&Oe>V){const pe=Oe-V;ee-=pe,Ue.vertical+=pe}if(y!==null&&ue<y){const pe=ue-y;ue-=pe,Ue.horizontal+=pe}else if(J>re){const pe=J-re;ue-=pe,Ue.horizontal+=pe}return{top:`${Math.round(ee)}px`,left:`${Math.round(ue)}px`,transformOrigin:J4(Ue)}},[o,c,Y,M,y]),[P,H]=u.useState(b),D=u.useCallback(()=>{const ze=G.current;if(!ze)return;const Ge=q(ze);Ge.top!==null&&ze.style.setProperty("top",Ge.top),Ge.left!==null&&(ze.style.left=Ge.left),ze.style.transformOrigin=Ge.transformOrigin,H(!0)},[q]);u.useEffect(()=>(L&&window.addEventListener("scroll",D),()=>window.removeEventListener("scroll",D)),[o,L,D]);const X=()=>{D()},se=()=>{H(!1)};u.useEffect(()=>{b&&D()}),u.useImperativeHandle(a,()=>b?{updatePosition:()=>{D()}}:null,[b,D]),u.useEffect(()=>{if(!b)return;const ze=eI(()=>{D()}),Ge=nu(wv(o));return Ge.addEventListener("resize",ze),()=>{ze.clear(),Ge.removeEventListener("resize",ze)}},[o,b,D]);let Q=O;const xe={slots:{transition:N,...w},slotProps:{transition:R,paper:v,...C}},[K,Z]=ts("transition",{elementType:VN,externalForwardedProps:xe,ownerState:$,getSlotProps:ze=>({...ze,onEntering:(Ge,Ue)=>{ze.onEntering?.(Ge,Ue),X()},onExited:Ge=>{ze.onExited?.(Ge),se()}}),additionalProps:{appear:!0,in:b}});O==="auto"&&!K.muiSupportAuto&&(Q=void 0);const ve=h||(o?uc(wv(o)).body:void 0),[ae,{slots:Se,slotProps:Pe,...$e}]=ts("root",{ref:e,elementType:rhe,externalForwardedProps:{...xe,...B},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:w.backdrop},slotProps:{backdrop:tI(typeof C.backdrop=="function"?C.backdrop($):C.backdrop,{invisible:!0})},container:ve,open:b},ownerState:$,className:Hr(z.root,p)}),[we,Ae]=ts("paper",{ref:G,className:z.paper,elementType:jI,externalForwardedProps:xe,shouldForwardComponentProp:!0,additionalProps:{elevation:g,style:P?void 0:{opacity:0}},ownerState:$});return n.jsx(ae,{...$e,...!Sm(ae)&&{slots:Se,slotProps:Pe,disableScrollLock:L},children:n.jsx(K,{...Z,timeout:Q,children:n.jsx(we,{...Ae,children:d})})})});function she(s){return yn("MuiMenu",s)}xn("MuiMenu",["root","paper","list"]);const ahe={vertical:"top",horizontal:"right"},ohe={vertical:"top",horizontal:"left"},ihe=s=>{const{classes:r}=s;return vn({root:["root"],paper:["paper"],list:["list"]},she,r)},lhe=vr(nhe,{shouldForwardProp:s=>zo(s)||s==="classes",name:"MuiMenu",slot:"Root"})({}),che=vr(jI,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),dhe=vr(Jpe,{name:"MuiMenu",slot:"List"})({outline:0}),Aj=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiMenu"}),{autoFocus:a=!0,children:o,className:i,disableAutoFocusItem:l=!1,MenuListProps:c={},onClose:d,open:p,PaperProps:h={},PopoverClasses:g,transitionDuration:y="auto",TransitionProps:{onEntering:b,...v}={},variant:w="selectedMenu",slots:C={},slotProps:k={},...N}=t,O=sce(),R={...t,autoFocus:a,disableAutoFocusItem:l,MenuListProps:c,onEntering:b,PaperProps:h,transitionDuration:y,TransitionProps:v,variant:w},L=ihe(R),B=a&&!l&&p,G=u.useRef(null),$=(Q,xe)=>{G.current&&G.current.adjustStyleForScrollbar(Q,{direction:O?"rtl":"ltr"}),b&&b(Q,xe)},z=Q=>{Q.key==="Tab"&&(Q.preventDefault(),d&&d(Q,"tabKeyDown"))};let Y=-1;u.Children.map(o,(Q,xe)=>{u.isValidElement(Q)&&(Q.props.disabled||(w==="selectedMenu"&&Q.props.selected||Y===-1)&&(Y=xe))});const M={slots:C,slotProps:{list:c,transition:v,paper:h,...k}},q=fI({elementType:C.root,externalSlotProps:k.root,ownerState:R,className:[L.root,i]}),[P,H]=ts("paper",{className:L.paper,elementType:che,externalForwardedProps:M,shouldForwardComponentProp:!0,ownerState:R}),[D,X]=ts("list",{className:Hr(L.list,c.className),elementType:dhe,shouldForwardComponentProp:!0,externalForwardedProps:M,getSlotProps:Q=>({...Q,onKeyDown:xe=>{z(xe),Q.onKeyDown?.(xe)}}),ownerState:R}),se=typeof M.slotProps.transition=="function"?M.slotProps.transition(R):M.slotProps.transition;return n.jsx(lhe,{onClose:d,anchorOrigin:{vertical:"bottom",horizontal:O?"right":"left"},transformOrigin:O?ahe:ohe,slots:{root:C.root,paper:P,backdrop:C.backdrop,...C.transition&&{transition:C.transition}},slotProps:{root:q,paper:H,backdrop:typeof k.backdrop=="function"?k.backdrop(R):k.backdrop,transition:{...se,onEntering:(...Q)=>{$(...Q),se?.onEntering?.(...Q)}}},open:p,ref:e,transitionDuration:y,ownerState:R,...N,classes:g,children:n.jsx(D,{actions:G,autoFocus:a&&(Y===-1||l),autoFocusItem:B,variant:w,...X,children:o})})});function uhe(s){return yn("MuiMenuItem",s)}const oy=xn("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),fhe=(s,r)=>{const{ownerState:e}=s;return[r.root,e.dense&&r.dense,e.divider&&r.divider,!e.disableGutters&&r.gutters]},phe=s=>{const{disabled:r,dense:e,divider:t,disableGutters:a,selected:o,classes:i}=s,c=vn({root:["root",e&&"dense",r&&"disabled",!a&&"gutters",t&&"divider",o&&"selected"]},uhe,i);return{...i,...c}},hhe=vr(cf,{shouldForwardProp:s=>zo(s)||s==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:fhe})(Pn(({theme:s})=>({...s.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(s.vars||s).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${oy.selected}`]:{backgroundColor:s.alpha((s.vars||s).palette.primary.main,(s.vars||s).palette.action.selectedOpacity),[`&.${oy.focusVisible}`]:{backgroundColor:s.alpha((s.vars||s).palette.primary.main,`${(s.vars||s).palette.action.selectedOpacity} + ${(s.vars||s).palette.action.focusOpacity}`)}},[`&.${oy.selected}:hover`]:{backgroundColor:s.alpha((s.vars||s).palette.primary.main,`${(s.vars||s).palette.action.selectedOpacity} + ${(s.vars||s).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:s.alpha((s.vars||s).palette.primary.main,(s.vars||s).palette.action.selectedOpacity)}},[`&.${oy.focusVisible}`]:{backgroundColor:(s.vars||s).palette.action.focus},[`&.${oy.disabled}`]:{opacity:(s.vars||s).palette.action.disabledOpacity},[`& + .${$4.root}`]:{marginTop:s.spacing(1),marginBottom:s.spacing(1)},[`& + .${$4.inset}`]:{marginLeft:52},[`& .${am.root}`]:{marginTop:0,marginBottom:0},[`& .${am.inset}`]:{paddingLeft:36},[`& .${Y4.root}`]:{minWidth:36},variants:[{props:({ownerState:r})=>!r.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:r})=>r.divider,style:{borderBottom:`1px solid ${(s.vars||s).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:r})=>!r.dense,style:{[s.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:r})=>r.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...s.typography.body2,[`& .${Y4.root} svg`]:{fontSize:"1.25rem"}}}]}))),zn=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiMenuItem"}),{autoFocus:a=!1,component:o="li",dense:i=!1,divider:l=!1,disableGutters:c=!1,focusVisibleClassName:d,role:p="menuitem",tabIndex:h,className:g,...y}=t,b=u.useContext(oc),v=u.useMemo(()=>({dense:i||b.dense||!1,disableGutters:c}),[b.dense,i,c]),w=u.useRef(null);ru(()=>{a&&w.current&&w.current.focus()},[a]);const C={...t,dense:v.dense,divider:l,disableGutters:c},k=phe(t),N=yo(w,e);let O;return t.disabled||(O=h!==void 0?h:-1),n.jsx(oc.Provider,{value:v,children:n.jsx(hhe,{ref:N,role:p,tabIndex:O,component:o,focusVisibleClassName:Hr(k.focusVisible,d),className:Hr(k.root,g),...y,ownerState:C,classes:k})})});function mhe(s){return yn("MuiNativeSelect",s)}const Tk=xn("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),ghe=s=>{const{classes:r,variant:e,disabled:t,multiple:a,open:o,error:i}=s,l={select:["select",e,t&&"disabled",a&&"multiple",i&&"error"],icon:["icon",`icon${mr(e)}`,o&&"iconOpen",t&&"disabled"]};return vn(l,mhe,r)},CI=vr("select",{name:"MuiNativeSelect"})(({theme:s})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${Tk.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(s.vars||s).palette.background.paper},variants:[{props:({ownerState:r})=>r.variant!=="filled"&&r.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(s.vars||s).shape.borderRadius,"&:focus":{borderRadius:(s.vars||s).shape.borderRadius},"&&&":{paddingRight:32}}}]})),yhe=vr(CI,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:zo,overridesResolver:(s,r)=>{const{ownerState:e}=s;return[r.select,r[e.variant],e.error&&r.error,{[`&.${Tk.multiple}`]:r.multiple}]}})({}),SI=vr("svg",{name:"MuiNativeSelect"})(({theme:s})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(s.vars||s).palette.action.active,[`&.${Tk.disabled}`]:{color:(s.vars||s).palette.action.disabled},variants:[{props:({ownerState:r})=>r.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),xhe=vr(SI,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[r.icon,e.variant&&r[`icon${mr(e.variant)}`],e.open&&r.iconOpen]}})({}),vhe=u.forwardRef(function(r,e){const{className:t,disabled:a,error:o,IconComponent:i,inputRef:l,variant:c="standard",...d}=r,p={...r,disabled:a,variant:c,error:o},h=ghe(p);return n.jsxs(u.Fragment,{children:[n.jsx(yhe,{ownerState:p,className:Hr(h.select,t),disabled:a,ref:l||e,...d}),r.multiple?null:n.jsx(xhe,{as:i,ownerState:p,className:h.icon})]})});var e3;const bhe=vr("fieldset",{name:"MuiNotchedOutlined",shouldForwardProp:zo})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),whe=vr("legend",{name:"MuiNotchedOutlined",shouldForwardProp:zo})(Pn(({theme:s})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:r})=>!r.withLabel,style:{padding:0,lineHeight:"11px",transition:s.transitions.create("width",{duration:150,easing:s.transitions.easing.easeOut})}},{props:({ownerState:r})=>r.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:s.transitions.create("max-width",{duration:50,easing:s.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:r})=>r.withLabel&&r.notched,style:{maxWidth:"100%",transition:s.transitions.create("max-width",{duration:100,easing:s.transitions.easing.easeOut,delay:50})}}]})));function jhe(s){const{children:r,classes:e,className:t,label:a,notched:o,...i}=s,l=a!=null&&a!=="",c={...s,notched:o,withLabel:l};return n.jsx(bhe,{"aria-hidden":!0,className:t,ownerState:c,...i,children:n.jsx(whe,{ownerState:c,children:l?n.jsx("span",{children:a}):e3||(e3=n.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}const Che=s=>{const{classes:r}=s,t=vn({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},pue,r);return{...r,...t}},She=vr(Oj,{shouldForwardProp:s=>zo(s)||s==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:Ej})(Pn(({theme:s})=>{const r=s.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(s.vars||s).shape.borderRadius,[`&:hover .${Fc.notchedOutline}`]:{borderColor:(s.vars||s).palette.text.primary},"@media (hover: none)":{[`&:hover .${Fc.notchedOutline}`]:{borderColor:s.vars?s.alpha(s.vars.palette.common.onBackground,.23):r}},[`&.${Fc.focused} .${Fc.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(s.palette).filter(ho()).map(([e])=>({props:{color:e},style:{[`&.${Fc.focused} .${Fc.notchedOutline}`]:{borderColor:(s.vars||s).palette[e].main}}})),{props:{},style:{[`&.${Fc.error} .${Fc.notchedOutline}`]:{borderColor:(s.vars||s).palette.error.main},[`&.${Fc.disabled} .${Fc.notchedOutline}`]:{borderColor:(s.vars||s).palette.action.disabled}}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:14}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:14}},{props:({ownerState:e})=>e.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:e,size:t})=>e.multiline&&t==="small",style:{padding:"8.5px 14px"}}]}})),Nhe=vr(jhe,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(Pn(({theme:s})=>{const r=s.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:s.vars?s.alpha(s.vars.palette.common.onBackground,.23):r}})),khe=vr(Pj,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Tj})(Pn(({theme:s})=>({padding:"16.5px 14px",...!s.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:s.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:s.palette.mode==="light"?null:"#fff",caretColor:s.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...s.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[s.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:r})=>r.multiline,style:{padding:0}},{props:({ownerState:r})=>r.startAdornment,style:{paddingLeft:0}},{props:({ownerState:r})=>r.endAdornment,style:{paddingRight:0}}]}))),Ok=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiOutlinedInput"}),{components:a={},fullWidth:o=!1,inputComponent:i="input",label:l,multiline:c=!1,notched:d,slots:p={},slotProps:h={},type:g="text",...y}=t,b=Che(t),v=hc(),w=pf({props:t,muiFormControl:v,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),C={...t,color:w.color||"primary",disabled:w.disabled,error:w.error,focused:w.focused,formControl:v,fullWidth:o,hiddenLabel:w.hiddenLabel,multiline:c,size:w.size,type:g},k=p.root??a.Root??She,N=p.input??a.Input??khe,[O,R]=ts("notchedOutline",{elementType:Nhe,className:b.notchedOutline,shouldForwardComponentProp:!0,ownerState:C,externalForwardedProps:{slots:p,slotProps:h},additionalProps:{label:l!=null&&l!==""&&w.required?n.jsxs(u.Fragment,{children:[l,"","*"]}):l}});return n.jsx(Nk,{slots:{root:k,input:N},slotProps:h,renderSuffix:L=>n.jsx(O,{...R,notched:typeof d<"u"?d:!!(L.startAdornment||L.filled||L.focused)}),fullWidth:o,inputComponent:i,multiline:c,ref:e,type:g,...y,classes:{...b,notchedOutline:null}})});Ok.muiName="Input";const _he=ws(n.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),Ehe=ws(n.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"})),The=vr("span",{name:"MuiRadioButtonIcon",shouldForwardProp:zo})({position:"relative",display:"flex"}),Ohe=vr(_he,{name:"MuiRadioButtonIcon"})({transform:"scale(1)"}),Phe=vr(Ehe,{name:"MuiRadioButtonIcon"})(Pn(({theme:s})=>({left:0,position:"absolute",transform:"scale(0)",transition:s.transitions.create("transform",{easing:s.transitions.easing.easeIn,duration:s.transitions.duration.shortest}),variants:[{props:{checked:!0},style:{transform:"scale(1)",transition:s.transitions.create("transform",{easing:s.transitions.easing.easeOut,duration:s.transitions.duration.shortest})}}]})));function NI(s){const{checked:r=!1,classes:e={},fontSize:t}=s,a={...s,checked:r};return n.jsxs(The,{className:e.root,ownerState:a,children:[n.jsx(Ohe,{fontSize:t,className:e.background,ownerState:a}),n.jsx(Phe,{fontSize:t,className:e.dot,ownerState:a})]})}const kI=u.createContext(void 0);function Ahe(){return u.useContext(kI)}function Mhe(s){return yn("MuiRadio",s)}const t3=xn("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),Ihe=s=>{const{classes:r,color:e,size:t}=s,a={root:["root",`color${mr(e)}`,t!=="medium"&&`size${mr(t)}`]};return{...r,...vn(a,Mhe,r)}},Rhe=vr(kk,{shouldForwardProp:s=>zo(s)||s==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[r.root,e.size!=="medium"&&r[`size${mr(e.size)}`],r[`color${mr(e.color)}`]]}})(Pn(({theme:s})=>({color:(s.vars||s).palette.text.secondary,[`&.${t3.disabled}`]:{color:(s.vars||s).palette.action.disabled},variants:[{props:{color:"default",disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:s.alpha((s.vars||s).palette.action.active,(s.vars||s).palette.action.hoverOpacity)}}},...Object.entries(s.palette).filter(ho()).map(([r])=>({props:{color:r,disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:s.alpha((s.vars||s).palette[r].main,(s.vars||s).palette.action.hoverOpacity)}}})),...Object.entries(s.palette).filter(ho()).map(([r])=>({props:{color:r,disabled:!1},style:{[`&.${t3.checked}`]:{color:(s.vars||s).palette[r].main}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]})));function Dhe(s,r){return typeof r=="object"&&r!==null?s===r:String(s)===String(r)}const Lhe=n.jsx(NI,{checked:!0}),Fhe=n.jsx(NI,{}),$u=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiRadio"}),{checked:a,checkedIcon:o=Lhe,color:i="primary",icon:l=Fhe,name:c,onChange:d,size:p="medium",className:h,disabled:g,disableRipple:y=!1,slots:b={},slotProps:v={},inputProps:w,...C}=t,k=hc();let N=g;k&&typeof N>"u"&&(N=k.disabled),N??=!1;const O={...t,disabled:N,disableRipple:y,color:i,size:p},R=Ihe(O),L=Ahe();let B=a;const G=IN(d,L&&L.onChange);let $=c;L&&(typeof B>"u"&&(B=Dhe(L.value,t.value)),typeof $>"u"&&($=L.name));const z=v.input??w,[Y,M]=ts("root",{ref:e,elementType:Rhe,className:Hr(R.root,h),shouldForwardComponentProp:!0,externalForwardedProps:{slots:b,slotProps:v,...C},getSlotProps:q=>({...q,onChange:(P,...H)=>{q.onChange?.(P,...H),G(P,...H)}}),ownerState:O,additionalProps:{type:"radio",icon:u.cloneElement(l,{fontSize:l.props.fontSize??p}),checkedIcon:u.cloneElement(o,{fontSize:o.props.fontSize??p}),disabled:N,name:$,checked:B,slots:b,slotProps:{input:typeof z=="function"?z(O):z}}});return n.jsx(Y,{...M,classes:R})});function Bhe(s){return yn("MuiRadioGroup",s)}xn("MuiRadioGroup",["root","row","error"]);const zhe=s=>{const{classes:r,row:e,error:t}=s;return vn({root:["root",e&&"row",t&&"error"]},Bhe,r)},r3=u.forwardRef(function(r,e){const{actions:t,children:a,className:o,defaultValue:i,name:l,onChange:c,value:d,...p}=r,h=u.useRef(null),g=zhe(r),[y,b]=jw({controlled:d,default:i,name:"RadioGroup"});u.useImperativeHandle(t,()=>({focus:()=>{let k=h.current.querySelector("input:not(:disabled):checked");k||(k=h.current.querySelector("input:not(:disabled)")),k&&k.focus()}}),[]);const v=yo(e,h),w=Fm(l),C=u.useMemo(()=>({name:w,onChange(k){b(k.target.value),c&&c(k,k.target.value)},value:y}),[w,c,b,y]);return n.jsx(kI.Provider,{value:C,children:n.jsx(ope,{role:"radiogroup",ref:v,className:Hr(g.root,o),...p,children:a})})});function _I(s){return yn("MuiSelect",s)}const iy=xn("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var n3;const $he=vr(CI,{name:"MuiSelect",slot:"Select",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[{[`&.${iy.select}`]:r.select},{[`&.${iy.select}`]:r[e.variant]},{[`&.${iy.error}`]:r.error},{[`&.${iy.multiple}`]:r.multiple}]}})({[`&.${iy.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),Uhe=vr(SI,{name:"MuiSelect",slot:"Icon",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[r.icon,e.variant&&r[`icon${mr(e.variant)}`],e.open&&r.iconOpen]}})({}),Vhe=vr("input",{shouldForwardProp:s=>JM(s)&&s!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function s3(s,r){return typeof r=="object"&&r!==null?s===r:String(s)===String(r)}function Hhe(s){return s==null||typeof s=="string"&&!s.trim()}const Whe=s=>{const{classes:r,variant:e,disabled:t,multiple:a,open:o,error:i}=s,l={select:["select",e,t&&"disabled",a&&"multiple",i&&"error"],icon:["icon",`icon${mr(e)}`,o&&"iconOpen",t&&"disabled"],nativeInput:["nativeInput"]};return vn(l,_I,r)},qhe=u.forwardRef(function(r,e){const{"aria-describedby":t,"aria-label":a,autoFocus:o,autoWidth:i,children:l,className:c,defaultOpen:d,defaultValue:p,disabled:h,displayEmpty:g,error:y=!1,IconComponent:b,inputRef:v,labelId:w,MenuProps:C={},multiple:k,name:N,onBlur:O,onChange:R,onClose:L,onFocus:B,onKeyDown:G,onMouseDown:$,onOpen:z,open:Y,readOnly:M,renderValue:q,required:P,SelectDisplayProps:H={},tabIndex:D,type:X,value:se,variant:Q="standard",...xe}=r,[K,Z]=jw({controlled:se,default:p,name:"Select"}),[ve,ae]=jw({controlled:Y,default:d,name:"Select"}),Se=u.useRef(null),Pe=u.useRef(null),[$e,we]=u.useState(null),{current:Ae}=u.useRef(Y!=null),[ze,Ge]=u.useState(),Ue=yo(e,v),ht=u.useCallback(Ke=>{Pe.current=Ke,Ke&&we(Ke)},[]),ee=$e?.parentNode;u.useImperativeHandle(Ue,()=>({focus:()=>{Pe.current.focus()},node:Se.current,value:K}),[K]);const ue=$e!==null&&ve;u.useEffect(()=>{if(!ue||!ee||i||typeof ResizeObserver>"u")return;const Ke=new ResizeObserver(()=>{Ge(ee.clientWidth)});return Ke.observe(ee),()=>{Ke.disconnect()}},[ue,ee,i]),u.useEffect(()=>{d&&ve&&$e&&!Ae&&(Ge(i?null:ee.clientWidth),Pe.current.focus())},[$e,i]),u.useEffect(()=>{o&&Pe.current.focus()},[o]),u.useEffect(()=>{if(!w)return;const Ke=uc(Pe.current).getElementById(w);if(Ke){const kt=()=>{getSelection().isCollapsed&&Pe.current.focus()};return Ke.addEventListener("click",kt),()=>{Ke.removeEventListener("click",kt)}}},[w]);const Oe=(Ke,kt)=>{Ke?z&&z(kt):L&&L(kt),Ae||(Ge(i?null:ee.clientWidth),ae(Ke))},J=Ke=>{$?.(Ke),Ke.button===0&&(Ke.preventDefault(),Pe.current.focus(),Oe(!0,Ke))},I=Ke=>{Oe(!1,Ke)},V=u.Children.toArray(l),re=Ke=>{const kt=V.find(At=>At.props.value===Ke.target.value);kt!==void 0&&(Z(kt.props.value),R&&R(Ke,kt))},pe=Ke=>kt=>{let At;if(kt.currentTarget.hasAttribute("tabindex")){if(k){At=Array.isArray(K)?K.slice():[];const xt=K.indexOf(Ke.props.value);xt===-1?At.push(Ke.props.value):At.splice(xt,1)}else At=Ke.props.value;if(Ke.props.onClick&&Ke.props.onClick(kt),K!==At&&(Z(At),R)){const xt=kt.nativeEvent||kt,Xt=new xt.constructor(xt.type,xt);Object.defineProperty(Xt,"target",{writable:!0,value:{value:At,name:N}}),R(Xt,Ke)}k||Oe(!1,kt)}},ge=Ke=>{M||([" ","ArrowUp","ArrowDown","Enter"].includes(Ke.key)&&(Ke.preventDefault(),Oe(!0,Ke)),G?.(Ke))},Ce=Ke=>{!ue&&O&&(Object.defineProperty(Ke,"target",{writable:!0,value:{value:K,name:N}}),O(Ke))};delete xe["aria-invalid"];let he,ie;const Fe=[];let We=!1;(_w({value:K})||g)&&(q?he=q(K):We=!0);const Qe=V.map(Ke=>{if(!u.isValidElement(Ke))return null;let kt;if(k){if(!Array.isArray(K))throw new Error(tu(2));kt=K.some(At=>s3(At,Ke.props.value)),kt&&We&&Fe.push(Ke.props.children)}else kt=s3(K,Ke.props.value),kt&&We&&(ie=Ke.props.children);return u.cloneElement(Ke,{"aria-selected":kt?"true":"false",onClick:pe(Ke),onKeyUp:At=>{At.key===" "&&At.preventDefault(),Ke.props.onKeyUp&&Ke.props.onKeyUp(At)},role:"option",selected:kt,value:void 0,"data-value":Ke.props.value})});We&&(k?Fe.length===0?he=null:he=Fe.reduce((Ke,kt,At)=>(Ke.push(kt),At<Fe.length-1&&Ke.push(", "),Ke),[]):he=ie);let de=ze;!i&&Ae&&$e&&(de=ee.clientWidth);let Ee;typeof D<"u"?Ee=D:Ee=h?null:0;const le=H.id||(N?`mui-component-select-${N}`:void 0),Ye={...r,variant:Q,value:K,open:ue,error:y},De=Whe(Ye),ct={...C.PaperProps,...typeof C.slotProps?.paper=="function"?C.slotProps.paper(Ye):C.slotProps?.paper},ot={...C.MenuListProps,...typeof C.slotProps?.list=="function"?C.slotProps.list(Ye):C.slotProps?.list},dt=Fm();return n.jsxs(u.Fragment,{children:[n.jsx($he,{as:"div",ref:ht,tabIndex:Ee,role:"combobox","aria-controls":ue?dt:void 0,"aria-disabled":h?"true":void 0,"aria-expanded":ue?"true":"false","aria-haspopup":"listbox","aria-label":a,"aria-labelledby":[w,le].filter(Boolean).join(" ")||void 0,"aria-describedby":t,"aria-required":P?"true":void 0,"aria-invalid":y?"true":void 0,onKeyDown:ge,onMouseDown:h||M?null:J,onBlur:Ce,onFocus:B,...H,ownerState:Ye,className:Hr(H.className,De.select,c),id:le,children:Hhe(he)?n3||(n3=n.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):he}),n.jsx(Vhe,{"aria-invalid":y,value:Array.isArray(K)?K.join(","):K,name:N,ref:Se,"aria-hidden":!0,onChange:re,tabIndex:-1,disabled:h,className:De.nativeInput,autoFocus:o,required:P,...xe,ownerState:Ye}),n.jsx(Uhe,{as:b,className:De.icon,ownerState:Ye}),n.jsx(Aj,{id:`menu-${N||""}`,anchorEl:ee,open:ue,onClose:I,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...C,slotProps:{...C.slotProps,list:{"aria-labelledby":w,role:"listbox","aria-multiselectable":k?"true":void 0,disableListWrap:!0,id:dt,...ot},paper:{...ct,style:{minWidth:de,...ct!=null?ct.style:null}}},children:Qe})]})}),Ghe=s=>{const{classes:r}=s,t=vn({root:["root"]},_I,r);return{...r,...t}},Pk={name:"MuiSelect",slot:"Root",shouldForwardProp:s=>zo(s)&&s!=="variant"},Khe=vr(Ek,Pk)(""),Yhe=vr(Ok,Pk)(""),Zhe=vr(_k,Pk)(""),Kd=u.forwardRef(function(r,e){const t=kn({name:"MuiSelect",props:r}),{autoWidth:a=!1,children:o,classes:i={},className:l,defaultOpen:c=!1,displayEmpty:d=!1,IconComponent:p=mue,id:h,input:g,inputProps:y,label:b,labelId:v,MenuProps:w,multiple:C=!1,native:k=!1,onClose:N,onOpen:O,open:R,renderValue:L,SelectDisplayProps:B,variant:G="outlined",...$}=t,z=k?vhe:qhe,Y=hc(),M=pf({props:t,muiFormControl:Y,states:["variant","error"]}),q=M.variant||G,P={...t,variant:q,classes:i},H=Ghe(P),{root:D,...X}=H,se=g||{standard:n.jsx(Khe,{ownerState:P}),outlined:n.jsx(Yhe,{label:b,ownerState:P}),filled:n.jsx(Zhe,{ownerState:P})}[q],Q=yo(e,Bx(se));return n.jsx(u.Fragment,{children:u.cloneElement(se,{inputComponent:z,inputProps:{children:o,error:M.error,IconComponent:p,variant:q,type:void 0,multiple:C,...k?{id:h}:{autoWidth:a,defaultOpen:c,displayEmpty:d,labelId:v,MenuProps:w,onClose:N,onOpen:O,open:R,renderValue:L,SelectDisplayProps:{id:h,...B}},...y,classes:y?_o(X,y.classes):X,...g?g.props.inputProps:{}},...(C&&k||d)&&q==="outlined"?{notched:!0}:{},ref:Q,className:Hr(se.props.className,l,H.root),...!g&&{variant:q},...$})})});Kd.muiName="Select";const Ks=jce({createStyledComponent:vr("div",{name:"MuiStack",slot:"Root"}),useThemeProps:s=>kn({props:s,name:"MuiStack"})});function Xhe(s){return yn("MuiSwitch",s)}const si=xn("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),Qhe=s=>{const{classes:r,edge:e,size:t,color:a,checked:o,disabled:i}=s,l={root:["root",e&&`edge${mr(e)}`,`size${mr(t)}`],switchBase:["switchBase",`color${mr(a)}`,o&&"checked",i&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},c=vn(l,Xhe,r);return{...r,...c}},Jhe=vr("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[r.root,e.edge&&r[`edge${mr(e.edge)}`],r[`size${mr(e.size)}`]]}})({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${si.thumb}`]:{width:16,height:16},[`& .${si.switchBase}`]:{padding:4,[`&.${si.checked}`]:{transform:"translateX(16px)"}}}}]}),eme=vr(kk,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[r.switchBase,{[`& .${si.input}`]:r.input},e.color!=="default"&&r[`color${mr(e.color)}`]]}})(Pn(({theme:s})=>({position:"absolute",top:0,left:0,zIndex:1,color:s.vars?s.vars.palette.Switch.defaultColor:`${s.palette.mode==="light"?s.palette.common.white:s.palette.grey[300]}`,transition:s.transitions.create(["left","transform"],{duration:s.transitions.duration.shortest}),[`&.${si.checked}`]:{transform:"translateX(20px)"},[`&.${si.disabled}`]:{color:s.vars?s.vars.palette.Switch.defaultDisabledColor:`${s.palette.mode==="light"?s.palette.grey[100]:s.palette.grey[600]}`},[`&.${si.checked} + .${si.track}`]:{opacity:.5},[`&.${si.disabled} + .${si.track}`]:{opacity:s.vars?s.vars.opacity.switchTrackDisabled:`${s.palette.mode==="light"?.12:.2}`},[`& .${si.input}`]:{left:"-100%",width:"300%"}})),Pn(({theme:s})=>({"&:hover":{backgroundColor:s.alpha((s.vars||s).palette.action.active,(s.vars||s).palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(s.palette).filter(ho(["light"])).map(([r])=>({props:{color:r},style:{[`&.${si.checked}`]:{color:(s.vars||s).palette[r].main,"&:hover":{backgroundColor:s.alpha((s.vars||s).palette[r].main,(s.vars||s).palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${si.disabled}`]:{color:s.vars?s.vars.palette.Switch[`${r}DisabledColor`]:`${s.palette.mode==="light"?s.lighten(s.palette[r].main,.62):s.darken(s.palette[r].main,.55)}`}},[`&.${si.checked} + .${si.track}`]:{backgroundColor:(s.vars||s).palette[r].main}}}))]}))),tme=vr("span",{name:"MuiSwitch",slot:"Track"})(Pn(({theme:s})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:s.transitions.create(["opacity","background-color"],{duration:s.transitions.duration.shortest}),backgroundColor:s.vars?s.vars.palette.common.onBackground:`${s.palette.mode==="light"?s.palette.common.black:s.palette.common.white}`,opacity:s.vars?s.vars.opacity.switchTrack:`${s.palette.mode==="light"?.38:.3}`}))),rme=vr("span",{name:"MuiSwitch",slot:"Thumb"})(Pn(({theme:s})=>({boxShadow:(s.vars||s).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),EI=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiSwitch"}),{className:a,color:o="primary",edge:i=!1,size:l="medium",sx:c,slots:d={},slotProps:p={},...h}=t,g={...t,color:o,edge:i,size:l},y=Qhe(g),b={slots:d,slotProps:p},[v,w]=ts("root",{className:Hr(y.root,a),elementType:Jhe,externalForwardedProps:b,ownerState:g,additionalProps:{sx:c}}),[C,k]=ts("thumb",{className:y.thumb,elementType:rme,externalForwardedProps:b,ownerState:g}),N=n.jsx(C,{...k}),[O,R]=ts("track",{className:y.track,elementType:tme,externalForwardedProps:b,ownerState:g});return n.jsxs(v,{...w,children:[n.jsx(eme,{type:"checkbox",icon:N,checkedIcon:N,ref:e,ownerState:g,...h,classes:{...y,root:y.switchBase},slots:{...d.switchBase&&{root:d.switchBase},...d.input&&{input:d.input}},slotProps:{...p.switchBase&&{root:typeof p.switchBase=="function"?p.switchBase(g):p.switchBase},input:{role:"switch"},...p.input&&{input:typeof p.input=="function"?p.input(g):p.input}}}),n.jsx(O,{...R})]})}),TI=u.createContext();function nme(s){return yn("MuiTable",s)}xn("MuiTable",["root","stickyHeader"]);const sme=s=>{const{classes:r,stickyHeader:e}=s;return vn({root:["root",e&&"stickyHeader"]},nme,r)},ame=vr("table",{name:"MuiTable",slot:"Root",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[r.root,e.stickyHeader&&r.stickyHeader]}})(Pn(({theme:s})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...s.typography.body2,padding:s.spacing(2),color:(s.vars||s).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:r})=>r.stickyHeader,style:{borderCollapse:"separate"}}]}))),a3="table",OI=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiTable"}),{className:a,component:o=a3,padding:i="normal",size:l="medium",stickyHeader:c=!1,...d}=t,p={...t,component:o,padding:i,size:l,stickyHeader:c},h=sme(p),g=u.useMemo(()=>({padding:i,size:l,stickyHeader:c}),[i,l,c]);return n.jsx(TI.Provider,{value:g,children:n.jsx(ame,{as:o,role:o===a3?null:"table",ref:e,className:Hr(h.root,a),ownerState:p,...d})})}),Mj=u.createContext();function ome(s){return yn("MuiTableBody",s)}xn("MuiTableBody",["root"]);const ime=s=>{const{classes:r}=s;return vn({root:["root"]},ome,r)},lme=vr("tbody",{name:"MuiTableBody",slot:"Root"})({display:"table-row-group"}),cme={variant:"body"},o3="tbody",PI=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiTableBody"}),{className:a,component:o=o3,...i}=t,l={...t,component:o},c=ime(l);return n.jsx(Mj.Provider,{value:cme,children:n.jsx(lme,{className:Hr(c.root,a),as:o,ref:e,role:o===o3?null:"rowgroup",ownerState:l,...i})})});function dme(s){return yn("MuiTableCell",s)}const ume=xn("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),fme=s=>{const{classes:r,variant:e,align:t,padding:a,size:o,stickyHeader:i}=s,l={root:["root",e,i&&"stickyHeader",t!=="inherit"&&`align${mr(t)}`,a!=="normal"&&`padding${mr(a)}`,`size${mr(o)}`]};return vn(l,dme,r)},pme=vr("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[r.root,r[e.variant],r[`size${mr(e.size)}`],e.padding!=="normal"&&r[`padding${mr(e.padding)}`],e.align!=="inherit"&&r[`align${mr(e.align)}`],e.stickyHeader&&r.stickyHeader]}})(Pn(({theme:s})=>({...s.typography.body2,display:"table-cell",verticalAlign:"inherit",borderBottom:s.vars?`1px solid ${s.vars.palette.TableCell.border}`:`1px solid
    ${s.palette.mode==="light"?s.lighten(s.alpha(s.palette.divider,1),.88):s.darken(s.alpha(s.palette.divider,1),.68)}`,textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(s.vars||s).palette.text.primary,lineHeight:s.typography.pxToRem(24),fontWeight:s.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(s.vars||s).palette.text.primary}},{props:{variant:"footer"},style:{color:(s.vars||s).palette.text.secondary,lineHeight:s.typography.pxToRem(21),fontSize:s.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",[`&.${ume.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:({ownerState:r})=>r.stickyHeader,style:{position:"sticky",top:0,zIndex:2,backgroundColor:(s.vars||s).palette.background.default}}]}))),Ua=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiTableCell"}),{align:a="inherit",className:o,component:i,padding:l,scope:c,size:d,sortDirection:p,variant:h,...g}=t,y=u.useContext(TI),b=u.useContext(Mj),v=b&&b.variant==="head";let w;i?w=i:w=v?"th":"td";let C=c;w==="td"?C=void 0:!C&&v&&(C="col");const k=h||b&&b.variant,N={...t,align:a,component:w,padding:l||(y&&y.padding?y.padding:"normal"),size:d||(y&&y.size?y.size:"medium"),sortDirection:p,stickyHeader:k==="head"&&y&&y.stickyHeader,variant:k},O=fme(N);let R=null;return p&&(R=p==="asc"?"ascending":"descending"),n.jsx(pme,{as:w,ref:e,className:Hr(O.root,o),"aria-sort":R,scope:C,ownerState:N,...g})});function hme(s){return yn("MuiTableContainer",s)}xn("MuiTableContainer",["root"]);const mme=s=>{const{classes:r}=s;return vn({root:["root"]},hme,r)},gme=vr("div",{name:"MuiTableContainer",slot:"Root"})({width:"100%",overflowX:"auto"}),AI=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiTableContainer"}),{className:a,component:o="div",...i}=t,l={...t,component:o},c=mme(l);return n.jsx(gme,{ref:e,as:o,className:Hr(c.root,a),ownerState:l,...i})});function yme(s){return yn("MuiTableHead",s)}xn("MuiTableHead",["root"]);const xme=s=>{const{classes:r}=s;return vn({root:["root"]},yme,r)},vme=vr("thead",{name:"MuiTableHead",slot:"Root"})({display:"table-header-group"}),bme={variant:"head"},i3="thead",MI=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiTableHead"}),{className:a,component:o=i3,...i}=t,l={...t,component:o},c=xme(l);return n.jsx(Mj.Provider,{value:bme,children:n.jsx(vme,{as:o,className:Hr(c.root,a),ref:e,role:o===i3?null:"rowgroup",ownerState:l,...i})})});function wme(s){return yn("MuiTableRow",s)}const l3=xn("MuiTableRow",["root","selected","hover","head","footer"]),jme=s=>{const{classes:r,selected:e,hover:t,head:a,footer:o}=s;return vn({root:["root",e&&"selected",t&&"hover",a&&"head",o&&"footer"]},wme,r)},Cme=vr("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(s,r)=>{const{ownerState:e}=s;return[r.root,e.head&&r.head,e.footer&&r.footer]}})(Pn(({theme:s})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${l3.hover}:hover`]:{backgroundColor:(s.vars||s).palette.action.hover},[`&.${l3.selected}`]:{backgroundColor:s.alpha((s.vars||s).palette.primary.main,(s.vars||s).palette.action.selectedOpacity),"&:hover":{backgroundColor:s.alpha((s.vars||s).palette.primary.main,`${(s.vars||s).palette.action.selectedOpacity} + ${(s.vars||s).palette.action.hoverOpacity}`)}}}))),c3="tr",om=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiTableRow"}),{className:a,component:o=c3,hover:i=!1,selected:l=!1,...c}=t,d=u.useContext(Mj),p={...t,component:o,hover:i,selected:l,head:d&&d.variant==="head",footer:d&&d.variant==="footer"},h=jme(p);return n.jsx(Cme,{as:o,ref:e,className:Hr(h.root,a),role:o===c3?null:"row",ownerState:p,...c})});function Sme(s){return yn("MuiTextField",s)}xn("MuiTextField",["root"]);const Nme={standard:Ek,filled:_k,outlined:Ok},kme=s=>{const{classes:r}=s;return vn({root:["root"]},Sme,r)},_me=vr(tf,{name:"MuiTextField",slot:"Root"})({}),Ns=u.forwardRef(function(r,e){const t=kn({props:r,name:"MuiTextField"}),{autoComplete:a,autoFocus:o=!1,children:i,className:l,color:c="primary",defaultValue:d,disabled:p=!1,error:h=!1,FormHelperTextProps:g,fullWidth:y=!1,helperText:b,id:v,InputLabelProps:w,inputProps:C,InputProps:k,inputRef:N,label:O,maxRows:R,minRows:L,multiline:B=!1,name:G,onBlur:$,onChange:z,onFocus:Y,placeholder:M,required:q=!1,rows:P,select:H=!1,SelectProps:D,slots:X={},slotProps:se={},type:Q,value:xe,variant:K="outlined",...Z}=t,ve={...t,autoFocus:o,color:c,disabled:p,error:h,fullWidth:y,multiline:B,required:q,select:H,variant:K},ae=kme(ve),Se=Fm(v),Pe=b&&Se?`${Se}-helper-text`:void 0,$e=O&&Se?`${Se}-label`:void 0,we=Nme[K],Ae={slots:X,slotProps:{input:k,inputLabel:w,htmlInput:C,formHelperText:g,select:D,...se}},ze={},Ge=Ae.slotProps.inputLabel;K==="outlined"&&(Ge&&typeof Ge.shrink<"u"&&(ze.notched=Ge.shrink),ze.label=O),H&&((!D||!D.native)&&(ze.id=void 0),ze["aria-describedby"]=void 0);const[Ue,ht]=ts("root",{elementType:_me,shouldForwardComponentProp:!0,externalForwardedProps:{...Ae,...Z},ownerState:ve,className:Hr(ae.root,l),ref:e,additionalProps:{disabled:p,error:h,fullWidth:y,required:q,color:c,variant:K}}),[ee,ue]=ts("input",{elementType:we,externalForwardedProps:Ae,additionalProps:ze,ownerState:ve}),[Oe,J]=ts("inputLabel",{elementType:ix,externalForwardedProps:Ae,ownerState:ve}),[I,V]=ts("htmlInput",{elementType:"input",externalForwardedProps:Ae,ownerState:ve}),[re,pe]=ts("formHelperText",{elementType:dpe,externalForwardedProps:Ae,ownerState:ve}),[ge,Ce]=ts("select",{elementType:Kd,externalForwardedProps:Ae,ownerState:ve}),he=n.jsx(ee,{"aria-describedby":Pe,autoComplete:a,autoFocus:o,defaultValue:d,fullWidth:y,multiline:B,name:G,rows:P,maxRows:R,minRows:L,type:Q,value:xe,id:Se,inputRef:N,onBlur:$,onChange:z,onFocus:Y,placeholder:M,inputProps:V,slots:{input:X.htmlInput?I:void 0},...ue});return n.jsxs(Ue,{...ht,children:[O!=null&&O!==""&&n.jsx(Oe,{htmlFor:Se,id:$e,...J,children:O}),H?n.jsx(ge,{"aria-describedby":Pe,id:Se,labelId:$e,value:xe,input:he,...Ce,children:i}):he,b&&n.jsx(re,{id:Pe,...pe,children:b})]})}),II=u.createContext(void 0),Eme=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(()=>i(null),[]),c=u.useCallback(async v=>{try{a(!0),i(null);const{data:w}=await nt.post("/shipments",v);if(!w.success)throw new Error(w.message||"Failed to create shipment");return e(C=>[w.data,...C.filter(k=>k._id!==w.data._id)]),w.data}catch(w){const C=w?.response?.data?.message||w?.message||"Failed to create shipment";throw i(C),w}finally{a(!1)}},[]),d=u.useCallback(async v=>{try{a(!0),i(null);const{data:w}=await nt.get(`/shipments/transfer/${v}`);if(!w.success)throw new Error(w.message||"Failed to fetch shipment");const C=w.data||null;return C&&e(k=>k.some(O=>O._id===C._id)?k.map(O=>O._id===C._id?C:O):[C,...k]),C}catch(w){const C=w?.response?.data?.message||w?.message||"Failed to fetch shipment";throw i(C),w}finally{a(!1)}},[]),p=u.useCallback(async(v,w)=>{try{a(!0),i(null);const{data:C}=await nt.put(`/shipments/${v}`,w);if(!C.success)throw new Error(C.message||"Failed to update shipment");return e(k=>k.map(N=>N._id===C.data._id?C.data:N)),C.data}catch(C){const k=C?.response?.data?.message||C?.message||"Failed to update shipment";throw i(k),C}finally{a(!1)}},[]),h=u.useCallback(async v=>{try{a(!0),i(null);const{data:w}=await nt.delete(`/shipments/${v}`);if(!w.success)throw new Error(w.message||"Failed to delete shipment");e(C=>C.filter(k=>k._id!==v))}catch(w){const C=w?.response?.data?.message||w?.message||"Failed to delete shipment";throw i(C),w}finally{a(!1)}},[]),g=u.useCallback(async v=>{try{a(!0),i(null);const{data:w}=await nt.get(`/shipments/${v}/in-transit`);if(!w.success)throw new Error(w.message||"Failed to mark shipment in transit");return e(C=>C.map(k=>k._id===v?{...k,status:"in_transit"}:k)),w.data}catch(w){const C=w?.response?.data?.message||w?.message||"Failed to mark shipment in transit";throw i(C),w}finally{a(!1)}},[]),y=u.useCallback(async(v,w)=>{try{a(!0),i(null);const{data:C}=await nt.post(`/shipments/${v}/receive`,w);if(!C.success)throw new Error(C.message||"Failed to receive shipment");return e(k=>k.map(N=>N._id===v?{...N,status:"received",receivedDate:new Date().toISOString()}:N)),C.data}catch(C){const k=C?.response?.data?.message||C?.message||"Failed to receive shipment";throw i(k),C}finally{a(!1)}},[]),b={shipments:r,loading:t,error:o,createShipment:c,getShipmentByTransferId:d,updateShipment:p,deleteShipment:h,markShipmentInTransit:g,receiveShipment:y,clearError:l};return n.jsx(II.Provider,{value:b,children:s})},Ak=()=>{const s=u.useContext(II);if(!s)throw new Error("useShipments must be used within a ShipmentProvider");return s},Tme=["4PX-99","Minutos","Aeronet","AGS","Amazon","Amazon Logistics UK","AMM Expedition","ANpost","Anuj Logistics","Apple Express"],Ome=()=>{const s=dr(),r=Ri(),a=ks().id||r.state?.transferId,o=r.state?.entries||[],{createShipment:i,loading:l}=Ak(),[c,d]=u.useState(""),[p,h]=u.useState(""),[g,y]=u.useState(""),b=u.useMemo(()=>o.reduce((w,C)=>w+(C?.quantity||0),0),[o]),v=async()=>{!a||!c||!p||!g||(await i({transferId:a,estimatedArrivalDate:c,trackingNumber:p,carrier:g}),s(`/products/transfers/${a}`))};return n.jsx(Yt,{children:n.jsx(cr,{sx:{width:"100%",color:"#000000",m:-3,p:3,minHeight:"100%"},children:n.jsxs(cr,{sx:{maxWidth:1200,mx:"auto"},children:[n.jsxs(Ms,{elevation:0,sx:{p:4,mb:4,borderRadius:3,background:"linear-gradient(135deg, #0ea5e9 0%, #6366f1 100%)",color:"white"},children:[n.jsx(Bt,{variant:"h4",sx:{fontWeight:800,mb:1},children:"Create Shipment"}),n.jsxs(Bt,{variant:"body1",sx:{opacity:.9},children:["Transfer #",a?.slice(-8)||"","  ",b," units"]})]}),n.jsxs(Ks,{spacing:3,children:[n.jsxs(Ms,{elevation:0,sx:{p:3,borderRadius:3,border:"1px solid #e5e7eb",bgcolor:"white"},children:[n.jsx(Bt,{variant:"h6",sx:{fontWeight:700,mb:2},children:"Items to ship"}),n.jsxs(Ks,{spacing:2,children:[o.map(w=>n.jsxs(cr,{sx:{display:"flex",alignItems:"center",gap:2,p:2,border:"1px solid #e5e7eb",borderRadius:2},children:[n.jsx(pI,{variant:"rounded",src:w.variantId?.images?.[0]||void 0,sx:{width:48,height:48}}),n.jsxs(cr,{sx:{flex:1,minWidth:0},children:[n.jsx(Bt,{variant:"subtitle1",sx:{fontWeight:700},children:w.variantId?.productName||"Unnamed product"}),!!w.variantId?.optionValues&&n.jsx(Bt,{variant:"body2",sx:{color:"#6b7280"},children:Object.entries(w.variantId.optionValues).map(([C,k])=>`${C}: ${k}`).join("  ")})]}),n.jsx(Sk,{label:`Qty: ${w.quantity}`})]},w._id)),o.length===0&&n.jsx(Bt,{variant:"body2",color:"text.secondary",children:"No entries found from transfer state."})]})]}),n.jsxs(Ms,{elevation:0,sx:{p:3,borderRadius:3,border:"1px solid #e5e7eb",bgcolor:"white"},children:[n.jsx(Bt,{variant:"h6",sx:{fontWeight:700,mb:2},children:"Shipment details"}),n.jsxs(Ks,{spacing:2,children:[n.jsx(Ns,{type:"date",label:"Estimated arrival date",InputLabelProps:{shrink:!0},value:c,onChange:w=>d(w.target.value)}),n.jsx(Ns,{label:"Tracking number",placeholder:"Enter tracking number",value:p,onChange:w=>h(w.target.value)}),n.jsxs(tf,{children:[n.jsx(ix,{children:"Shipping carrier"}),n.jsx(Kd,{label:"Shipping carrier",value:g,onChange:w=>y(w.target.value),children:Tme.map(w=>n.jsx(zn,{value:w,children:w},w))})]})]}),n.jsxs(cr,{sx:{display:"flex",justifyContent:"flex-end",mt:3,gap:1},children:[n.jsx(Zn,{variant:"text",onClick:()=>s(-1),children:"Back"}),n.jsx(Zn,{variant:"contained",disabled:!c||!p||!g||!a||l,onClick:v,children:l?"Creating...":"Create shipment"})]})]})]})]})})})},RI=u.createContext(void 0),Pme=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(()=>e([]),[]),c=u.useCallback(()=>i(null),[]),d=u.useCallback(async h=>{try{a(!0),i(null);const g=await nt.get(`/transfer-entries/transfer/${h}`);if(!g.data.success)throw new Error("Failed to fetch transfer entries");const y=g.data.data||[];return e(y),y}catch(g){const y=g?.response?.data?.message||g?.message||"Failed to fetch transfer entries";throw i(y),g}finally{a(!1)}},[]),p={entries:r,loading:t,error:o,fetchByTransferId:d,clear:l,clearError:c};return n.jsx(RI.Provider,{value:p,children:s})},DI=()=>{const s=u.useContext(RI);if(!s)throw new Error("useTransferEntries must be used within a TransferEntriesProvider");return s},Ame=()=>{const s=dr(),{id:r}=ks(),{shipmentId:e}=ks(),{entries:t,fetchByTransferId:a,loading:o}=DI(),{receiveShipment:i,loading:l}=Ak();u.useEffect(()=>{r&&a(r).catch(()=>{})},[r,a]);const[c,d]=u.useState({}),[p,h]=u.useState({}),g=(v,w)=>C=>{const k=Number(C.target.value??0),N=Math.max(0,Math.min(w,isNaN(k)?0:k));d(O=>({...O,[v]:N})),h(O=>{const R=O[v]??0,L=Math.max(0,w-N),B=Math.max(0,Math.min(L,R));return B===R?O:{...O,[v]:B}})},y=(v,w)=>C=>{const k=Number(C.target.value??0),N=c[v]??0,O=Math.max(0,w-N),R=Math.max(0,Math.min(O,isNaN(k)?0:k));h(L=>({...L,[v]:R}))},b=async()=>{if(!e)return;const v=t.map(w=>({entryId:w._id,accept:Number(c[w._id]||0),reject:Number(p[w._id]||0)}));await i(e,v),s("/products/transfers")};return n.jsx(Yt,{children:n.jsx(cr,{sx:{width:"100%",color:"#000000",m:-3,p:3,minHeight:"100%"},children:n.jsxs(cr,{sx:{maxWidth:1200,mx:"auto"},children:[n.jsxs(Ms,{elevation:0,sx:{p:4,mb:4,borderRadius:3,background:"linear-gradient(135deg, #0ea5e9 0%, #6366f1 100%)",color:"white"},children:[n.jsx(Bt,{variant:"h4",sx:{fontWeight:800,mb:1},children:"Receive Shipment"}),n.jsx(Bt,{variant:"body1",sx:{opacity:.9},children:"Control how much you want to accept or reject per variant."})]}),n.jsxs(Ms,{elevation:0,sx:{p:3,borderRadius:3,border:"1px solid #e5e7eb",bgcolor:"white"},children:[o?n.jsx(Bt,{variant:"body2",color:"text.secondary",children:"Loading entries..."}):n.jsx(AI,{children:n.jsxs(OI,{size:"small",children:[n.jsx(MI,{children:n.jsxs(om,{children:[n.jsx(Ua,{children:"Product"}),n.jsx(Ua,{children:"Variant"}),n.jsx(Ua,{align:"right",children:"Transferred Qty"}),n.jsx(Ua,{align:"right",children:"Accept"}),n.jsx(Ua,{align:"right",children:"Reject"})]})}),n.jsx(PI,{children:t.map(v=>n.jsxs(om,{hover:!0,children:[n.jsx(Ua,{children:n.jsxs(Ks,{direction:"row",spacing:1,alignItems:"center",children:[n.jsx(pI,{variant:"rounded",src:v.variantId.images?.[0]||void 0,sx:{width:36,height:36}}),n.jsx(Bt,{variant:"body2",fontWeight:700,children:v.variantId.productName||"Unnamed product"})]})}),n.jsx(Ua,{children:n.jsx(Bt,{variant:"caption",color:"text.secondary",children:Object.entries(v.variantId.optionValues||{}).map(([w,C])=>`${w}: ${C}`).join("  ")})}),n.jsx(Ua,{align:"right",sx:{fontWeight:700},children:v.quantity}),n.jsx(Ua,{align:"right",sx:{minWidth:140},children:n.jsx(Ns,{size:"small",type:"number",inputProps:{min:0,max:v.quantity},value:c[v._id]??"",onChange:g(v._id,Number(v.quantity)||0)})}),n.jsx(Ua,{align:"right",sx:{minWidth:140},children:n.jsx(Ns,{size:"small",type:"number",inputProps:{min:0,max:Math.max(0,(Number(v.quantity)||0)-(c[v._id]??0))},value:p[v._id]??"",onChange:y(v._id,Number(v.quantity)||0)})})]},v._id))})]})}),n.jsxs(cr,{sx:{display:"flex",justifyContent:"flex-end",gap:1,mt:3},children:[n.jsx(Zn,{variant:"text",onClick:()=>s(-1),children:"Cancel"}),n.jsx(Zn,{variant:"contained",onClick:b,disabled:l,children:"Save"})]})]})]})})})},Mme=({option:s,onClick:r})=>{const e=s.icon;return n.jsx("button",{onClick:()=>r(s.route),className:"bg-white rounded-lg border border-gray-200 p-4 hover:bg-gray-50 transition-colors text-left",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"shrink-0 w-8 h-8 bg-gray-100 rounded flex items-center justify-center",children:n.jsx(e,{className:"w-4 h-4 text-gray-600"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-0.5",children:s.name}),n.jsx("p",{className:"text-xs text-gray-600",children:s.description})]})]})})},Ime=()=>{const s=dr(),r=[{name:"Customer Tags",route:"customer-tags",icon:Gw,description:"Manage tags for customers"},{name:"Product Tags",route:"product-tags",icon:_p,description:"Manage tags for products"},{name:"Product Types",route:"product-types",icon:ed,description:"Manage product type tags"},{name:"Transfer Tags",route:"transfer-tags",icon:ou,description:"Manage tags for transfers"},{name:"Purchase Order Tags",route:"purchase-order-tags",icon:Qd,description:"Manage tags for purchase orders"}],e=u.useCallback(t=>{s(`/tag-management/${t}`)},[s]);return n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:r.map(t=>n.jsx(Mme,{option:t,onClick:e},t.route))})},Rme=()=>n.jsx(Yt,{children:n.jsx("div",{className:"min-h-screen",children:n.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 py-6",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Tag Management"}),n.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Select a tag type to manage"})]}),n.jsx(Ime,{})]})})}),Dme=()=>{const{id:s}=ks(),r=dr(),{transfers:e,deleteTransfer:t,updateTransfer:a,markReadyToShip:o,setTransfers:i}=ak(),l=u.useMemo(()=>e.find(ae=>ae._id===s),[e,s]),[c,d]=u.useState(!1),[p,h]=u.useState(!1),[g,y]=u.useState(!1),{entries:b,loading:v,error:w,fetchByTransferId:C}=DI(),{getShipmentByTransferId:k,updateShipment:N,deleteShipment:O,shipments:R,loading:L,markShipmentInTransit:B}=Ak(),G=u.useMemo(()=>l?._id&&R.find(ae=>ae.transferId===l._id)||null,[R,l?._id]),[$,z]=u.useState(!1),[Y,M]=u.useState(!1),[q,P]=u.useState(""),[H,D]=u.useState(""),[X,se]=u.useState(""),[Q,xe]=u.useState(!1);u.useEffect(()=>{l?._id&&(C(l._id).catch(()=>{}),k(l._id).catch(()=>{}))},[l?._id,C,k]);const K=async()=>{if(l)try{await t(l._id),d(!1),r("/products/transfers")}catch(ae){console.error("Failed to delete transfer:",ae)}},Z=async()=>{if(l)try{await a(l._id,{status:"cancelled"}),h(!1)}catch(ae){console.error("Failed to cancel transfer:",ae)}},ve=async()=>{if(l)try{await o(l._id),y(!1)}catch(ae){console.error("Failed to mark ready to ship:",ae)}};return l?n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>r("/products/transfers"),className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(gn,{className:"w-4 h-4"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-xl font-medium text-gray-900",children:["Transfer #",l._id.slice(-8)]}),n.jsxs("p",{className:"text-xs text-gray-600 mt-0.5",children:["Created ",new Date(l.createdAt).toLocaleString()]})]})]}),n.jsx(Lme,{currentLabel:l.status.replace(/_/g," "),transferId:l._id,onDeleteClick:()=>d(!0),onCancelClick:()=>h(!0),isCancelled:l.status==="cancelled",status:l.status,onReadyClick:()=>y(!0),onCreateShipment:()=>r(`/products/transfers/${l._id}/shipment/new`,{state:{transferId:l._id,entries:b}}),hasShipment:!!G})]})}),n.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 space-y-4",children:[l.status==="cancelled"&&n.jsx("div",{className:"border border-red-200 bg-red-50 p-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Zu,{className:"w-5 h-5 text-red-600"}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-sm font-medium text-red-900 mb-0.5",children:"Transfer Cancelled"}),n.jsx("p",{className:"text-xs text-red-700",children:"This transfer has been cancelled and cannot be modified. You can view the details but no actions are available."})]})]})}),n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Shipment"}),L?n.jsx("p",{className:"text-sm text-gray-600",children:"Loading shipment..."}):G?n.jsxs("div",{className:"border border-gray-200 bg-gray-50 p-3",children:[n.jsxs("p",{className:"text-sm font-medium text-gray-900 mb-1",children:["Scheduled for ",G.carrier||""," delivery for ",G.estimatedArrivalDate?new Date(G.estimatedArrivalDate).toLocaleDateString():""]}),n.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Tracking number: ",n.jsx("span",{className:"font-medium",children:G.trackingNumber||""})]}),n.jsx("span",{className:"inline-block px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-700",children:G.status.replace("_"," ")}),n.jsx("div",{className:"flex gap-2 mt-3 flex-wrap",children:G.status==="in_transit"?n.jsx("button",{onClick:()=>r(`/products/transfers/${l._id}/shipment/${G._id}/receive`),className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Receive shipment"}):G.status==="received"?null:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>{P(G.trackingNumber||""),D(G.carrier||""),se(G.estimatedArrivalDate?G.estimatedArrivalDate.slice(0,10):""),z(!0)},className:"px-3 py-1.5 text-sm font-medium border border-gray-200 hover:bg-gray-50 transition-colors",children:"Edit tracking"}),n.jsx("button",{onClick:()=>M(!0),className:"px-3 py-1.5 text-sm font-medium border border-gray-200 hover:bg-gray-50 transition-colors text-red-600",children:"Delete shipment"}),n.jsx("button",{onClick:()=>xe(!0),className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Mark as in transit"})]})})]}):n.jsx("div",{className:"text-center py-2",children:n.jsx("p",{className:"text-sm text-gray-600",children:"No shipment created yet."})})]}),n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Transfer Locations"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[n.jsxs("div",{className:"border border-gray-200 bg-gray-50 p-3",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(kp,{className:"w-4 h-4 text-gray-600"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Origin Location"})]}),n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:l.originLocationId?.name}),n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:l.originLocationId?.address}),n.jsxs("p",{className:"text-xs text-gray-600",children:[l.originLocationId?.city,", ",l.originLocationId?.state," ",l.originLocationId?.postalCode]})]}),n.jsxs("div",{className:"border border-gray-200 bg-gray-50 p-3",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(kp,{className:"w-4 h-4 text-gray-600"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Destination Location"})]}),n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:l.destinationLocationId?.name}),n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:l.destinationLocationId?.address}),n.jsxs("p",{className:"text-xs text-gray-600",children:[l.destinationLocationId?.city,", ",l.destinationLocationId?.state," ",l.destinationLocationId?.postalCode]})]})]})]}),n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Transfer Entries"}),n.jsxs("div",{className:"border border-gray-200 bg-gray-50 p-3",children:[v&&n.jsx("p",{className:"text-sm text-gray-600",children:"Loading entries..."}),w&&n.jsx("p",{className:"text-sm text-red-600",children:w}),!v&&!w&&(b.length?n.jsx("div",{className:"border border-gray-200 overflow-hidden",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-white",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Products"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"SKU"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"At origin"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Quantity"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(ae=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[ae.variantId.images?.[0]?n.jsx("img",{src:ae.variantId.images[0],alt:ae.variantId.productName||"Product",className:"w-10 h-10 object-cover"}):n.jsx("div",{className:"w-10 h-10 bg-gray-200"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:ae.variantId.productName||"Unnamed product"}),!!Object.keys(ae.variantId.optionValues||{}).length&&n.jsx("p",{className:"text-xs text-gray-600",children:Object.entries(ae.variantId.optionValues).map(([Se,Pe])=>`${Se}: ${Pe}`).join("  ")})]})]})}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:ae.variantId.sku}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:typeof ae.atOrigin=="number"?ae.atOrigin:0}),n.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-900 text-right",children:ae.quantity})]},ae._id))})]})}):n.jsxs("div",{className:"text-center py-3",children:[n.jsx(ed,{className:"w-8 h-8 text-gray-400 mx-auto mb-1"}),n.jsx("p",{className:"text-sm text-gray-600",children:"No entries added to this transfer"})]}))]})]}),n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Transfer Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[n.jsxs("div",{className:"border border-gray-200 bg-gray-50 p-3",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[n.jsx(ab,{className:"w-4 h-4 text-gray-600"}),n.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Reference Name"})]}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:l.referenceName||"No reference"})]}),n.jsxs("div",{className:"border border-gray-200 bg-gray-50 p-3",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[n.jsx(Ww,{className:"w-4 h-4 text-gray-600"}),n.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Transfer Date"})]}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:l.transferDate?new Date(l.transferDate).toLocaleDateString():"Not set"}),l.transferDate&&n.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:new Date(l.transferDate).toLocaleTimeString()})]}),n.jsxs("div",{className:"border border-gray-200 bg-gray-50 p-3",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[n.jsx(ab,{className:"w-4 h-4 text-gray-600"}),n.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Store ID"})]}),n.jsx("p",{className:"text-sm font-medium text-gray-900 font-mono",children:l.storeId})]})]})]}),n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Transfer Tags"}),n.jsx("div",{className:"border border-gray-200 bg-gray-50 p-3 min-h-[80px] flex items-center",children:l.tags?.length?n.jsx("div",{className:"flex flex-wrap gap-1",children:l.tags.map(ae=>n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-700",children:ae.name},ae._id))}):n.jsxs("div",{className:"text-center w-full",children:[n.jsx(_p,{className:"w-8 h-8 text-gray-400 mx-auto mb-1"}),n.jsx("p",{className:"text-sm text-gray-600",children:"No tags assigned to this transfer"})]})})]}),n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Transfer Notes"}),n.jsx("div",{className:"border border-gray-200 bg-gray-50 p-3 min-h-[100px]",children:l.note?n.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:l.note}):n.jsxs("div",{className:"text-center py-2",children:[n.jsx(Qd,{className:"w-8 h-8 text-gray-400 mx-auto mb-1"}),n.jsx("p",{className:"text-sm text-gray-600",children:"No notes added to this transfer"})]})})]})]}),n.jsxs(en,{open:c,onClose:()=>d(!1),title:n.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[n.jsx(Zu,{className:"w-5 h-5"}),n.jsx("span",{children:"Delete Transfer"})]}),actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>d(!1),className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"No, Cancel"}),n.jsx("button",{onClick:K,className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Yes, Delete Transfer"})]}),children:[n.jsx("p",{className:"text-sm text-gray-900 mb-2",children:"Do you really want to delete this transfer?"}),n.jsx("div",{className:"p-2 bg-red-50 border border-red-200 mb-2",children:n.jsxs("p",{className:"text-xs text-red-600 font-medium",children:["Transfer ID: ",l?._id]})}),n.jsx("p",{className:"text-xs text-gray-600",children:"This action cannot be undone. The transfer and all its associated entries will be permanently deleted."})]}),n.jsxs(en,{open:p,onClose:()=>h(!1),title:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Zu,{className:"w-5 h-5 text-gray-600"}),n.jsx("span",{children:"Cancel Transfer"})]}),actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>h(!1),className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"No, Keep Transfer"}),n.jsx("button",{onClick:Z,className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Yes, Cancel Transfer"})]}),children:[n.jsx("p",{className:"text-sm text-gray-900 mb-2",children:"Are you sure you want to cancel this transfer?"}),n.jsx("div",{className:"p-2 bg-gray-50 border border-gray-200 mb-2",children:n.jsxs("p",{className:"text-xs text-gray-600 font-medium",children:["Transfer ID: ",l?._id]})}),n.jsx("p",{className:"text-xs text-gray-600",children:"Once cancelled, this transfer cannot be modified or reactivated. The transfer will remain in your records for reference."})]}),n.jsxs(en,{open:g,onClose:()=>y(!1),title:"Mark as Ready to Ship",maxWidth:"md",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>y(!1),className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:ve,className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Confirm"})]}),children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Mark as ready to ship"}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Marking the transfer as ready to ship will automatically reserve all inventory and stock all unavailable items at the shop location."}),n.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 mb-3",children:[n.jsxs("p",{className:"text-xs text-gray-600",children:["Origin: ",n.jsx("span",{className:"font-medium",children:l.originLocationId?.name})]}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Destination: ",n.jsx("span",{className:"font-medium",children:l.destinationLocationId?.name})]})]}),n.jsxs("div",{className:"p-3 bg-white border border-gray-200",children:[n.jsx("p",{className:"text-xs font-medium text-gray-900 mb-2",children:"What happens next"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs text-gray-600",children:[n.jsxs("li",{children:["We will ",n.jsx("span",{className:"font-medium",children:"reserve"})," the transfer quantities at the origin location so they cannot be sold."]}),n.jsxs("li",{children:["Origin inventory will be updated: ",n.jsx("span",{className:"font-medium",children:"unavailable increases"})," by the transfer quantity and ",n.jsx("span",{className:"font-medium",children:"available decreases"})," accordingly. On hand does not change."]}),n.jsx("li",{children:"No stock physically moves yet. Destination inventory remains unchanged until shipment is created and received."})]})]})]}),n.jsx(en,{open:$,onClose:()=>z(!1),title:"Edit shipment",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>z(!1),className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:async()=>{G&&(await N(G._id,{trackingNumber:q,carrier:H,estimatedArrivalDate:X||void 0}),z(!1))},className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Save"})]}),children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Tracking number"}),n.jsx("input",{type:"text",value:q,onChange:ae=>P(ae.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Shipping carrier"}),n.jsx("input",{type:"text",value:H,onChange:ae=>D(ae.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Estimated arrival date"}),n.jsx("input",{type:"date",value:X,onChange:ae=>se(ae.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]})]})}),n.jsx(en,{open:Y,onClose:()=>M(!1),title:n.jsx("span",{className:"text-red-600",children:"Delete shipment"}),actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>M(!1),className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:async()=>{G&&(await O(G._id),M(!1))},className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Delete"})]}),children:n.jsx("p",{className:"text-sm text-gray-900",children:"Are you sure you want to delete this shipment?"})}),n.jsxs(en,{open:Q,onClose:()=>xe(!1),title:"Mark shipment as in transit",maxWidth:"md",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>xe(!1),className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:async()=>{if(G)try{const ae=await B(G._id);i(Se=>Se.map(Pe=>Pe._id===ae.transferId?{...Pe,status:"in_progress"}:Pe)),xe(!1)}catch(ae){console.error("Failed to mark in transit",ae)}},className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Mark as in transit"})]}),children:[n.jsx("p",{className:"text-sm text-gray-900 mb-3",children:"Are you sure you want to mark this transfer as in transit? These units will be marked as incoming to the destination and allowed to be received."}),n.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 mb-3",children:[n.jsxs("p",{className:"text-xs text-gray-600",children:["Origin: ",n.jsx("span",{className:"font-medium",children:l.originLocationId?.name})]}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Destination: ",n.jsx("span",{className:"font-medium",children:l.destinationLocationId?.name})]}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Total units: ",n.jsx("span",{className:"font-medium",children:b.reduce((ae,Se)=>ae+(Se.quantity||0),0)})]})]}),n.jsxs("div",{className:"p-3 bg-white border border-gray-200",children:[n.jsx("p",{className:"text-xs font-medium text-gray-900 mb-2",children:"What happens next"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs text-gray-600",children:[n.jsx("li",{children:"Origin: unavailable decreases by the transfer quantity."}),n.jsx("li",{children:"Destination: incoming increases by the transfer quantity."}),n.jsxs("li",{children:["Transfer status changes to ",n.jsx("span",{className:"font-medium",children:"in progress"}),"."]}),n.jsxs("li",{children:["Shipment status changes to ",n.jsx("span",{className:"font-medium",children:"in transit"}),"."]})]})]})]})]})}):n.jsx(Yt,{children:n.jsx("div",{className:"min-h-screen",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:n.jsxs("div",{className:"border border-gray-200 p-8 text-center",children:[n.jsx(ed,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),n.jsx("h1",{className:"text-lg font-medium text-gray-900 mb-1",children:"Transfer Not Found"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"The transfer you're looking for doesn't exist or has been removed."}),n.jsx("button",{onClick:()=>r("/products/transfers"),className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Back to Transfers"})]})})})})},Lme=({currentLabel:s,transferId:r,onDeleteClick:e,onCancelClick:t,onReadyClick:a,onCreateShipment:o,isCancelled:i,status:l,hasShipment:c})=>{const[d,p]=u.useState(!1),[h,g]=u.useState(!1),y=u.useRef(null),b=u.useRef(null);u.useEffect(()=>{const C=k=>{y.current&&!y.current.contains(k.target)&&p(!1),b.current&&!b.current.contains(k.target)&&g(!1)};return(d||h)&&document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[d,h]);const v=l==="draft",w=l==="ready_to_ship";return n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-700 capitalize",children:s}),w&&!c&&n.jsx("button",{onClick:o,className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Create shipment"}),v&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"relative",ref:y,children:[n.jsxs("button",{disabled:i,onClick:()=>p(!d),className:"px-3 py-1.5 text-sm font-medium border border-gray-200 hover:bg-gray-50 transition-colors disabled:bg-gray-50 disabled:text-gray-400 disabled:cursor-not-allowed flex items-center gap-1",children:["Mark as",n.jsx(Ys,{className:"w-4 h-4"})]}),d&&n.jsxs("div",{className:"absolute right-0 mt-1 w-48 bg-white border border-gray-200 shadow-lg z-10",children:[v&&n.jsx("button",{onClick:()=>{p(!1),a()},className:"w-full text-left px-4 py-2 text-sm text-gray-900 hover:bg-gray-50 transition-colors",children:"Ready to ship"}),n.jsx("button",{onClick:()=>p(!1),className:"w-full text-left px-4 py-2 text-sm text-gray-900 hover:bg-gray-50 transition-colors",children:"In progress"}),n.jsx("button",{onClick:()=>p(!1),className:"w-full text-left px-4 py-2 text-sm text-gray-900 hover:bg-gray-50 transition-colors",children:"Transferred"})]})]}),n.jsxs("div",{className:"relative",ref:b,children:[n.jsxs("button",{disabled:i,onClick:()=>g(!h),className:"px-3 py-1.5 text-sm font-medium border border-gray-200 hover:bg-gray-50 transition-colors disabled:bg-gray-50 disabled:text-gray-400 disabled:cursor-not-allowed flex items-center gap-1",children:["More actions",n.jsx(Ys,{className:"w-4 h-4"})]}),h&&n.jsxs("div",{className:"absolute right-0 mt-1 w-48 bg-white border border-gray-200 shadow-lg z-10",children:[!i&&n.jsx("button",{onClick:()=>{g(!1),t()},className:"w-full text-left px-4 py-2 text-sm text-gray-900 hover:bg-gray-50 transition-colors",children:"Cancel transfer"}),v&&!i&&!w&&n.jsxs("button",{onClick:()=>{g(!1),e()},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-50 transition-colors flex items-center gap-2",children:[n.jsx(Xs,{className:"w-4 h-4"}),"Delete transfer"]})]})]})]})]})},Fme=({onCreateTransfer:s})=>n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Transfers"}),n.jsx("button",{onClick:s,className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Create Transfer"})]})}),Bme=()=>{const s=dr(),{fetchTransfersByStoreId:r,transfers:e,loading:t}=ak(),{activeStoreId:a}=Ur();u.useEffect(()=>{a&&r(a).catch(()=>{})},[a,r]);const o=u.useCallback(c=>{s(`/products/transfers/${c}`)},[s]),i=u.useCallback(()=>{s("/products/transfers/new")},[s]),l=u.useCallback(c=>{switch(c){case"draft":return"bg-gray-100 text-gray-700";case"ready_to_ship":return"bg-gray-100 text-gray-700";case"in_progress":return"bg-gray-100 text-gray-700";case"transferred":return"bg-gray-100 text-gray-700";default:return"bg-gray-100 text-gray-700"}},[]);return n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx(Fme,{onCreateTransfer:i}),n.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[t&&n.jsx("div",{className:"py-12 text-center",children:n.jsx("div",{className:"animate-spin rounded-full w-4 h-4 border-2 border-gray-300 border-t-gray-900 mx-auto"})}),!t&&e.length===0&&n.jsxs("div",{className:"border border-gray-200 p-8 text-center",children:[n.jsx(ed,{className:"w-8 h-8 text-gray-400 mb-2 mx-auto"}),n.jsx("h2",{className:"text-sm font-medium mb-1 text-gray-900",children:"No transfers yet"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3 max-w-md mx-auto",children:"Start by creating your first transfer to move products between locations and keep your inventory organized."}),n.jsx("button",{onClick:i,className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Create Your First Transfer"})]}),e.length>0&&n.jsx("div",{className:"border border-gray-200 overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-white",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Transfer ID"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Reference"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Origin"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Destination"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Transfer Date"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Tags"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Status"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Created"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Updated"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(c=>n.jsxs("tr",{onClick:()=>o(c._id),className:"cursor-pointer hover:bg-gray-50 transition-colors",children:[n.jsxs("td",{className:"px-4 py-2 font-medium text-gray-900 font-mono text-sm",children:["#",c._id.slice(-8)]}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:c.referenceName||"-"}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:c.originLocationId?.name||"-"}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:c.destinationLocationId?.name||"-"}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:c.transferDate?new Date(c.transferDate).toLocaleDateString():"-"}),n.jsx("td",{className:"px-4 py-2",children:c.tags&&c.tags.length>0?n.jsxs("div",{className:"flex flex-wrap gap-1",children:[c.tags.slice(0,2).map(d=>n.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 text-xs font-medium bg-gray-100 text-gray-700",children:d.name},d._id)),c.tags.length>2&&n.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 text-xs font-medium bg-gray-100 text-gray-600",children:["+",c.tags.length-2]})]}):n.jsx("span",{className:"text-xs text-gray-600",children:"No tags"})}),n.jsx("td",{className:"px-4 py-2 capitalize",children:n.jsx("span",{className:`inline-block px-2 py-0.5 text-xs font-medium ${l(c.status)}`,children:c.status.replace(/_/g," ")})}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:new Date(c.createdAt).toLocaleDateString()}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:c.updatedAt?new Date(c.updatedAt).toLocaleDateString():"Not available"})]},c._id))})]})})})]})]})})},zme=({isOpen:s,onClose:r,vendorName:e,onVendorNameChange:t,onSubmit:a})=>n.jsx(en,{open:s,onClose:r,title:"Add Vendor",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:a,className:"px-3 py-1.5 bg-gray-900 text-white text-sm font-medium hover:bg-gray-800 transition-colors",children:"Submit"})]}),children:n.jsxs("div",{children:[n.jsx("label",{htmlFor:"vendor-name",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Enter vendor name"}),n.jsx("input",{id:"vendor-name",type:"text",autoFocus:!0,value:e,onChange:t,className:"w-full px-3 py-2 border border-gray-200 focus:ring-1 focus:ring-gray-400 focus:border-gray-300 outline-none transition-colors bg-white text-sm",placeholder:"Enter vendor name"})]})}),$me=({vendor:s})=>n.jsx("div",{className:"py-3 hover:bg-gray-50 transition-colors",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"font-medium text-gray-900 text-sm",children:s.name}),n.jsx("span",{className:"text-xs text-gray-500",children:new Date(s.updatedAt).toLocaleDateString()})]})}),Ume=({vendors:s})=>n.jsx("div",{className:"divide-y divide-gray-200",children:s.map(r=>n.jsx($me,{vendor:r},r._id))}),Vme=()=>{const{vendors:s,fetchVendorsByStoreId:r,loading:e,createVendor:t}=nj(),{activeStoreId:a}=Ur(),[o,i]=u.useState(!1),[l,c]=u.useState("");u.useEffect(()=>{a&&r(a)},[a,r]);const d=u.useCallback(()=>{i(!0)},[]),p=u.useCallback(()=>{i(!1),c("")},[]),h=u.useCallback(y=>{c(y.target.value)},[]),g=u.useCallback(async()=>{if(!a||!l.trim()){i(!1);return}try{await t({storeId:a,name:l.trim()})}finally{c(""),i(!1)}},[a,l,t]);return n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Vendors"}),n.jsxs("button",{onClick:d,className:"cursor-pointer flex items-center gap-1.5 px-3 py-1.5 bg-gray-900 text-white text-sm font-medium hover:bg-gray-800 transition-colors",children:[n.jsx(On,{className:"w-4 h-4"}),"Add Vendor"]})]})}),n.jsx("div",{className:"px-4 py-6 bg-white",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsx("div",{className:"border border-gray-200",children:n.jsx("div",{className:"p-4",children:e?n.jsx("div",{className:"flex justify-center py-6",children:n.jsx("p",{className:"text-sm text-gray-600",children:"Loading..."})}):s.length===0?n.jsx("p",{className:"text-sm text-gray-600",children:"No vendors found for this store."}):n.jsx(Ume,{vendors:s})})})})}),n.jsx(zme,{isOpen:o,onClose:p,vendorName:l,onVendorNameChange:h,onSubmit:g})]})})},Ij=()=>{const s=dr(),r=u.useCallback(()=>{s("/discounts")},[s]);return n.jsx("div",{className:"max-w-5xl mx-auto py-8 px-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Discount not found"}),n.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Back to discounts"})]})})},Rj=({method:s,discountCode:r,title:e,value:t,status:a,onBack:o})=>n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsx("div",{className:"flex justify-between items-center",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:o,className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(gn,{className:"w-4 h-4"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:s==="discount-code"?r||"-":e||"-"}),n.jsxs("p",{className:"text-xs text-gray-600 mt-0.5",children:[s,"  ",t,"  ",a||"active"]})]})]})})}),Hme=({label:s})=>n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-700 border border-gray-200",children:s}),nc=({items:s})=>n.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(r=>n.jsx(Hme,{label:r.label},r.key))}),Wme=()=>{const{id:s}=ks(),r=dr(),{activeStoreId:e}=Ur(),{discounts:t,fetchDiscountsByStoreId:a,loading:o,error:i}=tk(),l=t.find(v=>v._id===s);u.useEffect(()=>{e&&!t.length&&a(e)},[e,t.length,a]);const c=u.useCallback(()=>{r("/discounts")},[r]),d=u.useCallback(v=>v?"Yes":"No",[]),p=u.useCallback(v=>v?.name||v?._id,[]),h=u.useCallback(v=>`${v?.firstName||""} ${v?.lastName||""}`.trim()||v?.email||v?._id,[]);if(o)return n.jsx(Yt,{children:n.jsx("div",{className:"flex justify-center py-8",children:n.jsx("div",{className:"w-6 h-6 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})})});if(i)return n.jsx(Yt,{children:n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsx("div",{className:"p-3 bg-red-50 border border-red-200",children:n.jsx("p",{className:"text-sm text-red-800",children:i})})})});if(!l)return n.jsx(Yt,{children:n.jsx(Ij,{})});const g=l.targetCustomerSegmentDetails||[],y=l.targetCustomerDetails||[],b=l.valueType==="percentage"?`${l.percentage??0}%`:`${l.fixedAmount??0}`;return n.jsx(Yt,{children:n.jsx("div",{className:"min-h-screen",children:n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx(Rj,{method:l.method,discountCode:l.discountCode,title:l.title,value:b,status:l.status,onBack:c}),n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"General Information"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Method"}),n.jsx("p",{className:"text-sm text-gray-900",children:l.method})]}),l.method==="discount-code"&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Code"}),n.jsx("p",{className:"text-sm text-gray-900",children:l.discountCode})]}),l.method==="automatic"&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Title"}),n.jsx("p",{className:"text-sm text-gray-900",children:l.title})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Value Type"}),n.jsx("p",{className:"text-sm text-gray-900",children:l.valueType})]}),l.valueType==="percentage"&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Percentage"}),n.jsxs("p",{className:"text-sm text-gray-900",children:[l.percentage,"%"]})]}),l.valueType==="fixed-amount"&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Fixed Amount"}),n.jsxs("p",{className:"text-sm text-gray-900",children:["",l.fixedAmount]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Eligibility"}),n.jsx("p",{className:"text-sm text-gray-900",children:l.eligibility})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Status"}),n.jsx("p",{className:"text-sm text-gray-900",children:l.status})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Created At"}),n.jsx("p",{className:"text-sm text-gray-900",children:new Date(l.createdAt).toLocaleDateString()})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Last Updated"}),n.jsx("p",{className:"text-sm text-gray-900",children:new Date(l.updatedAt).toLocaleDateString()})]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Usage & Channel Limits"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Allow on Channels"}),n.jsx("p",{className:"text-sm text-gray-900",children:d(l.allowDiscountOnChannels)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Limit Total Uses"}),n.jsx("p",{className:"text-sm text-gray-900",children:d(l.limitTotalUses)})]}),l.limitTotalUses&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Total Uses Limit"}),n.jsx("p",{className:"text-sm text-gray-900",children:l.totalUsesLimit})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"One Use Per Customer"}),n.jsx("p",{className:"text-sm text-gray-900",children:d(l.limitOneUsePerCustomer)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Apply on POS Pro"}),n.jsx("p",{className:"text-sm text-gray-900",children:d(l.applyOnPOSPro)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Once Per Order"}),n.jsx("p",{className:"text-sm text-gray-900",children:d(l.oncePerOrder)})]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Minimum Purchase"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Requirement"}),n.jsx("p",{className:"text-sm text-gray-900",children:l.minimumPurchase})]}),l.minimumPurchase==="minimum-amount"&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Amount"}),n.jsxs("p",{className:"text-sm text-gray-900",children:["",l.minimumAmount]})]}),l.minimumPurchase==="minimum-quantity"&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Quantity"}),n.jsx("p",{className:"text-sm text-gray-900",children:l.minimumQuantity})]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Combinations"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Product Discounts"}),n.jsx("p",{className:"text-sm text-gray-900",children:d(l.productDiscounts)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Order Discounts"}),n.jsx("p",{className:"text-sm text-gray-900",children:d(l.orderDiscounts)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Shipping Discounts"}),n.jsx("p",{className:"text-sm text-gray-900",children:d(l.shippingDiscounts)})]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Active Dates"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Start Date"}),n.jsxs("p",{className:"text-sm text-gray-900",children:[l.startDate," ",l.startTime?`at ${l.startTime}`:""]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Set End Date"}),n.jsx("p",{className:"text-sm text-gray-900",children:d(l.setEndDate)})]}),l.setEndDate&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"End Date"}),n.jsxs("p",{className:"text-sm text-gray-900",children:[l.endDate," ",l.endTime?`at ${l.endTime}`:""]})]})]})]}),Array.isArray(g)&&g.length>0&&n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Target Customer Segments"}),n.jsx(nc,{items:g.map((v,w)=>({key:v?._id||w.toString(),label:p(v)}))})]}),Array.isArray(y)&&y.length>0&&n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Target Customers"}),n.jsx(nc,{items:y.map((v,w)=>({key:v?._id||w.toString(),label:h(v)}))})]})]})})})})},qme=()=>{const s=dr(),{activeStoreId:r}=Ur(),{segments:e,searchCustomerSegments:t,fetchSegmentsByStoreId:a,loading:o}=Dm(),{customers:i,searchCustomers:l,fetchCustomersByStoreId:c,loading:d}=iu(),{createDiscount:p,loading:h,error:g}=tk(),[y,b]=u.useState({method:"discount-code",discountCode:"",title:"",valueType:"percentage",percentage:"",fixedAmount:"",eligibility:"all-customers",eligibilitySearchQuery:"",applyOnPOSPro:!1,minimumPurchase:"no-requirements",minimumAmount:"",minimumQuantity:"",productDiscounts:!1,orderDiscounts:!1,shippingDiscounts:!1,startDate:"",startTime:"",setEndDate:!1,endDate:"",endTime:"",allowDiscountOnChannels:!1,limitTotalUses:!1,totalUsesLimit:"",limitOneUsePerCustomer:!1}),[v,w]=u.useState([]),[C,k]=u.useState([]),[N,O]=u.useState(""),[R,L]=u.useState(""),B=u.useCallback((P,H)=>{b(D=>({...D,[P]:H}))},[]),G=u.useCallback((()=>{let P;return H=>{window.clearTimeout(P),P=window.setTimeout(async()=>{if(r)if(H.trim())try{await t(r,H)}catch{}else try{await a(r)}catch{}},300)}})(),[r,t,a]),$=u.useCallback((()=>{let P;return H=>{window.clearTimeout(P),P=window.setTimeout(async()=>{if(r)if(H.trim())try{await l(r,H)}catch{}else try{await c(r)}catch{}},300)}})(),[r,l,c]),z=u.useCallback(()=>{s("/discounts?createDiscountModal=open")},[s]),Y=u.useCallback(async P=>{if(P.preventDefault(),!!r)try{const H={storeId:r,method:y.method,...y.method==="discount-code"?{discountCode:y.discountCode}:{},...y.method==="automatic"?{title:y.title}:{},valueType:y.valueType,...y.valueType==="percentage"?{percentage:Number(y.percentage)||0}:{},...y.valueType==="fixed-amount"?{fixedAmount:Number(y.fixedAmount)||0}:{},eligibility:y.eligibility,applyOnPOSPro:y.applyOnPOSPro,minimumPurchase:y.minimumPurchase,...y.minimumPurchase==="minimum-amount"?{minimumAmount:Number(y.minimumAmount)||0}:{},...y.minimumPurchase==="minimum-quantity"?{minimumQuantity:Number(y.minimumQuantity)||0}:{},productDiscounts:y.productDiscounts,orderDiscounts:y.orderDiscounts,shippingDiscounts:y.shippingDiscounts,allowDiscountOnChannels:y.allowDiscountOnChannels,limitTotalUses:y.limitTotalUses,...y.limitTotalUses?{totalUsesLimit:Number(y.totalUsesLimit)||0}:{},limitOneUsePerCustomer:y.limitOneUsePerCustomer,startDate:y.startDate||void 0,startTime:y.startTime||void 0,setEndDate:y.setEndDate,endDate:y.endDate||void 0,endTime:y.endTime||void 0,status:"active",targetCustomerSegmentIds:v,targetCustomerIds:C};(await p(H)).success&&s("/discounts")}catch{}},[y,v,C,r,p,s]),M=e.map(P=>({value:P._id,label:P.name})),q=i.map(P=>({value:P._id,label:`${P.firstName} ${P.lastName}`.trim()||P.email,secondaryText:P.email}));return n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:z,className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(gn,{className:"w-4 h-4"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Amount off order"})]})}),n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsxs("form",{onSubmit:Y,children:[g&&n.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 flex items-center justify-between",children:[n.jsx("p",{className:"text-sm text-red-800",children:g}),n.jsx("button",{type:"button",onClick:()=>{},className:"text-red-600 hover:text-red-800",children:n.jsx(Zs,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Method"}),n.jsxs("fieldset",{className:"mb-3",children:[n.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Discount Method"}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"method",value:"discount-code",checked:y.method==="discount-code",onChange:P=>B("method",P.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Discount code"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"method",value:"automatic",checked:y.method==="automatic",onChange:P=>B("method",P.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Automatic discount"})]})]})]}),y.method==="discount-code"&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Discount code"}),n.jsx("input",{type:"text",value:y.discountCode,onChange:P=>B("discountCode",P.target.value),placeholder:"Enter discount code",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Customers will enter this code at checkout"})]}),y.method==="automatic"&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Title"}),n.jsx("input",{type:"text",value:y.title,onChange:P=>B("title",P.target.value),placeholder:"Enter discount title",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"This title will be shown to customers"})]})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Discount value"}),n.jsxs("fieldset",{className:"mb-3",children:[n.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Discount Type"}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"valueType",value:"percentage",checked:y.valueType==="percentage",onChange:P=>B("valueType",P.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Percentage"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"valueType",value:"fixed-amount",checked:y.valueType==="fixed-amount",onChange:P=>B("valueType",P.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Fixed amount"})]})]})]}),y.valueType==="percentage"&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Percentage"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",value:y.percentage,onChange:P=>B("percentage",P.target.value),placeholder:"Enter percentage",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 pr-8 text-base"}),n.jsx("span",{className:"absolute right-3 top-2 text-gray-500 text-sm",children:"%"})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the percentage discount to apply"})]}),y.valueType==="fixed-amount"&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Fixed amount"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-2 text-gray-500 text-sm",children:""}),n.jsx("input",{type:"number",value:y.fixedAmount,onChange:P=>B("fixedAmount",P.target.value),placeholder:"Enter amount",className:"w-full px-3 py-1.5 pl-8 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the fixed amount discount in rupees"})]})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-1 text-gray-900",children:"Eligibility"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Available on all sales channels"}),n.jsxs("fieldset",{className:"mb-3",children:[n.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Customer Eligibility"}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"eligibility",value:"all-customers",checked:y.eligibility==="all-customers",onChange:P=>B("eligibility",P.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"All customers"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"eligibility",value:"specific-customer-segments",checked:y.eligibility==="specific-customer-segments",onChange:P=>B("eligibility",P.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Specific customer segments"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"eligibility",value:"specific-customers",checked:y.eligibility==="specific-customers",onChange:P=>B("eligibility",P.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Specific customers"})]})]})]}),y.method==="automatic"&&y.eligibility==="all-customers"&&n.jsx("div",{className:"ml-2 mt-2",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:y.applyOnPOSPro,onChange:P=>B("applyOnPOSPro",P.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Apply on POS Pro locations"})]})}),(y.eligibility==="specific-customer-segments"||y.eligibility==="specific-customers")&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:y.eligibility==="specific-customer-segments"?"Search customer segments":"Search customers"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:y.eligibility==="specific-customer-segments"?N:R,onChange:P=>{const H=P.target.value;y.eligibility==="specific-customer-segments"?(O(H),G(H)):(L(H),$(H))},placeholder:y.eligibility==="specific-customer-segments"?"Search for customer segments...":"Search for customers...",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 pr-10 text-base"}),(y.eligibility==="specific-customer-segments"&&o||y.eligibility==="specific-customers"&&d)&&n.jsx("div",{className:"absolute right-3 top-2",children:n.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:y.eligibility==="specific-customer-segments"?"Search and select customer segments to apply the discount to":"Search and select customers to apply the discount to"}),y.eligibility==="specific-customer-segments"&&e.length>0&&n.jsxs("div",{className:"mt-3",children:[n.jsx(Fo,{label:"Choose Customer Segments",value:v,options:M,onChange:w,renderValue:P=>e.filter(H=>P.includes(H._id)).map(H=>H.name).join(", ")}),n.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[v.length," segment(s) selected"]})]}),y.eligibility==="specific-customers"&&i.length>0&&n.jsxs("div",{className:"mt-3",children:[n.jsx(Fo,{label:"Choose Customers",value:C,options:q,onChange:k,renderValue:P=>i.filter(H=>P.includes(H._id)).map(H=>`${H.firstName} ${H.lastName}`.trim()||H.email).join(", ")}),n.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[C.length," customer(s) selected"]})]})]})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Minimum purchase requirements"}),n.jsxs("fieldset",{className:"mb-3",children:[n.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Minimum Purchase Requirements"}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"minimumPurchase",value:"no-requirements",checked:y.minimumPurchase==="no-requirements",onChange:P=>B("minimumPurchase",P.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"No minimum requirements"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"minimumPurchase",value:"minimum-amount",checked:y.minimumPurchase==="minimum-amount",onChange:P=>B("minimumPurchase",P.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Minimum purchase amount"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"minimumPurchase",value:"minimum-quantity",checked:y.minimumPurchase==="minimum-quantity",onChange:P=>B("minimumPurchase",P.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Minimum quantity of items"})]})]})]}),y.minimumPurchase==="minimum-amount"&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Minimum purchase amount"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-2 text-gray-500 text-sm",children:""}),n.jsx("input",{type:"number",value:y.minimumAmount,onChange:P=>B("minimumAmount",P.target.value),placeholder:"Enter minimum amount",className:"w-full px-3 py-1.5 pl-8 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Applies to all products"})]}),y.minimumPurchase==="minimum-quantity"&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Minimum quantity of items"}),n.jsx("input",{type:"number",value:y.minimumQuantity,onChange:P=>B("minimumQuantity",P.target.value),placeholder:"Enter minimum quantity",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Applies to all products"})]})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Combinations"}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:y.productDiscounts,onChange:P=>B("productDiscounts",P.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Product Discounts"})]}),y.productDiscounts&&n.jsx("p",{className:"mt-1 ml-6 text-xs text-gray-600",children:"Eligible product discounts will apply first."})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:y.orderDiscounts,onChange:P=>B("orderDiscounts",P.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Order Discounts"})]}),y.orderDiscounts&&n.jsx("p",{className:"mt-1 ml-6 text-xs text-gray-600",children:"All eligible order discounts will apply."})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:y.shippingDiscounts,onChange:P=>B("shippingDiscounts",P.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Shipping Discounts"})]}),y.shippingDiscounts&&n.jsx("p",{className:"mt-1 ml-6 text-xs text-gray-600",children:"The largest eligible shipping discount will apply in addition to eligible order discounts."})]}),(y.productDiscounts||y.orderDiscounts||y.shippingDiscounts)&&n.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200",children:n.jsx("p",{className:"text-xs text-yellow-800 font-medium",children:"This discount won't combine with any other discount at checkout."})})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Active dates"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Start date"}),n.jsx("input",{type:"date",value:y.startDate,onChange:P=>B("startDate",P.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Start time (IST)"}),n.jsx("input",{type:"time",value:y.startTime,onChange:P=>B("startTime",P.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Indian Standard Time"})]})]}),n.jsx("div",{className:"mt-3",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:y.setEndDate,onChange:P=>B("setEndDate",P.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Set end date"})]})}),y.setEndDate&&n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mt-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"End date"}),n.jsx("input",{type:"date",value:y.endDate,onChange:P=>B("endDate",P.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"End time (IST)"}),n.jsx("input",{type:"time",value:y.endTime,onChange:P=>B("endTime",P.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Indian Standard Time"})]})]})]}),y.method==="discount-code"&&n.jsxs(n.Fragment,{children:[n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Sales channel access"}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:y.allowDiscountOnChannels,onChange:P=>B("allowDiscountOnChannels",P.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Allow discount to be featured on selected channels"})]})]})]}),y.method==="discount-code"&&n.jsxs(n.Fragment,{children:[n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Maximum discount uses"}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:y.limitTotalUses,onChange:P=>B("limitTotalUses",P.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Limit number of times this discount can be used in total"})]}),y.limitTotalUses&&n.jsxs("div",{className:"ml-6 mt-2",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Total uses limit"}),n.jsx("input",{type:"number",value:y.totalUsesLimit,onChange:P=>B("totalUsesLimit",P.target.value),placeholder:"Enter maximum number of uses",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the maximum number of times this discount can be used"})]})]}),n.jsx("div",{children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:y.limitOneUsePerCustomer,onChange:P=>B("limitOneUsePerCustomer",P.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Limit to one use per customer"})]})})]})]}),n.jsxs("div",{className:"flex gap-2 justify-end mt-4",children:[n.jsx("button",{type:"button",onClick:z,className:"px-3 py-1.5 text-sm text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors font-medium",children:"Cancel"}),n.jsxs("button",{type:"submit",disabled:h,className:"px-3 py-1.5 text-sm bg-gray-900 text-white hover:bg-gray-800 transition-colors font-medium disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:[h&&n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),h?"Creating...":"Create Discount"]})]})]})})]})})},Gme=()=>{const s=dr(),{createDiscount:r,loading:e,error:t,clearError:a}=I2(),{products:o,fetchProductsByStoreId:i,searchBasic:l,loading:c}=Ol(),{collections:d,fetchCollectionsByStoreId:p,searchCollections:h,loading:g}=Fp(),{segments:y,fetchSegmentsByStoreId:b,searchCustomerSegments:v,loading:w}=Dm(),{customers:C,fetchCustomersByStoreId:k,searchCustomers:N,loading:O}=iu(),{activeStoreId:R}=Ur(),[L,B]=u.useState([]),[G,$]=u.useState([]),[z,Y]=u.useState([]),[M,q]=u.useState([]),[P,H]=u.useState(""),[D,X]=u.useState(""),[se,Q]=u.useState(""),[xe,K]=u.useState(""),[Z,ve]=u.useState([]),ae=u.useCallback((()=>{let V;return re=>{clearTimeout(V),V=window.setTimeout(async()=>{if(re.trim()&&R)try{await h(R,re)}catch(pe){console.error("Error searching collections:",pe)}else R&&await p(R)},300)}})(),[R,h,p]),Se=u.useCallback((()=>{let V;return re=>{clearTimeout(V),V=window.setTimeout(async()=>{if(re.trim()&&R)try{const ge=(await l({q:re,storeId:R})).map(Ce=>({_id:Ce._id,title:Ce.title,price:0,description:"",imageUrl:Ce.imageUrl}));ve(ge)}catch(pe){console.error("Error searching products:",pe)}else R&&(await i(R),ve([]))},300)}})(),[R,i,l]),Pe=u.useCallback((()=>{let V;return re=>{clearTimeout(V),V=window.setTimeout(async()=>{if(re.trim()&&R)try{await v(R,re)}catch(pe){console.error("Error searching customer segments:",pe)}else R&&await b(R)},300)}})(),[R,v,b]),$e=u.useCallback((()=>{let V;return re=>{clearTimeout(V),V=window.setTimeout(async()=>{if(re.trim()&&R)try{await N(R,re)}catch(pe){console.error("Error searching customers:",pe)}else R&&await k(R)},300)}})(),[R,N,k]),[we,Ae]=u.useState({method:"discount-code",discountCode:"",title:"",valueType:"percentage",percentage:"",fixedAmount:"",takeAmountOffEachItem:!1,appliesTo:"specific-collections",searchQuery:"",oncePerOrder:!1,eligibility:"all-customers",applyOnPOSPro:!1,eligibilitySearchQuery:"",minimumPurchase:"no-requirements",minimumAmount:"",minimumQuantity:"",productDiscounts:!1,orderDiscounts:!1,shippingDiscounts:!1,startDate:"",startTime:"",setEndDate:!1,endDate:"",endTime:"",allowDiscountOnChannels:!1,limitTotalUses:!1,totalUsesLimit:"",limitOneUsePerCustomer:!1});u.useEffect(()=>{(async()=>{if(R)try{await Promise.all([i(R),p(R),b(R),k(R)])}catch(re){console.error("Failed to fetch products, collections, segments, and customers:",re)}})()},[R,i,p,b,k]);const ze=u.useCallback((V,re)=>{Ae(pe=>({...pe,[V]:re}))},[]);u.useCallback((V,re)=>{B(re?pe=>[...pe,V]:pe=>pe.filter(ge=>ge!==V))},[]),u.useCallback((V,re)=>{$(re?pe=>[...pe,V]:pe=>pe.filter(ge=>ge!==V))},[]);const Ge=u.useCallback(()=>{s("/discounts?createDiscountModal=open")},[s]),Ue=u.useCallback(async V=>{V.preventDefault(),a();try{const re={storeId:R,method:we.method,...we.method==="discount-code"&&{discountCode:we.discountCode},...we.method==="automatic"&&{title:we.title},allowDiscountOnChannels:we.allowDiscountOnChannels,limitTotalUses:we.limitTotalUses,totalUsesLimit:we.totalUsesLimit?Number(we.totalUsesLimit):void 0,limitOneUsePerCustomer:we.limitOneUsePerCustomer,valueType:we.valueType,...we.valueType==="percentage"&&{percentage:Number(we.percentage)},...we.valueType==="fixed-amount"&&{fixedAmount:Number(we.fixedAmount)},appliesTo:we.appliesTo,oncePerOrder:we.takeAmountOffEachItem,eligibility:we.eligibility,applyOnPOSPro:we.applyOnPOSPro,minimumPurchase:we.minimumPurchase,minimumAmount:we.minimumAmount?Number(we.minimumAmount):void 0,minimumQuantity:we.minimumQuantity?Number(we.minimumQuantity):void 0,productDiscounts:we.productDiscounts,orderDiscounts:we.orderDiscounts,shippingDiscounts:we.shippingDiscounts,startDate:we.startDate,startTime:we.startTime,setEndDate:we.setEndDate,endDate:we.endDate,endTime:we.endTime,status:"active",targetProductIds:L,targetCollectionIds:G,targetCustomerSegmentIds:z,targetCustomerIds:M};(await r(re)).success&&s("/discounts?createDiscountModal=open")}catch(re){console.error("Failed to create discount:",re)}},[we,L,G,z,M,R,r,s,a]),ht=[{value:"specific-collections",label:"Specific collections"},{value:"specific-products",label:"Specific products"}],ee=Z.length>0?Z:o,ue=ee.map(V=>({value:V._id,label:V.title,secondaryText:V.price>0?`(${V.price})`:void 0})),Oe=d.map(V=>({value:V._id,label:V.title,secondaryText:V.description})),J=y.map(V=>({value:V._id,label:V.name})),I=C.map(V=>({value:V._id,label:`${V.firstName} ${V.lastName}`,secondaryText:V.email}));return n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:Ge,className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(gn,{className:"w-4 h-4"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Amount off products"})]})}),n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsxs("form",{onSubmit:Ue,children:[t&&n.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 flex items-center justify-between",children:[n.jsx("p",{className:"text-sm text-red-800",children:t}),n.jsx("button",{type:"button",onClick:a,className:"text-red-600 hover:text-red-800",children:n.jsx(Zs,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Method"}),n.jsxs("fieldset",{className:"mb-3",children:[n.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Discount Method"}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"method",value:"discount-code",checked:we.method==="discount-code",onChange:V=>ze("method",V.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Discount code"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"method",value:"automatic",checked:we.method==="automatic",onChange:V=>ze("method",V.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Automatic discount"})]})]})]}),we.method==="discount-code"&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Discount code"}),n.jsx("input",{type:"text",value:we.discountCode,onChange:V=>ze("discountCode",V.target.value),placeholder:"Enter discount code",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Customers will enter this code at checkout"})]}),we.method==="automatic"&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Title"}),n.jsx("input",{type:"text",value:we.title,onChange:V=>ze("title",V.target.value),placeholder:"Enter discount title",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"This title will be shown to customers"})]})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Discount value"}),n.jsxs("fieldset",{className:"mb-3",children:[n.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Value Type"}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"valueType",value:"percentage",checked:we.valueType==="percentage",onChange:V=>ze("valueType",V.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Percentage"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"valueType",value:"fixed-amount",checked:we.valueType==="fixed-amount",onChange:V=>ze("valueType",V.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Fixed amount"})]})]})]}),we.valueType==="percentage"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Percentage"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",value:we.percentage,onChange:V=>ze("percentage",V.target.value),placeholder:"Enter percentage",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 pr-8 text-base"}),n.jsx("span",{className:"absolute right-3 top-2 text-gray-500 text-sm",children:"%"})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the percentage discount (e.g., 10 for 10%)"})]}),we.valueType==="fixed-amount"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Amount"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-2 text-gray-500 text-sm",children:""}),n.jsx("input",{type:"number",value:we.fixedAmount,onChange:V=>ze("fixedAmount",V.target.value),placeholder:"Enter amount",className:"w-full px-3 py-1.5 pl-8 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the fixed amount in rupees"})]}),n.jsxs("div",{className:"mt-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:we.takeAmountOffEachItem,onChange:V=>ze("takeAmountOffEachItem",V.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Once per order"})]}),n.jsx("p",{className:"mt-1 ml-6 text-xs text-gray-600",children:"If not selected, the amount will be taken off each eligible item in an order"})]})]})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Applies to"}),n.jsx("div",{className:"mb-3",children:n.jsx(Va,{label:"Applies to",value:we.appliesTo,options:ht,onChange:V=>ze("appliesTo",V)})}),we.appliesTo==="specific-products"&&n.jsxs("div",{className:"mb-3",children:[n.jsx("h3",{className:"text-xs font-medium mb-1.5 text-gray-900",children:"Select Products"}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Search Products"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:D,onChange:V=>{const re=V.target.value;X(re),Se(re)},placeholder:"Type to search products...",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 pr-10 text-base"}),c&&n.jsx("div",{className:"absolute right-3 top-2",children:n.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})})]})]}),n.jsx(Fo,{label:"Choose Products",value:L,options:ue,onChange:B,renderValue:V=>ee.filter(pe=>V.includes(pe._id)).map(pe=>pe.title).join(", ")}),n.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[L.length," product(s) selected"]})]}),we.appliesTo==="specific-collections"&&n.jsxs("div",{className:"mb-3",children:[n.jsx("h3",{className:"text-xs font-medium mb-1.5 text-gray-900",children:"Select Collections"}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Search Collections"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:P,onChange:V=>{const re=V.target.value;H(re),ae(re)},placeholder:"Type to search collections...",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 pr-10 text-base"}),g&&n.jsx("div",{className:"absolute right-3 top-2",children:n.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})})]})]}),n.jsx(Fo,{label:"Choose Collections",value:G,options:Oe,onChange:$,renderValue:V=>d.filter(pe=>V.includes(pe._id)).map(pe=>pe.title).join(", ")}),n.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[G.length," collection(s) selected"]})]})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-1 text-gray-900",children:"Eligibility"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Available on all sales channels"}),n.jsxs("fieldset",{className:"mb-3",children:[n.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Customer Eligibility"}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"eligibility",value:"all-customers",checked:we.eligibility==="all-customers",onChange:V=>ze("eligibility",V.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"All customers"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"eligibility",value:"specific-customer-segments",checked:we.eligibility==="specific-customer-segments",onChange:V=>ze("eligibility",V.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Specific customer segments"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"eligibility",value:"specific-customers",checked:we.eligibility==="specific-customers",onChange:V=>ze("eligibility",V.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Specific customers"})]})]})]}),we.eligibility==="all-customers"&&we.method==="automatic"&&n.jsx("div",{className:"ml-2 mt-2",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:we.applyOnPOSPro,onChange:V=>ze("applyOnPOSPro",V.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Apply on POS Pro locations"})]})}),(we.eligibility==="specific-customer-segments"||we.eligibility==="specific-customers")&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:we.eligibility==="specific-customer-segments"?"Search customer segments":"Search customers"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:we.eligibility==="specific-customer-segments"?se:xe,onChange:V=>{if(we.eligibility==="specific-customer-segments"){const re=V.target.value;Q(re),Pe(re)}else{const re=V.target.value;K(re),$e(re)}},placeholder:we.eligibility==="specific-customer-segments"?"Search for customer segments...":"Search for customers...",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 pr-10 text-base"}),(we.eligibility==="specific-customer-segments"&&w||we.eligibility==="specific-customers"&&O)&&n.jsx("div",{className:"absolute right-3 top-2",children:n.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:we.eligibility==="specific-customer-segments"?"Search and select customer segments to apply the discount to":"Search and select customers to apply the discount to"}),we.eligibility==="specific-customer-segments"&&y.length>0&&n.jsxs("div",{className:"mt-3",children:[n.jsx(Fo,{label:"Choose Customer Segments",value:z,options:J,onChange:Y,renderValue:V=>y.filter(pe=>V.includes(pe._id)).map(pe=>pe.name).join(", ")}),n.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[z.length," segment(s) selected"]})]}),we.eligibility==="specific-customers"&&C.length>0&&n.jsxs("div",{className:"mt-3",children:[n.jsx(Fo,{label:"Choose Customers",value:M,options:I,onChange:q,renderValue:V=>C.filter(pe=>V.includes(pe._id)).map(pe=>`${pe.firstName} ${pe.lastName}`).join(", ")}),n.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[M.length," customer(s) selected"]})]})]})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Minimum purchase requirements"}),n.jsxs("fieldset",{className:"mb-3",children:[n.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Minimum Purchase Requirements"}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"minimumPurchase",value:"no-requirements",checked:we.minimumPurchase==="no-requirements",onChange:V=>ze("minimumPurchase",V.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"No minimum requirements"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"minimumPurchase",value:"minimum-amount",checked:we.minimumPurchase==="minimum-amount",onChange:V=>ze("minimumPurchase",V.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Minimum purchase amount"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"minimumPurchase",value:"minimum-quantity",checked:we.minimumPurchase==="minimum-quantity",onChange:V=>ze("minimumPurchase",V.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Minimum quantity of items"})]})]})]}),we.minimumPurchase==="minimum-amount"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Minimum purchase amount"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-2 text-gray-500 text-sm",children:""}),n.jsx("input",{type:"number",value:we.minimumAmount,onChange:V=>ze("minimumAmount",V.target.value),placeholder:"Enter minimum amount",className:"w-full px-3 py-1.5 pl-8 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the minimum purchase amount in rupees"}),n.jsx("p",{className:"mt-2 ml-2 text-xs text-gray-600",children:"Applies only to selected products"})]}),we.minimumPurchase==="minimum-quantity"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Minimum quantity of items"}),n.jsx("input",{type:"number",value:we.minimumQuantity,onChange:V=>ze("minimumQuantity",V.target.value),placeholder:"Enter minimum quantity",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the minimum quantity of items required"}),n.jsx("p",{className:"mt-2 ml-2 text-xs text-gray-600",children:"Applies only to selected products"})]})]}),n.jsx("hr",{className:"my-8 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Combinations"}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:we.productDiscounts,onChange:V=>ze("productDiscounts",V.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Product Discounts"})]}),we.productDiscounts&&n.jsx("p",{className:"mt-1 ml-6 text-xs text-gray-600",children:"Each eligible item in the cart may receive up to one product discount."})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:we.orderDiscounts,onChange:V=>ze("orderDiscounts",V.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Order Discounts"})]}),we.orderDiscounts&&n.jsx("p",{className:"mt-1 ml-6 text-xs text-gray-600",children:"All eligible order discounts will apply in addition to eligible product discounts."})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:we.shippingDiscounts,onChange:V=>ze("shippingDiscounts",V.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Shipping Discounts"})]}),we.shippingDiscounts&&n.jsx("p",{className:"mt-1 ml-6 text-xs text-gray-600",children:"The largest eligible shipping discount will apply in addition to eligible product discounts."})]}),(we.productDiscounts||we.orderDiscounts||we.shippingDiscounts)&&n.jsx("div",{className:"mt-3 p-3 bg-white/95 border border-gray-200",children:n.jsx("p",{className:"text-xs text-gray-600",children:"This discount won't combine with any other discount at checkout."})})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Active dates"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Start date"}),n.jsx("input",{type:"date",value:we.startDate,onChange:V=>ze("startDate",V.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Select the start date for the discount"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Start time (IST)"}),n.jsx("input",{type:"time",value:we.startTime,onChange:V=>ze("startTime",V.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Select the start time in Indian Standard Time"})]}),n.jsx("div",{className:"col-span-full",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:we.setEndDate,onChange:V=>ze("setEndDate",V.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Set end date"})]})}),we.setEndDate&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"End date"}),n.jsx("input",{type:"date",value:we.endDate,onChange:V=>ze("endDate",V.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Select the end date for the discount"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"End time (IST)"}),n.jsx("input",{type:"time",value:we.endTime,onChange:V=>ze("endTime",V.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Select the end time in Indian Standard Time"})]})]})]})]}),we.method==="discount-code"&&n.jsxs(n.Fragment,{children:[n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Sales channel access"}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:we.allowDiscountOnChannels,onChange:V=>ze("allowDiscountOnChannels",V.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Allow discount to be featured on selected channels"})]})]})]}),we.method==="discount-code"&&n.jsxs(n.Fragment,{children:[n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Maximum discount uses"}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:we.limitTotalUses,onChange:V=>ze("limitTotalUses",V.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Limit number of times this discount can be used in total"})]}),we.limitTotalUses&&n.jsxs("div",{className:"ml-6 mt-2 max-w-xs",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Total uses limit"}),n.jsx("input",{type:"number",value:we.totalUsesLimit,onChange:V=>ze("totalUsesLimit",V.target.value),placeholder:"Enter maximum number of uses",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the maximum number of times this discount can be used"})]})]}),n.jsx("div",{children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:we.limitOneUsePerCustomer,onChange:V=>ze("limitOneUsePerCustomer",V.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Limit to one use per customer"})]})})]})]}),n.jsxs("div",{className:"flex gap-2 justify-end mt-4",children:[n.jsx("button",{type:"button",onClick:Ge,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsxs("button",{type:"submit",disabled:e,className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:[e&&n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e?"Creating...":"Create Discount"]})]})]})})]})})},Kme=({customerBuys:s,quantity:r,amount:e,anyItemsFrom:t,customerGetsQuantity:a,customerGetsAnyItemsFrom:o,value:i,eligibility:l,allowDiscountOnChannels:c,limitTotalUses:d,totalUsesLimit:p,limitOneUsePerCustomer:h,productDiscounts:g,orderDiscounts:y,shippingDiscounts:b,startDate:v,startTime:w,setEndDate:C,endDate:k,endTime:N,createdAt:O,updatedAt:R})=>{const L=B=>B?"Yes":"No";return n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Summary"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Customer buys"}),n.jsxs("p",{className:"text-sm text-gray-900",children:[s,s==="minimum-quantity"&&r?` (${r})`:s==="minimum-amount"&&e?` (${e})`:""]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Any items from"}),n.jsx("p",{className:"text-sm text-gray-900",children:t})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Customer gets quantity"}),n.jsx("p",{className:"text-sm text-gray-900",children:a})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Gets from"}),n.jsx("p",{className:"text-sm text-gray-900",children:o})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Value"}),n.jsx("p",{className:"text-sm text-gray-900",children:i})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Eligibility"}),n.jsx("p",{className:"text-sm text-gray-900",children:l})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Allow discount on channels"}),n.jsx("p",{className:"text-sm text-gray-900",children:L(c)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Limit total uses"}),n.jsx("p",{className:"text-sm text-gray-900",children:d?`Yes (${p??"-"})`:"No"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Limit one use per customer"}),n.jsx("p",{className:"text-sm text-gray-900",children:L(h)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Combinations"}),n.jsxs("p",{className:"text-sm text-gray-900",children:["Product: ",L(g),"  Order: ",L(y),"  Shipping: ",L(b)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Active dates"}),n.jsxs("p",{className:"text-sm text-gray-900",children:[[v,w].filter(Boolean).join(" ")||"-","  ",C?[k,N].filter(Boolean).join(" ")||"-":"No end date"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Created / Updated"}),n.jsxs("p",{className:"text-sm text-gray-900",children:[O?new Date(O).toLocaleDateString():"-"," / ",R?new Date(R).toLocaleDateString():"-"]})]})]})]})},Yme=({buysProducts:s,buysCollections:r,getsProducts:e,getsCollections:t,segments:a,customers:o})=>n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Targets"}),n.jsxs("div",{className:"mb-3",children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1.5",children:"Buys - Products"}),s.length>0?n.jsx(nc,{items:s.map(i=>({key:i._id,label:i.title}))}):n.jsx("p",{className:"text-xs text-gray-600",children:"None"})]}),n.jsx("hr",{className:"my-3 border-gray-200"}),n.jsxs("div",{className:"mb-3",children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1.5",children:"Buys - Collections"}),r.length>0?n.jsx(nc,{items:r.map(i=>({key:i._id,label:i.title}))}):n.jsx("p",{className:"text-xs text-gray-600",children:"None"})]}),n.jsx("hr",{className:"my-3 border-gray-200"}),n.jsxs("div",{className:"mb-3",children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1.5",children:"Gets - Products"}),e.length>0?n.jsx(nc,{items:e.map(i=>({key:i._id,label:i.title}))}):n.jsx("p",{className:"text-xs text-gray-600",children:"None"})]}),n.jsx("hr",{className:"my-3 border-gray-200"}),n.jsxs("div",{className:"mb-3",children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1.5",children:"Gets - Collections"}),t.length>0?n.jsx(nc,{items:t.map(i=>({key:i._id,label:i.title}))}):n.jsx("p",{className:"text-xs text-gray-600",children:"None"})]}),n.jsx("hr",{className:"my-3 border-gray-200"}),n.jsxs("div",{className:"mb-3",children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1.5",children:"Customer Segments"}),a.length>0?n.jsx(nc,{items:a.map(i=>({key:i._id,label:i.name}))}):n.jsx("p",{className:"text-xs text-gray-600",children:"None"})]}),n.jsx("hr",{className:"my-3 border-gray-200"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1.5",children:"Customers"}),o.length>0?n.jsx(nc,{items:o.map(i=>({key:i._id,label:i.name}))}):n.jsx("p",{className:"text-xs text-gray-600",children:"None"})]})]}),Zme=()=>{const{id:s}=ks(),r=dr(),{discounts:e}=rk(),t=u.useMemo(()=>e.find(g=>g._id===s),[e,s]),a=u.useCallback(()=>{r("/discounts")},[r]);if(!t)return n.jsx(Yt,{children:n.jsx(Ij,{})});const o=t.discountedValue==="percentage"?`${t.discountedPercentage??0}%`:t.discountedValue==="amount"?`${t.discountedAmount??0}`:"Free",i=(t.buysProductIds||[]).map(g=>typeof g=="string"?{_id:g,title:g}:{_id:g._id,title:g.title||g._id}),l=(t.buysCollectionIds||[]).map(g=>typeof g=="string"?{_id:g,title:g}:{_id:g._id,title:g.title||g._id}),c=(t.getsProductIds||[]).map(g=>typeof g=="string"?{_id:g,title:g}:{_id:g._id,title:g.title||g._id}),d=(t.getsCollectionIds||[]).map(g=>typeof g=="string"?{_id:g,title:g}:{_id:g._id,title:g.title||g._id}),p=(t.targetCustomerSegmentIds||[]).map(g=>typeof g=="string"?{_id:g,name:g}:{_id:g._id,name:g.name||g._id}),h=(t.targetCustomerIds||[]).map(g=>typeof g=="string"?{_id:g,name:g}:{_id:g._id,name:`${g.firstName||""} ${g.lastName||""}`.trim()||g.email||g._id});return n.jsx(Yt,{children:n.jsx("div",{className:"min-h-screen",children:n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx(Rj,{method:t.method,discountCode:t.discountCode,title:t.title,value:o,status:t.status,onBack:a}),n.jsx(Kme,{customerBuys:t.customerBuys,quantity:t.quantity,amount:t.amount,anyItemsFrom:t.anyItemsFrom,customerGetsQuantity:t.customerGetsQuantity,customerGetsAnyItemsFrom:t.customerGetsAnyItemsFrom,value:o,eligibility:t.eligibility,allowDiscountOnChannels:t.allowDiscountOnChannels,limitTotalUses:t.limitTotalUses,totalUsesLimit:t.totalUsesLimit,limitOneUsePerCustomer:t.limitOneUsePerCustomer,productDiscounts:t.productDiscounts,orderDiscounts:t.orderDiscounts,shippingDiscounts:t.shippingDiscounts,startDate:t.startDate,startTime:t.startTime,setEndDate:t.setEndDate,endDate:t.endDate,endTime:t.endTime,createdAt:t.createdAt,updatedAt:t.updatedAt}),n.jsx(Yme,{buysProducts:i,buysCollections:l,getsProducts:c,getsCollections:d,segments:p,customers:h})]})})})})},Xme=()=>{const s=dr(),{activeStoreId:r}=Ur(),{searchBasic:e,loading:t}=Ol(),{searchCollections:a,loading:o,collections:i}=Fp(),{segments:l,searchCustomerSegments:c,fetchSegmentsByStoreId:d,loading:p}=Dm(),{customers:h,searchCustomers:g,fetchCustomersByStoreId:y,loading:b}=iu(),{createDiscount:v,loading:w,error:C}=rk(),[k,N]=u.useState({method:"discount-code",discountCode:"",title:"",allowDiscountOnChannels:!1,customerBuys:"minimum-quantity",quantity:"",amount:"",anyItemsFrom:"specific-products",searchQuery:"",customerGetsQuantity:"",customerGetsAnyItemsFrom:"specific-products",customerGetsSearchQuery:"",discountedValue:"free",discountedAmount:"",discountedPercentage:"",setMaxUsersPerOrder:!1,maxUsersPerOrder:"",eligibility:"all-customers",eligibilitySearchQuery:"",applyOnPOSPro:!1,limitTotalUses:!1,totalUsesLimit:"",limitOneUsePerCustomer:!1,productDiscounts:!1,orderDiscounts:!1,shippingDiscounts:!1,startDate:"",startTime:"",setEndDate:!1,endDate:"",endTime:""}),[O,R]=u.useState([]),[L,B]=u.useState([]),[G,$]=u.useState([]),[z,Y]=u.useState([]),[M,q]=u.useState([]),[P,H]=u.useState([]),[D,X]=u.useState([]),[se,Q]=u.useState([]),[xe,K]=u.useState(""),[Z,ve]=u.useState(""),ae=u.useCallback((I,V)=>{N(re=>({...re,[I]:V}))},[]),Se=u.useCallback((()=>{let I;return async(V,re)=>{window.clearTimeout(I),I=window.setTimeout(async()=>{if(r){if(!V.trim()){re==="buy"?R([]):Y([]);return}try{const ge=(await e({q:V,storeId:r})).map(Ce=>({_id:Ce._id,title:Ce.title,sku:Ce.sku,imageUrl:Ce.imageUrl}));re==="buy"?R(ge):Y(ge)}catch{}}},300)}})(),[r,e]),Pe=u.useCallback((()=>{let I;return async V=>{window.clearTimeout(I),I=window.setTimeout(async()=>{if(r)try{await a(r,V||"",1,10)}catch{}},300)}})(),[r,a]),$e=u.useCallback((()=>{let I;return async V=>{window.clearTimeout(I),I=window.setTimeout(async()=>{if(r)if(V.trim())try{await c(r,V)}catch{}else try{await d(r)}catch{}},300)}})(),[r,c,d]),we=u.useCallback((()=>{let I;return async V=>{window.clearTimeout(I),I=window.setTimeout(async()=>{if(r)if(V.trim())try{await g(r,V)}catch{}else try{await y(r)}catch{}},300)}})(),[r,g,y]),Ae=u.useCallback(()=>{s("/discounts?createDiscountModal=open")},[s]),ze=u.useCallback(async I=>{I.preventDefault();try{const V={storeId:r,method:k.method,...k.method==="discount-code"?{discountCode:k.discountCode}:{},...k.method==="automatic"?{title:k.title}:{},allowDiscountOnChannels:k.allowDiscountOnChannels,customerBuys:k.customerBuys,...k.customerBuys==="minimum-quantity"?{quantity:Number(k.quantity)||0}:{},...k.customerBuys==="minimum-amount"?{amount:Number(k.amount)||0}:{},anyItemsFrom:k.anyItemsFrom,customerGetsQuantity:Number(k.customerGetsQuantity)||1,customerGetsAnyItemsFrom:k.customerGetsAnyItemsFrom,discountedValue:k.discountedValue,...k.discountedValue==="amount"?{discountedAmount:Number(k.discountedAmount)||0}:{},...k.discountedValue==="percentage"?{discountedPercentage:Number(k.discountedPercentage)||0}:{},setMaxUsersPerOrder:k.setMaxUsersPerOrder,...k.setMaxUsersPerOrder?{maxUsersPerOrder:Number(k.maxUsersPerOrder)||0}:{},eligibility:k.eligibility,applyOnPOSPro:k.applyOnPOSPro,limitTotalUses:k.limitTotalUses,...k.limitTotalUses?{totalUsesLimit:Number(k.totalUsesLimit)||0}:{},limitOneUsePerCustomer:k.limitOneUsePerCustomer,productDiscounts:k.productDiscounts,orderDiscounts:k.orderDiscounts,shippingDiscounts:k.shippingDiscounts,startDate:k.startDate||void 0,startTime:k.startTime||void 0,setEndDate:k.setEndDate,endDate:k.endDate||void 0,endTime:k.endTime||void 0,status:"active",buysProductIds:L,buysCollectionIds:G,getsProductIds:M,getsCollectionIds:P,targetCustomerSegmentIds:D,targetCustomerIds:se};(await v(V)).success&&s("/discounts")}catch{}},[k,L,G,M,P,D,se,r,v,s]),Ge=[{value:"specific-products",label:"Specific products"},{value:"specific-collections",label:"Specific collections"}],Ue=O.map(I=>({value:I._id,label:I.title})),ht=i.map(I=>({value:I._id,label:I.title})),ee=z.map(I=>({value:I._id,label:I.title})),ue=i.map(I=>({value:I._id,label:I.title})),Oe=l.map(I=>({value:I._id,label:I.name})),J=h.map(I=>({value:I._id,label:`${I.firstName} ${I.lastName}`.trim()||I.email,secondaryText:I.email}));return n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:Ae,className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(gn,{className:"w-4 h-4"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Buy X get Y"})]})}),n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsxs("form",{onSubmit:ze,children:[C&&n.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 flex items-center justify-between",children:[n.jsx("p",{className:"text-sm text-red-800",children:C}),n.jsx("button",{type:"button",onClick:()=>{},className:"text-red-600 hover:text-red-800",children:n.jsx(Zs,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Method"}),n.jsxs("fieldset",{className:"mb-3",children:[n.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Discount Method"}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"method",value:"discount-code",checked:k.method==="discount-code",onChange:I=>ae("method",I.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Discount code"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"method",value:"automatic",checked:k.method==="automatic",onChange:I=>ae("method",I.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Automatic discount"})]})]})]}),k.method==="discount-code"&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Discount code"}),n.jsx("input",{type:"text",value:k.discountCode,onChange:I=>ae("discountCode",I.target.value),placeholder:"Enter discount code",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Customers will enter this code at checkout"})]}),k.method==="automatic"&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Title"}),n.jsx("input",{type:"text",value:k.title,onChange:I=>ae("title",I.target.value),placeholder:"Enter discount title",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"This title will be shown to customers"})]})]}),k.method==="discount-code"&&n.jsxs(n.Fragment,{children:[n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Sales channel access"}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:k.allowDiscountOnChannels,onChange:I=>ae("allowDiscountOnChannels",I.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Allow discount to be featured on selected channels"})]})]})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:k.customerBuys==="minimum-amount"?"Customer spends":"Customer buys"}),n.jsxs("fieldset",{className:"mb-3",children:[n.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:k.customerBuys==="minimum-amount"?"Customer spends":"Customer buys"}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"customerBuys",value:"minimum-quantity",checked:k.customerBuys==="minimum-quantity",onChange:I=>ae("customerBuys",I.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Minimum quantity of items"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"customerBuys",value:"minimum-amount",checked:k.customerBuys==="minimum-amount",onChange:I=>ae("customerBuys",I.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Minimum purchase amount"})]})]})]}),(k.customerBuys==="minimum-quantity"||k.customerBuys==="minimum-amount")&&n.jsx("div",{className:"mt-3",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:k.customerBuys==="minimum-quantity"?"Quantity":"Amount"}),k.customerBuys==="minimum-amount"?n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-2 text-gray-500 text-sm",children:""}),n.jsx("input",{type:"number",value:k.amount,onChange:I=>ae("amount",I.target.value),placeholder:"Enter minimum amount",className:"w-full px-3 py-1.5 pl-8 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"})]}):n.jsx("input",{type:"number",value:k.quantity,onChange:I=>ae("quantity",I.target.value),placeholder:"Enter minimum quantity",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:k.customerBuys==="minimum-quantity"?"Enter the minimum quantity of items required":"Enter the minimum purchase amount in rupees"})]}),n.jsx("div",{children:n.jsx(Va,{label:"Any items from",value:k.anyItemsFrom,options:Ge,onChange:I=>ae("anyItemsFrom",I)})}),n.jsxs("div",{className:"col-span-full",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:k.anyItemsFrom==="specific-products"?"Search products":"Search collections"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:k.searchQuery,onChange:I=>{const V=I.target.value;ae("searchQuery",V),k.anyItemsFrom==="specific-products"?Se(V,"buy"):Pe(V)},placeholder:k.anyItemsFrom==="specific-products"?"Search for products...":"Search for collections...",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 pr-10 text-base"}),(k.anyItemsFrom==="specific-products"&&t||k.anyItemsFrom==="specific-collections"&&o)&&n.jsx("div",{className:"absolute right-3 top-2",children:n.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:k.anyItemsFrom==="specific-products"?"Search and select products to apply the discount to":"Search and select collections to apply the discount to"})]}),k.anyItemsFrom==="specific-products"&&n.jsxs("div",{className:"col-span-full",children:[n.jsx(Fo,{label:"Choose Products",value:L,options:Ue,onChange:B,renderValue:I=>O.filter(re=>I.includes(re._id)).map(re=>re.title).join(", ")}),n.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[L.length," product(s) selected"]})]}),k.anyItemsFrom==="specific-collections"&&n.jsxs("div",{className:"col-span-full",children:[n.jsx(Fo,{label:"Choose Collections",value:G,options:ht,onChange:$,renderValue:I=>i.filter(re=>I.includes(re._id)).map(re=>re.title).join(", ")}),n.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[G.length," collection(s) selected"]})]})]})})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Customer gets"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Quantity"}),n.jsx("input",{type:"number",value:k.customerGetsQuantity,onChange:I=>ae("customerGetsQuantity",I.target.value),placeholder:"Enter quantity",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the quantity of items customers will get"})]}),n.jsx("div",{children:n.jsx(Va,{label:"Any items from",value:k.customerGetsAnyItemsFrom,options:Ge,onChange:I=>ae("customerGetsAnyItemsFrom",I)})}),n.jsxs("div",{className:"col-span-full",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:k.customerGetsAnyItemsFrom==="specific-products"?"Search products":"Search collections"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:k.customerGetsSearchQuery,onChange:I=>{const V=I.target.value;ae("customerGetsSearchQuery",V),k.customerGetsAnyItemsFrom==="specific-products"?Se(V,"get"):Pe(V)},placeholder:k.customerGetsAnyItemsFrom==="specific-products"?"Search for products...":"Search for collections...",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 pr-10 text-base"}),(k.customerGetsAnyItemsFrom==="specific-products"&&t||k.customerGetsAnyItemsFrom==="specific-collections"&&o)&&n.jsx("div",{className:"absolute right-3 top-2",children:n.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:k.customerGetsAnyItemsFrom==="specific-products"?"Search and select products to apply the discount to":"Search and select collections to apply the discount to"})]}),k.customerGetsAnyItemsFrom==="specific-products"&&n.jsxs("div",{className:"col-span-full",children:[n.jsx(Fo,{label:"Choose Products",value:M,options:ee,onChange:q,renderValue:I=>z.filter(re=>I.includes(re._id)).map(re=>re.title).join(", ")}),n.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[M.length," product(s) selected"]})]}),k.customerGetsAnyItemsFrom==="specific-collections"&&n.jsxs("div",{className:"col-span-full",children:[n.jsx(Fo,{label:"Choose Collections",value:P,options:ue,onChange:H,renderValue:I=>i.filter(re=>I.includes(re._id)).map(re=>re.title).join(", ")}),n.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[P.length," collection(s) selected"]})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("h3",{className:"text-base font-medium mb-3 text-gray-900",children:"At a discounted value"}),n.jsxs("fieldset",{className:"mb-3",children:[n.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Discounted Value"}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"discountedValue",value:"free",checked:k.discountedValue==="free",onChange:I=>ae("discountedValue",I.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Free"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"discountedValue",value:"amount",checked:k.discountedValue==="amount",onChange:I=>ae("discountedValue",I.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Amount of each"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"discountedValue",value:"percentage",checked:k.discountedValue==="percentage",onChange:I=>ae("discountedValue",I.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Percentage"})]})]})]}),k.discountedValue==="amount"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Amount"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-2 text-gray-500 text-sm",children:""}),n.jsx("input",{type:"number",value:k.discountedAmount,onChange:I=>ae("discountedAmount",I.target.value),placeholder:"Enter amount",className:"w-full px-3 py-1.5 pl-8 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the amount in rupees"})]}),n.jsx("p",{className:"mt-2 text-xs text-gray-600",children:"For multiple quantities, the discount amount will be taken off each eligible item."})]}),k.discountedValue==="percentage"&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Percentage"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",value:k.discountedPercentage,onChange:I=>ae("discountedPercentage",I.target.value),placeholder:"Enter percentage",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 pr-8 text-base"}),n.jsx("span",{className:"absolute right-3 top-2 text-gray-500 text-sm",children:"%"})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the percentage discount"})]}),n.jsxs("div",{className:"mt-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:k.setMaxUsersPerOrder,onChange:I=>ae("setMaxUsersPerOrder",I.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Set a maximum number of users per order"})]}),k.setMaxUsersPerOrder&&n.jsxs("div",{className:"ml-6 mt-2",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Maximum number of users per order"}),n.jsx("input",{type:"number",value:k.maxUsersPerOrder,onChange:I=>ae("maxUsersPerOrder",I.target.value),placeholder:"Enter maximum number",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the maximum number of users per order"})]})]})]})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-1 text-gray-900",children:"Eligibility"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Available on all sales channels"}),n.jsxs("fieldset",{className:"mb-3",children:[n.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Customer Eligibility"}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"eligibility",value:"all-customers",checked:k.eligibility==="all-customers",onChange:I=>ae("eligibility",I.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"All customers"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"eligibility",value:"specific-customer-segments",checked:k.eligibility==="specific-customer-segments",onChange:I=>ae("eligibility",I.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Specific customer segments"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"eligibility",value:"specific-customers",checked:k.eligibility==="specific-customers",onChange:I=>ae("eligibility",I.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Specific customers"})]})]})]}),k.method==="automatic"&&k.eligibility==="all-customers"&&n.jsx("div",{className:"ml-2 mt-2",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:k.applyOnPOSPro,onChange:I=>ae("applyOnPOSPro",I.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Apply on POS Pro locations"})]})}),(k.eligibility==="specific-customer-segments"||k.eligibility==="specific-customers")&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:k.eligibility==="specific-customer-segments"?"Search customer segments":"Search customers"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:k.eligibility==="specific-customer-segments"?xe:Z,onChange:I=>{const V=I.target.value;k.eligibility==="specific-customer-segments"?(K(V),$e(V)):(ve(V),we(V))},placeholder:k.eligibility==="specific-customer-segments"?"Search for customer segments...":"Search for customers...",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 pr-10 text-base"}),(k.eligibility==="specific-customer-segments"&&p||k.eligibility==="specific-customers"&&b)&&n.jsx("div",{className:"absolute right-3 top-2",children:n.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:k.eligibility==="specific-customer-segments"?"Search and select customer segments to apply the discount to":"Search and select customers to apply the discount to"}),k.eligibility==="specific-customer-segments"&&l.length>0&&n.jsxs("div",{className:"mt-3",children:[n.jsx(Fo,{label:"Choose Customer Segments",value:D,options:Oe,onChange:X,renderValue:I=>l.filter(V=>I.includes(V._id)).map(V=>V.name).join(", ")}),n.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[D.length," segment(s) selected"]})]}),k.eligibility==="specific-customers"&&h.length>0&&n.jsxs("div",{className:"mt-3",children:[n.jsx(Fo,{label:"Choose Customers",value:se,options:J,onChange:Q,renderValue:I=>h.filter(V=>I.includes(V._id)).map(V=>`${V.firstName} ${V.lastName}`.trim()||V.email).join(", ")}),n.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[se.length," customer(s) selected"]})]})]})]}),k.method==="discount-code"&&n.jsxs(n.Fragment,{children:[n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Maximum discount uses"}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:k.limitTotalUses,onChange:I=>ae("limitTotalUses",I.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Limit number of times this discount can be used in total"})]}),k.limitTotalUses&&n.jsxs("div",{className:"ml-6 mt-2",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Total uses limit"}),n.jsx("input",{type:"number",value:k.totalUsesLimit,onChange:I=>ae("totalUsesLimit",I.target.value),placeholder:"Enter maximum number of uses",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the maximum number of times this discount can be used"})]})]}),n.jsx("div",{children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:k.limitOneUsePerCustomer,onChange:I=>ae("limitOneUsePerCustomer",I.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Limit to one use per customer"})]})})]})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Combinations"}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:k.productDiscounts,onChange:I=>ae("productDiscounts",I.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Product Discounts"})]}),k.productDiscounts&&n.jsx("p",{className:"mt-1 ml-6 text-xs text-gray-600",children:"Each eligible item in the cart may receive up to one product discount."})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:k.orderDiscounts,onChange:I=>ae("orderDiscounts",I.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Order Discounts"})]}),k.orderDiscounts&&n.jsx("p",{className:"mt-1 ml-6 text-xs text-gray-600",children:"All eligible order discounts will apply in addition to eligible product discounts."})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:k.shippingDiscounts,onChange:I=>ae("shippingDiscounts",I.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Shipping Discounts"})]}),k.shippingDiscounts&&n.jsx("p",{className:"mt-1 ml-6 text-xs text-gray-600",children:"The largest eligible shipping discount will apply in addition to eligible product discounts."})]}),(k.productDiscounts||k.orderDiscounts||k.shippingDiscounts)&&n.jsx("div",{className:"mt-3 p-3 bg-white/95 border border-gray-200",children:n.jsx("p",{className:"text-xs text-gray-600",children:"This discount won't combine with any other discount at checkout."})})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Active dates"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Start date"}),n.jsx("input",{type:"date",value:k.startDate,onChange:I=>ae("startDate",I.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Start time (IST)"}),n.jsx("input",{type:"time",value:k.startTime,onChange:I=>ae("startTime",I.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Indian Standard Time"})]})]}),n.jsx("div",{className:"mt-3",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:k.setEndDate,onChange:I=>ae("setEndDate",I.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Set end date"})]})}),k.setEndDate&&n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mt-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"End date"}),n.jsx("input",{type:"date",value:k.endDate,onChange:I=>ae("endDate",I.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"End time (IST)"}),n.jsx("input",{type:"time",value:k.endTime,onChange:I=>ae("endTime",I.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Indian Standard Time"})]})]})]}),n.jsxs("div",{className:"flex gap-2 justify-end mt-4",children:[n.jsx("button",{type:"button",onClick:Ae,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsxs("button",{type:"submit",disabled:w,className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:[w&&n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),w?"Creating...":"Create Discount"]})]})]})})]})})},Qme=({appliesTo:s,eligibility:r,minimumPurchase:e,minimumQuantity:t})=>n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Summary"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Applies to"}),n.jsx("p",{className:"text-sm text-gray-900",children:s})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Eligibility"}),n.jsx("p",{className:"text-sm text-gray-900",children:r})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Minimum purchase"}),n.jsx("p",{className:"text-sm text-gray-900",children:e||"-"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Minimum quantity"}),n.jsx("p",{className:"text-sm text-gray-900",children:t??"-"})]})]})]}),Jme=({valueType:s,value:r,oncePerOrder:e,allowDiscountOnChannels:t,limitTotalUses:a,totalUsesLimit:o,limitOneUsePerCustomer:i,productDiscounts:l,orderDiscounts:c,shippingDiscounts:d})=>{const p=h=>h?"Yes":"No";return n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Value & Limits"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Value type"}),n.jsx("p",{className:"text-sm text-gray-900",children:s})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Value"}),n.jsx("p",{className:"text-sm text-gray-900",children:r})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Once per order"}),n.jsx("p",{className:"text-sm text-gray-900",children:p(e)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Allow discount on channels"}),n.jsx("p",{className:"text-sm text-gray-900",children:p(t)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Limit total uses"}),n.jsx("p",{className:"text-sm text-gray-900",children:a?`Yes (${o??"-"})`:"No"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Limit one use per customer"}),n.jsx("p",{className:"text-sm text-gray-900",children:p(i)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Product discounts combinable"}),n.jsx("p",{className:"text-sm text-gray-900",children:p(l)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Order discounts combinable"}),n.jsx("p",{className:"text-sm text-gray-900",children:p(c)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Shipping discounts combinable"}),n.jsx("p",{className:"text-sm text-gray-900",children:p(d)})]})]})]})},ege=({startDate:s,startTime:r,setEndDate:e,endDate:t,endTime:a,createdAt:o,updatedAt:i})=>{const l=c=>c?new Date(c).toLocaleDateString():"-";return n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Active Dates"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Start"}),n.jsx("p",{className:"text-sm text-gray-900",children:[s,r].filter(Boolean).join(" ")||"-"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"End"}),n.jsx("p",{className:"text-sm text-gray-900",children:e?[t,a].filter(Boolean).join(" ")||"-":"No end date"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Created"}),n.jsx("p",{className:"text-sm text-gray-900",children:l(o)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Updated"}),n.jsx("p",{className:"text-sm text-gray-900",children:l(i)})]})]})]})},tge=({targetProductDetails:s,targetProductIds:r,targetCollectionDetails:e,targetCollectionIds:t,targetCustomerSegmentDetails:a,targetCustomerSegmentIds:o,targetCustomerDetails:i,targetCustomerIds:l})=>{const c=d=>n.jsx(nc,{items:d});return n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Targets"}),n.jsxs("div",{className:"mb-3",children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1.5",children:"Products"}),s&&s.length>0?c(s.map(d=>({key:d._id,label:d.title||d._id}))):r&&r.length>0?c(r.map(d=>({key:d,label:d}))):n.jsx("p",{className:"text-xs text-gray-600",children:"None"})]}),n.jsx("hr",{className:"my-3 border-gray-200"}),n.jsxs("div",{className:"mb-3",children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1.5",children:"Collections"}),e&&e.length>0?c(e.map(d=>({key:d._id,label:d.title||d._id}))):t&&t.length>0?c(t.map(d=>({key:d,label:d}))):n.jsx("p",{className:"text-xs text-gray-600",children:"None"})]}),n.jsx("hr",{className:"my-3 border-gray-200"}),n.jsxs("div",{className:"mb-3",children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1.5",children:"Customer Segments"}),a&&a.length>0?c(a.map(d=>({key:d._id,label:d.name||d._id}))):o&&o.length>0?c(o.map(d=>({key:d,label:d}))):n.jsx("p",{className:"text-xs text-gray-600",children:"None"})]}),n.jsx("hr",{className:"my-3 border-gray-200"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1.5",children:"Customers"}),i&&i.length>0?c(i.map(d=>({key:d._id,label:`${d.firstName||""} ${d.lastName||""}`.trim()||d.email||d._id}))):l&&l.length>0?c(l.map(d=>({key:d,label:d}))):n.jsx("p",{className:"text-xs text-gray-600",children:"None"})]})]})},rge=()=>{const{id:s}=ks(),r=dr(),{discounts:e}=I2(),t=u.useMemo(()=>e.find(i=>i._id===s),[e,s]),a=u.useCallback(()=>{r("/discounts")},[r]);if(!t)return n.jsx(Yt,{children:n.jsx(Ij,{})});const o=t.valueType==="percentage"?`${t.percentage??0}%`:`${t.fixedAmount??0}`;return n.jsx(Yt,{children:n.jsx("div",{className:"min-h-screen",children:n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx(Rj,{method:t.method,discountCode:t.discountCode,title:t.title,value:o,status:t.status,onBack:a}),n.jsx(Qme,{appliesTo:t.appliesTo,eligibility:t.eligibility,minimumPurchase:t.minimumPurchase,minimumQuantity:t.minimumQuantity}),n.jsx(Jme,{valueType:t.valueType,value:o,oncePerOrder:t.oncePerOrder,allowDiscountOnChannels:t.allowDiscountOnChannels,limitTotalUses:t.limitTotalUses,totalUsesLimit:t.totalUsesLimit,limitOneUsePerCustomer:t.limitOneUsePerCustomer,productDiscounts:t.productDiscounts,orderDiscounts:t.orderDiscounts,shippingDiscounts:t.shippingDiscounts}),n.jsx(ege,{startDate:t.startDate,startTime:t.startTime,setEndDate:t.setEndDate,endDate:t.endDate,endTime:t.endTime,createdAt:t.createdAt,updatedAt:t.updatedAt}),n.jsx(tge,{targetProductDetails:t.targetProductDetails,targetProductIds:t.targetProductIds,targetCollectionDetails:t.targetCollectionDetails,targetCollectionIds:t.targetCollectionIds,targetCustomerSegmentDetails:t.targetCustomerSegmentDetails,targetCustomerSegmentIds:t.targetCustomerSegmentIds,targetCustomerDetails:t.targetCustomerDetails,targetCustomerIds:t.targetCustomerIds})]})})})})},nge=({method:s,discountCode:r,title:e,eligibility:t,applyOnPOSPro:a,status:o,createdAt:i,updatedAt:l})=>{const c=d=>d?"Yes":"No";return n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"General Information"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Method"}),n.jsx("p",{className:"text-sm text-gray-900",children:s})]}),s==="discount-code"&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Code"}),n.jsx("p",{className:"text-sm text-gray-900",children:r})]}),s==="automatic"&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Title"}),n.jsx("p",{className:"text-sm text-gray-900",children:e})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Eligibility"}),n.jsx("p",{className:"text-sm text-gray-900",children:t})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Apply on POS Pro"}),n.jsx("p",{className:"text-sm text-gray-900",children:c(a)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Status"}),n.jsx("p",{className:"text-sm text-gray-900",children:o})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Created At"}),n.jsx("p",{className:"text-sm text-gray-900",children:i?new Date(i).toLocaleDateString():"-"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Last Updated"}),n.jsx("p",{className:"text-sm text-gray-900",children:l?new Date(l).toLocaleDateString():"-"})]})]})]})},sge=({countrySelection:s,selectedCountryCodes:r,excludeShippingRates:e,shippingRateLimit:t})=>{const a=o=>o?"Yes":"No";return n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Country & Rates"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Country Selection"}),n.jsx("p",{className:"text-sm text-gray-900",children:s})]}),s==="selected-countries"&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Selected Country Codes"}),n.jsx("p",{className:"text-sm text-gray-900",children:(r||[]).join(", ")||"-"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Exclude Shipping Rates"}),n.jsx("p",{className:"text-sm text-gray-900",children:a(e)})]}),e&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Shipping Rate Limit"}),n.jsx("p",{className:"text-sm text-gray-900",children:t})]})]})]})},age=({minimumPurchase:s,minimumAmount:r,minimumQuantity:e})=>n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Minimum Purchase"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Requirement"}),n.jsx("p",{className:"text-sm text-gray-900",children:s})]}),s==="minimum-amount"&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Amount"}),n.jsxs("p",{className:"text-sm text-gray-900",children:["",r]})]}),s==="minimum-quantity"&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Quantity"}),n.jsx("p",{className:"text-sm text-gray-900",children:e})]})]})]}),oge=({allowDiscountOnChannels:s,limitTotalUses:r,totalUsesLimit:e,limitOneUsePerCustomer:t})=>{const a=o=>o?"Yes":"No";return n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Sales Channel & Limits"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Allow on Channels"}),n.jsx("p",{className:"text-sm text-gray-900",children:a(s)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Limit Total Uses"}),n.jsx("p",{className:"text-sm text-gray-900",children:a(r)})]}),r&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Total Uses Limit"}),n.jsx("p",{className:"text-sm text-gray-900",children:e})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"One Use Per Customer"}),n.jsx("p",{className:"text-sm text-gray-900",children:a(t)})]})]})]})},ige=({productDiscounts:s,orderDiscounts:r})=>{const e=t=>t?"Yes":"No";return n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Combinations"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Product Discounts"}),n.jsx("p",{className:"text-sm text-gray-900",children:e(s)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Order Discounts"}),n.jsx("p",{className:"text-sm text-gray-900",children:e(r)})]})]})]})},lge=({startDate:s,startTime:r,setEndDate:e,endDate:t,endTime:a})=>{const o=i=>i?"Yes":"No";return n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Active Dates"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Start Date"}),n.jsxs("p",{className:"text-sm text-gray-900",children:[s," ",r?`at ${r}`:""]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Set End Date"}),n.jsx("p",{className:"text-sm text-gray-900",children:o(e)})]}),e&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"End Date"}),n.jsxs("p",{className:"text-sm text-gray-900",children:[t," ",a?`at ${a}`:""]})]})]})]})},cge=({targetCustomerSegmentIds:s,segmentLabel:r})=>!s||s.length===0?null:n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Target Customer Segments"}),n.jsx(nc,{items:s.map((e,t)=>({key:e?._id||t.toString(),label:r(e)}))})]}),dge=({targetCustomerIds:s,customerLabel:r})=>!s||s.length===0?null:n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Target Customers"}),n.jsx(nc,{items:s.map((e,t)=>({key:e?._id||t.toString(),label:r(e)}))})]}),uge=()=>{const{id:s}=ks(),r=dr(),{activeStoreId:e}=Ur(),{discounts:t,fetchDiscountsByStoreId:a,loading:o,error:i}=nk(),l=t.find(h=>h._id===s);u.useEffect(()=>{e&&!t.length&&a(e)},[e,t.length,a]);const c=u.useCallback(()=>{r("/discounts")},[r]);u.useCallback(h=>h?"Yes":"No",[]);const d=u.useCallback(h=>h?.name||h?._id,[]),p=u.useCallback(h=>`${h?.firstName||""} ${h?.lastName||""}`.trim()||h?.email||h?._id,[]);return o?n.jsx(Yt,{children:n.jsx("div",{className:"flex justify-center py-8",children:n.jsx("div",{className:"w-6 h-6 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})})}):i?n.jsx(Yt,{children:n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsx("div",{className:"p-3 bg-red-50 border border-red-200",children:n.jsx("p",{className:"text-sm text-red-800",children:i})})})}):l?n.jsx(Yt,{children:n.jsx("div",{className:"min-h-screen",children:n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx(Rj,{method:l.method,discountCode:l.discountCode,title:l.title,value:"Free Shipping",status:l.status,onBack:c}),n.jsx(nge,{method:l.method,discountCode:l.discountCode,title:l.title,eligibility:l.eligibility,applyOnPOSPro:l.applyOnPOSPro,status:l.status,createdAt:l.createdAt,updatedAt:l.updatedAt}),n.jsx(sge,{countrySelection:l.countrySelection,selectedCountryCodes:l.selectedCountryCodes,excludeShippingRates:l.excludeShippingRates,shippingRateLimit:l.shippingRateLimit}),n.jsx(age,{minimumPurchase:l.minimumPurchase,minimumAmount:l.minimumAmount,minimumQuantity:l.minimumQuantity}),n.jsx(oge,{allowDiscountOnChannels:l.allowDiscountOnChannels,limitTotalUses:l.limitTotalUses,totalUsesLimit:l.totalUsesLimit,limitOneUsePerCustomer:l.limitOneUsePerCustomer}),n.jsx(ige,{productDiscounts:l.productDiscounts,orderDiscounts:l.orderDiscounts}),n.jsx(lge,{startDate:l.startDate,startTime:l.startTime,setEndDate:l.setEndDate,endDate:l.endDate,endTime:l.endTime}),l.targetCustomerSegmentIds&&l.targetCustomerSegmentIds.length>0&&n.jsx(cge,{targetCustomerSegmentIds:l.targetCustomerSegmentIds,segmentLabel:d}),l.targetCustomerIds&&l.targetCustomerIds.length>0&&n.jsx(dge,{targetCustomerIds:l.targetCustomerIds,customerLabel:p})]})})})}):n.jsx(Yt,{children:n.jsx(Ij,{})})},fge=()=>{const s=dr(),{createDiscount:r,loading:e,error:t}=nk(),{activeStoreId:a}=Ur(),{segments:o,searchCustomerSegments:i,fetchSegmentsByStoreId:l,loading:c}=Dm(),{customers:d,searchCustomers:p,fetchCustomersByStoreId:h,loading:g}=iu(),[y,b]=u.useState({method:"discount-code",discountCode:"",title:"",countrySelection:"all-countries",countrySearchQuery:"",excludeShippingRates:!1,shippingRateLimit:"",eligibility:"all-customers",eligibilitySearchQuery:"",applyOnPOSPro:!1,minimumPurchase:"no-requirements",minimumAmount:"",minimumQuantity:"",allowDiscountOnChannels:!1,limitTotalUses:!1,totalUsesLimit:"",limitOneUsePerCustomer:!1,productDiscounts:!1,orderDiscounts:!1,startDate:"",startTime:"",setEndDate:!1,endDate:"",endTime:""}),[v,w]=u.useState(""),[C,k]=u.useState(""),[N,O]=u.useState([]),[R,L]=u.useState([]),[B,G]=u.useState([]),[$,z]=u.useState(fm),Y=u.useCallback((()=>{let K;return Z=>{window.clearTimeout(K),K=window.setTimeout(async()=>{if(a)if(Z.trim())try{await i(a,Z)}catch{}else try{await l(a)}catch{}},300)}})(),[a,i,l]),M=u.useCallback((()=>{let K;return Z=>{window.clearTimeout(K),K=window.setTimeout(async()=>{if(a)if(Z.trim())try{await p(a,Z)}catch{}else try{await h(a)}catch{}},300)}})(),[a,p,h]),q=u.useCallback((K,Z)=>{b(ve=>({...ve,[K]:Z}))},[]),P=u.useCallback(K=>{if(q("countrySearchQuery",K),K.trim()==="")z(fm);else{const Z=fm.filter(ve=>ve.name.toLowerCase().includes(K.toLowerCase()));z(Z)}},[q]);u.useCallback(K=>{B.includes(K)||G(Z=>[...Z,K])},[]);const H=u.useCallback(K=>{G(Z=>Z.filter(ve=>ve!==K))},[]),D=u.useCallback(()=>{s("/discounts?createDiscountModal=open")},[s]),X=u.useCallback(async K=>{if(K.preventDefault(),!a)return;const Z={storeId:a,method:y.method,discountCode:y.method==="discount-code"&&y.discountCode||void 0,title:y.method==="automatic"&&y.title||void 0,countrySelection:y.countrySelection,selectedCountryCodes:y.countrySelection==="selected-countries"?B:void 0,excludeShippingRates:!!y.excludeShippingRates,shippingRateLimit:y.excludeShippingRates&&y.shippingRateLimit!==""?Number(y.shippingRateLimit):void 0,eligibility:y.eligibility,applyOnPOSPro:!!y.applyOnPOSPro,minimumPurchase:y.minimumPurchase,minimumAmount:y.minimumPurchase==="minimum-amount"&&y.minimumAmount!==""?Number(y.minimumAmount):void 0,minimumQuantity:y.minimumPurchase==="minimum-quantity"&&y.minimumQuantity!==""?Number(y.minimumQuantity):void 0,allowDiscountOnChannels:!!y.allowDiscountOnChannels,limitTotalUses:!!y.limitTotalUses,totalUsesLimit:y.limitTotalUses&&y.totalUsesLimit!==""?Number(y.totalUsesLimit):void 0,limitOneUsePerCustomer:!!y.limitOneUsePerCustomer,productDiscounts:!!y.productDiscounts,orderDiscounts:!!y.orderDiscounts,startDate:y.startDate||void 0,startTime:y.startTime||void 0,setEndDate:!!y.setEndDate,endDate:y.setEndDate&&y.endDate||void 0,endTime:y.setEndDate&&y.endTime||void 0,targetCustomerSegmentIds:N.length?N:void 0,targetCustomerIds:R.length?R:void 0};try{(await r(Z)).success&&s("/discounts")}catch{}},[y,B,N,R,a,r,s]);u.useEffect(()=>{w(""),k(""),O([]),L([])},[y.eligibility]);const se=$.map(K=>({value:K.code,label:`${K.name} (${K.code})`})),Q=o.map(K=>({value:K._id,label:K.name})),xe=d.map(K=>({value:K._id,label:`${K.firstName||""} ${K.lastName||""}`.trim()||K.email,secondaryText:K.email}));return n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:D,className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(gn,{className:"w-4 h-4"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Free shipping"})]})}),n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsxs("form",{onSubmit:X,children:[t&&n.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 flex items-center justify-between",children:[n.jsx("p",{className:"text-sm text-red-800",children:t}),n.jsx("button",{type:"button",onClick:()=>{},className:"text-red-600 hover:text-red-800",children:n.jsx(Zs,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Method"}),n.jsxs("fieldset",{className:"mb-3",children:[n.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Discount Method"}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"method",value:"discount-code",checked:y.method==="discount-code",onChange:K=>q("method",K.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Discount code"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"method",value:"automatic",checked:y.method==="automatic",onChange:K=>q("method",K.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Automatic discount"})]})]})]}),y.method==="discount-code"&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Discount code"}),n.jsx("input",{type:"text",value:y.discountCode,onChange:K=>q("discountCode",K.target.value),placeholder:"Enter discount code",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Customers will enter this code at checkout"})]}),y.method==="automatic"&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Title"}),n.jsx("input",{type:"text",value:y.title,onChange:K=>q("title",K.target.value),placeholder:"Enter discount title",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"This title will be shown to customers"})]})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Country"}),n.jsxs("fieldset",{className:"mb-3",children:[n.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Country Selection"}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"countrySelection",value:"all-countries",checked:y.countrySelection==="all-countries",onChange:K=>q("countrySelection",K.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"All Countries"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"countrySelection",value:"selected-countries",checked:y.countrySelection==="selected-countries",onChange:K=>q("countrySelection",K.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Selected Countries"})]})]})]}),y.countrySelection==="selected-countries"&&n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Search Countries"}),n.jsx("input",{type:"text",value:y.countrySearchQuery,onChange:K=>P(K.target.value),placeholder:"Search for countries...",className:"w-full max-w-md px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Search and select countries to apply the discount to"}),B.length>0&&n.jsxs("div",{className:"mt-3",children:[n.jsxs("p",{className:"text-xs text-gray-600 mb-1.5",children:["Selected Countries (",B.length,"):"]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:B.map(K=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-gray-100 text-gray-700 border border-gray-200 text-xs",children:[qT(K),n.jsx("button",{type:"button",onClick:()=>H(K),className:"hover:text-gray-900",children:n.jsx(Zs,{className:"w-3.5 h-3.5"})})]},K))})]}),n.jsxs("div",{className:"mt-3",children:[n.jsx(Fo,{label:"Select Countries",value:B,options:se,onChange:G,renderValue:K=>K.length===0?"":K.length===1?qT(K[0]):`${K.length} countries selected`}),n.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[B.length," country(ies) selected"]})]})]}),n.jsx("h3",{className:"text-base font-medium mb-3 mt-4 text-gray-900",children:"Shipping Rates"}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:y.excludeShippingRates,onChange:K=>q("excludeShippingRates",K.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Exclude Shipping Rates over a certain amount"})]}),y.excludeShippingRates&&n.jsxs("div",{className:"ml-6 mt-2",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Shipping rate limit"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-2 text-gray-500 text-sm",children:""}),n.jsx("input",{type:"number",value:y.shippingRateLimit,onChange:K=>q("shippingRateLimit",K.target.value),placeholder:"Enter amount",className:"w-full px-3 py-1.5 pl-8 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the maximum shipping rate amount in rupees"})]})]})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-1 text-gray-900",children:"Eligibility"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Available on all sales channels"}),n.jsxs("fieldset",{className:"mb-3",children:[n.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Customer Eligibility"}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"eligibility",value:"all-customers",checked:y.eligibility==="all-customers",onChange:K=>q("eligibility",K.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"All customers"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"eligibility",value:"specific-customer-segments",checked:y.eligibility==="specific-customer-segments",onChange:K=>q("eligibility",K.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Specific customer segments"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"eligibility",value:"specific-customers",checked:y.eligibility==="specific-customers",onChange:K=>q("eligibility",K.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Specific customers"})]})]})]}),y.method==="automatic"&&y.eligibility==="all-customers"&&n.jsx("div",{className:"ml-2 mt-2",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:y.applyOnPOSPro,onChange:K=>q("applyOnPOSPro",K.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Apply on POS Pro locations"})]})}),y.eligibility==="specific-customer-segments"&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Search customer segments"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:v,onChange:K=>{const Z=K.target.value;w(Z),Y(Z)},placeholder:"Search for customer segments...",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 pr-10 text-base"}),c&&n.jsx("div",{className:"absolute right-3 top-2",children:n.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Search and select customer segments to apply the discount to"}),o.length>0&&n.jsxs("div",{className:"mt-3",children:[n.jsx(Fo,{label:"Choose Customer Segments",value:N,options:Q,onChange:O,renderValue:K=>o.filter(Z=>K.includes(Z._id)).map(Z=>Z.name).join(", ")}),n.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[N.length," segment(s) selected"]})]})]}),y.eligibility==="specific-customers"&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Search customers"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:C,onChange:K=>{const Z=K.target.value;k(Z),M(Z)},placeholder:"Search for customers...",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 pr-10 text-base"}),g&&n.jsx("div",{className:"absolute right-3 top-2",children:n.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Search and select customers to apply the discount to"}),d.length>0&&n.jsxs("div",{className:"mt-3",children:[n.jsx(Fo,{label:"Choose Customers",value:R,options:xe,onChange:L,renderValue:K=>d.filter(Z=>K.includes(Z._id)).map(Z=>`${Z.firstName||""} ${Z.lastName||""}`.trim()||Z.email).join(", ")}),n.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[R.length," customer(s) selected"]})]})]})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Minimum purchase requirements"}),n.jsxs("fieldset",{className:"mb-3",children:[n.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Minimum Purchase Requirements"}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"minimumPurchase",value:"no-requirements",checked:y.minimumPurchase==="no-requirements",onChange:K=>q("minimumPurchase",K.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"No minimum requirements"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"minimumPurchase",value:"minimum-amount",checked:y.minimumPurchase==="minimum-amount",onChange:K=>q("minimumPurchase",K.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Minimum purchase amount"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"minimumPurchase",value:"minimum-quantity",checked:y.minimumPurchase==="minimum-quantity",onChange:K=>q("minimumPurchase",K.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Minimum quantity of items"})]})]})]}),y.minimumPurchase==="minimum-amount"&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Minimum purchase amount"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-2 text-gray-500 text-sm",children:""}),n.jsx("input",{type:"number",value:y.minimumAmount,onChange:K=>q("minimumAmount",K.target.value),placeholder:"Enter minimum amount",className:"w-full px-3 py-1.5 pl-8 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Applies to all products"})]}),y.minimumPurchase==="minimum-quantity"&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Minimum quantity of items"}),n.jsx("input",{type:"number",value:y.minimumQuantity,onChange:K=>q("minimumQuantity",K.target.value),placeholder:"Enter minimum quantity",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Applies to all products"})]})]}),y.method==="discount-code"&&n.jsxs(n.Fragment,{children:[n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Sales channel access"}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:y.allowDiscountOnChannels,onChange:K=>q("allowDiscountOnChannels",K.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Allow discount to be featured on selected channels"})]})]})]}),y.method==="discount-code"&&n.jsxs(n.Fragment,{children:[n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Maximum discount uses"}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:y.limitTotalUses,onChange:K=>q("limitTotalUses",K.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Limit number of times this discount can be used in total"})]}),y.limitTotalUses&&n.jsxs("div",{className:"ml-6 mt-2",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Total uses limit"}),n.jsx("input",{type:"number",value:y.totalUsesLimit,onChange:K=>q("totalUsesLimit",K.target.value),placeholder:"Enter maximum number of uses",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the maximum number of times this discount can be used"})]})]}),n.jsx("div",{children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:y.limitOneUsePerCustomer,onChange:K=>q("limitOneUsePerCustomer",K.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Limit to one use per customer"})]})})]})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Combinations"}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:y.productDiscounts,onChange:K=>q("productDiscounts",K.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Product Discounts"})]}),y.productDiscounts&&n.jsx("p",{className:"mt-1 ml-6 text-xs text-gray-600",children:"Each eligible item in the cart may receive up to one product discount."})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:y.orderDiscounts,onChange:K=>q("orderDiscounts",K.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Order Discounts"})]}),y.orderDiscounts&&n.jsx("p",{className:"mt-1 ml-6 text-xs text-gray-600",children:"All eligible order discounts will apply in addition to eligible product discounts."})]}),(y.productDiscounts||y.orderDiscounts)&&n.jsx("div",{className:"mt-3 p-3 bg-white/95 border border-gray-200",children:n.jsx("p",{className:"text-xs text-gray-600",children:"This discount won't combine with any other discount at checkout."})})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Active dates"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Start date"}),n.jsx("input",{type:"date",value:y.startDate,onChange:K=>q("startDate",K.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Start time (IST)"}),n.jsx("input",{type:"time",value:y.startTime,onChange:K=>q("startTime",K.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Indian Standard Time"})]})]}),n.jsx("div",{className:"mt-3",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:y.setEndDate,onChange:K=>q("setEndDate",K.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Set end date"})]})}),y.setEndDate&&n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mt-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"End date"}),n.jsx("input",{type:"date",value:y.endDate,onChange:K=>q("endDate",K.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"End time (IST)"}),n.jsx("input",{type:"time",value:y.endTime,onChange:K=>q("endTime",K.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Indian Standard Time"})]})]})]}),n.jsxs("div",{className:"flex gap-2 justify-end mt-4",children:[n.jsx("button",{type:"button",onClick:D,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsxs("button",{type:"submit",disabled:e||!a,className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:[e&&n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e?"Creating...":"Create Discount"]})]})]})})]})})},LI=u.createContext(void 0),pge=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async()=>{try{a(!0),i(null);const d=await nt.get("/triggers"),{success:p,data:h,message:g}=d.data;if(!p)throw new Error(g||"Failed to fetch triggers");return e(h||[]),h||[]}catch(d){const p=d?.response?.data?.message||d?.message||"Failed to fetch triggers";throw i(p),new Error(p)}finally{a(!1)}},[]),c={triggers:r,loading:t,error:o,getAll:l};return n.jsx(LI.Provider,{value:c,children:s})},hge=()=>{const s=u.useContext(LI);if(!s)throw new Error("useTriggers must be used within a TriggerProvider");return s},FI=u.createContext(void 0),mge=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async()=>{try{a(!0),i(null);const d=await nt.get("/actions"),{success:p,data:h,message:g}=d.data;if(!p)throw new Error(g||"Failed to fetch actions");return e(h||[]),h||[]}catch(d){const p=d?.response?.data?.message||d?.message||"Failed to fetch actions";throw i(p),new Error(p)}finally{a(!1)}},[]),c={actions:r,loading:t,error:o,getAll:l};return n.jsx(FI.Provider,{value:c,children:s})},gge=()=>{const s=u.useContext(FI);if(!s)throw new Error("useActions must be used within an ActionProvider");return s},ky=ws(n.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})),zx=ws(n.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"})),Mk=ws(n.jsx("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"})),yge=ws(n.jsx("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 18H4V8h16z"})),BI=ws(n.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"})),xge=ws(n.jsx("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"})),qN=ws(n.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})),Bd=ws(n.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),rf=ws(n.jsx("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"})),nf=ws(n.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),vge=ws(n.jsx("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"})),QC=ws(n.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"})),bge=ws(n.jsx("path",{d:"M10 18h4v-2h-4zM3 6v2h18V6zm3 7h12v-2H6z"})),wge=ws(n.jsx("path",{fillRule:"evenodd",d:"M3 3v8h8V3zm6 6H5V5h4zm-6 4v8h8v-8zm6 6H5v-4h4zm4-16v8h8V3zm6 6h-4V5h4zm-6 4v8h8v-8zm6 6h-4v-4h4z"})),d3=ws(n.jsx("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"})),GN=ws(n.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"})),zI=ws(n.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"})),$I=ws(n.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),Ik=ws(n.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"})),jge=ws(n.jsx("path",{d:"M18 6h-2c0-2.21-1.79-4-4-4S8 3.79 8 6H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m-8 4c0 .55-.45 1-1 1s-1-.45-1-1V8h2zm2-6c1.1 0 2 .9 2 2h-4c0-1.1.9-2 2-2m4 6c0 .55-.45 1-1 1s-1-.45-1-1V8h2z"})),Cge=ws(n.jsx("path",{d:"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2M1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2"})),JC=ws(n.jsx("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})),Sge=ws(n.jsx("path",{d:"M3 14h4v-4H3zm0 5h4v-4H3zM3 9h4V5H3zm5 5h13v-4H8zm0 5h13v-4H8zM8 5v4h13V5z"})),eS=ws(n.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}));function $o(s){if(typeof s=="string"||typeof s=="number")return""+s;let r="";if(Array.isArray(s))for(let e=0,t;e<s.length;e++)(t=$o(s[e]))!==""&&(r+=(r&&" ")+t);else for(let e in s)s[e]&&(r+=(r&&" ")+e);return r}var tS={exports:{}},rS={},nS={exports:{}},sS={};var u3;function Nge(){if(u3)return sS;u3=1;var s=gx();function r(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var e=typeof Object.is=="function"?Object.is:r,t=s.useState,a=s.useEffect,o=s.useLayoutEffect,i=s.useDebugValue;function l(h,g){var y=g(),b=t({inst:{value:y,getSnapshot:g}}),v=b[0].inst,w=b[1];return o(function(){v.value=y,v.getSnapshot=g,c(v)&&w({inst:v})},[h,y,g]),a(function(){return c(v)&&w({inst:v}),h(function(){c(v)&&w({inst:v})})},[h]),i(y),y}function c(h){var g=h.getSnapshot;h=h.value;try{var y=g();return!e(h,y)}catch{return!0}}function d(h,g){return g()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return sS.useSyncExternalStore=s.useSyncExternalStore!==void 0?s.useSyncExternalStore:p,sS}var f3;function kge(){return f3||(f3=1,nS.exports=Nge()),nS.exports}var p3;function _ge(){if(p3)return rS;p3=1;var s=gx(),r=kge();function e(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var t=typeof Object.is=="function"?Object.is:e,a=r.useSyncExternalStore,o=s.useRef,i=s.useEffect,l=s.useMemo,c=s.useDebugValue;return rS.useSyncExternalStoreWithSelector=function(d,p,h,g,y){var b=o(null);if(b.current===null){var v={hasValue:!1,value:null};b.current=v}else v=b.current;b=l(function(){function C(L){if(!k){if(k=!0,N=L,L=g(L),y!==void 0&&v.hasValue){var B=v.value;if(y(B,L))return O=B}return O=L}if(B=O,t(N,L))return B;var G=g(L);return y!==void 0&&y(B,G)?(N=L,B):(N=L,O=G)}var k=!1,N,O,R=h===void 0?null:h;return[function(){return C(p())},R===null?void 0:function(){return C(R())}]},[p,h,g,y]);var w=a(d,b[0],b[1]);return i(function(){v.hasValue=!0,v.value=w},[w]),c(w),w},rS}var h3;function Ege(){return h3||(h3=1,tS.exports=_ge()),tS.exports}var Tge=Ege();const Oge=Bw(Tge),Pge={},m3=s=>{let r;const e=new Set,t=(p,h)=>{const g=typeof p=="function"?p(r):p;if(!Object.is(g,r)){const y=r;r=h??(typeof g!="object"||g===null)?g:Object.assign({},r,g),e.forEach(b=>b(r,y))}},a=()=>r,c={setState:t,getState:a,getInitialState:()=>d,subscribe:p=>(e.add(p),()=>e.delete(p)),destroy:()=>{(Pge?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),e.clear()}},d=r=s(t,a,c);return c},Age=s=>s?m3(s):m3,{useDebugValue:Mge}=pt,{useSyncExternalStoreWithSelector:Ige}=Oge,Rge=s=>s;function UI(s,r=Rge,e){const t=Ige(s.subscribe,s.getState,s.getServerState||s.getInitialState,r,e);return Mge(t),t}const g3=(s,r)=>{const e=Age(s),t=(a,o=r)=>UI(e,a,o);return Object.assign(t,e),t},Dge=(s,r)=>s?g3(s,r):g3;function Eo(s,r){if(Object.is(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;if(s instanceof Map&&r instanceof Map){if(s.size!==r.size)return!1;for(const[t,a]of s)if(!Object.is(a,r.get(t)))return!1;return!0}if(s instanceof Set&&r instanceof Set){if(s.size!==r.size)return!1;for(const t of s)if(!r.has(t))return!1;return!0}const e=Object.keys(s);if(e.length!==Object.keys(r).length)return!1;for(const t of e)if(!Object.prototype.hasOwnProperty.call(r,t)||!Object.is(s[t],r[t]))return!1;return!0}var Lge={value:()=>{}};function Dj(){for(var s=0,r=arguments.length,e={},t;s<r;++s){if(!(t=arguments[s]+"")||t in e||/[\s.]/.test(t))throw new Error("illegal type: "+t);e[t]=[]}return new Jv(e)}function Jv(s){this._=s}function Fge(s,r){return s.trim().split(/^|\s+/).map(function(e){var t="",a=e.indexOf(".");if(a>=0&&(t=e.slice(a+1),e=e.slice(0,a)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})}Jv.prototype=Dj.prototype={constructor:Jv,on:function(s,r){var e=this._,t=Fge(s+"",e),a,o=-1,i=t.length;if(arguments.length<2){for(;++o<i;)if((a=(s=t[o]).type)&&(a=Bge(e[a],s.name)))return a;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++o<i;)if(a=(s=t[o]).type)e[a]=y3(e[a],s.name,r);else if(r==null)for(a in e)e[a]=y3(e[a],s.name,null);return this},copy:function(){var s={},r=this._;for(var e in r)s[e]=r[e].slice();return new Jv(s)},call:function(s,r){if((a=arguments.length-2)>0)for(var e=new Array(a),t=0,a,o;t<a;++t)e[t]=arguments[t+2];if(!this._.hasOwnProperty(s))throw new Error("unknown type: "+s);for(o=this._[s],t=0,a=o.length;t<a;++t)o[t].value.apply(r,e)},apply:function(s,r,e){if(!this._.hasOwnProperty(s))throw new Error("unknown type: "+s);for(var t=this._[s],a=0,o=t.length;a<o;++a)t[a].value.apply(r,e)}};function Bge(s,r){for(var e=0,t=s.length,a;e<t;++e)if((a=s[e]).name===r)return a.value}function y3(s,r,e){for(var t=0,a=s.length;t<a;++t)if(s[t].name===r){s[t]=Lge,s=s.slice(0,t).concat(s.slice(t+1));break}return e!=null&&s.push({name:r,value:e}),s}var KN="http://www.w3.org/1999/xhtml";const x3={svg:"http://www.w3.org/2000/svg",xhtml:KN,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Lj(s){var r=s+="",e=r.indexOf(":");return e>=0&&(r=s.slice(0,e))!=="xmlns"&&(s=s.slice(e+1)),x3.hasOwnProperty(r)?{space:x3[r],local:s}:s}function zge(s){return function(){var r=this.ownerDocument,e=this.namespaceURI;return e===KN&&r.documentElement.namespaceURI===KN?r.createElement(s):r.createElementNS(e,s)}}function $ge(s){return function(){return this.ownerDocument.createElementNS(s.space,s.local)}}function VI(s){var r=Lj(s);return(r.local?$ge:zge)(r)}function Uge(){}function Rk(s){return s==null?Uge:function(){return this.querySelector(s)}}function Vge(s){typeof s!="function"&&(s=Rk(s));for(var r=this._groups,e=r.length,t=new Array(e),a=0;a<e;++a)for(var o=r[a],i=o.length,l=t[a]=new Array(i),c,d,p=0;p<i;++p)(c=o[p])&&(d=s.call(c,c.__data__,p,o))&&("__data__"in c&&(d.__data__=c.__data__),l[p]=d);return new tl(t,this._parents)}function Hge(s){return s==null?[]:Array.isArray(s)?s:Array.from(s)}function Wge(){return[]}function HI(s){return s==null?Wge:function(){return this.querySelectorAll(s)}}function qge(s){return function(){return Hge(s.apply(this,arguments))}}function Gge(s){typeof s=="function"?s=qge(s):s=HI(s);for(var r=this._groups,e=r.length,t=[],a=[],o=0;o<e;++o)for(var i=r[o],l=i.length,c,d=0;d<l;++d)(c=i[d])&&(t.push(s.call(c,c.__data__,d,i)),a.push(c));return new tl(t,a)}function WI(s){return function(){return this.matches(s)}}function qI(s){return function(r){return r.matches(s)}}var Kge=Array.prototype.find;function Yge(s){return function(){return Kge.call(this.children,s)}}function Zge(){return this.firstElementChild}function Xge(s){return this.select(s==null?Zge:Yge(typeof s=="function"?s:qI(s)))}var Qge=Array.prototype.filter;function Jge(){return Array.from(this.children)}function eye(s){return function(){return Qge.call(this.children,s)}}function tye(s){return this.selectAll(s==null?Jge:eye(typeof s=="function"?s:qI(s)))}function rye(s){typeof s!="function"&&(s=WI(s));for(var r=this._groups,e=r.length,t=new Array(e),a=0;a<e;++a)for(var o=r[a],i=o.length,l=t[a]=[],c,d=0;d<i;++d)(c=o[d])&&s.call(c,c.__data__,d,o)&&l.push(c);return new tl(t,this._parents)}function GI(s){return new Array(s.length)}function nye(){return new tl(this._enter||this._groups.map(GI),this._parents)}function Ow(s,r){this.ownerDocument=s.ownerDocument,this.namespaceURI=s.namespaceURI,this._next=null,this._parent=s,this.__data__=r}Ow.prototype={constructor:Ow,appendChild:function(s){return this._parent.insertBefore(s,this._next)},insertBefore:function(s,r){return this._parent.insertBefore(s,r)},querySelector:function(s){return this._parent.querySelector(s)},querySelectorAll:function(s){return this._parent.querySelectorAll(s)}};function sye(s){return function(){return s}}function aye(s,r,e,t,a,o){for(var i=0,l,c=r.length,d=o.length;i<d;++i)(l=r[i])?(l.__data__=o[i],t[i]=l):e[i]=new Ow(s,o[i]);for(;i<c;++i)(l=r[i])&&(a[i]=l)}function oye(s,r,e,t,a,o,i){var l,c,d=new Map,p=r.length,h=o.length,g=new Array(p),y;for(l=0;l<p;++l)(c=r[l])&&(g[l]=y=i.call(c,c.__data__,l,r)+"",d.has(y)?a[l]=c:d.set(y,c));for(l=0;l<h;++l)y=i.call(s,o[l],l,o)+"",(c=d.get(y))?(t[l]=c,c.__data__=o[l],d.delete(y)):e[l]=new Ow(s,o[l]);for(l=0;l<p;++l)(c=r[l])&&d.get(g[l])===c&&(a[l]=c)}function iye(s){return s.__data__}function lye(s,r){if(!arguments.length)return Array.from(this,iye);var e=r?oye:aye,t=this._parents,a=this._groups;typeof s!="function"&&(s=sye(s));for(var o=a.length,i=new Array(o),l=new Array(o),c=new Array(o),d=0;d<o;++d){var p=t[d],h=a[d],g=h.length,y=cye(s.call(p,p&&p.__data__,d,t)),b=y.length,v=l[d]=new Array(b),w=i[d]=new Array(b),C=c[d]=new Array(g);e(p,h,v,w,C,y,r);for(var k=0,N=0,O,R;k<b;++k)if(O=v[k]){for(k>=N&&(N=k+1);!(R=w[N])&&++N<b;);O._next=R||null}}return i=new tl(i,t),i._enter=l,i._exit=c,i}function cye(s){return typeof s=="object"&&"length"in s?s:Array.from(s)}function dye(){return new tl(this._exit||this._groups.map(GI),this._parents)}function uye(s,r,e){var t=this.enter(),a=this,o=this.exit();return typeof s=="function"?(t=s(t),t&&(t=t.selection())):t=t.append(s+""),r!=null&&(a=r(a),a&&(a=a.selection())),e==null?o.remove():e(o),t&&a?t.merge(a).order():a}function fye(s){for(var r=s.selection?s.selection():s,e=this._groups,t=r._groups,a=e.length,o=t.length,i=Math.min(a,o),l=new Array(a),c=0;c<i;++c)for(var d=e[c],p=t[c],h=d.length,g=l[c]=new Array(h),y,b=0;b<h;++b)(y=d[b]||p[b])&&(g[b]=y);for(;c<a;++c)l[c]=e[c];return new tl(l,this._parents)}function pye(){for(var s=this._groups,r=-1,e=s.length;++r<e;)for(var t=s[r],a=t.length-1,o=t[a],i;--a>=0;)(i=t[a])&&(o&&i.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(i,o),o=i);return this}function hye(s){s||(s=mye);function r(h,g){return h&&g?s(h.__data__,g.__data__):!h-!g}for(var e=this._groups,t=e.length,a=new Array(t),o=0;o<t;++o){for(var i=e[o],l=i.length,c=a[o]=new Array(l),d,p=0;p<l;++p)(d=i[p])&&(c[p]=d);c.sort(r)}return new tl(a,this._parents).order()}function mye(s,r){return s<r?-1:s>r?1:s>=r?0:NaN}function gye(){var s=arguments[0];return arguments[0]=this,s.apply(null,arguments),this}function yye(){return Array.from(this)}function xye(){for(var s=this._groups,r=0,e=s.length;r<e;++r)for(var t=s[r],a=0,o=t.length;a<o;++a){var i=t[a];if(i)return i}return null}function vye(){let s=0;for(const r of this)++s;return s}function bye(){return!this.node()}function wye(s){for(var r=this._groups,e=0,t=r.length;e<t;++e)for(var a=r[e],o=0,i=a.length,l;o<i;++o)(l=a[o])&&s.call(l,l.__data__,o,a);return this}function jye(s){return function(){this.removeAttribute(s)}}function Cye(s){return function(){this.removeAttributeNS(s.space,s.local)}}function Sye(s,r){return function(){this.setAttribute(s,r)}}function Nye(s,r){return function(){this.setAttributeNS(s.space,s.local,r)}}function kye(s,r){return function(){var e=r.apply(this,arguments);e==null?this.removeAttribute(s):this.setAttribute(s,e)}}function _ye(s,r){return function(){var e=r.apply(this,arguments);e==null?this.removeAttributeNS(s.space,s.local):this.setAttributeNS(s.space,s.local,e)}}function Eye(s,r){var e=Lj(s);if(arguments.length<2){var t=this.node();return e.local?t.getAttributeNS(e.space,e.local):t.getAttribute(e)}return this.each((r==null?e.local?Cye:jye:typeof r=="function"?e.local?_ye:kye:e.local?Nye:Sye)(e,r))}function KI(s){return s.ownerDocument&&s.ownerDocument.defaultView||s.document&&s||s.defaultView}function Tye(s){return function(){this.style.removeProperty(s)}}function Oye(s,r,e){return function(){this.style.setProperty(s,r,e)}}function Pye(s,r,e){return function(){var t=r.apply(this,arguments);t==null?this.style.removeProperty(s):this.style.setProperty(s,t,e)}}function Aye(s,r,e){return arguments.length>1?this.each((r==null?Tye:typeof r=="function"?Pye:Oye)(s,r,e??"")):km(this.node(),s)}function km(s,r){return s.style.getPropertyValue(r)||KI(s).getComputedStyle(s,null).getPropertyValue(r)}function Mye(s){return function(){delete this[s]}}function Iye(s,r){return function(){this[s]=r}}function Rye(s,r){return function(){var e=r.apply(this,arguments);e==null?delete this[s]:this[s]=e}}function Dye(s,r){return arguments.length>1?this.each((r==null?Mye:typeof r=="function"?Rye:Iye)(s,r)):this.node()[s]}function YI(s){return s.trim().split(/^|\s+/)}function Dk(s){return s.classList||new ZI(s)}function ZI(s){this._node=s,this._names=YI(s.getAttribute("class")||"")}ZI.prototype={add:function(s){var r=this._names.indexOf(s);r<0&&(this._names.push(s),this._node.setAttribute("class",this._names.join(" ")))},remove:function(s){var r=this._names.indexOf(s);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(s){return this._names.indexOf(s)>=0}};function XI(s,r){for(var e=Dk(s),t=-1,a=r.length;++t<a;)e.add(r[t])}function QI(s,r){for(var e=Dk(s),t=-1,a=r.length;++t<a;)e.remove(r[t])}function Lye(s){return function(){XI(this,s)}}function Fye(s){return function(){QI(this,s)}}function Bye(s,r){return function(){(r.apply(this,arguments)?XI:QI)(this,s)}}function zye(s,r){var e=YI(s+"");if(arguments.length<2){for(var t=Dk(this.node()),a=-1,o=e.length;++a<o;)if(!t.contains(e[a]))return!1;return!0}return this.each((typeof r=="function"?Bye:r?Lye:Fye)(e,r))}function $ye(){this.textContent=""}function Uye(s){return function(){this.textContent=s}}function Vye(s){return function(){var r=s.apply(this,arguments);this.textContent=r??""}}function Hye(s){return arguments.length?this.each(s==null?$ye:(typeof s=="function"?Vye:Uye)(s)):this.node().textContent}function Wye(){this.innerHTML=""}function qye(s){return function(){this.innerHTML=s}}function Gye(s){return function(){var r=s.apply(this,arguments);this.innerHTML=r??""}}function Kye(s){return arguments.length?this.each(s==null?Wye:(typeof s=="function"?Gye:qye)(s)):this.node().innerHTML}function Yye(){this.nextSibling&&this.parentNode.appendChild(this)}function Zye(){return this.each(Yye)}function Xye(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Qye(){return this.each(Xye)}function Jye(s){var r=typeof s=="function"?s:VI(s);return this.select(function(){return this.appendChild(r.apply(this,arguments))})}function exe(){return null}function txe(s,r){var e=typeof s=="function"?s:VI(s),t=r==null?exe:typeof r=="function"?r:Rk(r);return this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})}function rxe(){var s=this.parentNode;s&&s.removeChild(this)}function nxe(){return this.each(rxe)}function sxe(){var s=this.cloneNode(!1),r=this.parentNode;return r?r.insertBefore(s,this.nextSibling):s}function axe(){var s=this.cloneNode(!0),r=this.parentNode;return r?r.insertBefore(s,this.nextSibling):s}function oxe(s){return this.select(s?axe:sxe)}function ixe(s){return arguments.length?this.property("__data__",s):this.node().__data__}function lxe(s){return function(r){s.call(this,r,this.__data__)}}function cxe(s){return s.trim().split(/^|\s+/).map(function(r){var e="",t=r.indexOf(".");return t>=0&&(e=r.slice(t+1),r=r.slice(0,t)),{type:r,name:e}})}function dxe(s){return function(){var r=this.__on;if(r){for(var e=0,t=-1,a=r.length,o;e<a;++e)o=r[e],(!s.type||o.type===s.type)&&o.name===s.name?this.removeEventListener(o.type,o.listener,o.options):r[++t]=o;++t?r.length=t:delete this.__on}}}function uxe(s,r,e){return function(){var t=this.__on,a,o=lxe(r);if(t){for(var i=0,l=t.length;i<l;++i)if((a=t[i]).type===s.type&&a.name===s.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=o,a.options=e),a.value=r;return}}this.addEventListener(s.type,o,e),a={type:s.type,name:s.name,value:r,listener:o,options:e},t?t.push(a):this.__on=[a]}}function fxe(s,r,e){var t=cxe(s+""),a,o=t.length,i;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,d=l.length,p;c<d;++c)for(a=0,p=l[c];a<o;++a)if((i=t[a]).type===p.type&&i.name===p.name)return p.value}return}for(l=r?uxe:dxe,a=0;a<o;++a)this.each(l(t[a],r,e));return this}function JI(s,r,e){var t=KI(s),a=t.CustomEvent;typeof a=="function"?a=new a(r,e):(a=t.document.createEvent("Event"),e?(a.initEvent(r,e.bubbles,e.cancelable),a.detail=e.detail):a.initEvent(r,!1,!1)),s.dispatchEvent(a)}function pxe(s,r){return function(){return JI(this,s,r)}}function hxe(s,r){return function(){return JI(this,s,r.apply(this,arguments))}}function mxe(s,r){return this.each((typeof r=="function"?hxe:pxe)(s,r))}function*gxe(){for(var s=this._groups,r=0,e=s.length;r<e;++r)for(var t=s[r],a=0,o=t.length,i;a<o;++a)(i=t[a])&&(yield i)}var eR=[null];function tl(s,r){this._groups=s,this._parents=r}function $x(){return new tl([[document.documentElement]],eR)}function yxe(){return this}tl.prototype=$x.prototype={constructor:tl,select:Vge,selectAll:Gge,selectChild:Xge,selectChildren:tye,filter:rye,data:lye,enter:nye,exit:dye,join:uye,merge:fye,selection:yxe,order:pye,sort:hye,call:gye,nodes:yye,node:xye,size:vye,empty:bye,each:wye,attr:Eye,style:Aye,property:Dye,classed:zye,text:Hye,html:Kye,raise:Zye,lower:Qye,append:Jye,insert:txe,remove:nxe,clone:oxe,datum:ixe,on:fxe,dispatch:mxe,[Symbol.iterator]:gxe};function Cl(s){return typeof s=="string"?new tl([[document.querySelector(s)]],[document.documentElement]):new tl([[s]],eR)}function xxe(s){let r;for(;r=s.sourceEvent;)s=r;return s}function rc(s,r){if(s=xxe(s),r===void 0&&(r=s.currentTarget),r){var e=r.ownerSVGElement||r;if(e.createSVGPoint){var t=e.createSVGPoint();return t.x=s.clientX,t.y=s.clientY,t=t.matrixTransform(r.getScreenCTM().inverse()),[t.x,t.y]}if(r.getBoundingClientRect){var a=r.getBoundingClientRect();return[s.clientX-a.left-r.clientLeft,s.clientY-a.top-r.clientTop]}}return[s.pageX,s.pageY]}const vxe={passive:!1},lx={capture:!0,passive:!1};function aS(s){s.stopImmediatePropagation()}function mm(s){s.preventDefault(),s.stopImmediatePropagation()}function tR(s){var r=s.document.documentElement,e=Cl(s).on("dragstart.drag",mm,lx);"onselectstart"in r?e.on("selectstart.drag",mm,lx):(r.__noselect=r.style.MozUserSelect,r.style.MozUserSelect="none")}function rR(s,r){var e=s.document.documentElement,t=Cl(s).on("dragstart.drag",null);r&&(t.on("click.drag",mm,lx),setTimeout(function(){t.on("click.drag",null)},0)),"onselectstart"in e?t.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}const jv=s=>()=>s;function YN(s,{sourceEvent:r,subject:e,target:t,identifier:a,active:o,x:i,y:l,dx:c,dy:d,dispatch:p}){Object.defineProperties(this,{type:{value:s,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},subject:{value:e,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:p}})}YN.prototype.on=function(){var s=this._.on.apply(this._,arguments);return s===this._?this:s};function bxe(s){return!s.ctrlKey&&!s.button}function wxe(){return this.parentNode}function jxe(s,r){return r??{x:s.x,y:s.y}}function Cxe(){return navigator.maxTouchPoints||"ontouchstart"in this}function Sxe(){var s=bxe,r=wxe,e=jxe,t=Cxe,a={},o=Dj("start","drag","end"),i=0,l,c,d,p,h=0;function g(O){O.on("mousedown.drag",y).filter(t).on("touchstart.drag",w).on("touchmove.drag",C,vxe).on("touchend.drag touchcancel.drag",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(O,R){if(!(p||!s.call(this,O,R))){var L=N(this,r.call(this,O,R),O,R,"mouse");L&&(Cl(O.view).on("mousemove.drag",b,lx).on("mouseup.drag",v,lx),tR(O.view),aS(O),d=!1,l=O.clientX,c=O.clientY,L("start",O))}}function b(O){if(mm(O),!d){var R=O.clientX-l,L=O.clientY-c;d=R*R+L*L>h}a.mouse("drag",O)}function v(O){Cl(O.view).on("mousemove.drag mouseup.drag",null),rR(O.view,d),mm(O),a.mouse("end",O)}function w(O,R){if(s.call(this,O,R)){var L=O.changedTouches,B=r.call(this,O,R),G=L.length,$,z;for($=0;$<G;++$)(z=N(this,B,O,R,L[$].identifier,L[$]))&&(aS(O),z("start",O,L[$]))}}function C(O){var R=O.changedTouches,L=R.length,B,G;for(B=0;B<L;++B)(G=a[R[B].identifier])&&(mm(O),G("drag",O,R[B]))}function k(O){var R=O.changedTouches,L=R.length,B,G;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),B=0;B<L;++B)(G=a[R[B].identifier])&&(aS(O),G("end",O,R[B]))}function N(O,R,L,B,G,$){var z=o.copy(),Y=rc($||L,R),M,q,P;if((P=e.call(O,new YN("beforestart",{sourceEvent:L,target:g,identifier:G,active:i,x:Y[0],y:Y[1],dx:0,dy:0,dispatch:z}),B))!=null)return M=P.x-Y[0]||0,q=P.y-Y[1]||0,function H(D,X,se){var Q=Y,xe;switch(D){case"start":a[G]=H,xe=i++;break;case"end":delete a[G],--i;case"drag":Y=rc(se||X,R),xe=i;break}z.call(D,O,new YN(D,{sourceEvent:X,subject:P,target:g,identifier:G,active:xe,x:Y[0]+M,y:Y[1]+q,dx:Y[0]-Q[0],dy:Y[1]-Q[1],dispatch:z}),B)}}return g.filter=function(O){return arguments.length?(s=typeof O=="function"?O:jv(!!O),g):s},g.container=function(O){return arguments.length?(r=typeof O=="function"?O:jv(O),g):r},g.subject=function(O){return arguments.length?(e=typeof O=="function"?O:jv(O),g):e},g.touchable=function(O){return arguments.length?(t=typeof O=="function"?O:jv(!!O),g):t},g.on=function(){var O=o.on.apply(o,arguments);return O===o?g:O},g.clickDistance=function(O){return arguments.length?(h=(O=+O)*O,g):Math.sqrt(h)},g}function Lk(s,r,e){s.prototype=r.prototype=e,e.constructor=s}function nR(s,r){var e=Object.create(s.prototype);for(var t in r)e[t]=r[t];return e}function Ux(){}var cx=.7,Pw=1/cx,gm="\\s*([+-]?\\d+)\\s*",dx="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Jc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Nxe=/^#([0-9a-f]{3,8})$/,kxe=new RegExp(`^rgb\\(${gm},${gm},${gm}\\)$`),_xe=new RegExp(`^rgb\\(${Jc},${Jc},${Jc}\\)$`),Exe=new RegExp(`^rgba\\(${gm},${gm},${gm},${dx}\\)$`),Txe=new RegExp(`^rgba\\(${Jc},${Jc},${Jc},${dx}\\)$`),Oxe=new RegExp(`^hsl\\(${dx},${Jc},${Jc}\\)$`),Pxe=new RegExp(`^hsla\\(${dx},${Jc},${Jc},${dx}\\)$`),v3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Lk(Ux,ux,{copy(s){return Object.assign(new this.constructor,this,s)},displayable(){return this.rgb().displayable()},hex:b3,formatHex:b3,formatHex8:Axe,formatHsl:Mxe,formatRgb:w3,toString:w3});function b3(){return this.rgb().formatHex()}function Axe(){return this.rgb().formatHex8()}function Mxe(){return sR(this).formatHsl()}function w3(){return this.rgb().formatRgb()}function ux(s){var r,e;return s=(s+"").trim().toLowerCase(),(r=Nxe.exec(s))?(e=r[1].length,r=parseInt(r[1],16),e===6?j3(r):e===3?new Pi(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):e===8?Cv(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):e===4?Cv(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=kxe.exec(s))?new Pi(r[1],r[2],r[3],1):(r=_xe.exec(s))?new Pi(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=Exe.exec(s))?Cv(r[1],r[2],r[3],r[4]):(r=Txe.exec(s))?Cv(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=Oxe.exec(s))?N3(r[1],r[2]/100,r[3]/100,1):(r=Pxe.exec(s))?N3(r[1],r[2]/100,r[3]/100,r[4]):v3.hasOwnProperty(s)?j3(v3[s]):s==="transparent"?new Pi(NaN,NaN,NaN,0):null}function j3(s){return new Pi(s>>16&255,s>>8&255,s&255,1)}function Cv(s,r,e,t){return t<=0&&(s=r=e=NaN),new Pi(s,r,e,t)}function Ixe(s){return s instanceof Ux||(s=ux(s)),s?(s=s.rgb(),new Pi(s.r,s.g,s.b,s.opacity)):new Pi}function ZN(s,r,e,t){return arguments.length===1?Ixe(s):new Pi(s,r,e,t??1)}function Pi(s,r,e,t){this.r=+s,this.g=+r,this.b=+e,this.opacity=+t}Lk(Pi,ZN,nR(Ux,{brighter(s){return s=s==null?Pw:Math.pow(Pw,s),new Pi(this.r*s,this.g*s,this.b*s,this.opacity)},darker(s){return s=s==null?cx:Math.pow(cx,s),new Pi(this.r*s,this.g*s,this.b*s,this.opacity)},rgb(){return this},clamp(){return new Pi(Cp(this.r),Cp(this.g),Cp(this.b),Aw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:C3,formatHex:C3,formatHex8:Rxe,formatRgb:S3,toString:S3}));function C3(){return`#${vp(this.r)}${vp(this.g)}${vp(this.b)}`}function Rxe(){return`#${vp(this.r)}${vp(this.g)}${vp(this.b)}${vp((isNaN(this.opacity)?1:this.opacity)*255)}`}function S3(){const s=Aw(this.opacity);return`${s===1?"rgb(":"rgba("}${Cp(this.r)}, ${Cp(this.g)}, ${Cp(this.b)}${s===1?")":`, ${s})`}`}function Aw(s){return isNaN(s)?1:Math.max(0,Math.min(1,s))}function Cp(s){return Math.max(0,Math.min(255,Math.round(s)||0))}function vp(s){return s=Cp(s),(s<16?"0":"")+s.toString(16)}function N3(s,r,e,t){return t<=0?s=r=e=NaN:e<=0||e>=1?s=r=NaN:r<=0&&(s=NaN),new sc(s,r,e,t)}function sR(s){if(s instanceof sc)return new sc(s.h,s.s,s.l,s.opacity);if(s instanceof Ux||(s=ux(s)),!s)return new sc;if(s instanceof sc)return s;s=s.rgb();var r=s.r/255,e=s.g/255,t=s.b/255,a=Math.min(r,e,t),o=Math.max(r,e,t),i=NaN,l=o-a,c=(o+a)/2;return l?(r===o?i=(e-t)/l+(e<t)*6:e===o?i=(t-r)/l+2:i=(r-e)/l+4,l/=c<.5?o+a:2-o-a,i*=60):l=c>0&&c<1?0:i,new sc(i,l,c,s.opacity)}function Dxe(s,r,e,t){return arguments.length===1?sR(s):new sc(s,r,e,t??1)}function sc(s,r,e,t){this.h=+s,this.s=+r,this.l=+e,this.opacity=+t}Lk(sc,Dxe,nR(Ux,{brighter(s){return s=s==null?Pw:Math.pow(Pw,s),new sc(this.h,this.s,this.l*s,this.opacity)},darker(s){return s=s==null?cx:Math.pow(cx,s),new sc(this.h,this.s,this.l*s,this.opacity)},rgb(){var s=this.h%360+(this.h<0)*360,r=isNaN(s)||isNaN(this.s)?0:this.s,e=this.l,t=e+(e<.5?e:1-e)*r,a=2*e-t;return new Pi(oS(s>=240?s-240:s+120,a,t),oS(s,a,t),oS(s<120?s+240:s-120,a,t),this.opacity)},clamp(){return new sc(k3(this.h),Sv(this.s),Sv(this.l),Aw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const s=Aw(this.opacity);return`${s===1?"hsl(":"hsla("}${k3(this.h)}, ${Sv(this.s)*100}%, ${Sv(this.l)*100}%${s===1?")":`, ${s})`}`}}));function k3(s){return s=(s||0)%360,s<0?s+360:s}function Sv(s){return Math.max(0,Math.min(1,s||0))}function oS(s,r,e){return(s<60?r+(e-r)*s/60:s<180?e:s<240?r+(e-r)*(240-s)/60:r)*255}const aR=s=>()=>s;function Lxe(s,r){return function(e){return s+e*r}}function Fxe(s,r,e){return s=Math.pow(s,e),r=Math.pow(r,e)-s,e=1/e,function(t){return Math.pow(s+t*r,e)}}function Bxe(s){return(s=+s)==1?oR:function(r,e){return e-r?Fxe(r,e,s):aR(isNaN(r)?e:r)}}function oR(s,r){var e=r-s;return e?Lxe(s,e):aR(isNaN(s)?r:s)}const _3=(function s(r){var e=Bxe(r);function t(a,o){var i=e((a=ZN(a)).r,(o=ZN(o)).r),l=e(a.g,o.g),c=e(a.b,o.b),d=oR(a.opacity,o.opacity);return function(p){return a.r=i(p),a.g=l(p),a.b=c(p),a.opacity=d(p),a+""}}return t.gamma=s,t})(1);function qu(s,r){return s=+s,r=+r,function(e){return s*(1-e)+r*e}}var XN=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,iS=new RegExp(XN.source,"g");function zxe(s){return function(){return s}}function $xe(s){return function(r){return s(r)+""}}function Uxe(s,r){var e=XN.lastIndex=iS.lastIndex=0,t,a,o,i=-1,l=[],c=[];for(s=s+"",r=r+"";(t=XN.exec(s))&&(a=iS.exec(r));)(o=a.index)>e&&(o=r.slice(e,o),l[i]?l[i]+=o:l[++i]=o),(t=t[0])===(a=a[0])?l[i]?l[i]+=a:l[++i]=a:(l[++i]=null,c.push({i,x:qu(t,a)})),e=iS.lastIndex;return e<r.length&&(o=r.slice(e),l[i]?l[i]+=o:l[++i]=o),l.length<2?c[0]?$xe(c[0].x):zxe(r):(r=c.length,function(d){for(var p=0,h;p<r;++p)l[(h=c[p]).i]=h.x(d);return l.join("")})}var E3=180/Math.PI,QN={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function iR(s,r,e,t,a,o){var i,l,c;return(i=Math.sqrt(s*s+r*r))&&(s/=i,r/=i),(c=s*e+r*t)&&(e-=s*c,t-=r*c),(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l,c/=l),s*t<r*e&&(s=-s,r=-r,c=-c,i=-i),{translateX:a,translateY:o,rotate:Math.atan2(r,s)*E3,skewX:Math.atan(c)*E3,scaleX:i,scaleY:l}}var Nv;function Vxe(s){const r=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(s+"");return r.isIdentity?QN:iR(r.a,r.b,r.c,r.d,r.e,r.f)}function Hxe(s){return s==null||(Nv||(Nv=document.createElementNS("http://www.w3.org/2000/svg","g")),Nv.setAttribute("transform",s),!(s=Nv.transform.baseVal.consolidate()))?QN:(s=s.matrix,iR(s.a,s.b,s.c,s.d,s.e,s.f))}function lR(s,r,e,t){function a(d){return d.length?d.pop()+" ":""}function o(d,p,h,g,y,b){if(d!==h||p!==g){var v=y.push("translate(",null,r,null,e);b.push({i:v-4,x:qu(d,h)},{i:v-2,x:qu(p,g)})}else(h||g)&&y.push("translate("+h+r+g+e)}function i(d,p,h,g){d!==p?(d-p>180?p+=360:p-d>180&&(d+=360),g.push({i:h.push(a(h)+"rotate(",null,t)-2,x:qu(d,p)})):p&&h.push(a(h)+"rotate("+p+t)}function l(d,p,h,g){d!==p?g.push({i:h.push(a(h)+"skewX(",null,t)-2,x:qu(d,p)}):p&&h.push(a(h)+"skewX("+p+t)}function c(d,p,h,g,y,b){if(d!==h||p!==g){var v=y.push(a(y)+"scale(",null,",",null,")");b.push({i:v-4,x:qu(d,h)},{i:v-2,x:qu(p,g)})}else(h!==1||g!==1)&&y.push(a(y)+"scale("+h+","+g+")")}return function(d,p){var h=[],g=[];return d=s(d),p=s(p),o(d.translateX,d.translateY,p.translateX,p.translateY,h,g),i(d.rotate,p.rotate,h,g),l(d.skewX,p.skewX,h,g),c(d.scaleX,d.scaleY,p.scaleX,p.scaleY,h,g),d=p=null,function(y){for(var b=-1,v=g.length,w;++b<v;)h[(w=g[b]).i]=w.x(y);return h.join("")}}}var Wxe=lR(Vxe,"px, ","px)","deg)"),qxe=lR(Hxe,", ",")",")"),Gxe=1e-12;function T3(s){return((s=Math.exp(s))+1/s)/2}function Kxe(s){return((s=Math.exp(s))-1/s)/2}function Yxe(s){return((s=Math.exp(2*s))-1)/(s+1)}const Zxe=(function s(r,e,t){function a(o,i){var l=o[0],c=o[1],d=o[2],p=i[0],h=i[1],g=i[2],y=p-l,b=h-c,v=y*y+b*b,w,C;if(v<Gxe)C=Math.log(g/d)/r,w=function(B){return[l+B*y,c+B*b,d*Math.exp(r*B*C)]};else{var k=Math.sqrt(v),N=(g*g-d*d+t*v)/(2*d*e*k),O=(g*g-d*d-t*v)/(2*g*e*k),R=Math.log(Math.sqrt(N*N+1)-N),L=Math.log(Math.sqrt(O*O+1)-O);C=(L-R)/r,w=function(B){var G=B*C,$=T3(R),z=d/(e*k)*($*Yxe(r*G+R)-Kxe(R));return[l+z*y,c+z*b,d*$/T3(r*G+R)]}}return w.duration=C*1e3*r/Math.SQRT2,w}return a.rho=function(o){var i=Math.max(.001,+o),l=i*i,c=l*l;return s(i,l,c)},a})(Math.SQRT2,2,4);var _m=0,_y=0,ly=0,cR=1e3,Mw,Ey,Iw=0,Rp=0,Fj=0,fx=typeof performance=="object"&&performance.now?performance:Date,dR=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(s){setTimeout(s,17)};function Fk(){return Rp||(dR(Xxe),Rp=fx.now()+Fj)}function Xxe(){Rp=0}function Rw(){this._call=this._time=this._next=null}Rw.prototype=uR.prototype={constructor:Rw,restart:function(s,r,e){if(typeof s!="function")throw new TypeError("callback is not a function");e=(e==null?Fk():+e)+(r==null?0:+r),!this._next&&Ey!==this&&(Ey?Ey._next=this:Mw=this,Ey=this),this._call=s,this._time=e,JN()},stop:function(){this._call&&(this._call=null,this._time=1/0,JN())}};function uR(s,r,e){var t=new Rw;return t.restart(s,r,e),t}function Qxe(){Fk(),++_m;for(var s=Mw,r;s;)(r=Rp-s._time)>=0&&s._call.call(void 0,r),s=s._next;--_m}function O3(){Rp=(Iw=fx.now())+Fj,_m=_y=0;try{Qxe()}finally{_m=0,e0e(),Rp=0}}function Jxe(){var s=fx.now(),r=s-Iw;r>cR&&(Fj-=r,Iw=s)}function e0e(){for(var s,r=Mw,e,t=1/0;r;)r._call?(t>r._time&&(t=r._time),s=r,r=r._next):(e=r._next,r._next=null,r=s?s._next=e:Mw=e);Ey=s,JN(t)}function JN(s){if(!_m){_y&&(_y=clearTimeout(_y));var r=s-Rp;r>24?(s<1/0&&(_y=setTimeout(O3,s-fx.now()-Fj)),ly&&(ly=clearInterval(ly))):(ly||(Iw=fx.now(),ly=setInterval(Jxe,cR)),_m=1,dR(O3))}}function P3(s,r,e){var t=new Rw;return r=r==null?0:+r,t.restart(a=>{t.stop(),s(a+r)},r,e),t}var t0e=Dj("start","end","cancel","interrupt"),r0e=[],fR=0,A3=1,e2=2,eb=3,M3=4,t2=5,tb=6;function Bj(s,r,e,t,a,o){var i=s.__transition;if(!i)s.__transition={};else if(e in i)return;n0e(s,e,{name:r,index:t,group:a,on:t0e,tween:r0e,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:fR})}function Bk(s,r){var e=mc(s,r);if(e.state>fR)throw new Error("too late; already scheduled");return e}function nd(s,r){var e=mc(s,r);if(e.state>eb)throw new Error("too late; already running");return e}function mc(s,r){var e=s.__transition;if(!e||!(e=e[r]))throw new Error("transition not found");return e}function n0e(s,r,e){var t=s.__transition,a;t[r]=e,e.timer=uR(o,0,e.time);function o(d){e.state=A3,e.timer.restart(i,e.delay,e.time),e.delay<=d&&i(d-e.delay)}function i(d){var p,h,g,y;if(e.state!==A3)return c();for(p in t)if(y=t[p],y.name===e.name){if(y.state===eb)return P3(i);y.state===M3?(y.state=tb,y.timer.stop(),y.on.call("interrupt",s,s.__data__,y.index,y.group),delete t[p]):+p<r&&(y.state=tb,y.timer.stop(),y.on.call("cancel",s,s.__data__,y.index,y.group),delete t[p])}if(P3(function(){e.state===eb&&(e.state=M3,e.timer.restart(l,e.delay,e.time),l(d))}),e.state=e2,e.on.call("start",s,s.__data__,e.index,e.group),e.state===e2){for(e.state=eb,a=new Array(g=e.tween.length),p=0,h=-1;p<g;++p)(y=e.tween[p].value.call(s,s.__data__,e.index,e.group))&&(a[++h]=y);a.length=h+1}}function l(d){for(var p=d<e.duration?e.ease.call(null,d/e.duration):(e.timer.restart(c),e.state=t2,1),h=-1,g=a.length;++h<g;)a[h].call(s,p);e.state===t2&&(e.on.call("end",s,s.__data__,e.index,e.group),c())}function c(){e.state=tb,e.timer.stop(),delete t[r];for(var d in t)return;delete s.__transition}}function rb(s,r){var e=s.__transition,t,a,o=!0,i;if(e){r=r==null?null:r+"";for(i in e){if((t=e[i]).name!==r){o=!1;continue}a=t.state>e2&&t.state<t2,t.state=tb,t.timer.stop(),t.on.call(a?"interrupt":"cancel",s,s.__data__,t.index,t.group),delete e[i]}o&&delete s.__transition}}function s0e(s){return this.each(function(){rb(this,s)})}function a0e(s,r){var e,t;return function(){var a=nd(this,s),o=a.tween;if(o!==e){t=e=o;for(var i=0,l=t.length;i<l;++i)if(t[i].name===r){t=t.slice(),t.splice(i,1);break}}a.tween=t}}function o0e(s,r,e){var t,a;if(typeof e!="function")throw new Error;return function(){var o=nd(this,s),i=o.tween;if(i!==t){a=(t=i).slice();for(var l={name:r,value:e},c=0,d=a.length;c<d;++c)if(a[c].name===r){a[c]=l;break}c===d&&a.push(l)}o.tween=a}}function i0e(s,r){var e=this._id;if(s+="",arguments.length<2){for(var t=mc(this.node(),e).tween,a=0,o=t.length,i;a<o;++a)if((i=t[a]).name===s)return i.value;return null}return this.each((r==null?a0e:o0e)(e,s,r))}function zk(s,r,e){var t=s._id;return s.each(function(){var a=nd(this,t);(a.value||(a.value={}))[r]=e.apply(this,arguments)}),function(a){return mc(a,t).value[r]}}function pR(s,r){var e;return(typeof r=="number"?qu:r instanceof ux?_3:(e=ux(r))?(r=e,_3):Uxe)(s,r)}function l0e(s){return function(){this.removeAttribute(s)}}function c0e(s){return function(){this.removeAttributeNS(s.space,s.local)}}function d0e(s,r,e){var t,a=e+"",o;return function(){var i=this.getAttribute(s);return i===a?null:i===t?o:o=r(t=i,e)}}function u0e(s,r,e){var t,a=e+"",o;return function(){var i=this.getAttributeNS(s.space,s.local);return i===a?null:i===t?o:o=r(t=i,e)}}function f0e(s,r,e){var t,a,o;return function(){var i,l=e(this),c;return l==null?void this.removeAttribute(s):(i=this.getAttribute(s),c=l+"",i===c?null:i===t&&c===a?o:(a=c,o=r(t=i,l)))}}function p0e(s,r,e){var t,a,o;return function(){var i,l=e(this),c;return l==null?void this.removeAttributeNS(s.space,s.local):(i=this.getAttributeNS(s.space,s.local),c=l+"",i===c?null:i===t&&c===a?o:(a=c,o=r(t=i,l)))}}function h0e(s,r){var e=Lj(s),t=e==="transform"?qxe:pR;return this.attrTween(s,typeof r=="function"?(e.local?p0e:f0e)(e,t,zk(this,"attr."+s,r)):r==null?(e.local?c0e:l0e)(e):(e.local?u0e:d0e)(e,t,r))}function m0e(s,r){return function(e){this.setAttribute(s,r.call(this,e))}}function g0e(s,r){return function(e){this.setAttributeNS(s.space,s.local,r.call(this,e))}}function y0e(s,r){var e,t;function a(){var o=r.apply(this,arguments);return o!==t&&(e=(t=o)&&g0e(s,o)),e}return a._value=r,a}function x0e(s,r){var e,t;function a(){var o=r.apply(this,arguments);return o!==t&&(e=(t=o)&&m0e(s,o)),e}return a._value=r,a}function v0e(s,r){var e="attr."+s;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(r==null)return this.tween(e,null);if(typeof r!="function")throw new Error;var t=Lj(s);return this.tween(e,(t.local?y0e:x0e)(t,r))}function b0e(s,r){return function(){Bk(this,s).delay=+r.apply(this,arguments)}}function w0e(s,r){return r=+r,function(){Bk(this,s).delay=r}}function j0e(s){var r=this._id;return arguments.length?this.each((typeof s=="function"?b0e:w0e)(r,s)):mc(this.node(),r).delay}function C0e(s,r){return function(){nd(this,s).duration=+r.apply(this,arguments)}}function S0e(s,r){return r=+r,function(){nd(this,s).duration=r}}function N0e(s){var r=this._id;return arguments.length?this.each((typeof s=="function"?C0e:S0e)(r,s)):mc(this.node(),r).duration}function k0e(s,r){if(typeof r!="function")throw new Error;return function(){nd(this,s).ease=r}}function _0e(s){var r=this._id;return arguments.length?this.each(k0e(r,s)):mc(this.node(),r).ease}function E0e(s,r){return function(){var e=r.apply(this,arguments);if(typeof e!="function")throw new Error;nd(this,s).ease=e}}function T0e(s){if(typeof s!="function")throw new Error;return this.each(E0e(this._id,s))}function O0e(s){typeof s!="function"&&(s=WI(s));for(var r=this._groups,e=r.length,t=new Array(e),a=0;a<e;++a)for(var o=r[a],i=o.length,l=t[a]=[],c,d=0;d<i;++d)(c=o[d])&&s.call(c,c.__data__,d,o)&&l.push(c);return new su(t,this._parents,this._name,this._id)}function P0e(s){if(s._id!==this._id)throw new Error;for(var r=this._groups,e=s._groups,t=r.length,a=e.length,o=Math.min(t,a),i=new Array(t),l=0;l<o;++l)for(var c=r[l],d=e[l],p=c.length,h=i[l]=new Array(p),g,y=0;y<p;++y)(g=c[y]||d[y])&&(h[y]=g);for(;l<t;++l)i[l]=r[l];return new su(i,this._parents,this._name,this._id)}function A0e(s){return(s+"").trim().split(/^|\s+/).every(function(r){var e=r.indexOf(".");return e>=0&&(r=r.slice(0,e)),!r||r==="start"})}function M0e(s,r,e){var t,a,o=A0e(r)?Bk:nd;return function(){var i=o(this,s),l=i.on;l!==t&&(a=(t=l).copy()).on(r,e),i.on=a}}function I0e(s,r){var e=this._id;return arguments.length<2?mc(this.node(),e).on.on(s):this.each(M0e(e,s,r))}function R0e(s){return function(){var r=this.parentNode;for(var e in this.__transition)if(+e!==s)return;r&&r.removeChild(this)}}function D0e(){return this.on("end.remove",R0e(this._id))}function L0e(s){var r=this._name,e=this._id;typeof s!="function"&&(s=Rk(s));for(var t=this._groups,a=t.length,o=new Array(a),i=0;i<a;++i)for(var l=t[i],c=l.length,d=o[i]=new Array(c),p,h,g=0;g<c;++g)(p=l[g])&&(h=s.call(p,p.__data__,g,l))&&("__data__"in p&&(h.__data__=p.__data__),d[g]=h,Bj(d[g],r,e,g,d,mc(p,e)));return new su(o,this._parents,r,e)}function F0e(s){var r=this._name,e=this._id;typeof s!="function"&&(s=HI(s));for(var t=this._groups,a=t.length,o=[],i=[],l=0;l<a;++l)for(var c=t[l],d=c.length,p,h=0;h<d;++h)if(p=c[h]){for(var g=s.call(p,p.__data__,h,c),y,b=mc(p,e),v=0,w=g.length;v<w;++v)(y=g[v])&&Bj(y,r,e,v,g,b);o.push(g),i.push(p)}return new su(o,i,r,e)}var B0e=$x.prototype.constructor;function z0e(){return new B0e(this._groups,this._parents)}function $0e(s,r){var e,t,a;return function(){var o=km(this,s),i=(this.style.removeProperty(s),km(this,s));return o===i?null:o===e&&i===t?a:a=r(e=o,t=i)}}function hR(s){return function(){this.style.removeProperty(s)}}function U0e(s,r,e){var t,a=e+"",o;return function(){var i=km(this,s);return i===a?null:i===t?o:o=r(t=i,e)}}function V0e(s,r,e){var t,a,o;return function(){var i=km(this,s),l=e(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(s),km(this,s))),i===c?null:i===t&&c===a?o:(a=c,o=r(t=i,l))}}function H0e(s,r){var e,t,a,o="style."+r,i="end."+o,l;return function(){var c=nd(this,s),d=c.on,p=c.value[o]==null?l||(l=hR(r)):void 0;(d!==e||a!==p)&&(t=(e=d).copy()).on(i,a=p),c.on=t}}function W0e(s,r,e){var t=(s+="")=="transform"?Wxe:pR;return r==null?this.styleTween(s,$0e(s,t)).on("end.style."+s,hR(s)):typeof r=="function"?this.styleTween(s,V0e(s,t,zk(this,"style."+s,r))).each(H0e(this._id,s)):this.styleTween(s,U0e(s,t,r),e).on("end.style."+s,null)}function q0e(s,r,e){return function(t){this.style.setProperty(s,r.call(this,t),e)}}function G0e(s,r,e){var t,a;function o(){var i=r.apply(this,arguments);return i!==a&&(t=(a=i)&&q0e(s,i,e)),t}return o._value=r,o}function K0e(s,r,e){var t="style."+(s+="");if(arguments.length<2)return(t=this.tween(t))&&t._value;if(r==null)return this.tween(t,null);if(typeof r!="function")throw new Error;return this.tween(t,G0e(s,r,e??""))}function Y0e(s){return function(){this.textContent=s}}function Z0e(s){return function(){var r=s(this);this.textContent=r??""}}function X0e(s){return this.tween("text",typeof s=="function"?Z0e(zk(this,"text",s)):Y0e(s==null?"":s+""))}function Q0e(s){return function(r){this.textContent=s.call(this,r)}}function J0e(s){var r,e;function t(){var a=s.apply(this,arguments);return a!==e&&(r=(e=a)&&Q0e(a)),r}return t._value=s,t}function eve(s){var r="text";if(arguments.length<1)return(r=this.tween(r))&&r._value;if(s==null)return this.tween(r,null);if(typeof s!="function")throw new Error;return this.tween(r,J0e(s))}function tve(){for(var s=this._name,r=this._id,e=mR(),t=this._groups,a=t.length,o=0;o<a;++o)for(var i=t[o],l=i.length,c,d=0;d<l;++d)if(c=i[d]){var p=mc(c,r);Bj(c,s,e,d,i,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new su(t,this._parents,s,e)}function rve(){var s,r,e=this,t=e._id,a=e.size();return new Promise(function(o,i){var l={value:i},c={value:function(){--a===0&&o()}};e.each(function(){var d=nd(this,t),p=d.on;p!==s&&(r=(s=p).copy(),r._.cancel.push(l),r._.interrupt.push(l),r._.end.push(c)),d.on=r}),a===0&&o()})}var nve=0;function su(s,r,e,t){this._groups=s,this._parents=r,this._name=e,this._id=t}function mR(){return++nve}var Rd=$x.prototype;su.prototype={constructor:su,select:L0e,selectAll:F0e,selectChild:Rd.selectChild,selectChildren:Rd.selectChildren,filter:O0e,merge:P0e,selection:z0e,transition:tve,call:Rd.call,nodes:Rd.nodes,node:Rd.node,size:Rd.size,empty:Rd.empty,each:Rd.each,on:I0e,attr:h0e,attrTween:v0e,style:W0e,styleTween:K0e,text:X0e,textTween:eve,remove:D0e,tween:i0e,delay:j0e,duration:N0e,ease:_0e,easeVarying:T0e,end:rve,[Symbol.iterator]:Rd[Symbol.iterator]};function sve(s){return((s*=2)<=1?s*s*s:(s-=2)*s*s+2)/2}var ave={time:null,delay:0,duration:250,ease:sve};function ove(s,r){for(var e;!(e=s.__transition)||!(e=e[r]);)if(!(s=s.parentNode))throw new Error(`transition ${r} not found`);return e}function ive(s){var r,e;s instanceof su?(r=s._id,s=s._name):(r=mR(),(e=ave).time=Fk(),s=s==null?null:s+"");for(var t=this._groups,a=t.length,o=0;o<a;++o)for(var i=t[o],l=i.length,c,d=0;d<l;++d)(c=i[d])&&Bj(c,s,r,d,i,e||ove(c,r));return new su(t,this._parents,s,r)}$x.prototype.interrupt=s0e;$x.prototype.transition=ive;const kv=s=>()=>s;function lve(s,{sourceEvent:r,target:e,transform:t,dispatch:a}){Object.defineProperties(this,{type:{value:s,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:t,enumerable:!0,configurable:!0},_:{value:a}})}function Hd(s,r,e){this.k=s,this.x=r,this.y=e}Hd.prototype={constructor:Hd,scale:function(s){return s===1?this:new Hd(this.k*s,this.x,this.y)},translate:function(s,r){return s===0&r===0?this:new Hd(this.k,this.x+this.k*s,this.y+this.k*r)},apply:function(s){return[s[0]*this.k+this.x,s[1]*this.k+this.y]},applyX:function(s){return s*this.k+this.x},applyY:function(s){return s*this.k+this.y},invert:function(s){return[(s[0]-this.x)/this.k,(s[1]-this.y)/this.k]},invertX:function(s){return(s-this.x)/this.k},invertY:function(s){return(s-this.y)/this.k},rescaleX:function(s){return s.copy().domain(s.range().map(this.invertX,this).map(s.invert,s))},rescaleY:function(s){return s.copy().domain(s.range().map(this.invertY,this).map(s.invert,s))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Yd=new Hd(1,0,0);Hd.prototype;function lS(s){s.stopImmediatePropagation()}function cy(s){s.preventDefault(),s.stopImmediatePropagation()}function cve(s){return(!s.ctrlKey||s.type==="wheel")&&!s.button}function dve(){var s=this;return s instanceof SVGElement?(s=s.ownerSVGElement||s,s.hasAttribute("viewBox")?(s=s.viewBox.baseVal,[[s.x,s.y],[s.x+s.width,s.y+s.height]]):[[0,0],[s.width.baseVal.value,s.height.baseVal.value]]):[[0,0],[s.clientWidth,s.clientHeight]]}function I3(){return this.__zoom||Yd}function uve(s){return-s.deltaY*(s.deltaMode===1?.05:s.deltaMode?1:.002)*(s.ctrlKey?10:1)}function fve(){return navigator.maxTouchPoints||"ontouchstart"in this}function pve(s,r,e){var t=s.invertX(r[0][0])-e[0][0],a=s.invertX(r[1][0])-e[1][0],o=s.invertY(r[0][1])-e[0][1],i=s.invertY(r[1][1])-e[1][1];return s.translate(a>t?(t+a)/2:Math.min(0,t)||Math.max(0,a),i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i))}function gR(){var s=cve,r=dve,e=pve,t=uve,a=fve,o=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],l=250,c=Zxe,d=Dj("start","zoom","end"),p,h,g,y=500,b=150,v=0,w=10;function C(P){P.property("__zoom",I3).on("wheel.zoom",G,{passive:!1}).on("mousedown.zoom",$).on("dblclick.zoom",z).filter(a).on("touchstart.zoom",Y).on("touchmove.zoom",M).on("touchend.zoom touchcancel.zoom",q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}C.transform=function(P,H,D,X){var se=P.selection?P.selection():P;se.property("__zoom",I3),P!==se?R(P,H,D,X):se.interrupt().each(function(){L(this,arguments).event(X).start().zoom(null,typeof H=="function"?H.apply(this,arguments):H).end()})},C.scaleBy=function(P,H,D,X){C.scaleTo(P,function(){var se=this.__zoom.k,Q=typeof H=="function"?H.apply(this,arguments):H;return se*Q},D,X)},C.scaleTo=function(P,H,D,X){C.transform(P,function(){var se=r.apply(this,arguments),Q=this.__zoom,xe=D==null?O(se):typeof D=="function"?D.apply(this,arguments):D,K=Q.invert(xe),Z=typeof H=="function"?H.apply(this,arguments):H;return e(N(k(Q,Z),xe,K),se,i)},D,X)},C.translateBy=function(P,H,D,X){C.transform(P,function(){return e(this.__zoom.translate(typeof H=="function"?H.apply(this,arguments):H,typeof D=="function"?D.apply(this,arguments):D),r.apply(this,arguments),i)},null,X)},C.translateTo=function(P,H,D,X,se){C.transform(P,function(){var Q=r.apply(this,arguments),xe=this.__zoom,K=X==null?O(Q):typeof X=="function"?X.apply(this,arguments):X;return e(Yd.translate(K[0],K[1]).scale(xe.k).translate(typeof H=="function"?-H.apply(this,arguments):-H,typeof D=="function"?-D.apply(this,arguments):-D),Q,i)},X,se)};function k(P,H){return H=Math.max(o[0],Math.min(o[1],H)),H===P.k?P:new Hd(H,P.x,P.y)}function N(P,H,D){var X=H[0]-D[0]*P.k,se=H[1]-D[1]*P.k;return X===P.x&&se===P.y?P:new Hd(P.k,X,se)}function O(P){return[(+P[0][0]+ +P[1][0])/2,(+P[0][1]+ +P[1][1])/2]}function R(P,H,D,X){P.on("start.zoom",function(){L(this,arguments).event(X).start()}).on("interrupt.zoom end.zoom",function(){L(this,arguments).event(X).end()}).tween("zoom",function(){var se=this,Q=arguments,xe=L(se,Q).event(X),K=r.apply(se,Q),Z=D==null?O(K):typeof D=="function"?D.apply(se,Q):D,ve=Math.max(K[1][0]-K[0][0],K[1][1]-K[0][1]),ae=se.__zoom,Se=typeof H=="function"?H.apply(se,Q):H,Pe=c(ae.invert(Z).concat(ve/ae.k),Se.invert(Z).concat(ve/Se.k));return function($e){if($e===1)$e=Se;else{var we=Pe($e),Ae=ve/we[2];$e=new Hd(Ae,Z[0]-we[0]*Ae,Z[1]-we[1]*Ae)}xe.zoom(null,$e)}})}function L(P,H,D){return!D&&P.__zooming||new B(P,H)}function B(P,H){this.that=P,this.args=H,this.active=0,this.sourceEvent=null,this.extent=r.apply(P,H),this.taps=0}B.prototype={event:function(P){return P&&(this.sourceEvent=P),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(P,H){return this.mouse&&P!=="mouse"&&(this.mouse[1]=H.invert(this.mouse[0])),this.touch0&&P!=="touch"&&(this.touch0[1]=H.invert(this.touch0[0])),this.touch1&&P!=="touch"&&(this.touch1[1]=H.invert(this.touch1[0])),this.that.__zoom=H,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(P){var H=Cl(this.that).datum();d.call(P,this.that,new lve(P,{sourceEvent:this.sourceEvent,target:C,transform:this.that.__zoom,dispatch:d}),H)}};function G(P,...H){if(!s.apply(this,arguments))return;var D=L(this,H).event(P),X=this.__zoom,se=Math.max(o[0],Math.min(o[1],X.k*Math.pow(2,t.apply(this,arguments)))),Q=rc(P);if(D.wheel)(D.mouse[0][0]!==Q[0]||D.mouse[0][1]!==Q[1])&&(D.mouse[1]=X.invert(D.mouse[0]=Q)),clearTimeout(D.wheel);else{if(X.k===se)return;D.mouse=[Q,X.invert(Q)],rb(this),D.start()}cy(P),D.wheel=setTimeout(xe,b),D.zoom("mouse",e(N(k(X,se),D.mouse[0],D.mouse[1]),D.extent,i));function xe(){D.wheel=null,D.end()}}function $(P,...H){if(g||!s.apply(this,arguments))return;var D=P.currentTarget,X=L(this,H,!0).event(P),se=Cl(P.view).on("mousemove.zoom",Z,!0).on("mouseup.zoom",ve,!0),Q=rc(P,D),xe=P.clientX,K=P.clientY;tR(P.view),lS(P),X.mouse=[Q,this.__zoom.invert(Q)],rb(this),X.start();function Z(ae){if(cy(ae),!X.moved){var Se=ae.clientX-xe,Pe=ae.clientY-K;X.moved=Se*Se+Pe*Pe>v}X.event(ae).zoom("mouse",e(N(X.that.__zoom,X.mouse[0]=rc(ae,D),X.mouse[1]),X.extent,i))}function ve(ae){se.on("mousemove.zoom mouseup.zoom",null),rR(ae.view,X.moved),cy(ae),X.event(ae).end()}}function z(P,...H){if(s.apply(this,arguments)){var D=this.__zoom,X=rc(P.changedTouches?P.changedTouches[0]:P,this),se=D.invert(X),Q=D.k*(P.shiftKey?.5:2),xe=e(N(k(D,Q),X,se),r.apply(this,H),i);cy(P),l>0?Cl(this).transition().duration(l).call(R,xe,X,P):Cl(this).call(C.transform,xe,X,P)}}function Y(P,...H){if(s.apply(this,arguments)){var D=P.touches,X=D.length,se=L(this,H,P.changedTouches.length===X).event(P),Q,xe,K,Z;for(lS(P),xe=0;xe<X;++xe)K=D[xe],Z=rc(K,this),Z=[Z,this.__zoom.invert(Z),K.identifier],se.touch0?!se.touch1&&se.touch0[2]!==Z[2]&&(se.touch1=Z,se.taps=0):(se.touch0=Z,Q=!0,se.taps=1+!!p);p&&(p=clearTimeout(p)),Q&&(se.taps<2&&(h=Z[0],p=setTimeout(function(){p=null},y)),rb(this),se.start())}}function M(P,...H){if(this.__zooming){var D=L(this,H).event(P),X=P.changedTouches,se=X.length,Q,xe,K,Z;for(cy(P),Q=0;Q<se;++Q)xe=X[Q],K=rc(xe,this),D.touch0&&D.touch0[2]===xe.identifier?D.touch0[0]=K:D.touch1&&D.touch1[2]===xe.identifier&&(D.touch1[0]=K);if(xe=D.that.__zoom,D.touch1){var ve=D.touch0[0],ae=D.touch0[1],Se=D.touch1[0],Pe=D.touch1[1],$e=($e=Se[0]-ve[0])*$e+($e=Se[1]-ve[1])*$e,we=(we=Pe[0]-ae[0])*we+(we=Pe[1]-ae[1])*we;xe=k(xe,Math.sqrt($e/we)),K=[(ve[0]+Se[0])/2,(ve[1]+Se[1])/2],Z=[(ae[0]+Pe[0])/2,(ae[1]+Pe[1])/2]}else if(D.touch0)K=D.touch0[0],Z=D.touch0[1];else return;D.zoom("touch",e(N(xe,K,Z),D.extent,i))}}function q(P,...H){if(this.__zooming){var D=L(this,H).event(P),X=P.changedTouches,se=X.length,Q,xe;for(lS(P),g&&clearTimeout(g),g=setTimeout(function(){g=null},y),Q=0;Q<se;++Q)xe=X[Q],D.touch0&&D.touch0[2]===xe.identifier?delete D.touch0:D.touch1&&D.touch1[2]===xe.identifier&&delete D.touch1;if(D.touch1&&!D.touch0&&(D.touch0=D.touch1,delete D.touch1),D.touch0)D.touch0[1]=this.__zoom.invert(D.touch0[0]);else if(D.end(),D.taps===2&&(xe=rc(xe,this),Math.hypot(h[0]-xe[0],h[1]-xe[1])<w)){var K=Cl(this).on("dblclick.zoom");K&&K.apply(this,arguments)}}}return C.wheelDelta=function(P){return arguments.length?(t=typeof P=="function"?P:kv(+P),C):t},C.filter=function(P){return arguments.length?(s=typeof P=="function"?P:kv(!!P),C):s},C.touchable=function(P){return arguments.length?(a=typeof P=="function"?P:kv(!!P),C):a},C.extent=function(P){return arguments.length?(r=typeof P=="function"?P:kv([[+P[0][0],+P[0][1]],[+P[1][0],+P[1][1]]]),C):r},C.scaleExtent=function(P){return arguments.length?(o[0]=+P[0],o[1]=+P[1],C):[o[0],o[1]]},C.translateExtent=function(P){return arguments.length?(i[0][0]=+P[0][0],i[1][0]=+P[1][0],i[0][1]=+P[0][1],i[1][1]=+P[1][1],C):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},C.constrain=function(P){return arguments.length?(e=P,C):e},C.duration=function(P){return arguments.length?(l=+P,C):l},C.interpolate=function(P){return arguments.length?(c=P,C):c},C.on=function(){var P=d.on.apply(d,arguments);return P===d?C:P},C.clickDistance=function(P){return arguments.length?(v=(P=+P)*P,C):Math.sqrt(v)},C.tapDistance=function(P){return arguments.length?(w=+P,C):w},C}const zj=u.createContext(null),hve=zj.Provider,au={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:s=>`Node type "${s}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:s=>`The old edge with id=${s} does not exist.`,error009:s=>`Marker type "${s}" doesn't exist.`,error008:(s,r)=>`Couldn't create edge for ${s?"target":"source"} handle id: "${s?r.targetHandle:r.sourceHandle}", edge id: ${r.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:s=>`Edge type "${s}" not found. Using fallback type "default".`,error012:s=>`Node with id "${s}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},yR=au.error001();function ga(s,r){const e=u.useContext(zj);if(e===null)throw new Error(yR);return UI(e,s,r)}const xo=()=>{const s=u.useContext(zj);if(s===null)throw new Error(yR);return u.useMemo(()=>({getState:s.getState,setState:s.setState,subscribe:s.subscribe,destroy:s.destroy}),[s])},mve=s=>s.userSelectionActive?"none":"all";function $k({position:s,children:r,className:e,style:t,...a}){const o=ga(mve),i=`${s}`.split("-");return pt.createElement("div",{className:$o(["react-flow__panel",e,...i]),style:{...t,pointerEvents:o},...a},r)}function gve({proOptions:s,position:r="bottom-right"}){return s?.hideAttribution?null:pt.createElement($k,{position:r,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},pt.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const yve=({x:s,y:r,label:e,labelStyle:t={},labelShowBg:a=!0,labelBgStyle:o={},labelBgPadding:i=[2,4],labelBgBorderRadius:l=2,children:c,className:d,...p})=>{const h=u.useRef(null),[g,y]=u.useState({x:0,y:0,width:0,height:0}),b=$o(["react-flow__edge-textwrapper",d]);return u.useEffect(()=>{if(h.current){const v=h.current.getBBox();y({x:v.x,y:v.y,width:v.width,height:v.height})}},[e]),typeof e>"u"||!e?null:pt.createElement("g",{transform:`translate(${s-g.width/2} ${r-g.height/2})`,className:b,visibility:g.width?"visible":"hidden",...p},a&&pt.createElement("rect",{width:g.width+2*i[0],x:-i[0],y:-i[1],height:g.height+2*i[1],className:"react-flow__edge-textbg",style:o,rx:l,ry:l}),pt.createElement("text",{className:"react-flow__edge-text",y:g.height/2,dy:"0.3em",ref:h,style:t},e),c)};var xve=u.memo(yve);const Uk=s=>({width:s.offsetWidth,height:s.offsetHeight}),Em=(s,r=0,e=1)=>Math.min(Math.max(s,r),e),Vk=(s={x:0,y:0},r)=>({x:Em(s.x,r[0][0],r[1][0]),y:Em(s.y,r[0][1],r[1][1])}),R3=(s,r,e)=>s<r?Em(Math.abs(s-r),1,50)/50:s>e?-Em(Math.abs(s-e),1,50)/50:0,xR=(s,r)=>{const e=R3(s.x,35,r.width-35)*20,t=R3(s.y,35,r.height-35)*20;return[e,t]},vR=s=>s.getRootNode?.()||window?.document,bR=(s,r)=>({x:Math.min(s.x,r.x),y:Math.min(s.y,r.y),x2:Math.max(s.x2,r.x2),y2:Math.max(s.y2,r.y2)}),px=({x:s,y:r,width:e,height:t})=>({x:s,y:r,x2:s+e,y2:r+t}),wR=({x:s,y:r,x2:e,y2:t})=>({x:s,y:r,width:e-s,height:t-r}),D3=s=>({...s.positionAbsolute||{x:0,y:0},width:s.width||0,height:s.height||0}),vve=(s,r)=>wR(bR(px(s),px(r))),r2=(s,r)=>{const e=Math.max(0,Math.min(s.x+s.width,r.x+r.width)-Math.max(s.x,r.x)),t=Math.max(0,Math.min(s.y+s.height,r.y+r.height)-Math.max(s.y,r.y));return Math.ceil(e*t)},bve=s=>Nl(s.width)&&Nl(s.height)&&Nl(s.x)&&Nl(s.y),Nl=s=>!isNaN(s)&&isFinite(s),Ha=Symbol.for("internals"),jR=["Enter"," ","Escape"],wve=(s,r)=>{},jve=s=>"nativeEvent"in s;function n2(s){const e=(jve(s)?s.nativeEvent:s).composedPath?.()?.[0]||s.target;return["INPUT","SELECT","TEXTAREA"].includes(e?.nodeName)||e?.hasAttribute("contenteditable")||!!e?.closest(".nokey")}const CR=s=>"clientX"in s,sf=(s,r)=>{const e=CR(s),t=e?s.clientX:s.touches?.[0].clientX,a=e?s.clientY:s.touches?.[0].clientY;return{x:t-(r?.left??0),y:a-(r?.top??0)}},Dw=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,Vx=({id:s,path:r,labelX:e,labelY:t,label:a,labelStyle:o,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:d,style:p,markerEnd:h,markerStart:g,interactionWidth:y=20})=>pt.createElement(pt.Fragment,null,pt.createElement("path",{id:s,style:p,d:r,fill:"none",className:"react-flow__edge-path",markerEnd:h,markerStart:g}),y&&pt.createElement("path",{d:r,fill:"none",strokeOpacity:0,strokeWidth:y,className:"react-flow__edge-interaction"}),a&&Nl(e)&&Nl(t)?pt.createElement(xve,{x:e,y:t,label:a,labelStyle:o,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:d}):null);Vx.displayName="BaseEdge";function dy(s,r,e){return e===void 0?e:t=>{const a=r().edges.find(o=>o.id===s);a&&e(t,{...a})}}function SR({sourceX:s,sourceY:r,targetX:e,targetY:t}){const a=Math.abs(e-s)/2,o=e<s?e+a:e-a,i=Math.abs(t-r)/2,l=t<r?t+i:t-i;return[o,l,a,i]}function NR({sourceX:s,sourceY:r,targetX:e,targetY:t,sourceControlX:a,sourceControlY:o,targetControlX:i,targetControlY:l}){const c=s*.125+a*.375+i*.375+e*.125,d=r*.125+o*.375+l*.375+t*.125,p=Math.abs(c-s),h=Math.abs(d-r);return[c,d,p,h]}var Dp;(function(s){s.Strict="strict",s.Loose="loose"})(Dp||(Dp={}));var bp;(function(s){s.Free="free",s.Vertical="vertical",s.Horizontal="horizontal"})(bp||(bp={}));var hx;(function(s){s.Partial="partial",s.Full="full"})(hx||(hx={}));var $d;(function(s){s.Bezier="default",s.Straight="straight",s.Step="step",s.SmoothStep="smoothstep",s.SimpleBezier="simplebezier"})($d||($d={}));var Lw;(function(s){s.Arrow="arrow",s.ArrowClosed="arrowclosed"})(Lw||(Lw={}));var cn;(function(s){s.Left="left",s.Top="top",s.Right="right",s.Bottom="bottom"})(cn||(cn={}));function L3({pos:s,x1:r,y1:e,x2:t,y2:a}){return s===cn.Left||s===cn.Right?[.5*(r+t),e]:[r,.5*(e+a)]}function kR({sourceX:s,sourceY:r,sourcePosition:e=cn.Bottom,targetX:t,targetY:a,targetPosition:o=cn.Top}){const[i,l]=L3({pos:e,x1:s,y1:r,x2:t,y2:a}),[c,d]=L3({pos:o,x1:t,y1:a,x2:s,y2:r}),[p,h,g,y]=NR({sourceX:s,sourceY:r,targetX:t,targetY:a,sourceControlX:i,sourceControlY:l,targetControlX:c,targetControlY:d});return[`M${s},${r} C${i},${l} ${c},${d} ${t},${a}`,p,h,g,y]}const Hk=u.memo(({sourceX:s,sourceY:r,targetX:e,targetY:t,sourcePosition:a=cn.Bottom,targetPosition:o=cn.Top,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:h,style:g,markerEnd:y,markerStart:b,interactionWidth:v})=>{const[w,C,k]=kR({sourceX:s,sourceY:r,sourcePosition:a,targetX:e,targetY:t,targetPosition:o});return pt.createElement(Vx,{path:w,labelX:C,labelY:k,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:h,style:g,markerEnd:y,markerStart:b,interactionWidth:v})});Hk.displayName="SimpleBezierEdge";const F3={[cn.Left]:{x:-1,y:0},[cn.Right]:{x:1,y:0},[cn.Top]:{x:0,y:-1},[cn.Bottom]:{x:0,y:1}},Cve=({source:s,sourcePosition:r=cn.Bottom,target:e})=>r===cn.Left||r===cn.Right?s.x<e.x?{x:1,y:0}:{x:-1,y:0}:s.y<e.y?{x:0,y:1}:{x:0,y:-1},B3=(s,r)=>Math.sqrt(Math.pow(r.x-s.x,2)+Math.pow(r.y-s.y,2));function Sve({source:s,sourcePosition:r=cn.Bottom,target:e,targetPosition:t=cn.Top,center:a,offset:o}){const i=F3[r],l=F3[t],c={x:s.x+i.x*o,y:s.y+i.y*o},d={x:e.x+l.x*o,y:e.y+l.y*o},p=Cve({source:c,sourcePosition:r,target:d}),h=p.x!==0?"x":"y",g=p[h];let y=[],b,v;const w={x:0,y:0},C={x:0,y:0},[k,N,O,R]=SR({sourceX:s.x,sourceY:s.y,targetX:e.x,targetY:e.y});if(i[h]*l[h]===-1){b=a.x??k,v=a.y??N;const B=[{x:b,y:c.y},{x:b,y:d.y}],G=[{x:c.x,y:v},{x:d.x,y:v}];i[h]===g?y=h==="x"?B:G:y=h==="x"?G:B}else{const B=[{x:c.x,y:d.y}],G=[{x:d.x,y:c.y}];if(h==="x"?y=i.x===g?G:B:y=i.y===g?B:G,r===t){const q=Math.abs(s[h]-e[h]);if(q<=o){const P=Math.min(o-1,o-q);i[h]===g?w[h]=(c[h]>s[h]?-1:1)*P:C[h]=(d[h]>e[h]?-1:1)*P}}if(r!==t){const q=h==="x"?"y":"x",P=i[h]===l[q],H=c[q]>d[q],D=c[q]<d[q];(i[h]===1&&(!P&&H||P&&D)||i[h]!==1&&(!P&&D||P&&H))&&(y=h==="x"?B:G)}const $={x:c.x+w.x,y:c.y+w.y},z={x:d.x+C.x,y:d.y+C.y},Y=Math.max(Math.abs($.x-y[0].x),Math.abs(z.x-y[0].x)),M=Math.max(Math.abs($.y-y[0].y),Math.abs(z.y-y[0].y));Y>=M?(b=($.x+z.x)/2,v=y[0].y):(b=y[0].x,v=($.y+z.y)/2)}return[[s,{x:c.x+w.x,y:c.y+w.y},...y,{x:d.x+C.x,y:d.y+C.y},e],b,v,O,R]}function Nve(s,r,e,t){const a=Math.min(B3(s,r)/2,B3(r,e)/2,t),{x:o,y:i}=r;if(s.x===o&&o===e.x||s.y===i&&i===e.y)return`L${o} ${i}`;if(s.y===i){const d=s.x<e.x?-1:1,p=s.y<e.y?1:-1;return`L ${o+a*d},${i}Q ${o},${i} ${o},${i+a*p}`}const l=s.x<e.x?1:-1,c=s.y<e.y?-1:1;return`L ${o},${i+a*c}Q ${o},${i} ${o+a*l},${i}`}function s2({sourceX:s,sourceY:r,sourcePosition:e=cn.Bottom,targetX:t,targetY:a,targetPosition:o=cn.Top,borderRadius:i=5,centerX:l,centerY:c,offset:d=20}){const[p,h,g,y,b]=Sve({source:{x:s,y:r},sourcePosition:e,target:{x:t,y:a},targetPosition:o,center:{x:l,y:c},offset:d});return[p.reduce((w,C,k)=>{let N="";return k>0&&k<p.length-1?N=Nve(p[k-1],C,p[k+1],i):N=`${k===0?"M":"L"}${C.x} ${C.y}`,w+=N,w},""),h,g,y,b]}const $j=u.memo(({sourceX:s,sourceY:r,targetX:e,targetY:t,label:a,labelStyle:o,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:d,style:p,sourcePosition:h=cn.Bottom,targetPosition:g=cn.Top,markerEnd:y,markerStart:b,pathOptions:v,interactionWidth:w})=>{const[C,k,N]=s2({sourceX:s,sourceY:r,sourcePosition:h,targetX:e,targetY:t,targetPosition:g,borderRadius:v?.borderRadius,offset:v?.offset});return pt.createElement(Vx,{path:C,labelX:k,labelY:N,label:a,labelStyle:o,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:d,style:p,markerEnd:y,markerStart:b,interactionWidth:w})});$j.displayName="SmoothStepEdge";const Wk=u.memo(s=>pt.createElement($j,{...s,pathOptions:u.useMemo(()=>({borderRadius:0,offset:s.pathOptions?.offset}),[s.pathOptions?.offset])}));Wk.displayName="StepEdge";function kve({sourceX:s,sourceY:r,targetX:e,targetY:t}){const[a,o,i,l]=SR({sourceX:s,sourceY:r,targetX:e,targetY:t});return[`M ${s},${r}L ${e},${t}`,a,o,i,l]}const qk=u.memo(({sourceX:s,sourceY:r,targetX:e,targetY:t,label:a,labelStyle:o,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:d,style:p,markerEnd:h,markerStart:g,interactionWidth:y})=>{const[b,v,w]=kve({sourceX:s,sourceY:r,targetX:e,targetY:t});return pt.createElement(Vx,{path:b,labelX:v,labelY:w,label:a,labelStyle:o,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:d,style:p,markerEnd:h,markerStart:g,interactionWidth:y})});qk.displayName="StraightEdge";function _v(s,r){return s>=0?.5*s:r*25*Math.sqrt(-s)}function z3({pos:s,x1:r,y1:e,x2:t,y2:a,c:o}){switch(s){case cn.Left:return[r-_v(r-t,o),e];case cn.Right:return[r+_v(t-r,o),e];case cn.Top:return[r,e-_v(e-a,o)];case cn.Bottom:return[r,e+_v(a-e,o)]}}function _R({sourceX:s,sourceY:r,sourcePosition:e=cn.Bottom,targetX:t,targetY:a,targetPosition:o=cn.Top,curvature:i=.25}){const[l,c]=z3({pos:e,x1:s,y1:r,x2:t,y2:a,c:i}),[d,p]=z3({pos:o,x1:t,y1:a,x2:s,y2:r,c:i}),[h,g,y,b]=NR({sourceX:s,sourceY:r,targetX:t,targetY:a,sourceControlX:l,sourceControlY:c,targetControlX:d,targetControlY:p});return[`M${s},${r} C${l},${c} ${d},${p} ${t},${a}`,h,g,y,b]}const Fw=u.memo(({sourceX:s,sourceY:r,targetX:e,targetY:t,sourcePosition:a=cn.Bottom,targetPosition:o=cn.Top,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:h,style:g,markerEnd:y,markerStart:b,pathOptions:v,interactionWidth:w})=>{const[C,k,N]=_R({sourceX:s,sourceY:r,sourcePosition:a,targetX:e,targetY:t,targetPosition:o,curvature:v?.curvature});return pt.createElement(Vx,{path:C,labelX:k,labelY:N,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:h,style:g,markerEnd:y,markerStart:b,interactionWidth:w})});Fw.displayName="BezierEdge";const Gk=u.createContext(null),_ve=Gk.Provider;Gk.Consumer;const Eve=()=>u.useContext(Gk),Tve=s=>"id"in s&&"source"in s&&"target"in s,Ove=({source:s,sourceHandle:r,target:e,targetHandle:t})=>`reactflow__edge-${s}${r||""}-${e}${t||""}`,a2=(s,r)=>typeof s>"u"?"":typeof s=="string"?s:`${r?`${r}__`:""}${Object.keys(s).sort().map(t=>`${t}=${s[t]}`).join("&")}`,Pve=(s,r)=>r.some(e=>e.source===s.source&&e.target===s.target&&(e.sourceHandle===s.sourceHandle||!e.sourceHandle&&!s.sourceHandle)&&(e.targetHandle===s.targetHandle||!e.targetHandle&&!s.targetHandle)),ER=(s,r)=>{if(!s.source||!s.target)return r;let e;return Tve(s)?e={...s}:e={...s,id:Ove(s)},Pve(e,r)?r:r.concat(e)},o2=({x:s,y:r},[e,t,a],o,[i,l])=>{const c={x:(s-e)/a,y:(r-t)/a};return o?{x:i*Math.round(c.x/i),y:l*Math.round(c.y/l)}:c},TR=({x:s,y:r},[e,t,a])=>({x:s*a+e,y:r*a+t}),Sp=(s,r=[0,0])=>{if(!s)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const e=(s.width??0)*r[0],t=(s.height??0)*r[1],a={x:s.position.x-e,y:s.position.y-t};return{...a,positionAbsolute:s.positionAbsolute?{x:s.positionAbsolute.x-e,y:s.positionAbsolute.y-t}:a}},Uj=(s,r=[0,0])=>{if(s.length===0)return{x:0,y:0,width:0,height:0};const e=s.reduce((t,a)=>{const{x:o,y:i}=Sp(a,r).positionAbsolute;return bR(t,px({x:o,y:i,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return wR(e)},OR=(s,r,[e,t,a]=[0,0,1],o=!1,i=!1,l=[0,0])=>{const c={x:(r.x-e)/a,y:(r.y-t)/a,width:r.width/a,height:r.height/a},d=[];return s.forEach(p=>{const{width:h,height:g,selectable:y=!0,hidden:b=!1}=p;if(i&&!y||b)return!1;const{positionAbsolute:v}=Sp(p,l),w={x:v.x,y:v.y,width:h||0,height:g||0},C=r2(c,w),k=typeof h>"u"||typeof g>"u"||h===null||g===null,N=o&&C>0,O=(h||0)*(g||0);(k||N||C>=O||p.dragging)&&d.push(p)}),d},PR=(s,r)=>{const e=s.map(t=>t.id);return r.filter(t=>e.includes(t.source)||e.includes(t.target))},AR=(s,r,e,t,a,o=.1)=>{const i=r/(s.width*(1+o)),l=e/(s.height*(1+o)),c=Math.min(i,l),d=Em(c,t,a),p=s.x+s.width/2,h=s.y+s.height/2,g=r/2-p*d,y=e/2-h*d;return{x:g,y,zoom:d}},op=(s,r=0)=>s.transition().duration(r);function $3(s,r,e,t){return(r[e]||[]).reduce((a,o)=>(`${s.id}-${o.id}-${e}`!==t&&a.push({id:o.id||null,type:e,nodeId:s.id,x:(s.positionAbsolute?.x??0)+o.x+o.width/2,y:(s.positionAbsolute?.y??0)+o.y+o.height/2}),a),[])}function Ave(s,r,e,t,a,o){const{x:i,y:l}=sf(s),d=r.elementsFromPoint(i,l).find(b=>b.classList.contains("react-flow__handle"));if(d){const b=d.getAttribute("data-nodeid");if(b){const v=Kk(void 0,d),w=d.getAttribute("data-handleid"),C=o({nodeId:b,id:w,type:v});if(C){const k=a.find(N=>N.nodeId===b&&N.type===v&&N.id===w);return{handle:{id:w,type:v,nodeId:b,x:k?.x||e.x,y:k?.y||e.y},validHandleResult:C}}}}let p=[],h=1/0;if(a.forEach(b=>{const v=Math.sqrt((b.x-e.x)**2+(b.y-e.y)**2);if(v<=t){const w=o(b);v<=h&&(v<h?p=[{handle:b,validHandleResult:w}]:v===h&&p.push({handle:b,validHandleResult:w}),h=v)}}),!p.length)return{handle:null,validHandleResult:MR()};if(p.length===1)return p[0];const g=p.some(({validHandleResult:b})=>b.isValid),y=p.some(({handle:b})=>b.type==="target");return p.find(({handle:b,validHandleResult:v})=>y?b.type==="target":g?v.isValid:!0)||p[0]}const Mve={source:null,target:null,sourceHandle:null,targetHandle:null},MR=()=>({handleDomNode:null,isValid:!1,connection:Mve,endHandle:null});function IR(s,r,e,t,a,o,i){const l=a==="target",c=i.querySelector(`.react-flow__handle[data-id="${s?.nodeId}-${s?.id}-${s?.type}"]`),d={...MR(),handleDomNode:c};if(c){const p=Kk(void 0,c),h=c.getAttribute("data-nodeid"),g=c.getAttribute("data-handleid"),y=c.classList.contains("connectable"),b=c.classList.contains("connectableend"),v={source:l?h:e,sourceHandle:l?g:t,target:l?e:h,targetHandle:l?t:g};d.connection=v,y&&b&&(r===Dp.Strict?l&&p==="source"||!l&&p==="target":h!==e||g!==t)&&(d.endHandle={nodeId:h,handleId:g,type:p},d.isValid=o(v))}return d}function Ive({nodes:s,nodeId:r,handleId:e,handleType:t}){return s.reduce((a,o)=>{if(o[Ha]){const{handleBounds:i}=o[Ha];let l=[],c=[];i&&(l=$3(o,i,"source",`${r}-${e}-${t}`),c=$3(o,i,"target",`${r}-${e}-${t}`)),a.push(...l,...c)}return a},[])}function Kk(s,r){return s||(r?.classList.contains("target")?"target":r?.classList.contains("source")?"source":null)}function cS(s){s?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function Rve(s,r){let e=null;return r?e="valid":s&&!r&&(e="invalid"),e}function RR({event:s,handleId:r,nodeId:e,onConnect:t,isTarget:a,getState:o,setState:i,isValidConnection:l,edgeUpdaterType:c,onReconnectEnd:d}){const p=vR(s.target),{connectionMode:h,domNode:g,autoPanOnConnect:y,connectionRadius:b,onConnectStart:v,panBy:w,getNodes:C,cancelConnection:k}=o();let N=0,O;const{x:R,y:L}=sf(s),B=p?.elementFromPoint(R,L),G=Kk(c,B),$=g?.getBoundingClientRect();if(!$||!G)return;let z,Y=sf(s,$),M=!1,q=null,P=!1,H=null;const D=Ive({nodes:C(),nodeId:e,handleId:r,handleType:G}),X=()=>{if(!y)return;const[xe,K]=xR(Y,$);w({x:xe,y:K}),N=requestAnimationFrame(X)};i({connectionPosition:Y,connectionStatus:null,connectionNodeId:e,connectionHandleId:r,connectionHandleType:G,connectionStartHandle:{nodeId:e,handleId:r,type:G},connectionEndHandle:null}),v?.(s,{nodeId:e,handleId:r,handleType:G});function se(xe){const{transform:K}=o();Y=sf(xe,$);const{handle:Z,validHandleResult:ve}=Ave(xe,p,o2(Y,K,!1,[1,1]),b,D,ae=>IR(ae,h,e,r,a?"target":"source",l,p));if(O=Z,M||(X(),M=!0),H=ve.handleDomNode,q=ve.connection,P=ve.isValid,i({connectionPosition:O&&P?TR({x:O.x,y:O.y},K):Y,connectionStatus:Rve(!!O,P),connectionEndHandle:ve.endHandle}),!O&&!P&&!H)return cS(z);q.source!==q.target&&H&&(cS(z),z=H,H.classList.add("connecting","react-flow__handle-connecting"),H.classList.toggle("valid",P),H.classList.toggle("react-flow__handle-valid",P))}function Q(xe){(O||H)&&q&&P&&t?.(q),o().onConnectEnd?.(xe),c&&d?.(xe),cS(z),k(),cancelAnimationFrame(N),M=!1,P=!1,q=null,H=null,p.removeEventListener("mousemove",se),p.removeEventListener("mouseup",Q),p.removeEventListener("touchmove",se),p.removeEventListener("touchend",Q)}p.addEventListener("mousemove",se),p.addEventListener("mouseup",Q),p.addEventListener("touchmove",se),p.addEventListener("touchend",Q)}const U3=()=>!0,Dve=s=>({connectionStartHandle:s.connectionStartHandle,connectOnClick:s.connectOnClick,noPanClassName:s.noPanClassName}),Lve=(s,r,e)=>t=>{const{connectionStartHandle:a,connectionEndHandle:o,connectionClickStartHandle:i}=t;return{connecting:a?.nodeId===s&&a?.handleId===r&&a?.type===e||o?.nodeId===s&&o?.handleId===r&&o?.type===e,clickConnecting:i?.nodeId===s&&i?.handleId===r&&i?.type===e}},DR=u.forwardRef(({type:s="source",position:r=cn.Top,isValidConnection:e,isConnectable:t=!0,isConnectableStart:a=!0,isConnectableEnd:o=!0,id:i,onConnect:l,children:c,className:d,onMouseDown:p,onTouchStart:h,...g},y)=>{const b=i||null,v=s==="target",w=xo(),C=Eve(),{connectOnClick:k,noPanClassName:N}=ga(Dve,Eo),{connecting:O,clickConnecting:R}=ga(Lve(C,b,s),Eo);C||w.getState().onError?.("010",au.error010());const L=$=>{const{defaultEdgeOptions:z,onConnect:Y,hasDefaultEdges:M}=w.getState(),q={...z,...$};if(M){const{edges:P,setEdges:H}=w.getState();H(ER(q,P))}Y?.(q),l?.(q)},B=$=>{if(!C)return;const z=CR($);a&&(z&&$.button===0||!z)&&RR({event:$,handleId:b,nodeId:C,onConnect:L,isTarget:v,getState:w.getState,setState:w.setState,isValidConnection:e||w.getState().isValidConnection||U3}),z?p?.($):h?.($)},G=$=>{const{onClickConnectStart:z,onClickConnectEnd:Y,connectionClickStartHandle:M,connectionMode:q,isValidConnection:P}=w.getState();if(!C||!M&&!a)return;if(!M){z?.($,{nodeId:C,handleId:b,handleType:s}),w.setState({connectionClickStartHandle:{nodeId:C,type:s,handleId:b}});return}const H=vR($.target),D=e||P||U3,{connection:X,isValid:se}=IR({nodeId:C,id:b,type:s},q,M.nodeId,M.handleId||null,M.type,D,H);se&&L(X),Y?.($),w.setState({connectionClickStartHandle:null})};return pt.createElement("div",{"data-handleid":b,"data-nodeid":C,"data-handlepos":r,"data-id":`${C}-${b}-${s}`,className:$o(["react-flow__handle",`react-flow__handle-${r}`,"nodrag",N,d,{source:!v,target:v,connectable:t,connectablestart:a,connectableend:o,connecting:R,connectionindicator:t&&(a&&!O||o&&O)}]),onMouseDown:B,onTouchStart:B,onClick:k?G:void 0,ref:y,...g},c)});DR.displayName="Handle";var kl=u.memo(DR);const LR=({data:s,isConnectable:r,targetPosition:e=cn.Top,sourcePosition:t=cn.Bottom})=>pt.createElement(pt.Fragment,null,pt.createElement(kl,{type:"target",position:e,isConnectable:r}),s?.label,pt.createElement(kl,{type:"source",position:t,isConnectable:r}));LR.displayName="DefaultNode";var i2=u.memo(LR);const FR=({data:s,isConnectable:r,sourcePosition:e=cn.Bottom})=>pt.createElement(pt.Fragment,null,s?.label,pt.createElement(kl,{type:"source",position:e,isConnectable:r}));FR.displayName="InputNode";var BR=u.memo(FR);const zR=({data:s,isConnectable:r,targetPosition:e=cn.Top})=>pt.createElement(pt.Fragment,null,pt.createElement(kl,{type:"target",position:e,isConnectable:r}),s?.label);zR.displayName="OutputNode";var $R=u.memo(zR);const Yk=()=>null;Yk.displayName="GroupNode";const Fve=s=>({selectedNodes:s.getNodes().filter(r=>r.selected),selectedEdges:s.edges.filter(r=>r.selected).map(r=>({...r}))}),Ev=s=>s.id;function Bve(s,r){return Eo(s.selectedNodes.map(Ev),r.selectedNodes.map(Ev))&&Eo(s.selectedEdges.map(Ev),r.selectedEdges.map(Ev))}const UR=u.memo(({onSelectionChange:s})=>{const r=xo(),{selectedNodes:e,selectedEdges:t}=ga(Fve,Bve);return u.useEffect(()=>{const a={nodes:e,edges:t};s?.(a),r.getState().onSelectionChange.forEach(o=>o(a))},[e,t,s]),null});UR.displayName="SelectionListener";const zve=s=>!!s.onSelectionChange;function $ve({onSelectionChange:s}){const r=ga(zve);return s||r?pt.createElement(UR,{onSelectionChange:s}):null}const Uve=s=>({setNodes:s.setNodes,setEdges:s.setEdges,setDefaultNodesAndEdges:s.setDefaultNodesAndEdges,setMinZoom:s.setMinZoom,setMaxZoom:s.setMaxZoom,setTranslateExtent:s.setTranslateExtent,setNodeExtent:s.setNodeExtent,reset:s.reset});function Ih(s,r){u.useEffect(()=>{typeof s<"u"&&r(s)},[s])}function Jn(s,r,e){u.useEffect(()=>{typeof r<"u"&&e({[s]:r})},[r])}const Vve=({nodes:s,edges:r,defaultNodes:e,defaultEdges:t,onConnect:a,onConnectStart:o,onConnectEnd:i,onClickConnectStart:l,onClickConnectEnd:c,nodesDraggable:d,nodesConnectable:p,nodesFocusable:h,edgesFocusable:g,edgesUpdatable:y,elevateNodesOnSelect:b,minZoom:v,maxZoom:w,nodeExtent:C,onNodesChange:k,onEdgesChange:N,elementsSelectable:O,connectionMode:R,snapGrid:L,snapToGrid:B,translateExtent:G,connectOnClick:$,defaultEdgeOptions:z,fitView:Y,fitViewOptions:M,onNodesDelete:q,onEdgesDelete:P,onNodeDrag:H,onNodeDragStart:D,onNodeDragStop:X,onSelectionDrag:se,onSelectionDragStart:Q,onSelectionDragStop:xe,noPanClassName:K,nodeOrigin:Z,rfId:ve,autoPanOnConnect:ae,autoPanOnNodeDrag:Se,onError:Pe,connectionRadius:$e,isValidConnection:we,nodeDragThreshold:Ae})=>{const{setNodes:ze,setEdges:Ge,setDefaultNodesAndEdges:Ue,setMinZoom:ht,setMaxZoom:ee,setTranslateExtent:ue,setNodeExtent:Oe,reset:J}=ga(Uve,Eo),I=xo();return u.useEffect(()=>{const V=t?.map(re=>({...re,...z}));return Ue(e,V),()=>{J()}},[]),Jn("defaultEdgeOptions",z,I.setState),Jn("connectionMode",R,I.setState),Jn("onConnect",a,I.setState),Jn("onConnectStart",o,I.setState),Jn("onConnectEnd",i,I.setState),Jn("onClickConnectStart",l,I.setState),Jn("onClickConnectEnd",c,I.setState),Jn("nodesDraggable",d,I.setState),Jn("nodesConnectable",p,I.setState),Jn("nodesFocusable",h,I.setState),Jn("edgesFocusable",g,I.setState),Jn("edgesUpdatable",y,I.setState),Jn("elementsSelectable",O,I.setState),Jn("elevateNodesOnSelect",b,I.setState),Jn("snapToGrid",B,I.setState),Jn("snapGrid",L,I.setState),Jn("onNodesChange",k,I.setState),Jn("onEdgesChange",N,I.setState),Jn("connectOnClick",$,I.setState),Jn("fitViewOnInit",Y,I.setState),Jn("fitViewOnInitOptions",M,I.setState),Jn("onNodesDelete",q,I.setState),Jn("onEdgesDelete",P,I.setState),Jn("onNodeDrag",H,I.setState),Jn("onNodeDragStart",D,I.setState),Jn("onNodeDragStop",X,I.setState),Jn("onSelectionDrag",se,I.setState),Jn("onSelectionDragStart",Q,I.setState),Jn("onSelectionDragStop",xe,I.setState),Jn("noPanClassName",K,I.setState),Jn("nodeOrigin",Z,I.setState),Jn("rfId",ve,I.setState),Jn("autoPanOnConnect",ae,I.setState),Jn("autoPanOnNodeDrag",Se,I.setState),Jn("onError",Pe,I.setState),Jn("connectionRadius",$e,I.setState),Jn("isValidConnection",we,I.setState),Jn("nodeDragThreshold",Ae,I.setState),Ih(s,ze),Ih(r,Ge),Ih(v,ht),Ih(w,ee),Ih(G,ue),Ih(C,Oe),null},V3={display:"none"},Hve={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},VR="react-flow__node-desc",HR="react-flow__edge-desc",Wve="react-flow__aria-live",qve=s=>s.ariaLiveMessage;function Gve({rfId:s}){const r=ga(qve);return pt.createElement("div",{id:`${Wve}-${s}`,"aria-live":"assertive","aria-atomic":"true",style:Hve},r)}function Kve({rfId:s,disableKeyboardA11y:r}){return pt.createElement(pt.Fragment,null,pt.createElement("div",{id:`${VR}-${s}`,style:V3},"Press enter or space to select a node.",!r&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),pt.createElement("div",{id:`${HR}-${s}`,style:V3},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!r&&pt.createElement(Gve,{rfId:s}))}var mx=(s=null,r={actInsideInputWithModifier:!0})=>{const[e,t]=u.useState(!1),a=u.useRef(!1),o=u.useRef(new Set([])),[i,l]=u.useMemo(()=>{if(s!==null){const d=(Array.isArray(s)?s:[s]).filter(h=>typeof h=="string").map(h=>h.split("+")),p=d.reduce((h,g)=>h.concat(...g),[]);return[d,p]}return[[],[]]},[s]);return u.useEffect(()=>{const c=typeof document<"u"?document:null,d=r?.target||c;if(s!==null){const p=y=>{if(a.current=y.ctrlKey||y.metaKey||y.shiftKey,(!a.current||a.current&&!r.actInsideInputWithModifier)&&n2(y))return!1;const v=W3(y.code,l);o.current.add(y[v]),H3(i,o.current,!1)&&(y.preventDefault(),t(!0))},h=y=>{if((!a.current||a.current&&!r.actInsideInputWithModifier)&&n2(y))return!1;const v=W3(y.code,l);H3(i,o.current,!0)?(t(!1),o.current.clear()):o.current.delete(y[v]),y.key==="Meta"&&o.current.clear(),a.current=!1},g=()=>{o.current.clear(),t(!1)};return d?.addEventListener("keydown",p),d?.addEventListener("keyup",h),window.addEventListener("blur",g),()=>{d?.removeEventListener("keydown",p),d?.removeEventListener("keyup",h),window.removeEventListener("blur",g)}}},[s,t]),e};function H3(s,r,e){return s.filter(t=>e||t.length===r.size).some(t=>t.every(a=>r.has(a)))}function W3(s,r){return r.includes(s)?"code":"key"}function WR(s,r,e,t){const a=s.parentNode||s.parentId;if(!a)return e;const o=r.get(a),i=Sp(o,t);return WR(o,r,{x:(e.x??0)+i.x,y:(e.y??0)+i.y,z:(o[Ha]?.z??0)>(e.z??0)?o[Ha]?.z??0:e.z??0},t)}function qR(s,r,e){s.forEach(t=>{const a=t.parentNode||t.parentId;if(a&&!s.has(a))throw new Error(`Parent node ${a} not found`);if(a||e?.[t.id]){const{x:o,y:i,z:l}=WR(t,s,{...t.position,z:t[Ha]?.z??0},r);t.positionAbsolute={x:o,y:i},t[Ha].z=l,e?.[t.id]&&(t[Ha].isParent=!0)}})}function dS(s,r,e,t){const a=new Map,o={},i=t?1e3:0;return s.forEach(l=>{const c=(Nl(l.zIndex)?l.zIndex:0)+(l.selected?i:0),d=r.get(l.id),p={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},h=l.parentNode||l.parentId;h&&(o[h]=!0);const g=d?.type&&d?.type!==l.type;Object.defineProperty(p,Ha,{enumerable:!1,value:{handleBounds:g?void 0:d?.[Ha]?.handleBounds,z:c}}),a.set(l.id,p)}),qR(a,e,o),a}function GR(s,r={}){const{getNodes:e,width:t,height:a,minZoom:o,maxZoom:i,d3Zoom:l,d3Selection:c,fitViewOnInitDone:d,fitViewOnInit:p,nodeOrigin:h}=s(),g=r.initial&&!d&&p;if(l&&c&&(g||!r.initial)){const b=e().filter(w=>{const C=r.includeHiddenNodes?w.width&&w.height:!w.hidden;return r.nodes?.length?C&&r.nodes.some(k=>k.id===w.id):C}),v=b.every(w=>w.width&&w.height);if(b.length>0&&v){const w=Uj(b,h),{x:C,y:k,zoom:N}=AR(w,t,a,r.minZoom??o,r.maxZoom??i,r.padding??.1),O=Yd.translate(C,k).scale(N);return typeof r.duration=="number"&&r.duration>0?l.transform(op(c,r.duration),O):l.transform(c,O),!0}}return!1}function Yve(s,r){return s.forEach(e=>{const t=r.get(e.id);t&&r.set(t.id,{...t,[Ha]:t[Ha],selected:e.selected})}),new Map(r)}function Zve(s,r){return r.map(e=>{const t=s.find(a=>a.id===e.id);return t&&(e.selected=t.selected),e})}function Tv({changedNodes:s,changedEdges:r,get:e,set:t}){const{nodeInternals:a,edges:o,onNodesChange:i,onEdgesChange:l,hasDefaultNodes:c,hasDefaultEdges:d}=e();s?.length&&(c&&t({nodeInternals:Yve(s,a)}),i?.(s)),r?.length&&(d&&t({edges:Zve(r,o)}),l?.(r))}const Rh=()=>{},Xve={zoomIn:Rh,zoomOut:Rh,zoomTo:Rh,getZoom:()=>1,setViewport:Rh,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Rh,fitBounds:Rh,project:s=>s,screenToFlowPosition:s=>s,flowToScreenPosition:s=>s,viewportInitialized:!1},Qve=s=>({d3Zoom:s.d3Zoom,d3Selection:s.d3Selection}),Jve=()=>{const s=xo(),{d3Zoom:r,d3Selection:e}=ga(Qve,Eo);return u.useMemo(()=>e&&r?{zoomIn:a=>r.scaleBy(op(e,a?.duration),1.2),zoomOut:a=>r.scaleBy(op(e,a?.duration),1/1.2),zoomTo:(a,o)=>r.scaleTo(op(e,o?.duration),a),getZoom:()=>s.getState().transform[2],setViewport:(a,o)=>{const[i,l,c]=s.getState().transform,d=Yd.translate(a.x??i,a.y??l).scale(a.zoom??c);r.transform(op(e,o?.duration),d)},getViewport:()=>{const[a,o,i]=s.getState().transform;return{x:a,y:o,zoom:i}},fitView:a=>GR(s.getState,a),setCenter:(a,o,i)=>{const{width:l,height:c,maxZoom:d}=s.getState(),p=typeof i?.zoom<"u"?i.zoom:d,h=l/2-a*p,g=c/2-o*p,y=Yd.translate(h,g).scale(p);r.transform(op(e,i?.duration),y)},fitBounds:(a,o)=>{const{width:i,height:l,minZoom:c,maxZoom:d}=s.getState(),{x:p,y:h,zoom:g}=AR(a,i,l,c,d,o?.padding??.1),y=Yd.translate(p,h).scale(g);r.transform(op(e,o?.duration),y)},project:a=>{const{transform:o,snapToGrid:i,snapGrid:l}=s.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),o2(a,o,i,l)},screenToFlowPosition:a=>{const{transform:o,snapToGrid:i,snapGrid:l,domNode:c}=s.getState();if(!c)return a;const{x:d,y:p}=c.getBoundingClientRect(),h={x:a.x-d,y:a.y-p};return o2(h,o,i,l)},flowToScreenPosition:a=>{const{transform:o,domNode:i}=s.getState();if(!i)return a;const{x:l,y:c}=i.getBoundingClientRect(),d=TR(a,o);return{x:d.x+l,y:d.y+c}},viewportInitialized:!0}:Xve,[r,e])};function Zk(){const s=Jve(),r=xo(),e=u.useCallback(()=>r.getState().getNodes().map(v=>({...v})),[]),t=u.useCallback(v=>r.getState().nodeInternals.get(v),[]),a=u.useCallback(()=>{const{edges:v=[]}=r.getState();return v.map(w=>({...w}))},[]),o=u.useCallback(v=>{const{edges:w=[]}=r.getState();return w.find(C=>C.id===v)},[]),i=u.useCallback(v=>{const{getNodes:w,setNodes:C,hasDefaultNodes:k,onNodesChange:N}=r.getState(),O=w(),R=typeof v=="function"?v(O):v;if(k)C(R);else if(N){const L=R.length===0?O.map(B=>({type:"remove",id:B.id})):R.map(B=>({item:B,type:"reset"}));N(L)}},[]),l=u.useCallback(v=>{const{edges:w=[],setEdges:C,hasDefaultEdges:k,onEdgesChange:N}=r.getState(),O=typeof v=="function"?v(w):v;if(k)C(O);else if(N){const R=O.length===0?w.map(L=>({type:"remove",id:L.id})):O.map(L=>({item:L,type:"reset"}));N(R)}},[]),c=u.useCallback(v=>{const w=Array.isArray(v)?v:[v],{getNodes:C,setNodes:k,hasDefaultNodes:N,onNodesChange:O}=r.getState();if(N){const L=[...C(),...w];k(L)}else if(O){const R=w.map(L=>({item:L,type:"add"}));O(R)}},[]),d=u.useCallback(v=>{const w=Array.isArray(v)?v:[v],{edges:C=[],setEdges:k,hasDefaultEdges:N,onEdgesChange:O}=r.getState();if(N)k([...C,...w]);else if(O){const R=w.map(L=>({item:L,type:"add"}));O(R)}},[]),p=u.useCallback(()=>{const{getNodes:v,edges:w=[],transform:C}=r.getState(),[k,N,O]=C;return{nodes:v().map(R=>({...R})),edges:w.map(R=>({...R})),viewport:{x:k,y:N,zoom:O}}},[]),h=u.useCallback(({nodes:v,edges:w})=>{const{nodeInternals:C,getNodes:k,edges:N,hasDefaultNodes:O,hasDefaultEdges:R,onNodesDelete:L,onEdgesDelete:B,onNodesChange:G,onEdgesChange:$}=r.getState(),z=(v||[]).map(H=>H.id),Y=(w||[]).map(H=>H.id),M=k().reduce((H,D)=>{const X=D.parentNode||D.parentId,se=!z.includes(D.id)&&X&&H.find(xe=>xe.id===X);return(typeof D.deletable!="boolean"||D.deletable)&&(z.includes(D.id)||se)&&H.push(D),H},[]),q=N.filter(H=>typeof H.deletable=="boolean"?H.deletable:!0),P=q.filter(H=>Y.includes(H.id));if(M||P){const H=PR(M,q),D=[...P,...H],X=D.reduce((se,Q)=>(se.includes(Q.id)||se.push(Q.id),se),[]);if((R||O)&&(R&&r.setState({edges:N.filter(se=>!X.includes(se.id))}),O&&(M.forEach(se=>{C.delete(se.id)}),r.setState({nodeInternals:new Map(C)}))),X.length>0&&(B?.(D),$&&$(X.map(se=>({id:se,type:"remove"})))),M.length>0&&(L?.(M),G)){const se=M.map(Q=>({id:Q.id,type:"remove"}));G(se)}}},[]),g=u.useCallback(v=>{const w=bve(v),C=w?null:r.getState().nodeInternals.get(v.id);return!w&&!C?[null,null,w]:[w?v:D3(C),C,w]},[]),y=u.useCallback((v,w=!0,C)=>{const[k,N,O]=g(v);return k?(C||r.getState().getNodes()).filter(R=>{if(!O&&(R.id===N.id||!R.positionAbsolute))return!1;const L=D3(R),B=r2(L,k);return w&&B>0||B>=k.width*k.height}):[]},[]),b=u.useCallback((v,w,C=!0)=>{const[k]=g(v);if(!k)return!1;const N=r2(k,w);return C&&N>0||N>=k.width*k.height},[]);return u.useMemo(()=>({...s,getNodes:e,getNode:t,getEdges:a,getEdge:o,setNodes:i,setEdges:l,addNodes:c,addEdges:d,toObject:p,deleteElements:h,getIntersectingNodes:y,isNodeIntersecting:b}),[s,e,t,a,o,i,l,c,d,p,h,y,b])}const ebe={actInsideInputWithModifier:!1};var tbe=({deleteKeyCode:s,multiSelectionKeyCode:r})=>{const e=xo(),{deleteElements:t}=Zk(),a=mx(s,ebe),o=mx(r);u.useEffect(()=>{if(a){const{edges:i,getNodes:l}=e.getState(),c=l().filter(p=>p.selected),d=i.filter(p=>p.selected);t({nodes:c,edges:d}),e.setState({nodesSelectionActive:!1})}},[a]),u.useEffect(()=>{e.setState({multiSelectionActive:o})},[o])};function rbe(s){const r=xo();u.useEffect(()=>{let e;const t=()=>{if(!s.current)return;const a=Uk(s.current);(a.height===0||a.width===0)&&r.getState().onError?.("004",au.error004()),r.setState({width:a.width||500,height:a.height||500})};return t(),window.addEventListener("resize",t),s.current&&(e=new ResizeObserver(()=>t()),e.observe(s.current)),()=>{window.removeEventListener("resize",t),e&&s.current&&e.unobserve(s.current)}},[])}const Xk={position:"absolute",width:"100%",height:"100%",top:0,left:0},nbe=(s,r)=>s.x!==r.x||s.y!==r.y||s.zoom!==r.k,Ov=s=>({x:s.x,y:s.y,zoom:s.k}),Dh=(s,r)=>s.target.closest(`.${r}`),q3=(s,r)=>r===2&&Array.isArray(s)&&s.includes(2),G3=s=>{const r=s.ctrlKey&&Dw()?10:1;return-s.deltaY*(s.deltaMode===1?.05:s.deltaMode?1:.002)*r},sbe=s=>({d3Zoom:s.d3Zoom,d3Selection:s.d3Selection,d3ZoomHandler:s.d3ZoomHandler,userSelectionActive:s.userSelectionActive}),abe=({onMove:s,onMoveStart:r,onMoveEnd:e,onPaneContextMenu:t,zoomOnScroll:a=!0,zoomOnPinch:o=!0,panOnScroll:i=!1,panOnScrollSpeed:l=.5,panOnScrollMode:c=bp.Free,zoomOnDoubleClick:d=!0,elementsSelectable:p,panOnDrag:h=!0,defaultViewport:g,translateExtent:y,minZoom:b,maxZoom:v,zoomActivationKeyCode:w,preventScrolling:C=!0,children:k,noWheelClassName:N,noPanClassName:O})=>{const R=u.useRef(),L=xo(),B=u.useRef(!1),G=u.useRef(!1),$=u.useRef(null),z=u.useRef({x:0,y:0,zoom:0}),{d3Zoom:Y,d3Selection:M,d3ZoomHandler:q,userSelectionActive:P}=ga(sbe,Eo),H=mx(w),D=u.useRef(0),X=u.useRef(!1),se=u.useRef();return rbe($),u.useEffect(()=>{if($.current){const Q=$.current.getBoundingClientRect(),xe=gR().scaleExtent([b,v]).translateExtent(y),K=Cl($.current).call(xe),Z=Yd.translate(g.x,g.y).scale(Em(g.zoom,b,v)),ve=[[0,0],[Q.width,Q.height]],ae=xe.constrain()(Z,ve,y);xe.transform(K,ae),xe.wheelDelta(G3),L.setState({d3Zoom:xe,d3Selection:K,d3ZoomHandler:K.on("wheel.zoom"),transform:[ae.x,ae.y,ae.k],domNode:$.current.closest(".react-flow")})}},[]),u.useEffect(()=>{M&&Y&&(i&&!H&&!P?M.on("wheel.zoom",Q=>{if(Dh(Q,N))return!1;Q.preventDefault(),Q.stopImmediatePropagation();const xe=M.property("__zoom").k||1;if(Q.ctrlKey&&o){const we=rc(Q),Ae=G3(Q),ze=xe*Math.pow(2,Ae);Y.scaleTo(M,ze,we,Q);return}const K=Q.deltaMode===1?20:1;let Z=c===bp.Vertical?0:Q.deltaX*K,ve=c===bp.Horizontal?0:Q.deltaY*K;!Dw()&&Q.shiftKey&&c!==bp.Vertical&&(Z=Q.deltaY*K,ve=0),Y.translateBy(M,-(Z/xe)*l,-(ve/xe)*l,{internal:!0});const ae=Ov(M.property("__zoom")),{onViewportChangeStart:Se,onViewportChange:Pe,onViewportChangeEnd:$e}=L.getState();clearTimeout(se.current),X.current||(X.current=!0,r?.(Q,ae),Se?.(ae)),X.current&&(s?.(Q,ae),Pe?.(ae),se.current=setTimeout(()=>{e?.(Q,ae),$e?.(ae),X.current=!1},150))},{passive:!1}):typeof q<"u"&&M.on("wheel.zoom",function(Q,xe){if(!C&&Q.type==="wheel"&&!Q.ctrlKey||Dh(Q,N))return null;Q.preventDefault(),q.call(this,Q,xe)},{passive:!1}))},[P,i,c,M,Y,q,H,o,C,N,r,s,e]),u.useEffect(()=>{Y&&Y.on("start",Q=>{if(!Q.sourceEvent||Q.sourceEvent.internal)return null;D.current=Q.sourceEvent?.button;const{onViewportChangeStart:xe}=L.getState(),K=Ov(Q.transform);B.current=!0,z.current=K,Q.sourceEvent?.type==="mousedown"&&L.setState({paneDragging:!0}),xe?.(K),r?.(Q.sourceEvent,K)})},[Y,r]),u.useEffect(()=>{Y&&(P&&!B.current?Y.on("zoom",null):P||Y.on("zoom",Q=>{const{onViewportChange:xe}=L.getState();if(L.setState({transform:[Q.transform.x,Q.transform.y,Q.transform.k]}),G.current=!!(t&&q3(h,D.current??0)),(s||xe)&&!Q.sourceEvent?.internal){const K=Ov(Q.transform);xe?.(K),s?.(Q.sourceEvent,K)}}))},[P,Y,s,h,t]),u.useEffect(()=>{Y&&Y.on("end",Q=>{if(!Q.sourceEvent||Q.sourceEvent.internal)return null;const{onViewportChangeEnd:xe}=L.getState();if(B.current=!1,L.setState({paneDragging:!1}),t&&q3(h,D.current??0)&&!G.current&&t(Q.sourceEvent),G.current=!1,(e||xe)&&nbe(z.current,Q.transform)){const K=Ov(Q.transform);z.current=K,clearTimeout(R.current),R.current=setTimeout(()=>{xe?.(K),e?.(Q.sourceEvent,K)},i?150:0)}})},[Y,i,h,e,t]),u.useEffect(()=>{Y&&Y.filter(Q=>{const xe=H||a,K=o&&Q.ctrlKey;if((h===!0||Array.isArray(h)&&h.includes(1))&&Q.button===1&&Q.type==="mousedown"&&(Dh(Q,"react-flow__node")||Dh(Q,"react-flow__edge")))return!0;if(!h&&!xe&&!i&&!d&&!o||P||!d&&Q.type==="dblclick"||Dh(Q,N)&&Q.type==="wheel"||Dh(Q,O)&&(Q.type!=="wheel"||i&&Q.type==="wheel"&&!H)||!o&&Q.ctrlKey&&Q.type==="wheel"||!xe&&!i&&!K&&Q.type==="wheel"||!h&&(Q.type==="mousedown"||Q.type==="touchstart")||Array.isArray(h)&&!h.includes(Q.button)&&Q.type==="mousedown")return!1;const Z=Array.isArray(h)&&h.includes(Q.button)||!Q.button||Q.button<=1;return(!Q.ctrlKey||Q.type==="wheel")&&Z})},[P,Y,a,o,i,d,h,p,H]),pt.createElement("div",{className:"react-flow__renderer",ref:$,style:Xk},k)},obe=s=>({userSelectionActive:s.userSelectionActive,userSelectionRect:s.userSelectionRect});function ibe(){const{userSelectionActive:s,userSelectionRect:r}=ga(obe,Eo);return s&&r?pt.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:r.width,height:r.height,transform:`translate(${r.x}px, ${r.y}px)`}}):null}function K3(s,r){const e=r.parentNode||r.parentId,t=s.find(a=>a.id===e);if(t){const a=r.position.x+r.width-t.width,o=r.position.y+r.height-t.height;if(a>0||o>0||r.position.x<0||r.position.y<0){if(t.style={...t.style},t.style.width=t.style.width??t.width,t.style.height=t.style.height??t.height,a>0&&(t.style.width+=a),o>0&&(t.style.height+=o),r.position.x<0){const i=Math.abs(r.position.x);t.position.x=t.position.x-i,t.style.width+=i,r.position.x=0}if(r.position.y<0){const i=Math.abs(r.position.y);t.position.y=t.position.y-i,t.style.height+=i,r.position.y=0}t.width=t.style.width,t.height=t.style.height}}}function KR(s,r){if(s.some(t=>t.type==="reset"))return s.filter(t=>t.type==="reset").map(t=>t.item);const e=s.filter(t=>t.type==="add").map(t=>t.item);return r.reduce((t,a)=>{const o=s.filter(l=>l.id===a.id);if(o.length===0)return t.push(a),t;const i={...a};for(const l of o)if(l)switch(l.type){case"select":{i.selected=l.selected;break}case"position":{typeof l.position<"u"&&(i.position=l.position),typeof l.positionAbsolute<"u"&&(i.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(i.dragging=l.dragging),i.expandParent&&K3(t,i);break}case"dimensions":{typeof l.dimensions<"u"&&(i.width=l.dimensions.width,i.height=l.dimensions.height),typeof l.updateStyle<"u"&&(i.style={...i.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(i.resizing=l.resizing),i.expandParent&&K3(t,i);break}case"remove":return t}return t.push(i),t},e)}function YR(s,r){return KR(s,r)}function lbe(s,r){return KR(s,r)}const Gu=(s,r)=>({id:s,type:"select",selected:r});function im(s,r){return s.reduce((e,t)=>{const a=r.includes(t.id);return!t.selected&&a?(t.selected=!0,e.push(Gu(t.id,!0))):t.selected&&!a&&(t.selected=!1,e.push(Gu(t.id,!1))),e},[])}const uS=(s,r)=>e=>{e.target===r.current&&s?.(e)},cbe=s=>({userSelectionActive:s.userSelectionActive,elementsSelectable:s.elementsSelectable,dragging:s.paneDragging}),ZR=u.memo(({isSelecting:s,selectionMode:r=hx.Full,panOnDrag:e,onSelectionStart:t,onSelectionEnd:a,onPaneClick:o,onPaneContextMenu:i,onPaneScroll:l,onPaneMouseEnter:c,onPaneMouseMove:d,onPaneMouseLeave:p,children:h})=>{const g=u.useRef(null),y=xo(),b=u.useRef(0),v=u.useRef(0),w=u.useRef(),{userSelectionActive:C,elementsSelectable:k,dragging:N}=ga(cbe,Eo),O=()=>{y.setState({userSelectionActive:!1,userSelectionRect:null}),b.current=0,v.current=0},R=q=>{o?.(q),y.getState().resetSelectedElements(),y.setState({nodesSelectionActive:!1})},L=q=>{if(Array.isArray(e)&&e?.includes(2)){q.preventDefault();return}i?.(q)},B=l?q=>l(q):void 0,G=q=>{const{resetSelectedElements:P,domNode:H}=y.getState();if(w.current=H?.getBoundingClientRect(),!k||!s||q.button!==0||q.target!==g.current||!w.current)return;const{x:D,y:X}=sf(q,w.current);P(),y.setState({userSelectionRect:{width:0,height:0,startX:D,startY:X,x:D,y:X}}),t?.(q)},$=q=>{const{userSelectionRect:P,nodeInternals:H,edges:D,transform:X,onNodesChange:se,onEdgesChange:Q,nodeOrigin:xe,getNodes:K}=y.getState();if(!s||!w.current||!P)return;y.setState({userSelectionActive:!0,nodesSelectionActive:!1});const Z=sf(q,w.current),ve=P.startX??0,ae=P.startY??0,Se={...P,x:Z.x<ve?Z.x:ve,y:Z.y<ae?Z.y:ae,width:Math.abs(Z.x-ve),height:Math.abs(Z.y-ae)},Pe=K(),$e=OR(H,Se,X,r===hx.Partial,!0,xe),we=PR($e,D).map(ze=>ze.id),Ae=$e.map(ze=>ze.id);if(b.current!==Ae.length){b.current=Ae.length;const ze=im(Pe,Ae);ze.length&&se?.(ze)}if(v.current!==we.length){v.current=we.length;const ze=im(D,we);ze.length&&Q?.(ze)}y.setState({userSelectionRect:Se})},z=q=>{if(q.button!==0)return;const{userSelectionRect:P}=y.getState();!C&&P&&q.target===g.current&&R?.(q),y.setState({nodesSelectionActive:b.current>0}),O(),a?.(q)},Y=q=>{C&&(y.setState({nodesSelectionActive:b.current>0}),a?.(q)),O()},M=k&&(s||C);return pt.createElement("div",{className:$o(["react-flow__pane",{dragging:N,selection:s}]),onClick:M?void 0:uS(R,g),onContextMenu:uS(L,g),onWheel:uS(B,g),onMouseEnter:M?void 0:c,onMouseDown:M?G:void 0,onMouseMove:M?$:d,onMouseUp:M?z:void 0,onMouseLeave:M?Y:p,ref:g,style:Xk},h,pt.createElement(ibe,null))});ZR.displayName="Pane";function XR(s,r){const e=s.parentNode||s.parentId;if(!e)return!1;const t=r.get(e);return t?t.selected?!0:XR(t,r):!1}function Y3(s,r,e){let t=s;do{if(t?.matches(r))return!0;if(t===e.current)return!1;t=t.parentElement}while(t);return!1}function dbe(s,r,e,t){return Array.from(s.values()).filter(a=>(a.selected||a.id===t)&&(!a.parentNode||a.parentId||!XR(a,s))&&(a.draggable||r&&typeof a.draggable>"u")).map(a=>({id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:e.x-(a.positionAbsolute?.x??0),y:e.y-(a.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}))}function ube(s,r){return!r||r==="parent"?r:[r[0],[r[1][0]-(s.width||0),r[1][1]-(s.height||0)]]}function QR(s,r,e,t,a=[0,0],o){const i=ube(s,s.extent||t);let l=i;const c=s.parentNode||s.parentId;if(s.extent==="parent"&&!s.expandParent)if(c&&s.width&&s.height){const h=e.get(c),{x:g,y}=Sp(h,a).positionAbsolute;l=h&&Nl(g)&&Nl(y)&&Nl(h.width)&&Nl(h.height)?[[g+s.width*a[0],y+s.height*a[1]],[g+h.width-s.width+s.width*a[0],y+h.height-s.height+s.height*a[1]]]:l}else o?.("005",au.error005()),l=i;else if(s.extent&&c&&s.extent!=="parent"){const h=e.get(c),{x:g,y}=Sp(h,a).positionAbsolute;l=[[s.extent[0][0]+g,s.extent[0][1]+y],[s.extent[1][0]+g,s.extent[1][1]+y]]}let d={x:0,y:0};if(c){const h=e.get(c);d=Sp(h,a).positionAbsolute}const p=l&&l!=="parent"?Vk(r,l):r;return{position:{x:p.x-d.x,y:p.y-d.y},positionAbsolute:p}}function fS({nodeId:s,dragItems:r,nodeInternals:e}){const t=r.map(a=>({...e.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[s?t.find(a=>a.id===s):t[0],t]}const Z3=(s,r,e,t)=>{const a=r.querySelectorAll(s);if(!a||!a.length)return null;const o=Array.from(a),i=r.getBoundingClientRect(),l={x:i.width*t[0],y:i.height*t[1]};return o.map(c=>{const d=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(d.left-i.left-l.x)/e,y:(d.top-i.top-l.y)/e,...Uk(c)}})};function uy(s,r,e){return e===void 0?e:t=>{const a=r().nodeInternals.get(s);a&&e(t,{...a})}}function l2({id:s,store:r,unselect:e=!1,nodeRef:t}){const{addSelectedNodes:a,unselectNodesAndEdges:o,multiSelectionActive:i,nodeInternals:l,onError:c}=r.getState(),d=l.get(s);if(!d){c?.("012",au.error012(s));return}r.setState({nodesSelectionActive:!1}),d.selected?(e||d.selected&&i)&&(o({nodes:[d],edges:[]}),requestAnimationFrame(()=>t?.current?.blur())):a([s])}function fbe(){const s=xo();return u.useCallback(({sourceEvent:e})=>{const{transform:t,snapGrid:a,snapToGrid:o}=s.getState(),i=e.touches?e.touches[0].clientX:e.clientX,l=e.touches?e.touches[0].clientY:e.clientY,c={x:(i-t[0])/t[2],y:(l-t[1])/t[2]};return{xSnapped:o?a[0]*Math.round(c.x/a[0]):c.x,ySnapped:o?a[1]*Math.round(c.y/a[1]):c.y,...c}},[])}function pS(s){return(r,e,t)=>s?.(r,t)}function JR({nodeRef:s,disabled:r=!1,noDragClassName:e,handleSelector:t,nodeId:a,isSelectable:o,selectNodesOnDrag:i}){const l=xo(),[c,d]=u.useState(!1),p=u.useRef([]),h=u.useRef({x:null,y:null}),g=u.useRef(0),y=u.useRef(null),b=u.useRef({x:0,y:0}),v=u.useRef(null),w=u.useRef(!1),C=u.useRef(!1),k=u.useRef(!1),N=fbe();return u.useEffect(()=>{if(s?.current){const O=Cl(s.current),R=({x:G,y:$})=>{const{nodeInternals:z,onNodeDrag:Y,onSelectionDrag:M,updateNodePositions:q,nodeExtent:P,snapGrid:H,snapToGrid:D,nodeOrigin:X,onError:se}=l.getState();h.current={x:G,y:$};let Q=!1,xe={x:0,y:0,x2:0,y2:0};if(p.current.length>1&&P){const Z=Uj(p.current,X);xe=px(Z)}if(p.current=p.current.map(Z=>{const ve={x:G-Z.distance.x,y:$-Z.distance.y};D&&(ve.x=H[0]*Math.round(ve.x/H[0]),ve.y=H[1]*Math.round(ve.y/H[1]));const ae=[[P[0][0],P[0][1]],[P[1][0],P[1][1]]];p.current.length>1&&P&&!Z.extent&&(ae[0][0]=Z.positionAbsolute.x-xe.x+P[0][0],ae[1][0]=Z.positionAbsolute.x+(Z.width??0)-xe.x2+P[1][0],ae[0][1]=Z.positionAbsolute.y-xe.y+P[0][1],ae[1][1]=Z.positionAbsolute.y+(Z.height??0)-xe.y2+P[1][1]);const Se=QR(Z,ve,z,ae,X,se);return Q=Q||Z.position.x!==Se.position.x||Z.position.y!==Se.position.y,Z.position=Se.position,Z.positionAbsolute=Se.positionAbsolute,Z}),!Q)return;q(p.current,!0,!0),d(!0);const K=a?Y:pS(M);if(K&&v.current){const[Z,ve]=fS({nodeId:a,dragItems:p.current,nodeInternals:z});K(v.current,Z,ve)}},L=()=>{if(!y.current)return;const[G,$]=xR(b.current,y.current);if(G!==0||$!==0){const{transform:z,panBy:Y}=l.getState();h.current.x=(h.current.x??0)-G/z[2],h.current.y=(h.current.y??0)-$/z[2],Y({x:G,y:$})&&R(h.current)}g.current=requestAnimationFrame(L)},B=G=>{const{nodeInternals:$,multiSelectionActive:z,nodesDraggable:Y,unselectNodesAndEdges:M,onNodeDragStart:q,onSelectionDragStart:P}=l.getState();C.current=!0;const H=a?q:pS(P);(!i||!o)&&!z&&a&&($.get(a)?.selected||M()),a&&o&&i&&l2({id:a,store:l,nodeRef:s});const D=N(G);if(h.current=D,p.current=dbe($,Y,D,a),H&&p.current){const[X,se]=fS({nodeId:a,dragItems:p.current,nodeInternals:$});H(G.sourceEvent,X,se)}};if(r)O.on(".drag",null);else{const G=Sxe().on("start",$=>{const{domNode:z,nodeDragThreshold:Y}=l.getState();Y===0&&B($),k.current=!1;const M=N($);h.current=M,y.current=z?.getBoundingClientRect()||null,b.current=sf($.sourceEvent,y.current)}).on("drag",$=>{const z=N($),{autoPanOnNodeDrag:Y,nodeDragThreshold:M}=l.getState();if($.sourceEvent.type==="touchmove"&&$.sourceEvent.touches.length>1&&(k.current=!0),!k.current){if(!w.current&&C.current&&Y&&(w.current=!0,L()),!C.current){const q=z.xSnapped-(h?.current?.x??0),P=z.ySnapped-(h?.current?.y??0);Math.sqrt(q*q+P*P)>M&&B($)}(h.current.x!==z.xSnapped||h.current.y!==z.ySnapped)&&p.current&&C.current&&(v.current=$.sourceEvent,b.current=sf($.sourceEvent,y.current),R(z))}}).on("end",$=>{if(!(!C.current||k.current)&&(d(!1),w.current=!1,C.current=!1,cancelAnimationFrame(g.current),p.current)){const{updateNodePositions:z,nodeInternals:Y,onNodeDragStop:M,onSelectionDragStop:q}=l.getState(),P=a?M:pS(q);if(z(p.current,!1,!1),P){const[H,D]=fS({nodeId:a,dragItems:p.current,nodeInternals:Y});P($.sourceEvent,H,D)}}}).filter($=>{const z=$.target;return!$.button&&(!e||!Y3(z,`.${e}`,s))&&(!t||Y3(z,t,s))});return O.call(G),()=>{O.on(".drag",null)}}}},[s,r,e,t,o,l,a,i,N]),c}function eD(){const s=xo();return u.useCallback(e=>{const{nodeInternals:t,nodeExtent:a,updateNodePositions:o,getNodes:i,snapToGrid:l,snapGrid:c,onError:d,nodesDraggable:p}=s.getState(),h=i().filter(k=>k.selected&&(k.draggable||p&&typeof k.draggable>"u")),g=l?c[0]:5,y=l?c[1]:5,b=e.isShiftPressed?4:1,v=e.x*g*b,w=e.y*y*b,C=h.map(k=>{if(k.positionAbsolute){const N={x:k.positionAbsolute.x+v,y:k.positionAbsolute.y+w};l&&(N.x=c[0]*Math.round(N.x/c[0]),N.y=c[1]*Math.round(N.y/c[1]));const{positionAbsolute:O,position:R}=QR(k,N,t,a,void 0,d);k.position=R,k.positionAbsolute=O}return k});o(C,!0,!1)},[])}const ym={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var fy=s=>{const r=({id:e,type:t,data:a,xPos:o,yPos:i,xPosOrigin:l,yPosOrigin:c,selected:d,onClick:p,onMouseEnter:h,onMouseMove:g,onMouseLeave:y,onContextMenu:b,onDoubleClick:v,style:w,className:C,isDraggable:k,isSelectable:N,isConnectable:O,isFocusable:R,selectNodesOnDrag:L,sourcePosition:B,targetPosition:G,hidden:$,resizeObserver:z,dragHandle:Y,zIndex:M,isParent:q,noDragClassName:P,noPanClassName:H,initialized:D,disableKeyboardA11y:X,ariaLabel:se,rfId:Q,hasHandleBounds:xe})=>{const K=xo(),Z=u.useRef(null),ve=u.useRef(null),ae=u.useRef(B),Se=u.useRef(G),Pe=u.useRef(t),$e=N||k||p||h||g||y,we=eD(),Ae=uy(e,K.getState,h),ze=uy(e,K.getState,g),Ge=uy(e,K.getState,y),Ue=uy(e,K.getState,b),ht=uy(e,K.getState,v),ee=J=>{const{nodeDragThreshold:I}=K.getState();if(N&&(!L||!k||I>0)&&l2({id:e,store:K,nodeRef:Z}),p){const V=K.getState().nodeInternals.get(e);V&&p(J,{...V})}},ue=J=>{if(!n2(J)&&!X)if(jR.includes(J.key)&&N){const I=J.key==="Escape";l2({id:e,store:K,unselect:I,nodeRef:Z})}else k&&d&&Object.prototype.hasOwnProperty.call(ym,J.key)&&(K.setState({ariaLiveMessage:`Moved selected node ${J.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~o}, y: ${~~i}`}),we({x:ym[J.key].x,y:ym[J.key].y,isShiftPressed:J.shiftKey}))};u.useEffect(()=>()=>{ve.current&&(z?.unobserve(ve.current),ve.current=null)},[]),u.useEffect(()=>{if(Z.current&&!$){const J=Z.current;(!D||!xe||ve.current!==J)&&(ve.current&&z?.unobserve(ve.current),z?.observe(J),ve.current=J)}},[$,D,xe]),u.useEffect(()=>{const J=Pe.current!==t,I=ae.current!==B,V=Se.current!==G;Z.current&&(J||I||V)&&(J&&(Pe.current=t),I&&(ae.current=B),V&&(Se.current=G),K.getState().updateNodeDimensions([{id:e,nodeElement:Z.current,forceUpdate:!0}]))},[e,t,B,G]);const Oe=JR({nodeRef:Z,disabled:$||!k,noDragClassName:P,handleSelector:Y,nodeId:e,isSelectable:N,selectNodesOnDrag:L});return $?null:pt.createElement("div",{className:$o(["react-flow__node",`react-flow__node-${t}`,{[H]:k},C,{selected:d,selectable:N,parent:q,dragging:Oe}]),ref:Z,style:{zIndex:M,transform:`translate(${l}px,${c}px)`,pointerEvents:$e?"all":"none",visibility:D?"visible":"hidden",...w},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:Ae,onMouseMove:ze,onMouseLeave:Ge,onContextMenu:Ue,onClick:ee,onDoubleClick:ht,onKeyDown:R?ue:void 0,tabIndex:R?0:void 0,role:R?"button":void 0,"aria-describedby":X?void 0:`${VR}-${Q}`,"aria-label":se},pt.createElement(_ve,{value:e},pt.createElement(s,{id:e,data:a,type:t,xPos:o,yPos:i,selected:d,isConnectable:O,sourcePosition:B,targetPosition:G,dragging:Oe,dragHandle:Y,zIndex:M})))};return r.displayName="NodeWrapper",u.memo(r)};const pbe=s=>{const r=s.getNodes().filter(e=>e.selected);return{...Uj(r,s.nodeOrigin),transformString:`translate(${s.transform[0]}px,${s.transform[1]}px) scale(${s.transform[2]})`,userSelectionActive:s.userSelectionActive}};function hbe({onSelectionContextMenu:s,noPanClassName:r,disableKeyboardA11y:e}){const t=xo(),{width:a,height:o,x:i,y:l,transformString:c,userSelectionActive:d}=ga(pbe,Eo),p=eD(),h=u.useRef(null);if(u.useEffect(()=>{e||h.current?.focus({preventScroll:!0})},[e]),JR({nodeRef:h}),d||!a||!o)return null;const g=s?b=>{const v=t.getState().getNodes().filter(w=>w.selected);s(b,v)}:void 0,y=b=>{Object.prototype.hasOwnProperty.call(ym,b.key)&&p({x:ym[b.key].x,y:ym[b.key].y,isShiftPressed:b.shiftKey})};return pt.createElement("div",{className:$o(["react-flow__nodesselection","react-flow__container",r]),style:{transform:c}},pt.createElement("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:g,tabIndex:e?void 0:-1,onKeyDown:e?void 0:y,style:{width:a,height:o,top:l,left:i}}))}var mbe=u.memo(hbe);const gbe=s=>s.nodesSelectionActive,tD=({children:s,onPaneClick:r,onPaneMouseEnter:e,onPaneMouseMove:t,onPaneMouseLeave:a,onPaneContextMenu:o,onPaneScroll:i,deleteKeyCode:l,onMove:c,onMoveStart:d,onMoveEnd:p,selectionKeyCode:h,selectionOnDrag:g,selectionMode:y,onSelectionStart:b,onSelectionEnd:v,multiSelectionKeyCode:w,panActivationKeyCode:C,zoomActivationKeyCode:k,elementsSelectable:N,zoomOnScroll:O,zoomOnPinch:R,panOnScroll:L,panOnScrollSpeed:B,panOnScrollMode:G,zoomOnDoubleClick:$,panOnDrag:z,defaultViewport:Y,translateExtent:M,minZoom:q,maxZoom:P,preventScrolling:H,onSelectionContextMenu:D,noWheelClassName:X,noPanClassName:se,disableKeyboardA11y:Q})=>{const xe=ga(gbe),K=mx(h),Z=mx(C),ve=Z||z,ae=Z||L,Se=K||g&&ve!==!0;return tbe({deleteKeyCode:l,multiSelectionKeyCode:w}),pt.createElement(abe,{onMove:c,onMoveStart:d,onMoveEnd:p,onPaneContextMenu:o,elementsSelectable:N,zoomOnScroll:O,zoomOnPinch:R,panOnScroll:ae,panOnScrollSpeed:B,panOnScrollMode:G,zoomOnDoubleClick:$,panOnDrag:!K&&ve,defaultViewport:Y,translateExtent:M,minZoom:q,maxZoom:P,zoomActivationKeyCode:k,preventScrolling:H,noWheelClassName:X,noPanClassName:se},pt.createElement(ZR,{onSelectionStart:b,onSelectionEnd:v,onPaneClick:r,onPaneMouseEnter:e,onPaneMouseMove:t,onPaneMouseLeave:a,onPaneContextMenu:o,onPaneScroll:i,panOnDrag:ve,isSelecting:!!Se,selectionMode:y},s,xe&&pt.createElement(mbe,{onSelectionContextMenu:D,noPanClassName:se,disableKeyboardA11y:Q})))};tD.displayName="FlowRenderer";var ybe=u.memo(tD);function xbe(s){return ga(u.useCallback(e=>s?OR(e.nodeInternals,{x:0,y:0,width:e.width,height:e.height},e.transform,!0):e.getNodes(),[s]))}function vbe(s){const r={input:fy(s.input||BR),default:fy(s.default||i2),output:fy(s.output||$R),group:fy(s.group||Yk)},e={},t=Object.keys(s).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,o)=>(a[o]=fy(s[o]||i2),a),e);return{...r,...t}}const bbe=({x:s,y:r,width:e,height:t,origin:a})=>!e||!t?{x:s,y:r}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:s,y:r}:{x:s-e*a[0],y:r-t*a[1]},wbe=s=>({nodesDraggable:s.nodesDraggable,nodesConnectable:s.nodesConnectable,nodesFocusable:s.nodesFocusable,elementsSelectable:s.elementsSelectable,updateNodeDimensions:s.updateNodeDimensions,onError:s.onError}),rD=s=>{const{nodesDraggable:r,nodesConnectable:e,nodesFocusable:t,elementsSelectable:a,updateNodeDimensions:o,onError:i}=ga(wbe,Eo),l=xbe(s.onlyRenderVisibleElements),c=u.useRef(),d=u.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const p=new ResizeObserver(h=>{const g=h.map(y=>({id:y.target.getAttribute("data-id"),nodeElement:y.target,forceUpdate:!0}));o(g)});return c.current=p,p},[]);return u.useEffect(()=>()=>{c?.current?.disconnect()},[]),pt.createElement("div",{className:"react-flow__nodes",style:Xk},l.map(p=>{let h=p.type||"default";s.nodeTypes[h]||(i?.("003",au.error003(h)),h="default");const g=s.nodeTypes[h]||s.nodeTypes.default,y=!!(p.draggable||r&&typeof p.draggable>"u"),b=!!(p.selectable||a&&typeof p.selectable>"u"),v=!!(p.connectable||e&&typeof p.connectable>"u"),w=!!(p.focusable||t&&typeof p.focusable>"u"),C=s.nodeExtent?Vk(p.positionAbsolute,s.nodeExtent):p.positionAbsolute,k=C?.x??0,N=C?.y??0,O=bbe({x:k,y:N,width:p.width??0,height:p.height??0,origin:s.nodeOrigin});return pt.createElement(g,{key:p.id,id:p.id,className:p.className,style:p.style,type:h,data:p.data,sourcePosition:p.sourcePosition||cn.Bottom,targetPosition:p.targetPosition||cn.Top,hidden:p.hidden,xPos:k,yPos:N,xPosOrigin:O.x,yPosOrigin:O.y,selectNodesOnDrag:s.selectNodesOnDrag,onClick:s.onNodeClick,onMouseEnter:s.onNodeMouseEnter,onMouseMove:s.onNodeMouseMove,onMouseLeave:s.onNodeMouseLeave,onContextMenu:s.onNodeContextMenu,onDoubleClick:s.onNodeDoubleClick,selected:!!p.selected,isDraggable:y,isSelectable:b,isConnectable:v,isFocusable:w,resizeObserver:d,dragHandle:p.dragHandle,zIndex:p[Ha]?.z??0,isParent:!!p[Ha]?.isParent,noDragClassName:s.noDragClassName,noPanClassName:s.noPanClassName,initialized:!!p.width&&!!p.height,rfId:s.rfId,disableKeyboardA11y:s.disableKeyboardA11y,ariaLabel:p.ariaLabel,hasHandleBounds:!!p[Ha]?.handleBounds})}))};rD.displayName="NodeRenderer";var jbe=u.memo(rD);const Cbe=(s,r,e)=>e===cn.Left?s-r:e===cn.Right?s+r:s,Sbe=(s,r,e)=>e===cn.Top?s-r:e===cn.Bottom?s+r:s,X3="react-flow__edgeupdater",Q3=({position:s,centerX:r,centerY:e,radius:t=10,onMouseDown:a,onMouseEnter:o,onMouseOut:i,type:l})=>pt.createElement("circle",{onMouseDown:a,onMouseEnter:o,onMouseOut:i,className:$o([X3,`${X3}-${l}`]),cx:Cbe(r,t,s),cy:Sbe(e,t,s),r:t,stroke:"transparent",fill:"transparent"}),Nbe=()=>!0;var Lh=s=>{const r=({id:e,className:t,type:a,data:o,onClick:i,onEdgeDoubleClick:l,selected:c,animated:d,label:p,labelStyle:h,labelShowBg:g,labelBgStyle:y,labelBgPadding:b,labelBgBorderRadius:v,style:w,source:C,target:k,sourceX:N,sourceY:O,targetX:R,targetY:L,sourcePosition:B,targetPosition:G,elementsSelectable:$,hidden:z,sourceHandleId:Y,targetHandleId:M,onContextMenu:q,onMouseEnter:P,onMouseMove:H,onMouseLeave:D,reconnectRadius:X,onReconnect:se,onReconnectStart:Q,onReconnectEnd:xe,markerEnd:K,markerStart:Z,rfId:ve,ariaLabel:ae,isFocusable:Se,isReconnectable:Pe,pathOptions:$e,interactionWidth:we,disableKeyboardA11y:Ae})=>{const ze=u.useRef(null),[Ge,Ue]=u.useState(!1),[ht,ee]=u.useState(!1),ue=xo(),Oe=u.useMemo(()=>`url('#${a2(Z,ve)}')`,[Z,ve]),J=u.useMemo(()=>`url('#${a2(K,ve)}')`,[K,ve]);if(z)return null;const I=le=>{const{edges:Ye,addSelectedEdges:De,unselectNodesAndEdges:ct,multiSelectionActive:ot}=ue.getState(),dt=Ye.find(Ke=>Ke.id===e);dt&&($&&(ue.setState({nodesSelectionActive:!1}),dt.selected&&ot?(ct({nodes:[],edges:[dt]}),ze.current?.blur()):De([e])),i&&i(le,dt))},V=dy(e,ue.getState,l),re=dy(e,ue.getState,q),pe=dy(e,ue.getState,P),ge=dy(e,ue.getState,H),Ce=dy(e,ue.getState,D),he=(le,Ye)=>{if(le.button!==0)return;const{edges:De,isValidConnection:ct}=ue.getState(),ot=Ye?k:C,dt=(Ye?M:Y)||null,Ke=Ye?"target":"source",kt=ct||Nbe,At=Ye,xt=De.find(zt=>zt.id===e);ee(!0),Q?.(le,xt,Ke);const Xt=zt=>{ee(!1),xe?.(zt,xt,Ke)};RR({event:le,handleId:dt,nodeId:ot,onConnect:zt=>se?.(xt,zt),isTarget:At,getState:ue.getState,setState:ue.setState,isValidConnection:kt,edgeUpdaterType:Ke,onReconnectEnd:Xt})},ie=le=>he(le,!0),Fe=le=>he(le,!1),We=()=>Ue(!0),Qe=()=>Ue(!1),de=!$&&!i,Ee=le=>{if(!Ae&&jR.includes(le.key)&&$){const{unselectNodesAndEdges:Ye,addSelectedEdges:De,edges:ct}=ue.getState();le.key==="Escape"?(ze.current?.blur(),Ye({edges:[ct.find(dt=>dt.id===e)]})):De([e])}};return pt.createElement("g",{className:$o(["react-flow__edge",`react-flow__edge-${a}`,t,{selected:c,animated:d,inactive:de,updating:Ge}]),onClick:I,onDoubleClick:V,onContextMenu:re,onMouseEnter:pe,onMouseMove:ge,onMouseLeave:Ce,onKeyDown:Se?Ee:void 0,tabIndex:Se?0:void 0,role:Se?"button":"img","data-testid":`rf__edge-${e}`,"aria-label":ae===null?void 0:ae||`Edge from ${C} to ${k}`,"aria-describedby":Se?`${HR}-${ve}`:void 0,ref:ze},!ht&&pt.createElement(s,{id:e,source:C,target:k,selected:c,animated:d,label:p,labelStyle:h,labelShowBg:g,labelBgStyle:y,labelBgPadding:b,labelBgBorderRadius:v,data:o,style:w,sourceX:N,sourceY:O,targetX:R,targetY:L,sourcePosition:B,targetPosition:G,sourceHandleId:Y,targetHandleId:M,markerStart:Oe,markerEnd:J,pathOptions:$e,interactionWidth:we}),Pe&&pt.createElement(pt.Fragment,null,(Pe==="source"||Pe===!0)&&pt.createElement(Q3,{position:B,centerX:N,centerY:O,radius:X,onMouseDown:ie,onMouseEnter:We,onMouseOut:Qe,type:"source"}),(Pe==="target"||Pe===!0)&&pt.createElement(Q3,{position:G,centerX:R,centerY:L,radius:X,onMouseDown:Fe,onMouseEnter:We,onMouseOut:Qe,type:"target"})))};return r.displayName="EdgeWrapper",u.memo(r)};function kbe(s){const r={default:Lh(s.default||Fw),straight:Lh(s.bezier||qk),step:Lh(s.step||Wk),smoothstep:Lh(s.step||$j),simplebezier:Lh(s.simplebezier||Hk)},e={},t=Object.keys(s).filter(a=>!["default","bezier"].includes(a)).reduce((a,o)=>(a[o]=Lh(s[o]||Fw),a),e);return{...r,...t}}function J3(s,r,e=null){const t=(e?.x||0)+r.x,a=(e?.y||0)+r.y,o=e?.width||r.width,i=e?.height||r.height;switch(s){case cn.Top:return{x:t+o/2,y:a};case cn.Right:return{x:t+o,y:a+i/2};case cn.Bottom:return{x:t+o/2,y:a+i};case cn.Left:return{x:t,y:a+i/2}}}function eO(s,r){return s?s.length===1||!r?s[0]:r&&s.find(e=>e.id===r)||null:null}const _be=(s,r,e,t,a,o)=>{const i=J3(e,s,r),l=J3(o,t,a);return{sourceX:i.x,sourceY:i.y,targetX:l.x,targetY:l.y}};function Ebe({sourcePos:s,targetPos:r,sourceWidth:e,sourceHeight:t,targetWidth:a,targetHeight:o,width:i,height:l,transform:c}){const d={x:Math.min(s.x,r.x),y:Math.min(s.y,r.y),x2:Math.max(s.x+e,r.x+a),y2:Math.max(s.y+t,r.y+o)};d.x===d.x2&&(d.x2+=1),d.y===d.y2&&(d.y2+=1);const p=px({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:i/c[2],height:l/c[2]}),h=Math.max(0,Math.min(p.x2,d.x2)-Math.max(p.x,d.x)),g=Math.max(0,Math.min(p.y2,d.y2)-Math.max(p.y,d.y));return Math.ceil(h*g)>0}function tO(s){const r=s?.[Ha]?.handleBounds||null,e=r&&s?.width&&s?.height&&typeof s?.positionAbsolute?.x<"u"&&typeof s?.positionAbsolute?.y<"u";return[{x:s?.positionAbsolute?.x||0,y:s?.positionAbsolute?.y||0,width:s?.width||0,height:s?.height||0},r,!!e]}const Tbe=[{level:0,isMaxLevel:!0,edges:[]}];function Obe(s,r,e=!1){let t=-1;const a=s.reduce((i,l)=>{const c=Nl(l.zIndex);let d=c?l.zIndex:0;if(e){const p=r.get(l.target),h=r.get(l.source),g=l.selected||p?.selected||h?.selected,y=Math.max(h?.[Ha]?.z||0,p?.[Ha]?.z||0,1e3);d=(c?l.zIndex:0)+(g?y:0)}return i[d]?i[d].push(l):i[d]=[l],t=d>t?d:t,i},{}),o=Object.entries(a).map(([i,l])=>{const c=+i;return{edges:l,level:c,isMaxLevel:c===t}});return o.length===0?Tbe:o}function Pbe(s,r,e){const t=ga(u.useCallback(a=>s?a.edges.filter(o=>{const i=r.get(o.source),l=r.get(o.target);return i?.width&&i?.height&&l?.width&&l?.height&&Ebe({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:l.width,targetHeight:l.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[s,r]));return Obe(t,r,e)}const Abe=({color:s="none",strokeWidth:r=1})=>pt.createElement("polyline",{style:{stroke:s,strokeWidth:r},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Mbe=({color:s="none",strokeWidth:r=1})=>pt.createElement("polyline",{style:{stroke:s,fill:s,strokeWidth:r},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),rO={[Lw.Arrow]:Abe,[Lw.ArrowClosed]:Mbe};function Ibe(s){const r=xo();return u.useMemo(()=>Object.prototype.hasOwnProperty.call(rO,s)?rO[s]:(r.getState().onError?.("009",au.error009(s)),null),[s])}const Rbe=({id:s,type:r,color:e,width:t=12.5,height:a=12.5,markerUnits:o="strokeWidth",strokeWidth:i,orient:l="auto-start-reverse"})=>{const c=Ibe(r);return c?pt.createElement("marker",{className:"react-flow__arrowhead",id:s,markerWidth:`${t}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:l,refX:"0",refY:"0"},pt.createElement(c,{color:e,strokeWidth:i})):null},Dbe=({defaultColor:s,rfId:r})=>e=>{const t=[];return e.edges.reduce((a,o)=>([o.markerStart,o.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const l=a2(i,r);t.includes(l)||(a.push({id:l,color:i.color||s,...i}),t.push(l))}}),a),[]).sort((a,o)=>a.id.localeCompare(o.id))},nD=({defaultColor:s,rfId:r})=>{const e=ga(u.useCallback(Dbe({defaultColor:s,rfId:r}),[s,r]),(t,a)=>!(t.length!==a.length||t.some((o,i)=>o.id!==a[i].id)));return pt.createElement("defs",null,e.map(t=>pt.createElement(Rbe,{id:t.id,key:t.id,type:t.type,color:t.color,width:t.width,height:t.height,markerUnits:t.markerUnits,strokeWidth:t.strokeWidth,orient:t.orient})))};nD.displayName="MarkerDefinitions";var Lbe=u.memo(nD);const Fbe=s=>({nodesConnectable:s.nodesConnectable,edgesFocusable:s.edgesFocusable,edgesUpdatable:s.edgesUpdatable,elementsSelectable:s.elementsSelectable,width:s.width,height:s.height,connectionMode:s.connectionMode,nodeInternals:s.nodeInternals,onError:s.onError}),sD=({defaultMarkerColor:s,onlyRenderVisibleElements:r,elevateEdgesOnSelect:e,rfId:t,edgeTypes:a,noPanClassName:o,onEdgeContextMenu:i,onEdgeMouseEnter:l,onEdgeMouseMove:c,onEdgeMouseLeave:d,onEdgeClick:p,onEdgeDoubleClick:h,onReconnect:g,onReconnectStart:y,onReconnectEnd:b,reconnectRadius:v,children:w,disableKeyboardA11y:C})=>{const{edgesFocusable:k,edgesUpdatable:N,elementsSelectable:O,width:R,height:L,connectionMode:B,nodeInternals:G,onError:$}=ga(Fbe,Eo),z=Pbe(r,G,e);return R?pt.createElement(pt.Fragment,null,z.map(({level:Y,edges:M,isMaxLevel:q})=>pt.createElement("svg",{key:Y,style:{zIndex:Y},width:R,height:L,className:"react-flow__edges react-flow__container"},q&&pt.createElement(Lbe,{defaultColor:s,rfId:t}),pt.createElement("g",null,M.map(P=>{const[H,D,X]=tO(G.get(P.source)),[se,Q,xe]=tO(G.get(P.target));if(!X||!xe)return null;let K=P.type||"default";a[K]||($?.("011",au.error011(K)),K="default");const Z=a[K]||a.default,ve=B===Dp.Strict?Q.target:(Q.target??[]).concat(Q.source??[]),ae=eO(D.source,P.sourceHandle),Se=eO(ve,P.targetHandle),Pe=ae?.position||cn.Bottom,$e=Se?.position||cn.Top,we=!!(P.focusable||k&&typeof P.focusable>"u"),Ae=P.reconnectable||P.updatable,ze=typeof g<"u"&&(Ae||N&&typeof Ae>"u");if(!ae||!Se)return $?.("008",au.error008(ae,P)),null;const{sourceX:Ge,sourceY:Ue,targetX:ht,targetY:ee}=_be(H,ae,Pe,se,Se,$e);return pt.createElement(Z,{key:P.id,id:P.id,className:$o([P.className,o]),type:K,data:P.data,selected:!!P.selected,animated:!!P.animated,hidden:!!P.hidden,label:P.label,labelStyle:P.labelStyle,labelShowBg:P.labelShowBg,labelBgStyle:P.labelBgStyle,labelBgPadding:P.labelBgPadding,labelBgBorderRadius:P.labelBgBorderRadius,style:P.style,source:P.source,target:P.target,sourceHandleId:P.sourceHandle,targetHandleId:P.targetHandle,markerEnd:P.markerEnd,markerStart:P.markerStart,sourceX:Ge,sourceY:Ue,targetX:ht,targetY:ee,sourcePosition:Pe,targetPosition:$e,elementsSelectable:O,onContextMenu:i,onMouseEnter:l,onMouseMove:c,onMouseLeave:d,onClick:p,onEdgeDoubleClick:h,onReconnect:g,onReconnectStart:y,onReconnectEnd:b,reconnectRadius:v,rfId:t,ariaLabel:P.ariaLabel,isFocusable:we,isReconnectable:ze,pathOptions:"pathOptions"in P?P.pathOptions:void 0,interactionWidth:P.interactionWidth,disableKeyboardA11y:C})})))),w):null};sD.displayName="EdgeRenderer";var Bbe=u.memo(sD);const zbe=s=>`translate(${s.transform[0]}px,${s.transform[1]}px) scale(${s.transform[2]})`;function $be({children:s}){const r=ga(zbe);return pt.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:r}},s)}function Ube(s){const r=Zk(),e=u.useRef(!1);u.useEffect(()=>{!e.current&&r.viewportInitialized&&s&&(setTimeout(()=>s(r),1),e.current=!0)},[s,r.viewportInitialized])}const Vbe={[cn.Left]:cn.Right,[cn.Right]:cn.Left,[cn.Top]:cn.Bottom,[cn.Bottom]:cn.Top},aD=({nodeId:s,handleType:r,style:e,type:t=$d.Bezier,CustomComponent:a,connectionStatus:o})=>{const{fromNode:i,handleId:l,toX:c,toY:d,connectionMode:p}=ga(u.useCallback(L=>({fromNode:L.nodeInternals.get(s),handleId:L.connectionHandleId,toX:(L.connectionPosition.x-L.transform[0])/L.transform[2],toY:(L.connectionPosition.y-L.transform[1])/L.transform[2],connectionMode:L.connectionMode}),[s]),Eo),h=i?.[Ha]?.handleBounds;let g=h?.[r];if(p===Dp.Loose&&(g=g||h?.[r==="source"?"target":"source"]),!i||!g)return null;const y=l?g.find(L=>L.id===l):g[0],b=y?y.x+y.width/2:(i.width??0)/2,v=y?y.y+y.height/2:i.height??0,w=(i.positionAbsolute?.x??0)+b,C=(i.positionAbsolute?.y??0)+v,k=y?.position,N=k?Vbe[k]:null;if(!k||!N)return null;if(a)return pt.createElement(a,{connectionLineType:t,connectionLineStyle:e,fromNode:i,fromHandle:y,fromX:w,fromY:C,toX:c,toY:d,fromPosition:k,toPosition:N,connectionStatus:o});let O="";const R={sourceX:w,sourceY:C,sourcePosition:k,targetX:c,targetY:d,targetPosition:N};return t===$d.Bezier?[O]=_R(R):t===$d.Step?[O]=s2({...R,borderRadius:0}):t===$d.SmoothStep?[O]=s2(R):t===$d.SimpleBezier?[O]=kR(R):O=`M${w},${C} ${c},${d}`,pt.createElement("path",{d:O,fill:"none",className:"react-flow__connection-path",style:e})};aD.displayName="ConnectionLine";const Hbe=s=>({nodeId:s.connectionNodeId,handleType:s.connectionHandleType,nodesConnectable:s.nodesConnectable,connectionStatus:s.connectionStatus,width:s.width,height:s.height});function Wbe({containerStyle:s,style:r,type:e,component:t}){const{nodeId:a,handleType:o,nodesConnectable:i,width:l,height:c,connectionStatus:d}=ga(Hbe,Eo);return!(a&&o&&l&&i)?null:pt.createElement("svg",{style:s,width:l,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},pt.createElement("g",{className:$o(["react-flow__connection",d])},pt.createElement(aD,{nodeId:a,handleType:o,style:r,type:e,CustomComponent:t,connectionStatus:d})))}function nO(s,r){return u.useRef(null),xo(),u.useMemo(()=>r(s),[s])}const oD=({nodeTypes:s,edgeTypes:r,onMove:e,onMoveStart:t,onMoveEnd:a,onInit:o,onNodeClick:i,onEdgeClick:l,onNodeDoubleClick:c,onEdgeDoubleClick:d,onNodeMouseEnter:p,onNodeMouseMove:h,onNodeMouseLeave:g,onNodeContextMenu:y,onSelectionContextMenu:b,onSelectionStart:v,onSelectionEnd:w,connectionLineType:C,connectionLineStyle:k,connectionLineComponent:N,connectionLineContainerStyle:O,selectionKeyCode:R,selectionOnDrag:L,selectionMode:B,multiSelectionKeyCode:G,panActivationKeyCode:$,zoomActivationKeyCode:z,deleteKeyCode:Y,onlyRenderVisibleElements:M,elementsSelectable:q,selectNodesOnDrag:P,defaultViewport:H,translateExtent:D,minZoom:X,maxZoom:se,preventScrolling:Q,defaultMarkerColor:xe,zoomOnScroll:K,zoomOnPinch:Z,panOnScroll:ve,panOnScrollSpeed:ae,panOnScrollMode:Se,zoomOnDoubleClick:Pe,panOnDrag:$e,onPaneClick:we,onPaneMouseEnter:Ae,onPaneMouseMove:ze,onPaneMouseLeave:Ge,onPaneScroll:Ue,onPaneContextMenu:ht,onEdgeContextMenu:ee,onEdgeMouseEnter:ue,onEdgeMouseMove:Oe,onEdgeMouseLeave:J,onReconnect:I,onReconnectStart:V,onReconnectEnd:re,reconnectRadius:pe,noDragClassName:ge,noWheelClassName:Ce,noPanClassName:he,elevateEdgesOnSelect:ie,disableKeyboardA11y:Fe,nodeOrigin:We,nodeExtent:Qe,rfId:de})=>{const Ee=nO(s,vbe),le=nO(r,kbe);return Ube(o),pt.createElement(ybe,{onPaneClick:we,onPaneMouseEnter:Ae,onPaneMouseMove:ze,onPaneMouseLeave:Ge,onPaneContextMenu:ht,onPaneScroll:Ue,deleteKeyCode:Y,selectionKeyCode:R,selectionOnDrag:L,selectionMode:B,onSelectionStart:v,onSelectionEnd:w,multiSelectionKeyCode:G,panActivationKeyCode:$,zoomActivationKeyCode:z,elementsSelectable:q,onMove:e,onMoveStart:t,onMoveEnd:a,zoomOnScroll:K,zoomOnPinch:Z,zoomOnDoubleClick:Pe,panOnScroll:ve,panOnScrollSpeed:ae,panOnScrollMode:Se,panOnDrag:$e,defaultViewport:H,translateExtent:D,minZoom:X,maxZoom:se,onSelectionContextMenu:b,preventScrolling:Q,noDragClassName:ge,noWheelClassName:Ce,noPanClassName:he,disableKeyboardA11y:Fe},pt.createElement($be,null,pt.createElement(Bbe,{edgeTypes:le,onEdgeClick:l,onEdgeDoubleClick:d,onlyRenderVisibleElements:M,onEdgeContextMenu:ee,onEdgeMouseEnter:ue,onEdgeMouseMove:Oe,onEdgeMouseLeave:J,onReconnect:I,onReconnectStart:V,onReconnectEnd:re,reconnectRadius:pe,defaultMarkerColor:xe,noPanClassName:he,elevateEdgesOnSelect:!!ie,disableKeyboardA11y:Fe,rfId:de},pt.createElement(Wbe,{style:k,type:C,component:N,containerStyle:O})),pt.createElement("div",{className:"react-flow__edgelabel-renderer"}),pt.createElement(jbe,{nodeTypes:Ee,onNodeClick:i,onNodeDoubleClick:c,onNodeMouseEnter:p,onNodeMouseMove:h,onNodeMouseLeave:g,onNodeContextMenu:y,selectNodesOnDrag:P,onlyRenderVisibleElements:M,noPanClassName:he,noDragClassName:ge,disableKeyboardA11y:Fe,nodeOrigin:We,nodeExtent:Qe,rfId:de})))};oD.displayName="GraphView";var qbe=u.memo(oD);const c2=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Uu={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:c2,nodeExtent:c2,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Dp.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:wve,isValidConnection:void 0},Gbe=()=>Dge((s,r)=>({...Uu,setNodes:e=>{const{nodeInternals:t,nodeOrigin:a,elevateNodesOnSelect:o}=r();s({nodeInternals:dS(e,t,a,o)})},getNodes:()=>Array.from(r().nodeInternals.values()),setEdges:e=>{const{defaultEdgeOptions:t={}}=r();s({edges:e.map(a=>({...t,...a}))})},setDefaultNodesAndEdges:(e,t)=>{const a=typeof e<"u",o=typeof t<"u",i=a?dS(e,new Map,r().nodeOrigin,r().elevateNodesOnSelect):new Map;s({nodeInternals:i,edges:o?t:[],hasDefaultNodes:a,hasDefaultEdges:o})},updateNodeDimensions:e=>{const{onNodesChange:t,nodeInternals:a,fitViewOnInit:o,fitViewOnInitDone:i,fitViewOnInitOptions:l,domNode:c,nodeOrigin:d}=r(),p=c?.querySelector(".react-flow__viewport");if(!p)return;const h=window.getComputedStyle(p),{m22:g}=new window.DOMMatrixReadOnly(h.transform),y=e.reduce((v,w)=>{const C=a.get(w.id);if(C?.hidden)a.set(C.id,{...C,[Ha]:{...C[Ha],handleBounds:void 0}});else if(C){const k=Uk(w.nodeElement);k.width&&k.height&&(C.width!==k.width||C.height!==k.height||w.forceUpdate)&&(a.set(C.id,{...C,[Ha]:{...C[Ha],handleBounds:{source:Z3(".source",w.nodeElement,g,d),target:Z3(".target",w.nodeElement,g,d)}},...k}),v.push({id:C.id,type:"dimensions",dimensions:k}))}return v},[]);qR(a,d);const b=i||o&&!i&&GR(r,{initial:!0,...l});s({nodeInternals:new Map(a),fitViewOnInitDone:b}),y?.length>0&&t?.(y)},updateNodePositions:(e,t=!0,a=!1)=>{const{triggerNodeChanges:o}=r(),i=e.map(l=>{const c={id:l.id,type:"position",dragging:a};return t&&(c.positionAbsolute=l.positionAbsolute,c.position=l.position),c});o(i)},triggerNodeChanges:e=>{const{onNodesChange:t,nodeInternals:a,hasDefaultNodes:o,nodeOrigin:i,getNodes:l,elevateNodesOnSelect:c}=r();if(e?.length){if(o){const d=YR(e,l()),p=dS(d,a,i,c);s({nodeInternals:p})}t?.(e)}},addSelectedNodes:e=>{const{multiSelectionActive:t,edges:a,getNodes:o}=r();let i,l=null;t?i=e.map(c=>Gu(c,!0)):(i=im(o(),e),l=im(a,[])),Tv({changedNodes:i,changedEdges:l,get:r,set:s})},addSelectedEdges:e=>{const{multiSelectionActive:t,edges:a,getNodes:o}=r();let i,l=null;t?i=e.map(c=>Gu(c,!0)):(i=im(a,e),l=im(o(),[])),Tv({changedNodes:l,changedEdges:i,get:r,set:s})},unselectNodesAndEdges:({nodes:e,edges:t}={})=>{const{edges:a,getNodes:o}=r(),i=e||o(),l=t||a,c=i.map(p=>(p.selected=!1,Gu(p.id,!1))),d=l.map(p=>Gu(p.id,!1));Tv({changedNodes:c,changedEdges:d,get:r,set:s})},setMinZoom:e=>{const{d3Zoom:t,maxZoom:a}=r();t?.scaleExtent([e,a]),s({minZoom:e})},setMaxZoom:e=>{const{d3Zoom:t,minZoom:a}=r();t?.scaleExtent([a,e]),s({maxZoom:e})},setTranslateExtent:e=>{r().d3Zoom?.translateExtent(e),s({translateExtent:e})},resetSelectedElements:()=>{const{edges:e,getNodes:t}=r(),o=t().filter(l=>l.selected).map(l=>Gu(l.id,!1)),i=e.filter(l=>l.selected).map(l=>Gu(l.id,!1));Tv({changedNodes:o,changedEdges:i,get:r,set:s})},setNodeExtent:e=>{const{nodeInternals:t}=r();t.forEach(a=>{a.positionAbsolute=Vk(a.position,e)}),s({nodeExtent:e,nodeInternals:new Map(t)})},panBy:e=>{const{transform:t,width:a,height:o,d3Zoom:i,d3Selection:l,translateExtent:c}=r();if(!i||!l||!e.x&&!e.y)return!1;const d=Yd.translate(t[0]+e.x,t[1]+e.y).scale(t[2]),p=[[0,0],[a,o]],h=i?.constrain()(d,p,c);return i.transform(l,h),t[0]!==h.x||t[1]!==h.y||t[2]!==h.k},cancelConnection:()=>s({connectionNodeId:Uu.connectionNodeId,connectionHandleId:Uu.connectionHandleId,connectionHandleType:Uu.connectionHandleType,connectionStatus:Uu.connectionStatus,connectionStartHandle:Uu.connectionStartHandle,connectionEndHandle:Uu.connectionEndHandle}),reset:()=>s({...Uu})}),Object.is),iD=({children:s})=>{const r=u.useRef(null);return r.current||(r.current=Gbe()),pt.createElement(hve,{value:r.current},s)};iD.displayName="ReactFlowProvider";const lD=({children:s})=>u.useContext(zj)?pt.createElement(pt.Fragment,null,s):pt.createElement(iD,null,s);lD.displayName="ReactFlowWrapper";const Kbe={input:BR,default:i2,output:$R,group:Yk},Ybe={default:Fw,straight:qk,step:Wk,smoothstep:$j,simplebezier:Hk},Zbe=[0,0],Xbe=[15,15],Qbe={x:0,y:0,zoom:1},Jbe={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Qk=u.forwardRef(({nodes:s,edges:r,defaultNodes:e,defaultEdges:t,className:a,nodeTypes:o=Kbe,edgeTypes:i=Ybe,onNodeClick:l,onEdgeClick:c,onInit:d,onMove:p,onMoveStart:h,onMoveEnd:g,onConnect:y,onConnectStart:b,onConnectEnd:v,onClickConnectStart:w,onClickConnectEnd:C,onNodeMouseEnter:k,onNodeMouseMove:N,onNodeMouseLeave:O,onNodeContextMenu:R,onNodeDoubleClick:L,onNodeDragStart:B,onNodeDrag:G,onNodeDragStop:$,onNodesDelete:z,onEdgesDelete:Y,onSelectionChange:M,onSelectionDragStart:q,onSelectionDrag:P,onSelectionDragStop:H,onSelectionContextMenu:D,onSelectionStart:X,onSelectionEnd:se,connectionMode:Q=Dp.Strict,connectionLineType:xe=$d.Bezier,connectionLineStyle:K,connectionLineComponent:Z,connectionLineContainerStyle:ve,deleteKeyCode:ae="Backspace",selectionKeyCode:Se="Shift",selectionOnDrag:Pe=!1,selectionMode:$e=hx.Full,panActivationKeyCode:we="Space",multiSelectionKeyCode:Ae=Dw()?"Meta":"Control",zoomActivationKeyCode:ze=Dw()?"Meta":"Control",snapToGrid:Ge=!1,snapGrid:Ue=Xbe,onlyRenderVisibleElements:ht=!1,selectNodesOnDrag:ee=!0,nodesDraggable:ue,nodesConnectable:Oe,nodesFocusable:J,nodeOrigin:I=Zbe,edgesFocusable:V,edgesUpdatable:re,elementsSelectable:pe,defaultViewport:ge=Qbe,minZoom:Ce=.5,maxZoom:he=2,translateExtent:ie=c2,preventScrolling:Fe=!0,nodeExtent:We,defaultMarkerColor:Qe="#b1b1b7",zoomOnScroll:de=!0,zoomOnPinch:Ee=!0,panOnScroll:le=!1,panOnScrollSpeed:Ye=.5,panOnScrollMode:De=bp.Free,zoomOnDoubleClick:ct=!0,panOnDrag:ot=!0,onPaneClick:dt,onPaneMouseEnter:Ke,onPaneMouseMove:kt,onPaneMouseLeave:At,onPaneScroll:xt,onPaneContextMenu:Xt,children:br,onEdgeContextMenu:zt,onEdgeDoubleClick:be,onEdgeMouseEnter:Be,onEdgeMouseMove:et,onEdgeMouseLeave:wt,onEdgeUpdate:$t,onEdgeUpdateStart:tr,onEdgeUpdateEnd:Lr,onReconnect:tn,onReconnectStart:bn,onReconnectEnd:Fr,reconnectRadius:rr=10,edgeUpdaterRadius:wr=10,onNodesChange:an,onEdgesChange:En,noDragClassName:rn="nodrag",noWheelClassName:kr="nowheel",noPanClassName:jr="nopan",fitView:mt=!1,fitViewOptions:yr,connectOnClick:An=!0,attributionPosition:fn,proOptions:wn,defaultEdgeOptions:zr,elevateNodesOnSelect:In=!0,elevateEdgesOnSelect:ne=!1,disableKeyboardA11y:ke=!1,autoPanOnConnect:Re=!0,autoPanOnNodeDrag:Ze=!0,connectionRadius:st=20,isValidConnection:Ct,onError:Xe,style:Ve,id:je,nodeDragThreshold:He,...at},Ot)=>{const ce=je||"1";return pt.createElement("div",{...at,style:{...Ve,...Jbe},ref:Ot,className:$o(["react-flow",a]),"data-testid":"rf__wrapper",id:je},pt.createElement(lD,null,pt.createElement(qbe,{onInit:d,onMove:p,onMoveStart:h,onMoveEnd:g,onNodeClick:l,onEdgeClick:c,onNodeMouseEnter:k,onNodeMouseMove:N,onNodeMouseLeave:O,onNodeContextMenu:R,onNodeDoubleClick:L,nodeTypes:o,edgeTypes:i,connectionLineType:xe,connectionLineStyle:K,connectionLineComponent:Z,connectionLineContainerStyle:ve,selectionKeyCode:Se,selectionOnDrag:Pe,selectionMode:$e,deleteKeyCode:ae,multiSelectionKeyCode:Ae,panActivationKeyCode:we,zoomActivationKeyCode:ze,onlyRenderVisibleElements:ht,selectNodesOnDrag:ee,defaultViewport:ge,translateExtent:ie,minZoom:Ce,maxZoom:he,preventScrolling:Fe,zoomOnScroll:de,zoomOnPinch:Ee,zoomOnDoubleClick:ct,panOnScroll:le,panOnScrollSpeed:Ye,panOnScrollMode:De,panOnDrag:ot,onPaneClick:dt,onPaneMouseEnter:Ke,onPaneMouseMove:kt,onPaneMouseLeave:At,onPaneScroll:xt,onPaneContextMenu:Xt,onSelectionContextMenu:D,onSelectionStart:X,onSelectionEnd:se,onEdgeContextMenu:zt,onEdgeDoubleClick:be,onEdgeMouseEnter:Be,onEdgeMouseMove:et,onEdgeMouseLeave:wt,onReconnect:tn??$t,onReconnectStart:bn??tr,onReconnectEnd:Fr??Lr,reconnectRadius:rr??wr,defaultMarkerColor:Qe,noDragClassName:rn,noWheelClassName:kr,noPanClassName:jr,elevateEdgesOnSelect:ne,rfId:ce,disableKeyboardA11y:ke,nodeOrigin:I,nodeExtent:We}),pt.createElement(Vve,{nodes:s,edges:r,defaultNodes:e,defaultEdges:t,onConnect:y,onConnectStart:b,onConnectEnd:v,onClickConnectStart:w,onClickConnectEnd:C,nodesDraggable:ue,nodesConnectable:Oe,nodesFocusable:J,edgesFocusable:V,edgesUpdatable:re,elementsSelectable:pe,elevateNodesOnSelect:In,minZoom:Ce,maxZoom:he,nodeExtent:We,onNodesChange:an,onEdgesChange:En,snapToGrid:Ge,snapGrid:Ue,connectionMode:Q,translateExtent:ie,connectOnClick:An,defaultEdgeOptions:zr,fitView:mt,fitViewOptions:yr,onNodesDelete:z,onEdgesDelete:Y,onNodeDragStart:B,onNodeDrag:G,onNodeDragStop:$,onSelectionDrag:P,onSelectionDragStart:q,onSelectionDragStop:H,noPanClassName:jr,nodeOrigin:I,rfId:ce,autoPanOnConnect:Re,autoPanOnNodeDrag:Ze,onError:Xe,connectionRadius:st,isValidConnection:Ct,nodeDragThreshold:He}),pt.createElement($ve,{onSelectionChange:M}),br,pt.createElement(gve,{proOptions:wn,position:fn}),pt.createElement(Kve,{rfId:ce,disableKeyboardA11y:ke})))});Qk.displayName="ReactFlow";function cD(s){return r=>{const[e,t]=u.useState(r),a=u.useCallback(o=>t(i=>s(o,i)),[]);return[e,t,a]}}const dD=cD(YR),uD=cD(lbe),fD=({id:s,x:r,y:e,width:t,height:a,style:o,color:i,strokeColor:l,strokeWidth:c,className:d,borderRadius:p,shapeRendering:h,onClick:g,selected:y})=>{const{background:b,backgroundColor:v}=o||{},w=i||b||v;return pt.createElement("rect",{className:$o(["react-flow__minimap-node",{selected:y},d]),x:r,y:e,rx:p,ry:p,width:t,height:a,fill:w,stroke:l,strokeWidth:c,shapeRendering:h,onClick:g?C=>g(C,s):void 0})};fD.displayName="MiniMapNode";var ewe=u.memo(fD);const twe=s=>s.nodeOrigin,rwe=s=>s.getNodes().filter(r=>!r.hidden&&r.width&&r.height),hS=s=>s instanceof Function?s:()=>s;function nwe({nodeStrokeColor:s="transparent",nodeColor:r="#e2e2e2",nodeClassName:e="",nodeBorderRadius:t=5,nodeStrokeWidth:a=2,nodeComponent:o=ewe,onClick:i}){const l=ga(rwe,Eo),c=ga(twe),d=hS(r),p=hS(s),h=hS(e),g=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return pt.createElement(pt.Fragment,null,l.map(y=>{const{x:b,y:v}=Sp(y,c).positionAbsolute;return pt.createElement(o,{key:y.id,x:b,y:v,width:y.width,height:y.height,style:y.style,selected:y.selected,className:h(y),color:d(y),borderRadius:t,strokeColor:p(y),strokeWidth:a,shapeRendering:g,onClick:i,id:y.id})}))}var swe=u.memo(nwe);const awe=200,owe=150,iwe=s=>{const r=s.getNodes(),e={x:-s.transform[0]/s.transform[2],y:-s.transform[1]/s.transform[2],width:s.width/s.transform[2],height:s.height/s.transform[2]};return{viewBB:e,boundingRect:r.length>0?vve(Uj(r,s.nodeOrigin),e):e,rfId:s.rfId}},lwe="react-flow__minimap-desc";function pD({style:s,className:r,nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:a="",nodeBorderRadius:o=5,nodeStrokeWidth:i=2,nodeComponent:l,maskColor:c="rgb(240, 240, 240, 0.6)",maskStrokeColor:d="none",maskStrokeWidth:p=1,position:h="bottom-right",onClick:g,onNodeClick:y,pannable:b=!1,zoomable:v=!1,ariaLabel:w="React Flow mini map",inversePan:C=!1,zoomStep:k=10,offsetScale:N=5}){const O=xo(),R=u.useRef(null),{boundingRect:L,viewBB:B,rfId:G}=ga(iwe,Eo),$=s?.width??awe,z=s?.height??owe,Y=L.width/$,M=L.height/z,q=Math.max(Y,M),P=q*$,H=q*z,D=N*q,X=L.x-(P-L.width)/2-D,se=L.y-(H-L.height)/2-D,Q=P+D*2,xe=H+D*2,K=`${lwe}-${G}`,Z=u.useRef(0);Z.current=q,u.useEffect(()=>{if(R.current){const Se=Cl(R.current),Pe=Ae=>{const{transform:ze,d3Selection:Ge,d3Zoom:Ue}=O.getState();if(Ae.sourceEvent.type!=="wheel"||!Ge||!Ue)return;const ht=-Ae.sourceEvent.deltaY*(Ae.sourceEvent.deltaMode===1?.05:Ae.sourceEvent.deltaMode?1:.002)*k,ee=ze[2]*Math.pow(2,ht);Ue.scaleTo(Ge,ee)},$e=Ae=>{const{transform:ze,d3Selection:Ge,d3Zoom:Ue,translateExtent:ht,width:ee,height:ue}=O.getState();if(Ae.sourceEvent.type!=="mousemove"||!Ge||!Ue)return;const Oe=Z.current*Math.max(1,ze[2])*(C?-1:1),J={x:ze[0]-Ae.sourceEvent.movementX*Oe,y:ze[1]-Ae.sourceEvent.movementY*Oe},I=[[0,0],[ee,ue]],V=Yd.translate(J.x,J.y).scale(ze[2]),re=Ue.constrain()(V,I,ht);Ue.transform(Ge,re)},we=gR().on("zoom",b?$e:null).on("zoom.wheel",v?Pe:null);return Se.call(we),()=>{Se.on("zoom",null)}}},[b,v,C,k]);const ve=g?Se=>{const Pe=rc(Se);g(Se,{x:Pe[0],y:Pe[1]})}:void 0,ae=y?(Se,Pe)=>{const $e=O.getState().nodeInternals.get(Pe);y(Se,$e)}:void 0;return pt.createElement($k,{position:h,style:s,className:$o(["react-flow__minimap",r]),"data-testid":"rf__minimap"},pt.createElement("svg",{width:$,height:z,viewBox:`${X} ${se} ${Q} ${xe}`,role:"img","aria-labelledby":K,ref:R,onClick:ve},w&&pt.createElement("title",{id:K},w),pt.createElement(swe,{onClick:ae,nodeColor:t,nodeStrokeColor:e,nodeBorderRadius:o,nodeClassName:a,nodeStrokeWidth:i,nodeComponent:l}),pt.createElement("path",{className:"react-flow__minimap-mask",d:`M${X-D},${se-D}h${Q+D*2}v${xe+D*2}h${-Q-D*2}z
        M${B.x},${B.y}h${B.width}v${B.height}h${-B.width}z`,fill:c,fillRule:"evenodd",stroke:d,strokeWidth:p,pointerEvents:"none"})))}pD.displayName="MiniMap";var hD=u.memo(pD);function cwe(){return pt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},pt.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function dwe(){return pt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},pt.createElement("path",{d:"M0 0h32v4.2H0z"}))}function uwe(){return pt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},pt.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function fwe(){return pt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},pt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function pwe(){return pt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},pt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Ty=({children:s,className:r,...e})=>pt.createElement("button",{type:"button",className:$o(["react-flow__controls-button",r]),...e},s);Ty.displayName="ControlButton";const hwe=s=>({isInteractive:s.nodesDraggable||s.nodesConnectable||s.elementsSelectable,minZoomReached:s.transform[2]<=s.minZoom,maxZoomReached:s.transform[2]>=s.maxZoom}),mD=({style:s,showZoom:r=!0,showFitView:e=!0,showInteractive:t=!0,fitViewOptions:a,onZoomIn:o,onZoomOut:i,onFitView:l,onInteractiveChange:c,className:d,children:p,position:h="bottom-left"})=>{const g=xo(),[y,b]=u.useState(!1),{isInteractive:v,minZoomReached:w,maxZoomReached:C}=ga(hwe,Eo),{zoomIn:k,zoomOut:N,fitView:O}=Zk();if(u.useEffect(()=>{b(!0)},[]),!y)return null;const R=()=>{k(),o?.()},L=()=>{N(),i?.()},B=()=>{O(a),l?.()},G=()=>{g.setState({nodesDraggable:!v,nodesConnectable:!v,elementsSelectable:!v}),c?.(!v)};return pt.createElement($k,{className:$o(["react-flow__controls",d]),position:h,style:s,"data-testid":"rf__controls"},r&&pt.createElement(pt.Fragment,null,pt.createElement(Ty,{onClick:R,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:C},pt.createElement(cwe,null)),pt.createElement(Ty,{onClick:L,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:w},pt.createElement(dwe,null))),e&&pt.createElement(Ty,{className:"react-flow__controls-fitview",onClick:B,title:"fit view","aria-label":"fit view"},pt.createElement(uwe,null)),t&&pt.createElement(Ty,{className:"react-flow__controls-interactive",onClick:G,title:"toggle interactivity","aria-label":"toggle interactivity"},v?pt.createElement(pwe,null):pt.createElement(fwe,null)),p)};mD.displayName="Controls";var gD=u.memo(mD),ic;(function(s){s.Lines="lines",s.Dots="dots",s.Cross="cross"})(ic||(ic={}));function mwe({color:s,dimensions:r,lineWidth:e}){return pt.createElement("path",{stroke:s,strokeWidth:e,d:`M${r[0]/2} 0 V${r[1]} M0 ${r[1]/2} H${r[0]}`})}function gwe({color:s,radius:r}){return pt.createElement("circle",{cx:r,cy:r,r,fill:s})}const ywe={[ic.Dots]:"#91919a",[ic.Lines]:"#eee",[ic.Cross]:"#e2e2e2"},xwe={[ic.Dots]:1,[ic.Lines]:1,[ic.Cross]:6},vwe=s=>({transform:s.transform,patternId:`pattern-${s.rfId}`});function yD({id:s,variant:r=ic.Dots,gap:e=20,size:t,lineWidth:a=1,offset:o=2,color:i,style:l,className:c}){const d=u.useRef(null),{transform:p,patternId:h}=ga(vwe,Eo),g=i||ywe[r],y=t||xwe[r],b=r===ic.Dots,v=r===ic.Cross,w=Array.isArray(e)?e:[e,e],C=[w[0]*p[2]||1,w[1]*p[2]||1],k=y*p[2],N=v?[k,k]:C,O=b?[k/o,k/o]:[N[0]/o,N[1]/o];return pt.createElement("svg",{className:$o(["react-flow__background",c]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:d,"data-testid":"rf__background"},pt.createElement("pattern",{id:h+s,x:p[0]%C[0],y:p[1]%C[1],width:C[0],height:C[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${O[0]},-${O[1]})`},b?pt.createElement(gwe,{color:g,radius:k/o}):pt.createElement(mwe,{dimensions:N,color:g,lineWidth:a})),pt.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${h+s})`}))}yD.displayName="Background";var xD=u.memo(yD);const bwe=[{id:"trigger-1",type:"trigger",data:{label:"Trigger"},position:{x:250,y:100}}],wwe=[],jwe=({data:s,selected:r,id:e})=>{const[t,a]=u.useState(null),[o,i]=u.useState(null),l=!!t,c=b=>{b.stopPropagation(),o&&(clearTimeout(o),i(null)),t===b.currentTarget?a(null):a(b.currentTarget)},d=b=>{if(b.stopPropagation(),!t){o&&clearTimeout(o);const v=setTimeout(()=>{a(b.currentTarget)},500);i(v)}},p=()=>{o&&(clearTimeout(o),i(null))},h=()=>{o&&(clearTimeout(o),i(null)),a(null)},g=()=>{s.onAddAction?.(),h()},y=()=>{s.onAddCondition?.(),h()};return n.jsxs(cr,{sx:{backgroundColor:r?"#f5f7ff":"white",border:`2px solid ${r?"#4f46e5":"#6366f1"}`,borderRadius:2,padding:2,minWidth:150,position:"relative"},children:[n.jsx(cr,{sx:{position:"absolute",top:4,right:4},children:n.jsx(es,{size:"small",onClick:b=>{b.stopPropagation(),s.onRequestDelete?.(e,"trigger")},sx:{color:"text.secondary"},children:n.jsx(nf,{fontSize:"small"})})}),n.jsx(kl,{type:"target",position:cn.Top,style:{visibility:"hidden"}}),n.jsx(Bt,{variant:"body1",sx:{fontWeight:600,textAlign:"center",mb:1},children:s.label||"Trigger"}),s.isTriggerSelected&&n.jsxs(cr,{sx:{position:"relative",display:"flex",justifyContent:"flex-end",mt:1,pr:.5},children:[n.jsx(Bt,{variant:"caption",sx:{color:"#6366f1",cursor:"pointer",fontWeight:600,"&:hover":{textDecoration:"underline"}},onMouseEnter:d,onMouseLeave:p,onClick:c,children:"then"}),n.jsxs(Aj,{anchorEl:t,open:l,onClose:h,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onClick:b=>{b.stopPropagation()},onMouseDown:b=>{b.stopPropagation()},onMouseUp:b=>{b.stopPropagation()},disableAutoFocusItem:!0,disablePortal:!1,sx:{zIndex:9999},PaperProps:{onClick:b=>{b.stopPropagation()},onMouseDown:b=>{b.stopPropagation()},sx:{pointerEvents:"auto"}},MenuListProps:{"aria-labelledby":"then-button",onClick:b=>{b.stopPropagation()},onMouseDown:b=>{b.stopPropagation()}},children:[s.canHaveConditions&&n.jsx(zn,{onClick:b=>{b.stopPropagation(),y()},onMouseDown:b=>{b.stopPropagation()},children:"Condition"}),n.jsx(zn,{onClick:b=>{b.stopPropagation(),g()},onMouseDown:b=>{b.stopPropagation()},children:"Action"})]})]}),n.jsx(kl,{type:"source",position:cn.Bottom,style:{bottom:-8}})]})},Cwe=({data:s,id:r,selected:e})=>{const[t,a]=u.useState(null),[o,i]=u.useState(null),l=!!t,c=w=>{w.stopPropagation(),o&&(clearTimeout(o),i(null)),t===w.currentTarget?a(null):a(w.currentTarget)},d=w=>{if(w.stopPropagation(),!t){o&&clearTimeout(o);const C=setTimeout(()=>{a(w.currentTarget)},500);i(C)}},p=()=>{o&&(clearTimeout(o),i(null))},h=()=>{o&&(clearTimeout(o),i(null)),a(null)},g=()=>{s.onAddAction?.(),h()},y=()=>{s.onAddCondition?.(),h()},b=()=>{s.onAddOtherwise&&s.onAddOtherwise(),h()},v=w=>({equal:"Equal to","not-equal":"Not equal to","greater-than":"Greater than","greater-than-or-equal":"Greater than or equal to","less-than":"Less than","less-than-or-equal":"Less than or equal to","is-at-least-one-of":"Is at least one of","is-not-any-of":"Is not any of","does-not-exist":"Does not exist",exists:"Exists"})[w]||w;return n.jsxs(cr,{sx:{backgroundColor:e?"#f5f7ff":"white",border:`2px solid ${e?"#4f46e5":"#6366f1"}`,borderRadius:2,padding:2,minWidth:200,position:"relative"},children:[n.jsx(cr,{sx:{position:"absolute",top:4,right:4,display:"flex",gap:.5},children:n.jsx(es,{size:"small",onClick:w=>{w.stopPropagation(),s.onRequestDelete?.(r,"condition")},sx:{color:"text.secondary"},children:n.jsx(nf,{fontSize:"small"})})}),n.jsx(kl,{type:"target",position:cn.Top,style:{bottom:-8}}),n.jsx(Bt,{variant:"body1",sx:{fontWeight:600,textAlign:"center",mb:1},children:"Condition"}),s.variable&&n.jsxs(cr,{sx:{mb:1,p:1,backgroundColor:"#f5f5f5",borderRadius:1},children:[n.jsx(Bt,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:.5},children:"Variable"}),n.jsx(Bt,{variant:"body2",sx:{fontWeight:500},children:s.variable}),s.operator&&n.jsxs(n.Fragment,{children:[n.jsx(Bt,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:"Operator"}),n.jsx(Bt,{variant:"body2",sx:{fontWeight:500},children:v(s.operator)})]}),s.value&&n.jsxs(n.Fragment,{children:[n.jsx(Bt,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:"Value"}),n.jsx(Bt,{variant:"body2",sx:{fontWeight:500},children:s.value})]})]}),s.variable&&n.jsxs(cr,{sx:{position:"relative",display:"flex",justifyContent:"flex-end",alignItems:"center",gap:1,mt:1,pr:.5},children:[n.jsx(Bt,{variant:"caption",sx:{color:"#6366f1",cursor:"pointer",fontWeight:600,"&:hover":{textDecoration:"underline"}},onMouseEnter:d,onMouseLeave:p,onClick:c,children:"then"}),n.jsx(Bt,{variant:"caption",sx:{color:"#ef4444",cursor:"pointer",fontWeight:600,"&:hover":{textDecoration:"underline"}},onClick:w=>{w.stopPropagation(),b()},children:"otherwise"}),n.jsxs(Aj,{anchorEl:t,open:l,onClose:h,onClick:w=>{w.stopPropagation()},onMouseDown:w=>{w.stopPropagation()},onMouseUp:w=>{w.stopPropagation()},disableAutoFocusItem:!0,disablePortal:!1,sx:{zIndex:9999},PaperProps:{onClick:w=>{w.stopPropagation()},onMouseDown:w=>{w.stopPropagation()},sx:{pointerEvents:"auto"}},MenuListProps:{"aria-labelledby":"then-button",onClick:w=>{w.stopPropagation()},onMouseDown:w=>{w.stopPropagation()}},children:[n.jsx(zn,{onClick:w=>{w.stopPropagation(),y()},onMouseDown:w=>{w.stopPropagation()},children:"Condition"}),n.jsx(zn,{onClick:w=>{w.stopPropagation(),g()},onMouseDown:w=>{w.stopPropagation()},children:"Action"})]})]}),n.jsx(kl,{type:"source",position:cn.Bottom,style:{bottom:-8}})]})},Swe=()=>{const s=dr(),[r,e]=u.useState(null),[t,a]=u.useState(null),[o,i]=u.useState(!1),[l,c]=u.useState(""),[d,p]=u.useState(null),[h,g]=u.useState("equal"),[y,b]=u.useState(!1),[v,w]=u.useState(""),[C,k]=u.useState(!1),[N,O]=u.useState(null),[R,L]=u.useState(!1),[B,G]=u.useState(""),[$,z]=u.useState(""),[Y,M]=u.useState(null),q=u.useCallback((Ue,ht,ee)=>{Ue(ue=>{const Oe=ee?ue.find(J=>J.id===ee):ue.find(J=>J.id==="trigger-1");if(Oe){const J={id:`action-${Date.now()}`,type:"action",data:{label:"Action"},position:{x:Oe.position.x,y:Oe.position.y+150}};return ht(I=>{const V={id:`edge-${Oe.id}-${J.id}`,source:Oe.id,target:J.id};return[...I,V]}),[...ue,J]}return ue})},[]),P=u.useCallback((Ue,ht,ee)=>{Ue(ue=>{const Oe=ee?ue.find(J=>J.id===ee):ue.find(J=>J.id==="trigger-1");if(Oe){const J={id:`otherwise-${Date.now()}`,data:{label:"Otherwise"},position:{x:Oe.position.x+200,y:Oe.position.y}};return ht(I=>{const V={id:`edge-${Oe.id}-${J.id}`,source:Oe.id,target:J.id,style:{stroke:"#ef4444"},label:"Otherwise"};return[...I,V]}),[...ue,J]}return ue})},[]),H=u.useCallback((Ue,ht,ee)=>{Ue(ue=>{const Oe=ee?ue.find(J=>J.id===ee):ue.find(J=>J.id==="trigger-1");if(Oe){const J=`condition-${Date.now()}`,I={id:J,type:"condition",data:{label:"Condition",onAddAction:()=>q(Ue,ht,J),onAddCondition:()=>H(Ue,ht,J),onAddOtherwise:()=>P(Ue,ht,J),onRequestDelete:(V,re)=>{O({id:V,type:re}),k(!0)}},position:{x:Oe.position.x,y:Oe.position.y+150}};return ht(V=>{const re={id:`edge-${Oe.id}-${I.id}`,source:Oe.id,target:I.id};return[...V,re]}),a(J),[...ue,I]}return ue})},[q,P]),[D,X,se]=dD(bwe.map(Ue=>({...Ue,data:{...Ue.data,onAddAction:()=>q(X,xe,"trigger-1"),onAddCondition:()=>H(X,xe,"trigger-1"),isTriggerSelected:!1,canHaveConditions:!1,onRequestDelete:(ht,ee)=>{O({id:ht,type:ee}),k(!0)}}}))),[Q,xe,K]=uD(wwe),{triggers:Z,getAll:ve}=hge();pt.useEffect(()=>{ve().catch(()=>{})},[ve]);const{actions:ae,getAll:Se}=gge();pt.useEffect(()=>{Se().catch(()=>{})},[Se]);const Pe=u.useCallback(Ue=>xe(ht=>ER(Ue,ht)),[xe]),{create:$e}=xw(),{activeStoreId:we}=Ur(),Ae=u.useCallback(async Ue=>{const ee=D.find(ie=>ie.id==="trigger-1")?.data?.label||"Trigger",ue=r||null,Oe=ue&&Z.find(ie=>ie.key===ue)?._id||null,J=ie=>{if(!ie)return null;const Fe=Q.find(We=>We.source===ie);return Fe?Fe.target:null},I=[];let V=J("trigger-1"),re="trigger-1";for(;V;){const ie=D.find(Fe=>Fe.id===V);if(!ie)break;if(ie.type==="condition"){const Fe=ie.data||{};I.push({variable:Fe.variable||void 0,operator:Fe.operator||void 0,value:Fe.value??void 0,description:Fe.description||void 0}),re=ie.id,V=J(ie.id)}else{re=ie.id;break}}let pe=null;const ge=V||re,Ce=D.find(ie=>ie.id===ge);if(Ce&&Ce.type==="action"){const ie=Ce.data||{};pe={id:ie.actionType&&ae.find(We=>We.actionType===ie.actionType)?._id||null,actionType:ie.actionType,name:ie.label}}const he={selectedTrigger:r,nodes:D.map(ie=>({id:ie.id,type:ie.type,position:ie.position,data:ie.data})),edges:Q.map(ie=>({id:ie.id,source:ie.source,target:ie.target,label:ie.label,style:ie.style})),mainData:{trigger:{id:Oe,key:ue,name:ee},conditions:I,action:pe}};try{const ie=we||"",Fe=`${ee}${pe?.name?`  ${pe.name}`:""}`,We=(Ue?.name||Fe||"Untitled automation").trim(),Qe=(Ue?.description||"").trim();await $e({storeId:ie,name:We,description:Qe,triggerId:Oe||"",triggerKey:ue||"add_to_cart",isActive:!0,flowData:he}),s("/marketing/automations")}catch(ie){console.error(ie)}},[r,D,Q,Z,ae,$e,s,we]),ze=u.useMemo(()=>({trigger:jwe,condition:Cwe}),[]);u.useMemo(()=>({animated:!0,style:{stroke:"#6366f1"}}),[]);const Ge=u.useMemo(()=>({animated:!0,style:{stroke:"#6366f1",strokeWidth:2}}),[]);return n.jsxs(cr,{sx:{height:"calc(100vh - 64px)",width:"100%",position:"relative"},children:[n.jsxs(Ms,{elevation:1,sx:{position:"absolute",top:0,left:0,right:0,zIndex:10,p:2,display:"flex",alignItems:"center",gap:2,borderRadius:0},children:[n.jsx(es,{onClick:()=>s("/marketing/automations"),size:"small",children:n.jsx(zx,{})}),n.jsx(Bt,{variant:"h6",sx:{flexGrow:1},children:"Create automation"}),n.jsx(Zn,{variant:"contained",size:"small",sx:{textTransform:"none",mr:1},onClick:()=>{const ht=D.find(J=>J.id==="trigger-1")?.data?.label||"Trigger",ee=D.find(J=>J.type==="action"),ue=ee?ee.data?.label||"Action":"",Oe=`${ht}${ue?`  ${ue}`:""}`;G(Oe),z(""),M(null),L(!0)},children:"Save"})]}),n.jsxs(cr,{sx:{height:"100%",width:"100%",pt:8,display:"flex"},children:[n.jsx(cr,{sx:{flex:1,height:"100%"},children:n.jsxs(Qk,{nodes:D,edges:Q,onNodesChange:se,onEdgesChange:K,onConnect:Pe,onNodeClick:(Ue,ht)=>{Ue.stopPropagation(),a(ht.id)},onPaneClick:()=>{a(null)},nodeTypes:ze,defaultEdgeOptions:Ge,fitView:!0,attributionPosition:"bottom-left",connectionLineStyle:{stroke:"#6366f1",strokeWidth:2},connectionLineType:$d.SmoothStep,children:[n.jsx(xD,{variant:"dots",gap:20,size:1,color:"#e0e0e0"}),n.jsx(gD,{}),n.jsx(hD,{nodeColor:Ue=>Ue.type==="input"?"#6366f1":"#94a3b8",maskColor:"rgba(0, 0, 0, 0.05)"})]})}),n.jsx(Ms,{elevation:2,sx:{width:320,height:"100%",borderRadius:0,borderLeft:"1px solid #e0e0e0",display:"flex",flexDirection:"column"},children:t&&D.find(Ue=>Ue.id===t&&Ue.type==="condition")?n.jsxs(n.Fragment,{children:[n.jsxs(cr,{sx:{p:2,borderBottom:"1px solid #e0e0e0",display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[n.jsxs(cr,{sx:{display:"flex",alignItems:"center",gap:1},children:[n.jsx(BI,{sx:{color:"text.secondary",fontSize:20}}),n.jsx(Bt,{variant:"h6",sx:{fontWeight:600},children:"Condition"})]}),n.jsx(es,{size:"small",onClick:()=>a(null),sx:{color:"text.secondary"},children:n.jsx(Bd,{fontSize:"small"})})]}),n.jsx(cr,{sx:{p:2,borderBottom:"1px solid #e0e0e0"},children:n.jsxs(cr,{sx:{display:"flex",alignItems:"flex-start",gap:1},children:[n.jsx(Bt,{variant:"body2",color:"text.secondary",children:"Take different actions based on the conditions you set"}),n.jsx(GN,{sx:{color:"text.secondary",fontSize:16,mt:.25}})]})}),n.jsx(cr,{sx:{p:2,borderBottom:"1px solid #e0e0e0"},children:y?n.jsxs(cr,{sx:{display:"flex",gap:1,alignItems:"center"},children:[n.jsx(Ns,{size:"small",fullWidth:!0,placeholder:"Enter description",value:v,onChange:Ue=>w(Ue.target.value)}),n.jsx(Zn,{variant:"text",size:"small",onClick:()=>{b(!1),w("")},sx:{textTransform:"none"},children:"Cancel"}),n.jsx(Zn,{variant:"contained",size:"small",onClick:()=>{t&&X(Ue=>Ue.map(ht=>ht.id===t&&ht.type==="condition"?{...ht,data:{...ht.data,description:v}}:ht)),b(!1)},sx:{textTransform:"none"},children:"OK"})]}):n.jsx(n.Fragment,{children:t&&D.find(Ue=>Ue.id===t&&Ue.type==="condition")?.data?.description?n.jsxs(cr,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx(Bt,{variant:"body2",color:"text.secondary",sx:{pr:2},children:(D.find(Ue=>Ue.id===t&&Ue.type==="condition")?.data).description}),n.jsx(jl,{component:"button",variant:"body2",onClick:()=>{const Ue=D.find(ht=>ht.id===t&&ht.type==="condition")?.data?.description||"";w(Ue),b(!0)},sx:{color:"#6366f1",textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"Edit"})]}):n.jsxs(jl,{component:"button",variant:"body2",onClick:()=>{w(""),b(!0)},sx:{display:"flex",alignItems:"center",gap:.5,color:"#6366f1",textDecoration:"none",cursor:"pointer","&:hover":{textDecoration:"underline"}},children:[n.jsx(ky,{sx:{fontSize:16}}),"Add description"]})})}),n.jsxs(cr,{sx:{flex:1,overflow:"auto",p:2},children:[n.jsx(Bt,{variant:"h6",sx:{fontWeight:600,mb:2},children:"IF"}),n.jsx(Zn,{variant:"outlined",fullWidth:!0,sx:{textTransform:"none",mb:2,justifyContent:"flex-start",borderColor:"#e0e0e0",color:"text.secondary",backgroundColor:"#f5f5f5","&:hover":{borderColor:"#d0d0d0",backgroundColor:"#f0f0f0"}},onClick:()=>i(!0),children:D.find(Ue=>Ue.id===t&&Ue.type==="condition")?.data?.variable||"Add a variable"}),D.find(Ue=>Ue.id===t&&Ue.type==="condition")?.data?.variable?n.jsxs(Ms,{elevation:0,sx:{p:2,border:"1px solid #e0e0e0",borderRadius:2,backgroundColor:"#fafafa",position:"relative"},children:[n.jsxs(cr,{sx:{position:"absolute",top:8,right:8,display:"flex",gap:.5},children:[n.jsx(es,{size:"small",sx:{color:"text.secondary"},children:n.jsx(GN,{fontSize:"small"})}),n.jsx(es,{size:"small",sx:{color:"text.secondary"},children:n.jsx(nf,{fontSize:"small"})}),n.jsx(es,{size:"small",sx:{color:"text.secondary"},children:n.jsx(rf,{fontSize:"small"})})]}),n.jsxs(cr,{sx:{mb:2},children:[n.jsx(Bt,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:"Variable"}),n.jsx(Bt,{variant:"body1",sx:{fontWeight:500},children:d})]}),n.jsxs(tf,{fullWidth:!0,sx:{mb:2},children:[n.jsx(ix,{id:"operator-label",children:"Operator"}),n.jsxs(Kd,{labelId:"operator-label",label:"Operator",value:D.find(Ue=>Ue.id===t&&Ue.type==="condition")?.data?.operator||h,onChange:Ue=>{const ht=Ue.target.value;g(ht),t&&X(ee=>ee.map(ue=>ue.id===t&&ue.type==="condition"?{...ue,data:{...ue.data,operator:ht}}:ue))},children:[n.jsx(zn,{value:"equal",children:"Equal to"}),n.jsx(zn,{value:"not-equal",children:"Not equal to"}),n.jsx(zn,{value:"greater-than",children:"Greater than"}),n.jsx(zn,{value:"greater-than-or-equal",children:"Greater than or equal to"}),n.jsx(zn,{value:"less-than",children:"Less than"}),n.jsx(zn,{value:"less-than-or-equal",children:"Less than or equal to"}),n.jsx(zn,{value:"is-at-least-one-of",children:"Is at least one of"}),n.jsx(zn,{value:"is-not-any-of",children:"Is not any of"}),n.jsx(zn,{value:"does-not-exist",children:"Does not exist"}),n.jsx(zn,{value:"exists",children:"Exists"})]})]}),n.jsx(Ns,{fullWidth:!0,label:"Value",placeholder:"Enter value",variant:"outlined",value:D.find(Ue=>Ue.id===t&&Ue.type==="condition")?.data?.value||"",onChange:Ue=>{const ht=Ue.target.value;t&&X(ee=>ee.map(ue=>ue.id===t&&ue.type==="condition"?{...ue,data:{...ue.data,value:ht}}:ue))}})]}):n.jsxs(Ms,{elevation:0,sx:{p:2,border:"1px solid #e0e0e0",borderRadius:2,backgroundColor:"#fafafa",position:"relative"},children:[n.jsxs(cr,{sx:{position:"absolute",top:8,right:8,display:"flex",gap:.5},children:[n.jsx(es,{size:"small",sx:{color:"text.secondary"},children:n.jsx(nf,{fontSize:"small"})}),n.jsx(es,{size:"small",sx:{color:"text.secondary"},children:n.jsx(rf,{fontSize:"small"})})]}),n.jsxs(tf,{fullWidth:!0,sx:{mb:2},children:[n.jsx(ix,{id:"operator-label",children:"Operator"}),n.jsxs(Kd,{labelId:"operator-label",label:"Operator",value:D.find(Ue=>Ue.id===t&&Ue.type==="condition")?.data?.operator||h,onChange:Ue=>{const ht=Ue.target.value;g(ht),t&&X(ee=>ee.map(ue=>ue.id===t&&ue.type==="condition"?{...ue,data:{...ue.data,operator:ht}}:ue))},children:[n.jsx(zn,{value:"equal",children:"Equal to"}),n.jsx(zn,{value:"not-equal",children:"Not equal to"}),n.jsx(zn,{value:"greater-than",children:"Greater than"}),n.jsx(zn,{value:"greater-than-or-equal",children:"Greater than or equal to"}),n.jsx(zn,{value:"less-than",children:"Less than"}),n.jsx(zn,{value:"less-than-or-equal",children:"Less than or equal to"}),n.jsx(zn,{value:"is-at-least-one-of",children:"Is at least one of"}),n.jsx(zn,{value:"is-not-any-of",children:"Is not any of"}),n.jsx(zn,{value:"does-not-exist",children:"Does not exist"}),n.jsx(zn,{value:"exists",children:"Exists"})]})]}),n.jsx(Ns,{fullWidth:!0,label:"Value",placeholder:"Enter value",variant:"outlined",value:D.find(Ue=>Ue.id===t&&Ue.type==="condition")?.data?.value||"",onChange:Ue=>{const ht=Ue.target.value;t&&X(ee=>ee.map(ue=>ue.id===t&&ue.type==="condition"?{...ue,data:{...ue.data,value:ht}}:ue))}})]})]})]}):t&&D.find(Ue=>Ue.id===t&&Ue.type==="action")?n.jsxs(n.Fragment,{children:[n.jsxs(cr,{sx:{p:2,borderBottom:"1px solid #e0e0e0"},children:[n.jsx(Bt,{variant:"h6",sx:{fontWeight:600},children:"Select action"}),n.jsx(Bt,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:"Choose what should happen next"})]}),n.jsx(cr,{sx:{flex:1,overflow:"auto"},children:n.jsx(HN,{sx:{p:0},children:ae.map(Ue=>{const ht=D.find(ee=>ee.id===t)?.data?.actionType===Ue.actionType;return n.jsx(K4,{disablePadding:!0,children:n.jsx(G4,{selected:ht,onClick:()=>{t&&X(ee=>ee.map(ue=>ue.id===t?{...ue,data:{...ue.data,label:Ue.name,actionType:Ue.actionType}}:ue))},sx:{py:1.5,px:2,"&.Mui-selected":{backgroundColor:"#f3f4f6",borderLeft:"3px solid #6366f1","&:hover":{backgroundColor:"#f3f4f6"}}},children:n.jsx(Tw,{primary:Ue.name,secondary:Ue.description,primaryTypographyProps:{fontWeight:ht?600:400,color:ht?"#6366f1":"text.primary"}})})},Ue._id)})})})]}):n.jsxs(n.Fragment,{children:[n.jsxs(cr,{sx:{p:2,borderBottom:"1px solid #e0e0e0"},children:[n.jsx(Bt,{variant:"h6",sx:{fontWeight:600},children:"Select trigger"}),n.jsx(Bt,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:"Choose when this automation starts"})]}),n.jsx(cr,{sx:{flex:1,overflow:"auto"},children:n.jsx(HN,{sx:{p:0},children:Z.map(Ue=>{const ht=r===Ue.key;return n.jsx(K4,{disablePadding:!0,children:n.jsxs(G4,{selected:ht,onClick:()=>{e(Ue.key),X(ee=>ee.map(ue=>ue.id==="trigger-1"?{...ue,data:{...ue.data,label:Ue.name,onAddAction:()=>q(X,xe),onAddCondition:()=>H(X,xe),isTriggerSelected:!0,canHaveConditions:!!Ue.hasConditions,onRequestDelete:(Oe,J)=>{O({id:Oe,type:J}),k(!0)}}}:ue))},sx:{py:1.5,px:2,"&.Mui-selected":{backgroundColor:"#f3f4f6",borderLeft:"3px solid #6366f1","&:hover":{backgroundColor:"#f3f4f6"}}},children:[n.jsx(WN,{sx:{minWidth:40},children:n.jsx(Cge,{sx:{color:ht?"#6366f1":"text.secondary"}})}),n.jsx(Tw,{primary:Ue.name,secondary:Ue.description,primaryTypographyProps:{fontWeight:ht?600:400,color:ht?"#6366f1":"text.primary"}})]})},Ue._id)})})})]})})]}),n.jsxs($c,{open:C,onClose:()=>k(!1),children:[n.jsxs(Vc,{children:["Delete ",N?.type," node?"]}),n.jsx(Uc,{children:n.jsxs(Bt,{variant:"body2",color:"text.secondary",children:["Do you really want to delete this ",N?.type," node?"]})}),n.jsxs(Fd,{children:[n.jsx(Zn,{onClick:()=>k(!1),children:"Cancel"}),n.jsx(Zn,{color:"error",onClick:()=>{if(!N)return;if(Q.some(ht=>ht.source===N.id)){gr.error("Can't delete: this node has child nodes."),k(!1);return}X(ht=>ht.filter(ee=>ee.id!==N.id)),xe(ht=>ht.filter(ee=>ee.source!==N.id&&ee.target!==N.id)),k(!1),t===N.id&&a(null),O(null)},children:"Delete"})]})]}),n.jsxs($c,{open:R,onClose:()=>L(!1),maxWidth:"sm",fullWidth:!0,children:[n.jsx(Vc,{children:"Save automation"}),n.jsx(Uc,{children:n.jsxs(cr,{sx:{display:"flex",flexDirection:"column",gap:2,mt:1},children:[n.jsx(Ns,{label:"Name",required:!0,value:B,onChange:Ue=>{G(Ue.target.value),Y&&M(null)},error:!!Y,helperText:Y||""}),n.jsx(Ns,{label:"Description",multiline:!0,minRows:2,value:$,onChange:Ue=>z(Ue.target.value)})]})}),n.jsxs(Fd,{children:[n.jsx(Zn,{onClick:()=>L(!1),children:"Cancel"}),n.jsx(Zn,{variant:"contained",onClick:async()=>{if(!B.trim()){M("Name is required");return}try{await Ae({name:B.trim(),description:$})}finally{L(!1)}},children:"Save"})]})]}),n.jsxs($c,{open:o,onClose:()=>i(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2}},children:[n.jsxs(Vc,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",pb:1},children:[n.jsx(Bt,{variant:"h6",sx:{fontWeight:600},children:"Add a variable"}),n.jsxs(cr,{sx:{display:"flex",gap:1,alignItems:"center"},children:[n.jsx(Zn,{variant:"text",size:"small",sx:{textTransform:"none",color:"text.secondary"},children:"Configure sample data"}),n.jsx(es,{size:"small",onClick:()=>i(!1),sx:{color:"text.secondary"},children:n.jsx(Bd,{})})]})]}),n.jsxs(Uc,{sx:{pt:2},children:[n.jsx(Ns,{fullWidth:!0,placeholder:"Search by variable name or description",value:l,onChange:Ue=>c(Ue.target.value),sx:{mb:3},InputProps:{startAdornment:n.jsx(wl,{position:"start",children:n.jsx(Ik,{sx:{color:"text.secondary"}})})}}),n.jsx(cr,{sx:{mb:3},children:n.jsxs(cr,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[n.jsxs(cr,{sx:{display:"flex",alignItems:"center",gap:1},children:[n.jsx(yge,{sx:{color:"text.secondary",fontSize:18}}),n.jsx(Bt,{variant:"body2",sx:{fontWeight:600},children:"Order created"})]}),n.jsx(Sk,{label:"Trigger",size:"small",sx:{backgroundColor:"#f3f4f6",color:"text.secondary",fontWeight:500,fontSize:"0.75rem"}})]})}),n.jsx(cr,{sx:{display:"flex",flexDirection:"column",gap:2},children:(()=>{const Ue=Z.find(ue=>ue.key===r),ee=(Ue?.exposedVariables||[]).filter(ue=>{if(!l)return!0;const Oe=l.toLowerCase();return ue.path.toLowerCase().includes(Oe)||ue.label.toLowerCase().includes(Oe)||(ue.description||"").toLowerCase().includes(Oe)});return ee.length===0?n.jsx(Bt,{variant:"body2",color:"text.secondary",children:Ue?"No variables match your search.":"Select a trigger to see its variables."}):ee.map(ue=>n.jsx(Ms,{elevation:0,sx:{p:2,border:"1px solid #e0e0e0",borderRadius:2,cursor:"pointer","&:hover":{backgroundColor:"#f9f9f9",borderColor:"#d0d0d0"}},onClick:()=>{D.find(J=>J.id===t&&J.type==="condition")?(p(ue.path),X(J=>J.map(I=>I.id===t?{...I,data:{...I.data,variable:ue.path,operator:h}}:I))):p(ue.path),i(!1),c("")},children:n.jsxs(cr,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[n.jsxs(cr,{sx:{flex:1},children:[n.jsxs(Bt,{variant:"body1",sx:{fontWeight:600,mb:.5},children:[ue.label," ",n.jsxs(Bt,{component:"span",variant:"caption",color:"text.secondary",children:["(",ue.path,")"]})]}),n.jsx(Bt,{variant:"body2",color:"text.secondary",children:ue.description||""})]}),n.jsx(es,{size:"small",sx:{color:"text.secondary",ml:1},children:n.jsx(Mk,{fontSize:"small"})})]})},ue.path))})()})]})]})]})},Nwe=()=>{const{automationId:s}=ks(),r=dr(),{activeStoreId:e}=Ur(),{flows:t,getByStoreId:a}=xw(),o=u.useMemo(()=>t.find(z=>z._id===s),[t,s]);u.useEffect(()=>{!o&&e&&a(e).catch(()=>{})},[o,e,a]);const i=o?.flowData?.nodes||[],l=o?.flowData?.edges||[],[c,d,p]=dD(i),[h,,g]=uD(l),[y,b]=u.useState(null),[v,w]=u.useState(!1),C=u.useRef(null),{update:k}=xw(),N=z=>z.map(Y=>({id:Y.id,type:Y.type,position:Y.position,data:Y.data})),O=z=>z.map(Y=>({id:Y.id,source:Y.source,target:Y.target,label:Y.label,style:Y.style}));u.useEffect(()=>{C.current||(C.current={nodes:N(i),edges:O(l)},w(!1))},[s,i,l]);const R=pt.useCallback(z=>{p(z);const Y=C.current;if(Y){const M=N(c);w(JSON.stringify(M)!==JSON.stringify(Y.nodes))}},[p,c]),L=pt.useCallback(z=>{g(z);const Y=C.current;if(Y){const M=O(h);w(JSON.stringify(M)!==JSON.stringify(Y.edges))}},[g,h]),B=({data:z,selected:Y})=>n.jsxs(cr,{sx:{backgroundColor:Y?"#f5f7ff":"white",border:`2px solid ${Y?"#4f46e5":"#6366f1"}`,borderRadius:2,p:2,minWidth:150,position:"relative"},children:[n.jsx(kl,{type:"target",position:cn.Top,style:{visibility:"hidden"}}),n.jsx(Bt,{variant:"body1",sx:{fontWeight:600,textAlign:"center"},children:z.label||"Trigger"}),n.jsx(kl,{type:"source",position:cn.Bottom,style:{bottom:-8}})]}),G=({data:z,selected:Y})=>n.jsxs(cr,{sx:{backgroundColor:Y?"#f5f7ff":"white",border:`2px solid ${Y?"#4f46e5":"#6366f1"}`,borderRadius:2,p:2,minWidth:200,position:"relative"},children:[n.jsx(kl,{type:"target",position:cn.Top,style:{bottom:-8}}),n.jsx(Bt,{variant:"body1",sx:{fontWeight:600,textAlign:"center",mb:1},children:"Condition"}),z.variable&&n.jsxs(cr,{sx:{mb:1,p:1,backgroundColor:"#f5f5f5",borderRadius:1},children:[n.jsx(Bt,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:.5},children:"Variable"}),n.jsx(Bt,{variant:"body2",sx:{fontWeight:500},children:z.variable}),z.operator&&n.jsxs(n.Fragment,{children:[n.jsx(Bt,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:"Operator"}),n.jsx(Bt,{variant:"body2",sx:{fontWeight:500},children:z.operator})]}),z.value&&n.jsxs(n.Fragment,{children:[n.jsx(Bt,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:"Value"}),n.jsx(Bt,{variant:"body2",sx:{fontWeight:500},children:z.value})]})]}),n.jsx(kl,{type:"source",position:cn.Bottom,style:{bottom:-8}})]}),$=u.useMemo(()=>({trigger:B,condition:G}),[]);return n.jsxs(cr,{sx:{height:"calc(100vh - 64px)",width:"100%",position:"relative"},children:[n.jsxs(Ms,{elevation:1,sx:{position:"absolute",top:0,left:0,right:0,zIndex:10,p:2,display:"flex",alignItems:"center",gap:2,borderRadius:0},children:[n.jsx(es,{onClick:()=>r("/marketing/automations"),size:"small",children:n.jsx(zx,{})}),n.jsx(Bt,{variant:"h6",sx:{fontWeight:600},children:o?.name||"Automation"})]}),n.jsxs(cr,{sx:{height:"100%",width:"100%",pt:8,display:"flex"},children:[n.jsx(cr,{sx:{flex:1,height:"100%"},children:n.jsxs(Qk,{nodes:c,edges:h,onNodesChange:R,onEdgesChange:L,onNodeClick:(z,Y)=>{z.stopPropagation(),b(Y.id)},onPaneClick:()=>b(null),nodeTypes:$,fitView:!0,attributionPosition:"bottom-left",children:[n.jsx(xD,{variant:"dots",gap:20,size:1,color:"#e0e0e0"}),n.jsx(gD,{}),n.jsx(hD,{})]})}),n.jsx(Ms,{elevation:2,sx:{width:320,height:"100%",borderRadius:0,borderLeft:"1px solid #e0e0e0",display:"flex",flexDirection:"column"},children:y&&c.find(z=>z.id===y&&z.type==="condition")?n.jsxs(n.Fragment,{children:[n.jsx(cr,{sx:{p:2,borderBottom:"1px solid #e0e0e0",display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:n.jsxs(cr,{sx:{display:"flex",alignItems:"center",gap:1},children:[n.jsx(BI,{sx:{color:"text.secondary",fontSize:20}}),n.jsx(Bt,{variant:"h6",sx:{fontWeight:600},children:"Condition"})]})}),n.jsx(cr,{sx:{p:2,borderBottom:"1px solid #e0e0e0"},children:n.jsxs(cr,{sx:{display:"flex",alignItems:"flex-start",gap:1},children:[n.jsx(Bt,{variant:"body2",color:"text.secondary",children:"Take different actions based on the conditions you set"}),n.jsx(GN,{sx:{color:"text.secondary",fontSize:16,mt:.25}})]})}),n.jsxs(cr,{sx:{flex:1,overflow:"auto",p:2},children:[n.jsx(Bt,{variant:"h6",sx:{fontWeight:600,mb:2},children:"IF"}),n.jsxs(tf,{fullWidth:!0,sx:{mb:2},children:[n.jsx(ix,{id:"operator-label",children:"Operator"}),n.jsxs(Kd,{labelId:"operator-label",label:"Operator",value:c.find(z=>z.id===y)?.data?.operator||"",disabled:!0,children:[n.jsx(zn,{value:"equal",children:"Equal to"}),n.jsx(zn,{value:"not-equal",children:"Not equal to"}),n.jsx(zn,{value:"greater-than",children:"Greater than"}),n.jsx(zn,{value:"greater-than-or-equal",children:"Greater than or equal to"}),n.jsx(zn,{value:"less-than",children:"Less than"}),n.jsx(zn,{value:"less-than-or-equal",children:"Less than or equal to"}),n.jsx(zn,{value:"is-at-least-one-of",children:"Is at least one of"}),n.jsx(zn,{value:"is-not-any-of",children:"Is not any of"}),n.jsx(zn,{value:"does-not-exist",children:"Does not exist"}),n.jsx(zn,{value:"exists",children:"Exists"})]})]}),n.jsxs(cr,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:2,backgroundColor:"#fafafa"},children:[n.jsx(Bt,{variant:"body2",color:"text.secondary",children:"Variable"}),n.jsx(Bt,{variant:"body1",sx:{fontWeight:500},children:c.find(z=>z.id===y)?.data?.variable||"-"}),n.jsx(Bt,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Value"}),n.jsx(Bt,{variant:"body1",sx:{fontWeight:500},children:c.find(z=>z.id===y)?.data?.value||"-"})]})]})]}):y&&c.find(z=>z.id===y&&z.type==="action")?n.jsx(n.Fragment,{children:n.jsxs(cr,{sx:{p:2,borderBottom:"1px solid #e0e0e0"},children:[n.jsx(Bt,{variant:"h6",sx:{fontWeight:600},children:"Action"}),n.jsx(Bt,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:c.find(z=>z.id===y)?.data?.label||"Action"})]})}):y&&c.find(z=>z.id===y&&z.type==="trigger")?n.jsx(n.Fragment,{children:n.jsxs(cr,{sx:{p:2,borderBottom:"1px solid #e0e0e0"},children:[n.jsx(Bt,{variant:"h6",sx:{fontWeight:600},children:"Trigger"}),n.jsx(Bt,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:c.find(z=>z.id===y)?.data?.label||"Trigger"})]})}):n.jsx(cr,{sx:{p:2},children:n.jsx(Bt,{variant:"body2",color:"text.secondary",children:"Select a node to view details."})})})]}),v&&n.jsx(cr,{sx:{position:"absolute",bottom:80,right:24},children:n.jsxs(Ms,{elevation:3,sx:{p:1.5,borderRadius:2,display:"flex",alignItems:"center",gap:1.5},children:[n.jsx(Bt,{variant:"body2",children:"Unsaved changes"}),n.jsx(Zn,{variant:"contained",size:"small",onClick:async()=>{if(!o?._id)return;const z={...o.flowData||{},nodes:c,edges:h};try{await k(o._id,{flowData:z}),C.current={nodes:N(c),edges:O(h)},w(!1)}catch{}},children:"Update"})]})})]})},kwe=()=>{const s=dr(),[r,e]=u.useState("trigger"),t=()=>{e("trigger"),s("/marketing/automations/create")},a=()=>{s("/marketing/automations/templates")};return n.jsxs(cr,{sx:{minHeight:"calc(100vh - 64px)",backgroundColor:"#f5f5f5",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",p:4,position:"relative"},children:[n.jsx(cr,{sx:{position:"absolute",top:{xs:20,md:40},right:{xs:20,md:40},display:{xs:"none",md:"block"}},children:n.jsxs(cr,{sx:{position:"relative",width:120,height:120},children:[n.jsx(cr,{sx:{position:"absolute",top:10,left:20,width:40,height:50,backgroundColor:"#e8eefc",borderRadius:"20px 20px 0 0",transform:"rotate(-15deg)","&::before":{display:"none"},"&::after":{display:"none"}}}),n.jsxs(cr,{sx:{position:"absolute",top:30,right:0,width:200,height:100},children:[n.jsx(cr,{sx:{position:"absolute",left:0,top:"50%",transform:"translateY(-50%)",width:60,height:40,backgroundColor:"white",borderRadius:2,border:"2px solid #e3e8ff",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(cr,{sx:{width:"80%",height:"60%",border:"2px solid #e0e0e0",borderTop:"none",borderRadius:"0 0 20px 20px"}})}),n.jsxs(cr,{sx:{position:"absolute",right:0,top:0,width:80,height:35,border:"2px solid #e3e8ff",borderRadius:2,backgroundColor:"white",display:"flex",alignItems:"center",paddingLeft:1},children:[n.jsx(cr,{sx:{width:8,height:8,borderRadius:"50%",backgroundColor:"#ff6b6b",marginRight:1}}),n.jsx(cr,{sx:{width:40,height:2,backgroundColor:"#e0e0e0"}})]}),n.jsxs(cr,{sx:{position:"absolute",right:0,bottom:0,width:80,height:35,border:"2px solid #e3e8ff",borderRadius:2,backgroundColor:"white",display:"flex",alignItems:"center",paddingLeft:1},children:[n.jsx(cr,{sx:{width:0,height:0,borderLeft:"4px solid transparent",borderRight:"4px solid transparent",borderBottom:"6px solid #4caf50",marginRight:1}}),n.jsx(cr,{sx:{width:40,height:2,backgroundColor:"#e0e0e0"}})]}),n.jsx(cr,{sx:{position:"absolute",left:60,top:"50%",transform:"translateY(-50%)",width:60,height:1,borderTop:"2px solid #e3e8ff",borderRight:"2px solid #e3e8ff",borderRadius:"0 20px 0 0","&::after":{content:'""',position:"absolute",top:-20,right:0,width:1,height:20,borderLeft:"2px solid #e3e8ff"}}}),n.jsx(cr,{sx:{position:"absolute",left:60,top:"50%",transform:"translateY(-50%)",width:60,height:1,borderTop:"2px solid #e3e8ff",borderRight:"2px solid #e3e8ff",borderRadius:"0 0 0 20px","&::after":{content:'""',position:"absolute",top:20,right:0,width:1,height:20,borderLeft:"2px solid #e3e8ff"}}})]})]})}),n.jsxs(cr,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:4,maxWidth:600,textAlign:"center"},children:[n.jsx(Bt,{variant:"h4",sx:{fontWeight:700,color:"#424242",mb:2},children:"Start building"}),n.jsxs(cr,{sx:{display:"flex",gap:2,flexDirection:{xs:"column",sm:"row"},width:"100%",maxWidth:500},children:[n.jsx(Zn,{variant:"contained",onClick:t,sx:{flex:1,backgroundColor:r==="trigger"?"#111827":"#fff",color:r==="trigger"?"#fff":"#374151",textTransform:"none",py:1.5,px:3,borderRadius:2,border:r==="trigger"?"none":"1px solid #e5e7eb",fontWeight:600,position:"relative","&:hover":{backgroundColor:r==="trigger"?"#111827":"#f9fafb"},"&::after":{display:"none"}},children:"Select a trigger"}),n.jsx(Zn,{variant:"outlined",onClick:a,sx:{flex:1,backgroundColor:"#fff",color:"#374151",textTransform:"none",py:1.5,px:3,borderRadius:2,border:"1px solid #e5e7eb",fontWeight:600,"&:hover":{backgroundColor:"#f9fafb",borderColor:"#e5e7eb"}},children:"Browse templates"})]})]})]})},_we=[{id:"1",title:"Recover abandoned cart",description:"Send an email 10 hours after a customer gets to checkout but doesn't place an order to...",creator:"Shopify",requiresApp:!0},{id:"2",title:"Recover abandoned cart",description:"Send a marketing email when a customer adds at least one product to their cart but doesn't...",creator:"Shopify",requiresApp:!0},{id:"3",title:"Convert abandoned product browse",description:"Send a marketing email to customers who viewed a product but didn't add it to their cart. ...",creator:"Shopify",requiresApp:!0},{id:"4",title:"Welcome new subscribers with a discount email",description:"Send new subscribers a welcome email with a discount when they subscribe through a form ...",creator:"Shopify",requiresApp:!0},{id:"5",title:"Thank customers after they purchase",description:"Send a different thank you email to customers after their first and second purchases. 1 day aft...",creator:"Shopify",requiresApp:!0},{id:"6",title:"Welcome new subscribers with a discount series",description:"Send new subscribers a welcome series with 4 emails when they subscribe through a form on...",creator:"Shopify",requiresApp:!0},{id:"7",title:"Celebrate customer birthday",description:"Build customer loyalty by offering customers a special discount on their birthday. This...",creator:"Shopify",requiresApp:!0},{id:"8",title:"Win back customers",description:"Give a discount to customers who haven't placed an order at your store in the last 60 day...",creator:"Shopify",requiresApp:!0},{id:"9",title:"Upsell customers after their first purchase",description:"Send a marketing email showcasing featured products after a customer makes their first...",creator:"Shopify",requiresApp:!0}],Ewe=()=>{const s=dr(),[r,e]=u.useState(""),[t,a]=u.useState(""),[o,i]=u.useState(""),l=()=>{s("/marketing/automations/new")};return n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Automation templates"}),n.jsx("button",{onClick:l,className:"px-3 py-1.5 bg-gray-900 text-white rounded hover:bg-gray-800 transition-colors text-sm font-medium",children:"Create custom automation"})]})})}),n.jsxs("div",{className:"max-w-7xl mx-auto py-6 px-4",children:[n.jsxs("div",{className:"flex gap-2 items-center flex-wrap mb-4",children:[n.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[n.jsx(no,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Searching all templates",value:r,onChange:c=>e(c.target.value),className:"w-full pl-10 pr-3 py-1.5 text-base border border-gray-200 rounded focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors"})]}),n.jsxs("select",{value:t,onChange:c=>a(c.target.value),className:"px-3 py-1.5 text-base border border-gray-200 rounded focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors min-w-[150px]",children:[n.jsx("option",{value:"",children:"Required apps"}),n.jsx("option",{value:"email",children:"Email"})]}),n.jsxs("select",{value:o,onChange:c=>i(c.target.value),className:"px-3 py-1.5 text-base border border-gray-200 rounded focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors min-w-[150px]",children:[n.jsx("option",{value:"",children:"App status"}),n.jsx("option",{value:"installed",children:"Installed"}),n.jsx("option",{value:"not-installed",children:"Not Installed"})]}),n.jsx("button",{className:"p-1.5 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:n.jsx(y2,{className:"w-4 h-4 text-gray-600"})})]}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:_we.map(c=>n.jsxs("div",{className:"p-3 border border-gray-200 bg-white flex flex-col cursor-pointer hover:bg-gray-50 transition-colors",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:c.title}),n.jsx("p",{className:"text-xs text-gray-600 mb-3 flex-grow",children:c.description}),n.jsxs("div",{className:"flex justify-between items-center mt-auto",children:[n.jsxs("p",{className:"text-xs text-gray-600",children:["Created by ",c.creator]}),c.requiresApp&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"text-xs text-gray-600",children:"Required app"}),n.jsx("div",{className:"w-5 h-5 bg-gray-700 flex items-center justify-center",children:n.jsx(jx,{className:"w-3 h-3 text-white"})})]})]})]},c.id))})]})]})})},Twe=({onBack:s})=>{const r=u.useCallback(()=>{s()},[s]);return n.jsxs("div",{className:"flex flex-row items-center gap-3 mb-4 border-b border-gray-200 pb-4",children:[n.jsx("button",{onClick:r,className:"cursor-pointer p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(gn,{className:"w-5 h-5"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Charges"})]})},Owe=({cell:s,index:r})=>n.jsx("td",{className:`py-3 px-3 text-sm text-gray-900 border-b border-gray-100 ${r===4?"font-medium":""}`,children:s}),Pwe=({rowData:s})=>n.jsx("tr",{children:s.map((r,e)=>n.jsx(Owe,{cell:r,index:e},`${r}-${e}`))}),Awe=({header:s})=>n.jsx("th",{className:"text-left py-2 px-3 text-xs font-medium text-gray-700 border-b border-gray-200",children:s}),Mwe=({headers:s})=>n.jsx("tr",{children:s.map(r=>n.jsx(Awe,{header:r},r))}),Iwe=()=>{const s=["Bill number","Date","Charge type","Source","Amount"],r=["#446589948","Nov 17, 2025","Subscription charges","-","0.00"];return n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full border-collapse",children:[n.jsx("thead",{className:"bg-white",children:n.jsx(Mwe,{headers:s})}),n.jsx("tbody",{children:n.jsx(Pwe,{rowData:r})})]})})},Rwe=()=>{const s=u.useCallback(()=>{window.history.back()},[]);return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsx(Twe,{onBack:s}),n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4 mb-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row gap-3 justify-between items-start md:items-center mb-4 border-b border-gray-200 pb-4",children:[n.jsx("div",{className:"flex flex-row gap-2 flex-wrap",children:["Date","Bill number","Charge type"].map(r=>n.jsx("span",{className:"px-2 py-1 border border-gray-200 text-xs font-medium text-gray-700",children:r},r))}),n.jsx("button",{className:"cursor-pointer px-3 py-1.5 bg-gray-900 text-white text-sm hover:bg-gray-800 transition-colors",children:"Export"})]}),n.jsx(Iwe,{}),n.jsxs("div",{className:"flex justify-between items-center mt-4 pt-4 border-t border-gray-200",children:[n.jsx("p",{className:"text-xs text-gray-600",children:"Showing 1 result"}),n.jsxs("div",{className:"flex flex-row gap-1",children:[n.jsx("button",{className:"min-w-[32px] px-2 py-1 border border-gray-200 text-xs text-gray-400 cursor-not-allowed",disabled:!0,children:""}),n.jsx("button",{className:"min-w-[32px] px-2 py-1 border border-gray-200 text-xs text-gray-400 cursor-not-allowed",disabled:!0,children:""})]})]})]})]})})},Dwe=({open:s,onClose:r,paymentType:e,onPaymentTypeChange:t,country:a,onCountryChange:o,state:i,onStateChange:l,consent:c,onConsentChange:d})=>n.jsx(en,{open:s,onClose:r,title:"Add credit card",maxWidth:"md",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{disabled:!c,className:`px-3 py-1.5 text-sm font-medium text-white transition-colors ${c?"bg-gray-900 hover:bg-gray-800":"bg-gray-400 cursor-not-allowed"}`,children:"Save card"})]}),children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Payment method type"}),n.jsxs("select",{value:e,onChange:t,className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400",children:[n.jsx("option",{value:"Credit card",children:"Credit card"}),n.jsx("option",{value:"Debit card",children:"Debit card"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Card number"}),n.jsx("input",{type:"text",className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Expires"}),n.jsx("input",{type:"text",placeholder:"MM / YY",className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"CVV"}),n.jsx("input",{type:"text",className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]})]}),n.jsx("h3",{className:"text-sm font-medium text-gray-700 mt-2",children:"Billing address"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Country/region"}),n.jsxs("select",{value:a,onChange:o,className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400",children:[n.jsx("option",{value:"India",children:"India"}),n.jsx("option",{value:"United States",children:"United States"})]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"First name"}),n.jsx("input",{type:"text",className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Last name"}),n.jsx("input",{type:"text",className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Address"}),n.jsxs("div",{className:"relative",children:[n.jsx(no,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),n.jsx("input",{type:"text",className:"w-full pl-10 pr-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Apartment, suite, etc"}),n.jsx("input",{type:"text",className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"City"}),n.jsx("input",{type:"text",className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"State"}),n.jsxs("select",{value:i,onChange:l,className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400",children:[n.jsx("option",{value:"Andaman and Nicobar Islands",children:"Andaman and Nicobar Islands"}),n.jsx("option",{value:"Delhi",children:"Delhi"}),n.jsx("option",{value:"Maharashtra",children:"Maharashtra"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"PIN code"}),n.jsx("input",{type:"text",className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Phone"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-sm",children:" +91"}),n.jsx("input",{type:"text",className:"w-full pl-16 pr-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Email"}),n.jsx("input",{type:"email",className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx("input",{type:"checkbox",id:"consent",checked:c,onChange:d,className:"mt-1 w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400"}),n.jsx("label",{htmlFor:"consent",className:"text-sm text-gray-900 font-medium",children:"I consent to having my card saved securely for future payments"})]}),c&&n.jsx("div",{className:"bg-blue-50 p-3 border border-blue-200 text-blue-900 text-sm",children:"You will be redirected to Razorpay to finish authentication and may be requested for a one-time mandate for 15,000. This will allow Ziplofy to automatically charge future bills below the mandate amount."})]})}),Lwe=({onManage:s})=>{const r=u.useCallback(t=>{s(t)},[s]),e=[{label:"Store address",value:"India",managePath:"/settings/general"},{label:"Currency",value:"INR (Indian Rupee)",managePath:void 0}];return n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Address and currency"}),n.jsx(Ps,{className:"w-4 h-4 text-gray-500"})]}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"The options for your billing currency are determined by your billing address."}),e.map(t=>n.jsxs("div",{className:"border border-gray-200 p-3 mb-3 flex justify-between items-center last:mb-0",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:t.label}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.value})]}),n.jsx("button",{onClick:()=>r(t.managePath),className:"px-3 py-1.5 border border-gray-200 text-xs text-gray-700 hover:bg-gray-50 transition-colors",children:"Manage"})]},t.label))]})},Fwe=({onAddPayment:s})=>{const r=u.useCallback(()=>{s()},[s]);return n.jsxs("div",{className:"border border-gray-200 bg-white/95 mb-4 p-4",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-1",children:"Payment methods"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"For purchases and bills in Ziplofy"}),n.jsx("button",{onClick:r,className:"w-full px-3 py-2 border border-gray-200 text-sm text-gray-700 hover:bg-gray-50 transition-colors flex items-center justify-start",children:"+ Add payment method"})]})},Bwe=({onBack:s})=>{const r=u.useCallback(()=>{s()},[s]);return n.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b border-gray-200 pb-4",children:[n.jsx("button",{onClick:r,className:"cursor-pointer p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(gn,{className:"w-5 h-5"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Billing profile"})]})},zwe=({onAddGstin:s})=>{const r=u.useCallback(()=>{s()},[s]);return n.jsxs("div",{className:"border border-gray-200 bg-white/95 mb-4 p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Tax ID"}),n.jsx(Ps,{className:"w-4 h-4 text-gray-500"})]}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Ziplofy is required to charge Goods and Services Tax (GST) in India. Your bills may be exempt from Indian GST if you are GST registered in India and enter a valid GSTIN."}),n.jsx("button",{onClick:r,className:"w-full px-3 py-2 border border-gray-200 text-sm text-gray-700 hover:bg-gray-50 transition-colors flex items-center justify-start",children:"+ Add GSTIN"})]})},$we=({open:s,onClose:r,gstin:e,onGstinChange:t})=>n.jsx(en,{open:s,onClose:r,title:"Add tax info",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{disabled:e.trim().length!==15,className:`px-3 py-1.5 text-sm font-medium text-white transition-colors ${e.trim().length===15?"bg-gray-900 hover:bg-gray-800":"bg-gray-400 cursor-not-allowed"}`,children:"Add GSTIN"})]}),children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Your Ziplofy bills may be exempt from Indian GST if you are GST registered in India and enter a valid GSTIN."}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"GSTIN"}),n.jsx("input",{type:"text",placeholder:"15 digit identifier",value:e,onChange:t,className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]})]})}),Uwe=()=>{const s=dr(),r=Ri(),[e,t]=u.useState(!1),[a,o]=u.useState("Credit card"),[i,l]=u.useState("India"),[c,d]=u.useState("Andaman and Nicobar Islands"),[p,h]=u.useState(!1),[g,y]=u.useState(!1),[b,v]=u.useState("");u.useEffect(()=>{new URLSearchParams(r.search).get("showAddPaymentModal")==="true"&&t(!0)},[r.search]);const w=u.useCallback(()=>{s("/settings/billing")},[s]),C=u.useCallback(()=>{t(!0)},[]),k=u.useCallback(()=>{t(!1)},[]),N=u.useCallback(Y=>{o(Y.target.value)},[]),O=u.useCallback(Y=>{l(Y.target.value)},[]),R=u.useCallback(Y=>{d(Y.target.value)},[]),L=u.useCallback(Y=>{h(Y.target.checked)},[]),B=u.useCallback(()=>{y(!0)},[]),G=u.useCallback(()=>{y(!1)},[]),$=u.useCallback(Y=>{v(Y.target.value)},[]),z=u.useCallback(Y=>{Y&&s(Y)},[s]);return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsx(Bwe,{onBack:w}),n.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Your payment methods, tax ID, billing currency and store address"}),n.jsx(Fwe,{onAddPayment:C}),n.jsx(zwe,{onAddGstin:B}),n.jsx(Lwe,{onManage:z}),n.jsx(Dwe,{open:e,onClose:k,paymentType:a,onPaymentTypeChange:N,country:i,onCountryChange:O,state:c,onStateChange:R,consent:p,onConsentChange:L}),n.jsx($we,{open:g,onClose:G,gstin:b,onGstinChange:$})]})})},Vwe=({onNavigateToProfile:s})=>{const r=u.useCallback(()=>{s()},[s]);return n.jsxs("div",{className:"flex flex-row justify-between items-center mb-4 border-b border-gray-200 pb-4",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Billing"}),n.jsx("button",{className:"cursor-pointer px-3 py-1.5 border border-gray-200 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:r,children:"Billing profile"})]})},Hwe=({onViewCharges:s})=>{const[r,e]=u.useState("all"),[t,a]=u.useState(!1),o=u.useRef(null),i=u.useRef(null),l=u.useCallback(()=>{a(b=>!b)},[]),c=u.useCallback(()=>{a(!1)},[]),d=u.useCallback(()=>{c(),s()},[c,s]),p=u.useCallback(b=>{e(b)},[]),h=u.useCallback(()=>{p("all")},[p]),g=u.useCallback(()=>{p("paid")},[p]),y=u.useCallback(()=>{p("unpaid")},[p]);return u.useEffect(()=>{const b=v=>{o.current&&!o.current.contains(v.target)&&i.current&&!i.current.contains(v.target)&&c()};return t&&document.addEventListener("mousedown",b),()=>{document.removeEventListener("mousedown",b)}},[t,c]),n.jsxs("div",{className:"border border-gray-200 bg-white/95",children:[n.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between relative",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Past bills"}),n.jsxs("div",{className:"relative",children:[n.jsx("button",{ref:i,className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-50 transition-colors",onClick:l,children:n.jsx(Jd,{className:"w-4 h-4"})}),t&&n.jsx("div",{ref:o,className:"absolute right-0 top-full mt-1 bg-white border border-gray-200 z-10 min-w-[180px]",children:n.jsx("button",{className:"w-full px-3 py-2 text-left text-xs text-gray-700 hover:bg-gray-50 transition-colors",onClick:d,children:"View in charge table"})})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between px-4 py-3 gap-3 border-b border-gray-200",children:[n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{className:`px-2 py-1 text-xs font-medium transition-colors ${r==="all"?"bg-gray-100 text-gray-900":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,onClick:h,children:"All"}),n.jsx("button",{className:`px-2 py-1 text-xs font-medium transition-colors ${r==="paid"?"bg-gray-100 text-gray-900":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,onClick:g,children:"Paid"}),n.jsx("button",{className:`px-2 py-1 text-xs font-medium transition-colors ${r==="unpaid"?"bg-gray-100 text-gray-900":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,onClick:y,children:"Unpaid"})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{className:"p-1.5 border border-gray-200 hover:bg-gray-50 transition-colors",children:n.jsx(no,{className:"w-3.5 h-3.5 text-gray-600"})}),n.jsx("button",{className:"p-1.5 border border-gray-200 hover:bg-gray-50 transition-colors",children:n.jsx(af,{className:"w-3.5 h-3.5 text-gray-600"})}),n.jsx("button",{className:"p-1.5 border border-gray-200 hover:bg-gray-50 transition-colors",children:n.jsx(ou,{className:"w-3.5 h-3.5 text-gray-600"})})]})]}),n.jsx("div",{className:"border border-gray-200 mx-4 my-4 h-[200px] flex items-center justify-center bg-gray-50",children:n.jsx("p",{className:"text-xs text-gray-600",children:"Your past bills will appear here."})}),n.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-t border-gray-200",children:[n.jsx("p",{className:"text-xs text-gray-600",children:"Showing 0 results"}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{className:"min-w-[32px] px-2 py-1 border border-gray-200 text-xs text-gray-400 cursor-not-allowed",disabled:!0,children:""}),n.jsx("button",{className:"min-w-[32px] px-2 py-1 border border-gray-200 text-xs text-gray-400 cursor-not-allowed",disabled:!0,children:""})]})]})]})},Wwe=({onViewBill:s,onAddPayment:r,handleVisitPlanSettings:e})=>{const t=u.useCallback(()=>{s()},[s]),a=u.useCallback(()=>{r()},[r]);return n.jsxs("div",{className:"border border-gray-200 bg-white/95 mb-4",children:[n.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Upcoming bill"}),n.jsxs("div",{className:"text-2xl font-medium text-gray-900",children:["0.00 ",n.jsx("span",{className:"text-base",children:"INR"})]}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Next bill will be charged today"})]}),n.jsx("button",{className:"cursor-pointer text-sm text-gray-700 hover:underline",onClick:t,children:"View bill"})]}),n.jsx("div",{className:"p-4 border-b border-gray-200",children:n.jsx("button",{className:"w-full px-3 py-2 border border-gray-200 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",onClick:a,children:"+ Add payment method"})}),n.jsx("div",{className:"p-4",children:n.jsxs("p",{className:"text-xs text-gray-600",children:["To make changes to your plan,"," ",n.jsx("span",{onClick:e,className:"text-gray-700 cursor-pointer hover:underline",children:"visit plan settings"})]})})]})},qwe=()=>{const s=dr(),r=u.useCallback(()=>{s("/settings/billing/profile")},[s]),e=u.useCallback(()=>{s("/settings/billing/upcoming")},[s]),t=u.useCallback(()=>{s("/settings/billing/profile?showAddPaymentModal=true")},[s]),a=u.useCallback(()=>{s("/settings/billing/charges")},[s]),o=u.useCallback(()=>{s("/settings/plan")},[]);return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsx(Vwe,{onNavigateToProfile:r}),n.jsxs("div",{className:"border border-gray-200 bg-gray-50 p-3 flex items-start gap-3 mb-4",children:[n.jsx(Ps,{className:"w-4 h-4 text-gray-600 mt-0.5 shrink-0"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Ensure your billing address meets India payment requirements"}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Indian payment regulations require specific address formatting."," ",n.jsx("span",{className:"text-gray-700 cursor-pointer hover:underline",children:"View address guidelines"})," ","to see the requirements, or"," ",n.jsx("span",{className:"text-gray-700 cursor-pointer hover:underline",children:"click here"})," ","to update your address now."]})]})]}),n.jsx(Wwe,{onViewBill:e,onAddPayment:t,handleVisitPlanSettings:o}),n.jsx(Hwe,{onViewCharges:a})]})})},Gwe=({onViewCharges:s})=>{const r=u.useCallback(()=>{s()},[s]),e=[{label:"Subtotal",value:"0.00"},{label:"Running total",value:"0.00"}];return n.jsxs("div",{className:"border border-gray-200 bg-white/95",children:[n.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Details"}),n.jsx("button",{className:"cursor-pointer px-3 py-1.5 border border-gray-200 text-xs text-gray-700 hover:bg-gray-50 transition-colors",onClick:r,children:"View in charge table"})]}),e.map(t=>n.jsxs("div",{className:"flex justify-between px-4 py-3 border-t border-gray-200",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.label}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.value})]},t.label))]})},Kwe=({onVisitPlanSettings:s})=>{const r=u.useCallback(()=>{s()},[s]);return n.jsxs("div",{className:"border border-gray-200 bg-white/95 mb-4",children:[n.jsxs("div",{className:"p-4",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-1",children:"Upcoming bill"}),n.jsxs("h3",{className:"text-2xl font-medium text-gray-900",children:["0.00 ",n.jsx("span",{className:"text-base",children:"INR"})]}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Next bill in 30 days or when your ~5,330 INR threshold is reached. You have 5,330 remaining."})]}),n.jsx("div",{className:"px-4 py-3 border-t border-gray-200",children:n.jsxs("p",{className:"text-xs text-gray-600",children:["To make changes to your plan,"," ",n.jsx("span",{onClick:r,className:"text-gray-700 cursor-pointer hover:text-gray-900 transition-colors",children:"visit plan settings"})]})})]})},Ywe=({onBack:s})=>{const r=u.useCallback(()=>{s()},[s]);return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4 pb-4 border-b border-gray-200",children:[n.jsx("button",{onClick:r,className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(gn,{className:"w-5 h-5"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Upcoming bill"})]}),n.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"My Store has charges on this bill"})]})},Zwe=()=>{const s=dr(),r=u.useCallback(()=>{s("/settings/billing")},[s]),e=u.useCallback(()=>{s("/settings/billing/charges")},[s]),t=u.useCallback(()=>{s("/settings/plan")},[s]);return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsx(Ywe,{onBack:r}),n.jsx(Kwe,{onVisitPlanSettings:t}),n.jsx(Gwe,{onViewCharges:e})]})})},Xwe=()=>n.jsxs("div",{children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 uppercase tracking-wide mb-2",children:"ADDITIONAL"}),n.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Used by some apps and social media channels"}),n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{className:"p-3 border border-gray-200 bg-white/95 flex items-center gap-3 cursor-pointer hover:bg-gray-50/95 transition-colors",children:[n.jsx("div",{className:"w-10 h-10 border border-gray-200 flex items-center justify-center bg-gray-50",children:n.jsx(xl,{className:"w-5 h-5 text-gray-600"})}),n.jsx("p",{className:"text-sm text-gray-900",children:"Cover Image"})]}),n.jsxs("div",{className:"p-3 border border-gray-200 bg-white/95 flex items-center gap-3 cursor-pointer hover:bg-gray-50/95 transition-colors",children:[n.jsx("div",{className:"w-10 h-10 border border-gray-200 flex items-center justify-center bg-gray-50",children:n.jsx(ib,{className:"w-5 h-5 text-gray-600"})}),n.jsx("p",{className:"text-sm text-gray-900",children:"Slogan"})]}),n.jsxs("div",{className:"p-3 border border-gray-200 bg-white/95 flex items-center gap-3 cursor-pointer hover:bg-gray-50/95 transition-colors",children:[n.jsx("div",{className:"w-10 h-10 border border-gray-200 flex items-center justify-center bg-gray-50",children:n.jsx(Qd,{className:"w-5 h-5 text-gray-600"})}),n.jsx("p",{className:"text-sm text-gray-900",children:"Short Description"})]}),n.jsxs("div",{className:"p-3 border border-gray-200 bg-white/95 flex items-center gap-3 cursor-pointer hover:bg-gray-50/95 transition-colors",children:[n.jsx("div",{className:"w-10 h-10 border border-gray-200 flex items-center justify-center bg-gray-50",children:n.jsx(fB,{className:"w-5 h-5 text-gray-600"})}),n.jsx("p",{className:"text-sm text-gray-900",children:"Social links"})]})]})]}),Qwe=({coverImageUrl:s,coverImageError:r,onCoverImageUrlChange:e,onCoverImageErrorChange:t,onMarkDirty:a})=>{const o=pt.useCallback(l=>{a(),e(l.target.value),t(!1)},[a,e,t]),i=pt.useCallback(()=>{t(!0)},[t]);return n.jsx("div",{className:"p-4 mb-8 border border-gray-200 bg-white/95",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Cover Image"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Key image that shows off your brand in profile pages and apps"}),n.jsxs("div",{className:"relative mb-3",children:[n.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-600",children:n.jsx(xl,{className:"w-4 h-4"})}),n.jsx("input",{type:"text",placeholder:"Enter cover image URL",value:s,onChange:o,className:"w-full pl-10 pr-3 py-2 text-sm border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),s&&n.jsx("div",{className:"border border-gray-200 p-3 mb-3 flex items-center justify-center min-h-[160px] bg-gray-50",children:r?n.jsxs("div",{className:"text-center",children:[n.jsx(xl,{className:"w-8 h-8 text-gray-400 mx-auto mb-1"}),n.jsx("p",{className:"text-xs text-gray-400",children:"Failed to load image"})]}):n.jsx("img",{src:s,alt:"Cover image preview",onError:i,className:"max-w-full max-h-[300px] object-contain"})}),!s&&n.jsxs("div",{className:"border border-dashed border-gray-300 p-6 flex flex-col items-center justify-center min-h-[160px] bg-gray-50",children:[n.jsx(xl,{className:"w-8 h-8 text-gray-400 mb-2"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Add a cover image"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"HEIC, WEBP, SVG, PNG, or JPG. Recommended: 1920x1080 pixels minimum."})]}),n.jsx("button",{className:"ml-4 w-9 h-9 bg-gray-900 text-white hover:bg-gray-800 transition-colors flex items-center justify-center",children:n.jsx(On,{className:"w-4 h-4"})})]})})},Jwe=()=>n.jsxs("div",{className:"mb-8",children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 uppercase tracking-wide mb-2",children:"ESSENTIAL"}),n.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Common brand assets used across apps and channels"}),n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{className:"p-3 border border-gray-200 bg-white/95 flex items-center gap-3 cursor-pointer hover:bg-gray-50/95 transition-colors",children:[n.jsx("div",{className:"w-10 h-10 border border-gray-200 flex items-center justify-center bg-gray-50",children:n.jsx("div",{className:"w-5 h-5 rounded-full bg-gray-300"})}),n.jsx("p",{className:"text-sm text-gray-900",children:"Default Logo"})]}),n.jsxs("div",{className:"p-3 border border-gray-200 bg-white/95 flex items-center gap-3 cursor-pointer hover:bg-gray-50/95 transition-colors",children:[n.jsx("div",{className:"w-10 h-10 border border-gray-200 flex items-center justify-center bg-gray-50",children:n.jsx("div",{className:"w-5 h-5 rounded-full bg-gray-300"})}),n.jsx("p",{className:"text-sm text-gray-900",children:"Square Logo"})]}),n.jsxs("div",{className:"p-3 border border-gray-200 bg-white/95 flex items-center gap-3 cursor-pointer hover:bg-gray-50/95 transition-colors",children:[n.jsx("div",{className:"w-10 h-10 border border-gray-200 flex items-center justify-center bg-gray-50",children:n.jsx(Ud,{className:"w-5 h-5 text-gray-600"})}),n.jsx("p",{className:"text-sm text-gray-900",children:"Colors"})]})]})]}),eje=({defaultLogoUrl:s,squareLogoUrl:r,defaultLogoError:e,squareLogoError:t,onDefaultLogoUrlChange:a,onSquareLogoUrlChange:o,onDefaultLogoError:i,onSquareLogoError:l,markDirty:c})=>n.jsxs("div",{className:"p-4 mb-8 border border-gray-200 bg-white/95 mt-8",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-6",children:"Logos"}),n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:"Default"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Used for most common logo applications"}),n.jsxs("div",{className:"relative mb-3",children:[n.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-600",children:n.jsx(xl,{className:"w-4 h-4"})}),n.jsx("input",{type:"text",placeholder:"Enter logo URL",value:s,onChange:d=>{c(),a(d.target.value),i(!1)},className:"w-full pl-10 pr-3 py-2 text-sm border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),s&&n.jsx("div",{className:"border border-gray-200 p-3 mb-3 flex items-center justify-center min-h-[120px] bg-gray-50",children:e?n.jsxs("div",{className:"text-center",children:[n.jsx(xl,{className:"w-8 h-8 text-gray-400 mx-auto mb-1"}),n.jsx("p",{className:"text-xs text-gray-400",children:"Failed to load image"})]}):n.jsx("img",{src:s,alt:"Default logo preview",onError:()=>i(!0),className:"max-w-full max-h-[120px] object-contain"})}),!s&&n.jsxs("div",{className:"border border-dashed border-gray-300 p-6 flex flex-col items-center justify-center min-h-[120px] bg-gray-50",children:[n.jsx(xl,{className:"w-8 h-8 text-gray-400 mb-2"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Add a default logo"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"HEIC, WEBP, SVG, PNG, or JPG. Recommended width: 512 pixels minimum."})]}),n.jsx("button",{className:"ml-4 w-9 h-9 bg-gray-900 text-white hover:bg-gray-800 transition-colors flex items-center justify-center",children:n.jsx(On,{className:"w-4 h-4"})})]})}),n.jsx("div",{children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:"Square"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Used by some social media channels. May be cropped into a circle."}),n.jsxs("div",{className:"relative mb-3",children:[n.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-600",children:n.jsx(xl,{className:"w-4 h-4"})}),n.jsx("input",{type:"text",placeholder:"Enter logo URL",value:r,onChange:d=>{c(),o(d.target.value),l(!1)},className:"w-full pl-10 pr-3 py-2 text-sm border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),r&&n.jsx("div",{className:"border border-gray-200 p-3 mb-3 flex items-center justify-center min-h-[120px] bg-gray-50",children:t?n.jsxs("div",{className:"text-center",children:[n.jsx(xl,{className:"w-8 h-8 text-gray-400 mx-auto mb-1"}),n.jsx("p",{className:"text-xs text-gray-400",children:"Failed to load image"})]}):n.jsx("img",{src:r,alt:"Square logo preview",onError:()=>l(!0),className:"max-w-full max-h-[120px] object-contain"})}),!r&&n.jsxs("div",{className:"border border-dashed border-gray-300 p-6 flex flex-col items-center justify-center min-h-[120px] bg-gray-50",children:[n.jsx(xl,{className:"w-8 h-8 text-gray-400 mb-2"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Add a square logo"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"HEIC, WEBP, SVG, PNG, or JPG. Recommended: 512x512 pixels minimum."})]}),n.jsx("button",{className:"ml-4 w-9 h-9 bg-gray-900 text-white hover:bg-gray-800 transition-colors flex items-center justify-center",children:n.jsx(On,{className:"w-4 h-4"})})]})}),n.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 flex items-center gap-2",children:[n.jsx("div",{className:"w-5 h-5 rounded-full bg-gradient-to-br from-yellow-400 via-red-500 to-cyan-400 flex items-center justify-center",children:n.jsx("span",{className:"text-xs",children:""})}),n.jsxs("p",{className:"text-xs text-gray-600",children:["No logo?"," ",n.jsx("a",{href:"https://hatchful.shopify.com",target:"_blank",rel:"noopener noreferrer",className:"text-gray-700 hover:text-gray-900 transition-colors",children:"Create one with Hatchful"})]})]})]}),tje=({primaryColor:s,contrastColor:r,primaryColorPickerAnchor:e,contrastColorPickerAnchor:t,primaryColorPickerRef:a,contrastColorPickerRef:o,onOpenPrimaryColorPicker:i,onClosePrimaryColorPicker:l,onOpenContrastColorPicker:c,onCloseContrastColorPicker:d,onPrimaryColorChange:p,onContrastColorChange:h,getPopoverPosition:g})=>n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:"Primary"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"The brand colors that appear on your store, social media, and more"}),s?n.jsx("div",{className:"mb-3",children:n.jsxs("div",{className:"flex items-center justify-between gap-3 p-3 border border-gray-200 bg-gray-50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 border border-gray-200",style:{backgroundColor:s}}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:"Primary color"}),n.jsx("p",{className:"text-sm text-gray-900",children:s.toUpperCase()})]})]}),n.jsx("button",{onClick:i,className:"p-1.5 text-gray-600 hover:bg-gray-100 transition-colors",children:n.jsx(Ud,{className:"w-4 h-4"})})]})}):n.jsxs("div",{className:"border border-dashed border-gray-300 p-4 flex items-center gap-3 bg-gray-50 mb-3",children:[n.jsx("div",{className:"w-10 h-10 border border-dashed border-gray-300 flex items-center justify-center bg-white",children:n.jsx(Ud,{className:"w-5 h-5 text-gray-400"})}),n.jsx("p",{className:"text-sm text-gray-600",children:"Add a primary color"})]}),s&&n.jsxs("div",{className:"mt-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Contrast"}),r?n.jsxs("div",{className:"flex items-center justify-between gap-3 p-3 border border-gray-200 bg-gray-50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 border border-gray-200",style:{backgroundColor:r}}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:"Contrast color"}),n.jsx("p",{className:"text-sm text-gray-900",children:r.toUpperCase()})]})]}),n.jsx("button",{onClick:c,className:"p-1.5 text-gray-600 hover:bg-gray-100 transition-colors",children:n.jsx(Ud,{className:"w-4 h-4"})})]}):n.jsxs("div",{onClick:c,className:"border border-dashed border-gray-300 p-3 flex items-center gap-3 bg-gray-50 cursor-pointer hover:border-gray-400 hover:bg-gray-100 transition-colors",children:[n.jsx("div",{className:"w-10 h-10 border border-dashed border-gray-300 flex items-center justify-center bg-white",children:n.jsx(Ud,{className:"w-5 h-5 text-gray-400"})}),n.jsx("p",{className:"text-sm text-gray-600",children:"Add a contrast color"})]})]})]}),n.jsx("button",{onClick:i,className:"ml-4 w-9 h-9 bg-gray-900 text-white hover:bg-gray-800 transition-colors flex items-center justify-center",children:n.jsx(On,{className:"w-4 h-4"})})]}),e&&n.jsxs("div",{ref:a,className:"absolute z-50 bg-white border border-gray-200 shadow-lg p-4 min-w-[280px]",style:g(e),children:[n.jsx("h4",{className:"text-sm font-medium mb-3",children:"Select Primary Color"}),n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"color",value:s||"#000000",onChange:y=>p(y.target.value),className:"w-[50px] h-[50px] border border-gray-200 cursor-pointer"}),n.jsxs("div",{className:"flex-1 relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-600 text-sm",children:"#"}),n.jsx("input",{type:"text",placeholder:"000000",value:s?s.replace("#",""):"",onChange:y=>{const b=y.target.value.replace(/[^0-9A-Fa-f]/g,"").slice(0,6);b.length<=6&&p(`#${b}`)},className:"w-full pl-7 pr-3 py-2 text-sm border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]})]}),n.jsx("button",{onClick:l,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Done"})]})]}),t&&n.jsxs("div",{ref:o,className:"absolute z-50 bg-white border border-gray-200 shadow-lg p-4 min-w-[280px]",style:g(t),children:[n.jsx("h4",{className:"text-sm font-medium mb-3",children:"Select Contrast Color"}),n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"color",value:r||"#ffffff",onChange:y=>h(y.target.value),className:"w-[50px] h-[50px] border border-gray-200 cursor-pointer"}),n.jsxs("div",{className:"flex-1 relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-600 text-sm",children:"#"}),n.jsx("input",{type:"text",placeholder:"ffffff",value:r?r.replace("#",""):"",onChange:y=>{const b=y.target.value.replace(/[^0-9A-Fa-f]/g,"").slice(0,6);b.length<=6&&h(`#${b}`)},className:"w-full pl-7 pr-3 py-2 text-sm border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]})]}),n.jsx("button",{onClick:d,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Done"})]})]})]}),rje=({secondaryColors:s,secondaryContrastColor:r,editingSecondaryColorIndex:e,tempSecondaryColor:t,secondaryColorPickerAnchor:a,secondaryContrastColorPickerAnchor:o,secondaryColorPickerRef:i,secondaryContrastColorPickerRef:l,onOpenSecondaryColorPicker:c,onCloseSecondaryColorPicker:d,onOpenSecondaryContrastColorPicker:p,onCloseSecondaryContrastColorPicker:h,onAddSecondaryColor:g,onRemoveSecondaryColor:y,onSecondaryContrastColorChange:b,onTempSecondaryColorChange:v,getPopoverPosition:w})=>n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:"Secondary"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Supporting colors used for accents and additional detail"}),s.length>0&&n.jsx("div",{className:"mb-3 flex flex-col gap-3",children:s.map((C,k)=>n.jsxs("div",{className:"flex items-center justify-between gap-3 p-3 border border-gray-200 bg-gray-50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 border border-gray-200",style:{backgroundColor:C}}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-xs text-gray-600",children:["Secondary color ",k+1]}),n.jsx("p",{className:"text-sm text-gray-900",children:C.toUpperCase()})]})]}),n.jsxs("div",{className:"flex gap-1.5",children:[n.jsx("button",{onClick:N=>c(N,k),className:"p-1.5 text-gray-600 hover:bg-gray-100 transition-colors",children:n.jsx(Ud,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>y(k),className:"p-1.5 text-gray-600 hover:bg-gray-100 transition-colors",children:n.jsx(Xs,{className:"w-4 h-4"})})]})]},k))}),s.length<2&&n.jsxs("div",{onClick:C=>c(C),className:`border border-dashed border-gray-300 p-4 flex items-center gap-3 bg-gray-50 cursor-pointer hover:border-gray-400 hover:bg-gray-100 transition-colors ${s.length>0?"mb-3":""}`,children:[n.jsx("div",{className:"w-10 h-10 border border-dashed border-gray-300 flex items-center justify-center bg-white",children:n.jsx(Ud,{className:"w-5 h-5 text-gray-400"})}),n.jsx("p",{className:"text-sm text-gray-600",children:"Add a secondary color"})]}),s.length>0&&n.jsxs("div",{className:"mt-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Contrasting color"}),r?n.jsxs("div",{className:"flex items-center justify-between gap-3 p-3 border border-gray-200 bg-gray-50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 border border-gray-200",style:{backgroundColor:r}}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:"Contrasting color"}),n.jsx("p",{className:"text-sm text-gray-900",children:r.toUpperCase()})]})]}),n.jsx("button",{onClick:p,className:"p-1.5 text-gray-600 hover:bg-gray-100 transition-colors",children:n.jsx(Ud,{className:"w-4 h-4"})})]}):n.jsxs("div",{onClick:p,className:"border border-dashed border-gray-300 p-3 flex items-center gap-3 bg-gray-50 cursor-pointer hover:border-gray-400 hover:bg-gray-100 transition-colors",children:[n.jsx("div",{className:"w-10 h-10 border border-dashed border-gray-300 flex items-center justify-center bg-white",children:n.jsx(Ud,{className:"w-5 h-5 text-gray-400"})}),n.jsx("p",{className:"text-sm text-gray-600",children:"Add a contrasting color"})]})]})]}),n.jsx("button",{onClick:C=>c(C),disabled:s.length>=2&&e===null,className:`ml-4 w-9 h-9 transition-colors flex items-center justify-center ${s.length>=2&&e===null?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gray-900 text-white hover:bg-gray-800"}`,children:n.jsx(On,{className:"w-4 h-4"})})]}),a&&n.jsxs("div",{ref:i,className:"absolute z-50 bg-white border border-gray-200 shadow-lg p-4 min-w-[280px]",style:w(a),children:[n.jsx("h4",{className:"text-sm font-medium mb-3",children:e!==null?"Edit Secondary Color":"Select Secondary Color"}),n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"color",value:t,onChange:C=>v(C.target.value),className:"w-[50px] h-[50px] border border-gray-200 cursor-pointer"}),n.jsxs("div",{className:"flex-1 relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-600 text-sm",children:"#"}),n.jsx("input",{type:"text",placeholder:"000000",value:t.replace("#",""),onChange:C=>{const k=C.target.value.replace(/[^0-9A-Fa-f]/g,"").slice(0,6);k.length<=6&&v(`#${k}`)},className:"w-full pl-7 pr-3 py-2 text-sm border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]})]}),n.jsx("button",{onClick:g,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Done"})]})]}),o&&n.jsxs("div",{ref:l,className:"absolute z-50 bg-white border border-gray-200 shadow-lg p-4 min-w-[280px]",style:w(o),children:[n.jsx("h4",{className:"text-sm font-medium mb-3",children:"Select Contrasting Color"}),n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"color",value:r||"#ffffff",onChange:C=>b(C.target.value),className:"w-[50px] h-[50px] border border-gray-200 cursor-pointer"}),n.jsxs("div",{className:"flex-1 relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-600 text-sm",children:"#"}),n.jsx("input",{type:"text",placeholder:"ffffff",value:r?r.replace("#",""):"",onChange:C=>{const k=C.target.value.replace(/[^0-9A-Fa-f]/g,"").slice(0,6);k.length<=6&&b(`#${k}`)},className:"w-full pl-7 pr-3 py-2 text-sm border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]})]}),n.jsx("button",{onClick:h,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Done"})]})]})]}),nje=({slogan:s,showSloganInput:r,onSloganChange:e,onShowSloganInputChange:t,onMarkDirty:a})=>{const o=pt.useCallback(l=>{const c=l.target.value;c.length<=80&&(a(),e(c))},[a,e]),i=pt.useCallback(()=>{!r&&!s&&t(!0)},[r,s,t]);return n.jsx("div",{className:"p-4 mb-8 border border-gray-200 bg-white/95",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Slogan"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Brand statement or tagline often used along with your logo"}),r||s?n.jsxs("div",{className:"mb-4",children:[n.jsx("input",{type:"text",placeholder:"Enter your slogan",value:s,onChange:o,maxLength:80,className:"w-full px-3 py-2 text-sm border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[s.length,"/80 characters"]})]}):n.jsxs("div",{className:"border border-dashed border-gray-300 p-4 flex items-center gap-3 bg-gray-50",children:[n.jsx("div",{className:"w-10 h-10 border border-dashed border-gray-300 flex items-center justify-center bg-white",children:n.jsx(ib,{className:"w-5 h-5 text-gray-400"})}),n.jsx("p",{className:"text-sm text-gray-600",children:"Add a slogan"})]})]}),n.jsx("button",{onClick:i,className:"ml-4 w-9 h-9 bg-gray-900 text-white hover:bg-gray-800 transition-colors flex items-center justify-center",children:n.jsx(On,{className:"w-4 h-4"})})]})})},sje=()=>n.jsx("div",{className:"p-6 mb-8 bg-gray-100 min-h-[300px] flex items-center justify-center relative",children:n.jsxs("div",{className:"flex items-center justify-center gap-6 w-full h-full",children:[n.jsxs("div",{className:"w-[240px] h-[160px] bg-gray-300 p-3 relative z-10",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-3",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gray-400"}),n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gray-400"}),n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gray-400"})]}),n.jsx("div",{className:"w-full h-6 bg-gray-200 mb-2"}),n.jsx("div",{className:"w-4/5 h-6 bg-gray-200"})]}),n.jsxs("div",{className:"w-[140px] h-[220px] bg-gray-300 p-3 relative z-20 -ml-6",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 mx-auto mb-3"}),n.jsx("div",{className:"w-full h-4 bg-gray-200 mb-2"}),n.jsx("div",{className:"w-[70%] h-4 bg-gray-200"})]})]})}),vD=u.createContext(void 0),aje=({children:s})=>{const[r,e]=u.useState(null),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async y=>{try{a(!0),i(null);const b=await nt.get(`/store-branding/store/${y}`),{success:v,data:w,message:C}=b.data;if(!v)throw new Error(C||"Failed to fetch store branding");return e(w||null),w||null}catch(b){const v=b?.response?.data?.message||b?.message||"Failed to fetch store branding";throw i(v),new Error(v)}finally{a(!1)}},[]),c=u.useCallback(async y=>{try{a(!0),i(null);const b=await nt.post("/store-branding",y),{success:v,data:w,message:C}=b.data;if(!v)throw new Error(C||"Failed to create store branding");return e(w),w}catch(b){const v=b?.response?.data?.message||b?.message||"Failed to create store branding";throw i(v),new Error(v)}finally{a(!1)}},[]),d=u.useCallback(async(y,b)=>{try{a(!0),i(null);const v=await nt.put(`/store-branding/${y}`,b),{success:w,data:C,message:k}=v.data;if(!w)throw new Error(k||"Failed to update store branding");return e(C),C}catch(v){const w=v?.response?.data?.message||v?.message||"Failed to update store branding";throw i(w),new Error(w)}finally{a(!1)}},[]),p=u.useCallback(()=>{e(null),i(null)},[]),h=u.useCallback(()=>{i(null)},[]),g={branding:r,loading:t,error:o,getByStoreId:l,create:c,update:d,clear:p,clearError:h};return n.jsx(vD.Provider,{value:g,children:s})},oje=()=>{const s=u.useContext(vD);if(!s)throw new Error("useStoreBranding must be used within a StoreBrandingProvider");return s},ije=()=>{const s=dr(),{activeStoreId:r}=Ur(),{branding:e,loading:t,getByStoreId:a,create:o,update:i}=oje(),[l,c]=u.useState(null),[d,p]=u.useState([]),[h,g]=u.useState({}),[y,b]=u.useState(""),[v,w]=u.useState(""),[C,k]=u.useState(!1),[N,O]=u.useState(!1),[R,L]=u.useState(""),[B,G]=u.useState(!1),[$,z]=u.useState(""),[Y,M]=u.useState(!1),[q,P]=u.useState(""),[H,D]=u.useState(!1),[X,se]=u.useState(""),[Q,xe]=u.useState(""),[K,Z]=u.useState(null),[ve,ae]=u.useState(null),[Se,Pe]=u.useState([]),[$e,we]=u.useState(""),[Ae,ze]=u.useState(null),[Ge,Ue]=u.useState(null),[ht,ee]=u.useState(null),[ue,Oe]=u.useState("#000000"),[J,I]=u.useState(!1),[V,re]=u.useState(!1),[pe,ge]=u.useState(!1),Ce=u.useRef(null),he=u.useRef(null),ie=u.useRef(null),Fe=u.useRef(null),We=u.useRef(null),Qe=u.useCallback(()=>{V&&I(!0)},[V]),de=u.useCallback(rr=>{c(rr.currentTarget)},[]),Ee=u.useCallback(()=>{c(null)},[]),le=u.useCallback(rr=>{d.includes(rr)||(p([...d,rr]),g({...h,[rr]:""}),Qe()),Ee()},[d,h,Qe,Ee]),Ye=u.useCallback(rr=>{p(d.filter(an=>an!==rr));const wr={...h};delete wr[rr],g(wr),Qe()},[d,h,Qe]),De=u.useCallback((rr,wr)=>{g({...h,[rr]:wr}),Qe()},[h,Qe]),ct=u.useCallback(rr=>dt.find(an=>an.name===rr)?.icon||n.jsx(Do,{className:"w-5 h-5"}),[]),ot=u.useCallback(rr=>({Facebook:"https://facebook.com/shopify",X:"https://x.com/shopify",Pinterest:"https://pinterest.com/shopify",Instagram:"https://instagram.com/shopify",TikTok:"https://tiktok.com/@shopify",Tumblr:"https://tumblr.com/shopify",Snapchat:"https://snapchat.com/add/shopify",YouTube:"https://youtube.com/shopify",Vimeo:"https://vimeo.com/shopify",LinkedIn:"https://linkedin.com/company/shopify",Spotify:"https://open.spotify.com/artist/shopify",WhatsApp:"https://wa.me/shopify",Threads:"https://threads.net/@shopify",KakaoTalk:"https://kakaotalk.com/shopify",LINE:"https://line.me/shopify",Discord:"https://discord.gg/shopify",Twitch:"https://twitch.tv/shopify",Weibo:"https://weibo.com/shopify",WeChat:"https://wechat.com/shopify","Shopify Inbox":"https://shopify.com/inbox"})[rr]||`https://${rr.toLowerCase()}.com/shopify`,[]),dt=[{name:"Facebook",icon:n.jsx(Do,{className:"w-5 h-5"})},{name:"X",icon:n.jsx(Do,{className:"w-5 h-5"})},{name:"Pinterest",icon:n.jsx(Do,{className:"w-5 h-5"})},{name:"Instagram",icon:n.jsx(Do,{className:"w-5 h-5"})},{name:"TikTok",icon:n.jsx($5,{className:"w-5 h-5"})},{name:"Tumblr",icon:n.jsx(Do,{className:"w-5 h-5"})},{name:"Snapchat",icon:n.jsx(rp,{className:"w-5 h-5"})},{name:"YouTube",icon:n.jsx(U1,{className:"w-5 h-5"})},{name:"Vimeo",icon:n.jsx(U1,{className:"w-5 h-5"})},{name:"LinkedIn",icon:n.jsx(Do,{className:"w-5 h-5"})},{name:"Spotify",icon:n.jsx($5,{className:"w-5 h-5"})},{name:"WhatsApp",icon:n.jsx(rp,{className:"w-5 h-5"})},{name:"Threads",icon:n.jsx(Do,{className:"w-5 h-5"})},{name:"KakaoTalk",icon:n.jsx(rp,{className:"w-5 h-5"})},{name:"LINE",icon:n.jsx(rp,{className:"w-5 h-5"})},{name:"Discord",icon:n.jsx(rp,{className:"w-5 h-5"})},{name:"Twitch",icon:n.jsx(U1,{className:"w-5 h-5"})},{name:"Weibo",icon:n.jsx(Do,{className:"w-5 h-5"})},{name:"WeChat",icon:n.jsx(rp,{className:"w-5 h-5"})},{name:"Shopify Inbox",icon:n.jsx(qw,{className:"w-5 h-5"})}],Ke=dt.filter(rr=>!d.includes(rr.name)),kt=u.useCallback(rr=>{Z(rr.currentTarget)},[]),At=u.useCallback(()=>{Z(null)},[]),xt=u.useCallback(rr=>{ae(rr.currentTarget)},[]),Xt=u.useCallback(()=>{ae(null)},[]),br=u.useCallback(rr=>{se(rr),Qe()},[Qe]),zt=u.useCallback(rr=>{xe(rr),Qe()},[Qe]),be=u.useCallback((rr,wr)=>{wr===void 0&&Se.length>=2||(wr!==void 0?(Ue(wr),Oe(Se[wr]||"#000000")):(Ue(null),Oe("#000000")),ze(rr.currentTarget))},[Se]),Be=u.useCallback(()=>{ze(null),Ue(null),Oe("#000000")},[]),et=u.useCallback(rr=>{ee(rr.currentTarget)},[]),wt=u.useCallback(()=>{ee(null)},[]),$t=u.useCallback(()=>{if(Ge!==null){const rr=[...Se];rr[Ge]=ue,Pe(rr)}else Se.length<2&&Pe([...Se,ue]);Be(),Qe()},[Ge,Se,ue,Be,Qe]),tr=u.useCallback(rr=>{Pe(Se.filter((wr,an)=>an!==rr)),Qe()},[Se,Qe]),Lr=u.useCallback(rr=>{we(rr),Qe()},[Qe]),tn=u.useCallback(async()=>{if(!r){gr.error("No store selected. Please select a store to save branding.");return}const rr=d.reduce((an,En)=>(h[En]!==void 0&&(an[En]=h[En]),an),{}),wr={defaultLogoUrl:y,squareLogoUrl:v,primaryColor:X,contrastColor:Q,secondaryColors:Se,secondaryContrastColor:$e,coverImageUrl:R,slogan:$,shortDescription:q,socialLinks:rr};ge(!0);try{e&&e._id?(await i(e._id,wr),gr.success("Branding updated successfully")):(await o({storeId:r,...wr}),gr.success("Branding saved successfully")),I(!1)}catch(an){const En=an?.response?.data?.message||an?.message||"Failed to save branding";gr.error(En)}finally{ge(!1)}},[r,d,e,Q,R,o,y,X,Se,$e,q,$,h,v,i]);u.useEffect(()=>{r&&(re(!1),a(r).catch(()=>{}))},[r,a]),u.useEffect(()=>{if(!t){if(re(!1),e){b(e.defaultLogoUrl??""),w(e.squareLogoUrl??""),se(e.primaryColor??""),xe(e.contrastColor??""),Pe(e.secondaryColors?[...e.secondaryColors]:[]),we(e.secondaryContrastColor??""),L(e.coverImageUrl??"");const rr=e.slogan??"";z(rr),M(!!e.slogan);const wr=e.shortDescription??"";P(wr),D(!!e.shortDescription);const an=e.socialLinks?{...e.socialLinks}:{};p(Object.keys(an)),g(an)}else b(""),w(""),se(""),xe(""),Pe([]),we(""),L(""),z(""),M(!1),P(""),D(!1),p([]),g({});k(!1),O(!1),G(!1),Oe("#000000"),I(!1),re(!0)}},[e,t]),u.useEffect(()=>{const rr=wr=>{Ce.current&&!Ce.current.contains(wr.target)&&l&&Ee(),he.current&&!he.current.contains(wr.target)&&K&&At(),ie.current&&!ie.current.contains(wr.target)&&ve&&Xt(),Fe.current&&!Fe.current.contains(wr.target)&&Ae&&Be(),We.current&&!We.current.contains(wr.target)&&ht&&wt()};return document.addEventListener("mousedown",rr),()=>{document.removeEventListener("mousedown",rr)}},[l,K,ve,Ae,ht,Ee,At,Xt,Be,wt]);const bn=rr=>{if(!rr)return{top:0,left:0};const wr=rr.getBoundingClientRect();return{top:wr.bottom+window.scrollY+4,left:wr.left+window.scrollX}},Fr=u.useCallback(()=>{s("/settings/general")},[s]);return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-[1200px] mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:Fr,className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(gn,{className:"w-5 h-5"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Brand"})]}),V&&J&&n.jsx("button",{onClick:tn,disabled:pe||t,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:pe?"Saving...":"Save"})]}),n.jsx(sje,{}),n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-6",children:"What should you add?"}),n.jsx(Jwe,{}),n.jsx(Xwe,{})]}),n.jsx(eje,{defaultLogoUrl:y,squareLogoUrl:v,defaultLogoError:C,squareLogoError:N,onDefaultLogoUrlChange:b,onSquareLogoUrlChange:w,onDefaultLogoError:k,onSquareLogoError:O,markDirty:Qe}),n.jsxs("div",{className:"p-4 mb-8 border border-gray-200 bg-white/95",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-6",children:"Colors"}),n.jsx(tje,{primaryColor:X,contrastColor:Q,primaryColorPickerAnchor:K,contrastColorPickerAnchor:ve,primaryColorPickerRef:he,contrastColorPickerRef:ie,onOpenPrimaryColorPicker:kt,onClosePrimaryColorPicker:At,onOpenContrastColorPicker:xt,onCloseContrastColorPicker:Xt,onPrimaryColorChange:br,onContrastColorChange:zt,getPopoverPosition:bn}),n.jsx(rje,{secondaryColors:Se,secondaryContrastColor:$e,editingSecondaryColorIndex:Ge,tempSecondaryColor:ue,secondaryColorPickerAnchor:Ae,secondaryContrastColorPickerAnchor:ht,secondaryColorPickerRef:Fe,secondaryContrastColorPickerRef:We,onOpenSecondaryColorPicker:be,onCloseSecondaryColorPicker:Be,onOpenSecondaryContrastColorPicker:et,onCloseSecondaryContrastColorPicker:wt,onAddSecondaryColor:$t,onRemoveSecondaryColor:tr,onSecondaryContrastColorChange:Lr,onTempSecondaryColorChange:Oe,getPopoverPosition:bn})]}),n.jsx(Qwe,{coverImageUrl:R,coverImageError:B,onCoverImageUrlChange:L,onCoverImageErrorChange:G,onMarkDirty:Qe}),n.jsx(nje,{slogan:$,showSloganInput:Y,onSloganChange:z,onShowSloganInputChange:M,onMarkDirty:Qe}),n.jsx("div",{className:"p-4 mb-8 border border-gray-200 bg-white/95",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Short description"}),n.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Description of your business often used in bios and listings"}),H||q?n.jsxs("div",{className:"mb-4",children:[n.jsx("textarea",{placeholder:"Enter your short description",value:q,onChange:rr=>{const wr=rr.target.value;wr.length<=150&&(Qe(),P(wr))},maxLength:150,rows:3,className:"w-full px-3 py-2 text-sm border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 resize-none"}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[q.length,"/150 characters"]})]}):n.jsxs("div",{className:"border border-dashed border-gray-300 p-4 flex items-center gap-3 bg-gray-50",children:[n.jsx("div",{className:"w-10 h-10 border border-dashed border-gray-300 flex items-center justify-center bg-white",children:n.jsx(Qd,{className:"w-5 h-5 text-gray-400"})}),n.jsx("p",{className:"text-sm text-gray-600",children:"Add a short description"})]})]}),n.jsx("button",{onClick:()=>{!H&&!q&&D(!0)},className:"ml-4 w-9 h-9 bg-gray-900 text-white hover:bg-gray-800 transition-colors flex items-center justify-center",children:n.jsx(On,{className:"w-4 h-4"})})]})}),n.jsx("div",{className:"p-4 mb-8 border border-gray-200 bg-white/95",children:n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Social links"}),n.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Social links for your business, often used in the theme footer"}),n.jsxs("div",{className:"relative inline-block mb-6",children:[n.jsxs("button",{onClick:de,disabled:Ke.length===0,className:"flex items-center gap-2 px-3 py-1.5 text-sm border border-gray-300 text-gray-900 hover:border-gray-400 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[n.jsx("span",{children:"Add social link"}),n.jsx(Ys,{className:"w-4 h-4"})]}),l&&n.jsx("div",{ref:Ce,className:"absolute z-50 mt-1 bg-white border border-gray-200 shadow-lg max-h-96 overflow-y-auto w-[250px]",style:{top:l.getBoundingClientRect().bottom+window.scrollY+4,left:l.getBoundingClientRect().left+window.scrollX},children:Ke.map(rr=>n.jsxs("button",{onClick:()=>le(rr.name),className:"w-full px-3 py-2 flex items-center gap-3 hover:bg-gray-50 transition-colors text-left",children:[n.jsx("div",{className:"text-gray-600",children:rr.icon}),n.jsx("span",{className:"text-sm text-gray-900",children:rr.name})]},rr.name))})]}),d.length>0&&n.jsx("div",{className:"flex flex-col gap-6",children:d.map(rr=>n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:rr}),n.jsxs("div",{className:"flex gap-3 items-start",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-600",children:ct(rr)}),n.jsx("input",{type:"text",placeholder:"Link",value:h[rr]||"",onChange:wr=>De(rr,wr.target.value),className:"w-full pl-10 pr-3 py-2 text-sm border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsx("button",{onClick:()=>Ye(rr),className:"px-3 py-2 text-sm text-gray-600 hover:text-gray-900 transition-colors",children:"Remove"})]}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:ot(rr)})]},rr))})]})}),n.jsx("div",{className:"text-center mt-6",children:n.jsx("a",{href:"#",className:"text-sm text-gray-600 hover:text-gray-900 transition-colors",children:"Learn more about managing your brand settings"})})]})})},mo=({checked:s,onChange:r,disabled:e=!1,label:t})=>{const a=u.useCallback(()=>{e||r(!s)},[s,r,e]);return n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t&&n.jsx("span",{className:"text-sm text-gray-700",children:t}),n.jsx("button",{type:"button",onClick:a,disabled:e,className:`cursor-pointer relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-2 ${s?"bg-gray-900":"bg-gray-300"} ${e?"opacity-50 cursor-not-allowed":""}`,children:n.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s?"translate-x-6":"translate-x-1"}`})})]})},bD=u.createContext(void 0),lje=({children:s})=>{const[r,e]=u.useState(null),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async p=>{try{a(!0),i(null);const{data:h}=await nt.get(`/checkout-settings/store/${p}`),g=h.data;return e(g),g}catch(h){const g=h?.response?.data?.message||h?.message||"Failed to load checkout settings";throw i(g),new Error(g)}finally{a(!1)}},[]),c=u.useCallback(async(p,h)=>{try{a(!0),i(null);const{data:g}=await nt.put(`/checkout-settings/${p}`,h),y=g.data;return e(y),y}catch(g){const y=g?.response?.data?.message||g?.message||"Failed to update checkout settings";throw i(y),new Error(y)}finally{a(!1)}},[]),d={settings:r,loading:t,error:o,fetchByStoreId:l,update:c};return n.jsx(bD.Provider,{value:d,children:s})},cje=()=>{const s=u.useContext(bD);if(!s)throw new Error("useCheckoutSettings must be used within CheckoutSettingsProvider");return s},wD=u.createContext(void 0),dje=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(0),[o,i]=u.useState(1),[l,c]=u.useState(50),[d,p]=u.useState(!1),[h,g]=u.useState(null),y=u.useCallback(async(v={})=>{try{p(!0),g(null);const w=new URLSearchParams;v.q&&w.set("q",v.q),v.page&&w.set("page",String(v.page)),v.limit&&w.set("limit",String(v.limit));const C=await nt.get(`/countries?${w.toString()}`),{success:k,data:N,message:O,meta:R}=C.data;if(!k)throw new Error(O||"Failed to fetch countries");return e(N||[]),R&&(a(R.total),i(R.page),c(R.limit)),N||[]}catch(w){const C=w?.response?.data?.message||w?.message||"Failed to fetch countries";throw g(C),new Error(C)}finally{p(!1)}},[]),b={countries:r,total:t,page:o,limit:l,loading:d,error:h,getCountries:y};return n.jsx(wD.Provider,{value:b,children:s})},Hx=()=>{const s=u.useContext(wD);if(!s)throw new Error("useCountries must be used within a CountryProvider");return s},uje=()=>{const{countries:s,total:r,loading:e,getCountries:t}=Hx(),{activeStoreId:a}=Ur(),{settings:o,fetchByStoreId:i,loading:l,update:c}=cje(),[d,p]=u.useState("phone_or_email"),[h,g]=u.useState(!0),[y,b]=u.useState(!1),[v,w]=u.useState(!0),[C,k]=u.useState("last_name"),[N,O]=u.useState("dont_include"),[R,L]=u.useState(!0),[B,G]=u.useState("optional"),[$,z]=u.useState(!0),[Y,M]=u.useState("dont_include"),[q,P]=u.useState(!0),[H,D]=u.useState("ziplofy_recommended"),[X,se]=u.useState(!0),[Q,xe]=u.useState(!1),[K,Z]=u.useState("all"),[ve,ae]=u.useState(""),[Se,Pe]=u.useState([]),[$e,we]=u.useState(!1),[Ae,ze]=u.useState(!1),[Ge,Ue]=u.useState(!0),ht=u.useRef(""),ee=["US"],ue=u.useCallback(mt=>JSON.stringify({contactMethod:mt.contactMethod,showOrderTracking:mt.showOrderTracking,requireSignIn:mt.requireSignIn,emailMarketing:mt.emailMarketing,emailRegionOption:mt.emailRegionOption,smsMarketing:mt.smsMarketing,selectedRegions:[...mt.selectedRegions??[]].sort(),showTipping:mt.showTipping,presets:mt.presets.map(yr=>String(yr??"").trim()),hideTippingUntilChosen:mt.hideTippingUntilChosen,useShippingAsBilling:mt.useShippingAsBilling,addToCartLimit:mt.addToCartLimit,cartLimit:mt.cartLimit===null||mt.cartLimit===void 0?"":String(mt.cartLimit).trim(),useRecommendedLimit:mt.useRecommendedLimit,fullNameOption:mt.fullNameOption,companyNameOption:mt.companyNameOption,addressLine2Option:mt.addressLine2Option,shippingPhoneOption:mt.shippingPhoneOption}),[]);u.useEffect(()=>{Q&&t({limit:1e3,q:ve||void 0})},[Q,t,ve]),u.useEffect(()=>{a&&i(a).catch(mt=>{gr.dismiss(),gr.error(mt.message||"Failed to load checkout settings")})},[a,i]);const[Oe,J]=u.useState(!0),[I,V]=u.useState("10"),[re,pe]=u.useState("15"),[ge,Ce]=u.useState("20"),[he,ie]=u.useState(!1),[Fe,We]=u.useState(!0),[Qe,de]=u.useState(!1),[Ee,le]=u.useState("5"),[Ye,De]=u.useState(!1),[ct,ot]=u.useState(!1),[dt,Ke]=u.useState(!0);u.useEffect(()=>{if(!o)return;Ue(!0);const mt=o.contactMethod??"phone_or_email",yr=o.orderTracking?.enabled??!0,An=o.requireSignIn??!1,fn=o.marketing?.email?.enabled??!0,wn=o.marketing?.email?.regionMode??"ziplofy_recommended",zr=o.marketing?.sms?.enabled??!1,In=o.tipping?.enabled??!1,ne=o.tipping?.presets??[],ke=o.tipping?.hideUntilSelected??!1,Re=o.addToCartLimit?.enabled??!1,Ze=o.addToCartLimit?.limit!==void 0&&o.addToCartLimit?.limit!==null?o.addToCartLimit?.limit:"",st=o.addToCartLimit?.useRecommended??!0,Ct=o.addressCollection?.useShippingAsBilling??!0,Xe=o.emailSelectedRegionIds??[];p(mt),g(yr),b(An),w(An),P(fn),D(wn),se(zr),Pe(Xe),J(In),V(ne[0]!==void 0?String(ne[0]):"10"),pe(ne[1]!==void 0?String(ne[1]):"15"),Ce(ne[2]!==void 0?String(ne[2]):"20"),ie(ke),Ke(Ct),We(Re),le(Ze===""?"":typeof Ze=="number"?String(Ze):Ze),De(st);const Ve=ue({contactMethod:mt,showOrderTracking:yr,requireSignIn:An,emailMarketing:fn,emailRegionOption:wn,smsMarketing:zr,selectedRegions:Xe,showTipping:In,presets:ne,hideTippingUntilChosen:ke,useShippingAsBilling:Ct,addToCartLimit:Re,cartLimit:Ze,useRecommendedLimit:st,fullNameOption:C,companyNameOption:N,addressLine2Option:B,shippingPhoneOption:Y});ht.current=Ve,we(!1);const je=window.setTimeout(()=>{Ue(!1)},0);return()=>{window.clearTimeout(je)}},[o,ue,C,N,B,Y]);const kt=u.useCallback(async()=>{if(!o||!o._id)return;const mt=zr=>{const In=zr.trim();if(!In)return 0;const ne=Number(In);return Number.isNaN(ne)||ne<0?0:ne},yr=[I,re,ge].map(mt),An=Number(Ee),fn=Ee.trim()===""||Number.isNaN(An)?null:An,wn={contactMethod:d,orderTracking:{enabled:h},requireSignIn:y,marketing:{email:{enabled:q,regionMode:H},sms:{enabled:X}},tipping:{enabled:Oe,presets:yr,hideUntilSelected:he},checkoutLanguage:o.checkoutLanguage??"English",addressCollection:{useShippingAsBilling:dt},addToCartLimit:{enabled:Fe,limit:fn,useRecommended:Ye},emailSelectedRegionIds:Se};try{ze(!0),gr.dismiss(),await c(o._id,wn),gr.dismiss(),gr.success("Checkout settings saved"),ht.current=ue({contactMethod:d,showOrderTracking:h,requireSignIn:y,emailMarketing:q,emailRegionOption:H,smsMarketing:X,selectedRegions:Se,showTipping:Oe,presets:yr,hideTippingUntilChosen:he,useShippingAsBilling:dt,addToCartLimit:Fe,cartLimit:fn,useRecommendedLimit:Ye,fullNameOption:C,companyNameOption:N,addressLine2Option:B,shippingPhoneOption:Y}),we(!1)}catch(zr){const In=zr?.response?.data?.message||zr?.message||"Failed to save checkout settings";gr.dismiss(),gr.error(In)}finally{ze(!1)}},[o,d,h,y,q,H,X,Oe,he,dt,Fe,Ee,Ye,Se,I,re,ge,c,ue,C,N,B,Y]);u.useEffect(()=>{if(Ge)return;const mt=ue({contactMethod:d,showOrderTracking:h,requireSignIn:y,emailMarketing:q,emailRegionOption:H,smsMarketing:X,selectedRegions:Se,showTipping:Oe,presets:[I,re,ge],hideTippingUntilChosen:he,useShippingAsBilling:dt,addToCartLimit:Fe,cartLimit:Ee,useRecommendedLimit:Ye,fullNameOption:C,companyNameOption:N,addressLine2Option:B,shippingPhoneOption:Y});we(mt!==ht.current)},[ue,Ge,d,h,y,q,H,X,Se,Oe,I,re,ge,he,dt,Fe,Ee,Ye,C,N,B,Y]);const At=u.useCallback(mt=>{p(mt)},[]),xt=u.useCallback(mt=>{g(mt)},[]),Xt=u.useCallback(mt=>{b(mt),mt&&w(!0)},[]),br=u.useCallback(mt=>{k(mt)},[]),zt=u.useCallback(mt=>{O(mt),mt==="required"&&L(!0)},[]),be=u.useCallback(mt=>{G(mt),mt==="required"&&z(!0)},[]),Be=u.useCallback(mt=>{M(mt)},[]),et=u.useCallback(mt=>{P(mt)},[]),wt=u.useCallback(mt=>{D(mt)},[]),$t=u.useCallback(mt=>{se(mt)},[]),tr=u.useCallback(mt=>{J(mt)},[]),Lr=u.useCallback(mt=>{ie(mt)},[]),tn=u.useCallback(mt=>{We(mt)},[]),bn=u.useCallback(mt=>{Ke(mt)},[]),Fr=u.useCallback(mt=>{De(mt)},[]),rr=u.useCallback(mt=>{Z(mt)},[]),wr=u.useCallback(mt=>{Pe(mt?s.map(yr=>yr._id):[])},[s]),an=u.useCallback((mt,yr)=>{Pe(yr?An=>[...An,mt]:An=>An.filter(fn=>fn!==mt))},[]),En=u.useMemo(()=>[{id:"all",label:"All"},{id:"recommended",label:"Recommended"}],[]),rn=u.useMemo(()=>s.filter(mt=>!(K==="recommended"&&!ee.includes(mt.iso2))),[s,K,ee]),kr=u.useMemo(()=>s.length>0&&Se.length===s.length,[s.length,Se.length]),jr=u.useMemo(()=>Se.length>0&&Se.length<s.length,[Se.length,s.length]);return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 border-b border-gray-200 pb-4",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Checkout settings"}),$e&&n.jsx("button",{onClick:kt,disabled:Ae||l||!o,className:"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:Ae?"Saving...":"Save"})]}),n.jsxs("div",{className:"p-4 mb-4 border border-gray-200 bg-white/95",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Customer contact method"}),n.jsx(Ps,{className:"w-4 h-4 text-gray-500"})]}),n.jsxs("p",{className:"text-xs text-gray-600 mb-4",children:["The contact method customers enter at checkout will receive order and shipping"," ",n.jsx("button",{className:"text-gray-700 cursor-pointer underline hover:no-underline",children:"notifications"}),"."]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"contactMethod",value:"phone_or_email",checked:d==="phone_or_email",onChange:mt=>At(mt.target.value),className:"mt-1 w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-900"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Phone number or email"}),d==="phone_or_email"&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["An"," ",n.jsx("button",{className:"text-gray-700 cursor-pointer underline hover:no-underline",children:"SMS App"})," ","is required to send SMS updates"]})]})]}),n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"contactMethod",value:"email",checked:d==="email",onChange:mt=>At(mt.target.value),className:"mt-1 w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Email"})]})]}),n.jsx("div",{className:"my-6 border-t border-gray-200"}),n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:h,onChange:mt=>xt(mt.target.checked),className:"mt-1 w-4 h-4 text-gray-900 border-gray-300 rounded focus:ring-gray-900"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["Show a link for customers to track their order with"," ",n.jsx("button",{className:"text-gray-700 cursor-pointer underline hover:no-underline",children:"Ziplofy"})]}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Customers will be able to download the app from the order status page"})]})]}),n.jsx("div",{className:"my-4 border-t border-gray-200"}),n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:y,onChange:mt=>Xt(mt.target.checked),className:"mt-1 w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Require customers to sign in to their account before checkout"}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Customers can only use email when sign-in is required"})]})]}),y&&v&&n.jsx("div",{className:"mt-4 p-3 bg-gray-50 border border-gray-200",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Zu,{className:"w-4 h-4 text-gray-600 shrink-0 mt-0.5"}),n.jsx("div",{className:"flex-1",children:n.jsxs("p",{className:"text-xs text-gray-700",children:["Requiring a sign-in may discourage some customers from checking out and reduce your store's total orders. To manage the current sign-in experience, go to"," ",n.jsx("button",{className:"text-gray-700 cursor-pointer underline hover:no-underline font-medium",children:"customer accounts settings"}),"."]})}),n.jsx("button",{onClick:()=>w(!1),className:"text-gray-600 hover:text-gray-900",children:n.jsx(Zs,{className:"w-4 h-4"})})]})})]}),n.jsxs("div",{className:"p-4 mb-4 border border-gray-200 bg-white/95",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-4",children:"Customer information"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-2 font-medium",children:"Full name"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"fullNameOption",value:"last_name",checked:C==="last_name",onChange:mt=>br(mt.target.value),className:"w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400"}),n.jsx("p",{className:"text-sm text-gray-900",children:"Only require last name"})]}),n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"fullNameOption",value:"first_last",checked:C==="first_last",onChange:mt=>br(mt.target.value),className:"w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400"}),n.jsx("p",{className:"text-sm text-gray-900",children:"Require first and last name"})]})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-2 font-medium",children:"Company name"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"companyNameOption",value:"dont_include",checked:N==="dont_include",onChange:mt=>zt(mt.target.value),className:"w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-sm text-gray-900",children:"Don't include"}),n.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-700 text-xs font-medium border border-gray-200 h-5 flex items-center",children:"Recommended"})]})]}),n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"companyNameOption",value:"optional",checked:N==="optional",onChange:mt=>zt(mt.target.value),className:"w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400"}),n.jsx("p",{className:"text-sm text-gray-900",children:"Optional"})]}),n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"companyNameOption",value:"required",checked:N==="required",onChange:mt=>zt(mt.target.value),className:"w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400"}),n.jsx("p",{className:"text-sm text-gray-900",children:"Required"})]})]}),N==="required"&&R&&n.jsx("div",{className:"mt-3 p-3 bg-gray-50 border border-gray-200",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Zu,{className:"w-4 h-4 text-gray-600 shrink-0 mt-0.5"}),n.jsx("div",{className:"flex-1",children:n.jsx("p",{className:"text-xs text-gray-700",children:"Requiring a company name may prevent some customers from checking out and reduce your store's total orders"})}),n.jsx("button",{onClick:()=>L(!1),className:"text-gray-600 hover:text-gray-900",children:n.jsx(Zs,{className:"w-4 h-4"})})]})})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-2 font-medium",children:"Address line 2 (apartment, unit, etc.)"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"addressLine2Option",value:"dont_include",checked:B==="dont_include",onChange:mt=>be(mt.target.value),className:"w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400"}),n.jsx("p",{className:"text-sm text-gray-900",children:"Don't include"})]}),n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"addressLine2Option",value:"optional",checked:B==="optional",onChange:mt=>be(mt.target.value),className:"w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-sm text-gray-900",children:"Optional"}),n.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-700 text-xs font-medium border border-gray-200 h-5 flex items-center",children:"Recommended"})]})]}),n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"addressLine2Option",value:"required",checked:B==="required",onChange:mt=>be(mt.target.value),className:"w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400"}),n.jsx("p",{className:"text-sm text-gray-900",children:"Required"})]})]}),B==="required"&&$&&n.jsx("div",{className:"mt-3 p-3 bg-gray-50 border border-gray-200",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Zu,{className:"w-4 h-4 text-gray-600 shrink-0 mt-0.5"}),n.jsx("div",{className:"flex-1",children:n.jsx("p",{className:"text-xs text-gray-700",children:"Requiring an address line 2 may prevent some customers from checking out and reduce your store's total orders"})}),n.jsx("button",{onClick:()=>z(!1),className:"text-gray-600 hover:text-gray-900",children:n.jsx(Zs,{className:"w-4 h-4"})})]})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-2 font-medium",children:"Shipping address phone number"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"shippingPhoneOption",value:"dont_include",checked:Y==="dont_include",onChange:mt=>Be(mt.target.value),className:"w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400"}),n.jsx("p",{className:"text-sm text-gray-900",children:"Don't include"})]}),n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"shippingPhoneOption",value:"optional",checked:Y==="optional",onChange:mt=>Be(mt.target.value),className:"w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400"}),n.jsx("p",{className:"text-sm text-gray-900",children:"Optional"})]}),n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"shippingPhoneOption",value:"required",checked:Y==="required",onChange:mt=>Be(mt.target.value),className:"w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400"}),n.jsx("p",{className:"text-sm text-gray-900",children:"Required"})]})]})]})]}),n.jsxs("div",{className:"p-4 mb-4 border border-gray-200 bg-white/95",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Marketing options"}),n.jsx(Ps,{className:"w-4 h-4 text-gray-500"})]}),n.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Display a checkbox for customers to sign up for email or SMS marketing"}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(jx,{className:"w-4 h-4 text-gray-500"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Email"})]}),n.jsx(mo,{checked:q,onChange:et})]}),q&&n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"You can choose to display a preselected checkbox in certain regions."}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("div",{onClick:()=>wt("ziplofy_recommended"),className:`flex-1 p-3 border cursor-pointer transition-colors ${H==="ziplofy_recommended"?"border-gray-900":"border-gray-200 hover:border-gray-300"}`,children:n.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"emailRegionOption",value:"ziplofy_recommended",checked:H==="ziplofy_recommended",onChange:mt=>wt(mt.target.value),className:"mt-1 w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Regions recommended by Ziplofy"}),n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"United States only"}),n.jsx("span",{className:"inline-block px-2 py-0.5 bg-gray-100 text-gray-700 text-xs font-medium border border-gray-200 h-5",children:"Automated"})]})]})}),n.jsx("div",{onClick:()=>wt("custom"),className:`flex-1 p-3 border cursor-pointer transition-colors ${H==="custom"?"border-gray-900":"border-gray-200 hover:border-gray-300"}`,children:n.jsxs("label",{className:"flex items-start gap-2 cursor-pointer w-full",children:[n.jsx("input",{type:"radio",name:"emailRegionOption",value:"custom",checked:H==="custom",onChange:mt=>wt(mt.target.value),className:"mt-1 w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Regions you choose"}),n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:Se.length===0?"None selected":`${Se.length} selected`}),n.jsx("button",{onClick:mt=>{mt.stopPropagation(),xe(!0)},className:"text-xs text-gray-700 cursor-pointer underline hover:no-underline",children:"Edit"})]})]})})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(eB,{className:"w-4 h-4 text-gray-500"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"SMS"})]}),n.jsx(mo,{checked:X,onChange:$t})]}),X&&n.jsxs("p",{className:"text-xs text-gray-600",children:["To launch SMS campaigns, you need to install an"," ",n.jsx("button",{className:"text-gray-700 cursor-pointer underline hover:no-underline",children:"SMS App"}),"."]})]})]}),n.jsxs("div",{className:"p-4 mb-4 border border-gray-200 bg-white/95",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Tipping"}),n.jsx(Ps,{className:"w-4 h-4 text-gray-500"})]}),n.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Customers can choose between 3 presets or enter a custom amount"}),n.jsxs("label",{className:`flex items-center gap-3 cursor-pointer ${Oe?"mb-4":""}`,children:[n.jsx("input",{type:"checkbox",checked:Oe,onChange:mt=>tr(mt.target.checked),className:"w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Show tipping options at checkout"})]}),Oe&&n.jsx("div",{className:"mb-4",children:n.jsxs("div",{className:"flex gap-3 items-center",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Preset 1"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:I,onChange:mt=>V(mt.target.value),className:"w-full px-3 py-2 pr-8 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 text-sm"}),n.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"%"})]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Preset 2"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:re,onChange:mt=>pe(mt.target.value),className:"w-full px-3 py-2 pr-8 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 text-sm"}),n.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"%"})]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Preset 3"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:ge,onChange:mt=>Ce(mt.target.value),className:"w-full px-3 py-2 pr-8 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 text-sm"}),n.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"%"})]})]})]})}),Oe&&n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:he,onChange:mt=>Lr(mt.target.checked),className:"w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Hide tipping options until customers choose to add a tip"})]})]}),n.jsxs("div",{className:"p-4 mb-4 border border-gray-200 bg-white/95",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-3",children:"Checkout language"}),n.jsx("div",{className:"p-3 border border-gray-200",children:n.jsx("input",{type:"text",value:"English",disabled:!0,className:"w-full px-3 py-2 border border-gray-200 bg-gray-50 text-gray-500 cursor-not-allowed text-sm"})})]}),n.jsxs("div",{className:"p-4 mb-4 border border-gray-200 bg-white/95",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-4",children:"Advanced preferences"}),n.jsx("div",{onClick:()=>ot(!0),className:"p-3 border border-gray-200 mb-3 cursor-pointer hover:bg-gray-50 transition-colors",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[n.jsx(kp,{className:"w-5 h-5 text-gray-500"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Address collection"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Manage how you collect shipping and billing addresses"})]})]}),n.jsx(As,{className:"w-4 h-4 text-gray-500"})]})}),n.jsx("div",{onClick:()=>de(!0),className:"p-3 border border-gray-200 cursor-pointer hover:bg-gray-50 transition-colors",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[n.jsx(Am,{className:"w-5 h-5 text-gray-500"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Add-to-cart limit"}),n.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-700 text-xs font-medium border border-gray-200 h-5 flex items-center",children:"Recommended"})]}),n.jsx("p",{className:"text-xs text-gray-600",children:"Protects your available inventory quantities from being revealed"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(mo,{checked:Fe,onChange:tn}),n.jsx(As,{className:"w-4 h-4 text-gray-500"})]})]})})]}),n.jsxs("div",{className:"p-4 border border-gray-200 bg-white/95",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Checkout rules"}),n.jsx(Ps,{className:"w-4 h-4 text-gray-500"})]}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Rules set parameters for how the cart or checkout responds to different customer scenarios. You can set product limits, perform age verification and more."}),n.jsxs("p",{className:"text-xs text-gray-600",children:["There are no apps installed with rules for checkout or cart. Visit the"," ",n.jsx("button",{className:"text-gray-700 cursor-pointer underline hover:no-underline",children:"Ziplofy App Store"})," ","to install one."]})]}),n.jsx(en,{open:Qe,onClose:()=>de(!1),maxWidth:"sm",title:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Add-to-cart limit"}),n.jsx(Ps,{className:"w-[18px] h-[18px] text-gray-500"})]}),actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>de(!1),className:"px-4 py-2 text-gray-900 rounded-lg hover:bg-gray-100 transition-colors",children:"Cancel"}),n.jsx("button",{disabled:!0,className:"px-4 py-2 bg-gray-400 text-white rounded-lg cursor-not-allowed",children:"Done"})]}),children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("p",{className:"text-base text-gray-900",children:"Set a maximum quantity per item that can be added to a cart."}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-500 text-xs font-medium rounded h-5 flex items-center",children:"Recommended"}),n.jsx(mo,{checked:Ye,onChange:Fr})]})]}),n.jsx("p",{className:"text-sm text-gray-500",children:"Protects your available inventory quantities from being revealed whenever they are higher than this limit."})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-2 font-medium",children:"Limit"}),n.jsx("input",{type:"text",value:Ee,onChange:mt=>le(mt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),n.jsx("p",{className:"text-sm text-gray-500",children:"Your store's recommended limit is 50"})]})}),n.jsx(en,{open:ct,onClose:()=>ot(!1),maxWidth:"sm",title:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Address collection"}),n.jsx(Ps,{className:"w-[18px] h-[18px] text-gray-500"})]}),actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>ot(!1),className:"px-4 py-2 text-gray-900 rounded-lg hover:bg-gray-100 transition-colors",children:"Cancel"}),n.jsx("button",{disabled:!0,className:"px-4 py-2 bg-gray-400 text-white rounded-lg cursor-not-allowed",children:"Done"})]}),children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:dt,onChange:mt=>bn(mt.target.checked),className:"mt-1 w-4 h-4 text-gray-900 border-gray-300 rounded focus:ring-gray-900"}),n.jsx("p",{className:"text-base font-medium text-gray-900",children:"Use the shipping address as the billing address by default"})]}),n.jsx("p",{className:"text-sm text-gray-500 ml-7",children:"The billing address can still be edited"})]})}),n.jsx(en,{open:Q,onClose:()=>xe(!1),maxWidth:"sm",title:n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Edit regions"}),actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>xe(!1),className:"px-4 py-2 text-gray-900 rounded-lg hover:bg-gray-100 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:()=>xe(!1),className:"px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors",children:"Done"})]}),children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Regions"}),n.jsxs("p",{className:"text-sm text-gray-500",children:[Se.length," of ",r||s.length," selected"]})]}),n.jsx(ek,{tabs:En,activeTab:K,onTabChange:rr}),n.jsxs("div",{className:"relative",children:[n.jsx(no,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),n.jsx("input",{type:"text",placeholder:"Search",value:ve,onChange:mt=>ae(mt.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),n.jsx("div",{className:"max-h-[400px] overflow-y-auto border border-gray-200 rounded",children:e?n.jsx("div",{className:"p-6 text-center",children:n.jsx("p",{className:"text-sm text-gray-500",children:"Loading countries..."})}):n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-200",children:[n.jsx("input",{type:"checkbox",checked:kr,ref:mt=>{mt&&(mt.indeterminate=jr&&!kr)},onChange:mt=>wr(mt.target.checked),className:"w-4 h-4 text-gray-900 border-gray-300 rounded focus:ring-gray-900"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Regions"}),n.jsxs("p",{className:"text-xs text-gray-500",children:[Se.length,"/",s.length||r]})]})]}),rn.map(mt=>{const yr=ee.includes(mt.iso2);return n.jsxs("div",{className:"flex items-center gap-3 p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-200 last:border-b-0",children:[n.jsx("input",{type:"checkbox",checked:Se.includes(mt._id),onChange:An=>an(mt._id,An.target.checked),className:"w-4 h-4 text-gray-900 border-gray-300 rounded focus:ring-gray-900"}),n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xl",children:mt.flagEmoji||""}),n.jsxs("p",{className:"text-sm text-gray-900",children:[mt.iso2," ",mt.name]}),yr&&n.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-500 text-xs font-medium rounded h-5 flex items-center",children:"Recommended"})]})})]},mt._id)})]})})]})})]})})},jD=u.createContext(void 0),fje=({children:s})=>{const[r,e]=u.useState(null),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async h=>{try{a(!0),i(null);const g=await nt.get(`/return-rules/store/${h}`),{success:y,data:b,message:v}=g.data;if(!y)throw new Error(v||"Failed to fetch return rules");return e(b||null),b||null}catch(g){const y=g?.response?.data?.message||g?.message||"Failed to fetch return rules";throw i(y),new Error(y)}finally{a(!1)}},[]),c=u.useCallback(async h=>{try{a(!0),i(null);const g=await nt.post("/return-rules",h),{success:y,data:b,message:v}=g.data;if(!y)throw new Error(v||"Failed to create return rules");return e(b),b}catch(g){const y=g?.response?.data?.message||g?.message||"Failed to create return rules";throw i(y),new Error(y)}finally{a(!1)}},[]),d=u.useCallback(async(h,g)=>{try{a(!0),i(null);const y=await nt.put(`/return-rules/${h}`,g),{success:b,data:v,message:w}=y.data;if(!b)throw new Error(w||"Failed to update return rules");return e(v),v}catch(y){const b=y?.response?.data?.message||y?.message||"Failed to update return rules";throw i(b),new Error(b)}finally{a(!1)}},[]),p={rules:r,loading:t,error:o,getByStoreId:l,createRules:c,updateRules:d};return n.jsx(jD.Provider,{value:p,children:s})},Jk=()=>{const s=u.useContext(jD);if(!s)throw new Error("useReturnRules must be used within a ReturnRulesProvider");return s},pje=()=>{const s=dr(),{activeStoreId:r}=Ur(),{createRules:e,loading:t}=Jk(),[a,o]=pt.useState(!1),[i,l]=pt.useState("30"),[c,d]=pt.useState(""),[p,h]=pt.useState("free"),[g,y]=pt.useState(""),[b,v]=pt.useState(!1),[w,C]=pt.useState(""),k=async()=>{r&&(await e({storeId:r,enabled:a,returnWindow:i==="custom"?c||"0":i,returnShippingCost:p==="customer"?"customer provides return shipping":p==="flat"?"flat rate return shipping":"free return shipping",flatRate:p==="flat"?Number(g||0):void 0,chargeRestockingFree:b,restockingFee:b?Number(w||0):void 0}),s("/settings/policies"))};return n.jsxs(cr,{children:[n.jsxs(cr,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[n.jsxs(cr,{sx:{display:"flex",alignItems:"center",gap:1},children:[n.jsx(es,{onClick:()=>s(-1),size:"small",children:n.jsx(zx,{})}),n.jsx(Bt,{variant:"h4",sx:{fontWeight:700},children:"Create return rules"})]}),n.jsx(Zn,{variant:a?"outlined":"contained",onClick:()=>o(N=>!N),children:a?"Turn off":"Turn on"})]}),n.jsxs(Ms,{elevation:0,sx:{p:3,mb:3,border:"1px solid #e5e7eb"},children:[n.jsx(Bt,{variant:"subtitle1",sx:{fontWeight:700,mb:1},children:"Return window"}),n.jsxs(r3,{value:i,onChange:N=>l(N.target.value),children:[n.jsx(Id,{value:"14",control:n.jsx($u,{}),label:"14 days"}),n.jsx(Id,{value:"30",control:n.jsx($u,{}),label:"30 days"}),n.jsx(Id,{value:"90",control:n.jsx($u,{}),label:"90 days"}),n.jsx(Id,{value:"unlimited",control:n.jsx($u,{}),label:"Unlimited"}),n.jsx(Id,{value:"custom",control:n.jsx($u,{}),label:"Custom days"})]}),i==="custom"&&n.jsx(Ns,{size:"small",label:"Number of days",value:c,onChange:N=>d(N.target.value),sx:{mt:1,maxWidth:220}}),n.jsx(Ew,{sx:{my:3}}),n.jsx(Bt,{variant:"subtitle1",sx:{fontWeight:700,mb:.5},children:"Return shipping cost"}),n.jsxs(r3,{value:p,onChange:N=>h(N.target.value),children:[n.jsx(Id,{value:"customer",control:n.jsx($u,{}),label:"Customer provides return shipping"}),n.jsx(Id,{value:"free",control:n.jsx($u,{}),label:"Free return shipping"}),n.jsx(Id,{value:"flat",control:n.jsx($u,{}),label:"Flat rate return shipping"})]}),p==="flat"&&n.jsx(Ns,{size:"small",type:"number",label:"Flat rate",placeholder:"0.00",value:g,onChange:N=>y(N.target.value),sx:{mt:1,maxWidth:220},InputProps:{startAdornment:n.jsx(cr,{component:"span",sx:{mr:1},children:""})}}),n.jsx(Ew,{sx:{my:3}}),n.jsx(Bt,{variant:"subtitle1",sx:{fontWeight:700,mb:1},children:"Restocking fee"}),n.jsx(Id,{control:n.jsx(ife,{checked:b,onChange:N=>v(N.target.checked)}),label:"Charge restocking fee"}),b&&n.jsx(Ns,{size:"small",type:"number",label:"Restocking fee (%)",placeholder:"0",value:w,onChange:N=>C(N.target.value),sx:{mt:1,maxWidth:220}})]}),n.jsx(cr,{sx:{display:"flex",justifyContent:"flex-end"},children:n.jsx(Zn,{variant:"contained",onClick:k,disabled:t||!r,children:"Create"})})]})},CD=u.createContext(void 0),hje=({children:s})=>{const[r,e]=u.useState(null),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async g=>{try{a(!0),i(null);const y=await nt.get(`/customer-account-settings/store/${g}`),{success:b,data:v,message:w}=y.data;if(!b)throw new Error(w||"Failed to fetch customer account settings");return e(v),v}catch(y){const b=y?.response?.data?.message||y?.message||"Failed to fetch customer account settings";throw i(b),new Error(b)}finally{a(!1)}},[]),c=u.useCallback(async(g,y)=>{try{a(!0),i(null);const b=await nt.put(`/customer-account-settings/${g}`,y),{success:v,data:w,message:C}=b.data;if(!v)throw new Error(C||"Failed to update customer account settings");return e(w),w}catch(b){const v=b?.response?.data?.message||b?.message||"Failed to update customer account settings";throw i(v),new Error(v)}finally{a(!1)}},[]),d=u.useCallback(()=>{e(null),i(null)},[]),p=u.useCallback(()=>{i(null)},[]),h=u.useMemo(()=>({settings:r,loading:t,error:o,fetchByStoreId:l,update:c,clear:d,clearError:p}),[r,t,o,l,c,d,p]);return n.jsx(CD.Provider,{value:h,children:s})},Vj=()=>{const s=u.useContext(CD);if(!s)throw new Error("useCustomerAccountSettings must be used within a CustomerAccountSettingsProvider");return s},mje=()=>{const s=dr(),{activeStoreId:r}=Ur(),{settings:e,loading:t,error:a,fetchByStoreId:o,update:i}=Vj(),[l,c]=u.useState(null),[d,p]=u.useState(!0),[h,g]=u.useState(!1),[y,b]=u.useState(!1),v=u.useRef(null),w=u.useRef(null);u.useEffect(()=>{r&&o(r).catch(()=>{})},[r,o]),u.useEffect(()=>{if(!e){p(!0),g(!1);return}p(!!e.shopAuth?.enabled),g(!1)},[e]),u.useEffect(()=>{if(!e){g(!1);return}g(!!e.shopAuth?.enabled!==d)},[d,e]),u.useEffect(()=>{const G=$=>{v.current&&!v.current.contains($.target)&&w.current&&!w.current.contains($.target)&&N()};return l&&document.addEventListener("mousedown",G),()=>{document.removeEventListener("mousedown",G)}},[l]);const C=()=>{s("/settings/customer-accounts")},k=(G,$)=>{c({element:G.currentTarget,id:$})},N=()=>{c(null)},O=()=>{p(!1),N()},R=()=>{p(!0),N()},L=async()=>{if(e?._id)try{b(!0),await i(e._id,{shopAuth:{enabled:d}}),g(!1)}catch{}finally{b(!1)}},B=t||y||!e;return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 border-b border-gray-200 pb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:C,className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(gn,{className:"w-5 h-5"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Authentication"})]}),e&&n.jsx("button",{onClick:L,disabled:!h||B,className:"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-700 min-w-[100px] disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:y?"Saving...":"Save"})]}),n.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Manage sign-in options and account access"}),a&&n.jsx("div",{className:"bg-gray-50 border border-gray-200 text-gray-700 px-4 py-3 mb-4 text-xs",children:a}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-4",children:"Sign-in options"}),n.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-purple-600 flex items-center justify-center",children:n.jsx("div",{className:`w-4 h-4 border-2 border-white border-t-transparent border-r-transparent rounded-full ${d?"animate-spin":""}`})}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Shop"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[d?n.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-700 text-xs font-medium border border-gray-200",children:"On"}):n.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-500 text-xs font-medium border border-gray-200",children:"Off"}),n.jsxs("div",{className:"relative",children:[n.jsx("button",{ref:w,onClick:G=>k(G,"shop"),className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-50 transition-colors",disabled:B,children:n.jsx(Jd,{className:"w-4 h-4"})}),l?.id==="shop"&&n.jsx("div",{ref:v,className:"absolute right-0 top-full mt-1 bg-white border border-gray-200 z-10 min-w-[120px]",children:d?n.jsx("button",{onClick:O,disabled:B,className:"w-full px-3 py-2 text-left text-xs text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Turn off"}):n.jsx("button",{onClick:R,disabled:B,className:"w-full px-3 py-2 text-left text-xs text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Turn on"})})]})]})]})]}),n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-4",children:"Available connections"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("img",{src:"https://www.google.com/favicon.ico",alt:"Google",className:"w-5 h-5",onError:G=>{const $=G.target;$.style.display="none"}}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Google"})]}),n.jsx("button",{onClick:()=>s("/settings/customer-accounts/authentication/google"),className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Connect"})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-5 h-5 bg-blue-600 rounded-full flex items-center justify-center text-white text-xs font-bold",children:"f"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Facebook"})]}),n.jsx("button",{onClick:()=>s("/settings/customer-accounts/authentication/facebook"),className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Connect"})]})]})]})]})]})})},sO={p:3,borderRadius:2,border:"1px solid #e5e7eb",backgroundColor:"#fff"},mS=["https://shopify.com","https://example.myshopify.com"],gS=["https://shopify.com/authentication/placeholder/social/facebook/callback","https://example.myshopify.com/authentication/social/facebook/callback"],yS=["https://shopify.com/authentication/placeholder/social/facebook/revoke","https://example.myshopify.com/authentication/social/facebook/revoke"],gje=()=>{const s=dr(),{activeStoreId:r}=Ur(),{settings:e,loading:t,error:a,fetchByStoreId:o,update:i}=Vj(),[l,c]=u.useState(!1),[d,p]=u.useState(""),[h,g]=u.useState(""),[y,b]=u.useState(mS),[v,w]=u.useState(gS),[C,k]=u.useState(yS),[N,O]=u.useState(!1),[R,L]=u.useState(!1),B=()=>{s("/settings/customer-accounts/authentication")},G=Y=>navigator.clipboard.writeText(Y);u.useEffect(()=>{r&&o(r).catch(()=>{})},[r,o]),u.useEffect(()=>{if(!e?.facebookAuth){c(!1),p(""),g(""),b(mS),w(gS),k(yS),O(!1);return}c(!!e.facebookAuth.enabled),p(e.facebookAuth.appId||""),g(e.facebookAuth.appSecret||""),b(e.facebookAuth.domains?.length?e.facebookAuth.domains:mS),w(e.facebookAuth.redirectURLs?.length?e.facebookAuth.redirectURLs:gS),k(e.facebookAuth.deauthorizeCallbackURLs?.length?e.facebookAuth.deauthorizeCallbackURLs:yS),O(!1)},[e]),u.useEffect(()=>{if(!e){O(!1);return}const Y=!!e.facebookAuth?.enabled,M=e.facebookAuth?.appId||"",q=e.facebookAuth?.appSecret||"",P=l!==Y||d.trim()!==M||h.trim()!==q;O(P)},[l,d,h,e]);const $=async()=>{if(e?._id)try{L(!0),await i(e._id,{facebookAuth:{enabled:l,appId:d.trim(),appSecret:h.trim(),domains:y,redirectURLs:v,deauthorizeCallbackURLs:C}}),O(!1)}catch{}finally{L(!1)}},z=t||R||!e;return n.jsxs(cr,{sx:{maxWidth:960,mx:"auto",py:4},children:[n.jsxs(Ks,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:2},children:[n.jsx(es,{onClick:B,size:"small",sx:{border:"1px solid rgba(17, 24, 39, 0.1)",backgroundColor:"#fff"},children:n.jsx(zx,{fontSize:"small"})}),n.jsx($I,{sx:{color:"#374151",fontSize:20}}),n.jsx(Mk,{sx:{color:"#9ca3af",fontSize:16}}),n.jsx(Bt,{variant:"h4",sx:{fontWeight:600,color:"#111827",flexGrow:1},children:"Sign in with Facebook"}),e&&n.jsx(Zn,{variant:"contained",color:"primary",onClick:$,disabled:!N||z,sx:{textTransform:"none",fontWeight:600,borderRadius:1.5,minWidth:120},children:R?"Saving...":"Save"}),n.jsx(EI,{checked:l,onChange:Y=>c(Y.target.checked),disabled:z,sx:{ml:2,"& .MuiSwitch-switchBase.Mui-checked":{color:"#111827"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#111827"}}}),n.jsx(Bt,{variant:"body2",sx:{color:"#6b7280"},children:l?"On":"Off"})]}),n.jsx(Bt,{variant:"body1",sx:{color:"#6b7280",mb:4},children:"Enable customers to sign in using their Facebook account"}),a&&n.jsx(Ms,{elevation:0,sx:{mb:3,p:2,borderRadius:1.5,border:"1px solid #fecaca",backgroundColor:"#fef2f2",color:"#b91c1c"},children:a}),n.jsxs(Ks,{spacing:3,children:[n.jsxs(Ms,{elevation:0,sx:sO,children:[n.jsx(Bt,{variant:"h6",sx:{fontWeight:600,color:"#111827",mb:2},children:"Setup instructions"}),n.jsxs(Bt,{variant:"body2",sx:{color:"#4b5563",mb:3},children:["In the"," ",n.jsx(jl,{href:"https://developers.facebook.com",target:"_blank",rel:"noopener noreferrer",sx:{color:"#2563eb",textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"Meta for Developers"})," ",'console, create a new App and add "Facebook Login" using the instructions provided in the'," ",n.jsx(jl,{href:"#",sx:{color:"#2563eb",textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"help documentation"})," ","and the following configuration."]}),n.jsxs(cr,{sx:{mb:3},children:[n.jsx(Bt,{variant:"subtitle2",sx:{fontWeight:600,color:"#111827",mb:1},children:"Domains"}),n.jsx(Ks,{spacing:1.5,children:y.map((Y,M)=>n.jsx(Ns,{fullWidth:!0,value:Y,InputProps:{readOnly:!0,endAdornment:n.jsx(wl,{position:"end",children:n.jsx(es,{size:"small",onClick:()=>G(Y),sx:{color:"#6b7280"},children:n.jsx(rf,{fontSize:"small"})})}),sx:{borderRadius:1.5,backgroundColor:"#f9fafb","& .MuiOutlinedInput-notchedOutline":{borderColor:"#e5e7eb"}}},size:"small"},M))})]}),n.jsxs(cr,{sx:{mb:3},children:[n.jsx(Bt,{variant:"subtitle2",sx:{fontWeight:600,color:"#111827",mb:1},children:"Redirect URLs"}),n.jsx(Ks,{spacing:1.5,children:v.map((Y,M)=>n.jsx(Ns,{fullWidth:!0,value:Y,InputProps:{readOnly:!0,endAdornment:n.jsx(wl,{position:"end",children:n.jsx(es,{size:"small",onClick:()=>G(Y),sx:{color:"#6b7280"},children:n.jsx(rf,{fontSize:"small"})})}),sx:{borderRadius:1.5,backgroundColor:"#f9fafb","& .MuiOutlinedInput-notchedOutline":{borderColor:"#e5e7eb"}}},size:"small"},M))})]}),n.jsxs(cr,{children:[n.jsx(Bt,{variant:"subtitle2",sx:{fontWeight:600,color:"#111827",mb:1},children:"Deauthorize callback URLs"}),n.jsx(Ks,{spacing:1.5,children:C.map((Y,M)=>n.jsx(Ns,{fullWidth:!0,value:Y,InputProps:{readOnly:!0,endAdornment:n.jsx(wl,{position:"end",children:n.jsx(es,{size:"small",onClick:()=>G(Y),sx:{color:"#6b7280"},children:n.jsx(rf,{fontSize:"small"})})}),sx:{borderRadius:1.5,backgroundColor:"#f9fafb","& .MuiOutlinedInput-notchedOutline":{borderColor:"#e5e7eb"}}},size:"small"},M))})]})]}),n.jsxs(Ms,{elevation:0,sx:sO,children:[n.jsx(Bt,{variant:"h6",sx:{fontWeight:600,color:"#111827",mb:2},children:"Credentials"}),n.jsx(Bt,{variant:"body2",sx:{color:"#4b5563",mb:3},children:"Once created, copy the App ID and App Secret shown by Facebook and paste them below."}),n.jsxs(Ks,{spacing:2,children:[n.jsxs(cr,{children:[n.jsx(Ns,{fullWidth:!0,label:"App ID",required:!0,placeholder:"From Facebook Developers portal",value:d,onChange:Y=>p(Y.target.value),disabled:z,sx:{"& .MuiOutlinedInput-root":{borderRadius:1.5}}}),n.jsx(Bt,{variant:"caption",sx:{color:"#6b7280",mt:.5,display:"block"},children:"From Facebook Developers portal"})]}),n.jsxs(cr,{children:[n.jsx(Ns,{fullWidth:!0,label:"App Secret",required:!0,placeholder:"From Facebook Developers portal",value:h,onChange:Y=>g(Y.target.value),type:"password",disabled:z,sx:{"& .MuiOutlinedInput-root":{borderRadius:1.5}}}),n.jsx(Bt,{variant:"caption",sx:{color:"#6b7280",mt:.5,display:"block"},children:"From Facebook Developers portal"})]})]})]})]})]})},aO={p:3,borderRadius:2,border:"1px solid #e5e7eb",backgroundColor:"#fff"},yje=()=>{const s=dr(),{activeStoreId:r}=Ur(),{settings:e,loading:t,error:a,fetchByStoreId:o,update:i}=Vj(),[l,c]=u.useState(!1),[d,p]=u.useState(""),[h,g]=u.useState(""),[y,b]=u.useState([]),[v,w]=u.useState([]),[C,k]=u.useState([]),[N,O]=u.useState(!1),[R,L]=u.useState(!1),B=()=>{s("/settings/customer-accounts/authentication")},G=P=>{navigator.clipboard.writeText(P)},$=u.useMemo(()=>["https://shopify.com","https://example.myshopify.com"],[]),z=u.useMemo(()=>["https://shopify.com/authentication/placeholder/social/google/callback","https://example.myshopify.com/authentication/social/google/callback"],[]),Y=u.useMemo(()=>["https://shopify.com/authentication/placeholder/social/google/revoke","https://example.myshopify.com/authentication/social/google/revoke"],[]);u.useEffect(()=>{r&&o(r).catch(()=>{})},[r,o]),u.useEffect(()=>{if(!e?.googleAuth){c(!1),p(""),g(""),b($),w(z),k(Y),O(!1);return}c(!!e.googleAuth.enabled),p(e.googleAuth.clientId||""),g(e.googleAuth.clientSecret||""),b(e.googleAuth.authorizedJavaScriptOrigins?.length?e.googleAuth.authorizedJavaScriptOrigins:$.slice()),w(e.googleAuth.authorizedRedirectURIs?.length?e.googleAuth.authorizedRedirectURIs:z.slice()),k(e.googleAuth.deauthorizeCallbackURIs?.length?e.googleAuth.deauthorizeCallbackURIs:Y.slice()),O(!1)},[e,$,z,Y]),u.useEffect(()=>{if(!e?.googleAuth){O(!1);return}const P=l!==!!e.googleAuth.enabled||d.trim()!==(e.googleAuth.clientId||"")||h.trim()!==(e.googleAuth.clientSecret||"");O(P)},[l,d,h,e]);const M=async()=>{if(e?._id)try{L(!0),await i(e._id,{googleAuth:{enabled:l,clientId:d.trim(),clientSecret:h.trim(),authorizedJavaScriptOrigins:y,authorizedRedirectURIs:v,deauthorizeCallbackURIs:C}}),O(!1)}catch{}finally{L(!1)}},q=t||R||!e;return n.jsxs(cr,{sx:{maxWidth:960,mx:"auto",py:4},children:[n.jsxs(Ks,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:2},children:[n.jsx(es,{onClick:B,size:"small",sx:{border:"1px solid rgba(17, 24, 39, 0.1)",backgroundColor:"#fff"},children:n.jsx(zx,{fontSize:"small"})}),n.jsx($I,{sx:{color:"#374151",fontSize:20}}),n.jsx(Mk,{sx:{color:"#9ca3af",fontSize:16}}),n.jsx(Bt,{variant:"h4",sx:{fontWeight:600,color:"#111827",flexGrow:1},children:"Sign in with Google"}),e&&n.jsx(Zn,{variant:"contained",onClick:M,disabled:!N||q,sx:{textTransform:"none",fontWeight:600,borderRadius:1.5,minWidth:120},children:R?"Saving...":"Save"}),n.jsx(EI,{checked:l,onChange:P=>c(P.target.checked),disabled:q,sx:{ml:2,"& .MuiSwitch-switchBase.Mui-checked":{color:"#111827"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#111827"}}}),n.jsx(Bt,{variant:"body2",sx:{color:"#6b7280"},children:l?"On":"Off"})]}),n.jsx(Bt,{variant:"body1",sx:{color:"#6b7280",mb:4},children:"Enable customers to sign in using their Google account"}),a&&n.jsx(Ms,{elevation:0,sx:{mb:3,p:2,borderRadius:1.5,border:"1px solid #fecaca",backgroundColor:"#fef2f2",color:"#b91c1c"},children:a}),n.jsxs(Ks,{spacing:3,children:[n.jsxs(Ms,{elevation:0,sx:aO,children:[n.jsx(Bt,{variant:"h6",sx:{fontWeight:600,color:"#111827",mb:2},children:"Setup instructions"}),n.jsx(Bt,{variant:"body2",sx:{color:"#4b5563",mb:3},children:"In the Google Cloud Console, create or select a project using the instructions provided in the help documentation and the following configuration."}),n.jsxs(cr,{sx:{mb:3},children:[n.jsx(Bt,{variant:"subtitle2",sx:{fontWeight:600,color:"#111827",mb:1},children:"Application type"}),n.jsx(Ns,{fullWidth:!0,value:"Web application",InputProps:{readOnly:!0,sx:{borderRadius:1.5,backgroundColor:"#f9fafb","& .MuiOutlinedInput-notchedOutline":{borderColor:"#e5e7eb"}}},size:"small"})]}),n.jsxs(cr,{sx:{mb:3},children:[n.jsx(Bt,{variant:"subtitle2",sx:{fontWeight:600,color:"#111827",mb:1},children:"Authorized JavaScript origins"}),n.jsx(Ks,{spacing:1.5,children:y.map((P,H)=>n.jsx(Ns,{fullWidth:!0,value:P,InputProps:{readOnly:!0,endAdornment:n.jsx(wl,{position:"end",children:n.jsx(es,{size:"small",onClick:()=>G(P),sx:{color:"#6b7280"},children:n.jsx(rf,{fontSize:"small"})})}),sx:{borderRadius:1.5,backgroundColor:"#f9fafb","& .MuiOutlinedInput-notchedOutline":{borderColor:"#e5e7eb"}}},size:"small"},H))})]}),n.jsxs(cr,{sx:{mb:3},children:[n.jsx(Bt,{variant:"subtitle2",sx:{fontWeight:600,color:"#111827",mb:1},children:"Authorized redirect URIs"}),n.jsx(Ks,{spacing:1.5,children:v.map((P,H)=>n.jsx(Ns,{fullWidth:!0,value:P,InputProps:{readOnly:!0,endAdornment:n.jsx(wl,{position:"end",children:n.jsx(es,{size:"small",onClick:()=>G(P),sx:{color:"#6b7280"},children:n.jsx(rf,{fontSize:"small"})})}),sx:{borderRadius:1.5,backgroundColor:"#f9fafb","& .MuiOutlinedInput-notchedOutline":{borderColor:"#e5e7eb"}}},size:"small"},H))})]}),n.jsxs(cr,{children:[n.jsx(Bt,{variant:"subtitle2",sx:{fontWeight:600,color:"#111827",mb:1},children:"Deauthorize callback URIs"}),n.jsx(Ks,{spacing:1.5,children:C.map((P,H)=>n.jsx(Ns,{fullWidth:!0,value:P,InputProps:{readOnly:!0,endAdornment:n.jsx(wl,{position:"end",children:n.jsx(es,{size:"small",onClick:()=>G(P),sx:{color:"#6b7280"},children:n.jsx(rf,{fontSize:"small"})})}),sx:{borderRadius:1.5,backgroundColor:"#f9fafb","& .MuiOutlinedInput-notchedOutline":{borderColor:"#e5e7eb"}}},size:"small"},H))})]})]}),n.jsxs(Ms,{elevation:0,sx:aO,children:[n.jsx(Bt,{variant:"h6",sx:{fontWeight:600,color:"#111827",mb:2},children:"Credentials"}),n.jsx(Bt,{variant:"body2",sx:{color:"#4b5563",mb:3},children:"Once the project is created, copy the Client ID and Client Secret shown by Google and paste them below."}),n.jsxs(Ks,{spacing:2,children:[n.jsx(Ns,{fullWidth:!0,label:"Client ID",required:!0,placeholder:"From Google Console",value:d,onChange:P=>p(P.target.value),disabled:q,sx:{"& .MuiOutlinedInput-root":{borderRadius:1.5}}}),n.jsx(Ns,{fullWidth:!0,label:"Client Secret",required:!0,placeholder:"From Google Console",value:h,onChange:P=>g(P.target.value),type:"password",disabled:q,sx:{"& .MuiOutlinedInput-root":{borderRadius:1.5}}})]})]})]})]})},xje=({accountUrl:s,onNavigateToAuthentication:r,onNavigateToDomains:e,selfServeReturns:t,onSelfServeReturnsChange:a,storeCredit:o,onStoreCreditChange:i,isControlsDisabled:l})=>n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Customer accounts"}),n.jsxs("div",{className:"group relative",children:[n.jsx(Ps,{className:"w-4 h-4 text-gray-500 cursor-help"}),n.jsx("div",{className:"absolute left-0 bottom-full mb-2 hidden group-hover:block z-10 w-64 p-2 bg-gray-900 text-white text-xs border border-gray-200",children:"Manage sign-in methods and account access"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Authentication"}),n.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:"Manage sign-in methods and account access"})]}),n.jsxs("button",{onClick:r,className:"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors flex items-center gap-2 self-start sm:self-center",children:["Manage",n.jsx(NS,{className:"w-4 h-4"})]})]}),n.jsx("div",{className:"border-t border-gray-200"}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Self-serve returns"}),n.jsxs("p",{className:"text-xs text-gray-600 mt-0.5",children:["Allow customers to request and manage returns. Customize what your customers can return with"," ",n.jsx("button",{className:"text-gray-700 hover:underline",children:"return rules"})]})]}),n.jsx(mo,{checked:t,onChange:a,disabled:l})]}),n.jsx("div",{className:"border-t border-gray-200"}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Store credit"}),n.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:"Allow customers to see and spend store credit"})]}),n.jsx(mo,{checked:o,onChange:i,disabled:l})]}),n.jsx("div",{className:"border-t border-gray-200"}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"URL"}),n.jsx("p",{className:"text-xs text-gray-600 mt-0.5 mb-2",children:"Use this URL anywhere you'd like customers to access customer accounts"}),n.jsx("input",{type:"text",value:s||"",readOnly:!0,className:"w-full px-3 py-2 border border-gray-200 bg-gray-50 text-sm text-gray-900 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("button",{onClick:e,className:"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors flex items-center gap-2 self-start sm:self-center",children:["Manage",n.jsx(NS,{className:"w-4 h-4"})]})]})]})]}),vje=({showSignInLinks:s,onShowSignInLinksChange:r,accountVersion:e,onAccountVersionChange:t,isControlsDisabled:a})=>n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Sign-in links"}),n.jsxs("div",{className:"group relative",children:[n.jsx(Ps,{className:"w-4 h-4 text-gray-500 cursor-help"}),n.jsx("div",{className:"absolute left-0 bottom-full mb-2 hidden group-hover:block z-10 w-64 p-2 bg-gray-900 text-white text-xs border border-gray-200",children:"Show sign-in links in the header of online store and at checkout"})]})]}),n.jsx("p",{className:"text-xs text-gray-600",children:"Show sign-in links in the header of online store and at checkout"})]}),n.jsx(mo,{checked:s,onChange:r,disabled:a})]}),s?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-gray-50 border border-gray-200 p-3 mb-4 flex items-start gap-2",children:[n.jsx(Ps,{className:"w-4 h-4 shrink-0 mt-0.5 text-gray-600"}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Customers are required to sign in before checking out. To change this, go to"," ",n.jsx("button",{className:"text-gray-700 font-medium cursor-pointer hover:underline",children:"checkout settings"}),"."]})]}),n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Choose which version of customer accounts to link to"}),n.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[n.jsxs("div",{onClick:()=>!a&&t("recommended"),className:`flex-1 p-3 border transition-all cursor-pointer flex items-start gap-3 ${e==="recommended"?"border-gray-900":"border-gray-200"} ${a?"opacity-50 cursor-not-allowed":"hover:border-gray-300"}`,children:[n.jsx("div",{className:"mt-0.5",children:n.jsx("input",{type:"radio",value:"recommended",checked:e==="recommended",onChange:()=>t("recommended"),disabled:a,className:"w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400 focus:ring-1"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Customer accounts"}),n.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-700 text-xs font-medium border border-gray-200",children:"Recommended"})]}),n.jsx("p",{className:"text-xs text-gray-600",children:"Customers sign in with a one-time code sent to their email (no passwords)"})]})]}),n.jsxs("div",{onClick:()=>!a&&t("legacy"),className:`flex-1 p-3 border transition-all cursor-pointer flex items-start gap-3 ${e==="legacy"?"border-gray-900":"border-gray-200"} ${a?"opacity-50 cursor-not-allowed":"hover:border-gray-300"}`,children:[n.jsx("div",{className:"mt-0.5",children:n.jsx("input",{type:"radio",value:"legacy",checked:e==="legacy",onChange:()=>t("legacy"),disabled:a,className:"w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400 focus:ring-1"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:"Legacy"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Customers create an account and sign in with email and password"})]})]})]})]}):n.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"Both versions are still accessible by URL"})]}),bje=({open:s,onClose:r,onConfirm:e})=>n.jsx(en,{open:s,onClose:r,title:"Turn off self-serve returns?",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"px-4 py-2 border border-gray-300 text-gray-900 rounded-md hover:bg-gray-50 hover:border-gray-400 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition-colors",children:"Turn off self-serve returns"})]}),children:n.jsx("p",{className:"text-sm text-gray-600",children:"Customers will no longer be able to request returns from their accounts. You can still process any return requests that need your review."})}),wje=()=>{const s=dr(),{activeStoreId:r,stores:e}=Ur(),{settings:t,loading:a,error:o,fetchByStoreId:i,update:l}=Vj(),[c,d]=u.useState(!1),[p,h]=u.useState("recommended"),[g,y]=u.useState(!1),[b,v]=u.useState(!1),[w,C]=u.useState(!1),[k,N]=u.useState(!1),[O,R]=u.useState(""),[L,B]=u.useState(!1),[G,$]=u.useState(!1),z=u.useMemo(()=>e.find(K=>K._id===r)||null,[e,r]);u.useEffect(()=>{r&&i(r).catch(()=>{})},[r,i]),u.useEffect(()=>{if(!t){R("");return}d(!!t.showSignInLinks),h(t.accountVersion),y(!!t.selfServeReturns),v(!!t.storeCredit);const Z=`https://ziplofy.com/${z?.storeName?z.storeName.toLowerCase().replace(/[^a-z0-9]+/g,"-"):"store"}/account`;R(t.customAccountUrl||Z)},[t,z]),u.useEffect(()=>{if(!t){B(!1);return}const K=c!==t.showSignInLinks||p!==t.accountVersion||g!==t.selfServeReturns||b!==t.storeCredit;B(K)},[t,c,p,g,b]);const Y=a||!t||G,M=u.useCallback(async()=>{if(t?._id)try{$(!0),await l(t._id,{showSignInLinks:c,accountVersion:p,selfServeReturns:g,storeCredit:b}),B(!1)}catch{}finally{$(!1)}},[t,c,p,g,b,l]),q=u.useCallback(K=>{d(K)},[]),P=u.useCallback(K=>{h(K)},[]),H=u.useCallback(K=>{g&&!K?(N(K),C(!0)):y(K)},[g]),D=u.useCallback(K=>{v(K)},[]),X=u.useCallback(()=>{C(!1)},[]),se=u.useCallback(()=>{y(k),C(!1)},[k]),Q=u.useCallback(()=>{s("/settings/customer-accounts/authentication")},[s]),xe=u.useCallback(()=>{s("/settings/domains")},[s]);return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4 border-b border-gray-200 pb-4",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Customer accounts"}),t&&n.jsx("button",{onClick:M,disabled:!L||Y,className:"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-700 min-w-[100px] disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:G?"Saving...":"Save"})]}),o&&n.jsx("div",{className:"bg-gray-50 border border-gray-200 text-gray-700 px-4 py-3 mb-4 text-xs",children:o}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(vje,{showSignInLinks:c,onShowSignInLinksChange:q,accountVersion:p,onAccountVersionChange:P,isControlsDisabled:Y}),n.jsx(xje,{accountUrl:O,onNavigateToAuthentication:Q,onNavigateToDomains:xe,selfServeReturns:g,onSelfServeReturnsChange:H,storeCredit:b,onStoreCreditChange:D,isControlsDisabled:Y})]}),n.jsx(bje,{open:w,onClose:X,onConfirm:se})]})})},SD=u.createContext(void 0),jje=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async h=>{try{a(!0),i(null);const g=await nt.get("/notification-options",{params:{categoryId:h}}),{success:y,data:b,message:v}=g.data;if(!y)throw new Error(v||"Failed to fetch notification options");return e(Array.isArray(b)?b:[]),Array.isArray(b)?b:[]}catch(g){const y=g?.response?.data?.message||g?.message||"Failed to fetch notification options";throw i(y),new Error(y)}finally{a(!1)}},[]),c=u.useCallback(()=>{e([]),i(null)},[]),d=u.useCallback(()=>{i(null)},[]),p={options:r,loading:t,error:o,fetchByCategoryId:l,clear:c,clearError:d};return n.jsx(SD.Provider,{value:p,children:s})},e_=()=>{const s=u.useContext(SD);if(!s)throw new Error("useNotificationOptions must be used within a NotificationOptionsProvider");return s},ND=u.createContext(void 0),Cje=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async()=>{try{a(!0),i(null);const h=await nt.get("/notification-categories"),{success:g,data:y,message:b}=h.data;if(!g)throw new Error(b||"Failed to fetch notification categories");return e(Array.isArray(y)?y:[]),Array.isArray(y)?y:[]}catch(h){const g=h?.response?.data?.message||h?.message||"Failed to fetch notification categories";throw i(g),new Error(g)}finally{a(!1)}},[]),c=u.useCallback(()=>{e([]),i(null)},[]),d=u.useCallback(()=>{i(null)},[]),p={categories:r,loading:t,error:o,fetchAll:l,clear:c,clearError:d};return n.jsx(ND.Provider,{value:p,children:s})},Hj=()=>{const s=u.useContext(ND);if(!s)throw new Error("useNotificationCategories must be used within a NotificationCategoriesProvider");return s},Sje=()=>{const s=dr(),{categoryId:r,categorySlug:e}=ks(),{options:t,loading:a,fetchByCategoryId:o}=e_(),{categories:i,fetchAll:l,loading:c}=Hj(),[d,p]=u.useState({}),h=e?.includes("customer");u.useEffect(()=>{i.length===0&&!c&&l().catch(()=>{})},[i.length,c,l]),u.useEffect(()=>{r&&o(r).catch(()=>{})},[r,o]),u.useEffect(()=>{if(!h)return;const C={};new Set(t.map(N=>N.segment).filter(Boolean)).forEach(N=>{N&&(C[N]=!0)}),p(C)},[t,h]);const g=u.useMemo(()=>{if(!r)return"Notifications";const C=i.find(k=>k._id===r);return C?.name?C.name:e?e.split("-").map(k=>k.charAt(0).toUpperCase()+k.slice(1)).join(" "):"Notifications"},[i,r,e]),y=u.useMemo(()=>{if(!h)return[];const C=new Map;t.forEach(N=>{const O=N.segment||"other";C.has(O)||C.set(O,[]),C.get(O).push(N)});const k={orders:"Order processing",localpickup:"Local pick up",localdelivery:"Local delivery",giftcards:"Gift cards",storecredit:"Store credit",orderexceptions:"Order exceptions",payments:"Payments",shippingupdated:"Shipping updated",returns:"Returns",accounts_and_outreach:"Accounts and outreach",other:"Other"};return Array.from(C.entries()).map(([N,O])=>{let R=k[N]||N;return k[N]||(R=N.replace(/_/g," "),/[A-Z]/.test(R)&&(R=R.split(/(?=[A-Z])/).map(L=>L.charAt(0).toUpperCase()+L.slice(1).toLowerCase()).join(" ")),R=R.split(" ").map(L=>L.charAt(0).toUpperCase()+L.slice(1).toLowerCase()).join(" ")),{title:R,items:O.sort((L,B)=>L.optionName.localeCompare(B.optionName))}})},[t,h]),b=u.useMemo(()=>h?[]:[...t].sort((C,k)=>C.optionName.localeCompare(k.optionName)),[t,h]),v=u.useCallback(C=>{p(k=>({...k,[C]:!k[C]}))},[]),w=C=>!r||!e?"/settings/notifications":`/settings/notifications/${r}/${e}/${C._id}`;return r?a?n.jsx(Yt,{children:n.jsx("div",{className:"max-w-7xl mx-auto py-8 px-4",children:n.jsx("div",{className:"flex justify-center mt-8",children:n.jsx("div",{className:"w-6 h-6 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})})})}):n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 border-b border-gray-200 pb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:()=>s("/settings/notifications"),className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(wx,{className:"w-5 h-5"})}),n.jsx(As,{className:"w-4 h-4 text-gray-500"}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:g})]}),h&&n.jsx("button",{onClick:()=>{s("/settings/notifications/customer/templates")},className:"px-3 py-1.5 border border-gray-200 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"Customize email templates"})]}),h?y.length>0?n.jsx("div",{className:"border border-gray-200 p-4 bg-white/95",children:y.map((C,k)=>{const N=C.title.toLowerCase().replace(/\s+/g,""),O=d[N]??!0;return n.jsxs("div",{className:k<y.length-1?"mb-4 pb-4 border-b border-gray-200":"",children:[n.jsxs("button",{onClick:()=>v(N),className:"w-full flex items-center justify-between py-2 hover:bg-transparent transition-colors",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 flex-1 text-left",children:C.title}),O?n.jsx(uf,{className:"w-4 h-4 text-gray-500"}):n.jsx(Ys,{className:"w-4 h-4 text-gray-500"})]}),n.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${O?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,children:n.jsx("div",{className:"pl-0 mt-2",children:C.items.map((R,L)=>n.jsx("div",{className:L<C.items.length-1?"mb-1 pb-1 border-b border-gray-100":"",children:n.jsxs("button",{onClick:()=>s(w(R)),className:"w-full flex items-center justify-between py-2 hover:bg-gray-50 transition-colors",children:[n.jsxs("div",{className:"flex-1 text-left",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-0.5",children:R.optionName}),R.optionDesc&&n.jsx("p",{className:"text-xs text-gray-600",children:R.optionDesc})]}),n.jsx(As,{className:"w-4 h-4 text-gray-500 ml-3 shrink-0"})]})},R._id))})})]},k)})}):n.jsx("div",{className:"border border-gray-200 p-4 bg-white/95",children:n.jsx("p",{className:"text-xs text-gray-600",children:"No notification options found."})}):n.jsx("div",{className:"border border-gray-200 p-4 bg-white/95",children:b.length>0?b.map((C,k)=>n.jsxs(pt.Fragment,{children:[n.jsxs("button",{onClick:()=>s(w(C)),className:"w-full flex items-center justify-between py-2 hover:bg-gray-50 transition-colors",children:[n.jsxs("div",{className:"flex-1 text-left",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-0.5",children:C.optionName}),C.optionDesc&&n.jsx("p",{className:"text-xs text-gray-600",children:C.optionDesc})]}),n.jsx(As,{className:"w-4 h-4 text-gray-500 ml-3 shrink-0"})]}),k<b.length-1&&n.jsx("div",{className:"h-px bg-gray-200 my-2"})]},C._id)):n.jsx("p",{className:"text-xs text-gray-600",children:"No notification options found."})})]})}):n.jsx(Yt,{children:n.jsx("div",{className:"max-w-7xl mx-auto py-8 px-4",children:n.jsx("p",{className:"text-sm text-gray-900",children:"Notification category not found."})})})},Nje=()=>{const s=dr(),[r,e]=u.useState(!0),[t,a]=u.useState(!1),o=()=>{a(!0)},i=()=>{a(!1)},l=()=>{e(!1),a(!1)};return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(j2,{className:"w-5 h-5 text-gray-900"}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Customer privacy"})]}),n.jsxs("div",{className:"border border-gray-200 bg-white p-4 mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Privacy settings"}),n.jsxs("button",{className:"w-full flex items-center gap-3 px-2 py-2 hover:bg-gray-50 transition-colors text-left mb-1",children:[n.jsx("div",{className:"w-8 h-8 bg-gray-100 flex items-center justify-center shrink-0",children:n.jsx("span",{className:"text-sm font-medium text-gray-900",children:"P"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm text-gray-900",children:"Privacy policy"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Published on your online store"})]}),n.jsxs("div",{className:"flex items-center gap-1 mr-1",children:[n.jsx("div",{className:"w-2 h-2 bg-gray-600 rounded-full"}),n.jsx("span",{className:"text-xs text-gray-600",children:"Automated"})]}),n.jsx(As,{className:"w-4 h-4 text-gray-400"})]}),n.jsx("hr",{className:"my-2 border-gray-200"}),n.jsxs("button",{className:"w-full flex items-center gap-3 px-2 py-2 hover:bg-gray-50 transition-colors text-left mb-1",children:[n.jsx("div",{className:"w-8 h-8 bg-gray-100 flex items-center justify-center shrink-0",children:n.jsx("span",{className:"text-sm font-medium text-gray-900",children:"C"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm text-gray-900",children:"Cookie banner"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Not required for regions you're selling in"})]}),n.jsxs("div",{className:"flex items-center gap-1 mr-1",children:[n.jsx("div",{className:"w-2 h-2 bg-gray-600 rounded-full"}),n.jsx("span",{className:"text-xs text-gray-600",children:"Automated"})]}),n.jsx(As,{className:"w-4 h-4 text-gray-400"})]}),n.jsx("hr",{className:"my-2 border-gray-200"}),n.jsxs("button",{onClick:()=>s("/settings/customer-privacy/dns"),className:"w-full flex items-center gap-3 px-2 py-2 hover:bg-gray-50 transition-colors text-left",children:[n.jsx(ou,{className:"w-5 h-5 text-gray-600 shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm text-gray-900",children:"Data sharing opt out page"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Not required for regions you're selling in"})]}),n.jsxs("div",{className:"flex items-center gap-1 mr-1",children:[n.jsx("div",{className:"w-2 h-2 bg-gray-600 rounded-full"}),n.jsx("span",{className:"text-xs text-gray-600",children:"Automated"})]}),n.jsx(As,{className:"w-4 h-4 text-gray-400"})]})]}),n.jsxs("div",{className:"border border-gray-200 bg-white p-4 mb-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(C2,{className:"w-5 h-5 text-gray-900"}),n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Ziplofy Network Intelligence"})]}),r&&n.jsx("button",{onClick:o,className:"px-3 py-1.5 text-sm border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Disable"})]}),r&&n.jsxs("div",{className:"flex items-center gap-1 mb-3",children:[n.jsx("div",{className:"w-2 h-2 bg-gray-600 rounded-full"}),n.jsx("span",{className:"text-xs text-gray-600",children:"Enabled"})]}),n.jsxs("p",{className:"text-xs text-gray-600 leading-relaxed",children:["Your customer data is securely used with other Ziplofy data to improve products, ad targeting, and personalization for your store as described in the"," ",n.jsx("a",{href:"#",className:"text-gray-700 hover:underline",children:"Additional Services Terms"}),". No other merchant can see your data."]})]}),n.jsxs("div",{className:"border border-gray-200 bg-white p-4 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-3",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Marketing settings"}),n.jsx("button",{className:"p-0.5 text-gray-600 hover:text-gray-700",children:n.jsx(Ps,{className:"w-4 h-4"})})]}),n.jsxs("button",{onClick:()=>s("/settings/checkout"),className:"w-full flex items-center gap-3 px-2 py-2 hover:bg-gray-50 transition-colors text-left mb-1",children:[n.jsx(jx,{className:"w-5 h-5 text-gray-600 shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm text-gray-900",children:"E-mail and SMS marketing in checkout"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Ask your customers for their marketing preferences"})]}),n.jsx(As,{className:"w-4 h-4 text-gray-400"})]}),n.jsx("hr",{className:"my-2 border-gray-200"}),n.jsxs("button",{onClick:()=>s("/settings/notifications"),className:"w-full flex items-center gap-3 px-2 py-2 hover:bg-gray-50 transition-colors text-left",children:[n.jsx(dF,{className:"w-5 h-5 text-gray-600 shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm text-gray-900",children:"Double opt-in for marketing"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Ask your customers to confirm their contact details"})]}),n.jsx(As,{className:"w-4 h-4 text-gray-400"})]})]}),n.jsxs("div",{className:"border border-gray-200 bg-white p-4",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-3",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Data storage hosting location"}),n.jsx("button",{className:"p-0.5 text-gray-600 hover:text-gray-700",children:n.jsx(Ps,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-2xl",children:""}),n.jsx("p",{className:"text-sm text-gray-900",children:"United States"})]})]}),n.jsx(en,{open:t,onClose:i,title:"Turn off Ziplofy Network Intelligence",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:i,className:"px-3 py-1.5 text-sm border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:l,className:"px-3 py-1.5 text-sm text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Turn off"})]}),children:n.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:"This means your customer data is no longer securely used with other Ziplofy data to improve products. This restricts your access or ability to customize all apps and features that require this data."})})]})})},kje=()=>{const s=dr(),[r,e]=u.useState(!1),[t,a]=u.useState("footer"),[o,i]=u.useState(!1),l=u.useRef(null),c=()=>{i(!o)},d=()=>{i(!1)},p=()=>{s("/settings/customer-privacy")};return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3 border-b border-gray-200 pb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("button",{onClick:p,className:"p-1 hover:bg-gray-50 transition-colors",children:n.jsx(gn,{className:"w-5 h-5 text-gray-600"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Data sharing opt-out page"})]}),n.jsx("p",{className:"text-xs text-gray-600 ml-7",children:"Data sharing opt-out allows customers in specific regions to opt out of data sharing."})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{ref:l,onClick:c,className:"flex items-center gap-1 px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:["More actions",n.jsx(Ys,{className:"w-4 h-4"})]}),o&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:d}),n.jsxs("div",{className:"absolute right-0 mt-1 w-48 border border-gray-200 bg-white shadow-sm z-20",children:[n.jsx("button",{onClick:d,className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"Option 1"}),n.jsx("button",{onClick:d,className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors border-t border-gray-200",children:"Option 2"})]})]})]})]}),n.jsxs("div",{className:"border border-gray-200 p-3 mb-3 bg-white/95",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-3",children:"Regions and content"}),n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-0.5",children:"Use automated settings"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Keep regions and content in sync with latest Ziplofy recommendations"})]}),n.jsx(mo,{checked:r,onChange:e})]}),!r&&n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-0.5",children:"Regions"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Not active in any region"})]}),n.jsx("button",{onClick:h=>{h.preventDefault()},className:"text-xs font-medium text-gray-700 hover:underline",children:"Edit"})]}),!r&&n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-0.5",children:"Content"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Customize default page content"})]}),n.jsx("button",{onClick:h=>{h.preventDefault()},className:"text-xs font-medium text-gray-700 hover:underline",children:"Edit"})]})]}),n.jsxs("div",{className:"border border-gray-200 p-3 mb-3 bg-white/95",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-2",children:"Navigation"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Link to the page from your store menu, so that your visitors can easily access it."}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Menu"}),n.jsxs("select",{value:t,onChange:h=>a(h.target.value),className:"w-full px-2.5 py-1.5 text-sm text-gray-900 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400",children:[n.jsx("option",{value:"main",children:"Main menu"}),n.jsx("option",{value:"footer",children:"Footer menu (recommended)"}),n.jsx("option",{value:"customer-account",children:"Customer account main menu"})]})]})]}),n.jsxs("p",{className:"text-xs text-gray-600 text-center mt-4",children:["Recommended privacy settings are for your convenience. Compliance with laws and regulations is your responsibility."," ",n.jsx("button",{onClick:h=>{h.preventDefault()},className:"text-gray-700 hover:underline",children:"Learn more"})]})]})})},_je=()=>{const[s,r]=u.useState(!1),e=u.useRef(null),t=u.useCallback(()=>{r(!s)},[s]),a=u.useCallback(()=>{r(!1)},[]),o=[{id:"1",domain:"00yj51-t0.ziplofy.com",type:"Online Store",isPrimary:!0,status:"connected"}];return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 border-b border-gray-200 pb-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Do,{className:"w-5 h-5 text-gray-600"}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Domains"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"relative",children:[n.jsxs("button",{ref:e,onClick:t,className:"flex items-center gap-1 px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:["Connect existing",n.jsx(Ys,{className:"w-4 h-4"})]}),s&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:a}),n.jsxs("div",{className:"absolute right-0 mt-1 w-48 border border-gray-200 bg-white shadow-sm z-20",children:[n.jsx("button",{onClick:a,className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"Connect domain"}),n.jsx("button",{onClick:a,className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors border-t border-gray-200",children:"Transfer domain"})]})]})]}),n.jsx("button",{className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Buy new domain"})]})]}),n.jsxs("div",{className:"mb-4 p-3 bg-white/95 border border-gray-200 flex items-start gap-2",children:[n.jsx(Ps,{className:"w-4 h-4 text-gray-600 shrink-0 mt-0.5"}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Connect or buy a custom domain below and get a $20 USD subscription discount on your next bill."," ",n.jsx("button",{onClick:i=>{i.preventDefault()},className:"text-gray-700 hover:underline",children:"Terms apply"}),"."]})]}),n.jsx("div",{className:"border border-gray-200 p-4 mb-4 bg-white/95",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-1",children:"Change to a new ziplofy.com domain"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Update your current Ziplofy subdomain for free to better match your brand. You can also buy or connect a custom domain."}),n.jsx("button",{className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-white transition-colors",children:"Change ziplofy.com domain"})]}),n.jsxs("div",{className:"hidden md:flex items-center justify-center relative w-48 h-32",children:[n.jsx("div",{className:"absolute w-24 h-20 border border-gray-200 bg-white flex items-center justify-center z-10",children:n.jsx(Do,{className:"w-8 h-8 text-gray-500"})}),n.jsx("div",{className:"absolute top-4 right-0 w-24 h-20 border border-gray-200 bg-gray-100 flex items-center justify-center z-0",children:n.jsx(Do,{className:"w-7 h-7 text-gray-400"})})]})]})}),n.jsxs("div",{className:"border border-gray-200 bg-white/95",children:[n.jsx("div",{className:"px-3 py-2 border-b border-gray-200 bg-white/95",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Domain"}),n.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Status"})]})}),n.jsx("div",{className:"p-2",children:o.map(i=>n.jsxs("div",{className:"flex justify-between items-center py-2 px-1 hover:bg-gray-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Do,{className:"w-4 h-4 text-gray-500"}),n.jsx("p",{className:"text-sm text-gray-900",children:i.domain}),i.isPrimary&&n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium text-gray-700 bg-gray-100 border border-gray-200",children:"Primary"})]}),n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium text-gray-700 bg-gray-50 border border-gray-200",children:i.status.charAt(0).toUpperCase()+i.status.slice(1)})]},i.id))})]})]})})},Eje=()=>{const{categoryId:s,categorySlug:r,optionId:e}=ks(),t=dr(),{options:a,fetchByCategoryId:o}=e_(),{categories:i,fetchAll:l}=Hj(),[c,d]=u.useState(null),[p,h]=u.useState(""),[g,y]=u.useState(""),[b,v]=u.useState(!1),w=r?.includes("customer"),C=s&&r?`/settings/notifications/${s}/${r}`:"/settings/notifications",k=u.useMemo(()=>{if(!s)return"Notifications";const $=i.find(z=>z._id===s);return $?.name?$.name:r?r.split("-").map(z=>z.charAt(0).toUpperCase()+z.slice(1)).join(" "):"Notifications"},[i,s,r]);u.useEffect(()=>{i.length===0&&l().catch(()=>{})},[i.length,l]),u.useEffect(()=>{if(e&&a.length>0){const $=a.find(z=>z._id===e);$&&(d($),h($.emailSubject||""),y($.emailBody||""),v(!1))}},[e,a]),u.useEffect(()=>{!s||a.length>0||o(s).catch(()=>{})},[s,a.length,o]);const N=$=>{h($.target.value),v(!0)},O=$=>{y($.target.value),v(!0)},R=()=>{console.log("Localize")},L=()=>{!e||!s||!r||t(`/settings/notifications/${s}/${r}/${e}`,{state:{categoryId:s,parentPath:C,categoryName:k}})},B=()=>{c&&(h(c.emailSubject||""),y(c.emailBody||""),v(!1),gr.success("Reverted to default values"))},G=async()=>{if(c)try{await new Promise($=>setTimeout($,1e3)),gr.success("Email template updated successfully"),v(!1)}catch($){gr.error($?.message||"Failed to update email template")}};return!s||!r?n.jsx(cr,{sx:{maxWidth:1200,mx:"auto",py:4},children:n.jsx(Bt,{children:"Notification category not found."})}):c?n.jsxs(cr,{sx:{maxWidth:1200,mx:"auto",py:4},children:[n.jsxs(mI,{separator:n.jsx(qN,{sx:{fontSize:16}}),sx:{mb:3},children:[n.jsx(jl,{component:"button",variant:"body2",onClick:()=>t("/settings/notifications"),sx:{color:"#666",textDecoration:"none","&:hover":{textDecoration:"underline"},cursor:"pointer"},children:"Notifications"}),n.jsx(jl,{component:"button",variant:"body2",onClick:()=>{s&&r?t(C,{state:{categoryId:s}}):t("/settings/notifications")},sx:{color:"#666",textDecoration:"none","&:hover":{textDecoration:"underline"},cursor:"pointer"},children:k}),n.jsx(jl,{component:"button",variant:"body2",onClick:()=>{!e||!s||!r||t(`/settings/notifications/${s}/${r}/${e}`,{state:{categoryId:s,parentPath:C,categoryName:k}})},sx:{color:"#666",textDecoration:"none","&:hover":{textDecoration:"underline"},cursor:"pointer"},children:c.optionName}),n.jsxs(Bt,{variant:"body2",sx:{color:"#111"},children:["Edit ",c.optionName]})]}),n.jsxs(cr,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[n.jsxs(Bt,{variant:"h4",sx:{fontWeight:600,color:"#111"},children:["Edit ",c.optionName]}),n.jsxs(cr,{sx:{display:"flex",gap:1},children:[n.jsx(Zn,{variant:"outlined",onClick:R,sx:{textTransform:"none",color:"#111",borderColor:"#ddd","&:hover":{borderColor:"#999",backgroundColor:"#f5f5f5"}},children:"Localize"}),n.jsx(Zn,{variant:"outlined",onClick:L,sx:{textTransform:"none",color:"#111",borderColor:"#ddd","&:hover":{borderColor:"#999",backgroundColor:"#f5f5f5"}},children:"Preview"})]})]}),n.jsxs(Ms,{sx:{p:3,borderRadius:2,boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",mb:3},children:[n.jsx(Bt,{variant:"h6",sx:{fontWeight:600,color:"#111",mb:2},children:"Liquid variables"}),n.jsxs(Bt,{variant:"body2",sx:{color:"#666",mb:1},children:["You can use"," ",n.jsx(jl,{href:"#",sx:{color:"#1976d2",textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"liquid variables"})," ","to customize your templates. Learn more about liquid variables."]}),n.jsxs(Bt,{variant:"body2",sx:{color:"#666"},children:["You can customize the look and feel across all email notifications from the"," ",n.jsx(jl,{href:"#",onClick:$=>{$.preventDefault(),w&&t("/settings/notifications/customer/templates")},sx:{color:"#1976d2",textDecoration:"none","&:hover":{textDecoration:"underline"},cursor:"pointer"},children:"Customize email templates"})," ","page."]})]}),n.jsxs(Ms,{sx:{p:3,borderRadius:2,boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",mb:3},children:[n.jsx(Bt,{variant:"h6",sx:{fontWeight:600,color:"#111",mb:2},children:"Email subject"}),n.jsx(Ns,{fullWidth:!0,value:p,onChange:N,placeholder:"Enter email subject",variant:"outlined",sx:{"& .MuiOutlinedInput-root":{backgroundColor:"#fff"}}})]}),n.jsxs(Ms,{sx:{p:3,borderRadius:2,boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",mb:3},children:[n.jsx(Bt,{variant:"h6",sx:{fontWeight:600,color:"#111",mb:2},children:"Email body (HTML)"}),n.jsx(Ns,{fullWidth:!0,multiline:!0,rows:20,value:g,onChange:O,placeholder:"Enter email body HTML",variant:"outlined",sx:{"& .MuiOutlinedInput-root":{backgroundColor:"#fff",fontFamily:"monospace",fontSize:"0.875rem"}}})]}),n.jsxs(cr,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx(Zn,{variant:"outlined",onClick:B,sx:{textTransform:"none",color:"#111",borderColor:"#ddd","&:hover":{borderColor:"#999",backgroundColor:"#f5f5f5"}},children:"Revert to default"}),b&&n.jsx(Zn,{variant:"contained",onClick:G,sx:{textTransform:"none",backgroundColor:"#111",color:"#fff","&:hover":{backgroundColor:"#333"}},children:"Save"})]})]}):n.jsx(cr,{sx:{maxWidth:1200,mx:"auto",py:4},children:n.jsx(Bt,{children:"Loading..."})})};function Tje({open:s,onClose:r,onSave:e,saving:t,legalBusinessName:a,country:o,address:i,apartment:l,city:c,state:d,pinCode:p,initialValues:h,countries:g,onLegalBusinessNameChange:y,onCountryChange:b,onAddressChange:v,onApartmentChange:w,onCityChange:C,onStateChange:k,onPinCodeChange:N}){const O=a!==h.legalBusinessName||o!==h.country||i!==h.address||l!==h.apartment||c!==h.city||d!==h.state||p!==h.pinCode,R=t||!O;return n.jsxs(en,{open:s,onClose:r,title:n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Billing information"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Your customers could see this information."})]}),maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-900 border border-gray-300 rounded hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:e,disabled:R,className:`px-4 py-2 text-sm font-medium text-white rounded transition-colors ${O&&!t?"bg-gray-900 hover:bg-gray-800":"bg-gray-300 cursor-not-allowed"}`,children:t?"Saving...":"Save"})]}),children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{htmlFor:"legal-business-name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Legal business name"}),n.jsx("input",{id:"legal-business-name",type:"text",value:a,onChange:y,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{htmlFor:"country-label",className:"block text-sm font-medium text-gray-700 mb-1",children:"Country/region"}),n.jsx("select",{id:"country-label",value:o,onChange:b,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:g.length>0?g.map(L=>n.jsx("option",{value:L.name,children:L.flagEmoji?`${L.flagEmoji} ${L.name}`:L.name},L._id)):n.jsx("option",{value:"India",children:" India"})})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:n.jsx(no,{className:"w-4 h-4"})}),n.jsx("input",{id:"address",type:"text",value:i,onChange:v,className:"w-full rounded-md border border-gray-300 pl-10 pr-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{htmlFor:"apartment",className:"block text-sm font-medium text-gray-700 mb-1",children:"Apartment, suite, etc."}),n.jsx("input",{id:"apartment",type:"text",value:l,onChange:w,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("div",{className:"flex gap-4 mb-6",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),n.jsx("input",{id:"city",type:"text",value:c,onChange:C,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{htmlFor:"state-label",className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),n.jsxs("select",{id:"state-label",value:d,onChange:k,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"",children:"Select a state"}),n.jsx("option",{value:"Delhi",children:"Delhi"}),n.jsx("option",{value:"Maharashtra",children:"Maharashtra"}),n.jsx("option",{value:"Karnataka",children:"Karnataka"}),n.jsx("option",{value:"Tamil Nadu",children:"Tamil Nadu"}),n.jsx("option",{value:"West Bengal",children:"West Bengal"}),n.jsx("option",{value:"Gujarat",children:"Gujarat"}),n.jsx("option",{value:"Rajasthan",children:"Rajasthan"}),n.jsx("option",{value:"Uttar Pradesh",children:"Uttar Pradesh"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"pin-code",className:"block text-sm font-medium text-gray-700 mb-1",children:"PIN code"}),n.jsx("input",{id:"pin-code",type:"text",value:p,onChange:N,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})}function Oje({open:s,onClose:r,onSave:e,saving:t,storeName:a,storeEmail:o,storePhone:i,initialValues:l,onStoreNameChange:c,onStoreEmailChange:d,onStorePhoneChange:p}){const h=a!==l.storeName||o!==l.storeEmail||i!==l.storePhone,g=t||!h;return n.jsxs(en,{open:s,onClose:r,title:"Edit profile",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-900 border border-gray-300 rounded hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:e,disabled:g,className:`px-4 py-2 text-sm font-medium text-white rounded transition-colors ${h?"bg-gray-900 hover:bg-gray-800":"bg-gray-300 cursor-not-allowed"}`,children:t?"Saving...":"Save"})]}),children:[n.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"These details could be publicly available. Do not use your personal information."}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{htmlFor:"store-name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Store name"}),n.jsx("input",{id:"store-name",type:"text",value:a,onChange:c,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 mb-1"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Appears on your website"})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{htmlFor:"store-email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Store email"}),n.jsx("input",{id:"store-email",type:"email",value:o,onChange:d,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 mb-1"}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Receives messages about your store. For sender email, go to"," ",n.jsx("a",{href:"/settings/notifications",className:"text-blue-600 hover:underline",children:"notification settings"}),"."]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"store-phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Store phone"}),n.jsx("input",{id:"store-phone",type:"tel",value:i,onChange:p,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})}function Pje({onSave:s,saving:r,disabled:e}){return n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[n.jsxs("p",{className:"text-xs text-gray-600",children:["To change your user level time zone and language visit your"," ",n.jsx("a",{href:"#",className:"text-gray-700 hover:underline",children:"account settings"}),"."]}),n.jsx("button",{onClick:s,disabled:e,className:"cursor-pointer px-3 py-1.5 bg-gray-900 text-white text-sm font-medium hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:r?"Saving...":"Save"})]})}const Aje=({label:s})=>n.jsx("span",{className:"inline-block min-w-[28px] px-2 py-0.5 rounded-md border border-gray-300 bg-gray-50 font-semibold text-[13px] text-center text-gray-900 leading-[1.4]",children:s}),Mje=({action:s,keys:r})=>n.jsxs("div",{className:"flex items-center justify-between gap-4",children:[n.jsx("p",{className:"text-sm text-gray-600 flex-1",children:s}),n.jsx("div",{className:"flex gap-1.5 flex-wrap justify-end",children:r.map((e,t)=>n.jsx(Aje,{label:e},`${s}-${e}-${t}`))})]}),Pv=[{title:"General shortcuts",shortcuts:[{action:"Keyboard help",keys:["?"]},{action:"Focus search bar or save bar",keys:["S"]},{action:"Focus filter bar",keys:["F"]},{action:"Open app",keys:["O","A"]},{action:"Open sales channel",keys:["O","S"]},{action:"Open store",keys:["O","T"]},{action:"Your profile",keys:["M","E"]},{action:"Log out",keys:["B","Y","E"]}]},{title:"Adding items to your store",shortcuts:[{action:"Add product",keys:["A","P"]},{action:"Add collection",keys:["A","C"]},{action:"Add discount",keys:["A","D"]},{action:"Add order",keys:["A","O"]},{action:"Add customer",keys:["A","U"]},{action:"Add blog post",keys:["A","B"]},{action:"Add blog",keys:["A","L"]},{action:"Add page",keys:["A","G"]}]},{title:"Navigating your admin panel",shortcuts:[{action:"Go to Home",keys:["G","H"]},{action:"Go to Orders",keys:["G","O"]},{action:"Go to Products",keys:["G","P"]},{action:"Go to Customers",keys:["G","C"]},{action:"Go to Content",keys:["G","G","C"]},{action:"Go to Analytics",keys:["G","N"]},{action:"Go to Marketing",keys:["G","M"]},{action:"Go to Discounts",keys:["G","D"]},{action:"Go to Abandoned carts",keys:["G","B","C"]},{action:"Go to Products: Transfers",keys:["G","P","T"]},{action:"Go to Products: Inventory",keys:["G","P","I"]},{action:"Go to Products: Purchase orders",keys:["G","P","O"]},{action:"Go to Products: Collections",keys:["G","P","C"]},{action:"Go to Products: Gift cards",keys:["G","P","G"]},{action:"Go to Online Store: Overview",keys:["G","W","O"]},{action:"Go to Online Store: Blog posts",keys:["G","W","B"]},{action:"Go to Online Store: Pages",keys:["G","W","P"]},{action:"Go to Online Store: Themes",keys:["G","W","T"]},{action:"Go to Online Store: Navigation",keys:["G","W","N"]},{action:"Go to Online Store: Domains",keys:["G","W","D"]},{action:"Go to Point of Sale: Overview",keys:["G","T","O"]},{action:"Go to Ziplofy Capital",keys:["G","T","C"]}]},{title:"Navigating settings",shortcuts:[{action:"Go to Settings",keys:["G","S"]},{action:"Go to Settings: Apps and sales channels",keys:["G","S","A"]},{action:"Go to Settings: Customer accounts",keys:["G","T","A"]},{action:"Go to Settings: Locations",keys:["G","T","L"]},{action:"Go to Settings: General",keys:["G","S","G"]},{action:"Go to Settings: Payments",keys:["G","S","P"]},{action:"Go to Settings: Checkout",keys:["G","S","C"]},{action:"Go to Settings: Customer events",keys:["G","S","E"]},{action:"Go to Settings: Shipping",keys:["G","S","S"]},{action:"Go to Settings: Taxes",keys:["G","S","X"]},{action:"Go to Settings: Notifications",keys:["G","S","N"]},{action:"Go to Settings: Gift cards",keys:["G","S","K"]},{action:"Go to Content: Files",keys:["G","C","F"]},{action:"Go to Settings: Account",keys:["G","S","A","C"]},{action:"Go to Settings: Online Store",keys:["G","S","W"]},{action:"Go to Settings: Point of Sale",keys:["G","S","T"]},{action:"Go to Settings: Billing",keys:["G","S","B"]},{action:"Go to Settings: Plan",keys:["G","S","L"]},{action:"Go to Settings: Metafields",keys:["G","S","M"]}]}],Ije=[[Pv[0],Pv[1]],[Pv[2]],[Pv[3]]];function Rje({open:s,onClose:r}){return n.jsx(en,{open:s,onClose:r,title:"Keyboard Shortcuts",maxWidth:"lg",children:n.jsx("div",{className:"bg-gray-50 -mx-6 -my-4 px-6 py-4",children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8",children:Ije.map((e,t)=>n.jsx("div",{className:`flex flex-col gap-6 ${t>0?"md:border-l md:border-gray-200 md:pl-6":""}`,children:e.map(a=>n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-1",children:a.title}),n.jsx("div",{className:"flex flex-col gap-2 bg-white rounded-lg border border-gray-200 p-4",children:a.shortcuts.map(o=>n.jsx(Mje,{...o},`${a.title}-${o.action}`))})]},a.title))},`column-${t}`))})})})}function Dje({orderIdPrefix:s,orderIdSuffix:r,onPrefixChange:e,onSuffixChange:t}){return n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-2",children:"Order ID"}),n.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Shown on the order page, customer pages, and customer order notifications to identify order"}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{htmlFor:"order-id-prefix",className:"block text-xs text-gray-600 mb-1",children:"Prefix"}),n.jsx("input",{id:"order-id-prefix",type:"text",value:s,onChange:e,className:"w-full border border-gray-200 px-3 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{htmlFor:"order-id-suffix",className:"block text-xs text-gray-600 mb-1",children:"Suffix"}),n.jsx("input",{id:"order-id-suffix",type:"text",value:r,onChange:t,className:"w-full border border-gray-200 px-3 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]})]}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Your order ID will appear as ",s,"1001",r,", ",s,"1002",r,", ",s,"1003",r," ..."]})]})}function Lje({fulfillmentOption:s,notifyCustomers:r,fulfillHighRiskOrders:e,autoArchive:t,onFulfillmentOptionChange:a,onNotifyCustomersChange:o,onFulfillHighRiskOrdersChange:i,onAutoArchiveChange:l}){return n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsxs("div",{className:"flex items-center mb-3",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Order processing"}),n.jsx("div",{className:"ml-2 group relative",children:n.jsx("button",{className:"p-1 text-gray-600 hover:text-gray-700",title:"Order processing settings","aria-label":"Order processing settings",children:n.jsx(Ps,{className:"w-4 h-4"})})})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"After an order has been paid"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"fulfillment-option",value:"fulfill_all",checked:s==="fulfill_all",onChange:a,className:"w-4 h-4 text-gray-900 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900",children:"Automatically fulfill the order's line items"})]}),s==="fulfill_all"&&n.jsxs("div",{className:"ml-6 mt-2 space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:r,onChange:o,className:"w-4 h-4 text-gray-900 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900",children:"Notify customers of their shipment"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:e,onChange:i,className:"w-4 h-4 text-gray-900 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900",children:"Automatically fulfill all orders, even those with a high risk of fraud"})]})]})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"fulfillment-option",value:"fulfill_gift_cards",checked:s==="fulfill_gift_cards",onChange:a,className:"w-4 h-4 text-gray-900 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900",children:"Automatically fulfill only the gift cards of the order"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"fulfillment-option",value:"dont_fulfill",checked:s==="dont_fulfill",onChange:a,className:"w-4 h-4 text-gray-900 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900",children:"Don't fulfill any of the order's line items automatically"})]})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"After an order has been fulfilled and paid, or when all items have been refunded"}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:t,onChange:l,className:"w-4 h-4 text-gray-900 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900",children:"Automatically archive the order"})]}),n.jsx("p",{className:"text-xs text-gray-600 mt-1 ml-6",children:"The order will be removed from your list of open orders."})]})]})}function Fje({onOpenShortcutsModal:s}){const r=dr();return n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Resources"}),n.jsx("div",{className:"mb-2",children:n.jsxs("div",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 transition-colors",children:[n.jsx(HF,{className:"w-4 h-4 text-gray-600 shrink-0"}),n.jsx("div",{className:"flex-1",children:n.jsx("p",{className:"text-sm text-gray-900",children:"Change log"})}),n.jsx("button",{className:"px-3 py-1.5 text-sm text-gray-900 border border-gray-200 hover:bg-gray-100 transition-colors",children:"View change log"})]})}),n.jsx("hr",{className:"my-2 border-gray-200"}),n.jsx("div",{className:"mb-2",children:n.jsxs("div",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 transition-colors",children:[n.jsx(ZO,{className:"w-4 h-4 text-gray-600 shrink-0"}),n.jsx("div",{className:"flex-1",children:n.jsx("p",{className:"text-sm text-gray-900",children:"Ziplofy Help Center"})}),n.jsx("button",{className:"px-3 py-1.5 text-sm text-gray-900 border border-gray-200 hover:bg-gray-100 transition-colors",children:"Get help"})]})}),n.jsx("hr",{className:"my-2 border-gray-200"}),n.jsx("div",{className:"mb-2",children:n.jsxs("div",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 transition-colors",children:[n.jsx(x2,{className:"w-4 h-4 text-gray-600 shrink-0"}),n.jsx("div",{className:"flex-1",children:n.jsx("p",{className:"text-sm text-gray-900",children:"Hire a Ziplofy Partner"})}),n.jsx("button",{className:"px-3 py-1.5 text-sm text-gray-900 border border-gray-200 hover:bg-gray-100 transition-colors",children:"Hire a Partner"})]})}),n.jsx("hr",{className:"my-2 border-gray-200"}),n.jsx("div",{className:"mb-2",children:n.jsxs("button",{onClick:s,className:"w-full flex items-center gap-3 p-2 hover:bg-gray-50 transition-colors text-left",children:[n.jsx("svg",{className:"w-4 h-4 text-gray-600 shrink-0",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 6.75h.75m-.75 3h.75m-.75 3h.75m3-6H18m0 0h.75m-.75 3h.75m-.75 3h.75M9.813 15v4.687c0 .414.336.75.75.75h4.125a.75.75 0 00.75-.75V15m0 0h-3.375M9.813 15h3.375m0 0H21M9.813 9.813H5.25a2.25 2.25 0 00-2.25 2.25v7.5c0 1.036.84 1.875 1.875 1.875h15.75c1.035 0 1.875-.84 1.875-1.875v-7.5a2.25 2.25 0 00-2.25-2.25h-4.563zM12.375 9.813V8.625c0-1.036-.84-1.875-1.875-1.875h-1.5c-1.036 0-1.875.84-1.875 1.875v1.188m7.5 0V8.625c0-1.036.84-1.875 1.875-1.875h1.5c1.035 0 1.875.84 1.875 1.875v1.188m-7.5 0h7.5"})}),n.jsx("div",{className:"flex-1",children:n.jsx("p",{className:"text-sm text-gray-900",children:"Keyboard shortcuts"})}),n.jsx(As,{className:"w-4 h-4 text-gray-600 shrink-0"})]})}),n.jsx("hr",{className:"my-2 border-gray-200"}),n.jsx("div",{children:n.jsxs("button",{onClick:()=>r("/settings/general/activity"),className:"w-full flex items-center gap-3 p-2 hover:bg-gray-50 transition-colors text-left",children:[n.jsx(wF,{className:"w-4 h-4 text-gray-600 shrink-0"}),n.jsx("div",{className:"flex-1",children:n.jsx("p",{className:"text-sm text-gray-900",children:"Store activity log"})}),n.jsx(As,{className:"w-4 h-4 text-gray-600 shrink-0"})]})})]})}function Bje(){const s=dr();return n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Store assets"}),n.jsx("div",{className:"mb-2",children:n.jsxs("button",{onClick:()=>s("/settings/general/metafields"),className:"w-full flex items-center gap-3 p-2 hover:bg-gray-50 transition-colors text-left",children:[n.jsx(_p,{className:"w-4 h-4 text-gray-600 shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm text-gray-900",children:"Metafields"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Available in themes and configurable for Storefront API"})]}),n.jsx(As,{className:"w-4 h-4 text-gray-600 shrink-0"})]})}),n.jsx("hr",{className:"my-2 border-gray-200"}),n.jsx("div",{children:n.jsxs("button",{onClick:()=>s("/settings/general/branding"),className:"w-full flex items-center gap-3 p-2 hover:bg-gray-50 transition-colors text-left",children:[n.jsx(_p,{className:"w-4 h-4 text-gray-600 shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm text-gray-900",children:"Brand"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Integrate brand assets across sales channels, themes and apps"})]}),n.jsx(As,{className:"w-4 h-4 text-gray-600 shrink-0"})]})})]})}function zje({backupRegion:s,unitSystem:r,weightUnit:e,timeZone:t,timeZones:a,onBackupRegionChange:o,onUnitSystemChange:i,onWeightUnitChange:l,onTimeZoneChange:c}){return n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Store defaults"}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{htmlFor:"currency-label",className:"block text-xs text-gray-600 mb-1",children:"Currency display"}),n.jsx("select",{id:"currency-label",value:"INR",disabled:!0,className:"w-full border border-gray-200 px-3 py-1.5 text-sm bg-gray-100 text-gray-500 cursor-not-allowed",children:n.jsx("option",{value:"INR",children:"Indian Rupee (INR )"})}),n.jsxs("p",{className:"text-xs text-gray-600 mt-2",children:["To manage the currencies customers see, go to"," ",n.jsx("a",{href:"/settings/markets",className:"text-gray-700 hover:underline",children:"Markets"})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{htmlFor:"backup-region-label",className:"block text-xs text-gray-600 mb-1",children:"Backup Region"}),n.jsxs("select",{id:"backup-region-label",value:s,onChange:o,className:"w-full border border-gray-200 px-3 py-1.5 text-sm bg-white focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400",children:[n.jsx("option",{value:"India",children:"India"}),n.jsx("option",{value:"United States",children:"United States"}),n.jsx("option",{value:"United Kingdom",children:"United Kingdom"}),n.jsx("option",{value:"Canada",children:"Canada"})]}),n.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"Determines settings for customers outside of your markets."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{htmlFor:"unit-system-label",className:"block text-xs text-gray-600 mb-1",children:"Unit system"}),n.jsxs("select",{id:"unit-system-label",value:r,onChange:i,className:"w-full border border-gray-200 px-3 py-1.5 text-sm bg-white focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400",children:[n.jsx("option",{value:"metric",children:"Metric system"}),n.jsx("option",{value:"imperial",children:"Imperial system"})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{htmlFor:"weight-unit-label",className:"block text-xs text-gray-600 mb-1",children:"Default weight unit"}),n.jsxs("select",{id:"weight-unit-label",value:e,onChange:l,className:"w-full border border-gray-200 px-3 py-1.5 text-sm bg-white focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400",children:[n.jsx("option",{value:"kg",children:"Kilogram (kg)"}),n.jsx("option",{value:"g",children:"Gram (g)"}),n.jsx("option",{value:"lb",children:"Pound (lb)"}),n.jsx("option",{value:"oz",children:"Ounce (oz)"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"timezone-label",className:"block text-xs text-gray-600 mb-1",children:"Time zone"}),n.jsx("select",{id:"timezone-label",value:t,onChange:c,className:"w-full border border-gray-200 px-3 py-1.5 text-sm bg-white focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400",children:a.map(d=>n.jsx("option",{value:d.value,children:d.label},d.value))}),n.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"Sets the time for when orders and analytics are recorded."})]})]})}function $je({settings:s,activeStore:r,loggedInUser:e,info:t,billingAddress:a,onEditProfile:o,onEditBilling:i}){return n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Store details"}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("p",{className:"text-xs text-gray-600",children:"My Store"}),n.jsx("button",{onClick:o,className:"p-1 text-gray-600 hover:bg-gray-100 transition-colors","aria-label":"Edit profile",children:n.jsx(Bo,{className:"w-4 h-4"})})]}),n.jsx("p",{className:"text-sm text-gray-900 mb-1",children:s?.storeName||r?.storeName||"My Store"}),n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:s?.storeEmail||e?.email||"developer200419@gmail.com"}),n.jsx("p",{className:"text-xs text-gray-600",children:s?.storePhone&&s.storePhone.trim()?s.storePhone:t?.contactInfo&&t.contactInfo.trim()?t.contactInfo:"No phone number"})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("p",{className:"text-xs text-gray-600",children:"Billing address"}),n.jsx("button",{onClick:i,className:"p-1 text-gray-600 hover:bg-gray-100 transition-colors","aria-label":"Edit billing address",children:n.jsx(Bo,{className:"w-4 h-4"})})]}),n.jsx("p",{className:"text-sm text-gray-900",children:a?.country||"India"})]})]})}const kD=u.createContext(void 0),Uje=({children:s})=>{const[r,e]=u.useState(null),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async g=>{try{a(!0),i(null);const y=await nt.get(`/general-settings/store/${g}`),{success:b,data:v,message:w}=y.data;if(!b)throw new Error(w||"Failed to fetch general settings");return e(v||null),v||null}catch(y){const b=y?.response?.data?.message||y?.message||"Failed to fetch general settings";throw i(b),new Error(b)}finally{a(!1)}},[]),c=u.useCallback(async(g,y)=>{try{a(!0),i(null);const b=await nt.put(`/general-settings/${g}`,y),{success:v,data:w,message:C}=b.data;if(!v)throw new Error(C||"Failed to update general settings");return e(w),w}catch(b){const v=b?.response?.data?.message||b?.message||"Failed to update general settings";throw i(v),new Error(v)}finally{a(!1)}},[]),d=u.useCallback(()=>{e(null),i(null)},[]),p=u.useCallback(()=>{i(null)},[]),h={settings:r,loading:t,error:o,getByStoreId:l,update:c,clear:d,clearError:p};return n.jsx(kD.Provider,{value:h,children:s})},_D=()=>{const s=u.useContext(kD);if(!s)throw new Error("useGeneralSettings must be used within a GeneralSettingsProvider");return s},ED=u.createContext(void 0),Vje=({children:s})=>{const[r,e]=u.useState(null),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async h=>{try{a(!0),i(null);const g=await nt.get(`/store-contact-info/store/${h}`),{success:y,data:b,message:v}=g.data;if(!y)throw new Error(v||"Failed to fetch contact info");return e(b||null),b||null}catch(g){const y=g?.response?.data?.message||g?.message||"Failed to fetch contact info";throw i(y),new Error(y)}finally{a(!1)}},[]),c=u.useCallback(async h=>{try{a(!0),i(null);const g=await nt.post("/store-contact-info",h),{success:y,data:b,message:v}=g.data;if(!y)throw new Error(v||"Failed to create contact info");return e(b),b}catch(g){const y=g?.response?.data?.message||g?.message||"Failed to create contact info";throw i(y),new Error(y)}finally{a(!1)}},[]),d=u.useCallback(async(h,g)=>{try{a(!0),i(null);const y=await nt.put(`/store-contact-info/${h}`,g),{success:b,data:v,message:w}=y.data;if(!b)throw new Error(w||"Failed to update contact info");return e(v),v}catch(y){const b=y?.response?.data?.message||y?.message||"Failed to update contact info";throw i(b),new Error(b)}finally{a(!1)}},[]),p={info:r,loading:t,error:o,getByStoreId:l,createInfo:c,updateInfo:d};return n.jsx(ED.Provider,{value:p,children:s})},TD=()=>{const s=u.useContext(ED);if(!s)throw new Error("useStoreContactInfo must be used within a StoreContactInfoProvider");return s},OD=u.createContext(void 0),Hje=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async b=>{try{a(!0),i(null);const v=await nt.get(`/store-billing-address/store/${b}`);e(v.data.data)}catch(v){const w=v.response?.data?.message||v.message||"Failed to fetch billing addresses";throw i(w),v}finally{a(!1)}},[]),c=u.useCallback(async b=>{try{a(!0),i(null);const w=(await nt.post("/store-billing-address",b)).data.data;return e(C=>[w,...C]),w}catch(v){const w=v.response?.data?.message||v.message||"Failed to create billing address";throw i(w),v}finally{a(!1)}},[]),d=u.useCallback(async(b,v)=>{try{a(!0),i(null);const C=(await nt.put(`/store-billing-address/${b}`,v)).data.data;return e(k=>k.map(N=>N._id===b?C:N)),C}catch(w){const C=w.response?.data?.message||w.message||"Failed to update billing address";throw i(C),w}finally{a(!1)}},[]),p=u.useCallback(async b=>{try{a(!0),i(null),await nt.delete(`/store-billing-address/${b}`),e(v=>v.filter(w=>w._id!==b))}catch(v){const w=v.response?.data?.message||v.message||"Failed to delete billing address";throw i(w),v}finally{a(!1)}},[]),h=u.useCallback(()=>i(null),[]),g=u.useCallback(()=>e([]),[]),y={addresses:r,loading:t,error:o,fetchByStoreId:l,createAddress:c,updateAddress:d,deleteAddress:p,clearError:h,clear:g};return n.jsx(OD.Provider,{value:y,children:s})},Wje=()=>{const s=u.useContext(OD);if(!s)throw new Error("useStoreBillingAddress must be used within a StoreBillingAddressProvider");return s},qje=()=>{const{stores:s,activeStoreId:r,setStores:e}=Ur(),{loggedInUser:t}=M2(),{addresses:a,fetchByStoreId:o}=Wje(),{info:i,getByStoreId:l}=TD(),{settings:c,loading:d,getByStoreId:p,update:h}=_D(),[g,y]=u.useState("India"),[b,v]=u.useState("metric"),[w,C]=u.useState("kg"),[k,N]=u.useState("Asia/Kolkata"),[O,R]=u.useState("#"),[L,B]=u.useState(""),[G,$]=u.useState("dont_fulfill"),[z,Y]=u.useState(!1),[M,q]=u.useState(!1),[P,H]=u.useState(!0),[D,X]=u.useState(!1),[se,Q]=u.useState(""),[xe,K]=u.useState(""),[Z,ve]=u.useState(""),[ae,Se]=u.useState(!1),[Pe,$e]=u.useState(!1),[we,Ae]=u.useState({storeName:"",storeEmail:"",storePhone:""}),[ze,Ge]=u.useState(!1),[Ue,ht]=u.useState(""),[ee,ue]=u.useState("India"),[Oe,J]=u.useState(""),[I,V]=u.useState(""),[re,pe]=u.useState(""),[ge,Ce]=u.useState(""),[he,ie]=u.useState(""),[Fe,We]=u.useState(!1),[Qe,de]=u.useState(!1),[Ee,le]=u.useState({legalBusinessName:"",country:"India",address:"",apartment:"",city:"",state:"",pinCode:""}),[Ye,De]=u.useState(!1),[ct,ot]=u.useState(!1),[dt,Ke]=u.useState(!1),[kt,At]=u.useState(!1),xt=u.useCallback(()=>{ct&&De(!0)},[ct]),Xt=u.useCallback(()=>{At(!0)},[]),br=u.useCallback(()=>{At(!1)},[]),{getCountries:zt,countries:be}=Hx(),Be=s.find(Ve=>Ve._id===r),et=a.length>0?a[0]:null;u.useEffect(()=>{zt({limit:250})},[zt]),u.useEffect(()=>{if(D){const Ve=c?.storeName??Be?.storeName??"My Store",je=c?.storeEmail??t?.email??"developer200419@gmail.com",He=c?.storePhone??(i?.contactInfo&&i.contactInfo.trim()?i.contactInfo:"");Q(Ve),K(je),ve(He),Ae({storeName:Ve,storeEmail:je,storePhone:He}),Se(!1)}},[D,c,Be,t,i]),u.useEffect(()=>{if(!ze)return;let Ve="",je="India",He="",at="",Ot="",ce="",Te="";c?(Ve=c.legalBusinessName??"",je=c.billingCountry??"India",He=c.billingAddress??"",at=c.billingApartment??"",Ot=c.billingCity??"",ce=c.billingState??"",Te=c.billingPinCode??""):et&&(Ve=et.legalBusinessName||"",je=et.country||"India",He=et.address||"",at=et.apartment||"",Ot=et.city||"",ce=et.state||"",Te=et.pinCode||""),ht(Ve),ue(je),J(He),V(at),pe(Ot),Ce(ce),ie(Te),le({legalBusinessName:Ve,country:je,address:He,apartment:at,city:Ot,state:ce,pinCode:Te}),We(!1)},[ze,c,et]),u.useEffect(()=>{d||(c?(y(c.backupRegion??"India"),v(c.unitSystem??"metric"),C(c.weightUnit??"kg"),N(c.timeZone??"Asia/Kolkata"),R(c.orderIdPrefix??"#"),B(c.orderIdSuffix??""),$(c.fulfillmentOption??"dont_fulfill"),Y(!!c.notifyCustomers),q(!!c.fulfillHighRiskOrders),H(c.autoArchive!==void 0?c.autoArchive:!0),Q(c.storeName??Be?.storeName??"My Store"),K(c.storeEmail??t?.email??""),ve(c.storePhone??(i?.contactInfo&&i.contactInfo.trim()?i.contactInfo:"")),ht(c.legalBusinessName??""),ue(c.billingCountry??"India"),J(c.billingAddress??""),V(c.billingApartment??""),pe(c.billingCity??""),Ce(c.billingState??""),ie(c.billingPinCode??"")):(y("India"),v("metric"),C("kg"),N("Asia/Kolkata"),R("#"),B(""),$("dont_fulfill"),Y(!1),q(!1),H(!0),Q(Be?.storeName||"My Store"),K(t?.email||"developer200419@gmail.com"),ve(i?.contactInfo&&i.contactInfo.trim()?i.contactInfo:""),ht(et?.legalBusinessName||""),ue(et?.country||"India"),J(et?.address||""),V(et?.apartment||""),pe(et?.city||""),Ce(et?.state||""),ie(et?.pinCode||"")),De(!1),ot(!0))},[c,d,Be,t,i,et]);const wt=u.useCallback(()=>{X(!0)},[]),$t=u.useCallback(()=>{X(!1)},[]),tr=u.useCallback(async()=>{if(!c||!c._id){gr.error("General settings not found. Please refresh the page.");return}if(!(se!==we.storeName||xe!==we.storeEmail||Z!==we.storePhone)){$t();return}if(!r){gr.error("No store selected. Please select a store to save settings.");return}$e(!0);try{const je=at=>at.trim()||void 0;await h(c._id,{storeId:r,storeName:je(se),storeEmail:je(xe),storePhone:je(Z)});const He=se.trim()||se||"My Store";e(at=>at.map(Ot=>Ot._id===r?{...Ot,storeName:He}:Ot)),Ae({storeName:se,storeEmail:xe,storePhone:Z}),gr.success("Store profile updated successfully"),xt(),$t()}catch(je){const He=je?.response?.data?.message||je?.message||"Failed to update store profile";gr.error(He)}finally{$e(!1)}},[c,se,xe,Z,we,r,h,e,xt,$t]),Lr=u.useCallback(()=>{Ge(!0)},[]),tn=u.useCallback(()=>{Ge(!1)},[]),bn=u.useCallback(async()=>{if(!c||!c._id){gr.error("General settings not found. Please refresh the page.");return}if(!r){gr.error("No store selected. Please select a store to save settings.");return}if(!(Ue!==Ee.legalBusinessName||ee!==Ee.country||Oe!==Ee.address||I!==Ee.apartment||re!==Ee.city||ge!==Ee.state||he!==Ee.pinCode)){tn();return}de(!0);try{const je=He=>He.trim()||void 0;await h(c._id,{storeId:r,legalBusinessName:je(Ue),billingCountry:ee,billingAddress:je(Oe),billingApartment:je(I),billingCity:je(re),billingState:je(ge),billingPinCode:je(he)}),gr.success("Billing information updated successfully"),xt(),tn()}catch(je){const He=je?.response?.data?.message||je?.message||"Failed to update billing information";gr.error(He)}finally{de(!1)}},[c,r,Ue,ee,Oe,I,re,ge,he,Ee,h,xt,tn]),Fr=u.useCallback(async()=>{if(!r){gr.error("No store selected. Please select a store to save settings.");return}const Ve=He=>He.trim()||void 0,je={storeId:r,backupRegion:g,unitSystem:b,weightUnit:w,timeZone:k,orderIdPrefix:O,orderIdSuffix:L,fulfillmentOption:G,notifyCustomers:z,fulfillHighRiskOrders:M,autoArchive:P,storeName:Ve(se),storeEmail:Ve(xe),storePhone:Ve(Z),legalBusinessName:Ve(Ue),billingCountry:ee,billingAddress:Ve(Oe),billingApartment:Ve(I),billingCity:Ve(re),billingState:Ve(ge),billingPinCode:Ve(he)};if(!c||!c._id){gr.error("General settings not found. Please refresh the page.");return}Ke(!0);try{await h(c._id,je),gr.success("General settings updated successfully"),De(!1)}catch(He){const at=He?.response?.data?.message||He?.message||"Failed to save general settings";gr.error(at)}finally{Ke(!1)}},[r,g,b,w,k,O,L,G,z,M,P,se,xe,Z,Ue,ee,Oe,I,re,ge,he,c,h]);u.useEffect(()=>{r&&(o(r),l(r),ot(!1),p(r).catch(()=>{}))},[r,o,l,p]);const rr=[{value:"Asia/Kolkata",label:"(GMT+05:30) Chennai, Kolkata, Mumbai, New Delhi"},{value:"America/New_York",label:"(GMT-05:00) Eastern Time (US & Canada)"},{value:"America/Los_Angeles",label:"(GMT-08:00) Pacific Time (US & Canada)"},{value:"Europe/London",label:"(GMT+00:00) Greenwich Mean Time"}],wr=u.useCallback(Ve=>{y(Ve.target.value),xt()},[xt]),an=u.useCallback(Ve=>{v(Ve.target.value),xt()},[xt]),En=u.useCallback(Ve=>{C(Ve.target.value),xt()},[xt]),rn=u.useCallback(Ve=>{N(Ve.target.value),xt()},[xt]),kr=u.useCallback(Ve=>{R(Ve.target.value),xt()},[xt]),jr=u.useCallback(Ve=>{B(Ve.target.value),xt()},[xt]),mt=u.useCallback(Ve=>{$(Ve.target.value),xt()},[xt]),yr=u.useCallback(Ve=>{Y(Ve.target.checked),xt()},[xt]),An=u.useCallback(Ve=>{q(Ve.target.checked),xt()},[xt]),fn=u.useCallback(Ve=>{H(Ve.target.checked),xt()},[xt]),wn=u.useCallback(Ve=>{Q(Ve.target.value),Se(!0)},[]),zr=u.useCallback(Ve=>{K(Ve.target.value),Se(!0)},[]),In=u.useCallback(Ve=>{ve(Ve.target.value),Se(!0)},[]),ne=u.useCallback(Ve=>{ht(Ve.target.value),We(!0)},[]),ke=u.useCallback(Ve=>{ue(Ve.target.value),We(!0)},[]),Re=u.useCallback(Ve=>{J(Ve.target.value),We(!0)},[]),Ze=u.useCallback(Ve=>{V(Ve.target.value),We(!0)},[]),st=u.useCallback(Ve=>{pe(Ve.target.value),We(!0)},[]),Ct=u.useCallback(Ve=>{Ce(Ve.target.value),We(!0)},[]),Xe=u.useCallback(Ve=>{ie(Ve.target.value),We(!0)},[]);return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto w-full flex flex-col gap-4 py-8 px-4",children:[n.jsx($je,{settings:c,activeStore:Be,loggedInUser:t,info:i,billingAddress:et,onEditProfile:wt,onEditBilling:Lr}),n.jsx(zje,{backupRegion:g,unitSystem:b,weightUnit:w,timeZone:k,timeZones:rr,onBackupRegionChange:wr,onUnitSystemChange:an,onWeightUnitChange:En,onTimeZoneChange:rn}),n.jsx(Dje,{orderIdPrefix:O,orderIdSuffix:L,onPrefixChange:kr,onSuffixChange:jr}),n.jsx(Lje,{fulfillmentOption:G,notifyCustomers:z,fulfillHighRiskOrders:M,autoArchive:P,onFulfillmentOptionChange:mt,onNotifyCustomersChange:yr,onFulfillHighRiskOrdersChange:An,onAutoArchiveChange:fn}),n.jsx(Bje,{}),n.jsx(Fje,{onOpenShortcutsModal:Xt}),n.jsx(Pje,{onSave:Fr,saving:dt,disabled:!ct||!Ye||dt||d}),n.jsx(Oje,{open:D,onClose:$t,onSave:tr,saving:Pe,storeName:se,storeEmail:xe,storePhone:Z,initialValues:we,onStoreNameChange:wn,onStoreEmailChange:zr,onStorePhoneChange:In}),n.jsx(Tje,{open:ze,onClose:tn,onSave:bn,saving:Qe,legalBusinessName:Ue,country:ee,address:Oe,apartment:I,city:re,state:ge,pinCode:he,initialValues:Ee,countries:be,onLegalBusinessNameChange:ne,onCountryChange:ke,onAddressChange:Re,onApartmentChange:Ze,onCityChange:st,onStateChange:Ct,onPinCodeChange:Xe}),n.jsx(Rje,{open:kt,onClose:br})]})})},PD=u.createContext(void 0),Gje=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState({}),[o,i]=u.useState(0),[l,c]=u.useState(1),[d,p]=u.useState(50),[h,g]=u.useState(!1),[y,b]=u.useState(null),v=u.useCallback(async(N={})=>{try{g(!0),b(null);const O=new URLSearchParams;N.countryId&&O.set("countryId",N.countryId),N.countryIso2&&O.set("countryIso2",N.countryIso2),N.q&&O.set("q",N.q),N.page&&O.set("page",String(N.page)),N.limit&&O.set("limit",String(N.limit));const R=O.toString(),L=R?`/states?${R}`:"/states",B=await nt.get(L),{success:G,data:$,message:z,meta:Y}=B.data;if(!G)throw new Error(z||"Failed to fetch states");const M=$||[];return e(M),N.countryId&&M.length&&a(q=>({...q,[N.countryId]:M})),Y?(i(Y.total??M.length),c(Y.page??1),p((Y.limit??M.length)||50)):i(M.length),M}catch(O){const R=O?.response?.data?.message||O?.message||"Failed to fetch states";throw b(R),new Error(R)}finally{g(!1)}},[]),w=u.useCallback(async(N,O=!1)=>{if(!N)throw new Error("countryId is required");if(!O&&t[N])return t[N];try{g(!0),b(null);const R=await nt.get(`/states/country/${N}`),{success:L,data:B,message:G,meta:$}=R.data;if(!L)throw new Error(G||"Failed to fetch states");const z=B||[];return e(z),a(Y=>({...Y,[N]:z})),$?.total!=null?i($.total):i(z.length),c(1),p(z.length||50),z}catch(R){const L=R?.response?.data?.message||R?.message||"Failed to fetch states";throw b(L),new Error(L)}finally{g(!1)}},[t]),C=u.useCallback(N=>{if(!N){a({});return}a(O=>{const{[N]:R,...L}=O;return L})},[]),k=u.useMemo(()=>({states:r,statesByCountry:t,loading:h,error:y,total:o,page:l,limit:d,getStates:v,getStatesByCountryId:w,clearStatesByCountry:C}),[r,t,h,y,o,l,d,v,w,C]);return n.jsx(PD.Provider,{value:k,children:s})},AD=()=>{const s=u.useContext(PD);if(!s)throw new Error("useStates must be used within a StateProvider");return s},MD=u.createContext(void 0),Kje=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async(g,y)=>{try{a(!0),i(null);const b=new URLSearchParams;y&&b.set("storeId",y);const v=b.toString(),w=`/tax-defaults/country/${g}${v?`?${v}`:""}`,C=await nt.get(w),{success:k,data:N,message:O}=C.data;if(!k)throw new Error(O||"Failed to fetch tax defaults");return e(N||[]),N||[]}catch(b){const v=b?.response?.data?.message||b?.message||"Failed to fetch tax defaults";throw i(v),new Error(v)}finally{a(!1)}},[]),c=u.useCallback(async(g,y)=>{try{a(!0),i(null);const b=`/tax-defaults/country/${g}/state/${y}`,v=await nt.get(b),{success:w,data:C,message:k}=v.data;if(!w)throw new Error(k||"Failed to fetch tax default");return C}catch(b){const v=b?.response?.data?.message||b?.message||"Failed to fetch tax default";throw i(v),new Error(v)}finally{a(!1)}},[]),d=u.useCallback(async g=>{try{a(!0),i(null);const y=await nt.get(`/tax-defaults/${g}`),{success:b,data:v,message:w}=y.data;if(!b)throw new Error(w||"Failed to fetch tax default");return v}catch(y){const b=y?.response?.data?.message||y?.message||"Failed to fetch tax default";throw i(b),new Error(b)}finally{a(!1)}},[]),p=u.useCallback(()=>{e([]),i(null),a(!1)},[]),h={taxDefaults:r,loading:t,error:o,getTaxDefaultsByCountryId:l,getTaxDefaultByCountryAndState:c,getTaxDefaultById:d,clearTaxDefaults:p};return n.jsx(MD.Provider,{value:h,children:s})},Yje=()=>{const s=u.useContext(MD);if(!s)throw new Error("useTaxRateDefaults must be used within a TaxRateDefaultProvider");return s},ID=u.createContext(void 0),Zje=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async C=>{try{a(!0),i(null);const k=await nt.post("/tax-rates",C),{success:N,data:O,message:R}=k.data;if(!N)throw new Error(R||"Failed to create tax rate");return e(L=>[O,...L]),O}catch(k){const N=k?.response?.data?.message||k?.message||"Failed to create tax rate";throw i(N),new Error(N)}finally{a(!1)}},[]),c=u.useCallback(async(C,k)=>{try{a(!0),i(null);const N=new URLSearchParams;k?.countryId&&N.set("countryId",k.countryId),k?.stateId!==void 0&&N.set("stateId",k.stateId===null?"null":k.stateId);const O=N.toString(),R=`/tax-rates/store/${C}${O?`?${O}`:""}`,L=await nt.get(R),{success:B,data:G,message:$}=L.data;if(!B)throw new Error($||"Failed to fetch tax rates");return e(G||[]),G||[]}catch(N){const O=N?.response?.data?.message||N?.message||"Failed to fetch tax rates";throw i(O),new Error(O)}finally{a(!1)}},[]),d=u.useCallback(async(C,k,N)=>{try{a(!0),i(null);const O=new URLSearchParams;N&&O.set("countryId",N);const R=O.toString(),L=`/tax-rates/store/${C}/state/${k}${R?`?${R}`:""}`,B=await nt.get(L),{success:G,data:$,message:z}=B.data;if(!G)throw new Error(z||"Failed to fetch tax rate");return $}catch(O){const R=O?.response?.data?.message||O?.message||"Failed to fetch tax rate";throw i(R),new Error(R)}finally{a(!1)}},[]),p=u.useCallback(async(C,k)=>{try{a(!0),i(null);const N=await nt.put(`/tax-rates/${C}`,k),{success:O,data:R,message:L}=N.data;if(!O)throw new Error(L||"Failed to update tax rate");return e(B=>B.map(G=>G._id===C?R:G)),R}catch(N){const O=N?.response?.data?.message||N?.message||"Failed to update tax rate";throw i(O),new Error(O)}finally{a(!1)}},[]),h=u.useCallback(async C=>{try{a(!0),i(null);const k=await nt.delete(`/tax-rates/${C}`),{success:N,message:O}=k.data;if(!N)throw new Error(O||"Failed to delete tax rate");e(R=>R.filter(L=>L._id!==C))}catch(k){const N=k?.response?.data?.message||k?.message||"Failed to delete tax rate";throw i(N),new Error(N)}finally{a(!1)}},[]),g=u.useCallback(async C=>{try{a(!0),i(null);const k=await nt.get(`/tax-rates/${C}`),{success:N,data:O,message:R}=k.data;if(!N)throw new Error(R||"Failed to fetch tax rate");return O}catch(k){const N=k?.response?.data?.message||k?.message||"Failed to fetch tax rate";throw i(N),new Error(N)}finally{a(!1)}},[]),y=u.useCallback(async(C,k)=>{try{a(!0),i(null);const N=await nt.get(`/tax-rates/store/${C}/country/${k}/states`),{success:O,data:R,message:L}=N.data;if(!O)throw new Error(L||"Failed to fetch states with tax details");return R}catch(N){const O=N?.response?.data?.message||N?.message||"Failed to fetch states with tax details";throw i(O),new Error(O)}finally{a(!1)}},[]),b=u.useCallback(async(C,k)=>{try{a(!0),i(null);const N=await nt.delete(`/tax-rates/store/${C}/country/${k}`),{success:O,data:R,message:L}=N.data;if(!O)throw new Error(L||"Failed to delete tax overrides");return e(B=>B.filter(G=>{const $=typeof G.storeId=="object"?G.storeId._id:G.storeId,z=typeof G.countryId=="object"?G.countryId._id:G.countryId;return $!==C||z!==k})),{deletedCount:R.deletedCount}}catch(N){const O=N?.response?.data?.message||N?.message||"Failed to delete tax overrides";throw i(O),new Error(O)}finally{a(!1)}},[]),v=u.useCallback(()=>{e([]),i(null),a(!1)},[]),w={taxRates:r,loading:t,error:o,createTaxRate:l,getTaxRatesByStoreId:c,getTaxRateByStoreAndState:d,updateTaxRate:p,deleteTaxRate:h,getTaxRateById:g,getStatesWithTaxDetails:y,deleteTaxOverridesByStoreAndCountry:b,clearTaxRates:v};return n.jsx(ID.Provider,{value:w,children:s})},Xje=()=>{const s=u.useContext(ID);if(!s)throw new Error("useTaxRateOverrides must be used within a TaxRateOverrideProvider");return s},RD=u.createContext(void 0),Qje=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async b=>{try{a(!0),i(null);const v=await nt.post("/shipping-overrides",b),{success:w,data:C,message:k}=v.data;if(!w)throw new Error(k||"Failed to create shipping override");return e(N=>[C,...N]),C}catch(v){const w=v?.response?.data?.message||v?.message||"Failed to create shipping override";throw i(w),new Error(w)}finally{a(!1)}},[]),c=u.useCallback(async(b,v)=>{try{a(!0),i(null);const w=await nt.get(`/shipping-overrides/store/${b}/country/${v}`),{success:C,data:k,message:N}=w.data;if(!C)throw new Error(N||"Failed to fetch shipping overrides");return e(k||[]),k||[]}catch(w){const C=w?.response?.data?.message||w?.message||"Failed to fetch shipping overrides";throw i(C),new Error(C)}finally{a(!1)}},[]),d=u.useCallback(async b=>{try{a(!0),i(null);const v=await nt.get(`/shipping-overrides/${b}`),{success:w,data:C,message:k}=v.data;if(!w)throw new Error(k||"Failed to fetch shipping override");return C}catch(v){const w=v?.response?.data?.message||v?.message||"Failed to fetch shipping override";throw i(w),new Error(w)}finally{a(!1)}},[]),p=u.useCallback(async(b,v)=>{try{a(!0),i(null);const w=await nt.put(`/shipping-overrides/${b}`,v),{success:C,data:k,message:N}=w.data;if(!C)throw new Error(N||"Failed to update shipping override");return e(O=>O.map(R=>R._id===b?k:R)),k}catch(w){const C=w?.response?.data?.message||w?.message||"Failed to update shipping override";throw i(C),new Error(C)}finally{a(!1)}},[]),h=u.useCallback(async b=>{try{a(!0),i(null);const v=await nt.delete(`/shipping-overrides/${b}`),{success:w,message:C}=v.data;if(!w)throw new Error(C||"Failed to delete shipping override");e(k=>k.filter(N=>N._id!==b))}catch(v){const w=v?.response?.data?.message||v?.message||"Failed to delete shipping override";throw i(w),new Error(w)}finally{a(!1)}},[]),g=u.useCallback(()=>{e([]),i(null),a(!1)},[]),y={shippingOverrides:r,loading:t,error:o,createShippingOverride:l,getShippingOverridesByStoreAndCountry:c,getShippingOverrideById:d,updateShippingOverride:p,deleteShippingOverride:h,clearShippingOverrides:g};return n.jsx(RD.Provider,{value:y,children:s})},Jje=()=>{const s=u.useContext(RD);if(!s)throw new Error("useShippingOverrides must be used within a ShippingOverrideProvider");return s},DD=u.createContext(void 0),e1e=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async b=>{try{a(!0),i(null);const v=await nt.post("/product-overrides",b),{success:w,data:C,message:k}=v.data;if(!w)throw new Error(k||"Failed to create product override");return e(N=>[C,...N]),C}catch(v){const w=v?.response?.data?.message||v?.message||"Failed to create product override";throw i(w),new Error(w)}finally{a(!1)}},[]),c=u.useCallback(async(b,v)=>{try{a(!0),i(null);const w=await nt.get(`/product-overrides/store/${b}/country/${v}`),{success:C,data:k,message:N}=w.data;if(!C)throw new Error(N||"Failed to fetch product overrides");return e(k||[]),k||[]}catch(w){const C=w?.response?.data?.message||w?.message||"Failed to fetch product overrides";throw i(C),new Error(C)}finally{a(!1)}},[]),d=u.useCallback(async b=>{try{a(!0),i(null);const v=await nt.get(`/product-overrides/${b}`),{success:w,data:C,message:k}=v.data;if(!w)throw new Error(k||"Failed to fetch product override");return C}catch(v){const w=v?.response?.data?.message||v?.message||"Failed to fetch product override";throw i(w),new Error(w)}finally{a(!1)}},[]),p=u.useCallback(async(b,v)=>{try{a(!0),i(null);const w=await nt.put(`/product-overrides/${b}`,v),{success:C,data:k,message:N}=w.data;if(!C)throw new Error(N||"Failed to update product override");return e(O=>O.map(R=>R._id===b?k:R)),k}catch(w){const C=w?.response?.data?.message||w?.message||"Failed to update product override";throw i(C),new Error(C)}finally{a(!1)}},[]),h=u.useCallback(async b=>{try{a(!0),i(null);const v=await nt.delete(`/product-overrides/${b}`),{success:w,message:C}=v.data;if(!w)throw new Error(C||"Failed to delete product override");e(k=>k.filter(N=>N._id!==b))}catch(v){const w=v?.response?.data?.message||v?.message||"Failed to delete product override";throw i(w),new Error(w)}finally{a(!1)}},[]),g=u.useCallback(()=>{e([]),i(null),a(!1)},[]),y={productOverrides:r,loading:t,error:o,createProductOverride:l,getProductOverridesByStoreAndCountry:c,getProductOverrideById:d,updateProductOverride:p,deleteProductOverride:h,clearProductOverrides:g};return n.jsx(DD.Provider,{value:y,children:s})},t1e=()=>{const s=u.useContext(DD);if(!s)throw new Error("useProductOverrides must be used within a ProductOverrideProvider");return s},LD=u.createContext(void 0),r1e=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async g=>{try{a(!0),i(null);const y=await nt.post("/product-override-entries",g),{success:b,data:v,message:w}=y.data;if(!b)throw new Error(w||"Failed to create product override entry");return e(C=>[v,...C]),v}catch(y){const b=y?.response?.data?.error||y?.response?.data?.message||y?.message||"Failed to create product override entry";throw i(b),new Error(b)}finally{a(!1)}},[]),c=u.useCallback(async g=>{try{a(!0),i(null);const y=await nt.get(`/product-override-entries/product-override/${g}`),{success:b,data:v,message:w}=y.data;if(!b)throw new Error(w||"Failed to fetch product override entries");return e(v||[]),v||[]}catch(y){const b=y?.response?.data?.error||y?.response?.data?.message||y?.message||"Failed to fetch product override entries";throw i(b),new Error(b)}finally{a(!1)}},[]),d=u.useCallback(async g=>{try{a(!0),i(null);const y=await nt.delete(`/product-override-entries/${g}`),{success:b,message:v}=y.data;if(!b)throw new Error(v||"Failed to delete product override entry");e(w=>w.filter(C=>C._id!==g))}catch(y){const b=y?.response?.data?.error||y?.response?.data?.message||y?.message||"Failed to delete product override entry";throw i(b),new Error(b)}finally{a(!1)}},[]),p=u.useCallback(()=>{e([]),i(null),a(!1)},[]),h={productOverrideEntries:r,loading:t,error:o,createProductOverrideEntry:l,getProductOverrideEntriesByProductOverrideId:c,deleteProductOverrideEntry:d,clearProductOverrideEntries:p};return n.jsx(LD.Provider,{value:h,children:s})},n1e=()=>{const s=u.useContext(LD);if(!s)throw new Error("useProductOverrideEntries must be used within a ProductOverrideEntryProvider");return s},FD=u.createContext(void 0),s1e=({children:s})=>{const[r,e]=u.useState(null),[t,a]=u.useState({}),[o,i]=u.useState(!1),[l,c]=u.useState(null),d=u.useCallback(async(g,y)=>{const b=t[g];if(b&&!y?.force)return e(b),b;try{i(!0),c(null);const v=await nt.get(`/country-taxes/${g}`),{success:w,data:C,message:k}=v.data;if(!w)throw new Error(k||"Failed to fetch country tax");return e(C),a(N=>({...N,[g]:C})),C}catch(v){const w=v?.response?.data?.error||v?.response?.data?.message||v?.message||"Failed to fetch country tax";throw c(w),new Error(w)}finally{i(!1)}},[t]),p=u.useCallback(g=>{g?(a(y=>{const b={...y};return delete b[g],b}),e(y=>y&&((typeof y.countryId=="string"?y.countryId:y.countryId?._id??"")===g?null:y))):(e(null),a({})),c(null),i(!1)},[]),h={countryTax:r,countryTaxMap:t,loading:o,error:l,getCountryTaxByCountryId:d,clearCountryTax:p};return n.jsx(FD.Provider,{value:h,children:s})},a1e=()=>{const s=u.useContext(FD);if(!s)throw new Error("useCountryTax must be used within a CountryTaxProvider");return s},BD=u.createContext(void 0),o1e=({children:s})=>{const[r,e]=u.useState(null),[t,a]=u.useState({}),[o,i]=u.useState(!1),[l,c]=u.useState(null),d=u.useRef({});u.useEffect(()=>{d.current=t},[t]);const p=u.useCallback(async w=>{try{i(!0),c(null);const C=await nt.post("/country-tax-overrides",w),{success:k,data:N,message:O}=C.data;if(!k)throw new Error(O||"Failed to create country tax override");const R=`${w.storeId}-${w.countryId}`;return e(N),a(L=>{const B={...L,[R]:N};return d.current=B,B}),N}catch(C){const k=C?.response?.data?.error||C?.response?.data?.message||C?.message||"Failed to create country tax override";throw c(k),new Error(k)}finally{i(!1)}},[]),h=u.useCallback(async(w,C,k)=>{const N=`${w}-${C}`,O=d.current[N];if(O&&!k?.force)return e(O),O;try{i(!0),c(null);const R=await nt.get(`/country-tax-overrides/store/${w}/country/${C}`),{success:L,data:B,message:G}=R.data;if(!L)throw new Error(G||"Failed to fetch country tax override");return B?(e(B),a($=>{const z={...$,[N]:B};return d.current=z,z}),B):null}catch(R){if(R?.response?.status===404)return e(null),a(B=>{const G={...B};return delete G[N],d.current=G,G}),null;const L=R?.response?.data?.error||R?.response?.data?.message||R?.message||"Failed to fetch country tax override";throw c(L),new Error(L)}finally{i(!1)}},[]),g=u.useCallback(async(w,C,k)=>{try{i(!0),c(null);const N=await nt.put(`/country-tax-overrides/store/${w}/country/${C}`,k),{success:O,data:R,message:L}=N.data;if(!O)throw new Error(L||"Failed to update country tax override");const B=`${w}-${C}`;return e(R),a(G=>{const $={...G,[B]:R};return d.current=$,$}),R}catch(N){const O=N?.response?.data?.error||N?.response?.data?.message||N?.message||"Failed to update country tax override";throw c(O),new Error(O)}finally{i(!1)}},[]),y=u.useCallback(async(w,C)=>{try{i(!0),c(null);const k=await nt.delete(`/country-tax-overrides/store/${w}/country/${C}`),{success:N,message:O}=k.data;if(!N)throw new Error(O||"Failed to delete country tax override");const R=`${w}-${C}`;a(L=>{const B={...L};return delete B[R],d.current=B,B}),e(L=>{if(!L)return null;const B=typeof L.storeId=="string"?L.storeId:L.storeId?._id??"",G=typeof L.countryId=="string"?L.countryId:L.countryId?._id??"";return B===w&&G===C?null:L})}catch(k){const N=k?.response?.data?.error||k?.response?.data?.message||k?.message||"Failed to delete country tax override";throw c(N),new Error(N)}finally{i(!1)}},[]),b=u.useCallback((w,C)=>{if(w&&C){const k=`${w}-${C}`;a(N=>{const O={...N};return delete O[k],O}),e(N=>{if(!N)return null;const O=typeof N.storeId=="string"?N.storeId:N.storeId?._id??"",R=typeof N.countryId=="string"?N.countryId:N.countryId?._id??"";return O===w&&R===C?null:N})}else e(null),a({});c(null),i(!1)},[]),v={countryTaxOverride:r,countryTaxOverrideMap:t,loading:o,error:l,createCountryTaxOverride:p,getCountryTaxOverrideByStoreAndCountry:h,updateCountryTaxOverrideByStoreAndCountry:g,deleteCountryTaxOverrideByStoreAndCountry:y,clearCountryTaxOverride:b};return n.jsx(BD.Provider,{value:v,children:s})},i1e=()=>{const s=u.useContext(BD);if(!s)throw new Error("useCountryTaxOverride must be used within a CountryTaxOverrideProvider");return s},l1e=()=>{const{countryId:s}=ks(),{countries:r,getCountries:e}=Hx(),{getStatesByCountryId:t,statesByCountry:a,loading:o}=AD(),{taxDefaults:i,loading:l,getTaxDefaultsByCountryId:c}=Yje(),{createTaxRate:d,updateTaxRate:p,deleteTaxRate:h,deleteTaxOverridesByStoreAndCountry:g,getTaxRatesByStoreId:y}=Xje(),{getShippingOverridesByStoreAndCountry:b,createShippingOverride:v,updateShippingOverride:w,deleteShippingOverride:C}=Jje(),{getProductOverridesByStoreAndCountry:k,createProductOverride:N,deleteProductOverride:O}=t1e(),{createProductOverrideEntry:R,getProductOverrideEntriesByProductOverrideId:L,deleteProductOverrideEntry:B}=n1e(),{getCountryTaxByCountryId:G,countryTaxMap:$}=a1e(),{createCountryTaxOverride:z,getCountryTaxOverrideByStoreAndCountry:Y,updateCountryTaxOverrideByStoreAndCountry:M,deleteCountryTaxOverrideByStoreAndCountry:q,countryTaxOverrideMap:P}=i1e(),{activeStoreId:H}=Ur(),{searchCollections:D}=Fp(),[X,se]=u.useState(null),[Q,xe]=u.useState(!1),[K,Z]=u.useState(!1),[ve,ae]=u.useState(!1),[Se,Pe]=u.useState("products"),[$e,we]=u.useState(""),[Ae,ze]=u.useState(""),[Ge,Ue]=u.useState(null),[ht,ee]=u.useState(""),[ue,Oe]=u.useState([]),[J,I]=u.useState(!1),[V,re]=u.useState(1),[pe,ge]=u.useState(null),[Ce,he]=u.useState("india"),[ie,Fe]=u.useState(9),[We,Qe]=u.useState(null),[de,Ee]=u.useState([]),[le,Ye]=u.useState([]),[De,ct]=u.useState(null),[ot,dt]=u.useState({anchorEl:null,overrideId:null,collectionName:""}),[Ke,kt]=u.useState([]),[At,xt]=u.useState({}),[Xt,br]=u.useState(0),[zt,be]=u.useState(!1),[Be,et]=u.useState(null),[wt,$t]=u.useState(""),[tr,Lr]=u.useState(""),[tn,bn]=u.useState(!1),[Fr,rr]=u.useState(!1),[wr,an]=u.useState(null),[En,rn]=u.useState(!1),[kr,jr]=u.useState(null),[mt,yr]=u.useState(0),[An,fn]=u.useState(!1),[wn,zr]=u.useState(0),[In,ne]=u.useState(!1),[ke,Re]=u.useState({taxRate:0,taxLabel:"",calculationMethod:"instead"});u.useEffect(()=>{e({limit:1e3})},[e]),u.useEffect(()=>{if(r.length>0&&s){const gt=r.find(ar=>ar._id===s);gt&&(se(gt),t(gt._id))}},[r,s,t]),u.useEffect(()=>{s&&G(s)},[s,G]),u.useEffect(()=>{s&&H&&Y(H,s)},[s,H]),u.useEffect(()=>{X&&X._id&&c(X._id,H||void 0)},[X,H,c]),u.useEffect(()=>{(async()=>{if(X&&X._id&&H)try{const ar=typeof X._id=="string"?X._id:X._id.toString(),Or=await k(H,ar);Ye(Or)}catch(ar){console.error("Failed to fetch product overrides:",ar)}})()},[X,H,k]),u.useEffect(()=>{(async()=>{if(le.length>0)try{const ar={};await Promise.all(le.map(async Or=>{try{const Mr=await L(Or._id);ar[Or._id]=Mr}catch(Mr){console.error(`Failed to fetch entries for product override ${Or._id}:`,Mr),ar[Or._id]=[]}})),xt(ar)}catch(ar){console.error("Failed to fetch product override entries:",ar)}else xt({})})()},[le,L]),u.useEffect(()=>{(async()=>{if(X&&X._id&&H)try{const ar=typeof X._id=="string"?X._id:X._id.toString(),Or=await b(H,ar);kt(Or)}catch(ar){console.error("Failed to fetch shipping overrides:",ar)}})()},[X,H,b]);const Ze=u.useMemo(()=>{if(!s)return 0;const gt=H?P[`${H}-${s}`]:null,ar=$[s];return gt?gt.taxRate:ar?ar.taxRate:0},[s,H,P,$]),st=u.useRef(null);u.useEffect(()=>{if(!(!H||!J))return st.current&&clearTimeout(st.current),st.current=setTimeout(async()=>{try{const gt=await D(H,ht||"",V,10);Oe(gt.data),ge(gt.pagination)}catch(gt){console.error("Failed to search collections:",gt),Oe([])}},300),()=>{st.current&&clearTimeout(st.current)}},[ht,V,J,H,D]),u.useEffect(()=>{J&&H&&(async()=>{try{const ar=await D(H,"",1,10);Oe(ar.data),ge(ar.pagination)}catch(ar){console.error("Failed to search collections:",ar),Oe([])}})()},[J,H,D]);const Ct=gt=>{we(gt._id),ze(gt.title),I(!1),ee(""),ct(null)},Xe=()=>{dt({anchorEl:null,overrideId:null,collectionName:""})},Ve=gt=>{re(gt)},je=(gt,ar,Or,Mr)=>{et(gt),$t(ar),Lr(Mr||""),bn(Or),be(!0)},He=async()=>{if(Be)try{if(Fr&&wr){await B(Be);const gt=await L(wr);if(xt(ar=>({...ar,[wr]:gt})),X&&X._id&&H){const ar=typeof X._id=="string"?X._id:X._id.toString(),Or=await k(H,ar);Ye(Or)}}else if(tn){if(await C(Be),X&&X._id&&H){const gt=typeof X._id=="string"?X._id:X._id.toString(),ar=await b(H,gt);kt(ar)}}else if(await O(Be),X&&X._id&&H){const gt=typeof X._id=="string"?X._id:X._id.toString(),ar=await k(H,gt);Ye(ar)}be(!1),et(null),$t(""),Lr(""),bn(!1),rr(!1),an(null)}catch(gt){console.error("Failed to delete override:",gt)}},at=()=>{be(!1),et(null),$t(""),Lr(""),bn(!1),rr(!1),an(null)},Ot=gt=>{jr(gt),yr(gt.taxRate),rn(!0)},ce=async()=>{if(!(!kr||!X||!X._id||!H))try{await w(kr._id,{taxRate:mt});const gt=typeof X._id=="string"?X._id:X._id.toString(),ar=await b(H,gt);kt(ar),rn(!1),jr(null),yr(0)}catch(gt){console.error("Failed to update shipping override:",gt)}},Te=()=>{rn(!1),jr(null),yr(0)},ut=()=>{if(!s||!H)return;const gt=H&&P[`${H}-${s}`]?.taxRate||$[s]?.taxRate||0;zr(gt),fn(!0)},jt=()=>{fn(!1),zr(0)},Lt=async()=>{if(!(!s||!H)){if(wn<0||wn>100){alert("Tax rate must be between 0 and 100");return}try{P[`${H}-${s}`]?await M(H,s,{taxRate:wn}):await z({storeId:H,countryId:s,taxRate:wn}),await Y(H,s,{force:!0}),jt()}catch(gt){console.error("Failed to update country tax override:",gt);const ar=gt?.response?.data?.message||gt?.message||"Failed to update country tax override";alert(ar)}}},ur=()=>{ne(!0)},Br=()=>{ne(!1)},_t=async()=>{if(!(!s||!H))try{await q(H,s),await Y(H,s,{force:!0}),Br()}catch(gt){console.error("Failed to reset country tax override:",gt);const ar=gt?.response?.data?.message||gt?.message||"Failed to reset country tax override";alert(ar)}},Kr=gt=>{if(!gt.stateId)return"India";if(typeof gt.stateId=="object"&&gt.stateId.name)return gt.stateId.name;if(X&&a[X._id]){const ar=a[X._id].find(Or=>Or._id===gt.stateId);return ar?ar.name:"Unknown"}return"Unknown"},Zr=gt=>{if(!gt||gt==="india")return"India";if(X&&a[X._id]){const ar=a[X._id].find(Or=>Or._id===gt);return ar?ar.name:"Unknown"}return"Unknown"},ps=gt=>{Qe(gt),Re({taxRate:gt.taxRate,taxLabel:gt.taxLabel||"IGST",calculationMethod:gt.calculationMethod||"instead"}),xe(!0)},Xn=()=>{xe(!1),Qe(null),Re({taxRate:0,taxLabel:"",calculationMethod:"instead"})},ds=async()=>{if(!(!We||!X||!H))try{const gt=typeof X._id=="string"?X._id:X._id.toString(),ar=We.stateId?typeof We.stateId=="object"&&We.stateId?._id?We.stateId._id:typeof We.stateId=="string"?We.stateId:null:null,Or=We.isOverride===!0||We.overrideId,Sn=ar!=null?ke.calculationMethod:null;Or&&We.overrideId?await p(We.overrideId,{taxRate:ke.taxRate,taxLabel:ke.taxLabel,calculationMethod:Sn}):await d({storeId:H,countryId:gt,stateId:ar,taxRate:ke.taxRate,taxLabel:ke.taxLabel,calculationMethod:Sn}),await c(gt,H),Xn()}catch(gt){console.error("Failed to save tax override:",gt);const ar=gt?.response?.data?.message||gt?.response?.data?.error||gt?.message||"Failed to save tax override. Please try again.";alert(ar)}},Ea=(gt,ar)=>{const Or=ar.toFixed(3);switch(gt){case"added":return`Added to ${Or}% federal tax`;case"instead":return`Instead of ${Or}% federal tax`;case"compounded":return`Compounded on top of ${Or}% federal tax`;default:return""}},sa=()=>{Z(!0)},Is=()=>{Z(!1)},ya=async()=>{if(!(!X||!X._id||!H))try{const gt=typeof X._id=="string"?X._id:X._id.toString();await g(H,gt);const ar=await c(gt,H);Is()}catch(gt){console.error("Failed to reset tax rates:",gt)}},Ir=gt=>{if(!gt)return"";if(typeof gt=="object"&&"name"in gt)return gt.name;if(X&&a[X._id]){const ar=a[X._id].find(Or=>Or._id===gt);return ar?ar.name:""}return""},_r=i.filter(gt=>gt.stateId&&gt.stateId!==null).map(gt=>({...gt,stateName:Ir(gt.stateId)})).sort((gt,ar)=>{const Or=gt.stateName.toLowerCase(),Mr=ar.stateName.toLowerCase();return Or.localeCompare(Mr)});return n.jsxs(cr,{sx:{maxWidth:1200,mx:"auto",py:4},children:[n.jsxs(mI,{sx:{mb:2},separator:n.jsx(qN,{fontSize:"small"}),children:[n.jsxs(jl,{component:Zc,to:"/settings/taxes-and-duties",sx:{display:"flex",alignItems:"center",color:"#6b7280",textDecoration:"none","&:hover":{color:"#111827"}},children:[n.jsx(jge,{sx:{mr:.5,fontSize:20}}),"Taxes and duties"]}),n.jsx(Bt,{color:"text.primary",sx:{fontWeight:500},children:X?.name||"Loading..."})]}),n.jsx(Bt,{variant:"h4",sx:{fontWeight:700,color:"#111827",mb:3},children:X?.name||"Loading..."}),s&&($[s]||H&&P[`${H}-${s}`])&&n.jsx(Ms,{elevation:0,sx:{p:3,mb:3,borderRadius:2,border:"1px solid #e5e7eb",backgroundColor:"#fff"},children:n.jsxs(Ks,{direction:"row",alignItems:"center",spacing:2,children:[n.jsx(Bt,{sx:{minWidth:120,color:"#111827",fontWeight:500},children:X?.name||"Loading..."}),n.jsxs(Bt,{sx:{color:"#111827",fontWeight:500},children:[(H&&P[`${H}-${s}`]?.taxRate||$[s]?.taxRate||0).toFixed(2),"%"]}),H&&P[`${H}-${s}`]&&n.jsx(Sk,{label:"Overridden",size:"small",sx:{backgroundColor:"#fef3c7",color:"#92400e",fontWeight:500,fontSize:"0.75rem",height:24}}),n.jsx(cr,{sx:{flex:1}}),H&&P[`${H}-${s}`]&&n.jsx(Zn,{variant:"outlined",size:"small",onClick:ur,sx:{textTransform:"none",borderColor:"#d1d5db",color:"#111827",fontSize:"0.75rem",px:2,"&:hover":{borderColor:"#9ca3af",backgroundColor:"#f3f4f6"}},children:"Reset to default"}),n.jsx(es,{size:"small",onClick:ut,sx:{color:"#6b7280","&:hover":{backgroundColor:"#f3f4f6",color:"#111827"}},children:n.jsx(QC,{fontSize:"small"})})]})}),n.jsxs(Ms,{elevation:0,sx:{p:3,borderRadius:2,border:"1px solid #e5e7eb",backgroundColor:"#fff"},children:[n.jsxs(Ks,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:3},children:[n.jsx(Bt,{variant:"h6",sx:{fontWeight:600,color:"#111827"},children:"Base taxes"}),n.jsx(Zn,{variant:"outlined",onClick:sa,sx:{textTransform:"none",borderColor:"#d1d5db",color:"#111827","&:hover":{borderColor:"#9ca3af",backgroundColor:"#f3f4f6"}},children:"Reset to default tax rates"})]}),n.jsx(Bt,{variant:"body1",sx:{fontWeight:600,color:"#111827",mb:2},children:"Regions"}),n.jsx(AI,{children:n.jsxs(OI,{children:[n.jsx(MI,{children:n.jsxs(om,{children:[n.jsx(Ua,{sx:{fontWeight:600,color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Region"}),n.jsx(Ua,{sx:{fontWeight:600,color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Tax rate"}),n.jsx(Ua,{sx:{fontWeight:600,color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Tax type"}),n.jsx(Ua,{sx:{fontWeight:600,color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Federal tax override"}),n.jsx(Ua,{sx:{fontWeight:600,color:"#6b7280",borderBottom:"1px solid #e5e7eb",width:80},children:"Actions"})]})}),n.jsx(PI,{children:o||l?n.jsx(om,{children:n.jsx(Ua,{colSpan:5,sx:{textAlign:"center",py:4,color:"#6b7280"},children:"Loading tax defaults..."})}):_r.length===0?n.jsx(om,{children:n.jsx(Ua,{colSpan:5,sx:{textAlign:"center",py:4,color:"#6b7280"},children:"No tax defaults found"})}):_r.map(gt=>{const ar=gt.stateName||Ir(gt.stateId),Or=gt.calculationMethod||"instead";return n.jsxs(om,{children:[n.jsx(Ua,{sx:{borderBottom:"1px solid #f3f4f6",color:"#111827"},children:ar}),n.jsxs(Ua,{sx:{borderBottom:"1px solid #f3f4f6",color:"#111827"},children:[gt.taxRate.toFixed(3),"%"]}),n.jsx(Ua,{sx:{borderBottom:"1px solid #f3f4f6",color:"#111827"},children:gt.taxLabel||"IGST"}),n.jsx(Ua,{sx:{borderBottom:"1px solid #f3f4f6",color:"#111827"},children:Ea(Or,Ze)}),n.jsx(Ua,{sx:{borderBottom:"1px solid #f3f4f6"},children:n.jsx(es,{size:"small",onClick:()=>ps(gt),sx:{color:"#6b7280","&:hover":{backgroundColor:"#f3f4f6",color:"#111827"}},children:n.jsx(QC,{fontSize:"small"})})})]},gt._id)})})]})})]}),n.jsxs(cr,{sx:{mt:4},children:[n.jsx(Bt,{variant:"h6",sx:{fontWeight:600,color:"#111827",mb:2},children:"Tax rates and exemptions"}),n.jsxs(Ms,{elevation:0,sx:{p:3,mb:3,borderRadius:2,border:"1px solid #e5e7eb",backgroundColor:"#fff"},children:[n.jsxs(cr,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[n.jsx(Bt,{variant:"body1",sx:{fontWeight:600,color:"#111827"},children:"Shipping overrides"}),n.jsx(es,{size:"small",onClick:()=>{Pe("shipping"),ae(!0),ct(null)},sx:{border:"1px solid #e5e7eb",borderRadius:1,color:"#111827","&:hover":{backgroundColor:"#f3f4f6",borderColor:"#d1d5db"}},"aria-label":"add shipping override",children:n.jsx(ky,{fontSize:"small"})})]}),Ke.length===0?n.jsx(Bt,{variant:"body2",sx:{color:"#6b7280",mb:2},children:"No shipping overrides"}):n.jsx(Ks,{spacing:2,sx:{mb:2},children:Ke.map(gt=>{const Or=Kr(gt);return n.jsxs(Ks,{direction:"row",alignItems:"center",spacing:2,sx:{p:2,border:"1px solid #f3f4f6",borderRadius:1,backgroundColor:"#fafafa"},children:[n.jsx(Bt,{sx:{minWidth:120,color:"#111827",fontWeight:500},children:Or}),n.jsxs(Bt,{sx:{color:"#111827",fontWeight:500},children:[gt.taxRate,"%"]}),n.jsxs(Bt,{sx:{color:"#6b7280",flex:1},children:["instead of ",Ze.toFixed(3),"% federal tax"]}),n.jsx(es,{size:"small",onClick:()=>Ot(gt),sx:{color:"#6b7280","&:hover":{color:"#2563eb",backgroundColor:"#eff6ff"}},children:n.jsx(QC,{fontSize:"small"})}),n.jsx(es,{size:"small",onClick:()=>je(gt._id,Or,!0),sx:{color:"#6b7280","&:hover":{color:"#dc2626",backgroundColor:"#fee2e2"}},children:n.jsx(nf,{fontSize:"small"})})]},gt._id)})}),n.jsxs(cr,{onClick:()=>{Pe("shipping"),Ue(null),ae(!0),ct(null),he("india"),Fe(9)},sx:{display:"flex",alignItems:"center",gap:1,border:"1px solid #e5e7eb",borderRadius:1.5,px:2,py:1.25,cursor:"pointer",color:"#111827","&:hover":{backgroundColor:"#f9fafb",borderColor:"#d1d5db"}},children:[n.jsx(ky,{sx:{fontSize:20}}),n.jsx(Bt,{sx:{fontWeight:500},children:"Add override"})]})]}),n.jsxs(Aj,{anchorEl:ot.anchorEl,open:!!ot.anchorEl,onClose:Xe,children:[n.jsxs(zn,{onClick:()=>{const gt=le.find(ar=>(typeof ar.collectionId=="object"?ar.collectionId.title:ar.collectionId||"")===ot.collectionName);gt&&(Ue(ot.collectionName||null),we(gt._id)),Pe("shipping"),ae(!0),ct(null),he("india"),Fe(9),Xe()},children:[n.jsx(WN,{children:n.jsx(ky,{fontSize:"small"})}),n.jsx(Tw,{primary:"Add override"})]}),n.jsxs(zn,{onClick:()=>{ot.overrideId&&(je(ot.overrideId,"",!1,ot.collectionName),Xe())},children:[n.jsx(WN,{children:n.jsx(nf,{fontSize:"small"})}),n.jsx(Tw,{primary:"Delete override"})]})]}),n.jsxs(Ms,{elevation:0,sx:{p:3,mb:3,borderRadius:2,border:"1px solid #e5e7eb",backgroundColor:"#fff"},children:[n.jsxs(cr,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[n.jsx(Bt,{variant:"body1",sx:{fontWeight:600,color:"#111827"},children:"Product overrides"}),n.jsx(es,{size:"small",onClick:()=>{Pe("products"),Ue(null),ae(!0),ct(null)},sx:{border:"1px solid #e5e7eb",borderRadius:1,color:"#111827","&:hover":{backgroundColor:"#f3f4f6",borderColor:"#d1d5db"}},"aria-label":"add product override",children:n.jsx(ky,{fontSize:"small"})})]}),le.length===0?n.jsx(Bt,{variant:"body2",sx:{color:"#6b7280",mb:2},children:"No product overrides"}):n.jsx(Ks,{spacing:1.5,sx:{mb:2},children:le.map(gt=>{const ar=typeof gt.collectionId=="object"?gt.collectionId.title:gt.collectionId||"Unknown Collection",Or=At[gt._id]||[];return n.jsxs(cr,{sx:{border:"1px solid #e5e7eb",borderRadius:1.5,overflow:"hidden"},children:[n.jsxs(cr,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:2,py:1.5,backgroundColor:"#f9fafb"},children:[n.jsx(Bt,{component:"span",sx:{color:"#2563eb",fontWeight:600,cursor:"pointer","&:hover":{textDecoration:"underline"}},children:ar}),n.jsx(Ks,{direction:"row",alignItems:"center",spacing:1,children:n.jsx(es,{size:"small",sx:{color:"#6b7280"},"aria-label":"more actions",onClick:Mr=>dt({anchorEl:Mr.currentTarget,overrideId:gt._id,collectionName:ar}),children:n.jsx(zI,{fontSize:"small"})})})]}),Or.length>0&&n.jsx(cr,{sx:{p:2,pt:1},children:n.jsx(Ks,{spacing:1.5,children:Or.map(Mr=>{const Sn=Mr.stateId?typeof Mr.stateId=="object"&&Mr.stateId.name?Mr.stateId.name:"Unknown State":"India";return n.jsxs(Ks,{direction:"row",alignItems:"center",spacing:2,sx:{p:2,border:"1px solid #f3f4f6",borderRadius:1,backgroundColor:"#fafafa"},children:[n.jsx(Bt,{sx:{minWidth:120,color:"#111827",fontWeight:500},children:Sn}),n.jsxs(Bt,{sx:{color:"#111827",fontWeight:500},children:[Mr.taxRate,"%"]}),n.jsxs(Bt,{sx:{color:"#6b7280",flex:1},children:["instead of ",Ze.toFixed(3),"% federal tax"]}),n.jsx(es,{size:"small",onClick:()=>{et(Mr._id),$t(Sn),rr(!0),an(gt._id),be(!0)},sx:{color:"#6b7280","&:hover":{color:"#dc2626",backgroundColor:"#fee2e2"}},children:n.jsx(nf,{fontSize:"small"})})]},Mr._id)})})})]},gt._id)})})]}),n.jsx(cr,{sx:{textAlign:"center",mt:3},children:n.jsx(jl,{href:"#",underline:"hover",sx:{color:"#6b7280",fontSize:"0.875rem","&:hover":{color:"#111827"}},children:"Learn more about sales tax"})})]}),n.jsxs($c,{open:Q,onClose:Xn,maxWidth:"sm",fullWidth:!0,children:[n.jsxs(Vc,{sx:{m:0,p:3,pb:2,fontWeight:600,color:"#111827"},children:["Edit Tax Default",n.jsx(es,{"aria-label":"close",onClick:Xn,sx:{position:"absolute",right:16,top:16,color:"#6b7280","&:hover":{backgroundColor:"#f3f4f6"}},children:n.jsx(Bd,{})})]}),n.jsx(Uc,{sx:{px:3,pt:2,pb:2},children:n.jsxs(Ks,{spacing:3,children:[n.jsxs(cr,{children:[n.jsx(Bt,{variant:"body2",sx:{color:"#6b7280",mb:1,fontWeight:500},children:"Region"}),n.jsx(Bt,{variant:"body1",sx:{color:"#111827",fontWeight:500},children:We&&(We.stateName||(We.stateId===null?"India":Ir(We.stateId)))})]}),n.jsx(Ns,{label:"Tax rate",type:"number",value:ke.taxRate,onChange:gt=>Re({...ke,taxRate:parseFloat(gt.target.value)||0}),InputProps:{endAdornment:n.jsx(wl,{position:"end",children:n.jsx(Bt,{sx:{color:"#6b7280"},children:"%"})})},inputProps:{step:.001,min:0,max:100},fullWidth:!0,size:"small"}),n.jsx(Ns,{label:"Tax type",value:ke.taxLabel,onChange:gt=>Re({...ke,taxLabel:gt.target.value}),fullWidth:!0,size:"small",disabled:We&&(!We.stateId||We.stateId===null)}),We&&We.stateId&&We.stateId!==null&&n.jsxs(tf,{fullWidth:!0,size:"small",children:[n.jsx(Bt,{variant:"body2",sx:{color:"#6b7280",mb:1,fontWeight:500},children:"Federal tax override"}),n.jsxs(Kd,{value:ke.calculationMethod||"instead",onChange:gt=>Re({...ke,calculationMethod:gt.target.value}),displayEmpty:!0,children:[n.jsxs(zn,{value:"added",children:["Added to ",Ze.toFixed(3),"% federal tax"]}),n.jsxs(zn,{value:"instead",children:["Instead of ",Ze.toFixed(3),"% federal tax"]}),n.jsxs(zn,{value:"compounded",children:["Compounded on top of ",Ze.toFixed(3),"% federal tax"]})]})]})]})}),n.jsxs(Fd,{sx:{p:3,pt:2},children:[n.jsx(Zn,{onClick:Xn,sx:{textTransform:"none",color:"#6b7280","&:hover":{backgroundColor:"#f3f4f6"}},children:"Cancel"}),n.jsx(Zn,{variant:"contained",onClick:ds,sx:{textTransform:"none",backgroundColor:"#6b7280",color:"#fff","&:hover":{backgroundColor:"#4b5563"}},children:"Save changes"})]})]}),n.jsxs($c,{open:K,onClose:Is,maxWidth:"sm",fullWidth:!0,children:[n.jsxs(Vc,{sx:{m:0,p:3,pb:2,fontWeight:600,color:"#111827"},children:["Reset to default tax rates",n.jsx(es,{"aria-label":"close",onClick:Is,sx:{position:"absolute",right:16,top:16,color:"#6b7280","&:hover":{backgroundColor:"#f3f4f6"}},children:n.jsx(Bd,{})})]}),n.jsx(Uc,{sx:{px:3,pt:2,pb:2},children:n.jsx(Bt,{variant:"body1",sx:{color:"#111827"},children:"Are you sure you want to reset all your taxes for India? This will set both the country tax and all region taxes to their current default values."})}),n.jsxs(Fd,{sx:{p:3,pt:2},children:[n.jsx(Zn,{onClick:Is,sx:{textTransform:"none",color:"#6b7280","&:hover":{backgroundColor:"#f3f4f6"}},children:"Cancel"}),n.jsx(Zn,{variant:"contained",onClick:ya,sx:{textTransform:"none",backgroundColor:"#dc2626",color:"#fff","&:hover":{backgroundColor:"#b91c1c"}},children:"Reset tax rates"})]})]}),n.jsxs($c,{open:ve,onClose:()=>ae(!1),maxWidth:"sm",fullWidth:!0,children:[n.jsxs(Vc,{sx:{m:0,p:3,pb:2,fontWeight:600,color:"#111827"},children:[Se==="shipping"?Ge?`Add region to override for ${Ge}`:"Add region to override for Shipping":"Add tax override for India",n.jsx(es,{"aria-label":"close",onClick:()=>{ae(!1),Pe("products"),we(""),ze(""),ee(""),I(!1),re(1),he("india"),Fe(9),ct(null),Ue(null)},sx:{position:"absolute",right:16,top:16,color:"#6b7280","&:hover":{backgroundColor:"#f3f4f6"}},children:n.jsx(Bd,{})})]}),n.jsx(Uc,{sx:{px:3,pt:2,pb:2},children:n.jsxs(Ks,{spacing:3,children:[Se==="products"&&n.jsxs(cr,{sx:{position:"relative"},children:[n.jsxs(Bt,{variant:"body2",sx:{color:"#6b7280",mb:1.5,fontWeight:400},children:["Select a collection to apply the tax override to. You can also"," ",n.jsx(jl,{component:Zc,to:"http://admin.localhost:5173/products/collections/new",target:"_blank",sx:{color:"#2563eb",textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"create a new collection"}),"."]}),n.jsx(tf,{fullWidth:!0,size:"small",sx:{mt:1},children:n.jsxs(Kd,{value:$e,onOpen:()=>{I(!0),re(1)},onClose:()=>{I(!1),ee("")},displayEmpty:!0,renderValue:()=>Ae||"Select collection",sx:{backgroundColor:"#fff","& .MuiOutlinedInput-notchedOutline":{borderColor:"#d1d5db"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#9ca3af"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#2563eb"}},MenuProps:{PaperProps:{sx:{maxHeight:400,mt:.5}}},children:[n.jsx(cr,{sx:{p:1,borderBottom:"1px solid #e5e7eb"},children:n.jsx(Ns,{fullWidth:!0,size:"small",placeholder:"Search collections",value:ht,onChange:gt=>{ee(gt.target.value),re(1)},onClick:gt=>gt.stopPropagation(),onKeyDown:gt=>gt.stopPropagation(),InputProps:{startAdornment:n.jsx(wl,{position:"start",children:n.jsx(Ik,{sx:{color:"#6b7280",fontSize:20}})})},sx:{"& .MuiOutlinedInput-root":{backgroundColor:"#fff","& fieldset":{borderColor:"#2563eb"},"&:hover fieldset":{borderColor:"#2563eb"},"&.Mui-focused fieldset":{borderColor:"#2563eb"}}}})}),ue.length===0?n.jsx(zn,{disabled:!0,sx:{justifyContent:"center",py:2},children:n.jsx(Bt,{sx:{color:"#6b7280"},children:"No collections found"})}):n.jsxs(n.Fragment,{children:[ue.map(gt=>n.jsx(zn,{value:gt._id,onClick:()=>Ct(gt),selected:$e===gt._id,sx:{"&.Mui-selected":{backgroundColor:"#f3f4f6","&:hover":{backgroundColor:"#e5e7eb"}}},children:gt.title},gt._id)),pe&&pe.totalPages>1&&n.jsxs(cr,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",px:1,py:.5,borderTop:"1px solid #e5e7eb"},children:[n.jsx(es,{size:"small",disabled:V===1,onClick:gt=>{gt.stopPropagation(),Ve(V-1)},sx:{color:"#6b7280","&:disabled":{color:"#d1d5db"}},children:n.jsx(xge,{})}),n.jsxs(Bt,{variant:"body2",sx:{color:"#6b7280"},children:["Page ",V," of ",pe.totalPages]}),n.jsx(es,{size:"small",disabled:V===pe.totalPages,onClick:gt=>{gt.stopPropagation(),Ve(V+1)},sx:{color:"#6b7280","&:disabled":{color:"#d1d5db"}},children:n.jsx(qN,{})})]})]})]})}),De&&n.jsx(Bt,{variant:"body2",sx:{color:"#dc2626",mt:1},children:De})]}),Se==="shipping"&&De&&n.jsx(cr,{children:n.jsx(Bt,{variant:"body2",sx:{color:"#dc2626",mt:1},children:De})}),Se==="shipping"&&n.jsxs(Ks,{direction:"row",spacing:2,children:[n.jsxs(cr,{sx:{flex:1},children:[n.jsx(Bt,{variant:"body2",sx:{color:"#6b7280",mb:1,fontWeight:500},children:"Location"}),n.jsx(tf,{fullWidth:!0,size:"small",children:n.jsxs(Kd,{value:Ce,onChange:gt=>{he(gt.target.value),ct(null)},sx:{backgroundColor:"#fff","& .MuiOutlinedInput-notchedOutline":{borderColor:"#d1d5db"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#9ca3af"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#2563eb"}},children:[n.jsx(zn,{value:"india",children:"India"}),X&&a[X._id]&&a[X._id].map(gt=>n.jsx(zn,{value:gt._id,children:gt.name},gt._id))]})})]}),n.jsxs(cr,{sx:{flex:1},children:[n.jsx(Bt,{variant:"body2",sx:{color:"#6b7280",mb:1,fontWeight:500},children:"Tax rate"}),n.jsx(Ns,{type:"number",value:ie,onChange:gt=>Fe(parseFloat(gt.target.value)||0),InputProps:{endAdornment:n.jsx(wl,{position:"end",children:n.jsx(Bt,{sx:{color:"#6b7280"},children:"%"})})},inputProps:{step:.001,min:0,max:100},fullWidth:!0,size:"small",sx:{"& .MuiOutlinedInput-root":{backgroundColor:"#fff","& fieldset":{borderColor:"#d1d5db"},"&:hover fieldset":{borderColor:"#9ca3af"},"&.Mui-focused fieldset":{borderColor:"#2563eb"}}}})]})]}),Se==="products"&&n.jsx(Bt,{variant:"body2",sx:{color:"#6b7280"},children:"The selected collection will use the default India tax rates. No extra inputs needed."})]})}),n.jsxs(Fd,{sx:{p:3,pt:2},children:[n.jsx(Zn,{onClick:()=>{ae(!1),Pe("products"),we(""),ze(""),ee(""),I(!1),re(1),he("india"),Fe(9),ct(null)},sx:{textTransform:"none",color:"#6b7280","&:hover":{backgroundColor:"#f3f4f6"}},children:"Cancel"}),n.jsx(Zn,{variant:"contained",disabled:Se==="products"&&!$e,onClick:async()=>{if(!(!X||!X._id||!H))try{const gt=typeof X._id=="string"?X._id:X._id.toString();if(Se==="shipping"){const ar=Ce==="india"?null:Ce;if(Ge&&$e){if((At[$e]||[]).some($n=>{const Fn=typeof $n.stateId=="object"&&$n.stateId!==null?$n.stateId._id:$n.stateId;return ar===null?Fn==null:Fn===ar})){const $n=ar===null||ar==="india"?"India":Zr(ar);ct(`A product override entry already exists for ${$n}. You cannot add the same state twice for this product override.`);return}await R({productOverrideId:$e,stateId:ar,taxRate:ie,isActive:!0});const Sn=await L($e);xt($n=>({...$n,[$e]:Sn}));const jn=await k(H,gt);Ye(jn)}else{if(Ke.some(Sn=>{const jn=typeof Sn.stateId=="object"&&Sn.stateId!==null?Sn.stateId._id:Sn.stateId;return ar===null?jn==null:jn===ar})){const Sn=ar===null||ar==="india"?"India":Zr(ar);ct(`A shipping override already exists for ${Sn}. You cannot add the same state twice for this store and country.`);return}await v({storeId:H,countryId:gt,stateId:ar,taxRate:ie,isActive:!0});const Mr=await b(H,gt);kt(Mr)}}else{if(le.some(Mr=>(typeof Mr.collectionId=="object"?Mr.collectionId._id:Mr.collectionId)===$e)){ct("This collection already has a product override for India.");return}await N({storeId:H,countryId:gt,collectionId:$e});const Or=await k(H,gt);Ye(Or)}ae(!1),Pe("products"),we(""),ze(""),ee(""),I(!1),re(1),he("india"),Fe(9),ct(null),Ue(null)}catch(gt){console.error("Failed to create override:",gt);const ar=gt?.response?.data?.error||gt?.message||"Failed to create override. Please try again.";ct(ar)}},sx:{textTransform:"none",backgroundColor:Se==="products"&&!$e?"#d1d5db":"#111827",color:"#fff","&:hover":{backgroundColor:Se==="products"&&!$e?"#d1d5db":"#000000"},"&.Mui-disabled":{backgroundColor:"#d1d5db",color:"#9ca3af"}},children:Se==="shipping"?"Add region to override":"Add override"})]})]}),n.jsxs($c,{open:zt,onClose:at,maxWidth:"sm",fullWidth:!0,children:[n.jsxs(Vc,{sx:{m:0,p:3,pb:2,fontWeight:600,color:"#111827"},children:[tn||Fr?"Delete region from override":"Delete entire override",n.jsx(es,{"aria-label":"close",onClick:at,sx:{position:"absolute",right:16,top:16,color:"#6b7280","&:hover":{backgroundColor:"#f3f4f6"}},children:n.jsx(Bd,{})})]}),n.jsx(Uc,{sx:{px:3,pt:2,pb:2},children:n.jsx(Bt,{variant:"body1",sx:{color:"#111827"},children:tn||Fr?n.jsxs(n.Fragment,{children:["Are you sure you want to remove ",n.jsx("strong",{children:wt})," from the list of regions this override applies to? This action cannot be reversed."]}):n.jsxs(n.Fragment,{children:["Are you sure you want to remove ",n.jsx("strong",{children:tr}),"? This action cannot be reversed."]})})}),n.jsxs(Fd,{sx:{p:3,pt:2},children:[n.jsx(Zn,{onClick:at,sx:{textTransform:"none",color:"#6b7280",border:"1px solid #d1d5db","&:hover":{backgroundColor:"#f3f4f6"}},children:"Cancel"}),n.jsx(Zn,{variant:"contained",onClick:He,sx:{textTransform:"none",backgroundColor:"#dc2626",color:"#fff","&:hover":{backgroundColor:"#b91c1c"}},children:"Delete"})]})]}),n.jsxs($c,{open:En,onClose:Te,maxWidth:"sm",fullWidth:!0,children:[n.jsxs(Vc,{sx:{m:0,p:3,pb:2,fontWeight:600,color:"#111827"},children:["Edit shipping override",n.jsx(es,{"aria-label":"close",onClick:Te,sx:{position:"absolute",right:16,top:16,color:"#6b7280","&:hover":{backgroundColor:"#f3f4f6"}},children:n.jsx(Bd,{})})]}),n.jsx(Uc,{sx:{px:3,pt:2,pb:2},children:kr&&n.jsxs(Ks,{spacing:3,children:[n.jsxs(cr,{children:[n.jsx(Bt,{variant:"body2",sx:{color:"#6b7280",mb:1},children:"Location"}),n.jsx(Bt,{variant:"body1",sx:{color:"#111827",fontWeight:500},children:Kr(kr)})]}),n.jsxs(cr,{children:[n.jsx(Bt,{variant:"body2",sx:{color:"#6b7280",mb:1},children:"Tax rate"}),n.jsx(Ns,{type:"number",value:mt,onChange:gt=>yr(parseFloat(gt.target.value)||0),fullWidth:!0,InputProps:{endAdornment:n.jsx(wl,{position:"end",children:n.jsx(Bt,{sx:{color:"#6b7280"},children:"%"})})},inputProps:{step:.001,min:0,max:100},sx:{"& .MuiOutlinedInput-root":{backgroundColor:"#fff"}}})]})]})}),n.jsxs(Fd,{sx:{p:3,pt:2},children:[n.jsx(Zn,{onClick:Te,sx:{textTransform:"none",color:"#6b7280","&:hover":{backgroundColor:"#f3f4f6"}},children:"Cancel"}),n.jsx(Zn,{variant:"contained",onClick:ce,sx:{textTransform:"none",backgroundColor:"#2563eb",color:"#fff","&:hover":{backgroundColor:"#1d4ed8"}},children:"Done"})]})]}),n.jsxs($c,{open:An,onClose:jt,maxWidth:"sm",fullWidth:!0,children:[n.jsxs(Vc,{sx:{m:0,p:3,pb:2,fontWeight:600,color:"#111827"},children:["Edit country tax",n.jsx(es,{"aria-label":"close",onClick:jt,sx:{position:"absolute",right:16,top:16,color:"#6b7280","&:hover":{backgroundColor:"#f3f4f6"}},children:n.jsx(Bd,{})})]}),n.jsx(Uc,{sx:{px:3,pt:2,pb:2},children:n.jsxs(Ks,{spacing:3,children:[n.jsxs(cr,{children:[n.jsx(Bt,{variant:"body2",sx:{color:"#6b7280",mb:1},children:"Country"}),n.jsx(Bt,{variant:"body1",sx:{color:"#111827",fontWeight:500},children:X?.name||"Loading..."})]}),n.jsxs(cr,{children:[n.jsx(Bt,{variant:"body2",sx:{color:"#6b7280",mb:1},children:"Tax rate"}),n.jsx(Ns,{type:"number",value:wn,onChange:gt=>zr(parseFloat(gt.target.value)||0),fullWidth:!0,InputProps:{endAdornment:n.jsx(wl,{position:"end",children:n.jsx(Bt,{sx:{color:"#6b7280"},children:"%"})})},inputProps:{step:.01,min:0,max:100},sx:{"& .MuiOutlinedInput-root":{backgroundColor:"#fff"}}})]})]})}),n.jsxs(Fd,{sx:{p:3,pt:2},children:[n.jsx(Zn,{onClick:jt,sx:{textTransform:"none",color:"#6b7280","&:hover":{backgroundColor:"#f3f4f6"}},children:"Cancel"}),n.jsx(Zn,{variant:"contained",onClick:Lt,sx:{textTransform:"none",backgroundColor:"#2563eb",color:"#fff","&:hover":{backgroundColor:"#1d4ed8"}},children:"Save"})]})]}),n.jsxs($c,{open:In,onClose:Br,maxWidth:"sm",fullWidth:!0,children:[n.jsxs(Vc,{sx:{m:0,p:3,pb:2,fontWeight:600,color:"#111827"},children:["Reset to default",n.jsx(es,{"aria-label":"close",onClick:Br,sx:{position:"absolute",right:16,top:16,color:"#6b7280","&:hover":{backgroundColor:"#f3f4f6"}},children:n.jsx(Bd,{})})]}),n.jsx(Uc,{sx:{px:3,pt:2,pb:2},children:n.jsx(Bt,{variant:"body1",sx:{color:"#111827"},children:"Are you sure you want to reset the country tax to default? This will delete your overridden value and the default value will be used."})}),n.jsxs(Fd,{sx:{p:3,pt:2},children:[n.jsx(Zn,{onClick:Br,sx:{textTransform:"none",color:"#6b7280",border:"1px solid #d1d5db","&:hover":{backgroundColor:"#f3f4f6"}},children:"Cancel"}),n.jsx(Zn,{variant:"contained",onClick:_t,sx:{textTransform:"none",backgroundColor:"#dc2626",color:"#fff","&:hover":{backgroundColor:"#b91c1c"}},children:"Reset to default"})]})]})]})},zD=u.createContext(void 0),c1e=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async p=>{a(!0),i(null);try{const{data:h}=await nt.get(`/local-delivery-location-entries/local-delivery/${p}`);return e(h.data),h.data}catch(h){const g=h?.response?.data?.message||"Failed to fetch local delivery location entries";throw i(g),h}finally{a(!1)}},[]),c=u.useCallback(()=>{e([]),i(null),a(!1)},[]),d=u.useMemo(()=>({entries:r,loading:t,error:o,fetchEntriesByLocalDeliveryId:l,clearEntries:c}),[r,t,o,l,c]);return n.jsx(zD.Provider,{value:d,children:s})},d1e=()=>{const s=u.useContext(zD);if(!s)throw new Error("useLocalDeliveryLocationEntries must be used within a LocalDeliveryLocationEntriesProvider");return s},u1e=()=>{const s=dr(),{localDeliveryId:r}=ks(),{entries:e,fetchEntriesByLocalDeliveryId:t,loading:a}=d1e();u.useEffect(()=>{r&&t(r)},[r,t]);const o=e,i=!r,l=a&&!i;return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3 border-b border-gray-200 pb-4",children:[n.jsx("button",{onClick:()=>s("/settings/shipping-and-delivery"),className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(gn,{className:"w-5 h-5"})}),n.jsx(ff,{className:"w-5 h-5 text-gray-700"}),n.jsx(As,{className:"w-4 h-4 text-gray-500"}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Local delivery"})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Deliver orders to customers directly from your locations"}),n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-3",children:"Your locations"}),i?n.jsx("p",{className:"text-sm text-gray-600 py-3",children:"Local delivery identifier missing. Please navigate via the Manage button."}):l?n.jsx("div",{className:"py-8 text-center",children:n.jsx("div",{className:"inline-block w-6 h-6 border-2 border-gray-300 border-t-gray-900 rounded-full animate-spin"})}):o.length===0?n.jsx("p",{className:"text-sm text-gray-600 py-3",children:"No locations found."}):n.jsx("div",{className:"space-y-2",children:o.map((c,d)=>{const p=typeof c.locationId=="string"||!c.locationId?null:c.locationId,h=typeof c.locationId=="string"?c.locationId:c.locationId?._id;return h?n.jsxs("div",{onClick:()=>{r&&s(`/settings/shipping-and-delivery/local_deliveries/${r}/locations/${h}`)},className:`flex items-center justify-between py-2 ${d!==o.length-1?"border-b border-gray-100":""} cursor-pointer hover:bg-gray-50 transition-colors`,children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[n.jsx(kp,{className:"w-5 h-5 text-gray-600 shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:p?.name||"Unknown location"}),n.jsx("p",{className:"text-xs text-gray-600",children:p?.countryRegion||"No country specified"})]})]}),n.jsx("span",{className:`px-2 py-0.5 text-xs font-medium ${c.canLocalDeliver?"bg-green-50 text-green-700":"bg-gray-100 text-gray-600"}`,children:c.canLocalDeliver?"Offers delivery":"Doesn't offer delivery"})]},h):null})})]})]})})},f1e=()=>{const s=dr(),{localDeliveryId:r,locationId:e}=ks(),{locations:t,fetchLocationsByStoreId:a,updateLocation:o,loading:i}=Lp(),{activeStoreId:l}=Ur(),[c,d]=u.useState(!1),[p,h]=u.useState("radius"),[g,y]=u.useState(!1),[b,v]=u.useState("km"),[w,C]=u.useState(null),[k,N]=u.useState(null),[O,R]=u.useState(!1),[L,B]=u.useState(null),[G,$]=u.useState("Local Delivery"),[z,Y]=u.useState(""),[M,q]=u.useState("0"),[P,H]=u.useState("0"),[D,X]=u.useState(""),[se,Q]=u.useState(!1),[xe,K]=u.useState("0"),[Z,ve]=u.useState(""),[ae,Se]=u.useState("0"),[Pe,$e]=u.useState(!1),[we,Ae]=u.useState(null),ze=t.find(J=>J._id===e),Ge=[{id:"1",name:"Local Delivery",radius:10,unit:"km",postalCodes:0,minOrder:null,price:0,hasDeliveryInfo:!1}],Ue=()=>{$("Local Delivery"),Y(""),q("0"),H("0"),X(""),Q(!1),K("0"),ve(""),Se("0")},ht=J=>{J?(B(J),$(J.name),Y(String(J.radius)),q(J.minOrder?String(J.minOrder):"0"),H(String(J.price)),Q(!1),K("0"),ve(""),Se("0")):(B(null),Ue()),R(!0)},ee=()=>{R(!1),B(null),Ue()},ue=()=>{ee()};u.useEffect(()=>{if(l&&e){const J=t.some(I=>I._id===e);(!t.length||!J)&&a(l)}},[l,e,t,a]),u.useEffect(()=>{ze&&d(ze.canLocalDeliver)},[ze]);const Oe=async J=>{const I=J.target.checked;if(d(I),e)try{await o(e,{canLocalDeliver:I})}catch{d(!I)}};return ze?n.jsxs(Yt,{children:[n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b border-gray-200 pb-4",children:[n.jsx("button",{onClick:()=>s(r?`/settings/shipping-and-delivery/local_deliveries/${r}`:"/settings/shipping-and-delivery"),className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(gn,{className:"w-5 h-5"})}),n.jsx(ff,{className:"w-5 h-5 text-gray-700"}),n.jsx(As,{className:"w-4 h-4 text-gray-500"}),n.jsxs("h1",{className:"text-xl font-medium text-gray-900",children:["Local delivery for ",ze.name]})]}),n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4 mb-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-1",children:"Location status"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Deliver orders to customers directly from this location."})]}),n.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:c,onChange:Oe,className:"sr-only peer"}),n.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-gray-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gray-900"})]})]}),n.jsx("div",{className:"border border-gray-200 p-3 bg-gray-50 mb-3",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(kp,{className:"w-5 h-5 text-gray-600 shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:ze.name}),n.jsx("p",{className:"text-xs text-gray-600",children:ze.countryRegion||"No country specified"})]})]})}),c&&n.jsx("div",{className:"mt-3",children:n.jsxs("p",{className:"text-sm text-gray-600",children:["Delivery prices for this location are in Indian rupees (INR)."," ",n.jsx("button",{onClick:J=>{J.preventDefault()},className:"text-xs text-gray-600 hover:text-gray-900 underline",children:"Change Currency"})]})})]}),c&&n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4 mb-4",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-4",children:"Delivery zones"}),n.jsxs("div",{className:"space-y-3 mb-4",children:[n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",value:"pin-codes",checked:p==="pin-codes",onChange:J=>h(J.target.value),className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Use PIN codes"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Choose specific areas that you deliver to"})]})]}),n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",value:"radius",checked:p==="radius",onChange:J=>h(J.target.value),className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Set a delivery radius"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Set a distance around your location that you deliver to"})]})]})]}),p==="radius"&&n.jsxs("div",{className:"mb-4 ml-7",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mb-3",children:[n.jsx("input",{type:"checkbox",checked:g,onChange:J=>y(J.target.checked),className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Include neighboring states or regions"})]}),n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Measure radius in"}),n.jsxs("div",{className:"flex gap-6",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",value:"km",checked:b==="km",onChange:J=>v(J.target.value),className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:"km"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",value:"mi",checked:b==="mi",onChange:J=>v(J.target.value),className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:"mi"})]})]})]}),n.jsx("div",{className:"space-y-3 mb-4",children:Ge.map(J=>n.jsx("div",{className:"border border-gray-200 p-3 bg-gray-50",children:n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:J.name}),n.jsx("p",{className:"text-xs text-gray-600 mb-2",children:p==="pin-codes"?`${J.postalCodes} postal codes  ${J.hasDeliveryInfo?"Has delivery information":"No delivery information"}`:`Up to ${J.radius}${J.unit}  ${J.hasDeliveryInfo?"Has delivery information":"No delivery information"}`}),p==="pin-codes"&&J.postalCodes===0&&n.jsxs("div",{className:"mt-2 bg-red-50 border border-red-200 text-red-700 px-3 py-2 text-xs flex items-start gap-2",children:[n.jsx(AF,{className:"w-4 h-4 mt-0.5 shrink-0"}),n.jsx("span",{children:"Postal codes required to activate this delivery zone"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-xs text-gray-600",children:J.minOrder?`Minimum order: ${J.minOrder}`:"No minimum order"}),J.price===0&&n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-600",children:"Free"}),n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:I=>{C(I.currentTarget),N(J)},className:"p-1 text-gray-500 hover:text-gray-700 transition-colors",children:n.jsx(Jd,{className:"w-5 h-5"})}),w&&k?.id===J.id&&n.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white border border-gray-200 z-10 min-w-[150px]",children:[n.jsx("button",{onClick:()=>{k&&ht(k),C(null),N(null)},className:"w-full px-3 py-2 text-left text-xs text-gray-700 hover:bg-gray-50 transition-colors",children:"Edit zone"}),n.jsx("button",{onClick:()=>{k&&(Ae(k),$e(!0)),C(null),N(null)},className:"w-full px-3 py-2 text-left text-xs text-red-600 hover:bg-gray-50 transition-colors",children:"Delete zone"})]})]})]})]})},J.id))}),n.jsxs("button",{onClick:()=>ht(),className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors flex items-center gap-2",children:[n.jsx(On,{className:"w-4 h-4"}),"Add zone"]})]}),n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-1",children:"Manage local deliveries"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Get an optimized route or plan the order of delivery stops yourself. With local delivery apps, you and your staff can view routes, contact customers, update delivery statuses, and more."}),n.jsxs("div",{className:"border border-gray-200 p-3 bg-gray-50 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Wy,{className:"w-5 h-5 text-gray-600 shrink-0"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Recommended local delivery apps"})]}),n.jsx("button",{className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-white transition-colors",children:"View apps"})]})]})]}),n.jsx(en,{open:O,onClose:ee,maxWidth:"sm",title:L?"Edit zone":"Add zone",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:ee,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:ue,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:L?"Save changes":"Save"})]}),children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Zone name"}),n.jsx("input",{type:"text",value:G,placeholder:"Local Delivery",maxLength:50,onChange:J=>$(J.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"}),n.jsxs("p",{className:"text-xs text-gray-600 text-right mt-1",children:[G.length,"/50"]})]}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-gray-900 mb-2",children:["Delivery radius from ",n.jsx("strong",{children:"10"})," ",b," up to"]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",value:z,onChange:J=>Y(J.target.value),className:"w-full px-3 py-1.5 pr-12 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"}),n.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-sm text-gray-600",children:b})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Minimum order price"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-sm text-gray-600",children:""}),n.jsx("input",{type:"number",value:M,onChange:J=>q(J.target.value),className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Delivery price"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-sm text-gray-600",children:""}),n.jsx("input",{type:se?"text":"number",disabled:se,value:se?"":P,onChange:J=>H(J.target.value),placeholder:se?"Conditional":void 0,className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 disabled:opacity-50 disabled:cursor-not-allowed"})]}),!se&&Number(P||0)===0&&n.jsx("span",{className:"inline-block mt-1 px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-600",children:"Free"})]})]}),se?n.jsxs("div",{className:"space-y-3",children:[n.jsx("button",{onClick:()=>{Q(!1),K("0"),ve(""),Se("0")},className:"text-xs text-gray-600 hover:text-gray-900 underline",children:"Remove conditional pricing"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Orders from 0.00 up to"}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-sm text-gray-600",children:""}),n.jsx("input",{type:"number",value:xe,onChange:J=>K(J.target.value),className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]}),n.jsxs("div",{className:"relative flex-1",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-sm text-gray-600",children:""}),n.jsx("input",{type:"number",value:Z,onChange:J=>ve(J.target.value),placeholder:"No limit",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]})]})]}),n.jsx("div",{className:"flex gap-3",children:n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Delivery price"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-sm text-gray-600",children:""}),n.jsx("input",{type:"number",value:ae,onChange:J=>Se(J.target.value),className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]}),Number(ae||0)===0&&n.jsx("span",{className:"inline-block mt-1 px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-600",children:"Free"})]})})]}):n.jsx("button",{onClick:()=>Q(!0),className:"text-xs text-gray-600 hover:text-gray-900 underline",children:"Add conditional pricing"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Delivery information"}),n.jsx("textarea",{value:D,onChange:J=>X(J.target.value),maxLength:255,placeholder:"This message will appear at checkout...",rows:4,className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 resize-none"}),n.jsxs("p",{className:"text-xs text-gray-600 text-right mt-1",children:[D.length,"/255"]}),n.jsxs("p",{className:"text-xs text-gray-600 mt-2",children:["This message will appear at checkout and in the"," ",n.jsx("button",{onClick:J=>J.preventDefault(),className:"text-xs text-gray-600 hover:text-gray-900 underline",children:"order confirmation notification"}),"."]})]})]})}),n.jsx(en,{open:Pe,onClose:()=>$e(!1),maxWidth:"sm",title:"Delete zone",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>$e(!1),className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"No"}),n.jsx("button",{onClick:()=>{$e(!1),Ae(null)},className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-red-600 hover:bg-red-50 transition-colors",children:"Yes"})]}),children:n.jsxs("p",{className:"text-sm text-gray-900",children:["Are you sure you want to delete"," ",n.jsx("strong",{children:we?.name??"this zone"}),"?"]})})]}):n.jsx(Yt,{children:n.jsx("div",{className:"max-w-7xl mx-auto py-8 px-4",children:n.jsx("p",{className:"text-sm text-gray-900",children:"Location not found"})})})},p1e=()=>{const{locations:s,updateLocation:r}=Lp(),{activeStoreId:e,stores:t}=Ur(),a=Ri(),o=dr(),[i,l]=pt.useState(!1),[c,d]=pt.useState(!1),[p,h]=pt.useState(!1),[g,y]=pt.useState(!1),b=a.pathname.split("/").pop(),v=s.find(B=>B._id===b),w=pt.useMemo(()=>t.find(G=>G._id===e)?.defaultLocation===v?._id,[t,e,v]);pt.useEffect(()=>{v&&(l(w?!0:v.isFulfillmentAllowed),d(v.canShip),h(v.canLocalDeliver),y(v.canPickup))},[v,w]);const C=u.useCallback(()=>{o("/settings/locations")},[o]),k=u.useCallback(async B=>{const G=B;l(G);try{if(!v)return;G?await r(v._id,{isFulfillmentAllowed:!0}):(d(!1),h(!1),y(!1),await r(v._id,{isFulfillmentAllowed:!1,canShip:!1,canLocalDeliver:!1,canPickup:!1}))}catch{l($=>!$)}},[v,r]),N=u.useCallback(async B=>{const G=B;d(G);try{await r(v._id,{canShip:G})}catch{d($=>!$)}},[v,r]),O=u.useCallback(async B=>{const G=B;h(G);try{await r(v._id,{canLocalDeliver:G})}catch{h($=>!$)}},[v,r]),R=u.useCallback(async B=>{const G=B;y(G);try{await r(v._id,{canPickup:G})}catch{y($=>!$)}},[v,r]);if(!v)return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Location not found"}),n.jsx("button",{onClick:C,className:"mt-3 px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Back"})]})});const L=[v.address,v.apartment,v.city,v.state,v.postalCode,v.countryRegion].filter(Boolean).join(", ");return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3 border-b border-gray-200 pb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:C,className:"p-1 hover:bg-gray-50 transition-colors",children:n.jsx(gn,{className:"w-5 h-5 text-gray-600"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Location"})]}),n.jsx("span",{className:`px-2 py-0.5 text-xs font-medium ${v.isActive?"bg-gray-100 text-gray-700":"bg-gray-100 text-gray-500"}`,children:v.isActive?"Active":"Inactive"})]}),n.jsxs("div",{className:"bg-white/95 p-3 border border-gray-200 mb-3",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-1",children:v.name}),n.jsx("p",{className:"text-xs text-gray-500",children:L})]}),n.jsxs("div",{className:"bg-white/95 p-3 border border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Fulfillment"}),n.jsx(mo,{checked:i,onChange:k,disabled:w,label:w?"Enable (Default location locked)":"Enable"})]}),w&&n.jsx("p",{className:"text-xs text-gray-500 mb-3 block",children:"This is your default location. To change whether you fulfill online orders from this location, select another default location first."}),(w||i)&&n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[n.jsx("div",{children:n.jsx(mo,{checked:c,onChange:N,label:"Allow Shipping"})}),n.jsx("div",{children:n.jsx(mo,{checked:p,onChange:O,label:"Allow Local Delivery"})}),n.jsx("div",{children:n.jsx(mo,{checked:g,onChange:R,label:"Allow Pickup In-Store"})})]})]})]})})},t_=({anchorEl:s,open:r,onClose:e,children:t})=>{const a=u.useRef(null);if(pt.useEffect(()=>{const l=c=>{a.current&&!a.current.contains(c.target)&&s&&!s.contains(c.target)&&e()};if(r)return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[r,e,s]),!r||!s)return null;const o=s.getBoundingClientRect(),i={position:"fixed",top:`${o.bottom+4}px`,right:`${window.innerWidth-o.right}px`,zIndex:1300};return n.jsx("div",{ref:a,className:"bg-white rounded-lg shadow-lg border border-gray-200 py-1 min-w-[200px]",style:i,children:t})},Np=({onClick:s,disabled:r=!1,children:e})=>{const t=u.useCallback(()=>{!r&&s&&s()},[r,s]);return n.jsx("div",{onClick:t,className:`px-4 py-2 text-sm text-gray-900 cursor-pointer hover:bg-gray-100 ${r?"opacity-50 cursor-not-allowed":""}`,children:e})},h1e=({location:s,onSelect:r})=>{const e=[s.address,s.apartment,s.city].filter(Boolean).join(", ");return n.jsx(Np,{onClick:()=>r(s._id),children:n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-gray-900",children:s.name}),n.jsx("p",{className:"text-xs text-gray-500",children:e})]})})},m1e=({otherLocations:s,onSelect:r})=>{const[e,t]=u.useState(null),a=!!e,o=u.useCallback(c=>{t(c.currentTarget)},[]),i=u.useCallback(()=>{t(null)},[]),l=u.useCallback(c=>{r(c),i()},[r,i]);return n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium text-gray-700 bg-gray-100",children:"Default"}),n.jsx("button",{onClick:o,className:"cursor-pointer px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Change"}),n.jsx(t_,{anchorEl:e,open:a,onClose:i,children:s.length===0?n.jsx(Np,{disabled:!0,children:"No other locations"}):s.map(c=>n.jsx(h1e,{location:c,onSelect:l},c._id))})]})},g1e=({name:s,addressLine:r,locations:e,currentStoreId:t,defaultLocationId:a})=>{const{updateStore:o}=Ur(),i=u.useCallback(async c=>{if(c!==a)try{await o(t,{defaultLocation:c})}catch(d){console.error("Failed to update default location:",d)}},[a,t,o]),l=e.filter(c=>c._id!==a);return n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:s}),n.jsx("p",{className:"text-xs text-gray-600",children:r})]}),n.jsx(m1e,{otherLocations:l,onSelect:i})]})},y1e=({location:s,isDefault:r,onLocationClick:e})=>{const t=u.useCallback(()=>{e(s._id)},[s._id,e]),a=[s.address,s.apartment,s.city,s.state,s.postalCode,s.countryRegion].filter(Boolean).join(", ");return n.jsxs("div",{onClick:t,className:"flex justify-between items-center py-2 border-b border-gray-200 cursor-pointer hover:bg-gray-50 transition-colors last:border-b-0",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.name}),r&&n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium text-gray-700 bg-gray-100",children:"Default"})]}),n.jsx("p",{className:"text-xs text-gray-600",children:a})]}),n.jsx("span",{className:`px-2 py-0.5 text-xs font-medium ${s.isActive?"bg-gray-100 text-gray-700":"bg-gray-100 text-gray-500"}`,children:s.isActive?"Active":"Inactive"})]})},x1e=({locations:s,defaultLocationId:r,onLocationClick:e})=>s.length===0?n.jsx("p",{className:"text-sm text-gray-500 py-3",children:"No locations found for this store."}):n.jsx("div",{children:s.map(t=>n.jsx(y1e,{location:t,isDefault:r===t._id,onLocationClick:e},t._id))}),v1e=({locations:s,defaultLocationId:r,onLocationClick:e})=>n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex justify-between py-2 px-0 border-b border-gray-200",children:[n.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Location"}),n.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Status"})]}),n.jsx(x1e,{locations:s,defaultLocationId:r,onLocationClick:e})]}),b1e=({locations:s,defaultLocationId:r,loading:e,error:t,onAddLocation:a,onLocationClick:o})=>n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Location Details"}),n.jsx("button",{onClick:a,className:"cursor-pointer px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Add Location"})]}),t&&n.jsx("div",{className:"mb-3 p-2 bg-gray-50 border border-gray-200 text-xs text-gray-700",children:t}),e?n.jsx("div",{className:"flex justify-center py-6",children:n.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-gray-400"})}):n.jsx(n.Fragment,{children:n.jsx(v1e,{locations:s,defaultLocationId:r,onLocationClick:o})})]}),w1e=()=>{const s=dr(),{fetchLocationsByStoreId:r,locations:e,loading:t,error:a}=Lp(),{activeStoreId:o,stores:i}=Ur();pt.useEffect(()=>{o&&r(o)},[o,r]);const l=i.find(y=>y._id===o),c=l?.defaultLocation||null,d=c?e.find(y=>y._id===c):void 0,p=d?[d.address,d.apartment,d.city,d.state,d.postalCode,d.countryRegion].filter(Boolean).join(", "):"",h=u.useCallback(()=>{s("/settings/locations/new")},[s]),g=u.useCallback(y=>{s(`/settings/locations/${y}`)},[s]);return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900 mb-3 border-b border-gray-200 pb-3",children:"Locations"}),n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-3 mb-3",children:[n.jsx("h2",{className:"text-sm font-medium mb-1.5 text-gray-900",children:"Default Location"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"This location is used by Ziplofy and apps when no other location is specified."}),c&&d?n.jsx(g1e,{name:d.name,addressLine:p,locations:e,currentStoreId:l._id,defaultLocationId:c}):n.jsx("p",{className:"text-xs text-gray-600",children:"No default location set."})]}),n.jsx(b1e,{locations:e,defaultLocationId:c,loading:t,error:a,onAddLocation:h,onLocationClick:g})]})})},$D=u.createContext(void 0),j1e=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async h=>{try{a(!0),i(null);const g=await nt.get(`/final-sale-items/return-rules/${h}`),{success:y,data:b,message:v}=g.data;if(!y)throw new Error(v||"Failed to fetch final sale items");return e(b||[]),b||[]}catch(g){const y=g?.response?.data?.message||g?.message||"Failed to fetch final sale items";throw i(y),new Error(y)}finally{a(!1)}},[]),c=u.useCallback(async h=>{try{a(!0),i(null);const g=await nt.post("/final-sale-items",h),{success:y,data:b,message:v}=g.data;if(!y)throw new Error(v||"Failed to create final sale item");return e(w=>[b,...w]),b}catch(g){const y=g?.response?.data?.message||g?.message||"Failed to create final sale item";throw i(y),new Error(y)}finally{a(!1)}},[]),d=u.useCallback(async h=>{try{a(!0),i(null);const g=await nt.delete(`/final-sale-items/${h}`),{success:y,data:b,message:v}=g.data;if(!y)throw new Error(v||"Failed to delete final sale item");return e(w=>w.filter(C=>C._id!==b.deletedId)),b.deletedId}catch(g){const y=g?.response?.data?.message||g?.message||"Failed to delete final sale item";throw i(y),new Error(y)}finally{a(!1)}},[]),p={items:r,loading:t,error:o,getByReturnRulesId:l,createItem:c,deleteItem:d};return n.jsx($D.Provider,{value:p,children:s})},C1e=()=>{const s=u.useContext($D);if(!s)throw new Error("useFinalSaleItems must be used within a FinalSaleItemProvider");return s},S1e=()=>{const s=dr(),[r,e]=pt.useState(!1),[t,a]=pt.useState("30"),[o,i]=pt.useState(""),[l,c]=pt.useState("free"),[d,p]=pt.useState(""),[h,g]=pt.useState(!1),[y,b]=pt.useState(""),[v,w]=pt.useState(!0),[C,k]=pt.useState(!1),[N,O]=pt.useState(""),[R,L]=pt.useState(""),[B,G]=pt.useState(""),[$,z]=pt.useState([]),[Y,M]=pt.useState({}),{searchCollections:q}=Fp(),{activeStoreId:P}=Ur(),[H,D]=pt.useState([]),[X,se]=pt.useState(!1),{searchProductsWithVariants:Q}=Ol(),[xe,K]=pt.useState([]),[Z,ve]=pt.useState(!1),{rules:ae,getByStoreId:Se,updateRules:Pe,loading:$e}=Jk(),{items:we,getByReturnRulesId:Ae,createItem:ze}=C1e(),Ge=pt.useMemo(()=>({enabled:r,returnWindow:t==="custom"?o||"":t,returnShippingCost:l==="customer"?"customer provides return shipping":l==="flat"?"flat rate return shipping":"free return shipping",flatRate:l==="flat"?d?Number(d):0:void 0,chargeRestockingFree:h,restockingFee:h?y?Number(y):0:void 0,finalSaleSelection:v?"collections":C?"products":"collections"}),[r,t,o,l,d,h,y,v,C]),Ue=pt.useMemo(()=>ae?{enabled:!!ae.enabled,returnWindow:String(ae.returnWindow||""),returnShippingCost:ae.returnShippingCost,flatRate:ae.flatRate!=null?Number(ae.flatRate):void 0,chargeRestockingFree:!!ae.chargeRestockingFree,restockingFee:ae.restockingFee!=null?Number(ae.restockingFee):void 0,finalSaleSelection:ae.finalSaleSelection||"collections"}:null,[ae]),ht=pt.useMemo(()=>{if(!Ue)return!1;const J=Ge,I=Ue;return J.enabled!==I.enabled||J.returnWindow!==I.returnWindow||J.returnShippingCost!==I.returnShippingCost||(J.flatRate??void 0)!==(I.flatRate??void 0)||J.chargeRestockingFree!==I.chargeRestockingFree||(J.restockingFee??void 0)!==(I.restockingFee??void 0)||J.finalSaleSelection!==I.finalSaleSelection},[Ge,Ue]);pt.useEffect(()=>{P&&Se(P).catch(()=>{})},[P,Se]),pt.useEffect(()=>{if(!ae)return;Ae(ae._id).catch(()=>{}),e(!!ae.enabled);const J=String(ae.returnWindow||"").trim();["14","30","90","unlimited"].includes(J)?(a(J),i("")):J&&(a("custom"),i(J)),ae.returnShippingCost==="customer provides return shipping"?c("customer"):ae.returnShippingCost==="flat rate return shipping"?c("flat"):c("free"),p(ae.flatRate!=null?String(ae.flatRate):""),g(!!ae.chargeRestockingFree),b(ae.restockingFee!=null?String(ae.restockingFee):""),ae.finalSaleSelection==="collections"?(w(!0),k(!1),M({})):ae.finalSaleSelection==="products"?(w(!1),k(!0),z([])):(w(!0),k(!1),M({}))},[ae,Ae]),pt.useEffect(()=>{if(!v)return;const J=N.trim();if(!J||J.length<2||!P){D([]);return}const I=setTimeout(async()=>{try{const V=await q(P,J,1,10);D(V.data.map(re=>({id:re._id,title:re.title}))),se(!0)}catch{D([]),se(!1)}},300);return()=>clearTimeout(I)},[N,P,q,v]),pt.useEffect(()=>{if(!C||!P)return;const J=B.trim();if(!J||J.length<2){K([]),ve(!1);return}const I=setTimeout(async()=>{try{const V=await Q({storeId:P,q:J,limit:5});K(V.data||[]),ve(!0)}catch{K([]),ve(!1)}},400);return()=>clearTimeout(I)},[B,P,Q,C]);const ee=pt.useMemo(()=>v&&!C?"collections":C&&!v?"products":ae?.finalSaleSelection||"collections",[v,C,ae?.finalSaleSelection]),ue=pt.useMemo(()=>we.filter(J=>typeof J.collectionId=="object"&&J.collectionId!==null),[we]),Oe=pt.useMemo(()=>we.filter(J=>typeof J.productVariantId=="object"&&J.productVariantId!==null),[we]);return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>s(-1),className:"p-1 text-gray-600 hover:text-gray-700 hover:bg-gray-100 transition-colors",children:n.jsx(gn,{className:"w-4 h-4"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Manage return rules"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[ht&&ae&&n.jsx("button",{disabled:$e,onClick:async()=>{await Pe(ae._id,{enabled:Ge.enabled,returnWindow:Ge.returnWindow,returnShippingCost:Ge.returnShippingCost,flatRate:Ge.flatRate,chargeRestockingFree:Ge.chargeRestockingFree,restockingFee:Ge.restockingFee}),s("/settings/policies")},className:"px-3 py-1.5 text-sm text-white bg-gray-900 hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Save"}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("span",{className:"text-sm text-gray-900",children:r?"Return rules on":"Return rules off"}),n.jsx("button",{type:"button",className:`relative w-11 h-6 transition-colors ${r?"bg-gray-900":"bg-gray-300"}`,onClick:()=>e(J=>!J),children:n.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white transition-transform ${r?"translate-x-5":"translate-x-0"}`})})]})]})]}),n.jsxs("div",{className:"border border-gray-200 bg-white p-4 mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Return window"}),n.jsx("div",{className:"space-y-2 mb-4",children:["14","30","90","unlimited","custom"].map(J=>n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"windowType",value:J,checked:t===J,onChange:I=>a(I.target.value),className:"w-4 h-4 text-gray-900 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900",children:J==="custom"?"Custom days":J==="unlimited"?"Unlimited":`${J} days`})]},J))}),t==="custom"&&n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Number of days"}),n.jsx("input",{type:"text",value:o,onChange:J=>i(J.target.value),className:"w-full max-w-[220px] border border-gray-200 px-3 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400",placeholder:"Number of days"})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-1",children:"Return shipping cost"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Does not apply to returns using Point of Sale"}),n.jsx("div",{className:"space-y-2 mb-4",children:["customer","free","flat"].map(J=>n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"shippingCost",value:J,checked:l===J,onChange:I=>c(I.target.value),className:"w-4 h-4 text-gray-900 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900",children:J==="customer"?"Customer provides return shipping":J==="free"?"Free return shipping":"Flat rate return shipping"})]},J))}),l==="flat"&&n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Flat rate"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm text-gray-700",children:""}),n.jsx("input",{type:"number",value:d,onChange:J=>p(J.target.value),placeholder:"0.00",className:"w-full max-w-[220px] border border-gray-200 px-3 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Restocking fee"}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mb-3",children:[n.jsx("input",{type:"checkbox",checked:h,onChange:J=>g(J.target.checked),className:"w-4 h-4 text-gray-900 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900",children:"Charge restocking fee"})]}),h&&n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Restocking fee (%)"}),n.jsx("input",{type:"number",value:y,onChange:J=>b(J.target.value),placeholder:"0",className:"w-full max-w-[220px] border border-gray-200 px-3 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:n.jsx("p",{className:"text-xs text-gray-600",children:"Return rules will only apply to items purchased after the return rules were turned on or updated."})})]}),n.jsxs("div",{className:"border border-gray-200 bg-white p-4 mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-1",children:"Final sale items"}),n.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Customers can't request returns for products set as final sale"}),n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:v,onChange:J=>{const I=J.target.checked;w(I),I?(k(!1),M({})):z([])},className:"w-4 h-4 text-gray-900 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900",children:"Specific collections"})]}),v&&n.jsxs("div",{className:"flex gap-2 items-start flex-wrap relative",children:[n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",placeholder:"Search collections",value:N,onChange:J=>{O(J.target.value),R&&L("")},onFocus:()=>H.length&&se(!0),className:"min-w-[280px] border border-gray-200 px-3 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"}),X&&H.length>0&&n.jsx("div",{className:"absolute top-full left-0 mt-1 z-10 min-w-[280px] max-h-60 overflow-y-auto border border-gray-200 bg-white",children:H.map(J=>n.jsx("div",{className:"px-3 py-2 cursor-pointer hover:bg-gray-50 transition-colors",onMouseDown:()=>{const I=$.some(re=>re.id===J.id),V=ue.some(re=>{const pe=re.collectionId,ge=typeof pe=="object"?pe?._id:pe;return ge&&ge.toString()===J.id});I||V?L("This collection is already added to final sale."):(z(re=>[...re,J]),L("")),O(""),se(!1)},children:n.jsx("p",{className:"text-sm text-gray-900",children:J.title})},J.id))})]}),n.jsx("div",{className:"flex gap-2 flex-wrap",children:$.map(J=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-xs bg-gray-100 text-gray-700 border border-gray-200",children:[J.title,n.jsx("button",{onClick:()=>z(I=>I.filter(V=>V.id!==J.id)),className:"hover:text-gray-900",children:n.jsx(Zs,{className:"w-3 h-3"})})]},J.id))}),R&&n.jsx("p",{className:"text-xs text-red-600",children:R})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:C,onChange:J=>{const I=J.target.checked;k(I),I?(w(!1),z([])):M({})},className:"w-4 h-4 text-gray-900 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900",children:"Specific products"})]}),C&&n.jsxs("div",{className:"flex flex-col gap-2 relative",children:[n.jsx("input",{type:"text",placeholder:"Search products",value:B,onChange:J=>G(J.target.value),onFocus:()=>xe.length&&ve(!0),className:"min-w-[280px] border border-gray-200 px-3 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"}),Z&&xe.length>0&&n.jsx("div",{className:"absolute top-full left-0 mt-1 z-10 min-w-[360px] max-h-[360px] overflow-y-auto border border-gray-200 bg-white p-2",children:xe.map(J=>n.jsxs("div",{className:"mb-2 border border-gray-200 overflow-hidden",children:[n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-gray-50",children:[n.jsx("div",{className:"w-8 h-8 border border-gray-200 overflow-hidden bg-white",children:J.product.imageUrl?n.jsx("img",{src:J.product.imageUrl,alt:J.product.title,className:"w-full h-full object-cover"}):n.jsx("div",{className:"w-full h-full bg-gray-200"})}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:J.product.title})]}),n.jsx("div",{children:J.variants.map(I=>{const V=Object.values(I.optionValues||{}).join(" / ")||I.sku||"Variant",re=!!Y[I._id];return n.jsxs("div",{className:`flex items-center justify-between px-3 py-2 border-t border-gray-100 cursor-pointer transition-colors ${re?"bg-gray-50":"bg-white"}`,onMouseDown:()=>{M(pe=>{const ge={...pe};return ge[I._id]?delete ge[I._id]:ge[I._id]={id:I._id,productTitle:J.product.title,optionSummary:V,imageUrl:I.images&&I.images.length>0?I.images[0]:J.product.imageUrl||null},ge})},children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer flex-1",children:[n.jsx("input",{type:"checkbox",checked:re,onChange:()=>{},className:"w-4 h-4 text-gray-900 focus:ring-gray-400"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:V}),n.jsx("p",{className:"text-xs text-gray-600",children:I.sku||"SKU N/A"})]})]}),n.jsxs("p",{className:"text-sm text-gray-600",children:["",I.price?.toFixed(2)??"0.00"]})]},I._id)})})]},J.product._id))}),n.jsx("div",{className:"flex gap-2 flex-wrap mt-2",children:Object.values(Y).map(J=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-xs bg-gray-100 text-gray-700 border border-gray-200",children:[J.productTitle,"  ",J.optionSummary,n.jsx("button",{onClick:()=>M(I=>{const V={...I};return delete V[J.id],V}),className:"hover:text-gray-900",children:n.jsx(Zs,{className:"w-3 h-3"})})]},J.id))})]})]}),n.jsx("div",{className:"flex justify-end mt-4",children:(()=>{const J=v&&$.length>0,I=C&&Object.keys(Y).length>0,V=v&&!C?"collections":C&&!v?"products":Ge.finalSaleSelection,re=Ue&&V!==Ue.finalSaleSelection,pe=!ae||!P||!J&&!I&&!re;return n.jsx("button",{disabled:pe,onClick:async()=>{if(!ae||!P)return;const ge=[];if(J)for(const Ce of $)ge.push(ze({returnRulesId:ae._id,storeId:P,collectionId:Ce.id}));I&&Object.values(Y).forEach(Ce=>{ge.push(ze({returnRulesId:ae._id,storeId:P,productVariantId:Ce.id}))}),ge.length>0&&await Promise.all(ge),re&&await Pe(ae._id,{finalSaleSelection:V}),s("/settings/policies")},className:"px-3 py-1.5 text-sm text-white bg-gray-900 hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Save"})})()})]}),n.jsxs("div",{className:"border border-gray-200 bg-white p-4 mb-4",children:[n.jsxs("h2",{className:"text-base font-medium text-gray-900 mb-3",children:["Current ",ee==="collections"?"final sale collections":"final sale products"]}),ee==="collections"?ue.length>0?n.jsx("div",{className:"flex flex-col gap-2",children:ue.map(J=>{const I=J.collectionId;return n.jsx("div",{className:"border border-gray-200 p-3 flex justify-between items-center",children:n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:I?.title||"Collection"}),n.jsxs("p",{className:"text-xs text-gray-600",children:["ID: ",I?._id||J.collectionId]})]})},J._id)})}):n.jsx("p",{className:"text-sm text-gray-600",children:"No collections added to final sale yet."}):Oe.length>0?n.jsx("div",{className:"flex flex-col gap-2",children:Oe.map(J=>{const I=J.productVariantId,V=Object.values(I?.optionValues||{}).join(" / ")||I?.sku||"Variant",re=I?.images&&I.images.length>0&&I.images[0]||I?.productId?.imageUrls&&I.productId.imageUrls.length>0&&I.productId.imageUrls[0]||null;return n.jsxs("div",{className:"border border-gray-200 p-3 flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 border border-gray-200 bg-gray-50 overflow-hidden",children:re?n.jsx("img",{src:re,alt:I?.sku||"",className:"w-full h-full object-cover"}):n.jsx("div",{className:"w-full h-full bg-gray-200"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:I?.productId?.title||"Product"}),n.jsx("p",{className:"text-xs text-gray-600",children:V}),n.jsxs("p",{className:"text-xs text-gray-500",children:["SKU: ",I?.sku||"N/A"]})]})]},J._id)})}):n.jsx("p",{className:"text-sm text-gray-600",children:"No products added to final sale yet."})]}),n.jsx("div",{className:"flex justify-between items-center",children:n.jsxs("p",{className:"text-xs text-gray-600",children:["Learn more about ",n.jsx("a",{href:"#",className:"text-gray-700 hover:underline",children:"return rules"})]})})]})})},N1e=({canShip:s,canLocalDeliver:r,canPickup:e,onCanShipChange:t,onCanLocalDeliverChange:a,onCanPickupChange:o})=>n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[n.jsx("div",{children:n.jsx(mo,{checked:s,onChange:t,label:"Allow Shipping"})}),n.jsx("div",{children:n.jsx(mo,{checked:r,onChange:a,label:"Allow Local Delivery"})}),n.jsx("div",{children:n.jsx(mo,{checked:e,onChange:o,label:"Allow Pickup In-Store"})})]}),k1e=({fulfillmentEnabled:s,canShip:r,canLocalDeliver:e,canPickup:t,onFulfillmentToggle:a,onCanShipChange:o,onCanLocalDeliverChange:i,onCanPickupChange:l})=>n.jsxs("div",{className:"bg-white/95 p-3 border border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Fulfillment"}),n.jsx(mo,{checked:s,onChange:a,label:"Enable"})]}),s&&n.jsx(N1e,{canShip:r,canLocalDeliver:e,canPickup:t,onCanShipChange:o,onCanLocalDeliverChange:i,onCanPickupChange:l})]}),_1e=({form:s,onChange:r})=>n.jsxs("div",{className:"bg-white/95 p-3 border border-gray-200 mb-3",children:[n.jsx("h2",{className:"text-sm font-medium mb-3 text-gray-900",children:"Location Details"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Location Name"}),n.jsx("input",{type:"text",value:s.name,onChange:e=>r("name",e.target.value),className:"w-full px-2.5 py-1.5 text-sm text-gray-900 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Country / Region"}),n.jsx("input",{type:"text",value:s.countryRegion,onChange:e=>r("countryRegion",e.target.value),className:"w-full px-2.5 py-1.5 text-sm text-gray-900 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Address"}),n.jsx("input",{type:"text",value:s.address,onChange:e=>r("address",e.target.value),className:"w-full px-2.5 py-1.5 text-sm text-gray-900 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Apartment, suite, etc. (optional)"}),n.jsx("input",{type:"text",value:s.apartment,onChange:e=>r("apartment",e.target.value),className:"w-full px-2.5 py-1.5 text-sm text-gray-900 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"City"}),n.jsx("input",{type:"text",value:s.city,onChange:e=>r("city",e.target.value),className:"w-full px-2.5 py-1.5 text-sm text-gray-900 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"State / Province"}),n.jsx("input",{type:"text",value:s.state,onChange:e=>r("state",e.target.value),className:"w-full px-2.5 py-1.5 text-sm text-gray-900 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"PIN / Postal Code"}),n.jsx("input",{type:"text",value:s.postalCode,onChange:e=>r("postalCode",e.target.value),className:"w-full px-2.5 py-1.5 text-sm text-gray-900 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Phone Number"}),n.jsx("input",{type:"text",value:s.phone,onChange:e=>r("phone",e.target.value),className:"w-full px-2.5 py-1.5 text-sm text-gray-900 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]})]})]}),E1e=()=>{const s=dr(),{createLocation:r}=Lp(),{activeStoreId:e}=Ur(),[t,a]=u.useState(!1),[o,i]=u.useState({name:"",countryRegion:"",address:"",apartment:"",city:"",state:"",postalCode:"",phone:"",canShip:!1,canLocalDeliver:!1,canPickup:!1}),l=u.useCallback((g,y)=>{i(b=>({...b,[g]:y}))},[]),c=u.useCallback(async()=>{if(!e){s("/settings/locations");return}await r({storeId:e,name:o.name,countryRegion:o.countryRegion,address:o.address,apartment:o.apartment||void 0,city:o.city,state:o.state,postalCode:o.postalCode,phone:o.phone,canShip:t?o.canShip:!1,canLocalDeliver:t?o.canLocalDeliver:!1,canPickup:t?o.canPickup:!1,isDefault:!1,isFulfillmentAllowed:t,isActive:!0}),s("/settings/locations")},[e,o,t,r,s]),d=u.useCallback(()=>{s("/settings/locations")},[s]),p=u.useCallback(g=>{a(g)},[]),h=u.useCallback((g,y)=>{l(g,y)},[l]);return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3 border-b border-gray-200 pb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:d,className:"p-1 hover:bg-gray-50 transition-colors",children:n.jsx(gn,{className:"w-5 h-5 text-gray-600"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Add Location"})]}),n.jsx("button",{onClick:c,className:"cursor-pointer px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Add"})]}),n.jsx(_1e,{form:o,onChange:l}),n.jsx(k1e,{fulfillmentEnabled:t,canShip:o.canShip,canLocalDeliver:o.canLocalDeliver,canPickup:o.canPickup,onFulfillmentToggle:p,onCanShipChange:g=>h("canShip",g),onCanLocalDeliverChange:g=>h("canLocalDeliver",g),onCanPickupChange:g=>h("canPickup",g)})]})})},T1e=()=>{const{permissions:s,loading:r,error:e,fetchAll:t}=K6(),{create:a}=J2(),{activeStoreId:o}=Ur(),i=dr(),[l,c]=u.useState(""),[d,p]=u.useState(new Set),[h,g]=u.useState(new Set),[y,b]=u.useState(""),[v,w]=u.useState(""),[C,k]=u.useState(!1);u.useEffect(()=>{s.length===0&&!r&&t().catch(()=>{})},[]);const N=u.useMemo(()=>{const D=new Map;s.forEach(Q=>{D.set(Q.key,{key:Q.key,name:Q.name,isLeaf:Q.isLeaf??!0,parentKey:Q.parentKey??null,order:Q.order,resource:Q.resource,children:[]})});const X=[];D.forEach(Q=>{Q.parentKey&&D.has(Q.parentKey)?D.get(Q.parentKey).children.push(Q):X.push(Q)});const se=Q=>{Q.sort((xe,K)=>(xe.order??0)-(K.order??0)||xe.name.localeCompare(K.name)),Q.forEach(xe=>se(xe.children))};return se(X),X},[s]),O=u.useMemo(()=>{const D=[],X=se=>{se.isLeaf||se.children.length===0?D.push(se.key):se.children.forEach(X)};return N.forEach(X),D},[N]);u.useEffect(()=>{g(D=>{const X=new Set(D);return X.forEach(se=>{O.includes(se)||X.delete(se)}),X})},[O]);const R=D=>{p(X=>{const se=new Set(X);return se.has(D)?se.delete(D):se.add(D),se})},L=D=>D.isLeaf||D.children.length===0?[D.key]:D.children.flatMap(L),B=D=>{const X=L(D),se=X.filter(Q=>h.has(Q));return{total:X.length,selected:se.length,checked:se.length===X.length&&X.length>0,indeterminate:se.length>0&&se.length<X.length}},G=D=>{const X=L(D),se=X.every(Q=>h.has(Q));g(Q=>{const xe=new Set(Q);return se?X.forEach(K=>xe.delete(K)):X.forEach(K=>xe.add(K)),xe})},$=()=>{h.size===O.length?g(new Set):g(new Set(O))},z=u.useMemo(()=>{const D=[],X=se=>{se.children.length>0&&(D.push(se.key),se.children.forEach(X))};return N.forEach(X),D},[N]),Y=()=>{const D=z.every(X=>d.has(X));p(D?new Set:new Set(z))},M=u.useMemo(()=>{if(!l.trim())return N;const D=l.toLowerCase(),X=se=>{const Q=se.name.toLowerCase().includes(D)||se.key.toLowerCase().includes(D),xe=se.children.map(X).filter(K=>!!K);return Q||xe.length>0?{...se,children:xe}:null};return N.map(X).filter(se=>!!se)},[N,l]),q=y.trim().length>0&&v.trim().length>0&&h.size>0&&!!o,P=async()=>{if(!(!q||!o))try{k(!0),await a({storeId:o,name:y.trim(),description:v.trim(),permissions:Array.from(h)}),i("/settings/users/roles")}finally{k(!1)}},H=(D,X=0)=>{const se=D.children.length>0,Q=B(D),xe=d.has(D.key)||!se,K=X*1.5;return n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center py-1.5",style:{paddingLeft:`${K}rem`},children:[se?n.jsx("button",{onClick:()=>R(D.key),className:"p-0.5 text-gray-600 hover:text-gray-700 mr-1",children:xe?n.jsx(uf,{className:"w-4 h-4"}):n.jsx(Ys,{className:"w-4 h-4"})}):n.jsx("div",{className:"w-6 mr-1"}),n.jsx("input",{type:"checkbox",ref:Z=>{Z&&(Z.indeterminate=!Q.checked&&Q.indeterminate)},checked:Q.checked,onChange:()=>G(D),className:"w-4 h-4 text-gray-900 focus:ring-gray-400 mr-2"}),n.jsx("span",{className:"text-sm text-gray-900",children:D.name}),se&&n.jsxs("span",{className:"text-xs text-gray-600 ml-auto mr-2",children:[Q.selected,"/",Q.total]})]}),se&&n.jsx("div",{className:xe?"block":"hidden",children:D.children.map(Z=>H(Z,X+1))})]},D.key)};return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Create role"}),q&&n.jsx("button",{onClick:P,disabled:C,className:"px-3 py-1.5 text-sm text-white bg-gray-900 hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:C?"Saving...":"Save"})]}),n.jsx("div",{className:"border border-gray-200 bg-white p-4 mb-4",children:n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Name"}),n.jsx("input",{type:"text",placeholder:"Name",value:y,onChange:D=>b(D.target.value),className:"w-full border border-gray-200 px-3 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Description"}),n.jsx("textarea",{placeholder:"Description",rows:2,value:v,onChange:D=>w(D.target.value),className:"w-full border border-gray-200 px-3 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 resize-y"})]})]})}),n.jsxs("div",{className:"border border-gray-200 bg-white p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-1",children:"Permissions"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Role category determines available permissions."}),r&&n.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[n.jsx("div",{className:"w-4 h-4 border-2 border-gray-300 border-t-gray-900 rounded-full animate-spin"}),n.jsx("span",{className:"text-sm",children:"Loading permissions"})]}),e&&n.jsx("p",{className:"text-sm text-red-600",children:e}),!r&&!e&&n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx(no,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-600"}),n.jsx("input",{type:"text",placeholder:"Search",value:l,onChange:D=>c(D.target.value),className:"w-full border border-gray-200 bg-gray-50 pl-10 pr-3 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{className:"flex items-center justify-between px-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",ref:D=>{D&&(D.indeterminate=h.size>0&&h.size<O.length)},checked:h.size===O.length&&O.length>0,onChange:$,className:"w-4 h-4 text-gray-900 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900 font-medium",children:"Select all permissions"})]}),n.jsx("button",{onClick:Y,className:"text-xs text-gray-700 hover:underline",children:"Expand all"})]}),n.jsxs("div",{children:[M.map(D=>H(D)),M.length===0&&n.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"No permissions match your search."})]})]}),!r&&!e&&N.length===0&&n.jsx("p",{className:"text-sm text-gray-600",children:"No permissions found."})]})]})})},O1e=()=>{const{categoryId:s,categorySlug:r,optionId:e}=ks(),t=dr(),{options:a,fetchByCategoryId:o}=e_(),{categories:i,fetchAll:l}=Hj(),{settings:c,getByStoreId:d}=_D(),{activeStoreId:p}=Ur(),{checkExists:h,create:g,remove:y,clearCacheEntry:b}=Are(),[v,w]=u.useState("English"),[C,k]=u.useState(null),[N,O]=u.useState(!1),[R,L]=u.useState(!1),[B,G]=u.useState(!1),[$,z]=u.useState("email"),[Y,M]=u.useState(null),[q,P]=u.useState(null),[H,D]=u.useState(null),[X,se]=u.useState(!1),[Q,xe]=u.useState(""),[K,Z]=u.useState(""),ve=s&&r?`/settings/notifications/${s}/${r}`:"/settings/notifications",ae=u.useMemo(()=>{if(!s)return"Notifications";const re=i.find(pe=>pe._id===s);return re?.name?re.name:r?r.split("-").map(pe=>pe.charAt(0).toUpperCase()+pe.slice(1)).join(" "):"Notifications"},[i,s,r]);u.useEffect(()=>{i.length===0&&l().catch(()=>{})},[i.length,l]),u.useEffect(()=>{s&&o(s).catch(()=>{})},[s,o]),u.useEffect(()=>{if(e&&a.length>0){const re=a.find(pe=>pe._id===e);re?(k(re),G(re.toggle||!1),re.smsSupported&&!re.emailSupported?z("sms"):z("email")):k(null)}M(null),P(null),D(null),Pe(null),p&&e&&b(p,e)},[e,a,p,b]),u.useEffect(()=>{p&&d(p).catch(()=>{})},[p]);const[Se,Pe]=u.useState(null);u.useEffect(()=>{if(!p||!e)return;const re=`${p}:${e}`;Se!==re&&h(p,e,!0).then(pe=>{Pe(re),M(pe.exists),console.log("Override check result:",pe.exists),pe.exists&&pe.override?(P(pe.override._id),D({emailSubject:pe.override.emailSubject,emailBody:pe.override.emailBody,smsData:pe.override.smsData})):(P(null),D(null))}).catch(pe=>{console.error("Error checking override:",pe),M(!1),P(null),D(null)})},[p,e,h,Se]);const $e=()=>{s&&r?t(ve,{state:{categoryId:s}}):t("/settings/notifications")},we=()=>{O(!0)},Ae=()=>{O(!1)},ze=async()=>{L(!0);try{await new Promise(re=>setTimeout(re,1e3)),gr.success("Test email sent successfully"),O(!1)}catch(re){gr.error(re?.message||"Failed to send test email")}finally{L(!1)}},Ge=c?.storeEmail||"developer200419@gmail.com",Ue=async re=>{G(re);try{await new Promise(pe=>setTimeout(pe,500)),gr.success("Notification setting updated")}catch(pe){G(!re),gr.error(pe?.message||"Failed to update notification setting")}},ht=()=>{if(C){const re=H?.emailSubject??C.emailSubject??"",pe=H?.emailBody??C.emailBody??"";xe(re),Z(pe),se(!0)}},ee=()=>{se(!1)},ue=async()=>{if(!(!p||!e||!C))try{gr.dismiss(),se(!1);const re=await g({storeId:p,notificationOptionId:e,emailSubject:Q.trim()||void 0,emailBody:K.trim()||void 0,enabled:!0});P(re._id),D({emailSubject:re.emailSubject,emailBody:re.emailBody,smsData:re.smsData}),M(!0),gr.dismiss(),gr.success("Email template updated successfully")}catch(re){gr.dismiss(),gr.error(re?.message||"Failed to update email template"),se(!0)}},Oe=async()=>{if(q)try{gr.dismiss(),await y(q),M(!1),P(null),D(null),p&&e&&b(p,e),gr.dismiss(),gr.success("Reverted to default notification template")}catch(re){gr.dismiss(),gr.error(re?.message||"Failed to revert to default template")}};if(!s||!r)return n.jsx(Yt,{children:n.jsx("div",{className:"max-w-7xl mx-auto py-8 px-4",children:n.jsx("p",{className:"text-sm text-gray-900",children:"Notification category not found."})})});if(!C)return n.jsx(Yt,{children:n.jsx("div",{className:"max-w-7xl mx-auto py-8 px-4",children:n.jsx("div",{className:"flex justify-center mt-8",children:n.jsx("div",{className:"w-6 h-6 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})})})});const J=re=>re.replace(/\{\{customer_name\}\}/g,"John Doe").replace(/\{\{order_number\}\}/g,"#9999").replace(/\{\{store_name\}\}/g,"My Store").replace(/\{\{view_order_url\}\}/g,"#").replace(/\{\{store_url\}\}/g,"#").replace(/\{\{return_tracking_url\}\}/g,"#").replace(/\{\{return_label_url\}\}/g,"#").replace(/\{\{account_invite_url\}\}/g,"#").replace(/\{\{account_url\}\}/g,"#").replace(/\{\{password_reset_url\}\}/g,"#").replace(/\{\{new_email\}\}/g,"newemail@example.com").replace(/\{\{message_body\}\}/g,"Your message here").replace(/\{\{gift_card_code\}\}/g,"A1B2 3C4D 5E6F 7G8H").replace(/\{\{gift_card_amount\}\}/g,"Rs. 100.00").replace(/\{\{shipping_name\}\}/g,"Steve Shipper").replace(/\{\{shipping_address_line1\}\}/g,"123 Shipping Street").replace(/\{\{shipping_city\}\}/g,"Shippington").replace(/\{\{shipping_state\}\}/g,"Kentucky").replace(/\{\{shipping_zip\}\}/g,"40003").replace(/\{\{shipping_country\}\}/g,"United States").replace(/\{\{shipping_phone\}\}/g,"555-555-SHIP").replace(/\{\{shipping_method\}\}/g,"Generic Shipping").replace(/\{\{tracking_number\}\}/g,"None").replace(/\{\{customer_email\}\}/g,"jon@example.com"),I=()=>{const re=H?.emailBody??(C.emailBody||"<p>No email template available.</p>"),pe=J(re);return n.jsx("div",{className:"border border-gray-200 p-3 bg-white max-w-[600px] overflow-auto",children:n.jsx("div",{dangerouslySetInnerHTML:{__html:pe},className:"[&_img]:max-w-full [&_img]:h-auto [&_img]:block [&_*]:box-border"})})},V=()=>{const re=H?.smsData??(C.smsData||"No SMS template available."),pe=J(re);return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"border border-gray-200 p-3 bg-white max-w-[600px] mb-3",children:n.jsx("p",{className:"text-gray-900 whitespace-pre-wrap break-words text-sm leading-relaxed",children:pe})}),n.jsxs("div",{className:"p-3 border border-gray-200 bg-white/95 max-w-[600px]",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"SMS notifications"}),n.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Transactional SMS notifications can't be edited. Customer name, order number, and other specific details will automatically update with the correct information."}),n.jsx("button",{onClick:ge=>{ge.preventDefault()},className:"text-xs text-gray-700 hover:underline",children:"Learn more about SMS notifications."})]})]})};return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-3 text-xs text-gray-600",children:[n.jsx("button",{onClick:()=>t("/settings/notifications"),className:"hover:underline",children:"Notifications"}),n.jsx(As,{className:"w-3 h-3"}),n.jsx("button",{onClick:$e,className:"hover:underline",children:ae}),n.jsx(As,{className:"w-3 h-3"}),n.jsx("span",{className:"text-gray-900",children:C.optionName})]}),n.jsxs("div",{className:"flex items-center justify-between mb-3 border-b border-gray-200 pb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("button",{onClick:$e,className:"p-1 hover:bg-gray-50 transition-colors",children:n.jsx(gn,{className:"w-5 h-5 text-gray-600"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:C.optionName}),Y===!1&&n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium text-gray-700 bg-gray-100 border border-gray-200",children:"Default"}),Y===!0&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium text-gray-700 bg-gray-100 border border-gray-200",children:"Custom"}),n.jsx("button",{onClick:Oe,className:"px-2 py-0.5 text-xs font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Use default"})]})]}),C.toggle===!0&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs text-gray-600",children:"Enable this notification"}),n.jsx(mo,{checked:B,onChange:Ue})]})]}),$==="email"&&n.jsx("button",{onClick:we,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Send test"})]}),n.jsxs("div",{className:"border border-gray-200 p-3 bg-white/95",children:[n.jsxs("div",{className:"flex justify-between items-center mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Preview"}),$==="email"&&C?.emailSupported&&n.jsx("button",{onClick:ht,className:"p-1 text-gray-600 hover:text-gray-900 hover:bg-gray-50 transition-colors",children:n.jsx(Bo,{className:"w-4 h-4"})})]}),n.jsxs("select",{value:v,onChange:re=>w(re.target.value),className:"px-2 py-1 text-xs border border-gray-200 bg-white focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400",children:[n.jsx("option",{value:"English",children:"English"}),n.jsx("option",{value:"Spanish",children:"Spanish"}),n.jsx("option",{value:"French",children:"French"})]})]}),(C.emailSupported||C.smsSupported)&&n.jsx("div",{className:"border-b border-gray-200 mb-3",children:n.jsxs("div",{className:"flex gap-4",children:[C.emailSupported&&n.jsx("button",{onClick:()=>z("email"),className:`pb-2 px-1 text-xs font-medium transition-colors ${$==="email"?"text-gray-900 border-b-2 border-gray-900":"text-gray-600 hover:text-gray-900"}`,children:"Email"}),C.smsSupported&&n.jsx("button",{onClick:()=>z("sms"),className:`pb-2 px-1 text-xs font-medium transition-colors ${$==="sms"?"text-gray-900 border-b-2 border-gray-900":"text-gray-600 hover:text-gray-900"}`,children:"SMS"})]})}),$==="email"&&C.emailSupported&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"mb-3",children:n.jsxs("p",{className:"text-xs text-gray-600 mb-1",children:["Subject: ",H?.emailSubject??(C.emailSubject||"No subject")]})}),I()]}),$==="sms"&&C.smsSupported&&n.jsx(n.Fragment,{children:V()})]}),n.jsx(en,{open:N,onClose:Ae,title:"Send test email",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:Ae,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:ze,disabled:R,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:R?"Sending...":"Send"})]}),children:n.jsxs("p",{className:"text-sm text-gray-600",children:["Email will be sent to ",Ge]})}),n.jsx(en,{open:X,onClose:ee,title:"Edit email template",maxWidth:"md",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:ee,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:ue,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Save"})]}),children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Subject"}),n.jsx("input",{type:"text",value:Q,onChange:re=>xe(re.target.value),className:"w-full px-2.5 py-1.5 text-sm text-gray-900 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Body"}),n.jsx("textarea",{value:K,onChange:re=>Z(re.target.value),rows:10,className:"w-full px-2.5 py-1.5 text-sm text-gray-900 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 resize-y"})]})]})})]})})},P1e=({open:s,onClose:r,emailInput:e,onEmailInputChange:t,onSubmit:a,saving:o})=>{const i=l=>{l.key==="Enter"&&e.trim()&&!o&&a()};return n.jsxs(en,{open:s,onClose:r,title:"Add sender email",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,disabled:o,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Cancel"}),n.jsx("button",{onClick:a,disabled:!e.trim()||o,className:"px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 disabled:bg-gray-300 disabled:text-gray-500 disabled:cursor-not-allowed min-w-[100px] transition-colors",children:o?"Adding...":"Add email"})]}),children:[n.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"The email your store uses to send emails to your customers"}),n.jsx("input",{type:"email",value:e,onChange:t,placeholder:"example@email.com",autoFocus:!0,onKeyPress:i,className:"w-full px-4 py-2 border border-gray-300 rounded-md bg-white text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent"})]})},A1e=({icon:s,title:r,description:e,path:t,onNavigate:a,showDivider:o=!1})=>n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>{a(t)},className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition-colors",children:[n.jsx("div",{className:"shrink-0 w-8 flex items-center justify-center",children:s}),n.jsxs("div",{className:"flex-1 text-left",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:r}),e&&n.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:e})]}),n.jsx(As,{className:"w-4 h-4 text-gray-500 shrink-0"})]}),o&&n.jsx("div",{className:"h-px bg-gray-200 mx-4"})]}),M1e=({items:s,onNavigate:r})=>n.jsx("div",{className:"border border-gray-200 bg-white/95",children:s.map((e,t)=>n.jsx(A1e,{icon:e.icon,title:e.title,description:e.description,path:e.path,onNavigate:r,showDivider:t<s.length-1},e.path))}),I1e=({loading:s,storeNotificationEmail:r,onOpenAddEmailModal:e})=>n.jsxs("div",{className:"border border-gray-200 p-4 mb-4 bg-white/95",children:[n.jsx("h2",{className:"text-sm font-medium mb-1 text-gray-900",children:"Sender email"}),n.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"The email your store uses to send emails to your customers"}),s?n.jsx("p",{className:"text-xs text-gray-600 py-2",children:"Loading..."}):r?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("input",{type:"email",value:r.email,disabled:!0,className:"flex-1 px-3 py-2 border border-gray-200 bg-white text-sm text-gray-900 disabled:bg-gray-50 disabled:text-gray-500"}),n.jsx("span",{className:`px-2 py-1 text-xs font-medium h-8 flex items-center ${r.isVerified?"bg-gray-100 text-gray-700":"bg-gray-100 text-gray-600"}`,children:r.isVerified?"Verified":"Unverified"})]}),n.jsx("div",{className:"flex justify-between items-center",children:n.jsxs("p",{className:"text-xs text-gray-600",children:["Confirm you have access to this email."," ",n.jsx("button",{onClick:t=>{t.preventDefault(),gr.success("Verification email sent")},className:"text-gray-700 hover:underline",children:"Resend verification"})]})})]}):n.jsx("div",{className:"flex justify-end items-center mt-2",children:n.jsx("button",{onClick:e,className:"px-3 py-1.5 bg-gray-900 text-white text-sm hover:bg-gray-800 transition-colors",children:"Add email"})})]}),UD=u.createContext(void 0),R1e=({children:s})=>{const[r,e]=u.useState(null),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async y=>{try{a(!0),i(null);const b=await nt.get(`/store-notification-email/store/${y}`),{success:v,data:w,message:C}=b.data;if(!v)throw new Error(C||"Failed to fetch store notification email");return e(w||null),w||null}catch(b){const v=b?.response?.data?.message||b?.message||"Failed to fetch store notification email";throw i(v),new Error(v)}finally{a(!1)}},[]),c=u.useCallback(async y=>{try{a(!0),i(null);const b=await nt.post("/store-notification-email",y),{success:v,data:w,message:C}=b.data;if(!v)throw new Error(C||"Failed to create store notification email");return e(w),w}catch(b){const v=b?.response?.data?.message||b?.message||"Failed to create store notification email";throw i(v),new Error(v)}finally{a(!1)}},[]),d=u.useCallback(async(y,b)=>{try{a(!0),i(null);const v=await nt.put(`/store-notification-email/${y}`,b),{success:w,data:C,message:k}=v.data;if(!w)throw new Error(k||"Failed to update store notification email");return e(C),C}catch(v){const w=v?.response?.data?.message||v?.message||"Failed to update store notification email";throw i(w),new Error(w)}finally{a(!1)}},[]),p=u.useCallback(()=>{e(null),i(null)},[]),h=u.useCallback(()=>{i(null)},[]),g={storeNotificationEmail:r,loading:t,error:o,getByStoreId:l,create:c,update:d,clear:p,clearError:h};return n.jsx(UD.Provider,{value:g,children:s})},D1e=()=>{const s=u.useContext(UD);if(!s)throw new Error("useStoreNotificationEmail must be used within a StoreNotificationEmailProvider");return s},L1e=()=>{const s=dr(),{activeStoreId:r}=Ur(),{storeNotificationEmail:e,loading:t,getByStoreId:a,create:o,update:i}=D1e(),{categories:l,fetchAll:c,loading:d}=Hj(),[p,h]=u.useState(!1),[g,y]=u.useState(""),[b,v]=u.useState(!1);u.useEffect(()=>{r&&a(r).catch(()=>{})},[r,a]),u.useEffect(()=>{l.length===0&&!d&&c().catch(()=>{})},[]);const w=u.useCallback(B=>{const G=B.toLowerCase(),$="w-5 h-5 text-gray-600";return G.includes("customer")?n.jsx(Gw,{className:$}):G.includes("staff")?n.jsx(QO,{className:$}):G.includes("fulfillment")?n.jsx(ed,{className:$}):n.jsx(wx,{className:$})},[]),C=B=>{const G=B.toLowerCase();return G.includes("customer")?"customer":G.includes("staff")?"staff":G.includes("fulfillment")?"fulfillment-request-notification":G.replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")},k=(B,G)=>{const $=C(G);return`/settings/notifications/${B}/${$}`},N=u.useCallback(()=>{h(!0),y("")},[]),O=u.useCallback(()=>{h(!1),y("")},[]),R=u.useCallback(async()=>{if(!r){gr.error("No store selected. Please select a store.");return}if(!g.trim()){gr.error("Please enter an email address");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g.trim())){gr.error("Please enter a valid email address");return}v(!0);try{await o({storeId:r,email:g.trim().toLowerCase(),isVerified:!1}),gr.success("Email added successfully"),O(),await a(r)}catch(G){const $=G?.response?.data?.message||G?.message||"Failed to add email";gr.error($)}finally{v(!1)}},[r,g,o,a,O]),L=[...l.map(B=>({icon:w(B.name),title:B.name,description:B.description||"",path:k(B._id,B.name)})),{icon:n.jsx(x2,{className:"w-5 h-5 text-gray-600"}),title:"Webhooks",description:"Send XML or JSON notifications about store events to a URL",path:"/settings/notifications/webhooks"}];return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsx("div",{className:"mb-4 border-b border-gray-200 pb-4",children:n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Notifications"})}),n.jsx(I1e,{loading:t,storeNotificationEmail:e,onOpenAddEmailModal:N}),n.jsx(P1e,{open:p,onClose:O,emailInput:g,onEmailInputChange:B=>y(B.target.value),onSubmit:R,saving:b}),n.jsx(M1e,{items:L,onNavigate:s})]})})},F1e=()=>{const[s,r]=u.useState("auto_checkout"),[e,t]=u.useState("never");return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900 mb-4",children:"Payments"}),n.jsxs("div",{className:"border border-gray-200 bg-white p-4 mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-1",children:"Payment providers"}),n.jsxs("p",{className:"text-xs text-gray-600 mb-3",children:["Providers that enable you to accept payment methods at a rate set by the third-party. An additional fee will apply to new orders once you"," ",n.jsx("a",{href:"#",className:"text-gray-700 hover:underline",children:"select a plan"}),"."]}),n.jsx("button",{className:"px-3 py-1.5 text-sm border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Choose a provider"})]}),n.jsxs("div",{className:"border border-gray-200 bg-white p-4 mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-1",children:"Supported payment methods"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Payment methods that are available with one of Ziplofy's approved payment providers"}),n.jsxs("div",{className:"border border-gray-200 p-3 flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-8 bg-white border border-gray-200 flex items-center justify-center",children:n.jsx(ob,{className:"w-5 h-5 text-gray-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"PayPal"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Transaction fees vary by plan  Processing fees set by PayPal"})]})]}),n.jsx("button",{className:"px-3 py-1.5 text-sm border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Activate PayPal"})]}),n.jsxs("button",{className:"px-3 py-1.5 text-sm border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors flex items-center gap-1.5",children:[n.jsx(On,{className:"w-4 h-4"}),"Add payment method"]})]}),n.jsxs("div",{className:"border border-gray-200 bg-white p-4 mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-1",children:"Payment capture method"}),n.jsxs("p",{className:"text-xs text-gray-600 mb-3",children:["Payments are authorized when an order is placed. Select how to"," ",n.jsx("a",{href:"#",className:"text-gray-700 hover:underline",children:"capture payments"}),":"]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"captureMethod",value:"auto_checkout",checked:s==="auto_checkout",onChange:a=>r(a.target.value),className:"w-4 h-4 text-gray-900 focus:ring-gray-400 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-900",children:"Automatically at checkout"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Capture payment when an order is placed"})]})]}),n.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"captureMethod",value:"auto_fulfilled",checked:s==="auto_fulfilled",onChange:a=>r(a.target.value),className:"w-4 h-4 text-gray-900 focus:ring-gray-400 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-900",children:"Automatically when the entire order is fulfilled"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Authorize payment at checkout and capture once the entire order is fulfilled"})]})]}),n.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"captureMethod",value:"manual",checked:s==="manual",onChange:a=>r(a.target.value),className:"w-4 h-4 text-gray-900 focus:ring-gray-400 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-900",children:"Manually"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Authorize payment at checkout and capture manually"})]})]})]})]}),n.jsxs("div",{className:"border border-gray-200 bg-white p-4 mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-1",children:"Manual payment methods"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Payments made outside your online store. Orders paid manually must be approved before being fulfilled."}),n.jsxs("button",{className:"px-3 py-1.5 text-sm border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors flex items-center gap-1.5",children:[n.jsx(On,{className:"w-4 h-4"}),"Manual payment method"]})]}),n.jsxs("div",{className:"border border-gray-200 bg-white p-4 mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-1",children:"Payment method customizations"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Control how payment methods appear to your customers at checkout"}),n.jsx("button",{className:"px-3 py-1.5 text-sm border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"View payment method customization apps"})]}),n.jsxs("div",{className:"border border-gray-200 bg-white p-4 mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Gift card expiration"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"giftCardExpiration",value:"never",checked:e==="never",onChange:a=>t(a.target.value),className:"w-4 h-4 text-gray-900 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900",children:"Gift cards never expire"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"giftCardExpiration",value:"expires",checked:e==="expires",onChange:a=>t(a.target.value),className:"w-4 h-4 text-gray-900 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900",children:"Gift cards expire"})]})]})]}),n.jsx("div",{className:"border border-gray-200 bg-white p-4 mb-4",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-1",children:"Apple Wallet passes"}),n.jsx("p",{className:"text-xs text-gray-600 max-w-[540px]",children:"Give customers a digital Apple Wallet pass to use online or in your retail stores"})]}),n.jsx("button",{className:"px-3 py-1.5 text-sm border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Customize"})]})}),n.jsx("div",{className:"text-center text-xs text-gray-600 mt-4",children:"Learn more about payments"})]})})},oO=[{name:"Basic",description:"For solo entrepreneurs",oldPrice:"1,994",price:"20",unit:"INR/month for first 3 months",badge:"Most popular",features:[{label:"Full online store",emphasized:!0},{label:"Sell in person with a phone or card reader"},{label:"10 inventory locations",emphasized:!0},{label:"Easy shipping labels"}]},{name:"Grow",description:"For small teams",oldPrice:"7,447",price:"20",unit:"INR/month for first 3 months",features:[{label:"Full online store",emphasized:!0},{label:"Sell in person with a phone or card reader"},{label:"10 inventory locations",emphasized:!0},{label:"Shipping discounts + insurance"},{label:"5 staff accounts",emphasized:!0}]},{name:"Advanced",description:"As your business scales",oldPrice:"30,164",price:"20",unit:"INR/month for first 3 months",features:[{label:"Full online store",emphasized:!0},{label:"Sell in person with a phone or card reader"},{label:"10 inventory locations",emphasized:!0},{label:"Fully integrated shipping",secondary:!0},{label:"15 staff accounts",emphasized:!0},{label:"Theme customization per market"},{label:"Enhanced 24/7 chat support"}]},{name:"Plus",description:"For more complex businesses",price:"175,000",unit:"INR/month",features:[{label:"Full online store",emphasized:!0},{label:"Sell in person with POS Pro for up to 200 locations",emphasized:!0},{label:"200 inventory locations",emphasized:!0},{label:"Local storefronts by market"},{label:"Fully integrated shipping",secondary:!0},{label:"Unlimited staff accounts",emphasized:!0},{label:"Theme customization per market"},{label:"Priority 24/7 phone support",emphasized:!0}],extras:["Fully customizable checkout","Sell wholesale/B2B","Optimize ads with Audiences","9 free expansion stores"]}],B1e=[{title:"General",questions:["What is Ziplofy and how does it work?","How much does Ziplofy cost?","How long are your contracts?","Can I cancel my account at any time?","Can I change my plan later on?","Do you offer any discounts?","In what countries can I use Ziplofy?","Is Ziplofy PCI Compliant or PCI Certified?"]},{title:"Payment",questions:["Are there any transaction fees?","What is a third-party payment provider?","Are there any credit card fees?"]},{title:"Store setup",questions:["Is there a setup fee?","I'm looking to switch to Ziplofy. How do I get my data over?","Can I use my own domain name with Ziplofy?","Do I get free web hosting when I open an online store?","What are your bandwidth fees?"]}],z1e=()=>{const s=dr(),[r,e]=u.useState(!1),[t,a]=u.useState({}),o=(i,l)=>{const c=`${i}-${l}`;a(d=>({...d,[c]:!d[c]}))};return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("button",{onClick:()=>s("/settings/plan"),className:"flex items-center gap-2 mb-4 px-3 py-1.5 text-sm text-gray-900 border border-gray-200 hover:bg-gray-50 transition-colors",children:[n.jsx(gn,{className:"w-4 h-4"}),"Back"]}),n.jsx("h1",{className:"text-xl font-medium text-gray-900 mb-1",children:"Pick your plan"}),n.jsx("p",{className:"text-sm text-gray-600 mb-8",children:"Everything you need to run your business"}),n.jsxs("div",{className:"flex flex-col md:flex-row gap-3 justify-between mb-3 text-sm text-gray-700",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Hc,{className:"w-4 h-4"}),"World's best checkout"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Hc,{className:"w-4 h-4"}),"Sell online and in person"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Hc,{className:"w-4 h-4"}),"24/7 chat support"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Hc,{className:"w-4 h-4"}),"Over 13,000 apps"]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 mb-6",children:oO.map(i=>n.jsxs("div",{className:"border border-gray-200 bg-white p-4 flex flex-col relative",children:[i.badge&&n.jsx("span",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-900 border border-gray-200",children:i.badge}),n.jsx("h3",{className:"text-base font-medium text-gray-900 mb-1",children:i.name}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:i.description}),n.jsxs("div",{className:"mb-3",children:[i.oldPrice&&n.jsx("p",{className:"text-sm text-gray-400 line-through font-medium mb-1",children:i.oldPrice}),n.jsxs("div",{className:"flex items-baseline gap-1",children:[n.jsx("span",{className:"text-xl font-medium text-gray-900",children:i.price}),n.jsx("span",{className:"text-sm text-gray-900",children:i.unit})]})]}),n.jsxs("button",{className:"w-full px-3 py-1.5 text-sm text-white bg-gray-900 hover:bg-gray-800 transition-colors mb-3",children:["Select ",i.name]}),n.jsxs("div",{className:"flex-grow space-y-1",children:[i.features.map(l=>l.secondary?n.jsx("p",{className:"text-xs text-gray-700 font-medium underline underline-offset-2 mb-1",children:l.label},l.label):n.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-900",children:[n.jsx(Hc,{className:"w-3 h-3 shrink-0"}),n.jsx("span",{className:l.emphasized?"font-medium":"",children:l.label})]},l.label)),i.extras&&n.jsx("div",{className:"mt-2 space-y-1",children:i.extras.map(l=>n.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-700 font-medium",children:[n.jsx(On,{className:"w-3 h-3 shrink-0"}),l]},l))})]})]},i.name))}),n.jsxs("div",{className:"mt-6",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Compare plans"}),n.jsxs("div",{className:"border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 border-b border-gray-200",children:[n.jsx("input",{type:"checkbox",id:"only-differences",checked:r,onChange:i=>e(i.target.checked),className:"w-4 h-4 text-gray-900 focus:ring-gray-400"}),n.jsx("label",{htmlFor:"only-differences",className:"text-sm text-gray-900 font-medium cursor-pointer",children:"Only show differences"})]}),n.jsxs("div",{className:"grid grid-cols-5",children:[n.jsx("div",{className:"border-r border-gray-200"}),oO.map(i=>n.jsxs("div",{className:"p-3 border-r border-gray-200 last:border-r-0 flex flex-col gap-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:i.name}),i.badge&&n.jsx("p",{className:"text-xs text-gray-500 font-medium",children:i.badge})]},`compare-header-${i.name}`))]}),n.jsxs("div",{className:"border-t border-gray-200",children:[n.jsx(iO,{label:"Pay monthly",values:["1,994 INR/mo","7,447 INR/mo","30,164 INR/mo","Starting at 175,000 INR/mo on a 3-year term"]}),n.jsx(iO,{label:"Pay yearly (Save up to 25%)",values:["1,499 INR/mo","5,599 INR/mo","22,680 INR/mo",""]})]}),n.jsx("div",{className:"text-center py-3 border-t border-gray-200",children:n.jsxs("button",{className:"inline-flex items-center gap-2 px-3 py-1.5 text-sm text-gray-900 border border-gray-200 hover:bg-gray-50 transition-colors",children:[n.jsx(On,{className:"w-4 h-4"}),"See all features"]})})]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"More ways to sell"}),n.jsxs("div",{className:"border border-gray-200 bg-white flex flex-col md:flex-row overflow-hidden",children:[n.jsxs("div",{className:"flex-1 p-4",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Retail"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"For selling at retail stores"}),n.jsx("p",{className:"text-sm text-gray-400 line-through font-medium mb-1",children:"7,000"}),n.jsxs("div",{className:"flex items-baseline gap-1 mb-3",children:[n.jsx("span",{className:"text-xl font-medium text-gray-900",children:"20"}),n.jsx("span",{className:"text-sm text-gray-900",children:"INR/month for first 3 months"})]}),n.jsx("button",{className:"px-3 py-1.5 text-sm text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Select Retail"})]}),n.jsxs("div",{className:"flex-1 p-4 border-t md:border-t-0 md:border-l border-gray-200",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Card rates starting at"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"2% 3rd-party payment providers"}),n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Standout features"}),["Sell in person with POS Pro (1 location included)","10 inventory locations","Unlimited POS staff with roles & permissions","Inventory management","Rich customer profiles and insights"].map(i=>n.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-900 mb-1",children:[n.jsx(Hc,{className:"w-3 h-3 shrink-0"}),n.jsx("span",{className:i.includes("Unlimited")?"font-medium":"",children:i})]},i))]})]})]}),n.jsxs("div",{className:"mt-6 mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Frequently asked questions"}),B1e.map(i=>n.jsxs("div",{className:"border border-gray-200 bg-white mb-3 overflow-hidden",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 px-4 pt-3 pb-2",children:i.title}),i.questions.map((l,c)=>{const d=`${i.title}-${l}`,p=t[d];return n.jsxs("div",{className:`border-t ${c===0?"border-gray-100":"border-gray-200"}`,children:[n.jsxs("button",{onClick:()=>o(i.title,l),className:"w-full flex items-center justify-between px-4 py-2 text-left hover:bg-gray-50 transition-colors",children:[n.jsx("span",{className:"text-sm font-medium text-gray-900",children:l}),n.jsx(Ys,{className:`w-4 h-4 text-gray-600 transition-transform ${p?"transform rotate-180":""}`})]}),p&&n.jsx("div",{className:"px-4 pb-3",children:n.jsx("p",{className:"text-xs text-gray-600",children:"This is placeholder text for the answer. You can update it with actual FAQ content later."})})]},l)})]},i.title))]})]})})},iO=({label:s,values:r})=>n.jsxs("div",{className:"grid grid-cols-5 border-b border-gray-200",children:[n.jsx("div",{className:"border-r border-gray-200 p-3 bg-gray-50 font-medium text-sm text-gray-900",children:s}),r.map((e,t)=>n.jsx("div",{className:`border-r border-gray-200 p-3 text-sm text-gray-900 font-medium ${t===r.length-1?"border-r-0":""}`,children:e},`${s}-${t}`))]}),$1e=({open:s,onClose:r,acknowledged:e,onAcknowledgedChange:t})=>n.jsxs(en,{open:s,onClose:r,title:"Cancel trial",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm text-gray-900 hover:bg-gray-100 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:r,disabled:!e,className:`px-3 py-1.5 text-sm transition-colors ${e?"bg-gray-900 text-white hover:bg-gray-800":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:"Continue"})]}),children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Avoid unwanted charges"}),n.jsxs("ul",{className:"pl-5 mb-3 text-xs text-gray-600 list-disc space-y-1",children:[n.jsx("li",{children:"Cancel any app subscriptions you signed up for outside of Ziplofy"}),n.jsxs("li",{children:["Cancel additional"," ",n.jsx("a",{href:"#",className:"text-gray-700 hover:underline",children:"stores connected to your account"})]}),n.jsxs("li",{children:["Turn off automatic renewals for any"," ",n.jsx("a",{href:"#",className:"text-gray-700 hover:underline",children:"domains with Ziplofy"})]})]}),n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Domains"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Any domains connected to your account will be disconnected if you cancel your plan. As well, all auto renewals will be turned off for any domains bought through Ziplofy."}),n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Remember"}),n.jsxs("p",{className:"text-xs text-gray-600 mb-3",children:[n.jsx("a",{href:"#",className:"text-gray-700 hover:underline",children:"Review steps"})," ","to take before canceling, including exporting store data as CSV files."]}),n.jsx("div",{className:"bg-gray-100 border border-gray-200 p-3 mb-3",children:n.jsx("p",{className:"text-xs text-gray-900",children:n.jsx("a",{href:"#",className:"text-gray-700 hover:underline",children:"If you need help, contact support."})})}),n.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-900 mt-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:e,onChange:t,className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400"}),n.jsx("span",{children:"I've reviewed the information above"})]})]}),U1e=({onCancelTrial:s,onChoosePlan:r})=>n.jsxs("div",{className:"border border-gray-200 bg-white p-4 mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Plan details"}),n.jsxs("div",{className:"border border-gray-200 p-4 flex items-center justify-between gap-4 flex-wrap",children:[n.jsx("p",{className:"text-sm text-gray-900",children:"Trial"}),n.jsxs("div",{className:"flex gap-2 flex-wrap",children:[n.jsx("button",{onClick:s,className:"px-3 py-1.5 text-sm text-gray-700 border border-gray-200 bg-transparent hover:bg-gray-50 transition-colors",children:"Cancel trial"}),n.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Choose plan"})]})]}),n.jsxs("p",{className:"text-xs text-gray-600 mt-3",children:["View the"," ",n.jsx("a",{href:"#",className:"text-gray-700 hover:underline",children:"terms of service"})," ","and"," ",n.jsx("a",{href:"#",className:"text-gray-700 hover:underline",children:"privacy policy"})]})]}),V1e=({onViewAllSubscriptions:s})=>n.jsxs("div",{className:"border border-gray-200 bg-white p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Subscriptions"}),n.jsx("p",{className:"text-xs text-gray-600 mt-2 mb-3",children:"Additional items you're billed for on a recurring basis"}),n.jsxs("div",{className:"border border-gray-200 p-3 flex items-center justify-between cursor-pointer transition-all hover:bg-gray-50",onClick:s,children:[n.jsx("p",{className:"text-sm text-gray-900",children:"View all subscriptions"}),n.jsx(As,{className:"w-4 h-4 text-gray-400"})]})]}),H1e=()=>{const s=dr(),[r,e]=u.useState(!1),[t,a]=u.useState(!1),o=u.useCallback(()=>{e(!0),a(!1)},[]),i=u.useCallback(()=>{e(!1)},[]),l=u.useCallback(p=>{a(p.target.checked)},[]),c=u.useCallback(()=>{s("/settings/subscribe/select-plan")},[s]),d=u.useCallback(()=>{s("/settings/plan/subscriptions")},[s]);return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900 mb-4",children:"Plan"}),n.jsx(U1e,{onCancelTrial:o,onChoosePlan:c}),n.jsx(V1e,{onViewAllSubscriptions:d}),n.jsx($1e,{open:r,onClose:i,acknowledged:t,onAcknowledgedChange:l})]})})},W1e=({installedCount:s=0,onBrowseApps:r})=>n.jsxs("div",{className:"border border-gray-200 p-3 bg-gray-50",children:[n.jsxs("h2",{className:"text-base font-medium text-gray-900",children:["Paid app subscriptions (",s," installed)"]}),n.jsxs("div",{className:"mt-3 border border-gray-200 p-4 text-center bg-white",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"You don't have any paid app subscriptions"}),n.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"After you install an app that has recurring and/or usage charges, it will be shown here."}),n.jsx("button",{onClick:r,className:"px-3 py-1.5 bg-gray-900 text-white text-sm hover:bg-gray-800 transition-colors",children:"Browse apps"})]})]}),q1e=()=>n.jsxs("div",{className:"border border-gray-200 p-3 bg-gray-50",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Overview"}),n.jsx("div",{className:"mt-3 border border-gray-200 p-3 bg-white",children:n.jsx("p",{className:"text-sm text-gray-900",children:"Ziplofy subscription"})})]}),G1e=()=>{const s=dr(),r=u.useCallback(()=>{s("/settings/plan")},[s]);return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.jsxs("button",{onClick:r,className:"cursor-pointer flex items-center gap-2 px-3 py-1.5 border border-gray-200 bg-white text-gray-900 text-sm hover:bg-gray-50 transition-colors",children:[n.jsx(gn,{className:"w-4 h-4"}),"Back"]}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Active subscriptions"})]}),n.jsxs("div",{className:"border border-gray-200 bg-white flex flex-col gap-4 p-4",children:[n.jsx(q1e,{}),n.jsx(W1e,{installedCount:0})]})]})})},py=({icon:s,label:r,right:e,onClick:t})=>n.jsxs("button",{onClick:t,className:"w-full px-4 py-2 flex items-center gap-3 hover:bg-gray-50 transition-colors text-left",children:[n.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-600 shrink-0",children:s}),n.jsx("span",{className:"flex-1 text-sm text-gray-900",children:r}),e]}),hy=({variant:s="default"})=>s==="privacy"?n.jsxs("div",{className:"flex gap-1 border-b border-gray-200 p-2",children:[n.jsx("button",{className:"px-2 py-1 text-sm text-gray-700 hover:bg-gray-100 rounded",title:"Paragraph",children:"Paragraph"}),n.jsx("button",{className:"px-2 py-1 text-sm font-bold text-gray-700 hover:bg-gray-100 rounded",title:"Bold",children:"B"}),n.jsx("button",{className:"px-2 py-1 text-sm italic text-gray-700 hover:bg-gray-100 rounded",title:"Italic",children:"I"}),n.jsx("button",{className:"px-2 py-1 text-sm underline text-gray-700 hover:bg-gray-100 rounded",title:"Underline",children:"U"}),n.jsx("button",{className:"px-2 py-1 text-sm text-gray-700 hover:bg-gray-100 rounded",title:"Text color",children:"A"}),n.jsx("button",{className:"px-2 py-1 text-sm text-gray-700 hover:bg-gray-100 rounded",title:"List",children:""}),n.jsx("button",{className:"px-2 py-1 text-sm text-gray-700 hover:bg-gray-100 rounded",title:"Link",children:""}),n.jsx("button",{className:"px-2 py-1 text-sm text-gray-700 hover:bg-gray-100 rounded",title:"Insert image",children:""}),n.jsx("button",{className:"px-2 py-1 text-sm text-gray-700 hover:bg-gray-100 rounded",title:"Insert table",children:""}),n.jsx("button",{className:"px-2 py-1 text-sm text-gray-700 hover:bg-gray-100 rounded",title:"More options",children:""}),n.jsx("button",{className:"px-2 py-1 text-sm text-gray-700 hover:bg-gray-100 rounded",title:"View HTML",children:"</>"})]}):n.jsxs("div",{className:"flex gap-1 border-b border-gray-200 p-2",children:[n.jsx("button",{className:"px-2 py-1 text-sm font-bold text-gray-700 hover:bg-gray-100 rounded",title:"Bold",children:"B"}),n.jsx("button",{className:"px-2 py-1 text-sm italic text-gray-700 hover:bg-gray-100 rounded",title:"Italic",children:"I"}),n.jsx("button",{className:"px-2 py-1 text-sm underline text-gray-700 hover:bg-gray-100 rounded",title:"Underline",children:"U"}),n.jsx("button",{className:"px-2 py-1 text-sm text-gray-700 hover:bg-gray-100 rounded",title:"Bulleted list",children:""}),n.jsx("button",{className:"px-2 py-1 text-sm text-gray-700 hover:bg-gray-100 rounded",title:"Numbered list",children:"1."}),n.jsx("button",{className:"px-2 py-1 text-sm text-gray-700 hover:bg-gray-100 rounded",title:"Link",children:""}),n.jsx("button",{className:"px-2 py-1 text-sm text-gray-700 hover:bg-gray-100 rounded",title:"Insert table",children:""}),n.jsx("button",{className:"px-2 py-1 text-sm text-gray-700 hover:bg-gray-100 rounded",title:"More options",children:""})]}),VD=u.createContext(void 0),K1e=({children:s})=>{const[r,e]=u.useState(null),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async h=>{try{a(!0),i(null);const g=await nt.get(`/store-privacy-policy/store/${h}`),{success:y,data:b,message:v}=g.data;if(!y)throw new Error(v||"Failed to fetch privacy policy");return e(b||null),b||null}catch(g){const y=g?.response?.data?.message||g?.message||"Failed to fetch privacy policy";throw i(y),new Error(y)}finally{a(!1)}},[]),c=u.useCallback(async h=>{try{a(!0),i(null);const g=await nt.post("/store-privacy-policy",h),{success:y,data:b,message:v}=g.data;if(!y)throw new Error(v||"Failed to create privacy policy");return e(b),b}catch(g){const y=g?.response?.data?.message||g?.message||"Failed to create privacy policy";throw i(y),new Error(y)}finally{a(!1)}},[]),d=u.useCallback(async(h,g)=>{try{a(!0),i(null);const y=await nt.put(`/store-privacy-policy/${h}`,g),{success:b,data:v,message:w}=y.data;if(!b)throw new Error(w||"Failed to update privacy policy");return e(v),v}catch(y){const b=y?.response?.data?.message||y?.message||"Failed to update privacy policy";throw i(b),new Error(b)}finally{a(!1)}},[]),p={policy:r,loading:t,error:o,getByStoreId:l,createPolicy:c,updatePolicy:d};return n.jsx(VD.Provider,{value:p,children:s})},Y1e=()=>{const s=u.useContext(VD);if(!s)throw new Error("useStorePrivacyPolicy must be used within a StorePrivacyPolicyProvider");return s},HD=u.createContext(void 0),Z1e=({children:s})=>{const[r,e]=u.useState(null),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async h=>{try{a(!0),i(null);const g=await nt.get(`/store-return-refund-policy/store/${h}`),{success:y,data:b,message:v}=g.data;if(!y)throw new Error(v||"Failed to fetch return/refund policy");return e(b||null),b||null}catch(g){const y=g?.response?.data?.message||g?.message||"Failed to fetch return/refund policy";throw i(y),new Error(y)}finally{a(!1)}},[]),c=u.useCallback(async h=>{try{a(!0),i(null);const g=await nt.post("/store-return-refund-policy",h),{success:y,data:b,message:v}=g.data;if(!y)throw new Error(v||"Failed to create return/refund policy");return e(b),b}catch(g){const y=g?.response?.data?.message||g?.message||"Failed to create return/refund policy";throw i(y),new Error(y)}finally{a(!1)}},[]),d=u.useCallback(async(h,g)=>{try{a(!0),i(null);const y=await nt.put(`/store-return-refund-policy/${h}`,g),{success:b,data:v,message:w}=y.data;if(!b)throw new Error(w||"Failed to update return/refund policy");return e(v),v}catch(y){const b=y?.response?.data?.message||y?.message||"Failed to update return/refund policy";throw i(b),new Error(b)}finally{a(!1)}},[]),p={policy:r,loading:t,error:o,getByStoreId:l,createPolicy:c,updatePolicy:d};return n.jsx(HD.Provider,{value:p,children:s})},X1e=()=>{const s=u.useContext(HD);if(!s)throw new Error("useStoreReturnRefundPolicy must be used within a StoreReturnRefundPolicyProvider");return s},WD=u.createContext(void 0),Q1e=({children:s})=>{const[r,e]=u.useState(null),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async h=>{try{a(!0),i(null);const g=await nt.get(`/store-shipping-policy/store/${h}`),{success:y,data:b,message:v}=g.data;if(!y)throw new Error(v||"Failed to fetch shipping policy");return e(b||null),b||null}catch(g){const y=g?.response?.data?.message||g?.message||"Failed to fetch shipping policy";throw i(y),new Error(y)}finally{a(!1)}},[]),c=u.useCallback(async h=>{try{a(!0),i(null);const g=await nt.post("/store-shipping-policy",h),{success:y,data:b,message:v}=g.data;if(!y)throw new Error(v||"Failed to create shipping policy");return e(b),b}catch(g){const y=g?.response?.data?.message||g?.message||"Failed to create shipping policy";throw i(y),new Error(y)}finally{a(!1)}},[]),d=u.useCallback(async(h,g)=>{try{a(!0),i(null);const y=await nt.put(`/store-shipping-policy/${h}`,g),{success:b,data:v,message:w}=y.data;if(!b)throw new Error(w||"Failed to update shipping policy");return e(v),v}catch(y){const b=y?.response?.data?.message||y?.message||"Failed to update shipping policy";throw i(b),new Error(b)}finally{a(!1)}},[]),p={policy:r,loading:t,error:o,getByStoreId:l,createPolicy:c,updatePolicy:d};return n.jsx(WD.Provider,{value:p,children:s})},J1e=()=>{const s=u.useContext(WD);if(!s)throw new Error("useStoreShippingPolicy must be used within a StoreShippingPolicyProvider");return s},qD=u.createContext(void 0),eCe=({children:s})=>{const[r,e]=u.useState(null),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async h=>{try{a(!0),i(null);const g=await nt.get(`/store-terms-policy/store/${h}`),{success:y,data:b,message:v}=g.data;if(!y)throw new Error(v||"Failed to fetch terms policy");return e(b||null),b||null}catch(g){const y=g?.response?.data?.message||g?.message||"Failed to fetch terms policy";throw i(y),new Error(y)}finally{a(!1)}},[]),c=u.useCallback(async h=>{try{a(!0),i(null);const g=await nt.post("/store-terms-policy",h),{success:y,data:b,message:v}=g.data;if(!y)throw new Error(v||"Failed to create terms policy");return e(b),b}catch(g){const y=g?.response?.data?.message||g?.message||"Failed to create terms policy";throw i(y),new Error(y)}finally{a(!1)}},[]),d=u.useCallback(async(h,g)=>{try{a(!0),i(null);const y=await nt.put(`/store-terms-policy/${h}`,g),{success:b,data:v,message:w}=y.data;if(!b)throw new Error(w||"Failed to update terms policy");return e(v),v}catch(y){const b=y?.response?.data?.message||y?.message||"Failed to update terms policy";throw i(b),new Error(b)}finally{a(!1)}},[]),p={policy:r,loading:t,error:o,getByStoreId:l,createPolicy:c,updatePolicy:d};return n.jsx(qD.Provider,{value:p,children:s})},tCe=()=>{const s=u.useContext(qD);if(!s)throw new Error("useStoreTermsPolicy must be used within a StoreTermsPolicyProvider");return s},rCe=()=>{const s=dr(),{rules:r,getByStoreId:e,loading:t}=Jk(),{stores:a,activeStoreId:o}=Ur(),{loggedInUser:i}=M2(),{info:l,getByStoreId:c,createInfo:d,updateInfo:p}=TD(),{policy:h,getByStoreId:g,createPolicy:y,updatePolicy:b}=J1e(),{policy:v,getByStoreId:w,createPolicy:C,updatePolicy:k}=tCe(),{policy:N,getByStoreId:O,createPolicy:R,updatePolicy:L}=Y1e(),{policy:B,getByStoreId:G,createPolicy:$,updatePolicy:z}=X1e(),[Y,M]=u.useState(!1),[q,P]=u.useState(""),[H,D]=u.useState(!1),[X,se]=u.useState(!1),[Q,xe]=u.useState(""),[K,Z]=u.useState(!1),[ve,ae]=u.useState(""),[Se,Pe]=u.useState(!1),[$e,we]=u.useState(!1),[Ae,ze]=u.useState(""),[Ge,Ue]=u.useState(!1),[ht,ee]=u.useState(!1),[ue,Oe]=u.useState(!1),[J,I]=u.useState(""),[V,re]=u.useState(!1);u.useEffect(()=>{o&&e(o),o&&c(o),o&&g(o),o&&w(o),o&&O(o),o&&G(o)},[o,e,c,g,w,O,G]);const pe=u.useCallback(()=>{I(`We have a 30-day return policy, which means you have 30 days after receiving your item to request a return.

To be eligible for a return, your item must be in the same condition that you received it, unworn or unused, with tags, and in its original packaging. You'll also need the receipt or proof of purchase.

To start a return, you can contact us at developer200419@gmail.com. Please note that returns will need to be sent to the following address: [INSERT RETURN ADDRESS]

If your return is accepted, we'll send you a return shipping label, as well as instructions on how and where to send your package. Items sent back to us without first requesting a return will not be accepted.

You can always contact us for any return question at developer200419@gmail.com.




Damages and issues
Please inspect your order upon reception and contact us immediately if the item is defective, damaged or if you receive the wrong item, so that we can evaluate the issue and make it right.




Exceptions / non-returnable items
Certain types of items cannot be returned, like perishable goods (such as food, flowers, or plants), custom products (such as special orders or personalized items), and personal care goods (such as beauty products). We also do not accept returns for hazardous materials, flammable liquids, or gases. Please get in touch if you have questions or concerns about your specific item.

Unfortunately, we cannot accept returns on sale items or gift cards.




Exchanges
The fastest way to ensure you get what you want is to return the item you have, and once the return is accepted, make a separate purchase for the new item.




European Union 14 day cooling off period
Notwithstanding the above, if the merchandise is being shipped into the European Union, you have the right to cancel or return your order within 14 days, for any reason and without a justification. As above, your item must be in the same condition that you received it, unworn or unused, with tags, and in its original packaging. You'll also need the receipt or proof of purchase.




Refunds
We will notify you once we've received and inspected your return, and let you know if the refund was approved or not. If approved, you'll be automatically refunded on your original payment method within 10 business days. Please remember it can take some time for your bank or credit card company to process and post the refund too.
If more than 15 business days have passed since we've approved your return, please contact us at developer200419@gmail.com.`)},[]),ge=u.useCallback(()=>{const he=a.find(We=>We._id===o)?.storeName||"My Store",ie=i?.email||"",Fe=`Trade name: ${he}

Phone number:

Email: ${ie}

Physical address: legal name man, demo address, demo apartment, 201012 helo world city UP, India

VAT number:

Trade number:`;P(Fe)},[a,o,i]),Ce=u.useCallback(()=>{const he=a.find(Qe=>Qe._id===o)?.storeName||"My Store",ie=i?.email||"support@example.com",We=`OVERVIEW
${`Welcome to ${he}! The terms "we", "us" and "our" refer to ${he}. ${he} operates this store and website, including all related information, content, features, tools, products and services in order to provide you, the customer, with a curated shopping experience (the "Services"). ${he} is powered by Shopify, which enables us to provide the Services to you.`}
The below terms and conditions, together with any policies referenced herein (these "Terms of Service" or "Terms") describe your rights and responsibilities when you use the Services.
Please read these Terms of Service carefully, as they include important information about your legal rights and cover areas such as warranty disclaimers and limitations of liability.
By visiting, interacting with or using our Services, you agree to be bound by these Terms of Service and our Privacy Policy [LINK]. If you do not agree to these Terms of Service or Privacy Policy, you should not use or access our Services.

SECTION 1 - ACCESS AND ACCOUNT
By agreeing to these Terms of Service, you represent that you are at least the age of majority in your state or province of residence, and you have given us your consent to allow any of your minor dependents to use the Services on devices you own, purchase or manage.
To use the Services, including accessing or browsing our online stores or purchasing any of the products or services we offer, you may be asked to provide certain information, such as your email address, billing, payment, and shipping information. You represent and warrant that all the information you provide in our stores is correct, current and complete and that you have all rights necessary to provide this information.
You are solely responsible for maintaining the security of your account credentials and for all of your account activity. You may not transfer, sell, assign, or license your account to any other person.

SECTION 2 - OUR PRODUCTS
We have made every effort to provide an accurate representation of our products and services in our online stores. However, please note that colors or product appearance may differ from how they may appear on your screen due to the type of device you use to access the store and your device settings and configuration.
We do not warrant that the appearance or quality of any products or services purchased by you will meet your expectations or be the same as depicted or rendered in our online stores.
All descriptions of products are subject to change at any time without notice at our sole discretion. We reserve the right to discontinue any product at any time and may limit the quantities of any products that we offer to any person, geographic region or jurisdiction, on a case-by-case basis.

SECTION 3 - ORDERS
When you place an order, you are making an offer to purchase. ${he} reserves the right to accept or decline your order for any reason at its discretion. Your order is not accepted until ${he} confirms acceptance. We must receive and process your payment before your order is accepted. Please review your order carefully before submitting, as ${he} may be unable to accommodate cancellation requests after an order is accepted. In the event that we do not accept, make a change to, or cancel an order, we will attempt to notify you by contacting the email, billing address, and/or phone number provided at the time the order was made.
Your purchases are subject to return or exchange solely in accordance with our Refund Policy [LINK].
You represent and warrant that your purchases are for your own personal or household use and not for commercial resale or export.

SECTION 4 - PRICES AND BILLING
Prices, discounts and promotions are subject to change without notice. The price charged for a product or service will be the price in effect at the time the order is placed and will be set out in your order confirmation email. Unless otherwise expressly stated, posted prices do not include taxes, shipping, handling, customs or import charges.
Prices posted in our online stores may be different from prices offered in physical stores or in online or other stores operated by third parties. We may offer, from time to time, promotions on the Services that may affect pricing and that are governed by terms and conditions separate from these Terms. If there is a conflict between the terms for a promotion and these Terms, the promotion terms will govern.
You agree to provide current, complete and accurate purchase, payment and account information for all purchases made at our stores. You agree to promptly update your account and other information, including your email address, credit card numbers and expiration dates, so that we can complete your transactions and contact you as needed.
You represent and warrant that (i) the credit card information you provide is true, correct, and complete, (ii) you are duly authorized to use such credit card for the purchase, (iii) charges incurred by you will be honored by your credit card company, and (iv) you will pay charges incurred by you at the posted prices, including shipping and handling charges and all applicable taxes, if any.

SECTION 5 - SHIPPING AND DELIVERY
We are not liable for shipping and delivery delays. All delivery times are estimates only and are not guaranteed. We are not responsible for delays caused by shipping carriers, customs processing, or events outside our control. Once we transfer products to the carrier, title and risk of loss passes to you.

SECTION 6 - INTELLECTUAL PROPERTY
Our Services, including but not limited to all trademarks, brands, text, displays, images, graphics, product reviews, video, and audio, and the design, selection, and arrangement thereof, are owned by ${he}, its affiliates or licensors and are protected by U.S. and foreign patent, copyright and other intellectual property laws.
These Terms permit you to use the Services for your personal, non-commercial use only. You must not reproduce, distribute, modify, create derivative works of, publicly display, publicly perform, republish, download, store, or transmit any of the material on the Services without our prior written consent. Except as expressly provided herein, nothing in these Terms grants or shall be construed as granting a license or other rights to you under any patent, trademark, copyright, or other intellectual property of ${he}, Shopify or any third party. Unauthorized use of the Services may be a violation of federal and state intellectual property laws. All rights not expressly granted herein are reserved by ${he}.
${he}'s names, logos, product and service names, designs, and slogans are trademarks of ${he} or its affiliates or licensors. You must not use such trademarks without the prior written permission of ${he}. Shopify's name, logo, product and service names, designs and slogans are trademarks of Shopify. All other names, logos, product and service names, designs, and slogans on the Services are the trademarks of their respective owners.

SECTION 7 - OPTIONAL TOOLS
You may be provided with access to customer tools offered by third parties as part of the Services, which we neither monitor nor have any control nor input.
You acknowledge and agree that we provide access to such tools "as is" and "as available" without any warranties, representations or conditions of any kind and without any endorsement. We shall have no liability whatsoever arising from or relating to your use of optional third-party tools.
Any use by you of the optional tools offered through the site is entirely at your own risk and discretion and you should ensure that you are familiar with and approve of the terms on which tools are provided by the relevant third-party provider(s).
We may also, in the future, offer new features through the Services (including the release of new tools and resources). Such new features shall also be deemed part of the Services and are subject to these Terms of Service.

SECTION 8 - THIRD-PARTY LINKS
The Services may contain materials and hyperlinks to websites provided or operated by third parties (including any embedded third party functionality). We are not responsible for examining or evaluating the content or accuracy of any third-party materials or websites you choose to access. If you decide to leave the Services to access these materials or third party sites, you do so at your own risk.
We are not liable for any harm or damages related to your access of any third-party websites, or your purchase or use of any products, services, resources, or content on any third-party websites. Please review carefully the third-party's policies and practices and make sure you understand them before you engage in any transaction. Complaints, claims, concerns, or questions regarding third-party products and services should be directed to the third-party.

SECTION 9 - RELATIONSHIP WITH SHOPIFY
[NOTE TO MERCHANT: This section accurately characterizes Shopify's relationship with your store and should not be removed or modified.]
${he} is powered by Shopify, which enables us to provide the Services to you. However, any sales and purchases you make in our Store are made directly with ${he}. By using the Services, you acknowledge and agree that Shopify is not responsible for any aspect of any sales between you and ${he}, including any injury, damage, or loss resulting from purchased products and services. You hereby expressly release Shopify and its affiliates from all claims, damages, and liabilities arising from or related to your purchases and transactions with ${he}.

SECTION 10 - PRIVACY POLICY
All personal information we collect through the Services is subject to our Privacy Policy, which can be viewed here [LINK], and certain personal information may be subject to Shopify's Privacy Policy, which can be viewed here. By using the Services, you acknowledge that you have read these privacy policies.
Because the Services are hosted by Shopify, Shopify collects and processes personal information about your access to and use of the Services in order to provide and improve the Services for you. Information you submit to the Services will be transmitted to and shared with Shopify as well as third parties that may be located in other countries than where you reside, in order to provide services to you. Review our privacy policy [LINK] for more details on how we, Shopify, and our partners use your personal information.

SECTION 11 - FEEDBACK
If you submit, upload, post, email, or otherwise transmit any ideas, suggestions, feedback, reviews, proposals, plans, or other content (collectively, "Feedback"), you grant us a perpetual, worldwide, sublicensable, royalty-free license to use, reproduce, modify, publish, distribute and display such Feedback in any medium for any purpose, including for commercial use. We may, for example, use our rights under this license to operate, provide, evaluate, enhance, improve and promote the Services and to perform our obligations and exercise our rights under the Terms of Service.
You also represent and warrant that: (i) you own or have all necessary rights to all Feedback; (ii) you have disclosed any compensation or incentives received in connection with your submission of Feedback; and (iii) your Feedback will comply with these Terms. We are and shall be under no obligation (1) to maintain your Feedback in confidence; (2) to pay compensation for your Feedback; or (3) to respond to your Feedback.
We may, but have no obligation to, monitor, edit or remove Feedback that we determine in our sole discretion to be unlawful, offensive, threatening, libelous, defamatory, pornographic, obscene or otherwise objectionable or violates any party's intellectual property or these Terms of Service.
You agree that your Feedback will not violate any right of any third-party, including copyright, trademark, privacy, personality or other personal or proprietary right. You further agree that your Feedback will not contain libelous or otherwise unlawful, abusive or obscene Feedback, or contain any computer virus or other malware that could in any way affect the operation of the Services or any related website. You may not use a false email address, pretend to be someone other than yourself, or otherwise mislead us or third-parties as to the origin of any Feedback. You are solely responsible for any Feedback you make and its accuracy. We take no responsibility and assume no liability for any Feedback posted by you or any third-party.

SECTION 12 - ERRORS, INACCURACIES AND OMISSIONS
Occasionally there may be information on or in the Services that contain typographical errors, inaccuracies or omissions that may relate to product descriptions, pricing, promotions, offers, product shipping charges, transit times and availability. We reserve the right to correct any errors, inaccuracies or omissions, and to change or update information or cancel orders if any information is inaccurate at any time without prior notice (including after you have submitted your order).

SECTION 13 - PROHIBITED USES
You may access and use the Services for lawful purposes only. You may not access or use the Services, directly or indirectly: (a) for any unlawful or malicious purpose; (b) to violate any international, federal, provincial or state regulations, rules, laws, or local ordinances; (c) to infringe upon or violate our intellectual property rights or the intellectual property rights of others; (d) to harass, abuse, insult, harm, defame, slander, disparage, intimidate, or harm any of our employees or any other person; (e) to transmit false or misleading information; (f) to send, knowingly receive, upload, download, use, or re-use any material that does not comply with the these Terms; (g) to transmit, or procure the sending of, any advertising or promotional material, including any "junk mail," "chain letter," "spam," or any other similar solicitation; (h) to impersonate or attempt to impersonate any other person or entity; or (i) to engage in any other conduct that restricts or inhibits anyone's use or enjoyment of the Services, or which, as determined by us, may harm ${he}, Shopify or users of the Services, or expose them to liability.
In addition, you agree not to: (a) upload or transmit viruses or any other type of malicious code that will or may be used in any way that will affect the functionality or operation of the Services; (b) reproduce, duplicate, copy, sell, resell or exploit any portion of the Services; (c) collect or track the personal information of others; (d) spam, phish, pharm, pretext, spider, crawl, or scrape; or (e) interfere with or circumvent the security features of the Services or any related website, other websites, or the Internet. We reserve the right to suspend, disable, or terminate your account at any time, without notice, if we determine that you have violated any part of these Terms.

SECTION 14 - TERMINATION
We may terminate this agreement or your access to the Services (or any part thereof) in our sole discretion at any time without notice, and you will remain liable for all amounts due up to and including the date of termination.
The following sections will continue to apply following any termination: Intellectual Property, Feedback, Termination, Disclaimer of Warranties, Limitation of Liability, Indemnification, Severability, Waiver; Entire Agreement, Assignment, Governing Law, Privacy Policy, and any other provisions that by their nature should survive termination.

SECTION 15 - DISCLAIMER OF WARRANTIES
The information presented on or through the Services is made available solely for general information purposes. We do not warrant the accuracy, completeness, or usefulness of this information. Any reliance you place on such information is strictly at your own risk. We disclaim all liability and responsibility arising from any reliance placed on such materials by you or any other visitor to the Services, or by anyone who may be informed of any of its contents.
EXCEPT AS EXPRESSLY STATED BY ${he}, THE SERVICES AND ALL PRODUCTS OFFERED THROUGH THE SERVICES ARE PROVIDED 'AS IS' AND 'AS AVAILABLE' FOR YOUR USE, WITHOUT ANY REPRESENTATION, WARRANTIES OR CONDITIONS OF ANY KIND, EITHER EXPRESS OR IMPLIED, INCLUDING ALL IMPLIED WARRANTIES OR CONDITIONS OF MERCHANTABILITY, MERCHANTABLE QUALITY, FITNESS FOR A PARTICULAR PURPOSE, DURABILITY, TITLE, AND NON-INFRINGEMENT. WE DO NOT GUARANTEE, REPRESENT OR WARRANT THAT YOUR USE OF THE SERVICES WILL BE UNINTERRUPTED, TIMELY, SECURE OR ERROR-FREE. SOME JURISDICTIONS LIMIT OR DO NOT ALLOW THE DISCLAIMER OF IMPLIED OR OTHER WARRANTIES SO THE ABOVE DISCLAIMER MAY NOT APPLY TO YOU.

SECTION 16 - LIMITATION OF LIABILITY
TO THE FULLEST EXTENT PROVIDED BY LAW, IN NO CASE SHALL ${he}, OUR PARTNERS, DIRECTORS, OFFICERS, EMPLOYEES, AFFILIATES, AGENTS, CONTRACTORS, SERVICE PROVIDERS OR LICENSORS, OR THOSE OF SHOPIFY AND ITS AFFILIATES, BE LIABLE FOR ANY INJURY, LOSS, CLAIM, OR ANY DIRECT, INDIRECT, INCIDENTAL, PUNITIVE, SPECIAL, OR CONSEQUENTIAL DAMAGES OF ANY KIND, INCLUDING, WITHOUT LIMITATION, LOST PROFITS, LOST REVENUE, LOST SAVINGS, LOSS OF DATA, REPLACEMENT COSTS, OR ANY SIMILAR DAMAGES, WHETHER BASED IN CONTRACT, TORT (INCLUDING NEGLIGENCE), STRICT LIABILITY OR OTHERWISE, ARISING FROM YOUR USE OF ANY OF THE SERVICES OR ANY PRODUCTS PROCURED USING THE SERVICES, OR FOR ANY OTHER CLAIM RELATED IN ANY WAY TO YOUR USE OF THE SERVICES OR ANY PRODUCT, INCLUDING, BUT NOT LIMITED TO, ANY ERRORS OR OMISSIONS IN ANY CONTENT, OR ANY LOSS OR DAMAGE OF ANY KIND INCURRED AS A RESULT OF THE USE OF THE SERVICES OR ANY CONTENT (OR PRODUCT) POSTED, TRANSMITTED, OR OTHERWISE MADE AVAILABLE VIA THE SERVICES, EVEN IF ADVISED OF THEIR POSSIBILITY.

SECTION 17 - INDEMNIFICATION
You agree to indemnify, defend and hold harmless ${he}, Shopify, and our affiliates, partners, officers, directors, employees, agents, contractors, licensors, and service providers from any losses, damages, liabilities or claims, including reasonable attorneys' fees, payable to any third party due to or arising out of (1) your breach of these Terms of Service or the documents they incorporate by reference, (2) your violation of any law or the rights of a third party, or (3) your access to and use of the Services.
We will notify you of any indemnifiable claim, provided that a failure to promptly notify will not relieve you of your obligations unless you are materially prejudiced. We may control the defense and settlement of such claim at your expense, including choice of counsel, but will not settle any claim requiring non-monetary obligations from you without your consent (not to be unreasonably withheld). You will cooperate in the defense of indemnified claims, including by providing relevant documents.

SECTION 18 - SEVERABILITY
In the event that any provision of these Terms of Service is determined to be unlawful, void or unenforceable, such provision shall nonetheless be enforceable to the fullest extent permitted by applicable law, and the unenforceable portion shall be deemed to be severed from these Terms of Service, such determination shall not affect the validity and enforceability of any other remaining provisions.

SECTION 19 - WAIVER; ENTIRE AGREEMENT
The failure of us to exercise or enforce any right or provision of these Terms of Service shall not constitute a waiver of such right or provision.
These Terms of Service and any policies or operating rules posted by us on this site or in respect to the Service constitutes the entire agreement and understanding between you and us and governs your use of the Service, superseding any prior or contemporaneous agreements, communications and proposals, whether oral or written, between you and us (including, but not limited to, any prior versions of the Terms of Service).
Any ambiguities in the interpretation of these Terms of Service shall not be construed against the drafting party.

SECTION 20 - ASSIGNMENT
You may not delegate, transfer or assign this Agreement or any of your rights or obligations under these Terms without our prior written consent, and any such attempt will be null and void. We may transfer, assign, or delegate these Terms and our rights and obligations without consent or notice to you.

SECTION 21 - GOVERNING LAW
These Terms of Service and any separate agreements whereby we provide you Services shall be governed by and construed in accordance with the federal and state or territorial courts in the jurisdiction where ${he} is headquartered. You and ${he} consent to venue and personal jurisdiction in such courts.

SECTION 22 - HEADINGS
The headings used in this agreement are included for convenience only and will not limit or otherwise affect these Terms.

SECTION 23 - CHANGES TO TERMS OF SERVICE
You can review the most current version of the Terms of Service at any time on this page.
We reserve the right, in our sole discretion, to update, change, or replace any part of these Terms of Service by posting updates and changes to our website. It is your responsibility to check our website periodically for changes. We will notify you of any material changes to these Terms in accordance with applicable law, and such changes will be effective on the date specified in the notice. Your continued use of or access to the Services following the posting of any changes to these Terms of Service constitutes acceptance of those changes.

SECTION 24 - CONTACT INFORMATION
Questions about the Terms of Service should be sent to us at ${ie}.
Our contact information is posted below:
[INSERT TRADING NAME]
${ie}
[INSERT BUSINESS ADDRESS]
[INSERT BUSINESS PHONE NUMBER]
[INSERT BUSINESS REGISTRATION NUMBER]
[INSERT VAT NUMBER]`;ae(We)},[a,o,i]);return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900 mb-4",children:"Policies"}),n.jsx("div",{className:"bg-white border border-gray-200 p-4 mb-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-1",children:"Return rules"}),r&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:`inline-block px-2 py-0.5 text-xs font-medium mr-2 ${r.enabled,"bg-gray-100 text-gray-700"}`,children:r.enabled?"On":"Off"}),n.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"Enable return rules to simplify return management, set up return fees, return shipping and define final sale items"})]})]}),n.jsx("button",{className:"px-3 py-1.5 bg-gray-900 text-white text-sm hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:t,onClick:()=>s(r?"/settings/policies/manage-return-rules":"/settings/policies/manage-return-rules/new"),children:r?"Manage":"Create rule"})]})}),n.jsxs("div",{className:"bg-white border border-gray-200 mb-4",children:[n.jsxs("div",{className:"p-4 pb-3 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Written policies"}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Policies are linked in the footer of checkout and can be added to your online store menu"})]}),n.jsx("button",{className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-colors",children:n.jsx(Jd,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"border-t border-gray-200",children:[n.jsx(py,{icon:n.jsx(ou,{className:"w-4 h-4"}),label:"Return and refund policy",right:B?void 0:n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-700",children:"No policy set"}),onClick:()=>{I(B?.returnRefundPolicy||""),Oe(!0)}}),n.jsx("div",{className:"border-t border-gray-200"}),n.jsx(py,{icon:n.jsx(j2,{className:"w-4 h-4"}),label:"Privacy policy",right:N?void 0:n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-700",children:"No policy set"}),onClick:()=>{ze(N?.privacyPolicy||""),we(!0)}}),n.jsx("div",{className:"border-t border-gray-200"}),n.jsx(py,{icon:n.jsx(dB,{className:"w-4 h-4"}),label:"Terms of service",right:v?void 0:n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-700",children:"No policy set"}),onClick:()=>{ae(v?.termsPolicy||""),Z(!0)}}),n.jsx("div",{className:"border-t border-gray-200"}),n.jsx(py,{icon:n.jsx(ff,{className:"w-4 h-4"}),label:"Shipping policy",right:h?void 0:n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-700",children:"No policy set"}),onClick:()=>{xe(h?.shippingPolicy||""),se(!0)}}),n.jsx("div",{className:"border-t border-gray-200"}),n.jsx(py,{icon:n.jsx(KO,{className:"w-4 h-4"}),label:"Contact information",right:l?void 0:n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-700",children:"Required"}),onClick:()=>{P(l?.contactInfo||""),M(!0)}})]})]}),n.jsxs(en,{open:ue,onClose:()=>Oe(!1),title:"Return and refund policy",maxWidth:"lg",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>Oe(!1),className:"px-3 py-1.5 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),B?n.jsx("button",{className:`px-3 py-1.5 text-sm text-white transition-colors ${!J.trim()||J===(B?.returnRefundPolicy||"")?"bg-gray-400 cursor-not-allowed":"bg-gray-900 hover:bg-gray-800"}`,disabled:!J.trim()||J===(B?.returnRefundPolicy||""),onClick:async()=>{B?._id&&(await z(B._id,{returnRefundPolicy:J}),Oe(!1))},children:"Update"}):n.jsx("button",{className:`px-3 py-1.5 text-sm text-white transition-colors ${!J.trim()||!o?"bg-gray-400 cursor-not-allowed":"bg-gray-900 hover:bg-gray-800"}`,disabled:!J.trim()||!o,onClick:async()=>{o&&(await $({storeId:o,returnRefundPolicy:J}),Oe(!1))},children:"Publish"})]}),children:[n.jsxs("div",{className:"border border-gray-200 p-3 mb-3",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("p",{className:"text-xs text-gray-600",children:["Templates aren't legal advice. By using policy templates, you agree that you've read and agree to the"," ",n.jsxs("button",{className:"text-gray-700 hover:underline cursor-pointer",onClick:()=>re(he=>!he),children:["disclaimer ",V?"":""]})]}),n.jsx("button",{className:"px-3 py-1.5 text-xs border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",onClick:pe,children:"Insert template"})]}),V&&n.jsxs("div",{className:"border border-gray-200 p-3 mt-3 bg-gray-50",children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-2",children:"Generated policies disclaimer"}),n.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"The materials below are for informational purposes only and do not constitute advertising, a solicitation or legal advice. Automated translations from the original English versions are available for convenience only."})]})]}),n.jsxs("div",{className:"border border-gray-200",children:[n.jsx(hy,{}),n.jsx("div",{className:"p-3",children:n.jsx("textarea",{className:"w-full min-h-[200px] px-3 py-1.5 border border-gray-200 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 resize-y",placeholder:"Add your return and refund policy...",value:J,onChange:he=>I(he.target.value),rows:8})})]})]}),n.jsxs(en,{open:Y,onClose:()=>M(!1),title:"Contact information",maxWidth:"lg",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>M(!1),className:"px-3 py-1.5 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),l?n.jsx("button",{className:`px-3 py-1.5 text-sm text-white transition-colors ${!q.trim()||q===(l?.contactInfo||"")?"bg-gray-400 cursor-not-allowed":"bg-gray-900 hover:bg-gray-800"}`,disabled:!q.trim()||q===(l?.contactInfo||""),onClick:async()=>{l?._id&&(await p(l._id,{contactInfo:q}),M(!1))},children:"Update"}):n.jsx("button",{className:`px-3 py-1.5 text-sm text-white transition-colors ${!q.trim()||!o?"bg-gray-400 cursor-not-allowed":"bg-gray-900 hover:bg-gray-800"}`,disabled:!q.trim()||!o,onClick:async()=>{o&&(await d({storeId:o,contactInfo:q}),M(!1))},children:"Publish"})]}),children:[n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Contact information is required on your website if you are selling into the European Union."}),n.jsxs("div",{className:"border border-gray-200 p-3 mb-3",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("p",{className:"text-xs text-gray-600",children:["Templates aren't legal advice. By using policy templates, you agree that you've read and agree to the"," ",n.jsxs("button",{className:"text-gray-700 hover:underline cursor-pointer",onClick:()=>D(he=>!he),children:["disclaimer ",H?"":""]})]}),n.jsx("button",{className:"px-3 py-1.5 text-xs border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",onClick:ge,children:"Insert template"})]}),H&&n.jsxs("div",{className:"border border-gray-200 p-3 mt-3 bg-gray-50",children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-2",children:"Generated policies disclaimer"}),n.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"The materials below are for informational purposes only and do not constitute advertising, a solicitation or legal advice. Automated translations from the original English versions are available for convenience only."}),n.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"You should consult independent legal advice in all regions where these materials will be used before publishing them. You are solely responsible for verifying the accuracy of all content, including any translated content, and should read the generated information with care and modify, delete or add all and any areas as necessary. Use of, access to or transmission of such materials and information or any of the links contained herein is not intended to create, and receipt thereof does not constitute formation of, an attorney-client relationship between Shopify and the user or browser."}),n.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"You should not rely upon this information for any purpose without seeking legal advice from a licensed attorney in the relevant regions. The information contained is provided only as general information and may or may not reflect the most current legal developments or an accurate translation; accordingly, information is not promised or guaranteed to be correct or complete. Shopify expressly disclaims all liability in respect of any actions taken or not taken based on any or all of the contents of this website, or any inaccuracies in any of the content."}),n.jsx("p",{className:"text-xs text-gray-600",children:"Further, Shopify does not necessarily endorse and is not responsible for any thirdparty content that may be accessed through this information."})]})]}),n.jsxs("div",{className:"border border-gray-200 mb-3",children:[n.jsx(hy,{}),n.jsx("div",{className:"p-3",children:n.jsx("textarea",{className:"w-full min-h-[200px] px-3 py-1.5 border border-gray-200 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 resize-y",placeholder:"Add your contact information...",value:q,onChange:he=>P(he.target.value),rows:8})})]}),n.jsxs("div",{className:"border border-gray-200 p-3 flex items-center gap-3",children:[n.jsx("div",{className:"w-6 h-6 bg-gray-900 text-white flex items-center justify-center font-medium text-xs",children:"S"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm text-gray-900",children:"Shopify Inbox"}),n.jsx("p",{className:"text-xs text-gray-600",children:"4.7 "})]}),n.jsx("button",{className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-colors",children:n.jsx(Jd,{className:"w-4 h-4"})})]})]}),n.jsxs(en,{open:K,onClose:()=>Z(!1),title:"Terms of service",maxWidth:"lg",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>Z(!1),className:"px-3 py-1.5 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),v?n.jsx("button",{className:`px-3 py-1.5 text-sm text-white transition-colors ${!ve.trim()||ve===(v?.termsPolicy||"")?"bg-gray-400 cursor-not-allowed":"bg-gray-900 hover:bg-gray-800"}`,disabled:!ve.trim()||ve===(v?.termsPolicy||""),onClick:async()=>{v?._id&&(await k(v._id,{termsPolicy:ve}),Z(!1))},children:"Update"}):n.jsx("button",{className:`px-3 py-1.5 text-sm text-white transition-colors ${!ve.trim()||!o?"bg-gray-400 cursor-not-allowed":"bg-gray-900 hover:bg-gray-800"}`,disabled:!ve.trim()||!o,onClick:async()=>{o&&(await C({storeId:o,termsPolicy:ve}),Z(!1))},children:"Publish"})]}),children:[n.jsxs("div",{className:"border border-gray-200 p-3 mb-3",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("p",{className:"text-xs text-gray-600",children:["Templates aren't legal advice. By using policy templates, you agree that you've read and agree to the"," ",n.jsxs("button",{className:"text-gray-700 hover:underline cursor-pointer",onClick:()=>Pe(he=>!he),children:["disclaimer ",Se?"":""]})]}),n.jsx("button",{className:"px-3 py-1.5 text-xs border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",onClick:Ce,children:"Insert template"})]}),Se&&n.jsxs("div",{className:"border border-gray-200 p-3 mt-3 bg-gray-50",children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-2",children:"Generated policies disclaimer"}),n.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"The materials below are for informational purposes only and do not constitute advertising, a solicitation or legal advice. Automated translations from the original English versions are available for convenience only."}),n.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"You should consult independent legal advice in all regions where these materials will be used before publishing them. You are solely responsible for verifying the accuracy of all content, including any translated content, and should read the generated information with care and modify, delete or add all and any areas as necessary. Use of, access to or transmission of such materials and information or any of the links contained herein is not intended to create, and receipt thereof does not constitute formation of, an attorney-client relationship between Shopify and the user or browser."}),n.jsx("p",{className:"text-xs text-gray-600",children:"Further, Shopify does not necessarily endorse and is not responsible for any thirdparty content that may be accessed through this information."})]})]}),n.jsxs("div",{className:"border border-gray-200 mb-3",children:[n.jsx(hy,{}),n.jsx("div",{className:"p-3",children:n.jsx("textarea",{className:"w-full min-h-[200px] px-3 py-1.5 border border-gray-200 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 resize-y",placeholder:"Add your terms of service...",value:ve,onChange:he=>ae(he.target.value),rows:8})})]})]}),n.jsx(en,{open:X,onClose:()=>se(!1),title:"Shipping policy",maxWidth:"lg",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>se(!1),className:"px-3 py-1.5 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),h?n.jsx("button",{className:`px-3 py-1.5 text-sm text-white transition-colors ${!Q.trim()||Q===(h?.shippingPolicy||"")?"bg-gray-400 cursor-not-allowed":"bg-gray-900 hover:bg-gray-800"}`,disabled:!Q.trim()||Q===(h?.shippingPolicy||""),onClick:async()=>{h?._id&&(await b(h._id,{shippingPolicy:Q}),se(!1))},children:"Update"}):n.jsx("button",{className:`px-3 py-1.5 text-sm text-white transition-colors ${!Q.trim()||!o?"bg-gray-400 cursor-not-allowed":"bg-gray-900 hover:bg-gray-800"}`,disabled:!Q.trim()||!o,onClick:async()=>{o&&(await y({storeId:o,shippingPolicy:Q}),se(!1))},children:"Publish"})]}),children:n.jsxs("div",{className:"border border-gray-200",children:[n.jsx(hy,{}),n.jsx("div",{className:"p-3",children:n.jsx("textarea",{className:"w-full min-h-[200px] px-3 py-1.5 border border-gray-200 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 resize-y",placeholder:"Add your shipping policy...",value:Q,onChange:he=>xe(he.target.value),rows:8})})]})}),n.jsxs(en,{open:$e,onClose:()=>we(!1),title:"Privacy policy",maxWidth:"lg",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>we(!1),className:"px-3 py-1.5 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),N?n.jsx("button",{className:`px-3 py-1.5 text-sm text-white transition-colors ${!Ae.trim()||Ae===(N?.privacyPolicy||"")?"bg-gray-400 cursor-not-allowed":"bg-gray-900 hover:bg-gray-800"}`,disabled:!Ae.trim()||Ae===(N?.privacyPolicy||""),onClick:async()=>{N?._id&&(await L(N._id,{privacyPolicy:Ae}),we(!1))},children:"Update"}):n.jsx("button",{className:`px-3 py-1.5 text-sm text-white transition-colors ${!Ae.trim()||!o?"bg-gray-400 cursor-not-allowed":"bg-gray-900 hover:bg-gray-800"}`,disabled:!Ae.trim()||!o,onClick:async()=>{o&&(await R({storeId:o,privacyPolicy:Ae}),we(!1))},children:"Publish"})]}),children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Use automated policy"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Keep policy content in sync with store settings and latest Shopify templates."})]}),n.jsx("div",{className:"flex items-center",children:n.jsx("button",{className:`relative w-11 h-6 transition-colors ${Ge?"bg-gray-900":"bg-gray-300"}`,onClick:()=>Ue(!Ge),children:n.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white transition-transform ${Ge?"translate-x-5":"translate-x-0"}`})})})]}),n.jsxs("div",{className:"border border-gray-200 mb-3",children:[n.jsx(hy,{variant:"privacy"}),n.jsx("div",{className:"p-3",children:n.jsx("textarea",{className:"w-full min-h-[300px] px-3 py-1.5 border-none text-sm focus:outline-none resize-y",placeholder:"Add your privacy policy...",value:Ae,onChange:he=>ze(he.target.value),rows:12})})]}),n.jsxs("p",{className:"text-xs text-gray-600 mb-3",children:["This Privacy Policy is not legal advice, and you are responsible for ensuring its accuracy and complying with applicable laws. By using this policy you agree that you've read and agree to the"," ",n.jsxs("button",{className:"text-gray-700 hover:underline cursor-pointer",onClick:()=>ee(he=>!he),children:["disclaimer ",ht?"":""]})]}),ht&&n.jsxs("div",{className:"border border-gray-200 p-3 bg-gray-50",children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-2",children:"Generated policies disclaimer"}),n.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"The materials below are for informational purposes only and do not constitute advertising, a solicitation or legal advice. Automated translations from the original English versions are available for convenience only."}),n.jsx("p",{className:"text-xs text-gray-600",children:"You should consult independent legal advice in all regions where these materials will be used before publishing them. You are solely responsible for verifying the accuracy of all content, including any translated content, and should read the generated information with care and modify, delete or add all and any areas as necessary."})]})]})]})})},nCe=()=>{const{roleId:s}=ks(),r=dr(),{permissions:e,loading:t,error:a,fetchAll:o}=K6(),{roles:i,fetchByStoreId:l,update:c}=J2(),{activeStoreId:d}=Ur(),p=u.useMemo(()=>i.find(Q=>Q._id===s),[i,s]);u.useEffect(()=>{e.length===0&&!t&&o().catch(()=>{})},[]),u.useEffect(()=>{!p&&d&&l(d).catch(()=>{})},[d,p]);const[h,g]=u.useState(""),[y,b]=u.useState(new Set),[v,w]=u.useState(new Set),[C,k]=u.useState(""),[N,O]=u.useState(""),[R,L]=u.useState(!1);u.useEffect(()=>{p&&(k(p.name||""),O(p.description||""),w(new Set(p.permissions||[])))},[p]);const B=u.useMemo(()=>{const Q=new Map;e.forEach(Z=>{Q.set(Z.key,{key:Z.key,name:Z.name,isLeaf:Z.isLeaf??!0,parentKey:Z.parentKey??null,order:Z.order,resource:Z.resource,children:[]})});const xe=[];Q.forEach(Z=>{Z.parentKey&&Q.has(Z.parentKey)?Q.get(Z.parentKey).children.push(Z):xe.push(Z)});const K=Z=>{Z.sort((ve,ae)=>(ve.order??0)-(ae.order??0)||ve.name.localeCompare(ae.name)),Z.forEach(ve=>K(ve.children))};return K(xe),xe},[e]),G=u.useMemo(()=>{const Q=[],xe=K=>{K.isLeaf||K.children.length===0?Q.push(K.key):K.children.forEach(xe)};return B.forEach(xe),Q},[B]);u.useEffect(()=>{if(!G.length)return;const Q=new Set(G);w(xe=>{const K=new Set;return xe.forEach(Z=>{Q.has(Z)&&K.add(Z)}),K})},[G]);const $=Q=>{b(xe=>{const K=new Set(xe);return K.has(Q)?K.delete(Q):K.add(Q),K})},z=Q=>Q.isLeaf||Q.children.length===0?[Q.key]:Q.children.flatMap(z),Y=Q=>{const xe=z(Q),K=xe.filter(Z=>v.has(Z));return{total:xe.length,selected:K.length,checked:K.length===xe.length&&xe.length>0,indeterminate:K.length>0&&K.length<xe.length}},M=Q=>{const xe=z(Q);w(K=>{const Z=new Set(K);return xe.every(ae=>Z.has(ae))?xe.forEach(ae=>Z.delete(ae)):xe.forEach(ae=>Z.add(ae)),Z})},q=u.useMemo(()=>{const Q=B;if(!h.trim())return Q;const xe=h.toLowerCase(),K=Z=>{const ve=Z.name.toLowerCase().includes(xe)||Z.key.toLowerCase().includes(xe),ae=Z.children.map(K).filter(Se=>!!Se);return ve||ae.length>0?{...Z,children:ae}:null};return Q.map(K).filter(Z=>!!Z)},[B,h]),P=u.useMemo(()=>Array.from(v).sort(),[v]),H=u.useMemo(()=>p?[...p.permissions||[]].sort():[],[p]),D=u.useMemo(()=>{if(!p)return!1;const Q=C.trim()!==(p.name||""),xe=N.trim()!==(p.description||""),K=P.length!==H.length||P.some((Z,ve)=>Z!==H[ve]);return Q||xe||K},[p,C,N,H,P]),X=u.useCallback(async()=>{if(!p||!s)return;const Q=C.trim(),xe=N.trim();if(!Q){gr.dismiss(),gr.error("Role name is required");return}if(v.size===0){gr.dismiss(),gr.error("Select at least one permission");return}try{L(!0),gr.dismiss(),await c(s,{name:Q,description:xe,permissions:Array.from(v)}),gr.dismiss(),gr.success("Role updated")}catch(K){const Z=K?.response?.data?.message||K?.message||"Failed to update role";gr.dismiss(),gr.error(Z)}finally{L(!1)}},[p,s,C,N,v,c]),se=(Q,xe=0)=>{const K=Q.children.length>0,Z=Y(Q),ve=y.has(Q.key)||!K,ae=xe*1.5;return n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center py-1.5",style:{paddingLeft:`${ae}rem`},children:[K?n.jsx("button",{onClick:()=>$(Q.key),className:"p-0.5 text-gray-600 hover:text-gray-700 mr-1",children:ve?n.jsx(uf,{className:"w-4 h-4"}):n.jsx(Ys,{className:"w-4 h-4"})}):n.jsx("div",{className:"w-6 mr-1"}),n.jsx("input",{type:"checkbox",ref:Se=>{Se&&(Se.indeterminate=!Z.checked&&Z.indeterminate)},checked:Z.checked,onChange:()=>M(Q),className:"w-4 h-4 text-gray-900 focus:ring-gray-400 mr-2"}),n.jsx("span",{className:"text-sm text-gray-900",children:Q.name}),K&&n.jsxs("span",{className:"text-xs text-gray-600 ml-auto mr-2",children:[Z.selected,"/",Z.total]})]}),K&&n.jsx("div",{className:ve?"block":"hidden",children:Q.children.map(Se=>se(Se,xe+1))})]},Q.key)};return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:C||"Role"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:()=>r("/settings/users/roles"),className:"px-3 py-1.5 text-sm border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors flex items-center gap-1.5",children:[n.jsx(gn,{className:"w-4 h-4"}),"Back to roles"]}),n.jsx("button",{disabled:!D||v.size===0||!p||R,onClick:X,className:"px-3 py-1.5 text-sm text-white bg-gray-900 hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:R?"Saving":"Save"})]})]}),n.jsx("div",{className:"border border-gray-200 bg-white p-4 mb-4",children:n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Name"}),n.jsx("input",{type:"text",value:C,onChange:Q=>k(Q.target.value),className:"w-full border border-gray-200 px-3 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Description"}),n.jsx("textarea",{rows:2,value:N,onChange:Q=>O(Q.target.value),className:"w-full border border-gray-200 px-3 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 resize-y"})]})]})}),n.jsxs("div",{className:"border border-gray-200 bg-white p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-1",children:"Permissions"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Selected permissions for this role."}),t&&n.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[n.jsx("div",{className:"w-4 h-4 border-2 border-gray-300 border-t-gray-900 rounded-full animate-spin"}),n.jsx("span",{className:"text-sm",children:"Loading permissions"})]}),a&&n.jsx("p",{className:"text-sm text-red-600",children:a}),!t&&!a&&n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx(no,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-600"}),n.jsx("input",{type:"text",placeholder:"Search",value:h,onChange:Q=>g(Q.target.value),className:"w-full border border-gray-200 bg-gray-50 pl-10 pr-3 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsx("div",{children:q.map(Q=>se(Q))})]})]})]})})},sCe=()=>{const s=dr(),{roles:r,loading:e,fetchByStoreId:t}=J2(),{activeStoreId:a}=Ur(),o=pt.useMemo(()=>r.map(y=>({id:y._id,name:y.name,users:0})),[r]),[i,l]=pt.useState({});u.useEffect(()=>{a&&t(a).catch(()=>{})},[a]);const c=y=>{l(b=>({...b,[y]:!b[y]}))},d=()=>{const y=o.every(v=>i[v.id]),b={};o.forEach(v=>{b[v.id]=!y}),l(b)},p=o.filter(y=>i[y.id]).length,h=o.length>0&&p===o.length,g=o.length>0&&p>0&&p<o.length;return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Roles"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{className:"px-3 py-1.5 text-sm border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors flex items-center gap-1.5",children:[n.jsx(g2,{className:"w-4 h-4"}),"Export"]}),n.jsxs("button",{onClick:()=>s("/settings/users/roles/new"),className:"px-3 py-1.5 text-sm text-white bg-gray-900 hover:bg-gray-800 transition-colors flex items-center gap-1.5",children:[n.jsx(On,{className:"w-4 h-4"}),"Add role"]})]})]}),n.jsxs("div",{className:"border border-gray-200 bg-white",children:[n.jsxs("div",{className:"flex items-center gap-2 p-3",children:[n.jsx("button",{className:"px-3 py-1 text-xs border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"All"}),n.jsx("div",{className:"flex-1"}),n.jsx("button",{className:"p-1 text-gray-600 hover:text-gray-700 hover:bg-gray-50 transition-colors",children:n.jsx(no,{className:"w-4 h-4"})}),n.jsx("button",{className:"p-1 text-gray-600 hover:text-gray-700 hover:bg-gray-50 transition-colors",children:n.jsx(y2,{className:"w-4 h-4"})})]}),n.jsx("hr",{className:"border-gray-200"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-white border-b border-gray-200",children:[n.jsx("th",{className:"w-12 px-3 py-2 text-left",children:n.jsx("input",{type:"checkbox",ref:y=>{y&&(y.indeterminate=g)},checked:h,onChange:d,className:"w-4 h-4 text-gray-900 focus:ring-gray-400","aria-label":"select all roles"})}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-900",children:"Name"}),n.jsx("th",{className:"px-3 py-2 text-right text-sm font-medium text-gray-900",children:"Users"})]})}),n.jsxs("tbody",{children:[e&&n.jsx("tr",{children:n.jsx("td",{colSpan:3,className:"px-3 py-4 text-sm text-gray-600 text-center",children:"Loading..."})}),!e&&o.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:3,className:"px-3 py-4 text-sm text-gray-600 text-center",children:"Currently you have no roles added."})}),!e&&o.length>0&&o.map(y=>n.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>s(`/settings/users/roles/${y.id}`),children:[n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"checkbox",checked:!!i[y.id],onChange:()=>c(y.id),onClick:b=>b.stopPropagation(),className:"w-4 h-4 text-gray-900 focus:ring-gray-400","aria-label":`select role ${y.name}`})}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:y.name}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900 text-right",children:y.users})]},y.id))]})]})}),n.jsx("div",{className:"p-3 text-center border-t border-gray-200",children:n.jsxs("p",{className:"text-xs text-gray-600",children:["Learn more about ",n.jsx("a",{href:"#",className:"text-gray-700 hover:underline",children:"roles"})]})})]})]})})},GD=({title:s="Settings"})=>n.jsxs(cr,{sx:{p:3},children:[n.jsx(Bt,{variant:"h4",sx:{mb:3,fontWeight:600},children:s}),n.jsx(Ms,{sx:{p:3},children:n.jsx(Bt,{variant:"body1",color:"text.secondary",children:"This settings section is not implemented yet."})})]}),aCe=()=>n.jsx(GD,{title:"General"});function oCe({onBack:s}){return n.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("button",{onClick:s,className:"cursor-pointer mr-2 p-1.5 text-gray-500 hover:bg-black/5 hover:text-gray-700 rounded transition-colors","aria-label":"Go back",children:n.jsx(gn,{className:"w-4 h-4"})}),n.jsx("h2",{className:"text-sm font-medium text-gray-700",children:"Settings"})]})})}function iCe({child:s,isActive:r,onChildClick:e}){return n.jsx("li",{children:n.jsx("button",{onClick:()=>e(s.path),className:`w-full flex items-center gap-2 px-3 py-1.5 pl-10 text-gray-600 hover:bg-gray-50 transition-colors text-left ${r?"bg-gray-50 text-gray-900":""}`,children:n.jsx("span",{className:"text-xs",children:s.text})})})}function lCe({children:s,isActivePath:r,onChildClick:e}){return n.jsx("ul",{className:"p-0 m-0 list-none",children:s.map(t=>{const a=r(t.path);return n.jsx(iCe,{child:t,isActive:a,onChildClick:e},t.path)})})}function cCe({item:s,isCurrentPath:r,isExpanded:e,hasChildren:t,onItemClick:a,onChildClick:o,isActivePath:i}){const l=s.icon;return n.jsxs("li",{children:[n.jsxs("button",{onClick:()=>a(s),className:`w-full flex items-center gap-3 px-4 py-2.5 text-gray-700 hover:bg-gray-50 transition-colors text-left ${r?"bg-gray-50":""}`,children:[n.jsx(l,{className:"w-4 h-4 shrink-0"}),n.jsx("span",{className:"flex-1 text-sm font-medium",children:s.text}),t&&n.jsx("span",{className:"shrink-0",children:e?n.jsx(uf,{className:"w-4 h-4 text-gray-500"}):n.jsx(Ys,{className:"w-4 h-4 text-gray-500"})})]}),t&&n.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${e?"max-h-[1000px] opacity-100":"max-h-0 opacity-0"}`,children:n.jsx(lCe,{children:s.children,isActivePath:i,onChildClick:o})})]})}function dCe({items:s,currentPath:r,expanded:e,isActivePath:t,onItemClick:a,onChildClick:o}){return n.jsx("ul",{className:"p-0 m-0 list-none",children:s.map(i=>{const l=Array.isArray(i.children)&&i.children.length>0,c=i.path||i.text,d=l?i.children.some(g=>t(g.path)):!1,p=l&&(d||!!i.path&&r.startsWith(`${i.path}/`))||t(i.path),h=l?e[c]??d:!1;return n.jsx(cCe,{item:i,isCurrentPath:p,isExpanded:h,hasChildren:l,onItemClick:a,onChildClick:o,isActivePath:t},c)})})}const uCe=240,lO=[{text:"General",icon:v2,path:"/settings/general"},{text:"Plan",icon:XO,path:"/settings/plan"},{text:"Billing",icon:ob,path:"/settings/billing"},{text:"Users",icon:qy,path:"/settings/users",children:[{text:"Roles",icon:KO,path:"/settings/users/roles"},{text:"Security",icon:j2,path:"/settings/users/security"}]},{text:"Payments",icon:ob,path:"/settings/payments"},{text:"Checkout",icon:Am,path:"/settings/checkout"},{text:"Customer Accounts",icon:CB,path:"/settings/customer-accounts"},{text:"Shipping and delivery",icon:ff,path:"/settings/shipping-and-delivery"},{text:"Taxes and duties",icon:Qd,path:"/settings/taxes-and-duties"},{text:"Locations",icon:kp,path:"/settings/locations"},{text:"Markets",icon:Do,path:"/settings/markets"},{text:"Domains",icon:ib,path:"/settings/domains"},{text:"Customer Events",icon:Ww,path:"/settings/customer-events"},{text:"Notifications",icon:wx,path:"/settings/notifications"},{text:"Metafields and metaobjects",icon:x2,path:"/settings/metafields-and-metaobjects"},{text:"Languages",icon:ib,path:"/settings/languages"},{text:"Customer Privacy",icon:C2,path:"/settings/customer-privacy"},{text:"Policies",icon:Qd,path:"/settings/policies"}];function fCe({currentPath:s,onNavigate:r,onBack:e}){const t=u.useMemo(()=>{const p={};return lO.forEach(h=>{if(h.children){const g=h.children.some(b=>b.path===s),y=h.path&&s.startsWith(h.path);p[h.path||h.text]=g||!!y}}),p},[s]),[a,o]=u.useState(t);u.useEffect(()=>{o(t)},[t]);const i=u.useCallback(p=>!!p&&s===p,[s]),l=u.useCallback(p=>{o(h=>({...h,[p]:!h[p]}))},[]),c=u.useCallback(p=>{p.children&&p.children.length>0&&l(p.path||p.text),p.path&&r(p.path)},[l,r]),d=u.useCallback(p=>{p&&r(p)},[r]);return n.jsxs("aside",{className:"fixed bg-white border-r border-gray-200 left-0 top-[60px] h-[calc(100vh-60px)] w-[240px] flex flex-col shrink-0 z-50",style:{width:`${uCe}px`},children:[n.jsx(oCe,{onBack:e}),n.jsx("nav",{className:"flex-1 overflow-y-auto",children:n.jsx(dCe,{items:lO,currentPath:s,expanded:a,isActivePath:i,onItemClick:c,onChildClick:d})})]})}const pCe=60,hCe=()=>{const s=Ri(),r=dr(),e=s.pathname,t=u.useCallback(o=>{r(o)},[r]),a=u.useCallback(()=>{r("/")},[r]);return n.jsxs("div",{style:{minHeight:`calc(100vh - ${pCe}px)`},children:[n.jsx(fCe,{currentPath:e,onNavigate:t,onBack:a}),n.jsx("main",{className:"overflow-y-auto w-full",children:n.jsx(l8,{})})]})},mCe=({open:s,onClose:r,formData:e,onFormChange:t,onSubmit:a})=>{const o=[{value:"box",label:"Box"},{value:"envelope",label:"Envelope"},{value:"soft_package",label:"Soft Package"}],i=[{value:"cm",label:"Centimeters (cm)"},{value:"in",label:"Inches (in)"}],l=[{value:"g",label:"Grams (g)"},{value:"kg",label:"Kilograms (kg)"},{value:"oz",label:"Ounces (oz)"},{value:"lb",label:"Pounds (lb)"}];return n.jsx(en,{open:s,onClose:r,title:n.jsxs("div",{className:"flex justify-between items-center w-full",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Add New Package"}),n.jsx("button",{onClick:r,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:n.jsx(Zs,{className:"w-5 h-5"})})]}),maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:a,className:"px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition-colors",children:"Add Package"})]}),children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Package Name"}),n.jsx("input",{type:"text",value:e.packageName,onChange:c=>t("packageName",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900",required:!0})]}),n.jsx("div",{children:n.jsx(Va,{label:"Package Type",value:e.packageType,options:o,onChange:c=>t("packageType",c),placeholder:"Select package type"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Dimensions"}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Length"}),n.jsx("input",{type:"number",value:e.length,onChange:c=>t("length",c.target.value),min:"0",step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Width"}),n.jsx("input",{type:"number",value:e.width,onChange:c=>t("width",c.target.value),min:"0",step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900",required:!0})]}),e.packageType!=="envelope"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Height"}),n.jsx("input",{type:"number",value:e.height,onChange:c=>t("height",c.target.value),min:"0",step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900",required:!0})]})]}),n.jsx("div",{className:"mt-4",children:n.jsx(Va,{label:"Unit",value:e.dimensionsUnit,options:i,onChange:c=>t("dimensionsUnit",c),placeholder:"Select unit"})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Weight"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Weight"}),n.jsx("input",{type:"number",value:e.weight,onChange:c=>t("weight",c.target.value),min:"0",step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900",required:!0})]}),n.jsx("div",{children:n.jsx(Va,{label:"Unit",value:e.weightUnit,options:l,onChange:c=>t("weightUnit",c),placeholder:"Select unit"})})]})]}),n.jsx("div",{children:n.jsx(mo,{checked:e.isDefault,onChange:c=>t("isDefault",c),label:"Set as default package"})})]})})},gCe=({onAddClick:s})=>n.jsxs("div",{className:"bg-white/95 border border-gray-200 p-4 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Custom order fulfillment"}),n.jsx(Ps,{className:"w-4 h-4 text-gray-500"})]}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Add an email for a custom fulfillment service that fulfills orders for you"}),n.jsxs("button",{onClick:s,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 bg-gray-50 text-gray-700 hover:bg-gray-100 transition-colors flex items-center gap-2",children:[n.jsx(On,{className:"w-4 h-4"}),"Add fulfillment service"]})]}),yCe=({open:s,onClose:r,onConfirm:e,packageName:t})=>n.jsx(en,{open:s,onClose:r,title:"Delete Package",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"No, Cancel"}),n.jsx("button",{onClick:e,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:"Yes, Delete"})]}),children:n.jsxs("div",{children:[n.jsxs("p",{className:"text-base text-gray-900",children:["Do you really want to delete this package ",n.jsxs("strong",{children:['"',t,'"']}),"?"]}),n.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"This action cannot be undone."})]})}),xCe=({onAddClick:s})=>n.jsxs("div",{className:"bg-white/95 border border-gray-200 p-4 mb-4",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-1",children:"Delivery customizations"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Customizations control how delivery options appear to buyers at checkout. You can hide, reorder, and rename delivery options."})]}),n.jsxs("button",{onClick:s,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors flex items-center gap-2",children:[n.jsx(On,{className:"w-4 h-4"}),"Add delivery customization"]})]}),vCe=({estimatedDeliveryMode:s,onEstimatedDeliveryClick:r,onShopPromiseClick:e})=>{const t=()=>s==="manual"?"Manual":"Off";return n.jsxs("div",{className:"bg-white/95 border border-gray-200 p-4 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Delivery expectations"}),n.jsx(Ps,{className:"w-4 h-4 text-gray-500"})]}),n.jsxs("div",{onClick:r,className:"flex justify-between items-center pb-4 cursor-pointer hover:bg-gray-50 transition-colors -mx-4 px-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Estimated delivery dates"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Increase conversion and build trust with delivery dates on your store."})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`px-2 py-0.5 text-xs font-medium border border-gray-200 ${s==="manual"?"bg-gray-100 text-gray-900":"bg-white text-gray-600"}`,children:t()}),n.jsx(As,{className:"w-4 h-4 text-gray-500"})]})]}),n.jsx("div",{className:"border-t border-gray-200"}),n.jsxs("div",{onClick:e,className:"flex justify-between items-center pt-4 cursor-pointer hover:bg-gray-50 transition-colors -mx-4 px-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Shop Promise"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Highlight that you're an exceptional shipper with dates backed by a badge and guarantee."})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-700 text-xs font-medium border border-gray-200",children:"Off"}),n.jsx(As,{className:"w-4 h-4 text-gray-500"})]})]})]})},bCe=({open:s,onClose:r,formData:e,onFormChange:t,onSubmit:a})=>{const o=[{value:"box",label:"Box"},{value:"envelope",label:"Envelope"},{value:"soft_package",label:"Soft Package"}],i=[{value:"cm",label:"Centimeters (cm)"},{value:"in",label:"Inches (in)"}],l=[{value:"g",label:"Grams (g)"},{value:"kg",label:"Kilograms (kg)"},{value:"oz",label:"Ounces (oz)"},{value:"lb",label:"Pounds (lb)"}];return n.jsx(en,{open:s,onClose:r,title:n.jsxs("div",{className:"flex justify-between items-center w-full",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Edit Package"}),n.jsx("button",{onClick:r,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:n.jsx(Zs,{className:"w-5 h-5"})})]}),maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:a,className:"px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition-colors",children:"Save Changes"})]}),children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Package Name"}),n.jsx("input",{type:"text",value:e.packageName,onChange:c=>t("packageName",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900",required:!0})]}),n.jsx("div",{children:n.jsx(Va,{label:"Package Type",value:e.packageType,options:o,onChange:c=>t("packageType",c),placeholder:"Select package type"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Dimensions"}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Length"}),n.jsx("input",{type:"number",value:e.length,onChange:c=>t("length",c.target.value),min:"0",step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Width"}),n.jsx("input",{type:"number",value:e.width,onChange:c=>t("width",c.target.value),min:"0",step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900",required:!0})]}),e.packageType!=="envelope"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Height"}),n.jsx("input",{type:"number",value:e.height,onChange:c=>t("height",c.target.value),min:"0",step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900",required:e.packageType!=="envelope"})]})]}),n.jsx("div",{className:"mt-4",children:n.jsx(Va,{label:"Unit",value:e.dimensionsUnit,options:i,onChange:c=>t("dimensionsUnit",c),placeholder:"Select unit"})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Weight"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Weight"}),n.jsx("input",{type:"number",value:e.weight,onChange:c=>t("weight",c.target.value),min:"0",step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900",required:!0})]}),n.jsx("div",{children:n.jsx(Va,{label:"Unit",value:e.weightUnit,options:l,onChange:c=>t("weightUnit",c),placeholder:"Select unit"})})]})]}),n.jsx("div",{children:n.jsx(mo,{checked:e.isDefault,onChange:c=>t("isDefault",c),label:"Set as default package"})})]})})},wCe=({open:s,onClose:r,estimatedDeliveryMode:e,onEstimatedDeliveryModeChange:t,estimatedFulfillmentTime:a,onEstimatedFulfillmentTimeChange:o,estimatedCustomTime:i,onEstimatedCustomTimeChange:l,estimatedCustomUnit:c,onEstimatedCustomUnitChange:d,onSave:p})=>{const h=[{value:"same-business-day",label:"Same business day"},{value:"next-business-day",label:"Next business day"},{value:"two-business-days",label:"2 business days"},{value:"custom",label:"Custom"}],g=[{value:"business-days",label:"business days"},{value:"weeks",label:"weeks"}];return n.jsx(en,{open:s,onClose:r,title:"Estimated delivery dates",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-900 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:p,className:"px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition-colors",children:"Save"})]}),children:n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"border border-gray-200 rounded-lg p-5 mb-6",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",checked:!0,readOnly:!0,className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-900"}),n.jsx("span",{className:"text-base font-semibold text-gray-900",children:"Standard"})]}),n.jsx("p",{className:"text-sm text-gray-600 ml-7 mt-1",children:"Tuesday, May 27Friday, May 30"})]}),n.jsx("p",{className:"font-semibold text-gray-900",children:"10.00"})]})}),n.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",checked:e==="off",onChange:()=>t("off"),className:"mt-1 w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-900"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-base font-semibold text-gray-900",children:"Off"}),n.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Only shows transit time or custom descriptions based on your"," ",n.jsx("a",{href:"#",className:"text-blue-600 hover:underline",children:"shipping rates"})]})]})]}),n.jsx("div",{className:"border-t border-gray-200 my-2"}),n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",checked:e==="manual",onChange:()=>t("manual"),className:"mt-1 w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-900"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-base font-semibold text-gray-900",children:"Manual"}),n.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Shows a delivery date range by adding your fulfillment time to the"," ",n.jsx("a",{href:"#",className:"text-blue-600 hover:underline",children:"transit time"})]})]})]})]})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Fulfillment time"}),n.jsx(Va,{label:"",value:a,options:h,onChange:o,disabled:e!=="manual",placeholder:"Select fulfillment time"})]}),e==="manual"&&a==="custom"&&n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mt-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Custom time"}),n.jsx("input",{type:"text",value:i,onChange:y=>l(y.target.value.replace(/[^0-9]/g,"")),placeholder:"Enter number",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900"})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Unit"}),n.jsx(Va,{label:"",value:c,options:g,onChange:y=>d(y),placeholder:"Select unit"})]})]}),n.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"Used to calculate manual dates"})]})})},jCe=({loading:s,creating:r,hasSettings:e,onButtonClick:t})=>{const a=()=>s||r?"Loading...":e?"Manage":"Set up";return n.jsx("div",{className:"bg-white/95 border border-gray-200 p-4 mb-4",children:n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Local delivery"}),n.jsx(Ps,{className:"w-4 h-4 text-gray-500"})]}),n.jsx("p",{className:"text-xs text-gray-600",children:"Deliver orders to customers directly from your locations"})]}),n.jsx("button",{disabled:s||r,onClick:t,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:a()})]})})},CCe=({open:s,onClose:r,onConfirm:e,creating:t})=>{const a=()=>{t||r()};return n.jsx(en,{open:s,onClose:a,title:"Enable local delivery?",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,disabled:t,className:"px-4 py-2 text-gray-700 rounded-md hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"No"}),n.jsx("button",{onClick:e,disabled:t,className:"px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Yes"})]}),children:n.jsx("p",{className:"text-base text-gray-900",children:"Do you really want to set up local delivery for this store?"})})},SCe=({activeRulesCount:s=3,onRoutingRulesClick:r})=>n.jsxs("div",{className:"bg-white/95 border border-gray-200 p-4 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Order routing"}),n.jsx(Ps,{className:"w-4 h-4 text-gray-500"})]}),n.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Manage how locations are assigned to new orders"}),n.jsxs("div",{onClick:r,className:"p-3 border border-gray-200 bg-white cursor-pointer hover:bg-gray-50 transition-colors flex justify-between items-center",children:[n.jsxs("p",{className:"text-sm text-gray-900 font-medium",children:[s," routing rules active"]}),n.jsx(As,{className:"w-4 h-4 text-gray-500"})]})]}),NCe=({anchorEl:s,open:r,onClose:e,onEdit:t,onDelete:a})=>n.jsxs(t_,{anchorEl:s,open:r,onClose:e,children:[n.jsx(Np,{onClick:t,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Bo,{className:"w-4 h-5 text-gray-500"}),n.jsx("span",{children:"Edit"})]})}),n.jsx(Np,{onClick:a,children:n.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[n.jsx(Xs,{className:"w-4 h-5"}),n.jsx("span",{children:"Delete"})]})})]}),kCe=({package:s,index:r,totalPackages:e,onMenuOpen:t})=>n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between py-4",children:[n.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[n.jsx(ff,{className:"w-6 h-6 text-gray-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-base font-medium text-gray-900 mb-1",children:s.packageName}),n.jsxs("p",{className:"text-sm text-gray-600",children:[s.length,"  ",s.width,"  ",s.height," ",s.dimensionsUnit,", ",s.weight," ",s.weightUnit]})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[s.isDefault&&n.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs font-normal rounded",children:"Store default"}),n.jsx("button",{onClick:a=>t(a,s._id),className:"p-1 text-gray-500 hover:bg-gray-100 rounded transition-colors",children:n.jsx(w2,{className:"w-5 h-5"})})]})]}),r<e-1&&n.jsx("div",{className:"border-t border-gray-200"})]}),_Ce=({packages:s,onMenuOpen:r})=>s.length===0?null:n.jsx("div",{children:s.map((e,t)=>n.jsx(kCe,{package:e,index:t,totalPackages:s.length,onMenuOpen:r},e._id))}),ECe=({packages:s,onMenuOpen:r,onAddPackage:e})=>s.length===0?null:n.jsxs("div",{children:[n.jsx(_Ce,{packages:s,onMenuOpen:r}),n.jsx("div",{className:"border-t border-gray-200 my-2"}),n.jsxs("button",{onClick:e,className:"flex items-center gap-2 py-3 text-blue-600 hover:bg-gray-50 rounded transition-colors w-full",children:[n.jsx(On,{className:"w-5 h-5"}),n.jsx("span",{className:"text-base font-normal",children:"Add package"})]})]}),TCe=({onSetUpClick:s})=>n.jsx("div",{className:"bg-white/95 border border-gray-200 p-4 mb-4",children:n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Pickup in store"}),n.jsx(Ps,{className:"w-4 h-4 text-gray-500"})]}),n.jsx("p",{className:"text-xs text-gray-600",children:"Let customers pick up their orders at your locations"})]}),n.jsx("button",{onClick:s,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Set up"})]})}),OCe=({open:s,onClose:r,rateShippingFrom:e,onRateShippingFromChange:t,rateShippingSearch:a,onRateShippingSearchChange:o,ratePackageId:i,onRatePackageIdChange:l,rateWeight:c,onRateWeightChange:d,rateWeightUnit:p,onRateWeightUnitChange:h,packagings:g})=>{const y=[{value:"shop-location",label:"Shop location"},{value:"custom-origin",label:"Custom origin"}],b=[{value:"lb",label:"lb"},{value:"kg",label:"kg"}],v=g.length===0?[{value:"",label:"No packages available"}]:g.map(w=>({value:w._id,label:`${w.packageName}  ${w.length}  ${w.width}  ${w.height} ${w.dimensionsUnit}, ${w.weight} ${w.weightUnit}`}));return n.jsx(en,{open:s,onClose:r,title:"Shipping rate calculator",maxWidth:"md",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-900 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{disabled:!0,className:"px-4 py-2 bg-gray-300 text-gray-500 rounded-md cursor-not-allowed",children:"Calculate discounted rates"})]}),children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[n.jsxs("div",{className:"flex-1 space-y-6",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Shipping from"}),n.jsx(Va,{label:"",value:e,options:y,onChange:t,placeholder:"Select origin"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Shipping to"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-lg",children:""}),n.jsx("input",{type:"text",value:a,onChange:w=>o(w.target.value),placeholder:"Search destination",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900"})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Package"}),n.jsx(Va,{label:"",value:i||"",options:v,onChange:l,placeholder:"Select package"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Total weight"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:c,onChange:w=>d(w.target.value.replace(/[^0-9.]/g,"")),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900"}),n.jsx(Va,{label:"",value:p,options:b,onChange:w=>h(w),placeholder:"Unit"})]})]})]}),n.jsx("div",{className:"flex-1 md:flex-[0.8] md:border-l md:border-gray-100 md:pl-6 flex items-center justify-center text-center text-gray-600",children:"Calculate how much you'll save when you buy labels at discounted rates from Ziplofy"})]})})},PCe=({onCustomizeStoreNameClick:s,onPackingSlipTemplateClick:r})=>n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4 mb-4",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-3",children:"Shipping documents"}),n.jsxs("div",{children:[n.jsxs("div",{onClick:s,className:"flex justify-between items-center py-2 cursor-pointer hover:bg-gray-50 transition-colors",children:[n.jsx("p",{className:"text-xs text-gray-900",children:"Customize store name on shipping labels"}),n.jsx(As,{className:"w-4 h-4 text-gray-500"})]}),n.jsx("div",{className:"border-t border-gray-200"}),n.jsxs("div",{onClick:r,className:"flex justify-between items-center py-2 cursor-pointer hover:bg-gray-50 transition-colors",children:[n.jsx("p",{className:"text-xs text-gray-900",children:"Packing slip template"}),n.jsx(As,{className:"w-4 h-4 text-gray-500"})]})]})]}),ACe=({onCalculateRatesClick:s})=>n.jsx("div",{className:"border border-gray-200 bg-white/95 p-4 mb-4",children:n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Shipping labels"}),n.jsx(Ps,{className:"w-4 h-4 text-gray-500"})]}),n.jsx("p",{className:"text-xs text-gray-600",children:"Buy labels with the lowest rates. Manage your carriers to fulfill orders faster."})]}),n.jsxs("button",{onClick:s,className:"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors flex items-center gap-2",children:[n.jsx(sF,{className:"w-4 h-4"}),"Calculate rates"]})]})}),MCe=({profileId:s,profileName:r,onClick:e})=>n.jsxs("div",{onClick:e,className:"p-3 mb-3 border border-gray-200 cursor-pointer hover:bg-gray-50 transition-colors flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[n.jsx(_p,{className:"w-4 h-4 text-gray-500"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:r})]}),n.jsx(As,{className:"w-4 h-4 text-gray-500"})]},s),ICe=({profiles:s})=>{const r=dr();return s.length===0?null:n.jsx("div",{className:"mb-4",children:s.map(e=>n.jsx(MCe,{profileId:e._id,profileName:e.profileName,onClick:()=>r(`/settings/shipping-and-delivery/profiles/${e._id}`)},e._id))})},RCe=({open:s,onClose:r,splitShipping:e,onSplitShippingChange:t,onSave:a})=>n.jsx(en,{open:s,onClose:r,title:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Split shipping in checkout"}),n.jsx(Ps,{className:"w-5 h-5 text-gray-400"})]}),maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-900 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:a,className:"px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition-colors",children:"Save"})]}),children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:e,onChange:o=>t(o.target.checked),className:"mt-1 w-4 h-4 text-gray-900 border-gray-300 rounded focus:ring-gray-900"}),n.jsx("div",{children:n.jsx("p",{className:"text-base font-semibold text-gray-900",children:"Show split shipping in checkout"})})]}),n.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:"Shipping is split when products in an order are fulfilled from different locations or belong to separate shipping profiles. Customers will be able to select the shipping method for each shipment separately."})]})}),DCe=({splitShipping:s,onToggle:r,onManage:e})=>n.jsx("div",{className:"mt-4 border border-gray-200 bg-white/95 px-4 py-3",children:n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Split shipping"}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Show products from different profiles or locations as separate shipments in checkout."})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:r,className:`px-2 py-1 text-xs font-medium transition-colors border border-gray-200 ${s?"bg-gray-100 text-gray-900":"bg-white text-gray-600 hover:bg-gray-50"}`,children:s?"On":"Off"}),n.jsx("button",{onClick:t=>{t.preventDefault(),e()},className:"text-gray-700 hover:text-gray-900 text-xs transition-colors",children:"Manage"})]})]})}),LCe=({onUpgradeClick:s,onLearnMoreClick:r})=>n.jsx("div",{className:"bg-white/95 border border-gray-200 p-4 mb-4",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-1",children:"Enable third-party calculated rates at checkout"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Connect your existing shipping carrier account to use your own rates"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:s,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 bg-gray-50 text-gray-700 hover:bg-gray-100 transition-colors",children:"Upgrade your plan"}),n.jsx("a",{href:"#",onClick:e=>{r&&(e.preventDefault(),r())},className:"text-gray-700 hover:text-gray-900 text-xs transition-colors",children:"Learn more"})]})]}),n.jsx("div",{className:"ml-4 w-16 h-16 flex items-center justify-center shrink-0",children:n.jsx(ff,{className:"w-12 h-12 text-gray-400"})})]})}),KD=u.createContext(void 0),FCe=({children:s})=>{const[r,e]=u.useState(null),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async h=>{a(!0),i(null);try{const{data:g}=await nt.get(`/local-delivery-settings/store/${h}`);return e(g.data),g.data}catch(g){const y=g?.response?.data?.message||"Failed to fetch local delivery settings";if(i(y),g?.response?.status===404)return e(null),null;throw g}finally{a(!1)}},[]),c=u.useCallback(async h=>{a(!0),i(null);try{const{data:g}=await nt.post("/local-delivery-settings",h);return e(g.data),g.data}catch(g){const y=g?.response?.data?.message||"Failed to create local delivery settings";throw i(y),g}finally{a(!1)}},[]),d=u.useCallback(()=>{e(null),i(null),a(!1)},[]),p={settings:r,loading:t,error:o,fetchLocalDeliverySettingsByStoreId:l,createLocalDeliverySettings:c,clearState:d};return n.jsx(KD.Provider,{value:p,children:s})},BCe=()=>{const s=u.useContext(KD);if(!s)throw new Error("useLocalDeliverySettings must be used within a LocalDeliverySettingsProvider");return s},YD=u.createContext(void 0),zCe=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),[l,c]=u.useState(0),d=u.useCallback(async v=>{a(!0),i(null);try{const w=await nt.post("/shipping-profiles",v);if(w.data.success){const C=w.data.data;return e(k=>[C,...k]),c(k=>k+1),C}else throw new Error(w.data.message||"Failed to create shipping profile")}catch(w){const C=w.response?.data?.message||w.message||"Failed to create shipping profile";throw i(C),new Error(C)}finally{a(!1)}},[]),p=u.useCallback(async v=>{a(!0),i(null);try{const w=await nt.get(`/shipping-profiles/store/${v}`);if(w.data.success){const C=w.data.data;return e(C),c(w.data.meta?.total||C.length),C}else throw new Error(w.data.message||"Failed to fetch shipping profiles")}catch(w){const C=w.response?.data?.message||w.message||"Failed to fetch shipping profiles";throw i(C),e([]),c(0),new Error(C)}finally{a(!1)}},[]),h=u.useCallback(async(v,w)=>{a(!0),i(null);try{if(!w.profileName||!w.profileName.trim())throw new Error("profileName is required");const C=await nt.put(`/shipping-profiles/${v}`,w);if(C.data.success){const k=C.data.data;return e(N=>N.map(O=>O._id===v?k:O)),k}else throw new Error(C.data.message||"Failed to update shipping profile")}catch(C){const k=C.response?.data?.message||C.message||"Failed to update shipping profile";throw i(k),new Error(k)}finally{a(!1)}},[]),g=u.useCallback(async v=>{a(!0),i(null);try{const w=await nt.delete(`/shipping-profiles/${v}`);if(!w.data.success)throw new Error(w.data.message||"Failed to delete shipping profile");const C=w.data.data.deletedId;return e(k=>k.filter(N=>N._id!==C)),c(k=>Math.max(0,k-1)),C}catch(w){const C=w.response?.data?.message||w.message||"Failed to delete shipping profile";throw i(C),new Error(C)}finally{a(!1)}},[]),y=u.useCallback(()=>{e([]),c(0),i(null)},[]),b=u.useMemo(()=>({shippingProfiles:r,loading:t,error:o,total:l,createShippingProfile:d,updateShippingProfile:h,deleteShippingProfile:g,getShippingProfilesByStoreId:p,clearShippingProfiles:y}),[r,t,o,l,d,h,g,p,y]);return n.jsx(YD.Provider,{value:b,children:s})},r_=()=>{const s=u.useContext(YD);if(s===void 0)throw new Error("useShippingProfiles must be used within a ShippingProfileProvider");return s},$Ce=()=>{const s=dr(),{packagings:r,createPackaging:e,updatePackaging:t,deletePackaging:a}=rj(),{activeStoreId:o}=Ur(),{shippingProfiles:i,getShippingProfilesByStoreId:l}=r_(),{settings:c,fetchLocalDeliverySettingsByStoreId:d,loading:p,createLocalDeliverySettings:h}=BCe(),[g,y]=u.useState(!1),[b,v]=u.useState(!1),[w,C]=u.useState(null),[k,N]=u.useState(!1),[O,R]=u.useState(null),[L,B]=u.useState(!0),[G,$]=u.useState(null),[z,Y]=u.useState(null),[M,q]=u.useState(!1),[P,H]=u.useState(!1),[D,X]=u.useState("shop-location"),[se,Q]=u.useState("IN"),[xe,K]=u.useState(""),[Z,ve]=u.useState(null),[ae,Se]=u.useState("1"),[Pe,$e]=u.useState("lb"),[we,Ae]=u.useState(!1),[ze,Ge]=u.useState("manual"),[Ue,ht]=u.useState("next-business-day"),[ee,ue]=u.useState(""),[Oe,J]=u.useState("business-days"),[I,V]=u.useState(!1),[re,pe]=u.useState(!1),ge=u.useCallback(()=>{p||(c?._id?s(`/settings/shipping-and-delivery/local_deliveries/${c._id}`):V(!0))},[p,c,s]),Ce=u.useCallback(async()=>{if(o)try{pe(!0),await h({storeId:o}),V(!1)}catch(xt){console.error("Failed to create local delivery settings:",xt)}finally{pe(!1)}},[o,h]),[he,ie]=u.useState({packageName:"",packageType:"box",length:"",width:"",height:"",dimensionsUnit:"cm",weight:"",weightUnit:"kg",isDefault:!1}),Fe=u.useCallback(()=>{y(!0),ie({packageName:"",packageType:"box",length:"",width:"",height:"",dimensionsUnit:"cm",weight:"",weightUnit:"kg",isDefault:!1})},[]),We=u.useCallback(()=>y(!1),[]),Qe=u.useCallback((xt,Xt)=>{ie(br=>({...br,[xt]:Xt}))},[]),de=u.useCallback(async()=>{if(!o)return;const xt={storeId:o,packageName:he.packageName,packageType:he.packageType,length:parseFloat(he.length),width:parseFloat(he.width),height:he.packageType==="envelope"?0:parseFloat(he.height),dimensionsUnit:he.dimensionsUnit,weight:parseFloat(he.weight),weightUnit:he.weightUnit,isDefault:he.isDefault};await e(xt),y(!1)},[o,he,e]),Ee=u.useCallback(xt=>{const Xt=r.find(br=>br._id===xt);Xt&&(C(xt),ie({packageName:Xt.packageName,packageType:Xt.packageType,length:String(Xt.length),width:String(Xt.width),height:String(Xt.height),dimensionsUnit:Xt.dimensionsUnit,weight:String(Xt.weight),weightUnit:Xt.weightUnit,isDefault:Xt.isDefault}),v(!0))},[r]),le=u.useCallback(()=>{v(!1),C(null)},[]),Ye=u.useCallback(async()=>{if(!w)return;const xt={packageName:he.packageName,packageType:he.packageType,length:parseFloat(he.length),width:parseFloat(he.width),height:he.packageType==="envelope"?0:parseFloat(he.height),dimensionsUnit:he.dimensionsUnit,weight:parseFloat(he.weight),weightUnit:he.weightUnit,isDefault:he.isDefault};await t(w,xt),v(!1),C(null)},[w,he,t]),De=u.useCallback((xt,Xt)=>{R({id:xt,name:Xt}),N(!0)},[]),ct=u.useCallback(async()=>{O&&(await a(O.id),N(!1),R(null))},[O,a]),ot=u.useCallback(()=>{N(!1),R(null)},[]),dt=u.useCallback((xt,Xt)=>{$(xt.currentTarget),Y(Xt)},[]),Ke=u.useCallback(()=>{$(null),Y(null)},[]),kt=u.useCallback(()=>{z&&(Ee(z),Ke())},[z,Ee,Ke]),At=u.useCallback(()=>{if(z){const xt=r.find(Xt=>Xt._id===z);xt&&(De(z,xt.packageName),Ke())}},[z,r,De,Ke]);return u.useEffect(()=>{o&&(l(o).catch(xt=>{console.error("Failed to fetch shipping profiles:",xt)}),d(o).catch(xt=>{console.error("Failed to fetch local delivery settings:",xt)}))},[o,l,d]),u.useEffect(()=>{r.length>0&&!Z&&ve(r[0]._id)},[r,Z]),n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900 mb-4 border-b border-gray-200 pb-4",children:"Shipping and Delivery Settings"}),n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Shipping"}),n.jsx(Ps,{className:"w-4 h-4 text-gray-500"})]}),n.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Manage where you ship and how much you charge"}),n.jsx(ICe,{profiles:i}),n.jsx(Zc,{to:"/settings/shipping-and-delivery/profiles/create",className:"text-gray-600 hover:text-gray-900 transition-colors text-xs block mb-4",children:"Create a custom profile to set different rates or restrict destinations for specific products"}),n.jsx(DCe,{splitShipping:L,onToggle:()=>B(xt=>!xt),onManage:()=>q(!0)})]}),n.jsx(RCe,{open:M,onClose:()=>q(!1),splitShipping:L,onSplitShippingChange:xt=>B(xt),onSave:()=>q(!1)}),n.jsx(wCe,{open:we,onClose:()=>Ae(!1),estimatedDeliveryMode:ze,onEstimatedDeliveryModeChange:xt=>Ge(xt),estimatedFulfillmentTime:Ue,onEstimatedFulfillmentTimeChange:xt=>ht(xt),estimatedCustomTime:ee,onEstimatedCustomTimeChange:xt=>ue(xt),estimatedCustomUnit:Oe,onEstimatedCustomUnitChange:xt=>J(xt),onSave:()=>Ae(!1)}),n.jsx(OCe,{open:P,onClose:()=>H(!1),rateShippingFrom:D,onRateShippingFromChange:xt=>X(xt),rateShippingSearch:xe,onRateShippingSearchChange:xt=>K(xt),ratePackageId:Z,onRatePackageIdChange:xt=>ve(xt),rateWeight:ae,onRateWeightChange:xt=>Se(xt),rateWeightUnit:Pe,onRateWeightUnitChange:xt=>$e(xt),packagings:r}),n.jsx(ACe,{onCalculateRatesClick:()=>H(!0)}),n.jsx(vCe,{estimatedDeliveryMode:ze,onEstimatedDeliveryClick:()=>Ae(!0)}),n.jsx(SCe,{}),n.jsx(jCe,{loading:p,creating:re,hasSettings:!!c,onButtonClick:ge}),n.jsx(TCe,{}),n.jsx(xCe,{}),n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Packages"}),n.jsx(Ps,{className:"w-4 h-4 text-gray-500"})]}),n.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Used to calculate shipping rates at checkout and pre-selected when buying labels"}),n.jsx(ECe,{packages:r,onMenuOpen:dt,onAddPackage:Fe}),r.length===0&&n.jsxs("button",{onClick:Fe,className:"flex items-center gap-2 py-2 text-gray-700 hover:bg-gray-50 transition-colors w-full text-sm",children:[n.jsx(On,{className:"w-4 h-4"}),n.jsx("span",{className:"font-medium",children:"Add package"})]})]}),n.jsx(NCe,{anchorEl:G,open:!!G,onClose:Ke,onEdit:kt,onDelete:At}),n.jsx(LCe,{}),n.jsx(PCe,{}),n.jsx(gCe,{}),n.jsx(mCe,{open:g,onClose:We,formData:he,onFormChange:Qe,onSubmit:de}),n.jsx(CCe,{open:I,onClose:()=>V(!1),onConfirm:Ce,creating:re}),n.jsx(bCe,{open:b,onClose:le,formData:he,onFormChange:Qe,onSubmit:Ye}),n.jsx(yCe,{open:k,onClose:ot,onConfirm:ct,packageName:O?.name})]})})},UCe=()=>{const s=dr(),r=u.useCallback(()=>{s("/settings/general")},[s]);return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:r,className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(gn,{className:"w-5 h-5"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Shop metafields"})]}),n.jsx("button",{className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"View definitions"})]}),n.jsxs("div",{className:"border border-gray-200 bg-white p-6 text-center",children:[n.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:"Add a custom field to your shop"}),n.jsx("p",{className:"text-sm text-gray-600 max-w-md mx-auto mb-4",children:"Create custom fields for information that applies to your entire store, such as global settings or configurations."}),n.jsx("button",{className:"px-4 py-2 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Add definition"})]}),n.jsx("div",{className:"text-center mt-6",children:n.jsxs("button",{className:"inline-flex items-center gap-1.5 text-sm text-gray-600 hover:text-gray-900 transition-colors",children:[n.jsx("span",{children:"Learn more about metafields"}),n.jsx(As,{className:"w-4 h-4"})]})})]})})},VCe=({entry:s,showDivider:r})=>n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"py-2.5",children:[n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[s.title,s.linkLabel&&n.jsxs(n.Fragment,{children:[": ",n.jsx("a",{href:s.linkHref,className:"text-gray-700 ml-0.5 hover:text-gray-900 transition-colors",children:s.linkLabel})]})]}),s.description&&!s.linkLabel&&n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.description}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s.timestamp})]}),r&&n.jsx("hr",{className:"my-2 border-gray-200"})]}),HCe=({entries:s})=>n.jsx("div",{className:"border border-gray-200 bg-white p-4",children:s.map((r,e)=>n.jsx(VCe,{entry:r,showDivider:e<s.length-1},r.id))}),WCe=[{id:"1",title:"My Store Admin accessed shop",timestamp:"November 17, 2025 at 11:17 AM GMT+5:30"},{id:"2",title:"My Store Admin accessed shop",timestamp:"November 17, 2025 at 10:32 AM GMT+5:30"},{id:"3",title:"My Store Admin accessed shop",timestamp:"November 14, 2025 at 5:28 PM GMT+5:30"},{id:"4",title:"My Store Admin accessed shop",timestamp:"November 14, 2025 at 2:46 PM GMT+5:30"},{id:"5",title:"You included a product on Point of Sale",description:"t-shirt",timestamp:"November 14, 2025 at 10:42 AM GMT+5:30",linkLabel:"t-shirt",linkHref:"#"},{id:"6",title:"You included a product on Online Store",timestamp:"November 14, 2025 at 10:42 AM GMT+5:30",linkLabel:"t-shirt",linkHref:"#"},{id:"7",title:"You created a new product",timestamp:"November 14, 2025 at 10:42 AM GMT+5:30",linkLabel:"t-shirt",linkHref:"#"},{id:"8",title:"Theme was published",timestamp:"November 14, 2025 at 10:40 AM GMT+5:30",linkLabel:"Horizon",linkHref:"#"},{id:"9",title:"My Store Admin accessed shop",timestamp:"November 14, 2025 at 10:39 AM GMT+5:30"},{id:"10",title:"Ziplofy added default retail role",timestamp:"November 14, 2025 at 10:39 AM GMT+5:30",description:"Associate"}],qCe=()=>{const s=dr(),r=u.useCallback(()=>{s("/settings/general")},[s]);return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-4 border-b border-gray-200",children:[n.jsx("button",{onClick:r,className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(gn,{className:"w-5 h-5"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Store activity log"})]}),n.jsx(HCe,{entries:WCe})]})})},ZD=u.createContext(void 0),GCe=({children:s})=>{const[r,e]=u.useState(null),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async g=>{try{a(!0),i(null);const y=await nt.get(`/tax-and-duties-global-settings/store/${g}`),{success:b,data:v,message:w}=y.data;if(!b)throw new Error(w||"Failed to fetch tax and duties global settings");return e(v||null),v||null}catch(y){const b=y?.response?.data?.message||y?.message||"Failed to fetch tax and duties global settings";throw i(b),new Error(b)}finally{a(!1)}},[]),c=u.useCallback(async(g,y)=>{try{a(!0),i(null);const b=await nt.put(`/tax-and-duties-global-settings/${g}`,y),{success:v,data:w,message:C}=b.data;if(!v)throw new Error(C||"Failed to update tax and duties global settings");return e(w),w}catch(b){const v=b?.response?.data?.message||b?.message||"Failed to update tax and duties global settings";throw i(v),new Error(v)}finally{a(!1)}},[]),d=u.useCallback(()=>{e(null),i(null)},[]),p=u.useCallback(()=>{i(null)},[]),h={settings:r,loading:t,error:o,getByStoreId:l,update:c,clear:d,clearError:p};return n.jsx(ZD.Provider,{value:h,children:s})},KCe=()=>{const s=u.useContext(ZD);if(!s)throw new Error("useTaxAndDutiesGlobalSettings must be used within a TaxAndDutiesGlobalSettingsProvider");return s},YCe=()=>{const s=dr(),{countries:r,loading:e,getCountries:t}=Hx(),{activeStoreId:a}=Ur(),{settings:o,loading:i,getByStoreId:l,update:c}=KCe(),[d,p]=u.useState(""),[h,g]=u.useState(1),y=10,[b,v]=u.useState(!1),[w,C]=u.useState(!1),[k,N]=u.useState(!1),O=u.useRef(null);u.useEffect(()=>{t({limit:1e3})},[t]),u.useEffect(()=>{a&&l(a).catch(z=>{console.error("Failed to fetch tax and duties global settings:",z)})},[a,l]),u.useEffect(()=>{o&&(v(o.includeSalesTaxInProductPriceAndShippingRate),C(o.chargeSalesTaxOnShipping),N(o.chargeVATOnDigitalGoods))},[o]);const R=u.useCallback(z=>{!o||!o._id||(O.current&&clearTimeout(O.current),O.current=setTimeout(async()=>{try{await c(o._id,z)}catch(Y){console.error("Failed to update tax and duties global settings:",Y)}},500))},[o,c]);u.useEffect(()=>()=>{O.current&&clearTimeout(O.current)},[]);const B=r.map(z=>({id:z._id,name:z.name,flag:z.flagEmoji||"",collecting:z.name.toLowerCase()==="india"?"Taxes":null,taxService:"Manual Tax"})).filter(z=>z.name.toLowerCase().includes(d.toLowerCase())),G=B.slice((h-1)*y,h*y),$=Math.ceil(B.length/y);return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b border-gray-200 pb-4",children:[n.jsx(qw,{className:"w-5 h-5 text-gray-600"}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Taxes and duties"})]}),n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Tax regions"}),n.jsx(Ps,{className:"w-4 h-4 text-gray-500"})]}),n.jsxs("p",{className:"text-xs text-gray-600 mb-4",children:["Areas where your customers will pay tax, and where you will collect and remit. Create a"," ",n.jsx("button",{onClick:()=>s("/settings/shipping-and-delivery"),className:"text-gray-700 cursor-pointer hover:underline",children:"shipping zone"})," ","to add a new tax region. If you're unsure about your tax liability, check with a tax professional."]}),n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsxs("div",{className:"relative flex-1 max-w-[300px]",children:[n.jsx(no,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-500"}),n.jsx("input",{type:"text",placeholder:"Search",value:d,onChange:z=>{p(z.target.value),g(1)},className:"w-full pl-10 pr-3 py-2 border border-gray-200 text-sm text-gray-900 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsx("button",{className:"p-1.5 border border-gray-200 hover:bg-gray-50 transition-colors",children:n.jsx(af,{className:"w-4 h-4 text-gray-600"})}),n.jsx("button",{className:"p-1.5 border border-gray-200 hover:bg-gray-50 transition-colors",children:n.jsx(y2,{className:"w-4 h-4 text-gray-600"})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full border-collapse",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left py-2 px-3 text-xs font-medium text-gray-700 border-b border-gray-200",children:"Region"}),n.jsx("th",{className:"text-left py-2 px-3 text-xs font-medium text-gray-700 border-b border-gray-200",children:"Collecting"}),n.jsx("th",{className:"text-left py-2 px-3 text-xs font-medium text-gray-700 border-b border-gray-200",children:"Tax service"})]})}),n.jsx("tbody",{children:e?n.jsx("tr",{children:n.jsx("td",{colSpan:3,className:"text-center py-4 text-xs text-gray-600",children:"Loading countries..."})}):G.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:3,className:"text-center py-4 text-xs text-gray-600",children:"No countries found"})}):G.map(z=>n.jsxs("tr",{onClick:()=>s(`/settings/taxes-and-duties/${z.id}`),className:"cursor-pointer hover:bg-gray-50 transition-colors",children:[n.jsx("td",{className:"py-3 px-3 border-b border-gray-100",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-lg",children:z.flag}),n.jsx("span",{className:"text-sm text-gray-900 font-medium",children:z.name})]})}),n.jsx("td",{className:"py-3 px-3 border-b border-gray-100",children:z.collecting?n.jsx("span",{className:"inline-block px-2 py-0.5 bg-gray-100 text-xs font-medium text-gray-700",children:z.collecting}):n.jsx("span",{className:"text-sm text-gray-400",children:""})}),n.jsx("td",{className:"py-3 px-3 border-b border-gray-100 text-sm text-gray-600",children:z.taxService})]},z.id))})]})}),$>1&&n.jsxs("div",{className:"flex items-center gap-1 mt-4",children:[n.jsx("button",{disabled:h===1,onClick:()=>g(h-1),className:`p-1.5 border border-gray-200 transition-colors ${h===1?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-50"}`,children:n.jsx(hF,{className:"w-4 h-4"})}),n.jsx("button",{disabled:h===$,onClick:()=>g(h+1),className:`p-1.5 border border-gray-200 transition-colors ${h===$?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-50"}`,children:n.jsx(As,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Duties and import taxes"}),n.jsx(Ps,{className:"w-4 h-4 text-gray-500"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex justify-between items-start gap-4 mb-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-0.5",children:"Collect duties and import taxes at checkout"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Prevent surprise fees for international customers at delivery  0.5% transaction fee"})]}),n.jsx("button",{className:"px-3 py-1.5 border border-gray-200 text-sm text-gray-700 hover:bg-gray-50 transition-colors whitespace-nowrap",children:"Set up"})]}),n.jsxs("div",{className:"mt-3 p-3 bg-gray-50 border border-gray-200 flex items-start gap-2",children:[n.jsx(Ps,{className:"w-4 h-4 text-gray-600 shrink-0 mt-0.5"}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Ensure the carriers you use offer"," ",n.jsx("button",{className:"text-gray-700 cursor-pointer hover:underline",children:"Delivered duty paid (DDP) shipping labels"}),"."]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-3",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Customs information"}),n.jsx("button",{className:"p-1 text-gray-500 hover:bg-gray-50 transition-colors",children:n.jsx(w2,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-0.5",children:"Country of origin"}),n.jsx("p",{className:"text-xs text-gray-900",children:"No default set"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-0.5",children:"Harmonized System (HS) codes"}),n.jsx("p",{className:"text-xs text-gray-900",children:"No physical products available"})]})]})]}),n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-4",children:"Global settings"}),n.jsx("div",{className:"mb-4",children:n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:b,onChange:z=>{const Y=z.target.checked;v(Y),R({includeSalesTaxInProductPriceAndShippingRate:Y})},disabled:i||!o,className:"mt-0.5 w-4 h-4 border-gray-300 text-gray-600 focus:ring-gray-400"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-0.5",children:"Include sales tax in product price and shipping rate"}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Assumes a 9% tax rate, which is adjusted to local tax rates in markets with"," ",n.jsx("button",{className:"text-gray-700 cursor-pointer hover:underline",children:"dynamic tax inclusion"}),"."]})]})]})}),n.jsx("div",{className:"mb-4",children:n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:w,onChange:z=>{const Y=z.target.checked;C(Y),R({chargeSalesTaxOnShipping:Y})},disabled:i||!o,className:"mt-0.5 w-4 h-4 border-gray-300 text-gray-600 focus:ring-gray-400"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-0.5",children:"Charge sales tax on shipping"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Automatically calculated for Canada, European Union, and United States"})]})]})}),n.jsx("div",{children:n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:k,onChange:z=>{const Y=z.target.checked;N(Y),R({chargeVATOnDigitalGoods:Y})},disabled:i||!o,className:"mt-0.5 w-4 h-4 border-gray-300 text-gray-600 focus:ring-gray-400"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-0.5",children:"Charge VAT on digital goods"}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Creates a collection of digital goods that will be"," ",n.jsx("button",{className:"text-gray-700 cursor-pointer hover:underline",children:"charged VAT"})," ","at checkout (for European customers)"]})]})]})})]})]})})},ZCe=()=>{const[s,r]=u.useState(new Set),e=[{_id:"1",email:"developer200419@gmail.com",status:"active",role:"Store owner"}],t=l=>{l.target.checked?r(new Set(e.map(c=>c._id))):r(new Set)},a=l=>{r(c=>{const d=new Set(c);return d.has(l)?d.delete(l):d.add(l),d})},o=e.length>0&&s.size===e.length,i=s.size>0&&s.size<e.length;return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qy,{className:"w-5 h-5 text-gray-900"}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Users"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{className:"px-3 py-1.5 text-sm border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Export"}),n.jsx("button",{className:"px-3 py-1.5 text-sm text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Add users"})]})]}),n.jsx("div",{className:"border border-gray-200 bg-white overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-white border-b border-gray-200",children:[n.jsx("th",{className:"w-12 px-3 py-2 text-left",children:n.jsx("input",{type:"checkbox",ref:l=>{l&&(l.indeterminate=i)},checked:o,onChange:t,className:"w-4 h-4 text-gray-900 focus:ring-gray-400"})}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-900",children:"User"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-900",children:"Status"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-900",children:"Role"})]})}),n.jsx("tbody",{children:e.map(l=>n.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50 transition-colors",children:[n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"checkbox",checked:s.has(l._id),onChange:()=>a(l._id),className:"w-4 h-4 text-gray-900 focus:ring-gray-400"})}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("p",{className:"text-sm text-gray-900 truncate max-w-[300px]",children:l.email})}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("span",{className:"inline-block px-2 py-0.5 text-xs bg-gray-100 text-gray-700",children:l.status.charAt(0).toUpperCase()+l.status.slice(1)})}),n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(C2,{className:"w-4 h-4 text-gray-600"}),n.jsx("span",{className:"text-sm text-gray-900",children:l.role})]})})]},l._id))})]})})}),n.jsx("div",{className:"mt-3",children:n.jsx("a",{href:"#",onClick:l=>{l.preventDefault()},className:"text-xs text-gray-700 hover:underline",children:"Learn more about users"})})]})})},XCe=()=>{const{stores:s,activeStoreId:r}=Ur(),{settings:e,loading:t,fetchByStoreId:a,update:o,generateNewCode:i}=Lre(),l=u.useMemo(()=>s.find(k=>k._id===r),[s,r]),[c,d]=u.useState(!1),[p,h]=u.useState(!1),[g,y]=u.useState(!1);u.useEffect(()=>{r&&a(r).catch(()=>{})},[r,a]),u.useEffect(()=>{d(e?e.requireCode:!1)},[e]);const b=u.useCallback(()=>{if(!e?.securityCode){gr.dismiss(),gr.error("No security code to copy");return}navigator.clipboard.writeText(e.securityCode).then(()=>{gr.dismiss(),gr.success("Security code copied")}).catch(()=>{gr.dismiss(),gr.error("Failed to copy code")})},[e]),v=u.useCallback(async()=>{if(!e?._id){gr.dismiss(),gr.error("Settings not available");return}y(!0);try{await i(e._id),gr.dismiss(),gr.success("New security code generated successfully")}catch(k){const N=k?.message||"Failed to generate new security code";gr.dismiss(),gr.error(N)}finally{y(!1)}},[e,i]),w=u.useCallback(async()=>{if(!r||!e){gr.dismiss(),gr.error("Settings not available");return}h(!0);try{await o(e._id,{requireCode:!1}),gr.dismiss(),gr.success("Security code requirement disabled"),d(!1)}catch(k){const N=k?.message||"Failed to disable security code requirement";gr.dismiss(),gr.error(N)}finally{h(!1)}},[r,e,o]),C=u.useCallback(async()=>{if(!r||!e){gr.dismiss(),gr.error("Settings not available");return}h(!0);try{await o(e._id,{requireCode:!0}),gr.dismiss(),gr.success("Security code requirement enabled"),d(!0)}catch(k){const N=k?.message||"Failed to enable security code requirement";gr.dismiss(),gr.error(N)}finally{h(!1)}},[r,e,o]);return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[t&&n.jsx("div",{className:"flex justify-center py-4",children:n.jsx("div",{className:"w-5 h-5 border-2 border-gray-300 border-t-gray-900 rounded-full animate-spin"})}),!t&&e&&n.jsxs("div",{className:"border border-gray-200 bg-white p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-1",children:"Collaborators"}),n.jsxs("p",{className:"text-xs text-gray-600 mb-3",children:["Give designers, developers, and marketers access to this store. Collaborators don't count toward your staff limit. Learn more about"," ",n.jsx("a",{href:"#",className:"text-gray-700 hover:underline",children:"collaborators"}),"."]}),!e.requireCode&&n.jsx("div",{className:"border border-gray-200 p-3 bg-gray-50",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-start sm:items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"text-xs text-gray-600",children:["Anyone can send a collaborator request for ",l?.storeName||"My Store",". A code is not required."]}),n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["You'll still need to review and approve this request from"," ",n.jsx("a",{href:"#",className:"text-gray-700 hover:underline",children:"Users"}),"."]})]}),n.jsx("button",{onClick:C,disabled:p,className:"px-3 py-1.5 text-sm border border-gray-200 text-gray-700 bg-white hover:bg-gray-50 transition-colors disabled:bg-gray-100 disabled:cursor-not-allowed",children:"Require code"})]})}),e.requireCode&&n.jsx("div",{className:"border border-gray-200 p-3 bg-gray-50",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-start sm:items-center",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs text-gray-600 uppercase tracking-wide",children:"My Store"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:l?.storeName||"My Store"}),n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Share this code to allow someone to send you a collaborator request for this store. You'll still need to review and approve this request from"," ",n.jsx("a",{href:"#",className:"text-gray-700 hover:underline",children:"Users"}),"."]})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.securityCode&&n.jsx("button",{onClick:b,className:"px-3 py-1.5 text-sm border border-gray-200 text-gray-700 bg-white hover:bg-gray-50 transition-colors font-mono font-medium",children:n.jsxs("span",{className:"flex items-center gap-1.5",children:[n.jsx(vF,{className:"w-4 h-4"}),e.securityCode]})}),n.jsx("button",{onClick:v,disabled:g,className:"px-3 py-1.5 text-sm text-white bg-gray-900 hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:g?n.jsxs("span",{className:"flex items-center gap-1.5",children:[n.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Generating..."]}):"Generate new code"}),n.jsx("button",{onClick:w,disabled:p,className:"p-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n.jsx(Xs,{className:"w-4 h-4"})})]})]})})]})]})})},Wx=({isOpen:s,tagName:r,onConfirm:e,onCancel:t})=>n.jsx(en,{open:s,onClose:t,title:"Confirm Delete",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:t,className:"px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-100 transition-colors",children:"No"}),n.jsx("button",{onClick:e,className:"px-3 py-1.5 text-sm font-medium text-white bg-red-600 hover:bg-red-700 transition-colors",children:"Yes"})]}),children:n.jsxs("p",{className:"text-sm text-gray-700",children:["Are you sure you want to delete ",n.jsx("span",{className:"font-medium",children:r})," tag?"]})}),QCe=({tag:s,onDeleteClick:r})=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[n.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:n.jsx("span",{className:"text-sm font-medium text-gray-900",children:s.name})}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:n.jsx("button",{onClick:()=>r(s),className:"cursor-pointer p-1 hover:bg-red-50 rounded transition-colors","aria-label":"Delete tag",children:n.jsx(Xs,{className:"w-4 h-4 text-gray-600 hover:text-red-600"})})})]}),JCe=({tags:s,loading:r,onDeleteClick:e})=>r?n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"Loading tags..."}):s.length===0?n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No tags yet."}):n.jsx("div",{className:"border border-gray-200 rounded overflow-hidden",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-600",children:"Tag Name"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-600",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(t=>n.jsx(QCe,{tag:t,onDeleteClick:e},t._id))})]})}),eSe=()=>{const{customerTags:s,loading:r,error:e,fetchCustomerTags:t,addCustomerTag:a,deleteCustomerTag:o}=R2(),{activeStoreId:i}=Ur(),[l,c]=u.useState(""),[d,p]=u.useState(null),[h,g]=u.useState(!1),y=u.useMemo(()=>l.trim().length>0&&!!i,[l,i]),b=u.useCallback(N=>{c(N.target.value)},[]),v=u.useCallback(async()=>{!i||!l.trim()||(await a(i,l.trim()),c(""))},[i,l,a]),w=u.useCallback(N=>{p(N),g(!0)},[]),C=u.useCallback(async()=>{d&&(await o(d._id),g(!1),p(null))},[d,o]),k=u.useCallback(()=>{g(!1),p(null)},[]);return u.useEffect(()=>{i&&t(i)},[i]),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Customer tags"}),n.jsxs("div",{className:"flex gap-2 mb-4",children:[n.jsx("input",{type:"text",placeholder:"Add new tag",value:l,onChange:b,className:"flex-1 px-3 py-2 border border-gray-200 rounded focus:ring-1 focus:ring-gray-400 focus:border-gray-300 outline-none transition-colors text-sm"}),n.jsxs("button",{disabled:!y||r,onClick:v,className:"cursor-pointer flex items-center gap-1 px-3 py-2 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[n.jsx(On,{className:"w-4 h-4"}),"Add"]})]}),e&&n.jsx("p",{className:"text-sm text-red-600 mb-2",children:e}),n.jsx(JCe,{tags:s,loading:r,onDeleteClick:w}),n.jsx(Wx,{isOpen:h,tagName:d?.name||"",onConfirm:C,onCancel:k})]})},tSe=()=>{const s=dr(),r=()=>{s("/tag-management")};return n.jsx(Yt,{children:n.jsx("div",{className:"min-h-screen",children:n.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 py-6",children:[n.jsxs("div",{className:"mb-4",children:[n.jsxs("button",{onClick:r,className:"flex items-center gap-1.5 text-gray-600 hover:text-gray-900 mb-3 transition-colors",children:[n.jsx(gn,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-medium cursor-pointer",children:"Back"})]}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Customer Tags"}),n.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage tags for your customers"})]}),n.jsx(eSe,{})]})})})},rSe=({tag:s,onDeleteClick:r})=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[n.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:n.jsx("span",{className:"text-sm font-medium text-gray-900",children:s.name})}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:n.jsx("button",{onClick:()=>r(s),className:"cursor-pointer p-1 hover:bg-red-50 rounded transition-colors","aria-label":"Delete tag",children:n.jsx(Xs,{className:"w-4 h-4 text-gray-600 hover:text-red-600"})})})]}),nSe=({tags:s,loading:r,onDeleteClick:e})=>r?n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"Loading tags..."}):s.length===0?n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No tags yet."}):n.jsx("div",{className:"border border-gray-200 rounded overflow-hidden",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-600",children:"Tag Name"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-600",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(t=>n.jsx(rSe,{tag:t,onDeleteClick:e},t._id))})]})}),sSe=()=>{const{productTags:s,loading:r,error:e,fetchProductTags:t,addProductTag:a,deleteProductTag:o}=tj(),{activeStoreId:i}=Ur(),[l,c]=u.useState(""),[d,p]=u.useState(null),[h,g]=u.useState(!1),y=u.useMemo(()=>l.trim().length>0&&!!i,[l,i]),b=u.useCallback(N=>{c(N.target.value)},[]),v=u.useCallback(async()=>{!i||!l.trim()||(await a(i,l.trim()),c(""))},[i,l,a]),w=u.useCallback(N=>{p(N),g(!0)},[]),C=u.useCallback(async()=>{d&&(await o(d._id),g(!1),p(null))},[d,o]),k=u.useCallback(()=>{g(!1),p(null)},[]);return u.useEffect(()=>{i&&t(i)},[i]),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Product tags"}),n.jsxs("div",{className:"flex gap-2 mb-4",children:[n.jsx("input",{type:"text",placeholder:"Add new tag",value:l,onChange:b,className:"flex-1 px-3 py-2 border border-gray-200 rounded focus:ring-1 focus:ring-gray-400 focus:border-gray-300 outline-none transition-colors text-sm"}),n.jsxs("button",{disabled:!y||r,onClick:v,className:"cursor-pointer flex items-center gap-1 px-3 py-2 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[n.jsx(On,{className:"w-4 h-4"}),"Add"]})]}),e&&n.jsx("p",{className:"text-sm text-red-600 mb-2",children:e}),n.jsx(nSe,{tags:s,loading:r,onDeleteClick:w}),n.jsx(Wx,{isOpen:h,tagName:d?.name||"",onConfirm:C,onCancel:k})]})},aSe=()=>{const s=dr(),r=()=>{s("/tag-management")};return n.jsx(Yt,{children:n.jsx("div",{className:"min-h-screen",children:n.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 py-6",children:[n.jsxs("div",{className:"mb-4",children:[n.jsxs("button",{onClick:r,className:"flex items-center gap-1.5 text-gray-600 hover:text-gray-900 mb-3 transition-colors",children:[n.jsx(gn,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-medium cursor-pointer",children:"Back"})]}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Product Tags"}),n.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage tags for your products"})]}),n.jsx(sSe,{})]})})})},oSe=({tag:s,onDeleteClick:r})=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[n.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:n.jsx("span",{className:"text-sm font-medium text-gray-900",children:s.name})}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:n.jsx("button",{onClick:()=>r(s),className:"cursor-pointer p-1 hover:bg-red-50 rounded transition-colors","aria-label":"Delete product type",children:n.jsx(Xs,{className:"w-4 h-4 text-gray-600 hover:text-red-600"})})})]}),iSe=({tags:s,loading:r,onDeleteClick:e})=>r?n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"Loading tags..."}):s.length===0?n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No tags yet."}):n.jsx("div",{className:"border border-gray-200 rounded overflow-hidden",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-600",children:"Tag Name"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-600",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(t=>n.jsx(oSe,{tag:t,onDeleteClick:e},t._id))})]})}),lSe=()=>{const{productTypes:s,loading:r,error:e,createProductType:t,getProductTypesByStoreId:a,deleteProductType:o}=D2(),{activeStoreId:i}=Ur(),[l,c]=u.useState(""),[d,p]=u.useState(null),[h,g]=u.useState(!1),y=u.useMemo(()=>l.trim().length>0&&!!i,[l,i]),b=u.useCallback(N=>{c(N.target.value)},[]),v=u.useCallback(async()=>{!i||!l.trim()||(await t({storeId:i,name:l.trim()}),c(""))},[i,l,t]),w=u.useCallback(N=>{p(N),g(!0)},[]),C=u.useCallback(async()=>{d&&(await o(d._id),g(!1),p(null))},[d,o]),k=u.useCallback(()=>{g(!1),p(null)},[]);return u.useEffect(()=>{i&&a(i)},[i]),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Product types"}),n.jsxs("div",{className:"flex gap-2 mb-4",children:[n.jsx("input",{type:"text",placeholder:"Add new product type",value:l,onChange:b,className:"flex-1 px-3 py-2 border border-gray-200 rounded focus:ring-1 focus:ring-gray-400 focus:border-gray-300 outline-none transition-colors text-sm"}),n.jsxs("button",{disabled:!y||r,onClick:v,className:"cursor-pointer flex items-center gap-1 px-3 py-2 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[n.jsx(On,{className:"w-4 h-4"}),"Add"]})]}),e&&n.jsx("p",{className:"text-sm text-red-600 mb-2",children:e}),n.jsx(iSe,{tags:s,loading:r,onDeleteClick:w}),n.jsx(Wx,{isOpen:h,tagName:d?.name||"",onConfirm:C,onCancel:k})]})},cSe=()=>{const s=dr(),r=()=>{s("/tag-management")};return n.jsx(Yt,{children:n.jsx("div",{className:"min-h-screen",children:n.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 py-6",children:[n.jsxs("div",{className:"mb-4",children:[n.jsxs("button",{onClick:r,className:"flex items-center gap-1.5 text-gray-600 hover:text-gray-900 mb-3 transition-colors",children:[n.jsx(gn,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-medium cursor-pointer",children:"Back"})]}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Product Types"}),n.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage product type tags"})]}),n.jsx(lSe,{})]})})})},dSe=({tag:s,onDeleteClick:r})=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[n.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:n.jsx("span",{className:"text-sm font-medium text-gray-900",children:s.name})}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:n.jsx("button",{onClick:()=>r(s),className:"cursor-pointer p-1 hover:bg-red-50 rounded transition-colors","aria-label":"Delete tag",children:n.jsx(Xs,{className:"w-4 h-4 text-gray-600 hover:text-red-600"})})})]}),uSe=({tags:s,onDeleteClick:r})=>n.jsx("div",{className:"border border-gray-200 rounded overflow-hidden",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-600",children:"Tag Name"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-600",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(e=>n.jsx(dSe,{tag:e,onDeleteClick:r},e._id))})]})}),fSe=()=>{const{tags:s,loading:r,error:e,fetchTagsByStoreId:t,createTag:a,deleteTag:o}=bM(),{activeStoreId:i}=Ur(),[l,c]=u.useState(""),[d,p]=u.useState(null),[h,g]=u.useState(!1),y=u.useMemo(()=>l.trim().length>0&&!!i,[l,i]),b=u.useCallback(N=>{c(N.target.value)},[]),v=u.useCallback(async()=>{!i||!l.trim()||(await a(i,l.trim()),c(""))},[i,l,a]),w=u.useCallback(N=>{p(N),g(!0)},[]),C=u.useCallback(async()=>{d&&(await o(d._id),g(!1),p(null))},[d,o]),k=u.useCallback(()=>{g(!1),p(null)},[]);return u.useEffect(()=>{i&&t(i)},[i]),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Purchase order tags"}),n.jsxs("div",{className:"flex gap-2 mb-4",children:[n.jsx("input",{type:"text",placeholder:"Add new purchase order tag",value:l,onChange:b,className:"flex-1 px-3 py-2 border border-gray-200 rounded focus:ring-1 focus:ring-gray-400 focus:border-gray-300 outline-none transition-colors text-sm"}),n.jsxs("button",{disabled:!y||r,onClick:v,className:"flex items-center gap-1 px-3 py-2 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[n.jsx(On,{className:"w-4 h-4"}),"Add"]})]}),e&&n.jsx("p",{className:"text-sm text-red-600 mb-2",children:e}),r&&s.length===0?n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"Loading tags..."}):s.length===0?n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No tags yet."}):n.jsx(uSe,{tags:s,onDeleteClick:w}),n.jsx(Wx,{isOpen:h,tagName:d?.name||"",onConfirm:C,onCancel:k})]})},pSe=()=>{const s=dr(),r=()=>{s("/tag-management")};return n.jsx(Yt,{children:n.jsx("div",{className:"min-h-screen",children:n.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 py-6",children:[n.jsxs("div",{className:"mb-4",children:[n.jsxs("button",{onClick:r,className:"flex items-center gap-1.5 text-gray-600 hover:text-gray-900 mb-3 transition-colors",children:[n.jsx(gn,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-medium cursor-pointer",children:"Back"})]}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Purchase Order Tags"}),n.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage tags for purchase orders"})]}),n.jsx(fSe,{})]})})})},hSe=({tag:s,onDeleteClick:r})=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[n.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:n.jsx("span",{className:"text-sm font-medium text-gray-900",children:s.name})}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:n.jsx("button",{onClick:()=>r(s),className:"cursor-pointer p-1 hover:bg-red-50 rounded transition-colors","aria-label":"Delete tag",children:n.jsx(Xs,{className:"w-4 h-4 text-gray-600 hover:text-red-600"})})})]}),mSe=({tags:s,loading:r,onDeleteClick:e})=>r?n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"Loading tags..."}):s.length===0?n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No tags yet."}):n.jsx("div",{className:"border border-gray-200 rounded overflow-hidden",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-600",children:"Tag Name"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-600",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(t=>n.jsx(hSe,{tag:t,onDeleteClick:e},t._id))})]})}),gSe=()=>{const{tags:s,loading:r,error:e,fetchByStore:t,createTag:a,deleteTag:o}=L2(),{activeStoreId:i}=Ur(),[l,c]=u.useState(""),[d,p]=u.useState(null),[h,g]=u.useState(!1),y=u.useMemo(()=>l.trim().length>0&&!!i,[l,i]),b=u.useCallback(N=>{c(N.target.value)},[]),v=u.useCallback(async()=>{!i||!l.trim()||(await a(i,l.trim()),c(""))},[i,l,a]),w=u.useCallback(N=>{p(N),g(!0)},[]),C=u.useCallback(async()=>{d&&(await o(d._id),g(!1),p(null))},[d,o]),k=u.useCallback(()=>{g(!1),p(null)},[]);return u.useEffect(()=>{i&&t(i)},[i]),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Product transfer tags"}),n.jsxs("div",{className:"flex gap-2 mb-4",children:[n.jsx("input",{type:"text",placeholder:"Add new transfer tag",value:l,onChange:b,className:"flex-1 px-3 py-2 border border-gray-200 rounded focus:ring-1 focus:ring-gray-400 focus:border-gray-300 outline-none transition-colors text-sm"}),n.jsxs("button",{disabled:!y||r,onClick:v,className:"cursor-pointer flex items-center gap-1 px-3 py-2 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[n.jsx(On,{className:"w-4 h-4"}),"Add"]})]}),e&&n.jsx("p",{className:"text-sm text-red-600 mb-2",children:e}),n.jsx(mSe,{tags:s,loading:r,onDeleteClick:w}),n.jsx(Wx,{isOpen:h,tagName:d?.name||"",onConfirm:C,onCancel:k})]})},ySe=()=>{const s=dr(),r=()=>{s("/tag-management")};return n.jsx(Yt,{children:n.jsx("div",{className:"min-h-screen",children:n.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 py-6",children:[n.jsxs("div",{className:"mb-4",children:[n.jsxs("button",{onClick:r,className:"flex items-center gap-1.5 text-gray-600 hover:text-gray-900 mb-3 transition-colors",children:[n.jsx(gn,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-medium cursor-pointer",children:"Back"})]}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Transfer Tags"}),n.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage tags for transfers"})]}),n.jsx(gSe,{})]})})})},XD=u.createContext(void 0),xSe=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async h=>{try{a(!0),i(null);const g=await nt.get(`/storefront/cart/store/${h}`),{success:y,data:b}=g.data;y?e(b):i("Failed to fetch abandoned carts")}catch(g){console.error("Error fetching abandoned carts:",g);const y=g.response?.data?.message||g.message||"Failed to fetch abandoned carts";i(y)}finally{a(!1)}},[]),c=u.useCallback(()=>{i(null)},[]),d=u.useCallback(()=>{e([]),i(null),a(!1)},[]),p={abandonedCarts:r,loading:t,error:o,fetchAbandonedCartsByStoreId:l,clearError:c,clearAbandonedCarts:d};return n.jsx(XD.Provider,{value:p,children:s})},QD=()=>{const s=u.useContext(XD);if(s===void 0)throw new Error("useAbandonedCarts must be used within an AbandonedCartProvider");return s},vSe=u.createContext(void 0),bSe=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(()=>{e([]),i(null)},[]),c=u.useCallback(async p=>{try{a(!0),i(null);const h=await nt.get(`/orders/store/${p}`);if(!h.data.success)throw new Error("Failed to fetch orders");return e(h.data.data||[]),h.data.data||[]}catch(h){const g=h?.response?.data?.message||h?.message||"Failed to fetch orders";throw i(g),h}finally{a(!1)}},[]),d=u.useMemo(()=>({orders:r,loading:t,error:o,getOrdersByStoreId:c,clear:l}),[r,t,o,c,l]);return n.jsx(vSe.Provider,{value:d,children:s})},JD=u.createContext(void 0),wSe=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async h=>{try{a(!0),i(null);const g=await nt.get(`/catalog-markets/catalog/${h}`),{success:y,data:b,message:v}=g.data;if(!y)throw new Error(v||"Failed to fetch catalog markets");return e(b||[]),b||[]}catch(g){const y=g?.response?.data?.message||g?.message||"Failed to fetch catalog markets";throw i(y),new Error(y)}finally{a(!1)}},[]),c=u.useCallback(async h=>{try{a(!0),i(null);const g=await nt.post("/catalog-markets",h),{success:y,data:b,message:v}=g.data;if(!y)throw new Error(v||"Failed to add market to catalog");return e(w=>[b,...w]),b}catch(g){const y=g?.response?.data?.message||g?.message||"Failed to add market to catalog";throw i(y),new Error(y)}finally{a(!1)}},[]),d=u.useCallback(async h=>{try{a(!0),i(null);const g=await nt.delete(`/catalog-markets/${h}`),{success:y,data:b,message:v}=g.data;if(!y)throw new Error(v||"Failed to delete catalog market");return e(w=>w.filter(C=>C._id!==b.deletedId)),b.deletedId}catch(g){const y=g?.response?.data?.message||g?.message||"Failed to delete catalog market";throw i(y),new Error(y)}finally{a(!1)}},[]),p={items:r,loading:t,error:o,getByCatalogId:l,createItem:c,deleteItem:d};return n.jsx(JD.Provider,{value:p,children:s})},jSe=()=>{const s=u.useContext(JD);if(!s)throw new Error("useCatalogMarkets must be used within a CatalogMarketProvider");return s},eL=u.createContext(void 0),CSe=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async g=>{try{a(!0),i(null);const y=await nt.get(`/catalog-products/catalog/${g}`),{success:b,data:v,message:w}=y.data;if(!b)throw new Error(w||"Failed to fetch catalog products");return e(v||[]),v||[]}catch(y){const b=y?.response?.data?.message||y?.message||"Failed to fetch catalog products";throw i(b),new Error(b)}finally{a(!1)}},[]),c=u.useCallback(async g=>{try{a(!0),i(null);const y=await nt.post("/catalog-products",g),{success:b,data:v,message:w}=y.data;if(!b)throw new Error(w||"Failed to add product to catalog");return e(C=>[v,...C]),v}catch(y){const b=y?.response?.data?.message||y?.message||"Failed to add product to catalog";throw i(b),new Error(b)}finally{a(!1)}},[]),d=u.useCallback(async g=>{try{a(!0),i(null);const y=await nt.delete(`/catalog-products/${g}`),{success:b,data:v,message:w}=y.data;if(!b)throw new Error(w||"Failed to delete catalog product");return e(C=>C.filter(k=>k._id!==v.deletedId)),v.deletedId}catch(y){const b=y?.response?.data?.message||y?.message||"Failed to delete catalog product";throw i(b),new Error(b)}finally{a(!1)}},[]),p=u.useCallback(async(g,y,b)=>{try{a(!0),i(null);const v=await nt.put(`/catalog-products/${g}`,b),{success:w,data:C,message:k}=v.data;if(!w)throw new Error(k||"Failed to update variant prices");return e(N=>N.map(O=>({...O,variants:O.variants.map(R=>R._id===y?{...R,price:C.price,compareAtPrice:C.compareAtPrice}:R)}))),C}catch(v){const w=v?.response?.data?.message||v?.message||"Failed to update variant prices";throw i(w),new Error(w)}finally{a(!1)}},[]),h={items:r,loading:t,error:o,getByCatalogId:l,createItem:c,deleteItem:d,updateVariantPrices:p};return n.jsx(eL.Provider,{value:h,children:s})},SSe=()=>{const s=u.useContext(eL);if(!s)throw new Error("useCatalogProducts must be used within a CatalogProductProvider");return s},tL=u.createContext(void 0),NSe=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async g=>{try{a(!0),i(null);const y=await nt.get(`/catalogs/store/${g}`),{success:b,data:v,message:w}=y.data;if(!b)throw new Error(w||"Failed to fetch catalogs");return e(v||[]),v||[]}catch(y){const b=y?.response?.data?.message||y?.message||"Failed to fetch catalogs";throw i(b),new Error(b)}finally{a(!1)}},[]),c=u.useCallback(async g=>{try{a(!0),i(null);const y=await nt.post("/catalogs",g),{success:b,data:v,message:w}=y.data;if(!b)throw new Error(w||"Failed to create catalog");return e(C=>[v,...C]),v}catch(y){const b=y?.response?.data?.message||y?.message||"Failed to create catalog";throw i(b),new Error(b)}finally{a(!1)}},[]),d=u.useCallback(async(g,y)=>{try{a(!0),i(null);const b=await nt.put(`/catalogs/${g}`,y),{success:v,data:w,message:C}=b.data;if(!v)throw new Error(C||"Failed to update catalog");return e(k=>k.map(N=>N._id===g?w:N)),w}catch(b){const v=b?.response?.data?.message||b?.message||"Failed to update catalog";throw i(v),new Error(v)}finally{a(!1)}},[]),p=u.useCallback(async g=>{try{a(!0),i(null);const y=await nt.delete(`/catalogs/${g}`),{success:b,data:v,message:w}=y.data;if(!b)throw new Error(w||"Failed to delete catalog");return e(C=>C.filter(k=>k._id!==v.deletedId)),v.deletedId}catch(y){const b=y?.response?.data?.message||y?.message||"Failed to delete catalog";throw i(b),new Error(b)}finally{a(!1)}},[]),h={catalogs:r,loading:t,error:o,getByStoreId:l,createCatalog:c,updateCatalog:d,deleteCatalog:p};return n.jsx(tL.Provider,{value:h,children:s})},rL=()=>{const s=u.useContext(tL);if(!s)throw new Error("useCatalogs must be used within a CatalogProvider");return s},nL=u.createContext(void 0),kSe=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(0),[o,i]=u.useState(1),[l,c]=u.useState(50),[d,p]=u.useState(!1),[h,g]=u.useState(null),y=u.useCallback(async(v={})=>{try{p(!0),g(null);const w=new URLSearchParams;v.q&&w.set("q",v.q),typeof v.active=="boolean"&&w.set("active",String(v.active)),v.page&&w.set("page",String(v.page)),v.limit&&w.set("limit",String(v.limit));const C=await nt.get(`/currencies?${w.toString()}`),{success:k,data:N,message:O,meta:R}=C.data;if(!k)throw new Error(O||"Failed to fetch currencies");return e(N||[]),R&&(a(R.total),i(R.page),c(R.limit)),N||[]}catch(w){const C=w?.response?.data?.message||w?.message||"Failed to fetch currencies";throw g(C),new Error(C)}finally{p(!1)}},[]),b={currencies:r,total:t,page:o,limit:l,loading:d,error:h,getCurrencies:y};return n.jsx(nL.Provider,{value:b,children:s})},_Se=()=>{const s=u.useContext(nL);if(!s)throw new Error("useCurrencies must be used within a CurrencyProvider");return s},sL=u.createContext(void 0),ESe=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async h=>{a(!0),i(null);try{const{data:g}=await nt.get(`/themes/installed?userId=${h}&storeId=${h}&_t=${Date.now()}`);e(g||[])}catch(g){i(g?.response?.data?.message||"Failed to fetch installed themes"),e([])}finally{a(!1)}},[]),c=u.useCallback(async(h,g)=>{a(!0),i(null);try{const{data:y}=await nt.post("/themes/install",{userId:h,themeId:g,storeId:h});y.success&&(localStorage.removeItem("ziplofy.appliedCustomThemeId"),localStorage.removeItem("ziplofy.appliedCustomThemeStoreId"),await new Promise(b=>setTimeout(b,500)),await l(h))}catch(y){i(y?.response?.data?.message||"Failed to install theme")}finally{a(!1)}},[l]),d=u.useCallback(async h=>{a(!0),i(null);try{await nt.delete("/themes/uninstall",{data:{installedThemeId:h}}),e(g=>g.filter(y=>y.installedThemeId!==h))}catch(g){i(g?.response?.data?.message||"Failed to uninstall theme")}finally{a(!1)}},[]),p=u.useMemo(()=>({installedThemes:r,loading:t,error:o,fetchByStoreId:l,installTheme:c,uninstallTheme:d}),[r,t,o,l,c,d]);return n.jsx(sL.Provider,{value:p,children:s})};function TSe(){const s=u.useContext(sL);if(!s)throw new Error("useInstalledThemes must be used within InstalledThemesProvider");return s}const aL=u.createContext(void 0),OSe=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async h=>{try{a(!0),i(null);const g=await nt.get(`/market-includes/market/${h}`),{success:y,data:b,message:v}=g.data;if(!y)throw new Error(v||"Failed to fetch market includes");return e(b||[]),b||[]}catch(g){const y=g?.response?.data?.message||g?.message||"Failed to fetch market includes";throw i(y),new Error(y)}finally{a(!1)}},[]),c=u.useCallback(async h=>{try{a(!0),i(null);const g=await nt.post("/market-includes",h),{success:y,data:b,message:v}=g.data;if(!y)throw new Error(v||"Failed to add country to market");return e(w=>[b,...w]),b}catch(g){const y=g?.response?.data?.message||g?.message||"Failed to add country to market";throw i(y),new Error(y)}finally{a(!1)}},[]),d=u.useCallback(async h=>{try{a(!0),i(null);const g=await nt.delete(`/market-includes/${h}`),{success:y,data:b,message:v}=g.data;if(!y)throw new Error(v||"Failed to delete market include");return e(w=>w.filter(C=>C._id!==b.deletedId)),b.deletedId}catch(g){const y=g?.response?.data?.message||g?.message||"Failed to delete market include";throw i(y),new Error(y)}finally{a(!1)}},[]),p={items:r,loading:t,error:o,getByMarketId:l,createItem:c,deleteItem:d};return n.jsx(aL.Provider,{value:p,children:s})},PSe=()=>{const s=u.useContext(aL);if(!s)throw new Error("useMarketIncludes must be used within a MarketIncludesProvider");return s},oL=u.createContext(void 0),ASe=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState([]),[o,i]=u.useState(!1),[l,c]=u.useState(null),d=u.useCallback(async v=>{try{i(!0),c(null);const w=await nt.get(`/markets/store/${v}`),{success:C,data:k,message:N}=w.data;if(!C)throw new Error(N||"Failed to fetch markets");return e(k||[]),k||[]}catch(w){const C=w?.response?.data?.message||w?.message||"Failed to fetch markets";throw c(C),new Error(C)}finally{i(!1)}},[]),p=u.useCallback(async v=>{try{i(!0),c(null);const w=await nt.get(`/markets/store/${v}/countries`),{success:C,data:k,message:N}=w.data;if(!C)throw new Error(N||"Failed to fetch market countries");return a(k||[]),k||[]}catch(w){const C=w?.response?.data?.message||w?.message||"Failed to fetch market countries";throw c(C),new Error(C)}finally{i(!1)}},[]),h=u.useCallback(async v=>{try{i(!0),c(null);const w=await nt.post("/markets",v),{success:C,data:k,message:N}=w.data;if(!C)throw new Error(N||"Failed to create market");return e(O=>[k,...O]),k}catch(w){const C=w?.response?.data?.message||w?.message||"Failed to create market";throw c(C),new Error(C)}finally{i(!1)}},[]),g=u.useCallback(async(v,w)=>{try{i(!0),c(null);const C=await nt.put(`/markets/${v}`,w),{success:k,data:N,message:O}=C.data;if(!k)throw new Error(O||"Failed to update market");return e(R=>R.map(L=>L._id===v?N:L)),N}catch(C){const k=C?.response?.data?.message||C?.message||"Failed to update market";throw c(k),new Error(k)}finally{i(!1)}},[]),y=u.useCallback(async v=>{try{i(!0),c(null);const w=await nt.delete(`/markets/${v}`),{success:C,data:k,message:N}=w.data;if(!C)throw new Error(N||"Failed to delete market");return e(O=>O.filter(R=>R._id!==k.deletedId)),k.deletedId}catch(w){const C=w?.response?.data?.message||w?.message||"Failed to delete market";throw c(C),new Error(C)}finally{i(!1)}},[]),b={markets:r,storeCountries:t,loading:o,error:l,getByStoreId:d,getCountriesByStoreId:p,createMarket:h,updateMarket:g,deleteMarket:y};return n.jsx(oL.Provider,{value:b,children:s})},Tm=()=>{const s=u.useContext(oL);if(!s)throw new Error("useMarkets must be used within a MarketProvider");return s},iL=u.createContext(void 0),MSe=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async b=>{try{a(!0),i(null);const v=await nt.get(`/pixels/store/${b}`),{success:w,data:C,message:k}=v.data;if(!w)throw new Error(k||"Failed to fetch pixels");return e(C||[]),C||[]}catch(v){const w=v?.response?.data?.message||v?.message||"Failed to fetch pixels";throw i(w),new Error(w)}finally{a(!1)}},[]),c=u.useCallback(async b=>{try{a(!0),i(null);const v=await nt.post("/pixels",b),{success:w,data:C,message:k}=v.data;if(!w)throw new Error(k||"Failed to create pixel");return e(N=>[C,...N]),C}catch(v){const w=v?.response?.data?.message||v?.message||"Failed to create pixel";throw i(w),new Error(w)}finally{a(!1)}},[]),d=u.useCallback(async(b,v)=>{try{a(!0),i(null);const w=await nt.put(`/pixels/${b}`,v),{success:C,data:k,message:N}=w.data;if(!C)throw new Error(N||"Failed to update pixel");return e(O=>O.map(R=>R._id===b?k:R)),k}catch(w){const C=w?.response?.data?.message||w?.message||"Failed to update pixel";throw i(C),new Error(C)}finally{a(!1)}},[]),p=u.useCallback(async b=>{try{a(!0),i(null);const v=await nt.delete(`/pixels/${b}`),{success:w,data:C,message:k}=v.data;if(!w)throw new Error(k||"Failed to delete pixel");return e(N=>N.filter(O=>O._id!==b)),C}catch(v){const w=v?.response?.data?.message||v?.message||"Failed to delete pixel";throw i(w),new Error(w)}finally{a(!1)}},[]),h=u.useCallback(()=>{e([]),i(null)},[]),g=u.useCallback(()=>i(null),[]),y={pixels:r,loading:t,error:o,fetchByStoreId:l,create:c,update:d,remove:p,clear:h,clearError:g};return n.jsx(iL.Provider,{value:y,children:s})},lL=()=>{const s=u.useContext(iL);if(!s)throw new Error("usePixels must be used within a PixelProvider");return s},cL=u.createContext(void 0),ISe=({children:s})=>{const[r,e]=u.useState({}),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async h=>{a(!0),i(null);try{const g=await nt.get(`/shipping-profile-location-settings/${h}`);if(!g.data.success)throw new Error(g.data.message||"Failed to fetch location settings");const y=g.data.data||[];return e(b=>({...b,[h]:y})),y}catch(g){const y=g.response?.data?.message||g.message||"Failed to fetch location settings";throw i(y),new Error(y)}finally{a(!1)}},[]),c=u.useCallback(async(h,g,y)=>{a(!0),i(null);try{const b=await nt.put(`/shipping-profile-location-settings/${h}/location/${g}`,y);if(!b.data.success)throw new Error(b.data.message||"Failed to update location setting");const v=b.data.data;return e(w=>{const k=(w[h]||[]).map(N=>N._id===v._id?{...N,...v}:N);return{...w,[h]:k}}),v}catch(b){const v=b.response?.data?.message||b.message||"Failed to update location setting";throw i(v),new Error(v)}finally{a(!1)}},[]),d=u.useCallback(()=>{e({}),i(null)},[]),p=u.useMemo(()=>({settingsByProfileId:r,loading:t,error:o,fetchByProfileId:l,updateLocationSetting:c,clear:d}),[r,t,o,l,c,d]);return n.jsx(cL.Provider,{value:p,children:s})},RSe=()=>{const s=u.useContext(cL);if(s===void 0)throw new Error("useShippingProfileLocationSettings must be used within a ShippingProfileLocationSettingsProvider");return s},dL=u.createContext(void 0),DSe=({children:s})=>{const[r,e]=u.useState({}),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async g=>{a(!0),i(null);try{const y=await nt.get(`/shipping-profile-product-variants/${g}`);if(!y.data.success)throw new Error(y.data.message||"Failed to fetch product variants");const b=y.data.data||[];return e(v=>({...v,[g]:b})),b}catch(y){const b=y.response?.data?.message||y.message||"Failed to fetch product variants";throw i(b),new Error(b)}finally{a(!1)}},[]),c=u.useCallback(async(g,y)=>{a(!0),i(null);try{const b=await nt.post(`/shipping-profile-product-variants/${g}`,y);if(!b.data.success)throw new Error(b.data.message||"Failed to add product variant");const v=b.data.data;return e(w=>({...w,[g]:[...w[g]||[],v]})),v}catch(b){const v=b.response?.data?.message||b.message||"Failed to add product variant";throw i(v),new Error(v)}finally{a(!1)}},[]),d=u.useCallback(async(g,y)=>{a(!0),i(null);try{const b=await nt.delete(`/shipping-profile-product-variants/${g}`);if(!b.data.success)throw new Error(b.data.message||"Failed to remove product variant");const v=y||b.data.meta?.shippingProfileId;v&&e(w=>({...w,[v]:(w[v]||[]).filter(C=>C._id!==g)}))}catch(b){const v=b.response?.data?.message||b.message||"Failed to remove product variant";throw i(v),new Error(v)}finally{a(!1)}},[]),p=u.useCallback(()=>{e({}),i(null)},[]),h=u.useMemo(()=>({entriesByProfileId:r,loading:t,error:o,fetchByProfileId:l,addEntry:c,deleteEntry:d,clear:p}),[r,t,o,l,c,d,p]);return n.jsx(dL.Provider,{value:h,children:s})},LSe=()=>{const s=u.useContext(dL);if(s===void 0)throw new Error("useShippingProfileProductVariants must be used within a ShippingProfileProductVariantsProvider");return s},uL=u.createContext(void 0),FSe=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(0),[o,i]=u.useState(!1),[l,c]=u.useState(null),d=u.useCallback(async v=>{try{i(!0),c(null);const w=await nt.post("/shipping-zone-rates",v),{success:C,data:k,message:N}=w.data;if(!C)throw new Error(N||"Failed to create shipping zone rate");return e(O=>[k,...O]),a(O=>O+1),k}catch(w){const C=w?.response?.data?.message||w?.message||"Failed to create shipping zone rate";throw c(C),new Error(C)}finally{i(!1)}},[]),p=u.useCallback(async v=>{try{i(!0),c(null);const w=await nt.get(`/shipping-zone-rates/zone/${v}`),{success:C,data:k,message:N,meta:O}=w.data;if(!C)throw new Error(N||"Failed to fetch shipping zone rates");const R=k||[];return e(R),O?.total!=null?a(O.total):a(R.length),R}catch(w){const C=w?.response?.data?.message||w?.message||"Failed to fetch shipping zone rates";throw c(C),new Error(C)}finally{i(!1)}},[]),h=u.useCallback(async(v,w)=>{try{i(!0),c(null);const C=await nt.put(`/shipping-zone-rates/${v}`,w),{success:k,data:N,message:O}=C.data;if(!k)throw new Error(O||"Failed to update shipping zone rate");return e(R=>R.map(L=>L._id===v?N:L)),N}catch(C){const k=C?.response?.data?.message||C?.message||"Failed to update shipping zone rate";throw c(k),new Error(k)}finally{i(!1)}},[]),g=u.useCallback(async v=>{try{i(!0),c(null);const w=await nt.delete(`/shipping-zone-rates/${v}`),{success:C,message:k}=w.data;if(!C)throw new Error(k||"Failed to delete shipping zone rate");e(N=>N.filter(O=>O._id!==v)),a(N=>Math.max(0,N-1))}catch(w){const C=w?.response?.data?.message||w?.message||"Failed to delete shipping zone rate";throw c(C),new Error(C)}finally{i(!1)}},[]),y=u.useCallback(()=>{e([]),a(0)},[]),b=u.useMemo(()=>({shippingZoneRates:r,loading:o,error:l,total:t,createShippingZoneRate:d,getShippingZoneRatesByZoneId:p,updateShippingZoneRate:h,deleteShippingZoneRate:g,clearShippingZoneRates:y}),[r,o,l,t,d,p,h,g,y]);return n.jsx(uL.Provider,{value:b,children:s})},BSe=()=>{const s=u.useContext(uL);if(!s)throw new Error("useShippingZoneRates must be used within a ShippingZoneRateProvider");return s},fL=u.createContext(void 0),zSe=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(0),[o,i]=u.useState(!1),[l,c]=u.useState(null),d=u.useCallback(async v=>{try{i(!0),c(null);const w=await nt.post("/shipping-zones",v),{success:C,data:k,message:N}=w.data;if(!C)throw new Error(N||"Failed to create shipping zone");return e(O=>[k,...O]),a(O=>O+1),k}catch(w){const C=w?.response?.data?.message||w?.message||"Failed to create shipping zone";throw c(C),new Error(C)}finally{i(!1)}},[]),p=u.useCallback(async v=>{try{i(!0),c(null);const w=await nt.get(`/shipping-zones/profile/${v}`),{success:C,data:k,message:N,meta:O}=w.data;if(!C)throw new Error(N||"Failed to fetch shipping zones");const R=k||[];return e(R),O?.total!=null?a(O.total):a(R.length),R}catch(w){const C=w?.response?.data?.message||w?.message||"Failed to fetch shipping zones";throw c(C),new Error(C)}finally{i(!1)}},[]),h=u.useCallback(async(v,w)=>{try{i(!0),c(null);const C=await nt.put(`/shipping-zones/${v}`,w),{success:k,data:N,message:O}=C.data;if(!k)throw new Error(O||"Failed to update shipping zone");return e(R=>R.map(L=>L._id===v?N:L)),N}catch(C){const k=C?.response?.data?.message||C?.message||"Failed to update shipping zone";throw c(k),new Error(k)}finally{i(!1)}},[]),g=u.useCallback(async v=>{try{i(!0),c(null);const w=await nt.delete(`/shipping-zones/${v}`),{success:C,message:k}=w.data;if(!C)throw new Error(k||"Failed to delete shipping zone");e(N=>N.filter(O=>O._id!==v)),a(N=>Math.max(N-1,0))}catch(w){const C=w?.response?.data?.message||w?.message||"Failed to delete shipping zone";throw c(C),new Error(C)}finally{i(!1)}},[]),y=u.useCallback(()=>{e([]),a(0)},[]),b=u.useMemo(()=>({shippingZones:r,loading:o,error:l,total:t,createShippingZone:d,getShippingZonesByShippingProfileId:p,updateShippingZone:h,deleteShippingZone:g,clearShippingZones:y}),[r,o,l,t,d,p,h,g,y]);return n.jsx(fL.Provider,{value:b,children:s})},$Se=()=>{const s=u.useContext(fL);if(!s)throw new Error("useShippingZones must be used within a ShippingZoneProvider");return s},pL=u.createContext(void 0),USe=({children:s})=>{const[r,e]=u.useState([]),[t,a]=u.useState(!1),[o,i]=u.useState(null),l=u.useCallback(async()=>{a(!0),i(null);try{const{data:d}=await nt.get("/themes/themesStatic");d.success?e(d.data||[]):e([])}catch(d){i(d?.response?.data?.message||"Failed to fetch themes"),e([])}finally{a(!1)}},[]),c=u.useMemo(()=>({themes:r,loading:t,error:o,fetchAll:l}),[r,t,o,l]);return n.jsx(pL.Provider,{value:c,children:s})};function VSe(){const s=u.useContext(pL);if(!s)throw new Error("useThemes must be used within ThemesProvider");return s}const HSe=()=>n.jsx(Yt,{children:n.jsxs("div",{className:"h-fit w-full rounded-md px-24 py-12 flex flex-col gap-4",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"font-bold",children:"Add Blog Post"}),n.jsx("button",{className:"cursor-pointer rounded-lg shadow text-white bg-[#002741] py-2 px-6",children:"Manage Blogs"})]}),n.jsxs("div",{className:"flex gap-4",children:["``",n.jsxs("div",{className:"flex-1 flex flex-col gap-4",children:[n.jsxs("div",{className:"p-4 rounded-lg shadow-md bg-white flex flex-col gap-4",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:"font-semibold",children:"Title"}),n.jsx("input",{type:"text",className:"rounded-2xl border border-gray-300 p-2"})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:"font-semibold",children:"Content"}),n.jsx("textarea",{rows:6,className:"rounded-2xl border border-gray-300 p-2"})]})]}),n.jsxs("div",{className:"p-4 rounded-lg shadow-md bg-white",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"font-semibold",children:"Excerpt"}),n.jsx("span",{children:"edit"})]}),n.jsx("p",{className:"text-sm mt-4",children:"Add a summary of the post to appear on your home page or blog"})]}),n.jsxs("div",{className:"p-4 rounded-lg shadow-md bg-white gap-2 flex flex-col",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"font-semibold",children:"Search engine listing"}),n.jsx("span",{children:"edit"})]}),n.jsx("p",{className:"text-sm",children:"Add a title and description to see how this blog post mght appear in a search engine listing"})]}),n.jsxs("div",{className:"p-4 rounded-lg shadow-md bg-white flex gap-4 flex-col",children:[n.jsx("span",{className:"font-semibold",children:"Organization"}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{children:"Author"}),n.jsx("input",{type:"text",className:"rounded-2xl border border-gray-300"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{children:"Blog"}),n.jsx("input",{type:"text",className:"rounded-2xl border border-gray-300"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{children:"Tags"}),n.jsx("input",{type:"text",className:"rounded-2xl border border-gray-300"})]})]})]})]}),n.jsxs("div",{className:"flex-1 flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white shadow-md rounded-lg p-4 flex flex-col gap-2",children:[n.jsx("span",{className:"font-semibold",children:"Visibility"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"radio"}),n.jsx("span",{children:"Visible"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"radio"}),n.jsx("span",{children:"Hidden"})]})]}),n.jsxs("div",{className:"rounded-lg shadow-md bg-white p-4 px-8 gap-6 flex flex-col",children:[n.jsx("span",{className:"font-semibold",children:"Image"}),n.jsxs("div",{className:"flex flex-col justify-center items-center w-full h-36 mb-5 rounded-lg border border-gray-300 bg-gray-100",children:[n.jsx("button",{className:"bg-white rounded-lg border border-gray-300 py-2 px-6",children:"Add Image"}),n.jsx("span",{children:"or drop an image to upload"})]})]}),n.jsxs("div",{className:"bg-white shadow-md p-4 rounded-lg flex flex-col gap-2",children:[n.jsx("span",{className:"font-semibold",children:"Theme template"}),n.jsx("span",{className:"border border-gray-300 rounded-2xl px-4 py-1",children:"Default blog post"})]})]})]})]})}),WSe=()=>{const s=dr();return n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Blog posts"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{className:"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Manage Blogs"}),n.jsx("button",{onClick:()=>s("/content/blog-posts/new"),className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"+ Create Blog"})]})]})}),n.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:n.jsx("div",{className:"w-full border border-gray-200 min-h-[400px] flex justify-center items-center",children:n.jsxs("div",{className:"flex flex-col justify-center items-center gap-2",children:[n.jsx("span",{className:"text-base font-medium text-gray-900",children:"Write a blog post"}),n.jsx("span",{className:"text-xs text-gray-600",children:"Blog posts are a great way to build a community around your products and your brand."}),n.jsxs("div",{className:"flex gap-2 mt-2",children:[n.jsx("button",{className:"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Learn More"}),n.jsx("button",{className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Manage Blogs"})]})]})})})]})})},qSe=()=>n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Files"}),n.jsx("button",{className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Upload files"})]})}),n.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:n.jsx("div",{className:"w-full border border-gray-200 min-h-[400px] justify-center flex items-center",children:n.jsxs("div",{className:"flex flex-col justify-center items-center gap-2",children:[n.jsx("span",{className:"text-base font-medium text-gray-900",children:"Upload and manage your files"}),n.jsx("span",{className:"text-xs text-gray-600",children:"Files can be images, videos, documents and more."}),n.jsx("button",{className:"mt-2 px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Upload files"})]})})})]})}),GSe=()=>n.jsx(Yt,{children:n.jsx("div",{children:"ContentMenusPage"})}),KSe=()=>n.jsx(Yt,{children:n.jsx("div",{children:"ContentMetaObjectsPage"})}),YSe=()=>n.jsx("div",{children:"LanguageSettingsPage"}),ZSe=()=>n.jsx(Yt,{children:n.jsx("div",{children:"MarketSettingsPage"})}),XSe=()=>n.jsx("div",{children:"MetafeildsAndMetaObjectsSettingsPage"}),QSe=({theme:s,installedThemes:r,onInstallClick:e})=>{const t=u.useCallback(o=>{o.currentTarget.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="300" height="200" viewBox="0 0 300 200"><rect width="300" height="200" fill="%23f3f4f6"/><text x="150" y="100" text-anchor="middle" fill="%236b7280" font-family="Arial" font-size="14">No Preview</text></svg>'},[]),a=Array.isArray(r)&&r.some(o=>String((o.themeId||{})._id)===String(s._id));return n.jsxs("div",{className:"bg-white border border-gray-200 flex flex-col hover:border-gray-300 transition-colors group",children:[n.jsxs("div",{className:"relative w-full h-[140px] overflow-hidden bg-gray-50",children:[n.jsx("img",{src:s?.thumbnailUrl||"",alt:s?.name,className:"w-full h-full object-cover",onError:t}),n.jsxs("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center gap-2 opacity-0 transition-opacity group-hover:opacity-100",children:[n.jsxs("button",{className:"flex items-center gap-1 px-2 py-1 border border-white bg-transparent text-white text-xs hover:bg-white hover:text-gray-900",children:[n.jsx(RF,{className:"w-3 h-3"}),n.jsx("span",{children:"Preview"})]}),n.jsxs("button",{className:"flex items-center gap-1 px-2 py-1 border border-white bg-transparent text-white text-xs hover:bg-white hover:text-gray-900",children:[n.jsx(HO,{className:"w-3 h-3"}),n.jsx("span",{children:"Details"})]})]})]}),n.jsxs("div",{className:"p-3",children:[n.jsxs("div",{className:"flex justify-between items-start mb-1.5",children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 capitalize",children:s?.name}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"flex gap-0.5",children:[...Array(5)].map((o,i)=>n.jsx(XO,{className:"w-2.5 h-2.5 text-orange-500 fill-current"},i))}),n.jsx("span",{className:"text-xs text-gray-500",children:Number(s?.rating?.average||0).toFixed(1)})]})]}),s?.description&&n.jsx("p",{className:"text-xs text-gray-600 mb-2 leading-snug capitalize line-clamp-2",children:s?.description}),n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"text-xs text-gray-500 bg-gray-50 px-1.5 py-0.5 capitalize",children:s?.category}),n.jsx("span",{className:"text-xs text-gray-600",children:"Free"})]}),n.jsxs("div",{className:"flex gap-1.5 flex-col",children:[n.jsx("button",{className:"w-full px-2 py-1.5 text-xs font-medium text-white bg-gray-900 border border-gray-900 hover:bg-gray-800",children:"Try theme"}),n.jsxs("div",{className:"flex gap-1.5",children:[n.jsx("button",{className:"flex-1 px-2 py-1.5 text-xs font-medium text-gray-700 border border-gray-200 hover:bg-gray-50",children:"View demo"}),a?n.jsx("button",{className:"flex-1 px-2 py-1.5 text-xs font-medium text-gray-500 bg-gray-100 border border-gray-200 cursor-not-allowed",disabled:!0,children:"Installed"}):n.jsx("button",{onClick:()=>e(s._id),className:"flex-1 px-2 py-1.5 text-xs font-medium text-gray-700 border border-gray-200 hover:bg-gray-50",children:"Install"})]})]})]})]})},JSe=[{name:"demo theme"},{name:"demo theme"},{name:"demo theme"},{name:"demo theme"},{name:"demo theme"},{name:"demo theme"},{name:"demo theme"},{name:"demo theme"},{name:"demo theme"},{name:"demo theme"},{name:"demo theme"},{name:"demo theme"},{name:"demo theme"},{name:"demo theme"},{name:"demo theme"},{name:"demo theme"},{name:"demo theme"},{name:"demo theme"}],eNe=()=>n.jsx(n.Fragment,{children:JSe.map((s,r)=>n.jsx(QSe,{},r))});function tNe(){return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[n.jsx("div",{className:"mb-8 pb-4 border-b border-gray-200",children:n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Online Store"})}),n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"bg-white border border-gray-200 p-4 flex gap-4",children:[n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"relative w-fit",children:[n.jsx("img",{className:"w-32 h-32 object-cover border border-gray-200",src:"https://picsum.photos/seed/picsum/200/300",alt:""}),n.jsx("div",{className:"absolute -right-2 -bottom-2",children:n.jsx("img",{className:"w-16 h-16 object-cover border border-gray-200",src:"https://picsum.photos/seed/picsum/200/300",alt:""})})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{className:"px-3 py-1.5 text-sm text-gray-700 border border-gray-200 hover:bg-gray-50",children:"View Your Store"}),n.jsx("button",{className:"px-3 py-1.5 text-sm text-gray-700 border border-gray-200 hover:bg-gray-50",children:"Import Theme"})]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx("img",{className:"w-32 h-32 object-cover border border-gray-200",src:"https://picsum.photos/seed/picsum/200/300",alt:""}),n.jsxs("div",{className:"flex flex-col gap-1.5",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm text-gray-900",children:"Horizon"}),n.jsx("span",{className:"text-xs text-gray-600 bg-gray-100 px-2 py-0.5",children:"Current Theme"})]}),n.jsx("span",{className:"text-xs text-gray-500",children:"Added: 10:07 am"}),n.jsx("span",{className:"text-xs text-gray-500",children:"Version 4.0"}),n.jsx("span",{className:"text-xs text-gray-700",children:"Edit Theme"})]})]})]})}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[n.jsxs("div",{className:"bg-white border border-gray-200 p-4 flex justify-between items-center",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Explore More Themes"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Browse professionally designed free and premium themes"})]}),n.jsx("button",{className:"px-3 py-1.5 text-sm text-gray-700 border border-gray-200 hover:bg-gray-50",children:"Visit Theme Store"})]}),n.jsxs("div",{className:"bg-white border border-gray-200 p-4 flex justify-between items-center",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Develop Your Theme"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Use the Ziplofy CLI tool to develop your theme from scratch"})]}),n.jsx("button",{className:"px-3 py-1.5 text-sm text-gray-700 border border-gray-200 hover:bg-gray-50",children:"Get Started"})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-4",children:"Design a Custom Theme"}),n.jsx("div",{className:"mb-4",children:n.jsx("input",{className:"w-full max-w-md px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400",type:"text",placeholder:"e.g. modern handmade jewellery"})}),n.jsx("div",{className:"grid grid-cols-4 gap-4 overflow-y-auto max-h-[600px] py-2",children:n.jsx(eNe,{})})]})]})})}function rNe(){const[s,r]=u.useState(""),[e,t]=u.useState(""),[a,o]=u.useState(""),[i,l]=u.useState(""),[c,d]=u.useState("All"),[p,h]=u.useState(!1),[g,y]=u.useState(""),[b,v]=u.useState(""),[w,C]=u.useState(""),k=u.useCallback(Y=>{r(Y.target.value)},[]),N=u.useCallback(Y=>{t(Y.target.value)},[]),O=u.useCallback(Y=>{o(Y.target.value)},[]),R=u.useCallback(Y=>{l(Y.target.value)},[]),L=u.useCallback(Y=>{d(Y)},[]),B=u.useCallback(()=>{h(Y=>!Y)},[]),G=u.useCallback(Y=>{y(Y.target.value)},[]),$=u.useCallback(Y=>{v(Y.target.value)},[]),z=u.useCallback(Y=>{C(Y.target.value)},[]);return n.jsxs(Yt,{children:[n.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[n.jsx("div",{className:"mb-8 pb-4 border-b border-gray-200",children:n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Store Preferences"})}),n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"bg-white border border-gray-200 p-4 flex flex-col gap-4",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Store Access"}),n.jsxs("div",{className:"border border-gray-200 p-4 flex flex-col gap-4",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("p",{className:"text-sm text-gray-900",children:"Password protection"}),n.jsx("span",{className:"text-xs text-gray-500",children:"Restrict access to visitors with the password"})]}),n.jsx("span",{className:"text-xs text-gray-500 bg-white/95 p-3",children:"To let anyone access your online store, pick a plan and then remove your password"})]}),n.jsxs("div",{className:"flex flex-col bg-white/95 p-4 gap-4",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:"text-sm text-gray-900",children:"Password"}),n.jsx("input",{value:s,onChange:k,className:"px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400",type:"text"}),n.jsx("span",{className:"text-xs text-gray-500",children:`${s.length} of 100 characters used`})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:"text-sm text-gray-900",children:"Message to your visitors"}),n.jsx("textarea",{value:e,onChange:N,className:"px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 resize-none",rows:3}),n.jsx("span",{className:"text-xs text-gray-500",children:`${e.length} of 5,000 characters used`})]})]})]})}),n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"bg-white border border-gray-200 p-4 flex flex-col gap-4",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Social Sharing Image and SEO"}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"border border-gray-200 flex flex-col flex-1",children:[n.jsxs("div",{className:"flex justify-center items-center flex-col p-8 bg-white/95 border-b border-gray-200",children:[n.jsx("span",{className:"text-sm text-gray-900 mb-1",children:"Add Image"}),n.jsx("span",{className:"text-xs text-gray-500",children:"Recommended: 1200 x 628 pixels"})]}),n.jsx("div",{className:"p-4",children:n.jsx("span",{className:"text-xs text-gray-600",children:"VSJIksjkfjoasfd.myZiplofy.com"})})]}),n.jsxs("div",{className:"flex-1 flex flex-col gap-4",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:"text-sm text-gray-900",children:"Home Page title"}),n.jsx("input",{className:"px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400",value:a,onChange:O,type:"text"}),n.jsx("span",{className:"text-xs text-gray-500",children:`${a.length} of 70 characters used`})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:"text-sm text-gray-900",children:"Meta Description"}),n.jsx("textarea",{className:"px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 resize-none",rows:3,value:i,onChange:R}),n.jsx("span",{className:"text-xs text-gray-500",children:`${i.length} of 320 characters used`})]})]})]})]})}),n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"bg-white border border-gray-200 p-4 flex flex-col gap-4",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Automatic Redirection"}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsxs("div",{className:"w-full border border-gray-200 px-4 py-3 flex justify-between items-center",children:[n.jsxs("div",{className:"flex flex-col gap-0.5",children:[n.jsx("span",{className:"text-sm text-gray-900",children:"Country/Region"}),n.jsx("span",{className:"text-xs text-gray-500",children:"Displays a storefront that matches the visitor's location"})]}),n.jsx("button",{className:"text-xs text-gray-500",children:"Toggle"})]}),n.jsxs("div",{className:"w-full border border-gray-200 px-4 py-3 flex justify-between items-center",children:[n.jsxs("div",{className:"flex flex-col gap-0.5",children:[n.jsx("span",{className:"text-sm text-gray-900",children:"Language"}),n.jsx("span",{className:"text-xs text-gray-500",children:"Displays the language that matches a visitor's browser, when available"})]}),n.jsx("button",{className:"text-xs text-gray-500",children:"Toggle"})]})]})]})}),n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"bg-white border border-gray-200 p-4 flex flex-col gap-4",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Spam Protection"}),n.jsx("span",{className:"text-xs text-gray-500",children:"Enabling hCaptcha can protect your store from spam. Some customers may need to complete the hCaptcha task."})]}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsxs("div",{className:"flex justify-between items-center border border-gray-200 px-4 py-3",children:[n.jsx("span",{className:"text-sm text-gray-900",children:"Enable on contact and comment forms"}),n.jsx("button",{className:"text-xs text-gray-500",children:"Toggle"})]}),n.jsxs("div",{className:"flex justify-between items-center border border-gray-200 px-4 py-3",children:[n.jsx("span",{className:"text-sm text-gray-900",children:"Enable on login, create account and password recovery pages"}),n.jsx("button",{className:"text-xs text-gray-500",children:"Toggle"})]})]})]})}),n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"bg-white border border-gray-200 p-4 flex gap-4 flex-col",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Crawler Access"}),n.jsxs("div",{className:"flex justify-between gap-4",children:[n.jsx("p",{className:"text-xs text-gray-500 flex-1",children:"Authorize external tools to crawl your store. Use the buttons to copy the full values for Signature, Signature-input, and Signature-Agent, then paste them into your http crawler requests."}),n.jsx("button",{onClick:B,className:"px-3 py-1.5 text-sm text-gray-700 border border-gray-200 hover:bg-gray-50",children:"Create signature"})]}),n.jsxs("div",{className:"border border-gray-200 flex flex-col",children:[n.jsxs("div",{className:"w-full border-b border-gray-200 flex gap-2 p-3",children:[n.jsx("span",{onClick:()=>L("All"),className:`text-xs px-2 py-1 cursor-pointer ${c==="All"?"bg-gray-50 text-gray-900":"text-gray-500"}`,children:"All"}),n.jsx("span",{onClick:()=>L("Active"),className:`text-xs px-2 py-1 cursor-pointer ${c==="Active"?"bg-gray-50 text-gray-900":"text-gray-500"}`,children:"Active"}),n.jsx("span",{onClick:()=>L("Expired"),className:`text-xs px-2 py-1 cursor-pointer ${c==="Expired"?"bg-gray-50 text-gray-900":"text-gray-500"}`,children:"Expired"})]}),n.jsx("div",{className:"bg-white/95 flex flex-col justify-center items-center gap-2 p-8 min-h-[300px]",children:n.jsxs("div",{className:"flex flex-col gap-2 justify-center items-center",children:[n.jsx("span",{className:"text-sm text-gray-900",children:"Manage Crawler Access"}),n.jsx("span",{className:"text-xs text-gray-500",children:"Create Signatures that allows trusted tools to crawl your store"}),n.jsx("button",{onClick:B,className:"px-3 py-1.5 text-sm text-gray-700 border border-gray-200 hover:bg-gray-50 mt-2",children:"Create Signature"})]})})]})]})})]}),n.jsx(en,{open:p,onClose:B,title:"Create new signature",maxWidth:"md",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:B,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{className:"px-4 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800",children:"Create Signature"})]}),children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx("span",{className:"text-xs text-gray-500",children:"These details can't be changed after the signature is created"}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:"text-sm text-gray-900",children:"Signature name"}),n.jsx("input",{value:g,onChange:G,type:"text",className:"px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"}),n.jsx("span",{className:"text-xs text-gray-500",children:`${g.length} of 100 characters used`})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:"text-sm text-gray-900",children:"Domain"}),n.jsx("input",{value:b,onChange:$,type:"text",className:"px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:"text-sm text-gray-900",children:"Expires In"}),n.jsx("input",{value:w,onChange:z,type:"text",className:"px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"}),n.jsx("span",{className:"text-xs text-gray-500",children:"Expires on Dec 25, 2025"})]})]})]})})]})}function nNe({title:s,desc:r,route:e,onClick:t}){const a=u.useCallback(()=>{t(e)},[e,t]);return n.jsx("div",{className:"border border-gray-200 p-4 bg-white hover:bg-gray-50 transition-colors",children:n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900",children:s}),n.jsx("p",{className:"text-xs text-gray-600",children:r})]}),n.jsx("button",{onClick:a,className:"bg-gray-900 text-white px-3 py-1.5 hover:bg-gray-800 transition-colors text-sm font-medium",children:"Apply Discount"})]})})}const sNe=({discountCardsData:s,onCardClick:r})=>{const e=u.useCallback(t=>{r(t)},[r]);return n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:s.map((t,a)=>n.jsx(nNe,{title:t.title,desc:t.desc,route:t.route,onClick:e},a))})},aNe=[{title:"Amount Off Products",desc:"Count specific products or collection of products",route:"/discounts/new/amount-off-products"},{title:"Buy X get Y",desc:"Discount specific products or collection of products",route:"/discounts/new/buy-x-get-y"},{title:"Amount off order",desc:"Discount the total order amount",route:"/discounts/new/amount-off-order"},{title:"Free Shipping",desc:"Offer free shipping on an order",route:"/discounts/new/free-shipping"}];function oNe(){const s=dr(),r=u.useCallback(e=>{s(e)},[s]);return n.jsx(Yt,{children:n.jsx("div",{className:"min-h-screen",children:n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Please choose the type of discount you want to create"}),n.jsx(sNe,{discountCardsData:aNe,onCardClick:r})]})})})})}const iNe=()=>{const{marketId:s}=ks(),r=dr(),[e,t]=pt.useState(""),[a,o]=pt.useState("active"),[i,l]=pt.useState(null),{countries:c,getCountries:d,loading:p}=Hx(),{createItem:h,deleteItem:g,getByMarketId:y,items:b,loading:v}=PSe(),{deleteMarket:w,updateMarket:C}=Tm(),{markets:k,getByStoreId:N}=Tm(),{activeStoreId:O}=Ur(),[R,L]=pt.useState(!1),[B,G]=pt.useState(""),[$,z]=pt.useState(!1),[Y,M]=pt.useState(!1),[q,P]=pt.useState(!1),[H,D]=pt.useState(null),[X,se]=pt.useState(!1),[Q,xe]=pt.useState(""),[K,Z]=pt.useState(!1),[ve,ae]=pt.useState(!1),[Se,Pe]=pt.useState("active"),[$e,we]=pt.useState(!1),[Ae,ze]=pt.useState(!1),Ge=pt.useRef(null);pt.useEffect(()=>{const J=I=>{Ge.current&&!Ge.current.contains(I.target)&&z(!1)};return $&&document.addEventListener("mousedown",J),()=>{document.removeEventListener("mousedown",J)}},[$]);const Ue=()=>{M(!0),z(!1)},ht=()=>M(!1),ee=()=>{L(!0),d({limit:250}).catch(()=>{})},ue=()=>{L(!1),G("")};pt.useEffect(()=>{s&&y(s).catch(()=>{})},[s,y]);const Oe=pt.useMemo(()=>k.find(J=>J._id===s),[k,s]);return pt.useEffect(()=>{!Oe&&O&&N(O).catch(()=>{})},[Oe,O,N]),pt.useEffect(()=>{Oe&&(t(Oe.name),xe(Oe.name),o(Oe.status),Pe(Oe.status),l(Oe.parentMarketId??null))},[Oe]),n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs("button",{onClick:()=>r("/markets"),className:"text-sm text-gray-600 hover:text-gray-900 transition-colors",children:[n.jsx(gn,{className:"w-4 h-4 inline mr-1"}),"Markets"]})})})}),n.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[X?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"text",value:Q,onChange:J=>xe(J.target.value),className:"px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-sm"}),n.jsx("button",{disabled:K||!s||!Q.trim(),onClick:async()=>{if(!(!s||!Q.trim()))try{Z(!0);const J=await C(s,{name:Q.trim()});t(J.name),se(!1)}finally{Z(!1)}},className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:K?"Saving...":"Save"}),n.jsx("button",{onClick:()=>{xe(e),se(!1)},className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"})]}):n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:e}),n.jsx("button",{onClick:()=>se(!0),className:"p-1 text-gray-600 hover:text-gray-900 transition-colors","aria-label":"Edit name",children:n.jsx(Bo,{className:"w-4 h-4"})})]}),n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-700",children:"Region"}),n.jsx("span",{className:`px-2 py-0.5 text-xs font-medium ${a==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:a==="active"?"Active":"Draft"}),n.jsx("div",{className:"flex-1"}),n.jsxs("div",{className:"relative",ref:Ge,children:[n.jsx("button",{onClick:()=>z(!$),className:"px-3 py-1.5 text-sm font-medium border border-gray-200 hover:bg-gray-50 transition-colors",children:"More actions"}),$&&n.jsx("div",{className:"absolute right-0 mt-1 w-48 bg-white border border-gray-200 shadow-lg z-10",children:n.jsx("button",{onClick:Ue,className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-50 transition-colors",children:"Delete market"})})]})]}),n.jsxs("div",{className:"border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Status"}),n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("span",{className:"text-sm text-gray-600 flex-1",children:e}),ve?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"relative",children:n.jsxs("select",{value:Se,onChange:J=>Pe(J.target.value),className:"px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400",children:[n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"draft",children:"Draft"})]})}),n.jsx("button",{disabled:$e||!s,onClick:async()=>{if(s)try{we(!0);const J=await C(s,{status:Se});o(J.status),ae(!1)}finally{we(!1)}},className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:$e?"Saving...":"Save"}),n.jsx("button",{onClick:()=>{Pe(a),ae(!1)},className:"px-2 py-1 text-xs font-medium text-gray-700 hover:text-gray-900 transition-colors",children:"Cancel"})]}):n.jsxs("div",{className:"flex items-center gap-2",children:[a==="active"?n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-green-100 text-green-700",children:"Active"}):n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-600",children:"Draft"}),n.jsx("button",{onClick:()=>ae(!0),className:"px-2 py-1 text-xs font-medium text-gray-700 hover:text-gray-900 transition-colors",children:"Edit"})]})]}),n.jsxs("div",{className:"border border-gray-200 p-3",children:[n.jsx("h3",{className:"text-base font-medium text-gray-900 mb-2",children:"Includes"}),n.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-2",children:[v&&n.jsx("span",{className:"text-sm text-gray-600",children:"Loading..."}),!v&&b.map(J=>{const V=typeof J.countryId=="object"&&J.countryId!==null?J.countryId:c.find(pe=>pe._id===J.countryId),re=V?`${V.name} (${V.iso2})`:typeof J.countryId=="string"?J.countryId:"";return n.jsxs("div",{className:"inline-flex items-center gap-1.5 bg-gray-100 px-2 py-1",children:[n.jsx("span",{className:"text-sm text-gray-700",children:re}),n.jsx("button",{onClick:()=>{D({id:J._id,countryName:V?V.name:re}),P(!0)},className:"p-0.5 text-gray-600 hover:text-red-600 transition-colors",children:n.jsx(Zs,{className:"w-3.5 h-3.5"})})]},J._id)})]}),n.jsxs("button",{onClick:ee,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:[n.jsx(On,{className:"w-4 h-4"}),"Add condition"]})]})]}),n.jsxs("div",{className:"border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-1",children:"Customized"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Create unique configurations for customers in this market"})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-2",children:"Inherited"}),n.jsx("div",{className:"border border-gray-200",children:[["Currency"," Indian Rupee (INR )"],["Catalogs"," All products"],["Domain / language"," example.myshopify.com  English"],["Taxes and duties"," Not collecting"],["Online Store"," Horizon"]].map((J,I)=>n.jsxs(pt.Fragment,{children:[n.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm text-gray-900 w-40",children:J[0]}),n.jsx("span",{className:"text-sm text-gray-600",children:J[1]})]}),n.jsx("button",{className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(On,{className:"w-4 h-4"})})]}),I<4&&n.jsx("div",{className:"border-t border-gray-200"})]},J[0]))})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"border border-gray-200 p-4 min-h-[200px]",children:n.jsx("div",{className:"w-full h-40 bg-gray-100"})}),n.jsxs("div",{className:"border border-gray-200 p-4",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Parent market"}),n.jsx("div",{className:"bg-gray-100 px-3 py-2 text-sm text-gray-700",children:i||"Store default"})]}),n.jsxs("div",{className:"border border-gray-200 p-4",children:[n.jsxs("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:["More Settings for ",e]}),n.jsxs("div",{className:"border border-gray-200 p-3 mb-2",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:"Shipping"}),n.jsx("p",{className:"text-xs text-gray-600",children:"1 rate  Shipping to India"})]}),n.jsxs("div",{className:"border border-gray-200 p-3",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:"Customer privacy"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Cookie banner, Data sharing opt-out"})]})]})]})]})}),R&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 bg-gray-500/20 z-[1400]",onClick:ue}),n.jsx("div",{className:"fixed inset-0 z-[1500] flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white w-full max-w-md border border-gray-200 pointer-events-auto",onClick:J=>J.stopPropagation(),children:[n.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex items-center justify-between",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Select a country to include"}),n.jsx("button",{onClick:ue,className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(Zs,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"px-4 py-4",children:n.jsxs("div",{className:"relative",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Country"}),n.jsx("div",{className:"relative",children:n.jsxs("select",{value:B,onChange:J=>G(J.target.value),disabled:p,className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 disabled:bg-gray-50",children:[n.jsx("option",{value:"",children:"Select a country"}),c.map(J=>n.jsx("option",{value:J._id,children:`${J.name} (${J.iso2})`},J._id))]})})]})}),n.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 flex justify-end gap-2",children:[n.jsx("button",{onClick:ue,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{disabled:!B||!s,onClick:async()=>{!s||!B||(await h({marketId:s,countryId:B}),ue())},className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Save"})]})]})})]}),q&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 bg-gray-500/20 z-[1400]",onClick:()=>P(!1)}),n.jsx("div",{className:"fixed inset-0 z-[1500] flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white w-full max-w-xs border border-gray-200 pointer-events-auto",onClick:J=>J.stopPropagation(),children:[n.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:n.jsx("h2",{className:"text-base font-medium text-gray-900",children:`Remove country from ${e}`})}),n.jsx("div",{className:"px-4 py-4",children:n.jsx("p",{className:"text-sm text-gray-600",children:`You really want to delete ${H?.countryName??"this country"} from ${e}?`})}),n.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 flex justify-end gap-2",children:[n.jsx("button",{onClick:()=>P(!1),className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"No"}),n.jsx("button",{disabled:!H,onClick:async()=>{H&&(await g(H.id),P(!1),D(null))},className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Yes"})]})]})})]}),Y&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 bg-gray-500/20 z-[1400]",onClick:ht}),n.jsx("div",{className:"fixed inset-0 z-[1500] flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white w-full max-w-xs border border-gray-200 pointer-events-auto",onClick:J=>J.stopPropagation(),children:[n.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:n.jsx("h2",{className:"text-base font-medium text-gray-900",children:`Delete ${e}?`})}),n.jsx("div",{className:"px-4 py-4",children:n.jsx("p",{className:"text-sm text-gray-600",children:`Your market ${e} will be permanently deleted.`})}),n.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 flex justify-end gap-2",children:[n.jsx("button",{onClick:ht,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:async()=>{s&&(await w(s),r("/markets"))},className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Delete"})]})]})})]})]})})},lNe=()=>{const{catalogId:s}=ks(),r=dr(),{markets:e,getByStoreId:t,loading:a}=Tm(),{activeStoreId:o}=Ur(),[i,l]=u.useState(""),[c,d]=u.useState(!1),{searchBasic:p}=Ol(),[h,g]=u.useState(""),[y,b]=u.useState([]),[v,w]=u.useState([]),[C,k]=u.useState(!1),N=u.useRef(void 0),{createItem:O,getByCatalogId:R,items:L,loading:B,deleteItem:G}=SSe(),{getByCatalogId:$,items:z,loading:Y,createItem:M}=jSe(),[q,P]=u.useState(!1),[H,D]=u.useState({}),[X,se]=u.useState(!1),[Q,xe]=u.useState(null),K=u.useRef(null),Z=u.useRef(null),ve=Ae=>D(ze=>({...ze,[Ae]:!ze[Ae]}));u.useEffect(()=>{o&&t(o).catch(()=>{})},[o,t]),u.useEffect(()=>{if(!h||!o){b([]),k(!1);return}return window.clearTimeout(N.current),N.current=window.setTimeout(async()=>{const Ae=await p({q:h,storeId:o}).catch(()=>[]);b(Ae),k(Ae.length>0)},300),()=>window.clearTimeout(N.current)},[h,o,p]),u.useEffect(()=>{s&&R(String(s)).catch(()=>{})},[s,R]),u.useEffect(()=>{s&&$(String(s)).catch(()=>{})},[s,$]),u.useEffect(()=>{const Ae=ze=>{K.current&&!K.current.contains(ze.target)&&d(!1),Z.current&&!Z.current.contains(ze.target)&&k(!1)};return document.addEventListener("mousedown",Ae),()=>document.removeEventListener("mousedown",Ae)},[]);const ae=u.useCallback(Ae=>{const ze=!!L.find(Ue=>Ue.productId===Ae._id),Ge=!!v.find(Ue=>Ue._id===Ae._id);!ze&&!Ge&&(w(Ue=>[...Ue,Ae]),g(""),k(!1))},[L,v]),Se=u.useCallback(async()=>{if(s)try{P(!0),await Promise.all(v.map(Ae=>O({catalogId:String(s),productId:Ae._id,isManuallyAdded:!0}))),w([]),s&&R(String(s)).catch(()=>{})}finally{P(!1)}},[s,v,O,R]),Pe=u.useCallback(async()=>{!s||!i||(await M({catalogId:String(s),marketId:i}),l(""),s&&$(String(s)).catch(()=>{}))},[s,i,M,$]),$e=u.useCallback(async()=>{Q&&(await G(Q.id).catch(()=>{}),se(!1),xe(null),s&&R(String(s)).catch(()=>{}))},[Q,G,s,R]),we=e.find(Ae=>Ae._id===i);return n.jsxs(Yt,{children:[n.jsx("div",{className:"min-h-screen",children:n.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 py-6",children:[n.jsxs("div",{className:"mb-4",children:[n.jsxs("button",{onClick:()=>r("/markets/catalogs"),className:"flex items-center gap-1.5 text-gray-600 hover:text-gray-900 mb-3 transition-colors",children:[n.jsx(gn,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-medium cursor-pointer",children:"Back"})]}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Catalog details"})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign to market"}),n.jsxs("div",{className:"relative",ref:K,children:[n.jsxs("button",{type:"button",onClick:()=>d(!c),disabled:a,className:"w-full md:w-[280px] flex items-center justify-between px-3 py-2 border border-gray-200 rounded text-sm text-left bg-white hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx("span",{className:we?"text-gray-900":"text-gray-400 italic",children:we?`${we.name} (${we.status==="active"?"Active":"Draft"})`:"Select a market"}),n.jsx(Ys,{className:`w-4 h-4 text-gray-400 transition-transform ${c?"rotate-180":""}`})]}),c&&n.jsx("div",{className:"absolute z-10 w-full md:w-[280px] mt-1 bg-white border border-gray-200 rounded shadow-lg max-h-60 overflow-y-auto",children:e.map(Ae=>{const ze=!!z.find(Ge=>Ge.marketId===Ae._id);return n.jsxs("button",{type:"button",onClick:()=>{ze||(l(Ae._id),d(!1))},disabled:ze||a,className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 transition-colors flex items-center justify-between ${ze?"opacity-50 cursor-not-allowed":""}`,children:[n.jsx("span",{children:`${Ae.name} (${Ae.status==="active"?"Active":"Draft"})`}),ze&&n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded bg-green-50 text-green-700 border border-green-200",children:"Added"})]},Ae._id)})})]}),i&&!z.find(Ae=>Ae.marketId===i)&&n.jsx("div",{className:"flex justify-end mt-3",children:n.jsx("button",{type:"button",onClick:Pe,className:"px-3 py-1.5 rounded bg-gray-900 text-white text-sm font-medium hover:bg-gray-800 transition-colors",children:"Save"})})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Products"}),n.jsxs("div",{className:"relative mb-4",ref:Z,children:[n.jsxs("div",{className:"relative",children:[n.jsx(no,{className:"w-4 h-4 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none"}),n.jsx("input",{type:"text",placeholder:"Search products",value:h,onChange:Ae=>g(Ae.target.value),className:"w-full pl-9 pr-3 py-2 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-300 transition-colors"})]}),C&&y.length>0&&n.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded shadow-lg max-h-60 overflow-y-auto",children:y.map(Ae=>{const ze=!!L.find(Ge=>Ge.productId===Ae._id)||!!v.find(Ge=>Ge._id===Ae._id);return n.jsxs("button",{type:"button",onClick:()=>ae({_id:Ae._id,title:Ae.title}),disabled:ze,className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 transition-colors flex items-center justify-between ${ze?"opacity-50 cursor-not-allowed":""}`,children:[n.jsx("span",{children:Ae.title}),L.find(Ge=>Ge.productId===Ae._id)&&n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded bg-green-50 text-green-700 border border-green-200",children:"Added"})]},Ae._id)})})]}),v.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:v.map(Ae=>n.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 text-sm font-medium rounded bg-gray-50 text-gray-700 border border-gray-200",children:[Ae.title,n.jsx("button",{type:"button",onClick:()=>w(ze=>ze.filter(Ge=>Ge._id!==Ae._id)),className:"hover:text-gray-900 transition-colors",children:n.jsx(Zs,{className:"w-3.5 h-3.5"})})]},Ae._id))}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{type:"button",disabled:q||!s,onClick:Se,className:"px-3 py-1.5 rounded bg-gray-900 text-white text-sm font-medium hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:q?"Saving...":"Save"})})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded overflow-hidden mb-4",children:[n.jsxs("div",{className:"grid grid-cols-[1fr_220px_220px_60px] px-3 py-2 text-xs font-medium text-gray-600 bg-gray-50",children:[n.jsx("div",{children:"Product"}),n.jsx("div",{children:"Price in INR"}),n.jsx("div",{children:"Compare at price"}),n.jsx("div",{})]}),n.jsx("div",{className:"border-t border-gray-200"}),B?n.jsx("div",{className:"px-3 py-3 text-sm text-gray-600",children:"Loading products..."}):L.length===0?n.jsx("div",{className:"px-3 py-3 text-sm text-gray-600",children:"No products in catalog"}):L.map((Ae,ze)=>{const Ge=Ae.product?.title||"Untitled",Ue=Ae.product?.imageUrl||null,ht=Ae.variants?.length||0,ee=!!H[Ae._id];return n.jsxs("div",{children:[n.jsxs("div",{className:"grid grid-cols-[1fr_220px_220px_60px] items-center px-3 py-2 hover:bg-gray-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-7 h-7 bg-gray-100 rounded flex items-center justify-center shrink-0",children:Ue?n.jsx("img",{src:Ue,alt:Ge,className:"w-7 h-7 object-cover rounded"}):n.jsx(xl,{className:"w-4 h-4 text-gray-400"})}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:Ge}),n.jsxs("div",{className:"text-xs text-gray-500",children:[ht," ",ht===1?"variant":"variants"]})]})]}),n.jsx("div",{children:n.jsx("input",{type:"text",defaultValue:Ae.product?.price??"",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-300 transition-colors"})}),n.jsx("div",{children:n.jsx("input",{type:"text",defaultValue:Ae.product?.compareAtPrice??"",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-300 transition-colors"})}),n.jsxs("div",{className:"flex items-center gap-1",children:[ht>0&&n.jsx("button",{type:"button",onClick:()=>ve(Ae._id),className:"p-1 hover:bg-gray-100 rounded transition-colors",children:ee?n.jsx(uf,{className:"w-4 h-4 text-gray-600"}):n.jsx(Ys,{className:"w-4 h-4 text-gray-600"})}),n.jsx("button",{type:"button",onClick:()=>{xe({id:Ae._id,title:Ge}),se(!0)},className:"p-1 hover:bg-red-50 rounded transition-colors","aria-label":"Remove from catalog",children:n.jsx(Xs,{className:"w-4 h-4 text-gray-600 hover:text-red-600"})})]})]}),ee&&Ae.variants&&Ae.variants.map((ue,Oe)=>n.jsxs("div",{className:`grid grid-cols-[1fr_220px_220px_60px] items-center px-3 py-1.5 bg-gray-50 ${Oe<Ae.variants.length-1?"border-b border-gray-200":""}`,children:[n.jsxs("div",{className:"flex items-center gap-2 pl-5",children:[n.jsx("div",{className:"w-6 h-6 bg-gray-100 rounded flex items-center justify-center shrink-0",children:ue.imageUrl?n.jsx("img",{src:ue.imageUrl,alt:ue.sku||"",className:"w-6 h-6 object-cover rounded"}):n.jsx(xl,{className:"w-3.5 h-3.5 text-gray-400"})}),n.jsx("span",{className:"text-sm text-gray-700",children:Object.entries(ue.optionValues||{}).map(([J,I])=>`${J}: ${I}`).join("  ")||ue.sku})]}),n.jsx("div",{children:n.jsx("input",{type:"text",defaultValue:ue.price??"",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-300 transition-colors"})}),n.jsx("div",{children:n.jsx("input",{type:"text",defaultValue:ue.compareAtPrice??"",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-300 transition-colors"})}),n.jsx("div",{})]},ue._id)),ze<L.length-1&&n.jsx("div",{className:"border-t border-gray-200"})]},Ae._id)})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Catalog active in markets"}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:Y?"Loading markets...":`${z.length} market(s)`}),z.length>0&&n.jsx("div",{className:"flex flex-wrap gap-2",children:z.map(Ae=>{const ze=e.find(Ue=>Ue._id===Ae.marketId),Ge=ze?ze.name:Ae.marketId;return n.jsx("span",{className:"inline-flex items-center px-2.5 py-1 text-sm font-medium rounded bg-gray-50 text-gray-700 border border-gray-200",children:Ge},Ae._id)})})]})]})}),X&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 bg-gray-500/20 z-[1400]",onClick:()=>se(!1),"aria-hidden":"true"}),n.jsx("div",{className:"fixed inset-0 z-[1500] flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md shadow-lg border border-gray-200 pointer-events-auto",onClick:Ae=>Ae.stopPropagation(),children:[n.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex justify-between items-center",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Remove product from catalog"}),n.jsx("button",{onClick:()=>se(!1),className:"p-1 hover:bg-gray-100 rounded transition-colors","aria-label":"Close",children:n.jsx(Zs,{className:"w-5 h-5 text-gray-500"})})]}),n.jsx("div",{className:"px-4 py-4",children:n.jsxs("p",{className:"text-sm text-gray-700",children:["Are you sure you want to remove ",n.jsx("span",{className:"font-medium",children:Q?.title||"this product"})," from this catalog?"]})}),n.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 flex justify-end gap-2",children:[n.jsx("button",{onClick:()=>se(!1),className:"px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded transition-colors",children:"Cancel"}),n.jsx("button",{onClick:$e,className:"px-3 py-1.5 text-sm font-medium text-white bg-red-600 rounded hover:bg-red-700 transition-colors",children:"Yes, remove"})]})]})})]})]})};function cNe({title:s,status:r,onTitleChange:e,onStatusChange:t}){return n.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"md:col-span-3",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Title"}),n.jsx("input",{type:"text",value:s,onChange:a=>e(a.target.value),className:"w-full rounded border border-gray-200 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-300 transition-colors",placeholder:"Enter catalog title"})]}),n.jsxs("div",{className:"md:col-span-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Status"}),n.jsxs("select",{value:r,onChange:a=>t(a.target.value),className:"w-full rounded border border-gray-200 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-300 bg-white transition-colors",children:[n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"draft",children:"Draft"})]})]})]})})}function dNe({currencies:s,currencyId:r,loading:e=!1,onCurrencyChange:t,priceAdjustment:a,onPriceAdjustmentChange:o,adjustDirection:i,onAdjustDirectionChange:l,includeCompareAt:c,onIncludeCompareAtChange:d}){return n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 space-y-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Pricing"}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-start sm:items-center",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Set prices in"}),n.jsx("select",{value:r,onChange:p=>t(p.target.value),disabled:e,className:"w-full sm:w-64 rounded border border-gray-200 px-3 py-2 text-sm bg-white focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-300 transition-colors",children:s.map(p=>n.jsx("option",{value:p._id,children:`${p.code}${p.symbol?` (${p.symbol})`:""}  ${p.name}`},p._id))})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700 md:w-36",children:"Price adjustment"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"number",value:a,onChange:p=>o(Number(p.target.value)),className:"w-28 rounded border border-gray-200 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-300 transition-colors"}),n.jsx("span",{className:"text-sm text-gray-700",children:"%"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>l("decrease"),className:`cursor-pointer px-3 py-1.5 rounded text-sm font-medium border transition-colors ${i==="decrease"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-200 hover:bg-gray-50"}`,children:"Decrease"}),n.jsx("button",{type:"button",onClick:()=>l("increase"),className:`cursor-pointer px-3 py-1.5 rounded text-sm font-medium border transition-colors ${i==="increase"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-200 hover:bg-gray-50"}`,children:"Increase"})]}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-gray-700",children:[n.jsx("input",{type:"checkbox",checked:c,onChange:p=>d(p.target.checked),className:"h-4 w-4 rounded border-gray-300 text-gray-900 focus:ring-gray-400"}),"Include compare-at price"]})]})]})}const uNe=()=>{const[s,r]=u.useState("active"),[e,t]=u.useState(""),[a]=u.useState(!0),[o,i]=u.useState("decrease"),[l,c]=u.useState(!0),[d,p]=u.useState(0),[h,g]=u.useState(""),{currencies:y,getCurrencies:b,loading:v}=_Se(),{createCatalog:w}=rL(),{activeStoreId:C}=Ur(),k=dr();u.useEffect(()=>{b({limit:250}).then(O=>{O&&O.length&&!h&&g(O[0]._id)}).catch(()=>{})},[]);const N=u.useCallback(async()=>{!C||!e||!h||(await w({storeId:C,title:e,status:s,currencyId:h,priceAdjustment:d,priceAdjustmentSide:o,includeCompareAtPrice:l,autoIncludeNewProducts:a}),k("/markets/catalogs"))},[C,e,s,h,d,o,l,a,w,k]);return n.jsx(Yt,{children:n.jsx("div",{className:"min-h-screen",children:n.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 py-6",children:[n.jsxs("div",{className:"mb-4",children:[n.jsxs("button",{onClick:()=>k("/markets/catalogs"),className:"flex items-center gap-1.5 text-gray-600 hover:text-gray-900 mb-3 transition-colors",children:[n.jsx(gn,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-medium cursor-pointer",children:"Back"})]}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"New catalog"}),n.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Create a new catalog for your store"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(cNe,{title:e,status:s,onTitleChange:t,onStatusChange:O=>r(O)}),n.jsx(dNe,{currencies:y,currencyId:h,loading:v,onCurrencyChange:g,priceAdjustment:d,onPriceAdjustmentChange:p,adjustDirection:o,onAdjustDirectionChange:i,includeCompareAt:l,onIncludeCompareAtChange:c})]}),n.jsxs("div",{className:"flex gap-2 justify-end mt-6",children:[n.jsx("button",{type:"button",onClick:()=>k("/markets/catalogs"),className:"px-3 py-1.5 rounded border border-gray-200 text-gray-700 text-sm font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{type:"button",disabled:!C||!e||!h,onClick:N,className:"px-3 py-1.5 rounded bg-gray-900 text-white text-sm font-medium hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Create"})]})]})})})};function fNe({onCreate:s}){return n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 flex flex-col justify-center items-center gap-4",children:[n.jsxs("div",{className:"flex flex-col justify-center items-center text-center",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-1.5",children:"Personalize buying with catalogs"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Create custom product and pricing offerings for your customers with catalogs."})]}),n.jsxs("button",{type:"button",onClick:s,className:"cursor-pointer inline-flex items-center gap-1.5 px-3 py-1.5 rounded bg-gray-900 text-white text-sm font-medium transition-colors",children:[n.jsx(On,{className:"w-4 h-4"}),n.jsx("span",{children:"Create catalog"})]})]})}function pNe({id:s,title:r,status:e,includeCompareAtPrice:t,priceAdjustment:a,priceAdjustmentSide:o,autoIncludeNewProducts:i,onSelect:l}){const c=e==="active";return n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>l(s),children:[n.jsx("td",{className:"px-3 py-2 text-sm font-medium text-gray-900",children:r}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("span",{className:`inline-flex items-center px-2 py-0.5 text-xs font-medium rounded border ${c?"bg-green-50 text-green-700 border-green-200":"bg-gray-50 text-gray-700 border-gray-200"}`,children:c?"Active":"Draft"})}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-700",children:""}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-700",children:t?"Compare-at included":""}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-700",children:`${a||0}% ${o==="increase"?"":""}`}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-700",children:i?"Auto include new":"Manual"})]})}function hNe({catalogs:s,onSelect:r}){return n.jsx("div",{className:"bg-white border border-gray-200 rounded overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[n.jsx("thead",{className:"bg-gray-50 text-xs font-medium text-gray-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left",children:"Title"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Status"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Assigned to"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Price overrides"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Overall adjustment"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Products"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:s.map(e=>n.jsx(pNe,{id:e._id,title:e.title,status:e.status,includeCompareAtPrice:e.includeCompareAtPrice,priceAdjustment:e.priceAdjustment,priceAdjustmentSide:e.priceAdjustmentSide,autoIncludeNewProducts:e.autoIncludeNewProducts,onSelect:r},e._id))})]})})})}function mNe({onCreate:s}){return n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Catalogs"}),n.jsxs("button",{type:"button",onClick:s,className:"cursor-pointer inline-flex items-center gap-1.5 px-3 py-1.5 rounded bg-gray-900 text-white text-sm font-medium transition-colors",children:[n.jsx(On,{className:"w-4 h-4"}),n.jsx("span",{children:"Create catalog"})]})]})}const gNe=()=>{const s=dr(),{catalogs:r,getByStoreId:e,loading:t}=rL(),{activeStoreId:a}=Ur();u.useEffect(()=>{a&&e(a).catch(()=>{})},[a,e]);const o=!t&&r.length===0;return n.jsx(Yt,{children:n.jsx("div",{className:"min-h-screen",children:n.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 py-6",children:[n.jsx("div",{className:"mb-4",children:n.jsx(mNe,{onCreate:()=>s("/markets/catalogs/new")})}),o?n.jsx(fNe,{onCreate:()=>s("/markets/catalogs/new")}):n.jsx(hNe,{catalogs:r,onSelect:i=>s(`/markets/catalogs/${i}`)})]})})})};function yNe({onCreated:s}){const{createMarket:r,loading:e}=Tm(),{activeStoreId:t}=Ur(),[a,o]=u.useState(""),[i,l]=u.useState("active"),c=u.useCallback(async()=>{!t||!a.trim()||(await r({storeId:t,name:a.trim(),status:i}),s?.())},[t,a,i,r,s]);return n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 w-full flex flex-col",children:[n.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Name"}),n.jsx("input",{type:"text",value:a,onChange:d=>o(d.target.value),className:"w-full rounded border border-gray-200 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-300 transition-colors",placeholder:"Enter market name"})]}),n.jsxs("div",{className:"w-full md:w-40",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Status"}),n.jsxs("select",{value:i,onChange:d=>l(d.target.value),className:"w-full rounded border border-gray-200 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-300 bg-white transition-colors",children:[n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"draft",children:"Draft"})]})]})]}),n.jsx("div",{className:"flex justify-end gap-2",children:n.jsx("button",{type:"button",onClick:c,disabled:!a.trim()||!t||e,className:"cursor-pointer px-3 py-1.5 rounded bg-gray-900 text-white text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Create"})})]})}const xNe=()=>{const s=dr(),r=()=>{s("/markets")};return n.jsx(Yt,{children:n.jsx("div",{className:"min-h-screen",children:n.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 py-6",children:[n.jsxs("div",{className:"mb-4",children:[n.jsxs("button",{onClick:r,className:"flex items-center gap-1.5 text-gray-600 hover:text-gray-900 mb-3 transition-colors",children:[n.jsx(gn,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-medium cursor-pointer",children:"Back"})]}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Create New Market"}),n.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Add a new market to your store"})]}),n.jsx(yNe,{onCreated:()=>s("/markets")})]})})})};function vNe({onCreateMarket:s,onGraphView:r}){return n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Markets"}),n.jsxs("div",{className:"flex items-center gap-2",children:[r&&n.jsxs("button",{type:"button",onClick:r,className:"cursor-pointer inline-flex items-center gap-1.5 px-3 py-1.5 rounded border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors text-sm font-medium",children:[n.jsx(WO,{className:"w-4 h-4"}),n.jsx("span",{children:"Graph view"})]}),n.jsxs("button",{type:"button",className:"cursor-pointer inline-flex items-center gap-1.5 px-3 py-1.5 rounded bg-gray-900 text-white transition-colors text-sm font-medium",onClick:s,children:[n.jsx(On,{className:"w-4 h-4"}),n.jsx("span",{children:"Create market"})]})]})]})}function bNe({id:s,name:r,status:e,onSelect:t}){const a=e==="active";return n.jsxs("button",{type:"button",onClick:()=>t(s),className:"cursor-pointer w-full text-left px-3 py-2 grid grid-cols-[2fr_1fr] hover:bg-gray-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Do,{className:"w-4 h-4 text-gray-400"}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:r})]}),n.jsx("div",{className:"flex items-center",children:a?n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 text-xs font-medium rounded bg-green-50 text-green-700 border border-green-200",children:"Active"}):n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 text-xs font-medium rounded bg-gray-50 text-gray-700 border border-gray-200",children:"Draft"})})]})}function wNe({markets:s,onSelect:r}){return n.jsx(n.Fragment,{children:s.map((e,t)=>n.jsxs("div",{children:[n.jsx(bNe,{id:e._id,name:e.name,status:e.status,onSelect:r}),t<s.length-1&&n.jsx("div",{className:"border-t border-gray-200"})]},e._id))})}function jNe({markets:s,loading:r,onSelect:e}){return n.jsxs("div",{className:"bg-white border border-gray-200 rounded overflow-hidden",children:[n.jsxs("div",{className:"grid grid-cols-[2fr_1fr] px-3 py-2 text-xs font-medium text-gray-600 bg-gray-50",children:[n.jsx("div",{children:"Market Name"}),n.jsx("div",{children:"Status"})]}),n.jsx("div",{className:"border-t border-gray-200"}),n.jsxs("div",{children:[r&&n.jsx("div",{className:"px-3 py-3 text-sm text-gray-600",children:"Loading markets..."}),!r&&s.length===0&&n.jsx("div",{className:"px-3 py-3 text-sm text-gray-600",children:"No markets yet"}),!r&&n.jsx(wNe,{markets:s,onSelect:e})]})]})}const xS=()=>{};function CNe({searchValue:s="",onSearchChange:r=xS,onFilterClick:e=xS,onRefreshClick:t=xS}){return n.jsxs("div",{className:"bg-white border border-gray-200 rounded px-3 py-2 mb-4 flex items-center gap-2",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(no,{className:"w-4 h-4 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none"}),n.jsx("input",{type:"text",placeholder:"Search in all markets",value:s,onChange:a=>r(a.target.value),className:"w-full pl-9 pr-3 py-2 rounded border border-gray-200 focus:ring-1 focus:ring-gray-400 focus:border-gray-300 text-sm outline-none transition-colors"})]}),n.jsx("button",{type:"button",title:"Filters",onClick:e,className:"p-1.5 rounded hover:bg-gray-100 text-gray-600 transition-colors",children:n.jsx(af,{className:"w-4 h-4"})}),n.jsx("button",{type:"button",title:"Refresh",onClick:t,className:"p-1.5 rounded hover:bg-gray-100 text-gray-600 transition-colors",children:n.jsx(ou,{className:"w-4 h-4"})})]})}const SNe=()=>{const s=dr(),{markets:r,loading:e,getByStoreId:t}=Tm(),{activeStoreId:a}=Ur(),[o,i]=u.useState("");u.useEffect(()=>{a&&t(a)},[a,t]);const l=u.useCallback(()=>{s("/markets/new")},[]),c=u.useCallback(d=>{i(d)},[]);return n.jsx(Yt,{children:n.jsx("div",{className:"min-h-screen",children:n.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 py-6",children:[n.jsx(vNe,{onCreateMarket:l}),n.jsx(CNe,{searchValue:o,onSearchChange:c}),n.jsx(jNe,{markets:r,loading:e,onSelect:d=>s(`/markets/${d}`)})]})})})},NNe=()=>n.jsxs("div",{className:"text-center py-16",children:[n.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 mb-4",children:n.jsx(Am,{className:"w-8 h-8 text-gray-400"})}),n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"No abandoned carts"}),n.jsx("p",{className:"text-xs text-gray-500 max-w-sm mx-auto",children:"Carts that aren't completed will appear here"})]}),kNe=({cartCount:s,loading:r,onRefresh:e})=>{const t=u.useCallback(()=>{e()},[e]);return n.jsxs("div",{className:"flex items-center justify-between mb-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Abandoned Carts"}),n.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[s," ",s===1?"cart":"carts"]})]}),n.jsx("button",{onClick:t,disabled:r,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Refresh",children:n.jsx(ou,{className:`w-5 h-5 ${r?"animate-spin":""}`})})]})},_Ne=({cart:s,getInitials:r,formatDate:e,onSendEmail:t,onViewDetails:a})=>{const o=u.useCallback(()=>{t(s.customer)},[s.customer,t]),i=u.useCallback(()=>{a(s.customer._id)},[s.customer._id,a]),l=u.useMemo(()=>s.cartItems.reduce((c,d)=>c+d.productVariant.price*d.quantity,0),[s.cartItems]);return n.jsx("div",{className:"bg-white border-b border-gray-200 hover:bg-gray-50 transition-colors cursor-pointer",onClick:i,children:n.jsx("div",{className:"p-4",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-gray-600 text-xs font-medium flex-shrink-0",children:r(s.customer.firstName,s.customer.lastName)}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsxs("h3",{className:"text-sm font-medium text-gray-900 truncate",children:[s.customer.firstName," ",s.customer.lastName]}),n.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[n.jsx(jx,{className:"w-3.5 h-3.5 text-gray-400 flex-shrink-0"}),n.jsx("p",{className:"text-xs text-gray-500 truncate",children:s.customer.email})]})]})]}),n.jsxs("div",{className:"ml-11 mt-2 flex items-center gap-4 text-xs text-gray-500",children:[n.jsxs("span",{children:[s.totalItems," ",s.totalItems===1?"item":"items"]}),n.jsx("span",{children:""}),n.jsxs("span",{children:["",l.toFixed(2)]}),n.jsx("span",{children:""}),n.jsx("span",{children:e(s.lastUpdated)})]})]}),n.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:n.jsx("button",{onClick:c=>{c.stopPropagation(),o()},className:"px-3 py-1.5 text-xs font-medium text-gray-700 hover:bg-gray-200 rounded transition-colors",children:"Send Email"})})]})})})},ENe=({carts:s,getInitials:r,formatDate:e,onSendEmail:t,onViewDetails:a})=>n.jsx("div",{children:s.map((o,i)=>n.jsx(_Ne,{cart:o,getInitials:r,formatDate:e,onSendEmail:t,onViewDetails:a},o.customer._id))}),hL=({isOpen:s,customer:r,emailSubject:e,emailBody:t,emailTemplate:a,onClose:o,onTemplateChange:i,onSubjectChange:l,onBodyChange:c,onSubmit:d})=>{const p=u.useCallback(y=>{i(y.target.value)},[i]),h=u.useCallback(y=>{l(y.target.value)},[l]),g=u.useCallback(y=>{c(y.target.value)},[c]);return n.jsx(en,{open:s,onClose:o,title:n.jsxs("div",{children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Send Recovery Email"}),r&&n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["To: ",r.firstName," ",r.lastName," (",r.email,")"]})]}),maxWidth:"lg",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:o,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:d,disabled:!e.trim()||!t.trim(),className:"px-4 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors min-w-[100px]",children:"Send Email"})]}),children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email-template",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Email Template"}),n.jsxs("select",{id:"email-template",value:a,onChange:p,className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 bg-white",children:[n.jsx("option",{value:"custom",children:"Custom Message"}),n.jsx("option",{value:"reminder",children:"Friendly Reminder"}),n.jsx("option",{value:"discount",children:"Special Offer"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email-subject",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Email Subject"}),n.jsx("input",{id:"email-subject",type:"text",value:e,onChange:h,className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email-body",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Email Body"}),n.jsx("textarea",{id:"email-body",value:t,onChange:g,rows:8,className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 resize-none font-mono",placeholder:"Enter your email message here...",required:!0})]}),n.jsxs("div",{className:"bg-gray-50 p-3 border border-gray-200",children:[n.jsx("h4",{className:"text-xs font-medium text-gray-700 mb-2",children:"Preview:"}),n.jsxs("p",{className:"text-xs font-medium text-gray-900 mb-1.5",children:["Subject: ",e]}),n.jsx("p",{className:"text-xs text-gray-600 whitespace-pre-line",children:t})]})]})})},TNe=()=>{const s=dr(),{abandonedCarts:r,loading:e,error:t,fetchAbandonedCartsByStoreId:a}=QD(),{activeStoreId:o}=Ur(),[i,l]=u.useState(!1),[c,d]=u.useState(null),[p,h]=u.useState(""),[g,y]=u.useState(""),[b,v]=u.useState("custom");u.useEffect(()=>{o&&a(o)},[o,a]);const w=u.useCallback(()=>{o&&a(o)},[o,a]),C=u.useCallback(G=>new Date(G).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),[]),k=u.useCallback((G,$)=>`${G.charAt(0)}${$.charAt(0)}`.toUpperCase(),[]),N=u.useCallback(G=>{d(G),h(`Complete your purchase - ${G.firstName}`),y(`Hi ${G.firstName},

We noticed you left some items in your cart. Don't miss out on these great products!

Click here to complete your purchase: [Cart Link]

Best regards,
Your Store Team`),l(!0)},[]),O=u.useCallback(()=>{l(!1),d(null),h(""),y(""),v("custom")},[]),R=u.useCallback(()=>{console.log("Sending email to:",c?.email),console.log("Subject:",p),console.log("Body:",g),console.log("Template:",b),O()},[c?.email,p,g,b,O]),L=u.useCallback(G=>{v(G),G==="reminder"?(h(`Don't forget your items - ${c?.firstName}`),y(`Hi ${c?.firstName},

You have items waiting in your cart! Complete your purchase now to secure your items.

[View Cart]

Thanks for shopping with us!`)):G==="discount"?(h(`Special offer for you - ${c?.firstName}`),y(`Hi ${c?.firstName},

We're offering you a special 10% discount on your cart items! Use code SAVE10 at checkout.

[Complete Purchase with Discount]

This offer expires in 24 hours!`)):G==="custom"&&(h(`Complete your purchase - ${c?.firstName}`),y(`Hi ${c?.firstName},

We noticed you left some items in your cart. Don't miss out on these great products!

Click here to complete your purchase: [Cart Link]

Best regards,
Your Store Team`))},[c?.firstName]),B=u.useCallback(G=>{s(`/orders/abandoned-carts/customer/${G}`)},[s]);return e?n.jsx(Yt,{children:n.jsx("div",{className:"flex justify-center items-center min-h-[50vh]",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-gray-300 border-t-gray-900"})})}):t?n.jsx(Yt,{children:n.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8",children:n.jsxs("div",{className:"bg-white border border-red-200 rounded-lg p-4 flex items-center justify-between",children:[n.jsx("p",{className:"text-sm text-red-700",children:t}),n.jsx("button",{onClick:w,className:"px-3 py-1.5 text-xs font-medium text-red-700 hover:bg-red-50 rounded transition-colors",children:"Retry"})]})})}):n.jsx(Yt,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[n.jsx(kNe,{cartCount:r.length,loading:e,onRefresh:w}),r.length===0?n.jsx(NNe,{}):n.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:n.jsx(ENe,{carts:r,getInitials:k,formatDate:C,onSendEmail:N,onViewDetails:B})})]}),n.jsx(hL,{isOpen:i,customer:c,emailSubject:p,emailBody:g,emailTemplate:b,onClose:O,onTemplateChange:L,onSubjectChange:h,onBodyChange:y,onSubmit:R})]})})},ONe=({customer:s,getInitials:r})=>n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-4",children:"Customer"}),n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center text-gray-700 text-xs font-medium",children:r(s.firstName,s.lastName)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("p",{className:"text-sm font-medium text-gray-900 truncate",children:[s.firstName," ",s.lastName]}),n.jsx("p",{className:"text-xs text-gray-500 truncate",children:s.email})]})]}),s.phoneNumber&&n.jsx("p",{className:"text-xs text-gray-600",children:s.phoneNumber})]}),PNe=({customerFirstName:s,customerLastName:r})=>{const e=dr(),t=u.useCallback(a=>{a.preventDefault(),e("/orders/abandoned-carts")},[e]);return n.jsx("nav",{className:"mb-4","aria-label":"Breadcrumb",children:n.jsxs("ol",{className:"flex items-center gap-1.5 text-xs text-gray-500",children:[n.jsx("li",{children:n.jsx("a",{href:"/orders/abandoned-carts",onClick:t,className:"hover:text-gray-700 cursor-pointer",children:"Abandoned Carts"})}),n.jsx("li",{children:"/"}),n.jsxs("li",{className:"text-gray-700",children:[s," ",r]})]})})},ANe=({item:s,formatDate:r})=>n.jsxs("tr",{className:"hover:bg-gray-50 border-b border-gray-200",children:[n.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-3",children:[s.productVariant.images&&s.productVariant.images.length>0&&n.jsx("img",{src:s.productVariant.images[0],alt:s.productVariant.sku,className:"w-10 h-10 object-cover border border-gray-200"}),n.jsx("div",{className:"min-w-0",children:n.jsx("p",{className:"text-sm text-gray-900 truncate",children:Object.entries(s.productVariant.optionValues).map(([e,t])=>`${e}: ${t}`).join(", ")})})]})}),n.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:n.jsx("p",{className:"text-sm text-gray-600",children:s.productVariant.sku})}),n.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-right",children:n.jsxs("p",{className:"text-sm text-gray-900",children:["$",s.productVariant.price.toFixed(2)]})}),n.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-center",children:n.jsx("span",{className:"text-sm text-gray-900",children:s.quantity})}),n.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-right",children:n.jsxs("p",{className:"text-sm text-gray-900 font-medium",children:["$",(s.productVariant.price*s.quantity).toFixed(2)]})})]}),MNe=({cartItems:s,cartTotal:r,formatDate:e})=>n.jsxs("div",{className:"bg-white border border-gray-200",children:[n.jsx("div",{className:"p-4 border-b border-gray-200",children:n.jsxs("h2",{className:"text-sm font-medium text-gray-900",children:["Items (",s.length,")"]})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-white",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Product"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"SKU"}),n.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500",children:"Price"}),n.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500",children:"Qty"}),n.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500",children:"Total"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(t=>n.jsx(ANe,{item:t,formatDate:e},t._id))})]})}),n.jsx("div",{className:"p-4 border-t border-gray-200",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Total"}),n.jsxs("span",{className:"text-base font-semibold text-gray-900",children:["$",r.toFixed(2)]})]})})]}),INe=({totalItems:s,uniqueProducts:r,totalValue:e,lastUpdated:t,formatDate:a})=>n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-4",children:"Summary"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Items:"}),n.jsx("span",{className:"text-gray-900 font-medium",children:s})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Products:"}),n.jsx("span",{className:"text-gray-900 font-medium",children:r})]}),n.jsx("div",{className:"border-t border-gray-200 pt-2 mt-2",children:n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-900 font-medium",children:"Total:"}),n.jsxs("span",{className:"text-gray-900 font-semibold",children:["$",e.toFixed(2)]})]})}),n.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["Updated: ",a(t)]})]})]}),RNe=()=>{const{customerId:s}=ks(),r=dr(),{abandonedCarts:e,loading:t,error:a,fetchAbandonedCartsByStoreId:o}=QD(),{activeStoreId:i}=Ur(),[l,c]=u.useState(null),[d,p]=u.useState(!1),[h,g]=u.useState(""),[y,b]=u.useState(""),[v,w]=u.useState("custom");u.useEffect(()=>{i&&o(i)},[i,o]),u.useEffect(()=>{if(e.length>0&&s){const $=e.find(z=>z.customer._id===s);c($)}},[e,s]);const C=u.useCallback($=>new Date($).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),[]),k=u.useCallback(($,z)=>`${$.charAt(0)}${z.charAt(0)}`.toUpperCase(),[]),N=u.useCallback(()=>l?l.cartItems.reduce(($,z)=>$+z.productVariant.price*z.quantity,0):0,[l]),O=u.useCallback(()=>{if(l?.customer){const $=l.customer;g(`Complete your purchase - ${$.firstName}`),b(`Hi ${$.firstName},

We noticed you left some items in your cart. Don't miss out on these great products!

Click here to complete your purchase: [Cart Link]

Best regards,
Your Store Team`),p(!0)}},[l]),R=u.useCallback(()=>{p(!1),g(""),b(""),w("custom")},[]),L=u.useCallback(()=>{console.log("Sending email to:",l?.customer?.email),console.log("Subject:",h),console.log("Body:",y),console.log("Template:",v),R()},[l?.customer?.email,h,y,v,R]),B=u.useCallback($=>{if(w($),!l?.customer)return;const z=l.customer;$==="reminder"?(g(`Don't forget your items - ${z.firstName}`),b(`Hi ${z.firstName},

You have items waiting in your cart! Complete your purchase now to secure your items.

[View Cart]

Thanks for shopping with us!`)):$==="discount"?(g(`Special offer for you - ${z.firstName}`),b(`Hi ${z.firstName},

We're offering you a special 10% discount on your cart items! Use code SAVE10 at checkout.

[Complete Purchase with Discount]

This offer expires in 24 hours!`)):$==="custom"&&(g(`Complete your purchase - ${z.firstName}`),b(`Hi ${z.firstName},

We noticed you left some items in your cart. Don't miss out on these great products!

Click here to complete your purchase: [Cart Link]

Best regards,
Your Store Team`))},[l?.customer]),G=u.useCallback(()=>{r("/orders/abandoned-carts")},[r]);return t?n.jsx(Yt,{children:n.jsx("div",{className:"flex justify-center items-center min-h-[50vh]",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-800"})})}):a?n.jsx(Yt,{children:n.jsx("div",{className:"max-w-7xl mx-auto pt-3 px-4",children:n.jsx("div",{className:"bg-white border border-red-200 rounded-lg p-4",children:n.jsx("p",{className:"text-sm text-red-800",children:a})})})}):l?n.jsxs(Yt,{children:[n.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[n.jsx(PNe,{customerFirstName:l.customer.firstName,customerLastName:l.customer.lastName}),n.jsx("div",{className:"mb-8 pb-4 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:G,className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(gn,{className:"w-5 h-5"})}),n.jsxs("h1",{className:"text-xl font-medium text-gray-900",children:[l.customer.firstName," ",l.customer.lastName]})]}),n.jsxs("button",{onClick:O,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors flex items-center gap-2",children:[n.jsx(YO,{className:"w-4 h-4"}),"Send Email"]})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[n.jsx(ONe,{customer:l.customer,getInitials:k}),n.jsx(INe,{totalItems:l.totalItems,uniqueProducts:l.cartItems.length,totalValue:N(),lastUpdated:l.lastUpdated,formatDate:C})]}),n.jsx("div",{className:"lg:col-span-2",children:n.jsx(MNe,{cartItems:l.cartItems,cartTotal:N(),formatDate:C})})]})]}),n.jsx(hL,{isOpen:d,customer:l?.customer||null,emailSubject:h,emailBody:y,emailTemplate:v,onClose:R,onTemplateChange:B,onSubjectChange:g,onBodyChange:b,onSubmit:L})]}):n.jsx(Yt,{children:n.jsx("div",{className:"max-w-7xl mx-auto pt-3 px-4",children:n.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:n.jsx("p",{className:"text-sm text-gray-900",children:"Abandoned cart not found"})})})})},DNe=()=>{const s=u.useCallback(()=>{console.log("More actions clicked")},[]),r=u.useCallback(()=>{console.log("Create draft order clicked")},[]);return n.jsx(Yt,{children:n.jsx("div",{className:"min-h-screen",children:n.jsxs("div",{className:"max-w-7xl mx-auto pt-6 px-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qd,{className:"w-5 h-5 text-gray-600"}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Drafts"})]}),n.jsxs("button",{onClick:s,className:"flex items-center gap-1.5 px-3 py-1.5 border border-gray-200 rounded text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:["More actions",n.jsx(Ys,{className:"w-4 h-4"})]})]}),n.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mb-4",children:n.jsxs("div",{className:"flex flex-col items-center justify-center text-center min-h-[280px]",children:[n.jsxs("div",{className:"relative w-[200px] h-[150px] mb-6",children:[n.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 w-[180px] h-[90px] bg-blue-50 rounded-[100px/50px]"}),n.jsx("div",{className:"absolute top-[10px] left-1/2 transform -translate-x-1/2 -rotate-[4deg] w-[120px] h-[90px] bg-gray-50 rounded-lg"}),n.jsxs("div",{className:"absolute top-5 left-1/2 transform -translate-x-1/2 w-[140px] h-[105px] p-2 bg-white rounded-lg border border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[n.jsx("div",{className:"w-[18px] h-[18px] bg-green-500 rounded"}),n.jsx("div",{className:"flex-1 h-2 bg-slate-100 rounded"})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("div",{className:"h-1.5 bg-blue-50 rounded"}),n.jsx("div",{className:"h-1.5 bg-blue-50 rounded w-[85%]"}),n.jsx("div",{className:"h-1.5 bg-blue-50 rounded w-[70%]"})]})]})]}),n.jsx("h2",{className:"text-base font-medium mb-1.5",children:"Manually create orders and invoices"}),n.jsx("p",{className:"text-sm text-gray-600 max-w-[600px] mb-6 px-2",children:"Use draft orders to take orders over the phone, email invoices to customers, and collect payments."}),n.jsx("button",{onClick:r,className:"px-4 py-2 bg-gray-900 text-white rounded text-sm font-medium hover:bg-gray-800 transition-colors",children:"Create draft order"})]})}),n.jsx("div",{className:"text-center py-3",children:n.jsxs("p",{className:"text-sm text-gray-600",children:["Learn more about"," ",n.jsx("a",{href:"#",className:"text-gray-700 underline hover:text-gray-900",children:"creating draft orders"})]})})]})})})},LNe=({code:s,onCodeChange:r})=>n.jsxs("div",{className:"border border-gray-300 rounded-lg p-4 mt-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("h3",{className:"text-base font-semibold",children:"Code"}),n.jsx("div",{className:"relative group",children:n.jsx(Ps,{className:"w-5 h-5 text-gray-500 cursor-help",title:"Pixel code snippet"})})]}),n.jsx("textarea",{value:s,rows:8,onChange:e=>r(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md font-mono text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),FNe=({dataSale:s,onDataSaleChange:r})=>n.jsxs("div",{className:"border border-gray-300 rounded-lg p-4",children:[n.jsx("h3",{className:"text-base font-semibold mb-2",children:"Data sale"}),n.jsx("fieldset",{children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"dataSale",value:"qualifies_as_data_sale",checked:s==="qualifies_as_data_sale",onChange:e=>r(e.target.value),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),n.jsx("span",{className:"text-sm text-gray-900",children:"Data collected qualifies as data sale"})]}),n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"dataSale",value:"qualifies_as_data_sale_limited_use",checked:s==="qualifies_as_data_sale_limited_use",onChange:e=>r(e.target.value),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),n.jsx("span",{className:"text-sm text-gray-900",children:"Data collected qualifies as data sale and supports limited data use"})]}),n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"dataSale",value:"does_not_qualify_as_data_sale",checked:s==="does_not_qualify_as_data_sale",onChange:e=>r(e.target.value),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),n.jsx("span",{className:"text-sm text-gray-900",children:"Data collected does not qualify as data sale"})]})]})})]}),BNe=[{key:"marketing",label:"Marketing"},{key:"analytics",label:"Analytics"},{key:"preferences",label:"Preferences"}],zNe=({permission:s,purposes:r,onPermissionChange:e,onPurposeChange:t})=>n.jsxs("div",{className:"border border-gray-300 rounded-lg p-4",children:[n.jsx("h3",{className:"text-base font-semibold mb-2",children:"Permission"}),n.jsx("fieldset",{children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"permission",value:"required",checked:s==="required",onChange:a=>e(a.target.value),className:"mt-1 w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("span",{className:"text-sm text-gray-900",children:"Required"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1 mb-2",children:"The pixel will collect data when permission is granted for selected purposes."}),n.jsx("div",{className:"flex flex-col gap-2 ml-6 mb-3",children:BNe.map(({key:a,label:o})=>n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:r[a],onChange:()=>t(a),disabled:s!=="required",className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"}),n.jsx("span",{className:`text-sm ${s!=="required"?"text-gray-400":"text-gray-900"}`,children:o})]},a))})]})]}),n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"permission",value:"not_required",checked:s==="not_required",onChange:a=>e(a.target.value),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),n.jsx("span",{className:"text-sm text-gray-900",children:"Not required"})]})]})})]}),$Ne=()=>{const s=dr(),{pixelId:r}=ks(),{activeStoreId:e}=Ur(),{pixels:t,fetchByStoreId:a,loading:o,remove:i,update:l}=lL(),[c,d]=u.useState(null),[p,h]=u.useState(""),[g,y]=u.useState("required"),[b,v]=u.useState({marketing:!1,analytics:!1,preferences:!1}),[w,C]=u.useState("does_not_qualify_as_data_sale"),[k,N]=u.useState(""),O=u.useMemo(()=>t.find(H=>H._id===r),[t,r]);u.useEffect(()=>{e&&(O||a(e).catch(H=>{gr.error(H?.message||"Failed to fetch pixel details")}))},[e,O,a]),u.useEffect(()=>{O&&(h(O.pixelName??""),y(O.required?"required":"not_required"),v({marketing:!!O.marketing,analytics:!!O.analytics,preferences:!!O.preferences}),C(O.dataSale),N(O.code??""))},[O]);const R=u.useCallback(async()=>{if(O)try{await i(O._id),gr.success("Pixel deleted"),s("/settings/customer-events")}catch(H){gr.error(H?.message||"Failed to delete pixel")}},[O,i,s]),L=u.useCallback(H=>{d(H.currentTarget)},[]),B=u.useCallback(()=>{d(null)},[]),G=u.useCallback(H=>{v(D=>({...D,[H]:!D[H]}))},[]),$=u.useMemo(()=>{if(!O)return!1;const H=p.trim(),D=O.pixelName??"",X=O.required?"required":"not_required",se={marketing:!!O.marketing,analytics:!!O.analytics,preferences:!!O.preferences};return H!==D||g!==X||se.marketing!==b.marketing||se.analytics!==b.analytics||se.preferences!==b.preferences||w!==O.dataSale||k!==(O.code??"")},[O,p,g,b,w,k]),z=u.useCallback(async()=>{if(O)try{const H={pixelName:p.trim(),required:g==="required",notRequired:g==="not_required",marketing:g==="required"?b.marketing:!1,analytics:g==="required"?b.analytics:!1,preferences:g==="required"?b.preferences:!1,dataSale:w,code:k};await l(O._id,H),gr.success("Pixel updated")}catch(H){gr.error(H?.message||"Failed to update pixel")}},[O,p,g,b,w,k,l]),Y=u.useCallback(H=>{y(H),H==="not_required"&&v({marketing:!1,analytics:!1,preferences:!1})},[]),M=u.useCallback(H=>{C(H)},[]),q=u.useCallback(H=>{N(H)},[]),P=u.useCallback(()=>{s("/settings/customer-events")},[s]);return r?e?n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-[960px] mx-auto py-8 px-4",children:[n.jsxs("button",{onClick:P,className:"flex items-center gap-2 text-gray-700 hover:text-gray-900 mb-4 transition-colors",children:[n.jsx(gn,{className:"w-5 h-5"}),n.jsx("span",{children:"Back to pixels"})]}),o&&!O?n.jsx("div",{className:"py-12 flex justify-center",children:n.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):O?n.jsxs("div",{children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-4",children:[n.jsxs("div",{className:"flex-1 w-full space-y-2",children:[n.jsx("input",{type:"text",value:p,onChange:H=>h(H.target.value),maxLength:50,placeholder:"Pixel name",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),n.jsxs("p",{className:"text-sm text-gray-600",children:["For enhanced security and stability, pixel access is sandboxed."," ",n.jsx(cO,{text:"Learn more",href:"#"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[$&&n.jsx("button",{onClick:z,disabled:o,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium transition-colors",children:"Save"}),n.jsx("button",{disabled:!0,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:"Test"}),n.jsx("button",{disabled:!0,className:"px-4 py-2 bg-blue-600 text-white rounded-md disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:"Connect"}),n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:L,className:"p-2 text-gray-700 hover:bg-gray-100 rounded-md transition-colors",children:n.jsx(Jd,{className:"w-5 h-5"})}),n.jsxs(t_,{anchorEl:c,open:!!c,onClose:B,children:[n.jsx(Np,{disabled:!0,children:"Edit pixel name"}),n.jsx(Np,{disabled:!0,children:"Hire a Shopify Partner"}),n.jsx(Np,{onClick:()=>{B(),R()},children:n.jsx("span",{className:"text-red-600",children:"Delete pixel"})})]})]})]})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 text-blue-800 px-4 py-3 rounded-lg mt-6 flex items-start gap-2",children:[n.jsx(Ps,{className:"w-5 h-5 shrink-0 mt-0.5"}),n.jsx("p",{className:"text-sm",children:"For enhanced security and stability, pixel access is sandboxed."})]}),n.jsxs("div",{className:"border border-gray-300 rounded-xl mt-6 p-6",children:[n.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Customer privacy"}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(zNe,{permission:g,purposes:b,onPermissionChange:Y,onPurposeChange:G}),n.jsx(FNe,{dataSale:w,onDataSaleChange:M})]}),n.jsxs("p",{className:"text-sm text-gray-600 mt-4",children:["See how these settings apply to your store in"," ",n.jsx(cO,{text:"Customer privacy",href:"#"})]})]}),n.jsx(LNe,{code:k,onCodeChange:q})]}):n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 px-4 py-3 rounded-md",children:"Pixel not found or no longer exists."})]})}):n.jsx(Yt,{children:n.jsx("div",{className:"max-w-[960px] mx-auto py-8 px-4",children:n.jsx("div",{className:"bg-blue-50 border border-blue-200 text-blue-800 px-4 py-3 rounded-md",children:"Select a store to view pixel details."})})}):n.jsx(Yt,{children:n.jsx("div",{className:"max-w-[960px] mx-auto py-8 px-4",children:n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 px-4 py-3 rounded-md",children:"No pixel selected."})})})},cO=({text:s,href:r})=>n.jsx("a",{href:r,className:"text-blue-600 hover:text-blue-700 hover:underline",children:s});function UNe({title:s,titleId:r,...e},t){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),s?u.createElement("title",{id:r},s):null,u.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"}))}const VNe=u.forwardRef(UNe),HNe=({onClose:s,onCreate:r,isValid:e,loading:t})=>n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:s,className:"px-4 py-2 text-gray-700 hover:bg-gray-50 rounded-md transition-colors",children:"Cancel"}),n.jsx("button",{onClick:r,disabled:!e||t,className:"px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 disabled:bg-gray-300 disabled:text-gray-500 disabled:cursor-not-allowed transition-colors",children:"Add pixel"})]}),WNe=({open:s,onClose:r,pixelName:e,onPixelNameChange:t,dataSale:a,onDataSaleChange:o,code:i,onCodeChange:l,isValid:c,loading:d,onCreate:p,maxName:h})=>n.jsxs(en,{open:s,onClose:r,title:"Add custom pixel",maxWidth:"sm",actions:n.jsx(HNe,{onClose:r,onCreate:p,isValid:c,loading:d}),children:[n.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-md flex items-start gap-2",children:[n.jsx(VNe,{className:"w-5 h-5 text-blue-600 shrink-0 mt-0.5"}),n.jsxs("p",{className:"text-sm text-blue-900",children:["Did you check available apps first? Apps are the most secure option, with automatic updates, for integrating with third-party services."," ",n.jsx("a",{href:"#",className:"text-blue-600 hover:underline",children:"Explore pixels apps"})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Pixel name"}),n.jsx("input",{type:"text",value:e,onChange:g=>t(g.target.value.slice(0,h)),maxLength:h,className:"w-full px-4 py-2 border border-gray-300 rounded-md bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent"}),n.jsxs("p",{className:"text-xs text-gray-500 text-right mt-1",children:[e.length,"/",h]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Data sale"}),n.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:n.jsxs("fieldset",{className:"space-y-3",children:[n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"dataSale",value:"qualifies_as_data_sale",checked:a==="qualifies_as_data_sale",onChange:g=>o(g.target.value),className:"mt-1 w-4 h-4 text-gray-900 focus:ring-gray-900"}),n.jsx("span",{className:"text-sm text-gray-900",children:"Data collected qualifies as data sale"})]}),n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"dataSale",value:"qualifies_as_data_sale_limited_use",checked:a==="qualifies_as_data_sale_limited_use",onChange:g=>o(g.target.value),className:"mt-1 w-4 h-4 text-gray-900 focus:ring-gray-900"}),n.jsx("span",{className:"text-sm text-gray-900",children:"Data collected qualifies as data sale and supports limited data use"})]}),n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"dataSale",value:"does_not_qualify_as_data_sale",checked:a==="does_not_qualify_as_data_sale",onChange:g=>o(g.target.value),className:"mt-1 w-4 h-4 text-gray-900 focus:ring-gray-900"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("span",{className:"text-sm text-gray-900 block",children:"Data collected does not qualify as data sale"}),n.jsx("span",{className:"text-xs text-gray-600 block mt-1",children:"The pixel will collect data when the customers opts out of their data being sold."})]})]})]})})]}),n.jsx("div",{className:"h-px bg-gray-200 my-6"}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Code"}),n.jsx("span",{className:"text-xs text-gray-500",children:"i"})]}),n.jsx("textarea",{value:i,onChange:g=>l(g.target.value),rows:6,className:"w-full px-4 py-2 border border-gray-300 rounded-md bg-white text-gray-900 font-mono text-sm focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent resize-y"})]}),n.jsx("p",{className:"text-sm text-gray-600 mt-4",children:"This is an advanced feature that requires JavaScript knowledge. Ziplofy is not responsible for your use of pixels. Compliance with applicable laws, consents, code security, troubleshooting, and updates are your responsibility. Pixels are subject to the Terms of Service."})]}),qNe=({onOpenModal:s})=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-1",children:"Pixels"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Enable third-party services to securely collect and use customer event data from your store"})]}),n.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[n.jsx("button",{className:"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Explore pixel apps"}),n.jsx("button",{onClick:s,className:"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Add custom pixel"})]})]}),GNe=({pixel:s,renderStatusChip:r,onRowClick:e})=>n.jsxs("tr",{onClick:()=>e(s._id),className:"border-b border-gray-200 hover:bg-gray-50 cursor-pointer transition-colors",children:[n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-6 h-6 bg-gray-100 border border-gray-200 text-gray-600 flex items-center justify-center shrink-0",children:n.jsx(Wy,{className:"w-3.5 h-3.5"})}),n.jsx("span",{className:"text-sm font-medium capitalize text-gray-900",children:s.pixelName})]})}),n.jsx("td",{className:"px-3 py-2 text-sm capitalize text-gray-900",children:s.type}),n.jsx("td",{className:"px-3 py-2",children:r(s)}),n.jsx("td",{className:"px-3 py-2 text-right",children:n.jsx("button",{onClick:t=>{t.stopPropagation()},className:"p-1 text-gray-600 hover:text-gray-900 hover:bg-gray-50 transition-colors",children:n.jsx(Jd,{className:"w-4 h-4"})})})]}),KNe=({pixels:s,renderStatusChip:r,onRowClick:e})=>n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-gray-200 bg-white",children:[n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700",children:"Pixels"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700",children:"Type"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700",children:"Status"}),n.jsx("th",{className:"px-3 py-2 text-right",children:""})]})}),n.jsx("tbody",{children:s.map(t=>n.jsx(GNe,{pixel:t,renderStatusChip:r,onRowClick:e},t._id))})]})}),dO=30,uO=`// Step 1. Initialize the JavaScript pixel SDK (make sure to exclude HTML)

// Step 2. Subscribe to customer events with analytics.subscribe(), and add tracking
// analytics.subscribe("all_standard_events", function (event) {
//   console.log("Event data ", event?.data);
// });`,YNe={inactive:"Disconnected",disconnected:"Disconnected",active:"Connected"},ZNe=()=>{const[s,r]=u.useState(!1),[e,t]=u.useState(""),[a,o]=u.useState("does_not_qualify_as_data_sale"),[i,l]=u.useState(uO),[c,d]=u.useState("all"),{activeStoreId:p}=Ur(),{pixels:h,create:g,fetchByStoreId:y,loading:b}=lL(),v=dr();u.useEffect(()=>{p&&y(p).catch(Y=>{gr.error(Y?.message||"Failed to fetch pixels")})},[p,y]);const w=u.useMemo(()=>e.trim().length>0&&e.length<=dO,[e]),C=u.useMemo(()=>c==="app"?[]:c==="custom"?h.filter(Y=>Y.type.toLowerCase()==="custom"):h,[h,c]),k=C.length>0,N=u.useCallback(()=>{r(!1),t(""),o("does_not_qualify_as_data_sale"),l(uO)},[]),O=u.useCallback(async()=>{if(w){if(!p){gr.error("Select a store before creating a pixel");return}try{await g({storeId:p,pixelName:e.trim(),type:"custom",status:"inactive",required:!1,notRequired:!0,marketing:!1,analytics:!1,preferences:!1,dataSale:a,code:i}),gr.success("Pixel created"),N()}catch(Y){gr.error(Y?.message||"Failed to create pixel")}}},[w,p,e,a,i,g,N]),R=u.useCallback(Y=>{const M=YNe[Y.status?.toLowerCase()]||Y.status;return n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium text-gray-700 bg-gray-50 border border-gray-200 capitalize",children:M})},[]),L=u.useCallback(()=>{p&&y(p).catch(Y=>gr.error(Y?.message||"Failed to refresh pixels"))},[p,y]),B=u.useCallback(Y=>{d(Y)},[]),G=u.useCallback(()=>{r(!0)},[]),$=u.useCallback(Y=>{v(`/settings/customer-events/${Y}`)},[v]),z=u.useMemo(()=>[{id:"all",label:"All"},{id:"app",label:"App pixels"},{id:"custom",label:"Custom pixels"}],[]);return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900 mb-4 border-b border-gray-200 pb-4",children:"Customer events"}),n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx(qNe,{onOpenModal:G}),n.jsxs("div",{className:"mt-4 border border-gray-200 bg-white/95",children:[n.jsx("div",{className:"px-3 pt-3",children:n.jsx(ek,{tabs:z,activeTab:c,onTabChange:B})}),n.jsx("div",{className:"h-px bg-gray-200"}),n.jsxs("div",{className:"px-3 py-2 flex justify-end gap-2",children:[n.jsx("button",{disabled:!0,className:"p-1.5 text-gray-400 cursor-not-allowed",children:n.jsx(no,{className:"w-4 h-4"})}),n.jsx("button",{onClick:L,className:"p-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-50 transition-colors",children:n.jsx(ou,{className:"w-4 h-4"})})]}),n.jsx("div",{className:"h-px bg-gray-200"}),b?n.jsx("div",{className:"py-12 flex justify-center",children:n.jsx("div",{className:"w-6 h-6 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})}):k?n.jsx(KNe,{pixels:C,renderStatusChip:R,onRowClick:$}):n.jsx("div",{className:"py-12 text-center text-gray-600",children:n.jsx("p",{className:"text-xs",children:"No pixels found for this store."})})]}),n.jsxs("p",{className:"text-xs text-gray-600 mt-4",children:["This list only shows"," ",n.jsx("button",{className:"text-gray-700 hover:underline",children:"pixels"})," ","that use the applicable Shopify APIs, the supported pixel integration."]}),n.jsx("button",{className:"text-xs text-gray-700 mt-4 inline-flex items-center hover:underline",children:"Learn more about pixels"})]}),n.jsx(WNe,{open:s,onClose:N,pixelName:e,onPixelNameChange:t,dataSale:a,onDataSaleChange:o,code:i,onCodeChange:l,isValid:w,loading:b,onCreate:O,maxName:dO})]})})},XNe=()=>{const s=dr(),{activeStoreId:r}=Ur(),{createShippingProfile:e,loading:t}=r_(),[a,o]=u.useState(""),[i,l]=u.useState(null),c=()=>{s("/settings/shipping-and-delivery")},d=async()=>{if(!r){l("Please select a store.");return}if(!a.trim()){l("Profile name is required.");return}try{l(null),await e({profileName:a.trim(),storeId:r}),s("/settings/shipping-and-delivery")}catch(p){l(p.message||"Failed to create shipping profile")}};return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 border-b border-gray-200 pb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:c,className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(gn,{className:"w-5 h-5"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Create shipping profile"})]}),n.jsx("button",{onClick:d,disabled:!a.trim()||t,className:"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-700 min-w-[100px] disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:t?"Saving...":"Save"})]}),n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4 max-w-2xl",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-1",children:"Profile name"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Customers won't see this"}),n.jsx("input",{type:"text",placeholder:"Fragile products",value:a,onChange:p=>o(p.target.value),className:"w-full px-3 py-2 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 text-sm"}),i&&n.jsx("p",{className:"text-xs text-red-600 mt-2",children:i})]})]})})},QNe=()=>{const s=dr(),{profileId:r}=ks(),{searchProductsWithVariants:e}=Ol(),{activeStoreId:t}=Ur(),{storeCountries:a,getCountriesByStoreId:o}=Tm(),{statesByCountry:i,getStatesByCountryId:l}=AD(),{createShippingZone:c,updateShippingZone:d,deleteShippingZone:p,getShippingZonesByShippingProfileId:h,shippingZones:g,loading:y}=$Se(),{createShippingZoneRate:b,getShippingZoneRatesByZoneId:v,updateShippingZoneRate:w,deleteShippingZoneRate:C,loading:k}=BSe(),{shippingProfiles:N,getShippingProfilesByStoreId:O,updateShippingProfile:R,deleteShippingProfile:L,loading:B}=r_(),{settingsByProfileId:G,fetchByProfileId:$,updateLocationSetting:z,loading:Y,error:M}=RSe(),{entriesByProfileId:q,fetchByProfileId:P,addEntry:H,deleteEntry:D}=LSe(),[X,se]=u.useState({}),[Q,xe]=u.useState({}),[K,Z]=u.useState(!1),[ve,ae]=u.useState(!1),[Se,Pe]=u.useState({}),[$e,we]=u.useState({}),[Ae,ze]=u.useState(new Set),Ge=()=>{s("/settings/shipping-and-delivery")},[Ue,ht]=u.useState({});u.useEffect(()=>{r&&(G[r]||$(r).catch(()=>{}))},[r,G,$]);const ee=u.useCallback(tt=>tt?[tt?.address,tt?.apartment,tt?.city,tt?.state,tt?.postalCode].filter(qt=>typeof qt=="string"&&qt.trim().length>0).map(qt=>String(qt).trim()).join(", "):"",[]),ue=u.useMemo(()=>r?(G[r]||[]).reduce((Ht,qt)=>{const er=qt.location,xr=typeof qt.locationId=="string"?qt.locationId:qt.locationId?._id||qt.locationId,pn=xr?String(xr).trim():"";return pn&&Ht.push({id:pn,name:er?.name||"Untitled location",address:ee(er),country:er?.countryRegion||"",raw:er,contextSetting:{createNewRates:qt.createNewRates,removeRates:qt.removeRates}}),Ht},[]):[],[r,G,ee]),[Oe,J]=u.useState(!1),[I,V]=u.useState(""),[re,pe]=u.useState(""),[ge,Ce]=u.useState(!1),[he,ie]=u.useState(null),[Fe,We]=u.useState([]),[Qe,de]=u.useState(null),[Ee,le]=u.useState(new Set),[Ye,De]=u.useState(new Set),[ct,ot]=u.useState(null),[dt,Ke]=u.useState(!1),[kt,At]=u.useState(""),[xt,Xt]=u.useState(!1),[br,zt]=u.useState(""),[be,Be]=u.useState(""),[et,wt]=u.useState(new Set),[$t,tr]=u.useState(new Set),[Lr,tn]=u.useState(new Set),[bn,Fr]=u.useState(!1),[rr,wr]=u.useState(null),[an,En]=u.useState(null),[rn,kr]=u.useState(new Set),jr=u.useRef(et),[mt,yr]=u.useState(!1),[An,fn]=u.useState(null),[wn,zr]=u.useState("create"),In=u.useRef("create"),[ne,ke]=u.useState(null),[Re,Ze]=u.useState(null),[st,Ct]=u.useState(!1),[Xe,Ve]=u.useState(null),[je,He]=u.useState(!1),[at,Ot]=u.useState(null),[ce,Te]=u.useState(null),[ut,jt]=u.useState("flat"),[Lt,ur]=u.useState("custom"),[Br,_t]=u.useState(""),[Kr,Zr]=u.useState(""),[ps,Xn]=u.useState("0.00"),[ds,Ea]=u.useState(!1),[sa,Is]=u.useState("weight"),[ya,Ir]=u.useState("0"),[_r,gt]=u.useState(""),[ar,Or]=u.useState("0.00"),[Mr,Sn]=u.useState(""),[jn,$n]=u.useState(null),[Fn,Wn]=u.useState(null),[so,xa]=u.useState(!1),[qn,Vn]=u.useState(null),[Gn,_s]=u.useState(!1),[Ta,Fs]=u.useState(!1),vs=["Tracking number provided","Made to order","Ships next day"],Kn=Xe?._id?String(Xe._id):null,{reservedStatesMap:Rs,reservedCountriesMap:aa}=u.useMemo(()=>{const tt=new Map,Ht=new Map;return Array.isArray(g)&&g.forEach(qt=>{if(!qt||Kn&&String(qt._id)===Kn)return;const er=qt.zoneName||"Another zone";(qt.countries||[]).forEach(xr=>{if(!xr)return;const pn=xr.countryId?String(xr.countryId):"";pn&&(Array.isArray(xr.stateIds)&&xr.stateIds.length>0?xr.stateIds.forEach(Un=>{Un&&tt.set(String(Un),er)}):Ht.set(pn,er))})}),{reservedStatesMap:tt,reservedCountriesMap:Ht}},[g,Kn]),Wr=u.useMemo(()=>{const tt=a??[],Ht=be.trim().toLowerCase();return Ht?tt.filter(qt=>[qt.name,qt.officialName,qt.iso2,qt.iso3,qt.numericCode].filter(Boolean).map(xr=>String(xr).toLowerCase()).some(xr=>xr.includes(Ht))).sort((qt,er)=>qt.name.localeCompare(er.name)):[...tt].sort((qt,er)=>qt.name.localeCompare(er.name))},[a,be]),qr=u.useCallback(async tt=>{if(!tt)return[];const Ht=i[tt];if(Ht)return Ht;kr(qt=>{const er=new Set(qt);return er.add(tt),er});try{return await l(tt)||[]}catch{return[]}finally{kr(qt=>{const er=new Set(qt);return er.delete(tt),er})}},[l,i]);u.useEffect(()=>{t&&(Z(!0),O(t).catch(tt=>{console.error("Failed to fetch shipping profiles:",tt)}).finally(()=>Z(!1)))},[t,O]),u.useEffect(()=>{r&&P(r).catch(()=>{})},[r,P]);const on=u.useMemo(()=>{if(r)return N.find(tt=>tt._id===r)},[N,r]);u.useEffect(()=>{if(!Oe)return;const tt=setTimeout(()=>{pe(I)},300);return()=>clearTimeout(tt)},[Oe,I]),u.useEffect(()=>{jr.current=et},[et]),u.useEffect(()=>{if(!Oe)return;if(!re.trim()){We([]),de(null),ie(null);return}if(!t){ie("Select a store to manage products."),We([]);return}let tt=!1;return(async()=>{try{Ce(!0),ie(null);const qt=await e({storeId:t,q:re,limit:50});if(tt)return;We(qt.data||[]),de(qt.pagination||null)}catch(qt){if(tt)return;We([]);const er=qt?.message||"Failed to search products";ie(er)}finally{tt||Ce(!1)}})(),()=>{tt=!0}},[Oe,t,re,e]),u.useEffect(()=>{if(!xt)return;if(!t){wr("Select a store to manage shipping zones."),Fr(!1);return}let tt=!1;return(async()=>{try{Fr(!0),wr(null),await o(t)}catch(qt){if(tt)return;const er=qt?.message||"Failed to fetch countries";wr(er)}finally{tt||Fr(!1)}})(),()=>{tt=!0}},[xt,t,o]),u.useEffect(()=>{r&&h(r).catch(tt=>{console.error("Failed to fetch shipping zones:",tt)})},[r,h]),u.useEffect(()=>{if(!g||g.length===0)return;(async()=>{for(const Ht of g)if(Ht._id){xe(qt=>qt[Ht._id]?qt:{...qt,[Ht._id]:!0});try{const qt=await v(Ht._id);se(er=>er[Ht._id]?er:{...er,[Ht._id]:qt})}catch(qt){console.error(`Failed to fetch rates for zone ${Ht._id}:`,qt),se(er=>er[Ht._id]?er:{...er,[Ht._id]:[]})}finally{xe(qt=>({...qt,[Ht._id]:!1}))}}})()},[g,v]);const nn=()=>{jt("flat"),ur("custom"),_t(""),Zr(""),Xn("0.00"),Ea(!1),Is("weight"),Ir("0"),gt(""),Or("0.00"),Sn("")},Ie=tt=>{jt(tt.rateType||"flat"),ur(tt.shippingRate||"custom"),_t(tt.customRateName||""),Zr(tt.customDeliveryDescription||"");const Ht=typeof tt.price=="number"?tt.price:parseFloat(String(tt.price??0));Xn(Number.isFinite(Ht)?Ht.toFixed(2):"0.00");const qt=!!tt.conditionalPricingEnabled;Ea(qt),Is(qt&&tt.conditionalPricingBasis==="price"?"price":"weight"),Ir(tt.minWeight===null||tt.minWeight===void 0?"":String(tt.minWeight)),gt(tt.maxWeight===null||tt.maxWeight===void 0?"":String(tt.maxWeight)),Or(tt.minPrice===null||tt.minPrice===void 0?"":String(tt.minPrice)),Sn(tt.maxPrice===null||tt.maxPrice===void 0?"":String(tt.maxPrice))},it=()=>{He(!1),Ot(null),Te(null),nn()},Et=tt=>{tt&&(nn(),Ot(tt),Te(null),He(!0))},Mt=()=>{if(!jn)return;const tt=g.find(Ht=>Ht._id===jn.zoneId)||{_id:jn.zoneId};nn(),Ie(jn.rate),Ot(tt),Te(jn.rate._id),He(!0),$n(null)},Pt=async()=>{if(!jn)return;const{zoneId:tt,zoneName:Ht,rate:qt}=jn;$n(null),Wn({zoneId:tt,zoneName:Ht,rate:qt})},or=tt=>{Vn(tt.currentTarget)},Vt=()=>{Vn(null)},Ft=async()=>{if(r){Fs(!0);try{await L(r),_s(!1),Vn(null),s("/settings/shipping-and-delivery")}catch{}finally{Fs(!1)}}},Cr=async()=>{if(Re){Ct(!0);try{await p(Re.id),Ze(null)}catch(tt){console.error("Failed to delete shipping zone:",tt)}finally{Ct(!1)}}},Rt=async()=>{if(!Fn)return;xa(!0);const{zoneId:tt,rate:Ht}=Fn;try{await C(Ht._id),se(qt=>{const er=qt[tt]||[];return{...qt,[tt]:er.filter(xr=>xr._id!==Ht._id)}}),Wn(null)}catch(qt){console.error("Failed to delete shipping zone rate:",qt)}finally{xa(!1)}},fr=async()=>{if(!at)return;const tt={rateType:ut,shippingRate:Lt||"custom",customRateName:Br.trim(),customDeliveryDescription:Kr.trim()||void 0,price:ps,conditionalPricingEnabled:ds,conditionalPricingBasis:ds?sa:void 0,minWeight:ds&&sa==="weight"&&ya||void 0,maxWeight:ds&&sa==="weight"&&_r||void 0,minPrice:ds&&sa==="price"&&ar||void 0,maxPrice:ds&&sa==="price"&&Mr||void 0};try{if(ce){const Ht=await w(ce,tt);se(qt=>{const er=at._id,xr=qt[er]||[];return{...qt,[er]:xr.map(pn=>pn._id===ce?Ht:pn)}})}else{const Ht={...tt,shippingZoneId:at._id},qt=await b(Ht);at._id&&se(er=>({...er,[at._id]:[qt,...er[at._id]||[]]}))}it()}catch(Ht){console.error("Failed to save shipping zone rate:",Ht)}},Rr=()=>{J(!0),V(""),pe(""),We([]),ie(null)},Er=()=>{J(!1)},Yr=async tt=>{if(Ve(null),zt(""),wt(new Set),tr(new Set),tn(new Set),Be(""),wr(null),En(null),kr(new Set),Xt(!0),tt){Ve(tt),zt(tt.zoneName||"");const Ht=new Set,qt=new Set;if(tt.countries&&Array.isArray(tt.countries))for(const er of tt.countries){if(Ht.add(er.countryId),!i[er.countryId])try{await l(er.countryId)}catch(xr){console.error(`Failed to fetch states for country ${er.countryId}:`,xr)}er.stateIds&&Array.isArray(er.stateIds)&&er.stateIds.forEach(xr=>{qt.add(xr)})}wt(Ht),tr(qt),tn(new Set)}},Gr=()=>{Xt(!1),Ve(null),zt(""),Be(""),wt(new Set),tr(new Set),tn(new Set),En(null)},mn=async()=>{if(!r){En("Shipping profile ID is required");return}if(!br.trim()){En("Zone name is required");return}if(Li===0){En("Please select at least one country or state");return}try{En(null);const tt=[];for(const er of et){const pn=(i[er]||[]).filter(Un=>$t.has(Un._id));pn.length>0?tt.push({countryId:er,stateIds:pn.map(Un=>Un._id)}):tt.push({countryId:er})}const Ht=new Map;Object.entries(i).forEach(([er,xr])=>{xr.forEach(pn=>{Ht.set(pn._id,er)})});const qt=[];for(const er of $t){const xr=Ht.get(er);xr&&!et.has(xr)&&qt.push(er)}if(qt.length>0){const er=new Map;qt.forEach(xr=>{const pn=Ht.get(xr);pn&&(er.has(pn)||er.set(pn,[]),er.get(pn).push(xr))}),er.forEach((xr,pn)=>{tt.push({countryId:pn,stateIds:xr})})}Xe?(await d(Xe._id,{zoneName:br.trim(),countries:tt}),r&&await h(r)):(await c({zoneName:br.trim(),shippingProfileId:r,countries:tt}),r&&await h(r)),Gr()}catch(tt){const Ht=tt?.message||"Failed to create shipping zone";En(Ht)}},Xr=tt=>{fn(tt);const Ht=String(tt.id).trim(),qt=Ue[Ht]||tt.contextSetting;let er="create";qt&&(er=qt.removeRates?"remove":"create"),In.current=er,zr(er),yr(!0)},Vr=()=>{yr(!1),fn(null)},Yn=async()=>{if(!An||!r)return;const tt=String(An.id).trim();if(!tt||tt.length===0){console.error("Invalid locationId:",An.id);return}const Ht=In.current,qt=Ht==="create",er=Ht==="remove";console.log("Saving location settings:",{locationId:tt,currentSelection:Ht,stateValue:wn,refValue:In.current,createNewRates:qt,removeRates:er});const xr=Ue[tt]||An.contextSetting,pn=xr?xr.createNewRates:!0,Un=xr?xr.removeRates:!1;if(!(qt!==pn||er!==Un)){yr(!1);return}try{await z(r,tt,{createNewRates:qt,removeRates:er}),ht(ns=>({...ns,[tt]:{createNewRates:qt,removeRates:er}})),Pe(ns=>({...ns,[tt]:!0}))}catch(ns){console.error("Failed to update location setting:",ns)}finally{yr(!1)}},Qr=tt=>{const Ht=Object.values(tt.optionValues||{});return Ht.length===0?tt.sku:Ht.join(" / ")},da=()=>ge?n.jsx("div",{className:"flex justify-center py-12",children:n.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 border-t-gray-900 rounded-full animate-spin"})}):he?n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 text-xs",children:he}):Fe.length?n.jsxs("div",{className:"border border-gray-200 overflow-hidden",children:[n.jsxs("div",{className:"flex items-center px-3 py-2 bg-gray-50 border-b border-gray-200",children:[n.jsx("p",{className:"flex-1 text-xs font-medium text-gray-600",children:"Product"}),n.jsx("p",{className:"w-40 text-right text-xs font-medium text-gray-600",children:"Profile"})]}),n.jsx("div",{children:Fe.map(tt=>{const Ht=tt.variants.every(xr=>Jr.has(xr._id)),qt=!Ht&&tt.variants.some(xr=>Jr.has(xr._id)),er=Ye.has(tt.product._id);return n.jsxs("div",{className:"border-b border-gray-100",children:[n.jsxs("div",{className:"flex items-center gap-3 px-3 py-2",children:[n.jsx("input",{type:"checkbox",checked:Ht,ref:xr=>{xr&&(xr.indeterminate=qt)},onChange:()=>va(tt,Ht),disabled:er,className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400 disabled:opacity-50"}),n.jsx("div",{className:"w-9 h-9 bg-gray-100 flex items-center justify-center text-xs font-medium text-gray-600 shrink-0",children:tt.product.imageUrl?n.jsx("img",{src:tt.product.imageUrl,alt:tt.product.title,className:"w-full h-full object-cover"}):tt.product.title?.charAt(0).toUpperCase()||"P"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:tt.product.title}),n.jsx("p",{className:"text-xs text-gray-600",children:tt.product.sku||"No SKU"})]}),n.jsx("p",{className:"w-40 text-right text-sm text-gray-600",children:"General shipping"})]}),tt.variants.map(xr=>{const pn=Jr.has(xr._id),Un=Ee.has(xr._id)||er;return n.jsxs("div",{className:"flex items-center gap-3 px-3 py-1 pl-12",children:[n.jsx("input",{type:"checkbox",checked:pn,onChange:()=>hs(xr),disabled:Un,className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400 disabled:opacity-50"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm text-gray-900",children:Qr(xr)}),n.jsxs("p",{className:"text-xs text-gray-600",children:["SKU: ",xr.sku]})]}),n.jsx("p",{className:"w-40 text-right text-sm text-gray-600",children:"General shipping"})]},xr._id)})]},tt.product._id)})})]}):n.jsx("div",{className:"py-12 text-center",children:n.jsx("p",{className:"text-sm text-gray-600",children:"No products found."})}),Rn=u.useMemo(()=>r?q[r]||[]:[],[r,q]),Qo=Rn.length,Jr=u.useMemo(()=>{const tt=new Map;return Rn.forEach(Ht=>{const qt=typeof Ht.productVariantId=="string"?Ht.productVariantId:Ht.productVariantId?._id;qt&&tt.set(String(qt),Ht)}),tt},[Rn]),hs=async tt=>{if(!r)return;const Ht=tt._id;le(qt=>new Set(qt).add(Ht));try{const qt=Jr.get(Ht);qt?await D(qt._id,r):await H(r,{productVariantId:Ht})}catch(qt){console.error("Failed to toggle product variant entry:",qt)}finally{le(qt=>{const er=new Set(qt);return er.delete(Ht),er})}},va=async(tt,Ht)=>{if(!r)return;const qt=tt.product._id;De(er=>new Set(er).add(qt));try{if(Ht){const er=tt.variants.map(xr=>Jr.get(xr._id)).filter(xr=>!!xr);for(const xr of er)await D(xr._id,r)}else{const er=tt.variants.filter(xr=>!Jr.has(xr._id));for(const xr of er)await H(r,{productVariantId:xr._id})}}catch(er){console.error("Failed to toggle product variants:",er)}finally{De(er=>{const xr=new Set(er);return xr.delete(qt),xr})}},rs=tt=>{const Ht=tt._id,qt=et.has(Ht);if(wt(er=>{const xr=new Set(er);return qt?xr.delete(Ht):xr.add(Ht),xr}),qt){const er=i[Ht];er?.length&&tr(xr=>{const pn=new Set(xr);return er.forEach(Un=>pn.delete(Un._id)),pn})}else{const er=i[Ht];er?.length?tr(xr=>{const pn=new Set(xr);return er.forEach(Un=>pn.add(Un._id)),pn}):qr(Ht).then(xr=>{xr?.length&&jr.current.has(Ht)&&tr(pn=>{const Un=new Set(pn);return xr.forEach(zs=>Un.add(zs._id)),Un})})}},Bs=u.useCallback(tt=>{tn(Ht=>{const qt=new Set(Ht);return qt.has(tt._id)?qt.delete(tt._id):(qt.add(tt._id),qr(tt._id)),qt})},[qr]),Uo=u.useCallback((tt,Ht)=>{tr(qt=>{const er=new Set(qt);er.has(Ht._id)?er.delete(Ht._id):er.add(Ht._id);const xr=i[tt._id]||[];if(xr.length){const pn=xr.every(Un=>er.has(Un._id));wt(Un=>{const zs=new Set(Un);return pn?zs.add(tt._id):zs.delete(tt._id),zs})}return er})},[i]),Vo=tt=>{if(rn.has(tt._id))return"Loading states...";const Ht=i[tt._id];if(Array.isArray(Ht)){const qt=Ht.length;return`${Ht.filter(pn=>$t.has(pn._id)).length} of ${qt} ${qt===1?"state":"states"}`}return et.has(tt._id)?"Selected":""},Ds=()=>Wr.length?n.jsx("div",{className:"border border-gray-200 overflow-hidden",children:Wr.map(tt=>{const Ht=String(tt._id??tt.countryId??tt.id??""),qt=et.has(tt._id),er=Vo(tt),xr=tt.flagEmoji||tt.iso2?.toUpperCase()||"??",pn=i[tt._id],Un=Lr.has(tt._id),ns=!!(Ht&&aa.get(Ht));return n.jsxs("div",{className:"border-b border-gray-100",children:[n.jsxs("div",{className:"flex items-center gap-3 px-3 py-2",children:[n.jsx("input",{type:"checkbox",checked:qt,onChange:()=>rs(tt),disabled:ns,className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400 disabled:opacity-50"}),n.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-base",children:xr}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:tt.name}),ns?n.jsx("p",{className:"text-xs text-gray-400 font-medium",children:"In another zone"}):er?n.jsx("p",{className:"text-xs text-gray-600",children:er}):null]}),n.jsx("button",{onClick:()=>Bs(tt),className:"p-1 text-gray-500 hover:text-gray-700 transition-colors",children:Un?n.jsx(uf,{className:"w-4 h-4"}):n.jsx(Ys,{className:"w-4 h-4"})})]}),Un&&n.jsx("div",{className:"pl-12 pr-3 pb-2",children:rn.has(tt._id)?n.jsxs("div",{className:"flex items-center gap-2 py-2",children:[n.jsx("div",{className:"w-4 h-4 border-2 border-gray-300 border-t-gray-900 rounded-full animate-spin"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Loading states..."})]}):pn&&pn.length>0?n.jsx("div",{className:"space-y-1",children:pn.map($s=>{const Jo=String($s._id),Xa=$t.has($s._id),ye=!!(aa.get(Ht)||(Jo?Rs.get(Jo):void 0));return n.jsxs("div",{className:"flex items-center gap-2 py-1",children:[n.jsx("input",{type:"checkbox",checked:Xa&&!ye,onChange:()=>Uo(tt,$s),disabled:ye,className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400 disabled:opacity-50"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:`text-sm ${ye?"text-gray-400":"text-gray-900"}`,children:$s.name}),!ye&&$s.code&&n.jsx("p",{className:"text-xs text-gray-600",children:$s.code})]}),ye&&n.jsx("p",{className:"text-xs text-gray-400 font-medium",children:"In another zone"})]},$s._id)})}):n.jsx("p",{className:"text-xs text-gray-600 py-2",children:"No states available"})})]},tt._id)})}):n.jsx("div",{className:"border border-gray-200 py-12 text-center",children:n.jsx("p",{className:"text-sm text-gray-600",children:"No countries available. Add countries to your markets to see them here."})}),Li=et.size+$t.size,ui=on?.profileName||"Shipping profile";u.useEffect(()=>{on?.profileName!==void 0&&At(on.profileName)},[on?.profileName]);const Ho=u.useRef(!1),sd=u.useRef(void 0),[Al,gc]=u.useState(!1);u.useEffect(()=>{r!==sd.current&&(Ho.current=!1,gc(!1),sd.current=r)},[r]),u.useEffect(()=>{if(!(!on||!r||K)&&!Ho.current&&!Al){if(on.locationSettings&&on.locationSettings.length>0){const tt={};on.locationSettings.forEach(Ht=>{const qt=String(Ht.locationId).trim();qt&&qt.length>0&&(tt[qt]={createNewRates:Ht.createNewRates,removeRates:Ht.removeRates})}),console.log("Populated locationSettings from profile:",tt),ht(tt)}gc(!0)}},[r,on,K]),u.useEffect(()=>{if(!on||!r||K||Ho.current||!Al)return;const tt=setTimeout(()=>{we({...Ue}),ze(new Set(g.map(Ht=>Ht._id))),Ho.current=!0},100);return()=>clearTimeout(tt)},[r,on,K,Al,g.length]),u.useEffect(()=>{if(!Ho.current){Object.keys(Ue).length===0&&g.length===0&&ae(!1);return}const tt=(()=>{const er=Object.keys(Ue),xr=Object.keys($e);if(er.length!==xr.length)return!0;for(const pn of er){const Un=Ue[pn],zs=$e[pn];if(!zs||Un.createNewRates!==zs.createNewRates||Un.removeRates!==zs.removeRates)return!0}for(const pn of xr)if(!Ue[pn])return!0;return!1})(),Ht=g.length!==Ae.size||g.some(er=>!Ae.has(er._id))||Array.from(Ae).some(er=>!g.find(xr=>xr._id===er)),qt=kt.trim()!==(on?.profileName||"").trim();ae(qt||tt||Ht)},[Ue,g,kt,on?.profileName,$e,Ae]);const yc=async()=>{if(!r)return;const tt=kt.trim();if(!tt){At(on?.profileName||"Shipping profile"),Ke(!1);return}try{await R(r,{profileName:tt}),ae(!1),Ke(!1)}catch(Ht){console.error("Failed to update shipping profile:",Ht)}};return r?K&&!on?n.jsx(Yt,{children:n.jsx("div",{className:"max-w-7xl mx-auto py-8 px-4",children:n.jsx("div",{className:"text-center py-12",children:n.jsx("div",{className:"inline-block w-6 h-6 border-2 border-gray-300 border-t-gray-900 rounded-full animate-spin"})})})}):on?n.jsxs(Yt,{children:[n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 border-b border-gray-200 pb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:Ge,className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(gn,{className:"w-5 h-5"})}),dt?n.jsx("input",{type:"text",value:kt,onChange:tt=>At(tt.target.value),autoFocus:!0,onBlur:()=>Ke(!1),onKeyDown:tt=>{tt.key==="Enter"&&(tt.preventDefault(),Ke(!1))},className:"text-xl font-medium text-gray-900 border-b border-gray-300 focus:outline-none focus:border-gray-900 min-w-[200px]"}):n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:kt}),n.jsx("button",{onClick:()=>Ke(!0),className:"p-1 text-gray-500 hover:text-gray-700 transition-colors",children:n.jsx(Bo,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:or,className:"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors flex items-center gap-1",children:["Actions",n.jsx(Ys,{className:"w-4 h-4"})]}),qn&&n.jsx("div",{className:"absolute right-0 top-full mt-1 bg-white border border-gray-200 z-10 min-w-[150px]",children:n.jsx("button",{onClick:()=>{_s(!0),Vt()},className:"w-full px-3 py-2 text-left text-xs text-red-600 hover:bg-gray-50 transition-colors font-medium",children:"Delete profile"})})]}),(ve||kt.trim()!==(on?.profileName||"").trim())&&n.jsx("button",{onClick:yc,disabled:B,className:"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-700 min-w-[100px] disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:B?"Saving...":"Save"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-3",children:"Products"}),n.jsxs("button",{onClick:Rr,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors flex items-center gap-2",children:[n.jsx(ab,{className:"w-4 h-4"}),"Add products"]}),Rn.length===0?n.jsx("p",{className:"text-sm text-gray-600 mt-3",children:"No products selected yet."}):n.jsxs("div",{className:"mt-3 border border-gray-200 overflow-hidden",children:[n.jsx("div",{className:"bg-gray-50 border-b border-gray-200 px-3 py-2",children:n.jsxs("p",{className:"text-xs font-medium text-gray-700",children:["Selected (",Qo,")"]})}),n.jsx("div",{className:"p-3 space-y-2",children:Rn.map(tt=>{const Ht=typeof tt.productVariantId=="string"?{_id:tt.productVariantId}:tt.productVariantId,qt=Ht&&typeof Ht.productId=="object"?Ht.productId:null,er=Ht?.optionValues?Object.values(Ht.optionValues).filter(Boolean).join(" / "):Ht?.sku||"Variant",xr=qt?.imageUrls&&qt.imageUrls.length>0?qt.imageUrls[0]:void 0;return n.jsx("div",{children:n.jsxs("div",{className:"flex items-center gap-2 border border-gray-100 p-2",children:[n.jsx("div",{className:"w-8 h-8 bg-purple-50 flex items-center justify-center text-xs font-medium text-purple-900 shrink-0",children:xr?n.jsx("img",{src:xr,alt:qt?.title||"Product",className:"w-full h-full object-cover"}):er?.charAt(0).toUpperCase()||"P"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:qt?.title||"Product"}),n.jsx("p",{className:"text-xs text-gray-600 truncate",children:er})]}),n.jsx("button",{onClick:()=>ot(tt),className:"p-1 text-red-600 hover:text-red-700 transition-colors",children:n.jsx(Xs,{className:"w-4 h-4"})})]})},tt._id)})})]})]}),n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-3",children:"Fulfillment locations"}),Y?n.jsx("div",{className:"py-8 text-center",children:n.jsx("div",{className:"inline-block w-6 h-6 border-2 border-gray-300 border-t-gray-900 rounded-full animate-spin"})}):M?n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 text-xs",children:M}):ue.length===0?n.jsx("p",{className:"text-sm text-gray-600",children:"No fulfillment locations available for this profile."}):n.jsx("div",{className:"space-y-3",children:ue.map((tt,Ht)=>{const qt=String(tt.id).trim(),er=Ue[qt]||tt.contextSetting,xr=er?er.createNewRates:!0;return n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-start gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:tt.name}),tt.country&&n.jsx("p",{className:"text-sm text-gray-600",children:tt.country}),tt.address&&n.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:tt.address}),n.jsx("div",{className:"mt-1",children:xr?n.jsx("span",{className:"inline-block px-2 py-0.5 text-xs font-medium bg-green-50 text-green-700",children:"Creating new rates"}):n.jsx("span",{className:"inline-block px-2 py-0.5 text-xs font-medium bg-red-50 text-red-700",children:"Rates removed for this profile"})})]}),n.jsx("button",{onClick:()=>Xr(tt),className:"px-2 py-1 text-xs font-medium text-gray-700 hover:text-gray-900 transition-colors",children:"Edit"})]}),Ht<ue.length-1&&n.jsx("div",{className:"border-t border-gray-200 my-3"})]},tt.id)})}),n.jsxs("div",{className:"mt-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Shipping zones"}),n.jsx("button",{onClick:()=>Yr(),className:"text-xs text-gray-600 hover:text-gray-900 underline",children:"Add shipping zone"})]}),y?n.jsx("div",{className:"py-8 text-center",children:n.jsx("div",{className:"inline-block w-6 h-6 border-2 border-gray-300 border-t-gray-900 rounded-full animate-spin"})}):g.length===0?n.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 px-4 py-3 text-xs mb-3 flex items-start gap-2",children:[n.jsx(Zu,{className:"w-4 h-4 mt-0.5 shrink-0"}),n.jsx("span",{children:"Add a zone and rate to ship from these locations"})]}):n.jsx("div",{className:"space-y-3",children:g.map(tt=>{const Ht=tt.countries?.[0],qt=tt.countries?.length>1,er=Ht?.countryName||"Unknown",xr=Ht?.countryFlag||"",pn=Ht?.selectedStatesCount||0,Un=Ht?.totalStatesCount||0,zs=pn>0;return n.jsxs("div",{children:[n.jsx("div",{className:"border border-gray-200 p-3 hover:bg-gray-50 transition-colors",children:n.jsxs("div",{className:"flex items-center gap-3",children:[xr&&n.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-base",children:xr}),n.jsx("div",{className:"flex-1",children:n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[tt.zoneName,qt?n.jsxs("span",{className:"text-sm text-gray-600 ml-1",children:[" ",tt.countries.length," countries"]}):n.jsxs(n.Fragment,{children:[n.jsxs("span",{className:"text-sm text-gray-600 ml-1",children:[" ",er]}),zs&&n.jsxs("span",{className:"text-sm text-gray-600 ml-1",children:["(",pn," of ",Un," ",Un===1?"state":"states",")"]})]})]})}),n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:ns=>ke({element:ns.currentTarget,zoneId:tt._id}),className:"p-1 text-gray-500 hover:text-gray-700 transition-colors",children:n.jsx(Jd,{className:"w-5 h-5"})}),ne?.zoneId===tt._id&&n.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white border border-gray-200 z-10 min-w-[120px]",children:[n.jsx("button",{onClick:()=>{const ns=g.find($s=>$s._id===ne?.zoneId);ke(null),ns&&Yr(ns)},className:"w-full px-3 py-2 text-left text-xs text-gray-700 hover:bg-gray-50 transition-colors",children:"Edit"}),n.jsx("button",{onClick:()=>{const ns=ne?.zoneId;if(ke(null),!ns)return;const $s=g.find(Jo=>Jo._id===ns);Ze({id:ns,name:$s?.zoneName||"this"})},className:"w-full px-3 py-2 text-left text-xs text-red-600 hover:bg-gray-50 transition-colors",children:"Delete"})]})]})]})}),Q[tt._id]?n.jsx("div",{className:"py-3 text-center",children:n.jsx("div",{className:"inline-block w-5 h-5 border-2 border-gray-300 border-t-gray-900 rounded-full animate-spin"})}):X[tt._id]&&X[tt._id].length>0?n.jsx("div",{className:"mt-2 space-y-1",children:X[tt._id].map(ns=>{const $s=typeof ns.price=="number"?ns.price:parseFloat(String(ns.price)),Jo=Number.isFinite($s)?$s:0;return n.jsxs("div",{className:"border border-gray-200 p-2 flex items-center justify-between",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:ns.customRateName}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`px-2 py-0.5 text-xs font-medium ${Jo===0?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:Jo===0?"Free":`${Jo.toFixed(2)}`}),n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:Xa=>$n({element:Xa.currentTarget,zoneId:tt._id,zoneName:tt.zoneName,rate:ns}),className:"p-1 text-gray-500 hover:text-gray-700 transition-colors",children:n.jsx(Jd,{className:"w-4 h-4"})}),jn?.zoneId===tt._id&&jn?.rate._id===ns._id&&n.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white border border-gray-200 z-10 min-w-[120px]",children:[n.jsx("button",{onClick:Mt,className:"w-full px-3 py-2 text-left text-xs text-gray-700 hover:bg-gray-50 transition-colors",children:"Edit rate"}),n.jsx("button",{onClick:Pt,className:"w-full px-3 py-2 text-left text-xs text-red-600 hover:bg-gray-50 transition-colors",children:"Delete"})]})]})]})]},ns._id)})}):n.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 px-4 py-3 text-xs mt-2 flex items-start gap-2",children:[n.jsx(Zu,{className:"w-4 h-4 mt-0.5 shrink-0"}),n.jsx("span",{children:"No rates. Customers in this zone won't be able to complete checkout."})]}),n.jsxs("button",{onClick:()=>Et(tt),className:"text-xs text-gray-600 hover:text-gray-900 mt-2 flex items-center gap-1",children:[n.jsx(ff,{className:"w-4 h-4"}),"Add rate"]})]},tt._id)})})]})]}),n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Start shipping to more places"}),n.jsx("span",{className:"px-1.5 py-0.5 text-xs font-medium bg-gray-100 text-gray-900",children:"i"})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Add countries/regions to a market to start selling and manage localized settings, including shipping zones"}),n.jsx("button",{onClick:()=>s("/markets"),className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Go to Markets"}),n.jsx(Zc,{to:"/settings/markets",className:"block mt-3 text-xs text-gray-600 hover:text-gray-900",children:"233 countries/regions not in a market"})]})]})]}),n.jsx(en,{open:Oe,onClose:Er,maxWidth:"md",title:"Manage products",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:Er,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:Er,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Done"})]}),children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx("input",{type:"text",value:I,onChange:tt=>V(tt.target.value),placeholder:"Search products",className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"}),n.jsx(no,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]}),n.jsx("select",{value:"all",disabled:!0,className:"px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 w-[180px] bg-gray-50",children:n.jsx("option",{value:"all",children:"Search by All"})})]}),n.jsx("button",{disabled:!0,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-400 w-[120px] disabled:opacity-50 disabled:cursor-not-allowed",children:"Add filter +"}),Qe&&n.jsxs("p",{className:"text-xs text-gray-600",children:["Showing ",Fe.length," of ",Qe.total," products"]}),da()]})}),n.jsx(en,{open:!!ct,onClose:()=>ot(null),maxWidth:"sm",title:"Remove Variant?",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>ot(null),className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"No"}),n.jsx("button",{onClick:()=>{ct&&r?D(ct._id,r).finally(()=>{ot(null)}):ot(null)},className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Yes"})]}),children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("p",{className:"text-sm text-gray-600",children:["Are you sure you want to delete this product variant from"," ",n.jsx("span",{className:"font-medium text-gray-900",children:ui})," ","shipping profile?"]}),ct&&n.jsx("p",{className:"text-sm font-medium text-gray-900 mt-2",children:(()=>{const tt=typeof ct.productVariantId=="string"?null:ct.productVariantId;if(!tt)return String(ct.productVariantId);const Ht=tt&&typeof tt.productId=="object"?tt.productId:null,qt=tt.optionValues?Object.values(tt.optionValues).filter(Boolean).join(" / "):tt.sku;return`${Ht?.title||"Product"}  ${qt||"Variant"}`})()})]})}),n.jsx(en,{open:mt,onClose:Vr,maxWidth:"sm",title:`Manage rates for ${An?.name||"location"}`,actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:Vr,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:Yn,disabled:!wn,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Done"})]}),children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Create new rates"}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",value:"create",checked:wn==="create",onChange:tt=>{const Ht=tt.target.value;In.current=Ht,zr(Ht)},className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400"}),n.jsxs("span",{className:"text-sm text-gray-700",children:["New rate for ",An?.name||"this location"]})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Remove rates"}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",value:"remove",checked:wn==="remove",onChange:tt=>{const Ht=tt.target.value;In.current=Ht,zr(Ht)},className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:"This location will no longer ship the products in this profile"})]})]})]})}),n.jsx(en,{open:xt,onClose:Gr,maxWidth:"md",title:Xe?"Edit shipping zone":"Create new shipping zone",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:Gr,disabled:y,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),an&&n.jsx("span",{className:"text-xs text-red-600 mr-2",children:an}),n.jsx("button",{onClick:mn,disabled:!br.trim()||Li===0||y,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Creating...":"Done"})]}),children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Zone name"}),n.jsx("input",{type:"text",value:br,onChange:tt=>zt(tt.target.value),placeholder:"",className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 mt-1"}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Customers won't see this"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Shipping zones"}),n.jsxs("div",{className:"relative mb-3",children:[n.jsx("input",{type:"text",value:be,onChange:tt=>Be(tt.target.value),placeholder:"Search countries and regions to ship to",className:"w-full px-3 py-1.5 pl-10 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"}),n.jsx(no,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]}),bn?n.jsx("div",{className:"border border-gray-200 py-12 text-center",children:n.jsx("div",{className:"inline-block w-6 h-6 border-2 border-gray-300 border-t-gray-900 rounded-full animate-spin"})}):rr?n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 text-xs",children:rr}):Ds(),n.jsx(Zc,{to:"/settings/markets",className:"inline-block mt-3 text-xs text-gray-600 hover:text-gray-900",children:"Add more countries/regions in Markets"})]})]})}),n.jsx(en,{open:je,onClose:it,maxWidth:"sm",title:ce?"Edit rate":"Add rate",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:it,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:fr,disabled:!Br.trim()||ut==="carrier"||k,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:k?"Saving...":ce?"Save":"Done"})]}),children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Rate type"}),n.jsxs("select",{value:ut,onChange:tt=>jt(tt.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400",children:[n.jsx("option",{value:"flat",children:"Use flat rate"}),n.jsx("option",{value:"carrier",children:"Use carrier or app to calculate rates"})]}),ut==="carrier"&&n.jsxs("div",{className:"mt-2 bg-blue-50 border border-blue-200 text-blue-900 px-4 py-3 text-xs flex items-start justify-between gap-2",children:[n.jsx("span",{children:"There are no carriers or apps available for this zone. Change back to flat rate"}),n.jsx("button",{onClick:()=>jt("flat"),className:"text-blue-600 underline font-medium shrink-0",children:"Change back to flat rate"})]})]}),ut==="flat"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Shipping rate"}),n.jsx("select",{value:Lt,onChange:tt=>ur(tt.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400",children:n.jsx("option",{value:"custom",children:"Custom"})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Custom rate name"}),n.jsx("input",{type:"text",value:Br,onChange:tt=>_t(tt.target.value),placeholder:"",className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Custom delivery description (optional)"}),n.jsxs("select",{value:Kr,onChange:tt=>Zr(tt.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400",children:[n.jsx("option",{value:"",children:"None"}),vs.map(tt=>n.jsx("option",{value:tt,children:tt},tt))]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Price"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-sm text-gray-600",children:""}),n.jsx("input",{type:"text",value:ps,onChange:tt=>{const Ht=tt.target.value.replace(/[^0-9.]/g,"");Xn(Ht)},placeholder:"0.00",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]}),n.jsx("button",{onClick:()=>Xn("0.00"),className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors min-w-[80px]",children:"Free"})]})]}),ds?n.jsxs("div",{className:"mt-3",children:[n.jsx("button",{onClick:()=>{Ea(!1),Is("weight"),Ir("0"),gt(""),Or("0.00"),Sn("")},className:"text-xs text-gray-600 hover:text-gray-900 underline mb-3 block",children:"Remove conditional pricing"}),n.jsxs("div",{className:"mb-3 flex gap-6",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",value:"weight",checked:sa==="weight",onChange:tt=>Is(tt.target.value),className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Based on item weight"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",value:"price",checked:sa==="price",onChange:tt=>Is(tt.target.value),className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Based on order price"})]})]}),sa==="weight"?n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Minimum weight"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:ya,onChange:tt=>{const Ht=tt.target.value.replace(/[^0-9.]/g,"");Ir(Ht)},placeholder:"0",className:"w-full px-3 py-1.5 pr-12 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"}),n.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-sm text-gray-600",children:"kg"})]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Maximum weight"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:_r,onChange:tt=>{const Ht=tt.target.value.replace(/[^0-9.]/g,"");gt(Ht)},placeholder:"No limit",className:"w-full px-3 py-1.5 pr-12 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"}),n.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-sm text-gray-600",children:"kg"})]})]})]}):n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Minimum price"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-sm text-gray-600",children:""}),n.jsx("input",{type:"text",value:ar,onChange:tt=>{const Ht=tt.target.value.replace(/[^0-9.]/g,"");Or(Ht)},placeholder:"0.00",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Maximum price"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-sm text-gray-600",children:""}),n.jsx("input",{type:"text",value:Mr,onChange:tt=>{const Ht=tt.target.value.replace(/[^0-9.]/g,"");Sn(Ht)},placeholder:"No limit",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]})]})]})]}):n.jsx("button",{onClick:()=>Ea(!0),className:"text-xs text-gray-600 hover:text-gray-900 underline",children:"Add conditional pricing"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Checkout preview"}),n.jsx("div",{className:"border border-gray-200 p-3 bg-gray-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"radio",checked:!0,readOnly:!0,className:"w-4 h-4 text-gray-900 border-gray-300"}),n.jsx("p",{className:"text-sm text-gray-900",children:Br||"Rate name"})]}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:parseFloat(ps)===0?"FREE":` ${parseFloat(ps).toFixed(2)}`})]})})]})]})]})}),n.jsx(en,{open:Gn,onClose:()=>{Ta||_s(!1)},maxWidth:"sm",title:"Delete shipping profile",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>{Ta||_s(!1)},className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"No"}),n.jsx("button",{onClick:Ft,disabled:Ta,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-red-600 hover:bg-red-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:Ta?"Deleting...":"Yes"})]}),children:n.jsxs("p",{className:"text-sm text-gray-600 leading-relaxed",children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-medium text-gray-900",children:on?.profileName||"this"})," ","shipping profile?"]})}),n.jsx(en,{open:!!Re,onClose:()=>{st||Ze(null)},maxWidth:"sm",title:"Delete shipping zone",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>{st||Ze(null)},className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"No"}),n.jsx("button",{onClick:Cr,disabled:st,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-red-600 hover:bg-red-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:st?"Deleting...":"Yes"})]}),children:n.jsxs("p",{className:"text-sm text-gray-600 leading-relaxed",children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-medium text-gray-900",children:Re?.name||"this"})," ","shipping zone?"]})}),n.jsx(en,{open:!!Fn,onClose:()=>{so||Wn(null)},maxWidth:"sm",title:"Delete shipping rate",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>{so||Wn(null)},className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"No"}),n.jsx("button",{onClick:Rt,disabled:so,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-red-600 hover:bg-red-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:so?"Deleting...":"Yes"})]}),children:n.jsxs("p",{className:"text-sm text-gray-600 leading-relaxed",children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-medium text-gray-900",children:Fn?.rate.customRateName||"this"})," ","shipping zone rate from"," ",n.jsx("span",{className:"font-medium text-gray-900",children:Fn?.zoneName||"this"})," ","shipping zone?"]})})]}):n.jsx(Yt,{children:n.jsx("div",{className:"max-w-7xl mx-auto py-8 px-4",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-3",children:"Shipping profile not found"}),n.jsx("button",{onClick:Ge,className:"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Back to shipping settings"})]})})}):n.jsx(Yt,{children:n.jsx("div",{className:"max-w-7xl mx-auto py-8 px-4",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-3",children:"Invalid profile"}),n.jsx("button",{onClick:Ge,className:"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Back to shipping settings"})]})})})},JNe=()=>{const s=dr(),r="bfad2685eaa342b6584e1a4b12c0735e6cc8f4343cb8b10626cef0c4dd00064d",e=u.useCallback(()=>{s("/settings/notifications")},[s]),t=u.useCallback(()=>{},[]);return n.jsx(Yt,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b border-gray-200 pb-4",children:[n.jsx("button",{onClick:e,className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(wx,{className:"w-5 h-5"})}),n.jsx(As,{className:"w-4 h-4 text-gray-500"}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Webhooks"})]}),n.jsxs("div",{className:"border border-gray-200 p-4",children:[n.jsx("p",{className:"text-sm text-gray-900 mb-4",children:"Send XML or JSON notifications about store events to a URL"}),n.jsxs("button",{onClick:t,className:"w-full flex items-center justify-start border border-gray-200 text-sm text-gray-700 py-2 px-3 mb-4 hover:bg-gray-50 transition-colors",children:[n.jsx(On,{className:"w-4 h-4 mr-2"}),"Create webhook"]}),n.jsxs("div",{className:"p-3 bg-gray-50 flex items-center gap-2 border border-gray-200",children:[n.jsx(Ps,{className:"w-4 h-4 text-gray-600 shrink-0"}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Your webhooks will be signed with"," ",n.jsx("span",{className:"text-gray-700 font-mono",children:r})]})]})]})]})})};const mL=(...s)=>s.filter((r,e,t)=>!!r&&r.trim()!==""&&t.indexOf(r)===e).join(" ").trim();const e2e=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const t2e=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,e,t)=>t?t.toUpperCase():e.toLowerCase());const fO=s=>{const r=t2e(s);return r.charAt(0).toUpperCase()+r.slice(1)};var r2e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const n2e=s=>{for(const r in s)if(r.startsWith("aria-")||r==="role"||r==="title")return!0;return!1};const s2e=u.forwardRef(({color:s="currentColor",size:r=24,strokeWidth:e=2,absoluteStrokeWidth:t,className:a="",children:o,iconNode:i,...l},c)=>u.createElement("svg",{ref:c,...r2e,width:r,height:r,stroke:s,strokeWidth:t?Number(e)*24/Number(r):e,className:mL("lucide",a),...!o&&!n2e(l)&&{"aria-hidden":"true"},...l},[...i.map(([d,p])=>u.createElement(d,p)),...Array.isArray(o)?o:[o]]));const Wj=(s,r)=>{const e=u.forwardRef(({className:t,...a},o)=>u.createElement(s2e,{ref:o,iconNode:r,className:mL(`lucide-${e2e(fO(s))}`,`lucide-${s}`,t),...a}));return e.displayName=fO(s),e};const a2e=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],o2e=Wj("external-link",a2e);const i2e=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],l2e=Wj("maximize-2",i2e);const c2e=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],d2e=Wj("minimize-2",c2e);const u2e=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],f2e=Wj("x",u2e),p2e=({isOpen:s,onClose:r,themeId:e,themeName:t,isInstalled:a=!1,isCustomTheme:o=!1})=>{const[i,l]=u.useState(!1),[c,d]=u.useState(!0),{activeStoreId:p}=Ur(),h=u.useMemo(()=>{const w="https://backend.ziplofy.com/api",C=`?v=${Date.now()}`;if(o)if(e.startsWith("custom-")){const R=(()=>{try{const B=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken")||localStorage.getItem("token")||sessionStorage.getItem("token");if(!B)return null;const G=B.split(".");if(G.length<2)return null;const $=JSON.parse(atob(G[1].replace(/-/g,"+").replace(/_/g,"/")));return String($.uid||$.userId||$.id||"")}catch{return null}})();if(p)return`${w}/themes/installed/${p}/${e}/unzippedTheme/index.html${C}`;if(R)return`${w}/themes/installed/${R}/${e}/unzippedTheme/index.html${C}`;const L=e.replace(/^custom-/,"");return`${w}/custom-themes/${L}/files/index.html${C}`}else return`${w}/custom-themes/${e}/files/index.html${C}`;if(!a)return`${w}/themes/preview/${e}${C}`;const N=(()=>{try{const O=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken")||localStorage.getItem("token")||sessionStorage.getItem("token");if(!O)return null;const R=O.split(".");if(R.length<2)return null;const L=JSON.parse(atob(R[1].replace(/-/g,"+").replace(/_/g,"/")));return String(L.uid||L.userId||L.id||"")}catch{return null}})();return p?`${w}/themes/installed/${p}/${e}/unzippedTheme/index.html${C}`:N?`${w}/themes/installed/${N}/${e}/unzippedTheme/index.html${C}`:`${w}/themes/preview/${e}${C}`},[e,a,o,p]);if(!s)return null;const g=h,y=()=>{window.open(g,"_blank","noopener,noreferrer")},b=()=>{l(!i)},v=()=>{d(!1)};return n.jsxs("div",{className:`theme-preview-modal ${i?"fullscreen":""}`,children:[n.jsx("div",{className:"modal-overlay",onClick:r}),n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("div",{className:"modal-title",children:[n.jsxs("h3",{children:["Theme Preview: ",t]}),n.jsx("span",{className:"preview-badge",children:"Live Demo"})]}),n.jsxs("div",{className:"modal-actions",children:[n.jsx("button",{className:"action-btn",onClick:b,title:i?"Exit Fullscreen":"Enter Fullscreen",children:i?n.jsx(d2e,{size:16}):n.jsx(l2e,{size:16})}),n.jsx("button",{className:"action-btn",onClick:y,title:"Open in New Tab",children:n.jsx(o2e,{size:16})}),n.jsx("button",{className:"action-btn close-btn",onClick:r,title:"Close Preview",children:n.jsx(f2e,{size:16})})]})]}),n.jsxs("div",{className:"modal-body",children:[c&&n.jsx("div",{className:"loading-overlay",children:n.jsxs("div",{className:"loading-spinner",children:[n.jsx("div",{className:"spinner"}),n.jsx("p",{children:"Loading theme preview..."})]})}),n.jsx("iframe",{src:g,className:"theme-preview-iframe",title:`${t} Preview`,onLoad:v,sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-presentation",loading:"lazy"})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("div",{className:"preview-info",children:n.jsx("p",{children:"This is a live preview of the theme. Interactive features may be limited in preview mode."})}),n.jsxs("div",{className:"preview-actions",children:[n.jsx("button",{className:"btn-secondary",onClick:r,children:"Close Preview"}),n.jsx("button",{className:"btn-primary",onClick:y,children:"Open in New Tab"})]})]})]})]})},h2e=({isOpen:s,onClose:r,themeId:e})=>{if(!s)return null;const t=()=>{const i=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken"),l=localStorage.getItem("storeId")||sessionStorage.getItem("storeId");let c=`/themes/builder?id=${encodeURIComponent(e)}&type=installed`;i&&(c+=`&accessToken=${encodeURIComponent(i)}`),l&&(c+=`&storeId=${encodeURIComponent(l)}`),window.open(c,"_blank","noopener,noreferrer"),r()},a=()=>{window.open(`/themes/code/${e}`,"_blank","noopener,noreferrer"),r()},o=()=>{const i=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken"),l=localStorage.getItem("storeId")||sessionStorage.getItem("storeId");let c=`/themes/basic-elementor?id=${encodeURIComponent(e)}&type=installed`;i&&(c+=`&accessToken=${encodeURIComponent(i)}`),l&&(c+=`&storeId=${encodeURIComponent(l)}`),window.open(c,"_blank","noopener,noreferrer"),r()};return n.jsxs("div",{style:{position:"fixed",inset:0,zIndex:9999},children:[n.jsx("div",{onClick:r,style:{position:"absolute",inset:0,background:"rgba(0,0,0,0.4)"}}),n.jsxs("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",background:"#fff",color:"#000",width:420,borderRadius:8,boxShadow:"0 10px 30px rgba(0,0,0,0.2)"},children:[n.jsx("div",{style:{padding:16,borderBottom:"1px solid #e5e7eb",fontWeight:700},children:"Edit Theme"}),n.jsxs("div",{style:{padding:16,display:"flex",flexDirection:"column",gap:12},children:[n.jsxs("button",{onClick:t,style:{padding:"12px 14px",borderRadius:8,border:"1px solid #d1d5da",background:"#fff",cursor:"pointer",textAlign:"left",fontWeight:600},children:["Edit Layout (Visual)",n.jsx("div",{style:{fontSize:12,color:"#6b7280",fontWeight:400},children:"Open Elementor-style visual builder to modify layout and components"})]}),n.jsxs("button",{onClick:o,style:{padding:"12px 14px",borderRadius:8,border:"1px solid #d1d5da",background:"#fff",cursor:"pointer",textAlign:"left",fontWeight:600},children:["Edit with Basic Elementor",n.jsx("div",{style:{fontSize:12,color:"#6b7280",fontWeight:400},children:"Open basic Elementor editor"})]}),n.jsxs("button",{onClick:a,style:{padding:"12px 14px",borderRadius:8,border:"1px solid #d1d5da",background:"#fff",cursor:"pointer",textAlign:"left",fontWeight:600},children:["Edit Code (Advanced)",n.jsx("div",{style:{fontSize:12,color:"#6b7280",fontWeight:400},children:"Open code editor (Monaco) to edit HTML/CSS/JS"})]})]}),n.jsx("div",{style:{padding:12,borderTop:"1px solid #e5e7eb",display:"flex",justifyContent:"flex-end"},children:n.jsx("button",{onClick:r,style:{padding:"8px 12px",borderRadius:6,border:"1px solid #d1d5da",background:"#fff",cursor:"pointer"},children:"Close"})})]})]})},m2e=()=>{const[s,r]=u.useState("grid"),[e,t]=u.useState(""),[a,o]=u.useState({isOpen:!1,themeId:"",themeName:"",isInstalled:!1,isCustomTheme:!1}),[i,l]=u.useState({isOpen:!1,themeId:"",isInstalled:!1}),{themes:c,loading:d,error:p,fetchAll:h}=VSe(),{installedThemes:g,installTheme:y,uninstallTheme:b,fetchByStoreId:v}=TSe(),{activeStoreId:w}=Ur(),{customThemes:C,loading:k,fetchAll:N,deleteTheme:O,installTheme:R,uninstallTheme:L,updateTheme:B}=F2(),[G,$]=u.useState([]),[z,Y]=u.useState(!1),[M,q]=u.useState(!1),[P,H]=u.useState(new Set),[D,X]=u.useState(null),[se,Q]=u.useState({isOpen:!1,themeId:"",themeName:""}),[xe,K]=u.useState(!1),[Z,ve]=u.useState({}),ae=async I=>{await b(I)},Se=async I=>{w&&(await y(w,I),setTimeout(()=>{ue()},500))},Pe=(I,V,re=!1,pe=!1)=>{o({isOpen:!0,themeId:I,themeName:V,isInstalled:re,isCustomTheme:pe})},$e=()=>{o({isOpen:!1,themeId:"",themeName:"",isInstalled:!1,isCustomTheme:!1})},we=I=>{const V="https://backend.ziplofy.com/api",re=`?v=${Date.now()}`,ge=(()=>{try{const Ce=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken")||localStorage.getItem("token")||sessionStorage.getItem("token");if(!Ce)return null;const he=Ce.split(".");if(he.length<2)return null;const ie=JSON.parse(atob(he[1].replace(/-/g,"+").replace(/_/g,"/")));return String(ie.uid||ie.userId||ie.id||"")}catch{return null}})();return w?`${V}/themes/installed/${w}/${I}/unzippedTheme/index.html${re}`:ge?`${V}/themes/installed/${ge}/${I}/unzippedTheme/index.html${re}`:`${V}/themes/preview/${I}${re}`},Ae=(I,V=!1)=>{let re;if(V){const pe="https://backend.ziplofy.com/api",ge=`?v=${Date.now()}`;if(I.startsWith("custom-")){const he=(()=>{try{const ie=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken")||localStorage.getItem("token")||sessionStorage.getItem("token");if(!ie)return null;const Fe=ie.split(".");if(Fe.length<2)return null;const We=JSON.parse(atob(Fe[1].replace(/-/g,"+").replace(/_/g,"/")));return String(We.uid||We.userId||We.id||"")}catch{return null}})();if(w)re=`${pe}/themes/installed/${w}/${I}/unzippedTheme/index.html${ge}`;else if(he)re=`${pe}/themes/installed/${he}/${I}/unzippedTheme/index.html${ge}`;else{const ie=I.replace(/^custom-/,"");re=`${pe}/custom-themes/${ie}/files/index.html${ge}`}}else re=`${pe}/custom-themes/${I}/files/index.html${ge}`}else re=we(I);window.open(re,"_blank","noopener,noreferrer")},ze=(I,V=!1)=>{l({isOpen:!0,themeId:I,isInstalled:V})},Ge=async(I,V)=>{K(!0);let re=null;try{re=URL.createObjectURL(V),ve(ie=>({...ie,[I]:re}));const pe=await nt.get(`/custom-themes/${I}`);if(!pe.data.success||!pe.data.data)throw new Error("Theme not found");const ge=pe.data.data,Ce=new Blob([V],{type:V.type});await B(I,ge.name,ge.html||"",ge.css||"",Ce)?(await N(),await new Promise(ie=>setTimeout(ie,500)),console.log("this is the domain section"),setTimeout(()=>{ve(ie=>{const Fe={...ie};return delete Fe[I],Fe}),re&&URL.revokeObjectURL(re)},1e3),Q({isOpen:!1,themeId:"",themeName:""}),X(null)):(ve(ie=>{const Fe={...ie};return delete Fe[I],Fe}),re&&URL.revokeObjectURL(re),alert("Failed to update thumbnail. Please try again."))}catch(pe){console.error("Error updating thumbnail:",pe),ve(Ce=>{const he={...Ce};return delete he[I],he}),re&&URL.revokeObjectURL(re);const ge=pe?.response?.data?.message||pe?.message||"Failed to update thumbnail. Please try again.";alert(ge)}finally{K(!1)}},Ue=I=>{const V=I.target.files?.[0];if(V){if(!V.type.startsWith("image/")){alert("Please select an image file.");return}if(V.size>5*1024*1024){alert("Image size should be less than 5MB.");return}se.themeId&&Ge(se.themeId,V),I.target.value=""}},ht=async I=>{if(!/^[0-9a-fA-F]{24}$/.test(I)){alert("Invalid theme ID. This theme may have been created with an old format. It cannot be deleted through the API.");return}if(!window.confirm("Are you sure you want to delete this theme? This action cannot be undone."))return;await O(I)?localStorage.getItem("ziplofy.appliedCustomThemeId")===I&&localStorage.removeItem("ziplofy.appliedCustomThemeId"):alert("Failed to delete theme. Please try again.")},ee=I=>g.some(V=>V._id===I);u.useEffect(()=>{h()},[h]);const ue=async()=>{Y(!0);try{const V=await fetch("https://backend.ziplofy.com/api/themes/recent");if(V.ok){const re=await V.json();$(re||[])}}catch(I){console.error("Error fetching recent installations:",I),$([])}finally{Y(!1)}};u.useEffect(()=>{ue()},[]);const Oe=async()=>{if(P.size===0){alert("Please select at least one theme to delete");return}if(confirm(`Are you sure you want to delete ${P.size} theme(s) from history?`))try{const V=await fetch("https://backend.ziplofy.com/api/themes/recent/delete",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({themeIds:Array.from(P)})});if(V.ok)$(re=>re.filter(pe=>{const ge=pe.recentId||pe._id;return!P.has(ge)})),H(new Set),q(!1);else{const re=await V.json();alert(re.message||"Failed to delete themes from history")}}catch(I){console.error("Error deleting recent installations:",I),alert("Failed to delete themes from history")}};u.useEffect(()=>{w&&v(w)},[w,v]),u.useEffect(()=>{const I=V=>{D&&!V.target.closest(".theme-card-menu")&&X(null)};if(D)return document.addEventListener("mousedown",I),()=>{document.removeEventListener("mousedown",I)}},[D]),u.useEffect(()=>{C.length>0&&Object.keys(Z).length>0},[C]),u.useEffect(()=>{N();const I=localStorage.getItem("ziplofy.appliedCustomThemeId");I&&(/^[0-9a-fA-F]{24}$/.test(I)||(localStorage.removeItem("ziplofy.appliedCustomThemeId"),console.warn("Removed invalid custom theme ID from localStorage")))},[N]);const J=c.filter(I=>I.name.toLowerCase().includes(e.toLowerCase())||(I.description||"").toLowerCase().includes(e.toLowerCase()));return n.jsxs("div",{className:"themes-container",children:[n.jsx("div",{className:"themes-header",children:n.jsxs("div",{className:"header-content",children:[n.jsx("h1",{className:"themes-title",children:"Themes"}),n.jsx("p",{className:"themes-subtitle",children:"Discover professionally designed themes to make your store stand out"})]})}),n.jsxs("div",{className:"themes-controls",children:[n.jsx("div",{className:"search-section",children:n.jsxs("div",{className:"search-input-wrapper",children:[n.jsx(Ik,{className:"search-icon",fontSize:"small"}),n.jsx("input",{type:"text",placeholder:"Search themes...",className:"search-input",value:e,onChange:I=>t(I.target.value)})]})}),n.jsxs("div",{className:"filter-view-controls",children:[n.jsxs("button",{className:"filter-btn",children:[n.jsx(bge,{fontSize:"small"}),n.jsx("span",{children:"Filter"})]}),n.jsxs("div",{className:"view-toggle",children:[n.jsx("button",{className:`view-btn ${s==="grid"?"active":""}`,onClick:()=>r("grid"),children:n.jsx(wge,{fontSize:"small"})}),n.jsx("button",{className:`view-btn ${s==="list"?"active":""}`,onClick:()=>r("list"),children:n.jsx(Sge,{fontSize:"small"})})]})]})]}),Array.isArray(g)&&g.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("h2",{style:{margin:"24px 0 16px 0",color:"black",fontSize:"28px",fontWeight:"700"},children:"Installed themes"}),n.jsx("div",{style:{marginBottom:"2rem"},className:`themes-layout ${s}`,children:g.map(I=>{const V=I,re=V.isCustomTheme||V._id?.startsWith("custom-"),pe=re&&V.customThemeId?V.customThemeId:V._id;return n.jsxs("div",{className:"theme-card",children:[n.jsxs("div",{className:"theme-thumbnail",children:[V.thumbnailUrl?n.jsx("img",{src:V.thumbnailUrl,alt:V.name||"",className:"theme-image",onError:ge=>{ge.currentTarget.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="300" height="200" viewBox="0 0 300 200"><rect width="300" height="200" fill="%23f3f4f6"/><text x="150" y="100" text-anchor="middle" fill="%236b7280" font-family="Arial" font-size="14">No Preview</text></svg>'}}):n.jsx("div",{className:"theme-image-placeholder",children:n.jsx("span",{children:"No Preview"})}),n.jsx("div",{className:"theme-overlay",children:n.jsxs("button",{className:"overlay-btn preview-btn",onClick:()=>Pe(V._id,V.name,!0,re),children:[n.jsx(eS,{fontSize:"small"}),n.jsx("span",{children:"Preview"})]})})]}),n.jsxs("div",{className:"theme-info",children:[n.jsxs("div",{className:"theme-header-info",children:[n.jsx("h3",{className:"theme-name",children:V.name}),n.jsxs("div",{className:"theme-rating",children:[n.jsx("div",{className:"stars",children:[...Array(5)].map((ge,Ce)=>n.jsx(JC,{fontSize:"inherit",className:"star filled"},Ce))}),n.jsx("span",{className:"rating-text",children:Number(V.rating?.average||0).toFixed(1)})]})]}),V.description&&n.jsx("p",{className:"theme-description",children:V.description}),n.jsxs("div",{className:"theme-meta",children:[n.jsx("span",{className:"theme-category",children:V.category}),n.jsx("span",{className:"theme-price",children:"Free"})]}),n.jsxs("div",{className:"theme-actions",children:[n.jsx("button",{className:"action-btn primary",onClick:()=>Ae(V._id,re),children:"Open"}),re?n.jsx("button",{className:"action-btn secondary",onClick:()=>{pe&&window.open(`/themes/builder?themeId=${pe}`,"_blank","noopener,noreferrer")},children:"Edit"}):n.jsx("button",{className:"action-btn secondary",onClick:()=>ze(V._id,!0),children:"Edit"}),n.jsx("button",{className:"action-btn secondary",onClick:re?async()=>{if(!w){alert("Please select a store first.");return}await L(pe,w)&&await v(w)}:()=>ae(I.installedThemeId),children:"Uninstall"})]})]})]},I._id)})})]}),G.length>0&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"24px",marginBottom:"16px"},children:[n.jsx("h2",{style:{margin:0,color:"black",fontSize:"28px",fontWeight:"700"},children:"Recently Installed"}),n.jsxs("div",{style:{display:"flex",gap:"10px"},children:[M&&n.jsx("button",{onClick:()=>{q(!1),H(new Set)},style:{backgroundColor:"#6b7280",color:"#ffffff",border:"none",padding:"10px 20px",borderRadius:"6px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:I=>{I.currentTarget.style.backgroundColor="#4b5563"},onMouseLeave:I=>{I.currentTarget.style.backgroundColor="#6b7280"},children:"Cancel"}),n.jsx("button",{onClick:()=>{M?Oe():q(!0)},style:{backgroundColor:M?"#dc2626":"#6b7280",color:"#ffffff",border:"none",padding:"10px 20px",borderRadius:"6px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:I=>{I.currentTarget.style.backgroundColor=M?"#b91c1c":"#4b5563"},onMouseLeave:I=>{I.currentTarget.style.backgroundColor=M?"#dc2626":"#6b7280"},children:"Delete Selected"})]})]}),M&&n.jsx("div",{style:{marginBottom:"12px",color:"#6b7280",fontSize:"14px"},children:"Select themes to delete from history"}),n.jsx("div",{style:{marginBottom:"2rem"},className:`themes-layout ${s}`,children:G.map(I=>((I.isCustomTheme||I._id?.startsWith("custom-"))&&I.customThemeId?I.customThemeId:I._id,n.jsxs("div",{className:"theme-card",style:{position:"relative"},children:[M&&n.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",zIndex:10},children:n.jsx("input",{type:"checkbox",checked:P.has(I.recentId||I._id),onChange:re=>{const pe=new Set(P),ge=I.recentId||I._id;re.target.checked?pe.add(ge):pe.delete(ge),H(pe)},style:{width:"20px",height:"20px",cursor:"pointer",accentColor:"#16a34a"}})}),n.jsx("div",{className:"theme-thumbnail",children:I.thumbnailUrl?n.jsx("img",{src:I.thumbnailUrl,alt:I.name||"",className:"theme-image",onError:re=>{re.currentTarget.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="300" height="200" viewBox="0 0 300 200"><rect width="300" height="200" fill="%23f3f4f6"/><text x="150" y="100" text-anchor="middle" fill="%236b7280" font-family="Arial" font-size="14">No Preview</text></svg>'}}):n.jsx("div",{className:"theme-image-placeholder",children:n.jsx("span",{children:I.name})})}),n.jsxs("div",{className:"theme-info",children:[n.jsxs("div",{className:"theme-header-info",children:[n.jsx("h3",{className:"theme-name",children:I.name}),n.jsxs("div",{className:"theme-rating",children:[n.jsx("div",{className:"stars",children:[...Array(5)].map((re,pe)=>n.jsx(JC,{fontSize:"inherit",className:"star filled"},pe))}),n.jsx("span",{className:"rating-text",children:"0.0"})]})]}),I.description&&n.jsx("p",{className:"theme-description",children:I.description}),n.jsxs("div",{className:"theme-meta",children:[n.jsx("span",{className:"theme-category",children:I.category||"Custom"}),n.jsx("span",{className:"theme-price",children:"Free"})]})]})]},I._id)))})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"24px",marginBottom:"16px"},children:[n.jsx("h2",{style:{margin:0,color:"black",fontSize:"28px",fontWeight:"700"},children:"Your creations"}),n.jsxs("button",{onClick:()=>window.open("/themes/builder","_blank","noopener,noreferrer"),style:{backgroundColor:"#16a34a",border:"none",color:"#ffffff",padding:"10px 20px",fontSize:"14px",fontWeight:"600",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",transition:"all 0.2s ease"},onMouseEnter:I=>{I.currentTarget.style.backgroundColor="#15803d",I.currentTarget.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.15)",I.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:I=>{I.currentTarget.style.backgroundColor="#16a34a",I.currentTarget.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)",I.currentTarget.style.transform="translateY(0)"},children:[n.jsx("span",{children:""}),n.jsx("span",{children:"Create your Own"})]})]}),C.length>0&&n.jsx(n.Fragment,{children:n.jsx("div",{style:{marginBottom:"2rem"},className:`themes-layout ${s}`,children:C.map(I=>{const V=/^[0-9a-fA-F]{24}$/.test(I._id),re=g.some(pe=>{const ge=pe.isCustomTheme||pe._id?.startsWith("custom-"),Ce=ge&&pe.customThemeId?pe.customThemeId:null;return ge&&Ce===I._id});return n.jsxs("div",{className:"theme-card",style:{position:"relative"},children:[V&&n.jsxs("div",{className:"theme-card-menu",children:[n.jsx("button",{className:"theme-card-menu-button",onClick:pe=>{pe.stopPropagation(),X(D===I._id?null:I._id)},"aria-label":"Theme options",children:n.jsx(zI,{fontSize:"small"})}),D===I._id&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"theme-card-menu-overlay",onClick:()=>X(null)}),n.jsx("div",{className:"theme-card-menu-dropdown",children:n.jsxs("button",{className:"theme-card-menu-item",onClick:pe=>{pe.stopPropagation(),Q({isOpen:!0,themeId:I._id,themeName:I.name}),X(null)},children:[n.jsx(d3,{fontSize:"small",style:{marginRight:"8px"}}),"Update Thumbnail"]})})]})]}),n.jsxs("div",{className:"theme-thumbnail",children:[(()=>{const pe=Z[I._id],ge=I.thumbnailUrl,Ce=pe||(ge?`${ge}${ge.includes("?")?"&":"?"}v=${Date.now()}`:null);return Ce?n.jsx("img",{src:Ce,alt:I.name||"",className:"theme-image",onLoad:()=>{},onError:he=>{he.currentTarget.style.display="none";const ie=he.currentTarget.nextElementSibling;ie&&(ie.style.display="flex")}},`${I._id}-${pe?"preview":"server"}`):null})(),n.jsx("div",{className:"theme-image-placeholder",style:{display:Z[I._id]||I.thumbnailUrl?"none":"flex"},children:n.jsx("span",{children:I.name})}),V&&n.jsx("div",{className:"theme-overlay",children:n.jsxs("button",{className:"overlay-btn preview-btn",onClick:()=>Pe(I._id,I.name,!1,!0),children:[n.jsx(eS,{fontSize:"small"}),n.jsx("span",{children:"Preview"})]})})]}),n.jsxs("div",{className:"theme-info",children:[n.jsx("div",{className:"theme-header-info",children:n.jsx("h3",{className:"theme-name",children:I.name})}),n.jsxs("div",{className:"theme-actions",children:[n.jsx("button",{className:"action-btn primary",onClick:()=>{if(!V){alert("Invalid theme ID. This theme may have been created with an old format. Please delete and recreate it.");return}window.open(`/themes/builder?id=${encodeURIComponent(I._id)}`,"_blank","noopener,noreferrer")},children:"Edit"}),re?n.jsx("button",{className:"action-btn secondary",disabled:!0,style:{backgroundColor:"#16a34a",color:"#ffffff",border:"1px solid #16a34a",cursor:"not-allowed",opacity:.9},children:"Installed"}):n.jsx("button",{className:"action-btn secondary",onClick:async()=>{if(!V){alert("Invalid theme ID. Please recreate this theme.");return}if(!w){alert("Please select a store first.");return}await R(I._id,w)&&(await new Promise(ge=>setTimeout(ge,500)),await v(w),ue())},children:"Apply theme"}),n.jsxs("button",{className:"action-btn secondary",onClick:()=>ht(I._id),style:{backgroundColor:"#dc2626",color:"#ffffff",border:"1px solid #dc2626"},onMouseEnter:pe=>{pe.currentTarget.style.backgroundColor="#b91c1c",pe.currentTarget.style.borderColor="#b91c1c"},onMouseLeave:pe=>{pe.currentTarget.style.backgroundColor="#dc2626",pe.currentTarget.style.borderColor="#dc2626"},children:[n.jsx(nf,{fontSize:"small",style:{marginRight:"4px"}}),"Delete"]})]})]})]},I._id)})})}),n.jsx("h2",{style:{margin:"24px 0 16px 0",color:"black",fontSize:"28px",fontWeight:"700"},children:"All themes"}),n.jsxs("div",{className:`themes-layout ${s}`,children:[d&&n.jsx("div",{className:"no-results",children:n.jsx("div",{className:"no-results-content",children:n.jsx("h3",{children:"Loading themes..."})})}),p&&n.jsx("div",{className:"no-results",children:n.jsx("div",{className:"no-results-content",children:n.jsx("h3",{children:p})})}),J.map(I=>n.jsxs("div",{className:"theme-card",children:[n.jsxs("div",{className:"theme-thumbnail",children:[n.jsx("img",{src:I.thumbnailUrl||"",alt:I.name,className:"theme-image",onError:V=>{V.currentTarget.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="300" height="200" viewBox="0 0 300 200"><rect width="300" height="200" fill="%23f3f4f6"/><text x="150" y="100" text-anchor="middle" fill="%236b7280" font-family="Arial" font-size="14">No Preview</text></svg>'}}),n.jsxs("div",{className:"theme-overlay",children:[n.jsxs("button",{className:"overlay-btn preview-btn",onClick:()=>Pe(I._id,I.name),children:[n.jsx(eS,{fontSize:"small"}),n.jsx("span",{children:"Preview"})]}),n.jsxs("button",{className:"overlay-btn download-btn",children:[n.jsx(vge,{fontSize:"small"}),n.jsx("span",{children:"View Details"})]})]})]}),n.jsxs("div",{className:"theme-info",children:[n.jsxs("div",{className:"theme-header-info",children:[n.jsx("h3",{className:"theme-name",children:I.name}),n.jsxs("div",{className:"theme-rating",children:[n.jsx("div",{className:"stars",children:[...Array(5)].map((V,re)=>n.jsx(JC,{fontSize:"inherit",className:"star filled"},re))}),n.jsx("span",{className:"rating-text",children:Number(I.rating?.average||0).toFixed(1)})]})]}),I.description&&n.jsx("p",{className:"theme-description",children:I.description}),n.jsxs("div",{className:"theme-meta",children:[n.jsx("span",{className:"theme-category",children:I.category}),n.jsx("span",{className:"theme-price",children:"Free"})]}),n.jsxs("div",{className:"theme-actions",children:[ee(I._id)?n.jsx("button",{className:"action-btn installed",disabled:!0,children:"Installed"}):n.jsx("button",{className:"action-btn primary",onClick:()=>Se(I._id),children:"Try theme"}),n.jsx("button",{className:"action-btn secondary",onClick:()=>Pe(I._id,I.name),children:"View demo"})]})]})]},I._id))]}),J.length===0&&n.jsx("div",{className:"no-results",children:n.jsxs("div",{className:"no-results-content",children:[n.jsx("h3",{children:"No themes found"}),n.jsx("p",{children:"Try adjusting your search or filter criteria"})]})}),n.jsx(p2e,{isOpen:a.isOpen,onClose:$e,themeId:a.themeId,themeName:a.themeName,isInstalled:a.isInstalled,isCustomTheme:a.isCustomTheme}),n.jsx(h2e,{isOpen:i.isOpen,onClose:()=>l({isOpen:!1,themeId:""}),themeId:i.themeId}),se.isOpen&&n.jsx("div",{className:"thumbnail-update-modal-overlay",onClick:()=>!xe&&Q({isOpen:!1,themeId:"",themeName:""}),children:n.jsxs("div",{className:"thumbnail-update-modal",onClick:I=>I.stopPropagation(),children:[n.jsxs("div",{className:"thumbnail-update-modal-header",children:[n.jsx("h2",{children:"Update Thumbnail"}),n.jsx("button",{className:"thumbnail-update-modal-close",onClick:()=>!xe&&Q({isOpen:!1,themeId:"",themeName:""}),disabled:xe,children:""})]}),n.jsxs("div",{className:"thumbnail-update-modal-content",children:[n.jsxs("p",{children:["Select an image to update the thumbnail for ",n.jsx("strong",{children:se.themeName})]}),n.jsxs("div",{className:"thumbnail-update-modal-upload",children:[n.jsx("input",{type:"file",id:"thumbnail-upload-input",accept:"image/*",onChange:Ue,disabled:xe,style:{display:"none"}}),n.jsx("label",{htmlFor:"thumbnail-upload-input",className:`thumbnail-upload-label ${xe?"disabled":""}`,children:xe?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"thumbnail-upload-spinner"}),n.jsx("span",{children:"Uploading..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(d3,{fontSize:"large"}),n.jsx("span",{children:"Choose Image"}),n.jsx("span",{className:"thumbnail-upload-hint",children:"PNG, JPG, or GIF (max 5MB)"})]})})]})]})]})})]})},pO=48,hO=240,g2e=()=>{const s=Ri(),r=s.pathname.startsWith("/themes/code-fullscreen/"),e=s.pathname.startsWith("/themes/builder"),t=s.pathname.startsWith("/themes/basic-elementor"),a=r||e||t;return n.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100vh"},children:[!a&&n.jsx(zU,{}),n.jsxs("div",{style:{display:"flex",flexGrow:1,overflow:"hidden",position:"relative"},children:[!a&&n.jsx(_U,{}),n.jsx("main",{style:{flexGrow:1,padding:a?0:"24px",overflow:"auto",marginTop:a?0:`${pO}px`,marginLeft:a?0:`${hO}px`,width:a?"100%":`calc(100% - ${hO}px)`,height:a?"100vh":`calc(100vh - ${pO}px)`,backgroundColor:a?"transparent":"#fff",color:"#000",transition:"margin-left 0.3s ease"},children:n.jsxs(d8,{children:[n.jsx(Qt,{path:"/",element:n.jsx(NU,{})}),n.jsx(Qt,{path:"/orders",element:n.jsx(wae,{})}),n.jsx(Qt,{path:"/orders/create",element:n.jsx(ene,{})}),n.jsx(Qt,{path:"/orders/abandoned-carts",element:n.jsx(TNe,{})}),n.jsx(Qt,{path:"/orders/abandoned-carts/customer/:customerId",element:n.jsx(RNe,{})}),n.jsx(Qt,{path:"/orders/:id",element:n.jsx(pae,{})}),n.jsx(Qt,{path:"/products",element:n.jsx(poe,{})}),n.jsx(Qt,{path:"/products/:id",element:n.jsx(Jae,{})}),n.jsx(Qt,{path:"/products/:id/variants/:variantId",element:n.jsx(soe,{})}),n.jsx(Qt,{path:"/products/new",element:n.jsx(lae,{})}),n.jsx(Qt,{path:"/products/inventory",element:n.jsx(ioe,{})}),n.jsx(Qt,{path:"/products/purchase-orders",element:n.jsx(Doe,{})}),n.jsx(Qt,{path:"/products/purchase-orders/:id",element:n.jsx(moe,{})}),n.jsx(Qt,{path:"/products/purchase-orders/:id/receive",element:n.jsx(Aoe,{})}),n.jsx(Qt,{path:"/products/purchase-orders/new",element:n.jsx(Poe,{})}),n.jsx(Qt,{path:"/products/collections",element:n.jsx(Lae,{})}),n.jsx(Qt,{path:"/products/collections/:id",element:n.jsx(Iae,{})}),n.jsx(Qt,{path:"/products/collections/new",element:n.jsx(Cae,{})}),n.jsx(Qt,{path:"/products/gift-cards",element:n.jsx(ise,{})}),n.jsx(Qt,{path:"/products/gift-cards/new",element:n.jsx(Nse,{})}),n.jsx(Qt,{path:"/products/gift-cards/:giftCardId",element:n.jsx(sse,{})}),n.jsx(Qt,{path:"/products/transfers",element:n.jsx(Bme,{})}),n.jsx(Qt,{path:"/products/transfers/:id",element:n.jsx(Dme,{})}),n.jsx(Qt,{path:"/products/transfers/new",element:n.jsx(uae,{})}),n.jsx(Qt,{path:"/products/transfers/:id/shipment/new",element:n.jsx(Ome,{})}),n.jsx(Qt,{path:"/products/transfers/:id/shipment/:shipmentId/receive",element:n.jsx(Ame,{})}),n.jsx(Qt,{path:"/customers",element:n.jsx(Ene,{})}),n.jsx(Qt,{path:"/customers/segments",element:n.jsx(Mne,{})}),n.jsx(Qt,{path:"/customers/segments/:id",element:n.jsx(_ne,{})}),n.jsx(Qt,{path:"/customers/new",element:n.jsx(Sse,{})}),n.jsx(Qt,{path:"/customers/:id",element:n.jsx(vne,{})}),n.jsx(Qt,{path:"/marketing",element:n.jsx(xse,{})}),n.jsx(Qt,{path:"/marketing/campaigns",element:n.jsx(pse,{})}),n.jsx(Qt,{path:"/marketing/attribution",element:n.jsx(lse,{})}),n.jsx(Qt,{path:"/marketing/automations",element:n.jsx(dse,{})}),n.jsx(Qt,{path:"/marketing/automations/templates",element:n.jsx(Ewe,{})}),n.jsx(Qt,{path:"/marketing/automations/new",element:n.jsx(kwe,{})}),n.jsx(Qt,{path:"/marketing/automations/create",element:n.jsx(Swe,{})}),n.jsx(Qt,{path:"/marketing/automations/:id",element:n.jsx(Nwe,{})}),n.jsx(Qt,{path:"/discounts",element:n.jsx(Vne,{})}),n.jsx(Qt,{path:"/discounts/select-discount-to-create",element:n.jsx(oNe,{})}),n.jsx(Qt,{path:"/discounts/:id",element:n.jsx(rge,{})}),n.jsx(Qt,{path:"/discounts/pyxgety/:id",element:n.jsx(Zme,{})}),n.jsx(Qt,{path:"/discounts/amount-off-order/:id",element:n.jsx(Wme,{})}),n.jsx(Qt,{path:"/discounts/free-shipping/:id",element:n.jsx(uge,{})}),n.jsx(Qt,{path:"/discounts/new/amount-off-products",element:n.jsx(Gme,{})}),n.jsx(Qt,{path:"/discounts/new/buy-x-get-y",element:n.jsx(Xme,{})}),n.jsx(Qt,{path:"/discounts/new/amount-off-order",element:n.jsx(qme,{})}),n.jsx(Qt,{path:"/discounts/new/free-shipping",element:n.jsx(fge,{})}),n.jsx(Qt,{path:"/content",element:n.jsx(Wre,{})}),n.jsx(Qt,{path:"/content/blog-posts",element:n.jsx(WSe,{})}),n.jsx(Qt,{path:"/content/blog-posts/new",element:n.jsx(HSe,{})}),n.jsx(Qt,{path:"/content/files",element:n.jsx(qSe,{})}),n.jsx(Qt,{path:"/content/menus",element:n.jsx(GSe,{})}),n.jsx(Qt,{path:"/content/metaobjects",element:n.jsx(KSe,{})}),n.jsx(Qt,{path:"/online-store",element:n.jsx(tNe,{})}),n.jsx(Qt,{path:"/online-store/preference",element:n.jsx(rNe,{})}),n.jsx(Qt,{path:"/markets",element:n.jsx(SNe,{})}),n.jsx(Qt,{path:"/markets/new",element:n.jsx(xNe,{})}),n.jsx(Qt,{path:"/markets/catalogs",element:n.jsx(gNe,{})}),n.jsx(Qt,{path:"/markets/catalogs/new",element:n.jsx(uNe,{})}),n.jsx(Qt,{path:"/markets/catalogs/:id",element:n.jsx(lNe,{})}),n.jsx(Qt,{path:"/markets/:id",element:n.jsx(iNe,{})}),n.jsx(Qt,{path:"/analytics",element:n.jsx(Fre,{})}),n.jsx(Qt,{path:"/tag-management",element:n.jsx(Rme,{})}),n.jsx(Qt,{path:"/tag-management/customer-tags",element:n.jsx(tSe,{})}),n.jsx(Qt,{path:"/tag-management/product-tags",element:n.jsx(aSe,{})}),n.jsx(Qt,{path:"/tag-management/product-types",element:n.jsx(cSe,{})}),n.jsx(Qt,{path:"/tag-management/transfer-tags",element:n.jsx(ySe,{})}),n.jsx(Qt,{path:"/tag-management/purchase-order-tags",element:n.jsx(pSe,{})}),n.jsx(Qt,{path:"/vendors",element:n.jsx(Vme,{})}),n.jsxs(Qt,{path:"/settings",element:n.jsx(hCe,{}),children:[n.jsx(Qt,{index:!0,element:n.jsx(aCe,{})}),n.jsx(Qt,{path:"general",element:n.jsx(qje,{})}),n.jsx(Qt,{path:"general/metafields",element:n.jsx(UCe,{})}),n.jsx(Qt,{path:"general/activity",element:n.jsx(qCe,{})}),n.jsx(Qt,{path:"general/branding",element:n.jsx(ije,{})}),n.jsx(Qt,{path:"plan",element:n.jsx(H1e,{})}),n.jsx(Qt,{path:"plan/subscriptions",element:n.jsx(G1e,{})}),n.jsx(Qt,{path:"subscribe/select-plan",element:n.jsx(z1e,{})}),n.jsx(Qt,{path:"billing",element:n.jsx(qwe,{})}),n.jsx(Qt,{path:"billing/charges",element:n.jsx(Rwe,{})}),n.jsx(Qt,{path:"billing/upcoming",element:n.jsx(Zwe,{})}),n.jsx(Qt,{path:"billing/profile",element:n.jsx(Uwe,{})}),n.jsx(Qt,{path:"users",element:n.jsx(ZCe,{})}),n.jsx(Qt,{path:"users/roles",element:n.jsx(sCe,{})}),n.jsx(Qt,{path:"users/roles/:roleId",element:n.jsx(nCe,{})}),n.jsx(Qt,{path:"users/roles/new",element:n.jsx(T1e,{})}),n.jsx(Qt,{path:"users/security",element:n.jsx(XCe,{})}),n.jsx(Qt,{path:"payments",element:n.jsx(F1e,{})}),n.jsx(Qt,{path:"checkout",element:n.jsx(uje,{})}),n.jsx(Qt,{path:"customer-accounts",element:n.jsx(wje,{})}),n.jsx(Qt,{path:"customer-accounts/authentication",element:n.jsx(mje,{})}),n.jsx(Qt,{path:"customer-accounts/authentication/google",element:n.jsx(yje,{})}),n.jsx(Qt,{path:"customer-accounts/authentication/facebook",element:n.jsx(gje,{})}),n.jsx(Qt,{path:"shipping-and-delivery",element:n.jsx($Ce,{})}),n.jsx(Qt,{path:"shipping-and-delivery/local_deliveries/:localDeliveryId",element:n.jsx(u1e,{})}),n.jsx(Qt,{path:"shipping-and-delivery/local_deliveries/:localDeliveryId/locations/:locationId",element:n.jsx(f1e,{})}),n.jsx(Qt,{path:"shipping-and-delivery/profiles/create",element:n.jsx(XNe,{})}),n.jsx(Qt,{path:"shipping-and-delivery/profiles/:profileId",element:n.jsx(QNe,{})}),n.jsx(Qt,{path:"taxes-and-duties",element:n.jsx(YCe,{})}),n.jsx(Qt,{path:"taxes-and-duties/:countryId",element:n.jsx(l1e,{})}),n.jsx(Qt,{path:"locations",element:n.jsx(w1e,{})}),n.jsx(Qt,{path:"locations/new",element:n.jsx(E1e,{})}),n.jsx(Qt,{path:"locations/:locationId",element:n.jsx(p1e,{})}),n.jsx(Qt,{path:"markets",element:n.jsx(ZSe,{})}),n.jsx(Qt,{path:"apps-and-sales-channels",element:n.jsx(GD,{title:"Apps and Sales Channels"})}),n.jsx(Qt,{path:"domains",element:n.jsx(_je,{})}),n.jsx(Qt,{path:"customer-events",element:n.jsx(ZNe,{})}),n.jsx(Qt,{path:"customer-events/:pixelId",element:n.jsx($Ne,{})}),n.jsx(Qt,{path:"notifications",element:n.jsx(L1e,{})}),n.jsx(Qt,{path:"notifications/:categoryId/:categorySlug",element:n.jsx(Sje,{})}),n.jsx(Qt,{path:"notifications/:categoryId/:categorySlug/:optionId",element:n.jsx(O1e,{})}),n.jsx(Qt,{path:"notifications/:categoryId/:categorySlug/:optionId/edit",element:n.jsx(Eje,{})}),n.jsx(Qt,{path:"notifications/webhooks",element:n.jsx(JNe,{})}),n.jsx(Qt,{path:"metafields-and-metaobjects",element:n.jsx(XSe,{})}),n.jsx(Qt,{path:"languages",element:n.jsx(YSe,{})}),n.jsx(Qt,{path:"customer-privacy",element:n.jsx(Nje,{})}),n.jsx(Qt,{path:"customer-privacy/dns",element:n.jsx(kje,{})}),n.jsx(Qt,{path:"policies",element:n.jsx(rCe,{})}),n.jsx(Qt,{path:"policies/manage-return-rules",element:n.jsx(S1e,{})}),n.jsx(Qt,{path:"policies/manage-return-rules/new",element:n.jsx(pje,{})})]}),n.jsx(Qt,{path:"/orders/drafts",element:n.jsx(DNe,{})}),n.jsx(Qt,{path:"/themes/all-themes",element:n.jsx(m2e,{})}),n.jsx(Qt,{path:"/themes/builder",element:n.jsx(vte,{})}),n.jsx(Qt,{path:"/themes/basic-elementor",element:n.jsx(mte,{})}),n.jsx(Qt,{path:"/themes/edit/:themeId",element:n.jsx(VT,{})}),n.jsx(Qt,{path:"/themes/layout/:themeId",element:n.jsx(VT,{})}),n.jsx(Qt,{path:"/themes/code/:themeId",element:n.jsx(V6,{})}),n.jsx(Qt,{path:"/themes/code-fullscreen/:themeId",element:n.jsx(Tre,{})})]})})]})]})},y2e=()=>n.jsx(lU,{children:n.jsx(ESe,{children:n.jsx(EU,{children:n.jsx(Ore,{children:n.jsx(DU,{children:n.jsx(OU,{children:n.jsx(rne,{children:n.jsx(cU,{children:n.jsx(USe,{children:n.jsx(VU,{children:n.jsx(BU,{children:n.jsx(jae,{children:n.jsx(TU,{children:n.jsx(MU,{children:n.jsx(AU,{children:n.jsx(Az,{children:n.jsx(iae,{children:n.jsx(Qae,{children:n.jsx(Aae,{children:n.jsx(LU,{children:n.jsx(nse,{children:n.jsx(tse,{children:n.jsx(cae,{children:n.jsx(FCe,{children:n.jsx(c1e,{children:n.jsx(ooe,{children:n.jsx(FU,{children:n.jsx(dae,{children:n.jsx(Pme,{children:n.jsx(Eme,{children:n.jsx(Ooe,{children:n.jsx(Ire,{children:n.jsx(hoe,{children:n.jsx(kne,{children:n.jsx(Sne,{children:n.jsx($ne,{children:n.jsx(zne,{children:n.jsx(Une,{children:n.jsx(dU,{children:n.jsx(xSe,{children:n.jsx(Hje,{children:n.jsx(aje,{children:n.jsx(Uje,{children:n.jsx(hje,{children:n.jsx(fje,{children:n.jsx(j1e,{children:n.jsx(Vje,{children:n.jsx(R1e,{children:n.jsx(Q1e,{children:n.jsx(eCe,{children:n.jsx(K1e,{children:n.jsx(Z1e,{children:n.jsx(NSe,{children:n.jsx(kSe,{children:n.jsx(CSe,{children:n.jsx(wSe,{children:n.jsx(ASe,{children:n.jsx(OSe,{children:n.jsx(dje,{children:n.jsx(Gje,{children:n.jsx(zSe,{children:n.jsx(FSe,{children:n.jsx(pge,{children:n.jsx(mge,{children:n.jsx(cse,{children:n.jsx(MSe,{children:n.jsx(bSe,{children:n.jsx(Cje,{children:n.jsx(jje,{children:n.jsx(Pre,{children:n.jsx(Mre,{children:n.jsx(Rre,{children:n.jsx(Dre,{children:n.jsx(lje,{children:n.jsx(zCe,{children:n.jsx(ISe,{children:n.jsx(DSe,{children:n.jsx(Kje,{children:n.jsx(s1e,{children:n.jsx(Zje,{children:n.jsx(Qje,{children:n.jsx(e1e,{children:n.jsx(r1e,{children:n.jsx(o1e,{children:n.jsx(GCe,{children:n.jsxs(R8,{children:[n.jsx(d7,{position:"top-center",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"}}}),n.jsx(g2e,{})]})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})}),mO=document.getElementById("root");mO&&j9.createRoot(mO).render(n.jsx(u.StrictMode,{children:n.jsx(y2e,{})}));export{Bw as g};
