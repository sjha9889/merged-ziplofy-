import{u as oe,D as me,d as de,h as ue,B as xe,C as he,b as ge,r as l,j as e,k as pe}from"./index-C7S6h9OR.js";import{G as be}from"./GridBackgroundWrapper-Du1VLjut.js";import{M as y}from"./MultiSelect-DYMnqjW0.js";import{S as ye}from"./Select-DGEw1X1o.js";import{F as je}from"./ArrowLeftIcon-C1qOxHB_.js";const Se=()=>{const o=oe(),{createDiscount:k,loading:j,error:D,clearError:f}=me(),{products:M,fetchProductsByStoreId:m,searchBasic:T,loading:L}=de(),{collections:P,fetchCollectionsByStoreId:d,searchCollections:O,loading:F}=ue(),{segments:N,fetchSegmentsByStoreId:u,searchCustomerSegments:E,loading:_}=xe(),{customers:v,fetchCustomersByStoreId:x,searchCustomers:A,loading:R}=he(),{activeStoreId:c}=ge(),[h,C]=l.useState([]),[g,w]=l.useState([]),[p,B]=l.useState([]),[b,$]=l.useState([]),[V,G]=l.useState(""),[W,z]=l.useState(""),[H,J]=l.useState(""),[K,X]=l.useState(""),[I,U]=l.useState([]),Y=l.useCallback((()=>{let s;return a=>{clearTimeout(s),s=window.setTimeout(async()=>{if(a.trim()&&c)try{await O(c,a)}catch(r){console.error("Error searching collections:",r)}else c&&await d(c)},300)}})(),[c,O,d]),Z=l.useCallback((()=>{let s;return a=>{clearTimeout(s),s=window.setTimeout(async()=>{if(a.trim()&&c)try{const n=(await T({q:a,storeId:c})).map(S=>({_id:S._id,title:S.title,price:0,description:"",imageUrl:S.imageUrl}));U(n)}catch(r){console.error("Error searching products:",r)}else c&&(await m(c),U([]))},300)}})(),[c,m,T]),ee=l.useCallback((()=>{let s;return a=>{clearTimeout(s),s=window.setTimeout(async()=>{if(a.trim()&&c)try{await E(c,a)}catch(r){console.error("Error searching customer segments:",r)}else c&&await u(c)},300)}})(),[c,E,u]),se=l.useCallback((()=>{let s;return a=>{clearTimeout(s),s=window.setTimeout(async()=>{if(a.trim()&&c)try{await A(c,a)}catch(r){console.error("Error searching customers:",r)}else c&&await x(c)},300)}})(),[c,A,x]),[t,te]=l.useState({method:"discount-code",discountCode:"",title:"",valueType:"percentage",percentage:"",fixedAmount:"",takeAmountOffEachItem:!1,appliesTo:"specific-collections",searchQuery:"",oncePerOrder:!1,eligibility:"all-customers",applyOnPOSPro:!1,eligibilitySearchQuery:"",minimumPurchase:"no-requirements",minimumAmount:"",minimumQuantity:"",productDiscounts:!1,orderDiscounts:!1,shippingDiscounts:!1,startDate:"",startTime:"",setEndDate:!1,endDate:"",endTime:"",allowDiscountOnChannels:!1,limitTotalUses:!1,totalUsesLimit:"",limitOneUsePerCustomer:!1});l.useEffect(()=>{(async()=>{if(c)try{await Promise.all([m(c),d(c),u(c),x(c)])}catch(a){console.error("Failed to fetch products, collections, segments, and customers:",a)}})()},[c,m,d,u,x]);const i=l.useCallback((s,a)=>{te(r=>({...r,[s]:a}))},[]);l.useCallback((s,a)=>{C(a?r=>[...r,s]:r=>r.filter(n=>n!==s))},[]),l.useCallback((s,a)=>{w(a?r=>[...r,s]:r=>r.filter(n=>n!==s))},[]);const Q=l.useCallback(()=>{o("/discounts?createDiscountModal=open")},[o]),ae=l.useCallback(async s=>{s.preventDefault(),f();try{const a={storeId:c,method:t.method,...t.method==="discount-code"&&{discountCode:t.discountCode},...t.method==="automatic"&&{title:t.title},allowDiscountOnChannels:t.allowDiscountOnChannels,limitTotalUses:t.limitTotalUses,totalUsesLimit:t.totalUsesLimit?Number(t.totalUsesLimit):void 0,limitOneUsePerCustomer:t.limitOneUsePerCustomer,valueType:t.valueType,...t.valueType==="percentage"&&{percentage:Number(t.percentage)},...t.valueType==="fixed-amount"&&{fixedAmount:Number(t.fixedAmount)},appliesTo:t.appliesTo,oncePerOrder:t.takeAmountOffEachItem,eligibility:t.eligibility,applyOnPOSPro:t.applyOnPOSPro,minimumPurchase:t.minimumPurchase,minimumAmount:t.minimumAmount?Number(t.minimumAmount):void 0,minimumQuantity:t.minimumQuantity?Number(t.minimumQuantity):void 0,productDiscounts:t.productDiscounts,orderDiscounts:t.orderDiscounts,shippingDiscounts:t.shippingDiscounts,startDate:t.startDate,startTime:t.startTime,setEndDate:t.setEndDate,endDate:t.endDate,endTime:t.endTime,status:"active",targetProductIds:h,targetCollectionIds:g,targetCustomerSegmentIds:p,targetCustomerIds:b};(await k(a)).success&&o("/discounts?createDiscountModal=open")}catch(a){console.error("Failed to create discount:",a)}},[t,h,g,p,b,c,k,o,f]),re=[{value:"specific-collections",label:"Specific collections"},{value:"specific-products",label:"Specific products"}],q=I.length>0?I:M,ie=q.map(s=>({value:s._id,label:s.title,secondaryText:s.price>0?`(₹${s.price})`:void 0})),ce=P.map(s=>({value:s._id,label:s.title,secondaryText:s.description})),le=N.map(s=>({value:s._id,label:s.name})),ne=v.map(s=>({value:s._id,label:`${s.firstName} ${s.lastName}`,secondaryText:s.email}));return e.jsx(be,{children:e.jsxs("div",{className:"min-h-screen",children:[e.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:Q,className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:e.jsx(je,{className:"w-4 h-4"})}),e.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Amount off products"})]})}),e.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:e.jsxs("form",{onSubmit:ae,children:[D&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-red-800",children:D}),e.jsx("button",{type:"button",onClick:f,className:"text-red-600 hover:text-red-800",children:e.jsx(pe,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[e.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Method"}),e.jsxs("fieldset",{className:"mb-3",children:[e.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Discount Method"}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"method",value:"discount-code",checked:t.method==="discount-code",onChange:s=>i("method",s.target.value),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Discount code"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"method",value:"automatic",checked:t.method==="automatic",onChange:s=>i("method",s.target.value),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Automatic discount"})]})]})]}),t.method==="discount-code"&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Discount code"}),e.jsx("input",{type:"text",value:t.discountCode,onChange:s=>i("discountCode",s.target.value),placeholder:"Enter discount code",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),e.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Customers will enter this code at checkout"})]}),t.method==="automatic"&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Title"}),e.jsx("input",{type:"text",value:t.title,onChange:s=>i("title",s.target.value),placeholder:"Enter discount title",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),e.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"This title will be shown to customers"})]})]}),e.jsx("hr",{className:"my-4 border-gray-200"}),e.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[e.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Discount value"}),e.jsxs("fieldset",{className:"mb-3",children:[e.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Value Type"}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"valueType",value:"percentage",checked:t.valueType==="percentage",onChange:s=>i("valueType",s.target.value),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Percentage"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"valueType",value:"fixed-amount",checked:t.valueType==="fixed-amount",onChange:s=>i("valueType",s.target.value),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Fixed amount"})]})]})]}),t.valueType==="percentage"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Percentage"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:t.percentage,onChange:s=>i("percentage",s.target.value),placeholder:"Enter percentage",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 pr-8 text-base"}),e.jsx("span",{className:"absolute right-3 top-2 text-gray-500 text-sm",children:"%"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the percentage discount (e.g., 10 for 10%)"})]}),t.valueType==="fixed-amount"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2 text-gray-500 text-sm",children:"₹"}),e.jsx("input",{type:"number",value:t.fixedAmount,onChange:s=>i("fixedAmount",s.target.value),placeholder:"Enter amount",className:"w-full px-3 py-1.5 pl-8 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the fixed amount in rupees"})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.takeAmountOffEachItem,onChange:s=>i("takeAmountOffEachItem",s.target.checked),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Once per order"})]}),e.jsx("p",{className:"mt-1 ml-6 text-xs text-gray-600",children:"If not selected, the amount will be taken off each eligible item in an order"})]})]})]}),e.jsx("hr",{className:"my-4 border-gray-200"}),e.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[e.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Applies to"}),e.jsx("div",{className:"mb-3",children:e.jsx(ye,{label:"Applies to",value:t.appliesTo,options:re,onChange:s=>i("appliesTo",s)})}),t.appliesTo==="specific-products"&&e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"text-xs font-medium mb-1.5 text-gray-900",children:"Select Products"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Search Products"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:W,onChange:s=>{const a=s.target.value;z(a),Z(a)},placeholder:"Type to search products...",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 pr-10 text-base"}),L&&e.jsx("div",{className:"absolute right-3 top-2",children:e.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})})]})]}),e.jsx(y,{label:"Choose Products",value:h,options:ie,onChange:C,renderValue:s=>q.filter(r=>s.includes(r._id)).map(r=>r.title).join(", ")}),e.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[h.length," product(s) selected"]})]}),t.appliesTo==="specific-collections"&&e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"text-xs font-medium mb-1.5 text-gray-900",children:"Select Collections"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Search Collections"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:V,onChange:s=>{const a=s.target.value;G(a),Y(a)},placeholder:"Type to search collections...",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 pr-10 text-base"}),F&&e.jsx("div",{className:"absolute right-3 top-2",children:e.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})})]})]}),e.jsx(y,{label:"Choose Collections",value:g,options:ce,onChange:w,renderValue:s=>P.filter(r=>s.includes(r._id)).map(r=>r.title).join(", ")}),e.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[g.length," collection(s) selected"]})]})]}),e.jsx("hr",{className:"my-4 border-gray-200"}),e.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[e.jsx("h2",{className:"text-base font-medium mb-1 text-gray-900",children:"Eligibility"}),e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Available on all sales channels"}),e.jsxs("fieldset",{className:"mb-3",children:[e.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Customer Eligibility"}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"eligibility",value:"all-customers",checked:t.eligibility==="all-customers",onChange:s=>i("eligibility",s.target.value),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"All customers"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"eligibility",value:"specific-customer-segments",checked:t.eligibility==="specific-customer-segments",onChange:s=>i("eligibility",s.target.value),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Specific customer segments"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"eligibility",value:"specific-customers",checked:t.eligibility==="specific-customers",onChange:s=>i("eligibility",s.target.value),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Specific customers"})]})]})]}),t.eligibility==="all-customers"&&t.method==="automatic"&&e.jsx("div",{className:"ml-2 mt-2",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.applyOnPOSPro,onChange:s=>i("applyOnPOSPro",s.target.checked),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Apply on POS Pro locations"})]})}),(t.eligibility==="specific-customer-segments"||t.eligibility==="specific-customers")&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:t.eligibility==="specific-customer-segments"?"Search customer segments":"Search customers"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:t.eligibility==="specific-customer-segments"?H:K,onChange:s=>{if(t.eligibility==="specific-customer-segments"){const a=s.target.value;J(a),ee(a)}else{const a=s.target.value;X(a),se(a)}},placeholder:t.eligibility==="specific-customer-segments"?"Search for customer segments...":"Search for customers...",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 pr-10 text-base"}),(t.eligibility==="specific-customer-segments"&&_||t.eligibility==="specific-customers"&&R)&&e.jsx("div",{className:"absolute right-3 top-2",children:e.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-600",children:t.eligibility==="specific-customer-segments"?"Search and select customer segments to apply the discount to":"Search and select customers to apply the discount to"}),t.eligibility==="specific-customer-segments"&&N.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx(y,{label:"Choose Customer Segments",value:p,options:le,onChange:B,renderValue:s=>N.filter(r=>s.includes(r._id)).map(r=>r.name).join(", ")}),e.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[p.length," segment(s) selected"]})]}),t.eligibility==="specific-customers"&&v.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx(y,{label:"Choose Customers",value:b,options:ne,onChange:$,renderValue:s=>v.filter(r=>s.includes(r._id)).map(r=>`${r.firstName} ${r.lastName}`).join(", ")}),e.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[b.length," customer(s) selected"]})]})]})]}),e.jsx("hr",{className:"my-4 border-gray-200"}),e.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[e.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Minimum purchase requirements"}),e.jsxs("fieldset",{className:"mb-3",children:[e.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Minimum Purchase Requirements"}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"minimumPurchase",value:"no-requirements",checked:t.minimumPurchase==="no-requirements",onChange:s=>i("minimumPurchase",s.target.value),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"No minimum requirements"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"minimumPurchase",value:"minimum-amount",checked:t.minimumPurchase==="minimum-amount",onChange:s=>i("minimumPurchase",s.target.value),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Minimum purchase amount"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"minimumPurchase",value:"minimum-quantity",checked:t.minimumPurchase==="minimum-quantity",onChange:s=>i("minimumPurchase",s.target.value),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Minimum quantity of items"})]})]})]}),t.minimumPurchase==="minimum-amount"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Minimum purchase amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2 text-gray-500 text-sm",children:"₹"}),e.jsx("input",{type:"number",value:t.minimumAmount,onChange:s=>i("minimumAmount",s.target.value),placeholder:"Enter minimum amount",className:"w-full px-3 py-1.5 pl-8 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the minimum purchase amount in rupees"}),e.jsx("p",{className:"mt-2 ml-2 text-xs text-gray-600",children:"Applies only to selected products"})]}),t.minimumPurchase==="minimum-quantity"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Minimum quantity of items"}),e.jsx("input",{type:"number",value:t.minimumQuantity,onChange:s=>i("minimumQuantity",s.target.value),placeholder:"Enter minimum quantity",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),e.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the minimum quantity of items required"}),e.jsx("p",{className:"mt-2 ml-2 text-xs text-gray-600",children:"Applies only to selected products"})]})]}),e.jsx("hr",{className:"my-8 border-gray-200"}),e.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[e.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Combinations"}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.productDiscounts,onChange:s=>i("productDiscounts",s.target.checked),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Product Discounts"})]}),t.productDiscounts&&e.jsx("p",{className:"mt-1 ml-6 text-xs text-gray-600",children:"Each eligible item in the cart may receive up to one product discount."})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.orderDiscounts,onChange:s=>i("orderDiscounts",s.target.checked),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Order Discounts"})]}),t.orderDiscounts&&e.jsx("p",{className:"mt-1 ml-6 text-xs text-gray-600",children:"All eligible order discounts will apply in addition to eligible product discounts."})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.shippingDiscounts,onChange:s=>i("shippingDiscounts",s.target.checked),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Shipping Discounts"})]}),t.shippingDiscounts&&e.jsx("p",{className:"mt-1 ml-6 text-xs text-gray-600",children:"The largest eligible shipping discount will apply in addition to eligible product discounts."})]}),(t.productDiscounts||t.orderDiscounts||t.shippingDiscounts)&&e.jsx("div",{className:"mt-3 p-3 bg-white/95 border border-gray-200",children:e.jsx("p",{className:"text-xs text-gray-600",children:"This discount won't combine with any other discount at checkout."})})]}),e.jsx("hr",{className:"my-4 border-gray-200"}),e.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[e.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Active dates"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Start date"}),e.jsx("input",{type:"date",value:t.startDate,onChange:s=>i("startDate",s.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),e.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Select the start date for the discount"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Start time (IST)"}),e.jsx("input",{type:"time",value:t.startTime,onChange:s=>i("startTime",s.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),e.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Select the start time in Indian Standard Time"})]}),e.jsx("div",{className:"col-span-full",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.setEndDate,onChange:s=>i("setEndDate",s.target.checked),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Set end date"})]})}),t.setEndDate&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"End date"}),e.jsx("input",{type:"date",value:t.endDate,onChange:s=>i("endDate",s.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),e.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Select the end date for the discount"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"End time (IST)"}),e.jsx("input",{type:"time",value:t.endTime,onChange:s=>i("endTime",s.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),e.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Select the end time in Indian Standard Time"})]})]})]})]}),t.method==="discount-code"&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"my-4 border-gray-200"}),e.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[e.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Sales channel access"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.allowDiscountOnChannels,onChange:s=>i("allowDiscountOnChannels",s.target.checked),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Allow discount to be featured on selected channels"})]})]})]}),t.method==="discount-code"&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"my-4 border-gray-200"}),e.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[e.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Maximum discount uses"}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.limitTotalUses,onChange:s=>i("limitTotalUses",s.target.checked),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Limit number of times this discount can be used in total"})]}),t.limitTotalUses&&e.jsxs("div",{className:"ml-6 mt-2 max-w-xs",children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Total uses limit"}),e.jsx("input",{type:"number",value:t.totalUsesLimit,onChange:s=>i("totalUsesLimit",s.target.value),placeholder:"Enter maximum number of uses",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),e.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the maximum number of times this discount can be used"})]})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.limitOneUsePerCustomer,onChange:s=>i("limitOneUsePerCustomer",s.target.checked),className:"w-4 h-4 text-gray-900"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Limit to one use per customer"})]})})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end mt-4",children:[e.jsx("button",{type:"button",onClick:Q,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:j,className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:[j&&e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),j?"Creating...":"Create Discount"]})]})]})})]})})};export{Se as default};
