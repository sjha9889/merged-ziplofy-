import{j as e,p as k,u as I,E as P,r as N}from"./index-C7S6h9OR.js";import{C as d,D as w,a as A}from"./ChipList-Bp0Q8baA.js";import{G as p}from"./GridBackgroundWrapper-Du1VLjut.js";import"./ArrowLeftIcon-C1qOxHB_.js";const T=({customerBuys:i,quantity:r,amount:l,anyItemsFrom:s,customerGetsQuantity:n,customerGetsAnyItemsFrom:m,value:a,eligibility:c,allowDiscountOnChannels:o,limitTotalUses:h,totalUsesLimit:u,limitOneUsePerCustomer:y,productDiscounts:t,orderDiscounts:b,shippingDiscounts:_,startDate:v,startTime:f,setEndDate:D,endDate:C,endTime:G,createdAt:g,updatedAt:j})=>{const x=B=>B?"Yes":"No";return e.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[e.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Summary"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Customer buys"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[i,i==="minimum-quantity"&&r?` (${r})`:i==="minimum-amount"&&l?` (₹${l})`:""]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Any items from"}),e.jsx("p",{className:"text-sm text-gray-900",children:s})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Customer gets quantity"}),e.jsx("p",{className:"text-sm text-gray-900",children:n})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Gets from"}),e.jsx("p",{className:"text-sm text-gray-900",children:m})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Value"}),e.jsx("p",{className:"text-sm text-gray-900",children:a})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Eligibility"}),e.jsx("p",{className:"text-sm text-gray-900",children:c})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Allow discount on channels"}),e.jsx("p",{className:"text-sm text-gray-900",children:x(o)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Limit total uses"}),e.jsx("p",{className:"text-sm text-gray-900",children:h?`Yes (${u??"-"})`:"No"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Limit one use per customer"}),e.jsx("p",{className:"text-sm text-gray-900",children:x(y)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Combinations"}),e.jsxs("p",{className:"text-sm text-gray-900",children:["Product: ",x(t)," • Order: ",x(b)," • Shipping: ",x(_)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Active dates"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[[v,f].filter(Boolean).join(" ")||"-"," → ",D?[C,G].filter(Boolean).join(" ")||"-":"No end date"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Created / Updated"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[g?new Date(g).toLocaleDateString():"-"," / ",j?new Date(j).toLocaleDateString():"-"]})]})]})]})},L=({buysProducts:i,buysCollections:r,getsProducts:l,getsCollections:s,segments:n,customers:m})=>e.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[e.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Targets"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1.5",children:"Buys - Products"}),i.length>0?e.jsx(d,{items:i.map(a=>({key:a._id,label:a.title}))}):e.jsx("p",{className:"text-xs text-gray-600",children:"None"})]}),e.jsx("hr",{className:"my-3 border-gray-200"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1.5",children:"Buys - Collections"}),r.length>0?e.jsx(d,{items:r.map(a=>({key:a._id,label:a.title}))}):e.jsx("p",{className:"text-xs text-gray-600",children:"None"})]}),e.jsx("hr",{className:"my-3 border-gray-200"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1.5",children:"Gets - Products"}),l.length>0?e.jsx(d,{items:l.map(a=>({key:a._id,label:a.title}))}):e.jsx("p",{className:"text-xs text-gray-600",children:"None"})]}),e.jsx("hr",{className:"my-3 border-gray-200"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1.5",children:"Gets - Collections"}),s.length>0?e.jsx(d,{items:s.map(a=>({key:a._id,label:a.title}))}):e.jsx("p",{className:"text-xs text-gray-600",children:"None"})]}),e.jsx("hr",{className:"my-3 border-gray-200"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1.5",children:"Customer Segments"}),n.length>0?e.jsx(d,{items:n.map(a=>({key:a._id,label:a.name}))}):e.jsx("p",{className:"text-xs text-gray-600",children:"None"})]}),e.jsx("hr",{className:"my-3 border-gray-200"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1.5",children:"Customers"}),m.length>0?e.jsx(d,{items:m.map(a=>({key:a._id,label:a.name}))}):e.jsx("p",{className:"text-xs text-gray-600",children:"None"})]})]}),F=()=>{const{id:i}=k(),r=I(),{discounts:l}=P(),s=N.useMemo(()=>l.find(t=>t._id===i),[l,i]),n=N.useCallback(()=>{r("/discounts")},[r]);if(!s)return e.jsx(p,{children:e.jsx(w,{})});const m=s.discountedValue==="percentage"?`${s.discountedPercentage??0}%`:s.discountedValue==="amount"?`₹${s.discountedAmount??0}`:"Free",a=(s.buysProductIds||[]).map(t=>typeof t=="string"?{_id:t,title:t}:{_id:t._id,title:t.title||t._id}),c=(s.buysCollectionIds||[]).map(t=>typeof t=="string"?{_id:t,title:t}:{_id:t._id,title:t.title||t._id}),o=(s.getsProductIds||[]).map(t=>typeof t=="string"?{_id:t,title:t}:{_id:t._id,title:t.title||t._id}),h=(s.getsCollectionIds||[]).map(t=>typeof t=="string"?{_id:t,title:t}:{_id:t._id,title:t.title||t._id}),u=(s.targetCustomerSegmentIds||[]).map(t=>typeof t=="string"?{_id:t,name:t}:{_id:t._id,name:t.name||t._id}),y=(s.targetCustomerIds||[]).map(t=>typeof t=="string"?{_id:t,name:t}:{_id:t._id,name:`${t.firstName||""} ${t.lastName||""}`.trim()||t.email||t._id});return e.jsx(p,{children:e.jsx("div",{className:"min-h-screen",children:e.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(A,{method:s.method,discountCode:s.discountCode,title:s.title,value:m,status:s.status,onBack:n}),e.jsx(T,{customerBuys:s.customerBuys,quantity:s.quantity,amount:s.amount,anyItemsFrom:s.anyItemsFrom,customerGetsQuantity:s.customerGetsQuantity,customerGetsAnyItemsFrom:s.customerGetsAnyItemsFrom,value:m,eligibility:s.eligibility,allowDiscountOnChannels:s.allowDiscountOnChannels,limitTotalUses:s.limitTotalUses,totalUsesLimit:s.totalUsesLimit,limitOneUsePerCustomer:s.limitOneUsePerCustomer,productDiscounts:s.productDiscounts,orderDiscounts:s.orderDiscounts,shippingDiscounts:s.shippingDiscounts,startDate:s.startDate,startTime:s.startTime,setEndDate:s.setEndDate,endDate:s.endDate,endTime:s.endTime,createdAt:s.createdAt,updatedAt:s.updatedAt}),e.jsx(L,{buysProducts:a,buysCollections:c,getsProducts:o,getsCollections:h,segments:u,customers:y})]})})})})};export{F as default};
