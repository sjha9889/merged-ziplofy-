import{u as _,b as H,I as N,r as s,j as e}from"./index-C7S6h9OR.js";import{B as d,T as i}from"./Box-Cgm3ZkZ8.js";import{S as r}from"./Stack-CYPs5YkO.js";import{I as p}from"./IconButton-BnkdM8yk.js";import{A as K}from"./ArrowBack-CB8ALDU6.js";import{P as L,S as Q}from"./Person-t-osCqUH.js";import{A as V,C as I}from"./ContentCopy-dfDJtBg6.js";import{B as X}from"./Button-CdPvNkrY.js";import{P as k}from"./Paper-DocVmpOE.js";import{T as n}from"./TextField-CwtyivJh.js";import{I as y}from"./InputAdornment-CoWoQ4-e.js";import"./DefaultPropsProvider-CZkfTDs_.js";import"./createSvgIcon-Yi9Vo0kN.js";import"./SwitchBase-CsFsELPE.js";import"./Select-Bus390RW.js";import"./index-CCB_rw4P.js";const G={p:3,borderRadius:2,border:"1px solid #e5e7eb",backgroundColor:"#fff"},ge=()=>{const E=_(),{activeStoreId:x}=H(),{settings:t,loading:D,error:A,fetchByStoreId:z,update:T}=N(),[a,m]=s.useState(!1),[u,f]=s.useState(""),[h,b]=s.useState(""),[O,R]=s.useState([]),[w,W]=s.useState([]),[M,U]=s.useState([]),[F,l]=s.useState(!1),[B,P]=s.useState(!1),J=()=>{E("/settings/customer-accounts/authentication")},j=o=>{navigator.clipboard.writeText(o)},S=s.useMemo(()=>["https://shopify.com","https://example.myshopify.com"],[]),C=s.useMemo(()=>["https://shopify.com/authentication/placeholder/social/google/callback","https://example.myshopify.com/authentication/social/google/callback"],[]),v=s.useMemo(()=>["https://shopify.com/authentication/placeholder/social/google/revoke","https://example.myshopify.com/authentication/social/google/revoke"],[]);s.useEffect(()=>{x&&z(x).catch(()=>{})},[x,z]),s.useEffect(()=>{if(!t?.googleAuth){m(!1),f(""),b(""),R(S),W(C),U(v),l(!1);return}m(!!t.googleAuth.enabled),f(t.googleAuth.clientId||""),b(t.googleAuth.clientSecret||""),R(t.googleAuth.authorizedJavaScriptOrigins?.length?t.googleAuth.authorizedJavaScriptOrigins:S.slice()),W(t.googleAuth.authorizedRedirectURIs?.length?t.googleAuth.authorizedRedirectURIs:C.slice()),U(t.googleAuth.deauthorizeCallbackURIs?.length?t.googleAuth.deauthorizeCallbackURIs:v.slice()),l(!1)},[t,S,C,v]),s.useEffect(()=>{if(!t?.googleAuth){l(!1);return}const o=a!==!!t.googleAuth.enabled||u.trim()!==(t.googleAuth.clientId||"")||h.trim()!==(t.googleAuth.clientSecret||"");l(o)},[a,u,h,t]);const q=async()=>{if(t?._id)try{P(!0),await T(t._id,{googleAuth:{enabled:a,clientId:u.trim(),clientSecret:h.trim(),authorizedJavaScriptOrigins:O,authorizedRedirectURIs:w,deauthorizeCallbackURIs:M}}),l(!1)}catch{}finally{P(!1)}},g=D||B||!t;return e.jsxs(d,{sx:{maxWidth:960,mx:"auto",py:4},children:[e.jsxs(r,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:2},children:[e.jsx(p,{onClick:J,size:"small",sx:{border:"1px solid rgba(17, 24, 39, 0.1)",backgroundColor:"#fff"},children:e.jsx(K,{fontSize:"small"})}),e.jsx(L,{sx:{color:"#374151",fontSize:20}}),e.jsx(V,{sx:{color:"#9ca3af",fontSize:16}}),e.jsx(i,{variant:"h4",sx:{fontWeight:600,color:"#111827",flexGrow:1},children:"Sign in with Google"}),t&&e.jsx(X,{variant:"contained",onClick:q,disabled:!F||g,sx:{textTransform:"none",fontWeight:600,borderRadius:1.5,minWidth:120},children:B?"Saving...":"Save"}),e.jsx(Q,{checked:a,onChange:o=>m(o.target.checked),disabled:g,sx:{ml:2,"& .MuiSwitch-switchBase.Mui-checked":{color:"#111827"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#111827"}}}),e.jsx(i,{variant:"body2",sx:{color:"#6b7280"},children:a?"On":"Off"})]}),e.jsx(i,{variant:"body1",sx:{color:"#6b7280",mb:4},children:"Enable customers to sign in using their Google account"}),A&&e.jsx(k,{elevation:0,sx:{mb:3,p:2,borderRadius:1.5,border:"1px solid #fecaca",backgroundColor:"#fef2f2",color:"#b91c1c"},children:A}),e.jsxs(r,{spacing:3,children:[e.jsxs(k,{elevation:0,sx:G,children:[e.jsx(i,{variant:"h6",sx:{fontWeight:600,color:"#111827",mb:2},children:"Setup instructions"}),e.jsx(i,{variant:"body2",sx:{color:"#4b5563",mb:3},children:"In the Google Cloud Console, create or select a project using the instructions provided in the help documentation and the following configuration."}),e.jsxs(d,{sx:{mb:3},children:[e.jsx(i,{variant:"subtitle2",sx:{fontWeight:600,color:"#111827",mb:1},children:"Application type"}),e.jsx(n,{fullWidth:!0,value:"Web application",InputProps:{readOnly:!0,sx:{borderRadius:1.5,backgroundColor:"#f9fafb","& .MuiOutlinedInput-notchedOutline":{borderColor:"#e5e7eb"}}},size:"small"})]}),e.jsxs(d,{sx:{mb:3},children:[e.jsx(i,{variant:"subtitle2",sx:{fontWeight:600,color:"#111827",mb:1},children:"Authorized JavaScript origins"}),e.jsx(r,{spacing:1.5,children:O.map((o,c)=>e.jsx(n,{fullWidth:!0,value:o,InputProps:{readOnly:!0,endAdornment:e.jsx(y,{position:"end",children:e.jsx(p,{size:"small",onClick:()=>j(o),sx:{color:"#6b7280"},children:e.jsx(I,{fontSize:"small"})})}),sx:{borderRadius:1.5,backgroundColor:"#f9fafb","& .MuiOutlinedInput-notchedOutline":{borderColor:"#e5e7eb"}}},size:"small"},c))})]}),e.jsxs(d,{sx:{mb:3},children:[e.jsx(i,{variant:"subtitle2",sx:{fontWeight:600,color:"#111827",mb:1},children:"Authorized redirect URIs"}),e.jsx(r,{spacing:1.5,children:w.map((o,c)=>e.jsx(n,{fullWidth:!0,value:o,InputProps:{readOnly:!0,endAdornment:e.jsx(y,{position:"end",children:e.jsx(p,{size:"small",onClick:()=>j(o),sx:{color:"#6b7280"},children:e.jsx(I,{fontSize:"small"})})}),sx:{borderRadius:1.5,backgroundColor:"#f9fafb","& .MuiOutlinedInput-notchedOutline":{borderColor:"#e5e7eb"}}},size:"small"},c))})]}),e.jsxs(d,{children:[e.jsx(i,{variant:"subtitle2",sx:{fontWeight:600,color:"#111827",mb:1},children:"Deauthorize callback URIs"}),e.jsx(r,{spacing:1.5,children:M.map((o,c)=>e.jsx(n,{fullWidth:!0,value:o,InputProps:{readOnly:!0,endAdornment:e.jsx(y,{position:"end",children:e.jsx(p,{size:"small",onClick:()=>j(o),sx:{color:"#6b7280"},children:e.jsx(I,{fontSize:"small"})})}),sx:{borderRadius:1.5,backgroundColor:"#f9fafb","& .MuiOutlinedInput-notchedOutline":{borderColor:"#e5e7eb"}}},size:"small"},c))})]})]}),e.jsxs(k,{elevation:0,sx:G,children:[e.jsx(i,{variant:"h6",sx:{fontWeight:600,color:"#111827",mb:2},children:"Credentials"}),e.jsx(i,{variant:"body2",sx:{color:"#4b5563",mb:3},children:"Once the project is created, copy the Client ID and Client Secret shown by Google and paste them below."}),e.jsxs(r,{spacing:2,children:[e.jsx(n,{fullWidth:!0,label:"Client ID",required:!0,placeholder:"From Google Console",value:u,onChange:o=>f(o.target.value),disabled:g,sx:{"& .MuiOutlinedInput-root":{borderRadius:1.5}}}),e.jsx(n,{fullWidth:!0,label:"Client Secret",required:!0,placeholder:"From Google Console",value:h,onChange:o=>b(o.target.value),type:"password",disabled:g,sx:{"& .MuiOutlinedInput-root":{borderRadius:1.5}}})]})]})]})]})};export{ge as default};
