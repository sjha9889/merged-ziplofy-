import{u as y,r as n,j as t,i as C,D,E as A,A as S,G as T,b as $,y as k}from"./index-C7S6h9OR.js";import{T as R}from"./Tabs-C48x5apP.js";const B=({discounts:a})=>{const i=y(),x=n.useCallback(e=>{i(`/discounts/amount-off-order/${e}`)},[i]);return a.length===0?null:t.jsx("div",{className:"bg-white rounded-xl border border-gray-200/80 shadow-sm overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-100",children:[t.jsx("thead",{className:"bg-gray-50/80",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Code / Title"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Method"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Value"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Eligibility"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Min Requirement"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Combinations"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Status"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Created"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:a.map(e=>{const s=e.method==="discount-code"?e.discountCode:e.title,l=e.valueType==="percentage"?`${e.percentage??0}%`:`₹${e.fixedAmount??0}`,o=e.minimumPurchase==="minimum-amount"?`Min Amount ₹${e.minimumAmount??0}`:e.minimumPurchase==="minimum-quantity"?`Min Qty ${e.minimumQuantity??0}`:"None",d=`P:${e.productDiscounts?"Y":"N"} / O:${e.orderDiscounts?"Y":"N"} / S:${e.shippingDiscounts?"Y":"N"}`;return t.jsxs("tr",{className:"hover:bg-blue-50/50 cursor-pointer transition-colors",onClick:()=>x(e._id),children:[t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:s||"-"}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.method}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:l}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.eligibility}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:o}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:d}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.status||"active"}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.createdAt?new Date(e.createdAt).toLocaleDateString():"-"})]},e._id)})})]})})})},P=({discounts:a})=>{const i=y(),x=n.useCallback(s=>{i(`/discounts/${s}`)},[i]),e=n.useCallback(s=>s?"Yes":"No",[]);return a.length===0?null:t.jsx("div",{className:"bg-white rounded-xl border border-gray-200/80 shadow-sm overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-100",children:[t.jsx("thead",{className:"bg-gray-50/80",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Code / Title"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Method"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Value"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Applies to"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Eligibility"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Min Purchase"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Min Qty"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Product Disc."}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Order Disc."}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Shipping Disc."}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Total Uses Limit"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Limit Total Uses"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Status"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Created"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:a.map(s=>{const l=s.valueType==="percentage"?`${s.percentage??0}%`:`₹${s.fixedAmount??0}`,o=s.method==="discount-code"?s.discountCode:s.title;return t.jsxs("tr",{className:"hover:bg-blue-50/50 cursor-pointer transition-colors",onClick:()=>x(s._id),children:[t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:o||"-"}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:s.method}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:l}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:s.appliesTo}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:s.eligibility}),t.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900",children:[s.minimumPurchase||"-",s.minimumPurchase==="minimum-amount"&&s.minimumAmount!==void 0?` (₹${s.minimumAmount})`:""]}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:s.minimumQuantity??"-"}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e(s.productDiscounts)}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e(s.orderDiscounts)}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e(s.shippingDiscounts)}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:s.totalUsesLimit??"-"}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e(s.limitTotalUses)}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:s.status||"active"}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:new Date(s.createdAt).toLocaleDateString()})]},s._id)})})]})})})},E=({discounts:a})=>{const i=y(),x=n.useCallback(e=>{i(`/discounts/pyxgety/${e}`)},[i]);return a.length===0?null:t.jsx("div",{className:"bg-white rounded-xl border border-gray-200/80 shadow-sm overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-100",children:[t.jsx("thead",{className:"bg-gray-50/80",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Code / Title"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Method"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Customer Buys"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Any Items From"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Gets Qty"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Gets From"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Value"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Eligibility"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Status"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Created"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:a.map(e=>{const s=e.method==="discount-code"?e.discountCode:e.title,l=e.discountedValue==="percentage"?`${e.discountedPercentage??0}%`:e.discountedValue==="amount"?`₹${e.discountedAmount??0}`:"Free";return t.jsxs("tr",{className:"hover:bg-blue-50/50 cursor-pointer transition-colors",onClick:()=>x(e._id),children:[t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:s||"-"}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.method}),t.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900",children:[e.customerBuys,e.customerBuys==="minimum-quantity"&&e.quantity?` (${e.quantity})`:e.customerBuys==="minimum-amount"&&e.amount?` (₹${e.amount})`:""]}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.anyItemsFrom}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.customerGetsQuantity}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.customerGetsAnyItemsFrom}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:l}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.eligibility}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.status||"active"}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.createdAt?new Date(e.createdAt).toLocaleDateString():"-"})]},e._id)})})]})})})},O=({onExport:a,onCreateDiscount:i})=>t.jsxs("div",{className:"flex justify-between items-center mb-6 flex-wrap gap-4",children:[t.jsxs("div",{className:"pl-3 border-l-4 border-blue-500/60",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:"Discounts"}),t.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:"Create and manage discounts for your store"})]}),t.jsxs("div",{className:"flex gap-2",children:[a&&t.jsx("button",{onClick:a,className:"px-3 py-2 rounded-lg border border-gray-200/80 text-gray-700 hover:bg-blue-50 hover:border-blue-200 hover:text-blue-700 transition-colors text-sm font-medium",children:"Export"}),t.jsxs("button",{onClick:i,className:"inline-flex items-center gap-1.5 px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 text-sm font-semibold transition-colors shadow-sm",children:[t.jsx(C,{className:"w-4 h-4"}),"Create discount"]})]})]}),M=({discounts:a})=>{const i=y(),x=n.useCallback(e=>{i(`/discounts/free-shipping/${e}`)},[i]);return a.length===0?null:t.jsx("div",{className:"bg-white rounded-xl border border-gray-200/80 shadow-sm overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-100",children:[t.jsx("thead",{className:"bg-gray-50/80",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Code / Title"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Method"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Country Selection"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Exclude Rates"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Rate Limit"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Eligibility"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Min Requirement"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Combinations"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Status"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600",children:"Created"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:a.map(e=>{const s=e.method==="discount-code"?e.discountCode:e.title,l=e.minimumPurchase==="minimum-amount"?`Min Amount ₹${e.minimumAmount??0}`:e.minimumPurchase==="minimum-quantity"?`Min Qty ${e.minimumQuantity??0}`:"None",o=`P:${e.productDiscounts?"Y":"N"} / O:${e.orderDiscounts?"Y":"N"}`;return t.jsxs("tr",{className:"hover:bg-blue-50/50 cursor-pointer transition-colors",onClick:()=>x(e._id),children:[t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:s||"-"}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.method}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.countrySelection}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.excludeShippingRates?"Yes":"No"}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.excludeShippingRates?e.shippingRateLimit??"-":"-"}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.eligibility}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:l}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:o}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.status||"active"}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.createdAt?new Date(e.createdAt).toLocaleDateString():"-"})]},e._id)})})]})})})},h=({message:a,onCreate:i})=>t.jsx("div",{className:"bg-white rounded-xl border border-gray-200/80 shadow-sm min-h-[320px] flex justify-center items-center p-12",children:t.jsxs("div",{className:"flex flex-col justify-center items-center text-center gap-4 max-w-md",children:[t.jsx("div",{className:"w-14 h-14 rounded-xl bg-blue-50 flex items-center justify-center",children:t.jsx(k,{className:"w-7 h-7 text-blue-600"})}),t.jsx("p",{className:"text-sm text-gray-500",children:a}),t.jsx("button",{onClick:i,className:"inline-flex items-center gap-1.5 px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 text-sm font-semibold transition-colors shadow-sm",children:"Create discount"})]})}),Y=()=>{const a=y(),{discounts:i,error:x,fetchDiscountsByStoreId:e}=D(),{discounts:s,error:l,fetchDiscountsByStoreId:o}=A(),{discounts:d,error:u,fetchDiscountsByStoreId:g}=S(),{discounts:p,error:f,fetchDiscountsByStoreId:b}=T(),{activeStoreId:c}=$(),[r,N]=n.useState("amount-off-products");n.useEffect(()=>{(async()=>{if(c)try{r==="amount-off-products"?await e(c,{page:1,limit:10}):r==="buy-x-get-y"?await o(c,{page:1,limit:10}):r==="amount-off-order"?await g(c,{page:1,limit:10}):r==="free-shipping"&&await b(c,{page:1,limit:10})}catch{}})()},[c,r,e,o,g,b]);const m=n.useCallback(()=>{a("/discounts/select-discount-to-create")},[a]),v=n.useCallback(j=>{N(j)},[]),w=[{id:"amount-off-products",label:"Amount off products"},{id:"buy-x-get-y",label:"Buy X Get Y"},{id:"amount-off-order",label:"Amount off order"},{id:"free-shipping",label:"Free shipping"}];return t.jsx("div",{className:"min-h-screen bg-page-background-color",children:t.jsxs("div",{className:"max-w-[1400px] mx-auto px-3 sm:px-4 py-4",children:[t.jsx(O,{onCreateDiscount:m}),t.jsx("div",{className:"mb-6",children:t.jsx(R,{tabs:w,activeTab:r,onTabChange:v})}),r==="amount-off-products"&&x&&t.jsx("div",{className:"mb-4 rounded-lg bg-red-50 border border-red-200 text-red-800 px-4 py-3 text-sm",children:x}),r==="buy-x-get-y"&&l&&t.jsx("div",{className:"mb-4 rounded-lg bg-red-50 border border-red-200 text-red-800 px-4 py-3 text-sm",children:l}),r==="amount-off-order"&&u&&t.jsx("div",{className:"mb-4 rounded-lg bg-red-50 border border-red-200 text-red-800 px-4 py-3 text-sm",children:u}),r==="free-shipping"&&f&&t.jsx("div",{className:"mb-4 rounded-lg bg-red-50 border border-red-200 text-red-800 px-4 py-3 text-sm",children:f}),r==="amount-off-products"&&i.length>0&&t.jsx(P,{discounts:i}),r==="buy-x-get-y"&&s.length>0&&t.jsx(E,{discounts:s}),r==="amount-off-order"&&d.length>0&&t.jsx(B,{discounts:d}),r==="free-shipping"&&p.length>0&&t.jsx(M,{discounts:p}),r==="amount-off-products"&&i.length===0&&t.jsx(h,{message:"No amount off products discount yet",onCreate:m}),r==="buy-x-get-y"&&s.length===0&&t.jsx(h,{message:"No buy x get y discounts yet",onCreate:m}),r==="amount-off-order"&&d.length===0&&t.jsx(h,{message:"No amount off order discounts yet",onCreate:m}),r==="free-shipping"&&p.length===0&&t.jsx(h,{message:"No free shipping discounts yet",onCreate:m})]})})};export{Y as default};
