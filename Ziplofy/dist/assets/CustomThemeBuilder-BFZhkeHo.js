const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-C7S6h9OR.js","assets/index-o00KrvYk.css","assets/grapes-CmaZ8ygx.css","assets/index-BhhnlxNf.js"])))=>i.map(i=>d[i]);
import{r as C,j as c,a8 as Mr,u as Br,b as Nr,a9 as $r,ah as sr,ai as zt}from"./index-C7S6h9OR.js";const wt=[{id:"getting-started",title:"Getting Started",icon:"üöÄ",description:"Welcome to the Elementor Builder! Start building your theme by dragging elements from the left panel.",steps:["Browse elements in the left panel","Drag and drop elements onto the canvas","Click on elements to select and edit them","Use the right panel to style your elements"],arrowTarget:"#blocks-panel",cardPosition:"right",arrowPosition:"left"},{id:"elements-panel",title:"Elements Panel",icon:"üì¶",description:"The left panel contains all available elements you can add to your page.",steps:["Search for elements using the search bar","Elements are organized by categories (Layout, Basic, Media, etc.)","Drag any element onto the canvas to add it","Double-click text elements to edit them directly"],arrowPosition:"left",arrowTarget:"#blocks-panel",cardPosition:"right"},{id:"style-panel",title:"Style Panel",icon:"üé®",description:"Customize the appearance of your selected elements using the Style panel on the right.",steps:["Select any element on the canvas","The Style panel will show all available styling options","Adjust colors, spacing, typography, and more","Changes are applied instantly to your element"],arrowPosition:"right",arrowTarget:"#style-panel",cardPosition:"left"},{id:"structure-panel",title:"Structure Panel",icon:"üèóÔ∏è",description:"View and manage the structure of your page elements in the Structure panel.",steps:["See all elements in a hierarchical view","Click on elements in the structure to select them","Navigate complex layouts easily","Understand parent-child relationships"],arrowPosition:"right",arrowTarget:"#layers-panel",cardPosition:"left"},{id:"responsive-design",title:"Responsive Design",icon:"üì±",description:"Preview and customize your design for different screen sizes.",steps:["Use the device icons in the top bar (Desktop, Tablet, Mobile)","Switch between devices to see how your design looks","Adjust styles for each device size","Ensure your theme looks great on all devices"],arrowPosition:"top",arrowTarget:".panel__devices",cardPosition:"bottom"},{id:"save-preview",title:"Save & Preview",icon:"üíæ",description:"Save your work and preview how it will look to your users.",steps:['Click "Save" to save your current progress','Use "Preview" to see how your theme looks','Click "Apply" to make this theme active',"Your changes are saved automatically"],arrowPosition:"right",arrowTarget:".builder-top-bar button",cardPosition:"left"},{id:"tips-tricks",title:"Tips & Tricks",icon:"üí°",description:"Helpful tips to make the most of the Elementor Builder.",steps:["Use sections and containers for better layout control","Combine multiple elements for complex designs","Experiment with different style options","Save frequently to avoid losing your work"],arrowTarget:".builder-center-panel",cardPosition:"top",arrowPosition:"bottom"}],qr=({onClose:we})=>{const[Re,Ve]=C.useState(0),[Ee,fe]=C.useState(!0),[H,me]=C.useState({top:0,left:0}),[jt,Le]=C.useState({visibility:"visible",opacity:1,display:"flex"}),[Xe,ft]=C.useState(!1),[Je,mt]=C.useState(null),[ct,je]=C.useState(null),Ce=C.useRef(null),J=wt[Re],et=Re===0,kt=Re===wt.length-1;C.useEffect(()=>{if(!J.arrowTarget||!Ee)return;const Fe=()=>{let Me=null;if(J.id==="save-preview"){const Pe=document.querySelector(".builder-top-bar");if(Pe){const P=Array.from(Pe.querySelectorAll("button")).filter(K=>{const re=K.textContent?.trim()||"";return re==="Save"||re==="Preview"||re==="Apply"||re==="Saving..."});if(P.length>0){const K=P[0].getBoundingClientRect(),re=P[P.length-1].getBoundingClientRect(),tt={left:K.left,top:K.top,right:re.right,bottom:Math.max(K.bottom,re.bottom),width:re.right-K.left,height:Math.max(K.height,re.height),x:K.left,y:K.top,toJSON:()=>({})};Me=P[0],Me.__virtualRect=tt}else{const K=Pe.querySelector('div[style*="flex: 1"]')?.nextElementSibling;if(K){const re=Array.from(K.querySelectorAll("button"));re.length>0&&(Me=re[0])}}}}else Me=document.querySelector(J.arrowTarget);if(!Me||!Ce.current)return;let te=Me.getBoundingClientRect();Me.__virtualRect&&(te=Me.__virtualRect);const ae=Ce.current.getBoundingClientRect(),O=window.scrollY,Te=window.scrollX;let ce=0,Y=0;switch(J.cardPosition){case"right":if(J.id==="save-preview"){ce=te.top+O+te.height/2-ae.height/2;const We=te.right+Te+20,P=window.innerWidth+Te-ae.width-20;We>P?Y=te.left+Te-ae.width-20:Y=We}else ce=te.top+O+te.height/2-ae.height/2,Y=te.right+Te+20;break;case"left":if(J.id==="save-preview"){ce=te.top+O+te.height/2-ae.height/2;const We=te.left+Te-ae.width-20,P=Te+20;We<P?Y=te.right+Te+20:Y=We}else ce=te.top+O+te.height/2-ae.height/2,Y=te.left+Te-ae.width-20;break;case"bottom":const Pe=J.id==="save-preview"?10:20;ce=te.bottom+O+Pe,Y=te.left+Te+te.width/2-ae.width/2;break;case"top":ce=te.top+O-ae.height-20,Y=te.left+Te+te.width/2-ae.width/2;break;default:ce=window.innerHeight/2+O-ae.height/2,Y=window.innerWidth/2+Te-ae.width/2}const se=20;ce=Math.max(se,Math.min(ce,window.innerHeight+O-ae.height-se)),Y=Math.max(se,Math.min(Y,window.innerWidth+Te-ae.width-se)),me({top:ce,left:Y})},De=setTimeout(()=>{Fe();const Me=J.id==="save-preview"?100:50;setTimeout(()=>{if(Ce.current&&J.arrowTarget){let te=null,ae=null;if(J.id==="save-preview"){const O=document.querySelector(".builder-top-bar");if(O){const ce=Array.from(O.querySelectorAll("button")).filter(Y=>{const se=Y.textContent?.trim()||"";return se==="Save"||se==="Preview"||se==="Apply"||se==="Saving..."});if(ce.length>0){const Y=ce[0].getBoundingClientRect(),se=ce[ce.length-1].getBoundingClientRect();ae={left:Y.left,top:Y.top,right:se.right,bottom:Math.max(Y.bottom,se.bottom),width:se.right-Y.left,height:Math.max(Y.height,se.height),x:Y.left,y:Y.top,toJSON:()=>({})}}else{const Y=O.querySelector('div[style*="flex: 1"]')?.nextElementSibling;if(Y){const se=Array.from(Y.querySelectorAll("button"));if(se.length>0)te=se[0],ae=te.getBoundingClientRect();else return}else return}}else return}else if(te=document.querySelector(J.arrowTarget),te)ae=te.getBoundingClientRect();else return;if(ae){const O=Ce.current.getBoundingClientRect(),Te=ae.left+ae.width/2,ce=ae.top+ae.height/2;let Y="",se="",Pe="";switch(J.arrowPosition){case"left":if(J.id==="save-preview"){const We=(ce-O.top)/O.height*100;se="-22px",Y=`${Math.max(10,Math.min(90,We))}%`,Pe="translateY(-50%)"}else se="-22px",Y=`${(ce-O.top)/O.height*100}%`,Pe="translateY(-50%)";break;case"right":if(J.id==="save-preview"){const We=(ce-O.top)/O.height*100-15;se="calc(100% + 2px)",Y=`${Math.max(10,Math.min(90,We))}%`,Pe="translateY(-50%)"}else se="calc(100% + 2px)",Y=`${(ce-O.top)/O.height*100}%`,Pe="translateY(-50%)";break;case"top":Y="-22px",se=`${(Te-O.left)/O.width*100}%`,Pe="translateX(-50%)";break;case"bottom":Y="calc(100% + 2px)",se=`${(Te-O.left)/O.width*100}%`,Pe="translateX(-50%)";break}Le({top:Y||"50%",left:se||"50%",transform:Pe||"translate(-50%, -50%)",visibility:"visible",opacity:1,display:"flex"})}else{const O={visibility:"visible",opacity:1,display:"flex"};switch(J.arrowPosition){case"left":O.left="-22px",O.top="50%",O.transform="translateY(-50%)";break;case"right":O.left="calc(100% + 2px)",O.top="50%",O.transform="translateY(-50%)";break;case"top":O.top="-22px",O.left="50%",O.transform="translateX(-50%)";break;case"bottom":O.top="calc(100% + 2px)",O.left="50%",O.transform="translateX(-50%)";break}Le(O)}}},Me)},50);return window.addEventListener("resize",Fe),window.addEventListener("scroll",Fe),()=>{clearTimeout(De),window.removeEventListener("resize",Fe),window.removeEventListener("scroll",Fe)}},[Re,J.arrowTarget,J.cardPosition,J.arrowPosition,Ee]);const _t=()=>{Re<wt.length-1?(ft(!0),mt("next"),je("next"),setTimeout(()=>{Ve(Re+1),setTimeout(()=>{ft(!1),mt(null)},10)},200)):Bt()},Mt=()=>{Re>0&&(ft(!0),mt("prev"),je("prev"),setTimeout(()=>{Ve(Re-1),setTimeout(()=>{ft(!1),mt(null)},10)},200))},Bt=()=>{fe(!1),we&&we(),localStorage.setItem("ziplofy.elementorTutorialSeen","true")};if(!Ee)return null;const $e=()=>J.arrowPosition?`arrow-${J.arrowPosition}`:"";return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"elementor-tutorial-overlay",onClick:Bt}),c.jsxs("div",{ref:Ce,className:`elementor-tutorial-card contextual ${$e()} ${Xe?Je==="next"?"slide-out-left":"slide-out-right":ct==="next"?"slide-in-from-right":ct==="prev"?"slide-in-from-left":"slide-in"}`,style:{top:`${H.top}px`,left:`${H.left}px`},onClick:Fe=>Fe.stopPropagation(),children:[J.arrowPosition&&c.jsx("div",{className:`tutorial-arrow arrow-${J.arrowPosition}`,style:{...jt,visibility:"visible",opacity:1,display:"flex"},children:c.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 32 32",fill:"none",style:{display:"block"},children:[J.arrowPosition==="left"&&c.jsx("path",{d:"M28 16 L4 16 M8 8 L4 16 L8 24",stroke:"#ffffff",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),J.arrowPosition==="right"&&c.jsx("path",{d:"M4 16 L28 16 M24 8 L28 16 L24 24",stroke:"#ffffff",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),J.arrowPosition==="top"&&c.jsx("path",{d:"M16 28 L16 4 M8 12 L16 4 L24 12",stroke:"#ffffff",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),J.arrowPosition==="bottom"&&c.jsx("path",{d:"M16 4 L16 28 M8 20 L16 28 L24 20",stroke:"#ffffff",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]})}),c.jsxs("div",{className:"tutorial-header",children:[c.jsx("div",{className:"tutorial-icon",children:J.icon}),c.jsx("h2",{className:"tutorial-title",children:J.title}),c.jsx("button",{className:"tutorial-close-btn",onClick:Bt,"aria-label":"Close tutorial",children:"‚úï"})]}),c.jsxs("div",{className:"tutorial-content",children:[c.jsx("p",{className:"tutorial-description",children:J.description}),J.steps&&J.steps.length>0&&c.jsxs("div",{className:"tutorial-steps",children:[c.jsx("h3",{className:"steps-title",children:"How to use:"}),c.jsx("ul",{className:"steps-list",children:J.steps.map((Fe,De)=>c.jsxs("li",{className:"step-item",children:[c.jsx("span",{className:"step-number",children:De+1}),c.jsx("span",{className:"step-text",children:Fe})]},De))})]})]}),c.jsxs("div",{className:"tutorial-footer",children:[c.jsxs("div",{className:"tutorial-progress",children:[c.jsxs("span",{className:"progress-text",children:[Re+1," of ",wt.length]}),c.jsx("div",{className:"progress-bar",children:c.jsx("div",{className:"progress-fill",style:{width:`${(Re+1)/wt.length*100}%`}})})]}),c.jsxs("div",{className:"tutorial-navigation",children:[c.jsx("button",{className:"tutorial-nav-btn prev",onClick:Mt,disabled:et,children:"‚Üê Previous"}),c.jsx("button",{className:"tutorial-nav-btn next",onClick:_t,children:kt?"Got it!":"Next ‚Üí"})]})]}),c.jsx("div",{className:"tutorial-dots",children:wt.map((Fe,De)=>c.jsx("button",{className:`tutorial-dot ${De===Re?"active":""}`,onClick:()=>Ve(De),"aria-label":`Go to tutorial ${De+1}`},De))})]})]})},Dr=()=>{const[we]=Mr(),Re=Br(),{activeStoreId:Ve}=Nr(),Ee=C.useRef(null),fe=C.useRef(null),H=C.useRef(null),me=C.useRef(!1),[jt,Le]=C.useState(!0),[Xe,ft]=C.useState(!1),[Je,mt]=C.useState(!1),[ct,je]=C.useState(null),[Ce,J]=C.useState("My Theme"),[et,kt]=C.useState(!1),[_t,Mt]=C.useState(!1),[Bt,$e]=C.useState(!1),[Fe,De]=C.useState(!1),[Me,te]=C.useState(""),[ae,O]=C.useState("desktop"),[Te,ce]=C.useState(!1),[Y,se]=C.useState(!1),[Pe,We]=C.useState(""),[P,K]=C.useState("widgets"),[re,tt]=C.useState(!1),[Gt,hr]=C.useState(!1),[Vt,Nt]=C.useState(!1),[Jt,nr]=C.useState(""),[xr,St]=C.useState(!1),[Ct,vr]=C.useState([]),[wr,ir]=C.useState(!1),[Ue,pt]=C.useState([]),[bt,Tt]=C.useState(null),{createTheme:lr,updateTheme:dr,fetchAll:Rr}=$r();C.useEffect(()=>{try{if(typeof window>"u")return;const e=new URLSearchParams(window.location.search),o=e.get("accessToken");if(o){sr.setItem("accessToken",o),e.delete("accessToken");const a=`${window.location.pathname}${e.toString()?`?${e.toString()}`:""}`;window.history.replaceState({},"",a)}}catch(e){console.warn("Failed to persist access token from URL:",e)}},[]);const oe='<section style="padding: 60px 20px; min-height: 400px; background: #ffffff; position: relative; border: 2px dashed #d1d5db; border-radius: 4px; max-width: 1200px; margin: 60px auto;"><div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); display: flex; flex-direction: column; align-items: center; gap: 12px; color: #6b7280; font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;"><div style="display: flex; gap: 12px; align-items: center;"><span style="width: 40px; height: 40px; border-radius: 50%; background: #1e1e1e; display: inline-flex; align-items: center; justify-content: center; color: #fff; font-size: 18px;">+</span><span style="width: 40px; height: 40px; border-radius: 50%; background: #1e1e1e; display: inline-flex; align-items: center; justify-content: center; color: #fff; font-size: 18px;">üìÅ</span><span style="width: 40px; height: 40px; border-radius: 50%; background: #93003c; display: inline-flex; align-items: center; justify-content: center; color: #fff; font-size: 18px;">‚ãÆ</span></div><div style="font-size: 13px; font-weight: 500;">Drag widget here</div></div></section>',cr=e=>{if(!e)return"";const o=e.trim();if(!o)return"";const a=o.toLowerCase();return a.startsWith("http://")||a.startsWith("https://")||a.startsWith("mailto:")||a.startsWith("tel:")?o:o.startsWith("//")?`https:${o}`:o.includes("://")?o:`https://${o}`},G=C.useMemo(()=>{try{if(we&&typeof we.get=="function"){const e=we.get("id")||we.get("themeId");if(e){if(/^[0-9a-fA-F]{24}$/.test(e))return e;{console.warn("Invalid theme ID format detected:",e,"- Clearing from URL");const a=new URL(window.location.href);a.searchParams.delete("id"),a.searchParams.delete("themeId"),window.history.replaceState({},"",a.toString());try{const s=`ziplofy.builder.pages.${e}`;localStorage.removeItem(s)}catch(s){console.warn("Failed to clear localStorage for invalid ID:",s)}return null}}}}catch{}try{const e=new URLSearchParams(window.location.search),o=e.get("id")||e.get("themeId");if(o){if(/^[0-9a-fA-F]{24}$/.test(o))return o;{console.warn("Invalid theme ID format detected:",o,"- Clearing from URL");const s=new URL(window.location.href);s.searchParams.delete("id"),s.searchParams.delete("themeId"),window.history.replaceState({},"",s.toString());try{const l=`ziplofy.builder.pages.${o}`;localStorage.removeItem(l)}catch(l){console.warn("Failed to clear localStorage for invalid ID:",l)}return null}}}catch{}return null},[we]),pr=C.useMemo(()=>!!(G&&/^[0-9a-fA-F]{24}$/.test(G)),[G]);C.useEffect(()=>{try{const e=localStorage.getItem(`ziplofy-theme-notes-${G||"new"}`);if(e){const o=JSON.parse(e);Array.isArray(o)?pt(o):pt(o?[{id:Date.now().toString(),content:o,createdAt:Date.now()}]:[])}else pt([])}catch(e){console.warn("Failed to load notes:",e),pt([])}},[G]),C.useEffect(()=>{if(Ue.length>0||bt!==null){const e=setTimeout(()=>{try{localStorage.setItem(`ziplofy-theme-notes-${G||"new"}`,JSON.stringify(Ue))}catch(o){console.warn("Failed to auto-save notes:",o)}},1e3);return()=>clearTimeout(e)}},[Ue,G,bt]);const jr=()=>{const e={id:Date.now().toString(),content:"",createdAt:Date.now()};pt([...Ue,e]),Tt(e.id)},kr=(e,o)=>{pt(Ue.map(a=>a.id===e?{...a,content:o}:a))},Yt=e=>{if(confirm("Delete this note? This cannot be undone.")){pt(Ue.filter(o=>o.id!==e)),bt===e&&Tt(null);try{const o=Ue.filter(a=>a.id!==e);localStorage.setItem(`ziplofy-theme-notes-${G||"new"}`,JSON.stringify(o))}catch(o){console.warn("Failed to save after delete:",o)}}},st=C.useMemo(()=>{try{const e=we?.get?.("storeId");if(e)return console.log("üìå Found storeId in URL via searchParams:",e),e}catch(e){console.warn("Error reading storeId from searchParams:",e)}try{const e=new URLSearchParams(window.location.search).get("storeId");if(e)return console.log("üìå Found storeId in URL via window.location:",e),e}catch(e){console.warn("Error reading storeId from window.location:",e)}return console.log("‚ö†Ô∏è No storeId found in URL"),""},[we]),nt=C.useMemo(()=>{if(st)return console.log("üìå Using storeId from URL parameter:",st),st;if(Ve)return console.log("üìå Using activeStoreId from store context:",Ve),Ve;try{const e=localStorage.getItem("activeStoreId")||sessionStorage.getItem("activeStoreId")||localStorage.getItem("storeId")||sessionStorage.getItem("storeId")||"";return e?console.log("üìå Using storeId from localStorage/sessionStorage:",e):console.warn("‚ö†Ô∏è No storeId found in URL, context, or storage"),e}catch{return""}},[st,Ve]);C.useEffect(()=>{console.log("üîç Store ID resolution:",{storeIdParam:st,contextActiveStoreId:Ve,resolvedStoreId:nt,localStorageActiveStoreId:localStorage.getItem("activeStoreId"),localStorageStoreId:localStorage.getItem("storeId"),appliedCustomThemeId:localStorage.getItem("ziplofy.appliedCustomThemeId")})},[st,Ve,nt]);const it=C.useMemo(()=>{try{if(we?.get?.("type")==="installed")return!0;const o=we?.get?.("installed")||we?.get?.("source");if(o)return o.toLowerCase()==="installed"||o==="true"}catch{}try{const e=new URLSearchParams(window.location.search);if(e.get("type")==="installed")return!0;const o=e.get("installed")||e.get("source");if(o)return o.toLowerCase()==="installed"||o==="true"}catch{return!1}return!1},[we]),Ye=C.useMemo(()=>it?!0:G?!/^[0-9a-fA-F]{24}$/.test(G):!1,[it,G]),$t=()=>{try{const e=sr.getItem("accessToken")||localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken")||localStorage.getItem("token")||sessionStorage.getItem("token");if(!e)return"";const o=e.split(".");if(o.length<2)return"";const a=JSON.parse(atob(o[1].replace(/-/g,"+").replace(/_/g,"/")));return String(a.uid||a.userId||a.id||"")}catch{return""}},qt=()=>{const e={},o=sr.getItem("accessToken")||localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken")||localStorage.getItem("token")||sessionStorage.getItem("token");return o&&(e.Authorization=`Bearer ${o}`),e},Sr=async(e=!1)=>{if(console.log("üîç fetchInstalledThemeFromFiles called:",{shouldLoadInstalledTheme:Ye,force:e,id:G,isInstalledMode:it}),!Ye&&!e||!G)return console.log("‚è≠Ô∏è Skipping installed theme fetch:",{shouldLoadInstalledTheme:Ye,force:e,id:G}),null;try{if(typeof window>"u")return null;const o=$t(),a=nt||o;if(console.log("üîç Store ID resolution:",{resolvedStoreId:nt,extractedUserId:o,storeIdParam:st,finalOwnerId:a,localStorageActiveStoreId:localStorage.getItem("activeStoreId"),sessionStorageActiveStoreId:sessionStorage.getItem("activeStoreId"),localStorageStoreId:localStorage.getItem("storeId"),sessionStorageStoreId:sessionStorage.getItem("storeId")}),!a)return console.error("‚ùå No store/user identifier provided for installed theme editing",{resolvedStoreId:nt,extractedUserId:o,storeIdParam:st,localStorageActiveStoreId:localStorage.getItem("activeStoreId"),sessionStorageActiveStoreId:sessionStorage.getItem("activeStoreId"),contextActiveStoreId:Ve}),je("Unable to identify store or user. Please ensure you are logged in and have selected a store."),null;const s="https://backend.ziplofy.com/api",l=Date.now(),x=`${s}/themes/installed/${a}/${G}/unzippedTheme`,i=`${x}/index.html?v=${l}`;console.log("üîç Fetching installed theme from:",i,{ownerId:a,themeId:G,apiBase:s,isInstalledMode:it,shouldLoadInstalledTheme:Ye,fullUrl:i});const n=qt();console.log("üîê Auth headers:",{hasToken:!!n.Authorization});const t=await fetch(i,{credentials:"include",headers:n});if(console.log("üì° Theme fetch response:",{status:t.status,statusText:t.statusText,ok:t.ok,url:i}),!t.ok){const N=await t.text().catch(()=>"Unable to read error response");return console.error("‚ùå Installed theme request failed:",{status:t.status,statusText:t.statusText,url:i,ownerId:a,themeId:G,errorBody:N.substring(0,200)}),t.status===404?je(`Theme not found at ${i}. Please verify that theme ID "${G}" exists for store "${a}" and you have permission to access it.`):t.status===403?je("You do not have permission to access this theme."):je(`Failed to load theme: ${t.status} ${t.statusText}. Check console for details.`),null}const p=await t.text();if(typeof DOMParser>"u")return{html:p||oe,css:"",name:"Installed Theme"};const g=new DOMParser,m=g.parseFromString(p,"text/html"),k=N=>{if(!N)return"";const z=N.trim();if(!z)return"";if(/^(?:https?:|data:|mailto:|tel:|javascript:|\/\/)/i.test(z)||z.startsWith("#"))return z;try{const ie=x.endsWith("/")?x:`${x}/`;return z.startsWith("/")?`${ie}${z.replace(/^\/+/,"")}`:new URL(z,ie).href}catch{return z}};((N,z)=>{m.querySelectorAll(N).forEach(ie=>{const pe=ie.getAttribute(z);pe&&(/^(?:https?:|data:|mailto:|tel:|javascript:|\/\/)/i.test(pe)||pe.startsWith("#")||ie.setAttribute(z,k(pe)))})})("[src]","src"),m.querySelectorAll("img[srcset], source[srcset]").forEach(N=>{const z=N.getAttribute("srcset");if(!z)return;const ie=z.split(",").map(pe=>{const[Se,X]=pe.trim().split(/\s+/,2),be=k(Se);return X?`${be} ${X}`:be}).join(", ");N.setAttribute("srcset",ie)}),m.querySelectorAll("[style]").forEach(N=>{const z=N.getAttribute("style");if(!z)return;const ie=z.replace(/url\((['"]?)(?!https?:|data:|mailto:|tel:|javascript:|\/\/)([^'")]+)\1\)/gi,(pe,Se="",X)=>{const be=k(X);return`url(${Se}${be}${Se})`});N.setAttribute("style",ie)});const E=new Set;m.querySelectorAll("a[href]").forEach(N=>{const z=N.getAttribute("href");if(!z||/^(?:https?:|mailto:|tel:|javascript:|#|\/\/)/i.test(z))return;const ie=z.split("?")[0].split("#")[0].trim();if(!ie||ie==="index.html"||ie==="/")return;const pe=ie.replace(/^\/+/,"");pe&&!E.has(pe)&&E.add(pe)}),m.querySelectorAll("a[href]").forEach(N=>{const z=N.getAttribute("href");z&&(/^(mailto:|tel:|javascript:)/i.test(z)||z.startsWith("#")||N.setAttribute("href",k(z)))});const B=async()=>{const N=[],z=X=>{try{const be=new URL(X),he="https://backend.ziplofy.com/api",Ge=new URL(he),ut=be.hostname.includes("cdnjs.cloudflare.com")||be.hostname.includes("cdn.jsdelivr.net")||be.hostname.includes("unpkg.com")||be.hostname.includes("fonts.googleapis.com")||be.hostname.includes("fonts.gstatic.com"),Qe=be.origin!==Ge.origin&&be.origin!==window.location.origin;return ut||Qe}catch{return!1}},ie=Array.from(m.querySelectorAll('link[rel="stylesheet"]')).map(async X=>{const be=X.getAttribute("href");if(!be)return"";const he=k(be);if(z(he))return console.log(`Using @import for external CDN: ${he}`),`@import url('${he}');`;try{const Ge=await fetch(he,{credentials:"include",headers:qt()});return Ge.ok?await Ge.text()||"":(console.warn(`Failed to fetch CSS from ${he}:`,Ge.status),`@import url('${he}');`)}catch(Ge){return console.warn(`Error fetching CSS from ${he}, using @import:`,Ge),`@import url('${he}');`}}),pe=await Promise.all(ie);N.push(...pe.filter(X=>X.trim()));const Se=Array.from(m.querySelectorAll("style")).map(X=>X.textContent||"").filter(X=>X.trim());return N.push(...Se),N.join(`

`).trim()},V=[],$=[];m.head.querySelectorAll("script").forEach(N=>{const z={};N.src&&(z.src=k(N.getAttribute("src")||"")),N.textContent&&(z.content=N.textContent),N.type&&(z.type=N.type),z.async=N.async,z.defer=N.defer,(z.src||z.content)&&V.push(z)}),m.body&&m.body.querySelectorAll("script").forEach(N=>{const z={};N.src&&(z.src=k(N.getAttribute("src")||"")),N.textContent&&(z.content=N.textContent),N.type&&(z.type=N.type),z.async=N.async,z.defer=N.defer,(z.src||z.content)&&$.push(z)}),m.head.querySelectorAll("script").forEach(N=>N.remove()),m.body&&m.body.querySelectorAll("script").forEach(N=>N.remove());const ne=m.body?m.body.innerHTML:p;let y=await B();const de=[...V,...$];console.log(`üìú Extracted ${de.length} scripts from installed theme (${V.length} from head, ${$.length} from body)`);const Be=`<!-- ZIPLOFY_SCRIPTS_DATA:${JSON.stringify(de)} -->`,ht=ne+Be;y&&(y=y.replace(/url\((['"]?)(?!https?:|data:|mailto:|tel:|javascript:|\/\/)([^'")]+)\1\)/gi,(N,z="",ie)=>{const pe=k(ie);return`url(${z}${pe}${z})`}));const Ze=[];console.log(`üîç Discovered ${E.size} potential pages from hyperlinks:`,Array.from(E));const tr=async N=>{try{const z=[];N.toLowerCase().endsWith(".html")?z.push(`${x}/${N}?v=${l}`):(z.push(`${x}/${N}/index.html?v=${l}`),z.push(`${x}/${N}.html?v=${l}`));let ie=null,pe="";for(const Ae of z)try{const ge=await fetch(Ae,{credentials:"include",headers:qt()});if(ge.ok){ie=await ge.text(),pe=Ae;break}}catch(ge){console.warn(`Failed to fetch page from ${Ae}:`,ge)}if(!ie)return console.warn(`Could not fetch page: ${N}`),null;const Se=g.parseFromString(ie,"text/html");(Ae=>{Ae.querySelectorAll("img[src]").forEach(ge=>{const ve=ge.getAttribute("src");ve&&(/^(data:|https?:|\/\/)/i.test(ve)||ge.setAttribute("src",k(ve)))}),Ae.querySelectorAll('[style*="background"]').forEach(ge=>{const ve=ge.getAttribute("style");if(!ve)return;const rt=ve.replace(/url\((['"]?)(?!https?:|data:|mailto:|tel:|javascript:|\/\/)([^'")]+)\1\)/gi,(Ut,yt="",Ie)=>{const ze=k(Ie);return`url(${yt}${ze}${yt})`});ge.setAttribute("style",rt)}),Ae.querySelectorAll("a[href]").forEach(ge=>{const ve=ge.getAttribute("href");ve&&(/^(mailto:|tel:|javascript:|#)/i.test(ve)||ve.startsWith("http://")||ve.startsWith("https://")||ve.startsWith("//")||ge.setAttribute("href",k(ve)))})})(Se);let he=await(async Ae=>{const ge=[],ve=Ie=>{try{const ze=new URL(Ie),ot="https://backend.ziplofy.com/api",dt=new URL(ot),It=ze.hostname.includes("cdnjs.cloudflare.com")||ze.hostname.includes("cdn.jsdelivr.net")||ze.hostname.includes("unpkg.com")||ze.hostname.includes("fonts.googleapis.com")||ze.hostname.includes("fonts.gstatic.com"),yr=ze.origin!==dt.origin&&ze.origin!==window.location.origin;return It||yr}catch{return!1}},rt=Array.from(Ae.querySelectorAll('link[rel="stylesheet"]')).map(async Ie=>{const ze=Ie.getAttribute("href");if(!ze)return"";const ot=k(ze);if(ve(ot))return`@import url('${ot}');`;try{const dt=await fetch(ot,{credentials:"include",headers:qt()});return dt.ok?await dt.text()||"":`@import url('${ot}');`}catch{return`@import url('${ot}');`}}),Ut=await Promise.all(rt);ge.push(...Ut.filter(Ie=>Ie.trim()));const yt=Array.from(Ae.querySelectorAll("style")).map(Ie=>Ie.textContent||"").filter(Ie=>Ie.trim());return ge.push(...yt),ge.join(`

`).trim()})(Se);he&&(he=he.replace(/url\((['"]?)(?!https?:|data:|mailto:|tel:|javascript:|\/\/)([^'")]+)\1\)/gi,(Ae,ge="",ve)=>{const rt=k(ve);return`url(${ge}${rt}${ge})`}));const Ge=y?he?`${y}

/* Page-specific styles */
${he}`:y:he,ut=Se.body?Se.body.innerHTML:ie,Qe=N.replace(/\.html$/i,"").replace(/\/index$/i,"").replace(/\//g,"-").replace(/[^a-z0-9-]/gi,"-").toLowerCase()||`page-${Date.now()}`,ar=(N.replace(/\.html$/i,"").replace(/\/index$/i,"").split("/").pop()||"Page").split("-").map(Ae=>Ae.charAt(0).toUpperCase()+Ae.slice(1)).join(" ");return{id:Qe,name:ar,html:ut||oe,css:Ge||""}}catch(z){return console.error(`Error fetching page ${N}:`,z),null}},Ot=Array.from(E).map(N=>tr(N));(await Promise.all(Ot)).forEach(N=>{N&&Ze.push(N)}),console.log(`‚úÖ Successfully discovered and fetched ${Ze.length} additional pages`);const lt={html:ht||ne||oe,css:y,name:m.title||"Installed Theme",pages:Ze.length>0?Ze:void 0};return console.log("Successfully fetched installed theme:",{name:lt.name,htmlLength:lt.html.length,cssLength:lt.css?.length||0,discoveredPages:Ze.length}),lt}catch(o){return console.error("Failed to fetch installed theme files:",o),null}},[ue,He]=C.useState([{id:"page-1",name:"Home",html:oe,css:""}]),qe=C.useRef([{id:"page-1",name:"Home",html:oe,css:""}]),[Z,Ke]=C.useState("page-1"),[Pt,Rt]=C.useState(!1),_e=C.useMemo(()=>G?`ziplofy.builder.pages.${G}`:null,[G]),Kt=C.useRef(`tab-${Math.random().toString(36).slice(2)}`),Ft=C.useRef(!1),Dt=C.useRef(0),gt=C.useRef(!1),Zt=C.useRef(!1),Xt=C.useRef(!1),Cr=e=>{try{return JSON.stringify(e).replace(/</g,"\\u003c").replace(/>/g,"\\u003e").replace(/&/g,"\\u0026")}catch{return"[]"}};C.useEffect(()=>{const e=o=>{if(!Fe)return o.preventDefault(),o.returnValue="","Your theme is not yet published. Do you still want to close the tab?"};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[Fe]),C.useEffect(()=>{qe.current=ue;const e=H.current;e&&e.Components&&setTimeout(()=>{e.Components.getAll().forEach(s=>{const l=s?.get("tagName")?.toLowerCase();if(l==="button"||l==="a"){const i=(s.get("traits")||[]).find(n=>typeof n=="object"?n.name==="pageLink":!1);if(i){const n=[{id:"",value:"",name:"-- Select Page --"},...ue.map(p=>({id:p.id,value:p.id,name:p.name}))];i.options=n;const t=e.getSelected();if(t&&t===s&&e.TraitManager){const g=e.TraitManager.getTrait(s,"pageLink");g&&g.set&&g.set("options",n),setTimeout(()=>{typeof e.TraitManager.render=="function"&&e.TraitManager.render()},50)}}}})},100)},[ue]);const Wt=(e,o,a)=>{const s=(o||"Ziplofy Theme").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=Cr(e);return`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>${s}</title>
  <style>
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      line-height: 1.6;
      color: #1e1e1e;
      background: #ffffff;
    }
    * {
      box-sizing: border-box;
    }
    .ziplofy-page {
      display: none;
      width: 100%;
      min-height: 100vh;
    }
    .ziplofy-page.active {
      display: block;
    }
    /* CRITICAL: Ensure wrapper styles apply to page containers */
    .ziplofy-page > .gjs-wrapper-body,
    .ziplofy-page.gjs-wrapper-body {
      width: 100%;
      min-height: 100vh;
    }
    ${a||""}
  </style>
</head>
<body>
  <div id="ziplofy-page-container"></div>
  <script id="ziplofy-pages-data" type="application/json">${l}<\/script>
  <script>
    (function() {
      try {
        const container = document.getElementById('ziplofy-page-container');
        const dataEl = document.getElementById('ziplofy-pages-data');
        if (!container || !dataEl) return;
        const pagesText = dataEl.textContent || dataEl.innerText || '[]';
        const pages = JSON.parse(pagesText);
        const normalizeId = function(value) {
          if (value === null || value === undefined) return '';
          return String(value).replace(/^#/, '').trim();
        };
        const idsMatch = function(a, b) {
          const normalizedA = normalizeId(a);
          const normalizedB = normalizeId(b);
          if (!normalizedA || !normalizedB) return false;
          if (normalizedA === normalizedB) return true;
          const stripA = normalizedA.replace(/^page-/, '');
          const stripB = normalizedB.replace(/^page-/, '');
          return stripA === stripB;
        };
        const normalizeExternalUrl = function(url) {
          if (!url) return '';
          const trimmed = String(url).trim();
          if (!trimmed) return '';
          const lower = trimmed.toLowerCase();
          if (lower.startsWith('http://') || lower.startsWith('https://') || lower.startsWith('mailto:') || lower.startsWith('tel:')) {
            return trimmed;
          }
          if (trimmed.startsWith('//')) {
            return 'https:' + trimmed;
          }
          if (trimmed.includes('://')) {
            return trimmed;
          }
          return 'https://' + trimmed;
        };
        const openExternal = function(url) {
          const finalUrl = normalizeExternalUrl(url);
          if (!finalUrl) return;
          window.open(finalUrl, '_blank', 'noopener,noreferrer');
        };
        const renderPages = function() {
          container.innerHTML = '';
          pages.forEach(function(page, index) {
            const wrapper = document.createElement('div');
            // CRITICAL: Add gjs-wrapper-body class so background images work
            wrapper.className = 'ziplofy-page gjs-wrapper-body' + (index === 0 ? ' active' : '');
            wrapper.setAttribute('data-page-id', page.id || ('page-' + (index + 1)));
            wrapper.style.display = index === 0 ? 'block' : 'none';
            wrapper.innerHTML = page.html || '';
            container.appendChild(wrapper);
          });
        };

        const showPage = function(pageId, updateHash) {
          const normalizedRequest = normalizeId(pageId);
          if (!normalizedRequest) return false;
          
          const wrappers = container.querySelectorAll('.ziplofy-page');
          let found = false;
          
          wrappers.forEach(function(wrapper) {
            const wrapperPageId = wrapper.getAttribute('data-page-id') || '';
            
            if (idsMatch(wrapperPageId, normalizedRequest)) {
              wrapper.classList.add('active');
              wrapper.style.display = 'block';
              found = true;
            } else {
              wrapper.classList.remove('active');
              wrapper.style.display = 'none';
            }
          });
          
          if (found && updateHash) {
            const activeWrapper = container.querySelector('.ziplofy-page.active');
            const actualPageId = activeWrapper ? (activeWrapper.getAttribute('data-page-id') || normalizedRequest) : normalizedRequest;
            window.location.hash = '#' + normalizeId(actualPageId);
          }
          
          return found;
        };

        const attachLinkHandlers = function() {
          // Remove old handlers first for links
          const oldLinks = container.querySelectorAll('a[data-page-link]');
          oldLinks.forEach(function(link) {
            const newLink = link.cloneNode(true);
            if (link.parentNode) {
              link.parentNode.replaceChild(newLink, link);
            }
          });
          
          // Remove old handlers for buttons
          const oldButtons = container.querySelectorAll('button[data-page-link]');
          oldButtons.forEach(function(button) {
            const newButton = button.cloneNode(true);
            if (button.parentNode) {
              button.parentNode.replaceChild(newButton, button);
            }
          });
          
          // Attach handlers to links
          const links = container.querySelectorAll('a[data-page-link]');
          links.forEach(function(link) {
            link.addEventListener('click', function(evt) {
              const targetPage = this.getAttribute('data-page-link');
              if (targetPage && targetPage.trim() !== '') {
                evt.preventDefault();
                evt.stopPropagation();
                if (!showPage(targetPage, true)) {
                  console.warn('Ziplofy: target page not found for link', targetPage);
                }
                return;
              }
              
              const href = this.getAttribute('href');
              if (href && href.startsWith('#')) {
                evt.preventDefault();
                evt.stopPropagation();
                if (!showPage(href, true)) {
                  console.warn('Ziplofy: target page not found for link href', href);
                }
                return;
              }
              
              if (href && href.trim() !== '') {
                evt.preventDefault();
                evt.stopPropagation();
                openExternal(href);
              }
            });
          });
          
          // Attach handlers to buttons
          const buttons = container.querySelectorAll('button[data-page-link]');
          buttons.forEach(function(button) {
            button.addEventListener('click', function(evt) {
              evt.preventDefault();
              evt.stopPropagation();
              
              const targetPage = this.getAttribute('data-page-link');
              const href = this.getAttribute('href');
              
              if (targetPage && targetPage.trim() !== '') {
                if (!showPage(targetPage, true)) {
                  console.warn('Ziplofy: target page not found for button', targetPage, 'Available pages:', Array.from(container.querySelectorAll('.ziplofy-page')).map(function(p) { return p.getAttribute('data-page-id'); }));
                }
                return;
              }
              
              if (href && href.startsWith('#')) {
                if (!showPage(href, true)) {
                  console.warn('Ziplofy: target page not found for button href', href);
                }
                return;
              }
              
              if (href && (href.startsWith('http://') || href.startsWith('https://'))) {
                openExternal(href);
                return;
              }
              
              if (href && href.trim() !== '') {
                openExternal(href);
              }
            });
          });
          
          // Also handle buttons with href attribute for external URLs
          const buttonsWithHref = container.querySelectorAll('button[href]');
          buttonsWithHref.forEach(function(button) {
            const href = button.getAttribute('href');
            const hasPageLink = button.hasAttribute('data-page-link');
            
            // Only add handler if it doesn't already have a page link handler
            if (!hasPageLink && href && (href.startsWith('http://') || href.startsWith('https://'))) {
              button.addEventListener('click', function(evt) {
                evt.preventDefault();
                window.open(href, '_blank', 'noopener,noreferrer');
              });
            }
          });
        };

        renderPages();
        attachLinkHandlers();
        
        // Re-attach handlers after any dynamic content changes (with debounce to prevent excessive calls)
        let attachTimeout = null;
        const observer = new MutationObserver(function() {
          if (attachTimeout) {
            clearTimeout(attachTimeout);
          }
          attachTimeout = setTimeout(function() {
            attachLinkHandlers();
          }, 300); // Debounce to 300ms
        });
        observer.observe(container, { childList: true, subtree: true });

        const handleHashChange = function() {
          const hash = window.location.hash.replace(/^#/, '');
          if (!hash) return;
          const clean = hash.replace(/^page-/, '');
          showPage(clean, false);
        };

        window.addEventListener('hashchange', handleHashChange);
        handleHashChange();
      } catch (err) {
        console.error('Ziplofy multipage preview error:', err);
      }

      // Initialize Countdown Timers
      function initCountdownTimers() {
        const timers = document.querySelectorAll('.ziplofy-countdown-timer');
        timers.forEach((timer) => {
          const daysEl = timer.querySelector('.countdown-days');
          const hoursEl = timer.querySelector('.countdown-hours');
          const minutesEl = timer.querySelector('.countdown-minutes');
          const secondsEl = timer.querySelector('.countdown-seconds');
          
          if (!daysEl || !hoursEl || !minutesEl || !secondsEl) return;
          
          let days = parseInt(timer.getAttribute('data-countdown-days') || '0', 10);
          let hours = parseInt(timer.getAttribute('data-countdown-hours') || '0', 10);
          let minutes = parseInt(timer.getAttribute('data-countdown-minutes') || '0', 10);
          let seconds = parseInt(timer.getAttribute('data-countdown-seconds') || '0', 10);
          
          // Convert to total seconds
          let totalSeconds = days * 86400 + hours * 3600 + minutes * 60 + seconds;
          
          function updateTimer() {
            if (totalSeconds <= 0) {
              daysEl.textContent = '0';
              hoursEl.textContent = '0';
              minutesEl.textContent = '0';
              secondsEl.textContent = '0';
              return;
            }
            
            const d = Math.floor(totalSeconds / 86400);
            const h = Math.floor((totalSeconds % 86400) / 3600);
            const m = Math.floor((totalSeconds % 3600) / 60);
            const s = totalSeconds % 60;
            
            daysEl.textContent = d.toString();
            hoursEl.textContent = h.toString().padStart(2, '0');
            minutesEl.textContent = m.toString().padStart(2, '0');
            secondsEl.textContent = s.toString().padStart(2, '0');
            
            totalSeconds--;
          }
          
          updateTimer();
          setInterval(updateTimer, 1000);
        });
      }
      
      // Initialize countdown timers when DOM is ready
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initCountdownTimers);
      } else {
        initCountdownTimers();
      }

      // Initialize Progress Bars - sync percentage text with bar width
      function initProgressBars() {
        const progressBars = document.querySelectorAll('.ziplofy-progress-bar');
        progressBars.forEach((bar) => {
          const percentageEl = bar.querySelector('.progress-percentage');
          const fillEl = bar.querySelector('.progress-bar-fill');
          
          if (!percentageEl || !fillEl) return;
          
          function updateProgressBar() {
            const text = percentageEl.textContent || percentageEl.innerText || '0%';
            const match = text.match(/(d+(?:.d+)?)/);
            if (match) {
              const percentage = parseFloat(match[1]);
              const clampedPercentage = Math.min(100, Math.max(0, percentage));
              fillEl.style.width = clampedPercentage + '%';
            }
          }
          
          // Initial update
          updateProgressBar();
          
          // Watch for changes using MutationObserver
          const observer = new MutationObserver(updateProgressBar);
          observer.observe(percentageEl, {
            childList: true,
            characterData: true,
            subtree: true
          });
        });
      }
      
      // Initialize progress bars when DOM is ready
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initProgressBars);
      } else {
        initProgressBars();
      }

      // Initialize Parallax Sections
      function initParallaxSections() {
        const parallaxSections = document.querySelectorAll('.ziplofy-parallax-section');
        
        if (parallaxSections.length === 0) return;
        
        function updateParallax() {
          parallaxSections.forEach((section) => {
            const background = section.querySelector('.parallax-background');
            const content = section.querySelector('.parallax-content');
            
            if (!background) return;
            
            const rect = section.getBoundingClientRect();
            const windowHeight = window.innerHeight;
            const sectionTop = rect.top;
            const sectionHeight = rect.height;
            
            // Calculate parallax effect based on scroll position
            // Parallax: background moves slower than foreground, creating depth
            const scrolled = window.pageYOffset || document.documentElement.scrollTop;
            const sectionOffset = section.offsetTop;
            
            // Calculate how much the page has scrolled past the section start
            // This creates the parallax effect where background lags behind
            const scrollPastSection = scrolled - sectionOffset;
            
            // Parallax effect: background moves at 50% of scroll speed
            // This creates the illusion that background is further away (moves slower)
            const parallaxSpeed = 0.5;
            const backgroundY = scrollPastSection * parallaxSpeed;
            
            // Only apply parallax when section is in viewport
            if (sectionTop < windowHeight && sectionTop + sectionHeight > 0) {
              // Apply transform to background (moves slower, creating parallax depth)
              background.style.transform = 'translate3d(0, ' + backgroundY + 'px, 0)';
              
              // Content moves even slower for subtle layered parallax effect
              if (content) {
                const contentSpeed = 0.15;
                const contentY = scrollPastSection * contentSpeed;
                content.style.transform = 'translate3d(0, ' + contentY + 'px, 0)';
              }
            } else {
              // Reset when out of viewport
              background.style.transform = 'translate3d(0, 0, 0)';
              if (content) {
                content.style.transform = 'translate3d(0, 0, 0)';
              }
            }
          });
        }
        
        // Throttle scroll events for better performance
        let ticking = false;
        function onScroll() {
          if (!ticking) {
            window.requestAnimationFrame(function() {
              updateParallax();
              ticking = false;
            });
            ticking = true;
          }
        }
        
        // Initial update
        updateParallax();
        
        // Listen to scroll events
        window.addEventListener('scroll', onScroll, { passive: true });
        window.addEventListener('resize', updateParallax, { passive: true });
      }
      
      // Initialize parallax sections when DOM is ready
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initParallaxSections);
      } else {
        initParallaxSections();
      }
    })();
  <\/script>
</body>
</html>`},Qt=e=>{if(!e)return null;const o=e.trim();if(o.startsWith("["))try{const s=JSON.parse(o);return Array.isArray(s)?s:null}catch{}const a=e.match(/<script id="ziplofy-pages-data"[^>]*>([\s\S]*?)<\/script>/i);if(a&&a[1])try{const s=a[1].trim(),l=JSON.parse(s);if(Array.isArray(l))return l.map((x,i)=>({id:x?.id||`page-${i+1}`,name:x?.name||`Page ${i+1}`,html:x?.html||oe,css:x?.css||""}))}catch(s){console.warn("Failed to parse multipage JSON from stored HTML:",s)}return null},Oe=C.useCallback(()=>{const e=H.current;if(!e||typeof e.getHtml!="function")return{pagesSnapshot:ue,currentHtml:"",currentCss:""};const o=e.getHtml()||"";let a="";const s=[];if(e.getCss){const n=e.getCss()||"";n&&n.trim().length>0&&(s.push(n),console.log("Method 1 - Standard getCss():",n.length,"characters"))}if(e.CssComposer)try{const n=e.CssComposer.getAll();if(n&&n.length>0){const t=n.map(p=>{try{if(p.toCSS)return p.toCSS();const g=p.selectorsToString?p.selectorsToString():p.getSelectors?p.getSelectors():"",m=p.getStyle?p.getStyle():{};if(g&&m&&Object.keys(m).length>0){const k=Object.entries(m).map(([w,E])=>`  ${w}: ${E};`).join(`
`);return`${g} {
${k}
}`}return""}catch{return""}}).filter(Boolean).join(`

`);t&&t.trim().length>0&&(s.push(t),console.log("Method 2 - CssComposer:",t.length,"characters"))}}catch(n){console.warn("Failed to get CSS from CssComposer:",n)}if(a=s.join(`

`),e.getWrapper){const t=e.getWrapper().getId();if(t&&a.includes(`#${t}`)){console.log(`üîß Converting wrapper ID selector #${t} to class .gjs-wrapper-body`);const p=new RegExp(`#${t}(?![a-zA-Z0-9_-])`,"g");a=a.replace(p,".gjs-wrapper-body"),console.log("‚úÖ Converted wrapper selectors to class-based")}}try{const n=e.getWrapper();if(n){const t=n.getStyle?n.getStyle():null;if(t&&Object.keys(t).length>0){const g=`.gjs-wrapper-body {
${Object.entries(t).map(([m,k])=>`  ${m}: ${k};`).join(`
`)}
}`;!a.includes(".gjs-wrapper-body")&&!a.includes("background-image")?(a=g+`

`+a,console.log("‚úÖ Method 3 - Added wrapper styles to CSS:",g)):console.log("Method 3 - Wrapper styles already in CSS or detected")}}}catch(n){console.warn("Failed to extract wrapper styles:",n)}if((!a||a.trim().length===0)&&e.getWrapper)try{const n=e.getWrapper(),t=[],p=m=>{m&&(t.push(m),(m.components?m.components():[]).forEach(w=>p(w)))};p(n);const g=t.map(m=>{const k=m.getStyle?m.getStyle():null,w=m.getClasses?m.getClasses():[];if(k&&Object.keys(k).length>0){const E=w.length>0?`.${w.join(".")}`:`#${m.getId()}`,B=Object.entries(k).map(([V,$])=>`  ${V}: ${$};`).join(`
`);return`${E} {
${B}
}`}return null}).filter(Boolean).join(`

`);g&&(a=g,console.log("‚úÖ Method 4 - Extracted CSS from all component styles:",a.length))}catch(n){console.warn("Failed to extract component styles:",n)}const l=a.includes("background-image")||a.includes("background:");if(console.log("üìä Getting pages snapshot - CSS info:",{currentPageId:Z,currentCssLength:a?.length||0,hasCss:!!a&&a.trim().length>0,hasBackgroundImage:l,cssPreview:a?.substring(0,500),fullCss:a}),!l){console.warn("‚ö†Ô∏è NO BACKGROUND IMAGE DETECTED IN CSS!"),console.log("Checking wrapper element directly...");const n=e.getWrapper();if(n){const t=n.getStyle(),p=n.getClasses(),g=n.getAttributes();console.log("Wrapper details:",{styles:t,classes:p,attributes:g,hasBackgroundImage:t&&(t["background-image"]||t.background)})}}const x=ue.map(n=>{if(n.id===Z){const t=a&&a.trim().length>0?a:n.css||"";return{...n,html:o||oe,css:t}}return n}),i=x.find(n=>n.id===Z);return console.log("üìã Pages snapshot created:",{totalPages:x.length,currentPageId:Z,currentPageHasCss:(i?.css?.length||0)>0,allPagesCss:x.map(n=>({id:n.id,cssLength:n.css?.length||0}))}),{pagesSnapshot:x,currentHtml:o,currentCss:a}},[ue,Z]),ke=C.useCallback((e,o)=>{const a=H.current;if(!a){console.error("Cannot apply page: Editor instance is null"),je("Editor not initialized. Please refresh the page."),Le(!1);return}const s=we.get("id")||we.get("themeId");try{console.log("Applying page to editor:",{hasHtml:!!e,htmlLength:e?.length,hasCss:!!o,cssLength:o?.length,themeId:s||"none"});const l=[];if(e){const i=e.match(/<!-- ZIPLOFY_SCRIPTS_DATA:(\[.*?\]) -->/);if(i&&i[1])try{const n=JSON.parse(i[1]);Array.isArray(n)&&(l.push(...n),console.log(`üìú Loaded ${n.length} scripts from comment marker`))}catch(n){console.warn("Failed to parse scripts from comment marker:",n)}}if(e&&l.length===0){const i=/<script([^>]*)>([\s\S]*?)<\/script>/gi;let n;for(;(n=i.exec(e))!==null;){const t=n[1],p=n[2].trim();if(t.includes("ziplofy-pages-data"))continue;const g={},m=t.match(/src=["']([^"']+)["']/i);m&&(g.src=m[1]),p&&(g.content=p);const k=t.match(/type=["']([^"']+)["']/i);k&&(g.type=k[1]),g.async=/async/i.test(t),g.defer=/defer/i.test(t),l.push(g)}console.log(`üìú Extracted ${l.length} script tags from HTML`)}let x=e?e.replace(/<script[\s\S]*?<\/script>/gi,""):"";if(x=x.replace(/<!-- ZIPLOFY_SCRIPTS_DATA:\[.*?\] -->/g,""),a.setComponents(x||oe),setTimeout(()=>{const i=a.getWrapper();if(i){console.log("üîß Configuring wrapper for page..."),i.set({droppable:!0,selectable:!0,editable:!1,draggable:!1,hoverable:!0,stylable:!0,traits:[]},{silent:!0}),i.getClasses().includes("gjs-wrapper-body")||i.addClass("gjs-wrapper-body"),i.view&&i.view.render?.();const t=i.components();if(t&&t.length>0&&t.forEach(m=>{if(m)try{m.set({selectable:!0,hoverable:!0,draggable:!0,stylable:!0},{silent:!0})}catch{}}),a.Canvas){const m=a.Canvas.getElement();m&&(m.style.pointerEvents="auto");const k=a.Canvas.getFrameEl();if(k&&k.contentWindow){const w=k.contentWindow.document.body;w&&(w.style.pointerEvents="auto")}}console.log("‚úì Wrapper configured as droppable. Wrapper has",t?.length||0,"components");const p=i.get("droppable");p?console.log("‚úÖ Wrapper is droppable:",p):(console.error("‚ùå WRAPPER IS NOT DROPPABLE! Fixing..."),i.set("droppable","*"),console.log("‚úì Fixed: Wrapper droppable set to *"));const g=setInterval(()=>{const m=a.getWrapper();m&&!m.get("droppable")&&(console.warn("‚ö†Ô∏è Wrapper became non-droppable, restoring..."),m.set("droppable","*"))},2e3);setTimeout(()=>clearInterval(g),1e4),setTimeout(()=>{K("widgets");const m=document.getElementById("blocks-panel"),k=document.querySelector(".elementor-blocks-wrapper");if(k&&(k.style.setProperty("display","block","important"),k.style.setProperty("visibility","visible","important"),k.style.setProperty("opacity","1","important")),m){m.style.setProperty("display","block","important"),m.style.setProperty("visibility","visible","important"),m.style.setProperty("opacity","1","important");const w=m.querySelectorAll(".gjs-block"),E=!!m.querySelector(".gjs-blocks-c");w.length===0||!E?(console.log("üîÑ No blocks found after applying page, rendering blocks..."),m.innerHTML="",a.BlockManager&&typeof a.BlockManager.render=="function"&&(a.BlockManager.render(),me.current=!0,setTimeout(()=>{const B=m.querySelectorAll(".gjs-block");B.forEach($=>{$&&($.style.display="flex",$.style.visibility="visible",$.style.opacity="1",$.style.pointerEvents="auto",$.style.cursor="grab")}),m.querySelectorAll(".gjs-block-category").forEach($=>{$&&($.style.display="block",$.style.visibility="visible")}),console.log(`‚úÖ Rendered ${B.length} blocks after applying page`)},200))):(console.log(`‚úÖ Found ${w.length} existing blocks after applying page`),me.current=!0)}},300)}else console.error("‚ùå No wrapper found after setComponents!")},150),o&&typeof o=="string"&&o.trim()){console.log("üé® Applying CSS to editor:",{cssLength:o.length,cssPreview:o.substring(0,200)});try{if(typeof a.setStyle=="function")try{a.setStyle(o),console.log("‚úÖ CSS applied via editor.setStyle")}catch(i){console.warn("Failed to apply CSS via editor.setStyle:",i)}if(a.CssComposer)try{const i=a.CssComposer.add({selectors:["body",".gjs-wrapper-body"],style:{}})}catch{}[100,300,500].forEach(i=>{setTimeout(()=>{try{const n=a.Canvas;if(n){const t=n.getFrameEl();if(t&&t.contentDocument){const p=t.contentDocument,g=p.head||p.getElementsByTagName("head")[0];if(g){g.querySelectorAll("#ziplofy-theme-styles, style[data-ziplofy-theme]").forEach(E=>E.remove());const k=p.createElement("style");k.id="ziplofy-theme-styles",k.setAttribute("data-ziplofy-theme","true"),k.textContent=o,g.appendChild(k),console.log(`‚úÖ CSS injected directly into canvas iframe (attempt at ${i}ms):`,{cssLength:o.length,styleElementExists:!!g.querySelector("#ziplofy-theme-styles")});const w=o.matchAll(/@import\s+url\(['"]?([^'")]+)['"]?\)/gi);for(const E of w){const B=E[1];if(!Array.from(g.querySelectorAll('link[rel="stylesheet"]')).find($=>$.href===B)&&B){const $=p.createElement("link");$.rel="stylesheet",$.href=B,$.crossOrigin="anonymous",g.appendChild($)}}}}}}catch(n){i===500&&console.warn("Failed to inject CSS into iframe:",n)}},i)})}catch(i){console.error("Failed to apply CSS to editor:",i)}}else console.log("No CSS content to apply");if(l.length>0){console.log(`üìú Injecting ${l.length} scripts into iframe`);const i=n=>{if(/^(https?:|data:|mailto:|tel:|\/\/)/i.test(n))return n;if(s){const p=n.startsWith("/")?n.substring(1):n;return`${`${window.location.origin}/api/custom-themes/${s}/files`}/${p}`}const t="https://backend.ziplofy.com/api";return n.includes("/themes/installed/")?n.startsWith("http")?n:n.startsWith("/")?`${window.location.origin}${n}`:`${t}/${n}`:n.startsWith("/")?window.location.origin+n:(console.warn(`‚ö†Ô∏è Relative script path detected without theme ID: ${n}, trying API base`),`${t}/${n}`)};[200,500,1e3].forEach(n=>{setTimeout(()=>{try{const t=a.Canvas;if(t){const p=t.getFrameEl();if(p&&p.contentDocument){const g=p.contentDocument,m=g.head||g.getElementsByTagName("head")[0],k=g.body||g.getElementsByTagName("body")[0];if(!m||!k){n===1e3&&console.warn("‚ö†Ô∏è Head or body not found in iframe for script injection");return}let w=m.querySelector("base[data-ziplofy-theme-base]");w?s&&(w.href=`${window.location.origin}/api/custom-themes/${s}/files/`):(w=g.createElement("base"),w.setAttribute("data-ziplofy-theme-base","true"),s?w.href=`${window.location.origin}/api/custom-themes/${s}/files/`:w.href=window.location.origin+"/",m.insertBefore(w,m.firstChild)),m.querySelectorAll("script[data-ziplofy-theme-script]").forEach($=>$.remove()),k.querySelectorAll("script[data-ziplofy-theme-script]").forEach($=>$.remove()),(async()=>{for(let y=0;y<l.length;y++){const de=l[y];try{const _=g.createElement("script");if(_.setAttribute("data-ziplofy-theme-script","true"),de.type&&(_.type=de.type),de.src){const Be=i(de.src);_.src=Be,_.async=de.async||!1,_.defer=de.defer||!1,!de.async&&!de.defer?await new Promise(ht=>{_.onload=()=>{console.log(`‚úÖ Loaded external script: ${de.src}`),ht()},_.onerror=()=>{console.warn(`‚ö†Ô∏è Failed to load script: ${de.src} (resolved: ${Be})`),ht()},setTimeout(()=>{console.warn(`‚ö†Ô∏è Script load timeout: ${de.src}`),ht()},1e4)}):(_.onload=()=>{console.log(`‚úÖ Loaded external script (async/defer): ${de.src}`)},_.onerror=()=>{console.warn(`‚ö†Ô∏è Failed to load script: ${de.src} (resolved: ${Be})`)})}else de.content&&(_.textContent=de.content);de.src?m.appendChild(_):k.appendChild(_),console.log(`‚úÖ Injected script ${y+1}/${l.length}${de.src?`: ${de.src}`:" (inline)"}`)}catch(_){console.warn(`‚ö†Ô∏è Failed to inject script ${y+1}:`,_)}}const $=y=>{const de=typeof y.PRODUCTS<"u"&&Array.isArray(y.PRODUCTS),_=typeof y.liquidjs<"u"||typeof y.Liquid<"u",Be=typeof y.jQuery<"u"||typeof y.$<"u";return de&&(_||Be)},ne=()=>{try{const y=p.contentWindow;if(!y)return;if(!$(y)){console.log("‚è≥ Waiting for dependencies (PRODUCTS, LiquidJS)..."),setTimeout(()=>ne(),500);return}if(console.log("‚úÖ Dependencies ready, executing product rendering..."),g.readyState==="loading"||g.readyState==="interactive"||g.readyState==="complete"){const _=new Event("DOMContentLoaded",{bubbles:!0});g.dispatchEvent(_);const Be=new Event("load",{bubbles:!0});y.dispatchEvent(Be)}if(typeof y.renderFeaturedProducts=="function"){console.log("üîÑ Re-executing renderFeaturedProducts...");try{y.renderFeaturedProducts()}catch(_){console.warn("Error calling renderFeaturedProducts:",_)}}if(typeof y.renderNewArrivals=="function"){console.log("üîÑ Re-executing renderNewArrivals...");try{y.renderNewArrivals()}catch(_){console.warn("Error calling renderNewArrivals:",_)}}if(typeof y.initProductRendering=="function"){console.log("üîÑ Re-executing initProductRendering...");try{y.initProductRendering()}catch(_){console.warn("Error calling initProductRendering:",_)}}if(typeof y.renderTrendingWithLiquid=="function"){console.log("üîÑ Re-executing renderTrendingWithLiquid...");try{y.renderTrendingWithLiquid()}catch(_){console.warn("Error calling renderTrendingWithLiquid:",_)}}if(typeof y.renderProductGrid=="function"){console.log("üîÑ Found renderProductGrid function");const _=g.getElementById("featured-products-grid")||g.getElementById("unique-products")||g.querySelector('[id*="featured"], [class*="featured-products"]');if(_){console.log("üîÑ Attempting to render featured products grid...");try{y.renderProductGrid({templateId:"unique-products-template",targetId:_.id||"unique-products",pick:function(Be){return(Be||[]).slice(0,4)}})}catch(Be){console.warn("Error calling renderProductGrid:",Be)}}}if(typeof y.onload=="function")try{y.onload({})}catch(_){console.warn("Error calling window.onload:",_)}if(typeof y.init=="function")try{y.init()}catch(_){console.warn("Error calling init:",_)}try{const _=new CustomEvent("themeLoaded",{bubbles:!0});g.dispatchEvent(_),y.dispatchEvent&&y.dispatchEvent(_)}catch(_){console.warn("Error dispatching custom event:",_)}}catch(y){console.warn("Error re-executing product rendering:",y)}};[1e3,2e3,3e3].forEach(y=>{setTimeout(()=>{ne(),console.log(`‚úÖ Product rendering re-execution attempted at ${y}ms (script injection delay: ${n}ms)`)},y)}),console.log(`‚úÖ All scripts injected into iframe (attempt at ${n}ms)`)})().catch($=>{console.warn("Error during sequential script injection:",$)})}}}catch(t){n===1e3&&console.warn("Failed to inject scripts into iframe:",t)}},n)})}setTimeout(()=>{try{const i=a.getWrapper();if(i){const n=t=>{if(t){const p=t.getAttributes?.()||{},g=t.get("tagName")?.toLowerCase(),m=t.get("type"),k=p["data-gjs-droppable"]==="*"||g==="form"||g==="section"||g==="div"||g==="main"||g==="article"||g==="header"||g==="footer"||g==="nav"||g==="aside",E=["p","h1","h2","h3","h4","h5","h6","span","a","label","li","td","th","button","strong","em","b","i","u","small","sub","sup"].includes(g),B=t.get("content")&&typeof t.get("content")=="string"&&t.get("content").trim().length>0,V=p["data-gjs-editable"]==="true"||m==="text"||E||B&&!t.components().length;t.set({stylable:!0,selectable:!0,hoverable:!0,draggable:!0,droppable:k?"*":!1,editable:V,resizable:g==="img"||g==="video"||g==="iframe"||g==="canvas"},{silent:!0});const $=t.getEl?.();if($&&$.style)try{$.style.display="",$.style.visibility="visible",$.style.opacity="1"}catch{}const ne=t.components?.();ne&&ne.length>0&&ne.forEach(y=>n(y))}};n(i),setTimeout(()=>{if(a.LayerManager&&P==="structure"){const t=document.getElementById("layers-panel");t&&(document.querySelectorAll(".gjs-layers, .gjs-layer-item, .gjs-layer-item-title").forEach(g=>{g.closest("#layers-panel")||g.remove()}),t.innerHTML="",a.LayerManager.render())}},100)}}catch(i){console.warn("Error making components interactive:",i)}},300),K("widgets"),[500,1e3,1500].forEach(i=>{setTimeout(()=>{try{const n=document.getElementById("blocks-panel"),t=document.querySelector(".elementor-blocks-wrapper");if(n&&a.BlockManager){t&&(t.style.setProperty("display","block","important"),t.style.setProperty("visibility","visible","important"),t.style.setProperty("opacity","1","important"));const p=n.querySelectorAll(".gjs-block"),g=n.innerHTML.trim()==="",m=!!n.querySelector(".gjs-blocks-c");p.length===0&&(g||!m)?(console.log(`[applyPageToEditor] Blocks missing at ${i}ms, restoring...`),n.style.setProperty("display","block","important"),n.style.setProperty("visibility","visible","important"),n.style.setProperty("opacity","1","important"),n.innerHTML="",a.BlockManager.render(),me.current=!0,setTimeout(()=>{const k=n.querySelectorAll(".gjs-block");k.length>0?(k.forEach(E=>{E&&(E.style.display="flex",E.style.visibility="visible",E.style.opacity="1",E.style.pointerEvents="auto",E.style.cursor="grab",E.style.position="relative",E.style.zIndex="1")}),n.querySelectorAll(".gjs-block-category").forEach(E=>{E&&(E.style.display="block",E.style.visibility="visible")}),console.log(`[applyPageToEditor] Restored ${k.length} blocks at ${i}ms`)):console.warn(`[applyPageToEditor] No blocks found after render at ${i}ms`)},200)):p.length>0&&(me.current=!0)}}catch(n){console.warn(`[applyPageToEditor] Error checking blocks at ${i}ms:`,n)}},i)})}catch(l){console.error("Error in applyPageToEditor:",l),je(l?.message||"Failed to apply page content"),Le(!1)}},[we]),Et=C.useCallback(()=>{const e=H.current;if(!e||typeof e.getHtml!="function"){console.warn("‚ö†Ô∏è Cannot commit page: Editor not ready");return}const{currentHtml:o,currentCss:a}=Oe();console.log("üíæ Committing current page:",{currentPageId:Z,htmlLength:o?.length||0,cssLength:a?.length||0,htmlPreview:o?.substring(0,100),cssPreview:a?.substring(0,100)}),He(s=>{const l=s.map(x=>{if(x.id===Z){const i=a&&a.trim().length>0?a:x.css||"",n=o&&o.trim().length>0?o:x.html||oe,t={...x,html:n,css:i};return console.log(`‚úÖ Committed page ${x.name}:`,{htmlLength:t.html?.length||0,cssLength:t.css?.length||0}),t}return x});return qe.current=l,l})},[Z,Oe]),Tr=C.useCallback(e=>{if(!e||e===Z)return;const{pagesSnapshot:o}=Oe(),a=o.map(l=>{const x=ue.find(i=>i.id===l.id);return{...l,html:l.html&&l.html.trim().length>0?l.html:x?.html||oe,css:l.css&&l.css.trim().length>0?l.css:x?.css||""}});He(a),qe.current=a;const s=a.find(l=>l.id===e);Ke(e),ke(s?.html||oe,s?.css||""),console.log(`üìÑ Switched to page: ${s?.name||e}`,{totalPages:a.length,currentPageId:e,hasHtml:!!s?.html,hasCss:!!s?.css,htmlLength:s?.html?.length||0,cssLength:s?.css?.length||0,allPages:a.map(l=>({id:l.id,name:l.name,hasHtml:!!l.html,hasCss:!!l.css}))})},[Z,ue,Oe,ke]),Pr=C.useCallback(()=>{$e(!0),console.log("üìÑ Adding new page...");const{pagesSnapshot:e}=Oe(),o=`page-${Date.now()}`,a={id:o,name:`Page ${e.length+1}`,html:oe,css:""},s=[...e,a];He(s),Ke(o),ke(a.html,a.css||""),setTimeout(()=>{const l=H.current;if(l){const x=l.getWrapper();x&&(console.log("üîç New page wrapper check - Droppable:",x.get("droppable")),x.get("droppable")||(console.warn("‚ö†Ô∏è New page wrapper not droppable, fixing..."),x.set("droppable","*")))}},300)},[Oe,ke]),Er=C.useCallback(e=>{if($e(!0),ue.length<=1){alert("Cannot delete the last page. A theme must have at least one page.");return}const{pagesSnapshot:o}=Oe(),a=o.filter(l=>l.id!==e);He(a);const s=a[0];s&&(Ke(s.id),ke(s.html,s.css||""))},[ue.length,Oe,ke]),Lr=C.useCallback((e,o)=>{He(a=>a.map(s=>s.id===e?{...s,name:o||s.name}:s)),$e(!0)},[]);C.useEffect(()=>{if(!_e){gt.current=!0;return}try{const e=localStorage.getItem(_e);if(e){const o=JSON.parse(e);if(o&&Array.isArray(o.pages)&&o.pages.length>0){Zt.current=!0,Dt.current=o.updatedAt||Date.now(),Ft.current=!0;const a=o.pages;qe.current=a,He(a);const s=o.currentPageId||a[0].id;if(s){Ke(s);const l=a.find(x=>x.id===s);l&&ke(l.html||oe,l.css||"")}}}}catch(e){console.warn("Failed to restore builder state from storage:",e)}finally{gt.current||(gt.current=!0)}},[_e,ke]),C.useEffect(()=>{if(!_e)return;const e=o=>{if(!(o.key!==_e||!o.newValue))try{const a=JSON.parse(o.newValue);if(!a||a.source===Kt.current||!Array.isArray(a.pages)||a.pages.length===0||a.updatedAt&&a.updatedAt<=Dt.current)return;Dt.current=a.updatedAt||Date.now(),Ft.current=!0;const s=a.pages;qe.current=s,He(s);const l=a.currentPageId||s[0].id;if(l){Ke(l);const x=s.find(i=>i.id===l);x&&ke(x.html||oe,x.css||"")}}catch(a){if(a instanceof Error&&a.message.includes("Extension context invalidated"))return;console.warn("Failed to process builder storage update:",a)}};try{window.addEventListener("storage",e)}catch(o){if(o instanceof Error&&o.message.includes("Extension context invalidated"))return}return()=>{try{window.removeEventListener("storage",e)}catch(o){if(o instanceof Error&&o.message.includes("Extension context invalidated"))return}}},[_e,ke]);const gr=C.useCallback(()=>{try{const e=[];for(let a=0;a<localStorage.length;a++){const s=localStorage.key(a);s&&s.startsWith("ziplofy.builder.pages.")&&e.push(s)}e.sort();const o=_e;e.forEach(a=>{if(a!==o)try{localStorage.removeItem(a)}catch{console.warn("Failed to remove old localStorage key:",a)}}),console.log(`Cleared ${e.length} old builder states from localStorage`)}catch(e){console.warn("Error clearing old localStorage data:",e)}},[_e]);C.useEffect(()=>{if(_e&&gt.current){if(Ft.current){Ft.current=!1;return}try{const{pagesSnapshot:e}=Oe(),o={pages:e,currentPageId:Z,updatedAt:Date.now(),source:Kt.current};Dt.current=o.updatedAt,localStorage.setItem(_e,JSON.stringify(o))}catch(e){if(e?.name==="QuotaExceededError"||e?.message?.includes("quota")){console.warn("LocalStorage quota exceeded. Clearing old builder states..."),gr();try{const{pagesSnapshot:o}=Oe(),s={pages:o.map(l=>({...l,css:l.css?l.css.substring(0,5e4):""})),currentPageId:Z,updatedAt:Date.now(),source:Kt.current};localStorage.setItem(_e,JSON.stringify(s)),console.log("Successfully persisted reduced builder state")}catch(o){console.warn("Failed to persist builder state even after clearing old data:",o)}}else console.warn("Failed to persist builder state:",e)}}},[ue,Z,Oe,_e]);const er=C.useMemo(()=>we.get("page"),[we]);C.useEffect(()=>{if(Xt.current)return;if(!er){Xt.current=!0;return}const e=ue.find(o=>o.id===er);e&&(Xt.current=!0,Z!==e.id&&(Ke(e.id),ke(e.html||oe,e.css||"")))},[er,ue,Z,ke]),C.useCallback(async()=>{if(!G)return null;if(!/^[0-9a-fA-F]{24}$/.test(G)){console.warn("Invalid theme ID format (not a MongoDB ObjectId). This might be an old theme from localStorage. Creating new theme.");const o=new URL(window.location.href);return o.searchParams.delete("id"),window.history.replaceState({},"",o.toString()),null}try{const{axiosi:o}=await zt(async()=>{const{axiosi:s}=await import("./index-C7S6h9OR.js").then(l=>l.b5);return{axiosi:s}},__vite__mapDeps([0,1])),a=await o.get(`/custom-themes/${G}`);if(a.data.success&&a.data.data){const s=a.data.data,l=s.html||"",x=s.css||"",i=Qt(l);if(i&&i.length>0)return console.log("üì• Loaded pages from saved theme:",{totalPages:i.length,pages:i.map(t=>({id:t.id,name:t.name,hasHtml:!!t.html&&t.html.trim().length>0,hasCss:!!t.css&&t.css.trim().length>0,htmlLength:t.html?.length||0,cssLength:t.css?.length||0}))}),Zt.current||(console.log("üîÑ Setting pages state from loaded theme:",{pagesCount:i.length,firstPage:{id:i[0].id,name:i[0].name,htmlLength:i[0].html?.length||0,cssLength:i[0].css?.length||0},allPages:i.map(t=>({id:t.id,name:t.name,htmlLength:t.html?.length||0,cssLength:t.css?.length||0}))}),He(i),qe.current=i,Ke(i[0].id),setTimeout(()=>{H.current&&i[0]&&(console.log("üìÑ Applying first page to editor after load:",{pageId:i[0].id,pageName:i[0].name,htmlLength:i[0].html?.length||0,cssLength:i[0].css?.length||0}),ke(i[0].html||oe,i[0].css||""))},100)),gt.current=!0,{...s,html:i[0].html||oe,css:x};const n={id:"page-1",name:"Home",html:l||oe,css:x||""};return Zt.current||(He([n]),qe.current=[n],Ke("page-1")),gt.current=!0,{...s,html:n.html,css:x}}return null}catch(o){if(o?.response?.status===404||o?.response?.status===400){const a=new URL(window.location.href);a.searchParams.delete("id"),window.history.replaceState({},"",a.toString()),gt.current=!0}else console.error("Error loading custom theme:",o);return null}},[G,Qt]),C.useEffect(()=>{const e=a=>a.error&&a.error.message&&a.error.message.includes("Extension context invalidated")?(a.preventDefault(),a.stopPropagation(),!1):!0,o=a=>a.reason&&a.reason.message&&a.reason.message.includes("Extension context invalidated")?(a.preventDefault(),!1):!0;return window.addEventListener("error",e),window.addEventListener("unhandledrejection",o),()=>{window.removeEventListener("error",e),window.removeEventListener("unhandledrejection",o)}},[]),C.useEffect(()=>{if(H.current)return;let e=!1;const o=[],a=l=>{o.push(l)},s=setTimeout(()=>{!e&&jt&&(console.warn("‚ö†Ô∏è Editor initialization timeout - forcing loading to false"),Le(!1),je("Editor initialization is taking longer than expected. The editor may still be loading."))},1e4);return(async()=>{try{Le(!0),je(null);let l=0;const x=10;for(;!Ee.current&&l<x;)await new Promise(r=>setTimeout(r,100)),l++;if(!Ee.current){console.error("‚ùå Editor container not found after retries"),je("Editor container not found. Please refresh the page."),Le(!1),clearTimeout(s);return}console.log("‚úÖ Editor container found, initializing GrapesJS..."),console.log("üì¶ Loading GrapesJS dependencies...");const i=(await zt(async()=>{const{default:r}=await import("./grapes-e2OmM4qI.js");return{default:r}},[])).default;console.log("‚úÖ GrapesJS loaded"),await zt(()=>Promise.resolve({}),__vite__mapDeps([2])),console.log("‚úÖ GrapesJS CSS loaded");const n=(await zt(async()=>{const{default:r}=await import("./index-BhhnlxNf.js").then(d=>d.i);return{default:r}},__vite__mapDeps([3,0,1]))).default;console.log("‚úÖ GrapesJS preset-webpage loaded"),console.log("üöÄ Initializing GrapesJS editor...",{container:Ee.current,hasContainer:!!Ee.current,containerId:Ee.current?.id,containerClasses:Ee.current?.className});const t=i.init({container:Ee.current,fromElement:!1,height:"calc(100vh - 60px)",width:"100%",noticeOnUnload:!1,avoidInlineStyle:!0,plugins:[n],pluginsOpts:{[n]:{}},deviceManager:{devices:[{id:"desktop",name:"Desktop",width:""},{id:"tablet",name:"Tablet",width:"768px"},{id:"mobile",name:"Mobile",width:"375px"}]},storageManager:{type:null},selectorManager:{componentFirst:!0,escapeName:r=>r,appendTo:"#style-panel"},styleManager:{appendTo:"#style-panel",sectors:[{name:"Layout",open:!0,buildProps:["width","height","min-width","min-height","max-width","max-height","padding","margin","display","position","top","right","bottom","left","z-index","overflow","overflow-x","overflow-y","float","clear","vertical-align","box-sizing"]},{name:"Typography",open:!0,buildProps:["font-family","font-size","font-weight","font-style","font-variant","text-decoration","text-align","text-transform","text-indent","line-height","letter-spacing","word-spacing","white-space","color","text-shadow","text-overflow","word-wrap","word-break"]},{name:"Background",open:!0,buildProps:["background-color","background-image","background-repeat","background-position","background-attachment","background-size","background-clip","background-origin","background-blend-mode"]},{name:"Border",open:!0,buildProps:["border","border-width","border-style","border-color","border-radius","border-top","border-right","border-bottom","border-left","border-top-width","border-right-width","border-bottom-width","border-left-width","border-top-style","border-right-style","border-bottom-style","border-left-style","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius","box-shadow","outline","outline-width","outline-style","outline-color","outline-offset"]},{name:"Flexbox",open:!1,buildProps:["flex-direction","flex-wrap","justify-content","align-items","align-content","align-self","flex","flex-grow","flex-shrink","flex-basis","order","gap","row-gap","column-gap"]},{name:"Grid",open:!1,buildProps:["grid-template-columns","grid-template-rows","grid-template-areas","grid-column","grid-row","grid-column-start","grid-column-end","grid-row-start","grid-row-end","grid-area","grid-gap","grid-row-gap","grid-column-gap","grid-auto-columns","grid-auto-rows","grid-auto-flow","justify-items","align-items","place-items","justify-content","align-content","place-content"]},{name:"Effects",open:!1,buildProps:["opacity","transition","transition-property","transition-duration","transition-timing-function","transition-delay","transform","transform-origin","transform-style","perspective","perspective-origin","filter","backdrop-filter","mix-blend-mode","isolation","box-shadow","text-shadow","clip-path","mask","mask-image"]},{name:"Spacing",open:!1,buildProps:["margin","margin-top","margin-right","margin-bottom","margin-left","padding","padding-top","padding-right","padding-bottom","padding-left","gap","row-gap","column-gap"]},{name:"Sizing",open:!1,buildProps:["width","height","min-width","min-height","max-width","max-height","box-sizing","object-fit","object-position","aspect-ratio"]},{name:"List",open:!1,buildProps:["list-style","list-style-type","list-style-position","list-style-image"]},{name:"Table",open:!1,buildProps:["border-collapse","border-spacing","caption-side","empty-cells","table-layout"]},{name:"Cursor",open:!1,buildProps:["cursor","pointer-events","user-select","touch-action"]},{name:"Animation",open:!1,buildProps:["animation","animation-name","animation-duration","animation-timing-function","animation-delay","animation-iteration-count","animation-direction","animation-fill-mode","animation-play-state"]}]},canvas:{styles:[]},blockManager:{appendTo:"#blocks-panel"},layerManager:{appendTo:"#layers-panel"},traitManager:{appendTo:"#traits-panel"}});H.current=t,console.log("‚úÖ Editor instance created and stored",{hasEditor:!!t,hasComponents:!!t.Components,hasBlockManager:!!t.BlockManager});const p=()=>{const r=t.UndoManager;r&&(ft(r.hasUndo()),mt(r.hasRedo()))};t.on("update",p),t.on("component:update",p),t.on("style:update",p),t.on("component:update",r=>{try{const d=r.getEl?r.getEl():null;if(!d||d.nodeType!==1)return;const u=d.closest?d.closest(".ziplofy-progress-bar"):null;if(!u)return;const h=u.querySelector(".progress-percentage"),f=u.querySelector(".progress-bar-fill");if(!h||!f)return;const j=(h.textContent||h.innerText||"0%").match(/(\d+(?:\.\d+)?)/);if(j){const v=parseFloat(j[1]),L=Math.min(100,Math.max(0,v));f.style.width=L+"%"}}catch{}}),t.on("storage:load",p);const g=()=>{try{const r=t.Canvas;if(!r)return;const d=r.getFrameEl();if(!d||!d.contentWindow||!d.contentDocument)return;const u=d.contentWindow,h=d.contentDocument;if(typeof u.renderFeaturedProducts=="function")try{u.renderFeaturedProducts(),console.log("üîÑ Re-executed renderFeaturedProducts after editor update")}catch{}if(typeof u.renderNewArrivals=="function")try{u.renderNewArrivals()}catch{}if(typeof u.initProductRendering=="function")try{u.initProductRendering()}catch{}if(typeof u.renderTrendingWithLiquid=="function")try{u.renderTrendingWithLiquid()}catch{}if(typeof u.renderProductGrid=="function"){const f=h.getElementById("featured-products-grid")||h.getElementById("unique-products")||h.querySelector('[id*="featured"], [class*="featured-products"]');if(f)try{u.renderProductGrid({templateId:"unique-products-template",targetId:f.id||"unique-products",pick:function(S){return(S||[]).slice(0,4)}})}catch{}}}catch{}};let m=null;t.on("component:add",r=>{setTimeout(()=>{try{const d=u=>{if(!u)return;const h=u.get("tagName")?.toLowerCase(),f=u.get("type"),S=u.getAttributes?.()||{},v=["p","h1","h2","h3","h4","h5","h6","span","a","label","li","td","th","button","strong","em","b","i","u"].includes(h),L=S["data-gjs-editable"]==="true"||f==="text"||v,b=S["data-gjs-droppable"]==="*"||["form","section","div","main","article","header","footer","nav","aside"].includes(h);u.set({stylable:!0,selectable:!0,hoverable:!0,draggable:!0,droppable:b?"*":!1,editable:L,resizable:["img","video","iframe","canvas"].includes(h)},{silent:!0});const T=u.components?.();T&&T.length>0&&T.forEach(I=>d(I))};d(r)}catch(d){console.warn("Error making new component interactive:",d)}g()},100)}),t.on("component:update",r=>{m&&clearTimeout(m),m=setTimeout(()=>{g()},1e3);try{if(r){const d=r.get("tagName")?.toLowerCase(),u=r.get("type"),h=r.getAttributes?.()||{},S=["p","h1","h2","h3","h4","h5","h6","span","a","label","li","td","th","button"].includes(d);(h["data-gjs-editable"]==="true"||u==="text"||S)&&!r.get("editable")&&r.set("editable",!0,{silent:!0}),r.get("stylable")||r.set("stylable",!0,{silent:!0})}}catch{}}),p();let k=!1;t.on("load",()=>{k||e||(k=!0,console.log("‚úÖ Editor loaded - ensuring widgets panel is visible"),requestAnimationFrame(()=>{if(e)return;P!=="widgets"&&K("widgets");const r=()=>{if(e)return;const d=document.getElementById("blocks-panel"),u=document.querySelector(".elementor-blocks-wrapper");if(d&&t.BlockManager){u&&(u.style.setProperty("display","block","important"),u.style.setProperty("visibility","visible","important"),u.style.setProperty("opacity","1","important")),d.style.setProperty("display","block","important"),d.style.setProperty("visibility","visible","important"),d.style.setProperty("opacity","1","important");const h=d.querySelectorAll(".gjs-block"),f=!!d.querySelector(".gjs-blocks-c");h.length===0||!f?(console.log("No blocks found on editor load, rendering..."),d.innerHTML="",t.BlockManager.render(),me.current=!0,requestAnimationFrame(()=>{if(e)return;const S=d.querySelectorAll(".gjs-block");S.forEach(v=>{v&&(v.style.display="flex",v.style.visibility="visible",v.style.opacity="1",v.style.pointerEvents="auto",v.style.cursor="grab")}),d.querySelectorAll(".gjs-block-category").forEach(v=>{v&&(v.style.display="block",v.style.visibility="visible")}),console.log(`‚úÖ Rendered ${S.length} blocks on editor load`)})):(console.log(`‚úÖ Found ${h.length} existing blocks on editor load`),me.current=!0)}else!d&&!e&&(console.warn("blocks-panel not found, retrying..."),requestAnimationFrame(()=>{e||r()}))};r()}))});const w=r=>{try{r&&(r.preventDefault(),r.stopPropagation());const d=t.getSelected();if(d&&d.get("type")!=="wrapper"){const u=d.toJSON(),h=t.getHtml({component:d});window.__ziplofyCopiedComponent={json:u,html:h,component:d},console.log("Component copied:",d.get("tagName"),u);const f=d.getEl?.();f&&(f.style.outline="2px dashed #5e72e4",setTimeout(()=>{f&&f.style&&(f.style.outline="")},500))}else console.log("No component selected to copy")}catch(d){console.error("Error copying component:",d)}},E=r=>{try{r&&(r.preventDefault(),r.stopPropagation());const d=window.__ziplofyCopiedComponent;if(!d){console.log("No component copied");return}const u=t.getSelected();let h=t.getWrapper();if(u&&u.get("type")!=="wrapper")if(u.get("droppable")||u.getAttributes?.()?.["data-gjs-droppable"]==="*")h=u;else try{const v=u.parent();v&&v.get&&v.get("type")!=="wrapper"&&(h=v)}catch(v){console.warn("Could not get parent, using wrapper:",v)}if(!h){console.log("No target to paste into");return}let f=null;if(d.component)try{f=d.component.clone()}catch(j){if(console.warn("Error cloning from component reference:",j),d.html)try{const v=t.getWrapper();if(v){const L=v.get("content");v.set("content",d.html);const b=v.components();if(b&&b.length>0){const T=b.at(0);T&&(f=T,v.components().remove(f))}v.set("content",L)}}catch(v){console.error("Error parsing HTML:",v)}}else if(d.html)try{const j=t.getWrapper();if(j){const v=j.get("content");j.set("content",d.html);const L=j.components();if(L&&L.length>0){const b=L.at(0);b&&(f=b,j.components().remove(f))}j.set("content",v)}}catch(j){console.error("Error parsing HTML:",j)}else if(d.json)try{if(t.getWrapper()&&d.json&&d.json.components){const v=t.Components.getWrapper();if(v){const L=v.get("content"),b=v.components().add(d.json);b&&(f=Array.isArray(b)?b[0]:b,f&&v.components().remove(f)),v.set("content",L)}}}catch(j){console.error("Error recreating from JSON:",j)}if(!f){console.error("Failed to clone component");return}const S=j=>{try{const v=j.getAttributes?.()||{},L=j.get?.("tagName")?.toLowerCase?.()||"",b=j.get("type"),T=v["data-gjs-droppable"]==="*"||["form","section","div","main","article","header","footer","nav","aside"].includes(L),I=v["data-gjs-selectable"]!=="false",q=["p","h1","h2","h3","h4","h5","h6","span","a","label","li","td","th","button","strong","em","b","i","u"].includes(L),R=v["data-gjs-editable"]==="true"||v["data-gjs-type"]==="text"||b==="text"||q;if(j.set({selectable:I,hoverable:!0,draggable:!0,stylable:!0,droppable:T?"*":!1,editable:R,resizable:["img","video","iframe","canvas"].includes(L)},{silent:!0}),R&&j.set({editable:!0,type:"text"},{silent:!0}),t.CssComposer){const F=j.cid||j.getId?.();if(F){let Q=j.getClasses().find(D=>D&&!D.startsWith("gjs-"));Q||(Q=`gjs-comp-${F}`,j.addClass(Q))}}const U=j.components();U&&U.length>0&&U.forEach(F=>{S(F)})}catch(v){console.warn("Error configuring pasted component:",v)}};S(f);try{h.components?h.components().add(f):h.append(f)}catch(j){console.warn("Error adding to target, using wrapper:",j);const v=t.getWrapper();v&&v.append(f)}setTimeout(()=>{try{t.select(f)}catch(j){console.warn("Error selecting pasted component:",j)}},100),console.log("Component pasted successfully")}catch(d){console.error("Error pasting component:",d)}},B=r=>{const d=r.target;if(!(d.tagName==="INPUT"||d.tagName==="TEXTAREA"||d.isContentEditable)){if((r.ctrlKey||r.metaKey)&&r.key==="c"&&!r.shiftKey){w(r);return}if((r.ctrlKey||r.metaKey)&&r.key==="v"&&!r.shiftKey){E(r);return}(r.ctrlKey||r.metaKey)&&r.key==="z"&&!r.shiftKey&&(r.preventDefault(),Xe&&t.UndoManager&&t.UndoManager.undo()),(r.ctrlKey||r.metaKey)&&r.key==="z"&&r.shiftKey&&(r.preventDefault(),Je&&t.UndoManager&&t.UndoManager.redo()),(r.ctrlKey||r.metaKey)&&r.key==="y"&&(r.preventDefault(),Je&&t.UndoManager&&t.UndoManager.redo())}};window.addEventListener("keydown",B),a(()=>{window.removeEventListener("keydown",B)});let V=null,$=null;const ne=()=>{if($=document.getElementById("style-panel"),!$)return;V&&V.disconnect();let r=null;V=new MutationObserver(()=>{r&&clearTimeout(r),r=setTimeout(()=>{if(!$)return;const d=window.getComputedStyle($);(d.display==="none"||d.visibility==="hidden")&&requestAnimationFrame(()=>{$&&($.style.display="block",$.style.visibility="visible",$.style.opacity="1");const u=fe.current?.querySelector(".builder-right-panel");u&&(u.style.display="flex",u.style.visibility="visible",u.style.opacity="1")})},50)}),V.observe($,{attributes:!0,attributeFilter:["style"],childList:!1,subtree:!1})};requestAnimationFrame(()=>{if(!e){const r=fe.current?.querySelector(".builder-right-panel");r&&(r.style.display="flex",r.style.visibility="visible",r.style.opacity="1",r.style.width="300px",r.style.flexShrink="0"),ne()}}),requestAnimationFrame(()=>{if(!(e||!t.StyleManager))try{const r=fe.current?.querySelector(".builder-right-panel");r&&(r.style.display="flex",r.style.visibility="visible",r.style.opacity="1",r.style.width="300px",r.style.flexShrink="0");const d=t.getWrapper();d&&(t.select(d),d.set({stylable:!0}),t.runCommand("open-sm"));const u=document.getElementById("style-panel");if(!u||typeof t.StyleManager.render!="function")return;u.style.display="block",u.style.visibility="visible",u.style.opacity="1",u.style.width="100%",u.style.height="100%",u.style.minHeight="300px",u.style.background="#1e1e1e",P==="style"&&(u.innerHTML="",t.StyleManager.render()),requestAnimationFrame(()=>{const h=u.querySelectorAll(".gjs-sm-sector"),f=document.createDocumentFragment(),S=[];h.forEach(j=>{j&&S.push(()=>{j.classList.remove("gjs-sm-sector--closed"),j.classList.add("gjs-sm-sector--open");const v=j.querySelector(".gjs-sm-sector-content");v&&(v.style.cssText="display: block !important; visibility: visible !important; opacity: 1 !important; max-height: none !important;")})}),S.forEach(j=>j())})}catch(r){console.warn("Error initializing Style Manager:",r)}});const y=t.BlockManager;y?console.log("‚úÖ BlockManager is available"):console.error("‚ùå BlockManager is not available!"),document.getElementById("blocks-panel")?console.log("‚úÖ blocks-panel exists during block registration"):console.warn("‚ö†Ô∏è blocks-panel not found during block registration, will retry later");const _=y&&y.getAll?y.getAll().length:0;console.log(`üì¶ Blocks before registration: ${_}`),y.add("section",{label:"Section",category:"Layout",content:'<section style="padding: 60px 20px; min-height: 300px; background: #f9fafb; position: relative;" data-gjs-droppable="*" data-gjs-selectable="true"><div style="max-width: 1200px; margin: 0 auto;">Section Content</div></section>'}),y.add("container",{label:"Container",category:"Layout",content:'<div style="max-width: 1200px; margin: 0 auto; padding: 20px;" data-gjs-droppable="*" data-gjs-selectable="true">Container</div>'}),y.add("columns-2",{label:"2 Columns",category:"Layout",content:'<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; padding: 20px;" data-gjs-droppable="*" data-gjs-selectable="true"><div data-gjs-droppable="*" style="min-height: 150px; padding: 20px; background: #fff; border: 1px dashed #e5e7eb;">Column 1</div><div data-gjs-droppable="*" style="min-height: 150px; padding: 20px; background: #fff; border: 1px dashed #e5e7eb;">Column 2</div></div>'}),y.add("columns-3",{label:"3 Columns",category:"Layout",content:'<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 30px; padding: 20px;" data-gjs-droppable="*" data-gjs-selectable="true"><div data-gjs-droppable="*" style="min-height: 150px; padding: 20px; background: #fff; border: 1px dashed #e5e7eb;">Col 1</div><div data-gjs-droppable="*" style="min-height: 150px; padding: 20px; background: #fff; border: 1px dashed #e5e7eb;">Col 2</div><div data-gjs-droppable="*" style="min-height: 150px; padding: 20px; background: #fff; border: 1px dashed #e5e7eb;">Col 3</div></div>'}),y.add("columns-4",{label:"4 Columns",category:"Layout",content:'<div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; padding: 20px;" data-gjs-droppable="*" data-gjs-selectable="true"><div data-gjs-droppable="*" style="min-height: 150px; padding: 15px; background: #fff; border: 1px dashed #e5e7eb;">Col 1</div><div data-gjs-droppable="*" style="min-height: 150px; padding: 15px; background: #fff; border: 1px dashed #e5e7eb;">Col 2</div><div data-gjs-droppable="*" style="min-height: 150px; padding: 15px; background: #fff; border: 1px dashed #e5e7eb;">Col 3</div><div data-gjs-droppable="*" style="min-height: 150px; padding: 15px; background: #fff; border: 1px dashed #e5e7eb;">Col 4</div></div>'}),y.add("row",{label:"Row",category:"Layout",content:'<div style="display: flex; gap: 20px; padding: 20px; flex-wrap: wrap;" data-gjs-droppable="*" data-gjs-selectable="true"><div data-gjs-droppable="*" style="flex: 1; min-width: 200px; min-height: 150px; padding: 20px; background: #fff; border: 1px dashed #e5e7eb;">Row Item</div></div>'}),y.add("divider",{label:"Divider",category:"Layout",content:'<div style="padding: 40px 20px; text-align: center;" data-gjs-selectable="true"><hr style="border: none; border-top: 2px solid #e5e7eb; margin: 0;" /></div>'}),y.add("spacer",{label:"Spacer",category:"Layout",content:'<div style="height: 50px; width: 100%;" data-gjs-selectable="true"></div>'}),y.add("navbar",{label:"Navbar",category:"Layout",content:'<nav style="background: #ffffff; padding: 16px 40px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 1000;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="max-width: 1200px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap;"><div style="display: flex; align-items: center; gap: 12px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="width: 40px; height: 40px; background: #5e72e4; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 18px;" data-gjs-type="text" data-gjs-editable="true">L</div><span style="font-size: 20px; font-weight: 700; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Logo</span></div><ul style="display: flex; list-style: none; gap: 32px; margin: 0; padding: 0; align-items: center; flex-wrap: wrap;" data-gjs-selectable="true" data-gjs-droppable="*"><li style="margin: 0;" data-gjs-selectable="true"><a href="#" style="color: #495157; text-decoration: none; font-size: 16px; font-weight: 500; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Home</a></li><li style="margin: 0;" data-gjs-selectable="true"><a href="#" style="color: #495157; text-decoration: none; font-size: 16px; font-weight: 500; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">About</a></li><li style="margin: 0;" data-gjs-selectable="true"><a href="#" style="color: #495157; text-decoration: none; font-size: 16px; font-weight: 500; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Services</a></li><li style="margin: 0;" data-gjs-selectable="true"><a href="#" style="color: #495157; text-decoration: none; font-size: 16px; font-weight: 500; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Contact</a></li></ul><div style="display: flex; align-items: center; gap: 12px;" data-gjs-selectable="true" data-gjs-droppable="*"><button style="padding: 10px 24px; background: transparent; color: #5e72e4; border: 2px solid #5e72e4; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 600; transition: all 0.3s;" data-gjs-type="text" data-gjs-editable="true">Login</button><button style="padding: 10px 24px; background: #5e72e4; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 600; transition: all 0.3s;" data-gjs-type="text" data-gjs-editable="true">Sign Up</button></div></div></nav>'}),y.add("heading-1",{label:"Heading 1",category:"Basic",content:'<h1 style="font-size: 48px; font-weight: 700; margin: 20px 0; line-height: 1.2; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true" data-gjs-selectable="true">Heading</h1>'}),y.add("heading-2",{label:"Heading 2",category:"Basic",content:'<h2 style="font-size: 36px; font-weight: 600; margin: 20px 0; line-height: 1.3; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true" data-gjs-selectable="true">Sub Heading</h2>'}),y.add("heading-3",{label:"Heading 3",category:"Basic",content:'<h3 style="font-size: 28px; font-weight: 600; margin: 20px 0; line-height: 1.4; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true" data-gjs-selectable="true">Heading 3</h3>'}),y.add("heading-4",{label:"Heading 4",category:"Basic",content:'<h4 style="font-size: 24px; font-weight: 600; margin: 20px 0; line-height: 1.4; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true" data-gjs-selectable="true">Heading 4</h4>'}),y.add("paragraph",{label:"Text Editor",category:"Basic",content:'<p style="font-size: 16px; line-height: 1.8; margin: 20px 0; color: #495157;" data-gjs-type="text" data-gjs-editable="true" data-gjs-selectable="true">Add your text here. You can edit this text and change how it looks.</p>'}),y.add("text-block",{label:"Text Block",category:"Basic",content:'<div style="padding: 30px; background: #fff;" data-gjs-selectable="true" data-gjs-droppable="*"><p style="font-size: 16px; line-height: 1.8; color: #495157; margin: 0;" data-gjs-type="text" data-gjs-editable="true">Text content</p></div>'}),y.add("quote",{label:"Quote",category:"Basic",content:'<blockquote style="padding: 30px; margin: 30px 0; border-left: 4px solid #5e72e4; background: #f9fafb; font-style: italic; font-size: 18px; line-height: 1.6; color: #495157;" data-gjs-type="text" data-gjs-editable="true" data-gjs-selectable="true">Your quote text here</blockquote>'}),y.add("list",{label:"List",category:"Basic",content:'<ul style="padding: 20px 20px 20px 40px; margin: 20px 0; list-style: disc; color: #495157; font-size: 16px; line-height: 1.8;" data-gjs-selectable="true" data-gjs-droppable="*"><li style="margin: 10px 0;" data-gjs-type="text" data-gjs-editable="true">List item 1</li><li style="margin: 10px 0;" data-gjs-type="text" data-gjs-editable="true">List item 2</li><li style="margin: 10px 0;" data-gjs-type="text" data-gjs-editable="true">List item 3</li></ul>'}),y.add("link-block",{label:"Link Block",category:"Basic",content:'<div style="padding: 20px; background: #fff; border: 1px solid #e5e7eb; border-radius: 8px;" data-gjs-selectable="true" data-gjs-droppable="*"><a href="#" style="color: #5e72e4; text-decoration: none; font-size: 16px; font-weight: 500;" data-gjs-type="text" data-gjs-editable="true">Link Text</a></div>'}),y.add("button",{label:"Button",category:"Buttons",content:'<div style="padding: 20px; text-align: center;" data-gjs-selectable="true"><button style="padding: 14px 32px; background: #5e72e4; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; font-weight: 600; transition: all 0.3s;" data-gjs-type="text" data-gjs-editable="true">Click Here</button></div>'}),y.add("button-outline",{label:"Button Outline",category:"Buttons",content:'<div style="padding: 20px; text-align: center;" data-gjs-selectable="true"><button style="padding: 14px 32px; background: transparent; color: #5e72e4; border: 2px solid #5e72e4; border-radius: 4px; cursor: pointer; font-size: 16px; font-weight: 600; transition: all 0.3s;" data-gjs-type="text" data-gjs-editable="true">Click Here</button></div>'}),y.add("button-text",{label:"Button Text",category:"Buttons",content:'<div style="padding: 20px; text-align: center;" data-gjs-selectable="true"><button style="padding: 14px 32px; background: transparent; color: #5e72e4; border: none; cursor: pointer; font-size: 16px; font-weight: 600; text-decoration: underline;" data-gjs-type="text" data-gjs-editable="true">Click Here</button></div>'}),y.add("link",{label:"Link",category:"Buttons",content:'<div style="padding: 20px;" data-gjs-selectable="true"><a href="#" style="color: #5e72e4; text-decoration: none; font-size: 16px; font-weight: 500; border-bottom: 1px solid #5e72e4;" data-gjs-type="text" data-gjs-editable="true">Link Text</a></div>'}),y.add("page-link",{label:"Page Link",category:"Buttons",content:'<div style="padding: 20px;" data-gjs-selectable="true"><a href="#page-page-1" data-page-link="page-1" style="color: #5e72e4; text-decoration: none; font-size: 16px; font-weight: 500; border-bottom: 1px solid #5e72e4;" data-gjs-type="text" data-gjs-editable="true">Link to Page</a></div>'}),y.add("image",{label:"Image",category:"Media",content:'<div style="padding: 20px; text-align: center;" data-gjs-selectable="true"><img src="https://via.placeholder.com/800x600/5e72e4/ffffff?text=Image" alt="Image" style="max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);" /></div>'}),y.add("image-gallery",{label:"Image Gallery",category:"Media",content:'<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; padding: 20px;" data-gjs-selectable="true" data-gjs-droppable="*"><div data-gjs-selectable="true"><img src="https://via.placeholder.com/300x300/5e72e4/ffffff?text=1" alt="Gallery Image" style="width: 100%; height: auto; border-radius: 8px;" /></div><div data-gjs-selectable="true"><img src="https://via.placeholder.com/300x300/5e72e4/ffffff?text=2" alt="Gallery Image" style="width: 100%; height: auto; border-radius: 8px;" /></div><div data-gjs-selectable="true"><img src="https://via.placeholder.com/300x300/5e72e4/ffffff?text=3" alt="Gallery Image" style="width: 100%; height: auto; border-radius: 8px;" /></div></div>'}),y.add("video",{label:"Video",category:"Media",content:'<div style="padding: 20px; text-align: center; background: #000; border-radius: 8px;" data-gjs-selectable="true"><div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%;"><iframe style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" src="https://www.youtube.com/embed/dQw4w9WgXcQ" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div></div>'}),y.add("icon",{label:"Icon",category:"Media",content:'<div style="padding: 30px; text-align: center;" data-gjs-selectable="true"><div style="width: 64px; height: 64px; margin: 0 auto; background: #5e72e4; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 32px; font-weight: bold;">‚òÖ</div></div>'}),y.add("google-maps",{label:"Google Maps",category:"Media",content:'<div style="padding: 20px; text-align: center;" data-gjs-selectable="true"><div style="width: 100%; height: 400px; background: #e5e7eb; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: #6b7280; font-size: 14px;">Google Maps Embed</div></div>'}),y.add("form",{label:"Contact Form",category:"Forms",content:'<form style="padding: 20px; max-width: 500px; background: #fff; border-radius: 8px;" data-gjs-selectable="true" data-gjs-droppable="*"><input type="text" placeholder="Name" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;" data-gjs-selectable="true" /><input type="email" placeholder="Email" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;" data-gjs-selectable="true" /><input type="tel" placeholder="Phone" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;" data-gjs-selectable="true" /><textarea placeholder="Message" rows="4" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px; resize: vertical;" data-gjs-selectable="true"></textarea><button type="submit" style="padding: 12px 24px; background: #10b981; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 500; width: 100%; margin-top: 10px;" data-gjs-selectable="true">Submit</button></form>'}),y.add("form-simple",{label:"Simple Form",category:"Forms",content:'<form style="padding: 20px; max-width: 500px; background: #fff; border-radius: 8px;" data-gjs-selectable="true" data-gjs-droppable="*"><input type="text" placeholder="Name" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;" data-gjs-selectable="true" /><input type="email" placeholder="Email" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;" data-gjs-selectable="true" /><button type="submit" style="padding: 12px 24px; background: #10b981; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 500; width: 100%; margin-top: 10px;" data-gjs-selectable="true">Submit</button></form>'}),y.add("input-text",{label:"Text Input",category:"Forms",content:'<input type="text" placeholder="Enter text" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;" data-gjs-selectable="true" data-gjs-draggable="*" />'}),y.add("input-email",{label:"Email Input",category:"Forms",content:'<input type="email" placeholder="Enter email" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;" data-gjs-selectable="true" data-gjs-draggable="*" />'}),y.add("input-phone",{label:"Phone Input",category:"Forms",content:'<input type="tel" placeholder="Enter phone" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;" data-gjs-selectable="true" data-gjs-draggable="*" />'}),y.add("textarea-field",{label:"Textarea",category:"Forms",content:'<textarea placeholder="Enter message" rows="4" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px; resize: vertical;" data-gjs-selectable="true" data-gjs-draggable="*"></textarea>'}),y.add("form-button",{label:"Submit Button",category:"Forms",content:'<button type="submit" style="padding: 12px 24px; background: #10b981; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 500;" data-gjs-selectable="true" data-gjs-draggable="*">Submit</button>'}),y.add("input-number",{label:"Number Input",category:"Forms",content:'<input type="number" placeholder="Enter number" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;" data-gjs-selectable="true" data-gjs-draggable="*" />'}),y.add("input-password",{label:"Password Input",category:"Forms",content:'<input type="password" placeholder="Enter password" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;" data-gjs-selectable="true" data-gjs-draggable="*" />'}),y.add("input-date",{label:"Date Input",category:"Forms",content:'<input type="date" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;" data-gjs-selectable="true" data-gjs-draggable="*" />'}),y.add("select-dropdown",{label:"Select Dropdown",category:"Forms",content:'<select style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;" data-gjs-selectable="true" data-gjs-draggable="*"><option>Option 1</option><option>Option 2</option></select>'}),y.add("checkbox",{label:"Checkbox",category:"Forms",content:'<label style="display: flex; align-items: center; gap: 8px; margin: 10px 0;"><input type="checkbox" style="width: 18px; height: 18px;" data-gjs-selectable="true" data-gjs-draggable="*" /><span>Checkbox label</span></label>'}),y.add("radio",{label:"Radio Button",category:"Forms",content:'<label style="display: flex; align-items: center; gap: 8px; margin: 10px 0;"><input type="radio" name="radio-group" style="width: 18px; height: 18px;" data-gjs-selectable="true" data-gjs-draggable="*" /><span>Radio option</span></label>'}),y.add("tabs",{label:"Tabs",category:"Advanced",content:'<div style="padding: 20px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="display: flex; border-bottom: 2px solid #e5e7eb; margin-bottom: 20px;"><button style="padding: 12px 24px; background: transparent; border: none; border-bottom: 2px solid #5e72e4; color: #5e72e4; font-weight: 600; cursor: pointer;" data-gjs-type="text" data-gjs-editable="true">Tab 1</button><button style="padding: 12px 24px; background: transparent; border: none; color: #6b7280; cursor: pointer;" data-gjs-type="text" data-gjs-editable="true">Tab 2</button><button style="padding: 12px 24px; background: transparent; border: none; color: #6b7280; cursor: pointer;" data-gjs-type="text" data-gjs-editable="true">Tab 3</button></div><div style="padding: 20px; min-height: 200px; background: #f9fafb; border-radius: 8px;" data-gjs-droppable="*">Tab content goes here</div></div>'}),y.add("accordion",{label:"Accordion",category:"Advanced",content:'<div style="padding: 20px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="border: 1px solid #e5e7eb; border-radius: 8px; margin-bottom: 10px; overflow: hidden;"><div style="padding: 16px; background: #f9fafb; border-bottom: 1px solid #e5e7eb; cursor: pointer; font-weight: 600; display: flex; justify-content: space-between; align-items: center;"><span data-gjs-type="text" data-gjs-editable="true">Accordion Item 1</span><span>‚ñº</span></div><div style="padding: 16px; background: #fff;" data-gjs-droppable="*">Content for accordion item 1</div></div><div style="border: 1px solid #e5e7eb; border-radius: 8px; margin-bottom: 10px; overflow: hidden;"><div style="padding: 16px; background: #f9fafb; cursor: pointer; font-weight: 600; display: flex; justify-content: space-between; align-items: center;"><span data-gjs-type="text" data-gjs-editable="true">Accordion Item 2</span><span>‚ñ∂</span></div></div></div>'}),y.add("card",{label:"Card",category:"Advanced",content:'<div style="border: 1px solid #e5e7eb; border-radius: 12px; overflow: hidden; background: #fff; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" data-gjs-selectable="true" data-gjs-droppable="*"><div style="padding: 20px; border-bottom: 1px solid #e5e7eb;"><h3 style="margin: 0; font-size: 20px; font-weight: 600; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Card Title</h3></div><div style="padding: 20px;"><p style="margin: 0; color: #495157; line-height: 1.6;" data-gjs-type="text" data-gjs-editable="true">Card content goes here. You can add any content inside this card.</p></div></div>'}),y.add("testimonial",{label:"Testimonial",category:"Advanced",content:'<div style="padding: 40px; background: #f9fafb; border-radius: 12px; text-align: center; max-width: 600px; margin: 0 auto;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="font-size: 24px; color: #5e72e4; margin-bottom: 20px;">"</div><p style="font-size: 18px; font-style: italic; color: #495157; line-height: 1.8; margin-bottom: 20px;" data-gjs-type="text" data-gjs-editable="true">This is a testimonial. You can edit this text to add your own testimonial content.</p><div style="margin-top: 20px;"><div style="width: 60px; height: 60px; border-radius: 50%; background: #5e72e4; margin: 0 auto 10px;"></div><div style="font-weight: 600; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Customer Name</div><div style="font-size: 14px; color: #6b7280;" data-gjs-type="text" data-gjs-editable="true">Company Name</div></div></div>'}),y.add("pricing-table",{label:"Pricing Table",category:"Advanced",content:'<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 30px; padding: 40px 20px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="border: 2px solid #e5e7eb; border-radius: 12px; padding: 30px; text-align: center; background: #fff;" data-gjs-droppable="*" data-gjs-selectable="true"><h3 style="font-size: 24px; margin-bottom: 10px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Basic</h3><div style="font-size: 48px; font-weight: 700; color: #5e72e4; margin: 20px 0;"><span data-gjs-type="text" data-gjs-editable="true">$29</span></div><ul style="list-style: none; padding: 0; margin: 20px 0; text-align: left;"><li style="padding: 10px 0; border-bottom: 1px solid #e5e7eb;" data-gjs-type="text" data-gjs-editable="true">Feature 1</li><li style="padding: 10px 0; border-bottom: 1px solid #e5e7eb;" data-gjs-type="text" data-gjs-editable="true">Feature 2</li><li style="padding: 10px 0;" data-gjs-type="text" data-gjs-editable="true">Feature 3</li></ul><button style="width: 100%; padding: 14px; background: #5e72e4; color: white; border: none; border-radius: 6px; font-weight: 600; cursor: pointer; margin-top: 20px;" data-gjs-type="text" data-gjs-editable="true">Get Started</button></div></div>'}),y.add("footer",{label:"Footer",category:"Layout",content:'<footer style="background: #1e1e1e; color: #ffffff; padding: 60px 40px 20px; margin-top: 80px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="max-width: 1200px; margin: 0 auto;"><div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 40px; margin-bottom: 40px; flex-wrap: wrap;" data-gjs-selectable="true" data-gjs-droppable="*"><div data-gjs-selectable="true" data-gjs-droppable="*"><h3 style="font-size: 18px; font-weight: 700; margin-bottom: 20px; color: #ffffff;" data-gjs-type="text" data-gjs-editable="true">Company</h3><ul style="list-style: none; padding: 0; margin: 0;"><li style="margin-bottom: 12px;"><a href="#" style="color: #9ca3af; text-decoration: none; font-size: 14px; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">About Us</a></li><li style="margin-bottom: 12px;"><a href="#" style="color: #9ca3af; text-decoration: none; font-size: 14px; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Careers</a></li><li style="margin-bottom: 12px;"><a href="#" style="color: #9ca3af; text-decoration: none; font-size: 14px; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Contact</a></li></ul></div><div data-gjs-selectable="true" data-gjs-droppable="*"><h3 style="font-size: 18px; font-weight: 700; margin-bottom: 20px; color: #ffffff;" data-gjs-type="text" data-gjs-editable="true">Products</h3><ul style="list-style: none; padding: 0; margin: 0;"><li style="margin-bottom: 12px;"><a href="#" style="color: #9ca3af; text-decoration: none; font-size: 14px; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Features</a></li><li style="margin-bottom: 12px;"><a href="#" style="color: #9ca3af; text-decoration: none; font-size: 14px; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Pricing</a></li><li style="margin-bottom: 12px;"><a href="#" style="color: #9ca3af; text-decoration: none; font-size: 14px; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">FAQ</a></li></ul></div><div data-gjs-selectable="true" data-gjs-droppable="*"><h3 style="font-size: 18px; font-weight: 700; margin-bottom: 20px; color: #ffffff;" data-gjs-type="text" data-gjs-editable="true">Legal</h3><ul style="list-style: none; padding: 0; margin: 0;"><li style="margin-bottom: 12px;"><a href="#" style="color: #9ca3af; text-decoration: none; font-size: 14px; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Privacy</a></li><li style="margin-bottom: 12px;"><a href="#" style="color: #9ca3af; text-decoration: none; font-size: 14px; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Terms</a></li><li style="margin-bottom: 12px;"><a href="#" style="color: #9ca3af; text-decoration: none; font-size: 14px; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Cookies</a></li></ul></div><div data-gjs-selectable="true" data-gjs-droppable="*"><h3 style="font-size: 18px; font-weight: 700; margin-bottom: 20px; color: #ffffff;" data-gjs-type="text" data-gjs-editable="true">Follow Us</h3><div style="display: flex; gap: 12px; margin-top: 20px;"><a href="#" style="width: 40px; height: 40px; background: #374151; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #ffffff; text-decoration: none; transition: background 0.3s;" data-gjs-type="text" data-gjs-editable="true">f</a><a href="#" style="width: 40px; height: 40px; background: #374151; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #ffffff; text-decoration: none; transition: background 0.3s;" data-gjs-type="text" data-gjs-editable="true">t</a><a href="#" style="width: 40px; height: 40px; background: #374151; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #ffffff; text-decoration: none; transition: background 0.3s;" data-gjs-type="text" data-gjs-editable="true">in</a></div></div></div><div style="border-top: 1px solid #374151; padding-top: 20px; text-align: center; color: #9ca3af; font-size: 14px;" data-gjs-selectable="true" data-gjs-droppable="*"><p style="margin: 0;" data-gjs-type="text" data-gjs-editable="true">¬© 2024 Your Company. All rights reserved.</p></div></div></footer>'}),y.add("hero-section",{label:"Hero Section",category:"Layout",content:'<section style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 100px 40px; text-align: center; color: #ffffff;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="max-width: 800px; margin: 0 auto;"><h1 style="font-size: 56px; font-weight: 800; margin-bottom: 24px; line-height: 1.2;" data-gjs-type="text" data-gjs-editable="true">Welcome to Our Platform</h1><p style="font-size: 20px; margin-bottom: 40px; line-height: 1.6; opacity: 0.9;" data-gjs-type="text" data-gjs-editable="true">Build amazing experiences with our powerful tools and features</p><div style="display: flex; gap: 16px; justify-content: center; flex-wrap: wrap;" data-gjs-selectable="true" data-gjs-droppable="*"><button style="padding: 16px 32px; background: #ffffff; color: #667eea; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: transform 0.3s;" data-gjs-type="text" data-gjs-editable="true">Get Started</button><button style="padding: 16px 32px; background: transparent; color: #ffffff; border: 2px solid #ffffff; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: transform 0.3s;" data-gjs-type="text" data-gjs-editable="true">Learn More</button></div></div></section>'}),y.add("feature-section",{label:"Feature Section",category:"Layout",content:'<section style="padding: 80px 40px; background: #f9fafb;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="max-width: 1200px; margin: 0 auto;"><h2 style="text-align: center; font-size: 42px; font-weight: 700; margin-bottom: 16px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Our Features</h2><p style="text-align: center; font-size: 18px; color: #6b7280; margin-bottom: 60px; max-width: 600px; margin-left: auto; margin-right: auto;" data-gjs-type="text" data-gjs-editable="true">Everything you need to build amazing websites</p><div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 40px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="text-align: center; padding: 40px 20px; background: #ffffff; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);" data-gjs-selectable="true" data-gjs-droppable="*"><div style="width: 64px; height: 64px; background: #5e72e4; border-radius: 12px; margin: 0 auto 24px; display: flex; align-items: center; justify-content: center; color: white; font-size: 32px;">‚ö°</div><h3 style="font-size: 24px; font-weight: 600; margin-bottom: 12px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Fast Performance</h3><p style="color: #6b7280; line-height: 1.6;" data-gjs-type="text" data-gjs-editable="true">Lightning-fast loading times for better user experience</p></div><div style="text-align: center; padding: 40px 20px; background: #ffffff; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);" data-gjs-selectable="true" data-gjs-droppable="*"><div style="width: 64px; height: 64px; background: #10b981; border-radius: 12px; margin: 0 auto 24px; display: flex; align-items: center; justify-content: center; color: white; font-size: 32px;">üîí</div><h3 style="font-size: 24px; font-weight: 600; margin-bottom: 12px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Secure</h3><p style="color: #6b7280; line-height: 1.6;" data-gjs-type="text" data-gjs-editable="true">Enterprise-grade security to protect your data</p></div><div style="text-align: center; padding: 40px 20px; background: #ffffff; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);" data-gjs-selectable="true" data-gjs-droppable="*"><div style="width: 64px; height: 64px; background: #f59e0b; border-radius: 12px; margin: 0 auto 24px; display: flex; align-items: center; justify-content: center; color: white; font-size: 32px;">üì±</div><h3 style="font-size: 24px; font-weight: 600; margin-bottom: 12px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Responsive</h3><p style="color: #6b7280; line-height: 1.6;" data-gjs-type="text" data-gjs-editable="true">Works perfectly on all devices and screen sizes</p></div></div></div></section>'}),y.add("team-section",{label:"Team Section",category:"Advanced",content:'<section style="padding: 80px 40px; background: #ffffff;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="max-width: 1200px; margin: 0 auto;"><h2 style="text-align: center; font-size: 42px; font-weight: 700; margin-bottom: 16px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Our Team</h2><p style="text-align: center; font-size: 18px; color: #6b7280; margin-bottom: 60px;" data-gjs-type="text" data-gjs-editable="true">Meet the talented people behind our success</p><div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 30px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="text-align: center;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="width: 200px; height: 200px; border-radius: 50%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; color: white; font-size: 64px; font-weight: 700;">JD</div><h3 style="font-size: 20px; font-weight: 600; margin-bottom: 8px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">John Doe</h3><p style="color: #6b7280; margin-bottom: 12px;" data-gjs-type="text" data-gjs-editable="true">CEO & Founder</p><div style="display: flex; gap: 12px; justify-content: center;"><a href="#" style="color: #6b7280; text-decoration: none;" data-gjs-type="text" data-gjs-editable="true">in</a><a href="#" style="color: #6b7280; text-decoration: none;" data-gjs-type="text" data-gjs-editable="true">@</a></div></div><div style="text-align: center;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="width: 200px; height: 200px; border-radius: 50%; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; color: white; font-size: 64px; font-weight: 700;">JS</div><h3 style="font-size: 20px; font-weight: 600; margin-bottom: 8px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Jane Smith</h3><p style="color: #6b7280; margin-bottom: 12px;" data-gjs-type="text" data-gjs-editable="true">CTO</p><div style="display: flex; gap: 12px; justify-content: center;"><a href="#" style="color: #6b7280; text-decoration: none;" data-gjs-type="text" data-gjs-editable="true">in</a><a href="#" style="color: #6b7280; text-decoration: none;" data-gjs-type="text" data-gjs-editable="true">@</a></div></div><div style="text-align: center;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="width: 200px; height: 200px; border-radius: 50%; background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; color: white; font-size: 64px; font-weight: 700;">MJ</div><h3 style="font-size: 20px; font-weight: 600; margin-bottom: 8px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Mike Johnson</h3><p style="color: #6b7280; margin-bottom: 12px;" data-gjs-type="text" data-gjs-editable="true">Designer</p><div style="display: flex; gap: 12px; justify-content: center;"><a href="#" style="color: #6b7280; text-decoration: none;" data-gjs-type="text" data-gjs-editable="true">in</a><a href="#" style="color: #6b7280; text-decoration: none;" data-gjs-type="text" data-gjs-editable="true">@</a></div></div><div style="text-align: center;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="width: 200px; height: 200px; border-radius: 50%; background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; color: white; font-size: 64px; font-weight: 700;">SW</div><h3 style="font-size: 20px; font-weight: 600; margin-bottom: 8px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Sarah Williams</h3><p style="color: #6b7280; margin-bottom: 12px;" data-gjs-type="text" data-gjs-editable="true">Developer</p><div style="display: flex; gap: 12px; justify-content: center;"><a href="#" style="color: #6b7280; text-decoration: none;" data-gjs-type="text" data-gjs-editable="true">in</a><a href="#" style="color: #6b7280; text-decoration: none;" data-gjs-type="text" data-gjs-editable="true">@</a></div></div></div></div></section>'}),y.add("faq-section",{label:"FAQ Section",category:"Advanced",content:'<section style="padding: 80px 40px; background: #f9fafb;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="max-width: 800px; margin: 0 auto;"><h2 style="text-align: center; font-size: 42px; font-weight: 700; margin-bottom: 16px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Frequently Asked Questions</h2><p style="text-align: center; font-size: 18px; color: #6b7280; margin-bottom: 60px;" data-gjs-type="text" data-gjs-editable="true">Everything you need to know</p><div style="display: flex; flex-direction: column; gap: 16px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="background: #ffffff; border-radius: 12px; padding: 24px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);" data-gjs-selectable="true" data-gjs-droppable="*"><div style="display: flex; justify-content: space-between; align-items: center; cursor: pointer;"><h3 style="font-size: 18px; font-weight: 600; color: #1e1e1e; margin: 0;" data-gjs-type="text" data-gjs-editable="true">What is your return policy?</h3><span style="font-size: 24px; color: #6b7280;">+</span></div><p style="margin-top: 16px; color: #6b7280; line-height: 1.6; display: none;" data-gjs-type="text" data-gjs-editable="true">We offer a 30-day money-back guarantee on all our products.</p></div><div style="background: #ffffff; border-radius: 12px; padding: 24px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);" data-gjs-selectable="true" data-gjs-droppable="*"><div style="display: flex; justify-content: space-between; align-items: center; cursor: pointer;"><h3 style="font-size: 18px; font-weight: 600; color: #1e1e1e; margin: 0;" data-gjs-type="text" data-gjs-editable="true">How do I cancel my subscription?</h3><span style="font-size: 24px; color: #6b7280;">+</span></div><p style="margin-top: 16px; color: #6b7280; line-height: 1.6; display: none;" data-gjs-type="text" data-gjs-editable="true">You can cancel your subscription anytime from your account settings.</p></div><div style="background: #ffffff; border-radius: 12px; padding: 24px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);" data-gjs-selectable="true" data-gjs-droppable="*"><div style="display: flex; justify-content: space-between; align-items: center; cursor: pointer;"><h3 style="font-size: 18px; font-weight: 600; color: #1e1e1e; margin: 0;" data-gjs-type="text" data-gjs-editable="true">Do you offer customer support?</h3><span style="font-size: 24px; color: #6b7280;">+</span></div><p style="margin-top: 16px; color: #6b7280; line-height: 1.6; display: none;" data-gjs-type="text" data-gjs-editable="true">Yes, we offer 24/7 customer support via email and live chat.</p></div></div></div></section>'}),y.add("blog-card",{label:"Blog Post Card",category:"Advanced",content:'<div style="border: 1px solid #e5e7eb; border-radius: 12px; overflow: hidden; background: #ffffff; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: transform 0.3s;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="width: 100%; height: 200px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); position: relative;" data-gjs-selectable="true"><div style="position: absolute; top: 16px; left: 16px; background: rgba(255,255,255,0.9); padding: 6px 12px; border-radius: 6px; font-size: 12px; font-weight: 600; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Category</div></div><div style="padding: 24px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px; font-size: 14px; color: #6b7280;"><span data-gjs-type="text" data-gjs-editable="true">Jan 15, 2024</span><span>‚Ä¢</span><span data-gjs-type="text" data-gjs-editable="true">5 min read</span></div><h3 style="font-size: 24px; font-weight: 700; margin-bottom: 12px; color: #1e1e1e; line-height: 1.3;" data-gjs-type="text" data-gjs-editable="true">Blog Post Title</h3><p style="color: #6b7280; line-height: 1.6; margin-bottom: 20px;" data-gjs-type="text" data-gjs-editable="true">This is a preview of the blog post content. You can edit this text to add your own content.</p><a href="#" style="color: #5e72e4; text-decoration: none; font-weight: 600; font-size: 14px;" data-gjs-type="text" data-gjs-editable="true">Read More ‚Üí</a></div></div>'});const Be='<div style="border: 1px solid #e5e7eb; border-radius: 12px; overflow: hidden; background: #ffffff; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: transform 0.3s;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="width: 100%; height: 250px; background: #f3f4f6; position: relative; display: flex; align-items: center; justify-content: center;" data-gjs-selectable="true"><div style="width: 150px; height: 150px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px;"></div><div style="position: absolute; top: 12px; right: 12px; background: #ffffff; width: 36px; height: 36px; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 4px rgba(0,0,0,0.1); cursor: pointer;">‚ô°</div></div><div style="padding: 20px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;"><span style="background: #fef3c7; color: #92400e; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: 600;" data-gjs-type="text" data-gjs-editable="true">New</span><span style="color: #6b7280; font-size: 14px;" data-gjs-type="text" data-gjs-editable="true">In Stock</span></div><h3 style="font-size: 20px; font-weight: 600; margin-bottom: 8px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Product Name</h3><p style="color: #6b7280; font-size: 14px; margin-bottom: 16px; line-height: 1.5;" data-gjs-type="text" data-gjs-editable="true">Product description goes here</p><div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;"><div><span style="font-size: 24px; font-weight: 700; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">$99</span><span style="font-size: 16px; color: #9ca3af; text-decoration: line-through; margin-left: 8px;" data-gjs-type="text" data-gjs-editable="true">$149</span></div><div style="color: #f59e0b; font-size: 14px;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div></div><button style="width: 100%; padding: 12px; background: #5e72e4; color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer;" data-gjs-type="text" data-gjs-editable="true">Add to Cart</button></div></div>';y.add("product-card",{label:"Product Card",category:"Advanced",content:Be,activate:!0}),t.on("block:drag:stop",r=>{r&&r.get&&r.get("id")==="product-card"&&setTimeout(()=>{const d=t.getSelected();let u=null;const h=t.getWrapper();if(h){const A=h.components();A&&A.length>0&&(u=A.at(-1))}const f=prompt("How many product cards would you like to add?","1");if(!f){u&&u.remove();return}const S=parseInt(f,10);if(isNaN(S)||S<1){alert("Please enter a valid number greater than 0"),u&&u.remove();return}if(S>50&&!window.confirm(`You're about to add ${S} product cards. This might slow down the editor. Continue?`)){u&&u.remove();return}const j=t.getWrapper(),v=t.getSelected();let L=j;if(v&&v.get&&v.get("type")!=="wrapper")if(v.get("droppable")||v.getAttributes?.()?.["data-gjs-droppable"]==="*")L=v;else try{const q=v.parent();q&&q.get&&q.get("type")!=="wrapper"&&(q.get("droppable")||q.getAttributes?.()?.["data-gjs-droppable"]==="*")&&(L=q)}catch{}u&&u.remove&&u.remove();const T=L.components().add('<div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 24px; padding: 20px;" data-gjs-droppable="*" data-gjs-selectable="true"></div>'),I=Array.isArray(T)?T[0]:T;if(!I||typeof I.set!="function"){console.error("Failed to create container");return}I.set({selectable:!0,hoverable:!0,draggable:!0,stylable:!0,droppable:"*"},{silent:!0});for(let A=0;A<S;A++){const q=I.components().add(Be),R=Array.isArray(q)?q[0]:q;if(R&&typeof R.set=="function"&&(R.set({selectable:!0,hoverable:!0,draggable:!0,stylable:!0,droppable:!1},{silent:!0}),t.CssComposer&&R.cid)){let F=(R.getClasses?R.getClasses():[]).find(M=>M&&!M.startsWith("gjs-"));!F&&R.addClass&&(F=`gjs-comp-${R.cid}`,R.addClass(F))}}t.select(I),console.log(`‚úÖ Added ${S} product card${S>1?"s":""} to the page`)},100)}),y.add("stats-section",{label:"Stats Section",category:"Advanced",content:'<section style="padding: 80px 40px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #ffffff;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="max-width: 1200px; margin: 0 auto;"><div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 40px; text-align: center;" data-gjs-selectable="true" data-gjs-droppable="*"><div data-gjs-selectable="true" data-gjs-droppable="*"><div style="font-size: 56px; font-weight: 800; margin-bottom: 12px;" data-gjs-type="text" data-gjs-editable="true">10K+</div><div style="font-size: 18px; opacity: 0.9;" data-gjs-type="text" data-gjs-editable="true">Active Users</div></div><div data-gjs-selectable="true" data-gjs-droppable="*"><div style="font-size: 56px; font-weight: 800; margin-bottom: 12px;" data-gjs-type="text" data-gjs-editable="true">500+</div><div style="font-size: 18px; opacity: 0.9;" data-gjs-type="text" data-gjs-editable="true">Projects</div></div><div data-gjs-selectable="true" data-gjs-droppable="*"><div style="font-size: 56px; font-weight: 800; margin-bottom: 12px;" data-gjs-type="text" data-gjs-editable="true">98%</div><div style="font-size: 18px; opacity: 0.9;" data-gjs-type="text" data-gjs-editable="true">Satisfaction</div></div><div data-gjs-selectable="true" data-gjs-droppable="*"><div style="font-size: 56px; font-weight: 800; margin-bottom: 12px;" data-gjs-type="text" data-gjs-editable="true">24/7</div><div style="font-size: 18px; opacity: 0.9;" data-gjs-type="text" data-gjs-editable="true">Support</div></div></div></div></section>'}),y.add("cta-section",{label:"Call to Action",category:"Layout",content:'<section style="padding: 80px 40px; background: #5e72e4; color: #ffffff; text-align: center;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="max-width: 800px; margin: 0 auto;"><h2 style="font-size: 42px; font-weight: 700; margin-bottom: 20px; line-height: 1.2;" data-gjs-type="text" data-gjs-editable="true">Ready to Get Started?</h2><p style="font-size: 20px; margin-bottom: 40px; opacity: 0.9; line-height: 1.6;" data-gjs-type="text" data-gjs-editable="true">Join thousands of satisfied customers and start building today</p><div style="display: flex; gap: 16px; justify-content: center; flex-wrap: wrap;" data-gjs-selectable="true" data-gjs-droppable="*"><button style="padding: 16px 40px; background: #ffffff; color: #5e72e4; border: none; border-radius: 8px; font-size: 18px; font-weight: 600; cursor: pointer; transition: transform 0.3s;" data-gjs-type="text" data-gjs-editable="true">Start Free Trial</button><button style="padding: 16px 40px; background: transparent; color: #ffffff; border: 2px solid #ffffff; border-radius: 8px; font-size: 18px; font-weight: 600; cursor: pointer; transition: transform 0.3s;" data-gjs-type="text" data-gjs-editable="true">Contact Sales</button></div></div></section>'}),y.add("social-links",{label:"Social Media Links",category:"Basic",content:'<div style="padding: 30px; text-align: center;" data-gjs-selectable="true" data-gjs-droppable="*"><h3 style="font-size: 20px; font-weight: 600; margin-bottom: 20px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Follow Us</h3><div style="display: flex; gap: 16px; justify-content: center; flex-wrap: wrap;" data-gjs-selectable="true" data-gjs-droppable="*"><a href="#" style="width: 50px; height: 50px; background: #1877f2; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #ffffff; text-decoration: none; font-size: 24px; font-weight: 700; transition: transform 0.3s;" data-gjs-type="text" data-gjs-editable="true">f</a><a href="#" style="width: 50px; height: 50px; background: #1da1f2; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #ffffff; text-decoration: none; font-size: 24px; font-weight: 700; transition: transform 0.3s;" data-gjs-type="text" data-gjs-editable="true">t</a><a href="#" style="width: 50px; height: 50px; background: #0077b5; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #ffffff; text-decoration: none; font-size: 24px; font-weight: 700; transition: transform 0.3s;" data-gjs-type="text" data-gjs-editable="true">in</a><a href="#" style="width: 50px; height: 50px; background: #e4405f; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #ffffff; text-decoration: none; font-size: 24px; font-weight: 700; transition: transform 0.3s;" data-gjs-type="text" data-gjs-editable="true">ig</a><a href="#" style="width: 50px; height: 50px; background: #ff0000; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #ffffff; text-decoration: none; font-size: 24px; font-weight: 700; transition: transform 0.3s;" data-gjs-type="text" data-gjs-editable="true">yt</a></div></div>'}),y.add("breadcrumbs",{label:"Breadcrumbs",category:"Basic",content:'<nav style="padding: 20px 40px; background: #f9fafb; border-bottom: 1px solid #e5e7eb;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="max-width: 1200px; margin: 0 auto;"><div style="display: flex; align-items: center; gap: 8px; font-size: 14px; color: #6b7280;" data-gjs-selectable="true" data-gjs-droppable="*"><a href="#" style="color: #5e72e4; text-decoration: none;" data-gjs-type="text" data-gjs-editable="true">Home</a><span>/</span><a href="#" style="color: #5e72e4; text-decoration: none;" data-gjs-type="text" data-gjs-editable="true">Category</a><span>/</span><span style="color: #1e1e1e; font-weight: 500;" data-gjs-type="text" data-gjs-editable="true">Current Page</span></div></div></nav>'}),y.add("sidebar",{label:"Sidebar",category:"Layout",content:'<aside style="background: #f9fafb; padding: 30px; border-radius: 12px; min-height: 400px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="margin-bottom: 30px;" data-gjs-selectable="true" data-gjs-droppable="*"><h3 style="font-size: 20px; font-weight: 700; margin-bottom: 16px; color: #1e1e1e; border-bottom: 2px solid #e5e7eb; padding-bottom: 12px;" data-gjs-type="text" data-gjs-editable="true">Categories</h3><ul style="list-style: none; padding: 0; margin: 0;"><li style="margin-bottom: 12px;"><a href="#" style="color: #6b7280; text-decoration: none; font-size: 14px; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Category 1</a></li><li style="margin-bottom: 12px;"><a href="#" style="color: #6b7280; text-decoration: none; font-size: 14px; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Category 2</a></li><li style="margin-bottom: 12px;"><a href="#" style="color: #6b7280; text-decoration: none; font-size: 14px; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Category 3</a></li></ul></div><div style="margin-bottom: 30px;" data-gjs-selectable="true" data-gjs-droppable="*"><h3 style="font-size: 20px; font-weight: 700; margin-bottom: 16px; color: #1e1e1e; border-bottom: 2px solid #e5e7eb; padding-bottom: 12px;" data-gjs-type="text" data-gjs-editable="true">Recent Posts</h3><div style="margin-bottom: 16px; padding-bottom: 16px; border-bottom: 1px solid #e5e7eb;"><a href="#" style="color: #1e1e1e; text-decoration: none; font-weight: 600; font-size: 14px; display: block; margin-bottom: 8px;" data-gjs-type="text" data-gjs-editable="true">Recent Post Title</a><span style="color: #6b7280; font-size: 12px;" data-gjs-type="text" data-gjs-editable="true">Jan 15, 2024</span></div><div style="margin-bottom: 16px; padding-bottom: 16px; border-bottom: 1px solid #e5e7eb;"><a href="#" style="color: #1e1e1e; text-decoration: none; font-weight: 600; font-size: 14px; display: block; margin-bottom: 8px;" data-gjs-type="text" data-gjs-editable="true">Another Post Title</a><span style="color: #6b7280; font-size: 12px;" data-gjs-type="text" data-gjs-editable="true">Jan 10, 2024</span></div></div><div data-gjs-selectable="true" data-gjs-droppable="*"><h3 style="font-size: 20px; font-weight: 700; margin-bottom: 16px; color: #1e1e1e; border-bottom: 2px solid #e5e7eb; padding-bottom: 12px;" data-gjs-type="text" data-gjs-editable="true">Tags</h3><div style="display: flex; flex-wrap: wrap; gap: 8px;"><span style="background: #e5e7eb; color: #1e1e1e; padding: 6px 12px; border-radius: 6px; font-size: 12px; font-weight: 500;" data-gjs-type="text" data-gjs-editable="true">Tag 1</span><span style="background: #e5e7eb; color: #1e1e1e; padding: 6px 12px; border-radius: 6px; font-size: 12px; font-weight: 500;" data-gjs-type="text" data-gjs-editable="true">Tag 2</span><span style="background: #e5e7eb; color: #1e1e1e; padding: 6px 12px; border-radius: 6px; font-size: 12px; font-weight: 500;" data-gjs-type="text" data-gjs-editable="true">Tag 3</span></div></div></aside>'}),y.add("progress-bar",{label:"Progress Bar",category:"Advanced",content:'<div class="ziplofy-progress-bar" style="padding: 30px; background: #ffffff; border-radius: 12px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="margin-bottom: 20px;"><div style="display: flex; justify-content: space-between; margin-bottom: 8px;"><span class="progress-label" style="font-size: 14px; font-weight: 600; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Skill Name</span><span class="progress-percentage" style="font-size: 14px; font-weight: 600; color: #5e72e4;" data-gjs-type="text" data-gjs-editable="true">75%</span></div><div class="progress-bar-container" style="width: 100%; height: 12px; background: #e5e7eb; border-radius: 6px; overflow: hidden;"><div class="progress-bar-fill" style="width: 75%; height: 100%; background: linear-gradient(90deg, #5e72e4 0%, #667eea 100%); border-radius: 6px; transition: width 0.3s ease;"></div></div></div></div>'}),y.add("counter",{label:"Counter",category:"Advanced",content:'<div style="text-align: center; padding: 40px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 16px; color: #ffffff;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="font-size: 64px; font-weight: 800; margin-bottom: 12px; line-height: 1;" data-gjs-type="text" data-gjs-editable="true">1,234</div><div style="font-size: 20px; font-weight: 500; opacity: 0.9;" data-gjs-type="text" data-gjs-editable="true">Total Users</div></div>'}),y.add("image-carousel",{label:"Image Carousel",category:"Media",content:'<div style="position: relative; padding: 20px; background: #ffffff; border-radius: 12px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="display: flex; gap: 16px; overflow-x: auto; scroll-snap-type: x mandatory; scrollbar-width: none; -ms-overflow-style: none;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="min-width: 300px; scroll-snap-align: start; flex-shrink: 0;" data-gjs-selectable="true"><img src="https://via.placeholder.com/600x400/667eea/ffffff?text=Slide+1" alt="Carousel Image" style="width: 100%; height: auto; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);" /></div><div style="min-width: 300px; scroll-snap-align: start; flex-shrink: 0;" data-gjs-selectable="true"><img src="https://via.placeholder.com/600x400/764ba2/ffffff?text=Slide+2" alt="Carousel Image" style="width: 100%; height: auto; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);" /></div><div style="min-width: 300px; scroll-snap-align: start; flex-shrink: 0;" data-gjs-selectable="true"><img src="https://via.placeholder.com/600x400/f093fb/ffffff?text=Slide+3" alt="Carousel Image" style="width: 100%; height: auto; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);" /></div></div><div style="display: flex; justify-content: center; gap: 8px; margin-top: 16px;"><div style="width: 12px; height: 12px; border-radius: 50%; background: #5e72e4;"></div><div style="width: 12px; height: 12px; border-radius: 50%; background: #e5e7eb;"></div><div style="width: 12px; height: 12px; border-radius: 50%; background: #e5e7eb;"></div></div></div>'}),y.add("card-hover",{label:"Card Hover",category:"Advanced",content:'<div style="border: 1px solid #e5e7eb; border-radius: 16px; overflow: hidden; background: #ffffff; box-shadow: 0 4px 6px rgba(0,0,0,0.1); transition: transform 0.3s ease, box-shadow 0.3s ease; cursor: pointer;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="width: 100%; height: 200px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); position: relative; overflow: hidden;" data-gjs-selectable="true"><div style="position: absolute; top: 16px; right: 16px; background: rgba(255,255,255,0.2); backdrop-filter: blur(10px); padding: 8px 16px; border-radius: 20px; font-size: 12px; font-weight: 600; color: #ffffff;" data-gjs-type="text" data-gjs-editable="true">Featured</div></div><div style="padding: 24px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px;"><span style="background: #fef3c7; color: #92400e; padding: 4px 12px; border-radius: 6px; font-size: 12px; font-weight: 600;" data-gjs-type="text" data-gjs-editable="true">Category</span><span style="color: #6b7280; font-size: 12px;" data-gjs-type="text" data-gjs-editable="true">Jan 15, 2024</span></div><h3 style="font-size: 24px; font-weight: 700; margin-bottom: 12px; color: #1e1e1e; line-height: 1.3;" data-gjs-type="text" data-gjs-editable="true">Card Title</h3><p style="color: #6b7280; line-height: 1.6; margin-bottom: 20px;" data-gjs-type="text" data-gjs-editable="true">This is an advanced card with hover effects. Edit this content to customize.</p><a href="#" style="color: #5e72e4; text-decoration: none; font-weight: 600; font-size: 14px; display: inline-flex; align-items: center; gap: 8px;" data-gjs-type="text" data-gjs-editable="true">Learn More ‚Üí</a></div></div>'}),y.add("timeline",{label:"Timeline",category:"Advanced",content:'<div style="padding: 40px; background: #ffffff; position: relative;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="position: relative; padding-left: 40px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="position: absolute; left: 0; top: 0; bottom: 0; width: 2px; background: #e5e7eb;"></div><div style="position: relative; margin-bottom: 40px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="position: absolute; left: -32px; top: 0; width: 16px; height: 16px; border-radius: 50%; background: #5e72e4; border: 3px solid #ffffff; box-shadow: 0 0 0 2px #5e72e4;"></div><div style="background: #f9fafb; padding: 24px; border-radius: 12px; border-left: 3px solid #5e72e4;"><div style="font-size: 14px; font-weight: 600; color: #5e72e4; margin-bottom: 8px;" data-gjs-type="text" data-gjs-editable="true">2024</div><h3 style="font-size: 20px; font-weight: 700; margin-bottom: 8px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Event Title</h3><p style="color: #6b7280; line-height: 1.6;" data-gjs-type="text" data-gjs-editable="true">Event description goes here. You can edit this text.</p></div></div><div style="position: relative; margin-bottom: 40px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="position: absolute; left: -32px; top: 0; width: 16px; height: 16px; border-radius: 50%; background: #10b981; border: 3px solid #ffffff; box-shadow: 0 0 0 2px #10b981;"></div><div style="background: #f9fafb; padding: 24px; border-radius: 12px; border-left: 3px solid #10b981;"><div style="font-size: 14px; font-weight: 600; color: #10b981; margin-bottom: 8px;" data-gjs-type="text" data-gjs-editable="true">2023</div><h3 style="font-size: 20px; font-weight: 700; margin-bottom: 8px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Another Event</h3><p style="color: #6b7280; line-height: 1.6;" data-gjs-type="text" data-gjs-editable="true">Another event description. Customize as needed.</p></div></div></div></div>'}),y.add("testimonials-slider",{label:"Testimonials Slider",category:"Advanced",content:'<section style="padding: 80px 40px; background: #f9fafb;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="max-width: 1200px; margin: 0 auto;"><h2 style="text-align: center; font-size: 42px; font-weight: 700; margin-bottom: 60px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">What Our Clients Say</h2><div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 30px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="background: #ffffff; padding: 32px; border-radius: 16px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);" data-gjs-selectable="true" data-gjs-droppable="*"><div style="color: #f59e0b; font-size: 20px; margin-bottom: 16px;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div><p style="font-size: 16px; line-height: 1.7; color: #495157; margin-bottom: 24px; font-style: italic;" data-gjs-type="text" data-gjs-editable="true">"Excellent service and amazing results. Highly recommended!"</p><div style="display: flex; align-items: center; gap: 16px;"><div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 20px;">JD</div><div><div style="font-weight: 600; color: #1e1e1e; margin-bottom: 4px;" data-gjs-type="text" data-gjs-editable="true">John Doe</div><div style="font-size: 14px; color: #6b7280;" data-gjs-type="text" data-gjs-editable="true">CEO, Company</div></div></div></div><div style="background: #ffffff; padding: 32px; border-radius: 16px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);" data-gjs-selectable="true" data-gjs-droppable="*"><div style="color: #f59e0b; font-size: 20px; margin-bottom: 16px;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div><p style="font-size: 16px; line-height: 1.7; color: #495157; margin-bottom: 24px; font-style: italic;" data-gjs-type="text" data-gjs-editable="true">"Outstanding quality and professional team. Very satisfied!"</p><div style="display: flex; align-items: center; gap: 16px;"><div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 20px;">JS</div><div><div style="font-weight: 600; color: #1e1e1e; margin-bottom: 4px;" data-gjs-type="text" data-gjs-editable="true">Jane Smith</div><div style="font-size: 14px; color: #6b7280;" data-gjs-type="text" data-gjs-editable="true">CTO, Tech Corp</div></div></div></div><div style="background: #ffffff; padding: 32px; border-radius: 16px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);" data-gjs-selectable="true" data-gjs-droppable="*"><div style="color: #f59e0b; font-size: 20px; margin-bottom: 16px;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div><p style="font-size: 16px; line-height: 1.7; color: #495157; margin-bottom: 24px; font-style: italic;" data-gjs-type="text" data-gjs-editable="true">"Best decision we made. Exceeded all expectations!"</p><div style="display: flex; align-items: center; gap: 16px;"><div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 20px;">MJ</div><div><div style="font-weight: 600; color: #1e1e1e; margin-bottom: 4px;" data-gjs-type="text" data-gjs-editable="true">Mike Johnson</div><div style="font-size: 14px; color: #6b7280;" data-gjs-type="text" data-gjs-editable="true">Founder, Startup</div></div></div></div></div></div></section>'}),y.add("modal",{label:"Modal Popup",category:"Advanced",content:'<div style="padding: 20px; text-align: center;" data-gjs-selectable="true" data-gjs-droppable="*"><button style="padding: 14px 32px; background: #5e72e4; color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s;" data-gjs-type="text" data-gjs-editable="true">Open Modal</button><div style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="background: #ffffff; padding: 40px; border-radius: 16px; max-width: 500px; width: 90%; position: relative; box-shadow: 0 20px 60px rgba(0,0,0,0.3);" data-gjs-selectable="true" data-gjs-droppable="*"><button style="position: absolute; top: 16px; right: 16px; background: transparent; border: none; font-size: 24px; cursor: pointer; color: #6b7280; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: background 0.3s;">√ó</button><h2 style="font-size: 28px; font-weight: 700; margin-bottom: 16px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Modal Title</h2><p style="color: #6b7280; line-height: 1.6; margin-bottom: 24px;" data-gjs-type="text" data-gjs-editable="true">This is a modal popup. You can customize the content and styling.</p><button style="padding: 12px 24px; background: #5e72e4; color: white; border: none; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer;" data-gjs-type="text" data-gjs-editable="true">Close</button></div></div></div>'}),y.add("countdown-timer",{label:"Countdown Timer",category:"Advanced",content:'<div class="ziplofy-countdown-timer" data-countdown-days="30" data-countdown-hours="12" data-countdown-minutes="45" data-countdown-seconds="30" style="padding: 40px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 16px; text-align: center; color: #ffffff;" data-gjs-selectable="true" data-gjs-droppable="*"><h2 style="font-size: 32px; font-weight: 700; margin-bottom: 32px;" data-gjs-type="text" data-gjs-editable="true">Limited Time Offer</h2><div style="display: flex; justify-content: center; gap: 20px; flex-wrap: wrap;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="background: rgba(255,255,255,0.2); backdrop-filter: blur(10px); padding: 20px; border-radius: 12px; min-width: 100px;"><div class="countdown-days" style="font-size: 48px; font-weight: 800; line-height: 1;">30</div><div style="font-size: 14px; margin-top: 8px; opacity: 0.9;">Days</div></div><div style="background: rgba(255,255,255,0.2); backdrop-filter: blur(10px); padding: 20px; border-radius: 12px; min-width: 100px;"><div class="countdown-hours" style="font-size: 48px; font-weight: 800; line-height: 1;">12</div><div style="font-size: 14px; margin-top: 8px; opacity: 0.9;">Hours</div></div><div style="background: rgba(255,255,255,0.2); backdrop-filter: blur(10px); padding: 20px; border-radius: 12px; min-width: 100px;"><div class="countdown-minutes" style="font-size: 48px; font-weight: 800; line-height: 1;">45</div><div style="font-size: 14px; margin-top: 8px; opacity: 0.9;">Minutes</div></div><div style="background: rgba(255,255,255,0.2); backdrop-filter: blur(10px); padding: 20px; border-radius: 12px; min-width: 100px;"><div class="countdown-seconds" style="font-size: 48px; font-weight: 800; line-height: 1;">30</div><div style="font-size: 14px; margin-top: 8px; opacity: 0.9;">Seconds</div></div></div></div>'}),y.add("button-icon",{label:"Button with Icon",category:"Buttons",content:'<div style="padding: 20px; text-align: center;" data-gjs-selectable="true" data-gjs-droppable="*"><button style="display: inline-flex; align-items: center; gap: 12px; padding: 14px 32px; background: #5e72e4; color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s; box-shadow: 0 4px 6px rgba(94,114,228,0.3);" data-gjs-type="text" data-gjs-editable="true"><span style="font-size: 20px;">‚Üí</span><span>Get Started</span></button></div>'}),y.add("video-background",{label:"Video Background",category:"Media",content:'<section style="position: relative; height: 500px; overflow: hidden; display: flex; align-items: center; justify-content: center; color: #ffffff;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); z-index: 1;"></div><div style="position: relative; z-index: 2; text-align: center; padding: 40px; max-width: 800px;" data-gjs-selectable="true" data-gjs-droppable="*"><h1 style="font-size: 56px; font-weight: 800; margin-bottom: 24px; line-height: 1.2; text-shadow: 0 2px 10px rgba(0,0,0,0.3);" data-gjs-type="text" data-gjs-editable="true">Video Background Section</h1><p style="font-size: 20px; margin-bottom: 40px; opacity: 0.95; line-height: 1.6; text-shadow: 0 2px 10px rgba(0,0,0,0.3);" data-gjs-type="text" data-gjs-editable="true">Add your video background here. This section supports video backgrounds.</p><button style="padding: 16px 40px; background: #ffffff; color: #5e72e4; border: none; border-radius: 8px; font-size: 18px; font-weight: 600; cursor: pointer; transition: transform 0.3s; box-shadow: 0 4px 20px rgba(0,0,0,0.2);" data-gjs-type="text" data-gjs-editable="true">Watch Video</button></div></section>'}),y.add("parallax-section",{label:"Parallax Section",category:"Layout",content:`<section class="ziplofy-parallax-section" style="position: relative; min-height: 600px; overflow: hidden; display: flex; align-items: center; justify-content: center;" data-gjs-selectable="true" data-gjs-droppable="*"><div class="parallax-background" style="position: absolute; top: -20%; left: 0; width: 100%; height: 140%; background-image: linear-gradient(135deg, rgba(102,126,234,0.9) 0%, rgba(118,75,162,0.9) 100%), url('https://via.placeholder.com/1920x1080'); background-size: cover; background-position: center; background-repeat: no-repeat; will-change: transform; transform: translateZ(0);"></div><div class="parallax-content" style="position: relative; z-index: 2; text-align: center; color: #ffffff; padding: 80px 40px; max-width: 800px;" data-gjs-selectable="true" data-gjs-droppable="*"><h1 style="font-size: 56px; font-weight: 800; margin-bottom: 24px; line-height: 1.2; text-shadow: 0 4px 20px rgba(0,0,0,0.3);" data-gjs-type="text" data-gjs-editable="true">Parallax Effect</h1><p style="font-size: 20px; margin-bottom: 40px; line-height: 1.6; opacity: 0.95; text-shadow: 0 2px 10px rgba(0,0,0,0.3);" data-gjs-type="text" data-gjs-editable="true">Create stunning parallax scrolling effects with this section.</p><button style="padding: 16px 40px; background: #ffffff; color: #5e72e4; border: none; border-radius: 8px; font-size: 18px; font-weight: 600; cursor: pointer; transition: transform 0.3s; box-shadow: 0 4px 20px rgba(0,0,0,0.2);" data-gjs-type="text" data-gjs-editable="true">Learn More</button></div></section>`}),y.add("form-advanced",{label:"Advanced Form",category:"Forms",content:`<form style="max-width: 600px; margin: 0 auto; padding: 40px; background: #ffffff; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);" data-gjs-selectable="true" data-gjs-droppable="*"><h2 style="font-size: 32px; font-weight: 700; margin-bottom: 8px; color: #1e1e1e; text-align: center;" data-gjs-type="text" data-gjs-editable="true">Contact Us</h2><p style="text-align: center; color: #6b7280; margin-bottom: 32px; font-size: 16px;" data-gjs-type="text" data-gjs-editable="true">Fill out the form below and we'll get back to you</p><div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 20px;" data-gjs-selectable="true" data-gjs-droppable="*"><input type="text" placeholder="First Name" style="padding: 14px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 14px; transition: border-color 0.3s;" data-gjs-selectable="true" /><input type="text" placeholder="Last Name" style="padding: 14px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 14px; transition: border-color 0.3s;" data-gjs-selectable="true" /></div><input type="email" placeholder="Email Address" style="width: 100%; padding: 14px; margin-bottom: 20px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 14px; transition: border-color 0.3s; box-sizing: border-box;" data-gjs-selectable="true" /><select style="width: 100%; padding: 14px; margin-bottom: 20px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 14px; background: white; cursor: pointer;" data-gjs-selectable="true"><option>Select Subject</option><option>General Inquiry</option><option>Support</option><option>Sales</option></select><textarea placeholder="Your Message" rows="5" style="width: 100%; padding: 14px; margin-bottom: 20px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 14px; resize: vertical; font-family: inherit; box-sizing: border-box;" data-gjs-selectable="true"></textarea><label style="display: flex; align-items: center; gap: 12px; margin-bottom: 24px; cursor: pointer;"><input type="checkbox" style="width: 20px; height: 20px; cursor: pointer;" data-gjs-selectable="true" /><span style="font-size: 14px; color: #6b7280;">I agree to the terms and conditions</span></label><button type="submit" style="width: 100%; padding: 16px; background: linear-gradient(135deg, #5e72e4 0%, #667eea 100%); color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: transform 0.3s, box-shadow 0.3s; box-shadow: 0 4px 15px rgba(94,114,228,0.3);" data-gjs-selectable="true">Send Message</button></form>`}),y.add("badge",{label:"Badge",category:"Basic",content:'<div style="padding: 20px; display: flex; gap: 12px; flex-wrap: wrap; align-items: center;" data-gjs-selectable="true" data-gjs-droppable="*"><span style="background: #dbeafe; color: #1e40af; padding: 6px 12px; border-radius: 6px; font-size: 14px; font-weight: 600;" data-gjs-type="text" data-gjs-editable="true">New</span><span style="background: #fef3c7; color: #92400e; padding: 6px 12px; border-radius: 6px; font-size: 14px; font-weight: 600;" data-gjs-type="text" data-gjs-editable="true">Featured</span><span style="background: #d1fae5; color: #065f46; padding: 6px 12px; border-radius: 6px; font-size: 14px; font-weight: 600;" data-gjs-type="text" data-gjs-editable="true">Popular</span><span style="background: #fce7f3; color: #831843; padding: 6px 12px; border-radius: 6px; font-size: 14px; font-weight: 600;" data-gjs-type="text" data-gjs-editable="true">Sale</span></div>'}),y.add("alert",{label:"Alert",category:"Basic",content:'<div style="padding: 20px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="background: #dbeafe; border-left: 4px solid #3b82f6; padding: 16px; border-radius: 8px; display: flex; align-items: start; gap: 12px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="font-size: 20px; color: #3b82f6;">‚Ñπ</div><div style="flex: 1;"><div style="font-weight: 600; color: #1e40af; margin-bottom: 4px;" data-gjs-type="text" data-gjs-editable="true">Information</div><div style="color: #1e3a8a; font-size: 14px; line-height: 1.5;" data-gjs-type="text" data-gjs-editable="true">This is an informational alert. You can customize the message.</div></div></div></div>'}),Object.entries({section:"‚ñ§",container:"‚ñ¢","columns-2":"‚Öç","columns-3":"‚ò∞","columns-4":"‚ñ¶",row:"‚ò∑",divider:"‚îÄ",spacer:"‚Üï",navbar:"‚ò∞","heading-1":"H1","heading-2":"H2","heading-3":"H3","heading-4":"H4",paragraph:"¬∂","text-block":"Tx",quote:"‚ùù",list:"‚â°","link-block":"üîó",button:"‚è∫","button-outline":"‚≠ò","button-text":"Aa",link:"üîó","page-link":"‚á¢",image:"üñº","image-gallery":"‚ñß",video:"‚ñ∂",icon:"‚òÖ",form:"‚úâ","form-simple":"‚úé","input-text":"T","input-email":"@","input-phone":"‚òé","textarea-field":"‚ñ§","form-button":"‚úî","input-number":"#","input-password":"üîí","input-date":"üìÖ","select-dropdown":"‚à®",checkbox:"‚òë",radio:"‚óâ",tabs:"‚ãØ",accordion:"‚áµ",card:"‚ñ£",testimonial:"‚ò∫","pricing-table":"$","google-maps":"üìç",footer:"‚¨á","hero-section":"‚≠ê","feature-section":"‚ú®","team-section":"üë•","faq-section":"‚ùì","blog-card":"üìù","product-card":"üõç","stats-section":"üìä","cta-section":"üì¢","social-links":"üîó",breadcrumbs:"üìç",sidebar:"üìã","progress-bar":"‚ñ∞",counter:"üî¢","image-carousel":"üé†","card-hover":"‚ú®",timeline:"‚è±","testimonials-slider":"üí¨",modal:"üî≤","countdown-timer":"‚è∞","button-icon":"üîò","video-background":"üé¨","parallax-section":"üåä","form-advanced":"üìã",badge:"üè∑",alert:"‚ö†"}).forEach(([r,d])=>{const u=y.get(r);u&&u.set({media:`<span class="elementor-widget-icon">${d}</span>`})});const Ze=y&&y.getAll?y.getAll().length:0,tr=y&&y.getCategories?y.getCategories().length:0;console.log(`üì¶ Blocks registered: ${Ze} blocks in ${tr} categories`),Ze===0?console.error("‚ùå CRITICAL: No blocks registered! BlockManager might not be initialized correctly."):console.log("‚úÖ Blocks successfully registered"),[100,300,500,1e3].forEach(r=>{setTimeout(()=>{const d=document.getElementById("blocks-panel");if(!d||!y||Ze===0){r===1e3&&console.warn(`‚ö†Ô∏è blocks-panel not ready after ${r}ms, blocks may not render`);return}const u=d.querySelectorAll(".gjs-block");if(u.length>0&&r<1e3){console.log(`‚úÖ Blocks already rendered (${u.length} found), skipping delay ${r}ms`);return}d.style.setProperty("display","block","important"),d.style.setProperty("visibility","visible","important"),d.style.setProperty("opacity","1","important");const h=d.closest(".elementor-blocks-wrapper");if(h&&(h.style.setProperty("display","block","important"),h.style.setProperty("visibility","visible","important"),h.style.setProperty("opacity","1","important")),u.length===0){console.log(`üîÑ Rendering blocks at ${r}ms delay...`);try{d.innerHTML="";const f=y.getAll?y.getAll():[],S=Array.isArray(f)?f:[];console.log(`üìã Found ${S.length} registered blocks, attempting render...`);let j;try{j=y.render(),console.log(`‚úÖ BlockManager.render() called at ${r}ms`)}catch(v){console.error("‚ùå BlockManager.render() threw error:",v),j=null}me.current=!0,setTimeout(()=>{let v=d.querySelectorAll(".gjs-block");if(console.log(`üé® After standard render at ${r}ms: ${v.length} blocks found in DOM`),v.length===0&&S.length>0){console.warn(`‚ö†Ô∏è BlockManager.render() returned 0 blocks, manually rendering ${S.length} blocks...`),d.innerHTML="";const L=document.createElement("div");L.className="gjs-blocks-c",L.style.setProperty("display","flex","important"),L.style.setProperty("flex-direction","column","important"),L.style.setProperty("gap","0","important"),L.style.setProperty("padding","0","important"),L.style.setProperty("background","#ffffff","important"),L.style.setProperty("width","100%","important");const b={};S.forEach(T=>{try{const A=(T.get?T.get("category"):T.category||"Basic")||"Basic";b[A]||(b[A]=[]),b[A].push(T)}catch(I){console.warn("Error getting block category:",I),b.Basic||(b.Basic=[]),b.Basic.push(T)}}),console.log(`üìÅ Grouped blocks into ${Object.keys(b).length} categories:`,Object.keys(b)),Object.entries(b).forEach(([T,I])=>{const A=document.createElement("div");A.className="gjs-block-category",A.setAttribute("data-open","true");const q=document.createElement("div");q.className="gjs-block-category-title",q.textContent=T,q.style.cursor="pointer",q.style.padding="12px 16px",q.style.fontSize="11px",q.style.fontWeight="600",q.style.color="rgba(255, 255, 255, 0.5)",q.style.textTransform="uppercase",q.style.borderBottom="1px solid rgba(255, 255, 255, 0.05)",A.appendChild(q);const R=document.createElement("div");R.className="gjs-block-category-blocks",R.style.setProperty("display","grid","important"),R.style.setProperty("grid-template-columns","repeat(2, 1fr)","important"),R.style.setProperty("gap","10px","important"),R.style.setProperty("padding","12px","important"),R.style.setProperty("background","#ffffff","important"),I.forEach(U=>{try{const F=U.getId?U.getId():U.id||"unknown",M=U.get?U.get("label"):U.label||F,Q=U.get?U.get("media"):U.media||"",D=document.createElement("div");D.className="gjs-block",D.setAttribute("data-gjs-type",F),D.style.setProperty("display","flex","important"),D.style.setProperty("align-items","center","important"),D.style.setProperty("justify-content","center","important"),D.style.setProperty("min-height","90px","important"),D.style.setProperty("height","90px","important"),D.style.setProperty("max-height","90px","important"),D.style.setProperty("background","linear-gradient(145deg, #1e1e26 0%, #1a1a22 100%)","important"),D.style.setProperty("border-radius","8px","important"),D.style.setProperty("cursor","grab","important"),D.style.setProperty("color","#fff","important"),D.style.setProperty("font-size","12px","important"),D.style.setProperty("font-weight","500","important"),D.style.setProperty("width","100%","important"),D.style.setProperty("max-width","100%","important"),D.style.setProperty("box-sizing","border-box","important"),D.style.setProperty("position","relative","important"),D.style.setProperty("z-index","1","important"),Q?D.innerHTML=Q:D.textContent=M,D.addEventListener("mousedown",Ne=>{if(Ne.preventDefault(),Ne.stopPropagation(),y&&typeof y.startDrag=="function")y.startDrag(U,Ne);else if(t&&t.BlockManager){const ee=new MouseEvent("mousedown",{bubbles:!0,cancelable:!0,clientX:Ne.clientX,clientY:Ne.clientY});D.dispatchEvent(ee)}}),R.appendChild(D)}catch(F){console.warn("Error creating block element:",F)}}),A.appendChild(R),L.appendChild(A)}),d.appendChild(L),v=d.querySelectorAll(".gjs-block"),console.log(`‚úÖ Manually rendered ${v.length} blocks in ${Object.keys(b).length} categories`)}v.length===0&&Ze>0&&r===1e3?(console.error("‚ùå CRITICAL: Blocks registered but still not rendered after all attempts!"),console.error("BlockManager state:",{registeredCount:Ze,registeredArrayLength:S.length,hasRender:!!y.render,panelExists:!!d,panelVisible:d.style.display!=="none",panelParent:d.parentElement?.tagName,panelInnerHTML:d.innerHTML.substring(0,100)})):v.length>0&&console.log(`‚úÖ Successfully rendered ${v.length} blocks!`)},300)}catch(f){console.error(`‚ùå Error rendering blocks at ${r}ms:`,f)}}},r)}),t.on("load",()=>{try{const r=t.getWrapper();if(r){r.set({droppable:!0,selectable:!0,editable:!1,draggable:!1,hoverable:!1,stylable:!0}),r.addClass("gjs-wrapper-body");const d=r.getId();if(d){const j=r.getStyle();if(t.CssComposer&&Object.keys(j).length>0){const v=t.CssComposer.getRule(`#${d}`);if(v){const L=v.get("style");t.CssComposer.remove(v);const b=t.CssComposer.getRule(".gjs-wrapper-body")||t.CssComposer.add(".gjs-wrapper-body");b&&L&&(b.set("style",{...b.get("style"),...L}),console.log("‚úì Migrated wrapper styles from ID to class selector"))}}}const u=r.getStyle();if(!u||Object.keys(u).length===0){const j=t.CssComposer;if(j){const v=j.add(".gjs-wrapper-body");v&&v.set("style",{"min-height":"600px",padding:"40px",background:"#fff"})}}const h=t.Canvas.getBody();h&&(h.style.margin="0",h.style.padding="0");const f=G;let S=null;S=setTimeout(()=>{!e&&jt&&(console.warn("Theme load timeout after 30s - forcing completion"),Le(!1),je("Theme load timeout. Please refresh the page."))},3e4),(async()=>{try{let j=null,v=!1,L=!1;if(f&&!Ye&&/^[0-9a-fA-F]{24}$/.test(f)){v=!0;try{const{axiosi:T}=await zt(async()=>{const{axiosi:A}=await import("./index-C7S6h9OR.js").then(q=>q.b5);return{axiosi:A}},__vite__mapDeps([0,1])),I=await T.get(`/custom-themes/${f}`);if(I.data.success&&I.data.data){const A=I.data.data,q=A.html||"",R=A.css||"",U=Qt(q);if(U&&U.length>0)He(U),Ke(U[0].id),j={...A,html:U[0].html||oe,css:R};else{const F={id:"page-1",name:"Home",html:q||oe,css:R||""};He([F]),Ke("page-1"),j={...A,html:F.html,css:R}}}}catch(T){T?.response?.status===404||T?.response?.status===400?L=!0:console.error("Error loading custom theme:",T)}}if(!j&&(Ye||L)){L||console.log("Loading installed theme...",{themeId:f,shouldLoadInstalledTheme:Ye});const b=await Sr(L);if(b){console.log("‚úì Installed theme loaded successfully:",b.name);const T={id:"page-1",name:b.name||"Home",html:b.html||oe,css:b.css||""},I=b.pages&&b.pages.length>0?[T,...b.pages]:[T];console.log(`üìÑ Loaded ${I.length} pages:`,I.map(A=>A.name)),He(I),qe.current=I,Ke("page-1"),j=b}else L?(console.error("‚ùå Theme not found as custom theme (404) and failed to load as installed theme",{themeId:f,ownerId:nt||$t(),shouldLoadInstalledTheme:Ye,isInstalledMode:it}),ct||je("Theme not found. Please check if the theme exists and you have permission to access it.")):(console.error("‚ùå Failed to load installed theme - fallbackTheme is null",{themeId:f,ownerId:nt||$t(),shouldLoadInstalledTheme:Ye,isInstalledMode:it,resolvedStoreId:nt,extractedUserId:$t()}),ct||je("Failed to load theme. Please check the browser console for details.")),console.log("Initializing editor with default content due to theme load failure")}if(e)return;console.log("üìù Applying theme to editor:",{hasExisting:!!j,hasHtml:!!j?.html,hasCss:!!j?.css,htmlLength:j?.html?.length,cssLength:j?.css?.length,themeId:f,isInstalledMode:it,shouldLoadInstalledTheme:Ye});try{j?.html?(console.log("‚úÖ Applying existing theme HTML to editor"),ke(j.html,j.css||"")):(console.warn("‚ö†Ô∏è No existing theme found, using default content"),ke(oe,j?.css||"")),console.log("‚úÖ Theme content applied to editor successfully")}catch(b){if(console.error("‚ùå Error applying page to editor:",b),console.error("Error stack:",b?.stack),!e){console.warn("‚ö†Ô∏è Continuing with default content due to apply error");try{ke(oe,"")}catch(T){console.error("‚ùå Failed to apply default content:",T),je(b?.message||"Failed to apply theme content. Editor may still work."),Le(!1)}}}setTimeout(()=>{if(e)return;K("widgets");const b=document.getElementById("blocks-panel"),T=document.querySelector(".elementor-blocks-wrapper");T&&(T.style.setProperty("display","block","important"),T.style.setProperty("visibility","visible","important"),T.style.setProperty("opacity","1","important")),b&&(b.style.setProperty("display","block","important"),b.style.setProperty("visibility","visible","important"),b.style.setProperty("opacity","1","important"))},200),[400,800,1200,2e3].forEach(b=>{setTimeout(()=>{const T=document.getElementById("blocks-panel");if(T&&t.BlockManager){const I=T.closest(".elementor-blocks-wrapper");I&&(I.style.setProperty("display","block","important"),I.style.setProperty("visibility","visible","important"),I.style.setProperty("opacity","1","important"));const A=T.querySelectorAll(".gjs-block"),q=T.innerHTML.trim()==="",R=!!T.querySelector(".gjs-blocks-c");A.length===0&&(q||!R)?(console.log(`[Theme Load] Blocks missing at ${b}ms, re-rendering...`),T.style.setProperty("display","block","important"),T.style.setProperty("visibility","visible","important"),T.style.setProperty("opacity","1","important"),T.innerHTML="",t.BlockManager.render(),me.current=!0,setTimeout(()=>{const U=T.querySelectorAll(".gjs-block");U.length>0?(U.forEach(M=>{M&&(M.style.display="flex",M.style.visibility="visible",M.style.opacity="1",M.style.pointerEvents="auto",M.style.cursor="grab",M.style.position="relative",M.style.zIndex="1")}),T.querySelectorAll(".gjs-block-category").forEach(M=>{M&&(M.style.display="block",M.style.visibility="visible")}),console.log(`[Theme Load] ‚úÖ Restored ${U.length} blocks at ${b}ms`)):(console.warn(`[Theme Load] ‚ö†Ô∏è No blocks found after render at ${b}ms`),b===2e3&&setTimeout(()=>{T.querySelectorAll(".gjs-block").length===0&&(console.log("[Theme Load] üîÑ Final attempt to restore blocks..."),T.innerHTML="",t.BlockManager.render(),me.current=!0)},500))},200)):A.length>0&&(me.current=!0,A.forEach(F=>{F&&(F.style.display="flex",F.style.visibility="visible",F.style.opacity="1",F.style.pointerEvents="auto",F.style.cursor="grab",F.style.position="relative",F.style.zIndex="1")}),T.querySelectorAll(".gjs-block-category").forEach(F=>{F&&(F.style.display="block",F.style.visibility="visible")}),console.log(`[Theme Load] ‚úÖ Found ${A.length} existing blocks at ${b}ms`))}},b)}),j?.name&&J(j.name),j&&f?(De(!0),$e(!1)):(De(!1),$e(!0)),e||(Le(!1),S&&clearTimeout(S))}catch(j){if(console.error("Error in editor load handler:",j),e)return;S&&clearTimeout(S);try{ke(oe),e||Le(!1)}catch(v){console.error("Error applying default content:",v),e||(je(v?.message||"Failed to load theme"),Le(!1))}}finally{S&&clearTimeout(S),e||Le(!1)}})()}}catch(r){console.error("Error setting up editor load handler:",r),loadTimeout&&clearTimeout(loadTimeout),e||(je(r?.message||"Failed to initialize editor"),Le(!1))}});let Ot=0;t.on("block:drag:start",r=>{ie=!0,console.log("üéØ Block drag started:",r?.get?.("label")||"unknown");const d=t.getWrapper();if(d){const u=d.get("droppable");console.log("  Wrapper droppable status:",u),console.log("  Wrapper exists:",!!d),console.log("  Wrapper components count:",d.components?.()?.length||0),u||(console.warn("  ‚ö†Ô∏è Wrapper not droppable! Fixing..."),d.set("droppable","*"),console.log("  ‚úì Set wrapper droppable to: *"));const h=d.getEl?.();h&&(h.style.pointerEvents="auto",h.style.minHeight="600px",console.log("  ‚úì Wrapper element configured for drops"))}else console.error("  ‚ùå NO WRAPPER FOUND!")}),t.on("block:drag:stop",r=>{console.log("üéØ Block drag stopped:",r?.get?.("label")||"unknown"),setTimeout(()=>{if(ie=!1,Se.size>0){pe&&(clearTimeout(pe),pe=null);const d=Array.from(Se);Se.clear();const u=d.find(h=>{try{const f=h.getParent();return!f||f.get("type")==="wrapper"}catch{return!0}})||d[0];u&&setTimeout(()=>{try{t.select(u)}catch{}},100)}},300);try{if(!r)return;setTimeout(()=>{try{const d=t.getWrapper();if(!d)return;const u=d.components(),h=u?u.length:0;if(r.get){const f=r.get("content");if(f){const S=d.append(f);if(S){const j=Array.isArray(S)?S[0]:S;if(j){j.set({selectable:!0,hoverable:!0,draggable:!0});const v=j.getEl?.();v&&(v.style.display="",v.style.visibility="visible",v.style.opacity="1"),setTimeout(()=>{if(t.select(j),t.runCommand("open-sm"),t.LayerManager&&P==="structure"){const b=document.getElementById("layers-panel");b&&(document.querySelectorAll(".gjs-layers, .gjs-layer-item, .gjs-layer-item-title").forEach(I=>{I.closest("#layers-panel")||I.remove()}),b.innerHTML="",t.LayerManager.render())}},50);const L=d.components();Ot=L?L.length:0}}}}}catch(d){console.error("Error in block:drag:stop:",d)}},100)}catch(d){console.error("Error in block:drag:stop handler:",d)}}),t.on("component:add",r=>{try{if(!r||!r.collection||!r.cid)return;if(ie){Se.add(r);return}pe&&clearTimeout(pe),Se.add(r),pe=setTimeout(()=>{const d=Array.from(Se);Se.clear();const u=d.find(A=>{try{const q=A.getParent();return!q||q.get("type")==="wrapper"}catch{return!0}})||d[0];if(!u)return;const h=u,f=t.UndoManager;if(f)try{f.stop()}catch{}const S=t.getWrapper();if(S){const A=S.components();Ot=A?A.length:0}const j=h.getAttributes?.()||{},v=h.get?.("tagName")?.toLowerCase?.()||"",L=j["data-gjs-droppable"]==="*"||v==="form",b=A=>{try{const q=A.getAttributes?.()||{},R=A.get?.("tagName")?.toLowerCase?.()||"",U=q["data-gjs-droppable"]==="*"||R==="form",F=q["data-gjs-selectable"]!=="false";if(A.set({selectable:F,hoverable:!0,draggable:!0,stylable:!0,droppable:U},{silent:!0}),(q["data-gjs-editable"]==="true"||q["data-gjs-type"]==="text")&&A.set({editable:!0,type:"text"},{silent:!0}),t.CssComposer){const M=A.cid||A.getId?.();if(M){let D=A.getClasses().find(Ne=>Ne&&!Ne.startsWith("gjs-"));D||(D=`gjs-comp-${M}`,A.addClass(D))}}}catch{}};b(h);const T=A=>{try{const q=A.components();q&&q.length>0&&q.forEach(R=>{b(R),T(R)})}catch{}};if(T(h),f)try{f.start()}catch{}const I=h.getEl?.();I&&(I.style.display="",I.style.visibility="visible",I.style.opacity="1");try{t.stopCommand("preview")}catch{}requestAnimationFrame(()=>{try{if(h&&h.cid&&!ie){if(t.select(h),I)try{t.Canvas.scrollTo(I)}catch{}try{t.runCommand("open-sm"),be(h,100)}catch{}}setTimeout(()=>{try{if(t.LayerManager&&P==="structure"){const A=document.getElementById("layers-panel");A&&(document.querySelectorAll(".gjs-layers, .gjs-layer-item, .gjs-layer-item-title").forEach(R=>{R.closest("#layers-panel")||R.remove()}),A.innerHTML="",t.LayerManager.render(),setTimeout(()=>{if(t.LayerManager&&P==="structure"){const R=document.getElementById("layers-panel");R&&(R.innerHTML="",t.LayerManager.render())}},200))}}catch{}},50)}catch{}})},150)}catch(d){console.error("Error in component:add:",d)}});const rr=t.Commands.get("close-sm");rr?t.Commands.add("close-sm",{...rr,run:function(r){const d=document.getElementById("style-panel");d&&(d.style.display="block",d.style.visibility="visible",d.style.opacity="1");const u=fe.current?.querySelector(".builder-right-panel");u&&(u.style.display="flex",u.style.visibility="visible",u.style.opacity="1"),r.runCommand("open-sm")}}):t.Commands.add("close-sm",{run:function(r){const d=document.getElementById("style-panel");d&&(d.style.display="block",d.style.visibility="visible",d.style.opacity="1");const u=fe.current?.querySelector(".builder-right-panel");u&&(u.style.display="flex",u.style.visibility="visible",u.style.opacity="1")},stop:function(r){}});let lt=null,N=null,z=!1,ie=!1,pe=null,Se=new Set,X=null;const be=(r,d=150)=>{lt&&clearTimeout(lt),lt=setTimeout(()=>{if(!r||!t.StyleManager)return;if(!(document.querySelector('.elementor-primary-tab-icon[title="Style"]')?.classList.contains("active")||P==="style")){console.log("Style tab not active, skipping StyleManager render");return}const f=r.cid||r.getId?.();if(f===N&&X?.innerHTML.trim()!==""){console.log("Same component already rendered, skipping");return}if(N=f,X||(X=document.getElementById("style-panel")),!X){console.warn("Style panel element not found");return}const S=X.closest('.elementor-panel-card[data-panel-type="style"]');if(S)S.style.display="flex",S.style.visibility="visible",S.style.opacity="1";else{console.warn("Style panel not in correct container, attempting to fix...");const v=document.querySelector('.elementor-panel-card[data-panel-type="style"]');if(v)v.style.display="flex",v.style.visibility="visible",v.style.opacity="1";else{console.error("Style panel card not found in DOM");return}}X.style.display="block",X.style.visibility="visible",X.style.opacity="1",X.style.width="100%",X.style.height="100%",X.style.minHeight="300px",r===t.getWrapper()&&(r.getClasses().includes("gjs-wrapper-body")||(r.addClass("gjs-wrapper-body"),console.log("‚úì Added gjs-wrapper-body class to wrapper"))),requestAnimationFrame(()=>{if(!(document.querySelector('.elementor-primary-tab-icon[title="Style"]')?.classList.contains("active")||P==="style")){console.log("Style tab no longer active, aborting render");return}try{console.log("üé® Rendering StyleManager for component:",f),t.select(r),t.StyleManager.setTarget&&t.StyleManager.setTarget(r),X.innerHTML="",t.StyleManager.render(),console.log("‚úì StyleManager.render() called"),t.StyleManager.setTarget&&t.StyleManager.setTarget(r),setTimeout(()=>{if(!e&&r&&t.StyleManager){const L=X.querySelectorAll(".gjs-sm-sector");L.forEach(b=>{const T=b;T.classList.remove("gjs-sm-sector--closed"),T.classList.add("gjs-sm-sector--open");const I=T.querySelector(".gjs-sm-sector-content");I&&(I.style.cssText="display: block !important; visibility: visible !important; opacity: 1 !important; max-height: none !important;")}),console.log("‚úì StyleManager sectors opened:",L.length),t.StyleManager.render()}},100)}catch(L){console.error("‚ùå Error rendering Style Manager:",L)}})},d)};let he=!1;const Ge=r=>{(r.key==="Alt"||r.keyCode===18)&&(he=!0)},ut=r=>{(r.key==="Alt"||r.keyCode===18)&&(he=!1)};window.addEventListener("keydown",Ge),window.addEventListener("keyup",ut),a(()=>{window.removeEventListener("keydown",Ge),window.removeEventListener("keyup",ut)}),t.on("component:selected",r=>{try{if(z)return;if(he&&r)try{const f=r.getParent();if(f&&f.get("type")!=="wrapper"){z=!0,requestAnimationFrame(()=>{t.select(f),setTimeout(()=>{z=!1},100)});return}}catch(f){console.warn("Error selecting parent:",f)}const d=r?.cid||r?.getId?.()||null;if(d===N){P==="style"&&t.StyleManager&&be(r,50);return}if(z=!0,N=d,r&&r.cid)try{r.set({stylable:!0},{silent:!0})}catch{}const u=fe.current?.querySelector(".builder-right-panel");u&&(u.style.display="flex",u.style.visibility="visible",u.style.opacity="1",u.style.width="300px",u.style.flexShrink="0");const h=document.getElementById("traits-panel");if(h&&t.TraitManager){h.style.display="block",h.style.visibility="visible",h.style.opacity="1";const f=r?.get("tagName")?.toLowerCase();let S=null,j=f;try{const A=r.getView?.();A&&A.el&&A.el.nodeType===1&&typeof A.el.querySelector=="function"&&(S=A.el,j=S.tagName?.toLowerCase()||f)}catch(A){console.warn("Could not get view element:",A)}let v=j==="button"||f==="button",L=j==="a"||f==="a";if(!v&&!L&&S&&typeof S.querySelector=="function"){const A=S.querySelector("button"),q=S.querySelector("a");if(A){v=!0;try{const R=t.Components.getComponent?t.Components.getComponent(A):null;R&&R.cid!==r.cid&&(r=R,requestAnimationFrame(()=>{z=!0,t.select(R),setTimeout(()=>{z=!1},100)}))}catch{console.log("Could not get button component, using wrapper")}}else if(q){L=!0;try{const R=t.Components.getComponent?t.Components.getComponent(q):null;R&&R.cid!==r.cid&&(r=R,requestAnimationFrame(()=>{z=!0,t.select(R),setTimeout(()=>{z=!1},100)}))}catch{console.log("Could not get link component, using wrapper")}}}const b=qe.current;let T=j==="img"||f==="img",I=r;if(!T&&S&&typeof S.querySelector=="function"){const A=S.querySelector("img");if(A){T=!0;try{const q=t.Components.getComponent?t.Components.getComponent(A):null;q&&q.cid!==r.cid&&(I=q,requestAnimationFrame(()=>{z=!0,t.select(q),setTimeout(()=>{z=!1},100)}))}catch{console.log("Could not get image component, using wrapper")}}}if(T){P!=="widgets"&&K("widgets");const A=I.get("traits")||[],q=A.some(U=>typeof U=="object"&&U.name==="src"||U==="src"),R=A.some(U=>typeof U=="object"&&U.name==="alt"||U==="alt");if(!q||!R){const U=[];q||U.push({type:"text",name:"src",label:"Image URL",placeholder:"https://example.com/image.jpg",changeProp:!0}),R||U.push({type:"text",name:"alt",label:"Alt Text",placeholder:"Image description",changeProp:!0});const F=A.filter(ee=>typeof ee=="string"?ee!=="src"&&ee!=="alt":ee.name!=="src"&&ee.name!=="alt");I.set("traits",[...F,...U]),setTimeout(()=>{t.TraitManager&&typeof t.TraitManager.render=="function"&&t.TraitManager.render()},50);const M=I.getAttributes?.()||{},Q=M.src||I.get("src")||"",D=M.alt||I.get("alt")||"";Q&&!I.get("src")&&I.set("src",Q),D&&!I.get("alt")&&I.set("alt",D);const Ne=()=>{const ee=I.get("src")||"",xt=I.get("alt")||"";if(ee){I.addAttributes({src:ee});const W=I.getView();if(W&&W.el){W.el.setAttribute("src",ee);const ye=W.el.tagName==="IMG"?W.el:W.el.querySelector("img");ye&&ye.setAttribute("src",ee)}}if(xt!==void 0){I.addAttributes({alt:xt});const W=I.getView();if(W&&W.el){W.el.setAttribute("alt",xt);const ye=W.el.tagName==="IMG"?W.el:W.el.querySelector("img");ye&&ye.setAttribute("alt",xt)}}I.trigger("change"),t.trigger("component:update",I)};I._updateImageAttributes=Ne,I.on("change:src",()=>{const ee=I._updateImageAttributes;ee&&setTimeout(ee,50)}),I.on("change:alt",()=>{const ee=I._updateImageAttributes;ee&&setTimeout(ee,50)})}}if(v||L){P!=="widgets"&&K("widgets");const A=r.get("traits")||[],q=A.some(F=>typeof F=="object"&&F.name==="linkType"||F==="linkType"),R=A.some(F=>typeof F=="object"&&F.name==="pageLink"||F==="pageLink"),U=F=>{if(!F)return;const M=[{id:"",value:"",name:"-- Select Page --"},...(b||[]).map(Q=>({id:Q.id,value:Q.id,name:Q.name}))];F.set?F.set("options",M):F.options&&(F.options=M)};if(!q){const F=[{type:"select",name:"linkType",label:v?"Button Action":"Link Type",options:v?[{id:"none",value:"none",name:"No Action"},{id:"page",value:"page",name:"Navigate to Page"},{id:"url",value:"url",name:"Open URL"}]:[{id:"page",value:"page",name:"Link to Page"},{id:"url",value:"url",name:"External URL"}],changeProp:!0},{type:"select",name:"pageLink",label:"Select Page",options:[{id:"",value:"",name:"-- Select Page --"},...(b||[]).map(W=>({id:W.id,value:W.id,name:W.name}))],changeProp:!0},{type:"text",name:"href",label:"URL",placeholder:"https://example.com or #page-1",changeProp:!0}],M=A.filter(W=>typeof W=="string"?W!=="id"&&W!=="title"&&W!=="linkType"&&W!=="pageLink":W.name!=="id"&&W.name!=="title"&&W.name!=="linkType"&&W.name!=="pageLink"&&W.name!=="href");r.set("traits",[...M,...F]),setTimeout(()=>{t.TraitManager&&typeof t.TraitManager.render=="function"&&t.TraitManager.render()},50);const Q=r.getAttributes?.()||{},D=Q.href||r.get("href")||"",Ne=Q["data-page-link"]||"";Ne?(r.set("linkType","page"),r.set("pageLink",Ne),r.set("href",`#page-${Ne}`)):D&&D!=="#"&&!D.startsWith("#")?(r.set("linkType","url"),r.set("href",cr(D))):v?r.set("linkType","none"):r.set("linkType","page");const ee=()=>{const W=r.get("linkType"),ye=document.getElementById("traits-panel");ye&&ye.querySelectorAll(".gjs-trt-trait").forEach(le=>{const xe=le.querySelector("label, .gjs-trt-trait__label");if(xe){const vt=xe.textContent||"";vt.includes("Select Page")?le.style.display=W==="page"?"block":"none":vt.includes("URL")&&!vt.includes("Select")&&(le.style.display=W==="url"?"block":"none")}})};r._updateTraitVisibility=ee,setTimeout(()=>{if(t.TraitManager){t.select(r),typeof t.TraitManager.render=="function"&&t.TraitManager.render();const W=document.getElementById("traits-panel");if(W){W.style.display="block",W.style.visibility="visible",W.style.opacity="1",setTimeout(ee,100);const ye=new MutationObserver(()=>{ee()});ye.observe(W,{childList:!0,subtree:!0}),r._traitVisibilityObserver=ye}}},150);const xt=()=>{const W=r.get("linkType"),ye=r.get("pageLink"),at=r.get("href");if(W==="page")if(ye&&ye.trim()!==""){const le=ye.replace(/^#/,"").trim();r.addAttributes({"data-page-link":le}),r.set("href",`#${le}`);const xe=r.getView();xe&&xe.el&&(xe.el.setAttribute("data-page-link",le),xe.el.setAttribute("href",`#${le}`))}else{r.removeAttributes("data-page-link"),r.set("href","#");const le=r.getView();le&&le.el&&(le.el.removeAttribute("data-page-link"),le.el.setAttribute("href","#"))}else if(W==="url"){r.removeAttributes("data-page-link");const le=at?cr(at):"";if(le){r.set("href",le);const xe=r.getView();xe&&xe.el&&xe.el.setAttribute("href",le)}else{r.set("href","#");const xe=r.getView();xe&&xe.el&&xe.el.setAttribute("href","#")}}else W==="none"&&(r.removeAttributes("data-page-link"),r.removeAttributes("href"));r.trigger("change"),t.trigger("component:update",r)};if(r._updateNavigationAttributes=xt,r._updateTraitVisibility=ee,r.on("change:linkType",()=>{const W=r._updateNavigationAttributes;W&&setTimeout(W,50);const ye=r._updateTraitVisibility;ye&&setTimeout(ye,100),setTimeout(()=>{t.TraitManager&&(t.select(r),typeof t.TraitManager.render=="function"&&t.TraitManager.render(),ye&&setTimeout(ye,50))},150)}),r.on("change:pageLink",()=>{const W=r._updateNavigationAttributes;W&&setTimeout(W,50)}),r.on("change:href",()=>{const W=r._updateNavigationAttributes;W&&setTimeout(W,50)}),t.TraitManager){const W=t.TraitManager,ye=W?.updateTarget;ye&&(W.updateTarget=function(at){const le=ye.call(this,at);return at&&at===r&&setTimeout(()=>{const xe=at._updateNavigationAttributes;xe&&xe()},100),le}),t.on("trait:update",(at,le)=>{le&&(le===r||le.cid&&r.cid&&le.cid===r.cid)&&setTimeout(()=>{const xe=le.get("linkType"),vt=le.get("pageLink"),mr=le.get("href");xe!==void 0&&r.set("linkType",xe),vt!==void 0&&r.set("pageLink",vt),mr!==void 0&&r.set("href",mr);const br=le._updateNavigationAttributes;br&&br()},50)})}}setTimeout(()=>{if(t.TraitManager){(t.TraitManager.getTraits?t.TraitManager.getTraits(r):[]).forEach(Q=>{Q&&(Q.get?.("name")==="pageLink"||Q.name==="pageLink")&&U(Q)}),typeof t.TraitManager.render=="function"&&t.TraitManager.render();const M=r._updateTraitVisibility;M&&setTimeout(M,50)}},100)}}if(P==="style"&&be(r),t.TraitManager&&(t.select(r),setTimeout(()=>{typeof t.TraitManager.render=="function"&&t.TraitManager.render();const f=document.getElementById("traits-panel");if(f){f.style.display="block",f.style.visibility="visible",f.style.opacity="1";const S=t.TraitManager.render();S&&f!==S.parentNode&&(f.innerHTML="",f.appendChild(S));const j=()=>{document.querySelectorAll("#traits-panel input, #traits-panel select, #traits-panel textarea").forEach(b=>{b&&(b.style.pointerEvents="auto",b.style.cursor=b.tagName==="SELECT"?"pointer":"text",b.style.zIndex="1",b.style.position="relative",b.disabled=!1,b.readOnly=!1,b.addEventListener("input",()=>{if(r){const T=r._updateNavigationAttributes;T&&setTimeout(T,50)}}),b.addEventListener("change",()=>{if(r){const T=r._updateNavigationAttributes;T&&setTimeout(T,50)}}))})};j();const v=document.getElementById("traits-panel");if(v){const L=new MutationObserver(()=>{j()});L.observe(v,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style","disabled","readonly"]}),r._traitObserver=L}}},200)),r){const f=r.getAttributes?.()||{};(f["data-gjs-editable"]==="true"||f["data-gjs-type"]==="text")&&r.set({editable:!0},{silent:!0}),r.set({stylable:!0,selectable:!0,hoverable:!0},{silent:!0})}requestAnimationFrame(()=>{if(e){z=!1;return}P!=="style"&&K("style");const f=document.getElementById("style-panel");f&&(f.style.display="block",f.style.visibility="visible",f.style.opacity="1");const S=fe.current?.querySelector(".builder-right-panel");S&&(S.style.display="flex",S.style.visibility="visible",S.style.opacity="1");try{t.runCommand("open-sm")}catch{}be(r,50),setTimeout(()=>{z=!1},150)})}catch(d){console.warn("Component selected error:",d),z=!1}}),t.on("component:deselected",()=>{N=null}),t.on("component:update",()=>{et||$e(!0)}),t.on("component:add",()=>{et||$e(!0)}),t.on("component:remove",()=>{et||$e(!0)}),t.on("style:property:update",(r,d,u)=>{et||$e(!0);try{const h=u||t.getSelected();if(h){if(h.set({stylable:!0},{silent:!0}),h===t.getWrapper()){if(h.getClasses().includes("gjs-wrapper-body")||h.addClass("gjs-wrapper-body"),r&&d!==void 0&&t.CssComposer){const j=t.CssComposer.getRule(".gjs-wrapper-body")||t.CssComposer.add(".gjs-wrapper-body");if(j){const v=j.get("style")||{};v[r]=d,j.set("style",v),console.log(`‚úì Wrapper ${r} set via CSS rule:`,d)}}}else if(r&&d!==void 0){if(typeof h.addStyle=="function")h.addStyle(r,d);else{const S=h.getStyle()||{};S[r]=d,h.setStyle(S)}if(t.CssComposer){const S=h.cid||h.getId?.();if(S){let v=h.getClasses().find(T=>T&&!T.startsWith("gjs-"));if(!v){const T=h.get("tagName")?.toLowerCase()||"div";v=`gjs-comp-${S}`,h.addClass(v)}const L=`.${v}`;let b=t.CssComposer.getRule(L);if(b||(b=t.CssComposer.add(L)),b){const T=b.get("style")||{};T[r]=d,b.set("style",T)}}}}requestAnimationFrame(()=>{try{h.getEl?.()&&(h.view?.updateStyle&&h.view.updateStyle(),h.trigger("change:style"),t.refresh(),h.trigger("component:update"))}catch(S){console.warn("Error updating component view:",S)}})}}catch(h){console.warn("Style property update error:",h)}}),t.on("style:change",(r,d)=>{try{const u=d||t.getSelected();u&&(u.set({stylable:!0}),u.view?.updateStyle?.(),u.trigger("change:style"),t.refresh())}catch(u){console.warn("Style change error:",u)}}),t.on("component:styleUpdate",r=>{try{if(et||$e(!0),r){if(r.set({stylable:!0},{silent:!0}),r===t.getWrapper()){r.getClasses().includes("gjs-wrapper-body")||r.addClass("gjs-wrapper-body");const h=r.getStyle();if(h&&Object.keys(h).length>0&&t.CssComposer){const f=t.CssComposer.getRule(".gjs-wrapper-body");if(f)f.set("style",h);else{const S=t.CssComposer.add(".gjs-wrapper-body");S&&S.set("style",h)}console.log("‚úì Wrapper styles saved as CSS rule:",h)}}r.view?.updateStyle?.(),t.refresh()}}catch(d){console.warn("Component style update error:",d)}}),t.on("component:dblclick",r=>{try{if(!r)return;const d=r.get("tagName")?.toLowerCase(),u=r.get("type"),h=r.getAttributes?.()||{},f=r.get("content")||"",j=["p","h1","h2","h3","h4","h5","h6","span","a","label","li","td","th","button","strong","em","b","i","u","small","sub","sup","blockquote","cite"].includes(d),v=typeof f=="string"&&f.trim().length>0&&!r.components().length;(h["data-gjs-editable"]==="true"||h["data-gjs-type"]==="text"||u==="text"||j||v)&&(r.get("editable")||r.set({editable:!0,type:"text"}),t.runCommand("core:component-edit",{force:!0}))}catch(d){console.warn("Error enabling double-click editing:",d)}});let Qe=null,or=0;const ar=50,Ae=(r=!1)=>{try{if(P!=="style")return;const d=Date.now();if(!r&&d-or<ar){Qe&&cancelAnimationFrame(Qe),Qe=requestAnimationFrame(()=>Ae(!0));return}if(or=d,Qe&&(cancelAnimationFrame(Qe),Qe=null),X||(X=document.getElementById("style-panel")),!X||!t.StyleManager)return;const u=X,h=u.querySelectorAll(".gjs-sm-sector");if(h.length>0&&h.length<=13&&!r||(h.length>13&&(u.innerHTML=""),!(r||h.length===0||h.length>13)))return;if(typeof t.StyleManager.render=="function"){const j=t.getSelected()||t.getWrapper();if(j)try{if(j.set({stylable:!0},{silent:!0}),t.CssComposer&&j!==t.getWrapper()){const v=j.cid||j.getId?.();if(v){let b=j.getClasses().find(T=>T&&!T.startsWith("gjs-"));b||(b=`gjs-comp-${v}`,j.addClass(b))}}t.StyleManager.setTarget&&t.StyleManager.setTarget(j)}catch{}P==="style"&&(u.innerHTML="",t.StyleManager.render()),j&&t.StyleManager.setTarget&&t.StyleManager.setTarget(j)}}catch(d){console.warn("Error rendering Style Manager:",d)}};t.on("component:update",r=>{try{if(!r)return;const d=r.getAttributes?.()||{};(d["data-gjs-editable"]==="true"||d["data-gjs-type"]==="text")&&r.set({editable:!0,selectable:!0},{silent:!0}),r.set({stylable:!0},{silent:!0})}catch{}}),t.on("style:custom",(r,d,u)=>{try{const h=u||t.getSelected();if(h&&r&&d!==void 0){if(h.set({stylable:!0},{silent:!0}),typeof h.addStyle=="function")h.addStyle(r,d);else{const f=h.getStyle()||{};f[r]=d,h.setStyle(f)}if(t.CssComposer){const f=h.cid||h.getId?.();if(f){let j=h.getClasses().find(b=>b&&!b.startsWith("gjs-"));j||(j=`gjs-comp-${f}`,h.addClass(j));const v=`.${j}`;let L=t.CssComposer.getRule(v);if(L||(L=t.CssComposer.add(v)),L){const b=L.get("style")||{};b[r]=d,L.set("style",b)}}}requestAnimationFrame(()=>{h.view?.updateStyle?.(),h.trigger("change:style"),t.refresh()})}}catch(h){console.warn("Style custom error:",h)}});let ge=null;t.on("change",()=>{ge&&clearTimeout(ge),ge=setTimeout(()=>{try{const r=t.getSelected();if(r&&t.StyleManager){const d=r.getStyle();d&&Object.keys(d).length>0&&(r.view?.updateStyle?.(),t.refresh())}}catch{}},100)});const ve=()=>{if(e)return;const r=fe.current?.querySelector(".builder-right-panel");r&&(r.style.display="flex",r.style.visibility="visible",r.style.opacity="1",r.style.width="300px",r.style.flexShrink="0");const d=document.getElementById("style-panel");d&&(d.style.display="block",d.style.visibility="visible",d.style.opacity="1",d.style.width="100%")},rt=()=>{try{fe.current&&(t.getEl?.()?.classList.contains("gjs-fullscreen")||document.querySelector(".gjs-editor.gjs-fullscreen")!==null?(fe.current.classList.add("gjs-fullscreen"),setTimeout(()=>{try{fe.current?.querySelectorAll("button")?.forEach(b=>{b&&(b.style.display="flex",b.style.visibility="visible",b.style.opacity="1",b.style.pointerEvents="auto",b.style.cursor="pointer",b.style.zIndex="10001")}),fe.current?.querySelectorAll("input, select, textarea")?.forEach(b=>{b&&(b.style.display="block",b.style.visibility="visible",b.style.opacity="1",b.style.pointerEvents="auto",b.style.zIndex="10001")});const f=fe.current?.querySelector(".builder-left-panel"),S=fe.current?.querySelector(".builder-right-panel"),j=fe.current?.querySelector(".builder-center-panel");f&&(f.style.display="flex",f.style.visibility="visible",f.style.opacity="1",f.style.pointerEvents="auto",f.style.width="280px",f.style.zIndex="10001"),S&&(S.style.display="flex",S.style.visibility="visible",S.style.opacity="1",S.style.pointerEvents="auto",S.style.width="300px",S.style.zIndex="10001"),j&&(j.style.display="flex",j.style.visibility="visible",j.style.opacity="1",j.style.pointerEvents="auto");const v=fe.current?.querySelector("#style-panel");if(v&&t.StyleManager){v.style.display="block",v.style.visibility="visible",v.style.opacity="1",v.style.background="#1e1e1e",v.style.minHeight="200px";const b=v.querySelectorAll(".gjs-sm-sector");(b.length===0||b.length<13)&&P==="style"&&typeof t.StyleManager.render=="function"&&t.StyleManager.render(),setTimeout(()=>{v.querySelectorAll(".gjs-sm-sector").forEach(I=>{I&&(I.style.display="block",I.style.visibility="visible",I.style.opacity="1")})},100)}const L=fe.current?.querySelector(".panel__devices");L&&(L.style.display="flex",L.style.visibility="visible",L.style.opacity="1",L.style.pointerEvents="auto")}catch(u){console.warn("Error ensuring fullscreen elements visibility:",u)}},50)):fe.current.classList.remove("gjs-fullscreen"))}catch{}},Ut=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],yt=()=>{e||rt()};Ut.forEach(r=>{document.addEventListener(r,yt,{passive:!0}),a(()=>document.removeEventListener(r,yt))}),rt(),t.on("load",()=>{setTimeout(rt,100);try{const r=t.getDevice();r&&O(r)}catch{}}),t.on("change:device",()=>{try{const r=t.getDevice();r&&O(r),Ie()}catch{}}),t.on("run:fullscreen",()=>{setTimeout(()=>{try{const r=document.getElementById("style-panel");r&&t.StyleManager&&(r.style.display="block",r.style.visibility="visible",r.style.opacity="1",r.style.background="#1e1e1e",P==="style"&&typeof t.StyleManager.render=="function"&&t.StyleManager.render(),setTimeout(()=>{r.querySelectorAll(".gjs-sm-sector").forEach(u=>{u&&(u.style.display="block",u.style.visibility="visible",u.style.opacity="1")})},100))}catch(r){console.warn("Error rendering Style Manager on fullscreen:",r)}},200)});const Ie=()=>{if(!e)try{const r=document.querySelector(".panel__devices");r&&r.querySelectorAll("button").forEach(u=>{u&&(u.style.display="flex",u.style.visibility="visible",u.style.opacity="1")})}catch{}},ze=(r=!1)=>{if(e)return;const d=t.BlockManager;if(!d){console.warn("‚ö†Ô∏è BlockManager not available in renderBlocks");return}const u=d.getAll?d.getAll():[],h=Array.isArray(u)?u.length:0;if(h===0){console.error("‚ùå CRITICAL: No blocks registered in BlockManager! Cannot render.");return}if(console.log(`üîÑ renderBlocks called: ${h} blocks registered, force=${r}`),!r&&me.current){const S=document.getElementById("blocks-panel")?.querySelectorAll(".gjs-block");if(S&&S.length>0){console.log(`‚úÖ Blocks already rendered (${S.length} found), skipping`);return}console.log("‚ö†Ô∏è blocksRenderedRef is true but no blocks in DOM, re-rendering...")}try{const f=document.getElementById("blocks-panel");if(!f){console.warn("‚ö†Ô∏è blocks-panel not found, retrying..."),setTimeout(()=>ze(r),200);return}const S=f.closest(".elementor-blocks-wrapper");if(S){const b=S,T=window.getComputedStyle(b);if(b.style.setProperty("display","block","important"),b.style.setProperty("visibility","visible","important"),b.style.setProperty("opacity","1","important"),window.getComputedStyle(b).display==="none"){console.error("Wrapper is still hidden after forcing visibility!"),setTimeout(()=>ze(r),100);return}}f.style.setProperty("display","block","important"),f.style.setProperty("visibility","visible","important"),f.style.setProperty("opacity","1","important"),f.style.setProperty("min-height","200px","important"),f.innerHTML="";const j=document.querySelectorAll("#blocks-panel");if(j.length>1)for(let b=1;b<j.length;b++)j[b].remove();const v=t.BlockManager.getAll?t.BlockManager.getAll():[],L=Array.isArray(v)?v.length:0;if(L===0){console.error("‚ùå CRITICAL: No blocks registered in BlockManager! Cannot render."),console.error("BlockManager state:",{hasGetAll:!!t.BlockManager.getAll,hasRender:!!t.BlockManager.render,hasGetCategories:!!t.BlockManager.getCategories});return}console.log(`üîÑ Rendering ${L} registered blocks into blocks-panel...`);try{const b=t.BlockManager.getAll?t.BlockManager.getAll():[],T=Array.isArray(b)?b:[];console.log(`üîÑ renderBlocks: Attempting to render ${T.length} registered blocks...`);const I=t.BlockManager.render();console.log("‚úÖ BlockManager.render() called successfully"),me.current=!0,setTimeout(()=>{f.querySelectorAll(".gjs-block").length===0&&T.length>0&&(console.warn("‚ö†Ô∏è BlockManager.render() returned 0 blocks, using manual render fallback..."),renderBlocksManually(f,T,t.BlockManager,t))},200)}catch(b){console.error("‚ùå Error calling BlockManager.render():",b),me.current=!1}setTimeout(()=>{const b=document.getElementById("blocks-panel");if(b){const T=b.querySelectorAll(".gjs-block"),I=b.querySelectorAll(".gjs-block-category-blocks"),A=b.querySelectorAll(".gjs-block-category");if(console.log(`üìä After render: ${T.length} blocks, ${I.length} category containers, ${A.length} categories`),T.length===0&&L>0){console.error("‚ùå CRITICAL: Blocks were registered but not rendered! Retrying..."),b.innerHTML="";try{t.BlockManager.render(),console.log("üîÑ Retry render called")}catch(M){console.error("‚ùå Retry render failed:",M)}return}I.forEach(M=>{M.style.setProperty("display","grid","important"),M.style.setProperty("grid-template-columns","repeat(2, 1fr)","important"),M.style.setProperty("gap","10px","important"),M.style.setProperty("width","100%","important"),M.style.setProperty("box-sizing","border-box","important")});const q=new Set;T.forEach(M=>{const Q=M.getAttribute("data-gjs-type")+"-"+M.textContent;q.has(Q)?M.remove():(q.add(Q),M.style.setProperty("display","flex","important"),M.style.setProperty("visibility","visible","important"),M.style.setProperty("opacity","1","important"),M.style.setProperty("pointer-events","auto","important"),M.style.setProperty("cursor","grab","important"),M.style.setProperty("position","relative","important"),M.style.setProperty("z-index","1","important"),M.style.setProperty("width","100%","important"),M.style.setProperty("max-width","100%","important"),M.style.setProperty("min-width","0","important"),M.style.setProperty("box-sizing","border-box","important"))});const R=b.querySelectorAll(".gjs-block");console.log(`‚úÖ Final blocks count: ${R.length} blocks rendered and visible`),b.querySelectorAll(".gjs-block-category").forEach(M=>{M.style.position="relative",M.style.zIndex="1",M.style.display="block",M.style.visibility="visible";const Q=M.querySelector(".gjs-block-category-title");Q&&!Q.hasAttribute("data-toggle-bound")&&(Q.setAttribute("data-toggle-bound","true"),Q.addEventListener("click",D=>{D.preventDefault(),D.stopPropagation();const Ne=M.getAttribute("data-open")!=="false",ee=M.querySelector(".gjs-block-category-blocks");Ne?(M.setAttribute("data-open","false"),ee&&(ee.style.display="none")):(M.setAttribute("data-open","true"),ee&&(ee.style.display="grid",ee.style.setProperty("display","grid","important"),ee.style.setProperty("grid-template-columns","repeat(2, 1fr)","important"),ee.style.setProperty("gap","10px","important")))}))});const F=b.querySelector(".gjs-blocks-c");F&&(F.style.display="flex",F.style.visibility="visible",F.style.opacity="1"),requestAnimationFrame(()=>{b.querySelectorAll(".gjs-block-category-blocks").forEach(D=>{D&&(D.style.setProperty("display","grid","important"),D.style.setProperty("grid-template-columns","repeat(2, 1fr)","important"),D.style.setProperty("gap","10px","important"),D.style.setProperty("width","100%","important"),D.style.setProperty("box-sizing","border-box","important"),D.style.setProperty("grid-auto-rows","90px","important"),D.style.setProperty("grid-auto-flow","row","important"))}),b.querySelectorAll(".gjs-block-category-blocks .gjs-block").forEach(D=>{D&&(D.style.setProperty("width","100%","important"),D.style.setProperty("max-width","100%","important"),D.style.setProperty("min-width","0","important"),D.style.setProperty("box-sizing","border-box","important"))})}),console.log(`Rendered ${T.length} blocks in 2-column grid`),me.current=!0}},150)}catch(f){console.error("Error rendering blocks:",f)}};t.on("load",()=>{setTimeout(()=>{ze(!0)},300),setTimeout(()=>{const d=document.getElementById("blocks-panel")?.querySelectorAll(".gjs-block");(!d||d.length===0)&&(console.log("No blocks found, retrying render..."),ze(!0))},800),setTimeout(Ie,200),setTimeout(()=>{try{const r=t.getWrapper();if(r){const d=r.components();let u=null;if(d&&d.length>0){const f=d.at(0);f&&(t.select(f),f.set({stylable:!0}),u=f)}else t.select(r),r.set({stylable:!0}),u=r;t.runCommand("open-sm");const h=document.getElementById("style-panel");h&&t.StyleManager&&u&&(h.innerHTML="",t.StyleManager.setTarget&&t.StyleManager.setTarget(u),P==="style"&&typeof t.StyleManager.render=="function"&&t.StyleManager.render(),h.style.display="block",h.style.visibility="visible",h.style.opacity="1",h.style.background="#1e1e1e",h.style.minHeight="300px")}}catch(r){console.warn("Error selecting component on load:",r)}},250),setTimeout(()=>{Ae(!0)},500)}),setTimeout(Ie,400);const ot=()=>{if(e)return!1;Ie();const r=document.querySelector(".panel__devices");if(!r)return!1;const d=new MutationObserver(()=>Ie());return d.observe(r,{childList:!0,subtree:!0,attributes:!0}),a(()=>d.disconnect()),!0},dt=()=>{ot()||e||setTimeout(dt,800)};setTimeout(dt,500),t.on("style:target",r=>{try{r&&r.component&&r.component.set({stylable:!0},{silent:!0})}catch{}}),setTimeout(()=>{if(!e)try{if(t.LayerManager&&P==="structure"){const r=document.getElementById("layers-panel");if(r){document.querySelectorAll(".gjs-layers, .gjs-layer-item, .gjs-layer-item-title").forEach(h=>{h.closest("#layers-panel")||h.remove()}),r.innerHTML="";const u=t.LayerManager.render();u&&r&&(typeof u=="object"&&u.nodeType&&r.appendChild(u),setTimeout(()=>{Ht(t,r)},150))}}}catch{}},500);const It=(()=>{let r=null;return()=>{e||(r&&clearTimeout(r),r=window.setTimeout(()=>{if(!e)try{if(t.LayerManager&&typeof t.LayerManager.render=="function"&&P==="structure"){const d=document.getElementById("layers-panel");if(d){document.querySelectorAll(".gjs-layers, .gjs-layer-item, .gjs-layer-item-title").forEach(f=>{f.closest("#layers-panel")||f.remove()}),d.innerHTML="";const h=t.LayerManager.render();h&&d&&(typeof h=="object"&&h.nodeType&&d.appendChild(h),setTimeout(()=>{Ht(t,d),At(t,d)},150)),setTimeout(()=>{const f=document.getElementById("layers-panel");f&&(At(t,f),f.querySelectorAll(".gjs-lm-layer").forEach(j=>{if(j){const v=j.querySelector(".gjs-lm-title"),L=j.querySelector(".gjs-lm-items");v&&L&&L.children.length>0&&(j.hasAttribute("data-expand-handler")||(j.setAttribute("data-expand-handler","true"),v.addEventListener("click",b=>{b.stopPropagation(),j.classList.toggle("gjs-lm-open")})))}}))},100)}}}catch{}r=null},250))}})();["component:add","component:remove","component:update","component:styleUpdate","component:selected"].forEach(r=>{const d=()=>It();t.on(r,d),a(()=>t.off(r,d))}),It();const zr=()=>{if(e)return!1;ve();const r=[];let d=!1;const u=fe.current?.querySelector(".builder-right-panel");if(u){const h=new MutationObserver(()=>ve());h.observe(u,{attributes:!0,attributeFilter:["style","class"]}),r.push(h),d=!0}return a(()=>{r.forEach(h=>h.disconnect())}),d},fr=()=>{zr()||e||setTimeout(fr,800)};setTimeout(fr,600),e||(clearTimeout(s),Le(!1),console.log("‚úÖ Editor initialized successfully"))}catch(l){console.error("‚ùå Error initializing editor:",l),e||(clearTimeout(s),je(l?.message||"Failed to initialize editor. Please check the console for details."),Le(!1),Ee.current&&(Ee.current.innerHTML=`
              <div style="padding: 40px; text-align: center; color: #6b7280;">
                <h3>Editor Initialization Error</h3>
                <p>${l?.message||"Failed to initialize editor"}</p>
                <button onclick="window.location.reload()" style="margin-top: 20px; padding: 10px 20px; background: #5e72e4; color: white; border: none; border-radius: 6px; cursor: pointer;">
                  Reload Page
                </button>
              </div>
            `))}})(),()=>{if(e=!0,clearTimeout(s),o.forEach(l=>{try{l()}catch{}}),document.getElementById("style-panel"),H.current){try{H.current.destroy()}catch{}H.current=null}}},[]),C.useEffect(()=>{if(!Ee.current&&!H.current){const e=setTimeout(()=>{Ee.current&&!H.current&&console.log("üîÑ EditorRef became available, editor should initialize now")},100);return()=>clearTimeout(e)}},[Ee.current]),C.useEffect(()=>{const e=document.getElementById("blocks-panel");if(!e)return;const o=e.querySelectorAll(".gjs-block");if(o.length===0)return;const a=Me.trim().toLowerCase(),s=e.querySelectorAll(".gjs-block-category");o.forEach(l=>{const x=(l.textContent||"").toLowerCase(),i=!a||x.includes(a);l.style.display=i?"flex":"none",l.style.visibility=i?"visible":"hidden",i&&(l.style.width="100%",l.style.maxWidth="100%",l.style.minWidth="0")}),s.forEach(l=>{const x=!!l.querySelector('.gjs-block[style*="display: flex"]');l.style.display=x?"block":"none"})},[Me]),C.useEffect(()=>{const e=document.getElementById("blocks-panel");if(!e)return;const o=()=>{e.querySelectorAll(".gjs-block-category").forEach(l=>{const x=l.querySelector(".gjs-block-category-title");x&&!x.hasAttribute("data-toggle-bound")&&(x.setAttribute("data-toggle-bound","true"),x.addEventListener("click",i=>{i.preventDefault(),i.stopPropagation();const n=l.getAttribute("data-open")!=="false",t=l.querySelector(".gjs-block-category-blocks");n?(l.setAttribute("data-open","false"),t&&(t.style.display="none")):(l.setAttribute("data-open","true"),t&&(t.style.setProperty("display","grid","important"),t.style.setProperty("grid-template-columns","repeat(2, 1fr)","important"),t.style.setProperty("gap","10px","important")))}))})};o();const a=new MutationObserver(()=>{o()});return a.observe(e,{childList:!0,subtree:!0}),()=>{a.disconnect()}},[P]);const ur=C.useCallback(e=>new Promise(o=>{const a=document.createElement("canvas");a.width=800,a.height=600;const s=a.getContext("2d");if(!s){const p=`<svg xmlns="http://www.w3.org/2000/svg" width="800" height="600">
          <defs>
            <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
              <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
            </linearGradient>
          </defs>
          <rect width="800" height="600" fill="url(#grad)"/>
          <text x="400" y="280" font-family="Arial, sans-serif" font-size="48" font-weight="bold" fill="white" text-anchor="middle">${e}</text>
          <text x="400" y="340" font-family="Arial, sans-serif" font-size="24" fill="rgba(255,255,255,0.9)" text-anchor="middle">Custom Theme</text>
        </svg>`,g=new Blob([p],{type:"image/svg+xml"});o(g);return}const l=s.createLinearGradient(0,0,a.width,a.height);l.addColorStop(0,"#667eea"),l.addColorStop(1,"#764ba2"),s.fillStyle=l,s.fillRect(0,0,a.width,a.height),s.fillStyle="rgba(255, 255, 255, 0.1)",s.beginPath(),s.arc(100,100,60,0,Math.PI*2),s.fill(),s.beginPath(),s.arc(700,500,80,0,Math.PI*2),s.fill(),s.beginPath(),s.arc(650,100,40,0,Math.PI*2),s.fill(),s.fillStyle="#ffffff",s.font="bold 56px Arial, sans-serif",s.textAlign="center",s.textBaseline="middle";const x=700,i=e.split(" ");let n="",t=250;for(let p=0;p<i.length;p++){const g=n+i[p]+" ";s.measureText(g).width>x&&p>0?(s.fillText(n,a.width/2,t),n=i[p]+" ",t+=70):n=g}s.fillText(n,a.width/2,t),s.font="28px Arial, sans-serif",s.fillStyle="rgba(255, 255, 255, 0.9)",s.fillText("Custom Theme",a.width/2,t+60),a.toBlob(p=>{if(p)o(p);else{const g=`<svg xmlns="http://www.w3.org/2000/svg" width="800" height="600">
            <defs>
              <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
              </linearGradient>
            </defs>
            <rect width="800" height="600" fill="url(#grad)"/>
            <text x="400" y="280" font-family="Arial, sans-serif" font-size="48" font-weight="bold" fill="white" text-anchor="middle">${e}</text>
            <text x="400" y="340" font-family="Arial, sans-serif" font-size="24" fill="rgba(255,255,255,0.9)" text-anchor="middle">Custom Theme</text>
          </svg>`;o(new Blob([g],{type:"image/svg+xml"}))}},"image/png")}),[]),Ar=C.useCallback(async e=>{try{const o=H.current;if(!o||typeof o.getHtml!="function"){alert("Editor not ready");return}kt(!0),await new Promise(w=>requestAnimationFrame(w)),Et(),await new Promise(w=>setTimeout(w,50)),await new Promise(w=>setTimeout(w,150));const{pagesSnapshot:a}=Oe();console.log("üì∏ Captured snapshot before save:",{currentPageId:Z,snapshotPages:a.map(w=>({id:w.id,name:w.name,htmlLength:w.html?.length||0,cssLength:w.css?.length||0}))});const s=a.map(w=>{const E=ue.find(B=>B.id===w.id);return{...w,html:w.html&&w.html.trim().length>0?w.html:E?.html||oe,css:w.css&&w.css.trim().length>0?w.css:E?.css||""}});He(s),qe.current=s;const l=s.map(w=>({id:w.id,name:w.name,hasHtml:!!w.html&&w.html.trim().length>0,hasCss:!!w.css&&w.css.trim().length>0,htmlLength:w.html?.length||0,cssLength:w.css?.length||0}));console.log("üíæ Saving theme with pages:",{totalPages:s.length,currentPageId:Z,pages:l,pagesData:s.map(w=>({id:w.id,name:w.name,htmlPreview:w.html?.substring(0,100),cssPreview:w.css?.substring(0,100)}))}),l.forEach((w,E)=>{w.hasHtml||console.warn(`‚ö†Ô∏è Page ${E+1} (${w.name}) has no HTML content!`),w.hasCss||console.warn(`‚ö†Ô∏è Page ${E+1} (${w.name}) has no CSS content!`)});const x=s.map(w=>w.css||"").filter(Boolean).join(`

`),i=Wt(s,Ce||"Theme",x);i.match(/ziplofy-pages-data/)?console.log("‚úÖ Pages data found in export HTML"):console.error("‚ùå ERROR: Pages data not found in export HTML!"),console.log("üì¶ Built export HTML:",{htmlLength:i.length,containsPagesData:i.includes("ziplofy-pages-data"),combinedCssLength:x.length});let t;const p=G&&/^[0-9a-fA-F]{24}$/.test(G);p?t=await ur(Ce||"My Theme"):t=await ur(Ce||"My Theme"),await new Promise(w=>setTimeout(w,50));let g=G||"";const m=it||Ye;let k=!1;if(p&&!m)try{const w=await dr(G,Ce,i,x,t);w?g=w._id:(console.warn("Update returned empty result; will create a new theme instead."),k=!0)}catch(w){if(w?.response?.status===404)console.warn("Theme not found while updating (404); creating a new theme instead."),k=!0;else throw w}else m&&(console.log("Editing installed theme - will create a new custom theme"),k=!0);if(!p||k){if(G&&!p){console.warn(`Invalid theme ID format (${G}). Creating new theme instead.`);try{const V=`ziplofy.builder.pages.${G}`;localStorage.removeItem(V),console.log("Cleared localStorage for invalid theme ID:",G)}catch(V){console.warn("Failed to clear old localStorage:",V)}const B=new URL(window.location.href);B.searchParams.delete("id"),window.history.replaceState({},"",B.toString())}const w=await lr(Ce,i,x,t);if(!w)throw new Error("Failed to create theme");g=w._id;const E=new URL(window.location.href);E.searchParams.set("id",g),window.history.replaceState({},"",E.toString()),gr()}kt(!1),setTimeout(()=>{const w=qe.current.find(E=>E.id===Z);w&&H.current&&(console.log("üîÑ Refreshing editor with saved state after save..."),ke(w.html||oe,w.css||""))},200),e?(localStorage.setItem("ziplofy.appliedCustomThemeId",g),Mt(!0),De(!0),$e(!1),setTimeout(()=>Mt(!1),3e3)):$e(!1)}catch(o){kt(!1),console.error("Error saving theme:",o);let a="Failed to save theme";o?.code==="ECONNABORTED"||o?.message?.includes("timeout")?a="Upload timeout: The theme is very large. Please try again or reduce the theme size.":o?.response?.status===500?a="Server error: The theme might be too large or there was a server issue. Please try again or reduce the theme size.":o?.response?.status===413||o?.message?.includes("File too large")||o?.message?.includes("MulterError")?a="Theme too large: The theme exceeds the maximum size limit (500MB). Please reduce the size of your theme content.":o?.response?.data?.message?a=o.response.data.message:o?.message&&(a=o.message),alert(a)}},[lr,Oe,G,Ce,dr,Wt,Et,Z,ke]),Ir=C.useCallback(()=>{try{const e=H.current;if(!e||typeof e.getHtml!="function"){alert("Editor not ready");return}e.trigger&&e.trigger("update");const o=e.getWrapper();o&&o.view&&o.view.render?.();let a="";try{o?(a=e.getHtml({component:o})||"",(!a||a.trim().length===0)&&(a=e.getHtml()||"")):a=e.getHtml()||"",(!a||a.trim().length===0)&&(console.warn("‚ö†Ô∏è No HTML from editor, using default"),a=oe)}catch(g){console.error("Error getting HTML from editor:",g),a=e.getHtml()||oe}console.log("üìÑ Preview - Current HTML length:",a.length,"Preview:",a.substring(0,300));let s="";if(e.getCss){const g=e.getCss()||"";g&&g.trim().length>0&&(s=g,console.log("‚úÖ Got CSS from editor.getCss():",g.length,"chars"))}if(e.CssComposer)try{const g=e.CssComposer.getAll();if(g&&g.length>0){const m=g.map(k=>{try{if(k.toCSS)return k.toCSS();const w=k.selectorsToString?k.selectorsToString():"",E=k.getStyle?k.getStyle():{};if(w&&E&&Object.keys(E).length>0){const B=Object.entries(E).map(([V,$])=>`  ${V}: ${$};`).join(`
`);return`${w} {
${B}
}`}return""}catch{return""}}).filter(Boolean).join(`

`);m&&m.trim().length>0&&(s=m+(s?`

`+s:""))}}catch(g){console.warn("Failed to get CSS from CssComposer:",g)}try{if(o){const g=o.getStyle?o.getStyle():null;if(g&&Object.keys(g).length>0){const k=`.gjs-wrapper-body {
${Object.entries(g).map(([w,E])=>`  ${w}: ${E};`).join(`
`)}
}`;s.includes(".gjs-wrapper-body")?s=s.replace(/\.gjs-wrapper-body\s*\{[^}]*\}/g,k):s=k+`

`+s,console.log("‚úÖ Added wrapper styles:",Object.keys(g).length,"properties")}}}catch(g){console.warn("Failed to extract wrapper styles:",g)}if(!s||s.trim().length===0)try{if(o){const g=[],m=w=>{w&&(g.push(w),(w.components?w.components():[]).forEach(B=>m(B)))};m(o);const k=g.map(w=>{const E=w.getStyle?w.getStyle():null,B=w.getClasses?w.getClasses():[];if(E&&Object.keys(E).length>0){const V=B.length>0?`.${B.join(".")}`:`#${w.getId()}`,$=Object.entries(E).map(([ne,y])=>`  ${ne}: ${y};`).join(`
`);return`${V} {
${$}
}`}return null}).filter(Boolean).join(`

`);k&&(s=k,console.log("‚úÖ Extracted CSS from all components:",s.length,"chars"))}}catch(g){console.warn("Failed to extract component styles:",g)}const x=(qe.current||ue).map(g=>g.id===Z?{...g,html:a||oe,css:s||g.css||""}:g);console.log("üé¨ Preview - Using latest editor state:",{currentPageId:Z,htmlLength:a.length,cssLength:s.length,totalPages:x.length,htmlPreview:a.substring(0,200),cssPreview:s.substring(0,500)});let i=x.map(g=>g.css||"").filter(Boolean).join(`

`);const n=i.includes("background-image")||i.includes("background:");if(console.log("üé® Preview Theme - CSS Debug:",{totalPages:x.length,pagesWithCss:x.filter(g=>g.css&&g.css.trim()).length,combinedCssLength:i.length,hasBackgroundImage:n,backgroundImageCount:(i.match(/background-image/g)||[]).length,fullCss:i,firstPage:{name:x[0]?.name,cssLength:x[0]?.css?.length||0,cssPreview:x[0]?.css?.substring(0,500)}}),!i||i.trim().length===0){console.warn("‚ö†Ô∏è WARNING: No CSS found! Styles might not appear in preview."),console.log("Attempting to get CSS directly from editor...");const g=e.getCss?e.getCss():"";console.log("Direct CSS from editor:",{length:g?.length,preview:g?.substring(0,500)}),g&&g.trim().length>0&&(i=g)}if(!n){console.warn("‚ö†Ô∏è WARNING: No background-image found in CSS!"),console.log("Checking wrapper element directly for background...");const g=e.getWrapper();if(g){const m=g.getStyle();if(console.log("Wrapper styles:",m),m&&(m["background-image"]||m.background)){console.log("üîß FORCE FIX: Manually adding wrapper background to CSS");const w=`.gjs-wrapper-body {
${Object.entries(m).map(([E,B])=>`  ${E}: ${B};`).join(`
`)}
}`;i=w+`

`+i,console.log("‚úÖ Added wrapper CSS manually:",w)}}}const t=e.Canvas?.getFrameEl();if(t&&t.contentWindow){const g=t.contentWindow.location;i=i.replace(/url\((['"]?)(?!data:)(?!http)([^'")]+)(['"]?)\)/gi,(m,k,w,E)=>{try{const B=new URL(w,g.href).href;return console.log("Converting relative URL:",{original:w,absolute:B}),`url(${k}${B}${E})`}catch{return m}})}console.log("Final CSS for preview (first 500 chars):",i.substring(0,500)),console.log("üì¶ Building preview HTML with:",{pagesCount:x.length,cssLength:i.length,firstPageHtmlLength:x[0]?.html?.length||0,firstPageCssLength:x[0]?.css?.length||0});const p=Wt(x,Ce||"Theme Preview",i);console.log("‚úÖ Preview HTML built:",{htmlLength:p.length,containsCss:p.includes("<style>"),containsPages:p.includes("ziplofy-pages-data"),htmlPreview:p.substring(0,500)}),We(""),setTimeout(()=>{We(p),se(!0),setTimeout(()=>{const g=document.getElementById("theme-preview-iframe");g&&g.contentDocument&&p&&(g.contentDocument.open(),g.contentDocument.write(p),g.contentDocument.close(),console.log("‚úÖ Forced iframe content update"))},100)},50),Et()}catch(e){console.error("Preview error:",e),alert("Failed to preview theme")}},[Wt,Ce,Et,Z,qe]);C.useEffect(()=>{if(H.current&&Z){const e=setTimeout(()=>{Et()},100);return()=>clearTimeout(e)}},[Z]),C.useEffect(()=>{if(P==="style"&&H.current){const e=H.current;e.getSelected()&&e.StyleManager&&setTimeout(()=>{const a=document.getElementById("style-panel"),s=document.querySelector('.elementor-panel-card[data-panel-type="style"]');if(a&&s){s.style.display="flex",s.style.visibility="visible",s.style.opacity="1",a.style.display="block",a.style.visibility="visible",a.style.opacity="1";try{a.innerHTML="",e.StyleManager.render(),setTimeout(()=>{a.querySelectorAll(".gjs-sm-sector").forEach(x=>{const i=x;i.classList.remove("gjs-sm-sector--closed"),i.classList.add("gjs-sm-sector--open");const n=i.querySelector(".gjs-sm-sector-content");n&&(n.style.cssText="display: block !important; visibility: visible !important; opacity: 1 !important; max-height: none !important;")})},100)}catch(l){console.error("Error rendering StyleManager on tab switch:",l)}}},150)}},[P]),C.useEffect(()=>{if(H.current){const e=H.current,o=s=>{const l=s?.get("type");if(s&&(l==="link"||l==="button"||l==="button-outline"||l==="button-text")){const i=s.getTrait("pageLink");if(i){const n=ue.map(t=>({id:t.id,value:t.id,name:t.name}));n.unshift({id:"",value:"",name:"-- Select Page --"}),i.set("options",n)}}const x=s?.components?.();x&&typeof x.forEach=="function"&&x.forEach(i=>o(i))},a=e.getWrapper&&e.getWrapper();a&&o(a)}},[ue]),C.useEffect(()=>{const e=o=>{const a=o.target;Pt&&!a.closest("[data-page-manager]")&&Rt(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[Pt]),C.useEffect(()=>{localStorage.getItem("ziplofy.elementorTutorialSeen")||setTimeout(()=>{ce(!0)},1e3)},[]);const Lt=C.useCallback(()=>{const e=document.getElementById("blocks-panel");if(!e)return;const o=e.querySelectorAll(".gjs-block");if(o.length===0)return;const a=(Me||"").toLowerCase();o.forEach(s=>{const l=(s.textContent||"").toLowerCase(),x=!a||l.includes(a);s.style.display=x?"flex":"none",s.style.visibility=x?"visible":"hidden"})},[Me]);C.useEffect(()=>{Lt()},[Lt]),C.useEffect(()=>{G&&H.current&&(console.log("üìù Editing custom theme - ensuring widgets are visible"),K("widgets"),setTimeout(()=>{const e=H.current,o=document.getElementById("blocks-panel"),a=document.querySelector(".elementor-blocks-wrapper");e?.BlockManager&&o&&(a&&(a.style.setProperty("display","block","important"),a.style.setProperty("visibility","visible","important"),a.style.setProperty("opacity","1","important")),o.style.setProperty("display","block","important"),o.style.setProperty("visibility","visible","important"),o.style.setProperty("opacity","1","important"),o.querySelectorAll(".gjs-block").length===0&&(console.log("No blocks found when editing theme, rendering..."),o.innerHTML="",e.BlockManager.render(),me.current=!0))},500))},[G]),C.useEffect(()=>{if(P==="widgets"){const e=document.querySelector(".elementor-blocks-wrapper");e&&(e.style.setProperty("display","block","important"),e.style.setProperty("visibility","visible","important"),e.style.setProperty("opacity","1","important"));const o=()=>{const a=H.current;if(!a?.BlockManager){console.warn("BlockManager not available yet, retrying..."),setTimeout(o,200);return}const s=document.getElementById("blocks-panel");if(!s){console.warn("blocks-panel not found, retrying..."),setTimeout(()=>{const n=document.getElementById("blocks-panel"),t=H.current;if(n&&t?.BlockManager){const p=n.closest(".elementor-blocks-wrapper");p&&(p.style.setProperty("display","block","important"),p.style.setProperty("visibility","visible","important"),p.style.setProperty("opacity","1","important")),n.style.setProperty("display","block","important"),n.style.setProperty("visibility","visible","important"),n.style.setProperty("opacity","1","important"),n.innerHTML="",t.BlockManager.render(),me.current=!0}},200);return}const l=s.closest(".elementor-blocks-wrapper");l&&(l.style.setProperty("display","block","important"),l.style.setProperty("visibility","visible","important"),l.style.setProperty("opacity","1","important")),s.style.setProperty("display","block","important"),s.style.setProperty("visibility","visible","important"),s.style.setProperty("opacity","1","important");const x=s.querySelectorAll(".gjs-block"),i=!!s.querySelector(".gjs-blocks-c");if(x.length===0||!i)console.log("No blocks found in widgets tab, rendering..."),s.innerHTML="",a.BlockManager.render(),me.current=!0,setTimeout(()=>{const n=H.current;s.querySelectorAll(".gjs-block").length===0&&n?.BlockManager&&(console.log("Still no blocks after render, retrying..."),s.innerHTML="",n.BlockManager.render()),setTimeout(()=>{const p=s.querySelectorAll(".gjs-block");p.forEach(k=>{k&&(k.style.display="flex",k.style.visibility="visible",k.style.opacity="1",k.style.pointerEvents="auto",k.style.cursor="grab",k.style.position="relative",k.style.zIndex="1")}),s.querySelectorAll(".gjs-block-category").forEach(k=>{k&&(k.style.display="block",k.style.visibility="visible")});const m=s.querySelector(".gjs-blocks-c");m&&(m.style.display="flex",m.style.visibility="visible",m.style.opacity="1"),console.log(`Rendered ${p.length} blocks in widgets tab`),Lt()},100)},200);else{me.current=!0,x.forEach(p=>{p&&(p.style.display="flex",p.style.visibility="visible",p.style.opacity="1",p.style.pointerEvents="auto",p.style.cursor="grab",p.style.position="relative",p.style.zIndex="1")}),s.querySelectorAll(".gjs-block-category").forEach(p=>{p&&(p.style.display="block",p.style.visibility="visible")});const t=s.querySelector(".gjs-blocks-c");t&&(t.style.display="flex",t.style.visibility="visible",t.style.opacity="1"),Lt()}};o()}},[P,Lt]),C.useEffect(()=>{if(P==="widgets"){const e=document.getElementById("blocks-panel"),o=document.querySelector(".elementor-blocks-wrapper");if(!e||!o)return;o.style.setProperty("display","block","important"),o.style.setProperty("visibility","visible","important"),o.style.setProperty("opacity","1","important");const a=new MutationObserver(()=>{if(P==="widgets"){const p=window.getComputedStyle(o);(p.display==="none"||p.visibility==="hidden"||p.opacity==="0")&&(console.warn("Wrapper was hidden! Restoring visibility..."),o.style.setProperty("display","block","important"),o.style.setProperty("visibility","visible","important"),o.style.setProperty("opacity","1","important"))}});a.observe(o,{attributes:!0,attributeFilter:["style","class"],subtree:!1});let s=e.querySelectorAll(".gjs-block").length;e.innerHTML;let l=null,x=!1;const i=new MutationObserver(p=>{if(x)return;const m=e.querySelectorAll(".gjs-block").length;e.innerHTML,p.forEach(k=>{k.type==="childList"&&k.removedNodes.length>0&&Array.from(k.removedNodes).filter(E=>E.nodeType===Node.ELEMENT_NODE&&(E.classList.contains("gjs-block")||E.querySelector(".gjs-block"))).length>0&&m===0&&s>0&&e.innerHTML.trim()===""&&(l&&clearTimeout(l),l=setTimeout(()=>{if(e.querySelectorAll(".gjs-block").length===0&&e.innerHTML.trim()===""&&H.current?.BlockManager){console.warn("Blocks were removed! Restoring..."),x=!0;const B=e.closest(".elementor-blocks-wrapper");B&&(B.style.setProperty("display","block","important"),B.style.setProperty("visibility","visible","important"),B.style.setProperty("opacity","1","important")),H.current.BlockManager.render(),setTimeout(()=>{const V=e.querySelectorAll(".gjs-block");V.forEach(ne=>{ne&&(ne.style.display="flex",ne.style.visibility="visible",ne.style.opacity="1",ne.style.pointerEvents="auto",ne.style.cursor="grab",ne.style.position="relative",ne.style.zIndex="1")}),e.querySelectorAll(".gjs-block-category").forEach(ne=>{ne&&(ne.style.display="block",ne.style.visibility="visible")}),s=V.length,e.innerHTML,x=!1,console.log(`Restored ${V.length} blocks`)},150)}},300))}),m>0&&(s=m)});i.observe(e,{childList:!0,subtree:!0,attributes:!1,characterData:!1});const n=()=>{if(x)return;const p=document.querySelector(".elementor-blocks-wrapper");p&&(p.style.setProperty("display","block","important"),p.style.setProperty("visibility","visible","important"),p.style.setProperty("opacity","1","important")),e.style.setProperty("display","block","important"),e.style.setProperty("visibility","visible","important"),e.style.setProperty("opacity","1","important");const g=e.querySelectorAll(".gjs-block");g.length>0?g.forEach(m=>{m&&(m.style.display="flex",m.style.visibility="visible",m.style.opacity="1",m.style.pointerEvents="auto",m.style.cursor="grab")}):me.current&&H.current?.BlockManager&&e.innerHTML.trim()===""&&(console.warn("Periodic check: Blocks missing, restoring..."),e.innerHTML="",H.current.BlockManager.render(),me.current=!0)};n();const t=setInterval(()=>{const p=document.querySelector(".elementor-blocks-wrapper");p&&P==="widgets"&&(p.style.setProperty("display","block","important"),p.style.setProperty("visibility","visible","important"),p.style.setProperty("opacity","1","important")),n()},500);return()=>{l&&clearTimeout(l),i.disconnect(),a.disconnect(),clearInterval(t)}}},[P]),C.useEffect(()=>{if(P==="style"){const e=()=>{const a=H.current;if(!a?.StyleManager){console.warn("StyleManager not available yet, retrying..."),setTimeout(e,200);return}const s=document.getElementById("style-panel");if(!s){console.warn("style-panel not found, retrying..."),setTimeout(e,200);return}document.querySelectorAll(".gjs-sm-sector, .gjs-sm-property, .gjs-sm-properties").forEach(n=>{n.closest("#style-panel")||n.remove()});let x=a.getSelected();if(x)x.set({stylable:!0});else{const n=a.getWrapper();n&&(a.select(n),n.set({stylable:!0}),x=n)}s.innerHTML="",x&&a.StyleManager.setTarget&&a.StyleManager.setTarget(x);const i=a.StyleManager.render();i&&s.appendChild(i),setTimeout(()=>{const n=s.querySelectorAll(".gjs-sm-sector");if(console.log(`Style Manager rendered with ${n.length} sectors`),n.length===0){console.warn("No sectors found after render, retrying..."),setTimeout(e,300);return}n.forEach(p=>{if(p){p.style.display="block",p.style.visibility="visible",p.style.opacity="1",p.style.background="#ffffff";const g=p.querySelector(".gjs-sm-sector-content");g&&(g.style.display="block",g.style.visibility="visible",g.style.opacity="1")}}),s.querySelectorAll(".gjs-sm-property").forEach(p=>{p&&(p.style.display="block",p.style.visibility="visible",p.style.opacity="1",p.querySelectorAll("input, select, textarea").forEach(m=>{m&&(m.style.pointerEvents="auto",m.style.cursor=m.tagName==="SELECT"?"pointer":"text",m.style.position="relative",m.style.zIndex="10")}))})},200)};setTimeout(()=>{try{const a=document.getElementById("style-panel");if(!a){console.warn("style-panel not found, starting render loop..."),e();return}a.style.setProperty("display","block","important"),a.style.setProperty("visibility","visible","important"),a.style.setProperty("opacity","1","important"),a.style.setProperty("background","#ffffff","important"),a.style.setProperty("min-height","200px","important"),a.style.setProperty("width","100%","important"),a.style.setProperty("height","auto","important"),a.style.setProperty("position","relative","important"),a.style.setProperty("z-index","1","important");const s=a.closest(".elementor-panel-card");s&&(s.style.setProperty("display","flex","important"),s.style.setProperty("visibility","visible","important"),s.style.setProperty("opacity","1","important"));const l=a.closest(".elementor-left-scroll");l&&(l.style.setProperty("display","flex","important"),l.style.setProperty("visibility","visible","important"),l.style.setProperty("opacity","1","important")),e()}catch(a){console.warn("Error rendering Style Manager:",a)}},100);const o=setInterval(()=>{if(P!=="style"){clearInterval(o);return}const a=document.getElementById("style-panel");if(!a)return;a.querySelectorAll("input, select, textarea").forEach(l=>{l&&!l.disabled&&(l.style.pointerEvents="auto",l.style.cursor=l.tagName==="SELECT"?"pointer":"text",l.style.position="relative",l.style.zIndex="10")})},1e3);return()=>clearInterval(o)}},[P]);const At=(e,o)=>{try{o.querySelectorAll(".gjs-lm-layer, .gjs-lm-item").forEach(s=>{if(s.dataset.enriched==="true")return;s.dataset.enriched="true";let l=null;if(e.LayerManager){const x=e.LayerManager.views||[];for(const i of x)if(i.el===s||s.contains(i.el)){l=i.model;break}!l&&e.LayerManager.getComponentFromView&&(l=e.LayerManager.getComponentFromView(s))}if(l)try{const x=l.get("tagName")||"div",i=l.get("attributes")?.id||l.get("id")||"",n=l.get("classes")?.map(B=>B.getName?.()||B.name||B).join(" ")||"",t=l.get("type")||x.toLowerCase(),p=l.components?l.components().length:0;let g=0,m=l.getParent();for(;m;)g++,m=m.getParent();s.setAttribute("data-depth",g.toString());const k=s.querySelector(".gjs-lm-title");if(k&&(k.setAttribute("data-element-type",x.toUpperCase()),p>0)){let B=k.querySelector(".gjs-lm-badge");B||(B=document.createElement("span"),B.className="gjs-lm-badge",k.appendChild(B)),B.textContent=p.toString()}let w=s.querySelector(".gjs-lm-element-info");if(!w&&(i||n)&&(w=document.createElement("div"),w.className="gjs-lm-element-info",s.appendChild(w)),w){if(w.innerHTML="",i){const B=document.createElement("span");B.className="element-id",B.textContent=`#${i}`,w.appendChild(B)}n&&n.split(" ").filter(V=>V.trim()).forEach(V=>{if(V){const $=document.createElement("span");$.className="element-class",$.textContent=`.${V}`,w.appendChild($)}})}const E=[];E.push(`Type: ${x.toUpperCase()}`),t&&t!==x.toLowerCase()&&E.push(`Component: ${t}`),i&&E.push(`ID: ${i}`),n&&E.push(`Classes: ${n}`),p>0&&E.push(`Children: ${p}`),s.setAttribute("title",E.join(" ‚Ä¢ "))}catch(x){console.warn("Error enriching layer item:",x)}})}catch(a){console.warn("Error enriching layer items:",a)}},Ht=(e,o)=>{try{At(e,o),o.querySelectorAll(".gjs-lm-layer, .gjs-lm-item").forEach(x=>{if(x.dataset.selectionHandlerAttached==="true")return;x.dataset.selectionHandlerAttached="true",(x.querySelector(".gjs-lm-title")||x).addEventListener("click",n=>{const t=n.target;if(!(t.classList.contains("gjs-lm-caret")||t.closest(".gjs-lm-caret"))){n.stopPropagation();try{let p=null;if(e.LayerManager){const g=e.LayerManager.views||[];for(const m of g)if(m.el===x||x.contains(m.el)){p=m.model;break}!p&&e.LayerManager.getComponentFromView&&(p=e.LayerManager.getComponentFromView(x))}if(!p){const g=e.getComponents(),m=(k,w)=>{const E=w.textContent?.trim()||"";for(const B of k.models||k)try{if(B.getEl?.()){const $=B.get("type")||"",ne=B.get("tagName")||"",y=E.toLowerCase().includes(ne.toLowerCase()),de=E.toLowerCase().includes($.toLowerCase());if(y||de)return B}if(B.components){const $=m(B.components(),w);if($)return $}}catch{}return null};p=m(g,x)}p?(e.select(p),K("style"),setTimeout(()=>{e.runCommand("open-sm")},100)):(K("style"),setTimeout(()=>{e.runCommand("open-sm")},100))}catch(p){console.warn("Error selecting component from layer:",p),K("style")}}})});let s=!1;o.addEventListener("click",()=>{s=!0,setTimeout(()=>{s=!1},300)},!0);const l=x=>{s&&x&&(K("style"),setTimeout(()=>{e.runCommand("open-sm")},100))};e._layerSelectionListenerAdded||(e.on("component:selected",l),e._layerSelectionListenerAdded=!0)}catch(a){console.warn("Error attaching layer selection handlers:",a)}};return C.useEffect(()=>{const e=H.current;e?.LayerManager&&P==="structure"&&setTimeout(()=>{try{const o=document.getElementById("layers-panel");if(!o){console.warn("layers-panel not found, retrying..."),setTimeout(()=>{const i=document.getElementById("layers-panel");if(i&&e.LayerManager){i.style.setProperty("display","block","important"),i.style.setProperty("visibility","visible","important"),i.style.setProperty("opacity","1","important"),document.querySelectorAll(".gjs-layers, .gjs-layer-item, .gjs-layer-item-title").forEach(g=>{g.closest("#layers-panel")||g.remove()}),i.querySelectorAll('.gjs-sm-sector, .gjs-sm-property, .gjs-sm-properties, .gjs-sm-sector-content, .gjs-sm-property__field, .gjs-field, [class*="gjs-sm"]').forEach(g=>{g.remove()}),i.innerHTML="";const p=e.LayerManager.render();p&&(i.appendChild(p),setTimeout(()=>{Ht(e,i),At(e,i)},150))}},100);return}document.querySelectorAll(".gjs-layers, .gjs-layer-item, .gjs-layer-item-title").forEach(i=>{i.closest("#layers-panel")||i.remove()}),o.querySelectorAll('.gjs-sm-sector, .gjs-sm-property, .gjs-sm-properties, .gjs-sm-sector-content, .gjs-sm-property__field, .gjs-field, [class*="gjs-sm"]').forEach(i=>{i.remove()}),o.style.setProperty("display","block","important"),o.style.setProperty("visibility","visible","important"),o.style.setProperty("opacity","1","important");const l=o.closest(".elementor-panel-card");l&&(l.style.setProperty("display","flex","important"),l.style.setProperty("visibility","visible","important"),l.style.setProperty("opacity","1","important"));const x=document.getElementById("style-panel");if(x){const i=x.closest('.elementor-panel-card[data-panel-type="style"]');i&&i.style.setProperty("display","none","important")}if(o.innerHTML="",typeof e.LayerManager.render=="function"){const i=e.LayerManager.render();i&&(o.appendChild(i),setTimeout(()=>{Ht(e,o),At(e,o)},150))}console.log("Layer Manager rendered in layers-panel")}catch(o){console.warn("Error rendering Layer Manager:",o)}},100)},[P]),C.useEffect(()=>{let e=null;const o=()=>{const a=document.getElementById("layers-panel"),s=document.getElementById("style-panel"),l=document.querySelector(".elementor-blocks-wrapper"),x=document.getElementById("blocks-panel");if(P==="widgets"){if(l&&l.querySelectorAll('.gjs-sm-sector, .gjs-sm-property, .gjs-sm-properties, .gjs-sm-sector-content, .gjs-sm-property__field, .gjs-field, [class*="gjs-sm"]').forEach(n=>{n.remove()}),x&&x.querySelectorAll('.gjs-sm-sector, .gjs-sm-property, .gjs-sm-properties, .gjs-sm-sector-content, .gjs-sm-property__field, .gjs-field, [class*="gjs-sm"]').forEach(n=>{n.remove()}),s){const i=s.closest('.elementor-panel-card[data-panel-type="style"]');i&&i.style.setProperty("display","none","important")}if(a){const i=a.closest('.elementor-panel-card[data-panel-type="structure"]');i&&i.style.setProperty("display","none","important")}}if(P==="structure"&&(a&&a.querySelectorAll('.gjs-sm-sector, .gjs-sm-property, .gjs-sm-properties, .gjs-sm-sector-content, .gjs-sm-property__field, .gjs-field, [class*="gjs-sm"]').forEach(n=>{n.remove()}),s)){const i=s.closest('.elementor-panel-card[data-panel-type="style"]');i&&i.style.setProperty("display","none","important")}if(P==="style"&&(s&&s.querySelectorAll('.gjs-layers, .gjs-layer-item, .gjs-layer-item-title, .gjs-lm-layer, .gjs-lm-title, .gjs-lm-items, [class*="gjs-lm"]').forEach(n=>{n.remove()}),a)){const i=a.closest('.elementor-panel-card[data-panel-type="structure"]');i&&i.style.setProperty("display","none","important")}P!=="style"&&document.querySelectorAll('.gjs-sm-sector, .gjs-sm-property, .gjs-sm-properties, .gjs-sm-sector-content, .gjs-sm-property__field, .gjs-field, [class*="gjs-sm"]').forEach(n=>{n.closest("#style-panel")||n.remove()}),P!=="structure"&&document.querySelectorAll('.gjs-layers, .gjs-layer-item, .gjs-layer-item-title, .gjs-lm-layer, .gjs-lm-title, .gjs-lm-items, [class*="gjs-lm"]').forEach(n=>{n.closest("#layers-panel")||n.remove()})};return o(),e&&clearTimeout(e),e=setTimeout(()=>{o()},100),()=>{e&&clearTimeout(e)}},[P]),c.jsxs("div",{ref:fe,className:"custom-theme-builder-root",style:{display:"flex",flexDirection:"column",height:"100vh",background:"#fff"},children:[_t&&c.jsxs("div",{style:{position:"fixed",top:"70px",left:"50%",transform:"translateX(-50%)",zIndex:1e4,background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"#fff",padding:"14px 28px",borderRadius:"8px",boxShadow:"0 4px 20px rgba(16, 185, 129, 0.4)",display:"flex",alignItems:"center",gap:"10px",fontSize:"14px",fontWeight:600,animation:"slideDown 0.3s ease-out"},children:[c.jsx("span",{style:{fontSize:"18px"},children:"‚úì"}),"Theme published successfully!"]}),c.jsxs("div",{className:"elementor-top-bar",children:[c.jsxs("div",{className:"elementor-top-bar-left",children:[c.jsx("div",{className:"elementor-top-bar-icon",onClick:()=>Re("/themes/all-themes"),title:"Back to Themes",children:"‚ò∞"}),c.jsxs("div",{style:{marginLeft:"12px",display:"flex",alignItems:"center",gap:"6px"},children:[c.jsx("span",{style:{fontSize:"10px",color:"rgba(0, 0, 0, 0.4)",fontWeight:600,letterSpacing:"0.5px",textTransform:"uppercase"},children:"Theme:"}),c.jsx("input",{type:"text",value:Ce,onChange:e=>{J(e.target.value),$e(!0)},placeholder:"Theme Name",style:{background:"rgba(0, 0, 0, 0.02)",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"6px",padding:"5px 12px",color:"#000",fontSize:"12px",fontWeight:500,minWidth:"140px",maxWidth:"340px",width:"auto",flex:"1 1 auto",outline:"none",transition:"all 0.2s ease",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},onFocus:e=>{e.target.style.borderColor="#00d2be",e.target.style.background="rgba(0, 210, 190, 0.08)",e.target.style.boxShadow="0 0 0 3px rgba(0, 210, 190, 0.12)"},onBlur:e=>{e.target.style.borderColor="rgba(0, 0, 0, 0.1)",e.target.style.background="rgba(0, 0, 0, 0.02)",e.target.style.boxShadow="none"}})]}),c.jsx("button",{onClick:()=>{const e=H.current;e&&e.UndoManager&&e.UndoManager.undo()},disabled:!Xe,title:"Undo (Ctrl+Z)",style:{background:Xe?"rgba(0, 0, 0, 0.05)":"rgba(0, 0, 0, 0.02)",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"6px",padding:"5px 10px",color:Xe?"#000":"rgba(0, 0, 0, 0.3)",cursor:Xe?"pointer":"not-allowed",fontSize:"11px",fontWeight:500,display:"flex",alignItems:"center",gap:"4px",transition:"all 0.2s ease",opacity:Xe?1:.5,marginLeft:"6px"},onMouseEnter:e=>{Xe&&(e.currentTarget.style.background="rgba(0, 0, 0, 0.08)",e.currentTarget.style.borderColor="rgba(0, 0, 0, 0.2)")},onMouseLeave:e=>{Xe&&(e.currentTarget.style.background="rgba(0, 0, 0, 0.05)",e.currentTarget.style.borderColor="rgba(0, 0, 0, 0.1)")},children:"‚Ü∂ Undo"}),c.jsx("button",{onClick:()=>{const e=H.current;e&&e.UndoManager&&e.UndoManager.redo()},disabled:!Je,title:"Redo (Ctrl+Shift+Z)",style:{background:Je?"rgba(0, 0, 0, 0.05)":"rgba(0, 0, 0, 0.02)",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"6px",padding:"5px 10px",color:Je?"#000":"rgba(0, 0, 0, 0.3)",cursor:Je?"pointer":"not-allowed",fontSize:"11px",fontWeight:500,display:"flex",alignItems:"center",gap:"4px",transition:"all 0.2s ease",opacity:Je?1:.5,marginLeft:"5px"},onMouseEnter:e=>{Je&&(e.currentTarget.style.background="rgba(0, 0, 0, 0.08)",e.currentTarget.style.borderColor="rgba(0, 0, 0, 0.2)")},onMouseLeave:e=>{Je&&(e.currentTarget.style.background="rgba(0, 0, 0, 0.05)",e.currentTarget.style.borderColor="rgba(0, 0, 0, 0.1)")},children:"‚Ü∑ Redo"}),c.jsx("div",{className:"elementor-top-bar-icon",title:"Add Widget",onClick:()=>{K("widgets"),tt(!1)},style:{cursor:"pointer"},children:"+"}),c.jsx("div",{className:"elementor-top-bar-icon",title:"Toggle Grid Overlay",onClick:()=>{hr(!Gt);const e=H.current;if(e){const o=e.Canvas;if(o){const a=o.getFrameEl();if(a&&a.contentDocument){const s=a.contentDocument.body;if(s)if(Gt){const l=a.contentDocument.getElementById("ziplofy-grid-overlay");l&&l.remove()}else{const l=a.contentDocument.createElement("div");l.id="ziplofy-grid-overlay",l.style.cssText=`
                          position: fixed;
                          top: 0;
                          left: 0;
                          width: 100%;
                          height: 100%;
                          background-image: 
                            linear-gradient(rgba(0, 0, 0, 0.1) 1px, transparent 1px),
                            linear-gradient(90deg, rgba(0, 0, 0, 0.1) 1px, transparent 1px);
                          background-size: 20px 20px;
                          pointer-events: none;
                          z-index: 9999;
                        `,s.appendChild(l)}}}}},style:{cursor:"pointer",opacity:Gt?1:.6},children:"‚äû"})]}),c.jsxs("div",{className:"elementor-top-bar-center",children:[c.jsxs("div",{"data-page-manager":!0,style:{position:"relative",display:"flex",alignItems:"center",gap:6,zIndex:1e4},children:[c.jsxs("button",{onClick:()=>Rt(!Pt),style:{padding:"6px 14px",background:"rgba(0, 210, 190, 0.08)",border:"1px solid rgba(0, 210, 190, 0.3)",borderRadius:"6px",color:"#00b8a8",cursor:"pointer",fontSize:11,fontWeight:500,display:"flex",alignItems:"center",gap:5,transition:"all 0.2s ease",position:"relative",zIndex:10001,maxWidth:"340px",minWidth:"120px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(0, 210, 190, 0.15)",e.currentTarget.style.borderColor="#00d2be"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(0, 210, 190, 0.08)",e.currentTarget.style.borderColor="rgba(0, 210, 190, 0.3)"},children:[c.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"300px"},children:ue.find(e=>e.id===Z)?.name||"Home"}),c.jsx("span",{style:{fontSize:9,transition:"transform 0.2s ease",transform:Pt?"rotate(180deg)":"rotate(0deg)",flexShrink:0},children:"‚ñº"})]}),Pt&&c.jsxs("div",{style:{position:"absolute",top:"100%",left:0,marginTop:6,background:"linear-gradient(145deg, #1a1a22 0%, #141418 100%)",border:"1px solid rgba(0, 210, 190, 0.3)",borderRadius:8,minWidth:240,maxHeight:400,overflowY:"auto",zIndex:99999,boxShadow:"0 12px 40px rgba(0, 0, 0, 0.6), 0 0 0 1px rgba(255, 255, 255, 0.05), 0 0 20px rgba(0, 210, 190, 0.15)",backdropFilter:"blur(10px)"},children:[c.jsxs("div",{style:{padding:"10px 12px",borderBottom:"1px solid rgba(255, 255, 255, 0.08)",fontSize:9,color:"rgba(0, 210, 190, 0.8)",fontWeight:700,letterSpacing:"0.5px",textTransform:"uppercase",background:"rgba(0, 210, 190, 0.05)"},children:["PAGES (",ue.length,")"]}),ue.map(e=>c.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid rgba(255, 255, 255, 0.05)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",background:e.id===Z?"rgba(0, 210, 190, 0.12)":"transparent",transition:"all 0.2s ease",position:"relative"},onMouseEnter:o=>{e.id!==Z&&(o.currentTarget.style.background="rgba(255, 255, 255, 0.05)")},onMouseLeave:o=>{e.id!==Z&&(o.currentTarget.style.background="transparent")},onClick:()=>{Tr(e.id),Rt(!1)},children:[e.id===Z&&c.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:"3px",background:"linear-gradient(180deg, #00d2be 0%, #00b8a8 100%)",borderRadius:"0 2px 2px 0"}}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flex:1,paddingLeft:e.id===Z?8:0},children:[c.jsx("input",{type:"text",value:e.name,onClick:o=>o.stopPropagation(),onChange:o=>{o.stopPropagation(),Lr(e.id,o.target.value)},style:{background:"transparent",border:"none",color:e.id===Z?"#00d2be":"#fff",fontSize:13,padding:"4px 6px",flex:1,outline:"none",fontWeight:e.id===Z?600:400,borderRadius:"4px"},onFocus:o=>{o.target.style.background="rgba(255, 255, 255, 0.05)",o.target.style.border="1px solid rgba(0, 210, 190, 0.3)",o.target.style.padding="3px 5px"},onBlur:o=>{o.target.style.background="transparent",o.target.style.border="none",o.target.style.padding="4px 6px"}}),e.id===Z&&c.jsx("span",{style:{fontSize:8,color:"#00d2be",fontWeight:700},children:"‚óè"})]}),ue.length>1&&c.jsx("button",{onClick:o=>{o.stopPropagation(),Er(e.id)},style:{background:"transparent",border:"none",color:"rgba(220, 38, 38, 0.7)",cursor:"pointer",padding:"6px 10px",fontSize:14,borderRadius:6,transition:"all 0.2s ease"},onMouseEnter:o=>{o.currentTarget.style.background="rgba(220, 38, 38, 0.15)",o.currentTarget.style.color="#dc2626"},onMouseLeave:o=>{o.currentTarget.style.background="transparent",o.currentTarget.style.color="rgba(220, 38, 38, 0.7)"},children:"‚úï"})]},e.id)),c.jsxs("div",{onClick:()=>{Pr(),Rt(!1)},style:{padding:"14px 16px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8,color:"#00d2be",fontSize:13,fontWeight:600,borderTop:"1px solid rgba(255, 255, 255, 0.08)",background:"rgba(0, 210, 190, 0.05)",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(0, 210, 190, 0.12)",e.currentTarget.style.color="#00e5d1"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(0, 210, 190, 0.05)",e.currentTarget.style.color="#00d2be"},children:[c.jsx("span",{style:{fontSize:16,fontWeight:400},children:"+"}),c.jsx("span",{children:"Add New Page"})]})]})]}),c.jsxs("div",{className:"elementor-device-switcher",children:[c.jsx("button",{className:`elementor-device-btn ${ae==="desktop"?"active":""}`,onClick:()=>{try{const e=H.current;e&&e.setDevice&&(e.setDevice("desktop"),O("desktop"),setTimeout(()=>{const o=document.querySelector(".gjs-cv-canvas"),a=document.querySelector(".gjs-frame");o&&(o.style.setProperty("display","flex","important"),o.style.setProperty("justify-content","center","important"),o.style.setProperty("align-items","flex-start","important"),o.style.setProperty("width","100%","important"),o.style.setProperty("margin","0","important"),o.style.setProperty("padding","24px","important")),a&&(a.style.setProperty("min-width","1200px","important"),a.style.setProperty("max-width","1200px","important"),a.style.setProperty("width","1200px","important"),a.style.setProperty("margin","0 auto","important"))},100))}catch(e){console.error("Error switching to desktop:",e)}},title:"Desktop",children:"üíª"}),c.jsx("button",{className:`elementor-device-btn ${ae==="tablet"?"active":""}`,onClick:()=>{try{const e=H.current;e&&e.setDevice&&(e.setDevice("tablet"),O("tablet"),setTimeout(()=>{const o=document.querySelector(".gjs-cv-canvas"),a=document.querySelector(".gjs-frame");o&&(o.style.setProperty("display","flex","important"),o.style.setProperty("justify-content","center","important"),o.style.setProperty("align-items","flex-start","important"),o.style.setProperty("width","100%","important"),o.style.setProperty("margin","0","important"),o.style.setProperty("padding","24px","important")),a&&(a.style.setProperty("min-width","768px","important"),a.style.setProperty("max-width","768px","important"),a.style.setProperty("width","768px","important"),a.style.setProperty("margin","0 auto","important"))},100))}catch(e){console.error("Error switching to tablet:",e)}},title:"Tablet",children:"üì±"}),c.jsx("button",{className:`elementor-device-btn ${ae==="mobile"?"active":""}`,onClick:()=>{try{const e=H.current;e&&e.setDevice&&(e.setDevice("mobile"),O("mobile"),setTimeout(()=>{const o=document.querySelector(".gjs-cv-canvas"),a=document.querySelector(".gjs-frame");o&&(o.style.setProperty("display","flex","important"),o.style.setProperty("justify-content","center","important"),o.style.setProperty("align-items","flex-start","important"),o.style.setProperty("width","100%","important"),o.style.setProperty("margin","0","important"),o.style.setProperty("padding","24px","important")),a&&(a.style.setProperty("min-width","375px","important"),a.style.setProperty("max-width","375px","important"),a.style.setProperty("width","375px","important"),a.style.setProperty("margin","0 auto","important"))},100))}catch(e){console.error("Error switching to mobile:",e)}},title:"Mobile",children:"üì±"})]})]}),c.jsxs("div",{className:"elementor-top-bar-right",children:[c.jsx("div",{className:"elementor-top-bar-icon",onClick:()=>{try{const e=H.current;if(e){const o=e.getSelected();if(o){const a=o.getParent();a&&a.get("type")!=="wrapper"?e.select(a):console.log("No parent component to select")}else console.log("No component selected")}}catch(e){console.error("Error selecting parent:",e)}},title:"Select Parent (Alt+Click)",style:{cursor:"pointer"},children:"‚¨ÜÔ∏è"}),c.jsx("div",{className:"elementor-top-bar-icon",onClick:()=>{ir(!0)},title:"Notes & Changes",style:{cursor:"pointer"},children:"üìã"}),c.jsx("div",{className:"elementor-top-bar-icon",onClick:()=>{try{const e=H.current;if(e){const o=window.__ziplofyCopiedComponent;if(!o){console.log("No component copied");return}const a=e.getSelected();let s=e.getWrapper();if(a&&a.get("type")!=="wrapper")if(a.get("droppable")||a.getAttributes?.()?.["data-gjs-droppable"]==="*")s=a;else try{const n=a.parent();n&&n.get&&n.get("type")!=="wrapper"&&(s=n)}catch(n){console.warn("Could not get parent, using wrapper:",n)}if(!s){console.log("No target to paste into");return}let l=null;if(o.component)try{l=o.component.clone()}catch(i){if(console.warn("Error cloning from component reference:",i),o.html)try{const n=e.getWrapper();if(n){const t=n.get("content");n.set("content",o.html);const p=n.components();if(p&&p.length>0){const g=p.at(0);g&&(l=g,n.components().remove(l))}n.set("content",t)}}catch(n){console.error("Error parsing HTML:",n)}}else if(o.html)try{const i=e.getWrapper();if(i){const n=i.get("content");i.set("content",o.html);const t=i.components();if(t&&t.length>0){const p=t.at(0);p&&(l=p,i.components().remove(l))}i.set("content",n)}}catch(i){console.error("Error parsing HTML:",i)}if(!l){console.error("Failed to clone component");return}const x=i=>{try{const n=i.getAttributes?.()||{},t=i.get?.("tagName")?.toLowerCase?.()||"",p=n["data-gjs-droppable"]==="*"||t==="form",g=n["data-gjs-selectable"]!=="false";if(i.set({selectable:g,hoverable:!0,draggable:!0,stylable:!0,droppable:p},{silent:!0}),(n["data-gjs-editable"]==="true"||n["data-gjs-type"]==="text")&&i.set({editable:!0,type:"text"},{silent:!0}),e.CssComposer){const k=i.cid||i.getId?.();if(k){let E=i.getClasses().find(B=>B&&!B.startsWith("gjs-"));E||(E=`gjs-comp-${k}`,i.addClass(E))}}const m=i.components();m&&m.length>0&&m.forEach(k=>{x(k)})}catch(n){console.warn("Error configuring pasted component:",n)}};x(l),s.components?s.components().add(l):s.append(l),setTimeout(()=>{e.select(l)},50),console.log("Component pasted")}}catch(e){console.error("Error pasting component:",e)}},title:"Paste (Ctrl+V)",style:{cursor:"pointer"},children:"üìÑ"}),c.jsx("div",{className:"elementor-top-bar-icon",title:"Link Manager",onClick:()=>{const e=H.current;if(e){const o=e.getWrapper();if(o){const a=l=>{const x=[];if(!l)return x;try{const i=l.get?.("tagName")?.toLowerCase?.()||"",n=l.get?.("type")||"",t=l.getEl?.(),p=i==="a"||n==="link";let m=p||(i==="button"||n==="button"||n==="button-outline"||n==="button-text");if(t&&!m){const w=t.nodeName?.toLowerCase();m=w==="a"||w==="button"}if(m){const w=l.getAttributes?.()||{},E=w.href||l.get?.("href")||t?.getAttribute?.("href")||"",B=w["data-page-link"]||l.get?.("data-page-link")||t?.getAttribute?.("data-page-link")||"",V=t?.textContent?.trim()||t?.innerText?.trim()||l.get?.("content")||"Untitled";x.push({id:l.cid||l.getId?.()||Date.now().toString()+Math.random(),type:p?"link":"button",text:V.substring(0,50)+(V.length>50?"...":""),href:E,pageLink:B,component:l})}const k=l.components?.();k&&(typeof k.forEach=="function"?k.forEach(w=>{x.push(...a(w))}):Array.isArray(k)&&k.forEach(w=>{x.push(...a(w))}))}catch(i){console.warn("Error finding links in component:",i)}return x},s=a(o);console.log("Link Manager: Found",s.length,"links/buttons"),vr(s),St(!0)}}else St(!0)},style:{cursor:"pointer"},children:"üîó"}),c.jsx("div",{className:"elementor-top-bar-icon",title:"Global Search",onClick:()=>{Nt(!Vt),Vt||nr("")},style:{cursor:"pointer"},children:"üîç"}),c.jsx("div",{className:"elementor-top-bar-icon",onClick:()=>ce(!0),title:"Help",style:{cursor:"pointer"},children:"?"}),c.jsx("button",{className:"elementor-preview-btn",onClick:Ir,title:"Preview",children:"Preview"}),c.jsx("button",{className:"elementor-publish-btn",onClick:()=>Ar(!0),disabled:et,children:et?pr?"Modifying...":"Publishing...":pr?"Modify":"Publish"})]})]}),c.jsxs("div",{className:"builder-main-editor",style:{flex:1,display:"flex",overflow:"hidden",background:"#f1f3f5"},children:[c.jsxs("div",{className:`builder-left-panel ${re?"collapsed":""}`,children:[c.jsxs("div",{className:"elementor-elements-header",style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"18px 22px"},children:[!re&&c.jsx("span",{style:{fontSize:"13px",fontWeight:700,textTransform:"uppercase",letterSpacing:"1px",color:"#fff",textShadow:"0 1px 2px rgba(0, 0, 0, 0.3)"},children:"Elements"}),c.jsx("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),tt(!re)},className:"sidebar-toggle-btn",style:{position:re?"static":"absolute",right:re?"auto":"12px",top:re?"auto":"50%",transform:re?"none":"translateY(-50%)",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.12) 0%, rgba(255, 255, 255, 0.08) 100%)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"rgba(255, 255, 255, 0.9)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",fontSize:"16px",zIndex:10,margin:re?"0 auto":"0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)"},onMouseEnter:e=>{e.currentTarget.style.background="linear-gradient(135deg, rgba(0, 210, 190, 0.25) 0%, rgba(0, 210, 190, 0.15) 100%)",e.currentTarget.style.color="#00d2be",e.currentTarget.style.boxShadow="0 4px 16px rgba(0, 210, 190, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2)",e.currentTarget.style.borderColor="rgba(0, 210, 190, 0.3)",e.currentTarget.style.transform=re?"scale(1.1)":"translateY(-50%) scale(1.1)"},onMouseLeave:e=>{e.currentTarget.style.background="linear-gradient(135deg, rgba(255, 255, 255, 0.12) 0%, rgba(255, 255, 255, 0.08) 100%)",e.currentTarget.style.color="rgba(255, 255, 255, 0.9)",e.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1)",e.currentTarget.style.borderColor="rgba(255, 255, 255, 0.1)",e.currentTarget.style.transform=re?"scale(1)":"translateY(-50%) scale(1)"},title:re?"Expand Sidebar":"Collapse Sidebar",children:re?"‚ñ∂":"‚óÄ"})]}),!re&&c.jsxs("div",{className:"elementor-primary-tabs",children:[c.jsx("button",{className:`elementor-primary-tab ${P==="widgets"?"active":""}`,onClick:()=>K("widgets"),children:"Widgets"}),c.jsx("button",{className:`elementor-primary-tab ${P==="globals"?"active":""}`,onClick:()=>K("globals"),children:"Globals"}),c.jsx("button",{className:`elementor-primary-tab ${P==="structure"?"active":""}`,onClick:()=>K("structure"),children:"Structure"}),c.jsx("button",{className:`elementor-primary-tab ${P==="style"?"active":""}`,onClick:()=>K("style"),children:"Style"})]}),re&&c.jsxs("div",{className:"elementor-primary-tabs-collapsed",style:{display:"flex",flexDirection:"column",gap:"8px",padding:"12px"},children:[c.jsx("button",{className:`elementor-primary-tab-icon ${P==="widgets"?"active":""}`,onClick:()=>{tt(!1),K("widgets")},title:"Widgets",style:{width:"36px",height:"36px",borderRadius:"8px",border:"none",background:P==="widgets"?"rgba(0, 210, 190, 0.2)":"transparent",color:P==="widgets"?"#00d2be":"rgba(255, 255, 255, 0.6)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",transition:"all 0.2s ease"},onMouseEnter:e=>{P!=="widgets"&&(e.currentTarget.style.background="rgba(255, 255, 255, 0.1)",e.currentTarget.style.color="#00d2be")},onMouseLeave:e=>{P!=="widgets"&&(e.currentTarget.style.background="transparent",e.currentTarget.style.color="rgba(255, 255, 255, 0.6)")},children:"üì¶"}),c.jsx("button",{className:`elementor-primary-tab-icon ${P==="globals"?"active":""}`,onClick:()=>{tt(!1),K("globals")},title:"Globals",style:{width:"36px",height:"36px",borderRadius:"8px",border:"none",background:P==="globals"?"rgba(0, 210, 190, 0.2)":"transparent",color:P==="globals"?"#00d2be":"rgba(255, 255, 255, 0.6)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",transition:"all 0.2s ease"},onMouseEnter:e=>{P!=="globals"&&(e.currentTarget.style.background="rgba(255, 255, 255, 0.1)",e.currentTarget.style.color="#00d2be")},onMouseLeave:e=>{P!=="globals"&&(e.currentTarget.style.background="transparent",e.currentTarget.style.color="rgba(255, 255, 255, 0.6)")},children:"üåê"}),c.jsx("button",{className:`elementor-primary-tab-icon ${P==="structure"?"active":""}`,onClick:()=>{tt(!1),K("structure")},title:"Structure",style:{width:"36px",height:"36px",borderRadius:"8px",border:"none",background:P==="structure"?"rgba(0, 210, 190, 0.2)":"transparent",color:P==="structure"?"#00d2be":"rgba(255, 255, 255, 0.6)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",transition:"all 0.2s ease"},onMouseEnter:e=>{P!=="structure"&&(e.currentTarget.style.background="rgba(255, 255, 255, 0.1)",e.currentTarget.style.color="#00d2be")},onMouseLeave:e=>{P!=="structure"&&(e.currentTarget.style.background="transparent",e.currentTarget.style.color="rgba(255, 255, 255, 0.6)")},children:"üóÇÔ∏è"}),c.jsx("button",{className:`elementor-primary-tab-icon ${P==="style"?"active":""}`,onClick:()=>{tt(!1),K("style")},title:"Style",style:{width:"36px",height:"36px",borderRadius:"8px",border:"none",background:P==="style"?"rgba(0, 210, 190, 0.2)":"transparent",color:P==="style"?"#00d2be":"rgba(255, 255, 255, 0.6)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",transition:"all 0.2s ease"},onMouseEnter:e=>{P!=="style"&&(e.currentTarget.style.background="rgba(255, 255, 255, 0.1)",e.currentTarget.style.color="#00d2be")},onMouseLeave:e=>{P!=="style"&&(e.currentTarget.style.background="transparent",e.currentTarget.style.color="rgba(255, 255, 255, 0.6)")},children:"üé®"})]}),!re&&(P==="widgets"||P==="globals")&&c.jsxs("div",{className:"elementor-search-widget",children:[c.jsx("span",{className:"elementor-search-icon",children:"üîç"}),c.jsx("input",{value:Me,onChange:e=>te(e.target.value),placeholder:"Search Widget..."})]}),!re&&c.jsxs("div",{className:"elementor-left-scroll",children:[c.jsx("div",{className:"elementor-blocks-wrapper",style:{display:P==="widgets"?"block":"none",visibility:P==="widgets"?"visible":"hidden",opacity:P==="widgets"?"1":"0"},"aria-hidden":P!=="widgets",ref:e=>{e&&P==="widgets"&&(e.style.setProperty("display","block","important"),e.style.setProperty("visibility","visible","important"),e.style.setProperty("opacity","1","important"))},children:c.jsx("div",{id:"blocks-panel",style:{display:"block",visibility:"visible",opacity:1,minHeight:"200px"}})}),c.jsxs("div",{className:"elementor-secondary-panel",style:{display:P==="widgets"?"block":"none"},children:[c.jsx("div",{className:"elementor-secondary-title",children:"Settings"}),c.jsx("div",{id:"traits-panel",className:"elementor-secondary-body"})]}),c.jsx("div",{className:"elementor-blocks-wrapper elementor-globals-placeholder",style:{display:P==="globals"?"block":"none"},"aria-hidden":P!=="globals",children:"Globals coming soon"}),c.jsxs("div",{className:"elementor-panel-card","data-panel-type":"structure",style:{display:P==="structure"?"flex":"none"},"aria-hidden":P!=="structure",children:[c.jsx("div",{className:"elementor-panel-card-title",children:"Structure"}),c.jsx("div",{id:"layers-panel",className:"elementor-panel-card-body",style:{display:"block"}})]}),c.jsxs("div",{className:"elementor-panel-card","data-panel-type":"style",style:{display:P==="style"?"flex":"none"},"aria-hidden":P!=="style",children:[c.jsx("div",{className:"elementor-panel-card-title",children:"Style"}),c.jsx("div",{id:"style-panel",className:"elementor-panel-card-body elementor-style-body",style:{display:"block"}})]})]})]}),c.jsx("div",{className:"builder-center-panel",style:{flex:1,display:"flex",flexDirection:"column",background:"#f1f3f5",position:"relative"},children:c.jsxs("div",{style:{flex:1,overflow:"auto",display:"flex",flexDirection:"column",alignItems:"center",padding:"20px"},children:[c.jsxs("div",{className:"elementor-canvas-header",style:{width:"100%",maxWidth:"1200px",marginBottom:0},children:[c.jsx("div",{className:"elementor-canvas-site-name",children:Ce||"Ziplofy Theme"}),c.jsx("div",{className:"elementor-canvas-page-name",children:ue.find(e=>e.id===Z)?.name||"Home"})]}),c.jsxs("div",{style:{width:"100%",maxWidth:"1200px",background:"#fff",minHeight:"600px",position:"relative",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[jt&&c.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",minHeight:"600px",fontSize:14,color:"#6b7280",gap:"16px"},children:[c.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #e5e7eb",borderTop:"4px solid #5e72e4",borderRadius:"50%",animation:"spin 1s linear infinite"}}),c.jsx("div",{children:"Loading Elementor Editor..."}),c.jsx("div",{style:{fontSize:"12px",color:"#9ca3af"},children:"This may take a few moments"}),c.jsx("style",{children:`
                    @keyframes spin {
                      0% { transform: rotate(0deg); }
                      100% { transform: rotate(360deg); }
                    }
                  `})]}),ct&&c.jsx("div",{style:{padding:12,background:"#fef2f2",color:"#dc2626",borderRadius:6,fontSize:13,border:"1px solid #fecaca",margin:"20px"},children:ct}),c.jsx("div",{ref:Ee,style:{minHeight:"600px"}})]}),c.jsxs("div",{className:"elementor-canvas-footer",style:{width:"100%",maxWidth:"1200px",marginTop:0},children:["Copyright ¬© ",new Date().getFullYear()," ",Ce||"Ziplofy Theme"," | Powered by"," ",c.jsx("a",{href:"#",onClick:e=>e.preventDefault(),children:"Ziplofy Theme Builder"})]})]})})]}),Te&&c.jsx(qr,{onClose:()=>ce(!1)}),Vt&&c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e5,background:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>Nt(!1),children:c.jsxs("div",{style:{background:"#ffffff",border:"1px solid rgba(0, 0, 0, 0.2)",borderRadius:"12px",width:"600px",maxWidth:"90vw",maxHeight:"70vh",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.15)",display:"flex",flexDirection:"column"},onClick:e=>e.stopPropagation(),children:[c.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[c.jsx("h3",{style:{margin:0,color:"#000",fontSize:"18px",fontWeight:600},children:"Global Search"}),c.jsx("button",{onClick:()=>Nt(!1),style:{background:"transparent",border:"none",color:"#000",fontSize:"24px",cursor:"pointer",padding:"0",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"6px",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.1)"},onMouseLeave:e=>{e.currentTarget.style.background="transparent"},children:"√ó"})]}),c.jsx("input",{type:"text",value:Jt,onChange:e=>nr(e.target.value),placeholder:"Search components, text, styles...",autoFocus:!0,style:{width:"100%",padding:"12px 16px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#fff",fontSize:"14px",outline:"none"},onKeyDown:e=>{e.key==="Escape"&&Nt(!1)}})]}),c.jsx("div",{style:{padding:"16px",overflowY:"auto",flex:1},children:Jt?c.jsxs("div",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"14px"},children:['Searching for "',Jt,'"...',c.jsx("div",{style:{marginTop:"12px",fontSize:"13px",color:"rgba(255, 255, 255, 0.4)"},children:"Search functionality will find components, text content, and styles matching your query."})]}):c.jsx("div",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"14px",textAlign:"center",padding:"40px 0"},children:"Type to search for components, text, or styles..."})})]})}),xr&&c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e5,background:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>St(!1),children:c.jsxs("div",{style:{background:"#ffffff",border:"1px solid rgba(0, 0, 0, 0.2)",borderRadius:"12px",width:"600px",maxWidth:"90vw",maxHeight:"70vh",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.15)",display:"flex",flexDirection:"column"},onClick:e=>e.stopPropagation(),children:[c.jsx("div",{style:{padding:"20px",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[c.jsx("h3",{style:{margin:0,color:"#000",fontSize:"18px",fontWeight:600},children:"Link Manager"}),c.jsx("button",{onClick:()=>St(!1),style:{background:"transparent",border:"none",color:"#000",fontSize:"24px",cursor:"pointer",padding:"0",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"6px",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(0, 0, 0, 0.05)"},onMouseLeave:e=>{e.currentTarget.style.background="transparent"},children:"√ó"})]})}),c.jsxs("div",{style:{padding:"16px",overflowY:"auto",flex:1},children:[Ct.length>0&&c.jsxs("div",{style:{fontSize:"11px",color:"rgba(255, 255, 255, 0.6)",marginBottom:"12px",padding:"10px",background:"rgba(0, 210, 190, 0.1)",borderRadius:"6px",border:"1px solid rgba(0, 210, 190, 0.2)",lineHeight:"1.5"},children:[c.jsx("strong",{style:{color:"#00d2be"},children:"üí° How to use:"})," Click any link/button below to select it in the editor. The Widgets panel will open automatically where you can edit the link settings (Link Type, Page, or URL)."]}),Ct.length===0?c.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"rgba(255, 255, 255, 0.4)",fontSize:"13px"},children:[c.jsx("div",{style:{fontSize:"32px",marginBottom:"12px"},children:"üîó"}),c.jsx("div",{children:"No links or buttons found"}),c.jsx("div",{style:{fontSize:"11px",marginTop:"8px",color:"rgba(255, 255, 255, 0.3)"},children:"Add links or buttons to your theme to manage them here"})]}):c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[c.jsxs("div",{style:{fontSize:"12px",color:"rgba(255, 255, 255, 0.5)",marginBottom:"8px"},children:["Found ",Ct.length," ",Ct.length===1?"link/button":"links/buttons"]}),Ct.map(e=>c.jsxs("div",{onClick:()=>{const o=H.current;o&&e.component&&(St(!1),tt(!1),K("widgets"),requestAnimationFrame(()=>{setTimeout(()=>{const a=document.querySelector(".elementor-secondary-panel");a&&(a.style.setProperty("display","block","important"),a.style.setProperty("visibility","visible","important"),a.style.setProperty("opacity","1","important")),o.select(e.component),setTimeout(()=>{const s=e.component?.get("tagName")?.toLowerCase(),l=s==="button";if(l||s==="a"){const n=e.component.get("traits")||[];if(!n.some(p=>typeof p=="object"&&p.name==="linkType"||p==="linkType")){const p=qe.current||[],g=[{type:"select",name:"linkType",label:l?"Button Action":"Link Type",options:l?[{id:"none",value:"none",name:"No Action"},{id:"page",value:"page",name:"Navigate to Page"},{id:"url",value:"url",name:"Open URL"}]:[{id:"page",value:"page",name:"Link to Page"},{id:"url",value:"url",name:"External URL"}],changeProp:!0},{type:"select",name:"pageLink",label:"Select Page",options:[{id:"",value:"",name:"-- Select Page --"},...p.map(k=>({id:k.id,value:k.id,name:k.name}))],changeProp:!0},{type:"text",name:"href",label:"URL",placeholder:"https://example.com or #page-1",changeProp:!0}],m=n.filter(k=>typeof k=="string"?k!=="id"&&k!=="title"&&k!=="linkType"&&k!=="pageLink":k.name!=="id"&&k.name!=="title"&&k.name!=="linkType"&&k.name!=="pageLink"&&k.name!=="href");e.component.set("traits",[...m,...g])}}const i=document.getElementById("traits-panel");if(i&&(i.style.setProperty("display","block","important"),i.style.setProperty("visibility","visible","important"),i.style.setProperty("opacity","1","important"),o.TraitManager))try{o.select(e.component),setTimeout(()=>{if(typeof o.TraitManager.render=="function"){const n=o.TraitManager.render();n&&i&&(i.innerHTML="",n.nodeType===1?i.appendChild(n):typeof n=="string"&&(i.innerHTML=n))}setTimeout(()=>{const n=e.component.get?.("linkType");n!==void 0&&i.querySelectorAll(".gjs-trt-trait").forEach(p=>{const g=p.querySelector("label, .gjs-trt-trait__label");if(g){const m=g.textContent||"";m.includes("Select Page")?p.style.display=n==="page"?"block":"none":m.includes("URL")&&!m.includes("Select")&&(p.style.display=n==="url"?"block":"none")}})},100)},100)}catch(n){console.warn("Error rendering traits:",n)}structurePanel&&structurePanel.scrollIntoView({behavior:"smooth",block:"nearest"})},300)},150)}))},style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"12px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:o=>{o.currentTarget.style.background="rgba(255, 255, 255, 0.1)",o.currentTarget.style.borderColor="rgba(0, 210, 190, 0.3)",o.currentTarget.style.transform="translateX(4px)"},onMouseLeave:o=>{o.currentTarget.style.background="rgba(255, 255, 255, 0.05)",o.currentTarget.style.borderColor="rgba(255, 255, 255, 0.1)",o.currentTarget.style.transform="translateX(0)"},children:[c.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flex:1},children:[c.jsx("span",{style:{fontSize:"12px",padding:"2px 8px",borderRadius:"4px",background:e.type==="link"?"rgba(0, 210, 190, 0.15)":"rgba(255, 193, 7, 0.15)",color:e.type==="link"?"#00d2be":"#ffc107",fontWeight:600,flexShrink:0},children:e.type==="link"?"üîó Link":"üîò Button"}),c.jsx("span",{style:{color:"#fff",fontSize:"13px",fontWeight:500,flex:1},children:e.text||"Untitled"})]})}),c.jsx("div",{style:{fontSize:"11px",color:"rgba(255, 255, 255, 0.5)",marginTop:"4px",marginBottom:"4px"},children:e.pageLink?c.jsxs("span",{children:["üìÑ Internal: ",c.jsx("strong",{children:ue.find(o=>o.id===e.pageLink)?.name||e.pageLink})]}):e.href?c.jsxs("span",{children:["üåê External: ",c.jsx("strong",{children:e.href.length>40?e.href.substring(0,40)+"...":e.href})]}):c.jsx("span",{style:{fontStyle:"italic",color:"rgba(255, 255, 255, 0.3)"},children:"‚ö†Ô∏è No link set"})}),c.jsxs("div",{style:{fontSize:"10px",color:"rgba(0, 210, 190, 0.8)",marginTop:"6px",fontWeight:500,display:"flex",alignItems:"center",gap:"4px"},children:[c.jsx("span",{children:"‚Üí"}),c.jsx("span",{children:"Click to select and edit link settings"})]})]},e.id))]})]})]})}),wr&&c.jsxs("div",{style:{position:"fixed",top:"80px",right:"20px",zIndex:1e5,width:"400px",maxWidth:"calc(100vw - 40px)",maxHeight:"calc(100vh - 100px)",background:"#ffffff",border:"1px solid rgba(0, 0, 0, 0.2)",borderRadius:"16px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.15), 0 0 0 1px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",animation:"slideInRight 0.3s ease-out"},onClick:e=>e.stopPropagation(),children:[c.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[c.jsx("h3",{style:{margin:0,color:"#000",fontSize:"16px",fontWeight:600},children:"üìã Notes & Changes"}),c.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[c.jsx("button",{onClick:jr,title:"Create New Note",style:{background:"rgba(0, 210, 190, 0.15)",border:"1px solid rgba(0, 210, 190, 0.3)",color:"#00d2be",fontSize:"18px",cursor:"pointer",padding:"4px 10px",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"6px",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(0, 210, 190, 0.25)",e.currentTarget.style.borderColor="#00d2be"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(0, 210, 190, 0.15)",e.currentTarget.style.borderColor="rgba(0, 210, 190, 0.3)"},children:"+"}),c.jsx("button",{onClick:()=>{try{localStorage.setItem(`ziplofy-theme-notes-${G||"new"}`,JSON.stringify(Ue))}catch(e){console.warn("Failed to save notes:",e)}ir(!1)},style:{background:"transparent",border:"none",color:"#fff",fontSize:"20px",cursor:"pointer",padding:"0",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"6px",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.1)"},onMouseLeave:e=>{e.currentTarget.style.background="transparent"},children:"√ó"})]})]}),c.jsxs("div",{style:{fontSize:"11px",color:"rgba(255, 255, 255, 0.5)"},children:[Ue.length," ",Ue.length===1?"note":"notes"]})]}),c.jsx("div",{style:{padding:"12px",flex:1,overflowY:"auto",display:"flex",flexDirection:"column",gap:"12px"},children:Ue.length===0?c.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"rgba(255, 255, 255, 0.4)",fontSize:"13px"},children:[c.jsx("div",{style:{fontSize:"32px",marginBottom:"12px"},children:"üìù"}),c.jsx("div",{children:"No notes yet"}),c.jsx("div",{style:{fontSize:"11px",marginTop:"8px",color:"rgba(255, 255, 255, 0.3)"},children:"Click the + button to create your first note"})]}):Ue.map(e=>c.jsxs("div",{style:{background:bt===e.id?"rgba(0, 210, 190, 0.1)":"rgba(255, 255, 255, 0.05)",border:bt===e.id?"1px solid rgba(0, 210, 190, 0.3)":"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"12px",transition:"all 0.2s ease"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[c.jsxs("div",{style:{fontSize:"10px",color:"rgba(255, 255, 255, 0.4)"},children:[new Date(e.createdAt).toLocaleDateString()," ",new Date(e.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),c.jsx("button",{onClick:()=>Yt(e.id),style:{background:"transparent",border:"none",color:"rgba(220, 38, 38, 0.6)",fontSize:"14px",cursor:"pointer",padding:"2px 6px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:o=>{o.currentTarget.style.background="rgba(220, 38, 38, 0.15)",o.currentTarget.style.color="#ef4444"},onMouseLeave:o=>{o.currentTarget.style.background="transparent",o.currentTarget.style.color="rgba(220, 38, 38, 0.6)"},title:"Delete note",children:"‚úï"})]}),bt===e.id?c.jsx("textarea",{value:e.content,onChange:o=>kr(e.id,o.target.value),onBlur:()=>{e.content.trim()===""?Yt(e.id):Tt(null)},autoFocus:!0,placeholder:"Write your note here...",style:{width:"100%",minHeight:"100px",maxHeight:"200px",padding:"8px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"#fff",fontSize:"13px",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',lineHeight:"1.5",outline:"none",resize:"vertical"},onKeyDown:o=>{o.key==="Escape"&&(e.content.trim()===""?Yt(e.id):Tt(null))}}):c.jsx("div",{onClick:()=>Tt(e.id),style:{color:"#fff",fontSize:"13px",lineHeight:"1.6",cursor:"text",whiteSpace:"pre-wrap",wordBreak:"break-word",minHeight:"40px",padding:"8px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:o=>{o.currentTarget.style.background="rgba(255, 255, 255, 0.05)"},onMouseLeave:o=>{o.currentTarget.style.background="transparent"},children:e.content||c.jsx("span",{style:{color:"rgba(255, 255, 255, 0.3)",fontStyle:"italic"},children:"Click to edit..."})})]},e.id))})]}),Y&&c.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e5,background:"rgba(0, 0, 0, 0.9)",display:"flex",flexDirection:"column"},children:[c.jsxs("div",{style:{background:"#1a1a1a",padding:"16px 24px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[c.jsxs("h2",{style:{margin:0,color:"#fff",fontSize:"18px",fontWeight:600},children:["Theme Preview: ",Ce||"My Theme"]}),c.jsx("span",{style:{background:"rgba(0, 210, 190, 0.2)",color:"#00d2be",padding:"4px 12px",borderRadius:"4px",fontSize:"12px",fontWeight:600},children:"Live Preview"})]}),c.jsxs("div",{style:{display:"flex",gap:"8px"},children:[c.jsx("button",{onClick:()=>{const e=document.getElementById("theme-preview-iframe");e&&e.contentWindow&&e.contentWindow.location.reload()},style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"#fff",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:500,transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.15)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.1)"},children:"üîÑ Reload"}),c.jsx("button",{onClick:()=>se(!1),style:{background:"rgba(220, 38, 38, 0.2)",border:"1px solid rgba(220, 38, 38, 0.3)",color:"#ff6b6b",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:500,transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(220, 38, 38, 0.3)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(220, 38, 38, 0.2)"},children:"‚úï Close"})]})]}),c.jsx("div",{style:{flex:1,position:"relative",overflow:"hidden"},children:c.jsx("iframe",{id:"theme-preview-iframe",srcDoc:Pe,style:{width:"100%",height:"100%",border:"none",background:"#fff"},title:"Theme Preview",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-presentation",onLoad:e=>{const o=e.currentTarget;o&&o.contentDocument&&Pe&&(o.contentDocument.open(),o.contentDocument.write(Pe),o.contentDocument.close())}},`preview-${Date.now()}-${Pe.length}`)})]})]})};export{Dr as default};
