function eI(a,r){for(var e=0;e<r.length;e++){const t=r[e];if(typeof t!="string"&&!Array.isArray(t)){for(const s in t)if(s!=="default"&&!(s in a)){const o=Object.getOwnPropertyDescriptor(t,s);o&&Object.defineProperty(a,s,o.get?o:{enumerable:!0,get:()=>t[s]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();var r0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rS(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var tj={exports:{}},xg={};var hk;function tI(){if(hk)return xg;hk=1;var a=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function e(t,s,o){var i=null;if(o!==void 0&&(i=""+o),s.key!==void 0&&(i=""+s.key),"key"in s){o={};for(var l in s)l!=="key"&&(o[l]=s[l])}else o=s;return s=o.ref,{$$typeof:a,type:t,key:i,ref:s!==void 0?s:null,props:o}}return xg.Fragment=r,xg.jsx=e,xg.jsxs=e,xg}var mk;function rI(){return mk||(mk=1,tj.exports=tI()),tj.exports}var n=rI(),rj={exports:{}},Un={};var gk;function nI(){if(gk)return Un;gk=1;var a=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),t=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),i=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),y=Symbol.iterator;function x(G){return G===null||typeof G!="object"?null:(G=y&&G[y]||G["@@iterator"],typeof G=="function"?G:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,j={};function S(G,Y,Se){this.props=G,this.context=Y,this.refs=j,this.updater=Se||b}S.prototype.isReactComponent={},S.prototype.setState=function(G,Y){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,Y,"setState")},S.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function k(){}k.prototype=S.prototype;function N(G,Y,Se){this.props=G,this.context=Y,this.refs=j,this.updater=Se||b}var P=N.prototype=new k;P.constructor=N,v(P,S.prototype),P.isPureReactComponent=!0;var R=Array.isArray;function F(){}var z={H:null,A:null,T:null,S:null},H=Object.prototype.hasOwnProperty;function V(G,Y,Se){var fe=Se.ref;return{$$typeof:a,type:G,key:Y,ref:fe!==void 0?fe:null,props:Se}}function W(G,Y){return V(G.type,Y,G.props)}function Z(G){return typeof G=="object"&&G!==null&&G.$$typeof===a}function A(G){var Y={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(Se){return Y[Se]})}var q=/\/+/g;function I(G,Y){return typeof G=="object"&&G!==null&&G.key!=null?A(""+G.key):Y.toString(36)}function K(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(F,F):(G.status="pending",G.then(function(Y){G.status==="pending"&&(G.status="fulfilled",G.value=Y)},function(Y){G.status==="pending"&&(G.status="rejected",G.reason=Y)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function D(G,Y,Se,fe,Ee){var Ae=typeof G;(Ae==="undefined"||Ae==="boolean")&&(G=null);var qe=!1;if(G===null)qe=!0;else switch(Ae){case"bigint":case"string":case"number":qe=!0;break;case"object":switch(G.$$typeof){case a:case r:qe=!0;break;case h:return qe=G._init,D(qe(G._payload),Y,Se,fe,Ee)}}if(qe)return Ee=Ee(G),qe=fe===""?"."+I(G,0):fe,R(Ee)?(Se="",qe!=null&&(Se=qe.replace(q,"$&/")+"/"),D(Ee,Y,Se,"",function(ze){return ze})):Ee!=null&&(Z(Ee)&&(Ee=W(Ee,Se+(Ee.key==null||G&&G.key===Ee.key?"":(""+Ee.key).replace(q,"$&/")+"/")+qe)),Y.push(Ee)),1;qe=0;var we=fe===""?".":fe+":";if(R(G))for(var Oe=0;Oe<G.length;Oe++)fe=G[Oe],Ae=we+I(fe,Oe),qe+=D(fe,Y,Se,Ae,Ee);else if(Oe=x(G),typeof Oe=="function")for(G=Oe.call(G),Oe=0;!(fe=G.next()).done;)fe=fe.value,Ae=we+I(fe,Oe++),qe+=D(fe,Y,Se,Ae,Ee);else if(Ae==="object"){if(typeof G.then=="function")return D(K(G),Y,Se,fe,Ee);throw Y=String(G),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return qe}function Q(G,Y,Se){if(G==null)return G;var fe=[],Ee=0;return D(G,fe,"","",function(Ae){return Y.call(Se,Ae,Ee++)}),fe}function oe(G){if(G._status===-1){var Y=G._result;Y=Y(),Y.then(function(Se){(G._status===0||G._status===-1)&&(G._status=1,G._result=Se)},function(Se){(G._status===0||G._status===-1)&&(G._status=2,G._result=Se)}),G._status===-1&&(G._status=0,G._result=Y)}if(G._status===1)return G._result.default;throw G._result}var re=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)},Te={map:Q,forEach:function(G,Y,Se){Q(G,function(){Y.apply(this,arguments)},Se)},count:function(G){var Y=0;return Q(G,function(){Y++}),Y},toArray:function(G){return Q(G,function(Y){return Y})||[]},only:function(G){if(!Z(G))throw Error("React.Children.only expected to receive a single React element child.");return G}};return Un.Activity=m,Un.Children=Te,Un.Component=S,Un.Fragment=e,Un.Profiler=s,Un.PureComponent=N,Un.StrictMode=t,Un.Suspense=c,Un.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,Un.__COMPILER_RUNTIME={__proto__:null,c:function(G){return z.H.useMemoCache(G)}},Un.cache=function(G){return function(){return G.apply(null,arguments)}},Un.cacheSignal=function(){return null},Un.cloneElement=function(G,Y,Se){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var fe=v({},G.props),Ee=G.key;if(Y!=null)for(Ae in Y.key!==void 0&&(Ee=""+Y.key),Y)!H.call(Y,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&Y.ref===void 0||(fe[Ae]=Y[Ae]);var Ae=arguments.length-2;if(Ae===1)fe.children=Se;else if(1<Ae){for(var qe=Array(Ae),we=0;we<Ae;we++)qe[we]=arguments[we+2];fe.children=qe}return V(G.type,Ee,fe)},Un.createContext=function(G){return G={$$typeof:i,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:o,_context:G},G},Un.createElement=function(G,Y,Se){var fe,Ee={},Ae=null;if(Y!=null)for(fe in Y.key!==void 0&&(Ae=""+Y.key),Y)H.call(Y,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(Ee[fe]=Y[fe]);var qe=arguments.length-2;if(qe===1)Ee.children=Se;else if(1<qe){for(var we=Array(qe),Oe=0;Oe<qe;Oe++)we[Oe]=arguments[Oe+2];Ee.children=we}if(G&&G.defaultProps)for(fe in qe=G.defaultProps,qe)Ee[fe]===void 0&&(Ee[fe]=qe[fe]);return V(G,Ae,Ee)},Un.createRef=function(){return{current:null}},Un.forwardRef=function(G){return{$$typeof:l,render:G}},Un.isValidElement=Z,Un.lazy=function(G){return{$$typeof:h,_payload:{_status:-1,_result:G},_init:oe}},Un.memo=function(G,Y){return{$$typeof:d,type:G,compare:Y===void 0?null:Y}},Un.startTransition=function(G){var Y=z.T,Se={};z.T=Se;try{var fe=G(),Ee=z.S;Ee!==null&&Ee(Se,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(F,re)}catch(Ae){re(Ae)}finally{Y!==null&&Se.types!==null&&(Y.types=Se.types),z.T=Y}},Un.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},Un.use=function(G){return z.H.use(G)},Un.useActionState=function(G,Y,Se){return z.H.useActionState(G,Y,Se)},Un.useCallback=function(G,Y){return z.H.useCallback(G,Y)},Un.useContext=function(G){return z.H.useContext(G)},Un.useDebugValue=function(){},Un.useDeferredValue=function(G,Y){return z.H.useDeferredValue(G,Y)},Un.useEffect=function(G,Y){return z.H.useEffect(G,Y)},Un.useEffectEvent=function(G){return z.H.useEffectEvent(G)},Un.useId=function(){return z.H.useId()},Un.useImperativeHandle=function(G,Y,Se){return z.H.useImperativeHandle(G,Y,Se)},Un.useInsertionEffect=function(G,Y){return z.H.useInsertionEffect(G,Y)},Un.useLayoutEffect=function(G,Y){return z.H.useLayoutEffect(G,Y)},Un.useMemo=function(G,Y){return z.H.useMemo(G,Y)},Un.useOptimistic=function(G,Y){return z.H.useOptimistic(G,Y)},Un.useReducer=function(G,Y,Se){return z.H.useReducer(G,Y,Se)},Un.useRef=function(G){return z.H.useRef(G)},Un.useState=function(G){return z.H.useState(G)},Un.useSyncExternalStore=function(G,Y,Se){return z.H.useSyncExternalStore(G,Y,Se)},Un.useTransition=function(){return z.H.useTransition()},Un.version="19.2.4",Un}var yk;function nS(){return yk||(yk=1,rj.exports=nI()),rj.exports}var f=nS();const gr=rS(f),Y0=eI({__proto__:null,default:gr},[f]);var nj={exports:{}},vg={},aj={exports:{}},sj={};var xk;function aI(){return xk||(xk=1,(function(a){function r(D,Q){var oe=D.length;D.push(Q);e:for(;0<oe;){var re=oe-1>>>1,Te=D[re];if(0<s(Te,Q))D[re]=Q,D[oe]=Te,oe=re;else break e}}function e(D){return D.length===0?null:D[0]}function t(D){if(D.length===0)return null;var Q=D[0],oe=D.pop();if(oe!==Q){D[0]=oe;e:for(var re=0,Te=D.length,G=Te>>>1;re<G;){var Y=2*(re+1)-1,Se=D[Y],fe=Y+1,Ee=D[fe];if(0>s(Se,oe))fe<Te&&0>s(Ee,Se)?(D[re]=Ee,D[fe]=oe,re=fe):(D[re]=Se,D[Y]=oe,re=Y);else if(fe<Te&&0>s(Ee,oe))D[re]=Ee,D[fe]=oe,re=fe;else break e}}return Q}function s(D,Q){var oe=D.sortIndex-Q.sortIndex;return oe!==0?oe:D.id-Q.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;a.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();a.unstable_now=function(){return i.now()-l}}var c=[],d=[],h=1,m=null,y=3,x=!1,b=!1,v=!1,j=!1,S=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function P(D){for(var Q=e(d);Q!==null;){if(Q.callback===null)t(d);else if(Q.startTime<=D)t(d),Q.sortIndex=Q.expirationTime,r(c,Q);else break;Q=e(d)}}function R(D){if(v=!1,P(D),!b)if(e(c)!==null)b=!0,F||(F=!0,A());else{var Q=e(d);Q!==null&&K(R,Q.startTime-D)}}var F=!1,z=-1,H=5,V=-1;function W(){return j?!0:!(a.unstable_now()-V<H)}function Z(){if(j=!1,F){var D=a.unstable_now();V=D;var Q=!0;try{e:{b=!1,v&&(v=!1,k(z),z=-1),x=!0;var oe=y;try{t:{for(P(D),m=e(c);m!==null&&!(m.expirationTime>D&&W());){var re=m.callback;if(typeof re=="function"){m.callback=null,y=m.priorityLevel;var Te=re(m.expirationTime<=D);if(D=a.unstable_now(),typeof Te=="function"){m.callback=Te,P(D),Q=!0;break t}m===e(c)&&t(c),P(D)}else t(c);m=e(c)}if(m!==null)Q=!0;else{var G=e(d);G!==null&&K(R,G.startTime-D),Q=!1}}break e}finally{m=null,y=oe,x=!1}Q=void 0}}finally{Q?A():F=!1}}}var A;if(typeof N=="function")A=function(){N(Z)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,I=q.port2;q.port1.onmessage=Z,A=function(){I.postMessage(null)}}else A=function(){S(Z,0)};function K(D,Q){z=S(function(){D(a.unstable_now())},Q)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(D){D.callback=null},a.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<D?Math.floor(1e3/D):5},a.unstable_getCurrentPriorityLevel=function(){return y},a.unstable_next=function(D){switch(y){case 1:case 2:case 3:var Q=3;break;default:Q=y}var oe=y;y=Q;try{return D()}finally{y=oe}},a.unstable_requestPaint=function(){j=!0},a.unstable_runWithPriority=function(D,Q){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var oe=y;y=D;try{return Q()}finally{y=oe}},a.unstable_scheduleCallback=function(D,Q,oe){var re=a.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?re+oe:re):oe=re,D){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=oe+Te,D={id:h++,callback:Q,priorityLevel:D,startTime:oe,expirationTime:Te,sortIndex:-1},oe>re?(D.sortIndex=oe,r(d,D),e(c)===null&&D===e(d)&&(v?(k(z),z=-1):v=!0,K(R,oe-re))):(D.sortIndex=Te,r(c,D),b||x||(b=!0,F||(F=!0,A()))),D},a.unstable_shouldYield=W,a.unstable_wrapCallback=function(D){var Q=y;return function(){var oe=y;y=Q;try{return D.apply(this,arguments)}finally{y=oe}}}})(sj)),sj}var vk;function sI(){return vk||(vk=1,aj.exports=aI()),aj.exports}var oj={exports:{}},Vo={};var bk;function oI(){if(bk)return Vo;bk=1;var a=nS();function r(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var t={d:{f:e,r:function(){throw Error(r(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(c,d,h){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:m==null?null:""+m,children:c,containerInfo:d,implementation:h}}var i=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Vo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=t,Vo.createPortal=function(c,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(r(299));return o(c,d,null,h)},Vo.flushSync=function(c){var d=i.T,h=t.p;try{if(i.T=null,t.p=2,c)return c()}finally{i.T=d,t.p=h,t.d.f()}},Vo.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,t.d.C(c,d))},Vo.prefetchDNS=function(c){typeof c=="string"&&t.d.D(c)},Vo.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var h=d.as,m=l(h,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,x=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?t.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:x}):h==="script"&&t.d.X(c,{crossOrigin:m,integrity:y,fetchPriority:x,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Vo.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=l(d.as,d.crossOrigin);t.d.M(c,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&t.d.M(c)},Vo.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,m=l(h,d.crossOrigin);t.d.L(c,h,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Vo.preloadModule=function(c,d){if(typeof c=="string")if(d){var h=l(d.as,d.crossOrigin);t.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else t.d.m(c)},Vo.requestFormReset=function(c){t.d.r(c)},Vo.unstable_batchedUpdates=function(c,d){return c(d)},Vo.useFormState=function(c,d,h){return i.H.useFormState(c,d,h)},Vo.useFormStatus=function(){return i.H.useHostTransitionStatus()},Vo.version="19.2.4",Vo}var wk;function jT(){if(wk)return oj.exports;wk=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(r){console.error(r)}}return a(),oj.exports=oI(),oj.exports}var jk;function iI(){if(jk)return vg;jk=1;var a=sI(),r=nS(),e=jT();function t(u){var g="https://react.dev/errors/"+u;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var C=2;C<arguments.length;C++)g+="&args[]="+encodeURIComponent(arguments[C])}return"Minified React error #"+u+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function o(u){var g=u,C=u;if(u.alternate)for(;g.return;)g=g.return;else{u=g;do g=u,(g.flags&4098)!==0&&(C=g.return),u=g.return;while(u)}return g.tag===3?C:null}function i(u){if(u.tag===13){var g=u.memoizedState;if(g===null&&(u=u.alternate,u!==null&&(g=u.memoizedState)),g!==null)return g.dehydrated}return null}function l(u){if(u.tag===31){var g=u.memoizedState;if(g===null&&(u=u.alternate,u!==null&&(g=u.memoizedState)),g!==null)return g.dehydrated}return null}function c(u){if(o(u)!==u)throw Error(t(188))}function d(u){var g=u.alternate;if(!g){if(g=o(u),g===null)throw Error(t(188));return g!==u?null:u}for(var C=u,T=g;;){var L=C.return;if(L===null)break;var $=L.alternate;if($===null){if(T=L.return,T!==null){C=T;continue}break}if(L.child===$.child){for($=L.child;$;){if($===C)return c(L),u;if($===T)return c(L),g;$=$.sibling}throw Error(t(188))}if(C.return!==T.return)C=L,T=$;else{for(var me=!1,De=L.child;De;){if(De===C){me=!0,C=L,T=$;break}if(De===T){me=!0,T=L,C=$;break}De=De.sibling}if(!me){for(De=$.child;De;){if(De===C){me=!0,C=$,T=L;break}if(De===T){me=!0,T=$,C=L;break}De=De.sibling}if(!me)throw Error(t(189))}}if(C.alternate!==T)throw Error(t(190))}if(C.tag!==3)throw Error(t(188));return C.stateNode.current===C?u:g}function h(u){var g=u.tag;if(g===5||g===26||g===27||g===6)return u;for(u=u.child;u!==null;){if(g=h(u),g!==null)return g;u=u.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),N=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),W=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function A(u){return u===null||typeof u!="object"?null:(u=Z&&u[Z]||u["@@iterator"],typeof u=="function"?u:null)}var q=Symbol.for("react.client.reference");function I(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===q?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case v:return"Fragment";case S:return"Profiler";case j:return"StrictMode";case R:return"Suspense";case F:return"SuspenseList";case V:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case b:return"Portal";case N:return u.displayName||"Context";case k:return(u._context.displayName||"Context")+".Consumer";case P:var g=u.render;return u=u.displayName,u||(u=g.displayName||g.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case z:return g=u.displayName||null,g!==null?g:I(u.type)||"Memo";case H:g=u._payload,u=u._init;try{return I(u(g))}catch{}}return null}var K=Array.isArray,D=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe={pending:!1,data:null,method:null,action:null},re=[],Te=-1;function G(u){return{current:u}}function Y(u){0>Te||(u.current=re[Te],re[Te]=null,Te--)}function Se(u,g){Te++,re[Te]=u.current,u.current=g}var fe=G(null),Ee=G(null),Ae=G(null),qe=G(null);function we(u,g){switch(Se(Ae,g),Se(Ee,u),Se(fe,null),g.nodeType){case 9:case 11:u=(u=g.documentElement)&&(u=u.namespaceURI)?DN(u):0;break;default:if(u=g.tagName,g=g.namespaceURI)g=DN(g),u=FN(g,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}Y(fe),Se(fe,u)}function Oe(){Y(fe),Y(Ee),Y(Ae)}function ze(u){u.memoizedState!==null&&Se(qe,u);var g=fe.current,C=FN(g,u.type);g!==C&&(Se(Ee,u),Se(fe,C))}function We(u){Ee.current===u&&(Y(fe),Y(Ee)),qe.current===u&&(Y(qe),hg._currentValue=oe)}var pt,Pt;function ee(u){if(pt===void 0)try{throw Error()}catch(C){var g=C.stack.trim().match(/\n( *(at )?)/);pt=g&&g[1]||"",Pt=-1<C.stack.indexOf(`
    at`)?" (<anonymous>)":-1<C.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pt+u+Pt}var Ne=!1;function Ie(u,g){if(!u||Ne)return"";Ne=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var T={DetermineComponentFrameRoot:function(){try{if(g){var ur=function(){throw Error()};if(Object.defineProperty(ur.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ur,[])}catch(Gt){var zt=Gt}Reflect.construct(u,[],ur)}else{try{ur.call()}catch(Gt){zt=Gt}u.call(ur.prototype)}}else{try{throw Error()}catch(Gt){zt=Gt}(ur=u())&&typeof ur.catch=="function"&&ur.catch(function(){})}}catch(Gt){if(Gt&&zt&&typeof Gt.stack=="string")return[Gt.stack,zt.stack]}return[null,null]}};T.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var L=Object.getOwnPropertyDescriptor(T.DetermineComponentFrameRoot,"name");L&&L.configurable&&Object.defineProperty(T.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var $=T.DetermineComponentFrameRoot(),me=$[0],De=$[1];if(me&&De){var ut=me.split(`
`),Dt=De.split(`
`);for(L=T=0;T<ut.length&&!ut[T].includes("DetermineComponentFrameRoot");)T++;for(;L<Dt.length&&!Dt[L].includes("DetermineComponentFrameRoot");)L++;if(T===ut.length||L===Dt.length)for(T=ut.length-1,L=Dt.length-1;1<=T&&0<=L&&ut[T]!==Dt[L];)L--;for(;1<=T&&0<=L;T--,L--)if(ut[T]!==Dt[L]){if(T!==1||L!==1)do if(T--,L--,0>L||ut[T]!==Dt[L]){var tr=`
`+ut[T].replace(" at new "," at ");return u.displayName&&tr.includes("<anonymous>")&&(tr=tr.replace("<anonymous>",u.displayName)),tr}while(1<=T&&0<=L);break}}}finally{Ne=!1,Error.prepareStackTrace=C}return(C=u?u.displayName||u.name:"")?ee(C):""}function ne(u,g){switch(u.tag){case 26:case 27:case 5:return ee(u.type);case 16:return ee("Lazy");case 13:return u.child!==g&&g!==null?ee("Suspense Fallback"):ee("Suspense");case 19:return ee("SuspenseList");case 0:case 15:return Ie(u.type,!1);case 11:return Ie(u.type.render,!1);case 1:return Ie(u.type,!0);case 31:return ee("Activity");default:return""}}function M(u){try{var g="",C=null;do g+=ne(u,C),C=u,u=u.return;while(u);return g}catch(T){return`
Error generating stack: `+T.message+`
`+T.stack}}var U=Object.prototype.hasOwnProperty,J=a.unstable_scheduleCallback,ce=a.unstable_cancelCallback,ue=a.unstable_shouldYield,xe=a.unstable_requestPaint,he=a.unstable_now,se=a.unstable_getCurrentPriorityLevel,Le=a.unstable_ImmediatePriority,Ue=a.unstable_UserBlockingPriority,Ge=a.unstable_NormalPriority,ie=a.unstable_LowPriority,_e=a.unstable_IdlePriority,le=a.log,Xe=a.unstable_setDisableYieldValue,Fe=null,dt=null;function lt(u){if(typeof le=="function"&&Xe(u),dt&&typeof dt.setStrictMode=="function")try{dt.setStrictMode(Fe,u)}catch{}}var ft=Math.clz32?Math.clz32:Mt,Ze=Math.log,Nt=Math.LN2;function Mt(u){return u>>>=0,u===0?32:31-(Ze(u)/Nt|0)|0}var vt=256,Jt=262144,wr=4194304;function Wt(u){var g=u&42;if(g!==0)return g;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return u&261888;case 262144:case 524288:case 1048576:case 2097152:return u&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function ye(u,g,C){var T=u.pendingLanes;if(T===0)return 0;var L=0,$=u.suspendedLanes,me=u.pingedLanes;u=u.warmLanes;var De=T&134217727;return De!==0?(T=De&~$,T!==0?L=Wt(T):(me&=De,me!==0?L=Wt(me):C||(C=De&~u,C!==0&&(L=Wt(C))))):(De=T&~$,De!==0?L=Wt(De):me!==0?L=Wt(me):C||(C=T&~u,C!==0&&(L=Wt(C)))),L===0?0:g!==0&&g!==L&&(g&$)===0&&($=L&-L,C=g&-g,$>=C||$===32&&(C&4194048)!==0)?g:L}function Be(u,g){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&g)===0}function tt(u,g){switch(u){case 1:case 2:case 4:case 8:case 64:return g+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wt(){var u=wr;return wr<<=1,(wr&62914560)===0&&(wr=4194304),u}function Ut(u){for(var g=[],C=0;31>C;C++)g.push(u);return g}function er(u,g){u.pendingLanes|=g,g!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function zr(u,g,C,T,L,$){var me=u.pendingLanes;u.pendingLanes=C,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=C,u.entangledLanes&=C,u.errorRecoveryDisabledLanes&=C,u.shellSuspendCounter=0;var De=u.entanglements,ut=u.expirationTimes,Dt=u.hiddenUpdates;for(C=me&~C;0<C;){var tr=31-ft(C),ur=1<<tr;De[tr]=0,ut[tr]=-1;var zt=Dt[tr];if(zt!==null)for(Dt[tr]=null,tr=0;tr<zt.length;tr++){var Gt=zt[tr];Gt!==null&&(Gt.lane&=-536870913)}C&=~ur}T!==0&&rn(u,T,0),$!==0&&L===0&&u.tag!==0&&(u.suspendedLanes|=$&~(me&~g))}function rn(u,g,C){u.pendingLanes|=g,u.suspendedLanes&=~g;var T=31-ft(g);u.entangledLanes|=g,u.entanglements[T]=u.entanglements[T]|1073741824|C&261930}function _n(u,g){var C=u.entangledLanes|=g;for(u=u.entanglements;C;){var T=31-ft(C),L=1<<T;L&g|u[T]&g&&(u[T]|=g),C&=~L}}function Ur(u,g){var C=g&-g;return C=(C&42)!==0?1:ar(C),(C&(u.suspendedLanes|g))!==0?0:C}function ar(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function br(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function pn(){var u=Q.p;return u!==0?u:(u=window.event,u===void 0?32:ik(u.type))}function In(u,g){var C=Q.p;try{return Q.p=u,g()}finally{Q.p=C}}var on=Math.random().toString(36).slice(2),Er="__reactFiber$"+on,jr="__reactProps$"+on,ht="__reactContainer$"+on,vr="__reactEvents$"+on,Rn="__reactListeners$"+on,bn="__reactHandles$"+on,En="__reactResources$"+on,Wr="__reactMarker$"+on;function Bn(u){delete u[Er],delete u[jr],delete u[vr],delete u[Rn],delete u[bn]}function te(u){var g=u[Er];if(g)return g;for(var C=u.parentNode;C;){if(g=C[ht]||C[Er]){if(C=g.alternate,g.child!==null||C!==null&&C.child!==null)for(u=HN(u);u!==null;){if(C=u[Er])return C;u=HN(u)}return g}u=C,C=u.parentNode}return null}function je(u){if(u=u[Er]||u[ht]){var g=u.tag;if(g===5||g===6||g===13||g===31||g===26||g===27||g===3)return u}return null}function Re(u){var g=u.tag;if(g===5||g===26||g===27||g===6)return u.stateNode;throw Error(t(33))}function Ye(u){var g=u[En];return g||(g=u[En]={hoistableStyles:new Map,hoistableScripts:new Map}),g}function at(u){u[Wr]=!0}var jt=new Set,Qe={};function $e(u,g){ve(u,g),ve(u+"Capture",g)}function ve(u,g){for(Qe[u]=g,u=0;u<g.length;u++)jt.add(g[u])}var Ve=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),st={},Ot={};function de(u){return U.call(Ot,u)?!0:U.call(st,u)?!1:Ve.test(u)?Ot[u]=!0:(st[u]=!0,!1)}function ke(u,g,C){if(de(g))if(C===null)u.removeAttribute(g);else{switch(typeof C){case"undefined":case"function":case"symbol":u.removeAttribute(g);return;case"boolean":var T=g.toLowerCase().slice(0,5);if(T!=="data-"&&T!=="aria-"){u.removeAttribute(g);return}}u.setAttribute(g,""+C)}}function ct(u,g,C){if(C===null)u.removeAttribute(g);else{switch(typeof C){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(g);return}u.setAttribute(g,""+C)}}function bt(u,g,C,T){if(T===null)u.removeAttribute(C);else{switch(typeof T){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(C);return}u.setAttributeNS(g,C,""+T)}}function Ft(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function cr(u){var g=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function Br(u,g,C){var T=Object.getOwnPropertyDescriptor(u.constructor.prototype,g);if(!u.hasOwnProperty(g)&&typeof T<"u"&&typeof T.get=="function"&&typeof T.set=="function"){var L=T.get,$=T.set;return Object.defineProperty(u,g,{configurable:!0,get:function(){return L.call(this)},set:function(me){C=""+me,$.call(this,me)}}),Object.defineProperty(u,g,{enumerable:T.enumerable}),{getValue:function(){return C},setValue:function(me){C=""+me},stopTracking:function(){u._valueTracker=null,delete u[g]}}}}function kt(u){if(!u._valueTracker){var g=cr(u)?"checked":"value";u._valueTracker=Br(u,g,""+u[g])}}function Yr(u){if(!u)return!1;var g=u._valueTracker;if(!g)return!0;var C=g.getValue(),T="";return u&&(T=cr(u)?u.checked?"true":"false":u.value),u=T,u!==C?(g.setValue(u),!0):!1}function Xr(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var ma=/[\n"\\]/g;function Jn(u){return u.replace(ma,function(g){return"\\"+g.charCodeAt(0).toString(16)+" "})}function fa(u,g,C,T,L,$,me,De){u.name="",me!=null&&typeof me!="function"&&typeof me!="symbol"&&typeof me!="boolean"?u.type=me:u.removeAttribute("type"),g!=null?me==="number"?(g===0&&u.value===""||u.value!=g)&&(u.value=""+Ft(g)):u.value!==""+Ft(g)&&(u.value=""+Ft(g)):me!=="submit"&&me!=="reset"||u.removeAttribute("value"),g!=null?Ja(u,me,Ft(g)):C!=null?Ja(u,me,Ft(C)):T!=null&&u.removeAttribute("value"),L==null&&$!=null&&(u.defaultChecked=!!$),L!=null&&(u.checked=L&&typeof L!="function"&&typeof L!="symbol"),De!=null&&typeof De!="function"&&typeof De!="symbol"&&typeof De!="boolean"?u.name=""+Ft(De):u.removeAttribute("name")}function Ns(u,g,C,T,L,$,me,De){if($!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"&&(u.type=$),g!=null||C!=null){if(!($!=="submit"&&$!=="reset"||g!=null)){kt(u);return}C=C!=null?""+Ft(C):"",g=g!=null?""+Ft(g):C,De||g===u.value||(u.value=g),u.defaultValue=g}T=T??L,T=typeof T!="function"&&typeof T!="symbol"&&!!T,u.checked=De?u.checked:!!T,u.defaultChecked=!!T,me!=null&&typeof me!="function"&&typeof me!="symbol"&&typeof me!="boolean"&&(u.name=me),kt(u)}function Ja(u,g,C){g==="number"&&Xr(u.ownerDocument)===u||u.defaultValue===""+C||(u.defaultValue=""+C)}function Aa(u,g,C,T){if(u=u.options,g){g={};for(var L=0;L<C.length;L++)g["$"+C[L]]=!0;for(C=0;C<u.length;C++)L=g.hasOwnProperty("$"+u[C].value),u[C].selected!==L&&(u[C].selected=L),L&&T&&(u[C].defaultSelected=!0)}else{for(C=""+Ft(C),g=null,L=0;L<u.length;L++){if(u[L].value===C){u[L].selected=!0,T&&(u[L].defaultSelected=!0);return}g!==null||u[L].disabled||(g=u[L])}g!==null&&(g.selected=!0)}}function fs(u,g,C){if(g!=null&&(g=""+Ft(g),g!==u.value&&(u.value=g),C==null)){u.defaultValue!==g&&(u.defaultValue=g);return}u.defaultValue=C!=null?""+Ft(C):""}function Lr(u,g,C,T){if(g==null){if(T!=null){if(C!=null)throw Error(t(92));if(K(T)){if(1<T.length)throw Error(t(93));T=T[0]}C=T}C==null&&(C=""),g=C}C=Ft(g),u.defaultValue=C,T=u.textContent,T===C&&T!==""&&T!==null&&(u.value=T),kt(u)}function kr(u,g){if(g){var C=u.firstChild;if(C&&C===u.lastChild&&C.nodeType===3){C.nodeValue=g;return}}u.textContent=g}var mt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function nr(u,g,C){var T=g.indexOf("--")===0;C==null||typeof C=="boolean"||C===""?T?u.setProperty(g,""):g==="float"?u.cssFloat="":u[g]="":T?u.setProperty(g,C):typeof C!="number"||C===0||mt.has(g)?g==="float"?u.cssFloat=C:u[g]=(""+C).trim():u[g]=C+"px"}function Ar(u,g,C){if(g!=null&&typeof g!="object")throw Error(t(62));if(u=u.style,C!=null){for(var T in C)!C.hasOwnProperty(T)||g!=null&&g.hasOwnProperty(T)||(T.indexOf("--")===0?u.setProperty(T,""):T==="float"?u.cssFloat="":u[T]="");for(var L in g)T=g[L],g.hasOwnProperty(L)&&C[L]!==T&&nr(u,L,T)}else for(var $ in g)g.hasOwnProperty($)&&nr(u,$,g[$])}function Rr(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kn=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Vn(u){return Sn.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}function zn(){}var Kn=null;function ro(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var ps=null,Yn=null;function qn(u){var g=je(u);if(g&&(u=g.stateNode)){var C=u[jr]||null;e:switch(u=g.stateNode,g.type){case"input":if(fa(u,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name),g=C.name,C.type==="radio"&&g!=null){for(C=u;C.parentNode;)C=C.parentNode;for(C=C.querySelectorAll('input[name="'+Jn(""+g)+'"][type="radio"]'),g=0;g<C.length;g++){var T=C[g];if(T!==u&&T.form===u.form){var L=T[jr]||null;if(!L)throw Error(t(90));fa(T,L.value,L.defaultValue,L.defaultValue,L.checked,L.defaultChecked,L.type,L.name)}}for(g=0;g<C.length;g++)T=C[g],T.form===u.form&&Yr(T)}break e;case"textarea":fs(u,C.value,C.defaultValue);break e;case"select":g=C.value,g!=null&&Aa(u,!!C.multiple,g,!1)}}}var Zn=!1;function ka(u,g,C){if(Zn)return u(g,C);Zn=!0;try{var T=u(g);return T}finally{if(Zn=!1,(ps!==null||Yn!==null)&&(Ix(),ps&&(g=ps,u=Yn,Yn=ps=null,qn(g),u)))for(g=0;g<u.length;g++)qn(u[g])}}function ks(u,g){var C=u.stateNode;if(C===null)return null;var T=C[jr]||null;if(T===null)return null;C=T[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(T=!T.disabled)||(u=u.type,T=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!T;break e;default:u=!1}if(u)return null;if(C&&typeof C!="function")throw Error(t(231,g,typeof C));return C}var La=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wa=!1;if(La)try{var Xn={};Object.defineProperty(Xn,"passive",{get:function(){wa=!0}}),window.addEventListener("test",Xn,Xn),window.removeEventListener("test",Xn,Xn)}catch{wa=!1}var Ma=null,es=null,qr=null;function Gr(){if(qr)return qr;var u,g=es,C=g.length,T,L="value"in Ma?Ma.value:Ma.textContent,$=L.length;for(u=0;u<C&&g[u]===L[u];u++);var me=C-u;for(T=1;T<=me&&g[C-T]===L[$-T];T++);return qr=L.slice(u,1<T?1-T:void 0)}function cn(u){var g=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&g===13&&(u=13)):u=g,u===10&&(u=13),32<=u||u===13?u:0}function tn(){return!0}function Me(){return!1}function ot(u){function g(C,T,L,$,me){this._reactName=C,this._targetInst=L,this.type=T,this.nativeEvent=$,this.target=me,this.currentTarget=null;for(var De in u)u.hasOwnProperty(De)&&(C=u[De],this[De]=C?C($):$[De]);return this.isDefaultPrevented=($.defaultPrevented!=null?$.defaultPrevented:$.returnValue===!1)?tn:Me,this.isPropagationStopped=Me,this}return m(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var C=this.nativeEvent;C&&(C.preventDefault?C.preventDefault():typeof C.returnValue!="unknown"&&(C.returnValue=!1),this.isDefaultPrevented=tn)},stopPropagation:function(){var C=this.nativeEvent;C&&(C.stopPropagation?C.stopPropagation():typeof C.cancelBubble!="unknown"&&(C.cancelBubble=!0),this.isPropagationStopped=tn)},persist:function(){},isPersistent:tn}),g}var _t={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},It=ot(_t),At=m({},_t,{view:0,detail:0}),sr=ot(At),$t,Bt,Cr,Lt=m({},At,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hs,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Cr&&(Cr&&u.type==="mousemove"?($t=u.screenX-Cr.screenX,Bt=u.screenY-Cr.screenY):Bt=$t=0,Cr=u),$t)},movementY:function(u){return"movementY"in u?u.movementY:Bt}}),dr=ot(Lt),Dr=m({},Lt,{dataTransfer:0}),Or=ot(Dr),Zr=m({},At,{relatedTarget:0}),Kr=ot(Zr),Cn=m({},_t,{animationName:0,elapsedTime:0,pseudoElement:0}),Qr=ot(Cn),Hr=m({},_t,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),Qn=ot(Hr),Jr=m({},_t,{data:0}),is=ot(Jr),Ln={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ko={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},en={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ga(u){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(u):(u=en[u])?!!g[u]:!1}function hs(){return ga}var aa=m({},At,{key:function(u){if(u.key){var g=Ln[u.key]||u.key;if(g!=="Unidentified")return g}return u.type==="keypress"?(u=cn(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?Ko[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hs,charCode:function(u){return u.type==="keypress"?cn(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?cn(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),Da=ot(aa),Do=m({},Lt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fo=ot(Do),Ia=m({},At,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hs}),Mi=ot(Ia),li=m({},_t,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bo=ot(li),Jc=m({},Lt,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),Tl=ot(Jc),mc=m({},_t,{newState:0,oldState:0}),gc=ot(mc),rt=[9,13,27,32],Vt=La&&"CompositionEvent"in window,qt=null;La&&"documentMode"in document&&(qt=document.documentMode);var Qt=La&&"TextEvent"in window&&!qt,xr=La&&(!Vt||qt&&8<qt&&11>=qt),wn=" ",Wn=!1;function Fa(u,g){switch(u){case"keyup":return rt.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sa(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var Ba=!1;function Yo(u,g){switch(u){case"compositionend":return sa(g);case"keypress":return g.which!==32?null:(Wn=!0,wn);case"textInput":return u=g.data,u===wn&&Wn?null:u;default:return null}}function Ys(u,g){if(Ba)return u==="compositionend"||!Vt&&Fa(u,g)?(u=Gr(),qr=es=Ma=null,Ba=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return xr&&g.locale!=="ko"?null:g.data;default:return null}}var el={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ge(u){var g=u&&u.nodeName&&u.nodeName.toLowerCase();return g==="input"?!!el[u.type]:g==="textarea"}function Pe(u,g,C,T){ps?Yn?Yn.push(T):Yn=[T]:ps=T,g=Ux(g,"onChange"),0<g.length&&(C=new It("onChange","change",null,C,T),u.push({event:C,listeners:g}))}var Je=null,it=null;function St(u){PN(u,0)}function xt(u){var g=Re(u);if(Yr(g))return u}function Xt(u,g){if(u==="change")return g}var Nr=!1;if(La){var On;if(La){var Nn="oninput"in document;if(!Nn){var _s=document.createElement("div");_s.setAttribute("oninput","return;"),Nn=typeof _s.oninput=="function"}On=Nn}else On=!1;Nr=On&&(!document.documentMode||9<document.documentMode)}function Zs(){Je&&(Je.detachEvent("onpropertychange",Ku),it=Je=null)}function Ku(u){if(u.propertyName==="value"&&xt(it)){var g=[];Pe(g,it,u,ro(u)),ka(St,g)}}function Yu(u,g,C){u==="focusin"?(Zs(),Je=g,it=C,Je.attachEvent("onpropertychange",Ku)):u==="focusout"&&Zs()}function Xy(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return xt(it)}function Zu(u,g){if(u==="click")return xt(g)}function Qy(u,g){if(u==="input"||u==="change")return xt(g)}function Jy(u,g){return u===g&&(u!==0||1/u===1/g)||u!==u&&g!==g}var Co=typeof Object.is=="function"?Object.is:Jy;function yc(u,g){if(Co(u,g))return!0;if(typeof u!="object"||u===null||typeof g!="object"||g===null)return!1;var C=Object.keys(u),T=Object.keys(g);if(C.length!==T.length)return!1;for(T=0;T<C.length;T++){var L=C[T];if(!U.call(g,L)||!Co(u[L],g[L]))return!1}return!0}function fm(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function Xu(u,g){var C=fm(u);u=0;for(var T;C;){if(C.nodeType===3){if(T=u+C.textContent.length,u<=g&&T>=g)return{node:C,offset:g-u};u=T}e:{for(;C;){if(C.nextSibling){C=C.nextSibling;break e}C=C.parentNode}C=void 0}C=fm(C)}}function ci(u,g){return u&&g?u===g?!0:u&&u.nodeType===3?!1:g&&g.nodeType===3?ci(u,g.parentNode):"contains"in u?u.contains(g):u.compareDocumentPosition?!!(u.compareDocumentPosition(g)&16):!1:!1}function pm(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var g=Xr(u.document);g instanceof u.HTMLIFrameElement;){try{var C=typeof g.contentWindow.location.href=="string"}catch{C=!1}if(C)u=g.contentWindow;else break;g=Xr(u.document)}return g}function Qu(u){var g=u&&u.nodeName&&u.nodeName.toLowerCase();return g&&(g==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||g==="textarea"||u.contentEditable==="true")}var hm=La&&"documentMode"in document&&11>=document.documentMode,ed=null,yp=null,td=null,mm=!1;function ex(u,g,C){var T=C.window===C?C.document:C.nodeType===9?C:C.ownerDocument;mm||ed==null||ed!==Xr(T)||(T=ed,"selectionStart"in T&&Qu(T)?T={start:T.selectionStart,end:T.selectionEnd}:(T=(T.ownerDocument&&T.ownerDocument.defaultView||window).getSelection(),T={anchorNode:T.anchorNode,anchorOffset:T.anchorOffset,focusNode:T.focusNode,focusOffset:T.focusOffset}),td&&yc(td,T)||(td=T,T=Ux(yp,"onSelect"),0<T.length&&(g=new It("onSelect","select",null,g,C),u.push({event:g,listeners:T}),g.target=ed)))}function rd(u,g){var C={};return C[u.toLowerCase()]=g.toLowerCase(),C["Webkit"+u]="webkit"+g,C["Moz"+u]="moz"+g,C}var di={animationend:rd("Animation","AnimationEnd"),animationiteration:rd("Animation","AnimationIteration"),animationstart:rd("Animation","AnimationStart"),transitionrun:rd("Transition","TransitionRun"),transitionstart:rd("Transition","TransitionStart"),transitioncancel:rd("Transition","TransitionCancel"),transitionend:rd("Transition","TransitionEnd")},xc={},nd={};La&&(nd=document.createElement("div").style,"AnimationEvent"in window||(delete di.animationend.animation,delete di.animationiteration.animation,delete di.animationstart.animation),"TransitionEvent"in window||delete di.transitionend.transition);function Ol(u){if(xc[u])return xc[u];if(!di[u])return u;var g=di[u],C;for(C in g)if(g.hasOwnProperty(C)&&C in nd)return xc[u]=g[C];return u}var xp=Ol("animationend"),gm=Ol("animationiteration"),vp=Ol("animationstart"),ad=Ol("transitionrun"),sd=Ol("transitionstart"),So=Ol("transitioncancel"),Pl=Ol("transitionend"),Al=new Map,Gd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Gd.push("scrollEnd");function Ii(u,g){Al.set(u,g),$e(g,[u])}var Ju=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var g=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(g))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)},ho=[],od=0,bp=0;function id(){for(var u=od,g=bp=od=0;g<u;){var C=ho[g];ho[g++]=null;var T=ho[g];ho[g++]=null;var L=ho[g];ho[g++]=null;var $=ho[g];if(ho[g++]=null,T!==null&&L!==null){var me=T.pending;me===null?L.next=L:(L.next=me.next,me.next=L),T.pending=L}$!==0&&jp(C,L,$)}}function wp(u,g,C,T){ho[od++]=u,ho[od++]=g,ho[od++]=C,ho[od++]=T,bp|=T,u.lanes|=T,u=u.alternate,u!==null&&(u.lanes|=T)}function ef(u,g,C,T){return wp(u,g,C,T),Kd(u)}function vc(u,g){return wp(u,null,null,g),Kd(u)}function jp(u,g,C){u.lanes|=C;var T=u.alternate;T!==null&&(T.lanes|=C);for(var L=!1,$=u.return;$!==null;)$.childLanes|=C,T=$.alternate,T!==null&&(T.childLanes|=C),$.tag===22&&(u=$.stateNode,u===null||u._visibility&1||(L=!0)),u=$,$=$.return;return u.tag===3?($=u.stateNode,L&&g!==null&&(L=31-ft(C),u=$.hiddenUpdates,T=u[L],T===null?u[L]=[g]:T.push(g),g.lane=C|536870912),$):null}function Kd(u){if(50<ig)throw ig=0,Nw=null,Error(t(185));for(var g=u.return;g!==null;)u=g,g=u.return;return u.tag===3?u.stateNode:null}var Ri={};function Cp(u,g,C,T){this.tag=u,this.key=C,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=T,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zo(u,g,C,T){return new Cp(u,g,C,T)}function Yd(u){return u=u.prototype,!(!u||!u.isReactComponent)}function Ml(u,g){var C=u.alternate;return C===null?(C=zo(u.tag,g,u.key,u.mode),C.elementType=u.elementType,C.type=u.type,C.stateNode=u.stateNode,C.alternate=u,u.alternate=C):(C.pendingProps=g,C.type=u.type,C.flags=0,C.subtreeFlags=0,C.deletions=null),C.flags=u.flags&65011712,C.childLanes=u.childLanes,C.lanes=u.lanes,C.child=u.child,C.memoizedProps=u.memoizedProps,C.memoizedState=u.memoizedState,C.updateQueue=u.updateQueue,g=u.dependencies,C.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},C.sibling=u.sibling,C.index=u.index,C.ref=u.ref,C.refCleanup=u.refCleanup,C}function tx(u,g){u.flags&=65011714;var C=u.alternate;return C===null?(u.childLanes=0,u.lanes=g,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=C.childLanes,u.lanes=C.lanes,u.child=C.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=C.memoizedProps,u.memoizedState=C.memoizedState,u.updateQueue=C.updateQueue,u.type=C.type,g=C.dependencies,u.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),u}function Sp(u,g,C,T,L,$){var me=0;if(T=u,typeof u=="function")Yd(u)&&(me=1);else if(typeof u=="string")me=$M(u,C,fe.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case V:return u=zo(31,C,g,L),u.elementType=V,u.lanes=$,u;case v:return Il(C.children,L,$,g);case j:me=8,L|=24;break;case S:return u=zo(12,C,g,L|2),u.elementType=S,u.lanes=$,u;case R:return u=zo(13,C,g,L),u.elementType=R,u.lanes=$,u;case F:return u=zo(19,C,g,L),u.elementType=F,u.lanes=$,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case N:me=10;break e;case k:me=9;break e;case P:me=11;break e;case z:me=14;break e;case H:me=16,T=null;break e}me=29,C=Error(t(130,u===null?"null":typeof u,"")),T=null}return g=zo(me,C,g,L),g.elementType=u,g.type=T,g.lanes=$,g}function Il(u,g,C,T){return u=zo(7,u,T,g),u.lanes=C,u}function tf(u,g,C){return u=zo(6,u,null,g),u.lanes=C,u}function ld(u){var g=zo(18,null,null,0);return g.stateNode=u,g}function cd(u,g,C){return g=zo(4,u.children!==null?u.children:[],u.key,g),g.lanes=C,g.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},g}var rx=new WeakMap;function No(u,g){if(typeof u=="object"&&u!==null){var C=rx.get(u);return C!==void 0?C:(g={value:u,source:g,stack:M(g)},rx.set(u,g),g)}return{value:u,source:g,stack:M(g)}}var dd=[],tl=0,rf=null,Li=0,mo=[],Xs=0,ui=null,ko=1,Di="";function rl(u,g){dd[tl++]=Li,dd[tl++]=rf,rf=u,Li=g}function ym(u,g,C){mo[Xs++]=ko,mo[Xs++]=Di,mo[Xs++]=ui,ui=u;var T=ko;u=Di;var L=32-ft(T)-1;T&=~(1<<L),C+=1;var $=32-ft(g)+L;if(30<$){var me=L-L%5;$=(T&(1<<me)-1).toString(32),T>>=me,L-=me,ko=1<<32-ft(g)+L|C<<L|T,Di=$+u}else ko=1<<$|C<<L|T,Di=u}function xm(u){u.return!==null&&(rl(u,1),ym(u,1,0))}function Rl(u){for(;u===rf;)rf=dd[--tl],dd[tl]=null,Li=dd[--tl],dd[tl]=null;for(;u===ui;)ui=mo[--Xs],mo[Xs]=null,Di=mo[--Xs],mo[Xs]=null,ko=mo[--Xs],mo[Xs]=null}function bc(u,g){mo[Xs++]=ko,mo[Xs++]=Di,mo[Xs++]=ui,ko=g.id,Di=g.overflow,ui=u}var no=null,ts=null,oa=!1,wc=null,fi=!1,vm=Error(t(519));function Es(u){var g=Error(t(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw jc(No(g,u)),vm}function Rs(u){var g=u.stateNode,C=u.type,T=u.memoizedProps;switch(g[Er]=u,g[jr]=T,C){case"dialog":la("cancel",g),la("close",g);break;case"iframe":case"object":case"embed":la("load",g);break;case"video":case"audio":for(C=0;C<cg.length;C++)la(cg[C],g);break;case"source":la("error",g);break;case"img":case"image":case"link":la("error",g),la("load",g);break;case"details":la("toggle",g);break;case"input":la("invalid",g),Ns(g,T.value,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name,!0);break;case"select":la("invalid",g);break;case"textarea":la("invalid",g),Lr(g,T.value,T.defaultValue,T.children)}C=T.children,typeof C!="string"&&typeof C!="number"&&typeof C!="bigint"||g.textContent===""+C||T.suppressHydrationWarning===!0||RN(g.textContent,C)?(T.popover!=null&&(la("beforetoggle",g),la("toggle",g)),T.onScroll!=null&&la("scroll",g),T.onScrollEnd!=null&&la("scrollend",g),T.onClick!=null&&(g.onclick=zn),g=!0):g=!1,g||Es(u,!0)}function ao(u){for(no=u.return;no;)switch(no.tag){case 5:case 31:case 13:fi=!1;return;case 27:case 3:fi=!0;return;default:no=no.return}}function ls(u){if(u!==no)return!1;if(!oa)return ao(u),oa=!0,!1;var g=u.tag,C;if((C=g!==3&&g!==27)&&((C=g===5)&&(C=u.type,C=!(C!=="form"&&C!=="button")||zw(u.type,u.memoizedProps)),C=!C),C&&ts&&Es(u),ao(u),g===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(t(317));ts=WN(u)}else if(g===31){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(t(317));ts=WN(u)}else g===27?(g=ts,vu(u.type)?(u=Hw,Hw=null,ts=u):ts=g):ts=no?ul(u.stateNode.nextSibling):null;return!0}function Fi(){ts=no=null,oa=!1}function bm(){var u=wc;return u!==null&&(vi===null?vi=u:vi.push.apply(vi,u),wc=null),u}function jc(u){wc===null?wc=[u]:wc.push(u)}var wm=G(null),ud=null,Ll=null;function nl(u,g,C){Se(wm,g._currentValue),g._currentValue=C}function al(u){u._currentValue=wm.current,Y(wm)}function nf(u,g,C){for(;u!==null;){var T=u.alternate;if((u.childLanes&g)!==g?(u.childLanes|=g,T!==null&&(T.childLanes|=g)):T!==null&&(T.childLanes&g)!==g&&(T.childLanes|=g),u===C)break;u=u.return}}function jm(u,g,C,T){var L=u.child;for(L!==null&&(L.return=u);L!==null;){var $=L.dependencies;if($!==null){var me=L.child;$=$.firstContext;e:for(;$!==null;){var De=$;$=L;for(var ut=0;ut<g.length;ut++)if(De.context===g[ut]){$.lanes|=C,De=$.alternate,De!==null&&(De.lanes|=C),nf($.return,C,u),T||(me=null);break e}$=De.next}}else if(L.tag===18){if(me=L.return,me===null)throw Error(t(341));me.lanes|=C,$=me.alternate,$!==null&&($.lanes|=C),nf(me,C,u),me=null}else me=L.child;if(me!==null)me.return=L;else for(me=L;me!==null;){if(me===u){me=null;break}if(L=me.sibling,L!==null){L.return=me.return,me=L;break}me=me.return}L=me}}function Cc(u,g,C,T){u=null;for(var L=g,$=!1;L!==null;){if(!$){if((L.flags&524288)!==0)$=!0;else if((L.flags&262144)!==0)break}if(L.tag===10){var me=L.alternate;if(me===null)throw Error(t(387));if(me=me.memoizedProps,me!==null){var De=L.type;Co(L.pendingProps.value,me.value)||(u!==null?u.push(De):u=[De])}}else if(L===qe.current){if(me=L.alternate,me===null)throw Error(t(387));me.memoizedState.memoizedState!==L.memoizedState.memoizedState&&(u!==null?u.push(hg):u=[hg])}L=L.return}u!==null&&jm(g,u,C,T),g.flags|=262144}function Zd(u){for(u=u.firstContext;u!==null;){if(!Co(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function Sc(u){ud=u,Ll=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function Qs(u){return Cm(ud,u)}function Xd(u,g){return ud===null&&Sc(u),Cm(u,g)}function Cm(u,g){var C=g._currentValue;if(g={context:g,memoizedValue:C,next:null},Ll===null){if(u===null)throw Error(t(308));Ll=g,u.dependencies={lanes:0,firstContext:g},u.flags|=524288}else Ll=Ll.next=g;return C}var af=typeof AbortController<"u"?AbortController:function(){var u=[],g=this.signal={aborted:!1,addEventListener:function(C,T){u.push(T)}};this.abort=function(){g.aborted=!0,u.forEach(function(C){return C()})}},mw=a.unstable_scheduleCallback,Np=a.unstable_NormalPriority,ya={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function kp(){return{controller:new af,data:new Map,refCount:0}}function sf(u){u.refCount--,u.refCount===0&&mw(Np,function(){u.controller.abort()})}var Qd=null,_o=0,ea=0,go=null;function Nc(u,g){if(Qd===null){var C=Qd=[];_o=0,ea=Pw(),go={status:"pending",value:void 0,then:function(T){C.push(T)}}}return _o++,g.then(Dl,Dl),g}function Dl(){if(--_o===0&&Qd!==null){go!==null&&(go.status="fulfilled");var u=Qd;Qd=null,ea=0,go=null;for(var g=0;g<u.length;g++)(0,u[g])()}}function nx(u,g){var C=[],T={status:"pending",value:null,reason:null,then:function(L){C.push(L)}};return u.then(function(){T.status="fulfilled",T.value=g;for(var L=0;L<C.length;L++)(0,C[L])(g)},function(L){for(T.status="rejected",T.reason=L,L=0;L<C.length;L++)(0,C[L])(void 0)}),T}var _p=D.S;D.S=function(u,g){sN=he(),typeof g=="object"&&g!==null&&typeof g.then=="function"&&Nc(u,g),_p!==null&&_p(u,g)};var kc=G(null);function Sm(){var u=kc.current;return u!==null?u:as.pooledCache}function Jd(u,g){g===null?Se(kc,kc.current):Se(kc,g.pool)}function eu(){var u=Sm();return u===null?null:{parent:ya._currentValue,pool:u}}var fd=Error(t(460)),of=Error(t(474)),Bi=Error(t(542)),lf={then:function(){}};function Nm(u){return u=u.status,u==="fulfilled"||u==="rejected"}function ax(u,g,C){switch(C=u[C],C===void 0?u.push(g):C!==g&&(g.then(zn,zn),g=C),g.status){case"fulfilled":return g.value;case"rejected":throw u=g.reason,sx(u),u;default:if(typeof g.status=="string")g.then(zn,zn);else{if(u=as,u!==null&&100<u.shellSuspendCounter)throw Error(t(482));u=g,u.status="pending",u.then(function(T){if(g.status==="pending"){var L=g;L.status="fulfilled",L.value=T}},function(T){if(g.status==="pending"){var L=g;L.status="rejected",L.reason=T}})}switch(g.status){case"fulfilled":return g.value;case"rejected":throw u=g.reason,sx(u),u}throw Fl=g,fd}}function sl(u){try{var g=u._init;return g(u._payload)}catch(C){throw C!==null&&typeof C=="object"&&typeof C.then=="function"?(Fl=C,fd):C}}var Fl=null;function km(){if(Fl===null)throw Error(t(459));var u=Fl;return Fl=null,u}function sx(u){if(u===fd||u===Bi)throw Error(t(483))}var pd=null,cf=0;function Ep(u){var g=cf;return cf+=1,pd===null&&(pd=[]),ax(pd,u,g)}function _c(u,g){g=g.props.ref,u.ref=g!==void 0?g:null}function df(u,g){throw g.$$typeof===y?Error(t(525)):(u=Object.prototype.toString.call(g),Error(t(31,u==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":u)))}function ox(u){function g(Tt,yt){if(u){var Rt=Tt.deletions;Rt===null?(Tt.deletions=[yt],Tt.flags|=16):Rt.push(yt)}}function C(Tt,yt){if(!u)return null;for(;yt!==null;)g(Tt,yt),yt=yt.sibling;return null}function T(Tt){for(var yt=new Map;Tt!==null;)Tt.key!==null?yt.set(Tt.key,Tt):yt.set(Tt.index,Tt),Tt=Tt.sibling;return yt}function L(Tt,yt){return Tt=Ml(Tt,yt),Tt.index=0,Tt.sibling=null,Tt}function $(Tt,yt,Rt){return Tt.index=Rt,u?(Rt=Tt.alternate,Rt!==null?(Rt=Rt.index,Rt<yt?(Tt.flags|=67108866,yt):Rt):(Tt.flags|=67108866,yt)):(Tt.flags|=1048576,yt)}function me(Tt){return u&&Tt.alternate===null&&(Tt.flags|=67108866),Tt}function De(Tt,yt,Rt,lr){return yt===null||yt.tag!==6?(yt=tf(Rt,Tt.mode,lr),yt.return=Tt,yt):(yt=L(yt,Rt),yt.return=Tt,yt)}function ut(Tt,yt,Rt,lr){var jn=Rt.type;return jn===v?tr(Tt,yt,Rt.props.children,lr,Rt.key):yt!==null&&(yt.elementType===jn||typeof jn=="object"&&jn!==null&&jn.$$typeof===H&&sl(jn)===yt.type)?(yt=L(yt,Rt.props),_c(yt,Rt),yt.return=Tt,yt):(yt=Sp(Rt.type,Rt.key,Rt.props,null,Tt.mode,lr),_c(yt,Rt),yt.return=Tt,yt)}function Dt(Tt,yt,Rt,lr){return yt===null||yt.tag!==4||yt.stateNode.containerInfo!==Rt.containerInfo||yt.stateNode.implementation!==Rt.implementation?(yt=cd(Rt,Tt.mode,lr),yt.return=Tt,yt):(yt=L(yt,Rt.children||[]),yt.return=Tt,yt)}function tr(Tt,yt,Rt,lr,jn){return yt===null||yt.tag!==7?(yt=Il(Rt,Tt.mode,lr,jn),yt.return=Tt,yt):(yt=L(yt,Rt),yt.return=Tt,yt)}function ur(Tt,yt,Rt){if(typeof yt=="string"&&yt!==""||typeof yt=="number"||typeof yt=="bigint")return yt=tf(""+yt,Tt.mode,Rt),yt.return=Tt,yt;if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case x:return Rt=Sp(yt.type,yt.key,yt.props,null,Tt.mode,Rt),_c(Rt,yt),Rt.return=Tt,Rt;case b:return yt=cd(yt,Tt.mode,Rt),yt.return=Tt,yt;case H:return yt=sl(yt),ur(Tt,yt,Rt)}if(K(yt)||A(yt))return yt=Il(yt,Tt.mode,Rt,null),yt.return=Tt,yt;if(typeof yt.then=="function")return ur(Tt,Ep(yt),Rt);if(yt.$$typeof===N)return ur(Tt,Xd(Tt,yt),Rt);df(Tt,yt)}return null}function zt(Tt,yt,Rt,lr){var jn=yt!==null?yt.key:null;if(typeof Rt=="string"&&Rt!==""||typeof Rt=="number"||typeof Rt=="bigint")return jn!==null?null:De(Tt,yt,""+Rt,lr);if(typeof Rt=="object"&&Rt!==null){switch(Rt.$$typeof){case x:return Rt.key===jn?ut(Tt,yt,Rt,lr):null;case b:return Rt.key===jn?Dt(Tt,yt,Rt,lr):null;case H:return Rt=sl(Rt),zt(Tt,yt,Rt,lr)}if(K(Rt)||A(Rt))return jn!==null?null:tr(Tt,yt,Rt,lr,null);if(typeof Rt.then=="function")return zt(Tt,yt,Ep(Rt),lr);if(Rt.$$typeof===N)return zt(Tt,yt,Xd(Tt,Rt),lr);df(Tt,Rt)}return null}function Gt(Tt,yt,Rt,lr,jn){if(typeof lr=="string"&&lr!==""||typeof lr=="number"||typeof lr=="bigint")return Tt=Tt.get(Rt)||null,De(yt,Tt,""+lr,jn);if(typeof lr=="object"&&lr!==null){switch(lr.$$typeof){case x:return Tt=Tt.get(lr.key===null?Rt:lr.key)||null,ut(yt,Tt,lr,jn);case b:return Tt=Tt.get(lr.key===null?Rt:lr.key)||null,Dt(yt,Tt,lr,jn);case H:return lr=sl(lr),Gt(Tt,yt,Rt,lr,jn)}if(K(lr)||A(lr))return Tt=Tt.get(Rt)||null,tr(yt,Tt,lr,jn,null);if(typeof lr.then=="function")return Gt(Tt,yt,Rt,Ep(lr),jn);if(lr.$$typeof===N)return Gt(Tt,yt,Rt,Xd(yt,lr),jn);df(yt,lr)}return null}function nn(Tt,yt,Rt,lr){for(var jn=null,Sa=null,gn=yt,Gn=yt=0,ua=null;gn!==null&&Gn<Rt.length;Gn++){gn.index>Gn?(ua=gn,gn=null):ua=gn.sibling;var Na=zt(Tt,gn,Rt[Gn],lr);if(Na===null){gn===null&&(gn=ua);break}u&&gn&&Na.alternate===null&&g(Tt,gn),yt=$(Na,yt,Gn),Sa===null?jn=Na:Sa.sibling=Na,Sa=Na,gn=ua}if(Gn===Rt.length)return C(Tt,gn),oa&&rl(Tt,Gn),jn;if(gn===null){for(;Gn<Rt.length;Gn++)gn=ur(Tt,Rt[Gn],lr),gn!==null&&(yt=$(gn,yt,Gn),Sa===null?jn=gn:Sa.sibling=gn,Sa=gn);return oa&&rl(Tt,Gn),jn}for(gn=T(gn);Gn<Rt.length;Gn++)ua=Gt(gn,Tt,Gn,Rt[Gn],lr),ua!==null&&(u&&ua.alternate!==null&&gn.delete(ua.key===null?Gn:ua.key),yt=$(ua,yt,Gn),Sa===null?jn=ua:Sa.sibling=ua,Sa=ua);return u&&gn.forEach(function(Su){return g(Tt,Su)}),oa&&rl(Tt,Gn),jn}function Tn(Tt,yt,Rt,lr){if(Rt==null)throw Error(t(151));for(var jn=null,Sa=null,gn=yt,Gn=yt=0,ua=null,Na=Rt.next();gn!==null&&!Na.done;Gn++,Na=Rt.next()){gn.index>Gn?(ua=gn,gn=null):ua=gn.sibling;var Su=zt(Tt,gn,Na.value,lr);if(Su===null){gn===null&&(gn=ua);break}u&&gn&&Su.alternate===null&&g(Tt,gn),yt=$(Su,yt,Gn),Sa===null?jn=Su:Sa.sibling=Su,Sa=Su,gn=ua}if(Na.done)return C(Tt,gn),oa&&rl(Tt,Gn),jn;if(gn===null){for(;!Na.done;Gn++,Na=Rt.next())Na=ur(Tt,Na.value,lr),Na!==null&&(yt=$(Na,yt,Gn),Sa===null?jn=Na:Sa.sibling=Na,Sa=Na);return oa&&rl(Tt,Gn),jn}for(gn=T(gn);!Na.done;Gn++,Na=Rt.next())Na=Gt(gn,Tt,Gn,Na.value,lr),Na!==null&&(u&&Na.alternate!==null&&gn.delete(Na.key===null?Gn:Na.key),yt=$(Na,yt,Gn),Sa===null?jn=Na:Sa.sibling=Na,Sa=Na);return u&&gn.forEach(function(JM){return g(Tt,JM)}),oa&&rl(Tt,Gn),jn}function Xa(Tt,yt,Rt,lr){if(typeof Rt=="object"&&Rt!==null&&Rt.type===v&&Rt.key===null&&(Rt=Rt.props.children),typeof Rt=="object"&&Rt!==null){switch(Rt.$$typeof){case x:e:{for(var jn=Rt.key;yt!==null;){if(yt.key===jn){if(jn=Rt.type,jn===v){if(yt.tag===7){C(Tt,yt.sibling),lr=L(yt,Rt.props.children),lr.return=Tt,Tt=lr;break e}}else if(yt.elementType===jn||typeof jn=="object"&&jn!==null&&jn.$$typeof===H&&sl(jn)===yt.type){C(Tt,yt.sibling),lr=L(yt,Rt.props),_c(lr,Rt),lr.return=Tt,Tt=lr;break e}C(Tt,yt);break}else g(Tt,yt);yt=yt.sibling}Rt.type===v?(lr=Il(Rt.props.children,Tt.mode,lr,Rt.key),lr.return=Tt,Tt=lr):(lr=Sp(Rt.type,Rt.key,Rt.props,null,Tt.mode,lr),_c(lr,Rt),lr.return=Tt,Tt=lr)}return me(Tt);case b:e:{for(jn=Rt.key;yt!==null;){if(yt.key===jn)if(yt.tag===4&&yt.stateNode.containerInfo===Rt.containerInfo&&yt.stateNode.implementation===Rt.implementation){C(Tt,yt.sibling),lr=L(yt,Rt.children||[]),lr.return=Tt,Tt=lr;break e}else{C(Tt,yt);break}else g(Tt,yt);yt=yt.sibling}lr=cd(Rt,Tt.mode,lr),lr.return=Tt,Tt=lr}return me(Tt);case H:return Rt=sl(Rt),Xa(Tt,yt,Rt,lr)}if(K(Rt))return nn(Tt,yt,Rt,lr);if(A(Rt)){if(jn=A(Rt),typeof jn!="function")throw Error(t(150));return Rt=jn.call(Rt),Tn(Tt,yt,Rt,lr)}if(typeof Rt.then=="function")return Xa(Tt,yt,Ep(Rt),lr);if(Rt.$$typeof===N)return Xa(Tt,yt,Xd(Tt,Rt),lr);df(Tt,Rt)}return typeof Rt=="string"&&Rt!==""||typeof Rt=="number"||typeof Rt=="bigint"?(Rt=""+Rt,yt!==null&&yt.tag===6?(C(Tt,yt.sibling),lr=L(yt,Rt),lr.return=Tt,Tt=lr):(C(Tt,yt),lr=tf(Rt,Tt.mode,lr),lr.return=Tt,Tt=lr),me(Tt)):C(Tt,yt)}return function(Tt,yt,Rt,lr){try{cf=0;var jn=Xa(Tt,yt,Rt,lr);return pd=null,jn}catch(gn){if(gn===fd||gn===Bi)throw gn;var Sa=zo(29,gn,null,Tt.mode);return Sa.lanes=lr,Sa.return=Tt,Sa}}}var hd=ox(!0),_m=ox(!1),Zo=!1;function uf(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tu(u,g){u=u.updateQueue,g.updateQueue===u&&(g.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function Bl(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function ol(u,g,C){var T=u.updateQueue;if(T===null)return null;if(T=T.shared,(_a&2)!==0){var L=T.pending;return L===null?g.next=g:(g.next=L.next,L.next=g),T.pending=g,g=Kd(u),jp(u,null,C),g}return wp(u,T,g,C),Kd(u)}function ru(u,g,C){if(g=g.updateQueue,g!==null&&(g=g.shared,(C&4194048)!==0)){var T=g.lanes;T&=u.pendingLanes,C|=T,g.lanes=C,_n(u,C)}}function Em(u,g){var C=u.updateQueue,T=u.alternate;if(T!==null&&(T=T.updateQueue,C===T)){var L=null,$=null;if(C=C.firstBaseUpdate,C!==null){do{var me={lane:C.lane,tag:C.tag,payload:C.payload,callback:null,next:null};$===null?L=$=me:$=$.next=me,C=C.next}while(C!==null);$===null?L=$=g:$=$.next=g}else L=$=g;C={baseState:T.baseState,firstBaseUpdate:L,lastBaseUpdate:$,shared:T.shared,callbacks:T.callbacks},u.updateQueue=C;return}u=C.lastBaseUpdate,u===null?C.firstBaseUpdate=g:u.next=g,C.lastBaseUpdate=g}var Tp=!1;function Ts(){if(Tp){var u=go;if(u!==null)throw u}}function Ec(u,g,C,T){Tp=!1;var L=u.updateQueue;Zo=!1;var $=L.firstBaseUpdate,me=L.lastBaseUpdate,De=L.shared.pending;if(De!==null){L.shared.pending=null;var ut=De,Dt=ut.next;ut.next=null,me===null?$=Dt:me.next=Dt,me=ut;var tr=u.alternate;tr!==null&&(tr=tr.updateQueue,De=tr.lastBaseUpdate,De!==me&&(De===null?tr.firstBaseUpdate=Dt:De.next=Dt,tr.lastBaseUpdate=ut))}if($!==null){var ur=L.baseState;me=0,tr=Dt=ut=null,De=$;do{var zt=De.lane&-536870913,Gt=zt!==De.lane;if(Gt?(da&zt)===zt:(T&zt)===zt){zt!==0&&zt===ea&&(Tp=!0),tr!==null&&(tr=tr.next={lane:0,tag:De.tag,payload:De.payload,callback:null,next:null});e:{var nn=u,Tn=De;zt=g;var Xa=C;switch(Tn.tag){case 1:if(nn=Tn.payload,typeof nn=="function"){ur=nn.call(Xa,ur,zt);break e}ur=nn;break e;case 3:nn.flags=nn.flags&-65537|128;case 0:if(nn=Tn.payload,zt=typeof nn=="function"?nn.call(Xa,ur,zt):nn,zt==null)break e;ur=m({},ur,zt);break e;case 2:Zo=!0}}zt=De.callback,zt!==null&&(u.flags|=64,Gt&&(u.flags|=8192),Gt=L.callbacks,Gt===null?L.callbacks=[zt]:Gt.push(zt))}else Gt={lane:zt,tag:De.tag,payload:De.payload,callback:De.callback,next:null},tr===null?(Dt=tr=Gt,ut=ur):tr=tr.next=Gt,me|=zt;if(De=De.next,De===null){if(De=L.shared.pending,De===null)break;Gt=De,De=Gt.next,Gt.next=null,L.lastBaseUpdate=Gt,L.shared.pending=null}}while(!0);tr===null&&(ut=ur),L.baseState=ut,L.firstBaseUpdate=Dt,L.lastBaseUpdate=tr,$===null&&(L.shared.lanes=0),hu|=me,u.lanes=me,u.memoizedState=ur}}function Tm(u,g){if(typeof u!="function")throw Error(t(191,u));u.call(g)}function Om(u,g){var C=u.callbacks;if(C!==null)for(u.callbacks=null,u=0;u<C.length;u++)Tm(C[u],g)}var md=G(null),zl=G(0);function ff(u,g){u=Cd,Se(zl,u),Se(md,g),Cd=u|g.baseLanes}function Op(){Se(zl,Cd),Se(md,md.current)}function Pp(){Cd=zl.current,Y(md),Y(zl)}var Uo=G(null),so=null;function Ul(u){var g=u.alternate;Se(Ga,Ga.current&1),Se(Uo,u),so===null&&(g===null||md.current!==null||g.memoizedState!==null)&&(so=u)}function nu(u){Se(Ga,Ga.current),Se(Uo,u),so===null&&(so=u)}function Pm(u){u.tag===22?(Se(Ga,Ga.current),Se(Uo,u),so===null&&(so=u)):pi()}function pi(){Se(Ga,Ga.current),Se(Uo,Uo.current)}function Xo(u){Y(Uo),so===u&&(so=null),Y(Ga)}var Ga=G(0);function pf(u){for(var g=u;g!==null;){if(g.tag===13){var C=g.memoizedState;if(C!==null&&(C=C.dehydrated,C===null||Vw(C)||Ww(C)))return g}else if(g.tag===19&&(g.memoizedProps.revealOrder==="forwards"||g.memoizedProps.revealOrder==="backwards"||g.memoizedProps.revealOrder==="unstable_legacy-backwards"||g.memoizedProps.revealOrder==="together")){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===u)break;for(;g.sibling===null;){if(g.return===null||g.return===u)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var il=0,Dn=null,xa=null,cs=null,Tc=!1,ll=!1,Oc=!1,Ap=0,au=0,Qo=null,su=0;function Ka(){throw Error(t(321))}function Am(u,g){if(g===null)return!1;for(var C=0;C<g.length&&C<u.length;C++)if(!Co(u[C],g[C]))return!1;return!0}function Mp(u,g,C,T,L,$){return il=$,Dn=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,D.H=u===null||u.memoizedState===null?Sx:za,Oc=!1,$=C(T,L),Oc=!1,ll&&($=lx(g,C,T,L)),ix(u),$}function ix(u){D.H=Sf;var g=xa!==null&&xa.next!==null;if(il=0,cs=xa=Dn=null,Tc=!1,au=0,Qo=null,g)throw Error(t(300));u===null||Ls||(u=u.dependencies,u!==null&&Zd(u)&&(Ls=!0))}function lx(u,g,C,T){Dn=u;var L=0;do{if(ll&&(Qo=null),au=0,ll=!1,25<=L)throw Error(t(301));if(L+=1,cs=xa=null,u.updateQueue!=null){var $=u.updateQueue;$.lastEffect=null,$.events=null,$.stores=null,$.memoCache!=null&&($.memoCache.index=0)}D.H=Nx,$=g(C,T)}while(ll);return $}function gw(){var u=D.H,g=u.useState()[0];return g=typeof g.then=="function"?ou(g):g,u=u.useState()[0],(xa!==null?xa.memoizedState:null)!==u&&(Dn.flags|=1024),g}function oo(){var u=Ap!==0;return Ap=0,u}function Ip(u,g,C){g.updateQueue=u.updateQueue,g.flags&=-2053,u.lanes&=~C}function Mm(u){if(Tc){for(u=u.memoizedState;u!==null;){var g=u.queue;g!==null&&(g.pending=null),u=u.next}Tc=!1}il=0,cs=xa=Dn=null,ll=!1,au=Ap=0,Qo=null}function Eo(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cs===null?Dn.memoizedState=cs=u:cs=cs.next=u,cs}function Os(){if(xa===null){var u=Dn.alternate;u=u!==null?u.memoizedState:null}else u=xa.next;var g=cs===null?Dn.memoizedState:cs.next;if(g!==null)cs=g,xa=u;else{if(u===null)throw Dn.alternate===null?Error(t(467)):Error(t(310));xa=u,u={memoizedState:xa.memoizedState,baseState:xa.baseState,baseQueue:xa.baseQueue,queue:xa.queue,next:null},cs===null?Dn.memoizedState=cs=u:cs=cs.next=u}return cs}function hf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ou(u){var g=au;return au+=1,Qo===null&&(Qo=[]),u=ax(Qo,u,g),g=Dn,(cs===null?g.memoizedState:cs.next)===null&&(g=g.alternate,D.H=g===null||g.memoizedState===null?Sx:za),u}function mf(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return ou(u);if(u.$$typeof===N)return Qs(u)}throw Error(t(438,String(u)))}function Im(u){var g=null,C=Dn.updateQueue;if(C!==null&&(g=C.memoCache),g==null){var T=Dn.alternate;T!==null&&(T=T.updateQueue,T!==null&&(T=T.memoCache,T!=null&&(g={data:T.data.map(function(L){return L.slice()}),index:0})))}if(g==null&&(g={data:[],index:0}),C===null&&(C=hf(),Dn.updateQueue=C),C.memoCache=g,C=g.data[g.index],C===void 0)for(C=g.data[g.index]=Array(u),T=0;T<u;T++)C[T]=W;return g.index++,C}function $l(u,g){return typeof g=="function"?g(u):g}function Rp(u){var g=Os();return cl(g,xa,u)}function cl(u,g,C){var T=u.queue;if(T===null)throw Error(t(311));T.lastRenderedReducer=C;var L=u.baseQueue,$=T.pending;if($!==null){if(L!==null){var me=L.next;L.next=$.next,$.next=me}g.baseQueue=L=$,T.pending=null}if($=u.baseState,L===null)u.memoizedState=$;else{g=L.next;var De=me=null,ut=null,Dt=g,tr=!1;do{var ur=Dt.lane&-536870913;if(ur!==Dt.lane?(da&ur)===ur:(il&ur)===ur){var zt=Dt.revertLane;if(zt===0)ut!==null&&(ut=ut.next={lane:0,revertLane:0,gesture:null,action:Dt.action,hasEagerState:Dt.hasEagerState,eagerState:Dt.eagerState,next:null}),ur===ea&&(tr=!0);else if((il&zt)===zt){Dt=Dt.next,zt===ea&&(tr=!0);continue}else ur={lane:0,revertLane:Dt.revertLane,gesture:null,action:Dt.action,hasEagerState:Dt.hasEagerState,eagerState:Dt.eagerState,next:null},ut===null?(De=ut=ur,me=$):ut=ut.next=ur,Dn.lanes|=zt,hu|=zt;ur=Dt.action,Oc&&C($,ur),$=Dt.hasEagerState?Dt.eagerState:C($,ur)}else zt={lane:ur,revertLane:Dt.revertLane,gesture:Dt.gesture,action:Dt.action,hasEagerState:Dt.hasEagerState,eagerState:Dt.eagerState,next:null},ut===null?(De=ut=zt,me=$):ut=ut.next=zt,Dn.lanes|=ur,hu|=ur;Dt=Dt.next}while(Dt!==null&&Dt!==g);if(ut===null?me=$:ut.next=De,!Co($,u.memoizedState)&&(Ls=!0,tr&&(C=go,C!==null)))throw C;u.memoizedState=$,u.baseState=me,u.baseQueue=ut,T.lastRenderedState=$}return L===null&&(T.lanes=0),[u.memoizedState,T.dispatch]}function gd(u){var g=Os(),C=g.queue;if(C===null)throw Error(t(311));C.lastRenderedReducer=u;var T=C.dispatch,L=C.pending,$=g.memoizedState;if(L!==null){C.pending=null;var me=L=L.next;do $=u($,me.action),me=me.next;while(me!==L);Co($,g.memoizedState)||(Ls=!0),g.memoizedState=$,g.baseQueue===null&&(g.baseState=$),C.lastRenderedState=$}return[$,T]}function gf(u,g,C){var T=Dn,L=Os(),$=oa;if($){if(C===void 0)throw Error(t(407));C=C()}else C=g();var me=!Co((xa||L).memoizedState,C);if(me&&(L.memoizedState=C,Ls=!0),L=L.queue,Fm(cx.bind(null,T,L,u),[u]),L.getSnapshot!==g||me||cs!==null&&cs.memoizedState.tag&1){if(T.flags|=2048,cu(9,{destroy:void 0},dl.bind(null,T,L,C,g),null),as===null)throw Error(t(349));$||(il&127)!==0||iu(T,g,C)}return C}function iu(u,g,C){u.flags|=16384,u={getSnapshot:g,value:C},g=Dn.updateQueue,g===null?(g=hf(),Dn.updateQueue=g,g.stores=[u]):(C=g.stores,C===null?g.stores=[u]:C.push(u))}function dl(u,g,C,T){g.value=C,g.getSnapshot=T,dx(g)&&yd(u)}function cx(u,g,C){return C(function(){dx(g)&&yd(u)})}function dx(u){var g=u.getSnapshot;u=u.value;try{var C=g();return!Co(u,C)}catch{return!0}}function yd(u){var g=vc(u,2);g!==null&&bi(g,u,2)}function Lp(u){var g=Eo();if(typeof u=="function"){var C=u;if(u=C(),Oc){lt(!0);try{C()}finally{lt(!1)}}}return g.memoizedState=g.baseState=u,g.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$l,lastRenderedState:u},g}function Rm(u,g,C,T){return u.baseState=C,cl(u,xa,typeof T=="function"?T:$l)}function ux(u,g,C,T,L){if(jf(u))throw Error(t(485));if(u=g.action,u!==null){var $={payload:L,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(me){$.listeners.push(me)}};D.T!==null?C(!0):$.isTransition=!1,T($),C=g.pending,C===null?($.next=g.pending=$,yf(g,$)):($.next=C.next,g.pending=C.next=$)}}function yf(u,g){var C=g.action,T=g.payload,L=u.state;if(g.isTransition){var $=D.T,me={};D.T=me;try{var De=C(L,T),ut=D.S;ut!==null&&ut(me,De),xd(u,g,De)}catch(Dt){xf(u,g,Dt)}finally{$!==null&&me.types!==null&&($.types=me.types),D.T=$}}else try{$=C(L,T),xd(u,g,$)}catch(Dt){xf(u,g,Dt)}}function xd(u,g,C){C!==null&&typeof C=="object"&&typeof C.then=="function"?C.then(function(T){Dp(u,g,T)},function(T){return xf(u,g,T)}):Dp(u,g,C)}function Dp(u,g,C){g.status="fulfilled",g.value=C,Fp(g),u.state=C,g=u.pending,g!==null&&(C=g.next,C===g?u.pending=null:(C=C.next,g.next=C,yf(u,C)))}function xf(u,g,C){var T=u.pending;if(u.pending=null,T!==null){T=T.next;do g.status="rejected",g.reason=C,Fp(g),g=g.next;while(g!==T)}u.action=null}function Fp(u){u=u.listeners;for(var g=0;g<u.length;g++)(0,u[g])()}function fx(u,g){return g}function lu(u,g){if(oa){var C=as.formState;if(C!==null){e:{var T=Dn;if(oa){if(ts){t:{for(var L=ts,$=fi;L.nodeType!==8;){if(!$){L=null;break t}if(L=ul(L.nextSibling),L===null){L=null;break t}}$=L.data,L=$==="F!"||$==="F"?L:null}if(L){ts=ul(L.nextSibling),T=L.data==="F!";break e}}Es(T)}T=!1}T&&(g=C[0])}}return C=Eo(),C.memoizedState=C.baseState=g,T={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fx,lastRenderedState:g},C.queue=T,C=jx.bind(null,Dn,T),T.dispatch=C,T=Lp(!1),$=Ac.bind(null,Dn,!1,T.queue),T=Eo(),L={state:g,dispatch:null,action:u,pending:null},T.queue=L,C=ux.bind(null,Dn,L,$,C),L.dispatch=C,T.memoizedState=u,[g,C,!1]}function Lm(u){var g=Os();return px(g,xa,u)}function px(u,g,C){if(g=cl(u,g,fx)[0],u=Rp($l)[0],typeof g=="object"&&g!==null&&typeof g.then=="function")try{var T=ou(g)}catch(me){throw me===fd?Bi:me}else T=g;g=Os();var L=g.queue,$=L.dispatch;return C!==g.memoizedState&&(Dn.flags|=2048,cu(9,{destroy:void 0},hx.bind(null,L,C),null)),[T,$,u]}function hx(u,g){u.action=g}function vf(u){var g=Os(),C=xa;if(C!==null)return px(g,C,u);Os(),g=g.memoizedState,C=Os();var T=C.queue.dispatch;return C.memoizedState=u,[g,T,!1]}function cu(u,g,C,T){return u={tag:u,create:C,deps:T,inst:g,next:null},g=Dn.updateQueue,g===null&&(g=hf(),Dn.updateQueue=g),C=g.lastEffect,C===null?g.lastEffect=u.next=u:(T=C.next,C.next=u,u.next=T,g.lastEffect=u),u}function mx(){return Os().memoizedState}function Pc(u,g,C,T){var L=Eo();Dn.flags|=u,L.memoizedState=cu(1|g,{destroy:void 0},C,T===void 0?null:T)}function bf(u,g,C,T){var L=Os();T=T===void 0?null:T;var $=L.memoizedState.inst;xa!==null&&T!==null&&Am(T,xa.memoizedState.deps)?L.memoizedState=cu(g,$,C,T):(Dn.flags|=u,L.memoizedState=cu(1|g,$,C,T))}function Dm(u,g){Pc(8390656,8,u,g)}function Fm(u,g){bf(2048,8,u,g)}function Bm(u){Dn.flags|=4;var g=Dn.updateQueue;if(g===null)g=hf(),Dn.updateQueue=g,g.events=[u];else{var C=g.events;C===null?g.events=[u]:C.push(u)}}function zm(u){var g=Os().memoizedState;return Bm({ref:g,nextImpl:u}),function(){if((_a&2)!==0)throw Error(t(440));return g.impl.apply(void 0,arguments)}}function gx(u,g){return bf(4,2,u,g)}function Um(u,g){return bf(4,4,u,g)}function $m(u,g){if(typeof g=="function"){u=u();var C=g(u);return function(){typeof C=="function"?C():g(null)}}if(g!=null)return u=u(),g.current=u,function(){g.current=null}}function yx(u,g,C){C=C!=null?C.concat([u]):null,bf(4,4,$m.bind(null,g,u),C)}function wf(){}function du(u,g){var C=Os();g=g===void 0?null:g;var T=C.memoizedState;return g!==null&&Am(g,T[1])?T[0]:(C.memoizedState=[u,g],u)}function uu(u,g){var C=Os();g=g===void 0?null:g;var T=C.memoizedState;if(g!==null&&Am(g,T[1]))return T[0];if(T=u(),Oc){lt(!0);try{u()}finally{lt(!1)}}return C.memoizedState=[T,g],T}function Vm(u,g,C){return C===void 0||(il&1073741824)!==0&&(da&261930)===0?u.memoizedState=g:(u.memoizedState=C,u=iN(),Dn.lanes|=u,hu|=u,C)}function Wm(u,g,C,T){return Co(C,g)?C:md.current!==null?(u=Vm(u,C,T),Co(u,g)||(Ls=!0),u):(il&42)===0||(il&1073741824)!==0&&(da&261930)===0?(Ls=!0,u.memoizedState=C):(u=iN(),Dn.lanes|=u,hu|=u,g)}function xx(u,g,C,T,L){var $=Q.p;Q.p=$!==0&&8>$?$:8;var me=D.T,De={};D.T=De,Ac(u,!1,g,C);try{var ut=L(),Dt=D.S;if(Dt!==null&&Dt(De,ut),ut!==null&&typeof ut=="object"&&typeof ut.then=="function"){var tr=nx(ut,T);fu(u,g,tr,$i(u))}else fu(u,g,T,$i(u))}catch(ur){fu(u,g,{then:function(){},status:"rejected",reason:ur},$i())}finally{Q.p=$,me!==null&&De.types!==null&&(me.types=De.types),D.T=me}}function yw(){}function Hm(u,g,C,T){if(u.tag!==5)throw Error(t(476));var L=vx(u).queue;xx(u,L,g,oe,C===null?yw:function(){return qm(u),C(T)})}function vx(u){var g=u.memoizedState;if(g!==null)return g;g={memoizedState:oe,baseState:oe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$l,lastRenderedState:oe},next:null};var C={};return g.next={memoizedState:C,baseState:C,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$l,lastRenderedState:C},next:null},u.memoizedState=g,u=u.alternate,u!==null&&(u.memoizedState=g),g}function qm(u){var g=vx(u);g.next===null&&(g=u.alternate.memoizedState),fu(u,g.next.queue,{},$i())}function Gm(){return Qs(hg)}function bx(){return Os().memoizedState}function Km(){return Os().memoizedState}function Ym(u){for(var g=u.return;g!==null;){switch(g.tag){case 24:case 3:var C=$i();u=Bl(C);var T=ol(g,u,C);T!==null&&(bi(T,g,C),ru(T,g,C)),g={cache:kp()},u.payload=g;return}g=g.return}}function wx(u,g,C){var T=$i();C={lane:T,revertLane:0,gesture:null,action:C,hasEagerState:!1,eagerState:null,next:null},jf(u)?Cf(g,C):(C=ef(u,g,C,T),C!==null&&(bi(C,u,T),Cx(C,g,T)))}function jx(u,g,C){var T=$i();fu(u,g,C,T)}function fu(u,g,C,T){var L={lane:T,revertLane:0,gesture:null,action:C,hasEagerState:!1,eagerState:null,next:null};if(jf(u))Cf(g,L);else{var $=u.alternate;if(u.lanes===0&&($===null||$.lanes===0)&&($=g.lastRenderedReducer,$!==null))try{var me=g.lastRenderedState,De=$(me,C);if(L.hasEagerState=!0,L.eagerState=De,Co(De,me))return wp(u,g,L,0),as===null&&id(),!1}catch{}if(C=ef(u,g,L,T),C!==null)return bi(C,u,T),Cx(C,g,T),!0}return!1}function Ac(u,g,C,T){if(T={lane:2,revertLane:Pw(),gesture:null,action:T,hasEagerState:!1,eagerState:null,next:null},jf(u)){if(g)throw Error(t(479))}else g=ef(u,C,T,2),g!==null&&bi(g,u,2)}function jf(u){var g=u.alternate;return u===Dn||g!==null&&g===Dn}function Cf(u,g){ll=Tc=!0;var C=u.pending;C===null?g.next=g:(g.next=C.next,C.next=g),u.pending=g}function Cx(u,g,C){if((C&4194048)!==0){var T=g.lanes;T&=u.pendingLanes,C|=T,g.lanes=C,_n(u,C)}}var Sf={readContext:Qs,use:mf,useCallback:Ka,useContext:Ka,useEffect:Ka,useImperativeHandle:Ka,useLayoutEffect:Ka,useInsertionEffect:Ka,useMemo:Ka,useReducer:Ka,useRef:Ka,useState:Ka,useDebugValue:Ka,useDeferredValue:Ka,useTransition:Ka,useSyncExternalStore:Ka,useId:Ka,useHostTransitionStatus:Ka,useFormState:Ka,useActionState:Ka,useOptimistic:Ka,useMemoCache:Ka,useCacheRefresh:Ka};Sf.useEffectEvent=Ka;var Sx={readContext:Qs,use:mf,useCallback:function(u,g){return Eo().memoizedState=[u,g===void 0?null:g],u},useContext:Qs,useEffect:Dm,useImperativeHandle:function(u,g,C){C=C!=null?C.concat([u]):null,Pc(4194308,4,$m.bind(null,g,u),C)},useLayoutEffect:function(u,g){return Pc(4194308,4,u,g)},useInsertionEffect:function(u,g){Pc(4,2,u,g)},useMemo:function(u,g){var C=Eo();g=g===void 0?null:g;var T=u();if(Oc){lt(!0);try{u()}finally{lt(!1)}}return C.memoizedState=[T,g],T},useReducer:function(u,g,C){var T=Eo();if(C!==void 0){var L=C(g);if(Oc){lt(!0);try{C(g)}finally{lt(!1)}}}else L=g;return T.memoizedState=T.baseState=L,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:L},T.queue=u,u=u.dispatch=wx.bind(null,Dn,u),[T.memoizedState,u]},useRef:function(u){var g=Eo();return u={current:u},g.memoizedState=u},useState:function(u){u=Lp(u);var g=u.queue,C=jx.bind(null,Dn,g);return g.dispatch=C,[u.memoizedState,C]},useDebugValue:wf,useDeferredValue:function(u,g){var C=Eo();return Vm(C,u,g)},useTransition:function(){var u=Lp(!1);return u=xx.bind(null,Dn,u.queue,!0,!1),Eo().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,g,C){var T=Dn,L=Eo();if(oa){if(C===void 0)throw Error(t(407));C=C()}else{if(C=g(),as===null)throw Error(t(349));(da&127)!==0||iu(T,g,C)}L.memoizedState=C;var $={value:C,getSnapshot:g};return L.queue=$,Dm(cx.bind(null,T,$,u),[u]),T.flags|=2048,cu(9,{destroy:void 0},dl.bind(null,T,$,C,g),null),C},useId:function(){var u=Eo(),g=as.identifierPrefix;if(oa){var C=Di,T=ko;C=(T&~(1<<32-ft(T)-1)).toString(32)+C,g="_"+g+"R_"+C,C=Ap++,0<C&&(g+="H"+C.toString(32)),g+="_"}else C=su++,g="_"+g+"r_"+C.toString(32)+"_";return u.memoizedState=g},useHostTransitionStatus:Gm,useFormState:lu,useActionState:lu,useOptimistic:function(u){var g=Eo();g.memoizedState=g.baseState=u;var C={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return g.queue=C,g=Ac.bind(null,Dn,!0,C),C.dispatch=g,[u,g]},useMemoCache:Im,useCacheRefresh:function(){return Eo().memoizedState=Ym.bind(null,Dn)},useEffectEvent:function(u){var g=Eo(),C={impl:u};return g.memoizedState=C,function(){if((_a&2)!==0)throw Error(t(440));return C.impl.apply(void 0,arguments)}}},za={readContext:Qs,use:mf,useCallback:du,useContext:Qs,useEffect:Fm,useImperativeHandle:yx,useInsertionEffect:gx,useLayoutEffect:Um,useMemo:uu,useReducer:Rp,useRef:mx,useState:function(){return Rp($l)},useDebugValue:wf,useDeferredValue:function(u,g){var C=Os();return Wm(C,xa.memoizedState,u,g)},useTransition:function(){var u=Rp($l)[0],g=Os().memoizedState;return[typeof u=="boolean"?u:ou(u),g]},useSyncExternalStore:gf,useId:bx,useHostTransitionStatus:Gm,useFormState:Lm,useActionState:Lm,useOptimistic:function(u,g){var C=Os();return Rm(C,xa,u,g)},useMemoCache:Im,useCacheRefresh:Km};za.useEffectEvent=zm;var Nx={readContext:Qs,use:mf,useCallback:du,useContext:Qs,useEffect:Fm,useImperativeHandle:yx,useInsertionEffect:gx,useLayoutEffect:Um,useMemo:uu,useReducer:gd,useRef:mx,useState:function(){return gd($l)},useDebugValue:wf,useDeferredValue:function(u,g){var C=Os();return xa===null?Vm(C,u,g):Wm(C,xa.memoizedState,u,g)},useTransition:function(){var u=gd($l)[0],g=Os().memoizedState;return[typeof u=="boolean"?u:ou(u),g]},useSyncExternalStore:gf,useId:bx,useHostTransitionStatus:Gm,useFormState:vf,useActionState:vf,useOptimistic:function(u,g){var C=Os();return xa!==null?Rm(C,xa,u,g):(C.baseState=u,[u,C.queue.dispatch])},useMemoCache:Im,useCacheRefresh:Km};Nx.useEffectEvent=zm;function Nf(u,g,C,T){g=u.memoizedState,C=C(T,g),C=C==null?g:m({},g,C),u.memoizedState=C,u.lanes===0&&(u.updateQueue.baseState=C)}var vd={enqueueSetState:function(u,g,C){u=u._reactInternals;var T=$i(),L=Bl(T);L.payload=g,C!=null&&(L.callback=C),g=ol(u,L,T),g!==null&&(bi(g,u,T),ru(g,u,T))},enqueueReplaceState:function(u,g,C){u=u._reactInternals;var T=$i(),L=Bl(T);L.tag=1,L.payload=g,C!=null&&(L.callback=C),g=ol(u,L,T),g!==null&&(bi(g,u,T),ru(g,u,T))},enqueueForceUpdate:function(u,g){u=u._reactInternals;var C=$i(),T=Bl(C);T.tag=2,g!=null&&(T.callback=g),g=ol(u,T,C),g!==null&&(bi(g,u,C),ru(g,u,C))}};function hi(u,g,C,T,L,$,me){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(T,$,me):g.prototype&&g.prototype.isPureReactComponent?!yc(C,T)||!yc(L,$):!0}function kf(u,g,C,T){u=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(C,T),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(C,T),g.state!==u&&vd.enqueueReplaceState(g,g.state,null)}function Vl(u,g){var C=g;if("ref"in g){C={};for(var T in g)T!=="ref"&&(C[T]=g[T])}if(u=u.defaultProps){C===g&&(C=m({},C));for(var L in u)C[L]===void 0&&(C[L]=u[L])}return C}function Zm(u){Ju(u)}function Xm(u){console.error(u)}function Qm(u){Ju(u)}function _f(u,g){try{var C=u.onUncaughtError;C(g.value,{componentStack:g.stack})}catch(T){setTimeout(function(){throw T})}}function Jm(u,g,C){try{var T=u.onCaughtError;T(C.value,{componentStack:C.stack,errorBoundary:g.tag===1?g.stateNode:null})}catch(L){setTimeout(function(){throw L})}}function eg(u,g,C){return C=Bl(C),C.tag=3,C.payload={element:null},C.callback=function(){_f(u,g)},C}function Bp(u){return u=Bl(u),u.tag=3,u}function tg(u,g,C,T){var L=C.type.getDerivedStateFromError;if(typeof L=="function"){var $=T.value;u.payload=function(){return L($)},u.callback=function(){Jm(g,C,T)}}var me=C.stateNode;me!==null&&typeof me.componentDidCatch=="function"&&(u.callback=function(){Jm(g,C,T),typeof L!="function"&&(mu===null?mu=new Set([this]):mu.add(this));var De=T.stack;this.componentDidCatch(T.value,{componentStack:De!==null?De:""})})}function Ca(u,g,C,T,L){if(C.flags|=32768,T!==null&&typeof T=="object"&&typeof T.then=="function"){if(g=C.alternate,g!==null&&Cc(g,C,L,!0),C=Uo.current,C!==null){switch(C.tag){case 31:case 13:return so===null?Rx():C.alternate===null&&Ds===0&&(Ds=3),C.flags&=-257,C.flags|=65536,C.lanes=L,T===lf?C.flags|=16384:(g=C.updateQueue,g===null?C.updateQueue=new Set([T]):g.add(T),Ew(u,T,L)),!1;case 22:return C.flags|=65536,T===lf?C.flags|=16384:(g=C.updateQueue,g===null?(g={transitions:null,markerInstances:null,retryQueue:new Set([T])},C.updateQueue=g):(C=g.retryQueue,C===null?g.retryQueue=new Set([T]):C.add(T)),Ew(u,T,L)),!1}throw Error(t(435,C.tag))}return Ew(u,T,L),Rx(),!1}if(oa)return g=Uo.current,g!==null?((g.flags&65536)===0&&(g.flags|=256),g.flags|=65536,g.lanes=L,T!==vm&&(u=Error(t(422),{cause:T}),jc(No(u,C)))):(T!==vm&&(g=Error(t(423),{cause:T}),jc(No(g,C))),u=u.current.alternate,u.flags|=65536,L&=-L,u.lanes|=L,T=No(T,C),L=eg(u.stateNode,T,L),Em(u,L),Ds!==4&&(Ds=2)),!1;var $=Error(t(520),{cause:T});if($=No($,C),og===null?og=[$]:og.push($),Ds!==4&&(Ds=2),g===null)return!0;T=No(T,C),C=g;do{switch(C.tag){case 3:return C.flags|=65536,u=L&-L,C.lanes|=u,u=eg(C.stateNode,T,u),Em(C,u),!1;case 1:if(g=C.type,$=C.stateNode,(C.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(mu===null||!mu.has($))))return C.flags|=65536,L&=-L,C.lanes|=L,L=Bp(L),tg(L,u,C,T),Em(C,L),!1}C=C.return}while(C!==null);return!1}var zp=Error(t(461)),Ls=!1;function vs(u,g,C,T){g.child=u===null?_m(g,null,C,T):hd(g,u.child,C,T)}function kx(u,g,C,T,L){C=C.render;var $=g.ref;if("ref"in T){var me={};for(var De in T)De!=="ref"&&(me[De]=T[De])}else me=T;return Sc(g),T=Mp(u,g,C,me,$,L),De=oo(),u!==null&&!Ls?(Ip(u,g,L),hr(u,g,L)):(oa&&De&&xm(g),g.flags|=1,vs(u,g,T,L),g.child)}function Ef(u,g,C,T,L){if(u===null){var $=C.type;return typeof $=="function"&&!Yd($)&&$.defaultProps===void 0&&C.compare===null?(g.tag=15,g.type=$,_x(u,g,$,T,L)):(u=Sp(C.type,null,T,g,g.mode,L),u.ref=g.ref,u.return=g,g.child=u)}if($=u.child,!Pr(u,L)){var me=$.memoizedProps;if(C=C.compare,C=C!==null?C:yc,C(me,T)&&u.ref===g.ref)return hr(u,g,L)}return g.flags|=1,u=Ml($,T),u.ref=g.ref,u.return=g,g.child=u}function _x(u,g,C,T,L){if(u!==null){var $=u.memoizedProps;if(yc($,T)&&u.ref===g.ref)if(Ls=!1,g.pendingProps=T=$,Pr(u,L))(u.flags&131072)!==0&&(Ls=!0);else return g.lanes=u.lanes,hr(u,g,L)}return E(u,g,C,T,L)}function ms(u,g,C,T){var L=T.children,$=u!==null?u.memoizedState:null;if(u===null&&g.stateNode===null&&(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),T.mode==="hidden"){if((g.flags&128)!==0){if($=$!==null?$.baseLanes|C:C,u!==null){for(T=g.child=u.child,L=0;T!==null;)L=L|T.lanes|T.childLanes,T=T.sibling;T=L&~$}else T=0,g.child=null;return Ex(u,g,$,C,T)}if((C&536870912)!==0)g.memoizedState={baseLanes:0,cachePool:null},u!==null&&Jd(g,$!==null?$.cachePool:null),$!==null?ff(g,$):Op(),Pm(g);else return T=g.lanes=536870912,Ex(u,g,$!==null?$.baseLanes|C:C,C,T)}else $!==null?(Jd(g,$.cachePool),ff(g,$),pi(),g.memoizedState=null):(u!==null&&Jd(g,null),Op(),pi());return vs(u,g,L,C),g.child}function Tf(u,g){return u!==null&&u.tag===22||g.stateNode!==null||(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.sibling}function Ex(u,g,C,T,L){var $=Sm();return $=$===null?null:{parent:ya._currentValue,pool:$},g.memoizedState={baseLanes:C,cachePool:$},u!==null&&Jd(g,null),Op(),Pm(g),u!==null&&Cc(u,g,T,!0),g.childLanes=L,null}function Up(u,g){return g=nt({mode:g.mode,children:g.children},u.mode),g.ref=u.ref,u.child=g,g.return=u,g}function Of(u,g,C){return hd(g,u.child,null,C),u=Up(g,g.pendingProps),u.flags|=2,Xo(g),g.memoizedState=null,u}function p(u,g,C){var T=g.pendingProps,L=(g.flags&128)!==0;if(g.flags&=-129,u===null){if(oa){if(T.mode==="hidden")return u=Up(g,T),g.lanes=536870912,Tf(null,u);if(nu(g),(u=ts)?(u=VN(u,fi),u=u!==null&&u.data==="&"?u:null,u!==null&&(g.memoizedState={dehydrated:u,treeContext:ui!==null?{id:ko,overflow:Di}:null,retryLane:536870912,hydrationErrors:null},C=ld(u),C.return=g,g.child=C,no=g,ts=null)):u=null,u===null)throw Es(g);return g.lanes=536870912,null}return Up(g,T)}var $=u.memoizedState;if($!==null){var me=$.dehydrated;if(nu(g),L)if(g.flags&256)g.flags&=-257,g=Of(u,g,C);else if(g.memoizedState!==null)g.child=u.child,g.flags|=128,g=null;else throw Error(t(558));else if(Ls||Cc(u,g,C,!1),L=(C&u.childLanes)!==0,Ls||L){if(T=as,T!==null&&(me=Ur(T,C),me!==0&&me!==$.retryLane))throw $.retryLane=me,vc(u,me),bi(T,u,me),zp;Rx(),g=Of(u,g,C)}else u=$.treeContext,ts=ul(me.nextSibling),no=g,oa=!0,wc=null,fi=!1,u!==null&&bc(g,u),g=Up(g,T),g.flags|=4096;return g}return u=Ml(u.child,{mode:T.mode,children:T.children}),u.ref=g.ref,g.child=u,u.return=g,u}function w(u,g){var C=g.ref;if(C===null)u!==null&&u.ref!==null&&(g.flags|=4194816);else{if(typeof C!="function"&&typeof C!="object")throw Error(t(284));(u===null||u.ref!==C)&&(g.flags|=4194816)}}function E(u,g,C,T,L){return Sc(g),C=Mp(u,g,C,T,void 0,L),T=oo(),u!==null&&!Ls?(Ip(u,g,L),hr(u,g,L)):(oa&&T&&xm(g),g.flags|=1,vs(u,g,C,L),g.child)}function _(u,g,C,T,L,$){return Sc(g),g.updateQueue=null,C=lx(g,T,C,L),ix(u),T=oo(),u!==null&&!Ls?(Ip(u,g,$),hr(u,g,$)):(oa&&T&&xm(g),g.flags|=1,vs(u,g,C,$),g.child)}function O(u,g,C,T,L){if(Sc(g),g.stateNode===null){var $=Ri,me=C.contextType;typeof me=="object"&&me!==null&&($=Qs(me)),$=new C(T,$),g.memoizedState=$.state!==null&&$.state!==void 0?$.state:null,$.updater=vd,g.stateNode=$,$._reactInternals=g,$=g.stateNode,$.props=T,$.state=g.memoizedState,$.refs={},uf(g),me=C.contextType,$.context=typeof me=="object"&&me!==null?Qs(me):Ri,$.state=g.memoizedState,me=C.getDerivedStateFromProps,typeof me=="function"&&(Nf(g,C,me,T),$.state=g.memoizedState),typeof C.getDerivedStateFromProps=="function"||typeof $.getSnapshotBeforeUpdate=="function"||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(me=$.state,typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount(),me!==$.state&&vd.enqueueReplaceState($,$.state,null),Ec(g,T,$,L),Ts(),$.state=g.memoizedState),typeof $.componentDidMount=="function"&&(g.flags|=4194308),T=!0}else if(u===null){$=g.stateNode;var De=g.memoizedProps,ut=Vl(C,De);$.props=ut;var Dt=$.context,tr=C.contextType;me=Ri,typeof tr=="object"&&tr!==null&&(me=Qs(tr));var ur=C.getDerivedStateFromProps;tr=typeof ur=="function"||typeof $.getSnapshotBeforeUpdate=="function",De=g.pendingProps!==De,tr||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(De||Dt!==me)&&kf(g,$,T,me),Zo=!1;var zt=g.memoizedState;$.state=zt,Ec(g,T,$,L),Ts(),Dt=g.memoizedState,De||zt!==Dt||Zo?(typeof ur=="function"&&(Nf(g,C,ur,T),Dt=g.memoizedState),(ut=Zo||hi(g,C,ut,T,zt,Dt,me))?(tr||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(g.flags|=4194308)):(typeof $.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=T,g.memoizedState=Dt),$.props=T,$.state=Dt,$.context=me,T=ut):(typeof $.componentDidMount=="function"&&(g.flags|=4194308),T=!1)}else{$=g.stateNode,tu(u,g),me=g.memoizedProps,tr=Vl(C,me),$.props=tr,ur=g.pendingProps,zt=$.context,Dt=C.contextType,ut=Ri,typeof Dt=="object"&&Dt!==null&&(ut=Qs(Dt)),De=C.getDerivedStateFromProps,(Dt=typeof De=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(me!==ur||zt!==ut)&&kf(g,$,T,ut),Zo=!1,zt=g.memoizedState,$.state=zt,Ec(g,T,$,L),Ts();var Gt=g.memoizedState;me!==ur||zt!==Gt||Zo||u!==null&&u.dependencies!==null&&Zd(u.dependencies)?(typeof De=="function"&&(Nf(g,C,De,T),Gt=g.memoizedState),(tr=Zo||hi(g,C,tr,T,zt,Gt,ut)||u!==null&&u.dependencies!==null&&Zd(u.dependencies))?(Dt||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(T,Gt,ut),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(T,Gt,ut)),typeof $.componentDidUpdate=="function"&&(g.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof $.componentDidUpdate!="function"||me===u.memoizedProps&&zt===u.memoizedState||(g.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||me===u.memoizedProps&&zt===u.memoizedState||(g.flags|=1024),g.memoizedProps=T,g.memoizedState=Gt),$.props=T,$.state=Gt,$.context=ut,T=tr):(typeof $.componentDidUpdate!="function"||me===u.memoizedProps&&zt===u.memoizedState||(g.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||me===u.memoizedProps&&zt===u.memoizedState||(g.flags|=1024),T=!1)}return $=T,w(u,g),T=(g.flags&128)!==0,$||T?($=g.stateNode,C=T&&typeof C.getDerivedStateFromError!="function"?null:$.render(),g.flags|=1,u!==null&&T?(g.child=hd(g,u.child,null,L),g.child=hd(g,null,C,L)):vs(u,g,C,L),g.memoizedState=$.state,u=g.child):u=hr(u,g,L),u}function B(u,g,C,T){return Fi(),g.flags|=256,vs(u,g,C,T),g.child}var X={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ae(u){return{baseLanes:u,cachePool:eu()}}function pe(u,g,C){return u=u!==null?u.childLanes&~C:0,g&&(u|=Ui),u}function be(u,g,C){var T=g.pendingProps,L=!1,$=(g.flags&128)!==0,me;if((me=$)||(me=u!==null&&u.memoizedState===null?!1:(Ga.current&2)!==0),me&&(L=!0,g.flags&=-129),me=(g.flags&32)!==0,g.flags&=-33,u===null){if(oa){if(L?Ul(g):pi(),(u=ts)?(u=VN(u,fi),u=u!==null&&u.data!=="&"?u:null,u!==null&&(g.memoizedState={dehydrated:u,treeContext:ui!==null?{id:ko,overflow:Di}:null,retryLane:536870912,hydrationErrors:null},C=ld(u),C.return=g,g.child=C,no=g,ts=null)):u=null,u===null)throw Es(g);return Ww(u)?g.lanes=32:g.lanes=536870912,null}var De=T.children;return T=T.fallback,L?(pi(),L=g.mode,De=nt({mode:"hidden",children:De},L),T=Il(T,L,C,null),De.return=g,T.return=g,De.sibling=T,g.child=De,T=g.child,T.memoizedState=ae(C),T.childLanes=pe(u,me,C),g.memoizedState=X,Tf(null,T)):(Ul(g),He(g,De))}var ut=u.memoizedState;if(ut!==null&&(De=ut.dehydrated,De!==null)){if($)g.flags&256?(Ul(g),g.flags&=-257,g=Ct(u,g,C)):g.memoizedState!==null?(pi(),g.child=u.child,g.flags|=128,g=null):(pi(),De=T.fallback,L=g.mode,T=nt({mode:"visible",children:T.children},L),De=Il(De,L,C,null),De.flags|=2,T.return=g,De.return=g,T.sibling=De,g.child=T,hd(g,u.child,null,C),T=g.child,T.memoizedState=ae(C),T.childLanes=pe(u,me,C),g.memoizedState=X,g=Tf(null,T));else if(Ul(g),Ww(De)){if(me=De.nextSibling&&De.nextSibling.dataset,me)var Dt=me.dgst;me=Dt,T=Error(t(419)),T.stack="",T.digest=me,jc({value:T,source:null,stack:null}),g=Ct(u,g,C)}else if(Ls||Cc(u,g,C,!1),me=(C&u.childLanes)!==0,Ls||me){if(me=as,me!==null&&(T=Ur(me,C),T!==0&&T!==ut.retryLane))throw ut.retryLane=T,vc(u,T),bi(me,u,T),zp;Vw(De)||Rx(),g=Ct(u,g,C)}else Vw(De)?(g.flags|=192,g.child=u.child,g=null):(u=ut.treeContext,ts=ul(De.nextSibling),no=g,oa=!0,wc=null,fi=!1,u!==null&&bc(g,u),g=He(g,T.children),g.flags|=4096);return g}return L?(pi(),De=T.fallback,L=g.mode,ut=u.child,Dt=ut.sibling,T=Ml(ut,{mode:"hidden",children:T.children}),T.subtreeFlags=ut.subtreeFlags&65011712,Dt!==null?De=Ml(Dt,De):(De=Il(De,L,C,null),De.flags|=2),De.return=g,T.return=g,T.sibling=De,g.child=T,Tf(null,T),T=g.child,De=u.child.memoizedState,De===null?De=ae(C):(L=De.cachePool,L!==null?(ut=ya._currentValue,L=L.parent!==ut?{parent:ut,pool:ut}:L):L=eu(),De={baseLanes:De.baseLanes|C,cachePool:L}),T.memoizedState=De,T.childLanes=pe(u,me,C),g.memoizedState=X,Tf(u.child,T)):(Ul(g),C=u.child,u=C.sibling,C=Ml(C,{mode:"visible",children:T.children}),C.return=g,C.sibling=null,u!==null&&(me=g.deletions,me===null?(g.deletions=[u],g.flags|=16):me.push(u)),g.child=C,g.memoizedState=null,C)}function He(u,g){return g=nt({mode:"visible",children:g},u.mode),g.return=u,u.child=g}function nt(u,g){return u=zo(22,u,null,g),u.lanes=0,u}function Ct(u,g,C){return hd(g,u.child,null,C),u=He(g,g.pendingProps.children),u.flags|=2,g.memoizedState=null,u}function gt(u,g,C){u.lanes|=g;var T=u.alternate;T!==null&&(T.lanes|=g),nf(u.return,g,C)}function Ht(u,g,C,T,L,$){var me=u.memoizedState;me===null?u.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:T,tail:C,tailMode:L,treeForkCount:$}:(me.isBackwards=g,me.rendering=null,me.renderingStartTime=0,me.last=T,me.tail=C,me.tailMode=L,me.treeForkCount=$)}function ir(u,g,C){var T=g.pendingProps,L=T.revealOrder,$=T.tail;T=T.children;var me=Ga.current,De=(me&2)!==0;if(De?(me=me&1|2,g.flags|=128):me&=1,Se(Ga,me),vs(u,g,T,C),T=oa?Li:0,!De&&u!==null&&(u.flags&128)!==0)e:for(u=g.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&gt(u,C,g);else if(u.tag===19)gt(u,C,g);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===g)break e;for(;u.sibling===null;){if(u.return===null||u.return===g)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}switch(L){case"forwards":for(C=g.child,L=null;C!==null;)u=C.alternate,u!==null&&pf(u)===null&&(L=C),C=C.sibling;C=L,C===null?(L=g.child,g.child=null):(L=C.sibling,C.sibling=null),Ht(g,!1,L,C,$,T);break;case"backwards":case"unstable_legacy-backwards":for(C=null,L=g.child,g.child=null;L!==null;){if(u=L.alternate,u!==null&&pf(u)===null){g.child=L;break}u=L.sibling,L.sibling=C,C=L,L=u}Ht(g,!0,C,null,$,T);break;case"together":Ht(g,!1,null,null,void 0,T);break;default:g.memoizedState=null}return g.child}function hr(u,g,C){if(u!==null&&(g.dependencies=u.dependencies),hu|=g.lanes,(C&g.childLanes)===0)if(u!==null){if(Cc(u,g,C,!1),(C&g.childLanes)===0)return null}else return null;if(u!==null&&g.child!==u.child)throw Error(t(153));if(g.child!==null){for(u=g.child,C=Ml(u,u.pendingProps),g.child=C,C.return=g;u.sibling!==null;)u=u.sibling,C=C.sibling=Ml(u,u.pendingProps),C.return=g;C.sibling=null}return g.child}function Pr(u,g){return(u.lanes&g)!==0?!0:(u=u.dependencies,!!(u!==null&&Zd(u)))}function Vr(u,g,C){switch(g.tag){case 3:we(g,g.stateNode.containerInfo),nl(g,ya,u.memoizedState.cache),Fi();break;case 27:case 5:ze(g);break;case 4:we(g,g.stateNode.containerInfo);break;case 10:nl(g,g.type,g.memoizedProps.value);break;case 31:if(g.memoizedState!==null)return g.flags|=128,nu(g),null;break;case 13:var T=g.memoizedState;if(T!==null)return T.dehydrated!==null?(Ul(g),g.flags|=128,null):(C&g.child.childLanes)!==0?be(u,g,C):(Ul(g),u=hr(u,g,C),u!==null?u.sibling:null);Ul(g);break;case 19:var L=(u.flags&128)!==0;if(T=(C&g.childLanes)!==0,T||(Cc(u,g,C,!1),T=(C&g.childLanes)!==0),L){if(T)return ir(u,g,C);g.flags|=128}if(L=g.memoizedState,L!==null&&(L.rendering=null,L.tail=null,L.lastEffect=null),Se(Ga,Ga.current),T)break;return null;case 22:return g.lanes=0,ms(u,g,C,g.pendingProps);case 24:nl(g,ya,u.memoizedState.cache)}return hr(u,g,C)}function Mr(u,g,C){if(u!==null)if(u.memoizedProps!==g.pendingProps)Ls=!0;else{if(!Pr(u,C)&&(g.flags&128)===0)return Ls=!1,Vr(u,g,C);Ls=(u.flags&131072)!==0}else Ls=!1,oa&&(g.flags&1048576)!==0&&ym(g,Li,g.index);switch(g.lanes=0,g.tag){case 16:e:{var T=g.pendingProps;if(u=sl(g.elementType),g.type=u,typeof u=="function")Yd(u)?(T=Vl(u,T),g.tag=1,g=O(null,g,u,T,C)):(g.tag=0,g=E(null,g,u,T,C));else{if(u!=null){var L=u.$$typeof;if(L===P){g.tag=11,g=kx(null,g,u,T,C);break e}else if(L===z){g.tag=14,g=Ef(null,g,u,T,C);break e}}throw g=I(u)||u,Error(t(306,g,""))}}return g;case 0:return E(u,g,g.type,g.pendingProps,C);case 1:return T=g.type,L=Vl(T,g.pendingProps),O(u,g,T,L,C);case 3:e:{if(we(g,g.stateNode.containerInfo),u===null)throw Error(t(387));T=g.pendingProps;var $=g.memoizedState;L=$.element,tu(u,g),Ec(g,T,null,C);var me=g.memoizedState;if(T=me.cache,nl(g,ya,T),T!==$.cache&&jm(g,[ya],C,!0),Ts(),T=me.element,$.isDehydrated)if($={element:T,isDehydrated:!1,cache:me.cache},g.updateQueue.baseState=$,g.memoizedState=$,g.flags&256){g=B(u,g,T,C);break e}else if(T!==L){L=No(Error(t(424)),g),jc(L),g=B(u,g,T,C);break e}else for(u=g.stateNode.containerInfo,u.nodeType===9?u=u.body:u=u.nodeName==="HTML"?u.ownerDocument.body:u,ts=ul(u.firstChild),no=g,oa=!0,wc=null,fi=!0,C=_m(g,null,T,C),g.child=C;C;)C.flags=C.flags&-3|4096,C=C.sibling;else{if(Fi(),T===L){g=hr(u,g,C);break e}vs(u,g,T,C)}g=g.child}return g;case 26:return w(u,g),u===null?(C=YN(g.type,null,g.pendingProps,null))?g.memoizedState=C:oa||(C=g.type,u=g.pendingProps,T=$x(Ae.current).createElement(C),T[Er]=g,T[jr]=u,To(T,C,u),at(T),g.stateNode=T):g.memoizedState=YN(g.type,u.memoizedProps,g.pendingProps,u.memoizedState),null;case 27:return ze(g),u===null&&oa&&(T=g.stateNode=qN(g.type,g.pendingProps,Ae.current),no=g,fi=!0,L=ts,vu(g.type)?(Hw=L,ts=ul(T.firstChild)):ts=L),vs(u,g,g.pendingProps.children,C),w(u,g),u===null&&(g.flags|=4194304),g.child;case 5:return u===null&&oa&&((L=T=ts)&&(T=TM(T,g.type,g.pendingProps,fi),T!==null?(g.stateNode=T,no=g,ts=ul(T.firstChild),fi=!1,L=!0):L=!1),L||Es(g)),ze(g),L=g.type,$=g.pendingProps,me=u!==null?u.memoizedProps:null,T=$.children,zw(L,$)?T=null:me!==null&&zw(L,me)&&(g.flags|=32),g.memoizedState!==null&&(L=Mp(u,g,gw,null,null,C),hg._currentValue=L),w(u,g),vs(u,g,T,C),g.child;case 6:return u===null&&oa&&((u=C=ts)&&(C=OM(C,g.pendingProps,fi),C!==null?(g.stateNode=C,no=g,ts=null,u=!0):u=!1),u||Es(g)),null;case 13:return be(u,g,C);case 4:return we(g,g.stateNode.containerInfo),T=g.pendingProps,u===null?g.child=hd(g,null,T,C):vs(u,g,T,C),g.child;case 11:return kx(u,g,g.type,g.pendingProps,C);case 7:return vs(u,g,g.pendingProps,C),g.child;case 8:return vs(u,g,g.pendingProps.children,C),g.child;case 12:return vs(u,g,g.pendingProps.children,C),g.child;case 10:return T=g.pendingProps,nl(g,g.type,T.value),vs(u,g,T.children,C),g.child;case 9:return L=g.type._context,T=g.pendingProps.children,Sc(g),L=Qs(L),T=T(L),g.flags|=1,vs(u,g,T,C),g.child;case 14:return Ef(u,g,g.type,g.pendingProps,C);case 15:return _x(u,g,g.type,g.pendingProps,C);case 19:return ir(u,g,C);case 31:return p(u,g,C);case 22:return ms(u,g,C,g.pendingProps);case 24:return Sc(g),T=Qs(ya),u===null?(L=Sm(),L===null&&(L=as,$=kp(),L.pooledCache=$,$.refCount++,$!==null&&(L.pooledCacheLanes|=C),L=$),g.memoizedState={parent:T,cache:L},uf(g),nl(g,ya,L)):((u.lanes&C)!==0&&(tu(u,g),Ec(g,null,null,C),Ts()),L=u.memoizedState,$=g.memoizedState,L.parent!==T?(L={parent:T,cache:T},g.memoizedState=L,g.lanes===0&&(g.memoizedState=g.updateQueue.baseState=L),nl(g,ya,T)):(T=$.cache,nl(g,ya,T),T!==L.cache&&jm(g,[ya],C,!0))),vs(u,g,g.pendingProps.children,C),g.child;case 29:throw g.pendingProps}throw Error(t(156,g.tag))}function Fr(u){u.flags|=4}function mn(u,g,C,T,L){if((g=(u.mode&32)!==0)&&(g=!1),g){if(u.flags|=16777216,(L&335544128)===L)if(u.stateNode.complete)u.flags|=8192;else if(uN())u.flags|=8192;else throw Fl=lf,of}else u.flags&=-16777217}function dn(u,g){if(g.type!=="stylesheet"||(g.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!ek(g))if(uN())u.flags|=8192;else throw Fl=lf,of}function Mn(u,g){g!==null&&(u.flags|=4),u.flags&16384&&(g=u.tag!==22?wt():536870912,u.lanes|=g,qp|=g)}function va(u,g){if(!oa)switch(u.tailMode){case"hidden":g=u.tail;for(var C=null;g!==null;)g.alternate!==null&&(C=g),g=g.sibling;C===null?u.tail=null:C.sibling=null;break;case"collapsed":C=u.tail;for(var T=null;C!==null;)C.alternate!==null&&(T=C),C=C.sibling;T===null?g||u.tail===null?u.tail=null:u.tail.sibling=null:T.sibling=null}}function Fn(u){var g=u.alternate!==null&&u.alternate.child===u.child,C=0,T=0;if(g)for(var L=u.child;L!==null;)C|=L.lanes|L.childLanes,T|=L.subtreeFlags&65011712,T|=L.flags&65011712,L.return=u,L=L.sibling;else for(L=u.child;L!==null;)C|=L.lanes|L.childLanes,T|=L.subtreeFlags,T|=L.flags,L.return=u,L=L.sibling;return u.subtreeFlags|=T,u.childLanes=C,g}function ds(u,g,C){var T=g.pendingProps;switch(Rl(g),g.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fn(g),null;case 1:return Fn(g),null;case 3:return C=g.stateNode,T=null,u!==null&&(T=u.memoizedState.cache),g.memoizedState.cache!==T&&(g.flags|=2048),al(ya),Oe(),C.pendingContext&&(C.context=C.pendingContext,C.pendingContext=null),(u===null||u.child===null)&&(ls(g)?Fr(g):u===null||u.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,bm())),Fn(g),null;case 26:var L=g.type,$=g.memoizedState;return u===null?(Fr(g),$!==null?(Fn(g),dn(g,$)):(Fn(g),mn(g,L,null,T,C))):$?$!==u.memoizedState?(Fr(g),Fn(g),dn(g,$)):(Fn(g),g.flags&=-16777217):(u=u.memoizedProps,u!==T&&Fr(g),Fn(g),mn(g,L,u,T,C)),null;case 27:if(We(g),C=Ae.current,L=g.type,u!==null&&g.stateNode!=null)u.memoizedProps!==T&&Fr(g);else{if(!T){if(g.stateNode===null)throw Error(t(166));return Fn(g),null}u=fe.current,ls(g)?Rs(g):(u=qN(L,T,C),g.stateNode=u,Fr(g))}return Fn(g),null;case 5:if(We(g),L=g.type,u!==null&&g.stateNode!=null)u.memoizedProps!==T&&Fr(g);else{if(!T){if(g.stateNode===null)throw Error(t(166));return Fn(g),null}if($=fe.current,ls(g))Rs(g);else{var me=$x(Ae.current);switch($){case 1:$=me.createElementNS("http://www.w3.org/2000/svg",L);break;case 2:$=me.createElementNS("http://www.w3.org/1998/Math/MathML",L);break;default:switch(L){case"svg":$=me.createElementNS("http://www.w3.org/2000/svg",L);break;case"math":$=me.createElementNS("http://www.w3.org/1998/Math/MathML",L);break;case"script":$=me.createElement("div"),$.innerHTML="<script><\/script>",$=$.removeChild($.firstChild);break;case"select":$=typeof T.is=="string"?me.createElement("select",{is:T.is}):me.createElement("select"),T.multiple?$.multiple=!0:T.size&&($.size=T.size);break;default:$=typeof T.is=="string"?me.createElement(L,{is:T.is}):me.createElement(L)}}$[Er]=g,$[jr]=T;e:for(me=g.child;me!==null;){if(me.tag===5||me.tag===6)$.appendChild(me.stateNode);else if(me.tag!==4&&me.tag!==27&&me.child!==null){me.child.return=me,me=me.child;continue}if(me===g)break e;for(;me.sibling===null;){if(me.return===null||me.return===g)break e;me=me.return}me.sibling.return=me.return,me=me.sibling}g.stateNode=$;e:switch(To($,L,T),L){case"button":case"input":case"select":case"textarea":T=!!T.autoFocus;break e;case"img":T=!0;break e;default:T=!1}T&&Fr(g)}}return Fn(g),mn(g,g.type,u===null?null:u.memoizedProps,g.pendingProps,C),null;case 6:if(u&&g.stateNode!=null)u.memoizedProps!==T&&Fr(g);else{if(typeof T!="string"&&g.stateNode===null)throw Error(t(166));if(u=Ae.current,ls(g)){if(u=g.stateNode,C=g.memoizedProps,T=null,L=no,L!==null)switch(L.tag){case 27:case 5:T=L.memoizedProps}u[Er]=g,u=!!(u.nodeValue===C||T!==null&&T.suppressHydrationWarning===!0||RN(u.nodeValue,C)),u||Es(g,!0)}else u=$x(u).createTextNode(T),u[Er]=g,g.stateNode=u}return Fn(g),null;case 31:if(C=g.memoizedState,u===null||u.memoizedState!==null){if(T=ls(g),C!==null){if(u===null){if(!T)throw Error(t(318));if(u=g.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(t(557));u[Er]=g}else Fi(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;Fn(g),u=!1}else C=bm(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=C),u=!0;if(!u)return g.flags&256?(Xo(g),g):(Xo(g),null);if((g.flags&128)!==0)throw Error(t(558))}return Fn(g),null;case 13:if(T=g.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(L=ls(g),T!==null&&T.dehydrated!==null){if(u===null){if(!L)throw Error(t(318));if(L=g.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(t(317));L[Er]=g}else Fi(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;Fn(g),L=!1}else L=bm(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=L),L=!0;if(!L)return g.flags&256?(Xo(g),g):(Xo(g),null)}return Xo(g),(g.flags&128)!==0?(g.lanes=C,g):(C=T!==null,u=u!==null&&u.memoizedState!==null,C&&(T=g.child,L=null,T.alternate!==null&&T.alternate.memoizedState!==null&&T.alternate.memoizedState.cachePool!==null&&(L=T.alternate.memoizedState.cachePool.pool),$=null,T.memoizedState!==null&&T.memoizedState.cachePool!==null&&($=T.memoizedState.cachePool.pool),$!==L&&(T.flags|=2048)),C!==u&&C&&(g.child.flags|=8192),Mn(g,g.updateQueue),Fn(g),null);case 4:return Oe(),u===null&&Rw(g.stateNode.containerInfo),Fn(g),null;case 10:return al(g.type),Fn(g),null;case 19:if(Y(Ga),T=g.memoizedState,T===null)return Fn(g),null;if(L=(g.flags&128)!==0,$=T.rendering,$===null)if(L)va(T,!1);else{if(Ds!==0||u!==null&&(u.flags&128)!==0)for(u=g.child;u!==null;){if($=pf(u),$!==null){for(g.flags|=128,va(T,!1),u=$.updateQueue,g.updateQueue=u,Mn(g,u),g.subtreeFlags=0,u=C,C=g.child;C!==null;)tx(C,u),C=C.sibling;return Se(Ga,Ga.current&1|2),oa&&rl(g,T.treeForkCount),g.child}u=u.sibling}T.tail!==null&&he()>Ax&&(g.flags|=128,L=!0,va(T,!1),g.lanes=4194304)}else{if(!L)if(u=pf($),u!==null){if(g.flags|=128,L=!0,u=u.updateQueue,g.updateQueue=u,Mn(g,u),va(T,!0),T.tail===null&&T.tailMode==="hidden"&&!$.alternate&&!oa)return Fn(g),null}else 2*he()-T.renderingStartTime>Ax&&C!==536870912&&(g.flags|=128,L=!0,va(T,!1),g.lanes=4194304);T.isBackwards?($.sibling=g.child,g.child=$):(u=T.last,u!==null?u.sibling=$:g.child=$,T.last=$)}return T.tail!==null?(u=T.tail,T.rendering=u,T.tail=u.sibling,T.renderingStartTime=he(),u.sibling=null,C=Ga.current,Se(Ga,L?C&1|2:C&1),oa&&rl(g,T.treeForkCount),u):(Fn(g),null);case 22:case 23:return Xo(g),Pp(),T=g.memoizedState!==null,u!==null?u.memoizedState!==null!==T&&(g.flags|=8192):T&&(g.flags|=8192),T?(C&536870912)!==0&&(g.flags&128)===0&&(Fn(g),g.subtreeFlags&6&&(g.flags|=8192)):Fn(g),C=g.updateQueue,C!==null&&Mn(g,C.retryQueue),C=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(C=u.memoizedState.cachePool.pool),T=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(T=g.memoizedState.cachePool.pool),T!==C&&(g.flags|=2048),u!==null&&Y(kc),null;case 24:return C=null,u!==null&&(C=u.memoizedState.cache),g.memoizedState.cache!==C&&(g.flags|=2048),al(ya),Fn(g),null;case 25:return null;case 30:return null}throw Error(t(156,g.tag))}function $o(u,g){switch(Rl(g),g.tag){case 1:return u=g.flags,u&65536?(g.flags=u&-65537|128,g):null;case 3:return al(ya),Oe(),u=g.flags,(u&65536)!==0&&(u&128)===0?(g.flags=u&-65537|128,g):null;case 26:case 27:case 5:return We(g),null;case 31:if(g.memoizedState!==null){if(Xo(g),g.alternate===null)throw Error(t(340));Fi()}return u=g.flags,u&65536?(g.flags=u&-65537|128,g):null;case 13:if(Xo(g),u=g.memoizedState,u!==null&&u.dehydrated!==null){if(g.alternate===null)throw Error(t(340));Fi()}return u=g.flags,u&65536?(g.flags=u&-65537|128,g):null;case 19:return Y(Ga),null;case 4:return Oe(),null;case 10:return al(g.type),null;case 22:case 23:return Xo(g),Pp(),u!==null&&Y(kc),u=g.flags,u&65536?(g.flags=u&-65537|128,g):null;case 24:return al(ya),null;case 25:return null;default:return null}}function yo(u,g){switch(Rl(g),g.tag){case 3:al(ya),Oe();break;case 26:case 27:case 5:We(g);break;case 4:Oe();break;case 31:g.memoizedState!==null&&Xo(g);break;case 13:Xo(g);break;case 19:Y(Ga);break;case 10:al(g.type);break;case 22:case 23:Xo(g),Pp(),u!==null&&Y(kc);break;case 24:al(ya)}}function rs(u,g){try{var C=g.updateQueue,T=C!==null?C.lastEffect:null;if(T!==null){var L=T.next;C=L;do{if((C.tag&u)===u){T=void 0;var $=C.create,me=C.inst;T=$(),me.destroy=T}C=C.next}while(C!==L)}}catch(De){$a(g,g.return,De)}}function bs(u,g,C){try{var T=g.updateQueue,L=T!==null?T.lastEffect:null;if(L!==null){var $=L.next;T=$;do{if((T.tag&u)===u){var me=T.inst,De=me.destroy;if(De!==void 0){me.destroy=void 0,L=g;var ut=C,Dt=De;try{Dt()}catch(tr){$a(L,ut,tr)}}}T=T.next}while(T!==$)}}catch(tr){$a(g,g.return,tr)}}function Ws(u){var g=u.updateQueue;if(g!==null){var C=u.stateNode;try{Om(g,C)}catch(T){$a(u,u.return,T)}}}function Ps(u,g,C){C.props=Vl(u.type,u.memoizedProps),C.state=u.memoizedState;try{C.componentWillUnmount()}catch(T){$a(u,g,T)}}function ns(u,g){try{var C=u.ref;if(C!==null){switch(u.tag){case 26:case 27:case 5:var T=u.stateNode;break;case 30:T=u.stateNode;break;default:T=u.stateNode}typeof C=="function"?u.refCleanup=C(T):C.current=T}}catch(L){$a(u,g,L)}}function ba(u,g){var C=u.ref,T=u.refCleanup;if(C!==null)if(typeof T=="function")try{T()}catch(L){$a(u,g,L)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof C=="function")try{C(null)}catch(L){$a(u,g,L)}else C.current=null}function xo(u){var g=u.type,C=u.memoizedProps,T=u.stateNode;try{e:switch(g){case"button":case"input":case"select":case"textarea":C.autoFocus&&T.focus();break e;case"img":C.src?T.src=C.src:C.srcSet&&(T.srcset=C.srcSet)}}catch(L){$a(u,u.return,L)}}function Mc(u,g,C){try{var T=u.stateNode;CM(T,u.type,C,g),T[jr]=g}catch(L){$a(u,u.return,L)}}function Wl(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&vu(u.type)||u.tag===4}function Hs(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||Wl(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&vu(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function mi(u,g,C){var T=u.tag;if(T===5||T===6)u=u.stateNode,g?(C.nodeType===9?C.body:C.nodeName==="HTML"?C.ownerDocument.body:C).insertBefore(u,g):(g=C.nodeType===9?C.body:C.nodeName==="HTML"?C.ownerDocument.body:C,g.appendChild(u),C=C._reactRootContainer,C!=null||g.onclick!==null||(g.onclick=zn));else if(T!==4&&(T===27&&vu(u.type)&&(C=u.stateNode,g=null),u=u.child,u!==null))for(mi(u,g,C),u=u.sibling;u!==null;)mi(u,g,C),u=u.sibling}function ws(u,g,C){var T=u.tag;if(T===5||T===6)u=u.stateNode,g?C.insertBefore(u,g):C.appendChild(u);else if(T!==4&&(T===27&&vu(u.type)&&(C=u.stateNode),u=u.child,u!==null))for(ws(u,g,C),u=u.sibling;u!==null;)ws(u,g,C),u=u.sibling}function $p(u){var g=u.stateNode,C=u.memoizedProps;try{for(var T=u.type,L=g.attributes;L.length;)g.removeAttributeNode(L[0]);To(g,T,C),g[Er]=u,g[jr]=C}catch($){$a(u,u.return,$)}}var io=!1,Ya=!1,Hl=!1,lo=typeof WeakSet=="function"?WeakSet:Set,gs=null;function rg(u,g){if(u=u.containerInfo,Fw=Yx,u=pm(u),Qu(u)){if("selectionStart"in u)var C={start:u.selectionStart,end:u.selectionEnd};else e:{C=(C=u.ownerDocument)&&C.defaultView||window;var T=C.getSelection&&C.getSelection();if(T&&T.rangeCount!==0){C=T.anchorNode;var L=T.anchorOffset,$=T.focusNode;T=T.focusOffset;try{C.nodeType,$.nodeType}catch{C=null;break e}var me=0,De=-1,ut=-1,Dt=0,tr=0,ur=u,zt=null;t:for(;;){for(var Gt;ur!==C||L!==0&&ur.nodeType!==3||(De=me+L),ur!==$||T!==0&&ur.nodeType!==3||(ut=me+T),ur.nodeType===3&&(me+=ur.nodeValue.length),(Gt=ur.firstChild)!==null;)zt=ur,ur=Gt;for(;;){if(ur===u)break t;if(zt===C&&++Dt===L&&(De=me),zt===$&&++tr===T&&(ut=me),(Gt=ur.nextSibling)!==null)break;ur=zt,zt=ur.parentNode}ur=Gt}C=De===-1||ut===-1?null:{start:De,end:ut}}else C=null}C=C||{start:0,end:0}}else C=null;for(Bw={focusedElem:u,selectionRange:C},Yx=!1,gs=g;gs!==null;)if(g=gs,u=g.child,(g.subtreeFlags&1028)!==0&&u!==null)u.return=g,gs=u;else for(;gs!==null;){switch(g=gs,$=g.alternate,u=g.flags,g.tag){case 0:if((u&4)!==0&&(u=g.updateQueue,u=u!==null?u.events:null,u!==null))for(C=0;C<u.length;C++)L=u[C],L.ref.impl=L.nextImpl;break;case 11:case 15:break;case 1:if((u&1024)!==0&&$!==null){u=void 0,C=g,L=$.memoizedProps,$=$.memoizedState,T=C.stateNode;try{var nn=Vl(C.type,L);u=T.getSnapshotBeforeUpdate(nn,$),T.__reactInternalSnapshotBeforeUpdate=u}catch(Tn){$a(C,C.return,Tn)}}break;case 3:if((u&1024)!==0){if(u=g.stateNode.containerInfo,C=u.nodeType,C===9)$w(u);else if(C===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":$w(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(t(163))}if(u=g.sibling,u!==null){u.return=g.return,gs=u;break}gs=g.return}}function G2(u,g,C){var T=C.flags;switch(C.tag){case 0:case 11:case 15:wd(u,C),T&4&&rs(5,C);break;case 1:if(wd(u,C),T&4)if(u=C.stateNode,g===null)try{u.componentDidMount()}catch(me){$a(C,C.return,me)}else{var L=Vl(C.type,g.memoizedProps);g=g.memoizedState;try{u.componentDidUpdate(L,g,u.__reactInternalSnapshotBeforeUpdate)}catch(me){$a(C,C.return,me)}}T&64&&Ws(C),T&512&&ns(C,C.return);break;case 3:if(wd(u,C),T&64&&(u=C.updateQueue,u!==null)){if(g=null,C.child!==null)switch(C.child.tag){case 27:case 5:g=C.child.stateNode;break;case 1:g=C.child.stateNode}try{Om(u,g)}catch(me){$a(C,C.return,me)}}break;case 27:g===null&&T&4&&$p(C);case 26:case 5:wd(u,C),g===null&&T&4&&xo(C),T&512&&ns(C,C.return);break;case 12:wd(u,C);break;case 31:wd(u,C),T&4&&Z2(u,C);break;case 13:wd(u,C),T&4&&X2(u,C),T&64&&(u=C.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(C=uM.bind(null,C),PM(u,C))));break;case 22:if(T=C.memoizedState!==null||io,!T){g=g!==null&&g.memoizedState!==null||Ya,L=io;var $=Ya;io=T,(Ya=g)&&!$?jd(u,C,(C.subtreeFlags&8772)!==0):wd(u,C),io=L,Ya=$}break;case 30:break;default:wd(u,C)}}function K2(u){var g=u.alternate;g!==null&&(u.alternate=null,K2(g)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(g=u.stateNode,g!==null&&Bn(g)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var js=null,gi=!1;function bd(u,g,C){for(C=C.child;C!==null;)Y2(u,g,C),C=C.sibling}function Y2(u,g,C){if(dt&&typeof dt.onCommitFiberUnmount=="function")try{dt.onCommitFiberUnmount(Fe,C)}catch{}switch(C.tag){case 26:Ya||ba(C,g),bd(u,g,C),C.memoizedState?C.memoizedState.count--:C.stateNode&&(C=C.stateNode,C.parentNode.removeChild(C));break;case 27:Ya||ba(C,g);var T=js,L=gi;vu(C.type)&&(js=C.stateNode,gi=!1),bd(u,g,C),ug(C.stateNode),js=T,gi=L;break;case 5:Ya||ba(C,g);case 6:if(T=js,L=gi,js=null,bd(u,g,C),js=T,gi=L,js!==null)if(gi)try{(js.nodeType===9?js.body:js.nodeName==="HTML"?js.ownerDocument.body:js).removeChild(C.stateNode)}catch($){$a(C,g,$)}else try{js.removeChild(C.stateNode)}catch($){$a(C,g,$)}break;case 18:js!==null&&(gi?(u=js,UN(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,C.stateNode),eh(u)):UN(js,C.stateNode));break;case 4:T=js,L=gi,js=C.stateNode.containerInfo,gi=!0,bd(u,g,C),js=T,gi=L;break;case 0:case 11:case 14:case 15:bs(2,C,g),Ya||bs(4,C,g),bd(u,g,C);break;case 1:Ya||(ba(C,g),T=C.stateNode,typeof T.componentWillUnmount=="function"&&Ps(C,g,T)),bd(u,g,C);break;case 21:bd(u,g,C);break;case 22:Ya=(T=Ya)||C.memoizedState!==null,bd(u,g,C),Ya=T;break;default:bd(u,g,C)}}function Z2(u,g){if(g.memoizedState===null&&(u=g.alternate,u!==null&&(u=u.memoizedState,u!==null))){u=u.dehydrated;try{eh(u)}catch(C){$a(g,g.return,C)}}}function X2(u,g){if(g.memoizedState===null&&(u=g.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{eh(u)}catch(C){$a(g,g.return,C)}}function nM(u){switch(u.tag){case 31:case 13:case 19:var g=u.stateNode;return g===null&&(g=u.stateNode=new lo),g;case 22:return u=u.stateNode,g=u._retryCache,g===null&&(g=u._retryCache=new lo),g;default:throw Error(t(435,u.tag))}}function Tx(u,g){var C=nM(u);g.forEach(function(T){if(!C.has(T)){C.add(T);var L=fM.bind(null,u,T);T.then(L,L)}})}function yi(u,g){var C=g.deletions;if(C!==null)for(var T=0;T<C.length;T++){var L=C[T],$=u,me=g,De=me;e:for(;De!==null;){switch(De.tag){case 27:if(vu(De.type)){js=De.stateNode,gi=!1;break e}break;case 5:js=De.stateNode,gi=!1;break e;case 3:case 4:js=De.stateNode.containerInfo,gi=!0;break e}De=De.return}if(js===null)throw Error(t(160));Y2($,me,L),js=null,gi=!1,$=L.alternate,$!==null&&($.return=null),L.return=null}if(g.subtreeFlags&13886)for(g=g.child;g!==null;)Q2(g,u),g=g.sibling}var ql=null;function Q2(u,g){var C=u.alternate,T=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:yi(g,u),xi(u),T&4&&(bs(3,u,u.return),rs(3,u),bs(5,u,u.return));break;case 1:yi(g,u),xi(u),T&512&&(Ya||C===null||ba(C,C.return)),T&64&&io&&(u=u.updateQueue,u!==null&&(T=u.callbacks,T!==null&&(C=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=C===null?T:C.concat(T))));break;case 26:var L=ql;if(yi(g,u),xi(u),T&512&&(Ya||C===null||ba(C,C.return)),T&4){var $=C!==null?C.memoizedState:null;if(T=u.memoizedState,C===null)if(T===null)if(u.stateNode===null){e:{T=u.type,C=u.memoizedProps,L=L.ownerDocument||L;t:switch(T){case"title":$=L.getElementsByTagName("title")[0],(!$||$[Wr]||$[Er]||$.namespaceURI==="http://www.w3.org/2000/svg"||$.hasAttribute("itemprop"))&&($=L.createElement(T),L.head.insertBefore($,L.querySelector("head > title"))),To($,T,C),$[Er]=u,at($),T=$;break e;case"link":var me=QN("link","href",L).get(T+(C.href||""));if(me){for(var De=0;De<me.length;De++)if($=me[De],$.getAttribute("href")===(C.href==null||C.href===""?null:C.href)&&$.getAttribute("rel")===(C.rel==null?null:C.rel)&&$.getAttribute("title")===(C.title==null?null:C.title)&&$.getAttribute("crossorigin")===(C.crossOrigin==null?null:C.crossOrigin)){me.splice(De,1);break t}}$=L.createElement(T),To($,T,C),L.head.appendChild($);break;case"meta":if(me=QN("meta","content",L).get(T+(C.content||""))){for(De=0;De<me.length;De++)if($=me[De],$.getAttribute("content")===(C.content==null?null:""+C.content)&&$.getAttribute("name")===(C.name==null?null:C.name)&&$.getAttribute("property")===(C.property==null?null:C.property)&&$.getAttribute("http-equiv")===(C.httpEquiv==null?null:C.httpEquiv)&&$.getAttribute("charset")===(C.charSet==null?null:C.charSet)){me.splice(De,1);break t}}$=L.createElement(T),To($,T,C),L.head.appendChild($);break;default:throw Error(t(468,T))}$[Er]=u,at($),T=$}u.stateNode=T}else JN(L,u.type,u.stateNode);else u.stateNode=XN(L,T,u.memoizedProps);else $!==T?($===null?C.stateNode!==null&&(C=C.stateNode,C.parentNode.removeChild(C)):$.count--,T===null?JN(L,u.type,u.stateNode):XN(L,T,u.memoizedProps)):T===null&&u.stateNode!==null&&Mc(u,u.memoizedProps,C.memoizedProps)}break;case 27:yi(g,u),xi(u),T&512&&(Ya||C===null||ba(C,C.return)),C!==null&&T&4&&Mc(u,u.memoizedProps,C.memoizedProps);break;case 5:if(yi(g,u),xi(u),T&512&&(Ya||C===null||ba(C,C.return)),u.flags&32){L=u.stateNode;try{kr(L,"")}catch(nn){$a(u,u.return,nn)}}T&4&&u.stateNode!=null&&(L=u.memoizedProps,Mc(u,L,C!==null?C.memoizedProps:L)),T&1024&&(Hl=!0);break;case 6:if(yi(g,u),xi(u),T&4){if(u.stateNode===null)throw Error(t(162));T=u.memoizedProps,C=u.stateNode;try{C.nodeValue=T}catch(nn){$a(u,u.return,nn)}}break;case 3:if(Hx=null,L=ql,ql=Vx(g.containerInfo),yi(g,u),ql=L,xi(u),T&4&&C!==null&&C.memoizedState.isDehydrated)try{eh(g.containerInfo)}catch(nn){$a(u,u.return,nn)}Hl&&(Hl=!1,J2(u));break;case 4:T=ql,ql=Vx(u.stateNode.containerInfo),yi(g,u),xi(u),ql=T;break;case 12:yi(g,u),xi(u);break;case 31:yi(g,u),xi(u),T&4&&(T=u.updateQueue,T!==null&&(u.updateQueue=null,Tx(u,T)));break;case 13:yi(g,u),xi(u),u.child.flags&8192&&u.memoizedState!==null!=(C!==null&&C.memoizedState!==null)&&(Px=he()),T&4&&(T=u.updateQueue,T!==null&&(u.updateQueue=null,Tx(u,T)));break;case 22:L=u.memoizedState!==null;var ut=C!==null&&C.memoizedState!==null,Dt=io,tr=Ya;if(io=Dt||L,Ya=tr||ut,yi(g,u),Ya=tr,io=Dt,xi(u),T&8192)e:for(g=u.stateNode,g._visibility=L?g._visibility&-2:g._visibility|1,L&&(C===null||ut||io||Ya||Pf(u)),C=null,g=u;;){if(g.tag===5||g.tag===26){if(C===null){ut=C=g;try{if($=ut.stateNode,L)me=$.style,typeof me.setProperty=="function"?me.setProperty("display","none","important"):me.display="none";else{De=ut.stateNode;var ur=ut.memoizedProps.style,zt=ur!=null&&ur.hasOwnProperty("display")?ur.display:null;De.style.display=zt==null||typeof zt=="boolean"?"":(""+zt).trim()}}catch(nn){$a(ut,ut.return,nn)}}}else if(g.tag===6){if(C===null){ut=g;try{ut.stateNode.nodeValue=L?"":ut.memoizedProps}catch(nn){$a(ut,ut.return,nn)}}}else if(g.tag===18){if(C===null){ut=g;try{var Gt=ut.stateNode;L?$N(Gt,!0):$N(ut.stateNode,!1)}catch(nn){$a(ut,ut.return,nn)}}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===u)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===u)break e;for(;g.sibling===null;){if(g.return===null||g.return===u)break e;C===g&&(C=null),g=g.return}C===g&&(C=null),g.sibling.return=g.return,g=g.sibling}T&4&&(T=u.updateQueue,T!==null&&(C=T.retryQueue,C!==null&&(T.retryQueue=null,Tx(u,C))));break;case 19:yi(g,u),xi(u),T&4&&(T=u.updateQueue,T!==null&&(u.updateQueue=null,Tx(u,T)));break;case 30:break;case 21:break;default:yi(g,u),xi(u)}}function xi(u){var g=u.flags;if(g&2){try{for(var C,T=u.return;T!==null;){if(Wl(T)){C=T;break}T=T.return}if(C==null)throw Error(t(160));switch(C.tag){case 27:var L=C.stateNode,$=Hs(u);ws(u,$,L);break;case 5:var me=C.stateNode;C.flags&32&&(kr(me,""),C.flags&=-33);var De=Hs(u);ws(u,De,me);break;case 3:case 4:var ut=C.stateNode.containerInfo,Dt=Hs(u);mi(u,Dt,ut);break;default:throw Error(t(161))}}catch(tr){$a(u,u.return,tr)}u.flags&=-3}g&4096&&(u.flags&=-4097)}function J2(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var g=u;J2(g),g.tag===5&&g.flags&1024&&g.stateNode.reset(),u=u.sibling}}function wd(u,g){if(g.subtreeFlags&8772)for(g=g.child;g!==null;)G2(u,g.alternate,g),g=g.sibling}function Pf(u){for(u=u.child;u!==null;){var g=u;switch(g.tag){case 0:case 11:case 14:case 15:bs(4,g,g.return),Pf(g);break;case 1:ba(g,g.return);var C=g.stateNode;typeof C.componentWillUnmount=="function"&&Ps(g,g.return,C),Pf(g);break;case 27:ug(g.stateNode);case 26:case 5:ba(g,g.return),Pf(g);break;case 22:g.memoizedState===null&&Pf(g);break;case 30:Pf(g);break;default:Pf(g)}u=u.sibling}}function jd(u,g,C){for(C=C&&(g.subtreeFlags&8772)!==0,g=g.child;g!==null;){var T=g.alternate,L=u,$=g,me=$.flags;switch($.tag){case 0:case 11:case 15:jd(L,$,C),rs(4,$);break;case 1:if(jd(L,$,C),T=$,L=T.stateNode,typeof L.componentDidMount=="function")try{L.componentDidMount()}catch(Dt){$a(T,T.return,Dt)}if(T=$,L=T.updateQueue,L!==null){var De=T.stateNode;try{var ut=L.shared.hiddenCallbacks;if(ut!==null)for(L.shared.hiddenCallbacks=null,L=0;L<ut.length;L++)Tm(ut[L],De)}catch(Dt){$a(T,T.return,Dt)}}C&&me&64&&Ws($),ns($,$.return);break;case 27:$p($);case 26:case 5:jd(L,$,C),C&&T===null&&me&4&&xo($),ns($,$.return);break;case 12:jd(L,$,C);break;case 31:jd(L,$,C),C&&me&4&&Z2(L,$);break;case 13:jd(L,$,C),C&&me&4&&X2(L,$);break;case 22:$.memoizedState===null&&jd(L,$,C),ns($,$.return);break;case 30:break;default:jd(L,$,C)}g=g.sibling}}function xw(u,g){var C=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(C=u.memoizedState.cachePool.pool),u=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(u=g.memoizedState.cachePool.pool),u!==C&&(u!=null&&u.refCount++,C!=null&&sf(C))}function vw(u,g){u=null,g.alternate!==null&&(u=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==u&&(g.refCount++,u!=null&&sf(u))}function Gl(u,g,C,T){if(g.subtreeFlags&10256)for(g=g.child;g!==null;)eN(u,g,C,T),g=g.sibling}function eN(u,g,C,T){var L=g.flags;switch(g.tag){case 0:case 11:case 15:Gl(u,g,C,T),L&2048&&rs(9,g);break;case 1:Gl(u,g,C,T);break;case 3:Gl(u,g,C,T),L&2048&&(u=null,g.alternate!==null&&(u=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==u&&(g.refCount++,u!=null&&sf(u)));break;case 12:if(L&2048){Gl(u,g,C,T),u=g.stateNode;try{var $=g.memoizedProps,me=$.id,De=$.onPostCommit;typeof De=="function"&&De(me,g.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(ut){$a(g,g.return,ut)}}else Gl(u,g,C,T);break;case 31:Gl(u,g,C,T);break;case 13:Gl(u,g,C,T);break;case 23:break;case 22:$=g.stateNode,me=g.alternate,g.memoizedState!==null?$._visibility&2?Gl(u,g,C,T):ng(u,g):$._visibility&2?Gl(u,g,C,T):($._visibility|=2,Vp(u,g,C,T,(g.subtreeFlags&10256)!==0||!1)),L&2048&&xw(me,g);break;case 24:Gl(u,g,C,T),L&2048&&vw(g.alternate,g);break;default:Gl(u,g,C,T)}}function Vp(u,g,C,T,L){for(L=L&&((g.subtreeFlags&10256)!==0||!1),g=g.child;g!==null;){var $=u,me=g,De=C,ut=T,Dt=me.flags;switch(me.tag){case 0:case 11:case 15:Vp($,me,De,ut,L),rs(8,me);break;case 23:break;case 22:var tr=me.stateNode;me.memoizedState!==null?tr._visibility&2?Vp($,me,De,ut,L):ng($,me):(tr._visibility|=2,Vp($,me,De,ut,L)),L&&Dt&2048&&xw(me.alternate,me);break;case 24:Vp($,me,De,ut,L),L&&Dt&2048&&vw(me.alternate,me);break;default:Vp($,me,De,ut,L)}g=g.sibling}}function ng(u,g){if(g.subtreeFlags&10256)for(g=g.child;g!==null;){var C=u,T=g,L=T.flags;switch(T.tag){case 22:ng(C,T),L&2048&&xw(T.alternate,T);break;case 24:ng(C,T),L&2048&&vw(T.alternate,T);break;default:ng(C,T)}g=g.sibling}}var ag=8192;function Wp(u,g,C){if(u.subtreeFlags&ag)for(u=u.child;u!==null;)tN(u,g,C),u=u.sibling}function tN(u,g,C){switch(u.tag){case 26:Wp(u,g,C),u.flags&ag&&u.memoizedState!==null&&VM(C,ql,u.memoizedState,u.memoizedProps);break;case 5:Wp(u,g,C);break;case 3:case 4:var T=ql;ql=Vx(u.stateNode.containerInfo),Wp(u,g,C),ql=T;break;case 22:u.memoizedState===null&&(T=u.alternate,T!==null&&T.memoizedState!==null?(T=ag,ag=16777216,Wp(u,g,C),ag=T):Wp(u,g,C));break;default:Wp(u,g,C)}}function rN(u){var g=u.alternate;if(g!==null&&(u=g.child,u!==null)){g.child=null;do g=u.sibling,u.sibling=null,u=g;while(u!==null)}}function sg(u){var g=u.deletions;if((u.flags&16)!==0){if(g!==null)for(var C=0;C<g.length;C++){var T=g[C];gs=T,aN(T,u)}rN(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)nN(u),u=u.sibling}function nN(u){switch(u.tag){case 0:case 11:case 15:sg(u),u.flags&2048&&bs(9,u,u.return);break;case 3:sg(u);break;case 12:sg(u);break;case 22:var g=u.stateNode;u.memoizedState!==null&&g._visibility&2&&(u.return===null||u.return.tag!==13)?(g._visibility&=-3,Ox(u)):sg(u);break;default:sg(u)}}function Ox(u){var g=u.deletions;if((u.flags&16)!==0){if(g!==null)for(var C=0;C<g.length;C++){var T=g[C];gs=T,aN(T,u)}rN(u)}for(u=u.child;u!==null;){switch(g=u,g.tag){case 0:case 11:case 15:bs(8,g,g.return),Ox(g);break;case 22:C=g.stateNode,C._visibility&2&&(C._visibility&=-3,Ox(g));break;default:Ox(g)}u=u.sibling}}function aN(u,g){for(;gs!==null;){var C=gs;switch(C.tag){case 0:case 11:case 15:bs(8,C,g);break;case 23:case 22:if(C.memoizedState!==null&&C.memoizedState.cachePool!==null){var T=C.memoizedState.cachePool.pool;T!=null&&T.refCount++}break;case 24:sf(C.memoizedState.cache)}if(T=C.child,T!==null)T.return=C,gs=T;else e:for(C=u;gs!==null;){T=gs;var L=T.sibling,$=T.return;if(K2(T),T===C){gs=null;break e}if(L!==null){L.return=$,gs=L;break e}gs=$}}}var aM={getCacheForType:function(u){var g=Qs(ya),C=g.data.get(u);return C===void 0&&(C=u(),g.data.set(u,C)),C},cacheSignal:function(){return Qs(ya).controller.signal}},sM=typeof WeakMap=="function"?WeakMap:Map,_a=0,as=null,ia=null,da=0,Ua=0,zi=null,pu=!1,Hp=!1,bw=!1,Cd=0,Ds=0,hu=0,Af=0,ww=0,Ui=0,qp=0,og=null,vi=null,jw=!1,Px=0,sN=0,Ax=1/0,Mx=null,mu=null,co=0,gu=null,Gp=null,Sd=0,Cw=0,Sw=null,oN=null,ig=0,Nw=null;function $i(){return(_a&2)!==0&&da!==0?da&-da:D.T!==null?Pw():pn()}function iN(){if(Ui===0)if((da&536870912)===0||oa){var u=Jt;Jt<<=1,(Jt&3932160)===0&&(Jt=262144),Ui=u}else Ui=536870912;return u=Uo.current,u!==null&&(u.flags|=32),Ui}function bi(u,g,C){(u===as&&(Ua===2||Ua===9)||u.cancelPendingCommit!==null)&&(Kp(u,0),yu(u,da,Ui,!1)),er(u,C),((_a&2)===0||u!==as)&&(u===as&&((_a&2)===0&&(Af|=C),Ds===4&&yu(u,da,Ui,!1)),Ic(u))}function lN(u,g,C){if((_a&6)!==0)throw Error(t(327));var T=!C&&(g&127)===0&&(g&u.expiredLanes)===0||Be(u,g),L=T?lM(u,g):_w(u,g,!0),$=T;do{if(L===0){Hp&&!T&&yu(u,g,0,!1);break}else{if(C=u.current.alternate,$&&!oM(C)){L=_w(u,g,!1),$=!1;continue}if(L===2){if($=g,u.errorRecoveryDisabledLanes&$)var me=0;else me=u.pendingLanes&-536870913,me=me!==0?me:me&536870912?536870912:0;if(me!==0){g=me;e:{var De=u;L=og;var ut=De.current.memoizedState.isDehydrated;if(ut&&(Kp(De,me).flags|=256),me=_w(De,me,!1),me!==2){if(bw&&!ut){De.errorRecoveryDisabledLanes|=$,Af|=$,L=4;break e}$=vi,vi=L,$!==null&&(vi===null?vi=$:vi.push.apply(vi,$))}L=me}if($=!1,L!==2)continue}}if(L===1){Kp(u,0),yu(u,g,0,!0);break}e:{switch(T=u,$=L,$){case 0:case 1:throw Error(t(345));case 4:if((g&4194048)!==g)break;case 6:yu(T,g,Ui,!pu);break e;case 2:vi=null;break;case 3:case 5:break;default:throw Error(t(329))}if((g&62914560)===g&&(L=Px+300-he(),10<L)){if(yu(T,g,Ui,!pu),ye(T,0,!0)!==0)break e;Sd=g,T.timeoutHandle=BN(cN.bind(null,T,C,vi,Mx,jw,g,Ui,Af,qp,pu,$,"Throttled",-0,0),L);break e}cN(T,C,vi,Mx,jw,g,Ui,Af,qp,pu,$,null,-0,0)}}break}while(!0);Ic(u)}function cN(u,g,C,T,L,$,me,De,ut,Dt,tr,ur,zt,Gt){if(u.timeoutHandle=-1,ur=g.subtreeFlags,ur&8192||(ur&16785408)===16785408){ur={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:zn},tN(g,$,ur);var nn=($&62914560)===$?Px-he():($&4194048)===$?sN-he():0;if(nn=WM(ur,nn),nn!==null){Sd=$,u.cancelPendingCommit=nn(yN.bind(null,u,g,$,C,T,L,me,De,ut,tr,ur,null,zt,Gt)),yu(u,$,me,!Dt);return}}yN(u,g,$,C,T,L,me,De,ut)}function oM(u){for(var g=u;;){var C=g.tag;if((C===0||C===11||C===15)&&g.flags&16384&&(C=g.updateQueue,C!==null&&(C=C.stores,C!==null)))for(var T=0;T<C.length;T++){var L=C[T],$=L.getSnapshot;L=L.value;try{if(!Co($(),L))return!1}catch{return!1}}if(C=g.child,g.subtreeFlags&16384&&C!==null)C.return=g,g=C;else{if(g===u)break;for(;g.sibling===null;){if(g.return===null||g.return===u)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function yu(u,g,C,T){g&=~ww,g&=~Af,u.suspendedLanes|=g,u.pingedLanes&=~g,T&&(u.warmLanes|=g),T=u.expirationTimes;for(var L=g;0<L;){var $=31-ft(L),me=1<<$;T[$]=-1,L&=~me}C!==0&&rn(u,C,g)}function Ix(){return(_a&6)===0?(lg(0),!1):!0}function kw(){if(ia!==null){if(Ua===0)var u=ia.return;else u=ia,Ll=ud=null,Mm(u),pd=null,cf=0,u=ia;for(;u!==null;)yo(u.alternate,u),u=u.return;ia=null}}function Kp(u,g){var C=u.timeoutHandle;C!==-1&&(u.timeoutHandle=-1,kM(C)),C=u.cancelPendingCommit,C!==null&&(u.cancelPendingCommit=null,C()),Sd=0,kw(),as=u,ia=C=Ml(u.current,null),da=g,Ua=0,zi=null,pu=!1,Hp=Be(u,g),bw=!1,qp=Ui=ww=Af=hu=Ds=0,vi=og=null,jw=!1,(g&8)!==0&&(g|=g&32);var T=u.entangledLanes;if(T!==0)for(u=u.entanglements,T&=g;0<T;){var L=31-ft(T),$=1<<L;g|=u[L],T&=~$}return Cd=g,id(),C}function dN(u,g){Dn=null,D.H=Sf,g===fd||g===Bi?(g=km(),Ua=3):g===of?(g=km(),Ua=4):Ua=g===zp?8:g!==null&&typeof g=="object"&&typeof g.then=="function"?6:1,zi=g,ia===null&&(Ds=1,_f(u,No(g,u.current)))}function uN(){var u=Uo.current;return u===null?!0:(da&4194048)===da?so===null:(da&62914560)===da||(da&536870912)!==0?u===so:!1}function fN(){var u=D.H;return D.H=Sf,u===null?Sf:u}function pN(){var u=D.A;return D.A=aM,u}function Rx(){Ds=4,pu||(da&4194048)!==da&&Uo.current!==null||(Hp=!0),(hu&134217727)===0&&(Af&134217727)===0||as===null||yu(as,da,Ui,!1)}function _w(u,g,C){var T=_a;_a|=2;var L=fN(),$=pN();(as!==u||da!==g)&&(Mx=null,Kp(u,g)),g=!1;var me=Ds;e:do try{if(Ua!==0&&ia!==null){var De=ia,ut=zi;switch(Ua){case 8:kw(),me=6;break e;case 3:case 2:case 9:case 6:Uo.current===null&&(g=!0);var Dt=Ua;if(Ua=0,zi=null,Yp(u,De,ut,Dt),C&&Hp){me=0;break e}break;default:Dt=Ua,Ua=0,zi=null,Yp(u,De,ut,Dt)}}iM(),me=Ds;break}catch(tr){dN(u,tr)}while(!0);return g&&u.shellSuspendCounter++,Ll=ud=null,_a=T,D.H=L,D.A=$,ia===null&&(as=null,da=0,id()),me}function iM(){for(;ia!==null;)hN(ia)}function lM(u,g){var C=_a;_a|=2;var T=fN(),L=pN();as!==u||da!==g?(Mx=null,Ax=he()+500,Kp(u,g)):Hp=Be(u,g);e:do try{if(Ua!==0&&ia!==null){g=ia;var $=zi;t:switch(Ua){case 1:Ua=0,zi=null,Yp(u,g,$,1);break;case 2:case 9:if(Nm($)){Ua=0,zi=null,mN(g);break}g=function(){Ua!==2&&Ua!==9||as!==u||(Ua=7),Ic(u)},$.then(g,g);break e;case 3:Ua=7;break e;case 4:Ua=5;break e;case 7:Nm($)?(Ua=0,zi=null,mN(g)):(Ua=0,zi=null,Yp(u,g,$,7));break;case 5:var me=null;switch(ia.tag){case 26:me=ia.memoizedState;case 5:case 27:var De=ia;if(me?ek(me):De.stateNode.complete){Ua=0,zi=null;var ut=De.sibling;if(ut!==null)ia=ut;else{var Dt=De.return;Dt!==null?(ia=Dt,Lx(Dt)):ia=null}break t}}Ua=0,zi=null,Yp(u,g,$,5);break;case 6:Ua=0,zi=null,Yp(u,g,$,6);break;case 8:kw(),Ds=6;break e;default:throw Error(t(462))}}cM();break}catch(tr){dN(u,tr)}while(!0);return Ll=ud=null,D.H=T,D.A=L,_a=C,ia!==null?0:(as=null,da=0,id(),Ds)}function cM(){for(;ia!==null&&!ue();)hN(ia)}function hN(u){var g=Mr(u.alternate,u,Cd);u.memoizedProps=u.pendingProps,g===null?Lx(u):ia=g}function mN(u){var g=u,C=g.alternate;switch(g.tag){case 15:case 0:g=_(C,g,g.pendingProps,g.type,void 0,da);break;case 11:g=_(C,g,g.pendingProps,g.type.render,g.ref,da);break;case 5:Mm(g);default:yo(C,g),g=ia=tx(g,Cd),g=Mr(C,g,Cd)}u.memoizedProps=u.pendingProps,g===null?Lx(u):ia=g}function Yp(u,g,C,T){Ll=ud=null,Mm(g),pd=null,cf=0;var L=g.return;try{if(Ca(u,L,g,C,da)){Ds=1,_f(u,No(C,u.current)),ia=null;return}}catch($){if(L!==null)throw ia=L,$;Ds=1,_f(u,No(C,u.current)),ia=null;return}g.flags&32768?(oa||T===1?u=!0:Hp||(da&536870912)!==0?u=!1:(pu=u=!0,(T===2||T===9||T===3||T===6)&&(T=Uo.current,T!==null&&T.tag===13&&(T.flags|=16384))),gN(g,u)):Lx(g)}function Lx(u){var g=u;do{if((g.flags&32768)!==0){gN(g,pu);return}u=g.return;var C=ds(g.alternate,g,Cd);if(C!==null){ia=C;return}if(g=g.sibling,g!==null){ia=g;return}ia=g=u}while(g!==null);Ds===0&&(Ds=5)}function gN(u,g){do{var C=$o(u.alternate,u);if(C!==null){C.flags&=32767,ia=C;return}if(C=u.return,C!==null&&(C.flags|=32768,C.subtreeFlags=0,C.deletions=null),!g&&(u=u.sibling,u!==null)){ia=u;return}ia=u=C}while(u!==null);Ds=6,ia=null}function yN(u,g,C,T,L,$,me,De,ut){u.cancelPendingCommit=null;do Dx();while(co!==0);if((_a&6)!==0)throw Error(t(327));if(g!==null){if(g===u.current)throw Error(t(177));if($=g.lanes|g.childLanes,$|=bp,zr(u,C,$,me,De,ut),u===as&&(ia=as=null,da=0),Gp=g,gu=u,Sd=C,Cw=$,Sw=L,oN=T,(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,pM(Ge,function(){return jN(),null})):(u.callbackNode=null,u.callbackPriority=0),T=(g.flags&13878)!==0,(g.subtreeFlags&13878)!==0||T){T=D.T,D.T=null,L=Q.p,Q.p=2,me=_a,_a|=4;try{rg(u,g,C)}finally{_a=me,Q.p=L,D.T=T}}co=1,xN(),vN(),bN()}}function xN(){if(co===1){co=0;var u=gu,g=Gp,C=(g.flags&13878)!==0;if((g.subtreeFlags&13878)!==0||C){C=D.T,D.T=null;var T=Q.p;Q.p=2;var L=_a;_a|=4;try{Q2(g,u);var $=Bw,me=pm(u.containerInfo),De=$.focusedElem,ut=$.selectionRange;if(me!==De&&De&&De.ownerDocument&&ci(De.ownerDocument.documentElement,De)){if(ut!==null&&Qu(De)){var Dt=ut.start,tr=ut.end;if(tr===void 0&&(tr=Dt),"selectionStart"in De)De.selectionStart=Dt,De.selectionEnd=Math.min(tr,De.value.length);else{var ur=De.ownerDocument||document,zt=ur&&ur.defaultView||window;if(zt.getSelection){var Gt=zt.getSelection(),nn=De.textContent.length,Tn=Math.min(ut.start,nn),Xa=ut.end===void 0?Tn:Math.min(ut.end,nn);!Gt.extend&&Tn>Xa&&(me=Xa,Xa=Tn,Tn=me);var Tt=Xu(De,Tn),yt=Xu(De,Xa);if(Tt&&yt&&(Gt.rangeCount!==1||Gt.anchorNode!==Tt.node||Gt.anchorOffset!==Tt.offset||Gt.focusNode!==yt.node||Gt.focusOffset!==yt.offset)){var Rt=ur.createRange();Rt.setStart(Tt.node,Tt.offset),Gt.removeAllRanges(),Tn>Xa?(Gt.addRange(Rt),Gt.extend(yt.node,yt.offset)):(Rt.setEnd(yt.node,yt.offset),Gt.addRange(Rt))}}}}for(ur=[],Gt=De;Gt=Gt.parentNode;)Gt.nodeType===1&&ur.push({element:Gt,left:Gt.scrollLeft,top:Gt.scrollTop});for(typeof De.focus=="function"&&De.focus(),De=0;De<ur.length;De++){var lr=ur[De];lr.element.scrollLeft=lr.left,lr.element.scrollTop=lr.top}}Yx=!!Fw,Bw=Fw=null}finally{_a=L,Q.p=T,D.T=C}}u.current=g,co=2}}function vN(){if(co===2){co=0;var u=gu,g=Gp,C=(g.flags&8772)!==0;if((g.subtreeFlags&8772)!==0||C){C=D.T,D.T=null;var T=Q.p;Q.p=2;var L=_a;_a|=4;try{G2(u,g.alternate,g)}finally{_a=L,Q.p=T,D.T=C}}co=3}}function bN(){if(co===4||co===3){co=0,xe();var u=gu,g=Gp,C=Sd,T=oN;(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?co=5:(co=0,Gp=gu=null,wN(u,u.pendingLanes));var L=u.pendingLanes;if(L===0&&(mu=null),br(C),g=g.stateNode,dt&&typeof dt.onCommitFiberRoot=="function")try{dt.onCommitFiberRoot(Fe,g,void 0,(g.current.flags&128)===128)}catch{}if(T!==null){g=D.T,L=Q.p,Q.p=2,D.T=null;try{for(var $=u.onRecoverableError,me=0;me<T.length;me++){var De=T[me];$(De.value,{componentStack:De.stack})}}finally{D.T=g,Q.p=L}}(Sd&3)!==0&&Dx(),Ic(u),L=u.pendingLanes,(C&261930)!==0&&(L&42)!==0?u===Nw?ig++:(ig=0,Nw=u):ig=0,lg(0)}}function wN(u,g){(u.pooledCacheLanes&=g)===0&&(g=u.pooledCache,g!=null&&(u.pooledCache=null,sf(g)))}function Dx(){return xN(),vN(),bN(),jN()}function jN(){if(co!==5)return!1;var u=gu,g=Cw;Cw=0;var C=br(Sd),T=D.T,L=Q.p;try{Q.p=32>C?32:C,D.T=null,C=Sw,Sw=null;var $=gu,me=Sd;if(co=0,Gp=gu=null,Sd=0,(_a&6)!==0)throw Error(t(331));var De=_a;if(_a|=4,nN($.current),eN($,$.current,me,C),_a=De,lg(0,!1),dt&&typeof dt.onPostCommitFiberRoot=="function")try{dt.onPostCommitFiberRoot(Fe,$)}catch{}return!0}finally{Q.p=L,D.T=T,wN(u,g)}}function CN(u,g,C){g=No(C,g),g=eg(u.stateNode,g,2),u=ol(u,g,2),u!==null&&(er(u,2),Ic(u))}function $a(u,g,C){if(u.tag===3)CN(u,u,C);else for(;g!==null;){if(g.tag===3){CN(g,u,C);break}else if(g.tag===1){var T=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof T.componentDidCatch=="function"&&(mu===null||!mu.has(T))){u=No(C,u),C=Bp(2),T=ol(g,C,2),T!==null&&(tg(C,T,g,u),er(T,2),Ic(T));break}}g=g.return}}function Ew(u,g,C){var T=u.pingCache;if(T===null){T=u.pingCache=new sM;var L=new Set;T.set(g,L)}else L=T.get(g),L===void 0&&(L=new Set,T.set(g,L));L.has(C)||(bw=!0,L.add(C),u=dM.bind(null,u,g,C),g.then(u,u))}function dM(u,g,C){var T=u.pingCache;T!==null&&T.delete(g),u.pingedLanes|=u.suspendedLanes&C,u.warmLanes&=~C,as===u&&(da&C)===C&&(Ds===4||Ds===3&&(da&62914560)===da&&300>he()-Px?(_a&2)===0&&Kp(u,0):ww|=C,qp===da&&(qp=0)),Ic(u)}function SN(u,g){g===0&&(g=wt()),u=vc(u,g),u!==null&&(er(u,g),Ic(u))}function uM(u){var g=u.memoizedState,C=0;g!==null&&(C=g.retryLane),SN(u,C)}function fM(u,g){var C=0;switch(u.tag){case 31:case 13:var T=u.stateNode,L=u.memoizedState;L!==null&&(C=L.retryLane);break;case 19:T=u.stateNode;break;case 22:T=u.stateNode._retryCache;break;default:throw Error(t(314))}T!==null&&T.delete(g),SN(u,C)}function pM(u,g){return J(u,g)}var Fx=null,Zp=null,Tw=!1,Bx=!1,Ow=!1,xu=0;function Ic(u){u!==Zp&&u.next===null&&(Zp===null?Fx=Zp=u:Zp=Zp.next=u),Bx=!0,Tw||(Tw=!0,mM())}function lg(u,g){if(!Ow&&Bx){Ow=!0;do for(var C=!1,T=Fx;T!==null;){if(u!==0){var L=T.pendingLanes;if(L===0)var $=0;else{var me=T.suspendedLanes,De=T.pingedLanes;$=(1<<31-ft(42|u)+1)-1,$&=L&~(me&~De),$=$&201326741?$&201326741|1:$?$|2:0}$!==0&&(C=!0,EN(T,$))}else $=da,$=ye(T,T===as?$:0,T.cancelPendingCommit!==null||T.timeoutHandle!==-1),($&3)===0||Be(T,$)||(C=!0,EN(T,$));T=T.next}while(C);Ow=!1}}function hM(){NN()}function NN(){Bx=Tw=!1;var u=0;xu!==0&&NM()&&(u=xu);for(var g=he(),C=null,T=Fx;T!==null;){var L=T.next,$=kN(T,g);$===0?(T.next=null,C===null?Fx=L:C.next=L,L===null&&(Zp=C)):(C=T,(u!==0||($&3)!==0)&&(Bx=!0)),T=L}co!==0&&co!==5||lg(u),xu!==0&&(xu=0)}function kN(u,g){for(var C=u.suspendedLanes,T=u.pingedLanes,L=u.expirationTimes,$=u.pendingLanes&-62914561;0<$;){var me=31-ft($),De=1<<me,ut=L[me];ut===-1?((De&C)===0||(De&T)!==0)&&(L[me]=tt(De,g)):ut<=g&&(u.expiredLanes|=De),$&=~De}if(g=as,C=da,C=ye(u,u===g?C:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),T=u.callbackNode,C===0||u===g&&(Ua===2||Ua===9)||u.cancelPendingCommit!==null)return T!==null&&T!==null&&ce(T),u.callbackNode=null,u.callbackPriority=0;if((C&3)===0||Be(u,C)){if(g=C&-C,g===u.callbackPriority)return g;switch(T!==null&&ce(T),br(C)){case 2:case 8:C=Ue;break;case 32:C=Ge;break;case 268435456:C=_e;break;default:C=Ge}return T=_N.bind(null,u),C=J(C,T),u.callbackPriority=g,u.callbackNode=C,g}return T!==null&&T!==null&&ce(T),u.callbackPriority=2,u.callbackNode=null,2}function _N(u,g){if(co!==0&&co!==5)return u.callbackNode=null,u.callbackPriority=0,null;var C=u.callbackNode;if(Dx()&&u.callbackNode!==C)return null;var T=da;return T=ye(u,u===as?T:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),T===0?null:(lN(u,T,g),kN(u,he()),u.callbackNode!=null&&u.callbackNode===C?_N.bind(null,u):null)}function EN(u,g){if(Dx())return null;lN(u,g,!0)}function mM(){_M(function(){(_a&6)!==0?J(Le,hM):NN()})}function Pw(){if(xu===0){var u=ea;u===0&&(u=vt,vt<<=1,(vt&261888)===0&&(vt=256)),xu=u}return xu}function TN(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:Vn(""+u)}function ON(u,g){var C=g.ownerDocument.createElement("input");return C.name=g.name,C.value=g.value,u.id&&C.setAttribute("form",u.id),g.parentNode.insertBefore(C,g),u=new FormData(u),C.parentNode.removeChild(C),u}function gM(u,g,C,T,L){if(g==="submit"&&C&&C.stateNode===L){var $=TN((L[jr]||null).action),me=T.submitter;me&&(g=(g=me[jr]||null)?TN(g.formAction):me.getAttribute("formAction"),g!==null&&($=g,me=null));var De=new It("action","action",null,T,L);u.push({event:De,listeners:[{instance:null,listener:function(){if(T.defaultPrevented){if(xu!==0){var ut=me?ON(L,me):new FormData(L);Hm(C,{pending:!0,data:ut,method:L.method,action:$},null,ut)}}else typeof $=="function"&&(De.preventDefault(),ut=me?ON(L,me):new FormData(L),Hm(C,{pending:!0,data:ut,method:L.method,action:$},$,ut))},currentTarget:L}]})}}for(var Aw=0;Aw<Gd.length;Aw++){var Mw=Gd[Aw],yM=Mw.toLowerCase(),xM=Mw[0].toUpperCase()+Mw.slice(1);Ii(yM,"on"+xM)}Ii(xp,"onAnimationEnd"),Ii(gm,"onAnimationIteration"),Ii(vp,"onAnimationStart"),Ii("dblclick","onDoubleClick"),Ii("focusin","onFocus"),Ii("focusout","onBlur"),Ii(ad,"onTransitionRun"),Ii(sd,"onTransitionStart"),Ii(So,"onTransitionCancel"),Ii(Pl,"onTransitionEnd"),ve("onMouseEnter",["mouseout","mouseover"]),ve("onMouseLeave",["mouseout","mouseover"]),ve("onPointerEnter",["pointerout","pointerover"]),ve("onPointerLeave",["pointerout","pointerover"]),$e("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$e("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$e("onBeforeInput",["compositionend","keypress","textInput","paste"]),$e("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$e("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$e("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vM=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cg));function PN(u,g){g=(g&4)!==0;for(var C=0;C<u.length;C++){var T=u[C],L=T.event;T=T.listeners;e:{var $=void 0;if(g)for(var me=T.length-1;0<=me;me--){var De=T[me],ut=De.instance,Dt=De.currentTarget;if(De=De.listener,ut!==$&&L.isPropagationStopped())break e;$=De,L.currentTarget=Dt;try{$(L)}catch(tr){Ju(tr)}L.currentTarget=null,$=ut}else for(me=0;me<T.length;me++){if(De=T[me],ut=De.instance,Dt=De.currentTarget,De=De.listener,ut!==$&&L.isPropagationStopped())break e;$=De,L.currentTarget=Dt;try{$(L)}catch(tr){Ju(tr)}L.currentTarget=null,$=ut}}}}function la(u,g){var C=g[vr];C===void 0&&(C=g[vr]=new Set);var T=u+"__bubble";C.has(T)||(AN(g,u,2,!1),C.add(T))}function Iw(u,g,C){var T=0;g&&(T|=4),AN(C,u,T,g)}var zx="_reactListening"+Math.random().toString(36).slice(2);function Rw(u){if(!u[zx]){u[zx]=!0,jt.forEach(function(C){C!=="selectionchange"&&(vM.has(C)||Iw(C,!1,u),Iw(C,!0,u))});var g=u.nodeType===9?u:u.ownerDocument;g===null||g[zx]||(g[zx]=!0,Iw("selectionchange",!1,g))}}function AN(u,g,C,T){switch(ik(g)){case 2:var L=GM;break;case 8:L=KM;break;default:L=Zw}C=L.bind(null,g,C,u),L=void 0,!wa||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(L=!0),T?L!==void 0?u.addEventListener(g,C,{capture:!0,passive:L}):u.addEventListener(g,C,!0):L!==void 0?u.addEventListener(g,C,{passive:L}):u.addEventListener(g,C,!1)}function Lw(u,g,C,T,L){var $=T;if((g&1)===0&&(g&2)===0&&T!==null)e:for(;;){if(T===null)return;var me=T.tag;if(me===3||me===4){var De=T.stateNode.containerInfo;if(De===L)break;if(me===4)for(me=T.return;me!==null;){var ut=me.tag;if((ut===3||ut===4)&&me.stateNode.containerInfo===L)return;me=me.return}for(;De!==null;){if(me=te(De),me===null)return;if(ut=me.tag,ut===5||ut===6||ut===26||ut===27){T=$=me;continue e}De=De.parentNode}}T=T.return}ka(function(){var Dt=$,tr=ro(C),ur=[];e:{var zt=Al.get(u);if(zt!==void 0){var Gt=It,nn=u;switch(u){case"keypress":if(cn(C)===0)break e;case"keydown":case"keyup":Gt=Da;break;case"focusin":nn="focus",Gt=Kr;break;case"focusout":nn="blur",Gt=Kr;break;case"beforeblur":case"afterblur":Gt=Kr;break;case"click":if(C.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Gt=dr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Gt=Or;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Gt=Mi;break;case xp:case gm:case vp:Gt=Qr;break;case Pl:Gt=Bo;break;case"scroll":case"scrollend":Gt=sr;break;case"wheel":Gt=Tl;break;case"copy":case"cut":case"paste":Gt=Qn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Gt=Fo;break;case"toggle":case"beforetoggle":Gt=gc}var Tn=(g&4)!==0,Xa=!Tn&&(u==="scroll"||u==="scrollend"),Tt=Tn?zt!==null?zt+"Capture":null:zt;Tn=[];for(var yt=Dt,Rt;yt!==null;){var lr=yt;if(Rt=lr.stateNode,lr=lr.tag,lr!==5&&lr!==26&&lr!==27||Rt===null||Tt===null||(lr=ks(yt,Tt),lr!=null&&Tn.push(dg(yt,lr,Rt))),Xa)break;yt=yt.return}0<Tn.length&&(zt=new Gt(zt,nn,null,C,tr),ur.push({event:zt,listeners:Tn}))}}if((g&7)===0){e:{if(zt=u==="mouseover"||u==="pointerover",Gt=u==="mouseout"||u==="pointerout",zt&&C!==Kn&&(nn=C.relatedTarget||C.fromElement)&&(te(nn)||nn[ht]))break e;if((Gt||zt)&&(zt=tr.window===tr?tr:(zt=tr.ownerDocument)?zt.defaultView||zt.parentWindow:window,Gt?(nn=C.relatedTarget||C.toElement,Gt=Dt,nn=nn?te(nn):null,nn!==null&&(Xa=o(nn),Tn=nn.tag,nn!==Xa||Tn!==5&&Tn!==27&&Tn!==6)&&(nn=null)):(Gt=null,nn=Dt),Gt!==nn)){if(Tn=dr,lr="onMouseLeave",Tt="onMouseEnter",yt="mouse",(u==="pointerout"||u==="pointerover")&&(Tn=Fo,lr="onPointerLeave",Tt="onPointerEnter",yt="pointer"),Xa=Gt==null?zt:Re(Gt),Rt=nn==null?zt:Re(nn),zt=new Tn(lr,yt+"leave",Gt,C,tr),zt.target=Xa,zt.relatedTarget=Rt,lr=null,te(tr)===Dt&&(Tn=new Tn(Tt,yt+"enter",nn,C,tr),Tn.target=Rt,Tn.relatedTarget=Xa,lr=Tn),Xa=lr,Gt&&nn)t:{for(Tn=bM,Tt=Gt,yt=nn,Rt=0,lr=Tt;lr;lr=Tn(lr))Rt++;lr=0;for(var jn=yt;jn;jn=Tn(jn))lr++;for(;0<Rt-lr;)Tt=Tn(Tt),Rt--;for(;0<lr-Rt;)yt=Tn(yt),lr--;for(;Rt--;){if(Tt===yt||yt!==null&&Tt===yt.alternate){Tn=Tt;break t}Tt=Tn(Tt),yt=Tn(yt)}Tn=null}else Tn=null;Gt!==null&&MN(ur,zt,Gt,Tn,!1),nn!==null&&Xa!==null&&MN(ur,Xa,nn,Tn,!0)}}e:{if(zt=Dt?Re(Dt):window,Gt=zt.nodeName&&zt.nodeName.toLowerCase(),Gt==="select"||Gt==="input"&&zt.type==="file")var Sa=Xt;else if(ge(zt))if(Nr)Sa=Qy;else{Sa=Xy;var gn=Yu}else Gt=zt.nodeName,!Gt||Gt.toLowerCase()!=="input"||zt.type!=="checkbox"&&zt.type!=="radio"?Dt&&Rr(Dt.elementType)&&(Sa=Xt):Sa=Zu;if(Sa&&(Sa=Sa(u,Dt))){Pe(ur,Sa,C,tr);break e}gn&&gn(u,zt,Dt),u==="focusout"&&Dt&&zt.type==="number"&&Dt.memoizedProps.value!=null&&Ja(zt,"number",zt.value)}switch(gn=Dt?Re(Dt):window,u){case"focusin":(ge(gn)||gn.contentEditable==="true")&&(ed=gn,yp=Dt,td=null);break;case"focusout":td=yp=ed=null;break;case"mousedown":mm=!0;break;case"contextmenu":case"mouseup":case"dragend":mm=!1,ex(ur,C,tr);break;case"selectionchange":if(hm)break;case"keydown":case"keyup":ex(ur,C,tr)}var Gn;if(Vt)e:{switch(u){case"compositionstart":var ua="onCompositionStart";break e;case"compositionend":ua="onCompositionEnd";break e;case"compositionupdate":ua="onCompositionUpdate";break e}ua=void 0}else Ba?Fa(u,C)&&(ua="onCompositionEnd"):u==="keydown"&&C.keyCode===229&&(ua="onCompositionStart");ua&&(xr&&C.locale!=="ko"&&(Ba||ua!=="onCompositionStart"?ua==="onCompositionEnd"&&Ba&&(Gn=Gr()):(Ma=tr,es="value"in Ma?Ma.value:Ma.textContent,Ba=!0)),gn=Ux(Dt,ua),0<gn.length&&(ua=new is(ua,u,null,C,tr),ur.push({event:ua,listeners:gn}),Gn?ua.data=Gn:(Gn=sa(C),Gn!==null&&(ua.data=Gn)))),(Gn=Qt?Yo(u,C):Ys(u,C))&&(ua=Ux(Dt,"onBeforeInput"),0<ua.length&&(gn=new is("onBeforeInput","beforeinput",null,C,tr),ur.push({event:gn,listeners:ua}),gn.data=Gn)),gM(ur,u,Dt,C,tr)}PN(ur,g)})}function dg(u,g,C){return{instance:u,listener:g,currentTarget:C}}function Ux(u,g){for(var C=g+"Capture",T=[];u!==null;){var L=u,$=L.stateNode;if(L=L.tag,L!==5&&L!==26&&L!==27||$===null||(L=ks(u,C),L!=null&&T.unshift(dg(u,L,$)),L=ks(u,g),L!=null&&T.push(dg(u,L,$))),u.tag===3)return T;u=u.return}return[]}function bM(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function MN(u,g,C,T,L){for(var $=g._reactName,me=[];C!==null&&C!==T;){var De=C,ut=De.alternate,Dt=De.stateNode;if(De=De.tag,ut!==null&&ut===T)break;De!==5&&De!==26&&De!==27||Dt===null||(ut=Dt,L?(Dt=ks(C,$),Dt!=null&&me.unshift(dg(C,Dt,ut))):L||(Dt=ks(C,$),Dt!=null&&me.push(dg(C,Dt,ut)))),C=C.return}me.length!==0&&u.push({event:g,listeners:me})}var wM=/\r\n?/g,jM=/\u0000|\uFFFD/g;function IN(u){return(typeof u=="string"?u:""+u).replace(wM,`
`).replace(jM,"")}function RN(u,g){return g=IN(g),IN(u)===g}function Za(u,g,C,T,L,$){switch(C){case"children":typeof T=="string"?g==="body"||g==="textarea"&&T===""||kr(u,T):(typeof T=="number"||typeof T=="bigint")&&g!=="body"&&kr(u,""+T);break;case"className":ct(u,"class",T);break;case"tabIndex":ct(u,"tabindex",T);break;case"dir":case"role":case"viewBox":case"width":case"height":ct(u,C,T);break;case"style":Ar(u,T,$);break;case"data":if(g!=="object"){ct(u,"data",T);break}case"src":case"href":if(T===""&&(g!=="a"||C!=="href")){u.removeAttribute(C);break}if(T==null||typeof T=="function"||typeof T=="symbol"||typeof T=="boolean"){u.removeAttribute(C);break}T=Vn(""+T),u.setAttribute(C,T);break;case"action":case"formAction":if(typeof T=="function"){u.setAttribute(C,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof $=="function"&&(C==="formAction"?(g!=="input"&&Za(u,g,"name",L.name,L,null),Za(u,g,"formEncType",L.formEncType,L,null),Za(u,g,"formMethod",L.formMethod,L,null),Za(u,g,"formTarget",L.formTarget,L,null)):(Za(u,g,"encType",L.encType,L,null),Za(u,g,"method",L.method,L,null),Za(u,g,"target",L.target,L,null)));if(T==null||typeof T=="symbol"||typeof T=="boolean"){u.removeAttribute(C);break}T=Vn(""+T),u.setAttribute(C,T);break;case"onClick":T!=null&&(u.onclick=zn);break;case"onScroll":T!=null&&la("scroll",u);break;case"onScrollEnd":T!=null&&la("scrollend",u);break;case"dangerouslySetInnerHTML":if(T!=null){if(typeof T!="object"||!("__html"in T))throw Error(t(61));if(C=T.__html,C!=null){if(L.children!=null)throw Error(t(60));u.innerHTML=C}}break;case"multiple":u.multiple=T&&typeof T!="function"&&typeof T!="symbol";break;case"muted":u.muted=T&&typeof T!="function"&&typeof T!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(T==null||typeof T=="function"||typeof T=="boolean"||typeof T=="symbol"){u.removeAttribute("xlink:href");break}C=Vn(""+T),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",C);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":T!=null&&typeof T!="function"&&typeof T!="symbol"?u.setAttribute(C,""+T):u.removeAttribute(C);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":T&&typeof T!="function"&&typeof T!="symbol"?u.setAttribute(C,""):u.removeAttribute(C);break;case"capture":case"download":T===!0?u.setAttribute(C,""):T!==!1&&T!=null&&typeof T!="function"&&typeof T!="symbol"?u.setAttribute(C,T):u.removeAttribute(C);break;case"cols":case"rows":case"size":case"span":T!=null&&typeof T!="function"&&typeof T!="symbol"&&!isNaN(T)&&1<=T?u.setAttribute(C,T):u.removeAttribute(C);break;case"rowSpan":case"start":T==null||typeof T=="function"||typeof T=="symbol"||isNaN(T)?u.removeAttribute(C):u.setAttribute(C,T);break;case"popover":la("beforetoggle",u),la("toggle",u),ke(u,"popover",T);break;case"xlinkActuate":bt(u,"http://www.w3.org/1999/xlink","xlink:actuate",T);break;case"xlinkArcrole":bt(u,"http://www.w3.org/1999/xlink","xlink:arcrole",T);break;case"xlinkRole":bt(u,"http://www.w3.org/1999/xlink","xlink:role",T);break;case"xlinkShow":bt(u,"http://www.w3.org/1999/xlink","xlink:show",T);break;case"xlinkTitle":bt(u,"http://www.w3.org/1999/xlink","xlink:title",T);break;case"xlinkType":bt(u,"http://www.w3.org/1999/xlink","xlink:type",T);break;case"xmlBase":bt(u,"http://www.w3.org/XML/1998/namespace","xml:base",T);break;case"xmlLang":bt(u,"http://www.w3.org/XML/1998/namespace","xml:lang",T);break;case"xmlSpace":bt(u,"http://www.w3.org/XML/1998/namespace","xml:space",T);break;case"is":ke(u,"is",T);break;case"innerText":case"textContent":break;default:(!(2<C.length)||C[0]!=="o"&&C[0]!=="O"||C[1]!=="n"&&C[1]!=="N")&&(C=kn.get(C)||C,ke(u,C,T))}}function Dw(u,g,C,T,L,$){switch(C){case"style":Ar(u,T,$);break;case"dangerouslySetInnerHTML":if(T!=null){if(typeof T!="object"||!("__html"in T))throw Error(t(61));if(C=T.__html,C!=null){if(L.children!=null)throw Error(t(60));u.innerHTML=C}}break;case"children":typeof T=="string"?kr(u,T):(typeof T=="number"||typeof T=="bigint")&&kr(u,""+T);break;case"onScroll":T!=null&&la("scroll",u);break;case"onScrollEnd":T!=null&&la("scrollend",u);break;case"onClick":T!=null&&(u.onclick=zn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qe.hasOwnProperty(C))e:{if(C[0]==="o"&&C[1]==="n"&&(L=C.endsWith("Capture"),g=C.slice(2,L?C.length-7:void 0),$=u[jr]||null,$=$!=null?$[C]:null,typeof $=="function"&&u.removeEventListener(g,$,L),typeof T=="function")){typeof $!="function"&&$!==null&&(C in u?u[C]=null:u.hasAttribute(C)&&u.removeAttribute(C)),u.addEventListener(g,T,L);break e}C in u?u[C]=T:T===!0?u.setAttribute(C,""):ke(u,C,T)}}}function To(u,g,C){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":la("error",u),la("load",u);var T=!1,L=!1,$;for($ in C)if(C.hasOwnProperty($)){var me=C[$];if(me!=null)switch($){case"src":T=!0;break;case"srcSet":L=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(t(137,g));default:Za(u,g,$,me,C,null)}}L&&Za(u,g,"srcSet",C.srcSet,C,null),T&&Za(u,g,"src",C.src,C,null);return;case"input":la("invalid",u);var De=$=me=L=null,ut=null,Dt=null;for(T in C)if(C.hasOwnProperty(T)){var tr=C[T];if(tr!=null)switch(T){case"name":L=tr;break;case"type":me=tr;break;case"checked":ut=tr;break;case"defaultChecked":Dt=tr;break;case"value":$=tr;break;case"defaultValue":De=tr;break;case"children":case"dangerouslySetInnerHTML":if(tr!=null)throw Error(t(137,g));break;default:Za(u,g,T,tr,C,null)}}Ns(u,$,De,ut,Dt,me,L,!1);return;case"select":la("invalid",u),T=me=$=null;for(L in C)if(C.hasOwnProperty(L)&&(De=C[L],De!=null))switch(L){case"value":$=De;break;case"defaultValue":me=De;break;case"multiple":T=De;default:Za(u,g,L,De,C,null)}g=$,C=me,u.multiple=!!T,g!=null?Aa(u,!!T,g,!1):C!=null&&Aa(u,!!T,C,!0);return;case"textarea":la("invalid",u),$=L=T=null;for(me in C)if(C.hasOwnProperty(me)&&(De=C[me],De!=null))switch(me){case"value":T=De;break;case"defaultValue":L=De;break;case"children":$=De;break;case"dangerouslySetInnerHTML":if(De!=null)throw Error(t(91));break;default:Za(u,g,me,De,C,null)}Lr(u,T,L,$);return;case"option":for(ut in C)C.hasOwnProperty(ut)&&(T=C[ut],T!=null)&&(ut==="selected"?u.selected=T&&typeof T!="function"&&typeof T!="symbol":Za(u,g,ut,T,C,null));return;case"dialog":la("beforetoggle",u),la("toggle",u),la("cancel",u),la("close",u);break;case"iframe":case"object":la("load",u);break;case"video":case"audio":for(T=0;T<cg.length;T++)la(cg[T],u);break;case"image":la("error",u),la("load",u);break;case"details":la("toggle",u);break;case"embed":case"source":case"link":la("error",u),la("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Dt in C)if(C.hasOwnProperty(Dt)&&(T=C[Dt],T!=null))switch(Dt){case"children":case"dangerouslySetInnerHTML":throw Error(t(137,g));default:Za(u,g,Dt,T,C,null)}return;default:if(Rr(g)){for(tr in C)C.hasOwnProperty(tr)&&(T=C[tr],T!==void 0&&Dw(u,g,tr,T,C,void 0));return}}for(De in C)C.hasOwnProperty(De)&&(T=C[De],T!=null&&Za(u,g,De,T,C,null))}function CM(u,g,C,T){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var L=null,$=null,me=null,De=null,ut=null,Dt=null,tr=null;for(Gt in C){var ur=C[Gt];if(C.hasOwnProperty(Gt)&&ur!=null)switch(Gt){case"checked":break;case"value":break;case"defaultValue":ut=ur;default:T.hasOwnProperty(Gt)||Za(u,g,Gt,null,T,ur)}}for(var zt in T){var Gt=T[zt];if(ur=C[zt],T.hasOwnProperty(zt)&&(Gt!=null||ur!=null))switch(zt){case"type":$=Gt;break;case"name":L=Gt;break;case"checked":Dt=Gt;break;case"defaultChecked":tr=Gt;break;case"value":me=Gt;break;case"defaultValue":De=Gt;break;case"children":case"dangerouslySetInnerHTML":if(Gt!=null)throw Error(t(137,g));break;default:Gt!==ur&&Za(u,g,zt,Gt,T,ur)}}fa(u,me,De,ut,Dt,tr,$,L);return;case"select":Gt=me=De=zt=null;for($ in C)if(ut=C[$],C.hasOwnProperty($)&&ut!=null)switch($){case"value":break;case"multiple":Gt=ut;default:T.hasOwnProperty($)||Za(u,g,$,null,T,ut)}for(L in T)if($=T[L],ut=C[L],T.hasOwnProperty(L)&&($!=null||ut!=null))switch(L){case"value":zt=$;break;case"defaultValue":De=$;break;case"multiple":me=$;default:$!==ut&&Za(u,g,L,$,T,ut)}g=De,C=me,T=Gt,zt!=null?Aa(u,!!C,zt,!1):!!T!=!!C&&(g!=null?Aa(u,!!C,g,!0):Aa(u,!!C,C?[]:"",!1));return;case"textarea":Gt=zt=null;for(De in C)if(L=C[De],C.hasOwnProperty(De)&&L!=null&&!T.hasOwnProperty(De))switch(De){case"value":break;case"children":break;default:Za(u,g,De,null,T,L)}for(me in T)if(L=T[me],$=C[me],T.hasOwnProperty(me)&&(L!=null||$!=null))switch(me){case"value":zt=L;break;case"defaultValue":Gt=L;break;case"children":break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(t(91));break;default:L!==$&&Za(u,g,me,L,T,$)}fs(u,zt,Gt);return;case"option":for(var nn in C)zt=C[nn],C.hasOwnProperty(nn)&&zt!=null&&!T.hasOwnProperty(nn)&&(nn==="selected"?u.selected=!1:Za(u,g,nn,null,T,zt));for(ut in T)zt=T[ut],Gt=C[ut],T.hasOwnProperty(ut)&&zt!==Gt&&(zt!=null||Gt!=null)&&(ut==="selected"?u.selected=zt&&typeof zt!="function"&&typeof zt!="symbol":Za(u,g,ut,zt,T,Gt));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Tn in C)zt=C[Tn],C.hasOwnProperty(Tn)&&zt!=null&&!T.hasOwnProperty(Tn)&&Za(u,g,Tn,null,T,zt);for(Dt in T)if(zt=T[Dt],Gt=C[Dt],T.hasOwnProperty(Dt)&&zt!==Gt&&(zt!=null||Gt!=null))switch(Dt){case"children":case"dangerouslySetInnerHTML":if(zt!=null)throw Error(t(137,g));break;default:Za(u,g,Dt,zt,T,Gt)}return;default:if(Rr(g)){for(var Xa in C)zt=C[Xa],C.hasOwnProperty(Xa)&&zt!==void 0&&!T.hasOwnProperty(Xa)&&Dw(u,g,Xa,void 0,T,zt);for(tr in T)zt=T[tr],Gt=C[tr],!T.hasOwnProperty(tr)||zt===Gt||zt===void 0&&Gt===void 0||Dw(u,g,tr,zt,T,Gt);return}}for(var Tt in C)zt=C[Tt],C.hasOwnProperty(Tt)&&zt!=null&&!T.hasOwnProperty(Tt)&&Za(u,g,Tt,null,T,zt);for(ur in T)zt=T[ur],Gt=C[ur],!T.hasOwnProperty(ur)||zt===Gt||zt==null&&Gt==null||Za(u,g,ur,zt,T,Gt)}function LN(u){switch(u){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function SM(){if(typeof performance.getEntriesByType=="function"){for(var u=0,g=0,C=performance.getEntriesByType("resource"),T=0;T<C.length;T++){var L=C[T],$=L.transferSize,me=L.initiatorType,De=L.duration;if($&&De&&LN(me)){for(me=0,De=L.responseEnd,T+=1;T<C.length;T++){var ut=C[T],Dt=ut.startTime;if(Dt>De)break;var tr=ut.transferSize,ur=ut.initiatorType;tr&&LN(ur)&&(ut=ut.responseEnd,me+=tr*(ut<De?1:(De-Dt)/(ut-Dt)))}if(--T,g+=8*($+me)/(L.duration/1e3),u++,10<u)break}}if(0<u)return g/u/1e6}return navigator.connection&&(u=navigator.connection.downlink,typeof u=="number")?u:5}var Fw=null,Bw=null;function $x(u){return u.nodeType===9?u:u.ownerDocument}function DN(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function FN(u,g){if(u===0)switch(g){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&g==="foreignObject"?0:u}function zw(u,g){return u==="textarea"||u==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.children=="bigint"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var Uw=null;function NM(){var u=window.event;return u&&u.type==="popstate"?u===Uw?!1:(Uw=u,!0):(Uw=null,!1)}var BN=typeof setTimeout=="function"?setTimeout:void 0,kM=typeof clearTimeout=="function"?clearTimeout:void 0,zN=typeof Promise=="function"?Promise:void 0,_M=typeof queueMicrotask=="function"?queueMicrotask:typeof zN<"u"?function(u){return zN.resolve(null).then(u).catch(EM)}:BN;function EM(u){setTimeout(function(){throw u})}function vu(u){return u==="head"}function UN(u,g){var C=g,T=0;do{var L=C.nextSibling;if(u.removeChild(C),L&&L.nodeType===8)if(C=L.data,C==="/$"||C==="/&"){if(T===0){u.removeChild(L),eh(g);return}T--}else if(C==="$"||C==="$?"||C==="$~"||C==="$!"||C==="&")T++;else if(C==="html")ug(u.ownerDocument.documentElement);else if(C==="head"){C=u.ownerDocument.head,ug(C);for(var $=C.firstChild;$;){var me=$.nextSibling,De=$.nodeName;$[Wr]||De==="SCRIPT"||De==="STYLE"||De==="LINK"&&$.rel.toLowerCase()==="stylesheet"||C.removeChild($),$=me}}else C==="body"&&ug(u.ownerDocument.body);C=L}while(C);eh(g)}function $N(u,g){var C=u;u=0;do{var T=C.nextSibling;if(C.nodeType===1?g?(C._stashedDisplay=C.style.display,C.style.display="none"):(C.style.display=C._stashedDisplay||"",C.getAttribute("style")===""&&C.removeAttribute("style")):C.nodeType===3&&(g?(C._stashedText=C.nodeValue,C.nodeValue=""):C.nodeValue=C._stashedText||""),T&&T.nodeType===8)if(C=T.data,C==="/$"){if(u===0)break;u--}else C!=="$"&&C!=="$?"&&C!=="$~"&&C!=="$!"||u++;C=T}while(C)}function $w(u){var g=u.firstChild;for(g&&g.nodeType===10&&(g=g.nextSibling);g;){var C=g;switch(g=g.nextSibling,C.nodeName){case"HTML":case"HEAD":case"BODY":$w(C),Bn(C);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(C.rel.toLowerCase()==="stylesheet")continue}u.removeChild(C)}}function TM(u,g,C,T){for(;u.nodeType===1;){var L=C;if(u.nodeName.toLowerCase()!==g.toLowerCase()){if(!T&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(T){if(!u[Wr])switch(g){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if($=u.getAttribute("rel"),$==="stylesheet"&&u.hasAttribute("data-precedence"))break;if($!==L.rel||u.getAttribute("href")!==(L.href==null||L.href===""?null:L.href)||u.getAttribute("crossorigin")!==(L.crossOrigin==null?null:L.crossOrigin)||u.getAttribute("title")!==(L.title==null?null:L.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if($=u.getAttribute("src"),($!==(L.src==null?null:L.src)||u.getAttribute("type")!==(L.type==null?null:L.type)||u.getAttribute("crossorigin")!==(L.crossOrigin==null?null:L.crossOrigin))&&$&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(g==="input"&&u.type==="hidden"){var $=L.name==null?null:""+L.name;if(L.type==="hidden"&&u.getAttribute("name")===$)return u}else return u;if(u=ul(u.nextSibling),u===null)break}return null}function OM(u,g,C){if(g==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!C||(u=ul(u.nextSibling),u===null))return null;return u}function VN(u,g){for(;u.nodeType!==8;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!g||(u=ul(u.nextSibling),u===null))return null;return u}function Vw(u){return u.data==="$?"||u.data==="$~"}function Ww(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState!=="loading"}function PM(u,g){var C=u.ownerDocument;if(u.data==="$~")u._reactRetry=g;else if(u.data!=="$?"||C.readyState!=="loading")g();else{var T=function(){g(),C.removeEventListener("DOMContentLoaded",T)};C.addEventListener("DOMContentLoaded",T),u._reactRetry=T}}function ul(u){for(;u!=null;u=u.nextSibling){var g=u.nodeType;if(g===1||g===3)break;if(g===8){if(g=u.data,g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"||g==="F!"||g==="F")break;if(g==="/$"||g==="/&")return null}}return u}var Hw=null;function WN(u){u=u.nextSibling;for(var g=0;u;){if(u.nodeType===8){var C=u.data;if(C==="/$"||C==="/&"){if(g===0)return ul(u.nextSibling);g--}else C!=="$"&&C!=="$!"&&C!=="$?"&&C!=="$~"&&C!=="&"||g++}u=u.nextSibling}return null}function HN(u){u=u.previousSibling;for(var g=0;u;){if(u.nodeType===8){var C=u.data;if(C==="$"||C==="$!"||C==="$?"||C==="$~"||C==="&"){if(g===0)return u;g--}else C!=="/$"&&C!=="/&"||g++}u=u.previousSibling}return null}function qN(u,g,C){switch(g=$x(C),u){case"html":if(u=g.documentElement,!u)throw Error(t(452));return u;case"head":if(u=g.head,!u)throw Error(t(453));return u;case"body":if(u=g.body,!u)throw Error(t(454));return u;default:throw Error(t(451))}}function ug(u){for(var g=u.attributes;g.length;)u.removeAttributeNode(g[0]);Bn(u)}var fl=new Map,GN=new Set;function Vx(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var Nd=Q.d;Q.d={f:AM,r:MM,D:IM,C:RM,L:LM,m:DM,X:BM,S:FM,M:zM};function AM(){var u=Nd.f(),g=Ix();return u||g}function MM(u){var g=je(u);g!==null&&g.tag===5&&g.type==="form"?qm(g):Nd.r(u)}var Xp=typeof document>"u"?null:document;function KN(u,g,C){var T=Xp;if(T&&typeof g=="string"&&g){var L=Jn(g);L='link[rel="'+u+'"][href="'+L+'"]',typeof C=="string"&&(L+='[crossorigin="'+C+'"]'),GN.has(L)||(GN.add(L),u={rel:u,crossOrigin:C,href:g},T.querySelector(L)===null&&(g=T.createElement("link"),To(g,"link",u),at(g),T.head.appendChild(g)))}}function IM(u){Nd.D(u),KN("dns-prefetch",u,null)}function RM(u,g){Nd.C(u,g),KN("preconnect",u,g)}function LM(u,g,C){Nd.L(u,g,C);var T=Xp;if(T&&u&&g){var L='link[rel="preload"][as="'+Jn(g)+'"]';g==="image"&&C&&C.imageSrcSet?(L+='[imagesrcset="'+Jn(C.imageSrcSet)+'"]',typeof C.imageSizes=="string"&&(L+='[imagesizes="'+Jn(C.imageSizes)+'"]')):L+='[href="'+Jn(u)+'"]';var $=L;switch(g){case"style":$=Qp(u);break;case"script":$=Jp(u)}fl.has($)||(u=m({rel:"preload",href:g==="image"&&C&&C.imageSrcSet?void 0:u,as:g},C),fl.set($,u),T.querySelector(L)!==null||g==="style"&&T.querySelector(fg($))||g==="script"&&T.querySelector(pg($))||(g=T.createElement("link"),To(g,"link",u),at(g),T.head.appendChild(g)))}}function DM(u,g){Nd.m(u,g);var C=Xp;if(C&&u){var T=g&&typeof g.as=="string"?g.as:"script",L='link[rel="modulepreload"][as="'+Jn(T)+'"][href="'+Jn(u)+'"]',$=L;switch(T){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":$=Jp(u)}if(!fl.has($)&&(u=m({rel:"modulepreload",href:u},g),fl.set($,u),C.querySelector(L)===null)){switch(T){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(C.querySelector(pg($)))return}T=C.createElement("link"),To(T,"link",u),at(T),C.head.appendChild(T)}}}function FM(u,g,C){Nd.S(u,g,C);var T=Xp;if(T&&u){var L=Ye(T).hoistableStyles,$=Qp(u);g=g||"default";var me=L.get($);if(!me){var De={loading:0,preload:null};if(me=T.querySelector(fg($)))De.loading=5;else{u=m({rel:"stylesheet",href:u,"data-precedence":g},C),(C=fl.get($))&&qw(u,C);var ut=me=T.createElement("link");at(ut),To(ut,"link",u),ut._p=new Promise(function(Dt,tr){ut.onload=Dt,ut.onerror=tr}),ut.addEventListener("load",function(){De.loading|=1}),ut.addEventListener("error",function(){De.loading|=2}),De.loading|=4,Wx(me,g,T)}me={type:"stylesheet",instance:me,count:1,state:De},L.set($,me)}}}function BM(u,g){Nd.X(u,g);var C=Xp;if(C&&u){var T=Ye(C).hoistableScripts,L=Jp(u),$=T.get(L);$||($=C.querySelector(pg(L)),$||(u=m({src:u,async:!0},g),(g=fl.get(L))&&Gw(u,g),$=C.createElement("script"),at($),To($,"link",u),C.head.appendChild($)),$={type:"script",instance:$,count:1,state:null},T.set(L,$))}}function zM(u,g){Nd.M(u,g);var C=Xp;if(C&&u){var T=Ye(C).hoistableScripts,L=Jp(u),$=T.get(L);$||($=C.querySelector(pg(L)),$||(u=m({src:u,async:!0,type:"module"},g),(g=fl.get(L))&&Gw(u,g),$=C.createElement("script"),at($),To($,"link",u),C.head.appendChild($)),$={type:"script",instance:$,count:1,state:null},T.set(L,$))}}function YN(u,g,C,T){var L=(L=Ae.current)?Vx(L):null;if(!L)throw Error(t(446));switch(u){case"meta":case"title":return null;case"style":return typeof C.precedence=="string"&&typeof C.href=="string"?(g=Qp(C.href),C=Ye(L).hoistableStyles,T=C.get(g),T||(T={type:"style",instance:null,count:0,state:null},C.set(g,T)),T):{type:"void",instance:null,count:0,state:null};case"link":if(C.rel==="stylesheet"&&typeof C.href=="string"&&typeof C.precedence=="string"){u=Qp(C.href);var $=Ye(L).hoistableStyles,me=$.get(u);if(me||(L=L.ownerDocument||L,me={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},$.set(u,me),($=L.querySelector(fg(u)))&&!$._p&&(me.instance=$,me.state.loading=5),fl.has(u)||(C={rel:"preload",as:"style",href:C.href,crossOrigin:C.crossOrigin,integrity:C.integrity,media:C.media,hrefLang:C.hrefLang,referrerPolicy:C.referrerPolicy},fl.set(u,C),$||UM(L,u,C,me.state))),g&&T===null)throw Error(t(528,""));return me}if(g&&T!==null)throw Error(t(529,""));return null;case"script":return g=C.async,C=C.src,typeof C=="string"&&g&&typeof g!="function"&&typeof g!="symbol"?(g=Jp(C),C=Ye(L).hoistableScripts,T=C.get(g),T||(T={type:"script",instance:null,count:0,state:null},C.set(g,T)),T):{type:"void",instance:null,count:0,state:null};default:throw Error(t(444,u))}}function Qp(u){return'href="'+Jn(u)+'"'}function fg(u){return'link[rel="stylesheet"]['+u+"]"}function ZN(u){return m({},u,{"data-precedence":u.precedence,precedence:null})}function UM(u,g,C,T){u.querySelector('link[rel="preload"][as="style"]['+g+"]")?T.loading=1:(g=u.createElement("link"),T.preload=g,g.addEventListener("load",function(){return T.loading|=1}),g.addEventListener("error",function(){return T.loading|=2}),To(g,"link",C),at(g),u.head.appendChild(g))}function Jp(u){return'[src="'+Jn(u)+'"]'}function pg(u){return"script[async]"+u}function XN(u,g,C){if(g.count++,g.instance===null)switch(g.type){case"style":var T=u.querySelector('style[data-href~="'+Jn(C.href)+'"]');if(T)return g.instance=T,at(T),T;var L=m({},C,{"data-href":C.href,"data-precedence":C.precedence,href:null,precedence:null});return T=(u.ownerDocument||u).createElement("style"),at(T),To(T,"style",L),Wx(T,C.precedence,u),g.instance=T;case"stylesheet":L=Qp(C.href);var $=u.querySelector(fg(L));if($)return g.state.loading|=4,g.instance=$,at($),$;T=ZN(C),(L=fl.get(L))&&qw(T,L),$=(u.ownerDocument||u).createElement("link"),at($);var me=$;return me._p=new Promise(function(De,ut){me.onload=De,me.onerror=ut}),To($,"link",T),g.state.loading|=4,Wx($,C.precedence,u),g.instance=$;case"script":return $=Jp(C.src),(L=u.querySelector(pg($)))?(g.instance=L,at(L),L):(T=C,(L=fl.get($))&&(T=m({},C),Gw(T,L)),u=u.ownerDocument||u,L=u.createElement("script"),at(L),To(L,"link",T),u.head.appendChild(L),g.instance=L);case"void":return null;default:throw Error(t(443,g.type))}else g.type==="stylesheet"&&(g.state.loading&4)===0&&(T=g.instance,g.state.loading|=4,Wx(T,C.precedence,u));return g.instance}function Wx(u,g,C){for(var T=C.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),L=T.length?T[T.length-1]:null,$=L,me=0;me<T.length;me++){var De=T[me];if(De.dataset.precedence===g)$=De;else if($!==L)break}$?$.parentNode.insertBefore(u,$.nextSibling):(g=C.nodeType===9?C.head:C,g.insertBefore(u,g.firstChild))}function qw(u,g){u.crossOrigin==null&&(u.crossOrigin=g.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=g.referrerPolicy),u.title==null&&(u.title=g.title)}function Gw(u,g){u.crossOrigin==null&&(u.crossOrigin=g.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=g.referrerPolicy),u.integrity==null&&(u.integrity=g.integrity)}var Hx=null;function QN(u,g,C){if(Hx===null){var T=new Map,L=Hx=new Map;L.set(C,T)}else L=Hx,T=L.get(C),T||(T=new Map,L.set(C,T));if(T.has(u))return T;for(T.set(u,null),C=C.getElementsByTagName(u),L=0;L<C.length;L++){var $=C[L];if(!($[Wr]||$[Er]||u==="link"&&$.getAttribute("rel")==="stylesheet")&&$.namespaceURI!=="http://www.w3.org/2000/svg"){var me=$.getAttribute(g)||"";me=u+me;var De=T.get(me);De?De.push($):T.set(me,[$])}}return T}function JN(u,g,C){u=u.ownerDocument||u,u.head.insertBefore(C,g==="title"?u.querySelector("head > title"):null)}function $M(u,g,C){if(C===1||g.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof g.precedence!="string"||typeof g.href!="string"||g.href==="")break;return!0;case"link":if(typeof g.rel!="string"||typeof g.href!="string"||g.href===""||g.onLoad||g.onError)break;return g.rel==="stylesheet"?(u=g.disabled,typeof g.precedence=="string"&&u==null):!0;case"script":if(g.async&&typeof g.async!="function"&&typeof g.async!="symbol"&&!g.onLoad&&!g.onError&&g.src&&typeof g.src=="string")return!0}return!1}function ek(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}function VM(u,g,C,T){if(C.type==="stylesheet"&&(typeof T.media!="string"||matchMedia(T.media).matches!==!1)&&(C.state.loading&4)===0){if(C.instance===null){var L=Qp(T.href),$=g.querySelector(fg(L));if($){g=$._p,g!==null&&typeof g=="object"&&typeof g.then=="function"&&(u.count++,u=qx.bind(u),g.then(u,u)),C.state.loading|=4,C.instance=$,at($);return}$=g.ownerDocument||g,T=ZN(T),(L=fl.get(L))&&qw(T,L),$=$.createElement("link"),at($);var me=$;me._p=new Promise(function(De,ut){me.onload=De,me.onerror=ut}),To($,"link",T),C.instance=$}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(C,g),(g=C.state.preload)&&(C.state.loading&3)===0&&(u.count++,C=qx.bind(u),g.addEventListener("load",C),g.addEventListener("error",C))}}var Kw=0;function WM(u,g){return u.stylesheets&&u.count===0&&Kx(u,u.stylesheets),0<u.count||0<u.imgCount?function(C){var T=setTimeout(function(){if(u.stylesheets&&Kx(u,u.stylesheets),u.unsuspend){var $=u.unsuspend;u.unsuspend=null,$()}},6e4+g);0<u.imgBytes&&Kw===0&&(Kw=62500*SM());var L=setTimeout(function(){if(u.waitingForImages=!1,u.count===0&&(u.stylesheets&&Kx(u,u.stylesheets),u.unsuspend)){var $=u.unsuspend;u.unsuspend=null,$()}},(u.imgBytes>Kw?50:800)+g);return u.unsuspend=C,function(){u.unsuspend=null,clearTimeout(T),clearTimeout(L)}}:null}function qx(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Kx(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var Gx=null;function Kx(u,g){u.stylesheets=null,u.unsuspend!==null&&(u.count++,Gx=new Map,g.forEach(HM,u),Gx=null,qx.call(u))}function HM(u,g){if(!(g.state.loading&4)){var C=Gx.get(u);if(C)var T=C.get(null);else{C=new Map,Gx.set(u,C);for(var L=u.querySelectorAll("link[data-precedence],style[data-precedence]"),$=0;$<L.length;$++){var me=L[$];(me.nodeName==="LINK"||me.getAttribute("media")!=="not all")&&(C.set(me.dataset.precedence,me),T=me)}T&&C.set(null,T)}L=g.instance,me=L.getAttribute("data-precedence"),$=C.get(me)||T,$===T&&C.set(null,L),C.set(me,L),this.count++,T=qx.bind(this),L.addEventListener("load",T),L.addEventListener("error",T),$?$.parentNode.insertBefore(L,$.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(L,u.firstChild)),g.state.loading|=4}}var hg={$$typeof:N,Provider:null,Consumer:null,_currentValue:oe,_currentValue2:oe,_threadCount:0};function qM(u,g,C,T,L,$,me,De,ut){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ut(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ut(0),this.hiddenUpdates=Ut(null),this.identifierPrefix=T,this.onUncaughtError=L,this.onCaughtError=$,this.onRecoverableError=me,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ut,this.incompleteTransitions=new Map}function tk(u,g,C,T,L,$,me,De,ut,Dt,tr,ur){return u=new qM(u,g,C,me,ut,Dt,tr,ur,De),g=1,$===!0&&(g|=24),$=zo(3,null,null,g),u.current=$,$.stateNode=u,g=kp(),g.refCount++,u.pooledCache=g,g.refCount++,$.memoizedState={element:T,isDehydrated:C,cache:g},uf($),u}function rk(u){return u?(u=Ri,u):Ri}function nk(u,g,C,T,L,$){L=rk(L),T.context===null?T.context=L:T.pendingContext=L,T=Bl(g),T.payload={element:C},$=$===void 0?null:$,$!==null&&(T.callback=$),C=ol(u,T,g),C!==null&&(bi(C,u,g),ru(C,u,g))}function ak(u,g){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var C=u.retryLane;u.retryLane=C!==0&&C<g?C:g}}function Yw(u,g){ak(u,g),(u=u.alternate)&&ak(u,g)}function sk(u){if(u.tag===13||u.tag===31){var g=vc(u,67108864);g!==null&&bi(g,u,67108864),Yw(u,67108864)}}function ok(u){if(u.tag===13||u.tag===31){var g=$i();g=ar(g);var C=vc(u,g);C!==null&&bi(C,u,g),Yw(u,g)}}var Yx=!0;function GM(u,g,C,T){var L=D.T;D.T=null;var $=Q.p;try{Q.p=2,Zw(u,g,C,T)}finally{Q.p=$,D.T=L}}function KM(u,g,C,T){var L=D.T;D.T=null;var $=Q.p;try{Q.p=8,Zw(u,g,C,T)}finally{Q.p=$,D.T=L}}function Zw(u,g,C,T){if(Yx){var L=Xw(T);if(L===null)Lw(u,g,T,Zx,C),lk(u,T);else if(ZM(L,u,g,C,T))T.stopPropagation();else if(lk(u,T),g&4&&-1<YM.indexOf(u)){for(;L!==null;){var $=je(L);if($!==null)switch($.tag){case 3:if($=$.stateNode,$.current.memoizedState.isDehydrated){var me=Wt($.pendingLanes);if(me!==0){var De=$;for(De.pendingLanes|=2,De.entangledLanes|=2;me;){var ut=1<<31-ft(me);De.entanglements[1]|=ut,me&=~ut}Ic($),(_a&6)===0&&(Ax=he()+500,lg(0))}}break;case 31:case 13:De=vc($,2),De!==null&&bi(De,$,2),Ix(),Yw($,2)}if($=Xw(T),$===null&&Lw(u,g,T,Zx,C),$===L)break;L=$}L!==null&&T.stopPropagation()}else Lw(u,g,T,null,C)}}function Xw(u){return u=ro(u),Qw(u)}var Zx=null;function Qw(u){if(Zx=null,u=te(u),u!==null){var g=o(u);if(g===null)u=null;else{var C=g.tag;if(C===13){if(u=i(g),u!==null)return u;u=null}else if(C===31){if(u=l(g),u!==null)return u;u=null}else if(C===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;u=null}else g!==u&&(u=null)}}return Zx=u,null}function ik(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(se()){case Le:return 2;case Ue:return 8;case Ge:case ie:return 32;case _e:return 268435456;default:return 32}default:return 32}}var Jw=!1,bu=null,wu=null,ju=null,mg=new Map,gg=new Map,Cu=[],YM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lk(u,g){switch(u){case"focusin":case"focusout":bu=null;break;case"dragenter":case"dragleave":wu=null;break;case"mouseover":case"mouseout":ju=null;break;case"pointerover":case"pointerout":mg.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":gg.delete(g.pointerId)}}function yg(u,g,C,T,L,$){return u===null||u.nativeEvent!==$?(u={blockedOn:g,domEventName:C,eventSystemFlags:T,nativeEvent:$,targetContainers:[L]},g!==null&&(g=je(g),g!==null&&sk(g)),u):(u.eventSystemFlags|=T,g=u.targetContainers,L!==null&&g.indexOf(L)===-1&&g.push(L),u)}function ZM(u,g,C,T,L){switch(g){case"focusin":return bu=yg(bu,u,g,C,T,L),!0;case"dragenter":return wu=yg(wu,u,g,C,T,L),!0;case"mouseover":return ju=yg(ju,u,g,C,T,L),!0;case"pointerover":var $=L.pointerId;return mg.set($,yg(mg.get($)||null,u,g,C,T,L)),!0;case"gotpointercapture":return $=L.pointerId,gg.set($,yg(gg.get($)||null,u,g,C,T,L)),!0}return!1}function ck(u){var g=te(u.target);if(g!==null){var C=o(g);if(C!==null){if(g=C.tag,g===13){if(g=i(C),g!==null){u.blockedOn=g,In(u.priority,function(){ok(C)});return}}else if(g===31){if(g=l(C),g!==null){u.blockedOn=g,In(u.priority,function(){ok(C)});return}}else if(g===3&&C.stateNode.current.memoizedState.isDehydrated){u.blockedOn=C.tag===3?C.stateNode.containerInfo:null;return}}}u.blockedOn=null}function Xx(u){if(u.blockedOn!==null)return!1;for(var g=u.targetContainers;0<g.length;){var C=Xw(u.nativeEvent);if(C===null){C=u.nativeEvent;var T=new C.constructor(C.type,C);Kn=T,C.target.dispatchEvent(T),Kn=null}else return g=je(C),g!==null&&sk(g),u.blockedOn=C,!1;g.shift()}return!0}function dk(u,g,C){Xx(u)&&C.delete(g)}function XM(){Jw=!1,bu!==null&&Xx(bu)&&(bu=null),wu!==null&&Xx(wu)&&(wu=null),ju!==null&&Xx(ju)&&(ju=null),mg.forEach(dk),gg.forEach(dk)}function Qx(u,g){u.blockedOn===g&&(u.blockedOn=null,Jw||(Jw=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,XM)))}var Jx=null;function uk(u){Jx!==u&&(Jx=u,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Jx===u&&(Jx=null);for(var g=0;g<u.length;g+=3){var C=u[g],T=u[g+1],L=u[g+2];if(typeof T!="function"){if(Qw(T||C)===null)continue;break}var $=je(C);$!==null&&(u.splice(g,3),g-=3,Hm($,{pending:!0,data:L,method:C.method,action:T},T,L))}}))}function eh(u){function g(ut){return Qx(ut,u)}bu!==null&&Qx(bu,u),wu!==null&&Qx(wu,u),ju!==null&&Qx(ju,u),mg.forEach(g),gg.forEach(g);for(var C=0;C<Cu.length;C++){var T=Cu[C];T.blockedOn===u&&(T.blockedOn=null)}for(;0<Cu.length&&(C=Cu[0],C.blockedOn===null);)ck(C),C.blockedOn===null&&Cu.shift();if(C=(u.ownerDocument||u).$$reactFormReplay,C!=null)for(T=0;T<C.length;T+=3){var L=C[T],$=C[T+1],me=L[jr]||null;if(typeof $=="function")me||uk(C);else if(me){var De=null;if($&&$.hasAttribute("formAction")){if(L=$,me=$[jr]||null)De=me.formAction;else if(Qw(L)!==null)continue}else De=me.action;typeof De=="function"?C[T+1]=De:(C.splice(T,3),T-=3),uk(C)}}}function fk(){function u($){$.canIntercept&&$.info==="react-transition"&&$.intercept({handler:function(){return new Promise(function(me){return L=me})},focusReset:"manual",scroll:"manual"})}function g(){L!==null&&(L(),L=null),T||setTimeout(C,20)}function C(){if(!T&&!navigation.transition){var $=navigation.currentEntry;$&&$.url!=null&&navigation.navigate($.url,{state:$.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var T=!1,L=null;return navigation.addEventListener("navigate",u),navigation.addEventListener("navigatesuccess",g),navigation.addEventListener("navigateerror",g),setTimeout(C,100),function(){T=!0,navigation.removeEventListener("navigate",u),navigation.removeEventListener("navigatesuccess",g),navigation.removeEventListener("navigateerror",g),L!==null&&(L(),L=null)}}}function ej(u){this._internalRoot=u}e0.prototype.render=ej.prototype.render=function(u){var g=this._internalRoot;if(g===null)throw Error(t(409));var C=g.current,T=$i();nk(C,T,u,g,null,null)},e0.prototype.unmount=ej.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var g=u.containerInfo;nk(u.current,2,null,u,null,null),Ix(),g[ht]=null}};function e0(u){this._internalRoot=u}e0.prototype.unstable_scheduleHydration=function(u){if(u){var g=pn();u={blockedOn:null,target:u,priority:g};for(var C=0;C<Cu.length&&g!==0&&g<Cu[C].priority;C++);Cu.splice(C,0,u),C===0&&ck(u)}};var pk=r.version;if(pk!=="19.2.4")throw Error(t(527,pk,"19.2.4"));Q.findDOMNode=function(u){var g=u._reactInternals;if(g===void 0)throw typeof u.render=="function"?Error(t(188)):(u=Object.keys(u).join(","),Error(t(268,u)));return u=d(g),u=u!==null?h(u):null,u=u===null?null:u.stateNode,u};var QM={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var t0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!t0.isDisabled&&t0.supportsFiber)try{Fe=t0.inject(QM),dt=t0}catch{}}return vg.createRoot=function(u,g){if(!s(u))throw Error(t(299));var C=!1,T="",L=Zm,$=Xm,me=Qm;return g!=null&&(g.unstable_strictMode===!0&&(C=!0),g.identifierPrefix!==void 0&&(T=g.identifierPrefix),g.onUncaughtError!==void 0&&(L=g.onUncaughtError),g.onCaughtError!==void 0&&($=g.onCaughtError),g.onRecoverableError!==void 0&&(me=g.onRecoverableError)),g=tk(u,1,!1,null,null,C,T,null,L,$,me,fk),u[ht]=g.current,Rw(u),new ej(g)},vg.hydrateRoot=function(u,g,C){if(!s(u))throw Error(t(299));var T=!1,L="",$=Zm,me=Xm,De=Qm,ut=null;return C!=null&&(C.unstable_strictMode===!0&&(T=!0),C.identifierPrefix!==void 0&&(L=C.identifierPrefix),C.onUncaughtError!==void 0&&($=C.onUncaughtError),C.onCaughtError!==void 0&&(me=C.onCaughtError),C.onRecoverableError!==void 0&&(De=C.onRecoverableError),C.formState!==void 0&&(ut=C.formState)),g=tk(u,1,!0,g,C??null,T,L,ut,$,me,De,fk),g.context=rk(null),C=g.current,T=$i(),T=ar(T),L=Bl(T),L.callback=null,ol(C,L,T),C=T,g.current.lanes=C,er(g,C),Ic(g),u[ht]=g.current,Rw(u),new e0(g)},vg.version="19.2.4",vg}var Ck;function lI(){if(Ck)return nj.exports;Ck=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(r){console.error(r)}}return a(),nj.exports=iI(),nj.exports}var cI=lI();let dI={data:""},uI=a=>{if(typeof window=="object"){let r=(a?a.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return r.nonce=window.__nonce__,r.parentNode||(a||document.head).appendChild(r),r.firstChild}return a||dI},fI=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,pI=/\/\*[^]*?\*\/|  +/g,Sk=/\n+/g,Pu=(a,r)=>{let e="",t="",s="";for(let o in a){let i=a[o];o[0]=="@"?o[1]=="i"?e=o+" "+i+";":t+=o[1]=="f"?Pu(i,o):o+"{"+Pu(i,o[1]=="k"?"":r)+"}":typeof i=="object"?t+=Pu(i,r?r.replace(/([^,])+/g,l=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):o):i!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Pu.p?Pu.p(o,i):o+":"+i+";")}return e+(r&&s?r+"{"+s+"}":s)+t},kd={},CT=a=>{if(typeof a=="object"){let r="";for(let e in a)r+=e+CT(a[e]);return r}return a},hI=(a,r,e,t,s)=>{let o=CT(a),i=kd[o]||(kd[o]=(c=>{let d=0,h=11;for(;d<c.length;)h=101*h+c.charCodeAt(d++)>>>0;return"go"+h})(o));if(!kd[i]){let c=o!==a?a:(d=>{let h,m,y=[{}];for(;h=fI.exec(d.replace(pI,""));)h[4]?y.shift():h[3]?(m=h[3].replace(Sk," ").trim(),y.unshift(y[0][m]=y[0][m]||{})):y[0][h[1]]=h[2].replace(Sk," ").trim();return y[0]})(a);kd[i]=Pu(s?{["@keyframes "+i]:c}:c,e?"":"."+i)}let l=e&&kd.g?kd.g:null;return e&&(kd.g=kd[i]),((c,d,h,m)=>{m?d.data=d.data.replace(m,c):d.data.indexOf(c)===-1&&(d.data=h?c+d.data:d.data+c)})(kd[i],r,t,l),i},mI=(a,r,e)=>a.reduce((t,s,o)=>{let i=r[o];if(i&&i.call){let l=i(e),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;i=c?"."+c:l&&typeof l=="object"?l.props?"":Pu(l,""):l===!1?"":l}return t+s+(i??"")},"");function vb(a){let r=this||{},e=a.call?a(r.p):a;return hI(e.unshift?e.raw?mI(e,[].slice.call(arguments,1),r.p):e.reduce((t,s)=>Object.assign(t,s&&s.call?s(r.p):s),{}):e,uI(r.target),r.g,r.o,r.k)}let ST,O1,P1;vb.bind({g:1});let Fd=vb.bind({k:1});function gI(a,r,e,t){Pu.p=r,ST=a,O1=e,P1=t}function Wu(a,r){let e=this||{};return function(){let t=arguments;function s(o,i){let l=Object.assign({},o),c=l.className||s.className;e.p=Object.assign({theme:O1&&O1()},l),e.o=/ *go\d+/.test(c),l.className=vb.apply(e,t)+(c?" "+c:"");let d=a;return a[0]&&(d=l.as||a,delete l.as),P1&&d[0]&&P1(l),ST(d,l)}return s}}var yI=a=>typeof a=="function",Z0=(a,r)=>yI(a)?a(r):a,xI=(()=>{let a=0;return()=>(++a).toString()})(),NT=(()=>{let a;return()=>{if(a===void 0&&typeof window<"u"){let r=matchMedia("(prefers-reduced-motion: reduce)");a=!r||r.matches}return a}})(),vI=20,aS="default",kT=(a,r)=>{let{toastLimit:e}=a.settings;switch(r.type){case 0:return{...a,toasts:[r.toast,...a.toasts].slice(0,e)};case 1:return{...a,toasts:a.toasts.map(i=>i.id===r.toast.id?{...i,...r.toast}:i)};case 2:let{toast:t}=r;return kT(a,{type:a.toasts.find(i=>i.id===t.id)?1:0,toast:t});case 3:let{toastId:s}=r;return{...a,toasts:a.toasts.map(i=>i.id===s||s===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return r.toastId===void 0?{...a,toasts:[]}:{...a,toasts:a.toasts.filter(i=>i.id!==r.toastId)};case 5:return{...a,pausedAt:r.time};case 6:let o=r.time-(a.pausedAt||0);return{...a,pausedAt:void 0,toasts:a.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+o}))}}},O0=[],_T={toasts:[],pausedAt:void 0,settings:{toastLimit:vI}},Gc={},ET=(a,r=aS)=>{Gc[r]=kT(Gc[r]||_T,a),O0.forEach(([e,t])=>{e===r&&t(Gc[r])})},TT=a=>Object.keys(Gc).forEach(r=>ET(a,r)),bI=a=>Object.keys(Gc).find(r=>Gc[r].toasts.some(e=>e.id===a)),bb=(a=aS)=>r=>{ET(r,a)},wI={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},jI=(a={},r=aS)=>{let[e,t]=f.useState(Gc[r]||_T),s=f.useRef(Gc[r]);f.useEffect(()=>(s.current!==Gc[r]&&t(Gc[r]),O0.push([r,t]),()=>{let i=O0.findIndex(([l])=>l===r);i>-1&&O0.splice(i,1)}),[r]);let o=e.toasts.map(i=>{var l,c,d;return{...a,...a[i.type],...i,removeDelay:i.removeDelay||((l=a[i.type])==null?void 0:l.removeDelay)||a?.removeDelay,duration:i.duration||((c=a[i.type])==null?void 0:c.duration)||a?.duration||wI[i.type],style:{...a.style,...(d=a[i.type])==null?void 0:d.style,...i.style}}});return{...e,toasts:o}},CI=(a,r="blank",e)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:r,ariaProps:{role:"status","aria-live":"polite"},message:a,pauseDuration:0,...e,id:e?.id||xI()}),Ty=a=>(r,e)=>{let t=CI(r,a,e);return bb(t.toasterId||bI(t.id))({type:2,toast:t}),t.id},ra=(a,r)=>Ty("blank")(a,r);ra.error=Ty("error");ra.success=Ty("success");ra.loading=Ty("loading");ra.custom=Ty("custom");ra.dismiss=(a,r)=>{let e={type:3,toastId:a};r?bb(r)(e):TT(e)};ra.dismissAll=a=>ra.dismiss(void 0,a);ra.remove=(a,r)=>{let e={type:4,toastId:a};r?bb(r)(e):TT(e)};ra.removeAll=a=>ra.remove(void 0,a);ra.promise=(a,r,e)=>{let t=ra.loading(r.loading,{...e,...e?.loading});return typeof a=="function"&&(a=a()),a.then(s=>{let o=r.success?Z0(r.success,s):void 0;return o?ra.success(o,{id:t,...e,...e?.success}):ra.dismiss(t),s}).catch(s=>{let o=r.error?Z0(r.error,s):void 0;o?ra.error(o,{id:t,...e,...e?.error}):ra.dismiss(t)}),a};var SI=1e3,NI=(a,r="default")=>{let{toasts:e,pausedAt:t}=jI(a,r),s=f.useRef(new Map).current,o=f.useCallback((m,y=SI)=>{if(s.has(m))return;let x=setTimeout(()=>{s.delete(m),i({type:4,toastId:m})},y);s.set(m,x)},[]);f.useEffect(()=>{if(t)return;let m=Date.now(),y=e.map(x=>{if(x.duration===1/0)return;let b=(x.duration||0)+x.pauseDuration-(m-x.createdAt);if(b<0){x.visible&&ra.dismiss(x.id);return}return setTimeout(()=>ra.dismiss(x.id,r),b)});return()=>{y.forEach(x=>x&&clearTimeout(x))}},[e,t,r]);let i=f.useCallback(bb(r),[r]),l=f.useCallback(()=>{i({type:5,time:Date.now()})},[i]),c=f.useCallback((m,y)=>{i({type:1,toast:{id:m,height:y}})},[i]),d=f.useCallback(()=>{t&&i({type:6,time:Date.now()})},[t,i]),h=f.useCallback((m,y)=>{let{reverseOrder:x=!1,gutter:b=8,defaultPosition:v}=y||{},j=e.filter(N=>(N.position||v)===(m.position||v)&&N.height),S=j.findIndex(N=>N.id===m.id),k=j.filter((N,P)=>P<S&&N.visible).length;return j.filter(N=>N.visible).slice(...x?[k+1]:[0,k]).reduce((N,P)=>N+(P.height||0)+b,0)},[e]);return f.useEffect(()=>{e.forEach(m=>{if(m.dismissed)o(m.id,m.removeDelay);else{let y=s.get(m.id);y&&(clearTimeout(y),s.delete(m.id))}})},[e,o]),{toasts:e,handlers:{updateHeight:c,startPause:l,endPause:d,calculateOffset:h}}},kI=Fd`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,_I=Fd`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,EI=Fd`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,TI=Wu("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${a=>a.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${kI} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${_I} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${a=>a.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${EI} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,OI=Fd`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,PI=Wu("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${a=>a.secondary||"#e0e0e0"};
  border-right-color: ${a=>a.primary||"#616161"};
  animation: ${OI} 1s linear infinite;
`,AI=Fd`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,MI=Fd`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,II=Wu("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${a=>a.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${AI} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${MI} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${a=>a.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,RI=Wu("div")`
  position: absolute;
`,LI=Wu("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,DI=Fd`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,FI=Wu("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${DI} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,BI=({toast:a})=>{let{icon:r,type:e,iconTheme:t}=a;return r!==void 0?typeof r=="string"?f.createElement(FI,null,r):r:e==="blank"?null:f.createElement(LI,null,f.createElement(PI,{...t}),e!=="loading"&&f.createElement(RI,null,e==="error"?f.createElement(TI,{...t}):f.createElement(II,{...t})))},zI=a=>`
0% {transform: translate3d(0,${a*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,UI=a=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${a*-150}%,-1px) scale(.6); opacity:0;}
`,$I="0%{opacity:0;} 100%{opacity:1;}",VI="0%{opacity:1;} 100%{opacity:0;}",WI=Wu("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,HI=Wu("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,qI=(a,r)=>{let e=a.includes("top")?1:-1,[t,s]=NT()?[$I,VI]:[zI(e),UI(e)];return{animation:r?`${Fd(t)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Fd(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},GI=f.memo(({toast:a,position:r,style:e,children:t})=>{let s=a.height?qI(a.position||r||"top-center",a.visible):{opacity:0},o=f.createElement(BI,{toast:a}),i=f.createElement(HI,{...a.ariaProps},Z0(a.message,a));return f.createElement(WI,{className:a.className,style:{...s,...e,...a.style}},typeof t=="function"?t({icon:o,message:i}):f.createElement(f.Fragment,null,o,i))});gI(f.createElement);var KI=({id:a,className:r,style:e,onHeightUpdate:t,children:s})=>{let o=f.useCallback(i=>{if(i){let l=()=>{let c=i.getBoundingClientRect().height;t(a,c)};l(),new MutationObserver(l).observe(i,{subtree:!0,childList:!0,characterData:!0})}},[a,t]);return f.createElement("div",{ref:o,className:r,style:e},s)},YI=(a,r)=>{let e=a.includes("top"),t=e?{top:0}:{bottom:0},s=a.includes("center")?{justifyContent:"center"}:a.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:NT()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${r*(e?1:-1)}px)`,...t,...s}},ZI=vb`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,n0=16,XI=({reverseOrder:a,position:r="top-center",toastOptions:e,gutter:t,children:s,toasterId:o,containerStyle:i,containerClassName:l})=>{let{toasts:c,handlers:d}=NI(e,o);return f.createElement("div",{"data-rht-toaster":o||"",style:{position:"fixed",zIndex:9999,top:n0,left:n0,right:n0,bottom:n0,pointerEvents:"none",...i},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(h=>{let m=h.position||r,y=d.calculateOffset(h,{reverseOrder:a,gutter:t,defaultPosition:r}),x=YI(m,y);return f.createElement(KI,{id:h.id,key:h.id,onHeightUpdate:d.updateHeight,className:h.visible?ZI:"",style:x},h.type==="custom"?Z0(h.message,h):s?s(h):f.createElement(GI,{toast:h,position:m}))}))},yr=ra;var Nk="popstate";function QI(a={}){function r(t,s){let{pathname:o,search:i,hash:l}=t.location;return A1("",{pathname:o,search:i,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function e(t,s){return typeof s=="string"?s:fy(s)}return eR(r,e,null,a)}function As(a,r){if(a===!1||a===null||typeof a>"u")throw new Error(r)}function nc(a,r){if(!a){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function JI(){return Math.random().toString(36).substring(2,10)}function kk(a,r){return{usr:a.state,key:a.key,idx:r}}function A1(a,r,e=null,t){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof r=="string"?rm(r):r,state:e,key:r&&r.key||t||JI()}}function fy({pathname:a="/",search:r="",hash:e=""}){return r&&r!=="?"&&(a+=r.charAt(0)==="?"?r:"?"+r),e&&e!=="#"&&(a+=e.charAt(0)==="#"?e:"#"+e),a}function rm(a){let r={};if(a){let e=a.indexOf("#");e>=0&&(r.hash=a.substring(e),a=a.substring(0,e));let t=a.indexOf("?");t>=0&&(r.search=a.substring(t),a=a.substring(0,t)),a&&(r.pathname=a)}return r}function eR(a,r,e,t={}){let{window:s=document.defaultView,v5Compat:o=!1}=t,i=s.history,l="POP",c=null,d=h();d==null&&(d=0,i.replaceState({...i.state,idx:d},""));function h(){return(i.state||{idx:null}).idx}function m(){l="POP";let j=h(),S=j==null?null:j-d;d=j,c&&c({action:l,location:v.location,delta:S})}function y(j,S){l="PUSH";let k=A1(v.location,j,S);d=h()+1;let N=kk(k,d),P=v.createHref(k);try{i.pushState(N,"",P)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;s.location.assign(P)}o&&c&&c({action:l,location:v.location,delta:1})}function x(j,S){l="REPLACE";let k=A1(v.location,j,S);d=h();let N=kk(k,d),P=v.createHref(k);i.replaceState(N,"",P),o&&c&&c({action:l,location:v.location,delta:0})}function b(j){return tR(j)}let v={get action(){return l},get location(){return a(s,i)},listen(j){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Nk,m),c=j,()=>{s.removeEventListener(Nk,m),c=null}},createHref(j){return r(s,j)},createURL:b,encodeLocation(j){let S=b(j);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:y,replace:x,go(j){return i.go(j)}};return v}function tR(a,r=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),As(e,"No window.location.(origin|href) available to create URL");let t=typeof a=="string"?a:fy(a);return t=t.replace(/ $/,"%20"),!r&&t.startsWith("//")&&(t=e+t),new URL(t,e)}function OT(a,r,e="/"){return rR(a,r,e,!1)}function rR(a,r,e,t){let s=typeof r=="string"?rm(r):r,o=Bd(s.pathname||"/",e);if(o==null)return null;let i=PT(a);nR(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let d=hR(o);l=fR(i[c],d,t)}return l}function PT(a,r=[],e=[],t="",s=!1){let o=(i,l,c=s,d)=>{let h={relativePath:d===void 0?i.path||"":d,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(t)&&c)return;As(h.relativePath.startsWith(t),`Absolute route path "${h.relativePath}" nested under path "${t}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(t.length)}let m=Id([t,h.relativePath]),y=e.concat(h);i.children&&i.children.length>0&&(As(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),PT(i.children,r,y,m,c)),!(i.path==null&&!i.index)&&r.push({path:m,score:dR(m,i.index),routesMeta:y})};return a.forEach((i,l)=>{if(i.path===""||!i.path?.includes("?"))o(i,l);else for(let c of AT(i.path))o(i,l,!0,c)}),r}function AT(a){let r=a.split("/");if(r.length===0)return[];let[e,...t]=r,s=e.endsWith("?"),o=e.replace(/\?$/,"");if(t.length===0)return s?[o,""]:[o];let i=AT(t.join("/")),l=[];return l.push(...i.map(c=>c===""?o:[o,c].join("/"))),s&&l.push(...i),l.map(c=>a.startsWith("/")&&c===""?"/":c)}function nR(a){a.sort((r,e)=>r.score!==e.score?e.score-r.score:uR(r.routesMeta.map(t=>t.childrenIndex),e.routesMeta.map(t=>t.childrenIndex)))}var aR=/^:[\w-]+$/,sR=3,oR=2,iR=1,lR=10,cR=-2,_k=a=>a==="*";function dR(a,r){let e=a.split("/"),t=e.length;return e.some(_k)&&(t+=cR),r&&(t+=oR),e.filter(s=>!_k(s)).reduce((s,o)=>s+(aR.test(o)?sR:o===""?iR:lR),t)}function uR(a,r){return a.length===r.length&&a.slice(0,-1).every((t,s)=>t===r[s])?a[a.length-1]-r[r.length-1]:0}function fR(a,r,e=!1){let{routesMeta:t}=a,s={},o="/",i=[];for(let l=0;l<t.length;++l){let c=t[l],d=l===t.length-1,h=o==="/"?r:r.slice(o.length)||"/",m=X0({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),y=c.route;if(!m&&d&&e&&!t[t.length-1].route.index&&(m=X0({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!m)return null;Object.assign(s,m.params),i.push({params:s,pathname:Id([o,m.pathname]),pathnameBase:xR(Id([o,m.pathnameBase])),route:y}),m.pathnameBase!=="/"&&(o=Id([o,m.pathnameBase]))}return i}function X0(a,r){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[e,t]=pR(a.path,a.caseSensitive,a.end),s=r.match(e);if(!s)return null;let o=s[0],i=o.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:t.reduce((d,{paramName:h,isOptional:m},y)=>{if(h==="*"){let b=l[y]||"";i=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const x=l[y];return m&&!x?d[h]=void 0:d[h]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:i,pattern:a}}function pR(a,r=!1,e=!0){nc(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let t=[],s="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(t.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return a.endsWith("*")?(t.push({paramName:"*"}),s+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?s+="\\/*$":a!==""&&a!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,r?void 0:"i"),t]}function hR(a){try{return a.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return nc(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),a}}function Bd(a,r){if(r==="/")return a;if(!a.toLowerCase().startsWith(r.toLowerCase()))return null;let e=r.endsWith("/")?r.length-1:r.length,t=a.charAt(e);return t&&t!=="/"?null:a.slice(e)||"/"}var mR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function gR(a,r="/"){let{pathname:e,search:t="",hash:s=""}=typeof a=="string"?rm(a):a,o;return e?(e=e.replace(/\/\/+/g,"/"),e.startsWith("/")?o=Ek(e.substring(1),"/"):o=Ek(e,r)):o=r,{pathname:o,search:vR(t),hash:bR(s)}}function Ek(a,r){let e=r.replace(/\/+$/,"").split("/");return a.split("/").forEach(s=>{s===".."?e.length>1&&e.pop():s!=="."&&e.push(s)}),e.length>1?e.join("/"):"/"}function ij(a,r,e,t){return`Cannot include a '${a}' character in a manually specified \`to.${r}\` field [${JSON.stringify(t)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function yR(a){return a.filter((r,e)=>e===0||r.route.path&&r.route.path.length>0)}function MT(a){let r=yR(a);return r.map((e,t)=>t===r.length-1?e.pathname:e.pathnameBase)}function IT(a,r,e,t=!1){let s;typeof a=="string"?s=rm(a):(s={...a},As(!s.pathname||!s.pathname.includes("?"),ij("?","pathname","search",s)),As(!s.pathname||!s.pathname.includes("#"),ij("#","pathname","hash",s)),As(!s.search||!s.search.includes("#"),ij("#","search","hash",s)));let o=a===""||s.pathname==="",i=o?"/":s.pathname,l;if(i==null)l=e;else{let m=r.length-1;if(!t&&i.startsWith("..")){let y=i.split("/");for(;y[0]==="..";)y.shift(),m-=1;s.pathname=y.join("/")}l=m>=0?r[m]:"/"}let c=gR(s,l),d=i&&i!=="/"&&i.endsWith("/"),h=(o||i===".")&&e.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}var Id=a=>a.join("/").replace(/\/\/+/g,"/"),xR=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),vR=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,bR=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a,wR=class{constructor(a,r,e,t=!1){this.status=a,this.statusText=r||"",this.internal=t,e instanceof Error?(this.data=e.toString(),this.error=e):this.data=e}};function jR(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}function CR(a){return a.map(r=>r.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var RT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function LT(a,r){let e=a;if(typeof e!="string"||!mR.test(e))return{absoluteURL:void 0,isExternal:!1,to:e};let t=e,s=!1;if(RT)try{let o=new URL(window.location.href),i=e.startsWith("//")?new URL(o.protocol+e):new URL(e),l=Bd(i.pathname,r);i.origin===o.origin&&l!=null?e=l+i.search+i.hash:s=!0}catch{nc(!1,`<Link to="${e}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:t,isExternal:s,to:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var DT=["POST","PUT","PATCH","DELETE"];new Set(DT);var SR=["GET",...DT];new Set(SR);var nm=f.createContext(null);nm.displayName="DataRouter";var wb=f.createContext(null);wb.displayName="DataRouterState";var NR=f.createContext(!1),FT=f.createContext({isTransitioning:!1});FT.displayName="ViewTransition";var kR=f.createContext(new Map);kR.displayName="Fetchers";var _R=f.createContext(null);_R.displayName="Await";var _l=f.createContext(null);_l.displayName="Navigation";var Oy=f.createContext(null);Oy.displayName="Location";var lc=f.createContext({outlet:null,matches:[],isDataRoute:!1});lc.displayName="Route";var sS=f.createContext(null);sS.displayName="RouteError";var BT="REACT_ROUTER_ERROR",ER="REDIRECT",TR="ROUTE_ERROR_RESPONSE";function OR(a){if(a.startsWith(`${BT}:${ER}:{`))try{let r=JSON.parse(a.slice(28));if(typeof r=="object"&&r&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.location=="string"&&typeof r.reloadDocument=="boolean"&&typeof r.replace=="boolean")return r}catch{}}function PR(a){if(a.startsWith(`${BT}:${TR}:{`))try{let r=JSON.parse(a.slice(40));if(typeof r=="object"&&r&&typeof r.status=="number"&&typeof r.statusText=="string")return new wR(r.status,r.statusText,r.data)}catch{}}function AR(a,{relative:r}={}){As(Py(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:t}=f.useContext(_l),{hash:s,pathname:o,search:i}=Ay(a,{relative:r}),l=o;return e!=="/"&&(l=o==="/"?e:Id([e,o])),t.createHref({pathname:l,search:i,hash:s})}function Py(){return f.useContext(Oy)!=null}function Pi(){return As(Py(),"useLocation() may be used only in the context of a <Router> component."),f.useContext(Oy).location}var zT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function UT(a){f.useContext(_l).static||f.useLayoutEffect(a)}function mr(){let{isDataRoute:a}=f.useContext(lc);return a?GR():MR()}function MR(){As(Py(),"useNavigate() may be used only in the context of a <Router> component.");let a=f.useContext(nm),{basename:r,navigator:e}=f.useContext(_l),{matches:t}=f.useContext(lc),{pathname:s}=Pi(),o=JSON.stringify(MT(t)),i=f.useRef(!1);return UT(()=>{i.current=!0}),f.useCallback((c,d={})=>{if(nc(i.current,zT),!i.current)return;if(typeof c=="number"){e.go(c);return}let h=IT(c,JSON.parse(o),s,d.relative==="path");a==null&&r!=="/"&&(h.pathname=h.pathname==="/"?r:Id([r,h.pathname])),(d.replace?e.replace:e.push)(h,d.state,d)},[r,e,o,s,a])}var IR=f.createContext(null);function RR(a){let r=f.useContext(lc).outlet;return f.useMemo(()=>r&&f.createElement(IR.Provider,{value:a},r),[r,a])}function qa(){let{matches:a}=f.useContext(lc),r=a[a.length-1];return r?r.params:{}}function Ay(a,{relative:r}={}){let{matches:e}=f.useContext(lc),{pathname:t}=Pi(),s=JSON.stringify(MT(e));return f.useMemo(()=>IT(a,JSON.parse(s),t,r==="path"),[a,s,t,r])}function LR(a,r){return $T(a,r)}function $T(a,r,e,t,s){As(Py(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=f.useContext(_l),{matches:i}=f.useContext(lc),l=i[i.length-1],c=l?l.params:{},d=l?l.pathname:"/",h=l?l.pathnameBase:"/",m=l&&l.route;{let k=m&&m.path||"";WT(d,!m||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let y=Pi(),x;if(r){let k=typeof r=="string"?rm(r):r;As(h==="/"||k.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${k.pathname}" was given in the \`location\` prop.`),x=k}else x=y;let b=x.pathname||"/",v=b;if(h!=="/"){let k=h.replace(/^\//,"").split("/");v="/"+b.replace(/^\//,"").split("/").slice(k.length).join("/")}let j=OT(a,{pathname:v});nc(m||j!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),nc(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=UR(j&&j.map(k=>Object.assign({},k,{params:Object.assign({},c,k.params),pathname:Id([h,o.encodeLocation?o.encodeLocation(k.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?h:Id([h,o.encodeLocation?o.encodeLocation(k.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathnameBase])})),i,e,t,s);return r&&S?f.createElement(Oy.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},S):S}function DR(){let a=qR(),r=jR(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),e=a instanceof Error?a.stack:null,t="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:t},o={padding:"2px 4px",backgroundColor:t},i=null;return console.error("Error handled by React Router default ErrorBoundary:",a),i=f.createElement(f.Fragment,null,f.createElement("p",null," Hey developer "),f.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",f.createElement("code",{style:o},"ErrorBoundary")," or"," ",f.createElement("code",{style:o},"errorElement")," prop on your route.")),f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},r),e?f.createElement("pre",{style:s},e):null,i)}var FR=f.createElement(DR,null),VT=class extends f.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,r){return r.location!==a.location||r.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:r.error,location:r.location,revalidation:a.revalidation||r.revalidation}}componentDidCatch(a,r){this.props.onError?this.props.onError(a,r):console.error("React Router caught the following error during render",a)}render(){let a=this.state.error;if(this.context&&typeof a=="object"&&a&&"digest"in a&&typeof a.digest=="string"){const e=PR(a.digest);e&&(a=e)}let r=a!==void 0?f.createElement(lc.Provider,{value:this.props.routeContext},f.createElement(sS.Provider,{value:a,children:this.props.component})):this.props.children;return this.context?f.createElement(BR,{error:a},r):r}};VT.contextType=NR;var lj=new WeakMap;function BR({children:a,error:r}){let{basename:e}=f.useContext(_l);if(typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){let t=OR(r.digest);if(t){let s=lj.get(r);if(s)throw s;let o=LT(t.location,e);if(RT&&!lj.get(r))if(o.isExternal||t.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const i=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:t.replace}));throw lj.set(r,i),i}return f.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return a}function zR({routeContext:a,match:r,children:e}){let t=f.useContext(nm);return t&&t.static&&t.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(t.staticContext._deepestRenderedBoundaryId=r.route.id),f.createElement(lc.Provider,{value:a},e)}function UR(a,r=[],e=null,t=null,s=null){if(a==null){if(!e)return null;if(e.errors)a=e.matches;else if(r.length===0&&!e.initialized&&e.matches.length>0)a=e.matches;else return null}let o=a,i=e?.errors;if(i!=null){let h=o.findIndex(m=>m.route.id&&i?.[m.route.id]!==void 0);As(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(e)for(let h=0;h<o.length;h++){let m=o[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(c=h),m.route.id){let{loaderData:y,errors:x}=e,b=m.route.loader&&!y.hasOwnProperty(m.route.id)&&(!x||x[m.route.id]===void 0);if(m.route.lazy||b){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}let d=e&&t?(h,m)=>{t(h,{location:e.location,params:e.matches?.[0]?.params??{},unstable_pattern:CR(e.matches),errorInfo:m})}:void 0;return o.reduceRight((h,m,y)=>{let x,b=!1,v=null,j=null;e&&(x=i&&m.route.id?i[m.route.id]:void 0,v=m.route.errorElement||FR,l&&(c<0&&y===0?(WT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,j=null):c===y&&(b=!0,j=m.route.hydrateFallbackElement||null)));let S=r.concat(o.slice(0,y+1)),k=()=>{let N;return x?N=v:b?N=j:m.route.Component?N=f.createElement(m.route.Component,null):m.route.element?N=m.route.element:N=h,f.createElement(zR,{match:m,routeContext:{outlet:h,matches:S,isDataRoute:e!=null},children:N})};return e&&(m.route.ErrorBoundary||m.route.errorElement||y===0)?f.createElement(VT,{location:e.location,revalidation:e.revalidation,component:v,error:x,children:k(),routeContext:{outlet:null,matches:S,isDataRoute:!0},onError:d}):k()},null)}function oS(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $R(a){let r=f.useContext(nm);return As(r,oS(a)),r}function VR(a){let r=f.useContext(wb);return As(r,oS(a)),r}function WR(a){let r=f.useContext(lc);return As(r,oS(a)),r}function iS(a){let r=WR(a),e=r.matches[r.matches.length-1];return As(e.route.id,`${a} can only be used on routes that contain a unique "id"`),e.route.id}function HR(){return iS("useRouteId")}function qR(){let a=f.useContext(sS),r=VR("useRouteError"),e=iS("useRouteError");return a!==void 0?a:r.errors?.[e]}function GR(){let{router:a}=$R("useNavigate"),r=iS("useNavigate"),e=f.useRef(!1);return UT(()=>{e.current=!0}),f.useCallback(async(s,o={})=>{nc(e.current,zT),e.current&&(typeof s=="number"?await a.navigate(s):await a.navigate(s,{fromRouteId:r,...o}))},[a,r])}var Tk={};function WT(a,r,e){!r&&!Tk[a]&&(Tk[a]=!0,nc(!1,e))}f.memo(KR);function KR({routes:a,future:r,state:e,onError:t}){return $T(a,void 0,e,t,r)}function YR(a){return RR(a.context)}function fr(a){As(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ZR({basename:a="/",children:r=null,location:e,navigationType:t="POP",navigator:s,static:o=!1,unstable_useTransitions:i}){As(!Py(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=a.replace(/^\/*/,"/"),c=f.useMemo(()=>({basename:l,navigator:s,static:o,unstable_useTransitions:i,future:{}}),[l,s,o,i]);typeof e=="string"&&(e=rm(e));let{pathname:d="/",search:h="",hash:m="",state:y=null,key:x="default"}=e,b=f.useMemo(()=>{let v=Bd(d,l);return v==null?null:{location:{pathname:v,search:h,hash:m,state:y,key:x},navigationType:t}},[l,d,h,m,y,x,t]);return nc(b!=null,`<Router basename="${l}"> is not able to match the URL "${d}${h}${m}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:f.createElement(_l.Provider,{value:c},f.createElement(Oy.Provider,{children:r,value:b}))}function HT({children:a,location:r}){return LR(M1(a),r)}function M1(a,r=[]){let e=[];return f.Children.forEach(a,(t,s)=>{if(!f.isValidElement(t))return;let o=[...r,s];if(t.type===f.Fragment){e.push.apply(e,M1(t.props.children,o));return}As(t.type===fr,`[${typeof t.type=="string"?t.type:t.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),As(!t.props.index||!t.props.children,"An index route cannot have child routes.");let i={id:t.props.id||o.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,middleware:t.props.middleware,loader:t.props.loader,action:t.props.action,hydrateFallbackElement:t.props.hydrateFallbackElement,HydrateFallback:t.props.HydrateFallback,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:t.props.hasErrorBoundary===!0||t.props.ErrorBoundary!=null||t.props.errorElement!=null,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(i.children=M1(t.props.children,o)),e.push(i)}),e}var P0="get",A0="application/x-www-form-urlencoded";function jb(a){return typeof HTMLElement<"u"&&a instanceof HTMLElement}function XR(a){return jb(a)&&a.tagName.toLowerCase()==="button"}function QR(a){return jb(a)&&a.tagName.toLowerCase()==="form"}function JR(a){return jb(a)&&a.tagName.toLowerCase()==="input"}function eL(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function tL(a,r){return a.button===0&&(!r||r==="_self")&&!eL(a)}function I1(a=""){return new URLSearchParams(typeof a=="string"||Array.isArray(a)||a instanceof URLSearchParams?a:Object.keys(a).reduce((r,e)=>{let t=a[e];return r.concat(Array.isArray(t)?t.map(s=>[e,s]):[[e,t]])},[]))}function rL(a,r){let e=I1(a);return r&&r.forEach((t,s)=>{e.has(s)||r.getAll(s).forEach(o=>{e.append(s,o)})}),e}var a0=null;function nL(){if(a0===null)try{new FormData(document.createElement("form"),0),a0=!1}catch{a0=!0}return a0}var aL=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function cj(a){return a!=null&&!aL.has(a)?(nc(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${A0}"`),null):a}function sL(a,r){let e,t,s,o,i;if(QR(a)){let l=a.getAttribute("action");t=l?Bd(l,r):null,e=a.getAttribute("method")||P0,s=cj(a.getAttribute("enctype"))||A0,o=new FormData(a)}else if(XR(a)||JR(a)&&(a.type==="submit"||a.type==="image")){let l=a.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=a.getAttribute("formaction")||l.getAttribute("action");if(t=c?Bd(c,r):null,e=a.getAttribute("formmethod")||l.getAttribute("method")||P0,s=cj(a.getAttribute("formenctype"))||cj(l.getAttribute("enctype"))||A0,o=new FormData(l,a),!nL()){let{name:d,type:h,value:m}=a;if(h==="image"){let y=d?`${d}.`:"";o.append(`${y}x`,"0"),o.append(`${y}y`,"0")}else d&&o.append(d,m)}}else{if(jb(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=P0,t=null,s=A0,i=a}return o&&s==="text/plain"&&(i=o,o=void 0),{action:t,method:e.toLowerCase(),encType:s,formData:o,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function lS(a,r){if(a===!1||a===null||typeof a>"u")throw new Error(r)}function oL(a,r,e,t){let s=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return e?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${t}`:s.pathname=`${s.pathname}.${t}`:s.pathname==="/"?s.pathname=`_root.${t}`:r&&Bd(s.pathname,r)==="/"?s.pathname=`${r.replace(/\/$/,"")}/_root.${t}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${t}`,s}async function iL(a,r){if(a.id in r)return r[a.id];try{let e=await import(a.module);return r[a.id]=e,e}catch(e){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function lL(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function cL(a,r,e){let t=await Promise.all(a.map(async s=>{let o=r.routes[s.route.id];if(o){let i=await iL(o,e);return i.links?i.links():[]}return[]}));return pL(t.flat(1).filter(lL).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Ok(a,r,e,t,s,o){let i=(c,d)=>e[d]?c.route.id!==e[d].route.id:!0,l=(c,d)=>e[d].pathname!==c.pathname||e[d].route.path?.endsWith("*")&&e[d].params["*"]!==c.params["*"];return o==="assets"?r.filter((c,d)=>i(c,d)||l(c,d)):o==="data"?r.filter((c,d)=>{let h=t.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(i(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let m=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(a,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function dL(a,r,{includeHydrateFallback:e}={}){return uL(a.map(t=>{let s=r.routes[t.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),e&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function uL(a){return[...new Set(a)]}function fL(a){let r={},e=Object.keys(a).sort();for(let t of e)r[t]=a[t];return r}function pL(a,r){let e=new Set;return new Set(r),a.reduce((t,s)=>{let o=JSON.stringify(fL(s));return e.has(o)||(e.add(o),t.push({key:o,link:s})),t},[])}function qT(){let a=f.useContext(nm);return lS(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function hL(){let a=f.useContext(wb);return lS(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var cS=f.createContext(void 0);cS.displayName="FrameworkContext";function GT(){let a=f.useContext(cS);return lS(a,"You must render this element inside a <HydratedRouter> element"),a}function mL(a,r){let e=f.useContext(cS),[t,s]=f.useState(!1),[o,i]=f.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:h,onTouchStart:m}=r,y=f.useRef(null);f.useEffect(()=>{if(a==="render"&&i(!0),a==="viewport"){let v=S=>{S.forEach(k=>{i(k.isIntersecting)})},j=new IntersectionObserver(v,{threshold:.5});return y.current&&j.observe(y.current),()=>{j.disconnect()}}},[a]),f.useEffect(()=>{if(t){let v=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(v)}}},[t]);let x=()=>{s(!0)},b=()=>{s(!1),i(!1)};return e?a!=="intent"?[o,y,{}]:[o,y,{onFocus:bg(l,x),onBlur:bg(c,b),onMouseEnter:bg(d,x),onMouseLeave:bg(h,b),onTouchStart:bg(m,x)}]:[!1,y,{}]}function bg(a,r){return e=>{a&&a(e),e.defaultPrevented||r(e)}}function gL({page:a,...r}){let{router:e}=qT(),t=f.useMemo(()=>OT(e.routes,a,e.basename),[e.routes,a,e.basename]);return t?f.createElement(xL,{page:a,matches:t,...r}):null}function yL(a){let{manifest:r,routeModules:e}=GT(),[t,s]=f.useState([]);return f.useEffect(()=>{let o=!1;return cL(a,r,e).then(i=>{o||s(i)}),()=>{o=!0}},[a,r,e]),t}function xL({page:a,matches:r,...e}){let t=Pi(),{future:s,manifest:o,routeModules:i}=GT(),{basename:l}=qT(),{loaderData:c,matches:d}=hL(),h=f.useMemo(()=>Ok(a,r,d,o,t,"data"),[a,r,d,o,t]),m=f.useMemo(()=>Ok(a,r,d,o,t,"assets"),[a,r,d,o,t]),y=f.useMemo(()=>{if(a===t.pathname+t.search+t.hash)return[];let v=new Set,j=!1;if(r.forEach(k=>{let N=o.routes[k.route.id];!N||!N.hasLoader||(!h.some(P=>P.route.id===k.route.id)&&k.route.id in c&&i[k.route.id]?.shouldRevalidate||N.hasClientLoader?j=!0:v.add(k.route.id))}),v.size===0)return[];let S=oL(a,l,s.unstable_trailingSlashAwareDataRequests,"data");return j&&v.size>0&&S.searchParams.set("_routes",r.filter(k=>v.has(k.route.id)).map(k=>k.route.id).join(",")),[S.pathname+S.search]},[l,s.unstable_trailingSlashAwareDataRequests,c,t,o,h,r,a,i]),x=f.useMemo(()=>dL(m,o),[m,o]),b=yL(m);return f.createElement(f.Fragment,null,y.map(v=>f.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...e})),x.map(v=>f.createElement("link",{key:v,rel:"modulepreload",href:v,...e})),b.map(({key:v,link:j})=>f.createElement("link",{key:v,nonce:e.nonce,...j,crossOrigin:j.crossOrigin??e.crossOrigin})))}function vL(...a){return r=>{a.forEach(e=>{typeof e=="function"?e(r):e!=null&&(e.current=r)})}}var bL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{bL&&(window.__reactRouterVersion="7.13.0")}catch{}function KT({basename:a,children:r,unstable_useTransitions:e,window:t}){let s=f.useRef();s.current==null&&(s.current=QI({window:t,v5Compat:!0}));let o=s.current,[i,l]=f.useState({action:o.action,location:o.location}),c=f.useCallback(d=>{e===!1?l(d):f.startTransition(()=>l(d))},[e]);return f.useLayoutEffect(()=>o.listen(c),[o,c]),f.createElement(ZR,{basename:a,children:r,location:i.location,navigationType:i.action,navigator:o,unstable_useTransitions:e})}var YT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Kc=f.forwardRef(function({onClick:r,discover:e="render",prefetch:t="none",relative:s,reloadDocument:o,replace:i,state:l,target:c,to:d,preventScrollReset:h,viewTransition:m,unstable_defaultShouldRevalidate:y,...x},b){let{basename:v,unstable_useTransitions:j}=f.useContext(_l),S=typeof d=="string"&&YT.test(d),k=LT(d,v);d=k.to;let N=AR(d,{relative:s}),[P,R,F]=mL(t,x),z=SL(d,{replace:i,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:m,unstable_defaultShouldRevalidate:y,unstable_useTransitions:j});function H(W){r&&r(W),W.defaultPrevented||z(W)}let V=f.createElement("a",{...x,...F,href:k.absoluteURL||N,onClick:k.isExternal||o?r:H,ref:vL(b,R),target:c,"data-discover":!S&&e==="render"?"true":void 0});return P&&!S?f.createElement(f.Fragment,null,V,f.createElement(gL,{page:N})):V});Kc.displayName="Link";var wL=f.forwardRef(function({"aria-current":r="page",caseSensitive:e=!1,className:t="",end:s=!1,style:o,to:i,viewTransition:l,children:c,...d},h){let m=Ay(i,{relative:d.relative}),y=Pi(),x=f.useContext(wb),{navigator:b,basename:v}=f.useContext(_l),j=x!=null&&TL(m)&&l===!0,S=b.encodeLocation?b.encodeLocation(m).pathname:m.pathname,k=y.pathname,N=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;e||(k=k.toLowerCase(),N=N?N.toLowerCase():null,S=S.toLowerCase()),N&&v&&(N=Bd(N,v)||N);const P=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let R=k===S||!s&&k.startsWith(S)&&k.charAt(P)==="/",F=N!=null&&(N===S||!s&&N.startsWith(S)&&N.charAt(S.length)==="/"),z={isActive:R,isPending:F,isTransitioning:j},H=R?r:void 0,V;typeof t=="function"?V=t(z):V=[t,R?"active":null,F?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let W=typeof o=="function"?o(z):o;return f.createElement(Kc,{...d,"aria-current":H,className:V,ref:h,style:W,to:i,viewTransition:l},typeof c=="function"?c(z):c)});wL.displayName="NavLink";var jL=f.forwardRef(({discover:a="render",fetcherKey:r,navigate:e,reloadDocument:t,replace:s,state:o,method:i=P0,action:l,onSubmit:c,relative:d,preventScrollReset:h,viewTransition:m,unstable_defaultShouldRevalidate:y,...x},b)=>{let{unstable_useTransitions:v}=f.useContext(_l),j=_L(),S=EL(l,{relative:d}),k=i.toLowerCase()==="get"?"get":"post",N=typeof l=="string"&&YT.test(l),P=R=>{if(c&&c(R),R.defaultPrevented)return;R.preventDefault();let F=R.nativeEvent.submitter,z=F?.getAttribute("formmethod")||i,H=()=>j(F||R.currentTarget,{fetcherKey:r,method:z,navigate:e,replace:s,state:o,relative:d,preventScrollReset:h,viewTransition:m,unstable_defaultShouldRevalidate:y});v&&e!==!1?f.startTransition(()=>H()):H()};return f.createElement("form",{ref:b,method:k,action:S,onSubmit:t?c:P,...x,"data-discover":!N&&a==="render"?"true":void 0})});jL.displayName="Form";function CL(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ZT(a){let r=f.useContext(nm);return As(r,CL(a)),r}function SL(a,{target:r,replace:e,state:t,preventScrollReset:s,relative:o,viewTransition:i,unstable_defaultShouldRevalidate:l,unstable_useTransitions:c}={}){let d=mr(),h=Pi(),m=Ay(a,{relative:o});return f.useCallback(y=>{if(tL(y,r)){y.preventDefault();let x=e!==void 0?e:fy(h)===fy(m),b=()=>d(a,{replace:x,state:t,preventScrollReset:s,relative:o,viewTransition:i,unstable_defaultShouldRevalidate:l});c?f.startTransition(()=>b()):b()}},[h,d,m,e,t,r,a,s,o,i,l,c])}function dS(a){nc(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let r=f.useRef(I1(a)),e=f.useRef(!1),t=Pi(),s=f.useMemo(()=>rL(t.search,e.current?null:r.current),[t.search]),o=mr(),i=f.useCallback((l,c)=>{const d=I1(typeof l=="function"?l(new URLSearchParams(s)):l);e.current=!0,o("?"+d,c)},[o,s]);return[s,i]}var NL=0,kL=()=>`__${String(++NL)}__`;function _L(){let{router:a}=ZT("useSubmit"),{basename:r}=f.useContext(_l),e=HR(),t=a.fetch,s=a.navigate;return f.useCallback(async(o,i={})=>{let{action:l,method:c,encType:d,formData:h,body:m}=sL(o,r);if(i.navigate===!1){let y=i.fetcherKey||kL();await t(y,e,i.action||l,{unstable_defaultShouldRevalidate:i.unstable_defaultShouldRevalidate,preventScrollReset:i.preventScrollReset,formData:h,body:m,formMethod:i.method||c,formEncType:i.encType||d,flushSync:i.flushSync})}else await s(i.action||l,{unstable_defaultShouldRevalidate:i.unstable_defaultShouldRevalidate,preventScrollReset:i.preventScrollReset,formData:h,body:m,formMethod:i.method||c,formEncType:i.encType||d,replace:i.replace,state:i.state,fromRouteId:e,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,s,r,e])}function EL(a,{relative:r}={}){let{basename:e}=f.useContext(_l),t=f.useContext(lc);As(t,"useFormAction must be used inside a RouteContext");let[s]=t.matches.slice(-1),o={...Ay(a||".",{relative:r})},i=Pi();if(a==null){o.search=i.search;let l=new URLSearchParams(o.search),c=l.getAll("index");if(c.some(h=>h==="")){l.delete("index"),c.filter(m=>m).forEach(m=>l.append("index",m));let h=l.toString();o.search=h?`?${h}`:""}}return(!a||a===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(o.pathname=o.pathname==="/"?e:Id([e,o.pathname])),fy(o)}function TL(a,{relative:r}={}){let e=f.useContext(FT);As(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:t}=ZT("useViewTransitionState"),s=Ay(a,{relative:r});if(!e.isTransitioning)return!1;let o=Bd(e.currentLocation.pathname,t)||e.currentLocation.pathname,i=Bd(e.nextLocation.pathname,t)||e.nextLocation.pathname;return X0(s.pathname,i)!=null||X0(s.pathname,o)!=null}var Cb=jT();const s0=rS(Cb);function OL({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const PL=f.forwardRef(OL);function AL({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"}))}const Mh=f.forwardRef(AL);function ML({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const Hn=f.forwardRef(ML);function IL({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const Hu=f.forwardRef(IL);function RL({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const LL=f.forwardRef(RL);function DL({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const R1=f.forwardRef(DL);function FL({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"}))}const uS=f.forwardRef(FL);function BL({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18"}))}const Ih=f.forwardRef(BL);function zL({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7.5 7.5 3m0 0L12 7.5M7.5 3v13.5m13.5 0L16.5 21m0 0L12 16.5m4.5 4.5V7.5"}))}const XT=f.forwardRef(zL);function UL({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const My=f.forwardRef(UL);function $L({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 21v-7.5a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 .75.75V21m-4.5 0H2.36m11.14 0H18m0 0h3.64m-1.39 0V9.349M3.75 21V9.349m0 0a3.001 3.001 0 0 0 3.75-.615A2.993 2.993 0 0 0 9.75 9.75c.896 0 1.7-.393 2.25-1.016a2.993 2.993 0 0 0 2.25 1.016c.896 0 1.7-.393 2.25-1.015a3.001 3.001 0 0 0 3.75.614m-16.5 0a3.004 3.004 0 0 1-.621-4.72l1.189-1.19A1.5 1.5 0 0 1 5.378 3h13.243a1.5 1.5 0 0 1 1.06.44l1.19 1.189a3 3 0 0 1-.621 4.72M6.75 18h3.75a.75.75 0 0 0 .75-.75V13.5a.75.75 0 0 0-.75-.75H6.75a.75.75 0 0 0-.75.75v3.75c0 .414.336.75.75.75Z"}))}const Q0=f.forwardRef($L);function VL({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 15.75V18m-7.5-6.75h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V13.5Zm0 2.25h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V18Zm2.498-6.75h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V13.5Zm0 2.25h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V18Zm2.504-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5Zm0 2.25h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V18Zm2.498-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5ZM8.25 6h7.5v2.25h-7.5V6ZM12 2.25c-1.892 0-3.758.11-5.593.322C5.307 2.7 4.5 3.65 4.5 4.757V19.5a2.25 2.25 0 0 0 2.25 2.25h10.5a2.25 2.25 0 0 0 2.25-2.25V4.757c0-1.108-.806-2.057-1.907-2.185A48.507 48.507 0 0 0 12 2.25Z"}))}const WL=f.forwardRef(VL);function HL({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"}))}const dj=f.forwardRef(HL);function qL({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const fS=f.forwardRef(qL);function GL({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const QT=f.forwardRef(GL);function KL({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))}const Df=f.forwardRef(KL);function YL({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const ZL=f.forwardRef(YL);function XL({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const zc=f.forwardRef(XL);function QL({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const Is=f.forwardRef(QL);function JL({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const eD=f.forwardRef(JL);function tD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const Pa=f.forwardRef(tD);function rD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}const pp=f.forwardRef(rD);function nD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08M15.75 18.75v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5A3.375 3.375 0 0 0 6.375 7.5H5.25m11.9-3.664A2.251 2.251 0 0 0 15 2.25h-1.5a2.251 2.251 0 0 0-2.15 1.586m5.8 0c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75 7.5H4.875c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V16.5a9 9 0 0 0-9-9Z"}))}const aD=f.forwardRef(nD);function sD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9.75v6.75m0 0-3-3m3 3 3-3m-8.25 6a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"}))}const oD=f.forwardRef(sD);function iD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 6.75 22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3-4.5 16.5"}))}const pS=f.forwardRef(iD);function lD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const hS=f.forwardRef(lD);function cD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"}))}const L1=f.forwardRef(cD);function dD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"}))}const Xc=f.forwardRef(dD);function uD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const mS=f.forwardRef(uD);function fD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const zd=f.forwardRef(fD);function pD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"}))}const Ud=f.forwardRef(pD);function hD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 12.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 18.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5Z"}))}const gS=f.forwardRef(hD);function mD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const JT=f.forwardRef(mD);function gD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}const yD=f.forwardRef(gD);function xD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const Iu=f.forwardRef(xD);function vD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const $h=f.forwardRef(vD);function bD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 11.25v8.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5v-8.25M12 4.875A2.625 2.625 0 1 0 9.375 7.5H12m0-2.625V7.5m0-2.625A2.625 2.625 0 1 1 14.625 7.5H12m0 0V21m-8.625-9.75h18c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125h-18c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"}))}const e4=f.forwardRef(bD);function wD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"}))}const Oo=f.forwardRef(wD);function jD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const t4=f.forwardRef(jD);function CD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Zm6-10.125a1.875 1.875 0 1 1-3.75 0 1.875 1.875 0 0 1 3.75 0Zm1.294 6.336a6.721 6.721 0 0 1-3.17.789 6.721 6.721 0 0 1-3.168-.789 3.376 3.376 0 0 1 6.338 0Z"}))}const r4=f.forwardRef(CD);function SD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))}const Oa=f.forwardRef(SD);function ND({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m10.5 21 5.25-11.25L21 21m-9-3h7.5M3 5.621a48.474 48.474 0 0 1 6-.371m0 0c1.12 0 2.233.038 3.334.114M9 5.25V3m3.334 2.364C11.176 10.658 7.69 15.08 3 17.502m9.334-12.138c.896.061 1.785.147 2.666.257m-4.589 8.495a18.023 18.023 0 0 1-3.827-5.802"}))}const J0=f.forwardRef(ND);function kD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"}))}const _D=f.forwardRef(kD);function ED({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const yS=f.forwardRef(ED);function TD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const Ro=f.forwardRef(TD);function OD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))}const Vh=f.forwardRef(OD);function PD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.34 15.84c-.688-.06-1.386-.09-2.09-.09H7.5a4.5 4.5 0 1 1 0-9h.75c.704 0 1.402-.03 2.09-.09m0 9.18c.253.962.584 1.892.985 2.783.247.55.06 1.21-.463 1.511l-.657.38c-.551.318-1.26.117-1.527-.461a20.845 20.845 0 0 1-1.44-4.282m3.102.069a18.03 18.03 0 0 1-.59-4.59c0-1.586.205-3.124.59-4.59m0 9.18a23.848 23.848 0 0 1 8.835 2.535M10.34 6.66a23.847 23.847 0 0 0 8.835-2.535m0 0A23.74 23.74 0 0 0 18.795 3m.38 1.125a23.91 23.91 0 0 1 1.014 5.395m-1.014 8.855c-.118.38-.245.754-.38 1.125m.38-1.125a23.91 23.91 0 0 0 1.014-5.395m0-3.46c.495.413.811 1.035.811 1.73 0 .695-.316 1.317-.811 1.73m0-3.46a24.347 24.347 0 0 1 0 3.46"}))}const AD=f.forwardRef(PD);function MD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9 9 10.5-3m0 6.553v3.75a2.25 2.25 0 0 1-1.632 2.163l-1.32.377a1.803 1.803 0 1 1-.99-3.467l2.31-.66a2.25 2.25 0 0 0 1.632-2.163Zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 0 1-1.632 2.163l-1.32.377a1.803 1.803 0 0 1-.99-3.467l2.31-.66A2.25 2.25 0 0 0 9 15.553Z"}))}const Pk=f.forwardRef(MD);function ID({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))}const RD=f.forwardRef(ID);function LD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const oi=f.forwardRef(LD);function DD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"}))}const FD=f.forwardRef(DD);function BD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const Uc=f.forwardRef(BD);function zD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const na=f.forwardRef(zD);function UD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 6.087c0-.355.186-.676.401-.959.221-.29.349-.634.349-1.003 0-1.036-1.007-1.875-2.25-1.875s-2.25.84-2.25 1.875c0 .369.128.713.349 1.003.215.283.401.604.401.959v0a.64.64 0 0 1-.657.643 48.39 48.39 0 0 1-4.163-.3c.186 1.613.293 3.25.315 4.907a.656.656 0 0 1-.658.663v0c-.355 0-.676-.186-.959-.401a1.647 1.647 0 0 0-1.003-.349c-1.036 0-1.875 1.007-1.875 2.25s.84 2.25 1.875 2.25c.369 0 .713-.128 1.003-.349.283-.215.604-.401.959-.401v0c.31 0 .555.26.532.57a48.039 48.039 0 0 1-.642 5.056c1.518.19 3.058.309 4.616.354a.64.64 0 0 0 .657-.643v0c0-.355-.186-.676-.401-.959a1.647 1.647 0 0 1-.349-1.003c0-1.035 1.008-1.875 2.25-1.875 1.243 0 2.25.84 2.25 1.875 0 .369-.128.713-.349 1.003-.215.283-.4.604-.4.959v0c0 .333.277.599.61.58a48.1 48.1 0 0 0 5.427-.63 48.05 48.05 0 0 0 .582-4.717.532.532 0 0 0-.533-.57v0c-.355 0-.676.186-.959.401-.29.221-.634.349-1.003.349-1.035 0-1.875-1.007-1.875-2.25s.84-2.25 1.875-2.25c.37 0 .713.128 1.003.349.283.215.604.401.96.401v0a.656.656 0 0 0 .658-.663 48.422 48.422 0 0 0-.37-5.36c-1.886.342-3.81.574-5.766.689a.578.578 0 0 1-.61-.58v0Z"}))}const $D=f.forwardRef(UD);function VD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"}))}const n4=f.forwardRef(VD);function WD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6.878V6a2.25 2.25 0 0 1 2.25-2.25h7.5A2.25 2.25 0 0 1 18 6v.878m-12 0c.235-.083.487-.128.75-.128h10.5c.263 0 .515.045.75.128m-12 0A2.25 2.25 0 0 0 4.5 9v.878m13.5-3A2.25 2.25 0 0 1 19.5 9v.878m0 0a2.246 2.246 0 0 0-.75-.128H5.25c-.263 0-.515.045-.75.128m15 0A2.25 2.25 0 0 1 21 12v6a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18v-6c0-.98.626-1.813 1.5-2.122"}))}const Iy=f.forwardRef(WD);function HD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v17.25m0 0c-1.472 0-2.882.265-4.185.75M12 20.25c1.472 0 2.882.265 4.185.75M18.75 4.97A48.416 48.416 0 0 0 12 4.5c-2.291 0-4.545.16-6.75.47m13.5 0c1.01.143 2.01.317 3 .52m-3-.52 2.62 10.726c.122.499-.106 1.028-.589 1.202a5.988 5.988 0 0 1-2.031.352 5.988 5.988 0 0 1-2.031-.352c-.483-.174-.711-.703-.59-1.202L18.75 4.971Zm-16.5.52c.99-.203 1.99-.377 3-.52m0 0 2.62 10.726c.122.499-.106 1.028-.589 1.202a5.989 5.989 0 0 1-2.031.352 5.989 5.989 0 0 1-2.031-.352c-.483-.174-.711-.703-.59-1.202L5.25 4.971Z"}))}const qD=f.forwardRef(HD);function GD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"}))}const KD=f.forwardRef(GD);function YD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))}const xS=f.forwardRef(YD);function ZD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const a4=f.forwardRef(ZD);function XD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"}))}const Sb=f.forwardRef(XD);function QD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"}))}const vS=f.forwardRef(QD);function JD({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"}))}const e9=f.forwardRef(JD);function t9({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.098 19.902a3.75 3.75 0 0 0 5.304 0l6.401-6.402M6.75 21A3.75 3.75 0 0 1 3 17.25V4.125C3 3.504 3.504 3 4.125 3h5.25c.621 0 1.125.504 1.125 1.125v4.072M6.75 21a3.75 3.75 0 0 0 3.75-3.75V8.197M6.75 21h13.125c.621 0 1.125-.504 1.125-1.125v-5.25c0-.621-.504-1.125-1.125-1.125h-4.072M10.5 8.197l2.88-2.88c.438-.439 1.15-.439 1.59 0l3.712 3.713c.44.44.44 1.152 0 1.59l-2.879 2.88M6.75 17.25h.008v.008H6.75v-.008Z"}))}const Ad=f.forwardRef(t9);function r9({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"}))}const ap=f.forwardRef(r9);function n9({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const Vs=f.forwardRef(n9);function a9({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"}))}const hp=f.forwardRef(a9);function s9({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const o9=f.forwardRef(s9);function i9({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const py=f.forwardRef(i9);function l9({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const Ak=f.forwardRef(l9);function c9({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const s4=f.forwardRef(c9);function d9({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const o4=f.forwardRef(d9);function u9({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25h-9A2.25 2.25 0 0 0 2.25 7.5v9a2.25 2.25 0 0 0 2.25 2.25Z"}))}const uj=f.forwardRef(u9);function f9({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const xs=f.forwardRef(f9);var D1=function(a,r){return D1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])},D1(a,r)};function Ry(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");D1(a,r);function e(){this.constructor=a}a.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var hy=function(){return hy=Object.assign||function(r){for(var e,t=1,s=arguments.length;t<s;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}return r},hy.apply(this,arguments)};function p9(a,r){r===void 0&&(r={});var e=r.insertAt;if(!(typeof document>"u")){var t=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",e==="top"&&t.firstChild?t.insertBefore(s,t.firstChild):t.appendChild(s),s.styleSheet?s.styleSheet.cssText=a:s.appendChild(document.createTextNode(a))}}var h9=`/*
  code is extracted from Calendly's embed stylesheet: https://assets.calendly.com/assets/external/widget.css
*/

.calendly-inline-widget,
.calendly-inline-widget *,
.calendly-badge-widget,
.calendly-badge-widget *,
.calendly-overlay,
.calendly-overlay * {
  font-size: 16px;
  line-height: 1.2em;
}

.calendly-inline-widget {
  min-width: 320px;
  height: 630px;
}

.calendly-inline-widget iframe,
.calendly-badge-widget iframe,
.calendly-overlay iframe {
  display: inline;
  width: 100%;
  height: 100%;
}

.calendly-popup-content {
  position: relative;
}

.calendly-popup-content.calendly-mobile {
  -webkit-overflow-scrolling: touch;
  overflow-y: auto;
}

.calendly-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  z-index: 9999;
  background-color: #a5a5a5;
  background-color: rgba(31, 31, 31, 0.4);
}

.calendly-overlay .calendly-close-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
}

.calendly-overlay .calendly-popup {
  box-sizing: border-box;
  position: absolute;
  top: 50%;
  left: 50%;
  -webkit-transform: translateY(-50%) translateX(-50%);
  transform: translateY(-50%) translateX(-50%);
  width: 80%;
  min-width: 900px;
  max-width: 1000px;
  height: 90%;
  max-height: 680px;
}

@media (max-width: 975px) {
  .calendly-overlay .calendly-popup {
    position: fixed;
    top: 50px;
    left: 0;
    right: 0;
    bottom: 0;
    -webkit-transform: none;
    transform: none;
    width: 100%;
    height: auto;
    min-width: 0;
    max-height: none;
  }
}

.calendly-overlay .calendly-popup .calendly-popup-content {
  height: 100%;
}

.calendly-overlay .calendly-popup-close {
  position: absolute;
  top: 25px;
  right: 25px;
  color: #fff;
  width: 19px;
  height: 19px;
  cursor: pointer;
  background: url(https://assets.calendly.com/assets/external/close-icon.svg)
    no-repeat;
  background-size: contain;
}

@media (max-width: 975px) {
  .calendly-overlay .calendly-popup-close {
    top: 15px;
    right: 15px;
  }
}

.calendly-badge-widget {
  position: fixed;
  right: 20px;
  bottom: 15px;
  z-index: 9998;
}

.calendly-badge-widget .calendly-badge-content {
  display: table-cell;
  width: auto;
  height: 45px;
  padding: 0 30px;
  border-radius: 25px;
  box-shadow: rgba(0, 0, 0, 0.25) 0 2px 5px;
  font-family: sans-serif;
  text-align: center;
  vertical-align: middle;
  font-weight: bold;
  font-size: 14px;
  color: #fff;
  cursor: pointer;
}

.calendly-badge-widget .calendly-badge-content.calendly-white {
  color: #666a73;
}

.calendly-badge-widget .calendly-badge-content span {
  display: block;
  font-size: 12px;
}

.calendly-spinner {
  position: absolute;
  top: 50%;
  left: 0;
  right: 0;
  -webkit-transform: translateY(-50%);
  transform: translateY(-50%);
  text-align: center;
  z-index: -1;
}

.calendly-spinner > div {
  display: inline-block;
  width: 18px;
  height: 18px;
  background-color: #e1e1e1;
  border-radius: 50%;
  vertical-align: middle;
  -webkit-animation: calendly-bouncedelay 1.4s infinite ease-in-out;
  animation: calendly-bouncedelay 1.4s infinite ease-in-out;
  -webkit-animation-fill-mode: both;
  animation-fill-mode: both;
}

.calendly-spinner .calendly-bounce1 {
  -webkit-animation-delay: -0.32s;
  animation-delay: -0.32s;
}

.calendly-spinner .calendly-bounce2 {
  -webkit-animation-delay: -0.16s;
  animation-delay: -0.16s;
}

@-webkit-keyframes calendly-bouncedelay {
  0%,
  80%,
  100% {
    -webkit-transform: scale(0);
    transform: scale(0);
  }

  40% {
    -webkit-transform: scale(1);
    transform: scale(1);
  }
}

@keyframes calendly-bouncedelay {
  0%,
  80%,
  100% {
    -webkit-transform: scale(0);
    transform: scale(0);
  }

  40% {
    -webkit-transform: scale(1);
    transform: scale(1);
  }
}
`;p9(h9);function fj(a){return a.charAt(0)==="#"?a.slice(1):a}function m9(a){return a?.primaryColor&&(a.primaryColor=fj(a.primaryColor)),a?.textColor&&(a.textColor=fj(a.textColor)),a?.backgroundColor&&(a.backgroundColor=fj(a.backgroundColor)),a}var Mk;(function(a){a.PROFILE_PAGE_VIEWED="calendly.profile_page_viewed",a.EVENT_TYPE_VIEWED="calendly.event_type_viewed",a.DATE_AND_TIME_SELECTED="calendly.date_and_time_selected",a.EVENT_SCHEDULED="calendly.event_scheduled",a.PAGE_HEIGHT="calendly.page_height"})(Mk||(Mk={}));var i4=function(a){var r=a.url,e=a.prefill,t=e===void 0?{}:e,s=a.pageSettings,o=s===void 0?{}:s,i=a.utm,l=i===void 0?{}:i,c=a.embedType,d=m9(o),h=d.backgroundColor,m=d.hideEventTypeDetails,y=d.hideLandingPageDetails,x=d.primaryColor,b=d.textColor,v=d.hideGdprBanner,j=t.customAnswers,S=t.date,k=t.email,N=t.firstName,P=t.guests,R=t.lastName,F=t.location,z=t.name,H=l.utmCampaign,V=l.utmContent,W=l.utmMedium,Z=l.utmSource,A=l.utmTerm,q=l.salesforce_uuid,I=r.indexOf("?"),K=I>-1,D=r.slice(I+1),Q=K?r.slice(0,I):r,oe=[K?D:null,h?"background_color=".concat(h):null,m?"hide_event_type_details=1":null,y?"hide_landing_page_details=1":null,x?"primary_color=".concat(x):null,b?"text_color=".concat(b):null,v?"hide_gdpr_banner=1":null,z?"name=".concat(encodeURIComponent(z)):null,F?"location=".concat(encodeURIComponent(F)):null,N?"first_name=".concat(encodeURIComponent(N)):null,R?"last_name=".concat(encodeURIComponent(R)):null,P?"guests=".concat(P.map(encodeURIComponent).join(",")):null,k?"email=".concat(encodeURIComponent(k)):null,S&&S instanceof Date?"date=".concat(g9(S)):null,H?"utm_campaign=".concat(encodeURIComponent(H)):null,V?"utm_content=".concat(encodeURIComponent(V)):null,W?"utm_medium=".concat(encodeURIComponent(W)):null,Z?"utm_source=".concat(encodeURIComponent(Z)):null,A?"utm_term=".concat(encodeURIComponent(A)):null,q?"salesforce_uuid=".concat(encodeURIComponent(q)):null,c?"embed_type=".concat(c):null,"embed_domain=1"].concat(j?x9(j):[]).filter(function(re){return re!==null}).join("&");return"".concat(Q,"?").concat(oe)},g9=function(a){var r=a.getMonth()+1,e=a.getDate(),t=a.getFullYear();return[t,r<10?"0".concat(r):r,e<10?"0".concat(e):e].join("-")},y9=/^a\d{1,2}$/,x9=function(a){var r=Object.keys(a).filter(function(e){return e.match(y9)});return r.length?r.map(function(e){return"".concat(e,"=").concat(encodeURIComponent(a[e]))}):[]},l4=(function(a){Ry(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.render=function(){return f.createElement("div",{className:"calendly-spinner"},f.createElement("div",{className:"calendly-bounce1"}),f.createElement("div",{className:"calendly-bounce2"}),f.createElement("div",{className:"calendly-bounce3"}))},r})(f.Component),v9="calendly-inline-widget",b9=(function(a){Ry(r,a);function r(e){var t=a.call(this,e)||this;return t.state={isLoading:!0},t.onLoad=t.onLoad.bind(t),t}return r.prototype.onLoad=function(){this.setState({isLoading:!1})},r.prototype.render=function(){var e=i4({url:this.props.url,pageSettings:this.props.pageSettings,prefill:this.props.prefill,utm:this.props.utm,embedType:"Inline"}),t=this.props.LoadingSpinner||l4;return f.createElement("div",{className:this.props.className||v9,style:this.props.styles||{}},this.state.isLoading&&f.createElement(t,null),f.createElement("iframe",{width:"100%",height:"100%",frameBorder:"0",title:this.props.iframeTitle||"Calendly Scheduling Page",onLoad:this.onLoad,src:e}))},r})(f.Component),w9=(function(a){Ry(r,a);function r(e){var t=a.call(this,e)||this;return t.state={isLoading:!0},t.onLoad=t.onLoad.bind(t),t}return r.prototype.onLoad=function(){this.setState({isLoading:!1})},r.prototype.render=function(){var e=i4({url:this.props.url,pageSettings:this.props.pageSettings,prefill:this.props.prefill,utm:this.props.utm,embedType:"Inline"}),t=this.props.LoadingSpinner||l4;return f.createElement(f.Fragment,null,this.state.isLoading&&f.createElement(t,null),f.createElement("iframe",{width:"100%",height:"100%",frameBorder:"0",title:this.props.iframeTitle||"Calendly Scheduling Page",onLoad:this.onLoad,src:e}))},r})(f.Component),c4=(function(a){if(!a.open)return null;if(!a.rootElement)throw new Error("[react-calendly]: PopupModal rootElement property cannot be undefined");return Cb.createPortal(f.createElement("div",{className:"calendly-overlay"},f.createElement("div",{onClick:a.onModalClose,className:"calendly-close-overlay"}),f.createElement("div",{className:"calendly-popup"},f.createElement("div",{className:"calendly-popup-content"},f.createElement(w9,hy({},a)))),f.createElement("button",{className:"calendly-popup-close",onClick:a.onModalClose,"aria-label":"Close modal",style:{display:"block",border:"none",padding:0}})),a.rootElement)});(function(a){Ry(r,a);function r(e){var t=a.call(this,e)||this;return t.state={isOpen:!1},t.onClick=t.onClick.bind(t),t.onClose=t.onClose.bind(t),t}return r.prototype.onClick=function(e){e.preventDefault(),this.setState({isOpen:!0})},r.prototype.onClose=function(e){e.stopPropagation(),this.setState({isOpen:!1})},r.prototype.render=function(){return f.createElement(f.Fragment,null,f.createElement("button",{onClick:this.onClick,style:this.props.styles||{},className:this.props.className||""},this.props.text),f.createElement(c4,hy({},this.props,{open:this.state.isOpen,onModalClose:this.onClose,rootElement:this.props.rootElement})))},r})(f.Component);(function(a){Ry(r,a);function r(e){var t=a.call(this,e)||this;return t.state={isOpen:!1},t.onClick=t.onClick.bind(t),t.onClose=t.onClose.bind(t),t}return r.prototype.onClick=function(){this.setState({isOpen:!0})},r.prototype.onClose=function(e){e.stopPropagation(),this.setState({isOpen:!1})},r.prototype.render=function(){return f.createElement("div",{className:"calendly-badge-widget",onClick:this.onClick},f.createElement("div",{className:"calendly-badge-content",style:{background:this.props.color||"#00a2ff",color:this.props.textColor||"#ffffff"}},this.props.text||"Schedule time with me",this.props.branding&&f.createElement("span",null,"powered by Calendly")),f.createElement(c4,hy({},this.props,{open:this.state.isOpen,onModalClose:this.onClose,rootElement:this.props.rootElement})))},r})(f.Component);const Qc=Object.create(null);Qc.open="0";Qc.close="1";Qc.ping="2";Qc.pong="3";Qc.message="4";Qc.upgrade="5";Qc.noop="6";const M0=Object.create(null);Object.keys(Qc).forEach(a=>{M0[Qc[a]]=a});const F1={type:"error",data:"parser error"},d4=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",u4=typeof ArrayBuffer=="function",f4=a=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(a):a&&a.buffer instanceof ArrayBuffer,bS=({type:a,data:r},e,t)=>d4&&r instanceof Blob?e?t(r):Ik(r,t):u4&&(r instanceof ArrayBuffer||f4(r))?e?t(r):Ik(new Blob([r]),t):t(Qc[a]+(r||"")),Ik=(a,r)=>{const e=new FileReader;return e.onload=function(){const t=e.result.split(",")[1];r("b"+(t||""))},e.readAsDataURL(a)};function Rk(a){return a instanceof Uint8Array?a:a instanceof ArrayBuffer?new Uint8Array(a):new Uint8Array(a.buffer,a.byteOffset,a.byteLength)}let pj;function j9(a,r){if(d4&&a.data instanceof Blob)return a.data.arrayBuffer().then(Rk).then(r);if(u4&&(a.data instanceof ArrayBuffer||f4(a.data)))return r(Rk(a.data));bS(a,!1,e=>{pj||(pj=new TextEncoder),r(pj.encode(e))})}const Lk="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Fg=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let a=0;a<Lk.length;a++)Fg[Lk.charCodeAt(a)]=a;const C9=a=>{let r=a.length*.75,e=a.length,t,s=0,o,i,l,c;a[a.length-1]==="="&&(r--,a[a.length-2]==="="&&r--);const d=new ArrayBuffer(r),h=new Uint8Array(d);for(t=0;t<e;t+=4)o=Fg[a.charCodeAt(t)],i=Fg[a.charCodeAt(t+1)],l=Fg[a.charCodeAt(t+2)],c=Fg[a.charCodeAt(t+3)],h[s++]=o<<2|i>>4,h[s++]=(i&15)<<4|l>>2,h[s++]=(l&3)<<6|c&63;return d},S9=typeof ArrayBuffer=="function",wS=(a,r)=>{if(typeof a!="string")return{type:"message",data:p4(a,r)};const e=a.charAt(0);return e==="b"?{type:"message",data:N9(a.substring(1),r)}:M0[e]?a.length>1?{type:M0[e],data:a.substring(1)}:{type:M0[e]}:F1},N9=(a,r)=>{if(S9){const e=C9(a);return p4(e,r)}else return{base64:!0,data:a}},p4=(a,r)=>r==="blob"?a instanceof Blob?a:new Blob([a]):a instanceof ArrayBuffer?a:a.buffer,h4="",k9=(a,r)=>{const e=a.length,t=new Array(e);let s=0;a.forEach((o,i)=>{bS(o,!1,l=>{t[i]=l,++s===e&&r(t.join(h4))})})},_9=(a,r)=>{const e=a.split(h4),t=[];for(let s=0;s<e.length;s++){const o=wS(e[s],r);if(t.push(o),o.type==="error")break}return t};function E9(){return new TransformStream({transform(a,r){j9(a,e=>{const t=e.length;let s;if(t<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,t);else if(t<65536){s=new Uint8Array(3);const o=new DataView(s.buffer);o.setUint8(0,126),o.setUint16(1,t)}else{s=new Uint8Array(9);const o=new DataView(s.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(t))}a.data&&typeof a.data!="string"&&(s[0]|=128),r.enqueue(s),r.enqueue(e)})}})}let hj;function o0(a){return a.reduce((r,e)=>r+e.length,0)}function i0(a,r){if(a[0].length===r)return a.shift();const e=new Uint8Array(r);let t=0;for(let s=0;s<r;s++)e[s]=a[0][t++],t===a[0].length&&(a.shift(),t=0);return a.length&&t<a[0].length&&(a[0]=a[0].slice(t)),e}function T9(a,r){hj||(hj=new TextDecoder);const e=[];let t=0,s=-1,o=!1;return new TransformStream({transform(i,l){for(e.push(i);;){if(t===0){if(o0(e)<1)break;const c=i0(e,1);o=(c[0]&128)===128,s=c[0]&127,s<126?t=3:s===126?t=1:t=2}else if(t===1){if(o0(e)<2)break;const c=i0(e,2);s=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),t=3}else if(t===2){if(o0(e)<8)break;const c=i0(e,8),d=new DataView(c.buffer,c.byteOffset,c.length),h=d.getUint32(0);if(h>Math.pow(2,21)-1){l.enqueue(F1);break}s=h*Math.pow(2,32)+d.getUint32(4),t=3}else{if(o0(e)<s)break;const c=i0(e,s);l.enqueue(wS(o?c:hj.decode(c),r)),t=0}if(s===0||s>a){l.enqueue(F1);break}}}})}const m4=4;function eo(a){if(a)return O9(a)}function O9(a){for(var r in eo.prototype)a[r]=eo.prototype[r];return a}eo.prototype.on=eo.prototype.addEventListener=function(a,r){return this._callbacks=this._callbacks||{},(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(r),this};eo.prototype.once=function(a,r){function e(){this.off(a,e),r.apply(this,arguments)}return e.fn=r,this.on(a,e),this};eo.prototype.off=eo.prototype.removeListener=eo.prototype.removeAllListeners=eo.prototype.removeEventListener=function(a,r){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+a];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+a],this;for(var t,s=0;s<e.length;s++)if(t=e[s],t===r||t.fn===r){e.splice(s,1);break}return e.length===0&&delete this._callbacks["$"+a],this};eo.prototype.emit=function(a){this._callbacks=this._callbacks||{};for(var r=new Array(arguments.length-1),e=this._callbacks["$"+a],t=1;t<arguments.length;t++)r[t-1]=arguments[t];if(e){e=e.slice(0);for(var t=0,s=e.length;t<s;++t)e[t].apply(this,r)}return this};eo.prototype.emitReserved=eo.prototype.emit;eo.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks["$"+a]||[]};eo.prototype.hasListeners=function(a){return!!this.listeners(a).length};const Nb=typeof Promise=="function"&&typeof Promise.resolve=="function"?r=>Promise.resolve().then(r):(r,e)=>e(r,0),bl=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),P9="arraybuffer";function g4(a,...r){return r.reduce((e,t)=>(a.hasOwnProperty(t)&&(e[t]=a[t]),e),{})}const A9=bl.setTimeout,M9=bl.clearTimeout;function kb(a,r){r.useNativeTimers?(a.setTimeoutFn=A9.bind(bl),a.clearTimeoutFn=M9.bind(bl)):(a.setTimeoutFn=bl.setTimeout.bind(bl),a.clearTimeoutFn=bl.clearTimeout.bind(bl))}const I9=1.33;function R9(a){return typeof a=="string"?L9(a):Math.ceil((a.byteLength||a.size)*I9)}function L9(a){let r=0,e=0;for(let t=0,s=a.length;t<s;t++)r=a.charCodeAt(t),r<128?e+=1:r<2048?e+=2:r<55296||r>=57344?e+=3:(t++,e+=4);return e}function y4(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function D9(a){let r="";for(let e in a)a.hasOwnProperty(e)&&(r.length&&(r+="&"),r+=encodeURIComponent(e)+"="+encodeURIComponent(a[e]));return r}function F9(a){let r={},e=a.split("&");for(let t=0,s=e.length;t<s;t++){let o=e[t].split("=");r[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return r}class B9 extends Error{constructor(r,e,t){super(r),this.description=e,this.context=t,this.type="TransportError"}}class jS extends eo{constructor(r){super(),this.writable=!1,kb(this,r),this.opts=r,this.query=r.query,this.socket=r.socket,this.supportsBinary=!r.forceBase64}onError(r,e,t){return super.emitReserved("error",new B9(r,e,t)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(r){this.readyState==="open"&&this.write(r)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(r){const e=wS(r,this.socket.binaryType);this.onPacket(e)}onPacket(r){super.emitReserved("packet",r)}onClose(r){this.readyState="closed",super.emitReserved("close",r)}pause(r){}createUri(r,e={}){return r+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){const r=this.opts.hostname;return r.indexOf(":")===-1?r:"["+r+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(r){const e=D9(r);return e.length?"?"+e:""}}class z9 extends jS{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(r){this.readyState="pausing";const e=()=>{this.readyState="paused",r()};if(this._polling||!this.writable){let t=0;this._polling&&(t++,this.once("pollComplete",function(){--t||e()})),this.writable||(t++,this.once("drain",function(){--t||e()}))}else e()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(r){const e=t=>{if(this.readyState==="opening"&&t.type==="open"&&this.onOpen(),t.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(t)};_9(r,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const r=()=>{this.write([{type:"close"}])};this.readyState==="open"?r():this.once("open",r)}write(r){this.writable=!1,k9(r,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const r=this.opts.secure?"https":"http",e=this.query||{};return this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=y4()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.createUri(r,e)}}let x4=!1;try{x4=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const U9=x4;function $9(){}class V9 extends z9{constructor(r){if(super(r),typeof location<"u"){const e=location.protocol==="https:";let t=location.port;t||(t=e?"443":"80"),this.xd=typeof location<"u"&&r.hostname!==location.hostname||t!==r.port}}doWrite(r,e){const t=this.request({method:"POST",data:r});t.on("success",e),t.on("error",(s,o)=>{this.onError("xhr post error",s,o)})}doPoll(){const r=this.request();r.on("data",this.onData.bind(this)),r.on("error",(e,t)=>{this.onError("xhr poll error",e,t)}),this.pollXhr=r}}class Yc extends eo{constructor(r,e,t){super(),this.createRequest=r,kb(this,t),this._opts=t,this._method=t.method||"GET",this._uri=e,this._data=t.data!==void 0?t.data:null,this._create()}_create(){var r;const e=g4(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this._opts.xd;const t=this._xhr=this.createRequest(e);try{t.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&t.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{t.setRequestHeader("Accept","*/*")}catch{}(r=this._opts.cookieJar)===null||r===void 0||r.addCookies(t),"withCredentials"in t&&(t.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(t.timeout=this._opts.requestTimeout),t.onreadystatechange=()=>{var s;t.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(t.getResponseHeader("set-cookie"))),t.readyState===4&&(t.status===200||t.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof t.status=="number"?t.status:0)},0))},t.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=Yc.requestsCount++,Yc.requests[this._index]=this)}_onError(r){this.emitReserved("error",r,this._xhr),this._cleanup(!0)}_cleanup(r){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=$9,r)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Yc.requests[this._index],this._xhr=null}}_onLoad(){const r=this._xhr.responseText;r!==null&&(this.emitReserved("data",r),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Yc.requestsCount=0;Yc.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Dk);else if(typeof addEventListener=="function"){const a="onpagehide"in bl?"pagehide":"unload";addEventListener(a,Dk,!1)}}function Dk(){for(let a in Yc.requests)Yc.requests.hasOwnProperty(a)&&Yc.requests[a].abort()}const W9=(function(){const a=v4({xdomain:!1});return a&&a.responseType!==null})();class H9 extends V9{constructor(r){super(r);const e=r&&r.forceBase64;this.supportsBinary=W9&&!e}request(r={}){return Object.assign(r,{xd:this.xd},this.opts),new Yc(v4,this.uri(),r)}}function v4(a){const r=a.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!r||U9))return new XMLHttpRequest}catch{}if(!r)try{return new bl[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const b4=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class q9 extends jS{get name(){return"websocket"}doOpen(){const r=this.uri(),e=this.opts.protocols,t=b4?{}:g4(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(t.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(r,e,t)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=r=>this.onClose({description:"websocket connection closed",context:r}),this.ws.onmessage=r=>this.onData(r.data),this.ws.onerror=r=>this.onError("websocket error",r)}write(r){this.writable=!1;for(let e=0;e<r.length;e++){const t=r[e],s=e===r.length-1;bS(t,this.supportsBinary,o=>{try{this.doWrite(t,o)}catch{}s&&Nb(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const r=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=y4()),this.supportsBinary||(e.b64=1),this.createUri(r,e)}}const mj=bl.WebSocket||bl.MozWebSocket;class G9 extends q9{createSocket(r,e,t){return b4?new mj(r,e,t):e?new mj(r,e):new mj(r)}doWrite(r,e){this.ws.send(e)}}class K9 extends jS{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(r){return this.emitReserved("error",r)}this._transport.closed.then(()=>{this.onClose()}).catch(r=>{this.onError("webtransport error",r)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(r=>{const e=T9(Number.MAX_SAFE_INTEGER,this.socket.binaryType),t=r.readable.pipeThrough(e).getReader(),s=E9();s.readable.pipeTo(r.writable),this._writer=s.writable.getWriter();const o=()=>{t.read().then(({done:l,value:c})=>{l||(this.onPacket(c),o())}).catch(l=>{})};o();const i={type:"open"};this.query.sid&&(i.data=`{"sid":"${this.query.sid}"}`),this._writer.write(i).then(()=>this.onOpen())})})}write(r){this.writable=!1;for(let e=0;e<r.length;e++){const t=r[e],s=e===r.length-1;this._writer.write(t).then(()=>{s&&Nb(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var r;(r=this._transport)===null||r===void 0||r.close()}}const Y9={websocket:G9,webtransport:K9,polling:H9},Z9=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,X9=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function B1(a){if(a.length>8e3)throw"URI too long";const r=a,e=a.indexOf("["),t=a.indexOf("]");e!=-1&&t!=-1&&(a=a.substring(0,e)+a.substring(e,t).replace(/:/g,";")+a.substring(t,a.length));let s=Z9.exec(a||""),o={},i=14;for(;i--;)o[X9[i]]=s[i]||"";return e!=-1&&t!=-1&&(o.source=r,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=Q9(o,o.path),o.queryKey=J9(o,o.query),o}function Q9(a,r){const e=/\/{2,9}/g,t=r.replace(e,"/").split("/");return(r.slice(0,1)=="/"||r.length===0)&&t.splice(0,1),r.slice(-1)=="/"&&t.splice(t.length-1,1),t}function J9(a,r){const e={};return r.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(t,s,o){s&&(e[s]=o)}),e}const z1=typeof addEventListener=="function"&&typeof removeEventListener=="function",I0=[];z1&&addEventListener("offline",()=>{I0.forEach(a=>a())},!1);class Ru extends eo{constructor(r,e){if(super(),this.binaryType=P9,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,r&&typeof r=="object"&&(e=r,r=null),r){const t=B1(r);e.hostname=t.host,e.secure=t.protocol==="https"||t.protocol==="wss",e.port=t.port,t.query&&(e.query=t.query)}else e.host&&(e.hostname=B1(e.host).host);kb(this,e),this.secure=e.secure!=null?e.secure:typeof location<"u"&&location.protocol==="https:",e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=e.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},e.transports.forEach(t=>{const s=t.prototype.name;this.transports.push(s),this._transportsByName[s]=t}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},e),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=F9(this.opts.query)),z1&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},I0.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(r){const e=Object.assign({},this.opts.query);e.EIO=m4,e.transport=r,this.id&&(e.sid=this.id);const t=Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[r]);return new this._transportsByName[r](t)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const r=this.opts.rememberUpgrade&&Ru.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const e=this.createTransport(r);e.open(),this.setTransport(e)}setTransport(r){this.transport&&this.transport.removeAllListeners(),this.transport=r,r.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",Ru.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",r),this.emitReserved("heartbeat"),r.type){case"open":this.onHandshake(JSON.parse(r.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const e=new Error("server error");e.code=r.data,this._onError(e);break;case"message":this.emitReserved("data",r.data),this.emitReserved("message",r.data);break}}onHandshake(r){this.emitReserved("handshake",r),this.id=r.sid,this.transport.query.sid=r.sid,this._pingInterval=r.pingInterval,this._pingTimeout=r.pingTimeout,this._maxPayload=r.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const r=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+r,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},r),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const r=this._getWritablePackets();this.transport.send(r),this._prevBufferLen=r.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let t=0;t<this.writeBuffer.length;t++){const s=this.writeBuffer[t].data;if(s&&(e+=R9(s)),t>0&&e>this._maxPayload)return this.writeBuffer.slice(0,t);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const r=Date.now()>this._pingTimeoutTime;return r&&(this._pingTimeoutTime=0,Nb(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),r}write(r,e,t){return this._sendPacket("message",r,e,t),this}send(r,e,t){return this._sendPacket("message",r,e,t),this}_sendPacket(r,e,t,s){if(typeof e=="function"&&(s=e,e=void 0),typeof t=="function"&&(s=t,t=null),this.readyState==="closing"||this.readyState==="closed")return;t=t||{},t.compress=t.compress!==!1;const o={type:r,data:e,options:t};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),s&&this.once("flush",s),this.flush()}close(){const r=()=>{this._onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),r()},t=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?t():r()}):this.upgrading?t():r()),this}_onError(r){if(Ru.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",r),this._onClose("transport error",r)}_onClose(r,e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),z1&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const t=I0.indexOf(this._offlineEventListener);t!==-1&&I0.splice(t,1)}this.readyState="closed",this.id=null,this.emitReserved("close",r,e),this.writeBuffer=[],this._prevBufferLen=0}}}Ru.protocol=m4;class e7 extends Ru{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let r=0;r<this._upgrades.length;r++)this._probe(this._upgrades[r])}_probe(r){let e=this.createTransport(r),t=!1;Ru.priorWebsocketSuccess=!1;const s=()=>{t||(e.send([{type:"ping",data:"probe"}]),e.once("packet",m=>{if(!t)if(m.type==="pong"&&m.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;Ru.priorWebsocketSuccess=e.name==="websocket",this.transport.pause(()=>{t||this.readyState!=="closed"&&(h(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{const y=new Error("probe error");y.transport=e.name,this.emitReserved("upgradeError",y)}}))};function o(){t||(t=!0,h(),e.close(),e=null)}const i=m=>{const y=new Error("probe error: "+m);y.transport=e.name,o(),this.emitReserved("upgradeError",y)};function l(){i("transport closed")}function c(){i("socket closed")}function d(m){e&&m.name!==e.name&&o()}const h=()=>{e.removeListener("open",s),e.removeListener("error",i),e.removeListener("close",l),this.off("close",c),this.off("upgrading",d)};e.once("open",s),e.once("error",i),e.once("close",l),this.once("close",c),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&r!=="webtransport"?this.setTimeoutFn(()=>{t||e.open()},200):e.open()}onHandshake(r){this._upgrades=this._filterUpgrades(r.upgrades),super.onHandshake(r)}_filterUpgrades(r){const e=[];for(let t=0;t<r.length;t++)~this.transports.indexOf(r[t])&&e.push(r[t]);return e}}let t7=class extends e7{constructor(r,e={}){const t=typeof r=="object"?r:e;(!t.transports||t.transports&&typeof t.transports[0]=="string")&&(t.transports=(t.transports||["polling","websocket","webtransport"]).map(s=>Y9[s]).filter(s=>!!s)),super(r,t)}};function r7(a,r="",e){let t=a;e=e||typeof location<"u"&&location,a==null&&(a=e.protocol+"//"+e.host),typeof a=="string"&&(a.charAt(0)==="/"&&(a.charAt(1)==="/"?a=e.protocol+a:a=e.host+a),/^(https?|wss?):\/\//.test(a)||(typeof e<"u"?a=e.protocol+"//"+a:a="https://"+a),t=B1(a)),t.port||(/^(http|ws)$/.test(t.protocol)?t.port="80":/^(http|ws)s$/.test(t.protocol)&&(t.port="443")),t.path=t.path||"/";const o=t.host.indexOf(":")!==-1?"["+t.host+"]":t.host;return t.id=t.protocol+"://"+o+":"+t.port+r,t.href=t.protocol+"://"+o+(e&&e.port===t.port?"":":"+t.port),t}const n7=typeof ArrayBuffer=="function",a7=a=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(a):a.buffer instanceof ArrayBuffer,w4=Object.prototype.toString,s7=typeof Blob=="function"||typeof Blob<"u"&&w4.call(Blob)==="[object BlobConstructor]",o7=typeof File=="function"||typeof File<"u"&&w4.call(File)==="[object FileConstructor]";function CS(a){return n7&&(a instanceof ArrayBuffer||a7(a))||s7&&a instanceof Blob||o7&&a instanceof File}function R0(a,r){if(!a||typeof a!="object")return!1;if(Array.isArray(a)){for(let e=0,t=a.length;e<t;e++)if(R0(a[e]))return!0;return!1}if(CS(a))return!0;if(a.toJSON&&typeof a.toJSON=="function"&&arguments.length===1)return R0(a.toJSON(),!0);for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e)&&R0(a[e]))return!0;return!1}function i7(a){const r=[],e=a.data,t=a;return t.data=U1(e,r),t.attachments=r.length,{packet:t,buffers:r}}function U1(a,r){if(!a)return a;if(CS(a)){const e={_placeholder:!0,num:r.length};return r.push(a),e}else if(Array.isArray(a)){const e=new Array(a.length);for(let t=0;t<a.length;t++)e[t]=U1(a[t],r);return e}else if(typeof a=="object"&&!(a instanceof Date)){const e={};for(const t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=U1(a[t],r));return e}return a}function l7(a,r){return a.data=$1(a.data,r),delete a.attachments,a}function $1(a,r){if(!a)return a;if(a&&a._placeholder===!0){if(typeof a.num=="number"&&a.num>=0&&a.num<r.length)return r[a.num];throw new Error("illegal attachments")}else if(Array.isArray(a))for(let e=0;e<a.length;e++)a[e]=$1(a[e],r);else if(typeof a=="object")for(const e in a)Object.prototype.hasOwnProperty.call(a,e)&&(a[e]=$1(a[e],r));return a}const c7=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];var pa;(function(a){a[a.CONNECT=0]="CONNECT",a[a.DISCONNECT=1]="DISCONNECT",a[a.EVENT=2]="EVENT",a[a.ACK=3]="ACK",a[a.CONNECT_ERROR=4]="CONNECT_ERROR",a[a.BINARY_EVENT=5]="BINARY_EVENT",a[a.BINARY_ACK=6]="BINARY_ACK"})(pa||(pa={}));class d7{constructor(r){this.replacer=r}encode(r){return(r.type===pa.EVENT||r.type===pa.ACK)&&R0(r)?this.encodeAsBinary({type:r.type===pa.EVENT?pa.BINARY_EVENT:pa.BINARY_ACK,nsp:r.nsp,data:r.data,id:r.id}):[this.encodeAsString(r)]}encodeAsString(r){let e=""+r.type;return(r.type===pa.BINARY_EVENT||r.type===pa.BINARY_ACK)&&(e+=r.attachments+"-"),r.nsp&&r.nsp!=="/"&&(e+=r.nsp+","),r.id!=null&&(e+=r.id),r.data!=null&&(e+=JSON.stringify(r.data,this.replacer)),e}encodeAsBinary(r){const e=i7(r),t=this.encodeAsString(e.packet),s=e.buffers;return s.unshift(t),s}}class SS extends eo{constructor(r){super(),this.reviver=r}add(r){let e;if(typeof r=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(r);const t=e.type===pa.BINARY_EVENT;t||e.type===pa.BINARY_ACK?(e.type=t?pa.EVENT:pa.ACK,this.reconstructor=new u7(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else if(CS(r)||r.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(r),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+r)}decodeString(r){let e=0;const t={type:Number(r.charAt(0))};if(pa[t.type]===void 0)throw new Error("unknown packet type "+t.type);if(t.type===pa.BINARY_EVENT||t.type===pa.BINARY_ACK){const o=e+1;for(;r.charAt(++e)!=="-"&&e!=r.length;);const i=r.substring(o,e);if(i!=Number(i)||r.charAt(e)!=="-")throw new Error("Illegal attachments");t.attachments=Number(i)}if(r.charAt(e+1)==="/"){const o=e+1;for(;++e&&!(r.charAt(e)===","||e===r.length););t.nsp=r.substring(o,e)}else t.nsp="/";const s=r.charAt(e+1);if(s!==""&&Number(s)==s){const o=e+1;for(;++e;){const i=r.charAt(e);if(i==null||Number(i)!=i){--e;break}if(e===r.length)break}t.id=Number(r.substring(o,e+1))}if(r.charAt(++e)){const o=this.tryParse(r.substr(e));if(SS.isPayloadValid(t.type,o))t.data=o;else throw new Error("invalid payload")}return t}tryParse(r){try{return JSON.parse(r,this.reviver)}catch{return!1}}static isPayloadValid(r,e){switch(r){case pa.CONNECT:return Fk(e);case pa.DISCONNECT:return e===void 0;case pa.CONNECT_ERROR:return typeof e=="string"||Fk(e);case pa.EVENT:case pa.BINARY_EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&c7.indexOf(e[0])===-1);case pa.ACK:case pa.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class u7{constructor(r){this.packet=r,this.buffers=[],this.reconPack=r}takeBinaryData(r){if(this.buffers.push(r),this.buffers.length===this.reconPack.attachments){const e=l7(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Fk(a){return Object.prototype.toString.call(a)==="[object Object]"}const f7=Object.freeze(Object.defineProperty({__proto__:null,Decoder:SS,Encoder:d7,get PacketType(){return pa}},Symbol.toStringTag,{value:"Module"}));function Jl(a,r,e){return a.on(r,e),function(){a.off(r,e)}}const p7=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class j4 extends eo{constructor(r,e,t){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=r,this.nsp=e,t&&t.auth&&(this.auth=t.auth),this._opts=Object.assign({},t),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const r=this.io;this.subs=[Jl(r,"open",this.onopen.bind(this)),Jl(r,"packet",this.onpacket.bind(this)),Jl(r,"error",this.onerror.bind(this)),Jl(r,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...r){return r.unshift("message"),this.emit.apply(this,r),this}emit(r,...e){var t,s,o;if(p7.hasOwnProperty(r))throw new Error('"'+r.toString()+'" is a reserved event name');if(e.unshift(r),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;const i={type:pa.EVENT,data:e};if(i.options={},i.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){const h=this.ids++,m=e.pop();this._registerAckCallback(h,m),i.id=h}const l=(s=(t=this.io.engine)===null||t===void 0?void 0:t.transport)===null||s===void 0?void 0:s.writable,c=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(r,e){var t;const s=(t=this.flags.timeout)!==null&&t!==void 0?t:this._opts.ackTimeout;if(s===void 0){this.acks[r]=e;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[r];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===r&&this.sendBuffer.splice(l,1);e.call(this,new Error("operation has timed out"))},s),i=(...l)=>{this.io.clearTimeoutFn(o),e.apply(this,l)};i.withError=!0,this.acks[r]=i}emitWithAck(r,...e){return new Promise((t,s)=>{const o=(i,l)=>i?s(i):t(l);o.withError=!0,e.push(o),this.emit(r,...e)})}_addToQueue(r){let e;typeof r[r.length-1]=="function"&&(e=r.pop());const t={id:this._queueSeq++,tryCount:0,pending:!1,args:r,flags:Object.assign({fromQueue:!0},this.flags)};r.push((s,...o)=>(this._queue[0],s!==null?t.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(s)):(this._queue.shift(),e&&e(null,...o)),t.pending=!1,this._drainQueue())),this._queue.push(t),this._drainQueue()}_drainQueue(r=!1){if(!this.connected||this._queue.length===0)return;const e=this._queue[0];e.pending&&!r||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(r){r.nsp=this.nsp,this.io._packet(r)}onopen(){typeof this.auth=="function"?this.auth(r=>{this._sendConnectPacket(r)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(r){this.packet({type:pa.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},r):r})}onerror(r){this.connected||this.emitReserved("connect_error",r)}onclose(r,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",r,e),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(r=>{if(!this.sendBuffer.some(t=>String(t.id)===r)){const t=this.acks[r];delete this.acks[r],t.withError&&t.call(this,new Error("socket has been disconnected"))}})}onpacket(r){if(r.nsp===this.nsp)switch(r.type){case pa.CONNECT:r.data&&r.data.sid?this.onconnect(r.data.sid,r.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case pa.EVENT:case pa.BINARY_EVENT:this.onevent(r);break;case pa.ACK:case pa.BINARY_ACK:this.onack(r);break;case pa.DISCONNECT:this.ondisconnect();break;case pa.CONNECT_ERROR:this.destroy();const t=new Error(r.data.message);t.data=r.data.data,this.emitReserved("connect_error",t);break}}onevent(r){const e=r.data||[];r.id!=null&&e.push(this.ack(r.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(r){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const t of e)t.apply(this,r)}super.emit.apply(this,r),this._pid&&r.length&&typeof r[r.length-1]=="string"&&(this._lastOffset=r[r.length-1])}ack(r){const e=this;let t=!1;return function(...s){t||(t=!0,e.packet({type:pa.ACK,id:r,data:s}))}}onack(r){const e=this.acks[r.id];typeof e=="function"&&(delete this.acks[r.id],e.withError&&r.data.unshift(null),e.apply(this,r.data))}onconnect(r,e){this.id=r,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(r=>this.emitEvent(r)),this.receiveBuffer=[],this.sendBuffer.forEach(r=>{this.notifyOutgoingListeners(r),this.packet(r)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(r=>r()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:pa.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(r){return this.flags.compress=r,this}get volatile(){return this.flags.volatile=!0,this}timeout(r){return this.flags.timeout=r,this}onAny(r){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(r),this}prependAny(r){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(r),this}offAny(r){if(!this._anyListeners)return this;if(r){const e=this._anyListeners;for(let t=0;t<e.length;t++)if(r===e[t])return e.splice(t,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(r){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(r),this}prependAnyOutgoing(r){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(r),this}offAnyOutgoing(r){if(!this._anyOutgoingListeners)return this;if(r){const e=this._anyOutgoingListeners;for(let t=0;t<e.length;t++)if(r===e[t])return e.splice(t,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(r){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const t of e)t.apply(this,r.data)}}}function am(a){a=a||{},this.ms=a.min||100,this.max=a.max||1e4,this.factor=a.factor||2,this.jitter=a.jitter>0&&a.jitter<=1?a.jitter:0,this.attempts=0}am.prototype.duration=function(){var a=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var r=Math.random(),e=Math.floor(r*this.jitter*a);a=(Math.floor(r*10)&1)==0?a-e:a+e}return Math.min(a,this.max)|0};am.prototype.reset=function(){this.attempts=0};am.prototype.setMin=function(a){this.ms=a};am.prototype.setMax=function(a){this.max=a};am.prototype.setJitter=function(a){this.jitter=a};class V1 extends eo{constructor(r,e){var t;super(),this.nsps={},this.subs=[],r&&typeof r=="object"&&(e=r,r=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,kb(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((t=e.randomizationFactor)!==null&&t!==void 0?t:.5),this.backoff=new am({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=r;const s=e.parser||f7;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(r){return arguments.length?(this._reconnection=!!r,r||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(r){return r===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=r,this)}reconnectionDelay(r){var e;return r===void 0?this._reconnectionDelay:(this._reconnectionDelay=r,(e=this.backoff)===null||e===void 0||e.setMin(r),this)}randomizationFactor(r){var e;return r===void 0?this._randomizationFactor:(this._randomizationFactor=r,(e=this.backoff)===null||e===void 0||e.setJitter(r),this)}reconnectionDelayMax(r){var e;return r===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=r,(e=this.backoff)===null||e===void 0||e.setMax(r),this)}timeout(r){return arguments.length?(this._timeout=r,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(r){if(~this._readyState.indexOf("open"))return this;this.engine=new t7(this.uri,this.opts);const e=this.engine,t=this;this._readyState="opening",this.skipReconnect=!1;const s=Jl(e,"open",function(){t.onopen(),r&&r()}),o=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),r?r(l):this.maybeReconnectOnOpen()},i=Jl(e,"error",o);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{s(),o(new Error("timeout")),e.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(s),this.subs.push(i),this}connect(r){return this.open(r)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const r=this.engine;this.subs.push(Jl(r,"ping",this.onping.bind(this)),Jl(r,"data",this.ondata.bind(this)),Jl(r,"error",this.onerror.bind(this)),Jl(r,"close",this.onclose.bind(this)),Jl(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(r){try{this.decoder.add(r)}catch(e){this.onclose("parse error",e)}}ondecoded(r){Nb(()=>{this.emitReserved("packet",r)},this.setTimeoutFn)}onerror(r){this.emitReserved("error",r)}socket(r,e){let t=this.nsps[r];return t?this._autoConnect&&!t.active&&t.connect():(t=new j4(this,r,e),this.nsps[r]=t),t}_destroy(r){const e=Object.keys(this.nsps);for(const t of e)if(this.nsps[t].active)return;this._close()}_packet(r){const e=this.encoder.encode(r);for(let t=0;t<e.length;t++)this.engine.write(e[t],r.options)}cleanup(){this.subs.forEach(r=>r()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(r,e){var t;this.cleanup(),(t=this.engine)===null||t===void 0||t.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",r,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const r=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const t=this.setTimeoutFn(()=>{r.skipReconnect||(this.emitReserved("reconnect_attempt",r.backoff.attempts),!r.skipReconnect&&r.open(s=>{s?(r._reconnecting=!1,r.reconnect(),this.emitReserved("reconnect_error",s)):r.onreconnect()}))},e);this.opts.autoUnref&&t.unref(),this.subs.push(()=>{this.clearTimeoutFn(t)})}}onreconnect(){const r=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",r)}}const wg={};function L0(a,r){typeof a=="object"&&(r=a,a=void 0),r=r||{};const e=r7(a,r.path||"/socket.io"),t=e.source,s=e.id,o=e.path,i=wg[s]&&o in wg[s].nsps,l=r.forceNew||r["force new connection"]||r.multiplex===!1||i;let c;return l?c=new V1(t,r):(wg[s]||(wg[s]=new V1(t,r)),c=wg[s]),e.query&&!r.query&&(r.query=e.queryKey),c.socket(e.path,r)}Object.assign(L0,{Manager:V1,Socket:j4,io:L0,connect:L0});var ev=(a=>(a.Connect="connect",a.Disconnect="disconnect",a.HireDeveloper="hireDeveloper",a.Welcome="welcome",a.EndMeeting="endMeeting",a.DeveloperAssigned="developerAssigned",a))(ev||{});const C4=f.createContext(void 0),h7=()=>{const a=f.useContext(C4);if(!a)throw new Error("useSocket must be used within a SocketProvider");return a},m7=({children:a})=>{const[r,e]=f.useState(null),[t,s]=f.useState(!1);f.useEffect(()=>{const l=localStorage.getItem("accessToken");if(!l)return;const c=L0("https://backend.ziplofy.com",{autoConnect:!0,reconnection:!0,reconnectionDelay:1e3,reconnectionAttempts:5,timeout:2e4,extraHeaders:{token:l}});return c.on("connect",()=>{console.log("Socket connected:",c.id),s(!0)}),c.on("disconnect",d=>{console.log("Socket disconnected:",d),s(!1)}),c.on(ev.HireDeveloper,d=>{yr.success(d.message)}),c.on(ev.DeveloperAssigned,d=>{yr.success(d.message)}),e(c),()=>{c.close()}},[]);const i={socket:r,isConnected:t,getSocket:()=>r};return n.jsx(C4.Provider,{value:i,children:a})};function S4(a,r){return function(){return a.apply(r,arguments)}}const{toString:g7}=Object.prototype,{getPrototypeOf:NS}=Object,{iterator:_b,toStringTag:N4}=Symbol,Eb=(a=>r=>{const e=g7.call(r);return a[e]||(a[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),cc=a=>(a=a.toLowerCase(),r=>Eb(r)===a),Tb=a=>r=>typeof r===a,{isArray:sm}=Array,Wh=Tb("undefined");function Ly(a){return a!==null&&!Wh(a)&&a.constructor!==null&&!Wh(a.constructor)&&Ei(a.constructor.isBuffer)&&a.constructor.isBuffer(a)}const k4=cc("ArrayBuffer");function y7(a){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(a):r=a&&a.buffer&&k4(a.buffer),r}const x7=Tb("string"),Ei=Tb("function"),_4=Tb("number"),Dy=a=>a!==null&&typeof a=="object",v7=a=>a===!0||a===!1,D0=a=>{if(Eb(a)!=="object")return!1;const r=NS(a);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(N4 in a)&&!(_b in a)},b7=a=>{if(!Dy(a)||Ly(a))return!1;try{return Object.keys(a).length===0&&Object.getPrototypeOf(a)===Object.prototype}catch{return!1}},w7=cc("Date"),j7=cc("File"),C7=cc("Blob"),S7=cc("FileList"),N7=a=>Dy(a)&&Ei(a.pipe),k7=a=>{let r;return a&&(typeof FormData=="function"&&a instanceof FormData||Ei(a.append)&&((r=Eb(a))==="formdata"||r==="object"&&Ei(a.toString)&&a.toString()==="[object FormData]"))},_7=cc("URLSearchParams"),[E7,T7,O7,P7]=["ReadableStream","Request","Response","Headers"].map(cc),A7=a=>a.trim?a.trim():a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Fy(a,r,{allOwnKeys:e=!1}={}){if(a===null||typeof a>"u")return;let t,s;if(typeof a!="object"&&(a=[a]),sm(a))for(t=0,s=a.length;t<s;t++)r.call(null,a[t],t,a);else{if(Ly(a))return;const o=e?Object.getOwnPropertyNames(a):Object.keys(a),i=o.length;let l;for(t=0;t<i;t++)l=o[t],r.call(null,a[l],l,a)}}function E4(a,r){if(Ly(a))return null;r=r.toLowerCase();const e=Object.keys(a);let t=e.length,s;for(;t-- >0;)if(s=e[t],r===s.toLowerCase())return s;return null}const qf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,T4=a=>!Wh(a)&&a!==qf;function W1(){const{caseless:a,skipUndefined:r}=T4(this)&&this||{},e={},t=(s,o)=>{const i=a&&E4(e,o)||o;D0(e[i])&&D0(s)?e[i]=W1(e[i],s):D0(s)?e[i]=W1({},s):sm(s)?e[i]=s.slice():(!r||!Wh(s))&&(e[i]=s)};for(let s=0,o=arguments.length;s<o;s++)arguments[s]&&Fy(arguments[s],t);return e}const M7=(a,r,e,{allOwnKeys:t}={})=>(Fy(r,(s,o)=>{e&&Ei(s)?Object.defineProperty(a,o,{value:S4(s,e),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(a,o,{value:s,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:t}),a),I7=a=>(a.charCodeAt(0)===65279&&(a=a.slice(1)),a),R7=(a,r,e,t)=>{a.prototype=Object.create(r.prototype,t),Object.defineProperty(a.prototype,"constructor",{value:a,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(a,"super",{value:r.prototype}),e&&Object.assign(a.prototype,e)},L7=(a,r,e,t)=>{let s,o,i;const l={};if(r=r||{},a==null)return r;do{for(s=Object.getOwnPropertyNames(a),o=s.length;o-- >0;)i=s[o],(!t||t(i,a,r))&&!l[i]&&(r[i]=a[i],l[i]=!0);a=e!==!1&&NS(a)}while(a&&(!e||e(a,r))&&a!==Object.prototype);return r},D7=(a,r,e)=>{a=String(a),(e===void 0||e>a.length)&&(e=a.length),e-=r.length;const t=a.indexOf(r,e);return t!==-1&&t===e},F7=a=>{if(!a)return null;if(sm(a))return a;let r=a.length;if(!_4(r))return null;const e=new Array(r);for(;r-- >0;)e[r]=a[r];return e},B7=(a=>r=>a&&r instanceof a)(typeof Uint8Array<"u"&&NS(Uint8Array)),z7=(a,r)=>{const t=(a&&a[_b]).call(a);let s;for(;(s=t.next())&&!s.done;){const o=s.value;r.call(a,o[0],o[1])}},U7=(a,r)=>{let e;const t=[];for(;(e=a.exec(r))!==null;)t.push(e);return t},$7=cc("HTMLFormElement"),V7=a=>a.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,s){return t.toUpperCase()+s}),Bk=(({hasOwnProperty:a})=>(r,e)=>a.call(r,e))(Object.prototype),W7=cc("RegExp"),O4=(a,r)=>{const e=Object.getOwnPropertyDescriptors(a),t={};Fy(e,(s,o)=>{let i;(i=r(s,o,a))!==!1&&(t[o]=i||s)}),Object.defineProperties(a,t)},H7=a=>{O4(a,(r,e)=>{if(Ei(a)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const t=a[e];if(Ei(t)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},q7=(a,r)=>{const e={},t=s=>{s.forEach(o=>{e[o]=!0})};return sm(a)?t(a):t(String(a).split(r)),e},G7=()=>{},K7=(a,r)=>a!=null&&Number.isFinite(a=+a)?a:r;function Y7(a){return!!(a&&Ei(a.append)&&a[N4]==="FormData"&&a[_b])}const Z7=a=>{const r=new Array(10),e=(t,s)=>{if(Dy(t)){if(r.indexOf(t)>=0)return;if(Ly(t))return t;if(!("toJSON"in t)){r[s]=t;const o=sm(t)?[]:{};return Fy(t,(i,l)=>{const c=e(i,s+1);!Wh(c)&&(o[l]=c)}),r[s]=void 0,o}}return t};return e(a,0)},X7=cc("AsyncFunction"),Q7=a=>a&&(Dy(a)||Ei(a))&&Ei(a.then)&&Ei(a.catch),P4=((a,r)=>a?setImmediate:r?((e,t)=>(qf.addEventListener("message",({source:s,data:o})=>{s===qf&&o===e&&t.length&&t.shift()()},!1),s=>{t.push(s),qf.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",Ei(qf.postMessage)),J7=typeof queueMicrotask<"u"?queueMicrotask.bind(qf):typeof process<"u"&&process.nextTick||P4,e8=a=>a!=null&&Ei(a[_b]),Kt={isArray:sm,isArrayBuffer:k4,isBuffer:Ly,isFormData:k7,isArrayBufferView:y7,isString:x7,isNumber:_4,isBoolean:v7,isObject:Dy,isPlainObject:D0,isEmptyObject:b7,isReadableStream:E7,isRequest:T7,isResponse:O7,isHeaders:P7,isUndefined:Wh,isDate:w7,isFile:j7,isBlob:C7,isRegExp:W7,isFunction:Ei,isStream:N7,isURLSearchParams:_7,isTypedArray:B7,isFileList:S7,forEach:Fy,merge:W1,extend:M7,trim:A7,stripBOM:I7,inherits:R7,toFlatObject:L7,kindOf:Eb,kindOfTest:cc,endsWith:D7,toArray:F7,forEachEntry:z7,matchAll:U7,isHTMLForm:$7,hasOwnProperty:Bk,hasOwnProp:Bk,reduceDescriptors:O4,freezeMethods:H7,toObjectSet:q7,toCamelCase:V7,noop:G7,toFiniteNumber:K7,findKey:E4,global:qf,isContextDefined:T4,isSpecCompliantForm:Y7,toJSONObject:Z7,isAsyncFn:X7,isThenable:Q7,setImmediate:P4,asap:J7,isIterable:e8};let An=class A4 extends Error{static from(r,e,t,s,o,i){const l=new A4(r.message,e||r.code,t,s,o);return l.cause=r,l.name=r.name,i&&Object.assign(l,i),l}constructor(r,e,t,s,o){super(r),this.name="AxiosError",this.isAxiosError=!0,e&&(this.code=e),t&&(this.config=t),s&&(this.request=s),o&&(this.response=o,this.status=o.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Kt.toJSONObject(this.config),code:this.code,status:this.status}}};An.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";An.ERR_BAD_OPTION="ERR_BAD_OPTION";An.ECONNABORTED="ECONNABORTED";An.ETIMEDOUT="ETIMEDOUT";An.ERR_NETWORK="ERR_NETWORK";An.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";An.ERR_DEPRECATED="ERR_DEPRECATED";An.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";An.ERR_BAD_REQUEST="ERR_BAD_REQUEST";An.ERR_CANCELED="ERR_CANCELED";An.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";An.ERR_INVALID_URL="ERR_INVALID_URL";const t8=null;function H1(a){return Kt.isPlainObject(a)||Kt.isArray(a)}function M4(a){return Kt.endsWith(a,"[]")?a.slice(0,-2):a}function zk(a,r,e){return a?a.concat(r).map(function(s,o){return s=M4(s),!e&&o?"["+s+"]":s}).join(e?".":""):r}function r8(a){return Kt.isArray(a)&&!a.some(H1)}const n8=Kt.toFlatObject(Kt,{},null,function(r){return/^is[A-Z]/.test(r)});function Ob(a,r,e){if(!Kt.isObject(a))throw new TypeError("target must be an object");r=r||new FormData,e=Kt.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,j){return!Kt.isUndefined(j[v])});const t=e.metaTokens,s=e.visitor||h,o=e.dots,i=e.indexes,c=(e.Blob||typeof Blob<"u"&&Blob)&&Kt.isSpecCompliantForm(r);if(!Kt.isFunction(s))throw new TypeError("visitor must be a function");function d(b){if(b===null)return"";if(Kt.isDate(b))return b.toISOString();if(Kt.isBoolean(b))return b.toString();if(!c&&Kt.isBlob(b))throw new An("Blob is not supported. Use a Buffer instead.");return Kt.isArrayBuffer(b)||Kt.isTypedArray(b)?c&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function h(b,v,j){let S=b;if(b&&!j&&typeof b=="object"){if(Kt.endsWith(v,"{}"))v=t?v:v.slice(0,-2),b=JSON.stringify(b);else if(Kt.isArray(b)&&r8(b)||(Kt.isFileList(b)||Kt.endsWith(v,"[]"))&&(S=Kt.toArray(b)))return v=M4(v),S.forEach(function(N,P){!(Kt.isUndefined(N)||N===null)&&r.append(i===!0?zk([v],P,o):i===null?v:v+"[]",d(N))}),!1}return H1(b)?!0:(r.append(zk(j,v,o),d(b)),!1)}const m=[],y=Object.assign(n8,{defaultVisitor:h,convertValue:d,isVisitable:H1});function x(b,v){if(!Kt.isUndefined(b)){if(m.indexOf(b)!==-1)throw Error("Circular reference detected in "+v.join("."));m.push(b),Kt.forEach(b,function(S,k){(!(Kt.isUndefined(S)||S===null)&&s.call(r,S,Kt.isString(k)?k.trim():k,v,y))===!0&&x(S,v?v.concat(k):[k])}),m.pop()}}if(!Kt.isObject(a))throw new TypeError("data must be an object");return x(a),r}function Uk(a){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(a).replace(/[!'()~]|%20|%00/g,function(t){return r[t]})}function kS(a,r){this._pairs=[],a&&Ob(a,this,r)}const I4=kS.prototype;I4.append=function(r,e){this._pairs.push([r,e])};I4.toString=function(r){const e=r?function(t){return r.call(this,t,Uk)}:Uk;return this._pairs.map(function(s){return e(s[0])+"="+e(s[1])},"").join("&")};function a8(a){return encodeURIComponent(a).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function R4(a,r,e){if(!r)return a;const t=e&&e.encode||a8,s=Kt.isFunction(e)?{serialize:e}:e,o=s&&s.serialize;let i;if(o?i=o(r,s):i=Kt.isURLSearchParams(r)?r.toString():new kS(r,s).toString(t),i){const l=a.indexOf("#");l!==-1&&(a=a.slice(0,l)),a+=(a.indexOf("?")===-1?"?":"&")+i}return a}class $k{constructor(){this.handlers=[]}use(r,e,t){return this.handlers.push({fulfilled:r,rejected:e,synchronous:t?t.synchronous:!1,runWhen:t?t.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){Kt.forEach(this.handlers,function(t){t!==null&&r(t)})}}const L4={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},s8=typeof URLSearchParams<"u"?URLSearchParams:kS,o8=typeof FormData<"u"?FormData:null,i8=typeof Blob<"u"?Blob:null,l8={isBrowser:!0,classes:{URLSearchParams:s8,FormData:o8,Blob:i8},protocols:["http","https","file","blob","url","data"]},_S=typeof window<"u"&&typeof document<"u",q1=typeof navigator=="object"&&navigator||void 0,c8=_S&&(!q1||["ReactNative","NativeScript","NS"].indexOf(q1.product)<0),d8=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",u8=_S&&window.location.href||"http://localhost",f8=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:_S,hasStandardBrowserEnv:c8,hasStandardBrowserWebWorkerEnv:d8,navigator:q1,origin:u8},Symbol.toStringTag,{value:"Module"})),qo={...f8,...l8};function p8(a,r){return Ob(a,new qo.classes.URLSearchParams,{visitor:function(e,t,s,o){return qo.isNode&&Kt.isBuffer(e)?(this.append(t,e.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...r})}function h8(a){return Kt.matchAll(/\w+|\[(\w*)]/g,a).map(r=>r[0]==="[]"?"":r[1]||r[0])}function m8(a){const r={},e=Object.keys(a);let t;const s=e.length;let o;for(t=0;t<s;t++)o=e[t],r[o]=a[o];return r}function D4(a){function r(e,t,s,o){let i=e[o++];if(i==="__proto__")return!0;const l=Number.isFinite(+i),c=o>=e.length;return i=!i&&Kt.isArray(s)?s.length:i,c?(Kt.hasOwnProp(s,i)?s[i]=[s[i],t]:s[i]=t,!l):((!s[i]||!Kt.isObject(s[i]))&&(s[i]=[]),r(e,t,s[i],o)&&Kt.isArray(s[i])&&(s[i]=m8(s[i])),!l)}if(Kt.isFormData(a)&&Kt.isFunction(a.entries)){const e={};return Kt.forEachEntry(a,(t,s)=>{r(h8(t),s,e,0)}),e}return null}function g8(a,r,e){if(Kt.isString(a))try{return(r||JSON.parse)(a),Kt.trim(a)}catch(t){if(t.name!=="SyntaxError")throw t}return(e||JSON.stringify)(a)}const By={transitional:L4,adapter:["xhr","http","fetch"],transformRequest:[function(r,e){const t=e.getContentType()||"",s=t.indexOf("application/json")>-1,o=Kt.isObject(r);if(o&&Kt.isHTMLForm(r)&&(r=new FormData(r)),Kt.isFormData(r))return s?JSON.stringify(D4(r)):r;if(Kt.isArrayBuffer(r)||Kt.isBuffer(r)||Kt.isStream(r)||Kt.isFile(r)||Kt.isBlob(r)||Kt.isReadableStream(r))return r;if(Kt.isArrayBufferView(r))return r.buffer;if(Kt.isURLSearchParams(r))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let l;if(o){if(t.indexOf("application/x-www-form-urlencoded")>-1)return p8(r,this.formSerializer).toString();if((l=Kt.isFileList(r))||t.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Ob(l?{"files[]":r}:r,c&&new c,this.formSerializer)}}return o||s?(e.setContentType("application/json",!1),g8(r)):r}],transformResponse:[function(r){const e=this.transitional||By.transitional,t=e&&e.forcedJSONParsing,s=this.responseType==="json";if(Kt.isResponse(r)||Kt.isReadableStream(r))return r;if(r&&Kt.isString(r)&&(t&&!this.responseType||s)){const i=!(e&&e.silentJSONParsing)&&s;try{return JSON.parse(r,this.parseReviver)}catch(l){if(i)throw l.name==="SyntaxError"?An.from(l,An.ERR_BAD_RESPONSE,this,null,this.response):l}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:qo.classes.FormData,Blob:qo.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Kt.forEach(["delete","get","head","post","put","patch"],a=>{By.headers[a]={}});const y8=Kt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),x8=a=>{const r={};let e,t,s;return a&&a.split(`
`).forEach(function(i){s=i.indexOf(":"),e=i.substring(0,s).trim().toLowerCase(),t=i.substring(s+1).trim(),!(!e||r[e]&&y8[e])&&(e==="set-cookie"?r[e]?r[e].push(t):r[e]=[t]:r[e]=r[e]?r[e]+", "+t:t)}),r},Vk=Symbol("internals");function jg(a){return a&&String(a).trim().toLowerCase()}function F0(a){return a===!1||a==null?a:Kt.isArray(a)?a.map(F0):String(a)}function v8(a){const r=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let t;for(;t=e.exec(a);)r[t[1]]=t[2];return r}const b8=a=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(a.trim());function gj(a,r,e,t,s){if(Kt.isFunction(t))return t.call(this,r,e);if(s&&(r=e),!!Kt.isString(r)){if(Kt.isString(t))return r.indexOf(t)!==-1;if(Kt.isRegExp(t))return t.test(r)}}function w8(a){return a.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,e,t)=>e.toUpperCase()+t)}function j8(a,r){const e=Kt.toCamelCase(" "+r);["get","set","has"].forEach(t=>{Object.defineProperty(a,t+e,{value:function(s,o,i){return this[t].call(this,r,s,o,i)},configurable:!0})})}let Ti=class{constructor(r){r&&this.set(r)}set(r,e,t){const s=this;function o(l,c,d){const h=jg(c);if(!h)throw new Error("header name must be a non-empty string");const m=Kt.findKey(s,h);(!m||s[m]===void 0||d===!0||d===void 0&&s[m]!==!1)&&(s[m||c]=F0(l))}const i=(l,c)=>Kt.forEach(l,(d,h)=>o(d,h,c));if(Kt.isPlainObject(r)||r instanceof this.constructor)i(r,e);else if(Kt.isString(r)&&(r=r.trim())&&!b8(r))i(x8(r),e);else if(Kt.isObject(r)&&Kt.isIterable(r)){let l={},c,d;for(const h of r){if(!Kt.isArray(h))throw TypeError("Object iterator must return a key-value pair");l[d=h[0]]=(c=l[d])?Kt.isArray(c)?[...c,h[1]]:[c,h[1]]:h[1]}i(l,e)}else r!=null&&o(e,r,t);return this}get(r,e){if(r=jg(r),r){const t=Kt.findKey(this,r);if(t){const s=this[t];if(!e)return s;if(e===!0)return v8(s);if(Kt.isFunction(e))return e.call(this,s,t);if(Kt.isRegExp(e))return e.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,e){if(r=jg(r),r){const t=Kt.findKey(this,r);return!!(t&&this[t]!==void 0&&(!e||gj(this,this[t],t,e)))}return!1}delete(r,e){const t=this;let s=!1;function o(i){if(i=jg(i),i){const l=Kt.findKey(t,i);l&&(!e||gj(t,t[l],l,e))&&(delete t[l],s=!0)}}return Kt.isArray(r)?r.forEach(o):o(r),s}clear(r){const e=Object.keys(this);let t=e.length,s=!1;for(;t--;){const o=e[t];(!r||gj(this,this[o],o,r,!0))&&(delete this[o],s=!0)}return s}normalize(r){const e=this,t={};return Kt.forEach(this,(s,o)=>{const i=Kt.findKey(t,o);if(i){e[i]=F0(s),delete e[o];return}const l=r?w8(o):String(o).trim();l!==o&&delete e[o],e[l]=F0(s),t[l]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const e=Object.create(null);return Kt.forEach(this,(t,s)=>{t!=null&&t!==!1&&(e[s]=r&&Kt.isArray(t)?t.join(", "):t)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,e])=>r+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...e){const t=new this(r);return e.forEach(s=>t.set(s)),t}static accessor(r){const t=(this[Vk]=this[Vk]={accessors:{}}).accessors,s=this.prototype;function o(i){const l=jg(i);t[l]||(j8(s,i),t[l]=!0)}return Kt.isArray(r)?r.forEach(o):o(r),this}};Ti.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Kt.reduceDescriptors(Ti.prototype,({value:a},r)=>{let e=r[0].toUpperCase()+r.slice(1);return{get:()=>a,set(t){this[e]=t}}});Kt.freezeMethods(Ti);function yj(a,r){const e=this||By,t=r||e,s=Ti.from(t.headers);let o=t.data;return Kt.forEach(a,function(l){o=l.call(e,o,s.normalize(),r?r.status:void 0)}),s.normalize(),o}function F4(a){return!!(a&&a.__CANCEL__)}let zy=class extends An{constructor(r,e,t){super(r??"canceled",An.ERR_CANCELED,e,t),this.name="CanceledError",this.__CANCEL__=!0}};function B4(a,r,e){const t=e.config.validateStatus;!e.status||!t||t(e.status)?a(e):r(new An("Request failed with status code "+e.status,[An.ERR_BAD_REQUEST,An.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function C8(a){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(a);return r&&r[1]||""}function S8(a,r){a=a||10;const e=new Array(a),t=new Array(a);let s=0,o=0,i;return r=r!==void 0?r:1e3,function(c){const d=Date.now(),h=t[o];i||(i=d),e[s]=c,t[s]=d;let m=o,y=0;for(;m!==s;)y+=e[m++],m=m%a;if(s=(s+1)%a,s===o&&(o=(o+1)%a),d-i<r)return;const x=h&&d-h;return x?Math.round(y*1e3/x):void 0}}function N8(a,r){let e=0,t=1e3/r,s,o;const i=(d,h=Date.now())=>{e=h,s=null,o&&(clearTimeout(o),o=null),a(...d)};return[(...d)=>{const h=Date.now(),m=h-e;m>=t?i(d,h):(s=d,o||(o=setTimeout(()=>{o=null,i(s)},t-m)))},()=>s&&i(s)]}const tv=(a,r,e=3)=>{let t=0;const s=S8(50,250);return N8(o=>{const i=o.loaded,l=o.lengthComputable?o.total:void 0,c=i-t,d=s(c),h=i<=l;t=i;const m={loaded:i,total:l,progress:l?i/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&h?(l-i)/d:void 0,event:o,lengthComputable:l!=null,[r?"download":"upload"]:!0};a(m)},e)},Wk=(a,r)=>{const e=a!=null;return[t=>r[0]({lengthComputable:e,total:a,loaded:t}),r[1]]},Hk=a=>(...r)=>Kt.asap(()=>a(...r)),k8=qo.hasStandardBrowserEnv?((a,r)=>e=>(e=new URL(e,qo.origin),a.protocol===e.protocol&&a.host===e.host&&(r||a.port===e.port)))(new URL(qo.origin),qo.navigator&&/(msie|trident)/i.test(qo.navigator.userAgent)):()=>!0,_8=qo.hasStandardBrowserEnv?{write(a,r,e,t,s,o,i){if(typeof document>"u")return;const l=[`${a}=${encodeURIComponent(r)}`];Kt.isNumber(e)&&l.push(`expires=${new Date(e).toUTCString()}`),Kt.isString(t)&&l.push(`path=${t}`),Kt.isString(s)&&l.push(`domain=${s}`),o===!0&&l.push("secure"),Kt.isString(i)&&l.push(`SameSite=${i}`),document.cookie=l.join("; ")},read(a){if(typeof document>"u")return null;const r=document.cookie.match(new RegExp("(?:^|; )"+a+"=([^;]*)"));return r?decodeURIComponent(r[1]):null},remove(a){this.write(a,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function E8(a){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(a)}function T8(a,r){return r?a.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):a}function z4(a,r,e){let t=!E8(r);return a&&(t||e==!1)?T8(a,r):r}const qk=a=>a instanceof Ti?{...a}:a;function sp(a,r){r=r||{};const e={};function t(d,h,m,y){return Kt.isPlainObject(d)&&Kt.isPlainObject(h)?Kt.merge.call({caseless:y},d,h):Kt.isPlainObject(h)?Kt.merge({},h):Kt.isArray(h)?h.slice():h}function s(d,h,m,y){if(Kt.isUndefined(h)){if(!Kt.isUndefined(d))return t(void 0,d,m,y)}else return t(d,h,m,y)}function o(d,h){if(!Kt.isUndefined(h))return t(void 0,h)}function i(d,h){if(Kt.isUndefined(h)){if(!Kt.isUndefined(d))return t(void 0,d)}else return t(void 0,h)}function l(d,h,m){if(m in r)return t(d,h);if(m in a)return t(void 0,d)}const c={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:l,headers:(d,h,m)=>s(qk(d),qk(h),m,!0)};return Kt.forEach(Object.keys({...a,...r}),function(h){const m=c[h]||s,y=m(a[h],r[h],h);Kt.isUndefined(y)&&m!==l||(e[h]=y)}),e}const U4=a=>{const r=sp({},a);let{data:e,withXSRFToken:t,xsrfHeaderName:s,xsrfCookieName:o,headers:i,auth:l}=r;if(r.headers=i=Ti.from(i),r.url=R4(z4(r.baseURL,r.url,r.allowAbsoluteUrls),a.params,a.paramsSerializer),l&&i.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Kt.isFormData(e)){if(qo.hasStandardBrowserEnv||qo.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(Kt.isFunction(e.getHeaders)){const c=e.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([h,m])=>{d.includes(h.toLowerCase())&&i.set(h,m)})}}if(qo.hasStandardBrowserEnv&&(t&&Kt.isFunction(t)&&(t=t(r)),t||t!==!1&&k8(r.url))){const c=s&&o&&_8.read(o);c&&i.set(s,c)}return r},O8=typeof XMLHttpRequest<"u",P8=O8&&function(a){return new Promise(function(e,t){const s=U4(a);let o=s.data;const i=Ti.from(s.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=s,h,m,y,x,b;function v(){x&&x(),b&&b(),s.cancelToken&&s.cancelToken.unsubscribe(h),s.signal&&s.signal.removeEventListener("abort",h)}let j=new XMLHttpRequest;j.open(s.method.toUpperCase(),s.url,!0),j.timeout=s.timeout;function S(){if(!j)return;const N=Ti.from("getAllResponseHeaders"in j&&j.getAllResponseHeaders()),R={data:!l||l==="text"||l==="json"?j.responseText:j.response,status:j.status,statusText:j.statusText,headers:N,config:a,request:j};B4(function(z){e(z),v()},function(z){t(z),v()},R),j=null}"onloadend"in j?j.onloadend=S:j.onreadystatechange=function(){!j||j.readyState!==4||j.status===0&&!(j.responseURL&&j.responseURL.indexOf("file:")===0)||setTimeout(S)},j.onabort=function(){j&&(t(new An("Request aborted",An.ECONNABORTED,a,j)),j=null)},j.onerror=function(P){const R=P&&P.message?P.message:"Network Error",F=new An(R,An.ERR_NETWORK,a,j);F.event=P||null,t(F),j=null},j.ontimeout=function(){let P=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const R=s.transitional||L4;s.timeoutErrorMessage&&(P=s.timeoutErrorMessage),t(new An(P,R.clarifyTimeoutError?An.ETIMEDOUT:An.ECONNABORTED,a,j)),j=null},o===void 0&&i.setContentType(null),"setRequestHeader"in j&&Kt.forEach(i.toJSON(),function(P,R){j.setRequestHeader(R,P)}),Kt.isUndefined(s.withCredentials)||(j.withCredentials=!!s.withCredentials),l&&l!=="json"&&(j.responseType=s.responseType),d&&([y,b]=tv(d,!0),j.addEventListener("progress",y)),c&&j.upload&&([m,x]=tv(c),j.upload.addEventListener("progress",m),j.upload.addEventListener("loadend",x)),(s.cancelToken||s.signal)&&(h=N=>{j&&(t(!N||N.type?new zy(null,a,j):N),j.abort(),j=null)},s.cancelToken&&s.cancelToken.subscribe(h),s.signal&&(s.signal.aborted?h():s.signal.addEventListener("abort",h)));const k=C8(s.url);if(k&&qo.protocols.indexOf(k)===-1){t(new An("Unsupported protocol "+k+":",An.ERR_BAD_REQUEST,a));return}j.send(o||null)})},A8=(a,r)=>{const{length:e}=a=a?a.filter(Boolean):[];if(r||e){let t=new AbortController,s;const o=function(d){if(!s){s=!0,l();const h=d instanceof Error?d:this.reason;t.abort(h instanceof An?h:new zy(h instanceof Error?h.message:h))}};let i=r&&setTimeout(()=>{i=null,o(new An(`timeout of ${r}ms exceeded`,An.ETIMEDOUT))},r);const l=()=>{a&&(i&&clearTimeout(i),i=null,a.forEach(d=>{d.unsubscribe?d.unsubscribe(o):d.removeEventListener("abort",o)}),a=null)};a.forEach(d=>d.addEventListener("abort",o));const{signal:c}=t;return c.unsubscribe=()=>Kt.asap(l),c}},M8=function*(a,r){let e=a.byteLength;if(e<r){yield a;return}let t=0,s;for(;t<e;)s=t+r,yield a.slice(t,s),t=s},I8=async function*(a,r){for await(const e of R8(a))yield*M8(e,r)},R8=async function*(a){if(a[Symbol.asyncIterator]){yield*a;return}const r=a.getReader();try{for(;;){const{done:e,value:t}=await r.read();if(e)break;yield t}}finally{await r.cancel()}},Gk=(a,r,e,t)=>{const s=I8(a,r);let o=0,i,l=c=>{i||(i=!0,t&&t(c))};return new ReadableStream({async pull(c){try{const{done:d,value:h}=await s.next();if(d){l(),c.close();return}let m=h.byteLength;if(e){let y=o+=m;e(y)}c.enqueue(new Uint8Array(h))}catch(d){throw l(d),d}},cancel(c){return l(c),s.return()}},{highWaterMark:2})},Kk=64*1024,{isFunction:l0}=Kt,L8=(({Request:a,Response:r})=>({Request:a,Response:r}))(Kt.global),{ReadableStream:Yk,TextEncoder:Zk}=Kt.global,Xk=(a,...r)=>{try{return!!a(...r)}catch{return!1}},D8=a=>{a=Kt.merge.call({skipUndefined:!0},L8,a);const{fetch:r,Request:e,Response:t}=a,s=r?l0(r):typeof fetch=="function",o=l0(e),i=l0(t);if(!s)return!1;const l=s&&l0(Yk),c=s&&(typeof Zk=="function"?(b=>v=>b.encode(v))(new Zk):async b=>new Uint8Array(await new e(b).arrayBuffer())),d=o&&l&&Xk(()=>{let b=!1;const v=new e(qo.origin,{body:new Yk,method:"POST",get duplex(){return b=!0,"half"}}).headers.has("Content-Type");return b&&!v}),h=i&&l&&Xk(()=>Kt.isReadableStream(new t("").body)),m={stream:h&&(b=>b.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(b=>{!m[b]&&(m[b]=(v,j)=>{let S=v&&v[b];if(S)return S.call(v);throw new An(`Response type '${b}' is not supported`,An.ERR_NOT_SUPPORT,j)})});const y=async b=>{if(b==null)return 0;if(Kt.isBlob(b))return b.size;if(Kt.isSpecCompliantForm(b))return(await new e(qo.origin,{method:"POST",body:b}).arrayBuffer()).byteLength;if(Kt.isArrayBufferView(b)||Kt.isArrayBuffer(b))return b.byteLength;if(Kt.isURLSearchParams(b)&&(b=b+""),Kt.isString(b))return(await c(b)).byteLength},x=async(b,v)=>{const j=Kt.toFiniteNumber(b.getContentLength());return j??y(v)};return async b=>{let{url:v,method:j,data:S,signal:k,cancelToken:N,timeout:P,onDownloadProgress:R,onUploadProgress:F,responseType:z,headers:H,withCredentials:V="same-origin",fetchOptions:W}=U4(b),Z=r||fetch;z=z?(z+"").toLowerCase():"text";let A=A8([k,N&&N.toAbortSignal()],P),q=null;const I=A&&A.unsubscribe&&(()=>{A.unsubscribe()});let K;try{if(F&&d&&j!=="get"&&j!=="head"&&(K=await x(H,S))!==0){let G=new e(v,{method:"POST",body:S,duplex:"half"}),Y;if(Kt.isFormData(S)&&(Y=G.headers.get("content-type"))&&H.setContentType(Y),G.body){const[Se,fe]=Wk(K,tv(Hk(F)));S=Gk(G.body,Kk,Se,fe)}}Kt.isString(V)||(V=V?"include":"omit");const D=o&&"credentials"in e.prototype,Q={...W,signal:A,method:j.toUpperCase(),headers:H.normalize().toJSON(),body:S,duplex:"half",credentials:D?V:void 0};q=o&&new e(v,Q);let oe=await(o?Z(q,W):Z(v,Q));const re=h&&(z==="stream"||z==="response");if(h&&(R||re&&I)){const G={};["status","statusText","headers"].forEach(Ee=>{G[Ee]=oe[Ee]});const Y=Kt.toFiniteNumber(oe.headers.get("content-length")),[Se,fe]=R&&Wk(Y,tv(Hk(R),!0))||[];oe=new t(Gk(oe.body,Kk,Se,()=>{fe&&fe(),I&&I()}),G)}z=z||"text";let Te=await m[Kt.findKey(m,z)||"text"](oe,b);return!re&&I&&I(),await new Promise((G,Y)=>{B4(G,Y,{data:Te,headers:Ti.from(oe.headers),status:oe.status,statusText:oe.statusText,config:b,request:q})})}catch(D){throw I&&I(),D&&D.name==="TypeError"&&/Load failed|fetch/i.test(D.message)?Object.assign(new An("Network Error",An.ERR_NETWORK,b,q),{cause:D.cause||D}):An.from(D,D&&D.code,b,q)}}},F8=new Map,$4=a=>{let r=a&&a.env||{};const{fetch:e,Request:t,Response:s}=r,o=[t,s,e];let i=o.length,l=i,c,d,h=F8;for(;l--;)c=o[l],d=h.get(c),d===void 0&&h.set(c,d=l?new Map:D8(r)),h=d;return d};$4();const ES={http:t8,xhr:P8,fetch:{get:$4}};Kt.forEach(ES,(a,r)=>{if(a){try{Object.defineProperty(a,"name",{value:r})}catch{}Object.defineProperty(a,"adapterName",{value:r})}});const Qk=a=>`- ${a}`,B8=a=>Kt.isFunction(a)||a===null||a===!1;function z8(a,r){a=Kt.isArray(a)?a:[a];const{length:e}=a;let t,s;const o={};for(let i=0;i<e;i++){t=a[i];let l;if(s=t,!B8(t)&&(s=ES[(l=String(t)).toLowerCase()],s===void 0))throw new An(`Unknown adapter '${l}'`);if(s&&(Kt.isFunction(s)||(s=s.get(r))))break;o[l||"#"+i]=s}if(!s){const i=Object.entries(o).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let l=e?i.length>1?`since :
`+i.map(Qk).join(`
`):" "+Qk(i[0]):"as no adapter specified";throw new An("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return s}const V4={getAdapter:z8,adapters:ES};function xj(a){if(a.cancelToken&&a.cancelToken.throwIfRequested(),a.signal&&a.signal.aborted)throw new zy(null,a)}function Jk(a){return xj(a),a.headers=Ti.from(a.headers),a.data=yj.call(a,a.transformRequest),["post","put","patch"].indexOf(a.method)!==-1&&a.headers.setContentType("application/x-www-form-urlencoded",!1),V4.getAdapter(a.adapter||By.adapter,a)(a).then(function(t){return xj(a),t.data=yj.call(a,a.transformResponse,t),t.headers=Ti.from(t.headers),t},function(t){return F4(t)||(xj(a),t&&t.response&&(t.response.data=yj.call(a,a.transformResponse,t.response),t.response.headers=Ti.from(t.response.headers))),Promise.reject(t)})}const W4="1.13.4",Pb={};["object","boolean","number","function","string","symbol"].forEach((a,r)=>{Pb[a]=function(t){return typeof t===a||"a"+(r<1?"n ":" ")+a}});const e5={};Pb.transitional=function(r,e,t){function s(o,i){return"[Axios v"+W4+"] Transitional option '"+o+"'"+i+(t?". "+t:"")}return(o,i,l)=>{if(r===!1)throw new An(s(i," has been removed"+(e?" in "+e:"")),An.ERR_DEPRECATED);return e&&!e5[i]&&(e5[i]=!0,console.warn(s(i," has been deprecated since v"+e+" and will be removed in the near future"))),r?r(o,i,l):!0}};Pb.spelling=function(r){return(e,t)=>(console.warn(`${t} is likely a misspelling of ${r}`),!0)};function U8(a,r,e){if(typeof a!="object")throw new An("options must be an object",An.ERR_BAD_OPTION_VALUE);const t=Object.keys(a);let s=t.length;for(;s-- >0;){const o=t[s],i=r[o];if(i){const l=a[o],c=l===void 0||i(l,o,a);if(c!==!0)throw new An("option "+o+" must be "+c,An.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new An("Unknown option "+o,An.ERR_BAD_OPTION)}}const B0={assertOptions:U8,validators:Pb},Rc=B0.validators;let Jf=class{constructor(r){this.defaults=r||{},this.interceptors={request:new $k,response:new $k}}async request(r,e){try{return await this._request(r,e)}catch(t){if(t instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{t.stack?o&&!String(t.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(t.stack+=`
`+o):t.stack=o}catch{}}throw t}}_request(r,e){typeof r=="string"?(e=e||{},e.url=r):e=r||{},e=sp(this.defaults,e);const{transitional:t,paramsSerializer:s,headers:o}=e;t!==void 0&&B0.assertOptions(t,{silentJSONParsing:Rc.transitional(Rc.boolean),forcedJSONParsing:Rc.transitional(Rc.boolean),clarifyTimeoutError:Rc.transitional(Rc.boolean)},!1),s!=null&&(Kt.isFunction(s)?e.paramsSerializer={serialize:s}:B0.assertOptions(s,{encode:Rc.function,serialize:Rc.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),B0.assertOptions(e,{baseUrl:Rc.spelling("baseURL"),withXsrfToken:Rc.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let i=o&&Kt.merge(o.common,o[e.method]);o&&Kt.forEach(["delete","get","head","post","put","patch","common"],b=>{delete o[b]}),e.headers=Ti.concat(i,o);const l=[];let c=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(e)===!1||(c=c&&v.synchronous,l.unshift(v.fulfilled,v.rejected))});const d=[];this.interceptors.response.forEach(function(v){d.push(v.fulfilled,v.rejected)});let h,m=0,y;if(!c){const b=[Jk.bind(this),void 0];for(b.unshift(...l),b.push(...d),y=b.length,h=Promise.resolve(e);m<y;)h=h.then(b[m++],b[m++]);return h}y=l.length;let x=e;for(;m<y;){const b=l[m++],v=l[m++];try{x=b(x)}catch(j){v.call(this,j);break}}try{h=Jk.call(this,x)}catch(b){return Promise.reject(b)}for(m=0,y=d.length;m<y;)h=h.then(d[m++],d[m++]);return h}getUri(r){r=sp(this.defaults,r);const e=z4(r.baseURL,r.url,r.allowAbsoluteUrls);return R4(e,r.params,r.paramsSerializer)}};Kt.forEach(["delete","get","head","options"],function(r){Jf.prototype[r]=function(e,t){return this.request(sp(t||{},{method:r,url:e,data:(t||{}).data}))}});Kt.forEach(["post","put","patch"],function(r){function e(t){return function(o,i,l){return this.request(sp(l||{},{method:r,headers:t?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}Jf.prototype[r]=e(),Jf.prototype[r+"Form"]=e(!0)});let $8=class H4{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(o){e=o});const t=this;this.promise.then(s=>{if(!t._listeners)return;let o=t._listeners.length;for(;o-- >0;)t._listeners[o](s);t._listeners=null}),this.promise.then=s=>{let o;const i=new Promise(l=>{t.subscribe(l),o=l}).then(s);return i.cancel=function(){t.unsubscribe(o)},i},r(function(o,i,l){t.reason||(t.reason=new zy(o,i,l),e(t.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const e=this._listeners.indexOf(r);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const r=new AbortController,e=t=>{r.abort(t)};return this.subscribe(e),r.signal.unsubscribe=()=>this.unsubscribe(e),r.signal}static source(){let r;return{token:new H4(function(s){r=s}),cancel:r}}};function V8(a){return function(e){return a.apply(null,e)}}function W8(a){return Kt.isObject(a)&&a.isAxiosError===!0}const G1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(G1).forEach(([a,r])=>{G1[r]=a});function q4(a){const r=new Jf(a),e=S4(Jf.prototype.request,r);return Kt.extend(e,Jf.prototype,r,{allOwnKeys:!0}),Kt.extend(e,r,null,{allOwnKeys:!0}),e.create=function(s){return q4(sp(a,s))},e}const Gs=q4(By);Gs.Axios=Jf;Gs.CanceledError=zy;Gs.CancelToken=$8;Gs.isCancel=F4;Gs.VERSION=W4;Gs.toFormData=Ob;Gs.AxiosError=An;Gs.Cancel=Gs.CanceledError;Gs.all=function(r){return Promise.all(r)};Gs.spread=V8;Gs.isAxiosError=W8;Gs.mergeConfig=sp;Gs.AxiosHeaders=Ti;Gs.formToJSON=a=>D4(Kt.isHTMLForm(a)?new FormData(a):a);Gs.getAdapter=V4.getAdapter;Gs.HttpStatusCode=G1;Gs.default=Gs;const{Axios:a0e,AxiosError:s0e,CanceledError:o0e,isCancel:i0e,CancelToken:l0e,VERSION:c0e,all:d0e,Cancel:u0e,isAxiosError:f0e,spread:p0e,toFormData:h0e,AxiosHeaders:m0e,HttpStatusCode:g0e,formToJSON:y0e,getAdapter:x0e,mergeConfig:v0e}=Gs,Au={getItem:a=>{try{return typeof window>"u"||!window.localStorage?null:localStorage.getItem(a)}catch(r){return console.error("Error reading from localStorage:",r),null}},setItem:(a,r)=>{try{if(typeof window>"u"||!window.localStorage)return;localStorage.setItem(a,r)}catch(e){console.error("Error writing to localStorage:",e)}},removeItem:a=>{try{if(typeof window>"u"||!window.localStorage)return;localStorage.removeItem(a)}catch(r){console.error("Error removing from localStorage:",r)}},clear:()=>{try{if(typeof window>"u"||!window.localStorage)return;localStorage.clear()}catch(a){console.error("Error clearing localStorage:",a)}}},Ke=Gs.create({baseURL:"https://backend.ziplofy.com/api",timeout:1e4,headers:{"Content-Type":"application/json"},withCredentials:!0});Ke.interceptors.request.use(a=>{const r=Au.getItem("accessToken");return r&&(a.headers.Authorization=`Bearer ${r}`),a},a=>Promise.reject(a));const t5=Object.freeze(Object.defineProperty({__proto__:null,axiosi:Ke},Symbol.toStringTag,{value:"Module"})),G4=f.createContext(void 0),H8=({children:a})=>{const[r,e]=f.useState(null);f.useEffect(()=>{const i=new URLSearchParams(window.location.search),l=i.get("accessToken");if(l){console.log("Token found in URL, setting in localStorage"),localStorage.setItem("accessToken",l),i.delete("accessToken");const c=`${window.location.pathname}${i.toString()?"?"+i.toString():""}`;window.history.replaceState({},"",c)}},[]);const t=f.useCallback(async()=>{try{const{data:i}=await Ke.get("/auth/me");e(i)}catch(i){console.error("Error fetching user:",i),i.response?.status===401&&(console.log("User unauthorized, clearing user state and redirecting to auth service"),e(null),localStorage.removeItem("accessToken"),localStorage.removeItem("token"))}},[]);f.useEffect(()=>{localStorage.getItem("accessToken")&&!r&&t()},[t]);const s=f.useCallback(()=>{e(null)},[]),o={loggedInUser:r,fetchLoggedInUser:t,clearUser:s};return n.jsx(G4.Provider,{value:o,children:a})},TS=()=>{const a=f.useContext(G4);if(!a)throw new Error("useUser must be used within a UserProvider");return a},K4=f.createContext(void 0),q8=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(null),[o,i]=f.useState(!1),[l,c]=f.useState(null),d=f.useCallback(async()=>{try{i(!0),c(null);const b=await Ke.get("/stores/my-stores"),{success:v,data:j}=b.data;v?Array.isArray(j)?(e(j),j.length>0?s(j[0]._id):s(null)):(e([j]),s(j._id)):c("Failed to fetch stores")}catch(b){console.error("Error fetching stores:",b),c(b.response?.data?.message||"Failed to fetch stores")}finally{i(!1)}},[]),h=f.useCallback(async b=>{try{i(!0),c(null);const v=await Ke.post("/stores/",b),{success:j,data:S}=v.data;if(j){const k=S;e(N=>[k,...N]),s(k._id)}else c("Failed to create store")}catch(v){throw console.error("Error creating store:",v),c(v.response?.data?.message||"Failed to create store"),v}finally{i(!1)}},[]),m=f.useCallback(async(b,v)=>{try{i(!0),c(null);const j=await Ke.put(`/stores/${b}`,v),{success:S,data:k}=j.data;if(!S)throw new Error("Failed to update store");return e(N=>N.map(P=>P._id===b?k:P)),k}catch(j){throw console.error("Error updating store:",j),c(j.response?.data?.message||"Failed to update store"),j}finally{i(!1)}},[]),y=f.useCallback(()=>{e([]),s(null),c(null),i(!1)},[]);f.useEffect(()=>{d()},[d]),f.useEffect(()=>{if(t)try{localStorage.setItem("activeStoreId",t),sessionStorage.setItem("activeStoreId",t),localStorage.setItem("storeId",t),sessionStorage.setItem("storeId",t)}catch(b){console.warn("Failed to persist activeStoreId:",b)}},[t]),f.useEffect(()=>{if(!t)try{const b=localStorage.getItem("activeStoreId")||sessionStorage.getItem("activeStoreId");b&&r.some(j=>j._id===b)&&s(b)}catch(b){console.warn("Failed to load activeStoreId from storage:",b)}},[]),f.useEffect(()=>{if(!t)return;const b=r.find(v=>v._id===t);b&&(ra.dismiss(),ra.success(`Switched to ${b.storeName}`))},[t,r]);const x={stores:r,activeStoreId:t,loading:o,error:l,fetchStores:d,createStore:h,updateStore:m,setActiveStoreId:s,clearStores:y,setStores:e};return n.jsx(K4.Provider,{value:x,children:a})},fn=()=>{const a=f.useContext(K4);if(a===void 0)throw new Error("useStore must be used within a StoreProvider");return a},Y4=f.createContext(void 0),G8=({children:a})=>{const[r,e]=f.useState(null),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async h=>{s(!0),i(null);try{const{data:m}=await Ke.get(`/store-subdomain/store/${h}`);e(m.data)}catch(m){i(m?.response?.data?.message||"Failed to fetch store subdomain"),e(null)}finally{s(!1)}},[]),c=f.useCallback(async h=>{try{s(!0),i(null);const{data:m}=await Ke.get("/store-subdomain/check",{params:{subdomain:h}});return m.data}catch(m){return i(m?.response?.data?.message||"Invalid or unknown subdomain"),null}finally{s(!1)}},[]),d=f.useMemo(()=>({storeSubdomain:r,loading:t,error:o,getByStoreId:l,validateSubdomain:c}),[r,t,o,l,c]);return n.jsx(Y4.Provider,{value:d,children:a})},K8=()=>{const a=f.useContext(Y4);if(!a)throw new Error("useStoreSubdomain must be used within StoreSubdomainProvider");return a},Y8=()=>{const{activeStoreId:a}=fn(),{storeSubdomain:r,getByStoreId:e,loading:t,error:s}=K8();f.useEffect(()=>{a&&e(a)},[a,e]);const o=f.useCallback(()=>{console.log("Manage domain clicked")},[]);return n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h6",{className:"text-base font-medium text-gray-900 mb-1.5",children:"Customize your domain"}),s?n.jsx("p",{className:"text-sm text-red-600",children:s}):n.jsxs("p",{className:"text-sm text-gray-600",children:["Default domain:"," ",t?"Loading...":r?.url?n.jsx("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"text-gray-900 hover:underline",children:r.url.replace(/^https?:\/\//,"")}):""]})]}),n.jsx("button",{onClick:o,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:"Manage"})]})},Z8=({newCustomers:a=110,percentageChange:r=7.5,lastMonth:e=89,minWidth:t})=>n.jsxs("div",{className:"bg-white rounded-lg p-4 flex-1 border border-gray-200",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsx("h3",{className:"text-gray-900 font-medium text-base",children:"New Customer"}),n.jsx("div",{className:"w-9 h-9 rounded-full bg-gray-100 flex items-center justify-center",children:n.jsx(py,{className:"w-5 h-5 text-gray-600"})})]}),n.jsxs("div",{className:"flex items-baseline gap-2 mb-3",children:[n.jsx("span",{className:"text-2xl font-semibold text-gray-900",children:a.toLocaleString()}),n.jsxs("div",{className:"flex items-center gap-1 bg-pink-50 text-pink-700 px-2 py-1 rounded text-xs",children:[n.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"})}),n.jsxs("span",{className:"font-medium",children:[r,"%"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx("span",{className:"text-gray-500",children:"Last month:"}),n.jsx("span",{className:"text-gray-900 font-medium",children:e.toLocaleString()})]})]}),X8=({returnProducts:a=72,percentageChange:r=6,lastMonth:e=60,minWidth:t})=>n.jsxs("div",{className:"bg-white rounded-lg p-4 flex-1 border border-gray-200",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsx("h3",{className:"text-gray-900 font-medium text-base",children:"Return Products"}),n.jsx("div",{className:"w-9 h-9 rounded-full bg-gray-100 flex items-center justify-center",children:n.jsx(Xc,{className:"w-5 h-5 text-gray-600"})})]}),n.jsxs("div",{className:"flex items-baseline gap-2 mb-3",children:[n.jsx("span",{className:"text-2xl font-semibold text-gray-900",children:a.toLocaleString()}),n.jsxs("div",{className:"flex items-center gap-1 bg-red-50 text-red-700 px-2 py-1 rounded text-xs",children:[n.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})}),n.jsxs("span",{className:"font-medium",children:[r,"%"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx("span",{className:"text-gray-500",children:"Last month:"}),n.jsx("span",{className:"text-gray-900 font-medium",children:e.toLocaleString()})]})]}),Q8=({timeframe:a="This Week",data:r=[{day:"Fri",value:17},{day:"Sat",value:13},{day:"Sun",value:22},{day:"Mon",value:13},{day:"Tue",value:17},{day:"Wed",value:22},{day:"Thu",value:17}]})=>{const[e,t]=f.useState(a),[s,o]=f.useState(!1),i=f.useRef(null),l=30,c=150,d=600,h=60,m=30,y=60,x=20,b=["This Week","This Month","This Year"],v=S=>S/l*c,j=S=>y+S*(h+m);return f.useEffect(()=>{const S=k=>{i.current&&!i.current.contains(k.target)&&o(!1)};return s&&document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[s]),n.jsxs("div",{className:"bg-white rounded-lg p-4 min-h-80 border border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"text-base font-medium text-gray-900",children:"Revenue analytics"}),n.jsxs("div",{className:"relative",ref:i,children:[n.jsxs("button",{onClick:()=>o(!s),className:"flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:[e,n.jsx(Is,{className:"w-4 h-4"})]}),s&&n.jsx("div",{className:"absolute right-0 top-full mt-1 bg-white border border-gray-200 rounded shadow-md py-1 z-10 min-w-[120px]",children:b.map(S=>n.jsx("button",{onClick:()=>{t(S),o(!1)},className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:S},S))})]})]}),n.jsx("div",{className:"relative",children:n.jsxs("svg",{width:"100%",height:c+x+40,viewBox:`0 0 ${d} ${c+x+40}`,children:[[0,5,10,15,20,25,30].map(S=>{const k=x+c-S/l*c;return n.jsxs("g",{children:[n.jsx("line",{x1:y-10,y1:k,x2:d-20,y2:k,stroke:"#e5e7eb",strokeWidth:"1",strokeDasharray:"4 4"}),n.jsxs("text",{x:y-15,y:k+4,textAnchor:"end",className:"text-xs fill-gray-500",fontSize:"12",children:[S,"k"]})]},S)}),r.map((S,k)=>{const N=v(S.value),P=j(k),R=x+c-N;return n.jsxs("g",{children:[n.jsx("rect",{x:P,y:R,width:h,height:N,fill:"#6366f1",rx:"4",className:"hover:opacity-80 transition-opacity"}),n.jsx("text",{x:P+h/2,y:x+c+20,textAnchor:"middle",className:"text-xs fill-gray-600",fontSize:"12",children:S.day})]},S.day)})]})})]})},J8=({data:a=[{month:"Jan",profit:23,loss:23},{month:"Feb",profit:20,loss:23},{month:"Mar",profit:23,loss:28},{month:"Apr",profit:37,loss:18},{month:"May",profit:33,loss:20},{month:"Jun",profit:23,loss:18},{month:"Jul",profit:21,loss:22}]})=>{const c=h=>h/50*150,d=h=>60+h*85;return n.jsxs("div",{className:"bg-white rounded-lg p-4 min-h-80 border border-gray-200",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("h3",{className:"text-base font-medium text-gray-900 mb-1.5",children:"Total Income"}),n.jsx("p",{className:"text-sm text-gray-500",children:"View your income on a certain period of time"})]}),n.jsx("div",{className:"mb-3",children:n.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Profit and Loss"})}),n.jsx("div",{className:"relative",children:n.jsxs("svg",{width:"100%",height:210,viewBox:"0 0 600 210",children:[[0,10,20,30,40,50].map(h=>{const m=170-h/50*150;return n.jsxs("g",{children:[n.jsx("line",{x1:50,y1:m,x2:580,y2:m,stroke:"#e5e7eb",strokeWidth:"1",strokeDasharray:"4 4"}),n.jsx("text",{x:45,y:m+4,textAnchor:"end",className:"text-xs fill-gray-500",fontSize:"12",children:h===0?"00":`${h}k`})]},h)}),a.map((h,m)=>{const y=c(h.profit),x=c(h.loss),b=y+x,v=d(m),j=170-b,S=j+y;return n.jsxs("g",{children:[n.jsx("rect",{x:v,y:j,width:60,height:y,fill:"#6366f1",rx:"4",className:"hover:opacity-80 transition-opacity"}),n.jsx("rect",{x:v,y:S,width:60,height:x,fill:"#e5e7eb",rx:"4",className:"hover:opacity-80 transition-opacity"}),n.jsx("text",{x:v+60/2,y:190,textAnchor:"middle",className:"text-xs fill-gray-600",fontSize:"12",children:h.month})]},h.month)})]})})]})},eF=({totalRevenue:a=8220.64,lastMonth:r=620,currency:e="$",minWidth:t})=>{const s=o=>`${e}${o.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`;return n.jsxs("div",{className:"bg-white rounded-lg p-4 flex-1 border border-gray-200",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsx("h3",{className:"text-gray-900 font-medium text-base",children:"Total Revenue"}),n.jsx("div",{className:"w-9 h-9 rounded-full bg-gray-100 flex items-center justify-center",children:n.jsx(mS,{className:"w-5 h-5 text-gray-600"})})]}),n.jsx("div",{className:"mb-3",children:n.jsx("span",{className:"text-2xl font-semibold text-gray-900",children:s(a)})}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx("span",{className:"text-gray-500",children:"Last month:"}),n.jsx("span",{className:"text-gray-900 font-medium",children:s(r)})]})]})},tF=({totalSales:a=2500,percentageChange:r=4.9,lastMonth:e=2345})=>n.jsxs("div",{className:"bg-white rounded-lg p-4 flex-1 border border-gray-200",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsx("h3",{className:"text-gray-900 font-medium text-base",children:"Total Sales"}),n.jsx("div",{className:"w-9 h-9 rounded-full bg-gray-100 flex items-center justify-center",children:n.jsx(Sb,{className:"w-5 h-5 text-gray-600"})})]}),n.jsxs("div",{className:"flex items-baseline gap-2 mb-3",children:[n.jsx("span",{className:"text-2xl font-semibold text-gray-900",children:a.toLocaleString()}),n.jsxs("div",{className:"flex items-center gap-1 bg-green-50 text-green-700 px-2 py-1 rounded text-xs",children:[n.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"})}),n.jsxs("span",{className:"font-medium",children:[r,"%"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx("span",{className:"text-gray-500",children:"Last month:"}),n.jsx("span",{className:"text-gray-900 font-medium",children:e.toLocaleString()})]})]}),Z4=()=>n.jsxs("div",{className:"flex gap-3 w-full",children:[n.jsxs("div",{className:"flex-1 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex gap-3",children:[n.jsx(tF,{}),n.jsx(X8,{})]}),n.jsx("div",{children:n.jsx(Q8,{})})]}),n.jsxs("div",{className:"flex-1 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex gap-3",children:[n.jsx(Z8,{}),n.jsx(eF,{})]}),n.jsx("div",{children:n.jsx(J8,{})})]})]}),rF=({steps:a=[{id:"theme",title:"Make your store stand out with the right theme",buttonText:"Configure Theme",buttonVariant:"primary"},{id:"domain",title:"Set your own domain for your store",description:"Added Domain: fashion-0-60058040737.ziplofy.com",buttonText:"Add Domain",buttonVariant:"primary"},{id:"items",title:"Add all the items that you'll be selling on your store",buttonText:"Add Itmes",buttonVariant:"primary"},{id:"shipping",title:"Set up shipping zones to deliver your items efficiently",buttonText:"Added",buttonVariant:"added"},{id:"payment",title:"Connect payment gateways to start accepting online payments",buttonText:"Configure Online Payments",buttonVariant:"primary"}],onStepClick:r,onTestOrderClick:e})=>{const t=f.useCallback(o=>{r?r(o):console.log("Step clicked:",o)},[r]),s=f.useCallback(()=>{e?e():console.log("Test order clicked")},[e]);return n.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[n.jsx("div",{className:"text-center mb-3",children:n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Complete these few steps to launch your store"})}),n.jsx("div",{className:"space-y-2 mb-3",children:a.map(o=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded border border-gray-200",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-0.5",children:o.title}),o.description&&n.jsx("p",{className:"text-xs text-gray-500 truncate",children:o.description})]}),n.jsx("button",{onClick:()=>t(o.id),className:`ml-3 px-3 py-1.5 text-sm font-medium rounded border transition-colors whitespace-nowrap flex-shrink-0 ${o.buttonVariant==="added"?"bg-white text-gray-600 border-gray-200 hover:bg-gray-50":"bg-white text-gray-900 border-gray-200 hover:bg-gray-50"}`,children:o.buttonText})]},o.id))}),n.jsx("div",{className:"bg-gray-50 rounded p-3 border border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-0.5",children:"Try placing a test order yourself"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Experience how the process works from start to finish"})]}),n.jsx("button",{onClick:s,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-600 rounded hover:bg-gray-500 transition-colors whitespace-nowrap flex-shrink-0",children:"See How It Works"})]})})]})},nF=({resource:a,onClick:r})=>n.jsxs("button",{onClick:()=>r?.(a.id),className:"w-full flex items-center gap-3 p-3 bg-white border border-gray-200 rounded hover:bg-gray-50 transition-colors text-left",children:[n.jsx("div",{className:"flex-shrink-0 w-5 h-5 flex items-center justify-center",children:a.icon}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsx("p",{className:"text-sm font-medium text-gray-900",children:a.title})}),n.jsx("div",{className:"flex-shrink-0",children:n.jsx(Pa,{className:"w-4 h-4 text-gray-400"})})]}),aF=({resources:a=[{id:"help-center",title:"Visit our Help Cneter",icon:n.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})},{id:"academy",title:"Try our Academy Page",icon:n.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})},{id:"forum",title:"Try our Forum Area",icon:n.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}],onResourceClick:r})=>{const e=f.useCallback(t=>{r?r(t):console.log("Resource clicked:",t)},[r]);return n.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200 flex-1",children:[n.jsx("div",{className:"mb-3",children:n.jsxs("h3",{className:"text-base font-medium text-gray-900",children:["Other Helpful ",n.jsx("span",{className:"font-medium",children:"Resources"})]})}),n.jsx("div",{className:"space-y-2",children:a.map(t=>n.jsx(nF,{resource:t,onClick:e},t.id))})]})},Cg=({item:a,onClick:r})=>n.jsxs("button",{onClick:()=>r?.(a.id),className:"w-full flex items-start gap-3 p-3 bg-white border border-gray-200 rounded hover:bg-gray-50 transition-colors text-left",children:[n.jsx("div",{className:"flex-shrink-0 w-8 h-8 flex items-center justify-center",children:a.icon}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:a.title}),n.jsx("p",{className:"text-xs text-gray-600",children:a.description})]}),n.jsx("div",{className:"flex-shrink-0",children:n.jsx(Pa,{className:"w-4 h-4 text-gray-400"})})]}),sF=({onItemClick:a})=>{const r=f.useCallback(e=>{a?a(e):console.log("Improvement item clicked:",e)},[a]);return n.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[n.jsx("div",{className:"mb-3",children:n.jsxs("h3",{className:"text-base font-medium text-gray-900",children:["Here are some ways to ",n.jsx("span",{className:"font-medium",children:"improve your store"})]})}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("div",{className:"flex-1 flex gap-2 flex-col",children:[n.jsx(Cg,{item:{id:"taxes",title:"Set Up taxes",description:"Configure Tax Rates & Rules to boost Sales",icon:n.jsxs("svg",{className:"w-5 h-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[n.jsx("circle",{cx:"7",cy:"11",r:"2.5",strokeWidth:1.5}),n.jsx("circle",{cx:"15",cy:"13",r:"2.5",strokeWidth:1.5}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 11l8 2"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v3m0 10v3"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 6l-3 3M5 16l3-3"})]})},onClick:r}),n.jsx(Cg,{item:{id:"collections",title:"Manage Collections",description:"Combine different items to show under a common filter",icon:n.jsxs("svg",{className:"w-5 h-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[n.jsx("rect",{x:"6",y:"4",width:"12",height:"4",rx:"1",strokeWidth:1.5}),n.jsx("rect",{x:"6",y:"10",width:"12",height:"4",rx:"1",strokeWidth:1.5}),n.jsx("rect",{x:"6",y:"16",width:"12",height:"4",rx:"1",strokeWidth:1.5})]})},onClick:r}),n.jsx(Cg,{item:{id:"digital-downloads",title:"Enable Digital Downloads",description:"Add digital files to be downloaded with orders",icon:n.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})},onClick:r})]}),n.jsxs("div",{className:"flex-1 flex gap-2 flex-col",children:[n.jsx(Cg,{item:{id:"coupons",title:"Create Coupons",description:"Add and manage discounts for orders",icon:n.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"})})},onClick:r}),n.jsx(Cg,{item:{id:"shipping",title:"Shipping Integration",description:"Integrate with shipping carriers for real-time tracking and shipping",icon:n.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h1m8-1a1 1 0 01-1 1H9m4-1V8a1 1 0 011-1h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V16a1 1 0 01-1 1h-1m-6-1a1 1 0 001 1h1M5 17a2 2 0 104 0m-4 0a2 2 0 114 0m6 0a2 2 0 104 0m-4 0a2 2 0 114 0"})})},onClick:r})]})]})]})},oF=({videoUrl:a,title:r="Watch a quick overview video",onPlay:e})=>n.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200 flex-1",children:[n.jsx("div",{className:"mb-3",children:n.jsxs("h3",{className:"text-base font-medium text-gray-900",children:["Watch a quick ",n.jsx("span",{className:"font-medium",children:"overview video"})]})}),n.jsx("div",{className:"relative w-full aspect-video bg-gray-600 rounded overflow-hidden",children:a?n.jsx("iframe",{src:a,className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Overview Video"}):n.jsx("div",{className:"w-full h-full bg-gray-600"})})]}),iF=({onStepClick:a,onTestOrderClick:r,onImprovementClick:e,onResourceClick:t})=>n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"text-center mb-2",children:[n.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-1.5",children:"Welcome to Ziplofy"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Let's set up your e-commerce store and manage your business effectively"})]}),n.jsx(rF,{onStepClick:a,onTestOrderClick:r}),n.jsx(sF,{onItemClick:e}),n.jsxs("div",{className:"flex gap-3 bg-white border border-gray-200 rounded-lg p-4",children:[n.jsx(oF,{}),n.jsx(aF,{onResourceClick:t})]})]}),pr=({children:a,gridSize:r="20px",gridColor:e="102,102,102",gridOpacity:t=.1})=>n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%",backgroundImage:`
            linear-gradient(to right, rgba(${e}, ${t}) 1px, transparent 1px),
            linear-gradient(to bottom, rgba(${e}, ${t}) 1px, transparent 1px)
          `,backgroundSize:`${r} ${r}`,backgroundPosition:"0 0",zIndex:0,pointerEvents:"none"}}),n.jsx("div",{className:"min-h-screen relative",style:{position:"relative",zIndex:1},children:a})]});function lF(){const[a,r]=f.useState(!1),[e,t]=f.useState("dashboard"),{socket:s}=h7(),{loggedInUser:o}=TS(),i=f.useRef(null);f.useCallback(()=>{s&&s.connected?s.emit("hireDeveloper"):yr.error("socket not connected")},[s]),f.useCallback(()=>{s&&s.connected?(s.emit(ev.EndMeeting),yr.success("we have notified the developer to send requirements form, so that you can approve it")):yr.error("Socket not connected")},[s,o?.assignedSupportDeveloperId?.id]),f.useCallback(()=>{r(!0)},[]);const l=f.useMemo(()=>{if(!o?.assignedSupportDeveloperId)return console.log("No assigned developer found"),"https://calendly.com/default/30min";const y=o.assignedSupportDeveloperId?.email;console.log("Developer email:",y);const x="gibberish";console.log("Extracted username:",x);const b=`https://calendly.com/${x}/30min`;return console.log("Generated Calendly URL:",b),b},[o?.assignedSupportDeveloperId]),c=f.useCallback(()=>{r(!1)},[]),d=f.useCallback(y=>{i.current&&!i.current.contains(y.target)&&c()},[c]),h=f.useCallback(y=>{y.key==="Escape"&&a&&c()},[a,c]),m=f.useCallback(y=>{y.stopPropagation()},[]);return f.useCallback(()=>{console.log("Ask AI clicked")},[]),f.useCallback(()=>{console.log("Get tasks updates clicked")},[]),f.useCallback(()=>{console.log("Create workspace clicked")},[]),f.useCallback(()=>{console.log("Connect apps clicked")},[]),f.useEffect(()=>(a&&(document.addEventListener("mousedown",d),document.body.style.overflow="hidden"),()=>{document.removeEventListener("mousedown",d),document.body.style.overflow="unset"}),[a,d]),f.useEffect(()=>(a&&document.addEventListener("keydown",h),()=>{document.removeEventListener("keydown",h)}),[a,h]),o?.name?.split(" ")[0],n.jsx(n.Fragment,{children:n.jsxs(pr,{children:[n.jsx("div",{className:"relative pt-3 px-4 pb-6",style:{position:"relative",zIndex:1},children:n.jsxs("div",{className:"max-w-[1400px] mx-auto flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[n.jsx("button",{onClick:()=>t("dashboard"),className:`pb-2 text-base px-1 font-medium transition-colors ${e==="dashboard"?"text-gray-900 border-b-2 border-gray-900":"text-gray-500 hover:text-gray-700"}`,children:"Dashboard"}),n.jsx("button",{onClick:()=>t("getting-started"),className:`pb-2 px-1 text-base font-medium transition-colors ${e==="getting-started"?"text-gray-900 border-b-2 border-gray-900":"text-gray-500 hover:text-gray-700"}`,children:"Getting Started"})]}),n.jsxs("div",{className:"flex flex-col gap-3",children:[e==="dashboard"?n.jsx(Z4,{}):n.jsx(iF,{}),e==="dashboard"&&n.jsx("div",{children:n.jsx(Y8,{})})]})]})}),a&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[1400]",onClick:c,"aria-hidden":"true"}),n.jsx("div",{className:"fixed inset-0 z-[1500] flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{ref:i,className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] flex flex-col shadow-2xl pointer-events-auto",onClick:m,children:[n.jsx("button",{onClick:c,className:"absolute top-2 right-2 p-1.5 bg-white/80 hover:bg-white/90 rounded-lg transition-colors z-10","aria-label":"Close",children:n.jsx(xs,{className:"w-5 h-5 text-gray-500"})}),n.jsx("div",{className:"relative h-[80vh] min-h-[600px]",children:n.jsx(b9,{url:l,styles:{height:"100%",width:"100%"},pageSettings:{backgroundColor:"ffffff",hideEventTypeDetails:!1,hideLandingPageDetails:!1,primaryColor:"4caf50",textColor:"4d5055"},prefill:{name:o?.name||"",email:o?.email||""},utm:{utmCampaign:"developer-meeting",utmSource:"ziplofy",utmMedium:"website"}})})]})})]})]})})}const cF=240,r5=[{text:"Home",icon:t4,path:"/"},{text:"Orders",icon:Sb,path:"/orders",children:[{text:"Orders",path:"/orders"},{text:"Drafts",path:"/orders/drafts"},{text:"Abandoned Carts",path:"/orders/abandoned-carts"}]},{text:"Products",icon:Xc,path:"/products",children:[{text:"Collections",path:"/products/collections"},{text:"Inventory",path:"/products/inventory"},{text:"Purchase orders",path:"/products/purchase-orders"},{text:"Transfers",path:"/products/transfers"},{text:"Gift cards",path:"/products/gift-cards"}]},{text:"Customers",icon:py,path:"/customers",children:[{text:"Segments",path:"/customers/segments"}]},{text:"Marketing",icon:AD,path:"/marketing",children:[{text:"Campaigns",path:"/marketing/campaigns"},{text:"Attribution",path:"/marketing/attribution"},{text:"Automations",path:"/marketing/automations"}]},{text:"Discounts",icon:ap,path:"/discounts"},{text:"Content",icon:zd,path:"/content",children:[{text:"Metaobjects",path:"/content/metaobjects"},{text:"Files",path:"/content/files"},{text:"Menus",path:"/content/menus"},{text:"Blog posts",path:"/content/blog-posts"}]},{text:"Markets",icon:Oo,path:"/markets",children:[{text:"Catalogs",path:"/markets/catalogs"}]},{text:"Analytics",icon:QT,path:"/analytics",children:[{text:"Reports",path:"/analytics/reports"},{text:"Live View",path:"/analytics/live-view"}]},{text:"Online Store",icon:Oo,path:"/online-store",children:[{text:"Themes",path:"/online-store/themes"},{text:"Pages",path:"/online-store/pages"},{text:"Preference",path:"/online-store/preference"}]},{text:"Themes",icon:$D,path:"/themes/all-themes"},{text:"Tag Management",icon:ap,path:"/tag-management"},{text:"Vendors",icon:py,path:"/vendors"}];function dF(){const a=Pi(),r=f.useMemo(()=>{const i={};return r5.forEach(l=>{l.children&&(i[l.text]=a.pathname.startsWith(l.path))}),i},[a.pathname]),[e,t]=f.useState(r);f.useEffect(()=>t(r),[r]);const s=f.useCallback(i=>{t(l=>({...l,[i]:!l[i]}))},[]),o=f.useCallback(i=>a.pathname===i||a.pathname.startsWith(i+"/"),[a.pathname]);return n.jsxs("aside",{className:"fixed bg-white border-r border-gray-200 left-0 top-[60px] h-[calc(100vh-60px)] w-[240px] flex flex-col shrink-0 z-50",style:{width:`${cF}px`},children:[n.jsx("nav",{className:"flex-1 overflow-y-auto",children:n.jsx("ul",{className:"p-0 m-0 list-none",children:r5.map(i=>{const l=!!i.children?.length,c=e[i.text]??!1,d=i.icon,h=o(i.path);return n.jsxs("li",{children:[n.jsxs(Kc,{to:i.path,onClick:()=>{l&&s(i.text)},className:`flex items-center gap-3 px-4 py-2.5 text-gray-700 hover:bg-gray-50 transition-colors ${h?"bg-gray-50":""}`,children:[n.jsx(d,{className:"w-4 h-4 shrink-0"}),n.jsx("span",{className:"flex-1 text-sm font-medium",children:i.text}),l&&n.jsx("span",{className:"shrink-0",children:c?n.jsx(pp,{className:"w-4 h-4 text-gray-500"}):n.jsx(Is,{className:"w-4 h-4 text-gray-500"})})]}),l&&n.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${c?"max-h-[1000px] opacity-100":"max-h-0 opacity-0"}`,children:n.jsx("ul",{className:"p-0 m-0 list-none",children:i.children.map(m=>{const y=a.pathname===m.path;return n.jsx("li",{children:n.jsx(Kc,{to:m.path,className:`flex items-center gap-2 px-3 py-1.5 pl-10 text-gray-600 hover:bg-gray-50 transition-colors ${y?"bg-gray-50 text-gray-900":""}`,children:n.jsx("span",{className:"text-xs",children:m.text})})},m.text)})})})]},i.text)})})}),n.jsx("div",{className:"border-t border-gray-200 w-full mt-2"}),n.jsx("nav",{children:n.jsx("ul",{className:"p-0 m-0 list-none",children:n.jsx("li",{children:n.jsxs(Kc,{to:"/settings/general",className:`flex items-center gap-3 px-4 py-2.5 text-gray-700 hover:bg-gray-50 transition-colors ${a.pathname.startsWith("/settings")?"bg-gray-50":""}`,children:[n.jsx(hS,{className:"w-4 h-4 shrink-0"}),n.jsx("span",{className:"flex-1 text-sm font-medium",children:"Settings"})]})})})})]})}const X4=f.createContext(void 0),uF=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),[l,c]=f.useState(null),d=f.useCallback(()=>{i(null)},[]),h=f.useCallback(async x=>{try{s(!0),i(null);const b=await Ke.post("/amount-off-products-discounts",x);return b.data.success&&e(v=>[b.data.data,...v]),b.data}catch(b){const v=b.response?.data?.error||b.message||"Failed to create discount";throw i(v),new Error(v)}finally{s(!1)}},[]),m=f.useCallback(async(x,b)=>{try{s(!0),i(null);const v=new URLSearchParams;b?.page&&v.append("page",String(b.page)),b?.limit&&v.append("limit",String(b.limit)),b?.status&&v.append("status",b.status),b?.method&&v.append("method",b.method);const j=`/amount-off-products-discounts/store/${x}${v.toString()?`?${v.toString()}`:""}`,k=(await Ke.get(j)).data,N=(k.data||[]).map(P=>({_id:P._id,storeId:P.storeId,method:P.method,discountCode:P.discountCode,title:P.title,allowDiscountOnChannels:P.allowDiscountOnChannels,limitTotalUses:P.limitTotalUses,totalUsesLimit:P.totalUsesLimit,limitOneUsePerCustomer:P.limitOneUsePerCustomer,valueType:P.valueType,percentage:P.percentage,fixedAmount:P.fixedAmount,appliesTo:P.appliesTo,oncePerOrder:P.oncePerOrder,eligibility:P.eligibility,applyOnPOSPro:P.applyOnPOSPro,minimumPurchase:P.minimumPurchase,minimumAmount:P.minimumAmount,minimumQuantity:P.minimumQuantity,productDiscounts:P.productDiscounts,orderDiscounts:P.orderDiscounts,shippingDiscounts:P.shippingDiscounts,startDate:P.startDate,startTime:P.startTime,setEndDate:P.setEndDate,endDate:P.endDate,endTime:P.endTime,status:P.status,createdAt:P.createdAt,updatedAt:P.updatedAt,targetProductIds:Array.isArray(P.targetProductIds)?P.targetProductIds.map(R=>typeof R=="string"?R:R?._id).filter(Boolean):[],targetCollectionIds:Array.isArray(P.targetCollectionIds)?P.targetCollectionIds.map(R=>typeof R=="string"?R:R?._id).filter(Boolean):[],targetCustomerSegmentIds:Array.isArray(P.targetCustomerSegmentIds)?P.targetCustomerSegmentIds.map(R=>typeof R=="string"?R:R?._id).filter(Boolean):[],targetCustomerIds:Array.isArray(P.targetCustomerIds)?P.targetCustomerIds.map(R=>typeof R=="string"?R:R?._id).filter(Boolean):[],targetProductDetails:Array.isArray(P.targetProductIds)?P.targetProductIds.filter(R=>typeof R!="string"):[],targetCollectionDetails:Array.isArray(P.targetCollectionIds)?P.targetCollectionIds.filter(R=>typeof R!="string"):[],targetCustomerSegmentDetails:Array.isArray(P.targetCustomerSegmentIds)?P.targetCustomerSegmentIds.filter(R=>typeof R!="string"):[],targetCustomerDetails:Array.isArray(P.targetCustomerIds)?P.targetCustomerIds.filter(R=>typeof R!="string"):[]}));return e(N),c(k.pagination||null),k}catch(v){const j=v.response?.data?.error||v.message||"Failed to fetch discounts";throw i(j),new Error(j)}finally{s(!1)}},[]),y={discounts:r,loading:t,error:o,pagination:l,createDiscount:h,fetchDiscountsByStoreId:m,clearError:d,setDiscounts:e};return n.jsx(X4.Provider,{value:y,children:a})},OS=()=>{const a=f.useContext(X4);if(a===void 0)throw new Error("useAmountOffProductsDiscount must be used within an AmountOffProductsDiscountProvider");return a},Q4=f.createContext(void 0),fF=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async x=>{try{s(!0),i(null);const b=await Ke.get(`/customer-tags/store/${x}`);e(b.data.data)}catch(b){const v=b.response?.data?.message||b.message||"Failed to fetch customer tags";i(v),console.error("Error fetching customer tags:",b)}finally{s(!1)}},[]),c=f.useCallback(async(x,b)=>{try{s(!0),i(null);const j=(await Ke.post("/customer-tags",{storeId:x,name:b.trim()})).data.data;return e(S=>[j,...S]),j}catch(v){const j=v.response?.data?.message||v.message||"Failed to create customer tag";throw i(j),console.error("Error creating customer tag:",v),v}finally{s(!1)}},[]),d=f.useCallback(async x=>{try{s(!0),i(null),await Ke.delete(`/customer-tags/${x}`),e(b=>b.filter(v=>v._id!==x))}catch(b){const v=b.response?.data?.message||b.message||"Failed to delete customer tag";throw i(v),console.error("Error deleting customer tag:",b),b}finally{s(!1)}},[]),h=f.useCallback(()=>{i(null)},[]),m=f.useCallback(()=>{e([])},[]),y={customerTags:r,loading:t,error:o,fetchCustomerTags:l,addCustomerTag:c,deleteCustomerTag:d,clearError:h,clearCustomerTags:m};return n.jsx(Q4.Provider,{value:y,children:a})},J4=()=>{const a=f.useContext(Q4);if(a===void 0)throw new Error("useCustomerTags must be used within a CustomerTagsProvider");return a},e3=f.createContext(void 0),pF=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async b=>{try{s(!0),i(null);const v=await Ke.get(`/customer-timeline/customer/${b}`);e(v.data.data)}catch(v){const j=v.response?.data?.message||v.message||"Failed to fetch timeline";throw i(j),v}finally{s(!1)}},[]),c=f.useCallback(async b=>{try{s(!0),i(null);const j=(await Ke.post("/customer-timeline",b)).data.data;return e(S=>[j,...S]),j}catch(v){const j=v.response?.data?.message||v.message||"Failed to create timeline entry";throw i(j),v}finally{s(!1)}},[]),d=f.useCallback(async(b,v)=>{try{s(!0),i(null);const S=(await Ke.patch(`/customer-timeline/${b}`,v)).data.data;return e(k=>k.map(N=>N._id===b?S:N)),S}catch(j){const S=j.response?.data?.message||j.message||"Failed to update timeline entry";throw i(S),j}finally{s(!1)}},[]),h=f.useCallback(async b=>{try{s(!0),i(null),await Ke.delete(`/customer-timeline/${b}`),e(v=>v.filter(j=>j._id!==b))}catch(v){const j=v.response?.data?.message||v.message||"Failed to delete timeline entry";throw i(j),v}finally{s(!1)}},[]),m=f.useCallback(()=>i(null),[]),y=f.useCallback(()=>e([]),[]),x={timeline:r,loading:t,error:o,fetchCustomerTimelineByCustomerId:l,createCustomerTimeline:c,updateCustomerTimeline:d,deleteCustomerTimeline:h,clearError:m,clearTimeline:y};return n.jsx(e3.Provider,{value:x,children:a})},hF=()=>{const a=f.useContext(e3);if(!a)throw new Error("useCustomerTimeline must be used within a CustomerTimelineProvider");return a},t3=f.createContext(void 0),mF=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async b=>{try{s(!0),i(null);const v=await Ke.get(`/customers/store/${b}`);e(v.data.data)}catch(v){const j=v.response?.data?.message||v.message||"Failed to fetch customers";i(j)}finally{s(!1)}},[]),c=f.useCallback(async(b,v,j=1,S=10)=>{try{s(!0),i(null);const k=await Ke.get(`/customers/search/${b}?q=${encodeURIComponent(v)}&page=${j}&limit=${S}`),{success:N,data:P,pagination:R}=k.data;if(!N)throw new Error("Failed to search customers");return e(P),{success:N,data:P,pagination:R}}catch(k){const N=k.response?.data?.message||k.message||"Failed to search customers";throw i(N),new Error(N)}finally{s(!1)}},[]),d=f.useCallback(async b=>{try{s(!0),i(null);const j=(await Ke.post("/customers",b)).data.data;return e(S=>[j,...S]),j}catch(v){const j=v.response?.data?.message||v.message||"Failed to create customer";throw i(j),v}finally{s(!1)}},[]),h=f.useCallback(async b=>{try{s(!0),i(null),await Ke.delete(`/customers/${b}`),e(v=>v.filter(j=>j._id!==b))}catch(v){const j=v.response?.data?.message||v.message||"Failed to delete customer";throw i(j),v}finally{s(!1)}},[]),m=f.useCallback(()=>i(null),[]),y=f.useCallback(()=>e([]),[]),x={customers:r,loading:t,error:o,fetchCustomersByStoreId:l,searchCustomers:c,addCustomer:d,deleteCustomer:h,clearError:m,clearCustomers:y};return n.jsx(t3.Provider,{value:x,children:a})},Hd=()=>{const a=f.useContext(t3);if(!a)throw new Error("useCustomers must be used within a CustomerProvider");return a},r3=f.createContext(void 0),gF=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async x=>{try{s(!0),i(null);const b=await Ke.get(`/product-tags/store/${x}`);e(b.data.data)}catch(b){const v=b.response?.data?.message||b.message||"Failed to fetch product tags";i(v),console.error("Error fetching product tags:",b)}finally{s(!1)}},[]),c=f.useCallback(async(x,b)=>{try{s(!0),i(null);const j=(await Ke.post("/product-tags",{storeId:x,name:b.trim()})).data.data;return e(S=>[j,...S]),j}catch(v){const j=v.response?.data?.message||v.message||"Failed to create product tag";throw i(j),console.error("Error creating product tag:",v),v}finally{s(!1)}},[]),d=f.useCallback(async x=>{try{s(!0),i(null),await Ke.delete(`/product-tags/${x}`),e(b=>b.filter(v=>v._id!==x))}catch(b){const v=b.response?.data?.message||b.message||"Failed to delete product tag";throw i(v),console.error("Error deleting product tag:",b),b}finally{s(!1)}},[]),h=f.useCallback(()=>{i(null)},[]),m=f.useCallback(()=>{e([])},[]),y={productTags:r,loading:t,error:o,fetchProductTags:l,addProductTag:c,deleteProductTag:d,clearError:h,clearProductTags:m};return n.jsx(r3.Provider,{value:y,children:a})},PS=()=>{const a=f.useContext(r3);if(a===void 0)throw new Error("useProductTags must be used within a ProductTagsProvider");return a},yF="/assets/ziplofy-logo-Cl7-STQb.png",xF=({onStoreChange:a})=>{const{stores:r,activeStoreId:e,loading:t,error:s,createStore:o}=fn(),[i,l]=f.useState(!1),[c,d]=f.useState(!1),[h,m]=f.useState(!1),[y,x]=f.useState(!1),[b,v]=f.useState(""),[j,S]=f.useState(""),[k,N]=f.useState(!1),P=f.useRef(null),R=f.useRef(null),F=f.useRef(null),z=f.useRef(null),H=f.useRef(null),V=f.useCallback(()=>{l(Y=>!Y)},[]),W=f.useCallback(()=>{l(!1)},[]),Z=f.useCallback(Y=>{a&&a(Y),W()},[a,W]),A=f.useCallback(()=>{d(!0),W()},[W]),q=f.useCallback(()=>{d(!1)},[]),I=f.useCallback(()=>{m(!0)},[]),K=f.useCallback(()=>{m(!1),v(""),S(""),N(!1)},[]),D=f.useCallback(async()=>{if(!(!b.trim()||!j.trim()))try{N(!0),await o({storeName:b.trim(),storeDescription:j.trim()}),K()}catch(Y){console.error("Error creating store:",Y)}finally{N(!1)}},[b,j,o,K]),Q=f.useCallback(()=>{x(!0),W()},[W]),oe=f.useCallback(()=>{x(!1)},[]),re=f.useCallback(()=>{window.location.href="http://localhost:3000?logout=true"},[]);f.useEffect(()=>{const Y=Se=>{P.current&&R.current&&!P.current.contains(Se.target)&&!R.current.contains(Se.target)&&W()};return i&&document.addEventListener("mousedown",Y),()=>{document.removeEventListener("mousedown",Y)}},[i,W]),f.useEffect(()=>{const Y=Se=>{Se.key==="Escape"&&(c&&q(),h&&K(),y&&oe())};return(c||h||y)&&document.addEventListener("keydown",Y),()=>{document.removeEventListener("keydown",Y)}},[c,h,y,q,K,oe]);const Te=r.find(Y=>Y._id===e),G=Y=>Y.split(" ").map(Se=>Se.charAt(0)).join("").toUpperCase().slice(0,2);return t?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"bg-gray-600 w-6 h-6 rounded-full flex items-center justify-center text-white text-xs font-medium",children:"..."}),n.jsx("span",{className:"text-gray-900 text-sm",children:"Loading..."})]}):s||!Te?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"bg-gray-600 w-6 h-6 rounded-full flex items-center justify-center text-white text-xs font-medium",children:"?"}),n.jsx("span",{className:"text-gray-900 text-sm",children:"No Store"})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-2 relative",children:[n.jsxs("button",{ref:R,onClick:V,className:"flex items-center gap-2 hover:bg-gray-100 rounded px-2.5 py-1.5 transition-colors",children:[n.jsx("div",{className:"bg-gray-600 w-6 h-6 rounded-full flex items-center justify-center text-white text-xs font-medium",children:G(Te.storeName)}),n.jsx("span",{className:"text-gray-900 text-sm font-medium max-w-[100px] truncate",children:Te.storeName}),n.jsx(Is,{className:"w-4 h-4 text-gray-500"})]}),i&&n.jsxs("div",{ref:P,className:"absolute right-0 top-full mt-1 min-w-[220px] bg-white border border-gray-200 rounded shadow-md py-1.5 z-50",children:[Te&&n.jsx("div",{className:"px-3 py-2 bg-gray-50 border-b border-gray-100",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-600 flex items-center justify-center text-white text-xs font-medium shrink-0",children:G(Te.storeName)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:Te.storeName}),Te.storeDescription&&n.jsx("div",{className:"text-xs text-gray-500 truncate mt-0.5",children:Te.storeDescription})]})]})}),n.jsx("div",{className:"max-h-[280px] overflow-y-auto py-1",children:r.map(Y=>n.jsxs("button",{onClick:()=>Z(Y._id),className:`w-full flex items-center gap-2 px-3 py-2 hover:bg-gray-50 transition-colors text-left ${Y._id===e?"bg-gray-50":""}`,children:[n.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-white text-xs font-medium shrink-0 ${Y._id===e?"bg-gray-600":"bg-gray-400"}`,children:G(Y.storeName)}),n.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[n.jsx("div",{className:`text-sm truncate ${Y._id===e?"font-medium text-gray-900":"text-gray-700"}`,children:Y.storeName}),Y.storeDescription&&n.jsx("div",{className:"text-xs text-gray-500 truncate mt-0.5",children:Y.storeDescription})]}),Y._id===e&&n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gray-600 shrink-0"})]},Y._id))}),n.jsx("div",{className:"border-t border-gray-100 my-1"}),n.jsxs("button",{onClick:A,className:"w-full flex items-center gap-2 px-3 py-2 hover:bg-gray-50 transition-colors text-left",children:[n.jsx(Q0,{className:"w-4 h-4 text-gray-500 shrink-0"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Manage Stores"})]}),n.jsxs("button",{onClick:Q,className:"w-full flex items-center gap-2 px-3 py-2 hover:bg-red-50 transition-colors text-left",children:[n.jsx(LL,{className:"w-4 h-4 text-red-500 shrink-0"}),n.jsx("span",{className:"text-sm text-red-600",children:"Logout"})]})]})]}),c&&n.jsx("div",{className:"fixed inset-0 bg-gray-500/20 z-[1400] flex items-center justify-center p-4",onClick:q,children:n.jsxs("div",{ref:F,className:"bg-white rounded-lg w-full max-w-3xl max-h-[85vh] flex flex-col shadow-lg border border-gray-200",onClick:Y=>Y.stopPropagation(),children:[n.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-gray-200",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Manage Stores"}),n.jsx("button",{onClick:q,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:n.jsx(xs,{className:"w-5 h-5 text-gray-500"})})]}),n.jsxs("div",{className:"p-4 overflow-y-auto flex-1",children:[n.jsx("div",{className:"mb-4",children:n.jsxs("button",{onClick:I,className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 transition-colors",children:[n.jsx(na,{className:"w-4 h-4"}),"Create New Store"]})}),n.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-600 uppercase tracking-wider",children:"Store Name"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-600 uppercase tracking-wider",children:"Description"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-600 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-600 uppercase tracking-wider",children:"Created"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(Y=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[n.jsx("td",{className:"px-3 py-2.5",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-600 flex items-center justify-center text-white text-xs font-medium shrink-0",children:G(Y.storeName)}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:Y.storeName})]})}),n.jsx("td",{className:"px-3 py-2.5",children:n.jsx("span",{className:"text-sm text-gray-600 max-w-[200px] truncate block",children:Y.storeDescription||""})}),n.jsx("td",{className:"px-3 py-2.5",children:n.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${Y._id===e?"bg-gray-100 text-gray-700":"bg-gray-50 text-gray-600"}`,children:Y._id===e?"Active":"Inactive"})}),n.jsx("td",{className:"px-3 py-2.5",children:n.jsx("span",{className:"text-sm text-gray-600",children:new Date(Y.createdAt).toLocaleDateString()})})]},Y._id))})]})})})]}),n.jsx("div",{className:"px-4 py-3 border-t border-gray-200 flex justify-end",children:n.jsx("button",{onClick:q,className:"px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded transition-colors",children:"Close"})})]})}),h&&n.jsx("div",{className:"fixed inset-0 bg-gray-500/20 z-[1400] flex items-center justify-center p-4",onClick:K,children:n.jsxs("div",{ref:z,className:"bg-white rounded-lg w-full max-w-md max-h-[85vh] flex flex-col shadow-lg border border-gray-200",onClick:Y=>Y.stopPropagation(),children:[n.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-gray-200",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Create New Store"}),n.jsx("button",{onClick:K,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:n.jsx(xs,{className:"w-5 h-5 text-gray-500"})})]}),n.jsx("div",{className:"p-4 overflow-y-auto flex-1",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:["Store Name",n.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),n.jsx("input",{type:"text",value:b,onChange:Y=>v(Y.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded text-sm text-gray-900 placeholder:text-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-300 transition-all",placeholder:"Enter store name"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:["Store Description",n.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),n.jsx("textarea",{value:j,onChange:Y=>S(Y.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-200 rounded text-sm text-gray-900 placeholder:text-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-300 transition-all resize-none",placeholder:"Enter store description"})]})]})}),n.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 flex justify-end gap-2",children:[n.jsx("button",{onClick:K,className:"px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded transition-colors",children:"Cancel"}),n.jsx("button",{onClick:D,disabled:!b.trim()||!j.trim()||k,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 rounded hover:bg-gray-800 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:k?"Creating...":"Create Store"})]})]})}),y&&n.jsx("div",{className:"fixed inset-0 bg-gray-500/20 z-[1400] flex items-center justify-center p-4",onClick:oe,children:n.jsxs("div",{ref:H,className:"bg-white rounded-lg w-full max-w-md shadow-lg border border-gray-200",onClick:Y=>Y.stopPropagation(),children:[n.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Confirm Logout"})}),n.jsx("div",{className:"px-4 py-4",children:n.jsx("p",{className:"text-sm text-gray-700",children:"Are you sure you want to logout?"})}),n.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 flex justify-end gap-2",children:[n.jsx("button",{onClick:oe,className:"px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded transition-colors",children:"No"}),n.jsx("button",{onClick:re,className:"px-3 py-1.5 text-sm font-medium text-white bg-red-600 rounded hover:bg-red-700 transition-colors",children:"Yes, Logout"})]})]})})]})},n3=f.createContext(void 0),vF=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(null),[o,i]=f.useState(!1),[l,c]=f.useState(null),d=f.useCallback(async j=>{try{i(!0),c(null);const S=await Ke.get(`/packaging/store/${j}`),{success:k,data:N}=S.data;k?e(N):c("Failed to fetch packagings")}catch(S){console.error("Error fetching packagings:",S),c(S.response?.data?.message||"Failed to fetch packagings")}finally{i(!1)}},[]),h=f.useCallback(async j=>{try{i(!0),c(null);const S=await Ke.post("/packaging/",j),{success:k,data:N}=S.data;if(k){const P=N;e(R=>[P,...R]),P.isDefault&&(s(P),e(R=>R.map(F=>F._id!==P._id?{...F,isDefault:!1}:F)))}else c("Failed to create packaging")}catch(S){throw console.error("Error creating packaging:",S),c(S.response?.data?.message||"Failed to create packaging"),S}finally{i(!1)}},[]),m=f.useCallback(async(j,S)=>{try{i(!0),c(null);const k=await Ke.put(`/packaging/${j}`,S),{success:N,data:P}=k.data;if(N){const R=P;e(F=>F.map(z=>z._id===j?R:z)),R.isDefault?(s(R),e(F=>F.map(z=>z._id!==j?{...z,isDefault:!1}:z))):t?._id===j&&s(null)}else c("Failed to update packaging")}catch(k){throw console.error("Error updating packaging:",k),c(k.response?.data?.message||"Failed to update packaging"),k}finally{i(!1)}},[t]),y=f.useCallback(async j=>{try{i(!0),c(null);const S=await Ke.delete(`/packaging/${j}`),{success:k,data:N}=S.data;if(k){const P=N.deletedPackaging;e(R=>R.filter(F=>F._id!==j)),t?._id===j&&s(null)}else c("Failed to delete packaging")}catch(S){throw console.error("Error deleting packaging:",S),c(S.response?.data?.message||"Failed to delete packaging"),S}finally{i(!1)}},[t]),x=f.useCallback(async j=>{try{i(!0),c(null);const S=await Ke.get(`/packaging/store/${j}/default`),{success:k,data:N}=S.data;k?s(N):c("Failed to fetch default packaging")}catch(S){console.error("Error fetching default packaging:",S),c(S.response?.data?.message||"Failed to fetch default packaging")}finally{i(!1)}},[]),b=f.useCallback(()=>{e([]),s(null),c(null),i(!1)},[]),v={packagings:r,defaultPackaging:t,loading:o,error:l,fetchPackagingsByStoreId:d,createPackaging:h,updatePackaging:m,deletePackaging:y,getDefaultPackaging:x,clearPackagings:b};return n.jsx(n3.Provider,{value:v,children:a})},Ab=()=>{const a=f.useContext(n3);if(a===void 0)throw new Error("usePackaging must be used within a PackagingProvider");return a},a3=f.createContext(void 0),bF=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async y=>{try{s(!0),i(null);const x=await Ke.post("/product-types/",y),{success:b,data:v}=x.data;if(b){const j=v;return e(S=>[j,...S]),j}else throw i("Failed to create product type"),new Error("Failed to create product type")}catch(x){throw console.error("Error creating product type:",x),i(x.response?.data?.message||"Failed to create product type"),x}finally{s(!1)}},[]),c=f.useCallback(async y=>{try{s(!0),i(null);const x=await Ke.get(`/product-types/store/${y}`),{success:b,data:v}=x.data;b?e(v):i("Failed to fetch product types")}catch(x){console.error("Error fetching product types:",x),i(x.response?.data?.message||"Failed to fetch product types")}finally{s(!1)}},[]),d=f.useCallback(async y=>{try{s(!0),i(null);const x=await Ke.delete(`/product-types/${y}`),{success:b,data:v}=x.data;if(b)return e(j=>j.filter(S=>S._id!==y)),v._id;throw i("Failed to delete product type"),new Error("Failed to delete product type")}catch(x){throw console.error("Error deleting product type:",x),i(x.response?.data?.message||"Failed to delete product type"),x}finally{s(!1)}},[]),h=f.useCallback(()=>{e([]),i(null),s(!1)},[]),m={productTypes:r,loading:t,error:o,createProductType:l,getProductTypesByStoreId:c,deleteProductType:d,clearProductTypes:h};return n.jsx(a3.Provider,{value:m,children:a})},s3=()=>{const a=f.useContext(a3);if(a===void 0)throw new Error("useProductType must be used within a ProductTypeProvider");return a},o3=f.createContext(void 0),wF=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(()=>i(null),[]),c=f.useCallback(async y=>{try{s(!0),i(null);const x=await Ke.get(`/transfer-tags/store/${y}`);if(!x.data.success)throw new Error("Failed to fetch transfer tags");e(x.data.data||[])}catch(x){const b=x?.response?.data?.message||x?.message||"Failed to fetch transfer tags";throw i(b),x}finally{s(!1)}},[]),d=f.useCallback(async(y,x)=>{try{s(!0),i(null);const b=await Ke.post("/transfer-tags",{storeId:y,name:x});if(!b.data.success)throw new Error("Failed to create transfer tag");const v=b.data.data;return e(j=>j.some(k=>k._id===v._id)?j:[v,...j]),v}catch(b){const v=b?.response?.data?.message||b?.message||"Failed to create transfer tag";throw i(v),b}finally{s(!1)}},[]),h=f.useCallback(async y=>{try{if(s(!0),i(null),!(await Ke.delete(`/transfer-tags/${y}`)).data.success)throw new Error("Failed to delete transfer tag");e(b=>b.filter(v=>v._id!==y))}catch(x){const b=x?.response?.data?.message||x?.message||"Failed to delete transfer tag";throw i(b),x}finally{s(!1)}},[]),m={tags:r,loading:t,error:o,fetchByStore:c,createTag:d,deleteTag:h,clearError:l};return n.jsx(o3.Provider,{value:m,children:a})},i3=()=>{const a=f.useContext(o3);if(!a)throw new Error("useTransferTags must be used within a TransferTagsProvider");return a},l3=f.createContext(void 0),jF=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async y=>{try{s(!0),i(null);const x=await Ke.post("/vendors",y),{success:b,data:v}=x.data;if(!b)throw new Error("Failed to create vendor");return e(j=>[v,...j]),v}catch(x){const b=x?.response?.data?.message||x?.message||"Failed to create vendor";throw i(b),x}finally{s(!1)}},[]),c=f.useCallback(async y=>{try{s(!0),i(null);const x=await Ke.delete(`/vendors/${y}`),{success:b,data:v}=x.data;if(!b)throw new Error("Failed to delete vendor");return e(j=>j.filter(S=>S._id!==v.deletedVendor.id)),v.deletedVendor.id}catch(x){const b=x?.response?.data?.message||x?.message||"Failed to delete vendor";throw i(b),x}finally{s(!1)}},[]),d=f.useCallback(async y=>{try{s(!0),i(null);const x=await Ke.get(`/vendors/store/${y}`),{success:b,data:v}=x.data;if(!b)throw new Error("Failed to fetch vendors");e(v)}catch(x){const b=x?.response?.data?.message||x?.message||"Failed to fetch vendors";throw i(b),x}finally{s(!1)}},[]),h=f.useCallback(()=>{e([]),i(null),s(!1)},[]),m={vendors:r,loading:t,error:o,createVendor:l,deleteVendor:c,fetchVendorsByStoreId:d,clearVendors:h};return n.jsx(l3.Provider,{value:m,children:a})},Mb=()=>{const a=f.useContext(l3);if(!a)throw new Error("useVendors must be used within a VendorProvider");return a},CF=()=>{const[a,r]=f.useState(""),[e,t]=f.useState(!1),[s,o]=f.useState(!1),{setActiveStoreId:i,activeStoreId:l}=fn(),{fetchCustomersByStoreId:c}=Hd(),{fetchCustomerTags:d}=J4(),{fetchProductTags:h}=PS(),{getProductTypesByStoreId:m}=s3(),{fetchPackagingsByStoreId:y}=Ab(),{fetchVendorsByStoreId:x}=Mb(),{fetchByStore:b}=i3(),v=f.useRef(null),j=f.useRef(null);f.useEffect(()=>{l&&(c(l),d(l),h(l),m(l),y(l),x(l),b(l))},[l,c,d,h,m,y,x,b]);const S=f.useCallback(F=>{r(F.target.value)},[]),k=f.useCallback(()=>{t(!0)},[]),N=f.useCallback(()=>{t(!1)},[]),P=f.useCallback(F=>{o(F)},[]),R=f.useCallback(F=>{i(F)},[i]);return f.useEffect(()=>{const F=z=>{v.current&&j.current&&!v.current.contains(z.target)&&!j.current.contains(z.target)&&N()};return e&&document.addEventListener("mousedown",F),()=>{document.removeEventListener("mousedown",F)}},[e,N]),f.useEffect(()=>{const F=z=>{z.key==="Escape"&&s&&P(!1)};return s&&document.addEventListener("keydown",F),()=>{document.removeEventListener("keydown",F)}},[s,P]),n.jsxs(n.Fragment,{children:[n.jsx("header",{className:"fixed top-0 left-0 right-0 h-12 bg-white border-b border-gray-200 z-[1201]",children:n.jsxs("div",{className:"h-full px-3 flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center gap-3",children:n.jsx("img",{src:yF,alt:"Ziplofy Logo",className:"h-8 w-auto object-contain"})}),n.jsx("div",{className:"flex-1 max-w-[500px] mx-4",children:n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-2.5 flex items-center pointer-events-none",children:n.jsx(Ro,{className:"w-4 h-4 text-gray-400"})}),n.jsx("input",{type:"text",placeholder:"Search",value:a,onChange:S,className:"w-full h-8 pl-8 pr-3 bg-gray-50 border border-gray-200 rounded text-sm text-gray-900 placeholder:text-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-300 transition-all"})]})}),n.jsxs("div",{className:"flex gap-1.5",children:[n.jsxs("div",{className:"flex items-center gap-1 bg-gray-50 rounded border border-gray-200",children:[n.jsxs("div",{className:"relative",children:[n.jsx("button",{ref:j,onClick:k,className:"p-1.5 rounded transition-colors hover:bg-gray-100","aria-label":"Notifications","aria-expanded":e,"aria-haspopup":"true",children:n.jsx(My,{className:"w-4 h-4 text-gray-600"})}),e&&n.jsx("div",{ref:v,className:"absolute right-0 top-full mt-1 min-w-[200px] bg-white border border-gray-200 rounded shadow-md py-1.5 z-50",children:n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm cursor-default",children:"No alerts as of now"})})]}),n.jsx("button",{onClick:()=>P(!0),className:"p-1.5 hover:bg-gray-100 rounded transition-colors","aria-label":"Setup guide",children:n.jsx(n4,{className:"w-4 h-4 text-gray-600"})})]}),n.jsx("div",{className:"relative bg-gray-50 rounded border border-gray-200",children:n.jsx(xF,{onStoreChange:R})})]})]})}),n.jsx("div",{className:`fixed top-0 right-0 h-full w-[300px] bg-white border-l border-gray-200 shadow-lg z-[1300] transform transition-transform duration-300 ease-in-out ${s?"translate-x-0":"translate-x-full"}`,children:n.jsxs("div",{className:"h-full flex flex-col",children:[n.jsxs("div",{className:"p-3 border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Setup guide"}),n.jsx("button",{onClick:()=>P(!1),className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors","aria-label":"Close",children:n.jsx(xs,{className:"w-5 h-5"})})]}),n.jsx("p",{className:"text-sm text-gray-500",children:"Follow these steps to get your store ready."})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-3",children:n.jsxs("ul",{className:"space-y-2",children:[n.jsxs("li",{className:"flex items-center gap-2 py-1",children:[n.jsx("div",{className:"flex items-center justify-center",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 text-gray-600 border-gray-300 rounded focus:ring-gray-400"})}),n.jsx("span",{className:"text-sm text-gray-700",children:"Add store name"})]}),n.jsxs("li",{className:"flex items-center gap-2 py-1",children:[n.jsx("div",{className:"flex items-center justify-center",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 text-gray-600 border-gray-300 rounded focus:ring-gray-400"})}),n.jsx("span",{className:"text-sm text-gray-700",children:"Add your first product"})]}),n.jsxs("li",{className:"flex items-center gap-2 py-1",children:[n.jsx("div",{className:"flex items-center justify-center",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 text-gray-600 border-gray-300 rounded focus:ring-gray-400"})}),n.jsx("span",{className:"text-sm text-gray-700",children:"Design your store"})]}),n.jsxs("li",{className:"flex items-center gap-2 py-1",children:[n.jsx("div",{className:"flex items-center justify-center",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 text-gray-600 border-gray-300 rounded focus:ring-gray-400"})}),n.jsx("span",{className:"text-sm text-gray-700",children:"Unlock your store"})]}),n.jsxs("li",{className:"flex items-center gap-2 py-1",children:[n.jsx("div",{className:"flex items-center justify-center",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 text-gray-600 border-gray-300 rounded focus:ring-gray-400"})}),n.jsx("span",{className:"text-sm text-gray-700",children:"Set up a payment provider"})]})]})})]})}),s&&n.jsx("div",{className:"fixed inset-0 bg-gray-500/20 z-[1250]",onClick:()=>P(!1),"aria-hidden":"true"})]})},SF="modulepreload",NF=function(a){return"/"+a},n5={},Uf=function(r,e,t){let s=Promise.resolve();if(e&&e.length>0){let c=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=i?.nonce||i?.getAttribute("nonce");s=c(e.map(d=>{if(d=NF(d),d in n5)return;n5[d]=!0;const h=d.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${m}`))return;const y=document.createElement("link");if(y.rel=h?"stylesheet":SF,h||(y.as="script"),y.crossOrigin="",y.href=d,l&&y.setAttribute("nonce",l),document.head.appendChild(y),h)return new Promise((x,b)=>{y.addEventListener("load",x),y.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return s.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return r().catch(o)})},a5=()=>{const{themeId:a=""}=qa(),r=f.useRef(null),e=mr(),{activeStoreId:t}=fn(),[s,o]=f.useState(!0),[i,l]=f.useState(null),[c,d]=f.useState("");return f.useEffect(()=>{let h,m=!1;async function y(){try{o(!0),l(null);const x=(await Uf(async()=>{const{default:H}=await Promise.resolve().then(()=>JO);return{default:H}},[])).default;await Uf(()=>Promise.resolve().then(()=>eP),void 0);const b="https://backend.ziplofy.com/api",v=`?v=${Date.now()}`,S=(()=>{try{const H=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken")||localStorage.getItem("token")||sessionStorage.getItem("token");if(!H)return null;const V=H.split(".");if(V.length<2)return null;const W=JSON.parse(atob(V[1].replace(/-/g,"+").replace(/_/g,"/")));return String(W.uid||W.userId||W.id||"")}catch{return null}})();try{const H=await fetch(`${b}/themes/${a}`,{credentials:"include"});if(H.ok){const V=await H.json(),W=V?.data?.name||V?.name||"Theme";d(W)}}catch{}const k=t?`${b}/themes/installed/${t}/${a}/unzippedTheme`:S?`${b}/themes/installed/${S}/${a}/unzippedTheme`:null;let N=`${b}/themes/preview/${a}`,P=`${b}/themes/preview/${a}/assets/css/style.css`;k&&(await fetch(`${k}/index.html${v}`,{credentials:"include"})).ok&&(N=`${k}/index.html${v}`,P=`${k}/assets/css/style.css${v}`);const R=await fetch(N,{credentials:"include"});if(!R.ok)throw new Error("Failed to load theme HTML for editor");const F=await R.text();if(m)return;h=x.init({container:r.current,fromElement:!1,height:"calc(100vh - 100px)",storageManager:{autoload:!1},canvas:{styles:[P]},selectorManager:{componentFirst:!0}}),h.setComponents(F),h.Panels.addButton("options",{id:"preview-page",className:"fa fa-eye",attributes:{title:"Preview"},command:"preview"}),o(!1)}catch(x){l(x?.message||"Failed to initialize editor"),o(!1)}}return y(),()=>{m=!0}},[a]),n.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"8px 0"},children:[n.jsx("button",{onClick:()=>{typeof window<"u"&&window.history.length>1?e(-1):e("/themes/all-themes")},style:{border:"1px solid #d1d5da",background:"#fff",color:"#111827",padding:"6px 10px",borderRadius:6,cursor:"pointer"},children:" Back"}),n.jsx("div",{style:{fontWeight:700,fontSize:16},children:c?`Editing: ${c}`:"Editing Theme"})]}),s&&n.jsx("div",{children:"Loading editor..."}),i&&n.jsx("div",{style:{color:"red"},children:i}),n.jsx("div",{ref:r,style:{flex:1,minHeight:600,border:"1px solid #e5e7eb",borderRadius:6}})]})};function s5(a,r){(r==null||r>a.length)&&(r=a.length);for(var e=0,t=Array(r);e<r;e++)t[e]=a[e];return t}function kF(a){if(Array.isArray(a))return a}function _F(a,r,e){return(r=IF(r))in a?Object.defineProperty(a,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[r]=e,a}function EF(a,r){var e=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(e!=null){var t,s,o,i,l=[],c=!0,d=!1;try{if(o=(e=e.call(a)).next,r!==0)for(;!(c=(t=o.call(e)).done)&&(l.push(t.value),l.length!==r);c=!0);}catch(h){d=!0,s=h}finally{try{if(!c&&e.return!=null&&(i=e.return(),Object(i)!==i))return}finally{if(d)throw s}}return l}}function TF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o5(a,r){var e=Object.keys(a);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(a);r&&(t=t.filter(function(s){return Object.getOwnPropertyDescriptor(a,s).enumerable})),e.push.apply(e,t)}return e}function i5(a){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?o5(Object(e),!0).forEach(function(t){_F(a,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(e)):o5(Object(e)).forEach(function(t){Object.defineProperty(a,t,Object.getOwnPropertyDescriptor(e,t))})}return a}function OF(a,r){if(a==null)return{};var e,t,s=PF(a,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);for(t=0;t<o.length;t++)e=o[t],r.indexOf(e)===-1&&{}.propertyIsEnumerable.call(a,e)&&(s[e]=a[e])}return s}function PF(a,r){if(a==null)return{};var e={};for(var t in a)if({}.hasOwnProperty.call(a,t)){if(r.indexOf(t)!==-1)continue;e[t]=a[t]}return e}function AF(a,r){return kF(a)||EF(a,r)||RF(a,r)||TF()}function MF(a,r){if(typeof a!="object"||!a)return a;var e=a[Symbol.toPrimitive];if(e!==void 0){var t=e.call(a,r);if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(a)}function IF(a){var r=MF(a,"string");return typeof r=="symbol"?r:r+""}function RF(a,r){if(a){if(typeof a=="string")return s5(a,r);var e={}.toString.call(a).slice(8,-1);return e==="Object"&&a.constructor&&(e=a.constructor.name),e==="Map"||e==="Set"?Array.from(a):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?s5(a,r):void 0}}function LF(a,r,e){return r in a?Object.defineProperty(a,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[r]=e,a}function l5(a,r){var e=Object.keys(a);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(a);r&&(t=t.filter(function(s){return Object.getOwnPropertyDescriptor(a,s).enumerable})),e.push.apply(e,t)}return e}function c5(a){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?l5(Object(e),!0).forEach(function(t){LF(a,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(e)):l5(Object(e)).forEach(function(t){Object.defineProperty(a,t,Object.getOwnPropertyDescriptor(e,t))})}return a}function DF(){for(var a=arguments.length,r=new Array(a),e=0;e<a;e++)r[e]=arguments[e];return function(t){return r.reduceRight(function(s,o){return o(s)},t)}}function Bg(a){return function r(){for(var e=this,t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return s.length>=a.length?a.apply(this,s):function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];return r.apply(e,[].concat(s,l))}}}function rv(a){return{}.toString.call(a).includes("Object")}function FF(a){return!Object.keys(a).length}function my(a){return typeof a=="function"}function BF(a,r){return Object.prototype.hasOwnProperty.call(a,r)}function zF(a,r){return rv(r)||Lu("changeType"),Object.keys(r).some(function(e){return!BF(a,e)})&&Lu("changeField"),r}function UF(a){my(a)||Lu("selectorType")}function $F(a){my(a)||rv(a)||Lu("handlerType"),rv(a)&&Object.values(a).some(function(r){return!my(r)})&&Lu("handlersType")}function VF(a){a||Lu("initialIsRequired"),rv(a)||Lu("initialType"),FF(a)&&Lu("initialContent")}function WF(a,r){throw new Error(a[r]||a.default)}var HF={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Lu=Bg(WF)(HF),c0={changes:zF,selector:UF,handler:$F,initial:VF};function qF(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};c0.initial(a),c0.handler(r);var e={current:a},t=Bg(YF)(e,r),s=Bg(KF)(e),o=Bg(c0.changes)(a),i=Bg(GF)(e);function l(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(h){return h};return c0.selector(d),d(e.current)}function c(d){DF(t,s,o,i)(d)}return[l,c]}function GF(a,r){return my(r)?r(a.current):r}function KF(a,r){return a.current=c5(c5({},a.current),r),r}function YF(a,r,e){return my(r)?r(a.current):Object.keys(e).forEach(function(t){var s;return(s=r[t])===null||s===void 0?void 0:s.call(r,a.current[t])}),e}var ZF={create:qF},XF={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function QF(a){return function r(){for(var e=this,t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return s.length>=a.length?a.apply(this,s):function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];return r.apply(e,[].concat(s,l))}}}function JF(a){return{}.toString.call(a).includes("Object")}function eB(a){return a||d5("configIsRequired"),JF(a)||d5("configType"),a.urls?(tB(),{paths:{vs:a.urls.monacoBase}}):a}function tB(){console.warn(c3.deprecation)}function rB(a,r){throw new Error(a[r]||a.default)}var c3={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},d5=QF(rB)(c3),nB={config:eB},aB=function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return function(s){return e.reduceRight(function(o,i){return i(o)},s)}};function d3(a,r){return Object.keys(r).forEach(function(e){r[e]instanceof Object&&a[e]&&Object.assign(r[e],d3(a[e],r[e]))}),i5(i5({},a),r)}var sB={type:"cancelation",msg:"operation is manually canceled"};function vj(a){var r=!1,e=new Promise(function(t,s){a.then(function(o){return r?s(sB):t(o)}),a.catch(s)});return e.cancel=function(){return r=!0},e}var oB=["monaco"],iB=ZF.create({config:XF,isInitialized:!1,resolve:null,reject:null,monaco:null}),u3=AF(iB,2),Uy=u3[0],Ib=u3[1];function lB(a){var r=nB.config(a),e=r.monaco,t=OF(r,oB);Ib(function(s){return{config:d3(s.config,t),monaco:e}})}function cB(){var a=Uy(function(r){var e=r.monaco,t=r.isInitialized,s=r.resolve;return{monaco:e,isInitialized:t,resolve:s}});if(!a.isInitialized){if(Ib({isInitialized:!0}),a.monaco)return a.resolve(a.monaco),vj(bj);if(window.monaco&&window.monaco.editor)return f3(window.monaco),a.resolve(window.monaco),vj(bj);aB(dB,fB)(pB)}return vj(bj)}function dB(a){return document.body.appendChild(a)}function uB(a){var r=document.createElement("script");return a&&(r.src=a),r}function fB(a){var r=Uy(function(t){var s=t.config,o=t.reject;return{config:s,reject:o}}),e=uB("".concat(r.config.paths.vs,"/loader.js"));return e.onload=function(){return a()},e.onerror=r.reject,e}function pB(){var a=Uy(function(e){var t=e.config,s=e.resolve,o=e.reject;return{config:t,resolve:s,reject:o}}),r=window.require;r.config(a.config),r(["vs/editor/editor.main"],function(e){var t=e.m||e;f3(t),a.resolve(t)},function(e){a.reject(e)})}function f3(a){Uy().monaco||Ib({monaco:a})}function hB(){return Uy(function(a){var r=a.monaco;return r})}var bj=new Promise(function(a,r){return Ib({resolve:a,reject:r})}),p3={config:lB,init:cB,__getMonacoInstance:hB},mB={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},wj=mB,gB={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},yB=gB;function xB({children:a}){return gr.createElement("div",{style:yB.container},a)}var vB=xB,bB=vB;function wB({width:a,height:r,isEditorReady:e,loading:t,_ref:s,className:o,wrapperProps:i}){return gr.createElement("section",{style:{...wj.wrapper,width:a,height:r},...i},!e&&gr.createElement(bB,null,t),gr.createElement("div",{ref:s,style:{...wj.fullWidth,...!e&&wj.hide},className:o}))}var jB=wB,h3=f.memo(jB);function CB(a){f.useEffect(a,[])}var m3=CB;function SB(a,r,e=!0){let t=f.useRef(!0);f.useEffect(t.current||!e?()=>{t.current=!1}:a,r)}var Ki=SB;function Zg(){}function hh(a,r,e,t){return NB(a,t)||kB(a,r,e,t)}function NB(a,r){return a.editor.getModel(g3(a,r))}function kB(a,r,e,t){return a.editor.createModel(r,e,t?g3(a,t):void 0)}function g3(a,r){return a.Uri.parse(r)}function _B({original:a,modified:r,language:e,originalLanguage:t,modifiedLanguage:s,originalModelPath:o,modifiedModelPath:i,keepCurrentOriginalModel:l=!1,keepCurrentModifiedModel:c=!1,theme:d="light",loading:h="Loading...",options:m={},height:y="100%",width:x="100%",className:b,wrapperProps:v={},beforeMount:j=Zg,onMount:S=Zg}){let[k,N]=f.useState(!1),[P,R]=f.useState(!0),F=f.useRef(null),z=f.useRef(null),H=f.useRef(null),V=f.useRef(S),W=f.useRef(j),Z=f.useRef(!1);m3(()=>{let K=p3.init();return K.then(D=>(z.current=D)&&R(!1)).catch(D=>D?.type!=="cancelation"&&console.error("Monaco initialization: error:",D)),()=>F.current?I():K.cancel()}),Ki(()=>{if(F.current&&z.current){let K=F.current.getOriginalEditor(),D=hh(z.current,a||"",t||e||"text",o||"");D!==K.getModel()&&K.setModel(D)}},[o],k),Ki(()=>{if(F.current&&z.current){let K=F.current.getModifiedEditor(),D=hh(z.current,r||"",s||e||"text",i||"");D!==K.getModel()&&K.setModel(D)}},[i],k),Ki(()=>{let K=F.current.getModifiedEditor();K.getOption(z.current.editor.EditorOption.readOnly)?K.setValue(r||""):r!==K.getValue()&&(K.executeEdits("",[{range:K.getModel().getFullModelRange(),text:r||"",forceMoveMarkers:!0}]),K.pushUndoStop())},[r],k),Ki(()=>{F.current?.getModel()?.original.setValue(a||"")},[a],k),Ki(()=>{let{original:K,modified:D}=F.current.getModel();z.current.editor.setModelLanguage(K,t||e||"text"),z.current.editor.setModelLanguage(D,s||e||"text")},[e,t,s],k),Ki(()=>{z.current?.editor.setTheme(d)},[d],k),Ki(()=>{F.current?.updateOptions(m)},[m],k);let A=f.useCallback(()=>{if(!z.current)return;W.current(z.current);let K=hh(z.current,a||"",t||e||"text",o||""),D=hh(z.current,r||"",s||e||"text",i||"");F.current?.setModel({original:K,modified:D})},[e,r,s,a,t,o,i]),q=f.useCallback(()=>{!Z.current&&H.current&&(F.current=z.current.editor.createDiffEditor(H.current,{automaticLayout:!0,...m}),A(),z.current?.editor.setTheme(d),N(!0),Z.current=!0)},[m,d,A]);f.useEffect(()=>{k&&V.current(F.current,z.current)},[k]),f.useEffect(()=>{!P&&!k&&q()},[P,k,q]);function I(){let K=F.current?.getModel();l||K?.original?.dispose(),c||K?.modified?.dispose(),F.current?.dispose()}return gr.createElement(h3,{width:x,height:y,isEditorReady:k,loading:h,_ref:H,className:b,wrapperProps:v})}var EB=_B;f.memo(EB);function TB(a){let r=f.useRef();return f.useEffect(()=>{r.current=a},[a]),r.current}var OB=TB,d0=new Map;function PB({defaultValue:a,defaultLanguage:r,defaultPath:e,value:t,language:s,path:o,theme:i="light",line:l,loading:c="Loading...",options:d={},overrideServices:h={},saveViewState:m=!0,keepCurrentModel:y=!1,width:x="100%",height:b="100%",className:v,wrapperProps:j={},beforeMount:S=Zg,onMount:k=Zg,onChange:N,onValidate:P=Zg}){let[R,F]=f.useState(!1),[z,H]=f.useState(!0),V=f.useRef(null),W=f.useRef(null),Z=f.useRef(null),A=f.useRef(k),q=f.useRef(S),I=f.useRef(),K=f.useRef(t),D=OB(o),Q=f.useRef(!1),oe=f.useRef(!1);m3(()=>{let G=p3.init();return G.then(Y=>(V.current=Y)&&H(!1)).catch(Y=>Y?.type!=="cancelation"&&console.error("Monaco initialization: error:",Y)),()=>W.current?Te():G.cancel()}),Ki(()=>{let G=hh(V.current,a||t||"",r||s||"",o||e||"");G!==W.current?.getModel()&&(m&&d0.set(D,W.current?.saveViewState()),W.current?.setModel(G),m&&W.current?.restoreViewState(d0.get(o)))},[o],R),Ki(()=>{W.current?.updateOptions(d)},[d],R),Ki(()=>{!W.current||t===void 0||(W.current.getOption(V.current.editor.EditorOption.readOnly)?W.current.setValue(t):t!==W.current.getValue()&&(oe.current=!0,W.current.executeEdits("",[{range:W.current.getModel().getFullModelRange(),text:t,forceMoveMarkers:!0}]),W.current.pushUndoStop(),oe.current=!1))},[t],R),Ki(()=>{let G=W.current?.getModel();G&&s&&V.current?.editor.setModelLanguage(G,s)},[s],R),Ki(()=>{l!==void 0&&W.current?.revealLine(l)},[l],R),Ki(()=>{V.current?.editor.setTheme(i)},[i],R);let re=f.useCallback(()=>{if(!(!Z.current||!V.current)&&!Q.current){q.current(V.current);let G=o||e,Y=hh(V.current,t||a||"",r||s||"",G||"");W.current=V.current?.editor.create(Z.current,{model:Y,automaticLayout:!0,...d},h),m&&W.current.restoreViewState(d0.get(G)),V.current.editor.setTheme(i),l!==void 0&&W.current.revealLine(l),F(!0),Q.current=!0}},[a,r,e,t,s,o,d,h,m,i,l]);f.useEffect(()=>{R&&A.current(W.current,V.current)},[R]),f.useEffect(()=>{!z&&!R&&re()},[z,R,re]),K.current=t,f.useEffect(()=>{R&&N&&(I.current?.dispose(),I.current=W.current?.onDidChangeModelContent(G=>{oe.current||N(W.current.getValue(),G)}))},[R,N]),f.useEffect(()=>{if(R){let G=V.current.editor.onDidChangeMarkers(Y=>{let Se=W.current.getModel()?.uri;if(Se&&Y.find(fe=>fe.path===Se.path)){let fe=V.current.editor.getModelMarkers({resource:Se});P?.(fe)}});return()=>{G?.dispose()}}return()=>{}},[R,P]);function Te(){I.current?.dispose(),y?m&&d0.set(o,W.current.saveViewState()):W.current.getModel()?.dispose(),W.current.dispose()}return gr.createElement(h3,{width:x,height:b,isEditorReady:R,loading:c,_ref:Z,className:v,wrapperProps:j})}var AB=PB,MB=f.memo(AB),IB=MB;const u5=["index.html","assets/css/style.css","assets/js/script.js"],y3=({fullScreen:a=!1})=>{const{themeId:r=""}=qa(),{activeStoreId:e}=fn(),[t,s]=f.useState("index.html"),[o,i]=f.useState({}),[l,c]=f.useState(u5),[d,h]=f.useState(""),m=mr(),[y,x]=f.useState(!0),[b,v]=f.useState(null),[j,S]=f.useState(null),[k,N]=f.useState(new Set),[P,R]=f.useState(null),F=f.useRef(null),z=f.useRef(null),H=f.useRef(null),[V,W]=f.useState(280),[Z,A]=f.useState(420),[q,I]=f.useState(!1),[K,D]=f.useState(!1),[Q,oe]=f.useState(null),re=Q==="explorer",Te=Q==="editor",G=Q==="preview",Y=f.useMemo(()=>"https://backend.ziplofy.com/api",[]),Se=f.useMemo(()=>`${Y}/themes/preview/${r}`,[Y,r]),[fe,Ee]=f.useState(!1),[Ae,qe]=f.useState(null),[we,Oe]=f.useState(null),ze=f.useCallback(()=>typeof window>"u"?"":localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken")||localStorage.getItem("token")||sessionStorage.getItem("token")||localStorage.getItem("authToken")||sessionStorage.getItem("authToken")||"",[]),We=f.useCallback(()=>{const he=ze();return he?{Authorization:`Bearer ${he}`}:{}},[ze]),pt=f.useMemo(()=>!!ze(),[ze]),Pt=f.useCallback(()=>{const he=ze();if(!he)return"";try{const se=he.split(".");if(se.length<2)return"";const Le=JSON.parse(atob(se[1].replace(/-/g,"+").replace(/_/g,"/")));return String(Le.uid||Le.userId||Le.id||"")}catch{return""}},[ze]),ee=f.useMemo(()=>{if(e)return`${Y}/themes/installed/${e}/${r}/unzippedTheme/`;const he=Pt();return he?`${Y}/themes/installed/${he}/${r}/unzippedTheme/`:""},[Y,r,e,Pt]),Ne=f.useCallback(async()=>{if(!r||!t){Oe("No file selected to save.");return}if(!pt){Oe("Login required to save.");return}if(!e){Oe("Please select a store before saving.");return}const he=o[t]??"";!he&&he!==""&&console.warn("Warning: Saving empty content"),Ee(!0),Oe(null);try{const se={"Content-Type":"application/json",...We()},Le={path:t,content:he,storeId:e};console.log(" Saving file:",{themeId:r,path:t,storeId:e,contentLength:he.length});const Ue=await fetch(`${Y}/themes/${r}/save-edit`,{method:"POST",headers:se,credentials:"include",body:JSON.stringify(Le)});if(!Ue.ok){const _e=await Ue.text().catch(()=>"")||`Save failed with status ${Ue.status}`;throw console.error(" Save failed:",_e),new Error(_e)}const Ge=await Ue.json().catch(()=>({}));if(Ge.success!==!1)console.log(" File saved successfully:",{themeId:r,path:t,storeId:e}),qe(new Date),Oe(null);else throw new Error(Ge.error||Ge.message||"Save failed")}catch(se){const Le=se?.message||"Failed to save file";console.error(" Save error:",Le),Oe(Le)}finally{Ee(!1)}},[Y,r,t,o,We,pt,e]);f.useEffect(()=>{let he=!1;async function se(){try{x(!0),v(null),console.log(` Store changed, clearing file cache. New storeId: ${e||"none"}`),i({});try{const _e=e?`?storeId=${encodeURIComponent(e)}`:"",le=await fetch(`${Y}/themes/files/${r}${_e}`,{credentials:"include",headers:We()});if(le.ok){const Xe=await le.json();Xe?.files?.length&&c(Xe.files)}}catch{}try{const _e=await fetch(`${Y}/themes/${r}`,{credentials:"include",headers:We()});if(_e.ok){const le=await _e.json(),Xe=le?.data?.name||le?.name||"Theme";he||h(Xe)}}catch{}const Le=e?`&storeId=${encodeURIComponent(e)}`:"";console.log(` Loading files for storeId: ${e||"none (user-specific)"}`);const[Ue,Ge,ie]=await Promise.all([fetch(`${Y}/themes/file/${r}?path=${encodeURIComponent("index.html")}${Le}`,{credentials:"include",headers:We()}).then(_e=>_e.ok?_e.text():""),fetch(`${Y}/themes/file/${r}?path=${encodeURIComponent("assets/css/style.css")}${Le}`,{credentials:"include",headers:We()}).then(_e=>_e.ok?_e.text():""),fetch(`${Y}/themes/file/${r}?path=${encodeURIComponent("assets/js/script.js")}${Le}`,{credentials:"include",headers:We()}).then(_e=>_e.ok?_e.text():"")]);if(he)return;i(_e=>({..._e,"index.html":Ue,"assets/css/style.css":Ge,"assets/js/script.js":ie})),s("index.html")}catch(Le){v(Le?.message||"Failed to load theme files")}finally{x(!1)}}return se(),()=>{he=!0}},[Se,e,Y,r,We]),f.useEffect(()=>{async function he(se){if(o[se]===void 0)try{S(se);const Le=e?`&storeId=${encodeURIComponent(e)}`:"",Ue=await fetch(`${Y}/themes/file/${r}?path=${encodeURIComponent(se)}${Le}`,{credentials:"include",headers:We()});if(Ue.ok){const Ge=await Ue.text();i(ie=>({...ie,[se]:Ge}))}}catch{}finally{S(Le=>Le===se?null:Le)}}t&&!u5.includes(t)&&he(t)},[t,Y,r,o,e,We]);const Ie=f.useCallback(()=>{const he=o["index.html"]||"",se=o["assets/js/script.js"]||"";let Le=he.replace(/<base[^>]*>/gi,"").replace(/<script[\s\S]*?<\/script>/gi,"");const Ue=Le.includes("</head>")?Le:Le.replace(/<html[^>]*>/i,"$&<head></head>"),Ge=ee||`${Se}/`;return Ue.replace(/<head>/i,`<head><base href="${Ge}">`).replace(/<\/body>/i,`${se?`<script type="module" src="${Ge}assets/js/script.js"><\/script>`:""}</body>`)},[o,Se,ee]);f.useEffect(()=>{if(!F.current)return;const he=F.current.contentDocument;he&&(he.open(),he.write(Ie()),he.close())},[o,Ie]),f.useEffect(()=>{const he=se=>{if((navigator.platform.toUpperCase().indexOf("MAC")>=0?se.metaKey:se.ctrlKey)&&(se.key==="f"||se.key==="F")){se.preventDefault();try{z.current?.focus?.(),z.current?.trigger?.("keyboard","actions.find",null)}catch{}}};return window.addEventListener("keydown",he,{capture:!0}),()=>window.removeEventListener("keydown",he,{capture:!0})},[]),f.useEffect(()=>{const he=Le=>{if(!H.current)return;const Ue=H.current.getBoundingClientRect(),Ge=180,ie=280,_e=300,le=Ue.width;if(q){const Xe=Le.clientX-Ue.left,Fe=Math.max(Ge,Math.min(Xe,le-Z-_e));W(Fe)}else if(K){const Xe=Ue.right-Le.clientX,Fe=Math.max(ie,Math.min(Xe,le-V-_e));A(Fe)}},se=()=>{I(!1),D(!1)};return window.addEventListener("mousemove",he),window.addEventListener("mouseup",se),()=>{window.removeEventListener("mousemove",he),window.removeEventListener("mouseup",se)}},[q,K,V,Z]);const ne=he=>{typeof he=="string"&&i(se=>({...se,[t]:he}))},M=f.useMemo(()=>{const he=t.toLowerCase();return he.endsWith(".html")||he.endsWith(".htm")?"html":he.endsWith(".css")?"css":he.endsWith(".js")||he.endsWith(".mjs")||he.endsWith(".cjs")?"javascript":he.endsWith(".json")?"json":he.endsWith(".ts")||he.endsWith(".tsx")?"typescript":he.endsWith(".jsx")?"javascript":he.endsWith(".md")?"markdown":"plaintext"},[t]),U=f.useMemo(()=>{const he=t.toLowerCase();return/\.(html?|css|js|mjs|cjs|json|ts|tsx|jsx|md|txt|svg|xml|yml|yaml|env|ini|cfg|conf)$/i.test(he)},[t]),J=f.useMemo(()=>{const he={};return l.forEach(se=>{const Le=se.split("/");let Ue=he;for(let Ge=0;Ge<Le.length;Ge++){const ie=Le[Ge],_e=Ge===Le.length-1;Ue[ie]||(Ue[ie]=_e?{type:"file",path:se}:{type:"folder",children:{}}),_e||(Ue=Ue[ie].children)}}),he},[l]),ce=he=>{N(se=>{const Le=new Set(se);return Le.has(he)?Le.delete(he):Le.add(he),Le})},ue=(he,se="",Le=0)=>{const Ue=[];return Object.entries(he).forEach(([Ge,ie])=>{if(Ge==="files")return;const _e=se?`${se}/${Ge}`:Ge,le=k.has(_e);if(ie.type==="folder")Ue.push(n.jsxs("div",{children:[n.jsxs("div",{onClick:()=>ce(_e),onMouseEnter:()=>R(_e),onMouseLeave:()=>R(null),style:{display:"flex",alignItems:"center",padding:"4px 8px",paddingLeft:`${8+Le*16}px`,cursor:"pointer",fontSize:"13px",color:"#8B949E",backgroundColor:P===_e?"#21262D":"transparent",borderRadius:"3px",margin:"1px 0"},children:[n.jsx("span",{style:{marginRight:"6px",fontSize:"12px"},children:le?"":""}),Ge]}),le&&n.jsx("div",{children:ue(ie.children,_e,Le+1)})]},_e));else{const Xe=t===ie.path,Fe=j===ie.path,dt=P===ie.path;Ue.push(n.jsxs("div",{onClick:()=>s(ie.path),onMouseEnter:()=>R(ie.path),onMouseLeave:()=>R(null),style:{display:"flex",alignItems:"center",padding:"4px 8px",paddingLeft:`${8+Le*16}px`,cursor:"pointer",fontSize:"13px",color:Xe?"#FFFFFF":"#8B949E",backgroundColor:Xe?"#0969DA":dt?"#21262D":"transparent",borderRadius:"3px",margin:"1px 0"},children:[n.jsx("span",{style:{marginRight:"6px",fontSize:"12px"},children:xe(Ge)}),Ge,Fe&&n.jsx("span",{style:{marginLeft:"6px",fontSize:"11px",color:"#6b7280"},children:"(loading)"})]},ie.path))}}),Ue},xe=he=>{switch(he.split(".").pop()?.toLowerCase()){case"html":case"htm":return"";case"css":return"";case"js":case"mjs":case"cjs":return"";case"ts":case"tsx":return"";case"jsx":return"";case"json":return"";case"md":return"";case"png":case"jpg":case"jpeg":case"gif":case"svg":return"";case"txt":return"";default:return""}};return n.jsxs("div",{style:{display:"flex",flexDirection:"column",height:a?"100vh":"calc(100vh - 60px)",gap:8},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8,padding:"6px 8px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("button",{onClick:()=>{m("/themes/all-themes")},style:{border:"1px solid #d1d5da",background:"#fff",color:"#111827",padding:"6px 10px",borderRadius:6,cursor:"pointer"},children:" Back"}),n.jsx("div",{style:{fontWeight:700,fontSize:16},children:d?`Editing Code: ${d}`:"Editing Code"})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[we&&n.jsx("span",{style:{color:"#dc2626",fontSize:12},children:we}),fe&&n.jsx("span",{style:{color:"#6b7280",fontSize:12},children:" Saving"}),!fe&&Ae&&n.jsxs("span",{style:{color:"#6b7280",fontSize:12},children:[" Saved ",Ae.toLocaleTimeString()]}),n.jsx("button",{onClick:Ne,disabled:fe,style:{border:"1px solid #10b981",background:"#10b981",color:"#ffffff",padding:"6px 12px",borderRadius:6,cursor:fe?"not-allowed":"pointer",fontWeight:700},children:"Save"})]})]}),n.jsxs("div",{ref:H,style:{display:"flex",gap:0,flex:1,minHeight:0,position:"relative",overflow:"hidden"},children:[n.jsxs("div",{style:{flex:re?"1 1 auto":`0 0 ${Te||G?0:V}px`,minWidth:0,borderRight:"1px solid #30363D",backgroundColor:"#161B22",color:"#F0F6FC",display:"flex",flexDirection:"column",transition:"flex-basis 120ms ease",overflow:"hidden"},children:[n.jsx("div",{style:{padding:"12px 16px",borderBottom:"1px solid #30363D",fontWeight:600,fontSize:"13px",color:"#F0F6FC"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[n.jsx("span",{children:"EXPLORER"}),n.jsx("div",{style:{display:"flex",gap:6},children:n.jsx("button",{onClick:()=>oe(Q==="explorer"?null:"explorer"),title:Q==="explorer"?"Restore layout":"Expand Explorer",style:{border:"1px solid #30363D",background:"#0D1117",color:"#E6EDF3",padding:"2px 6px",borderRadius:4,cursor:"pointer",fontSize:12},children:Q==="explorer"?"Restore":"Expand"})})]})}),n.jsx("div",{style:{flex:1,overflow:"auto",padding:"8px 0"},children:ue(J)})]}),Q===null&&n.jsx("div",{onMouseDown:()=>I(!0),style:{width:8,cursor:"col-resize",background:"#0d1117",borderRight:"1px solid #30363D",borderLeft:"1px solid #0b0f14"}}),n.jsxs("div",{style:{flex:Te?"1 1 auto":Q?"0 0 0px":"1 1 auto",minWidth:0,display:"flex",flexDirection:"column",transition:"flex-basis 120ms ease",overflow:Q&&!Te?"hidden":"initial"},children:[n.jsx("div",{style:{padding:"6px 8px",borderBottom:"1px solid #e5e7eb",fontWeight:600},children:t}),n.jsxs("div",{style:{flex:1,minHeight:300},children:[!y&&U&&n.jsx(IB,{height:"100%",language:M,theme:"vs-dark",value:o[t]??(j===t?"":o[t]??""),onChange:ne,onMount:he=>{z.current=he},options:{fontSize:14,minimap:{enabled:!1}}}),!y&&!U&&n.jsx("div",{style:{padding:12,color:"#6b7280"},children:"Preview not available for this file type. Select a text file to edit."}),y&&n.jsx("div",{style:{padding:12},children:"Loading files"}),b&&n.jsx("div",{style:{padding:12,color:"#dc2626"},children:b})]}),n.jsx("div",{style:{padding:"6px 8px",borderTop:"1px solid #e5e7eb",display:"flex",justifyContent:"flex-end"},children:n.jsx("button",{onClick:()=>oe(Q==="editor"?null:"editor"),title:Q==="editor"?"Restore layout":"Expand Editor",style:{border:"1px solid #d1d5da",background:"#fff",color:"#111827",padding:"4px 8px",borderRadius:6,cursor:"pointer",fontWeight:600},children:Q==="editor"?"Restore":"Expand"})})]}),Q===null&&n.jsx("div",{onMouseDown:()=>D(!0),style:{width:6,cursor:"col-resize",background:"transparent"}}),n.jsxs("div",{style:{flex:G?"1 1 auto":`0 0 ${re||Te?0:Z}px`,minWidth:0,borderLeft:"1px solid #e5e7eb",display:"flex",flexDirection:"column",transition:"flex-basis 120ms ease",overflow:"hidden"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8,padding:"6px 8px",borderBottom:"1px solid #e5e7eb"},children:[n.jsx("div",{style:{fontWeight:600},children:"Preview"}),!a&&n.jsx("button",{onClick:()=>window.open(`/themes/code-fullscreen/${r}`,"_blank","noopener,noreferrer"),style:{border:"1px solid #d1d5da",background:"#fff",color:"#111827",padding:"6px 10px",borderRadius:6,cursor:"pointer",fontWeight:600},children:"Edit in new tab"}),n.jsx("button",{onClick:()=>{I(!1),D(!1),oe(he=>he==="preview"?null:"preview")},title:Q==="preview"?"Restore layout":"Expand Preview",style:{border:"1px solid #d1d5da",background:"#fff",color:"#111827",padding:"6px 10px",borderRadius:6,cursor:"pointer",fontWeight:600},children:Q==="preview"?"Restore":"Expand"})]}),n.jsx("iframe",{ref:F,style:{flex:1,border:0,background:"#fff"},title:"Theme Preview"})]})]})]})},RB=()=>n.jsx(y3,{fullScreen:!0});function u0(a){throw new Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var jj={exports:{}};var f5;function LB(){return f5||(f5=1,(function(a,r){(function(e){a.exports=e()})(function(){return(function e(t,s,o){function i(d,h){if(!s[d]){if(!t[d]){var m=typeof u0=="function"&&u0;if(!h&&m)return m(d,!0);if(l)return l(d,!0);var y=new Error("Cannot find module '"+d+"'");throw y.code="MODULE_NOT_FOUND",y}var x=s[d]={exports:{}};t[d][0].call(x.exports,function(b){var v=t[d][1][b];return i(v||b)},x,x.exports,e,t,s,o)}return s[d].exports}for(var l=typeof u0=="function"&&u0,c=0;c<o.length;c++)i(o[c]);return i})({1:[function(e,t,s){var o=e("./utils"),i=e("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(c){for(var d,h,m,y,x,b,v,j=[],S=0,k=c.length,N=k,P=o.getTypeOf(c)!=="string";S<c.length;)N=k-S,m=P?(d=c[S++],h=S<k?c[S++]:0,S<k?c[S++]:0):(d=c.charCodeAt(S++),h=S<k?c.charCodeAt(S++):0,S<k?c.charCodeAt(S++):0),y=d>>2,x=(3&d)<<4|h>>4,b=1<N?(15&h)<<2|m>>6:64,v=2<N?63&m:64,j.push(l.charAt(y)+l.charAt(x)+l.charAt(b)+l.charAt(v));return j.join("")},s.decode=function(c){var d,h,m,y,x,b,v=0,j=0,S="data:";if(c.substr(0,S.length)===S)throw new Error("Invalid base64 input, it looks like a data url.");var k,N=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===l.charAt(64)&&N--,c.charAt(c.length-2)===l.charAt(64)&&N--,N%1!=0)throw new Error("Invalid base64 input, bad content length.");for(k=i.uint8array?new Uint8Array(0|N):new Array(0|N);v<c.length;)d=l.indexOf(c.charAt(v++))<<2|(y=l.indexOf(c.charAt(v++)))>>4,h=(15&y)<<4|(x=l.indexOf(c.charAt(v++)))>>2,m=(3&x)<<6|(b=l.indexOf(c.charAt(v++))),k[j++]=d,x!==64&&(k[j++]=h),b!==64&&(k[j++]=m);return k}},{"./support":30,"./utils":32}],2:[function(e,t,s){var o=e("./external"),i=e("./stream/DataWorker"),l=e("./stream/Crc32Probe"),c=e("./stream/DataLengthProbe");function d(h,m,y,x,b){this.compressedSize=h,this.uncompressedSize=m,this.crc32=y,this.compression=x,this.compressedContent=b}d.prototype={getContentWorker:function(){var h=new i(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),m=this;return h.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),h},getCompressedWorker:function(){return new i(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(h,m,y){return h.pipe(new l).pipe(new c("uncompressedSize")).pipe(m.compressWorker(y)).pipe(new c("compressedSize")).withStreamInfo("compression",m)},t.exports=d},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,s){var o=e("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},s.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,s){var o=e("./utils"),i=(function(){for(var l,c=[],d=0;d<256;d++){l=d;for(var h=0;h<8;h++)l=1&l?3988292384^l>>>1:l>>>1;c[d]=l}return c})();t.exports=function(l,c){return l!==void 0&&l.length?o.getTypeOf(l)!=="string"?(function(d,h,m,y){var x=i,b=y+m;d^=-1;for(var v=y;v<b;v++)d=d>>>8^x[255&(d^h[v])];return-1^d})(0|c,l,l.length,0):(function(d,h,m,y){var x=i,b=y+m;d^=-1;for(var v=y;v<b;v++)d=d>>>8^x[255&(d^h.charCodeAt(v))];return-1^d})(0|c,l,l.length,0):0}},{"./utils":32}],5:[function(e,t,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(e,t,s){var o=null;o=typeof Promise<"u"?Promise:e("lie"),t.exports={Promise:o}},{lie:37}],7:[function(e,t,s){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",i=e("pako"),l=e("./utils"),c=e("./stream/GenericWorker"),d=o?"uint8array":"array";function h(m,y){c.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=y,this.meta={}}s.magic="\b\0",l.inherits(h,c),h.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(d,m.data),!1)},h.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(y){m.push({data:y,meta:m.meta})}},s.compressWorker=function(m){return new h("Deflate",m)},s.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,s){function o(x,b){var v,j="";for(v=0;v<b;v++)j+=String.fromCharCode(255&x),x>>>=8;return j}function i(x,b,v,j,S,k){var N,P,R=x.file,F=x.compression,z=k!==d.utf8encode,H=l.transformTo("string",k(R.name)),V=l.transformTo("string",d.utf8encode(R.name)),W=R.comment,Z=l.transformTo("string",k(W)),A=l.transformTo("string",d.utf8encode(W)),q=V.length!==R.name.length,I=A.length!==W.length,K="",D="",Q="",oe=R.dir,re=R.date,Te={crc32:0,compressedSize:0,uncompressedSize:0};b&&!v||(Te.crc32=x.crc32,Te.compressedSize=x.compressedSize,Te.uncompressedSize=x.uncompressedSize);var G=0;b&&(G|=8),z||!q&&!I||(G|=2048);var Y=0,Se=0;oe&&(Y|=16),S==="UNIX"?(Se=798,Y|=(function(Ee,Ae){var qe=Ee;return Ee||(qe=Ae?16893:33204),(65535&qe)<<16})(R.unixPermissions,oe)):(Se=20,Y|=(function(Ee){return 63&(Ee||0)})(R.dosPermissions)),N=re.getUTCHours(),N<<=6,N|=re.getUTCMinutes(),N<<=5,N|=re.getUTCSeconds()/2,P=re.getUTCFullYear()-1980,P<<=4,P|=re.getUTCMonth()+1,P<<=5,P|=re.getUTCDate(),q&&(D=o(1,1)+o(h(H),4)+V,K+="up"+o(D.length,2)+D),I&&(Q=o(1,1)+o(h(Z),4)+A,K+="uc"+o(Q.length,2)+Q);var fe="";return fe+=`
\0`,fe+=o(G,2),fe+=F.magic,fe+=o(N,2),fe+=o(P,2),fe+=o(Te.crc32,4),fe+=o(Te.compressedSize,4),fe+=o(Te.uncompressedSize,4),fe+=o(H.length,2),fe+=o(K.length,2),{fileRecord:m.LOCAL_FILE_HEADER+fe+H+K,dirRecord:m.CENTRAL_FILE_HEADER+o(Se,2)+fe+o(Z.length,2)+"\0\0\0\0"+o(Y,4)+o(j,4)+H+K+Z}}var l=e("../utils"),c=e("../stream/GenericWorker"),d=e("../utf8"),h=e("../crc32"),m=e("../signature");function y(x,b,v,j){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=b,this.zipPlatform=v,this.encodeFileName=j,this.streamFiles=x,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}l.inherits(y,c),y.prototype.push=function(x){var b=x.meta.percent||0,v=this.entriesCount,j=this._sources.length;this.accumulate?this.contentBuffer.push(x):(this.bytesWritten+=x.data.length,c.prototype.push.call(this,{data:x.data,meta:{currentFile:this.currentFile,percent:v?(b+100*(v-j-1))/v:100}}))},y.prototype.openedSource=function(x){this.currentSourceOffset=this.bytesWritten,this.currentFile=x.file.name;var b=this.streamFiles&&!x.file.dir;if(b){var v=i(x,b,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:v.fileRecord,meta:{percent:0}})}else this.accumulate=!0},y.prototype.closedSource=function(x){this.accumulate=!1;var b=this.streamFiles&&!x.file.dir,v=i(x,b,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(v.dirRecord),b)this.push({data:(function(j){return m.DATA_DESCRIPTOR+o(j.crc32,4)+o(j.compressedSize,4)+o(j.uncompressedSize,4)})(x),meta:{percent:100}});else for(this.push({data:v.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},y.prototype.flush=function(){for(var x=this.bytesWritten,b=0;b<this.dirRecords.length;b++)this.push({data:this.dirRecords[b],meta:{percent:100}});var v=this.bytesWritten-x,j=(function(S,k,N,P,R){var F=l.transformTo("string",R(P));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(S,2)+o(S,2)+o(k,4)+o(N,4)+o(F.length,2)+F})(this.dirRecords.length,v,x,this.zipComment,this.encodeFileName);this.push({data:j,meta:{percent:100}})},y.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},y.prototype.registerPrevious=function(x){this._sources.push(x);var b=this;return x.on("data",function(v){b.processChunk(v)}),x.on("end",function(){b.closedSource(b.previous.streamInfo),b._sources.length?b.prepareNextSource():b.end()}),x.on("error",function(v){b.error(v)}),this},y.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},y.prototype.error=function(x){var b=this._sources;if(!c.prototype.error.call(this,x))return!1;for(var v=0;v<b.length;v++)try{b[v].error(x)}catch{}return!0},y.prototype.lock=function(){c.prototype.lock.call(this);for(var x=this._sources,b=0;b<x.length;b++)x[b].lock()},t.exports=y},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,s){var o=e("../compressions"),i=e("./ZipFileWorker");s.generateWorker=function(l,c,d){var h=new i(c.streamFiles,d,c.platform,c.encodeFileName),m=0;try{l.forEach(function(y,x){m++;var b=(function(k,N){var P=k||N,R=o[P];if(!R)throw new Error(P+" is not a valid compression method !");return R})(x.options.compression,c.compression),v=x.options.compressionOptions||c.compressionOptions||{},j=x.dir,S=x.date;x._compressWorker(b,v).withStreamInfo("file",{name:y,dir:j,date:S,comment:x.comment||"",unixPermissions:x.unixPermissions,dosPermissions:x.dosPermissions}).pipe(h)}),h.entriesCount=m}catch(y){h.error(y)}return h}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,s){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var i=new o;for(var l in this)typeof this[l]!="function"&&(i[l]=this[l]);return i}}(o.prototype=e("./object")).loadAsync=e("./load"),o.support=e("./support"),o.defaults=e("./defaults"),o.version="3.10.1",o.loadAsync=function(i,l){return new o().loadAsync(i,l)},o.external=e("./external"),t.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,s){var o=e("./utils"),i=e("./external"),l=e("./utf8"),c=e("./zipEntries"),d=e("./stream/Crc32Probe"),h=e("./nodejsUtils");function m(y){return new i.Promise(function(x,b){var v=y.decompressed.getContentWorker().pipe(new d);v.on("error",function(j){b(j)}).on("end",function(){v.streamInfo.crc32!==y.decompressed.crc32?b(new Error("Corrupted zip : CRC32 mismatch")):x()}).resume()})}t.exports=function(y,x){var b=this;return x=o.extend(x||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),h.isNode&&h.isStream(y)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",y,!0,x.optimizedBinaryString,x.base64).then(function(v){var j=new c(x);return j.load(v),j}).then(function(v){var j=[i.Promise.resolve(v)],S=v.files;if(x.checkCRC32)for(var k=0;k<S.length;k++)j.push(m(S[k]));return i.Promise.all(j)}).then(function(v){for(var j=v.shift(),S=j.files,k=0;k<S.length;k++){var N=S[k],P=N.fileNameStr,R=o.resolve(N.fileNameStr);b.file(R,N.decompressed,{binary:!0,optimizedBinaryString:!0,date:N.date,dir:N.dir,comment:N.fileCommentStr.length?N.fileCommentStr:null,unixPermissions:N.unixPermissions,dosPermissions:N.dosPermissions,createFolders:x.createFolders}),N.dir||(b.file(R).unsafeOriginalName=P)}return j.zipComment.length&&(b.comment=j.zipComment),b})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,s){var o=e("../utils"),i=e("../stream/GenericWorker");function l(c,d){i.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(d)}o.inherits(l,i),l.prototype._bindStream=function(c){var d=this;(this._stream=c).pause(),c.on("data",function(h){d.push({data:h,meta:{percent:0}})}).on("error",function(h){d.isPaused?this.generatedError=h:d.error(h)}).on("end",function(){d.isPaused?d._upstreamEnded=!0:d.end()})},l.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,s){var o=e("readable-stream").Readable;function i(l,c,d){o.call(this,c),this._helper=l;var h=this;l.on("data",function(m,y){h.push(m)||h._helper.pause(),d&&d(y)}).on("error",function(m){h.emit("error",m)}).on("end",function(){h.push(null)})}e("../utils").inherits(i,o),i.prototype._read=function(){this._helper.resume()},t.exports=i},{"../utils":32,"readable-stream":16}],14:[function(e,t,s){t.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,i){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,i);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,i)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var i=new Buffer(o);return i.fill(0),i},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(e,t,s){function o(R,F,z){var H,V=l.getTypeOf(F),W=l.extend(z||{},h);W.date=W.date||new Date,W.compression!==null&&(W.compression=W.compression.toUpperCase()),typeof W.unixPermissions=="string"&&(W.unixPermissions=parseInt(W.unixPermissions,8)),W.unixPermissions&&16384&W.unixPermissions&&(W.dir=!0),W.dosPermissions&&16&W.dosPermissions&&(W.dir=!0),W.dir&&(R=S(R)),W.createFolders&&(H=j(R))&&k.call(this,H,!0);var Z=V==="string"&&W.binary===!1&&W.base64===!1;z&&z.binary!==void 0||(W.binary=!Z),(F instanceof m&&F.uncompressedSize===0||W.dir||!F||F.length===0)&&(W.base64=!1,W.binary=!0,F="",W.compression="STORE",V="string");var A=null;A=F instanceof m||F instanceof c?F:b.isNode&&b.isStream(F)?new v(R,F):l.prepareContent(R,F,W.binary,W.optimizedBinaryString,W.base64);var q=new y(R,A,W);this.files[R]=q}var i=e("./utf8"),l=e("./utils"),c=e("./stream/GenericWorker"),d=e("./stream/StreamHelper"),h=e("./defaults"),m=e("./compressedObject"),y=e("./zipObject"),x=e("./generate"),b=e("./nodejsUtils"),v=e("./nodejs/NodejsStreamInputAdapter"),j=function(R){R.slice(-1)==="/"&&(R=R.substring(0,R.length-1));var F=R.lastIndexOf("/");return 0<F?R.substring(0,F):""},S=function(R){return R.slice(-1)!=="/"&&(R+="/"),R},k=function(R,F){return F=F!==void 0?F:h.createFolders,R=S(R),this.files[R]||o.call(this,R,null,{dir:!0,createFolders:F}),this.files[R]};function N(R){return Object.prototype.toString.call(R)==="[object RegExp]"}var P={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(R){var F,z,H;for(F in this.files)H=this.files[F],(z=F.slice(this.root.length,F.length))&&F.slice(0,this.root.length)===this.root&&R(z,H)},filter:function(R){var F=[];return this.forEach(function(z,H){R(z,H)&&F.push(H)}),F},file:function(R,F,z){if(arguments.length!==1)return R=this.root+R,o.call(this,R,F,z),this;if(N(R)){var H=R;return this.filter(function(W,Z){return!Z.dir&&H.test(W)})}var V=this.files[this.root+R];return V&&!V.dir?V:null},folder:function(R){if(!R)return this;if(N(R))return this.filter(function(V,W){return W.dir&&R.test(V)});var F=this.root+R,z=k.call(this,F),H=this.clone();return H.root=z.name,H},remove:function(R){R=this.root+R;var F=this.files[R];if(F||(R.slice(-1)!=="/"&&(R+="/"),F=this.files[R]),F&&!F.dir)delete this.files[R];else for(var z=this.filter(function(V,W){return W.name.slice(0,R.length)===R}),H=0;H<z.length;H++)delete this.files[z[H].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(R){var F,z={};try{if((z=l.extend(R||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=z.type.toLowerCase(),z.compression=z.compression.toUpperCase(),z.type==="binarystring"&&(z.type="string"),!z.type)throw new Error("No output type specified.");l.checkSupport(z.type),z.platform!=="darwin"&&z.platform!=="freebsd"&&z.platform!=="linux"&&z.platform!=="sunos"||(z.platform="UNIX"),z.platform==="win32"&&(z.platform="DOS");var H=z.comment||this.comment||"";F=x.generateWorker(this,z,H)}catch(V){(F=new c("error")).error(V)}return new d(F,z.type||"string",z.mimeType)},generateAsync:function(R,F){return this.generateInternalStream(R).accumulate(F)},generateNodeStream:function(R,F){return(R=R||{}).type||(R.type="nodebuffer"),this.generateInternalStream(R).toNodejsStream(F)}};t.exports=P},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,s){t.exports=e("stream")},{stream:void 0}],17:[function(e,t,s){var o=e("./DataReader");function i(l){o.call(this,l);for(var c=0;c<this.data.length;c++)l[c]=255&l[c]}e("../utils").inherits(i,o),i.prototype.byteAt=function(l){return this.data[this.zero+l]},i.prototype.lastIndexOfSignature=function(l){for(var c=l.charCodeAt(0),d=l.charCodeAt(1),h=l.charCodeAt(2),m=l.charCodeAt(3),y=this.length-4;0<=y;--y)if(this.data[y]===c&&this.data[y+1]===d&&this.data[y+2]===h&&this.data[y+3]===m)return y-this.zero;return-1},i.prototype.readAndCheckSignature=function(l){var c=l.charCodeAt(0),d=l.charCodeAt(1),h=l.charCodeAt(2),m=l.charCodeAt(3),y=this.readData(4);return c===y[0]&&d===y[1]&&h===y[2]&&m===y[3]},i.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},t.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,t,s){var o=e("../utils");function i(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var c,d=0;for(this.checkOffset(l),c=this.index+l-1;c>=this.index;c--)d=(d<<8)+this.byteAt(c);return this.index+=l,d},readString:function(l){return o.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC(1980+(l>>25&127),(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(31&l)<<1))}},t.exports=i},{"../utils":32}],19:[function(e,t,s){var o=e("./Uint8ArrayReader");function i(l){o.call(this,l)}e("../utils").inherits(i,o),i.prototype.readData=function(l){this.checkOffset(l);var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},t.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,s){var o=e("./DataReader");function i(l){o.call(this,l)}e("../utils").inherits(i,o),i.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},i.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},i.prototype.readAndCheckSignature=function(l){return l===this.readData(4)},i.prototype.readData=function(l){this.checkOffset(l);var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},t.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,t,s){var o=e("./ArrayReader");function i(l){o.call(this,l)}e("../utils").inherits(i,o),i.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},t.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,s){var o=e("../utils"),i=e("../support"),l=e("./ArrayReader"),c=e("./StringReader"),d=e("./NodeBufferReader"),h=e("./Uint8ArrayReader");t.exports=function(m){var y=o.getTypeOf(m);return o.checkSupport(y),y!=="string"||i.uint8array?y==="nodebuffer"?new d(m):i.uint8array?new h(o.transformTo("uint8array",m)):new l(o.transformTo("array",m)):new c(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,t,s){var o=e("./GenericWorker"),i=e("../utils");function l(c){o.call(this,"ConvertWorker to "+c),this.destType=c}i.inherits(l,o),l.prototype.processChunk=function(c){this.push({data:i.transformTo(this.destType,c.data),meta:c.meta})},t.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,s){var o=e("./GenericWorker"),i=e("../crc32");function l(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(l,o),l.prototype.processChunk=function(c){this.streamInfo.crc32=i(c.data,this.streamInfo.crc32||0),this.push(c)},t.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,s){var o=e("../utils"),i=e("./GenericWorker");function l(c){i.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}o.inherits(l,i),l.prototype.processChunk=function(c){if(c){var d=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=d+c.data.length}i.prototype.processChunk.call(this,c)},t.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,s){var o=e("../utils"),i=e("./GenericWorker");function l(c){i.call(this,"DataWorker");var d=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(h){d.dataIsReady=!0,d.data=h,d.max=h&&h.length||0,d.type=o.getTypeOf(h),d.isPaused||d._tickAndRepeat()},function(h){d.error(h)})}o.inherits(l,i),l.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,d=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,d);break;case"uint8array":c=this.data.subarray(this.index,d);break;case"array":case"nodebuffer":c=this.data.slice(this.index,d)}return this.index=d,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,s){function o(i){this.name=i||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(i){this.emit("data",i)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(i){this.emit("error",i)}return!0},error:function(i){return!this.isFinished&&(this.isPaused?this.generatedError=i:(this.isFinished=!0,this.emit("error",i),this.previous&&this.previous.error(i),this.cleanUp()),!0)},on:function(i,l){return this._listeners[i].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(i,l){if(this._listeners[i])for(var c=0;c<this._listeners[i].length;c++)this._listeners[i][c].call(this,l)},pipe:function(i){return i.registerPrevious(this)},registerPrevious:function(i){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=i.streamInfo,this.mergeStreamInfo(),this.previous=i;var l=this;return i.on("data",function(c){l.processChunk(c)}),i.on("end",function(){l.end()}),i.on("error",function(c){l.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var i=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),i=!0),this.previous&&this.previous.resume(),!i},flush:function(){},processChunk:function(i){this.push(i)},withStreamInfo:function(i,l){return this.extraStreamInfo[i]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var i in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,i)&&(this.streamInfo[i]=this.extraStreamInfo[i])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var i="Worker "+this.name;return this.previous?this.previous+" -> "+i:i}},t.exports=o},{}],29:[function(e,t,s){var o=e("../utils"),i=e("./ConvertWorker"),l=e("./GenericWorker"),c=e("../base64"),d=e("../support"),h=e("../external"),m=null;if(d.nodestream)try{m=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function y(b,v){return new h.Promise(function(j,S){var k=[],N=b._internalType,P=b._outputType,R=b._mimeType;b.on("data",function(F,z){k.push(F),v&&v(z)}).on("error",function(F){k=[],S(F)}).on("end",function(){try{var F=(function(z,H,V){switch(z){case"blob":return o.newBlob(o.transformTo("arraybuffer",H),V);case"base64":return c.encode(H);default:return o.transformTo(z,H)}})(P,(function(z,H){var V,W=0,Z=null,A=0;for(V=0;V<H.length;V++)A+=H[V].length;switch(z){case"string":return H.join("");case"array":return Array.prototype.concat.apply([],H);case"uint8array":for(Z=new Uint8Array(A),V=0;V<H.length;V++)Z.set(H[V],W),W+=H[V].length;return Z;case"nodebuffer":return Buffer.concat(H);default:throw new Error("concat : unsupported type '"+z+"'")}})(N,k),R);j(F)}catch(z){S(z)}k=[]}).resume()})}function x(b,v,j){var S=v;switch(v){case"blob":case"arraybuffer":S="uint8array";break;case"base64":S="string"}try{this._internalType=S,this._outputType=v,this._mimeType=j,o.checkSupport(S),this._worker=b.pipe(new i(S)),b.lock()}catch(k){this._worker=new l("error"),this._worker.error(k)}}x.prototype={accumulate:function(b){return y(this,b)},on:function(b,v){var j=this;return b==="data"?this._worker.on(b,function(S){v.call(j,S.data,S.meta)}):this._worker.on(b,function(){o.delay(v,arguments,j)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(b){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},b)}},t.exports=x},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var o=new ArrayBuffer(0);try{s.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(o),s.blob=i.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!e("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,s){for(var o=e("./utils"),i=e("./support"),l=e("./nodejsUtils"),c=e("./stream/GenericWorker"),d=new Array(256),h=0;h<256;h++)d[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;d[254]=d[254]=1;function m(){c.call(this,"utf-8 decode"),this.leftOver=null}function y(){c.call(this,"utf-8 encode")}s.utf8encode=function(x){return i.nodebuffer?l.newBufferFrom(x,"utf-8"):(function(b){var v,j,S,k,N,P=b.length,R=0;for(k=0;k<P;k++)(64512&(j=b.charCodeAt(k)))==55296&&k+1<P&&(64512&(S=b.charCodeAt(k+1)))==56320&&(j=65536+(j-55296<<10)+(S-56320),k++),R+=j<128?1:j<2048?2:j<65536?3:4;for(v=i.uint8array?new Uint8Array(R):new Array(R),k=N=0;N<R;k++)(64512&(j=b.charCodeAt(k)))==55296&&k+1<P&&(64512&(S=b.charCodeAt(k+1)))==56320&&(j=65536+(j-55296<<10)+(S-56320),k++),j<128?v[N++]=j:(j<2048?v[N++]=192|j>>>6:(j<65536?v[N++]=224|j>>>12:(v[N++]=240|j>>>18,v[N++]=128|j>>>12&63),v[N++]=128|j>>>6&63),v[N++]=128|63&j);return v})(x)},s.utf8decode=function(x){return i.nodebuffer?o.transformTo("nodebuffer",x).toString("utf-8"):(function(b){var v,j,S,k,N=b.length,P=new Array(2*N);for(v=j=0;v<N;)if((S=b[v++])<128)P[j++]=S;else if(4<(k=d[S]))P[j++]=65533,v+=k-1;else{for(S&=k===2?31:k===3?15:7;1<k&&v<N;)S=S<<6|63&b[v++],k--;1<k?P[j++]=65533:S<65536?P[j++]=S:(S-=65536,P[j++]=55296|S>>10&1023,P[j++]=56320|1023&S)}return P.length!==j&&(P.subarray?P=P.subarray(0,j):P.length=j),o.applyFromCharCode(P)})(x=o.transformTo(i.uint8array?"uint8array":"array",x))},o.inherits(m,c),m.prototype.processChunk=function(x){var b=o.transformTo(i.uint8array?"uint8array":"array",x.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var v=b;(b=new Uint8Array(v.length+this.leftOver.length)).set(this.leftOver,0),b.set(v,this.leftOver.length)}else b=this.leftOver.concat(b);this.leftOver=null}var j=(function(k,N){var P;for((N=N||k.length)>k.length&&(N=k.length),P=N-1;0<=P&&(192&k[P])==128;)P--;return P<0||P===0?N:P+d[k[P]]>N?P:N})(b),S=b;j!==b.length&&(i.uint8array?(S=b.subarray(0,j),this.leftOver=b.subarray(j,b.length)):(S=b.slice(0,j),this.leftOver=b.slice(j,b.length))),this.push({data:s.utf8decode(S),meta:x.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=m,o.inherits(y,c),y.prototype.processChunk=function(x){this.push({data:s.utf8encode(x.data),meta:x.meta})},s.Utf8EncodeWorker=y},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,s){var o=e("./support"),i=e("./base64"),l=e("./nodejsUtils"),c=e("./external");function d(v){return v}function h(v,j){for(var S=0;S<v.length;++S)j[S]=255&v.charCodeAt(S);return j}e("setimmediate"),s.newBlob=function(v,j){s.checkSupport("blob");try{return new Blob([v],{type:j})}catch{try{var S=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return S.append(v),S.getBlob(j)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(v,j,S){var k=[],N=0,P=v.length;if(P<=S)return String.fromCharCode.apply(null,v);for(;N<P;)j==="array"||j==="nodebuffer"?k.push(String.fromCharCode.apply(null,v.slice(N,Math.min(N+S,P)))):k.push(String.fromCharCode.apply(null,v.subarray(N,Math.min(N+S,P)))),N+=S;return k.join("")},stringifyByChar:function(v){for(var j="",S=0;S<v.length;S++)j+=String.fromCharCode(v[S]);return j},applyCanBeUsed:{uint8array:(function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}})()}};function y(v){var j=65536,S=s.getTypeOf(v),k=!0;if(S==="uint8array"?k=m.applyCanBeUsed.uint8array:S==="nodebuffer"&&(k=m.applyCanBeUsed.nodebuffer),k)for(;1<j;)try{return m.stringifyByChunk(v,S,j)}catch{j=Math.floor(j/2)}return m.stringifyByChar(v)}function x(v,j){for(var S=0;S<v.length;S++)j[S]=v[S];return j}s.applyFromCharCode=y;var b={};b.string={string:d,array:function(v){return h(v,new Array(v.length))},arraybuffer:function(v){return b.string.uint8array(v).buffer},uint8array:function(v){return h(v,new Uint8Array(v.length))},nodebuffer:function(v){return h(v,l.allocBuffer(v.length))}},b.array={string:y,array:d,arraybuffer:function(v){return new Uint8Array(v).buffer},uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return l.newBufferFrom(v)}},b.arraybuffer={string:function(v){return y(new Uint8Array(v))},array:function(v){return x(new Uint8Array(v),new Array(v.byteLength))},arraybuffer:d,uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return l.newBufferFrom(new Uint8Array(v))}},b.uint8array={string:y,array:function(v){return x(v,new Array(v.length))},arraybuffer:function(v){return v.buffer},uint8array:d,nodebuffer:function(v){return l.newBufferFrom(v)}},b.nodebuffer={string:y,array:function(v){return x(v,new Array(v.length))},arraybuffer:function(v){return b.nodebuffer.uint8array(v).buffer},uint8array:function(v){return x(v,new Uint8Array(v.length))},nodebuffer:d},s.transformTo=function(v,j){if(j=j||"",!v)return j;s.checkSupport(v);var S=s.getTypeOf(j);return b[S][v](j)},s.resolve=function(v){for(var j=v.split("/"),S=[],k=0;k<j.length;k++){var N=j[k];N==="."||N===""&&k!==0&&k!==j.length-1||(N===".."?S.pop():S.push(N))}return S.join("/")},s.getTypeOf=function(v){return typeof v=="string"?"string":Object.prototype.toString.call(v)==="[object Array]"?"array":o.nodebuffer&&l.isBuffer(v)?"nodebuffer":o.uint8array&&v instanceof Uint8Array?"uint8array":o.arraybuffer&&v instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(v){if(!o[v.toLowerCase()])throw new Error(v+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(v){var j,S,k="";for(S=0;S<(v||"").length;S++)k+="\\x"+((j=v.charCodeAt(S))<16?"0":"")+j.toString(16).toUpperCase();return k},s.delay=function(v,j,S){setImmediate(function(){v.apply(S||null,j||[])})},s.inherits=function(v,j){function S(){}S.prototype=j.prototype,v.prototype=new S},s.extend=function(){var v,j,S={};for(v=0;v<arguments.length;v++)for(j in arguments[v])Object.prototype.hasOwnProperty.call(arguments[v],j)&&S[j]===void 0&&(S[j]=arguments[v][j]);return S},s.prepareContent=function(v,j,S,k,N){return c.Promise.resolve(j).then(function(P){return o.blob&&(P instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(P))!==-1)&&typeof FileReader<"u"?new c.Promise(function(R,F){var z=new FileReader;z.onload=function(H){R(H.target.result)},z.onerror=function(H){F(H.target.error)},z.readAsArrayBuffer(P)}):P}).then(function(P){var R=s.getTypeOf(P);return R?(R==="arraybuffer"?P=s.transformTo("uint8array",P):R==="string"&&(N?P=i.decode(P):S&&k!==!0&&(P=(function(F){return h(F,o.uint8array?new Uint8Array(F.length):new Array(F.length))})(P))),P):c.Promise.reject(new Error("Can't read the data of '"+v+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,s){var o=e("./reader/readerFor"),i=e("./utils"),l=e("./signature"),c=e("./zipEntry"),d=e("./support");function h(m){this.files=[],this.loadOptions=m}h.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var y=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(y)+", expected "+i.pretty(m)+")")}},isSignature:function(m,y){var x=this.reader.index;this.reader.setIndex(m);var b=this.reader.readString(4)===y;return this.reader.setIndex(x),b},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),y=d.uint8array?"uint8array":"array",x=i.transformTo(y,m);this.zipComment=this.loadOptions.decodeFileName(x)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,y,x,b=this.zip64EndOfCentralSize-44;0<b;)m=this.reader.readInt(2),y=this.reader.readInt(4),x=this.reader.readData(y),this.zip64ExtensibleData[m]={id:m,length:y,value:x}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,y;for(m=0;m<this.files.length;m++)y=this.files[m],this.reader.setIndex(y.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),y.readLocalPart(this.reader),y.handleUTF8(),y.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)(m=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var y=m;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var x=this.centralDirOffset+this.centralDirSize;this.zip64&&(x+=20,x+=12+this.zip64EndOfCentralSize);var b=y-x;if(0<b)this.isSignature(y,l.CENTRAL_FILE_HEADER)||(this.reader.zero=b);else if(b<0)throw new Error("Corrupted zip: missing "+Math.abs(b)+" bytes.")},prepareReader:function(m){this.reader=o(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,s){var o=e("./reader/readerFor"),i=e("./utils"),l=e("./compressedObject"),c=e("./crc32"),d=e("./utf8"),h=e("./compressions"),m=e("./support");function y(x,b){this.options=x,this.loadOptions=b}y.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(x){var b,v;if(x.skip(22),this.fileNameLength=x.readInt(2),v=x.readInt(2),this.fileName=x.readData(this.fileNameLength),x.skip(v),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((b=(function(j){for(var S in h)if(Object.prototype.hasOwnProperty.call(h,S)&&h[S].magic===j)return h[S];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,b,x.readData(this.compressedSize))},readCentralPart:function(x){this.versionMadeBy=x.readInt(2),x.skip(2),this.bitFlag=x.readInt(2),this.compressionMethod=x.readString(2),this.date=x.readDate(),this.crc32=x.readInt(4),this.compressedSize=x.readInt(4),this.uncompressedSize=x.readInt(4);var b=x.readInt(2);if(this.extraFieldsLength=x.readInt(2),this.fileCommentLength=x.readInt(2),this.diskNumberStart=x.readInt(2),this.internalFileAttributes=x.readInt(2),this.externalFileAttributes=x.readInt(4),this.localHeaderOffset=x.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");x.skip(b),this.readExtraFields(x),this.parseZIP64ExtraField(x),this.fileComment=x.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var x=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),x==0&&(this.dosPermissions=63&this.externalFileAttributes),x==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var x=o(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=x.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=x.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=x.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=x.readInt(4))}},readExtraFields:function(x){var b,v,j,S=x.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});x.index+4<S;)b=x.readInt(2),v=x.readInt(2),j=x.readData(v),this.extraFields[b]={id:b,length:v,value:j};x.setIndex(S)},handleUTF8:function(){var x=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=d.utf8decode(this.fileName),this.fileCommentStr=d.utf8decode(this.fileComment);else{var b=this.findExtraFieldUnicodePath();if(b!==null)this.fileNameStr=b;else{var v=i.transformTo(x,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(v)}var j=this.findExtraFieldUnicodeComment();if(j!==null)this.fileCommentStr=j;else{var S=i.transformTo(x,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(S)}}},findExtraFieldUnicodePath:function(){var x=this.extraFields[28789];if(x){var b=o(x.value);return b.readInt(1)!==1||c(this.fileName)!==b.readInt(4)?null:d.utf8decode(b.readData(x.length-5))}return null},findExtraFieldUnicodeComment:function(){var x=this.extraFields[25461];if(x){var b=o(x.value);return b.readInt(1)!==1||c(this.fileComment)!==b.readInt(4)?null:d.utf8decode(b.readData(x.length-5))}return null}},t.exports=y},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,s){function o(b,v,j){this.name=b,this.dir=j.dir,this.date=j.date,this.comment=j.comment,this.unixPermissions=j.unixPermissions,this.dosPermissions=j.dosPermissions,this._data=v,this._dataBinary=j.binary,this.options={compression:j.compression,compressionOptions:j.compressionOptions}}var i=e("./stream/StreamHelper"),l=e("./stream/DataWorker"),c=e("./utf8"),d=e("./compressedObject"),h=e("./stream/GenericWorker");o.prototype={internalStream:function(b){var v=null,j="string";try{if(!b)throw new Error("No output type specified.");var S=(j=b.toLowerCase())==="string"||j==="text";j!=="binarystring"&&j!=="text"||(j="string"),v=this._decompressWorker();var k=!this._dataBinary;k&&!S&&(v=v.pipe(new c.Utf8EncodeWorker)),!k&&S&&(v=v.pipe(new c.Utf8DecodeWorker))}catch(N){(v=new h("error")).error(N)}return new i(v,j,"")},async:function(b,v){return this.internalStream(b).accumulate(v)},nodeStream:function(b,v){return this.internalStream(b||"nodebuffer").toNodejsStream(v)},_compressWorker:function(b,v){if(this._data instanceof d&&this._data.compression.magic===b.magic)return this._data.getCompressedWorker();var j=this._decompressWorker();return this._dataBinary||(j=j.pipe(new c.Utf8EncodeWorker)),d.createWorkerFrom(j,b,v)},_decompressWorker:function(){return this._data instanceof d?this._data.getContentWorker():this._data instanceof h?this._data:new l(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],y=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},x=0;x<m.length;x++)o.prototype[m[x]]=y;t.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,s){(function(o){var i,l,c=o.MutationObserver||o.WebKitMutationObserver;if(c){var d=0,h=new c(b),m=o.document.createTextNode("");h.observe(m,{characterData:!0}),i=function(){m.data=d=++d%2}}else if(o.setImmediate||o.MessageChannel===void 0)i="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var v=o.document.createElement("script");v.onreadystatechange=function(){b(),v.onreadystatechange=null,v.parentNode.removeChild(v),v=null},o.document.documentElement.appendChild(v)}:function(){setTimeout(b,0)};else{var y=new o.MessageChannel;y.port1.onmessage=b,i=function(){y.port2.postMessage(0)}}var x=[];function b(){var v,j;l=!0;for(var S=x.length;S;){for(j=x,x=[],v=-1;++v<S;)j[v]();S=x.length}l=!1}t.exports=function(v){x.push(v)!==1||l||i()}}).call(this,typeof r0<"u"?r0:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,t,s){var o=e("immediate");function i(){}var l={},c=["REJECTED"],d=["FULFILLED"],h=["PENDING"];function m(S){if(typeof S!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,S!==i&&v(this,S)}function y(S,k,N){this.promise=S,typeof k=="function"&&(this.onFulfilled=k,this.callFulfilled=this.otherCallFulfilled),typeof N=="function"&&(this.onRejected=N,this.callRejected=this.otherCallRejected)}function x(S,k,N){o(function(){var P;try{P=k(N)}catch(R){return l.reject(S,R)}P===S?l.reject(S,new TypeError("Cannot resolve promise with itself")):l.resolve(S,P)})}function b(S){var k=S&&S.then;if(S&&(typeof S=="object"||typeof S=="function")&&typeof k=="function")return function(){k.apply(S,arguments)}}function v(S,k){var N=!1;function P(z){N||(N=!0,l.reject(S,z))}function R(z){N||(N=!0,l.resolve(S,z))}var F=j(function(){k(R,P)});F.status==="error"&&P(F.value)}function j(S,k){var N={};try{N.value=S(k),N.status="success"}catch(P){N.status="error",N.value=P}return N}(t.exports=m).prototype.finally=function(S){if(typeof S!="function")return this;var k=this.constructor;return this.then(function(N){return k.resolve(S()).then(function(){return N})},function(N){return k.resolve(S()).then(function(){throw N})})},m.prototype.catch=function(S){return this.then(null,S)},m.prototype.then=function(S,k){if(typeof S!="function"&&this.state===d||typeof k!="function"&&this.state===c)return this;var N=new this.constructor(i);return this.state!==h?x(N,this.state===d?S:k,this.outcome):this.queue.push(new y(N,S,k)),N},y.prototype.callFulfilled=function(S){l.resolve(this.promise,S)},y.prototype.otherCallFulfilled=function(S){x(this.promise,this.onFulfilled,S)},y.prototype.callRejected=function(S){l.reject(this.promise,S)},y.prototype.otherCallRejected=function(S){x(this.promise,this.onRejected,S)},l.resolve=function(S,k){var N=j(b,k);if(N.status==="error")return l.reject(S,N.value);var P=N.value;if(P)v(S,P);else{S.state=d,S.outcome=k;for(var R=-1,F=S.queue.length;++R<F;)S.queue[R].callFulfilled(k)}return S},l.reject=function(S,k){S.state=c,S.outcome=k;for(var N=-1,P=S.queue.length;++N<P;)S.queue[N].callRejected(k);return S},m.resolve=function(S){return S instanceof this?S:l.resolve(new this(i),S)},m.reject=function(S){var k=new this(i);return l.reject(k,S)},m.all=function(S){var k=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=S.length,P=!1;if(!N)return this.resolve([]);for(var R=new Array(N),F=0,z=-1,H=new this(i);++z<N;)V(S[z],z);return H;function V(W,Z){k.resolve(W).then(function(A){R[Z]=A,++F!==N||P||(P=!0,l.resolve(H,R))},function(A){P||(P=!0,l.reject(H,A))})}},m.race=function(S){var k=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=S.length,P=!1;if(!N)return this.resolve([]);for(var R=-1,F=new this(i);++R<N;)z=S[R],k.resolve(z).then(function(H){P||(P=!0,l.resolve(F,H))},function(H){P||(P=!0,l.reject(F,H))});var z;return F}},{immediate:36}],38:[function(e,t,s){var o={};(0,e("./lib/utils/common").assign)(o,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,s){var o=e("./zlib/deflate"),i=e("./utils/common"),l=e("./utils/strings"),c=e("./zlib/messages"),d=e("./zlib/zstream"),h=Object.prototype.toString,m=0,y=-1,x=0,b=8;function v(S){if(!(this instanceof v))return new v(S);this.options=i.assign({level:y,method:b,chunkSize:16384,windowBits:15,memLevel:8,strategy:x,to:""},S||{});var k=this.options;k.raw&&0<k.windowBits?k.windowBits=-k.windowBits:k.gzip&&0<k.windowBits&&k.windowBits<16&&(k.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var N=o.deflateInit2(this.strm,k.level,k.method,k.windowBits,k.memLevel,k.strategy);if(N!==m)throw new Error(c[N]);if(k.header&&o.deflateSetHeader(this.strm,k.header),k.dictionary){var P;if(P=typeof k.dictionary=="string"?l.string2buf(k.dictionary):h.call(k.dictionary)==="[object ArrayBuffer]"?new Uint8Array(k.dictionary):k.dictionary,(N=o.deflateSetDictionary(this.strm,P))!==m)throw new Error(c[N]);this._dict_set=!0}}function j(S,k){var N=new v(k);if(N.push(S,!0),N.err)throw N.msg||c[N.err];return N.result}v.prototype.push=function(S,k){var N,P,R=this.strm,F=this.options.chunkSize;if(this.ended)return!1;P=k===~~k?k:k===!0?4:0,typeof S=="string"?R.input=l.string2buf(S):h.call(S)==="[object ArrayBuffer]"?R.input=new Uint8Array(S):R.input=S,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new i.Buf8(F),R.next_out=0,R.avail_out=F),(N=o.deflate(R,P))!==1&&N!==m)return this.onEnd(N),!(this.ended=!0);R.avail_out!==0&&(R.avail_in!==0||P!==4&&P!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(i.shrinkBuf(R.output,R.next_out))):this.onData(i.shrinkBuf(R.output,R.next_out)))}while((0<R.avail_in||R.avail_out===0)&&N!==1);return P===4?(N=o.deflateEnd(this.strm),this.onEnd(N),this.ended=!0,N===m):P!==2||(this.onEnd(m),!(R.avail_out=0))},v.prototype.onData=function(S){this.chunks.push(S)},v.prototype.onEnd=function(S){S===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg},s.Deflate=v,s.deflate=j,s.deflateRaw=function(S,k){return(k=k||{}).raw=!0,j(S,k)},s.gzip=function(S,k){return(k=k||{}).gzip=!0,j(S,k)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,s){var o=e("./zlib/inflate"),i=e("./utils/common"),l=e("./utils/strings"),c=e("./zlib/constants"),d=e("./zlib/messages"),h=e("./zlib/zstream"),m=e("./zlib/gzheader"),y=Object.prototype.toString;function x(v){if(!(this instanceof x))return new x(v);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},v||{});var j=this.options;j.raw&&0<=j.windowBits&&j.windowBits<16&&(j.windowBits=-j.windowBits,j.windowBits===0&&(j.windowBits=-15)),!(0<=j.windowBits&&j.windowBits<16)||v&&v.windowBits||(j.windowBits+=32),15<j.windowBits&&j.windowBits<48&&(15&j.windowBits)==0&&(j.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var S=o.inflateInit2(this.strm,j.windowBits);if(S!==c.Z_OK)throw new Error(d[S]);this.header=new m,o.inflateGetHeader(this.strm,this.header)}function b(v,j){var S=new x(j);if(S.push(v,!0),S.err)throw S.msg||d[S.err];return S.result}x.prototype.push=function(v,j){var S,k,N,P,R,F,z=this.strm,H=this.options.chunkSize,V=this.options.dictionary,W=!1;if(this.ended)return!1;k=j===~~j?j:j===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof v=="string"?z.input=l.binstring2buf(v):y.call(v)==="[object ArrayBuffer]"?z.input=new Uint8Array(v):z.input=v,z.next_in=0,z.avail_in=z.input.length;do{if(z.avail_out===0&&(z.output=new i.Buf8(H),z.next_out=0,z.avail_out=H),(S=o.inflate(z,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&V&&(F=typeof V=="string"?l.string2buf(V):y.call(V)==="[object ArrayBuffer]"?new Uint8Array(V):V,S=o.inflateSetDictionary(this.strm,F)),S===c.Z_BUF_ERROR&&W===!0&&(S=c.Z_OK,W=!1),S!==c.Z_STREAM_END&&S!==c.Z_OK)return this.onEnd(S),!(this.ended=!0);z.next_out&&(z.avail_out!==0&&S!==c.Z_STREAM_END&&(z.avail_in!==0||k!==c.Z_FINISH&&k!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(N=l.utf8border(z.output,z.next_out),P=z.next_out-N,R=l.buf2string(z.output,N),z.next_out=P,z.avail_out=H-P,P&&i.arraySet(z.output,z.output,N,P,0),this.onData(R)):this.onData(i.shrinkBuf(z.output,z.next_out)))),z.avail_in===0&&z.avail_out===0&&(W=!0)}while((0<z.avail_in||z.avail_out===0)&&S!==c.Z_STREAM_END);return S===c.Z_STREAM_END&&(k=c.Z_FINISH),k===c.Z_FINISH?(S=o.inflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===c.Z_OK):k!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(z.avail_out=0))},x.prototype.onData=function(v){this.chunks.push(v)},x.prototype.onEnd=function(v){v===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},s.Inflate=x,s.inflate=b,s.inflateRaw=function(v,j){return(j=j||{}).raw=!0,b(v,j)},s.ungzip=b},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,s){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(c){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var h=d.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(var m in h)h.hasOwnProperty(m)&&(c[m]=h[m])}}return c},s.shrinkBuf=function(c,d){return c.length===d?c:c.subarray?c.subarray(0,d):(c.length=d,c)};var i={arraySet:function(c,d,h,m,y){if(d.subarray&&c.subarray)c.set(d.subarray(h,h+m),y);else for(var x=0;x<m;x++)c[y+x]=d[h+x]},flattenChunks:function(c){var d,h,m,y,x,b;for(d=m=0,h=c.length;d<h;d++)m+=c[d].length;for(b=new Uint8Array(m),d=y=0,h=c.length;d<h;d++)x=c[d],b.set(x,y),y+=x.length;return b}},l={arraySet:function(c,d,h,m,y){for(var x=0;x<m;x++)c[y+x]=d[h+x]},flattenChunks:function(c){return[].concat.apply([],c)}};s.setTyped=function(c){c?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,i)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,l))},s.setTyped(o)},{}],42:[function(e,t,s){var o=e("./common"),i=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var c=new o.Buf8(256),d=0;d<256;d++)c[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;function h(m,y){if(y<65537&&(m.subarray&&l||!m.subarray&&i))return String.fromCharCode.apply(null,o.shrinkBuf(m,y));for(var x="",b=0;b<y;b++)x+=String.fromCharCode(m[b]);return x}c[254]=c[254]=1,s.string2buf=function(m){var y,x,b,v,j,S=m.length,k=0;for(v=0;v<S;v++)(64512&(x=m.charCodeAt(v)))==55296&&v+1<S&&(64512&(b=m.charCodeAt(v+1)))==56320&&(x=65536+(x-55296<<10)+(b-56320),v++),k+=x<128?1:x<2048?2:x<65536?3:4;for(y=new o.Buf8(k),v=j=0;j<k;v++)(64512&(x=m.charCodeAt(v)))==55296&&v+1<S&&(64512&(b=m.charCodeAt(v+1)))==56320&&(x=65536+(x-55296<<10)+(b-56320),v++),x<128?y[j++]=x:(x<2048?y[j++]=192|x>>>6:(x<65536?y[j++]=224|x>>>12:(y[j++]=240|x>>>18,y[j++]=128|x>>>12&63),y[j++]=128|x>>>6&63),y[j++]=128|63&x);return y},s.buf2binstring=function(m){return h(m,m.length)},s.binstring2buf=function(m){for(var y=new o.Buf8(m.length),x=0,b=y.length;x<b;x++)y[x]=m.charCodeAt(x);return y},s.buf2string=function(m,y){var x,b,v,j,S=y||m.length,k=new Array(2*S);for(x=b=0;x<S;)if((v=m[x++])<128)k[b++]=v;else if(4<(j=c[v]))k[b++]=65533,x+=j-1;else{for(v&=j===2?31:j===3?15:7;1<j&&x<S;)v=v<<6|63&m[x++],j--;1<j?k[b++]=65533:v<65536?k[b++]=v:(v-=65536,k[b++]=55296|v>>10&1023,k[b++]=56320|1023&v)}return h(k,b)},s.utf8border=function(m,y){var x;for((y=y||m.length)>m.length&&(y=m.length),x=y-1;0<=x&&(192&m[x])==128;)x--;return x<0||x===0?y:x+c[m[x]]>y?x:y}},{"./common":41}],43:[function(e,t,s){t.exports=function(o,i,l,c){for(var d=65535&o|0,h=o>>>16&65535|0,m=0;l!==0;){for(l-=m=2e3<l?2e3:l;h=h+(d=d+i[c++]|0)|0,--m;);d%=65521,h%=65521}return d|h<<16|0}},{}],44:[function(e,t,s){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,s){var o=(function(){for(var i,l=[],c=0;c<256;c++){i=c;for(var d=0;d<8;d++)i=1&i?3988292384^i>>>1:i>>>1;l[c]=i}return l})();t.exports=function(i,l,c,d){var h=o,m=d+c;i^=-1;for(var y=d;y<m;y++)i=i>>>8^h[255&(i^l[y])];return-1^i}},{}],46:[function(e,t,s){var o,i=e("../utils/common"),l=e("./trees"),c=e("./adler32"),d=e("./crc32"),h=e("./messages"),m=0,y=4,x=0,b=-2,v=-1,j=4,S=2,k=8,N=9,P=286,R=30,F=19,z=2*P+1,H=15,V=3,W=258,Z=W+V+1,A=42,q=113,I=1,K=2,D=3,Q=4;function oe(ee,Ne){return ee.msg=h[Ne],Ne}function re(ee){return(ee<<1)-(4<ee?9:0)}function Te(ee){for(var Ne=ee.length;0<=--Ne;)ee[Ne]=0}function G(ee){var Ne=ee.state,Ie=Ne.pending;Ie>ee.avail_out&&(Ie=ee.avail_out),Ie!==0&&(i.arraySet(ee.output,Ne.pending_buf,Ne.pending_out,Ie,ee.next_out),ee.next_out+=Ie,Ne.pending_out+=Ie,ee.total_out+=Ie,ee.avail_out-=Ie,Ne.pending-=Ie,Ne.pending===0&&(Ne.pending_out=0))}function Y(ee,Ne){l._tr_flush_block(ee,0<=ee.block_start?ee.block_start:-1,ee.strstart-ee.block_start,Ne),ee.block_start=ee.strstart,G(ee.strm)}function Se(ee,Ne){ee.pending_buf[ee.pending++]=Ne}function fe(ee,Ne){ee.pending_buf[ee.pending++]=Ne>>>8&255,ee.pending_buf[ee.pending++]=255&Ne}function Ee(ee,Ne){var Ie,ne,M=ee.max_chain_length,U=ee.strstart,J=ee.prev_length,ce=ee.nice_match,ue=ee.strstart>ee.w_size-Z?ee.strstart-(ee.w_size-Z):0,xe=ee.window,he=ee.w_mask,se=ee.prev,Le=ee.strstart+W,Ue=xe[U+J-1],Ge=xe[U+J];ee.prev_length>=ee.good_match&&(M>>=2),ce>ee.lookahead&&(ce=ee.lookahead);do if(xe[(Ie=Ne)+J]===Ge&&xe[Ie+J-1]===Ue&&xe[Ie]===xe[U]&&xe[++Ie]===xe[U+1]){U+=2,Ie++;do;while(xe[++U]===xe[++Ie]&&xe[++U]===xe[++Ie]&&xe[++U]===xe[++Ie]&&xe[++U]===xe[++Ie]&&xe[++U]===xe[++Ie]&&xe[++U]===xe[++Ie]&&xe[++U]===xe[++Ie]&&xe[++U]===xe[++Ie]&&U<Le);if(ne=W-(Le-U),U=Le-W,J<ne){if(ee.match_start=Ne,ce<=(J=ne))break;Ue=xe[U+J-1],Ge=xe[U+J]}}while((Ne=se[Ne&he])>ue&&--M!=0);return J<=ee.lookahead?J:ee.lookahead}function Ae(ee){var Ne,Ie,ne,M,U,J,ce,ue,xe,he,se=ee.w_size;do{if(M=ee.window_size-ee.lookahead-ee.strstart,ee.strstart>=se+(se-Z)){for(i.arraySet(ee.window,ee.window,se,se,0),ee.match_start-=se,ee.strstart-=se,ee.block_start-=se,Ne=Ie=ee.hash_size;ne=ee.head[--Ne],ee.head[Ne]=se<=ne?ne-se:0,--Ie;);for(Ne=Ie=se;ne=ee.prev[--Ne],ee.prev[Ne]=se<=ne?ne-se:0,--Ie;);M+=se}if(ee.strm.avail_in===0)break;if(J=ee.strm,ce=ee.window,ue=ee.strstart+ee.lookahead,xe=M,he=void 0,he=J.avail_in,xe<he&&(he=xe),Ie=he===0?0:(J.avail_in-=he,i.arraySet(ce,J.input,J.next_in,he,ue),J.state.wrap===1?J.adler=c(J.adler,ce,he,ue):J.state.wrap===2&&(J.adler=d(J.adler,ce,he,ue)),J.next_in+=he,J.total_in+=he,he),ee.lookahead+=Ie,ee.lookahead+ee.insert>=V)for(U=ee.strstart-ee.insert,ee.ins_h=ee.window[U],ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[U+1])&ee.hash_mask;ee.insert&&(ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[U+V-1])&ee.hash_mask,ee.prev[U&ee.w_mask]=ee.head[ee.ins_h],ee.head[ee.ins_h]=U,U++,ee.insert--,!(ee.lookahead+ee.insert<V)););}while(ee.lookahead<Z&&ee.strm.avail_in!==0)}function qe(ee,Ne){for(var Ie,ne;;){if(ee.lookahead<Z){if(Ae(ee),ee.lookahead<Z&&Ne===m)return I;if(ee.lookahead===0)break}if(Ie=0,ee.lookahead>=V&&(ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[ee.strstart+V-1])&ee.hash_mask,Ie=ee.prev[ee.strstart&ee.w_mask]=ee.head[ee.ins_h],ee.head[ee.ins_h]=ee.strstart),Ie!==0&&ee.strstart-Ie<=ee.w_size-Z&&(ee.match_length=Ee(ee,Ie)),ee.match_length>=V)if(ne=l._tr_tally(ee,ee.strstart-ee.match_start,ee.match_length-V),ee.lookahead-=ee.match_length,ee.match_length<=ee.max_lazy_match&&ee.lookahead>=V){for(ee.match_length--;ee.strstart++,ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[ee.strstart+V-1])&ee.hash_mask,Ie=ee.prev[ee.strstart&ee.w_mask]=ee.head[ee.ins_h],ee.head[ee.ins_h]=ee.strstart,--ee.match_length!=0;);ee.strstart++}else ee.strstart+=ee.match_length,ee.match_length=0,ee.ins_h=ee.window[ee.strstart],ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[ee.strstart+1])&ee.hash_mask;else ne=l._tr_tally(ee,0,ee.window[ee.strstart]),ee.lookahead--,ee.strstart++;if(ne&&(Y(ee,!1),ee.strm.avail_out===0))return I}return ee.insert=ee.strstart<V-1?ee.strstart:V-1,Ne===y?(Y(ee,!0),ee.strm.avail_out===0?D:Q):ee.last_lit&&(Y(ee,!1),ee.strm.avail_out===0)?I:K}function we(ee,Ne){for(var Ie,ne,M;;){if(ee.lookahead<Z){if(Ae(ee),ee.lookahead<Z&&Ne===m)return I;if(ee.lookahead===0)break}if(Ie=0,ee.lookahead>=V&&(ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[ee.strstart+V-1])&ee.hash_mask,Ie=ee.prev[ee.strstart&ee.w_mask]=ee.head[ee.ins_h],ee.head[ee.ins_h]=ee.strstart),ee.prev_length=ee.match_length,ee.prev_match=ee.match_start,ee.match_length=V-1,Ie!==0&&ee.prev_length<ee.max_lazy_match&&ee.strstart-Ie<=ee.w_size-Z&&(ee.match_length=Ee(ee,Ie),ee.match_length<=5&&(ee.strategy===1||ee.match_length===V&&4096<ee.strstart-ee.match_start)&&(ee.match_length=V-1)),ee.prev_length>=V&&ee.match_length<=ee.prev_length){for(M=ee.strstart+ee.lookahead-V,ne=l._tr_tally(ee,ee.strstart-1-ee.prev_match,ee.prev_length-V),ee.lookahead-=ee.prev_length-1,ee.prev_length-=2;++ee.strstart<=M&&(ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[ee.strstart+V-1])&ee.hash_mask,Ie=ee.prev[ee.strstart&ee.w_mask]=ee.head[ee.ins_h],ee.head[ee.ins_h]=ee.strstart),--ee.prev_length!=0;);if(ee.match_available=0,ee.match_length=V-1,ee.strstart++,ne&&(Y(ee,!1),ee.strm.avail_out===0))return I}else if(ee.match_available){if((ne=l._tr_tally(ee,0,ee.window[ee.strstart-1]))&&Y(ee,!1),ee.strstart++,ee.lookahead--,ee.strm.avail_out===0)return I}else ee.match_available=1,ee.strstart++,ee.lookahead--}return ee.match_available&&(ne=l._tr_tally(ee,0,ee.window[ee.strstart-1]),ee.match_available=0),ee.insert=ee.strstart<V-1?ee.strstart:V-1,Ne===y?(Y(ee,!0),ee.strm.avail_out===0?D:Q):ee.last_lit&&(Y(ee,!1),ee.strm.avail_out===0)?I:K}function Oe(ee,Ne,Ie,ne,M){this.good_length=ee,this.max_lazy=Ne,this.nice_length=Ie,this.max_chain=ne,this.func=M}function ze(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=k,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*z),this.dyn_dtree=new i.Buf16(2*(2*R+1)),this.bl_tree=new i.Buf16(2*(2*F+1)),Te(this.dyn_ltree),Te(this.dyn_dtree),Te(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(H+1),this.heap=new i.Buf16(2*P+1),Te(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*P+1),Te(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function We(ee){var Ne;return ee&&ee.state?(ee.total_in=ee.total_out=0,ee.data_type=S,(Ne=ee.state).pending=0,Ne.pending_out=0,Ne.wrap<0&&(Ne.wrap=-Ne.wrap),Ne.status=Ne.wrap?A:q,ee.adler=Ne.wrap===2?0:1,Ne.last_flush=m,l._tr_init(Ne),x):oe(ee,b)}function pt(ee){var Ne=We(ee);return Ne===x&&(function(Ie){Ie.window_size=2*Ie.w_size,Te(Ie.head),Ie.max_lazy_match=o[Ie.level].max_lazy,Ie.good_match=o[Ie.level].good_length,Ie.nice_match=o[Ie.level].nice_length,Ie.max_chain_length=o[Ie.level].max_chain,Ie.strstart=0,Ie.block_start=0,Ie.lookahead=0,Ie.insert=0,Ie.match_length=Ie.prev_length=V-1,Ie.match_available=0,Ie.ins_h=0})(ee.state),Ne}function Pt(ee,Ne,Ie,ne,M,U){if(!ee)return b;var J=1;if(Ne===v&&(Ne=6),ne<0?(J=0,ne=-ne):15<ne&&(J=2,ne-=16),M<1||N<M||Ie!==k||ne<8||15<ne||Ne<0||9<Ne||U<0||j<U)return oe(ee,b);ne===8&&(ne=9);var ce=new ze;return(ee.state=ce).strm=ee,ce.wrap=J,ce.gzhead=null,ce.w_bits=ne,ce.w_size=1<<ce.w_bits,ce.w_mask=ce.w_size-1,ce.hash_bits=M+7,ce.hash_size=1<<ce.hash_bits,ce.hash_mask=ce.hash_size-1,ce.hash_shift=~~((ce.hash_bits+V-1)/V),ce.window=new i.Buf8(2*ce.w_size),ce.head=new i.Buf16(ce.hash_size),ce.prev=new i.Buf16(ce.w_size),ce.lit_bufsize=1<<M+6,ce.pending_buf_size=4*ce.lit_bufsize,ce.pending_buf=new i.Buf8(ce.pending_buf_size),ce.d_buf=1*ce.lit_bufsize,ce.l_buf=3*ce.lit_bufsize,ce.level=Ne,ce.strategy=U,ce.method=Ie,pt(ee)}o=[new Oe(0,0,0,0,function(ee,Ne){var Ie=65535;for(Ie>ee.pending_buf_size-5&&(Ie=ee.pending_buf_size-5);;){if(ee.lookahead<=1){if(Ae(ee),ee.lookahead===0&&Ne===m)return I;if(ee.lookahead===0)break}ee.strstart+=ee.lookahead,ee.lookahead=0;var ne=ee.block_start+Ie;if((ee.strstart===0||ee.strstart>=ne)&&(ee.lookahead=ee.strstart-ne,ee.strstart=ne,Y(ee,!1),ee.strm.avail_out===0)||ee.strstart-ee.block_start>=ee.w_size-Z&&(Y(ee,!1),ee.strm.avail_out===0))return I}return ee.insert=0,Ne===y?(Y(ee,!0),ee.strm.avail_out===0?D:Q):(ee.strstart>ee.block_start&&(Y(ee,!1),ee.strm.avail_out),I)}),new Oe(4,4,8,4,qe),new Oe(4,5,16,8,qe),new Oe(4,6,32,32,qe),new Oe(4,4,16,16,we),new Oe(8,16,32,32,we),new Oe(8,16,128,128,we),new Oe(8,32,128,256,we),new Oe(32,128,258,1024,we),new Oe(32,258,258,4096,we)],s.deflateInit=function(ee,Ne){return Pt(ee,Ne,k,15,8,0)},s.deflateInit2=Pt,s.deflateReset=pt,s.deflateResetKeep=We,s.deflateSetHeader=function(ee,Ne){return ee&&ee.state?ee.state.wrap!==2?b:(ee.state.gzhead=Ne,x):b},s.deflate=function(ee,Ne){var Ie,ne,M,U;if(!ee||!ee.state||5<Ne||Ne<0)return ee?oe(ee,b):b;if(ne=ee.state,!ee.output||!ee.input&&ee.avail_in!==0||ne.status===666&&Ne!==y)return oe(ee,ee.avail_out===0?-5:b);if(ne.strm=ee,Ie=ne.last_flush,ne.last_flush=Ne,ne.status===A)if(ne.wrap===2)ee.adler=0,Se(ne,31),Se(ne,139),Se(ne,8),ne.gzhead?(Se(ne,(ne.gzhead.text?1:0)+(ne.gzhead.hcrc?2:0)+(ne.gzhead.extra?4:0)+(ne.gzhead.name?8:0)+(ne.gzhead.comment?16:0)),Se(ne,255&ne.gzhead.time),Se(ne,ne.gzhead.time>>8&255),Se(ne,ne.gzhead.time>>16&255),Se(ne,ne.gzhead.time>>24&255),Se(ne,ne.level===9?2:2<=ne.strategy||ne.level<2?4:0),Se(ne,255&ne.gzhead.os),ne.gzhead.extra&&ne.gzhead.extra.length&&(Se(ne,255&ne.gzhead.extra.length),Se(ne,ne.gzhead.extra.length>>8&255)),ne.gzhead.hcrc&&(ee.adler=d(ee.adler,ne.pending_buf,ne.pending,0)),ne.gzindex=0,ne.status=69):(Se(ne,0),Se(ne,0),Se(ne,0),Se(ne,0),Se(ne,0),Se(ne,ne.level===9?2:2<=ne.strategy||ne.level<2?4:0),Se(ne,3),ne.status=q);else{var J=k+(ne.w_bits-8<<4)<<8;J|=(2<=ne.strategy||ne.level<2?0:ne.level<6?1:ne.level===6?2:3)<<6,ne.strstart!==0&&(J|=32),J+=31-J%31,ne.status=q,fe(ne,J),ne.strstart!==0&&(fe(ne,ee.adler>>>16),fe(ne,65535&ee.adler)),ee.adler=1}if(ne.status===69)if(ne.gzhead.extra){for(M=ne.pending;ne.gzindex<(65535&ne.gzhead.extra.length)&&(ne.pending!==ne.pending_buf_size||(ne.gzhead.hcrc&&ne.pending>M&&(ee.adler=d(ee.adler,ne.pending_buf,ne.pending-M,M)),G(ee),M=ne.pending,ne.pending!==ne.pending_buf_size));)Se(ne,255&ne.gzhead.extra[ne.gzindex]),ne.gzindex++;ne.gzhead.hcrc&&ne.pending>M&&(ee.adler=d(ee.adler,ne.pending_buf,ne.pending-M,M)),ne.gzindex===ne.gzhead.extra.length&&(ne.gzindex=0,ne.status=73)}else ne.status=73;if(ne.status===73)if(ne.gzhead.name){M=ne.pending;do{if(ne.pending===ne.pending_buf_size&&(ne.gzhead.hcrc&&ne.pending>M&&(ee.adler=d(ee.adler,ne.pending_buf,ne.pending-M,M)),G(ee),M=ne.pending,ne.pending===ne.pending_buf_size)){U=1;break}U=ne.gzindex<ne.gzhead.name.length?255&ne.gzhead.name.charCodeAt(ne.gzindex++):0,Se(ne,U)}while(U!==0);ne.gzhead.hcrc&&ne.pending>M&&(ee.adler=d(ee.adler,ne.pending_buf,ne.pending-M,M)),U===0&&(ne.gzindex=0,ne.status=91)}else ne.status=91;if(ne.status===91)if(ne.gzhead.comment){M=ne.pending;do{if(ne.pending===ne.pending_buf_size&&(ne.gzhead.hcrc&&ne.pending>M&&(ee.adler=d(ee.adler,ne.pending_buf,ne.pending-M,M)),G(ee),M=ne.pending,ne.pending===ne.pending_buf_size)){U=1;break}U=ne.gzindex<ne.gzhead.comment.length?255&ne.gzhead.comment.charCodeAt(ne.gzindex++):0,Se(ne,U)}while(U!==0);ne.gzhead.hcrc&&ne.pending>M&&(ee.adler=d(ee.adler,ne.pending_buf,ne.pending-M,M)),U===0&&(ne.status=103)}else ne.status=103;if(ne.status===103&&(ne.gzhead.hcrc?(ne.pending+2>ne.pending_buf_size&&G(ee),ne.pending+2<=ne.pending_buf_size&&(Se(ne,255&ee.adler),Se(ne,ee.adler>>8&255),ee.adler=0,ne.status=q)):ne.status=q),ne.pending!==0){if(G(ee),ee.avail_out===0)return ne.last_flush=-1,x}else if(ee.avail_in===0&&re(Ne)<=re(Ie)&&Ne!==y)return oe(ee,-5);if(ne.status===666&&ee.avail_in!==0)return oe(ee,-5);if(ee.avail_in!==0||ne.lookahead!==0||Ne!==m&&ne.status!==666){var ce=ne.strategy===2?(function(ue,xe){for(var he;;){if(ue.lookahead===0&&(Ae(ue),ue.lookahead===0)){if(xe===m)return I;break}if(ue.match_length=0,he=l._tr_tally(ue,0,ue.window[ue.strstart]),ue.lookahead--,ue.strstart++,he&&(Y(ue,!1),ue.strm.avail_out===0))return I}return ue.insert=0,xe===y?(Y(ue,!0),ue.strm.avail_out===0?D:Q):ue.last_lit&&(Y(ue,!1),ue.strm.avail_out===0)?I:K})(ne,Ne):ne.strategy===3?(function(ue,xe){for(var he,se,Le,Ue,Ge=ue.window;;){if(ue.lookahead<=W){if(Ae(ue),ue.lookahead<=W&&xe===m)return I;if(ue.lookahead===0)break}if(ue.match_length=0,ue.lookahead>=V&&0<ue.strstart&&(se=Ge[Le=ue.strstart-1])===Ge[++Le]&&se===Ge[++Le]&&se===Ge[++Le]){Ue=ue.strstart+W;do;while(se===Ge[++Le]&&se===Ge[++Le]&&se===Ge[++Le]&&se===Ge[++Le]&&se===Ge[++Le]&&se===Ge[++Le]&&se===Ge[++Le]&&se===Ge[++Le]&&Le<Ue);ue.match_length=W-(Ue-Le),ue.match_length>ue.lookahead&&(ue.match_length=ue.lookahead)}if(ue.match_length>=V?(he=l._tr_tally(ue,1,ue.match_length-V),ue.lookahead-=ue.match_length,ue.strstart+=ue.match_length,ue.match_length=0):(he=l._tr_tally(ue,0,ue.window[ue.strstart]),ue.lookahead--,ue.strstart++),he&&(Y(ue,!1),ue.strm.avail_out===0))return I}return ue.insert=0,xe===y?(Y(ue,!0),ue.strm.avail_out===0?D:Q):ue.last_lit&&(Y(ue,!1),ue.strm.avail_out===0)?I:K})(ne,Ne):o[ne.level].func(ne,Ne);if(ce!==D&&ce!==Q||(ne.status=666),ce===I||ce===D)return ee.avail_out===0&&(ne.last_flush=-1),x;if(ce===K&&(Ne===1?l._tr_align(ne):Ne!==5&&(l._tr_stored_block(ne,0,0,!1),Ne===3&&(Te(ne.head),ne.lookahead===0&&(ne.strstart=0,ne.block_start=0,ne.insert=0))),G(ee),ee.avail_out===0))return ne.last_flush=-1,x}return Ne!==y?x:ne.wrap<=0?1:(ne.wrap===2?(Se(ne,255&ee.adler),Se(ne,ee.adler>>8&255),Se(ne,ee.adler>>16&255),Se(ne,ee.adler>>24&255),Se(ne,255&ee.total_in),Se(ne,ee.total_in>>8&255),Se(ne,ee.total_in>>16&255),Se(ne,ee.total_in>>24&255)):(fe(ne,ee.adler>>>16),fe(ne,65535&ee.adler)),G(ee),0<ne.wrap&&(ne.wrap=-ne.wrap),ne.pending!==0?x:1)},s.deflateEnd=function(ee){var Ne;return ee&&ee.state?(Ne=ee.state.status)!==A&&Ne!==69&&Ne!==73&&Ne!==91&&Ne!==103&&Ne!==q&&Ne!==666?oe(ee,b):(ee.state=null,Ne===q?oe(ee,-3):x):b},s.deflateSetDictionary=function(ee,Ne){var Ie,ne,M,U,J,ce,ue,xe,he=Ne.length;if(!ee||!ee.state||(U=(Ie=ee.state).wrap)===2||U===1&&Ie.status!==A||Ie.lookahead)return b;for(U===1&&(ee.adler=c(ee.adler,Ne,he,0)),Ie.wrap=0,he>=Ie.w_size&&(U===0&&(Te(Ie.head),Ie.strstart=0,Ie.block_start=0,Ie.insert=0),xe=new i.Buf8(Ie.w_size),i.arraySet(xe,Ne,he-Ie.w_size,Ie.w_size,0),Ne=xe,he=Ie.w_size),J=ee.avail_in,ce=ee.next_in,ue=ee.input,ee.avail_in=he,ee.next_in=0,ee.input=Ne,Ae(Ie);Ie.lookahead>=V;){for(ne=Ie.strstart,M=Ie.lookahead-(V-1);Ie.ins_h=(Ie.ins_h<<Ie.hash_shift^Ie.window[ne+V-1])&Ie.hash_mask,Ie.prev[ne&Ie.w_mask]=Ie.head[Ie.ins_h],Ie.head[Ie.ins_h]=ne,ne++,--M;);Ie.strstart=ne,Ie.lookahead=V-1,Ae(Ie)}return Ie.strstart+=Ie.lookahead,Ie.block_start=Ie.strstart,Ie.insert=Ie.lookahead,Ie.lookahead=0,Ie.match_length=Ie.prev_length=V-1,Ie.match_available=0,ee.next_in=ce,ee.input=ue,ee.avail_in=J,Ie.wrap=U,x},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,s){t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,s){t.exports=function(o,i){var l,c,d,h,m,y,x,b,v,j,S,k,N,P,R,F,z,H,V,W,Z,A,q,I,K;l=o.state,c=o.next_in,I=o.input,d=c+(o.avail_in-5),h=o.next_out,K=o.output,m=h-(i-o.avail_out),y=h+(o.avail_out-257),x=l.dmax,b=l.wsize,v=l.whave,j=l.wnext,S=l.window,k=l.hold,N=l.bits,P=l.lencode,R=l.distcode,F=(1<<l.lenbits)-1,z=(1<<l.distbits)-1;e:do{N<15&&(k+=I[c++]<<N,N+=8,k+=I[c++]<<N,N+=8),H=P[k&F];t:for(;;){if(k>>>=V=H>>>24,N-=V,(V=H>>>16&255)===0)K[h++]=65535&H;else{if(!(16&V)){if((64&V)==0){H=P[(65535&H)+(k&(1<<V)-1)];continue t}if(32&V){l.mode=12;break e}o.msg="invalid literal/length code",l.mode=30;break e}W=65535&H,(V&=15)&&(N<V&&(k+=I[c++]<<N,N+=8),W+=k&(1<<V)-1,k>>>=V,N-=V),N<15&&(k+=I[c++]<<N,N+=8,k+=I[c++]<<N,N+=8),H=R[k&z];r:for(;;){if(k>>>=V=H>>>24,N-=V,!(16&(V=H>>>16&255))){if((64&V)==0){H=R[(65535&H)+(k&(1<<V)-1)];continue r}o.msg="invalid distance code",l.mode=30;break e}if(Z=65535&H,N<(V&=15)&&(k+=I[c++]<<N,(N+=8)<V&&(k+=I[c++]<<N,N+=8)),x<(Z+=k&(1<<V)-1)){o.msg="invalid distance too far back",l.mode=30;break e}if(k>>>=V,N-=V,(V=h-m)<Z){if(v<(V=Z-V)&&l.sane){o.msg="invalid distance too far back",l.mode=30;break e}if(q=S,(A=0)===j){if(A+=b-V,V<W){for(W-=V;K[h++]=S[A++],--V;);A=h-Z,q=K}}else if(j<V){if(A+=b+j-V,(V-=j)<W){for(W-=V;K[h++]=S[A++],--V;);if(A=0,j<W){for(W-=V=j;K[h++]=S[A++],--V;);A=h-Z,q=K}}}else if(A+=j-V,V<W){for(W-=V;K[h++]=S[A++],--V;);A=h-Z,q=K}for(;2<W;)K[h++]=q[A++],K[h++]=q[A++],K[h++]=q[A++],W-=3;W&&(K[h++]=q[A++],1<W&&(K[h++]=q[A++]))}else{for(A=h-Z;K[h++]=K[A++],K[h++]=K[A++],K[h++]=K[A++],2<(W-=3););W&&(K[h++]=K[A++],1<W&&(K[h++]=K[A++]))}break}}break}}while(c<d&&h<y);c-=W=N>>3,k&=(1<<(N-=W<<3))-1,o.next_in=c,o.next_out=h,o.avail_in=c<d?d-c+5:5-(c-d),o.avail_out=h<y?y-h+257:257-(h-y),l.hold=k,l.bits=N}},{}],49:[function(e,t,s){var o=e("../utils/common"),i=e("./adler32"),l=e("./crc32"),c=e("./inffast"),d=e("./inftrees"),h=1,m=2,y=0,x=-2,b=1,v=852,j=592;function S(A){return(A>>>24&255)+(A>>>8&65280)+((65280&A)<<8)+((255&A)<<24)}function k(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function N(A){var q;return A&&A.state?(q=A.state,A.total_in=A.total_out=q.total=0,A.msg="",q.wrap&&(A.adler=1&q.wrap),q.mode=b,q.last=0,q.havedict=0,q.dmax=32768,q.head=null,q.hold=0,q.bits=0,q.lencode=q.lendyn=new o.Buf32(v),q.distcode=q.distdyn=new o.Buf32(j),q.sane=1,q.back=-1,y):x}function P(A){var q;return A&&A.state?((q=A.state).wsize=0,q.whave=0,q.wnext=0,N(A)):x}function R(A,q){var I,K;return A&&A.state?(K=A.state,q<0?(I=0,q=-q):(I=1+(q>>4),q<48&&(q&=15)),q&&(q<8||15<q)?x:(K.window!==null&&K.wbits!==q&&(K.window=null),K.wrap=I,K.wbits=q,P(A))):x}function F(A,q){var I,K;return A?(K=new k,(A.state=K).window=null,(I=R(A,q))!==y&&(A.state=null),I):x}var z,H,V=!0;function W(A){if(V){var q;for(z=new o.Buf32(512),H=new o.Buf32(32),q=0;q<144;)A.lens[q++]=8;for(;q<256;)A.lens[q++]=9;for(;q<280;)A.lens[q++]=7;for(;q<288;)A.lens[q++]=8;for(d(h,A.lens,0,288,z,0,A.work,{bits:9}),q=0;q<32;)A.lens[q++]=5;d(m,A.lens,0,32,H,0,A.work,{bits:5}),V=!1}A.lencode=z,A.lenbits=9,A.distcode=H,A.distbits=5}function Z(A,q,I,K){var D,Q=A.state;return Q.window===null&&(Q.wsize=1<<Q.wbits,Q.wnext=0,Q.whave=0,Q.window=new o.Buf8(Q.wsize)),K>=Q.wsize?(o.arraySet(Q.window,q,I-Q.wsize,Q.wsize,0),Q.wnext=0,Q.whave=Q.wsize):(K<(D=Q.wsize-Q.wnext)&&(D=K),o.arraySet(Q.window,q,I-K,D,Q.wnext),(K-=D)?(o.arraySet(Q.window,q,I-K,K,0),Q.wnext=K,Q.whave=Q.wsize):(Q.wnext+=D,Q.wnext===Q.wsize&&(Q.wnext=0),Q.whave<Q.wsize&&(Q.whave+=D))),0}s.inflateReset=P,s.inflateReset2=R,s.inflateResetKeep=N,s.inflateInit=function(A){return F(A,15)},s.inflateInit2=F,s.inflate=function(A,q){var I,K,D,Q,oe,re,Te,G,Y,Se,fe,Ee,Ae,qe,we,Oe,ze,We,pt,Pt,ee,Ne,Ie,ne,M=0,U=new o.Buf8(4),J=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!A||!A.state||!A.output||!A.input&&A.avail_in!==0)return x;(I=A.state).mode===12&&(I.mode=13),oe=A.next_out,D=A.output,Te=A.avail_out,Q=A.next_in,K=A.input,re=A.avail_in,G=I.hold,Y=I.bits,Se=re,fe=Te,Ne=y;e:for(;;)switch(I.mode){case b:if(I.wrap===0){I.mode=13;break}for(;Y<16;){if(re===0)break e;re--,G+=K[Q++]<<Y,Y+=8}if(2&I.wrap&&G===35615){U[I.check=0]=255&G,U[1]=G>>>8&255,I.check=l(I.check,U,2,0),Y=G=0,I.mode=2;break}if(I.flags=0,I.head&&(I.head.done=!1),!(1&I.wrap)||(((255&G)<<8)+(G>>8))%31){A.msg="incorrect header check",I.mode=30;break}if((15&G)!=8){A.msg="unknown compression method",I.mode=30;break}if(Y-=4,ee=8+(15&(G>>>=4)),I.wbits===0)I.wbits=ee;else if(ee>I.wbits){A.msg="invalid window size",I.mode=30;break}I.dmax=1<<ee,A.adler=I.check=1,I.mode=512&G?10:12,Y=G=0;break;case 2:for(;Y<16;){if(re===0)break e;re--,G+=K[Q++]<<Y,Y+=8}if(I.flags=G,(255&I.flags)!=8){A.msg="unknown compression method",I.mode=30;break}if(57344&I.flags){A.msg="unknown header flags set",I.mode=30;break}I.head&&(I.head.text=G>>8&1),512&I.flags&&(U[0]=255&G,U[1]=G>>>8&255,I.check=l(I.check,U,2,0)),Y=G=0,I.mode=3;case 3:for(;Y<32;){if(re===0)break e;re--,G+=K[Q++]<<Y,Y+=8}I.head&&(I.head.time=G),512&I.flags&&(U[0]=255&G,U[1]=G>>>8&255,U[2]=G>>>16&255,U[3]=G>>>24&255,I.check=l(I.check,U,4,0)),Y=G=0,I.mode=4;case 4:for(;Y<16;){if(re===0)break e;re--,G+=K[Q++]<<Y,Y+=8}I.head&&(I.head.xflags=255&G,I.head.os=G>>8),512&I.flags&&(U[0]=255&G,U[1]=G>>>8&255,I.check=l(I.check,U,2,0)),Y=G=0,I.mode=5;case 5:if(1024&I.flags){for(;Y<16;){if(re===0)break e;re--,G+=K[Q++]<<Y,Y+=8}I.length=G,I.head&&(I.head.extra_len=G),512&I.flags&&(U[0]=255&G,U[1]=G>>>8&255,I.check=l(I.check,U,2,0)),Y=G=0}else I.head&&(I.head.extra=null);I.mode=6;case 6:if(1024&I.flags&&(re<(Ee=I.length)&&(Ee=re),Ee&&(I.head&&(ee=I.head.extra_len-I.length,I.head.extra||(I.head.extra=new Array(I.head.extra_len)),o.arraySet(I.head.extra,K,Q,Ee,ee)),512&I.flags&&(I.check=l(I.check,K,Ee,Q)),re-=Ee,Q+=Ee,I.length-=Ee),I.length))break e;I.length=0,I.mode=7;case 7:if(2048&I.flags){if(re===0)break e;for(Ee=0;ee=K[Q+Ee++],I.head&&ee&&I.length<65536&&(I.head.name+=String.fromCharCode(ee)),ee&&Ee<re;);if(512&I.flags&&(I.check=l(I.check,K,Ee,Q)),re-=Ee,Q+=Ee,ee)break e}else I.head&&(I.head.name=null);I.length=0,I.mode=8;case 8:if(4096&I.flags){if(re===0)break e;for(Ee=0;ee=K[Q+Ee++],I.head&&ee&&I.length<65536&&(I.head.comment+=String.fromCharCode(ee)),ee&&Ee<re;);if(512&I.flags&&(I.check=l(I.check,K,Ee,Q)),re-=Ee,Q+=Ee,ee)break e}else I.head&&(I.head.comment=null);I.mode=9;case 9:if(512&I.flags){for(;Y<16;){if(re===0)break e;re--,G+=K[Q++]<<Y,Y+=8}if(G!==(65535&I.check)){A.msg="header crc mismatch",I.mode=30;break}Y=G=0}I.head&&(I.head.hcrc=I.flags>>9&1,I.head.done=!0),A.adler=I.check=0,I.mode=12;break;case 10:for(;Y<32;){if(re===0)break e;re--,G+=K[Q++]<<Y,Y+=8}A.adler=I.check=S(G),Y=G=0,I.mode=11;case 11:if(I.havedict===0)return A.next_out=oe,A.avail_out=Te,A.next_in=Q,A.avail_in=re,I.hold=G,I.bits=Y,2;A.adler=I.check=1,I.mode=12;case 12:if(q===5||q===6)break e;case 13:if(I.last){G>>>=7&Y,Y-=7&Y,I.mode=27;break}for(;Y<3;){if(re===0)break e;re--,G+=K[Q++]<<Y,Y+=8}switch(I.last=1&G,Y-=1,3&(G>>>=1)){case 0:I.mode=14;break;case 1:if(W(I),I.mode=20,q!==6)break;G>>>=2,Y-=2;break e;case 2:I.mode=17;break;case 3:A.msg="invalid block type",I.mode=30}G>>>=2,Y-=2;break;case 14:for(G>>>=7&Y,Y-=7&Y;Y<32;){if(re===0)break e;re--,G+=K[Q++]<<Y,Y+=8}if((65535&G)!=(G>>>16^65535)){A.msg="invalid stored block lengths",I.mode=30;break}if(I.length=65535&G,Y=G=0,I.mode=15,q===6)break e;case 15:I.mode=16;case 16:if(Ee=I.length){if(re<Ee&&(Ee=re),Te<Ee&&(Ee=Te),Ee===0)break e;o.arraySet(D,K,Q,Ee,oe),re-=Ee,Q+=Ee,Te-=Ee,oe+=Ee,I.length-=Ee;break}I.mode=12;break;case 17:for(;Y<14;){if(re===0)break e;re--,G+=K[Q++]<<Y,Y+=8}if(I.nlen=257+(31&G),G>>>=5,Y-=5,I.ndist=1+(31&G),G>>>=5,Y-=5,I.ncode=4+(15&G),G>>>=4,Y-=4,286<I.nlen||30<I.ndist){A.msg="too many length or distance symbols",I.mode=30;break}I.have=0,I.mode=18;case 18:for(;I.have<I.ncode;){for(;Y<3;){if(re===0)break e;re--,G+=K[Q++]<<Y,Y+=8}I.lens[J[I.have++]]=7&G,G>>>=3,Y-=3}for(;I.have<19;)I.lens[J[I.have++]]=0;if(I.lencode=I.lendyn,I.lenbits=7,Ie={bits:I.lenbits},Ne=d(0,I.lens,0,19,I.lencode,0,I.work,Ie),I.lenbits=Ie.bits,Ne){A.msg="invalid code lengths set",I.mode=30;break}I.have=0,I.mode=19;case 19:for(;I.have<I.nlen+I.ndist;){for(;Oe=(M=I.lencode[G&(1<<I.lenbits)-1])>>>16&255,ze=65535&M,!((we=M>>>24)<=Y);){if(re===0)break e;re--,G+=K[Q++]<<Y,Y+=8}if(ze<16)G>>>=we,Y-=we,I.lens[I.have++]=ze;else{if(ze===16){for(ne=we+2;Y<ne;){if(re===0)break e;re--,G+=K[Q++]<<Y,Y+=8}if(G>>>=we,Y-=we,I.have===0){A.msg="invalid bit length repeat",I.mode=30;break}ee=I.lens[I.have-1],Ee=3+(3&G),G>>>=2,Y-=2}else if(ze===17){for(ne=we+3;Y<ne;){if(re===0)break e;re--,G+=K[Q++]<<Y,Y+=8}Y-=we,ee=0,Ee=3+(7&(G>>>=we)),G>>>=3,Y-=3}else{for(ne=we+7;Y<ne;){if(re===0)break e;re--,G+=K[Q++]<<Y,Y+=8}Y-=we,ee=0,Ee=11+(127&(G>>>=we)),G>>>=7,Y-=7}if(I.have+Ee>I.nlen+I.ndist){A.msg="invalid bit length repeat",I.mode=30;break}for(;Ee--;)I.lens[I.have++]=ee}}if(I.mode===30)break;if(I.lens[256]===0){A.msg="invalid code -- missing end-of-block",I.mode=30;break}if(I.lenbits=9,Ie={bits:I.lenbits},Ne=d(h,I.lens,0,I.nlen,I.lencode,0,I.work,Ie),I.lenbits=Ie.bits,Ne){A.msg="invalid literal/lengths set",I.mode=30;break}if(I.distbits=6,I.distcode=I.distdyn,Ie={bits:I.distbits},Ne=d(m,I.lens,I.nlen,I.ndist,I.distcode,0,I.work,Ie),I.distbits=Ie.bits,Ne){A.msg="invalid distances set",I.mode=30;break}if(I.mode=20,q===6)break e;case 20:I.mode=21;case 21:if(6<=re&&258<=Te){A.next_out=oe,A.avail_out=Te,A.next_in=Q,A.avail_in=re,I.hold=G,I.bits=Y,c(A,fe),oe=A.next_out,D=A.output,Te=A.avail_out,Q=A.next_in,K=A.input,re=A.avail_in,G=I.hold,Y=I.bits,I.mode===12&&(I.back=-1);break}for(I.back=0;Oe=(M=I.lencode[G&(1<<I.lenbits)-1])>>>16&255,ze=65535&M,!((we=M>>>24)<=Y);){if(re===0)break e;re--,G+=K[Q++]<<Y,Y+=8}if(Oe&&(240&Oe)==0){for(We=we,pt=Oe,Pt=ze;Oe=(M=I.lencode[Pt+((G&(1<<We+pt)-1)>>We)])>>>16&255,ze=65535&M,!(We+(we=M>>>24)<=Y);){if(re===0)break e;re--,G+=K[Q++]<<Y,Y+=8}G>>>=We,Y-=We,I.back+=We}if(G>>>=we,Y-=we,I.back+=we,I.length=ze,Oe===0){I.mode=26;break}if(32&Oe){I.back=-1,I.mode=12;break}if(64&Oe){A.msg="invalid literal/length code",I.mode=30;break}I.extra=15&Oe,I.mode=22;case 22:if(I.extra){for(ne=I.extra;Y<ne;){if(re===0)break e;re--,G+=K[Q++]<<Y,Y+=8}I.length+=G&(1<<I.extra)-1,G>>>=I.extra,Y-=I.extra,I.back+=I.extra}I.was=I.length,I.mode=23;case 23:for(;Oe=(M=I.distcode[G&(1<<I.distbits)-1])>>>16&255,ze=65535&M,!((we=M>>>24)<=Y);){if(re===0)break e;re--,G+=K[Q++]<<Y,Y+=8}if((240&Oe)==0){for(We=we,pt=Oe,Pt=ze;Oe=(M=I.distcode[Pt+((G&(1<<We+pt)-1)>>We)])>>>16&255,ze=65535&M,!(We+(we=M>>>24)<=Y);){if(re===0)break e;re--,G+=K[Q++]<<Y,Y+=8}G>>>=We,Y-=We,I.back+=We}if(G>>>=we,Y-=we,I.back+=we,64&Oe){A.msg="invalid distance code",I.mode=30;break}I.offset=ze,I.extra=15&Oe,I.mode=24;case 24:if(I.extra){for(ne=I.extra;Y<ne;){if(re===0)break e;re--,G+=K[Q++]<<Y,Y+=8}I.offset+=G&(1<<I.extra)-1,G>>>=I.extra,Y-=I.extra,I.back+=I.extra}if(I.offset>I.dmax){A.msg="invalid distance too far back",I.mode=30;break}I.mode=25;case 25:if(Te===0)break e;if(Ee=fe-Te,I.offset>Ee){if((Ee=I.offset-Ee)>I.whave&&I.sane){A.msg="invalid distance too far back",I.mode=30;break}Ae=Ee>I.wnext?(Ee-=I.wnext,I.wsize-Ee):I.wnext-Ee,Ee>I.length&&(Ee=I.length),qe=I.window}else qe=D,Ae=oe-I.offset,Ee=I.length;for(Te<Ee&&(Ee=Te),Te-=Ee,I.length-=Ee;D[oe++]=qe[Ae++],--Ee;);I.length===0&&(I.mode=21);break;case 26:if(Te===0)break e;D[oe++]=I.length,Te--,I.mode=21;break;case 27:if(I.wrap){for(;Y<32;){if(re===0)break e;re--,G|=K[Q++]<<Y,Y+=8}if(fe-=Te,A.total_out+=fe,I.total+=fe,fe&&(A.adler=I.check=I.flags?l(I.check,D,fe,oe-fe):i(I.check,D,fe,oe-fe)),fe=Te,(I.flags?G:S(G))!==I.check){A.msg="incorrect data check",I.mode=30;break}Y=G=0}I.mode=28;case 28:if(I.wrap&&I.flags){for(;Y<32;){if(re===0)break e;re--,G+=K[Q++]<<Y,Y+=8}if(G!==(4294967295&I.total)){A.msg="incorrect length check",I.mode=30;break}Y=G=0}I.mode=29;case 29:Ne=1;break e;case 30:Ne=-3;break e;case 31:return-4;default:return x}return A.next_out=oe,A.avail_out=Te,A.next_in=Q,A.avail_in=re,I.hold=G,I.bits=Y,(I.wsize||fe!==A.avail_out&&I.mode<30&&(I.mode<27||q!==4))&&Z(A,A.output,A.next_out,fe-A.avail_out)?(I.mode=31,-4):(Se-=A.avail_in,fe-=A.avail_out,A.total_in+=Se,A.total_out+=fe,I.total+=fe,I.wrap&&fe&&(A.adler=I.check=I.flags?l(I.check,D,fe,A.next_out-fe):i(I.check,D,fe,A.next_out-fe)),A.data_type=I.bits+(I.last?64:0)+(I.mode===12?128:0)+(I.mode===20||I.mode===15?256:0),(Se==0&&fe===0||q===4)&&Ne===y&&(Ne=-5),Ne)},s.inflateEnd=function(A){if(!A||!A.state)return x;var q=A.state;return q.window&&(q.window=null),A.state=null,y},s.inflateGetHeader=function(A,q){var I;return A&&A.state?(2&(I=A.state).wrap)==0?x:((I.head=q).done=!1,y):x},s.inflateSetDictionary=function(A,q){var I,K=q.length;return A&&A.state?(I=A.state).wrap!==0&&I.mode!==11?x:I.mode===11&&i(1,q,K,0)!==I.check?-3:Z(A,q,K,K)?(I.mode=31,-4):(I.havedict=1,y):x},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,s){var o=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(h,m,y,x,b,v,j,S){var k,N,P,R,F,z,H,V,W,Z=S.bits,A=0,q=0,I=0,K=0,D=0,Q=0,oe=0,re=0,Te=0,G=0,Y=null,Se=0,fe=new o.Buf16(16),Ee=new o.Buf16(16),Ae=null,qe=0;for(A=0;A<=15;A++)fe[A]=0;for(q=0;q<x;q++)fe[m[y+q]]++;for(D=Z,K=15;1<=K&&fe[K]===0;K--);if(K<D&&(D=K),K===0)return b[v++]=20971520,b[v++]=20971520,S.bits=1,0;for(I=1;I<K&&fe[I]===0;I++);for(D<I&&(D=I),A=re=1;A<=15;A++)if(re<<=1,(re-=fe[A])<0)return-1;if(0<re&&(h===0||K!==1))return-1;for(Ee[1]=0,A=1;A<15;A++)Ee[A+1]=Ee[A]+fe[A];for(q=0;q<x;q++)m[y+q]!==0&&(j[Ee[m[y+q]]++]=q);if(z=h===0?(Y=Ae=j,19):h===1?(Y=i,Se-=257,Ae=l,qe-=257,256):(Y=c,Ae=d,-1),A=I,F=v,oe=q=G=0,P=-1,R=(Te=1<<(Q=D))-1,h===1&&852<Te||h===2&&592<Te)return 1;for(;;){for(H=A-oe,W=j[q]<z?(V=0,j[q]):j[q]>z?(V=Ae[qe+j[q]],Y[Se+j[q]]):(V=96,0),k=1<<A-oe,I=N=1<<Q;b[F+(G>>oe)+(N-=k)]=H<<24|V<<16|W|0,N!==0;);for(k=1<<A-1;G&k;)k>>=1;if(k!==0?(G&=k-1,G+=k):G=0,q++,--fe[A]==0){if(A===K)break;A=m[y+j[q]]}if(D<A&&(G&R)!==P){for(oe===0&&(oe=D),F+=I,re=1<<(Q=A-oe);Q+oe<K&&!((re-=fe[Q+oe])<=0);)Q++,re<<=1;if(Te+=1<<Q,h===1&&852<Te||h===2&&592<Te)return 1;b[P=G&R]=D<<24|Q<<16|F-v|0}}return G!==0&&(b[F+G]=A-oe<<24|64<<16|0),S.bits=D,0}},{"../utils/common":41}],51:[function(e,t,s){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,s){var o=e("../utils/common"),i=0,l=1;function c(M){for(var U=M.length;0<=--U;)M[U]=0}var d=0,h=29,m=256,y=m+1+h,x=30,b=19,v=2*y+1,j=15,S=16,k=7,N=256,P=16,R=17,F=18,z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],H=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],V=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Z=new Array(2*(y+2));c(Z);var A=new Array(2*x);c(A);var q=new Array(512);c(q);var I=new Array(256);c(I);var K=new Array(h);c(K);var D,Q,oe,re=new Array(x);function Te(M,U,J,ce,ue){this.static_tree=M,this.extra_bits=U,this.extra_base=J,this.elems=ce,this.max_length=ue,this.has_stree=M&&M.length}function G(M,U){this.dyn_tree=M,this.max_code=0,this.stat_desc=U}function Y(M){return M<256?q[M]:q[256+(M>>>7)]}function Se(M,U){M.pending_buf[M.pending++]=255&U,M.pending_buf[M.pending++]=U>>>8&255}function fe(M,U,J){M.bi_valid>S-J?(M.bi_buf|=U<<M.bi_valid&65535,Se(M,M.bi_buf),M.bi_buf=U>>S-M.bi_valid,M.bi_valid+=J-S):(M.bi_buf|=U<<M.bi_valid&65535,M.bi_valid+=J)}function Ee(M,U,J){fe(M,J[2*U],J[2*U+1])}function Ae(M,U){for(var J=0;J|=1&M,M>>>=1,J<<=1,0<--U;);return J>>>1}function qe(M,U,J){var ce,ue,xe=new Array(j+1),he=0;for(ce=1;ce<=j;ce++)xe[ce]=he=he+J[ce-1]<<1;for(ue=0;ue<=U;ue++){var se=M[2*ue+1];se!==0&&(M[2*ue]=Ae(xe[se]++,se))}}function we(M){var U;for(U=0;U<y;U++)M.dyn_ltree[2*U]=0;for(U=0;U<x;U++)M.dyn_dtree[2*U]=0;for(U=0;U<b;U++)M.bl_tree[2*U]=0;M.dyn_ltree[2*N]=1,M.opt_len=M.static_len=0,M.last_lit=M.matches=0}function Oe(M){8<M.bi_valid?Se(M,M.bi_buf):0<M.bi_valid&&(M.pending_buf[M.pending++]=M.bi_buf),M.bi_buf=0,M.bi_valid=0}function ze(M,U,J,ce){var ue=2*U,xe=2*J;return M[ue]<M[xe]||M[ue]===M[xe]&&ce[U]<=ce[J]}function We(M,U,J){for(var ce=M.heap[J],ue=J<<1;ue<=M.heap_len&&(ue<M.heap_len&&ze(U,M.heap[ue+1],M.heap[ue],M.depth)&&ue++,!ze(U,ce,M.heap[ue],M.depth));)M.heap[J]=M.heap[ue],J=ue,ue<<=1;M.heap[J]=ce}function pt(M,U,J){var ce,ue,xe,he,se=0;if(M.last_lit!==0)for(;ce=M.pending_buf[M.d_buf+2*se]<<8|M.pending_buf[M.d_buf+2*se+1],ue=M.pending_buf[M.l_buf+se],se++,ce===0?Ee(M,ue,U):(Ee(M,(xe=I[ue])+m+1,U),(he=z[xe])!==0&&fe(M,ue-=K[xe],he),Ee(M,xe=Y(--ce),J),(he=H[xe])!==0&&fe(M,ce-=re[xe],he)),se<M.last_lit;);Ee(M,N,U)}function Pt(M,U){var J,ce,ue,xe=U.dyn_tree,he=U.stat_desc.static_tree,se=U.stat_desc.has_stree,Le=U.stat_desc.elems,Ue=-1;for(M.heap_len=0,M.heap_max=v,J=0;J<Le;J++)xe[2*J]!==0?(M.heap[++M.heap_len]=Ue=J,M.depth[J]=0):xe[2*J+1]=0;for(;M.heap_len<2;)xe[2*(ue=M.heap[++M.heap_len]=Ue<2?++Ue:0)]=1,M.depth[ue]=0,M.opt_len--,se&&(M.static_len-=he[2*ue+1]);for(U.max_code=Ue,J=M.heap_len>>1;1<=J;J--)We(M,xe,J);for(ue=Le;J=M.heap[1],M.heap[1]=M.heap[M.heap_len--],We(M,xe,1),ce=M.heap[1],M.heap[--M.heap_max]=J,M.heap[--M.heap_max]=ce,xe[2*ue]=xe[2*J]+xe[2*ce],M.depth[ue]=(M.depth[J]>=M.depth[ce]?M.depth[J]:M.depth[ce])+1,xe[2*J+1]=xe[2*ce+1]=ue,M.heap[1]=ue++,We(M,xe,1),2<=M.heap_len;);M.heap[--M.heap_max]=M.heap[1],(function(Ge,ie){var _e,le,Xe,Fe,dt,lt,ft=ie.dyn_tree,Ze=ie.max_code,Nt=ie.stat_desc.static_tree,Mt=ie.stat_desc.has_stree,vt=ie.stat_desc.extra_bits,Jt=ie.stat_desc.extra_base,wr=ie.stat_desc.max_length,Wt=0;for(Fe=0;Fe<=j;Fe++)Ge.bl_count[Fe]=0;for(ft[2*Ge.heap[Ge.heap_max]+1]=0,_e=Ge.heap_max+1;_e<v;_e++)wr<(Fe=ft[2*ft[2*(le=Ge.heap[_e])+1]+1]+1)&&(Fe=wr,Wt++),ft[2*le+1]=Fe,Ze<le||(Ge.bl_count[Fe]++,dt=0,Jt<=le&&(dt=vt[le-Jt]),lt=ft[2*le],Ge.opt_len+=lt*(Fe+dt),Mt&&(Ge.static_len+=lt*(Nt[2*le+1]+dt)));if(Wt!==0){do{for(Fe=wr-1;Ge.bl_count[Fe]===0;)Fe--;Ge.bl_count[Fe]--,Ge.bl_count[Fe+1]+=2,Ge.bl_count[wr]--,Wt-=2}while(0<Wt);for(Fe=wr;Fe!==0;Fe--)for(le=Ge.bl_count[Fe];le!==0;)Ze<(Xe=Ge.heap[--_e])||(ft[2*Xe+1]!==Fe&&(Ge.opt_len+=(Fe-ft[2*Xe+1])*ft[2*Xe],ft[2*Xe+1]=Fe),le--)}})(M,U),qe(xe,Ue,M.bl_count)}function ee(M,U,J){var ce,ue,xe=-1,he=U[1],se=0,Le=7,Ue=4;for(he===0&&(Le=138,Ue=3),U[2*(J+1)+1]=65535,ce=0;ce<=J;ce++)ue=he,he=U[2*(ce+1)+1],++se<Le&&ue===he||(se<Ue?M.bl_tree[2*ue]+=se:ue!==0?(ue!==xe&&M.bl_tree[2*ue]++,M.bl_tree[2*P]++):se<=10?M.bl_tree[2*R]++:M.bl_tree[2*F]++,xe=ue,Ue=(se=0)===he?(Le=138,3):ue===he?(Le=6,3):(Le=7,4))}function Ne(M,U,J){var ce,ue,xe=-1,he=U[1],se=0,Le=7,Ue=4;for(he===0&&(Le=138,Ue=3),ce=0;ce<=J;ce++)if(ue=he,he=U[2*(ce+1)+1],!(++se<Le&&ue===he)){if(se<Ue)for(;Ee(M,ue,M.bl_tree),--se!=0;);else ue!==0?(ue!==xe&&(Ee(M,ue,M.bl_tree),se--),Ee(M,P,M.bl_tree),fe(M,se-3,2)):se<=10?(Ee(M,R,M.bl_tree),fe(M,se-3,3)):(Ee(M,F,M.bl_tree),fe(M,se-11,7));xe=ue,Ue=(se=0)===he?(Le=138,3):ue===he?(Le=6,3):(Le=7,4)}}c(re);var Ie=!1;function ne(M,U,J,ce){fe(M,(d<<1)+(ce?1:0),3),(function(ue,xe,he,se){Oe(ue),Se(ue,he),Se(ue,~he),o.arraySet(ue.pending_buf,ue.window,xe,he,ue.pending),ue.pending+=he})(M,U,J)}s._tr_init=function(M){Ie||((function(){var U,J,ce,ue,xe,he=new Array(j+1);for(ue=ce=0;ue<h-1;ue++)for(K[ue]=ce,U=0;U<1<<z[ue];U++)I[ce++]=ue;for(I[ce-1]=ue,ue=xe=0;ue<16;ue++)for(re[ue]=xe,U=0;U<1<<H[ue];U++)q[xe++]=ue;for(xe>>=7;ue<x;ue++)for(re[ue]=xe<<7,U=0;U<1<<H[ue]-7;U++)q[256+xe++]=ue;for(J=0;J<=j;J++)he[J]=0;for(U=0;U<=143;)Z[2*U+1]=8,U++,he[8]++;for(;U<=255;)Z[2*U+1]=9,U++,he[9]++;for(;U<=279;)Z[2*U+1]=7,U++,he[7]++;for(;U<=287;)Z[2*U+1]=8,U++,he[8]++;for(qe(Z,y+1,he),U=0;U<x;U++)A[2*U+1]=5,A[2*U]=Ae(U,5);D=new Te(Z,z,m+1,y,j),Q=new Te(A,H,0,x,j),oe=new Te(new Array(0),V,0,b,k)})(),Ie=!0),M.l_desc=new G(M.dyn_ltree,D),M.d_desc=new G(M.dyn_dtree,Q),M.bl_desc=new G(M.bl_tree,oe),M.bi_buf=0,M.bi_valid=0,we(M)},s._tr_stored_block=ne,s._tr_flush_block=function(M,U,J,ce){var ue,xe,he=0;0<M.level?(M.strm.data_type===2&&(M.strm.data_type=(function(se){var Le,Ue=4093624447;for(Le=0;Le<=31;Le++,Ue>>>=1)if(1&Ue&&se.dyn_ltree[2*Le]!==0)return i;if(se.dyn_ltree[18]!==0||se.dyn_ltree[20]!==0||se.dyn_ltree[26]!==0)return l;for(Le=32;Le<m;Le++)if(se.dyn_ltree[2*Le]!==0)return l;return i})(M)),Pt(M,M.l_desc),Pt(M,M.d_desc),he=(function(se){var Le;for(ee(se,se.dyn_ltree,se.l_desc.max_code),ee(se,se.dyn_dtree,se.d_desc.max_code),Pt(se,se.bl_desc),Le=b-1;3<=Le&&se.bl_tree[2*W[Le]+1]===0;Le--);return se.opt_len+=3*(Le+1)+5+5+4,Le})(M),ue=M.opt_len+3+7>>>3,(xe=M.static_len+3+7>>>3)<=ue&&(ue=xe)):ue=xe=J+5,J+4<=ue&&U!==-1?ne(M,U,J,ce):M.strategy===4||xe===ue?(fe(M,2+(ce?1:0),3),pt(M,Z,A)):(fe(M,4+(ce?1:0),3),(function(se,Le,Ue,Ge){var ie;for(fe(se,Le-257,5),fe(se,Ue-1,5),fe(se,Ge-4,4),ie=0;ie<Ge;ie++)fe(se,se.bl_tree[2*W[ie]+1],3);Ne(se,se.dyn_ltree,Le-1),Ne(se,se.dyn_dtree,Ue-1)})(M,M.l_desc.max_code+1,M.d_desc.max_code+1,he+1),pt(M,M.dyn_ltree,M.dyn_dtree)),we(M),ce&&Oe(M)},s._tr_tally=function(M,U,J){return M.pending_buf[M.d_buf+2*M.last_lit]=U>>>8&255,M.pending_buf[M.d_buf+2*M.last_lit+1]=255&U,M.pending_buf[M.l_buf+M.last_lit]=255&J,M.last_lit++,U===0?M.dyn_ltree[2*J]++:(M.matches++,U--,M.dyn_ltree[2*(I[J]+m+1)]++,M.dyn_dtree[2*Y(U)]++),M.last_lit===M.lit_bufsize-1},s._tr_align=function(M){fe(M,2,3),Ee(M,N,Z),(function(U){U.bi_valid===16?(Se(U,U.bi_buf),U.bi_buf=0,U.bi_valid=0):8<=U.bi_valid&&(U.pending_buf[U.pending++]=255&U.bi_buf,U.bi_buf>>=8,U.bi_valid-=8)})(M)}},{"../utils/common":41}],53:[function(e,t,s){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,s){(function(o){(function(i,l){if(!i.setImmediate){var c,d,h,m,y=1,x={},b=!1,v=i.document,j=Object.getPrototypeOf&&Object.getPrototypeOf(i);j=j&&j.setTimeout?j:i,c={}.toString.call(i.process)==="[object process]"?function(P){process.nextTick(function(){k(P)})}:(function(){if(i.postMessage&&!i.importScripts){var P=!0,R=i.onmessage;return i.onmessage=function(){P=!1},i.postMessage("","*"),i.onmessage=R,P}})()?(m="setImmediate$"+Math.random()+"$",i.addEventListener?i.addEventListener("message",N,!1):i.attachEvent("onmessage",N),function(P){i.postMessage(m+P,"*")}):i.MessageChannel?((h=new MessageChannel).port1.onmessage=function(P){k(P.data)},function(P){h.port2.postMessage(P)}):v&&"onreadystatechange"in v.createElement("script")?(d=v.documentElement,function(P){var R=v.createElement("script");R.onreadystatechange=function(){k(P),R.onreadystatechange=null,d.removeChild(R),R=null},d.appendChild(R)}):function(P){setTimeout(k,0,P)},j.setImmediate=function(P){typeof P!="function"&&(P=new Function(""+P));for(var R=new Array(arguments.length-1),F=0;F<R.length;F++)R[F]=arguments[F+1];var z={callback:P,args:R};return x[y]=z,c(y),y++},j.clearImmediate=S}function S(P){delete x[P]}function k(P){if(b)setTimeout(k,0,P);else{var R=x[P];if(R){b=!0;try{(function(F){var z=F.callback,H=F.args;switch(H.length){case 0:z();break;case 1:z(H[0]);break;case 2:z(H[0],H[1]);break;case 3:z(H[0],H[1],H[2]);break;default:z.apply(l,H)}})(R)}finally{S(P),b=!1}}}}function N(P){P.source===i&&typeof P.data=="string"&&P.data.indexOf(m)===0&&k(+P.data.slice(m.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,typeof r0<"u"?r0:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(jj)),jj.exports}var DB=LB();const p5=rS(DB),x3=f.createContext(void 0),FB=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async()=>{s(!0),i(null);try{const{data:b}=await Ke.get("/custom-themes");if(b.success){const v=(b.data||[]).filter(j=>{const S=/^[0-9a-fA-F]{24}$/.test(j._id);return S||console.warn(`Theme "${j.name}" has invalid ID format: ${j._id}. Skipping.`),S});e(v)}else e([])}catch(b){i(b?.response?.data?.message||"Failed to fetch custom themes"),e([])}finally{s(!1)}},[]),c=f.useCallback(async(b,v,j,S)=>{s(!0),i(null);try{const k=new p5;k.file("index.html",v),j&&k.file("style.css",j),(async z=>{const H=[],V=/<img[^>]+src=["']([^"']+)["']/gi,W=/srcset=["']([^"']+)["']/gi,Z=/background-image\s*:\s*url\(["']?([^"')]+)["']?\)/gi;let A;for(;(A=V.exec(z))!==null;){const D=A[1];D&&!D.startsWith("http")&&!D.startsWith("data:")&&!D.startsWith("#")&&!D.startsWith("mailto:")&&H.push(D)}for(;(A=W.exec(z))!==null;)A[1].split(",").forEach(Q=>{const oe=Q.trim().split(/\s+/)[0];oe&&!oe.startsWith("http")&&!oe.startsWith("data:")&&!oe.startsWith("#")&&H.push(oe)});for(;(A=Z.exec(z))!==null;){const D=A[1];D&&!D.startsWith("http")&&!D.startsWith("data:")&&!D.startsWith("#")&&H.push(D)}const q=[...new Set(H.map(D=>D.startsWith("/")?D.substring(1):D))],I="https://backend.ziplofy.com/api",K=()=>{const D={},Q=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken")||localStorage.getItem("token")||sessionStorage.getItem("token");return Q&&(D.Authorization=`Bearer ${Q}`),D};for(const D of q)try{console.log(" Image reference found:",D)}catch(Q){console.warn("Failed to fetch image:",D,Q)}})(v).catch(z=>{console.warn("Error extracting images:",z)});const P=await k.generateAsync({type:"blob"}),R=new FormData;R.append("name",b),R.append("zipFile",P,`${b.replace(/[^a-zA-Z0-9]/g,"_")}.zip`),S&&R.append("thumbnail",S,"thumbnail.png");const{data:F}=await Ke.post("/custom-themes",R,{headers:{"Content-Type":"multipart/form-data"},timeout:6e5,maxContentLength:1/0,maxBodyLength:1/0,onUploadProgress:z=>{if(z.total){const H=Math.round(z.loaded*100/z.total);console.log(`Upload progress: ${H}%`)}}});return F.success?(await l(),yr.success("Theme created successfully!"),F.data):(yr.error("Failed to create theme."),null)}catch(k){let N="Failed to create custom theme";return k?.code==="ECONNABORTED"||k?.message?.includes("timeout")?N="Upload timeout: The theme is very large. Please try again or reduce the theme size.":k?.response?.status===413||k?.message?.includes("File too large")||k?.message?.includes("MulterError")?N="Theme too large: The theme exceeds the maximum size limit (500MB). Please reduce the theme size.":k?.response?.data?.message?N=k.response.data.message:k?.message&&(N=k.message),i(N),yr.error(N),null}finally{s(!1)}},[l]),d=f.useCallback(async(b,v,j,S,k)=>{s(!0),i(null);try{const N=new p5;N.file("index.html",j),S&&N.file("style.css",S);const P=await N.generateAsync({type:"blob"}),R=new FormData;R.append("name",v),R.append("zipFile",P,`${v.replace(/[^a-zA-Z0-9]/g,"_")}.zip`),k&&R.append("thumbnail",k,"thumbnail.png");const{data:F}=await Ke.put(`/custom-themes/${b}`,R,{headers:{"Content-Type":"multipart/form-data"},timeout:6e5,maxContentLength:1/0,maxBodyLength:1/0,onUploadProgress:z=>{if(z.total){const H=Math.round(z.loaded*100/z.total);console.log(`Upload progress: ${H}%`)}}});return F.success?(await l(),yr.success("Theme updated successfully!"),F.data):(yr.error("Failed to update theme."),null)}catch(N){if(N?.response?.status===404)return console.warn("Theme not found (404) - updateTheme returning null for fallback handling"),i(null),null;let P="Failed to update custom theme";return N?.code==="ECONNABORTED"||N?.message?.includes("timeout")?P="Upload timeout: The theme is very large. Please try again or reduce the theme size.":N?.response?.status===413||N?.message?.includes("File too large")||N?.message?.includes("MulterError")?P="Theme too large: The theme exceeds the maximum size limit (500MB). Please reduce the theme size.":N?.response?.data?.message?P=N.response.data.message:N?.message&&(P=N.message),i(P),yr.error(P),null}finally{s(!1)}},[l]),h=f.useCallback(async b=>{s(!0),i(null);try{const{data:v}=await Ke.delete(`/custom-themes/${b}`);return v.success?(await l(),!0):!1}catch(v){return i(v?.response?.data?.message||"Failed to delete custom theme"),!1}finally{s(!1)}},[l]),m=f.useCallback(async(b,v)=>{s(!0),i(null);try{const S=(()=>{try{const N=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken")||localStorage.getItem("token")||sessionStorage.getItem("token");if(!N)return null;const P=N.split(".");if(P.length<2)return null;const R=JSON.parse(atob(P[1].replace(/-/g,"+").replace(/_/g,"/")));return String(R.uid||R.userId||R.id||"")}catch{return null}})();if(!S)throw new Error("User authentication required");const{data:k}=await Ke.post("/custom-themes/install",{customThemeId:b,userId:S,storeId:v});if(k.success){const N=`custom-${b}`;return localStorage.setItem("ziplofy.appliedCustomThemeId",N),localStorage.setItem("ziplofy.appliedCustomThemeStoreId",v),await new Promise(P=>setTimeout(P,500)),!0}return yr.error("Failed to install custom theme."),!1}catch(j){const S=j?.response?.data?.message||"Failed to install custom theme";return i(S),yr.error(S),!1}finally{s(!1)}},[]),y=f.useCallback(async(b,v)=>{s(!0),i(null);try{const S=(()=>{try{const N=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken")||localStorage.getItem("token")||sessionStorage.getItem("token");if(!N)return null;const P=N.split(".");if(P.length<2)return null;const R=JSON.parse(atob(P[1].replace(/-/g,"+").replace(/_/g,"/")));return String(R.uid||R.userId||R.id||"")}catch{return null}})();if(!S)throw new Error("User authentication required");const{data:k}=await Ke.post("/custom-themes/uninstall",{customThemeId:b,userId:S,storeId:v});return k.success?(localStorage.removeItem("ziplofy.appliedCustomThemeId"),localStorage.removeItem("ziplofy.appliedCustomThemeStoreId"),!0):(yr.error("Failed to uninstall custom theme."),!1)}catch(j){const S=j?.response?.data?.message||"Failed to uninstall custom theme";return i(S),yr.error(S),!1}finally{s(!1)}},[]),x=f.useMemo(()=>({customThemes:r,loading:t,error:o,fetchAll:l,createTheme:c,updateTheme:d,deleteTheme:h,installTheme:m,uninstallTheme:y}),[r,t,o,l,c,d,h,m,y]);return n.jsx(x3.Provider,{value:x,children:a})};function AS(){const a=f.useContext(x3);if(!a)throw new Error("useCustomThemes must be used within CustomThemesProvider");return a}const th=[{id:"getting-started",title:"Getting Started",icon:"",description:"Welcome to the Elementor Builder! Start building your theme by dragging elements from the left panel.",steps:["Browse elements in the left panel","Drag and drop elements onto the canvas","Click on elements to select and edit them","Use the right panel to style your elements"],arrowTarget:"#blocks-panel",cardPosition:"right",arrowPosition:"left"},{id:"elements-panel",title:"Elements Panel",icon:"",description:"The left panel contains all available elements you can add to your page.",steps:["Search for elements using the search bar","Elements are organized by categories (Layout, Basic, Media, etc.)","Drag any element onto the canvas to add it","Double-click text elements to edit them directly"],arrowPosition:"left",arrowTarget:"#blocks-panel",cardPosition:"right"},{id:"style-panel",title:"Style Panel",icon:"",description:"Customize the appearance of your selected elements using the Style panel on the right.",steps:["Select any element on the canvas","The Style panel will show all available styling options","Adjust colors, spacing, typography, and more","Changes are applied instantly to your element"],arrowPosition:"right",arrowTarget:"#style-panel",cardPosition:"left"},{id:"structure-panel",title:"Structure Panel",icon:"",description:"View and manage the structure of your page elements in the Structure panel.",steps:["See all elements in a hierarchical view","Click on elements in the structure to select them","Navigate complex layouts easily","Understand parent-child relationships"],arrowPosition:"right",arrowTarget:"#layers-panel",cardPosition:"left"},{id:"responsive-design",title:"Responsive Design",icon:"",description:"Preview and customize your design for different screen sizes.",steps:["Use the device icons in the top bar (Desktop, Tablet, Mobile)","Switch between devices to see how your design looks","Adjust styles for each device size","Ensure your theme looks great on all devices"],arrowPosition:"top",arrowTarget:".panel__devices",cardPosition:"bottom"},{id:"save-preview",title:"Save & Preview",icon:"",description:"Save your work and preview how it will look to your users.",steps:['Click "Save" to save your current progress','Use "Preview" to see how your theme looks','Click "Apply" to make this theme active',"Your changes are saved automatically"],arrowPosition:"right",arrowTarget:".builder-top-bar button",cardPosition:"left"},{id:"tips-tricks",title:"Tips & Tricks",icon:"",description:"Helpful tips to make the most of the Elementor Builder.",steps:["Use sections and containers for better layout control","Combine multiple elements for complex designs","Experiment with different style options","Save frequently to avoid losing your work"],arrowTarget:".builder-center-panel",cardPosition:"top",arrowPosition:"bottom"}],BB=({onClose:a})=>{const[r,e]=f.useState(0),[t,s]=f.useState(!0),[o,i]=f.useState({top:0,left:0}),[l,c]=f.useState({visibility:"visible",opacity:1,display:"flex"}),[d,h]=f.useState(!1),[m,y]=f.useState(null),[x,b]=f.useState(null),v=f.useRef(null),j=th[r],S=r===0,k=r===th.length-1;f.useEffect(()=>{if(!j.arrowTarget||!t)return;const z=()=>{let V=null;if(j.id==="save-preview"){const Q=document.querySelector(".builder-top-bar");if(Q){const re=Array.from(Q.querySelectorAll("button")).filter(Te=>{const G=Te.textContent?.trim()||"";return G==="Save"||G==="Preview"||G==="Apply"||G==="Saving..."});if(re.length>0){const Te=re[0].getBoundingClientRect(),G=re[re.length-1].getBoundingClientRect(),Y={left:Te.left,top:Te.top,right:G.right,bottom:Math.max(Te.bottom,G.bottom),width:G.right-Te.left,height:Math.max(Te.height,G.height),x:Te.left,y:Te.top,toJSON:()=>({})};V=re[0],V.__virtualRect=Y}else{const Te=Q.querySelector('div[style*="flex: 1"]')?.nextElementSibling;if(Te){const G=Array.from(Te.querySelectorAll("button"));G.length>0&&(V=G[0])}}}}else V=document.querySelector(j.arrowTarget);if(!V||!v.current)return;let W=V.getBoundingClientRect();V.__virtualRect&&(W=V.__virtualRect);const Z=v.current.getBoundingClientRect(),A=window.scrollY,q=window.scrollX;let I=0,K=0;switch(j.cardPosition){case"right":if(j.id==="save-preview"){I=W.top+A+W.height/2-Z.height/2;const oe=W.right+q+20,re=window.innerWidth+q-Z.width-20;oe>re?K=W.left+q-Z.width-20:K=oe}else I=W.top+A+W.height/2-Z.height/2,K=W.right+q+20;break;case"left":if(j.id==="save-preview"){I=W.top+A+W.height/2-Z.height/2;const oe=W.left+q-Z.width-20,re=q+20;oe<re?K=W.right+q+20:K=oe}else I=W.top+A+W.height/2-Z.height/2,K=W.left+q-Z.width-20;break;case"bottom":const Q=j.id==="save-preview"?10:20;I=W.bottom+A+Q,K=W.left+q+W.width/2-Z.width/2;break;case"top":I=W.top+A-Z.height-20,K=W.left+q+W.width/2-Z.width/2;break;default:I=window.innerHeight/2+A-Z.height/2,K=window.innerWidth/2+q-Z.width/2}const D=20;I=Math.max(D,Math.min(I,window.innerHeight+A-Z.height-D)),K=Math.max(D,Math.min(K,window.innerWidth+q-Z.width-D)),i({top:I,left:K})},H=setTimeout(()=>{z();const V=j.id==="save-preview"?100:50;setTimeout(()=>{if(v.current&&j.arrowTarget){let W=null,Z=null;if(j.id==="save-preview"){const A=document.querySelector(".builder-top-bar");if(A){const I=Array.from(A.querySelectorAll("button")).filter(K=>{const D=K.textContent?.trim()||"";return D==="Save"||D==="Preview"||D==="Apply"||D==="Saving..."});if(I.length>0){const K=I[0].getBoundingClientRect(),D=I[I.length-1].getBoundingClientRect();Z={left:K.left,top:K.top,right:D.right,bottom:Math.max(K.bottom,D.bottom),width:D.right-K.left,height:Math.max(K.height,D.height),x:K.left,y:K.top,toJSON:()=>({})}}else{const K=A.querySelector('div[style*="flex: 1"]')?.nextElementSibling;if(K){const D=Array.from(K.querySelectorAll("button"));if(D.length>0)W=D[0],Z=W.getBoundingClientRect();else return}else return}}else return}else if(W=document.querySelector(j.arrowTarget),W)Z=W.getBoundingClientRect();else return;if(Z){const A=v.current.getBoundingClientRect(),q=Z.left+Z.width/2,I=Z.top+Z.height/2;let K="",D="",Q="";switch(j.arrowPosition){case"left":if(j.id==="save-preview"){const oe=(I-A.top)/A.height*100;D="-22px",K=`${Math.max(10,Math.min(90,oe))}%`,Q="translateY(-50%)"}else D="-22px",K=`${(I-A.top)/A.height*100}%`,Q="translateY(-50%)";break;case"right":if(j.id==="save-preview"){const oe=(I-A.top)/A.height*100-15;D="calc(100% + 2px)",K=`${Math.max(10,Math.min(90,oe))}%`,Q="translateY(-50%)"}else D="calc(100% + 2px)",K=`${(I-A.top)/A.height*100}%`,Q="translateY(-50%)";break;case"top":K="-22px",D=`${(q-A.left)/A.width*100}%`,Q="translateX(-50%)";break;case"bottom":K="calc(100% + 2px)",D=`${(q-A.left)/A.width*100}%`,Q="translateX(-50%)";break}c({top:K||"50%",left:D||"50%",transform:Q||"translate(-50%, -50%)",visibility:"visible",opacity:1,display:"flex"})}else{const A={visibility:"visible",opacity:1,display:"flex"};switch(j.arrowPosition){case"left":A.left="-22px",A.top="50%",A.transform="translateY(-50%)";break;case"right":A.left="calc(100% + 2px)",A.top="50%",A.transform="translateY(-50%)";break;case"top":A.top="-22px",A.left="50%",A.transform="translateX(-50%)";break;case"bottom":A.top="calc(100% + 2px)",A.left="50%",A.transform="translateX(-50%)";break}c(A)}}},V)},50);return window.addEventListener("resize",z),window.addEventListener("scroll",z),()=>{clearTimeout(H),window.removeEventListener("resize",z),window.removeEventListener("scroll",z)}},[r,j.arrowTarget,j.cardPosition,j.arrowPosition,t]);const N=()=>{r<th.length-1?(h(!0),y("next"),b("next"),setTimeout(()=>{e(r+1),setTimeout(()=>{h(!1),y(null)},10)},200)):R()},P=()=>{r>0&&(h(!0),y("prev"),b("prev"),setTimeout(()=>{e(r-1),setTimeout(()=>{h(!1),y(null)},10)},200))},R=()=>{s(!1),a&&a(),localStorage.setItem("ziplofy.elementorTutorialSeen","true")};if(!t)return null;const F=()=>j.arrowPosition?`arrow-${j.arrowPosition}`:"";return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"elementor-tutorial-overlay",onClick:R}),n.jsxs("div",{ref:v,className:`elementor-tutorial-card contextual ${F()} ${d?m==="next"?"slide-out-left":"slide-out-right":x==="next"?"slide-in-from-right":x==="prev"?"slide-in-from-left":"slide-in"}`,style:{top:`${o.top}px`,left:`${o.left}px`},onClick:z=>z.stopPropagation(),children:[j.arrowPosition&&n.jsx("div",{className:`tutorial-arrow arrow-${j.arrowPosition}`,style:{...l,visibility:"visible",opacity:1,display:"flex"},children:n.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 32 32",fill:"none",style:{display:"block"},children:[j.arrowPosition==="left"&&n.jsx("path",{d:"M28 16 L4 16 M8 8 L4 16 L8 24",stroke:"#ffffff",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),j.arrowPosition==="right"&&n.jsx("path",{d:"M4 16 L28 16 M24 8 L28 16 L24 24",stroke:"#ffffff",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),j.arrowPosition==="top"&&n.jsx("path",{d:"M16 28 L16 4 M8 12 L16 4 L24 12",stroke:"#ffffff",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),j.arrowPosition==="bottom"&&n.jsx("path",{d:"M16 4 L16 28 M8 20 L16 28 L24 20",stroke:"#ffffff",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]})}),n.jsxs("div",{className:"tutorial-header",children:[n.jsx("div",{className:"tutorial-icon",children:j.icon}),n.jsx("h2",{className:"tutorial-title",children:j.title}),n.jsx("button",{className:"tutorial-close-btn",onClick:R,"aria-label":"Close tutorial",children:""})]}),n.jsxs("div",{className:"tutorial-content",children:[n.jsx("p",{className:"tutorial-description",children:j.description}),j.steps&&j.steps.length>0&&n.jsxs("div",{className:"tutorial-steps",children:[n.jsx("h3",{className:"steps-title",children:"How to use:"}),n.jsx("ul",{className:"steps-list",children:j.steps.map((z,H)=>n.jsxs("li",{className:"step-item",children:[n.jsx("span",{className:"step-number",children:H+1}),n.jsx("span",{className:"step-text",children:z})]},H))})]})]}),n.jsxs("div",{className:"tutorial-footer",children:[n.jsxs("div",{className:"tutorial-progress",children:[n.jsxs("span",{className:"progress-text",children:[r+1," of ",th.length]}),n.jsx("div",{className:"progress-bar",children:n.jsx("div",{className:"progress-fill",style:{width:`${(r+1)/th.length*100}%`}})})]}),n.jsxs("div",{className:"tutorial-navigation",children:[n.jsx("button",{className:"tutorial-nav-btn prev",onClick:P,disabled:S,children:" Previous"}),n.jsx("button",{className:"tutorial-nav-btn next",onClick:N,children:k?"Got it!":"Next "})]})]}),n.jsx("div",{className:"tutorial-dots",children:th.map((z,H)=>n.jsx("button",{className:`tutorial-dot ${H===r?"active":""}`,onClick:()=>e(H),"aria-label":`Go to tutorial ${H+1}`},H))})]})]})},zB=()=>{const[a]=dS(),r=mr(),{activeStoreId:e}=fn(),t=f.useRef(null),s=f.useRef(null),o=f.useRef(null),i=f.useRef(!1),[l,c]=f.useState(!0),[d,h]=f.useState(!1),[m,y]=f.useState(!1),[x,b]=f.useState(null),[v,j]=f.useState("My Theme"),[S,k]=f.useState(!1),[N,P]=f.useState(!1),[R,F]=f.useState(!1),[z,H]=f.useState(!1),[V,W]=f.useState(""),[Z,A]=f.useState("desktop"),[q,I]=f.useState(!1),[K,D]=f.useState(!1),[Q,oe]=f.useState(""),[re,Te]=f.useState("widgets"),[G,Y]=f.useState(!1),[Se,fe]=f.useState(!1),[Ee,Ae]=f.useState(!1),[qe,we]=f.useState(""),[Oe,ze]=f.useState(!1),[We,pt]=f.useState([]),[Pt,ee]=f.useState(!1),[Ne,Ie]=f.useState([]),[ne,M]=f.useState(null),{createTheme:U,updateTheme:J,fetchAll:ce}=AS();f.useEffect(()=>{try{if(typeof window>"u")return;const te=new URLSearchParams(window.location.search),je=te.get("accessToken");if(je){Au.setItem("accessToken",je),te.delete("accessToken");const Re=`${window.location.pathname}${te.toString()?`?${te.toString()}`:""}`;window.history.replaceState({},"",Re)}}catch(te){console.warn("Failed to persist access token from URL:",te)}},[]);const ue='<section style="padding: 60px 20px; min-height: 400px; background: #ffffff; position: relative; border: 2px dashed #d1d5db; border-radius: 4px; max-width: 1200px; margin: 60px auto;"><div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); display: flex; flex-direction: column; align-items: center; gap: 12px; color: #6b7280; font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;"><div style="display: flex; gap: 12px; align-items: center;"><span style="width: 40px; height: 40px; border-radius: 50%; background: #1e1e1e; display: inline-flex; align-items: center; justify-content: center; color: #fff; font-size: 18px;">+</span><span style="width: 40px; height: 40px; border-radius: 50%; background: #1e1e1e; display: inline-flex; align-items: center; justify-content: center; color: #fff; font-size: 18px;"></span><span style="width: 40px; height: 40px; border-radius: 50%; background: #93003c; display: inline-flex; align-items: center; justify-content: center; color: #fff; font-size: 18px;"></span></div><div style="font-size: 13px; font-weight: 500;">Drag widget here</div></div></section>',xe=te=>{if(!te)return"";const je=te.trim();if(!je)return"";const Re=je.toLowerCase();return Re.startsWith("http://")||Re.startsWith("https://")||Re.startsWith("mailto:")||Re.startsWith("tel:")?je:je.startsWith("//")?`https:${je}`:je.includes("://")?je:`https://${je}`},he=f.useMemo(()=>{try{if(a&&typeof a.get=="function"){const te=a.get("id")||a.get("themeId");if(te){if(/^[0-9a-fA-F]{24}$/.test(te))return te;{console.warn("Invalid theme ID format detected:",te,"- Clearing from URL");const Re=new URL(window.location.href);Re.searchParams.delete("id"),Re.searchParams.delete("themeId"),window.history.replaceState({},"",Re.toString());try{const Ye=`ziplofy.builder.pages.${te}`;localStorage.removeItem(Ye)}catch(Ye){console.warn("Failed to clear localStorage for invalid ID:",Ye)}return null}}}}catch{}try{const te=new URLSearchParams(window.location.search),je=te.get("id")||te.get("themeId");if(je){if(/^[0-9a-fA-F]{24}$/.test(je))return je;{console.warn("Invalid theme ID format detected:",je,"- Clearing from URL");const Ye=new URL(window.location.href);Ye.searchParams.delete("id"),Ye.searchParams.delete("themeId"),window.history.replaceState({},"",Ye.toString());try{const at=`ziplofy.builder.pages.${je}`;localStorage.removeItem(at)}catch(at){console.warn("Failed to clear localStorage for invalid ID:",at)}return null}}}catch{}return null},[a]),se=f.useMemo(()=>!!(he&&/^[0-9a-fA-F]{24}$/.test(he)),[he]);f.useEffect(()=>{try{const te=localStorage.getItem(`ziplofy-theme-notes-${he||"new"}`);if(te){const je=JSON.parse(te);Array.isArray(je)?Ie(je):Ie(je?[{id:Date.now().toString(),content:je,createdAt:Date.now()}]:[])}else Ie([])}catch(te){console.warn("Failed to load notes:",te),Ie([])}},[he]),f.useEffect(()=>{if(Ne.length>0||ne!==null){const te=setTimeout(()=>{try{localStorage.setItem(`ziplofy-theme-notes-${he||"new"}`,JSON.stringify(Ne))}catch(je){console.warn("Failed to auto-save notes:",je)}},1e3);return()=>clearTimeout(te)}},[Ne,he,ne]);const Le=()=>{const te={id:Date.now().toString(),content:"",createdAt:Date.now()};Ie([...Ne,te]),M(te.id)},Ue=(te,je)=>{Ie(Ne.map(Re=>Re.id===te?{...Re,content:je}:Re))},Ge=te=>{if(confirm("Delete this note? This cannot be undone.")){Ie(Ne.filter(je=>je.id!==te)),ne===te&&M(null);try{const je=Ne.filter(Re=>Re.id!==te);localStorage.setItem(`ziplofy-theme-notes-${he||"new"}`,JSON.stringify(je))}catch(je){console.warn("Failed to save after delete:",je)}}},ie=f.useMemo(()=>{try{const te=a?.get?.("storeId");if(te)return console.log(" Found storeId in URL via searchParams:",te),te}catch(te){console.warn("Error reading storeId from searchParams:",te)}try{const te=new URLSearchParams(window.location.search).get("storeId");if(te)return console.log(" Found storeId in URL via window.location:",te),te}catch(te){console.warn("Error reading storeId from window.location:",te)}return console.log(" No storeId found in URL"),""},[a]),_e=f.useMemo(()=>{if(ie)return console.log(" Using storeId from URL parameter:",ie),ie;if(e)return console.log(" Using activeStoreId from store context:",e),e;try{const te=localStorage.getItem("activeStoreId")||sessionStorage.getItem("activeStoreId")||localStorage.getItem("storeId")||sessionStorage.getItem("storeId")||"";return te?console.log(" Using storeId from localStorage/sessionStorage:",te):console.warn(" No storeId found in URL, context, or storage"),te}catch{return""}},[ie,e]);f.useEffect(()=>{console.log(" Store ID resolution:",{storeIdParam:ie,contextActiveStoreId:e,resolvedStoreId:_e,localStorageActiveStoreId:localStorage.getItem("activeStoreId"),localStorageStoreId:localStorage.getItem("storeId"),appliedCustomThemeId:localStorage.getItem("ziplofy.appliedCustomThemeId")})},[ie,e,_e]);const le=f.useMemo(()=>{try{if(a?.get?.("type")==="installed")return!0;const je=a?.get?.("installed")||a?.get?.("source");if(je)return je.toLowerCase()==="installed"||je==="true"}catch{}try{const te=new URLSearchParams(window.location.search);if(te.get("type")==="installed")return!0;const je=te.get("installed")||te.get("source");if(je)return je.toLowerCase()==="installed"||je==="true"}catch{return!1}return!1},[a]),Xe=f.useMemo(()=>le?!0:he?!/^[0-9a-fA-F]{24}$/.test(he):!1,[le,he]),Fe=()=>{try{const te=Au.getItem("accessToken")||localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken")||localStorage.getItem("token")||sessionStorage.getItem("token");if(!te)return"";const je=te.split(".");if(je.length<2)return"";const Re=JSON.parse(atob(je[1].replace(/-/g,"+").replace(/_/g,"/")));return String(Re.uid||Re.userId||Re.id||"")}catch{return""}},dt=()=>{const te={},je=Au.getItem("accessToken")||localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken")||localStorage.getItem("token")||sessionStorage.getItem("token");return je&&(te.Authorization=`Bearer ${je}`),te},lt=async(te=!1)=>{if(console.log(" fetchInstalledThemeFromFiles called:",{shouldLoadInstalledTheme:Xe,force:te,id:he,isInstalledMode:le}),!Xe&&!te||!he)return console.log(" Skipping installed theme fetch:",{shouldLoadInstalledTheme:Xe,force:te,id:he}),null;try{if(typeof window>"u")return null;const je=Fe(),Re=_e||je;if(console.log(" Store ID resolution:",{resolvedStoreId:_e,extractedUserId:je,storeIdParam:ie,finalOwnerId:Re,localStorageActiveStoreId:localStorage.getItem("activeStoreId"),sessionStorageActiveStoreId:sessionStorage.getItem("activeStoreId"),localStorageStoreId:localStorage.getItem("storeId"),sessionStorageStoreId:sessionStorage.getItem("storeId")}),!Re)return console.error(" No store/user identifier provided for installed theme editing",{resolvedStoreId:_e,extractedUserId:je,storeIdParam:ie,localStorageActiveStoreId:localStorage.getItem("activeStoreId"),sessionStorageActiveStoreId:sessionStorage.getItem("activeStoreId"),contextActiveStoreId:e}),b("Unable to identify store or user. Please ensure you are logged in and have selected a store."),null;const Ye="https://backend.ziplofy.com/api",at=Date.now(),jt=`${Ye}/themes/installed/${Re}/${he}/unzippedTheme`,Qe=`${jt}/index.html?v=${at}`;console.log(" Fetching installed theme from:",Qe,{ownerId:Re,themeId:he,apiBase:Ye,isInstalledMode:le,shouldLoadInstalledTheme:Xe,fullUrl:Qe});const $e=dt();console.log(" Auth headers:",{hasToken:!!$e.Authorization});const ve=await fetch(Qe,{credentials:"include",headers:$e});if(console.log(" Theme fetch response:",{status:ve.status,statusText:ve.statusText,ok:ve.ok,url:Qe}),!ve.ok){const Lr=await ve.text().catch(()=>"Unable to read error response");return console.error(" Installed theme request failed:",{status:ve.status,statusText:ve.statusText,url:Qe,ownerId:Re,themeId:he,errorBody:Lr.substring(0,200)}),ve.status===404?b(`Theme not found at ${Qe}. Please verify that theme ID "${he}" exists for store "${Re}" and you have permission to access it.`):ve.status===403?b("You do not have permission to access this theme."):b(`Failed to load theme: ${ve.status} ${ve.statusText}. Check console for details.`),null}const Ve=await ve.text();if(typeof DOMParser>"u")return{html:Ve||ue,css:"",name:"Installed Theme"};const st=new DOMParser,Ot=st.parseFromString(Ve,"text/html"),de=Lr=>{if(!Lr)return"";const kr=Lr.trim();if(!kr)return"";if(/^(?:https?:|data:|mailto:|tel:|javascript:|\/\/)/i.test(kr)||kr.startsWith("#"))return kr;try{const mt=jt.endsWith("/")?jt:`${jt}/`;return kr.startsWith("/")?`${mt}${kr.replace(/^\/+/,"")}`:new URL(kr,mt).href}catch{return kr}};((Lr,kr)=>{Ot.querySelectorAll(Lr).forEach(mt=>{const nr=mt.getAttribute(kr);nr&&(/^(?:https?:|data:|mailto:|tel:|javascript:|\/\/)/i.test(nr)||nr.startsWith("#")||mt.setAttribute(kr,de(nr)))})})("[src]","src"),Ot.querySelectorAll("img[srcset], source[srcset]").forEach(Lr=>{const kr=Lr.getAttribute("srcset");if(!kr)return;const mt=kr.split(",").map(nr=>{const[Ar,Rr]=nr.trim().split(/\s+/,2),kn=de(Ar);return Rr?`${kn} ${Rr}`:kn}).join(", ");Lr.setAttribute("srcset",mt)}),Ot.querySelectorAll("[style]").forEach(Lr=>{const kr=Lr.getAttribute("style");if(!kr)return;const mt=kr.replace(/url\((['"]?)(?!https?:|data:|mailto:|tel:|javascript:|\/\/)([^'")]+)\1\)/gi,(nr,Ar="",Rr)=>{const kn=de(Rr);return`url(${Ar}${kn}${Ar})`});Lr.setAttribute("style",mt)});const ct=new Set;Ot.querySelectorAll("a[href]").forEach(Lr=>{const kr=Lr.getAttribute("href");if(!kr||/^(?:https?:|mailto:|tel:|javascript:|#|\/\/)/i.test(kr))return;const mt=kr.split("?")[0].split("#")[0].trim();if(!mt||mt==="index.html"||mt==="/")return;const nr=mt.replace(/^\/+/,"");nr&&!ct.has(nr)&&ct.add(nr)}),Ot.querySelectorAll("a[href]").forEach(Lr=>{const kr=Lr.getAttribute("href");kr&&(/^(mailto:|tel:|javascript:)/i.test(kr)||kr.startsWith("#")||Lr.setAttribute("href",de(kr)))});const bt=async()=>{const Lr=[],kr=Rr=>{try{const kn=new URL(Rr),Sn="https://backend.ziplofy.com/api",Vn=new URL(Sn),zn=kn.hostname.includes("cdnjs.cloudflare.com")||kn.hostname.includes("cdn.jsdelivr.net")||kn.hostname.includes("unpkg.com")||kn.hostname.includes("fonts.googleapis.com")||kn.hostname.includes("fonts.gstatic.com"),Kn=kn.origin!==Vn.origin&&kn.origin!==window.location.origin;return zn||Kn}catch{return!1}},mt=Array.from(Ot.querySelectorAll('link[rel="stylesheet"]')).map(async Rr=>{const kn=Rr.getAttribute("href");if(!kn)return"";const Sn=de(kn);if(kr(Sn))return console.log(`Using @import for external CDN: ${Sn}`),`@import url('${Sn}');`;try{const Vn=await fetch(Sn,{credentials:"include",headers:dt()});return Vn.ok?await Vn.text()||"":(console.warn(`Failed to fetch CSS from ${Sn}:`,Vn.status),`@import url('${Sn}');`)}catch(Vn){return console.warn(`Error fetching CSS from ${Sn}, using @import:`,Vn),`@import url('${Sn}');`}}),nr=await Promise.all(mt);Lr.push(...nr.filter(Rr=>Rr.trim()));const Ar=Array.from(Ot.querySelectorAll("style")).map(Rr=>Rr.textContent||"").filter(Rr=>Rr.trim());return Lr.push(...Ar),Lr.join(`

`).trim()},Ft=[],cr=[];Ot.head.querySelectorAll("script").forEach(Lr=>{const kr={};Lr.src&&(kr.src=de(Lr.getAttribute("src")||"")),Lr.textContent&&(kr.content=Lr.textContent),Lr.type&&(kr.type=Lr.type),kr.async=Lr.async,kr.defer=Lr.defer,(kr.src||kr.content)&&Ft.push(kr)}),Ot.body&&Ot.body.querySelectorAll("script").forEach(Lr=>{const kr={};Lr.src&&(kr.src=de(Lr.getAttribute("src")||"")),Lr.textContent&&(kr.content=Lr.textContent),Lr.type&&(kr.type=Lr.type),kr.async=Lr.async,kr.defer=Lr.defer,(kr.src||kr.content)&&cr.push(kr)}),Ot.head.querySelectorAll("script").forEach(Lr=>Lr.remove()),Ot.body&&Ot.body.querySelectorAll("script").forEach(Lr=>Lr.remove());const Br=Ot.body?Ot.body.innerHTML:Ve;let kt=await bt();const Yr=[...Ft,...cr];console.log(` Extracted ${Yr.length} scripts from installed theme (${Ft.length} from head, ${cr.length} from body)`);const ma=`<!-- ZIPLOFY_SCRIPTS_DATA:${JSON.stringify(Yr)} -->`,Jn=Br+ma;kt&&(kt=kt.replace(/url\((['"]?)(?!https?:|data:|mailto:|tel:|javascript:|\/\/)([^'")]+)\1\)/gi,(Lr,kr="",mt)=>{const nr=de(mt);return`url(${kr}${nr}${kr})`}));const fa=[];console.log(` Discovered ${ct.size} potential pages from hyperlinks:`,Array.from(ct));const Ns=async Lr=>{try{const kr=[];Lr.toLowerCase().endsWith(".html")?kr.push(`${jt}/${Lr}?v=${at}`):(kr.push(`${jt}/${Lr}/index.html?v=${at}`),kr.push(`${jt}/${Lr}.html?v=${at}`));let mt=null,nr="";for(const Yn of kr)try{const qn=await fetch(Yn,{credentials:"include",headers:dt()});if(qn.ok){mt=await qn.text(),nr=Yn;break}}catch(qn){console.warn(`Failed to fetch page from ${Yn}:`,qn)}if(!mt)return console.warn(`Could not fetch page: ${Lr}`),null;const Ar=st.parseFromString(mt,"text/html");(Yn=>{Yn.querySelectorAll("img[src]").forEach(qn=>{const Zn=qn.getAttribute("src");Zn&&(/^(data:|https?:|\/\/)/i.test(Zn)||qn.setAttribute("src",de(Zn)))}),Yn.querySelectorAll('[style*="background"]').forEach(qn=>{const Zn=qn.getAttribute("style");if(!Zn)return;const ka=Zn.replace(/url\((['"]?)(?!https?:|data:|mailto:|tel:|javascript:|\/\/)([^'")]+)\1\)/gi,(ks,La="",wa)=>{const Xn=de(wa);return`url(${La}${Xn}${La})`});qn.setAttribute("style",ka)}),Yn.querySelectorAll("a[href]").forEach(qn=>{const Zn=qn.getAttribute("href");Zn&&(/^(mailto:|tel:|javascript:|#)/i.test(Zn)||Zn.startsWith("http://")||Zn.startsWith("https://")||Zn.startsWith("//")||qn.setAttribute("href",de(Zn)))})})(Ar);let Sn=await(async Yn=>{const qn=[],Zn=wa=>{try{const Xn=new URL(wa),Ma="https://backend.ziplofy.com/api",es=new URL(Ma),qr=Xn.hostname.includes("cdnjs.cloudflare.com")||Xn.hostname.includes("cdn.jsdelivr.net")||Xn.hostname.includes("unpkg.com")||Xn.hostname.includes("fonts.googleapis.com")||Xn.hostname.includes("fonts.gstatic.com"),Gr=Xn.origin!==es.origin&&Xn.origin!==window.location.origin;return qr||Gr}catch{return!1}},ka=Array.from(Yn.querySelectorAll('link[rel="stylesheet"]')).map(async wa=>{const Xn=wa.getAttribute("href");if(!Xn)return"";const Ma=de(Xn);if(Zn(Ma))return`@import url('${Ma}');`;try{const es=await fetch(Ma,{credentials:"include",headers:dt()});return es.ok?await es.text()||"":`@import url('${Ma}');`}catch{return`@import url('${Ma}');`}}),ks=await Promise.all(ka);qn.push(...ks.filter(wa=>wa.trim()));const La=Array.from(Yn.querySelectorAll("style")).map(wa=>wa.textContent||"").filter(wa=>wa.trim());return qn.push(...La),qn.join(`

`).trim()})(Ar);Sn&&(Sn=Sn.replace(/url\((['"]?)(?!https?:|data:|mailto:|tel:|javascript:|\/\/)([^'")]+)\1\)/gi,(Yn,qn="",Zn)=>{const ka=de(Zn);return`url(${qn}${ka}${qn})`}));const Vn=kt?Sn?`${kt}

/* Page-specific styles */
${Sn}`:kt:Sn,zn=Ar.body?Ar.body.innerHTML:mt,Kn=Lr.replace(/\.html$/i,"").replace(/\/index$/i,"").replace(/\//g,"-").replace(/[^a-z0-9-]/gi,"-").toLowerCase()||`page-${Date.now()}`,ps=(Lr.replace(/\.html$/i,"").replace(/\/index$/i,"").split("/").pop()||"Page").split("-").map(Yn=>Yn.charAt(0).toUpperCase()+Yn.slice(1)).join(" ");return{id:Kn,name:ps,html:zn||ue,css:Vn||""}}catch(kr){return console.error(`Error fetching page ${Lr}:`,kr),null}},Ja=Array.from(ct).map(Lr=>Ns(Lr));(await Promise.all(Ja)).forEach(Lr=>{Lr&&fa.push(Lr)}),console.log(` Successfully discovered and fetched ${fa.length} additional pages`);const fs={html:Jn||Br||ue,css:kt,name:Ot.title||"Installed Theme",pages:fa.length>0?fa:void 0};return console.log("Successfully fetched installed theme:",{name:fs.name,htmlLength:fs.html.length,cssLength:fs.css?.length||0,discoveredPages:fa.length}),fs}catch(je){return console.error("Failed to fetch installed theme files:",je),null}},[ft,Ze]=f.useState([{id:"page-1",name:"Home",html:ue,css:""}]),Nt=f.useRef([{id:"page-1",name:"Home",html:ue,css:""}]),[Mt,vt]=f.useState("page-1"),[Jt,wr]=f.useState(!1),Wt=f.useMemo(()=>he?`ziplofy.builder.pages.${he}`:null,[he]),ye=f.useRef(`tab-${Math.random().toString(36).slice(2)}`),Be=f.useRef(!1),tt=f.useRef(0),wt=f.useRef(!1),Ut=f.useRef(!1),er=f.useRef(!1),zr=te=>{try{return JSON.stringify(te).replace(/</g,"\\u003c").replace(/>/g,"\\u003e").replace(/&/g,"\\u0026")}catch{return"[]"}};f.useEffect(()=>{const te=je=>{if(!z)return je.preventDefault(),je.returnValue="","Your theme is not yet published. Do you still want to close the tab?"};return window.addEventListener("beforeunload",te),()=>{window.removeEventListener("beforeunload",te)}},[z]),f.useEffect(()=>{Nt.current=ft;const te=o.current;te&&te.Components&&setTimeout(()=>{te.Components.getAll().forEach(Ye=>{const at=Ye?.get("tagName")?.toLowerCase();if(at==="button"||at==="a"){const Qe=(Ye.get("traits")||[]).find($e=>typeof $e=="object"?$e.name==="pageLink":!1);if(Qe){const $e=[{id:"",value:"",name:"-- Select Page --"},...ft.map(Ve=>({id:Ve.id,value:Ve.id,name:Ve.name}))];Qe.options=$e;const ve=te.getSelected();if(ve&&ve===Ye&&te.TraitManager){const st=te.TraitManager.getTrait(Ye,"pageLink");st&&st.set&&st.set("options",$e),setTimeout(()=>{typeof te.TraitManager.render=="function"&&te.TraitManager.render()},50)}}}})},100)},[ft]);const rn=(te,je,Re)=>{const Ye=(je||"Ziplofy Theme").replace(/</g,"&lt;").replace(/>/g,"&gt;"),at=zr(te);return`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>${Ye}</title>
  <style>
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      line-height: 1.6;
      color: #1e1e1e;
      background: #ffffff;
    }
    * {
      box-sizing: border-box;
    }
    .ziplofy-page {
      display: none;
      width: 100%;
      min-height: 100vh;
    }
    .ziplofy-page.active {
      display: block;
    }
    /* CRITICAL: Ensure wrapper styles apply to page containers */
    .ziplofy-page > .gjs-wrapper-body,
    .ziplofy-page.gjs-wrapper-body {
      width: 100%;
      min-height: 100vh;
    }
    ${Re||""}
  </style>
</head>
<body>
  <div id="ziplofy-page-container"></div>
  <script id="ziplofy-pages-data" type="application/json">${at}<\/script>
  <script>
    (function() {
      try {
        const container = document.getElementById('ziplofy-page-container');
        const dataEl = document.getElementById('ziplofy-pages-data');
        if (!container || !dataEl) return;
        const pagesText = dataEl.textContent || dataEl.innerText || '[]';
        const pages = JSON.parse(pagesText);
        const normalizeId = function(value) {
          if (value === null || value === undefined) return '';
          return String(value).replace(/^#/, '').trim();
        };
        const idsMatch = function(a, b) {
          const normalizedA = normalizeId(a);
          const normalizedB = normalizeId(b);
          if (!normalizedA || !normalizedB) return false;
          if (normalizedA === normalizedB) return true;
          const stripA = normalizedA.replace(/^page-/, '');
          const stripB = normalizedB.replace(/^page-/, '');
          return stripA === stripB;
        };
        const normalizeExternalUrl = function(url) {
          if (!url) return '';
          const trimmed = String(url).trim();
          if (!trimmed) return '';
          const lower = trimmed.toLowerCase();
          if (lower.startsWith('http://') || lower.startsWith('https://') || lower.startsWith('mailto:') || lower.startsWith('tel:')) {
            return trimmed;
          }
          if (trimmed.startsWith('//')) {
            return 'https:' + trimmed;
          }
          if (trimmed.includes('://')) {
            return trimmed;
          }
          return 'https://' + trimmed;
        };
        const openExternal = function(url) {
          const finalUrl = normalizeExternalUrl(url);
          if (!finalUrl) return;
          window.open(finalUrl, '_blank', 'noopener,noreferrer');
        };
        const renderPages = function() {
          container.innerHTML = '';
          pages.forEach(function(page, index) {
            const wrapper = document.createElement('div');
            // CRITICAL: Add gjs-wrapper-body class so background images work
            wrapper.className = 'ziplofy-page gjs-wrapper-body' + (index === 0 ? ' active' : '');
            wrapper.setAttribute('data-page-id', page.id || ('page-' + (index + 1)));
            wrapper.style.display = index === 0 ? 'block' : 'none';
            wrapper.innerHTML = page.html || '';
            container.appendChild(wrapper);
          });
        };

        const showPage = function(pageId, updateHash) {
          const normalizedRequest = normalizeId(pageId);
          if (!normalizedRequest) return false;
          
          const wrappers = container.querySelectorAll('.ziplofy-page');
          let found = false;
          
          wrappers.forEach(function(wrapper) {
            const wrapperPageId = wrapper.getAttribute('data-page-id') || '';
            
            if (idsMatch(wrapperPageId, normalizedRequest)) {
              wrapper.classList.add('active');
              wrapper.style.display = 'block';
              found = true;
            } else {
              wrapper.classList.remove('active');
              wrapper.style.display = 'none';
            }
          });
          
          if (found && updateHash) {
            const activeWrapper = container.querySelector('.ziplofy-page.active');
            const actualPageId = activeWrapper ? (activeWrapper.getAttribute('data-page-id') || normalizedRequest) : normalizedRequest;
            window.location.hash = '#' + normalizeId(actualPageId);
          }
          
          return found;
        };

        const attachLinkHandlers = function() {
          // Remove old handlers first for links
          const oldLinks = container.querySelectorAll('a[data-page-link]');
          oldLinks.forEach(function(link) {
            const newLink = link.cloneNode(true);
            if (link.parentNode) {
              link.parentNode.replaceChild(newLink, link);
            }
          });
          
          // Remove old handlers for buttons
          const oldButtons = container.querySelectorAll('button[data-page-link]');
          oldButtons.forEach(function(button) {
            const newButton = button.cloneNode(true);
            if (button.parentNode) {
              button.parentNode.replaceChild(newButton, button);
            }
          });
          
          // Attach handlers to links
          const links = container.querySelectorAll('a[data-page-link]');
          links.forEach(function(link) {
            link.addEventListener('click', function(evt) {
              const targetPage = this.getAttribute('data-page-link');
              if (targetPage && targetPage.trim() !== '') {
                evt.preventDefault();
                evt.stopPropagation();
                if (!showPage(targetPage, true)) {
                  console.warn('Ziplofy: target page not found for link', targetPage);
                }
                return;
              }
              
              const href = this.getAttribute('href');
              if (href && href.startsWith('#')) {
                evt.preventDefault();
                evt.stopPropagation();
                if (!showPage(href, true)) {
                  console.warn('Ziplofy: target page not found for link href', href);
                }
                return;
              }
              
              if (href && href.trim() !== '') {
                evt.preventDefault();
                evt.stopPropagation();
                openExternal(href);
              }
            });
          });
          
          // Attach handlers to buttons
          const buttons = container.querySelectorAll('button[data-page-link]');
          buttons.forEach(function(button) {
            button.addEventListener('click', function(evt) {
              evt.preventDefault();
              evt.stopPropagation();
              
              const targetPage = this.getAttribute('data-page-link');
              const href = this.getAttribute('href');
              
              if (targetPage && targetPage.trim() !== '') {
                if (!showPage(targetPage, true)) {
                  console.warn('Ziplofy: target page not found for button', targetPage, 'Available pages:', Array.from(container.querySelectorAll('.ziplofy-page')).map(function(p) { return p.getAttribute('data-page-id'); }));
                }
                return;
              }
              
              if (href && href.startsWith('#')) {
                if (!showPage(href, true)) {
                  console.warn('Ziplofy: target page not found for button href', href);
                }
                return;
              }
              
              if (href && (href.startsWith('http://') || href.startsWith('https://'))) {
                openExternal(href);
                return;
              }
              
              if (href && href.trim() !== '') {
                openExternal(href);
              }
            });
          });
          
          // Also handle buttons with href attribute for external URLs
          const buttonsWithHref = container.querySelectorAll('button[href]');
          buttonsWithHref.forEach(function(button) {
            const href = button.getAttribute('href');
            const hasPageLink = button.hasAttribute('data-page-link');
            
            // Only add handler if it doesn't already have a page link handler
            if (!hasPageLink && href && (href.startsWith('http://') || href.startsWith('https://'))) {
              button.addEventListener('click', function(evt) {
                evt.preventDefault();
                window.open(href, '_blank', 'noopener,noreferrer');
              });
            }
          });
        };

        renderPages();
        attachLinkHandlers();
        
        // Re-attach handlers after any dynamic content changes (with debounce to prevent excessive calls)
        let attachTimeout = null;
        const observer = new MutationObserver(function() {
          if (attachTimeout) {
            clearTimeout(attachTimeout);
          }
          attachTimeout = setTimeout(function() {
            attachLinkHandlers();
          }, 300); // Debounce to 300ms
        });
        observer.observe(container, { childList: true, subtree: true });

        const handleHashChange = function() {
          const hash = window.location.hash.replace(/^#/, '');
          if (!hash) return;
          const clean = hash.replace(/^page-/, '');
          showPage(clean, false);
        };

        window.addEventListener('hashchange', handleHashChange);
        handleHashChange();
      } catch (err) {
        console.error('Ziplofy multipage preview error:', err);
      }

      // Initialize Countdown Timers
      function initCountdownTimers() {
        const timers = document.querySelectorAll('.ziplofy-countdown-timer');
        timers.forEach((timer) => {
          const daysEl = timer.querySelector('.countdown-days');
          const hoursEl = timer.querySelector('.countdown-hours');
          const minutesEl = timer.querySelector('.countdown-minutes');
          const secondsEl = timer.querySelector('.countdown-seconds');
          
          if (!daysEl || !hoursEl || !minutesEl || !secondsEl) return;
          
          let days = parseInt(timer.getAttribute('data-countdown-days') || '0', 10);
          let hours = parseInt(timer.getAttribute('data-countdown-hours') || '0', 10);
          let minutes = parseInt(timer.getAttribute('data-countdown-minutes') || '0', 10);
          let seconds = parseInt(timer.getAttribute('data-countdown-seconds') || '0', 10);
          
          // Convert to total seconds
          let totalSeconds = days * 86400 + hours * 3600 + minutes * 60 + seconds;
          
          function updateTimer() {
            if (totalSeconds <= 0) {
              daysEl.textContent = '0';
              hoursEl.textContent = '0';
              minutesEl.textContent = '0';
              secondsEl.textContent = '0';
              return;
            }
            
            const d = Math.floor(totalSeconds / 86400);
            const h = Math.floor((totalSeconds % 86400) / 3600);
            const m = Math.floor((totalSeconds % 3600) / 60);
            const s = totalSeconds % 60;
            
            daysEl.textContent = d.toString();
            hoursEl.textContent = h.toString().padStart(2, '0');
            minutesEl.textContent = m.toString().padStart(2, '0');
            secondsEl.textContent = s.toString().padStart(2, '0');
            
            totalSeconds--;
          }
          
          updateTimer();
          setInterval(updateTimer, 1000);
        });
      }
      
      // Initialize countdown timers when DOM is ready
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initCountdownTimers);
      } else {
        initCountdownTimers();
      }

      // Initialize Progress Bars - sync percentage text with bar width
      function initProgressBars() {
        const progressBars = document.querySelectorAll('.ziplofy-progress-bar');
        progressBars.forEach((bar) => {
          const percentageEl = bar.querySelector('.progress-percentage');
          const fillEl = bar.querySelector('.progress-bar-fill');
          
          if (!percentageEl || !fillEl) return;
          
          function updateProgressBar() {
            const text = percentageEl.textContent || percentageEl.innerText || '0%';
            const match = text.match(/(d+(?:.d+)?)/);
            if (match) {
              const percentage = parseFloat(match[1]);
              const clampedPercentage = Math.min(100, Math.max(0, percentage));
              fillEl.style.width = clampedPercentage + '%';
            }
          }
          
          // Initial update
          updateProgressBar();
          
          // Watch for changes using MutationObserver
          const observer = new MutationObserver(updateProgressBar);
          observer.observe(percentageEl, {
            childList: true,
            characterData: true,
            subtree: true
          });
        });
      }
      
      // Initialize progress bars when DOM is ready
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initProgressBars);
      } else {
        initProgressBars();
      }

      // Initialize Parallax Sections
      function initParallaxSections() {
        const parallaxSections = document.querySelectorAll('.ziplofy-parallax-section');
        
        if (parallaxSections.length === 0) return;
        
        function updateParallax() {
          parallaxSections.forEach((section) => {
            const background = section.querySelector('.parallax-background');
            const content = section.querySelector('.parallax-content');
            
            if (!background) return;
            
            const rect = section.getBoundingClientRect();
            const windowHeight = window.innerHeight;
            const sectionTop = rect.top;
            const sectionHeight = rect.height;
            
            // Calculate parallax effect based on scroll position
            // Parallax: background moves slower than foreground, creating depth
            const scrolled = window.pageYOffset || document.documentElement.scrollTop;
            const sectionOffset = section.offsetTop;
            
            // Calculate how much the page has scrolled past the section start
            // This creates the parallax effect where background lags behind
            const scrollPastSection = scrolled - sectionOffset;
            
            // Parallax effect: background moves at 50% of scroll speed
            // This creates the illusion that background is further away (moves slower)
            const parallaxSpeed = 0.5;
            const backgroundY = scrollPastSection * parallaxSpeed;
            
            // Only apply parallax when section is in viewport
            if (sectionTop < windowHeight && sectionTop + sectionHeight > 0) {
              // Apply transform to background (moves slower, creating parallax depth)
              background.style.transform = 'translate3d(0, ' + backgroundY + 'px, 0)';
              
              // Content moves even slower for subtle layered parallax effect
              if (content) {
                const contentSpeed = 0.15;
                const contentY = scrollPastSection * contentSpeed;
                content.style.transform = 'translate3d(0, ' + contentY + 'px, 0)';
              }
            } else {
              // Reset when out of viewport
              background.style.transform = 'translate3d(0, 0, 0)';
              if (content) {
                content.style.transform = 'translate3d(0, 0, 0)';
              }
            }
          });
        }
        
        // Throttle scroll events for better performance
        let ticking = false;
        function onScroll() {
          if (!ticking) {
            window.requestAnimationFrame(function() {
              updateParallax();
              ticking = false;
            });
            ticking = true;
          }
        }
        
        // Initial update
        updateParallax();
        
        // Listen to scroll events
        window.addEventListener('scroll', onScroll, { passive: true });
        window.addEventListener('resize', updateParallax, { passive: true });
      }
      
      // Initialize parallax sections when DOM is ready
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initParallaxSections);
      } else {
        initParallaxSections();
      }
    })();
  <\/script>
</body>
</html>`},_n=te=>{if(!te)return null;const je=te.trim();if(je.startsWith("["))try{const Ye=JSON.parse(je);return Array.isArray(Ye)?Ye:null}catch{}const Re=te.match(/<script id="ziplofy-pages-data"[^>]*>([\s\S]*?)<\/script>/i);if(Re&&Re[1])try{const Ye=Re[1].trim(),at=JSON.parse(Ye);if(Array.isArray(at))return at.map((jt,Qe)=>({id:jt?.id||`page-${Qe+1}`,name:jt?.name||`Page ${Qe+1}`,html:jt?.html||ue,css:jt?.css||""}))}catch(Ye){console.warn("Failed to parse multipage JSON from stored HTML:",Ye)}return null},Ur=f.useCallback(()=>{const te=o.current;if(!te||typeof te.getHtml!="function")return{pagesSnapshot:ft,currentHtml:"",currentCss:""};const je=te.getHtml()||"";let Re="";const Ye=[];if(te.getCss){const $e=te.getCss()||"";$e&&$e.trim().length>0&&(Ye.push($e),console.log("Method 1 - Standard getCss():",$e.length,"characters"))}if(te.CssComposer)try{const $e=te.CssComposer.getAll();if($e&&$e.length>0){const ve=$e.map(Ve=>{try{if(Ve.toCSS)return Ve.toCSS();const st=Ve.selectorsToString?Ve.selectorsToString():Ve.getSelectors?Ve.getSelectors():"",Ot=Ve.getStyle?Ve.getStyle():{};if(st&&Ot&&Object.keys(Ot).length>0){const de=Object.entries(Ot).map(([ke,ct])=>`  ${ke}: ${ct};`).join(`
`);return`${st} {
${de}
}`}return""}catch{return""}}).filter(Boolean).join(`

`);ve&&ve.trim().length>0&&(Ye.push(ve),console.log("Method 2 - CssComposer:",ve.length,"characters"))}}catch($e){console.warn("Failed to get CSS from CssComposer:",$e)}if(Re=Ye.join(`

`),te.getWrapper){const ve=te.getWrapper().getId();if(ve&&Re.includes(`#${ve}`)){console.log(` Converting wrapper ID selector #${ve} to class .gjs-wrapper-body`);const Ve=new RegExp(`#${ve}(?![a-zA-Z0-9_-])`,"g");Re=Re.replace(Ve,".gjs-wrapper-body"),console.log(" Converted wrapper selectors to class-based")}}try{const $e=te.getWrapper();if($e){const ve=$e.getStyle?$e.getStyle():null;if(ve&&Object.keys(ve).length>0){const st=`.gjs-wrapper-body {
${Object.entries(ve).map(([Ot,de])=>`  ${Ot}: ${de};`).join(`
`)}
}`;!Re.includes(".gjs-wrapper-body")&&!Re.includes("background-image")?(Re=st+`

`+Re,console.log(" Method 3 - Added wrapper styles to CSS:",st)):console.log("Method 3 - Wrapper styles already in CSS or detected")}}}catch($e){console.warn("Failed to extract wrapper styles:",$e)}if((!Re||Re.trim().length===0)&&te.getWrapper)try{const $e=te.getWrapper(),ve=[],Ve=Ot=>{Ot&&(ve.push(Ot),(Ot.components?Ot.components():[]).forEach(ke=>Ve(ke)))};Ve($e);const st=ve.map(Ot=>{const de=Ot.getStyle?Ot.getStyle():null,ke=Ot.getClasses?Ot.getClasses():[];if(de&&Object.keys(de).length>0){const ct=ke.length>0?`.${ke.join(".")}`:`#${Ot.getId()}`,bt=Object.entries(de).map(([Ft,cr])=>`  ${Ft}: ${cr};`).join(`
`);return`${ct} {
${bt}
}`}return null}).filter(Boolean).join(`

`);st&&(Re=st,console.log(" Method 4 - Extracted CSS from all component styles:",Re.length))}catch($e){console.warn("Failed to extract component styles:",$e)}const at=Re.includes("background-image")||Re.includes("background:");if(console.log(" Getting pages snapshot - CSS info:",{currentPageId:Mt,currentCssLength:Re?.length||0,hasCss:!!Re&&Re.trim().length>0,hasBackgroundImage:at,cssPreview:Re?.substring(0,500),fullCss:Re}),!at){console.warn(" NO BACKGROUND IMAGE DETECTED IN CSS!"),console.log("Checking wrapper element directly...");const $e=te.getWrapper();if($e){const ve=$e.getStyle(),Ve=$e.getClasses(),st=$e.getAttributes();console.log("Wrapper details:",{styles:ve,classes:Ve,attributes:st,hasBackgroundImage:ve&&(ve["background-image"]||ve.background)})}}const jt=ft.map($e=>{if($e.id===Mt){const ve=Re&&Re.trim().length>0?Re:$e.css||"";return{...$e,html:je||ue,css:ve}}return $e}),Qe=jt.find($e=>$e.id===Mt);return console.log(" Pages snapshot created:",{totalPages:jt.length,currentPageId:Mt,currentPageHasCss:(Qe?.css?.length||0)>0,allPagesCss:jt.map($e=>({id:$e.id,cssLength:$e.css?.length||0}))}),{pagesSnapshot:jt,currentHtml:je,currentCss:Re}},[ft,Mt]),ar=f.useCallback((te,je)=>{const Re=o.current;if(!Re){console.error("Cannot apply page: Editor instance is null"),b("Editor not initialized. Please refresh the page."),c(!1);return}const Ye=a.get("id")||a.get("themeId");try{console.log("Applying page to editor:",{hasHtml:!!te,htmlLength:te?.length,hasCss:!!je,cssLength:je?.length,themeId:Ye||"none"});const at=[];if(te){const Qe=te.match(/<!-- ZIPLOFY_SCRIPTS_DATA:(\[.*?\]) -->/);if(Qe&&Qe[1])try{const $e=JSON.parse(Qe[1]);Array.isArray($e)&&(at.push(...$e),console.log(` Loaded ${$e.length} scripts from comment marker`))}catch($e){console.warn("Failed to parse scripts from comment marker:",$e)}}if(te&&at.length===0){const Qe=/<script([^>]*)>([\s\S]*?)<\/script>/gi;let $e;for(;($e=Qe.exec(te))!==null;){const ve=$e[1],Ve=$e[2].trim();if(ve.includes("ziplofy-pages-data"))continue;const st={},Ot=ve.match(/src=["']([^"']+)["']/i);Ot&&(st.src=Ot[1]),Ve&&(st.content=Ve);const de=ve.match(/type=["']([^"']+)["']/i);de&&(st.type=de[1]),st.async=/async/i.test(ve),st.defer=/defer/i.test(ve),at.push(st)}console.log(` Extracted ${at.length} script tags from HTML`)}let jt=te?te.replace(/<script[\s\S]*?<\/script>/gi,""):"";if(jt=jt.replace(/<!-- ZIPLOFY_SCRIPTS_DATA:\[.*?\] -->/g,""),Re.setComponents(jt||ue),setTimeout(()=>{const Qe=Re.getWrapper();if(Qe){console.log(" Configuring wrapper for page..."),Qe.set({droppable:!0,selectable:!0,editable:!1,draggable:!1,hoverable:!0,stylable:!0,traits:[]},{silent:!0}),Qe.getClasses().includes("gjs-wrapper-body")||Qe.addClass("gjs-wrapper-body"),Qe.view&&Qe.view.render?.();const ve=Qe.components();if(ve&&ve.length>0&&ve.forEach(Ot=>{if(Ot)try{Ot.set({selectable:!0,hoverable:!0,draggable:!0,stylable:!0},{silent:!0})}catch{}}),Re.Canvas){const Ot=Re.Canvas.getElement();Ot&&(Ot.style.pointerEvents="auto");const de=Re.Canvas.getFrameEl();if(de&&de.contentWindow){const ke=de.contentWindow.document.body;ke&&(ke.style.pointerEvents="auto")}}console.log(" Wrapper configured as droppable. Wrapper has",ve?.length||0,"components");const Ve=Qe.get("droppable");Ve?console.log(" Wrapper is droppable:",Ve):(console.error(" WRAPPER IS NOT DROPPABLE! Fixing..."),Qe.set("droppable","*"),console.log(" Fixed: Wrapper droppable set to *"));const st=setInterval(()=>{const Ot=Re.getWrapper();Ot&&!Ot.get("droppable")&&(console.warn(" Wrapper became non-droppable, restoring..."),Ot.set("droppable","*"))},2e3);setTimeout(()=>clearInterval(st),1e4),setTimeout(()=>{Te("widgets");const Ot=document.getElementById("blocks-panel"),de=document.querySelector(".elementor-blocks-wrapper");if(de&&(de.style.setProperty("display","block","important"),de.style.setProperty("visibility","visible","important"),de.style.setProperty("opacity","1","important")),Ot){Ot.style.setProperty("display","block","important"),Ot.style.setProperty("visibility","visible","important"),Ot.style.setProperty("opacity","1","important");const ke=Ot.querySelectorAll(".gjs-block"),ct=!!Ot.querySelector(".gjs-blocks-c");ke.length===0||!ct?(console.log(" No blocks found after applying page, rendering blocks..."),Ot.innerHTML="",Re.BlockManager&&typeof Re.BlockManager.render=="function"&&(Re.BlockManager.render(),i.current=!0,setTimeout(()=>{const bt=Ot.querySelectorAll(".gjs-block");bt.forEach(cr=>{cr&&(cr.style.display="flex",cr.style.visibility="visible",cr.style.opacity="1",cr.style.pointerEvents="auto",cr.style.cursor="grab")}),Ot.querySelectorAll(".gjs-block-category").forEach(cr=>{cr&&(cr.style.display="block",cr.style.visibility="visible")}),console.log(` Rendered ${bt.length} blocks after applying page`)},200))):(console.log(` Found ${ke.length} existing blocks after applying page`),i.current=!0)}},300)}else console.error(" No wrapper found after setComponents!")},150),je&&typeof je=="string"&&je.trim()){console.log(" Applying CSS to editor:",{cssLength:je.length,cssPreview:je.substring(0,200)});try{if(typeof Re.setStyle=="function")try{Re.setStyle(je),console.log(" CSS applied via editor.setStyle")}catch(Qe){console.warn("Failed to apply CSS via editor.setStyle:",Qe)}if(Re.CssComposer)try{const Qe=Re.CssComposer.add({selectors:["body",".gjs-wrapper-body"],style:{}})}catch{}[100,300,500].forEach(Qe=>{setTimeout(()=>{try{const $e=Re.Canvas;if($e){const ve=$e.getFrameEl();if(ve&&ve.contentDocument){const Ve=ve.contentDocument,st=Ve.head||Ve.getElementsByTagName("head")[0];if(st){st.querySelectorAll("#ziplofy-theme-styles, style[data-ziplofy-theme]").forEach(ct=>ct.remove());const de=Ve.createElement("style");de.id="ziplofy-theme-styles",de.setAttribute("data-ziplofy-theme","true"),de.textContent=je,st.appendChild(de),console.log(` CSS injected directly into canvas iframe (attempt at ${Qe}ms):`,{cssLength:je.length,styleElementExists:!!st.querySelector("#ziplofy-theme-styles")});const ke=je.matchAll(/@import\s+url\(['"]?([^'")]+)['"]?\)/gi);for(const ct of ke){const bt=ct[1];if(!Array.from(st.querySelectorAll('link[rel="stylesheet"]')).find(cr=>cr.href===bt)&&bt){const cr=Ve.createElement("link");cr.rel="stylesheet",cr.href=bt,cr.crossOrigin="anonymous",st.appendChild(cr)}}}}}}catch($e){Qe===500&&console.warn("Failed to inject CSS into iframe:",$e)}},Qe)})}catch(Qe){console.error("Failed to apply CSS to editor:",Qe)}}else console.log("No CSS content to apply");if(at.length>0){console.log(` Injecting ${at.length} scripts into iframe`);const Qe=$e=>{if(/^(https?:|data:|mailto:|tel:|\/\/)/i.test($e))return $e;if(Ye){const Ve=$e.startsWith("/")?$e.substring(1):$e;return`${`${window.location.origin}/api/custom-themes/${Ye}/files`}/${Ve}`}const ve="https://backend.ziplofy.com/api";return $e.includes("/themes/installed/")?$e.startsWith("http")?$e:$e.startsWith("/")?`${window.location.origin}${$e}`:`${ve}/${$e}`:$e.startsWith("/")?window.location.origin+$e:(console.warn(` Relative script path detected without theme ID: ${$e}, trying API base`),`${ve}/${$e}`)};[200,500,1e3].forEach($e=>{setTimeout(()=>{try{const ve=Re.Canvas;if(ve){const Ve=ve.getFrameEl();if(Ve&&Ve.contentDocument){const st=Ve.contentDocument,Ot=st.head||st.getElementsByTagName("head")[0],de=st.body||st.getElementsByTagName("body")[0];if(!Ot||!de){$e===1e3&&console.warn(" Head or body not found in iframe for script injection");return}let ke=Ot.querySelector("base[data-ziplofy-theme-base]");ke?Ye&&(ke.href=`${window.location.origin}/api/custom-themes/${Ye}/files/`):(ke=st.createElement("base"),ke.setAttribute("data-ziplofy-theme-base","true"),Ye?ke.href=`${window.location.origin}/api/custom-themes/${Ye}/files/`:ke.href=window.location.origin+"/",Ot.insertBefore(ke,Ot.firstChild)),Ot.querySelectorAll("script[data-ziplofy-theme-script]").forEach(cr=>cr.remove()),de.querySelectorAll("script[data-ziplofy-theme-script]").forEach(cr=>cr.remove()),(async()=>{for(let kt=0;kt<at.length;kt++){const Yr=at[kt];try{const Xr=st.createElement("script");if(Xr.setAttribute("data-ziplofy-theme-script","true"),Yr.type&&(Xr.type=Yr.type),Yr.src){const ma=Qe(Yr.src);Xr.src=ma,Xr.async=Yr.async||!1,Xr.defer=Yr.defer||!1,!Yr.async&&!Yr.defer?await new Promise(Jn=>{Xr.onload=()=>{console.log(` Loaded external script: ${Yr.src}`),Jn()},Xr.onerror=()=>{console.warn(` Failed to load script: ${Yr.src} (resolved: ${ma})`),Jn()},setTimeout(()=>{console.warn(` Script load timeout: ${Yr.src}`),Jn()},1e4)}):(Xr.onload=()=>{console.log(` Loaded external script (async/defer): ${Yr.src}`)},Xr.onerror=()=>{console.warn(` Failed to load script: ${Yr.src} (resolved: ${ma})`)})}else Yr.content&&(Xr.textContent=Yr.content);Yr.src?Ot.appendChild(Xr):de.appendChild(Xr),console.log(` Injected script ${kt+1}/${at.length}${Yr.src?`: ${Yr.src}`:" (inline)"}`)}catch(Xr){console.warn(` Failed to inject script ${kt+1}:`,Xr)}}const cr=kt=>{const Yr=typeof kt.PRODUCTS<"u"&&Array.isArray(kt.PRODUCTS),Xr=typeof kt.liquidjs<"u"||typeof kt.Liquid<"u",ma=typeof kt.jQuery<"u"||typeof kt.$<"u";return Yr&&(Xr||ma)},Br=()=>{try{const kt=Ve.contentWindow;if(!kt)return;if(!cr(kt)){console.log(" Waiting for dependencies (PRODUCTS, LiquidJS)..."),setTimeout(()=>Br(),500);return}if(console.log(" Dependencies ready, executing product rendering..."),st.readyState==="loading"||st.readyState==="interactive"||st.readyState==="complete"){const Xr=new Event("DOMContentLoaded",{bubbles:!0});st.dispatchEvent(Xr);const ma=new Event("load",{bubbles:!0});kt.dispatchEvent(ma)}if(typeof kt.renderFeaturedProducts=="function"){console.log(" Re-executing renderFeaturedProducts...");try{kt.renderFeaturedProducts()}catch(Xr){console.warn("Error calling renderFeaturedProducts:",Xr)}}if(typeof kt.renderNewArrivals=="function"){console.log(" Re-executing renderNewArrivals...");try{kt.renderNewArrivals()}catch(Xr){console.warn("Error calling renderNewArrivals:",Xr)}}if(typeof kt.initProductRendering=="function"){console.log(" Re-executing initProductRendering...");try{kt.initProductRendering()}catch(Xr){console.warn("Error calling initProductRendering:",Xr)}}if(typeof kt.renderTrendingWithLiquid=="function"){console.log(" Re-executing renderTrendingWithLiquid...");try{kt.renderTrendingWithLiquid()}catch(Xr){console.warn("Error calling renderTrendingWithLiquid:",Xr)}}if(typeof kt.renderProductGrid=="function"){console.log(" Found renderProductGrid function");const Xr=st.getElementById("featured-products-grid")||st.getElementById("unique-products")||st.querySelector('[id*="featured"], [class*="featured-products"]');if(Xr){console.log(" Attempting to render featured products grid...");try{kt.renderProductGrid({templateId:"unique-products-template",targetId:Xr.id||"unique-products",pick:function(ma){return(ma||[]).slice(0,4)}})}catch(ma){console.warn("Error calling renderProductGrid:",ma)}}}if(typeof kt.onload=="function")try{kt.onload({})}catch(Xr){console.warn("Error calling window.onload:",Xr)}if(typeof kt.init=="function")try{kt.init()}catch(Xr){console.warn("Error calling init:",Xr)}try{const Xr=new CustomEvent("themeLoaded",{bubbles:!0});st.dispatchEvent(Xr),kt.dispatchEvent&&kt.dispatchEvent(Xr)}catch(Xr){console.warn("Error dispatching custom event:",Xr)}}catch(kt){console.warn("Error re-executing product rendering:",kt)}};[1e3,2e3,3e3].forEach(kt=>{setTimeout(()=>{Br(),console.log(` Product rendering re-execution attempted at ${kt}ms (script injection delay: ${$e}ms)`)},kt)}),console.log(` All scripts injected into iframe (attempt at ${$e}ms)`)})().catch(cr=>{console.warn("Error during sequential script injection:",cr)})}}}catch(ve){$e===1e3&&console.warn("Failed to inject scripts into iframe:",ve)}},$e)})}setTimeout(()=>{try{const Qe=Re.getWrapper();if(Qe){const $e=ve=>{if(ve){const Ve=ve.getAttributes?.()||{},st=ve.get("tagName")?.toLowerCase(),Ot=ve.get("type"),de=Ve["data-gjs-droppable"]==="*"||st==="form"||st==="section"||st==="div"||st==="main"||st==="article"||st==="header"||st==="footer"||st==="nav"||st==="aside",ct=["p","h1","h2","h3","h4","h5","h6","span","a","label","li","td","th","button","strong","em","b","i","u","small","sub","sup"].includes(st),bt=ve.get("content")&&typeof ve.get("content")=="string"&&ve.get("content").trim().length>0,Ft=Ve["data-gjs-editable"]==="true"||Ot==="text"||ct||bt&&!ve.components().length;ve.set({stylable:!0,selectable:!0,hoverable:!0,draggable:!0,droppable:de?"*":!1,editable:Ft,resizable:st==="img"||st==="video"||st==="iframe"||st==="canvas"},{silent:!0});const cr=ve.getEl?.();if(cr&&cr.style)try{cr.style.display="",cr.style.visibility="visible",cr.style.opacity="1"}catch{}const Br=ve.components?.();Br&&Br.length>0&&Br.forEach(kt=>$e(kt))}};$e(Qe),setTimeout(()=>{if(Re.LayerManager&&re==="structure"){const ve=document.getElementById("layers-panel");ve&&(document.querySelectorAll(".gjs-layers, .gjs-layer-item, .gjs-layer-item-title").forEach(st=>{st.closest("#layers-panel")||st.remove()}),ve.innerHTML="",Re.LayerManager.render())}},100)}}catch(Qe){console.warn("Error making components interactive:",Qe)}},300),Te("widgets"),[500,1e3,1500].forEach(Qe=>{setTimeout(()=>{try{const $e=document.getElementById("blocks-panel"),ve=document.querySelector(".elementor-blocks-wrapper");if($e&&Re.BlockManager){ve&&(ve.style.setProperty("display","block","important"),ve.style.setProperty("visibility","visible","important"),ve.style.setProperty("opacity","1","important"));const Ve=$e.querySelectorAll(".gjs-block"),st=$e.innerHTML.trim()==="",Ot=!!$e.querySelector(".gjs-blocks-c");Ve.length===0&&(st||!Ot)?(console.log(`[applyPageToEditor] Blocks missing at ${Qe}ms, restoring...`),$e.style.setProperty("display","block","important"),$e.style.setProperty("visibility","visible","important"),$e.style.setProperty("opacity","1","important"),$e.innerHTML="",Re.BlockManager.render(),i.current=!0,setTimeout(()=>{const de=$e.querySelectorAll(".gjs-block");de.length>0?(de.forEach(ct=>{ct&&(ct.style.display="flex",ct.style.visibility="visible",ct.style.opacity="1",ct.style.pointerEvents="auto",ct.style.cursor="grab",ct.style.position="relative",ct.style.zIndex="1")}),$e.querySelectorAll(".gjs-block-category").forEach(ct=>{ct&&(ct.style.display="block",ct.style.visibility="visible")}),console.log(`[applyPageToEditor] Restored ${de.length} blocks at ${Qe}ms`)):console.warn(`[applyPageToEditor] No blocks found after render at ${Qe}ms`)},200)):Ve.length>0&&(i.current=!0)}}catch($e){console.warn(`[applyPageToEditor] Error checking blocks at ${Qe}ms:`,$e)}},Qe)})}catch(at){console.error("Error in applyPageToEditor:",at),b(at?.message||"Failed to apply page content"),c(!1)}},[a]),br=f.useCallback(()=>{const te=o.current;if(!te||typeof te.getHtml!="function"){console.warn(" Cannot commit page: Editor not ready");return}const{currentHtml:je,currentCss:Re}=Ur();console.log(" Committing current page:",{currentPageId:Mt,htmlLength:je?.length||0,cssLength:Re?.length||0,htmlPreview:je?.substring(0,100),cssPreview:Re?.substring(0,100)}),Ze(Ye=>{const at=Ye.map(jt=>{if(jt.id===Mt){const Qe=Re&&Re.trim().length>0?Re:jt.css||"",$e=je&&je.trim().length>0?je:jt.html||ue,ve={...jt,html:$e,css:Qe};return console.log(` Committed page ${jt.name}:`,{htmlLength:ve.html?.length||0,cssLength:ve.css?.length||0}),ve}return jt});return Nt.current=at,at})},[Mt,Ur]),pn=f.useCallback(te=>{if(!te||te===Mt)return;const{pagesSnapshot:je}=Ur(),Re=je.map(at=>{const jt=ft.find(Qe=>Qe.id===at.id);return{...at,html:at.html&&at.html.trim().length>0?at.html:jt?.html||ue,css:at.css&&at.css.trim().length>0?at.css:jt?.css||""}});Ze(Re),Nt.current=Re;const Ye=Re.find(at=>at.id===te);vt(te),ar(Ye?.html||ue,Ye?.css||""),console.log(` Switched to page: ${Ye?.name||te}`,{totalPages:Re.length,currentPageId:te,hasHtml:!!Ye?.html,hasCss:!!Ye?.css,htmlLength:Ye?.html?.length||0,cssLength:Ye?.css?.length||0,allPages:Re.map(at=>({id:at.id,name:at.name,hasHtml:!!at.html,hasCss:!!at.css}))})},[Mt,ft,Ur,ar]),In=f.useCallback(()=>{F(!0),console.log(" Adding new page...");const{pagesSnapshot:te}=Ur(),je=`page-${Date.now()}`,Re={id:je,name:`Page ${te.length+1}`,html:ue,css:""},Ye=[...te,Re];Ze(Ye),vt(je),ar(Re.html,Re.css||""),setTimeout(()=>{const at=o.current;if(at){const jt=at.getWrapper();jt&&(console.log(" New page wrapper check - Droppable:",jt.get("droppable")),jt.get("droppable")||(console.warn(" New page wrapper not droppable, fixing..."),jt.set("droppable","*")))}},300)},[Ur,ar]),on=f.useCallback(te=>{if(F(!0),ft.length<=1){alert("Cannot delete the last page. A theme must have at least one page.");return}const{pagesSnapshot:je}=Ur(),Re=je.filter(at=>at.id!==te);Ze(Re);const Ye=Re[0];Ye&&(vt(Ye.id),ar(Ye.html,Ye.css||""))},[ft.length,Ur,ar]),Er=f.useCallback((te,je)=>{Ze(Re=>Re.map(Ye=>Ye.id===te?{...Ye,name:je||Ye.name}:Ye)),F(!0)},[]);f.useEffect(()=>{if(!Wt){wt.current=!0;return}try{const te=localStorage.getItem(Wt);if(te){const je=JSON.parse(te);if(je&&Array.isArray(je.pages)&&je.pages.length>0){Ut.current=!0,tt.current=je.updatedAt||Date.now(),Be.current=!0;const Re=je.pages;Nt.current=Re,Ze(Re);const Ye=je.currentPageId||Re[0].id;if(Ye){vt(Ye);const at=Re.find(jt=>jt.id===Ye);at&&ar(at.html||ue,at.css||"")}}}}catch(te){console.warn("Failed to restore builder state from storage:",te)}finally{wt.current||(wt.current=!0)}},[Wt,ar]),f.useEffect(()=>{if(!Wt)return;const te=je=>{if(!(je.key!==Wt||!je.newValue))try{const Re=JSON.parse(je.newValue);if(!Re||Re.source===ye.current||!Array.isArray(Re.pages)||Re.pages.length===0||Re.updatedAt&&Re.updatedAt<=tt.current)return;tt.current=Re.updatedAt||Date.now(),Be.current=!0;const Ye=Re.pages;Nt.current=Ye,Ze(Ye);const at=Re.currentPageId||Ye[0].id;if(at){vt(at);const jt=Ye.find(Qe=>Qe.id===at);jt&&ar(jt.html||ue,jt.css||"")}}catch(Re){if(Re instanceof Error&&Re.message.includes("Extension context invalidated"))return;console.warn("Failed to process builder storage update:",Re)}};try{window.addEventListener("storage",te)}catch(je){if(je instanceof Error&&je.message.includes("Extension context invalidated"))return}return()=>{try{window.removeEventListener("storage",te)}catch(je){if(je instanceof Error&&je.message.includes("Extension context invalidated"))return}}},[Wt,ar]);const jr=f.useCallback(()=>{try{const te=[];for(let Re=0;Re<localStorage.length;Re++){const Ye=localStorage.key(Re);Ye&&Ye.startsWith("ziplofy.builder.pages.")&&te.push(Ye)}te.sort();const je=Wt;te.forEach(Re=>{if(Re!==je)try{localStorage.removeItem(Re)}catch{console.warn("Failed to remove old localStorage key:",Re)}}),console.log(`Cleared ${te.length} old builder states from localStorage`)}catch(te){console.warn("Error clearing old localStorage data:",te)}},[Wt]);f.useEffect(()=>{if(Wt&&wt.current){if(Be.current){Be.current=!1;return}try{const{pagesSnapshot:te}=Ur(),je={pages:te,currentPageId:Mt,updatedAt:Date.now(),source:ye.current};tt.current=je.updatedAt,localStorage.setItem(Wt,JSON.stringify(je))}catch(te){if(te?.name==="QuotaExceededError"||te?.message?.includes("quota")){console.warn("LocalStorage quota exceeded. Clearing old builder states..."),jr();try{const{pagesSnapshot:je}=Ur(),Ye={pages:je.map(at=>({...at,css:at.css?at.css.substring(0,5e4):""})),currentPageId:Mt,updatedAt:Date.now(),source:ye.current};localStorage.setItem(Wt,JSON.stringify(Ye)),console.log("Successfully persisted reduced builder state")}catch(je){console.warn("Failed to persist builder state even after clearing old data:",je)}}else console.warn("Failed to persist builder state:",te)}}},[ft,Mt,Ur,Wt]);const ht=f.useMemo(()=>a.get("page"),[a]);f.useEffect(()=>{if(er.current)return;if(!ht){er.current=!0;return}const te=ft.find(je=>je.id===ht);te&&(er.current=!0,Mt!==te.id&&(vt(te.id),ar(te.html||ue,te.css||"")))},[ht,ft,Mt,ar]),f.useCallback(async()=>{if(!he)return null;if(!/^[0-9a-fA-F]{24}$/.test(he)){console.warn("Invalid theme ID format (not a MongoDB ObjectId). This might be an old theme from localStorage. Creating new theme.");const je=new URL(window.location.href);return je.searchParams.delete("id"),window.history.replaceState({},"",je.toString()),null}try{const{axiosi:je}=await Uf(async()=>{const{axiosi:Ye}=await Promise.resolve().then(()=>t5);return{axiosi:Ye}},void 0),Re=await je.get(`/custom-themes/${he}`);if(Re.data.success&&Re.data.data){const Ye=Re.data.data,at=Ye.html||"",jt=Ye.css||"",Qe=_n(at);if(Qe&&Qe.length>0)return console.log(" Loaded pages from saved theme:",{totalPages:Qe.length,pages:Qe.map(ve=>({id:ve.id,name:ve.name,hasHtml:!!ve.html&&ve.html.trim().length>0,hasCss:!!ve.css&&ve.css.trim().length>0,htmlLength:ve.html?.length||0,cssLength:ve.css?.length||0}))}),Ut.current||(console.log(" Setting pages state from loaded theme:",{pagesCount:Qe.length,firstPage:{id:Qe[0].id,name:Qe[0].name,htmlLength:Qe[0].html?.length||0,cssLength:Qe[0].css?.length||0},allPages:Qe.map(ve=>({id:ve.id,name:ve.name,htmlLength:ve.html?.length||0,cssLength:ve.css?.length||0}))}),Ze(Qe),Nt.current=Qe,vt(Qe[0].id),setTimeout(()=>{o.current&&Qe[0]&&(console.log(" Applying first page to editor after load:",{pageId:Qe[0].id,pageName:Qe[0].name,htmlLength:Qe[0].html?.length||0,cssLength:Qe[0].css?.length||0}),ar(Qe[0].html||ue,Qe[0].css||""))},100)),wt.current=!0,{...Ye,html:Qe[0].html||ue,css:jt};const $e={id:"page-1",name:"Home",html:at||ue,css:jt||""};return Ut.current||(Ze([$e]),Nt.current=[$e],vt("page-1")),wt.current=!0,{...Ye,html:$e.html,css:jt}}return null}catch(je){if(je?.response?.status===404||je?.response?.status===400){const Re=new URL(window.location.href);Re.searchParams.delete("id"),window.history.replaceState({},"",Re.toString()),wt.current=!0}else console.error("Error loading custom theme:",je);return null}},[he,_n]),f.useEffect(()=>{const te=Re=>Re.error&&Re.error.message&&Re.error.message.includes("Extension context invalidated")?(Re.preventDefault(),Re.stopPropagation(),!1):!0,je=Re=>Re.reason&&Re.reason.message&&Re.reason.message.includes("Extension context invalidated")?(Re.preventDefault(),!1):!0;return window.addEventListener("error",te),window.addEventListener("unhandledrejection",je),()=>{window.removeEventListener("error",te),window.removeEventListener("unhandledrejection",je)}},[]),f.useEffect(()=>{if(o.current)return;let te=!1;const je=[],Re=at=>{je.push(at)},Ye=setTimeout(()=>{!te&&l&&(console.warn(" Editor initialization timeout - forcing loading to false"),c(!1),b("Editor initialization is taking longer than expected. The editor may still be loading."))},1e4);return(async()=>{try{c(!0),b(null);let at=0;const jt=10;for(;!t.current&&at<jt;)await new Promise(Me=>setTimeout(Me,100)),at++;if(!t.current){console.error(" Editor container not found after retries"),b("Editor container not found. Please refresh the page."),c(!1),clearTimeout(Ye);return}console.log(" Editor container found, initializing GrapesJS..."),console.log(" Loading GrapesJS dependencies...");const Qe=(await Uf(async()=>{const{default:Me}=await Promise.resolve().then(()=>JO);return{default:Me}},void 0)).default;console.log(" GrapesJS loaded"),await Uf(()=>Promise.resolve().then(()=>eP),void 0),console.log(" GrapesJS CSS loaded");const $e=(await Uf(async()=>{const{default:Me}=await import("./index-BBkykqxo.js").then(ot=>ot.i);return{default:Me}},[])).default;console.log(" GrapesJS preset-webpage loaded"),console.log(" Initializing GrapesJS editor...",{container:t.current,hasContainer:!!t.current,containerId:t.current?.id,containerClasses:t.current?.className});const ve=Qe.init({container:t.current,fromElement:!1,height:"calc(100vh - 60px)",width:"100%",noticeOnUnload:!1,avoidInlineStyle:!0,plugins:[$e],pluginsOpts:{[$e]:{}},deviceManager:{devices:[{id:"desktop",name:"Desktop",width:""},{id:"tablet",name:"Tablet",width:"768px"},{id:"mobile",name:"Mobile",width:"375px"}]},storageManager:{type:null},selectorManager:{componentFirst:!0,escapeName:Me=>Me,appendTo:"#style-panel"},styleManager:{appendTo:"#style-panel",sectors:[{name:"Layout",open:!0,buildProps:["width","height","min-width","min-height","max-width","max-height","padding","margin","display","position","top","right","bottom","left","z-index","overflow","overflow-x","overflow-y","float","clear","vertical-align","box-sizing"]},{name:"Typography",open:!0,buildProps:["font-family","font-size","font-weight","font-style","font-variant","text-decoration","text-align","text-transform","text-indent","line-height","letter-spacing","word-spacing","white-space","color","text-shadow","text-overflow","word-wrap","word-break"]},{name:"Background",open:!0,buildProps:["background-color","background-image","background-repeat","background-position","background-attachment","background-size","background-clip","background-origin","background-blend-mode"]},{name:"Border",open:!0,buildProps:["border","border-width","border-style","border-color","border-radius","border-top","border-right","border-bottom","border-left","border-top-width","border-right-width","border-bottom-width","border-left-width","border-top-style","border-right-style","border-bottom-style","border-left-style","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius","box-shadow","outline","outline-width","outline-style","outline-color","outline-offset"]},{name:"Flexbox",open:!1,buildProps:["flex-direction","flex-wrap","justify-content","align-items","align-content","align-self","flex","flex-grow","flex-shrink","flex-basis","order","gap","row-gap","column-gap"]},{name:"Grid",open:!1,buildProps:["grid-template-columns","grid-template-rows","grid-template-areas","grid-column","grid-row","grid-column-start","grid-column-end","grid-row-start","grid-row-end","grid-area","grid-gap","grid-row-gap","grid-column-gap","grid-auto-columns","grid-auto-rows","grid-auto-flow","justify-items","align-items","place-items","justify-content","align-content","place-content"]},{name:"Effects",open:!1,buildProps:["opacity","transition","transition-property","transition-duration","transition-timing-function","transition-delay","transform","transform-origin","transform-style","perspective","perspective-origin","filter","backdrop-filter","mix-blend-mode","isolation","box-shadow","text-shadow","clip-path","mask","mask-image"]},{name:"Spacing",open:!1,buildProps:["margin","margin-top","margin-right","margin-bottom","margin-left","padding","padding-top","padding-right","padding-bottom","padding-left","gap","row-gap","column-gap"]},{name:"Sizing",open:!1,buildProps:["width","height","min-width","min-height","max-width","max-height","box-sizing","object-fit","object-position","aspect-ratio"]},{name:"List",open:!1,buildProps:["list-style","list-style-type","list-style-position","list-style-image"]},{name:"Table",open:!1,buildProps:["border-collapse","border-spacing","caption-side","empty-cells","table-layout"]},{name:"Cursor",open:!1,buildProps:["cursor","pointer-events","user-select","touch-action"]},{name:"Animation",open:!1,buildProps:["animation","animation-name","animation-duration","animation-timing-function","animation-delay","animation-iteration-count","animation-direction","animation-fill-mode","animation-play-state"]}]},canvas:{styles:[]},blockManager:{appendTo:"#blocks-panel"},layerManager:{appendTo:"#layers-panel"},traitManager:{appendTo:"#traits-panel"}});o.current=ve,console.log(" Editor instance created and stored",{hasEditor:!!ve,hasComponents:!!ve.Components,hasBlockManager:!!ve.BlockManager});const Ve=()=>{const Me=ve.UndoManager;Me&&(h(Me.hasUndo()),y(Me.hasRedo()))};ve.on("update",Ve),ve.on("component:update",Ve),ve.on("style:update",Ve),ve.on("component:update",Me=>{try{const ot=Me.getEl?Me.getEl():null;if(!ot||ot.nodeType!==1)return;const _t=ot.closest?ot.closest(".ziplofy-progress-bar"):null;if(!_t)return;const It=_t.querySelector(".progress-percentage"),At=_t.querySelector(".progress-bar-fill");if(!It||!At)return;const $t=(It.textContent||It.innerText||"0%").match(/(\d+(?:\.\d+)?)/);if($t){const Bt=parseFloat($t[1]),Cr=Math.min(100,Math.max(0,Bt));At.style.width=Cr+"%"}}catch{}}),ve.on("storage:load",Ve);const st=()=>{try{const Me=ve.Canvas;if(!Me)return;const ot=Me.getFrameEl();if(!ot||!ot.contentWindow||!ot.contentDocument)return;const _t=ot.contentWindow,It=ot.contentDocument;if(typeof _t.renderFeaturedProducts=="function")try{_t.renderFeaturedProducts(),console.log(" Re-executed renderFeaturedProducts after editor update")}catch{}if(typeof _t.renderNewArrivals=="function")try{_t.renderNewArrivals()}catch{}if(typeof _t.initProductRendering=="function")try{_t.initProductRendering()}catch{}if(typeof _t.renderTrendingWithLiquid=="function")try{_t.renderTrendingWithLiquid()}catch{}if(typeof _t.renderProductGrid=="function"){const At=It.getElementById("featured-products-grid")||It.getElementById("unique-products")||It.querySelector('[id*="featured"], [class*="featured-products"]');if(At)try{_t.renderProductGrid({templateId:"unique-products-template",targetId:At.id||"unique-products",pick:function(sr){return(sr||[]).slice(0,4)}})}catch{}}}catch{}};let Ot=null;ve.on("component:add",Me=>{setTimeout(()=>{try{const ot=_t=>{if(!_t)return;const It=_t.get("tagName")?.toLowerCase(),At=_t.get("type"),sr=_t.getAttributes?.()||{},Bt=["p","h1","h2","h3","h4","h5","h6","span","a","label","li","td","th","button","strong","em","b","i","u"].includes(It),Cr=sr["data-gjs-editable"]==="true"||At==="text"||Bt,Lt=sr["data-gjs-droppable"]==="*"||["form","section","div","main","article","header","footer","nav","aside"].includes(It);_t.set({stylable:!0,selectable:!0,hoverable:!0,draggable:!0,droppable:Lt?"*":!1,editable:Cr,resizable:["img","video","iframe","canvas"].includes(It)},{silent:!0});const dr=_t.components?.();dr&&dr.length>0&&dr.forEach(Dr=>ot(Dr))};ot(Me)}catch(ot){console.warn("Error making new component interactive:",ot)}st()},100)}),ve.on("component:update",Me=>{Ot&&clearTimeout(Ot),Ot=setTimeout(()=>{st()},1e3);try{if(Me){const ot=Me.get("tagName")?.toLowerCase(),_t=Me.get("type"),It=Me.getAttributes?.()||{},sr=["p","h1","h2","h3","h4","h5","h6","span","a","label","li","td","th","button"].includes(ot);(It["data-gjs-editable"]==="true"||_t==="text"||sr)&&!Me.get("editable")&&Me.set("editable",!0,{silent:!0}),Me.get("stylable")||Me.set("stylable",!0,{silent:!0})}}catch{}}),Ve();let de=!1;ve.on("load",()=>{de||te||(de=!0,console.log(" Editor loaded - ensuring widgets panel is visible"),requestAnimationFrame(()=>{if(te)return;re!=="widgets"&&Te("widgets");const Me=()=>{if(te)return;const ot=document.getElementById("blocks-panel"),_t=document.querySelector(".elementor-blocks-wrapper");if(ot&&ve.BlockManager){_t&&(_t.style.setProperty("display","block","important"),_t.style.setProperty("visibility","visible","important"),_t.style.setProperty("opacity","1","important")),ot.style.setProperty("display","block","important"),ot.style.setProperty("visibility","visible","important"),ot.style.setProperty("opacity","1","important");const It=ot.querySelectorAll(".gjs-block"),At=!!ot.querySelector(".gjs-blocks-c");It.length===0||!At?(console.log("No blocks found on editor load, rendering..."),ot.innerHTML="",ve.BlockManager.render(),i.current=!0,requestAnimationFrame(()=>{if(te)return;const sr=ot.querySelectorAll(".gjs-block");sr.forEach(Bt=>{Bt&&(Bt.style.display="flex",Bt.style.visibility="visible",Bt.style.opacity="1",Bt.style.pointerEvents="auto",Bt.style.cursor="grab")}),ot.querySelectorAll(".gjs-block-category").forEach(Bt=>{Bt&&(Bt.style.display="block",Bt.style.visibility="visible")}),console.log(` Rendered ${sr.length} blocks on editor load`)})):(console.log(` Found ${It.length} existing blocks on editor load`),i.current=!0)}else!ot&&!te&&(console.warn("blocks-panel not found, retrying..."),requestAnimationFrame(()=>{te||Me()}))};Me()}))});const ke=Me=>{try{Me&&(Me.preventDefault(),Me.stopPropagation());const ot=ve.getSelected();if(ot&&ot.get("type")!=="wrapper"){const _t=ot.toJSON(),It=ve.getHtml({component:ot});window.__ziplofyCopiedComponent={json:_t,html:It,component:ot},console.log("Component copied:",ot.get("tagName"),_t);const At=ot.getEl?.();At&&(At.style.outline="2px dashed #5e72e4",setTimeout(()=>{At&&At.style&&(At.style.outline="")},500))}else console.log("No component selected to copy")}catch(ot){console.error("Error copying component:",ot)}},ct=Me=>{try{Me&&(Me.preventDefault(),Me.stopPropagation());const ot=window.__ziplofyCopiedComponent;if(!ot){console.log("No component copied");return}const _t=ve.getSelected();let It=ve.getWrapper();if(_t&&_t.get("type")!=="wrapper")if(_t.get("droppable")||_t.getAttributes?.()?.["data-gjs-droppable"]==="*")It=_t;else try{const Bt=_t.parent();Bt&&Bt.get&&Bt.get("type")!=="wrapper"&&(It=Bt)}catch(Bt){console.warn("Could not get parent, using wrapper:",Bt)}if(!It){console.log("No target to paste into");return}let At=null;if(ot.component)try{At=ot.component.clone()}catch($t){if(console.warn("Error cloning from component reference:",$t),ot.html)try{const Bt=ve.getWrapper();if(Bt){const Cr=Bt.get("content");Bt.set("content",ot.html);const Lt=Bt.components();if(Lt&&Lt.length>0){const dr=Lt.at(0);dr&&(At=dr,Bt.components().remove(At))}Bt.set("content",Cr)}}catch(Bt){console.error("Error parsing HTML:",Bt)}}else if(ot.html)try{const $t=ve.getWrapper();if($t){const Bt=$t.get("content");$t.set("content",ot.html);const Cr=$t.components();if(Cr&&Cr.length>0){const Lt=Cr.at(0);Lt&&(At=Lt,$t.components().remove(At))}$t.set("content",Bt)}}catch($t){console.error("Error parsing HTML:",$t)}else if(ot.json)try{if(ve.getWrapper()&&ot.json&&ot.json.components){const Bt=ve.Components.getWrapper();if(Bt){const Cr=Bt.get("content"),Lt=Bt.components().add(ot.json);Lt&&(At=Array.isArray(Lt)?Lt[0]:Lt,At&&Bt.components().remove(At)),Bt.set("content",Cr)}}}catch($t){console.error("Error recreating from JSON:",$t)}if(!At){console.error("Failed to clone component");return}const sr=$t=>{try{const Bt=$t.getAttributes?.()||{},Cr=$t.get?.("tagName")?.toLowerCase?.()||"",Lt=$t.get("type"),dr=Bt["data-gjs-droppable"]==="*"||["form","section","div","main","article","header","footer","nav","aside"].includes(Cr),Dr=Bt["data-gjs-selectable"]!=="false",Zr=["p","h1","h2","h3","h4","h5","h6","span","a","label","li","td","th","button","strong","em","b","i","u"].includes(Cr),Kr=Bt["data-gjs-editable"]==="true"||Bt["data-gjs-type"]==="text"||Lt==="text"||Zr;if($t.set({selectable:Dr,hoverable:!0,draggable:!0,stylable:!0,droppable:dr?"*":!1,editable:Kr,resizable:["img","video","iframe","canvas"].includes(Cr)},{silent:!0}),Kr&&$t.set({editable:!0,type:"text"},{silent:!0}),ve.CssComposer){const Qr=$t.cid||$t.getId?.();if(Qr){let Qn=$t.getClasses().find(Jr=>Jr&&!Jr.startsWith("gjs-"));Qn||(Qn=`gjs-comp-${Qr}`,$t.addClass(Qn))}}const Cn=$t.components();Cn&&Cn.length>0&&Cn.forEach(Qr=>{sr(Qr)})}catch(Bt){console.warn("Error configuring pasted component:",Bt)}};sr(At);try{It.components?It.components().add(At):It.append(At)}catch($t){console.warn("Error adding to target, using wrapper:",$t);const Bt=ve.getWrapper();Bt&&Bt.append(At)}setTimeout(()=>{try{ve.select(At)}catch($t){console.warn("Error selecting pasted component:",$t)}},100),console.log("Component pasted successfully")}catch(ot){console.error("Error pasting component:",ot)}},bt=Me=>{const ot=Me.target;if(!(ot.tagName==="INPUT"||ot.tagName==="TEXTAREA"||ot.isContentEditable)){if((Me.ctrlKey||Me.metaKey)&&Me.key==="c"&&!Me.shiftKey){ke(Me);return}if((Me.ctrlKey||Me.metaKey)&&Me.key==="v"&&!Me.shiftKey){ct(Me);return}(Me.ctrlKey||Me.metaKey)&&Me.key==="z"&&!Me.shiftKey&&(Me.preventDefault(),d&&ve.UndoManager&&ve.UndoManager.undo()),(Me.ctrlKey||Me.metaKey)&&Me.key==="z"&&Me.shiftKey&&(Me.preventDefault(),m&&ve.UndoManager&&ve.UndoManager.redo()),(Me.ctrlKey||Me.metaKey)&&Me.key==="y"&&(Me.preventDefault(),m&&ve.UndoManager&&ve.UndoManager.redo())}};window.addEventListener("keydown",bt),Re(()=>{window.removeEventListener("keydown",bt)});let Ft=null,cr=null;const Br=()=>{if(cr=document.getElementById("style-panel"),!cr)return;Ft&&Ft.disconnect();let Me=null;Ft=new MutationObserver(()=>{Me&&clearTimeout(Me),Me=setTimeout(()=>{if(!cr)return;const ot=window.getComputedStyle(cr);(ot.display==="none"||ot.visibility==="hidden")&&requestAnimationFrame(()=>{cr&&(cr.style.display="block",cr.style.visibility="visible",cr.style.opacity="1");const _t=s.current?.querySelector(".builder-right-panel");_t&&(_t.style.display="flex",_t.style.visibility="visible",_t.style.opacity="1")})},50)}),Ft.observe(cr,{attributes:!0,attributeFilter:["style"],childList:!1,subtree:!1})};requestAnimationFrame(()=>{if(!te){const Me=s.current?.querySelector(".builder-right-panel");Me&&(Me.style.display="flex",Me.style.visibility="visible",Me.style.opacity="1",Me.style.width="300px",Me.style.flexShrink="0"),Br()}}),requestAnimationFrame(()=>{if(!(te||!ve.StyleManager))try{const Me=s.current?.querySelector(".builder-right-panel");Me&&(Me.style.display="flex",Me.style.visibility="visible",Me.style.opacity="1",Me.style.width="300px",Me.style.flexShrink="0");const ot=ve.getWrapper();ot&&(ve.select(ot),ot.set({stylable:!0}),ve.runCommand("open-sm"));const _t=document.getElementById("style-panel");if(!_t||typeof ve.StyleManager.render!="function")return;_t.style.display="block",_t.style.visibility="visible",_t.style.opacity="1",_t.style.width="100%",_t.style.height="100%",_t.style.minHeight="300px",_t.style.background="#1e1e1e",re==="style"&&(_t.innerHTML="",ve.StyleManager.render()),requestAnimationFrame(()=>{const It=_t.querySelectorAll(".gjs-sm-sector"),At=document.createDocumentFragment(),sr=[];It.forEach($t=>{$t&&sr.push(()=>{$t.classList.remove("gjs-sm-sector--closed"),$t.classList.add("gjs-sm-sector--open");const Bt=$t.querySelector(".gjs-sm-sector-content");Bt&&(Bt.style.cssText="display: block !important; visibility: visible !important; opacity: 1 !important; max-height: none !important;")})}),sr.forEach($t=>$t())})}catch(Me){console.warn("Error initializing Style Manager:",Me)}});const kt=ve.BlockManager;kt?console.log(" BlockManager is available"):console.error(" BlockManager is not available!"),document.getElementById("blocks-panel")?console.log(" blocks-panel exists during block registration"):console.warn(" blocks-panel not found during block registration, will retry later");const Xr=kt&&kt.getAll?kt.getAll().length:0;console.log(` Blocks before registration: ${Xr}`),kt.add("section",{label:"Section",category:"Layout",content:'<section style="padding: 60px 20px; min-height: 300px; background: #f9fafb; position: relative;" data-gjs-droppable="*" data-gjs-selectable="true"><div style="max-width: 1200px; margin: 0 auto;">Section Content</div></section>'}),kt.add("container",{label:"Container",category:"Layout",content:'<div style="max-width: 1200px; margin: 0 auto; padding: 20px;" data-gjs-droppable="*" data-gjs-selectable="true">Container</div>'}),kt.add("columns-2",{label:"2 Columns",category:"Layout",content:'<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; padding: 20px;" data-gjs-droppable="*" data-gjs-selectable="true"><div data-gjs-droppable="*" style="min-height: 150px; padding: 20px; background: #fff; border: 1px dashed #e5e7eb;">Column 1</div><div data-gjs-droppable="*" style="min-height: 150px; padding: 20px; background: #fff; border: 1px dashed #e5e7eb;">Column 2</div></div>'}),kt.add("columns-3",{label:"3 Columns",category:"Layout",content:'<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 30px; padding: 20px;" data-gjs-droppable="*" data-gjs-selectable="true"><div data-gjs-droppable="*" style="min-height: 150px; padding: 20px; background: #fff; border: 1px dashed #e5e7eb;">Col 1</div><div data-gjs-droppable="*" style="min-height: 150px; padding: 20px; background: #fff; border: 1px dashed #e5e7eb;">Col 2</div><div data-gjs-droppable="*" style="min-height: 150px; padding: 20px; background: #fff; border: 1px dashed #e5e7eb;">Col 3</div></div>'}),kt.add("columns-4",{label:"4 Columns",category:"Layout",content:'<div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; padding: 20px;" data-gjs-droppable="*" data-gjs-selectable="true"><div data-gjs-droppable="*" style="min-height: 150px; padding: 15px; background: #fff; border: 1px dashed #e5e7eb;">Col 1</div><div data-gjs-droppable="*" style="min-height: 150px; padding: 15px; background: #fff; border: 1px dashed #e5e7eb;">Col 2</div><div data-gjs-droppable="*" style="min-height: 150px; padding: 15px; background: #fff; border: 1px dashed #e5e7eb;">Col 3</div><div data-gjs-droppable="*" style="min-height: 150px; padding: 15px; background: #fff; border: 1px dashed #e5e7eb;">Col 4</div></div>'}),kt.add("row",{label:"Row",category:"Layout",content:'<div style="display: flex; gap: 20px; padding: 20px; flex-wrap: wrap;" data-gjs-droppable="*" data-gjs-selectable="true"><div data-gjs-droppable="*" style="flex: 1; min-width: 200px; min-height: 150px; padding: 20px; background: #fff; border: 1px dashed #e5e7eb;">Row Item</div></div>'}),kt.add("divider",{label:"Divider",category:"Layout",content:'<div style="padding: 40px 20px; text-align: center;" data-gjs-selectable="true"><hr style="border: none; border-top: 2px solid #e5e7eb; margin: 0;" /></div>'}),kt.add("spacer",{label:"Spacer",category:"Layout",content:'<div style="height: 50px; width: 100%;" data-gjs-selectable="true"></div>'}),kt.add("navbar",{label:"Navbar",category:"Layout",content:'<nav style="background: #ffffff; padding: 16px 40px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 1000;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="max-width: 1200px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap;"><div style="display: flex; align-items: center; gap: 12px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="width: 40px; height: 40px; background: #5e72e4; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 18px;" data-gjs-type="text" data-gjs-editable="true">L</div><span style="font-size: 20px; font-weight: 700; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Logo</span></div><ul style="display: flex; list-style: none; gap: 32px; margin: 0; padding: 0; align-items: center; flex-wrap: wrap;" data-gjs-selectable="true" data-gjs-droppable="*"><li style="margin: 0;" data-gjs-selectable="true"><a href="#" style="color: #495157; text-decoration: none; font-size: 16px; font-weight: 500; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Home</a></li><li style="margin: 0;" data-gjs-selectable="true"><a href="#" style="color: #495157; text-decoration: none; font-size: 16px; font-weight: 500; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">About</a></li><li style="margin: 0;" data-gjs-selectable="true"><a href="#" style="color: #495157; text-decoration: none; font-size: 16px; font-weight: 500; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Services</a></li><li style="margin: 0;" data-gjs-selectable="true"><a href="#" style="color: #495157; text-decoration: none; font-size: 16px; font-weight: 500; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Contact</a></li></ul><div style="display: flex; align-items: center; gap: 12px;" data-gjs-selectable="true" data-gjs-droppable="*"><button style="padding: 10px 24px; background: transparent; color: #5e72e4; border: 2px solid #5e72e4; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 600; transition: all 0.3s;" data-gjs-type="text" data-gjs-editable="true">Login</button><button style="padding: 10px 24px; background: #5e72e4; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 600; transition: all 0.3s;" data-gjs-type="text" data-gjs-editable="true">Sign Up</button></div></div></nav>'}),kt.add("heading-1",{label:"Heading 1",category:"Basic",content:'<h1 style="font-size: 48px; font-weight: 700; margin: 20px 0; line-height: 1.2; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true" data-gjs-selectable="true">Heading</h1>'}),kt.add("heading-2",{label:"Heading 2",category:"Basic",content:'<h2 style="font-size: 36px; font-weight: 600; margin: 20px 0; line-height: 1.3; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true" data-gjs-selectable="true">Sub Heading</h2>'}),kt.add("heading-3",{label:"Heading 3",category:"Basic",content:'<h3 style="font-size: 28px; font-weight: 600; margin: 20px 0; line-height: 1.4; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true" data-gjs-selectable="true">Heading 3</h3>'}),kt.add("heading-4",{label:"Heading 4",category:"Basic",content:'<h4 style="font-size: 24px; font-weight: 600; margin: 20px 0; line-height: 1.4; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true" data-gjs-selectable="true">Heading 4</h4>'}),kt.add("paragraph",{label:"Text Editor",category:"Basic",content:'<p style="font-size: 16px; line-height: 1.8; margin: 20px 0; color: #495157;" data-gjs-type="text" data-gjs-editable="true" data-gjs-selectable="true">Add your text here. You can edit this text and change how it looks.</p>'}),kt.add("text-block",{label:"Text Block",category:"Basic",content:'<div style="padding: 30px; background: #fff;" data-gjs-selectable="true" data-gjs-droppable="*"><p style="font-size: 16px; line-height: 1.8; color: #495157; margin: 0;" data-gjs-type="text" data-gjs-editable="true">Text content</p></div>'}),kt.add("quote",{label:"Quote",category:"Basic",content:'<blockquote style="padding: 30px; margin: 30px 0; border-left: 4px solid #5e72e4; background: #f9fafb; font-style: italic; font-size: 18px; line-height: 1.6; color: #495157;" data-gjs-type="text" data-gjs-editable="true" data-gjs-selectable="true">Your quote text here</blockquote>'}),kt.add("list",{label:"List",category:"Basic",content:'<ul style="padding: 20px 20px 20px 40px; margin: 20px 0; list-style: disc; color: #495157; font-size: 16px; line-height: 1.8;" data-gjs-selectable="true" data-gjs-droppable="*"><li style="margin: 10px 0;" data-gjs-type="text" data-gjs-editable="true">List item 1</li><li style="margin: 10px 0;" data-gjs-type="text" data-gjs-editable="true">List item 2</li><li style="margin: 10px 0;" data-gjs-type="text" data-gjs-editable="true">List item 3</li></ul>'}),kt.add("link-block",{label:"Link Block",category:"Basic",content:'<div style="padding: 20px; background: #fff; border: 1px solid #e5e7eb; border-radius: 8px;" data-gjs-selectable="true" data-gjs-droppable="*"><a href="#" style="color: #5e72e4; text-decoration: none; font-size: 16px; font-weight: 500;" data-gjs-type="text" data-gjs-editable="true">Link Text</a></div>'}),kt.add("button",{label:"Button",category:"Buttons",content:'<div style="padding: 20px; text-align: center;" data-gjs-selectable="true"><button style="padding: 14px 32px; background: #5e72e4; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; font-weight: 600; transition: all 0.3s;" data-gjs-type="text" data-gjs-editable="true">Click Here</button></div>'}),kt.add("button-outline",{label:"Button Outline",category:"Buttons",content:'<div style="padding: 20px; text-align: center;" data-gjs-selectable="true"><button style="padding: 14px 32px; background: transparent; color: #5e72e4; border: 2px solid #5e72e4; border-radius: 4px; cursor: pointer; font-size: 16px; font-weight: 600; transition: all 0.3s;" data-gjs-type="text" data-gjs-editable="true">Click Here</button></div>'}),kt.add("button-text",{label:"Button Text",category:"Buttons",content:'<div style="padding: 20px; text-align: center;" data-gjs-selectable="true"><button style="padding: 14px 32px; background: transparent; color: #5e72e4; border: none; cursor: pointer; font-size: 16px; font-weight: 600; text-decoration: underline;" data-gjs-type="text" data-gjs-editable="true">Click Here</button></div>'}),kt.add("link",{label:"Link",category:"Buttons",content:'<div style="padding: 20px;" data-gjs-selectable="true"><a href="#" style="color: #5e72e4; text-decoration: none; font-size: 16px; font-weight: 500; border-bottom: 1px solid #5e72e4;" data-gjs-type="text" data-gjs-editable="true">Link Text</a></div>'}),kt.add("page-link",{label:"Page Link",category:"Buttons",content:'<div style="padding: 20px;" data-gjs-selectable="true"><a href="#page-page-1" data-page-link="page-1" style="color: #5e72e4; text-decoration: none; font-size: 16px; font-weight: 500; border-bottom: 1px solid #5e72e4;" data-gjs-type="text" data-gjs-editable="true">Link to Page</a></div>'}),kt.add("image",{label:"Image",category:"Media",content:'<div style="padding: 20px; text-align: center;" data-gjs-selectable="true"><img src="https://via.placeholder.com/800x600/5e72e4/ffffff?text=Image" alt="Image" style="max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);" /></div>'}),kt.add("image-gallery",{label:"Image Gallery",category:"Media",content:'<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; padding: 20px;" data-gjs-selectable="true" data-gjs-droppable="*"><div data-gjs-selectable="true"><img src="https://via.placeholder.com/300x300/5e72e4/ffffff?text=1" alt="Gallery Image" style="width: 100%; height: auto; border-radius: 8px;" /></div><div data-gjs-selectable="true"><img src="https://via.placeholder.com/300x300/5e72e4/ffffff?text=2" alt="Gallery Image" style="width: 100%; height: auto; border-radius: 8px;" /></div><div data-gjs-selectable="true"><img src="https://via.placeholder.com/300x300/5e72e4/ffffff?text=3" alt="Gallery Image" style="width: 100%; height: auto; border-radius: 8px;" /></div></div>'}),kt.add("video",{label:"Video",category:"Media",content:'<div style="padding: 20px; text-align: center; background: #000; border-radius: 8px;" data-gjs-selectable="true"><div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%;"><iframe style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" src="https://www.youtube.com/embed/dQw4w9WgXcQ" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div></div>'}),kt.add("icon",{label:"Icon",category:"Media",content:'<div style="padding: 30px; text-align: center;" data-gjs-selectable="true"><div style="width: 64px; height: 64px; margin: 0 auto; background: #5e72e4; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 32px; font-weight: bold;"></div></div>'}),kt.add("google-maps",{label:"Google Maps",category:"Media",content:'<div style="padding: 20px; text-align: center;" data-gjs-selectable="true"><div style="width: 100%; height: 400px; background: #e5e7eb; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: #6b7280; font-size: 14px;">Google Maps Embed</div></div>'}),kt.add("form",{label:"Contact Form",category:"Forms",content:'<form style="padding: 20px; max-width: 500px; background: #fff; border-radius: 8px;" data-gjs-selectable="true" data-gjs-droppable="*"><input type="text" placeholder="Name" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;" data-gjs-selectable="true" /><input type="email" placeholder="Email" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;" data-gjs-selectable="true" /><input type="tel" placeholder="Phone" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;" data-gjs-selectable="true" /><textarea placeholder="Message" rows="4" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px; resize: vertical;" data-gjs-selectable="true"></textarea><button type="submit" style="padding: 12px 24px; background: #10b981; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 500; width: 100%; margin-top: 10px;" data-gjs-selectable="true">Submit</button></form>'}),kt.add("form-simple",{label:"Simple Form",category:"Forms",content:'<form style="padding: 20px; max-width: 500px; background: #fff; border-radius: 8px;" data-gjs-selectable="true" data-gjs-droppable="*"><input type="text" placeholder="Name" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;" data-gjs-selectable="true" /><input type="email" placeholder="Email" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;" data-gjs-selectable="true" /><button type="submit" style="padding: 12px 24px; background: #10b981; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 500; width: 100%; margin-top: 10px;" data-gjs-selectable="true">Submit</button></form>'}),kt.add("input-text",{label:"Text Input",category:"Forms",content:'<input type="text" placeholder="Enter text" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;" data-gjs-selectable="true" data-gjs-draggable="*" />'}),kt.add("input-email",{label:"Email Input",category:"Forms",content:'<input type="email" placeholder="Enter email" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;" data-gjs-selectable="true" data-gjs-draggable="*" />'}),kt.add("input-phone",{label:"Phone Input",category:"Forms",content:'<input type="tel" placeholder="Enter phone" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;" data-gjs-selectable="true" data-gjs-draggable="*" />'}),kt.add("textarea-field",{label:"Textarea",category:"Forms",content:'<textarea placeholder="Enter message" rows="4" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px; resize: vertical;" data-gjs-selectable="true" data-gjs-draggable="*"></textarea>'}),kt.add("form-button",{label:"Submit Button",category:"Forms",content:'<button type="submit" style="padding: 12px 24px; background: #10b981; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 500;" data-gjs-selectable="true" data-gjs-draggable="*">Submit</button>'}),kt.add("input-number",{label:"Number Input",category:"Forms",content:'<input type="number" placeholder="Enter number" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;" data-gjs-selectable="true" data-gjs-draggable="*" />'}),kt.add("input-password",{label:"Password Input",category:"Forms",content:'<input type="password" placeholder="Enter password" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;" data-gjs-selectable="true" data-gjs-draggable="*" />'}),kt.add("input-date",{label:"Date Input",category:"Forms",content:'<input type="date" style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;" data-gjs-selectable="true" data-gjs-draggable="*" />'}),kt.add("select-dropdown",{label:"Select Dropdown",category:"Forms",content:'<select style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;" data-gjs-selectable="true" data-gjs-draggable="*"><option>Option 1</option><option>Option 2</option></select>'}),kt.add("checkbox",{label:"Checkbox",category:"Forms",content:'<label style="display: flex; align-items: center; gap: 8px; margin: 10px 0;"><input type="checkbox" style="width: 18px; height: 18px;" data-gjs-selectable="true" data-gjs-draggable="*" /><span>Checkbox label</span></label>'}),kt.add("radio",{label:"Radio Button",category:"Forms",content:'<label style="display: flex; align-items: center; gap: 8px; margin: 10px 0;"><input type="radio" name="radio-group" style="width: 18px; height: 18px;" data-gjs-selectable="true" data-gjs-draggable="*" /><span>Radio option</span></label>'}),kt.add("tabs",{label:"Tabs",category:"Advanced",content:'<div style="padding: 20px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="display: flex; border-bottom: 2px solid #e5e7eb; margin-bottom: 20px;"><button style="padding: 12px 24px; background: transparent; border: none; border-bottom: 2px solid #5e72e4; color: #5e72e4; font-weight: 600; cursor: pointer;" data-gjs-type="text" data-gjs-editable="true">Tab 1</button><button style="padding: 12px 24px; background: transparent; border: none; color: #6b7280; cursor: pointer;" data-gjs-type="text" data-gjs-editable="true">Tab 2</button><button style="padding: 12px 24px; background: transparent; border: none; color: #6b7280; cursor: pointer;" data-gjs-type="text" data-gjs-editable="true">Tab 3</button></div><div style="padding: 20px; min-height: 200px; background: #f9fafb; border-radius: 8px;" data-gjs-droppable="*">Tab content goes here</div></div>'}),kt.add("accordion",{label:"Accordion",category:"Advanced",content:'<div style="padding: 20px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="border: 1px solid #e5e7eb; border-radius: 8px; margin-bottom: 10px; overflow: hidden;"><div style="padding: 16px; background: #f9fafb; border-bottom: 1px solid #e5e7eb; cursor: pointer; font-weight: 600; display: flex; justify-content: space-between; align-items: center;"><span data-gjs-type="text" data-gjs-editable="true">Accordion Item 1</span><span></span></div><div style="padding: 16px; background: #fff;" data-gjs-droppable="*">Content for accordion item 1</div></div><div style="border: 1px solid #e5e7eb; border-radius: 8px; margin-bottom: 10px; overflow: hidden;"><div style="padding: 16px; background: #f9fafb; cursor: pointer; font-weight: 600; display: flex; justify-content: space-between; align-items: center;"><span data-gjs-type="text" data-gjs-editable="true">Accordion Item 2</span><span></span></div></div></div>'}),kt.add("card",{label:"Card",category:"Advanced",content:'<div style="border: 1px solid #e5e7eb; border-radius: 12px; overflow: hidden; background: #fff; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" data-gjs-selectable="true" data-gjs-droppable="*"><div style="padding: 20px; border-bottom: 1px solid #e5e7eb;"><h3 style="margin: 0; font-size: 20px; font-weight: 600; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Card Title</h3></div><div style="padding: 20px;"><p style="margin: 0; color: #495157; line-height: 1.6;" data-gjs-type="text" data-gjs-editable="true">Card content goes here. You can add any content inside this card.</p></div></div>'}),kt.add("testimonial",{label:"Testimonial",category:"Advanced",content:'<div style="padding: 40px; background: #f9fafb; border-radius: 12px; text-align: center; max-width: 600px; margin: 0 auto;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="font-size: 24px; color: #5e72e4; margin-bottom: 20px;">"</div><p style="font-size: 18px; font-style: italic; color: #495157; line-height: 1.8; margin-bottom: 20px;" data-gjs-type="text" data-gjs-editable="true">This is a testimonial. You can edit this text to add your own testimonial content.</p><div style="margin-top: 20px;"><div style="width: 60px; height: 60px; border-radius: 50%; background: #5e72e4; margin: 0 auto 10px;"></div><div style="font-weight: 600; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Customer Name</div><div style="font-size: 14px; color: #6b7280;" data-gjs-type="text" data-gjs-editable="true">Company Name</div></div></div>'}),kt.add("pricing-table",{label:"Pricing Table",category:"Advanced",content:'<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 30px; padding: 40px 20px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="border: 2px solid #e5e7eb; border-radius: 12px; padding: 30px; text-align: center; background: #fff;" data-gjs-droppable="*" data-gjs-selectable="true"><h3 style="font-size: 24px; margin-bottom: 10px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Basic</h3><div style="font-size: 48px; font-weight: 700; color: #5e72e4; margin: 20px 0;"><span data-gjs-type="text" data-gjs-editable="true">$29</span></div><ul style="list-style: none; padding: 0; margin: 20px 0; text-align: left;"><li style="padding: 10px 0; border-bottom: 1px solid #e5e7eb;" data-gjs-type="text" data-gjs-editable="true">Feature 1</li><li style="padding: 10px 0; border-bottom: 1px solid #e5e7eb;" data-gjs-type="text" data-gjs-editable="true">Feature 2</li><li style="padding: 10px 0;" data-gjs-type="text" data-gjs-editable="true">Feature 3</li></ul><button style="width: 100%; padding: 14px; background: #5e72e4; color: white; border: none; border-radius: 6px; font-weight: 600; cursor: pointer; margin-top: 20px;" data-gjs-type="text" data-gjs-editable="true">Get Started</button></div></div>'}),kt.add("footer",{label:"Footer",category:"Layout",content:'<footer style="background: #1e1e1e; color: #ffffff; padding: 60px 40px 20px; margin-top: 80px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="max-width: 1200px; margin: 0 auto;"><div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 40px; margin-bottom: 40px; flex-wrap: wrap;" data-gjs-selectable="true" data-gjs-droppable="*"><div data-gjs-selectable="true" data-gjs-droppable="*"><h3 style="font-size: 18px; font-weight: 700; margin-bottom: 20px; color: #ffffff;" data-gjs-type="text" data-gjs-editable="true">Company</h3><ul style="list-style: none; padding: 0; margin: 0;"><li style="margin-bottom: 12px;"><a href="#" style="color: #9ca3af; text-decoration: none; font-size: 14px; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">About Us</a></li><li style="margin-bottom: 12px;"><a href="#" style="color: #9ca3af; text-decoration: none; font-size: 14px; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Careers</a></li><li style="margin-bottom: 12px;"><a href="#" style="color: #9ca3af; text-decoration: none; font-size: 14px; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Contact</a></li></ul></div><div data-gjs-selectable="true" data-gjs-droppable="*"><h3 style="font-size: 18px; font-weight: 700; margin-bottom: 20px; color: #ffffff;" data-gjs-type="text" data-gjs-editable="true">Products</h3><ul style="list-style: none; padding: 0; margin: 0;"><li style="margin-bottom: 12px;"><a href="#" style="color: #9ca3af; text-decoration: none; font-size: 14px; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Features</a></li><li style="margin-bottom: 12px;"><a href="#" style="color: #9ca3af; text-decoration: none; font-size: 14px; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Pricing</a></li><li style="margin-bottom: 12px;"><a href="#" style="color: #9ca3af; text-decoration: none; font-size: 14px; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">FAQ</a></li></ul></div><div data-gjs-selectable="true" data-gjs-droppable="*"><h3 style="font-size: 18px; font-weight: 700; margin-bottom: 20px; color: #ffffff;" data-gjs-type="text" data-gjs-editable="true">Legal</h3><ul style="list-style: none; padding: 0; margin: 0;"><li style="margin-bottom: 12px;"><a href="#" style="color: #9ca3af; text-decoration: none; font-size: 14px; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Privacy</a></li><li style="margin-bottom: 12px;"><a href="#" style="color: #9ca3af; text-decoration: none; font-size: 14px; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Terms</a></li><li style="margin-bottom: 12px;"><a href="#" style="color: #9ca3af; text-decoration: none; font-size: 14px; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Cookies</a></li></ul></div><div data-gjs-selectable="true" data-gjs-droppable="*"><h3 style="font-size: 18px; font-weight: 700; margin-bottom: 20px; color: #ffffff;" data-gjs-type="text" data-gjs-editable="true">Follow Us</h3><div style="display: flex; gap: 12px; margin-top: 20px;"><a href="#" style="width: 40px; height: 40px; background: #374151; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #ffffff; text-decoration: none; transition: background 0.3s;" data-gjs-type="text" data-gjs-editable="true">f</a><a href="#" style="width: 40px; height: 40px; background: #374151; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #ffffff; text-decoration: none; transition: background 0.3s;" data-gjs-type="text" data-gjs-editable="true">t</a><a href="#" style="width: 40px; height: 40px; background: #374151; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #ffffff; text-decoration: none; transition: background 0.3s;" data-gjs-type="text" data-gjs-editable="true">in</a></div></div></div><div style="border-top: 1px solid #374151; padding-top: 20px; text-align: center; color: #9ca3af; font-size: 14px;" data-gjs-selectable="true" data-gjs-droppable="*"><p style="margin: 0;" data-gjs-type="text" data-gjs-editable="true"> 2024 Your Company. All rights reserved.</p></div></div></footer>'}),kt.add("hero-section",{label:"Hero Section",category:"Layout",content:'<section style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 100px 40px; text-align: center; color: #ffffff;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="max-width: 800px; margin: 0 auto;"><h1 style="font-size: 56px; font-weight: 800; margin-bottom: 24px; line-height: 1.2;" data-gjs-type="text" data-gjs-editable="true">Welcome to Our Platform</h1><p style="font-size: 20px; margin-bottom: 40px; line-height: 1.6; opacity: 0.9;" data-gjs-type="text" data-gjs-editable="true">Build amazing experiences with our powerful tools and features</p><div style="display: flex; gap: 16px; justify-content: center; flex-wrap: wrap;" data-gjs-selectable="true" data-gjs-droppable="*"><button style="padding: 16px 32px; background: #ffffff; color: #667eea; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: transform 0.3s;" data-gjs-type="text" data-gjs-editable="true">Get Started</button><button style="padding: 16px 32px; background: transparent; color: #ffffff; border: 2px solid #ffffff; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: transform 0.3s;" data-gjs-type="text" data-gjs-editable="true">Learn More</button></div></div></section>'}),kt.add("feature-section",{label:"Feature Section",category:"Layout",content:'<section style="padding: 80px 40px; background: #f9fafb;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="max-width: 1200px; margin: 0 auto;"><h2 style="text-align: center; font-size: 42px; font-weight: 700; margin-bottom: 16px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Our Features</h2><p style="text-align: center; font-size: 18px; color: #6b7280; margin-bottom: 60px; max-width: 600px; margin-left: auto; margin-right: auto;" data-gjs-type="text" data-gjs-editable="true">Everything you need to build amazing websites</p><div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 40px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="text-align: center; padding: 40px 20px; background: #ffffff; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);" data-gjs-selectable="true" data-gjs-droppable="*"><div style="width: 64px; height: 64px; background: #5e72e4; border-radius: 12px; margin: 0 auto 24px; display: flex; align-items: center; justify-content: center; color: white; font-size: 32px;"></div><h3 style="font-size: 24px; font-weight: 600; margin-bottom: 12px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Fast Performance</h3><p style="color: #6b7280; line-height: 1.6;" data-gjs-type="text" data-gjs-editable="true">Lightning-fast loading times for better user experience</p></div><div style="text-align: center; padding: 40px 20px; background: #ffffff; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);" data-gjs-selectable="true" data-gjs-droppable="*"><div style="width: 64px; height: 64px; background: #10b981; border-radius: 12px; margin: 0 auto 24px; display: flex; align-items: center; justify-content: center; color: white; font-size: 32px;"></div><h3 style="font-size: 24px; font-weight: 600; margin-bottom: 12px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Secure</h3><p style="color: #6b7280; line-height: 1.6;" data-gjs-type="text" data-gjs-editable="true">Enterprise-grade security to protect your data</p></div><div style="text-align: center; padding: 40px 20px; background: #ffffff; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);" data-gjs-selectable="true" data-gjs-droppable="*"><div style="width: 64px; height: 64px; background: #f59e0b; border-radius: 12px; margin: 0 auto 24px; display: flex; align-items: center; justify-content: center; color: white; font-size: 32px;"></div><h3 style="font-size: 24px; font-weight: 600; margin-bottom: 12px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Responsive</h3><p style="color: #6b7280; line-height: 1.6;" data-gjs-type="text" data-gjs-editable="true">Works perfectly on all devices and screen sizes</p></div></div></div></section>'}),kt.add("team-section",{label:"Team Section",category:"Advanced",content:'<section style="padding: 80px 40px; background: #ffffff;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="max-width: 1200px; margin: 0 auto;"><h2 style="text-align: center; font-size: 42px; font-weight: 700; margin-bottom: 16px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Our Team</h2><p style="text-align: center; font-size: 18px; color: #6b7280; margin-bottom: 60px;" data-gjs-type="text" data-gjs-editable="true">Meet the talented people behind our success</p><div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 30px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="text-align: center;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="width: 200px; height: 200px; border-radius: 50%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; color: white; font-size: 64px; font-weight: 700;">JD</div><h3 style="font-size: 20px; font-weight: 600; margin-bottom: 8px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">John Doe</h3><p style="color: #6b7280; margin-bottom: 12px;" data-gjs-type="text" data-gjs-editable="true">CEO & Founder</p><div style="display: flex; gap: 12px; justify-content: center;"><a href="#" style="color: #6b7280; text-decoration: none;" data-gjs-type="text" data-gjs-editable="true">in</a><a href="#" style="color: #6b7280; text-decoration: none;" data-gjs-type="text" data-gjs-editable="true">@</a></div></div><div style="text-align: center;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="width: 200px; height: 200px; border-radius: 50%; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; color: white; font-size: 64px; font-weight: 700;">JS</div><h3 style="font-size: 20px; font-weight: 600; margin-bottom: 8px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Jane Smith</h3><p style="color: #6b7280; margin-bottom: 12px;" data-gjs-type="text" data-gjs-editable="true">CTO</p><div style="display: flex; gap: 12px; justify-content: center;"><a href="#" style="color: #6b7280; text-decoration: none;" data-gjs-type="text" data-gjs-editable="true">in</a><a href="#" style="color: #6b7280; text-decoration: none;" data-gjs-type="text" data-gjs-editable="true">@</a></div></div><div style="text-align: center;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="width: 200px; height: 200px; border-radius: 50%; background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; color: white; font-size: 64px; font-weight: 700;">MJ</div><h3 style="font-size: 20px; font-weight: 600; margin-bottom: 8px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Mike Johnson</h3><p style="color: #6b7280; margin-bottom: 12px;" data-gjs-type="text" data-gjs-editable="true">Designer</p><div style="display: flex; gap: 12px; justify-content: center;"><a href="#" style="color: #6b7280; text-decoration: none;" data-gjs-type="text" data-gjs-editable="true">in</a><a href="#" style="color: #6b7280; text-decoration: none;" data-gjs-type="text" data-gjs-editable="true">@</a></div></div><div style="text-align: center;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="width: 200px; height: 200px; border-radius: 50%; background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; color: white; font-size: 64px; font-weight: 700;">SW</div><h3 style="font-size: 20px; font-weight: 600; margin-bottom: 8px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Sarah Williams</h3><p style="color: #6b7280; margin-bottom: 12px;" data-gjs-type="text" data-gjs-editable="true">Developer</p><div style="display: flex; gap: 12px; justify-content: center;"><a href="#" style="color: #6b7280; text-decoration: none;" data-gjs-type="text" data-gjs-editable="true">in</a><a href="#" style="color: #6b7280; text-decoration: none;" data-gjs-type="text" data-gjs-editable="true">@</a></div></div></div></div></section>'}),kt.add("faq-section",{label:"FAQ Section",category:"Advanced",content:'<section style="padding: 80px 40px; background: #f9fafb;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="max-width: 800px; margin: 0 auto;"><h2 style="text-align: center; font-size: 42px; font-weight: 700; margin-bottom: 16px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Frequently Asked Questions</h2><p style="text-align: center; font-size: 18px; color: #6b7280; margin-bottom: 60px;" data-gjs-type="text" data-gjs-editable="true">Everything you need to know</p><div style="display: flex; flex-direction: column; gap: 16px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="background: #ffffff; border-radius: 12px; padding: 24px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);" data-gjs-selectable="true" data-gjs-droppable="*"><div style="display: flex; justify-content: space-between; align-items: center; cursor: pointer;"><h3 style="font-size: 18px; font-weight: 600; color: #1e1e1e; margin: 0;" data-gjs-type="text" data-gjs-editable="true">What is your return policy?</h3><span style="font-size: 24px; color: #6b7280;">+</span></div><p style="margin-top: 16px; color: #6b7280; line-height: 1.6; display: none;" data-gjs-type="text" data-gjs-editable="true">We offer a 30-day money-back guarantee on all our products.</p></div><div style="background: #ffffff; border-radius: 12px; padding: 24px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);" data-gjs-selectable="true" data-gjs-droppable="*"><div style="display: flex; justify-content: space-between; align-items: center; cursor: pointer;"><h3 style="font-size: 18px; font-weight: 600; color: #1e1e1e; margin: 0;" data-gjs-type="text" data-gjs-editable="true">How do I cancel my subscription?</h3><span style="font-size: 24px; color: #6b7280;">+</span></div><p style="margin-top: 16px; color: #6b7280; line-height: 1.6; display: none;" data-gjs-type="text" data-gjs-editable="true">You can cancel your subscription anytime from your account settings.</p></div><div style="background: #ffffff; border-radius: 12px; padding: 24px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);" data-gjs-selectable="true" data-gjs-droppable="*"><div style="display: flex; justify-content: space-between; align-items: center; cursor: pointer;"><h3 style="font-size: 18px; font-weight: 600; color: #1e1e1e; margin: 0;" data-gjs-type="text" data-gjs-editable="true">Do you offer customer support?</h3><span style="font-size: 24px; color: #6b7280;">+</span></div><p style="margin-top: 16px; color: #6b7280; line-height: 1.6; display: none;" data-gjs-type="text" data-gjs-editable="true">Yes, we offer 24/7 customer support via email and live chat.</p></div></div></div></section>'}),kt.add("blog-card",{label:"Blog Post Card",category:"Advanced",content:'<div style="border: 1px solid #e5e7eb; border-radius: 12px; overflow: hidden; background: #ffffff; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: transform 0.3s;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="width: 100%; height: 200px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); position: relative;" data-gjs-selectable="true"><div style="position: absolute; top: 16px; left: 16px; background: rgba(255,255,255,0.9); padding: 6px 12px; border-radius: 6px; font-size: 12px; font-weight: 600; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Category</div></div><div style="padding: 24px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px; font-size: 14px; color: #6b7280;"><span data-gjs-type="text" data-gjs-editable="true">Jan 15, 2024</span><span></span><span data-gjs-type="text" data-gjs-editable="true">5 min read</span></div><h3 style="font-size: 24px; font-weight: 700; margin-bottom: 12px; color: #1e1e1e; line-height: 1.3;" data-gjs-type="text" data-gjs-editable="true">Blog Post Title</h3><p style="color: #6b7280; line-height: 1.6; margin-bottom: 20px;" data-gjs-type="text" data-gjs-editable="true">This is a preview of the blog post content. You can edit this text to add your own content.</p><a href="#" style="color: #5e72e4; text-decoration: none; font-weight: 600; font-size: 14px;" data-gjs-type="text" data-gjs-editable="true">Read More </a></div></div>'});const ma='<div style="border: 1px solid #e5e7eb; border-radius: 12px; overflow: hidden; background: #ffffff; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: transform 0.3s;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="width: 100%; height: 250px; background: #f3f4f6; position: relative; display: flex; align-items: center; justify-content: center;" data-gjs-selectable="true"><div style="width: 150px; height: 150px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px;"></div><div style="position: absolute; top: 12px; right: 12px; background: #ffffff; width: 36px; height: 36px; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 4px rgba(0,0,0,0.1); cursor: pointer;"></div></div><div style="padding: 20px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;"><span style="background: #fef3c7; color: #92400e; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: 600;" data-gjs-type="text" data-gjs-editable="true">New</span><span style="color: #6b7280; font-size: 14px;" data-gjs-type="text" data-gjs-editable="true">In Stock</span></div><h3 style="font-size: 20px; font-weight: 600; margin-bottom: 8px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Product Name</h3><p style="color: #6b7280; font-size: 14px; margin-bottom: 16px; line-height: 1.5;" data-gjs-type="text" data-gjs-editable="true">Product description goes here</p><div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;"><div><span style="font-size: 24px; font-weight: 700; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">$99</span><span style="font-size: 16px; color: #9ca3af; text-decoration: line-through; margin-left: 8px;" data-gjs-type="text" data-gjs-editable="true">$149</span></div><div style="color: #f59e0b; font-size: 14px;"></div></div><button style="width: 100%; padding: 12px; background: #5e72e4; color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer;" data-gjs-type="text" data-gjs-editable="true">Add to Cart</button></div></div>';kt.add("product-card",{label:"Product Card",category:"Advanced",content:ma,activate:!0}),ve.on("block:drag:stop",Me=>{Me&&Me.get&&Me.get("id")==="product-card"&&setTimeout(()=>{const ot=ve.getSelected();let _t=null;const It=ve.getWrapper();if(It){const Or=It.components();Or&&Or.length>0&&(_t=Or.at(-1))}const At=prompt("How many product cards would you like to add?","1");if(!At){_t&&_t.remove();return}const sr=parseInt(At,10);if(isNaN(sr)||sr<1){alert("Please enter a valid number greater than 0"),_t&&_t.remove();return}if(sr>50&&!window.confirm(`You're about to add ${sr} product cards. This might slow down the editor. Continue?`)){_t&&_t.remove();return}const $t=ve.getWrapper(),Bt=ve.getSelected();let Cr=$t;if(Bt&&Bt.get&&Bt.get("type")!=="wrapper")if(Bt.get("droppable")||Bt.getAttributes?.()?.["data-gjs-droppable"]==="*")Cr=Bt;else try{const Zr=Bt.parent();Zr&&Zr.get&&Zr.get("type")!=="wrapper"&&(Zr.get("droppable")||Zr.getAttributes?.()?.["data-gjs-droppable"]==="*")&&(Cr=Zr)}catch{}_t&&_t.remove&&_t.remove();const dr=Cr.components().add('<div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 24px; padding: 20px;" data-gjs-droppable="*" data-gjs-selectable="true"></div>'),Dr=Array.isArray(dr)?dr[0]:dr;if(!Dr||typeof Dr.set!="function"){console.error("Failed to create container");return}Dr.set({selectable:!0,hoverable:!0,draggable:!0,stylable:!0,droppable:"*"},{silent:!0});for(let Or=0;Or<sr;Or++){const Zr=Dr.components().add(ma),Kr=Array.isArray(Zr)?Zr[0]:Zr;if(Kr&&typeof Kr.set=="function"&&(Kr.set({selectable:!0,hoverable:!0,draggable:!0,stylable:!0,droppable:!1},{silent:!0}),ve.CssComposer&&Kr.cid)){let Qr=(Kr.getClasses?Kr.getClasses():[]).find(Hr=>Hr&&!Hr.startsWith("gjs-"));!Qr&&Kr.addClass&&(Qr=`gjs-comp-${Kr.cid}`,Kr.addClass(Qr))}}ve.select(Dr),console.log(` Added ${sr} product card${sr>1?"s":""} to the page`)},100)}),kt.add("stats-section",{label:"Stats Section",category:"Advanced",content:'<section style="padding: 80px 40px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #ffffff;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="max-width: 1200px; margin: 0 auto;"><div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 40px; text-align: center;" data-gjs-selectable="true" data-gjs-droppable="*"><div data-gjs-selectable="true" data-gjs-droppable="*"><div style="font-size: 56px; font-weight: 800; margin-bottom: 12px;" data-gjs-type="text" data-gjs-editable="true">10K+</div><div style="font-size: 18px; opacity: 0.9;" data-gjs-type="text" data-gjs-editable="true">Active Users</div></div><div data-gjs-selectable="true" data-gjs-droppable="*"><div style="font-size: 56px; font-weight: 800; margin-bottom: 12px;" data-gjs-type="text" data-gjs-editable="true">500+</div><div style="font-size: 18px; opacity: 0.9;" data-gjs-type="text" data-gjs-editable="true">Projects</div></div><div data-gjs-selectable="true" data-gjs-droppable="*"><div style="font-size: 56px; font-weight: 800; margin-bottom: 12px;" data-gjs-type="text" data-gjs-editable="true">98%</div><div style="font-size: 18px; opacity: 0.9;" data-gjs-type="text" data-gjs-editable="true">Satisfaction</div></div><div data-gjs-selectable="true" data-gjs-droppable="*"><div style="font-size: 56px; font-weight: 800; margin-bottom: 12px;" data-gjs-type="text" data-gjs-editable="true">24/7</div><div style="font-size: 18px; opacity: 0.9;" data-gjs-type="text" data-gjs-editable="true">Support</div></div></div></div></section>'}),kt.add("cta-section",{label:"Call to Action",category:"Layout",content:'<section style="padding: 80px 40px; background: #5e72e4; color: #ffffff; text-align: center;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="max-width: 800px; margin: 0 auto;"><h2 style="font-size: 42px; font-weight: 700; margin-bottom: 20px; line-height: 1.2;" data-gjs-type="text" data-gjs-editable="true">Ready to Get Started?</h2><p style="font-size: 20px; margin-bottom: 40px; opacity: 0.9; line-height: 1.6;" data-gjs-type="text" data-gjs-editable="true">Join thousands of satisfied customers and start building today</p><div style="display: flex; gap: 16px; justify-content: center; flex-wrap: wrap;" data-gjs-selectable="true" data-gjs-droppable="*"><button style="padding: 16px 40px; background: #ffffff; color: #5e72e4; border: none; border-radius: 8px; font-size: 18px; font-weight: 600; cursor: pointer; transition: transform 0.3s;" data-gjs-type="text" data-gjs-editable="true">Start Free Trial</button><button style="padding: 16px 40px; background: transparent; color: #ffffff; border: 2px solid #ffffff; border-radius: 8px; font-size: 18px; font-weight: 600; cursor: pointer; transition: transform 0.3s;" data-gjs-type="text" data-gjs-editable="true">Contact Sales</button></div></div></section>'}),kt.add("social-links",{label:"Social Media Links",category:"Basic",content:'<div style="padding: 30px; text-align: center;" data-gjs-selectable="true" data-gjs-droppable="*"><h3 style="font-size: 20px; font-weight: 600; margin-bottom: 20px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Follow Us</h3><div style="display: flex; gap: 16px; justify-content: center; flex-wrap: wrap;" data-gjs-selectable="true" data-gjs-droppable="*"><a href="#" style="width: 50px; height: 50px; background: #1877f2; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #ffffff; text-decoration: none; font-size: 24px; font-weight: 700; transition: transform 0.3s;" data-gjs-type="text" data-gjs-editable="true">f</a><a href="#" style="width: 50px; height: 50px; background: #1da1f2; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #ffffff; text-decoration: none; font-size: 24px; font-weight: 700; transition: transform 0.3s;" data-gjs-type="text" data-gjs-editable="true">t</a><a href="#" style="width: 50px; height: 50px; background: #0077b5; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #ffffff; text-decoration: none; font-size: 24px; font-weight: 700; transition: transform 0.3s;" data-gjs-type="text" data-gjs-editable="true">in</a><a href="#" style="width: 50px; height: 50px; background: #e4405f; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #ffffff; text-decoration: none; font-size: 24px; font-weight: 700; transition: transform 0.3s;" data-gjs-type="text" data-gjs-editable="true">ig</a><a href="#" style="width: 50px; height: 50px; background: #ff0000; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #ffffff; text-decoration: none; font-size: 24px; font-weight: 700; transition: transform 0.3s;" data-gjs-type="text" data-gjs-editable="true">yt</a></div></div>'}),kt.add("breadcrumbs",{label:"Breadcrumbs",category:"Basic",content:'<nav style="padding: 20px 40px; background: #f9fafb; border-bottom: 1px solid #e5e7eb;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="max-width: 1200px; margin: 0 auto;"><div style="display: flex; align-items: center; gap: 8px; font-size: 14px; color: #6b7280;" data-gjs-selectable="true" data-gjs-droppable="*"><a href="#" style="color: #5e72e4; text-decoration: none;" data-gjs-type="text" data-gjs-editable="true">Home</a><span>/</span><a href="#" style="color: #5e72e4; text-decoration: none;" data-gjs-type="text" data-gjs-editable="true">Category</a><span>/</span><span style="color: #1e1e1e; font-weight: 500;" data-gjs-type="text" data-gjs-editable="true">Current Page</span></div></div></nav>'}),kt.add("sidebar",{label:"Sidebar",category:"Layout",content:'<aside style="background: #f9fafb; padding: 30px; border-radius: 12px; min-height: 400px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="margin-bottom: 30px;" data-gjs-selectable="true" data-gjs-droppable="*"><h3 style="font-size: 20px; font-weight: 700; margin-bottom: 16px; color: #1e1e1e; border-bottom: 2px solid #e5e7eb; padding-bottom: 12px;" data-gjs-type="text" data-gjs-editable="true">Categories</h3><ul style="list-style: none; padding: 0; margin: 0;"><li style="margin-bottom: 12px;"><a href="#" style="color: #6b7280; text-decoration: none; font-size: 14px; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Category 1</a></li><li style="margin-bottom: 12px;"><a href="#" style="color: #6b7280; text-decoration: none; font-size: 14px; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Category 2</a></li><li style="margin-bottom: 12px;"><a href="#" style="color: #6b7280; text-decoration: none; font-size: 14px; transition: color 0.3s;" data-gjs-type="text" data-gjs-editable="true">Category 3</a></li></ul></div><div style="margin-bottom: 30px;" data-gjs-selectable="true" data-gjs-droppable="*"><h3 style="font-size: 20px; font-weight: 700; margin-bottom: 16px; color: #1e1e1e; border-bottom: 2px solid #e5e7eb; padding-bottom: 12px;" data-gjs-type="text" data-gjs-editable="true">Recent Posts</h3><div style="margin-bottom: 16px; padding-bottom: 16px; border-bottom: 1px solid #e5e7eb;"><a href="#" style="color: #1e1e1e; text-decoration: none; font-weight: 600; font-size: 14px; display: block; margin-bottom: 8px;" data-gjs-type="text" data-gjs-editable="true">Recent Post Title</a><span style="color: #6b7280; font-size: 12px;" data-gjs-type="text" data-gjs-editable="true">Jan 15, 2024</span></div><div style="margin-bottom: 16px; padding-bottom: 16px; border-bottom: 1px solid #e5e7eb;"><a href="#" style="color: #1e1e1e; text-decoration: none; font-weight: 600; font-size: 14px; display: block; margin-bottom: 8px;" data-gjs-type="text" data-gjs-editable="true">Another Post Title</a><span style="color: #6b7280; font-size: 12px;" data-gjs-type="text" data-gjs-editable="true">Jan 10, 2024</span></div></div><div data-gjs-selectable="true" data-gjs-droppable="*"><h3 style="font-size: 20px; font-weight: 700; margin-bottom: 16px; color: #1e1e1e; border-bottom: 2px solid #e5e7eb; padding-bottom: 12px;" data-gjs-type="text" data-gjs-editable="true">Tags</h3><div style="display: flex; flex-wrap: wrap; gap: 8px;"><span style="background: #e5e7eb; color: #1e1e1e; padding: 6px 12px; border-radius: 6px; font-size: 12px; font-weight: 500;" data-gjs-type="text" data-gjs-editable="true">Tag 1</span><span style="background: #e5e7eb; color: #1e1e1e; padding: 6px 12px; border-radius: 6px; font-size: 12px; font-weight: 500;" data-gjs-type="text" data-gjs-editable="true">Tag 2</span><span style="background: #e5e7eb; color: #1e1e1e; padding: 6px 12px; border-radius: 6px; font-size: 12px; font-weight: 500;" data-gjs-type="text" data-gjs-editable="true">Tag 3</span></div></div></aside>'}),kt.add("progress-bar",{label:"Progress Bar",category:"Advanced",content:'<div class="ziplofy-progress-bar" style="padding: 30px; background: #ffffff; border-radius: 12px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="margin-bottom: 20px;"><div style="display: flex; justify-content: space-between; margin-bottom: 8px;"><span class="progress-label" style="font-size: 14px; font-weight: 600; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Skill Name</span><span class="progress-percentage" style="font-size: 14px; font-weight: 600; color: #5e72e4;" data-gjs-type="text" data-gjs-editable="true">75%</span></div><div class="progress-bar-container" style="width: 100%; height: 12px; background: #e5e7eb; border-radius: 6px; overflow: hidden;"><div class="progress-bar-fill" style="width: 75%; height: 100%; background: linear-gradient(90deg, #5e72e4 0%, #667eea 100%); border-radius: 6px; transition: width 0.3s ease;"></div></div></div></div>'}),kt.add("counter",{label:"Counter",category:"Advanced",content:'<div style="text-align: center; padding: 40px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 16px; color: #ffffff;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="font-size: 64px; font-weight: 800; margin-bottom: 12px; line-height: 1;" data-gjs-type="text" data-gjs-editable="true">1,234</div><div style="font-size: 20px; font-weight: 500; opacity: 0.9;" data-gjs-type="text" data-gjs-editable="true">Total Users</div></div>'}),kt.add("image-carousel",{label:"Image Carousel",category:"Media",content:'<div style="position: relative; padding: 20px; background: #ffffff; border-radius: 12px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="display: flex; gap: 16px; overflow-x: auto; scroll-snap-type: x mandatory; scrollbar-width: none; -ms-overflow-style: none;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="min-width: 300px; scroll-snap-align: start; flex-shrink: 0;" data-gjs-selectable="true"><img src="https://via.placeholder.com/600x400/667eea/ffffff?text=Slide+1" alt="Carousel Image" style="width: 100%; height: auto; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);" /></div><div style="min-width: 300px; scroll-snap-align: start; flex-shrink: 0;" data-gjs-selectable="true"><img src="https://via.placeholder.com/600x400/764ba2/ffffff?text=Slide+2" alt="Carousel Image" style="width: 100%; height: auto; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);" /></div><div style="min-width: 300px; scroll-snap-align: start; flex-shrink: 0;" data-gjs-selectable="true"><img src="https://via.placeholder.com/600x400/f093fb/ffffff?text=Slide+3" alt="Carousel Image" style="width: 100%; height: auto; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);" /></div></div><div style="display: flex; justify-content: center; gap: 8px; margin-top: 16px;"><div style="width: 12px; height: 12px; border-radius: 50%; background: #5e72e4;"></div><div style="width: 12px; height: 12px; border-radius: 50%; background: #e5e7eb;"></div><div style="width: 12px; height: 12px; border-radius: 50%; background: #e5e7eb;"></div></div></div>'}),kt.add("card-hover",{label:"Card Hover",category:"Advanced",content:'<div style="border: 1px solid #e5e7eb; border-radius: 16px; overflow: hidden; background: #ffffff; box-shadow: 0 4px 6px rgba(0,0,0,0.1); transition: transform 0.3s ease, box-shadow 0.3s ease; cursor: pointer;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="width: 100%; height: 200px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); position: relative; overflow: hidden;" data-gjs-selectable="true"><div style="position: absolute; top: 16px; right: 16px; background: rgba(255,255,255,0.2); backdrop-filter: blur(10px); padding: 8px 16px; border-radius: 20px; font-size: 12px; font-weight: 600; color: #ffffff;" data-gjs-type="text" data-gjs-editable="true">Featured</div></div><div style="padding: 24px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px;"><span style="background: #fef3c7; color: #92400e; padding: 4px 12px; border-radius: 6px; font-size: 12px; font-weight: 600;" data-gjs-type="text" data-gjs-editable="true">Category</span><span style="color: #6b7280; font-size: 12px;" data-gjs-type="text" data-gjs-editable="true">Jan 15, 2024</span></div><h3 style="font-size: 24px; font-weight: 700; margin-bottom: 12px; color: #1e1e1e; line-height: 1.3;" data-gjs-type="text" data-gjs-editable="true">Card Title</h3><p style="color: #6b7280; line-height: 1.6; margin-bottom: 20px;" data-gjs-type="text" data-gjs-editable="true">This is an advanced card with hover effects. Edit this content to customize.</p><a href="#" style="color: #5e72e4; text-decoration: none; font-weight: 600; font-size: 14px; display: inline-flex; align-items: center; gap: 8px;" data-gjs-type="text" data-gjs-editable="true">Learn More </a></div></div>'}),kt.add("timeline",{label:"Timeline",category:"Advanced",content:'<div style="padding: 40px; background: #ffffff; position: relative;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="position: relative; padding-left: 40px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="position: absolute; left: 0; top: 0; bottom: 0; width: 2px; background: #e5e7eb;"></div><div style="position: relative; margin-bottom: 40px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="position: absolute; left: -32px; top: 0; width: 16px; height: 16px; border-radius: 50%; background: #5e72e4; border: 3px solid #ffffff; box-shadow: 0 0 0 2px #5e72e4;"></div><div style="background: #f9fafb; padding: 24px; border-radius: 12px; border-left: 3px solid #5e72e4;"><div style="font-size: 14px; font-weight: 600; color: #5e72e4; margin-bottom: 8px;" data-gjs-type="text" data-gjs-editable="true">2024</div><h3 style="font-size: 20px; font-weight: 700; margin-bottom: 8px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Event Title</h3><p style="color: #6b7280; line-height: 1.6;" data-gjs-type="text" data-gjs-editable="true">Event description goes here. You can edit this text.</p></div></div><div style="position: relative; margin-bottom: 40px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="position: absolute; left: -32px; top: 0; width: 16px; height: 16px; border-radius: 50%; background: #10b981; border: 3px solid #ffffff; box-shadow: 0 0 0 2px #10b981;"></div><div style="background: #f9fafb; padding: 24px; border-radius: 12px; border-left: 3px solid #10b981;"><div style="font-size: 14px; font-weight: 600; color: #10b981; margin-bottom: 8px;" data-gjs-type="text" data-gjs-editable="true">2023</div><h3 style="font-size: 20px; font-weight: 700; margin-bottom: 8px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Another Event</h3><p style="color: #6b7280; line-height: 1.6;" data-gjs-type="text" data-gjs-editable="true">Another event description. Customize as needed.</p></div></div></div></div>'}),kt.add("testimonials-slider",{label:"Testimonials Slider",category:"Advanced",content:'<section style="padding: 80px 40px; background: #f9fafb;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="max-width: 1200px; margin: 0 auto;"><h2 style="text-align: center; font-size: 42px; font-weight: 700; margin-bottom: 60px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">What Our Clients Say</h2><div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 30px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="background: #ffffff; padding: 32px; border-radius: 16px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);" data-gjs-selectable="true" data-gjs-droppable="*"><div style="color: #f59e0b; font-size: 20px; margin-bottom: 16px;"></div><p style="font-size: 16px; line-height: 1.7; color: #495157; margin-bottom: 24px; font-style: italic;" data-gjs-type="text" data-gjs-editable="true">"Excellent service and amazing results. Highly recommended!"</p><div style="display: flex; align-items: center; gap: 16px;"><div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 20px;">JD</div><div><div style="font-weight: 600; color: #1e1e1e; margin-bottom: 4px;" data-gjs-type="text" data-gjs-editable="true">John Doe</div><div style="font-size: 14px; color: #6b7280;" data-gjs-type="text" data-gjs-editable="true">CEO, Company</div></div></div></div><div style="background: #ffffff; padding: 32px; border-radius: 16px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);" data-gjs-selectable="true" data-gjs-droppable="*"><div style="color: #f59e0b; font-size: 20px; margin-bottom: 16px;"></div><p style="font-size: 16px; line-height: 1.7; color: #495157; margin-bottom: 24px; font-style: italic;" data-gjs-type="text" data-gjs-editable="true">"Outstanding quality and professional team. Very satisfied!"</p><div style="display: flex; align-items: center; gap: 16px;"><div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 20px;">JS</div><div><div style="font-weight: 600; color: #1e1e1e; margin-bottom: 4px;" data-gjs-type="text" data-gjs-editable="true">Jane Smith</div><div style="font-size: 14px; color: #6b7280;" data-gjs-type="text" data-gjs-editable="true">CTO, Tech Corp</div></div></div></div><div style="background: #ffffff; padding: 32px; border-radius: 16px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);" data-gjs-selectable="true" data-gjs-droppable="*"><div style="color: #f59e0b; font-size: 20px; margin-bottom: 16px;"></div><p style="font-size: 16px; line-height: 1.7; color: #495157; margin-bottom: 24px; font-style: italic;" data-gjs-type="text" data-gjs-editable="true">"Best decision we made. Exceeded all expectations!"</p><div style="display: flex; align-items: center; gap: 16px;"><div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 20px;">MJ</div><div><div style="font-weight: 600; color: #1e1e1e; margin-bottom: 4px;" data-gjs-type="text" data-gjs-editable="true">Mike Johnson</div><div style="font-size: 14px; color: #6b7280;" data-gjs-type="text" data-gjs-editable="true">Founder, Startup</div></div></div></div></div></div></section>'}),kt.add("modal",{label:"Modal Popup",category:"Advanced",content:'<div style="padding: 20px; text-align: center;" data-gjs-selectable="true" data-gjs-droppable="*"><button style="padding: 14px 32px; background: #5e72e4; color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s;" data-gjs-type="text" data-gjs-editable="true">Open Modal</button><div style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="background: #ffffff; padding: 40px; border-radius: 16px; max-width: 500px; width: 90%; position: relative; box-shadow: 0 20px 60px rgba(0,0,0,0.3);" data-gjs-selectable="true" data-gjs-droppable="*"><button style="position: absolute; top: 16px; right: 16px; background: transparent; border: none; font-size: 24px; cursor: pointer; color: #6b7280; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: background 0.3s;"></button><h2 style="font-size: 28px; font-weight: 700; margin-bottom: 16px; color: #1e1e1e;" data-gjs-type="text" data-gjs-editable="true">Modal Title</h2><p style="color: #6b7280; line-height: 1.6; margin-bottom: 24px;" data-gjs-type="text" data-gjs-editable="true">This is a modal popup. You can customize the content and styling.</p><button style="padding: 12px 24px; background: #5e72e4; color: white; border: none; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer;" data-gjs-type="text" data-gjs-editable="true">Close</button></div></div></div>'}),kt.add("countdown-timer",{label:"Countdown Timer",category:"Advanced",content:'<div class="ziplofy-countdown-timer" data-countdown-days="30" data-countdown-hours="12" data-countdown-minutes="45" data-countdown-seconds="30" style="padding: 40px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 16px; text-align: center; color: #ffffff;" data-gjs-selectable="true" data-gjs-droppable="*"><h2 style="font-size: 32px; font-weight: 700; margin-bottom: 32px;" data-gjs-type="text" data-gjs-editable="true">Limited Time Offer</h2><div style="display: flex; justify-content: center; gap: 20px; flex-wrap: wrap;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="background: rgba(255,255,255,0.2); backdrop-filter: blur(10px); padding: 20px; border-radius: 12px; min-width: 100px;"><div class="countdown-days" style="font-size: 48px; font-weight: 800; line-height: 1;">30</div><div style="font-size: 14px; margin-top: 8px; opacity: 0.9;">Days</div></div><div style="background: rgba(255,255,255,0.2); backdrop-filter: blur(10px); padding: 20px; border-radius: 12px; min-width: 100px;"><div class="countdown-hours" style="font-size: 48px; font-weight: 800; line-height: 1;">12</div><div style="font-size: 14px; margin-top: 8px; opacity: 0.9;">Hours</div></div><div style="background: rgba(255,255,255,0.2); backdrop-filter: blur(10px); padding: 20px; border-radius: 12px; min-width: 100px;"><div class="countdown-minutes" style="font-size: 48px; font-weight: 800; line-height: 1;">45</div><div style="font-size: 14px; margin-top: 8px; opacity: 0.9;">Minutes</div></div><div style="background: rgba(255,255,255,0.2); backdrop-filter: blur(10px); padding: 20px; border-radius: 12px; min-width: 100px;"><div class="countdown-seconds" style="font-size: 48px; font-weight: 800; line-height: 1;">30</div><div style="font-size: 14px; margin-top: 8px; opacity: 0.9;">Seconds</div></div></div></div>'}),kt.add("button-icon",{label:"Button with Icon",category:"Buttons",content:'<div style="padding: 20px; text-align: center;" data-gjs-selectable="true" data-gjs-droppable="*"><button style="display: inline-flex; align-items: center; gap: 12px; padding: 14px 32px; background: #5e72e4; color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s; box-shadow: 0 4px 6px rgba(94,114,228,0.3);" data-gjs-type="text" data-gjs-editable="true"><span style="font-size: 20px;"></span><span>Get Started</span></button></div>'}),kt.add("video-background",{label:"Video Background",category:"Media",content:'<section style="position: relative; height: 500px; overflow: hidden; display: flex; align-items: center; justify-content: center; color: #ffffff;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); z-index: 1;"></div><div style="position: relative; z-index: 2; text-align: center; padding: 40px; max-width: 800px;" data-gjs-selectable="true" data-gjs-droppable="*"><h1 style="font-size: 56px; font-weight: 800; margin-bottom: 24px; line-height: 1.2; text-shadow: 0 2px 10px rgba(0,0,0,0.3);" data-gjs-type="text" data-gjs-editable="true">Video Background Section</h1><p style="font-size: 20px; margin-bottom: 40px; opacity: 0.95; line-height: 1.6; text-shadow: 0 2px 10px rgba(0,0,0,0.3);" data-gjs-type="text" data-gjs-editable="true">Add your video background here. This section supports video backgrounds.</p><button style="padding: 16px 40px; background: #ffffff; color: #5e72e4; border: none; border-radius: 8px; font-size: 18px; font-weight: 600; cursor: pointer; transition: transform 0.3s; box-shadow: 0 4px 20px rgba(0,0,0,0.2);" data-gjs-type="text" data-gjs-editable="true">Watch Video</button></div></section>'}),kt.add("parallax-section",{label:"Parallax Section",category:"Layout",content:`<section class="ziplofy-parallax-section" style="position: relative; min-height: 600px; overflow: hidden; display: flex; align-items: center; justify-content: center;" data-gjs-selectable="true" data-gjs-droppable="*"><div class="parallax-background" style="position: absolute; top: -20%; left: 0; width: 100%; height: 140%; background-image: linear-gradient(135deg, rgba(102,126,234,0.9) 0%, rgba(118,75,162,0.9) 100%), url('https://via.placeholder.com/1920x1080'); background-size: cover; background-position: center; background-repeat: no-repeat; will-change: transform; transform: translateZ(0);"></div><div class="parallax-content" style="position: relative; z-index: 2; text-align: center; color: #ffffff; padding: 80px 40px; max-width: 800px;" data-gjs-selectable="true" data-gjs-droppable="*"><h1 style="font-size: 56px; font-weight: 800; margin-bottom: 24px; line-height: 1.2; text-shadow: 0 4px 20px rgba(0,0,0,0.3);" data-gjs-type="text" data-gjs-editable="true">Parallax Effect</h1><p style="font-size: 20px; margin-bottom: 40px; line-height: 1.6; opacity: 0.95; text-shadow: 0 2px 10px rgba(0,0,0,0.3);" data-gjs-type="text" data-gjs-editable="true">Create stunning parallax scrolling effects with this section.</p><button style="padding: 16px 40px; background: #ffffff; color: #5e72e4; border: none; border-radius: 8px; font-size: 18px; font-weight: 600; cursor: pointer; transition: transform 0.3s; box-shadow: 0 4px 20px rgba(0,0,0,0.2);" data-gjs-type="text" data-gjs-editable="true">Learn More</button></div></section>`}),kt.add("form-advanced",{label:"Advanced Form",category:"Forms",content:`<form style="max-width: 600px; margin: 0 auto; padding: 40px; background: #ffffff; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);" data-gjs-selectable="true" data-gjs-droppable="*"><h2 style="font-size: 32px; font-weight: 700; margin-bottom: 8px; color: #1e1e1e; text-align: center;" data-gjs-type="text" data-gjs-editable="true">Contact Us</h2><p style="text-align: center; color: #6b7280; margin-bottom: 32px; font-size: 16px;" data-gjs-type="text" data-gjs-editable="true">Fill out the form below and we'll get back to you</p><div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 20px;" data-gjs-selectable="true" data-gjs-droppable="*"><input type="text" placeholder="First Name" style="padding: 14px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 14px; transition: border-color 0.3s;" data-gjs-selectable="true" /><input type="text" placeholder="Last Name" style="padding: 14px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 14px; transition: border-color 0.3s;" data-gjs-selectable="true" /></div><input type="email" placeholder="Email Address" style="width: 100%; padding: 14px; margin-bottom: 20px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 14px; transition: border-color 0.3s; box-sizing: border-box;" data-gjs-selectable="true" /><select style="width: 100%; padding: 14px; margin-bottom: 20px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 14px; background: white; cursor: pointer;" data-gjs-selectable="true"><option>Select Subject</option><option>General Inquiry</option><option>Support</option><option>Sales</option></select><textarea placeholder="Your Message" rows="5" style="width: 100%; padding: 14px; margin-bottom: 20px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 14px; resize: vertical; font-family: inherit; box-sizing: border-box;" data-gjs-selectable="true"></textarea><label style="display: flex; align-items: center; gap: 12px; margin-bottom: 24px; cursor: pointer;"><input type="checkbox" style="width: 20px; height: 20px; cursor: pointer;" data-gjs-selectable="true" /><span style="font-size: 14px; color: #6b7280;">I agree to the terms and conditions</span></label><button type="submit" style="width: 100%; padding: 16px; background: linear-gradient(135deg, #5e72e4 0%, #667eea 100%); color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: transform 0.3s, box-shadow 0.3s; box-shadow: 0 4px 15px rgba(94,114,228,0.3);" data-gjs-selectable="true">Send Message</button></form>`}),kt.add("badge",{label:"Badge",category:"Basic",content:'<div style="padding: 20px; display: flex; gap: 12px; flex-wrap: wrap; align-items: center;" data-gjs-selectable="true" data-gjs-droppable="*"><span style="background: #dbeafe; color: #1e40af; padding: 6px 12px; border-radius: 6px; font-size: 14px; font-weight: 600;" data-gjs-type="text" data-gjs-editable="true">New</span><span style="background: #fef3c7; color: #92400e; padding: 6px 12px; border-radius: 6px; font-size: 14px; font-weight: 600;" data-gjs-type="text" data-gjs-editable="true">Featured</span><span style="background: #d1fae5; color: #065f46; padding: 6px 12px; border-radius: 6px; font-size: 14px; font-weight: 600;" data-gjs-type="text" data-gjs-editable="true">Popular</span><span style="background: #fce7f3; color: #831843; padding: 6px 12px; border-radius: 6px; font-size: 14px; font-weight: 600;" data-gjs-type="text" data-gjs-editable="true">Sale</span></div>'}),kt.add("alert",{label:"Alert",category:"Basic",content:'<div style="padding: 20px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="background: #dbeafe; border-left: 4px solid #3b82f6; padding: 16px; border-radius: 8px; display: flex; align-items: start; gap: 12px;" data-gjs-selectable="true" data-gjs-droppable="*"><div style="font-size: 20px; color: #3b82f6;"></div><div style="flex: 1;"><div style="font-weight: 600; color: #1e40af; margin-bottom: 4px;" data-gjs-type="text" data-gjs-editable="true">Information</div><div style="color: #1e3a8a; font-size: 14px; line-height: 1.5;" data-gjs-type="text" data-gjs-editable="true">This is an informational alert. You can customize the message.</div></div></div></div>'}),Object.entries({section:"",container:"","columns-2":"","columns-3":"","columns-4":"",row:"",divider:"",spacer:"",navbar:"","heading-1":"H1","heading-2":"H2","heading-3":"H3","heading-4":"H4",paragraph:"","text-block":"Tx",quote:"",list:"","link-block":"",button:"","button-outline":"","button-text":"Aa",link:"","page-link":"",image:"","image-gallery":"",video:"",icon:"",form:"","form-simple":"","input-text":"T","input-email":"@","input-phone":"","textarea-field":"","form-button":"","input-number":"#","input-password":"","input-date":"","select-dropdown":"",checkbox:"",radio:"",tabs:"",accordion:"",card:"",testimonial:"","pricing-table":"$","google-maps":"",footer:"","hero-section":"","feature-section":"","team-section":"","faq-section":"","blog-card":"","product-card":"","stats-section":"","cta-section":"","social-links":"",breadcrumbs:"",sidebar:"","progress-bar":"",counter:"","image-carousel":"","card-hover":"",timeline:"","testimonials-slider":"",modal:"","countdown-timer":"","button-icon":"","video-background":"","parallax-section":"","form-advanced":"",badge:"",alert:""}).forEach(([Me,ot])=>{const _t=kt.get(Me);_t&&_t.set({media:`<span class="elementor-widget-icon">${ot}</span>`})});const fa=kt&&kt.getAll?kt.getAll().length:0,Ns=kt&&kt.getCategories?kt.getCategories().length:0;console.log(` Blocks registered: ${fa} blocks in ${Ns} categories`),fa===0?console.error(" CRITICAL: No blocks registered! BlockManager might not be initialized correctly."):console.log(" Blocks successfully registered"),[100,300,500,1e3].forEach(Me=>{setTimeout(()=>{const ot=document.getElementById("blocks-panel");if(!ot||!kt||fa===0){Me===1e3&&console.warn(` blocks-panel not ready after ${Me}ms, blocks may not render`);return}const _t=ot.querySelectorAll(".gjs-block");if(_t.length>0&&Me<1e3){console.log(` Blocks already rendered (${_t.length} found), skipping delay ${Me}ms`);return}ot.style.setProperty("display","block","important"),ot.style.setProperty("visibility","visible","important"),ot.style.setProperty("opacity","1","important");const It=ot.closest(".elementor-blocks-wrapper");if(It&&(It.style.setProperty("display","block","important"),It.style.setProperty("visibility","visible","important"),It.style.setProperty("opacity","1","important")),_t.length===0){console.log(` Rendering blocks at ${Me}ms delay...`);try{ot.innerHTML="";const At=kt.getAll?kt.getAll():[],sr=Array.isArray(At)?At:[];console.log(` Found ${sr.length} registered blocks, attempting render...`);let $t;try{$t=kt.render(),console.log(` BlockManager.render() called at ${Me}ms`)}catch(Bt){console.error(" BlockManager.render() threw error:",Bt),$t=null}i.current=!0,setTimeout(()=>{let Bt=ot.querySelectorAll(".gjs-block");if(console.log(` After standard render at ${Me}ms: ${Bt.length} blocks found in DOM`),Bt.length===0&&sr.length>0){console.warn(` BlockManager.render() returned 0 blocks, manually rendering ${sr.length} blocks...`),ot.innerHTML="";const Cr=document.createElement("div");Cr.className="gjs-blocks-c",Cr.style.setProperty("display","flex","important"),Cr.style.setProperty("flex-direction","column","important"),Cr.style.setProperty("gap","0","important"),Cr.style.setProperty("padding","0","important"),Cr.style.setProperty("background","#ffffff","important"),Cr.style.setProperty("width","100%","important");const Lt={};sr.forEach(dr=>{try{const Or=(dr.get?dr.get("category"):dr.category||"Basic")||"Basic";Lt[Or]||(Lt[Or]=[]),Lt[Or].push(dr)}catch(Dr){console.warn("Error getting block category:",Dr),Lt.Basic||(Lt.Basic=[]),Lt.Basic.push(dr)}}),console.log(` Grouped blocks into ${Object.keys(Lt).length} categories:`,Object.keys(Lt)),Object.entries(Lt).forEach(([dr,Dr])=>{const Or=document.createElement("div");Or.className="gjs-block-category",Or.setAttribute("data-open","true");const Zr=document.createElement("div");Zr.className="gjs-block-category-title",Zr.textContent=dr,Zr.style.cursor="pointer",Zr.style.padding="12px 16px",Zr.style.fontSize="11px",Zr.style.fontWeight="600",Zr.style.color="rgba(255, 255, 255, 0.5)",Zr.style.textTransform="uppercase",Zr.style.borderBottom="1px solid rgba(255, 255, 255, 0.05)",Or.appendChild(Zr);const Kr=document.createElement("div");Kr.className="gjs-block-category-blocks",Kr.style.setProperty("display","grid","important"),Kr.style.setProperty("grid-template-columns","repeat(2, 1fr)","important"),Kr.style.setProperty("gap","10px","important"),Kr.style.setProperty("padding","12px","important"),Kr.style.setProperty("background","#ffffff","important"),Dr.forEach(Cn=>{try{const Qr=Cn.getId?Cn.getId():Cn.id||"unknown",Hr=Cn.get?Cn.get("label"):Cn.label||Qr,Qn=Cn.get?Cn.get("media"):Cn.media||"",Jr=document.createElement("div");Jr.className="gjs-block",Jr.setAttribute("data-gjs-type",Qr),Jr.style.setProperty("display","flex","important"),Jr.style.setProperty("align-items","center","important"),Jr.style.setProperty("justify-content","center","important"),Jr.style.setProperty("min-height","90px","important"),Jr.style.setProperty("height","90px","important"),Jr.style.setProperty("max-height","90px","important"),Jr.style.setProperty("background","linear-gradient(145deg, #1e1e26 0%, #1a1a22 100%)","important"),Jr.style.setProperty("border-radius","8px","important"),Jr.style.setProperty("cursor","grab","important"),Jr.style.setProperty("color","#fff","important"),Jr.style.setProperty("font-size","12px","important"),Jr.style.setProperty("font-weight","500","important"),Jr.style.setProperty("width","100%","important"),Jr.style.setProperty("max-width","100%","important"),Jr.style.setProperty("box-sizing","border-box","important"),Jr.style.setProperty("position","relative","important"),Jr.style.setProperty("z-index","1","important"),Qn?Jr.innerHTML=Qn:Jr.textContent=Hr,Jr.addEventListener("mousedown",is=>{if(is.preventDefault(),is.stopPropagation(),kt&&typeof kt.startDrag=="function")kt.startDrag(Cn,is);else if(ve&&ve.BlockManager){const Ln=new MouseEvent("mousedown",{bubbles:!0,cancelable:!0,clientX:is.clientX,clientY:is.clientY});Jr.dispatchEvent(Ln)}}),Kr.appendChild(Jr)}catch(Qr){console.warn("Error creating block element:",Qr)}}),Or.appendChild(Kr),Cr.appendChild(Or)}),ot.appendChild(Cr),Bt=ot.querySelectorAll(".gjs-block"),console.log(` Manually rendered ${Bt.length} blocks in ${Object.keys(Lt).length} categories`)}Bt.length===0&&fa>0&&Me===1e3?(console.error(" CRITICAL: Blocks registered but still not rendered after all attempts!"),console.error("BlockManager state:",{registeredCount:fa,registeredArrayLength:sr.length,hasRender:!!kt.render,panelExists:!!ot,panelVisible:ot.style.display!=="none",panelParent:ot.parentElement?.tagName,panelInnerHTML:ot.innerHTML.substring(0,100)})):Bt.length>0&&console.log(` Successfully rendered ${Bt.length} blocks!`)},300)}catch(At){console.error(` Error rendering blocks at ${Me}ms:`,At)}}},Me)}),ve.on("load",()=>{try{const Me=ve.getWrapper();if(Me){Me.set({droppable:!0,selectable:!0,editable:!1,draggable:!1,hoverable:!1,stylable:!0}),Me.addClass("gjs-wrapper-body");const ot=Me.getId();if(ot){const $t=Me.getStyle();if(ve.CssComposer&&Object.keys($t).length>0){const Bt=ve.CssComposer.getRule(`#${ot}`);if(Bt){const Cr=Bt.get("style");ve.CssComposer.remove(Bt);const Lt=ve.CssComposer.getRule(".gjs-wrapper-body")||ve.CssComposer.add(".gjs-wrapper-body");Lt&&Cr&&(Lt.set("style",{...Lt.get("style"),...Cr}),console.log(" Migrated wrapper styles from ID to class selector"))}}}const _t=Me.getStyle();if(!_t||Object.keys(_t).length===0){const $t=ve.CssComposer;if($t){const Bt=$t.add(".gjs-wrapper-body");Bt&&Bt.set("style",{"min-height":"600px",padding:"40px",background:"#fff"})}}const It=ve.Canvas.getBody();It&&(It.style.margin="0",It.style.padding="0");const At=he;let sr=null;sr=setTimeout(()=>{!te&&l&&(console.warn("Theme load timeout after 30s - forcing completion"),c(!1),b("Theme load timeout. Please refresh the page."))},3e4),(async()=>{try{let $t=null,Bt=!1,Cr=!1;if(At&&!Xe&&/^[0-9a-fA-F]{24}$/.test(At)){Bt=!0;try{const{axiosi:dr}=await Uf(async()=>{const{axiosi:Or}=await Promise.resolve().then(()=>t5);return{axiosi:Or}},void 0),Dr=await dr.get(`/custom-themes/${At}`);if(Dr.data.success&&Dr.data.data){const Or=Dr.data.data,Zr=Or.html||"",Kr=Or.css||"",Cn=_n(Zr);if(Cn&&Cn.length>0)Ze(Cn),vt(Cn[0].id),$t={...Or,html:Cn[0].html||ue,css:Kr};else{const Qr={id:"page-1",name:"Home",html:Zr||ue,css:Kr||""};Ze([Qr]),vt("page-1"),$t={...Or,html:Qr.html,css:Kr}}}}catch(dr){dr?.response?.status===404||dr?.response?.status===400?Cr=!0:console.error("Error loading custom theme:",dr)}}if(!$t&&(Xe||Cr)){Cr||console.log("Loading installed theme...",{themeId:At,shouldLoadInstalledTheme:Xe});const Lt=await lt(Cr);if(Lt){console.log(" Installed theme loaded successfully:",Lt.name);const dr={id:"page-1",name:Lt.name||"Home",html:Lt.html||ue,css:Lt.css||""},Dr=Lt.pages&&Lt.pages.length>0?[dr,...Lt.pages]:[dr];console.log(` Loaded ${Dr.length} pages:`,Dr.map(Or=>Or.name)),Ze(Dr),Nt.current=Dr,vt("page-1"),$t=Lt}else Cr?(console.error(" Theme not found as custom theme (404) and failed to load as installed theme",{themeId:At,ownerId:_e||Fe(),shouldLoadInstalledTheme:Xe,isInstalledMode:le}),x||b("Theme not found. Please check if the theme exists and you have permission to access it.")):(console.error(" Failed to load installed theme - fallbackTheme is null",{themeId:At,ownerId:_e||Fe(),shouldLoadInstalledTheme:Xe,isInstalledMode:le,resolvedStoreId:_e,extractedUserId:Fe()}),x||b("Failed to load theme. Please check the browser console for details.")),console.log("Initializing editor with default content due to theme load failure")}if(te)return;console.log(" Applying theme to editor:",{hasExisting:!!$t,hasHtml:!!$t?.html,hasCss:!!$t?.css,htmlLength:$t?.html?.length,cssLength:$t?.css?.length,themeId:At,isInstalledMode:le,shouldLoadInstalledTheme:Xe});try{$t?.html?(console.log(" Applying existing theme HTML to editor"),ar($t.html,$t.css||"")):(console.warn(" No existing theme found, using default content"),ar(ue,$t?.css||"")),console.log(" Theme content applied to editor successfully")}catch(Lt){if(console.error(" Error applying page to editor:",Lt),console.error("Error stack:",Lt?.stack),!te){console.warn(" Continuing with default content due to apply error");try{ar(ue,"")}catch(dr){console.error(" Failed to apply default content:",dr),b(Lt?.message||"Failed to apply theme content. Editor may still work."),c(!1)}}}setTimeout(()=>{if(te)return;Te("widgets");const Lt=document.getElementById("blocks-panel"),dr=document.querySelector(".elementor-blocks-wrapper");dr&&(dr.style.setProperty("display","block","important"),dr.style.setProperty("visibility","visible","important"),dr.style.setProperty("opacity","1","important")),Lt&&(Lt.style.setProperty("display","block","important"),Lt.style.setProperty("visibility","visible","important"),Lt.style.setProperty("opacity","1","important"))},200),[400,800,1200,2e3].forEach(Lt=>{setTimeout(()=>{const dr=document.getElementById("blocks-panel");if(dr&&ve.BlockManager){const Dr=dr.closest(".elementor-blocks-wrapper");Dr&&(Dr.style.setProperty("display","block","important"),Dr.style.setProperty("visibility","visible","important"),Dr.style.setProperty("opacity","1","important"));const Or=dr.querySelectorAll(".gjs-block"),Zr=dr.innerHTML.trim()==="",Kr=!!dr.querySelector(".gjs-blocks-c");Or.length===0&&(Zr||!Kr)?(console.log(`[Theme Load] Blocks missing at ${Lt}ms, re-rendering...`),dr.style.setProperty("display","block","important"),dr.style.setProperty("visibility","visible","important"),dr.style.setProperty("opacity","1","important"),dr.innerHTML="",ve.BlockManager.render(),i.current=!0,setTimeout(()=>{const Cn=dr.querySelectorAll(".gjs-block");Cn.length>0?(Cn.forEach(Hr=>{Hr&&(Hr.style.display="flex",Hr.style.visibility="visible",Hr.style.opacity="1",Hr.style.pointerEvents="auto",Hr.style.cursor="grab",Hr.style.position="relative",Hr.style.zIndex="1")}),dr.querySelectorAll(".gjs-block-category").forEach(Hr=>{Hr&&(Hr.style.display="block",Hr.style.visibility="visible")}),console.log(`[Theme Load]  Restored ${Cn.length} blocks at ${Lt}ms`)):(console.warn(`[Theme Load]  No blocks found after render at ${Lt}ms`),Lt===2e3&&setTimeout(()=>{dr.querySelectorAll(".gjs-block").length===0&&(console.log("[Theme Load]  Final attempt to restore blocks..."),dr.innerHTML="",ve.BlockManager.render(),i.current=!0)},500))},200)):Or.length>0&&(i.current=!0,Or.forEach(Qr=>{Qr&&(Qr.style.display="flex",Qr.style.visibility="visible",Qr.style.opacity="1",Qr.style.pointerEvents="auto",Qr.style.cursor="grab",Qr.style.position="relative",Qr.style.zIndex="1")}),dr.querySelectorAll(".gjs-block-category").forEach(Qr=>{Qr&&(Qr.style.display="block",Qr.style.visibility="visible")}),console.log(`[Theme Load]  Found ${Or.length} existing blocks at ${Lt}ms`))}},Lt)}),$t?.name&&j($t.name),$t&&At?(H(!0),F(!1)):(H(!1),F(!0)),te||(c(!1),sr&&clearTimeout(sr))}catch($t){if(console.error("Error in editor load handler:",$t),te)return;sr&&clearTimeout(sr);try{ar(ue),te||c(!1)}catch(Bt){console.error("Error applying default content:",Bt),te||(b(Bt?.message||"Failed to load theme"),c(!1))}}finally{sr&&clearTimeout(sr),te||c(!1)}})()}}catch(Me){console.error("Error setting up editor load handler:",Me),loadTimeout&&clearTimeout(loadTimeout),te||(b(Me?.message||"Failed to initialize editor"),c(!1))}});let Ja=0;ve.on("block:drag:start",Me=>{mt=!0,console.log(" Block drag started:",Me?.get?.("label")||"unknown");const ot=ve.getWrapper();if(ot){const _t=ot.get("droppable");console.log("  Wrapper droppable status:",_t),console.log("  Wrapper exists:",!!ot),console.log("  Wrapper components count:",ot.components?.()?.length||0),_t||(console.warn("   Wrapper not droppable! Fixing..."),ot.set("droppable","*"),console.log("   Set wrapper droppable to: *"));const It=ot.getEl?.();It&&(It.style.pointerEvents="auto",It.style.minHeight="600px",console.log("   Wrapper element configured for drops"))}else console.error("   NO WRAPPER FOUND!")}),ve.on("block:drag:stop",Me=>{console.log(" Block drag stopped:",Me?.get?.("label")||"unknown"),setTimeout(()=>{if(mt=!1,Ar.size>0){nr&&(clearTimeout(nr),nr=null);const ot=Array.from(Ar);Ar.clear();const _t=ot.find(It=>{try{const At=It.getParent();return!At||At.get("type")==="wrapper"}catch{return!0}})||ot[0];_t&&setTimeout(()=>{try{ve.select(_t)}catch{}},100)}},300);try{if(!Me)return;setTimeout(()=>{try{const ot=ve.getWrapper();if(!ot)return;const _t=ot.components(),It=_t?_t.length:0;if(Me.get){const At=Me.get("content");if(At){const sr=ot.append(At);if(sr){const $t=Array.isArray(sr)?sr[0]:sr;if($t){$t.set({selectable:!0,hoverable:!0,draggable:!0});const Bt=$t.getEl?.();Bt&&(Bt.style.display="",Bt.style.visibility="visible",Bt.style.opacity="1"),setTimeout(()=>{if(ve.select($t),ve.runCommand("open-sm"),ve.LayerManager&&re==="structure"){const Lt=document.getElementById("layers-panel");Lt&&(document.querySelectorAll(".gjs-layers, .gjs-layer-item, .gjs-layer-item-title").forEach(Dr=>{Dr.closest("#layers-panel")||Dr.remove()}),Lt.innerHTML="",ve.LayerManager.render())}},50);const Cr=ot.components();Ja=Cr?Cr.length:0}}}}}catch(ot){console.error("Error in block:drag:stop:",ot)}},100)}catch(ot){console.error("Error in block:drag:stop handler:",ot)}}),ve.on("component:add",Me=>{try{if(!Me||!Me.collection||!Me.cid)return;if(mt){Ar.add(Me);return}nr&&clearTimeout(nr),Ar.add(Me),nr=setTimeout(()=>{const ot=Array.from(Ar);Ar.clear();const _t=ot.find(Or=>{try{const Zr=Or.getParent();return!Zr||Zr.get("type")==="wrapper"}catch{return!0}})||ot[0];if(!_t)return;const It=_t,At=ve.UndoManager;if(At)try{At.stop()}catch{}const sr=ve.getWrapper();if(sr){const Or=sr.components();Ja=Or?Or.length:0}const $t=It.getAttributes?.()||{},Bt=It.get?.("tagName")?.toLowerCase?.()||"",Cr=$t["data-gjs-droppable"]==="*"||Bt==="form",Lt=Or=>{try{const Zr=Or.getAttributes?.()||{},Kr=Or.get?.("tagName")?.toLowerCase?.()||"",Cn=Zr["data-gjs-droppable"]==="*"||Kr==="form",Qr=Zr["data-gjs-selectable"]!=="false";if(Or.set({selectable:Qr,hoverable:!0,draggable:!0,stylable:!0,droppable:Cn},{silent:!0}),(Zr["data-gjs-editable"]==="true"||Zr["data-gjs-type"]==="text")&&Or.set({editable:!0,type:"text"},{silent:!0}),ve.CssComposer){const Hr=Or.cid||Or.getId?.();if(Hr){let Jr=Or.getClasses().find(is=>is&&!is.startsWith("gjs-"));Jr||(Jr=`gjs-comp-${Hr}`,Or.addClass(Jr))}}}catch{}};Lt(It);const dr=Or=>{try{const Zr=Or.components();Zr&&Zr.length>0&&Zr.forEach(Kr=>{Lt(Kr),dr(Kr)})}catch{}};if(dr(It),At)try{At.start()}catch{}const Dr=It.getEl?.();Dr&&(Dr.style.display="",Dr.style.visibility="visible",Dr.style.opacity="1");try{ve.stopCommand("preview")}catch{}requestAnimationFrame(()=>{try{if(It&&It.cid&&!mt){if(ve.select(It),Dr)try{ve.Canvas.scrollTo(Dr)}catch{}try{ve.runCommand("open-sm"),kn(It,100)}catch{}}setTimeout(()=>{try{if(ve.LayerManager&&re==="structure"){const Or=document.getElementById("layers-panel");Or&&(document.querySelectorAll(".gjs-layers, .gjs-layer-item, .gjs-layer-item-title").forEach(Kr=>{Kr.closest("#layers-panel")||Kr.remove()}),Or.innerHTML="",ve.LayerManager.render(),setTimeout(()=>{if(ve.LayerManager&&re==="structure"){const Kr=document.getElementById("layers-panel");Kr&&(Kr.innerHTML="",ve.LayerManager.render())}},200))}}catch{}},50)}catch{}})},150)}catch(ot){console.error("Error in component:add:",ot)}});const Aa=ve.Commands.get("close-sm");Aa?ve.Commands.add("close-sm",{...Aa,run:function(Me){const ot=document.getElementById("style-panel");ot&&(ot.style.display="block",ot.style.visibility="visible",ot.style.opacity="1");const _t=s.current?.querySelector(".builder-right-panel");_t&&(_t.style.display="flex",_t.style.visibility="visible",_t.style.opacity="1"),Me.runCommand("open-sm")}}):ve.Commands.add("close-sm",{run:function(Me){const ot=document.getElementById("style-panel");ot&&(ot.style.display="block",ot.style.visibility="visible",ot.style.opacity="1");const _t=s.current?.querySelector(".builder-right-panel");_t&&(_t.style.display="flex",_t.style.visibility="visible",_t.style.opacity="1")},stop:function(Me){}});let fs=null,Lr=null,kr=!1,mt=!1,nr=null,Ar=new Set,Rr=null;const kn=(Me,ot=150)=>{fs&&clearTimeout(fs),fs=setTimeout(()=>{if(!Me||!ve.StyleManager)return;if(!(document.querySelector('.elementor-primary-tab-icon[title="Style"]')?.classList.contains("active")||re==="style")){console.log("Style tab not active, skipping StyleManager render");return}const At=Me.cid||Me.getId?.();if(At===Lr&&Rr?.innerHTML.trim()!==""){console.log("Same component already rendered, skipping");return}if(Lr=At,Rr||(Rr=document.getElementById("style-panel")),!Rr){console.warn("Style panel element not found");return}const sr=Rr.closest('.elementor-panel-card[data-panel-type="style"]');if(sr)sr.style.display="flex",sr.style.visibility="visible",sr.style.opacity="1";else{console.warn("Style panel not in correct container, attempting to fix...");const Bt=document.querySelector('.elementor-panel-card[data-panel-type="style"]');if(Bt)Bt.style.display="flex",Bt.style.visibility="visible",Bt.style.opacity="1";else{console.error("Style panel card not found in DOM");return}}Rr.style.display="block",Rr.style.visibility="visible",Rr.style.opacity="1",Rr.style.width="100%",Rr.style.height="100%",Rr.style.minHeight="300px",Me===ve.getWrapper()&&(Me.getClasses().includes("gjs-wrapper-body")||(Me.addClass("gjs-wrapper-body"),console.log(" Added gjs-wrapper-body class to wrapper"))),requestAnimationFrame(()=>{if(!(document.querySelector('.elementor-primary-tab-icon[title="Style"]')?.classList.contains("active")||re==="style")){console.log("Style tab no longer active, aborting render");return}try{console.log(" Rendering StyleManager for component:",At),ve.select(Me),ve.StyleManager.setTarget&&ve.StyleManager.setTarget(Me),Rr.innerHTML="",ve.StyleManager.render(),console.log(" StyleManager.render() called"),ve.StyleManager.setTarget&&ve.StyleManager.setTarget(Me),setTimeout(()=>{if(!te&&Me&&ve.StyleManager){const Cr=Rr.querySelectorAll(".gjs-sm-sector");Cr.forEach(Lt=>{const dr=Lt;dr.classList.remove("gjs-sm-sector--closed"),dr.classList.add("gjs-sm-sector--open");const Dr=dr.querySelector(".gjs-sm-sector-content");Dr&&(Dr.style.cssText="display: block !important; visibility: visible !important; opacity: 1 !important; max-height: none !important;")}),console.log(" StyleManager sectors opened:",Cr.length),ve.StyleManager.render()}},100)}catch(Cr){console.error(" Error rendering Style Manager:",Cr)}})},ot)};let Sn=!1;const Vn=Me=>{(Me.key==="Alt"||Me.keyCode===18)&&(Sn=!0)},zn=Me=>{(Me.key==="Alt"||Me.keyCode===18)&&(Sn=!1)};window.addEventListener("keydown",Vn),window.addEventListener("keyup",zn),Re(()=>{window.removeEventListener("keydown",Vn),window.removeEventListener("keyup",zn)}),ve.on("component:selected",Me=>{try{if(kr)return;if(Sn&&Me)try{const At=Me.getParent();if(At&&At.get("type")!=="wrapper"){kr=!0,requestAnimationFrame(()=>{ve.select(At),setTimeout(()=>{kr=!1},100)});return}}catch(At){console.warn("Error selecting parent:",At)}const ot=Me?.cid||Me?.getId?.()||null;if(ot===Lr){re==="style"&&ve.StyleManager&&kn(Me,50);return}if(kr=!0,Lr=ot,Me&&Me.cid)try{Me.set({stylable:!0},{silent:!0})}catch{}const _t=s.current?.querySelector(".builder-right-panel");_t&&(_t.style.display="flex",_t.style.visibility="visible",_t.style.opacity="1",_t.style.width="300px",_t.style.flexShrink="0");const It=document.getElementById("traits-panel");if(It&&ve.TraitManager){It.style.display="block",It.style.visibility="visible",It.style.opacity="1";const At=Me?.get("tagName")?.toLowerCase();let sr=null,$t=At;try{const Or=Me.getView?.();Or&&Or.el&&Or.el.nodeType===1&&typeof Or.el.querySelector=="function"&&(sr=Or.el,$t=sr.tagName?.toLowerCase()||At)}catch(Or){console.warn("Could not get view element:",Or)}let Bt=$t==="button"||At==="button",Cr=$t==="a"||At==="a";if(!Bt&&!Cr&&sr&&typeof sr.querySelector=="function"){const Or=sr.querySelector("button"),Zr=sr.querySelector("a");if(Or){Bt=!0;try{const Kr=ve.Components.getComponent?ve.Components.getComponent(Or):null;Kr&&Kr.cid!==Me.cid&&(Me=Kr,requestAnimationFrame(()=>{kr=!0,ve.select(Kr),setTimeout(()=>{kr=!1},100)}))}catch{console.log("Could not get button component, using wrapper")}}else if(Zr){Cr=!0;try{const Kr=ve.Components.getComponent?ve.Components.getComponent(Zr):null;Kr&&Kr.cid!==Me.cid&&(Me=Kr,requestAnimationFrame(()=>{kr=!0,ve.select(Kr),setTimeout(()=>{kr=!1},100)}))}catch{console.log("Could not get link component, using wrapper")}}}const Lt=Nt.current;let dr=$t==="img"||At==="img",Dr=Me;if(!dr&&sr&&typeof sr.querySelector=="function"){const Or=sr.querySelector("img");if(Or){dr=!0;try{const Zr=ve.Components.getComponent?ve.Components.getComponent(Or):null;Zr&&Zr.cid!==Me.cid&&(Dr=Zr,requestAnimationFrame(()=>{kr=!0,ve.select(Zr),setTimeout(()=>{kr=!1},100)}))}catch{console.log("Could not get image component, using wrapper")}}}if(dr){re!=="widgets"&&Te("widgets");const Or=Dr.get("traits")||[],Zr=Or.some(Cn=>typeof Cn=="object"&&Cn.name==="src"||Cn==="src"),Kr=Or.some(Cn=>typeof Cn=="object"&&Cn.name==="alt"||Cn==="alt");if(!Zr||!Kr){const Cn=[];Zr||Cn.push({type:"text",name:"src",label:"Image URL",placeholder:"https://example.com/image.jpg",changeProp:!0}),Kr||Cn.push({type:"text",name:"alt",label:"Alt Text",placeholder:"Image description",changeProp:!0});const Qr=Or.filter(Ln=>typeof Ln=="string"?Ln!=="src"&&Ln!=="alt":Ln.name!=="src"&&Ln.name!=="alt");Dr.set("traits",[...Qr,...Cn]),setTimeout(()=>{ve.TraitManager&&typeof ve.TraitManager.render=="function"&&ve.TraitManager.render()},50);const Hr=Dr.getAttributes?.()||{},Qn=Hr.src||Dr.get("src")||"",Jr=Hr.alt||Dr.get("alt")||"";Qn&&!Dr.get("src")&&Dr.set("src",Qn),Jr&&!Dr.get("alt")&&Dr.set("alt",Jr);const is=()=>{const Ln=Dr.get("src")||"",Ko=Dr.get("alt")||"";if(Ln){Dr.addAttributes({src:Ln});const en=Dr.getView();if(en&&en.el){en.el.setAttribute("src",Ln);const ga=en.el.tagName==="IMG"?en.el:en.el.querySelector("img");ga&&ga.setAttribute("src",Ln)}}if(Ko!==void 0){Dr.addAttributes({alt:Ko});const en=Dr.getView();if(en&&en.el){en.el.setAttribute("alt",Ko);const ga=en.el.tagName==="IMG"?en.el:en.el.querySelector("img");ga&&ga.setAttribute("alt",Ko)}}Dr.trigger("change"),ve.trigger("component:update",Dr)};Dr._updateImageAttributes=is,Dr.on("change:src",()=>{const Ln=Dr._updateImageAttributes;Ln&&setTimeout(Ln,50)}),Dr.on("change:alt",()=>{const Ln=Dr._updateImageAttributes;Ln&&setTimeout(Ln,50)})}}if(Bt||Cr){re!=="widgets"&&Te("widgets");const Or=Me.get("traits")||[],Zr=Or.some(Qr=>typeof Qr=="object"&&Qr.name==="linkType"||Qr==="linkType"),Kr=Or.some(Qr=>typeof Qr=="object"&&Qr.name==="pageLink"||Qr==="pageLink"),Cn=Qr=>{if(!Qr)return;const Hr=[{id:"",value:"",name:"-- Select Page --"},...(Lt||[]).map(Qn=>({id:Qn.id,value:Qn.id,name:Qn.name}))];Qr.set?Qr.set("options",Hr):Qr.options&&(Qr.options=Hr)};if(!Zr){const Qr=[{type:"select",name:"linkType",label:Bt?"Button Action":"Link Type",options:Bt?[{id:"none",value:"none",name:"No Action"},{id:"page",value:"page",name:"Navigate to Page"},{id:"url",value:"url",name:"Open URL"}]:[{id:"page",value:"page",name:"Link to Page"},{id:"url",value:"url",name:"External URL"}],changeProp:!0},{type:"select",name:"pageLink",label:"Select Page",options:[{id:"",value:"",name:"-- Select Page --"},...(Lt||[]).map(en=>({id:en.id,value:en.id,name:en.name}))],changeProp:!0},{type:"text",name:"href",label:"URL",placeholder:"https://example.com or #page-1",changeProp:!0}],Hr=Or.filter(en=>typeof en=="string"?en!=="id"&&en!=="title"&&en!=="linkType"&&en!=="pageLink":en.name!=="id"&&en.name!=="title"&&en.name!=="linkType"&&en.name!=="pageLink"&&en.name!=="href");Me.set("traits",[...Hr,...Qr]),setTimeout(()=>{ve.TraitManager&&typeof ve.TraitManager.render=="function"&&ve.TraitManager.render()},50);const Qn=Me.getAttributes?.()||{},Jr=Qn.href||Me.get("href")||"",is=Qn["data-page-link"]||"";is?(Me.set("linkType","page"),Me.set("pageLink",is),Me.set("href",`#page-${is}`)):Jr&&Jr!=="#"&&!Jr.startsWith("#")?(Me.set("linkType","url"),Me.set("href",xe(Jr))):Bt?Me.set("linkType","none"):Me.set("linkType","page");const Ln=()=>{const en=Me.get("linkType"),ga=document.getElementById("traits-panel");ga&&ga.querySelectorAll(".gjs-trt-trait").forEach(aa=>{const Da=aa.querySelector("label, .gjs-trt-trait__label");if(Da){const Do=Da.textContent||"";Do.includes("Select Page")?aa.style.display=en==="page"?"block":"none":Do.includes("URL")&&!Do.includes("Select")&&(aa.style.display=en==="url"?"block":"none")}})};Me._updateTraitVisibility=Ln,setTimeout(()=>{if(ve.TraitManager){ve.select(Me),typeof ve.TraitManager.render=="function"&&ve.TraitManager.render();const en=document.getElementById("traits-panel");if(en){en.style.display="block",en.style.visibility="visible",en.style.opacity="1",setTimeout(Ln,100);const ga=new MutationObserver(()=>{Ln()});ga.observe(en,{childList:!0,subtree:!0}),Me._traitVisibilityObserver=ga}}},150);const Ko=()=>{const en=Me.get("linkType"),ga=Me.get("pageLink"),hs=Me.get("href");if(en==="page")if(ga&&ga.trim()!==""){const aa=ga.replace(/^#/,"").trim();Me.addAttributes({"data-page-link":aa}),Me.set("href",`#${aa}`);const Da=Me.getView();Da&&Da.el&&(Da.el.setAttribute("data-page-link",aa),Da.el.setAttribute("href",`#${aa}`))}else{Me.removeAttributes("data-page-link"),Me.set("href","#");const aa=Me.getView();aa&&aa.el&&(aa.el.removeAttribute("data-page-link"),aa.el.setAttribute("href","#"))}else if(en==="url"){Me.removeAttributes("data-page-link");const aa=hs?xe(hs):"";if(aa){Me.set("href",aa);const Da=Me.getView();Da&&Da.el&&Da.el.setAttribute("href",aa)}else{Me.set("href","#");const Da=Me.getView();Da&&Da.el&&Da.el.setAttribute("href","#")}}else en==="none"&&(Me.removeAttributes("data-page-link"),Me.removeAttributes("href"));Me.trigger("change"),ve.trigger("component:update",Me)};if(Me._updateNavigationAttributes=Ko,Me._updateTraitVisibility=Ln,Me.on("change:linkType",()=>{const en=Me._updateNavigationAttributes;en&&setTimeout(en,50);const ga=Me._updateTraitVisibility;ga&&setTimeout(ga,100),setTimeout(()=>{ve.TraitManager&&(ve.select(Me),typeof ve.TraitManager.render=="function"&&ve.TraitManager.render(),ga&&setTimeout(ga,50))},150)}),Me.on("change:pageLink",()=>{const en=Me._updateNavigationAttributes;en&&setTimeout(en,50)}),Me.on("change:href",()=>{const en=Me._updateNavigationAttributes;en&&setTimeout(en,50)}),ve.TraitManager){const en=ve.TraitManager,ga=en?.updateTarget;ga&&(en.updateTarget=function(hs){const aa=ga.call(this,hs);return hs&&hs===Me&&setTimeout(()=>{const Da=hs._updateNavigationAttributes;Da&&Da()},100),aa}),ve.on("trait:update",(hs,aa)=>{aa&&(aa===Me||aa.cid&&Me.cid&&aa.cid===Me.cid)&&setTimeout(()=>{const Da=aa.get("linkType"),Do=aa.get("pageLink"),Fo=aa.get("href");Da!==void 0&&Me.set("linkType",Da),Do!==void 0&&Me.set("pageLink",Do),Fo!==void 0&&Me.set("href",Fo);const Ia=aa._updateNavigationAttributes;Ia&&Ia()},50)})}}setTimeout(()=>{if(ve.TraitManager){(ve.TraitManager.getTraits?ve.TraitManager.getTraits(Me):[]).forEach(Qn=>{Qn&&(Qn.get?.("name")==="pageLink"||Qn.name==="pageLink")&&Cn(Qn)}),typeof ve.TraitManager.render=="function"&&ve.TraitManager.render();const Hr=Me._updateTraitVisibility;Hr&&setTimeout(Hr,50)}},100)}}if(re==="style"&&kn(Me),ve.TraitManager&&(ve.select(Me),setTimeout(()=>{typeof ve.TraitManager.render=="function"&&ve.TraitManager.render();const At=document.getElementById("traits-panel");if(At){At.style.display="block",At.style.visibility="visible",At.style.opacity="1";const sr=ve.TraitManager.render();sr&&At!==sr.parentNode&&(At.innerHTML="",At.appendChild(sr));const $t=()=>{document.querySelectorAll("#traits-panel input, #traits-panel select, #traits-panel textarea").forEach(Lt=>{Lt&&(Lt.style.pointerEvents="auto",Lt.style.cursor=Lt.tagName==="SELECT"?"pointer":"text",Lt.style.zIndex="1",Lt.style.position="relative",Lt.disabled=!1,Lt.readOnly=!1,Lt.addEventListener("input",()=>{if(Me){const dr=Me._updateNavigationAttributes;dr&&setTimeout(dr,50)}}),Lt.addEventListener("change",()=>{if(Me){const dr=Me._updateNavigationAttributes;dr&&setTimeout(dr,50)}}))})};$t();const Bt=document.getElementById("traits-panel");if(Bt){const Cr=new MutationObserver(()=>{$t()});Cr.observe(Bt,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style","disabled","readonly"]}),Me._traitObserver=Cr}}},200)),Me){const At=Me.getAttributes?.()||{};(At["data-gjs-editable"]==="true"||At["data-gjs-type"]==="text")&&Me.set({editable:!0},{silent:!0}),Me.set({stylable:!0,selectable:!0,hoverable:!0},{silent:!0})}requestAnimationFrame(()=>{if(te){kr=!1;return}re!=="style"&&Te("style");const At=document.getElementById("style-panel");At&&(At.style.display="block",At.style.visibility="visible",At.style.opacity="1");const sr=s.current?.querySelector(".builder-right-panel");sr&&(sr.style.display="flex",sr.style.visibility="visible",sr.style.opacity="1");try{ve.runCommand("open-sm")}catch{}kn(Me,50),setTimeout(()=>{kr=!1},150)})}catch(ot){console.warn("Component selected error:",ot),kr=!1}}),ve.on("component:deselected",()=>{Lr=null}),ve.on("component:update",()=>{S||F(!0)}),ve.on("component:add",()=>{S||F(!0)}),ve.on("component:remove",()=>{S||F(!0)}),ve.on("style:property:update",(Me,ot,_t)=>{S||F(!0);try{const It=_t||ve.getSelected();if(It){if(It.set({stylable:!0},{silent:!0}),It===ve.getWrapper()){if(It.getClasses().includes("gjs-wrapper-body")||It.addClass("gjs-wrapper-body"),Me&&ot!==void 0&&ve.CssComposer){const $t=ve.CssComposer.getRule(".gjs-wrapper-body")||ve.CssComposer.add(".gjs-wrapper-body");if($t){const Bt=$t.get("style")||{};Bt[Me]=ot,$t.set("style",Bt),console.log(` Wrapper ${Me} set via CSS rule:`,ot)}}}else if(Me&&ot!==void 0){if(typeof It.addStyle=="function")It.addStyle(Me,ot);else{const sr=It.getStyle()||{};sr[Me]=ot,It.setStyle(sr)}if(ve.CssComposer){const sr=It.cid||It.getId?.();if(sr){let Bt=It.getClasses().find(dr=>dr&&!dr.startsWith("gjs-"));if(!Bt){const dr=It.get("tagName")?.toLowerCase()||"div";Bt=`gjs-comp-${sr}`,It.addClass(Bt)}const Cr=`.${Bt}`;let Lt=ve.CssComposer.getRule(Cr);if(Lt||(Lt=ve.CssComposer.add(Cr)),Lt){const dr=Lt.get("style")||{};dr[Me]=ot,Lt.set("style",dr)}}}}requestAnimationFrame(()=>{try{It.getEl?.()&&(It.view?.updateStyle&&It.view.updateStyle(),It.trigger("change:style"),ve.refresh(),It.trigger("component:update"))}catch(sr){console.warn("Error updating component view:",sr)}})}}catch(It){console.warn("Style property update error:",It)}}),ve.on("style:change",(Me,ot)=>{try{const _t=ot||ve.getSelected();_t&&(_t.set({stylable:!0}),_t.view?.updateStyle?.(),_t.trigger("change:style"),ve.refresh())}catch(_t){console.warn("Style change error:",_t)}}),ve.on("component:styleUpdate",Me=>{try{if(S||F(!0),Me){if(Me.set({stylable:!0},{silent:!0}),Me===ve.getWrapper()){Me.getClasses().includes("gjs-wrapper-body")||Me.addClass("gjs-wrapper-body");const It=Me.getStyle();if(It&&Object.keys(It).length>0&&ve.CssComposer){const At=ve.CssComposer.getRule(".gjs-wrapper-body");if(At)At.set("style",It);else{const sr=ve.CssComposer.add(".gjs-wrapper-body");sr&&sr.set("style",It)}console.log(" Wrapper styles saved as CSS rule:",It)}}Me.view?.updateStyle?.(),ve.refresh()}}catch(ot){console.warn("Component style update error:",ot)}}),ve.on("component:dblclick",Me=>{try{if(!Me)return;const ot=Me.get("tagName")?.toLowerCase(),_t=Me.get("type"),It=Me.getAttributes?.()||{},At=Me.get("content")||"",$t=["p","h1","h2","h3","h4","h5","h6","span","a","label","li","td","th","button","strong","em","b","i","u","small","sub","sup","blockquote","cite"].includes(ot),Bt=typeof At=="string"&&At.trim().length>0&&!Me.components().length;(It["data-gjs-editable"]==="true"||It["data-gjs-type"]==="text"||_t==="text"||$t||Bt)&&(Me.get("editable")||Me.set({editable:!0,type:"text"}),ve.runCommand("core:component-edit",{force:!0}))}catch(ot){console.warn("Error enabling double-click editing:",ot)}});let Kn=null,ro=0;const ps=50,Yn=(Me=!1)=>{try{if(re!=="style")return;const ot=Date.now();if(!Me&&ot-ro<ps){Kn&&cancelAnimationFrame(Kn),Kn=requestAnimationFrame(()=>Yn(!0));return}if(ro=ot,Kn&&(cancelAnimationFrame(Kn),Kn=null),Rr||(Rr=document.getElementById("style-panel")),!Rr||!ve.StyleManager)return;const _t=Rr,It=_t.querySelectorAll(".gjs-sm-sector");if(It.length>0&&It.length<=13&&!Me||(It.length>13&&(_t.innerHTML=""),!(Me||It.length===0||It.length>13)))return;if(typeof ve.StyleManager.render=="function"){const $t=ve.getSelected()||ve.getWrapper();if($t)try{if($t.set({stylable:!0},{silent:!0}),ve.CssComposer&&$t!==ve.getWrapper()){const Bt=$t.cid||$t.getId?.();if(Bt){let Lt=$t.getClasses().find(dr=>dr&&!dr.startsWith("gjs-"));Lt||(Lt=`gjs-comp-${Bt}`,$t.addClass(Lt))}}ve.StyleManager.setTarget&&ve.StyleManager.setTarget($t)}catch{}re==="style"&&(_t.innerHTML="",ve.StyleManager.render()),$t&&ve.StyleManager.setTarget&&ve.StyleManager.setTarget($t)}}catch(ot){console.warn("Error rendering Style Manager:",ot)}};ve.on("component:update",Me=>{try{if(!Me)return;const ot=Me.getAttributes?.()||{};(ot["data-gjs-editable"]==="true"||ot["data-gjs-type"]==="text")&&Me.set({editable:!0,selectable:!0},{silent:!0}),Me.set({stylable:!0},{silent:!0})}catch{}}),ve.on("style:custom",(Me,ot,_t)=>{try{const It=_t||ve.getSelected();if(It&&Me&&ot!==void 0){if(It.set({stylable:!0},{silent:!0}),typeof It.addStyle=="function")It.addStyle(Me,ot);else{const At=It.getStyle()||{};At[Me]=ot,It.setStyle(At)}if(ve.CssComposer){const At=It.cid||It.getId?.();if(At){let $t=It.getClasses().find(Lt=>Lt&&!Lt.startsWith("gjs-"));$t||($t=`gjs-comp-${At}`,It.addClass($t));const Bt=`.${$t}`;let Cr=ve.CssComposer.getRule(Bt);if(Cr||(Cr=ve.CssComposer.add(Bt)),Cr){const Lt=Cr.get("style")||{};Lt[Me]=ot,Cr.set("style",Lt)}}}requestAnimationFrame(()=>{It.view?.updateStyle?.(),It.trigger("change:style"),ve.refresh()})}}catch(It){console.warn("Style custom error:",It)}});let qn=null;ve.on("change",()=>{qn&&clearTimeout(qn),qn=setTimeout(()=>{try{const Me=ve.getSelected();if(Me&&ve.StyleManager){const ot=Me.getStyle();ot&&Object.keys(ot).length>0&&(Me.view?.updateStyle?.(),ve.refresh())}}catch{}},100)});const Zn=()=>{if(te)return;const Me=s.current?.querySelector(".builder-right-panel");Me&&(Me.style.display="flex",Me.style.visibility="visible",Me.style.opacity="1",Me.style.width="300px",Me.style.flexShrink="0");const ot=document.getElementById("style-panel");ot&&(ot.style.display="block",ot.style.visibility="visible",ot.style.opacity="1",ot.style.width="100%")},ka=()=>{try{s.current&&(ve.getEl?.()?.classList.contains("gjs-fullscreen")||document.querySelector(".gjs-editor.gjs-fullscreen")!==null?(s.current.classList.add("gjs-fullscreen"),setTimeout(()=>{try{s.current?.querySelectorAll("button")?.forEach(Lt=>{Lt&&(Lt.style.display="flex",Lt.style.visibility="visible",Lt.style.opacity="1",Lt.style.pointerEvents="auto",Lt.style.cursor="pointer",Lt.style.zIndex="10001")}),s.current?.querySelectorAll("input, select, textarea")?.forEach(Lt=>{Lt&&(Lt.style.display="block",Lt.style.visibility="visible",Lt.style.opacity="1",Lt.style.pointerEvents="auto",Lt.style.zIndex="10001")});const At=s.current?.querySelector(".builder-left-panel"),sr=s.current?.querySelector(".builder-right-panel"),$t=s.current?.querySelector(".builder-center-panel");At&&(At.style.display="flex",At.style.visibility="visible",At.style.opacity="1",At.style.pointerEvents="auto",At.style.width="280px",At.style.zIndex="10001"),sr&&(sr.style.display="flex",sr.style.visibility="visible",sr.style.opacity="1",sr.style.pointerEvents="auto",sr.style.width="300px",sr.style.zIndex="10001"),$t&&($t.style.display="flex",$t.style.visibility="visible",$t.style.opacity="1",$t.style.pointerEvents="auto");const Bt=s.current?.querySelector("#style-panel");if(Bt&&ve.StyleManager){Bt.style.display="block",Bt.style.visibility="visible",Bt.style.opacity="1",Bt.style.background="#1e1e1e",Bt.style.minHeight="200px";const Lt=Bt.querySelectorAll(".gjs-sm-sector");(Lt.length===0||Lt.length<13)&&re==="style"&&typeof ve.StyleManager.render=="function"&&ve.StyleManager.render(),setTimeout(()=>{Bt.querySelectorAll(".gjs-sm-sector").forEach(Dr=>{Dr&&(Dr.style.display="block",Dr.style.visibility="visible",Dr.style.opacity="1")})},100)}const Cr=s.current?.querySelector(".panel__devices");Cr&&(Cr.style.display="flex",Cr.style.visibility="visible",Cr.style.opacity="1",Cr.style.pointerEvents="auto")}catch(_t){console.warn("Error ensuring fullscreen elements visibility:",_t)}},50)):s.current.classList.remove("gjs-fullscreen"))}catch{}},ks=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],La=()=>{te||ka()};ks.forEach(Me=>{document.addEventListener(Me,La,{passive:!0}),Re(()=>document.removeEventListener(Me,La))}),ka(),ve.on("load",()=>{setTimeout(ka,100);try{const Me=ve.getDevice();Me&&A(Me)}catch{}}),ve.on("change:device",()=>{try{const Me=ve.getDevice();Me&&A(Me),wa()}catch{}}),ve.on("run:fullscreen",()=>{setTimeout(()=>{try{const Me=document.getElementById("style-panel");Me&&ve.StyleManager&&(Me.style.display="block",Me.style.visibility="visible",Me.style.opacity="1",Me.style.background="#1e1e1e",re==="style"&&typeof ve.StyleManager.render=="function"&&ve.StyleManager.render(),setTimeout(()=>{Me.querySelectorAll(".gjs-sm-sector").forEach(_t=>{_t&&(_t.style.display="block",_t.style.visibility="visible",_t.style.opacity="1")})},100))}catch(Me){console.warn("Error rendering Style Manager on fullscreen:",Me)}},200)});const wa=()=>{if(!te)try{const Me=document.querySelector(".panel__devices");Me&&Me.querySelectorAll("button").forEach(_t=>{_t&&(_t.style.display="flex",_t.style.visibility="visible",_t.style.opacity="1")})}catch{}},Xn=(Me=!1)=>{if(te)return;const ot=ve.BlockManager;if(!ot){console.warn(" BlockManager not available in renderBlocks");return}const _t=ot.getAll?ot.getAll():[],It=Array.isArray(_t)?_t.length:0;if(It===0){console.error(" CRITICAL: No blocks registered in BlockManager! Cannot render.");return}if(console.log(` renderBlocks called: ${It} blocks registered, force=${Me}`),!Me&&i.current){const sr=document.getElementById("blocks-panel")?.querySelectorAll(".gjs-block");if(sr&&sr.length>0){console.log(` Blocks already rendered (${sr.length} found), skipping`);return}console.log(" blocksRenderedRef is true but no blocks in DOM, re-rendering...")}try{const At=document.getElementById("blocks-panel");if(!At){console.warn(" blocks-panel not found, retrying..."),setTimeout(()=>Xn(Me),200);return}const sr=At.closest(".elementor-blocks-wrapper");if(sr){const Lt=sr,dr=window.getComputedStyle(Lt);if(Lt.style.setProperty("display","block","important"),Lt.style.setProperty("visibility","visible","important"),Lt.style.setProperty("opacity","1","important"),window.getComputedStyle(Lt).display==="none"){console.error("Wrapper is still hidden after forcing visibility!"),setTimeout(()=>Xn(Me),100);return}}At.style.setProperty("display","block","important"),At.style.setProperty("visibility","visible","important"),At.style.setProperty("opacity","1","important"),At.style.setProperty("min-height","200px","important"),At.innerHTML="";const $t=document.querySelectorAll("#blocks-panel");if($t.length>1)for(let Lt=1;Lt<$t.length;Lt++)$t[Lt].remove();const Bt=ve.BlockManager.getAll?ve.BlockManager.getAll():[],Cr=Array.isArray(Bt)?Bt.length:0;if(Cr===0){console.error(" CRITICAL: No blocks registered in BlockManager! Cannot render."),console.error("BlockManager state:",{hasGetAll:!!ve.BlockManager.getAll,hasRender:!!ve.BlockManager.render,hasGetCategories:!!ve.BlockManager.getCategories});return}console.log(` Rendering ${Cr} registered blocks into blocks-panel...`);try{const Lt=ve.BlockManager.getAll?ve.BlockManager.getAll():[],dr=Array.isArray(Lt)?Lt:[];console.log(` renderBlocks: Attempting to render ${dr.length} registered blocks...`);const Dr=ve.BlockManager.render();console.log(" BlockManager.render() called successfully"),i.current=!0,setTimeout(()=>{At.querySelectorAll(".gjs-block").length===0&&dr.length>0&&(console.warn(" BlockManager.render() returned 0 blocks, using manual render fallback..."),renderBlocksManually(At,dr,ve.BlockManager,ve))},200)}catch(Lt){console.error(" Error calling BlockManager.render():",Lt),i.current=!1}setTimeout(()=>{const Lt=document.getElementById("blocks-panel");if(Lt){const dr=Lt.querySelectorAll(".gjs-block"),Dr=Lt.querySelectorAll(".gjs-block-category-blocks"),Or=Lt.querySelectorAll(".gjs-block-category");if(console.log(` After render: ${dr.length} blocks, ${Dr.length} category containers, ${Or.length} categories`),dr.length===0&&Cr>0){console.error(" CRITICAL: Blocks were registered but not rendered! Retrying..."),Lt.innerHTML="";try{ve.BlockManager.render(),console.log(" Retry render called")}catch(Hr){console.error(" Retry render failed:",Hr)}return}Dr.forEach(Hr=>{Hr.style.setProperty("display","grid","important"),Hr.style.setProperty("grid-template-columns","repeat(2, 1fr)","important"),Hr.style.setProperty("gap","10px","important"),Hr.style.setProperty("width","100%","important"),Hr.style.setProperty("box-sizing","border-box","important")});const Zr=new Set;dr.forEach(Hr=>{const Qn=Hr.getAttribute("data-gjs-type")+"-"+Hr.textContent;Zr.has(Qn)?Hr.remove():(Zr.add(Qn),Hr.style.setProperty("display","flex","important"),Hr.style.setProperty("visibility","visible","important"),Hr.style.setProperty("opacity","1","important"),Hr.style.setProperty("pointer-events","auto","important"),Hr.style.setProperty("cursor","grab","important"),Hr.style.setProperty("position","relative","important"),Hr.style.setProperty("z-index","1","important"),Hr.style.setProperty("width","100%","important"),Hr.style.setProperty("max-width","100%","important"),Hr.style.setProperty("min-width","0","important"),Hr.style.setProperty("box-sizing","border-box","important"))});const Kr=Lt.querySelectorAll(".gjs-block");console.log(` Final blocks count: ${Kr.length} blocks rendered and visible`),Lt.querySelectorAll(".gjs-block-category").forEach(Hr=>{Hr.style.position="relative",Hr.style.zIndex="1",Hr.style.display="block",Hr.style.visibility="visible";const Qn=Hr.querySelector(".gjs-block-category-title");Qn&&!Qn.hasAttribute("data-toggle-bound")&&(Qn.setAttribute("data-toggle-bound","true"),Qn.addEventListener("click",Jr=>{Jr.preventDefault(),Jr.stopPropagation();const is=Hr.getAttribute("data-open")!=="false",Ln=Hr.querySelector(".gjs-block-category-blocks");is?(Hr.setAttribute("data-open","false"),Ln&&(Ln.style.display="none")):(Hr.setAttribute("data-open","true"),Ln&&(Ln.style.display="grid",Ln.style.setProperty("display","grid","important"),Ln.style.setProperty("grid-template-columns","repeat(2, 1fr)","important"),Ln.style.setProperty("gap","10px","important")))}))});const Qr=Lt.querySelector(".gjs-blocks-c");Qr&&(Qr.style.display="flex",Qr.style.visibility="visible",Qr.style.opacity="1"),requestAnimationFrame(()=>{Lt.querySelectorAll(".gjs-block-category-blocks").forEach(Jr=>{Jr&&(Jr.style.setProperty("display","grid","important"),Jr.style.setProperty("grid-template-columns","repeat(2, 1fr)","important"),Jr.style.setProperty("gap","10px","important"),Jr.style.setProperty("width","100%","important"),Jr.style.setProperty("box-sizing","border-box","important"),Jr.style.setProperty("grid-auto-rows","90px","important"),Jr.style.setProperty("grid-auto-flow","row","important"))}),Lt.querySelectorAll(".gjs-block-category-blocks .gjs-block").forEach(Jr=>{Jr&&(Jr.style.setProperty("width","100%","important"),Jr.style.setProperty("max-width","100%","important"),Jr.style.setProperty("min-width","0","important"),Jr.style.setProperty("box-sizing","border-box","important"))})}),console.log(`Rendered ${dr.length} blocks in 2-column grid`),i.current=!0}},150)}catch(At){console.error("Error rendering blocks:",At)}};ve.on("load",()=>{setTimeout(()=>{Xn(!0)},300),setTimeout(()=>{const ot=document.getElementById("blocks-panel")?.querySelectorAll(".gjs-block");(!ot||ot.length===0)&&(console.log("No blocks found, retrying render..."),Xn(!0))},800),setTimeout(wa,200),setTimeout(()=>{try{const Me=ve.getWrapper();if(Me){const ot=Me.components();let _t=null;if(ot&&ot.length>0){const At=ot.at(0);At&&(ve.select(At),At.set({stylable:!0}),_t=At)}else ve.select(Me),Me.set({stylable:!0}),_t=Me;ve.runCommand("open-sm");const It=document.getElementById("style-panel");It&&ve.StyleManager&&_t&&(It.innerHTML="",ve.StyleManager.setTarget&&ve.StyleManager.setTarget(_t),re==="style"&&typeof ve.StyleManager.render=="function"&&ve.StyleManager.render(),It.style.display="block",It.style.visibility="visible",It.style.opacity="1",It.style.background="#1e1e1e",It.style.minHeight="300px")}}catch(Me){console.warn("Error selecting component on load:",Me)}},250),setTimeout(()=>{Yn(!0)},500)}),setTimeout(wa,400);const Ma=()=>{if(te)return!1;wa();const Me=document.querySelector(".panel__devices");if(!Me)return!1;const ot=new MutationObserver(()=>wa());return ot.observe(Me,{childList:!0,subtree:!0,attributes:!0}),Re(()=>ot.disconnect()),!0},es=()=>{Ma()||te||setTimeout(es,800)};setTimeout(es,500),ve.on("style:target",Me=>{try{Me&&Me.component&&Me.component.set({stylable:!0},{silent:!0})}catch{}}),setTimeout(()=>{if(!te)try{if(ve.LayerManager&&re==="structure"){const Me=document.getElementById("layers-panel");if(Me){document.querySelectorAll(".gjs-layers, .gjs-layer-item, .gjs-layer-item-title").forEach(It=>{It.closest("#layers-panel")||It.remove()}),Me.innerHTML="";const _t=ve.LayerManager.render();_t&&Me&&(typeof _t=="object"&&_t.nodeType&&Me.appendChild(_t),setTimeout(()=>{Bn(ve,Me)},150))}}}catch{}},500);const qr=(()=>{let Me=null;return()=>{te||(Me&&clearTimeout(Me),Me=window.setTimeout(()=>{if(!te)try{if(ve.LayerManager&&typeof ve.LayerManager.render=="function"&&re==="structure"){const ot=document.getElementById("layers-panel");if(ot){document.querySelectorAll(".gjs-layers, .gjs-layer-item, .gjs-layer-item-title").forEach(At=>{At.closest("#layers-panel")||At.remove()}),ot.innerHTML="";const It=ve.LayerManager.render();It&&ot&&(typeof It=="object"&&It.nodeType&&ot.appendChild(It),setTimeout(()=>{Bn(ve,ot),Wr(ve,ot)},150)),setTimeout(()=>{const At=document.getElementById("layers-panel");At&&(Wr(ve,At),At.querySelectorAll(".gjs-lm-layer").forEach($t=>{if($t){const Bt=$t.querySelector(".gjs-lm-title"),Cr=$t.querySelector(".gjs-lm-items");Bt&&Cr&&Cr.children.length>0&&($t.hasAttribute("data-expand-handler")||($t.setAttribute("data-expand-handler","true"),Bt.addEventListener("click",Lt=>{Lt.stopPropagation(),$t.classList.toggle("gjs-lm-open")})))}}))},100)}}}catch{}Me=null},250))}})();["component:add","component:remove","component:update","component:styleUpdate","component:selected"].forEach(Me=>{const ot=()=>qr();ve.on(Me,ot),Re(()=>ve.off(Me,ot))}),qr();const cn=()=>{if(te)return!1;Zn();const Me=[];let ot=!1;const _t=s.current?.querySelector(".builder-right-panel");if(_t){const It=new MutationObserver(()=>Zn());It.observe(_t,{attributes:!0,attributeFilter:["style","class"]}),Me.push(It),ot=!0}return Re(()=>{Me.forEach(It=>It.disconnect())}),ot},tn=()=>{cn()||te||setTimeout(tn,800)};setTimeout(tn,600),te||(clearTimeout(Ye),c(!1),console.log(" Editor initialized successfully"))}catch(at){console.error(" Error initializing editor:",at),te||(clearTimeout(Ye),b(at?.message||"Failed to initialize editor. Please check the console for details."),c(!1),t.current&&(t.current.innerHTML=`
              <div style="padding: 40px; text-align: center; color: #6b7280;">
                <h3>Editor Initialization Error</h3>
                <p>${at?.message||"Failed to initialize editor"}</p>
                <button onclick="window.location.reload()" style="margin-top: 20px; padding: 10px 20px; background: #5e72e4; color: white; border: none; border-radius: 6px; cursor: pointer;">
                  Reload Page
                </button>
              </div>
            `))}})(),()=>{if(te=!0,clearTimeout(Ye),je.forEach(at=>{try{at()}catch{}}),document.getElementById("style-panel"),o.current){try{o.current.destroy()}catch{}o.current=null}}},[]),f.useEffect(()=>{if(!t.current&&!o.current){const te=setTimeout(()=>{t.current&&!o.current&&console.log(" EditorRef became available, editor should initialize now")},100);return()=>clearTimeout(te)}},[t.current]),f.useEffect(()=>{const te=document.getElementById("blocks-panel");if(!te)return;const je=te.querySelectorAll(".gjs-block");if(je.length===0)return;const Re=V.trim().toLowerCase(),Ye=te.querySelectorAll(".gjs-block-category");je.forEach(at=>{const jt=(at.textContent||"").toLowerCase(),Qe=!Re||jt.includes(Re);at.style.display=Qe?"flex":"none",at.style.visibility=Qe?"visible":"hidden",Qe&&(at.style.width="100%",at.style.maxWidth="100%",at.style.minWidth="0")}),Ye.forEach(at=>{const jt=!!at.querySelector('.gjs-block[style*="display: flex"]');at.style.display=jt?"block":"none"})},[V]),f.useEffect(()=>{const te=document.getElementById("blocks-panel");if(!te)return;const je=()=>{te.querySelectorAll(".gjs-block-category").forEach(at=>{const jt=at.querySelector(".gjs-block-category-title");jt&&!jt.hasAttribute("data-toggle-bound")&&(jt.setAttribute("data-toggle-bound","true"),jt.addEventListener("click",Qe=>{Qe.preventDefault(),Qe.stopPropagation();const $e=at.getAttribute("data-open")!=="false",ve=at.querySelector(".gjs-block-category-blocks");$e?(at.setAttribute("data-open","false"),ve&&(ve.style.display="none")):(at.setAttribute("data-open","true"),ve&&(ve.style.setProperty("display","grid","important"),ve.style.setProperty("grid-template-columns","repeat(2, 1fr)","important"),ve.style.setProperty("gap","10px","important")))}))})};je();const Re=new MutationObserver(()=>{je()});return Re.observe(te,{childList:!0,subtree:!0}),()=>{Re.disconnect()}},[re]);const vr=f.useCallback(te=>new Promise(je=>{const Re=document.createElement("canvas");Re.width=800,Re.height=600;const Ye=Re.getContext("2d");if(!Ye){const Ve=`<svg xmlns="http://www.w3.org/2000/svg" width="800" height="600">
          <defs>
            <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
              <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
            </linearGradient>
          </defs>
          <rect width="800" height="600" fill="url(#grad)"/>
          <text x="400" y="280" font-family="Arial, sans-serif" font-size="48" font-weight="bold" fill="white" text-anchor="middle">${te}</text>
          <text x="400" y="340" font-family="Arial, sans-serif" font-size="24" fill="rgba(255,255,255,0.9)" text-anchor="middle">Custom Theme</text>
        </svg>`,st=new Blob([Ve],{type:"image/svg+xml"});je(st);return}const at=Ye.createLinearGradient(0,0,Re.width,Re.height);at.addColorStop(0,"#667eea"),at.addColorStop(1,"#764ba2"),Ye.fillStyle=at,Ye.fillRect(0,0,Re.width,Re.height),Ye.fillStyle="rgba(255, 255, 255, 0.1)",Ye.beginPath(),Ye.arc(100,100,60,0,Math.PI*2),Ye.fill(),Ye.beginPath(),Ye.arc(700,500,80,0,Math.PI*2),Ye.fill(),Ye.beginPath(),Ye.arc(650,100,40,0,Math.PI*2),Ye.fill(),Ye.fillStyle="#ffffff",Ye.font="bold 56px Arial, sans-serif",Ye.textAlign="center",Ye.textBaseline="middle";const jt=700,Qe=te.split(" ");let $e="",ve=250;for(let Ve=0;Ve<Qe.length;Ve++){const st=$e+Qe[Ve]+" ";Ye.measureText(st).width>jt&&Ve>0?(Ye.fillText($e,Re.width/2,ve),$e=Qe[Ve]+" ",ve+=70):$e=st}Ye.fillText($e,Re.width/2,ve),Ye.font="28px Arial, sans-serif",Ye.fillStyle="rgba(255, 255, 255, 0.9)",Ye.fillText("Custom Theme",Re.width/2,ve+60),Re.toBlob(Ve=>{if(Ve)je(Ve);else{const st=`<svg xmlns="http://www.w3.org/2000/svg" width="800" height="600">
            <defs>
              <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
              </linearGradient>
            </defs>
            <rect width="800" height="600" fill="url(#grad)"/>
            <text x="400" y="280" font-family="Arial, sans-serif" font-size="48" font-weight="bold" fill="white" text-anchor="middle">${te}</text>
            <text x="400" y="340" font-family="Arial, sans-serif" font-size="24" fill="rgba(255,255,255,0.9)" text-anchor="middle">Custom Theme</text>
          </svg>`;je(new Blob([st],{type:"image/svg+xml"}))}},"image/png")}),[]),Rn=f.useCallback(async te=>{try{const je=o.current;if(!je||typeof je.getHtml!="function"){alert("Editor not ready");return}k(!0),await new Promise(ke=>requestAnimationFrame(ke)),br(),await new Promise(ke=>setTimeout(ke,50)),await new Promise(ke=>setTimeout(ke,150));const{pagesSnapshot:Re}=Ur();console.log(" Captured snapshot before save:",{currentPageId:Mt,snapshotPages:Re.map(ke=>({id:ke.id,name:ke.name,htmlLength:ke.html?.length||0,cssLength:ke.css?.length||0}))});const Ye=Re.map(ke=>{const ct=ft.find(bt=>bt.id===ke.id);return{...ke,html:ke.html&&ke.html.trim().length>0?ke.html:ct?.html||ue,css:ke.css&&ke.css.trim().length>0?ke.css:ct?.css||""}});Ze(Ye),Nt.current=Ye;const at=Ye.map(ke=>({id:ke.id,name:ke.name,hasHtml:!!ke.html&&ke.html.trim().length>0,hasCss:!!ke.css&&ke.css.trim().length>0,htmlLength:ke.html?.length||0,cssLength:ke.css?.length||0}));console.log(" Saving theme with pages:",{totalPages:Ye.length,currentPageId:Mt,pages:at,pagesData:Ye.map(ke=>({id:ke.id,name:ke.name,htmlPreview:ke.html?.substring(0,100),cssPreview:ke.css?.substring(0,100)}))}),at.forEach((ke,ct)=>{ke.hasHtml||console.warn(` Page ${ct+1} (${ke.name}) has no HTML content!`),ke.hasCss||console.warn(` Page ${ct+1} (${ke.name}) has no CSS content!`)});const jt=Ye.map(ke=>ke.css||"").filter(Boolean).join(`

`),Qe=rn(Ye,v||"Theme",jt);Qe.match(/ziplofy-pages-data/)?console.log(" Pages data found in export HTML"):console.error(" ERROR: Pages data not found in export HTML!"),console.log(" Built export HTML:",{htmlLength:Qe.length,containsPagesData:Qe.includes("ziplofy-pages-data"),combinedCssLength:jt.length});let ve;const Ve=he&&/^[0-9a-fA-F]{24}$/.test(he);Ve?ve=await vr(v||"My Theme"):ve=await vr(v||"My Theme"),await new Promise(ke=>setTimeout(ke,50));let st=he||"";const Ot=le||Xe;let de=!1;if(Ve&&!Ot)try{const ke=await J(he,v,Qe,jt,ve);ke?st=ke._id:(console.warn("Update returned empty result; will create a new theme instead."),de=!0)}catch(ke){if(ke?.response?.status===404)console.warn("Theme not found while updating (404); creating a new theme instead."),de=!0;else throw ke}else Ot&&(console.log("Editing installed theme - will create a new custom theme"),de=!0);if(!Ve||de){if(he&&!Ve){console.warn(`Invalid theme ID format (${he}). Creating new theme instead.`);try{const Ft=`ziplofy.builder.pages.${he}`;localStorage.removeItem(Ft),console.log("Cleared localStorage for invalid theme ID:",he)}catch(Ft){console.warn("Failed to clear old localStorage:",Ft)}const bt=new URL(window.location.href);bt.searchParams.delete("id"),window.history.replaceState({},"",bt.toString())}const ke=await U(v,Qe,jt,ve);if(!ke)throw new Error("Failed to create theme");st=ke._id;const ct=new URL(window.location.href);ct.searchParams.set("id",st),window.history.replaceState({},"",ct.toString()),jr()}k(!1),setTimeout(()=>{const ke=Nt.current.find(ct=>ct.id===Mt);ke&&o.current&&(console.log(" Refreshing editor with saved state after save..."),ar(ke.html||ue,ke.css||""))},200),te?(localStorage.setItem("ziplofy.appliedCustomThemeId",st),P(!0),H(!0),F(!1),setTimeout(()=>P(!1),3e3)):F(!1)}catch(je){k(!1),console.error("Error saving theme:",je);let Re="Failed to save theme";je?.code==="ECONNABORTED"||je?.message?.includes("timeout")?Re="Upload timeout: The theme is very large. Please try again or reduce the theme size.":je?.response?.status===500?Re="Server error: The theme might be too large or there was a server issue. Please try again or reduce the theme size.":je?.response?.status===413||je?.message?.includes("File too large")||je?.message?.includes("MulterError")?Re="Theme too large: The theme exceeds the maximum size limit (500MB). Please reduce the size of your theme content.":je?.response?.data?.message?Re=je.response.data.message:je?.message&&(Re=je.message),alert(Re)}},[U,Ur,he,v,J,rn,br,Mt,ar]),bn=f.useCallback(()=>{try{const te=o.current;if(!te||typeof te.getHtml!="function"){alert("Editor not ready");return}te.trigger&&te.trigger("update");const je=te.getWrapper();je&&je.view&&je.view.render?.();let Re="";try{je?(Re=te.getHtml({component:je})||"",(!Re||Re.trim().length===0)&&(Re=te.getHtml()||"")):Re=te.getHtml()||"",(!Re||Re.trim().length===0)&&(console.warn(" No HTML from editor, using default"),Re=ue)}catch(st){console.error("Error getting HTML from editor:",st),Re=te.getHtml()||ue}console.log(" Preview - Current HTML length:",Re.length,"Preview:",Re.substring(0,300));let Ye="";if(te.getCss){const st=te.getCss()||"";st&&st.trim().length>0&&(Ye=st,console.log(" Got CSS from editor.getCss():",st.length,"chars"))}if(te.CssComposer)try{const st=te.CssComposer.getAll();if(st&&st.length>0){const Ot=st.map(de=>{try{if(de.toCSS)return de.toCSS();const ke=de.selectorsToString?de.selectorsToString():"",ct=de.getStyle?de.getStyle():{};if(ke&&ct&&Object.keys(ct).length>0){const bt=Object.entries(ct).map(([Ft,cr])=>`  ${Ft}: ${cr};`).join(`
`);return`${ke} {
${bt}
}`}return""}catch{return""}}).filter(Boolean).join(`

`);Ot&&Ot.trim().length>0&&(Ye=Ot+(Ye?`

`+Ye:""))}}catch(st){console.warn("Failed to get CSS from CssComposer:",st)}try{if(je){const st=je.getStyle?je.getStyle():null;if(st&&Object.keys(st).length>0){const de=`.gjs-wrapper-body {
${Object.entries(st).map(([ke,ct])=>`  ${ke}: ${ct};`).join(`
`)}
}`;Ye.includes(".gjs-wrapper-body")?Ye=Ye.replace(/\.gjs-wrapper-body\s*\{[^}]*\}/g,de):Ye=de+`

`+Ye,console.log(" Added wrapper styles:",Object.keys(st).length,"properties")}}}catch(st){console.warn("Failed to extract wrapper styles:",st)}if(!Ye||Ye.trim().length===0)try{if(je){const st=[],Ot=ke=>{ke&&(st.push(ke),(ke.components?ke.components():[]).forEach(bt=>Ot(bt)))};Ot(je);const de=st.map(ke=>{const ct=ke.getStyle?ke.getStyle():null,bt=ke.getClasses?ke.getClasses():[];if(ct&&Object.keys(ct).length>0){const Ft=bt.length>0?`.${bt.join(".")}`:`#${ke.getId()}`,cr=Object.entries(ct).map(([Br,kt])=>`  ${Br}: ${kt};`).join(`
`);return`${Ft} {
${cr}
}`}return null}).filter(Boolean).join(`

`);de&&(Ye=de,console.log(" Extracted CSS from all components:",Ye.length,"chars"))}}catch(st){console.warn("Failed to extract component styles:",st)}const jt=(Nt.current||ft).map(st=>st.id===Mt?{...st,html:Re||ue,css:Ye||st.css||""}:st);console.log(" Preview - Using latest editor state:",{currentPageId:Mt,htmlLength:Re.length,cssLength:Ye.length,totalPages:jt.length,htmlPreview:Re.substring(0,200),cssPreview:Ye.substring(0,500)});let Qe=jt.map(st=>st.css||"").filter(Boolean).join(`

`);const $e=Qe.includes("background-image")||Qe.includes("background:");if(console.log(" Preview Theme - CSS Debug:",{totalPages:jt.length,pagesWithCss:jt.filter(st=>st.css&&st.css.trim()).length,combinedCssLength:Qe.length,hasBackgroundImage:$e,backgroundImageCount:(Qe.match(/background-image/g)||[]).length,fullCss:Qe,firstPage:{name:jt[0]?.name,cssLength:jt[0]?.css?.length||0,cssPreview:jt[0]?.css?.substring(0,500)}}),!Qe||Qe.trim().length===0){console.warn(" WARNING: No CSS found! Styles might not appear in preview."),console.log("Attempting to get CSS directly from editor...");const st=te.getCss?te.getCss():"";console.log("Direct CSS from editor:",{length:st?.length,preview:st?.substring(0,500)}),st&&st.trim().length>0&&(Qe=st)}if(!$e){console.warn(" WARNING: No background-image found in CSS!"),console.log("Checking wrapper element directly for background...");const st=te.getWrapper();if(st){const Ot=st.getStyle();if(console.log("Wrapper styles:",Ot),Ot&&(Ot["background-image"]||Ot.background)){console.log(" FORCE FIX: Manually adding wrapper background to CSS");const ke=`.gjs-wrapper-body {
${Object.entries(Ot).map(([ct,bt])=>`  ${ct}: ${bt};`).join(`
`)}
}`;Qe=ke+`

`+Qe,console.log(" Added wrapper CSS manually:",ke)}}}const ve=te.Canvas?.getFrameEl();if(ve&&ve.contentWindow){const st=ve.contentWindow.location;Qe=Qe.replace(/url\((['"]?)(?!data:)(?!http)([^'")]+)(['"]?)\)/gi,(Ot,de,ke,ct)=>{try{const bt=new URL(ke,st.href).href;return console.log("Converting relative URL:",{original:ke,absolute:bt}),`url(${de}${bt}${ct})`}catch{return Ot}})}console.log("Final CSS for preview (first 500 chars):",Qe.substring(0,500)),console.log(" Building preview HTML with:",{pagesCount:jt.length,cssLength:Qe.length,firstPageHtmlLength:jt[0]?.html?.length||0,firstPageCssLength:jt[0]?.css?.length||0});const Ve=rn(jt,v||"Theme Preview",Qe);console.log(" Preview HTML built:",{htmlLength:Ve.length,containsCss:Ve.includes("<style>"),containsPages:Ve.includes("ziplofy-pages-data"),htmlPreview:Ve.substring(0,500)}),oe(""),setTimeout(()=>{oe(Ve),D(!0),setTimeout(()=>{const st=document.getElementById("theme-preview-iframe");st&&st.contentDocument&&Ve&&(st.contentDocument.open(),st.contentDocument.write(Ve),st.contentDocument.close(),console.log(" Forced iframe content update"))},100)},50),br()}catch(te){console.error("Preview error:",te),alert("Failed to preview theme")}},[rn,v,br,Mt,Nt]);f.useEffect(()=>{if(o.current&&Mt){const te=setTimeout(()=>{br()},100);return()=>clearTimeout(te)}},[Mt]),f.useEffect(()=>{if(re==="style"&&o.current){const te=o.current;te.getSelected()&&te.StyleManager&&setTimeout(()=>{const Re=document.getElementById("style-panel"),Ye=document.querySelector('.elementor-panel-card[data-panel-type="style"]');if(Re&&Ye){Ye.style.display="flex",Ye.style.visibility="visible",Ye.style.opacity="1",Re.style.display="block",Re.style.visibility="visible",Re.style.opacity="1";try{Re.innerHTML="",te.StyleManager.render(),setTimeout(()=>{Re.querySelectorAll(".gjs-sm-sector").forEach(jt=>{const Qe=jt;Qe.classList.remove("gjs-sm-sector--closed"),Qe.classList.add("gjs-sm-sector--open");const $e=Qe.querySelector(".gjs-sm-sector-content");$e&&($e.style.cssText="display: block !important; visibility: visible !important; opacity: 1 !important; max-height: none !important;")})},100)}catch(at){console.error("Error rendering StyleManager on tab switch:",at)}}},150)}},[re]),f.useEffect(()=>{if(o.current){const te=o.current,je=Ye=>{const at=Ye?.get("type");if(Ye&&(at==="link"||at==="button"||at==="button-outline"||at==="button-text")){const Qe=Ye.getTrait("pageLink");if(Qe){const $e=ft.map(ve=>({id:ve.id,value:ve.id,name:ve.name}));$e.unshift({id:"",value:"",name:"-- Select Page --"}),Qe.set("options",$e)}}const jt=Ye?.components?.();jt&&typeof jt.forEach=="function"&&jt.forEach(Qe=>je(Qe))},Re=te.getWrapper&&te.getWrapper();Re&&je(Re)}},[ft]),f.useEffect(()=>{const te=je=>{const Re=je.target;Jt&&!Re.closest("[data-page-manager]")&&wr(!1)};return document.addEventListener("mousedown",te),()=>{document.removeEventListener("mousedown",te)}},[Jt]),f.useEffect(()=>{localStorage.getItem("ziplofy.elementorTutorialSeen")||setTimeout(()=>{I(!0)},1e3)},[]);const En=f.useCallback(()=>{const te=document.getElementById("blocks-panel");if(!te)return;const je=te.querySelectorAll(".gjs-block");if(je.length===0)return;const Re=(V||"").toLowerCase();je.forEach(Ye=>{const at=(Ye.textContent||"").toLowerCase(),jt=!Re||at.includes(Re);Ye.style.display=jt?"flex":"none",Ye.style.visibility=jt?"visible":"hidden"})},[V]);f.useEffect(()=>{En()},[En]),f.useEffect(()=>{he&&o.current&&(console.log(" Editing custom theme - ensuring widgets are visible"),Te("widgets"),setTimeout(()=>{const te=o.current,je=document.getElementById("blocks-panel"),Re=document.querySelector(".elementor-blocks-wrapper");te?.BlockManager&&je&&(Re&&(Re.style.setProperty("display","block","important"),Re.style.setProperty("visibility","visible","important"),Re.style.setProperty("opacity","1","important")),je.style.setProperty("display","block","important"),je.style.setProperty("visibility","visible","important"),je.style.setProperty("opacity","1","important"),je.querySelectorAll(".gjs-block").length===0&&(console.log("No blocks found when editing theme, rendering..."),je.innerHTML="",te.BlockManager.render(),i.current=!0))},500))},[he]),f.useEffect(()=>{if(re==="widgets"){const te=document.querySelector(".elementor-blocks-wrapper");te&&(te.style.setProperty("display","block","important"),te.style.setProperty("visibility","visible","important"),te.style.setProperty("opacity","1","important"));const je=()=>{const Re=o.current;if(!Re?.BlockManager){console.warn("BlockManager not available yet, retrying..."),setTimeout(je,200);return}const Ye=document.getElementById("blocks-panel");if(!Ye){console.warn("blocks-panel not found, retrying..."),setTimeout(()=>{const $e=document.getElementById("blocks-panel"),ve=o.current;if($e&&ve?.BlockManager){const Ve=$e.closest(".elementor-blocks-wrapper");Ve&&(Ve.style.setProperty("display","block","important"),Ve.style.setProperty("visibility","visible","important"),Ve.style.setProperty("opacity","1","important")),$e.style.setProperty("display","block","important"),$e.style.setProperty("visibility","visible","important"),$e.style.setProperty("opacity","1","important"),$e.innerHTML="",ve.BlockManager.render(),i.current=!0}},200);return}const at=Ye.closest(".elementor-blocks-wrapper");at&&(at.style.setProperty("display","block","important"),at.style.setProperty("visibility","visible","important"),at.style.setProperty("opacity","1","important")),Ye.style.setProperty("display","block","important"),Ye.style.setProperty("visibility","visible","important"),Ye.style.setProperty("opacity","1","important");const jt=Ye.querySelectorAll(".gjs-block"),Qe=!!Ye.querySelector(".gjs-blocks-c");if(jt.length===0||!Qe)console.log("No blocks found in widgets tab, rendering..."),Ye.innerHTML="",Re.BlockManager.render(),i.current=!0,setTimeout(()=>{const $e=o.current;Ye.querySelectorAll(".gjs-block").length===0&&$e?.BlockManager&&(console.log("Still no blocks after render, retrying..."),Ye.innerHTML="",$e.BlockManager.render()),setTimeout(()=>{const Ve=Ye.querySelectorAll(".gjs-block");Ve.forEach(de=>{de&&(de.style.display="flex",de.style.visibility="visible",de.style.opacity="1",de.style.pointerEvents="auto",de.style.cursor="grab",de.style.position="relative",de.style.zIndex="1")}),Ye.querySelectorAll(".gjs-block-category").forEach(de=>{de&&(de.style.display="block",de.style.visibility="visible")});const Ot=Ye.querySelector(".gjs-blocks-c");Ot&&(Ot.style.display="flex",Ot.style.visibility="visible",Ot.style.opacity="1"),console.log(`Rendered ${Ve.length} blocks in widgets tab`),En()},100)},200);else{i.current=!0,jt.forEach(Ve=>{Ve&&(Ve.style.display="flex",Ve.style.visibility="visible",Ve.style.opacity="1",Ve.style.pointerEvents="auto",Ve.style.cursor="grab",Ve.style.position="relative",Ve.style.zIndex="1")}),Ye.querySelectorAll(".gjs-block-category").forEach(Ve=>{Ve&&(Ve.style.display="block",Ve.style.visibility="visible")});const ve=Ye.querySelector(".gjs-blocks-c");ve&&(ve.style.display="flex",ve.style.visibility="visible",ve.style.opacity="1"),En()}};je()}},[re,En]),f.useEffect(()=>{if(re==="widgets"){const te=document.getElementById("blocks-panel"),je=document.querySelector(".elementor-blocks-wrapper");if(!te||!je)return;je.style.setProperty("display","block","important"),je.style.setProperty("visibility","visible","important"),je.style.setProperty("opacity","1","important");const Re=new MutationObserver(()=>{if(re==="widgets"){const Ve=window.getComputedStyle(je);(Ve.display==="none"||Ve.visibility==="hidden"||Ve.opacity==="0")&&(console.warn("Wrapper was hidden! Restoring visibility..."),je.style.setProperty("display","block","important"),je.style.setProperty("visibility","visible","important"),je.style.setProperty("opacity","1","important"))}});Re.observe(je,{attributes:!0,attributeFilter:["style","class"],subtree:!1});let Ye=te.querySelectorAll(".gjs-block").length;te.innerHTML;let at=null,jt=!1;const Qe=new MutationObserver(Ve=>{if(jt)return;const Ot=te.querySelectorAll(".gjs-block").length;te.innerHTML,Ve.forEach(de=>{de.type==="childList"&&de.removedNodes.length>0&&Array.from(de.removedNodes).filter(ct=>ct.nodeType===Node.ELEMENT_NODE&&(ct.classList.contains("gjs-block")||ct.querySelector(".gjs-block"))).length>0&&Ot===0&&Ye>0&&te.innerHTML.trim()===""&&(at&&clearTimeout(at),at=setTimeout(()=>{if(te.querySelectorAll(".gjs-block").length===0&&te.innerHTML.trim()===""&&o.current?.BlockManager){console.warn("Blocks were removed! Restoring..."),jt=!0;const bt=te.closest(".elementor-blocks-wrapper");bt&&(bt.style.setProperty("display","block","important"),bt.style.setProperty("visibility","visible","important"),bt.style.setProperty("opacity","1","important")),o.current.BlockManager.render(),setTimeout(()=>{const Ft=te.querySelectorAll(".gjs-block");Ft.forEach(Br=>{Br&&(Br.style.display="flex",Br.style.visibility="visible",Br.style.opacity="1",Br.style.pointerEvents="auto",Br.style.cursor="grab",Br.style.position="relative",Br.style.zIndex="1")}),te.querySelectorAll(".gjs-block-category").forEach(Br=>{Br&&(Br.style.display="block",Br.style.visibility="visible")}),Ye=Ft.length,te.innerHTML,jt=!1,console.log(`Restored ${Ft.length} blocks`)},150)}},300))}),Ot>0&&(Ye=Ot)});Qe.observe(te,{childList:!0,subtree:!0,attributes:!1,characterData:!1});const $e=()=>{if(jt)return;const Ve=document.querySelector(".elementor-blocks-wrapper");Ve&&(Ve.style.setProperty("display","block","important"),Ve.style.setProperty("visibility","visible","important"),Ve.style.setProperty("opacity","1","important")),te.style.setProperty("display","block","important"),te.style.setProperty("visibility","visible","important"),te.style.setProperty("opacity","1","important");const st=te.querySelectorAll(".gjs-block");st.length>0?st.forEach(Ot=>{Ot&&(Ot.style.display="flex",Ot.style.visibility="visible",Ot.style.opacity="1",Ot.style.pointerEvents="auto",Ot.style.cursor="grab")}):i.current&&o.current?.BlockManager&&te.innerHTML.trim()===""&&(console.warn("Periodic check: Blocks missing, restoring..."),te.innerHTML="",o.current.BlockManager.render(),i.current=!0)};$e();const ve=setInterval(()=>{const Ve=document.querySelector(".elementor-blocks-wrapper");Ve&&re==="widgets"&&(Ve.style.setProperty("display","block","important"),Ve.style.setProperty("visibility","visible","important"),Ve.style.setProperty("opacity","1","important")),$e()},500);return()=>{at&&clearTimeout(at),Qe.disconnect(),Re.disconnect(),clearInterval(ve)}}},[re]),f.useEffect(()=>{if(re==="style"){const te=()=>{const Re=o.current;if(!Re?.StyleManager){console.warn("StyleManager not available yet, retrying..."),setTimeout(te,200);return}const Ye=document.getElementById("style-panel");if(!Ye){console.warn("style-panel not found, retrying..."),setTimeout(te,200);return}document.querySelectorAll(".gjs-sm-sector, .gjs-sm-property, .gjs-sm-properties").forEach($e=>{$e.closest("#style-panel")||$e.remove()});let jt=Re.getSelected();if(jt)jt.set({stylable:!0});else{const $e=Re.getWrapper();$e&&(Re.select($e),$e.set({stylable:!0}),jt=$e)}Ye.innerHTML="",jt&&Re.StyleManager.setTarget&&Re.StyleManager.setTarget(jt);const Qe=Re.StyleManager.render();Qe&&Ye.appendChild(Qe),setTimeout(()=>{const $e=Ye.querySelectorAll(".gjs-sm-sector");if(console.log(`Style Manager rendered with ${$e.length} sectors`),$e.length===0){console.warn("No sectors found after render, retrying..."),setTimeout(te,300);return}$e.forEach(Ve=>{if(Ve){Ve.style.display="block",Ve.style.visibility="visible",Ve.style.opacity="1",Ve.style.background="#ffffff";const st=Ve.querySelector(".gjs-sm-sector-content");st&&(st.style.display="block",st.style.visibility="visible",st.style.opacity="1")}}),Ye.querySelectorAll(".gjs-sm-property").forEach(Ve=>{Ve&&(Ve.style.display="block",Ve.style.visibility="visible",Ve.style.opacity="1",Ve.querySelectorAll("input, select, textarea").forEach(Ot=>{Ot&&(Ot.style.pointerEvents="auto",Ot.style.cursor=Ot.tagName==="SELECT"?"pointer":"text",Ot.style.position="relative",Ot.style.zIndex="10")}))})},200)};setTimeout(()=>{try{const Re=document.getElementById("style-panel");if(!Re){console.warn("style-panel not found, starting render loop..."),te();return}Re.style.setProperty("display","block","important"),Re.style.setProperty("visibility","visible","important"),Re.style.setProperty("opacity","1","important"),Re.style.setProperty("background","#ffffff","important"),Re.style.setProperty("min-height","200px","important"),Re.style.setProperty("width","100%","important"),Re.style.setProperty("height","auto","important"),Re.style.setProperty("position","relative","important"),Re.style.setProperty("z-index","1","important");const Ye=Re.closest(".elementor-panel-card");Ye&&(Ye.style.setProperty("display","flex","important"),Ye.style.setProperty("visibility","visible","important"),Ye.style.setProperty("opacity","1","important"));const at=Re.closest(".elementor-left-scroll");at&&(at.style.setProperty("display","flex","important"),at.style.setProperty("visibility","visible","important"),at.style.setProperty("opacity","1","important")),te()}catch(Re){console.warn("Error rendering Style Manager:",Re)}},100);const je=setInterval(()=>{if(re!=="style"){clearInterval(je);return}const Re=document.getElementById("style-panel");if(!Re)return;Re.querySelectorAll("input, select, textarea").forEach(at=>{at&&!at.disabled&&(at.style.pointerEvents="auto",at.style.cursor=at.tagName==="SELECT"?"pointer":"text",at.style.position="relative",at.style.zIndex="10")})},1e3);return()=>clearInterval(je)}},[re]);const Wr=(te,je)=>{try{je.querySelectorAll(".gjs-lm-layer, .gjs-lm-item").forEach(Ye=>{if(Ye.dataset.enriched==="true")return;Ye.dataset.enriched="true";let at=null;if(te.LayerManager){const jt=te.LayerManager.views||[];for(const Qe of jt)if(Qe.el===Ye||Ye.contains(Qe.el)){at=Qe.model;break}!at&&te.LayerManager.getComponentFromView&&(at=te.LayerManager.getComponentFromView(Ye))}if(at)try{const jt=at.get("tagName")||"div",Qe=at.get("attributes")?.id||at.get("id")||"",$e=at.get("classes")?.map(bt=>bt.getName?.()||bt.name||bt).join(" ")||"",ve=at.get("type")||jt.toLowerCase(),Ve=at.components?at.components().length:0;let st=0,Ot=at.getParent();for(;Ot;)st++,Ot=Ot.getParent();Ye.setAttribute("data-depth",st.toString());const de=Ye.querySelector(".gjs-lm-title");if(de&&(de.setAttribute("data-element-type",jt.toUpperCase()),Ve>0)){let bt=de.querySelector(".gjs-lm-badge");bt||(bt=document.createElement("span"),bt.className="gjs-lm-badge",de.appendChild(bt)),bt.textContent=Ve.toString()}let ke=Ye.querySelector(".gjs-lm-element-info");if(!ke&&(Qe||$e)&&(ke=document.createElement("div"),ke.className="gjs-lm-element-info",Ye.appendChild(ke)),ke){if(ke.innerHTML="",Qe){const bt=document.createElement("span");bt.className="element-id",bt.textContent=`#${Qe}`,ke.appendChild(bt)}$e&&$e.split(" ").filter(Ft=>Ft.trim()).forEach(Ft=>{if(Ft){const cr=document.createElement("span");cr.className="element-class",cr.textContent=`.${Ft}`,ke.appendChild(cr)}})}const ct=[];ct.push(`Type: ${jt.toUpperCase()}`),ve&&ve!==jt.toLowerCase()&&ct.push(`Component: ${ve}`),Qe&&ct.push(`ID: ${Qe}`),$e&&ct.push(`Classes: ${$e}`),Ve>0&&ct.push(`Children: ${Ve}`),Ye.setAttribute("title",ct.join("  "))}catch(jt){console.warn("Error enriching layer item:",jt)}})}catch(Re){console.warn("Error enriching layer items:",Re)}},Bn=(te,je)=>{try{Wr(te,je),je.querySelectorAll(".gjs-lm-layer, .gjs-lm-item").forEach(jt=>{if(jt.dataset.selectionHandlerAttached==="true")return;jt.dataset.selectionHandlerAttached="true",(jt.querySelector(".gjs-lm-title")||jt).addEventListener("click",$e=>{const ve=$e.target;if(!(ve.classList.contains("gjs-lm-caret")||ve.closest(".gjs-lm-caret"))){$e.stopPropagation();try{let Ve=null;if(te.LayerManager){const st=te.LayerManager.views||[];for(const Ot of st)if(Ot.el===jt||jt.contains(Ot.el)){Ve=Ot.model;break}!Ve&&te.LayerManager.getComponentFromView&&(Ve=te.LayerManager.getComponentFromView(jt))}if(!Ve){const st=te.getComponents(),Ot=(de,ke)=>{const ct=ke.textContent?.trim()||"";for(const bt of de.models||de)try{if(bt.getEl?.()){const cr=bt.get("type")||"",Br=bt.get("tagName")||"",kt=ct.toLowerCase().includes(Br.toLowerCase()),Yr=ct.toLowerCase().includes(cr.toLowerCase());if(kt||Yr)return bt}if(bt.components){const cr=Ot(bt.components(),ke);if(cr)return cr}}catch{}return null};Ve=Ot(st,jt)}Ve?(te.select(Ve),Te("style"),setTimeout(()=>{te.runCommand("open-sm")},100)):(Te("style"),setTimeout(()=>{te.runCommand("open-sm")},100))}catch(Ve){console.warn("Error selecting component from layer:",Ve),Te("style")}}})});let Ye=!1;je.addEventListener("click",()=>{Ye=!0,setTimeout(()=>{Ye=!1},300)},!0);const at=jt=>{Ye&&jt&&(Te("style"),setTimeout(()=>{te.runCommand("open-sm")},100))};te._layerSelectionListenerAdded||(te.on("component:selected",at),te._layerSelectionListenerAdded=!0)}catch(Re){console.warn("Error attaching layer selection handlers:",Re)}};return f.useEffect(()=>{const te=o.current;te?.LayerManager&&re==="structure"&&setTimeout(()=>{try{const je=document.getElementById("layers-panel");if(!je){console.warn("layers-panel not found, retrying..."),setTimeout(()=>{const Qe=document.getElementById("layers-panel");if(Qe&&te.LayerManager){Qe.style.setProperty("display","block","important"),Qe.style.setProperty("visibility","visible","important"),Qe.style.setProperty("opacity","1","important"),document.querySelectorAll(".gjs-layers, .gjs-layer-item, .gjs-layer-item-title").forEach(st=>{st.closest("#layers-panel")||st.remove()}),Qe.querySelectorAll('.gjs-sm-sector, .gjs-sm-property, .gjs-sm-properties, .gjs-sm-sector-content, .gjs-sm-property__field, .gjs-field, [class*="gjs-sm"]').forEach(st=>{st.remove()}),Qe.innerHTML="";const Ve=te.LayerManager.render();Ve&&(Qe.appendChild(Ve),setTimeout(()=>{Bn(te,Qe),Wr(te,Qe)},150))}},100);return}document.querySelectorAll(".gjs-layers, .gjs-layer-item, .gjs-layer-item-title").forEach(Qe=>{Qe.closest("#layers-panel")||Qe.remove()}),je.querySelectorAll('.gjs-sm-sector, .gjs-sm-property, .gjs-sm-properties, .gjs-sm-sector-content, .gjs-sm-property__field, .gjs-field, [class*="gjs-sm"]').forEach(Qe=>{Qe.remove()}),je.style.setProperty("display","block","important"),je.style.setProperty("visibility","visible","important"),je.style.setProperty("opacity","1","important");const at=je.closest(".elementor-panel-card");at&&(at.style.setProperty("display","flex","important"),at.style.setProperty("visibility","visible","important"),at.style.setProperty("opacity","1","important"));const jt=document.getElementById("style-panel");if(jt){const Qe=jt.closest('.elementor-panel-card[data-panel-type="style"]');Qe&&Qe.style.setProperty("display","none","important")}if(je.innerHTML="",typeof te.LayerManager.render=="function"){const Qe=te.LayerManager.render();Qe&&(je.appendChild(Qe),setTimeout(()=>{Bn(te,je),Wr(te,je)},150))}console.log("Layer Manager rendered in layers-panel")}catch(je){console.warn("Error rendering Layer Manager:",je)}},100)},[re]),f.useEffect(()=>{let te=null;const je=()=>{const Re=document.getElementById("layers-panel"),Ye=document.getElementById("style-panel"),at=document.querySelector(".elementor-blocks-wrapper"),jt=document.getElementById("blocks-panel");if(re==="widgets"){if(at&&at.querySelectorAll('.gjs-sm-sector, .gjs-sm-property, .gjs-sm-properties, .gjs-sm-sector-content, .gjs-sm-property__field, .gjs-field, [class*="gjs-sm"]').forEach($e=>{$e.remove()}),jt&&jt.querySelectorAll('.gjs-sm-sector, .gjs-sm-property, .gjs-sm-properties, .gjs-sm-sector-content, .gjs-sm-property__field, .gjs-field, [class*="gjs-sm"]').forEach($e=>{$e.remove()}),Ye){const Qe=Ye.closest('.elementor-panel-card[data-panel-type="style"]');Qe&&Qe.style.setProperty("display","none","important")}if(Re){const Qe=Re.closest('.elementor-panel-card[data-panel-type="structure"]');Qe&&Qe.style.setProperty("display","none","important")}}if(re==="structure"&&(Re&&Re.querySelectorAll('.gjs-sm-sector, .gjs-sm-property, .gjs-sm-properties, .gjs-sm-sector-content, .gjs-sm-property__field, .gjs-field, [class*="gjs-sm"]').forEach($e=>{$e.remove()}),Ye)){const Qe=Ye.closest('.elementor-panel-card[data-panel-type="style"]');Qe&&Qe.style.setProperty("display","none","important")}if(re==="style"&&(Ye&&Ye.querySelectorAll('.gjs-layers, .gjs-layer-item, .gjs-layer-item-title, .gjs-lm-layer, .gjs-lm-title, .gjs-lm-items, [class*="gjs-lm"]').forEach($e=>{$e.remove()}),Re)){const Qe=Re.closest('.elementor-panel-card[data-panel-type="structure"]');Qe&&Qe.style.setProperty("display","none","important")}re!=="style"&&document.querySelectorAll('.gjs-sm-sector, .gjs-sm-property, .gjs-sm-properties, .gjs-sm-sector-content, .gjs-sm-property__field, .gjs-field, [class*="gjs-sm"]').forEach($e=>{$e.closest("#style-panel")||$e.remove()}),re!=="structure"&&document.querySelectorAll('.gjs-layers, .gjs-layer-item, .gjs-layer-item-title, .gjs-lm-layer, .gjs-lm-title, .gjs-lm-items, [class*="gjs-lm"]').forEach($e=>{$e.closest("#layers-panel")||$e.remove()})};return je(),te&&clearTimeout(te),te=setTimeout(()=>{je()},100),()=>{te&&clearTimeout(te)}},[re]),n.jsxs("div",{ref:s,className:"custom-theme-builder-root",style:{display:"flex",flexDirection:"column",height:"100vh",background:"#fff"},children:[N&&n.jsxs("div",{style:{position:"fixed",top:"70px",left:"50%",transform:"translateX(-50%)",zIndex:1e4,background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"#fff",padding:"14px 28px",borderRadius:"8px",boxShadow:"0 4px 20px rgba(16, 185, 129, 0.4)",display:"flex",alignItems:"center",gap:"10px",fontSize:"14px",fontWeight:600,animation:"slideDown 0.3s ease-out"},children:[n.jsx("span",{style:{fontSize:"18px"},children:""}),"Theme published successfully!"]}),n.jsxs("div",{className:"elementor-top-bar",children:[n.jsxs("div",{className:"elementor-top-bar-left",children:[n.jsx("div",{className:"elementor-top-bar-icon",onClick:()=>r("/themes/all-themes"),title:"Back to Themes",children:""}),n.jsxs("div",{style:{marginLeft:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("span",{style:{fontSize:"11px",color:"rgba(0, 0, 0, 0.4)",fontWeight:600,letterSpacing:"0.5px",textTransform:"uppercase"},children:"Theme:"}),n.jsx("input",{type:"text",value:v,onChange:te=>{j(te.target.value),F(!0)},placeholder:"Theme Name",style:{background:"rgba(0, 0, 0, 0.02)",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"6px",padding:"6px 12px",color:"#000",fontSize:"13px",fontWeight:500,minWidth:"180px",maxWidth:"250px",outline:"none",transition:"all 0.2s ease"},onFocus:te=>{te.target.style.borderColor="#00d2be",te.target.style.background="rgba(0, 210, 190, 0.08)",te.target.style.boxShadow="0 0 0 3px rgba(0, 210, 190, 0.12)"},onBlur:te=>{te.target.style.borderColor="rgba(0, 0, 0, 0.1)",te.target.style.background="rgba(0, 0, 0, 0.02)",te.target.style.boxShadow="none"}})]}),n.jsx("button",{onClick:()=>{const te=o.current;te&&te.UndoManager&&te.UndoManager.undo()},disabled:!d,title:"Undo (Ctrl+Z)",style:{background:d?"rgba(0, 0, 0, 0.05)":"rgba(0, 0, 0, 0.02)",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"6px",padding:"6px 10px",color:d?"#000":"rgba(0, 0, 0, 0.3)",cursor:d?"pointer":"not-allowed",fontSize:"13px",fontWeight:500,display:"flex",alignItems:"center",gap:"4px",transition:"all 0.2s ease",opacity:d?1:.5,marginLeft:"8px"},onMouseEnter:te=>{d&&(te.currentTarget.style.background="rgba(0, 0, 0, 0.08)",te.currentTarget.style.borderColor="rgba(0, 0, 0, 0.2)")},onMouseLeave:te=>{d&&(te.currentTarget.style.background="rgba(0, 0, 0, 0.05)",te.currentTarget.style.borderColor="rgba(0, 0, 0, 0.1)")},children:" Undo"}),n.jsx("button",{onClick:()=>{const te=o.current;te&&te.UndoManager&&te.UndoManager.redo()},disabled:!m,title:"Redo (Ctrl+Shift+Z)",style:{background:m?"rgba(0, 0, 0, 0.05)":"rgba(0, 0, 0, 0.02)",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"6px",padding:"6px 10px",color:m?"#000":"rgba(0, 0, 0, 0.3)",cursor:m?"pointer":"not-allowed",fontSize:"13px",fontWeight:500,display:"flex",alignItems:"center",gap:"4px",transition:"all 0.2s ease",opacity:m?1:.5,marginLeft:"4px"},onMouseEnter:te=>{m&&(te.currentTarget.style.background="rgba(0, 0, 0, 0.08)",te.currentTarget.style.borderColor="rgba(0, 0, 0, 0.2)")},onMouseLeave:te=>{m&&(te.currentTarget.style.background="rgba(0, 0, 0, 0.05)",te.currentTarget.style.borderColor="rgba(0, 0, 0, 0.1)")},children:" Redo"}),n.jsx("div",{className:"elementor-top-bar-icon",title:"Add Widget",onClick:()=>{Te("widgets"),Y(!1)},style:{cursor:"pointer"},children:"+"}),n.jsx("div",{className:"elementor-top-bar-icon",title:"Toggle Grid Overlay",onClick:()=>{fe(!Se);const te=o.current;if(te){const je=te.Canvas;if(je){const Re=je.getFrameEl();if(Re&&Re.contentDocument){const Ye=Re.contentDocument.body;if(Ye)if(Se){const at=Re.contentDocument.getElementById("ziplofy-grid-overlay");at&&at.remove()}else{const at=Re.contentDocument.createElement("div");at.id="ziplofy-grid-overlay",at.style.cssText=`
                          position: fixed;
                          top: 0;
                          left: 0;
                          width: 100%;
                          height: 100%;
                          background-image: 
                            linear-gradient(rgba(0, 0, 0, 0.1) 1px, transparent 1px),
                            linear-gradient(90deg, rgba(0, 0, 0, 0.1) 1px, transparent 1px);
                          background-size: 20px 20px;
                          pointer-events: none;
                          z-index: 9999;
                        `,Ye.appendChild(at)}}}}},style:{cursor:"pointer",opacity:Se?1:.6},children:""}),n.jsx("div",{className:"elementor-top-bar-icon",title:"Settings",onClick:()=>{Te("style"),Y(!1)},style:{cursor:"pointer"},children:""})]}),n.jsxs("div",{className:"elementor-top-bar-center",children:[n.jsxs("div",{"data-page-manager":!0,style:{position:"relative",display:"flex",alignItems:"center",gap:8,zIndex:1e4},children:[n.jsxs("button",{onClick:()=>wr(!Jt),style:{padding:"8px 16px",background:"rgba(0, 210, 190, 0.08)",border:"1px solid rgba(0, 210, 190, 0.3)",borderRadius:"8px",color:"#00b8a8",cursor:"pointer",fontSize:13,fontWeight:500,display:"flex",alignItems:"center",gap:6,transition:"all 0.2s ease",position:"relative",zIndex:10001},onMouseEnter:te=>{te.currentTarget.style.background="rgba(0, 210, 190, 0.15)",te.currentTarget.style.borderColor="#00d2be"},onMouseLeave:te=>{te.currentTarget.style.background="rgba(0, 210, 190, 0.08)",te.currentTarget.style.borderColor="rgba(0, 210, 190, 0.3)"},children:[n.jsx("span",{children:ft.find(te=>te.id===Mt)?.name||"Home"}),n.jsx("span",{style:{fontSize:10,transition:"transform 0.2s ease",transform:Jt?"rotate(180deg)":"rotate(0deg)"},children:""})]}),Jt&&n.jsxs("div",{style:{position:"absolute",top:"100%",left:0,marginTop:8,background:"linear-gradient(145deg, #1a1a22 0%, #141418 100%)",border:"1px solid rgba(0, 210, 190, 0.3)",borderRadius:10,minWidth:280,maxHeight:450,overflowY:"auto",zIndex:99999,boxShadow:"0 12px 40px rgba(0, 0, 0, 0.6), 0 0 0 1px rgba(255, 255, 255, 0.05), 0 0 20px rgba(0, 210, 190, 0.15)",backdropFilter:"blur(10px)"},children:[n.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid rgba(255, 255, 255, 0.08)",fontSize:10,color:"rgba(0, 210, 190, 0.8)",fontWeight:700,letterSpacing:"1px",textTransform:"uppercase",background:"rgba(0, 210, 190, 0.05)"},children:["PAGES (",ft.length,")"]}),ft.map(te=>n.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid rgba(255, 255, 255, 0.05)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",background:te.id===Mt?"rgba(0, 210, 190, 0.12)":"transparent",transition:"all 0.2s ease",position:"relative"},onMouseEnter:je=>{te.id!==Mt&&(je.currentTarget.style.background="rgba(255, 255, 255, 0.05)")},onMouseLeave:je=>{te.id!==Mt&&(je.currentTarget.style.background="transparent")},onClick:()=>{pn(te.id),wr(!1)},children:[te.id===Mt&&n.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:"3px",background:"linear-gradient(180deg, #00d2be 0%, #00b8a8 100%)",borderRadius:"0 2px 2px 0"}}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flex:1,paddingLeft:te.id===Mt?8:0},children:[n.jsx("input",{type:"text",value:te.name,onClick:je=>je.stopPropagation(),onChange:je=>{je.stopPropagation(),Er(te.id,je.target.value)},style:{background:"transparent",border:"none",color:te.id===Mt?"#00d2be":"#fff",fontSize:13,padding:"4px 6px",flex:1,outline:"none",fontWeight:te.id===Mt?600:400,borderRadius:"4px"},onFocus:je=>{je.target.style.background="rgba(255, 255, 255, 0.05)",je.target.style.border="1px solid rgba(0, 210, 190, 0.3)",je.target.style.padding="3px 5px"},onBlur:je=>{je.target.style.background="transparent",je.target.style.border="none",je.target.style.padding="4px 6px"}}),te.id===Mt&&n.jsx("span",{style:{fontSize:8,color:"#00d2be",fontWeight:700},children:""})]}),ft.length>1&&n.jsx("button",{onClick:je=>{je.stopPropagation(),on(te.id)},style:{background:"transparent",border:"none",color:"rgba(220, 38, 38, 0.7)",cursor:"pointer",padding:"6px 10px",fontSize:14,borderRadius:6,transition:"all 0.2s ease"},onMouseEnter:je=>{je.currentTarget.style.background="rgba(220, 38, 38, 0.15)",je.currentTarget.style.color="#dc2626"},onMouseLeave:je=>{je.currentTarget.style.background="transparent",je.currentTarget.style.color="rgba(220, 38, 38, 0.7)"},children:""})]},te.id)),n.jsxs("div",{onClick:()=>{In(),wr(!1)},style:{padding:"14px 16px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8,color:"#00d2be",fontSize:13,fontWeight:600,borderTop:"1px solid rgba(255, 255, 255, 0.08)",background:"rgba(0, 210, 190, 0.05)",transition:"all 0.2s ease"},onMouseEnter:te=>{te.currentTarget.style.background="rgba(0, 210, 190, 0.12)",te.currentTarget.style.color="#00e5d1"},onMouseLeave:te=>{te.currentTarget.style.background="rgba(0, 210, 190, 0.05)",te.currentTarget.style.color="#00d2be"},children:[n.jsx("span",{style:{fontSize:16,fontWeight:400},children:"+"}),n.jsx("span",{children:"Add New Page"})]})]})]}),n.jsx("div",{className:"elementor-top-bar-icon",title:"Settings",onClick:()=>{Te("style"),Y(!1)},style:{cursor:"pointer"},children:""}),n.jsxs("div",{className:"elementor-device-switcher",children:[n.jsx("button",{className:`elementor-device-btn ${Z==="desktop"?"active":""}`,onClick:()=>{try{const te=o.current;te&&te.setDevice&&(te.setDevice("desktop"),A("desktop"),setTimeout(()=>{const je=document.querySelector(".gjs-cv-canvas"),Re=document.querySelector(".gjs-frame");je&&(je.style.setProperty("display","flex","important"),je.style.setProperty("justify-content","center","important"),je.style.setProperty("align-items","flex-start","important"),je.style.setProperty("width","100%","important"),je.style.setProperty("margin","0","important"),je.style.setProperty("padding","24px","important")),Re&&(Re.style.setProperty("min-width","1200px","important"),Re.style.setProperty("max-width","1200px","important"),Re.style.setProperty("width","1200px","important"),Re.style.setProperty("margin","0 auto","important"))},100))}catch(te){console.error("Error switching to desktop:",te)}},title:"Desktop",children:""}),n.jsx("button",{className:`elementor-device-btn ${Z==="tablet"?"active":""}`,onClick:()=>{try{const te=o.current;te&&te.setDevice&&(te.setDevice("tablet"),A("tablet"),setTimeout(()=>{const je=document.querySelector(".gjs-cv-canvas"),Re=document.querySelector(".gjs-frame");je&&(je.style.setProperty("display","flex","important"),je.style.setProperty("justify-content","center","important"),je.style.setProperty("align-items","flex-start","important"),je.style.setProperty("width","100%","important"),je.style.setProperty("margin","0","important"),je.style.setProperty("padding","24px","important")),Re&&(Re.style.setProperty("min-width","768px","important"),Re.style.setProperty("max-width","768px","important"),Re.style.setProperty("width","768px","important"),Re.style.setProperty("margin","0 auto","important"))},100))}catch(te){console.error("Error switching to tablet:",te)}},title:"Tablet",children:""}),n.jsx("button",{className:`elementor-device-btn ${Z==="mobile"?"active":""}`,onClick:()=>{try{const te=o.current;te&&te.setDevice&&(te.setDevice("mobile"),A("mobile"),setTimeout(()=>{const je=document.querySelector(".gjs-cv-canvas"),Re=document.querySelector(".gjs-frame");je&&(je.style.setProperty("display","flex","important"),je.style.setProperty("justify-content","center","important"),je.style.setProperty("align-items","flex-start","important"),je.style.setProperty("width","100%","important"),je.style.setProperty("margin","0","important"),je.style.setProperty("padding","24px","important")),Re&&(Re.style.setProperty("min-width","375px","important"),Re.style.setProperty("max-width","375px","important"),Re.style.setProperty("width","375px","important"),Re.style.setProperty("margin","0 auto","important"))},100))}catch(te){console.error("Error switching to mobile:",te)}},title:"Mobile",children:""})]})]}),n.jsxs("div",{className:"elementor-top-bar-right",children:[n.jsx("div",{className:"elementor-top-bar-icon",onClick:()=>{try{const te=o.current;if(te){const je=te.getSelected();if(je){const Re=je.getParent();Re&&Re.get("type")!=="wrapper"?te.select(Re):console.log("No parent component to select")}else console.log("No component selected")}}catch(te){console.error("Error selecting parent:",te)}},title:"Select Parent (Alt+Click)",style:{cursor:"pointer"},children:""}),n.jsx("div",{className:"elementor-top-bar-icon",onClick:()=>{ee(!0)},title:"Notes & Changes",style:{cursor:"pointer"},children:""}),n.jsx("div",{className:"elementor-top-bar-icon",onClick:()=>{try{const te=o.current;if(te){const je=window.__ziplofyCopiedComponent;if(!je){console.log("No component copied");return}const Re=te.getSelected();let Ye=te.getWrapper();if(Re&&Re.get("type")!=="wrapper")if(Re.get("droppable")||Re.getAttributes?.()?.["data-gjs-droppable"]==="*")Ye=Re;else try{const $e=Re.parent();$e&&$e.get&&$e.get("type")!=="wrapper"&&(Ye=$e)}catch($e){console.warn("Could not get parent, using wrapper:",$e)}if(!Ye){console.log("No target to paste into");return}let at=null;if(je.component)try{at=je.component.clone()}catch(Qe){if(console.warn("Error cloning from component reference:",Qe),je.html)try{const $e=te.getWrapper();if($e){const ve=$e.get("content");$e.set("content",je.html);const Ve=$e.components();if(Ve&&Ve.length>0){const st=Ve.at(0);st&&(at=st,$e.components().remove(at))}$e.set("content",ve)}}catch($e){console.error("Error parsing HTML:",$e)}}else if(je.html)try{const Qe=te.getWrapper();if(Qe){const $e=Qe.get("content");Qe.set("content",je.html);const ve=Qe.components();if(ve&&ve.length>0){const Ve=ve.at(0);Ve&&(at=Ve,Qe.components().remove(at))}Qe.set("content",$e)}}catch(Qe){console.error("Error parsing HTML:",Qe)}if(!at){console.error("Failed to clone component");return}const jt=Qe=>{try{const $e=Qe.getAttributes?.()||{},ve=Qe.get?.("tagName")?.toLowerCase?.()||"",Ve=$e["data-gjs-droppable"]==="*"||ve==="form",st=$e["data-gjs-selectable"]!=="false";if(Qe.set({selectable:st,hoverable:!0,draggable:!0,stylable:!0,droppable:Ve},{silent:!0}),($e["data-gjs-editable"]==="true"||$e["data-gjs-type"]==="text")&&Qe.set({editable:!0,type:"text"},{silent:!0}),te.CssComposer){const de=Qe.cid||Qe.getId?.();if(de){let ct=Qe.getClasses().find(bt=>bt&&!bt.startsWith("gjs-"));ct||(ct=`gjs-comp-${de}`,Qe.addClass(ct))}}const Ot=Qe.components();Ot&&Ot.length>0&&Ot.forEach(de=>{jt(de)})}catch($e){console.warn("Error configuring pasted component:",$e)}};jt(at),Ye.components?Ye.components().add(at):Ye.append(at),setTimeout(()=>{te.select(at)},50),console.log("Component pasted")}}catch(te){console.error("Error pasting component:",te)}},title:"Paste (Ctrl+V)",style:{cursor:"pointer"},children:""}),n.jsx("div",{className:"elementor-top-bar-icon",title:"Link Manager",onClick:()=>{const te=o.current;if(te){const je=te.getWrapper();if(je){const Re=at=>{const jt=[];if(!at)return jt;try{const Qe=at.get?.("tagName")?.toLowerCase?.()||"",$e=at.get?.("type")||"",ve=at.getEl?.(),Ve=Qe==="a"||$e==="link";let Ot=Ve||(Qe==="button"||$e==="button"||$e==="button-outline"||$e==="button-text");if(ve&&!Ot){const ke=ve.nodeName?.toLowerCase();Ot=ke==="a"||ke==="button"}if(Ot){const ke=at.getAttributes?.()||{},ct=ke.href||at.get?.("href")||ve?.getAttribute?.("href")||"",bt=ke["data-page-link"]||at.get?.("data-page-link")||ve?.getAttribute?.("data-page-link")||"",Ft=ve?.textContent?.trim()||ve?.innerText?.trim()||at.get?.("content")||"Untitled";jt.push({id:at.cid||at.getId?.()||Date.now().toString()+Math.random(),type:Ve?"link":"button",text:Ft.substring(0,50)+(Ft.length>50?"...":""),href:ct,pageLink:bt,component:at})}const de=at.components?.();de&&(typeof de.forEach=="function"?de.forEach(ke=>{jt.push(...Re(ke))}):Array.isArray(de)&&de.forEach(ke=>{jt.push(...Re(ke))}))}catch(Qe){console.warn("Error finding links in component:",Qe)}return jt},Ye=Re(je);console.log("Link Manager: Found",Ye.length,"links/buttons"),pt(Ye),ze(!0)}}else ze(!0)},style:{cursor:"pointer"},children:""}),n.jsx("div",{className:"elementor-top-bar-icon",title:"Global Search",onClick:()=>{Ae(!Ee),Ee||we("")},style:{cursor:"pointer"},children:""}),n.jsx("div",{className:"elementor-top-bar-icon",onClick:()=>I(!0),title:"Help",style:{cursor:"pointer"},children:"?"}),n.jsx("button",{className:"elementor-preview-btn",onClick:bn,title:"Preview",children:"Preview"}),n.jsx("button",{className:"elementor-publish-btn",onClick:()=>Rn(!0),disabled:S,children:S?se?"Modifying...":"Publishing...":se?"Modify":"Publish"})]})]}),n.jsxs("div",{className:"builder-main-editor",style:{flex:1,display:"flex",overflow:"hidden",background:"#f1f3f5"},children:[n.jsxs("div",{className:`builder-left-panel ${G?"collapsed":""}`,children:[n.jsxs("div",{className:"elementor-elements-header",style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"18px 22px"},children:[!G&&n.jsx("span",{style:{fontSize:"13px",fontWeight:700,textTransform:"uppercase",letterSpacing:"1px",color:"#fff",textShadow:"0 1px 2px rgba(0, 0, 0, 0.3)"},children:"Elements"}),n.jsx("button",{onClick:te=>{te.preventDefault(),te.stopPropagation(),Y(!G)},className:"sidebar-toggle-btn",style:{position:G?"static":"absolute",right:G?"auto":"12px",top:G?"auto":"50%",transform:G?"none":"translateY(-50%)",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.12) 0%, rgba(255, 255, 255, 0.08) 100%)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"rgba(255, 255, 255, 0.9)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",fontSize:"16px",zIndex:10,margin:G?"0 auto":"0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)"},onMouseEnter:te=>{te.currentTarget.style.background="linear-gradient(135deg, rgba(0, 210, 190, 0.25) 0%, rgba(0, 210, 190, 0.15) 100%)",te.currentTarget.style.color="#00d2be",te.currentTarget.style.boxShadow="0 4px 16px rgba(0, 210, 190, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2)",te.currentTarget.style.borderColor="rgba(0, 210, 190, 0.3)",te.currentTarget.style.transform=G?"scale(1.1)":"translateY(-50%) scale(1.1)"},onMouseLeave:te=>{te.currentTarget.style.background="linear-gradient(135deg, rgba(255, 255, 255, 0.12) 0%, rgba(255, 255, 255, 0.08) 100%)",te.currentTarget.style.color="rgba(255, 255, 255, 0.9)",te.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1)",te.currentTarget.style.borderColor="rgba(255, 255, 255, 0.1)",te.currentTarget.style.transform=G?"scale(1)":"translateY(-50%) scale(1)"},title:G?"Expand Sidebar":"Collapse Sidebar",children:G?"":""})]}),!G&&n.jsxs("div",{className:"elementor-primary-tabs",children:[n.jsx("button",{className:`elementor-primary-tab ${re==="widgets"?"active":""}`,onClick:()=>Te("widgets"),children:"Widgets"}),n.jsx("button",{className:`elementor-primary-tab ${re==="globals"?"active":""}`,onClick:()=>Te("globals"),children:"Globals"}),n.jsx("button",{className:`elementor-primary-tab ${re==="structure"?"active":""}`,onClick:()=>Te("structure"),children:"Structure"}),n.jsx("button",{className:`elementor-primary-tab ${re==="style"?"active":""}`,onClick:()=>Te("style"),children:"Style"})]}),G&&n.jsxs("div",{className:"elementor-primary-tabs-collapsed",style:{display:"flex",flexDirection:"column",gap:"8px",padding:"12px"},children:[n.jsx("button",{className:`elementor-primary-tab-icon ${re==="widgets"?"active":""}`,onClick:()=>{Y(!1),Te("widgets")},title:"Widgets",style:{width:"36px",height:"36px",borderRadius:"8px",border:"none",background:re==="widgets"?"rgba(0, 210, 190, 0.2)":"transparent",color:re==="widgets"?"#00d2be":"rgba(255, 255, 255, 0.6)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",transition:"all 0.2s ease"},onMouseEnter:te=>{re!=="widgets"&&(te.currentTarget.style.background="rgba(255, 255, 255, 0.1)",te.currentTarget.style.color="#00d2be")},onMouseLeave:te=>{re!=="widgets"&&(te.currentTarget.style.background="transparent",te.currentTarget.style.color="rgba(255, 255, 255, 0.6)")},children:""}),n.jsx("button",{className:`elementor-primary-tab-icon ${re==="globals"?"active":""}`,onClick:()=>{Y(!1),Te("globals")},title:"Globals",style:{width:"36px",height:"36px",borderRadius:"8px",border:"none",background:re==="globals"?"rgba(0, 210, 190, 0.2)":"transparent",color:re==="globals"?"#00d2be":"rgba(255, 255, 255, 0.6)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",transition:"all 0.2s ease"},onMouseEnter:te=>{re!=="globals"&&(te.currentTarget.style.background="rgba(255, 255, 255, 0.1)",te.currentTarget.style.color="#00d2be")},onMouseLeave:te=>{re!=="globals"&&(te.currentTarget.style.background="transparent",te.currentTarget.style.color="rgba(255, 255, 255, 0.6)")},children:""}),n.jsx("button",{className:`elementor-primary-tab-icon ${re==="structure"?"active":""}`,onClick:()=>{Y(!1),Te("structure")},title:"Structure",style:{width:"36px",height:"36px",borderRadius:"8px",border:"none",background:re==="structure"?"rgba(0, 210, 190, 0.2)":"transparent",color:re==="structure"?"#00d2be":"rgba(255, 255, 255, 0.6)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",transition:"all 0.2s ease"},onMouseEnter:te=>{re!=="structure"&&(te.currentTarget.style.background="rgba(255, 255, 255, 0.1)",te.currentTarget.style.color="#00d2be")},onMouseLeave:te=>{re!=="structure"&&(te.currentTarget.style.background="transparent",te.currentTarget.style.color="rgba(255, 255, 255, 0.6)")},children:""}),n.jsx("button",{className:`elementor-primary-tab-icon ${re==="style"?"active":""}`,onClick:()=>{Y(!1),Te("style")},title:"Style",style:{width:"36px",height:"36px",borderRadius:"8px",border:"none",background:re==="style"?"rgba(0, 210, 190, 0.2)":"transparent",color:re==="style"?"#00d2be":"rgba(255, 255, 255, 0.6)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",transition:"all 0.2s ease"},onMouseEnter:te=>{re!=="style"&&(te.currentTarget.style.background="rgba(255, 255, 255, 0.1)",te.currentTarget.style.color="#00d2be")},onMouseLeave:te=>{re!=="style"&&(te.currentTarget.style.background="transparent",te.currentTarget.style.color="rgba(255, 255, 255, 0.6)")},children:""})]}),!G&&(re==="widgets"||re==="globals")&&n.jsxs("div",{className:"elementor-search-widget",children:[n.jsx("span",{className:"elementor-search-icon",children:""}),n.jsx("input",{value:V,onChange:te=>W(te.target.value),placeholder:"Search Widget..."})]}),!G&&n.jsxs("div",{className:"elementor-left-scroll",children:[n.jsx("div",{className:"elementor-blocks-wrapper",style:{display:re==="widgets"?"block":"none",visibility:re==="widgets"?"visible":"hidden",opacity:re==="widgets"?"1":"0"},"aria-hidden":re!=="widgets",ref:te=>{te&&re==="widgets"&&(te.style.setProperty("display","block","important"),te.style.setProperty("visibility","visible","important"),te.style.setProperty("opacity","1","important"))},children:n.jsx("div",{id:"blocks-panel",style:{display:"block",visibility:"visible",opacity:1,minHeight:"200px"}})}),n.jsxs("div",{className:"elementor-secondary-panel",style:{display:re==="widgets"?"block":"none"},children:[n.jsx("div",{className:"elementor-secondary-title",children:"Settings"}),n.jsx("div",{id:"traits-panel",className:"elementor-secondary-body"})]}),n.jsx("div",{className:"elementor-blocks-wrapper elementor-globals-placeholder",style:{display:re==="globals"?"block":"none"},"aria-hidden":re!=="globals",children:"Globals coming soon"}),n.jsxs("div",{className:"elementor-panel-card","data-panel-type":"structure",style:{display:re==="structure"?"flex":"none"},"aria-hidden":re!=="structure",children:[n.jsx("div",{className:"elementor-panel-card-title",children:"Structure"}),n.jsx("div",{id:"layers-panel",className:"elementor-panel-card-body",style:{display:"block"}})]}),n.jsxs("div",{className:"elementor-panel-card","data-panel-type":"style",style:{display:re==="style"?"flex":"none"},"aria-hidden":re!=="style",children:[n.jsx("div",{className:"elementor-panel-card-title",children:"Style"}),n.jsx("div",{id:"style-panel",className:"elementor-panel-card-body elementor-style-body",style:{display:"block"}})]})]})]}),n.jsx("div",{className:"builder-center-panel",style:{flex:1,display:"flex",flexDirection:"column",background:"#f1f3f5",position:"relative"},children:n.jsxs("div",{style:{flex:1,overflow:"auto",display:"flex",flexDirection:"column",alignItems:"center",padding:"20px"},children:[n.jsxs("div",{className:"elementor-canvas-header",style:{width:"100%",maxWidth:"1200px",marginBottom:0},children:[n.jsx("div",{className:"elementor-canvas-site-name",children:v||"Ziplofy Theme"}),n.jsx("div",{className:"elementor-canvas-page-name",children:ft.find(te=>te.id===Mt)?.name||"Home"})]}),n.jsxs("div",{style:{width:"100%",maxWidth:"1200px",background:"#fff",minHeight:"600px",position:"relative",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[l&&n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",minHeight:"600px",fontSize:14,color:"#6b7280",gap:"16px"},children:[n.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #e5e7eb",borderTop:"4px solid #5e72e4",borderRadius:"50%",animation:"spin 1s linear infinite"}}),n.jsx("div",{children:"Loading Elementor Editor..."}),n.jsx("div",{style:{fontSize:"12px",color:"#9ca3af"},children:"This may take a few moments"}),n.jsx("style",{children:`
                    @keyframes spin {
                      0% { transform: rotate(0deg); }
                      100% { transform: rotate(360deg); }
                    }
                  `})]}),x&&n.jsx("div",{style:{padding:12,background:"#fef2f2",color:"#dc2626",borderRadius:6,fontSize:13,border:"1px solid #fecaca",margin:"20px"},children:x}),n.jsx("div",{ref:t,style:{minHeight:"600px"}})]}),n.jsxs("div",{className:"elementor-canvas-footer",style:{width:"100%",maxWidth:"1200px",marginTop:0},children:["Copyright  ",new Date().getFullYear()," ",v||"Ziplofy Theme"," | Powered by"," ",n.jsx("a",{href:"#",onClick:te=>te.preventDefault(),children:"Ziplofy Theme Builder"})]})]})})]}),q&&n.jsx(BB,{onClose:()=>I(!1)}),Ee&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e5,background:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>Ae(!1),children:n.jsxs("div",{style:{background:"#ffffff",border:"1px solid rgba(0, 0, 0, 0.2)",borderRadius:"12px",width:"600px",maxWidth:"90vw",maxHeight:"70vh",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.15)",display:"flex",flexDirection:"column"},onClick:te=>te.stopPropagation(),children:[n.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[n.jsx("h3",{style:{margin:0,color:"#000",fontSize:"18px",fontWeight:600},children:"Global Search"}),n.jsx("button",{onClick:()=>Ae(!1),style:{background:"transparent",border:"none",color:"#000",fontSize:"24px",cursor:"pointer",padding:"0",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"6px",transition:"all 0.2s ease"},onMouseEnter:te=>{te.currentTarget.style.background="rgba(255, 255, 255, 0.1)"},onMouseLeave:te=>{te.currentTarget.style.background="transparent"},children:""})]}),n.jsx("input",{type:"text",value:qe,onChange:te=>we(te.target.value),placeholder:"Search components, text, styles...",autoFocus:!0,style:{width:"100%",padding:"12px 16px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#fff",fontSize:"14px",outline:"none"},onKeyDown:te=>{te.key==="Escape"&&Ae(!1)}})]}),n.jsx("div",{style:{padding:"16px",overflowY:"auto",flex:1},children:qe?n.jsxs("div",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"14px"},children:['Searching for "',qe,'"...',n.jsx("div",{style:{marginTop:"12px",fontSize:"13px",color:"rgba(255, 255, 255, 0.4)"},children:"Search functionality will find components, text content, and styles matching your query."})]}):n.jsx("div",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"14px",textAlign:"center",padding:"40px 0"},children:"Type to search for components, text, or styles..."})})]})}),Oe&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e5,background:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>ze(!1),children:n.jsxs("div",{style:{background:"#ffffff",border:"1px solid rgba(0, 0, 0, 0.2)",borderRadius:"12px",width:"600px",maxWidth:"90vw",maxHeight:"70vh",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.15)",display:"flex",flexDirection:"column"},onClick:te=>te.stopPropagation(),children:[n.jsx("div",{style:{padding:"20px",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsx("h3",{style:{margin:0,color:"#000",fontSize:"18px",fontWeight:600},children:"Link Manager"}),n.jsx("button",{onClick:()=>ze(!1),style:{background:"transparent",border:"none",color:"#000",fontSize:"24px",cursor:"pointer",padding:"0",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"6px",transition:"all 0.2s ease"},onMouseEnter:te=>{te.currentTarget.style.background="rgba(0, 0, 0, 0.05)"},onMouseLeave:te=>{te.currentTarget.style.background="transparent"},children:""})]})}),n.jsxs("div",{style:{padding:"16px",overflowY:"auto",flex:1},children:[We.length>0&&n.jsxs("div",{style:{fontSize:"11px",color:"rgba(255, 255, 255, 0.6)",marginBottom:"12px",padding:"10px",background:"rgba(0, 210, 190, 0.1)",borderRadius:"6px",border:"1px solid rgba(0, 210, 190, 0.2)",lineHeight:"1.5"},children:[n.jsx("strong",{style:{color:"#00d2be"},children:" How to use:"})," Click any link/button below to select it in the editor. The Widgets panel will open automatically where you can edit the link settings (Link Type, Page, or URL)."]}),We.length===0?n.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"rgba(255, 255, 255, 0.4)",fontSize:"13px"},children:[n.jsx("div",{style:{fontSize:"32px",marginBottom:"12px"},children:""}),n.jsx("div",{children:"No links or buttons found"}),n.jsx("div",{style:{fontSize:"11px",marginTop:"8px",color:"rgba(255, 255, 255, 0.3)"},children:"Add links or buttons to your theme to manage them here"})]}):n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[n.jsxs("div",{style:{fontSize:"12px",color:"rgba(255, 255, 255, 0.5)",marginBottom:"8px"},children:["Found ",We.length," ",We.length===1?"link/button":"links/buttons"]}),We.map(te=>n.jsxs("div",{onClick:()=>{const je=o.current;je&&te.component&&(ze(!1),Y(!1),Te("widgets"),requestAnimationFrame(()=>{setTimeout(()=>{const Re=document.querySelector(".elementor-secondary-panel");Re&&(Re.style.setProperty("display","block","important"),Re.style.setProperty("visibility","visible","important"),Re.style.setProperty("opacity","1","important")),je.select(te.component),setTimeout(()=>{const Ye=te.component?.get("tagName")?.toLowerCase(),at=Ye==="button";if(at||Ye==="a"){const $e=te.component.get("traits")||[];if(!$e.some(Ve=>typeof Ve=="object"&&Ve.name==="linkType"||Ve==="linkType")){const Ve=Nt.current||[],st=[{type:"select",name:"linkType",label:at?"Button Action":"Link Type",options:at?[{id:"none",value:"none",name:"No Action"},{id:"page",value:"page",name:"Navigate to Page"},{id:"url",value:"url",name:"Open URL"}]:[{id:"page",value:"page",name:"Link to Page"},{id:"url",value:"url",name:"External URL"}],changeProp:!0},{type:"select",name:"pageLink",label:"Select Page",options:[{id:"",value:"",name:"-- Select Page --"},...Ve.map(de=>({id:de.id,value:de.id,name:de.name}))],changeProp:!0},{type:"text",name:"href",label:"URL",placeholder:"https://example.com or #page-1",changeProp:!0}],Ot=$e.filter(de=>typeof de=="string"?de!=="id"&&de!=="title"&&de!=="linkType"&&de!=="pageLink":de.name!=="id"&&de.name!=="title"&&de.name!=="linkType"&&de.name!=="pageLink"&&de.name!=="href");te.component.set("traits",[...Ot,...st])}}const Qe=document.getElementById("traits-panel");if(Qe&&(Qe.style.setProperty("display","block","important"),Qe.style.setProperty("visibility","visible","important"),Qe.style.setProperty("opacity","1","important"),je.TraitManager))try{je.select(te.component),setTimeout(()=>{if(typeof je.TraitManager.render=="function"){const $e=je.TraitManager.render();$e&&Qe&&(Qe.innerHTML="",$e.nodeType===1?Qe.appendChild($e):typeof $e=="string"&&(Qe.innerHTML=$e))}setTimeout(()=>{const $e=te.component.get?.("linkType");$e!==void 0&&Qe.querySelectorAll(".gjs-trt-trait").forEach(Ve=>{const st=Ve.querySelector("label, .gjs-trt-trait__label");if(st){const Ot=st.textContent||"";Ot.includes("Select Page")?Ve.style.display=$e==="page"?"block":"none":Ot.includes("URL")&&!Ot.includes("Select")&&(Ve.style.display=$e==="url"?"block":"none")}})},100)},100)}catch($e){console.warn("Error rendering traits:",$e)}structurePanel&&structurePanel.scrollIntoView({behavior:"smooth",block:"nearest"})},300)},150)}))},style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"12px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:je=>{je.currentTarget.style.background="rgba(255, 255, 255, 0.1)",je.currentTarget.style.borderColor="rgba(0, 210, 190, 0.3)",je.currentTarget.style.transform="translateX(4px)"},onMouseLeave:je=>{je.currentTarget.style.background="rgba(255, 255, 255, 0.05)",je.currentTarget.style.borderColor="rgba(255, 255, 255, 0.1)",je.currentTarget.style.transform="translateX(0)"},children:[n.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flex:1},children:[n.jsx("span",{style:{fontSize:"12px",padding:"2px 8px",borderRadius:"4px",background:te.type==="link"?"rgba(0, 210, 190, 0.15)":"rgba(255, 193, 7, 0.15)",color:te.type==="link"?"#00d2be":"#ffc107",fontWeight:600,flexShrink:0},children:te.type==="link"?" Link":" Button"}),n.jsx("span",{style:{color:"#fff",fontSize:"13px",fontWeight:500,flex:1},children:te.text||"Untitled"})]})}),n.jsx("div",{style:{fontSize:"11px",color:"rgba(255, 255, 255, 0.5)",marginTop:"4px",marginBottom:"4px"},children:te.pageLink?n.jsxs("span",{children:[" Internal: ",n.jsx("strong",{children:ft.find(je=>je.id===te.pageLink)?.name||te.pageLink})]}):te.href?n.jsxs("span",{children:[" External: ",n.jsx("strong",{children:te.href.length>40?te.href.substring(0,40)+"...":te.href})]}):n.jsx("span",{style:{fontStyle:"italic",color:"rgba(255, 255, 255, 0.3)"},children:" No link set"})}),n.jsxs("div",{style:{fontSize:"10px",color:"rgba(0, 210, 190, 0.8)",marginTop:"6px",fontWeight:500,display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx("span",{children:""}),n.jsx("span",{children:"Click to select and edit link settings"})]})]},te.id))]})]})]})}),Pt&&n.jsxs("div",{style:{position:"fixed",top:"80px",right:"20px",zIndex:1e5,width:"400px",maxWidth:"calc(100vw - 40px)",maxHeight:"calc(100vh - 100px)",background:"#ffffff",border:"1px solid rgba(0, 0, 0, 0.2)",borderRadius:"16px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.15), 0 0 0 1px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",animation:"slideInRight 0.3s ease-out"},onClick:te=>te.stopPropagation(),children:[n.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[n.jsx("h3",{style:{margin:0,color:"#000",fontSize:"16px",fontWeight:600},children:" Notes & Changes"}),n.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[n.jsx("button",{onClick:Le,title:"Create New Note",style:{background:"rgba(0, 210, 190, 0.15)",border:"1px solid rgba(0, 210, 190, 0.3)",color:"#00d2be",fontSize:"18px",cursor:"pointer",padding:"4px 10px",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"6px",transition:"all 0.2s ease"},onMouseEnter:te=>{te.currentTarget.style.background="rgba(0, 210, 190, 0.25)",te.currentTarget.style.borderColor="#00d2be"},onMouseLeave:te=>{te.currentTarget.style.background="rgba(0, 210, 190, 0.15)",te.currentTarget.style.borderColor="rgba(0, 210, 190, 0.3)"},children:"+"}),n.jsx("button",{onClick:()=>{try{localStorage.setItem(`ziplofy-theme-notes-${he||"new"}`,JSON.stringify(Ne))}catch(te){console.warn("Failed to save notes:",te)}ee(!1)},style:{background:"transparent",border:"none",color:"#fff",fontSize:"20px",cursor:"pointer",padding:"0",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"6px",transition:"all 0.2s ease"},onMouseEnter:te=>{te.currentTarget.style.background="rgba(255, 255, 255, 0.1)"},onMouseLeave:te=>{te.currentTarget.style.background="transparent"},children:""})]})]}),n.jsxs("div",{style:{fontSize:"11px",color:"rgba(255, 255, 255, 0.5)"},children:[Ne.length," ",Ne.length===1?"note":"notes"]})]}),n.jsx("div",{style:{padding:"12px",flex:1,overflowY:"auto",display:"flex",flexDirection:"column",gap:"12px"},children:Ne.length===0?n.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"rgba(255, 255, 255, 0.4)",fontSize:"13px"},children:[n.jsx("div",{style:{fontSize:"32px",marginBottom:"12px"},children:""}),n.jsx("div",{children:"No notes yet"}),n.jsx("div",{style:{fontSize:"11px",marginTop:"8px",color:"rgba(255, 255, 255, 0.3)"},children:"Click the + button to create your first note"})]}):Ne.map(te=>n.jsxs("div",{style:{background:ne===te.id?"rgba(0, 210, 190, 0.1)":"rgba(255, 255, 255, 0.05)",border:ne===te.id?"1px solid rgba(0, 210, 190, 0.3)":"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"12px",transition:"all 0.2s ease"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[n.jsxs("div",{style:{fontSize:"10px",color:"rgba(255, 255, 255, 0.4)"},children:[new Date(te.createdAt).toLocaleDateString()," ",new Date(te.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),n.jsx("button",{onClick:()=>Ge(te.id),style:{background:"transparent",border:"none",color:"rgba(220, 38, 38, 0.6)",fontSize:"14px",cursor:"pointer",padding:"2px 6px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:je=>{je.currentTarget.style.background="rgba(220, 38, 38, 0.15)",je.currentTarget.style.color="#ef4444"},onMouseLeave:je=>{je.currentTarget.style.background="transparent",je.currentTarget.style.color="rgba(220, 38, 38, 0.6)"},title:"Delete note",children:""})]}),ne===te.id?n.jsx("textarea",{value:te.content,onChange:je=>Ue(te.id,je.target.value),onBlur:()=>{te.content.trim()===""?Ge(te.id):M(null)},autoFocus:!0,placeholder:"Write your note here...",style:{width:"100%",minHeight:"100px",maxHeight:"200px",padding:"8px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"#fff",fontSize:"13px",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',lineHeight:"1.5",outline:"none",resize:"vertical"},onKeyDown:je=>{je.key==="Escape"&&(te.content.trim()===""?Ge(te.id):M(null))}}):n.jsx("div",{onClick:()=>M(te.id),style:{color:"#fff",fontSize:"13px",lineHeight:"1.6",cursor:"text",whiteSpace:"pre-wrap",wordBreak:"break-word",minHeight:"40px",padding:"8px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:je=>{je.currentTarget.style.background="rgba(255, 255, 255, 0.05)"},onMouseLeave:je=>{je.currentTarget.style.background="transparent"},children:te.content||n.jsx("span",{style:{color:"rgba(255, 255, 255, 0.3)",fontStyle:"italic"},children:"Click to edit..."})})]},te.id))})]}),K&&n.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e5,background:"rgba(0, 0, 0, 0.9)",display:"flex",flexDirection:"column"},children:[n.jsxs("div",{style:{background:"#1a1a1a",padding:"16px 24px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsxs("h2",{style:{margin:0,color:"#fff",fontSize:"18px",fontWeight:600},children:["Theme Preview: ",v||"My Theme"]}),n.jsx("span",{style:{background:"rgba(0, 210, 190, 0.2)",color:"#00d2be",padding:"4px 12px",borderRadius:"4px",fontSize:"12px",fontWeight:600},children:"Live Preview"})]}),n.jsxs("div",{style:{display:"flex",gap:"8px"},children:[n.jsx("button",{onClick:()=>{const te=document.getElementById("theme-preview-iframe");te&&te.contentWindow&&te.contentWindow.location.reload()},style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"#fff",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:500,transition:"all 0.2s"},onMouseEnter:te=>{te.currentTarget.style.background="rgba(255, 255, 255, 0.15)"},onMouseLeave:te=>{te.currentTarget.style.background="rgba(255, 255, 255, 0.1)"},children:" Reload"}),n.jsx("button",{onClick:()=>D(!1),style:{background:"rgba(220, 38, 38, 0.2)",border:"1px solid rgba(220, 38, 38, 0.3)",color:"#ff6b6b",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:500,transition:"all 0.2s"},onMouseEnter:te=>{te.currentTarget.style.background="rgba(220, 38, 38, 0.3)"},onMouseLeave:te=>{te.currentTarget.style.background="rgba(220, 38, 38, 0.2)"},children:" Close"})]})]}),n.jsx("div",{style:{flex:1,position:"relative",overflow:"hidden"},children:n.jsx("iframe",{id:"theme-preview-iframe",srcDoc:Q,style:{width:"100%",height:"100%",border:"none",background:"#fff"},title:"Theme Preview",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-presentation",onLoad:te=>{const je=te.currentTarget;je&&je.contentDocument&&Q&&(je.contentDocument.open(),je.contentDocument.write(Q),je.contentDocument.close())}},`preview-${Date.now()}-${Q.length}`)})]})]})};var UB={4729:((a,r,e)=>{var t,s,o;(function(i){s=[e(5706),e(4193)],t=i,o=typeof t=="function"?t.apply(r,s):t,o!==void 0&&(a.exports=o)})(function(i,l){var c=Array.prototype.slice;function d(V,W,Z){return Z.length<=4?V.call(W,Z[0],Z[1],Z[2],Z[3]):V.apply(W,Z)}function h(V,W){return c.call(V,W)}function m(V,W){return V==null?!1:(i.isArray(W)||(W=h(arguments,1)),i.all(W,function(Z){return Z in V}))}var y=(function(){var V=!1,W=-1;function Z(){W++,V=!0,i.defer(function(){V=!1})}return function(){return V||Z(),W}})();function x(){this.registeredObjects=[],this.cidIndexes=[]}x.prototype={isRegistered:function(V){return V&&V.cid?this.registeredObjects[V.cid]:i.contains(this.registeredObjects,V)},register:function(V){return this.isRegistered(V)?!1:(V&&V.cid?(this.registeredObjects[V.cid]=V,this.cidIndexes.push(V.cid)):this.registeredObjects.push(V),!0)},unregister:function(V){if(this.isRegistered(V)){if(V&&V.cid)delete this.registeredObjects[V.cid],this.cidIndexes.splice(i.indexOf(this.cidIndexes,V.cid),1);else{var W=i.indexOf(this.registeredObjects,V);this.registeredObjects.splice(W,1)}return!0}return!1},get:function(){return i.map(this.cidIndexes,function(V){return this.registeredObjects[V]},this).concat(this.registeredObjects)}};function b(V,W,Z,A){for(var q=0,I=W.length,K;q<I;q++)if(K=W[q],!!K){if(V==="on"){if(!A.objectRegistry.register(K))continue}else if(!A.objectRegistry.unregister(K))continue;i.isFunction(K[V])&&K[V]("all",Z,A)}}function v(V,W){var Z=W.type,A=W.undoTypes,q=!A[Z]||A[Z][V];i.isFunction(q)&&q(W.object,W.before,W.after,W.options)}function j(V,W,Z,A,q){if(!(Z.isCurrentlyUndoRedoing||V==="undo"&&Z.pointer===-1||V==="redo"&&Z.pointer===Z.length-1)){Z.isCurrentlyUndoRedoing=!0;var I,K,D=V==="undo";for(q?K=D&&Z.pointer===Z.length-1||!D&&Z.pointer===-1?i.clone(Z.models):c.apply(Z.models,D?[0,Z.pointer]:[Z.pointer,Z.length-1]):(I=Z.at(D?Z.pointer:Z.pointer+1),K=A?Z.where({magicFusionIndex:I.get("magicFusionIndex")}):[I]),Z.pointer+=(D?-1:1)*K.length;I=D?K.pop():K.shift();)I[V]();Z.isCurrentlyUndoRedoing=!1,W.trigger(V,W)}}function S(V,W){var Z=V.condition,A=typeof Z;return A==="function"?!!d(Z,V,W):A==="boolean"?Z:!0}function k(V,W,Z,A){if(V.track&&!V.isCurrentlyUndoRedoing&&W in A&&S(A[W],Z)){var q=d(A[W].on,A[W],Z),I;if(m(q,"object","before","after")){if(q.type=W,q.magicFusionIndex=y(),q.undoTypes=A,V.pointer<V.length-1)for(var I=V.length-V.pointer-1;I--;)V.pop();V.pointer=V.length,V.add(q),V.length>V.maximumStackLength&&(V.shift(),V.pointer--)}}}var N={add:{undo:function(V,W,Z,A){V.remove(Z,A)},redo:function(V,W,Z,A){A.index&&(A.at=A.index),V.add(Z,A)},on:function(V,W,Z){return{object:W,before:void 0,after:V,options:i.clone(Z)}}},remove:{undo:function(V,W,Z,A){"index"in A&&(A.at=A.index),V.add(W,A)},redo:function(V,W,Z,A){V.remove(W,A)},on:function(V,W,Z){return{object:W,before:V,after:void 0,options:i.clone(Z)}}},change:{undo:function(V,W,Z,A){i.isEmpty(W)?i.each(i.keys(Z),V.unset,V):(V.set(W),A&&A.unsetData&&A.unsetData.before&&A.unsetData.before.length&&i.each(A.unsetData.before,V.unset,V))},redo:function(V,W,Z,A){i.isEmpty(Z)?i.each(i.keys(W),V.unset,V):(V.set(Z),A&&A.unsetData&&A.unsetData.after&&A.unsetData.after.length&&i.each(A.unsetData.after,V.unset,V))},on:function(V,W){var Z=V.changedAttributes(),A=i.keys(Z),q=i.pick(V.previousAttributes(),A),I=i.keys(q),K=(W||(W={})).unsetData={after:[],before:[]};return A.length!=I.length&&(A.length>I.length?i.each(A,function(D){D in q||K.before.push(D)},this):i.each(I,function(D){D in Z||K.after.push(D)})),{object:V,before:q,after:Z,options:i.clone(W)}}},reset:{undo:function(V,W,Z){V.reset(W)},redo:function(V,W,Z){V.reset(Z)},on:function(V,W){return{object:V,before:W.previousModels,after:i.clone(V.models)}}}};function P(){}P.prototype=N;function R(V,W,Z,A){if(typeof W=="object")return i.each(W,function(q,I){V===2?R(V,q,Z,A):R(V,I,q,Z)});switch(V){case 0:m(Z,"undo","redo","on")&&i.all(i.pick(Z,"undo","redo","on"),i.isFunction)&&(A[W]=Z);break;case 1:A[W]&&i.isObject(Z)&&(A[W]=i.extend({},A[W],Z));break;case 2:delete A[W];break}return this}var F=l.Model.extend({defaults:{type:null,object:null,before:null,after:null,magicFusionIndex:null},undo:function(V){v("undo",this.attributes)},redo:function(V){v("redo",this.attributes)}}),z=l.Collection.extend({model:F,pointer:-1,track:!1,isCurrentlyUndoRedoing:!1,maximumStackLength:1/0,setMaxLength:function(V){this.maximumStackLength=V}}),H=l.Model.extend({defaults:{maximumStackLength:1/0,track:!1},initialize:function(V){this.stack=new z,this.objectRegistry=new x,this.undoTypes=new P,this.stack.setMaxLength(this.get("maximumStackLength")),this.on("change:maximumStackLength",function(W,Z){this.stack.setMaxLength(Z)},this),V&&V.track&&this.startTracking(),V&&V.register&&(i.isArray(V.register)||i.isArguments(V.register)?d(this.register,this,V.register):this.register(V.register))},startTracking:function(){this.set("track",!0),this.stack.track=!0},stopTracking:function(){this.set("track",!1),this.stack.track=!1},isTracking:function(){return this.get("track")},_addToStack:function(V){k(this.stack,V,h(arguments,1),this.undoTypes)},register:function(){b("on",arguments,this._addToStack,this)},unregister:function(){b("off",arguments,this._addToStack,this)},unregisterAll:function(){d(this.unregister,this,this.objectRegistry.get())},undo:function(V){j("undo",this,this.stack,V)},undoAll:function(){j("undo",this,this.stack,!1,!0)},redo:function(V){j("redo",this,this.stack,V)},redoAll:function(){j("redo",this,this.stack,!1,!0)},isAvailable:function(V){var W=this.stack,Z=W.length;switch(V){case"undo":return Z>0&&W.pointer>-1;case"redo":return Z>0&&W.pointer<Z-1;default:return!1}},merge:function(V){for(var W=i.isArray(V)?V:h(arguments),Z;Z=W.pop();)Z instanceof H&&Z.stack instanceof z&&(Z.stack=this.stack)},addUndoType:function(V,W){R(0,V,W,this.undoTypes)},changeUndoType:function(V,W){R(1,V,W,this.undoTypes)},removeUndoType:function(V){R(2,V,void 0,this.undoTypes)},clear:function(){this.stack.reset(),this.stack.pointer=-1}});return i.extend(H,{defaults:function(V){i.extend(H.prototype.defaults,V)},addUndoType:function(V,W){R(0,V,W,N)},changeUndoType:function(V,W){R(1,V,W,N)},removeUndoType:function(V){R(2,V,void 0,N)}}),l.UndoManager=H})}),4193:((a,r,e)=>{var t,s;(function(o){var i=typeof self=="object"&&self.self===self&&self||typeof e.g=="object"&&e.g.global===e.g&&e.g;t=[e(5706),e(7774),r],s=(function(l,c,d){i.Backbone=o(i,d,l,c)}).apply(r,t),s!==void 0&&(a.exports=s)})(function(o,i,l,c){var d=o.Backbone,h=Array.prototype.slice;i.VERSION="1.4.1",i.$=c,i.noConflict=function(){return o.Backbone=d,this},i.emulateHTTP=!1,i.emulateJSON=!1;var m=i.Events={},y=/\s+/,x,b=function(M,U,J,ce,ue){var xe=0,he;if(J&&typeof J=="object")for(ce!==void 0&&("context"in ue)&&ue.context===void 0&&(ue.context=ce),he=l.keys(J);xe<he.length;xe++)U=b(M,U,he[xe],J[he[xe]],ue);else if(J&&y.test(J))for(he=J.split(y);xe<he.length;xe++)U=M(U,he[xe],ce,ue);else U=M(U,J,ce,ue);return U};m.on=function(M,U,J){if(this._events=b(v,this._events||{},M,U,{context:J,ctx:this,listening:x}),x){var ce=this._listeners||(this._listeners={});ce[x.id]=x,x.interop=!1}return this},m.listenTo=function(M,U,J){if(!M)return this;var ce=M._listenId||(M._listenId=l.uniqueId("l")),ue=this._listeningTo||(this._listeningTo={}),xe=x=ue[ce];xe||(this._listenId||(this._listenId=l.uniqueId("l")),xe=x=ue[ce]=new R(this,M));var he=j(M,U,J,this);if(x=void 0,he)throw he;return xe.interop&&xe.on(U,J),this};var v=function(M,U,J,ce){if(J){var ue=M[U]||(M[U]=[]),xe=ce.context,he=ce.ctx,se=ce.listening;se&&se.count++,ue.push({callback:J,context:xe,ctx:xe||he,listening:se})}return M},j=function(M,U,J,ce){try{M.on(U,J,ce)}catch(ue){return ue}};m.off=function(M,U,J){return this._events?(this._events=b(S,this._events,M,U,{context:J,listeners:this._listeners}),this):this},m.stopListening=function(M,U,J){var ce=this._listeningTo;if(!ce)return this;for(var ue=M?[M._listenId]:l.keys(ce),xe=0;xe<ue.length;xe++){var he=ce[ue[xe]];if(!he)break;he.obj.off(U,J,this),he.interop&&he.off(U,J)}return l.isEmpty(ce)&&(this._listeningTo=void 0),this};var S=function(M,U,J,ce){if(M){var ue=ce.context,xe=ce.listeners,he=0,se;if(!U&&!ue&&!J){for(se=l.keys(xe);he<se.length;he++)xe[se[he]].cleanup();return}for(se=U?[U]:l.keys(M);he<se.length;he++){U=se[he];var Le=M[U];if(!Le)break;for(var Ue=[],Ge=0;Ge<Le.length;Ge++){var ie=Le[Ge];if(J&&J!==ie.callback&&J!==ie.callback._callback||ue&&ue!==ie.context)Ue.push(ie);else{var _e=ie.listening;_e&&_e.off(U,J)}}Ue.length?M[U]=Ue:delete M[U]}return M}};m.once=function(M,U,J){var ce=b(k,{},M,U,this.off.bind(this));return typeof M=="string"&&J==null&&(U=void 0),this.on(ce,U,J)},m.listenToOnce=function(M,U,J){var ce=b(k,{},U,J,this.stopListening.bind(this,M));return this.listenTo(M,ce)};var k=function(M,U,J,ce){if(J){var ue=M[U]=l.once(function(){ce(U,ue),J.apply(this,arguments)});ue._callback=J}return M};m.trigger=function(M){if(!this._events)return this;for(var U=Math.max(0,arguments.length-1),J=Array(U),ce=0;ce<U;ce++)J[ce]=arguments[ce+1];return b(N,this._events,M,void 0,J),this};var N=function(M,U,J,ce){if(M){var ue=M[U],xe=M.all;ue&&xe&&(xe=xe.slice()),ue&&P(ue,ce),xe&&P(xe,[U].concat(ce))}return M},P=function(M,U){var J,ce=-1,ue=M.length,xe=U[0],he=U[1],se=U[2];switch(U.length){case 0:for(;++ce<ue;)(J=M[ce]).callback.call(J.ctx);return;case 1:for(;++ce<ue;)(J=M[ce]).callback.call(J.ctx,xe);return;case 2:for(;++ce<ue;)(J=M[ce]).callback.call(J.ctx,xe,he);return;case 3:for(;++ce<ue;)(J=M[ce]).callback.call(J.ctx,xe,he,se);return;default:for(;++ce<ue;)(J=M[ce]).callback.apply(J.ctx,U);return}},R=function(M,U){this.id=M._listenId,this.listener=M,this.obj=U,this.interop=!0,this.count=0,this._events=void 0};R.prototype.on=m.on,R.prototype.off=function(M,U){var J;this.interop?(this._events=b(S,this._events,M,U,{context:void 0,listeners:void 0}),J=!this._events):(this.count--,J=this.count===0),J&&this.cleanup()},R.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},m.bind=m.on,m.unbind=m.off,l.extend(i,m);var F=i.Model=function(M,U){var J=M||{};U||(U={}),this.preinitialize.apply(this,arguments),this.cid=l.uniqueId(this.cidPrefix),this.attributes={},U.collection&&(this.collection=U.collection),U.parse&&(J=this.parse(J,U)||{});var ce=l.result(this,"defaults");J=l.defaults(l.extend({},ce,J),ce),this.set(J,U),this.changed={},this.initialize.apply(this,arguments)};l.extend(F.prototype,m,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(M){return l.clone(this.attributes)},sync:function(){return i.sync.apply(this,arguments)},get:function(M){return this.attributes[M]},escape:function(M){return l.escape(this.get(M))},has:function(M){return this.get(M)!=null},matches:function(M){return!!l.iteratee(M,this)(this.attributes)},set:function(M,U,J){if(M==null)return this;var ce;if(typeof M=="object"?(ce=M,J=U):(ce={})[M]=U,J||(J={}),!this._validate(ce,J))return!1;var ue=J.unset,xe=J.silent,he=[],se=this._changing;this._changing=!0,se||(this._previousAttributes=l.clone(this.attributes),this.changed={});var Le=this.attributes,Ue=this.changed,Ge=this._previousAttributes;for(var ie in ce)U=ce[ie],l.isEqual(Le[ie],U)||he.push(ie),l.isEqual(Ge[ie],U)?delete Ue[ie]:Ue[ie]=U,ue?delete Le[ie]:Le[ie]=U;if(this.idAttribute in ce){var _e=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,_e,J)}if(!xe){he.length&&(this._pending=J);for(var le=0;le<he.length;le++)this.trigger("change:"+he[le],this,Le[he[le]],J)}if(se)return this;if(!xe)for(;this._pending;)J=this._pending,this._pending=!1,this.trigger("change",this,J);return this._pending=!1,this._changing=!1,this},unset:function(M,U){return this.set(M,void 0,l.extend({},U,{unset:!0}))},clear:function(M){var U={};for(var J in this.attributes)U[J]=void 0;return this.set(U,l.extend({},M,{unset:!0}))},hasChanged:function(M){return M==null?!l.isEmpty(this.changed):l.has(this.changed,M)},changedAttributes:function(M){if(!M)return this.hasChanged()?l.clone(this.changed):!1;var U=this._changing?this._previousAttributes:this.attributes,J={},ce;for(var ue in M){var xe=M[ue];l.isEqual(U[ue],xe)||(J[ue]=xe,ce=!0)}return ce?J:!1},previous:function(M){return M==null||!this._previousAttributes?null:this._previousAttributes[M]},previousAttributes:function(){return l.clone(this._previousAttributes)},fetch:function(M){M=l.extend({parse:!0},M);var U=this,J=M.success;return M.success=function(ce){var ue=M.parse?U.parse(ce,M):ce;if(!U.set(ue,M))return!1;J&&J.call(M.context,U,ce,M),U.trigger("sync",U,ce,M)},ne(this,M),this.sync("read",this,M)},save:function(M,U,J){var ce;M==null||typeof M=="object"?(ce=M,J=U):(ce={})[M]=U,J=l.extend({validate:!0,parse:!0},J);var ue=J.wait;if(ce&&!ue){if(!this.set(ce,J))return!1}else if(!this._validate(ce,J))return!1;var xe=this,he=J.success,se=this.attributes;J.success=function(Ge){xe.attributes=se;var ie=J.parse?xe.parse(Ge,J):Ge;if(ue&&(ie=l.extend({},ce,ie)),ie&&!xe.set(ie,J))return!1;he&&he.call(J.context,xe,Ge,J),xe.trigger("sync",xe,Ge,J)},ne(this,J),ce&&ue&&(this.attributes=l.extend({},se,ce));var Le=this.isNew()?"create":J.patch?"patch":"update";Le==="patch"&&!J.attrs&&(J.attrs=ce);var Ue=this.sync(Le,this,J);return this.attributes=se,Ue},destroy:function(M){M=M?l.clone(M):{};var U=this,J=M.success,ce=M.wait,ue=function(){U.stopListening(),U.trigger("destroy",U,U.collection,M)};M.success=function(he){ce&&ue(),J&&J.call(M.context,U,he,M),U.isNew()||U.trigger("sync",U,he,M)};var xe=!1;return this.isNew()?l.defer(M.success):(ne(this,M),xe=this.sync("delete",this,M)),ce||ue(),xe},url:function(){var M=l.result(this,"urlRoot")||l.result(this.collection,"url")||Ie();if(this.isNew())return M;var U=this.get(this.idAttribute);return M.replace(/[^\/]$/,"$&/")+encodeURIComponent(U)},parse:function(M,U){return M},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(M){return this._validate({},l.extend({},M,{validate:!0}))},_validate:function(M,U){if(!U.validate||!this.validate)return!0;M=l.extend({},this.attributes,M);var J=this.validationError=this.validate(M,U)||null;return J?(this.trigger("invalid",this,J,l.extend(U,{validationError:J})),!1):!0}});var z=i.Collection=function(M,U){U||(U={}),this.preinitialize.apply(this,arguments),U.model&&(this.model=U.model),U.comparator!==void 0&&(this.comparator=U.comparator),this._reset(),this.initialize.apply(this,arguments),M&&this.reset(M,l.extend({silent:!0},U))},H={add:!0,remove:!0,merge:!0},V={add:!0,remove:!1},W=function(M,U,J){J=Math.min(Math.max(J,0),M.length);var ce=Array(M.length-J),ue=U.length,xe;for(xe=0;xe<ce.length;xe++)ce[xe]=M[xe+J];for(xe=0;xe<ue;xe++)M[xe+J]=U[xe];for(xe=0;xe<ce.length;xe++)M[xe+ue+J]=ce[xe]};l.extend(z.prototype,m,{model:F,preinitialize:function(){},initialize:function(){},toJSON:function(M){return this.map(function(U){return U.toJSON(M)})},sync:function(){return i.sync.apply(this,arguments)},add:function(M,U){return this.set(M,l.extend({merge:!1},U,V))},remove:function(M,U){U=l.extend({},U);var J=!l.isArray(M);M=J?[M]:M.slice();var ce=this._removeModels(M,U);return!U.silent&&ce.length&&(U.changes={added:[],merged:[],removed:ce},this.trigger("update",this,U)),J?ce[0]:ce},set:function(M,U){if(M!=null){U=l.extend({},H,U),U.parse&&!this._isModel(M)&&(M=this.parse(M,U)||[]);var J=!l.isArray(M);M=J?[M]:M.slice();var ce=U.at;ce!=null&&(ce=+ce),ce>this.length&&(ce=this.length),ce<0&&(ce+=this.length+1);var ue=[],xe=[],he=[],se=[],Le={},Ue=U.add,Ge=U.merge,ie=U.remove,_e=!1,le=this.comparator&&ce==null&&U.sort!==!1,Xe=l.isString(this.comparator)?this.comparator:null,Fe,dt;for(dt=0;dt<M.length;dt++){Fe=M[dt];var lt=this.get(Fe);if(lt){if(Ge&&Fe!==lt){var ft=this._isModel(Fe)?Fe.attributes:Fe;U.parse&&(ft=lt.parse(ft,U)),lt.set(ft,U),he.push(lt),le&&!_e&&(_e=lt.hasChanged(Xe))}Le[lt.cid]||(Le[lt.cid]=!0,ue.push(lt)),M[dt]=lt}else Ue&&(Fe=M[dt]=this._prepareModel(Fe,U),Fe&&(xe.push(Fe),this._addReference(Fe,U),Le[Fe.cid]=!0,ue.push(Fe)))}if(ie){for(dt=0;dt<this.length;dt++)Fe=this.models[dt],Le[Fe.cid]||se.push(Fe);se.length&&this._removeModels(se,U)}var Ze=!1,Nt=!le&&Ue&&ie;if(ue.length&&Nt?(Ze=this.length!==ue.length||l.some(this.models,function(Mt,vt){return Mt!==ue[vt]}),this.models.length=0,W(this.models,ue,0),this.length=this.models.length):xe.length&&(le&&(_e=!0),W(this.models,xe,ce??this.length),this.length=this.models.length),_e&&this.sort({silent:!0}),!U.silent){for(dt=0;dt<xe.length;dt++)ce!=null&&(U.index=ce+dt),Fe=xe[dt],Fe.trigger("add",Fe,this,U);(_e||Ze)&&this.trigger("sort",this,U),(xe.length||se.length||he.length)&&(U.changes={added:xe,removed:se,merged:he},this.trigger("update",this,U))}return J?M[0]:M}},reset:function(M,U){U=U?l.clone(U):{};for(var J=0;J<this.models.length;J++)this._removeReference(this.models[J],U);return U.previousModels=this.models,this._reset(),M=this.add(M,l.extend({silent:!0},U)),U.silent||this.trigger("reset",this,U),M},push:function(M,U){return this.add(M,l.extend({at:this.length},U))},pop:function(M){var U=this.at(this.length-1);return this.remove(U,M)},unshift:function(M,U){return this.add(M,l.extend({at:0},U))},shift:function(M){var U=this.at(0);return this.remove(U,M)},slice:function(){return h.apply(this.models,arguments)},get:function(M){if(M!=null)return this._byId[M]||this._byId[this.modelId(this._isModel(M)?M.attributes:M,M.idAttribute)]||M.cid&&this._byId[M.cid]},has:function(M){return this.get(M)!=null},at:function(M){return M<0&&(M+=this.length),this.models[M]},where:function(M,U){return this[U?"find":"filter"](M)},findWhere:function(M){return this.where(M,!0)},sort:function(M){var U=this.comparator;if(!U)throw new Error("Cannot sort a set without a comparator");M||(M={});var J=U.length;return l.isFunction(U)&&(U=U.bind(this)),J===1||l.isString(U)?this.models=this.sortBy(U):this.models.sort(U),M.silent||this.trigger("sort",this,M),this},pluck:function(M){return this.map(M+"")},fetch:function(M){M=l.extend({parse:!0},M);var U=M.success,J=this;return M.success=function(ce){var ue=M.reset?"reset":"set";J[ue](ce,M),U&&U.call(M.context,J,ce,M),J.trigger("sync",J,ce,M)},ne(this,M),this.sync("read",this,M)},create:function(M,U){U=U?l.clone(U):{};var J=U.wait;if(M=this._prepareModel(M,U),!M)return!1;J||this.add(M,U);var ce=this,ue=U.success;return U.success=function(xe,he,se){J&&ce.add(xe,se),ue&&ue.call(se.context,xe,he,se)},M.save(null,U),M},parse:function(M,U){return M},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(M,U){return M[U||this.model.prototype.idAttribute||"id"]},values:function(){return new A(this,q)},keys:function(){return new A(this,I)},entries:function(){return new A(this,K)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(M,U){if(this._isModel(M))return M.collection||(M.collection=this),M;U=U?l.clone(U):{},U.collection=this;var J;return this.model.prototype?J=new this.model(M,U):J=this.model(M,U),J.validationError?(this.trigger("invalid",this,J.validationError,U),!1):J},_removeModels:function(M,U){for(var J=[],ce=0;ce<M.length;ce++){var ue=this.get(M[ce]);if(ue){var xe=this.indexOf(ue);this.models.splice(xe,1),this.length--,delete this._byId[ue.cid];var he=this.modelId(ue.attributes,ue.idAttribute);he!=null&&delete this._byId[he],U.silent||(U.index=xe,ue.trigger("remove",ue,this,U)),J.push(ue),this._removeReference(ue,U)}}return J},_isModel:function(M){return M instanceof F},_addReference:function(M,U){this._byId[M.cid]=M;var J=this.modelId(M.attributes,M.idAttribute);J!=null&&(this._byId[J]=M),M.on("all",this._onModelEvent,this)},_removeReference:function(M,U){delete this._byId[M.cid];var J=this.modelId(M.attributes,M.idAttribute);J!=null&&delete this._byId[J],this===M.collection&&delete M.collection,M.off("all",this._onModelEvent,this)},_onModelEvent:function(M,U,J,ce){if(U){if((M==="add"||M==="remove")&&J!==this)return;if(M==="destroy"&&this.remove(U,ce),M==="changeId"){var ue=this.modelId(U.previousAttributes(),U.idAttribute),xe=this.modelId(U.attributes,U.idAttribute);ue!=null&&delete this._byId[ue],xe!=null&&(this._byId[xe]=U)}}this.trigger.apply(this,arguments)}});var Z=typeof Symbol=="function"&&Symbol.iterator;Z&&(z.prototype[Z]=z.prototype.values);var A=function(M,U){this._collection=M,this._kind=U,this._index=0},q=1,I=2,K=3;Z&&(A.prototype[Z]=function(){return this}),A.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var M=this._collection.at(this._index);this._index++;var U;if(this._kind===q)U=M;else{var J=this._collection.modelId(M.attributes,M.idAttribute);this._kind===I?U=J:U=[J,M]}return{value:U,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var D=i.View=function(M){this.cid=l.uniqueId("view"),this.preinitialize.apply(this,arguments),l.extend(this,l.pick(M,oe)),this._ensureElement(),this.initialize.apply(this,arguments)},Q=/^(\S+)\s*(.*)$/,oe=["model","collection","el","id","attributes","className","tagName","events"];l.extend(D.prototype,m,{tagName:"div",$:function(M){return this.$el.find(M)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(M){return this.undelegateEvents(),this._setElement(M),this.delegateEvents(),this},_setElement:function(M){this.$el=M instanceof i.$?M:i.$(M),this.el=this.$el[0]},delegateEvents:function(M){if(M||(M=l.result(this,"events")),!M)return this;this.undelegateEvents();for(var U in M){var J=M[U];if(l.isFunction(J)||(J=this[J]),!!J){var ce=U.match(Q);this.delegate(ce[1],ce[2],J.bind(this))}}return this},delegate:function(M,U,J){return this.$el.on(M+".delegateEvents"+this.cid,U,J),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(M,U,J){return this.$el.off(M+".delegateEvents"+this.cid,U,J),this},_createElement:function(M){return document.createElement(M)},_ensureElement:function(){if(this.el)this.setElement(l.result(this,"el"));else{var M=l.extend({},l.result(this,"attributes"));this.id&&(M.id=l.result(this,"id")),this.className&&(M.class=l.result(this,"className")),this.setElement(this._createElement(l.result(this,"tagName"))),this._setAttributes(M)}},_setAttributes:function(M){this.$el.attr(M)}});var re=function(M,U,J,ce){switch(U){case 1:return function(){return M[J](this[ce])};case 2:return function(ue){return M[J](this[ce],ue)};case 3:return function(ue,xe){return M[J](this[ce],G(ue,this),xe)};case 4:return function(ue,xe,he){return M[J](this[ce],G(ue,this),xe,he)};default:return function(){var ue=h.call(arguments);return ue.unshift(this[ce]),M[J].apply(M,ue)}}},Te=function(M,U,J,ce){l.each(J,function(ue,xe){U[xe]&&(M.prototype[xe]=re(U,ue,xe,ce))})},G=function(M,U){return l.isFunction(M)?M:l.isObject(M)&&!U._isModel(M)?Y(M):l.isString(M)?function(J){return J.get(M)}:M},Y=function(M){var U=l.matches(M);return function(J){return U(J.attributes)}},Se={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},fe={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};l.each([[z,Se,"models"],[F,fe,"attributes"]],function(M){var U=M[0],J=M[1],ce=M[2];U.mixin=function(ue){var xe=l.reduce(l.functions(ue),function(he,se){return he[se]=0,he},{});Te(U,ue,xe,ce)},Te(U,l,J,ce)}),i.sync=function(M,U,J){var ce=Ee[M];l.defaults(J||(J={}),{emulateHTTP:i.emulateHTTP,emulateJSON:i.emulateJSON});var ue={type:ce,dataType:"json"};if(J.url||(ue.url=l.result(U,"url")||Ie()),J.data==null&&U&&(M==="create"||M==="update"||M==="patch")&&(ue.contentType="application/json",ue.data=JSON.stringify(J.attrs||U.toJSON(J))),J.emulateJSON&&(ue.contentType="application/x-www-form-urlencoded",ue.data=ue.data?{model:ue.data}:{}),J.emulateHTTP&&(ce==="PUT"||ce==="DELETE"||ce==="PATCH")){ue.type="POST",J.emulateJSON&&(ue.data._method=ce);var xe=J.beforeSend;J.beforeSend=function(Le){if(Le.setRequestHeader("X-HTTP-Method-Override",ce),xe)return xe.apply(this,arguments)}}ue.type!=="GET"&&!J.emulateJSON&&(ue.processData=!1);var he=J.error;J.error=function(Le,Ue,Ge){J.textStatus=Ue,J.errorThrown=Ge,he&&he.call(J.context,Le,Ue,Ge)};var se=J.xhr=i.ajax(l.extend(ue,J));return U.trigger("request",U,se,J),se};var Ee={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};i.ajax=function(){return i.$.ajax.apply(i.$,arguments)};var Ae=i.Router=function(M){M||(M={}),this.preinitialize.apply(this,arguments),M.routes&&(this.routes=M.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},qe=/\((.*?)\)/g,we=/(\(\?)?:\w+/g,Oe=/\*\w+/g,ze=/[\-{}\[\]+?.,\\\^$|#\s]/g;l.extend(Ae.prototype,m,{preinitialize:function(){},initialize:function(){},route:function(M,U,J){l.isRegExp(M)||(M=this._routeToRegExp(M)),l.isFunction(U)&&(J=U,U=""),J||(J=this[U]);var ce=this;return i.history.route(M,function(ue){var xe=ce._extractParameters(M,ue);ce.execute(J,xe,U)!==!1&&(ce.trigger.apply(ce,["route:"+U].concat(xe)),ce.trigger("route",U,xe),i.history.trigger("route",ce,U,xe))}),this},execute:function(M,U,J){M&&M.apply(this,U)},navigate:function(M,U){return i.history.navigate(M,U),this},_bindRoutes:function(){if(this.routes){this.routes=l.result(this,"routes");for(var M,U=l.keys(this.routes);(M=U.pop())!=null;)this.route(M,this.routes[M])}},_routeToRegExp:function(M){return M=M.replace(ze,"\\$&").replace(qe,"(?:$1)?").replace(we,function(U,J){return J?U:"([^/?]+)"}).replace(Oe,"([^?]*?)"),new RegExp("^"+M+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(M,U){var J=M.exec(U).slice(1);return l.map(J,function(ce,ue){return ue===J.length-1?ce||null:ce?decodeURIComponent(ce):null})}});var We=i.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},pt=/^[#\/]|\s+$/g,Pt=/^\/+|\/+$/g,ee=/#.*$/;We.started=!1,l.extend(We.prototype,m,{interval:50,atRoot:function(){var M=this.location.pathname.replace(/[^\/]$/,"$&/");return M===this.root&&!this.getSearch()},matchRoot:function(){var M=this.decodeFragment(this.location.pathname),U=M.slice(0,this.root.length-1)+"/";return U===this.root},decodeFragment:function(M){return decodeURI(M.replace(/%25/g,"%2525"))},getSearch:function(){var M=this.location.href.replace(/#.*/,"").match(/\?.+/);return M?M[0]:""},getHash:function(M){var U=(M||this).location.href.match(/#(.*)$/);return U?U[1]:""},getPath:function(){var M=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return M.charAt(0)==="/"?M.slice(1):M},getFragment:function(M){return M==null&&(this._usePushState||!this._wantsHashChange?M=this.getPath():M=this.getHash()),M.replace(pt,"")},start:function(M){if(We.started)throw new Error("Backbone.history has already been started");if(We.started=!0,this.options=l.extend({root:"/"},this.options,M),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.history&&this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(Pt,"/"),this._wantsHashChange&&this._wantsPushState)if(!this._hasPushState&&!this.atRoot()){var U=this.root.slice(0,-1)||"/";return this.location.replace(U+"#"+this.getPath()),!0}else this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0});if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var J=document.body,ce=J.insertBefore(this.iframe,J.firstChild).contentWindow;ce.document.open(),ce.document.close(),ce.location.hash="#"+this.fragment}var ue=window.addEventListener||function(xe,he){return attachEvent("on"+xe,he)};if(this._usePushState?ue("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?ue("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var M=window.removeEventListener||function(U,J){return detachEvent("on"+U,J)};this._usePushState?M("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&M("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),We.started=!1},route:function(M,U){this.handlers.unshift({route:M,callback:U})},checkUrl:function(M){var U=this.getFragment();if(U===this.fragment&&this.iframe&&(U=this.getHash(this.iframe.contentWindow)),U===this.fragment)return!1;this.iframe&&this.navigate(U),this.loadUrl()},loadUrl:function(M){return this.matchRoot()?(M=this.fragment=this.getFragment(M),l.some(this.handlers,function(U){if(U.route.test(M))return U.callback(M),!0})):!1},navigate:function(M,U){if(!We.started)return!1;(!U||U===!0)&&(U={trigger:!!U}),M=this.getFragment(M||"");var J=this.root;(M===""||M.charAt(0)==="?")&&(J=J.slice(0,-1)||"/");var ce=J+M;M=M.replace(ee,"");var ue=this.decodeFragment(M);if(this.fragment!==ue){if(this.fragment=ue,this._usePushState)this.history[U.replace?"replaceState":"pushState"]({},document.title,ce);else if(this._wantsHashChange){if(this._updateHash(this.location,M,U.replace),this.iframe&&M!==this.getHash(this.iframe.contentWindow)){var xe=this.iframe.contentWindow;U.replace||(xe.document.open(),xe.document.close()),this._updateHash(xe.location,M,U.replace)}}else return this.location.assign(ce);if(U.trigger)return this.loadUrl(M)}},_updateHash:function(M,U,J){if(J){var ce=M.href.replace(/(javascript:|#).*$/,"");M.replace(ce+"#"+U)}else M.hash="#"+U}}),i.history=new We;var Ne=function(M,U){var J=this,ce;return M&&l.has(M,"constructor")?ce=M.constructor:ce=function(){return J.apply(this,arguments)},l.extend(ce,J,U),ce.prototype=l.create(J.prototype,M),ce.prototype.constructor=ce,ce.__super__=J.prototype,ce};F.extend=z.extend=Ae.extend=D.extend=We.extend=Ne;var Ie=function(){throw new Error('A "url" property or function must be specified')},ne=function(M,U){var J=U.error;U.error=function(ce){J&&J.call(U.context,M,ce,U),M.trigger("error",M,ce,U)}};return i})}),3640:((a,r,e)=>{(function(t){t(e(4408))})(function(t){t.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(o,i){return/^[;{}]$/.test(i)}}),t.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(o,i,l,c){return this.jsonMode?/^[\[,{]$/.test(i)||/^}/.test(l):i==";"&&c.lexical&&c.lexical.type==")"?!1:/^[;{}]$/.test(i)&&!/^;/.test(l)}});var s=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;t.extendMode("xml",{commentStart:"<!--",commentEnd:"-->",newlineAfterToken:function(o,i,l,c){var d=!1;return this.configuration=="html"&&(d=c.context?s.test(c.context.tagName):!1),!d&&(o=="tag"&&/>$/.test(i)&&c.context||/^</.test(l))}}),t.defineExtension("commentRange",function(o,i,l){var c=this,d=t.innerMode(c.getMode(),c.getTokenAt(i).state).mode;c.operation(function(){if(o)c.replaceRange(d.commentEnd,l),c.replaceRange(d.commentStart,i),i.line==l.line&&i.ch==l.ch&&c.setCursor(i.line,i.ch+d.commentStart.length);else{var h=c.getRange(i,l),m=h.indexOf(d.commentStart),y=h.lastIndexOf(d.commentEnd);m>-1&&y>-1&&y>m&&(h=h.substr(0,m)+h.substring(m+d.commentStart.length,y)+h.substr(y+d.commentEnd.length)),c.replaceRange(h,i,l)}})}),t.defineExtension("autoIndentRange",function(o,i){var l=this;this.operation(function(){for(var c=o.line;c<=i.line;c++)l.indentLine(c,"smart")})}),t.defineExtension("autoFormatRange",function(o,i){var l=this,c=l.getMode(),d=l.getRange(o,i).split(`
`),h=t.copyState(c,l.getTokenAt(o).state),m=l.getOption("tabSize"),y="",x=0,b=o.ch===0;function v(){y+=`
`,b=!0,++x}for(var j=0;j<d.length;++j){for(var S=new t.StringStream(d[j],m);!S.eol();){var k=t.innerMode(c,h),N=c.token(S,h),P=S.current();S.start=S.pos,(!b||/\S/.test(P))&&(y+=P,b=!1),!b&&k.mode.newlineAfterToken&&k.mode.newlineAfterToken(N,P,S.string.slice(S.pos)||d[j+1]||"",k.state)&&v()}!S.pos&&c.blankLine&&c.blankLine(h),!b&&j<d.length-1&&v()}l.operation(function(){l.replaceRange(y,o,i);for(var R=o.line+1,F=o.line+x;R<=F;++R)l.indentLine(R,"smart");l.setSelection(o,l.getCursor(!1))})})})}),4408:(function(a){(function(r,e){a.exports=e()})(this,(function(){var r=navigator.userAgent,e=navigator.platform,t=/gecko\/\d/i.test(r),s=/MSIE \d/.test(r),o=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(r),i=/Edge\/(\d+)/.exec(r),l=s||o||i,c=l&&(s?document.documentMode||6:+(i||o)[1]),d=!i&&/WebKit\//.test(r),h=d&&/Qt\/\d+\.\d+/.test(r),m=!i&&/Chrome\//.test(r),y=/Opera\//.test(r),x=/Apple Computer/.test(navigator.vendor),b=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(r),v=/PhantomJS/.test(r),j=x&&(/Mobile\/\w+/.test(r)||navigator.maxTouchPoints>2),S=/Android/.test(r),k=j||S||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(r),N=j||/Mac/.test(e),P=/\bCrOS\b/.test(r),R=/win/i.test(e),F=y&&r.match(/Version\/(\d*\.\d*)/);F&&(F=Number(F[1])),F&&F>=15&&(y=!1,d=!0);var z=N&&(h||y&&(F==null||F<12.11)),H=t||l&&c>=9;function V(p){return new RegExp("(^|\\s)"+p+"(?:$|\\s)\\s*")}var W=function(p,w){var E=p.className,_=V(w).exec(E);if(_){var O=E.slice(_.index+_[0].length);p.className=E.slice(0,_.index)+(O?_[1]+O:"")}};function Z(p){for(var w=p.childNodes.length;w>0;--w)p.removeChild(p.firstChild);return p}function A(p,w){return Z(p).appendChild(w)}function q(p,w,E,_){var O=document.createElement(p);if(E&&(O.className=E),_&&(O.style.cssText=_),typeof w=="string")O.appendChild(document.createTextNode(w));else if(w)for(var B=0;B<w.length;++B)O.appendChild(w[B]);return O}function I(p,w,E,_){var O=q(p,w,E,_);return O.setAttribute("role","presentation"),O}var K;document.createRange?K=function(p,w,E,_){var O=document.createRange();return O.setEnd(_||p,E),O.setStart(p,w),O}:K=function(p,w,E){var _=document.body.createTextRange();try{_.moveToElementText(p.parentNode)}catch{return _}return _.collapse(!0),_.moveEnd("character",E),_.moveStart("character",w),_};function D(p,w){if(w.nodeType==3&&(w=w.parentNode),p.contains)return p.contains(w);do if(w.nodeType==11&&(w=w.host),w==p)return!0;while(w=w.parentNode)}function Q(){var p;try{p=document.activeElement}catch{p=document.body||null}for(;p&&p.shadowRoot&&p.shadowRoot.activeElement;)p=p.shadowRoot.activeElement;return p}function oe(p,w){var E=p.className;V(w).test(E)||(p.className+=(E?" ":"")+w)}function re(p,w){for(var E=p.split(" "),_=0;_<E.length;_++)E[_]&&!V(E[_]).test(w)&&(w+=" "+E[_]);return w}var Te=function(p){p.select()};j?Te=function(p){p.selectionStart=0,p.selectionEnd=p.value.length}:l&&(Te=function(p){try{p.select()}catch{}});function G(p){var w=Array.prototype.slice.call(arguments,1);return function(){return p.apply(null,w)}}function Y(p,w,E){w||(w={});for(var _ in p)p.hasOwnProperty(_)&&(E!==!1||!w.hasOwnProperty(_))&&(w[_]=p[_]);return w}function Se(p,w,E,_,O){w==null&&(w=p.search(/[^\s\u00a0]/),w==-1&&(w=p.length));for(var B=_||0,X=O||0;;){var ae=p.indexOf("	",B);if(ae<0||ae>=w)return X+(w-B);X+=ae-B,X+=E-X%E,B=ae+1}}var fe=function(){this.id=null,this.f=null,this.time=0,this.handler=G(this.onTimeout,this)};fe.prototype.onTimeout=function(p){p.id=0,p.time<=+new Date?p.f():setTimeout(p.handler,p.time-+new Date)},fe.prototype.set=function(p,w){this.f=w;var E=+new Date+p;(!this.id||E<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,p),this.time=E)};function Ee(p,w){for(var E=0;E<p.length;++E)if(p[E]==w)return E;return-1}var Ae=50,qe={toString:function(){return"CodeMirror.Pass"}},we={scroll:!1},Oe={origin:"*mouse"},ze={origin:"+move"};function We(p,w,E){for(var _=0,O=0;;){var B=p.indexOf("	",_);B==-1&&(B=p.length);var X=B-_;if(B==p.length||O+X>=w)return _+Math.min(X,w-O);if(O+=B-_,O+=E-O%E,_=B+1,O>=w)return _}}var pt=[""];function Pt(p){for(;pt.length<=p;)pt.push(ee(pt)+" ");return pt[p]}function ee(p){return p[p.length-1]}function Ne(p,w){for(var E=[],_=0;_<p.length;_++)E[_]=w(p[_],_);return E}function Ie(p,w,E){for(var _=0,O=E(w);_<p.length&&E(p[_])<=O;)_++;p.splice(_,0,w)}function ne(){}function M(p,w){var E;return Object.create?E=Object.create(p):(ne.prototype=p,E=new ne),w&&Y(w,E),E}var U=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function J(p){return/\w/.test(p)||p>""&&(p.toUpperCase()!=p.toLowerCase()||U.test(p))}function ce(p,w){return w?w.source.indexOf("\\w")>-1&&J(p)?!0:w.test(p):J(p)}function ue(p){for(var w in p)if(p.hasOwnProperty(w)&&p[w])return!1;return!0}var xe=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function he(p){return p.charCodeAt(0)>=768&&xe.test(p)}function se(p,w,E){for(;(E<0?w>0:w<p.length)&&he(p.charAt(w));)w+=E;return w}function Le(p,w,E){for(var _=w>E?-1:1;;){if(w==E)return w;var O=(w+E)/2,B=_<0?Math.ceil(O):Math.floor(O);if(B==w)return p(B)?w:E;p(B)?E=B:w=B+_}}function Ue(p,w,E,_){if(!p)return _(w,E,"ltr",0);for(var O=!1,B=0;B<p.length;++B){var X=p[B];(X.from<E&&X.to>w||w==E&&X.to==w)&&(_(Math.max(X.from,w),Math.min(X.to,E),X.level==1?"rtl":"ltr",B),O=!0)}O||_(w,E,"ltr")}var Ge=null;function ie(p,w,E){var _;Ge=null;for(var O=0;O<p.length;++O){var B=p[O];if(B.from<w&&B.to>w)return O;B.to==w&&(B.from!=B.to&&E=="before"?_=O:Ge=O),B.from==w&&(B.from!=B.to&&E!="before"?_=O:Ge=O)}return _??Ge}var _e=(function(){var p="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",w="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function E(be){return be<=247?p.charAt(be):1424<=be&&be<=1524?"R":1536<=be&&be<=1785?w.charAt(be-1536):1774<=be&&be<=2220?"r":8192<=be&&be<=8203?"w":be==8204?"b":"L"}var _=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,O=/[stwN]/,B=/[LRr]/,X=/[Lb1n]/,ae=/[1n]/;function pe(be,He,nt){this.level=be,this.from=He,this.to=nt}return function(be,He){var nt=He=="ltr"?"L":"R";if(be.length==0||He=="ltr"&&!_.test(be))return!1;for(var Ct=be.length,gt=[],Ht=0;Ht<Ct;++Ht)gt.push(E(be.charCodeAt(Ht)));for(var ir=0,hr=nt;ir<Ct;++ir){var Pr=gt[ir];Pr=="m"?gt[ir]=hr:hr=Pr}for(var Vr=0,Mr=nt;Vr<Ct;++Vr){var Fr=gt[Vr];Fr=="1"&&Mr=="r"?gt[Vr]="n":B.test(Fr)&&(Mr=Fr,Fr=="r"&&(gt[Vr]="R"))}for(var mn=1,dn=gt[0];mn<Ct-1;++mn){var Mn=gt[mn];Mn=="+"&&dn=="1"&&gt[mn+1]=="1"?gt[mn]="1":Mn==","&&dn==gt[mn+1]&&(dn=="1"||dn=="n")&&(gt[mn]=dn),dn=Mn}for(var va=0;va<Ct;++va){var Fn=gt[va];if(Fn==",")gt[va]="N";else if(Fn=="%"){var ds=void 0;for(ds=va+1;ds<Ct&&gt[ds]=="%";++ds);for(var $o=va&&gt[va-1]=="!"||ds<Ct&&gt[ds]=="1"?"1":"N",yo=va;yo<ds;++yo)gt[yo]=$o;va=ds-1}}for(var rs=0,bs=nt;rs<Ct;++rs){var Ws=gt[rs];bs=="L"&&Ws=="1"?gt[rs]="L":B.test(Ws)&&(bs=Ws)}for(var Ps=0;Ps<Ct;++Ps)if(O.test(gt[Ps])){var ns=void 0;for(ns=Ps+1;ns<Ct&&O.test(gt[ns]);++ns);for(var ba=(Ps?gt[Ps-1]:nt)=="L",xo=(ns<Ct?gt[ns]:nt)=="L",Mc=ba==xo?ba?"L":"R":nt,Wl=Ps;Wl<ns;++Wl)gt[Wl]=Mc;Ps=ns-1}for(var Hs=[],mi,ws=0;ws<Ct;)if(X.test(gt[ws])){var $p=ws;for(++ws;ws<Ct&&X.test(gt[ws]);++ws);Hs.push(new pe(0,$p,ws))}else{var io=ws,Ya=Hs.length,Hl=He=="rtl"?1:0;for(++ws;ws<Ct&&gt[ws]!="L";++ws);for(var lo=io;lo<ws;)if(ae.test(gt[lo])){io<lo&&(Hs.splice(Ya,0,new pe(1,io,lo)),Ya+=Hl);var gs=lo;for(++lo;lo<ws&&ae.test(gt[lo]);++lo);Hs.splice(Ya,0,new pe(2,gs,lo)),Ya+=Hl,io=lo}else++lo;io<ws&&Hs.splice(Ya,0,new pe(1,io,ws))}return He=="ltr"&&(Hs[0].level==1&&(mi=be.match(/^\s+/))&&(Hs[0].from=mi[0].length,Hs.unshift(new pe(0,0,mi[0].length))),ee(Hs).level==1&&(mi=be.match(/\s+$/))&&(ee(Hs).to-=mi[0].length,Hs.push(new pe(0,Ct-mi[0].length,Ct)))),He=="rtl"?Hs.reverse():Hs}})();function le(p,w){var E=p.order;return E==null&&(E=p.order=_e(p.text,w)),E}var Xe=[],Fe=function(p,w,E){if(p.addEventListener)p.addEventListener(w,E,!1);else if(p.attachEvent)p.attachEvent("on"+w,E);else{var _=p._handlers||(p._handlers={});_[w]=(_[w]||Xe).concat(E)}};function dt(p,w){return p._handlers&&p._handlers[w]||Xe}function lt(p,w,E){if(p.removeEventListener)p.removeEventListener(w,E,!1);else if(p.detachEvent)p.detachEvent("on"+w,E);else{var _=p._handlers,O=_&&_[w];if(O){var B=Ee(O,E);B>-1&&(_[w]=O.slice(0,B).concat(O.slice(B+1)))}}}function ft(p,w){var E=dt(p,w);if(E.length)for(var _=Array.prototype.slice.call(arguments,2),O=0;O<E.length;++O)E[O].apply(null,_)}function Ze(p,w,E){return typeof w=="string"&&(w={type:w,preventDefault:function(){this.defaultPrevented=!0}}),ft(p,E||w.type,p,w),Wt(w)||w.codemirrorIgnore}function Nt(p){var w=p._handlers&&p._handlers.cursorActivity;if(w)for(var E=p.curOp.cursorActivityHandlers||(p.curOp.cursorActivityHandlers=[]),_=0;_<w.length;++_)Ee(E,w[_])==-1&&E.push(w[_])}function Mt(p,w){return dt(p,w).length>0}function vt(p){p.prototype.on=function(w,E){Fe(this,w,E)},p.prototype.off=function(w,E){lt(this,w,E)}}function Jt(p){p.preventDefault?p.preventDefault():p.returnValue=!1}function wr(p){p.stopPropagation?p.stopPropagation():p.cancelBubble=!0}function Wt(p){return p.defaultPrevented!=null?p.defaultPrevented:p.returnValue==!1}function ye(p){Jt(p),wr(p)}function Be(p){return p.target||p.srcElement}function tt(p){var w=p.which;return w==null&&(p.button&1?w=1:p.button&2?w=3:p.button&4&&(w=2)),N&&p.ctrlKey&&w==1&&(w=3),w}var wt=(function(){if(l&&c<9)return!1;var p=q("div");return"draggable"in p||"dragDrop"in p})(),Ut;function er(p){if(Ut==null){var w=q("span","");A(p,q("span",[w,document.createTextNode("x")])),p.firstChild.offsetHeight!=0&&(Ut=w.offsetWidth<=1&&w.offsetHeight>2&&!(l&&c<8))}var E=Ut?q("span",""):q("span","",null,"display: inline-block; width: 1px; margin-right: -1px");return E.setAttribute("cm-text",""),E}var zr;function rn(p){if(zr!=null)return zr;var w=A(p,document.createTextNode("AA")),E=K(w,0,1).getBoundingClientRect(),_=K(w,1,2).getBoundingClientRect();return Z(p),!E||E.left==E.right?!1:zr=_.right-E.right<3}var _n=`

b`.split(/\n/).length!=3?function(p){for(var w=0,E=[],_=p.length;w<=_;){var O=p.indexOf(`
`,w);O==-1&&(O=p.length);var B=p.slice(w,p.charAt(O-1)=="\r"?O-1:O),X=B.indexOf("\r");X!=-1?(E.push(B.slice(0,X)),w+=X+1):(E.push(B),w=O+1)}return E}:function(p){return p.split(/\r\n?|\n/)},Ur=window.getSelection?function(p){try{return p.selectionStart!=p.selectionEnd}catch{return!1}}:function(p){var w;try{w=p.ownerDocument.selection.createRange()}catch{}return!w||w.parentElement()!=p?!1:w.compareEndPoints("StartToEnd",w)!=0},ar=(function(){var p=q("div");return"oncopy"in p?!0:(p.setAttribute("oncopy","return;"),typeof p.oncopy=="function")})(),br=null;function pn(p){if(br!=null)return br;var w=A(p,q("span","x")),E=w.getBoundingClientRect(),_=K(w,0,1).getBoundingClientRect();return br=Math.abs(E.left-_.left)>1}var In={},on={};function Er(p,w){arguments.length>2&&(w.dependencies=Array.prototype.slice.call(arguments,2)),In[p]=w}function jr(p,w){on[p]=w}function ht(p){if(typeof p=="string"&&on.hasOwnProperty(p))p=on[p];else if(p&&typeof p.name=="string"&&on.hasOwnProperty(p.name)){var w=on[p.name];typeof w=="string"&&(w={name:w}),p=M(w,p),p.name=w.name}else{if(typeof p=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(p))return ht("application/xml");if(typeof p=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(p))return ht("application/json")}return typeof p=="string"?{name:p}:p||{name:"null"}}function vr(p,w){w=ht(w);var E=In[w.name];if(!E)return vr(p,"text/plain");var _=E(p,w);if(Rn.hasOwnProperty(w.name)){var O=Rn[w.name];for(var B in O)O.hasOwnProperty(B)&&(_.hasOwnProperty(B)&&(_["_"+B]=_[B]),_[B]=O[B])}if(_.name=w.name,w.helperType&&(_.helperType=w.helperType),w.modeProps)for(var X in w.modeProps)_[X]=w.modeProps[X];return _}var Rn={};function bn(p,w){var E=Rn.hasOwnProperty(p)?Rn[p]:Rn[p]={};Y(w,E)}function En(p,w){if(w===!0)return w;if(p.copyState)return p.copyState(w);var E={};for(var _ in w){var O=w[_];O instanceof Array&&(O=O.concat([])),E[_]=O}return E}function Wr(p,w){for(var E;p.innerMode&&(E=p.innerMode(w),!(!E||E.mode==p));)w=E.state,p=E.mode;return E||{mode:p,state:w}}function Bn(p,w,E){return p.startState?p.startState(w,E):!0}var te=function(p,w,E){this.pos=this.start=0,this.string=p,this.tabSize=w||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=E};te.prototype.eol=function(){return this.pos>=this.string.length},te.prototype.sol=function(){return this.pos==this.lineStart},te.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},te.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},te.prototype.eat=function(p){var w=this.string.charAt(this.pos),E;if(typeof p=="string"?E=w==p:E=w&&(p.test?p.test(w):p(w)),E)return++this.pos,w},te.prototype.eatWhile=function(p){for(var w=this.pos;this.eat(p););return this.pos>w},te.prototype.eatSpace=function(){for(var p=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>p},te.prototype.skipToEnd=function(){this.pos=this.string.length},te.prototype.skipTo=function(p){var w=this.string.indexOf(p,this.pos);if(w>-1)return this.pos=w,!0},te.prototype.backUp=function(p){this.pos-=p},te.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Se(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Se(this.string,this.lineStart,this.tabSize):0)},te.prototype.indentation=function(){return Se(this.string,null,this.tabSize)-(this.lineStart?Se(this.string,this.lineStart,this.tabSize):0)},te.prototype.match=function(p,w,E){if(typeof p=="string"){var _=function(X){return E?X.toLowerCase():X},O=this.string.substr(this.pos,p.length);if(_(O)==_(p))return w!==!1&&(this.pos+=p.length),!0}else{var B=this.string.slice(this.pos).match(p);return B&&B.index>0?null:(B&&w!==!1&&(this.pos+=B[0].length),B)}},te.prototype.current=function(){return this.string.slice(this.start,this.pos)},te.prototype.hideFirstChars=function(p,w){this.lineStart+=p;try{return w()}finally{this.lineStart-=p}},te.prototype.lookAhead=function(p){var w=this.lineOracle;return w&&w.lookAhead(p)},te.prototype.baseToken=function(){var p=this.lineOracle;return p&&p.baseToken(this.pos)};function je(p,w){if(w-=p.first,w<0||w>=p.size)throw new Error("There is no line "+(w+p.first)+" in the document.");for(var E=p;!E.lines;)for(var _=0;;++_){var O=E.children[_],B=O.chunkSize();if(w<B){E=O;break}w-=B}return E.lines[w]}function Re(p,w,E){var _=[],O=w.line;return p.iter(w.line,E.line+1,function(B){var X=B.text;O==E.line&&(X=X.slice(0,E.ch)),O==w.line&&(X=X.slice(w.ch)),_.push(X),++O}),_}function Ye(p,w,E){var _=[];return p.iter(w,E,function(O){_.push(O.text)}),_}function at(p,w){var E=w-p.height;if(E)for(var _=p;_;_=_.parent)_.height+=E}function jt(p){if(p.parent==null)return null;for(var w=p.parent,E=Ee(w.lines,p),_=w.parent;_;w=_,_=_.parent)for(var O=0;_.children[O]!=w;++O)E+=_.children[O].chunkSize();return E+w.first}function Qe(p,w){var E=p.first;e:do{for(var _=0;_<p.children.length;++_){var O=p.children[_],B=O.height;if(w<B){p=O;continue e}w-=B,E+=O.chunkSize()}return E}while(!p.lines);for(var X=0;X<p.lines.length;++X){var ae=p.lines[X],pe=ae.height;if(w<pe)break;w-=pe}return E+X}function $e(p,w){return w>=p.first&&w<p.first+p.size}function ve(p,w){return String(p.lineNumberFormatter(w+p.firstLineNumber))}function Ve(p,w,E){if(E===void 0&&(E=null),!(this instanceof Ve))return new Ve(p,w,E);this.line=p,this.ch=w,this.sticky=E}function st(p,w){return p.line-w.line||p.ch-w.ch}function Ot(p,w){return p.sticky==w.sticky&&st(p,w)==0}function de(p){return Ve(p.line,p.ch)}function ke(p,w){return st(p,w)<0?w:p}function ct(p,w){return st(p,w)<0?p:w}function bt(p,w){return Math.max(p.first,Math.min(w,p.first+p.size-1))}function Ft(p,w){if(w.line<p.first)return Ve(p.first,0);var E=p.first+p.size-1;return w.line>E?Ve(E,je(p,E).text.length):cr(w,je(p,w.line).text.length)}function cr(p,w){var E=p.ch;return E==null||E>w?Ve(p.line,w):E<0?Ve(p.line,0):p}function Br(p,w){for(var E=[],_=0;_<w.length;_++)E[_]=Ft(p,w[_]);return E}var kt=function(p,w){this.state=p,this.lookAhead=w},Yr=function(p,w,E,_){this.state=w,this.doc=p,this.line=E,this.maxLookAhead=_||0,this.baseTokens=null,this.baseTokenPos=1};Yr.prototype.lookAhead=function(p){var w=this.doc.getLine(this.line+p);return w!=null&&p>this.maxLookAhead&&(this.maxLookAhead=p),w},Yr.prototype.baseToken=function(p){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=p;)this.baseTokenPos+=2;var w=this.baseTokens[this.baseTokenPos+1];return{type:w&&w.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-p}},Yr.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Yr.fromSaved=function(p,w,E){return w instanceof kt?new Yr(p,En(p.mode,w.state),E,w.lookAhead):new Yr(p,En(p.mode,w),E)},Yr.prototype.save=function(p){var w=p!==!1?En(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new kt(w,this.maxLookAhead):w};function Xr(p,w,E,_){var O=[p.state.modeGen],B={};kr(p,w.text,p.doc.mode,E,function(be,He){return O.push(be,He)},B,_);for(var X=E.state,ae=function(be){E.baseTokens=O;var He=p.state.overlays[be],nt=1,Ct=0;E.state=!0,kr(p,w.text,He.mode,E,function(gt,Ht){for(var ir=nt;Ct<gt;){var hr=O[nt];hr>gt&&O.splice(nt,1,gt,O[nt+1],hr),nt+=2,Ct=Math.min(gt,hr)}if(Ht)if(He.opaque)O.splice(ir,nt-ir,gt,"overlay "+Ht),nt=ir+2;else for(;ir<nt;ir+=2){var Pr=O[ir+1];O[ir+1]=(Pr?Pr+" ":"")+"overlay "+Ht}},B),E.state=X,E.baseTokens=null,E.baseTokenPos=1},pe=0;pe<p.state.overlays.length;++pe)ae(pe);return{styles:O,classes:B.bgClass||B.textClass?B:null}}function ma(p,w,E){if(!w.styles||w.styles[0]!=p.state.modeGen){var _=Jn(p,jt(w)),O=w.text.length>p.options.maxHighlightLength&&En(p.doc.mode,_.state),B=Xr(p,w,_);O&&(_.state=O),w.stateAfter=_.save(!O),w.styles=B.styles,B.classes?w.styleClasses=B.classes:w.styleClasses&&(w.styleClasses=null),E===p.doc.highlightFrontier&&(p.doc.modeFrontier=Math.max(p.doc.modeFrontier,++p.doc.highlightFrontier))}return w.styles}function Jn(p,w,E){var _=p.doc,O=p.display;if(!_.mode.startState)return new Yr(_,!0,w);var B=mt(p,w,E),X=B>_.first&&je(_,B-1).stateAfter,ae=X?Yr.fromSaved(_,X,B):new Yr(_,Bn(_.mode),B);return _.iter(B,w,function(pe){fa(p,pe.text,ae);var be=ae.line;pe.stateAfter=be==w-1||be%5==0||be>=O.viewFrom&&be<O.viewTo?ae.save():null,ae.nextLine()}),E&&(_.modeFrontier=ae.line),ae}function fa(p,w,E,_){var O=p.doc.mode,B=new te(w,p.options.tabSize,E);for(B.start=B.pos=_||0,w==""&&Ns(O,E.state);!B.eol();)Ja(O,B,E.state),B.start=B.pos}function Ns(p,w){if(p.blankLine)return p.blankLine(w);if(p.innerMode){var E=Wr(p,w);if(E.mode.blankLine)return E.mode.blankLine(E.state)}}function Ja(p,w,E,_){for(var O=0;O<10;O++){_&&(_[0]=Wr(p,E).mode);var B=p.token(w,E);if(w.pos>w.start)return B}throw new Error("Mode "+p.name+" failed to advance stream.")}var Aa=function(p,w,E){this.start=p.start,this.end=p.pos,this.string=p.current(),this.type=w||null,this.state=E};function fs(p,w,E,_){var O=p.doc,B=O.mode,X;w=Ft(O,w);var ae=je(O,w.line),pe=Jn(p,w.line,E),be=new te(ae.text,p.options.tabSize,pe),He;for(_&&(He=[]);(_||be.pos<w.ch)&&!be.eol();)be.start=be.pos,X=Ja(B,be,pe.state),_&&He.push(new Aa(be,X,En(O.mode,pe.state)));return _?He:new Aa(be,X,pe.state)}function Lr(p,w){if(p)for(;;){var E=p.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!E)break;p=p.slice(0,E.index)+p.slice(E.index+E[0].length);var _=E[1]?"bgClass":"textClass";w[_]==null?w[_]=E[2]:new RegExp("(?:^|\\s)"+E[2]+"(?:$|\\s)").test(w[_])||(w[_]+=" "+E[2])}return p}function kr(p,w,E,_,O,B,X){var ae=E.flattenSpans;ae==null&&(ae=p.options.flattenSpans);var pe=0,be=null,He=new te(w,p.options.tabSize,_),nt,Ct=p.options.addModeClass&&[null];for(w==""&&Lr(Ns(E,_.state),B);!He.eol();){if(He.pos>p.options.maxHighlightLength?(ae=!1,X&&fa(p,w,_,He.pos),He.pos=w.length,nt=null):nt=Lr(Ja(E,He,_.state,Ct),B),Ct){var gt=Ct[0].name;gt&&(nt="m-"+(nt?gt+" "+nt:gt))}if(!ae||be!=nt){for(;pe<He.start;)pe=Math.min(He.start,pe+5e3),O(pe,be);be=nt}He.start=He.pos}for(;pe<He.pos;){var Ht=Math.min(He.pos,pe+5e3);O(Ht,be),pe=Ht}}function mt(p,w,E){for(var _,O,B=p.doc,X=E?-1:w-(p.doc.mode.innerMode?1e3:100),ae=w;ae>X;--ae){if(ae<=B.first)return B.first;var pe=je(B,ae-1),be=pe.stateAfter;if(be&&(!E||ae+(be instanceof kt?be.lookAhead:0)<=B.modeFrontier))return ae;var He=Se(pe.text,null,p.options.tabSize);(O==null||_>He)&&(O=ae-1,_=He)}return O}function nr(p,w){if(p.modeFrontier=Math.min(p.modeFrontier,w),!(p.highlightFrontier<w-10)){for(var E=p.first,_=w-1;_>E;_--){var O=je(p,_).stateAfter;if(O&&(!(O instanceof kt)||_+O.lookAhead<w)){E=_+1;break}}p.highlightFrontier=Math.min(p.highlightFrontier,E)}}var Ar=!1,Rr=!1;function kn(){Ar=!0}function Sn(){Rr=!0}function Vn(p,w,E){this.marker=p,this.from=w,this.to=E}function zn(p,w){if(p)for(var E=0;E<p.length;++E){var _=p[E];if(_.marker==w)return _}}function Kn(p,w){for(var E,_=0;_<p.length;++_)p[_]!=w&&(E||(E=[])).push(p[_]);return E}function ro(p,w,E){var _=E&&window.WeakSet&&(E.markedSpans||(E.markedSpans=new WeakSet));_&&_.has(p.markedSpans)?p.markedSpans.push(w):(p.markedSpans=p.markedSpans?p.markedSpans.concat([w]):[w],_&&_.add(p.markedSpans)),w.marker.attachLine(p)}function ps(p,w,E){var _;if(p)for(var O=0;O<p.length;++O){var B=p[O],X=B.marker,ae=B.from==null||(X.inclusiveLeft?B.from<=w:B.from<w);if(ae||B.from==w&&X.type=="bookmark"&&(!E||!B.marker.insertLeft)){var pe=B.to==null||(X.inclusiveRight?B.to>=w:B.to>w);(_||(_=[])).push(new Vn(X,B.from,pe?null:B.to))}}return _}function Yn(p,w,E){var _;if(p)for(var O=0;O<p.length;++O){var B=p[O],X=B.marker,ae=B.to==null||(X.inclusiveRight?B.to>=w:B.to>w);if(ae||B.from==w&&X.type=="bookmark"&&(!E||B.marker.insertLeft)){var pe=B.from==null||(X.inclusiveLeft?B.from<=w:B.from<w);(_||(_=[])).push(new Vn(X,pe?null:B.from-w,B.to==null?null:B.to-w))}}return _}function qn(p,w){if(w.full)return null;var E=$e(p,w.from.line)&&je(p,w.from.line).markedSpans,_=$e(p,w.to.line)&&je(p,w.to.line).markedSpans;if(!E&&!_)return null;var O=w.from.ch,B=w.to.ch,X=st(w.from,w.to)==0,ae=ps(E,O,X),pe=Yn(_,B,X),be=w.text.length==1,He=ee(w.text).length+(be?O:0);if(ae)for(var nt=0;nt<ae.length;++nt){var Ct=ae[nt];if(Ct.to==null){var gt=zn(pe,Ct.marker);gt?be&&(Ct.to=gt.to==null?null:gt.to+He):Ct.to=O}}if(pe)for(var Ht=0;Ht<pe.length;++Ht){var ir=pe[Ht];if(ir.to!=null&&(ir.to+=He),ir.from==null){var hr=zn(ae,ir.marker);hr||(ir.from=He,be&&(ae||(ae=[])).push(ir))}else ir.from+=He,be&&(ae||(ae=[])).push(ir)}ae&&(ae=Zn(ae)),pe&&pe!=ae&&(pe=Zn(pe));var Pr=[ae];if(!be){var Vr=w.text.length-2,Mr;if(Vr>0&&ae)for(var Fr=0;Fr<ae.length;++Fr)ae[Fr].to==null&&(Mr||(Mr=[])).push(new Vn(ae[Fr].marker,null,null));for(var mn=0;mn<Vr;++mn)Pr.push(Mr);Pr.push(pe)}return Pr}function Zn(p){for(var w=0;w<p.length;++w){var E=p[w];E.from!=null&&E.from==E.to&&E.marker.clearWhenEmpty!==!1&&p.splice(w--,1)}return p.length?p:null}function ka(p,w,E){var _=null;if(p.iter(w.line,E.line+1,function(gt){if(gt.markedSpans)for(var Ht=0;Ht<gt.markedSpans.length;++Ht){var ir=gt.markedSpans[Ht].marker;ir.readOnly&&(!_||Ee(_,ir)==-1)&&(_||(_=[])).push(ir)}}),!_)return null;for(var O=[{from:w,to:E}],B=0;B<_.length;++B)for(var X=_[B],ae=X.find(0),pe=0;pe<O.length;++pe){var be=O[pe];if(!(st(be.to,ae.from)<0||st(be.from,ae.to)>0)){var He=[pe,1],nt=st(be.from,ae.from),Ct=st(be.to,ae.to);(nt<0||!X.inclusiveLeft&&!nt)&&He.push({from:be.from,to:ae.from}),(Ct>0||!X.inclusiveRight&&!Ct)&&He.push({from:ae.to,to:be.to}),O.splice.apply(O,He),pe+=He.length-3}}return O}function ks(p){var w=p.markedSpans;if(w){for(var E=0;E<w.length;++E)w[E].marker.detachLine(p);p.markedSpans=null}}function La(p,w){if(w){for(var E=0;E<w.length;++E)w[E].marker.attachLine(p);p.markedSpans=w}}function wa(p){return p.inclusiveLeft?-1:0}function Xn(p){return p.inclusiveRight?1:0}function Ma(p,w){var E=p.lines.length-w.lines.length;if(E!=0)return E;var _=p.find(),O=w.find(),B=st(_.from,O.from)||wa(p)-wa(w);if(B)return-B;var X=st(_.to,O.to)||Xn(p)-Xn(w);return X||w.id-p.id}function es(p,w){var E=Rr&&p.markedSpans,_;if(E)for(var O=void 0,B=0;B<E.length;++B)O=E[B],O.marker.collapsed&&(w?O.from:O.to)==null&&(!_||Ma(_,O.marker)<0)&&(_=O.marker);return _}function qr(p){return es(p,!0)}function Gr(p){return es(p,!1)}function cn(p,w){var E=Rr&&p.markedSpans,_;if(E)for(var O=0;O<E.length;++O){var B=E[O];B.marker.collapsed&&(B.from==null||B.from<w)&&(B.to==null||B.to>w)&&(!_||Ma(_,B.marker)<0)&&(_=B.marker)}return _}function tn(p,w,E,_,O){var B=je(p,w),X=Rr&&B.markedSpans;if(X)for(var ae=0;ae<X.length;++ae){var pe=X[ae];if(pe.marker.collapsed){var be=pe.marker.find(0),He=st(be.from,E)||wa(pe.marker)-wa(O),nt=st(be.to,_)||Xn(pe.marker)-Xn(O);if(!(He>=0&&nt<=0||He<=0&&nt>=0)&&(He<=0&&(pe.marker.inclusiveRight&&O.inclusiveLeft?st(be.to,E)>=0:st(be.to,E)>0)||He>=0&&(pe.marker.inclusiveRight&&O.inclusiveLeft?st(be.from,_)<=0:st(be.from,_)<0)))return!0}}}function Me(p){for(var w;w=qr(p);)p=w.find(-1,!0).line;return p}function ot(p){for(var w;w=Gr(p);)p=w.find(1,!0).line;return p}function _t(p){for(var w,E;w=Gr(p);)p=w.find(1,!0).line,(E||(E=[])).push(p);return E}function It(p,w){var E=je(p,w),_=Me(E);return E==_?w:jt(_)}function At(p,w){if(w>p.lastLine())return w;var E=je(p,w),_;if(!sr(p,E))return w;for(;_=Gr(E);)E=_.find(1,!0).line;return jt(E)+1}function sr(p,w){var E=Rr&&w.markedSpans;if(E){for(var _=void 0,O=0;O<E.length;++O)if(_=E[O],!!_.marker.collapsed){if(_.from==null)return!0;if(!_.marker.widgetNode&&_.from==0&&_.marker.inclusiveLeft&&$t(p,w,_))return!0}}}function $t(p,w,E){if(E.to==null){var _=E.marker.find(1,!0);return $t(p,_.line,zn(_.line.markedSpans,E.marker))}if(E.marker.inclusiveRight&&E.to==w.text.length)return!0;for(var O=void 0,B=0;B<w.markedSpans.length;++B)if(O=w.markedSpans[B],O.marker.collapsed&&!O.marker.widgetNode&&O.from==E.to&&(O.to==null||O.to!=E.from)&&(O.marker.inclusiveLeft||E.marker.inclusiveRight)&&$t(p,w,O))return!0}function Bt(p){p=Me(p);for(var w=0,E=p.parent,_=0;_<E.lines.length;++_){var O=E.lines[_];if(O==p)break;w+=O.height}for(var B=E.parent;B;E=B,B=E.parent)for(var X=0;X<B.children.length;++X){var ae=B.children[X];if(ae==E)break;w+=ae.height}return w}function Cr(p){if(p.height==0)return 0;for(var w=p.text.length,E,_=p;E=qr(_);){var O=E.find(0,!0);_=O.from.line,w+=O.from.ch-O.to.ch}for(_=p;E=Gr(_);){var B=E.find(0,!0);w-=_.text.length-B.from.ch,_=B.to.line,w+=_.text.length-B.to.ch}return w}function Lt(p){var w=p.display,E=p.doc;w.maxLine=je(E,E.first),w.maxLineLength=Cr(w.maxLine),w.maxLineChanged=!0,E.iter(function(_){var O=Cr(_);O>w.maxLineLength&&(w.maxLineLength=O,w.maxLine=_)})}var dr=function(p,w,E){this.text=p,La(this,w),this.height=E?E(this):1};dr.prototype.lineNo=function(){return jt(this)},vt(dr);function Dr(p,w,E,_){p.text=w,p.stateAfter&&(p.stateAfter=null),p.styles&&(p.styles=null),p.order!=null&&(p.order=null),ks(p),La(p,E);var O=_?_(p):1;O!=p.height&&at(p,O)}function Or(p){p.parent=null,ks(p)}var Zr={},Kr={};function Cn(p,w){if(!p||/^\s*$/.test(p))return null;var E=w.addModeClass?Kr:Zr;return E[p]||(E[p]=p.replace(/\S+/g,"cm-$&"))}function Qr(p,w){var E=I("span",null,null,d?"padding-right: .1px":null),_={pre:I("pre",[E],"CodeMirror-line"),content:E,col:0,pos:0,cm:p,trailingSpace:!1,splitSpaces:p.getOption("lineWrapping")};w.measure={};for(var O=0;O<=(w.rest?w.rest.length:0);O++){var B=O?w.rest[O-1]:w.line,X=void 0;_.pos=0,_.addToken=Qn,rn(p.display.measure)&&(X=le(B,p.doc.direction))&&(_.addToken=is(_.addToken,X)),_.map=[];var ae=w!=p.display.externalMeasured&&jt(B);Ko(B,_,ma(p,B,ae)),B.styleClasses&&(B.styleClasses.bgClass&&(_.bgClass=re(B.styleClasses.bgClass,_.bgClass||"")),B.styleClasses.textClass&&(_.textClass=re(B.styleClasses.textClass,_.textClass||""))),_.map.length==0&&_.map.push(0,0,_.content.appendChild(er(p.display.measure))),O==0?(w.measure.map=_.map,w.measure.cache={}):((w.measure.maps||(w.measure.maps=[])).push(_.map),(w.measure.caches||(w.measure.caches=[])).push({}))}if(d){var pe=_.content.lastChild;(/\bcm-tab\b/.test(pe.className)||pe.querySelector&&pe.querySelector(".cm-tab"))&&(_.content.className="cm-tab-wrap-hack")}return ft(p,"renderLine",p,w.line,_.pre),_.pre.className&&(_.textClass=re(_.pre.className,_.textClass||"")),_}function Hr(p){var w=q("span","","cm-invalidchar");return w.title="\\u"+p.charCodeAt(0).toString(16),w.setAttribute("aria-label",w.title),w}function Qn(p,w,E,_,O,B,X){if(w){var ae=p.splitSpaces?Jr(w,p.trailingSpace):w,pe=p.cm.state.specialChars,be=!1,He;if(!pe.test(w))p.col+=w.length,He=document.createTextNode(ae),p.map.push(p.pos,p.pos+w.length,He),l&&c<9&&(be=!0),p.pos+=w.length;else{He=document.createDocumentFragment();for(var nt=0;;){pe.lastIndex=nt;var Ct=pe.exec(w),gt=Ct?Ct.index-nt:w.length-nt;if(gt){var Ht=document.createTextNode(ae.slice(nt,nt+gt));l&&c<9?He.appendChild(q("span",[Ht])):He.appendChild(Ht),p.map.push(p.pos,p.pos+gt,Ht),p.col+=gt,p.pos+=gt}if(!Ct)break;nt+=gt+1;var ir=void 0;if(Ct[0]=="	"){var hr=p.cm.options.tabSize,Pr=hr-p.col%hr;ir=He.appendChild(q("span",Pt(Pr),"cm-tab")),ir.setAttribute("role","presentation"),ir.setAttribute("cm-text","	"),p.col+=Pr}else Ct[0]=="\r"||Ct[0]==`
`?(ir=He.appendChild(q("span",Ct[0]=="\r"?"":"","cm-invalidchar")),ir.setAttribute("cm-text",Ct[0]),p.col+=1):(ir=p.cm.options.specialCharPlaceholder(Ct[0]),ir.setAttribute("cm-text",Ct[0]),l&&c<9?He.appendChild(q("span",[ir])):He.appendChild(ir),p.col+=1);p.map.push(p.pos,p.pos+1,ir),p.pos++}}if(p.trailingSpace=ae.charCodeAt(w.length-1)==32,E||_||O||be||B||X){var Vr=E||"";_&&(Vr+=_),O&&(Vr+=O);var Mr=q("span",[He],Vr,B);if(X)for(var Fr in X)X.hasOwnProperty(Fr)&&Fr!="style"&&Fr!="class"&&Mr.setAttribute(Fr,X[Fr]);return p.content.appendChild(Mr)}p.content.appendChild(He)}}function Jr(p,w){if(p.length>1&&!/  /.test(p))return p;for(var E=w,_="",O=0;O<p.length;O++){var B=p.charAt(O);B==" "&&E&&(O==p.length-1||p.charCodeAt(O+1)==32)&&(B=""),_+=B,E=B==" "}return _}function is(p,w){return function(E,_,O,B,X,ae,pe){O=O?O+" cm-force-border":"cm-force-border";for(var be=E.pos,He=be+_.length;;){for(var nt=void 0,Ct=0;Ct<w.length&&(nt=w[Ct],!(nt.to>be&&nt.from<=be));Ct++);if(nt.to>=He)return p(E,_,O,B,X,ae,pe);p(E,_.slice(0,nt.to-be),O,B,null,ae,pe),B=null,_=_.slice(nt.to-be),be=nt.to}}}function Ln(p,w,E,_){var O=!_&&E.widgetNode;O&&p.map.push(p.pos,p.pos+w,O),!_&&p.cm.display.input.needsContentAttribute&&(O||(O=p.content.appendChild(document.createElement("span"))),O.setAttribute("cm-marker",E.id)),O&&(p.cm.display.input.setUneditable(O),p.content.appendChild(O)),p.pos+=w,p.trailingSpace=!1}function Ko(p,w,E){var _=p.markedSpans,O=p.text,B=0;if(!_){for(var X=1;X<E.length;X+=2)w.addToken(w,O.slice(B,B=E[X]),Cn(E[X+1],w.cm.options));return}for(var ae=O.length,pe=0,be=1,He="",nt,Ct,gt=0,Ht,ir,hr,Pr,Vr;;){if(gt==pe){Ht=ir=hr=Ct="",Vr=null,Pr=null,gt=1/0;for(var Mr=[],Fr=void 0,mn=0;mn<_.length;++mn){var dn=_[mn],Mn=dn.marker;if(Mn.type=="bookmark"&&dn.from==pe&&Mn.widgetNode)Mr.push(Mn);else if(dn.from<=pe&&(dn.to==null||dn.to>pe||Mn.collapsed&&dn.to==pe&&dn.from==pe)){if(dn.to!=null&&dn.to!=pe&&gt>dn.to&&(gt=dn.to,ir=""),Mn.className&&(Ht+=" "+Mn.className),Mn.css&&(Ct=(Ct?Ct+";":"")+Mn.css),Mn.startStyle&&dn.from==pe&&(hr+=" "+Mn.startStyle),Mn.endStyle&&dn.to==gt&&(Fr||(Fr=[])).push(Mn.endStyle,dn.to),Mn.title&&((Vr||(Vr={})).title=Mn.title),Mn.attributes)for(var va in Mn.attributes)(Vr||(Vr={}))[va]=Mn.attributes[va];Mn.collapsed&&(!Pr||Ma(Pr.marker,Mn)<0)&&(Pr=dn)}else dn.from>pe&&gt>dn.from&&(gt=dn.from)}if(Fr)for(var Fn=0;Fn<Fr.length;Fn+=2)Fr[Fn+1]==gt&&(ir+=" "+Fr[Fn]);if(!Pr||Pr.from==pe)for(var ds=0;ds<Mr.length;++ds)Ln(w,0,Mr[ds]);if(Pr&&(Pr.from||0)==pe){if(Ln(w,(Pr.to==null?ae+1:Pr.to)-pe,Pr.marker,Pr.from==null),Pr.to==null)return;Pr.to==pe&&(Pr=!1)}}if(pe>=ae)break;for(var $o=Math.min(ae,gt);;){if(He){var yo=pe+He.length;if(!Pr){var rs=yo>$o?He.slice(0,$o-pe):He;w.addToken(w,rs,nt?nt+Ht:Ht,hr,pe+rs.length==gt?ir:"",Ct,Vr)}if(yo>=$o){He=He.slice($o-pe),pe=$o;break}pe=yo,hr=""}He=O.slice(B,B=E[be++]),nt=Cn(E[be++],w.cm.options)}}}function en(p,w,E){this.line=w,this.rest=_t(w),this.size=this.rest?jt(ee(this.rest))-E+1:1,this.node=this.text=null,this.hidden=sr(p,w)}function ga(p,w,E){for(var _=[],O,B=w;B<E;B=O){var X=new en(p.doc,je(p.doc,B),B);O=B+X.size,_.push(X)}return _}var hs=null;function aa(p){hs?hs.ops.push(p):p.ownsGroup=hs={ops:[p],delayedCallbacks:[]}}function Da(p){var w=p.delayedCallbacks,E=0;do{for(;E<w.length;E++)w[E].call(null);for(var _=0;_<p.ops.length;_++){var O=p.ops[_];if(O.cursorActivityHandlers)for(;O.cursorActivityCalled<O.cursorActivityHandlers.length;)O.cursorActivityHandlers[O.cursorActivityCalled++].call(null,O.cm)}}while(E<w.length)}function Do(p,w){var E=p.ownsGroup;if(E)try{Da(E)}finally{hs=null,w(E)}}var Fo=null;function Ia(p,w){var E=dt(p,w);if(E.length){var _=Array.prototype.slice.call(arguments,2),O;hs?O=hs.delayedCallbacks:Fo?O=Fo:(O=Fo=[],setTimeout(Mi,0));for(var B=function(ae){O.push(function(){return E[ae].apply(null,_)})},X=0;X<E.length;++X)B(X)}}function Mi(){var p=Fo;Fo=null;for(var w=0;w<p.length;++w)p[w]()}function li(p,w,E,_){for(var O=0;O<w.changes.length;O++){var B=w.changes[O];B=="text"?mc(p,w):B=="gutter"?rt(p,w,E,_):B=="class"?gc(p,w):B=="widget"&&Vt(p,w,_)}w.changes=null}function Bo(p){return p.node==p.text&&(p.node=q("div",null,null,"position: relative"),p.text.parentNode&&p.text.parentNode.replaceChild(p.node,p.text),p.node.appendChild(p.text),l&&c<8&&(p.node.style.zIndex=2)),p.node}function Jc(p,w){var E=w.bgClass?w.bgClass+" "+(w.line.bgClass||""):w.line.bgClass;if(E&&(E+=" CodeMirror-linebackground"),w.background)E?w.background.className=E:(w.background.parentNode.removeChild(w.background),w.background=null);else if(E){var _=Bo(w);w.background=_.insertBefore(q("div",null,E),_.firstChild),p.display.input.setUneditable(w.background)}}function Tl(p,w){var E=p.display.externalMeasured;return E&&E.line==w.line?(p.display.externalMeasured=null,w.measure=E.measure,E.built):Qr(p,w)}function mc(p,w){var E=w.text.className,_=Tl(p,w);w.text==w.node&&(w.node=_.pre),w.text.parentNode.replaceChild(_.pre,w.text),w.text=_.pre,_.bgClass!=w.bgClass||_.textClass!=w.textClass?(w.bgClass=_.bgClass,w.textClass=_.textClass,gc(p,w)):E&&(w.text.className=E)}function gc(p,w){Jc(p,w),w.line.wrapClass?Bo(w).className=w.line.wrapClass:w.node!=w.text&&(w.node.className="");var E=w.textClass?w.textClass+" "+(w.line.textClass||""):w.line.textClass;w.text.className=E||""}function rt(p,w,E,_){if(w.gutter&&(w.node.removeChild(w.gutter),w.gutter=null),w.gutterBackground&&(w.node.removeChild(w.gutterBackground),w.gutterBackground=null),w.line.gutterClass){var O=Bo(w);w.gutterBackground=q("div",null,"CodeMirror-gutter-background "+w.line.gutterClass,"left: "+(p.options.fixedGutter?_.fixedPos:-_.gutterTotalWidth)+"px; width: "+_.gutterTotalWidth+"px"),p.display.input.setUneditable(w.gutterBackground),O.insertBefore(w.gutterBackground,w.text)}var B=w.line.gutterMarkers;if(p.options.lineNumbers||B){var X=Bo(w),ae=w.gutter=q("div",null,"CodeMirror-gutter-wrapper","left: "+(p.options.fixedGutter?_.fixedPos:-_.gutterTotalWidth)+"px");if(ae.setAttribute("aria-hidden","true"),p.display.input.setUneditable(ae),X.insertBefore(ae,w.text),w.line.gutterClass&&(ae.className+=" "+w.line.gutterClass),p.options.lineNumbers&&(!B||!B["CodeMirror-linenumbers"])&&(w.lineNumber=ae.appendChild(q("div",ve(p.options,E),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+_.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+p.display.lineNumInnerWidth+"px"))),B)for(var pe=0;pe<p.display.gutterSpecs.length;++pe){var be=p.display.gutterSpecs[pe].className,He=B.hasOwnProperty(be)&&B[be];He&&ae.appendChild(q("div",[He],"CodeMirror-gutter-elt","left: "+_.gutterLeft[be]+"px; width: "+_.gutterWidth[be]+"px"))}}}function Vt(p,w,E){w.alignable&&(w.alignable=null);for(var _=V("CodeMirror-linewidget"),O=w.node.firstChild,B=void 0;O;O=B)B=O.nextSibling,_.test(O.className)&&w.node.removeChild(O);Qt(p,w,E)}function qt(p,w,E,_){var O=Tl(p,w);return w.text=w.node=O.pre,O.bgClass&&(w.bgClass=O.bgClass),O.textClass&&(w.textClass=O.textClass),gc(p,w),rt(p,w,E,_),Qt(p,w,_),w.node}function Qt(p,w,E){if(xr(p,w.line,w,E,!0),w.rest)for(var _=0;_<w.rest.length;_++)xr(p,w.rest[_],w,E,!1)}function xr(p,w,E,_,O){if(w.widgets)for(var B=Bo(E),X=0,ae=w.widgets;X<ae.length;++X){var pe=ae[X],be=q("div",[pe.node],"CodeMirror-linewidget"+(pe.className?" "+pe.className:""));pe.handleMouseEvents||be.setAttribute("cm-ignore-events","true"),wn(pe,be,E,_),p.display.input.setUneditable(be),O&&pe.above?B.insertBefore(be,E.gutter||E.text):B.appendChild(be),Ia(pe,"redraw")}}function wn(p,w,E,_){if(p.noHScroll){(E.alignable||(E.alignable=[])).push(w);var O=_.wrapperWidth;w.style.left=_.fixedPos+"px",p.coverGutter||(O-=_.gutterTotalWidth,w.style.paddingLeft=_.gutterTotalWidth+"px"),w.style.width=O+"px"}p.coverGutter&&(w.style.zIndex=5,w.style.position="relative",p.noHScroll||(w.style.marginLeft=-_.gutterTotalWidth+"px"))}function Wn(p){if(p.height!=null)return p.height;var w=p.doc.cm;if(!w)return 0;if(!D(document.body,p.node)){var E="position: relative;";p.coverGutter&&(E+="margin-left: -"+w.display.gutters.offsetWidth+"px;"),p.noHScroll&&(E+="width: "+w.display.wrapper.clientWidth+"px;"),A(w.display.measure,q("div",[p.node],null,E))}return p.height=p.node.parentNode.offsetHeight}function Fa(p,w){for(var E=Be(w);E!=p.wrapper;E=E.parentNode)if(!E||E.nodeType==1&&E.getAttribute("cm-ignore-events")=="true"||E.parentNode==p.sizer&&E!=p.mover)return!0}function sa(p){return p.lineSpace.offsetTop}function Ba(p){return p.mover.offsetHeight-p.lineSpace.offsetHeight}function Yo(p){if(p.cachedPaddingH)return p.cachedPaddingH;var w=A(p.measure,q("pre","x","CodeMirror-line-like")),E=window.getComputedStyle?window.getComputedStyle(w):w.currentStyle,_={left:parseInt(E.paddingLeft),right:parseInt(E.paddingRight)};return!isNaN(_.left)&&!isNaN(_.right)&&(p.cachedPaddingH=_),_}function Ys(p){return Ae-p.display.nativeBarWidth}function el(p){return p.display.scroller.clientWidth-Ys(p)-p.display.barWidth}function ge(p){return p.display.scroller.clientHeight-Ys(p)-p.display.barHeight}function Pe(p,w,E){var _=p.options.lineWrapping,O=_&&el(p);if(!w.measure.heights||_&&w.measure.width!=O){var B=w.measure.heights=[];if(_){w.measure.width=O;for(var X=w.text.firstChild.getClientRects(),ae=0;ae<X.length-1;ae++){var pe=X[ae],be=X[ae+1];Math.abs(pe.bottom-be.bottom)>2&&B.push((pe.bottom+be.top)/2-E.top)}}B.push(E.bottom-E.top)}}function Je(p,w,E){if(p.line==w)return{map:p.measure.map,cache:p.measure.cache};for(var _=0;_<p.rest.length;_++)if(p.rest[_]==w)return{map:p.measure.maps[_],cache:p.measure.caches[_]};for(var O=0;O<p.rest.length;O++)if(jt(p.rest[O])>E)return{map:p.measure.maps[O],cache:p.measure.caches[O],before:!0}}function it(p,w){w=Me(w);var E=jt(w),_=p.display.externalMeasured=new en(p.doc,w,E);_.lineN=E;var O=_.built=Qr(p,_);return _.text=O.pre,A(p.display.lineMeasure,O.pre),_}function St(p,w,E,_){return Nr(p,Xt(p,w),E,_)}function xt(p,w){if(w>=p.display.viewFrom&&w<p.display.viewTo)return p.display.view[sd(p,w)];var E=p.display.externalMeasured;if(E&&w>=E.lineN&&w<E.lineN+E.size)return E}function Xt(p,w){var E=jt(w),_=xt(p,E);_&&!_.text?_=null:_&&_.changes&&(li(p,_,E,Ol(p)),p.curOp.forceUpdate=!0),_||(_=it(p,w));var O=Je(_,w,E);return{line:w,view:_,rect:null,map:O.map,cache:O.cache,before:O.before,hasHeights:!1}}function Nr(p,w,E,_,O){w.before&&(E=-1);var B=E+(_||""),X;return w.cache.hasOwnProperty(B)?X=w.cache[B]:(w.rect||(w.rect=w.view.text.getBoundingClientRect()),w.hasHeights||(Pe(p,w.view,w.rect),w.hasHeights=!0),X=Zs(p,w,E,_),X.bogus||(w.cache[B]=X)),{left:X.left,right:X.right,top:O?X.rtop:X.top,bottom:O?X.rbottom:X.bottom}}var On={left:0,right:0,top:0,bottom:0};function Nn(p,w,E){for(var _,O,B,X,ae,pe,be=0;be<p.length;be+=3)if(ae=p[be],pe=p[be+1],w<ae?(O=0,B=1,X="left"):w<pe?(O=w-ae,B=O+1):(be==p.length-3||w==pe&&p[be+3]>w)&&(B=pe-ae,O=B-1,w>=pe&&(X="right")),O!=null){if(_=p[be+2],ae==pe&&E==(_.insertLeft?"left":"right")&&(X=E),E=="left"&&O==0)for(;be&&p[be-2]==p[be-3]&&p[be-1].insertLeft;)_=p[(be-=3)+2],X="left";if(E=="right"&&O==pe-ae)for(;be<p.length-3&&p[be+3]==p[be+4]&&!p[be+5].insertLeft;)_=p[(be+=3)+2],X="right";break}return{node:_,start:O,end:B,collapse:X,coverStart:ae,coverEnd:pe}}function _s(p,w){var E=On;if(w=="left")for(var _=0;_<p.length&&(E=p[_]).left==E.right;_++);else for(var O=p.length-1;O>=0&&(E=p[O]).left==E.right;O--);return E}function Zs(p,w,E,_){var O=Nn(w.map,E,_),B=O.node,X=O.start,ae=O.end,pe=O.collapse,be;if(B.nodeType==3){for(var He=0;He<4;He++){for(;X&&he(w.line.text.charAt(O.coverStart+X));)--X;for(;O.coverStart+ae<O.coverEnd&&he(w.line.text.charAt(O.coverStart+ae));)++ae;if(l&&c<9&&X==0&&ae==O.coverEnd-O.coverStart?be=B.parentNode.getBoundingClientRect():be=_s(K(B,X,ae).getClientRects(),_),be.left||be.right||X==0)break;ae=X,X=X-1,pe="right"}l&&c<11&&(be=Ku(p.display.measure,be))}else{X>0&&(pe=_="right");var nt;p.options.lineWrapping&&(nt=B.getClientRects()).length>1?be=nt[_=="right"?nt.length-1:0]:be=B.getBoundingClientRect()}if(l&&c<9&&!X&&(!be||!be.left&&!be.right)){var Ct=B.parentNode.getClientRects()[0];Ct?be={left:Ct.left,right:Ct.left+nd(p.display),top:Ct.top,bottom:Ct.bottom}:be=On}for(var gt=be.top-w.rect.top,Ht=be.bottom-w.rect.top,ir=(gt+Ht)/2,hr=w.view.measure.heights,Pr=0;Pr<hr.length-1&&!(ir<hr[Pr]);Pr++);var Vr=Pr?hr[Pr-1]:0,Mr=hr[Pr],Fr={left:(pe=="right"?be.right:be.left)-w.rect.left,right:(pe=="left"?be.left:be.right)-w.rect.left,top:Vr,bottom:Mr};return!be.left&&!be.right&&(Fr.bogus=!0),p.options.singleCursorHeightPerLine||(Fr.rtop=gt,Fr.rbottom=Ht),Fr}function Ku(p,w){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!pn(p))return w;var E=screen.logicalXDPI/screen.deviceXDPI,_=screen.logicalYDPI/screen.deviceYDPI;return{left:w.left*E,right:w.right*E,top:w.top*_,bottom:w.bottom*_}}function Yu(p){if(p.measure&&(p.measure.cache={},p.measure.heights=null,p.rest))for(var w=0;w<p.rest.length;w++)p.measure.caches[w]={}}function Xy(p){p.display.externalMeasure=null,Z(p.display.lineMeasure);for(var w=0;w<p.display.view.length;w++)Yu(p.display.view[w])}function Zu(p){Xy(p),p.display.cachedCharWidth=p.display.cachedTextHeight=p.display.cachedPaddingH=null,p.options.lineWrapping||(p.display.maxLineChanged=!0),p.display.lineNumChars=null}function Qy(){return m&&S?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Jy(){return m&&S?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Co(p){var w=0;if(p.widgets)for(var E=0;E<p.widgets.length;++E)p.widgets[E].above&&(w+=Wn(p.widgets[E]));return w}function yc(p,w,E,_,O){if(!O){var B=Co(w);E.top+=B,E.bottom+=B}if(_=="line")return E;_||(_="local");var X=Bt(w);if(_=="local"?X+=sa(p.display):X-=p.display.viewOffset,_=="page"||_=="window"){var ae=p.display.lineSpace.getBoundingClientRect();X+=ae.top+(_=="window"?0:Jy());var pe=ae.left+(_=="window"?0:Qy());E.left+=pe,E.right+=pe}return E.top+=X,E.bottom+=X,E}function fm(p,w,E){if(E=="div")return w;var _=w.left,O=w.top;if(E=="page")_-=Qy(),O-=Jy();else if(E=="local"||!E){var B=p.display.sizer.getBoundingClientRect();_+=B.left,O+=B.top}var X=p.display.lineSpace.getBoundingClientRect();return{left:_-X.left,top:O-X.top}}function Xu(p,w,E,_,O){return _||(_=je(p.doc,w.line)),yc(p,_,St(p,_,w.ch,O),E)}function ci(p,w,E,_,O,B){_=_||je(p.doc,w.line),O||(O=Xt(p,_));function X(Ht,ir){var hr=Nr(p,O,Ht,ir?"right":"left",B);return ir?hr.left=hr.right:hr.right=hr.left,yc(p,_,hr,E)}var ae=le(_,p.doc.direction),pe=w.ch,be=w.sticky;if(pe>=_.text.length?(pe=_.text.length,be="before"):pe<=0&&(pe=0,be="after"),!ae)return X(be=="before"?pe-1:pe,be=="before");function He(Ht,ir,hr){var Pr=ae[ir],Vr=Pr.level==1;return X(hr?Ht-1:Ht,Vr!=hr)}var nt=ie(ae,pe,be),Ct=Ge,gt=He(pe,nt,be=="before");return Ct!=null&&(gt.other=He(pe,Ct,be!="before")),gt}function pm(p,w){var E=0;w=Ft(p.doc,w),p.options.lineWrapping||(E=nd(p.display)*w.ch);var _=je(p.doc,w.line),O=Bt(_)+sa(p.display);return{left:E,right:E,top:O,bottom:O+_.height}}function Qu(p,w,E,_,O){var B=Ve(p,w,E);return B.xRel=O,_&&(B.outside=_),B}function hm(p,w,E){var _=p.doc;if(E+=p.display.viewOffset,E<0)return Qu(_.first,0,null,-1,-1);var O=Qe(_,E),B=_.first+_.size-1;if(O>B)return Qu(_.first+_.size-1,je(_,B).text.length,null,1,1);w<0&&(w=0);for(var X=je(_,O);;){var ae=mm(p,X,O,w,E),pe=cn(X,ae.ch+(ae.xRel>0||ae.outside>0?1:0));if(!pe)return ae;var be=pe.find(1);if(be.line==O)return be;X=je(_,O=be.line)}}function ed(p,w,E,_){_-=Co(w);var O=w.text.length,B=Le(function(X){return Nr(p,E,X-1).bottom<=_},O,0);return O=Le(function(X){return Nr(p,E,X).top>_},B,O),{begin:B,end:O}}function yp(p,w,E,_){E||(E=Xt(p,w));var O=yc(p,w,Nr(p,E,_),"line").top;return ed(p,w,E,O)}function td(p,w,E,_){return p.bottom<=E?!1:p.top>E?!0:(_?p.left:p.right)>w}function mm(p,w,E,_,O){O-=Bt(w);var B=Xt(p,w),X=Co(w),ae=0,pe=w.text.length,be=!0,He=le(w,p.doc.direction);if(He){var nt=(p.options.lineWrapping?rd:ex)(p,w,E,B,He,_,O);be=nt.level!=1,ae=be?nt.from:nt.to-1,pe=be?nt.to:nt.from-1}var Ct=null,gt=null,Ht=Le(function(mn){var dn=Nr(p,B,mn);return dn.top+=X,dn.bottom+=X,td(dn,_,O,!1)?(dn.top<=O&&dn.left<=_&&(Ct=mn,gt=dn),!0):!1},ae,pe),ir,hr,Pr=!1;if(gt){var Vr=_-gt.left<gt.right-_,Mr=Vr==be;Ht=Ct+(Mr?0:1),hr=Mr?"after":"before",ir=Vr?gt.left:gt.right}else{!be&&(Ht==pe||Ht==ae)&&Ht++,hr=Ht==0?"after":Ht==w.text.length?"before":Nr(p,B,Ht-(be?1:0)).bottom+X<=O==be?"after":"before";var Fr=ci(p,Ve(E,Ht,hr),"line",w,B);ir=Fr.left,Pr=O<Fr.top?-1:O>=Fr.bottom?1:0}return Ht=se(w.text,Ht,1),Qu(E,Ht,hr,Pr,_-ir)}function ex(p,w,E,_,O,B,X){var ae=Le(function(nt){var Ct=O[nt],gt=Ct.level!=1;return td(ci(p,Ve(E,gt?Ct.to:Ct.from,gt?"before":"after"),"line",w,_),B,X,!0)},0,O.length-1),pe=O[ae];if(ae>0){var be=pe.level!=1,He=ci(p,Ve(E,be?pe.from:pe.to,be?"after":"before"),"line",w,_);td(He,B,X,!0)&&He.top>X&&(pe=O[ae-1])}return pe}function rd(p,w,E,_,O,B,X){var ae=ed(p,w,_,X),pe=ae.begin,be=ae.end;/\s/.test(w.text.charAt(be-1))&&be--;for(var He=null,nt=null,Ct=0;Ct<O.length;Ct++){var gt=O[Ct];if(!(gt.from>=be||gt.to<=pe)){var Ht=gt.level!=1,ir=Nr(p,_,Ht?Math.min(be,gt.to)-1:Math.max(pe,gt.from)).right,hr=ir<B?B-ir+1e9:ir-B;(!He||nt>hr)&&(He=gt,nt=hr)}}return He||(He=O[O.length-1]),He.from<pe&&(He={from:pe,to:He.to,level:He.level}),He.to>be&&(He={from:He.from,to:be,level:He.level}),He}var di;function xc(p){if(p.cachedTextHeight!=null)return p.cachedTextHeight;if(di==null){di=q("pre",null,"CodeMirror-line-like");for(var w=0;w<49;++w)di.appendChild(document.createTextNode("x")),di.appendChild(q("br"));di.appendChild(document.createTextNode("x"))}A(p.measure,di);var E=di.offsetHeight/50;return E>3&&(p.cachedTextHeight=E),Z(p.measure),E||1}function nd(p){if(p.cachedCharWidth!=null)return p.cachedCharWidth;var w=q("span","xxxxxxxxxx"),E=q("pre",[w],"CodeMirror-line-like");A(p.measure,E);var _=w.getBoundingClientRect(),O=(_.right-_.left)/10;return O>2&&(p.cachedCharWidth=O),O||10}function Ol(p){for(var w=p.display,E={},_={},O=w.gutters.clientLeft,B=w.gutters.firstChild,X=0;B;B=B.nextSibling,++X){var ae=p.display.gutterSpecs[X].className;E[ae]=B.offsetLeft+B.clientLeft+O,_[ae]=B.clientWidth}return{fixedPos:xp(w),gutterTotalWidth:w.gutters.offsetWidth,gutterLeft:E,gutterWidth:_,wrapperWidth:w.wrapper.clientWidth}}function xp(p){return p.scroller.getBoundingClientRect().left-p.sizer.getBoundingClientRect().left}function gm(p){var w=xc(p.display),E=p.options.lineWrapping,_=E&&Math.max(5,p.display.scroller.clientWidth/nd(p.display)-3);return function(O){if(sr(p.doc,O))return 0;var B=0;if(O.widgets)for(var X=0;X<O.widgets.length;X++)O.widgets[X].height&&(B+=O.widgets[X].height);return E?B+(Math.ceil(O.text.length/_)||1)*w:B+w}}function vp(p){var w=p.doc,E=gm(p);w.iter(function(_){var O=E(_);O!=_.height&&at(_,O)})}function ad(p,w,E,_){var O=p.display;if(!E&&Be(w).getAttribute("cm-not-content")=="true")return null;var B,X,ae=O.lineSpace.getBoundingClientRect();try{B=w.clientX-ae.left,X=w.clientY-ae.top}catch{return null}var pe=hm(p,B,X),be;if(_&&pe.xRel>0&&(be=je(p.doc,pe.line).text).length==pe.ch){var He=Se(be,be.length,p.options.tabSize)-be.length;pe=Ve(pe.line,Math.max(0,Math.round((B-Yo(p.display).left)/nd(p.display))-He))}return pe}function sd(p,w){if(w>=p.display.viewTo||(w-=p.display.viewFrom,w<0))return null;for(var E=p.display.view,_=0;_<E.length;_++)if(w-=E[_].size,w<0)return _}function So(p,w,E,_){w==null&&(w=p.doc.first),E==null&&(E=p.doc.first+p.doc.size),_||(_=0);var O=p.display;if(_&&E<O.viewTo&&(O.updateLineNumbers==null||O.updateLineNumbers>w)&&(O.updateLineNumbers=w),p.curOp.viewChanged=!0,w>=O.viewTo)Rr&&It(p.doc,w)<O.viewTo&&Al(p);else if(E<=O.viewFrom)Rr&&At(p.doc,E+_)>O.viewFrom?Al(p):(O.viewFrom+=_,O.viewTo+=_);else if(w<=O.viewFrom&&E>=O.viewTo)Al(p);else if(w<=O.viewFrom){var B=Gd(p,E,E+_,1);B?(O.view=O.view.slice(B.index),O.viewFrom=B.lineN,O.viewTo+=_):Al(p)}else if(E>=O.viewTo){var X=Gd(p,w,w,-1);X?(O.view=O.view.slice(0,X.index),O.viewTo=X.lineN):Al(p)}else{var ae=Gd(p,w,w,-1),pe=Gd(p,E,E+_,1);ae&&pe?(O.view=O.view.slice(0,ae.index).concat(ga(p,ae.lineN,pe.lineN)).concat(O.view.slice(pe.index)),O.viewTo+=_):Al(p)}var be=O.externalMeasured;be&&(E<be.lineN?be.lineN+=_:w<be.lineN+be.size&&(O.externalMeasured=null))}function Pl(p,w,E){p.curOp.viewChanged=!0;var _=p.display,O=p.display.externalMeasured;if(O&&w>=O.lineN&&w<O.lineN+O.size&&(_.externalMeasured=null),!(w<_.viewFrom||w>=_.viewTo)){var B=_.view[sd(p,w)];if(B.node!=null){var X=B.changes||(B.changes=[]);Ee(X,E)==-1&&X.push(E)}}}function Al(p){p.display.viewFrom=p.display.viewTo=p.doc.first,p.display.view=[],p.display.viewOffset=0}function Gd(p,w,E,_){var O=sd(p,w),B,X=p.display.view;if(!Rr||E==p.doc.first+p.doc.size)return{index:O,lineN:E};for(var ae=p.display.viewFrom,pe=0;pe<O;pe++)ae+=X[pe].size;if(ae!=w){if(_>0){if(O==X.length-1)return null;B=ae+X[O].size-w,O++}else B=ae-w;w+=B,E+=B}for(;It(p.doc,E)!=E;){if(O==(_<0?0:X.length-1))return null;E+=_*X[O-(_<0?1:0)].size,O+=_}return{index:O,lineN:E}}function Ii(p,w,E){var _=p.display,O=_.view;O.length==0||w>=_.viewTo||E<=_.viewFrom?(_.view=ga(p,w,E),_.viewFrom=w):(_.viewFrom>w?_.view=ga(p,w,_.viewFrom).concat(_.view):_.viewFrom<w&&(_.view=_.view.slice(sd(p,w))),_.viewFrom=w,_.viewTo<E?_.view=_.view.concat(ga(p,_.viewTo,E)):_.viewTo>E&&(_.view=_.view.slice(0,sd(p,E)))),_.viewTo=E}function Ju(p){for(var w=p.display.view,E=0,_=0;_<w.length;_++){var O=w[_];!O.hidden&&(!O.node||O.changes)&&++E}return E}function ho(p){p.display.input.showSelection(p.display.input.prepareSelection())}function od(p,w){w===void 0&&(w=!0);for(var E=p.doc,_={},O=_.cursors=document.createDocumentFragment(),B=_.selection=document.createDocumentFragment(),X=0;X<E.sel.ranges.length;X++)if(!(!w&&X==E.sel.primIndex)){var ae=E.sel.ranges[X];if(!(ae.from().line>=p.display.viewTo||ae.to().line<p.display.viewFrom)){var pe=ae.empty();(pe||p.options.showCursorWhenSelecting)&&bp(p,ae.head,O),pe||wp(p,ae,B)}}return _}function bp(p,w,E){var _=ci(p,w,"div",null,null,!p.options.singleCursorHeightPerLine),O=E.appendChild(q("div","","CodeMirror-cursor"));if(O.style.left=_.left+"px",O.style.top=_.top+"px",O.style.height=Math.max(0,_.bottom-_.top)*p.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(p.getWrapperElement().className)){var B=Xu(p,w,"div",null,null);B.right-B.left>0&&(O.style.width=B.right-B.left+"px")}if(_.other){var X=E.appendChild(q("div","","CodeMirror-cursor CodeMirror-secondarycursor"));X.style.display="",X.style.left=_.other.left+"px",X.style.top=_.other.top+"px",X.style.height=(_.other.bottom-_.other.top)*.85+"px"}}function id(p,w){return p.top-w.top||p.left-w.left}function wp(p,w,E){var _=p.display,O=p.doc,B=document.createDocumentFragment(),X=Yo(p.display),ae=X.left,pe=Math.max(_.sizerWidth,el(p)-_.sizer.offsetLeft)-X.right,be=O.direction=="ltr";function He(Mr,Fr,mn,dn){Fr<0&&(Fr=0),Fr=Math.round(Fr),dn=Math.round(dn),B.appendChild(q("div",null,"CodeMirror-selected","position: absolute; left: "+Mr+`px;
                             top: `+Fr+"px; width: "+(mn??pe-Mr)+`px;
                             height: `+(dn-Fr)+"px"))}function nt(Mr,Fr,mn){var dn=je(O,Mr),Mn=dn.text.length,va,Fn;function ds(rs,bs){return Xu(p,Ve(Mr,rs),"div",dn,bs)}function $o(rs,bs,Ws){var Ps=yp(p,dn,null,rs),ns=bs=="ltr"==(Ws=="after")?"left":"right",ba=Ws=="after"?Ps.begin:Ps.end-(/\s/.test(dn.text.charAt(Ps.end-1))?2:1);return ds(ba,ns)[ns]}var yo=le(dn,O.direction);return Ue(yo,Fr||0,mn??Mn,function(rs,bs,Ws,Ps){var ns=Ws=="ltr",ba=ds(rs,ns?"left":"right"),xo=ds(bs-1,ns?"right":"left"),Mc=Fr==null&&rs==0,Wl=mn==null&&bs==Mn,Hs=Ps==0,mi=!yo||Ps==yo.length-1;if(xo.top-ba.top<=3){var ws=(be?Mc:Wl)&&Hs,$p=(be?Wl:Mc)&&mi,io=ws?ae:(ns?ba:xo).left,Ya=$p?pe:(ns?xo:ba).right;He(io,ba.top,Ya-io,ba.bottom)}else{var Hl,lo,gs,rg;ns?(Hl=be&&Mc&&Hs?ae:ba.left,lo=be?pe:$o(rs,Ws,"before"),gs=be?ae:$o(bs,Ws,"after"),rg=be&&Wl&&mi?pe:xo.right):(Hl=be?$o(rs,Ws,"before"):ae,lo=!be&&Mc&&Hs?pe:ba.right,gs=!be&&Wl&&mi?ae:xo.left,rg=be?$o(bs,Ws,"after"):pe),He(Hl,ba.top,lo-Hl,ba.bottom),ba.bottom<xo.top&&He(ae,ba.bottom,null,xo.top),He(gs,xo.top,rg-gs,xo.bottom)}(!va||id(ba,va)<0)&&(va=ba),id(xo,va)<0&&(va=xo),(!Fn||id(ba,Fn)<0)&&(Fn=ba),id(xo,Fn)<0&&(Fn=xo)}),{start:va,end:Fn}}var Ct=w.from(),gt=w.to();if(Ct.line==gt.line)nt(Ct.line,Ct.ch,gt.ch);else{var Ht=je(O,Ct.line),ir=je(O,gt.line),hr=Me(Ht)==Me(ir),Pr=nt(Ct.line,Ct.ch,hr?Ht.text.length+1:null).end,Vr=nt(gt.line,hr?0:null,gt.ch).start;hr&&(Pr.top<Vr.top-2?(He(Pr.right,Pr.top,null,Pr.bottom),He(ae,Vr.top,Vr.left,Vr.bottom)):He(Pr.right,Pr.top,Vr.left-Pr.right,Pr.bottom)),Pr.bottom<Vr.top&&He(ae,Pr.bottom,null,Vr.top)}E.appendChild(B)}function ef(p){if(p.state.focused){var w=p.display;clearInterval(w.blinker);var E=!0;w.cursorDiv.style.visibility="",p.options.cursorBlinkRate>0?w.blinker=setInterval(function(){p.hasFocus()||Ri(p),w.cursorDiv.style.visibility=(E=!E)?"":"hidden"},p.options.cursorBlinkRate):p.options.cursorBlinkRate<0&&(w.cursorDiv.style.visibility="hidden")}}function vc(p){p.hasFocus()||(p.display.input.focus(),p.state.focused||Kd(p))}function jp(p){p.state.delayingBlurEvent=!0,setTimeout(function(){p.state.delayingBlurEvent&&(p.state.delayingBlurEvent=!1,p.state.focused&&Ri(p))},100)}function Kd(p,w){p.state.delayingBlurEvent&&!p.state.draggingText&&(p.state.delayingBlurEvent=!1),p.options.readOnly!="nocursor"&&(p.state.focused||(ft(p,"focus",p,w),p.state.focused=!0,oe(p.display.wrapper,"CodeMirror-focused"),!p.curOp&&p.display.selForContextMenu!=p.doc.sel&&(p.display.input.reset(),d&&setTimeout(function(){return p.display.input.reset(!0)},20)),p.display.input.receivedFocus()),ef(p))}function Ri(p,w){p.state.delayingBlurEvent||(p.state.focused&&(ft(p,"blur",p,w),p.state.focused=!1,W(p.display.wrapper,"CodeMirror-focused")),clearInterval(p.display.blinker),setTimeout(function(){p.state.focused||(p.display.shift=!1)},150))}function Cp(p){for(var w=p.display,E=w.lineDiv.offsetTop,_=Math.max(0,w.scroller.getBoundingClientRect().top),O=w.lineDiv.getBoundingClientRect().top,B=0,X=0;X<w.view.length;X++){var ae=w.view[X],pe=p.options.lineWrapping,be=void 0,He=0;if(!ae.hidden){if(O+=ae.line.height,l&&c<8){var nt=ae.node.offsetTop+ae.node.offsetHeight;be=nt-E,E=nt}else{var Ct=ae.node.getBoundingClientRect();be=Ct.bottom-Ct.top,!pe&&ae.text.firstChild&&(He=ae.text.firstChild.getBoundingClientRect().right-Ct.left-1)}var gt=ae.line.height-be;if((gt>.005||gt<-.005)&&(O<_&&(B-=gt),at(ae.line,be),zo(ae.line),ae.rest))for(var Ht=0;Ht<ae.rest.length;Ht++)zo(ae.rest[Ht]);if(He>p.display.sizerWidth){var ir=Math.ceil(He/nd(p.display));ir>p.display.maxLineLength&&(p.display.maxLineLength=ir,p.display.maxLine=ae.line,p.display.maxLineChanged=!0)}}}Math.abs(B)>2&&(w.scroller.scrollTop+=B)}function zo(p){if(p.widgets)for(var w=0;w<p.widgets.length;++w){var E=p.widgets[w],_=E.node.parentNode;_&&(E.height=_.offsetHeight)}}function Yd(p,w,E){var _=E&&E.top!=null?Math.max(0,E.top):p.scroller.scrollTop;_=Math.floor(_-sa(p));var O=E&&E.bottom!=null?E.bottom:_+p.wrapper.clientHeight,B=Qe(w,_),X=Qe(w,O);if(E&&E.ensure){var ae=E.ensure.from.line,pe=E.ensure.to.line;ae<B?(B=ae,X=Qe(w,Bt(je(w,ae))+p.wrapper.clientHeight)):Math.min(pe,w.lastLine())>=X&&(B=Qe(w,Bt(je(w,pe))-p.wrapper.clientHeight),X=pe)}return{from:B,to:Math.max(X,B+1)}}function Ml(p,w){if(!Ze(p,"scrollCursorIntoView")){var E=p.display,_=E.sizer.getBoundingClientRect(),O=null;if(w.top+_.top<0?O=!0:w.bottom+_.top>(window.innerHeight||document.documentElement.clientHeight)&&(O=!1),O!=null&&!v){var B=q("div","",null,`position: absolute;
                         top: `+(w.top-E.viewOffset-sa(p.display))+`px;
                         height: `+(w.bottom-w.top+Ys(p)+E.barHeight)+`px;
                         left: `+w.left+"px; width: "+Math.max(2,w.right-w.left)+"px;");p.display.lineSpace.appendChild(B),B.scrollIntoView(O),p.display.lineSpace.removeChild(B)}}}function tx(p,w,E,_){_==null&&(_=0);var O;!p.options.lineWrapping&&w==E&&(E=w.sticky=="before"?Ve(w.line,w.ch+1,"before"):w,w=w.ch?Ve(w.line,w.sticky=="before"?w.ch-1:w.ch,"after"):w);for(var B=0;B<5;B++){var X=!1,ae=ci(p,w),pe=!E||E==w?ae:ci(p,E);O={left:Math.min(ae.left,pe.left),top:Math.min(ae.top,pe.top)-_,right:Math.max(ae.left,pe.left),bottom:Math.max(ae.bottom,pe.bottom)+_};var be=Il(p,O),He=p.doc.scrollTop,nt=p.doc.scrollLeft;if(be.scrollTop!=null&&(tl(p,be.scrollTop),Math.abs(p.doc.scrollTop-He)>1&&(X=!0)),be.scrollLeft!=null&&(Li(p,be.scrollLeft),Math.abs(p.doc.scrollLeft-nt)>1&&(X=!0)),!X)break}return O}function Sp(p,w){var E=Il(p,w);E.scrollTop!=null&&tl(p,E.scrollTop),E.scrollLeft!=null&&Li(p,E.scrollLeft)}function Il(p,w){var E=p.display,_=xc(p.display);w.top<0&&(w.top=0);var O=p.curOp&&p.curOp.scrollTop!=null?p.curOp.scrollTop:E.scroller.scrollTop,B=ge(p),X={};w.bottom-w.top>B&&(w.bottom=w.top+B);var ae=p.doc.height+Ba(E),pe=w.top<_,be=w.bottom>ae-_;if(w.top<O)X.scrollTop=pe?0:w.top;else if(w.bottom>O+B){var He=Math.min(w.top,(be?ae:w.bottom)-B);He!=O&&(X.scrollTop=He)}var nt=p.options.fixedGutter?0:E.gutters.offsetWidth,Ct=p.curOp&&p.curOp.scrollLeft!=null?p.curOp.scrollLeft:E.scroller.scrollLeft-nt,gt=el(p)-E.gutters.offsetWidth,Ht=w.right-w.left>gt;return Ht&&(w.right=w.left+gt),w.left<10?X.scrollLeft=0:w.left<Ct?X.scrollLeft=Math.max(0,w.left+nt-(Ht?0:10)):w.right>gt+Ct-3&&(X.scrollLeft=w.right+(Ht?0:10)-gt),X}function tf(p,w){w!=null&&(No(p),p.curOp.scrollTop=(p.curOp.scrollTop==null?p.doc.scrollTop:p.curOp.scrollTop)+w)}function ld(p){No(p);var w=p.getCursor();p.curOp.scrollToPos={from:w,to:w,margin:p.options.cursorScrollMargin}}function cd(p,w,E){(w!=null||E!=null)&&No(p),w!=null&&(p.curOp.scrollLeft=w),E!=null&&(p.curOp.scrollTop=E)}function rx(p,w){No(p),p.curOp.scrollToPos=w}function No(p){var w=p.curOp.scrollToPos;if(w){p.curOp.scrollToPos=null;var E=pm(p,w.from),_=pm(p,w.to);dd(p,E,_,w.margin)}}function dd(p,w,E,_){var O=Il(p,{left:Math.min(w.left,E.left),top:Math.min(w.top,E.top)-_,right:Math.max(w.right,E.right),bottom:Math.max(w.bottom,E.bottom)+_});cd(p,O.scrollLeft,O.scrollTop)}function tl(p,w){Math.abs(p.doc.scrollTop-w)<2||(t||nf(p,{top:w}),rf(p,w,!0),t&&nf(p),Fi(p,100))}function rf(p,w,E){w=Math.max(0,Math.min(p.display.scroller.scrollHeight-p.display.scroller.clientHeight,w)),!(p.display.scroller.scrollTop==w&&!E)&&(p.doc.scrollTop=w,p.display.scrollbars.setScrollTop(w),p.display.scroller.scrollTop!=w&&(p.display.scroller.scrollTop=w))}function Li(p,w,E,_){w=Math.max(0,Math.min(w,p.display.scroller.scrollWidth-p.display.scroller.clientWidth)),!((E?w==p.doc.scrollLeft:Math.abs(p.doc.scrollLeft-w)<2)&&!_)&&(p.doc.scrollLeft=w,Sc(p),p.display.scroller.scrollLeft!=w&&(p.display.scroller.scrollLeft=w),p.display.scrollbars.setScrollLeft(w))}function mo(p){var w=p.display,E=w.gutters.offsetWidth,_=Math.round(p.doc.height+Ba(p.display));return{clientHeight:w.scroller.clientHeight,viewHeight:w.wrapper.clientHeight,scrollWidth:w.scroller.scrollWidth,clientWidth:w.scroller.clientWidth,viewWidth:w.wrapper.clientWidth,barLeft:p.options.fixedGutter?E:0,docHeight:_,scrollHeight:_+Ys(p)+w.barHeight,nativeBarWidth:w.nativeBarWidth,gutterWidth:E}}var Xs=function(p,w,E){this.cm=E;var _=this.vert=q("div",[q("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),O=this.horiz=q("div",[q("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");_.tabIndex=O.tabIndex=-1,p(_),p(O),Fe(_,"scroll",function(){_.clientHeight&&w(_.scrollTop,"vertical")}),Fe(O,"scroll",function(){O.clientWidth&&w(O.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,l&&c<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Xs.prototype.update=function(p){var w=p.scrollWidth>p.clientWidth+1,E=p.scrollHeight>p.clientHeight+1,_=p.nativeBarWidth;if(E){this.vert.style.display="block",this.vert.style.bottom=w?_+"px":"0";var O=p.viewHeight-(w?_:0);this.vert.firstChild.style.height=Math.max(0,p.scrollHeight-p.clientHeight+O)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(w){this.horiz.style.display="block",this.horiz.style.right=E?_+"px":"0",this.horiz.style.left=p.barLeft+"px";var B=p.viewWidth-p.barLeft-(E?_:0);this.horiz.firstChild.style.width=Math.max(0,p.scrollWidth-p.clientWidth+B)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&p.clientHeight>0&&(_==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:E?_:0,bottom:w?_:0}},Xs.prototype.setScrollLeft=function(p){this.horiz.scrollLeft!=p&&(this.horiz.scrollLeft=p),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Xs.prototype.setScrollTop=function(p){this.vert.scrollTop!=p&&(this.vert.scrollTop=p),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Xs.prototype.zeroWidthHack=function(){var p=N&&!b?"12px":"18px";this.horiz.style.height=this.vert.style.width=p,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new fe,this.disableVert=new fe},Xs.prototype.enableZeroWidthBar=function(p,w,E){p.style.pointerEvents="auto";function _(){var O=p.getBoundingClientRect(),B=E=="vert"?document.elementFromPoint(O.right-1,(O.top+O.bottom)/2):document.elementFromPoint((O.right+O.left)/2,O.bottom-1);B!=p?p.style.pointerEvents="none":w.set(1e3,_)}w.set(1e3,_)},Xs.prototype.clear=function(){var p=this.horiz.parentNode;p.removeChild(this.horiz),p.removeChild(this.vert)};var ui=function(){};ui.prototype.update=function(){return{bottom:0,right:0}},ui.prototype.setScrollLeft=function(){},ui.prototype.setScrollTop=function(){},ui.prototype.clear=function(){};function ko(p,w){w||(w=mo(p));var E=p.display.barWidth,_=p.display.barHeight;Di(p,w);for(var O=0;O<4&&E!=p.display.barWidth||_!=p.display.barHeight;O++)E!=p.display.barWidth&&p.options.lineWrapping&&Cp(p),Di(p,mo(p)),E=p.display.barWidth,_=p.display.barHeight}function Di(p,w){var E=p.display,_=E.scrollbars.update(w);E.sizer.style.paddingRight=(E.barWidth=_.right)+"px",E.sizer.style.paddingBottom=(E.barHeight=_.bottom)+"px",E.heightForcer.style.borderBottom=_.bottom+"px solid transparent",_.right&&_.bottom?(E.scrollbarFiller.style.display="block",E.scrollbarFiller.style.height=_.bottom+"px",E.scrollbarFiller.style.width=_.right+"px"):E.scrollbarFiller.style.display="",_.bottom&&p.options.coverGutterNextToScrollbar&&p.options.fixedGutter?(E.gutterFiller.style.display="block",E.gutterFiller.style.height=_.bottom+"px",E.gutterFiller.style.width=w.gutterWidth+"px"):E.gutterFiller.style.display=""}var rl={native:Xs,null:ui};function ym(p){p.display.scrollbars&&(p.display.scrollbars.clear(),p.display.scrollbars.addClass&&W(p.display.wrapper,p.display.scrollbars.addClass)),p.display.scrollbars=new rl[p.options.scrollbarStyle](function(w){p.display.wrapper.insertBefore(w,p.display.scrollbarFiller),Fe(w,"mousedown",function(){p.state.focused&&setTimeout(function(){return p.display.input.focus()},0)}),w.setAttribute("cm-not-content","true")},function(w,E){E=="horizontal"?Li(p,w):tl(p,w)},p),p.display.scrollbars.addClass&&oe(p.display.wrapper,p.display.scrollbars.addClass)}var xm=0;function Rl(p){p.curOp={cm:p,viewChanged:!1,startHeight:p.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++xm,markArrays:null},aa(p.curOp)}function bc(p){var w=p.curOp;w&&Do(w,function(E){for(var _=0;_<E.ops.length;_++)E.ops[_].cm.curOp=null;no(E)})}function no(p){for(var w=p.ops,E=0;E<w.length;E++)ts(w[E]);for(var _=0;_<w.length;_++)oa(w[_]);for(var O=0;O<w.length;O++)wc(w[O]);for(var B=0;B<w.length;B++)fi(w[B]);for(var X=0;X<w.length;X++)vm(w[X])}function ts(p){var w=p.cm,E=w.display;wm(w),p.updateMaxLine&&Lt(w),p.mustUpdate=p.viewChanged||p.forceUpdate||p.scrollTop!=null||p.scrollToPos&&(p.scrollToPos.from.line<E.viewFrom||p.scrollToPos.to.line>=E.viewTo)||E.maxLineChanged&&w.options.lineWrapping,p.update=p.mustUpdate&&new jc(w,p.mustUpdate&&{top:p.scrollTop,ensure:p.scrollToPos},p.forceUpdate)}function oa(p){p.updatedDisplay=p.mustUpdate&&nl(p.cm,p.update)}function wc(p){var w=p.cm,E=w.display;p.updatedDisplay&&Cp(w),p.barMeasure=mo(w),E.maxLineChanged&&!w.options.lineWrapping&&(p.adjustWidthTo=St(w,E.maxLine,E.maxLine.text.length).left+3,w.display.sizerWidth=p.adjustWidthTo,p.barMeasure.scrollWidth=Math.max(E.scroller.clientWidth,E.sizer.offsetLeft+p.adjustWidthTo+Ys(w)+w.display.barWidth),p.maxScrollLeft=Math.max(0,E.sizer.offsetLeft+p.adjustWidthTo-el(w))),(p.updatedDisplay||p.selectionChanged)&&(p.preparedSelection=E.input.prepareSelection())}function fi(p){var w=p.cm;p.adjustWidthTo!=null&&(w.display.sizer.style.minWidth=p.adjustWidthTo+"px",p.maxScrollLeft<w.doc.scrollLeft&&Li(w,Math.min(w.display.scroller.scrollLeft,p.maxScrollLeft),!0),w.display.maxLineChanged=!1);var E=p.focus&&p.focus==Q();p.preparedSelection&&w.display.input.showSelection(p.preparedSelection,E),(p.updatedDisplay||p.startHeight!=w.doc.height)&&ko(w,p.barMeasure),p.updatedDisplay&&Zd(w,p.barMeasure),p.selectionChanged&&ef(w),w.state.focused&&p.updateInput&&w.display.input.reset(p.typing),E&&vc(p.cm)}function vm(p){var w=p.cm,E=w.display,_=w.doc;if(p.updatedDisplay&&al(w,p.update),E.wheelStartX!=null&&(p.scrollTop!=null||p.scrollLeft!=null||p.scrollToPos)&&(E.wheelStartX=E.wheelStartY=null),p.scrollTop!=null&&rf(w,p.scrollTop,p.forceScroll),p.scrollLeft!=null&&Li(w,p.scrollLeft,!0,!0),p.scrollToPos){var O=tx(w,Ft(_,p.scrollToPos.from),Ft(_,p.scrollToPos.to),p.scrollToPos.margin);Ml(w,O)}var B=p.maybeHiddenMarkers,X=p.maybeUnhiddenMarkers;if(B)for(var ae=0;ae<B.length;++ae)B[ae].lines.length||ft(B[ae],"hide");if(X)for(var pe=0;pe<X.length;++pe)X[pe].lines.length&&ft(X[pe],"unhide");E.wrapper.offsetHeight&&(_.scrollTop=w.display.scroller.scrollTop),p.changeObjs&&ft(w,"changes",w,p.changeObjs),p.update&&p.update.finish()}function Es(p,w){if(p.curOp)return w();Rl(p);try{return w()}finally{bc(p)}}function Rs(p,w){return function(){if(p.curOp)return w.apply(p,arguments);Rl(p);try{return w.apply(p,arguments)}finally{bc(p)}}}function ao(p){return function(){if(this.curOp)return p.apply(this,arguments);Rl(this);try{return p.apply(this,arguments)}finally{bc(this)}}}function ls(p){return function(){var w=this.cm;if(!w||w.curOp)return p.apply(this,arguments);Rl(w);try{return p.apply(this,arguments)}finally{bc(w)}}}function Fi(p,w){p.doc.highlightFrontier<p.display.viewTo&&p.state.highlight.set(w,G(bm,p))}function bm(p){var w=p.doc;if(!(w.highlightFrontier>=p.display.viewTo)){var E=+new Date+p.options.workTime,_=Jn(p,w.highlightFrontier),O=[];w.iter(_.line,Math.min(w.first+w.size,p.display.viewTo+500),function(B){if(_.line>=p.display.viewFrom){var X=B.styles,ae=B.text.length>p.options.maxHighlightLength?En(w.mode,_.state):null,pe=Xr(p,B,_,!0);ae&&(_.state=ae),B.styles=pe.styles;var be=B.styleClasses,He=pe.classes;He?B.styleClasses=He:be&&(B.styleClasses=null);for(var nt=!X||X.length!=B.styles.length||be!=He&&(!be||!He||be.bgClass!=He.bgClass||be.textClass!=He.textClass),Ct=0;!nt&&Ct<X.length;++Ct)nt=X[Ct]!=B.styles[Ct];nt&&O.push(_.line),B.stateAfter=_.save(),_.nextLine()}else B.text.length<=p.options.maxHighlightLength&&fa(p,B.text,_),B.stateAfter=_.line%5==0?_.save():null,_.nextLine();if(+new Date>E)return Fi(p,p.options.workDelay),!0}),w.highlightFrontier=_.line,w.modeFrontier=Math.max(w.modeFrontier,_.line),O.length&&Es(p,function(){for(var B=0;B<O.length;B++)Pl(p,O[B],"text")})}}var jc=function(p,w,E){var _=p.display;this.viewport=w,this.visible=Yd(_,p.doc,w),this.editorIsHidden=!_.wrapper.offsetWidth,this.wrapperHeight=_.wrapper.clientHeight,this.wrapperWidth=_.wrapper.clientWidth,this.oldDisplayWidth=el(p),this.force=E,this.dims=Ol(p),this.events=[]};jc.prototype.signal=function(p,w){Mt(p,w)&&this.events.push(arguments)},jc.prototype.finish=function(){for(var p=0;p<this.events.length;p++)ft.apply(null,this.events[p])};function wm(p){var w=p.display;!w.scrollbarsClipped&&w.scroller.offsetWidth&&(w.nativeBarWidth=w.scroller.offsetWidth-w.scroller.clientWidth,w.heightForcer.style.height=Ys(p)+"px",w.sizer.style.marginBottom=-w.nativeBarWidth+"px",w.sizer.style.borderRightWidth=Ys(p)+"px",w.scrollbarsClipped=!0)}function ud(p){if(p.hasFocus())return null;var w=Q();if(!w||!D(p.display.lineDiv,w))return null;var E={activeElt:w};if(window.getSelection){var _=window.getSelection();_.anchorNode&&_.extend&&D(p.display.lineDiv,_.anchorNode)&&(E.anchorNode=_.anchorNode,E.anchorOffset=_.anchorOffset,E.focusNode=_.focusNode,E.focusOffset=_.focusOffset)}return E}function Ll(p){if(!(!p||!p.activeElt||p.activeElt==Q())&&(p.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(p.activeElt.nodeName)&&p.anchorNode&&D(document.body,p.anchorNode)&&D(document.body,p.focusNode))){var w=window.getSelection(),E=document.createRange();E.setEnd(p.anchorNode,p.anchorOffset),E.collapse(!1),w.removeAllRanges(),w.addRange(E),w.extend(p.focusNode,p.focusOffset)}}function nl(p,w){var E=p.display,_=p.doc;if(w.editorIsHidden)return Al(p),!1;if(!w.force&&w.visible.from>=E.viewFrom&&w.visible.to<=E.viewTo&&(E.updateLineNumbers==null||E.updateLineNumbers>=E.viewTo)&&E.renderedView==E.view&&Ju(p)==0)return!1;Qs(p)&&(Al(p),w.dims=Ol(p));var O=_.first+_.size,B=Math.max(w.visible.from-p.options.viewportMargin,_.first),X=Math.min(O,w.visible.to+p.options.viewportMargin);E.viewFrom<B&&B-E.viewFrom<20&&(B=Math.max(_.first,E.viewFrom)),E.viewTo>X&&E.viewTo-X<20&&(X=Math.min(O,E.viewTo)),Rr&&(B=It(p.doc,B),X=At(p.doc,X));var ae=B!=E.viewFrom||X!=E.viewTo||E.lastWrapHeight!=w.wrapperHeight||E.lastWrapWidth!=w.wrapperWidth;Ii(p,B,X),E.viewOffset=Bt(je(p.doc,E.viewFrom)),p.display.mover.style.top=E.viewOffset+"px";var pe=Ju(p);if(!ae&&pe==0&&!w.force&&E.renderedView==E.view&&(E.updateLineNumbers==null||E.updateLineNumbers>=E.viewTo))return!1;var be=ud(p);return pe>4&&(E.lineDiv.style.display="none"),jm(p,E.updateLineNumbers,w.dims),pe>4&&(E.lineDiv.style.display=""),E.renderedView=E.view,Ll(be),Z(E.cursorDiv),Z(E.selectionDiv),E.gutters.style.height=E.sizer.style.minHeight=0,ae&&(E.lastWrapHeight=w.wrapperHeight,E.lastWrapWidth=w.wrapperWidth,Fi(p,400)),E.updateLineNumbers=null,!0}function al(p,w){for(var E=w.viewport,_=!0;;_=!1){if(!_||!p.options.lineWrapping||w.oldDisplayWidth==el(p)){if(E&&E.top!=null&&(E={top:Math.min(p.doc.height+Ba(p.display)-ge(p),E.top)}),w.visible=Yd(p.display,p.doc,E),w.visible.from>=p.display.viewFrom&&w.visible.to<=p.display.viewTo)break}else _&&(w.visible=Yd(p.display,p.doc,E));if(!nl(p,w))break;Cp(p);var O=mo(p);ho(p),ko(p,O),Zd(p,O),w.force=!1}w.signal(p,"update",p),(p.display.viewFrom!=p.display.reportedViewFrom||p.display.viewTo!=p.display.reportedViewTo)&&(w.signal(p,"viewportChange",p,p.display.viewFrom,p.display.viewTo),p.display.reportedViewFrom=p.display.viewFrom,p.display.reportedViewTo=p.display.viewTo)}function nf(p,w){var E=new jc(p,w);if(nl(p,E)){Cp(p),al(p,E);var _=mo(p);ho(p),ko(p,_),Zd(p,_),E.finish()}}function jm(p,w,E){var _=p.display,O=p.options.lineNumbers,B=_.lineDiv,X=B.firstChild;function ae(Ht){var ir=Ht.nextSibling;return d&&N&&p.display.currentWheelTarget==Ht?Ht.style.display="none":Ht.parentNode.removeChild(Ht),ir}for(var pe=_.view,be=_.viewFrom,He=0;He<pe.length;He++){var nt=pe[He];if(!nt.hidden)if(!nt.node||nt.node.parentNode!=B){var Ct=qt(p,nt,be,E);B.insertBefore(Ct,X)}else{for(;X!=nt.node;)X=ae(X);var gt=O&&w!=null&&w<=be&&nt.lineNumber;nt.changes&&(Ee(nt.changes,"gutter")>-1&&(gt=!1),li(p,nt,be,E)),gt&&(Z(nt.lineNumber),nt.lineNumber.appendChild(document.createTextNode(ve(p.options,be)))),X=nt.node.nextSibling}be+=nt.size}for(;X;)X=ae(X)}function Cc(p){var w=p.gutters.offsetWidth;p.sizer.style.marginLeft=w+"px",Ia(p,"gutterChanged",p)}function Zd(p,w){p.display.sizer.style.minHeight=w.docHeight+"px",p.display.heightForcer.style.top=w.docHeight+"px",p.display.gutters.style.height=w.docHeight+p.display.barHeight+Ys(p)+"px"}function Sc(p){var w=p.display,E=w.view;if(!(!w.alignWidgets&&(!w.gutters.firstChild||!p.options.fixedGutter))){for(var _=xp(w)-w.scroller.scrollLeft+p.doc.scrollLeft,O=w.gutters.offsetWidth,B=_+"px",X=0;X<E.length;X++)if(!E[X].hidden){p.options.fixedGutter&&(E[X].gutter&&(E[X].gutter.style.left=B),E[X].gutterBackground&&(E[X].gutterBackground.style.left=B));var ae=E[X].alignable;if(ae)for(var pe=0;pe<ae.length;pe++)ae[pe].style.left=B}p.options.fixedGutter&&(w.gutters.style.left=_+O+"px")}}function Qs(p){if(!p.options.lineNumbers)return!1;var w=p.doc,E=ve(p.options,w.first+w.size-1),_=p.display;if(E.length!=_.lineNumChars){var O=_.measure.appendChild(q("div",[q("div",E)],"CodeMirror-linenumber CodeMirror-gutter-elt")),B=O.firstChild.offsetWidth,X=O.offsetWidth-B;return _.lineGutter.style.width="",_.lineNumInnerWidth=Math.max(B,_.lineGutter.offsetWidth-X)+1,_.lineNumWidth=_.lineNumInnerWidth+X,_.lineNumChars=_.lineNumInnerWidth?E.length:-1,_.lineGutter.style.width=_.lineNumWidth+"px",Cc(p.display),!0}return!1}function Xd(p,w){for(var E=[],_=!1,O=0;O<p.length;O++){var B=p[O],X=null;if(typeof B!="string"&&(X=B.style,B=B.className),B=="CodeMirror-linenumbers")if(w)_=!0;else continue;E.push({className:B,style:X})}return w&&!_&&E.push({className:"CodeMirror-linenumbers",style:null}),E}function Cm(p){var w=p.gutters,E=p.gutterSpecs;Z(w),p.lineGutter=null;for(var _=0;_<E.length;++_){var O=E[_],B=O.className,X=O.style,ae=w.appendChild(q("div",null,"CodeMirror-gutter "+B));X&&(ae.style.cssText=X),B=="CodeMirror-linenumbers"&&(p.lineGutter=ae,ae.style.width=(p.lineNumWidth||1)+"px")}w.style.display=E.length?"":"none",Cc(p)}function af(p){Cm(p.display),So(p),Sc(p)}function mw(p,w,E,_){var O=this;this.input=E,O.scrollbarFiller=q("div",null,"CodeMirror-scrollbar-filler"),O.scrollbarFiller.setAttribute("cm-not-content","true"),O.gutterFiller=q("div",null,"CodeMirror-gutter-filler"),O.gutterFiller.setAttribute("cm-not-content","true"),O.lineDiv=I("div",null,"CodeMirror-code"),O.selectionDiv=q("div",null,null,"position: relative; z-index: 1"),O.cursorDiv=q("div",null,"CodeMirror-cursors"),O.measure=q("div",null,"CodeMirror-measure"),O.lineMeasure=q("div",null,"CodeMirror-measure"),O.lineSpace=I("div",[O.measure,O.lineMeasure,O.selectionDiv,O.cursorDiv,O.lineDiv],null,"position: relative; outline: none");var B=I("div",[O.lineSpace],"CodeMirror-lines");O.mover=q("div",[B],null,"position: relative"),O.sizer=q("div",[O.mover],"CodeMirror-sizer"),O.sizerWidth=null,O.heightForcer=q("div",null,null,"position: absolute; height: "+Ae+"px; width: 1px;"),O.gutters=q("div",null,"CodeMirror-gutters"),O.lineGutter=null,O.scroller=q("div",[O.sizer,O.heightForcer,O.gutters],"CodeMirror-scroll"),O.scroller.setAttribute("tabIndex","-1"),O.wrapper=q("div",[O.scrollbarFiller,O.gutterFiller,O.scroller],"CodeMirror"),O.wrapper.setAttribute("translate","no"),l&&c<8&&(O.gutters.style.zIndex=-1,O.scroller.style.paddingRight=0),!d&&!(t&&k)&&(O.scroller.draggable=!0),p&&(p.appendChild?p.appendChild(O.wrapper):p(O.wrapper)),O.viewFrom=O.viewTo=w.first,O.reportedViewFrom=O.reportedViewTo=w.first,O.view=[],O.renderedView=null,O.externalMeasured=null,O.viewOffset=0,O.lastWrapHeight=O.lastWrapWidth=0,O.updateLineNumbers=null,O.nativeBarWidth=O.barHeight=O.barWidth=0,O.scrollbarsClipped=!1,O.lineNumWidth=O.lineNumInnerWidth=O.lineNumChars=null,O.alignWidgets=!1,O.cachedCharWidth=O.cachedTextHeight=O.cachedPaddingH=null,O.maxLine=null,O.maxLineLength=0,O.maxLineChanged=!1,O.wheelDX=O.wheelDY=O.wheelStartX=O.wheelStartY=null,O.shift=!1,O.selForContextMenu=null,O.activeTouch=null,O.gutterSpecs=Xd(_.gutters,_.lineNumbers),Cm(O),E.init(O)}var Np=0,ya=null;l?ya=-.53:t?ya=15:m?ya=-.7:x&&(ya=-1/3);function kp(p){var w=p.wheelDeltaX,E=p.wheelDeltaY;return w==null&&p.detail&&p.axis==p.HORIZONTAL_AXIS&&(w=p.detail),E==null&&p.detail&&p.axis==p.VERTICAL_AXIS?E=p.detail:E==null&&(E=p.wheelDelta),{x:w,y:E}}function sf(p){var w=kp(p);return w.x*=ya,w.y*=ya,w}function Qd(p,w){var E=kp(w),_=E.x,O=E.y,B=p.display,X=B.scroller,ae=X.scrollWidth>X.clientWidth,pe=X.scrollHeight>X.clientHeight;if(_&&ae||O&&pe){if(O&&N&&d){e:for(var be=w.target,He=B.view;be!=X;be=be.parentNode)for(var nt=0;nt<He.length;nt++)if(He[nt].node==be){p.display.currentWheelTarget=be;break e}}if(_&&!t&&!y&&ya!=null){O&&pe&&tl(p,Math.max(0,X.scrollTop+O*ya)),Li(p,Math.max(0,X.scrollLeft+_*ya)),(!O||O&&pe)&&Jt(w),B.wheelStartX=null;return}if(O&&ya!=null){var Ct=O*ya,gt=p.doc.scrollTop,Ht=gt+B.wrapper.clientHeight;Ct<0?gt=Math.max(0,gt+Ct-50):Ht=Math.min(p.doc.height,Ht+Ct+50),nf(p,{top:gt,bottom:Ht})}Np<20&&(B.wheelStartX==null?(B.wheelStartX=X.scrollLeft,B.wheelStartY=X.scrollTop,B.wheelDX=_,B.wheelDY=O,setTimeout(function(){if(B.wheelStartX!=null){var ir=X.scrollLeft-B.wheelStartX,hr=X.scrollTop-B.wheelStartY,Pr=hr&&B.wheelDY&&hr/B.wheelDY||ir&&B.wheelDX&&ir/B.wheelDX;B.wheelStartX=B.wheelStartY=null,Pr&&(ya=(ya*Np+Pr)/(Np+1),++Np)}},200)):(B.wheelDX+=_,B.wheelDY+=O))}}var _o=function(p,w){this.ranges=p,this.primIndex=w};_o.prototype.primary=function(){return this.ranges[this.primIndex]},_o.prototype.equals=function(p){if(p==this)return!0;if(p.primIndex!=this.primIndex||p.ranges.length!=this.ranges.length)return!1;for(var w=0;w<this.ranges.length;w++){var E=this.ranges[w],_=p.ranges[w];if(!Ot(E.anchor,_.anchor)||!Ot(E.head,_.head))return!1}return!0},_o.prototype.deepCopy=function(){for(var p=[],w=0;w<this.ranges.length;w++)p[w]=new ea(de(this.ranges[w].anchor),de(this.ranges[w].head));return new _o(p,this.primIndex)},_o.prototype.somethingSelected=function(){for(var p=0;p<this.ranges.length;p++)if(!this.ranges[p].empty())return!0;return!1},_o.prototype.contains=function(p,w){w||(w=p);for(var E=0;E<this.ranges.length;E++){var _=this.ranges[E];if(st(w,_.from())>=0&&st(p,_.to())<=0)return E}return-1};var ea=function(p,w){this.anchor=p,this.head=w};ea.prototype.from=function(){return ct(this.anchor,this.head)},ea.prototype.to=function(){return ke(this.anchor,this.head)},ea.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function go(p,w,E){var _=p&&p.options.selectionsMayTouch,O=w[E];w.sort(function(Ct,gt){return st(Ct.from(),gt.from())}),E=Ee(w,O);for(var B=1;B<w.length;B++){var X=w[B],ae=w[B-1],pe=st(ae.to(),X.from());if(_&&!X.empty()?pe>0:pe>=0){var be=ct(ae.from(),X.from()),He=ke(ae.to(),X.to()),nt=ae.empty()?X.from()==X.head:ae.from()==ae.head;B<=E&&--E,w.splice(--B,2,new ea(nt?He:be,nt?be:He))}}return new _o(w,E)}function Nc(p,w){return new _o([new ea(p,w||p)],0)}function Dl(p){return p.text?Ve(p.from.line+p.text.length-1,ee(p.text).length+(p.text.length==1?p.from.ch:0)):p.to}function nx(p,w){if(st(p,w.from)<0)return p;if(st(p,w.to)<=0)return Dl(w);var E=p.line+w.text.length-(w.to.line-w.from.line)-1,_=p.ch;return p.line==w.to.line&&(_+=Dl(w).ch-w.to.ch),Ve(E,_)}function _p(p,w){for(var E=[],_=0;_<p.sel.ranges.length;_++){var O=p.sel.ranges[_];E.push(new ea(nx(O.anchor,w),nx(O.head,w)))}return go(p.cm,E,p.sel.primIndex)}function kc(p,w,E){return p.line==w.line?Ve(E.line,p.ch-w.ch+E.ch):Ve(E.line+(p.line-w.line),p.ch)}function Sm(p,w,E){for(var _=[],O=Ve(p.first,0),B=O,X=0;X<w.length;X++){var ae=w[X],pe=kc(ae.from,O,B),be=kc(Dl(ae),O,B);if(O=ae.to,B=be,E=="around"){var He=p.sel.ranges[X],nt=st(He.head,He.anchor)<0;_[X]=new ea(nt?be:pe,nt?pe:be)}else _[X]=new ea(pe,pe)}return new _o(_,p.sel.primIndex)}function Jd(p){p.doc.mode=vr(p.options,p.doc.modeOption),eu(p)}function eu(p){p.doc.iter(function(w){w.stateAfter&&(w.stateAfter=null),w.styles&&(w.styles=null)}),p.doc.modeFrontier=p.doc.highlightFrontier=p.doc.first,Fi(p,100),p.state.modeGen++,p.curOp&&So(p)}function fd(p,w){return w.from.ch==0&&w.to.ch==0&&ee(w.text)==""&&(!p.cm||p.cm.options.wholeLineUpdateBefore)}function of(p,w,E,_){function O(Vr){return E?E[Vr]:null}function B(Vr,Mr,Fr){Dr(Vr,Mr,Fr,_),Ia(Vr,"change",Vr,w)}function X(Vr,Mr){for(var Fr=[],mn=Vr;mn<Mr;++mn)Fr.push(new dr(be[mn],O(mn),_));return Fr}var ae=w.from,pe=w.to,be=w.text,He=je(p,ae.line),nt=je(p,pe.line),Ct=ee(be),gt=O(be.length-1),Ht=pe.line-ae.line;if(w.full)p.insert(0,X(0,be.length)),p.remove(be.length,p.size-be.length);else if(fd(p,w)){var ir=X(0,be.length-1);B(nt,nt.text,gt),Ht&&p.remove(ae.line,Ht),ir.length&&p.insert(ae.line,ir)}else if(He==nt)if(be.length==1)B(He,He.text.slice(0,ae.ch)+Ct+He.text.slice(pe.ch),gt);else{var hr=X(1,be.length-1);hr.push(new dr(Ct+He.text.slice(pe.ch),gt,_)),B(He,He.text.slice(0,ae.ch)+be[0],O(0)),p.insert(ae.line+1,hr)}else if(be.length==1)B(He,He.text.slice(0,ae.ch)+be[0]+nt.text.slice(pe.ch),O(0)),p.remove(ae.line+1,Ht);else{B(He,He.text.slice(0,ae.ch)+be[0],O(0)),B(nt,Ct+nt.text.slice(pe.ch),gt);var Pr=X(1,be.length-1);Ht>1&&p.remove(ae.line+1,Ht-1),p.insert(ae.line+1,Pr)}Ia(p,"change",p,w)}function Bi(p,w,E){function _(O,B,X){if(O.linked)for(var ae=0;ae<O.linked.length;++ae){var pe=O.linked[ae];if(pe.doc!=B){var be=X&&pe.sharedHist;E&&!be||(w(pe.doc,be),_(pe.doc,O,be))}}}_(p,null,!0)}function lf(p,w){if(w.cm)throw new Error("This document is already in use.");p.doc=w,w.cm=p,vp(p),Jd(p),Nm(p),p.options.direction=w.direction,p.options.lineWrapping||Lt(p),p.options.mode=w.modeOption,So(p)}function Nm(p){(p.doc.direction=="rtl"?oe:W)(p.display.lineDiv,"CodeMirror-rtl")}function ax(p){Es(p,function(){Nm(p),So(p)})}function sl(p){this.done=[],this.undone=[],this.undoDepth=p?p.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=p?p.maxGeneration:1}function Fl(p,w){var E={from:de(w.from),to:Dl(w),text:Re(p,w.from,w.to)};return df(p,E,w.from.line,w.to.line+1),Bi(p,function(_){return df(_,E,w.from.line,w.to.line+1)},!0),E}function km(p){for(;p.length;){var w=ee(p);if(w.ranges)p.pop();else break}}function sx(p,w){if(w)return km(p.done),ee(p.done);if(p.done.length&&!ee(p.done).ranges)return ee(p.done);if(p.done.length>1&&!p.done[p.done.length-2].ranges)return p.done.pop(),ee(p.done)}function pd(p,w,E,_){var O=p.history;O.undone.length=0;var B=+new Date,X,ae;if((O.lastOp==_||O.lastOrigin==w.origin&&w.origin&&(w.origin.charAt(0)=="+"&&O.lastModTime>B-(p.cm?p.cm.options.historyEventDelay:500)||w.origin.charAt(0)=="*"))&&(X=sx(O,O.lastOp==_)))ae=ee(X.changes),st(w.from,w.to)==0&&st(w.from,ae.to)==0?ae.to=Dl(w):X.changes.push(Fl(p,w));else{var pe=ee(O.done);for((!pe||!pe.ranges)&&_c(p.sel,O.done),X={changes:[Fl(p,w)],generation:O.generation},O.done.push(X);O.done.length>O.undoDepth;)O.done.shift(),O.done[0].ranges||O.done.shift()}O.done.push(E),O.generation=++O.maxGeneration,O.lastModTime=O.lastSelTime=B,O.lastOp=O.lastSelOp=_,O.lastOrigin=O.lastSelOrigin=w.origin,ae||ft(p,"historyAdded")}function cf(p,w,E,_){var O=w.charAt(0);return O=="*"||O=="+"&&E.ranges.length==_.ranges.length&&E.somethingSelected()==_.somethingSelected()&&new Date-p.history.lastSelTime<=(p.cm?p.cm.options.historyEventDelay:500)}function Ep(p,w,E,_){var O=p.history,B=_&&_.origin;E==O.lastSelOp||B&&O.lastSelOrigin==B&&(O.lastModTime==O.lastSelTime&&O.lastOrigin==B||cf(p,B,ee(O.done),w))?O.done[O.done.length-1]=w:_c(w,O.done),O.lastSelTime=+new Date,O.lastSelOrigin=B,O.lastSelOp=E,_&&_.clearRedo!==!1&&km(O.undone)}function _c(p,w){var E=ee(w);E&&E.ranges&&E.equals(p)||w.push(p)}function df(p,w,E,_){var O=w["spans_"+p.id],B=0;p.iter(Math.max(p.first,E),Math.min(p.first+p.size,_),function(X){X.markedSpans&&((O||(O=w["spans_"+p.id]={}))[B]=X.markedSpans),++B})}function ox(p){if(!p)return null;for(var w,E=0;E<p.length;++E)p[E].marker.explicitlyCleared?w||(w=p.slice(0,E)):w&&w.push(p[E]);return w?w.length?w:null:p}function hd(p,w){var E=w["spans_"+p.id];if(!E)return null;for(var _=[],O=0;O<w.text.length;++O)_.push(ox(E[O]));return _}function _m(p,w){var E=hd(p,w),_=qn(p,w);if(!E)return _;if(!_)return E;for(var O=0;O<E.length;++O){var B=E[O],X=_[O];if(B&&X)e:for(var ae=0;ae<X.length;++ae){for(var pe=X[ae],be=0;be<B.length;++be)if(B[be].marker==pe.marker)continue e;B.push(pe)}else X&&(E[O]=X)}return E}function Zo(p,w,E){for(var _=[],O=0;O<p.length;++O){var B=p[O];if(B.ranges){_.push(E?_o.prototype.deepCopy.call(B):B);continue}var X=B.changes,ae=[];_.push({changes:ae});for(var pe=0;pe<X.length;++pe){var be=X[pe],He=void 0;if(ae.push({from:be.from,to:be.to,text:be.text}),w)for(var nt in be)(He=nt.match(/^spans_(\d+)$/))&&Ee(w,Number(He[1]))>-1&&(ee(ae)[nt]=be[nt],delete be[nt])}}return _}function uf(p,w,E,_){if(_){var O=p.anchor;if(E){var B=st(w,O)<0;B!=st(E,O)<0?(O=w,w=E):B!=st(w,E)<0&&(w=E)}return new ea(O,w)}else return new ea(E||w,w)}function tu(p,w,E,_,O){O==null&&(O=p.cm&&(p.cm.display.shift||p.extend)),Ts(p,new _o([uf(p.sel.primary(),w,E,O)],0),_)}function Bl(p,w,E){for(var _=[],O=p.cm&&(p.cm.display.shift||p.extend),B=0;B<p.sel.ranges.length;B++)_[B]=uf(p.sel.ranges[B],w[B],null,O);var X=go(p.cm,_,p.sel.primIndex);Ts(p,X,E)}function ol(p,w,E,_){var O=p.sel.ranges.slice(0);O[w]=E,Ts(p,go(p.cm,O,p.sel.primIndex),_)}function ru(p,w,E,_){Ts(p,Nc(w,E),_)}function Em(p,w,E){var _={ranges:w.ranges,update:function(O){this.ranges=[];for(var B=0;B<O.length;B++)this.ranges[B]=new ea(Ft(p,O[B].anchor),Ft(p,O[B].head))},origin:E&&E.origin};return ft(p,"beforeSelectionChange",p,_),p.cm&&ft(p.cm,"beforeSelectionChange",p.cm,_),_.ranges!=w.ranges?go(p.cm,_.ranges,_.ranges.length-1):w}function Tp(p,w,E){var _=p.history.done,O=ee(_);O&&O.ranges?(_[_.length-1]=w,Ec(p,w,E)):Ts(p,w,E)}function Ts(p,w,E){Ec(p,w,E),Ep(p,p.sel,p.cm?p.cm.curOp.id:NaN,E)}function Ec(p,w,E){(Mt(p,"beforeSelectionChange")||p.cm&&Mt(p.cm,"beforeSelectionChange"))&&(w=Em(p,w,E));var _=E&&E.bias||(st(w.primary().head,p.sel.primary().head)<0?-1:1);Tm(p,md(p,w,_,!0)),!(E&&E.scroll===!1)&&p.cm&&p.cm.getOption("readOnly")!="nocursor"&&ld(p.cm)}function Tm(p,w){w.equals(p.sel)||(p.sel=w,p.cm&&(p.cm.curOp.updateInput=1,p.cm.curOp.selectionChanged=!0,Nt(p.cm)),Ia(p,"cursorActivity",p))}function Om(p){Tm(p,md(p,p.sel,null,!1))}function md(p,w,E,_){for(var O,B=0;B<w.ranges.length;B++){var X=w.ranges[B],ae=w.ranges.length==p.sel.ranges.length&&p.sel.ranges[B],pe=ff(p,X.anchor,ae&&ae.anchor,E,_),be=ff(p,X.head,ae&&ae.head,E,_);(O||pe!=X.anchor||be!=X.head)&&(O||(O=w.ranges.slice(0,B)),O[B]=new ea(pe,be))}return O?go(p.cm,O,w.primIndex):w}function zl(p,w,E,_,O){var B=je(p,w.line);if(B.markedSpans)for(var X=0;X<B.markedSpans.length;++X){var ae=B.markedSpans[X],pe=ae.marker,be="selectLeft"in pe?!pe.selectLeft:pe.inclusiveLeft,He="selectRight"in pe?!pe.selectRight:pe.inclusiveRight;if((ae.from==null||(be?ae.from<=w.ch:ae.from<w.ch))&&(ae.to==null||(He?ae.to>=w.ch:ae.to>w.ch))){if(O&&(ft(pe,"beforeCursorEnter"),pe.explicitlyCleared))if(B.markedSpans){--X;continue}else break;if(!pe.atomic)continue;if(E){var nt=pe.find(_<0?1:-1),Ct=void 0;if((_<0?He:be)&&(nt=Op(p,nt,-_,nt&&nt.line==w.line?B:null)),nt&&nt.line==w.line&&(Ct=st(nt,E))&&(_<0?Ct<0:Ct>0))return zl(p,nt,w,_,O)}var gt=pe.find(_<0?-1:1);return(_<0?be:He)&&(gt=Op(p,gt,_,gt.line==w.line?B:null)),gt?zl(p,gt,w,_,O):null}}return w}function ff(p,w,E,_,O){var B=_||1,X=zl(p,w,E,B,O)||!O&&zl(p,w,E,B,!0)||zl(p,w,E,-B,O)||!O&&zl(p,w,E,-B,!0);return X||(p.cantEdit=!0,Ve(p.first,0))}function Op(p,w,E,_){return E<0&&w.ch==0?w.line>p.first?Ft(p,Ve(w.line-1)):null:E>0&&w.ch==(_||je(p,w.line)).text.length?w.line<p.first+p.size-1?Ve(w.line+1,0):null:new Ve(w.line,w.ch+E)}function Pp(p){p.setSelection(Ve(p.firstLine(),0),Ve(p.lastLine()),we)}function Uo(p,w,E){var _={canceled:!1,from:w.from,to:w.to,text:w.text,origin:w.origin,cancel:function(){return _.canceled=!0}};return E&&(_.update=function(O,B,X,ae){O&&(_.from=Ft(p,O)),B&&(_.to=Ft(p,B)),X&&(_.text=X),ae!==void 0&&(_.origin=ae)}),ft(p,"beforeChange",p,_),p.cm&&ft(p.cm,"beforeChange",p.cm,_),_.canceled?(p.cm&&(p.cm.curOp.updateInput=2),null):{from:_.from,to:_.to,text:_.text,origin:_.origin}}function so(p,w,E){if(p.cm){if(!p.cm.curOp)return Rs(p.cm,so)(p,w,E);if(p.cm.state.suppressEdits)return}if(!((Mt(p,"beforeChange")||p.cm&&Mt(p.cm,"beforeChange"))&&(w=Uo(p,w,!0),!w))){var _=Ar&&!E&&ka(p,w.from,w.to);if(_)for(var O=_.length-1;O>=0;--O)Ul(p,{from:_[O].from,to:_[O].to,text:O?[""]:w.text,origin:w.origin});else Ul(p,w)}}function Ul(p,w){if(!(w.text.length==1&&w.text[0]==""&&st(w.from,w.to)==0)){var E=_p(p,w);pd(p,w,E,p.cm?p.cm.curOp.id:NaN),pi(p,w,E,qn(p,w));var _=[];Bi(p,function(O,B){!B&&Ee(_,O.history)==-1&&(Dn(O.history,w),_.push(O.history)),pi(O,w,null,qn(O,w))})}}function nu(p,w,E){var _=p.cm&&p.cm.state.suppressEdits;if(!(_&&!E)){for(var O=p.history,B,X=p.sel,ae=w=="undo"?O.done:O.undone,pe=w=="undo"?O.undone:O.done,be=0;be<ae.length&&(B=ae[be],!(E?B.ranges&&!B.equals(p.sel):!B.ranges));be++);if(be!=ae.length){for(O.lastOrigin=O.lastSelOrigin=null;;)if(B=ae.pop(),B.ranges){if(_c(B,pe),E&&!B.equals(p.sel)){Ts(p,B,{clearRedo:!1});return}X=B}else if(_){ae.push(B);return}else break;var He=[];_c(X,pe),pe.push({changes:He,generation:O.generation}),O.generation=B.generation||++O.maxGeneration;for(var nt=Mt(p,"beforeChange")||p.cm&&Mt(p.cm,"beforeChange"),Ct=function(ir){var hr=B.changes[ir];if(hr.origin=w,nt&&!Uo(p,hr,!1))return ae.length=0,{};He.push(Fl(p,hr));var Pr=ir?_p(p,hr):ee(ae);pi(p,hr,Pr,_m(p,hr)),!ir&&p.cm&&p.cm.scrollIntoView({from:hr.from,to:Dl(hr)});var Vr=[];Bi(p,function(Mr,Fr){!Fr&&Ee(Vr,Mr.history)==-1&&(Dn(Mr.history,hr),Vr.push(Mr.history)),pi(Mr,hr,null,_m(Mr,hr))})},gt=B.changes.length-1;gt>=0;--gt){var Ht=Ct(gt);if(Ht)return Ht.v}}}}function Pm(p,w){if(w!=0&&(p.first+=w,p.sel=new _o(Ne(p.sel.ranges,function(O){return new ea(Ve(O.anchor.line+w,O.anchor.ch),Ve(O.head.line+w,O.head.ch))}),p.sel.primIndex),p.cm)){So(p.cm,p.first,p.first-w,w);for(var E=p.cm.display,_=E.viewFrom;_<E.viewTo;_++)Pl(p.cm,_,"gutter")}}function pi(p,w,E,_){if(p.cm&&!p.cm.curOp)return Rs(p.cm,pi)(p,w,E,_);if(w.to.line<p.first){Pm(p,w.text.length-1-(w.to.line-w.from.line));return}if(!(w.from.line>p.lastLine())){if(w.from.line<p.first){var O=w.text.length-1-(p.first-w.from.line);Pm(p,O),w={from:Ve(p.first,0),to:Ve(w.to.line+O,w.to.ch),text:[ee(w.text)],origin:w.origin}}var B=p.lastLine();w.to.line>B&&(w={from:w.from,to:Ve(B,je(p,B).text.length),text:[w.text[0]],origin:w.origin}),w.removed=Re(p,w.from,w.to),E||(E=_p(p,w)),p.cm?Xo(p.cm,w,_):of(p,w,_),Ec(p,E,we),p.cantEdit&&ff(p,Ve(p.firstLine(),0))&&(p.cantEdit=!1)}}function Xo(p,w,E){var _=p.doc,O=p.display,B=w.from,X=w.to,ae=!1,pe=B.line;p.options.lineWrapping||(pe=jt(Me(je(_,B.line))),_.iter(pe,X.line+1,function(gt){if(gt==O.maxLine)return ae=!0,!0})),_.sel.contains(w.from,w.to)>-1&&Nt(p),of(_,w,E,gm(p)),p.options.lineWrapping||(_.iter(pe,B.line+w.text.length,function(gt){var Ht=Cr(gt);Ht>O.maxLineLength&&(O.maxLine=gt,O.maxLineLength=Ht,O.maxLineChanged=!0,ae=!1)}),ae&&(p.curOp.updateMaxLine=!0)),nr(_,B.line),Fi(p,400);var be=w.text.length-(X.line-B.line)-1;w.full?So(p):B.line==X.line&&w.text.length==1&&!fd(p.doc,w)?Pl(p,B.line,"text"):So(p,B.line,X.line+1,be);var He=Mt(p,"changes"),nt=Mt(p,"change");if(nt||He){var Ct={from:B,to:X,text:w.text,removed:w.removed,origin:w.origin};nt&&Ia(p,"change",p,Ct),He&&(p.curOp.changeObjs||(p.curOp.changeObjs=[])).push(Ct)}p.display.selForContextMenu=null}function Ga(p,w,E,_,O){var B;_||(_=E),st(_,E)<0&&(B=[_,E],E=B[0],_=B[1]),typeof w=="string"&&(w=p.splitLines(w)),so(p,{from:E,to:_,text:w,origin:O})}function pf(p,w,E,_){E<p.line?p.line+=_:w<p.line&&(p.line=w,p.ch=0)}function il(p,w,E,_){for(var O=0;O<p.length;++O){var B=p[O],X=!0;if(B.ranges){B.copied||(B=p[O]=B.deepCopy(),B.copied=!0);for(var ae=0;ae<B.ranges.length;ae++)pf(B.ranges[ae].anchor,w,E,_),pf(B.ranges[ae].head,w,E,_);continue}for(var pe=0;pe<B.changes.length;++pe){var be=B.changes[pe];if(E<be.from.line)be.from=Ve(be.from.line+_,be.from.ch),be.to=Ve(be.to.line+_,be.to.ch);else if(w<=be.to.line){X=!1;break}}X||(p.splice(0,O+1),O=0)}}function Dn(p,w){var E=w.from.line,_=w.to.line,O=w.text.length-(_-E)-1;il(p.done,E,_,O),il(p.undone,E,_,O)}function xa(p,w,E,_){var O=w,B=w;return typeof w=="number"?B=je(p,bt(p,w)):O=jt(w),O==null?null:(_(B,O)&&p.cm&&Pl(p.cm,O,E),B)}function cs(p){this.lines=p,this.parent=null;for(var w=0,E=0;E<p.length;++E)p[E].parent=this,w+=p[E].height;this.height=w}cs.prototype={chunkSize:function(){return this.lines.length},removeInner:function(p,w){for(var E=p,_=p+w;E<_;++E){var O=this.lines[E];this.height-=O.height,Or(O),Ia(O,"delete")}this.lines.splice(p,w)},collapse:function(p){p.push.apply(p,this.lines)},insertInner:function(p,w,E){this.height+=E,this.lines=this.lines.slice(0,p).concat(w).concat(this.lines.slice(p));for(var _=0;_<w.length;++_)w[_].parent=this},iterN:function(p,w,E){for(var _=p+w;p<_;++p)if(E(this.lines[p]))return!0}};function Tc(p){this.children=p;for(var w=0,E=0,_=0;_<p.length;++_){var O=p[_];w+=O.chunkSize(),E+=O.height,O.parent=this}this.size=w,this.height=E,this.parent=null}Tc.prototype={chunkSize:function(){return this.size},removeInner:function(p,w){this.size-=w;for(var E=0;E<this.children.length;++E){var _=this.children[E],O=_.chunkSize();if(p<O){var B=Math.min(w,O-p),X=_.height;if(_.removeInner(p,B),this.height-=X-_.height,O==B&&(this.children.splice(E--,1),_.parent=null),(w-=B)==0)break;p=0}else p-=O}if(this.size-w<25&&(this.children.length>1||!(this.children[0]instanceof cs))){var ae=[];this.collapse(ae),this.children=[new cs(ae)],this.children[0].parent=this}},collapse:function(p){for(var w=0;w<this.children.length;++w)this.children[w].collapse(p)},insertInner:function(p,w,E){this.size+=w.length,this.height+=E;for(var _=0;_<this.children.length;++_){var O=this.children[_],B=O.chunkSize();if(p<=B){if(O.insertInner(p,w,E),O.lines&&O.lines.length>50){for(var X=O.lines.length%25+25,ae=X;ae<O.lines.length;){var pe=new cs(O.lines.slice(ae,ae+=25));O.height-=pe.height,this.children.splice(++_,0,pe),pe.parent=this}O.lines=O.lines.slice(0,X),this.maybeSpill()}break}p-=B}},maybeSpill:function(){if(!(this.children.length<=10)){var p=this;do{var w=p.children.splice(p.children.length-5,5),E=new Tc(w);if(p.parent){p.size-=E.size,p.height-=E.height;var O=Ee(p.parent.children,p);p.parent.children.splice(O+1,0,E)}else{var _=new Tc(p.children);_.parent=p,p.children=[_,E],p=_}E.parent=p.parent}while(p.children.length>10);p.parent.maybeSpill()}},iterN:function(p,w,E){for(var _=0;_<this.children.length;++_){var O=this.children[_],B=O.chunkSize();if(p<B){var X=Math.min(w,B-p);if(O.iterN(p,X,E))return!0;if((w-=X)==0)break;p=0}else p-=B}}};var ll=function(p,w,E){if(E)for(var _ in E)E.hasOwnProperty(_)&&(this[_]=E[_]);this.doc=p,this.node=w};ll.prototype.clear=function(){var p=this.doc.cm,w=this.line.widgets,E=this.line,_=jt(E);if(!(_==null||!w)){for(var O=0;O<w.length;++O)w[O]==this&&w.splice(O--,1);w.length||(E.widgets=null);var B=Wn(this);at(E,Math.max(0,E.height-B)),p&&(Es(p,function(){Oc(p,E,-B),Pl(p,_,"widget")}),Ia(p,"lineWidgetCleared",p,this,_))}},ll.prototype.changed=function(){var p=this,w=this.height,E=this.doc.cm,_=this.line;this.height=null;var O=Wn(this)-w;O&&(sr(this.doc,_)||at(_,_.height+O),E&&Es(E,function(){E.curOp.forceUpdate=!0,Oc(E,_,O),Ia(E,"lineWidgetChanged",E,p,jt(_))}))},vt(ll);function Oc(p,w,E){Bt(w)<(p.curOp&&p.curOp.scrollTop||p.doc.scrollTop)&&tf(p,E)}function Ap(p,w,E,_){var O=new ll(p,E,_),B=p.cm;return B&&O.noHScroll&&(B.display.alignWidgets=!0),xa(p,w,"widget",function(X){var ae=X.widgets||(X.widgets=[]);if(O.insertAt==null?ae.push(O):ae.splice(Math.min(ae.length,Math.max(0,O.insertAt)),0,O),O.line=X,B&&!sr(p,X)){var pe=Bt(X)<p.scrollTop;at(X,X.height+Wn(O)),pe&&tf(B,O.height),B.curOp.forceUpdate=!0}return!0}),B&&Ia(B,"lineWidgetAdded",B,O,typeof w=="number"?w:jt(w)),O}var au=0,Qo=function(p,w){this.lines=[],this.type=w,this.doc=p,this.id=++au};Qo.prototype.clear=function(){if(!this.explicitlyCleared){var p=this.doc.cm,w=p&&!p.curOp;if(w&&Rl(p),Mt(this,"clear")){var E=this.find();E&&Ia(this,"clear",E.from,E.to)}for(var _=null,O=null,B=0;B<this.lines.length;++B){var X=this.lines[B],ae=zn(X.markedSpans,this);p&&!this.collapsed?Pl(p,jt(X),"text"):p&&(ae.to!=null&&(O=jt(X)),ae.from!=null&&(_=jt(X))),X.markedSpans=Kn(X.markedSpans,ae),ae.from==null&&this.collapsed&&!sr(this.doc,X)&&p&&at(X,xc(p.display))}if(p&&this.collapsed&&!p.options.lineWrapping)for(var pe=0;pe<this.lines.length;++pe){var be=Me(this.lines[pe]),He=Cr(be);He>p.display.maxLineLength&&(p.display.maxLine=be,p.display.maxLineLength=He,p.display.maxLineChanged=!0)}_!=null&&p&&this.collapsed&&So(p,_,O+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,p&&Om(p.doc)),p&&Ia(p,"markerCleared",p,this,_,O),w&&bc(p),this.parent&&this.parent.clear()}},Qo.prototype.find=function(p,w){p==null&&this.type=="bookmark"&&(p=1);for(var E,_,O=0;O<this.lines.length;++O){var B=this.lines[O],X=zn(B.markedSpans,this);if(X.from!=null&&(E=Ve(w?B:jt(B),X.from),p==-1))return E;if(X.to!=null&&(_=Ve(w?B:jt(B),X.to),p==1))return _}return E&&{from:E,to:_}},Qo.prototype.changed=function(){var p=this,w=this.find(-1,!0),E=this,_=this.doc.cm;!w||!_||Es(_,function(){var O=w.line,B=jt(w.line),X=xt(_,B);if(X&&(Yu(X),_.curOp.selectionChanged=_.curOp.forceUpdate=!0),_.curOp.updateMaxLine=!0,!sr(E.doc,O)&&E.height!=null){var ae=E.height;E.height=null;var pe=Wn(E)-ae;pe&&at(O,O.height+pe)}Ia(_,"markerChanged",_,p)})},Qo.prototype.attachLine=function(p){if(!this.lines.length&&this.doc.cm){var w=this.doc.cm.curOp;(!w.maybeHiddenMarkers||Ee(w.maybeHiddenMarkers,this)==-1)&&(w.maybeUnhiddenMarkers||(w.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(p)},Qo.prototype.detachLine=function(p){if(this.lines.splice(Ee(this.lines,p),1),!this.lines.length&&this.doc.cm){var w=this.doc.cm.curOp;(w.maybeHiddenMarkers||(w.maybeHiddenMarkers=[])).push(this)}},vt(Qo);function su(p,w,E,_,O){if(_&&_.shared)return Am(p,w,E,_,O);if(p.cm&&!p.cm.curOp)return Rs(p.cm,su)(p,w,E,_,O);var B=new Qo(p,O),X=st(w,E);if(_&&Y(_,B,!1),X>0||X==0&&B.clearWhenEmpty!==!1)return B;if(B.replacedWith&&(B.collapsed=!0,B.widgetNode=I("span",[B.replacedWith],"CodeMirror-widget"),_.handleMouseEvents||B.widgetNode.setAttribute("cm-ignore-events","true"),_.insertLeft&&(B.widgetNode.insertLeft=!0)),B.collapsed){if(tn(p,w.line,w,E,B)||w.line!=E.line&&tn(p,E.line,w,E,B))throw new Error("Inserting collapsed marker partially overlapping an existing one");Sn()}B.addToHistory&&pd(p,{from:w,to:E,origin:"markText"},p.sel,NaN);var ae=w.line,pe=p.cm,be;if(p.iter(ae,E.line+1,function(nt){pe&&B.collapsed&&!pe.options.lineWrapping&&Me(nt)==pe.display.maxLine&&(be=!0),B.collapsed&&ae!=w.line&&at(nt,0),ro(nt,new Vn(B,ae==w.line?w.ch:null,ae==E.line?E.ch:null),p.cm&&p.cm.curOp),++ae}),B.collapsed&&p.iter(w.line,E.line+1,function(nt){sr(p,nt)&&at(nt,0)}),B.clearOnEnter&&Fe(B,"beforeCursorEnter",function(){return B.clear()}),B.readOnly&&(kn(),(p.history.done.length||p.history.undone.length)&&p.clearHistory()),B.collapsed&&(B.id=++au,B.atomic=!0),pe){if(be&&(pe.curOp.updateMaxLine=!0),B.collapsed)So(pe,w.line,E.line+1);else if(B.className||B.startStyle||B.endStyle||B.css||B.attributes||B.title)for(var He=w.line;He<=E.line;He++)Pl(pe,He,"text");B.atomic&&Om(pe.doc),Ia(pe,"markerAdded",pe,B)}return B}var Ka=function(p,w){this.markers=p,this.primary=w;for(var E=0;E<p.length;++E)p[E].parent=this};Ka.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var p=0;p<this.markers.length;++p)this.markers[p].clear();Ia(this,"clear")}},Ka.prototype.find=function(p,w){return this.primary.find(p,w)},vt(Ka);function Am(p,w,E,_,O){_=Y(_),_.shared=!1;var B=[su(p,w,E,_,O)],X=B[0],ae=_.widgetNode;return Bi(p,function(pe){ae&&(_.widgetNode=ae.cloneNode(!0)),B.push(su(pe,Ft(pe,w),Ft(pe,E),_,O));for(var be=0;be<pe.linked.length;++be)if(pe.linked[be].isParent)return;X=ee(B)}),new Ka(B,X)}function Mp(p){return p.findMarks(Ve(p.first,0),p.clipPos(Ve(p.lastLine())),function(w){return w.parent})}function ix(p,w){for(var E=0;E<w.length;E++){var _=w[E],O=_.find(),B=p.clipPos(O.from),X=p.clipPos(O.to);if(st(B,X)){var ae=su(p,B,X,_.primary,_.primary.type);_.markers.push(ae),ae.parent=_}}}function lx(p){for(var w=function(_){var O=p[_],B=[O.primary.doc];Bi(O.primary.doc,function(pe){return B.push(pe)});for(var X=0;X<O.markers.length;X++){var ae=O.markers[X];Ee(B,ae.doc)==-1&&(ae.parent=null,O.markers.splice(X--,1))}},E=0;E<p.length;E++)w(E)}var gw=0,oo=function(p,w,E,_,O){if(!(this instanceof oo))return new oo(p,w,E,_,O);E==null&&(E=0),Tc.call(this,[new cs([new dr("",null)])]),this.first=E,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=E;var B=Ve(E,0);this.sel=Nc(B),this.history=new sl(null),this.id=++gw,this.modeOption=w,this.lineSep=_,this.direction=O=="rtl"?"rtl":"ltr",this.extend=!1,typeof p=="string"&&(p=this.splitLines(p)),of(this,{from:B,to:B,text:p}),Ts(this,Nc(B),we)};oo.prototype=M(Tc.prototype,{constructor:oo,iter:function(p,w,E){E?this.iterN(p-this.first,w-p,E):this.iterN(this.first,this.first+this.size,p)},insert:function(p,w){for(var E=0,_=0;_<w.length;++_)E+=w[_].height;this.insertInner(p-this.first,w,E)},remove:function(p,w){this.removeInner(p-this.first,w)},getValue:function(p){var w=Ye(this,this.first,this.first+this.size);return p===!1?w:w.join(p||this.lineSeparator())},setValue:ls(function(p){var w=Ve(this.first,0),E=this.first+this.size-1;so(this,{from:w,to:Ve(E,je(this,E).text.length),text:this.splitLines(p),origin:"setValue",full:!0},!0),this.cm&&cd(this.cm,0,0),Ts(this,Nc(w),we)}),replaceRange:function(p,w,E,_){w=Ft(this,w),E=E?Ft(this,E):w,Ga(this,p,w,E,_)},getRange:function(p,w,E){var _=Re(this,Ft(this,p),Ft(this,w));return E===!1?_:E===""?_.join(""):_.join(E||this.lineSeparator())},getLine:function(p){var w=this.getLineHandle(p);return w&&w.text},getLineHandle:function(p){if($e(this,p))return je(this,p)},getLineNumber:function(p){return jt(p)},getLineHandleVisualStart:function(p){return typeof p=="number"&&(p=je(this,p)),Me(p)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(p){return Ft(this,p)},getCursor:function(p){var w=this.sel.primary(),E;return p==null||p=="head"?E=w.head:p=="anchor"?E=w.anchor:p=="end"||p=="to"||p===!1?E=w.to():E=w.from(),E},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:ls(function(p,w,E){ru(this,Ft(this,typeof p=="number"?Ve(p,w||0):p),null,E)}),setSelection:ls(function(p,w,E){ru(this,Ft(this,p),Ft(this,w||p),E)}),extendSelection:ls(function(p,w,E){tu(this,Ft(this,p),w&&Ft(this,w),E)}),extendSelections:ls(function(p,w){Bl(this,Br(this,p),w)}),extendSelectionsBy:ls(function(p,w){var E=Ne(this.sel.ranges,p);Bl(this,Br(this,E),w)}),setSelections:ls(function(p,w,E){if(p.length){for(var _=[],O=0;O<p.length;O++)_[O]=new ea(Ft(this,p[O].anchor),Ft(this,p[O].head||p[O].anchor));w==null&&(w=Math.min(p.length-1,this.sel.primIndex)),Ts(this,go(this.cm,_,w),E)}}),addSelection:ls(function(p,w,E){var _=this.sel.ranges.slice(0);_.push(new ea(Ft(this,p),Ft(this,w||p))),Ts(this,go(this.cm,_,_.length-1),E)}),getSelection:function(p){for(var w=this.sel.ranges,E,_=0;_<w.length;_++){var O=Re(this,w[_].from(),w[_].to());E=E?E.concat(O):O}return p===!1?E:E.join(p||this.lineSeparator())},getSelections:function(p){for(var w=[],E=this.sel.ranges,_=0;_<E.length;_++){var O=Re(this,E[_].from(),E[_].to());p!==!1&&(O=O.join(p||this.lineSeparator())),w[_]=O}return w},replaceSelection:function(p,w,E){for(var _=[],O=0;O<this.sel.ranges.length;O++)_[O]=p;this.replaceSelections(_,w,E||"+input")},replaceSelections:ls(function(p,w,E){for(var _=[],O=this.sel,B=0;B<O.ranges.length;B++){var X=O.ranges[B];_[B]={from:X.from(),to:X.to(),text:this.splitLines(p[B]),origin:E}}for(var ae=w&&w!="end"&&Sm(this,_,w),pe=_.length-1;pe>=0;pe--)so(this,_[pe]);ae?Tp(this,ae):this.cm&&ld(this.cm)}),undo:ls(function(){nu(this,"undo")}),redo:ls(function(){nu(this,"redo")}),undoSelection:ls(function(){nu(this,"undo",!0)}),redoSelection:ls(function(){nu(this,"redo",!0)}),setExtending:function(p){this.extend=p},getExtending:function(){return this.extend},historySize:function(){for(var p=this.history,w=0,E=0,_=0;_<p.done.length;_++)p.done[_].ranges||++w;for(var O=0;O<p.undone.length;O++)p.undone[O].ranges||++E;return{undo:w,redo:E}},clearHistory:function(){var p=this;this.history=new sl(this.history),Bi(this,function(w){return w.history=p.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(p){return p&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(p){return this.history.generation==(p||this.cleanGeneration)},getHistory:function(){return{done:Zo(this.history.done),undone:Zo(this.history.undone)}},setHistory:function(p){var w=this.history=new sl(this.history);w.done=Zo(p.done.slice(0),null,!0),w.undone=Zo(p.undone.slice(0),null,!0)},setGutterMarker:ls(function(p,w,E){return xa(this,p,"gutter",function(_){var O=_.gutterMarkers||(_.gutterMarkers={});return O[w]=E,!E&&ue(O)&&(_.gutterMarkers=null),!0})}),clearGutter:ls(function(p){var w=this;this.iter(function(E){E.gutterMarkers&&E.gutterMarkers[p]&&xa(w,E,"gutter",function(){return E.gutterMarkers[p]=null,ue(E.gutterMarkers)&&(E.gutterMarkers=null),!0})})}),lineInfo:function(p){var w;if(typeof p=="number"){if(!$e(this,p)||(w=p,p=je(this,p),!p))return null}else if(w=jt(p),w==null)return null;return{line:w,handle:p,text:p.text,gutterMarkers:p.gutterMarkers,textClass:p.textClass,bgClass:p.bgClass,wrapClass:p.wrapClass,widgets:p.widgets}},addLineClass:ls(function(p,w,E){return xa(this,p,w=="gutter"?"gutter":"class",function(_){var O=w=="text"?"textClass":w=="background"?"bgClass":w=="gutter"?"gutterClass":"wrapClass";if(!_[O])_[O]=E;else{if(V(E).test(_[O]))return!1;_[O]+=" "+E}return!0})}),removeLineClass:ls(function(p,w,E){return xa(this,p,w=="gutter"?"gutter":"class",function(_){var O=w=="text"?"textClass":w=="background"?"bgClass":w=="gutter"?"gutterClass":"wrapClass",B=_[O];if(B)if(E==null)_[O]=null;else{var X=B.match(V(E));if(!X)return!1;var ae=X.index+X[0].length;_[O]=B.slice(0,X.index)+(!X.index||ae==B.length?"":" ")+B.slice(ae)||null}else return!1;return!0})}),addLineWidget:ls(function(p,w,E){return Ap(this,p,w,E)}),removeLineWidget:function(p){p.clear()},markText:function(p,w,E){return su(this,Ft(this,p),Ft(this,w),E,E&&E.type||"range")},setBookmark:function(p,w){var E={replacedWith:w&&(w.nodeType==null?w.widget:w),insertLeft:w&&w.insertLeft,clearWhenEmpty:!1,shared:w&&w.shared,handleMouseEvents:w&&w.handleMouseEvents};return p=Ft(this,p),su(this,p,p,E,"bookmark")},findMarksAt:function(p){p=Ft(this,p);var w=[],E=je(this,p.line).markedSpans;if(E)for(var _=0;_<E.length;++_){var O=E[_];(O.from==null||O.from<=p.ch)&&(O.to==null||O.to>=p.ch)&&w.push(O.marker.parent||O.marker)}return w},findMarks:function(p,w,E){p=Ft(this,p),w=Ft(this,w);var _=[],O=p.line;return this.iter(p.line,w.line+1,function(B){var X=B.markedSpans;if(X)for(var ae=0;ae<X.length;ae++){var pe=X[ae];!(pe.to!=null&&O==p.line&&p.ch>=pe.to||pe.from==null&&O!=p.line||pe.from!=null&&O==w.line&&pe.from>=w.ch)&&(!E||E(pe.marker))&&_.push(pe.marker.parent||pe.marker)}++O}),_},getAllMarks:function(){var p=[];return this.iter(function(w){var E=w.markedSpans;if(E)for(var _=0;_<E.length;++_)E[_].from!=null&&p.push(E[_].marker)}),p},posFromIndex:function(p){var w,E=this.first,_=this.lineSeparator().length;return this.iter(function(O){var B=O.text.length+_;if(B>p)return w=p,!0;p-=B,++E}),Ft(this,Ve(E,w))},indexFromPos:function(p){p=Ft(this,p);var w=p.ch;if(p.line<this.first||p.ch<0)return 0;var E=this.lineSeparator().length;return this.iter(this.first,p.line,function(_){w+=_.text.length+E}),w},copy:function(p){var w=new oo(Ye(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return w.scrollTop=this.scrollTop,w.scrollLeft=this.scrollLeft,w.sel=this.sel,w.extend=!1,p&&(w.history.undoDepth=this.history.undoDepth,w.setHistory(this.getHistory())),w},linkedDoc:function(p){p||(p={});var w=this.first,E=this.first+this.size;p.from!=null&&p.from>w&&(w=p.from),p.to!=null&&p.to<E&&(E=p.to);var _=new oo(Ye(this,w,E),p.mode||this.modeOption,w,this.lineSep,this.direction);return p.sharedHist&&(_.history=this.history),(this.linked||(this.linked=[])).push({doc:_,sharedHist:p.sharedHist}),_.linked=[{doc:this,isParent:!0,sharedHist:p.sharedHist}],ix(_,Mp(this)),_},unlinkDoc:function(p){if(p instanceof za&&(p=p.doc),this.linked)for(var w=0;w<this.linked.length;++w){var E=this.linked[w];if(E.doc==p){this.linked.splice(w,1),p.unlinkDoc(this),lx(Mp(this));break}}if(p.history==this.history){var _=[p.id];Bi(p,function(O){return _.push(O.id)},!0),p.history=new sl(null),p.history.done=Zo(this.history.done,_),p.history.undone=Zo(this.history.undone,_)}},iterLinkedDocs:function(p){Bi(this,p)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(p){return this.lineSep?p.split(this.lineSep):_n(p)},lineSeparator:function(){return this.lineSep||`
`},setDirection:ls(function(p){p!="rtl"&&(p="ltr"),p!=this.direction&&(this.direction=p,this.iter(function(w){return w.order=null}),this.cm&&ax(this.cm))})}),oo.prototype.eachLine=oo.prototype.iter;var Ip=0;function Mm(p){var w=this;if(hf(w),!(Ze(w,p)||Fa(w.display,p))){Jt(p),l&&(Ip=+new Date);var E=ad(w,p,!0),_=p.dataTransfer.files;if(!(!E||w.isReadOnly()))if(_&&_.length&&window.FileReader&&window.File)for(var O=_.length,B=Array(O),X=0,ae=function(){++X==O&&Rs(w,function(){E=Ft(w.doc,E);var gt={from:E,to:E,text:w.doc.splitLines(B.filter(function(Ht){return Ht!=null}).join(w.doc.lineSeparator())),origin:"paste"};so(w.doc,gt),Tp(w.doc,Nc(Ft(w.doc,E),Ft(w.doc,Dl(gt))))})()},pe=function(gt,Ht){if(w.options.allowDropFileTypes&&Ee(w.options.allowDropFileTypes,gt.type)==-1){ae();return}var ir=new FileReader;ir.onerror=function(){return ae()},ir.onload=function(){var hr=ir.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(hr)){ae();return}B[Ht]=hr,ae()},ir.readAsText(gt)},be=0;be<_.length;be++)pe(_[be],be);else{if(w.state.draggingText&&w.doc.sel.contains(E)>-1){w.state.draggingText(p),setTimeout(function(){return w.display.input.focus()},20);return}try{var He=p.dataTransfer.getData("Text");if(He){var nt;if(w.state.draggingText&&!w.state.draggingText.copy&&(nt=w.listSelections()),Ec(w.doc,Nc(E,E)),nt)for(var Ct=0;Ct<nt.length;++Ct)Ga(w.doc,"",nt[Ct].anchor,nt[Ct].head,"drag");w.replaceSelection(He,"around","paste"),w.display.input.focus()}}catch{}}}}function Eo(p,w){if(l&&(!p.state.draggingText||+new Date-Ip<100)){ye(w);return}if(!(Ze(p,w)||Fa(p.display,w))&&(w.dataTransfer.setData("Text",p.getSelection()),w.dataTransfer.effectAllowed="copyMove",w.dataTransfer.setDragImage&&!x)){var E=q("img",null,null,"position: fixed; left: 0; top: 0;");E.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",y&&(E.width=E.height=1,p.display.wrapper.appendChild(E),E._top=E.offsetTop),w.dataTransfer.setDragImage(E,0,0),y&&E.parentNode.removeChild(E)}}function Os(p,w){var E=ad(p,w);if(E){var _=document.createDocumentFragment();bp(p,E,_),p.display.dragCursor||(p.display.dragCursor=q("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),p.display.lineSpace.insertBefore(p.display.dragCursor,p.display.cursorDiv)),A(p.display.dragCursor,_)}}function hf(p){p.display.dragCursor&&(p.display.lineSpace.removeChild(p.display.dragCursor),p.display.dragCursor=null)}function ou(p){if(document.getElementsByClassName){for(var w=document.getElementsByClassName("CodeMirror"),E=[],_=0;_<w.length;_++){var O=w[_].CodeMirror;O&&E.push(O)}E.length&&E[0].operation(function(){for(var B=0;B<E.length;B++)p(E[B])})}}var mf=!1;function Im(){mf||($l(),mf=!0)}function $l(){var p;Fe(window,"resize",function(){p==null&&(p=setTimeout(function(){p=null,ou(Rp)},100))}),Fe(window,"blur",function(){return ou(Ri)})}function Rp(p){var w=p.display;w.cachedCharWidth=w.cachedTextHeight=w.cachedPaddingH=null,w.scrollbarsClipped=!1,p.setSize()}for(var cl={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},gd=0;gd<10;gd++)cl[gd+48]=cl[gd+96]=String(gd);for(var gf=65;gf<=90;gf++)cl[gf]=String.fromCharCode(gf);for(var iu=1;iu<=12;iu++)cl[iu+111]=cl[iu+63235]="F"+iu;var dl={};dl.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},dl.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},dl.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},dl.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},dl.default=N?dl.macDefault:dl.pcDefault;function cx(p){var w=p.split(/-(?!$)/);p=w[w.length-1];for(var E,_,O,B,X=0;X<w.length-1;X++){var ae=w[X];if(/^(cmd|meta|m)$/i.test(ae))B=!0;else if(/^a(lt)?$/i.test(ae))E=!0;else if(/^(c|ctrl|control)$/i.test(ae))_=!0;else if(/^s(hift)?$/i.test(ae))O=!0;else throw new Error("Unrecognized modifier name: "+ae)}return E&&(p="Alt-"+p),_&&(p="Ctrl-"+p),B&&(p="Cmd-"+p),O&&(p="Shift-"+p),p}function dx(p){var w={};for(var E in p)if(p.hasOwnProperty(E)){var _=p[E];if(/^(name|fallthrough|(de|at)tach)$/.test(E))continue;if(_=="..."){delete p[E];continue}for(var O=Ne(E.split(" "),cx),B=0;B<O.length;B++){var X=void 0,ae=void 0;B==O.length-1?(ae=O.join(" "),X=_):(ae=O.slice(0,B+1).join(" "),X="...");var pe=w[ae];if(!pe)w[ae]=X;else if(pe!=X)throw new Error("Inconsistent bindings for "+ae)}delete p[E]}for(var be in w)p[be]=w[be];return p}function yd(p,w,E,_){w=yf(w);var O=w.call?w.call(p,_):w[p];if(O===!1)return"nothing";if(O==="...")return"multi";if(O!=null&&E(O))return"handled";if(w.fallthrough){if(Object.prototype.toString.call(w.fallthrough)!="[object Array]")return yd(p,w.fallthrough,E,_);for(var B=0;B<w.fallthrough.length;B++){var X=yd(p,w.fallthrough[B],E,_);if(X)return X}}}function Lp(p){var w=typeof p=="string"?p:cl[p.keyCode];return w=="Ctrl"||w=="Alt"||w=="Shift"||w=="Mod"}function Rm(p,w,E){var _=p;return w.altKey&&_!="Alt"&&(p="Alt-"+p),(z?w.metaKey:w.ctrlKey)&&_!="Ctrl"&&(p="Ctrl-"+p),(z?w.ctrlKey:w.metaKey)&&_!="Mod"&&(p="Cmd-"+p),!E&&w.shiftKey&&_!="Shift"&&(p="Shift-"+p),p}function ux(p,w){if(y&&p.keyCode==34&&p.char)return!1;var E=cl[p.keyCode];return E==null||p.altGraphKey?!1:(p.keyCode==3&&p.code&&(E=p.code),Rm(E,p,w))}function yf(p){return typeof p=="string"?dl[p]:p}function xd(p,w){for(var E=p.doc.sel.ranges,_=[],O=0;O<E.length;O++){for(var B=w(E[O]);_.length&&st(B.from,ee(_).to)<=0;){var X=_.pop();if(st(X.from,B.from)<0){B.from=X.from;break}}_.push(B)}Es(p,function(){for(var ae=_.length-1;ae>=0;ae--)Ga(p.doc,"",_[ae].from,_[ae].to,"+delete");ld(p)})}function Dp(p,w,E){var _=se(p.text,w+E,E);return _<0||_>p.text.length?null:_}function xf(p,w,E){var _=Dp(p,w.ch,E);return _==null?null:new Ve(w.line,_,E<0?"after":"before")}function Fp(p,w,E,_,O){if(p){w.doc.direction=="rtl"&&(O=-O);var B=le(E,w.doc.direction);if(B){var X=O<0?ee(B):B[0],ae=O<0==(X.level==1),pe=ae?"after":"before",be;if(X.level>0||w.doc.direction=="rtl"){var He=Xt(w,E);be=O<0?E.text.length-1:0;var nt=Nr(w,He,be).top;be=Le(function(Ct){return Nr(w,He,Ct).top==nt},O<0==(X.level==1)?X.from:X.to-1,be),pe=="before"&&(be=Dp(E,be,1))}else be=O<0?X.to:X.from;return new Ve(_,be,pe)}}return new Ve(_,O<0?E.text.length:0,O<0?"before":"after")}function fx(p,w,E,_){var O=le(w,p.doc.direction);if(!O)return xf(w,E,_);E.ch>=w.text.length?(E.ch=w.text.length,E.sticky="before"):E.ch<=0&&(E.ch=0,E.sticky="after");var B=ie(O,E.ch,E.sticky),X=O[B];if(p.doc.direction=="ltr"&&X.level%2==0&&(_>0?X.to>E.ch:X.from<E.ch))return xf(w,E,_);var ae=function(Pr,Vr){return Dp(w,Pr instanceof Ve?Pr.ch:Pr,Vr)},pe,be=function(Pr){return p.options.lineWrapping?(pe=pe||Xt(p,w),yp(p,w,pe,Pr)):{begin:0,end:w.text.length}},He=be(E.sticky=="before"?ae(E,-1):E.ch);if(p.doc.direction=="rtl"||X.level==1){var nt=X.level==1==_<0,Ct=ae(E,nt?1:-1);if(Ct!=null&&(nt?Ct<=X.to&&Ct<=He.end:Ct>=X.from&&Ct>=He.begin)){var gt=nt?"before":"after";return new Ve(E.line,Ct,gt)}}var Ht=function(Pr,Vr,Mr){for(var Fr=function(va,Fn){return Fn?new Ve(E.line,ae(va,1),"before"):new Ve(E.line,va,"after")};Pr>=0&&Pr<O.length;Pr+=Vr){var mn=O[Pr],dn=Vr>0==(mn.level!=1),Mn=dn?Mr.begin:ae(Mr.end,-1);if(mn.from<=Mn&&Mn<mn.to||(Mn=dn?mn.from:ae(mn.to,-1),Mr.begin<=Mn&&Mn<Mr.end))return Fr(Mn,dn)}},ir=Ht(B+_,_,He);if(ir)return ir;var hr=_>0?He.end:ae(He.begin,-1);return hr!=null&&!(_>0&&hr==w.text.length)&&(ir=Ht(_>0?0:O.length-1,_,be(hr)),ir)?ir:null}var lu={selectAll:Pp,singleSelection:function(p){return p.setSelection(p.getCursor("anchor"),p.getCursor("head"),we)},killLine:function(p){return xd(p,function(w){if(w.empty()){var E=je(p.doc,w.head.line).text.length;return w.head.ch==E&&w.head.line<p.lastLine()?{from:w.head,to:Ve(w.head.line+1,0)}:{from:w.head,to:Ve(w.head.line,E)}}else return{from:w.from(),to:w.to()}})},deleteLine:function(p){return xd(p,function(w){return{from:Ve(w.from().line,0),to:Ft(p.doc,Ve(w.to().line+1,0))}})},delLineLeft:function(p){return xd(p,function(w){return{from:Ve(w.from().line,0),to:w.from()}})},delWrappedLineLeft:function(p){return xd(p,function(w){var E=p.charCoords(w.head,"div").top+5,_=p.coordsChar({left:0,top:E},"div");return{from:_,to:w.from()}})},delWrappedLineRight:function(p){return xd(p,function(w){var E=p.charCoords(w.head,"div").top+5,_=p.coordsChar({left:p.display.lineDiv.offsetWidth+100,top:E},"div");return{from:w.from(),to:_}})},undo:function(p){return p.undo()},redo:function(p){return p.redo()},undoSelection:function(p){return p.undoSelection()},redoSelection:function(p){return p.redoSelection()},goDocStart:function(p){return p.extendSelection(Ve(p.firstLine(),0))},goDocEnd:function(p){return p.extendSelection(Ve(p.lastLine()))},goLineStart:function(p){return p.extendSelectionsBy(function(w){return Lm(p,w.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(p){return p.extendSelectionsBy(function(w){return hx(p,w.head)},{origin:"+move",bias:1})},goLineEnd:function(p){return p.extendSelectionsBy(function(w){return px(p,w.head.line)},{origin:"+move",bias:-1})},goLineRight:function(p){return p.extendSelectionsBy(function(w){var E=p.cursorCoords(w.head,"div").top+5;return p.coordsChar({left:p.display.lineDiv.offsetWidth+100,top:E},"div")},ze)},goLineLeft:function(p){return p.extendSelectionsBy(function(w){var E=p.cursorCoords(w.head,"div").top+5;return p.coordsChar({left:0,top:E},"div")},ze)},goLineLeftSmart:function(p){return p.extendSelectionsBy(function(w){var E=p.cursorCoords(w.head,"div").top+5,_=p.coordsChar({left:0,top:E},"div");return _.ch<p.getLine(_.line).search(/\S/)?hx(p,w.head):_},ze)},goLineUp:function(p){return p.moveV(-1,"line")},goLineDown:function(p){return p.moveV(1,"line")},goPageUp:function(p){return p.moveV(-1,"page")},goPageDown:function(p){return p.moveV(1,"page")},goCharLeft:function(p){return p.moveH(-1,"char")},goCharRight:function(p){return p.moveH(1,"char")},goColumnLeft:function(p){return p.moveH(-1,"column")},goColumnRight:function(p){return p.moveH(1,"column")},goWordLeft:function(p){return p.moveH(-1,"word")},goGroupRight:function(p){return p.moveH(1,"group")},goGroupLeft:function(p){return p.moveH(-1,"group")},goWordRight:function(p){return p.moveH(1,"word")},delCharBefore:function(p){return p.deleteH(-1,"codepoint")},delCharAfter:function(p){return p.deleteH(1,"char")},delWordBefore:function(p){return p.deleteH(-1,"word")},delWordAfter:function(p){return p.deleteH(1,"word")},delGroupBefore:function(p){return p.deleteH(-1,"group")},delGroupAfter:function(p){return p.deleteH(1,"group")},indentAuto:function(p){return p.indentSelection("smart")},indentMore:function(p){return p.indentSelection("add")},indentLess:function(p){return p.indentSelection("subtract")},insertTab:function(p){return p.replaceSelection("	")},insertSoftTab:function(p){for(var w=[],E=p.listSelections(),_=p.options.tabSize,O=0;O<E.length;O++){var B=E[O].from(),X=Se(p.getLine(B.line),B.ch,_);w.push(Pt(_-X%_))}p.replaceSelections(w)},defaultTab:function(p){p.somethingSelected()?p.indentSelection("add"):p.execCommand("insertTab")},transposeChars:function(p){return Es(p,function(){for(var w=p.listSelections(),E=[],_=0;_<w.length;_++)if(w[_].empty()){var O=w[_].head,B=je(p.doc,O.line).text;if(B){if(O.ch==B.length&&(O=new Ve(O.line,O.ch-1)),O.ch>0)O=new Ve(O.line,O.ch+1),p.replaceRange(B.charAt(O.ch-1)+B.charAt(O.ch-2),Ve(O.line,O.ch-2),O,"+transpose");else if(O.line>p.doc.first){var X=je(p.doc,O.line-1).text;X&&(O=new Ve(O.line,1),p.replaceRange(B.charAt(0)+p.doc.lineSeparator()+X.charAt(X.length-1),Ve(O.line-1,X.length-1),O,"+transpose"))}}E.push(new ea(O,O))}p.setSelections(E)})},newlineAndIndent:function(p){return Es(p,function(){for(var w=p.listSelections(),E=w.length-1;E>=0;E--)p.replaceRange(p.doc.lineSeparator(),w[E].anchor,w[E].head,"+input");w=p.listSelections();for(var _=0;_<w.length;_++)p.indentLine(w[_].from().line,null,!0);ld(p)})},openLine:function(p){return p.replaceSelection(`
`,"start")},toggleOverwrite:function(p){return p.toggleOverwrite()}};function Lm(p,w){var E=je(p.doc,w),_=Me(E);return _!=E&&(w=jt(_)),Fp(!0,p,_,w,1)}function px(p,w){var E=je(p.doc,w),_=ot(E);return _!=E&&(w=jt(_)),Fp(!0,p,E,w,-1)}function hx(p,w){var E=Lm(p,w.line),_=je(p.doc,E.line),O=le(_,p.doc.direction);if(!O||O[0].level==0){var B=Math.max(E.ch,_.text.search(/\S/)),X=w.line==E.line&&w.ch<=B&&w.ch;return Ve(E.line,X?0:B,E.sticky)}return E}function vf(p,w,E){if(typeof w=="string"&&(w=lu[w],!w))return!1;p.display.input.ensurePolled();var _=p.display.shift,O=!1;try{p.isReadOnly()&&(p.state.suppressEdits=!0),E&&(p.display.shift=!1),O=w(p)!=qe}finally{p.display.shift=_,p.state.suppressEdits=!1}return O}function cu(p,w,E){for(var _=0;_<p.state.keyMaps.length;_++){var O=yd(w,p.state.keyMaps[_],E,p);if(O)return O}return p.options.extraKeys&&yd(w,p.options.extraKeys,E,p)||yd(w,p.options.keyMap,E,p)}var mx=new fe;function Pc(p,w,E,_){var O=p.state.keySeq;if(O){if(Lp(w))return"handled";if(/\'$/.test(w)?p.state.keySeq=null:mx.set(50,function(){p.state.keySeq==O&&(p.state.keySeq=null,p.display.input.reset())}),bf(p,O+" "+w,E,_))return!0}return bf(p,w,E,_)}function bf(p,w,E,_){var O=cu(p,w,_);return O=="multi"&&(p.state.keySeq=w),O=="handled"&&Ia(p,"keyHandled",p,w,E),(O=="handled"||O=="multi")&&(Jt(E),ef(p)),!!O}function Dm(p,w){var E=ux(w,!0);return E?w.shiftKey&&!p.state.keySeq?Pc(p,"Shift-"+E,w,function(_){return vf(p,_,!0)})||Pc(p,E,w,function(_){if(typeof _=="string"?/^go[A-Z]/.test(_):_.motion)return vf(p,_)}):Pc(p,E,w,function(_){return vf(p,_)}):!1}function Fm(p,w,E){return Pc(p,"'"+E+"'",w,function(_){return vf(p,_,!0)})}var Bm=null;function zm(p){var w=this;if(!(p.target&&p.target!=w.display.input.getField())&&(w.curOp.focus=Q(),!Ze(w,p))){l&&c<11&&p.keyCode==27&&(p.returnValue=!1);var E=p.keyCode;w.display.shift=E==16||p.shiftKey;var _=Dm(w,p);y&&(Bm=_?E:null,!_&&E==88&&!ar&&(N?p.metaKey:p.ctrlKey)&&w.replaceSelection("",null,"cut")),t&&!N&&!_&&E==46&&p.shiftKey&&!p.ctrlKey&&document.execCommand&&document.execCommand("cut"),E==18&&!/\bCodeMirror-crosshair\b/.test(w.display.lineDiv.className)&&gx(w)}}function gx(p){var w=p.display.lineDiv;oe(w,"CodeMirror-crosshair");function E(_){(_.keyCode==18||!_.altKey)&&(W(w,"CodeMirror-crosshair"),lt(document,"keyup",E),lt(document,"mouseover",E))}Fe(document,"keyup",E),Fe(document,"mouseover",E)}function Um(p){p.keyCode==16&&(this.doc.sel.shift=!1),Ze(this,p)}function $m(p){var w=this;if(!(p.target&&p.target!=w.display.input.getField())&&!(Fa(w.display,p)||Ze(w,p)||p.ctrlKey&&!p.altKey||N&&p.metaKey)){var E=p.keyCode,_=p.charCode;if(y&&E==Bm){Bm=null,Jt(p);return}if(!(y&&(!p.which||p.which<10)&&Dm(w,p))){var O=String.fromCharCode(_??E);O!="\b"&&(Fm(w,p,O)||w.display.input.onKeyPress(p))}}}var yx=400,wf=function(p,w,E){this.time=p,this.pos=w,this.button=E};wf.prototype.compare=function(p,w,E){return this.time+yx>p&&st(w,this.pos)==0&&E==this.button};var du,uu;function Vm(p,w){var E=+new Date;return uu&&uu.compare(E,p,w)?(du=uu=null,"triple"):du&&du.compare(E,p,w)?(uu=new wf(E,p,w),du=null,"double"):(du=new wf(E,p,w),uu=null,"single")}function Wm(p){var w=this,E=w.display;if(!(Ze(w,p)||E.activeTouch&&E.input.supportsTouch())){if(E.input.ensurePolled(),E.shift=p.shiftKey,Fa(E,p)){d||(E.scroller.draggable=!1,setTimeout(function(){return E.scroller.draggable=!0},100));return}if(!Ym(w,p)){var _=ad(w,p),O=tt(p),B=_?Vm(_,O):"single";window.focus(),O==1&&w.state.selectingText&&w.state.selectingText(p),!(_&&xx(w,O,_,B,p))&&(O==1?_?Hm(w,_,B,p):Be(p)==E.scroller&&Jt(p):O==2?(_&&tu(w.doc,_),setTimeout(function(){return E.input.focus()},20)):O==3&&(H?w.display.input.onContextMenu(p):jp(w)))}}}function xx(p,w,E,_,O){var B="Click";return _=="double"?B="Double"+B:_=="triple"&&(B="Triple"+B),B=(w==1?"Left":w==2?"Middle":"Right")+B,Pc(p,Rm(B,O),O,function(X){if(typeof X=="string"&&(X=lu[X]),!X)return!1;var ae=!1;try{p.isReadOnly()&&(p.state.suppressEdits=!0),ae=X(p,E)!=qe}finally{p.state.suppressEdits=!1}return ae})}function yw(p,w,E){var _=p.getOption("configureMouse"),O=_?_(p,w,E):{};if(O.unit==null){var B=P?E.shiftKey&&E.metaKey:E.altKey;O.unit=B?"rectangle":w=="single"?"char":w=="double"?"word":"line"}return(O.extend==null||p.doc.extend)&&(O.extend=p.doc.extend||E.shiftKey),O.addNew==null&&(O.addNew=N?E.metaKey:E.ctrlKey),O.moveOnDrag==null&&(O.moveOnDrag=!(N?E.altKey:E.ctrlKey)),O}function Hm(p,w,E,_){l?setTimeout(G(vc,p),0):p.curOp.focus=Q();var O=yw(p,E,_),B=p.doc.sel,X;p.options.dragDrop&&wt&&!p.isReadOnly()&&E=="single"&&(X=B.contains(w))>-1&&(st((X=B.ranges[X]).from(),w)<0||w.xRel>0)&&(st(X.to(),w)>0||w.xRel<0)?vx(p,_,w,O):Gm(p,_,w,O)}function vx(p,w,E,_){var O=p.display,B=!1,X=Rs(p,function(be){d&&(O.scroller.draggable=!1),p.state.draggingText=!1,p.state.delayingBlurEvent&&(p.hasFocus()?p.state.delayingBlurEvent=!1:jp(p)),lt(O.wrapper.ownerDocument,"mouseup",X),lt(O.wrapper.ownerDocument,"mousemove",ae),lt(O.scroller,"dragstart",pe),lt(O.scroller,"drop",X),B||(Jt(be),_.addNew||tu(p.doc,E,null,null,_.extend),d&&!x||l&&c==9?setTimeout(function(){O.wrapper.ownerDocument.body.focus({preventScroll:!0}),O.input.focus()},20):O.input.focus())}),ae=function(be){B=B||Math.abs(w.clientX-be.clientX)+Math.abs(w.clientY-be.clientY)>=10},pe=function(){return B=!0};d&&(O.scroller.draggable=!0),p.state.draggingText=X,X.copy=!_.moveOnDrag,Fe(O.wrapper.ownerDocument,"mouseup",X),Fe(O.wrapper.ownerDocument,"mousemove",ae),Fe(O.scroller,"dragstart",pe),Fe(O.scroller,"drop",X),p.state.delayingBlurEvent=!0,setTimeout(function(){return O.input.focus()},20),O.scroller.dragDrop&&O.scroller.dragDrop()}function qm(p,w,E){if(E=="char")return new ea(w,w);if(E=="word")return p.findWordAt(w);if(E=="line")return new ea(Ve(w.line,0),Ft(p.doc,Ve(w.line+1,0)));var _=E(p,w);return new ea(_.from,_.to)}function Gm(p,w,E,_){l&&jp(p);var O=p.display,B=p.doc;Jt(w);var X,ae,pe=B.sel,be=pe.ranges;if(_.addNew&&!_.extend?(ae=B.sel.contains(E),ae>-1?X=be[ae]:X=new ea(E,E)):(X=B.sel.primary(),ae=B.sel.primIndex),_.unit=="rectangle")_.addNew||(X=new ea(E,E)),E=ad(p,w,!0,!0),ae=-1;else{var He=qm(p,E,_.unit);_.extend?X=uf(X,He.anchor,He.head,_.extend):X=He}_.addNew?ae==-1?(ae=be.length,Ts(B,go(p,be.concat([X]),ae),{scroll:!1,origin:"*mouse"})):be.length>1&&be[ae].empty()&&_.unit=="char"&&!_.extend?(Ts(B,go(p,be.slice(0,ae).concat(be.slice(ae+1)),0),{scroll:!1,origin:"*mouse"}),pe=B.sel):ol(B,ae,X,Oe):(ae=0,Ts(B,new _o([X],0),Oe),pe=B.sel);var nt=E;function Ct(Mr){if(st(nt,Mr)!=0)if(nt=Mr,_.unit=="rectangle"){for(var Fr=[],mn=p.options.tabSize,dn=Se(je(B,E.line).text,E.ch,mn),Mn=Se(je(B,Mr.line).text,Mr.ch,mn),va=Math.min(dn,Mn),Fn=Math.max(dn,Mn),ds=Math.min(E.line,Mr.line),$o=Math.min(p.lastLine(),Math.max(E.line,Mr.line));ds<=$o;ds++){var yo=je(B,ds).text,rs=We(yo,va,mn);va==Fn?Fr.push(new ea(Ve(ds,rs),Ve(ds,rs))):yo.length>rs&&Fr.push(new ea(Ve(ds,rs),Ve(ds,We(yo,Fn,mn))))}Fr.length||Fr.push(new ea(E,E)),Ts(B,go(p,pe.ranges.slice(0,ae).concat(Fr),ae),{origin:"*mouse",scroll:!1}),p.scrollIntoView(Mr)}else{var bs=X,Ws=qm(p,Mr,_.unit),Ps=bs.anchor,ns;st(Ws.anchor,Ps)>0?(ns=Ws.head,Ps=ct(bs.from(),Ws.anchor)):(ns=Ws.anchor,Ps=ke(bs.to(),Ws.head));var ba=pe.ranges.slice(0);ba[ae]=bx(p,new ea(Ft(B,Ps),ns)),Ts(B,go(p,ba,ae),Oe)}}var gt=O.wrapper.getBoundingClientRect(),Ht=0;function ir(Mr){var Fr=++Ht,mn=ad(p,Mr,!0,_.unit=="rectangle");if(mn)if(st(mn,nt)!=0){p.curOp.focus=Q(),Ct(mn);var dn=Yd(O,B);(mn.line>=dn.to||mn.line<dn.from)&&setTimeout(Rs(p,function(){Ht==Fr&&ir(Mr)}),150)}else{var Mn=Mr.clientY<gt.top?-20:Mr.clientY>gt.bottom?20:0;Mn&&setTimeout(Rs(p,function(){Ht==Fr&&(O.scroller.scrollTop+=Mn,ir(Mr))}),50)}}function hr(Mr){p.state.selectingText=!1,Ht=1/0,Mr&&(Jt(Mr),O.input.focus()),lt(O.wrapper.ownerDocument,"mousemove",Pr),lt(O.wrapper.ownerDocument,"mouseup",Vr),B.history.lastSelOrigin=null}var Pr=Rs(p,function(Mr){Mr.buttons===0||!tt(Mr)?hr(Mr):ir(Mr)}),Vr=Rs(p,hr);p.state.selectingText=Vr,Fe(O.wrapper.ownerDocument,"mousemove",Pr),Fe(O.wrapper.ownerDocument,"mouseup",Vr)}function bx(p,w){var E=w.anchor,_=w.head,O=je(p.doc,E.line);if(st(E,_)==0&&E.sticky==_.sticky)return w;var B=le(O);if(!B)return w;var X=ie(B,E.ch,E.sticky),ae=B[X];if(ae.from!=E.ch&&ae.to!=E.ch)return w;var pe=X+(ae.from==E.ch==(ae.level!=1)?0:1);if(pe==0||pe==B.length)return w;var be;if(_.line!=E.line)be=(_.line-E.line)*(p.doc.direction=="ltr"?1:-1)>0;else{var He=ie(B,_.ch,_.sticky),nt=He-X||(_.ch-E.ch)*(ae.level==1?-1:1);He==pe-1||He==pe?be=nt<0:be=nt>0}var Ct=B[pe+(be?-1:0)],gt=be==(Ct.level==1),Ht=gt?Ct.from:Ct.to,ir=gt?"after":"before";return E.ch==Ht&&E.sticky==ir?w:new ea(new Ve(E.line,Ht,ir),_)}function Km(p,w,E,_){var O,B;if(w.touches)O=w.touches[0].clientX,B=w.touches[0].clientY;else try{O=w.clientX,B=w.clientY}catch{return!1}if(O>=Math.floor(p.display.gutters.getBoundingClientRect().right))return!1;_&&Jt(w);var X=p.display,ae=X.lineDiv.getBoundingClientRect();if(B>ae.bottom||!Mt(p,E))return Wt(w);B-=ae.top-X.viewOffset;for(var pe=0;pe<p.display.gutterSpecs.length;++pe){var be=X.gutters.childNodes[pe];if(be&&be.getBoundingClientRect().right>=O){var He=Qe(p.doc,B),nt=p.display.gutterSpecs[pe];return ft(p,E,p,He,nt.className,w),Wt(w)}}}function Ym(p,w){return Km(p,w,"gutterClick",!0)}function wx(p,w){Fa(p.display,w)||jx(p,w)||Ze(p,w,"contextmenu")||H||p.display.input.onContextMenu(w)}function jx(p,w){return Mt(p,"gutterContextMenu")?Km(p,w,"gutterContextMenu",!1):!1}function fu(p){p.display.wrapper.className=p.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+p.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Zu(p)}var Ac={toString:function(){return"CodeMirror.Init"}},jf={},Cf={};function Cx(p){var w=p.optionHandlers;function E(_,O,B,X){p.defaults[_]=O,B&&(w[_]=X?function(ae,pe,be){be!=Ac&&B(ae,pe,be)}:B)}p.defineOption=E,p.Init=Ac,E("value","",function(_,O){return _.setValue(O)},!0),E("mode",null,function(_,O){_.doc.modeOption=O,Jd(_)},!0),E("indentUnit",2,Jd,!0),E("indentWithTabs",!1),E("smartIndent",!0),E("tabSize",4,function(_){eu(_),Zu(_),So(_)},!0),E("lineSeparator",null,function(_,O){if(_.doc.lineSep=O,!!O){var B=[],X=_.doc.first;_.doc.iter(function(pe){for(var be=0;;){var He=pe.text.indexOf(O,be);if(He==-1)break;be=He+O.length,B.push(Ve(X,He))}X++});for(var ae=B.length-1;ae>=0;ae--)Ga(_.doc,O,B[ae],Ve(B[ae].line,B[ae].ch+O.length))}}),E("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(_,O,B){_.state.specialChars=new RegExp(O.source+(O.test("	")?"":"|	"),"g"),B!=Ac&&_.refresh()}),E("specialCharPlaceholder",Hr,function(_){return _.refresh()},!0),E("electricChars",!0),E("inputStyle",k?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),E("spellcheck",!1,function(_,O){return _.getInputField().spellcheck=O},!0),E("autocorrect",!1,function(_,O){return _.getInputField().autocorrect=O},!0),E("autocapitalize",!1,function(_,O){return _.getInputField().autocapitalize=O},!0),E("rtlMoveVisually",!R),E("wholeLineUpdateBefore",!0),E("theme","default",function(_){fu(_),af(_)},!0),E("keyMap","default",function(_,O,B){var X=yf(O),ae=B!=Ac&&yf(B);ae&&ae.detach&&ae.detach(_,X),X.attach&&X.attach(_,ae||null)}),E("extraKeys",null),E("configureMouse",null),E("lineWrapping",!1,Sx,!0),E("gutters",[],function(_,O){_.display.gutterSpecs=Xd(O,_.options.lineNumbers),af(_)},!0),E("fixedGutter",!0,function(_,O){_.display.gutters.style.left=O?xp(_.display)+"px":"0",_.refresh()},!0),E("coverGutterNextToScrollbar",!1,function(_){return ko(_)},!0),E("scrollbarStyle","native",function(_){ym(_),ko(_),_.display.scrollbars.setScrollTop(_.doc.scrollTop),_.display.scrollbars.setScrollLeft(_.doc.scrollLeft)},!0),E("lineNumbers",!1,function(_,O){_.display.gutterSpecs=Xd(_.options.gutters,O),af(_)},!0),E("firstLineNumber",1,af,!0),E("lineNumberFormatter",function(_){return _},af,!0),E("showCursorWhenSelecting",!1,ho,!0),E("resetSelectionOnContextMenu",!0),E("lineWiseCopyCut",!0),E("pasteLinesPerSelection",!0),E("selectionsMayTouch",!1),E("readOnly",!1,function(_,O){O=="nocursor"&&(Ri(_),_.display.input.blur()),_.display.input.readOnlyChanged(O)}),E("screenReaderLabel",null,function(_,O){O=O===""?null:O,_.display.input.screenReaderLabelChanged(O)}),E("disableInput",!1,function(_,O){O||_.display.input.reset()},!0),E("dragDrop",!0,Sf),E("allowDropFileTypes",null),E("cursorBlinkRate",530),E("cursorScrollMargin",0),E("cursorHeight",1,ho,!0),E("singleCursorHeightPerLine",!0,ho,!0),E("workTime",100),E("workDelay",100),E("flattenSpans",!0,eu,!0),E("addModeClass",!1,eu,!0),E("pollInterval",100),E("undoDepth",200,function(_,O){return _.doc.history.undoDepth=O}),E("historyEventDelay",1250),E("viewportMargin",10,function(_){return _.refresh()},!0),E("maxHighlightLength",1e4,eu,!0),E("moveInputWithCursor",!0,function(_,O){O||_.display.input.resetPosition()}),E("tabindex",null,function(_,O){return _.display.input.getField().tabIndex=O||""}),E("autofocus",null),E("direction","ltr",function(_,O){return _.doc.setDirection(O)},!0),E("phrases",null)}function Sf(p,w,E){var _=E&&E!=Ac;if(!w!=!_){var O=p.display.dragFunctions,B=w?Fe:lt;B(p.display.scroller,"dragstart",O.start),B(p.display.scroller,"dragenter",O.enter),B(p.display.scroller,"dragover",O.over),B(p.display.scroller,"dragleave",O.leave),B(p.display.scroller,"drop",O.drop)}}function Sx(p){p.options.lineWrapping?(oe(p.display.wrapper,"CodeMirror-wrap"),p.display.sizer.style.minWidth="",p.display.sizerWidth=null):(W(p.display.wrapper,"CodeMirror-wrap"),Lt(p)),vp(p),So(p),Zu(p),setTimeout(function(){return ko(p)},100)}function za(p,w){var E=this;if(!(this instanceof za))return new za(p,w);this.options=w=w?Y(w):{},Y(jf,w,!1);var _=w.value;typeof _=="string"?_=new oo(_,w.mode,null,w.lineSeparator,w.direction):w.mode&&(_.modeOption=w.mode),this.doc=_;var O=new za.inputStyles[w.inputStyle](this),B=this.display=new mw(p,_,O,w);B.wrapper.CodeMirror=this,fu(this),w.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),ym(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new fe,keySeq:null,specialChars:null},w.autofocus&&!k&&B.input.focus(),l&&c<11&&setTimeout(function(){return E.display.input.reset(!0)},20),Nx(this),Im(),Rl(this),this.curOp.forceUpdate=!0,lf(this,_),w.autofocus&&!k||this.hasFocus()?setTimeout(function(){E.hasFocus()&&!E.state.focused&&Kd(E)},20):Ri(this);for(var X in Cf)Cf.hasOwnProperty(X)&&Cf[X](this,w[X],Ac);Qs(this),w.finishInit&&w.finishInit(this);for(var ae=0;ae<Nf.length;++ae)Nf[ae](this);bc(this),d&&w.lineWrapping&&getComputedStyle(B.lineDiv).textRendering=="optimizelegibility"&&(B.lineDiv.style.textRendering="auto")}za.defaults=jf,za.optionHandlers=Cf;function Nx(p){var w=p.display;Fe(w.scroller,"mousedown",Rs(p,Wm)),l&&c<11?Fe(w.scroller,"dblclick",Rs(p,function(pe){if(!Ze(p,pe)){var be=ad(p,pe);if(!(!be||Ym(p,pe)||Fa(p.display,pe))){Jt(pe);var He=p.findWordAt(be);tu(p.doc,He.anchor,He.head)}}})):Fe(w.scroller,"dblclick",function(pe){return Ze(p,pe)||Jt(pe)}),Fe(w.scroller,"contextmenu",function(pe){return wx(p,pe)}),Fe(w.input.getField(),"contextmenu",function(pe){w.scroller.contains(pe.target)||wx(p,pe)});var E,_={end:0};function O(){w.activeTouch&&(E=setTimeout(function(){return w.activeTouch=null},1e3),_=w.activeTouch,_.end=+new Date)}function B(pe){if(pe.touches.length!=1)return!1;var be=pe.touches[0];return be.radiusX<=1&&be.radiusY<=1}function X(pe,be){if(be.left==null)return!0;var He=be.left-pe.left,nt=be.top-pe.top;return He*He+nt*nt>400}Fe(w.scroller,"touchstart",function(pe){if(!Ze(p,pe)&&!B(pe)&&!Ym(p,pe)){w.input.ensurePolled(),clearTimeout(E);var be=+new Date;w.activeTouch={start:be,moved:!1,prev:be-_.end<=300?_:null},pe.touches.length==1&&(w.activeTouch.left=pe.touches[0].pageX,w.activeTouch.top=pe.touches[0].pageY)}}),Fe(w.scroller,"touchmove",function(){w.activeTouch&&(w.activeTouch.moved=!0)}),Fe(w.scroller,"touchend",function(pe){var be=w.activeTouch;if(be&&!Fa(w,pe)&&be.left!=null&&!be.moved&&new Date-be.start<300){var He=p.coordsChar(w.activeTouch,"page"),nt;!be.prev||X(be,be.prev)?nt=new ea(He,He):!be.prev.prev||X(be,be.prev.prev)?nt=p.findWordAt(He):nt=new ea(Ve(He.line,0),Ft(p.doc,Ve(He.line+1,0))),p.setSelection(nt.anchor,nt.head),p.focus(),Jt(pe)}O()}),Fe(w.scroller,"touchcancel",O),Fe(w.scroller,"scroll",function(){w.scroller.clientHeight&&(tl(p,w.scroller.scrollTop),Li(p,w.scroller.scrollLeft,!0),ft(p,"scroll",p))}),Fe(w.scroller,"mousewheel",function(pe){return Qd(p,pe)}),Fe(w.scroller,"DOMMouseScroll",function(pe){return Qd(p,pe)}),Fe(w.wrapper,"scroll",function(){return w.wrapper.scrollTop=w.wrapper.scrollLeft=0}),w.dragFunctions={enter:function(pe){Ze(p,pe)||ye(pe)},over:function(pe){Ze(p,pe)||(Os(p,pe),ye(pe))},start:function(pe){return Eo(p,pe)},drop:Rs(p,Mm),leave:function(pe){Ze(p,pe)||hf(p)}};var ae=w.input.getField();Fe(ae,"keyup",function(pe){return Um.call(p,pe)}),Fe(ae,"keydown",Rs(p,zm)),Fe(ae,"keypress",Rs(p,$m)),Fe(ae,"focus",function(pe){return Kd(p,pe)}),Fe(ae,"blur",function(pe){return Ri(p,pe)})}var Nf=[];za.defineInitHook=function(p){return Nf.push(p)};function vd(p,w,E,_){var O=p.doc,B;E==null&&(E="add"),E=="smart"&&(O.mode.indent?B=Jn(p,w).state:E="prev");var X=p.options.tabSize,ae=je(O,w),pe=Se(ae.text,null,X);ae.stateAfter&&(ae.stateAfter=null);var be=ae.text.match(/^\s*/)[0],He;if(!_&&!/\S/.test(ae.text))He=0,E="not";else if(E=="smart"&&(He=O.mode.indent(B,ae.text.slice(be.length),ae.text),He==qe||He>150)){if(!_)return;E="prev"}E=="prev"?w>O.first?He=Se(je(O,w-1).text,null,X):He=0:E=="add"?He=pe+p.options.indentUnit:E=="subtract"?He=pe-p.options.indentUnit:typeof E=="number"&&(He=pe+E),He=Math.max(0,He);var nt="",Ct=0;if(p.options.indentWithTabs)for(var gt=Math.floor(He/X);gt;--gt)Ct+=X,nt+="	";if(Ct<He&&(nt+=Pt(He-Ct)),nt!=be)return Ga(O,nt,Ve(w,0),Ve(w,be.length),"+input"),ae.stateAfter=null,!0;for(var Ht=0;Ht<O.sel.ranges.length;Ht++){var ir=O.sel.ranges[Ht];if(ir.head.line==w&&ir.head.ch<be.length){var hr=Ve(w,be.length);ol(O,Ht,new ea(hr,hr));break}}}var hi=null;function kf(p){hi=p}function Vl(p,w,E,_,O){var B=p.doc;p.display.shift=!1,_||(_=B.sel);var X=+new Date-200,ae=O=="paste"||p.state.pasteIncoming>X,pe=_n(w),be=null;if(ae&&_.ranges.length>1)if(hi&&hi.text.join(`
`)==w){if(_.ranges.length%hi.text.length==0){be=[];for(var He=0;He<hi.text.length;He++)be.push(B.splitLines(hi.text[He]))}}else pe.length==_.ranges.length&&p.options.pasteLinesPerSelection&&(be=Ne(pe,function(Pr){return[Pr]}));for(var nt=p.curOp.updateInput,Ct=_.ranges.length-1;Ct>=0;Ct--){var gt=_.ranges[Ct],Ht=gt.from(),ir=gt.to();gt.empty()&&(E&&E>0?Ht=Ve(Ht.line,Ht.ch-E):p.state.overwrite&&!ae?ir=Ve(ir.line,Math.min(je(B,ir.line).text.length,ir.ch+ee(pe).length)):ae&&hi&&hi.lineWise&&hi.text.join(`
`)==pe.join(`
`)&&(Ht=ir=Ve(Ht.line,0)));var hr={from:Ht,to:ir,text:be?be[Ct%be.length]:pe,origin:O||(ae?"paste":p.state.cutIncoming>X?"cut":"+input")};so(p.doc,hr),Ia(p,"inputRead",p,hr)}w&&!ae&&Xm(p,w),ld(p),p.curOp.updateInput<2&&(p.curOp.updateInput=nt),p.curOp.typing=!0,p.state.pasteIncoming=p.state.cutIncoming=-1}function Zm(p,w){var E=p.clipboardData&&p.clipboardData.getData("Text");if(E)return p.preventDefault(),!w.isReadOnly()&&!w.options.disableInput&&Es(w,function(){return Vl(w,E,0,null,"paste")}),!0}function Xm(p,w){if(!(!p.options.electricChars||!p.options.smartIndent))for(var E=p.doc.sel,_=E.ranges.length-1;_>=0;_--){var O=E.ranges[_];if(!(O.head.ch>100||_&&E.ranges[_-1].head.line==O.head.line)){var B=p.getModeAt(O.head),X=!1;if(B.electricChars){for(var ae=0;ae<B.electricChars.length;ae++)if(w.indexOf(B.electricChars.charAt(ae))>-1){X=vd(p,O.head.line,"smart");break}}else B.electricInput&&B.electricInput.test(je(p.doc,O.head.line).text.slice(0,O.head.ch))&&(X=vd(p,O.head.line,"smart"));X&&Ia(p,"electricInput",p,O.head.line)}}}function Qm(p){for(var w=[],E=[],_=0;_<p.doc.sel.ranges.length;_++){var O=p.doc.sel.ranges[_].head.line,B={anchor:Ve(O,0),head:Ve(O+1,0)};E.push(B),w.push(p.getRange(B.anchor,B.head))}return{text:w,ranges:E}}function _f(p,w,E,_){p.setAttribute("autocorrect",E?"":"off"),p.setAttribute("autocapitalize",_?"":"off"),p.setAttribute("spellcheck",!!w)}function Jm(){var p=q("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),w=q("div",[p],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return d?p.style.width="1000px":p.setAttribute("wrap","off"),j&&(p.style.border="1px solid black"),_f(p),w}function eg(p){var w=p.optionHandlers,E=p.helpers={};p.prototype={constructor:p,focus:function(){window.focus(),this.display.input.focus()},setOption:function(_,O){var B=this.options,X=B[_];B[_]==O&&_!="mode"||(B[_]=O,w.hasOwnProperty(_)&&Rs(this,w[_])(this,O,X),ft(this,"optionChange",this,_))},getOption:function(_){return this.options[_]},getDoc:function(){return this.doc},addKeyMap:function(_,O){this.state.keyMaps[O?"push":"unshift"](yf(_))},removeKeyMap:function(_){for(var O=this.state.keyMaps,B=0;B<O.length;++B)if(O[B]==_||O[B].name==_)return O.splice(B,1),!0},addOverlay:ao(function(_,O){var B=_.token?_:p.getMode(this.options,_);if(B.startState)throw new Error("Overlays may not be stateful.");Ie(this.state.overlays,{mode:B,modeSpec:_,opaque:O&&O.opaque,priority:O&&O.priority||0},function(X){return X.priority}),this.state.modeGen++,So(this)}),removeOverlay:ao(function(_){for(var O=this.state.overlays,B=0;B<O.length;++B){var X=O[B].modeSpec;if(X==_||typeof _=="string"&&X.name==_){O.splice(B,1),this.state.modeGen++,So(this);return}}}),indentLine:ao(function(_,O,B){typeof O!="string"&&typeof O!="number"&&(O==null?O=this.options.smartIndent?"smart":"prev":O=O?"add":"subtract"),$e(this.doc,_)&&vd(this,_,O,B)}),indentSelection:ao(function(_){for(var O=this.doc.sel.ranges,B=-1,X=0;X<O.length;X++){var ae=O[X];if(ae.empty())ae.head.line>B&&(vd(this,ae.head.line,_,!0),B=ae.head.line,X==this.doc.sel.primIndex&&ld(this));else{var pe=ae.from(),be=ae.to(),He=Math.max(B,pe.line);B=Math.min(this.lastLine(),be.line-(be.ch?0:1))+1;for(var nt=He;nt<B;++nt)vd(this,nt,_);var Ct=this.doc.sel.ranges;pe.ch==0&&O.length==Ct.length&&Ct[X].from().ch>0&&ol(this.doc,X,new ea(pe,Ct[X].to()),we)}}}),getTokenAt:function(_,O){return fs(this,_,O)},getLineTokens:function(_,O){return fs(this,Ve(_),O,!0)},getTokenTypeAt:function(_){_=Ft(this.doc,_);var O=ma(this,je(this.doc,_.line)),B=0,X=(O.length-1)/2,ae=_.ch,pe;if(ae==0)pe=O[2];else for(;;){var be=B+X>>1;if((be?O[be*2-1]:0)>=ae)X=be;else if(O[be*2+1]<ae)B=be+1;else{pe=O[be*2+2];break}}var He=pe?pe.indexOf("overlay "):-1;return He<0?pe:He==0?null:pe.slice(0,He-1)},getModeAt:function(_){var O=this.doc.mode;return O.innerMode?p.innerMode(O,this.getTokenAt(_).state).mode:O},getHelper:function(_,O){return this.getHelpers(_,O)[0]},getHelpers:function(_,O){var B=[];if(!E.hasOwnProperty(O))return B;var X=E[O],ae=this.getModeAt(_);if(typeof ae[O]=="string")X[ae[O]]&&B.push(X[ae[O]]);else if(ae[O])for(var pe=0;pe<ae[O].length;pe++){var be=X[ae[O][pe]];be&&B.push(be)}else ae.helperType&&X[ae.helperType]?B.push(X[ae.helperType]):X[ae.name]&&B.push(X[ae.name]);for(var He=0;He<X._global.length;He++){var nt=X._global[He];nt.pred(ae,this)&&Ee(B,nt.val)==-1&&B.push(nt.val)}return B},getStateAfter:function(_,O){var B=this.doc;return _=bt(B,_??B.first+B.size-1),Jn(this,_+1,O).state},cursorCoords:function(_,O){var B,X=this.doc.sel.primary();return _==null?B=X.head:typeof _=="object"?B=Ft(this.doc,_):B=_?X.from():X.to(),ci(this,B,O||"page")},charCoords:function(_,O){return Xu(this,Ft(this.doc,_),O||"page")},coordsChar:function(_,O){return _=fm(this,_,O||"page"),hm(this,_.left,_.top)},lineAtHeight:function(_,O){return _=fm(this,{top:_,left:0},O||"page").top,Qe(this.doc,_+this.display.viewOffset)},heightAtLine:function(_,O,B){var X=!1,ae;if(typeof _=="number"){var pe=this.doc.first+this.doc.size-1;_<this.doc.first?_=this.doc.first:_>pe&&(_=pe,X=!0),ae=je(this.doc,_)}else ae=_;return yc(this,ae,{top:0,left:0},O||"page",B||X).top+(X?this.doc.height-Bt(ae):0)},defaultTextHeight:function(){return xc(this.display)},defaultCharWidth:function(){return nd(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(_,O,B,X,ae){var pe=this.display;_=ci(this,Ft(this.doc,_));var be=_.bottom,He=_.left;if(O.style.position="absolute",O.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(O),pe.sizer.appendChild(O),X=="over")be=_.top;else if(X=="above"||X=="near"){var nt=Math.max(pe.wrapper.clientHeight,this.doc.height),Ct=Math.max(pe.sizer.clientWidth,pe.lineSpace.clientWidth);(X=="above"||_.bottom+O.offsetHeight>nt)&&_.top>O.offsetHeight?be=_.top-O.offsetHeight:_.bottom+O.offsetHeight<=nt&&(be=_.bottom),He+O.offsetWidth>Ct&&(He=Ct-O.offsetWidth)}O.style.top=be+"px",O.style.left=O.style.right="",ae=="right"?(He=pe.sizer.clientWidth-O.offsetWidth,O.style.right="0px"):(ae=="left"?He=0:ae=="middle"&&(He=(pe.sizer.clientWidth-O.offsetWidth)/2),O.style.left=He+"px"),B&&Sp(this,{left:He,top:be,right:He+O.offsetWidth,bottom:be+O.offsetHeight})},triggerOnKeyDown:ao(zm),triggerOnKeyPress:ao($m),triggerOnKeyUp:Um,triggerOnMouseDown:ao(Wm),execCommand:function(_){if(lu.hasOwnProperty(_))return lu[_].call(null,this)},triggerElectric:ao(function(_){Xm(this,_)}),findPosH:function(_,O,B,X){var ae=1;O<0&&(ae=-1,O=-O);for(var pe=Ft(this.doc,_),be=0;be<O&&(pe=Bp(this.doc,pe,ae,B,X),!pe.hitSide);++be);return pe},moveH:ao(function(_,O){var B=this;this.extendSelectionsBy(function(X){return B.display.shift||B.doc.extend||X.empty()?Bp(B.doc,X.head,_,O,B.options.rtlMoveVisually):_<0?X.from():X.to()},ze)}),deleteH:ao(function(_,O){var B=this.doc.sel,X=this.doc;B.somethingSelected()?X.replaceSelection("",null,"+delete"):xd(this,function(ae){var pe=Bp(X,ae.head,_,O,!1);return _<0?{from:pe,to:ae.head}:{from:ae.head,to:pe}})}),findPosV:function(_,O,B,X){var ae=1,pe=X;O<0&&(ae=-1,O=-O);for(var be=Ft(this.doc,_),He=0;He<O;++He){var nt=ci(this,be,"div");if(pe==null?pe=nt.left:nt.left=pe,be=tg(this,nt,ae,B),be.hitSide)break}return be},moveV:ao(function(_,O){var B=this,X=this.doc,ae=[],pe=!this.display.shift&&!X.extend&&X.sel.somethingSelected();if(X.extendSelectionsBy(function(He){if(pe)return _<0?He.from():He.to();var nt=ci(B,He.head,"div");He.goalColumn!=null&&(nt.left=He.goalColumn),ae.push(nt.left);var Ct=tg(B,nt,_,O);return O=="page"&&He==X.sel.primary()&&tf(B,Xu(B,Ct,"div").top-nt.top),Ct},ze),ae.length)for(var be=0;be<X.sel.ranges.length;be++)X.sel.ranges[be].goalColumn=ae[be]}),findWordAt:function(_){var O=this.doc,B=je(O,_.line).text,X=_.ch,ae=_.ch;if(B){var pe=this.getHelper(_,"wordChars");(_.sticky=="before"||ae==B.length)&&X?--X:++ae;for(var be=B.charAt(X),He=ce(be,pe)?function(nt){return ce(nt,pe)}:/\s/.test(be)?function(nt){return/\s/.test(nt)}:function(nt){return!/\s/.test(nt)&&!ce(nt)};X>0&&He(B.charAt(X-1));)--X;for(;ae<B.length&&He(B.charAt(ae));)++ae}return new ea(Ve(_.line,X),Ve(_.line,ae))},toggleOverwrite:function(_){_!=null&&_==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?oe(this.display.cursorDiv,"CodeMirror-overwrite"):W(this.display.cursorDiv,"CodeMirror-overwrite"),ft(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Q()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:ao(function(_,O){cd(this,_,O)}),getScrollInfo:function(){var _=this.display.scroller;return{left:_.scrollLeft,top:_.scrollTop,height:_.scrollHeight-Ys(this)-this.display.barHeight,width:_.scrollWidth-Ys(this)-this.display.barWidth,clientHeight:ge(this),clientWidth:el(this)}},scrollIntoView:ao(function(_,O){_==null?(_={from:this.doc.sel.primary().head,to:null},O==null&&(O=this.options.cursorScrollMargin)):typeof _=="number"?_={from:Ve(_,0),to:null}:_.from==null&&(_={from:_,to:null}),_.to||(_.to=_.from),_.margin=O||0,_.from.line!=null?rx(this,_):dd(this,_.from,_.to,_.margin)}),setSize:ao(function(_,O){var B=this,X=function(pe){return typeof pe=="number"||/^\d+$/.test(String(pe))?pe+"px":pe};_!=null&&(this.display.wrapper.style.width=X(_)),O!=null&&(this.display.wrapper.style.height=X(O)),this.options.lineWrapping&&Xy(this);var ae=this.display.viewFrom;this.doc.iter(ae,this.display.viewTo,function(pe){if(pe.widgets){for(var be=0;be<pe.widgets.length;be++)if(pe.widgets[be].noHScroll){Pl(B,ae,"widget");break}}++ae}),this.curOp.forceUpdate=!0,ft(this,"refresh",this)}),operation:function(_){return Es(this,_)},startOperation:function(){return Rl(this)},endOperation:function(){return bc(this)},refresh:ao(function(){var _=this.display.cachedTextHeight;So(this),this.curOp.forceUpdate=!0,Zu(this),cd(this,this.doc.scrollLeft,this.doc.scrollTop),Cc(this.display),(_==null||Math.abs(_-xc(this.display))>.5||this.options.lineWrapping)&&vp(this),ft(this,"refresh",this)}),swapDoc:ao(function(_){var O=this.doc;return O.cm=null,this.state.selectingText&&this.state.selectingText(),lf(this,_),Zu(this),this.display.input.reset(),cd(this,_.scrollLeft,_.scrollTop),this.curOp.forceScroll=!0,Ia(this,"swapDoc",this,O),O}),phrase:function(_){var O=this.options.phrases;return O&&Object.prototype.hasOwnProperty.call(O,_)?O[_]:_},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},vt(p),p.registerHelper=function(_,O,B){E.hasOwnProperty(_)||(E[_]=p[_]={_global:[]}),E[_][O]=B},p.registerGlobalHelper=function(_,O,B,X){p.registerHelper(_,O,X),E[_]._global.push({pred:B,val:X})}}function Bp(p,w,E,_,O){var B=w,X=E,ae=je(p,w.line),pe=O&&p.direction=="rtl"?-E:E;function be(){var Vr=w.line+pe;return Vr<p.first||Vr>=p.first+p.size?!1:(w=new Ve(Vr,w.ch,w.sticky),ae=je(p,Vr))}function He(Vr){var Mr;if(_=="codepoint"){var Fr=ae.text.charCodeAt(w.ch+(E>0?0:-1));if(isNaN(Fr))Mr=null;else{var mn=E>0?Fr>=55296&&Fr<56320:Fr>=56320&&Fr<57343;Mr=new Ve(w.line,Math.max(0,Math.min(ae.text.length,w.ch+E*(mn?2:1))),-E)}}else O?Mr=fx(p.cm,ae,w,E):Mr=xf(ae,w,E);if(Mr==null)if(!Vr&&be())w=Fp(O,p.cm,ae,w.line,pe);else return!1;else w=Mr;return!0}if(_=="char"||_=="codepoint")He();else if(_=="column")He(!0);else if(_=="word"||_=="group")for(var nt=null,Ct=_=="group",gt=p.cm&&p.cm.getHelper(w,"wordChars"),Ht=!0;!(E<0&&!He(!Ht));Ht=!1){var ir=ae.text.charAt(w.ch)||`
`,hr=ce(ir,gt)?"w":Ct&&ir==`
`?"n":!Ct||/\s/.test(ir)?null:"p";if(Ct&&!Ht&&!hr&&(hr="s"),nt&&nt!=hr){E<0&&(E=1,He(),w.sticky="after");break}if(hr&&(nt=hr),E>0&&!He(!Ht))break}var Pr=ff(p,w,B,X,!0);return Ot(B,Pr)&&(Pr.hitSide=!0),Pr}function tg(p,w,E,_){var O=p.doc,B=w.left,X;if(_=="page"){var ae=Math.min(p.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),pe=Math.max(ae-.5*xc(p.display),3);X=(E>0?w.bottom:w.top)+E*pe}else _=="line"&&(X=E>0?w.bottom+3:w.top-3);for(var be;be=hm(p,B,X),!!be.outside;){if(E<0?X<=0:X>=O.height){be.hitSide=!0;break}X+=E*5}return be}var Ca=function(p){this.cm=p,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new fe,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Ca.prototype.init=function(p){var w=this,E=this,_=E.cm,O=E.div=p.lineDiv;O.contentEditable=!0,_f(O,_.options.spellcheck,_.options.autocorrect,_.options.autocapitalize);function B(ae){for(var pe=ae.target;pe;pe=pe.parentNode){if(pe==O)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(pe.className))break}return!1}Fe(O,"paste",function(ae){!B(ae)||Ze(_,ae)||Zm(ae,_)||c<=11&&setTimeout(Rs(_,function(){return w.updateFromDOM()}),20)}),Fe(O,"compositionstart",function(ae){w.composing={data:ae.data,done:!1}}),Fe(O,"compositionupdate",function(ae){w.composing||(w.composing={data:ae.data,done:!1})}),Fe(O,"compositionend",function(ae){w.composing&&(ae.data!=w.composing.data&&w.readFromDOMSoon(),w.composing.done=!0)}),Fe(O,"touchstart",function(){return E.forceCompositionEnd()}),Fe(O,"input",function(){w.composing||w.readFromDOMSoon()});function X(ae){if(!(!B(ae)||Ze(_,ae))){if(_.somethingSelected())kf({lineWise:!1,text:_.getSelections()}),ae.type=="cut"&&_.replaceSelection("",null,"cut");else if(_.options.lineWiseCopyCut){var pe=Qm(_);kf({lineWise:!0,text:pe.text}),ae.type=="cut"&&_.operation(function(){_.setSelections(pe.ranges,0,we),_.replaceSelection("",null,"cut")})}else return;if(ae.clipboardData){ae.clipboardData.clearData();var be=hi.text.join(`
`);if(ae.clipboardData.setData("Text",be),ae.clipboardData.getData("Text")==be){ae.preventDefault();return}}var He=Jm(),nt=He.firstChild;_.display.lineSpace.insertBefore(He,_.display.lineSpace.firstChild),nt.value=hi.text.join(`
`);var Ct=Q();Te(nt),setTimeout(function(){_.display.lineSpace.removeChild(He),Ct.focus(),Ct==O&&E.showPrimarySelection()},50)}}Fe(O,"copy",X),Fe(O,"cut",X)},Ca.prototype.screenReaderLabelChanged=function(p){p?this.div.setAttribute("aria-label",p):this.div.removeAttribute("aria-label")},Ca.prototype.prepareSelection=function(){var p=od(this.cm,!1);return p.focus=Q()==this.div,p},Ca.prototype.showSelection=function(p,w){!p||!this.cm.display.view.length||((p.focus||w)&&this.showPrimarySelection(),this.showMultipleSelections(p))},Ca.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Ca.prototype.showPrimarySelection=function(){var p=this.getSelection(),w=this.cm,E=w.doc.sel.primary(),_=E.from(),O=E.to();if(w.display.viewTo==w.display.viewFrom||_.line>=w.display.viewTo||O.line<w.display.viewFrom){p.removeAllRanges();return}var B=Ef(w,p.anchorNode,p.anchorOffset),X=Ef(w,p.focusNode,p.focusOffset);if(!(B&&!B.bad&&X&&!X.bad&&st(ct(B,X),_)==0&&st(ke(B,X),O)==0)){var ae=w.display.view,pe=_.line>=w.display.viewFrom&&zp(w,_)||{node:ae[0].measure.map[2],offset:0},be=O.line<w.display.viewTo&&zp(w,O);if(!be){var He=ae[ae.length-1].measure,nt=He.maps?He.maps[He.maps.length-1]:He.map;be={node:nt[nt.length-1],offset:nt[nt.length-2]-nt[nt.length-3]}}if(!pe||!be){p.removeAllRanges();return}var Ct=p.rangeCount&&p.getRangeAt(0),gt;try{gt=K(pe.node,pe.offset,be.offset,be.node)}catch{}gt&&(!t&&w.state.focused?(p.collapse(pe.node,pe.offset),gt.collapsed||(p.removeAllRanges(),p.addRange(gt))):(p.removeAllRanges(),p.addRange(gt)),Ct&&p.anchorNode==null?p.addRange(Ct):t&&this.startGracePeriod()),this.rememberSelection()}},Ca.prototype.startGracePeriod=function(){var p=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){p.gracePeriod=!1,p.selectionChanged()&&p.cm.operation(function(){return p.cm.curOp.selectionChanged=!0})},20)},Ca.prototype.showMultipleSelections=function(p){A(this.cm.display.cursorDiv,p.cursors),A(this.cm.display.selectionDiv,p.selection)},Ca.prototype.rememberSelection=function(){var p=this.getSelection();this.lastAnchorNode=p.anchorNode,this.lastAnchorOffset=p.anchorOffset,this.lastFocusNode=p.focusNode,this.lastFocusOffset=p.focusOffset},Ca.prototype.selectionInEditor=function(){var p=this.getSelection();if(!p.rangeCount)return!1;var w=p.getRangeAt(0).commonAncestorContainer;return D(this.div,w)},Ca.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||Q()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Ca.prototype.blur=function(){this.div.blur()},Ca.prototype.getField=function(){return this.div},Ca.prototype.supportsTouch=function(){return!0},Ca.prototype.receivedFocus=function(){var p=this,w=this;this.selectionInEditor()?setTimeout(function(){return p.pollSelection()},20):Es(this.cm,function(){return w.cm.curOp.selectionChanged=!0});function E(){w.cm.state.focused&&(w.pollSelection(),w.polling.set(w.cm.options.pollInterval,E))}this.polling.set(this.cm.options.pollInterval,E)},Ca.prototype.selectionChanged=function(){var p=this.getSelection();return p.anchorNode!=this.lastAnchorNode||p.anchorOffset!=this.lastAnchorOffset||p.focusNode!=this.lastFocusNode||p.focusOffset!=this.lastFocusOffset},Ca.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var p=this.getSelection(),w=this.cm;if(S&&m&&this.cm.display.gutterSpecs.length&&Ls(p.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var E=Ef(w,p.anchorNode,p.anchorOffset),_=Ef(w,p.focusNode,p.focusOffset);E&&_&&Es(w,function(){Ts(w.doc,Nc(E,_),we),(E.bad||_.bad)&&(w.curOp.selectionChanged=!0)})}}},Ca.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var p=this.cm,w=p.display,E=p.doc.sel.primary(),_=E.from(),O=E.to();if(_.ch==0&&_.line>p.firstLine()&&(_=Ve(_.line-1,je(p.doc,_.line-1).length)),O.ch==je(p.doc,O.line).text.length&&O.line<p.lastLine()&&(O=Ve(O.line+1,0)),_.line<w.viewFrom||O.line>w.viewTo-1)return!1;var B,X,ae;_.line==w.viewFrom||(B=sd(p,_.line))==0?(X=jt(w.view[0].line),ae=w.view[0].node):(X=jt(w.view[B].line),ae=w.view[B-1].node.nextSibling);var pe=sd(p,O.line),be,He;if(pe==w.view.length-1?(be=w.viewTo-1,He=w.lineDiv.lastChild):(be=jt(w.view[pe+1].line)-1,He=w.view[pe+1].node.previousSibling),!ae)return!1;for(var nt=p.doc.splitLines(kx(p,ae,He,X,be)),Ct=Re(p.doc,Ve(X,0),Ve(be,je(p.doc,be).text.length));nt.length>1&&Ct.length>1;)if(ee(nt)==ee(Ct))nt.pop(),Ct.pop(),be--;else if(nt[0]==Ct[0])nt.shift(),Ct.shift(),X++;else break;for(var gt=0,Ht=0,ir=nt[0],hr=Ct[0],Pr=Math.min(ir.length,hr.length);gt<Pr&&ir.charCodeAt(gt)==hr.charCodeAt(gt);)++gt;for(var Vr=ee(nt),Mr=ee(Ct),Fr=Math.min(Vr.length-(nt.length==1?gt:0),Mr.length-(Ct.length==1?gt:0));Ht<Fr&&Vr.charCodeAt(Vr.length-Ht-1)==Mr.charCodeAt(Mr.length-Ht-1);)++Ht;if(nt.length==1&&Ct.length==1&&X==_.line)for(;gt&&gt>_.ch&&Vr.charCodeAt(Vr.length-Ht-1)==Mr.charCodeAt(Mr.length-Ht-1);)gt--,Ht++;nt[nt.length-1]=Vr.slice(0,Vr.length-Ht).replace(/^\u200b+/,""),nt[0]=nt[0].slice(gt).replace(/\u200b+$/,"");var mn=Ve(X,gt),dn=Ve(be,Ct.length?ee(Ct).length-Ht:0);if(nt.length>1||nt[0]||st(mn,dn))return Ga(p.doc,nt,mn,dn,"+input"),!0},Ca.prototype.ensurePolled=function(){this.forceCompositionEnd()},Ca.prototype.reset=function(){this.forceCompositionEnd()},Ca.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Ca.prototype.readFromDOMSoon=function(){var p=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(p.readDOMTimeout=null,p.composing)if(p.composing.done)p.composing=null;else return;p.updateFromDOM()},80))},Ca.prototype.updateFromDOM=function(){var p=this;(this.cm.isReadOnly()||!this.pollContent())&&Es(this.cm,function(){return So(p.cm)})},Ca.prototype.setUneditable=function(p){p.contentEditable="false"},Ca.prototype.onKeyPress=function(p){p.charCode==0||this.composing||(p.preventDefault(),this.cm.isReadOnly()||Rs(this.cm,Vl)(this.cm,String.fromCharCode(p.charCode==null?p.keyCode:p.charCode),0))},Ca.prototype.readOnlyChanged=function(p){this.div.contentEditable=String(p!="nocursor")},Ca.prototype.onContextMenu=function(){},Ca.prototype.resetPosition=function(){},Ca.prototype.needsContentAttribute=!0;function zp(p,w){var E=xt(p,w.line);if(!E||E.hidden)return null;var _=je(p.doc,w.line),O=Je(E,_,w.line),B=le(_,p.doc.direction),X="left";if(B){var ae=ie(B,w.ch);X=ae%2?"right":"left"}var pe=Nn(O.map,w.ch,X);return pe.offset=pe.collapse=="right"?pe.end:pe.start,pe}function Ls(p){for(var w=p;w;w=w.parentNode)if(/CodeMirror-gutter-wrapper/.test(w.className))return!0;return!1}function vs(p,w){return w&&(p.bad=!0),p}function kx(p,w,E,_,O){var B="",X=!1,ae=p.doc.lineSeparator(),pe=!1;function be(gt){return function(Ht){return Ht.id==gt}}function He(){X&&(B+=ae,pe&&(B+=ae),X=pe=!1)}function nt(gt){gt&&(He(),B+=gt)}function Ct(gt){if(gt.nodeType==1){var Ht=gt.getAttribute("cm-text");if(Ht){nt(Ht);return}var ir=gt.getAttribute("cm-marker"),hr;if(ir){var Pr=p.findMarks(Ve(_,0),Ve(O+1,0),be(+ir));Pr.length&&(hr=Pr[0].find(0))&&nt(Re(p.doc,hr.from,hr.to).join(ae));return}if(gt.getAttribute("contenteditable")=="false")return;var Vr=/^(pre|div|p|li|table|br)$/i.test(gt.nodeName);if(!/^br$/i.test(gt.nodeName)&&gt.textContent.length==0)return;Vr&&He();for(var Mr=0;Mr<gt.childNodes.length;Mr++)Ct(gt.childNodes[Mr]);/^(pre|p)$/i.test(gt.nodeName)&&(pe=!0),Vr&&(X=!0)}else gt.nodeType==3&&nt(gt.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Ct(w),w!=E;)w=w.nextSibling,pe=!1;return B}function Ef(p,w,E){var _;if(w==p.display.lineDiv){if(_=p.display.lineDiv.childNodes[E],!_)return vs(p.clipPos(Ve(p.display.viewTo-1)),!0);w=null,E=0}else for(_=w;;_=_.parentNode){if(!_||_==p.display.lineDiv)return null;if(_.parentNode&&_.parentNode==p.display.lineDiv)break}for(var O=0;O<p.display.view.length;O++){var B=p.display.view[O];if(B.node==_)return _x(B,w,E)}}function _x(p,w,E){var _=p.text.firstChild,O=!1;if(!w||!D(_,w))return vs(Ve(jt(p.line),0),!0);if(w==_&&(O=!0,w=_.childNodes[E],E=0,!w)){var B=p.rest?ee(p.rest):p.line;return vs(Ve(jt(B),B.text.length),O)}var X=w.nodeType==3?w:null,ae=w;for(!X&&w.childNodes.length==1&&w.firstChild.nodeType==3&&(X=w.firstChild,E&&(E=X.nodeValue.length));ae.parentNode!=_;)ae=ae.parentNode;var pe=p.measure,be=pe.maps;function He(hr,Pr,Vr){for(var Mr=-1;Mr<(be?be.length:0);Mr++)for(var Fr=Mr<0?pe.map:be[Mr],mn=0;mn<Fr.length;mn+=3){var dn=Fr[mn+2];if(dn==hr||dn==Pr){var Mn=jt(Mr<0?p.line:p.rest[Mr]),va=Fr[mn]+Vr;return(Vr<0||dn!=hr)&&(va=Fr[mn+(Vr?1:0)]),Ve(Mn,va)}}}var nt=He(X,ae,E);if(nt)return vs(nt,O);for(var Ct=ae.nextSibling,gt=X?X.nodeValue.length-E:0;Ct;Ct=Ct.nextSibling){if(nt=He(Ct,Ct.firstChild,0),nt)return vs(Ve(nt.line,nt.ch-gt),O);gt+=Ct.textContent.length}for(var Ht=ae.previousSibling,ir=E;Ht;Ht=Ht.previousSibling){if(nt=He(Ht,Ht.firstChild,-1),nt)return vs(Ve(nt.line,nt.ch+ir),O);ir+=Ht.textContent.length}}var ms=function(p){this.cm=p,this.prevInput="",this.pollingFast=!1,this.polling=new fe,this.hasSelection=!1,this.composing=null};ms.prototype.init=function(p){var w=this,E=this,_=this.cm;this.createField(p);var O=this.textarea;p.wrapper.insertBefore(this.wrapper,p.wrapper.firstChild),j&&(O.style.width="0px"),Fe(O,"input",function(){l&&c>=9&&w.hasSelection&&(w.hasSelection=null),E.poll()}),Fe(O,"paste",function(X){Ze(_,X)||Zm(X,_)||(_.state.pasteIncoming=+new Date,E.fastPoll())});function B(X){if(!Ze(_,X)){if(_.somethingSelected())kf({lineWise:!1,text:_.getSelections()});else if(_.options.lineWiseCopyCut){var ae=Qm(_);kf({lineWise:!0,text:ae.text}),X.type=="cut"?_.setSelections(ae.ranges,null,we):(E.prevInput="",O.value=ae.text.join(`
`),Te(O))}else return;X.type=="cut"&&(_.state.cutIncoming=+new Date)}}Fe(O,"cut",B),Fe(O,"copy",B),Fe(p.scroller,"paste",function(X){if(!(Fa(p,X)||Ze(_,X))){if(!O.dispatchEvent){_.state.pasteIncoming=+new Date,E.focus();return}var ae=new Event("paste");ae.clipboardData=X.clipboardData,O.dispatchEvent(ae)}}),Fe(p.lineSpace,"selectstart",function(X){Fa(p,X)||Jt(X)}),Fe(O,"compositionstart",function(){var X=_.getCursor("from");E.composing&&E.composing.range.clear(),E.composing={start:X,range:_.markText(X,_.getCursor("to"),{className:"CodeMirror-composing"})}}),Fe(O,"compositionend",function(){E.composing&&(E.poll(),E.composing.range.clear(),E.composing=null)})},ms.prototype.createField=function(p){this.wrapper=Jm(),this.textarea=this.wrapper.firstChild},ms.prototype.screenReaderLabelChanged=function(p){p?this.textarea.setAttribute("aria-label",p):this.textarea.removeAttribute("aria-label")},ms.prototype.prepareSelection=function(){var p=this.cm,w=p.display,E=p.doc,_=od(p);if(p.options.moveInputWithCursor){var O=ci(p,E.sel.primary().head,"div"),B=w.wrapper.getBoundingClientRect(),X=w.lineDiv.getBoundingClientRect();_.teTop=Math.max(0,Math.min(w.wrapper.clientHeight-10,O.top+X.top-B.top)),_.teLeft=Math.max(0,Math.min(w.wrapper.clientWidth-10,O.left+X.left-B.left))}return _},ms.prototype.showSelection=function(p){var w=this.cm,E=w.display;A(E.cursorDiv,p.cursors),A(E.selectionDiv,p.selection),p.teTop!=null&&(this.wrapper.style.top=p.teTop+"px",this.wrapper.style.left=p.teLeft+"px")},ms.prototype.reset=function(p){if(!(this.contextMenuPending||this.composing)){var w=this.cm;if(w.somethingSelected()){this.prevInput="";var E=w.getSelection();this.textarea.value=E,w.state.focused&&Te(this.textarea),l&&c>=9&&(this.hasSelection=E)}else p||(this.prevInput=this.textarea.value="",l&&c>=9&&(this.hasSelection=null))}},ms.prototype.getField=function(){return this.textarea},ms.prototype.supportsTouch=function(){return!1},ms.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!k||Q()!=this.textarea))try{this.textarea.focus()}catch{}},ms.prototype.blur=function(){this.textarea.blur()},ms.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},ms.prototype.receivedFocus=function(){this.slowPoll()},ms.prototype.slowPoll=function(){var p=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){p.poll(),p.cm.state.focused&&p.slowPoll()})},ms.prototype.fastPoll=function(){var p=!1,w=this;w.pollingFast=!0;function E(){var _=w.poll();!_&&!p?(p=!0,w.polling.set(60,E)):(w.pollingFast=!1,w.slowPoll())}w.polling.set(20,E)},ms.prototype.poll=function(){var p=this,w=this.cm,E=this.textarea,_=this.prevInput;if(this.contextMenuPending||!w.state.focused||Ur(E)&&!_&&!this.composing||w.isReadOnly()||w.options.disableInput||w.state.keySeq)return!1;var O=E.value;if(O==_&&!w.somethingSelected())return!1;if(l&&c>=9&&this.hasSelection===O||N&&/[\uf700-\uf7ff]/.test(O))return w.display.input.reset(),!1;if(w.doc.sel==w.display.selForContextMenu){var B=O.charCodeAt(0);if(B==8203&&!_&&(_=""),B==8666)return this.reset(),this.cm.execCommand("undo")}for(var X=0,ae=Math.min(_.length,O.length);X<ae&&_.charCodeAt(X)==O.charCodeAt(X);)++X;return Es(w,function(){Vl(w,O.slice(X),_.length-X,null,p.composing?"*compose":null),O.length>1e3||O.indexOf(`
`)>-1?E.value=p.prevInput="":p.prevInput=O,p.composing&&(p.composing.range.clear(),p.composing.range=w.markText(p.composing.start,w.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ms.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},ms.prototype.onKeyPress=function(){l&&c>=9&&(this.hasSelection=null),this.fastPoll()},ms.prototype.onContextMenu=function(p){var w=this,E=w.cm,_=E.display,O=w.textarea;w.contextMenuPending&&w.contextMenuPending();var B=ad(E,p),X=_.scroller.scrollTop;if(!B||y)return;var ae=E.options.resetSelectionOnContextMenu;ae&&E.doc.sel.contains(B)==-1&&Rs(E,Ts)(E.doc,Nc(B),we);var pe=O.style.cssText,be=w.wrapper.style.cssText,He=w.wrapper.offsetParent.getBoundingClientRect();w.wrapper.style.cssText="position: static",O.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(p.clientY-He.top-5)+"px; left: "+(p.clientX-He.left-5)+`px;
      z-index: 1000; background: `+(l?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var nt;d&&(nt=window.scrollY),_.input.focus(),d&&window.scrollTo(null,nt),_.input.reset(),E.somethingSelected()||(O.value=w.prevInput=" "),w.contextMenuPending=gt,_.selForContextMenu=E.doc.sel,clearTimeout(_.detectingSelectAll);function Ct(){if(O.selectionStart!=null){var ir=E.somethingSelected(),hr=""+(ir?O.value:"");O.value="",O.value=hr,w.prevInput=ir?"":"",O.selectionStart=1,O.selectionEnd=hr.length,_.selForContextMenu=E.doc.sel}}function gt(){if(w.contextMenuPending==gt&&(w.contextMenuPending=!1,w.wrapper.style.cssText=be,O.style.cssText=pe,l&&c<9&&_.scrollbars.setScrollTop(_.scroller.scrollTop=X),O.selectionStart!=null)){(!l||l&&c<9)&&Ct();var ir=0,hr=function(){_.selForContextMenu==E.doc.sel&&O.selectionStart==0&&O.selectionEnd>0&&w.prevInput==""?Rs(E,Pp)(E):ir++<10?_.detectingSelectAll=setTimeout(hr,500):(_.selForContextMenu=null,_.input.reset())};_.detectingSelectAll=setTimeout(hr,200)}}if(l&&c>=9&&Ct(),H){ye(p);var Ht=function(){lt(window,"mouseup",Ht),setTimeout(gt,20)};Fe(window,"mouseup",Ht)}else setTimeout(gt,50)},ms.prototype.readOnlyChanged=function(p){p||this.reset(),this.textarea.disabled=p=="nocursor",this.textarea.readOnly=!!p},ms.prototype.setUneditable=function(){},ms.prototype.needsContentAttribute=!1;function Tf(p,w){if(w=w?Y(w):{},w.value=p.value,!w.tabindex&&p.tabIndex&&(w.tabindex=p.tabIndex),!w.placeholder&&p.placeholder&&(w.placeholder=p.placeholder),w.autofocus==null){var E=Q();w.autofocus=E==p||p.getAttribute("autofocus")!=null&&E==document.body}function _(){p.value=ae.getValue()}var O;if(p.form&&(Fe(p.form,"submit",_),!w.leaveSubmitMethodAlone)){var B=p.form;O=B.submit;try{var X=B.submit=function(){_(),B.submit=O,B.submit(),B.submit=X}}catch{}}w.finishInit=function(pe){pe.save=_,pe.getTextArea=function(){return p},pe.toTextArea=function(){pe.toTextArea=isNaN,_(),p.parentNode.removeChild(pe.getWrapperElement()),p.style.display="",p.form&&(lt(p.form,"submit",_),!w.leaveSubmitMethodAlone&&typeof p.form.submit=="function"&&(p.form.submit=O))}},p.style.display="none";var ae=za(function(pe){return p.parentNode.insertBefore(pe,p.nextSibling)},w);return ae}function Ex(p){p.off=lt,p.on=Fe,p.wheelEventPixels=sf,p.Doc=oo,p.splitLines=_n,p.countColumn=Se,p.findColumn=We,p.isWordChar=J,p.Pass=qe,p.signal=ft,p.Line=dr,p.changeEnd=Dl,p.scrollbarModel=rl,p.Pos=Ve,p.cmpPos=st,p.modes=In,p.mimeModes=on,p.resolveMode=ht,p.getMode=vr,p.modeExtensions=Rn,p.extendMode=bn,p.copyState=En,p.startState=Bn,p.innerMode=Wr,p.commands=lu,p.keyMap=dl,p.keyName=ux,p.isModifierKey=Lp,p.lookupKey=yd,p.normalizeKeyMap=dx,p.StringStream=te,p.SharedTextMarker=Ka,p.TextMarker=Qo,p.LineWidget=ll,p.e_preventDefault=Jt,p.e_stopPropagation=wr,p.e_stop=ye,p.addClass=oe,p.contains=D,p.rmClass=W,p.keyNames=cl}Cx(za),eg(za);var Up="iter insert remove copy getEditor constructor".split(" ");for(var Of in oo.prototype)oo.prototype.hasOwnProperty(Of)&&Ee(Up,Of)<0&&(za.prototype[Of]=(function(p){return function(){return p.apply(this.doc,arguments)}})(oo.prototype[Of]));return vt(oo),za.inputStyles={textarea:ms,contenteditable:Ca},za.defineMode=function(p){!za.defaults.mode&&p!="null"&&(za.defaults.mode=p),Er.apply(this,arguments)},za.defineMIME=jr,za.defineMode("null",function(){return{token:function(p){return p.skipToEnd()}}}),za.defineMIME("text/plain","null"),za.defineExtension=function(p,w){za.prototype[p]=w},za.defineDocExtension=function(p,w){oo.prototype[p]=w},za.fromTextArea=Tf,Ex(za),za.version="5.63.0",za}))}),7389:((a,r,e)=>{(function(t){t(e(4408))})(function(t){t.defineMode("css",function(Z,A){var q=A.inline;A.propertyKeywords||(A=t.resolveMode("text/css"));var I=Z.indentUnit,K=A.tokenHooks,D=A.documentTypes||{},Q=A.mediaTypes||{},oe=A.mediaFeatures||{},re=A.mediaValueKeywords||{},Te=A.propertyKeywords||{},G=A.nonStandardPropertyKeywords||{},Y=A.fontProperties||{},Se=A.counterDescriptors||{},fe=A.colorKeywords||{},Ee=A.valueKeywords||{},Ae=A.allowNested,qe=A.lineComment,we=A.supportsAtComponent===!0,Oe=Z.highlightNonStandardPropertyKeywords!==!1,ze,We;function pt(xe,he){return ze=he,xe}function Pt(xe,he){var se=xe.next();if(K[se]){var Le=K[se](xe,he);if(Le!==!1)return Le}if(se=="@")return xe.eatWhile(/[\w\\\-]/),pt("def",xe.current());if(se=="="||(se=="~"||se=="|")&&xe.eat("="))return pt(null,"compare");if(se=='"'||se=="'")return he.tokenize=ee(se),he.tokenize(xe,he);if(se=="#")return xe.eatWhile(/[\w\\\-]/),pt("atom","hash");if(se=="!")return xe.match(/^\s*\w*/),pt("keyword","important");if(/\d/.test(se)||se=="."&&xe.eat(/\d/))return xe.eatWhile(/[\w.%]/),pt("number","unit");if(se==="-"){if(/[\d.]/.test(xe.peek()))return xe.eatWhile(/[\w.%]/),pt("number","unit");if(xe.match(/^-[\w\\\-]*/))return xe.eatWhile(/[\w\\\-]/),xe.match(/^\s*:/,!1)?pt("variable-2","variable-definition"):pt("variable-2","variable");if(xe.match(/^\w+-/))return pt("meta","meta")}else return/[,+>*\/]/.test(se)?pt(null,"select-op"):se=="."&&xe.match(/^-?[_a-z][_a-z0-9-]*/i)?pt("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(se)?pt(null,se):xe.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test(xe.current())&&(he.tokenize=Ne),pt("variable callee","variable")):/[\w\\\-]/.test(se)?(xe.eatWhile(/[\w\\\-]/),pt("property","word")):pt(null,null)}function ee(xe){return function(he,se){for(var Le=!1,Ue;(Ue=he.next())!=null;){if(Ue==xe&&!Le){xe==")"&&he.backUp(1);break}Le=!Le&&Ue=="\\"}return(Ue==xe||!Le&&xe!=")")&&(se.tokenize=null),pt("string","string")}}function Ne(xe,he){return xe.next(),xe.match(/^\s*[\"\')]/,!1)?he.tokenize=null:he.tokenize=ee(")"),pt(null,"(")}function Ie(xe,he,se){this.type=xe,this.indent=he,this.prev=se}function ne(xe,he,se,Le){return xe.context=new Ie(se,he.indentation()+(Le===!1?0:I),xe.context),se}function M(xe){return xe.context.prev&&(xe.context=xe.context.prev),xe.context.type}function U(xe,he,se){return ue[se.context.type](xe,he,se)}function J(xe,he,se,Le){for(var Ue=Le||1;Ue>0;Ue--)se.context=se.context.prev;return U(xe,he,se)}function ce(xe){var he=xe.current().toLowerCase();Ee.hasOwnProperty(he)?We="atom":fe.hasOwnProperty(he)?We="keyword":We="variable"}var ue={};return ue.top=function(xe,he,se){if(xe=="{")return ne(se,he,"block");if(xe=="}"&&se.context.prev)return M(se);if(we&&/@component/i.test(xe))return ne(se,he,"atComponentBlock");if(/^@(-moz-)?document$/i.test(xe))return ne(se,he,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(xe))return ne(se,he,"atBlock");if(/^@(font-face|counter-style)/i.test(xe))return se.stateArg=xe,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(xe))return"keyframes";if(xe&&xe.charAt(0)=="@")return ne(se,he,"at");if(xe=="hash")We="builtin";else if(xe=="word")We="tag";else{if(xe=="variable-definition")return"maybeprop";if(xe=="interpolation")return ne(se,he,"interpolation");if(xe==":")return"pseudo";if(Ae&&xe=="(")return ne(se,he,"parens")}return se.context.type},ue.block=function(xe,he,se){if(xe=="word"){var Le=he.current().toLowerCase();return Te.hasOwnProperty(Le)?(We="property","maybeprop"):G.hasOwnProperty(Le)?(We=Oe?"string-2":"property","maybeprop"):Ae?(We=he.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(We+=" error","maybeprop")}else return xe=="meta"?"block":!Ae&&(xe=="hash"||xe=="qualifier")?(We="error","block"):ue.top(xe,he,se)},ue.maybeprop=function(xe,he,se){return xe==":"?ne(se,he,"prop"):U(xe,he,se)},ue.prop=function(xe,he,se){if(xe==";")return M(se);if(xe=="{"&&Ae)return ne(se,he,"propBlock");if(xe=="}"||xe=="{")return J(xe,he,se);if(xe=="(")return ne(se,he,"parens");if(xe=="hash"&&!/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(he.current()))We+=" error";else if(xe=="word")ce(he);else if(xe=="interpolation")return ne(se,he,"interpolation");return"prop"},ue.propBlock=function(xe,he,se){return xe=="}"?M(se):xe=="word"?(We="property","maybeprop"):se.context.type},ue.parens=function(xe,he,se){return xe=="{"||xe=="}"?J(xe,he,se):xe==")"?M(se):xe=="("?ne(se,he,"parens"):xe=="interpolation"?ne(se,he,"interpolation"):(xe=="word"&&ce(he),"parens")},ue.pseudo=function(xe,he,se){return xe=="meta"?"pseudo":xe=="word"?(We="variable-3",se.context.type):U(xe,he,se)},ue.documentTypes=function(xe,he,se){return xe=="word"&&D.hasOwnProperty(he.current())?(We="tag",se.context.type):ue.atBlock(xe,he,se)},ue.atBlock=function(xe,he,se){if(xe=="(")return ne(se,he,"atBlock_parens");if(xe=="}"||xe==";")return J(xe,he,se);if(xe=="{")return M(se)&&ne(se,he,Ae?"block":"top");if(xe=="interpolation")return ne(se,he,"interpolation");if(xe=="word"){var Le=he.current().toLowerCase();Le=="only"||Le=="not"||Le=="and"||Le=="or"?We="keyword":Q.hasOwnProperty(Le)?We="attribute":oe.hasOwnProperty(Le)?We="property":re.hasOwnProperty(Le)?We="keyword":Te.hasOwnProperty(Le)?We="property":G.hasOwnProperty(Le)?We=Oe?"string-2":"property":Ee.hasOwnProperty(Le)?We="atom":fe.hasOwnProperty(Le)?We="keyword":We="error"}return se.context.type},ue.atComponentBlock=function(xe,he,se){return xe=="}"?J(xe,he,se):xe=="{"?M(se)&&ne(se,he,Ae?"block":"top",!1):(xe=="word"&&(We="error"),se.context.type)},ue.atBlock_parens=function(xe,he,se){return xe==")"?M(se):xe=="{"||xe=="}"?J(xe,he,se,2):ue.atBlock(xe,he,se)},ue.restricted_atBlock_before=function(xe,he,se){return xe=="{"?ne(se,he,"restricted_atBlock"):xe=="word"&&se.stateArg=="@counter-style"?(We="variable","restricted_atBlock_before"):U(xe,he,se)},ue.restricted_atBlock=function(xe,he,se){return xe=="}"?(se.stateArg=null,M(se)):xe=="word"?(se.stateArg=="@font-face"&&!Y.hasOwnProperty(he.current().toLowerCase())||se.stateArg=="@counter-style"&&!Se.hasOwnProperty(he.current().toLowerCase())?We="error":We="property","maybeprop"):"restricted_atBlock"},ue.keyframes=function(xe,he,se){return xe=="word"?(We="variable","keyframes"):xe=="{"?ne(se,he,"top"):U(xe,he,se)},ue.at=function(xe,he,se){return xe==";"?M(se):xe=="{"||xe=="}"?J(xe,he,se):(xe=="word"?We="tag":xe=="hash"&&(We="builtin"),"at")},ue.interpolation=function(xe,he,se){return xe=="}"?M(se):xe=="{"||xe==";"?J(xe,he,se):(xe=="word"?We="variable":xe!="variable"&&xe!="("&&xe!=")"&&(We="error"),"interpolation")},{startState:function(xe){return{tokenize:null,state:q?"block":"top",stateArg:null,context:new Ie(q?"block":"top",xe||0,null)}},token:function(xe,he){if(!he.tokenize&&xe.eatSpace())return null;var se=(he.tokenize||Pt)(xe,he);return se&&typeof se=="object"&&(ze=se[1],se=se[0]),We=se,ze!="comment"&&(he.state=ue[he.state](ze,xe,he)),We},indent:function(xe,he){var se=xe.context,Le=he&&he.charAt(0),Ue=se.indent;return se.type=="prop"&&(Le=="}"||Le==")")&&(se=se.prev),se.prev&&(Le=="}"&&(se.type=="block"||se.type=="top"||se.type=="interpolation"||se.type=="restricted_atBlock")?(se=se.prev,Ue=se.indent):(Le==")"&&(se.type=="parens"||se.type=="atBlock_parens")||Le=="{"&&(se.type=="at"||se.type=="atBlock"))&&(Ue=Math.max(0,se.indent-I))),Ue},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:qe,fold:"brace"}});function s(Z){for(var A={},q=0;q<Z.length;++q)A[Z[q].toLowerCase()]=!0;return A}var o=["domain","regexp","url","url-prefix"],i=s(o),l=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],c=s(l),d=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme"],h=s(d),m=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light"],y=s(m),x=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-content","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],b=s(x),v=["accent-color","aspect-ratio","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","content-visibility","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","overflow-anchor","overscroll-behavior","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],j=s(v),S=["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],k=s(S),N=["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"],P=s(N),R=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],F=s(R),z=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","blur","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","brightness","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","contrast","copy","counter","counters","cover","crop","cross","crosshair","cubic-bezier","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","drop-shadow","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","grayscale","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","hue-rotate","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturate","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","sepia","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],H=s(z),V=o.concat(l).concat(d).concat(m).concat(x).concat(v).concat(R).concat(z);t.registerHelper("hintWords","css",V);function W(Z,A){for(var q=!1,I;(I=Z.next())!=null;){if(q&&I=="/"){A.tokenize=null;break}q=I=="*"}return["comment","comment"]}t.defineMIME("text/css",{documentTypes:i,mediaTypes:c,mediaFeatures:h,mediaValueKeywords:y,propertyKeywords:b,nonStandardPropertyKeywords:j,fontProperties:k,counterDescriptors:P,colorKeywords:F,valueKeywords:H,tokenHooks:{"/":function(Z,A){return Z.eat("*")?(A.tokenize=W,W(Z,A)):!1}},name:"css"}),t.defineMIME("text/x-scss",{mediaTypes:c,mediaFeatures:h,mediaValueKeywords:y,propertyKeywords:b,nonStandardPropertyKeywords:j,colorKeywords:F,valueKeywords:H,fontProperties:k,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(Z,A){return Z.eat("/")?(Z.skipToEnd(),["comment","comment"]):Z.eat("*")?(A.tokenize=W,W(Z,A)):["operator","operator"]},":":function(Z){return Z.match(/^\s*\{/,!1)?[null,null]:!1},$:function(Z){return Z.match(/^[\w-]+/),Z.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(Z){return Z.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"}),t.defineMIME("text/x-less",{mediaTypes:c,mediaFeatures:h,mediaValueKeywords:y,propertyKeywords:b,nonStandardPropertyKeywords:j,colorKeywords:F,valueKeywords:H,fontProperties:k,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(Z,A){return Z.eat("/")?(Z.skipToEnd(),["comment","comment"]):Z.eat("*")?(A.tokenize=W,W(Z,A)):["operator","operator"]},"@":function(Z){return Z.eat("{")?[null,"interpolation"]:Z.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)?!1:(Z.eatWhile(/[\w\\\-]/),Z.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),t.defineMIME("text/x-gss",{documentTypes:i,mediaTypes:c,mediaFeatures:h,propertyKeywords:b,nonStandardPropertyKeywords:j,fontProperties:k,counterDescriptors:P,colorKeywords:F,valueKeywords:H,supportsAtComponent:!0,tokenHooks:{"/":function(Z,A){return Z.eat("*")?(A.tokenize=W,W(Z,A)):!1}},name:"css",helperType:"gss"})})}),8253:((a,r,e)=>{(function(t){t(e(4408),e(9701),e(6061),e(7389))})(function(t){var s={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};function o(y,x,b){var v=y.current(),j=v.search(x);return j>-1?y.backUp(v.length-j):v.match(/<\/?$/)&&(y.backUp(v.length),y.match(x,!1)||y.match(v)),b}var i={};function l(y){var x=i[y];return x||(i[y]=new RegExp("\\s+"+y+`\\s*=\\s*('|")?([^'"]+)('|")?\\s*`))}function c(y,x){var b=y.match(l(x));return b?/^\s*(.*?)\s*$/.exec(b[2])[1]:""}function d(y,x){return new RegExp((x?"^":"")+"</s*"+y+"s*>","i")}function h(y,x){for(var b in y)for(var v=x[b]||(x[b]=[]),j=y[b],S=j.length-1;S>=0;S--)v.unshift(j[S])}function m(y,x){for(var b=0;b<y.length;b++){var v=y[b];if(!v[0]||v[1].test(c(x,v[0])))return v[2]}}t.defineMode("htmlmixed",function(y,x){var b=t.getMode(y,{name:"xml",htmlMode:!0,multilineTagIndentFactor:x.multilineTagIndentFactor,multilineTagIndentPastTag:x.multilineTagIndentPastTag,allowMissingTagName:x.allowMissingTagName}),v={},j=x&&x.tags,S=x&&x.scriptTypes;if(h(s,v),j&&h(j,v),S)for(var k=S.length-1;k>=0;k--)v.script.unshift(["type",S[k].matches,S[k].mode]);function N(P,R){var F=b.token(P,R.htmlState),z=/\btag\b/.test(F),H;if(z&&!/[<>\s\/]/.test(P.current())&&(H=R.htmlState.tagName&&R.htmlState.tagName.toLowerCase())&&v.hasOwnProperty(H))R.inTag=H+" ";else if(R.inTag&&z&&/>$/.test(P.current())){var V=/^([\S]+) (.*)/.exec(R.inTag);R.inTag=null;var W=P.current()==">"&&m(v[V[1]],V[2]),Z=t.getMode(y,W),A=d(V[1],!0),q=d(V[1],!1);R.token=function(I,K){return I.match(A,!1)?(K.token=N,K.localState=K.localMode=null,null):o(I,q,K.localMode.token(I,K.localState))},R.localMode=Z,R.localState=t.startState(Z,b.indent(R.htmlState,"",""))}else R.inTag&&(R.inTag+=P.current(),P.eol()&&(R.inTag+=" "));return F}return{startState:function(){var P=t.startState(b);return{token:N,inTag:null,localMode:null,localState:null,htmlState:P}},copyState:function(P){var R;return P.localState&&(R=t.copyState(P.localMode,P.localState)),{token:P.token,inTag:P.inTag,localMode:P.localMode,localState:R,htmlState:t.copyState(b,P.htmlState)}},token:function(P,R){return R.token(P,R)},indent:function(P,R,F){return!P.localMode||/^\s*<\//.test(R)?b.indent(P.htmlState,R,F):P.localMode.indent?P.localMode.indent(P.localState,R,F):t.Pass},innerMode:function(P){return{state:P.localState||P.htmlState,mode:P.localMode||b}}}},"xml","javascript","css"),t.defineMIME("text/html","htmlmixed")})}),6061:((a,r,e)=>{(function(t){t(e(4408))})(function(t){t.defineMode("javascript",function(s,o){var i=s.indentUnit,l=o.statementIndent,c=o.jsonld,d=o.json||c,h=o.trackScope!==!1,m=o.typescript,y=o.wordCharacters||/[\w$\xa1-\uffff]/,x=(function(){function de(kt){return{type:kt,style:"keyword"}}var ke=de("keyword a"),ct=de("keyword b"),bt=de("keyword c"),Ft=de("keyword d"),cr=de("operator"),Br={type:"atom",style:"atom"};return{if:de("if"),while:ke,with:ke,else:ct,do:ct,try:ct,finally:ct,return:Ft,break:Ft,continue:Ft,new:de("new"),delete:bt,void:bt,throw:bt,debugger:de("debugger"),var:de("var"),const:de("var"),let:de("var"),function:de("function"),catch:de("catch"),for:de("for"),switch:de("switch"),case:de("case"),default:de("default"),in:cr,typeof:cr,instanceof:cr,true:Br,false:Br,null:Br,undefined:Br,NaN:Br,Infinity:Br,this:de("this"),class:de("class"),super:de("atom"),yield:bt,export:de("export"),import:de("import"),extends:bt,await:bt}})(),b=/[+\-*&%=<>!?|~^@]/,v=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function j(de){for(var ke=!1,ct,bt=!1;(ct=de.next())!=null;){if(!ke){if(ct=="/"&&!bt)return;ct=="["?bt=!0:bt&&ct=="]"&&(bt=!1)}ke=!ke&&ct=="\\"}}var S,k;function N(de,ke,ct){return S=de,k=ct,ke}function P(de,ke){var ct=de.next();if(ct=='"'||ct=="'")return ke.tokenize=R(ct),ke.tokenize(de,ke);if(ct=="."&&de.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return N("number","number");if(ct=="."&&de.match(".."))return N("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(ct))return N(ct);if(ct=="="&&de.eat(">"))return N("=>","operator");if(ct=="0"&&de.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return N("number","number");if(/\d/.test(ct))return de.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),N("number","number");if(ct=="/")return de.eat("*")?(ke.tokenize=F,F(de,ke)):de.eat("/")?(de.skipToEnd(),N("comment","comment")):Ot(de,ke,1)?(j(de),de.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),N("regexp","string-2")):(de.eat("="),N("operator","operator",de.current()));if(ct=="`")return ke.tokenize=z,z(de,ke);if(ct=="#"&&de.peek()=="!")return de.skipToEnd(),N("meta","meta");if(ct=="#"&&de.eatWhile(y))return N("variable","property");if(ct=="<"&&de.match("!--")||ct=="-"&&de.match("->")&&!/\S/.test(de.string.slice(0,de.start)))return de.skipToEnd(),N("comment","comment");if(b.test(ct))return(ct!=">"||!ke.lexical||ke.lexical.type!=">")&&(de.eat("=")?(ct=="!"||ct=="=")&&de.eat("="):/[<>*+\-|&?]/.test(ct)&&(de.eat(ct),ct==">"&&de.eat(ct))),ct=="?"&&de.eat(".")?N("."):N("operator","operator",de.current());if(y.test(ct)){de.eatWhile(y);var bt=de.current();if(ke.lastType!="."){if(x.propertyIsEnumerable(bt)){var Ft=x[bt];return N(Ft.type,Ft.style,bt)}if(bt=="async"&&de.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return N("async","keyword",bt)}return N("variable","variable",bt)}}function R(de){return function(ke,ct){var bt=!1,Ft;if(c&&ke.peek()=="@"&&ke.match(v))return ct.tokenize=P,N("jsonld-keyword","meta");for(;(Ft=ke.next())!=null&&!(Ft==de&&!bt);)bt=!bt&&Ft=="\\";return bt||(ct.tokenize=P),N("string","string")}}function F(de,ke){for(var ct=!1,bt;bt=de.next();){if(bt=="/"&&ct){ke.tokenize=P;break}ct=bt=="*"}return N("comment","comment")}function z(de,ke){for(var ct=!1,bt;(bt=de.next())!=null;){if(!ct&&(bt=="`"||bt=="$"&&de.eat("{"))){ke.tokenize=P;break}ct=!ct&&bt=="\\"}return N("quasi","string-2",de.current())}var H="([{}])";function V(de,ke){ke.fatArrowAt&&(ke.fatArrowAt=null);var ct=de.string.indexOf("=>",de.start);if(!(ct<0)){if(m){var bt=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(de.string.slice(de.start,ct));bt&&(ct=bt.index)}for(var Ft=0,cr=!1,Br=ct-1;Br>=0;--Br){var kt=de.string.charAt(Br),Yr=H.indexOf(kt);if(Yr>=0&&Yr<3){if(!Ft){++Br;break}if(--Ft==0){kt=="("&&(cr=!0);break}}else if(Yr>=3&&Yr<6)++Ft;else if(y.test(kt))cr=!0;else if(/["'\/`]/.test(kt))for(;;--Br){if(Br==0)return;var Xr=de.string.charAt(Br-1);if(Xr==kt&&de.string.charAt(Br-2)!="\\"){Br--;break}}else if(cr&&!Ft){++Br;break}}cr&&!Ft&&(ke.fatArrowAt=Br)}}var W={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function Z(de,ke,ct,bt,Ft,cr){this.indented=de,this.column=ke,this.type=ct,this.prev=Ft,this.info=cr,bt!=null&&(this.align=bt)}function A(de,ke){if(!h)return!1;for(var ct=de.localVars;ct;ct=ct.next)if(ct.name==ke)return!0;for(var bt=de.context;bt;bt=bt.prev)for(var ct=bt.vars;ct;ct=ct.next)if(ct.name==ke)return!0}function q(de,ke,ct,bt,Ft){var cr=de.cc;for(I.state=de,I.stream=Ft,I.marked=null,I.cc=cr,I.style=ke,de.lexical.hasOwnProperty("align")||(de.lexical.align=!0);;){var Br=cr.length?cr.pop():d?pt:ze;if(Br(ct,bt)){for(;cr.length&&cr[cr.length-1].lex;)cr.pop()();return I.marked?I.marked:ct=="variable"&&A(de,bt)?"variable-2":ke}}}var I={state:null,marked:null,cc:null};function K(){for(var de=arguments.length-1;de>=0;de--)I.cc.push(arguments[de])}function D(){return K.apply(null,arguments),!0}function Q(de,ke){for(var ct=ke;ct;ct=ct.next)if(ct.name==de)return!0;return!1}function oe(de){var ke=I.state;if(I.marked="def",!!h){if(ke.context){if(ke.lexical.info=="var"&&ke.context&&ke.context.block){var ct=re(de,ke.context);if(ct!=null){ke.context=ct;return}}else if(!Q(de,ke.localVars)){ke.localVars=new Y(de,ke.localVars);return}}o.globalVars&&!Q(de,ke.globalVars)&&(ke.globalVars=new Y(de,ke.globalVars))}}function re(de,ke){if(ke)if(ke.block){var ct=re(de,ke.prev);return ct?ct==ke.prev?ke:new G(ct,ke.vars,!0):null}else return Q(de,ke.vars)?ke:new G(ke.prev,new Y(de,ke.vars),!1);else return null}function Te(de){return de=="public"||de=="private"||de=="protected"||de=="abstract"||de=="readonly"}function G(de,ke,ct){this.prev=de,this.vars=ke,this.block=ct}function Y(de,ke){this.name=de,this.next=ke}var Se=new Y("this",new Y("arguments",null));function fe(){I.state.context=new G(I.state.context,I.state.localVars,!1),I.state.localVars=Se}function Ee(){I.state.context=new G(I.state.context,I.state.localVars,!0),I.state.localVars=null}function Ae(){I.state.localVars=I.state.context.vars,I.state.context=I.state.context.prev}Ae.lex=!0;function qe(de,ke){var ct=function(){var bt=I.state,Ft=bt.indented;if(bt.lexical.type=="stat")Ft=bt.lexical.indented;else for(var cr=bt.lexical;cr&&cr.type==")"&&cr.align;cr=cr.prev)Ft=cr.indented;bt.lexical=new Z(Ft,I.stream.column(),de,null,bt.lexical,ke)};return ct.lex=!0,ct}function we(){var de=I.state;de.lexical.prev&&(de.lexical.type==")"&&(de.indented=de.lexical.indented),de.lexical=de.lexical.prev)}we.lex=!0;function Oe(de){function ke(ct){return ct==de?D():de==";"||ct=="}"||ct==")"||ct=="]"?K():D(ke)}return ke}function ze(de,ke){return de=="var"?D(qe("vardef",ke),er,Oe(";"),we):de=="keyword a"?D(qe("form"),ee,ze,we):de=="keyword b"?D(qe("form"),ze,we):de=="keyword d"?I.stream.match(/^\s*$/,!1)?D():D(qe("stat"),Ie,Oe(";"),we):de=="debugger"?D(Oe(";")):de=="{"?D(qe("}"),Ee,Fe,we,Ae):de==";"?D():de=="if"?(I.state.lexical.info=="else"&&I.state.cc[I.state.cc.length-1]==we&&I.state.cc.pop()(),D(qe("form"),ee,ze,we,br)):de=="function"?D(Er):de=="for"?D(qe("form"),Ee,pn,ze,Ae,we):de=="class"||m&&ke=="interface"?(I.marked="keyword",D(qe("form",de=="class"?de:ke),bn,we)):de=="variable"?m&&ke=="declare"?(I.marked="keyword",D(ze)):m&&(ke=="module"||ke=="enum"||ke=="type")&&I.stream.match(/^\s*\w/,!1)?(I.marked="keyword",ke=="enum"?D(ve):ke=="type"?D(ht,Oe("operator"),Nt,Oe(";")):D(qe("form"),zr,Oe("{"),qe("}"),Fe,we,we)):m&&ke=="namespace"?(I.marked="keyword",D(qe("form"),pt,ze,we)):m&&ke=="abstract"?(I.marked="keyword",D(ze)):D(qe("stat"),Le):de=="switch"?D(qe("form"),ee,Oe("{"),qe("}","switch"),Ee,Fe,we,we,Ae):de=="case"?D(pt,Oe(":")):de=="default"?D(Oe(":")):de=="catch"?D(qe("form"),fe,We,ze,we,Ae):de=="export"?D(qe("stat"),te,we):de=="import"?D(qe("stat"),Re,we):de=="async"?D(ze):ke=="@"?D(pt,ze):K(qe("stat"),pt,Oe(";"),we)}function We(de){if(de=="(")return D(vr,Oe(")"))}function pt(de,ke){return Ne(de,ke,!1)}function Pt(de,ke){return Ne(de,ke,!0)}function ee(de){return de!="("?K():D(qe(")"),Ie,Oe(")"),we)}function Ne(de,ke,ct){if(I.state.fatArrowAt==I.stream.start){var bt=ct?ue:ce;if(de=="(")return D(fe,qe(")"),le(vr,")"),we,Oe("=>"),bt,Ae);if(de=="variable")return K(fe,zr,Oe("=>"),bt,Ae)}var Ft=ct?M:ne;return W.hasOwnProperty(de)?D(Ft):de=="function"?D(Er,Ft):de=="class"||m&&ke=="interface"?(I.marked="keyword",D(qe("form"),Rn,we)):de=="keyword c"||de=="async"?D(ct?Pt:pt):de=="("?D(qe(")"),Ie,Oe(")"),we,Ft):de=="operator"||de=="spread"?D(ct?Pt:pt):de=="["?D(qe("]"),$e,we,Ft):de=="{"?Xe(Ge,"}",null,Ft):de=="quasi"?K(U,Ft):de=="new"?D(xe(ct)):D()}function Ie(de){return de.match(/[;\}\)\],]/)?K():K(pt)}function ne(de,ke){return de==","?D(Ie):M(de,ke,!1)}function M(de,ke,ct){var bt=ct==!1?ne:M,Ft=ct==!1?pt:Pt;if(de=="=>")return D(fe,ct?ue:ce,Ae);if(de=="operator")return/\+\+|--/.test(ke)||m&&ke=="!"?D(bt):m&&ke=="<"&&I.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?D(qe(">"),le(Nt,">"),we,bt):ke=="?"?D(pt,Oe(":"),Ft):D(Ft);if(de=="quasi")return K(U,bt);if(de!=";"){if(de=="(")return Xe(Pt,")","call",bt);if(de==".")return D(Ue,bt);if(de=="[")return D(qe("]"),Ie,Oe("]"),we,bt);if(m&&ke=="as")return I.marked="keyword",D(Nt,bt);if(de=="regexp")return I.state.lastType=I.marked="operator",I.stream.backUp(I.stream.pos-I.stream.start-1),D(Ft)}}function U(de,ke){return de!="quasi"?K():ke.slice(ke.length-2)!="${"?D(U):D(Ie,J)}function J(de){if(de=="}")return I.marked="string-2",I.state.tokenize=z,D(U)}function ce(de){return V(I.stream,I.state),K(de=="{"?ze:pt)}function ue(de){return V(I.stream,I.state),K(de=="{"?ze:Pt)}function xe(de){return function(ke){return ke=="."?D(de?se:he):ke=="variable"&&m?D(tt,de?M:ne):K(de?Pt:pt)}}function he(de,ke){if(ke=="target")return I.marked="keyword",D(ne)}function se(de,ke){if(ke=="target")return I.marked="keyword",D(M)}function Le(de){return de==":"?D(we,ze):K(ne,Oe(";"),we)}function Ue(de){if(de=="variable")return I.marked="property",D()}function Ge(de,ke){if(de=="async")return I.marked="property",D(Ge);if(de=="variable"||I.style=="keyword"){if(I.marked="property",ke=="get"||ke=="set")return D(ie);var ct;return m&&I.state.fatArrowAt==I.stream.start&&(ct=I.stream.match(/^\s*:\s*/,!1))&&(I.state.fatArrowAt=I.stream.pos+ct[0].length),D(_e)}else{if(de=="number"||de=="string")return I.marked=c?"property":I.style+" property",D(_e);if(de=="jsonld-keyword")return D(_e);if(m&&Te(ke))return I.marked="keyword",D(Ge);if(de=="[")return D(pt,dt,Oe("]"),_e);if(de=="spread")return D(Pt,_e);if(ke=="*")return I.marked="keyword",D(Ge);if(de==":")return K(_e)}}function ie(de){return de!="variable"?K(_e):(I.marked="property",D(Er))}function _e(de){if(de==":")return D(Pt);if(de=="(")return K(Er)}function le(de,ke,ct){function bt(Ft,cr){if(ct?ct.indexOf(Ft)>-1:Ft==","){var Br=I.state.lexical;return Br.info=="call"&&(Br.pos=(Br.pos||0)+1),D(function(kt,Yr){return kt==ke||Yr==ke?K():K(de)},bt)}return Ft==ke||cr==ke?D():ct&&ct.indexOf(";")>-1?K(de):D(Oe(ke))}return function(Ft,cr){return Ft==ke||cr==ke?D():K(de,bt)}}function Xe(de,ke,ct){for(var bt=3;bt<arguments.length;bt++)I.cc.push(arguments[bt]);return D(qe(ke,ct),le(de,ke),we)}function Fe(de){return de=="}"?D():K(ze,Fe)}function dt(de,ke){if(m){if(de==":")return D(Nt);if(ke=="?")return D(dt)}}function lt(de,ke){if(m&&(de==":"||ke=="in"))return D(Nt)}function ft(de){if(m&&de==":")return I.stream.match(/^\s*\w+\s+is\b/,!1)?D(pt,Ze,Nt):D(Nt)}function Ze(de,ke){if(ke=="is")return I.marked="keyword",D()}function Nt(de,ke){if(ke=="keyof"||ke=="typeof"||ke=="infer"||ke=="readonly")return I.marked="keyword",D(ke=="typeof"?Pt:Nt);if(de=="variable"||ke=="void")return I.marked="type",D(Be);if(ke=="|"||ke=="&")return D(Nt);if(de=="string"||de=="number"||de=="atom")return D(Be);if(de=="[")return D(qe("]"),le(Nt,"]",","),we,Be);if(de=="{")return D(qe("}"),vt,we,Be);if(de=="(")return D(le(ye,")"),Mt,Be);if(de=="<")return D(le(Nt,">"),Nt);if(de=="quasi")return K(wr,Be)}function Mt(de){if(de=="=>")return D(Nt)}function vt(de){return de.match(/[\}\)\]]/)?D():de==","||de==";"?D(vt):K(Jt,vt)}function Jt(de,ke){if(de=="variable"||I.style=="keyword")return I.marked="property",D(Jt);if(ke=="?"||de=="number"||de=="string")return D(Jt);if(de==":")return D(Nt);if(de=="[")return D(Oe("variable"),lt,Oe("]"),Jt);if(de=="(")return K(jr,Jt);if(!de.match(/[;\}\)\],]/))return D()}function wr(de,ke){return de!="quasi"?K():ke.slice(ke.length-2)!="${"?D(wr):D(Nt,Wt)}function Wt(de){if(de=="}")return I.marked="string-2",I.state.tokenize=z,D(wr)}function ye(de,ke){return de=="variable"&&I.stream.match(/^\s*[?:]/,!1)||ke=="?"?D(ye):de==":"?D(Nt):de=="spread"?D(ye):K(Nt)}function Be(de,ke){if(ke=="<")return D(qe(">"),le(Nt,">"),we,Be);if(ke=="|"||de=="."||ke=="&")return D(Nt);if(de=="[")return D(Nt,Oe("]"),Be);if(ke=="extends"||ke=="implements")return I.marked="keyword",D(Nt);if(ke=="?")return D(Nt,Oe(":"),Nt)}function tt(de,ke){if(ke=="<")return D(qe(">"),le(Nt,">"),we,Be)}function wt(){return K(Nt,Ut)}function Ut(de,ke){if(ke=="=")return D(Nt)}function er(de,ke){return ke=="enum"?(I.marked="keyword",D(ve)):K(zr,dt,Ur,ar)}function zr(de,ke){if(m&&Te(ke))return I.marked="keyword",D(zr);if(de=="variable")return oe(ke),D();if(de=="spread")return D(zr);if(de=="[")return Xe(_n,"]");if(de=="{")return Xe(rn,"}")}function rn(de,ke){return de=="variable"&&!I.stream.match(/^\s*:/,!1)?(oe(ke),D(Ur)):(de=="variable"&&(I.marked="property"),de=="spread"?D(zr):de=="}"?K():de=="["?D(pt,Oe("]"),Oe(":"),rn):D(Oe(":"),zr,Ur))}function _n(){return K(zr,Ur)}function Ur(de,ke){if(ke=="=")return D(Pt)}function ar(de){if(de==",")return D(er)}function br(de,ke){if(de=="keyword b"&&ke=="else")return D(qe("form","else"),ze,we)}function pn(de,ke){if(ke=="await")return D(pn);if(de=="(")return D(qe(")"),In,we)}function In(de){return de=="var"?D(er,on):de=="variable"?D(on):K(on)}function on(de,ke){return de==")"?D():de==";"?D(on):ke=="in"||ke=="of"?(I.marked="keyword",D(pt,on)):K(pt,on)}function Er(de,ke){if(ke=="*")return I.marked="keyword",D(Er);if(de=="variable")return oe(ke),D(Er);if(de=="(")return D(fe,qe(")"),le(vr,")"),we,ft,ze,Ae);if(m&&ke=="<")return D(qe(">"),le(wt,">"),we,Er)}function jr(de,ke){if(ke=="*")return I.marked="keyword",D(jr);if(de=="variable")return oe(ke),D(jr);if(de=="(")return D(fe,qe(")"),le(vr,")"),we,ft,Ae);if(m&&ke=="<")return D(qe(">"),le(wt,">"),we,jr)}function ht(de,ke){if(de=="keyword"||de=="variable")return I.marked="type",D(ht);if(ke=="<")return D(qe(">"),le(wt,">"),we)}function vr(de,ke){return ke=="@"&&D(pt,vr),de=="spread"?D(vr):m&&Te(ke)?(I.marked="keyword",D(vr)):m&&de=="this"?D(dt,Ur):K(zr,dt,Ur)}function Rn(de,ke){return de=="variable"?bn(de,ke):En(de,ke)}function bn(de,ke){if(de=="variable")return oe(ke),D(En)}function En(de,ke){if(ke=="<")return D(qe(">"),le(wt,">"),we,En);if(ke=="extends"||ke=="implements"||m&&de==",")return ke=="implements"&&(I.marked="keyword"),D(m?Nt:pt,En);if(de=="{")return D(qe("}"),Wr,we)}function Wr(de,ke){if(de=="async"||de=="variable"&&(ke=="static"||ke=="get"||ke=="set"||m&&Te(ke))&&I.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return I.marked="keyword",D(Wr);if(de=="variable"||I.style=="keyword")return I.marked="property",D(Bn,Wr);if(de=="number"||de=="string")return D(Bn,Wr);if(de=="[")return D(pt,dt,Oe("]"),Bn,Wr);if(ke=="*")return I.marked="keyword",D(Wr);if(m&&de=="(")return K(jr,Wr);if(de==";"||de==",")return D(Wr);if(de=="}")return D();if(ke=="@")return D(pt,Wr)}function Bn(de,ke){if(ke=="!"||ke=="?")return D(Bn);if(de==":")return D(Nt,Ur);if(ke=="=")return D(Pt);var ct=I.state.lexical.prev,bt=ct&&ct.info=="interface";return K(bt?jr:Er)}function te(de,ke){return ke=="*"?(I.marked="keyword",D(Qe,Oe(";"))):ke=="default"?(I.marked="keyword",D(pt,Oe(";"))):de=="{"?D(le(je,"}"),Qe,Oe(";")):K(ze)}function je(de,ke){if(ke=="as")return I.marked="keyword",D(Oe("variable"));if(de=="variable")return K(Pt,je)}function Re(de){return de=="string"?D():de=="("?K(pt):de=="."?K(ne):K(Ye,at,Qe)}function Ye(de,ke){return de=="{"?Xe(Ye,"}"):(de=="variable"&&oe(ke),ke=="*"&&(I.marked="keyword"),D(jt))}function at(de){if(de==",")return D(Ye,at)}function jt(de,ke){if(ke=="as")return I.marked="keyword",D(Ye)}function Qe(de,ke){if(ke=="from")return I.marked="keyword",D(pt)}function $e(de){return de=="]"?D():K(le(Pt,"]"))}function ve(){return K(qe("form"),zr,Oe("{"),qe("}"),le(Ve,"}"),we,we)}function Ve(){return K(zr,Ur)}function st(de,ke){return de.lastType=="operator"||de.lastType==","||b.test(ke.charAt(0))||/[,.]/.test(ke.charAt(0))}function Ot(de,ke,ct){return ke.tokenize==P&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(ke.lastType)||ke.lastType=="quasi"&&/\{\s*$/.test(de.string.slice(0,de.pos-(ct||0)))}return{startState:function(de){var ke={tokenize:P,lastType:"sof",cc:[],lexical:new Z((de||0)-i,0,"block",!1),localVars:o.localVars,context:o.localVars&&new G(null,null,!1),indented:de||0};return o.globalVars&&typeof o.globalVars=="object"&&(ke.globalVars=o.globalVars),ke},token:function(de,ke){if(de.sol()&&(ke.lexical.hasOwnProperty("align")||(ke.lexical.align=!1),ke.indented=de.indentation(),V(de,ke)),ke.tokenize!=F&&de.eatSpace())return null;var ct=ke.tokenize(de,ke);return S=="comment"?ct:(ke.lastType=S=="operator"&&(k=="++"||k=="--")?"incdec":S,q(ke,ct,S,k,de))},indent:function(de,ke){if(de.tokenize==F||de.tokenize==z)return t.Pass;if(de.tokenize!=P)return 0;var ct=ke&&ke.charAt(0),bt=de.lexical,Ft;if(!/^\s*else\b/.test(ke))for(var cr=de.cc.length-1;cr>=0;--cr){var Br=de.cc[cr];if(Br==we)bt=bt.prev;else if(Br!=br&&Br!=Ae)break}for(;(bt.type=="stat"||bt.type=="form")&&(ct=="}"||(Ft=de.cc[de.cc.length-1])&&(Ft==ne||Ft==M)&&!/^[,\.=+\-*:?[\(]/.test(ke));)bt=bt.prev;l&&bt.type==")"&&bt.prev.type=="stat"&&(bt=bt.prev);var kt=bt.type,Yr=ct==kt;return kt=="vardef"?bt.indented+(de.lastType=="operator"||de.lastType==","?bt.info.length+1:0):kt=="form"&&ct=="{"?bt.indented:kt=="form"?bt.indented+i:kt=="stat"?bt.indented+(st(de,ke)?l||i:0):bt.info=="switch"&&!Yr&&o.doubleIndentSwitch!=!1?bt.indented+(/^(?:case|default)\b/.test(ke)?i:2*i):bt.align?bt.column+(Yr?0:1):bt.indented+(Yr?0:i)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:d?null:"/*",blockCommentEnd:d?null:"*/",blockCommentContinue:d?null:" * ",lineComment:d?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:d?"json":"javascript",jsonldMode:c,jsonMode:d,expressionAllowed:Ot,skipExpression:function(de){q(de,"atom","atom","true",new t.StringStream("",2,null))}}}),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/manifest+json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})})}),9701:((a,r,e)=>{(function(t){t(e(4408))})(function(t){var s={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},o={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};t.defineMode("xml",function(i,l){var c=i.indentUnit,d={},h=l.htmlMode?s:o;for(var m in h)d[m]=h[m];for(var m in l)d[m]=l[m];var y,x;function b(D,Q){function oe(G){return Q.tokenize=G,G(D,Q)}var re=D.next();if(re=="<")return D.eat("!")?D.eat("[")?D.match("CDATA[")?oe(S("atom","]]>")):null:D.match("--")?oe(S("comment","-->")):D.match("DOCTYPE",!0,!0)?(D.eatWhile(/[\w\._\-]/),oe(k(1))):null:D.eat("?")?(D.eatWhile(/[\w\._\-]/),Q.tokenize=S("meta","?>"),"meta"):(y=D.eat("/")?"closeTag":"openTag",Q.tokenize=v,"tag bracket");if(re=="&"){var Te;return D.eat("#")?D.eat("x")?Te=D.eatWhile(/[a-fA-F\d]/)&&D.eat(";"):Te=D.eatWhile(/[\d]/)&&D.eat(";"):Te=D.eatWhile(/[\w\.\-:]/)&&D.eat(";"),Te?"atom":"error"}else return D.eatWhile(/[^&<]/),null}b.isInText=!0;function v(D,Q){var oe=D.next();if(oe==">"||oe=="/"&&D.eat(">"))return Q.tokenize=b,y=oe==">"?"endTag":"selfcloseTag","tag bracket";if(oe=="=")return y="equals",null;if(oe=="<"){Q.tokenize=b,Q.state=z,Q.tagName=Q.tagStart=null;var re=Q.tokenize(D,Q);return re?re+" tag error":"tag error"}else return/[\'\"]/.test(oe)?(Q.tokenize=j(oe),Q.stringStartCol=D.column(),Q.tokenize(D,Q)):(D.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function j(D){var Q=function(oe,re){for(;!oe.eol();)if(oe.next()==D){re.tokenize=v;break}return"string"};return Q.isInAttribute=!0,Q}function S(D,Q){return function(oe,re){for(;!oe.eol();){if(oe.match(Q)){re.tokenize=b;break}oe.next()}return D}}function k(D){return function(Q,oe){for(var re;(re=Q.next())!=null;){if(re=="<")return oe.tokenize=k(D+1),oe.tokenize(Q,oe);if(re==">")if(D==1){oe.tokenize=b;break}else return oe.tokenize=k(D-1),oe.tokenize(Q,oe)}return"meta"}}function N(D){return D&&D.toLowerCase()}function P(D,Q,oe){this.prev=D.context,this.tagName=Q||"",this.indent=D.indented,this.startOfLine=oe,(d.doNotIndent.hasOwnProperty(Q)||D.context&&D.context.noIndent)&&(this.noIndent=!0)}function R(D){D.context&&(D.context=D.context.prev)}function F(D,Q){for(var oe;;){if(!D.context||(oe=D.context.tagName,!d.contextGrabbers.hasOwnProperty(N(oe))||!d.contextGrabbers[N(oe)].hasOwnProperty(N(Q))))return;R(D)}}function z(D,Q,oe){return D=="openTag"?(oe.tagStart=Q.column(),H):D=="closeTag"?V:z}function H(D,Q,oe){return D=="word"?(oe.tagName=Q.current(),x="tag",A):d.allowMissingTagName&&D=="endTag"?(x="tag bracket",A(D,Q,oe)):(x="error",H)}function V(D,Q,oe){if(D=="word"){var re=Q.current();return oe.context&&oe.context.tagName!=re&&d.implicitlyClosed.hasOwnProperty(N(oe.context.tagName))&&R(oe),oe.context&&oe.context.tagName==re||d.matchClosing===!1?(x="tag",W):(x="tag error",Z)}else return d.allowMissingTagName&&D=="endTag"?(x="tag bracket",W(D,Q,oe)):(x="error",Z)}function W(D,Q,oe){return D!="endTag"?(x="error",W):(R(oe),z)}function Z(D,Q,oe){return x="error",W(D,Q,oe)}function A(D,Q,oe){if(D=="word")return x="attribute",q;if(D=="endTag"||D=="selfcloseTag"){var re=oe.tagName,Te=oe.tagStart;return oe.tagName=oe.tagStart=null,D=="selfcloseTag"||d.autoSelfClosers.hasOwnProperty(N(re))?F(oe,re):(F(oe,re),oe.context=new P(oe,re,Te==oe.indented)),z}return x="error",A}function q(D,Q,oe){return D=="equals"?I:(d.allowMissing||(x="error"),A(D,Q,oe))}function I(D,Q,oe){return D=="string"?K:D=="word"&&d.allowUnquoted?(x="string",A):(x="error",A(D,Q,oe))}function K(D,Q,oe){return D=="string"?K:A(D,Q,oe)}return{startState:function(D){var Q={tokenize:b,state:z,indented:D||0,tagName:null,tagStart:null,context:null};return D!=null&&(Q.baseIndent=D),Q},token:function(D,Q){if(!Q.tagName&&D.sol()&&(Q.indented=D.indentation()),D.eatSpace())return null;y=null;var oe=Q.tokenize(D,Q);return(oe||y)&&oe!="comment"&&(x=null,Q.state=Q.state(y||oe,D,Q),x&&(oe=x=="error"?oe+" error":x)),oe},indent:function(D,Q,oe){var re=D.context;if(D.tokenize.isInAttribute)return D.tagStart==D.indented?D.stringStartCol+1:D.indented+c;if(re&&re.noIndent)return t.Pass;if(D.tokenize!=v&&D.tokenize!=b)return oe?oe.match(/^(\s*)/)[0].length:0;if(D.tagName)return d.multilineTagIndentPastTag!==!1?D.tagStart+D.tagName.length+2:D.tagStart+c*(d.multilineTagIndentFactor||1);if(d.alignCDATA&&/<!\[CDATA\[/.test(Q))return 0;var Te=Q&&/^<(\/)?([\w_:\.-]*)/.exec(Q);if(Te&&Te[1])for(;re;)if(re.tagName==Te[2]){re=re.prev;break}else if(d.implicitlyClosed.hasOwnProperty(N(re.tagName)))re=re.prev;else break;else if(Te)for(;re;){var G=d.contextGrabbers[N(re.tagName)];if(G&&G.hasOwnProperty(N(Te[2])))re=re.prev;else break}for(;re&&re.prev&&!re.startOfLine;)re=re.prev;return re?re.indent+c:D.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:d.htmlMode?"html":"xml",helperType:d.htmlMode?"html":"xml",skipAttribute:function(D){D.state==I&&(D.state=A)},xmlCurrentTag:function(D){return D.tagName?{name:D.tagName,close:D.type=="closeTag"}:null},xmlCurrentContext:function(D){for(var Q=[],oe=D.context;oe;oe=oe.prev)Q.push(oe.tagName);return Q.reverse()}}}),t.defineMIME("text/xml","xml"),t.defineMIME("application/xml","xml"),t.mimeModes.hasOwnProperty("text/html")||t.defineMIME("text/html",{name:"xml",htmlMode:!0})})}),7058:((a,r,e)=>{e.d(r,{A:()=>i});var t=e(9156),s=(function(){var l=function(c,d){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,m){h.__proto__=m}||function(h,m){for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(h[y]=m[y])},l(c,d)};return function(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");l(c,d);function h(){this.constructor=c}c.prototype=d===null?Object.create(d):(h.prototype=d.prototype,new h)}})(),o=(function(l){s(c,l);function c(d,h,m){var y=l.call(this,h,m)||this;return y._module=d,y}return Object.defineProperty(c.prototype,"module",{get:function(){return this._module},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"config",{get:function(){return this._module.config},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"em",{get:function(){return this._module.em},enumerable:!1,configurable:!0}),c})(t.Kx);const i=o}),179:((a,r,e)=>{e.d(r,{A:()=>l,F:()=>o});var t=e(7058),s=(function(){var c=function(d,h){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,y){m.__proto__=y}||function(m,y){for(var x in y)Object.prototype.hasOwnProperty.call(y,x)&&(m[x]=y[x])},c(d,h)};return function(d,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");c(d,h);function m(){this.constructor=d}d.prototype=h===null?Object.create(h):(m.prototype=h.prototype,new m)}})(),o;(function(c){c.Select="select",c.Hover="hover",c.Spacing="spacing",c.Target="target",c.Resize="resize"})(o||(o={}));var i=(function(c){s(d,c);function d(){return c!==null&&c.apply(this,arguments)||this}return d.prototype.defaults=function(){return{id:"",type:""}},Object.defineProperty(d.prototype,"type",{get:function(){return this.get("type")||""},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"component",{get:function(){var h,m=this.get("component");return m||((h=this.get("componentView"))===null||h===void 0?void 0:h.model)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"componentView",{get:function(){var h,m=this.get("componentView");return m||((h=this.get("component"))===null||h===void 0?void 0:h.getView())},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"el",{get:function(){var h;return(h=this.componentView)===null||h===void 0?void 0:h.el},enumerable:!1,configurable:!0}),d.prototype.getBoxRect=function(h){var m=this,y=m.el,x=m.em,b=x.Canvas.getCanvasView(),v=this.get("boxRect");return v||(y&&b?b.getElBoxRect(y,h):{x:0,y:0,width:0,height:0})},d.prototype.getStyle=function(h){h===void 0&&(h={});var m=h.boxRect||this.getBoxRect(h),y=m.width,x=m.height,b=m.x,v=m.y;return{width:"".concat(y,"px"),height:"".concat(x,"px"),top:"0",left:"0",position:"absolute",translate:"".concat(b,"px ").concat(v,"px")}},d.prototype.isType=function(h){return this.type===h},d})(t.A);const l=i}),1738:((a,r,e)=>{e.d(r,{A:()=>s});var t;(function(o){o.run="command:run",o.runCommand="command:run:",o.runBeforeCommand="command:run:before:",o.abort="command:abort:",o.stop="command:stop",o.stopCommand="command:stop:",o.stopBeforeCommand="command:stop:before:",o.call="command:call",o.callCommand="command:call:"})(t||(t={}));const s=t}),9484:((a,r,e)=>{e.r(r),e.d(r,{default:()=>t});const t={run:function(s){s.Components.clear(),s.Css.clear()}}}),9516:((a,r,e)=>{e.r(r),e.d(r,{default:()=>i});var t=e(5706),s=e(9966),o=e(6294);const i={run:function(l){(0,t.bindAll)(this,"onKeyUp","enableDragger","disableDragger"),this.editor=l,this.canvasModel=this.canvas.getCanvasView().model,this.toggleMove(1)},stop:function(l){this.toggleMove(),this.disableDragger()},onKeyUp:function(l){(0,o.Ch)(l)===" "&&this.editor.stopCommand(this.id)},enableDragger:function(l){this.toggleDragger(1,l)},disableDragger:function(l){this.toggleDragger(0,l)},toggleDragger:function(l,c){var d=this,h=d.canvasModel,m=d.em,y=this.dragger,x=l?"add":"remove";this.getCanvas().classList[x]("".concat(this.ppfx,"is__grabbing")),y||(y=new s.A({getPosition:function(){return{x:h.get("x"),y:h.get("y")}},setPosition:function(b){var v=b.x,j=b.y;h.set({x:v,y:j})},onStart:function(b,v){m.trigger("canvas:move:start",v)},onDrag:function(b,v){m.trigger("canvas:move",v)},onEnd:function(b,v){m.trigger("canvas:move:end",v)}}),this.dragger=y),l?y.start(c):y.stop()},toggleMove:function(l){var c=this.ppfx,d=l?"add":"remove",h=l?"on":"off",m={on:o.on,off:o.AU},y=this.getCanvas(),x=["".concat(c,"is__grab")];!l&&x.push("".concat(c,"is__grabbing")),x.forEach(function(b){return y.classList[d](b)}),m[h](document,"keyup",this.onKeyUp),m[h](y,"mousedown",this.enableDragger),m[h](document,"mouseup",this.disableDragger)}}}),9946:((a,r,e)=>{e.r(r),e.d(r,{default:()=>d,defineCommand:()=>l});var t=e(9156),s=e(1738),o=(function(){var h=function(m,y){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,b){x.__proto__=b}||function(x,b){for(var v in b)Object.prototype.hasOwnProperty.call(b,v)&&(x[v]=b[v])},h(m,y)};return function(m,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");h(m,y);function x(){this.constructor=m}m.prototype=y===null?Object.create(y):(x.prototype=y.prototype,new x)}})(),i=function(){return i=Object.assign||function(h){for(var m,y=1,x=arguments.length;y<x;y++){m=arguments[y];for(var b in m)Object.prototype.hasOwnProperty.call(m,b)&&(h[b]=m[b])}return h},i.apply(this,arguments)};function l(h){return h}var c=(function(h){o(m,h);function m(y){var x=h.call(this,0)||this;x.config=y||{},x.em=x.config.em||{};var b=x.config.stylePrefix;return x.pfx=b,x.ppfx=x.config.pStylePrefix,x.hoverClass="".concat(b,"hover"),x.badgeClass="".concat(b,"badge"),x.plhClass="".concat(b,"placeholder"),x.freezClass="".concat(x.ppfx,"freezed"),x.canvas=x.em.Canvas,x.init(x.config),x}return m.prototype.onFrameScroll=function(y){},m.prototype.getCanvas=function(){return this.canvas.getElement()},m.prototype.getCanvasBody=function(){return this.canvas.getBody()},m.prototype.getCanvasTools=function(){return this.canvas.getToolsEl()},m.prototype.offset=function(y){var x=y.getBoundingClientRect();return{top:x.top+y.ownerDocument.body.scrollTop,left:x.left+y.ownerDocument.body.scrollLeft}},m.prototype.init=function(y){},m.prototype.callRun=function(y,x){x===void 0&&(x={});var b=this.id;if(y.trigger("".concat(s.A.runBeforeCommand).concat(b),{options:x}),x.abort){y.trigger("".concat(s.A.abort).concat(b),{options:x});return}var v=x.sender||y,j=this.run(y,v,x),S={id:b,result:j,options:x},k=i(i({},S),{type:"run"});return this.noStop||(y.Commands.active[b]=j),y.trigger("".concat(s.A.runCommand).concat(b),S),y.trigger("".concat(s.A.callCommand).concat(b),k),y.trigger(s.A.run,S),y.trigger(s.A.call,k),j},m.prototype.callStop=function(y,x){x===void 0&&(x={});var b=this.id,v=x.sender||y;y.trigger("".concat(s.A.stopBeforeCommand).concat(b),{options:x});var j=this.stop(y,v,x),S={id:b,result:j,options:x},k=i(i({},S),{type:"stop"});return delete y.Commands.active[b],y.trigger("".concat(s.A.stopCommand).concat(b),S),y.trigger("".concat(s.A.callCommand).concat(b),k),y.trigger(s.A.stop,S),y.trigger(s.A.call,k),j},m.prototype.stopCommand=function(y){this.em.Commands.stop(this.id,y)},m.prototype.run=function(y,x,b){},m.prototype.stop=function(y,x,b){},m})(t.Kx);const d=c}),7801:((a,r,e)=>{e.r(r),e.d(r,{default:()=>i});var t=e(5706),s=function(l,c,d){if(d||arguments.length===2)for(var h=0,m=c.length,y;h<m;h++)(y||!(h in c))&&(y||(y=Array.prototype.slice.call(c,0,h)),y[h]=c[h]);return l.concat(y||Array.prototype.slice.call(c))},o={run:function(l,c,d){var h=this;d===void 0&&(d={});var m=[],y=d.component||l.getSelectedAll();return y=(0,t.isArray)(y)?s([],y,!0):[y],y.filter(Boolean).forEach(function(x){var b,v;if(!x.get("removable"))return h.em.logWarning("The element is not removable",{component:x});m.push(x);var j=((v=(b=x.delegate)===null||b===void 0?void 0:b.remove)===null||v===void 0?void 0:v.call(b,x))||x;j.remove()}),l.selectRemove(m),m}};const i=o}),4864:((a,r,e)=>{e.r(r),e.d(r,{default:()=>c});var t=e(5706),s=e(9966),o=e(1166),i=function(){return i=Object.assign||function(d){for(var h,m=1,y=arguments.length;m<y;m++){h=arguments[m];for(var x in h)Object.prototype.hasOwnProperty.call(h,x)&&(d[x]=h[x])}return d},i.apply(this,arguments)},l="dmode";const c={run:function(d,h,m){var y=this,x,b;if(m===void 0&&(m={}),(0,t.bindAll)(this,"setPosition","onStart","onDrag","onEnd","getPosition","getGuidesStatic","renderGuide","getGuidesTarget"),!m.target)throw new Error("Target option is required");var v=i({doc:(x=m.target.getEl())===null||x===void 0?void 0:x.ownerDocument,onStart:this.onStart,onEnd:this.onEnd,onDrag:this.onDrag,getPosition:this.getPosition,setPosition:this.setPosition,guidesStatic:function(){var S;return(S=y.guidesStatic)!==null&&S!==void 0?S:[]},guidesTarget:function(){var S;return(S=y.guidesTarget)!==null&&S!==void 0?S:[]}},(b=m.dragger)!==null&&b!==void 0?b:{});this.setupGuides(),this.opts=m,this.editor=d,this.em=d.getModel(),this.target=m.target,this.isTran=m.mode=="translate",this.guidesContainer=this.getGuidesContainer(),this.guidesTarget=this.getGuidesTarget(),this.guidesStatic=this.getGuidesStatic();var j=this.dragger;return j?j.setOptions(v):(j=new s.A(v),this.dragger=j),m.event&&j.start(m.event),this.toggleDrag(!0),this.em.trigger("".concat(l,":start"),this.getEventOpts()),j},getEventOpts:function(){var d,h,m=(h=(d=this.guidesTarget)===null||d===void 0?void 0:d.filter(function(y){return y.active}))!==null&&h!==void 0?h:[];return{mode:this.opts.mode,component:this.target,target:this.target,guidesTarget:this.guidesTarget,guidesStatic:this.guidesStatic,guidesMatched:this.getGuidesMatched(m),command:this}},stop:function(){this.toggleDrag()},setupGuides:function(){var d;((d=this.guides)!==null&&d!==void 0?d:[]).forEach(function(h){var m,y=h.guide;(m=y?.parentNode)===null||m===void 0||m.removeChild(y)}),this.guides=[]},getGuidesContainer:function(){var d=this,h,m,y,x,b=this.guidesEl;if(!b){var v=this,j=v.editor,S=v.em,k=v.opts,N=(h=j.getConfig().stylePrefix)!==null&&h!==void 0?h:"",P=document.createElement("div"),R=document.createElement("div"),F='<div class="'.concat(N,"guide-info__line ").concat(N,`danger-bg">
        <div class="`).concat(N,"guide-info__content ").concat(N,`danger-color"></div>
      </div>`);b=document.createElement("div"),b.className="".concat(N,"guides"),P.className="".concat(N,"guide-info ").concat(N,"guide-info__x"),R.className="".concat(N,"guide-info ").concat(N,"guide-info__y"),P.innerHTML=F,R.innerHTML=F,b.appendChild(P),b.appendChild(R),(m=j.Canvas.getGlobalToolsEl())===null||m===void 0||m.appendChild(b),this.guidesEl=b,this.elGuideInfoX=P,this.elGuideInfoY=R,this.elGuideInfoContentX=(y=P.querySelector(".".concat(N,"guide-info__content")))!==null&&y!==void 0?y:void 0,this.elGuideInfoContentY=(x=R.querySelector(".".concat(N,"guide-info__content")))!==null&&x!==void 0?x:void 0,S.on("canvas:update frame:scroll",(0,t.debounce)(function(){var z;d.updateGuides(),k.debug&&((z=d.guides)===null||z===void 0||z.forEach(function(H){return d.renderGuide(H)}))},200))}return b},getGuidesStatic:function(){var d=this,h=[],m=this.target.getEl(),y=m?.parentElement;return y?((0,t.each)(y.children,function(x){return h=h.concat(m!==x?d.getElementGuides(x):[])}),h.concat(this.getElementGuides(y))):[]},getGuidesTarget:function(){return this.getElementGuides(this.target.getEl())},updateGuides:function(d){var h=this,m,y,x,b=(m=d??this.guides)!==null&&m!==void 0?m:[];b.forEach(function(v){var j=v.origin,S=y===j?x:h.getElementPos(j);y=j,x=S,(0,t.each)(h.getGuidePosUpdate(v,S),function(k,N){v[N]=k}),v.originRect=S})},getGuidePosUpdate:function(d,h){var m={},y=h.top,x=h.height,b=h.left,v=h.width;switch(d.type){case"t":m.y=y;break;case"b":m.y=y+x;break;case"l":m.x=b;break;case"r":m.x=b+v;break;case"x":m.x=b+v/2;break;case"y":m.y=y+x/2;break}return m},renderGuide:function(d){var h,m;if(!this.opts.skipGuidesRender){var y=(h=d.guide)!==null&&h!==void 0?h:document.createElement("div"),x="px",b=d.active?2:1;if(y.style.cssText="position: absolute; background-color: ".concat(d.active?"green":"red",";"),!y.children.length){var v=document.createElement("div");v.style.cssText="position: absolute; color: red; padding: 5px; top: 0; left: 0;",y.appendChild(v)}return d.y?(y.style.width="100%",y.style.height="".concat(b).concat(x),y.style.top="".concat(d.y).concat(x),y.style.left="0"):(y.style.width="".concat(b).concat(x),y.style.height="100%",y.style.left="".concat(d.x).concat(x),y.style.top="0".concat(x)),!d.guide&&((m=this.guidesContainer)===null||m===void 0||m.appendChild(y)),y}},getElementPos:function(d){return this.editor.Canvas.getElementPos(d,{noScroll:1})},getElementGuides:function(d){var h=this,m=this.opts,y=d,x=this.getElementPos(d),b=(0,o.getComponentModel)(d),v=(0,o.getComponentView)(d),j=x.top,S=x.height,k=x.left,N=x.width,P=[{type:"t",y:j},{type:"b",y:j+S},{type:"l",x:k},{type:"r",x:k+N},{type:"x",x:k+N/2},{type:"y",y:j+S/2}],R=P.map(function(F){var z=m.debug?h.renderGuide(F):void 0;return i(i({},F),{component:b,componentView:v,componentEl:y,origin:y,componentElRect:x,originRect:x,guideEl:z,guide:z})});return R.forEach(function(F){var z;return(z=h.guides)===null||z===void 0?void 0:z.push(F)}),R},getTranslate:function(d,h){h===void 0&&(h="x");var m=0;return(d||"").split(" ").forEach(function(y){var x=y.trim(),b="translate".concat(h.toUpperCase(),"(");x.indexOf(b)===0&&(m=parseFloat(x.replace(b,"")))}),m},setTranslate:function(d,h,m){var y="translate".concat(h.toUpperCase(),"("),x="".concat(y).concat(m,")"),b=(d||"").split(" ").map(function(v){var j=v.trim();return j.indexOf(y)===0&&(v=x),v}).join(" ");return b.indexOf(y)<0&&(b+=" ".concat(x)),b},getPosition:function(){var d=this,h=d.target,m=d.isTran,y=h.getStyle(),x=y.transform,b=y.left,v=y.top,j=0,S=0;return m&&x?(j=this.getTranslate(x),S=this.getTranslate(x,"y")):(j=parseFloat(b??"0"),S=parseFloat(v??"0")),{x:j,y:S}},setPosition:function(d){var h,m,y=d.x,x=d.y,b=d.end,v=d.position,j=d.width,S=d.height,k=this,N=k.target,P=k.isTran,R=k.em,F=k.opts,z="px",H=!b,V="".concat(parseInt("".concat(y),10)).concat(z),W="".concat(parseInt("".concat(x),10)).concat(z),Z={};if(P){var A=(m=(h=N.getStyle())===null||h===void 0?void 0:h.transform)!==null&&m!==void 0?m:"";A=this.setTranslate(A,"x",V),A=this.setTranslate(A,"y",W),Z={transform:A,__p:H}}else{var q={position:v,width:j,height:S},I={left:V,top:W,__p:H};(0,t.keys)(q).forEach(function(K){var D=q[K];D&&(I[K]=D)}),Z=I}F.addStyle?F.addStyle({component:N,styles:Z,partial:!b}):N.addStyle(Z,{avoidStore:!b}),R.Styles.__emitCmpStyleUpdate(Z,{components:R.getSelected()})},_getDragData:function(){var d=this.target;return{target:d,parent:d.parent(),index:d.index()}},onStart:function(d){var h,m=this,y=m.target,x=m.editor,b=m.isTran,v=m.opts,j=x.Canvas,S=y.getStyle(),k="absolute",N=[k,"relative"];if((h=v.onStart)===null||h===void 0||h.call(v,this._getDragData()),!b){if(S.position!==k){var P=j.offset(y.getEl()),R=P.left,F=P.top,z=P.width,H=P.height,V=y.parent(),W=null;do{var Z=V?.getStyle(),A=Z?.position;A&&(W=N.indexOf(A)>=0?V:null),V=V?.parent()}while(V&&!W);if(v.center){var q=j.getMouseRelativeCanvas(d),I=q.x,K=q.y;R=I,F=K}else if(W){var D=j.offset(W.getEl());R=R-D.left,F=F-D.top}this.setPosition({x:R,y:F,width:"".concat(z,"px"),height:"".concat(H,"px"),position:k})}this.guidesStatic=this.getGuidesStatic()}},onDrag:function(d){var h=this,m,y,x=this,b=x.guidesTarget,v=x.opts;this.updateGuides(b),v.debug&&b?.forEach(function(j){return h.renderGuide(j)}),v.guidesInfo&&this.renderGuideInfo((m=b?.filter(function(j){return j.active}))!==null&&m!==void 0?m:[]),(y=v.onDrag)===null||y===void 0||y.call(v,this._getDragData()),this.opts.event=d,this.em.trigger("".concat(l,":move"),this.getEventOpts())},onEnd:function(d,h,m){var y,x=this,b=x.editor,v=x.opts,j=x.id;(y=v.onEnd)===null||y===void 0||y.call(v,d,m,i(i({event:d},m),this._getDragData())),b.stopCommand("".concat(j)),this.hideGuidesInfo(),this.em.trigger("".concat(l,":end"),this.getEventOpts())},hideGuidesInfo:function(){var d=this;["X","Y"].forEach(function(h){var m=d["elGuideInfo".concat(h)];m&&(m.style.display="none")})},renderGuideInfo:function(d){var h=this;d===void 0&&(d=[]),this.hideGuidesInfo();var m=this.getGuidesMatched(d);m.forEach(function(y){h.opts.skipGuidesRender||h.renderSingleGuideInfo(y),h.em.trigger("".concat(l,":active"),i(i({},h.getEventOpts()),y))})},renderSingleGuideInfo:function(d){var h=d.posFirst,m=d.posSecond,y=d.size,x=d.sizeRaw,b=d.guide,v=d.elGuideInfo,j=d.elGuideInfoCnt,S=(0,t.isUndefined)(b.x)?"y":"x",k=S==="y",N=v.style;N.display="",N[k?"top":"left"]="".concat(h,"px"),N[k?"left":"top"]="".concat(m,"px"),N[k?"width":"height"]="".concat(y,"px"),j.innerHTML="".concat(Math.round(x),"px")},getGuidesMatched:function(d){var h=this;d===void 0&&(d=[]);var m=this.guidesStatic,y=m===void 0?[]:m;return d.map(function(x){var b=x.origin,v=x.x,j=h.getElementPos(b),S=(0,t.isUndefined)(v)?"y":"x",k=S==="y",N=j[k?"left":"top"],P=j.rect[k?"left":"top"],R=k?N+j.width:N+j.height,F=k?P+j.rect.width:P+j.rect.height,z=y.filter(function(Ae){var qe,we={l:["r","x"],r:["l","x"],x:["l","r"],t:["b","y"],b:["t","y"],y:["t","b"]};return Ae.type===x.type||((qe=we[x.type])===null||qe===void 0?void 0:qe.includes(Ae.type))}).map(function(Ae){var qe=Ae.originRect,we=qe.left,Oe=qe.width,ze=qe.top,We=qe.height,pt=k?we:ze,Pt=k?we+Oe:ze+We;return{gap:Pt<N?N-Pt:pt-R,guide:Ae}}).filter(function(Ae){return Ae.gap>0}).sort(function(Ae,qe){return Ae.gap-qe.gap}).map(function(Ae){return Ae.guide}).filter(function(Ae){switch(x.type){case"l":case"r":case"x":return Math.abs(Ae.x-x.x)<1;case"t":case"b":case"y":return Math.abs(Ae.y-x.y)<1;default:return!1}}),H=z[0];if(H){var V=H.originRect,W=V.left,Z=V.width,A=V.top,q=V.height,I=V.rect,K=k?W<j.left:A<j.top,D=k?W:A,Q=k?I.left:I.top,oe=k?W+Z:A+q,re=k?I.left+I.width:I.top+I.height,Te=k?x.y:x.x,G=K?oe:R,Y=K?N-oe:D-R,Se=K?P-re:Q-F,fe=h["elGuideInfo".concat(S.toUpperCase())],Ee=h["elGuideInfoContent".concat(S.toUpperCase())];return{guide:x,guidesStatic:y,matched:H,posFirst:Te,posSecond:G,size:Y,sizeRaw:Se,elGuideInfo:fe,elGuideInfoCnt:Ee}}else return null}).filter(Boolean)},toggleDrag:function(d){var h=this,m=h.ppfx,y=h.editor,x=d?"add":"remove",b=["".concat(m,"is__grabbing")],v=y.Canvas,j=v.getBody();b.forEach(function(S){return j.classList[x](S)}),v[d?"startAutoscroll":"stopAutoscroll"]()},editor:void 0,em:void 0,opts:void 0,target:void 0}}),6134:((a,r,e)=>{e.r(r),e.d(r,{default:()=>t});const t={run:function(s){if(s.Canvas.hasFocus()){var o=[];s.getSelectedAll().forEach(function(i){var l=i.components(),c=l&&l.filter(function(d){return d.get("selectable")})[0];c&&o.push(c)}),o.length&&s.select(o)}}}}),914:((a,r,e)=>{e.r(r),e.d(r,{default:()=>t});const t={run:function(s,o,i){if(i===void 0&&(i={}),!(!s.Canvas.hasFocus()&&!i.force)){var l=[];s.getSelectedAll().forEach(function(c){for(var d=c.parent();d&&!d.get("selectable");)d=d.parent();d&&l.push(d)}),l.length&&s.select(l)}}}}),5547:((a,r,e)=>{e.r(r),e.d(r,{default:()=>t});const t={run:function(s){if(s.Canvas.hasFocus()){var o=[];s.getSelectedAll().forEach(function(i){var l=i.parent();if(l){var c=l.components().length,d=0,h=0,m;do d++,h=i.index()+d,m=h<=c?l.getChildAt(h):null;while(m&&!m.get("selectable"));o.push(m||i)}}),o.length&&s.select(o)}}}}),8655:((a,r,e)=>{e.r(r),e.d(r,{default:()=>t});const t={run:function(s){if(s.Canvas.hasFocus()){var o=[];s.getSelectedAll().forEach(function(i){var l=i.parent();if(l){var c=0,d=0,h;do c++,d=i.index()-c,h=d>=0?l.getChildAt(d):null;while(h&&!h.get("selectable"));o.push(h||i)}}),o.length&&s.select(o)}}}}),7640:((a,r,e)=>{e.r(r),e.d(r,{default:()=>s});var t=e(5706);const s={run:function(o,i,l){l===void 0&&(l={});var c=l.target,d=[];if(!c.get("styles"))return d;var h=c.get("type"),m=o.Pages.getAllWrappers(),y=(0,t.flatten)(m.map(function(b){return b.findType(h)})).length;if(!y){var x=o.CssComposer.getAll();d=x.filter(function(b){return b.get("group")==="cmp:".concat(h)}),x.remove(d)}return d}}}),5837:((a,r,e)=>{e.r(r),e.d(r,{default:()=>s});var t=function(o,i,l){if(l||arguments.length===2)for(var c=0,d=i.length,h;c<d;c++)(h||!(c in i))&&(h||(h=Array.prototype.slice.call(i,0,c)),h[c]=i[c]);return o.concat(h||Array.prototype.slice.call(i))};const s={run:function(o){var i=o.getModel(),l=t([],o.getSelectedAll(),!0).map(function(c){var d,h;return((h=(d=c.delegate)===null||d===void 0?void 0:d.copy)===null||h===void 0?void 0:h.call(d,c))||c}).filter(Boolean);l.length&&i.set("clipboard",l)}}}),6477:((a,r,e)=>{e.r(r),e.d(r,{default:()=>s});var t=e(6294);const s={run:function(o,i,l){var c=this;l===void 0&&(l={}),i&&i.set&&i.set("active",0);var d=o.getConfig(),h=o.Modal,m=d.stylePrefix;if(this.cm=o.CodeManager||null,!this.editors){var y=this.buildEditor("htmlmixed","hopscotch","HTML"),x=this.buildEditor("css","hopscotch","CSS");this.htmlEditor=y.model,this.cssEditor=x.model;var b=(0,t.a_)("div",{class:"".concat(m,"export-dl")});b.appendChild(y.el),b.appendChild(x.el),this.editors=b}h.open({title:d.textViewCode,content:this.editors}).getModel().once("change:open",function(){return o.stopCommand("".concat(c.id))}),this.htmlEditor.setContent(o.getHtml(l.optsHtml)),this.cssEditor.setContent(o.getCss(l.optsCss))},stop:function(o){var i=o.Modal;i&&i.close()},buildEditor:function(o,i,l){var c=this.em.CodeManager,d=c.createViewer({label:l,codeName:o,theme:i}),h=new c.EditorView({model:d,config:c.getConfig()}).render().el;return{model:d,el:h}}}}),1772:((a,r,e)=>{e.r(r),e.d(r,{default:()=>s});var t=e(5706);const s={isEnabled:function(){var o=document;return!!(o.fullscreenElement||o.webkitFullscreenElement||o.mozFullScreenElement)},enable:function(o){var i="";return o.requestFullscreen?o.requestFullscreen():o.webkitRequestFullscreen?(i="webkit",o.webkitRequestFullscreen()):o.mozRequestFullScreen?(i="moz",o.mozRequestFullScreen()):o.msRequestFullscreen&&o.msRequestFullscreen(),i},disable:function(){var o=document;this.isEnabled()&&(o.exitFullscreen?o.exitFullscreen():o.webkitExitFullscreen?o.webkitExitFullscreen():o.mozCancelFullScreen?o.mozCancelFullScreen():o.msExitFullscreen&&o.msExitFullscreen())},fsChanged:function(o){this.isEnabled()||(this.stopCommand({sender:this.sender}),document.removeEventListener("".concat(o||"","fullscreenchange"),this.fsChanged))},run:function(o,i,l){l===void 0&&(l={}),this.sender=i;var c=l.target,d=(0,t.isElement)(c)?c:document.querySelector(c),h=this.enable(d||o.getContainer());this.fsChanged=this.fsChanged.bind(this,h),document.addEventListener(h+"fullscreenchange",this.fsChanged)},stop:function(o,i){i&&i.set&&i.set("active",!1),this.disable()}}}),741:((a,r,e)=>{e.r(r),e.d(r,{default:()=>c});var t=e(5706),s=e(7774),o=e(6294),i=e(9317),l=e(1406);const c=(0,t.extend)({},l.default,i.default,{init:function(d){i.default.init.apply(this,arguments),(0,t.bindAll)(this,"initSorter","rollback","onEndMove"),this.opt=d,this.hoverClass=this.ppfx+"highlighter-warning",this.badgeClass=this.ppfx+"badge-warning",this.noSelClass=this.ppfx+"no-select"},enable:function(){for(var d=[],h=0;h<arguments.length;h++)d[h]=arguments[h];i.default.enable.apply(this,d),this.getBadgeEl().addClass(this.badgeClass),this.getHighlighterEl().addClass(this.hoverClass);var m=this.$wrapper;m.css("cursor","move"),m.on("mousedown",this.initSorter),m.addClass(this.noSelClass)},toggleClipboard:function(){},initSorter:function(d){var h=(0,s.default)(d.target).data("model"),m=h.get("draggable");m&&(this.cacheEl=null,this.startSelectPosition(d.target,this.frameEl.contentDocument),this.sorter.draggable=m,this.sorter.eventHandlers.legacyOnEndMove=this.onEndMove.bind(this),this.stopSelectComponent(),this.$wrapper.off("mousedown",this.initSorter),(0,o.on)(this.getContentWindow(),"keydown",this.rollback))},initSorterFromModel:function(d){var h=d.get("draggable");if(h){this.cacheEl=null;var m=d.view.el;this.startSelectPosition(m,this.frameEl.contentDocument),this.sorter.draggable=h,this.sorter.eventHandlers.legacyOnEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,o.on)(this.getContentWindow(),"keydown",this.rollback)}},initSorterFromModels:function(d){this.cacheEl=null;var h=d[d.length-1],m=this.em.getCurrentFrame(),y=h.getEl(m?.model),x=y.ownerDocument,b=d.map(function(v){var j;return(j=v?.view)===null||j===void 0?void 0:j.el});this.startSelectPosition(b,x,{onStart:this.onStart}),this.sorter.eventHandlers.legacyOnMoveClb=this.onDrag,this.sorter.eventHandlers.legacyOnEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,o.on)(this.getContentWindow(),"keydown",this.rollback)},onEndMoveFromModel:function(){(0,o.AU)(this.getContentWindow(),"keydown",this.rollback)},onEndMove:function(){this.enable(),(0,o.AU)(this.getContentWindow(),"keydown",this.rollback)},onSelect:function(d,h){},rollback:function(d,h){var m=d.which||d.keyCode;(m==27||h)&&this.sorter.cancelDrag()},getBadgeEl:function(){return this.$badge||(this.$badge=(0,s.default)(this.getBadge())),this.$badge},getHighlighterEl:function(){return this.$hl||(this.$hl=(0,s.default)(this.canvas.getHighlighter())),this.$hl},stop:function(){for(var d=[],h=0;h<arguments.length;h++)d[h]=arguments[h];i.default.stop.apply(this,d),this.getBadgeEl().removeClass(this.badgeClass),this.getHighlighterEl().removeClass(this.hoverClass);var m=this.$wrapper;m.css("cursor","").unbind().removeClass(this.noSelClass)}})}),2924:((a,r,e)=>{e.r(r),e.d(r,{default:()=>o});var t=e(5706),s=e(6294);const o={open:function(i){var l=this,c=this,d=c.editor,h=c.title,m=c.config,y=c.am,x=m.custom;if((0,t.isFunction)(x.open))return x.open(y.__customData());var b=d.Modal;b.open({title:h,content:i}).onceClose(function(){return d.stopCommand(l.id)})},close:function(){var i=this.config.custom;if((0,t.isFunction)(i.close))return i.close(this.am.__customData());var l=this.editor.Modal;l&&l.close()},run:function(i,l,c){c===void 0&&(c={});var d=i.AssetManager,h=d.getConfig(),m=c.types,y=m===void 0?[]:m,x=c.accept,b=c.select;if(this.title=c.modalTitle||i.t("assetManager.modalTitle")||"",this.editor=i,this.config=h,this.am=d,d.setTarget(c.target),d.onClick(c.onClick),d.onDblClick(c.onDblClick),d.onSelect(c.onSelect),d.__behaviour({select:b,types:y,options:c}),h.custom)this.rendered=this.rendered||(0,s.a_)("div"),this.rendered.className="".concat(h.stylePrefix,"custom-wrp"),d.__behaviour({container:this.rendered}),d.__trgCustom();else{if(!this.rendered||y){var v=d.getAll().filter(function(S){return S});y&&y.length&&(v=v.filter(function(S){return y.indexOf(S.get("type"))!==-1})),d.render(v),this.rendered=d.getContainer()}if(x){var j=this.rendered.querySelector("input#".concat(h.stylePrefix,"uploadFile"));j&&j.setAttribute("accept",x)}}return this.open(this.rendered),this},stop:function(i){this.editor=i,this.close(this.rendered)}}}),3963:((a,r,e)=>{e.r(r),e.d(r,{default:()=>o});var t=e(5706),s=e(6294);const o={open:function(){var i=this,l=i.container,c=i.editor,d=i.bm,h=i.config,m=h.custom,y=h.appendTo;if((0,t.isFunction)(m.open))return m.open(d.__customData());if(this.firstRender&&!y){var x="views-container",b=c.Panels,v=b.getPanel(x)||b.addPanel({id:x});v.set("appendContent",l).trigger("change:appendContent"),m||l.appendChild(d.render())}l&&(l.style.display="block")},close:function(){var i=this,l=i.container,c=i.config,d=c.custom;if((0,t.isFunction)(d.close))return d.close(this.bm.__customData());l&&(l.style.display="none")},run:function(i){var l=i.Blocks;this.config=l.getConfig(),this.firstRender=!this.container,this.container=this.container||(0,s.a_)("div"),this.editor=i,this.bm=l;var c=this.container;l.__behaviour({container:c}),this.config.custom&&l.__trgCustom(),this.open()},stop:function(){this.close()}}}),1479:((a,r,e)=>{e.r(r),e.d(r,{default:()=>t});const t={run:function(s){var o=s.LayerManager,i=s.Panels,l=o.getConfig();if(!l.appendTo){if(!this.layers){var c="views-container",d=document.createElement("div"),h=i.getPanel(c)||i.addPanel({id:c});l.custom?o.__trgCustom({container:d}):d.appendChild(o.render()),h.set("appendContent",d).trigger("change:appendContent"),this.layers=d}this.layers.style.display="block"}},stop:function(){var s=this.layers;s&&(s.style.display="none")}}}),3473:((a,r,e)=>{e.r(r),e.d(r,{default:()=>s});var t=e(7774);const s={run:function(o,i){if(this.sender=i,!this.$cnt){var l=o.getConfig(),c=o.Panels,d=o.DeviceManager,h=o.SelectorManager,m=o.StyleManager,y="change:appendContent",x=(0,t.default)("<div></div>"),b=(0,t.default)("<div></div>"),v=(0,t.default)("<div></div>"),j=(0,t.default)("<div></div>");if(this.$cnt=x,this.$cntInner=b,b.append(v),b.append(j),x.append(b),d&&l.showDevices){var S=c.addPanel({id:"devices-c"}),k=d.render();S.set("appendContent",k).trigger(y)}var N=h.getConfig();N.custom?h.__trgCustom({container:v.get(0)}):N.appendTo||v.append(h.render([])),this.sm=m;var P=m.getConfig(),R=P.stylePrefix;this.$header=(0,t.default)('<div class="'.concat(R,'header">').concat(o.t("styleManager.empty"),"</div>")),x.append(this.$header),P.custom?m.__trgCustom({container:j.get(0)}):P.appendTo||j.append(m.render());var F="views-container",z=c.getPanel(F)||c.addPanel({id:F});z.set("appendContent",x).trigger(y);var H=o.getModel();this.listenTo(H,m.events.target,this.toggleSm)}this.toggleSm()},toggleSm:function(){var o=this,i=o.sender,l=o.sm,c=o.$cntInner,d=o.$header;i&&i.get&&!i.get("active")||!l||(l.getSelected()?(c?.show(),d?.hide()):(c?.hide(),d?.show()))},stop:function(){var o,i;(o=this.$cntInner)===null||o===void 0||o.hide(),(i=this.$header)===null||i===void 0||i.hide()}}}),5054:((a,r,e)=>{e.r(r),e.d(r,{default:()=>s});var t=e(7774);const s={run:function(o,i){this.sender=i;var l=o.getModel(),c=o.Config,d=c.stylePrefix,h=o.TraitManager,m=h.getConfig(),y;if(!m.appendTo){if(!this.$cn){this.$cn=(0,t.default)("<div></div>"),this.$cn2=(0,t.default)("<div></div>"),this.$cn.append(this.$cn2),this.$header=(0,t.default)("<div>").append('<div class="'.concat(m.stylePrefix,'header">').concat(l.t("traitManager.empty"),"</div>")),this.$cn.append(this.$header),m.custom?h.__trgCustom({container:this.$cn2.get(0)}):(this.$cn2.append('<div class="'.concat(d,'traits-label">').concat(l.t("traitManager.label"),"</div>")),this.$cn2.append(h.render()));var x=o.Panels;x.getPanel("views-container")?y=x.getPanel("views-container"):y=x.addPanel({id:"views-container"}),y?.set("appendContent",this.$cn.get(0)).trigger("change:appendContent"),this.target=o.getModel(),this.listenTo(this.target,"component:toggled",this.toggleTm)}this.toggleTm()}},toggleTm:function(){var o=this.sender;o&&o.get&&!o.get("active")||(this.target.getSelectedAll().length===1?(this.$cn2.show(),this.$header.hide()):(this.$cn2.hide(),this.$header.show()))},stop:function(){this.$cn2&&this.$cn2.hide(),this.$header&&this.$header.hide()}}}),6979:((a,r,e)=>{e.r(r),e.d(r,{default:()=>s});var t=e(5706);const s={run:function(i,l,c){c===void 0&&(c={});var d=i.getModel(),h=d.get("clipboard"),m=i.getSelected();h?.length&&m&&(i.getSelectedAll().forEach(function(y){var x,b,v,j=((b=(x=y.delegate)===null||x===void 0?void 0:x.copy)===null||b===void 0?void 0:b.call(x,y))||y,S=j.collection,k;if(S){var N=j.index()+1,P={at:N,action:c.action||"paste-component"};(0,t.contains)(h,j)&&j.get("copyable")?k=S.add(j.clone(),P):k=o(i,h,j.parent(),P)}else{var R=(v=d.Pages.getSelected())===null||v===void 0?void 0:v.getMainComponent(),P={at:R?.components().length||0,action:c.action||"paste-component"};k=o(i,h,R,P)}k=(0,t.isArray)(k)?k:[k],k.forEach(function(F){return i.trigger("component:paste",F)})}),m.emitUpdate())}};function o(i,l,c,d){var h=l.filter(function(y){return y.get("copyable")}),m=h.filter(function(y){return i.Components.canMove(c,y).result});return c.components().add(m.map(function(y){return y.clone()}),d)}}),4457:((a,r,e)=>{e.r(r),e.d(r,{default:()=>i});var t=e(5706),s=function(l,c,d){if(d||arguments.length===2)for(var h=0,m=c.length,y;h<m;h++)(y||!(h in c))&&(y||(y=Array.prototype.slice.call(c,0,h)),y[h]=c[h]);return l.concat(y||Array.prototype.slice.call(c))},o="core:component-outline";const i={getPanels:function(l){return this.panels||(this.panels=l.Panels.getPanels()),this.panels},preventDrag:function(l){l.abort=1},tglEffects:function(l){var c=this.em,d=l?"on":"off";if(c){var h=c.Canvas,m=h.getBody(),y=h.getToolbarEl();y&&(y.style.display=l?"none":"");var x=m.querySelectorAll(".".concat(this.ppfx,"no-pointer"));(0,t.each)(x,function(b){return b.style.pointerEvents=l?"all":""}),c[d]("run:tlb-move:before",this.preventDrag)}},run:function(l,c){var d=this;this.sender=c,this.selected=s([],l.getSelectedAll(),!0),l.select(),this.shouldRunSwVisibility||(this.shouldRunSwVisibility=l.Commands.isActive(o)),this.shouldRunSwVisibility&&l.stopCommand(o),l.getModel().stopDefault();var h=this.getPanels(l),m=l.Canvas.getElement(),y=l.getEl(),x=l.Config.stylePrefix;if(!this.helper){var b=document.createElement("span");b.className="".concat(x,"off-prv fa fa-eye-slash"),y.appendChild(b),b.onclick=function(){return d.stopCommand()},this.helper=b}this.helper.style.display="inline-block",h.forEach(function(j){return j.set("visible",!1)});var v=m.style;v.width="100%",v.height="100%",v.top="0",v.left="0",v.padding="0",v.margin="0",l.refresh(),this.tglEffects(1)},stop:function(l){var c=this,d=c.sender,h=d===void 0?{}:d,m=c.selected;h.set&&h.set("active",0);var y=this.getPanels(l);this.shouldRunSwVisibility&&(l.runCommand(o),this.shouldRunSwVisibility=!1),l.getModel().runDefault(),y.forEach(function(b){return b.set("visible",!0)});var x=l.Canvas.getElement();x.setAttribute("style",""),m&&l.select(m),delete this.selected,this.helper&&(this.helper.style.display="none"),l.refresh(),this.tglEffects()}}}),5493:((a,r,e)=>{e.r(r),e.d(r,{ConvertUnitsToPx:()=>l,default:()=>c});var t=e(2225),s=e(1166),o=function(){return o=Object.assign||function(d){for(var h,m=1,y=arguments.length;m<y;m++){h=arguments[m];for(var x in h)Object.prototype.hasOwnProperty.call(h,x)&&(d[x]=h[x])}return d},o.apply(this,arguments)},i=function(d,h){var m={};for(var y in d)Object.prototype.hasOwnProperty.call(d,y)&&h.indexOf(y)<0&&(m[y]=d[y]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var x=0,y=Object.getOwnPropertySymbols(d);x<y.length;x++)h.indexOf(y[x])<0&&Object.prototype.propertyIsEnumerable.call(d,y[x])&&(m[y[x]]=d[y[x]]);return m},l;(function(d){d.pt="pt",d.pc="pc",d.in="in",d.cm="cm",d.mm="mm",d.vw="vw",d.vh="vh",d.vmin="vmin",d.vmax="vmax",d.svw="svw",d.lvw="lvw",d.dvw="dvw",d.svh="svh",d.lvh="lvh",d.dvh="dvh",d.perc="%"})(l||(l={}));const c={run:function(d,h,m){var y=this,x=d.Canvas,b=d.Utils,v=d.em,j=x.getCanvasView(),S=v.config.stylePrefix||"",k="".concat(S,"resizing"),N=m.onStart,P=N===void 0?function(){}:N,R=m.onMove,F=R===void 0?function(){}:R,z=m.onEnd,H=z===void 0?function(){}:z,V=m.updateTarget,W=V===void 0?function(){}:V,Z=m.el,A=m.componentView,q=m.component,I=m.skipPositionUpdate,K=i(m,["onStart","onMove","onEnd","updateTarget","el","componentView","component","skipPositionUpdate"]),D=Z||A?.el||q.getEl(),Q={component:q,el:D},oe,re,Te=function(Se,fe,Ee){var Ae=Ee.docs;Ae&&Ae.forEach(function(qe){var we=qe.body,Oe=we.className||"";we.className=(Se=="add"?"".concat(Oe," ").concat(k):Oe.replace(k,"")).trim()})},G=o(o({appendTo:x.getResizerEl(),prefix:d.getConfig().stylePrefix,posFetcher:j.getElementPos.bind(j),mousePosFetcher:x.getMouseRelativePos.bind(x),docs:[document],updateOnMove:!0,skipUnitAdjustments:!0,onStart:function(Se,fe){var Ee;P(Se,fe);var Ae=fe.el,qe=fe.config,we=fe.resizer,Oe=qe.keyHeight,ze=qe.keyWidth,We=qe.currentUnit,pt=qe.keepAutoHeight,Pt=qe.keepAutoWidth;Te("add",Se,fe),oe=v.Styles.getModelToStyle(q),re=getComputedStyle(Ae);var ee=oe.getStyle(),Ne=o({},we.startDim),Ie=ee[ze];qe.autoWidth=Pt&&Ie==="auto",isNaN(parseFloat(Ie))&&(Ie=re[ze]);var ne=ee[Oe];qe.autoHeight=pt&&ne==="auto",isNaN(parseFloat(ne))&&(ne=re[Oe]);var M=parseFloat(Ie),U=parseFloat(ne),J=(0,s.getUnitFromValue)(Ie),ce=(0,s.getUnitFromValue)(ne);We&&(qe.unitWidth=J,qe.unitHeight=ce);var ue=o(o({},Q),{event:Se,rect:Ne,model:oe,modelWidth:{value:Ie,property:ze,number:M,unit:J},modelHeight:{value:ne,property:Oe,number:U,unit:ce}});d.trigger(t.I.resizeStart,ue),d.trigger(t.I.resize,o(o({},ue),{type:"start"})),(Ee=m.afterStart)===null||Ee===void 0||Ee.call(m)},onMove:function(Se,fe){F(Se,fe);var Ee=fe.resizer,Ae=o(o({},Q),{event:Se,delta:Ee.delta,pointer:Ee.currentPos,rect:Ee.rectDim});d.trigger(t.I.resizeStart,Ae),d.trigger(t.I.resize,o(o({},Ae),{type:"move"}))},onEnd:function(Se,fe){var Ee;H(Se,fe),Te("remove",Se,fe);var Ae=fe.resizer,qe=o(o({},Q),{event:Se,rect:Ae.rectDim,moved:Ae.moved});d.trigger(t.I.resizeEnd,qe),d.trigger(t.I.resize,o(o({},Q),{type:"end"})),(Ee=m.afterEnd)===null||Ee===void 0||Ee.call(m)},updateTarget:function(Se,fe,Ee){var Ae;if(W(Se,fe,Ee),!!oe){var qe=Ee.store,we=Ee.selectedHandler,Oe=Ee.config,ze=Ee.resizer,We=Ee.event,pt=Oe.keyHeight,Pt=Oe.keyWidth,ee=Oe.autoHeight,Ne=Oe.autoWidth,Ie=Oe.unitWidth,ne=Oe.unitHeight,M=["tc","bc"].indexOf(we)>=0,U=["cl","cr"].indexOf(we)>=0,J=!qe,ce={};if(!M){var ue=((Ae=x.getBody())===null||Ae===void 0?void 0:Ae.offsetWidth)||0,xe=fe.w<ue?fe.w:ue;ce[Pt]=Ne?"auto":y.convertPxToUnit({el:D,elComputedStyle:re,valuePx:xe,unit:Ie})}U||(ce[pt]=ee?"auto":y.convertPxToUnit({el:D,elComputedStyle:re,valuePx:fe.h,unit:ne,isHeight:!0})),!I&&v.getDragMode(q)&&(ce.top="".concat(fe.t,"px"),ce.left="".concat(fe.l,"px"));var he=!1,se=function(Ue){he=!0;var Ge=o(o({},Ue||ce),{__p:J});oe.addStyle(Ge,{avoidStore:J}),v.Styles.__emitCmpStyleUpdate(Ge,{components:q})},Le=o(o({},Q),{rect:fe,partial:J,event:We,style:ce,updateStyle:se,convertPxToUnit:function(Ue){return y.convertPxToUnit(o({el:D,elComputedStyle:re},Ue))},delta:ze.delta,pointer:ze.currentPos});d.trigger(t.I.resizeUpdate,Le),!he&&se()}}},K),m.options),Y=this.canvasResizer;return Y||(this.canvasResizer=new b.Resizer(G),Y=this.canvasResizer),Y.setOptions(G,!0),Y.blur(),Y.focus(D),Y},stop:function(){var d;(d=this.canvasResizer)===null||d===void 0||d.blur()},convertPxToUnit:function(d){var h=d.el,m=d.valuePx,y=d.unit,x=d.dpi,b=x===void 0?96:x,v=d.roundDecimals,j=v===void 0?3:v,S=d.isHeight,k=d.elComputedStyle,N=h.ownerDocument.defaultView,P=N?.innerWidth||1,R=window.innerHeight||1,F=m,z=y;switch(y){case l.pt:F=m*(72/b);break;case l.pc:F=m*(6/b);break;case l.in:F=m/b;break;case l.cm:F=m/(b/2.54);break;case l.mm:F=m/(b/25.4);break;case l.vw:F=m/P*100;break;case l.vh:F=m/R*100;break;case l.vmin:{var H=Math.min(P,R);F=m/H*100;break}case l.vmax:{var V=Math.max(P,R);F=m/V*100;break}case l.perc:{var W=h.parentElement,Z=h.offsetParent,A=k?.position==="absolute"?Z:W,q=A?.offsetWidth||1,I=A?.offsetHeight||1,K=S?I:q;F=m/K*100;break}case l.svw:case l.lvw:case l.dvw:F=m/P*100;break;case l.svh:case l.lvh:case l.dvh:F=m/R*100;break;default:z="px"}return"".concat(+F.toFixed(j)).concat(z)}}}),9317:((a,r,e)=>{e.r(r),e.d(r,{default:()=>V});var t=e(5706),s=e(179),o=e(9156),i=(function(){var W=function(Z,A){return W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,I){q.__proto__=I}||function(q,I){for(var K in I)Object.prototype.hasOwnProperty.call(I,K)&&(q[K]=I[K])},W(Z,A)};return function(Z,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");W(Z,A);function q(){this.constructor=Z}Z.prototype=A===null?Object.create(A):(q.prototype=A.prototype,new q)}})(),l=(function(W){i(Z,W);function Z(){return W!==null&&W.apply(this,arguments)||this}return Z.prototype.defaults=function(){return{command:"",attributes:{}}},Z})(o.Kx);const c=l;var d=(function(){var W=function(Z,A){return W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,I){q.__proto__=I}||function(q,I){for(var K in I)Object.prototype.hasOwnProperty.call(I,K)&&(q[K]=I[K])},W(Z,A)};return function(Z,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");W(Z,A);function q(){this.constructor=Z}Z.prototype=A===null?Object.create(A):(q.prototype=A.prototype,new q)}})(),h=(function(W){d(Z,W);function Z(){return W!==null&&W.apply(this,arguments)||this}return Z})(o.pM);const m=h;h.prototype.model=c;var y=e(2225),x=e(8242),b=(function(){var W=function(Z,A){return W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,I){q.__proto__=I}||function(q,I){for(var K in I)Object.prototype.hasOwnProperty.call(I,K)&&(q[K]=I[K])},W(Z,A)};return function(Z,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");W(Z,A);function q(){this.constructor=Z}Z.prototype=A===null?Object.create(A):(q.prototype=A.prototype,new q)}})(),v=function(){return v=Object.assign||function(W){for(var Z,A=1,q=arguments.length;A<q;A++){Z=arguments[A];for(var I in Z)Object.prototype.hasOwnProperty.call(Z,I)&&(W[I]=Z[I])}return W},v.apply(this,arguments)},j=(function(W){b(Z,W);function Z(A){var q=W.call(this,A)||this;return q.em=A.config.em,q}return Z.prototype.events=function(){return this.model.get("events")||{mousedown:"handleClick"}},Z.prototype.attributes=function(){return this.model.get("attributes")},Z.prototype.handleClick=function(A){A.preventDefault(),A.stopPropagation();var q=this.em,I=q.Canvas.getFrameEl().getBoundingClientRect(),K=I.left,D=I.top,Q=v(v({},A),{clientX:A.clientX-K,clientY:A.clientY-D});q.trigger("toolbar:run:before",{event:Q}),this.execCommand(Q)},Z.prototype.execCommand=function(A){var q=this,I=q.em,K=q.model,D={event:A},Q=K.get("command"),oe=I.Editor;(0,t.isFunction)(Q)&&Q(oe,null,D),(0,t.isString)(Q)&&oe.runCommand(Q,D)},Z.prototype.render=function(){var A=this,q=A.em,I=A.$el,K=A.model,D=K.get("id"),Q=K.get("label"),oe=q.getConfig().stylePrefix;return I.addClass("".concat(oe,"toolbar-item")),D&&I.addClass("".concat(oe,"toolbar-item__").concat(D)),Q&&I.append(Q),this},Z})(o.Ss);const S=j;var k=(function(){var W=function(Z,A){return W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,I){q.__proto__=I}||function(q,I){for(var K in I)Object.prototype.hasOwnProperty.call(I,K)&&(q[K]=I[K])},W(Z,A)};return function(Z,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");W(Z,A);function q(){this.constructor=Z}Z.prototype=A===null?Object.create(A):(q.prototype=A.prototype,new q)}})(),N=(function(W){k(Z,W);function Z(A){var q=W.call(this,A)||this,I=A.em;return q.em=I,q.config={em:I},q.listenTo(q.collection,"reset",q.render),q}return Z.prototype.onRender=function(){var A=this.em.config.stylePrefix;this.el.className="".concat(A,"toolbar-items")},Z})(x.A);const P=N;N.prototype.itemView=S;var R=e(6294),F=e(1166),z=function(){return z=Object.assign||function(W){for(var Z,A=1,q=arguments.length;A<q;A++){Z=arguments[A];for(var I in Z)Object.prototype.hasOwnProperty.call(Z,I)&&(W[I]=Z[I])}return W},z.apply(this,arguments)},H;const V={activeResizer:!1,init:function(){this.onSelect=(0,t.debounce)(this.onSelect,0),(0,t.bindAll)(this,"onHover","onOut","onClick","onCanvasScroll","onFrameScroll","onFrameResize","onFrameUpdated","onContainerChange")},enable:function(){this.frameOff=this.canvasOff=this.adjScroll=null,this.startSelectComponent(),H=!0},startSelectComponent:function(){this.toggleSelectComponent(1),this.em.getSelected()&&this.onSelect()},stopSelectComponent:function(){this.toggleSelectComponent()},toggleSelectComponent:function(W){var Z=this,A=this,q=A.em,I=A.canvas,K=I.getCanvasView().el,D=q.getConfig().listenToEl,Q=q.getContainer().parentNode,oe=W?"on":"off",re={on:R.on,off:R.AU},Te=y.I.update;!D.length&&Q&&D.push(Q);var G=function(Y,Se,fe){re[oe](fe,"scroll",Z.onCanvasScroll,!0),re[oe](Se,"mouseover",Z.onHover),re[oe](Se,"mouseleave",Z.onOut),re[oe](Se,"click",Z.onClick),re[oe](Y,"scroll",Z.onFrameScroll,!0),re[oe](Y,"resize",Z.onFrameResize)};re[oe](window,"resize",this.onFrameUpdated),re[oe](D,"scroll",this.onContainerChange),q[oe]("component:toggled ".concat(Te," undo redo"),this.onSelect,this),q[oe]("change:componentHovered",this.onHovered,this),q[oe]("".concat(y.I.resize," styleable:change ").concat(y.I.input),this.updateGlobalPos,this),q[oe]("".concat(Te,":toolbar"),this._upToolbar,this),q[oe]("frame:updated",this.onFrameUpdated,this),q[oe]("canvas:updateTools",this.onFrameUpdated,this),q[oe](q.Canvas.events.refresh,this.updateAttached,this),q.Canvas.getFrames().forEach(function(Y){var Se=Y.view,fe=Se?.getWindow();fe&&G(fe,Se?.getBody(),K)})},onHover:function(W){W.stopPropagation();var Z=this.em,A=W.target,q=(0,F.getComponentView)(A),I=q?.frameView,K=q?.model;if(!K)for(var D=A.parentNode;!K&&D&&!(0,R.ZQ)(D);)K=(0,F.getComponentModel)(D),D=D.parentNode;this.currentDoc=A.ownerDocument,Z.setHovered(K,{useValid:!0}),I&&Z.setCurrentFrame(I)},onFrameUpdated:function(){this.updateLocalPos(),this.updateGlobalPos()},onHovered:function(W,Z){var A=this,q,I={};Z?(q=Z.views)===null||q===void 0||q.forEach(function(K){var D=K.el,Q=A.getElementPos(D);I={el:D,pos:Q,component:Z,view:K},D.ownerDocument===A.currentDoc&&(A.elHovered=I),A.updateToolsLocal(I)}):(this.currentDoc=null,this.elHovered=0,this.updateToolsLocal(),this.canvas.getFrames().forEach(function(K){var D=K.view,Q=D&&D.getToolsEl();Q&&A.toggleToolsEl(0,0,{el:Q})}))},onSelect:function(){var W=this.em,Z=W.getSelected(),A=W.getCurrentFrame(),q=Z&&Z.getView(A?.model),I=q?.el,K={};if(I&&(0,R.zN)(I)){var D=this.getElementPos(I);K={el:I,pos:D,component:Z,view:q}}this.elSelected=K,this.updateToolsGlobal(),this.updateLocalPos(K),this.initResize(Z)},updateGlobalPos:function(){var W=this.getElSelected();W.el&&(W.pos=this.getElementPos(W.el),this.updateToolsGlobal())},updateLocalPos:function(W){var Z=this.getElHovered();Z.el&&(Z.pos=this.getElementPos(Z.el),this.updateToolsLocal(W))},getElHovered:function(){return this.elHovered||{}},getElSelected:function(){return this.elSelected||{}},onOut:function(){this.em.setHovered()},toggleToolsEl:function(W,Z,A){A===void 0&&(A={});var q=A.el||this.canvas.getToolsEl(Z);return q&&(q.style.display=W?"":"none"),q||{}},showElementOffset:function(W,Z,A){A===void 0&&(A={}),H&&this.editor.runCommand("show-offset",{el:W,elPos:Z,view:A.view,force:1,top:0,left:0})},hideElementOffset:function(W){this.editor.stopCommand("show-offset",{view:W})},showFixedElementOffset:function(W,Z){this.editor.runCommand("show-offset",{el:W,elPos:Z,state:"Fixed"})},hideFixedElementOffset:function(){this.editor&&this.editor.stopCommand("show-offset",{state:"Fixed"})},hideHighlighter:function(W){this.canvas.getHighlighter(W).style.opacity=0},onClick:function(W){W.stopPropagation(),W.preventDefault();var Z=this.em;if(Z.get("_cmpDrag"))return Z.set("_cmpDrag");var A=W.target,q=(0,F.getComponentModel)(A);if(!q)for(var I=A.parentNode;!q&&I&&!(0,R.ZQ)(I);)q=(0,F.getComponentModel)(I),I=I.parentNode;if(q){if(Z.isEditing()&&(!q.get("textable")&&q.isChildOf("text")||Z.getEditing()!==q))return;this.select(q,W)}},select:function(W,Z){if(W){var A=this.em;A.setSelected(W,{event:Z,useValid:!0}),this.initResize(A.getSelected())}},updateBadge:function(W,Z,A){A===void 0&&(A={});var q=this.canvas,I=(0,F.getComponentModel)(W),K=this.getBadge(A),D=K.style;if(!I||!I.get("badgable")){D.display="none";return}if(!A.posOnly){var Q=this.canvas.getConfig(),oe=I.getIcon(),re=Q.pStylePrefix||"",Te="".concat(re,"badge"),G=Q.customBadgeLabel,Y="".concat(oe?'<div class="'.concat(Te,'__icon">').concat(oe,"</div>"):"",`
        <div class="`).concat(Te,'__name">').concat(I.getName(),"</div>");K.innerHTML=G?G(I):Y}var Se="px";D.display="block";var fe=q.getTargetToElementFixed(W,K,{pos:Z}),Ee=fe.top,Ae=A.leftOff<0?-A.leftOff:0;D.top=Ee+Se,D.left=Ae+Se},showHighlighter:function(W){this.canvas.getHighlighter(W).style.opacity=""},initResize:function(W){var Z=this,A,q=this,I=q.em,K=q.canvas,D=I.Editor,Q=!(0,t.isElement)(W)&&(0,R.GW)(W)?W:I.getSelected(),oe=(A=Q?.get)===null||A===void 0?void 0:A.call(Q,"resizable"),re=s.F.Resize,Te=K.hasCustomSpot(re);K.removeSpots({type:re});var G={component:Q,hasCustomResize:Te,resizable:oe};Q&&I.trigger(y.I.resizeInit,G);var Y=G.resizable;if(Q&&Y){K.addSpot({type:re,component:Q});var Se=(0,t.isElement)(W)?W:Q.getEl(),fe=(0,F.isObject)(Y)?Y:{};if(Te||!Se||this.activeResizer)return;this.resizer=D.runCommand("resize",z(z({},fe),{el:Se,component:Q,force:!0,afterStart:function(){H=!1,Z.activeResizer=!0},afterEnd:function(){H=!0,Z.activeResizer=!1}}))}else{if(Te)return;D.stopCommand("resize"),this.resizer=null}},updateToolbar:function(W){var Z=this.canvas,A=this.config.em,q=W===A?A.getSelected():W,I=Z.getToolbarEl(),K=I.style,D=q.get("toolbar"),Q=A.config.showToolbar,oe=!Z.hasCustomSpot(s.F.Select);if(q&&Q&&D&&D.length&&oe){if(K.display="",!this.toolbar){I.innerHTML="",this.toolbar=new m(D);var re=new P({collection:this.toolbar,em:A});I.appendChild(re.render().el)}this.toolbar.reset(D),K.top="-100px",K.left="0"}else K.display="none"},updateToolbarPos:function(W){var Z="px",A=this.canvas.getToolbarEl().style;A.top="".concat(W.top).concat(Z),A.left="".concat(W.left).concat(Z),A.opacity=""},getCanvasPosition:function(){return this.canvas.getCanvasView().getPosition()},getBadge:function(W){return W===void 0&&(W={}),this.canvas.getBadgeEl(W.view)},onCanvasScroll:function(W){this.onFrameScroll(W),this.onContainerChange()},onFrameScroll:function(){this.updateTools(),this.canvas.refreshSpots()},onFrameResize:function(){this.canvas.refresh({all:!0})},updateTools:function(){this.updateLocalPos(),this.updateGlobalPos()},isCompSelected:function(W){return W&&W.get("status")==="selected"},updateToolsLocal:function(W){var Z=this.em.getConfig(),A=W||this.getElHovered(),q=A.el,I=A.pos,K=A.view,D=A.component;if(!q){this.lastHovered=0;return}var Q=D.get("hoverable"),oe=this.lastHovered!==q,re=oe?{}:{posOnly:1},Te=this.canvas.hasCustomSpot(s.F.Hover);oe&&Q&&(this.lastHovered=q,Te?this.hideHighlighter(K):this.showHighlighter(K),this.showElementOffset(q,I,{view:K})),this.isCompSelected(D)&&(this.hideHighlighter(K),!Z.showOffsetsSelected&&this.hideElementOffset(K));var G="px",Y=this.toggleToolsEl(1,K),Se=Y.style,fe=this.canvas.canvasRectOffset(q,I),Ee=fe.top,Ae=fe.left;!Te&&this.updateBadge(q,I,z(z({},re),{view:K,topOff:Ee,leftOff:Ae})),Se.top=Ee+G,Se.left=Ae+G,Se.width=I.width+G,Se.height=I.height+G,this._trgToolUp("local",{component:D,el:Y,top:Ee,left:Ae,width:I.width,height:I.height})},_upToolbar:(0,t.debounce)(function(){this.updateToolsGlobal({force:1})},0),_trgToolUp:function(W,Z){Z===void 0&&(Z={}),this.em.trigger("canvas:tools:update",z({type:W},Z))},updateToolsGlobal:function(W){W===void 0&&(W={});var Z=this.getElSelected(),A=Z.el,q=Z.pos,I=Z.component;if(!A){this.toggleToolsEl(),this.lastSelected=0;return}var K=this.canvas,D=this.lastSelected!==A;(D||W.force)&&(this.lastSelected=A,this.updateToolbar(I));var Q="px",oe=this.toggleToolsEl(1),re=oe.style,Te=K.getTargetToElementFixed(A,K.getToolbarEl(),{pos:q}),G=Te.canvasOffsetTop,Y=Te.canvasOffsetLeft;re.top=G+Q,re.left=Y+Q,re.width=q.width+Q,re.height=q.height+Q,this.updateToolbarPos({top:Te.top,left:Te.left}),this._trgToolUp("global",{component:I,el:oe,top:G,left:Y,width:q.width,height:q.height})},updateAttached:(0,t.debounce)(function(){this.updateGlobalPos()},0),onContainerChange:(0,t.debounce)(function(){this.em.refreshCanvas()},150),getElementPos:function(W){return this.canvas.getCanvasView().getElementPos(W,{noScroll:!0})},hideBadge:function(){this.getBadge().style.display="none"},cleanPrevious:function(W){W&&W.set({status:"",state:""})},getContentWindow:function(){return this.canvas.getWindow()},run:function(W){(0,F.hasWin)()&&(this.editor=W&&W.get("Editor"),this.enable())},stop:function(W,Z,A){if(A===void 0&&(A={}),!!(0,F.hasWin)()){var q=this,I=q.em,K=q.editor;this.onHovered(),this.stopSelectComponent(),!A.preserveSelected&&I.setSelected(),this.toggleToolsEl(),this.updateAttached.cancel(),K&&K.stopCommand("resize")}}}}),1406:((a,r,e)=>{e.r(r),e.d(r,{default:()=>i});var t=e(7774),s=e(1447),o=e(8433);const i={startSelectPosition:function(l,c,d){d===void 0&&(d={}),this.isPointed=!1;var h=this.em.Utils,m=l[0].ownerDocument.body;h&&(this.sorter=new h.ComponentSorter({em:this.em,treeClass:s.A,containerContext:{container:m,containerSel:"*",itemSel:"*",pfx:this.ppfx,document:c,placeholderElement:this.canvas.getPlacerEl()},positionOptions:{windowMargin:1,canvasRelative:!0},dragBehavior:{dragDirection:o.A.BothDirections,nested:!0}})),d.onStart&&(this.sorter.eventHandlers.legacyOnStartSort=d.onStart),l&&l.length>0&&this.sorter.startSort(l.map(function(y){return{element:y}}))},getOffsetDim:function(){var l=this.offset(this.canvas.getFrameEl()),c=this.offset(this.canvas.getElement()),d=l.top-c.top,h=l.left-c.left;return{top:d,left:h}},stopSelectPosition:function(){this.posTargetCollection=null,this.posIndex=this.posMethod=="after"&&this.cDim.length!==0?this.posIndex+1:this.posIndex,this.sorter&&this.sorter.cancelDrag(),this.cDim&&(this.posIsLastEl=this.cDim.length!==0&&this.posMethod=="after"&&this.posIndex==this.cDim.length,this.posTargetEl=this.cDim.length===0?(0,t.default)(this.outsideElem):!this.posIsLastEl&&this.cDim[this.posIndex]?(0,t.default)(this.cDim[this.posIndex][5]).parent():(0,t.default)(this.outsideElem),this.posTargetModel=this.posTargetEl.data("model"),this.posTargetCollection=this.posTargetEl.data("model-comp"))},enable:function(){this.startSelectPosition()},nearFloat:function(l,c,d){var h=l||0,m=c||"before",y=d.length,x=y!==0&&m=="after"&&h==y;return y!==0&&(!x&&!d[h][4]||d[h-1]&&!d[h-1][4]||x&&!d[h-1][4])?1:0},run:function(){this.enable()},stop:function(){this.stopSelectPosition(),this.$wrapper.css("cursor",""),this.$wrapper.unbind()}}}),9395:((a,r,e)=>{e.r(r),e.d(r,{default:()=>l});var t=e(5706),s=e(179),o=e(7774),i=function(){return i=Object.assign||function(c){for(var d,h=1,m=arguments.length;h<m;h++){d=arguments[h];for(var y in d)Object.prototype.hasOwnProperty.call(d,y)&&(c[y]=d[y])}return c},i.apply(this,arguments)};const l={getOffsetMethod:function(c){var d=c||"";return"get"+d+"OffsetViewerEl"},run:function(c,d,h){var m=this.canvas,y=h||{},x=y.state||"",b=c.getConfig(),v=this.em.getZoomDecimal(),j=y.el;if(!b.showOffsets||!(j instanceof HTMLElement)||!b.showOffsetsSelected&&x=="Fixed"){c.stopCommand("".concat(this.id),h);return}if(!m.hasCustomSpot(s.F.Spacing)){var S=i({},y.elPos||m.getElementPos(j));(0,t.isUndefined)(y.top)||(S.top=y.top),(0,t.isUndefined)(y.left)||(S.left=y.left);var k=window.getComputedStyle(j),N=this.ppfx,P=x+"State",R=this.getOffsetMethod(x),F=m[R](h.view);F.style.opacity="";var z=this["marginT"+x],H=this["marginB"+x],V=this["marginL"+x],W=this["marginR"+x],Z=this["padT"+x],A=this["padB"+x],q=this["padL"+x],I=this["padR"+x];if(F.childNodes.length&&(this[P]="1",z=F.querySelector("[data-offset-m-t]"),H=F.querySelector("[data-offset-m-b]"),V=F.querySelector("[data-offset-m-l]"),W=F.querySelector("[data-offset-m-r]"),Z=F.querySelector("[data-offset-p-t]"),A=F.querySelector("[data-offset-p-b]"),q=F.querySelector("[data-offset-p-l]"),I=F.querySelector("[data-offset-p-r]")),!this[P]){var K=x.toLowerCase(),D=K+"margin-v",Q=K+"padding-v",oe=(0,o.default)('<div class="'.concat(N,'marginName">')).get(0),re=(0,o.default)('<div class="'.concat(N,'paddingName">')).get(0),Te=N+D+"-el",G=N+Q+"-el",Y="".concat(Te," ").concat(N+D),Se="".concat(G," ").concat(N+Q);z=(0,o.default)('<div class="'.concat(Y,'-top"></div>')).get(0),H=(0,o.default)('<div class="'.concat(Y,'-bottom"></div>')).get(0),V=(0,o.default)('<div class="'.concat(Y,'-left"></div>')).get(0),W=(0,o.default)('<div class="'.concat(Y,'-right"></div>')).get(0),Z=(0,o.default)('<div class="'.concat(Se,'-top"></div>')).get(0),A=(0,o.default)('<div class="'.concat(Se,'-bottom"></div>')).get(0),q=(0,o.default)('<div class="'.concat(Se,'-left"></div>')).get(0),I=(0,o.default)('<div class="'.concat(Se,'-right"></div>')).get(0),this["marginT"+x]=z,this["marginB"+x]=H,this["marginL"+x]=V,this["marginR"+x]=W,this["padT"+x]=Z,this["padB"+x]=A,this["padL"+x]=q,this["padR"+x]=I,oe.appendChild(z),oe.appendChild(H),oe.appendChild(V),oe.appendChild(W),re.appendChild(Z),re.appendChild(A),re.appendChild(q),re.appendChild(I),F.appendChild(oe),F.appendChild(re),this[P]="1"}var fe="px",Ee=parseFloat(k.marginLeft.replace(fe,""))*v,Ae=parseFloat(k.marginRight.replace(fe,""))*v,qe=parseFloat(k.marginTop.replace(fe,""))*v,we=parseFloat(k.marginBottom.replace(fe,""))*v,Oe=z.style,ze=H.style,We=V.style,pt=W.style,Pt=Z.style,ee=A.style,Ne=q.style,Ie=I.style,ne=parseFloat(S.left),M=parseFloat(k.width)*v+fe;Oe.height=qe+fe,Oe.width=M,Oe.top=S.top-qe+fe,Oe.left=ne+fe,ze.height=we+fe,ze.width=M,ze.top=S.top+S.height+fe,ze.left=ne+fe;var U=S.height+qe+we+fe,J=S.top-qe+fe;We.height=U,We.width=Ee+fe,We.top=J,We.left=ne-Ee+fe,pt.height=U,pt.width=Ae+fe,pt.top=J,pt.left=ne+S.width+fe;var ce=parseFloat(k.paddingTop)*v;Pt.height=ce+fe;var ue=parseFloat(k.paddingBottom)*v;ee.height=ue+fe;var xe=S.height-ue-ce+fe,he=S.top+ce+fe;Ne.height=xe,Ne.width=parseFloat(k.paddingLeft)*v+fe,Ne.top=he;var se=parseFloat(k.paddingRight)*v;Ie.height=xe,Ie.width=se+fe,Ie.top=he}},stop:function(c,d,h){h===void 0&&(h={});var m=h||{},y=m.state||"",x=this.getOffsetMethod(y),b=h.view,v=this.canvas,j=v[x](b);j.style.opacity=0}}}),7285:((a,r,e)=>{e.r(r),e.d(r,{default:()=>o});var t=e(5706),s=e(1166);const o={init:function(){(0,t.bindAll)(this,"_onFramesChange")},run:function(i){this.toggleVis(i,!0)},stop:function(i){this.toggleVis(i,!1)},toggleVis:function(i,l){if(l===void 0&&(l=!0),!i.Commands.isActive("preview")){var c=i.Canvas,d=l?"on":"off",h=c.getModel();h[d]("change:frames",this._onFramesChange),this.handleFrames(c.getFrames(),l)}},handleFrames:function(i,l){var c=this;i.forEach(function(d){var h;!((h=d.view)===null||h===void 0)&&h.loaded&&c._upFrame(d,l),d.__ol||(d.on("loaded",function(){return c._upFrame(d)}),d.__ol=!0)})},_onFramesChange:function(i,l){this.handleFrames(l)},_upFrame:function(i,l){var c,d=this,h=d.ppfx,m=d.em,y=d.id,x=(0,s.isDef)(l)?l:m.Commands.isActive(y),b=x?"add":"remove",v="".concat(h,"dashed");(c=i.view)===null||c===void 0||c.getBody().classList[b](v)}}}),9156:((a,r,e)=>{e.d(r,{Kx:()=>c,Ss:()=>h,e2:()=>l,lK:()=>y,pM:()=>d,x2:()=>m});var t=e(4193),s=e.n(t),o=(function(){var x=function(b,v){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,S){j.__proto__=S}||function(j,S){for(var k in S)Object.prototype.hasOwnProperty.call(S,k)&&(j[k]=S[k])},x(b,v)};return function(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");x(b,v);function j(){this.constructor=b}b.prototype=v===null?Object.create(v):(j.prototype=v.prototype,new j)}})(),i=function(){return i=Object.assign||function(x){for(var b,v=1,j=arguments.length;v<j;v++){b=arguments[v];for(var S in b)Object.prototype.hasOwnProperty.call(b,S)&&(x[S]=b[S])}return x},i.apply(this,arguments)},l="add remove reset change",c=(function(x){o(b,x);function b(){return x!==null&&x.apply(this,arguments)||this}return b})(s().Model),d=(function(x){o(b,x);function b(){return x!==null&&x.apply(this,arguments)||this}return b})(s().Collection),h=(function(x){o(b,x);function b(){return x!==null&&x.apply(this,arguments)||this}return b})(s().View),m;(function(x){x.Screen="screen",x.World="world"})(m||(m={}));var y={x:0,y:0};i(i({},y),{width:0,height:0})}),2225:((a,r,e)=>{e.d(r,{I:()=>s,t:()=>t});var t;(function(o){o.remove="component:remove",o.add="component:add",o.move="component:move"})(t||(t={}));var s;(function(o){o.add="component:add",o.remove="component:remove",o.removeBefore="component:remove:before",o.removed="component:removed",o.create="component:create",o.update="component:update",o.updateInside="component:update-inside",o.styleUpdate="component:styleUpdate",o.styleUpdateProperty="component:styleUpdate:",o.select="component:select",o.selectBefore="component:select:before",o.mount="component:mount",o.scriptMount="component:script:mount",o.scriptMountBefore="component:script:mount:before",o.scriptUnmount="component:script:unmount",o.render="component:render",o.input="component:input",o.resize="component:resize",o.resizeStart="component:resize:start",o.resizeMove="component:resize:move",o.resizeEnd="component:resize:end",o.resizeUpdate="component:resize:update",o.resizeInit="component:resize:init",o.symbolMainAdd="symbol:main:add",o.symbolMainUpdate="symbol:main:update",o.symbolMainUpdateDeep="symbol:main:update-deep",o.symbolMainRemove="symbol:main:remove",o.symbolMain="symbol:main",o.symbolInstanceAdd="symbol:instance:add",o.symbolInstanceRemove="symbol:instance:remove",o.symbolInstance="symbol:instance",o.symbol="symbol"})(s||(s={}))}),8242:((a,r,e)=>{e.d(r,{A:()=>l});var t=e(5706),s=e(9156),o=(function(){var c=function(d,h){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,y){m.__proto__=y}||function(m,y){for(var x in y)Object.prototype.hasOwnProperty.call(y,x)&&(m[x]=y[x])},c(d,h)};return function(d,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");c(d,h);function m(){this.constructor=d}d.prototype=h===null?Object.create(h):(m.prototype=h.prototype,new m)}})(),i=(function(c){o(d,c);function d(h,m,y){h===void 0&&(h={}),y===void 0&&(y=!1);var x=c.call(this,h)||this;return x.itemsView="",x.itemType="type",x.reuseView=!1,x.config=m||h.config||{},y&&x.listenTo(x.collection,"add",x.addTo),x.items=[],x}return d.prototype.addTo=function(h){this.add(h)},d.prototype.itemViewNotFound=function(h){var m=this,y=m.config,x=m.ns,b=y.em,v="".concat(x?"[".concat(x,"]: "):"","'").concat(h,"' type not found");b&&b.logWarning(v)},d.prototype.add=function(h,m){var y=this,x=y.config,b=y.reuseView,v=y.items,j=this.itemsView||{},S=["button","checkbox","color","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"],k=m||null,N=this.itemView,P=h.get(this.itemType),R;j[P]?N=j[P]:P&&!j[P]&&!(0,t.includes)(S,P)&&this.itemViewNotFound(P),h.view&&b?R=h.view:R=new N({model:h,config:x},x),v&&v.push(R);var F=R.render().el;k?k.appendChild(F):this.$el.append(F)},d.prototype.render=function(){var h=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(m){this.add(m,h)},this),this.$el.append(h),this.onRender(),this},d.prototype.onRender=function(){},d.prototype.onRemoveBefore=function(h,m){},d.prototype.onRemove=function(h,m){},d.prototype.remove=function(h){h===void 0&&(h={});var m=this.items;return this.onRemoveBefore(m,h),this.clearItems(),c.prototype.remove.call(this),this.onRemove(m,h),this},d.prototype.clearItems=function(){this.items},d})(s.Ss);const l=i;i.prototype.itemView=""}),9966:((a,r,e)=>{e.d(r,{A:()=>d});var t=e(5706),s=e(6294),o=function(){return o=Object.assign||function(h){for(var m,y=1,x=arguments.length;y<x;y++){m=arguments[y];for(var b in m)Object.prototype.hasOwnProperty.call(m,b)&&(h[b]=m[b])}return h},o.apply(this,arguments)},i=function(){return{x:0,y:0}},l=["x","y"],c=(function(){function h(m){return m===void 0&&(m={}),this.opts={snapGuides:{x:5,y:5},snapOffset:5,scale:1},(0,t.bindAll)(this,"drag","stop","keyHandle","handleScroll"),this.setOptions(m),this.delta=i(),this.lastScroll=i(),this.lastScrollDiff=i(),this.startPointer=i(),this.startPosition=i(),this.globScrollDiff=i(),this.currentPointer=i(),this.position=i(),this.guidesStatic=[],this.guidesTarget=[],this.docs=[],this}return h.prototype.setOptions=function(m){m===void 0&&(m={}),this.opts=o(o({},this.opts),m)},h.prototype.toggleDrag=function(m){var y=this.getDocumentEl(),x=this.getContainerEl(),b=this.getWindowEl(),v=m?"on":"off",j={on:s.on,off:s.AU};j[v](x,"mousemove dragover",this.drag),j[v](y,"mouseup dragend touchend",this.stop),j[v](y,"keydown",this.keyHandle),j[v](b,"scroll",this.handleScroll)},h.prototype.handleScroll=function(){var m=this,y=m.lastScroll,x=m.delta,b=this.getScrollInfo(),v={x:b.x-y.x,y:b.y-y.y};this.move(x.x+v.x,x.y+v.y),this.lastScrollDiff=v},h.prototype.start=function(m){var y=this.opts,x=y.onStart;this.toggleDrag(!0),this.startPointer=this.getPointerPos(m),this.guidesStatic=(0,t.result)(y,"guidesStatic")||[],this.guidesTarget=(0,t.result)(y,"guidesTarget")||[],(0,t.isFunction)(x)&&x(m,this),this.startPosition=this.getStartPosition(),this.lastScrollDiff=i(),this.globScrollDiff=i(),this.drag(m)},h.prototype.drag=function(m){var y=this,x=this,b=x.opts,v=x.lastScrollDiff,j=x.globScrollDiff,S=b.onDrag,k=this.startPointer,N=this.getPointerPos(m),P={x:j.x+v.x,y:j.y+v.y};this.globScrollDiff=P;var R={x:N.x-k.x+P.x,y:N.y-k.y+P.y};this.lastScrollDiff=i();var F=function(A){l.forEach(function(q){return A[q]=A[q]*(0,t.result)(b,"scale")}),y.delta=A,y.move(A.x,A.y),(0,t.isFunction)(S)&&S(m,y)},z=o({},R);if(this.currentPointer=N,this.lastScroll=this.getScrollInfo(),F(R),this.guidesTarget.length){var H=this.snapGuides(z),V=H.newDelta,W=H.trgX,Z=H.trgY;(W||Z)&&F(V)}m.which===0&&this.stop(m)},h.prototype.snapGuides=function(m){var y=this,x=o({},m),b=this,v=b.trgX,j=b.trgY;return this.guidesTarget.forEach(function(S){S.x&&y.trgX||S.y&&y.trgY||(S.active=!1,y.guidesStatic.forEach(function(k){if(!(S.y&&k.x||S.x&&k.y)){var N=S.y&&k.y,P=N?"y":"x",R=S[P],F=k[P],z=m[P],H=N?j:v;if(y.isPointIn(R,F,{axis:P})&&(0,t.isUndefined)(H)){var V=z-(R-F);y.setGuideLock(S,V)}}}))}),v=this.trgX,j=this.trgY,l.forEach(function(S){var k=S.toUpperCase(),N=y["trg".concat(k)];N&&!y.isPointIn(m[S],N.lock,{axis:S})&&(y.setGuideLock(N,null),N=null),N&&!(0,t.isUndefined)(N.lock)&&(x[S]=N.lock)}),{newDelta:x,trgX:this.trgX,trgY:this.trgY}},h.prototype.isPointIn=function(m,y,x){var b,v=x===void 0?{}:x,j=v.offset,S=v.axis,k=this.opts,N=k.snapGuides,P=N===void 0?{}:N,R=k.snapOffset,F=R===void 0?0:R,z=S==="x"?P.x:S==="y"?P.y:void 0,H=z===0?0:(b=j??z)!==null&&b!==void 0?b:F;return H===0?!1:m>=y&&m<=y+H||m<=y&&m>=y-H},h.prototype.setGuideLock=function(m,y){var x=(0,t.isUndefined)(m.x)?"Y":"X",b="trg".concat(x);return y!==null?(m.active=!0,m.lock=y,this[b]=m):(delete m.active,delete m.lock,delete this[b]),m},h.prototype.stop=function(m,y){y===void 0&&(y={});var x=this.delta,b=!!y.cancel,v=b?0:x.x,j=b?0:x.y;this.toggleDrag(),this.move(v,j,!0);var S=this.opts.onEnd;(0,t.isFunction)(S)&&S(m,this,{cancelled:b})},h.prototype.keyHandle=function(m){(0,s.v$)(m)&&this.stop(m,{cancel:!0})},h.prototype.move=function(m,y,x){var b=this,v=b.el,j=b.opts,S=this.startPosition;if(S){var k=j.setPosition,N=S.x+m,P=S.y+y;this.position={x:N,y:P,end:x},(0,t.isFunction)(k)&&k(this.position),v&&(v.style.left="".concat(N,"px"),v.style.top="".concat(P,"px"))}},h.prototype.getContainerEl=function(){var m=this.opts.container;return m?[m]:this.getDocumentEl()},h.prototype.getWindowEl=function(){var m=this.getContainerEl();return m.map(function(y){var x=y.ownerDocument||y;return x.defaultView||x.parentWindow})},h.prototype.getDocumentEl=function(m){var y=this.opts.doc;if(m=m||this.el,!this.docs.length){var x=[document];m&&x.push(m.ownerDocument),y&&x.push(y),this.docs=x}return this.docs},h.prototype.getPointerPos=function(m){var y=this.opts.getPointerPosition,x=(0,s.G2)(m);return y?y(m):{x:x.clientX,y:x.clientY}},h.prototype.getStartPosition=function(){var m=this,y=m.el,x=m.opts,b=x.getPosition,v=i();return(0,t.isFunction)(b)?v=b():y&&(v={x:parseFloat(y.style.left),y:parseFloat(y.style.top)}),v},h.prototype.getScrollInfo=function(){var m=this.opts.doc,y=m&&m.body;return{y:y?y.scrollTop:0,x:y?y.scrollLeft:0}},h.prototype.detectAxisLock=function(m,y){var x=m,b=y,v=Math.abs(x),j=Math.abs(b);if(b>=v||b<=-v)return"x";if(x>j||x<-j)return"y"},h})();const d=c}),7774:((a,r,e)=>{e.r(r),e.d(r,{default:()=>Wt});var t=typeof document<"u"?document:null,s=typeof window<"u"?window:null,o=Array.prototype,i=o.filter,l=o.indexOf,c=o.map,d=o.push,h=o.reverse,m=o.slice,y=o.splice,x=/^#[\w-]*$/,b=/^\.[\w-]*$/,v=/<.+>/,j=/^\w+$/;function S(ye,Be){return Be===void 0&&(Be=t),b.test(ye)?Be.getElementsByClassName(ye.slice(1)):j.test(ye)?Be.getElementsByTagName(ye):Be.querySelectorAll(ye)}function k(ye,Be){if(Be===void 0&&(Be=t),!!ye){if(ye.__cash)return ye;var tt=ye;if(q(ye)){if(Be.__cash&&(Be=Be[0]),tt=x.test(ye)?Be.getElementById(ye.slice(1)):v.test(ye)?Mt(ye):S(ye,Be),!tt)return}else if(A(ye))return this.ready(ye);(tt.nodeType||tt===s)&&(tt=[tt]),this.length=tt.length;for(var wt=0,Ut=this.length;wt<Ut;wt++)this[wt]=tt[wt]}}function N(ye,Be){return new k(ye,Be)}var P=N.fn=N.prototype=k.prototype={constructor:N,__cash:!0,length:0,splice:y};P.get=function(ye){return ye===void 0?m.call(this):this[ye<0?ye+this.length:ye]},P.eq=function(ye){return N(this.get(ye))},P.first=function(){return this.eq(0)},P.last=function(){return this.eq(-1)},P.map=function(ye){return N(c.call(this,function(Be,tt){return ye.call(Be,tt,Be)}))},P.slice=function(){return N(m.apply(this,arguments))};var R=/(?:^\w|[A-Z]|\b\w)/g,F=/[\s-_]+/g;function z(ye){return ye.replace(R,function(Be,tt){return Be[tt?"toUpperCase":"toLowerCase"]()}).replace(F,"")}N.camelCase=z;function H(ye,Be){for(var tt=0,wt=ye.length;tt<wt&&Be.call(ye[tt],ye[tt],tt,ye)!==!1;tt++);}N.each=H,P.each=function(ye){return H(this,function(Be,tt){return ye.call(Be,tt,Be)}),this},P.removeProp=function(ye){return this.each(function(Be,tt){delete tt[ye]})};function V(ye){ye===void 0&&(ye=this);for(var Be=arguments,tt=Be.length,wt=tt<2?0:1;wt<tt;wt++)for(var Ut in Be[wt])ye[Ut]=Be[wt][Ut];return ye}N.extend=P.extend=V;var W=1;N.guid=W;function Z(ye,Be){var tt=ye&&(ye.matches||ye.webkitMatchesSelector||ye.mozMatchesSelector||ye.msMatchesSelector||ye.oMatchesSelector);return!!tt&&tt.call(ye,Be)}N.matches=Z;function A(ye){return typeof ye=="function"}N.isFunction=A;function q(ye){return typeof ye=="string"}N.isString=q;function I(ye){return!isNaN(parseFloat(ye))&&isFinite(ye)}N.isNumeric=I;var K=Array.isArray;N.isArray=K,P.prop=function(ye,Be){if(ye){if(q(ye))return arguments.length<2?this[0]&&this[0][ye]:this.each(function(wt,Ut){Ut[ye]=Be});for(var tt in ye)this.prop(tt,ye[tt]);return this}};function D(ye){return q(ye)?function(Be,tt){return Z(tt,ye)}:ye.__cash?function(Be,tt){return ye.is(tt)}:function(Be,tt,wt){return tt===wt}}P.filter=function(ye){if(!ye)return N();var Be=A(ye)?ye:D(ye);return N(i.call(this,function(tt,wt){return Be.call(tt,wt,tt,ye)}))};var Q=/\S+/g;function oe(ye){return q(ye)?ye.match(Q)||[]:[]}P.hasClass=function(ye){var Be=oe(ye),tt=!1;return Be.length&&this.each(function(wt,Ut){return tt=Ut.classList.contains(Be[0]),!tt}),tt},P.removeAttr=function(ye){var Be=oe(ye);return Be.length?this.each(function(tt,wt){H(Be,function(Ut){wt.removeAttribute(Ut)})}):this},P.attr=function(ye,Be){if(ye){if(q(ye)){if(arguments.length<2){if(!this[0])return;var tt=this[0].getAttribute(ye);return tt===null?void 0:tt}return Be===null?this.removeAttr(ye):this.each(function(Ut,er){er.setAttribute(ye,Be)})}for(var wt in ye)this.attr(wt,ye[wt]);return this}},P.toggleClass=function(ye,Be){var tt=oe(ye),wt=Be!==void 0;return tt.length?this.each(function(Ut,er){H(tt,function(zr){wt?Be?er.classList.add(zr):er.classList.remove(zr):er.classList.toggle(zr)})}):this},P.addClass=function(ye){return this.toggleClass(ye,!0)},P.removeClass=function(ye){return arguments.length?this.toggleClass(ye,!1):this.attr("class","")};function re(ye){return ye.filter(function(Be,tt,wt){return wt.indexOf(Be)===tt})}N.unique=re,P.add=function(ye,Be){return N(re(this.get().concat(N(ye,Be).get())))};function Te(ye,Be,tt){if(ye.nodeType===1){var wt=s.getComputedStyle(ye,null);return Be?tt?wt.getPropertyValue(Be):wt[Be]:wt}}function G(ye,Be){return parseInt(Te(ye,Be),10)||0}var Y=/^--/;function Se(ye){return Y.test(ye)}var fe={},Ee=t&&t.createElement("div"),Ae=Ee?Ee.style:{},qe=["webkit","moz","ms","o"];function we(ye,Be){if(Be===void 0&&(Be=Se(ye)),Be)return ye;if(!fe[ye]){var tt=z(ye),wt=""+tt.charAt(0).toUpperCase()+tt.slice(1),Ut=(tt+" "+qe.join(wt+" ")+wt).split(" ");H(Ut,function(er){if(er in Ae)return fe[ye]=er,!1})}return fe[ye]}N.prefixedProp=we;var Oe={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function ze(ye,Be,tt){return tt===void 0&&(tt=Se(ye)),!tt&&!Oe[ye]&&I(Be)?Be+"px":Be}P.css=function(ye,Be){if(q(ye)){var tt=Se(ye);return ye=we(ye,tt),arguments.length<2?this[0]&&Te(this[0],ye,tt):ye?(Be=ze(ye,Be,tt),this.each(function(Ut,er){er.nodeType===1&&(tt?er.style.setProperty(ye,Be):er.style[ye]=Be)})):this}for(var wt in ye)this.css(wt,ye[wt]);return this};var We="__cashData",pt=/^data-(.*)/;N.hasData=function(ye){return We in ye};function Pt(ye){return ye[We]=ye[We]||{}}function ee(ye,Be){var tt=Pt(ye);if(Be){if(!(Be in tt)){var wt=ye.dataset?ye.dataset[Be]||ye.dataset[z(Be)]:N(ye).attr("data-"+Be);if(wt!==void 0){try{wt=JSON.parse(wt)}catch{}tt[Be]=wt}}return tt[Be]}return tt}function Ne(ye,Be){Be===void 0?delete ye[We]:delete Pt(ye)[Be]}function Ie(ye,Be,tt){Pt(ye)[Be]=tt}P.data=function(ye,Be){var tt=this;if(!ye)return this[0]?(H(this[0].attributes,function(Ut){var er=Ut.name.match(pt);er&&tt.data(er[1])}),ee(this[0])):void 0;if(q(ye))return Be===void 0?this[0]&&ee(this[0],ye):this.each(function(Ut,er){return Ie(er,ye,Be)});for(var wt in ye)this.data(wt,ye[wt]);return this},P.removeData=function(ye){return this.each(function(Be,tt){return Ne(tt,ye)})};function ne(ye,Be){return G(ye,"border"+(Be?"Left":"Top")+"Width")+G(ye,"padding"+(Be?"Left":"Top"))+G(ye,"padding"+(Be?"Right":"Bottom"))+G(ye,"border"+(Be?"Right":"Bottom")+"Width")}H(["Width","Height"],function(ye){P["inner"+ye]=function(){if(this[0])return this[0]===s?s["inner"+ye]:this[0]["client"+ye]}}),H(["width","height"],function(ye,Be){P[ye]=function(tt){return this[0]?arguments.length?(tt=parseInt(tt,10),this.each(function(wt,Ut){if(Ut.nodeType===1){var er=Te(Ut,"boxSizing");Ut.style[ye]=ze(ye,tt+(er==="border-box"?ne(Ut,!Be):0))}})):this[0]===s?this[0][z("outer-"+ye)]:this[0].getBoundingClientRect()[ye]-ne(this[0],!Be):tt===void 0?void 0:this}}),H(["Width","Height"],function(ye,Be){P["outer"+ye]=function(tt){if(this[0])return this[0]===s?s["outer"+ye]:this[0]["offset"+ye]+(tt?G(this[0],"margin"+(Be?"Top":"Left"))+G(this[0],"margin"+(Be?"Bottom":"Right")):0)}});function M(ye,Be){for(var tt=0,wt=Be.length;tt<wt;tt++)if(ye.indexOf(Be[tt])<0)return!1;return!0}function U(ye,Be,tt){H(ye[tt],function(wt){wt[0];var Ut=wt[1];Be.removeEventListener(tt,Ut)}),delete ye[tt]}var J="__cashEvents",ce=".";function ue(ye){return ye[J]=ye[J]||{}}function xe(ye,Be,tt,wt){wt.guid=wt.guid||W++;var Ut=ue(ye);Ut[Be]=Ut[Be]||[],Ut[Be].push([tt,wt]),ye.addEventListener(Be,wt)}function he(ye){var Be=ye.split(ce);return[Be[0],Be.slice(1).sort()]}function se(ye,Be,tt,wt){var Ut=ue(ye);if(Be){var er=Ut[Be];if(!er)return;wt&&(wt.guid=wt.guid||W++),Ut[Be]=er.filter(function(zr){var rn=zr[0],_n=zr[1];if(wt&&_n.guid!==wt.guid||!M(rn,tt))return!0;ye.removeEventListener(Be,_n)})}else if(!tt||!tt.length)for(Be in Ut)U(Ut,ye,Be);else for(Be in Ut)se(ye,Be,tt,wt)}P.off=function(ye,Be){var tt=this;return ye===void 0?this.each(function(wt,Ut){return se(Ut)}):H(oe(ye),function(wt){var Ut=he(wt),er=Ut[0],zr=Ut[1];tt.each(function(rn,_n){return se(_n,er,zr,Be)})}),this},P.on=function(ye,Be,tt,wt){var Ut=this;if(!q(ye)){for(var er in ye)this.on(er,Be,ye[er]);return this}return A(Be)&&(tt=Be,Be=!1),H(oe(ye),function(zr){var rn=he(zr),_n=rn[0],Ur=rn[1];Ut.each(function(ar,br){var pn=function In(on){if(!(on.namespace&&!M(Ur,on.namespace.split(ce)))){var Er=br;if(Be){for(var jr=on.target;!Z(jr,Be);)if(jr===br||(jr=jr.parentNode,!jr))return;Er=jr}on.namespace=on.namespace||"";var ht=tt.call(Er,on,on.data);wt&&se(br,_n,Ur,In),ht===!1&&(on.preventDefault(),on.stopPropagation())}};pn.guid=tt.guid=tt.guid||W++,xe(br,_n,Ur,pn)})}),this},P.one=function(ye,Be,tt){return this.on(ye,Be,tt,!0)},P.ready=function(ye){var Be=function(){return ye(N)};return t.readyState!=="loading"?setTimeout(Be):t.addEventListener("DOMContentLoaded",Be),this},P.trigger=function(ye,Be){var tt=ye;if(q(ye)){var wt=he(ye),Ut=wt[0],er=wt[1];tt=t.createEvent("HTMLEvents"),tt.initEvent(Ut,!0,!0),tt.namespace=er.join(ce)}return tt.data=Be,this.each(function(zr,rn){rn.dispatchEvent(tt)})};function Le(ye){var Be=[];return H(ye.options,function(tt){tt.selected&&!tt.disabled&&!tt.parentNode.disabled&&Be.push(tt.value)}),Be}function Ue(ye){return ye.selectedIndex<0?null:ye.options[ye.selectedIndex].value}var Ge=/select-one/i,ie=/select-multiple/i;function _e(ye){var Be=ye.type;return Ge.test(Be)?Ue(ye):ie.test(Be)?Le(ye):ye.value}var le=/%20/g;function Xe(ye,Be){return"&"+encodeURIComponent(ye)+"="+encodeURIComponent(Be).replace(le,"+")}var Fe=/file|reset|submit|button|image/i,dt=/radio|checkbox/i;P.serialize=function(){var ye="";return this.each(function(Be,tt){H(tt.elements||[tt],function(wt){if(!(wt.disabled||!wt.name||wt.tagName==="FIELDSET")&&!Fe.test(wt.type)&&!(dt.test(wt.type)&&!wt.checked)){var Ut=_e(wt);if(Ut!==void 0){var er=K(Ut)?Ut:[Ut];H(er,function(zr){ye+=Xe(wt.name,zr)})}}})}),ye.substr(1)},P.val=function(ye){return ye===void 0?this[0]&&_e(this[0]):this.each(function(Be,tt){var wt=ie.test(tt.type),Ut=ye===null?wt?[]:"":ye;wt&&K(Ut)?H(tt.options,function(er){er.selected=Ut.indexOf(er.value)>=0}):tt.value=Ut})},P.clone=function(){return this.map(function(ye,Be){return Be.cloneNode(!0)})},P.detach=function(){return this.each(function(ye,Be){Be.parentNode&&Be.parentNode.removeChild(Be)})};var lt=/^\s*<(\w+)[^>]*>/,ft=/^\s*<(\w+)\s*\/?>(?:<\/\1>)?\s*$/,Ze;function Nt(){if(!Ze){var ye=t.createElement("table"),Be=t.createElement("tr");Ze={"*":t.createElement("div"),tr:t.createElement("tbody"),td:Be,th:Be,thead:ye,tbody:ye,tfoot:ye}}}function Mt(ye){if(Nt(),!q(ye))return[];if(ft.test(ye))return[t.createElement(RegExp.$1)];var Be=lt.test(ye)&&RegExp.$1,tt=Ze[Be]||Ze["*"];return tt.innerHTML=ye,N(tt.childNodes).detach().get()}N.parseHTML=Mt,P.empty=function(){var ye=this[0];if(ye)for(;ye.firstChild;)ye.removeChild(ye.firstChild);return this};function vt(ye,Be,tt){tt?ye.insertBefore(Be,ye.childNodes[0]):ye.appendChild(Be)}function Jt(ye,Be,tt){if(Be!==void 0){var wt=q(Be);!wt&&Be.length?H(Be,function(Ut){return Jt(ye,Ut,tt)}):H(ye,wt?function(Ut){Ut.insertAdjacentHTML(tt?"afterbegin":"beforeend",Be)}:function(Ut,er){return vt(Ut,er?Be.cloneNode(!0):Be,tt)})}}P.append=function(){var ye=this;return H(arguments,function(Be){Jt(ye,Be)}),this},P.appendTo=function(ye){return Jt(N(ye),this),this},P.html=function(ye){if(ye===void 0)return this[0]&&this[0].innerHTML;var Be=ye.nodeType?ye[0].outerHTML:ye;return this.each(function(tt,wt){wt.innerHTML=Be})},P.insertAfter=function(ye){var Be=this;return N(ye).each(function(tt,wt){var Ut=wt.parentNode;Be.each(function(er,zr){Ut.insertBefore(tt?zr.cloneNode(!0):zr,wt.nextSibling)})}),this},P.after=function(){var ye=this;return H(h.apply(arguments),function(Be){h.apply(N(Be).slice()).insertAfter(ye)}),this},P.insertBefore=function(ye){var Be=this;return N(ye).each(function(tt,wt){var Ut=wt.parentNode;Be.each(function(er,zr){Ut.insertBefore(tt?zr.cloneNode(!0):zr,wt)})}),this},P.before=function(){var ye=this;return H(arguments,function(Be){N(Be).insertBefore(ye)}),this},P.prepend=function(){var ye=this;return H(arguments,function(Be){Jt(ye,Be,!0)}),this},P.prependTo=function(ye){return Jt(N(ye),h.apply(this.slice()),!0),this},P.remove=function(){return this.detach().off()},P.replaceWith=function(ye){var Be=this;return this.each(function(tt,wt){var Ut=wt.parentNode;if(Ut){var er=tt?N(ye).clone():N(ye);if(!er[0])return Be.remove(),!1;Ut.replaceChild(er[0],wt),N(er[0]).after(er.slice(1))}})},P.replaceAll=function(ye){return N(ye).replaceWith(this),this},P.text=function(ye){return ye===void 0?this[0]?this[0].textContent:"":this.each(function(Be,tt){tt.textContent=ye})};var wr=t&&t.documentElement;P.offset=function(){var ye=this[0];if(ye){var Be=ye.getBoundingClientRect();return{top:Be.top+s.pageYOffset-wr.clientTop,left:Be.left+s.pageXOffset-wr.clientLeft}}},P.offsetParent=function(){return N(this[0]&&this[0].offsetParent)},P.position=function(){var ye=this[0];if(ye)return{left:ye.offsetLeft,top:ye.offsetTop}},P.children=function(ye){var Be=[];return this.each(function(tt,wt){d.apply(Be,wt.children)}),Be=N(re(Be)),ye?Be.filter(function(tt,wt){return Z(wt,ye)}):Be},P.contents=function(){var ye=[];return this.each(function(Be,tt){d.apply(ye,tt.tagName==="IFRAME"?[tt.contentDocument]:tt.childNodes)}),N(ye.length&&re(ye))},P.find=function(ye){for(var Be=[],tt=0,wt=this.length;tt<wt;tt++){var Ut=S(ye,this[tt]);Ut.length&&d.apply(Be,Ut)}return N(Be.length&&re(Be))},P.has=function(ye){var Be=q(ye)?function(tt,wt){return!!S(ye,wt).length}:function(tt,wt){return wt.contains(ye)};return this.filter(Be)},P.is=function(ye){if(!ye||!this[0])return!1;var Be=D(ye),tt=!1;return this.each(function(wt,Ut){return tt=Be(wt,Ut,ye),!tt}),tt},P.next=function(){return N(this[0]&&this[0].nextElementSibling)},P.not=function(ye){if(!ye||!this[0])return this;var Be=D(ye);return this.filter(function(tt,wt){return!Be(tt,wt,ye)})},P.parent=function(){var ye=[];return this.each(function(Be,tt){tt&&tt.parentNode&&ye.push(tt.parentNode)}),N(re(ye))},P.index=function(ye){var Be=ye?N(ye)[0]:this[0],tt=ye?this:N(Be).parent().children();return l.call(tt,Be)},P.closest=function(ye){return!ye||!this[0]?N():this.is(ye)?this.filter(ye):this.parent().closest(ye)},P.parents=function(ye){var Be=[],tt;return this.each(function(wt,Ut){for(tt=Ut;tt&&tt.parentNode&&tt!==t.body.parentNode;)tt=tt.parentNode,(!ye||ye&&Z(tt,ye))&&Be.push(tt)}),N(re(Be))},P.prev=function(){return N(this[0]&&this[0].previousElementSibling)},P.siblings=function(){var ye=this[0];return this.parent().children().filter(function(Be,tt){return tt!==ye})};const Wt=N}),6294:((a,r,e)=>{e.d(r,{AU:()=>Te,BC:()=>j,C8:()=>H,Ch:()=>Z,Ci:()=>I,D8:()=>l,G2:()=>A,GW:()=>z,GZ:()=>k,I6:()=>m,LJ:()=>Q,Sc:()=>v,X6:()=>y,Xy:()=>V,YZ:()=>d,ZQ:()=>c,_I:()=>G,a_:()=>S,af:()=>P,bG:()=>b,cx:()=>h,ir:()=>R,kk:()=>oe,on:()=>re,rp:()=>D,v$:()=>q,yL:()=>N,zN:()=>x});var t=e(5706),s=function(Y,Se,fe){if(fe||arguments.length===2)for(var Ee=0,Ae=Se.length,qe;Ee<Ae;Ee++)(qe||!(Ee in Se))&&(qe||(qe=Array.prototype.slice.call(Se,0,Ee)),qe[Ee]=Se[Ee]);return Y.concat(qe||Array.prototype.slice.call(Se))},o="tag",i="attributes",l="transitionend oTransitionEnd transitionend webkitTransitionEnd",c=function(Y){return Y?.nodeType===Node.DOCUMENT_NODE},d=function(Y){var Se=Y&&Y.parentNode;Se&&Se.removeChild(Y)};function h(){for(var Y=[],Se=0;Se<arguments.length;Se++)Y[Se]=arguments[Se];var fe=Array.isArray(Y[0])?Y[0]:s([],Y,!0);return fe.filter(Boolean).join(" ")}var m=function(Y,Se){return Y.querySelectorAll(Se)},y=function(Y,Se){return Se===void 0&&(Se={}),Y&&Y.setAttribute&&(0,t.each)(Se,function(fe,Ee){return Y.setAttribute(Ee,fe)})},x=function(Y){var Se;return Y&&!!(Y.offsetWidth||Y.offsetHeight||!((Se=Y.getClientRects)===null||Se===void 0)&&Se.call(Y).length)},b=function(Y,Se){var fe;(fe=Y.parentNode)===null||fe===void 0||fe.replaceChild(Se,Y)},v=function(Y,Se,fe){var Ee=Y.childNodes,Ae=Ee.length,qe=(0,t.isUndefined)(fe)?Ae:fe;(0,t.isString)(Se)&&(Y.insertAdjacentHTML("beforeEnd",Se),Se=Y.lastChild,Y.removeChild(Se)),qe>=Ae?Y.appendChild(Se):Y.insertBefore(Se,Ee[qe])},j=function(Y,Se){return v(Y,Se)},S=function(Y,Se,fe){Se===void 0&&(Se={});var Ee=document.createElement(Y);return Se&&(0,t.each)(Se,function(Ae,qe){return Ee.setAttribute(qe,Ae)}),fe&&((0,t.isString)(fe)?Ee.innerHTML=fe:Ee.appendChild(fe)),Ee},k=function(Y){return document.createTextNode(Y)},N=function(Y,Se){var fe,Ee=Y.type;try{fe=new window[Se](Ee,Y)}catch{fe=document.createEvent(Se),fe.initEvent(Ee,!0,!0)}return fe._parentEvent=Y,Ee.indexOf("key")===0&&(fe.keyCodeVal=Y.keyCode,["keyCode","which"].forEach(function(Ae){Object.defineProperty(fe,Ae,{get:function(){return this.keyCodeVal}})})),fe},P=function(Y,Se){Se===void 0&&(Se=[]);var fe=Array.isArray(Se)?Se:[Se];fe.forEach(function(Ee){var Ae=Ee[o]||"div",qe=Ee[i]||{},we=document.createElement(Ae);(0,t.each)(qe,function(Oe,ze){we.setAttribute(ze,Oe)}),Y.appendChild(we)})},R=function(Y){return Y?.nodeType===Node.TEXT_NODE},F=function(Y){return Y?.nodeType===Node.COMMENT_NODE},z=function(Y){return Y&&!R(Y)&&!F(Y)},H=function(Y){var Se={top:0,left:0,width:0,height:0};if(!Y)return Se;var fe;if(R(Y)){var Ee=document.createRange();Ee.selectNode(Y),fe=Ee.getBoundingClientRect(),Ee.detach()}return fe||(Y.getBoundingClientRect?Y.getBoundingClientRect():Se)},V=function(Y){var Se=Y?.ownerDocument||document,fe=Se.documentElement,Ee=Se.defaultView||window;return{x:(Ee.pageXOffset||fe.scrollLeft||0)-(fe.clientLeft||0),y:(Ee.pageYOffset||fe.scrollTop||0)-(fe.clientTop||0)}},W=function(Y){return Y.which||Y.keyCode},Z=function(Y){return String.fromCharCode(W(Y))},A=function(Y){return Y.touches&&Y.touches[0]?Y.touches[0]:Y},q=function(Y){return W(Y)===27},I=function(Y){return W(Y)===13},K=function(Y){return Y.ctrlKey},D=function(Y){return K(Y)||Y.metaKey},Q=function(Y){if(!Y)return"";var Se=Y.name,fe=Y.publicId,Ee=Y.systemId,Ae=fe?' PUBLIC "'.concat(fe,'"'):"",qe=!fe&&Ee?' SYSTEM "'.concat(Ee,'"'):"";return"<!DOCTYPE ".concat(Se).concat(Ae).concat(qe,">")},oe=function(Y){Y===void 0&&(Y={});var Se=[];return(0,t.each)(Y,function(fe,Ee){return Se.push("".concat(Ee,'="').concat(fe,'"'))}),Se.join(" ")},re=function(Y,Se,fe,Ee){var Ae=Se.split(/\s+/),qe=(0,t.isArray)(Y)?Y:[Y];Ae.forEach(function(we){qe.forEach(function(Oe){return Oe?.addEventListener(we,fe,Ee)})})},Te=function(Y,Se,fe,Ee){var Ae=Se.split(/\s+/),qe=(0,t.isArray)(Y)?Y:[Y];Ae.forEach(function(we){qe.forEach(function(Oe){return Oe?.removeEventListener(we,fe,Ee)})})},G=function(Y){var Se=Y.replace(/-([a-zA-Z0-9])/g,function(fe,Ee){return Ee.toUpperCase()});return Se}}),1166:((a,r,e)=>{e.r(r),e.d(r,{appendStyles:()=>V,buildBase64UrlFromSvg:()=>ee,camelCase:()=>q,capitalize:()=>Ae,createId:()=>Pt,deepMerge:()=>Y,escape:()=>oe,escapeAltQuoteAttrValue:()=>G,escapeAttrValue:()=>Te,escapeNodeContent:()=>re,find:()=>Q,get:()=>y,getComponentModel:()=>We,getComponentView:()=>ze,getElement:()=>D,getGlobal:()=>P,getModel:()=>Se,getUiClass:()=>H,getUnitFromValue:()=>Z,getViewEl:()=>we,hasDnd:()=>K,hasWin:()=>N,isBultInMethod:()=>v,isComponent:()=>Oe,isDef:()=>k,isEmptyObj:()=>Ee,isObject:()=>fe,isRule:()=>qe,matches:()=>z,normalizeFloat:()=>I,normalizeKey:()=>j,serialize:()=>b,set:()=>x,setViewEl:()=>pt,shallowDiff:()=>W,stringToPath:()=>h,toLowerCase:()=>R,upFirst:()=>A,wait:()=>S});var t=e(5706),s=e(6294),o=function(){return o=Object.assign||function(Ne){for(var Ie,ne=1,M=arguments.length;ne<M;ne++){Ie=arguments[ne];for(var U in Ie)Object.prototype.hasOwnProperty.call(Ie,U)&&(Ne[U]=Ie[U])}return Ne},o.apply(this,arguments)},i=function(Ne,Ie,ne){if(ne||arguments.length===2)for(var M=0,U=Ie.length,J;M<U;M++)(J||!(M in Ie))&&(J||(J=Array.prototype.slice.call(Ie,0,M)),J[M]=Ie[M]);return Ne.concat(J||Array.prototype.slice.call(Ie))},l={},c=/\\(\\)?/g,d=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,h=function(Ne){var Ie=[];return Ne.charCodeAt(0)===46&&Ie.push(""),Ne.replace(d,function(ne,M,U,J){return Ie.push(U?J.replace(c,"$1"):M||ne),""}),Ie};function m(Ne,Ie){return(0,t.isArray)(Ne)?Ne:Ie.hasOwnProperty(Ne)?[Ne]:h(Ne)}var y=function(Ne,Ie,ne){for(var M,U=m(Ie,Ne),J=U.length,ce=0;Ne!=null&&ce<J;)Ne=Ne["".concat(U[ce++])];return(M=ce&&ce==J?Ne:void 0)!==null&&M!==void 0?M:ne},x=function(Ne,Ie,ne){if(!fe(Ne))return!1;var M=m(Ie,Ne),U=M.length;if(U===0)return!1;if(U===1)return Ne[M[0]]=ne,!0;var J=M.slice(0,-1),ce=M[U-1],ue=y(Ne,J);if(ue){if(Array.isArray(ue)){var xe=+ce;if(!isNaN(xe))return ue[xe]=ne,!0}else if(fe(ue))return ue[ce]=ne,!0}return!1},b=function(Ne){return JSON.parse(JSON.stringify(Ne))},v=function(Ne){return(0,t.isFunction)(l[Ne])},j=function(Ne){return v(Ne)?"_".concat(Ne):Ne},S=function(Ne){return Ne===void 0&&(Ne=0),new Promise(function(Ie){return setTimeout(Ie,Ne)})},k=function(Ne){return typeof Ne<"u"},N=function(){return typeof window<"u"},P=function(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:e.g},R=function(Ne){return(Ne||"").toLowerCase()},F=N()?window.Element.prototype:{},z=F.matches||F.webkitMatchesSelector||F.mozMatchesSelector||F.msMatchesSelector,H=function(Ne,Ie){var ne=Ne.getConfig(),M=ne.stylePrefix,U=ne.customUI;return[U&&"".concat(M,"cui"),Ie].filter(function(J){return J}).join(" ")},V=function(Ne,Ie){Ie===void 0&&(Ie={});var ne=(0,t.isArray)(Ne)?i([],Ne,!0):[Ne];if(ne.length){var M=ne.shift();if(M&&(!Ie.unique||!document.querySelector('link[href="'.concat(M,'"]')))){var U=document.head,J=document.createElement("link");J.href=M,J.rel="stylesheet",Ie.prepand?U.insertBefore(J,U.firstChild):U.appendChild(J)}V(ne)}},W=function(Ne,Ie){var ne={},M=(0,t.keys)(Ie);for(var U in Ne)if(Ne.hasOwnProperty(U)){var J=Ne[U],ce=Ie[U];M.indexOf(U)>=0?J!==ce&&(ne[U]=ce):ne[U]=null}for(var U in Ie)Ie.hasOwnProperty(U)&&(0,t.isUndefined)(Ne[U])&&(ne[U]=Ie[U]);return ne},Z=function(Ne){return Ne.replace(parseFloat(Ne),"")},A=function(Ne){return Ne[0].toUpperCase()+Ne.toLowerCase().slice(1)},q=function(Ne){return Ne.replace(/-./g,function(Ie){return Ie[1].toUpperCase()})},I=function(Ne,Ie,ne){Ie===void 0&&(Ie=1),ne===void 0&&(ne=0);var M=0;if(isNaN(Ne))return ne;if(Ne=parseFloat(Ne),Math.floor(Ne)!==Ne){var U=Ie.toString().split(".")[1];M=U?U.length:0}return M?parseFloat(Ne.toFixed(M)):Ne},K=function(Ne){return"draggable"in document.createElement("i")&&(Ne?Ne.config.nativeDnD:!0)},D=function(Ne){if((0,t.isElement)(Ne)||(0,s.ir)(Ne))return Ne;if(Ne&&Ne.getEl)return Ne.getEl()},Q=function(Ne,Ie){var ne=null;return Ne.some(function(M,U){return Ie(M,U,Ne)?(ne=M,1):0}),ne},oe=function(Ne){return Ne===void 0&&(Ne=""),"".concat(Ne).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/`/g,"&#96;")},re=function(Ne){return Ne===void 0&&(Ne=""),"".concat(Ne).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},Te=function(Ne){return Ne===void 0&&(Ne=""),"".concat(Ne).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},G=function(Ne){return Ne===void 0&&(Ne=""),"".concat(Ne).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;")},Y=function(){for(var Ne=[],Ie=0;Ie<arguments.length;Ie++)Ne[Ie]=arguments[Ie];for(var ne=o({},Ne[0]),M=1;M<Ne.length;M++){var U=o({},Ne[M]);for(var J in U){var ce=ne[J],ue=U[J];fe(ce)&&fe(ue)?ne[J]=Y(ce,ue):ne[J]=ue}}return ne},Se=function(Ne,Ie){var ne;return!Ie&&Ne&&Ne.__cashData?ne=Ne.__cashData.model:Ie&&(0,t.isElement)(Ne)&&(ne=Ie(Ne).data("model")),ne},fe=function(Ne){return Ne&&!Array.isArray(Ne)&&typeof Ne=="object"},Ee=function(Ne){return Object.keys(Ne).length<=0},Ae=function(Ne){return Ne===void 0&&(Ne=""),Ne&&Ne.charAt(0).toUpperCase()+Ne.substring(1)},qe=function(Ne){return Ne&&Ne.toCSS},we=function(Ne){return Ne?.__gjsv},Oe=function(Ne){return!!Ne?.toHTML},ze=function(Ne){return we(Ne)},We=function(Ne){var Ie;return(Ie=ze(Ne))===null||Ie===void 0?void 0:Ie.model},pt=function(Ne,Ie){Ne.__gjsv=Ie},Pt=function(Ne){Ne===void 0&&(Ne=16);for(var Ie="",ne="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",M=ne.length,U=0;U<Ne;U++)Ie+=ne.charAt(Math.floor(Math.random()*M));return Ie},ee=function(Ne){if(Ne&&Ne.substr(0,4)==="<svg"){var Ie="";return N()?Ie=window.btoa(Ne):typeof Buffer<"u"&&(Ie=Buffer.from(Ne,"utf8").toString("base64")),Ie?"data:image/svg+xml;base64,".concat(Ie):Ne}return Ne}}),6756:((a,r,e)=>{e.d(r,{h:()=>o});var t=e(3178),s=(function(){var l=function(c,d){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,m){h.__proto__=m}||function(h,m){for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(h[y]=m[y])},l(c,d)};return function(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");l(c,d);function h(){this.constructor=c}c.prototype=d===null?Object.create(d):(h.prototype=d.prototype,new h)}})(),o=(function(l){s(c,l);function c(){var d=l!==null&&l.apply(this,arguments)||this;return d.displayCache=new Map,d}return c.prototype.getChildren=function(){return this.getDisplayedChildren()},c.prototype.getDisplayedChildren=function(){var d=this,h=this.model.components(),m=h.filter(function(y){return d.isChildDisplayed(y)});return m.map(function(y){return new d.constructor(y)})},c.prototype.isChildDisplayed=function(d){if(this.displayCache.has(d))return this.displayCache.get(d);var h=d.getEl(),m=i(h);return this.displayCache.set(d,m),m},c.prototype.getParent=function(){var d=this.model.parent();return d?new this.constructor(d):null},c.prototype.addChildAt=function(d,h,m){var y,x,b,v,j,S,k,N;m===void 0&&(m={action:"add-component"});var P=((x=(y=this.model)===null||y===void 0?void 0:y.isInstanceOf)===null||x===void 0?void 0:x.call(y,"text"))&&((v=(b=d?.model)===null||b===void 0?void 0:b.get)===null||v===void 0?void 0:v.call(b,"textable"));if(P)return(N=(k=(S=(j=this.model)===null||j===void 0?void 0:j.getView)===null||S===void 0?void 0:S.call(j))===null||k===void 0?void 0:k.insertComponent)===null||N===void 0?void 0:N.call(k,d?.model,{action:m.action});var R=this.model.components().add(d.model,{at:this.getRealIndex(h),action:m.action});return new this.constructor(R)},c.prototype.removeChildAt=function(d,h){h===void 0&&(h={temporary:!1});var m=this.model.components().at(this.getRealIndex(d));m&&this.model.components().remove(m,h)},c.prototype.indexOfChild=function(d){return this.getDisplayIndex(d)},c.prototype.getDisplayIndex=function(d){var h=this.getDisplayedChildren();return h?h.findIndex(function(m){return m.model===d.model}):-1},c.prototype.getRealIndex=function(d){if(d===-1)return-1;for(var h=0,m=this.model.components(),y=0;y<m.length;y++){var x=m.at(y),b=this.isChildDisplayed(x);if(b&&h++,h===d+1)return y}return-1},c.prototype.canMove=function(d,h){return this.model.em.Components.canMove(this.model,d.model,this.getRealIndex(h)).result},c.prototype.equals=function(d){return!!d?._model&&this._model.getId()===d._model.getId()},c.prototype.restNodeState=function(){this.clearState();var d=this.model;this.setContentEditable(!1),d.em.getEditing()===d&&this.disableEditing()},c.prototype.setContentEditable=function(d){this.element&&this.isTextNode()&&(this.element.contentEditable=d?"true":"false")},c.prototype.disableEditing=function(){var d,h;(h=(d=this.view)===null||d===void 0?void 0:d.disableEditing)===null||h===void 0||h.call(d)},c.prototype.clearState=function(){var d,h;(h=(d=this.model).set)===null||h===void 0||h.call(d,"status","")},c.prototype.setSelectedParentState=function(){var d,h;(h=(d=this.model).set)===null||h===void 0||h.call(d,"status","selected-parent")},c.prototype.isTextNode=function(){var d,h;return(h=(d=this.model).isInstanceOf)===null||h===void 0?void 0:h.call(d,"text")},c.prototype.isTextable=function(){var d,h;return(h=(d=this.model).get)===null||h===void 0?void 0:h.call(d,"textable")},c})(t.$);function i(l){return l?typeof l=="object"&&l.nodeType===Node.ELEMENT_NODE&&window.getComputedStyle(l).display!=="none"&&l.offsetWidth>0&&l.offsetHeight>0:!1}}),1447:((a,r,e)=>{e.d(r,{A:()=>i});var t=e(6756),s=(function(){var l=function(c,d){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,m){h.__proto__=m}||function(h,m){for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(h[y]=m[y])},l(c,d)};return function(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");l(c,d);function h(){this.constructor=c}c.prototype=d===null?Object.create(d):(h.prototype=d.prototype,new h)}})(),o=(function(l){s(c,l);function c(){var d=l!==null&&l.apply(this,arguments)||this;return d._dropAreaConfig={ratio:.8,minUndroppableDimension:1,maxUndroppableDimension:15},d}return Object.defineProperty(c.prototype,"view",{get:function(){var d,h;return(h=(d=this.model).getView)===null||h===void 0?void 0:h.call(d)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"element",{get:function(){var d,h;return(h=(d=this.model).getEl)===null||h===void 0?void 0:h.call(d)},enumerable:!1,configurable:!0}),c})(t.h);const i=o}),3178:((a,r,e)=>{e.d(r,{$:()=>t});var t=(function(){function s(o,i){i===void 0&&(i={}),this._dropAreaConfig={ratio:1,minUndroppableDimension:0,maxUndroppableDimension:0},this._model=o,this._dragSource=i}return Object.defineProperty(s.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"dragSource",{get:function(){return this._dragSource},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"dropArea",{get:function(){var o,i;return this.getParent()?(i=this.nodeDimensions)===null||i===void 0?void 0:i.getDropArea(this._dropAreaConfig):(o=this.nodeDimensions)===null||o===void 0?void 0:o.clone()},enumerable:!1,configurable:!0}),s.prototype.isWithinDropBounds=function(o,i){return!!this.dropArea&&this.dropArea.isWithinBounds(o,i)},s.prototype.equals=function(o){return!!o?._model&&this._model===o._model},s.prototype.adjustDimensions=function(o){var i,l;o.topDifference===0&&o.leftDifference===0||((i=this.nodeDimensions)===null||i===void 0||i.adjustDimensions(o),(l=this.childrenDimensions)===null||l===void 0||l.forEach(function(c){return c.adjustDimensions(o)}))},s})()}),8433:((a,r,e)=>{e.d(r,{A:()=>t});var t;(function(s){s.Vertical="Vertical",s.Horizontal="Horizontal",s.BothDirections="BothDirections"})(t||(t={}))}),585:((a,r,e)=>{var t={"./CanvasClear":9484,"./CanvasClear.ts":9484,"./CanvasMove":9516,"./CanvasMove.ts":9516,"./CommandAbstract":9946,"./CommandAbstract.ts":9946,"./ComponentDelete":7801,"./ComponentDelete.ts":7801,"./ComponentDrag":4864,"./ComponentDrag.ts":4864,"./ComponentEnter":6134,"./ComponentEnter.ts":6134,"./ComponentExit":914,"./ComponentExit.ts":914,"./ComponentNext":5547,"./ComponentNext.ts":5547,"./ComponentPrev":8655,"./ComponentPrev.ts":8655,"./ComponentStyleClear":7640,"./ComponentStyleClear.ts":7640,"./CopyComponent":5837,"./CopyComponent.ts":5837,"./ExportTemplate":6477,"./ExportTemplate.ts":6477,"./Fullscreen":1772,"./Fullscreen.ts":1772,"./MoveComponent":741,"./MoveComponent.ts":741,"./OpenAssets":2924,"./OpenAssets.ts":2924,"./OpenBlocks":3963,"./OpenBlocks.ts":3963,"./OpenLayers":1479,"./OpenLayers.ts":1479,"./OpenStyleManager":3473,"./OpenStyleManager.ts":3473,"./OpenTraitManager":5054,"./OpenTraitManager.ts":5054,"./PasteComponent":6979,"./PasteComponent.ts":6979,"./Preview":4457,"./Preview.ts":4457,"./Resize":5493,"./Resize.ts":5493,"./SelectComponent":9317,"./SelectComponent.ts":9317,"./SelectPosition":1406,"./SelectPosition.ts":1406,"./ShowOffset":9395,"./ShowOffset.ts":9395,"./SwitchVisibility":7285,"./SwitchVisibility.ts":7285};function s(i){var l=o(i);return e(l)}function o(i){if(!e.o(t,i)){var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}return t[i]}s.keys=function(){return Object.keys(t)},s.resolve=o,a.exports=s,s.id=585}),5706:((a,r,e)=>{e.r(r),e.d(r,{VERSION:()=>s,after:()=>Zn,all:()=>Cr,allKeys:()=>Ze,any:()=>Lt,assign:()=>pn,before:()=>ka,bind:()=>nr,bindAll:()=>kn,chain:()=>fs,chunk:()=>Fa,clone:()=>ht,collect:()=>_t,compact:()=>Jc,compose:()=>qn,constant:()=>ne,contains:()=>dr,countBy:()=>Ko,create:()=>jr,debounce:()=>ro,default:()=>el,defaults:()=>In,defer:()=>zn,delay:()=>Vn,detect:()=>tn,difference:()=>mc,drop:()=>li,each:()=>ot,escape:()=>bt,every:()=>Cr,extend:()=>br,extendOwn:()=>pn,filter:()=>$t,find:()=>tn,findIndex:()=>Xn,findKey:()=>La,findLastIndex:()=>Ma,findWhere:()=>Me,first:()=>Mi,flatten:()=>Tl,foldl:()=>At,foldr:()=>sr,forEach:()=>ot,functions:()=>Ur,get:()=>Wr,groupBy:()=>is,has:()=>Bn,head:()=>Mi,identity:()=>te,include:()=>dr,includes:()=>dr,indexBy:()=>Ln,indexOf:()=>Gr,initial:()=>Ia,inject:()=>At,intersection:()=>qt,invert:()=>_n,invoke:()=>Dr,isArguments:()=>ee,isArray:()=>We,isArrayBuffer:()=>G,isBoolean:()=>A,isDataView:()=>ze,isDate:()=>Q,isElement:()=>q,isEmpty:()=>ie,isEqual:()=>ft,isError:()=>re,isFinite:()=>Ne,isFunction:()=>fe,isMap:()=>tt,isMatch:()=>_e,isNaN:()=>Ie,isNull:()=>W,isNumber:()=>D,isObject:()=>V,isRegExp:()=>oe,isSet:()=>Ut,isString:()=>K,isSymbol:()=>Te,isTypedArray:()=>he,isUndefined:()=>Z,isWeakMap:()=>wt,isWeakSet:()=>er,iteratee:()=>jt,keys:()=>Ge,last:()=>Bo,lastIndexOf:()=>cn,map:()=>_t,mapObject:()=>$e,matcher:()=>je,matches:()=>je,max:()=>Kr,memoize:()=>Sn,methods:()=>Ur,min:()=>Cn,mixin:()=>Ba,negate:()=>Yn,noop:()=>ve,now:()=>de,object:()=>wn,omit:()=>Fo,once:()=>ks,pairs:()=>rn,partial:()=>mt,partition:()=>en,pick:()=>Do,pluck:()=>Or,property:()=>Re,propertyOf:()=>Ve,random:()=>Ot,range:()=>Wn,reduce:()=>At,reduceRight:()=>sr,reject:()=>Bt,rest:()=>li,restArguments:()=>H,result:()=>Ns,sample:()=>Qr,select:()=>$t,shuffle:()=>Hr,size:()=>aa,some:()=>Lt,sortBy:()=>Qn,sortedIndex:()=>es,tail:()=>li,take:()=>Mi,tap:()=>vr,template:()=>fa,templateSettings:()=>Br,throttle:()=>Kn,times:()=>st,toArray:()=>hs,toPath:()=>Rn,transpose:()=>Qt,unescape:()=>cr,union:()=>Vt,uniq:()=>rt,unique:()=>rt,uniqueId:()=>Aa,unzip:()=>Qt,values:()=>zr,where:()=>Zr,without:()=>gc,wrap:()=>ps,zip:()=>xr});var t={};e.r(t),e.d(t,{VERSION:()=>s,after:()=>Zn,all:()=>Cr,allKeys:()=>Ze,any:()=>Lt,assign:()=>pn,before:()=>ka,bind:()=>nr,bindAll:()=>kn,chain:()=>fs,chunk:()=>Fa,clone:()=>ht,collect:()=>_t,compact:()=>Jc,compose:()=>qn,constant:()=>ne,contains:()=>dr,countBy:()=>Ko,create:()=>jr,debounce:()=>ro,default:()=>Yo,defaults:()=>In,defer:()=>zn,delay:()=>Vn,detect:()=>tn,difference:()=>mc,drop:()=>li,each:()=>ot,escape:()=>bt,every:()=>Cr,extend:()=>br,extendOwn:()=>pn,filter:()=>$t,find:()=>tn,findIndex:()=>Xn,findKey:()=>La,findLastIndex:()=>Ma,findWhere:()=>Me,first:()=>Mi,flatten:()=>Tl,foldl:()=>At,foldr:()=>sr,forEach:()=>ot,functions:()=>Ur,get:()=>Wr,groupBy:()=>is,has:()=>Bn,head:()=>Mi,identity:()=>te,include:()=>dr,includes:()=>dr,indexBy:()=>Ln,indexOf:()=>Gr,initial:()=>Ia,inject:()=>At,intersection:()=>qt,invert:()=>_n,invoke:()=>Dr,isArguments:()=>ee,isArray:()=>We,isArrayBuffer:()=>G,isBoolean:()=>A,isDataView:()=>ze,isDate:()=>Q,isElement:()=>q,isEmpty:()=>ie,isEqual:()=>ft,isError:()=>re,isFinite:()=>Ne,isFunction:()=>fe,isMap:()=>tt,isMatch:()=>_e,isNaN:()=>Ie,isNull:()=>W,isNumber:()=>D,isObject:()=>V,isRegExp:()=>oe,isSet:()=>Ut,isString:()=>K,isSymbol:()=>Te,isTypedArray:()=>he,isUndefined:()=>Z,isWeakMap:()=>wt,isWeakSet:()=>er,iteratee:()=>jt,keys:()=>Ge,last:()=>Bo,lastIndexOf:()=>cn,map:()=>_t,mapObject:()=>$e,matcher:()=>je,matches:()=>je,max:()=>Kr,memoize:()=>Sn,methods:()=>Ur,min:()=>Cn,mixin:()=>Ba,negate:()=>Yn,noop:()=>ve,now:()=>de,object:()=>wn,omit:()=>Fo,once:()=>ks,pairs:()=>rn,partial:()=>mt,partition:()=>en,pick:()=>Do,pluck:()=>Or,property:()=>Re,propertyOf:()=>Ve,random:()=>Ot,range:()=>Wn,reduce:()=>At,reduceRight:()=>sr,reject:()=>Bt,rest:()=>li,restArguments:()=>H,result:()=>Ns,sample:()=>Qr,select:()=>$t,shuffle:()=>Hr,size:()=>aa,some:()=>Lt,sortBy:()=>Qn,sortedIndex:()=>es,tail:()=>li,take:()=>Mi,tap:()=>vr,template:()=>fa,templateSettings:()=>Br,throttle:()=>Kn,times:()=>st,toArray:()=>hs,toPath:()=>Rn,transpose:()=>Qt,unescape:()=>cr,union:()=>Vt,uniq:()=>rt,unique:()=>rt,uniqueId:()=>Aa,unzip:()=>Qt,values:()=>zr,where:()=>Zr,without:()=>gc,wrap:()=>ps,zip:()=>xr});var s="1.13.1",o=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},i=Array.prototype,l=Object.prototype,c=typeof Symbol<"u"?Symbol.prototype:null,d=i.push,h=i.slice,m=l.toString,y=l.hasOwnProperty,x=typeof ArrayBuffer<"u",b=typeof DataView<"u",v=Array.isArray,j=Object.keys,S=Object.create,k=x&&ArrayBuffer.isView,N=isNaN,P=isFinite,R=!{toString:null}.propertyIsEnumerable("toString"),F=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],z=Math.pow(2,53)-1;function H(ge,Pe){return Pe=Pe==null?ge.length-1:+Pe,function(){for(var Je=Math.max(arguments.length-Pe,0),it=Array(Je),St=0;St<Je;St++)it[St]=arguments[St+Pe];switch(Pe){case 0:return ge.call(this,it);case 1:return ge.call(this,arguments[0],it);case 2:return ge.call(this,arguments[0],arguments[1],it)}var xt=Array(Pe+1);for(St=0;St<Pe;St++)xt[St]=arguments[St];return xt[Pe]=it,ge.apply(this,xt)}}function V(ge){var Pe=typeof ge;return Pe==="function"||Pe==="object"&&!!ge}function W(ge){return ge===null}function Z(ge){return ge===void 0}function A(ge){return ge===!0||ge===!1||m.call(ge)==="[object Boolean]"}function q(ge){return!!(ge&&ge.nodeType===1)}function I(ge){var Pe="[object "+ge+"]";return function(Je){return m.call(Je)===Pe}}const K=I("String"),D=I("Number"),Q=I("Date"),oe=I("RegExp"),re=I("Error"),Te=I("Symbol"),G=I("ArrayBuffer");var Y=I("Function"),Se=o.document&&o.document.childNodes;typeof Int8Array!="object"&&typeof Se!="function"&&(Y=function(ge){return typeof ge=="function"||!1});const fe=Y,Ee=I("Object");var Ae=b&&Ee(new DataView(new ArrayBuffer(8))),qe=typeof Map<"u"&&Ee(new Map),we=I("DataView");function Oe(ge){return ge!=null&&fe(ge.getInt8)&&G(ge.buffer)}const ze=Ae?Oe:we,We=v||I("Array");function pt(ge,Pe){return ge!=null&&y.call(ge,Pe)}var Pt=I("Arguments");(function(){Pt(arguments)||(Pt=function(ge){return pt(ge,"callee")})})();const ee=Pt;function Ne(ge){return!Te(ge)&&P(ge)&&!isNaN(parseFloat(ge))}function Ie(ge){return D(ge)&&N(ge)}function ne(ge){return function(){return ge}}function M(ge){return function(Pe){var Je=ge(Pe);return typeof Je=="number"&&Je>=0&&Je<=z}}function U(ge){return function(Pe){return Pe?.[ge]}}const J=U("byteLength"),ce=M(J);var ue=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function xe(ge){return k?k(ge)&&!ze(ge):ce(ge)&&ue.test(m.call(ge))}const he=x?xe:ne(!1),se=U("length");function Le(ge){for(var Pe={},Je=ge.length,it=0;it<Je;++it)Pe[ge[it]]=!0;return{contains:function(St){return Pe[St]},push:function(St){return Pe[St]=!0,ge.push(St)}}}function Ue(ge,Pe){Pe=Le(Pe);var Je=F.length,it=ge.constructor,St=fe(it)&&it.prototype||l,xt="constructor";for(pt(ge,xt)&&!Pe.contains(xt)&&Pe.push(xt);Je--;)xt=F[Je],xt in ge&&ge[xt]!==St[xt]&&!Pe.contains(xt)&&Pe.push(xt)}function Ge(ge){if(!V(ge))return[];if(j)return j(ge);var Pe=[];for(var Je in ge)pt(ge,Je)&&Pe.push(Je);return R&&Ue(ge,Pe),Pe}function ie(ge){if(ge==null)return!0;var Pe=se(ge);return typeof Pe=="number"&&(We(ge)||K(ge)||ee(ge))?Pe===0:se(Ge(ge))===0}function _e(ge,Pe){var Je=Ge(Pe),it=Je.length;if(ge==null)return!it;for(var St=Object(ge),xt=0;xt<it;xt++){var Xt=Je[xt];if(Pe[Xt]!==St[Xt]||!(Xt in St))return!1}return!0}function le(ge){if(ge instanceof le)return ge;if(!(this instanceof le))return new le(ge);this._wrapped=ge}le.VERSION=s,le.prototype.value=function(){return this._wrapped},le.prototype.valueOf=le.prototype.toJSON=le.prototype.value,le.prototype.toString=function(){return String(this._wrapped)};function Xe(ge){return new Uint8Array(ge.buffer||ge,ge.byteOffset||0,J(ge))}var Fe="[object DataView]";function dt(ge,Pe,Je,it){if(ge===Pe)return ge!==0||1/ge===1/Pe;if(ge==null||Pe==null)return!1;if(ge!==ge)return Pe!==Pe;var St=typeof ge;return St!=="function"&&St!=="object"&&typeof Pe!="object"?!1:lt(ge,Pe,Je,it)}function lt(ge,Pe,Je,it){ge instanceof le&&(ge=ge._wrapped),Pe instanceof le&&(Pe=Pe._wrapped);var St=m.call(ge);if(St!==m.call(Pe))return!1;if(Ae&&St=="[object Object]"&&ze(ge)){if(!ze(Pe))return!1;St=Fe}switch(St){case"[object RegExp]":case"[object String]":return""+ge==""+Pe;case"[object Number]":return+ge!=+ge?+Pe!=+Pe:+ge==0?1/+ge===1/Pe:+ge==+Pe;case"[object Date]":case"[object Boolean]":return+ge==+Pe;case"[object Symbol]":return c.valueOf.call(ge)===c.valueOf.call(Pe);case"[object ArrayBuffer]":case Fe:return lt(Xe(ge),Xe(Pe),Je,it)}var xt=St==="[object Array]";if(!xt&&he(ge)){var Xt=J(ge);if(Xt!==J(Pe))return!1;if(ge.buffer===Pe.buffer&&ge.byteOffset===Pe.byteOffset)return!0;xt=!0}if(!xt){if(typeof ge!="object"||typeof Pe!="object")return!1;var Nr=ge.constructor,On=Pe.constructor;if(Nr!==On&&!(fe(Nr)&&Nr instanceof Nr&&fe(On)&&On instanceof On)&&"constructor"in ge&&"constructor"in Pe)return!1}Je=Je||[],it=it||[];for(var Nn=Je.length;Nn--;)if(Je[Nn]===ge)return it[Nn]===Pe;if(Je.push(ge),it.push(Pe),xt){if(Nn=ge.length,Nn!==Pe.length)return!1;for(;Nn--;)if(!dt(ge[Nn],Pe[Nn],Je,it))return!1}else{var _s=Ge(ge),Zs;if(Nn=_s.length,Ge(Pe).length!==Nn)return!1;for(;Nn--;)if(Zs=_s[Nn],!(pt(Pe,Zs)&&dt(ge[Zs],Pe[Zs],Je,it)))return!1}return Je.pop(),it.pop(),!0}function ft(ge,Pe){return dt(ge,Pe)}function Ze(ge){if(!V(ge))return[];var Pe=[];for(var Je in ge)Pe.push(Je);return R&&Ue(ge,Pe),Pe}function Nt(ge){var Pe=se(ge);return function(Je){if(Je==null)return!1;var it=Ze(Je);if(se(it))return!1;for(var St=0;St<Pe;St++)if(!fe(Je[ge[St]]))return!1;return ge!==ye||!fe(Je[Mt])}}var Mt="forEach",vt="has",Jt=["clear","delete"],wr=["get",vt,"set"],Wt=Jt.concat(Mt,wr),ye=Jt.concat(wr),Be=["add"].concat(Jt,Mt,vt);const tt=qe?Nt(Wt):I("Map"),wt=qe?Nt(ye):I("WeakMap"),Ut=qe?Nt(Be):I("Set"),er=I("WeakSet");function zr(ge){for(var Pe=Ge(ge),Je=Pe.length,it=Array(Je),St=0;St<Je;St++)it[St]=ge[Pe[St]];return it}function rn(ge){for(var Pe=Ge(ge),Je=Pe.length,it=Array(Je),St=0;St<Je;St++)it[St]=[Pe[St],ge[Pe[St]]];return it}function _n(ge){for(var Pe={},Je=Ge(ge),it=0,St=Je.length;it<St;it++)Pe[ge[Je[it]]]=Je[it];return Pe}function Ur(ge){var Pe=[];for(var Je in ge)fe(ge[Je])&&Pe.push(Je);return Pe.sort()}function ar(ge,Pe){return function(Je){var it=arguments.length;if(Pe&&(Je=Object(Je)),it<2||Je==null)return Je;for(var St=1;St<it;St++)for(var xt=arguments[St],Xt=ge(xt),Nr=Xt.length,On=0;On<Nr;On++){var Nn=Xt[On];(!Pe||Je[Nn]===void 0)&&(Je[Nn]=xt[Nn])}return Je}}const br=ar(Ze),pn=ar(Ge),In=ar(Ze,!0);function on(){return function(){}}function Er(ge){if(!V(ge))return{};if(S)return S(ge);var Pe=on();Pe.prototype=ge;var Je=new Pe;return Pe.prototype=null,Je}function jr(ge,Pe){var Je=Er(ge);return Pe&&pn(Je,Pe),Je}function ht(ge){return V(ge)?We(ge)?ge.slice():br({},ge):ge}function vr(ge,Pe){return Pe(ge),ge}function Rn(ge){return We(ge)?ge:[ge]}le.toPath=Rn;function bn(ge){return le.toPath(ge)}function En(ge,Pe){for(var Je=Pe.length,it=0;it<Je;it++){if(ge==null)return;ge=ge[Pe[it]]}return Je?ge:void 0}function Wr(ge,Pe,Je){var it=En(ge,bn(Pe));return Z(it)?Je:it}function Bn(ge,Pe){Pe=bn(Pe);for(var Je=Pe.length,it=0;it<Je;it++){var St=Pe[it];if(!pt(ge,St))return!1;ge=ge[St]}return!!Je}function te(ge){return ge}function je(ge){return ge=pn({},ge),function(Pe){return _e(Pe,ge)}}function Re(ge){return ge=bn(ge),function(Pe){return En(Pe,ge)}}function Ye(ge,Pe,Je){if(Pe===void 0)return ge;switch(Je??3){case 1:return function(it){return ge.call(Pe,it)};case 3:return function(it,St,xt){return ge.call(Pe,it,St,xt)};case 4:return function(it,St,xt,Xt){return ge.call(Pe,it,St,xt,Xt)}}return function(){return ge.apply(Pe,arguments)}}function at(ge,Pe,Je){return ge==null?te:fe(ge)?Ye(ge,Pe,Je):V(ge)&&!We(ge)?je(ge):Re(ge)}function jt(ge,Pe){return at(ge,Pe,1/0)}le.iteratee=jt;function Qe(ge,Pe,Je){return le.iteratee!==jt?le.iteratee(ge,Pe):at(ge,Pe,Je)}function $e(ge,Pe,Je){Pe=Qe(Pe,Je);for(var it=Ge(ge),St=it.length,xt={},Xt=0;Xt<St;Xt++){var Nr=it[Xt];xt[Nr]=Pe(ge[Nr],Nr,ge)}return xt}function ve(){}function Ve(ge){return ge==null?ve:function(Pe){return Wr(ge,Pe)}}function st(ge,Pe,Je){var it=Array(Math.max(0,ge));Pe=Ye(Pe,Je,1);for(var St=0;St<ge;St++)it[St]=Pe(St);return it}function Ot(ge,Pe){return Pe==null&&(Pe=ge,ge=0),ge+Math.floor(Math.random()*(Pe-ge+1))}const de=Date.now||function(){return new Date().getTime()};function ke(ge){var Pe=function(xt){return ge[xt]},Je="(?:"+Ge(ge).join("|")+")",it=RegExp(Je),St=RegExp(Je,"g");return function(xt){return xt=xt==null?"":""+xt,it.test(xt)?xt.replace(St,Pe):xt}}const ct={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},bt=ke(ct),Ft=_n(ct),cr=ke(Ft),Br=le.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var kt=/(.)^/,Yr={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Xr=/\\|'|\r|\n|\u2028|\u2029/g;function ma(ge){return"\\"+Yr[ge]}var Jn=/^\s*(\w|\$)+\s*$/;function fa(ge,Pe,Je){!Pe&&Je&&(Pe=Je),Pe=In({},Pe,le.templateSettings);var it=RegExp([(Pe.escape||kt).source,(Pe.interpolate||kt).source,(Pe.evaluate||kt).source].join("|")+"|$","g"),St=0,xt="__p+='";ge.replace(it,function(Nn,_s,Zs,Ku,Yu){return xt+=ge.slice(St,Yu).replace(Xr,ma),St=Yu+Nn.length,_s?xt+=`'+
((__t=(`+_s+`))==null?'':_.escape(__t))+
'`:Zs?xt+=`'+
((__t=(`+Zs+`))==null?'':__t)+
'`:Ku&&(xt+=`';
`+Ku+`
__p+='`),Nn}),xt+=`';
`;var Xt=Pe.variable;if(Xt){if(!Jn.test(Xt))throw new Error("variable is not a bare identifier: "+Xt)}else xt=`with(obj||{}){
`+xt+`}
`,Xt="obj";xt=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+xt+`return __p;
`;var Nr;try{Nr=new Function(Xt,"_",xt)}catch(Nn){throw Nn.source=xt,Nn}var On=function(Nn){return Nr.call(this,Nn,le)};return On.source="function("+Xt+`){
`+xt+"}",On}function Ns(ge,Pe,Je){Pe=bn(Pe);var it=Pe.length;if(!it)return fe(Je)?Je.call(ge):Je;for(var St=0;St<it;St++){var xt=ge?.[Pe[St]];xt===void 0&&(xt=Je,St=it),ge=fe(xt)?xt.call(ge):xt}return ge}var Ja=0;function Aa(ge){var Pe=++Ja+"";return ge?ge+Pe:Pe}function fs(ge){var Pe=le(ge);return Pe._chain=!0,Pe}function Lr(ge,Pe,Je,it,St){if(!(it instanceof Pe))return ge.apply(Je,St);var xt=Er(ge.prototype),Xt=ge.apply(xt,St);return V(Xt)?Xt:xt}var kr=H(function(ge,Pe){var Je=kr.placeholder,it=function(){for(var St=0,xt=Pe.length,Xt=Array(xt),Nr=0;Nr<xt;Nr++)Xt[Nr]=Pe[Nr]===Je?arguments[St++]:Pe[Nr];for(;St<arguments.length;)Xt.push(arguments[St++]);return Lr(ge,it,this,this,Xt)};return it});kr.placeholder=le;const mt=kr,nr=H(function(ge,Pe,Je){if(!fe(ge))throw new TypeError("Bind must be called on a function");var it=H(function(St){return Lr(ge,it,Pe,this,Je.concat(St))});return it}),Ar=M(se);function Rr(ge,Pe,Je,it){if(it=it||[],!Pe&&Pe!==0)Pe=1/0;else if(Pe<=0)return it.concat(ge);for(var St=it.length,xt=0,Xt=se(ge);xt<Xt;xt++){var Nr=ge[xt];if(Ar(Nr)&&(We(Nr)||ee(Nr)))if(Pe>1)Rr(Nr,Pe-1,Je,it),St=it.length;else for(var On=0,Nn=Nr.length;On<Nn;)it[St++]=Nr[On++];else Je||(it[St++]=Nr)}return it}const kn=H(function(ge,Pe){Pe=Rr(Pe,!1,!1);var Je=Pe.length;if(Je<1)throw new Error("bindAll must be passed function names");for(;Je--;){var it=Pe[Je];ge[it]=nr(ge[it],ge)}return ge});function Sn(ge,Pe){var Je=function(it){var St=Je.cache,xt=""+(Pe?Pe.apply(this,arguments):it);return pt(St,xt)||(St[xt]=ge.apply(this,arguments)),St[xt]};return Je.cache={},Je}const Vn=H(function(ge,Pe,Je){return setTimeout(function(){return ge.apply(null,Je)},Pe)}),zn=mt(Vn,le,1);function Kn(ge,Pe,Je){var it,St,xt,Xt,Nr=0;Je||(Je={});var On=function(){Nr=Je.leading===!1?0:de(),it=null,Xt=ge.apply(St,xt),it||(St=xt=null)},Nn=function(){var _s=de();!Nr&&Je.leading===!1&&(Nr=_s);var Zs=Pe-(_s-Nr);return St=this,xt=arguments,Zs<=0||Zs>Pe?(it&&(clearTimeout(it),it=null),Nr=_s,Xt=ge.apply(St,xt),it||(St=xt=null)):!it&&Je.trailing!==!1&&(it=setTimeout(On,Zs)),Xt};return Nn.cancel=function(){clearTimeout(it),Nr=0,it=St=xt=null},Nn}function ro(ge,Pe,Je){var it,St,xt,Xt,Nr,On=function(){var _s=de()-St;Pe>_s?it=setTimeout(On,Pe-_s):(it=null,Je||(Xt=ge.apply(Nr,xt)),it||(xt=Nr=null))},Nn=H(function(_s){return Nr=this,xt=_s,St=de(),it||(it=setTimeout(On,Pe),Je&&(Xt=ge.apply(Nr,xt))),Xt});return Nn.cancel=function(){clearTimeout(it),it=xt=Nr=null},Nn}function ps(ge,Pe){return mt(Pe,ge)}function Yn(ge){return function(){return!ge.apply(this,arguments)}}function qn(){var ge=arguments,Pe=ge.length-1;return function(){for(var Je=Pe,it=ge[Pe].apply(this,arguments);Je--;)it=ge[Je].call(this,it);return it}}function Zn(ge,Pe){return function(){if(--ge<1)return Pe.apply(this,arguments)}}function ka(ge,Pe){var Je;return function(){return--ge>0&&(Je=Pe.apply(this,arguments)),ge<=1&&(Pe=null),Je}}const ks=mt(ka,2);function La(ge,Pe,Je){Pe=Qe(Pe,Je);for(var it=Ge(ge),St,xt=0,Xt=it.length;xt<Xt;xt++)if(St=it[xt],Pe(ge[St],St,ge))return St}function wa(ge){return function(Pe,Je,it){Je=Qe(Je,it);for(var St=se(Pe),xt=ge>0?0:St-1;xt>=0&&xt<St;xt+=ge)if(Je(Pe[xt],xt,Pe))return xt;return-1}}const Xn=wa(1),Ma=wa(-1);function es(ge,Pe,Je,it){Je=Qe(Je,it,1);for(var St=Je(Pe),xt=0,Xt=se(ge);xt<Xt;){var Nr=Math.floor((xt+Xt)/2);Je(ge[Nr])<St?xt=Nr+1:Xt=Nr}return xt}function qr(ge,Pe,Je){return function(it,St,xt){var Xt=0,Nr=se(it);if(typeof xt=="number")ge>0?Xt=xt>=0?xt:Math.max(xt+Nr,Xt):Nr=xt>=0?Math.min(xt+1,Nr):xt+Nr+1;else if(Je&&xt&&Nr)return xt=Je(it,St),it[xt]===St?xt:-1;if(St!==St)return xt=Pe(h.call(it,Xt,Nr),Ie),xt>=0?xt+Xt:-1;for(xt=ge>0?Xt:Nr-1;xt>=0&&xt<Nr;xt+=ge)if(it[xt]===St)return xt;return-1}}const Gr=qr(1,Xn,es),cn=qr(-1,Ma);function tn(ge,Pe,Je){var it=Ar(ge)?Xn:La,St=it(ge,Pe,Je);if(St!==void 0&&St!==-1)return ge[St]}function Me(ge,Pe){return tn(ge,je(Pe))}function ot(ge,Pe,Je){Pe=Ye(Pe,Je);var it,St;if(Ar(ge))for(it=0,St=ge.length;it<St;it++)Pe(ge[it],it,ge);else{var xt=Ge(ge);for(it=0,St=xt.length;it<St;it++)Pe(ge[xt[it]],xt[it],ge)}return ge}function _t(ge,Pe,Je){Pe=Qe(Pe,Je);for(var it=!Ar(ge)&&Ge(ge),St=(it||ge).length,xt=Array(St),Xt=0;Xt<St;Xt++){var Nr=it?it[Xt]:Xt;xt[Xt]=Pe(ge[Nr],Nr,ge)}return xt}function It(ge){var Pe=function(Je,it,St,xt){var Xt=!Ar(Je)&&Ge(Je),Nr=(Xt||Je).length,On=ge>0?0:Nr-1;for(xt||(St=Je[Xt?Xt[On]:On],On+=ge);On>=0&&On<Nr;On+=ge){var Nn=Xt?Xt[On]:On;St=it(St,Je[Nn],Nn,Je)}return St};return function(Je,it,St,xt){var Xt=arguments.length>=3;return Pe(Je,Ye(it,xt,4),St,Xt)}}const At=It(1),sr=It(-1);function $t(ge,Pe,Je){var it=[];return Pe=Qe(Pe,Je),ot(ge,function(St,xt,Xt){Pe(St,xt,Xt)&&it.push(St)}),it}function Bt(ge,Pe,Je){return $t(ge,Yn(Qe(Pe)),Je)}function Cr(ge,Pe,Je){Pe=Qe(Pe,Je);for(var it=!Ar(ge)&&Ge(ge),St=(it||ge).length,xt=0;xt<St;xt++){var Xt=it?it[xt]:xt;if(!Pe(ge[Xt],Xt,ge))return!1}return!0}function Lt(ge,Pe,Je){Pe=Qe(Pe,Je);for(var it=!Ar(ge)&&Ge(ge),St=(it||ge).length,xt=0;xt<St;xt++){var Xt=it?it[xt]:xt;if(Pe(ge[Xt],Xt,ge))return!0}return!1}function dr(ge,Pe,Je,it){return Ar(ge)||(ge=zr(ge)),(typeof Je!="number"||it)&&(Je=0),Gr(ge,Pe,Je)>=0}const Dr=H(function(ge,Pe,Je){var it,St;return fe(Pe)?St=Pe:(Pe=bn(Pe),it=Pe.slice(0,-1),Pe=Pe[Pe.length-1]),_t(ge,function(xt){var Xt=St;if(!Xt){if(it&&it.length&&(xt=En(xt,it)),xt==null)return;Xt=xt[Pe]}return Xt==null?Xt:Xt.apply(xt,Je)})});function Or(ge,Pe){return _t(ge,Re(Pe))}function Zr(ge,Pe){return $t(ge,je(Pe))}function Kr(ge,Pe,Je){var it=-1/0,St=-1/0,xt,Xt;if(Pe==null||typeof Pe=="number"&&typeof ge[0]!="object"&&ge!=null){ge=Ar(ge)?ge:zr(ge);for(var Nr=0,On=ge.length;Nr<On;Nr++)xt=ge[Nr],xt!=null&&xt>it&&(it=xt)}else Pe=Qe(Pe,Je),ot(ge,function(Nn,_s,Zs){Xt=Pe(Nn,_s,Zs),(Xt>St||Xt===-1/0&&it===-1/0)&&(it=Nn,St=Xt)});return it}function Cn(ge,Pe,Je){var it=1/0,St=1/0,xt,Xt;if(Pe==null||typeof Pe=="number"&&typeof ge[0]!="object"&&ge!=null){ge=Ar(ge)?ge:zr(ge);for(var Nr=0,On=ge.length;Nr<On;Nr++)xt=ge[Nr],xt!=null&&xt<it&&(it=xt)}else Pe=Qe(Pe,Je),ot(ge,function(Nn,_s,Zs){Xt=Pe(Nn,_s,Zs),(Xt<St||Xt===1/0&&it===1/0)&&(it=Nn,St=Xt)});return it}function Qr(ge,Pe,Je){if(Pe==null||Je)return Ar(ge)||(ge=zr(ge)),ge[Ot(ge.length-1)];var it=Ar(ge)?ht(ge):zr(ge),St=se(it);Pe=Math.max(Math.min(Pe,St),0);for(var xt=St-1,Xt=0;Xt<Pe;Xt++){var Nr=Ot(Xt,xt),On=it[Xt];it[Xt]=it[Nr],it[Nr]=On}return it.slice(0,Pe)}function Hr(ge){return Qr(ge,1/0)}function Qn(ge,Pe,Je){var it=0;return Pe=Qe(Pe,Je),Or(_t(ge,function(St,xt,Xt){return{value:St,index:it++,criteria:Pe(St,xt,Xt)}}).sort(function(St,xt){var Xt=St.criteria,Nr=xt.criteria;if(Xt!==Nr){if(Xt>Nr||Xt===void 0)return 1;if(Xt<Nr||Nr===void 0)return-1}return St.index-xt.index}),"value")}function Jr(ge,Pe){return function(Je,it,St){var xt=Pe?[[],[]]:{};return it=Qe(it,St),ot(Je,function(Xt,Nr){var On=it(Xt,Nr,Je);ge(xt,Xt,On)}),xt}}const is=Jr(function(ge,Pe,Je){pt(ge,Je)?ge[Je].push(Pe):ge[Je]=[Pe]}),Ln=Jr(function(ge,Pe,Je){ge[Je]=Pe}),Ko=Jr(function(ge,Pe,Je){pt(ge,Je)?ge[Je]++:ge[Je]=1}),en=Jr(function(ge,Pe,Je){ge[Je?0:1].push(Pe)},!0);var ga=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function hs(ge){return ge?We(ge)?h.call(ge):K(ge)?ge.match(ga):Ar(ge)?_t(ge,te):zr(ge):[]}function aa(ge){return ge==null?0:Ar(ge)?ge.length:Ge(ge).length}function Da(ge,Pe,Je){return Pe in Je}const Do=H(function(ge,Pe){var Je={},it=Pe[0];if(ge==null)return Je;fe(it)?(Pe.length>1&&(it=Ye(it,Pe[1])),Pe=Ze(ge)):(it=Da,Pe=Rr(Pe,!1,!1),ge=Object(ge));for(var St=0,xt=Pe.length;St<xt;St++){var Xt=Pe[St],Nr=ge[Xt];it(Nr,Xt,ge)&&(Je[Xt]=Nr)}return Je}),Fo=H(function(ge,Pe){var Je=Pe[0],it;return fe(Je)?(Je=Yn(Je),Pe.length>1&&(it=Pe[1])):(Pe=_t(Rr(Pe,!1,!1),String),Je=function(St,xt){return!dr(Pe,xt)}),Do(ge,Je,it)});function Ia(ge,Pe,Je){return h.call(ge,0,Math.max(0,ge.length-(Pe==null||Je?1:Pe)))}function Mi(ge,Pe,Je){return ge==null||ge.length<1?Pe==null||Je?void 0:[]:Pe==null||Je?ge[0]:Ia(ge,ge.length-Pe)}function li(ge,Pe,Je){return h.call(ge,Pe==null||Je?1:Pe)}function Bo(ge,Pe,Je){return ge==null||ge.length<1?Pe==null||Je?void 0:[]:Pe==null||Je?ge[ge.length-1]:li(ge,Math.max(0,ge.length-Pe))}function Jc(ge){return $t(ge,Boolean)}function Tl(ge,Pe){return Rr(ge,Pe,!1)}const mc=H(function(ge,Pe){return Pe=Rr(Pe,!0,!0),$t(ge,function(Je){return!dr(Pe,Je)})}),gc=H(function(ge,Pe){return mc(ge,Pe)});function rt(ge,Pe,Je,it){A(Pe)||(it=Je,Je=Pe,Pe=!1),Je!=null&&(Je=Qe(Je,it));for(var St=[],xt=[],Xt=0,Nr=se(ge);Xt<Nr;Xt++){var On=ge[Xt],Nn=Je?Je(On,Xt,ge):On;Pe&&!Je?((!Xt||xt!==Nn)&&St.push(On),xt=Nn):Je?dr(xt,Nn)||(xt.push(Nn),St.push(On)):dr(St,On)||St.push(On)}return St}const Vt=H(function(ge){return rt(Rr(ge,!0,!0))});function qt(ge){for(var Pe=[],Je=arguments.length,it=0,St=se(ge);it<St;it++){var xt=ge[it];if(!dr(Pe,xt)){var Xt;for(Xt=1;Xt<Je&&dr(arguments[Xt],xt);Xt++);Xt===Je&&Pe.push(xt)}}return Pe}function Qt(ge){for(var Pe=ge&&Kr(ge,se).length||0,Je=Array(Pe),it=0;it<Pe;it++)Je[it]=Or(ge,it);return Je}const xr=H(Qt);function wn(ge,Pe){for(var Je={},it=0,St=se(ge);it<St;it++)Pe?Je[ge[it]]=Pe[it]:Je[ge[it][0]]=ge[it][1];return Je}function Wn(ge,Pe,Je){Pe==null&&(Pe=ge||0,ge=0),Je||(Je=Pe<ge?-1:1);for(var it=Math.max(Math.ceil((Pe-ge)/Je),0),St=Array(it),xt=0;xt<it;xt++,ge+=Je)St[xt]=ge;return St}function Fa(ge,Pe){if(Pe==null||Pe<1)return[];for(var Je=[],it=0,St=ge.length;it<St;)Je.push(h.call(ge,it,it+=Pe));return Je}function sa(ge,Pe){return ge._chain?le(Pe).chain():Pe}function Ba(ge){return ot(Ur(ge),function(Pe){var Je=le[Pe]=ge[Pe];le.prototype[Pe]=function(){var it=[this._wrapped];return d.apply(it,arguments),sa(this,Je.apply(le,it))}}),le}ot(["pop","push","reverse","shift","sort","splice","unshift"],function(ge){var Pe=i[ge];le.prototype[ge]=function(){var Je=this._wrapped;return Je!=null&&(Pe.apply(Je,arguments),(ge==="shift"||ge==="splice")&&Je.length===0&&delete Je[0]),sa(this,Je)}}),ot(["concat","join","slice"],function(ge){var Pe=i[ge];le.prototype[ge]=function(){var Je=this._wrapped;return Je!=null&&(Je=Pe.apply(Je,arguments)),sa(this,Je)}});const Yo=le;var Ys=Ba(t);Ys._=Ys;const el=Ys})},h5={};function ha(a){var r=h5[a];if(r!==void 0)return r.exports;var e=h5[a]={exports:{}};return UB[a].call(e.exports,e,e.exports,ha),e.exports}ha.n=a=>{var r=a&&a.__esModule?()=>a.default:()=>a;return ha.d(r,{a:r}),r};ha.d=(a,r)=>{for(var e in r)ha.o(r,e)&&!ha.o(a,e)&&Object.defineProperty(a,e,{enumerable:!0,get:r[e]})};ha.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})();ha.o=(a,r)=>Object.prototype.hasOwnProperty.call(a,r);ha.r=a=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var Rb={};ha.d(Rb,{Ay:()=>uQ,I0:()=>XO,nu:()=>ZO});var Ce=ha(5706),Zt=ha(1166);function Ni(a){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];var t=a.raw;return t.reduce(function(s,o,i){var l=r[i-1],c=t[i-1];return Array.isArray(l)?l=l.join(""):c&&c.slice(-1)==="$"?s=s.slice(0,-1):l=(0,Zt.escape)(l),s+l+o})}var $B=function(){return{stylePrefix:"gjs-",components:"",style:"",fromElement:!1,projectData:void 0,noticeOnUnload:!0,showOffsets:!1,showOffsetsSelected:!1,forceClass:!0,height:"900px",width:"100%",log:["warning","error"],baseCss:"",protectedCss:"* { box-sizing: border-box; } body {margin: 0;}",canvasCss:"",defaultCommand:"select-comp",showToolbar:!0,showDevices:!0,devicePreviewMode:!1,mediaCondition:"max-width",tagVarStart:"{[ ",tagVarEnd:" ]}",jsInHtml:!0,nativeDnD:!0,multipleSelection:!0,optsHtml:{},optsCss:{},avoidInlineStyle:!0,avoidDefaults:!0,clearStyles:!1,listenToEl:[],cssIcons:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css",icons:{close:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',move:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"/></svg>',plus:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" /></svg>',caret:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7,10L12,15L17,10H7Z" /></svg>',delete:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" /></svg>',copy:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" /></svg>',arrowUp:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z" /></svg>',chevron:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z" /></svg>',eye:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z" /></svg>',eyeOff:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z" /></svg>'},i18n:{},undoManager:{},assetManager:{},canvas:{},layerManager:{},storageManager:{},richTextEditor:{},domComponents:{},modal:{},codeManager:{},panels:{},commands:{},cssComposer:{},selectorManager:{},deviceManager:{},styleManager:{},blockManager:{},traitManager:{},textViewCode:"Code",keepUnusedStyles:!1,customUI:!1,telemetry:!0}};const VB=$B;var MS=ha(4193),WB=ha.n(MS),po=ha(7774);const HB=(function(a){var r=a.$;if(r&&r.prototype&&r.prototype.constructor.name!=="jQuery"){var e=r.fn;e.hide=function(){return this.css("display","none")},e.show=function(){return this.css("display","block")},e.focus=function(){var o=this.get(0);return o&&o.focus(),this},e.bind=function(o,i){return this.on(o,i)},e.unbind=function(o,i){if((0,Ce.isObject)(o)){for(var l in o)o.hasOwnProperty(l)&&this.off(l,o[l]);return this}else return this.off(o,i)},e.click=function(o){return o?this.on("click",o):this.trigger("click")},e.change=function(o){return o?this.on("change",o):this.trigger("change")},e.keydown=function(o){return o?this.on("keydown",o):this.trigger("keydown")},e.delegate=function(o,i,l,c){return c||(c=l),this.on(i,o,function(d){d.data=l,c(d)})},e.scrollLeft=function(){var o=this.get(0);o=o.nodeType==9?o.defaultView:o;var i=o instanceof Window?o:null;return i?i.pageXOffset:o.scrollLeft||0},e.scrollTop=function(){var o=this.get(0);o=o.nodeType==9?o.defaultView:o;var i=o instanceof Window?o:null;return i?i.pageYOffset:o.scrollTop||0};var t=r.prototype.offset;e.offset=function(o){var i,l;return o&&(i=o.top,l=o.left),typeof i<"u"&&this.css("top","".concat(i,"px")),typeof l<"u"&&this.css("left","".concat(l,"px")),t.call(this)},r.map=function(o,i){for(var l=[],c=0;c<o.length;c++)l.push(i(o[c],c));return l};var s=Array.prototype.indexOf;r.inArray=function(o,i,l){return i==null?-1:s.call(i,o,l)},r.Event=function(o,i){if(!(this instanceof r.Event))return new r.Event(o,i);this.type=o,this.isDefaultPrevented=function(){return!1}}}});var Sr=ha(9156),v3=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),qB=(function(a){v3(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r})(Sr.Kx),GB=(function(a){v3(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.getByComponent=function(e){var t=this;return this.filter(function(s){return t.getComponent(s)===e})[0]},r.prototype.addComponent=function(e,t){var s=this,o=((0,Ce.isArray)(e)?e:[e]).filter(function(i){return!s.hasComponent(i)}).map(function(i){return new qB({component:i})})[0];return this.push(o,t)},r.prototype.getComponent=function(e){return e.get("component")},r.prototype.hasComponent=function(e){var t=this.getByComponent(e);return t&&this.contains(t)},r.prototype.lastComponent=function(){var e=this.last();return e?this.getComponent(e):void 0},r.prototype.allComponents=function(){var e=this;return this.map(function(t){return e.getComponent(t)}).filter(function(t){return t})},r.prototype.removeComponent=function(e,t){var s=this,o=((0,Ce.isArray)(e)?e:[e]).map(function(i){return s.getByComponent(i)});return this.remove(o,t)},r})(Sr.pM);const KB=GB;var YB=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),K1=function(){return K1=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},K1.apply(this,arguments)},ZB=function(a,r,e){if(e||arguments.length===2)for(var t=0,s=r.length,o;t<s;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return a.concat(o||Array.prototype.slice.call(r))},b3=(function(){function a(r,e,t){this.debounced=[],this.collections=[],this.cls=[],this.events={},this._em=r,this._name=e;var s=this.name.charAt(0).toLowerCase()+this.name.slice(1),o=(0,Ce.isUndefined)(r.config[s])?r.config[this.name]:r.config[s],i=o===!0?{}:o||{};i.pStylePrefix=r.config.pStylePrefix||"",!(0,Ce.isUndefined)(o)&&!o&&(i._disable=1),i.em=r,this._config=(0,Zt.deepMerge)(t||{},i)}return Object.defineProperty(a.prototype,"em",{get:function(){return this._em},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),a.prototype.render=function(r){},a.prototype.postLoad=function(r){},a.prototype.onInit=function(){},Object.defineProperty(a.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),a.prototype.getConfig=function(r){return r?this.config[r]:this.config},a.prototype.__logWarn=function(r,e){e===void 0&&(e={}),this.em.logWarning("[".concat(this.name,"]: ").concat(r),e)},a.prototype.destroy=function(){this.__destroy()},a.prototype.__destroy=function(){var r,e,t;(r=this.view)===null||r===void 0||r.remove(),(e=this.state)===null||e===void 0||e.stopListening(),(t=this.state)===null||t===void 0||t.clear(),this.debounced.forEach(function(s){return s.cancel()}),this.collections.forEach(function(s){s.stopListening(),s.reset()})},a.prototype.__appendTo=function(){var r=this.getConfig().appendTo;if(r){var e=(0,Ce.isElement)(r)?r:document.querySelector(r);if(!e)return this.__logWarn('"appendTo" element not found');e.appendChild(this.render())}},a})();const Ai=b3;var qd=(function(a){YB(r,a);function r(e,t,s,o,i,l){l===void 0&&(l={});var c=a.call(this,e,t,i)||this;return c.cls=[],c._itemCache=new Map,c.private=!1,c.all=s,o&&(c.events=o),!l.skipListen&&c.__initListen(),c}return r.prototype.postLoad=function(e){},r.prototype.render=function(e){},r.prototype.getProjectData=function(e){var t={},s=this.storageKey;return s&&(t[s]=e||this.getAll()),t},r.prototype.loadProjectData=function(e,t){e===void 0&&(e={}),t===void 0&&(t={});var s=t.all,o=t.onResult,i=t.reset,l=this.storageKey,c={action:"load"},d=s||this.all,h=e[l];if(typeof h=="string")try{h=JSON.parse(h)}catch{this.__logWarn("Data parsing failed",{input:h})}return i&&h&&d.reset(void 0,c),o?h&&o(h,c):h&&(0,Zt.isDef)(h.length)&&d.reset(h,c),h},r.prototype.clear=function(e){e===void 0&&(e={});var t=this.all;return t&&t.reset(void 0,e),this},r.prototype.getAll=function(){return ZB([],this.all.models,!0)},r.prototype.getAllMap=function(){return this.getAll().reduce(function(e,t){return e[t.get(t.idAttribute)]=t,e},{})},r.prototype._makeCacheKey=function(e){return""},r.prototype._cacheItem=function(e){var t=this._makeCacheKey(e);t&&this._itemCache.set(t,e)},r.prototype._uncacheItem=function(e){var t=this._makeCacheKey(e);t&&this._itemCache.delete(t)},r.prototype._clearItemCache=function(){this._itemCache.clear()},r.prototype._onItemsResetCache=function(e){var t=this;this._clearItemCache(),e.each(function(s){return t._cacheItem(s)})},r.prototype._onItemKeyChange=function(e){for(var t,s=0,o=this._itemCache.entries();s<o.length;s++){var i=o[s],l=i[0],c=i[1];if(c===e){t=l;break}}t&&this._itemCache.delete(t),this._cacheItem(e)},r.prototype._setupCacheListeners=function(){this.em.listenTo(this.all,"add",this._cacheItem.bind(this)),this.em.listenTo(this.all,"remove",this._uncacheItem.bind(this)),this.em.listenTo(this.all,"reset",this._onItemsResetCache.bind(this))},r.prototype.__initListen=function(e){e===void 0&&(e={});var t=this,s=t.all,o=t.em,i=t.events;s&&o&&s.on("add",function(l,c,d){return o.trigger(i.add,l,d)}).on("remove",function(l,c,d){return o.trigger(i.remove,l,d)}).on("change",function(l,c){return o.trigger(i.update,l,l.changedAttributes(),c)}).on("all",this.__catchAllEvent,this),this.cls=[s].concat(e.collections||[]),(e.propagate||[]).forEach(function(l){var c=l.entity,d=l.event;c.on("all",function(h,m,y,x){var b=x||y,v=K1({event:h},b);[o,s].map(function(j){return j.trigger(d,m,v)})})})},r.prototype.__remove=function(e,t){var s=this;t===void 0&&(t={});var o=this.em,i=(0,Ce.isString)(e)?this.get(e):e,l=function(){return i&&s.all.remove(i,t),i};return!t.silent&&o?.trigger(this.events.removeBefore,i,l,t),!t.abort&&l()},r.prototype.__catchAllEvent=function(e,t,s,o){var i=this,l=i.em,c=i.events,d=o||s;l&&c.all&&l.trigger(c.all,{event:e,model:t,options:d}),this.__onAllEvent()},r.prototype.__appendTo=function(e){var t=this.config.appendTo;if(t){var s=(0,Ce.isElement)(t)?t:document.querySelector(t);if(!s)return this.__logWarn('"appendTo" element not found');s.appendChild(this.render(e))}},r.prototype.__onAllEvent=function(){},r.prototype._createId=function(e){e===void 0&&(e=16);var t=this.getAll(),s=t.length+e,o=this.getAllMap(),i;do i=(0,Zt.createId)(s);while(o[i]);return i},r.prototype.__listenAdd=function(e,t){var s=this;e.on("add",function(o,i,l){return s.em.trigger(t,o,l)})},r.prototype.__listenRemove=function(e,t){var s=this;e.on("remove",function(o,i,l){return s.em.trigger(t,o,l)})},r.prototype.__listenUpdate=function(e,t){var s=this;e.on("change",function(o,i){return s.em.trigger(t,o,o.changedAttributes(),i)})},r.prototype.__destroy=function(){var e;this.cls.forEach(function(t){t.stopListening(),t.reset()}),(e=this.view)===null||e===void 0||e.remove(),this.view=void 0},r})(b3),XB=function(){return{stylePrefix:"cv-",scripts:[],styles:[],customBadgeLabel:void 0,autoscrollLimit:50,extHl:!1,frameContent:"<!DOCTYPE html>",frameStyle:`
    body { background-color: #fff }
    * ::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.1) }
    * ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.2) }
    * ::-webkit-scrollbar { width: 10px }
  `,notTextable:["button","a","input[type=checkbox]","input[type=radio]"],allowExternalDrop:!0}};const QB=XB;var zu=ha(7058),Y1;(function(a){a.add="device:add",a.addBefore="device:add:before",a.remove="device:remove",a.removeBefore="device:remove:before",a.select="device:select",a.selectBefore="device:select:before",a.update="device:update",a.all="device"})(Y1||(Y1={}));const w3=Y1;var Z1;(function(a){a.add="page:add",a.addBefore="page:add:before",a.remove="page:remove",a.removeBefore="page:remove:before",a.select="page:select",a.selectBefore="page:select:before",a.update="page:update",a.all="page"})(Z1||(Z1={}));const X1=Z1;var JB=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),ez=(function(a){JB(r,a);function r(e,t,s){return a.call(this,t,{module:e,modelConstructor:s})||this}return r.prototype.add=function(e,t){var s=this,o,i=(0,Ce.isArray)(e)?e:(0,Ce.isUndefined)(e)?void 0:[e];return i=(o=i?.map(function(l){return l instanceof s.newModel?l:new s.newModel(s.module,l)}))!==null&&o!==void 0?o:[void 0],a.prototype.add.call(this,(0,Ce.isArray)(e)?i:i[0],t)},r.prototype.preinitialize=function(e,t){this.newModel=t.modelConstructor,this.module=t.module},r})(Sr.pM);const Lb=ez;var nv;(function(a){a.dragEnter="canvas:dragenter",a.dragOver="canvas:dragover",a.dragEnd="canvas:dragend",a.dragData="canvas:dragdata",a.drop="canvas:drop",a.spot="canvas:spot",a.spotAdd="canvas:spot:add",a.spotUpdate="canvas:spot:update",a.spotRemove="canvas:spot:remove",a.coords="canvas:coords",a.zoom="canvas:zoom",a.pointer="canvas:pointer",a.refresh="canvas:refresh",a.frameLoad="canvas:frame:load",a.frameLoadHead="canvas:frame:load:head",a.frameLoadBody="canvas:frame:load:body",a.frameUnload="canvas:frame:unload"})(nv||(nv={}));const Xg=nv;var tz=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Q1=function(){return Q1=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Q1.apply(this,arguments)},m5=function(a,r,e){if(e||arguments.length===2)for(var t=0,s=r.length,o;t<s;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return a.concat(o||Array.prototype.slice.call(r))},g5="__aw",y5="__ah",x5=function(a,r){var e,t=a.get(r),s=(e=a.view)===null||e===void 0?void 0:e.el[r==="width"?"offsetWidth":"offsetHeight"];return(0,Ce.isNumber)(t)?t:(0,Ce.isString)(t)&&t.endsWith("px")?parseFloat(t):s||0},rz=(function(a){tz(r,a);function r(e,t){var s=a.call(this,e,t)||this,o=s.em,i=s.attributes,l=i.styles,c=i.component,d=o.Components,h=d.getConfig(),m=o.Css.getAll(),y={},x={em:o,config:h,frame:s,idMap:y};if(!(0,Zt.isComponent)(c)){var b=(0,Zt.isObject)(c)?c:{components:c};!b.type&&(b.type="wrapper");var v=d.getType("wrapper").model;s.set("component",new v(b,x))}if(!l)s.set("styles",m);else if(!(0,Zt.isObject)(l)){var j=l;(0,Ce.keys)(y).length&&(j=(0,Ce.isString)(j)?o.Parser.parseCss(j):j,o.Css.checkId(j,{idMap:y})),m.add(j),s.set("styles",m)}return!t.width&&s.set(g5,1),!t.height&&s.set(y5,1),!s.id&&s.set("id",(0,Zt.createId)()),s}return r.prototype.defaults=function(){return{x:0,y:0,changesCount:0,attributes:{},width:null,height:null,head:[],component:"",styles:"",refFrame:null,_undo:!0,_undoexc:["changesCount"]}},Object.defineProperty(r.prototype,"width",{get:function(){return x5(this,"width")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return x5(this,"height")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"head",{get:function(){return this.get("head")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"refFrame",{get:function(){return this.get("refFrame")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"root",{get:function(){var e=this.refFrame;return e?.getComponent()||this.getComponent()},enumerable:!1,configurable:!0}),r.prototype.initRefs=function(){var e=this.refFrame;if((0,Ce.isString)(e)){var t=this.module.framesById[e];t&&this.set({refFrame:t},{silent:!0})}},r.prototype.getBoxRect=function(){var e=this.attributes,t=e.x,s=e.y,o=this,i=o.width,l=o.height;return{x:t,y:s,width:i,height:l}},r.prototype.onRemove=function(){!this.refFrame&&this.getComponent().remove({root:1})},r.prototype.changesUp=function(e){e===void 0&&(e={}),!(e.temporary||e.noCount||e.avoidStore)&&this.set("changesCount",this.get("changesCount")+1)},r.prototype.getComponent=function(){return this.get("component")},r.prototype.getStyles=function(){return this.get("styles")},r.prototype.disable=function(){this.trigger("disable")},r.prototype.remove=function(){var e;(e=this.view)===null||e===void 0||e.remove(),this.view=void 0;var t=this.collection;return t&&t.remove(this)},r.prototype.getHead=function(){return m5([],this.head,!0)},r.prototype.setHead=function(e){return this.set("head",m5([],e,!0))},r.prototype.addHeadItem=function(e){this.head.push(e)},r.prototype.getHeadByAttr=function(e,t,s){return this.head.filter(function(o){return o.attributes&&o.attributes[e]==t&&(!s||s===o.tag)})[0]},r.prototype.removeHeadByAttr=function(e,t,s){var o=this.getHeadByAttr(e,t,s),i=this.head.indexOf(o);i>=0&&this.head.splice(i,1)},r.prototype.addLink=function(e){var t="link";!this.getHeadByAttr("href",e,t)&&this.addHeadItem({tag:t,attributes:{href:e,rel:"stylesheet"}})},r.prototype.removeLink=function(e){this.removeHeadByAttr("href",e,"link")},r.prototype.addScript=function(e){var t="script";!this.getHeadByAttr("src",e,t)&&this.addHeadItem({tag:t,attributes:{src:e}})},r.prototype.removeScript=function(e){this.removeHeadByAttr("src",e,"script")},r.prototype.getPage=function(){var e;return(e=this.collection)===null||e===void 0?void 0:e.page},r.prototype._emitUpdated=function(e){e===void 0&&(e={}),this.em.trigger("frame:updated",Q1({frame:this},e))},r.prototype._emitUnload=function(){this._emitWithEditor(Xg.frameUnload,{frame:this})},r.prototype._emitWithEditor=function(e,t){[this.em,this].forEach(function(s){return s?.trigger(e,t)})},r.prototype.hasAutoHeight=function(){var e=this.attributes.height;return!!(e==="auto"||this.config.infiniteCanvas)},r.prototype.toJSON=function(e){e===void 0&&(e={});var t=zu.A.prototype.toJSON.call(this,e),s=(0,Ce.result)(this,"defaults");return e.fromUndo&&delete t.component,delete t.styles,delete t.changesCount,t[g5]&&delete t.width,t[y5]&&delete t.height,t.refFrame&&(t.refFrame=t.refFrame.id,delete t.component),(0,Ce.forEach)(t,function(o,i){i.indexOf("_")===0&&delete t[i]}),(0,Ce.forEach)(s,function(o,i){t[i]===o&&delete t[i]}),(0,Ce.forEach)(["attributes","head"],function(o){(0,Ce.isEmpty)(t[o])&&delete t[o]}),t},r})(zu.A);const j3=rz;var nz=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),az=(function(a){nz(r,a);function r(e,t){t===void 0&&(t=[]);var s=a.call(this,e,t,j3)||this;return s.loadedItems=0,s.itemsToLoad=0,(0,Ce.bindAll)(s,"itemLoaded"),s.on("add",s.onAdd),s.on("reset",s.onReset),s.on("remove",s.onRemove),s.forEach(function(o){return s.onAdd(o)}),s}return r.prototype.onAdd=function(e){this.module.framesById[e.id]=e},r.prototype.onReset=function(e,t){var s=this,o=t?.previousModels||[];o.map(function(i){return s.onRemove(i)})},r.prototype.onRemove=function(e){e.onRemove(),delete this.module.framesById[e.id]},r.prototype.initRefs=function(){this.forEach(function(e){return e.initRefs()})},r.prototype.itemLoaded=function(){this.loadedItems++,this.loadedItems>=this.itemsToLoad&&(this.trigger("loaded:all"),this.listenToLoadItems(!1))},r.prototype.listenToLoad=function(){this.loadedItems=0,this.itemsToLoad=this.length,this.listenToLoadItems(!0)},r.prototype.listenToLoadItems=function(e){var t=this;this.forEach(function(s){return s[e?"on":"off"]("loaded",t.itemLoaded)})},r})(Lb);const C3=az;var sz=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),oz=(function(a){sz(r,a);function r(e){var t=this,s=e.em,o=e.config,i=o.scripts,l=o.styles;return t=a.call(this,e,{scripts:i,styles:l})||this,t.set("frames",new C3(e)),t.on("change:zoom",t.onZoomChange),t.on("change:x change:y",t.onCoordsChange),t.on("change:pointer change:pointerScreen",t.onPointerChange),t.listenTo(s,"change:device ".concat(w3.update),t.updateDevice),t.listenTo(s,X1.select,t._pageUpdated),t}return r.prototype.defaults=function(){return{frame:"",frames:[],rulers:!1,zoom:100,x:0,y:0,scripts:[],styles:[],pointer:Sr.lK,pointerScreen:Sr.lK}},Object.defineProperty(r.prototype,"frames",{get:function(){return this.get("frames")},enumerable:!1,configurable:!0}),r.prototype.init=function(){var e=this.em,t=e.Pages._initPage();this.set("frames",t.getFrames()),this.updateDevice({frame:t.getMainFrame()})},r.prototype._pageUpdated=function(e,t){var s=this.em;s.setSelected(),s.get("readyCanvas")&&s.stopDefault(),t?.getFrames().map(function(o){o.disable(),o._emitUnload()}),this.set("frames",e.getFrames()),this.updateDevice({frame:e.getMainFrame()})},r.prototype.updateDevice=function(e){e===void 0&&(e={});var t=this.em,s=t.getDeviceModel(),o=e.frame||t.getCurrentFrameModel();if(o&&s){var i=s.attributes,l=i.width,c=i.height,d=i.minHeight;o.set({width:l,height:c,minHeight:d},{noUndo:1})}},r.prototype.onZoomChange=function(e,t,s){var o=this,i=o.em,l=o.module,c=this.get("zoom");c<1&&this.set("zoom",1),i.trigger(l.events.zoom,{options:s})},r.prototype.onCoordsChange=function(){var e=this,t=e.em,s=e.module;t.trigger(s.events.coords)},r.prototype.onPointerChange=function(){var e=this,t=e.em,s=e.module;t.trigger(s.events.pointer)},r.prototype.getPointerCoords=function(e){e===void 0&&(e=Sr.x2.World);var t=this.attributes,s=t.pointer,o=t.pointerScreen;return e===Sr.x2.World?s:o},r})(zu.A);const iz=oz;var Cl=ha(179),ja=ha(2225),lz=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),cz=(function(a){lz(r,a);function r(e,t){t===void 0&&(t=[]);var s=a.call(this,e,t,Cl.A)||this;s.on("add",s.onAdd),s.on("change",s.onChange),s.on("remove",s.onRemove);var o=s.em;s.refreshDbn=(0,Ce.debounce)(function(){return s.refresh()},0);var i="".concat(ja.I.resize," styleable:change ").concat(ja.I.input," ").concat(ja.I.update," frame:updated undo redo");return s.listenTo(o,i,function(){return s.refreshDbn()}),s}return Object.defineProperty(r.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"events",{get:function(){return this.module.events},enumerable:!1,configurable:!0}),r.prototype.refresh=function(){var e=this,t=e.em,s=e.events;t.trigger(s.spot)},r.prototype.onAdd=function(e){this.__trgEvent(this.events.spotAdd,{spot:e})},r.prototype.onChange=function(e){this.__trgEvent(this.events.spotUpdate,{spot:e})},r.prototype.onRemove=function(e){this.__trgEvent(this.events.spotRemove,{spot:e})},r.prototype.__trgEvent=function(e,t){var s=this.module,o=s.em;o.trigger(e,t),this.refreshDbn()},r})(Lb);const dz=cz;var uz=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),fz=(function(a){uz(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"pfx",{get:function(){return this.ppfx+this.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ppfx",{get:function(){return this.em.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"module",{get:function(){var e,t;return(t=(e=this.model)===null||e===void 0?void 0:e.module)!==null&&t!==void 0?t:this.collection.module},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"config",{get:function(){return this.module.config},enumerable:!1,configurable:!0}),r.prototype.preinitialize=function(e){this.className=""},r})(Sr.Ss);const kl=fz;var Ir=ha(6294),pz=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),hz=(function(a){pz(r,a);function r(e,t){e===void 0&&(e={}),t===void 0&&(t=!1);var s=a.call(this,e)||this;return s.itemsView="",s.itemType="type",s.reuseView=!1,s.viewCollection=[],t&&s.listenTo(s.collection,"add",s.addTo),s}return r.prototype.addTo=function(e){this.add(e)},r.prototype.itemViewNotFound=function(e){},r.prototype.add=function(e,t){var s=this,o=s.reuseView,i=s.viewCollection,l=t||null,c=e.get(this.itemType),d;e.view&&o?d=e.view:d=this.renderView(e,c),i.push(d);var h=d.render().el;l?l.appendChild(h):this.$el.append(h)},r.prototype.render=function(){var e=this,t=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(s){return e.add(s,t)}),this.$el.append(t),this.onRender(),this},r.prototype.onRender=function(){},r.prototype.onRemoveBefore=function(e,t){},r.prototype.onRemove=function(e,t){},r.prototype.remove=function(e){e===void 0&&(e={});var t=this.viewCollection;return this.onRemoveBefore(t,e),this.clearItems(),Sr.Ss.prototype.remove.apply(this,e),this.onRemove(t,e),this},r.prototype.clearItems=function(){this.viewCollection},r})(kl);const mz=hz;var Hh;(function(a){a.mount="css:mount",a.mountBefore="css:mount:before"})(Hh||(Hh={}));var gz=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),yz=(function(a){gz(r,a);function r(e){e===void 0&&(e={});var t=a.call(this,e)||this;t.config=e.config||{};var s=t.model;return t.listenTo(s,"change",t.render),t.listenTo(s,"destroy remove",t.remove),t.listenTo(s.get("selectors"),"change",t.render),s.setView(t),t}return Object.defineProperty(r.prototype,"frameView",{get:function(){return this.config.frameView},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"em",{get:function(){return this.model.em},enumerable:!1,configurable:!0}),r.prototype.remove=function(){return a.prototype.remove.call(this),this.model.removeView(this),this},r.prototype.updateStyles=function(){this.render()},r.prototype.tagName=function(){return"style"},r.prototype.render=function(){var e=this,t=e.model,s=e.el,o=e.em,i=t.get("important"),l=t.toCSS({important:i}),c={rule:t,ruleView:this,css:l};return o?.trigger(Hh.mountBefore,c),s.innerHTML=c.css,o?.trigger(Hh.mount,c),this},r})(Sr.Ss);const IS=yz;var xz=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),vz=(function(a){xz(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype._createElement=function(){return document.createTextNode("")},r.prototype.render=function(){var e=this.model,t=e.get("important");return this.el.textContent=e.getDeclaration({important:t}),this},r})(IS);const bz=vz;var wz=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Cj=function(a,r){return"".concat(a).concat(r?"-".concat(parseFloat(r)):"")},jz=(function(a){wz(r,a);function r(e){var t=a.call(this,e)||this;(0,Ce.bindAll)(t,"sortRules");var s=e.config||{};t.atRules={},t.config=s,t.em=s.em,t.pfx=s.stylePrefix||"",t.className=t.pfx+"rules";var o=t.collection;return t.listenTo(o,"add",t.addTo),t.listenTo(o,"reset",t.render),t}return r.prototype.addTo=function(e){this.addToCollection(e)},r.prototype.addToCollection=function(e,t){if(this.renderStarted){var s=t||null,o=this.config,i={model:e,config:o},l,c;if(e.get("atRuleType")==="keyframes"){var d=e.getAtRule(),h=this.atRules[d];if(!h){var m=document.createElement("style");h=document.createTextNode(""),m.appendChild(document.createTextNode("".concat(d,"{"))),m.appendChild(h),m.appendChild(document.createTextNode("}")),this.atRules[d]=h,l=m}c=new bz(i),h.appendData(c.render().el.textContent)}else c=new IS(i),l=c.render().el;var y=this.className,x=e.get("mediaText"),b=Cj(y),v=b;if(x&&(v=Cj(y,this.getMediaWidth(x))),l){var j=s||this.el,S=void 0;try{S=j.querySelector("#".concat(v))}catch{}S||(S=j.querySelector("#".concat(b))),S?.appendChild(l)}return l}},r.prototype.getMediaWidth=function(e){return e&&e.replace("(".concat(this.em.getConfig().mediaCondition,": "),"").replace(")","")},r.prototype.sortRules=function(e,t){var s=this.em,o=(s.getConfig().mediaCondition||"").indexOf("min-width")!==-1;if(!o)return 0;var i=o?e:t,l=o?t:e;return i-l},r.prototype.render=function(){var e=this;this.renderStarted=!0,this.atRules={};var t=this,s=t.em,o=t.$el,i=t.collection,l=this.className,c=document.createDocumentFragment();o.empty();var d=s.Devices.getAll().pluck("priority").sort(this.sortRules);return d.every(function(h){return h})&&d.unshift(0),d.forEach(function(h){return c.appendChild((0,Ir.a_)("div",{id:Cj(l,h)}))}),i.each(function(h){return e.addToCollection(h,c)}),o.append(c),o.attr("class",l),this},r})(Sr.Ss);const J1=jz;var qs;(function(a){a.variable="data-variable",a.condition="data-condition",a.conditionTrue="data-condition-true-content",a.conditionFalse="data-condition-false-content",a.collection="data-collection",a.collectionItem="data-collection-item"})(qs||(qs={}));var gy;(function(a){a.rootData="__rootData"})(gy||(gy={}));var eC;(function(a){a.string="string",a.number="number",a.boolean="boolean",a.date="date",a.json="json",a.relation="relation"})(eC||(eC={}));var Rd;(function(a){a.add="data:add",a.addBefore="data:add:before",a.remove="data:remove",a.removeBefore="data:remove:before",a.update="data:update",a.path="data:path",a.pathSource="data:pathSource:",a.providerLoad="data:provider:load",a.providerLoadBefore="data:provider:load:before",a.providerLoadError="data:provider:load:error",a.providerLoadAll="data:provider:loadAll",a.providerLoadAllBefore="data:provider:loadAll:before",a.all="data"})(Rd||(Rd={}));var Cz=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),av=function(){return av=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},av.apply(this,arguments)},tc=qs.variable,Sz=(function(a){Cz(r,a);function r(e,t){var s=a.call(this,e,t)||this;return s.em=t.em,s.collectionsStateMap=t.collectionsStateMap,s}return r.prototype.defaults=function(){return{type:tc,defaultValue:"",path:"",collectionId:void 0,variableType:void 0,asPlainText:void 0}},Object.defineProperty(r.prototype,"path",{get:function(){var e;return(e=this.get("path"))!==null&&e!==void 0?e:""},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"defaultValue",{get:function(){var e;return(e=this.get("defaultValue"))!==null&&e!==void 0?e:""},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"collectionId",{get:function(){return this.get("collectionId")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"variableType",{get:function(){return this.get("variableType")},enumerable:!1,configurable:!0}),r.prototype.resolvesFromCollection=function(){return!!this.collectionId},r.prototype.updateCollectionsStateMap=function(e){this.collectionsStateMap=e,this.trigger("change")},r.prototype.getResolverPath=function(){var e;if(this.resolvesFromCollection()){var t=this.resolveCollectionVariable();return Gh(t)?(e=t.path)!==null&&e!==void 0?e:"":!1}return this.path},r.prototype.toJSON=function(e){var t=this.defaults(),s=a.prototype.toJSON.call(this,e),o=Object.fromEntries(Object.entries(s).filter(function(i){var l=i[0],c=i[1];return c!==t[l]}));return av(av({},o),{type:tc})},r.prototype.getDataValue=function(){var e={em:this.em,collectionsStateMap:this.collectionsStateMap};return r.resolveDataResolver({path:this.path,defaultValue:this.defaultValue,collectionId:this.collectionId,variableType:this.variableType},e)},r.resolveDataSourceVariable=function(e,t){var s,o;return t.em.DataSources.getValue((s=e.path)!==null&&s!==void 0?s:"",(o=e.defaultValue)!==null&&o!==void 0?o:"")},r.resolveDataResolver=function(e,t){var s,o,i,l;if(e.collectionId){var c=r.resolveCollectionVariable(e,t);return Gh(c)?r.resolveDataSourceVariable({path:(s=c.path)!==null&&s!==void 0?s:"",defaultValue:(o=e.defaultValue)!==null&&o!==void 0?o:""},{em:t.em}):c}return r.resolveDataSourceVariable({path:(i=e.path)!==null&&i!==void 0?i:"",defaultValue:(l=e.defaultValue)!==null&&l!==void 0?l:""},{em:t.em})},r.prototype.resolveCollectionVariable=function(){var e=this,t=e.em,s=e.collectionsStateMap;return r.resolveCollectionVariable(this.attributes,{em:t,collectionsStateMap:s})},r.resolveCollectionVariable=function(e,t){var s,o,i=e.collectionId,l=i===void 0?"":i,c=e.variableType,d=e.path,h=e.defaultValue,m=h===void 0?"":h,y=t.em,x=t.collectionsStateMap;if(!x)return m;var b=x[l];if(!b)return m;if(!c)return y.logError("Missing collection variable type for collection: ".concat(l)),m;if(c==="currentItem")return(s=r.resolveCurrentItem(b,d,l,y))!==null&&s!==void 0?s:m;var v=b;return(o=v[c])!==null&&o!==void 0?o:m},r.resolveCurrentItem=function(e,t,s,o){var i=e.currentItem;if(!i){o.logError("Current item is missing for collection: ".concat(s));return}if(i.type===tc){var l=i.path?"".concat(i.path,".").concat(t):t;return{type:tc,path:l}}if(!(t&&!i[t]))return t?i[t]:i},r})(Sr.Kx);const om=Sz;var Nz=(function(){function a(r){var e=this;this.listeners=[],this.model=new Sr.Kx,this.onChange=function(){var t=e.resolver.getDataValue();e.onUpdate(t)},this.em=r.em,this.resolver=r.resolver,this.onUpdate=r.onUpdate,this.listenToResolver()}return a.prototype.createListener=function(r,e,t){return t===void 0&&(t=this.onChange),{obj:r,event:e,callback:t}},a.prototype.listenToResolver=function(){var r=this,e=r.resolver,t=r.model;this.removeListeners();var s=[],o=e.attributes.type;switch(o){case tc:s=this.listenToDataVariable(e);break;case qh:s=this.listenToConditionalVariable(e);break}s.forEach(function(i){return t.listenTo(i.obj,i.event,i.callback)}),this.listeners=s},a.prototype.listenToConditionalVariable=function(r){return[{obj:r,event:z0,callback:this.onChange}]},a.prototype.listenToDataVariable=function(r){var e=this,t=this.em,s=[],o=function(){e.listenToResolver(),e.onChange()};s.push(this.createListener(r,"change",o));var i=r.getResolverPath();if(!i)return s;var l=(0,Zt.stringToPath)(i||"").join("."),c=t.DataSources.fromPath(i),d=c[0],h=c[1];return d&&s.push(this.createListener(d.records,"add remove reset",o)),h&&s.push(this.createListener(h,"change")),s.push(this.createListener(t.DataSources.all,"add remove reset",o),this.createListener(t,"".concat(Rd.path,":").concat(l)),this.createListener(t,Rd.path,function(m){var y=m.path;y!==i&&y.startsWith(i)&&e.onChange()})),s},a.prototype.removeListeners=function(){var r=this;this.listeners.forEach(function(e){return r.model.stopListening(e.obj,e.event,e.callback)}),this.listeners=[]},a.prototype.destroy=function(){this.removeListeners()},a})();const $y=Nz;var v5=(function(){function a(r,e,t){this.operator=r,this.statements=e,this.opts=t}return a.prototype.evaluate=function(){var r=this,e=this.statements.map(function(t){var s=new S3({condition:t},r.opts);return s.evaluate()});return this.operator.evaluate(e)},a})(),Db=(function(){function a(r,e){this.operationString=r,this.em=e.em}return a.prototype.getOperations=function(){return Hz(this.operationsEnum)},a})(),kz=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),yy;(function(a){a.equals="equals",a.isTruthy="isTruthy",a.isFalsy="isFalsy",a.isDefined="isDefined",a.isNull="isNull",a.isUndefined="isUndefined",a.isArray="isArray",a.isObject="isObject",a.isString="isString",a.isNumber="isNumber",a.isBoolean="isBoolean",a.isDefaultValue="isDefaultValue"})(yy||(yy={}));var _z=(function(a){kz(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.operationsEnum=yy,e}return r.prototype.evaluate=function(e,t){var s;switch(this.operationString){case"equals":return e===t;case"isTruthy":return!!e;case"isFalsy":return!e;case"isDefined":return e!=null;case"isNull":return e===null;case"isUndefined":return e===void 0;case"isArray":return Array.isArray(e);case"isObject":return typeof e=="object"&&e!==null;case"isString":return typeof e=="string";case"isNumber":return typeof e=="number";case"isBoolean":return typeof e=="boolean";case"isDefaultValue":return e instanceof om&&e.get("defaultValue")===t;default:return(s=this.em)===null||s===void 0||s.logWarning("Unsupported generic operation: ".concat(this.operationString)),!1}},r})(Db),Ez=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Gf;(function(a){a.and="and",a.or="or",a.xor="xor"})(Gf||(Gf={}));var Tz=(function(a){Ez(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.operationsEnum=Gf,e}return r.prototype.evaluate=function(e){if(!e?.length)return!1;switch(this.operationString){case Gf.and:return e.every(Boolean);case Gf.or:return e.some(Boolean);case Gf.xor:return e.filter(Boolean).length===1;default:return this.em.logWarning("Unsupported boolean operation: ".concat(this.operationString)),!1}},r})(Db),Oz=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Bc;(function(a){a.greaterThan=">",a.lessThan="<",a.greaterThanOrEqual=">=",a.lessThanOrEqual="<=",a.equals="=",a.notEquals="!="})(Bc||(Bc={}));var Pz=(function(a){Oz(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.operationsEnum=Bc,e}return r.prototype.evaluate=function(e,t){if(typeof e!="number")return!1;switch(this.operationString){case Bc.greaterThan:return e>t;case Bc.lessThan:return e<t;case Bc.greaterThanOrEqual:return e>=t;case Bc.lessThanOrEqual:return e<=t;case Bc.equals:return e===t;case Bc.notEquals:return e!==t;default:return this.em.logWarning("Unsupported number operation: ".concat(this.operationString)),!1}},r})(Db),Az=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),hl;(function(a){a.contains="contains",a.startsWith="startsWith",a.endsWith="endsWith",a.matchesRegex="matchesRegex",a.equalsIgnoreCase="equalsIgnoreCase",a.trimEquals="trimEquals"})(hl||(hl={}));var Mz=(function(a){Az(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.operationsEnum=hl,e}return r.prototype.evaluate=function(e,t){if(typeof e!="string")return!1;switch(this.operationString){case hl.contains:return e.includes(t);case hl.startsWith:return e.startsWith(t);case hl.endsWith:return e.endsWith(t);case hl.matchesRegex:return t||this.em.logWarning("Regex pattern must be provided."),new RegExp(t??"").test(e);case hl.equalsIgnoreCase:return e.toLowerCase()===t.toLowerCase();case hl.trimEquals:return e.trim()===t.trim();default:return this.em.logWarning("Unsupported string operation: ".concat(this.operationString)),!1}},r})(Db),Iz=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),S3=(function(a){Iz(r,a);function r(e,t){var s,o=a.call(this,e)||this;return o.collectionsStateMap={},o.em=t.em,o.collectionsStateMap=(s=t.collectionsStateMap)!==null&&s!==void 0?s:{},o}return r.prototype.evaluate=function(){var e=this.get("condition");if(!e||(0,Ce.isBoolean)(e))return!!e;var t=this.getOperator();return t?t.evaluate(this.getResolvedLeftValue(),this.getResolvedRightValue()):!1},r.prototype.getDependentDataVariables=function(){var e=this.get("condition");return e?this.extractDataVariables(e):[]},r.prototype.getOperations=function(){var e=this.getOperator();return!e||e instanceof v5?[]:e.getOperations()},r.prototype.updateCollectionStateMap=function(e){this.collectionsStateMap=e},r.prototype.getOperator=function(){var e={em:this.em,collectionsStateMap:this.collectionsStateMap},t=this.get("condition");if(!(!t||(0,Ce.isBoolean)(t))){var s;if(this.isLogicGroup(t)){var o=t.logicalOperator,i=t.statements,l=new Tz(o,e);s=new v5(l,i,e)}if(this.isExpression(t)){var c=t.left,l=t.operator,d=ov(c,e);s=this.resolveOperator(d,l)}return s}},r.prototype.resolveOperator=function(e,t){var s=this.em;if(this.isOperatorInEnum(t,yy))return new _z(t,{em:s});if(typeof e=="number")return new Pz(t,{em:s});if(typeof e=="string")return new Mz(t,{em:s})},r.prototype.extractDataVariables=function(e){var t=this,s=[];return this.isExpression(e)?(Gh(e.left)&&s.push(e.left),Gh(e.right)&&s.push(e.right)):this.isLogicGroup(e)&&e.statements.forEach(function(o){return s.push.apply(s,t.extractDataVariables(o))}),s},r.prototype.isLogicGroup=function(e){return e&&typeof e.logicalOperator<"u"&&Array.isArray(e.statements)},r.prototype.isExpression=function(e){return e&&typeof e.left<"u"&&typeof e.operator=="string"},r.prototype.isOperatorInEnum=function(e,t){return Object.values(t).includes(e)},r.prototype.resolveExpressionSide=function(e){var t=this.get("condition"),s=this,o=s.em,i=s.collectionsStateMap;if(!t||typeof t=="boolean")return t;if(t&&typeof t=="object"&&e in t){var l=t[e];return ov(l,{em:o,collectionsStateMap:i})}},r.prototype.getResolvedLeftValue=function(){return this.resolveExpressionSide("left")},r.prototype.getResolvedRightValue=function(){return this.resolveExpressionSide("right")},r.prototype.toJSON=function(e){var t=this.get("condition");if(typeof t=="object"){var s=JSON.parse(JSON.stringify(t));return s}return t},r})(Sr.Kx),Rz=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),qh="data-condition",Lz="data-condition-evaluation-changed",z0="data-condition-output-changed",N3=(function(a){Rz(r,a);function r(e,t){var s,o=a.call(this,e,t)||this;o.collectionsStateMap={},o.resolverListeners=[],o._previousEvaluationResult=null,o.em=t.em,o.collectionsStateMap=(s=t.collectionsStateMap)!==null&&s!==void 0?s:{};var i=e.condition,l=i===void 0?{}:i,c=new S3({condition:l},{em:o.em});return o._conditionEvaluator=c,o.listenToDataVariables(),o.listenToPropsChange(),o}return r.prototype.defaults=function(){return{type:qh,condition:{left:"",operator:hl.equalsIgnoreCase,right:""},ifTrue:{},ifFalse:{}}},r.prototype.getCondition=function(){return this._conditionEvaluator.get("condition")},r.prototype.getIfTrue=function(){return this.get("ifTrue")},r.prototype.getIfFalse=function(){return this.get("ifFalse")},r.prototype.getOperations=function(){return this._conditionEvaluator.getOperations()},r.prototype.setCondition=function(e){this.set("condition",e),this._conditionEvaluator.set("condition",e),this.trigger(z0,this.getDataValue())},r.prototype.setIfTrue=function(e){this.set("ifTrue",e)},r.prototype.setIfFalse=function(e){this.set("ifFalse",e)},r.prototype.isTrue=function(){return this._conditionEvaluator.evaluate()},r.prototype.getDataValue=function(e){e===void 0&&(e=!1);var t=this,s=t.em,o=t.collectionsStateMap,i={em:s,collectionsStateMap:o},l=this.getIfTrue(),c=this.getIfFalse(),d=this.isTrue();return e?d?l:c:ov(d?l:c,i)},r.prototype.resolvesFromCollection=function(){return!1},r.prototype.updateCollectionsStateMap=function(e){this.collectionsStateMap=e,this._conditionEvaluator.updateCollectionStateMap(e),this.listenToDataVariables(),this.emitConditionEvaluationChange()},r.prototype.listenToPropsChange=function(){var e=this;this.on("change:condition",this.handleConditionChange.bind(this)),this.on("change:condition change:ifTrue change:ifFalse",function(){e.listenToDataVariables()})},r.prototype.handleConditionChange=function(){this.setCondition(this.get("condition"))},r.prototype.listenToDataVariables=function(){this.cleanupListeners(),this.setupConditionDataVariableListeners(),this.setupOutputDataVariableListeners()},r.prototype.setupConditionDataVariableListeners=function(){var e=this;this._conditionEvaluator.getDependentDataVariables().forEach(function(t){e.addListener(t,function(){e.emitConditionEvaluationChange()})})},r.prototype.setupOutputDataVariableListeners=function(){var e=this.isTrue();this.setupOutputVariableListener(this.getIfTrue(),e),this.setupOutputVariableListener(this.getIfFalse(),!e)},r.prototype.setupOutputVariableListener=function(e,t){var s=this;Gh(e)&&this.addListener(e,function(){t&&s.trigger(z0,e)})},r.prototype.addListener=function(e,t){var s=new $y({em:this.em,resolver:new om(e,{em:this.em,collectionsStateMap:this.collectionsStateMap}),onUpdate:t});this.resolverListeners.push(s)},r.prototype.emitConditionEvaluationChange=function(){var e=this.isTrue();this._previousEvaluationResult!==e&&(this._previousEvaluationResult=e,this.trigger(Lz,e),this.emitOutputValueChange())},r.prototype.emitOutputValueChange=function(){var e=this.getDataValue();this.trigger(z0,e)},r.prototype.cleanupListeners=function(){this.resolverListeners.forEach(function(e){return e.destroy()}),this.resolverListeners=[]},r.prototype.toJSON=function(){var e=this.getIfTrue(),t=this.getIfFalse();return{type:qh,condition:this._conditionEvaluator.toJSON(),ifTrue:e,ifFalse:t}},r})(Sr.Kx),zg="dataResolver",Ci=function(){return Ci=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Ci.apply(this,arguments)},k3=function(a,r,e){if(e||arguments.length===2)for(var t=0,s=r.length,o;t<s;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return a.concat(o||Array.prototype.slice.call(r))},Kf=function(a){return(0,Ce.isArray)(a.get(ri))},sv=function(a){return!!a.get(Si)},ac=function(a){return!!(Kf(a)||sv(a))},op=function(a){var r=a.parent();return ac(a)&&(!r||!ac(r))},Sg=function(a){a.__symbReady||(a.on("change",a.__upSymbProps),a.__symbReady=!0)},Sl=function(a){var r=a.get(Si);if(r&&(0,Ce.isString)(r)){var e=a.__getAllById()[r];e?(r=e,a.set(Si,e)):r=0}return r||void 0},_i=function(a){var r=a?.get(ri);return r&&(0,Ce.isArray)(r)&&(r.forEach(function(e,t){e&&(0,Ce.isString)(e)&&(r[t]=a.__getAllById()[e])}),r=r.filter(function(e){return e&&!(0,Ce.isString)(e)})),r||void 0},xy=function(a,r){r===void 0&&(r="");var e=a?.get(Yf),t=r.split(":")[0],s=r!==t?[r,t]:[r];return e===!0||(0,Ce.isArray)(e)&&s.some(function(o){return e.indexOf(o)>=0})},Md=function(a,r){r===void 0&&(r={});var e=[],t=r.changed;if(r.fromInstance||r.noPropagate||r.fromUndo||t&&xy(a,t))return e;var s=_i(a)||[],o=Sl(a),i=o?k3([o],_i(o)||[],!0):s;return e=i.filter(function(l){return l!==a}).filter(function(l){return!(t&&xy(l,t))}),e},vy=function(a,r){for(var e=a,t=a.parent(r);t&&ac(t);)e=t,t=t.parent(r);return e},Fb=function(a,r){r===void 0&&(r={});var e=Sl(a),t=e&&_i(e);!r.skipRefs&&t&&e.set(ri,t.filter(function(s){return s!==a})),a.set(Si,0),a.components().forEach(function(s){return Fb(s,r)})},Qg=function(a,r,e,t){t===void 0&&(t={});var s=Sl(a),o=_i(a);!s&&!o||a.em.log(r,{model:a,toUp:e,context:"symbols",opts:t})},Dz=function(a,r){r===void 0&&(r={});var e=a.changedAttributes();if(e){var t=a.dataResolverWatchers.getProps(e);if(Fz(t),!(0,Zt.isEmptyObj)(t)){var s=Md(a,r);t=b5(t,a),Qg(a,"props",s,{opts:r,changed:t}),s.forEach(function(o){var i=b5(t,o);o.set(i,Ci({fromInstance:a},r))})}}},Fz=function(a){var r,e,t=["status","open",ri,Si,Yf];t.forEach(function(s){return delete a[s]}),(r=a.attributes)===null||r===void 0||delete r.id,(0,Zt.isEmptyObj)((e=a.attributes)!==null&&e!==void 0?e:{})&&delete a.attributes},b5=function(a,r){var e=Ci({},a);return(0,Ce.keys)(a).forEach(function(t){Uz(a,t,r)||delete e[t]}),e},Bz=function(a){return a?Object.values(a).some(function(r){return!!r?.collectionId}):!1},zz=function(a,r){var e;switch(r){case"attributes":case"style":return Bz(a[r]);default:return!!(!((e=a[r])===null||e===void 0)&&e.collectionId)}},Uz=function(a,r,e){var t=zz(a,r);return!xy(e,r)||t},$z=function(a,r){r===void 0&&(r={});var e=Md(a,r);Qg(a,"classes",e,{opts:r}),e.forEach(function(t){t.set("classes",a.get("classes"),{fromInstance:a})}),a.__changesUp(r)},_3=function(a,r,e,t){var s=t||e||{},o=s.fromInstance,i=s.fromUndo,l={fromInstance:o,fromUndo:i},c=r.opt.temporary;if(t)if(t.add){var x=[],b=!!_i(a),h=Md(a,Ci(Ci({},l),{changed:"components:add"}));if(h.length){var v=Sl(r);x=_i(v||r)||[],x=k3([],x,!0),x.push(v||r)}!c&&Qg(a,"add",h,{opts:t,addedInstances:x.map(function(H){return H.cid}),added:r.cid}),h.forEach(function(H){var V=vy(H),W=x.filter(function(A){var q=vy(A,{prev:1});return V&&q&&q===V})[0],Z=W||r.clone({symbol:!0,symbolInv:b});H.append(Z,Ci({fromInstance:a},t))})}else{var j=Sl(r);if(j&&!t.temporary&&j.set(ri,_i(j).filter(function(z){return z!==r})),!op(r)&&!t.skipRefsUp){var S="components:remove",k=t.index,N=r.parent(),P=Ci({fromInstance:r},t),R=op(r),F=function(H){var V=H.parent();V&&!xy(V,S)&&H.remove(P)},h=xy(N,S)?[]:Md(r,l);R&&(h=N&&Md(N,Ci(Ci({},l),{changed:S})),F=function(H){var V=H.components().at(k);V&&V.remove(Ci({fromInstance:N},P))}),!c&&Qg(a,"remove",h,{opts:t,removed:r.cid,isSymbNested:R}),h.forEach(F)}}else{var d=r,h=Md(a,Ci(Ci({},l),{changed:"components:reset"})),m=d.models,y=new Set;Qg(a,"reset",h,{components:m}),h.forEach(function(z){var H=z.components(),V=m.map(function(W,Z){return a.get(zg)?W.clone({symbol:ac(W)}):!ac(W)||y.has(W)?(y.add(W),W.clone({symbol:!0})):H.at(Z)});H.reset(V,Ci({fromInstance:a},e))})}a.__changesUp(s)},Vz="id";function tC(a){return typeof a=="object"&&[tc,qh].includes(a?.type)}function Gh(a){return a?.type===tc}function ov(a,r){return tC(a)?(Gh(a)&&om.resolveDataResolver(a,r),T3(a,r)):a}function E3(a,r){var e,t=a.type,s;switch(t){case tc:s=new om(a,r);break;case qh:{s=new N3(a,r);break}default:(e=r.em)===null||e===void 0||e.logWarning("Unsupported resolver type: ".concat(t));return}return s}function T3(a,r){var e=E3(a,r);return e?.getDataValue()}var Wz=function(a){return!!a&&[qs.collectionItem,qs.conditionTrue,qs.conditionFalse].includes(a)};function Hz(a){return Object.keys(a).filter(function(r){return isNaN(Number(r))}).map(function(r){return a[r]})}function qz(a){var r=a.collectionsStateMap;if(!r)return!1;var e=Object.keys(r);if(!e.length)return!1;var t=Sl(a);if(!t||t===a)return!1;var s=t.collectionsStateMap,o=Object.keys(s),i=o.every(function(l){return e.includes(l)});return i}function Gz(a){var r=Sl(a);return r?r.getId():""}function Kz(a){var r=qz(a),e=r?Gz(a):null;return{shouldSync:r,itemId:e}}var O3="text/html",Yz=O3;const Zz=(function(a,r){r===void 0&&(r={});var e=new DOMParser,t=r.htmlType||Yz,s=t===O3,o=s?a:"<div>".concat(a,"</div>"),i=e.parseFromString(o,t),l;if(s){if(r.asDocument)return i;var c=i.head,d=i.body,h=c.querySelectorAll("script");(0,Ce.each)(h,function(y){return d.appendChild(y)});var m=[];(0,Ce.each)(c.children,function(y){return m.push(y)}),(0,Ce.each)(m,function(y,x){return d.insertBefore(y,d.children[x])}),l=d}else l=i.firstChild;return l});var Du;(function(a){a.html="parse:html",a.htmlRoot="parse:html:root",a.htmlBefore="parse:html:before",a.css="parse:css",a.cssBefore="parse:css:before",a.all="parse"})(Du||(Du={}));var Zl=function(){return Zl=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Zl.apply(this,arguments)},Xz="data-gjs-",Qz=function(a,r){return r===void 0&&(r={}),{compTypes:[],modelAttrStart:Xz,getPropAttribute:function(e,t){var s=e.replace(this.modelAttrStart,""),o=t?.length||0,i=t?.substring(0,1),l=t?.substring(o-1),c=t==="true"?!0:t==="false"?!1:t;try{c=i=="{"&&l=="}"||i=="["&&l=="]"?JSON.parse(c):c}catch{}return{name:s,value:c}},splitPropsFromAttr:function(e){var t=this;e===void 0&&(e={});var s={},o={};return(0,Ce.each)(e,function(i,l){if(l.indexOf(t.modelAttrStart)===0){var c=t.getPropAttribute(l,i);s[c.name]=c.value}else o[l]=i}),{props:s,attrs:o}},parseStyle:function(e){for(var t={};e.indexOf("/*")>=0;){var s=e.indexOf("/*"),o=e.indexOf("*/"),i=o>-1?o+2:void 0;e=e.replace(e.slice(s,i),"")}for(var l=e.split(";"),c=0,d=l.length;c<d;c++){var h=l[c].trim();if(h){var m=h.split(":"),y=m[0].trim(),x=m.slice(1).join(":").trim();t[y]?((0,Ce.isArray)(t[y])||(t[y]=[t[y]]),t[y].push(x)):t[y]=x}}return t},parseClass:function(e){for(var t=[],s=e.split(" "),o=0,i=s.length;o<i;o++){var l=s[o].trim();l&&t.push(l)}return t},parseNodeAttr:function(e,t){for(var s,o,i=t||{},l=e.attributes||[],c=l.length,d=!!(!((s=r?.optionsHtml)===null||s===void 0)&&s.convertDataGjsAttributesHyphens),h=d&&!!i.type&&(0,Ce.result)((o=a?.Components.getType(i.type))===null||o===void 0?void 0:o.model.prototype,"defaults")||{},m=0;m<c;m++){var y=l[m].nodeName,x=l[m].nodeValue;if(y=="style")i.style=this.parseStyle(x);else if(y=="class")i.classes=this.parseClass(x);else{if(y=="contenteditable")continue;if(y.indexOf(this.modelAttrStart)===0){var b=this.getPropAttribute(y,x),v=b.name;if(d&&!(v in h)){var j=(0,Ir._I)(v);v=j in h?j:v}i[v]=b.value}else x===""&&e[y]===!0&&(x=!0),i.attributes||(i.attributes={}),i.attributes[y]=x}}return i},detectNode:function(e,t){var s;t===void 0&&(t={});var o=this.compTypes,i={};if(o){var l=(s=e.getAttribute)===null||s===void 0?void 0:s.call(e,"".concat(this.modelAttrStart,"type"));if(l)i={type:l};else for(var c=0;c<o.length;c++){var d=o[c],h=d.model.isComponent(e,t);if(h){typeof h!="object"&&(h={type:d.id}),i=h;break}}}return i},parseNode:function(e,t){var s;t===void 0&&(t={});var o=((s=e.content)===null||s===void 0?void 0:s.childNodes)||e.childNodes,i=o.length,l=this.detectNode(e,t);if(!l.tagName){var c=e.tagName||"",d=e.namespaceURI||"";l.tagName=c&&d==="http://www.w3.org/1999/xhtml"?c.toLowerCase():c}if(l=this.parseNodeAttr(e,l),!i&&"".concat(e.outerHTML).slice(-2)==="/>"&&(l.void=!0),i&&!l.components&&!t.skipChildren){var h=o[0];i===1&&h.nodeType===3?(!l.type&&(l.type="text"),l.components={type:"textnode",content:h.nodeValue}):l.components=this.parseNodes(e,Zl(Zl({},t),{inSvg:t.inSvg||l.type==="svg"}))}var m=l.components;if(!l.type&&m?.length){for(var y=r.textTypes,x=y===void 0?[]:y,b=r.textTags,v=b===void 0?[]:b,j=!0,S=!1,k=0;k<m.length;k++){var N=m[k],P=N.type;if(!x.includes(P)&&!v.includes(N.tagName)){j=!1;break}P==="textnode"&&(S=!0)}j&&S&&(l.type="text")}return l},parseNodes:function(e,t){var s;t===void 0&&(t={});for(var o=[],i=((s=e.content)===null||s===void 0?void 0:s.childNodes)||e.childNodes,l=i.length,c=0;c<l;c++){var d=i[c],h=o[o.length-1],m=this.parseNode(d,t);if(m.type==="textnode"){if(h?.type==="textnode"){h.content+=m.content;continue}if(!t.keepEmptyTextNodes){var y=d.nodeValue||"",x=c===0||c===l-1,b=y.includes(`
`);if(y!=" "&&!y.trim()&&(x||b))continue}}!m.tagName&&(0,Ce.isUndefined)(m.content)||o.push(m)}return o},parse:function(e,t,s){var o,i,l;s===void 0&&(s={});var c=a?.get("Config")||{},d=a?.Parser,h={html:[]},m=Zl(Zl(Zl({},r.optionsHtml),{htmlType:((o=r.optionsHtml)===null||o===void 0?void 0:o.htmlType)||r.htmlType}),s),y=Zl(Zl({},m),{asDocument:this.__checkAsDocument(e,m)}),x=Zl(Zl({},r),y),b=y.preParser,v=y.asDocument,j={input:(0,Ce.isFunction)(b)?b(e,{editor:a?.getEditor()}):e};d?.__emitEvent(Du.htmlBefore,j);var S=j.input,k=(0,Ce.isFunction)(x.parserHtml)?x.parserHtml(S,y):Zz(S,y),N=k,P=k;v&&(N=P.documentElement,h.doctype=(0,Ir.LJ)(P.doctype));var R=N.querySelectorAll("script"),F=R.length,z=(0,Ce.isUndefined)(c.allowScripts)?y.allowScripts:c.allowScripts;if(!z)for(;F--;)(i=R[F].parentNode)===null||i===void 0||i.removeChild(R[F]);if((!y.allowUnsafeAttr||!y.allowUnsafeAttrValue)&&this.__sanitizeNode(N,y),t){for(var H=N.querySelectorAll("style"),V=H.length,W="";V--;)W=H[V].innerHTML+W,(l=H[V].parentNode)===null||l===void 0||l.removeChild(H[V]);W&&(h.css=t.parse(W))}d?.__emitEvent(Du.htmlRoot,{input:S,root:N});var Z=[];if(v)h.head=this.parseNode(P.head,x),h.root=this.parseNodeAttr(N),Z=this.parseNode(P.body,x);else{var A=this.parseNodes(N,x);Z=A.length===1&&!x.returnArray?A[0]:A}return h.html=Z,d?.__emitEvent(Du.html,{input:S,output:h,options:y}),h},__sanitizeNode:function(e,t){var s=this,o=e.attributes||[],i=e.childNodes||[],l=[];(0,Ce.each)(o,function(c){var d=c.nodeName||"",h=c.nodeValue||"";!t.allowUnsafeAttr&&d.startsWith("on")&&l.push(d),!t.allowUnsafeAttrValue&&h.startsWith("javascript:")&&l.push(d)}),l.map(function(c){return e.removeAttribute(c)}),(0,Ce.each)(i,function(c){return s.__sanitizeNode(c,t)})},__checkAsDocument:function(e,t){if((0,Zt.isDef)(t.asDocument))return t.asDocument;if((0,Ce.isFunction)(t.detectDocument))return!!t.detectDocument(e);if(t.detectDocument)return e.toLowerCase().trim().startsWith("<!doctype")}}};const P3=Qz;var iv=function(){return iv=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},iv.apply(this,arguments)},Sj=(function(){function a(r,e,t){this.model=r,this.updateFn=e,this.resolverListeners={},this.em=t.em}return a.prototype.bindModel=function(r){this.model=r},a.prototype.setDataValues=function(r,e){e===void 0&&(e={});var t=e.skipWatcherUpdates||e.fromDataSource;return t||this.removeListeners(),this.addDataValues(r,e)},a.prototype.addDataValues=function(r,e){if(e===void 0&&(e={}),!r)return{};var t=this.evaluateValues(r),s=e.skipWatcherUpdates||e.fromDataSource;return s||this.updateListeners(r),t},a.prototype.onCollectionsStateMapUpdate=function(){var r=this,e=this.getValuesResolvingFromCollections();if(e.length){var t=this.addDataValues(this.getValuesOrResolver(Object.fromEntries(e.map(function(s){return[s,""]}))));Object.entries(t).forEach(function(s){var o=s[0],i=s[1];return r.updateFn(r.model,o,i)})}},Object.defineProperty(a.prototype,"collectionsStateMap",{get:function(){var r,e=this.model;return(r=e?.collectionsStateMap)!==null&&r!==void 0?r:{}},enumerable:!1,configurable:!0}),a.prototype.updateListeners=function(r){var e=this,t=this,s=t.em,o=t.collectionsStateMap;this.removeListeners(Object.keys(r));for(var i=Object.keys(r),l=function(h){var m=i[h],y=r[m];if(!tC(y))return"continue";var x=E3(y,{em:s,collectionsStateMap:o});c.resolverListeners[m]=new $y({em:s,resolver:x,onUpdate:function(b){return e.updateFn(e.model,m,b)}})},c=this,d=0;d<i.length;d++)l(d)},a.prototype.evaluateValues=function(r){for(var e=this,t=e.em,s=e.collectionsStateMap,o=iv({},r),i=Object.keys(r),l=0;l<i.length;l++){var c=i[l],d=r[c];tC(d)&&(o[c]=T3(d,{em:t,collectionsStateMap:s}))}return o},a.prototype.removeListeners=function(r){var e=this,t=r||Object.keys(this.resolverListeners);return t.forEach(function(s){var o,i;e.resolverListeners[s]&&((i=(o=e.resolverListeners[s]).destroy)===null||i===void 0||i.call(o),delete e.resolverListeners[s])}),t},a.prototype.getValuesOrResolver=function(r){if(!r)return{};for(var e=iv({},r),t=Object.keys(e),s=0;s<t.length;s++){var o=t[s],i=this.resolverListeners[o];i&&(e[o]=i.resolver.toJSON())}return e},a.prototype.getAllDataResolvers=function(){for(var r={},e=Object.keys(this.resolverListeners),t=0;t<e.length;t++){var s=e[t];r[s]=this.resolverListeners[s].resolver.toJSON()}return r},a.prototype.getValuesResolvingFromCollections=function(){var r=this,e=Object.keys(this.resolverListeners).filter(function(t){return r.resolverListeners[t].resolver.resolvesFromCollection()});return e},a.prototype.destroy=function(){this.removeListeners()},a})(),Hi=function(){return Hi=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Hi.apply(this,arguments)},Jz=function(a,r,e){if(e||arguments.length===2)for(var t=0,s=r.length,o;t<s;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return a.concat(o||Array.prototype.slice.call(r))},U0={fromDataSource:!0,avoidStore:!0},uh="__data_values",eU=(function(){function a(r,e){var t=this;this.model=r,this.options=e,this.onPropertyUpdate=function(s,o,i){s?.set(o,i,U0)},this.onAttributeUpdate=function(s,o,i){var l;t.isComponent(s)&&s?.addAttributes((l={},l[o]=i,l),U0)},this.onStyleUpdate=function(s,o,i){var l;s?.addStyle((l={},l[o]=i,l),Hi(Hi({},U0),{partial:!0,avoidStore:!0}))},this.propertyWatcher=new Sj(r,this.onPropertyUpdate,e),this.attributeWatcher=new Sj(r,this.onAttributeUpdate,e),this.styleWatcher=new Sj(r,this.onStyleUpdate,e)}return a.prototype.bindModel=function(r){this.model=r,this.watchers.forEach(function(e){return e.bindModel(r)}),this.updateSymbolOverride()},a.prototype.addProps=function(r,e){var t;e===void 0&&(e={});var s=(t=r[uh])!==null&&t!==void 0?t:{},o=this.filterProps(r),i=Hi(Hi({},r),this.propertyWatcher.addDataValues(Hi(Hi({},o),s.props),e));this.shouldProcessProp("attributes",r,s)&&(i.attributes=this.processAttributes(r,s,e)),this.shouldProcessProp("style",r,s)&&(i.style=this.processStyles(r,s,e));var l=e.skipWatcherUpdates||e.fromDataSource;return l||(this.updateSymbolOverride(),i[uh]={props:this.propertyWatcher.getAllDataResolvers(),style:this.styleWatcher.getAllDataResolvers(),attributes:this.attributeWatcher.getAllDataResolvers()}),i},a.prototype.getProps=function(r){var e=this.getValueOrResolver("props",r),t=Hi({},e);return delete t[uh],(0,Ce.isEmpty)(r.attributes)||(t.attributes=this.getValueOrResolver("attributes",r.attributes)),(0,Ce.isObject)(r.style)&&!(0,Ce.isEmpty)(r.style)&&(t.style=this.getValueOrResolver("styles",r.style)),t},a.prototype.getValueOrResolver=function(r,e){var t;switch(r){case"props":t=this.propertyWatcher;break;case"styles":t=this.styleWatcher;break;case"attributes":t=this.attributeWatcher;break;default:{var s=this.options.em;return s?.logError("Invalid target '".concat(r,"'. Must be 'props', 'styles', or 'attributes'.")),{}}}return e?t.getValuesOrResolver(e):t.getAllDataResolvers()},a.prototype.removeAttributes=function(r){this.attributeWatcher.removeListeners(r),this.updateSymbolOverride()},a.prototype.disableStyles=function(){this.styleWatcher.removeListeners(),this.styleWatcher.destroy()},a.prototype.onCollectionsStateMapUpdate=function(){this.watchers.forEach(function(r){return r.onCollectionsStateMapUpdate()})},a.prototype.destroy=function(){this.watchers.forEach(function(r){return r.destroy()})},Object.defineProperty(a.prototype,"watchers",{get:function(){return[this.propertyWatcher,this.styleWatcher,this.attributeWatcher]},enumerable:!1,configurable:!0}),a.prototype.isComponent=function(r){return r instanceof $s},a.prototype.shouldProcessProp=function(r,e,t){var s=r==="attributes"?this.attributeWatcher:this.styleWatcher,o=t[r],i=!!e[r],l=o&&Object.keys(o).length>0,c=o&&Object.keys(s.getAllDataResolvers()).length>0;return i||l||c},a.prototype.updateSymbolOverride=function(){var r,e=this.model;if(!(!this.isComponent(e)||!ac(e))){var t=!!Object.keys((r=e?.collectionsStateMap)!==null&&r!==void 0?r:{}).length;if(t){var s=this.propertyWatcher.getValuesResolvingFromCollections(),o=this.attributeWatcher.getValuesResolvingFromCollections(),i=Jz(["locked","layerable",uh],s,!0),l=Object.keys(o).length;l&&i.push("attributes");var c=Md(e);c.forEach(function(d){d.setSymbolOverride(i,{fromDataSource:!0})}),e.setSymbolOverride(i,{fromDataSource:!0})}}},a.prototype.filterProps=function(r){var e=["components","dataResolver","status","state","open",Yf,uh],t=Object.fromEntries(Object.entries(r).filter(function(s){var o=s[0];return!e.includes(o)}));return t},a.prototype.processAttributes=function(r,e,t){var s;return t===void 0&&(t={}),this.attributeWatcher.setDataValues(Hi(Hi({},r.attributes),(s=e.attributes)!==null&&s!==void 0?s:{}),t)},a.prototype.processStyles=function(r,e,t){var s;return t===void 0&&(t={}),typeof r=="string"?(this.styleWatcher.removeListeners(),r):this.styleWatcher.setDataValues(Hi(Hi({},r.style),(s=e.style)!==null&&s!==void 0?s:{}),t)},a})(),tU=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),vo=function(){return vo=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},vo.apply(this,arguments)},rU=P3(),rC=function(a){return(0,Ce.isArray)(a)?a[a.length-1]:a},nU=(function(a){tU(r,a);function r(e,t){t===void 0&&(t={});var s=this,o=t.em,i=new eU(void 0,{em:o});return s=a.call(this,e,vo(vo({},t),{dataResolverWatchers:i}))||this,s.views=[],s.collectionsStateMap={},i.bindModel(s),s.dataResolverWatchers=i,s.em=t.em,s.opt=t,s}return r.prototype.get=function(e,t){return t?.skipResolve?this.dataResolverWatchers.getValueOrResolver("props")[e]:a.prototype.get.call(this,e)},r.prototype.set=function(e,t,s){var o,i,l={skipWatcherUpdates:!1,fromDataSource:!1},c,d;typeof e=="object"?(c=e,d=t||l):typeof e=="string"?(c=(o={},o[e]=t,o),d=s||l):(c={},d=l),this.dataResolverWatchers=(i=this.dataResolverWatchers)!==null&&i!==void 0?i:d.dataResolverWatchers;var h=this.dataResolverWatchers.addProps(c,d);return a.prototype.set.call(this,h,d)},r.prototype.parseStyle=function(e){return rU.parseStyle(e)},r.prototype.extendStyle=function(e){return vo(vo({},this.getStyle("",{skipResolve:!0})),e)},r.prototype.getStyle=function(e,t){t===void 0&&(t={});var s=this.get("style"),o=(0,Ce.isString)(s)?this.parseStyle(s):(0,Ce.isObject)(s)?vo({},s):{};delete o.__p;var i=!e||e===""||(0,Ce.isObject)(e);if(!t.skipResolve)return i?o:o[e];var l=this.dataResolverWatchers.getValueOrResolver("styles",o);return i?l:l[e]},r.prototype.setStyle=function(e,t){var s=this;e===void 0&&(e={}),t===void 0&&(t={}),(0,Ce.isString)(e)&&(e=this.parseStyle(e));var o=this.getStyle("",{skipResolve:!0});t.partial||t.avoidStore?(t.avoidStore=!0,e.__p=!0):delete e.__p;var i=vo({},e),l=vo({},i);(0,Ce.keys)(l).forEach(function(h){if(l[h]===""){delete l[h];return}}),this.set({style:l},t),l=this.attributes.style;var c=Object.keys((0,Zt.shallowDiff)(o,i)),d=c.reduce(function(h,m){var y;return vo(vo({},h),(y={},y[m]=l[m],y))},{});return delete d.__p,(0,Ce.keys)(d).forEach(function(h){var m=s.em;t.noEvent||(s.trigger("change:style:".concat(h)),m&&(m.trigger("styleable:change",s,h,t),m.trigger("styleable:change:".concat(h),s,h,t)))}),l},r.prototype.getView=function(e){var t=this,s=t.views,o=t.em,i=e||o?.getCurrentFrameModel();return i?s.find(function(l){return l.frameView===i.view}):s[0]},r.prototype.setView=function(e){var t=this.views;!t.includes(e)&&t.push(e)},r.prototype.removeView=function(e){var t=this.views;t.splice(t.indexOf(e),1)},r.prototype.updateView=function(){this.views.forEach(function(e){return e.updateStyles()})},r.prototype.addStyle=function(e,t,s){var o;t===void 0&&(t=""),s===void 0&&(s={}),typeof e=="string"?e=(o={},o[e]=t,o):s=t||{},s.addStyle=e,e=this.extendStyle(e),this.setStyle(e,s)},r.prototype.removeStyle=function(e){var t=this.getStyle();delete t[e],this.setStyle(t)},r.prototype.styleToString=function(e){e===void 0&&(e={});var t=[],s=e.style||this.getStyle(e),o=e.important,i=function(c){var d=(0,Ce.isArray)(o)?o.indexOf(c)>=0:o,h=c.substring(0,2),m=h==="__";if(m)return"continue";var y=s[c],x=(0,Ce.isArray)(y)?y:[y];x.forEach(function(b){var v="".concat(b).concat(d?" !important":"");v&&t.push("".concat(c,":").concat(v,";"))})};for(var l in s)i(l);return t.join("")},r.prototype.getSelectors=function(){return this.get("selectors")||this.get("classes")},r.prototype.getSelectorsString=function(e){return this.selectorsToString?this.selectorsToString(e):this.getSelectors().getFullString()},r.prototype.onCollectionsStateMapUpdate=function(e){this.collectionsStateMap=e,this.dataResolverWatchers.onCollectionsStateMapUpdate()},r.prototype.clone=function(e,t){var s=this.dataResolverWatchers.getProps(this.attributes),o=vo(vo({},s),e),i=vo(vo({},this.opt),t),l=this.constructor;return new l(o,i)},r.prototype.toJSON=function(e,t){if(e?.fromUndo)return vo({},a.prototype.toJSON.call(this,e));var s=vo(vo({},this.attributes),t),o=this.dataResolverWatchers.getProps(s);return o},r})(Sr.Kx);const A3=nU;var aU=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),f0=1,Nj=2,M3=(function(a){aU(r,a);function r(e,t){t===void 0&&(t={});var s=a.call(this,e,t)||this,o=t.config,i=o===void 0?{}:o,l=s.get("name"),c=s.get("label");l?c||s.set("label",l):s.set("name",c);var d=s.get("name"),h=i.escapeName,m=h?h(d):r.escapeName(d);return s.set("name",m),s.em=t.em,s}return r.prototype.defaults=function(){return{name:"",label:"",type:f0,active:!0,private:!1,protected:!1,_undo:!0}},r.prototype.isId=function(){return this.get("type")===Nj},r.prototype.isClass=function(){return this.get("type")===f0},r.prototype.getFullName=function(e){e===void 0&&(e={});var t=e.escape,s=this.get("name"),o="";switch(this.get("type")){case f0:o=".";break;case Nj:o="#";break}return o+(t?t(s):s)},r.prototype.toString=function(){return this.getFullName()},r.prototype.getName=function(){return this.get("name")||""},r.prototype.getLabel=function(){return this.get("label")||""},r.prototype.setLabel=function(e){return this.set("label",e)},r.prototype.getActive=function(){return!!this.get("active")},r.prototype.setActive=function(e){return this.set("active",e)},r.prototype.toJSON=function(e){e===void 0&&(e={});var t=this.em,s=Sr.Kx.prototype.toJSON.call(this,[e]),o=(0,Ce.result)(this,"defaults");if(t?.getConfig().avoidDefaults){(0,Ce.forEach)(o,function(l,c){s[c]===l&&delete s[c]}),s.label===s.name&&delete s.label;var i=(0,Ce.keys)(s).length;i===1&&s.name&&(s=s.name),i===2&&s.name&&s.type&&(s=this.getFullName())}return s},r.escapeName=function(e){return"".concat(e).trim().replace(/\s+/g,"-")},r.TYPE_CLASS=f0,r.TYPE_ID=Nj,r})(Sr.Kx);const si=M3;M3.prototype.idAttribute="name";var sU=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),I3=function(a,r){return a.reduce(function(e,t,s){return e.concat(I3(a.slice(s+1),"".concat(r).concat(t)))},[r])},R3=(function(a){sU(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.modelId=function(e){return"".concat(e.name,"_").concat(e.type||si.TYPE_CLASS)},r.prototype.getStyleable=function(){return(0,Ce.filter)(this.models,function(e){return e.getActive()&&!e.get("private")})},r.prototype.getValid=function(e){var t=e===void 0?{}:e,s=t.noDisabled;return(0,Ce.filter)(this.models,function(o){return!o.get("private")}).filter(function(o){return s?o.get("active"):1})},r.prototype.getFullString=function(e,t){t===void 0&&(t={});var s=[],o=e||this;return o.forEach(function(i){return s.push(i.getFullName(t))}),t.sort&&s.sort(),s.join("").trim()},r.prototype.getFullName=function(e){e===void 0&&(e={});var t=e.combination,s=e.array,o=[],i=this.map(function(l){return l.getFullName(e)}).sort();return t?i.forEach(function(l,c){o=o.concat(I3(i.slice(c+1),l))}):o=i,s?o:t?o.join(","):o.join("")},r})(Sr.pM);const Mu=R3;R3.prototype.model=si;var oU=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),w5=function(a,r,e){if(e||arguments.length===2)for(var t=0,s=r.length,o;t<s;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return a.concat(o||Array.prototype.slice.call(r))},iU=(function(a){oU(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.defaults=function(){return{id:"",label:"",open:!0,attributes:{}}},r.prototype.getId=function(){return this.get("id")},r.prototype.getLabel=function(){return this.get("label")},r})(Sr.Kx);const Vy=iU;function L3(a){var r=new Set,e=new Map,t={items:[]};a.forEach(function(o){var i=o.category;if(i){r.add(i);var l=e.get(i);l?l.push(o):e.set(i,[o])}else t.items.push(o)});var s=Array.from(r).map(function(o){return{category:o,items:e.get(o)||[]}});return w5(w5([],s,!0),[t],!1)}var lU=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),j5="category",D3=(function(a){lU(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.initCategory=function(e){var t=e.get(j5),s=t instanceof Vy;if(t&&!s){(0,Ce.isString)(t)?t={id:t,label:t}:(0,Zt.isObject)(t)&&!t.id&&(t.id=t.label);var o=this.getCategories().add(t);return e.set(j5,o,{silent:!0}),o}else if(s){var o=t;return this.getCategories().add(o),o}},r})(Sr.pM),cU=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),F3=(function(a){cU(r,a);function r(e,t){t===void 0&&(t={});var s=a.call(this,e,t)||this,o=t.events,i=t.em,l=o?.update;return i&&l&&s.on("change",function(c,d){return i.trigger(l,{category:c,changes:c.changedAttributes(),options:d})}),s}return r.prototype.add=function(e,t){var s=(0,Ce.isArray)(e)?e:[e];return s.forEach(function(o){return o&&(o.id=(0,Zt.normalizeKey)("".concat(o.id)))}),a.prototype.add.call(this,e,t)},r.prototype.get=function(e){return a.prototype.get.call(this,(0,Ce.isString)(e)?(0,Zt.normalizeKey)(e):e)},r})(Sr.pM);const lv=F3;F3.prototype.model=Vy;var cv;(function(a){a.select="trait:select",a.value="trait:value",a.categoryUpdate="trait:category:update",a.custom="trait:custom",a.all="trait"})(cv||(cv={}));const nC=cv;var dU=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),dv=function(){return dv=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},dv.apply(this,arguments)},uU=(function(a){dU(r,a);function r(e,t){var s=a.call(this,e)||this,o=s.attributes,i=o.target,l=o.name;return!s.get("id")&&s.set("id",l),i&&s.setTarget(i),s.em=t,s}return r.prototype.defaults=function(){return{type:"text",label:"",name:"",unit:"",step:1,value:"",default:"",placeholder:"",category:"",changeProp:!1,options:[]}},Object.defineProperty(r.prototype,"parent",{get:function(){return this.collection},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"category",{get:function(){var e=this.get("category");return e instanceof Vy?e:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"component",{get:function(){return this.target},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"changeProp",{get:function(){return!!this.get("changeProp")},enumerable:!1,configurable:!0}),r.prototype.setTarget=function(e){if(e){var t=this.attributes,s=t.name,o=t.changeProp,i=t.value,l=t.getValue;this.target=e,this.unset("target");var c=o?"change:".concat(s):"change:attributes:".concat(s);this.listenTo(e,c,this.targetUpdated);var d=i||(l?void 0:this.getValue());!(0,Ce.isUndefined)(d)&&this.set({value:d},{silent:!0})}},r.prototype.getId=function(){return this.get("id")},r.prototype.getType=function(){return this.get("type")},r.prototype.getName=function(){return this.get("name")},r.prototype.getLabel=function(e){var t;e===void 0&&(e={});var s=e.locale,o=s===void 0?!0:s,i=this.getId(),l=this.get("label")||this.getName();return o&&((t=this.em)===null||t===void 0?void 0:t.t("traitManager.traits.labels.".concat(i)))||l},r.prototype.getValue=function(e){return this.getTargetValue(e)},r.prototype.setValue=function(e,t){var s=this;t===void 0&&(t={});var o=this,i=o.component,l=o.em,c=t.partial,d={},h=this.attributes.setValue;if(h){h({value:e,component:i,editor:l?.getEditor(),trait:this,partial:!!c,options:t,emitUpdate:function(){return s.targetUpdated()}});return}c&&(d.avoidStore=!0),this.setTargetValue(e,d)},r.prototype.getDefault=function(){return this.get("default")},r.prototype.getOptions=function(){return this.get("options")||[]},r.prototype.getOption=function(e){var t=this,s=(0,Zt.isDef)(e)?e:this.getValue();return this.getOptions().filter(function(o){return t.getOptionId(o)===s})[0]},r.prototype.getOptionId=function(e){return e.id||e.value},r.prototype.getOptionLabel=function(e,t){var s;t===void 0&&(t={});var o=t.locale,i=o===void 0?!0:o,l=(0,Ce.isString)(e)?this.getOption(e):e,c=this.getOptionId(l),d=l.label||l.name||c,h=this.getName();return i&&((s=this.em)===null||s===void 0?void 0:s.t("traitManager.traits.options.".concat(h,".").concat(c)))||d},r.prototype.getCategoryLabel=function(e){e===void 0&&(e={});var t=this,s=t.em,o=t.category,i=e.locale,l=i===void 0?!0:i,c=o?.getId(),d=o?.getLabel();return l&&s?.t("traitManager.categories.".concat(c))||d||""},r.prototype.runCommand=function(){var e=this.em,t=this.attributes.command;if(t&&e)return(0,Ce.isString)(t)?e.Commands.run(t):t(e.Editor,this)},r.prototype.props=function(){return this.attributes},r.prototype.targetUpdated=function(){var e=this,t=e.component,s=e.em,o=this.getTargetValue({useType:!0});this.set({value:o},{fromTarget:1});var i={trait:this,component:t,value:o};t.trigger(nC.value,i),s?.trigger(nC.value,i),s?.trigger("trait:update",i)},r.prototype.getTargetValue=function(e){var t;e===void 0&&(e={});var s=this,o=s.component,i=s.em,l=this.getName(),c=this.get("getValue"),d,h=e.skipResolve;if(c?d=c({editor:i?.getEditor(),trait:this,component:o}):this.changeProp?(d=o.get(l),h&&(d=o.dataResolverWatchers.getValueOrResolver("props",(t={},t[l]=d,t))[l])):d=o.getAttributes({skipResolve:h})[l],e.useType){var m=this.getType();if(m==="checkbox"){var y=this.attributes,x=y.valueTrue,b=y.valueFalse;!(0,Ce.isUndefined)(x)&&x===d?d=!0:!(0,Ce.isUndefined)(b)&&b===d&&(d=!1)}}return(0,Ce.isUndefined)(d)?"":d},r.prototype.setTargetValue=function(e,t){var s;t===void 0&&(t={});var o=this,i=o.component,l=o.attributes,c=this.getName();if(!(0,Ce.isUndefined)(e)){var d=e;if(e==="false"?d=!1:e==="true"&&(d=!0),this.getType()==="checkbox"){var h=l.valueTrue,m=l.valueFalse;d&&!(0,Ce.isUndefined)(h)&&(d=h),!d&&!(0,Ce.isUndefined)(m)&&(d=m)}var y=(s={},s[c]=d,s);y.__p=t.avoidStore?null:void 0,this.changeProp?i.set(y,t):i.addAttributes(y,t)}},r.prototype.setValueFromInput=function(e,t,s){t===void 0&&(t=!0),s===void 0&&(s={});var o={value:e};this.set(o,dv(dv({},s),{avoidStore:1})),t&&(this.set("value","",s),this.set(o,s))},r.prototype.getInitValue=function(){var e=this.component,t=this.getName(),s;if(e){var o=e.get("attributes");s=this.changeProp?e.get(t):o[t]}return s||this.get("value")||this.get("default")},r})(Sr.Kx);const uv=uU;var fU=(function(){function a(r){r===void 0&&(r={}),this.config=r}return a.prototype.build=function(r,e){return(0,Ce.isString)(r)?this.buildFromString(r,e):new uv(r,e)},a.prototype.buildFromString=function(r,e){var t={name:r,type:"text"};return r==="target"&&(t.type="select",t.default=!1,t.options=this.config.optionsTarget),new uv(t,e)},a})();const pU=fU;var hU=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),mU=(function(a){hU(r,a);function r(e,t){var s=a.call(this,e)||this;s.categories=new lv;var o=t.em;s.em=o,s.categories=new lv([],{em:o,events:{update:nC.categoryUpdate}}),s.on("add",s.handleAdd),s.on("reset",s.handleReset);var i=s.module,l=i?.getConfig();return s.tf=new pU(l),s}return Object.defineProperty(r.prototype,"module",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),r.prototype.getCategories=function(){return this.categories},r.prototype.handleReset=function(e,t){var s=t===void 0?{}:t,o=s.previousModels,i=o===void 0?[]:o;i.forEach(function(l){return l.trigger("remove")})},r.prototype.handleAdd=function(e){e.em=this.em;var t=this.target;t&&(e.target=t),this.initCategory(e)},r.prototype.setTarget=function(e){this.target=e,this.models.forEach(function(t){return t.setTarget(e)})},r.prototype.add=function(e,t){if(e!=null){var s=this,o=s.target,i=s.em;if((0,Ce.isArray)(e)){for(var l=[],c=0,d=e.length;c<d;c++){var h=e[c];l[c]=h instanceof uv?h:this.tf.build(h,i),l[c].setTarget(o)}return a.prototype.add.call(this,l,t)}var m=e instanceof uv?e:this.tf.build(e,i);return m.setTarget(o),a.prototype.add.call(this,m,t)}},r})(D3);const fv=mU;var gU=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Ho=function(){return Ho=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Ho.apply(this,arguments)},$0=function(a,r){var e={};for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&r.indexOf(t)<0&&(e[t]=a[t]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(a);s<t.length;s++)r.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(a,t[s])&&(e[t[s]]=a[t[s]]);return e},kj=function(a,r,e){if(e||arguments.length===2)for(var t=0,s=r.length,o;t<s;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return a.concat(o||Array.prototype.slice.call(r))},mh=function(a,r){if(r===void 0&&(r=[]),!a)return[];var e=(0,Ce.isArray)(a)||(0,Ce.isFunction)(a.map)?a:[a];return e.map(function(t){r.push(t.getId()),mh(t.components().models,r)}),r},B3=function(a,r,e){r===void 0&&(r={}),e===void 0&&(e={}),e.visitedCmps=e.visitedCmps||{};var t=e.visitedCmps,s=e.updateOptions||{},o=(0,Ce.isArray)(a)?a:[a];return o.map(function(i){var l=i.attributes,c=l===void 0?{}:l,d=i.components,h=i.tagName,m=i.style,y=c.id;c.draggable;var x=$0(c,["id","draggable"]),b=i;if(y){if(t[y])t[y].push(b),y=$s.getNewId(r),b.attributes.id=y;else if(t[y]=[],r[y]){b=r[y];var v=s.onAttributes,j=s.onStyle,S=b;h&&S.set({tagName:h},Ho(Ho({},e),{silent:!0})),v?v({item:i,component:S,attributes:x,options:e}):(0,Ce.keys)(x).length&&S.addAttributes(x,Ho({},e)),j?j({item:i,component:S,style:m,options:e}):(0,Ce.keys)(m).length&&S.addStyle(m,e)}}var k=(0,Ce.isFunction)(b.components)?b:null;if(d){var N=B3(d,r,e);k?k.components().reset(N,e):b.components=N}else k&&k.components().reset([],e);return b})},yU=(function(a){gU(r,a);function r(e,t){var s=a.call(this,e,t)||this;s.opt=t,s.listenTo(s,"add",s.onAdd),s.listenTo(s,"remove",s.removeChildren),s.listenTo(s,"reset",s.resetChildren);var o=t.em,i=t.config;return s.config=i,s.em=o,s.domc=t.domc||o?.Components,s}return Object.defineProperty(r.prototype,"events",{get:function(){var e;return(e=this.domc)===null||e===void 0?void 0:e.events},enumerable:!1,configurable:!0}),r.prototype.resetChildren=function(e,t){var s=this;t===void 0&&(t={});var o=this,i=t.previousModels||[],l=i.filter(function(h){return!e.get(h.cid)}),c=mh(e),d=mh(i).filter(function(h){return c.indexOf(h)>=0});t.keepIds=(t.keepIds||[]).concat(d),l.forEach(function(h){return s.removeChildren(h,o,t)}),e.each(function(h){return s.onAdd(h)})},r.prototype.resetFromString=function(e,t){var s,o;e===void 0&&(e=""),t===void 0&&(t={}),t.keepIds=mh(this);var i=this,l=i.domc,c=i.em,d=i.parent,h=l?.allById()||{},m=this.parseString(e,Ho(Ho({},t),{cloneRules:!0})),y=Ho({skipViewUpdate:!0},t),x=B3(m,h,y);r.cloneCssRules(c,y.visitedCmps),this.reset(x,t),c?.trigger("component:content",d,t,e),(o=(s=d).__checkInnerChilds)===null||o===void 0||o.call(s)},r.prototype.removeChildren=function(e,t,s){var o=this;if(s===void 0&&(s={}),!!e){var i=this,l=i.domc,c=i.em,d=s.temporary||s.fromUndo;if(e.prevColl=this,!d){var h=e.getId(),m=c.Selectors.getAll(),y=c.Css.getAll(),x=(s.keepIds||[]).indexOf(h)<0,b=l?l.allById():{};delete b[h];var v=x?y.remove(y.filter(function(N){return N.getSelectors().getFullString()==="#".concat(h)}),s):[];m.remove(v.map(function(N){return N.getSelectors().at(0)})),e.opt.temporary||(c.Commands.run("core:component-style-clear",{target:e}),e.views.forEach(function(N){N.scriptContainer&&e.emitWithEditor(ja.I.scriptUnmount,{component:e,view:N,el:N.el})}),e.removed(),e.trigger("removed"),c.trigger(ja.I.remove,e),l&&sv(e)&&op(e)&&l.symbols.__trgEvent(l.events.symbolInstanceRemove,{component:e},!0));var j=e.components();j.forEach(function(N){_3(N,N,j,Ho(Ho({},s),{skipRefsUp:!0})),o.removeChildren(N,t,s)})}var S=e.components();if(c.stopListening(S),c.stopListening(e),c.stopListening(e.get("classes")),e.__postRemove(),!e.opt.temporary){var k=function(N){N.emitWithEditor(ja.I.removed,N,{removeOptions:s}),N.components().forEach(function(P){return k(P)})};k(e)}}},r.prototype.model=function(e,t){var s=t.collection.opt,o=s.em,i,l=o.Components.componentTypes;t.em=o,t.config=s.config,t.componentTypes=l,t.domc=s.domc;for(var c=0;c<l.length;c++){var d=l[c].id;if(d==e.type){i=l[c].model;break}}return i||(i=l[l.length-1].model,o&&e.type&&o.logWarning("Component type '".concat(e.type,"' not found"),{attrs:e,options:t})),new i(e,t)},r.prototype.parseString=function(e,t){t===void 0&&(t={});var s=this,o=s.em,i=s.domc,l=s.parent,c=l?.is("wrapper"),d=t.asDocument&&c,h=o.Css,m=o.Parser.parseHtml(e,Ho({asDocument:d},t.parserOptions)),y=m.html;if(c&&m.doctype){var x=l,b=m.html||{},v=b.components,j=v===void 0?[]:v,S=$0(b,["components"]),k=m.head||{},N=k.components,P=$0(k,["components"]);y=j,x.set(S,t),x.head.set(P,t),x.head.components(N,t),x.docEl.set(m.root,t),x.set({doctype:m.doctype})}var R=$s.checkId(y,m.css,i.componentsById,t);if(t.cloneRules&&r.cloneCssRules(o,R.updatedIds),m.css&&h&&!t.temporary){t.at;var F=$0(t,["at"]);h.addCollection(m.css,Ho(Ho({},F),{extend:1}))}return y},r.prototype.add=function(e,t){var s=this;if(t===void 0&&(t={}),e!=null){t.keepIds=kj(kj([],t.keepIds||[],!0),mh(t.previousModels),!0),(0,Ce.isString)(e)?e=this.parseString(e,t):(0,Ce.isArray)(e)&&(e=kj([],e,!0),e.forEach(function(i,l){if((0,Ce.isString)(i)){var c=s.parseString(i,t);e[l]=(0,Ce.isArray)(c)&&!c.length?null:c}}));var o=((0,Ce.isArray)(e)?e:[e]).filter(Boolean).map(function(i){return s.processDef(i)});return e=(0,Ce.isArray)(e)?(0,Ce.flatten)(o,1):o[0],a.prototype.add.call(this,e,t)}},r.prototype.processDef=function(e){if(e.cid&&e.ccid)return e;var t=this,s=t.em,o=t.config,i=o===void 0?{}:o,l=i.processor,c=e;if(l){c=Ho({},c);var d=l(c);d&&((0,Ce.each)(c,function(j,S){return delete c[S]}),(0,Ce.extend)(c,d))}if(c.$$typeof&&typeof c.props=="object"){c=Ho({},c),c.props=Ho({},c.props);var h=s.Components,m=s.Parser,y=m.parserHtml;(0,Ce.each)(c,function(j,S){(0,Ce.includes)(["props","type"],S)||delete c[S]});var x=c.props,b=x.children;delete x.children,delete c.props;var v=y.splitPropsFromAttr(x);c.attributes=v.attrs,b&&(c.components=b),c.type?h.getType(c.type)||(c.tagName=c.type,delete c.type):c.type="textnode",(0,Ce.extend)(c,v.props)}return c},r.prototype.onAdd=function(e,t,s){s===void 0&&(s={});var o=this,i=o.domc,l=o.em,c=l.config.avoidInlineStyle;if(i&&i.Component.ensureInList(e),!c&&l.config.forceClass&&!s.temporary){var d=e.getStyle();if(!(0,Ce.isEmpty)(d)){var h=e.cid;l.Css.setClassRule(h,d),e.setStyle({}),e.addClass(h)}}if(e.__postAdd({recursive:!0}),l&&!s.temporary){var m=function(y){l.trigger(ja.I.add,y,s),y.components().forEach(function(x){return m(x)})};m(e),i&&sv(e)&&op(e)&&i.symbols.__trgEvent(i.events.symbolInstanceAdd,{component:e},!0)}},r.cloneCssRules=function(e,t){t===void 0&&(t={});var s=e.Css;Object.keys(t).forEach(function(o){var i=t[o];if(i.length){var l=(s.getRules("#".concat(o))||[]).filter(function(d){return!(0,Ce.isEmpty)(d.attributes.style)});if(l.length){var c=s.getAll();i.forEach(function(d){l.forEach(function(h){var m=h.clone();m.set("selectors",["#".concat(d.attributes.id)]),c.add(m)})})}}})},r})(Sr.pM);const by=yU;var xU=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Ha=function(){return Ha=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Ha.apply(this,arguments)},vU=function(a,r){var e={};for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&r.indexOf(t)<0&&(e[t]=a[t]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(a);s<t.length;s++)r.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(a,t[s])&&(e[t[s]]=a[t[s]]);return e},Vi=function(a,r,e){if(e||arguments.length===2)for(var t=0,s=r.length,o;t<s;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return a.concat(o||Array.prototype.slice.call(r))},C5=function(a){return a.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},Ff=function(a){return!!a?.getConfig().avoidInlineStyle},RS="component:drag",ri="__symbols",Si="__symbol",Yf="__symbol_ovrd",V0=ja.I.update,aC=ja.I.updateInside,bU=(function(a){xU(r,a);function r(e,t){e===void 0&&(e={});var s=this,o=t.em;s=a.call(this,e,t)||this,(0,Ce.bindAll)(s,"__upSymbProps","__upSymbCls","__upSymbComps","syncOnComponentChange");var i=s.parent(),l=i?.attributes,c=s.get("propagate");if(c&&s.set("propagate",(0,Ce.isArray)(c)?c:[c]),l&&l.propagate&&!c){var d={},h=l.propagate;h.forEach(function(S){return d[S]=i.get(S)}),d.propagate=h,s.set(Ha(Ha({},d),e))}t&&t.config&&t.config.voidElements.indexOf(s.get("tagName"))>=0&&s.set("void",!0),t.em=o,s.opt=t,s.em=o,s.config=t.config||{};var m=Ha(Ha({},(0,Ce.result)(s,"defaults").attributes||{}),s.get("attributes")||{}),y=s.dataResolverWatchers.getValueOrResolver("attributes",m);if(s.setAttributes(y),s.ccid=r.createId(s,t),s.preInit(),s.initClasses(),s.initComponents(),s.initTraits(),s.initToolbar(),s.initScriptProps(),s.listenTo(s,"change:script",s.scriptUpdated),s.listenTo(s,"change:tagName",s.tagUpdated),s.listenTo(s,"change:attributes",s.attrUpdated),s.listenTo(s,"change:attributes:id",s._idUpdated),s.on("change:toolbar",s.__emitUpdateTlb),s.on("change",s.__onChange),s.on(aC,s.__propToParent),s.set("status",""),s.views=[],["classes","traits","components"].forEach(function(S){var k="add remove reset ".concat(S!=="components"?"change":"");s.listenTo(s.get(S),k.trim(),function(){for(var N=[],P=0;P<arguments.length;P++)N[P]=arguments[P];return s.emitUpdate.apply(s,Vi([S],N,!1))})}),!t.temporary){var x=o&&o.Css,b=s.attributes,v=b.styles,j=b.type;v&&x&&x.addCollection(v,{avoidUpdateStyle:!0},{group:"cmp:".concat(j)}),s._moveInlineStyleToRule(),s.__postAdd(),s.init(),ac(s)&&Sg(s),o?.trigger(ja.I.create,s,t)}return Ff(o)&&s.dataResolverWatchers.disableStyles(),s}return Object.defineProperty(r.prototype,"defaults",{get:function(){var e;return e={tagName:"div",type:"",name:"",removable:!0,draggable:!0,droppable:!0,badgable:!0,stylable:!0,"stylable-require":"","style-signature":"",unstylable:"",highlightable:!0,copyable:!0,resizable:!1,editable:!1,layerable:!0,selectable:!0,hoverable:!0,void:!1,state:"",status:"",content:"",icon:"",style:"",styles:"",classes:"",script:"","script-props":"","script-export":"",attributes:{},traits:["id","title"],propagate:"",dmode:"",toolbar:null,delegate:null},e[Si]=0,e[ri]=0,e[Yf]=0,e._undo=!0,e._undoexc=["status","open"],e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tagName",{get:function(){return this.get("tagName")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"classes",{get:function(){return this.get("classes")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"traits",{get:function(){return this.get("traits")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"content",{get:function(){var e;return(e=this.get("content"))!==null&&e!==void 0?e:""},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"toolbar",{get:function(){return this.get("toolbar")||[]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"resizable",{get:function(){return this.get("resizable")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"delegate",{get:function(){return this.get("delegate")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"locked",{get:function(){return this.get("locked")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"frame",{get:function(){return this.opt.frame},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"page",{get:function(){var e;return(e=this.frame)===null||e===void 0?void 0:e.getPage()},enumerable:!1,configurable:!0}),r.prototype.getType=function(){return this.get("type")||"default"},r.prototype.preInit=function(){},r.prototype.init=function(){},r.prototype.updated=function(e,t,s){},r.prototype.removed=function(){},r.prototype.onCollectionsStateMapUpdate=function(e){var t;a.prototype.onCollectionsStateMapUpdate.call(this,e),(t=this._getStyleRule())===null||t===void 0||t.onCollectionsStateMapUpdate(e);var s=this.components();s.forEach(function(o){return o.onCollectionsStateMapUpdate(e)})},r.prototype.syncComponentsCollectionState=function(){this.stopListening(this.components(),"add remove reset",this.syncOnComponentChange),this.listenTo(this.components(),"add remove reset",this.syncOnComponentChange),this.components().forEach(function(e){return e.syncComponentsCollectionState()})},r.prototype.stopSyncComponentCollectionState=function(){this.stopListening(this.components(),"add remove reset",this.syncOnComponentChange),this.collectionsStateMap={},this.components().forEach(function(e){return e.stopSyncComponentCollectionState()})},r.prototype.syncOnComponentChange=function(e,t,s){var o=this;if(!(!this.collectionsStateMap||!Object.keys(this.collectionsStateMap).length)){var i=s||t||{};if(s)if(i.add){var c=e;c.syncComponentsCollectionState(),c.onCollectionsStateMapUpdate(this.collectionsStateMap)}else{var d=e;d.stopSyncComponentCollectionState()}else{var l=i.previousModels||[];l.forEach(function(h){return h.stopSyncComponentCollectionState()}),this.components().forEach(function(h){h.syncComponentsCollectionState(),h.onCollectionsStateMapUpdate(o.collectionsStateMap)})}}},r.prototype.__postAdd=function(e){e===void 0&&(e={});var t=this.em,s=t?.UndoManager,o=this.components();s&&!this.__hasUm&&(s.add(o),s.add(this.getSelectors()),this.__hasUm=!0),e.recursive&&o.map(function(i){return i.__postAdd(e)})},r.prototype.__postRemove=function(){var e=this.em,t=e?.UndoManager;t&&(t.remove(this.components()),t.remove(this.getSelectors()),delete this.__hasUm)},r.prototype.__onChange=function(e,t){var s=this,o=this.changedAttributes()||{};(0,Ce.keys)(o).forEach(function(i){return s.emitUpdate(i)}),["status","open","toolbar","traits"].forEach(function(i){return delete o[i]}),(0,Zt.isEmptyObj)(o)||(this.__changesUp(t,{changed:o}),this.__propSelfToParent({component:this,changed:o,options:t}))},r.prototype.__onStyleChange=function(e,t){var s=this,o=this,i=o.collectionsStateMap,l=o.em;if(!(!l||t?.noEvent)){var c=(0,Ce.keys)(e),d={style:e};this.emitWithEditor(ja.I.styleUpdate,this,d),c.forEach(function(x){return s.emitWithEditor("".concat(ja.I.styleUpdateProperty).concat(x),s,d)});var h=Object.keys(i).filter(function(x){return x!==gy.rootData});if(h.length!==0){var m=h.every(function(x){var b=i[x];return b.currentIndex===b.startIndex});if(m){var y=Md(this);y.forEach(function(x){var b=x.collectionsStateMap,v=Object.keys(b),j=v.every(function(S){return h.includes(S)});j&&x.addStyle(Ha({},e),{noEvent:!0})})}}}},r.prototype.__changesUp=function(e,t){var s=this;t===void 0&&(t={});var o=this,i=o.em,l=o.frame;[l,i].forEach(function(c){c?.changesUp(e,Ha({component:s,options:e},t))})},r.prototype.__propSelfToParent=function(e){this.trigger(V0,e),this.__propToParent(e)},r.prototype.__propToParent=function(e){var t=this.parent();t&&t.trigger(aC,e)},r.prototype.__emitUpdateTlb=function(){this.emitUpdate("toolbar")},r.prototype.__getAllById=function(){var e=this.em;return e?e.Components.allById():{}},r.prototype.__upSymbProps=function(e,t){t===void 0&&(t={}),Dz(this,t)},r.prototype.__upSymbCls=function(e,t,s){s===void 0&&(s={}),$z(this,s)},r.prototype.__upSymbComps=function(e,t,s){_3(this,e,t,s)},r.prototype.__onDestroy=function(){},r.prototype.is=function(e){return this.get("type")==e},r.prototype.props=function(){return this.attributes},r.prototype.index=function(){var e=this.collection;return e?e.indexOf(this):0},r.prototype.setDragMode=function(e){return this.set("dmode",e)},r.prototype.getDragMode=function(){return this.get("dmode")||""},r.prototype.setSymbolOverride=function(e,t){var s,o;t===void 0&&(t={}),this.set((s={},s[Yf]=(o=(0,Ce.isString)(e)?[e]:e)!==null&&o!==void 0?o:0,s),t)},r.prototype.getSymbolOverride=function(){return this.get(Yf)},r.prototype.find=function(e){var t,s=[],o=(t=this.view)===null||t===void 0?void 0:t.$el.find(e);return o?.each(function(i){var l=o.eq(i),c=l.data("model");c&&s.push(c)}),s},r.prototype.findType=function(e){var t=[],s=function(o){return o.forEach(function(i){i.is(e)&&t.push(i),s(i.components())})};return s(this.components()),t},r.prototype.findFirstType=function(e){return this.findType(e).at(0)},r.prototype.closest=function(e){var t,s=(t=this.view)===null||t===void 0?void 0:t.$el.closest(e);return s?.length?s.data("model"):void 0},r.prototype.closestType=function(e){for(var t=this.parent();t&&!t.is(e);)t=t.parent();return t},r.prototype.contains=function(e){var t=!1;if(!e)return t;var s=function(o){!t&&o.forEach(function(i){i===e&&(t=!0),!t&&s(i.components())})};return s(this.components()),t},r.prototype.tagUpdated=function(){this.trigger("rerender")},r.prototype.replaceWith=function(e,t){t===void 0&&(t={});var s=this.collection,o=s.indexOf(this);s.remove(this);var i=s.add(e,Ha(Ha({},t),{at:o}));return(0,Ce.isArray)(i)?i:[i]},r.prototype.attrUpdated=function(e,t,s){var o=this;s===void 0&&(s={});var i=this.get("attributes"),l=i.class;l&&this.setClass(l),delete i.class;var c=i.style;c&&this.setStyle(c,s),delete i.style;var d=Ha({},this.previous("attributes")),h=(0,Zt.shallowDiff)(d,this.get("attributes"));(0,Ce.keys)(h).forEach(function(m){var y,x="attributes:".concat(m);o.trigger("change:".concat(x),o,h[m],s),(y=o.em)===null||y===void 0||y.trigger("".concat(V0,":").concat(x),o,h[m],s)})},r.prototype.setAttributes=function(e,t){return t===void 0&&(t={skipWatcherUpdates:!1,fromDataSource:!1}),this.set("attributes",Ha({},e),t),this},r.prototype.addAttributes=function(e,t){t===void 0&&(t={});var s=this.dataResolverWatchers.getValueOrResolver("attributes",this.getAttributes({noClass:!0,noStyle:!0}));return this.setAttributes(Ha(Ha({},s),e),t)},r.prototype.removeAttributes=function(e,t){e===void 0&&(e=[]),t===void 0&&(t={});var s=Array.isArray(e)?e:[e],o=this.getAttributes();return s.map(function(i){return delete o[i]}),this.setAttributes(o,t)},r.prototype.getStyle=function(e,t){var s=this.em,o=(0,Ce.isString)(e),i=o?e:"",l=o?t:e,c=!!l?.skipResolve;if(Ff(s)&&!l?.inline){var d=s.get("state"),h=s.Css,m=h.getIdRule(this.getId(),Ha({state:d},l));return this.rule=m,m?m.getStyle(i,{skipResolve:c}):{}}return a.prototype.getStyle.call(this,i,{skipResolve:c})},r.prototype.setStyle=function(e,t){var s=this;e===void 0&&(e={}),t===void 0&&(t={});var o=this,i=o.opt,l=o.em;if(Ff(l)&&!i.temporary&&!t.inline){var c=this.get("style")||{};e=(0,Ce.isString)(e)?this.parseStyle(e):e,e=Ha(Ha({},c),e);var d=l.get("state"),h=l.Css,m=this.getStyle(Ha(Ha({},t),{skipResolve:!0}));this.rule=h.setIdRule(this.getId(),e,Ha({state:d},t));var y=(0,Zt.shallowDiff)(m,e);this.set("style","",{silent:!0}),(0,Ce.keys)(y).forEach(function(x){return s.trigger("change:style:".concat(x))})}else e=a.prototype.setStyle.apply(this,arguments);return i.temporary||this.__onStyleChange(t.addStyle||e,t),e},r.prototype.getAttributes=function(e){e===void 0&&(e={});var t=this.em,s=[],o=Ha({},this.get("attributes")),i=e?.skipResolve?this.dataResolverWatchers.getValueOrResolver("attributes",o):o,l=t?.Selectors,c=this.getId();if(e.noClass?delete i.class:(this.classes.forEach(function(m){return s.push((0,Ce.isString)(m)?m:m.getName())}),s.length&&(i.class=s.join(" "))),!e.noStyle){var d=this.getStyle({inline:!0});(0,Zt.isObject)(d)&&!(0,Zt.isEmptyObj)(d)&&(i.style=this.styleToString({inline:!0}))}if(!(0,Ce.has)(i,"id")){var h=!1;(Ff(t)||!(0,Ce.isEmpty)(this.getStyle()))&&(h=!!l?.get(c,l.Selector.TYPE_ID)),(ac(this)||this.get("script-export")||this.get("script"))&&(h=!0),h&&(i.id=c)}return i},r.prototype.addClass=function(e){var t=this.em.Selectors.addClass(e);return this.classes.add(t)},r.prototype.setClass=function(e){return this.classes.reset(),this.addClass(e)},r.prototype.removeClass=function(e){var t=[];e=(0,Ce.isArray)(e)?e:[e];var s=this.classes,o=si.TYPE_CLASS;return e.forEach(function(i){var l=i.split(" ");l.forEach(function(c){var d=s.where({name:c,type:o})[0];d&&t.push(s.remove(d))})}),t},r.prototype.getClasses=function(){var e=this.getAttributes(),t=e.class;return t?t.split(" "):[]},r.prototype.initClasses=function(e,t,s){s===void 0&&(s={});var o="change:classes",i=this.get("attributes")||{},l=i.class,c=vU(i,["class"]),d=[this,o,this.initClasses],h=this.get("classes")||l||[],m=(0,Ce.isString)(h)?h.split(" "):h;this.stopListening.apply(this,d);var y=this.normalizeClasses(m),x=new Mu([]);return this.set("classes",x,s),x.add(y),x.on("add remove reset",this.__upSymbCls),l&&y.length&&this.set("attributes",c),this.listenTo.apply(this,d),this},r.prototype.initComponents=function(){var e="change:components",t=[this,e,this.initComponents];this.stopListening.apply(this,t);var s=new by([],this.opt);s.parent=this;var o=this.get("components"),i=!this.opt.avoidChildren;return this.set("components",s),i&&o&&s.add((0,Ce.isFunction)(o)?o(this):o,this.opt),s.on("add remove reset",this.__upSymbComps),this.listenTo.apply(this,t),this},r.prototype.initTraits=function(e){var t=this,s=this.em,o="change:traits";this.off(o,this.initTraits),this.__loadTraits();var i=Ha({},this.get("attributes")),l=this.traits;l.each(function(d){var h=d.getName(),m=d.getInitValue();d.changeProp?(0,Ce.isUndefined)(t.get(h))&&t.set(h,m):h&&m&&(i[h]=m)});var c=this.dataResolverWatchers.getValueOrResolver("attributes",i);return l.length&&this.setAttributes(c),this.on(o,this.initTraits),e&&s&&s.trigger("component:toggled"),this},r.prototype.initScriptProps=function(){if(!this.opt.temporary){var e="script-props",t=["change:".concat(e),this.initScriptProps];this.off.apply(this,t);var s=this.previous(e)||[],o=this.get(e)||[],i=s.map(function(c){return"change:".concat(c)}).join(" "),l=o.map(function(c){return"change:".concat(c)}).join(" ");i&&this.off(i,this.__scriptPropsChange),l&&this.on(l,this.__scriptPropsChange),this.on.apply(this,t)}},r.prototype.__scriptPropsChange=function(e,t,s){s===void 0&&(s={}),!s.avoidStore&&this.trigger("rerender")},r.prototype.append=function(e,t){t===void 0&&(t={});var s=(0,Ce.isArray)(e)?Vi([],e,!0):[e],o=s.map(function(l){return(0,Ce.isString)(l)||l.collection&&l.collection.remove(l,{temporary:!0}),l}),i=this.components().add(o,Ha({action:ja.t.add},t));return i},r.prototype.components=function(e,t){t===void 0&&(t={});var s=this.get("components");return(0,Ce.isUndefined)(e)?s:(s.reset(void 0,t),e?this.append(e,t):[])},r.prototype.getChildAt=function(e){return this.components().at(e||0)||void 0},r.prototype.getLastChild=function(){var e=this.components();return e.at(e.length-1)||null},r.prototype.empty=function(e){return e===void 0&&(e={}),this.components().reset(void 0,e),this},r.prototype.parent=function(e){e===void 0&&(e={});var t=this.collection||e.prev&&this.prevColl;return t?t.parent:void 0},r.prototype.parents=function(){var e=this.parent();return e?[e].concat(e.parents()):[]},r.prototype.scriptUpdated=function(){this.set("scriptUpdated",1)},r.prototype.initToolbar=function(){var e=this.em,t=this,s=e&&e.getConfig().stylePrefix||"";if(!t.get("toolbar")&&e){var o=[];t.collection&&o.push({label:e.getIcon("arrowUp"),command:function(i){return i.runCommand("core:component-exit",{force:1})}}),t.get("draggable")&&o.push({attributes:{class:"".concat(s,"no-touch-actions"),draggable:!0},label:e.getIcon("move"),command:"tlb-move"}),t.get("copyable")&&o.push({label:e.getIcon("copy"),command:"tlb-clone"}),t.get("removable")&&o.push({label:e.getIcon("delete"),command:"tlb-delete"}),t.set("toolbar",o)}},r.prototype.__loadTraits=function(e,t){t===void 0&&(t={});var s=e||this.traits;if(!(s instanceof fv)){s=(0,Ce.isFunction)(s)?s(this):s;var o=new fv([],this.opt);o.setTarget(this),s.length&&o.add(s),this.set({traits:o},t)}return this},r.prototype.getTraits=function(){return this.__loadTraits(),Vi([],this.traits.models,!0)},r.prototype.setTraits=function(e){var t=(0,Ce.isArray)(e)?e:[e];return this.set({traits:t}),this.getTraits()},r.prototype.getTrait=function(e){return this.getTraits().filter(function(t){return t.get("id")===e||t.get("name")===e})[0]||null},r.prototype.updateTrait=function(e,t){var s,o=this.getTrait(e);return o&&o.set(t),(s=this.em)===null||s===void 0||s.trigger("component:toggled"),this},r.prototype.getTraitIndex=function(e){var t=this.getTrait(e);return t?this.traits.indexOf(t):-1},r.prototype.removeTrait=function(e){var t=this,s,o=(0,Ce.isArray)(e)?e:[e],i=o.map(function(d){return t.getTrait(d)}),l=this.traits,c=i.length?l.remove(i):[];return(s=this.em)===null||s===void 0||s.trigger("component:toggled"),(0,Ce.isArray)(c)?c:[c]},r.prototype.addTrait=function(e,t){var s;t===void 0&&(t={}),this.__loadTraits();var o=this.traits.add(e,t);return(s=this.em)===null||s===void 0||s.trigger("component:toggled"),(0,Ce.isArray)(o)?o:[o]},r.prototype.normalizeClasses=function(e){var t=[],s=this.em,o=s?.Selectors;return o?e.models?Vi([],e.models,!0):(e.forEach(function(i){return t.push(o.add(i))}),t):[]},r.prototype.clone=function(e){var t;e===void 0&&(e={});var s=this.em,o=this.dataResolverWatchers.getProps(this.attributes),i=Ha({},this.opt),l=this.getId(),c=s?.Css;o.components=[],o.classes=[],o.traits=[],op(this)&&(e.symbol=!0),this.get("components").each(function(j,S){o.components[S]=j.clone(Ha(Ha({},e),{_inner:1}))}),this.get("traits").each(function(j,S){o.traits[S]=j.clone()}),this.get("classes").each(function(j,S){o.classes[S]=j.get("name")}),o.status="",i.collection=null,i.forCloning=!0;var d=new this.constructor(o,i),h="#".concat(d.getId()),m=c?c.getRules("#".concat(l)):[];m.forEach(function(j){var S=j.clone();S.set("selectors",[h]),c.getAll().add(S)}),d.set(ri,0);var y=Sl(this),x=_i(this);if(!e.symbol&&(y||x))d.set(Si,0),d.set(ri,0);else if(y){var b=(t=_i(y))!==null&&t!==void 0?t:[];y.set(ri,Vi(Vi([],b,!0),[d],!1)),Sg(d)}else e.symbol&&(Kf(this)?(this.set(ri,Vi(Vi([],x,!0),[d],!1)),d.set(Si,this),Sg(d)):e.symbolInv?(this.set(ri,[d]),d.set(Si,this),[this,d].map(function(j){return Sg(j)})):(d.set(ri,[this]),[this,d].map(function(j){return Sg(j)}),this.set(Si,d)));var v="component:clone";return s&&s.trigger(v,d),this.trigger(v,d),d},r.prototype.getName=function(e){e===void 0&&(e={});var t=this.em,s=this.attributes,o=s.type,i=s.tagName,l=s.name,c=o||i,d=o?"":i,h="domComponents.names.",m=l&&t?.t("".concat(h).concat(l)),y=d&&t?.t("".concat(h).concat(d)),x=t&&(t.t("".concat(h).concat(o))||t.t("".concat(h).concat(i))),b=this.get("custom-name");return(e.noCustom?"":b)||m||l||y||(0,Zt.capitalize)(d)||x||(0,Zt.capitalize)(c)},r.prototype.setName=function(e,t){t===void 0&&(t={}),this.set("custom-name",e,t)},r.prototype.getIcon=function(){var e=this.get("icon");return e?e+" ":""},r.prototype.toHTML=function(e){e===void 0&&(e={});var t=e.tag,s=t||this.get("tagName");delete e.tag;var o=this.__attrToString(e),i=o?" ".concat(o):"",l=this.getInnerHTML(e),c=!l&&this.get("void"),d="<".concat(s).concat(i).concat(c?"/":"",">").concat(l);return!c&&(d+="</".concat(s,">")),d},r.prototype.getInnerHTML=function(e){return this.__innerHTML(e)},r.prototype.__innerHTML=function(e){e===void 0&&(e={});var t=this.components();return t.length?t.map(function(s){return s.toHTML(e)}).join(""):this.content},r.prototype.__attrToString=function(e){e===void 0&&(e={});var t=[],s=e.attributes,o=this.getAttrToHTML(e);if(s&&((0,Ce.isFunction)(s)?o=s(this,o)||{}:(0,Zt.isObject)(s)&&(o=s)),e.withProps){var i=this.toJSON();(0,Ce.forEach)(i,function(m,y){var x=["classes","attributes","components"];y[0]!=="_"&&x.indexOf(y)<0&&(o["data-gjs-".concat(y)]=(0,Ce.isArray)(m)||(0,Zt.isObject)(m)?JSON.stringify(m):(0,Ce.isBoolean)(m)?"".concat(m):m)})}for(var l in o){var c=o[l];if(!(0,Ce.isUndefined)(c)&&c!==null)if((0,Ce.isBoolean)(c))c&&t.push(l);else{var d="";if(e.altQuoteAttr&&(0,Ce.isString)(c)&&c.indexOf('"')>=0)d="'".concat((0,Zt.escapeAltQuoteAttrValue)(c),"'");else{var h=(0,Ce.isString)(c)?(0,Zt.escapeAttrValue)(c):c;d='"'.concat(h,'"')}t.push("".concat(l,"=").concat(d))}}return t.join(" ")},r.prototype.getAttrToHTML=function(e){var t=this.getAttributes();return Ff(this.em)&&e?.keepInlineStyle!==!0&&delete t.style,t},r.prototype.toJSON=function(e){e===void 0&&(e={});var t=a.prototype.toJSON.call(this,e,{attributes:this.getAttributes()});if(delete t.dataResolverWatchers,delete t.attributes.class,delete t.toolbar,delete t.traits,delete t.status,delete t.open,delete t._undoexc,delete t.delegate,this.collectionsStateMap&&Object.getOwnPropertyNames(this.collectionsStateMap).length>0&&(delete t[Si],delete t[Yf],delete t[ri]),!e.fromUndo){var s=t[Si],o=t[ri];o&&(0,Ce.isArray)(o)&&(t[ri]=o.filter(function(i){return i}).map(function(i){return i.getId?i.getId():i})),s&&!(0,Ce.isString)(s)&&(t[Si]=s.getId())}return this.em.getConfig().avoidDefaults&&this.getChangedProps(t),t},r.prototype.getChangedProps=function(e){var t=e||MS.Model.prototype.toJSON.apply(this),s=(0,Ce.result)(this,"defaults");return(0,Ce.forEach)(s,function(o,i){["type"].indexOf(i)===-1&&t[i]===o&&delete t[i]}),(0,Ce.isEmpty)(t.type)&&delete t.type,(0,Ce.forEach)(["attributes","style"],function(o){(0,Ce.isEmpty)(s[o])&&(0,Ce.isEmpty)(t[o])&&delete t[o]}),(0,Ce.forEach)(["classes","components"],function(o){(!t[o]||(0,Ce.isEmpty)(s[o])&&!t[o].length)&&delete t[o]}),t},r.prototype.getId=function(){var e=this.get("attributes")||{},t=Kz(this),s=t.shouldSync,o=t.itemId;return s&&(e.id=o),e.id||this.ccid||this.cid},r.prototype.setId=function(e,t){return this.addAttributes({id:e},t),this},r.prototype.getEl=function(e){var t=this.getView(e);return t&&t.el},r.prototype.getView=function(e){var t=this,s=t.view,o=t.views,i=t.em,l=e||i?.getCurrentFrameModel();return l&&(s=o.filter(function(c){return c.frameView===l.view})[0]),s},r.prototype.getCurrentView=function(){var e=this.em.getCurrentFrame(),t=e?.model;return this.getView(t)},r.prototype.__getScriptProps=function(){var e=this.props(),t=this.get("script-props")||[];return t.reduce(function(s,o){return s[o]=e[o],s},{})},r.prototype.getScriptString=function(e){var t=this,s=e||this.get("script")||"";if(!s)return s;if(this.get("script-props"))s=s.toString().trim();else{if((0,Ce.isFunction)(s)){var o=s.toString().trim();o=o.slice(o.indexOf("{")+1,o.lastIndexOf("}")),s=o.trim()}var i=this.em.getConfig(),l=C5(i.tagVarStart||"{[ "),c=C5(i.tagVarEnd||" ]}"),d=new RegExp("".concat(l,"([\\w\\d-]*)").concat(c),"g");s=s.replace(d,function(h,m){t.scriptUpdated();var y=t.attributes[m]||"";return(0,Ce.isArray)(y)||typeof y=="object"?JSON.stringify(y):y})}return s},r.prototype.emitUpdate=function(e){for(var t,s=[],o=1;o<arguments.length;o++)s[o-1]=arguments[o];var i=this.em,l=V0+(e?":".concat(e):""),c=e&&this.get(e);e&&this.updated.apply(this,Vi([e,c,e&&this.previous(e)],s,!1)),this.trigger.apply(this,Vi([l],s,!1)),i&&i.trigger.apply(i,Vi([l,this],s,!1)),["components","classes"].indexOf(e)>=0&&this.__propSelfToParent({component:this,changed:(t={},t[e]=c,t),options:s[2]||s[1]||{}})},r.prototype.emitWithEditor=function(e,t,s){[this.em,this].forEach(function(o){return o?.trigger(e,t,s)})},r.prototype.onAll=function(e){return(0,Ce.isFunction)(e)&&(e(this),this.components().forEach(function(t){return t.onAll(e)})),this},r.prototype.forEachChild=function(e){(0,Ce.isFunction)(e)&&this.components().forEach(function(t){e(t),t.forEachChild(e)})},r.prototype.remove=function(e){var t=this;e===void 0&&(e={});var s=this.em,o=this.collection,i=function(){o&&o.remove(t,Ha({action:ja.t.remove},e)),o||(t.components("",e),t.components().removeChildren(t,void 0,e))},l=Ha({},e);return[this,s].map(function(c){return c.trigger(ja.I.removeBefore,t,i,l)}),!l.abort&&i(),this},r.prototype.destroy=function(e){return this.stopListening(this.components(),"add remove reset",this.syncOnComponentChange),this.dataResolverWatchers.destroy(),this.__onDestroy(),a.prototype.destroy.call(this,e)},r.prototype.move=function(e,t){if(t===void 0&&(t={}),e){var s=t.at,o=this.index(),i=e===this.parent(),l=o===s||o===s-1;if(!i||!l){i&&s&&s>o&&(t.at=s-1);var c=ja.t.move;this.remove({action:c,temporary:1}),e.append(this,Ha({action:c},t)),this.emitUpdate()}}return this},r.prototype.isInstanceOf=function(e){var t,s,o=(s=(t=this.em)===null||t===void 0?void 0:t.Components.getType(e))===null||s===void 0?void 0:s.model;if(!o)return!1;var i=this.constructor.typeExtends;return this instanceof o||i.has(e)},r.prototype.isChildOf=function(e){for(var t=(0,Ce.isString)(e),s=this.parent();s;){if(t){if(s.isInstanceOf(e))return!0}else if(s===e)return!0;s=s.parent()}return!1},r.prototype.resetId=function(e){var t=this.em,s=this.getId();if(!s)return this;var o=r.createId(this);this.setId(o);var i=t?.Css.getIdRule(s),l=i?.get("selectors").at(0);return l?.set("name",o),this},r.prototype._getStyleRule=function(e){var t=e===void 0?{}:e,s=t.id,o=this.em,i=s||this.getId();return o?.Css.getIdRule(i)},r.prototype._getStyleSelector=function(e){var t=this._getStyleRule(e);return t?.get("selectors").at(0)},r.prototype._moveInlineStyleToRule=function(){var e=this.get("style"),t=(0,Ce.isString)(e)&&e.length>0||(0,Zt.isObject)(e)&&Object.keys(e).length>0;Ff(this.em)&&t&&this.addStyle((0,Zt.isObject)(e)?this.dataResolverWatchers.getValueOrResolver("styles",e):e,{avoidStore:!0,noUndo:!0})},r.prototype._idUpdated=function(e,t,s){if(s===void 0&&(s={}),!s.idUpdate){var o=this.ccid,i=(this.get("attributes")||{}).id,l=(this.previous("attributes")||{}).id||o,c=r.getList(this);if(c[i]||!i&&l)return this.setId(l,{idUpdate:!0});delete c[l],c[i]=this,this.ccid=i;var d=this._getStyleSelector({id:l});d&&d.set({name:i,label:i})}},r.getDefaults=function(){return(0,Ce.result)(this.prototype,"defaults")},r.isComponent=function(e,t){return{tagName:(0,Zt.toLowerCase)(e.tagName)}},r.ensureInList=function(e){var t=r.getList(e),s=e.getId(),o=t[s];if(!o)t[s]=e;else if(o!==e){var i=r.getIncrementId(s,t);e.setId(i),t[i]=e}e.components().forEach(function(l){return r.ensureInList(l)})},r.createId=function(e,t){t===void 0&&(t={});var s=r.getList(e),o=t.idMap,i=o===void 0?{}:o,l=e.get("attributes").id,c;return l?(c=r.getIncrementId(l,s,t),e.setId(c),l!==c&&(i[l]=c)):c=r.getNewId(s),s[c]=e,c},r.getNewId=function(e){for(var t=Object.keys(e).length,s=t.toString().length+2,o=(Math.random()+1.1).toString(36).slice(-s),i="i".concat(o);e[i];)i=r.getNewId(e);return i},r.getIncrementId=function(e,t,s){s===void 0&&(s={});var o=s.keepIds,i=o===void 0?[]:o,l=1,c=e;if(i.indexOf(e)<0)for(;t[c];)l++,c="".concat(e,"-").concat(l);return c},r.getList=function(e){var t,s=e.em,o=s?.Components;return(t=o?.componentsById)!==null&&t!==void 0?t:{}},r.checkId=function(e,t,s,o){t===void 0&&(t=[]),s===void 0&&(s={}),o===void 0&&(o={}),o.updatedIds=o.updatedIds||{};var i=(0,Ce.isArray)(e)?e:[e],l=o.keepIds,c=l===void 0?[]:l,d=o.idMap,h=d===void 0?{}:d,m=o.updatedIds;return i.forEach(function(y){y.attributes;var x=y.attributes,b=x===void 0?{}:x,v=y.components,j=b.id;if(j&&s[j]&&c.indexOf(j)<0){var S=r.getIncrementId(j,s);m[j]=m[j]?Vi(Vi([],m[j],!0),[y],!1):[y],h[j]=S,b.id=S,(0,Ce.isArray)(t)&&t.forEach(function(k){var N=k.selectors;N.forEach(function(P,R){P==="#".concat(j)&&(N[R]="#".concat(S))})})}v&&r.checkId(v,t,s,o)}),{updatedIds:o.updatedIds}},r.typeExtends=new Set,r})(A3);const $s=bU;var wU=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),pv=function(){return pv=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},pv.apply(this,arguments)},Rh="head",jU=["title","style","base","link","meta","script","noscript"],CU=(function(a){wU(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return pv(pv({},a.prototype.defaults),{type:Rh,tagName:Rh,draggable:!1,highlightable:!1,droppable:(function(e){var t=e.tagName;return!t||jU.includes((0,Zt.toLowerCase)(t))})})},enumerable:!1,configurable:!0}),r.isComponent=function(e){return(0,Zt.toLowerCase)(e.tagName)===Rh},r})($s);const SU=CU;var NU=(function(){function a(r,e){r===void 0&&(r=50);var t;this.dragging=!1,this.lastMaxHeight=0,this.zoom=1,this.rectIsInScrollIframe=!1,this.autoscrollLimit=r,this.lastMaxHeight=(t=e?.lastMaxHeight)!==null&&t!==void 0?t:0,this.onScroll=e?.onScroll,this.rectIsInScrollIframe=!!e?.rectIsInScrollIframe,(0,Ce.bindAll)(this,"start","autoscroll","updateClientY","stop")}return a.prototype.start=function(r,e,t){var s=this;this.eventEl=r,this.scrollEl=e,this.lastMaxHeight=t?.lastMaxHeight||Number.POSITIVE_INFINITY,this.zoom=t?.zoom||1,this.ignoredElement=t?.ignoredElement,setTimeout(function(){s.toggleAutoscrollFx(!0),requestAnimationFrame(s.autoscroll)},0)},a.prototype.autoscroll=function(){var r=this,e,t,s=this.scrollEl;if(!(!this.dragging||!s)){if(this.lastClientY===void 0){setTimeout(function(){requestAnimationFrame(r.autoscroll)},50);return}var o=(e=this.lastClientY)!==null&&e!==void 0?e:0,i=this.autoscrollLimit,l=this.getEventElHeight(),c=l-i,d=0;o<i&&(d+=o-i),o>c&&(d+=o-c);var h=this.getElScrollTop(s);d=Math.min(d,this.lastMaxHeight-h),d=Math.max(d,-h),d!==0&&(s.scrollBy({top:d,behavior:"auto"}),(t=this.onScroll)===null||t===void 0||t.call(this)),requestAnimationFrame(this.autoscroll)}},a.prototype.getEventElHeight=function(){var r=this.eventEl;if(!r)return 0;var e=r.getBoundingClientRect();return e.height},a.prototype.updateClientY=function(r){var e=r.target;if(!(this.ignoredElement&&this.ignoredElement.contains(e))){var t=this.scrollEl;r.preventDefault();var s=this.rectIsInScrollIframe?0:this.getElScrollTop(t);this.lastClientY=(0,Ir.G2)(r).clientY*this.zoom-s}},a.prototype.getElScrollTop=function(r){return(r instanceof HTMLElement?r.scrollTop:r?.scrollY)||0},a.prototype.toggleAutoscrollFx=function(r){this.dragging=r;var e=this.eventEl;if(e){var t=r?"on":"off",s={on:Ir.on,off:Ir.AU};s[t](e,"mousemove dragover",this.updateClientY),s[t](e,"mouseup",this.stop)}},a.prototype.stop=function(){this.toggleAutoscrollFx(!1),this.lastClientY=void 0,this.ignoredElement=void 0},a})();const z3=NU;var kU=ha(1447),_U=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),EU=(function(a){_U(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.canMove=function(e,t){var s=this,o=this.getRealIndex(t),i=e._dragSource,l=i.model,c=i.content,d=i.dragDef,h=!l||!this.isSourceSameSymbol(l),m=((0,Ce.isFunction)(c)?d:c)||e.model;return Array.isArray(m)?h&&m.every(function(y,x){return s.canMoveSingleContent(y,o+x)}):h&&this.canMoveSingleContent(m,o)},r.prototype.canMoveSingleContent=function(e,t){return this.model.em.Components.canMove(this.model,e,t).result},r.prototype.addChildAt=function(e,t){var s=e._dragSource,o=s.content,i=this.isTextNode()&&e.isTextable(),l=(0,Ce.isFunction)(o)?o():o;return Array.isArray(l)?this.addMultipleChildren(l,t,i):this.addSingleChild(l,t,i)},r.prototype.addSingleChild=function(e,t,s){var o,i,l,c,d;return s?d=(c=(l=(i=(o=this.model)===null||o===void 0?void 0:o.getView)===null||i===void 0?void 0:i.call(o))===null||l===void 0?void 0:l.insertComponent)===null||c===void 0?void 0:c.call(l,e,{action:"add-component"}):d=this.model.components().add(e,{at:this.getRealIndex(t),action:"add-component"}),new this.constructor(d)},r.prototype.addMultipleChildren=function(e,t,s){var o=this,i;return e.forEach(function(l,c){i=o.addSingleChild(l,t+c,s)}),i},r.prototype.isSourceSameSymbol=function(e){if(ac(this.model)){var t=vy(this.model),s=Kf(t)?t:Sl(t);if(s===e)return!0}return!1},Object.defineProperty(r.prototype,"content",{set:function(e){this._dragSource.content=e},enumerable:!1,configurable:!0}),r})(kU.A);const U3=EU;var ip=ha(8433),sC=function(){return sC=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},sC.apply(this,arguments)},TU=(function(){function a(r,e){var t=this;this.em=r,this.canvas=r.Canvas;var s=e||this.canvas.getFrames().map(function(i){return i.getComponent().getEl()}),o=Array.isArray(s)?s:[s];this.el=o[0],this.counter=0,(0,Ce.bindAll)(this,"handleDragEnter","handleDragOver","handleDrop","handleDragLeave","handleDragEnd"),o.forEach(function(i){return t.toggleEffects(i,!0)})}return a.prototype.toggleEffects=function(r,e){var t={on:Ir.on,off:Ir.AU},s=e?"on":"off";t[s](r,"dragenter",this.handleDragEnter),t[s](r,"dragover",this.handleDragOver),t[s](r,"drop",this.handleDrop),t[s](r,"dragleave",this.handleDragLeave)},a.prototype.__customTglEff=function(r){var e,t=r?Ir.on:Ir.AU,s=this.el.ownerDocument,o=(e=s.defaultView)===null||e===void 0?void 0:e.frameElement,i=function(l){return{legacyOnStartSort:function(){(0,Ir.on)(o,"pointermove",l.onMove)},legacyOnEnd:function(){(0,Ir.AU)(o,"pointermove",l.onMove)},customTarget:function(c){var d=c.event;return s.elementFromPoint(d.clientX,d.clientY)}}};this.getSorterOptions=r?i:void 0,t(o,"pointerenter",this.handleDragEnter),t(o,"pointermove",this.handleDragOver),t(document,"pointerup",this.handleDrop),t(o,"pointerout",this.handleDragLeave)},a.prototype.startCustom=function(){this.__customTglEff(!0)},a.prototype.endCustom=function(r){this.over?this.endDrop(r):this.__customTglEff(!1)},a.prototype.endDrop=function(r,e){var t=this,s=t.em,o=t.dragStop;this.counter=0,o&&o(r||!this.over),this.__customTglEff(!1),s.trigger("canvas:dragend",e)},a.prototype.handleDragLeave=function(r){this.updateCounter(-1,r)},a.prototype.updateCounter=function(r,e){this.counter+=r,this.counter===0&&this.endDrop(!0,e)},a.prototype.handleDragEnter=function(r){var e=this,t,s,o=this,i=o.em,l=o.canvas,c=r.dataTransfer,d=i.get("dragSource");if(!(!d?.content&&!l.getConfig().allowExternalDrop)&&(this.updateCounter(1,r),!this.over)){this.over=!0;var h=i.Utils,m=d?.content||"<br>",y;if(i.stopDefault(),i.inAbsoluteMode()){var x=i.Components.getWrapper(),b=x.append({})[0],v=i.Commands.run("core:component-drag",{event:r,guidesInfo:1,center:1,target:b,onEnd:function(F,z,H){var V=H.cancelled,W;if(!V&&m){W=x.append(m)[0];var Z=l.getOffset(),A=b.getStyle(),q=A.top,I=A.left,K=A.position,D=(0,Ir.Xy)(F.target),Q=parseInt("".concat(parseFloat(I)+D.x-Z.left),10),oe=parseInt("".concat(parseFloat(q)+D.y-Z.top),10);W.addStyle({left:Q+"px",top:oe+"px",position:K})}e.handleDragEnd(W,c),b.remove()}});y=function(F){return v.stop(r,{cancel:F})},this.setAbsoluteDragContent=function(F){return m=F}}else{var j=new h.ComponentSorter({em:i,treeClass:U3,containerContext:{container:this.el,containerSel:"*",itemSel:"*",pfx:"gjs-",placeholderElement:l.getPlacerEl(),document:this.el.ownerDocument},dragBehavior:{dragDirection:ip.A.BothDirections,nested:!0},positionOptions:{windowMargin:1,canvasRelative:!0},eventHandlers:{legacyOnEndMove:this.handleDragEnd}}),S=(t=this.getSorterOptions)===null||t===void 0?void 0:t.call(this,j);S&&(j.eventHandlers.legacyOnStartSort=S.legacyOnStart,j.eventHandlers.legacyOnEnd=S.legacyOnEnd,j.containerContext.customTarget=S.customTarget);var k=i.Components.getShallowWrapper(),N=k?.append(m,{temporary:!0})[0],P=N?.getEl(),R=[{element:P,dragSource:sC({model:N},d)}];j.startSort(R),this.sorter=j,this.draggedNode=(s=j.sourceNodes)===null||s===void 0?void 0:s[0],y=function(F){F?j.cancelDrag():j.endDrag()}}this.dragStop=y,i.trigger("canvas:dragenter",c,m)}},a.prototype.handleDragEnd=function(r,e){var t=this.em;this.over=!1,r&&(t.set("dragResult",r),t.trigger("canvas:drop",e,r)),t.runDefault({preserveSelected:1})},a.prototype.handleDragOver=function(r){r.preventDefault(),this.em.trigger("canvas:dragover",r)},a.prototype.handleDrop=function(r){var e;r.preventDefault();var t=r.dataTransfer,s=this.getContentByData(t).content||"";this.draggedNode&&(this.draggedNode.content=s),(e=this.setAbsoluteDragContent)===null||e===void 0||e.call(this,s),this.endDrop(!s,r)},a.prototype.getContentByData=function(r){var e=this.em,t=r?.types||[],s=r?.files||[],o=e.get("dragSource"),i=r?.getData("text")||"";if(s.length){i=[];for(var l=0;l<s.length;l++){var c=s[l],d=c.type.split("/")[0];d=="image"&&i.push({type:d,file:c,attributes:{alt:c.name}})}}else if(o?.content)i=o.content;else if((0,Ce.indexOf)(t,"text/html")>=0)i=r&&r.getData("text/html").replace(/<\/?meta[^>]*>/g,"");else if((0,Ce.indexOf)(t,"text/uri-list")>=0)i={type:"link",attributes:{href:i},content:i};else if((0,Ce.indexOf)(t,"text/json")>=0){var h=r&&r.getData("text/json");h&&(i=JSON.parse(h))}else t.length===1&&t[0]==="text/plain"&&(i="<div>".concat(i,"</div>"));var m={content:i,setContent:function(y){m.content=y}};return e.trigger("canvas:dragdata",r,m),m},a})();const OU=TU;var PU=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),pl=function(){return pl=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},pl.apply(this,arguments)},AU=function(a,r,e){if(e||arguments.length===2)for(var t=0,s=r.length,o;t<s;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return a.concat(o||Array.prototype.slice.call(r))},MU=(function(a){PU(r,a);function r(e,t){var s=a.call(this,{model:e})||this;s.dragging=!1,s.loaded=!1,s.lastMaxHeight=0,s.tools={},(0,Ce.bindAll)(s,"startAutoscroll","stopAutoscroll","_emitUpdate");var o=s.el;s.module._config=pl(pl({},s.config||{}),{frameView:s}),s.frameWrapView=t,s.showGlobalTools=(0,Ce.debounce)(s.showGlobalTools.bind(s),50);var i=s.getCanvasModel();return s.listenTo(e,"change:head",s.updateHead),s.listenTo(i,"change:styles",s.renderStyles),e.view=s,(0,Zt.setViewEl)(o,s),s.autoScroller=new z3(s.config.autoscrollLimit,{rectIsInScrollIframe:!0,onScroll:function(){var l=s.getGlobalToolsEl();l.style.opacity="0",s.showGlobalTools(),s.em.Canvas.spots.refreshDbn()}}),s}return Object.defineProperty(r.prototype,"tagName",{get:function(){return"iframe"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"attributes",{get:function(){return{allowfullscreen:"allowfullscreen"}},enumerable:!1,configurable:!0}),r.prototype.getBoxRect=function(){var e=this,t=e.el,s=e.module,o=s.getCanvasView(),i=s.getCoords(),l=t.getBoundingClientRect(),c=o.getCanvasOffset(),d=o.getViewportDelta(),h=s.getZoomMultiplier(),m=(l.x-c.left-d.x-i.x)*h,y=(l.y-c.top-d.y-i.y)*h,x=l.width*h,b=l.height*h;return{x:m,y,width:x,height:b}},r.prototype.updateHead=function(){var e=this.model,t=this.getHead(),s=[],o=[],i=e.head,l=e.previous("head"),c=function(h){return h===void 0&&(h={}),Object.keys(h).sort().map(function(m){return"[".concat(m,'="').concat(h[m],'"]')}).join("")},d=function(h,m,y){h.forEach(function(x){var b=x.tag,v=x.attributes,j=m.some(function(S){return S.tag===b&&c(S.attributes)===c(v)});!j&&y.push(x)})};d(i,l,o),d(l,i,s),s.forEach(function(h){var m,y=t.querySelector("".concat(h.tag).concat(c(h.attributes)));(m=y?.parentNode)===null||m===void 0||m.removeChild(y)}),(0,Ir.af)(t,o)},r.prototype.getEl=function(){return this.el},r.prototype.getCanvasModel=function(){var e;return(e=this===null||this===void 0?void 0:this.em.Canvas)===null||e===void 0?void 0:e.getModel()},r.prototype.getWindow=function(){return this.getEl().contentWindow},r.prototype.getDoc=function(){return this.getEl().contentDocument},r.prototype.getHead=function(){return this.getDoc().querySelector("head")},r.prototype.getBody=function(){return this.getDoc().querySelector("body")},r.prototype.getWrapper=function(){return this.getBody().querySelector("[data-gjs-type=wrapper]")},r.prototype.getJsContainer=function(){return this.jsContainer||(this.jsContainer=(0,Ir.a_)("div",{class:"".concat(this.ppfx,"js-cont")})),this.jsContainer},r.prototype.getToolsEl=function(){var e;return(e=this.frameWrapView)===null||e===void 0?void 0:e.elTools},r.prototype.getGlobalToolsEl=function(){return this.em.Canvas.getGlobalToolsEl()},r.prototype.getHighlighter=function(){return this._getTool("[data-hl]")},r.prototype.getBadgeEl=function(){return this._getTool("[data-badge]")},r.prototype.getOffsetViewerEl=function(){return this._getTool("[data-offset]")},r.prototype.getRect=function(){return this.rect||(this.rect=this.el.getBoundingClientRect()),this.rect},r.prototype.getOffsetRect=function(){var e=this.el,t=this.getBody(),s=t.scrollTop,o=t.scrollLeft,i=e.offsetHeight,l=e.offsetWidth;return{top:e.offsetTop,left:e.offsetLeft,height:i,width:l,scrollTop:s,scrollLeft:o,scrollBottom:s+i,scrollRight:o+l}},r.prototype._getTool=function(e){var t=this.tools,s=this.getToolsEl();return t[e]||(t[e]=s.querySelector(e)),t[e]},r.prototype.remove=function(){for(var e,t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];return this._toggleEffects(!1),this.tools={},(e=this.wrapper)===null||e===void 0||e.remove(),kl.prototype.remove.apply(this,t),this},r.prototype.startAutoscroll=function(){this.autoScroller.start(this.el,this.getWindow(),{lastMaxHeight:this.getWrapper().offsetHeight-this.el.offsetHeight,zoom:this.em.getZoomDecimal(),ignoredElement:this.em.Canvas.getSpotsEl()})},r.prototype.stopAutoscroll=function(){this.autoScroller.stop()},r.prototype.showGlobalTools=function(){this.getGlobalToolsEl().style.opacity=""},r.prototype.render=function(){var e=this,t=e.$el,s=e.ppfx,o=e.em;return t.attr({class:"".concat(s,"frame")}),this.renderScripts(),o.trigger("frame:render",this),this},r.prototype.renderScripts=function(){var e=this,t=this,s=t.el,o=t.model,i=t.em,l="frame:load",c={el:s,model:o,view:this},d=this.getCanvasModel(),h=function(m){var y;if(m.length>0){var x=m.shift(),b=(0,Ir.a_)("script",pl({type:"text/javascript"},(0,Ce.isString)(x)?{src:x}:x));(y=s.contentDocument)===null||y===void 0||y.head.appendChild(b),b.hasAttribute("nomodule")&&"noModule"in HTMLScriptElement.prototype?h(m):b.onerror=b.onload=h.bind(null,m)}else i?.trigger(Xg.frameLoadHead,c),e.renderBody(),i?.trigger(Xg.frameLoadBody,c),i?.trigger(l,c)};s.onload=function(){var m=e.config.frameContent;if(m){var y=e.getDoc();y.open(),y.write(m),y.close()}c.window=e.getWindow(),i?.trigger("".concat(l,":before"),c),i?.trigger(Xg.frameLoad,c),e.renderHead(),h(AU([],d.get("scripts"),!0))}},r.prototype.renderStyles=function(e){e===void 0&&(e={});var t=this.getHead(),s=this.getCanvasModel(),o=function(m){return m===void 0&&(m=[]),m.map(function(y){return{tag:"link",attributes:pl({rel:"stylesheet"},(0,Ce.isString)(y)?{href:y}:y)}})},i=o(e.prev||s.previous("styles")),l=o(s?.get("styles")),c=[],d=[],h=function(m,y,x){m.forEach(function(b){var v=b.attributes.href,j=y.some(function(S){return S.attributes.href===v});!j&&x.push(b)})};h(l,i,d),h(i,l,c),c.forEach(function(m){var y,x=t.querySelector('link[href="'.concat(m.attributes.href,'"]'));(y=x?.parentNode)===null||y===void 0||y.removeChild(x)}),(0,Ir.af)(t,d)},r.prototype.renderHead=function(){var e,t=this,s=t.model,o=t.em,i=s.root,l=(e=o?.Components)===null||e===void 0?void 0:e.getType(Rh).view;l&&(this.headView=new l({el:this.getHead(),model:i.head,config:pl(pl({},i.config),{frameView:this})}).render())},r.prototype.renderBody=function(){var e=this,t,s=this,o=s.config,i=s.em,l=s.model,c=s.ppfx,d=this.getBody(),h=this.getWindow(),m=l.hasAutoHeight(),y=i.config;h._isEditor=!0,this.renderStyles({prev:[]});var x="#ffca6f";(0,Ir.BC)(d,`<style>
      `.concat(y.baseCss||o.frameStyle||"",`

      `).concat(m?"body { overflow: hidden }":"",`

      [data-gjs-type="wrapper"] {
        `).concat(m?"":"min-height: 100vh;",`
        padding-top: 0.001em;
      }

      .`).concat(c,`dashed *[data-gjs-highlightable] {
        outline: 1px dashed rgba(170,170,170,0.7);
        outline-offset: -2px;
      }

      .`).concat(c,`selected {
        outline: 2px solid #3b97e3 !important;
        outline-offset: -2px;
      }

      .`).concat(c,`selected-parent {
        outline: 2px solid `).concat(x,` !important
      }

      .`).concat(c,`no-select {
        user-select: none;
        -webkit-user-select:none;
        -moz-user-select: none;
      }

      .`).concat(c,`freezed {
        opacity: 0.5;
        pointer-events: none;
      }

      .`).concat(c,`no-pointer {
        pointer-events: none;
      }

      .`).concat(c,`pointer-init {
        pointer-events: initial;
      }

      .`).concat(c,`plh-image {
        background: #f5f5f5;
        border: none;
        height: 100px;
        width: 100px;
        display: block;
        outline: 3px solid #ffca6f;
        cursor: pointer;
        outline-offset: -2px
      }

      .`).concat(c,`grabbing {
        cursor: grabbing;
        cursor: -webkit-grabbing;
      }

      .`).concat(c,`is__grabbing {
        overflow-x: hidden;
      }

      .`).concat(c,`is__grabbing,
      .`).concat(c,`is__grabbing * {
        cursor: grabbing !important;
      }

      `).concat(y.canvasCss||"",`
      `).concat(y.protectedCss||"",`
    </style>`));var b=l.root,v=(((t=i?.Components)===null||t===void 0?void 0:t.getType("wrapper"))||{}).view;v&&((0,Ce.isFunction)(o.customRenderer)?o.customRenderer({editor:i.Editor,frame:l,window:h,frameView:this,onMount:function(j){e.wrapper=j,e._onRootMount(j)}}):(this.wrapper=new v({model:b,config:pl(pl({},b.config),{em:i,frameView:this})}).render(),this._onRootMount(this.wrapper)))},r.prototype._onRootMount=function(e){var t=this,s,o=this,i=o.config,l=o.em,c=o.model,d=this.getDoc(),h=d.body;(0,Ir.BC)(h,e.el),(0,Ir.BC)(h,new J1({collection:c.getStyles(),config:pl(pl({},l.Css.getConfig()),{frameView:this})}).render().el),(0,Ir.BC)(h,this.getJsContainer()),(0,Ir.on)(h,"click",function(m){var y;return m&&((y=m.target)===null||y===void 0?void 0:y.tagName)=="A"&&m.preventDefault()}),(0,Ir.on)(h,"submit",function(m){return m&&m.preventDefault()}),[{event:"keydown keyup keypress",class:"KeyboardEvent"},{event:"mousedown mousemove mouseup",class:"MouseEvent"},{event:"pointerdown pointermove pointerup",class:"PointerEvent"},{event:"wheel",class:"WheelEvent",opts:{passive:!i.infiniteCanvas}}].forEach(function(m){return m.event.split(" ").forEach(function(y){d.addEventListener(y,function(x){return t.el.dispatchEvent((0,Ir.yL)(x,m.class))},m.opts)})}),this._toggleEffects(!0),(0,Zt.hasDnd)(l)&&(this.droppable=new OU(l,(s=this.wrapper)===null||s===void 0?void 0:s.el)),this.loaded=!0,c.trigger("loaded")},r.prototype._toggleEffects=function(e){var t=e?Ir.on:Ir.AU,s=this.getWindow();s&&t(s,"".concat(Ir.D8," resize"),this._emitUpdate)},r.prototype._emitUpdate=function(){this.model._emitUpdated()},r})(kl);const IU=MU;var $3=ha(9966),RU=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),gh=function(){return gh=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},gh.apply(this,arguments)},LU=(function(a){RU(r,a);function r(e,t){var s=a.call(this,{model:e})||this;return(0,Ce.bindAll)(s,"onScroll","frameLoaded","updateOffset","remove","startDrag"),gh(gh({},e.config),{frameWrapView:s}),s.cv=t,s.frame=new IU(e,s),s.classAnim="".concat(s.ppfx,"frame-wrapper--anim"),s.updateOffset=(0,Ce.debounce)(s.updateOffset.bind(s),0),s.updateSize=(0,Ce.debounce)(s.updateSize.bind(s),0),s.listenTo(e,"loaded",s.frameLoaded),s.listenTo(e,"change:x change:y",s.updatePos),s.listenTo(e,"change:width change:height",s.updateSize),s.listenTo(e,"destroy remove",s.remove),s.updatePos(),s.setupDragger(),s}return r.prototype.events=function(){return{"click [data-action-remove]":"remove","mousedown [data-action-move]":"startDrag"}},r.prototype.setupDragger=function(){var e=this,t=this,s=t.module,o=t.model,i,l,c,d=function(h){s.toggleFramesEvents(h)};this.dragger=new $3.A({onStart:function(){var h=o.attributes,m=h.x,y=h.y;c=e.em.getZoomMultiplier(),i=m,l=y,d(!1)},onEnd:function(){return d(!0)},setPosition:function(h){o.set({x:i+h.x*c,y:l+h.y*c})}})},r.prototype.startDrag=function(e){var t;e&&((t=this.dragger)===null||t===void 0||t.start(e))},r.prototype.__clear=function(e){var t=this.frame;t&&t.remove(e),(0,Ir.YZ)(this.elTools)},r.prototype.remove=function(e){var t=this,s;return(s=this.sizeObserver)===null||s===void 0||s.disconnect(),this.__clear(e),kl.prototype.remove.apply(this,e),["frame","dragger","cv","elTools"].forEach(function(o){return t[o]=0}),this},r.prototype.updateOffset=function(){var e,t=this,s=t.em,o=t.$el,i=t.frame;!s||s.destroyed||(s.runDefault({preserveSelected:1}),o.removeClass(this.classAnim),(e=i?.model)===null||e===void 0||e._emitUpdated())},r.prototype.updatePos=function(e){var t=this,s=t.model,o=t.el,i=s.attributes,l=i.x,c=i.y,d=o.style;this.frame.rect=void 0,d.left=isNaN(l)?l:"".concat(l,"px"),d.top=isNaN(c)?c:"".concat(c,"px"),e&&this.updateOffset()},r.prototype.updateSize=function(){this.updateDim()},r.prototype.updateDim=function(){var e=this,t=e.em,s=e.el,o=e.$el,i=e.model,l=e.classAnim,c=e.frame;if(c){c.rect=void 0,o.addClass(l);var d=this.__handleSize(),h=d.noChanges,m=d.width,y=d.height;((0,Ce.isNull)(m)||(0,Ce.isNull)(y))&&i.set(gh(gh({},m?{}:{width:s.offsetWidth}),y?{}:{height:s.offsetHeight}),{silent:1}),t.stopDefault({preserveSelected:1}),h?this.updateOffset():setTimeout(this.updateOffset,350)}},r.prototype.onScroll=function(){var e=this,t=e.frame,s=e.em;s.trigger("frame:scroll",{frame:t,body:t.getBody(),target:t.getWindow()})},r.prototype.frameLoaded=function(){var e=this,t=e.frame;e.config,t.getWindow().onscroll=this.onScroll,this.updateDim()},r.prototype.__handleSize=function(){var e,t="px",s=this,o=s.model,i=s.el,l=i.style,c=o.attributes,d=c.width,h=c.height,m=l.width||"",y=l.height||"",x=d||"",b=h||"",v=m==x&&y==b,j=(0,Ce.isNumber)(x)?"".concat(x).concat(t):x,S=(0,Ce.isNumber)(b)?"".concat(b).concat(t):b;if(l.width=j,(e=this.sizeObserver)===null||e===void 0||e.disconnect(),o.hasAutoHeight()){var k=this.frame.el,N=k.contentDocument;if(N){var P=new ResizeObserver(function(){requestAnimationFrame(function(){var R=parseFloat(o.get("minHeight"))||0,F=Math.max(N.body.scrollHeight,R);l.height="".concat(F,"px")})});P.observe(N.body),this.sizeObserver=P}}else l.height=S,delete this.sizeObserver;return{noChanges:v,width:d,height:h,newW:x,newH:b}},r.prototype.render=function(){var e=this,t=e.frame,s=e.$el,o=e.ppfx,i=e.cv,l=e.model,c=e.el,d=l.attributes.onRender;this.__clear(),this.__handleSize(),t.render(),s.empty().attr({class:"".concat(o,"frame-wrapper")}).append(`
      <div class="`.concat(o,`frame-wrapper__top gjs-two-color" data-frame-top>
        <div class="`).concat(o,`frame-wrapper__name" data-action-move>
          `).concat(l.get("name")||"",`
        </div>
        <div class="`).concat(o,`frame-wrapper__top-r">
          <div class="`).concat(o,`frame-wrapper__icon" data-action-remove style="display: none">
            <svg viewBox="0 0 24 24"><path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12z"></path></svg>
          </div>
        </div>
      </div>
      <div class="`).concat(o,`frame-wrapper__right" data-frame-right></div>
      <div class="`).concat(o,`frame-wrapper__left" data-frame-left></div>
      <div class="`).concat(o,`frame-wrapper__bottom" data-frame-bottom></div>
      `)).append(t.el);var h=(0,Ir.a_)("div",{class:"".concat(o,"tools"),style:"pointer-events:none; display: none"},`
      <div class="`.concat(o,`highlighter" data-hl></div>
      <div class="`).concat(o,`badge" data-badge></div>
      <div class="`).concat(o,`placeholder">
        <div class="`).concat(o,`placeholder-int"></div>
      </div>
      <div class="`).concat(o,`ghost"></div>
      <div class="`).concat(o,`toolbar" style="pointer-events:all"></div>
      <div class="`).concat(o,`resizer"></div>
      <div class="`).concat(o,`offset-v" data-offset>
        <div class="gjs-marginName" data-offset-m>
          <div class="gjs-margin-v-el gjs-margin-v-top" data-offset-m-t></div>
          <div class="gjs-margin-v-el gjs-margin-v-bottom" data-offset-m-b></div>
          <div class="gjs-margin-v-el gjs-margin-v-left" data-offset-m-l></div>
          <div class="gjs-margin-v-el gjs-margin-v-right" data-offset-m-r></div>
        </div>
        <div class="gjs-paddingName" data-offset-m>
          <div class="gjs-padding-v-el gjs-padding-v-top" data-offset-p-t></div>
          <div class="gjs-padding-v-el gjs-padding-v-bottom" data-offset-p-b></div>
          <div class="gjs-padding-v-el gjs-padding-v-left" data-offset-p-l></div>
          <div class="gjs-padding-v-el gjs-padding-v-right" data-offset-p-r></div>
        </div>
      </div>
      <div class="`).concat(o,`offset-fixed-v"></div>
    `));this.elTools=h;var m=i?.toolsWrapper;return m&&m.appendChild(h),d&&d({el:c,elTop:c.querySelector("[data-frame-top]"),elRight:c.querySelector("[data-frame-right]"),elBottom:c.querySelector("[data-frame-bottom]"),elLeft:c.querySelector("[data-frame-left]"),frame:l,frameWrapperView:this,remove:this.remove,startDrag:this.startDrag}),this},r})(kl);const DU=LU;var FU=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),BU=(function(a){FU(r,a);function r(e,t){e===void 0&&(e={});var s=a.call(this,e,!0)||this;return s.listenTo(s.collection,"reset",s.render),s.canvasView=t.canvasView,s._module=t.module,s}return r.prototype.onRemoveBefore=function(e,t){t===void 0&&(t={}),e.forEach(function(s){return s.remove(t)})},r.prototype.onRender=function(){var e=this,t=e.$el,s=e.ppfx;t.attr({class:"".concat(s,"frames")})},r.prototype.clearItems=function(){var e=this.viewCollection||[];e.forEach(function(t){return t.remove()}),this.viewCollection=[]},r.prototype.renderView=function(e,t){return new DU(e,this.canvasView)},r})(mz);const zU=BU;var UU=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),hv=function(){return hv=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},hv.apply(this,arguments)},$U=(function(a){UU(r,a);function r(e){var t=a.call(this,{model:e})||this;t.ready=!1,(0,Ce.bindAll)(t,"clearOff","onKeyPress","onWheel","onPointer");var s=t,o=s.em,i=s.pfx,l=s.ppfx,c=t.module.events;return t.className="".concat(i,"canvas ").concat(l,"no-touch-actions").concat(o.config.customUI?"":" ".concat(i,"canvas-bg")),t.clsUnscale="".concat(i,"unscale"),t._initFrames(),t.listenTo(o,c.refresh,t.clearOff),t.listenTo(o,"component:selected",t.checkSelected),t.listenTo(o,"".concat(c.coords," ").concat(c.zoom),t.updateFrames),t.listenTo(e,"change:frames",t._onFramesUpdate),t.toggleListeners(!0),t}return r.prototype.template=function(){var e=this.pfx;return`
      <div class="`.concat(e,`canvas__frames" data-frames>
        <div class="`).concat(e,`canvas__spots" data-spots></div>
      </div>
      <div id="`).concat(e,'tools" class="').concat(e,`canvas__tools" data-tools></div>
      <style data-canvas-style></style>
    `)},r.prototype._onFramesUpdate=function(){this._initFrames(),this._renderFrames()},r.prototype._initFrames=function(){var e=this,t=e.frames,s=e.model,o=e.config,i=e.em,l=s.frames;i.set("readyCanvas",0),l.once("loaded:all",function(){return i.set("readyCanvas",1)}),t?.remove(),this.frames=new zU({collection:l},hv(hv({},o),{canvasView:this}))},r.prototype.checkSelected=function(e,t){var s;t===void 0&&(t={});var o=t.scroll,i=this.em.getCurrentFrame();o&&((s=e.views)===null||s===void 0||s.forEach(function(l){l.frameView===i&&l.scrollIntoView(o)}))},r.prototype.remove=function(){for(var e,t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];return clearTimeout(this.timerZoom),(e=this.frames)===null||e===void 0||e.remove(),this.frames=void 0,kl.prototype.remove.apply(this,t),this.toggleListeners(!1),this},r.prototype.preventDefault=function(e){var t;e&&(e.preventDefault(),(t=e._parentEvent)===null||t===void 0||t.preventDefault())},r.prototype.toggleListeners=function(e){var t=this,s=t.el,o=t.config,i=e?Ir.on:Ir.AU;i(document,"keypress",this.onKeyPress),i(window,"scroll resize",this.clearOff),i(s,"wheel",this.onWheel,{passive:!o.infiniteCanvas}),i(s,"pointermove",this.onPointer)},r.prototype.screenToWorld=function(e,t){var s=this.module,o=s.getCoords(),i=s.getZoomMultiplier(),l=this.getViewportDelta();return{x:(e-o.x-l.x)*i,y:(t-o.y-l.y)*i}},r.prototype.onPointer=function(e){if(this.config.infiniteCanvas){var t=this.getCanvasOffset(),s=(0,Ir.Xy)(),o={x:e.clientX-t.left+s.x,y:e.clientY-t.top+s.y};if(e._parentEvent){var i=e.target.getBoundingClientRect(),l=this.module.getZoomDecimal();o.x=i.left-t.left+s.x+e.clientX*l,o.y=i.top-t.top+s.y+e.clientY*l}this.model.set({pointerScreen:o,pointer:this.screenToWorld(o.x,o.y)})}},r.prototype.onKeyPress=function(e){var t=this.em,s=(0,Ir.Ch)(e);s===" "&&t.getZoomDecimal()!==1&&!t.Canvas.isInputFocused()&&(this.preventDefault(e),t.Editor.runCommand("core:canvas-move"))},r.prototype.onWheel=function(e){var t=this,s=t.module,o=t.config;if(o.infiniteCanvas){this.preventDefault(e);var i=e.deltaX,l=e.deltaY,c=s.getZoomDecimal(),d=(0,Ir.rp)(e),h=s.getCoords();if(d){var m=c-l*c*.01;s.setZoom(m*100);var y=this.model.getPointerCoords(Sr.x2.Screen),x=this.getCanvasOffset(),b=y.x-x.width/2,v=y.y-x.height/2,j=m/c,S=b-(b-h.x)*j,k=v-(v-h.y)*j;s.setCoords(S,k)}else this.onPointer(e),s.setCoords(h.x-i,h.y-l)}},r.prototype.updateFrames=function(e){var t=this.em,s=this.toolsWrapper,o={preserveSelected:1};this.updateFramesArea(),this.clearOff(),s.style.display="none",t.trigger("canvas:update",e),clearTimeout(this.timerZoom),this.timerZoom=setTimeout(function(){t.stopDefault(o),t.runDefault(o),s.style.display=""},300)},r.prototype.updateFramesArea=function(){var e=this,t=e.framesArea,s=e.model,o=e.module,i=e.cvStyle,l=e.clsUnscale,c=o.getZoomMultiplier();if(t){var d=s.attributes,h=d.x,m=d.y,y=o.getZoomDecimal();t.style.transform="scale(".concat(y,") translate(").concat(h*c,"px, ").concat(m*c,"px)")}i&&(i.innerHTML=`
        .`.concat(l," { scale: ").concat(c,` }
      `))},r.prototype.fitViewport=function(e){var t,s,o;e===void 0&&(e={});var i=this,l=i.em,c=i.module,d=i.model;this.clearOff();var h=this.getCanvasOffset(),m=e.el,y=m&&((t=(0,Zt.getComponentView)(m))===null||t===void 0?void 0:t.frameView),x=y?y.model:e.frame||l.getCurrentFrameModel()||d.frames.at(0),b=x.attributes,v=b.x,j=b.y,S={x:v??0,y:j??0,width:x.width,height:x.height};if(m){var k=this.getElBoxRect(m);S.x=S.x+k.x,S.y=S.y+k.y,S.width=k.width,S.height=k.height}var N=e.ignoreHeight,P=(s=e.gap)!==null&&s!==void 0?s:0,R=(0,Ce.isNumber)(P),F=R?P:P.x,z=R?P:P.y,H=S.width+F*2,V=S.height+z*2,W=h.width,Z=h.height,A=W/H,q=Z/V,I=N?A:Math.min(A,q),K=I*100,D=(o=(0,Ce.isFunction)(e.zoom)?e.zoom(K):e.zoom)!==null&&o!==void 0?o:K;c.setZoom(D,{from:"fitViewport"});var Q=-S.x+(x.width>=W?W/2-H/2:-F),oe=-S.y+Z/2-V/2,re=c.getZoomDecimal(),Te={x:(Q+F)*re,y:(oe+z)*re};if(N){var G=c.getZoomMultiplier(),Y=Z*G,Se=Y-Z,fe=Se/2;Te.y=(-S.y+z)*re-fe/G}c.setCoords(Te.x,Te.y)},r.prototype.isElInViewport=function(e){var t=(0,Zt.getElement)(e),s=(0,Ir.C8)(t),o=this.getFrameOffset(t),i=s.top,l=s.left;return i>=0&&l>=0&&i<=o.height&&l<=o.width},r.prototype.offset=function(e,t){t===void 0&&(t={});var s=t.noScroll,o=(0,Ir.C8)(e),i=s?{x:0,y:0}:(0,Ir.Xy)(e);return{top:o.top+i.y,left:o.left+i.x,width:o.width,height:o.height}},r.prototype.getRectToScreen=function(e){var t,s,o,i,l=this.getCanvasScroll(),c=this.module.getZoomDecimal(),d=this.module.getCoords(),h=this.getViewportDelta(),m=((t=e.x)!==null&&t!==void 0?t:0)*c-l.scrollLeft+d.x+h.x||0,y=((s=e.y)!==null&&s!==void 0?s:0)*c-l.scrollTop+d.y+h.y||0;return{x:m,y,width:((o=e.width)!==null&&o!==void 0?o:0)*c,height:((i=e.height)!==null&&i!==void 0?i:0)*c}},r.prototype.getElBoxRect=function(e,t){var s,o,i;t===void 0&&(t={});var l=this.module,c=(0,Ir.C8)(e),d=c.width,h=c.height,m=c.left,y=c.top,x=(s=(0,Zt.getComponentView)(e))===null||s===void 0?void 0:s.frameView,b=x?.getBoxRect(),v=l.getZoomMultiplier(),j=(o=b?.x)!==null&&o!==void 0?o:0,S=(i=b?.y)!==null&&i!==void 0?i:0,k=this.el,N=(0,Ir.Xy)(),P=m+j+(k.scrollLeft+N.x)*v,R=y+S+(k.scrollTop+N.y)*v,F={x:P,y:R,width:d,height:h};return t.local&&(F.x=m,F.y=y),t.toScreen?this.getRectToScreen(F):F},r.prototype.getViewportRect=function(e){e===void 0&&(e={});var t=this.getCanvasOffset(),s=t.top,o=t.left,i=t.width,l=t.height,c=this.module;if(e.toWorld){var d=c.getZoomMultiplier(),h=c.getCoords(),m=this.getViewportDelta(),y=-h.x-m.x||0,x=-h.y-m.y||0;return{x:y*d,y:x*d,width:i*d,height:l*d}}else return{x:o,y:s,width:i,height:l}},r.prototype.getViewportDelta=function(e){var t=this.module.getZoomMultiplier(),s=this.getCanvasOffset(),o=s.width,i=s.height,l=o*t,c=i*t,d=l-o,h=c-i;return{x:d/2/t,y:h/2/t}},r.prototype.clearOff=function(){this.frmOff=void 0,this.cvsOff=void 0},r.prototype.getFrameOffset=function(e){var t;if(!this.frmOff||e){var s=(t=this.frame)===null||t===void 0?void 0:t.el,o=e?.ownerDocument.defaultView,i=o?o.frameElement:s;this.frmOff=this.offset(i||s)}return this.frmOff},r.prototype.getCanvasOffset=function(){return this.cvsOff||(this.cvsOff=this.offset(this.el)),this.cvsOff},r.prototype.getElementPos=function(e,t){t===void 0&&(t={});var s=this.module.getZoomDecimal(),o=this.getFrameOffset(e),i=this.el,l=this.getCanvasOffset(),c=this.offset(e,t),d=t.avoidFrameOffset?0:o.top,h=t.avoidFrameOffset?0:o.left,m=t.avoidFrameZoom?c.top:c.top*s,y=t.avoidFrameZoom?c.left:c.left*s,x=t.avoidFrameOffset?m:m+d-l.top+i.scrollTop,b=t.avoidFrameOffset?y:y+h-l.left+i.scrollLeft,v=t.avoidFrameZoom?c.height:c.height*s,j=t.avoidFrameZoom?c.width:c.width*s;return{top:x,left:b,height:v,width:j,zoom:s,rect:c}},r.prototype.getElementOffsets=function(e){if(!e||(0,Ir.ir)(e))return{};var t={},s=window.getComputedStyle(e),o=this.module.getZoomDecimal(),i=["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"];return i.forEach(function(l){t[l]=parseFloat(s[l])*o}),t},r.prototype.getPosition=function(e){var t;e===void 0&&(e={});var s=(t=this.frame)===null||t===void 0?void 0:t.el.contentDocument;if(!s)return{top:0,left:0,width:0,height:0};var o=s.body,i=this.module.getZoomDecimal(),l=this.getFrameOffset(),c=this.getCanvasOffset(),d=e.noScroll;return{top:l.top+(d?0:o.scrollTop)*i-c.top,left:l.left+(d?0:o.scrollLeft)*i-c.left,width:c.width,height:c.height}},r.prototype.getCanvasScroll=function(){return this.config.scrollableCanvas?{scrollTop:this.el.scrollTop,scrollLeft:this.el.scrollLeft}:{scrollTop:0,scrollLeft:0}},r.prototype.updateScript=function(e){var t=e.model,s=t.getId(),o={component:t,view:e,el:e.el};if(!e.scriptContainer){e.scriptContainer=(0,Ir.a_)("div",{"data-id":s});var i=this.getJsContainer();i?.appendChild(e.scriptContainer)}e.el.id=s,e.scriptContainer.innerHTML="";var l=document.createElement("script"),c=t.getScriptString(),d=t.get("script-props")?c:`function(){
`.concat(c,`
;}`),h=JSON.stringify(t.__getScriptProps());l.innerHTML=`
      setTimeout(function() {
        var item = document.getElementById('`.concat(s,`');
        if (!item) return;
        var script = (`).concat(d,`).bind(item);
        script(`).concat(h,`, { el: item });
      }, 1);`),setTimeout(function(){t.emitWithEditor(ja.I.scriptMountBefore,o);var m=e.scriptContainer;m?.appendChild(l),t.emitWithEditor(ja.I.scriptMount,o)},0)},r.prototype.getJsContainer=function(e){var t=this.getFrameView(e);return t?.getJsContainer()},r.prototype.getFrameView=function(e){return e?.frameView||this.em.getCurrentFrame()},r.prototype._renderFrames=function(){if(this.ready){var e=this,t=e.model,s=e.frames,o=e.em,i=e.framesArea,l=t.frames;l.listenToLoad(),s.render();var c=l.at(0),d=c?.view;o.setCurrentFrame(d),i?.appendChild(s.el),this.frame=d,this.updateFramesArea()}},r.prototype.renderFrames=function(){this._renderFrames()},r.prototype.render=function(){var e=this,t=e.el,s=e.$el,o=e.ppfx,i=e.config,l=e.em;s.html(this.template());var c=s.find("[data-frames]");this.framesArea=c.get(0);var d=s.find("[data-tools]");return this.toolsWrapper=d.get(0),d.append(`
      <div class="`.concat(o,"tools ").concat(o,`tools-gl" style="pointer-events:none">
        <div class="`).concat(o,`placeholder">
          <div class="`).concat(o,`placeholder-int"></div>
        </div>
      </div>
      <div id="`).concat(o,`tools" style="pointer-events:none">
        `).concat(i.extHl?'<div class="'.concat(o,'highlighter-sel"></div>'):"",`
        <div class="`).concat(o,`badge"></div>
        <div class="`).concat(o,`ghost"></div>
        <div class="`).concat(o,`toolbar" style="pointer-events:all"></div>
        <div class="`).concat(o,`resizer"></div>
        <div class="`).concat(o,`offset-v"></div>
        <div class="`).concat(o,`offset-fixed-v"></div>
      </div>
    `)),this.toolsEl=t.querySelector("#".concat(o,"tools")),this.hlEl=t.querySelector(".".concat(o,"highlighter")),this.badgeEl=t.querySelector(".".concat(o,"badge")),this.placerEl=t.querySelector(".".concat(o,"placeholder")),this.ghostEl=t.querySelector(".".concat(o,"ghost")),this.toolbarEl=t.querySelector(".".concat(o,"toolbar")),this.resizerEl=t.querySelector(".".concat(o,"resizer")),this.offsetEl=t.querySelector(".".concat(o,"offset-v")),this.fixedOffsetEl=t.querySelector(".".concat(o,"offset-fixed-v")),this.toolsGlobEl=t.querySelector(".".concat(o,"tools-gl")),this.spotsEl=t.querySelector("[data-spots]"),this.cvStyle=t.querySelector("[data-canvas-style]"),t.className=(0,Zt.getUiClass)(l,this.className),i.scrollableCanvas===!0&&(t.style.overflow="auto"),this.ready=!0,this._renderFrames(),this},r})(kl);const VU=$U;var WU=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),$f=function(){return $f=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},$f.apply(this,arguments)},HU=function(a,r,e){if(e||arguments.length===2)for(var t=0,s=r.length,o;t<s;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return a.concat(o||Array.prototype.slice.call(r))},qU=(function(a){WU(r,a);function r(e){var t=a.call(this,e,"Canvas",QB())||this;return t.events=nv,t.framesById={},t.canvas=new iz(t),t.spots=new dz(t),t.model=t.canvas,t.startAutoscroll=t.startAutoscroll.bind(t),t.stopAutoscroll=t.stopAutoscroll.bind(t),t.autoScroller=new z3,t}return r.prototype.getCanvasView=function(){return this.canvasView},r.prototype.postLoad=function(){this.model.init()},r.prototype.getModel=function(){return this.canvas},r.prototype.getElement=function(){return this.getCanvasView().el},r.prototype.getFrame=function(e){return this.getFrames()[e||0]},r.prototype.getFrameEl=function(){var e=(this.canvasView||{}).frame;return e?.el},r.prototype.getFramesEl=function(){var e;return(e=this.canvasView)===null||e===void 0?void 0:e.framesArea},r.prototype.getWindow=function(){var e=(this.canvasView||{}).frame;return e?.getWindow()},r.prototype.getDocument=function(){var e=this.getFrameEl();return e?.contentDocument},r.prototype.getBody=function(){var e=this.getDocument();return e?.body},r.prototype._getLocalEl=function(e,t,s){var o=e,i=t?.frameView;return o=i?i[s]():o,o},r.prototype.getGlobalToolsEl=function(){var e;return(e=this.canvasView)===null||e===void 0?void 0:e.toolsGlobEl},r.prototype.getToolsEl=function(e){return this._getLocalEl(this.getCanvasView().toolsEl,e,"getToolsEl")},r.prototype.getHighlighter=function(e){return this._getLocalEl(this.getCanvasView().hlEl,e,"getHighlighter")},r.prototype.getBadgeEl=function(e){return this._getLocalEl(this.getCanvasView().badgeEl,e,"getBadgeEl")},r.prototype.getPlacerEl=function(){return this.getCanvasView().placerEl},r.prototype.getGhostEl=function(){return this.getCanvasView().ghostEl},r.prototype.getToolbarEl=function(){return this.getCanvasView().toolbarEl},r.prototype.getResizerEl=function(){return this.getCanvasView().resizerEl},r.prototype.getOffsetViewerEl=function(e){return this._getLocalEl(this.getCanvasView().offsetEl,e,"getOffsetViewerEl")},r.prototype.getFixedOffsetViewerEl=function(){return this.getCanvasView().fixedOffsetEl},r.prototype.getSpotsEl=function(){var e;return(e=this.canvasView)===null||e===void 0?void 0:e.spotsEl},r.prototype.render=function(){var e;return(e=this.canvasView)===null||e===void 0||e.remove(),this.canvasView=new VU(this.canvas),this.canvasView.render().el},r.prototype.getOffset=function(){var e=this.offset(this.getFrameEl()),t=this.offset(this.getElement());return{top:e.top-t.top,left:e.left-t.left}},r.prototype.offset=function(e){return this.getCanvasView().offset(e)},r.prototype.setCustomBadgeLabel=function(e){this.config.customBadgeLabel=e},r.prototype.getElementPos=function(e,t){return this.getCanvasView().getElementPos(e,t)},r.prototype.getElementOffsets=function(e){return this.getCanvasView().getElementOffsets(e)},r.prototype.getRect=function(){var e,t=(e=this.getCanvasView().getPosition())!==null&&e!==void 0?e:{},s=t.top,o=s===void 0?0:s,i=t.left,l=i===void 0?0:i;return $f($f({},this.getCanvasView().getCanvasOffset()),{topScroll:o,leftScroll:l})},r.prototype.getTargetToElementDim=function(e,t,s){s===void 0&&(s={});var o=s||{},i=this.getCanvasView().getPosition();if(i){var l=o.elPos||this.getCanvasView().getElementPos(t),c=s.toRight||0,d=o.targetHeight||e.offsetHeight,h=o.targetWidth||e.offsetWidth,m=o.event||null,y=l.top-d,x=l.left;x+=c?l.width:0,x=c?x-h:x;var b=x<i.left?i.left:x,v=y<i.top?i.top:y;v=v>l.top+l.height?l.top+l.height:v;var j={top:v,left:b,elementTop:l.top,elementLeft:l.left,elementWidth:l.width,elementHeight:l.height,targetWidth:e.offsetWidth,targetHeight:e.offsetHeight,canvasTop:i.top,canvasLeft:i.left,canvasWidth:i.width,canvasHeight:i.height};return m&&this.em&&this.em.trigger(m,j),j}},r.prototype.canvasRectOffset=function(e,t,s){var o=this;s===void 0&&(s={});var i=function(c){var d=c.defaultView;return d?.frameElement},l=function(c,d,h){d===void 0&&(d=1);var m=o.em.getZoomDecimal(),y=d?"top":"left",x=c.ownerDocument,b=s.offset?i(x):{},v=b.offsetTop,j=v===void 0?0:v,S=b.offsetLeft,k=S===void 0?0:S,N=x.body||{},P=N.scrollTop,R=P===void 0?0:P,F=N.scrollLeft,z=F===void 0?0:F,H=d?R:z,V=d?j:k;return h[y]-(H-V)*m};return{top:l(e,1,t),left:l(e,0,t)}},r.prototype.getTargetToElementFixed=function(e,t,s){s===void 0&&(s={});var o=s.pos||this.getElementPos(e,{noScroll:!0}),i=s.canvasOff||this.canvasRectOffset(e,o),l=t.offsetHeight||0,c=t.offsetWidth||0,d=this.getCanvasView(),h=d.getCanvasScroll(),m=h.scrollTop,y=h.scrollLeft,x=d.getPosition(),b=s.event,v=o.width-c,j=-l,S=(0,Ce.isUndefined)(s.left)?v:s.left,k=Math.max(-o.left+y,0);S=Math.max(S,k);var N=o.width-c;S=Math.min(S,N);var P=x.width+y-c-o.left;S=Math.min(S,P);var R=i.top<l+m,F=j;if(R){var z=o.height+l,H=z<x.height;if(H)F=F+z;else{var V=-i.top+m;F=V<o.height?V:o.height}}var W={top:F,left:S,canvasOffsetTop:i.top,canvasOffsetLeft:i.left,elRect:o,canvasOffset:i,canvasRect:x,targetWidth:c,targetHeight:l};return b&&this.em.trigger(b,W),W},r.prototype.getMouseRelativePos=function(e,t){t===void 0&&(t={});var s=t.subWinOffset,o=e.target,i=o.nodeType===Node.DOCUMENT_NODE?o:o.ownerDocument,l=i.defaultView||i.parentWindow,c=l.frameElement,d=s?l.pageYOffset:0,h=s?l.pageXOffset:0,m=this.getZoomMultiplier(),y=0,x=0;if(c){var b=c.getBoundingClientRect();y=b.top||0,x=b.left||0}return{y:(e.clientY+y-d)*m,x:(e.clientX+x-h)*m}},r.prototype.getMouseRelativeCanvas=function(e,t){var s,o=this.getZoomDecimal(),i=this.getCanvasView(),l=(s=i.getPosition(t))!==null&&s!==void 0?s:{top:0,left:0},c=i.getCanvasScroll(),d={top:l.top+c.scrollTop,left:l.left+c.scrollLeft},h=d.top,m=d.left;return{y:e.clientY*o+h,x:e.clientX*o+m}},r.prototype.startDrag=function(e){this.em.set("dragSource",e)},r.prototype.endDrag=function(){this.em.set({dragResult:null,dragSource:void 0})},r.prototype.hasFocus=function(){return this.getDocument().hasFocus()},r.prototype.isInputFocused=function(){var e=this.getDocument(),t=this.getFrameEl(),s=HU(["body"],this.config.notTextable,!0),o=t&&document.activeElement===t,i=o?e&&e.activeElement:document.activeElement;return i&&!s.some(function(l){return i.matches(l)})},r.prototype.scrollTo=function(e,t){t===void 0&&(t={});var s=(0,Zt.getElement)(e),o=s&&(0,Zt.getViewEl)(s);o&&o.scrollIntoView(t)},r.prototype.startAutoscroll=function(e){var t=e&&e.view||this.em.getCurrentFrame();if(t&&t.startAutoscroll(),this.config.scrollableCanvas){var s=this.getCanvasView().el;this.autoScroller.start(s,s,{zoom:this.em.getZoomDecimal(),ignoredElement:this.getSpotsEl()})}},r.prototype.stopAutoscroll=function(e){var t=e&&e.view||this.em.getCurrentFrame();t&&t.stopAutoscroll(),this.config.scrollableCanvas&&this.autoScroller.stop()},r.prototype.setZoom=function(e,t){return t===void 0&&(t={}),this.canvas.set("zoom",typeof e=="string"?parseFloat(e):e,t),this},r.prototype.getZoom=function(){return parseFloat(this.canvas.get("zoom"))},r.prototype.setCoords=function(e,t,s){var o;s===void 0&&(s={});var i=e||e===0,l=t||t===0,c={x:this.canvas.get("x"),y:this.canvas.get("y")};if(i&&(c.x=parseFloat("".concat(e))),l&&(c.y=parseFloat("".concat(t))),s.toWorld){var d=(o=this.canvasView)===null||o===void 0?void 0:o.getViewportDelta();d&&(i&&(c.x=c.x-d.x),l&&(c.y=c.y-d.y))}return this.canvas.set(c),this},r.prototype.getCoords=function(){var e=this.canvas.attributes,t=e.x,s=e.y;return{x:t,y:s}},r.prototype.getPointer=function(e){var t=this.canvas.attributes,s=t.pointer,o=t.pointerScreen;return e?o:s},r.prototype.getZoomDecimal=function(){return this.getZoom()/100},r.prototype.getZoomMultiplier=function(){var e=this.getZoomDecimal();return e?1/e:1},r.prototype.fitViewport=function(e){var t;(t=this.canvasView)===null||t===void 0||t.fitViewport(e)},r.prototype.toggleFramesEvents=function(e){var t=this.getFramesEl().style;t.pointerEvents=e?"":"none"},r.prototype.getFrames=function(){return this.canvas.frames.map(function(e){return e})},r.prototype.addFrame=function(e,t){return e===void 0&&(e={}),t===void 0&&(t={}),this.canvas.frames.add(new j3(this,$f({},e)),t)},r.prototype.getLastDragResult=function(){return this.em.get("dragResult")},r.prototype.addSpot=function(e,t){var s;t===void 0&&(t={});var o=e,i=this.getSpots(o);if(i.length){var l=i[0];return l.set(o),l}var c=o.componentView||((s=o.component)===null||s===void 0?void 0:s.view),d=new Cl.A(this,$f($f({},o),{id:o.id||"cs_".concat(o.type,"_").concat(c?.cid),type:o.type||""}));return this.spots.add(d,t),d},r.prototype.getSpots=function(e){return e===void 0&&(e={}),this.spots.where(e.id?{id:e.id}:e)},r.prototype.removeSpots=function(e){e===void 0&&(e={});var t=(0,Ce.isArray)(e)?e:this.getSpots(e),s=this.spots.remove(t);return s},r.prototype.hasCustomSpot=function(e){var t=this.config.customSpots;return!!(t===!0||t&&e&&t[e])},r.prototype.getWorldRectToScreen=function(e){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.getRectToScreen(e)},r.prototype.refresh=function(e){e===void 0&&(e={});var t=this,s=t.em,o=t.events,i=t.canvasView;i?.clearOff(),(e.spots||e.all)&&(this.refreshSpots(),s.trigger("canvas:updateTools")),s.set("canvasOffset",this.getOffset()),s.trigger(o.refresh,e)},r.prototype.refreshSpots=function(){this.spots.refresh()},r.prototype.destroy=function(){var e=this,t;this.canvas.stopListening(),(t=this.canvasView)===null||t===void 0||t.remove(),["model","droppable"].forEach(function(s){return e[s]={}})},r})(Ai);const GU=qU;var KU=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),yh=function(){return yh=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},yh.apply(this,arguments)},V3=(function(a){KU(r,a);function r(e,t){var s=a.call(this,e,t)||this;return s.dataResolver=s.initializeDataResolver(e,t),s.listenToPropsChange(),s}return r.prototype.initializeDataResolver=function(e,t){var s,o=(s=e.dataResolver)!==null&&s!==void 0?s:{type:e.type},i=this.createResolverInstance(o,yh(yh({},t),{collectionsStateMap:this.collectionsStateMap}));return i},r.prototype.getDataResolver=function(){return this.get("dataResolver")},r.prototype.setDataResolver=function(e){return this.set("dataResolver",e)},r.prototype.onCollectionsStateMapUpdate=function(e){this.dataResolver.updateCollectionsStateMap(e),a.prototype.onCollectionsStateMapUpdate.call(this,e)},r.prototype.listenToPropsChange=function(){var e=this;this.on("change:dataResolver",function(){e.dataResolver.set(e.get("dataResolver"))})},r.prototype.removePropsListeners=function(){this.stopListening(this.dataResolver),this.off("change:dataResolver"),this.off("change:".concat(this.collectionsStateMap))},r.prototype.destroy=function(e){return this.removePropsListeners(),a.prototype.destroy.call(this,e)},r.prototype.toJSON=function(e){var t=a.prototype.toJSON.call(this,e),s=this.dataResolver.toJSON();return delete s.type,yh(yh({},t),{dataResolver:s})},r})($s),YU=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),mv=function(){return mv=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},mv.apply(this,arguments)},ZU=(function(a){YU(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return mv(mv({},a.prototype.defaults),{type:tc,dataResolver:{},droppable:!1})},enumerable:!1,configurable:!0}),r.prototype.getPath=function(){return this.dataResolver.get("path")},r.prototype.getCollectionId=function(){return this.dataResolver.get("collectionId")},r.prototype.getVariableType=function(){return this.dataResolver.get("variableType")},r.prototype.getDefaultValue=function(){return this.dataResolver.get("defaultValue")},r.prototype.getDataValue=function(){return this.dataResolver.getDataValue()},r.prototype.resolvesFromCollection=function(){return this.dataResolver.resolvesFromCollection()},r.prototype.getInnerHTML=function(){return this.getDataValue()},r.prototype.setPath=function(e){this.dataResolver.set("path",e)},r.prototype.setDefaultValue=function(e){this.dataResolver.set("defaultValue",e)},r.prototype.resetDataSourcePath=function(e){this.set("dataResolver",{path:e,collectionId:void 0,variableType:void 0})},r.prototype.createResolverInstance=function(e,t){return new om(e,t)},r.isComponent=function(e){return(0,Zt.toLowerCase)(e.tagName)===tc},r})(V3);const XU=ZU;var QU=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),gv=function(){return gv=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},gv.apply(this,arguments)},JU=(function(a){QU(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return gv(gv({},a.prototype.defaults),{droppable:!1,type:qs.condition,dataResolver:{condition:{left:"",operator:hl.equalsIgnoreCase,right:""}},components:[{type:qs.conditionTrue},{type:qs.conditionFalse}]})},enumerable:!1,configurable:!0}),r.prototype.isTrue=function(){return this.dataResolver.isTrue()},r.prototype.getCondition=function(){return this.dataResolver.getCondition()},r.prototype.getIfTrueContent=function(){return this.components().at(0)},r.prototype.getIfFalseContent=function(){return this.components().at(1)},r.prototype.getOutputContent=function(){return this.isTrue()?this.getIfTrueContent():this.getIfFalseContent()},r.prototype.setCondition=function(e){this.dataResolver.setCondition(e)},r.prototype.setIfTrueComponents=function(e){this.setComponentsAtIndex(0,e)},r.prototype.setIfFalseComponents=function(e){this.setComponentsAtIndex(1,e)},r.prototype.getInnerHTML=function(e){var t,s;return(s=(t=this.getOutputContent())===null||t===void 0?void 0:t.getInnerHTML(e))!==null&&s!==void 0?s:""},r.prototype.createResolverInstance=function(e,t){return new N3(e,t)},r.prototype.setComponentsAtIndex=function(e,t){var s=this.components().at(e);s?.components(t)},r.isComponent=function(e){return(0,Zt.toLowerCase)(e.tagName)===qh},r})(V3);const e$=JU;var t$=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),yv=function(){return yv=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},yv.apply(this,arguments)},r$=(function(a){t$(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return yv(yv({},a.prototype.defaults),{removable:!1,draggable:!1})},enumerable:!1,configurable:!0}),r.isComponent=function(e){return Wz((0,Zt.toLowerCase)(e.tagName))},r})($s);const _j=r$;var n$=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),xv=function(){return xv=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},xv.apply(this,arguments)},a$=(function(a){n$(r,a);function r(e,t){t===void 0&&(t={});var s,o=a.call(this,e,t)||this;return o.mutable=(s=e.mutable)!==null&&s!==void 0?s:!0,o.on("change",o.handleChange),o}return Object.defineProperty(r.prototype,"cl",{get:function(){return this.collection},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dataSource",{get:function(){return this.cl.dataSource},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"em",{get:function(){return this.dataSource.em},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"index",{get:function(){return this.cl.indexOf(this)},enumerable:!1,configurable:!0}),r.prototype.handleChange=function(e,t){var s=this,o=this.changedAttributes();(0,Ce.keys)(o).forEach(function(i){return s.triggerChange(i,t)})},r.prototype.getPath=function(e,t){t===void 0&&(t={});var s=this,o=s.dataSource,i=s.id,l=s.index,c=o.id,d=e?".".concat(e):"";return"".concat(c,".").concat(t.useIndex?l:i).concat(d)},r.prototype.getPaths=function(e){return[this.getPath(e),this.getPath(e,{useIndex:!0})]},r.prototype.triggerChange=function(e,t){t===void 0&&(t={});var s=this,o=s.dataSource,i=s.em,l=this.getPaths(e),c={dataSource:o,dataRecord:this,path:l[0],options:t};i.trigger(Rd.path,c),i.trigger("".concat(Rd.pathSource,":").concat(o.id),c),l.forEach(function(d){return i.trigger("".concat(Rd.path,":").concat(d),xv(xv({},c),{path:d}))})},r.prototype.set=function(e,t,s){var o=this,i,l;if(!this.isNew()&&this.attributes.mutable===!1)throw new Error("Cannot modify immutable record");var c=(l=(i=this.dataSource)===null||i===void 0?void 0:i.transformers)===null||l===void 0?void 0:l.onRecordSetValue,d=function(j,S,k){k===void 0&&(k={});var N=k?.avoidTransformers||!c?S:c({id:o.id,key:j,value:S});a.prototype.set.call(o,j,N,k),a.prototype.set.call(o,{__p:k.partial?!0:void 0},k)};if(typeof e=="object"&&e!==null)for(var h=e,m=0,y=Object.entries(h);m<y.length;m++){var x=y[m],b=x[0],v=x[1];d(b,v,t)}else d(e,t,s);return this},r})(Sr.Kx);const s$=a$;var o$=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),W3=(function(a){o$(r,a);function r(e,t){var s=a.call(this,e,t)||this;return s.dataSource=t.dataSource,s}return r})(Sr.pM);const S5=W3;W3.prototype.model=s$;var i$=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Td=function(){return Td=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Td.apply(this,arguments)},N5=function(a,r,e,t){function s(o){return o instanceof e?o:new e(function(i){i(o)})}return new(e||(e=Promise))(function(o,i){function l(h){try{d(t.next(h))}catch(m){i(m)}}function c(h){try{d(t.throw(h))}catch(m){i(m)}}function d(h){h.done?o(h.value):s(h.value).then(l,c)}d((t=t.apply(a,r||[])).next())})},k5=function(a,r){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},t,s,o,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(d){return function(h){return c([d,h])}}function c(d){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,d[0]&&(e=0)),e;)try{if(t=1,s&&(o=d[0]&2?s.return:d[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,d[1])).done)return o;switch(s=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return e.label++,{value:d[1],done:!1};case 5:e.label++,s=d[1],d=[0];continue;case 7:d=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){e=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){e.label=d[1];break}if(d[0]===6&&e.label<o[1]){e.label=o[1],o=d;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(d);break}o[2]&&e.ops.pop(),e.trys.pop();continue}d=r.call(a,e)}catch(h){d=[6,h],s=0}finally{t=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},l$=function(a,r,e){if(e||arguments.length===2)for(var t=0,s=r.length,o;t<s;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return a.concat(o||Array.prototype.slice.call(r))},c$=(function(a){i$(r,a);function r(e,t){var s=a.call(this,Td(Td({schema:{}},e),{records:[]}),t)||this,o=e.records,i=e.transformers;return s.transformers=i||{},o instanceof S5||s.set({records:new S5(o,{dataSource:s})}),s.listenTo(s.records,"add",s.onAdd),s.listenTo(s.records,Sr.e2,s.handleChanges),s}return r.prototype.defaults=function(){return{records:[],transformers:{}}},Object.defineProperty(r.prototype,"records",{get:function(){return this.attributes.records},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"schema",{get:function(){return this.attributes.schema},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"em",{get:function(){return this.collection.em},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hasProvider",{get:function(){return!!this.attributes.provider},enumerable:!1,configurable:!0}),r.prototype.onAdd=function(e){e.triggerChange()},r.prototype.addRecord=function(e,t){return this.records.add(e,t)},r.prototype.getRecord=function(e){return this.records.get(e)},r.prototype.getRecords=function(){var e=this;return l$([],this.records.models,!0).map(function(t){return e.getRecord(t.id)})},r.prototype.getResolvedRecords=function(){var e=this,t=Object.entries(this.schema),s=this.getRecords().map(function(o){var i=Td({},o.attributes);return t.length===0||t.forEach(function(l){var c=l[0],d=l[1],h=d;if(h?.type===eC.relation&&h.target){var m=i[c];if(m){var y=e.em.DataSources.get(h.target);if(y){var x=y.records,b=h.targetField||Vz;if(h.isMany){var v=Array.isArray(m)?m:[m],j=x.filter(function(k){return v.includes(k.attributes[b])});i[c]=j.map(function(k){return Td({},k.attributes)})}else{var S=y.records.find(function(k){return k.attributes[b]===m});S&&(i[c]=Td({},S.attributes))}}}}}),i});return s},r.prototype.loadProvider=function(){return N5(this,void 0,void 0,function(){var e,t,s,o,i,l,c,d,h,m,y=this;return k5(this,function(x){switch(x.label){case 0:return e=this,t=e.attributes,s=e.em,o=t.provider,o?(0,Ce.isString)(o)?[2]:(i=(0,Ce.isString)(o.get)?{url:o.get}:o.get,l=i.url,c=i.method,d=i.headers,h=i.body,m=function(){return N5(y,void 0,void 0,function(){var b,v,j,S,k;return k5(this,function(N){switch(N.label){case 0:b=this,N.label=1;case 1:return N.trys.push([1,6,,7]),s.trigger(s.DataSources.events.providerLoadBefore,{dataSource:b}),[4,fetch(l,{method:c,headers:d,body:h})];case 2:return v=N.sent(),v.ok?[3,4]:(j=Error.bind,[4,v.text()]);case 3:throw new(j.apply(Error,[void 0,N.sent()]));case 4:return[4,v.json()];case 5:return S=N.sent(),S?.records&&this.setRecords(S.records),S?.schema&&this.upSchema(S.schema),s.trigger(s.DataSources.events.providerLoad,{result:S,dataSource:b}),[3,7];case 6:return k=N.sent(),s.logError(k.message),s.trigger(s.DataSources.events.providerLoadError,{dataSource:b,error:k}),[3,7];case 7:return[2]}})})},[4,m()]):[2];case 1:return x.sent(),[2]}})})},r.prototype.removeRecord=function(e,t){var s=this.getRecord(e);if(s?.mutable===!1&&!t?.dangerously)throw new Error("Cannot remove immutable record");return this.records.remove(e,t)},r.prototype.setRecords=function(e){var t=this;this.records.reset([],{silent:!0}),e.forEach(function(s){t.records.add(s)})},r.prototype.upSchema=function(e,t){this.set("schema",Td(Td({},this.schema),e),t)},r.prototype.getSchemaField=function(e){return this.schema[e]},r.prototype.handleChanges=function(e,t,s){var o=s||t;this.em.changesUp(o,{dataRecord:e,options:o})},r})(Sr.Kx);const H3=c$;var d$=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),oC=function(){return oC=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},oC.apply(this,arguments)},u$=(function(a){d$(r,a);function r(e,t){var s=a.call(this,e,t)||this;return s.collectionsStateMap={},s.listenToPropsChange(),s}return r.prototype.onCollectionsStateMapUpdate=function(e){var t,s;this.collectionsStateMap=e,(s=(t=this.dataResolverWatchers)===null||t===void 0?void 0:t.onCollectionsStateMapUpdate)===null||s===void 0||s.call(t),this.components().forEach(function(o){var i;(i=o.onCollectionsStateMapUpdate)===null||i===void 0||i.call(o,e)})},r.prototype.syncOnComponentChange=function(e,t,s){var o=this.collectionsStateMap;this.collectionsStateMap={},a.prototype.syncOnComponentChange.call(this,e,t,s),this.collectionsStateMap=o,this.onCollectionsStateMapUpdate(o)},r.prototype.setDataResolver=function(e){return this.set("dataResolver",e)},r.prototype.getDataResolver=function(){return this.dataResolverProps},Object.defineProperty(r.prototype,"dataResolverProps",{get:function(){return this.get("dataResolver")},enumerable:!1,configurable:!0}),r.prototype.listenToDataSource=function(){var e=this,t,s=this.dataResolverPath;if(s){var o=this,i=o.em,l=o.collectionsStateMap;(t=this.dataSourceWatcher)===null||t===void 0||t.destroy(),this.dataSourceWatcher=new $y({em:i,resolver:new om({type:tc,path:s},{em:i,collectionsStateMap:l}),onUpdate:function(){return e.onDataSourceChange()}})}},r.prototype.listenToPropsChange=function(){var e=this;this.on("change:dataResolver",function(){e.listenToDataSource()}),this.listenToDataSource()},Object.defineProperty(r.prototype,"dataSourceProps",{get:function(){return this.get("dataResolver")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dataResolverPath",{get:function(){var e;return(e=this.dataSourceProps)===null||e===void 0?void 0:e.path},enumerable:!1,configurable:!0}),r.prototype.onDataSourceChange=function(){this.onCollectionsStateMapUpdate(this.collectionsStateMap)},r.prototype.getDataSourceItems=function(){var e=this.dataSourceProps;if(!e)return[];var t=this.listDataSourceItems(e);if(t&&(0,Ce.isArray)(t))return t;var s=oC({},t);return s},r.prototype.listDataSourceItems=function(e){var t=e instanceof H3?e.get("id"):e.path;if(!t)return[];var s=this.em.DataSources.getValue(t,[]),o=t.split(".").length===1;return o&&(s=Object.entries(s).map(function(i){i[0];var l=i[1];return l})),s},r.prototype.getItemKey=function(e,t){return(0,Ce.isArray)(e)?t:Object.keys(e)[t]},r.prototype.removePropsListeners=function(){var e;this.off("change:dataResolver"),(e=this.dataSourceWatcher)===null||e===void 0||e.destroy(),this.dataSourceWatcher=void 0},r.prototype.destroy=function(e){return this.removePropsListeners(),a.prototype.destroy.call(this,e)},r})($s);const q3=u$;var f$=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),wi=function(){return wi=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},wi.apply(this,arguments)},Ej={avoidStore:!0,partial:!0},p$=(function(a){f$(r,a);function r(e,t){var s=this;if(t.forCloning)return s=a.call(this,e,t)||this;var o=wi(wi({},e),{droppable:!1}),i=s=a.call(this,o,t)||this;return s.rebuildChildrenFromCollection=s.rebuildChildrenFromCollection.bind(s),s.listenToPropsChange(),s.rebuildChildrenFromCollection(),i}return Object.defineProperty(r.prototype,"defaults",{get:function(){return wi(wi({},a.prototype.defaults),{droppable:!1,dataResolver:{},type:qs.collection,components:[{type:qs.collectionItem}]})},enumerable:!1,configurable:!0}),r.prototype.getItemsCount=function(){var e,t,s=this.getDataSourceItems(),o=m$(s),i=Math.max(0,(e=this.getConfigStartIndex())!==null&&e!==void 0?e:0),l=(t=this.getConfigEndIndex())!==null&&t!==void 0?t:Number.MAX_VALUE,c=Math.min(o-1,l),d=c-i+1;return Math.max(0,d)},r.prototype.getConfigStartIndex=function(){return this.dataResolver.startIndex},r.prototype.getConfigEndIndex=function(){return this.dataResolver.endIndex},r.prototype.getDataSource=function(){var e;return(e=this.dataResolver)===null||e===void 0?void 0:e.dataSource},r.prototype.getCollectionId=function(){var e;return(e=this.dataResolver)===null||e===void 0?void 0:e.collectionId},r.prototype.getCollectionItemComponents=function(){return this.firstChild.components()},r.prototype.setCollectionId=function(e){this.updateCollectionConfig({collectionId:e})},r.prototype.setStartIndex=function(e){if(e<0){this.em.logError("Start index should be greater than or equal to 0");return}this.updateCollectionConfig({startIndex:e})},r.prototype.setEndIndex=function(e){this.updateCollectionConfig({endIndex:e})},r.prototype.setDataSource=function(e){this.set(zg,wi(wi({},this.dataResolver),{dataSource:e}))},r.prototype.setCollectionItemComponents=function(e){this.firstChild.components(e)},r.prototype.onCollectionsStateMapUpdate=function(e){var t=this;a.prototype.onCollectionsStateMapUpdate.call(this,e);var s=this.getDataSourceItems(),o=this.resolveCollectionConfig(s).startIndex,i=this.components();i.forEach(function(l,c){var d=t.getItemKey(s,o+c),h=t.getCollectionsStateMapForItem(s,d);l.onCollectionsStateMapUpdate(h)})},r.prototype.stopSyncComponentCollectionState=function(){this.stopListening(this.components(),"add remove reset",this.syncOnComponentChange),this.onCollectionsStateMapUpdate({})},r.prototype.setCollectionStateMapAndPropagate=function(e,t){e.setSymbolOverride(["locked","layerable",uh]),e.syncComponentsCollectionState(),e.onCollectionsStateMapUpdate(t)},r.prototype.onDataSourceChange=function(){this.rebuildChildrenFromCollection()},r.prototype.listenToPropsChange=function(){var e=this;this.on("change:".concat(zg),function(){e.rebuildChildrenFromCollection(),e.listenToDataSource()}),this.listenToDataSource()},Object.defineProperty(r.prototype,"dataSourceProps",{get:function(){return this.dataResolver.dataSource},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dataResolver",{get:function(){return this.get(zg)||{}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"firstChild",{get:function(){return this.components().at(0)},enumerable:!1,configurable:!0}),r.prototype.updateCollectionConfig=function(e){this.set(zg,wi(wi({},this.dataResolver),e))},r.prototype.rebuildChildrenFromCollection=function(){var e=this.getDataSourceItems(),t=this.resolveCollectionConfig(e).totalItems;if(t===this.components().length){this.onCollectionsStateMapUpdate(this.collectionsStateMap);return}var s=this.getCollectionItems(e);this.components().reset(s,U0)},r.prototype.getCollectionItems=function(e){var t,s=this.ensureFirstChild(),o=s.getStyle().display,i=!o||o==="none",l=i?"":o;s.addStyle({display:"none"},Ej);var c=[s],d=y$(this.dataResolver,this.em);if(!d)return c;var h=this.collectionId,m=e??this.getDataSourceItems(),y=this.resolveCollectionConfig(m),x=y.startIndex,b=y.endIndex,v=this.hasDuplicateCollectionId();if(v)return this.em.logError('The collection ID "'.concat(h,'" already exists in the parent collection state. Overriding it is not allowed.')),c;for(var j=x;j<=b;j++){var S=j===x,k=this.getItemKey(m,j),N=this.getCollectionsStateMapForItem(m,k);if(S){(t=_i(s))===null||t===void 0||t.forEach(function(R){return Fb(R)}),this.setCollectionStateMapAndPropagate(s,N),s.addStyle({display:l},Ej);continue}var P=s.clone({symbol:!0,symbolInv:!0});P.set({locked:!0,layerable:!1},Ej),this.setCollectionStateMapAndPropagate(P,N),c.push(P)}return c},r.prototype.getCollectionsStateMapForItem=function(e,t){var s,o=this.resolveCollectionConfig(e),i=o.startIndex,l=o.endIndex,c=o.totalItems,d=this.collectionId,h=e[t],m=this.collectionsStateMap,y=typeof t=="string"?Object.keys(e).indexOf(t):t,x=y-i,b=c-(1+x),v={collectionId:d,currentIndex:y,currentItem:h,currentKey:t,startIndex:i,endIndex:l,totalItems:c,remainingItems:b},j=wi(wi({},m),(s={},s[d]=v,s));return j},r.prototype.hasDuplicateCollectionId=function(){var e=this.collectionId,t=this.collectionsStateMap;return!!t[e]},r.prototype.resolveCollectionConfig=function(e){var t,s,o=Array.isArray(e),i=o?e.length:Object.keys(e).length,l=(t=this.getConfigStartIndex())!==null&&t!==void 0?t:0,c=(s=this.getConfigEndIndex())!==null&&s!==void 0?s:Number.MAX_VALUE,d=Math.min(i-1,c),h=0;return i>0&&(h=Math.max(0,d-l+1)),{startIndex:l,endIndex:d,totalItems:h,isArray:o}},r.prototype.ensureFirstChild=function(){var e=this.em.Components.getType(qs.collectionItem).model;return this.firstChild||new e({type:qs.collectionItem},this.opt)},Object.defineProperty(r.prototype,"collectionId",{get:function(){var e,t;return(t=(e=this.dataResolverProps)===null||e===void 0?void 0:e.collectionId)!==null&&t!==void 0?t:""},enumerable:!1,configurable:!0}),r.isComponent=function(e){return(0,Zt.toLowerCase)(e.tagName)===qs.collection},r.prototype.toJSON=function(e){var t=a.prototype.toJSON.call(this,e);delete t.droppable,delete t[Si];var s=this.firstChild;return wi(wi({},t),{components:[s]})},r})(q3);const h$=p$;function m$(a){return(0,Ce.isArray)(a)?a.length:Object.keys(a).length}function g$(a,r,e){return a?!0:(e.logError('The "'.concat(r,'" property is required in the collection definition.')),!1)}function y$(a,r){for(var e=[{property:a?.collectionId,propertyPath:"dataResolver.collectionId"},{property:a?.dataSource,propertyPath:"dataResolver.dataSource"}],t=0,s=e;t<s.length;t++){var o=s[t].propertyPath;if(!g$(a,o,r))return[]}var i=a?.startIndex;return i!==void 0&&(i<0||!Number.isInteger(i))&&r.logError("Invalid startIndex: ".concat(i,". It must be a non-negative integer.")),!0}var x$=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),v$=(function(a){x$(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.compView=us,e}return r.prototype.initialize=function(e){this.opts=e||{},this.config=e.config||{},this.em=this.config.em;var t=this.collection;this.listenTo(t,"add",this.addTo),this.listenTo(t,"reset",this.resetChildren),this.listenTo(t,"remove",this.removeChildren)},r.prototype.removeChildren=function(e,t,s){var o=this;s===void 0&&(s={}),e.views.forEach(function(l){if(l){var c=l.childrenView,d=l.scriptContainer;c&&c.stopListening(),(0,Ir.YZ)(d),l.remove.apply(l)}});var i=e.components();i.forEach(function(l){return o.removeChildren(l,t,s)})},r.prototype.addTo=function(e){this.addToCollection(e,null,this.collection.indexOf(e))},r.prototype.addToCollection=function(e,t,s){for(var o=this,i=o.config,l=o.opts,c=o.em,d=i.frameView,h=d?.model&&e.getView(d.model),m=l.componentTypes||c?.Components.getTypes(),y=e.get("type")||"default",x=this.compView,b=0;b<m.length;b++)if(m[b].id==y){x=m[b].view;break}var v=h||new x({model:e,config:i,componentTypes:m}),j;try{j=v.render().el}catch(P){j=document.createTextNode(""),c.logError(P)}if(t)t.appendChild(j);else{var S=this.parentEl,k=S.childNodes;if((0,Ce.isUndefined)(s))S.appendChild(j);else{var N=k.length==s;N&&s--,N||!k.length?S.appendChild(j):S.insertBefore(j,k[s])}}return e.opt.temporary||c?.trigger(ja.I.mount,e),j},r.prototype.resetChildren=function(e,t){var s=this;if(t===void 0&&(t={}),!t.skipViewUpdate){var o=t.previousModels;t.skipDomReset||(this.parentEl.innerHTML=""),o?.forEach(function(i){return s.removeChildren(i,s.collection)}),e.each(function(i){return s.addToCollection(i)})}},r.prototype.render=function(e){var t=this,s=this.el,o=document.createDocumentFragment();return this.parentEl=e||this.el,this.collection.each(function(i){return t.addToCollection(i,o)}),s.innerHTML="",s.appendChild(o),this},r})(Sr.Ss);const G3=v$;var b$=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Fc=function(){return Fc=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Fc.apply(this,arguments)},w$=(function(a){b$(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.rendered=!1,e}return r.prototype.className=function(){return this.getClasses()},r.prototype.tagName=function(){return this.model.get("tagName")},r.prototype.preinitialize=function(e){e===void 0&&(e={}),this.opts=e},r.prototype.initialize=function(e){e===void 0&&(e={});var t=this.model,s=e.config||{},o=s.em,i=t.opt||{},l=this,c=l.$el,d=l.el;this.opts=e,this.modelOpt=i,this.config=s,this.em=o,this.pfx=s.stylePrefix||"",this.ppfx=s.pStylePrefix||"",this.attr=t.get("attributes"),this.classe=this.attr.class||[],this.listenTo(t,"change:style",this.updateStyle),this.listenTo(t,"change:attributes",this.renderAttributes),this.listenTo(t,"change:highlightable",this.updateHighlight),this.listenTo(t,"change:status change:locked",this.updateStatus),this.listenTo(t,"change:script rerender",this.reset),this.listenTo(t,"change:content",this.updateContent),this.listenTo(t,"change",this.handleChange),this.listenTo(t,"active",this.onActive),this.listenTo(t,"disable",this.onDisable),c.data("model",t),(0,Zt.setViewEl)(d,this),t.view=this,this.frameView&&t.views.push(this),this.initClasses(),this.initComponents({avoidRender:!0}),this.events=Fc(Fc({},this.constructor.getEvents()),{dragstart:"handleDragStart"}),this.delegateEvents(),!i.temporary&&this.init(this._clbObj())},Object.defineProperty(r.prototype,"__cmpStyleOpts",{get:function(){return{state:"",mediaText:""}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"frameView",{get:function(){return this.opts.config.frameView},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"createDoc",{get:function(){var e,t,s=((e=this.frameView)===null||e===void 0?void 0:e.getDoc())||document;return!((t=this.opts.config)===null||t===void 0)&&t.useFrameDoc?s:document},enumerable:!1,configurable:!0}),r.prototype.__isDraggable=function(){var e=this,t=e.model,s=e.config,o=t.attributes.draggable;return s.draggableComponents&&o},r.prototype._clbObj=function(){var e=this,t=e.em,s=e.model,o=e.el;return{editor:t?.getEditor(),model:s,el:o}},r.prototype.init=function(e){},r.prototype.removed=function(e){},r.prototype.onRender=function(e){},r.prototype.onActive=function(e){},r.prototype.onDisable=function(e){},r.prototype.remove=function(){var e;a.prototype.remove.call(this);var t=this,s=t.model,o=t.$el,i=s.views,l=this.frameView||{};return s.components().forEach(function(c){var d=c.getView(l.model);d?.remove()}),(e=this.childrenView)===null||e===void 0||e.remove(),i.splice(i.indexOf(this),1),this.removed(this._clbObj()),o.data({model:"",collection:"",view:""}),this},r.prototype.handleDragStart=function(e){if(!this.__isDraggable())return!1;e.stopPropagation(),e.preventDefault();var t=this.em.getSelectedAll(),s=t.includes(this.model)?t:[this.model];this.em.Commands.run("tlb-move",{target:s,event:e})},r.prototype.initClasses=function(){var e=this.model,t=e.classes,s="change:classes";t instanceof Mu&&(this.stopListening(e,s,this.initClasses),this.listenTo(e,s,this.initClasses),this.listenTo(t,"add remove change reset",this.updateClasses),t.length&&this.importClasses())},r.prototype.initComponents=function(e){e===void 0&&(e={});var t=this,s=t.model,o=t.$el,i=t.childrenView,l="change:components",c=s.get("components"),d=[s,l,this.initComponents];c instanceof by&&(o.data("collection",c),i&&i.remove(),this.stopListening.apply(this,d),!e.avoidRender&&this.renderChildren(),this.listenTo.apply(this,d))},r.prototype.handleChange=function(){var e=this.model,t=(0,Ce.keys)(e.changed);if(!(t.length===1&&t[0]==="status")){e.emitUpdate();for(var s in e.changed)e.emitUpdate(s)}},r.prototype.importClasses=function(){var e=this,t=e.em,s=e.model,o=t.Selectors;o&&s.classes.forEach(function(i){return o.add(i.getName())})},r.prototype.updateStatus=function(e){e===void 0&&(e={});var t=this,s=t.em,o=t.el,i=t.ppfx,l=t.model,c=s?.Canvas,d=c?.config.extHl,h=l.get("status"),m="".concat(i,"selected"),y="".concat(m,"-parent"),x="".concat(i,"freezed"),b="".concat(i,"hovered"),v="".concat(i,"no-pointer"),j="".concat(i,"pointer-init"),S=[m,y,x,b,v,j],k=d&&!e.noExtHl?"":m;this.$el.removeClass(S.join(" "));var N=o.getAttribute("class")||"",P=[N],R=!c?.hasCustomSpot(Cl.F.Select),F=!c?.hasCustomSpot(Cl.F.Target);switch(h){case"selected":R&&P.push(k);break;case"selected-parent":F&&P.push(y);break;case"freezed":P.push(x);break;case"freezed-selected":P.push(x),R&&P.push(k);break;case"hovered":!e.avoidHover&&P.push(b);break}(0,Ce.isBoolean)(l.locked)&&P.push(l.locked?v:j);var z=P.filter(Boolean).join(" ");z&&o.setAttribute("class",z)},r.prototype.updateHighlight=function(){var e=this.model,t=e.get("textable"),s=e.get("highlightable")&&(t||!e.isChildOf("text"));this.setAttribute("data-gjs-highlightable",s?!0:"")},r.prototype.updateStyle=function(e,t,s){s===void 0&&(s={});var o=this,i=o.model,l=o.em;if(Ff(l)&&!s.inline){var c=this.__cmpStyleOpts,d=i.getStyle(Fc({inline:!0},c));!(0,Ce.isEmpty)(d)&&i.setStyle(d,c)}else this.setAttribute("style",i.styleToString(s))},r.prototype.updateStyles=function(){this.updateStyle()},r.prototype.updateClasses=function(){var e,t,s=((t=(e=this.model.classes).pluck)===null||t===void 0?void 0:t.call(e,"name").join(" "))||"";this.setAttribute("class",s),this.updateStatus(),this.onAttrUpdate()},r.prototype.setAttribute=function(e,t){var s=this.$el;t?s.attr(e,t):s.removeAttr(e)},r.prototype.getClasses=function(){return this.model.getClasses().join(" ")},r.prototype.updateAttributes=function(){var e=this,t=e.model,s=e.$el;e.el;var o=t.attributes,i=o.textable,l=o.type,c=Fc(Fc({id:t.getId(),"data-gjs-type":l||"default"},this.__isDraggable()&&{draggable:!0}),i&&{contenteditable:"false"});this.__clearAttributes(),this.updateStyle(),this.updateHighlight();var d=Fc(Fc({},c),t.getAttributes());(0,Ce.keys)(d).forEach(function(h){return d[h]===!1&&delete d[h]}),s.attr(d)},r.prototype.__clearAttributes=function(){var e=this,t=e.el,s=e.$el,o=[];(0,Ce.each)(t.attributes,function(i){return o.push(i.nodeName)}),o.forEach(function(i){return s.removeAttr(i)})},r.prototype.updateContent=function(){var e=this.model.content,t=this.model.components().length;this.getChildrenContainer().innerHTML=t?"":e},r.prototype.prevDef=function(e){e.preventDefault()},r.prototype.updateScript=function(){var e=this,t=e.model,s=e.em;t.get("script")&&s?.Canvas.getCanvasView().updateScript(this)},r.prototype.getChildrenContainer=function(){var e=this.el;return typeof this.getChildrenSelector=="function"?e=this.el.querySelector(this.getChildrenSelector()):this.getTemplate,e},r.prototype.getOffsetRect=function(){var e={top:0,left:0,bottom:0,right:0},t=this.el,s=0,o=0,i=function(l){var c=l.offsetParent;c?(s+=c.offsetTop,o+=c.offsetLeft,i(c)):(e.top=t.offsetTop+s,e.left=t.offsetLeft+o,e.bottom=e.top+t.offsetHeight,e.right=e.left+t.offsetWidth)};return i(t),e},r.prototype.isInViewport=function(){var e=this,t=e.el,s=e.em,o=e.frameView,i=s.Canvas.getCanvasView(),l=i.getElBoxRect(t,{local:!0}),c=o.el,d=c.clientHeight,h=c.clientWidth,m=l.y,y=l.x,x=m+l.height,b=y+l.width,v=m>=0&&m<d,j=x>0&&x<d,S=b>=0&&b<h,k=y>0&&y<=h,N=(v||j)&&(S||k);return N},r.prototype.scrollIntoView=function(e){var t;e===void 0&&(e={});var s=this.isInViewport();if(!s||e.force){var o=this.el;if(e.behavior!=="smooth"){var i=this.getOffsetRect();(t=o.ownerDocument.defaultView)===null||t===void 0||t.scrollTo(0,i.top)}else o.scrollIntoView(Fc({behavior:"smooth",block:"nearest"},e))}},r.prototype.reset=function(){var e=this,t=e.el,s=e.model;e.scriptContainer&&s.emitWithEditor(ja.I.scriptUnmount,{component:s,view:e,el:t}),this.el="",this._ensureElement(),this._setData(),(0,Ir.bG)(t,this.el),this.render()},r.prototype._setData=function(){var e=this,t=e.model,s=e.el,o=t.components(),i=this;this.$el.data({model:t,collection:o,view:i}),(0,Zt.setViewEl)(s,this)},r.prototype._createElement=function(e){return this.createDoc.createElement(e)},r.prototype.renderChildren=function(){this.updateContent();var e=this.getChildrenContainer(),t=this.childrenView||new G3({collection:this.model.get("components"),config:this.config,componentTypes:this.opts.componentTypes});t.render(e),this.childrenView=t;for(var s=Array.prototype.slice.call(t.el.childNodes),o=0,i=s.length;o<i;o++)e.appendChild(s.shift())},r.prototype.renderAttributes=function(e,t,s){s===void 0&&(s={}),!s.skipViewUpdate&&(this.updateAttributes(),this.updateClasses())},r.prototype.onAttrUpdate=function(){},r.prototype.render=function(){return this.renderAttributes(),this.modelOpt.temporary?this:(this.renderChildren(),this.updateScript(),(0,Zt.setViewEl)(this.el,this),this.postRender(),this)},r.prototype.postRender=function(){if(!this.modelOpt.temporary){var e=this,t=e.model,s=e.el;this.onRender(this._clbObj()),t.emitWithEditor(ja.I.render,{component:t,view:this,el:s}),this.rendered=!0}},r.getEvents=function(){return(0,Ce.result)(this.prototype,"events")},r})(Sr.Ss);const us=w$;var j$=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),C$=(function(a){j$(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r})(us);const S$=C$;var N$=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),k$=(function(a){N$(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.initialize=function(e){e===void 0&&(e={}),a.prototype.initialize.call(this,e),this.postRender=this.postRender.bind(this),this.listenTo(this.model.components(),"reset",this.postRender),this.dataResolverListener=new $y({em:this.em,resolver:this.model.dataResolver,onUpdate:this.postRender})},r.prototype.renderDataResolver=function(){var e=this.model.getIfTrueContent(),t=this.model.getIfFalseContent(),s=e?.getEl(),o=t?.getEl(),i=this.model.isTrue();s&&(s.style.display=i?"":"none"),o&&(o.style.display=i?"none":"")},r.prototype.postRender=function(){this.renderDataResolver(),a.prototype.postRender.call(this)},r.prototype.remove=function(){return this.stopListening(this.model.components(),"reset",this.postRender),this.dataResolverListener.destroy(),a.prototype.remove.call(this)},r})(us);const _$=k$;var E$=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),T$=(function(a){E$(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.initialize=function(e){var t=this;e===void 0&&(e={}),a.prototype.initialize.call(this,e),this.dataResolverListener=new $y({em:this.em,resolver:this.model.dataResolver,onUpdate:function(){return t.postRender()}})},r.prototype.remove=function(){return this.dataResolverListener.destroy(),a.prototype.remove.call(this)},r.prototype.postRender=function(){var e=this.model,t=e.getDataResolver(),s=!!t.asPlainText;s?this.el.textContent=e.getDataValue():this.el.innerHTML=e.getDataValue(),a.prototype.postRender.call(this)},r})(us);const O$=T$;var P$=function(){return{stylePrefix:"comp-",components:[],draggableComponents:!0,disableTextInnerChilds:!1,processor:void 0,useFrameDoc:!1,voidElements:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]}};const A$=P$;var M$=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),vv=function(){return vv=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},vv.apply(this,arguments)},I$=(function(a){M$(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return vv(vv({},a.prototype.defaults),{tagName:"",droppable:!1,layerable:!1,selectable:!1,editable:!0})},enumerable:!1,configurable:!0}),r.prototype.toHTML=function(){var e=this.content,t=this.parent();return t?.is("script")?e:this.__escapeContent(e)},r.prototype.__escapeContent=function(e){return(0,Zt.escapeNodeContent)(e)},r.isComponent=function(e){var t;if(e.nodeType===3)return{type:"textnode",content:(t=e.textContent)!==null&&t!==void 0?t:""}},r})($s);const K3=I$;var R$=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),iC=function(){return iC=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},iC.apply(this,arguments)},L$=(function(a){R$(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return iC({},a.prototype.defaults)},enumerable:!1,configurable:!0}),r.prototype.toHTML=function(){return"<!--".concat(this.content,"-->")},r.isComponent=function(e){var t;if(e.nodeType==8)return{type:"comment",content:(t=e.textContent)!==null&&t!==void 0?t:""}},r})(K3);const D$=L$;var F$=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),bv=function(){return bv=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},bv.apply(this,arguments)},Tj="iframe",B$=(function(a){F$(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return bv(bv({},a.prototype.defaults),{type:Tj,tagName:Tj,droppable:!1,resizable:!0,traits:["id","title","src"],attributes:{frameborder:"0"}})},enumerable:!1,configurable:!0}),r.isComponent=function(e){return(0,Zt.toLowerCase)(e.tagName)===Tj},r})($s);const z$=B$;var U$=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),wv=function(){return wv=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},wv.apply(this,arguments)},_5='xmlns="http://www.w3.org/2000/svg" width="100" viewBox="0 0 24 24" style="fill: rgba(0,0,0,0.15); transform: scale(0.75)"',$$=(function(a){U$(r,a);function r(e,t){e===void 0&&(e={});var s=a.call(this,e,t)||this,o=s.get("attributes").src;return o&&(0,Zt.buildBase64UrlFromSvg)((0,Ce.result)(s,"defaults").src)!==o&&s.set("src",o,{silent:!0}),s}return Object.defineProperty(r.prototype,"defaults",{get:function(){return wv(wv({},a.prototype.defaults),{type:"image",tagName:"img",void:!0,droppable:0,editable:1,highlightable:0,resizable:{ratioDefault:1},traits:["alt"],src:"<svg ".concat(_5,`>
        <path d="M8.5 13.5l2.5 3 3.5-4.5 4.5 6H5m16 1V5a2 2 0 0 0-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2z"></path>
      </svg>`),fallback:"<svg ".concat(_5,`>
        <path d="M2.28 3L1 4.27l2 2V19c0 1.1.9 2 2 2h12.73l2 2L21 21.72 2.28 3m2.55 0L21 19.17V5a2 2 0 0 0-2-2H4.83M8.5 13.5l2.5 3 1-1.25L14.73 18H5l3.5-4.5z"></path>
      </svg>`),file:""})},enumerable:!1,configurable:!0}),r.prototype.initToolbar=function(){a.prototype.initToolbar.call(this);var e=this.em;if(e){var t=e.Commands,s="image-editor";if(t.has(s)){for(var o=!1,i=this.get("toolbar"),l=0;l<i.length;l++)if(i[l].command==="image-editor"){o=!0;break}o||(i.push({attributes:{class:"fa fa-pencil"},command:s}),this.set("toolbar",i))}}},r.prototype.getAttrToHTML=function(){var e=a.prototype.getAttrToHTML.call(this),t=this.getSrcResult();return t&&(e.src=t),e},r.prototype.getSrcResult=function(e){e===void 0&&(e={});var t=this.get(e.fallback?"fallback":"src")||"",s=t;return t&&t.substr(0,4)==="<svg"&&(s=(0,Zt.buildBase64UrlFromSvg)(t)),s},r.prototype.isDefaultSrc=function(){var e=this.get("src"),t=(0,Ce.result)(this,"defaults").src;return e===t||e===(0,Zt.buildBase64UrlFromSvg)(t)},r.prototype.toJSON=function(e){var t=a.prototype.toJSON.call(this,e),s=t.attributes;return s&&t.src===s.src&&delete t.src,t},r.prototype.parseUri=function(e){var t={},s=function(o){o===void 0&&(o="");for(var i={},l=o.substring(1).split("&"),c=0;c<l.length;c++){var d=l[c].split("="),h=decodeURIComponent(d[0]);h&&(i[h]=decodeURIComponent(d[1]||""))}return i};if((0,Zt.hasWin)())t=document.createElement("a"),t.href=e;else if(typeof URL<"u")try{t=new URL(e)}catch{}return{hostname:t.hostname||"",pathname:t.pathname||"",protocol:t.protocol||"",search:t.search||"",hash:t.hash||"",port:t.port||"",query:s(t.search)}},r.isComponent=function(e){return(0,Zt.toLowerCase)(e.tagName)==="img"},r})($s);const LS=$$;var V$=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),jv=function(){return jv=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},jv.apply(this,arguments)},W$=(function(a){V$(r,a);function r(e,t){e===void 0&&(e={});var s=a.call(this,e,t)||this;return s.__checkInnerChilds(),s}return Object.defineProperty(r.prototype,"defaults",{get:function(){return jv(jv({},a.prototype.defaults),{type:"text",droppable:!1,editable:!0})},enumerable:!1,configurable:!0}),r.prototype.__checkInnerChilds=function(){var e=this.em.Components.config.disableTextInnerChilds;if(e){var t=function(s){s.isInstanceOf("textnode")||s.set({locked:!0,layerable:!1})};(0,Ce.isFunction)(e)?this.forEachChild(function(s){e(s)&&t(s)}):this.forEachChild(t)}},r})($s);const DS=W$;var H$=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Cv=function(){return Cv=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Cv.apply(this,arguments)},Oj="label",q$=(function(a){H$(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return Cv(Cv({},a.prototype.defaults),{type:Oj,tagName:Oj,traits:["id","title","for"]})},enumerable:!1,configurable:!0}),r.isComponent=function(e){return(0,Zt.toLowerCase)(e.tagName)===Oj},r})(DS);const G$=q$;var K$=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Sv=function(){return Sv=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Sv.apply(this,arguments)},E5="link",Y$=(function(a){K$(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return Sv(Sv({},a.prototype.defaults),{type:E5,tagName:"a",traits:["title","href","target"]})},enumerable:!1,configurable:!0}),r.isComponent=function(e,t){t===void 0&&(t={});var s;if((0,Zt.toLowerCase)(e.tagName)==="a"){var o=t.textTags||[];s={type:E5,editable:!1};var i=e.childNodes,l=i.length;l||delete s.editable,(0,Ce.forEach)(i,function(c){var d=c.tagName;(c.nodeType==3&&c.textContent.trim()!==""||d&&o.indexOf((0,Zt.toLowerCase)(d))>=0)&&delete s.editable})}return s},r})(DS);const Z$=Y$;var X$=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Nv=function(){return Nv=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Nv.apply(this,arguments)},Q$=(function(a){X$(r,a);function r(e,t){e===void 0&&(e={});var s=a.call(this,e,t)||this;return s.get("src")?s.parseFromSrc():s.updateSrc(),s.listenTo(s,"change:address change:zoom change:mapType",s.updateSrc),s}return Object.defineProperty(r.prototype,"defaults",{get:function(){var e=a.prototype.defaults;return Nv(Nv({},e),{type:"map",src:"",void:!1,mapUrl:"https://maps.google.com/maps",tagName:"iframe",mapType:"q",address:"",zoom:"1",attributes:{frameborder:0},toolbar:e.toolbar,traits:[{label:"Address",name:"address",placeholder:"eg. London, UK",changeProp:!0},{type:"select",label:"Map type",name:"mapType",changeProp:!0,options:[{id:"q",label:"Roadmap"},{id:"w",label:"Satellite"}]},{label:"Zoom",name:"zoom",type:"range",min:1,max:20,changeProp:!0}]})},enumerable:!1,configurable:!0}),r.prototype.updateSrc=function(){this.set("src",this.getMapUrl())},r.prototype.getMapUrl=function(){var e=this.get("address"),t=this.get("zoom"),s=this.get("mapType");e=e?"&q="+e:"",t=t?"&z="+t:"",s=s?"&t="+s:"";var o=this.get("mapUrl")+"?"+e+t+s;return o+="&output=embed",o},r.prototype.parseFromSrc=function(){var e=this.parseUri(this.get("src")),t=e.query;t.q&&this.set("address",t.q),t.z&&this.set("zoom",t.z),t.t&&this.set("mapType",t.t)},r.isComponent=function(e){if((0,Zt.toLowerCase)(e.tagName)=="iframe"&&/maps\.google\.com/.test(e.src))return{type:"map",src:e.src}},r})(LS);const J$=Q$;var eV=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),kv=function(){return kv=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},kv.apply(this,arguments)},Pj="script",tV=(function(a){eV(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return kv(kv({},a.prototype.defaults),{type:Pj,tagName:Pj,droppable:!1,draggable:!1,layerable:!1,highlightable:!1})},enumerable:!1,configurable:!0}),r.isComponent=function(e){return(0,Zt.toLowerCase)(e.tagName)===Pj},r})($s);const rV=tV;var nV=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),_v=function(){return _v=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},_v.apply(this,arguments)},Aj="svg",aV=(function(a){nV(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return _v(_v({},a.prototype.defaults),{type:Aj,tagName:Aj,highlightable:!1,resizable:{ratioDefault:!0}})},enumerable:!1,configurable:!0}),r.prototype.getName=function(){var e=this.get("tagName"),t=this.get("custom-name");return e=e.charAt(0).toUpperCase()+e.slice(1),t||e},r.isComponent=function(e){return(0,Zt.toLowerCase)(e.tagName)===Aj},r})($s);const Y3=aV;var sV=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Ev=function(){return Ev=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Ev.apply(this,arguments)},oV=(function(a){sV(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return Ev(Ev({},a.prototype.defaults),{selectable:!1,hoverable:!1,layerable:!1})},enumerable:!1,configurable:!0}),r.isComponent=function(e,t){return t===void 0&&(t={}),!!t.inSvg},r})(Y3);const iV=oV;var lV=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Tv=function(){return Tv=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Tv.apply(this,arguments)},Mj="table",cV=(function(a){lV(r,a);function r(e,t){e===void 0&&(e={});var s=a.call(this,e,t)||this,o=s.get("components");return!o.length&&o.add({type:"tbody"}),s}return Object.defineProperty(r.prototype,"defaults",{get:function(){return Tv(Tv({},a.prototype.defaults),{type:Mj,tagName:Mj,droppable:["tbody","thead","tfoot"]})},enumerable:!1,configurable:!0}),r.isComponent=function(e){return(0,Zt.toLowerCase)(e.tagName)===Mj},r})($s);const dV=cV;var uV=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Ov=function(){return Ov=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Ov.apply(this,arguments)},Ij="tbody",fV=(function(a){uV(r,a);function r(e,t){e===void 0&&(e={});var s=a.call(this,e,t)||this,o=s.get("components"),i=s.get("columns"),l=s.get("rows");if(!o.length){for(var c=[];l--;){for(var d=[],h=i;h--;)d.push({type:"cell",classes:["cell"]});c.push({type:"row",classes:["row"],components:d})}o.add(c)}return s}return Object.defineProperty(r.prototype,"defaults",{get:function(){return Ov(Ov({},a.prototype.defaults),{type:Ij,tagName:Ij,draggable:["table"],droppable:["tr"],columns:1,rows:1})},enumerable:!1,configurable:!0}),r.isComponent=function(e){return(0,Zt.toLowerCase)(e.tagName)===Ij},r})($s);const FS=fV;var pV=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Pv=function(){return Pv=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Pv.apply(this,arguments)},hV=(function(a){pV(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return Pv(Pv({},a.prototype.defaults),{type:"cell",tagName:"td",draggable:["tr"]})},enumerable:!1,configurable:!0}),r.isComponent=function(e){return["td","th"].indexOf((0,Zt.toLowerCase)(e.tagName))>=0},r})($s);const mV=hV;var gV=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Av=function(){return Av=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Av.apply(this,arguments)},Rj="tfoot",yV=(function(a){gV(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return Av(Av({},a.prototype.defaults),{type:Rj,tagName:Rj})},enumerable:!1,configurable:!0}),r.isComponent=function(e){return(0,Zt.toLowerCase)(e.tagName)===Rj},r})(FS);const xV=yV;var vV=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Mv=function(){return Mv=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Mv.apply(this,arguments)},Lj="thead",bV=(function(a){vV(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return Mv(Mv({},a.prototype.defaults),{type:Lj,tagName:Lj})},enumerable:!1,configurable:!0}),r.isComponent=function(e){return(0,Zt.toLowerCase)(e.tagName)===Lj},r})(FS);const wV=bV;var jV=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Iv=function(){return Iv=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Iv.apply(this,arguments)},T5="tr",CV=(function(a){jV(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return Iv(Iv({},a.prototype.defaults),{tagName:T5,draggable:["thead","tbody","tfoot"],droppable:["th","td"]})},enumerable:!1,configurable:!0}),r.isComponent=function(e){return(0,Zt.toLowerCase)(e.tagName)===T5},r})($s);const SV=CV;var NV=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Rv=function(){return Rv=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Rv.apply(this,arguments)},Dj="video",rh="yt",nh="vi",ah="ytnc",O5="so",Fj=function(a){return a&&a!=="0"},kV=(function(a){NV(r,a);function r(e,t){e===void 0&&(e={});var s=a.call(this,e,t)||this;return s.get("src")&&s.parseFromSrc(),s.updatePropsFromAttr(),s.updateTraits(),s.on("change:provider",s.updateTraits),s.on("change:videoId change:provider",s.updateSrc),s}return Object.defineProperty(r.prototype,"defaults",{get:function(){return Rv(Rv({},a.prototype.defaults),{type:Dj,tagName:Dj,videoId:"",void:!1,provider:O5,ytUrl:"https://www.youtube.com/embed/",ytncUrl:"https://www.youtube-nocookie.com/embed/",viUrl:"https://player.vimeo.com/video/",loop:!1,poster:"",muted:!1,autoplay:!1,controls:!0,color:"",list:"",src:"",rel:1,modestbranding:0,sources:[],attributes:{allowfullscreen:"allowfullscreen"}})},enumerable:!1,configurable:!0}),r.prototype.updatePropsFromAttr=function(){if(this.get("provider")===O5){var e=this.get("attributes"),t=e.controls,s=e.autoplay,o=e.loop,i=e.muted,l={};(0,Zt.isDef)(t)&&(l.controls=!!t),(0,Zt.isDef)(s)&&(l.autoplay=!!s),(0,Zt.isDef)(o)&&(l.loop=!!o),(0,Zt.isDef)(i)&&(l.muted=!!i),(0,Zt.isEmptyObj)(l)||this.set(l)}},r.prototype.updateTraits=function(){var e=this.em,t=this.get("provider"),s="iframe",o;switch(t){case rh:case ah:o=this.getYoutubeTraits();break;case nh:o=this.getVimeoTraits();break;default:s="video",o=this.getSourceTraits()}this.set({tagName:s},{silent:!0}),this.set({traits:o}),e.get("ready")&&e.trigger("component:toggled")},r.prototype.parseFromSrc=function(){var e=this.get("provider"),t=this.parseUri(this.get("src")),s=t.query;switch(e){case rh:case ah:case nh:this.set("videoId",t.pathname.split("/").pop()),s.list&&this.set("list",s.list),Fj(s.autoplay)&&this.set("autoplay",!0),Fj(s.loop)&&this.set("loop",!0),parseInt(s.controls)===0&&this.set("controls",!1),Fj(s.color)&&this.set("color",s.color),s.rel==="0"&&this.set("rel",0),s.modestbranding==="1"&&this.set("modestbranding",1),s.muted==="1"&&this.set("muted",!0);break}},r.prototype.updateSrc=function(){var e=this.get("provider"),t="";switch(e){case rh:t=this.getYoutubeSrc();break;case ah:t=this.getYoutubeNoCookieSrc();break;case nh:t=this.getVimeoSrc();break}this.set({src:t})},r.prototype.getAttrToHTML=function(){var e=a.prototype.getAttrToHTML.call(this),t=this.get("provider");switch(t){case rh:case ah:case nh:break;default:e.loop=!!this.get("loop"),e.autoplay=!!this.get("autoplay"),e.controls=!!this.get("controls"),e.muted=!!this.get("muted")}return e},r.prototype.getProviderTrait=function(){return{type:"select",label:"Provider",name:"provider",changeProp:!0,options:[{value:"so",name:"HTML5 Source"},{value:rh,name:"Youtube"},{value:ah,name:"Youtube (no cookie)"},{value:nh,name:"Vimeo"}]}},r.prototype.getSourceTraits=function(){return[this.getProviderTrait(),{label:"Source",name:"src",placeholder:"eg. ./media/video.mp4",changeProp:!0},{label:"Poster",name:"poster",placeholder:"eg. ./media/image.jpg"},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait(),this.getMutedTrait()]},r.prototype.getYoutubeTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. jNQXAC9IVRw",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait(),{type:"checkbox",label:"Related",name:"rel",changeProp:!0},{type:"checkbox",label:"Modest",name:"modestbranding",changeProp:!0},this.getMutedTrait()]},r.prototype.getVimeoTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. 123456789",changeProp:!0},{label:"Color",name:"color",placeholder:"eg. FF0000",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait(),this.getMutedTrait()]},r.prototype.getAutoplayTrait=function(){return{type:"checkbox",label:"Autoplay",name:"autoplay",changeProp:!0}},r.prototype.getLoopTrait=function(){return{type:"checkbox",label:"Loop",name:"loop",changeProp:!0}},r.prototype.getControlsTrait=function(){return{type:"checkbox",label:"Controls",name:"controls",changeProp:!0}},r.prototype.getMutedTrait=function(){return{type:"checkbox",label:"Muted",name:"muted",changeProp:!0}},r.prototype.getYoutubeSrc=function(){var e=this.get("videoId"),t=this.get("ytUrl"),s=this.get("list");return t+=e+(e.indexOf("?")<0?"?":""),t+=s?"&list=".concat(s):"",t+=this.get("autoplay")?"&autoplay=1":"",t+=this.get("muted")?"&mute=1":"",t+=this.get("controls")?"":"&controls=0&showinfo=0",t+=this.get("loop")?"&loop=1&playlist=".concat(e):"",t+=this.get("rel")?"":"&rel=0",t+=this.get("modestbranding")?"&modestbranding=1":"",t},r.prototype.getYoutubeNoCookieSrc=function(){var e=this.getYoutubeSrc();return e=e.replace(this.get("ytUrl"),this.get("ytncUrl")),e},r.prototype.getVimeoSrc=function(){var e=this.get("viUrl");return e+=this.get("videoId")+"?",e+=this.get("autoplay")?"&autoplay=1":"",e+=this.get("muted")?"&muted=1":"",e+=this.get("loop")?"&loop=1":"",e+=this.get("controls")?"":"&title=0&portrait=0&badge=0",e+=this.get("color")?"&color="+this.get("color"):"",e},r.isComponent=function(e){var t=e.tagName,s=e.src,o=/youtube\.com\/embed/.test(s),i=/youtube-nocookie\.com\/embed/.test(s),l=/player\.vimeo\.com\/video/.test(s),c=o||i||l;if((0,Zt.toLowerCase)(t)==Dj||(0,Zt.toLowerCase)(t)=="iframe"&&c){var d={type:"video"};return s&&(d.src=s),c&&(o?d.provider=rh:i?d.provider=ah:l&&(d.provider=nh)),d}},r})(LS);const _V=kV;var EV=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),xh=function(){return xh=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},xh.apply(this,arguments)},TV=(function(a){EV(r,a);function r(e,t){e===void 0&&(e={});var s=a.call(this,e,t)||this;s._resolverCurrentItem=0,s._isWatchingCollectionStateMap=!1;var o=s.dataResolverProps;return o&&(s.onDataSourceChange(),s.syncComponentsCollectionState()),s}return Object.defineProperty(r.prototype,"defaults",{get:function(){return xh(xh({},a.prototype.defaults),{dataResolver:null,tagName:"body",removable:!1,copyable:!1,draggable:!1,components:[],traits:[],doctype:"",head:null,docEl:null,stylable:["background","background-color","background-image","background-repeat","background-attachment","background-position","background-size"]})},enumerable:!1,configurable:!0}),r.prototype.preInit=function(){var e,t,s=this,o=s.opt,i=s.attributes,l=(e=this.em)===null||e===void 0?void 0:e.Components,c=(t=l?.getType(Rh))===null||t===void 0?void 0:t.model,d=l?.getType("default").model;if(c){var h=i.head,m=i.docEl;this.set({head:h&&h instanceof $s?h:new c(xh({},h),o),docEl:m&&m instanceof $s?m:new d(xh({tagName:"html"},m),o)},{silent:!0})}},Object.defineProperty(r.prototype,"head",{get:function(){return this.get("head")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"docEl",{get:function(){return this.get("docEl")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"doctype",{get:function(){return this.attributes.doctype||""},enumerable:!1,configurable:!0}),r.prototype.clone=function(e){var t=a.prototype.clone.call(this,e);return t.set("head",this.get("head").clone(e)),t.set("docEl",this.get("docEl").clone(e)),t},r.prototype.toHTML=function(e){e===void 0&&(e={});var t=this.doctype,s=(0,Ce.isUndefined)(e.asDocument)?!!t:e.asDocument,o=this,i=o.head,l=o.docEl,c=a.prototype.toHTML.call(this,e),d=s&&i?.toHTML(e)||"",h=s&&(0,Ir.kk)(l?.getAttrToHTML())||"",m=h?" ".concat(h):"";return s?"".concat(t,"<html").concat(m,">").concat(d).concat(c,"</html>"):c},r.prototype.onCollectionsStateMapUpdate=function(e){var t=this.head;a.prototype.onCollectionsStateMapUpdate.call(this,e),t.onCollectionsStateMapUpdate(e)},r.prototype.syncComponentsCollectionState=function(){a.prototype.syncComponentsCollectionState.call(this),this.head.syncComponentsCollectionState()},r.prototype.syncOnComponentChange=function(e,t,s){var o=this.getCollectionsStateMap();this.collectionsStateMap=o,a.prototype.syncOnComponentChange.call(this,e,t,s),this.onCollectionsStateMapUpdate(o)},Object.defineProperty(r.prototype,"resolverCurrentItem",{get:function(){return this._resolverCurrentItem},set:function(e){this._resolverCurrentItem=e,this.onCollectionsStateMapUpdate(this.getCollectionsStateMap())},enumerable:!1,configurable:!0}),r.prototype.setResolverCurrentItem=function(e){this.resolverCurrentItem=e},r.prototype.onDataSourceChange=function(){this.onCollectionsStateMapUpdate(this.getCollectionsStateMap())},r.prototype.listenToPropsChange=function(){var e=this;this.on("change:dataResolver",function(t,s){var o=!(0,Ce.isUndefined)(s);o&&!e._isWatchingCollectionStateMap?(e._isWatchingCollectionStateMap=!0,e.syncComponentsCollectionState(),e.onCollectionsStateMapUpdate(e.getCollectionsStateMap()),e.listenToDataSource()):!o&&e._isWatchingCollectionStateMap&&(e._isWatchingCollectionStateMap=!1,e.stopSyncComponentCollectionState())}),this.listenToDataSource()},r.prototype.getCollectionsStateMap=function(){var e,t=this,s=t.dataResolverPath,o=t.resolverCurrentItem,i=t.em,l=i.DataSources;if(!s)return{};var c=gy.rootData,d=this.getDataSourceItems(),h=(0,Ce.isNumber)(o)?d[o]:(0,Ce.isString)(o)?l.getValue("".concat(s,".").concat(o)):d;return e={},e[c]={collectionId:c,currentItem:h},e},r.prototype.__postAdd=function(){var e,t=(e=this.em)===null||e===void 0?void 0:e.UndoManager;return!this.__hasUm&&t?.add(this),a.prototype.__postAdd.call(this)},r.prototype.__postRemove=function(){var e,t=(e=this.em)===null||e===void 0?void 0:e.UndoManager;return t?.remove(this),a.prototype.__postRemove.call(this)},r.isComponent=function(){return!1},r})(q3);const OV=TV;var PV=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Lv=function(){return Lv=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Lv.apply(this,arguments)},AV=(function(a){PV(r,a);function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var s=a.apply(this,e)||this;s.refreshDbn=(0,Ce.debounce)(function(){return s.refresh()},0);var o=s.events;return s.on(o.update,s.onUpdate),s.on(o.updateInside,s.onUpdateDeep),s}return r.prototype.removeChildren=function(e,t,s){var o;s===void 0&&(s={}),a.prototype.removeChildren.call(this,e,t,s),(o=_i(e))===null||o===void 0||o.forEach(function(i){return Fb(i,{skipRefs:!0})}),this.__trgEvent(this.events.symbolMainRemove,{component:e})},r.prototype.onAdd=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];a.prototype.onAdd.apply(this,e);var s=e[0];this.__trgEvent(this.events.symbolMainAdd,{component:s})},r.prototype.onUpdate=function(e){this.__trgEvent(this.events.symbolMainUpdate,e)},r.prototype.onUpdateDeep=function(e){this.__trgEvent(this.events.symbolMainUpdateDeep,e)},r.prototype.refresh=function(){var e=this,t=e.em,s=e.events;t.trigger(s.symbol)},r.prototype.__trgEvent=function(e,t,s){s===void 0&&(s=!1);var o=this,i=o.em,l=o.events,c=s?l.symbolInstance:l.symbolMain;i.trigger(e,t),i.trigger(c,Lv(Lv({},t),{event:e})),this.refreshDbn()},r})(by);const MV=AV;var IV=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),RV=(function(a){IV(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype._setAttributes=function(){},r.prototype.renderAttributes=function(){},r.prototype.updateStatus=function(){},r.prototype.updateClasses=function(){},r.prototype.setAttribute=function(){},r.prototype.updateAttributes=function(){},r.prototype.initClasses=function(){},r.prototype.initComponents=function(){},r.prototype.delegateEvents=function(){return this},r.prototype._createElement=function(){return document.createTextNode("")},r.prototype.render=function(){var e=this,t=e.model,s=e.el;return t.opt.temporary?this:(s.textContent=t.content,this)},r})(us);const Z3=RV;var LV=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),DV=(function(a){LV(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype._createElement=function(){return document.createComment(this.model.content)},r})(Z3);const FV=DV;var BV=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),zV=(function(a){BV(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.tagName=function(){return"div"},r.prototype.initialize=function(e){a.prototype.initialize.call(this,e),this.listenTo(this.model,"change:attributes:src",this.updateSrc)},r.prototype.updateSrc=function(){var e=(0,Ir.I6)(this.el,"iframe")[0];e&&(0,Ir.X6)(e,{src:this.__getSrc()})},r.prototype.render=function(){a.prototype.render.call(this);var e=(0,Ir.a_)("iframe",{class:"".concat(this.ppfx,"no-pointer"),style:"width: 100%; height: 100%; border: none",src:this.__getSrc()});return this.el.appendChild(e),this},r.prototype.__getSrc=function(){return this.model.getAttributes().src||""},r})(us);const UV=zV;var $V=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),VV=(function(a){$V(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.tagName=function(){return"img"},r.prototype.events=function(){return{dblclick:"onActive",click:"initResize",error:"onError",load:"onLoad",dragstart:"noDrag"}},r.prototype.initialize=function(e){a.prototype.initialize.call(this,e),this.listenTo(this.model,"change:src",this.updateSrc),this.classEmpty="".concat(this.ppfx,"plh-image"),this.fetchFile()},r.prototype.fetchFile=function(){if(!this.modelOpt.temporary){var e=this,t=e.model,s=e.em,o=t.get("file");if(o&&s){var i=s.Assets.FileUploader();i?.uploadFile({dataTransfer:{files:[o]}},function(l){var c=l&&l.data&&l.data[0],d=c&&((0,Ce.isString)(c)?c:c.src);d&&t.set({src:d})},{componentView:this,file:o}),t.set("file","")}}},r.prototype.updateSrc=function(){var e=this.model;e.addAttributes({src:e.getSrcResult()}),this.updateClasses()},r.prototype.updateClasses=function(){a.prototype.updateClasses.call(this);var e=this,t=e.el,s=e.classEmpty,o=e.model,i=o.getSrcResult()&&!o.isDefaultSrc(),l=i?"remove":"add";t.classList[l](s)},r.prototype.onActive=function(e){e?.stopPropagation();var t=this,s=t.em,o=t.model,i=s?.Assets;i&&o.get("editable")&&i.open({select:function(l,c){o.set({src:l.getSrc()}),c&&i.close()},target:o,types:["image"],accept:"image/*"})},r.prototype.onError=function(){var e=this,t=e.model,s=e.el,o=t.getSrcResult({fallback:!0});o&&(s.srcset&&(s.srcset=""),s.src=o)},r.prototype.onLoad=function(){this.em.Canvas.refresh({all:!0})},r.prototype.noDrag=function(e){return e.preventDefault(),!1},r.prototype.render=function(){if(this.renderAttributes(),this.modelOpt.temporary)return this;this.updateSrc();var e=this,t=e.$el,s=e.model,o=t.attr("class")||"";return!s.get("src")&&t.attr("class","".concat(o," ").concat(this.classEmpty).trim()),this.postRender(),this},r})(us);const BS=VV;var WV=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Vf=function(){return Vf=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Vf.apply(this,arguments)},p0=function(a,r,e,t){function s(o){return o instanceof e?o:new e(function(i){i(o)})}return new(e||(e=Promise))(function(o,i){function l(h){try{d(t.next(h))}catch(m){i(m)}}function c(h){try{d(t.throw(h))}catch(m){i(m)}}function d(h){h.done?o(h.value):s(h.value).then(l,c)}d((t=t.apply(a,r||[])).next())})},h0=function(a,r){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},t,s,o,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(d){return function(h){return c([d,h])}}function c(d){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,d[0]&&(e=0)),e;)try{if(t=1,s&&(o=d[0]&2?s.return:d[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,d[1])).done)return o;switch(s=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return e.label++,{value:d[1],done:!1};case 5:e.label++,s=d[1],d=[0];continue;case 7:d=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){e=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){e.label=d[1];break}if(d[0]===6&&e.label<o[1]){e.label=o[1],o=d;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(d);break}o[2]&&e.ops.pop(),e.trys.pop();continue}d=r.call(a,e)}catch(h){d=[6,h],s=0}finally{t=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},HV=(function(a){WV(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.events=function(){return{dblclick:"onActive",input:"onInput"}},r.prototype.initialize=function(e){a.prototype.initialize.call(this,e),(0,Ce.bindAll)(this,"disableEditing","onDisable");var t=this.model,s=this.em;this.listenTo(t,"focus",this.onActive),this.listenTo(t,"change:content",this.updateContentText),this.listenTo(t,"sync:content",this.syncContent),this.rte=s?.RichTextEditor},r.prototype.updateContentText=function(e,t,s){s===void 0&&(s={}),!s.fromDisable&&this.disableEditing()},r.prototype.canActivate=function(){var e=this,t=e.model,s=e.rteEnabled,o=e.em,i=o?.getEditing(),l=i===t,c=!0,d=!1,h;if((s||!t.get("editable")||l||(d=t.isChildOf("text")))&&(c=!1,d&&!t.get("textable"))){for(var m=t.parent();m&&!m.isInstanceOf("text");)m=m.parent();m&&m.get("editable")?h=m:c=!0}return{result:c,delegate:h}},r.prototype.onActive=function(e){return p0(this,void 0,void 0,function(){var t,s,o,i,l,c,d,h,m,y,x,b;return h0(this,function(v){switch(v.label){case 0:return t=this,s=t.rte,o=t.em,i=this.canActivate(),l=i.result,c=i.delegate,l?((b=e?.stopPropagation)===null||b===void 0||b.call(e),d=this,[4,this.getContent()]):(c&&((x=e?.stopPropagation)===null||x===void 0||x.call(e),o.setSelected(c),c.trigger("active",e)),[2]);case 1:if(d.lastContent=v.sent(),!s)return[3,5];v.label=2;case 2:return v.trys.push([2,4,,5]),h=this,m=this,[4,s.enable(h,this.activeRte,{event:e,view:h})];case 3:return m.activeRte=v.sent(),[3,5];case 4:return y=v.sent(),o.logError(y),[3,5];case 5:return this.toggleEvents(!0),[2]}})})},r.prototype.onDisable=function(e){this.disableEditing(e)},r.prototype.disableEditing=function(){return p0(this,arguments,void 0,function(e){var t,s,o,i,l,c,d,h,m;return e===void 0&&(e={}),h0(this,function(y){switch(y.label){case 0:return t=this,s=t.model,o=t.rte,i=t.activeRte,l=t.em,c=s&&s.get("editable"),o?(d={},[4,this.getContent()]):[3,7];case 1:h=y.sent(),y.label=2;case 2:return y.trys.push([2,4,,5]),[4,o.disable(this,i,e)];case 3:return d=y.sent(),[3,5];case 4:return m=y.sent(),l.logError(m),[3,5];case 5:return c&&(h!==this.lastContent||d.forceSync)?[4,this.syncContent(Vf(Vf({},e),{content:h}))]:[3,7];case 6:y.sent(),this.lastContent="",y.label=7;case 7:return this.toggleEvents(),[2]}})})},r.prototype.getContent=function(){return p0(this,void 0,void 0,function(){var e,t,s,o;return h0(this,function(i){switch(i.label){case 0:return e=this,t=e.rte,s=e.activeRte,o="",t?[4,t.getContent(this,s)]:[3,2];case 1:o=i.sent(),i.label=2;case 2:return[2,o]}})})},r.prototype.syncContent=function(){return p0(this,arguments,void 0,function(e){var t,s,o,i,l,c,d,h,m;return e===void 0&&(e={}),h0(this,function(y){switch(y.label){case 0:return t=this,s=t.model,o=t.rte,i=t.rteEnabled,!i&&!e.force?[2]:(m=e.content)!==null&&m!==void 0?(c=m,[3,3]):[3,1];case 1:return[4,this.getContent()];case 2:c=y.sent(),y.label=3;case 3:return l=c,d=s.components(),h=Vf({fromDisable:1},e),s.set("content","",h),o?.customRte&&!o.customRte.parseContent?(d.length&&d.reset(void 0,Vf(Vf({},e),{keepIds:mh(d)})),s.set("content",l,h)):d.resetFromString(l,e),[2]}})})},r.prototype.insertComponent=function(e,t){var s;t===void 0&&(t={});var o=this,i=o.model,l=o.el,c=l.ownerDocument,d=c.getSelection();if(d?.rangeCount){var h=d.getRangeAt(0),m=h.startContainer,y=h.startOffset,x=(0,Zt.getComponentModel)(m),b=[];if(x&&(!((s=x.is)===null||s===void 0)&&s.call(x,"textnode"))){var v=x.collection;v.forEach(function(k){if(k===x){var N="textnode",P=t.useDomContent?m.textContent||"":k.content;b.push({type:N,content:P.slice(0,y)}),b.push(e),b.push({type:N,content:P.slice(y)})}else b.push(k)});var j=b.filter(Boolean),S=j.indexOf(e);return v.reset(j,t),v.at(S)}}return i.append(e,t)},r.prototype.onInput=function(){var e=this.model,t=[ja.I.update,ja.I.input];t.forEach(function(s){return e.emitWithEditor(s,e)})},r.prototype.disablePropagation=function(e){e.stopPropagation()},r.prototype.toggleEvents=function(e){var t=this,s=t.em,o=t.model,i=t.$el,l={on:Ir.on,off:Ir.AU},c=e?"on":"off";s.setEditing(e?this:!1),this.rteEnabled=!!e;var d=[this.el.ownerDocument,document];if(l.off(d,"mousedown",this.onDisable),l[c](d,"mousedown",this.onDisable),s[c]("toolbar:run:before",this.onDisable),o){var h=s.RichTextEditor.events;o[c]("removed",this.onDisable),o.trigger(e?h.enable:h.disable)}if(i?.off("mousedown",this.disablePropagation),i&&i[c]("mousedown",this.disablePropagation),this.config.draggableComponents)for(var m=this.el;m;)m.draggable=!e,m=m.parentNode,m&&m.tagName=="BODY"&&(m=0)},r})(us);const X3=HV;var qV=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),GV=(function(a){qV(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.render=function(){return a.prototype.render.call(this),this.el.addEventListener("click",this.prevDef,!0),this},r})(X3);const Q3=GV;var KV=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),YV=(function(a){KV(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r})(Q3);const ZV=YV;var XV=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),QV=(function(a){XV(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.tagName=function(){return"div"},r.prototype.events=function(){return{}},r.prototype.initialize=function(e){a.prototype.initialize.call(this,e),this.classEmpty=this.ppfx+"plh-map"},r.prototype.updateSrc=function(){this.getIframe().src=this.model.get("src")},r.prototype.getIframe=function(){if(!this.iframe){var e=document.createElement("iframe");e.src=this.model.get("src"),e.frameBorder="0",e.style.height="100%",e.style.width="100%",e.className=this.ppfx+"no-pointer",this.iframe=e}return this.iframe},r.prototype.render=function(){return a.prototype.render.call(this),this.updateClasses(),this.el.appendChild(this.getIframe()),this},r})(BS);const JV=QV;var eW=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),tW=(function(a){eW(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.tagName=function(){return"script"},r.prototype.events=function(){return{}},r})(us);const rW=tW;var nW=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),aW=(function(a){nW(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype._createElement=function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)},r})(us);const P5=aW;var sW=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),oW=(function(a){sW(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r})(us);const iW=oW;var lW=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),cW=(function(a){lW(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r})(us);const dW=cW;var uW=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),fW=(function(a){uW(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r})(us);const pW=fW;var hW=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),mW=(function(a){hW(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r})(us);const gW=mW;var yW=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),xW=(function(a){yW(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r})(us);const vW=xW;var bW=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),wW=(function(a){bW(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.events=function(){return{}},r})(us);const jW=wW;var CW=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),SW=(function(a){CW(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.tagName=function(){return"div"},r.prototype.events=function(){return{}},r.prototype.initialize=function(){us.prototype.initialize.apply(this,arguments);var e=this.model,t=["loop","autoplay","controls","color","rel","modestbranding","poster","muted"],s=t.map(function(o){return"change:".concat(o)}).join(" ");this.listenTo(e,"change:provider",this.updateProvider),this.listenTo(e,"change:src",this.updateSrc),this.listenTo(e,s,this.updateVideo)},r.prototype.updateProvider=function(){var e=this.model.get("provider");this.el.innerHTML="",this.el.appendChild(this.renderByProvider(e))},r.prototype.updateSrc=function(){var e=this,t=e.model,s=e.videoEl;if(s){var o=t.get("provider"),i=t.get("src");switch(o){case"yt":i=t.getYoutubeSrc();break;case"ytnc":i=t.getYoutubeNoCookieSrc();break;case"vi":i=t.getVimeoSrc();break}s.src=i}},r.prototype.updateVideo=function(){var e=this,t=e.model,s=e.videoEl,o=t.get("provider");switch(o){case"yt":case"ytnc":case"vi":t.trigger("change:videoId");break;default:if(s){var i=s;i.loop=t.get("loop"),i.autoplay=t.get("autoplay"),i.controls=t.get("controls"),i.poster=t.get("poster"),i.muted=t.get("muted")}}},r.prototype.renderByProvider=function(e){var t;switch(e){case"yt":t=this.renderYoutube();break;case"ytnc":t=this.renderYoutubeNoCookie();break;case"vi":t=this.renderVimeo();break;default:t=this.renderSource()}return this.videoEl=t,t},r.prototype.renderSource=function(){var e=document.createElement("video");return e.src=this.model.get("src"),this.initVideoEl(e),e},r.prototype.renderYoutube=function(){var e=document.createElement("iframe");return e.src=this.model.getYoutubeSrc(),e.frameBorder="0",e.setAttribute("allowfullscreen","true"),this.initVideoEl(e),e},r.prototype.renderYoutubeNoCookie=function(){var e=document.createElement("iframe");return e.src=this.model.getYoutubeNoCookieSrc(),e.frameBorder="0",e.setAttribute("allowfullscreen","true"),this.initVideoEl(e),e},r.prototype.renderVimeo=function(){var e=document.createElement("iframe");return e.src=this.model.getVimeoSrc(),e.frameBorder="0",e.setAttribute("allowfullscreen","true"),this.initVideoEl(e),e},r.prototype.initVideoEl=function(e){e.className=this.ppfx+"no-pointer",e.style.height="100%",e.style.width="100%"},r.prototype.render=function(){us.prototype.render.apply(this),this.updateClasses();var e=this.model.get("provider");return this.el.appendChild(this.renderByProvider(e)),this.updateVideo(),this},r})(BS);const NW=SW;var kW=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),_W=(function(a){kW(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.tagName=function(){return"div"},r})(us);const EW=_W;var TW=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),bo=function(){return bo=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},bo.apply(this,arguments)},OW=function(a,r){var e={};for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&r.indexOf(t)<0&&(e[t]=a[t]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(a);s<t.length;s++)r.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(a,t[s])&&(e[t[s]]=a[t[s]]);return e},PW=function(a,r,e){if(e||arguments.length===2)for(var t=0,s=r.length,o;t<s;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return a.concat(o||Array.prototype.slice.call(r))},vh;(function(a){a[a.InvalidSource=0]="InvalidSource",a[a.SourceReject=1]="SourceReject",a[a.TargetReject=2]="TargetReject"})(vh||(vh={}));var AW=(function(a){TW(r,a);function r(e){var t=a.call(this,e,"DomComponents",new by(void 0,{em:e}),ja.I,A$())||this;t.componentTypes=[{id:qs.collectionItem,model:_j,view:us},{id:qs.conditionTrue,model:_j,view:us},{id:qs.conditionFalse,model:_j,view:us},{id:qs.collection,model:h$,view:S$},{id:qs.condition,model:e$,view:_$},{id:qs.variable,model:XU,view:O$},{id:"cell",model:mV,view:dW},{id:"row",model:SV,view:vW},{id:"table",model:dV,view:jW},{id:"thead",model:wV,view:gW},{id:"tbody",model:FS,view:iW},{id:"tfoot",model:xV,view:pW},{id:"map",model:J$,view:JV},{id:"link",model:Z$,view:Q3},{id:"label",model:G$,view:ZV},{id:"video",model:_V,view:NW},{id:"image",model:LS,view:BS},{id:"script",model:rV,view:rW},{id:"svg-in",model:iV,view:P5},{id:"svg",model:Y3,view:P5},{id:"iframe",model:z$,view:UV},{id:"comment",model:D$,view:FV},{id:"textnode",model:K3,view:Z3},{id:Rh,model:SU,view:us},{id:"wrapper",model:OV,view:EW},{id:"text",model:DS,view:X3},{id:"default",model:$s,view:us}],t.componentsById={},t.Component=$s,t.Components=by,t.ComponentView=us,t.ComponentsView=G3,t.storageKey="components",t.keySymbols="symbols",t.events=ja.I;var s=t.config;t.symbols=new MV([],{em:e,config:s,domc:t}),e&&(t.config.components=e.config.components||t.config.components);var o=t.config.pStylePrefix;if(o&&(t.config.stylePrefix=o+t.config.stylePrefix),e){e.get("Parser").compTypes=t.componentTypes,e.on("change:componentHovered",t.componentHovered,t);var i=e.get("selected");e.listenTo(i,"add",function(l,c,d){return t.selectAdd(i.getComponent(l),d)}),e.listenTo(i,"remove",function(l,c,d){return t.selectRemove(i.getComponent(l),d)})}return t}return r.prototype.postLoad=function(){var e=this,t=e.em,s=e.symbols,o=t.UndoManager;o.add(s)},r.prototype.load=function(e){var t=this,s=this.loadProjectData(e,{onResult:function(o){var i=t.getWrapper();if(i||(t.em.Pages.add({},{select:!0}),i=t.getWrapper()),(0,Ce.isArray)(o))o.length&&i.components(o);else{var l=o.components,c=l===void 0?[]:l,d=OW(o,["components"]);i.set(d),i.components(c)}}});return this.symbols.reset(e[this.keySymbols]||[]),s},r.prototype.store=function(){var e;return e={},e[this.keySymbols]=this.symbols,e},r.prototype.getComponent=function(){var e=this.em.Pages.getSelected(),t=e?.getMainFrame();return t?.getComponent()},r.prototype.getWrapper=function(){return this.getComponent()},r.prototype.getComponents=function(){var e=this.getWrapper();return e?.components()},r.prototype.addComponent=function(e,t){return t===void 0&&(t={}),this.getComponents().add(e,t)},r.prototype.render=function(){var e;return(e=this.componentView)===null||e===void 0?void 0:e.render().el},r.prototype.clear=function(e){e===void 0&&(e={});var t=this.getComponents();return t?.filter(Boolean).forEach(function(s){return s.remove(e)}),this},r.prototype.setComponents=function(e,t){t===void 0&&(t={}),this.clear(t).addComponent(e,t)},r.prototype.addType=function(e,t){var s=this.em,o=t.model,i=o===void 0?{}:o,l=t.view,c=l===void 0?{}:l,d=t.isComponent,h=t.extend,m=t.extendView,y=t.extendFn,x=y===void 0?[]:y,b=t.extendFnView,v=b===void 0?[]:b,j=t.block,S=this.getType(e),k=this.getType(h),N=this.getType(m),P=k||S||this.getType("default"),R=P.model,F=N?N.view:P.view,z=function(q,I,K){return q.reduce(function(D,Q){var oe=I[Q],re=K.prototype[Q];return oe&&re&&(D[Q]=function(){for(var Te=[],G=0;G<arguments.length;G++)Te[G]=arguments[G];re.bind(this).apply(void 0,Te),oe.bind(this).apply(void 0,Te)}),D},{})};if(typeof i=="object"){var H={defaults:i.defaults};delete i.defaults;var V=new Set(R.typeExtends);V.add(R.getDefaults().type),t.model=R.extend(bo(bo({},i),z(x,i,R)),{typeExtends:V,isComponent:S&&!k&&!d?R.isComponent:d||(function(){return 0})}),Object.defineProperty(t.model.prototype,"defaults",{get:function(){return bo(bo({},(0,Ce.result)(R.prototype,"defaults")||{}),(0,Ce.result)(H,"defaults")||{})}})}if(typeof c=="object"&&(t.view=F.extend(bo(bo({},c),z(v,c,F)))),S?(S.model=t.model,S.view=t.view):(t.id=e,this.componentTypes.unshift(t)),j){var W={id:e,label:e,content:{type:e}},Z=j===!0?W:bo(bo({},W),j);s.Blocks.add(Z.id||e,Z)}var A="component:type:".concat(S?"update":"add");return s?.trigger(A,S||t),this},r.prototype.getType=function(e){for(var t=this.componentTypes,s=0;s<t.length;s++){var o=t[s].id;if(o==e)return t[s]}},r.prototype.removeType=function(e){var t=this.componentTypes,s=this.getType(e);if(s){var o=t.indexOf(s);return t.splice(o,1),s}},r.prototype.getTypes=function(){return this.componentTypes},r.prototype.selectAdd=function(e,t){var s=this;t===void 0&&(t={}),e&&(e.set({status:"selected"}),["component:selected","component:toggled"].forEach(function(o){return s.em.trigger(o,e,t)}))},r.prototype.selectRemove=function(e,t){var s=this;t===void 0&&(t={}),e&&(this.em,e.set({status:"",state:""}),["component:deselected","component:toggled"].forEach(function(o){return s.em.trigger(o,e,t)}))},r.prototype.componentHovered=function(){var e=this.em,t=e.get("componentHovered"),s=e.previous("componentHovered"),o="hovered";s&&s.get("status")==o&&s.set({status:"",state:""}),t&&(0,Ce.isEmpty)(t.get("status"))&&t.set("status",o)},r.prototype.getShallowWrapper=function(){var e=this,t=e.shallow,s=e.em;if(!t&&s){var o=s.shallow;if(!o)return;var i=o.Components;if(i.componentTypes=this.componentTypes,t=i.getWrapper(),t){var l=[V0,aC].join(" ");t.on(l,(0,Ce.debounce)(function(){return t?.components("")},100))}this.shallow=t}return t},r.prototype.isComponent=function(e){return(0,Zt.isComponent)(e)},r.prototype.addSymbol=function(e){if(!((0,Ce.isSymbol)(e)&&!op(e))){var t=e.clone({symbol:!0});return Kf(t)&&this.symbols.add(t),this.em.trigger("component:toggled"),t}},r.prototype.getSymbols=function(){return PW([],this.symbols.models,!0)},r.prototype.detachSymbol=function(e){sv(e)&&Fb(e)},r.prototype.getSymbolInfo=function(e,t){t===void 0&&(t={});var s=Kf(e),o=Sl(e),i=!!o,l=_i(s?e:o)||[],c=o||(s?e:void 0),d=Md(e,{changed:t.withChanges}),h=s||i,m=h&&op(e);return{isSymbol:h,isMain:s,isInstance:i,isRoot:m,main:c,instances:l,relatives:d||[]}},r.prototype.canMove=function(e,t,s){var o={result:!1,reason:vh.InvalidSource,target:e,source:null};if(!t||!e)return o;if(ac(e)&&t instanceof $s&&ac(t)){var i=vy(e),l=Kf(i)?i:Sl(i),c=vy(t),d=Kf(c)?c:Sl(c),h=l===d,m=i!==c;if(h&&m)return bo(bo({},o),{reason:vh.TargetReject})}var y=(0,Zt.isComponent)(t)?t:null;if(!y){var x=this.getShallowWrapper();y=x?.append(t,{temporary:!0})[0]||null}if(o.source=y,!y)return o;var b=y.get("draggable");if((0,Ce.isFunction)(b))b=!!b(y,e,s);else{var v=e.getEl();b=(0,Ce.isArray)(b)?b.join(","):b,b=(0,Ce.isString)(b)?v?.matches(b):b}if(!b)return bo(bo({},o),{reason:vh.SourceReject});var j=e.get("droppable");if((0,Ce.isFunction)(j))j=!!j(y,e,s);else if(j===!1&&e.isInstanceOf("text")&&y.get("textable"))j=!0;else{var v=y.getEl();j=(0,Ce.isArray)(j)?j.join(","):j,j=(0,Ce.isString)(j)?v?.matches(j):j}var S=[e].concat(e.parents()).indexOf(y)>-1;return!j||S?bo(bo({},o),{reason:vh.TargetReject}):bo(bo({},o),{result:!0})},r.prototype.allById=function(){return this.componentsById},r.prototype.getById=function(e){return this.componentsById[e]||null},r.prototype.destroy=function(){var e,t=this.allById();Object.keys(t).forEach(function(s){return t[s]&&t[s].remove()}),(e=this.componentView)===null||e===void 0||e.remove(),[this.em,this.componentsById,this.componentView].forEach(function(s){return{}})},r})(qd);const MW=AW;var IW=function(){return{stylePrefix:"css-",rules:[]}};const RW=IW;var LW=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),DW=Number.MAX_VALUE,FW=function(a){var r=/(-?\d*\.?\d+)\w{0,}/.exec(a);return r?r[0]:""},BW=(function(a){LW(r,a);function r(){var e=a.call(this)||this;return(0,Ce.bindAll)(e,"sortRules"),e.compCls=[],e.ids=[],e}return r.prototype.buildFromModel=function(e,t){var s=this;t===void 0&&(t={});var o="",i=this.em,l=i&&i.getConfig().avoidInlineStyle,c=e.styleToString(),d=e.classes;this.ids.push("#".concat(e.getId())),d.forEach(function(m){return s.compCls.push(m.getFullName())}),!l&&c&&(o="#".concat(e.getId(),"{").concat(c,"}"));var h=e.components();return h.forEach(function(m){return o+=s.buildFromModel(m,t)}),o},r.prototype.build=function(e,t){var s=this;t===void 0&&(t={});var o=t.json,i=t.em,l=t.cssc||i?.Css;this.em=i,this.compCls=[],this.ids=[],this.model=e;var c=[],d=e?this.buildFromModel(e,t):"",h=(0,Ce.isUndefined)(t.clearStyles)&&i?i.getConfig().clearStyles:t.clearStyles;if(l){var m=t.rules||l.getAll(),y={},x=[];t.onlyMatched&&e&&(0,Zt.hasWin)()&&(m=this.matchedRules(e,m)),m.forEach(function(b){var v=b.getAtRule();if(v){var j=y[v];j?j.push(b):y[v]=[b];return}var S=s.buildFromRule(b,x,t);o?c.push(S):d+=S}),this.sortMediaObject(y).forEach(function(b){var v="",j=b.key,S=b.value;S.forEach(function(k){var N=s.buildFromRule(k,x,t);k.get("singleAtRule")?d+="".concat(j,"{").concat(N,"}"):v+=N,o&&c.push(N)}),v&&(d+="".concat(j,"{").concat(v,"}"))}),i&&h&&m.remove&&m.remove(x)}return o?c.filter(function(b){return b}):d},r.prototype.buildFromRule=function(e,t,s){var o=this,i;s===void 0&&(s={});var l="",c=this.model,d=e.selectorsToString({skipAdd:1}),h=e.get("selectorsAdd"),m=e.get("singleAtRule"),y;if((i=e.get("selectors"))===null||i===void 0||i.forEach(function(b){var v=b.getFullName();(o.compCls.indexOf(v)>=0||o.ids.indexOf(v)>=0||s.keepUnusedStyles)&&(y=1)}),d&&y||h||m||!c){var x=e.getDeclaration();x&&(s.json?l=e:l+=x)}else t.push(e);return l},r.prototype.matchedRules=function(e,t){var s=this,o=e.getEl(),i=[];return t.forEach(function(l){try{l.selectorsToString().split(",").some(function(c){return o?.matches(s.__cleanSelector(c))})&&i.push(l)}catch{}}),e.components().forEach(function(l){i=i.concat(s.matchedRules(l,t))}),i=i.filter(function(l,c){return i.indexOf(l)===c}),i},r.prototype.getQueryLength=function(e){var t=/(-?\d*\.?\d+)\w{0,}/.exec(e);return t?parseFloat(t[1]):DW},r.prototype.sortMediaObject=function(e){var t=this;e===void 0&&(e={});var s=[];return(0,Ce.each)(e,function(o,i){return s.push({key:i,value:o})}),s.sort(function(o,i){var l=[o.key,i.key].every(function(h){return h.indexOf("min-width")!==-1}),c=l?o.key:i.key,d=l?i.key:o.key;return t.getQueryLength(c)-t.getQueryLength(d)})},r.prototype.sortRules=function(e,t){var s=function(c){return c.get("mediaText")||""},o=[s(e),s(t)].every(function(c){return c.indexOf("min-width")!==-1}),i=s(o?e:t),l=s(o?t:e);return this.getQueryLength(i)-this.getQueryLength(l)},r.prototype.__cleanSelector=function(e){return e.split(" ").map(function(t){return t.split(":")[0]}).join(" ")},r})(Sr.Kx);const zW=BW;var UW=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),lC=function(){return lC=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},lC.apply(this,arguments)},$W=function(a,r,e){if(e||arguments.length===2)for(var t=0,s=r.length,o;t<s;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return a.concat(o||Array.prototype.slice.call(r))},Bj=((0,Zt.hasWin)()?window:{}).CSS,VW=(function(a){UW(r,a);function r(e,t){t===void 0&&(t={});var s=a.call(this,e,{em:t.em})||this;return s.views=[],s.config=e||{},s.opt=t,s.em=t.em,s.ensureSelectors(null,null,{}),s.setStyle(s.get("style"),{skipWatcherUpdates:!0}),s.on("change",s.__onChange),s}return r.prototype.defaults=function(){return{selectors:[],selectorsAdd:"",style:{},mediaText:"",state:"",stylable:!0,atRuleType:"",singleAtRule:!1,important:!1,group:"",shallow:!1,_undo:!0}},r.prototype.__onChange=function(e,t){var s=this.em,o=this.changedAttributes();o&&!(0,Zt.isEmptyObj)(o)&&s?.changesUp(t,{rule:e,changed:o,options:t})},r.prototype.clone=function(){var e=this.get("selectors").map(function(t){return t.clone()});return a.prototype.clone.call(this,{selectors:e})},r.prototype.ensureSelectors=function(e,t,s){var o=this.em,i=o?.Selectors,l=[this,"change:selectors",this.ensureSelectors],c=this.getSelectors();if(this.stopListening.apply(this,l),c.models&&(c=$W([],c.models,!0)),c=(0,Ce.isString)(c)?[c]:c,Array.isArray(c)){var d=c.filter(function(h){return h}).map(function(h){return i?i.add(h):h});c=new Mu(d)}this.set("selectors",c,s),this.listenTo.apply(this,l)},r.prototype.getAtRule=function(){return r.getAtRuleFromProps(this.attributes)},r.getAtRuleFromProps=function(e){var t=e.atRuleType,s=e.mediaText,o=t?"@".concat(t):s?"@media":"";return o+(s&&o?" ".concat(s):"")},r.prototype.selectorsToString=function(e){e===void 0&&(e={});var t=[],s=this.get("state"),o=this.get("selectorsAdd"),i={escape:function(d){return Bj&&Bj.escape?Bj.escape(d):d}},l=this.getSelectors().getFullString(0,i),c=s&&!e.skipState?":".concat(s):"";return l&&t.push("".concat(l).concat(c)),o&&!e.skipAdd&&t.push(o),t.join(", ")},r.prototype.getDeclaration=function(e){e===void 0&&(e={});var t="",s=this.attributes.important,o=this.selectorsToString(e),i=this.styleToString(lC({important:s},e)),l=this.get("singleAtRule");return(o||l)&&(i||e.allowEmpty)&&(t=l?i:"".concat(o,"{").concat(i,"}")),t},r.prototype.getDevice=function(){var e=this.em,t=this.attributes,s=t.atRuleType,o=t.mediaText,i=e?.Devices.getDevices()||[],l=i.filter(function(c){return c.getWidthMedia()===""})[0];return s!=="media"||!o?l||null:i.filter(function(c){return c.getWidthMedia()===FW(o)})[0]||null},r.prototype.getState=function(){var e=this.em,t=this.get("state"),s=e?.Selectors.getStates()||[];return s.filter(function(o){return o.getName()===t})[0]||null},r.prototype.getComponent=function(){var e,t=this.getSelectors(),s=t.length==1&&t.at(0),o=s&&s.isId()&&s.get("name");return o&&((e=this.em)===null||e===void 0?void 0:e.Components.getById(o))||null},r.prototype.toCSS=function(e){e===void 0&&(e={});var t="",s=this.getAtRule(),o=this.getDeclaration(e);return(o||e.allowEmpty)&&(t=o),s&&t&&(t="".concat(s,"{").concat(t,"}")),t},r.prototype.toJSON=function(e){var t,s=a.prototype.toJSON.call(this,e);if(!((t=this.em)===null||t===void 0)&&t.getConfig().avoidDefaults){var o=this.defaults();(0,Ce.forEach)(o,function(i,l){s[l]===i&&delete s[l]}),delete s.style.__p,(0,Ce.isEmpty)(s.selectors)&&delete s.selectors,(0,Ce.isEmpty)(s.style)&&delete s.style}return s},r.prototype.compare=function(e,t,s,o){var i;o===void 0&&(o={});var l=t||"",c=s||"",d=o.selectorsAdd||"",h=o.atRuleType||"",m=!(0,Ce.isArray)(e)&&!e.models?[e]:e.models||e;c&&!h&&(h="media");var y=m.map(function(j){return j.getFullName()}),x=(i=this.get("selectors"))===null||i===void 0?void 0:i.map(function(j){return j.getFullName()}),b=y.slice().sort(),v=x.slice().sort();return!(y.length!==x.length||!b.every(function(j,S){return j===v[S]})||this.get("state")!==l||this.get("mediaText")!==c||this.get("selectorsAdd")!==d||this.get("atRuleType")!==h)},r})(A3);const cC=VW;var WW=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),J3=(function(a){WW(r,a);function r(e,t){var s=a.call(this,e)||this;return s.editor=t?.em,setTimeout(function(){s.on("remove",s.onRemove),s.on("add",s.onAdd)}),s}return r.prototype.toJSON=function(e){var t=Sr.pM.prototype.toJSON.call(this,e);return t.filter(function(s){return s.style&&!s.shallow})},r.prototype.onAdd=function(e,t,s){e.ensureSelectors(e,t,s)},r.prototype.onRemove=function(e){var t=this.editor;t.stopListening(e),t.UndoManager.remove(e)},r.prototype.add=function(e,t){return t===void 0&&(t={}),typeof e=="string"&&(e=this.editor.get("Parser").parseCss(e)),t.em=this.editor,Sr.pM.prototype.add.apply(this,[e,t])},r})(Sr.pM);const A5=J3;J3.prototype.model=cC;var HW=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Xl=function(){return Xl=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Xl.apply(this,arguments)},qW=function(a,r,e){if(e||arguments.length===2)for(var t=0,s=r.length,o;t<s;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return a.concat(o||Array.prototype.slice.call(r))},GW=(function(a){HW(r,a);function r(e){var t=a.call(this,e,"CssComposer",null,Hh,RW())||this;t.classes={CssRule:cC,CssRules:A5,CssRuleView:IS,CssRulesView:J1},t.events=Hh,t.Selectors=Mu,t.storageKey="styles",t._itemCache=new Map;var s=t.config,o=s.pStylePrefix;return o&&(s.stylePrefix=o+s.stylePrefix),s.rules=t.em.config.style||s.rules||"",t.rules=new A5([],s),t._setupCacheListeners(),t}return r.prototype._setupCacheListeners=function(){a.prototype._setupCacheListeners.call(this),this.em.listenTo(this.rules,"change:selectors change:state change:mediaText",this._onItemKeyChange.bind(this))},r.prototype._makeCacheKey=function(e){var t=e.getAtRule(),s=e.selectorsToString();return"".concat(t,"__").concat(s)},r.prototype._makeCacheKeyFromProps=function(e){var t=e.atRuleType,s=t===void 0?"":t,o=e.mediaText,i=o===void 0?"":o,l=e.state,c=l===void 0?"":l,d=e.selectorsAdd,h=d===void 0?"":d,m=e.selectors,y=m===void 0?[]:m,x=y.map(function(k){return(0,Ce.isString)(k)?k:k.toString()}).join(""),b=[];x&&b.push("".concat(x).concat(c?":".concat(c):"")),h&&b.push(h);var v=b.join(", "),j=s?"@".concat(s):i?"@media":"",S=j+(i&&j?" ".concat(i):"");return"".concat(S,"__").concat(v)},r.prototype.onLoad=function(){this.rules.add(this.config.rules,{silent:!0}),this._onItemsResetCache(this.rules)},r.prototype.postLoad=function(){this.em.UndoManager.add(this.getAll())},r.prototype.store=function(){return this.getProjectData()},r.prototype.load=function(e){return this.loadProjectData(e,{all:this.rules})},r.prototype._findRule=function(e,t,s,o){var i=e;if((0,Ce.isString)(e)){var l=this.em.Selectors,c=e.split(",")[0].trim(),d=this.em.Parser.parserCss.checkNode({selectors:c})[0];i=l.get(d.selectors)}var h=this.rules.find(function(m){return m.compare(i,t,s,o)})||null;return h},r.prototype.add=function(e,t,s,o,i){o===void 0&&(o={}),i===void 0&&(i={});var l=t||"",c=s||"",d=Xl({},o),h=this._makeCacheKeyFromProps(Xl(Xl({state:l,mediaText:c},d),{selectors:Array.isArray(e)?e:[e]})),m=this._itemCache.get(h);if(m&&m.config&&!m.config.singleAtRule)return m;var y=this._findRule(e,l,c,d);return y&&y.config&&!y.config.singleAtRule?(this._cacheItem(y),y):(d.state=l,d.mediaText=c,d.selectors=[],c&&!d.atRuleType&&(d.atRuleType="media"),y=new cC(d,this.config),y.get("selectors").add(e,i),this.rules.add(y,i),this._cacheItem(y),y)},r.prototype.get=function(e,t,s,o){var i=this._makeCacheKeyFromProps(Xl(Xl({},o),{selectors:Array.isArray(e)?e:[e],state:t,width:s,mediaText:s})),l=this._itemCache.get(i);if(l)return l;var c=this._findRule(e,t,s,o);return c&&this._cacheItem(c),c},r.prototype.getAll=function(){return this.rules},r.prototype.addCollection=function(e,t,s){t===void 0&&(t={}),s===void 0&&(s={});var o=this.em,i=[];(0,Ce.isString)(e)&&(e=o.Parser.parseCss(e));for(var l=e instanceof Array?e:[e],c=0,d=l.length;c<d;c++){var h=l[c]||{};if(h.selectors){var m=o?.Selectors;m||console.warn("Selector Manager not found");for(var y=h.selectors,x=y instanceof Array?y:[y],b=[],v=0,j=x.length;v<j;v++){var S=m.add(x[v]);b.push(S)}var k=this.get(b,h.state,h.mediaText,h),N=this.add(b,h.state,h.mediaText,h,t),P=!k||!t.avoidUpdateStyle,R=h.style||{};if((0,Zt.isObject)(s)&&N.set(s,t),P){var F=t.extend?Xl(Xl({},N.getStyle("",{skipResolve:!0})),R):R;N.setStyle(F,t)}i.push(N)}}return i},r.prototype.addRules=function(e){return this.addCollection(e)},r.prototype.setRule=function(e,t,s){t===void 0&&(t={}),s===void 0&&(s={});var o=s.atRuleType,i=s.atRuleParams,l=this.em.Parser.parserCss.checkNode({selectors:e,style:t})[0],c=l.state,d=l.selectorsAdd,h=this.em.Selectors,m=h.add(l.selectors),y=this.add(m,c,i,{selectorsAdd:d,atRule:o});return s.addStyles?y.addStyle(t,s):y.setStyle(t,s),y},r.prototype.getRule=function(e,t){t===void 0&&(t={});var s=this.em,o=s.Selectors,i=s.Parser.parserCss.checkNode({selectors:e})[0],l=o.get(i.selectors),c=i.state,d=i.selectorsAdd,h=t.atRuleType,m=t.atRuleParams;return l?this.get(l,c,m,{selectorsAdd:d,atRuleType:h}):void 0},r.prototype.getRules=function(e){var t=this.getAll();if(!e)return qW([],t.models,!0);var s={sort:!0},o=(0,Ce.isString)(e)?e.split(",").map(function(l){return l.trim()}):e,i=t.filter(function(l){return o.indexOf(l.getSelectors().getFullString(null,s))>=0});return i},r.prototype.setIdRule=function(e,t,s){t===void 0&&(t={}),s===void 0&&(s={});var o=s.addOpts,i=o===void 0?{}:o,l=s.mediaText,c=s.state||"",d=(0,Ce.isUndefined)(l)?this.em.getCurrentMedia():l,h=this.em.Selectors,m=h.add({name:e,type:si.TYPE_ID},i),y=this.add(m,c,d,{},i);return y.setStyle(t,Xl(Xl({},s),i)),y},r.prototype.getIdRule=function(e,t){t===void 0&&(t={});var s=t.mediaText,o=t.state||"",i=(0,Ce.isUndefined)(s)?this.em.getCurrentMedia():s,l=this.em.Selectors.get(e,si.TYPE_ID);return l&&this.get(l,o,i)},r.prototype.setClassRule=function(e,t,s){t===void 0&&(t={}),s===void 0&&(s={});var o=s.state||"",i=s.mediaText||this.em.getCurrentMedia(),l=this.em.Selectors,c=l.add({name:e,type:si.TYPE_CLASS}),d=this.add(c,o,i);return d.setStyle(t,s),d},r.prototype.getClassRule=function(e,t){t===void 0&&(t={});var s=t.state||"",o=t.mediaText||this.em.getCurrentMedia(),i=this.em.Selectors.get(e,si.TYPE_CLASS);return i&&this.get(i,s,o)},r.prototype.remove=function(e,t){var s=(0,Ce.isString)(e)?this.getRules(e):e,o=Array.isArray(s)?s:[s],i=this.getAll().remove(o,t);return Array.isArray(i)?i:[i]},r.prototype.clear=function(e){return e===void 0&&(e={}),this._clearItemCache(),this.getAll().reset([],e),this},r.prototype.getComponentRules=function(e,t){t===void 0&&(t={});var s=t.state,o=t.mediaText,i=t.current;i&&(s=this.em.get("state")||"",o=this.em.getCurrentMedia());var l=e.getId(),c=this.getAll().filter(function(d){return!(0,Ce.isUndefined)(s)&&d.get("state")!==s||!(0,Ce.isUndefined)(o)&&d.get("mediaText")!==o?!1:d.getSelectorsString()==="#".concat(l)});return c},r.prototype.render=function(){var e;return(e=this.rulesView)===null||e===void 0||e.remove(),this.rulesView=new J1({collection:this.rules,config:this.config}),this.rulesView.render().el},r.prototype.checkId=function(e,t){t===void 0&&(t={});var s=t.idMap,o=s===void 0?{}:s,i=[];if(!Object.keys(o).length)return i;var l=Array.isArray(e)?e:[e];return l.forEach(function(c){var d=c.selectors;if(d&&d.length==1){var h=d[0];if((0,Ce.isString)(h)){if(h[0]==="#"){var m=h.substring(1),y=o[m];m&&y&&(d[0]="#".concat(y),i.push(c))}}else if(h.name&&h.type===si.TYPE_ID){var y=o[h.name];y&&(h.name=y,i.push(c))}}}),i},r.prototype.destroy=function(){var e;this.rules.reset(),this.rules.stopListening(),(e=this.rulesView)===null||e===void 0||e.remove()},r})(qd);const KW=GW;var YW=function(){return{appendTo:"",blocks:[],appendOnClick:!1,custom:!1}};const ZW=YW;var XW=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),QW=(function(a){XW(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.defaults=function(){return{label:"",content:"",media:"",category:"",activate:!1,select:void 0,resetId:!1,disable:!1,onClick:void 0,attributes:{},dragDef:{}}},Object.defineProperty(r.prototype,"category",{get:function(){var e=this.get("category");return e instanceof Vy?e:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"parent",{get:function(){return this.collection},enumerable:!1,configurable:!0}),r.prototype.getId=function(){return this.id},r.prototype.getLabel=function(){return this.get("label")},r.prototype.getMedia=function(){return this.get("media")},r.prototype.getContent=function(){return this.get("content")},r.prototype.getDragDef=function(){return this.get("dragDef")},r.prototype.getCategoryLabel=function(){var e=this.get("category");return(0,Ce.isFunction)(e?.get)?e.get("label"):e?.label?e?.label:e},r})(Sr.Kx);const eO=QW;var JW=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),tO=(function(a){JW(r,a);function r(e,t){var s=a.call(this,e)||this;return s.em=t.em,s.on("add",s.handleAdd),s}return r.prototype.getCategories=function(){return this.em.Blocks.getCategories()},r.prototype.handleAdd=function(e){this.initCategory(e)},r})(D3);const m0=tO;tO.prototype.model=eO;var Jg;(function(a){a.add="block:add",a.remove="block:remove",a.removeBefore="block:remove:before",a.update="block:update",a.dragStart="block:drag:start",a.drag="block:drag",a.dragEnd="block:drag:stop",a.categoryUpdate="block:category:update",a.custom="block:custom",a.all="block"})(Jg||(Jg={}));var eH=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),bh=function(){return bh=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},bh.apply(this,arguments)},tH=(function(a){eH(r,a);function r(e,t){t===void 0&&(t={});var s=a.call(this,e)||this,o=s.model;return s.em=t.em,s.config=t,s.endDrag=s.endDrag.bind(s),s.ppfx=t.pStylePrefix||"",s.listenTo(o,"destroy remove",s.remove),s.listenTo(o,"change",s.render),s}return r.prototype.events=function(){return{click:"handleClick",mousedown:"startDrag",dragstart:"handleDragStart",drag:"handleDrag",dragend:"handleDragEnd"}},r.prototype.__getModule=function(){return this.em.Blocks},r.prototype.handleClick=function(e){var t,s,o=this,i=o.config,l=o.model,c=o.em,d=l.get("onClick")||i.appendOnClick;if(c.trigger("block:click",l,e),d){if((0,Ce.isFunction)(d))return d(l,c?.getEditor(),{event:e})}else return;var h=(t=i.getSorter)===null||t===void 0?void 0:t.call(i);if(h){var m=l.get("content"),y=this.getTempDropModel(m),x=(s=y.view)===null||s===void 0?void 0:s.el,b=x?[{element:x,dragSource:{content:m}}]:[],v=c.getSelected(),j,S,k,N=0;if(v)if(S=h.validTarget(v.getEl(),b,N),S)j=v;else{var P=v.parent();P&&(S=h.validTarget(P.getEl(),b,N),S&&(j=P,k=P.components().indexOf(v)+1))}if(!j){var R=c.getWrapper();S=h.validTarget(R.getEl(),b,N),S&&(j=R)}var F=j&&j.append(m,{at:k})[0];F&&c.setSelected(F,{scroll:!0})}},r.prototype.startDrag=function(e){var t,s=this,o=s.config,i=s.em,l=s.model,c=l.get("disable");if(!(e.button!==0||!o.getSorter||this.el.draggable||c)){i.refreshCanvas();var d=o.getSorter();d.__currentBlock=l;var h=this.model.get("content"),m=this.getTempDropModel(h),y=(t=m.view)===null||t===void 0?void 0:t.el,x=y?[{element:y,dragSource:{content:h}}]:[];d.startSort(x),(0,Ir.on)(document,"mouseup",this.endDrag)}},r.prototype.handleDragStart=function(e){this.__getModule().__startDrag(this.model,e)},r.prototype.handleDrag=function(e){this.__getModule().__drag(e)},r.prototype.handleDragEnd=function(){this.__getModule().__endDrag()},r.prototype.endDrag=function(){var e,t;(0,Ir.AU)(document,"mouseup",this.endDrag);var s=(t=(e=this.config).getSorter)===null||t===void 0?void 0:t.call(e);s&&s.endDrag()},r.prototype.getTempDropModel=function(e){var t,s=this.em.Components.getComponents(),o={avoidChildren:1,avoidStore:1,avoidUpdateStyle:1},i=s.add(e,bh(bh({},o),{temporary:!0})),l=s.remove(i,bh(bh({},o),{temporary:!0}));return l=l instanceof Array?l[0]:l,(t=l.view)===null||t===void 0||t.$el.data("model",l),l},r.prototype.render=function(){var e,t=this,s=t.em,o=t.el,i=t.$el,l=t.ppfx,c=t.model,d=c.get("disable"),h=c.get("attributes")||{},m=h.class||"",y="".concat(l,"block"),x=s&&s.t("blockManager.labels.".concat(c.id))||c.get("label"),b=c.get("render"),v=c.get("media"),j=d?"".concat(y,"--disable"):"".concat(l,"four-color-h");i.attr(h),o.className="".concat(m," ").concat(y," ").concat(l,"one-bg ").concat(j).trim(),o.innerHTML=`
      `.concat(v?'<div class="'.concat(y,'__media">').concat(v,"</div>"):"",`
      <div class="`).concat(y,'-label">').concat(x,`</div>
    `),o.title=h.title||((e=o.textContent)===null||e===void 0?void 0:e.trim()),o.setAttribute("draggable","".concat(!!((0,Zt.hasDnd)(s)&&!d)));var S=b&&b({el:o,model:c,className:y,prefix:l});return S&&(o.innerHTML=S),this},r})(Sr.Ss);const rH=tH;var nH=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),aH=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a},sH=(function(a){nH(r,a);function r(e,t,s){var o=a.call(this,e)||this;o.config=t;var i=t.pStylePrefix||"";return o.em=t.em,o.catName=s,o.pfx=i,o.caretR="fa fa-caret-right",o.caretD="fa fa-caret-down",o.iconClass="".concat(i,"caret-icon"),o.activeClass="".concat(i,"open"),o.className="".concat(i).concat(s,"-category"),o.listenTo(o.model,"change:open",o.updateVisibility),o.model.view=o,o}return r.prototype.events=function(){return{"click [data-title]":"toggle"}},r.prototype.template=function(e){var t=e.pfx,s=e.label,o=e.catName;return Ni(M5||(M5=aH([`
      <div class="`,`title" data-title>
        <i class="`,`caret-icon"></i>
        `,`
      </div>
      <div class="`,"",`s-c"></div>
    `],[`
      <div class="`,`title" data-title>
        <i class="`,`caret-icon"></i>
        `,`
      </div>
      <div class="`,"",`s-c"></div>
    `])),t,t,s,t,o)},r.prototype.attributes=function(){return this.model.get("attributes")||{}},r.prototype.updateVisibility=function(){this.model.get("open")?this.open():this.close()},r.prototype.open=function(){this.$el.addClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretD),this.getTypeEl().style.display=""},r.prototype.close=function(){this.$el.removeClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretR),this.getTypeEl().style.display="none"},r.prototype.toggle=function(){var e=this.model;e.set("open",!e.get("open"))},r.prototype.getIconEl=function(){return this.iconEl||(this.iconEl=this.el.querySelector(".".concat(this.iconClass))),this.iconEl},r.prototype.getTypeEl=function(){return this.typeEl||(this.typeEl=this.el.querySelector(".".concat(this.pfx).concat(this.catName,"s-c"))),this.typeEl},r.prototype.append=function(e){this.getTypeEl().appendChild(e)},r.prototype.render=function(){var e=this,t=e.em,s=e.el,o=e.$el,i=e.model,l=e.pfx,c=e.catName,d=t.t("".concat(c,"Manager.categories.").concat(i.id))||i.get("label");return s.innerHTML=this.template({pfx:l,label:d,catName:c}),o.addClass(this.className),o.css({order:i.get("order")}),this.updateVisibility(),this},r})(Sr.Ss);const rO=sH;var M5,oH=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Dv=function(){return Dv=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Dv.apply(this,arguments)},iH=(function(a){oH(r,a);function r(e,t){var s=a.call(this,e)||this;s.renderedCategories=new Map,(0,Ce.bindAll)(s,"getSorter","onDrag","onDrop","onMove"),s.config=t||{},s.categories=e.categories||"";var o=s.config.pStylePrefix||"";s.ppfx=o,s.noCatClass="".concat(o,"blocks-no-cat"),s.blockContClass="".concat(o,"blocks-c"),s.catsClass="".concat(o,"block-categories");var i=s.collection;return s.listenTo(i,"add",s.addTo),s.listenTo(i,"reset",s.render),s.em=s.config.em,s.em&&(s.config.getSorter=s.getSorter),s}return r.prototype.__getModule=function(){return this.em.Blocks},r.prototype.updateConfig=function(e){e===void 0&&(e={}),this.config=Dv(Dv({},this.config),e)},r.prototype.getSorter=function(){var e=this.em;if(e){if(!this.sorter){var t=e.Utils,s=e.Canvas;this.sorter=new t.ComponentSorter({em:e,treeClass:U3,containerContext:{container:s.getBody(),containerSel:"*",itemSel:"*",pfx:this.ppfx,placeholderElement:s.getPlacerEl(),document:s.getBody().ownerDocument},dragBehavior:{dragDirection:ip.A.BothDirections,nested:!0},positionOptions:{windowMargin:1,canvasRelative:!0},eventHandlers:{legacyOnStartSort:this.onDrag,legacyOnEndMove:this.onDrop,legacyOnMoveClb:this.onMove}})}return this.sorter}},r.prototype.onDrag=function(e){this.em.stopDefault(),this.__getModule().__startDrag(this.sorter.__currentBlock,e)},r.prototype.onMove=function(e){this.__getModule().__drag(e)},r.prototype.onDrop=function(e){this.em.runDefault(),this.__getModule().__endDrag({component:e}),delete this.sorter.__currentBlock},r.prototype.addTo=function(e){this.add(e)},r.prototype.add=function(e,t){var s=this,o=s.config,i=s.renderedCategories,l=e.get("attributes"),c=new rH({model:e,attributes:l},o),d=c.render().el,h=e.parent.initCategory(e);if(h&&this.categories&&!o.ignoreCategories){var m=h.getId(),y=this.getCategoriesEl(),x=i.get(m);!x&&y&&(x=new rO({model:h},o,"block").render(),i.set(m,x),y.appendChild(x.el)),x?.append(d);return}t?t.appendChild(d):this.append(d)},r.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector(".".concat(this.catsClass))),this.catsEl},r.prototype.getBlocksEl=function(){return this.blocksEl||(this.blocksEl=this.el.querySelector(".".concat(this.noCatClass," .").concat(this.blockContClass))),this.blocksEl},r.prototype.append=function(e){var t=this.getBlocksEl();t&&t.appendChild(e)},r.prototype.render=function(){var e=this,t=this.ppfx,s=document.createDocumentFragment();delete this.catsEl,delete this.blocksEl,this.renderedCategories=new Map,this.el.innerHTML=`
      <div class="`.concat(this.catsClass,`"></div>
      <div class="`).concat(this.noCatClass,`">
        <div class="`).concat(this.blockContClass,`"></div>
      </div>
    `),this.collection.each(function(i){return e.add(i,s)}),this.append(s);var o="".concat(this.blockContClass,"s ").concat(t,"one-bg ").concat(t,"two-color");return this.$el.addClass(o),this.rendered=!0,this},r})(Sr.Ss);const I5=iH;var lH=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Eu=function(){return Eu=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Eu.apply(this,arguments)},cH=(function(a){lH(r,a);function r(e){var t=a.call(this,e,"BlockManager",new m0([],{em:e}),Jg,ZW())||this;return t.events=Jg,t.Block=eO,t.Blocks=m0,t.Category=Vy,t.Categories=lv,t.storageKey="",t.blocks=t.all,t.blocksVisible=new m0(t.blocks.models,{em:e}),t.categories=new lv([],{em:e,events:{update:Jg.categoryUpdate}}),t.__onAllEvent=(0,Ce.debounce)(function(){return t.__trgCustom()},0),t}return r.prototype.onInit=function(){var e=this,t=e.config,s=e.blocks,o=e.blocksVisible;s.on("add",function(i){return o.add(i)}),s.on("remove",function(i){return o.remove(i)}),s.on("reset",function(i){return o.reset(i.models)}),s.add(t.blocks||[])},r.prototype.__trgCustom=function(){this.em.trigger(this.events.custom,this.__customData())},r.prototype.__customData=function(){var e=this,t=this.__getBehaviour();return{bm:this,blocks:this.getAll().models,container:t.container,dragStart:function(s,o){return e.startDrag(s,o)},drag:function(s){return e.__drag(s)},dragStop:function(s){return e.endDrag(s)}}},r.prototype.__startDrag=function(e,t){var s=this,o=s.em,i=s.events,l=s.blocks,c=e.getContent?e.getContent():e;this._dragBlock=e,o.set({dragResult:null,dragSource:{content:c,dragDef:e.getDragDef()}}),[o,l].map(function(d){return d.trigger(i.dragStart,e,t)})},r.prototype.__drag=function(e){var t=this,s=t.em,o=t.events,i=t.blocks,l=this._dragBlock;[s,i].map(function(c){return c.trigger(o.drag,l,e)})},r.prototype.__endDrag=function(e){e===void 0&&(e={});var t=this,s=t.em,o=t.events,i=t.blocks,l=this._dragBlock,c=e.component||s.get("dragResult");if(delete this._dragBlock,c&&l){var d="activeOnRender",h=c.get&&c.get(d),m=l.get("activate")||h,y=l.get("select"),x=(0,Ce.isArray)(c)?c[0]:c,b=y||m&&y!==!1;b?s.setSelected(x,{activate:m}):m&&x.trigger("active"),m&&h&&x.unset(d),l.get("resetId")&&x.onAll(function(v){return v.resetId()})}s.set({dragResult:null,dragSource:void 0}),l&&[s,i].map(function(v){return v.trigger(o.dragEnd,c,l)})},r.prototype.__getFrameViews=function(){return this.em.Canvas.getFrames().map(function(e){return e.view}).filter(Boolean)},r.prototype.__behaviour=function(e){return e===void 0&&(e={}),this._bhv=Eu(Eu({},this._bhv||{}),e)},r.prototype.__getBehaviour=function(){return this._bhv||{}},r.prototype.startDrag=function(e,t){this.__startDrag(e,t),this.__getFrameViews().forEach(function(s){var o;return(o=s.droppable)===null||o===void 0?void 0:o.startCustom()})},r.prototype.endDrag=function(e){this.__getFrameViews().forEach(function(t){var s;return(s=t.droppable)===null||s===void 0?void 0:s.endCustom(e)}),this.__endDrag()},r.prototype.postRender=function(){var e=this,t=e.categories,s=e.config,o=e.em,i=this.blocksVisible;this.blocksView=new I5({collection:i,categories:t},Eu(Eu({},s),{em:o})),this.__appendTo(i.models),this.__trgCustom()},r.prototype.add=function(e,t,s){s===void 0&&(s={});var o=t||{};return o.id=e,this.blocks.add(o,s)},r.prototype.get=function(e){return this.blocks.get(e)},r.prototype.getAll=function(){return this.blocks},r.prototype.getAllVisible=function(){return this.blocksVisible},r.prototype.remove=function(e,t){return t===void 0&&(t={}),this.__remove(e,t)},r.prototype.getCategories=function(){return this.categories},r.prototype.getContainer=function(){var e;return(e=this.blocksView)===null||e===void 0?void 0:e.el},r.prototype.getDragBlock=function(){return this._dragBlock},r.prototype.getBlocksByCategory=function(e){return L3(e||this.getAll().models)},r.prototype.render=function(e,t){t===void 0&&(t={});var s=this,o=s.categories,i=s.config,l=s.em,c=e||this.getAll().models;if(t.external){var d=new m0(c,{em:l});return new I5({collection:d,categories:o},Eu(Eu({em:l},i),t)).render().el}return this.blocksView&&(this.blocksView.updateConfig(t),this.blocksView.collection.reset(c),this.blocksView.rendered||(this.blocksView.render(),this.blocksView.rendered=!0)),this.getContainer()},r.prototype.destroy=function(){var e,t=[this.blocks,this.blocksVisible,this.categories];t.map(function(s){return s.stopListening()}),t.map(function(s){return s.reset()}),(e=this.blocksView)===null||e===void 0||e.remove()},r})(qd);const dH=cH;var uH=function(){return{stylePrefix:"clm-",appendTo:"",selectors:[],states:[{name:"hover"},{name:"active"},{name:"nth-of-type(2n)"}],iconAdd:'<svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>',iconSync:'<svg viewBox="0 0 24 24"><path d="M12 18c-3.31 0-6-2.69-6-6 0-1 .25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4m0-11V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8z"></path></svg>',iconTagOn:'<svg viewBox="0 0 24 24"><path d="M19 19H5V5h10V3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8h-2m-11.09-.92L6.5 11.5 11 16 21 6l-1.41-1.42L11 13.17l-3.09-3.09z"></path></svg>',iconTagOff:'<svg viewBox="0 0 24 24"><path d="M19 3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5a2 2 0 0 0-2-2m0 2v14H5V5h14z"></path></svg>',iconTagRemove:'<svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',componentFirst:!1,custom:!1}};const fH=uH;var pH=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),nO=(function(a){pH(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.defaults=function(){return{name:"",label:""}},r.prototype.getName=function(){return this.get("name")},r.prototype.getLabel=function(){return this.get("label")||this.getName()},r})(Sr.Kx);const zj=nO;nO.prototype.idAttribute="name";var Fv;(function(a){a.add="selector:add",a.remove="selector:remove",a.removeBefore="selector:remove:before",a.update="selector:update",a.state="selector:state",a.custom="selector:custom",a.all="selector"})(Fv||(Fv={}));var hH=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),mH=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a},R5="contentEditable",gH=(function(a){hH(r,a);function r(e){e===void 0&&(e={});var t=a.call(this,e)||this,s=e.config||{};return t.config=s,t.module=e.module,t.coll=e.coll||null,t.pfx=s.stylePrefix||"",t.ppfx=s.pStylePrefix||"",t.em=s.em,t.listenTo(t.model,"change:active",t.updateStatus),t}return r.prototype.template=function(){var e=this,t=e.pfx,s=e.model,o=e.config,i=s.get("label")||"";return Ni(L5||(L5=mH([`
      <span id="`,'checkbox" class="',`tag-status" data-tag-status></span>
      <span id="`,'tag-label" data-tag-name>',`</span>
      <span id="`,'close" class="','tag-close" data-tag-remove> $',` </span>
    `],[`
      <span id="`,'checkbox" class="',`tag-status" data-tag-status></span>
      <span id="`,'tag-label" data-tag-name>',`</span>
      <span id="`,'close" class="','tag-close" data-tag-remove> $',` </span>
    `])),t,t,t,i,t,t,o.iconTagRemove)},r.prototype.events=function(){return{"click [data-tag-remove]":"removeTag","click [data-tag-status]":"changeStatus","dblclick [data-tag-name]":"startEditTag","focusout [data-tag-name]":"endEditTag"}},r.prototype.getInputEl=function(){return this.inputEl||(this.inputEl=this.el.querySelector("[data-tag-name]")),this.inputEl},r.prototype.startEditTag=function(){var e=this.em,t=this.getInputEl();t[R5]="true",t.focus(),e?.setEditing(!0)},r.prototype.endEditTag=function(){var e=this,t=e.model,s=e.em,o=this.getInputEl(),i=o.textContent||"",l=s?.Selectors;o[R5]="false",s?.setEditing(!1),l&&l.rename(t,i)!==t&&(o.innerText=t.getLabel())},r.prototype.changeStatus=function(){var e=this.model;e.set("active",!e.getActive())},r.prototype.removeTag=function(){this.module.removeSelected(this.model)},r.prototype.updateStatus=function(){var e=this,t=e.model,s=e.$el,o=e.config,i=o.iconTagOn,l=o.iconTagOff,c=s.find("[data-tag-status]");t.get("active")?(c.html(i),s.removeClass("opac50")):(c.html(l),s.addClass("opac50"))},r.prototype.render=function(){var e=this,t=e.pfx,s=e.ppfx,o=e.$el,i=e.model,l="".concat(t,"tag"),c=["".concat(l," ").concat(s,"three-bg")];return i.get("protected")&&c.push("".concat(l,"-protected")),o.html(this.template()),o.attr("class",c.join(" ")),this.updateStatus(),this},r})(Sr.Ss);const yH=gH;var L5,xH=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Ng=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a},vH=(function(a){xH(r,a);function r(e){e===void 0&&(e={});var t=a.call(this,e)||this;t.config=e.config||{},t.pfx=t.config.stylePrefix||"",t.ppfx=t.config.pStylePrefix||"",t.className=t.pfx+"tags",t.stateInputId=t.pfx+"states",t.stateInputC=t.pfx+"input-c",t.states=t.config.states||[];var s=t.config.em,o=t.collection;t.target=s;var i=s.Selectors;t.module=i,t.em=s,t.componentChanged=(0,Ce.debounce)(t.componentChanged.bind(t),0),t.checkSync=(0,Ce.debounce)(t.checkSync.bind(t),0);var l=ja.I.update,c="".concat(l,":classes"),d="component:toggled ".concat(c),h="".concat(c," ").concat(l,":attributes:id change:state");return t.listenTo(s,d,t.componentChanged),t.listenTo(s,"styleManager:update",t.componentChanged),t.listenTo(s,h,t.__handleStateChange),t.listenTo(s,"styleable:change change:device",t.checkSync),t.listenTo(o,"add",t.addNew),t.listenTo(o,"reset",t.renderClasses),t.listenTo(o,"remove",t.tagRemoved),t.listenTo(i.getAll(),i.events.state,(0,Ce.debounce)(function(){return t.renderStates()},0)),t.delegateEvents(),t}return r.prototype.template=function(e){var t=e.labelInfo,s=e.labelHead,o=e.iconSync,i=e.iconAdd,l=e.pfx,c=e.ppfx;return Ni(D5||(D5=Ng([' <div id="','up" class="',`header">
        <div id="`,'label" class="','header-label">',`</div>
        <div id="`,'status-c" class="',`header-status">
          <span id="`,`input-c" data-states-c>
            <div class="`,"field ",`select">
              <span id="`,`input-holder">
                <select id="`,`states" data-states></select>
              </span>
              <div class="`,`sel-arrow">
                <div class="`,`d-s-arrow"></div>
              </div>
            </div>
          </span>
        </div>
      </div>
      <div id="`,'tags-field" class="',`field">
        <div id="`,`tags-c" data-selectors></div>
        <input id="`,`new" data-input />
        <span id="`,'add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',` </span>
        <span class="`,"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',` </span>
      </div>
      <div class="`,`sels-info">
        <div class="`,'label-sel">',`:</div>
        <div class="`,`sels" data-selected></div>
      </div>`],[' <div id="','up" class="',`header">
        <div id="`,'label" class="','header-label">',`</div>
        <div id="`,'status-c" class="',`header-status">
          <span id="`,`input-c" data-states-c>
            <div class="`,"field ",`select">
              <span id="`,`input-holder">
                <select id="`,`states" data-states></select>
              </span>
              <div class="`,`sel-arrow">
                <div class="`,`d-s-arrow"></div>
              </div>
            </div>
          </span>
        </div>
      </div>
      <div id="`,'tags-field" class="',`field">
        <div id="`,`tags-c" data-selectors></div>
        <input id="`,`new" data-input />
        <span id="`,'add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',` </span>
        <span class="`,"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',` </span>
      </div>
      <div class="`,`sels-info">
        <div class="`,'label-sel">',`:</div>
        <div class="`,`sels" data-selected></div>
      </div>`])),l,l,l,l,s,l,l,l,c,c,c,l,c,c,l,c,l,l,l,l,l,i,l,l,o,l,l,t,l)},r.prototype.events=function(){return{"change [data-states]":"stateChanged","click [data-add]":"startNewTag","focusout [data-input]":"endNewTag","keyup [data-input]":"onInputKeyUp","click [data-sync-style]":"syncStyle"}},r.prototype.syncStyle=function(){var e=this.em,t=this.getTarget(),s=e.Css,o={noDisabled:1},i=this.getCommonSelectors({opts:o}),l=e.get("state"),c=e.getCurrentMedia(),d=[],h=s.get(i,l,c)||s.add(i,l,c),m;this.getTargets().forEach(function(y){var x=s.getIdRule(y.getId(),{state:l,mediaText:c});m=x.getStyle(),x.setStyle({}),d.push(x)}),m&&h.addStyle(m),e.trigger("component:toggled"),e.trigger("component:sync-style",{component:t,selectors:i,mediaText:c,rule:h,ruleComponents:d,state:l})},r.prototype.tagRemoved=function(e){this.updateStateVis()},r.prototype.addNew=function(e){this.addToClasses(e)},r.prototype.startNewTag=function(){var e,t;(e=this.$addBtn)===null||e===void 0||e.css({display:"none"}),(t=this.$input)===null||t===void 0||t.show().focus()},r.prototype.endNewTag=function(){var e,t;(e=this.$addBtn)===null||e===void 0||e.css({display:""}),(t=this.$input)===null||t===void 0||t.hide().val("")},r.prototype.onInputKeyUp=function(e){var t;e.keyCode===13?(e.preventDefault(),this.addNewTag((t=this.$input)===null||t===void 0?void 0:t.val())):e.keyCode===27&&this.endNewTag()},r.prototype.checkStates=function(){var e=this.em.getState(),t=this.getStates();t&&t.val(e)},r.prototype.componentChanged=function(e){var t=e===void 0?{}:e,s=t.targets;this.updateSelection(s)},r.prototype.updateSelection=function(e){var t=e||this.getTargets();t=(0,Ce.isArray)(t)?t:[t];var s=[];return t&&t.length&&(s=this.getCommonSelectors({targets:t}),this.checkSync({validSelectors:s})),this.collection.reset(s),this.updateStateVis(t),this.module.__trgCustom(),s},r.prototype.getCommonSelectors=function(e){var t=e===void 0?{}:e,s=t.targets,o=t.opts,i=o===void 0?{}:o,l=s||this.getTargets();return this.module.__getCommonSelectors(l,i)},r.prototype._commonSelectors=function(){for(var e,t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];return(e=this.module).__common.apply(e,t)},r.prototype.checkSync=function(){var e=this,t=e.$btnSyncEl,s=e.config,o=e.collection,i=this.getTarget(),l;if(i&&s.componentFirst&&o.length){var c=i.getStyle();l=!(0,Ce.isEmpty)(c)}t&&t[l?"show":"hide"]()},r.prototype.getTarget=function(){return this.target.getSelected()},r.prototype.getTargets=function(){return this.target.getSelectedAll()},r.prototype.updateStateVis=function(e){var t=this.em,s=t&&t.getConfig().avoidInlineStyle,o=this.collection.length||s?"":"none";this.getStatesC().css("display",o),this.updateSelector(e)},r.prototype.__handleStateChange=function(){this.updateSelector(this.getTargets())},r.prototype.updateSelector=function(e){var t=this,s=this.el.querySelector("[data-selected]"),o=[],i=e||this.getTargets();i=(0,Ce.isArray)(i)?i:[i],i.forEach(function(l){return o.push(t.__getName(l))}),s&&(s.innerHTML=o.join(", ")),this.checkStates()},r.prototype.__getName=function(e){var t=this,s=t.pfx,o=t.config,i=t.em,l=o.selectedName,c=o.componentFirst,d;if((0,Ce.isString)(e))d=Ni(F5||(F5=Ng(['<span class="','sel-gen">',"</span>"],['<span class="','sel-gen">',"</span>"])),s,e);else{var h=e?.getSelectors();if(!h)return"";var m=h.getStyleable(),y=i.get("state"),x=e.getId?Ni(B5||(B5=Ng(['<span class="','sel-cmp">',`</span>
            <span class="`,'sel-id">#',"</span>"],['<span class="','sel-cmp">',`</span>
            <span class="`,'sel-id">#',"</span>"])),s,e.getName(),s,e.getId()):"";d=this.collection.getFullString(m),d=d?Ni(z5||(z5=Ng(['<span class="','sel-rule">',"</span>"],['<span class="','sel-rule">',"</span>"])),s,d):e.get("selectorsAdd")||x,d=c&&x?x:d,d+=y?Ni(U5||(U5=Ng(['<span class="','sel-state">:',"</span>"],['<span class="','sel-state">:',"</span>"])),s,y):"",d=l?l({result:d,state:y,target:e}):d}return d&&'<span class="'.concat(s,'sel">').concat(d,"</span>")},r.prototype.stateChanged=function(e){var t=this.em,s=e.target.value;t.set("state",s)},r.prototype.addNewTag=function(e){var t=e.trim();t&&(this.module.addSelected({label:t}),this.endNewTag())},r.prototype.addToClasses=function(e,t){var s=t,o=this.getClasses(),i=new yH({model:e,config:this.config,coll:this.collection,module:this.module}).render().el;return s?s.appendChild(i):o.append(i),i},r.prototype.renderClasses=function(){var e=this,t=document.createDocumentFragment(),s=this.getClasses();s.empty(),this.collection.each(function(o){return e.addToClasses(o,t)}),s.append(t)},r.prototype.getClasses=function(){return this.$el.find("[data-selectors]")},r.prototype.getStates=function(){if(!this.$states){var e=this.$el.find("[data-states]");this.$states=e[0]&&e}return this.$states},r.prototype.getStatesC=function(){return this.$statesC||(this.$statesC=this.$el.find("#"+this.stateInputC)),this.$statesC},r.prototype.renderStates=function(){var e=this,t=e.module,s=e.em,o=s.t("selectorManager.emptyState"),i=t.getStates().map(function(c){var d=s.t("selectorManager.states.".concat(c.id))||c.getLabel()||c.id;return'<option value="'.concat(c.id,'">').concat(d,"</option>")}).join(""),l=this.getStates();l&&l.html('<option value="">'.concat(o,"</option>").concat(i)),this.checkStates()},r.prototype.render=function(){var e=this,t=e.em,s=e.pfx,o=e.ppfx,i=e.config,l=e.$el,c=e.el,d=i.render,h=i.iconSync,m=i.iconAdd,y={iconSync:h,iconAdd:m,labelHead:t.t("selectorManager.label"),labelInfo:t.t("selectorManager.selected"),ppfx:o,pfx:s,el:c};l.html(this.template(y));var x=d&&d(y);return x&&x!==c&&l.empty().append(x),this.$input=l.find("[data-input]"),this.$addBtn=l.find("[data-add]"),this.$classes=l.find("#"+s+"tags-c"),this.$btnSyncEl=l.find("[data-sync-style]"),this.$input.hide(),this.renderStates(),this.renderClasses(),l.attr("class","".concat(this.className," ").concat(o,"one-bg ").concat(o,"two-color")),this},r})(Sr.Ss);const bH=vH;var D5,F5,B5,z5,U5,wH=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),ey=function(){return ey=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},ey.apply(this,arguments)},Uj=function(a,r,e){if(e||arguments.length===2)for(var t=0,s=r.length,o;t<s;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return a.concat(o||Array.prototype.slice.call(r))},$5=function(a){return(0,Ce.isString)(a)&&a[0]=="#"},V5=function(a){return(0,Ce.isString)(a)&&a[0]=="."},jH=(function(a){wH(r,a);function r(e){var t=a.call(this,e,"SelectorManager",new Mu([]),Fv,fH(),{skipListen:!0})||this;t.Selector=si,t.Selectors=Mu,t.events=Fv,t.storageKey="",(0,Ce.bindAll)(t,"__updateSelectedByComponents");var s=t,o=s.config,i=s.events,l=o.pStylePrefix;l&&(o.stylePrefix=l+o.stylePrefix),t.all=new Mu(o.selectors),t.selected=new Mu([],{em:e,config:o}),t.states=new Sr.pM(o.states.map(function(h){return new zj(h)}),{model:zj}),t.model=new Sr.Kx({cFirst:o.componentFirst,_undo:!0}),t.__update=(0,Ce.debounce)(function(){return t.__trgCustom()},0),t.__initListen({collections:[t.states,t.selected],propagate:[{entity:t.states,event:i.state}]}),e.on("change:state",function(h,m){return e.trigger(i.state,m)}),t.model.on("change:cFirst",function(h,m){return e.trigger("selector:type",m)});var c="".concat(ja.I.update,":classes");e.on("component:toggled ".concat(c),t.__updateSelectedByComponents);var d="component:toggled ".concat(c," change:device styleManager:update selector:state selector:type style:target");return t.model.listenTo(e,d,function(){return t.__update()}),t}return r.prototype.__trgCustom=function(e){this.em.trigger(this.events.custom,this.__customData(e))},r.prototype.getAll=function(e){return e===void 0&&(e={}),this.all?e.array?Uj([],this.all.models,!0):this.all:[]},r.prototype.__customData=function(e){return e===void 0&&(e={}),this.__ctn=this.__ctn||e.container,{states:this.getStates(),selected:this.getSelected(),container:this.__ctn}},r.prototype.postRender=function(){this.__appendTo(),this.__trgCustom()},r.prototype.select=function(e,t){t===void 0&&(t={});var s=Array.isArray(e)?e:[e],o=this.em.Styles.select(s,t);this.selected.reset(this.__getCommonSelectors(o));var i=this.selectorTags,l=o.filter(function(c){return c}).map(function(c){return(0,Zt.isComponent)(c)||(0,Zt.isRule)(c)&&!c.get("selectorsAdd")?c:c.getSelectorsString()});return i&&i.componentChanged({targets:l}),this},r.prototype.addSelector=function(e,t,s){t===void 0&&(t={}),s===void 0&&(s={});var o=ey({},t);(0,Ce.isObject)(e)?o=e:o.name=e,$5(o.name)?(o.name=o.name.substr(1),o.type=si.TYPE_ID):V5(o.name)&&(o.name=o.name.substr(1)),o.label&&!o.name&&(o.name=this.escapeName(o.label));var i=this,l=i.all,c=i.em,d=i.config,h=l.get(o);if(!h){var m=o instanceof si?o:new si(o,ey(ey({},s),{config:d,em:c}));return l.add(m,s)}return h},r.prototype.getSelector=function(e,t){return t===void 0&&(t=si.TYPE_CLASS),$5(e)?(e=e.substr(1),t=si.TYPE_ID):V5(e)&&(e=e.substr(1)),this.all.get({name:e,type:t})},r.prototype.add=function(e,t){var s=this;t===void 0&&(t={});var o=(0,Ce.isString)(e)?{}:t;return(0,Ce.isArray)(e)?e.map(function(i){return s.addSelector(i,t,o)}):this.addSelector(e,t,o)},r.prototype.addClass=function(e){var t=this,s=[];return(0,Ce.isString)(e)&&(e=e.trim().split(" ").filter(Boolean)),e.forEach(function(o){return s.push(t.addSelector(o))}),s},r.prototype.get=function(e,t){var s=this;if((0,Ce.isArray)(e)){var o=[],i=e.map(function(l){return s.getSelector(l)}).filter(Boolean);return i.forEach(function(l){return o.indexOf(l)<0&&o.push(l)}),o}else return this.getSelector(e,t)},r.prototype.remove=function(e,t){return this.__remove(e,t)},r.prototype.rename=function(e,t,s){var o=this.escapeName(t),i=this.get(o);return i||e.set({name:o,label:t},s)},r.prototype.setState=function(e){return this.em.setState(e),this},r.prototype.getState=function(){return this.em.getState()},r.prototype.getStates=function(){return Uj([],this.states.models,!0)},r.prototype.setStates=function(e,t){return this.states.reset(e.map(function(s){return new zj(s)}),t)},r.prototype.getSelected=function(){return this.__getCommon()},r.prototype.getSelectedAll=function(){return Uj([],this.selected.models,!0)},r.prototype.addSelected=function(e){var t=this.add(e);this.em.getSelectedAll().forEach(function(s){s.getSelectors().add(t)})},r.prototype.removeSelected=function(e){this.em.getSelectedAll().forEach(function(t){!e.get("protected")&&t&&t.getSelectors().remove(e)})},r.prototype.duplicateSelected=function(e,t){var s=this;t===void 0&&(t={});var o=this.em,i=this.getSelected();if(!(i.indexOf(e)<0)){var l=this.getState(),c=o.getCurrentMedia(),d=o.Css.get(i,l,c),h=d?.getStyle();if(o.getSelectedAll().forEach(function(y){var x=y.getSelectors();if(x.includes(e)){var b=t.suffix||" copy",v=e.getLabel(),j=s.addSelector("".concat(v).concat(b)),S=x.indexOf(e);x.remove(e),x.add(j,{at:S})}}),h){var m=o.Css.add(this.getSelected(),l,c);m.setStyle(h)}}},r.prototype.getSelectedTargets=function(){return this.em.Styles.getSelectedAll()},r.prototype.setComponentFirst=function(e){this.getConfig().componentFirst=e,this.model.set({cFirst:e})},r.prototype.getComponentFirst=function(){return this.getConfig().componentFirst},r.prototype.escapeName=function(e){var t=this.getConfig().escapeName;return t?t(e):si.escapeName(e)},r.prototype.render=function(e){var t=this.selectorTags,s=this.getConfig(),o=t?.el;return this.selected.reset(e),this.selectorTags=new bH({el:o,collection:this.selected,module:this,config:s}),this.selectorTags.render().el},r.prototype.destroy=function(){var e=this,t=e.selectorTags,s=e.model;s.stopListening(),this.__update.cancel(),this.__destroy(),t?.remove(),this.selectorTags=void 0},r.prototype.load=function(){},r.prototype.store=function(){},r.prototype.__getCommon=function(){return this.__getCommonSelectors(this.em.getSelectedAll())},r.prototype.__getCommonSelectors=function(e,t){t===void 0&&(t={});var s=e.map(function(o){return o.getSelectors&&o.getSelectors().getValid(t)}).filter(Boolean);return this.__common.apply(this,s)},r.prototype.__common=function(){for(var e=this,t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];return t.length?t.length===1?t[0]:t.length===2?t[0].filter(function(o){return t[1].indexOf(o)>=0}):t.slice(1).reduce(function(o,i){return e.__common(o,i)},t[0]):[]},r.prototype.__updateSelectedByComponents=function(){this.selected.reset(this.__getCommon())},r})(qd);const aO=jH;var CH=function(){return{textTags:["br","b","i","u","a","ul","ol"],textTypes:["text","textnode","comment"],parserCss:void 0,parserHtml:void 0,optionsHtml:{htmlType:"text/html",allowScripts:!1,allowUnsafeAttr:!1,allowUnsafeAttrValue:!1,keepEmptyTextNodes:!1,convertDataGjsAttributesHyphens:!1}}};const SH=CH;var Kl,Gi={MEDIA_RULE:4,FONT_FACE_RULE:5,PAGE_RULE:6,KEYFRAMES_RULE:7,COUNTER_STYLE_RULE:11,SUPPORTS_RULE:12,DOCUMENT_RULE:13,FONT_FEATURE_VALUES_RULE:14,VIEWPORT_RULE:15},Lh=(Kl={},Kl[Gi.MEDIA_RULE]="media",Kl[Gi.FONT_FACE_RULE]="font-face",Kl[Gi.PAGE_RULE]="page",Kl[Gi.KEYFRAMES_RULE]="keyframes",Kl[Gi.COUNTER_STYLE_RULE]="counter-style",Kl[Gi.SUPPORTS_RULE]="supports",Kl[Gi.DOCUMENT_RULE]="document",Kl[Gi.FONT_FEATURE_VALUES_RULE]="font-feature-values",Kl[Gi.VIEWPORT_RULE]="viewport",Kl),sO=(0,Ce.keys)(Lh),zS=[Gi.FONT_FACE_RULE,Gi.PAGE_RULE,Gi.COUNTER_STYLE_RULE,Gi.VIEWPORT_RULE],NH=sO.filter(function(a){return zS.indexOf(Number(a))<0}).map(function(a){return Lh[a]}).concat(["container","layer"]),kH=zS.map(function(a){return Lh[a]}),oO=function(a){a===void 0&&(a="");for(var r=[],e=[],t=a.split(","),s=0,o=t.length;s<o;s++){var i=t[s].trim();if(/^(\.{1}[\w\-]+)+(:{1,2}[\w\-()]+)?$/gi.test(i)||/^(#{1}[\w\-]+){1}(:{1,2}[\w\-()]+)?$/gi.test(i)){var l=i.split(".").filter(Boolean);e.push(l)}else r.push(i)}return{result:e,add:r}},_H=function(a){for(var r=a.style,e={},t=0,s=r.length;t<s;t++){var o=r[t],i=r.getPropertyValue(o),l=r.getPropertyPriority(o);e[o]="".concat(i).concat(l?" !".concat(l):"")}return e},W5=function(a){var r=a.conditionText||a.media&&a.media.mediaText||a.name||a.selectorText||"";return r.trim()},dC=function(a,r,e){r===void 0&&(r={}),e===void 0&&(e={});var t={},s=a.length,o=a[s-1],i=o?o.split(/:(.+)/):[],l=i[1],c=e.atRule,d=e.selectorsAdd,h=e.mediaText,m=kH.indexOf(c)>=0;return m&&(t.singleAtRule=!0),c&&(t.atRuleType=c),d&&(t.selectorsAdd=d),h&&(t.mediaText=h),l&&(a[s-1]=i[0],t.state=l,i.splice(i.length-1,1)),t.selectors=a,t.style=r,t},H5=function(a){var r=a.cssText,e=r===void 0?"":r;return NH.find(function(t){return e.indexOf("@".concat(t))===0})},iO=function(a){for(var r=[],e=a.cssRules||[],t=0,s=e.length;t<s;t++){var o=e[t],i=o.type,l=!1,c="",d="",h=o.selectorText||o.keyText||"",m=zS.indexOf(i)>=0;if(m)l=!0,c=Lh[i],d=W5(o);else if(sO.indexOf("".concat(i))>=0||!i&&H5(o)){var y=iO(o),x=Lh[i]||H5(o);d=W5(o);for(var b=0,v=y.length;b<v;b++){var j=y[b];d&&(j.mediaText=d),j.atRuleType=x}r=r.concat(y)}if(!(!h&&!m)){for(var S=_H(o),k=oO(h),N=k.add,P=k.result,R=void 0,F=0,z=P.length;F<z;F++){var H=dC(P[F],S,{atRule:Lh[i]});r.push(H),R=H}if(N.length){var V=N.join(", ");if(R)R.selectorsAdd=V;else{var H={selectors:[],selectorsAdd:V,style:S};l&&(H.singleAtRule=l),c&&(H.atRuleType=c),d&&(H.mediaText=d),r.push(H)}}}}return r};const EH=(function(a){var r=document.createElement("style");r.innerHTML=a,document.head.appendChild(r);var e=r.sheet;return document.head.removeChild(r),e?iO(e):[]});var TH=function(a,r){return r===void 0&&(r={}),{parse:function(e,t){var s=this;t===void 0&&(t={});var o=[],i=r.parserCss,l=a?.Editor,c=[],d,h=a?.Parser,m={input:e};h?.__emitEvent(Du.cssBefore,m);var y=m.input;try{c=i?i(y,l):EH(y)}catch(x){if(d=x,t.throwOnError)throw x}return c.forEach(function(x){return o=o.concat(s.checkNode(x))}),h?.__emitEvent(Du.css,{input:y,output:o,nodes:c,error:d}),o},checkNode:function(e){var t=e.selectors,s=e.style,o=[e];if((0,Ce.isString)(t)){var i=[],l=e,c=oO(t),d=c.result,h=c.add.join(", "),m={atRule:l.atRule,mediaText:l.params};if(d.length?d.forEach(function(x){i.push(dC(x,s,m))}):i.push(dC([],s,m)),h){var y=i[i.length-1];y.selectorsAdd=h}o=i}return o}}};const OH=TH;var PH=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),uC=function(){return uC=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},uC.apply(this,arguments)},AH=(function(a){PH(r,a);function r(e){var t=a.call(this,e,"Parser",SH())||this;t.events=Du;var s=t.config;return t.parserCss=OH(e,s),t.parserHtml=P3(e,s),t}return r.prototype.parseHtml=function(e,t){t===void 0&&(t={});var s=this,o=s.em,i=s.parserHtml;return i.compTypes=o.Components.getTypes()||[],i.parse(e,this.parserCss,t)},r.prototype.parseCss=function(e){return this.parserCss.parse(e)},r.prototype.__emitEvent=function(e,t){var s=this,o=s.em,i=s.events;o.trigger(e,t),o.trigger(i.all,uC({event:e},t))},r.prototype.destroy=function(){},r})(Ai);const MH=AH;var IH=function(){return{id:"gjs-",type:"local",autosave:!0,autoload:!0,stepsBeforeSave:1,recovery:!1,onStore:function(a){return a},onLoad:function(a){return a},options:{local:{key:"gjsProject",checkLocal:!0},remote:{headers:{},urlStore:"",urlLoad:"",contentTypeJson:!0,fetchOptions:"",credentials:"include",onStore:function(a){return a},onLoad:function(a){return a}}}}};const RH=IH;var q5=function(a,r,e,t){function s(o){return o instanceof e?o:new e(function(i){i(o)})}return new(e||(e=Promise))(function(o,i){function l(h){try{d(t.next(h))}catch(m){i(m)}}function c(h){try{d(t.throw(h))}catch(m){i(m)}}function d(h){h.done?o(h.value):s(h.value).then(l,c)}d((t=t.apply(a,r||[])).next())})},G5=function(a,r){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},t,s,o,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(d){return function(h){return c([d,h])}}function c(d){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,d[0]&&(e=0)),e;)try{if(t=1,s&&(o=d[0]&2?s.return:d[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,d[1])).done)return o;switch(s=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return e.label++,{value:d[1],done:!1};case 5:e.label++,s=d[1],d=[0];continue;case 7:d=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){e=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){e.label=d[1];break}if(d[0]===6&&e.label<o[1]){e.label=o[1],o=d;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(d);break}o[2]&&e.ops.pop(),e.trys.pop();continue}d=r.call(a,e)}catch(h){d=[6,h],s=0}finally{t=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},LH=(function(){function a(){}return a.prototype.store=function(r){return q5(this,arguments,void 0,function(e,t){return t===void 0&&(t={}),G5(this,function(s){return this.hasLocal(t,!0)&&localStorage.setItem(t.key,JSON.stringify(e)),[2,e]})})},a.prototype.load=function(){return q5(this,arguments,void 0,function(r){var e;return r===void 0&&(r={}),G5(this,function(t){return e={},this.hasLocal(r,!0)&&(e=JSON.parse(localStorage.getItem(r.key)||"{}")),[2,e]})})},a.prototype.hasLocal=function(r,e){if(r===void 0&&(r={}),r.checkLocal&&(!(0,Zt.hasWin)()||!localStorage)){if(e)throw new Error("localStorage not available");return!1}return!0},a})();const DH=LH;function lp(a){"@babel/helpers - typeof";return lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},lp(a)}function FH(a){var r=this.constructor;return this.then(function(e){return r.resolve(a()).then(function(){return e})},function(e){return r.resolve(a()).then(function(){return r.reject(e)})})}const BH=FH;function zH(a){var r=this;return new r(function(e,t){if(!(a&&typeof a.length<"u"))return t(new TypeError(lp(a)+" "+a+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var s=Array.prototype.slice.call(a);if(s.length===0)return e([]);var o=s.length;function i(c,d){if(d&&(lp(d)==="object"||typeof d=="function")){var h=d.then;if(typeof h=="function"){h.call(d,function(m){i(c,m)},function(m){s[c]={status:"rejected",reason:m},--o===0&&e(s)});return}}s[c]={status:"fulfilled",value:d},--o===0&&e(s)}for(var l=0;l<s.length;l++)i(l,s[l])})}const UH=zH;function lO(a,r){this.name="AggregateError",this.errors=a,this.message=r||""}lO.prototype=Error.prototype;function $H(a){var r=this;return new r(function(e,t){if(!(a&&typeof a.length<"u"))return t(new TypeError("Promise.any accepts an array"));var s=Array.prototype.slice.call(a);if(s.length===0)return t();for(var o=[],i=0;i<s.length;i++)try{r.resolve(s[i]).then(e).catch(function(l){o.push(l),o.length===s.length&&t(new lO(o,"All promises were rejected"))})}catch(l){t(l)}})}const VH=$H;var WH=setTimeout;function cO(a){return!!(a&&typeof a.length<"u")}function HH(){}function qH(a,r){return function(){a.apply(r,arguments)}}function Ms(a){if(!(this instanceof Ms))throw new TypeError("Promises must be constructed via new");if(typeof a!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],uO(a,this)}function dO(a,r){for(;a._state===3;)a=a._value;if(a._state===0){a._deferreds.push(r);return}a._handled=!0,Ms._immediateFn(function(){var e=a._state===1?r.onFulfilled:r.onRejected;if(e===null){(a._state===1?fC:wy)(r.promise,a._value);return}var t;try{t=e(a._value)}catch(s){wy(r.promise,s);return}fC(r.promise,t)})}function fC(a,r){try{if(r===a)throw new TypeError("A promise cannot be resolved with itself.");if(r&&(lp(r)==="object"||typeof r=="function")){var e=r.then;if(r instanceof Ms){a._state=3,a._value=r,pC(a);return}else if(typeof e=="function"){uO(qH(e,r),a);return}}a._state=1,a._value=r,pC(a)}catch(t){wy(a,t)}}function wy(a,r){a._state=2,a._value=r,pC(a)}function pC(a){a._state===2&&a._deferreds.length===0&&Ms._immediateFn(function(){a._handled||Ms._unhandledRejectionFn(a._value)});for(var r=0,e=a._deferreds.length;r<e;r++)dO(a,a._deferreds[r]);a._deferreds=null}function GH(a,r,e){this.onFulfilled=typeof a=="function"?a:null,this.onRejected=typeof r=="function"?r:null,this.promise=e}function uO(a,r){var e=!1;try{a(function(t){e||(e=!0,fC(r,t))},function(t){e||(e=!0,wy(r,t))})}catch(t){if(e)return;e=!0,wy(r,t)}}Ms.prototype.catch=function(a){return this.then(null,a)};Ms.prototype.then=function(a,r){var e=new this.constructor(HH);return dO(this,new GH(a,r,e)),e};Ms.prototype.finally=BH;Ms.all=function(a){return new Ms(function(r,e){if(!cO(a))return e(new TypeError("Promise.all accepts an array"));var t=Array.prototype.slice.call(a);if(t.length===0)return r([]);var s=t.length;function o(l,c){try{if(c&&(lp(c)==="object"||typeof c=="function")){var d=c.then;if(typeof d=="function"){d.call(c,function(h){o(l,h)},e);return}}t[l]=c,--s===0&&r(t)}catch(h){e(h)}}for(var i=0;i<t.length;i++)o(i,t[i])})};Ms.any=VH;Ms.allSettled=UH;Ms.resolve=function(a){return a&&lp(a)==="object"&&a.constructor===Ms?a:new Ms(function(r){r(a)})};Ms.reject=function(a){return new Ms(function(r,e){e(a)})};Ms.race=function(a){return new Ms(function(r,e){if(!cO(a))return e(new TypeError("Promise.race accepts an array"));for(var t=0,s=a.length;t<s;t++)Ms.resolve(a[t]).then(r,e)})};Ms._immediateFn=typeof setImmediate=="function"&&function(a){setImmediate(a)}||function(a){WH(a,0)};Ms._unhandledRejectionFn=function(r){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",r)};const hC=Ms;(0,Zt.hasWin)()&&(window.Promise=window.Promise||hC);const fO=typeof fetch=="function"?fetch.bind():function(a,r){return new hC(function(e,t){var s=new XMLHttpRequest;s.open(r.method||"get",a),s.withCredentials=r.credentials=="include";for(var o in r.headers||{})s.setRequestHeader(o,r.headers[o]);s.onload=function(i){return e({status:s.status,statusText:s.statusText,text:function(){return hC.resolve(s.responseText)}})},s.onerror=t,s.upload&&r.onProgress&&(s.upload.onprogress=r.onProgress),r.body?s.send(r.body):s.send()})};var Bv=function(){return Bv=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Bv.apply(this,arguments)},K5=function(a,r,e,t){function s(o){return o instanceof e?o:new e(function(i){i(o)})}return new(e||(e=Promise))(function(o,i){function l(h){try{d(t.next(h))}catch(m){i(m)}}function c(h){try{d(t.throw(h))}catch(m){i(m)}}function d(h){h.done?o(h.value):s(h.value).then(l,c)}d((t=t.apply(a,r||[])).next())})},Y5=function(a,r){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},t,s,o,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(d){return function(h){return c([d,h])}}function c(d){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,d[0]&&(e=0)),e;)try{if(t=1,s&&(o=d[0]&2?s.return:d[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,d[1])).done)return o;switch(s=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return e.label++,{value:d[1],done:!1};case 5:e.label++,s=d[1],d=[0];continue;case 7:d=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){e=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){e.label=d[1];break}if(d[0]===6&&e.label<o[1]){e.label=o[1],o=d;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(d);break}o[2]&&e.ops.pop(),e.trys.pop();continue}d=r.call(a,e)}catch(h){d=[6,h],s=0}finally{t=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},KH=(function(){function a(){}return a.prototype.store=function(r){return K5(this,arguments,void 0,function(e,t){return t===void 0&&(t={}),Y5(this,function(s){switch(s.label){case 0:return[4,this.request(t.urlStore,this.__props(t,e),t)];case 1:return[2,s.sent()]}})})},a.prototype.load=function(){return K5(this,arguments,void 0,function(r){return r===void 0&&(r={}),Y5(this,function(e){switch(e.label){case 0:return[4,this.request(r.urlLoad,this.__props(r),r)];case 1:return[2,e.sent()]}})})},a.prototype.request=function(r,e,t){return e===void 0&&(e={}),t===void 0&&(t={}),fO(r,e).then(function(s){var o=s.text(),i=(s.status/200|0)===1;return i?o:o.then(Promise.reject)}).then(function(s){var o=s&&(0,Ce.isString)(s);return t.contentTypeJson&&o?JSON.parse(s):s})},a.prototype.__props=function(r,e){r===void 0&&(r={});var t=r.contentTypeJson,s=r.headers||{},o=r.fetchOptions||{},i="X-Requested-With",l="Content-Type",c;if((0,Ce.isUndefined)(s[i])&&(s[i]="XMLHttpRequest"),(0,Ce.isUndefined)(s[l])&&t&&(s[l]="application/json; charset=utf-8"),e)if(t)c=JSON.stringify(e);else{c=new FormData;for(var d in e)c.append(d,e[d])}var h={method:c?"POST":"GET",credentials:r.credentials,headers:s,body:c};return Bv(Bv({},h),(0,Ce.isFunction)(o)?o(h):o)},a})();const YH=KH;var mC;(function(a){a.start="storage:start",a.startStore="storage:start:store",a.startLoad="storage:start:load",a.load="storage:load",a.store="storage:store",a.after="storage:after",a.afterStore="storage:after:store",a.afterLoad="storage:after:load",a.end="storage:end",a.endStore="storage:end:store",a.endLoad="storage:end:load",a.error="storage:error",a.errorStore="storage:error:store",a.errorLoad="storage:error:load"})(mC||(mC={}));const Jo=mC;var ZH=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),wh=function(){return wh=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},wh.apply(this,arguments)},$j=function(a,r,e,t){function s(o){return o instanceof e?o:new e(function(i){i(o)})}return new(e||(e=Promise))(function(o,i){function l(h){try{d(t.next(h))}catch(m){i(m)}}function c(h){try{d(t.throw(h))}catch(m){i(m)}}function d(h){h.done?o(h.value):s(h.value).then(l,c)}d((t=t.apply(a,r||[])).next())})},Vj=function(a,r){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},t,s,o,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(d){return function(h){return c([d,h])}}function c(d){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,d[0]&&(e=0)),e;)try{if(t=1,s&&(o=d[0]&2?s.return:d[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,d[1])).done)return o;switch(s=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return e.label++,{value:d[1],done:!1};case 5:e.label++,s=d[1],d=[0];continue;case 7:d=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){e=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){e.label=d[1];break}if(d[0]===6&&e.label<o[1]){e.label=o[1],o=d;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(d);break}o[2]&&e.ops.pop(),e.trys.pop();continue}d=r.call(a,e)}catch(h){d=[6,h],s=0}finally{t=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},g0="local",Z5="remote",XH=(function(a){ZH(r,a);function r(e){var t=a.call(this,e,"StorageManager",RH())||this;t.storages={},t.events=Jo;var s=t.config;return s._disable&&(s.type=void 0),t.storages={},t.add(g0,new DH),t.add(Z5,new YH),t.setCurrent(s.type),t}return r.prototype.isAutosave=function(){return!!this.config.autosave},r.prototype.setAutosave=function(e){return this.config.autosave=!!e,this},r.prototype.getStepsBeforeSave=function(){return this.config.stepsBeforeSave},r.prototype.setStepsBeforeSave=function(e){return this.config.stepsBeforeSave=e,this},r.prototype.add=function(e,t){return this.storages[e]=t,this},r.prototype.get=function(e){return this.storages[e]},r.prototype.getStorages=function(){return this.storages},r.prototype.getCurrent=function(){return this.config.currentStorage},r.prototype.setCurrent=function(e){return this.getConfig().currentStorage=e,this},r.prototype.getCurrentStorage=function(){return this.get(this.getCurrent())},r.prototype.getStorageOptions=function(e){return this.getCurrentOptions(e)},r.prototype.store=function(e){return $j(this,arguments,void 0,function(t,s){var o,i,l,c,d,h;return s===void 0&&(s={}),Vj(this,function(m){switch(m.label){case 0:o=this.getCurrentStorage(),i=wh(wh({},this.getCurrentOptions()),s),l=this.getRecoveryStorage(),c=this.getCurrentOptions(g0),m.label=1;case 1:return m.trys.push([1,5,,9]),[4,this.__exec(o,i,t)];case 2:return m.sent(),d=l,d?[4,this.__exec(l,c,{})]:[3,4];case 3:d=m.sent(),m.label=4;case 4:return[3,9];case 5:return h=m.sent(),l?[4,this.__exec(l,c,t)]:[3,7];case 6:return m.sent(),[3,8];case 7:throw h;case 8:return[3,9];case 9:return[2,t]}})})},r.prototype.load=function(){return $j(this,arguments,void 0,function(e){var t,s,o,i,l;return e===void 0&&(e={}),Vj(this,function(c){switch(c.label){case 0:return t=this.getCurrentStorage(),s=wh(wh({},this.getCurrentOptions()),e),o=this.getRecoveryStorage(),o?[4,this.__exec(o,this.getCurrentOptions(g0))]:[3,5];case 1:if(l=c.sent(),(0,Ce.isEmpty)(l))return[3,5];c.label=2;case 2:return c.trys.push([2,4,,5]),[4,this.__askRecovery()];case 3:return c.sent(),i=l,[3,5];case 4:return c.sent(),[3,5];case 5:return i?[3,7]:[4,this.__exec(t,s)];case 6:i=c.sent(),c.label=7;case 7:return[2,i||{}]}})})},r.prototype.__askRecovery=function(){var e=this.em,t=this.getRecovery();return new Promise(function(s,o){(0,Ce.isFunction)(t)?t(s,o,e?.getEditor()):confirm(e?.t("storageManager.recover"))?s(null):o()})},r.prototype.getRecovery=function(){return this.config.recovery},r.prototype.getRecoveryStorage=function(){var e=this.getRecovery();return e&&this.getCurrent()===Z5&&this.get(g0)},r.prototype.__exec=function(e,t,s){return $j(this,void 0,void 0,function(){var o,i,l,c,d,h,m,y,x,b,v,j,S,k;return Vj(this,function(N){switch(N.label){case 0:if(o=s?"store":"load",i=this.getConfig(),l=i.onStore,c=i.onLoad,!e)return[2,s||{}];this.onStart(o,s),N.label=1;case 1:return N.trys.push([1,14,,15]),h=(k=this.em)===null||k===void 0?void 0:k.getEditor(),m=void 0,s?(x=l,x?[4,l(s,h)]:[3,3]):[3,7];case 2:x=N.sent(),N.label=3;case 3:return y=x||s,b=t.onStore,b?[4,t.onStore(y,h)]:[3,5];case 4:b=N.sent(),N.label=5;case 5:return y=b||y,[4,e.store(y,t)];case 6:return m=N.sent(),d=s,[3,13];case 7:return[4,e.load(t)];case 8:return m=N.sent(),d=this.__clearKeys(m),v=t.onLoad,v?[4,t.onLoad(d,h)]:[3,10];case 9:v=N.sent(),N.label=10;case 10:return d=v||d,j=c,j?[4,c(d,h)]:[3,12];case 11:j=N.sent(),N.label=12;case 12:d=j||d,N.label=13;case 13:return this.onAfter(o,d,m),this.onEnd(o,d,m),[3,15];case 14:throw S=N.sent(),this.onError(o,S),S;case 15:return[2,d]}})})},r.prototype.__clearKeys=function(e){e===void 0&&(e={});var t=this.getConfig(),s=new RegExp("^".concat(t.id)),o={};for(var i in e){var l=i.replace(s,"");o[l]=e[i]}return o},r.prototype.getCurrentOptions=function(e){var t=this.getConfig(),s=e||this.getCurrent();return t.options[s]||{}},r.prototype.onStart=function(e,t){var s=this.em;if(s){var o=e==="load"?Jo.startLoad:Jo.startStore;s.trigger(Jo.start,e,t),s.trigger(o,t)}},r.prototype.onAfter=function(e,t,s){var o=this.em;if(o){var i=e==="load"?Jo.afterLoad:Jo.afterStore;o.trigger(Jo.after),o.trigger(i,t,s);var l=e==="load"?Jo.load:Jo.store;o.trigger(l,t,s)}},r.prototype.onEnd=function(e,t,s){var o=this.em;if(o){var i=e==="load"?Jo.endLoad:Jo.endStore;o.trigger(Jo.end,e,t,s),o.trigger(i,t,s)}},r.prototype.onError=function(e,t){var s=this.em;if(s){var o=e==="load"?Jo.errorLoad:Jo.errorStore;s.trigger(Jo.error,t,e),s.trigger(o,t),this.onEnd(e,t)}},r.prototype.canAutoload=function(){var e=this.getCurrentStorage();return!!e&&!!this.config.autoload},r.prototype.destroy=function(){this.storages={}},r})(Ai);const QH=XH;var JH=function(){return{stylePrefix:"trt-",appendTo:"",optionsTarget:[{value:!1},{value:"_blank"}],custom:!1}};const eq=JH;var tq=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),ty=function(){return ty=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},ty.apply(this,arguments)},pO=(function(a){tq(r,a);function r(e){e===void 0&&(e={});var t=a.call(this,e)||this;t.events={},t.appendInput=!0;var s=e.config,o=s===void 0?{}:s,i=t,l=i.model,c=i.eventCapture,d=l.target,h=l.attributes.type;t.config=o,t.em=o.em,t.pfx=o.stylePrefix||"",t.ppfx=o.pStylePrefix||"",t.target=d,t.className=t.pfx+"trait",t.clsField="".concat(t.ppfx,"field ").concat(t.ppfx,"field-").concat(h);var m=[["change:value",t.onValueChange],["remove",t.removeView]];return m.forEach(function(y){var x=y[0],b=y[1];l.off(x,b),t.listenTo(l,x,b)}),l.view=t,t.listenTo(l,"change:label",t.render),t.listenTo(l,"change:placeholder",t.rerender),t.events={},c.forEach(function(y){return t.events[y]="onChange"}),t.delegateEvents(),t.init(),t}return r.prototype.attributes=function(){return this.model.get("attributes")||{}},r.prototype.templateLabel=function(e){var t=this.ppfx,s=this.getLabel();return'<div class="'.concat(t,'label" title="').concat(s,'">').concat(s,"</div>")},r.prototype.templateInput=function(e){var t=this.clsField;return'<div class="'.concat(t,'" data-input></div>')},r.prototype.getClbOpts=function(){return{component:this.target,trait:this.model,elInput:this.getInputElem()}},r.prototype.removeView=function(){this.remove(),this.removed()},r.prototype.init=function(){},r.prototype.removed=function(){},r.prototype.onRender=function(e){},r.prototype.onUpdate=function(e){},r.prototype.onEvent=function(e){},r.prototype.onChange=function(e){var t=this.getInputElem();t&&!(0,Ce.isUndefined)(t.value)&&this.model.set("value",t.value),this.onEvent(ty(ty({},this.getClbOpts()),{event:e}))},r.prototype.getValueForTarget=function(){return this.model.get("value")},r.prototype.setInputValue=function(e){var t=this.getInputElem();t&&(t.value=e)},r.prototype.onValueChange=function(e,t,s){s===void 0&&(s={});var o=this.model,i=this.getValueForTarget();s.fromTarget?(this.setInputValue(i),this.postUpdate()):o.setValue(i,s)},r.prototype.renderLabel=function(){var e=this,t=e.$el,s=e.target,o=this.getLabel(),i=this.templateLabel(s);this.createLabel&&(i=this.createLabel({label:o,component:s,trait:this})||""),t.find("[data-label]").append(i)},r.prototype.getLabel=function(){var e=this.em,t=this.model.attributes,s=t.label,o=t.name;return e.t("traitManager.traits.labels.".concat(o))||(0,Zt.capitalize)(s||o).replace(/-/g," ")},r.prototype.getComponent=function(){return this.target},r.prototype.getInputEl=function(){if(!this.$input){var e=this,t=e.em,s=e.model,o=s,i=s.attributes.name,l=o.get("placeholder")||o.get("default")||"",c=o.get("type")||"text",d=o.get("min"),h=o.get("max"),m=this.getModelValue(),y=(0,po.default)('<input type="'.concat(c,'">')),x=t.t("traitManager.traits.attributes.".concat(i))||{};y.attr(ty({placeholder:l},x)),(0,Ce.isUndefined)(m)||(o.set({value:m},{silent:!0}),y.prop("value",m)),d&&y.prop("min",d),h&&y.prop("max",h),this.$input=y}return this.$input.get(0)},r.prototype.getInputElem=function(){var e=this,t=e.input,s=e.$input;return t||s&&s.get&&s.get(0)||this.getElInput()},r.prototype.getModelValue=function(){return this.model.getValue()},r.prototype.getElInput=function(){return this.elInput},r.prototype.renderField=function(){var e=this,t=e.$el,s=e.appendInput,o=e.model,i=t.find("[data-input]"),l=i[i.length-1],c=o.el;c||(c=this.createInput?this.createInput(this.getClbOpts()):this.getInputEl()),(0,Ce.isString)(c)?(l.innerHTML=c,this.elInput=l.firstChild):(s?l.appendChild(c):l.insertBefore(c,l.firstChild),this.elInput=c),o.el=this.elInput},r.prototype.hasLabel=function(){var e=this.model.attributes.label;return!this.noLabel&&e!==!1},r.prototype.rerender=function(){delete this.model.el,this.render()},r.prototype.postUpdate=function(){this.onUpdate(this.getClbOpts())},r.prototype.render=function(){var e=this,t=e.$el,s=e.pfx,o=e.ppfx,i=e.model,l=i.attributes,c=l.type,d=l.id,h=this.hasLabel&&this.hasLabel(),m="".concat(s,"trait");delete this.$input;var y='<div class="'.concat(m," ").concat(m,"--").concat(c,`">
      `).concat(h?'<div class="'.concat(o,'label-wrp" data-label></div>'):"",`
      <div class="`).concat(o,"field-wrp ").concat(o,"field-wrp--").concat(c,`" data-input>
        `).concat(this.templateInput?(0,Ce.isFunction)(this.templateInput)?this.templateInput(this.getClbOpts()):this.templateInput:"",`
      </div>
    </div>`);return t.empty().append(y),h&&this.renderLabel(),this.renderField(),this.el.className="".concat(m,"__wrp ").concat(m,"__wrp-").concat(d),this.postUpdate(),this.onRender(this.getClbOpts()),this},r})(Sr.Ss);const $d=pO;pO.prototype.eventCapture=["change"];var rq=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),hO=(function(a){rq(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.templateInput=function(){return""},r.prototype.onChange=function(){this.handleClick()},r.prototype.handleClick=function(){this.model.runCommand()},r.prototype.renderLabel=function(){this.model.get("label")&&$d.prototype.renderLabel.apply(this)},r.prototype.getInputEl=function(){var e=this,t=e.model,s=e.ppfx,o=t.props(),i=o.labelButton,l=o.text,c=o.full,d=i||l,h="".concat(s,"btn"),m='<button type="button" class="'.concat(h,"-prim").concat(c?" ".concat(h,"--full"):"",'">').concat(d,"</button>");return m},r})($d);const nq=hO;hO.prototype.eventCapture=["click button"];var aq=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),sq=(function(a){aq(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.appendInput=!1,e}return r.prototype.templateInput=function(){var e=this,t=e.ppfx,s=e.clsField;return'<label class="'.concat(s,`" data-input>
    <i class="`).concat(t,`chk-icon"></i>
  </label>`)},r.prototype.onChange=function(){this.model.set("value",this.getInputElem().checked)},r.prototype.setInputValue=function(e){var t=this.getInputElem();t&&(t.checked=!!e)},r.prototype.getInputEl=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var s=!this.$input,o=$d.prototype.getInputEl.apply(this,e);if(s){var i=void 0,l=void 0,c=this,d=c.model,h=c.target,m=d.attributes.valueFalse,y=d.getName();d.changeProp?(i=h.get(y),l=i):(l=h.get("attributes")[y],i=!!(l||l==="")),!(0,Ce.isUndefined)(m)&&l===m&&(i=!1),o.checked=i}return o},r})($d);const oq=sq;function iq(a,r){if(!(0,Zt.hasWin)())return;var e={beforeShow:x,move:x,change:x,show:x,hide:x,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},t=[],s=!!/msie/i.exec(window.navigator.userAgent),o=(function(){function ie(Xe,Fe){return!!~(""+Xe).indexOf(Fe)}var _e=document.createElement("div"),le=_e.style;return le.cssText="background-color:rgba(0,0,0,.5)",ie(le.backgroundColor,"rgba")||ie(le.backgroundColor,"hsla")})(),i=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),l=(function(){var ie="";if(s)for(var _e=1;_e<=6;_e++)ie+="<div class='sp-"+_e+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",ie,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")})();function c(ie,_e,le,Xe){for(var Fe=[],dt=0;dt<ie.length;dt++){var lt=ie[dt];if(lt){var ft=A(lt),Ze=ft.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";Ze+=A.equals(_e,lt)?" sp-thumb-active":"";var Nt=ft.toString(Xe.preferredFormat||"rgb"),Mt=o?"background-color:"+ft.toRgbString():"filter:"+ft.toFilter();Fe.push('<span title="'+Nt+'" data-color="'+ft.toRgbString()+'" class="'+Ze+'"><span class="sp-thumb-inner" style="'+Mt+';"></span></span>')}else{var vt="sp-clear-display";Fe.push(a("<div />").append(a('<span data-color="" style="background-color:transparent;" class="'+vt+'"></span>').attr("title",Xe.noColorSelectedText)).html())}}return"<div class='sp-cf "+le+"'>"+Fe.join("")+"</div>"}function d(){for(var ie=0;ie<t.length;ie++)t[ie]&&t[ie].hide()}function h(ie,_e){var le=a.extend({},e,ie);return le.callbacks={move:v(le.move,_e),change:v(le.change,_e),show:v(le.show,_e),hide:v(le.hide,_e),beforeShow:v(le.beforeShow,_e)},le}function m(ie,_e){var le=h(_e,ie),Xe=le.flat,Fe=le.showSelectionPalette,dt=le.localStorageKey,lt=le.theme,ft=le.callbacks,Ze=S(ka,10),Nt=!1,Mt=!1,vt=!0,Jt=0,wr=0,Wt=0,ye=0,Be=0,tt=0,wt=0,Ut=0,er=0,zr=0,rn=1,_n=[],Ur=[],ar={},br=le.selectionPalette.slice(0),pn=le.maxSelectionSize,In="sp-dragging",on=null,Er=ie.ownerDocument;Er.body;var jr=a(ie),ht=!1,vr=a(l,Er).addClass(lt),Rn=vr.find(".sp-picker-container"),bn=vr.find(".sp-color"),En=vr.find(".sp-dragger"),Wr=vr.find(".sp-hue"),Bn=vr.find(".sp-slider"),te=vr.find(".sp-alpha-inner"),je=vr.find(".sp-alpha"),Re=vr.find(".sp-alpha-handle"),Ye=vr.find(".sp-input"),at=vr.find(".sp-palette"),jt=vr.find(".sp-initial"),Qe=vr.find(".sp-cancel"),$e=vr.find(".sp-clear"),ve=vr.find(".sp-choose"),Ve=vr.find(".sp-palette-toggle"),st=jr.is("input"),Ot=st&&jr.attr("type")==="color"&&k(),de=st&&!Xe,ke=de?a(i).addClass(lt).addClass(le.className).addClass(le.replacerClassName):a([]),ct=de?ke:jr,bt=ke.find(".sp-preview-inner"),Ft=le.color||st&&jr.val(),cr=!1,Br=le.preferredFormat,kt=!le.showButtons||le.clickoutFiresChange,Yr=!Ft,Xr=le.allowEmpty&&!Ot;function ma(){if(le.showPaletteOnly&&(le.showPalette=!0),Ve.text(le.showPaletteOnly?le.togglePaletteMoreText:le.togglePaletteLessText),le.palette){_n=le.palette.slice(0),Ur=a.isArray(_n[0])?_n:[_n],ar={};for(var qr=0;qr<Ur.length;qr++)for(var Gr=0;Gr<Ur[qr].length;Gr++){var cn=A(Ur[qr][Gr]).toRgbString();ar[cn]=!0}}vr.toggleClass("sp-flat",Xe),vr.toggleClass("sp-input-disabled",!le.showInput),vr.toggleClass("sp-alpha-enabled",le.showAlpha),vr.toggleClass("sp-clear-enabled",Xr),vr.toggleClass("sp-buttons-disabled",!le.showButtons),vr.toggleClass("sp-palette-buttons-disabled",!le.togglePaletteOnly),vr.toggleClass("sp-palette-disabled",!le.showPalette),vr.toggleClass("sp-palette-only",le.showPaletteOnly),vr.toggleClass("sp-initial-disabled",!le.showInitial),vr.addClass(le.className).addClass(le.containerClassName),ka()}function Jn(){if(s&&vr.find("*:not(input)").attr("unselectable","on"),ma(),de&&jr.after(ke).hide(),Xr||$e.hide(),Xe)jr.after(vr).hide();else{var qr=le.appendTo==="parent"?jr.parent():a(le.appendTo);qr.length!==1&&(qr=a("body")),qr.append(vr)}fa(),ct.bind("click.spectrum touchstart.spectrum",function(tn){ht||nr(),tn.stopPropagation(),a(tn.target).is("input")||tn.preventDefault()}),(jr.is(":disabled")||le.disabled===!0)&&Xn(),vr.click(b),Ye.change(mt),Ye.bind("paste",function(){setTimeout(mt,1)}),Ye.keydown(function(tn){tn.keyCode==13&&mt()}),Qe.text(le.cancelText),Qe.bind("click.spectrum",function(tn){tn.stopPropagation(),tn.preventDefault(),Vn(),Sn()}),$e.attr("title",le.clearText),$e.bind("click.spectrum",function(tn){tn.stopPropagation(),tn.preventDefault(),Yr=!0,ps(),Xe&&Zn(!0)}),ve.text(le.chooseText),ve.bind("click.spectrum",function(tn){tn.stopPropagation(),tn.preventDefault(),s&&Ye.is(":focus")&&Ye.trigger("change"),ro()&&(Zn(!0),Sn())}),Ve.text(le.showPaletteOnly?le.togglePaletteMoreText:le.togglePaletteLessText),Ve.bind("click.spectrum",function(tn){tn.stopPropagation(),tn.preventDefault(),le.showPaletteOnly=!le.showPaletteOnly,!le.showPaletteOnly&&!Xe&&vr.css("left","-="+(Rn.outerWidth(!0)+5)),ma()}),j(je,function(tn,Me,ot){rn=tn/Be,Yr=!1,ot.shiftKey&&(rn=Math.round(rn*10)/10),ps()},Lr,kr),j(Wr,function(tn,Me){Ut=parseFloat(Me/ye),Yr=!1,le.showAlpha||(rn=1),ps()},Lr,kr),j(bn,function(tn,Me,ot){if(!ot.shiftKey)on=null;else if(!on){var _t=er*Jt,It=wr-zr*wr,At=Math.abs(tn-_t)>Math.abs(Me-It);on=At?"x":"y"}var sr=!on||on==="x",$t=!on||on==="y";sr&&(er=parseFloat(tn/Jt)),$t&&(zr=parseFloat((wr-Me)/wr)),Yr=!1,le.showAlpha||(rn=1),ps()},Lr,kr),Ft?(zn(Ft),Yn(),Br=le.preferredFormat||A(Ft).getFormat(),Ns(Ft)):Yn(),Xe&&Ar();function Gr(tn){return tn.data&&tn.data.ignore?(zn(a(tn.target).closest(".sp-thumb-el").data("color")),ps()):(zn(a(tn.target).closest(".sp-thumb-el").data("color")),ps(),le.hideAfterPaletteSelect&&(Zn(!0),Sn())),!1}var cn=s?"mousedown.spectrum":"click.spectrum touchstart.spectrum";at.delegate(".sp-thumb-el",cn,Gr),jt.delegate(".sp-thumb-el:nth-child(1)",cn,{ignore:!0},Gr)}function fa(){if(dt&&window.localStorage){try{var qr=window.localStorage[dt].split(",#");qr.length>1&&(delete window.localStorage[dt],a.each(qr,function(Gr,cn){Ns(cn)}))}catch{}try{br=window.localStorage[dt].split(";")}catch{}}}function Ns(qr){if(Fe){var Gr=A(qr).toRgbString();if(!ar[Gr]&&a.inArray(Gr,br)===-1)for(br.push(Gr);br.length>pn;)br.shift();if(dt&&window.localStorage)try{window.localStorage[dt]=br.join(";")}catch{}}}function Ja(){var qr=[];if(le.showPalette)for(var Gr=0;Gr<br.length;Gr++){var cn=A(br[Gr]).toRgbString();ar[cn]||qr.push(br[Gr])}return qr.reverse().slice(0,le.maxSelectionSize)}function Aa(){var qr=Kn(),Gr=a.map(Ur,function(cn,tn){return c(cn,qr,"sp-palette-row sp-palette-row-"+tn,le)});fa(),br&&Gr.push(c(Ja(),qr,"sp-palette-row sp-palette-row-selection",le)),at.html(Gr.join(""))}function fs(){if(le.showInitial){var qr=cr,Gr=Kn();jt.html(c([qr,Gr],Gr,"sp-palette-row-initial",le))}}function Lr(){(wr<=0||Jt<=0||ye<=0)&&ka(),Mt=!0,vr.addClass(In),on=null,jr.trigger("dragstart.spectrum",[Kn()])}function kr(){Mt=!1,vr.removeClass(In),jr.trigger("dragstop.spectrum",[Kn()])}function mt(){var qr=Ye.val();if((qr===null||qr==="")&&Xr)zn(null),Zn(!0);else{var Gr=A(qr);Gr.isValid()?(zn(Gr),Zn(!0)):Ye.addClass("sp-validation-error")}}function nr(){Nt?Sn():Ar()}function Ar(){var qr=a.Event("beforeShow.spectrum");if(Nt){ka();return}if(jr.trigger("beforeShow.spectrum",[Kn()]),!(ft.beforeShow(Kn())===!1||qr.isDefaultPrevented())){d(),Nt=!0;var Gr=a(Er);Gr.bind("keydown.spectrum",Rr),Gr.bind("click.spectrum",kn),a(window).bind("resize.spectrum",Ze),ke.addClass("sp-active"),vr.removeClass("sp-hidden"),ka(),Yn(),cr=Kn(),fs(),ft.show(cr),jr.trigger("show.spectrum",[cr])}}function Rr(qr){qr.keyCode===27&&Sn()}function kn(qr){qr.button!=2&&(Mt||(kt?Zn(!0):Vn(),Sn()))}function Sn(){!Nt||Xe||(Nt=!1,a(Er).unbind("keydown.spectrum",Rr),a(Er).unbind("click.spectrum",kn),a(window).unbind("resize.spectrum",Ze),ke.removeClass("sp-active"),vr.addClass("sp-hidden"),ft.hide(Kn()),jr.trigger("hide.spectrum",[Kn()]))}function Vn(){zn(cr,!0)}function zn(qr,Gr){if(A.equals(qr,Kn())){Yn();return}var cn,tn;!qr&&Xr?Yr=!0:(Yr=!1,vt=!qr,cn=A(qr),tn=cn.toHsv(),Ut=tn.h%360/360,er=tn.s,zr=tn.v,rn=tn.a),Yn(),cn&&cn.isValid()&&!Gr&&(Br=le.preferredFormat||cn.getFormat())}function Kn(qr){return qr=qr||{},Xr&&Yr?null:A.fromRatio({h:Ut,s:er,v:zr,a:Math.round(rn*100)/100},{format:qr.format||Br})}function ro(){return!Ye.hasClass("sp-validation-error")}function ps(){Yn(),ft.move(Kn()),jr.trigger("move.spectrum",[Kn()])}function Yn(){Ye.removeClass("sp-validation-error"),qn();var qr=A.fromRatio({h:Ut,s:1,v:1});bn.css("background-color",qr.toHexString());var Gr=Br;rn<1&&!(rn===0&&Gr==="name")&&(Gr==="hex"||Gr==="hex3"||Gr==="hex6"||Gr==="name")&&(Gr="rgb");var cn=Kn({format:Gr}),tn="";if(bt.removeClass("sp-clear-display"),bt.css("background-color","transparent"),!cn&&Xr)bt.addClass("sp-clear-display");else{var Me=cn.toHexString(),ot=cn.toRgbString();if(o||cn.alpha===1?bt.css("background-color",ot):(bt.css("background-color","transparent"),bt.css("filter",cn.toFilter())),le.showAlpha){var _t=cn.toRgb();_t.a=0;var It=A(_t).toRgbString(),At="linear-gradient(left, "+It+", "+Me+")";s?te.css("filter",A(It).toFilter({gradientType:1},Me)):(te.css("background","-webkit-"+At),te.css("background","-moz-"+At),te.css("background","-ms-"+At),te.css("background","linear-gradient(to right, "+It+", "+Me+")"))}tn=cn.toString(Gr)}le.showInput&&Ye.val(tn),le.showPalette&&Aa(),fs()}function qn(){var qr=er,Gr=zr;if(Xr&&Yr)Re.hide(),Bn.hide(),En.hide();else{Re.show(),Bn.show(),En.show();var cn=qr*Jt,tn=wr-Gr*wr;cn=Math.max(-Wt,Math.min(Jt-Wt,cn-Wt)),tn=Math.max(-Wt,Math.min(wr-Wt,tn-Wt)),En.css({top:tn+"px",left:cn+"px"});var Me=rn*Be;Re.css({left:Me-tt/2+"px"});var ot=Ut*ye;Bn.css({top:ot-wt+"px"})}}function Zn(qr){var Gr=Kn(),cn="",tn=vt?!0:!A.equals(Gr,cr);Gr&&(cn=Gr.toString(Br),!Nt&&Ns(Gr)),st&&jr.val(cn),qr&&tn&&(ft.change(Gr),jr.trigger("change",[Gr]))}function ka(){Nt&&(Jt=bn.width(),wr=bn.height(),Wt=En.height(),Wr.width(),ye=Wr.height(),wt=Bn.height(),Be=je.width(),tt=Re.width(),Xe||(vr.css("position","absolute"),le.offset?vr.offset(le.offset):vr.offset(y(vr,ct))),qn(),le.showPalette&&Aa(),jr.trigger("reflow.spectrum"))}function ks(){jr.show(),ct.unbind("click.spectrum touchstart.spectrum"),vr.remove(),ke.remove(),t[es.id]=null}function La(qr,Gr){if(qr===r)return a.extend({},le);if(Gr===r)return le[qr];le[qr]=Gr,qr==="preferredFormat"&&(Br=le.preferredFormat),ma()}function wa(){ht=!1,jr.attr("disabled",!1),ct.removeClass("sp-disabled")}function Xn(){Sn(),ht=!0,jr.attr("disabled",!0),ct.addClass("sp-disabled")}function Ma(qr){le.offset=qr,ka()}Jn();var es={show:Ar,hide:Sn,toggle:nr,reflow:ka,option:La,enable:wa,disable:Xn,offset:Ma,set:function(qr){zn(qr),Zn()},get:Kn,destroy:ks,container:vr};return es.id=t.push(es)-1,es}function y(ie,_e){for(var le=_e[0],Xe=ie[0],Fe=Xe.parentElement,dt=le.getBoundingClientRect(),lt=Xe.offsetWidth,ft=Xe.offsetHeight,Ze={top:0,left:0,width:le.offsetWidth,height:le.offsetHeight};le&&(Ze.top+=le.offsetTop-le.scrollTop,Ze.left+=le.offsetLeft-le.scrollLeft,!(le===Fe||!Fe.contains(le.offsetParent)));)le=le.offsetParent;return dt.right+lt>window.innerWidth-window.scrollX&&dt.right-lt>0&&(Ze.left-=lt-Ze.width),dt.bottom+ft<window.innerHeight-window.scrollY?Ze.top+=Ze.height:Ze.top-=ft,Ze}function x(){}function b(ie){ie.stopPropagation()}function v(ie,_e){var le=Array.prototype.slice,Xe=le.call(arguments,2);return function(){return ie.apply(_e,Xe.concat(le.call(arguments)))}}function j(ie,_e,le,Xe){_e=_e||function(){},le=le||function(){},Xe=Xe||function(){};var Fe=document,dt=!1,lt={},ft=0,Ze=0,Nt="ontouchstart"in window,Mt={};Mt.selectstart=vt,Mt.dragstart=vt,Mt["touchmove mousemove"]=Jt,Mt["touchend mouseup"]=Wt;function vt(ye){ye.stopPropagation&&ye.stopPropagation(),ye.preventDefault&&ye.preventDefault(),ye.returnValue=!1}function Jt(ye){if(dt){if(s&&Fe.documentMode<9&&!ye.button)return Wt();var Be=ye&&ye.touches&&ye.touches[0],tt=Be&&Be.pageX||ye.pageX,wt=Be&&Be.pageY||ye.pageY,Ut=Math.max(0,Math.min(tt-lt.left,Ze)),er=Math.max(0,Math.min(wt-lt.top,ft));Nt&&vt(ye),_e.apply(ie,[Ut,er,ye])}}function wr(ye){var Be=ye.which?ye.which==3:ye.button==2;!Be&&!dt&&le.apply(ie,arguments)!==!1&&(dt=!0,ft=a(ie).height(),Ze=a(ie).width(),lt=a(ie).offset(),a(Fe).bind(Mt),a(Fe.body).addClass("sp-dragging"),Jt(ye),vt(ye))}function Wt(){dt&&(a(Fe).unbind(Mt),a(Fe.body).removeClass("sp-dragging"),setTimeout(function(){Xe.apply(ie,arguments)},0)),dt=!1}a(ie).bind("touchstart mousedown",wr)}function S(ie,_e,le){var Xe;return function(){var Fe=this,dt=arguments,lt=function(){Xe=null,ie.apply(Fe,dt)};Xe||(Xe=setTimeout(lt,_e))}}function k(){return a.fn.spectrum.inputTypeColorSupport()}var N="spectrum.id";a.fn.spectrum=function(ie,_e){if(typeof ie=="string"){var le=this,Xe=Array.prototype.slice.call(arguments,1);return this.each(function(){var Fe=t[a(this).data(N)];if(Fe){var dt=Fe[ie];if(!dt)throw new Error("Spectrum: no such method: '"+ie+"'");ie=="get"?le=Fe.get():ie=="container"?le=Fe.container:ie=="option"?le=Fe.option.apply(Fe,Xe):ie=="destroy"?(Fe.destroy(),a(this).removeData(N)):dt.apply(Fe,Xe)}}),le}return this.spectrum("destroy").each(function(){var Fe=a.extend({},ie,a(this).data()),dt=m(this,Fe);a(this).data(N,dt.id)})},a.fn.spectrum.load=!0,a.fn.spectrum.loadOpts={},a.fn.spectrum.draggable=j,a.fn.spectrum.defaults=e,a.fn.spectrum.inputTypeColorSupport=function ie(){if(typeof ie._cachedResult>"u"){var _e=a("<input type='color'/>")[0];ie._cachedResult=_e.type==="color"&&_e.value!==""}return ie._cachedResult},a.spectrum={},a.spectrum.localization={},a.spectrum.palettes={},a.fn.spectrum.processNativeColorInputs=function(){var ie=a("input[type=color]");ie.length&&!k()&&ie.spectrum({preferredFormat:"hex6"})};var P=/^[\s,#]+/,R=/\s+$/,F=0,z=Math,H=z.round,V=z.min,W=z.max,Z=z.random,A=function(ie,_e){if(ie=ie||"",_e=_e||{},ie instanceof A)return ie;if(!(this instanceof A))return new A(ie,_e);var le=q(ie);this._originalInput=ie,this._r=le.r,this._g=le.g,this._b=le.b,this._a=le.a,this._roundA=H(100*this._a)/100,this._format=_e.format||le.format,this._gradientType=_e.gradientType,this._r<1&&(this._r=H(this._r)),this._g<1&&(this._g=H(this._g)),this._b<1&&(this._b=H(this._b)),this._ok=le.ok,this._tc_id=F++};A.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var ie=this.toRgb();return(ie.r*299+ie.g*587+ie.b*114)/1e3},setAlpha:function(ie){return this._a=ne(ie),this._roundA=H(100*this._a)/100,this},toHsv:function(){var ie=Q(this._r,this._g,this._b);return{h:ie.h*360,s:ie.s,v:ie.v,a:this._a}},toHsvString:function(){var ie=Q(this._r,this._g,this._b),_e=H(ie.h*360),le=H(ie.s*100),Xe=H(ie.v*100);return this._a==1?"hsv("+_e+", "+le+"%, "+Xe+"%)":"hsva("+_e+", "+le+"%, "+Xe+"%, "+this._roundA+")"},toHsl:function(){var ie=K(this._r,this._g,this._b);return{h:ie.h*360,s:ie.s,l:ie.l,a:this._a}},toHslString:function(){var ie=K(this._r,this._g,this._b),_e=H(ie.h*360),le=H(ie.s*100),Xe=H(ie.l*100);return this._a==1?"hsl("+_e+", "+le+"%, "+Xe+"%)":"hsla("+_e+", "+le+"%, "+Xe+"%, "+this._roundA+")"},toHex:function(ie){return re(this._r,this._g,this._b,ie)},toHexString:function(ie){return"#"+this.toHex(ie)},toHex8:function(){return Te(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:H(this._r),g:H(this._g),b:H(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+H(this._r)+", "+H(this._g)+", "+H(this._b)+")":"rgba("+H(this._r)+", "+H(this._g)+", "+H(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:H(M(this._r,255)*100)+"%",g:H(M(this._g,255)*100)+"%",b:H(M(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+H(M(this._r,255)*100)+"%, "+H(M(this._g,255)*100)+"%, "+H(M(this._b,255)*100)+"%)":"rgba("+H(M(this._r,255)*100)+"%, "+H(M(this._g,255)*100)+"%, "+H(M(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Ne[re(this._r,this._g,this._b,!0)]||!1},toFilter:function(ie){var _e="#"+Te(this._r,this._g,this._b,this._a),le=_e,Xe=this._gradientType?"GradientType = 1, ":"";if(ie){var Fe=A(ie);le=Fe.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+Xe+"startColorstr="+_e+",endColorstr="+le+")"},toString:function(ie){var _e=!!ie;ie=ie||this._format;var le=!1,Xe=this._a<1&&this._a>=0,Fe=!_e&&Xe&&(ie==="hex"||ie==="hex6"||ie==="hex3"||ie==="name");return Fe?ie==="name"&&this._a===0?this.toName():this.toRgbString():(ie==="rgb"&&(le=this.toRgbString()),ie==="prgb"&&(le=this.toPercentageRgbString()),(ie==="hex"||ie==="hex6")&&(le=this.toHexString()),ie==="hex3"&&(le=this.toHexString(!0)),ie==="hex8"&&(le=this.toHex8String()),ie==="name"&&(le=this.toName()),ie==="hsl"&&(le=this.toHslString()),ie==="hsv"&&(le=this.toHsvString()),le||this.toHexString())},_applyModification:function(ie,_e){var le=ie.apply(null,[this].concat([].slice.call(_e)));return this._r=le._r,this._g=le._g,this._b=le._b,this.setAlpha(le._a),this},lighten:function(){return this._applyModification(fe,arguments)},brighten:function(){return this._applyModification(Ee,arguments)},darken:function(){return this._applyModification(Ae,arguments)},desaturate:function(){return this._applyModification(G,arguments)},saturate:function(){return this._applyModification(Y,arguments)},greyscale:function(){return this._applyModification(Se,arguments)},spin:function(){return this._applyModification(qe,arguments)},_applyCombination:function(ie,_e){return ie.apply(null,[this].concat([].slice.call(_e)))},analogous:function(){return this._applyCombination(pt,arguments)},complement:function(){return this._applyCombination(we,arguments)},monochromatic:function(){return this._applyCombination(Pt,arguments)},splitcomplement:function(){return this._applyCombination(We,arguments)},triad:function(){return this._applyCombination(Oe,arguments)},tetrad:function(){return this._applyCombination(ze,arguments)}},A.fromRatio=function(ie,_e){if(typeof ie=="object"){var le={};for(var Xe in ie)ie.hasOwnProperty(Xe)&&(Xe==="a"?le[Xe]=ie[Xe]:le[Xe]=he(ie[Xe]));ie=le}return A(ie,_e)};function q(ie){var _e={r:0,g:0,b:0},le=1,Xe=!1,Fe=!1;return typeof ie=="string"&&(ie=Ge(ie)),typeof ie=="object"&&(ie.hasOwnProperty("r")&&ie.hasOwnProperty("g")&&ie.hasOwnProperty("b")?(_e=I(ie.r,ie.g,ie.b),Xe=!0,Fe=String(ie.r).substr(-1)==="%"?"prgb":"rgb"):ie.hasOwnProperty("h")&&ie.hasOwnProperty("s")&&ie.hasOwnProperty("v")?(ie.s=he(ie.s),ie.v=he(ie.v),_e=oe(ie.h,ie.s,ie.v),Xe=!0,Fe="hsv"):ie.hasOwnProperty("h")&&ie.hasOwnProperty("s")&&ie.hasOwnProperty("l")&&(ie.s=he(ie.s),ie.l=he(ie.l),_e=D(ie.h,ie.s,ie.l),Xe=!0,Fe="hsl"),ie.hasOwnProperty("a")&&(le=ie.a)),le=ne(le),{ok:Xe,format:ie.format||Fe,r:V(255,W(_e.r,0)),g:V(255,W(_e.g,0)),b:V(255,W(_e.b,0)),a:le}}function I(ie,_e,le){return{r:M(ie,255)*255,g:M(_e,255)*255,b:M(le,255)*255}}function K(ie,_e,le){ie=M(ie,255),_e=M(_e,255),le=M(le,255);var Xe=W(ie,_e,le),Fe=V(ie,_e,le),dt,lt,ft=(Xe+Fe)/2;if(Xe==Fe)dt=lt=0;else{var Ze=Xe-Fe;switch(lt=ft>.5?Ze/(2-Xe-Fe):Ze/(Xe+Fe),Xe){case ie:dt=(_e-le)/Ze+(_e<le?6:0);break;case _e:dt=(le-ie)/Ze+2;break;case le:dt=(ie-_e)/Ze+4;break}dt/=6}return{h:dt,s:lt,l:ft}}function D(ie,_e,le){var Xe,Fe,dt;ie=M(ie,360),_e=M(_e,100),le=M(le,100);function lt(Nt,Mt,vt){return vt<0&&(vt+=1),vt>1&&(vt-=1),vt<1/6?Nt+(Mt-Nt)*6*vt:vt<1/2?Mt:vt<2/3?Nt+(Mt-Nt)*(2/3-vt)*6:Nt}if(_e===0)Xe=Fe=dt=le;else{var ft=le<.5?le*(1+_e):le+_e-le*_e,Ze=2*le-ft;Xe=lt(Ze,ft,ie+1/3),Fe=lt(Ze,ft,ie),dt=lt(Ze,ft,ie-1/3)}return{r:Xe*255,g:Fe*255,b:dt*255}}function Q(ie,_e,le){ie=M(ie,255),_e=M(_e,255),le=M(le,255);var Xe=W(ie,_e,le),Fe=V(ie,_e,le),dt,lt,ft=Xe,Ze=Xe-Fe;if(lt=Xe===0?0:Ze/Xe,Xe==Fe)dt=0;else{switch(Xe){case ie:dt=(_e-le)/Ze+(_e<le?6:0);break;case _e:dt=(le-ie)/Ze+2;break;case le:dt=(ie-_e)/Ze+4;break}dt/=6}return{h:dt,s:lt,v:ft}}function oe(ie,_e,le){ie=M(ie,360)*6,_e=M(_e,100),le=M(le,100);var Xe=z.floor(ie),Fe=ie-Xe,dt=le*(1-_e),lt=le*(1-Fe*_e),ft=le*(1-(1-Fe)*_e),Ze=Xe%6,Nt=[le,lt,dt,dt,ft,le][Ze],Mt=[ft,le,le,lt,dt,dt][Ze],vt=[dt,dt,ft,le,le,lt][Ze];return{r:Nt*255,g:Mt*255,b:vt*255}}function re(ie,_e,le,Xe){var Fe=[xe(H(ie).toString(16)),xe(H(_e).toString(16)),xe(H(le).toString(16))];return Xe&&Fe[0].charAt(0)==Fe[0].charAt(1)&&Fe[1].charAt(0)==Fe[1].charAt(1)&&Fe[2].charAt(0)==Fe[2].charAt(1)?Fe[0].charAt(0)+Fe[1].charAt(0)+Fe[2].charAt(0):Fe.join("")}function Te(ie,_e,le,Xe){var Fe=[xe(se(Xe)),xe(H(ie).toString(16)),xe(H(_e).toString(16)),xe(H(le).toString(16))];return Fe.join("")}A.equals=function(ie,_e){return!ie||!_e?!1:A(ie).toRgbString()==A(_e).toRgbString()},A.random=function(){return A.fromRatio({r:Z(),g:Z(),b:Z()})};function G(ie,_e){_e=_e===0?0:_e||10;var le=A(ie).toHsl();return le.s-=_e/100,le.s=U(le.s),A(le)}function Y(ie,_e){_e=_e===0?0:_e||10;var le=A(ie).toHsl();return le.s+=_e/100,le.s=U(le.s),A(le)}function Se(ie){return A(ie).desaturate(100)}function fe(ie,_e){_e=_e===0?0:_e||10;var le=A(ie).toHsl();return le.l+=_e/100,le.l=U(le.l),A(le)}function Ee(ie,_e){_e=_e===0?0:_e||10;var le=A(ie).toRgb();return le.r=W(0,V(255,le.r-H(255*-(_e/100)))),le.g=W(0,V(255,le.g-H(255*-(_e/100)))),le.b=W(0,V(255,le.b-H(255*-(_e/100)))),A(le)}function Ae(ie,_e){_e=_e===0?0:_e||10;var le=A(ie).toHsl();return le.l-=_e/100,le.l=U(le.l),A(le)}function qe(ie,_e){var le=A(ie).toHsl(),Xe=(H(le.h)+_e)%360;return le.h=Xe<0?360+Xe:Xe,A(le)}function we(ie){var _e=A(ie).toHsl();return _e.h=(_e.h+180)%360,A(_e)}function Oe(ie){var _e=A(ie).toHsl(),le=_e.h;return[A(ie),A({h:(le+120)%360,s:_e.s,l:_e.l}),A({h:(le+240)%360,s:_e.s,l:_e.l})]}function ze(ie){var _e=A(ie).toHsl(),le=_e.h;return[A(ie),A({h:(le+90)%360,s:_e.s,l:_e.l}),A({h:(le+180)%360,s:_e.s,l:_e.l}),A({h:(le+270)%360,s:_e.s,l:_e.l})]}function We(ie){var _e=A(ie).toHsl(),le=_e.h;return[A(ie),A({h:(le+72)%360,s:_e.s,l:_e.l}),A({h:(le+216)%360,s:_e.s,l:_e.l})]}function pt(ie,_e,le){_e=_e||6,le=le||30;var Xe=A(ie).toHsl(),Fe=360/le,dt=[A(ie)];for(Xe.h=(Xe.h-(Fe*_e>>1)+720)%360;--_e;)Xe.h=(Xe.h+Fe)%360,dt.push(A(Xe));return dt}function Pt(ie,_e){_e=_e||6;for(var le=A(ie).toHsv(),Xe=le.h,Fe=le.s,dt=le.v,lt=[],ft=1/_e;_e--;)lt.push(A({h:Xe,s:Fe,v:dt})),dt=(dt+ft)%1;return lt}A.mix=function(ie,_e,le){le=le===0?0:le||50;var Xe=A(ie).toRgb(),Fe=A(_e).toRgb(),dt=le/100,lt=dt*2-1,ft=Fe.a-Xe.a,Ze;lt*ft==-1?Ze=lt:Ze=(lt+ft)/(1+lt*ft),Ze=(Ze+1)/2;var Nt=1-Ze,Mt={r:Fe.r*Ze+Xe.r*Nt,g:Fe.g*Ze+Xe.g*Nt,b:Fe.b*Ze+Xe.b*Nt,a:Fe.a*dt+Xe.a*(1-dt)};return A(Mt)},A.readability=function(ie,_e){var le=A(ie),Xe=A(_e),Fe=le.toRgb(),dt=Xe.toRgb(),lt=le.getBrightness(),ft=Xe.getBrightness(),Ze=Math.max(Fe.r,dt.r)-Math.min(Fe.r,dt.r)+Math.max(Fe.g,dt.g)-Math.min(Fe.g,dt.g)+Math.max(Fe.b,dt.b)-Math.min(Fe.b,dt.b);return{brightness:Math.abs(lt-ft),color:Ze}},A.isReadable=function(ie,_e){var le=A.readability(ie,_e);return le.brightness>125&&le.color>500},A.mostReadable=function(ie,_e){for(var le=null,Xe=0,Fe=!1,dt=0;dt<_e.length;dt++){var lt=A.readability(ie,_e[dt]),ft=lt.brightness>125&&lt.color>500,Ze=3*(lt.brightness/125)+lt.color/500;(ft&&!Fe||ft&&Fe&&Ze>Xe||!ft&&!Fe&&Ze>Xe)&&(Fe=ft,Xe=Ze,le=A(_e[dt]))}return le};var ee=A.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Ne=A.hexNames=Ie(ee);function Ie(ie){var _e={};for(var le in ie)ie.hasOwnProperty(le)&&(_e[ie[le]]=le);return _e}function ne(ie){return ie=parseFloat(ie),(isNaN(ie)||ie<0||ie>1)&&(ie=1),ie}function M(ie,_e){ce(ie)&&(ie="100%");var le=ue(ie);return ie=V(_e,W(0,parseFloat(ie))),le&&(ie=parseInt(ie*_e,10)/100),z.abs(ie-_e)<1e-6?1:ie%_e/parseFloat(_e)}function U(ie){return V(1,W(0,ie))}function J(ie){return parseInt(ie,16)}function ce(ie){return typeof ie=="string"&&ie.indexOf(".")!=-1&&parseFloat(ie)===1}function ue(ie){return typeof ie=="string"&&ie.indexOf("%")!=-1}function xe(ie){return ie.length==1?"0"+ie:""+ie}function he(ie){return ie<=1&&(ie=ie*100+"%"),ie}function se(ie){return Math.round(parseFloat(ie)*255).toString(16)}function Le(ie){return J(ie)/255}var Ue=(function(){var ie="[-\\+]?\\d+%?",_e="[-\\+]?\\d*\\.\\d+%?",le="(?:"+_e+")|(?:"+ie+")",Xe="[\\s|\\(]+("+le+")[,|\\s]+("+le+")[,|\\s]+("+le+")\\s*\\)?",Fe="[\\s|\\(]+("+le+")[,|\\s]+("+le+")[,|\\s]+("+le+")[,|\\s]+("+le+")\\s*\\)?";return{rgb:new RegExp("rgb"+Xe),rgba:new RegExp("rgba"+Fe),hsl:new RegExp("hsl"+Xe),hsla:new RegExp("hsla"+Fe),hsv:new RegExp("hsv"+Xe),hsva:new RegExp("hsva"+Fe),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function Ge(ie){ie=ie.replace(P,"").replace(R,"").toLowerCase();var _e=!1;if(ee[ie])ie=ee[ie],_e=!0;else if(ie=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var le;return(le=Ue.rgb.exec(ie))?{r:le[1],g:le[2],b:le[3]}:(le=Ue.rgba.exec(ie))?{r:le[1],g:le[2],b:le[3],a:le[4]}:(le=Ue.hsl.exec(ie))?{h:le[1],s:le[2],l:le[3]}:(le=Ue.hsla.exec(ie))?{h:le[1],s:le[2],l:le[3],a:le[4]}:(le=Ue.hsv.exec(ie))?{h:le[1],s:le[2],v:le[3]}:(le=Ue.hsva.exec(ie))?{h:le[1],s:le[2],v:le[3],a:le[4]}:(le=Ue.hex8.exec(ie))?{a:Le(le[1]),r:J(le[2]),g:J(le[3]),b:J(le[4]),format:_e?"name":"hex8"}:(le=Ue.hex6.exec(ie))?{r:J(le[1]),g:J(le[2]),b:J(le[3]),format:_e?"name":"hex"}:(le=Ue.hex3.exec(ie))?{r:J(le[1]+""+le[1]),g:J(le[2]+""+le[2]),b:J(le[3]+""+le[3]),format:_e?"name":"hex"}:!1}window.tinycolor=A,a(function(){a.fn.spectrum.load&&a.fn.spectrum.processNativeColorInputs()})}var lq=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),mO=(function(a){lq(r,a);function r(e){e===void 0&&(e={});var t=a.call(this,e)||this,s=e.ppfx||"";return t.opts=e,t.ppfx=s,t.em=e.target||{},!e.onChange&&t.listenTo(t.model,"change:value",t.handleModelChange),t}return r.prototype.template=function(){return'<span class="'.concat(this.holderClass(),'"></span>')},r.prototype.inputClass=function(){return"".concat(this.ppfx,"field")},r.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},r.prototype.elementUpdated=function(){this.model.trigger("el:change")},r.prototype.setValue=function(e,t){var s=this.model,o=e||s.get("defaults"),i=this.getInputEl();i&&(i.value=o)},r.prototype.handleModelChange=function(e,t,s){this.setValue(t,s)},r.prototype.handleChange=function(e){e.stopPropagation();var t=this.getInputEl().value;this.__onInputChange(t),this.elementUpdated()},r.prototype.__onInputChange=function(e){this.model.set({value:e},{fromInput:1})},r.prototype.getInputEl=function(){if(!this.inputEl){var e=this,t=e.model,s=e.opts,o=s.type||"text",i=t.get("placeholder")||t.get("defaults")||t.get("default")||"";this.inputEl=(0,po.default)('<input type="'.concat(o,'" placeholder="').concat(i,'">'))}return this.inputEl.get(0)},r.prototype.render=function(){this.inputEl=null;var e=this.$el;return e.addClass(this.inputClass()),e.html(this.template()),e.find(".".concat(this.holderClass())).append(this.getInputEl()),this},r})(Sr.Ss);const zv=mO;mO.prototype.events={change:"handleChange"};var cq=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),ry=function(){return ry=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},ry.apply(this,arguments)};po.default&&iq(po.default);var y0=function(a){var r=a.getFormat()==="name"&&a.toName(),e=a.getAlpha()==1?a.toHexString():a.toRgbString();return r||e.replace(/ /g,"")},dq=(function(a){cq(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.template=function(){var e=this.ppfx;return`
      <div class="`.concat(this.holderClass(),`"></div>
      <div class="`).concat(e,`field-colorp">
        <div class="`).concat(e,`field-colorp-c" data-colorp-c>
          <div class="`).concat(e,`checker-bg"></div>
        </div>
      </div>
    `)},r.prototype.inputClass=function(){var e=this.ppfx;return"".concat(e,"field ").concat(e,"field-color")},r.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},r.prototype.remove=function(){return a.prototype.remove.call(this),this.colorEl.spectrum("destroy"),this},r.prototype.handleChange=function(e){e.stopPropagation();var t=e.target.value;(0,Ce.isUndefined)(t)||this.__onInputChange(t)},r.prototype.__onInputChange=function(e){var t=this,s=t.model,o=t.opts,i=o.onChange,l=e,c=this.getColorEl();if(c){c.spectrum("set",l);var d=c.spectrum("get"),h=l&&y0(d);h&&(l=h)}i?i(l):s.set({value:l},{fromInput:1})},r.prototype.setValue=function(e,t){t===void 0&&(t={});var s=this.model,o=(0,Ce.isUndefined)(t.def)?s.get("defaults"):t.def,i=(0,Ce.isUndefined)(e)?(0,Ce.isUndefined)(o)?"":o:e,l=this.getInputEl(),c=this.getColorEl(),d=i!="none"?i:"";l.value=i,c.get(0).style.backgroundColor=d,(t.fromTarget||t.fromInput&&!t.avoidStore)&&(c.spectrum("set",d),this.noneColor=i=="none",this.movedColor=d)},r.prototype.getColorEl=function(){var e=this;if(!this.colorEl){var t=this,s=t.em,o=t.model,i=t.opts,l=this.ppfx,c=i.onChange,d=(0,po.default)('<div class="'.concat(this.ppfx,'field-color-picker"></div>')),h=d.get(0).style,m=s&&s.getConfig&&s.getConfig().colorPicker||{};this.movedColor="";var y=!1,x;this.$el.find("[data-colorp-c]").append(d);var b=function(v,j){j===void 0&&(j=!0),c?c(v,!j):(j&&o.setValueFromInput(0,!1),o.setValueFromInput(v,j))};d.spectrum(ry(ry(ry({color:o.getValue()||!1,containerClassName:"".concat(l,"one-bg ").concat(l,"two-color ").concat(l,"editor-sp"),maxSelectionSize:8,showPalette:!0,showAlpha:!0,chooseText:"Ok",cancelText:"",palette:[]},m),o.get("colorPicker")||{}),{move:function(v){var j=y0(v);e.movedColor=j,h.backgroundColor=j,b(j,!1)},change:function(v){y=!0;var j=y0(v);h.backgroundColor=j,b(j),e.noneColor=!1},show:function(v){y=!1,e.movedColor="",x=c?o.getValue({noDefault:!0}):y0(v)},hide:function(){!y&&(x||c)&&(e.noneColor&&(x=""),h.backgroundColor=x,d.spectrum("set",x),b(x,!1))}})),s&&s.on&&this.listenTo(s,"component:selected",function(){e.movedColor&&b(e.movedColor),y=!0,e.movedColor="",d.spectrum("hide")}),this.colorEl=d}return this.colorEl},r.prototype.render=function(){return zv.prototype.render.call(this),this.getColorEl(),this},r})(zv);const gO=dq;var uq=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),fq=(function(a){uq(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.templateInput=function(){return""},r.prototype.getInputEl=function(){if(!this.input){var e=this.model,t=this.getModelValue(),s=new gO({model:e,target:this.config.em,contClass:this.ppfx+"field-color",ppfx:this.ppfx}),o=s.render();o.setValue(t,{fromTarget:1}),this.input=o.el}return this.input},r})($d);const pq=fq;var hq=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),yO=(function(a){hq(r,a);function r(e){e===void 0&&(e={});var t=a.call(this,e)||this;return(0,Ce.bindAll)(t,"moveIncrement","upIncrement"),t.doc=document,t.listenTo(t.model,"change:unit",t.handleModelChange),t}return r.prototype.template=function(){var e=this.ppfx;return`
      <span class="`.concat(e,`input-holder"></span>
      <span class="`).concat(e,`field-units"></span>
      <div class="`).concat(e,`field-arrows" data-arrows>
        <div class="`).concat(e,`field-arrow-u" data-arrow-up></div>
        <div class="`).concat(e,`field-arrow-d" data-arrow-down></div>
      </div>
    `)},r.prototype.inputClass=function(){var e=this.ppfx;return this.opts.contClass||"".concat(e,"field ").concat(e,"field-integer")},r.prototype.setValue=function(e,t){var s=t||{},o=this.validateInputValue(e,{deepCheck:1}),i={value:o.value,unit:""};(o.unit||o.force)&&(i.unit=o.unit),this.model.set(i,s),s.silent&&this.handleModelChange()},r.prototype.handleChange=function(e){e.stopPropagation(),this.setValue(this.getInputEl().value),this.elementUpdated()},r.prototype.handleUnitChange=function(e){e.stopPropagation();var t=this.getUnitEl().value;this.model.set("unit",t),this.elementUpdated()},r.prototype.handleKeyDown=function(e){e.key==="ArrowUp"&&(e.preventDefault(),this.upArrowClick()),e.key==="ArrowDown"&&(e.preventDefault(),this.downArrowClick())},r.prototype.elementUpdated=function(){this.model.trigger("el:change")},r.prototype.handleModelChange=function(){var e=this.model;this.getInputEl().value=e.get("value");var t=this.getUnitEl();t&&(t.value=e.get("unit")||"")},r.prototype.getUnitEl=function(){if(!this.unitEl){var e=this.model,t=e.get("units")||[];if(t.length){var s=['<option value="" disabled hidden>-</option>'];t.forEach(function(i){var l=i==e.get("unit")?"selected":"";s.push("<option ".concat(l,">").concat(i,"</option>"))});var o=document.createElement("div");o.innerHTML='<select class="'.concat(this.ppfx,'input-unit">').concat(s.join(""),"</select>"),this.unitEl=o.firstChild}}return this.unitEl},r.prototype.upArrowClick=function(){var e=this.model,t=e.get("step"),s=parseFloat(this.getInputEl().value);this.setValue(this.normalizeValue(s+t)),this.elementUpdated()},r.prototype.downArrowClick=function(){var e=this.model,t=e.get("step"),s=parseFloat(this.getInputEl().value);this.setValue(this.normalizeValue(s-t)),this.elementUpdated()},r.prototype.downIncrement=function(e){e.preventDefault(),this.moved=!1;var t=this.model.get("value")||0;t=this.normalizeValue(t),this.current={y:e.pageY,val:t},(0,Ir.on)(this.doc,"mousemove",this.moveIncrement),(0,Ir.on)(this.doc,"mouseup",this.upIncrement)},r.prototype.moveIncrement=function(e){this.moved=!0;var t=this.model,s=t.get("step"),o=this.current,i=this.normalizeValue(o.val+(o.y-e.pageY)*s),l=this.validateInputValue(i),c=l.value,d=l.unit;return this.prValue=c,t.set({value:c,unit:d},{avoidStore:1}),!1},r.prototype.upIncrement=function(){var e=this.model,t=e.get("step");if((0,Ir.AU)(this.doc,"mouseup",this.upIncrement),(0,Ir.AU)(this.doc,"mousemove",this.moveIncrement),this.prValue&&this.moved){var s=this.prValue-t;e.set("value",s,{avoidStore:1}).set("value",s+t),this.elementUpdated()}},r.prototype.normalizeValue=function(e,t){t===void 0&&(t=0);var s=this.model,o=s.get("step"),i=0;if(isNaN(e))return t;if(e=parseFloat(e),Math.floor(e)!==e){var l=o.toString().split(".")[1];i=l?l.length:0}return i?parseFloat(e.toFixed(i)):e},r.prototype.validateInputValue=function(e,t){t===void 0&&(t={});var s=0,o=t||{},i=this.model,l="",c=(0,Ce.isUndefined)(e)?l:e,d=t.units||i.get("units")||[],h=i.get("unit")||d.length&&d[0]||"",m=(0,Ce.isUndefined)(t.max)?i.get("max"):t.max,y=(0,Ce.isUndefined)(t.min)?i.get("min"):t.min,x=!!i.get("limitlessMax"),b=!!i.get("limitlessMin");if(o.deepCheck){var v=i.get("fixedValues")||[];if(c===""&&(h=""),c){var j=new RegExp("^"+v.join("|"),"g");if(v.length&&j.test(c))c=c.match(j)[0],h="",s=1;else{var S=c+"";c+="",c=parseFloat(c.replace(",",".")),c=isNaN(c)?l:c;var k=S.replace(c,"");(0,Ce.indexOf)(d,k)>=0&&(h=k)}}}return!isNaN(c)&&c!==""&&(!x&&!(0,Ce.isUndefined)(m)&&m!==""&&(c=c>m?m:c),!b&&!(0,Ce.isUndefined)(y)&&y!==""&&(c=c<y?y:c)),{force:s,value:c,unit:h}},r.prototype.render=function(){zv.prototype.render.call(this),this.unitEl=null;var e=this.getUnitEl();return e&&this.$el.find(".".concat(this.ppfx,"field-units")).get(0).appendChild(e),this},r})(zv);const xO=yO;yO.prototype.events={"change input":"handleChange","change select":"handleUnitChange","click [data-arrow-up]":"upArrowClick","click [data-arrow-down]":"downArrowClick","mousedown [data-arrows]":"downIncrement",keydown:"handleKeyDown"};var mq=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),gq=(function(a){mq(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.getValueForTarget=function(){var e=this.model,t=e.attributes,s=t.value,o=t.unit;return!(0,Ce.isUndefined)(s)&&s!==""?s+o:e.get("default")},r.prototype.getInputEl=function(){if(!this.input){var e=this,t=e.ppfx,s=e.model,o=this.getModelValue(),i=new xO({contClass:"".concat(t,"field-int"),type:"number",model:s,ppfx:t});i.render(),this.$input=i.inputEl,this.$unit=i.unitEl,s.set("value",o,{fromTarget:!0}),this.$input.val(o),this.input=i.el}return this.input},r})($d);const yq=gq;var xq=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),vq=(function(a){xq(r,a);function r(e){e===void 0&&(e={});var t=a.call(this,e)||this;return t.listenTo(t.model,"change:options",t.rerender),t}return r.prototype.templateInput=function(){var e=this,t=e.ppfx,s=e.clsField;return'<div class="'.concat(s,`">
      <div data-input></div>
      <div class="`).concat(t,`sel-arrow">
        <div class="`).concat(t,`d-s-arrow"></div>
      </div>
    </div>`)},r.prototype.getInputEl=function(){if(!this.$input){var e=this,t=e.model,s=e.em,o=t.get("name"),i=t.get("options")||[],l=[],c="<select>";i.forEach(function(m){var y="",x,b,v;(0,Ce.isString)(m)?(x=m,b=m):(x=m.name||m.label||m.value,b="".concat((0,Ce.isUndefined)(m.value)?m.id:m.value).replace(/"/g,"&quot;"),v=m.style?m.style.replace(/"/g,"&quot;"):"",y+=v?' style="'.concat(v,'"'):"");var j=s.t("traitManager.traits.options.".concat(o,".").concat(b))||x;c+='<option value="'.concat(b,'"').concat(y,">").concat(j,"</option>"),l.push(b)}),c+="</select>",this.$input=(0,po.default)(c);var d=t.getTargetValue(),h=l.indexOf(d)>=0?d:t.get("default");!(0,Ce.isUndefined)(h)&&this.$input.val(h)}return this.$input.get(0)},r})($d);const bq=vq;var wq=ha(8242),jq=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),X5="data-categories",Q5="data-no-categories",vO=(function(a){jq(r,a);function r(e,t){var s=a.call(this,e)||this;s.reuseView=!0,s.renderedCategories=new Map,s.itemsView=t;var o=e.config||{};s.config=o;var i=e.editor;s.em=i;var l=o.pStylePrefix||"";return s.ppfx=l,s.pfx=l+o.stylePrefix||"",s.className="".concat(s.pfx,"traits"),s.traitContClass="".concat(l,"traits-c"),s.classNoCat="".concat(l,"traits-empty-c"),s.catsClass="".concat(l,"trait-categories"),s.collection=new fv([],{em:i}),s.listenTo(i,"component:toggled",s.updatedCollection),s.updatedCollection(),s}return r.prototype.updatedCollection=function(){var e=this,t=e.ppfx,s=e.em,o=s.getSelected();this.el.className="".concat(this.traitContClass,"s ").concat(t,"one-bg ").concat(t,"two-color"),this.collection=o?.traits||new fv([],{em:s}),this.render()},r.prototype.add=function(e,t){var s=this,o=s.config,i=s.renderedCategories,l=this.itemView,c=e.get(this.itemType);this.itemsView&&this.itemsView[c]&&(l=this.itemsView[c]);var d=new l({config:o,model:e,attributes:e.get("attributes")}),h=d.render().el,m=e.parent.initCategory(e);if(m){var y=m.getId(),x=this.getCategoriesEl(),b=i.get(y);!b&&x&&(b=new rO({model:m},o,"trait").render(),i.set(y,b),x.appendChild(b.el)),b?.append(h);return}t?t.appendChild(h):this.append(h)},r.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector("[".concat(X5,"]"))),this.catsEl},r.prototype.getTraitsEl=function(){return this.traitsEl||(this.traitsEl=this.el.querySelector("[".concat(Q5,"]"))),this.traitsEl},r.prototype.append=function(e){var t=this.getTraitsEl();t?.appendChild(e)},r.prototype.render=function(){var e=this,t=this,s=t.el,o=t.ppfx,i=t.catsClass,l=t.traitContClass,c=t.classNoCat,d=document.createDocumentFragment();delete this.catsEl,delete this.traitsEl,this.renderedCategories=new Map,s.innerHTML=`
      <div class="`.concat(i,'" ').concat(X5,`></div>
      <div class="`).concat(c," ").concat(l,'" ').concat(Q5,`></div>
    `),this.collection.forEach(function(m){return e.add(m,d)}),this.append(d);var h="".concat(l,"s ").concat(o,"one-bg ").concat(o,"two-color");return this.$el.addClass(h),this.rendered=!0,this},r})(wq.A);const J5=vO;vO.prototype.itemView=$d;var Cq=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Sq=function(a,r,e){if(e||arguments.length===2)for(var t=0,s=r.length,o;t<s;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return a.concat(o||Array.prototype.slice.call(r))},Nq=(function(a){Cq(r,a);function r(e){var t=a.call(this,e,"TraitManager",eq())||this;t.TraitsView=J5,t.events=cv,t.state=new Sr.Kx({traits:[]}),t.types={text:$d,number:yq,select:bq,checkbox:oq,color:pq,button:nq};var s=t,o=s.state,i=s.config,l=s.events,c=i.pStylePrefix;c&&(i.stylePrefix="".concat(c).concat(i.stylePrefix)),(0,Ce.bindAll)(t,"__onSelect");var d=(0,Ce.debounce)(function(){return t.__upSel()},0),h=(0,Ce.debounce)(function(){return t.__onUp()},0);return o.listenTo(e,"component:toggled",d),o.listenTo(e,l.value,h),o.on("change:traits",t.__onSelect),t.debounced=[d,h],t}return r.prototype.select=function(e){var t=e?.getTraits()||[];this.state.set({component:e,traits:t}),this.__trgCustom()},r.prototype.getCategories=function(){var e,t=this.getComponent(),s=((e=t?.traits.categories)===null||e===void 0?void 0:e.models)||[];return Sq([],s,!0)},r.prototype.getTraits=function(){return this.getCurrent()},r.prototype.getTraitsByCategory=function(e){return L3(e||this.getTraits())},r.prototype.getComponent=function(){return this.state.attributes.component},r.prototype.addType=function(e,t){var s=this.getType("text");this.types[e]=s.extend(t)},r.prototype.getType=function(e){return this.getTypes()[e]},r.prototype.getTypes=function(){return this.types},r.prototype.getTraitsViewer=function(){return this.view},r.prototype.getCurrent=function(){return this.state.get("traits")||[]},r.prototype.render=function(){var e=this.view,t=this.em;return e=new J5({el:e?.el,collection:[],editor:t,config:this.getConfig()},this.getTypes()),this.view=e,e.el},r.prototype.postRender=function(){this.__appendTo()},r.prototype.__onSelect=function(){var e=this,t=e.em,s=e.events,o=e.state,i=o.attributes,l=i.component,c=i.traits;t.trigger(s.select,{component:l,traits:c})},r.prototype.__trgCustom=function(e){e===void 0&&(e={});var t=this,s=t.em,o=t.events,i=t.__ctn;this.__ctn=i||e.container,s.trigger(o.custom,this.__customData())},r.prototype.__customData=function(){return{container:this.__ctn}},r.prototype.__upSel=function(){this.select(this.em.getSelected())},r.prototype.__onUp=function(){this.select(this.getComponent())},r})(Ai);const kq=Nq;var _q=function(){return{stylePrefix:"",appendTo:"",sortable:!0,hidable:!0,hideTextnode:!0,root:"",showWrapper:!0,showHover:!0,scrollCanvas:{behavior:"smooth",block:"nearest"},scrollLayers:{behavior:"auto",block:"nearest"},highlightHover:!0,custom:!1,onInit:function(){},onRender:function(){},extend:{}}};const Eq=_q;var gC;(function(a){a.root="layer:root",a.component="layer:component",a.custom="layer:custom"})(gC||(gC={}));var Tq=ha(6756),Oq=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Pq=(function(a){Oq(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e._dropAreaConfig={ratio:.4,minUndroppableDimension:3,maxUndroppableDimension:20},e}return Object.defineProperty(r.prototype,"view",{get:function(){return this.model.viewLayer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"element",{get:function(){var e;return(e=this.model.viewLayer)===null||e===void 0?void 0:e.el},enumerable:!1,configurable:!0}),r})(Tq.h);const Aq=Pq;var Mq=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Iq=(function(a){Mq(r,a);function r(e){e===void 0&&(e={});var t=a.call(this,e)||this;t.items=[],t.opt=e;var s=e.config||{};t.config=s,t.module=e.module,t.parentView=e.parentView;var o=s.stylePrefix||"";s.pStylePrefix;var i=t.collection;t.listenTo(i,"add",t.addTo),t.listenTo(i,"reset resetNavigator",t.render),t.listenTo(i,"remove",t.removeChildren),t.className="".concat(o,"layers");var l=s.em;if(s.sortable&&!t.opt.sorter){var c=l.Utils,d=s.sortContainer||t.el,h=t.createPlaceholder(o);t.opt.sorter=new c.ComponentSorter({em:l,treeClass:Aq,containerContext:{container:d,containerSel:".".concat(t.className),itemSel:".".concat(o,"layer"),pfx:s.pStylePrefix,document,placeholderElement:h},dragBehavior:{dragDirection:ip.A.Vertical,nested:!0}})}return t.$el.data("collection",i),e.parent&&t.$el.data("model",e.parent),t}return r.prototype.createPlaceholder=function(e){var t=document.createElement("div"),s=document.createElement("div");return this.el.parentNode,t.className=e+"placeholder",t.style.display="none",t.style.pointerEvents="none",s.className=e+"placeholder-int",t.appendChild(s),t},r.prototype.removeChildren=function(e){var t=e.viewLayer;t&&(t.remove(),delete e.viewLayer)},r.prototype.addTo=function(e){this.addToCollection(e,null,this.collection.indexOf(e))},r.prototype.addToCollection=function(e,t,s){var o=this,i=o.parentView,l=o.opt,c=o.config,d=o.el,h=l.ItemView,m=l.opened,y=l.module,x=l.level,b=l.sorter,v=e.viewLayer||new h({ItemView:h,level:x,model:e,parentView:i,config:c,sorter:b,opened:m,module:y}),j=v.render().el;if(t)t.appendChild(j);else{var S=d,k=S.childNodes;if((0,Ce.isUndefined)(s))S.appendChild(j);else{var N=k.length==s;N&&s--,N||!k.length?S.appendChild(j):S.insertBefore(j,k[s])}}return this.items.push(v),j},r.prototype.remove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Sr.Ss.prototype.remove.apply(this,e),this.items.map(function(s){return s.remove()}),this},r.prototype.render=function(){var e=this,t=this,s=t.el,o=t.module,i=document.createDocumentFragment();return s.innerHTML="",this.collection.map(function(l){return o.__getLayerFromComponent(l)}).forEach(function(l){return e.addToCollection(l,i)}),s.appendChild(i),s.className=this.className,this},r})(Sr.Ss);const Rq=Iq;var Wj=ha(9946),Lq=function(){return{stylePrefix:"com-",defaults:{},strict:!0,defaultOptions:{}}};const Dq=Lq;var Fq=ha(1738),Bq=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Uv=function(){return Uv=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Uv.apply(this,arguments)},e_=function(a,r,e){if(e||arguments.length===2)for(var t=0,s=r.length,o;t<s;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return a.concat(o||Array.prototype.slice.call(r))},t_=[["preview","Preview","preview"],["resize","Resize","resize"],["fullscreen","Fullscreen","fullscreen"],["copy","CopyComponent"],["paste","PasteComponent"],["canvas-move","CanvasMove"],["canvas-clear","CanvasClear"],["open-code","ExportTemplate","export-template"],["open-layers","OpenLayers","open-layers"],["open-styles","OpenStyleManager","open-sm"],["open-traits","OpenTraitManager","open-tm"],["open-blocks","OpenBlocks","open-blocks"],["open-assets","OpenAssets","open-assets"],["component-select","SelectComponent","select-comp"],["component-outline","SwitchVisibility","sw-visibility"],["component-offset","ShowOffset","show-offset"],["component-move","MoveComponent","move-comp"],["component-next","ComponentNext"],["component-prev","ComponentPrev"],["component-enter","ComponentEnter"],["component-exit","ComponentExit","select-parent"],["component-delete","ComponentDelete"],["component-style-clear","ComponentStyleClear"],["component-drag","ComponentDrag"]],bO={preserveSelected:1},wO=function(a){return function(r){return a.trigger("".concat(RS,":start"),r)}},jO=function(a){return function(r){return a.trigger(RS,r)}},CO=function(a,r,e){return e===void 0&&(e={}),function(t,s,o){setTimeout(function(){r.forEach(function(i){return i.set("status",i.get("selectable")?"selected":"")}),a.setSelected(r),r[0].emitUpdate()}),a.trigger("".concat(RS,":end"),o),setTimeout(function(){return a.runDefault(bO)}),(e.altMode||o.cancelled)&&a.set("_cmpDrag",1)}},zq=(function(a){Bq(r,a);function r(e){var t=a.call(this,e,"Commands",Dq())||this;t.CommandAbstract=Wj.default,t.defaultCommands={},t.commands={},t.active={},t.events=Fq.A;var s=t.config,o=s.pStylePrefix,i=t.defaultCommands;o&&(s.stylePrefix=o+s.stylePrefix),Object.keys(s.defaults).forEach(function(c){var d=s.defaults[c];d.id&&t.add(d.id,d)}),i["tlb-delete"]={run:function(c){return c.runCommand("core:component-delete")}},i["tlb-clone"]={run:function(c){c.runCommand("core:copy"),c.runCommand("core:paste",{action:"clone-component"})}},i["tlb-move"]={run:function(c,d,h){var m,y;h===void 0&&(h={});var x=c.getModel(),b=h.event,v=h.target,j=Array.isArray(v)?v:v?[v]:e_([],c.getSelectedAll(),!0),S=j.map(function(A){var q,I;return((I=(q=A.delegate)===null||q===void 0?void 0:q.move)===null||I===void 0?void 0:I.call(q,A))||A}).filter(Boolean),k=S[S.length-1],N=b?.type==="dragstart",P=["absolute","translate"];if(!k?.get("draggable"))return x.logWarning("The element is not draggable");var R=h.mode||k.get("dmode")||x.get("dmode"),F=function(){return x.stopDefault(bO)},z=(0,Ce.includes)(P,R);S.forEach(function(A){return A.trigger("disable",{fromMove:!0})}),N?setTimeout(F,0):F();var H=wO(x),V=jO(x),W=CO(x,S,{altMode:z});if(z)c.runCommand("core:component-drag",{guidesInfo:1,mode:R,target:k,onStart:H,onDrag:V,onEnd:W,event:b});else{N&&((m=b?.dataTransfer)===null||m===void 0||m.setDragImage((y=k.view)===null||y===void 0?void 0:y.el,0,0));var Z=c.Commands.get("move-comp");Z.onStart=H,Z.onDrag=V,Z.onEndMoveFromModel=W,Z.initSorterFromModels(S)}S.filter(function(A){return A.get("selectable")}).forEach(function(A){return A.set("status","freezed-selected")})}},i["core:undo"]=function(c){return c.UndoManager.undo()},i["core:redo"]=function(c){return c.UndoManager.redo()},t_.forEach(function(c){var d=c[2],h=ha(585)("./".concat(c[1])).default,m="core:".concat(c[0]);i[m]=h,d&&(i[d]=h,["run","stop"].forEach(function(y){e.on("".concat(y,":").concat(d),function(){for(var x=[],b=0;b<arguments.length;b++)x[b]=arguments[b];return e.trigger.apply(e,e_(["".concat(y,":").concat(m)],x,!1))})}))}),s.model=e.Canvas;for(var l in i)t.add(l,i[l]);return t}return r.prototype.add=function(e,t){var s=(0,Ce.isFunction)(t)?{run:t}:t;return s.stop||(s.noStop=!0),delete s.initialize,s.id=e,this.commands[e]=Wj.default.extend(s),this},r.prototype.get=function(e){var t=this.commands[e];return(0,Ce.isFunction)(t)?(t=new t(this.config),this.commands[e]=t):t||this.em.logWarning("'".concat(e,"' command not found")),t},r.prototype.extend=function(e,t){t===void 0&&(t={});var s=this.get(e);if(s){var o=Uv(Uv({},s.constructor.prototype),t);this.add(e,o);var i=t_.filter(function(l){return"core:".concat(l[0])===e&&l[2]})[0];i&&this.add(i[2],o)}return this},r.prototype.has=function(e){return!!this.commands[e]},r.prototype.getAll=function(){return this.commands},r.prototype.run=function(e,t){return t===void 0&&(t={}),this.runCommand(this.get(e),t)},r.prototype.stop=function(e,t){return t===void 0&&(t={}),this.stopCommand(this.get(e),t)},r.prototype.isActive=function(e){return this.getActive().hasOwnProperty(e)},r.prototype.getActive=function(){return this.active},r.prototype.runCommand=function(e,t){var s,o;t===void 0&&(t={});var i;if(e?.run){var l=this,c=l.em,d=l.config,h=e.id,m=c.Editor;if(!this.isActive(h)||t.force||!d.strict){var y=(o=(s=d.defaultOptions)===null||s===void 0?void 0:s[h])===null||o===void 0?void 0:o.run;(0,Ce.isFunction)(y)&&(t=y(t)),i=m&&e.callRun(m,t)}}return i},r.prototype.stopCommand=function(e,t){var s,o;t===void 0&&(t={});var i;if(e?.run){var l=this,c=l.em,d=l.config,h=e.id,m=c.Editor;if(this.isActive(h)||t.force||!d.strict){var y=(o=(s=d.defaultOptions)===null||s===void 0?void 0:s[h])===null||o===void 0?void 0:o.stop;(0,Ce.isFunction)(y)&&(t=y(t)),i=e.callStop(m,t)}}return i},r.prototype.create=function(e){e.stop||(e.noStop=!0);var t=Wj.default.extend(e);return new t(this.config)},r.prototype.__onRun=function(e,t){var s=this,o=s.em,i=s.events;o.on("".concat(i.runCommand).concat(e),t)},r.prototype.__onStop=function(e,t){var s=this,o=s.em,i=s.events;o.on("".concat(i.stopCommand).concat(e),t)},r.prototype.destroy=function(){this.defaultCommands={},this.commands={},this.active={}},r})(Ai);const Uq=zq;var $q=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),yC=function(){return yC=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},yC.apply(this,arguments)},r_="contentEditable",x0="data-toggle-move",Vq=(function(a){$q(r,a);function r(e){var t=a.call(this,e)||this;(0,Ce.bindAll)(t,"__render"),t.opt=e,t.module=e.module,t.config=e.config||{},t.sorter=e.sorter||"",t.parentView=e.parentView;var s=t,o=s.model,i=s.pfx,l=s.ppfx,c=o.get("type")||"default";return t.className="".concat(i,"layer ").concat(i,"layer__t-").concat(c," no-select ").concat(l,"two-color"),t.inputNameCls="".concat(l,"layer-name"),t.clsTitleC="".concat(i,"layer-title-c"),t.clsTitle="".concat(i,"layer-title"),t.clsCaret="".concat(i,"layer-caret"),t.clsCount="".concat(i,"layer-count"),t.clsMove="".concat(i,"layer-move"),t.clsChildren="".concat(i,"layer-children"),t.clsNoChild="".concat(i,"layer-no-chld"),t.clsEdit="".concat(t.inputNameCls,"--edit"),t.clsNoEdit="".concat(t.inputNameCls,"--no-edit"),t.initComponent(),t}return r.prototype.events=function(){var e;return e={},e["mousedown [".concat(x0,"]")]="startSort",e["touchstart [".concat(x0,"]")]="startSort",e["click [data-toggle-visible]"]="toggleVisibility",e["click [data-toggle-open]"]="toggleOpening",e["click [data-toggle-select]"]="handleSelect",e["mouseover [data-toggle-select]"]="handleHover",e["mouseout [data-toggle-select]"]="handleHoverOut",e["dblclick [data-name]"]="handleEdit",e["keydown [data-name]"]="handleEditKey",e["focusout [data-name]"]="handleEditEnd",e},r.prototype.template=function(e){var t=this,s=t.pfx,o=t.ppfx,i=t.config,l=t.clsNoEdit,c=t.module,d=t.opt,h=t.em,m=i.hidable,y=c.getComponents(e).length,x=y?"":this.clsNoChild,b="".concat(this.clsTitle," ").concat(x),v="".concat(this.clsTitleC),j="".concat(this.inputNameCls," ").concat(l," ").concat(o,"no-app"),S=d.level||0,k="".concat(S*10,"px"),N=e.getName(),P=e.getIcon(),R="".concat(s,"layer"),F=(h?.getConfig()).icons,z=F,H=z.move,V=z.eye,W=z.eyeOff,Z=z.chevron;return`
      <div class="`.concat(s,"layer-item ").concat(o,`one-bg" data-toggle-select>
        <div class="`).concat(s,`layer-item-left">
          `).concat(m?'<i class="'.concat(s,`layer-vis" data-toggle-visible>
                <i class="`).concat(s,'layer-vis-on">').concat(V,`</i>
                <i class="`).concat(s,'layer-vis-off">').concat(W,`</i>
              </i>`):"",`
          <div class="`).concat(v,`">
            <div class="`).concat(b,'" style="padding-left: ').concat(k,`">
              <div class="`).concat(s,'layer-title-inn" title="').concat(N,`">
                <i class="`).concat(this.clsCaret,'" data-toggle-open>').concat(Z,`</i>
                  `).concat(P?'<span class="'.concat(R,'__icon">').concat(P,"</span>"):"",`
                <span class="`).concat(j,'" data-name>').concat(N,`</span>
              </div>
            </div>
          </div>
        </div>
        <div class="`).concat(s,`layer-item-right">
          <div class="`).concat(this.clsCount,'" data-count>').concat(y||"",`</div>
          <div class="`).concat(this.clsMove,'" ').concat(x0,">").concat(H||"",`</div>
        </div>
      </div>
      <div class="`).concat(this.clsChildren,`"></div>
    `)},Object.defineProperty(r.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ppfx",{get:function(){return this.em.getConfig().stylePrefix},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pfx",{get:function(){return this.config.stylePrefix},enumerable:!1,configurable:!0}),r.prototype.initComponent=function(){var e=this,t=this,s=t.model,o=t.config,i=o.onInit,l=s.components();this.listenTo(l,"remove add reset",this.checkChildren),[["change:status",this.updateStatus],["change:open",this.updateOpening],["change:layerable",this.updateLayerable],["change:style:display",this.updateVisibility],["change:draggable",this.updateMove],["rerender:layer",this.render],["change:name change:custom-name",this.updateName]].forEach(function(c){return e.listenTo(s,c[0],c[1])}),this.$el.data("model",s),this.$el.data("collection",l),s.viewLayer=this,i.bind(this)({component:s,render:this.__render,listenTo:this.listenTo})},r.prototype.updateName=function(){this.getInputName().innerText=this.model.getName()},r.prototype.getVisibilityEl=function(){return this.getItemContainer().find("[data-toggle-visible]")},r.prototype.updateVisibility=function(){var e=this,t=e.pfx,s=e.model,o=e.module,i="".concat(t,"layer-hidden"),l=!o.isVisible(s),c=l?"addClass":"removeClass";this.$el[c](i),this.getVisibilityEl()[c]("".concat(t,"layer-off"))},r.prototype.updateMove=function(){var e=this,t=e.model,s=e.config,o=this.getItemContainer().find("[".concat(x0,"]"))[0];if(o){var i=t.get("draggable")&&s.sortable;o.style.display=i?"":"none"}},r.prototype.toggleVisibility=function(e){e?.stopImmediatePropagation();var t=this,s=t.module,o=t.model;s.setVisible(o,!s.isVisible(o))},r.prototype.handleEdit=function(e){e?.stopPropagation();var t=this,s=t.em,o=t.$el,i=t.clsNoEdit,l=t.clsEdit,c=this.getInputName();c[r_]="true",c.focus(),document.execCommand("selectAll",!1),s.setEditing(!0),o.find(".".concat(this.inputNameCls)).removeClass(i).addClass(l)},r.prototype.handleEditKey=function(e){e.stopPropagation(),((0,Ir.v$)(e)||(0,Ir.Ci)(e))&&this.handleEditEnd(e)},r.prototype.handleEditEnd=function(e){e?.stopPropagation();var t=this,s=t.em,o=t.$el,i=t.clsNoEdit,l=t.clsEdit,c=t.model,d=this.getInputName(),h=d.textContent;d.scrollLeft=0,d[r_]="false",c.setName(h),s.setEditing(!1),o.find(".".concat(this.inputNameCls)).addClass(i).removeClass(l),this.updateName()},r.prototype.getInputName=function(){return this.inputName||(this.inputName=this.el.querySelector(".".concat(this.inputNameCls))),this.inputName},r.prototype.updateOpening=function(){var e=this,t=e.$el,s=e.model,o=e.pfx,i="open",l="".concat(o,"layer-open"),c=this.getCaret();this.module.isOpen(s)?(t.addClass(i),c.addClass(l)):(t.removeClass(i),c.removeClass(l))},r.prototype.toggleOpening=function(e){var t=this,s=t.model,o=t.module;e?.stopImmediatePropagation(),s.get("components").length&&o.setOpen(s,!o.isOpen(s))},r.prototype.handleSelect=function(e){e?.stopPropagation();var t=this,s=t.module,o=t.model;s.setLayerData(o,{selected:!0},{event:e})},r.prototype.handleHover=function(e){e?.stopPropagation();var t=this,s=t.module,o=t.model;s.setLayerData(o,{hovered:!0})},r.prototype.handleHoverOut=function(e){e?.stopPropagation();var t=this,s=t.module,o=t.model;s.setLayerData(o,{hovered:!1})},r.prototype.startSort=function(e){var t,s,o;e.stopPropagation();var i=this,l=i.em,c=i.sorter,d=i.model;if(!(e.button&&e.button!==0)&&c){var h=((s=(t=d.delegate)===null||t===void 0?void 0:t.move)===null||s===void 0?void 0:s.call(t,d))||d;c.eventHandlers=yC({legacyOnStartSort:wO(l),legacyOnMoveClb:jO(l),legacyOnEndMove:CO(l,[h])},c.eventHandlers);var m=((o=h.viewLayer)===null||o===void 0?void 0:o.el)||e.target;c.startSort([{element:m}])}},r.prototype.updateStatus=function(){us.prototype.updateStatus.apply(this,[{avoidHover:!this.config.highlightHover,noExtHl:!0}])},r.prototype.getItemContainer=function(){return this.$el.children("[data-toggle-select]")},r.prototype.checkChildren=function(){var e=this,t=e.model,s=e.clsNoChild,o=e.module,i=o.getComponents(t).length,l=this.getItemContainer(),c=l.find(".".concat(this.clsTitle)),d=l.find("[data-count]");c[i?"removeClass":"addClass"](s),d.html("".concat(i||"")),!i&&o.setOpen(t,!1)},r.prototype.getCaret=function(){return(!this.caret||!this.caret.length)&&(this.caret=this.getItemContainer().find(".".concat(this.clsCaret))),this.caret},r.prototype.setRoot=function(e){var t,s=(0,Ce.isString)(e)?(t=this.em.getWrapper())===null||t===void 0?void 0:t.find(e)[0]:e;s&&(this.stopListening(),this.model=s,this.initComponent(),this._rendered&&this.render())},r.prototype.updateLayerable=function(){var e=this.parentView,t=e||this;t.render()},r.prototype.__clearItems=function(){var e;(e=this.items)===null||e===void 0||e.remove()},r.prototype.remove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Sr.Ss.prototype.remove.apply(this,e),delete this.model.viewLayer,this.__clearItems(),this},r.prototype.render=function(){var e=this,t=e.model,s=e.config,o=e.pfx,i=e.ppfx,l=e.opt,c=e.sorter;this.__clearItems();var d=l.opened,h=l.module,m=l.ItemView,y=!h.__isLayerable(t),x=this.$el.empty(),b=l.level+1;delete this.inputName,this.items=new Rq({ItemView:m,collection:t.get("components"),config:s,sorter:c,opened:d,parentView:this,parent:t,level:b,module:h});var v=this.items.render().$el;return!s.showWrapper&&b===1?x.append(v):(x.html(this.template(t)),x.find(".".concat(this.clsChildren)).append(v)),!h.isVisible(t)&&(this.className+=" ".concat(o,"hide")),y&&(this.className+=" ".concat(i,"hidden")),x.attr("class",this.className),this.updateStatus(),this.updateOpening(),this.updateVisibility(),this.updateMove(),this.__render(),this._rendered=!0,this},r.prototype.__render=function(){var e=this,t=e.model,s=e.config,o=e.el,i=s.onRender,l={component:t,el:o};i.bind(this)(l),this.em.trigger("layer:render",l)},r})(Sr.Ss);const Wq=Vq;var Hq=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),xC=function(){return xC=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},xC.apply(this,arguments)},Hj={mediaText:""},qq=["open","status","locked","custom-name","components","classes"].map(function(a){return"".concat(ja.I.update,":").concat(a)}).join(" "),Gq=function(a){return a===void 0&&(a={}),(a.display||"").trim().indexOf("none")===0},Kq=(function(a){Hq(r,a);function r(e){var t=a.call(this,e,"LayerManager",Eq())||this;return t.events=gC,(0,Ce.bindAll)(t,"componentChanged","__onRootChange","__onComponent"),t.model=new zu.A(t,{opened:{}}),t.config.stylePrefix=t.config.pStylePrefix,t}return r.prototype.onLoad=function(){var e=this,t=this,s=t.em,o=t.config,i=t.model;i.listenTo(s,"component:selected",this.componentChanged),i.on("change:root",this.__onRootChange),i.listenTo(s,qq,this.__onComponent),this.componentChanged(),i.listenToOnce(s,"load",function(){e.setRoot(o.root),e.__appendTo()})},r.prototype.setRoot=function(e){var t=this.em.getWrapper(),s=(0,Zt.isComponent)(e)?e:t;e&&(0,Ce.isString)(e)&&(0,Zt.hasWin)()&&(s=t.find(e)[0]||t);var o=this.__getLayerFromComponent(s);return this.model.set("root",o),o},r.prototype.getRoot=function(){return this.model.get("root")},r.prototype.getComponents=function(e){var t=this;return e.components().map(function(s){return t.__getLayerFromComponent(s)}).filter(function(s){return t.__isLayerable(s)})},r.prototype.setOpen=function(e,t){e.set("open",t)},r.prototype.isOpen=function(e){return!!e.get("open")},r.prototype.setVisible=function(e,t){var s="__prev-display",o=e.getStyle(Hj),i=o.display;if(t){var l=e.get(s);delete o.display,l&&(o.display=l,e.unset(s))}else i&&e.set(s,i),o.display="none";e.setStyle(o,Hj),this.updateLayer(e),this.em.trigger("component:toggled")},r.prototype.isVisible=function(e){return!Gq(e.getStyle(Hj))},r.prototype.setLocked=function(e,t){e.set("locked",t)},r.prototype.isLocked=function(e){return!!e.get("locked")},r.prototype.setName=function(e,t){e.set("custom-name",t)},r.prototype.getName=function(e){return e.getName()},r.prototype.getLayerData=function(e){var t=e.get("status");return{name:e.getName(),open:this.isOpen(e),selected:t==="selected",hovered:t==="hovered",visible:this.isVisible(e),locked:this.isLocked(e),components:this.getComponents(e)}},r.prototype.setLayerData=function(e,t,s){var o;s===void 0&&(s={});var i=this,l=i.em,c=i.config,d=t.open,h=t.selected,m=t.hovered,y=t.visible,x=t.locked,b=t.name,v=xC({fromLayers:!0},s);if((0,Zt.isDef)(d)&&this.setOpen(e,d),(0,Zt.isDef)(h))if(h){l.setSelected(e,v);var j=c.scrollCanvas;j&&((o=e.views)===null||o===void 0||o.forEach(function(S){return S.scrollIntoView(j)}))}else l.removeSelected(e,v);(0,Zt.isDef)(m)&&c.showHover&&(m?l.setHovered(e,v):l.setHovered(null,v)),(0,Zt.isDef)(y)&&y!==this.isVisible(e)&&this.setVisible(e,y),(0,Zt.isDef)(x)&&this.setLocked(e,x),(0,Zt.isDef)(b)&&this.setName(e,b)},r.prototype.componentChanged=function(e,t){var s;if(t===void 0&&(t={}),!t.fromLayers){var o=this,i=o.em,l=o.config,c=l.scrollLayers,d=this.model.get("opened"),h=i.getSelected(),m=h?.parent();for(var y in d)d[y].set("open",!1),delete d[y];for(;m;)m.set("open",!0),d[m.cid]=m,m=m.parent();if(h&&c){var x=(s=h.viewLayer)===null||s===void 0?void 0:s.el;x?.scrollIntoView(c)}}},r.prototype.getAll=function(){return this.view},r.prototype.render=function(){var e,t,s=this,o=s.config,i=s.model,l=Wq.extend(o.extend);return this.view=new l({el:(e=this.view)===null||e===void 0?void 0:e.el,ItemView:l,level:0,config:o,opened:i.get("opened"),model:this.getRoot(),module:this}),(t=this.view)===null||t===void 0?void 0:t.render().el},r.prototype.destroy=function(){var e;(e=this.view)===null||e===void 0||e.remove()},r.prototype.__onRootChange=function(){var e,t=this,s=t.em,o=t.events,i=this.getRoot();(e=this.view)===null||e===void 0||e.setRoot(i),s.trigger(o.root,i),this.__trgCustom()},r.prototype.__getLayerFromComponent=function(e){var t,s;return((s=(t=e.delegate)===null||t===void 0?void 0:t.layer)===null||s===void 0?void 0:s.call(t,e))||e},r.prototype.__onComponent=function(e){this.updateLayer(e)},r.prototype.__isLayerable=function(e){var t=e.tagName,s=this.config.hideTextnode,o=!s||!e.isInstanceOf("textnode")&&t!=="br";return o&&e.get("layerable")},r.prototype.__trgCustom=function(e){var t=this,s=t.__ctn,o=t.em,i=t.events;this.__ctn=s||e?.container,o.trigger(i.custom,{container:this.__ctn,root:this.getRoot()})},r.prototype.updateLayer=function(e,t){var s=this,o=s.em,i=s.events;o.trigger(i.component,e,t)},r})(Ai);const Yq=Kq;var Zq=function(){return{assets:[],noAssets:"",stylePrefix:"am-",upload:"",uploadName:"files",headers:{},params:{},credentials:"include",multiUpload:!0,multiUploadSuffix:"[]",autoAdd:!0,customFetch:void 0,uploadFile:void 0,embedAsBase64:!0,handleAdd:void 0,beforeUpload:void 0,showUrlInput:!0,custom:!1,dropzone:!1,openAssetsOnDrop:!0,dropzoneContent:""}};const Xq=Zq;var Qq=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),SO=(function(a){Qq(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.getDefaults=function(){return(0,Ce.result)(this.prototype,"defaults")},r.prototype.defaults=function(){return{type:"",src:""}},r.prototype.getType=function(){return this.get("type")},r.prototype.getSrc=function(){return this.get("src")||""},r.prototype.getFilename=function(){return this.getSrc().split("/").pop().split("?").shift()},r.prototype.getExtension=function(){return this.getFilename().split(".").pop()},r})(Sr.Kx);const vC=SO;SO.prototype.idAttribute="src";var Jq=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),$v=function(){return $v=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},$v.apply(this,arguments)},eG=(function(a){Jq(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.defaults=function(){return $v($v({},vC.getDefaults()),{type:"image",unitDim:"px",height:0,width:0})},r})(vC);const tG=eG;var rG=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),nG=(function(a){rG(r,a);function r(e){var t=a.call(this,e)||this;t.options=e,t.collection=e.collection;var s=e.config||{};t.config=s,t.pfx=s.stylePrefix||"",t.ppfx=s.pStylePrefix||"",t.em=s.em,t.className=t.pfx+"asset",t.listenTo(t.model,"destroy remove",t.remove),t.model.view=t;var o=t.init&&t.init.bind(t);return o&&o(e),t}return r.prototype.__getBhv=function(){var e=this.em,t=e?.Assets;return t?.__getBehaviour()||{}},r.prototype.template=function(e,t){var s=this.pfx;return`
      <div class="`.concat(s,`preview-cont">
        `).concat(this.getPreview(),`
      </div>
      <div class="`).concat(s,`meta">
        `).concat(this.getInfo(),`
      </div>
      <div class="`).concat(s,`close" data-toggle="asset-remove">
        &Cross;
      </div>
    `)},r.prototype.updateTarget=function(e){e&&e.set&&(e.set("attributes",(0,Ce.clone)(e.get("attributes"))),e.set("src",this.model.get("src")))},r.prototype.getPreview=function(){return""},r.prototype.getInfo=function(){return""},r.prototype.render=function(){var e=this.el;return e.innerHTML=this.template(this,this.model),e.className=this.className,this},r})(Sr.Ss);const aG=nG;var sG=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),n_=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a},NO=(function(a){sG(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.getPreview=function(){var e=this,t=e.pfx,s=e.ppfx,o=e.model,i=o.get("src");return Ni(a_||(a_=n_([`
      <div class="`,`preview" style="background-image: url('`,`');"></div>
      <div class="`,"preview-bg ",`checker-bg"></div>
    `],[`
      <div class="`,`preview" style="background-image: url('`,`');"></div>
      <div class="`,"preview-bg ",`checker-bg"></div>
    `])),t,i,t,s)},r.prototype.getInfo=function(){var e=this,t=e.pfx,s=e.model,o=s.get("name"),i=s.get("width"),l=s.get("height"),c=s.get("unitDim"),d=i&&l?"".concat(i,"x").concat(l).concat(c):"";return o=o||s.getFilename(),Ni(s_||(s_=n_([`
      <div class="`,'name">',`</div>
      <div class="`,'dimensions">',`</div>
    `],[`
      <div class="`,'name">',`</div>
      <div class="`,'dimensions">',`</div>
    `])),t,o,t,d)},r.prototype.init=function(e){var t=this.pfx;this.className+=" ".concat(t,"asset-image")},r.prototype.onClick=function(){var e=this,t=e.model,s=e.pfx,o=this.__getBhv().select,i=this.config.onClick,l=this.collection;l.trigger("deselectAll"),this.$el.addClass(s+"highlight"),(0,Ce.isFunction)(o)?o(t,!1):(0,Ce.isFunction)(i)?i(t):this.updateTarget(l.target)},r.prototype.onDblClick=function(){var e=this,t=e.em,s=e.model,o=this.__getBhv().select,i=this.config.onDblClick,l=this.collection,c=l.target,d=l.onSelect;(0,Ce.isFunction)(o)?o(s,!0):(0,Ce.isFunction)(i)?i(s):(this.updateTarget(c),t?.Modal.close()),(0,Ce.isFunction)(d)&&d(s)},r.prototype.onRemove=function(e){e.stopImmediatePropagation(),this.model.collection.remove(this.model)},r})(aG);const oG=NO;NO.prototype.events={"click [data-toggle=asset-remove]":"onRemove",click:"onClick",dblclick:"onDblClick"};var a_,s_,Vv=function(){return Vv=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Vv.apply(this,arguments)},iG={types:[],initialize:function(a,r){var e=this;r===void 0&&(r={});var t=r.em;this.em=t,this.opts=r,this.model=function(o,i){o===void 0&&(o={}),i===void 0&&(i={});var l,c,d;if(o&&o.type){var h=e.getBaseType();d=e.getType(o.type),l=d?d.model:h.model,c=d?d.view:h.view}else{var m=e.recognizeType(o);d=m.type,l=d.model,c=d.view,o=m.attributes}var y=new l(o,Vv(Vv({},i),{em:t}));return y.typeView=c,e.model.prototype=l.prototype,y};var s=this.init&&this.init.bind(this);s&&s()},recognizeType:function(a){for(var r=this.getTypes(),e=0;e<r.length;e++){var t=r[e],s=t.isType(a);if(s=typeof s=="boolean"&&s?{type:t.id}:s,s)return{type:t,attributes:s}}return{type:this.getBaseType(),attributes:a}},getBaseType:function(){var a=this.getTypes();return a[a.length-1]},getTypes:function(){return this.types},getType:function(a){for(var r=this.getTypes(),e=0;e<r.length;e++){var t=r[e];if(t.id===a)return t}},addType:function(a,r){var e=this.getType(a),t=this.getBaseType(),s=e?e.model:t.model,o=e?e.view:t.view,i=r.model,l=r.view,c=r.isType;i=i instanceof Sr.Kx||(0,Ce.isFunction)(i)?i:s.extend(i||{}),l=l instanceof Sr.Ss||(0,Ce.isFunction)(l)?l:o.extend(l||{}),this.extendViewApi&&!r.model&&!r.view&&(l=l.extend(r)),e?(e.model=i,e.view=l,e.isType=c||e.isType):(r.id=a,r.model=i,r.view=l,r.isType=c||function(d){if(d&&d.type==a)return!0},this.getTypes().unshift(r))}};const kO=iG;var lG=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),cG=Sr.pM.extend(kO),_O=(function(a){lG(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r})(cG);const qj=_O;_O.prototype.types=[{id:"image",model:tG,view:oG,isType:function(a){return typeof a=="string"?{type:"image",src:a}:a}}];var bC;(function(a){a.add="asset:add",a.remove="asset:remove",a.removeBefore="asset:remove:before",a.update="asset:update",a.open="asset:open",a.close="asset:close",a.uploadStart="asset:upload:start",a.uploadEnd="asset:upload:end",a.uploadError="asset:upload:error",a.uploadResponse="asset:upload:response",a.custom="asset:custom",a.all="asset"})(bC||(bC={}));const o_=bC;var dG=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),EO=(function(a){dG(r,a);function r(e){e===void 0&&(e={});var t=a.call(this,e)||this;t.options=e,t.config=e.config,t.pfx=t.config.stylePrefix||"",t.ppfx=t.config.pStylePrefix||"",t.em=t.config.em;var s=t.collection;return t.listenTo(s,"reset",t.renderAssets),t.listenTo(s,"add",t.addToAsset),t.listenTo(s,"remove",t.removedAsset),t.listenTo(s,"deselectAll",t.deselectAll),t}return r.prototype.template=function(e){var t=e.pfx,s=e.ppfx,o=e.em,i="";return this.config.showUrlInput&&(i=`
          <form class="`.concat(t,`add-asset">
            <div class="`).concat(s,"field ").concat(t,`add-field">
              <input placeholder="`).concat(o?.t("assetManager.inputPlh"),`"/>
            </div>
            <button class="`).concat(s,'btn-prim">').concat(o?.t("assetManager.addButton"),`</button>
            <div style="clear:both"></div>
          </form>
      `)),`
    <div class="`.concat(t,`assets-cont">
      <div class="`).concat(t,`assets-header">
        `).concat(i,`
      </div>
      <div class="`).concat(t,`assets" data-el="assets"></div>
      <div style="clear:both"></div>
    </div>
    `)},r.prototype.handleSubmit=function(e){e.preventDefault();var t=this.getAddInput(),s=t&&t.value.trim(),o=this.config.handleAdd;if(s){t.value="";var i=this.getAssetsEl();i&&(i.scrollTop=0),o?o.bind(this)(s):this.options.globalCollection.add(s,{at:0})}},r.prototype.getAssetsEl=function(){return this.el.querySelector(".".concat(this.pfx,"assets"))},r.prototype.getAddInput=function(){return(!this.inputUrl||!this.inputUrl.value)&&(this.inputUrl=this.el.querySelector(".".concat(this.pfx,"add-asset input"))),this.inputUrl},r.prototype.removedAsset=function(e){this.collection.length||this.toggleNoAssets()},r.prototype.addToAsset=function(e){this.collection.length==1&&this.toggleNoAssets(!0),this.addAsset(e)},r.prototype.addAsset=function(e,t){t===void 0&&(t=null);var s=t,o=this.collection,i=this.config,l=new e.typeView({model:e,collection:o,config:i}).render().el;if(s)s.appendChild(l);else{var c=this.getAssetsEl();c&&c.insertBefore(l,c.firstChild)}return l},r.prototype.toggleNoAssets=function(e){e===void 0&&(e=!1);var t=this.$el.find(".".concat(this.pfx,"assets"));if(e)t.empty();else{var s=this.config.noAssets;s&&t.append(s)}},r.prototype.deselectAll=function(){var e=this.pfx;this.$el.find(".".concat(e,"highlight")).removeClass("".concat(e,"highlight"))},r.prototype.renderAssets=function(){var e=this,t=document.createDocumentFragment(),s=this.$el.find(".".concat(this.pfx,"assets"));s.empty(),this.toggleNoAssets(!!this.collection.length),this.collection.each(function(o){return e.addAsset(o,t)}),s.append(t)},r.prototype.render=function(){var e=this.options.fu.render().el;return this.$el.empty(),this.$el.append(e).append(this.template(this)),this.el.className="".concat(this.ppfx,"asset-manager"),this.renderAssets(),this},r})(Sr.Ss);const uG=EO;EO.prototype.events={submit:"handleSubmit"};var fG=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),pG=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a},hG=(function(a){fG(r,a);function r(e){e===void 0&&(e={});var t=a.call(this,e)||this;t.options=e;var s=e.config||{};t.module=e.module,t.config=s,t.em=t.config.em,t.pfx=s.stylePrefix||"",t.ppfx=s.pStylePrefix||"",t.target=t.options.globalCollection||{},t.uploadId=t.pfx+"uploadFile",t.disabled=s.disableUpload!==void 0?s.disableUpload:!s.upload&&!s.embedAsBase64,t.multiUpload=s.multiUpload!==void 0?s.multiUpload:!0;var o=s.uploadFile;return o?t.uploadFile=o.bind(t):!s.upload&&s.embedAsBase64&&(t.uploadFile=r.embedAsBase64),t.delegateEvents(),t}return r.prototype.template=function(e){var t=e.pfx,s=e.title,o=e.uploadId,i=e.disabled,l=e.multiUpload;return Ni(i_||(i_=pG([`
      <form>
        <div id="`,'title">',`</div>
        <input
          data-input
          type="file"
          id="`,`"
          name="file"
          accept="*/*"
          `,`
          `,`
        />
        <div style="clear:both;"></div>
      </form>
    `],[`
      <form>
        <div id="`,'title">',`</div>
        <input
          data-input
          type="file"
          id="`,`"
          name="file"
          accept="*/*"
          `,`
          `,`
        />
        <div style="clear:both;"></div>
      </form>
    `])),t,s,o,i?"disabled":"",l?"multiple":"")},r.prototype.events=function(){return{"change [data-input]":"uploadFile"}},r.prototype.onUploadStart=function(){var e=this.module;e?.__propEv(e.events.uploadStart)},r.prototype.onUploadEnd=function(e){var t=this,s=t.$el,o=t.module;o?.__propEv(o.events.uploadEnd,e);var i=s.find("input");i&&i.val("")},r.prototype.onUploadError=function(e){var t=this.module;console.error(e),this.onUploadEnd(e),t?.__propEv(t.events.uploadError,e)},r.prototype.onUploadResponse=function(e,t){var s=this,o=s.module,i=s.config,l=s.target,c;try{c=typeof e=="string"?JSON.parse(e):e}catch{c=e}o?.__propEv(o.events.uploadResponse,c),i.autoAdd&&l&&l.add(c.data,{at:0}),this.onUploadEnd(e),t?.(c)},r.prototype.uploadFile=function(e,t,s){var o=this,i,l=e.dataTransfer?e.dataTransfer.files:(i=e.target)===null||i===void 0?void 0:i.files,c=this.config,d=c.beforeUpload,h=d&&d(l);if(h!==!1){var m=new FormData,y=c.params,x=c.customFetch,b=c.fetchOptions;for(var v in y)m.append(v,y[v]);if(this.multiUpload)for(var j=0;j<l.length;j++)m.append("".concat(c.uploadName).concat(c.multiUploadSuffix),l[j]);else l.length&&m.append(c.uploadName,l[0]);var S=c.upload,k=c.headers,N="X-Requested-With";if(typeof k[N]>"u"&&(k[N]="XMLHttpRequest"),S){this.onUploadStart();var P={method:"post",credentials:c.credentials||"include",headers:k,body:m},R=b?.(P)||P,F=x?x(S,R):fO(S,R).then(function(z){return(z.status/200|0)==1?z.text():z.text().then(function(H){return Promise.reject(H)})});return F.then(function(z){return o.onUploadResponse(z,t)}).catch(function(z){return o.onUploadError(z)})}}},r.prototype.initDrop=function(){var e=this;if(!this.uploadForm){this.uploadForm=this.$el.find("form").get(0);var t=this.uploadForm;"draggable"in t&&(this.uploadForm.ondragover=function(){return t.className=e.pfx+"hover",!1},this.uploadForm.ondragleave=function(){return t.className="",!1},this.uploadForm.ondrop=function(s){t.className="",s.preventDefault(),e.uploadFile(s)})}},r.prototype.initDropzone=function(e){var t=this,s=0,o=this.config,i=e.model,l=e.el,c=i.Editor,d=i.Canvas.getBody(),h=this.ppfx,m="".concat(h,"dropzone-active"),y="".concat(h,"dropzone"),x=function(){l.className=l.className.replace(m,"").trim(),s=0},b=function(){return s||(l.className+=" ".concat(m),s=1),!1},v=function(){return x(),!1},j=function(S){if(x(),S.preventDefault(),S.stopPropagation(),t.uploadFile(S),o.openAssetsOnDrop&&c){var k=c.getSelected();c.runCommand("open-assets",{target:k,onSelect:function(){c.Modal.close(),c.AssetManager.setTarget(null)}})}return!1};e.$el.append('<div class="'.concat(y,'">').concat(o.dropzoneContent,"</div>")),x(),"draggable"in l&&[l,d].forEach(function(S){S.ondragover=b,S.ondragleave=v,S.ondrop=j})},r.prototype.render=function(){var e=this,t=e.$el,s=e.pfx,o=e.em;return t.html(this.template({title:o&&o.t("assetManager.uploadTitle"),uploadId:this.uploadId,disabled:this.disabled,multiUpload:this.multiUpload,pfx:s})),this.initDrop(),t.attr("class",s+"file-uploader"),this},r.embedAsBase64=function(e,t){var s=this,o=e.dataTransfer?e.dataTransfer.files:e.target.files,i={data:[]};if(!FileReader){this.onUploadError(new Error("Unsupported platform, FileReader is not defined"));return}for(var l=[],c=/^(.+)\/(.+)$/,d=function(x){var b=new Promise(function(v,j){var S=new FileReader;S.addEventListener("load",function(k){var N,P=x.name,R=c.exec(x.type);if(R?N=R[1]:N=x.type,N==="image"){var F={src:S.result,name:P,type:N,height:0,width:0},z=new Image;z.addEventListener("error",function(H){j(H)}),z.addEventListener("load",function(){F.height=z.height,F.width=z.width,v(F)}),z.src=F.src}else v(N?{src:S.result,name:P,type:N}:S.result)}),S.addEventListener("error",function(k){j(k)}),S.addEventListener("abort",function(k){j("Aborted")}),S.readAsDataURL(x)});l.push(b)},h=0,m=o;h<m.length;h++){var y=m[h];d(y)}return Promise.all(l).then(function(x){i.data=x,s.onUploadResponse(i,t)},function(x){s.onUploadError(x)})},r})(Sr.Ss);const mG=hG;var i_,gG=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),jh=function(){return jh=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},jh.apply(this,arguments)},l_=function(a,r,e){if(e||arguments.length===2)for(var t=0,s=r.length,o;t<s;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return a.concat(o||Array.prototype.slice.call(r))},kg="open-assets",yG=(function(a){gG(r,a);function r(e){var t=a.call(this,e,"AssetManager",new qj([],e),o_,Xq())||this;t.storageKey="assets",t.Asset=vC,t.Assets=qj,t.events=o_;var s=t,o=s.all,i=s.config;t.assetsVis=new qj([]);var l=i.pStylePrefix;return l&&(i.stylePrefix="".concat(l).concat(i.stylePrefix)),o.on("add",function(c){return t.getAllVisible().add(c)}),o.on("remove",function(c){return t.getAllVisible().remove(c)}),t.__onAllEvent=(0,Ce.debounce)(function(){return t.__trgCustom()},0),t}return r.prototype.open=function(e){e===void 0&&(e={});var t=this.em.Commands;t.run(kg,jh({types:["image"],select:function(){}},e))},r.prototype.close=function(){var e=this.em.Commands;e.stop(kg)},r.prototype.isOpen=function(){var e=this.em.Commands;return!!e?.isActive(kg)},r.prototype.add=function(e,t){return t===void 0&&(t={}),typeof t.at>"u"&&(t.at=0),this.all.add(e,t)},r.prototype.get=function(e){return this.all.where({src:e})[0]||null},r.prototype.getAll=function(){return this.all},r.prototype.getAllVisible=function(){return this.assetsVis},r.prototype.remove=function(e,t){return this.__remove(e,t)},r.prototype.store=function(){return this.getProjectData()},r.prototype.load=function(e){return this.loadProjectData(e)},r.prototype.getContainer=function(){var e,t=this.__getBehaviour();return t.container||((e=this.am)===null||e===void 0?void 0:e.el)},r.prototype.getAssetsEl=function(){var e;return(e=this.am)===null||e===void 0?void 0:e.el.querySelector("[data-el=assets]")},r.prototype.render=function(e){if(!this.getConfig().custom){var t=e||this.getAll().models;if(!this.am){var s=this.__viewParams();s.fu=this.FileUploader(),this.am=new uG(jh({},s)),this.am.render()}return this.assetsVis.reset(t),this.getContainer()}},r.prototype.__viewParams=function(){return{collection:this.assetsVis,globalCollection:this.all,config:this.config,module:this,fu:void 0}},r.prototype.addType=function(e,t){this.getAll().addType(e,t)},r.prototype.getType=function(e){return this.getAll().getType(e)},r.prototype.getTypes=function(){return this.getAll().getTypes()},r.prototype.AssetsView=function(){return this.am},r.prototype.FileUploader=function(){return this.fu||(this.fu=new mG(this.__viewParams())),this.fu},r.prototype.onLoad=function(){var e=this;this.getAll().reset(this.config.assets);var t=this,s=t.em,o=t.events;s.Commands.__onRun(kg,function(){return e.__propEv(o.open)}),s.Commands.__onStop(kg,function(){return e.__propEv(o.close)})},r.prototype.postRender=function(e){var t;this.config.dropzone&&((t=this.fu)===null||t===void 0||t.initDropzone(e))},r.prototype.setTarget=function(e){this.assetsVis.target=e},r.prototype.onSelect=function(e){this.assetsVis.onSelect=e},r.prototype.onClick=function(e){this.config.onClick=e},r.prototype.onDblClick=function(e){this.config.onDblClick=e},r.prototype.__propEv=function(e){for(var t,s,o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];(t=this.em).trigger.apply(t,l_([e],o,!1)),(s=this.getAll()).trigger.apply(s,l_([e],o,!1))},r.prototype.__trgCustom=function(){var e=this.__getBehaviour(),t=this.getConfig().custom;!e.container&&!t.open||this.em.trigger(this.events.custom,this.__customData())},r.prototype.__customData=function(){var e=this,t=this.__getBehaviour();return{am:this,open:this.isOpen(),assets:this.getAll().models,types:t.types||[],container:t.container,close:function(){return e.close()},remove:function(s,o){return e.remove(s,o)},select:function(s,o){var i=e.add(s);(0,Ce.isFunction)(t.select)&&t.select(i,o)},options:t.options||{}}},r.prototype.__behaviour=function(e){return e===void 0&&(e={}),this._bhv=jh(jh({},this._bhv||{}),e)},r.prototype.__getBehaviour=function(e){return this._bhv||{}},r.prototype.destroy=function(){var e,t;this.all.stopListening(),this.all.reset(),this.assetsVis.stopListening(),this.assetsVis.reset(),(e=this.fu)===null||e===void 0||e.remove(),(t=this.am)===null||t===void 0||t.remove(),this._bhv={}},r})(qd);const xG=yG;var vG=function(){return{default:"",devices:[{id:"desktop",name:"Desktop",width:""},{id:"tablet",name:"Tablet",width:"770px",widthMedia:"992px"},{id:"mobileLandscape",name:"Mobile landscape",width:"568px",widthMedia:"768px"},{id:"mobilePortrait",name:"Mobile portrait",width:"320px",widthMedia:"480px"}]}};const bG=vG;var wG=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),jG=(function(a){wG(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.defaults=function(){return{name:"",width:null,height:"",widthMedia:null,priority:null}},r.prototype.initialize=function(){var e=this;this.get("widthMedia")===null&&this.set("widthMedia",this.get("width")),this.get("width")===null&&this.set("width",this.get("widthMedia")),!this.get("priority")&&this.set("priority",parseFloat(this.get("widthMedia"))||0);var t=["width","height","widthMedia"];t.forEach(function(s){return e.checkUnit(s)})},r.prototype.checkUnit=function(e){var t=this.get(e)||"",s=(parseFloat(t)||0).toString()===t.toString();s&&this.set(e,"".concat(t,"px"))},r.prototype.getName=function(){return this.get("name")||this.get("id")},r.prototype.getWidthMedia=function(){return this.get("widthMedia")||""},r})(Sr.Kx);const TO=jG;var CG=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),OO=(function(a){CG(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r})(Sr.pM);const c_=OO;OO.prototype.model=TO;var SG=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),NG=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a},kG=(function(a){SG(r,a);function r(e){var t=a.call(this,e)||this;return t.config=e.config||{},t.em=t.config.em,t.ppfx=t.config.pStylePrefix||"",t.listenTo(t.em,"change:device",t.updateSelect),t}return r.prototype.template=function(e){var t=e.ppfx,s=e.label;return Ni(d_||(d_=NG([`
      <div class="`,'device-label">',`</div>
      <div class="`,"field ",`select">
        <span id="`,`input-holder">
          <select class="`,`devices"></select>
        </span>
        <div class="`,`sel-arrow">
          <div class="`,`d-s-arrow"></div>
        </div>
      </div>
      <button style="display:none" class="`,`add-trasp" data-add-trasp>+</button>
    `],[`
      <div class="`,'device-label">',`</div>
      <div class="`,"field ",`select">
        <span id="`,`input-holder">
          <select class="`,`devices"></select>
        </span>
        <div class="`,`sel-arrow">
          <div class="`,`d-s-arrow"></div>
        </div>
      </div>
      <button style="display:none" class="`,`add-trasp" data-add-trasp>+</button>
    `])),t,s,t,t,t,t,t,t,t)},r.prototype.events=function(){return{change:"updateDevice","click [data-add-trasp]":"startAdd"}},r.prototype.startAdd=function(){},r.prototype.updateDevice=function(){var e=this.em;if(e){var t=this.devicesEl;e.set("device",t?t.val():"")}},r.prototype.updateSelect=function(){var e=this,t=e.em,s=e.devicesEl;if(t&&t.getDeviceModel&&s){var o=t.getDeviceModel();s.val(o?o.get("id"):"")}},r.prototype.getOptions=function(){var e=this,t=e.collection,s=e.em,o="";return t.forEach(function(i){var l=i.attributes,c=l.name,d=l.id,h=s&&s.t&&s.t("deviceManager.devices.".concat(d))||c;o+='<option value="'.concat(d||c,'">').concat(h,"</option>")}),o},r.prototype.render=function(){var e=this,t=e.em,s=e.ppfx,o=e.$el,i=e.el,l=t&&t.t&&t.t("deviceManager.device");return o.html(this.template({ppfx:s,label:l})),this.devicesEl=o.find(".".concat(s,"devices")),this.devicesEl.append(this.getOptions()),this.devicesEl.val(t.get("device")),i.className="".concat(s,"devices-c"),this},r})(Sr.Ss);const _G=kG;var d_,EG=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),ny=function(){return ny=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},ny.apply(this,arguments)},TG=(function(a){EG(r,a);function r(e){var t,s=a.call(this,e,"DeviceManager",new c_,w3,bG())||this;return s.Device=TO,s.Devices=c_,s.storageKey="",s.devices=s.all,(t=s.config.devices)===null||t===void 0||t.forEach(function(o){return s.add(o,{silent:!0})}),s.select(s.config.default||s.devices.at(0)),e.on("change:device",s._onSelect,s),s}return r.prototype._onSelect=function(e,t,s){var o=this,i=o.em,l=o.events,c=e.previous("device"),d=this.get(t),h=l.select;i.trigger(h,d,this.get(c)),this.__catchAllEvent(h,d,s)},r.prototype.add=function(e,t){t===void 0&&(t={});var s,o=t;if((0,Ce.isString)(e)){var i=t;o=arguments[2]||{},s=ny(ny({},o),{id:e,name:o.name||e,width:i})}else s=e;return s.id||(s.id=s.name||this._createId()),this.devices.add(s,o)},r.prototype.get=function(e){var t=this.getAll().filter(function(s){return s.get("name")===e})[0];return t||this.devices.get(e)||null},r.prototype.remove=function(e,t){return t===void 0&&(t={}),this.__remove(e,t)},r.prototype.getDevices=function(){return this.devices.models},r.prototype.select=function(e,t){t===void 0&&(t={});var s=(0,Ce.isString)(e)?this.get(e):e;return s&&this.em.set("device",s.get("id"),t),this},r.prototype.getSelected=function(){return this.get(this.em.get("device"))},r.prototype.getAll=function(){return this.devices},r.prototype.render=function(){var e,t=this.em;return(e=this.view)===null||e===void 0||e.remove(),this.view=new _G({collection:this.devices,config:ny({em:t},this.config)}),this.view.render().el},r.prototype.destroy=function(){this.__destroy()},r})(qd);const OG=TG;var PG=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),AG=(function(a){PG(r,a);function r(e,t){t===void 0&&(t={});var s=a.call(this,e,t)||this,o=t.em,i={};s.em=o,e.frames||(i.component=e.component,i.styles=e.styles,["component","styles"].map(function(d){return s.unset(d)}));var l=e.frames||[i],c=new C3(o.Canvas,l);return c.page=s,s.set("frames",c),!s.getId()&&s.set("id",o?.Pages._createId()),o?.UndoManager.add(c),s}return r.prototype.defaults=function(){return{name:"",frames:[],_undo:!0}},r.prototype.onRemove=function(){this.getFrames().reset()},r.prototype.getFrames=function(){return this.get("frames")},r.prototype.getId=function(){return this.id},r.prototype.getName=function(){return this.get("name")},r.prototype.setName=function(e){return this.set({name:e})},r.prototype.getAllFrames=function(){return this.getFrames().models||[]},r.prototype.getMainFrame=function(){return this.getFrames().at(0)},r.prototype.getMainComponent=function(){var e=this.getMainFrame();return e?.getComponent()},r.prototype.toJSON=function(e){e===void 0&&(e={});var t=Sr.Kx.prototype.toJSON.call(this,e),s=(0,Ce.result)(this,"defaults");return(0,Ce.forEach)(t,function(o,i){i.indexOf("_")===0&&delete t[i]}),(0,Ce.forEach)(s,function(o,i){t[i]===o&&delete t[i]}),t},r})(Sr.Kx);const wC=AG;var MG=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Wv=function(){return Wv=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Wv.apply(this,arguments)},IG=(function(a){MG(r,a);function r(e,t){var s=a.call(this,e)||this;return s.on("reset",s.onReset),s.on("remove",s.onRemove),s.model=function(o,i){return i===void 0&&(i={}),new wC(o,Wv(Wv({},i),{em:t}))},s}return r.prototype.onReset=function(e,t){var s=this,o;(o=t?.previousModels)===null||o===void 0||o.map(function(i){return s.onRemove(i,s,t)})},r.prototype.onRemove=function(e,t,s){s===void 0&&(s={}),!(s.fromUndo||s.temporary)&&e?.onRemove()},r})(Sr.pM);const RG=IG;var LG=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Ch=function(){return Ch=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Ch.apply(this,arguments)},DG=function(a,r){var e={};for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&r.indexOf(t)<0&&(e[t]=a[t]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(a);s<t.length;s++)r.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(a,t[s])&&(e[t[s]]=a[t[s]]);return e},FG=function(a,r,e){if(e||arguments.length===2)for(var t=0,s=r.length,o;t<s;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return a.concat(o||Array.prototype.slice.call(r))},u_="change:selected",f_="main",BG=(function(a){LG(r,a);function r(e){var t=a.call(this,e,"PageManager",new RG([],e),X1)||this;t.events=X1,t.storageKey="pages",(0,Ce.bindAll)(t,"_onPageChange");var s=new zu.A(t,{_undo:!0});return t.model=s,t.pages.on("reset",t.__onReset,t),t.pages.on("all",t.__onChange,t),s.on(u_,t._onPageChange),t}return Object.defineProperty(r.prototype,"pages",{get:function(){return this.all},enumerable:!1,configurable:!0}),r.prototype.getAll=function(){return FG([],this.all.models,!0)},r.prototype.__onChange=function(e,t,s,o){var i=this,l=i.em,c=i.events,d=o||s;l.trigger(c.all,{event:e,page:t,options:d})},r.prototype.__onReset=function(){var e=this.pages.at(0);e&&this.select(e)},r.prototype.onLoad=function(){var e,t=this,s=t.pages,o=t.config,i=t.em,l={silent:!0},c=((e=o.pages)===null||e===void 0?void 0:e.map(function(h){return new wC(h,{em:i,config:o})}))||[];s.add(c,l);var d=s.length?this._initPage():this.add({type:f_},l);d&&this.select(d,l)},r.prototype._onPageChange=function(e,t,s){var o=this,i=o.em,l=o.events,c=i.Layers,d=t.getMainComponent();c&&d&&c.setRoot(d),i.trigger(l.select,t,e.previous("selected")),this.__onChange(u_,t,s)},r.prototype.postLoad=function(){var e=this,t=e.em,s=e.model,o=e.pages,i=t.UndoManager;i.add(s),i.add(o),o.on("add remove reset change",function(l,c,d){var h=d||c;t.changesUp(d||c,{page:l,options:h})})},r.prototype.add=function(e,t){var s=this;t===void 0&&(t={});var o=this,i=o.em,l=o.events;e.id=e.id||this._createId();var c=function(){var d=s.pages.add(new wC(e,{em:s.em,config:s.config}),t);return t.select&&s.select(d),d};return!t.silent&&i.trigger(l.addBefore,e,c,t),t.abort?void 0:c()},r.prototype.remove=function(e,t){var s=this;t===void 0&&(t={});var o=this,i=o.em,l=o.events,c=(0,Ce.isString)(e)?this.get(e):e,d=function(){return c&&s.pages.remove(c,t),c};return!t.silent&&i.trigger(l.removeBefore,c,d,t),!t.abort&&d()},r.prototype.move=function(e,t){t===void 0&&(t={});var s=this.pages,o=(0,Ce.isString)(e)?this.get(e):e,i=t.at,l=i===void 0?0:i,c=DG(t,["at"]);if(o){var d=s.indexOf(o),h=d===l;if(!(l<0||l>=s.length||h))return this.remove(o,Ch(Ch({},c),{temporary:!0})),s.add(o,Ch(Ch({},c),{at:l})),o}},r.prototype.get=function(e){return this.pages.filter(function(t){return t.get(t.idAttribute)===e})[0]},r.prototype.getMain=function(){var e=this.pages;return e.filter(function(t){return t.get("type")===f_})[0]||e.at(0)},r.prototype.getAllWrappers=function(){var e=this.getAll();return(0,Ce.unique)((0,Ce.flatten)(e.map(function(t){return t.getAllFrames().map(function(s){return s.getComponent()})})))},r.prototype.select=function(e,t){t===void 0&&(t={});var s=this,o=s.em,i=s.model,l=s.events,c=(0,Ce.isString)(e)?this.get(e):e;return c&&(o.trigger(l.selectBefore,c,t),i.set("selected",c,t)),this},r.prototype.getSelected=function(){return this.model.get("selected")},r.prototype.destroy=function(){var e=this;this.pages.off().reset(),this.model.stopListening(),this.model.clear({silent:!0}),["selected","model"].map(function(t){return e[t]=0})},r.prototype.store=function(){return this.getProjectData()},r.prototype.load=function(e){var t=this,s=this.loadProjectData(e,{all:this.pages,reset:!0,onResult:function(o,i){o.forEach(function(l){return t.add(l,i)}),t.__onReset()}});return this.pages.forEach(function(o){return o.getFrames().initRefs()}),s},r.prototype._initPage=function(){return this.get(this.config.selected)||this.getMain()},r.prototype._createId=function(){var e=this.getAll(),t=e.length+16,s=this.getAllMap(),o;do o=(0,Zt.createId)(t);while(s[o]);return o},r})(qd);const zG=BG;var Gj={placeholder:"eg. Text here"};const UG={assetManager:{addButton:"Add image",inputPlh:"http://path/to/the/image.jpg",modalTitle:"Select Image",uploadTitle:"Drop files here or click to upload"},blockManager:{labels:{},categories:{}},domComponents:{names:{"":"Box",wrapper:"Body",text:"Text",comment:"Comment",image:"Image",video:"Video",label:"Label",link:"Link",map:"Map",tfoot:"Table foot",tbody:"Table body",thead:"Table head",table:"Table",row:"Table row",cell:"Table cell"}},deviceManager:{device:"Device",devices:{desktop:"Desktop",tablet:"Tablet",mobileLandscape:"Mobile Landscape",mobilePortrait:"Mobile Portrait"}},panels:{buttons:{titles:{preview:"Preview",fullscreen:"Fullscreen","sw-visibility":"View components","export-template":"View code","open-sm":"Open Style Manager","open-tm":"Settings","open-layers":"Open Layer Manager","open-blocks":"Open Blocks"}}},selectorManager:{label:"Classes",selected:"Selected",emptyState:"- State -",states:{hover:"Hover",active:"Click","nth-of-type(2n)":"Even/Odd"}},styleManager:{empty:"Select an element before using Style Manager",layer:"Layer",fileButton:"Images",sectors:{general:"General",layout:"Layout",typography:"Typography",decorations:"Decorations",extra:"Extra",flex:"Flex",dimension:"Dimension"},properties:{"text-shadow-h":"X","text-shadow-v":"Y","text-shadow-blur":"Blur","text-shadow-color":"Color","box-shadow-h":"X","box-shadow-v":"Y","box-shadow-blur":"Blur","box-shadow-spread":"Spread","box-shadow-color":"Color","box-shadow-type":"Type","margin-top-sub":"Top","margin-right-sub":"Right","margin-bottom-sub":"Bottom","margin-left-sub":"Left","padding-top-sub":"Top","padding-right-sub":"Right","padding-bottom-sub":"Bottom","padding-left-sub":"Left","border-width-sub":"Width","border-style-sub":"Style","border-color-sub":"Color","border-top-left-radius-sub":"Top Left","border-top-right-radius-sub":"Top Right","border-bottom-right-radius-sub":"Bottom Right","border-bottom-left-radius-sub":"Bottom Left","transform-rotate-x":"Rotate X","transform-rotate-y":"Rotate Y","transform-rotate-z":"Rotate Z","transform-scale-x":"Scale X","transform-scale-y":"Scale Y","transform-scale-z":"Scale Z","transition-property-sub":"Property","transition-duration-sub":"Duration","transition-timing-function-sub":"Timing","background-image-sub":"Image","background-repeat-sub":"Repeat","background-position-sub":"Position","background-attachment-sub":"Attachment","background-size-sub":"Size"}},traitManager:{empty:"Select an element before using Trait Manager",label:"Component settings",categories:{},traits:{labels:{},attributes:{id:Gj,alt:Gj,title:Gj,href:{placeholder:"eg. https://google.com"}},options:{target:{false:"This window",_blank:"New window"}}}},storageManager:{recover:"Do you want to recover unsaved changes?"}};var $G=function(){return{locale:"en",localeFallback:"en",detectLocale:!0,debug:!1,messages:{en:UG},messagesAdd:void 0}};const VG=$G;var jC;(function(a){a.add="i18n:add",a.update="i18n:update",a.locale="i18n:locale"})(jC||(jC={}));const WG=jC;var HG=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),qG=(function(a){HG(r,a);function r(e){var t=a.call(this,e,"I18n",VG())||this;t.events=WG;var s=t.config.messagesAdd;return s&&t.addMessages(s),t.config.detectLocale&&(t.config.locale=t._localLang()),t}return r.prototype.setLocale=function(e){var t=this,s=t.em,o=t.config,i=t.events;return s.trigger(i.locale,{value:e,valuePrev:o.locale}),o.locale=e,this},r.prototype.getLocale=function(){return this.config.locale},r.prototype.getMessages=function(e,t){t===void 0&&(t={});var s=this.config.messages;return e&&!s[e]&&this._debug("'".concat(e,"' i18n lang not found"),t),e?s[e]:s},r.prototype.setMessages=function(e){var t=this,s=t.em,o=t.config,i=t.events;return o.messages=e,s.trigger(i.update,e),this},r.prototype.addMessages=function(e){var t=this,s=t.em,o=t.events,i=t.config,l=i.messages;return s.trigger(o.add,e),this.setMessages((0,Zt.deepMerge)(l,e)),this},r.prototype.t=function(e,t){t===void 0&&(t={});var s=this.config,o=t.params||{},i=t.l||this.getLocale(),l=t.lFlb||s.localeFallback,c=this._getMsg(e,i,t);return c||(c=this._getMsg(e,l,t)),!c&&this._debug("'".concat(e,"' i18n key not found in '").concat(i,"' lang"),t),c=c&&(0,Ce.isString)(c)?this._addParams(c,o):c,c},r.prototype._localLang=function(){var e=(0,Zt.hasWin)()&&window.navigator||{},t=e.language||e.userLanguage;return t?t.split("-")[0]:"en"},r.prototype._addParams=function(e,t){var s=new RegExp("{([\\w\\d-]*)}","g");return e.replace(s,function(o,i){return t[i]||""}).trim()},r.prototype._getMsg=function(e,t,s){s===void 0&&(s={});var o=this.getMessages(t,s);if(o){var i=o[e];return!i&&e.indexOf(".")>0&&(i=e.split(".").reduce(function(l,c){if(!(0,Ce.isUndefined)(l))return l[c]},o)),i}},r.prototype._debug=function(e,t){t===void 0&&(t={});var s=this,o=s.em,i=s.config;(t.debug||i.debug)&&o&&o.logWarning(e)},r.prototype.destroy=function(){},r})(Ai);const GG=qG;var Wf=function(){return Wf=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Wf.apply(this,arguments)},KG=function(a,r){r===void 0&&(r={});var e=r.prefix||"",t=document.createElement("i");return t.className=e+"resizer-h "+e+"resizer-h-"+a,t.setAttribute("data-"+e+"handler",a),t},YG=function(a,r){var e=window,t=a.getBoundingClientRect();return{left:t.left+e.pageXOffset,top:t.top+e.pageYOffset,width:t.width,height:t.height}},ZG=(function(){function a(r){r===void 0&&(r={}),this.moved=!1,this.defOpts={ratioDefault:!1,onUpdateContainer:function(){},step:1,minDim:10,maxDim:1/0,unitHeight:"px",unitWidth:"px",keyHeight:"height",keyWidth:"width",currentUnit:!0,silentFrames:!1,avoidContainerUpdate:!1,keepAutoHeight:!1,keepAutoWidth:!1,autoHeight:!1,autoWidth:!1,tl:!0,tc:!0,tr:!0,cl:!0,cr:!0,bl:!0,bc:!0,br:!0},this.opts=Wf({},this.defOpts),this.setOptions(r),(0,Ce.bindAll)(this,"handleKeyDown","handleMouseDown","move","stop")}return a.prototype.getConfig=function(){return this.opts},a.prototype.setOptions=function(r,e){r===void 0&&(r={}),this.opts=Wf(Wf({},e?this.defOpts:this.opts),r),this.setup()},a.prototype.setup=function(){var r=this.opts,e=r.prefix||"",t=r.appendTo||document.body,s=this.container;for(s||(s=document.createElement("div"),s.className="".concat(e,"resizer-c"),t.appendChild(s),this.container=s);s.firstChild;)s.removeChild(s.firstChild);var o={};["tl","tc","tr","cl","cr","bl","bc","br"].forEach(function(c){return o[c]=r[c]?KG(c,r):null});for(var i in o){var l=o[i];l&&s.appendChild(l)}this.handlers=o,this.mousePosFetcher=r.mousePosFetcher,this.updateTarget=r.updateTarget,this.posFetcher=r.posFetcher,this.onStart=r.onStart,this.onMove=r.onMove,this.onEnd=r.onEnd,this.onUpdateContainer=r.onUpdateContainer},a.prototype.toggleFrames=function(r){if(this.opts.silentFrames){var e=document.querySelectorAll("iframe");(0,Ce.each)(e,function(t){return t.style.pointerEvents=r?"none":""})}},a.prototype.isHandler=function(r){var e=this.handlers;for(var t in e)if(e[t]===r)return!0;return!1},a.prototype.getFocusedEl=function(){return this.el},a.prototype.getParentEl=function(){var r;return(r=this.el)===null||r===void 0?void 0:r.parentElement},a.prototype.getDocumentEl=function(){return this.opts.docs||[this.el.ownerDocument,document]},a.prototype.getElementPos=function(r,e){e===void 0&&(e={});var t=this.posFetcher;return t?t(r,e):YG(r)},a.prototype.focus=function(r){r&&r===this.el||(this.el=r,this.updateContainer({forceShow:!0}),(0,Ir.on)(this.getDocumentEl(),"pointerdown",this.handleMouseDown))},a.prototype.blur=function(){this.container.style.display="none",this.el&&((0,Ir.AU)(this.getDocumentEl(),"pointerdown",this.handleMouseDown),delete this.el)},a.prototype.start=function(r){var e,t=this,s=t.el,o=t.opts,i=o===void 0?{}:o;if(this.moved=!1,!(r.button!==0||!s)){r.preventDefault(),r.stopPropagation(),(e=this.selectedHandler)===null||e===void 0||e.setPointerCapture(r.pointerId);var l=this.getParentEl(),c=this,d=i,h=this.mousePosFetcher,m="data-"+d.prefix+"handler",y=this.getElementPos(s,{avoidFrameZoom:!0,avoidFrameOffset:!0}),x=this.getElementPos(l),b=r.target;this.handlerAttr=b.getAttribute(m),this.clickedHandler=b,this.startDim={t:y.top,l:y.left,w:y.width,h:y.height},this.rectDim={t:y.top,l:y.left,w:y.width,h:y.height},this.startPos=h?h(r):{x:r.clientX,y:r.clientY},this.parentDim={t:x.top,l:x.left,w:x.width,h:x.height};var v=this.getDocumentEl();this.docs=v,(0,Ir.on)(v,"pointermove",this.move),(0,Ir.on)(v,"keydown",this.handleKeyDown),(0,Ir.on)(v,"pointerup",this.stop),(0,Ce.isFunction)(this.onStart)&&this.onStart(r,{docs:v,config:d,el:s,resizer:c}),this.toggleFrames(!0),!d.updateOnMove&&this.move(r)}},a.prototype.move=function(r){var e,t;this.moved=!0;var s=this.el,o=this.opts,i=this.docs||this.getDocumentEl(),l=((e=this.mousePosFetcher)===null||e===void 0?void 0:e.call(this,r))||{x:r.clientX,y:r.clientY};this.currentPos=l,this.delta={x:l.x-this.startPos.x,y:l.y-this.startPos.y},this.keys={shift:r.shiftKey,ctrl:r.ctrlKey,alt:r.altKey},this.rectDim=this.calc(this),this.updateRect(!1,r),(t=this.onMove)===null||t===void 0||t.call(this,r,{docs:i,config:o,el:s,resizer:this})},a.prototype.stop=function(r){var e,t,s=this.el,o=this.opts,i=this.docs||this.getDocumentEl();(0,Ir.AU)(i,"pointermove",this.move),(0,Ir.AU)(i,"keydown",this.handleKeyDown),(0,Ir.AU)(i,"pointerup",this.stop),(this.moved||!o.updateOnMove)&&this.updateRect(!0,r),r.pointerId&&((e=this.selectedHandler)===null||e===void 0||e.releasePointerCapture(r.pointerId)),this.toggleFrames(),(t=this.onEnd)===null||t===void 0||t.call(this,r,{docs:i,config:o,el:s,resizer:this}),this.moved=!1,delete this.docs},a.prototype.updateRect=function(r,e){var t=this.el,s=this,o=this.opts,i=this.rectDim,l=this.updateTarget,c=this.getSelectedHandler(),d=o.unitHeight,h=o.unitWidth,m=o.keyWidth,y=o.keyHeight;if((0,Ce.isFunction)(l))l(t,i,{store:r,selectedHandler:c,resizer:s,config:o,event:e});else{var x=t.style;x[m]=i.w+h,x[y]=i.h+d}this.updateContainer()},a.prototype.updateContainer=function(r){var e;r===void 0&&(r={});var t=this,s=t.opts,o=t.container,i=t.el,l=o.style;!s.avoidContainerUpdate&&i&&r.forceShow&&(l.display="block"),(e=this.onUpdateContainer)===null||e===void 0||e.call(this,{el:o,resizer:this,opts:Wf(Wf({},s),r)})},a.prototype.getSelectedHandler=function(){var r=this.handlers;if(this.selectedHandler){for(var e in r)if(r[e]===this.selectedHandler)return e}},a.prototype.handleKeyDown=function(r){r.keyCode===27&&(this.rectDim=this.startDim,this.stop(r))},a.prototype.handleMouseDown=function(r){var e=r.target;this.isHandler(e)?(this.selectedHandler=e,this.start(r)):e!==this.el&&(delete this.selectedHandler,this.blur())},a.prototype.calc=function(r){var e,t=this.opts||{},s=t.step,o=this.startDim,i=t.minDim,l=t.maxDim,c=r.delta.x,d=r.delta.y,h=this.parentDim.w,m=this.parentDim.h,y=t.unitWidth,x=t.unitHeight,b=t.skipUnitAdjustments,v=this.getParentRect(),j=y==="%"&&!b,S=x==="%"&&!b,k=j?o.w/100*h:o.w,N=S?o.h/100*m:o.h,P={t:o.t-v.top,l:o.l-v.left,w:k,h:N};if(r){var R=r.handlerAttr;~R.indexOf("r")&&(e=j?(0,Zt.normalizeFloat)((k+c*s)/h*100,.01):(0,Zt.normalizeFloat)(k+c*s,s),e=Math.max(i,e),l&&(e=Math.min(l,e)),P.w=e),~R.indexOf("b")&&(e=S?(0,Zt.normalizeFloat)((N+d*s)/m*100,.01):(0,Zt.normalizeFloat)(N+d*s,s),e=Math.max(i,e),l&&(e=Math.min(l,e)),P.h=e),~R.indexOf("l")&&(e=j?(0,Zt.normalizeFloat)((k-c*s)/h*100,.01):(0,Zt.normalizeFloat)(k-c*s,s),e=Math.max(i,e),l&&(e=Math.min(l,e)),P.w=e),~R.indexOf("t")&&(e=S?(0,Zt.normalizeFloat)((N-d*s)/m*100,.01):(0,Zt.normalizeFloat)(N-d*s,s),e=Math.max(i,e),l&&(e=Math.min(l,e)),P.h=e);var F=t.ratioDefault?!r.keys.shift:r.keys.shift;if(R.indexOf("c")<0&&F){var z=o.w/o.h;P.w/P.h>z?P.h=Math.round(P.w/z):P.w=Math.round(P.h*z)}~R.indexOf("l")&&(P.l+=o.w-P.w),~R.indexOf("t")&&(P.t+=o.h-P.h);for(var H in P){var V=H;P[V]=parseInt("".concat(P[V]),10)}return P}},a.prototype.getParentRect=function(){var r={left:0,top:0,width:0,height:0},e=this.el;if(!e)return r;var t=e.offsetParent;return t&&t.tagName!=="BODY"&&(r=this.getElementPos(t)),r},a})();const XG=ZG;var qi=function(){return qi=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},qi.apply(this,arguments)};function QG(a,r,e){for(var t={index:0,placement:"before"},s=0,o=0,i=0,l=0,c=0,d=0,h=0,m,y=0,x=a.length;y<x;y++){m=a[y];var b=m.top,v=m.left,j=m.height,S=m.width;if(i=v+S,h=b+j,c=v+S/2,d=b+j/2,!(o&&v>o||l&&d>=l||s&&i<s))if(t.index=y,!m.dir)e<h&&(l=h),r<c?(o=c,t.placement="before"):(s=c,t.placement="after");else if(e<d){t.placement="before";break}else t.placement="after"}return t}function p_(a){var r=a.getBoundingClientRect();return{top:r.top+document.body.scrollTop,left:r.left+document.body.scrollLeft}}function US(a,r){return Zt.matches.call(a,r)}function JG(a,r){var e=CC(a),t=CC(r),s=t.filter(function(c){return e.includes(c)}),o=s[0];if(!o)return a.model.index()-r.model.index();var i=t[t.indexOf(o)-1],l=e[e.indexOf(o)-1];return l.index()-i.index()}function CC(a){return a?[a].concat(CC(a.parent())):[]}function eK(a,r){if(a)for(var e=a.parentNode;e&&e.nodeType===1;){if(US(e,r))return e;e=e.parentNode}}function tK(a,r){if((0,Ir.ir)(a))return!1;var e=a.style||{},t=(0,po.default)(a),s=(0,po.default)(r);if(e.overflow&&e.overflow!=="visible")return!1;var o=t.css("float");return o&&o!=="none"||s.css("display")==="flex"&&s.css("flex-direction")!=="column"||!rK(e.position)?!1:nK(a)||aK(t)}function rK(a){switch(a){case"static":case"relative":case"":return!0;default:return!1}}function nK(a){var r=["TR","TBODY","THEAD","TFOOT"];return r.includes(a.tagName)}function aK(a){var r=a.css("display"),e=["block","list-item","table","flex","grid"];return e.includes(r)}function sK(a){var r={containerContext:{container:"",placeholderElement:"",containerSel:"*",itemSel:"*",pfx:"",document},positionOptions:{borderOffset:10,relative:!1,windowMargin:0,offsetTop:0,offsetLeft:0,scale:1,canvasRelative:!1},dragBehavior:{dragDirection:ip.A.Vertical,nested:!1,selectOnEnd:!0},eventHandlers:{}},e=qi(qi(qi({},r),a),{containerContext:qi(qi({},r.containerContext),a.containerContext),positionOptions:qi(qi({},r.positionOptions),a.positionOptions),dragBehavior:qi(qi({},r.dragBehavior),a.dragBehavior),eventHandlers:qi(qi({},r.eventHandlers),a.eventHandlers)});return e}var PO=(function(){function a(r){this.timeout=null,this.threshold=r}return a.prototype.updateArgs=function(r){this.lastArgs=r},a.prototype.execute=function(r){var e=this;this.timeout||(this.timeout=setTimeout(function(){e.lastArgs&&r(e.lastArgs),e.timeout=null},this.threshold))},a.prototype.clearTimeout=function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),delete this.lastArgs},a})(),SC=function(){return SC=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},SC.apply(this,arguments)},oK=(function(){function a(r){this.top=r.top,this.left=r.left,this.height=r.height,this.width=r.width,this.offsets=r.offsets,this.dir=r.dir}return a.prototype.calculateDimensionDifference=function(r){var e=r.top-this.top,t=r.left-this.left;return{topDifference:e,leftDifference:t}},a.prototype.adjustDimensions=function(r){return this.top+=r.topDifference,this.left+=r.leftDifference,this},a.prototype.determinePlacement=function(r,e){var t=this.left+this.width/2,s=this.top+this.height/2;return this.dir?e<s?"before":"after":r<t?"before":"after"},a.prototype.equals=function(r){return r?this.top===r.top&&this.left===r.left&&this.height===r.height&&this.width===r.width&&this.dir===r.dir&&JSON.stringify(this.offsets)===JSON.stringify(r.offsets):!1},a.prototype.clone=function(){return new a({top:this.top,left:this.left,height:this.height,width:this.width,offsets:SC({},this.offsets),dir:this.dir})},a.prototype.getDropArea=function(r){var e=this.clone(),t=this.adjustDropDimension(this.width,this.left,r),s=t.newSize,o=t.newPosition;e.width=s,e.left=o;var i=this.adjustDropDimension(this.height,this.top,r),l=i.newSize,c=i.newPosition;return e.height=l,e.top=c,e},a.prototype.adjustDropDimension=function(r,e,t){var s=t.ratio,o=t.minUndroppableDimension,i=t.maxUndroppableDimension,l=r*(1-s)/2;l=Math.max(l,o),l=Math.min(l,i);var c=r-l*2,d=e+l;return{newSize:c,newPosition:d}},a.prototype.isWithinBounds=function(r,e){return r>=this.left&&r<=this.left+this.width&&e>=this.top&&e<=this.top+this.height},a})();const iK=oK;var lK=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),cK=(function(a){lK(r,a);function r(e){var t=a.call(this)||this;return t.sourceNodes=[],t.containerOffset={top:0,left:0},t.moveThreshold=20,t.treeClass=e.treeClass,t.em=e.em,t.containerContext=e.containerContext,t.positionOptions=e.positionOptions,t.dragDirection=e.dragDirection,t.eventHandlers=e.eventHandlers,(0,Ce.bindAll)(t,"endDrag","cancelDrag","recalculateTargetOnScroll","startSort","onDragStart","onMove"),t.restLastMoveData(),t.rateLimiter=new PO(t.moveThreshold),t}return r.prototype.startSort=function(e){this.sourceNodes=e,this.bindDragEventHandlers()},r.prototype.bindDragEventHandlers=function(){(0,Ir.on)(this.containerContext.container,"dragstart",this.onDragStart),(0,Ir.on)(this.containerContext.container,"mousemove dragover",this.onMove),(0,Ir.on)(this.containerContext.document,"mouseup dragend touchend",this.endDrag)},r.prototype.recalculateTargetOnScroll=function(){var e=this.lastMoveData.mouseEvent;e&&this.onMove(e)},r.prototype.onMove=function(e){this.rateLimiter.updateArgs(e),this.rateLimiter.execute(this.handleMove.bind(this))},r.prototype.handleMove=function(e){var t,s,o,i,l,c,d;this.adjustForScroll();var h=this.lastMoveData.targetNode;(s=(t=this.eventHandlers).onMouseMove)===null||s===void 0||s.call(t,e),this.cacheContainerPosition();var m=this.getMousePositionRelativeToContainer(e.clientX,e.clientY),y=m.mouseXRelative,x=m.mouseYRelative,b=this.getMouseTargetElement(e),v=this.getFirstElementWithAModel(b),j=v?(o=(0,po.default)(v))===null||o===void 0?void 0:o.data("model"):void 0,S=j?this.getOrCreateHoveredNode(j):void 0,k=S?this.getIndexInParent(S,S.nodeDimensions,y,x):0,N=S?this.getValidParent(S,0,y,x):void 0,P=!N?.equals(h);if(P&&((l=(i=this.eventHandlers).onTargetChange)===null||l===void 0||l.call(i,h,N)),!N||!S){this.triggerLegacyOnMoveCallback(e,0),this.triggerMoveEvent(y,x),this.restLastMoveData();return}var R=this.getDropPosition(N,y,x),F=R.index,z=R.placement,H=R.placeholderDimensions,V=!H.equals(this.lastMoveData.placeholderDimensions)||z!==this.lastMoveData.placement;V&&((d=(c=this.eventHandlers).onPlaceholderPositionChange)===null||d===void 0||d.call(c,H,z)),this.lastMoveData={targetNode:N,hoveredNode:S,mouseEvent:e,index:F,hoveredIndex:k,placement:z,placeholderDimensions:H},this.triggerMoveEvent(y,x),this.triggerLegacyOnMoveCallback(e,F)},r.prototype.adjustForScroll=function(){var e,t,s=this.lastMoveData.targetNode;if(s?.element){var o=this.getDim(s?.element),i=(e=s.nodeDimensions)===null||e===void 0?void 0:e.calculateDimensionDifference(o);i&&s.adjustDimensions(i)}var l=this.lastMoveData.hoveredNode;if(l?.element){var o=this.getDim(l?.element),i=(t=l.nodeDimensions)===null||t===void 0?void 0:t.calculateDimensionDifference(o);i&&l.adjustDimensions(i)}},r.prototype.restLastMoveData=function(){this.lastMoveData={targetNode:void 0,index:void 0,placement:void 0,mouseEvent:void 0}},r.prototype.triggerLegacyOnMoveCallback=function(e,t){var s,o,i,l,c=(s=this.sourceNodes[0])===null||s===void 0?void 0:s.model;(i=(o=this.eventHandlers).legacyOnMoveClb)===null||i===void 0||i.call(o,{event:e,target:c,parent:(l=this.lastMoveData.targetNode)===null||l===void 0?void 0:l.model,index:t})},r.prototype.triggerMoveEvent=function(e,t){var s,o=this.lastMoveData,i=o.targetNode,l=o.placement,c=o.index,d=c?c+(l==="after"?-1:0):0;this.em.trigger("sorter:drag",{target:i?.element||null,targetModel:(s=this.lastMoveData.targetNode)===null||s===void 0?void 0:s.model,sourceModel:this.sourceNodes[0].model,dims:i?.childrenDimensions||[],pos:{index:d,indexEl:d,placement:l},x:e,y:t})},r.prototype.getDropPosition=function(e,t,s){var o,i=e.nodeDimensions,l=e.childrenDimensions,c=e.getChildren(),d=c&&c.length>0;i=i||this.getDim(e.element),e.nodeDimensions=i,l=l||this.getChildrenDim(e),e.childrenDimensions=l;var h=i.clone(),m=0,y="inside";return d&&(o=QG(l,t,s),m=o.index,y=o.placement,h=l[m].clone(),m=m+(y=="after"?1:0)),{index:m,placement:y,placeholderDimensions:h}},r.prototype.getOrCreateHoveredNode=function(e){var t=this.lastMoveData.hoveredNode,s=new this.treeClass(e),o=s.equals(t),i=o?t:s;return i.nodeDimensions=o?t.nodeDimensions:this.getDim(s.element),i},r.prototype.getMouseTargetElement=function(e){var t=this.containerContext.customTarget,s=this.containerContext.document.elementFromPoint(e.clientX,e.clientY),o=t?t({event:e}):s;return o},r.prototype.onDragStart=function(e){this.eventHandlers.onDragStart&&this.eventHandlers.onDragStart(e)},r.prototype.endDrag=function(){this.dropDragged()},r.prototype.cancelDrag=function(){var e,t,s=this.lastMoveData.targetNode;(t=(e=this.eventHandlers).onTargetChange)===null||t===void 0||t.call(e,s,void 0),this.finalizeMove()},r.prototype.finalizeMove=function(){var e,t,s,o;this.cleanupEventListeners(),this.triggerOnDragEndEvent(),(t=(e=this.eventHandlers).onEnd)===null||t===void 0||t.call(e),(o=(s=this.eventHandlers).legacyOnEnd)===null||o===void 0||o.call(s),this.restLastMoveData(),this.rateLimiter.clearTimeout()},r.prototype.dropDragged=function(){var e,t,s=this.lastMoveData,o=s.targetNode,i=s.index;(t=(e=this.eventHandlers).onDrop)===null||t===void 0||t.call(e,o,this.sourceNodes,i),this.finalizeMove()},r.prototype.triggerOnDragEndEvent=function(){var e=this.lastMoveData.targetNode,t=this.sourceNodes[0];this.em.trigger("sorter:drag:end",{targetCollection:e?e.getChildren():null,modelToDrop:t?.model,warns:[""],validResult:{result:!0,src:this.sourceNodes.map(function(s){return s.element}),srcModel:t?.model,trg:e?.element,trgModel:e?.model,draggable:!0,droppable:!0},dst:e?.element,srcEl:t?.element})},r.prototype.getFirstElementWithAModel=function(e){for(var t=function(s){return(0,po.default)(s).data("model")!==void 0};e&&this.containerContext.container.contains(e);){if(t(e))return e;e=e.parentElement}return null},r.prototype.getValidParent=function(e,t,s,o){var i,l;if(e){var c=this.lastMoveData,d=c.targetNode,h=c.hoveredNode,m=c.hoveredIndex,y=c.mouseEvent,x=e.equals(h);e.nodeDimensions=x?h.nodeDimensions:this.getDim(e.element);var b=this.getIndexInParent(e,e.nodeDimensions,s,o),v=b===m,j=e.isWithinDropBounds(s,o),S=x&&v&&j===e.isWithinDropBounds((i=y?.clientX)!==null&&i!==void 0?i:0,(l=y?.clientY)!==null&&l!==void 0?l:0);if(S&&d)return d;if(!j)return this.handleParentTraversal(e,s,o);var k=this.sourceNodes.some(function(N){return e.canMove(N,t)});return this.triggerDragValidation(k,e),k?e:this.handleParentTraversal(e,s,o)}},r.prototype.handleParentTraversal=function(e,t,s){var o=e.getParent();if(o){var i=this.getIndexInParent(e,e.nodeDimensions,t,s);if(i!==void 0)return this.getValidParent(o,i,t,s)}},r.prototype.getIndexInParent=function(e,t,s,o){var i=e.getParent();if(i){var l=i?.indexOfChild(e);return t.dir=this.getDirection(e.element,i.element),l=l+(t.determinePlacement(s,o)=="after"?1:0),l}},r.prototype.triggerDragValidation=function(e,t){var s=this.sourceNodes[0];return this.em.trigger("sorter:drag:validation",{valid:e,src:s?.element,srcModel:s?.model,trg:t.element,trgModel:t.model}),s},r.prototype.cleanupEventListeners=function(){var e=this.containerContext.container;(0,Ir.AU)(e,"dragstart",this.onDragStart),(0,Ir.AU)(e,"mousemove dragover",this.onMove),(0,Ir.AU)(this.containerContext.document,"mouseup dragend touchend",this.endDrag)},r.prototype.getDirection=function(e,t){var s;return this.dragDirection===ip.A.Vertical?s=!0:this.dragDirection===ip.A.Horizontal?s=!1:s=tK(e,t),s},r.prototype.getChildrenDim=function(e){var t=this,s=[],o=e.element;if(!o)return[];var i=e.getChildren();return!i||i.length===0?[]:((0,Ce.each)(i,function(l,c){var d=l.element;if(d&&!(!(0,Ir.ir)(d)&&!US(d,t.containerContext.itemSel))){var h=t.getDim(d);h.dir=t.getDirection(d,o),s.push(h)}}),s)},r.prototype.getMousePositionRelativeToContainer=function(e,t){var s=t-this.containerOffset.top+this.containerContext.container.scrollTop,o=e-this.containerOffset.left+this.containerContext.container.scrollLeft;if(this.positionOptions.canvasRelative){var i=this.em.Canvas.getMouseRelativeCanvas({clientX:e,clientY:t},{noScroll:1});o=i.x,s=i.y}return{mouseXRelative:o,mouseYRelative:s}},r.prototype.cacheContainerPosition=function(){var e=this.containerContext.container,t=p_(e),s=this.positionOptions.windowMargin?Math.abs(t.top):t.top,o=this.positionOptions.windowMargin?Math.abs(t.left):t.left;this.containerOffset={top:s,left:o}},r.prototype.getDim=function(e){var t=this.em,s=this.positionOptions.relative,o=this.positionOptions.windowMargin,i=t?.Canvas,l=i?i.getElementOffsets(e):{},c,d,h,m;if(this.positionOptions.canvasRelative&&this.em){var y=i.getElementPos(e,{noScroll:1});c=y.top,d=y.left,h=y.height,m=y.width}else{var x=p_(e);c=s?e.offsetTop:x.top-(o?-1:1)*this.containerOffset.top,d=s?e.offsetLeft:x.left-(o?-1:1)*this.containerOffset.left,h=e.offsetHeight,m=e.offsetWidth}return new iK({top:c,left:d,height:h,width:m,offsets:l})},r})(Sr.Ss),dK=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),uK=(function(a){dK(r,a);function r(e){var t=a.call(this)||this;return t.pfx=e.pfx||"",t.allowNesting=e.allowNesting||!1,t.container=e.container,t.setElement(e.el),t.offset={top:e.offset.top||0,left:e.offset.left||0},t.moveLimiter=new PO(100),t}return r.prototype.show=function(){this.el.style.display="block"},r.prototype.hide=function(){this.moveLimiter.clearTimeout(),this.el.style.display="none"},r.prototype.move=function(e,t){var s=this,o={elementDimension:e,placement:t};this.moveLimiter.updateArgs(o),this.moveLimiter.execute(function(i){var l=i.elementDimension,c=i.placement;s._move(l,c)})},r.prototype._move=function(e,t){var s=0,o="px",i=0,l=0,c="",d="";this.setOrientationForDimension(e);var h=e.top,m=e.left,y=e.height,x=e.width,b=e.dir,v=e.offsets;if(t==="inside"){if(this.setOrientation("horizontal"),!this.allowNesting){this.hide();return}var j=5,S=v?.paddingTop||j,k=v?.paddingLeft||j,N=v?.borderTopWidth||0,P=v?.borderLeftWidth||0,R=v?.borderRightWidth||0,F=P+R;i=h+S+N,l=m+k+P,c=Math.max(x-k*2-F,1)+"px",d="auto"}else b?(c=x+o,d="auto",i=t==="before"?h-s:h+y-s,l=m):(c="auto",d=y-s*2+o,i=h+s,l=t==="before"?m-s:m+x-s,this.setOrientation("vertical"));this.updateStyles(i,l,c,d),this.adjustOffset()},r.prototype.setOrientationForDimension=function(e){this.el.classList.remove("vertical"),this.el.classList.add("horizontal"),e&&!e.dir&&this.setOrientation("vertical")},r.prototype.setOrientation=function(e){this.el.classList.remove("horizontal"),this.el.classList.remove("vertical"),this.el.classList.add(e)},r.prototype.updateStyles=function(e,t,s,o){this.el.style.top=e+"px",this.el.style.left=t+"px",s&&(this.el.style.width=s),o&&(this.el.style.height=o)},r.prototype.adjustOffset=function(){this.$el.css("top","+="+this.offset.top+"px"),this.$el.css("left","+="+this.offset.left+"px")},r})(Sr.Ss),Sh=function(){return Sh=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Sh.apply(this,arguments)},fK=(function(){function a(r){var e=sK(r);(0,Ce.bindAll)(this,"startSort","cancelDrag","recalculateTargetOnScroll","rollback","updateOffset","handlePlaceholderMove","finalizeMove"),this.containerContext=e.containerContext,this.positionOptions=e.positionOptions,this.dragBehavior=e.dragBehavior,this.eventHandlers=Sh(Sh({},e.eventHandlers),{onPlaceholderPositionChange:this.handlePlaceholderMove,onEnd:this.finalizeMove}),this.em=r.em,this.treeClass=r.treeClass,this.updateOffset(),this.em.on(this.em.Canvas.events.refresh,this.updateOffset),this.placeholder=this.createPlaceholder(),this.dropLocationDeterminer=new cK({em:this.em,treeClass:this.treeClass,containerContext:this.containerContext,positionOptions:this.positionOptions,dragDirection:this.dragBehavior.dragDirection,eventHandlers:this.eventHandlers})}return a.prototype.startSort=function(r){var e,t,s,o,i,l,c,d=this.getSourceNodes(r),h=d.sourceNodes,m=d.sourcesWithModel;this.sourceNodes=h,this.dropLocationDeterminer.startSort(h),this.bindDragEventHandlers(),(t=(e=this.eventHandlers).onStartSort)===null||t===void 0||t.call(e,this.sourceNodes,this.containerContext.container);var y=(s=this.sourceNodes[0])===null||s===void 0?void 0:s.model;(i=(o=this.eventHandlers).legacyOnStartSort)===null||i===void 0||i.call(o,{sorter:this,target:y,parent:y&&((l=y.parent)===null||l===void 0?void 0:l.call(y)),index:y&&((c=y.index)===null||c===void 0?void 0:c.call(y))}),this.em.trigger("sorter:drag:start",r[0],m[0])},a.prototype.validTarget=function(r,e,t){if(!r)return!1;var s=(0,po.default)(r).data("model");if(!s)return!1;var o=new this.treeClass(s),i=this.getSourceNodes(e).sourceNodes,l=i.some(function(c){return o.canMove(c,t)});return l},a.prototype.getSourceNodes=function(r){var e=this,t=r.filter(function(l){return!!l.dragSource||e.findValidSourceElement(l.element)}),s=t.map(function(l){var c,d;return{model:((c=l.dragSource)===null||c===void 0?void 0:c.model)||((d=(0,po.default)(l.element))===null||d===void 0?void 0:d.data("model")),content:l.dragSource}}),o=s.sort(function(l,c){return JG(l.model,c.model)}),i=o.map(function(l){return new e.treeClass(l.model,l.content)});return{sourceNodes:i,sourcesWithModel:s}},a.prototype.recalculateTargetOnScroll=function(){this.dropLocationDeterminer.recalculateTargetOnScroll()},a.prototype.cancelDrag=function(){this.triggerNullOnEndMove(!0),this.dropLocationDeterminer.cancelDrag()},a.prototype.endDrag=function(){this.dropLocationDeterminer.endDrag()},a.prototype.handlePlaceholderMove=function(r,e){this.ensurePlaceholderElement(),this.updatePlaceholderPosition(r,e)},a.prototype.createPlaceholder=function(){return new uK({container:this.containerContext.container,allowNesting:this.dragBehavior.nested,pfx:this.containerContext.pfx,el:this.containerContext.placeholderElement,offset:{top:this.positionOptions.offsetTop,left:this.positionOptions.offsetLeft}})},a.prototype.ensurePlaceholderElement=function(){var r=this.placeholder.el,e=this.containerContext.container;r.ownerDocument.contains(r)||e.append(this.placeholder.el)},a.prototype.updateOffset=function(){var r,e=((r=this.em)===null||r===void 0?void 0:r.get("canvasOffset"))||{};this.positionOptions.offsetTop=e.top,this.positionOptions.offsetLeft=e.left},a.prototype.findValidSourceElement=function(r){return r&&!US(r,"".concat(this.containerContext.itemSel,", ").concat(this.containerContext.containerSel))&&(r=eK(r,this.containerContext.itemSel)),r},a.prototype.bindDragEventHandlers=function(){(0,Ir.on)(this.containerContext.document,"keydown",this.rollback)},a.prototype.updatePlaceholderPosition=function(r,e){this.placeholder.move(r,e)},a.prototype.cleanupEventListeners=function(){(0,Ir.AU)(this.containerContext.document,"keydown",this.rollback)},a.prototype.finalizeMove=function(){this.cleanupEventListeners(),this.placeholder.hide(),delete this.sourceNodes},a.prototype.rollback=function(r){(0,Ir.AU)(this.containerContext.document,"keydown",this.rollback);var e="Escape";r.key===e&&this.cancelDrag()},a.prototype.triggerNullOnEndMove=function(r){var e,t,s,o,i,l=(e=this.sourceNodes)===null||e===void 0?void 0:e[0].model,c={target:l,parent:l&&((t=l.parent)===null||t===void 0?void 0:t.call(l)),index:l&&((s=l.index)===null||s===void 0?void 0:s.call(l))};(i=(o=this.eventHandlers).legacyOnEndMove)===null||i===void 0||i.call(o,null,this,Sh(Sh({},c),{cancelled:r}))},a})();const AO=fK;var pK=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Nh=function(){return Nh=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Nh.apply(this,arguments)},hK=Cl.F.Target,Kj={id:"sorter-target",type:hK},mK=(function(a){pK(r,a);function r(e){var t=e.em,s=e.treeClass,o=e.containerContext,i=e.dragBehavior,l=e.positionOptions,c=l===void 0?{}:l,d=e.eventHandlers,h=d===void 0?{}:d,m=a.call(this,{em:t,treeClass:s,containerContext:o,positionOptions:c,dragBehavior:i,eventHandlers:Nh(Nh({},h),{onStartSort:function(y,x){var b;(b=h.onStartSort)===null||b===void 0||b.call(h,y,x),m.onStartSort()},onDrop:function(y,x,b){var v;(v=h.onDrop)===null||v===void 0||v.call(h,y,x,b),m.onDrop(y,x,b)},onTargetChange:function(y,x){var b;(b=h.onTargetChange)===null||b===void 0||b.call(h,y,x),m.onTargetChange(y,x)},onMouseMove:function(y){var x;(x=h.onMouseMove)===null||x===void 0||x.call(h,y),m.onMouseMove(y)}})})||this;return m.targetIsText=!1,m.onMouseMove=function(y){var x,b=m.targetIsText&&((x=m.sourceNodes)===null||x===void 0?void 0:x.some(function(v){return v.isTextable()}));b&&m.updateTextViewCursorPosition(y)},m.onDrop=function(y,x,b){var v=typeof b=="number"?b:-1;if(y&&x.length>0){var j=m.handleNodeAddition(y,x,v);j.length===0&&m.triggerNullOnEndMove(!1)}else m.triggerNullOnEndMove(!0);y?.restNodeState(),m.placeholder.hide()},m.onTargetChange=function(y,x){var b;y?.restNodeState();var v=m.em.Canvas;if(!x){m.placeholder.hide(),v.removeSpots(Kj);return}x?.setSelectedParentState(),m.targetIsText=x.isTextNode();var j=m.targetIsText&&((b=m.sourceNodes)===null||b===void 0?void 0:b.some(function(P){return P.isTextable()}));j?(x.setContentEditable(!0),m.placeholder.hide()):m.placeholder.show();var S=Cl.F.Select,k=Cl.F.Hover,N=Cl.F.Spacing;[S,k,N].forEach(function(P){return v.removeSpots({type:P})}),v.addSpot(Nh(Nh({},Kj),{component:x.model}))},(0,Ce.bindAll)(m,"handleScrollEvent"),m}return r.prototype.onStartSort=function(){this.em.clearSelection(),this.setAutoCanvasScroll(!0)},r.prototype.bindDragEventHandlers=function(){this.em.on("frame:scroll",this.handleScrollEvent),a.prototype.bindDragEventHandlers.call(this)},r.prototype.cleanupEventListeners=function(){this.em.off("frame:scroll",this.handleScrollEvent),a.prototype.cleanupEventListeners.call(this)},r.prototype.handleScrollEvent=function(){for(var e,t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];var o=(e=t?.[0])===null||e===void 0?void 0:e.frame,i=this.em.Canvas.getCanvasView().frame===o;i&&this.recalculateTargetOnScroll()},r.prototype.handleNodeAddition=function(e,t,s){var o=this;return t.reduce(function(i,l){if(!e.canMove(l,s))return i;if(o.isPositionChanged(e,l,s)){var c=o.moveNode(e,l,s),d=c.index,h=c.addedNode;i.push(h),s=d}return s++,i},[])},r.prototype.isPositionChanged=function(e,t,s){var o=t.getParent(),i=o?o.indexOfChild(t):-1;o?.model.cid===e.model.cid&&i<s&&s--;var l=o?.model.cid===e.model.cid,c=i===s,d=this.targetIsText&&t.isTextable();return!(l&&c&&!d)},r.prototype.moveNode=function(e,t,s){var o=t.getParent();if(o){var i=o.indexOfChild(t);o.removeChildAt(i,{temporary:!0}),o.model.cid===e.model.cid&&i<s&&s--}var l=e.addChildAt(t,s,{action:"move-component"});return l&&this.triggerEndMoveEvent(l),{addedNode:l,index:s}},r.prototype.triggerEndMoveEvent=function(e){var t,s,o,i,l,c;(s=(t=this.eventHandlers).legacyOnEndMove)===null||s===void 0||s.call(t,e.model,this,{target:e.model,parent:e.model&&((i=(o=e.model).parent)===null||i===void 0?void 0:i.call(o)),index:e.model&&((c=(l=e.model).index)===null||c===void 0?void 0:c.call(l))})},r.prototype.finalizeMove=function(){var e,t;(e=this.em)===null||e===void 0||e.Canvas.removeSpots(Kj),(t=this.sourceNodes)===null||t===void 0||t.forEach(function(s){return s.restNodeState()}),this.setAutoCanvasScroll(!1),a.prototype.finalizeMove.call(this)},r.prototype.updateTextViewCursorPosition=function(e){var t=this.em;if(t){var s=t.Canvas,o=s.getDocument(),i=null,l=(0,Ir.G2)(e);if(o.caretPositionFromPoint){var c=o.caretPositionFromPoint(l.clientX,l.clientY);c&&(i=o.createRange(),i.setStart(c.offsetNode,c.offset))}else o.caretRangeFromPoint?i=o.caretRangeFromPoint(l.clientX,l.clientY):e.rangeParent&&(i=o.createRange(),i.setStart(e.rangeParent,e.rangeOffset));var d=s.getWindow().getSelection();s.getFrameEl().focus(),d?.removeAllRanges(),i&&d?.addRange(i)}},r.prototype.setAutoCanvasScroll=function(e){var t=this.em,s=t?.Canvas;s&&(e?s.startAutoscroll():s.stopAutoscroll())},r})(AO);const h_=mK;var gK=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Hv=function(){return Hv=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Hv.apply(this,arguments)},yK=(function(a){gK(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.defaults=function(){return{values:{}}},r.prototype.initialize=function(){var e=this.collection;this.prop=e?.prop},r.prototype.getId=function(){return this.cid},r.prototype.getIndex=function(){var e=this.collection;return e?e.indexOf(this):-1},r.prototype.getValues=function(e){e===void 0&&(e={});var t=this.get("values");return e.camelCase?Object.keys(t).reduce(function(s,o){return s[(0,Zt.camelCase)(o)]=t[o],s},{}):t},r.prototype.getLabel=function(){var e;return(e=this.prop)===null||e===void 0?void 0:e.getLayerLabel(this)},r.prototype.isSelected=function(){var e;return((e=this.prop)===null||e===void 0?void 0:e.getSelectedLayer())===this},r.prototype.select=function(){var e;return(e=this.prop)===null||e===void 0?void 0:e.selectLayer(this)},r.prototype.remove=function(){var e;return(e=this.prop)===null||e===void 0?void 0:e.removeLayer(this)},r.prototype.move=function(e){var t;return(t=this.prop)===null||t===void 0?void 0:t.moveLayer(this,e)},r.prototype.getStylePreview=function(e){var t;return e===void 0&&(e={}),(t=this.prop)===null||t===void 0?void 0:t.getStylePreview(this,e)},r.prototype.hasPreview=function(){var e;return!!(!((e=this.prop)===null||e===void 0)&&e.get("preview"))},r.prototype.upValues=function(e){return e===void 0&&(e={}),this.set("values",Hv(Hv({},this.getValues()),e))},r})(Sr.Kx);const Ug=yK;var xK=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),MO=(function(a){xK(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.initialize=function(e,t){t===void 0&&(t={}),this.prop=t.prop},r})(Sr.pM);const W0=MO;MO.prototype.model=Ug;var vK=ha(3178),bK=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),wK=(function(a){bK(r,a);function r(e){return a.call(this,e)||this}return r.prototype.getChildren=function(){return this.model instanceof W0?this.model.models.map(function(e){return new r(e)}):null},r.prototype.getParent=function(){var e=this.model instanceof Ug?this.model.collection:null;return e?new r(e):null},r.prototype.addChildAt=function(e,t){if(this.model instanceof Ug)throw Error("Cannot add a layer model to another layer model");var s=this.model.add(e.model,{at:t});return new r(s)},r.prototype.removeChildAt=function(e){if(this.model instanceof Ug)throw Error("Cannot remove a layer model from another layer model");var t=this.model.at(e);t&&this.model.remove(t)},r.prototype.indexOfChild=function(e){return!(e.model instanceof Ug)||!(this.model instanceof W0)?-1:this.model.indexOf(e.model)},r.prototype.canMove=function(e,t){return this.model instanceof W0&&!!e.model},Object.defineProperty(r.prototype,"view",{get:function(){return this.model.view},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"element",{get:function(){var e;return(e=this.view)===null||e===void 0?void 0:e.el},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),r})(vK.$),jK=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),NC=function(){return NC=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},NC.apply(this,arguments)},CK=(function(a){jK(r,a);function r(e){var t=e.em,s=e.containerContext,o=e.dragBehavior,i=e.positionOptions,l=i===void 0?{}:i,c=e.eventHandlers,d=c===void 0?{}:c,h=a.call(this,{em:t,treeClass:wK,containerContext:s,positionOptions:l,dragBehavior:o,eventHandlers:NC({onStartSort:function(m,y){var x;(x=d.onStartSort)===null||x===void 0||x.call(d,m,y),h.onLayerStartSort(m)},onDrop:function(m,y,x){var b;(b=d.onDrop)===null||b===void 0||b.call(d,m,y,x),h.onLayerDrop(m,y,x)},onEnd:function(){h.placeholder.hide()}},d)})||this;return h.onLayerStartSort=function(m){h.em.clearSelection();var y=m[0];h.em.trigger("sorter:drag:start",y?.element,y?.model),h.placeholder.show()},h.onLayerDrop=function(m,y,x){if(m){x=typeof x=="number"?x:-1;for(var b=0;b<y.length;b++){var v=y[b];if(m.canMove(v,b)){var j=v.getParent(),S=-1;j&&(S=j.indexOfChild(v),j.removeChildAt(S)),x=S<x?x-1:x,m.addChildAt(v,x)}}h.placeholder.hide()}},h}return r})(AO);const SK=CK;var NK=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),kC=function(){return kC=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},kC.apply(this,arguments)},kK=(function(a){NK(r,a);function r(e){var t=a.call(this,e,"Utils")||this;return t.Sorter=h_,t.Resizer=XG,t.Dragger=$3.A,t.ComponentSorter=h_,t.StyleManagerSorter=SK,t.helpers=kC({},Zt),t}return r.prototype.destroy=function(){},r})(Ai);const _K=kK;var ki,Xi={},ni={16:!1,18:!1,17:!1,91:!1},IO="all",cp={"":16,shift:16,"":18,alt:18,option:18,"":17,ctrl:17,control:17,"":91,command:91},RO={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},$S=function(a){return RO[a]||a.toUpperCase().charCodeAt(0)},Kh=[];for(ki=1;ki<20;ki++)RO["f"+ki]=111+ki;function ay(a,r){for(var e=a.length;e--;)if(a[e]===r)return e;return-1}function EK(a,r){if(a.length!=r.length)return!1;for(var e=0;e<a.length;e++)if(a[e]!==r[e])return!1;return!0}var TK={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function OK(a){for(ki in ni)ni[ki]=a[TK[ki]]}function PK(a){var r,e,t,s,o,i;if(r=a.keyCode,ay(Kh,r)==-1&&Kh.push(r),(r==93||r==224)&&(r=91),r in ni){ni[r]=!0;for(t in cp)cp[t]==r&&(ii[t]=!0);return}if(OK(a),!!ii.filter.call(this,a)&&r in Xi){for(i=VS(),s=0;s<Xi[r].length;s++)if(e=Xi[r][s],e.scope==i||e.scope=="all"){o=e.mods.length>0;for(t in ni)(!ni[t]&&ay(e.mods,+t)>-1||ni[t]&&ay(e.mods,+t)==-1)&&(o=!1);(e.mods.length==0&&!ni[16]&&!ni[18]&&!ni[17]&&!ni[91]||o)&&e.method(a,e)===!1&&(a.preventDefault?a.preventDefault():a.returnValue=!1,a.stopPropagation&&a.stopPropagation(),a.cancelBubble&&(a.cancelBubble=!0))}}}function AK(a){var r=a.keyCode,e,t=ay(Kh,r);if(t>=0&&Kh.splice(t,1),(r==93||r==224)&&(r=91),r in ni){ni[r]=!1;for(e in cp)cp[e]==r&&(ii[e]=!1)}}function MK(){for(ki in ni)ni[ki]=!1;for(ki in cp)ii[ki]=!1}function ii(a,r,e){var t,s;t=LO(a),e===void 0&&(e=r,r="all");for(var o=0;o<t.length;o++)s=[],a=t[o].split("+"),a.length>1&&(s=DO(a),a=[a[a.length-1]]),a=a[0],a=$S(a),a in Xi||(Xi[a]=[]),Xi[a].push({shortcut:t[o],scope:r,method:e,key:t[o],mods:s})}function IK(a,r){var e,t,s=[],o,i,l;for(e=LO(a),i=0;i<e.length;i++){if(t=e[i].split("+"),t.length>1&&(s=DO(t)),a=t[t.length-1],a=$S(a),r===void 0&&(r=VS()),!Xi[a])return;for(o=0;o<Xi[a].length;o++)l=Xi[a][o],l.scope===r&&EK(l.mods,s)&&(Xi[a][o]={})}}function RK(a){return typeof a=="string"&&(a=$S(a)),ay(Kh,a)!=-1}function LK(){return Kh.slice(0)}function DK(a){var r=(a.target||a.srcElement).tagName;return!(r=="INPUT"||r=="SELECT"||r=="TEXTAREA")}for(ki in cp)ii[ki]=!1;function FK(a){IO=a||"all"}function VS(){return IO||"all"}function BK(a){var r,e,t;for(r in Xi)for(e=Xi[r],t=0;t<e.length;)e[t].scope===a?e.splice(t,1):t++}function LO(a){var r;return a=a.replace(/\s/g,""),r=a.split(","),r[r.length-1]==""&&(r[r.length-2]+=","),r}function DO(a){for(var r=a.slice(0,a.length-1),e=0;e<r.length;e++)r[e]=cp[r[e]];return r}function Yj(a,r,e){a.addEventListener?a.addEventListener(r,e,!1):a.attachEvent&&a.attachEvent("on"+r,function(){e(window.event)})}ii.setScope=FK;ii.getScope=VS;ii.deleteScope=BK;ii.filter=DK;ii.isPressed=RK;ii.getPressedKeyCodes=LK;ii.unbind=IK;ii.handlers=Xi;ii.init=function(a){Yj(a.document,"keydown",function(r){PK(r)}),Yj(a.document,"keyup",AK),Yj(a,"focus",MK)};const $g=ii;var zK=function(){return{defaults:{"core:undo":{keys:"+z, ctrl+z",handler:"core:undo",opts:{prevent:!0}},"core:redo":{keys:"+shift+z, ctrl+shift+z",handler:"core:redo",opts:{prevent:!0}},"core:copy":{keys:"+c, ctrl+c",handler:"core:copy"},"core:paste":{keys:"+v, ctrl+v",handler:"core:paste"},"core:component-next":{keys:"s",handler:"core:component-next"},"core:component-prev":{keys:"w",handler:"core:component-prev"},"core:component-enter":{keys:"d",handler:"core:component-enter"},"core:component-exit":{keys:"a",handler:"core:component-exit"},"core:component-delete":{keys:"backspace, delete",handler:"core:component-delete",opts:{prevent:!0}}}}};const UK=zK;var _C;(function(a){a.add="keymap:add",a.remove="keymap:remove",a.emit="keymap:emit",a.emitId="keymap:emit:"})(_C||(_C={}));var $K=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),m_=function(a,r,e){if(e||arguments.length===2)for(var t=0,s=r.length,o;t<s;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return a.concat(o||Array.prototype.slice.call(r))};(0,Zt.hasWin)()&&$g.init(window);var VK=(function(a){$K(r,a);function r(e){var t=a.call(this,e,"Keymaps",UK())||this;return t.keymaster=$g,t.events=_C,t.keymaps={},t}return r.prototype.onLoad=function(){if(!this.em.isHeadless){var e=this.config.defaults;for(var t in e){var s=e[t];this.add(t,s.keys,s.handler,s.opts||{})}}},r.prototype.add=function(e,t,s,o){o===void 0&&(o={});var i=this,l=i.em,c=i.events,d=l.Commands,h=l.getEditor(),m=l.Canvas,y={id:e,keys:t,handler:s},x=this.keymaps[e];return x&&this.remove(e),this.keymaps[e]=y,$g(t,function(b,v){var j,S={event:b,h:v},k=(0,Ce.isString)(s)?d.get(s):s,N=!l.isEditing()&&!h.Canvas.isInputFocused();if(N||o.force){o.prevent&&((j=m.getCanvasView())===null||j===void 0||j.preventDefault(b)),(0,Ce.isFunction)(k)?k(h,0,S):d.runCommand(k,S);var P=[e,v.shortcut,b];l.trigger.apply(l,m_([c.emit],P,!1)),l.trigger.apply(l,m_(["".concat(c.emitId).concat(e)],P,!1))}},void 0),l.trigger(c.add,y),y},r.prototype.get=function(e){return this.keymaps[e]},r.prototype.getAll=function(){return this.keymaps},r.prototype.remove=function(e){var t=this,s=t.em,o=t.events,i=this.get(e);if(i)return delete this.keymaps[e],i.keys.split(", ").forEach(function(l){$g.unbind(l.trim())}),s?.trigger(o.remove,i),i},r.prototype.removeAll=function(){var e=this;return Object.keys(this.keymaps).forEach(function(t){return e.remove(t)}),$g.handlers={},this},r.prototype.destroy=function(){this.removeAll(),this.keymaps={}},r})(Ai);const WK=VK;var HK=function(){return{stylePrefix:"mdl-",title:"",content:"",backdrop:!0,custom:!1,extend:{}}};const qK=HK;var GK=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),KK=(function(a){GK(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.defaults=function(){return{title:"",content:"",attributes:{},open:!1}},r.prototype.open=function(){this.set("open",!0)},r.prototype.close=function(){this.set("open",!1)},r})(zu.A);const YK=KK;var EC;(function(a){a.open="modal:open",a.close="modal:close",a.all="modal"})(EC||(EC={}));var ZK=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),qv=function(){return qv=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},qv.apply(this,arguments)},XK=(function(a){ZK(r,a);function r(e){var t=a.call(this,e)||this,s=t.model;return t.listenTo(s,"change:open",t.updateOpen),t.listenTo(s,"change:title",t.updateTitle),t.listenTo(s,"change:content",t.updateContent),t}return r.prototype.template=function(e){var t=e.pfx,s=e.ppfx,o=e.content,i=e.title;return'<div class="'.concat(t,"dialog ").concat(s,"one-bg ").concat(s,`two-color">
      <div class="`).concat(t,`header">
        <div class="`).concat(t,'title">').concat(i,`</div>
        <div class="`).concat(t,`btn-close" data-close-modal>&Cross;</div>
      </div>
      <div class="`).concat(t,`content">
        <div id="`).concat(t,'c">').concat(o,`</div>
        <div style="clear:both"></div>
      </div>
    </div>
    <div class="`).concat(t,'collector" style="display: none"></div>')},r.prototype.events=function(){return{click:"onClick","click [data-close-modal]":"hide"}},r.prototype.onClick=function(e){var t=this.config.backdrop;t&&e.target===this.el&&this.hide()},r.prototype.getCollector=function(){return this.$collector||(this.$collector=this.$el.find("."+this.pfx+"collector")),this.$collector},r.prototype.getContent=function(){var e=this.pfx;return this.$content||(this.$content=this.$el.find(".".concat(e,"content #").concat(e,"c"))),this.$content},r.prototype.getTitle=function(e){return e===void 0&&(e={}),this.$title||(this.$title=this.$el.find("."+this.pfx+"title")),e.$?this.$title:this.$title.get(0)},r.prototype.updateContent=function(){var e=this.getContent(),t=e.children(),s=this.getCollector(),o=this.model.get("content");t.length&&s.append(t),e.empty().append(o)},r.prototype.updateTitle=function(){var e=this.getTitle({$:!0});e&&e.empty().append(this.model.get("title"))},r.prototype.updateOpen=function(){this.el.style.display=this.model.get("open")?"":"none"},r.prototype.hide=function(){this.model.close()},r.prototype.show=function(){this.model.open()},r.prototype.updateAttr=function(e){var t=this,s=t.pfx,o=t.$el,i=t.el,l=[].slice.call(i.attributes).map(function(c){return c.name});o.removeAttr(l.join(" ")),o.attr(qv(qv({},e||{}),{class:"".concat(s,"container ").concat(e&&e.class||"").trim()}))},r.prototype.render=function(){var e=this.$el,t=this.model.toJSON();return t.pfx=this.pfx,t.ppfx=this.ppfx,e.html(this.template(t)),this.updateAttr(),this.updateOpen(),this},r})(kl);const QK=XK;var JK=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),eY=(function(a){JK(r,a);function r(e){var t=a.call(this,e,"Modal",qK())||this;t.events=EC;var s=t.events;return t.model=new YK(t),t.model.on("change:open",function(o,i){e.trigger(i?s.open:s.close)}),t.model.on("change",(0,Ce.debounce)(function(){var o=t._evData(),i=t.config.custom;(0,Ce.isFunction)(i)&&i(o),e.trigger(s.all,o)},0)),t}return r.prototype._evData=function(){var e=this,t=this.getTitle(),s=this.getContent(),o=this.model.attributes,i=o.open,l=o.attributes;return{open:i,attributes:l,title:(0,Ce.isString)(t)?(0,Ir.GZ)(t):t,content:(0,Ce.isString)(s)?(0,Ir.GZ)(s):s.get?s.get(0):s,close:function(){e.close()}}},r.prototype.postRender=function(e){var t=e.model.config.el||e.el,s=this.render();s&&t?.appendChild(s)},r.prototype.open=function(e){e===void 0&&(e={});var t=e.attributes||{};return e.title&&this.setTitle(e.title),e.content&&this.setContent(e.content),this.model.set("attributes",t),this.model.open(),this.modal&&this.modal.updateAttr(t),this},r.prototype.close=function(){return this.model.close(),this},r.prototype.onceClose=function(e){var t=this,s=t.em,o=t.events;return s.once(o.close,e),this},r.prototype.onceOpen=function(e){var t=this,s=t.em,o=t.events;return s.once(o.open,e),this},r.prototype.isOpen=function(){return!!this.model.get("open")},r.prototype.setTitle=function(e){return this.model.set("title",e),this},r.prototype.getTitle=function(){return this.model.get("title")},r.prototype.setContent=function(e){return this.model.set("content"," "),this.model.set("content",e),this},r.prototype.getContent=function(){return this.model.get("content")},r.prototype.getContentEl=function(){var e;return(e=this.modal)===null||e===void 0?void 0:e.getContent().get(0)},r.prototype.getModel=function(){return this.model},r.prototype.render=function(){var e;if(!this.config.custom){var t=QK.extend(this.config.extend),s=this.modal&&this.modal.el;return this.modal=new t({el:s,model:this.model,config:this.config}),(e=this.modal)===null||e===void 0?void 0:e.render().el}},r.prototype.destroy=function(){var e;(e=this.modal)===null||e===void 0||e.remove()},r})(Ai);const tY=eY;var g_="sw-visibility",y_="export-template",x_="open-sm",v_="open-tm",b_="open-layers",w_="open-blocks",Zj="fullscreen",Xj="preview",rY=function(){return{stylePrefix:"pn-",defaults:[{id:"commands",buttons:[{}]},{id:"options",buttons:[{active:!0,id:g_,className:"fa fa-square-o",command:"core:component-outline",context:g_,attributes:{title:"View components"}},{id:Xj,className:"fa fa-eye",command:Xj,context:Xj,attributes:{title:"Preview"}},{id:Zj,className:"fa fa-arrows-alt",command:Zj,context:Zj,attributes:{title:"Fullscreen"}},{id:y_,className:"fa fa-code",command:y_,attributes:{title:"View code"}}]},{id:"views",buttons:[{id:x_,className:"fa fa-paint-brush",command:x_,active:!0,togglable:!1,attributes:{title:"Open Style Manager"}},{id:v_,className:"fa fa-cog",command:v_,togglable:!1,attributes:{title:"Settings"}},{id:b_,className:"fa fa-bars",command:b_,togglable:!1,attributes:{title:"Open Layer Manager"}},{id:w_,className:"fa fa-th-large",command:w_,togglable:!1,attributes:{title:"Open Blocks"}}]}]}};const nY=rY;var aY=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),sY=(function(a){aY(r,a);function r(e,t){var s=a.call(this,e,t)||this;return s.get("buttons").length&&s.set("buttons",new zO(s.module,s.get("buttons"))),s}return r.prototype.defaults=function(){return{id:"",label:"",tagName:"span",className:"",command:"",context:"",buttons:[],attributes:{},options:{},active:!1,dragDrop:!1,togglable:!0,runDefaultCommand:!0,stopDefaultCommand:!1,disable:!1}},Object.defineProperty(r.prototype,"className",{get:function(){return this.get("className")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"command",{get:function(){return this.get("command")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"active",{get:function(){return this.get("active")},set:function(e){this.set("active",e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"togglable",{get:function(){return this.get("togglable")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"runDefaultCommand",{get:function(){return this.get("runDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"stopDefaultCommand",{get:function(){return this.get("stopDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"disable",{get:function(){return this.get("disable")},enumerable:!1,configurable:!0}),r})(zu.A);const FO=sY;var oY=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),BO=(function(a){oY(r,a);function r(e,t){return a.call(this,e,t,FO)||this}return r.prototype.deactivateAllExceptOne=function(e,t){this.forEach(function(s,o){s!==e&&(s.set("active",!1),t&&s.get("buttons").length&&s.get("buttons").deactivateAllExceptOne(e,t))})},r.prototype.deactivateAll=function(e,t){var s=e||"";this.forEach(function(o){o.get("context")==s&&o!==t&&o.set("active",!1,{fromCollection:!0})})},r.prototype.disableAllButtons=function(e){var t=e||"";this.forEach(function(s,o){s.get("context")==t&&s.set("disable",!0)})},r.prototype.disableAllButtonsExceptOne=function(e,t){this.forEach(function(s,o){s!==e&&(s.set("disable",!0),t&&s.get("buttons").length&&s.get("buttons").disableAllButtonsExceptOne(e,t))})},r})(Lb);const zO=BO;BO.prototype.model=FO;var iY=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),lY=(function(a){iY(r,a);function r(e,t){var s=a.call(this,e,t)||this,o=s.get("buttons")||[];return s.buttons=new zO(e,o),s}return r.prototype.defaults=function(){return{id:"",content:"",visible:!0,buttons:[],attributes:{}}},Object.defineProperty(r.prototype,"buttons",{get:function(){return this.get("buttons")},set:function(e){this.set("buttons",e)},enumerable:!1,configurable:!0}),r})(zu.A);const UO=lY;var cY=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),$O=(function(a){cY(r,a);function r(e,t){return a.call(this,e,t,UO)||this}return r})(Lb);const dY=$O;$O.prototype.model=UO;var uY=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),kh=function(){return kh=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},kh.apply(this,arguments)},fY=(function(a){uY(r,a);function r(e){var t=a.call(this,e)||this,s=t,o=s.model,i=s.em,l=s.pfx,c=s.ppfx,d=o.className,h=o.attributes,m=h.command,y=h.listen;if(t.id=l+o.get("id"),t.activeCls="".concat(l,"active ").concat(c,"four-color"),t.disableCls="".concat(c,"disabled"),t.btnsVisCls="".concat(l,"visible"),t.className=l+"btn"+(d?" "+d:""),t.listenTo(o,"change",t.render),t.listenTo(o,"change:active updateActive",t.updateActive),t.listenTo(o,"checkActive",t.checkActive),t.listenTo(o,"change:bntsVis",t.updateBtnsVis),t.listenTo(o,"change:attributes",t.updateAttributes),t.listenTo(o,"change:className",t.updateClassName),t.listenTo(o,"change:disable",t.updateDisable),i&&(0,Ce.isString)(m)&&y){var x={fromListen:!0};t.listenTo(i,"run:".concat(m),function(){return o.set("active",!0,x)}),t.listenTo(i,"stop:".concat(m),function(){return o.set("active",!1,x)})}return i&&i.get&&(t.commands=i.get("Commands")),t}return r.prototype.tagName=function(){return this.model.get("tagName")},r.prototype.events=function(){return{click:"clicked"}},r.prototype.updateClassName=function(){var e=this,t=e.model,s=e.pfx,o=t.className,i=t.get("attributes").class,l="".concat(i||""," ").concat(s,"btn ").concat(o||"");this.$el.attr("class",l.trim())},r.prototype.updateAttributes=function(){var e=this,t=e.em,s=e.model,o=e.$el,i=s.get("attributes")||{},l=t&&t.t&&t.t("panels.buttons.titles.".concat(s.id));o.attr(i),l&&o.attr({title:l}),this.updateClassName()},r.prototype.updateBtnsVis=function(){this.$buttons&&(this.model.get("bntsVis")?this.$buttons.addClass(this.btnsVisCls):this.$buttons.removeClass(this.btnsVisCls))},r.prototype.updateActive=function(e,t,s){var o;s===void 0&&(s={});var i=this,l=i.model,c=i.commands,d=i.$el,h=i.activeCls,m=s.fromCollection,y=s.fromListen,x=l.get("context"),b=l.get("options"),v=l.command,j={};v&&(c&&(0,Ce.isString)(v)?j=c.get(v)||{}:(0,Ce.isFunction)(v)?j=c.create({run:v}):v!==null&&(0,Ce.isObject)(v)&&(j=c.create(v)),l.active?(!m&&((o=l.collection)===null||o===void 0||o.deactivateAll(x,l)),l.set("active",!0,{silent:!0}).trigger("checkActive"),!y&&c.runCommand(j,kh(kh({},b),{sender:l})),j.noStop&&l.set("active",!1)):(d.removeClass(h),!y&&c.stopCommand(j,kh(kh({},b),{sender:l,force:1}))))},r.prototype.updateDisable=function(){var e=this,t=e.disableCls,s=e.model,o=s.disable;this.$el[o?"addClass":"removeClass"](t)},r.prototype.checkActive=function(){var e=this,t=e.model,s=e.$el,o=e.activeCls;t.active?s.addClass(o):s.removeClass(o)},r.prototype.clicked=function(){var e=this.model;e.get("bntsVis")||e.disable||!e.command||this.toggleActive()},r.prototype.toggleActive=function(){var e=this,t=e.model,s=e.em,o=t.active,i=t.togglable;o&&!i||(t.active=!o,o?t.runDefaultCommand&&s.runDefault():t.stopDefaultCommand&&s.stopDefault())},r.prototype.render=function(){var e=this.model,t=e.get("label"),s=this.$el;return!e.get("el")&&s.empty(),this.updateAttributes(),t&&s.append(t),this.checkActive(),this.updateDisable(),this},r})(kl);const pY=fY;var hY=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),mY=(function(a){hY(r,a);function r(e){var t=a.call(this,{collection:e})||this;return t.listenTo(t.collection,"add",t.addTo),t.listenTo(t.collection,"reset remove",t.render),t.className=t.pfx+"buttons",t}return r.prototype.addTo=function(e){this.addToCollection(e)},r.prototype.addToCollection=function(e,t){var s=t||null,o=e.get("el"),i=new pY({el:o,model:e}),l=i.render().el;return s?s.appendChild(l):this.$el.append(l),l},r.prototype.render=function(){var e=this,t=document.createDocumentFragment();return this.$el.empty(),this.collection.each(function(s){return e.addToCollection(s,t)}),this.$el.append(t),this.$el.attr("class",(0,Ce.result)(this,"className")),this},r})(kl);const gY=mY;var yY=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),TC=function(){return TC=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},TC.apply(this,arguments)},xY=(function(a){yY(r,a);function r(e){var t=a.call(this,{model:e,el:e.get("el")})||this;return t.className=t.pfx+"panel",t.id=t.pfx+e.get("id"),t.listenTo(e,"change:appendContent",t.appendContent),t.listenTo(e,"change:content",t.updateContent),t.listenTo(e,"change:visible",t.toggleVisible),e.view=t,t}return r.prototype.appendContent=function(){this.$el.append(this.model.get("appendContent"))},r.prototype.updateContent=function(){this.$el.html(this.model.get("content"))},r.prototype.toggleVisible=function(){if(!this.model.get("visible")){this.$el.addClass("".concat(this.ppfx,"hidden"));return}this.$el.removeClass("".concat(this.ppfx,"hidden"))},r.prototype.attributes=function(){return this.model.get("attributes")},r.prototype.initResize=function(){var e=this.em,t=e?.Editor,s=this.model.get("resizable");if(t&&s){var o=s===!0?[!0,!0,!0,!0]:s,i=o.length,l=void 0,c=void 0,d=void 0,h=!1;if(i==2){var m=o;l=m[0],d=m[0],c=m[1],h=m[1]}else if(i==4){var m=o;l=m[0],c=m[1],d=m[2],h=m[3]}var y=new t.Utils.Resizer(TC({tc:l,cr:c,bc:d,cl:h,tl:!1,tr:!1,bl:!1,br:!1,appendTo:this.el,silentFrames:!0,avoidContainerUpdate:!0,prefix:t.getConfig().stylePrefix,onEnd:function(){e.Canvas.refresh({all:!0})},posFetcher:function(x,b){var v=b.target,j=x.style,S=y.getConfig(),k=S.keyWidth,N=S.keyHeight,P=x.getBoundingClientRect(),R=v=="container",F=j[k],z=j[N],H=F&&!R?parseFloat(F):P.width,V=z&&!R?parseFloat(z):P.height;return{left:0,top:0,width:H,height:V}}},s&&typeof s!="boolean"?s:{}));y.blur=function(){},y.focus(this.el)}},r.prototype.render=function(){var e=this.model.buttons,t=this.$el,s=this.ppfx,o="".concat(this.className," ").concat(this.id," ").concat(s,"one-bg ").concat(s,"two-color");if(t.addClass(o),this.toggleVisible(),e.length){var i=new gY(e);t.append(i.render().el)}return t.append(this.model.get("content")),this},r})(kl);const vY=xY;var bY=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),wY=(function(a){bY(r,a);function r(e){var t=a.call(this,{collection:e})||this;return t.listenTo(e,"add",t.addTo),t.listenTo(e,"reset",t.render),t.listenTo(e,"remove",t.onRemove),t.className=t.pfx+"panels",t}return r.prototype.onRemove=function(e){var t=e.view;t&&t.remove()},r.prototype.addTo=function(e){this.addToCollection(e)},r.prototype.addToCollection=function(e,t){var s=t||null,o=e.get("el"),i=new vY(e),l=i.render().el,c=e.get("appendTo");if(!o)if(c){var d=document.querySelector(c);d?.appendChild(l)}else s?s.appendChild(l):this.$el.append(l);return i.initResize(),l},r.prototype.render=function(){var e=this,t=this.$el,s=document.createDocumentFragment();return t.empty(),this.collection.each(function(o){return e.addToCollection(o,s)}),t.append(s),t.attr("class",this.className),this},r})(kl);const jY=wY;var CY=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),SY=(function(a){CY(r,a);function r(e){var t=a.call(this,e,"Panels",nY())||this;return t.panels=new dY(t,t.config.defaults),t}return r.prototype.getPanels=function(){return this.panels},r.prototype.getPanelsEl=function(){var e;return(e=this.PanelsViewObj)===null||e===void 0?void 0:e.el},r.prototype.addPanel=function(e){return this.panels.add(e)},r.prototype.removePanel=function(e){return this.panels.remove(e)},r.prototype.getPanel=function(e){var t=this.panels.where({id:e});return t.length?t[0]:null},r.prototype.addButton=function(e,t){var s=this.getPanel(e);return s?s.buttons.add(t):null},r.prototype.removeButton=function(e,t){var s=this.getPanel(e);return s&&s.buttons.remove(t)},r.prototype.getButton=function(e,t){var s=this.getPanel(e);if(s){var o=s.buttons.where({id:t});return o.length?o[0]:null}return null},r.prototype.render=function(){var e;return(e=this.PanelsViewObj)===null||e===void 0||e.remove(),this.PanelsViewObj=new jY(this.panels),this.PanelsViewObj.render().el},r.prototype.active=function(){this.getPanels().each(function(e){e.buttons.each(function(t){t.get("active")&&t.trigger("updateActive")})})},r.prototype.disableButtons=function(){this.getPanels().each(function(e){e.buttons.each(function(t){t.get("disable")&&t.trigger("change:disable")})})},r.prototype.destroy=function(){this.panels.reset(),this.panels.stopListening(),this.PanelsViewObj&&this.PanelsViewObj.remove()},r})(Ai);const NY=SY;var kY=function(){return{stylePrefix:"cm-",optsCodeViewer:{}}};const _Y=kY;var EY=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),TY=function(a,r){var e={};for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&r.indexOf(t)<0&&(e[t]=a[t]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(a);s<t.length;s++)r.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(a,t[s])&&(e[t[s]]=a[t[s]]);return e},OY=(function(a){EY(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.build=function(e,t){t===void 0&&(t={});var s=t.em,o=TY(t,["em"]),i=o;if(t.cleanId&&s){var l=s.Css.getAll(),c=l.toJSON().map(function(h){var m=h.selectors,y=m&&m.length===1&&m.models[0];return y&&y.isId()&&y.get("name")}).filter(Boolean),d=i.attributes;i.attributes=function(h,m){m=typeof d=="function"?d(h,m):m;var y=m.id;return y&&y[0]==="i"&&!h.get("script")&&!h.get("script-export")&&!h.get("attributes").id&&c.indexOf(y)<0&&delete m.id,m}}return e.toHTML(i)},r})(Sr.Kx);const PY=OY;var AY=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),MY=(function(a){AY(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.build=function(e){var t=this,s=e.toJSON();return this.beforeEach(s),(0,Ce.each)(s,function(o,i){var l=s[i];if(l instanceof Sr.Kx)s[i]=t.build(l);else if(l instanceof Sr.pM){var c=l;s[i]=[],c.length&&c.forEach(function(d,h){s[i][h]=t.build(d)})}}),s},r.prototype.beforeEach=function(e){delete e.status},r})(Sr.Kx);const IY=MY;var RY=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})();function LY(a){var r,e=((r=a.toString().match(/\{([\s\S]*)\}/m))===null||r===void 0?void 0:r[1])||"";return e.replace(/^\s*\/\/.*$/gm,"").trim().length===0}var DY=(function(a){RY(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.mapModel=function(e){var t,s=this,o="",i=e.get("script-export")||e.get("script"),l=e.get("type"),c=e.get("components"),d=e.getId();if(i){var h=e.get("attributes");h=(0,Ce.extend)({},h,{id:d}),e.set("attributes",h,{silent:!0});var m=e.getScriptString(i),y=e.get("script-props");if(e.get("scriptUpdated")&&!y)this.mapJs[l+"-"+d]={ids:[d],code:m};else{var x=void 0,b=this.mapJs[l];if(y&&(x=e.__getScriptProps()),b)b.ids.push(d),x&&(b.props[d]=x);else{var v={ids:[d],code:m};x&&(v.props=(t={},t[d]=x,t)),this.mapJs[l]=v}}}return c.forEach(function(j){o+=s.mapModel(j)}),o},r.prototype.build=function(e){this.mapJs={},this.mapModel(e);var t="";for(var s in this.mapJs){var o=this.mapJs[s];if(o.code)if(o.props){if(LY(o.code))continue;t+=`
          var props = `.concat(JSON.stringify(o.props),`;
          var ids = Object.keys(props).map(function(id) { return '#'+id }).join(',');
          var els = document.querySelectorAll(ids);
          for (var i = 0, len = els.length; i < len; i++) {
            var el = els[i];
            (`).concat(o.code,`.bind(el))(props[el.id]);
          }`)}else{var i="#"+o.ids.join(", #");t+=`
          var items = document.querySelectorAll('`.concat(i,`');
          for (var i = 0, len = items.length; i < len; i++) {
            (function(){
`).concat(o.code,`
}.bind(items[i]))();
          }`)}}return t},r})(Sr.Kx);const FY=DY;var BY=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),OC=function(){return OC=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},OC.apply(this,arguments)},sy;(0,Zt.hasWin)()&&(sy=ha(4408),ha(8253),ha(7389),ha(3640));var VO=(function(a){BY(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.defaults=function(){return{input:"",label:"",codeName:"",theme:"hopscotch",readOnly:!0,lineNumbers:!0,autoFormat:!0}},r.prototype.init=function(e){return(0,Ce.bindAll)(this,"onChange"),this.editor=sy.fromTextArea(e,OC({dragDrop:!1,lineWrapping:!0,mode:this.get("codeName")},this.attributes)),this.element=e,this.editor.on("change",this.onChange),this},r.prototype.onChange=function(){this.trigger("update",this)},r.prototype.getEditor=function(){return this.editor},r.prototype.getElement=function(){return this.element},r.prototype.setElement=function(e){return this.element=e,this},r.prototype.refresh=function(){return this.getEditor().refresh(),this},r.prototype.focus=function(){return this.getEditor().focus(),this},r.prototype.getContent=function(){var e=this.getEditor();return e&&e.getValue()},r.prototype.setContent=function(e,t){var s=this;t===void 0&&(t={});var o=this.editor;if(o){o.setValue(e);var i=this.get("autoFormat"),l=o.autoFormatRange&&(i===!0||Array.isArray(i)&&i.includes(this.get("codeName")));l&&(sy.commands.selectAll(o),o.autoFormatRange(o.getCursor(!0),o.getCursor(!1)),sy.commands.goDocStart(o)),!t.noRefresh&&setTimeout(function(){return s.refresh()})}},r})(Sr.Kx);const zY=VO;VO.prototype.CodeMirror=sy;var UY=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),$Y=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a},VY=(function(a){UY(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.template=function(e){var t=e.pfx,s=e.codeName,o=e.label;return Ni(j_||(j_=$Y([`
      <div class="`,'editor" id="',"",`">
        <div id="`,'title">',`</div>
        <div id="`,`code"></div>
      </div>
    `],[`
      <div class="`,'editor" id="',"",`">
        <div id="`,'title">',`</div>
        <div id="`,`code"></div>
      </div>
    `])),t,t,s,t,o,t)},r.prototype.initialize=function(e){this.config=e.config||{},this.pfx=this.config.stylePrefix},r.prototype.render=function(){var e,t,s=this,o=s.model,i=s.pfx,l=s.$el,c=o.toJSON(),d=o.get("input")||((t=(e=o).getElement)===null||t===void 0?void 0:t.call(e));return c.pfx=i,l.html(this.template(c)),l.attr("class","".concat(i,"editor-c")),l.find("#".concat(i,"code")).append(d),this},r})(Sr.Ss);const WY=VY;var j_,HY=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Gv=function(){return Gv=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Gv.apply(this,arguments)},qY="CodeMirror",GY=(function(a){HY(r,a);function r(e){var t=a.call(this,e,"CodeManager",_Y())||this;t.EditorView=WY;var s=t.config,o=s.pStylePrefix;return o&&(s.stylePrefix=o+s.stylePrefix),t.generators={},t.viewers={},t.defGenerators={html:new PY,css:new zW,json:new IY,js:new FY},t.defViewers={CodeMirror:new zY},t.loadDefaultGenerators().loadDefaultViewers(),t}return r.prototype.addGenerator=function(e,t){return this.generators[e]=t,this},r.prototype.getGenerator=function(e){return this.generators[e]},r.prototype.getGenerators=function(){return this.generators},r.prototype.addViewer=function(e,t){return this.viewers[e]=t,this},r.prototype.getViewer=function(e){return this.viewers[e]},r.prototype.getViewers=function(){return this.viewers},r.prototype.createViewer=function(e){e===void 0&&(e={});var t=(0,Ce.isUndefined)(e.type)?qY:e.type,s=this.getViewer(t)&&this.getViewer(t).clone(),o=document.createElement("div"),i=document.createElement("textarea");return o.appendChild(i),s.set(Gv(Gv({},this.config.optsCodeViewer),e)),s.init(i),s.setElement(o),s},r.prototype.updateViewer=function(e,t){e.setContent(t)},r.prototype.getCode=function(e,t,s){s===void 0&&(s={}),s.em=this.em;var o=this.getGenerator(t);return o?o.build(e,s):""},r.prototype.loadDefaultGenerators=function(){for(var e in this.defGenerators)this.addGenerator(e,this.defGenerators[e]);return this},r.prototype.loadDefaultViewers=function(){for(var e in this.defViewers)this.addViewer(e,this.defViewers[e]);return this},r.prototype.destroy=function(){},r})(Ai);const KY=GY;var YY=ha(4729),ZY=ha.n(YY),XY=function(){return{maximumStackLength:500,trackSelection:!0}};const QY=XY;var ai;(function(a){a.update="update",a.updateBefore="updateBefore",a.undo="undo",a.redo="redo",a.load="load",a.projectLoad="project:load",a.projectLoaded="project:loaded",a.projectGet="project:get",a.log="log",a.telemetryInit="telemetry:init",a.destroy="destroy",a.destroyed="destroyed"})(ai||(ai={}));var JY=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Od=function(){return Od=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Od.apply(this,arguments)},eZ=function(a,r,e){if(e||arguments.length===2)for(var t=0,s=r.length,o;t<s;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return a.concat(o||Array.prototype.slice.call(r))},v0=function(a){return a.avoidStore||a.noUndo||a.partial},C_=function(a){return Object.keys(a.changedAttributes())},b0=new WeakMap,tZ=(function(a){JY(r,a);function r(e){var t=a.call(this,e,"UndoManager",QY())||this;t.config._disable&&(t.config.maximumStackLength=0);var s=!0;return t.um=new(ZY())(Od({track:!0,register:[]},t.config)),t.um.changeUndoType("change",{condition:function(o){var i=o.get("_undo");if(i){var l=o.get("_undoexc");if((0,Ce.isArray)(l)&&C_(o).some(function(c){return l.indexOf(c)>=0}))return!1;if((0,Ce.isBoolean)(i)||(0,Ce.isArray)(i)&&C_(o).some(function(c){return i.indexOf(c)>=0}))return!0}return!1},on:function(o,i,l){var c=b0.get(o);c||(c=o.previousAttributes(),b0.set(o,c));var d=l||i||{};if(d.noUndo&&setTimeout(function(){b0.delete(o)}),!v0(d)){var h=o.toJSON({fromUndo:s}),m={object:o,before:c,after:h};return b0.delete(o),(0,Ce.isEmpty)(h)?void 0:m}}}),t.um.changeUndoType("add",{on:function(o,i,l){if(l===void 0&&(l={}),!(v0(l)||!t.isRegistered(i)))return{object:i,before:void 0,after:o,options:Od(Od({},l),{fromUndo:s})}}}),t.um.changeUndoType("remove",{on:function(o,i,l){if(l===void 0&&(l={}),!(v0(l)||!t.isRegistered(i)))return{object:i,before:o,after:void 0,options:Od(Od({},l),{fromUndo:s})}}}),t.um.changeUndoType("reset",{undo:function(o,i){o.reset(i,{fromUndo:s})},redo:function(o,i,l){o.reset(l,{fromUndo:s})},on:function(o,i){if(i===void 0&&(i={}),!(v0(i)||!t.isRegistered(o)))return{object:o,before:i.previousModels,after:eZ([],o.models,!0),options:Od(Od({},i),{fromUndo:s})}}}),t.um.on("undo redo",function(){e.getSelectedAll().map(function(o){return o.trigger("rerender:layer")})}),[ai.undo,ai.redo].forEach(function(o){return t.um.on(o,function(){return e.trigger(o)})}),t}return r.prototype.postLoad=function(){var e=this,t=e.config,s=e.em;t.trackSelection&&s&&this.add(s.get("selected"))},r.prototype.add=function(e){return this.um.register(e),this},r.prototype.remove=function(e){return this.um.unregister(e),this},r.prototype.removeAll=function(){return this.um.unregisterAll(),this},r.prototype.start=function(){return this.um.startTracking(),this},r.prototype.stop=function(){return this.um.stopTracking(),this},r.prototype.undo=function(e){e===void 0&&(e=!0);var t=this,s=t.em,o=t.um;return!s.isEditing()&&o.undo(e),this},r.prototype.undoAll=function(){return this.um.undoAll(),this},r.prototype.redo=function(e){e===void 0&&(e=!0);var t=this,s=t.em,o=t.um;return!s.isEditing()&&o.redo(e),this},r.prototype.redoAll=function(){return this.um.redoAll(),this},r.prototype.hasUndo=function(){return!!this.um.isAvailable("undo")},r.prototype.hasRedo=function(){return!!this.um.isAvailable("redo")},r.prototype.isRegistered=function(e){return!!this.getInstance().objectRegistry.isRegistered(e)},r.prototype.getStack=function(){return this.um.stack},r.prototype.getStackGroup=function(){var e=[],t=[];return this.getStack().forEach(function(s){var o=s.get("magicFusionIndex");t.indexOf(o)<0&&(t.push(o),e.push(s))}),e},r.prototype.skip=function(e){var t=!!this.um.isTracking();t&&this.stop(),e(),t&&this.start()},r.prototype.getGroupedStack=function(){var e={},t=this.getStack(),s=function(o,i){var l=o.attributes,c=l.type,d=l.after,h=l.before,m=l.object,y=l.options,x=y===void 0?{}:y;return{index:i,type:c,after:d,before:h,object:m,options:x}};return t.forEach(function(o,i){var l=o.get("magicFusionIndex"),c=s(o,i);e[l]?e[l].push(c):e[l]=[c]}),Object.keys(e).map(function(o){var i=e[o];return{index:i[i.length-1].index,actions:i,labels:(0,Ce.unique)(i.reduce(function(l,c){var d,h=(d=c.options)===null||d===void 0?void 0:d.action;return h&&l.push(h),l},[]))}})},r.prototype.goToGroup=function(e){var t=this;if(e){var s=this.getPointer(),o=e.index-s;(0,Ce.times)(Math.abs(o),function(){t[o<0?"undo":"redo"](!1)})}},r.prototype.getPointer=function(){return this.getStack().pointer},r.prototype.clear=function(){return this.um.clear(),this},r.prototype.getInstance=function(){return this.um},r.prototype.destroy=function(){this.clear().removeAll()},r})(Ai);const rZ=tZ;var nZ=function(){return{stylePrefix:"rte-",adjustToolbar:!0,actions:["bold","italic","underline","strikethrough","link","wrap"],custom:!1}};const aZ=nZ;var _h=function(){return _h=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},_h.apply(this,arguments)},Kv;(function(a){a[a.ACTIVE=1]="ACTIVE",a[a.INACTIVE=0]="INACTIVE",a[a.DISABLED=-1]="DISABLED"})(Kv||(Kv={}));var Qj="_rte",Zf={ACTIVE:1,INACTIVE:0,DISABLED:-1},w0=function(a,r){r===void 0&&(r="A");var e=a.selection()||{},t=e.anchorNode,s=e.focusNode,o=t?.parentNode,i=s?.parentNode;return o?.nodeName==r||i?.nodeName==r},Yv="data-selectme",_g={bold:{name:"bold",icon:"<b>B</b>",attributes:{title:"Bold"},result:function(a){return a.exec("bold")}},italic:{name:"italic",icon:"<i>I</i>",attributes:{title:"Italic"},result:function(a){return a.exec("italic")}},underline:{name:"underline",icon:"<u>U</u>",attributes:{title:"Underline"},result:function(a){return a.exec("underline")}},strikethrough:{name:"strikethrough",icon:"<s>S</s>",attributes:{title:"Strike-through"},result:function(a){return a.exec("strikeThrough")}},link:{icon:`<svg viewBox="0 0 24 24">
          <path fill="currentColor" d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z" />
        </svg>`,name:"link",attributes:{style:"font-size:1.4rem;padding:0 4px 2px;",title:"Link"},state:function(a){return a&&a.selection()&&w0(a)?Zf.ACTIVE:Zf.INACTIVE},result:function(a){w0(a)?a.exec("unlink"):a.insertHTML('<a href="" '.concat(Yv,">").concat(a.selection(),"</a>"),{select:!0})}},wrap:{name:"wrap",icon:`<svg viewBox="0 0 24 24">
            <path fill="currentColor" d="M20.71,4.63L19.37,3.29C19,2.9 18.35,2.9 17.96,3.29L9,12.25L11.75,15L20.71,6.04C21.1,5.65 21.1,5 20.71,4.63M7,14A3,3 0 0,0 4,17C4,18.31 2.84,19 2,19C2.92,20.22 4.5,21 6,21A4,4 0 0,0 10,17A3,3 0 0,0 7,14Z" />
        </svg>`,attributes:{title:"Wrap for style"},state:function(a){return a?.selection()&&w0(a,"SPAN")?Zf.DISABLED:Zf.INACTIVE},result:function(a){!w0(a,"SPAN")&&a.insertHTML("<span ".concat(Yv,">").concat(a.selection(),"</span>"),{select:!0})}}},sZ=(function(){function a(r,e,t){t===void 0&&(t={});var s=this;if(this.em=r,this.settings=t,e[Qj])return e[Qj];e[Qj]=this,this.setEl(e),this.updateActiveActions=this.updateActiveActions.bind(this),this.__onKeydown=this.__onKeydown.bind(this),this.__onPaste=this.__onPaste.bind(this);var o=(t.actions||[]).map(function(h){var m=h;return(0,Ce.isString)(h)?m=_h({},_g[h]):_g[h.name]&&(m=_h(_h({},_g[h.name]),h)),m}),i=o.length?o:Object.keys(_g).map(function(h){return _g[h]});t.classes=_h({actionbar:"actionbar",button:"action",active:"active",disabled:"disabled",inactive:"inactive"},t.classes);var l=t.classes,c=t.actionbar;if(this.actionbar=c,this.classes=l,this.actions=i,!c){if(!this.isCustom(t.module)){var d=t.actionbarContainer;c=document.createElement("div"),c.className=l.actionbar,d?.appendChild(c),this.actionbar=c}i.forEach(function(h){return s.addAction(h)})}return t.styleWithCSS&&this.exec("styleWithCSS"),this}return a.prototype.isCustom=function(r){var e=r||this.em.RichTextEditor;return!!(e?.config.custom||e?.customRte)},a.prototype.destroy=function(){},a.prototype.setEl=function(r){this.el=r,this.doc=r.ownerDocument},a.prototype.updateActiveActions=function(){var r=this,e=this.getActions();e.forEach(function(t){var s=t.update,o=t.btn,i=r.classes,l=i.active,c=i.inactive,d=i.disabled,h=t.state,m=t.name,y=r.doc,x=Kv.INACTIVE;if(o&&(o.className=o.className.replace(l,"").trim(),o.className=o.className.replace(c,"").trim(),o.className=o.className.replace(d,"").trim()),h){var b=h(r,y);if(x=b,o)switch(b){case Zf.ACTIVE:o.className+=" ".concat(l);break;case Zf.INACTIVE:o.className+=" ".concat(c);break;case Zf.DISABLED:o.className+=" ".concat(d);break}}else y.queryCommandSupported(m)&&y.queryCommandState(m)&&(o&&(o.className+=" ".concat(l)),x=Kv.ACTIVE);t.currentState=x,s?.(r,t)}),e.length&&this.em.RichTextEditor.__dbdTrgCustom()},a.prototype.enable=function(r){return this.enabled?this:this.__toggleEffects(!0,r)},a.prototype.disable=function(){return this.__toggleEffects(!1)},a.prototype.__toggleEffects=function(r,e){r===void 0&&(r=!1),e===void 0&&(e={});var t=r?Ir.on:Ir.AU,s=this,o=s.el,i=s.doc,l=this.actionbarEl();if(l&&(l.style.display=r?"":"none"),o.contentEditable="".concat(!!r),t(o,"mouseup keyup",this.updateActiveActions),t(i,"keydown",this.__onKeydown),t(i,"paste",this.__onPaste),this.enabled=r,r){var c=e.event;if(this.syncActions(),this.updateActiveActions(),c){var d=null;if(i.caretRangeFromPoint){var h=(0,Ir.G2)(c);d=i.caretRangeFromPoint(h.clientX,h.clientY)}else c.rangeParent&&(d=i.createRange(),d.setStart(c.rangeParent,c.rangeOffset));var m=i.getSelection();m?.removeAllRanges(),d&&m?.addRange(d)}o.focus()}return this},a.prototype.__onKeydown=function(r){var e=this.em,t=e.RichTextEditor.getConfig().onKeydown;if(t)return t({ev:r,rte:this,editor:e.getEditor()});var s=this.doc,o=["insertOrderedList","insertUnorderedList"];r.key==="Enter"&&!o.some(function(i){return s.queryCommandState(i)})&&(s.execCommand("insertLineBreak"),r.preventDefault())},a.prototype.__onPaste=function(r){var e=this.em,t=e.RichTextEditor.getConfig().onPaste;if(t)return t({ev:r,rte:this,editor:e.getEditor()});var s=r.clipboardData,o=s.getData("text"),i=s.getData("text/html");if(o&&!i){r.preventDefault();var l=o.replace(/(?:\r\n|\r|\n)/g,"<br/>");this.doc.execCommand("insertHTML",!1,l)}},a.prototype.syncActions=function(){var r=this;this.getActions().forEach(function(e){if(r.actionbar&&(!e.state||e.state&&e.state(r,r.doc)>=0)){var t=e.event||"click",s=e.btn;s&&(s["on".concat(t)]=function(){e.result(r,e),r.updateActiveActions()})}})},a.prototype.addAction=function(r,e){e===void 0&&(e={});var t=e.sync,s=this.actionbarEl();if(s){var o=r.icon,i=r.attributes,l=i===void 0?{}:i,c=document.createElement("span");c.className=this.classes.button,r.btn=c;for(var d in l)c.setAttribute(d,l[d]);typeof o=="string"?c.innerHTML=o:c.appendChild(o),s.appendChild(c)}t&&(this.actions.push(r),this.syncActions())},a.prototype.getActions=function(){return this.actions},a.prototype.selection=function(){return this.doc.getSelection()},a.prototype.exec=function(r,e){this.doc.execCommand(r,!1,e)},a.prototype.actionbarEl=function(){return this.actionbar},a.prototype.insertHTML=function(r,e){var t=e===void 0?{}:e,s=t.select,o=this,i=o.em,l=o.doc,c=o.el,d=l.getSelection();if(d&&d.rangeCount){var h=(0,Zt.getComponentModel)(c)||i.getSelected(),m=l.createElement("div"),y=d.getRangeAt(0);y.deleteContents(),(0,Ce.isString)(r)?m.innerHTML=r:r&&m.appendChild(r),Array.prototype.slice.call(m.childNodes).forEach(function(x){y.insertNode(x)}),d.removeAllRanges(),d.addRange(y),c.focus(),s&&h&&(h.once("rte:disable",function(){var x=h.find("[".concat(Yv,"]"))[0];x&&(i.setSelected(x),x.removeAttributes(Yv))}),h.trigger("disable"))}},a})();const oZ=sZ;var PC;(function(a){a.enable="rte:enable",a.disable="rte:disable",a.custom="rte:custom"})(PC||(PC={}));var iZ=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Zv=function(){return Zv=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Zv.apply(this,arguments)},Jj=function(a,r,e,t){function s(o){return o instanceof e?o:new e(function(i){i(o)})}return new(e||(e=Promise))(function(o,i){function l(h){try{d(t.next(h))}catch(m){i(m)}}function c(h){try{d(t.throw(h))}catch(m){i(m)}}function d(h){h.done?o(h.value):s(h.value).then(l,c)}d((t=t.apply(a,r||[])).next())})},e1=function(a,r){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},t,s,o,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(d){return function(h){return c([d,h])}}function c(d){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,d[0]&&(e=0)),e;)try{if(t=1,s&&(o=d[0]&2?s.return:d[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,d[1])).done)return o;switch(s=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return e.label++,{value:d[1],done:!1};case 5:e.label++,s=d[1],d=[0];continue;case 7:d=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){e=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){e.label=d[1];break}if(d[0]===6&&e.label<o[1]){e.label=o[1],o=d;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(d);break}o[2]&&e.ops.pop(),e.trys.pop();continue}d=r.call(a,e)}catch(h){d=[6,h],s=0}finally{t=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},lZ=function(a,r,e){if(e||arguments.length===2)for(var t=0,s=r.length,o;t<s;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return a.concat(o||Array.prototype.slice.call(r))},t1="".concat(Xg.refresh," frame:scroll ").concat(ja.I.update),cZ=(function(a){iZ(r,a);function r(e){var t=a.call(this,e,"RichTextEditor",aZ())||this;t.events=PC;var s=t.config,o=s.pStylePrefix;o&&(s.stylePrefix=o+s.stylePrefix),t.pfx=s.stylePrefix,t.actions=s.actions||[];var i=new Sr.Kx;return t.model=i,i.on("change:currentView",t.__trgCustom,t),t.__dbdTrgCustom=(0,Ce.debounce)(function(){return t.__trgCustom()},0),t}return r.prototype.onLoad=function(){if((0,Zt.hasWin)()){var e=this.config,t=e.pStylePrefix,s=e.custom,o=(0,Ir.a_)("div",{class:(0,Ir.cx)("".concat(t,"rte-toolbar"),!s&&"".concat(t,"one-bg ").concat(t,"rte-toolbar-ui"))});this.toolbar=o,this.initRte((0,Ir.a_)("div")),(0,Ir.on)(o,"mousedown",function(i){return i.stopPropagation()})}},r.prototype.__trgCustom=function(){var e=this,t=e.model,s=e.em,o=e.events;s.trigger(o.custom,{enabled:!!t.get("currentView"),container:this.getToolbarEl(),actions:this.getAll()})},r.prototype.destroy=function(){var e,t,s;(e=this.globalRte)===null||e===void 0||e.destroy(),(s=(t=this.customRte)===null||t===void 0?void 0:t.destroy)===null||s===void 0||s.call(t),this.model.stopListening().clear({silent:!0}),this.__dbdTrgCustom.cancel(),(0,Ir.YZ)(this.toolbar)},r.prototype.postRender=function(e){var t=e.model.get("Canvas");this.toolbar.style.pointerEvents="all",this.hideToolbar(),t.getToolsEl().appendChild(this.toolbar)},r.prototype.initRte=function(e){var t=this.globalRte,s=this,o=s.em,i=s.pfx,l=s.actionbar,c=s.config,d=this.actions||lZ([],c.actions,!0),h={actionbar:"".concat(i,"actionbar"),button:"".concat(i,"action"),active:"".concat(i,"active"),inactive:"".concat(i,"inactive"),disabled:"".concat(i,"disabled")};return t?(t.em=o,t.setEl(e)):(t=new oZ(o,e,{classes:h,actions:d,actionbar:l,actionbarContainer:this.toolbar,module:this}),this.globalRte=t),t.actionbar&&(this.actionbar=t.actionbar),t.actions&&(this.actions=t.actions),t},r.prototype.add=function(e,t){var s;t===void 0&&(t={}),t.name=e,(s=this.globalRte)===null||s===void 0||s.addAction(t,{sync:!0})},r.prototype.get=function(e){var t,s;return(t=this.globalRte)===null||t===void 0||t.getActions().forEach(function(o){o.name==e&&(s=o)}),s},r.prototype.getAll=function(){var e;return((e=this.globalRte)===null||e===void 0?void 0:e.getActions())||[]},r.prototype.remove=function(e){var t,s=this.getAll(),o=this.get(e);if(o){var i=o.btn,l=s.indexOf(o);(t=i?.parentNode)===null||t===void 0||t.removeChild(i),s.splice(l,1)}return o},r.prototype.run=function(e){var t=this.globalRte,s=(0,Ce.isString)(e)?this.get(e):e;t&&s&&(s.result(t,s),t.updateActiveActions())},r.prototype.getToolbarEl=function(){return this.toolbar},r.prototype.updatePosition=function(){var e=this,t=e.em,s=e.toolbar,o="px",i=t.Canvas,l=s.style,c=i.getTargetToElementFixed(this.lastEl,s,{event:"rteToolbarPosUpdate",left:0});["top","left","bottom","right"].forEach(function(d){var h=c[d];(0,Zt.isDef)(h)&&(l[d]=(0,Ce.isString)(h)?h:(h||0)+o)})},r.prototype.enable=function(e,t,s){return Jj(this,void 0,void 0,function(){var o,i,l,c,d,h;return e1(this,function(m){switch(m.label){case 0:return this.lastEl=e.el,o=this,i=o.customRte,l=o.em,c=o.events,d=e.getChildrenContainer(),this.toolbar.style.display="",[4,i?i.enable(d,t,s):this.initRte(d).enable(s)];case 1:return h=m.sent(),l&&(setTimeout(this.updatePosition.bind(this),0),l.off(t1,this.updatePosition,this),l.on(t1,this.updatePosition,this),l.trigger(c.enable,e,h)),this.model.set({currentView:e}),[2,h]}})})},r.prototype.getContent=function(e,t){return Jj(this,void 0,void 0,function(){var s,o;return e1(this,function(i){switch(i.label){case 0:return s=this.customRte,o=e.getChildrenContainer(),s&&t&&(0,Ce.isFunction)(s.getContent)?[4,s.getContent(o,t,{view:e})]:[3,2];case 1:return[2,i.sent()];case 2:return[2,o.innerHTML]}})})},r.prototype.hideToolbar=function(){var e=this.toolbar.style,t="-1000px";e.top=t,e.left=t,e.display="none"},r.prototype.disable=function(e,t){return Jj(this,arguments,void 0,function(s,o,i){var l,c,d,h,m,y;return i===void 0&&(i={}),e1(this,function(x){switch(x.label){case 0:return l={},c=this,d=c.em,h=c.events,m=this.customRte,m?[4,m.disable(s.getChildrenContainer(),o,Zv(Zv({},i),{view:s}))]:[3,2];case 1:return y=x.sent(),y&&(l=y),[3,3];case 2:o&&o.disable(),x.label=3;case 3:return this.hideToolbar(),d&&(d.off(t1,this.updatePosition,this),!i.fromMove&&d.trigger(h.disable,s,o)),this.model.unset("currentView"),[2,l]}})})},r})(Ai);const dZ=cZ;var uZ=function(){return{sectors:[{name:"General",open:!1,properties:["display","float","position","top","right","left","bottom"]},{name:"Flex",open:!1,properties:["flex-direction","flex-wrap","justify-content","align-items","align-content","order","flex-basis","flex-grow","flex-shrink","align-self"]},{name:"Dimension",open:!1,properties:["width","height","max-width","min-height","margin","padding"]},{name:"Typography",open:!1,properties:["font-family","font-size","font-weight","letter-spacing","color","line-height","text-align","text-shadow"]},{name:"Decorations",open:!1,properties:["background-color","border-radius","border","box-shadow","background"]},{name:"Extra",open:!1,properties:["opacity","transition","transform"]}],appendTo:"",stylePrefix:"sm-",custom:!1,hideNotStylable:!0,highlightChanged:!0,highlightComputed:!0,showComputed:!0,clearProperties:!0,avoidComputed:["width","height"]}};const fZ=uZ;var pZ=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),ti=function(){return ti=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},ti.apply(this,arguments)},hZ=function(a,r){var e={};for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&r.indexOf(t)<0&&(e[t]=a[t]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(a);s<t.length;s++)r.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(a,t[s])&&(e[t[s]]=a[t[s]]);return e},S_=function(a,r,e){if(e||arguments.length===2)for(var t=0,s=r.length,o;t<s;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return a.concat(o||Array.prototype.slice.call(r))},WS=(function(a){pZ(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.getDefaults=function(){return(0,Ce.result)(this.prototype,"defaults")},r.prototype.defaults=function(){return{name:"",property:"",type:"",defaults:"",info:"",value:"",icon:"",functionName:"",status:"",visible:!0,fixedValues:["initial","inherit"],full:!1,important:!1,toRequire:!1,requires:void 0,requiresParent:null,parentTarget:null}},r.prototype.initialize=function(e,t){e===void 0&&(e={}),t===void 0&&(t={}),this.em=t.em;var s=this.getId()||"",o=this.get("name")||this.get("label")||"";!this.get("property")&&this.set("property",(o||s).replace(/ /g,"-"));var i=this.get("property");!this.get("id")&&this.set("id",i),!o&&this.set("name",(0,Zt.capitalize)(i).replace(/-/g," ")),this.on("change",this.__upTargets),r.callInit(this,e,t)},r.prototype.__getParentProp=function(){var e,t;return(t=(e=this.collection)===null||e===void 0?void 0:e.opts)===null||t===void 0?void 0:t.parentProp},r.prototype.__upTargets=function(e,t){var s,o=this;t===void 0&&(t={});var i=this.em,l=i.Styles,c=this.getName(),d=t.__clear,h=d?"":this.__getFullValue(t),m=this.__getParentProp(),y=this.changedAttributes(),x=(0,Ce.keys)(y).reduce(function(N,P){return N[P]=o.previous(P),N},{}),b=S_(S_([],(0,Ce.keys)(this.__getClearProps()),!0),["__p"],!1),v=(0,Ce.keys)(y),j=!t.__up&&!m&&(d||b.some(function(N){return v.indexOf(N)>=0})),S=this.get("onChange"),k={property:this,from:x,to:y,value:h,opts:t};l.__trgEv(l.events.propertyUpdate,k),S&&S(k),j&&this.__upTargetsStyle((s={},s[c]=h,s),t)},r.prototype.__upTargetsStyle=function(e,t){var s,o=(s=this.em)===null||s===void 0?void 0:s.get("StyleManager");o?.addStyleTargets(ti(ti({},e),{__p:!!t.avoidStore}),t)},r.prototype._up=function(e,t){t===void 0&&(t={}),t.noTarget&&(t.__up=!0);var s=t.partial,o=hZ(t,["partial"]);return e.__p=!!(o.avoidStore||s),this.set(e,ti(ti({},o),{avoidStore:e.__p}))},r.prototype.up=function(e,t){t===void 0&&(t={}),this.set(e,ti(ti({},t),{__up:!0}))},r.prototype.init=function(){},r.prototype.getId=function(){return this.get("id")},r.prototype.getType=function(){return this.get("type")},r.prototype.getName=function(){return this.get("property")},r.prototype.getLabel=function(e){var t;e===void 0&&(e={});var s=e.locale,o=s===void 0?!0:s,i=this.getId(),l=this.get("name")||this.get("label");return o&&((t=this.em)===null||t===void 0?void 0:t.t("styleManager.properties.".concat(i)))||l},r.prototype.getValue=function(e){e===void 0&&(e={});var t=e.noDefault,s=this.get("value");return!this.hasValue()&&!t?this.getDefaultValue():s},r.prototype.hasValue=function(e){e===void 0&&(e={});var t=e.noParent,s=t&&this.getParentTarget(),o=this.get("value");return!(0,Ce.isUndefined)(o)&&o!==""&&!s},r.prototype.hasValueParent=function(){return this.hasValue()&&!this.hasValue({noParent:!0})},r.prototype.getStyle=function(e){var t;e===void 0&&(e={});var s=this.getName(),o=e.camelCase?(0,Zt.camelCase)(s):s;return t={},t[o]=this.__getFullValue(e),t},r.prototype.getDefaultValue=function(){var e=this.get("default");return"".concat((0,Ce.isUndefined)(e)?this.get("defaults"):e)},r.prototype.upValue=function(e,t){t===void 0&&(t={});var s=e===null||e===""?this.__getClearProps():this.__parseValue(e,t);return this._up(s,t)},r.prototype.isVisible=function(){return!!this.get("visible")},r.prototype.clear=function(e){return e===void 0&&(e={}),this._up(this.__getClearProps(),ti(ti({},e),{__clear:!0})),this},r.prototype.canClear=function(){var e=this.getParent();return e?e.__canClearProp(this):this.hasValue({noParent:!0})},r.prototype.getParent=function(){return this.__getParentProp()},r.prototype.isFull=function(){return!!this.get("full")},r.prototype.__parseValue=function(e,t){return this.parseValue(e,t)},r.prototype.__getClearProps=function(){return{value:"",important:!1}},r.prototype.setValue=function(e,t,s){t===void 0&&(t=!0),s===void 0&&(s={});var o=this.parseValue(e),i=!t;!i&&this.set({value:void 0},{avoidStore:i,silent:!0}),this.set(o,ti({avoidStore:i},s))},r.prototype.setValueFromInput=function(e,t,s){s===void 0&&(s={}),this.setValue(e,t,ti(ti({},s),{fromInput:1}))},r.prototype.parseValue=function(e,t){t===void 0&&(t={});var s={value:e},o="!important",i=this.get("functionName")||"";if((0,Ce.isString)(e)&&e.indexOf(o)!==-1&&(s.value=e.replace(o,"").trim(),s.important=!0),!i&&!t.complete)return s;var l=[],c="".concat(s.value).trim(),d=c.indexOf("(")+1,h=i||c.substring(0,d-1);if(h&&(s.functionName=h),!i||c.indexOf("".concat(i,"("))===0){var m=c.lastIndexOf(")");l.push(d),m>=0&&l.push(m),s.value=String.prototype.substring.apply(c,l)}if(t.numeric){var y=parseFloat(s.value);s.unit=s.value.replace(y,""),s.value=y}return s},r.prototype.__getFullValue=function(e){var t=e===void 0?{}:e,s=t.withDefault;return!this.hasValue()&&s?this.getDefaultValue():this.getFullValue()},r.prototype.getFullValue=function(e,t){t===void 0&&(t={});var s=this.get("functionName"),o=this.getDefaultValue(),i=(0,Ce.isUndefined)(e)?this.get("value"):e,l=this.hasValue();if(i&&o&&i===o)return o;if(s&&l){var c=s==="url"?"'".concat(i.replace(/'|"/g,""),"'"):i;i="".concat(s,"(").concat(c,")")}return l&&this.get("important")&&!t.skipImportant&&(i="".concat(i," !important")),i||""},r.prototype.__setParentTarget=function(e){this.up({parentTarget:e})},r.prototype.getParentTarget=function(){return this.get("parentTarget")||null},r.prototype.__parseFn=function(e){e===void 0&&(e="");var t=e.indexOf("(")+1,s=e.lastIndexOf(")");return{name:e.substring(0,t-1).trim(),value:String.prototype.substring.apply(e,[t,s>=0?s:void 0]).trim()}},r.prototype.__checkVisibility=function(e){var t=e.target,s=e.component,o=e.sector,i=e.sectors,l=s||t;if(!l)return!1;var c=this.getId(),d=this.getName(),h=this.attributes,m=h.requires,y=h.requiresParent,x=h.toRequire,b=h.isVisible,v=l.get("unstylable"),j=l.get("stylable-require"),S=l.get("stylable");if((0,Ce.isFunction)(b))return!!b({property:this,sector:o,target:t,component:s});if((0,Ce.isArray)(S)&&(S=S.indexOf(d)>=0),(0,Ce.isArray)(v)&&(S=v.indexOf(d)<0),x&&(S=!t||j&&(j.indexOf(c)>=0||j.indexOf(d)>=0)),i&&m){var k=(0,Ce.keys)(m);i.forEach(function(F){F.getProperties().forEach(function(z){if((0,Ce.includes)(k,z.id)){var H=m[z.id];S=S&&(0,Ce.includes)(H,z.get("value"))}})})}if(y){var N=s&&s.parent(),P=N&&N.getEl();if(P){var R=(0,Zt.hasWin)()?window.getComputedStyle(P):{};(0,Ce.each)(y,function(F,z){S=S&&R[z]&&(0,Ce.includes)(F,R[z])})}else S=!1}return!!S},r})(Sr.Kx);const ys=WS;WS.callParentInit=function(a,r,e,t){t===void 0&&(t={}),a.prototype.initialize.apply(r,[e,ti(ti({},t),{skipInit:1})])};WS.callInit=function(a,r,e){e===void 0&&(e={}),!e.skipInit&&a.init(r,e)};var mZ=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Eh=function(){return Eh=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Eh.apply(this,arguments)},N_=function(a,r,e){if(e||arguments.length===2)for(var t=0,s=r.length,o;t<s;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return a.concat(o||Array.prototype.slice.call(r))},WO=function(a){return a==="integer"||a==="number"},gZ=(function(a){mZ(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.defaults=function(){return Eh(Eh({},ys.getDefaults()),{detached:!1,properties:[],separator:" ",join:null,fromStyle:null,toStyle:null,full:!0})},r.prototype.initialize=function(e,t){e===void 0&&(e={}),t===void 0&&(t={}),ys.callParentInit(ys,this,e,t);var s=this.em,o=new qS(this.get("properties")||[],{em:s,parentProp:this});this.set("properties",o,{silent:!0}),this.listenTo(o,"change",this.__upProperties),ys.callInit(this,e,t)},Object.defineProperty(r.prototype,"properties",{get:function(){return this.get("properties")||[]},enumerable:!1,configurable:!0}),r.prototype.getProperties=function(){return N_([],this.get("properties").models,!0)},r.prototype.getProperty=function(e){return this.properties.filter(function(t){return t.getId()===e||t.getName()===e})[0]},r.prototype.getPropertyAt=function(e){return this.get("properties").at(e)},r.prototype.isDetached=function(){return!!this.get("detached")},r.prototype.getValues=function(e){var t=e===void 0?{}:e,s=t.byName;return this.getProperties().reduce(function(o,i){var l=s?i.getName():i.getId();return o[l]="".concat(i.__getFullValue()),o},{})},r.prototype.getSeparator=function(){return this.getSplitSeparator()},r.prototype.getJoin=function(){return this.__getJoin()},r.prototype.getStyleFromProps=function(e){var t;e===void 0&&(e={});var s=this.getName(),o=this.__getJoin(),i=this.get("toStyle"),l=this.getValues(),c={};if(i)c=i(l,{join:o,name:s,property:this});else if(l=this.getValues({byName:!0}),this.isDetached())c=l;else{var d=this.getProperties().map(function(h){return h.__getFullValue({withDefault:1})}).filter(Boolean).join(o);c=(t={},t[s]=d,t)}return this.isDetached()?c[s]="":(c[s]=c[s]||"",c=Eh(Eh({},c),this.getProperties().reduce(function(h,m){return h[m.getName()]="",h},{}))),e.camelCase?Object.keys(c).reduce(function(h,m){return h[(0,Zt.camelCase)(m)]=c[m],h},{}):c},r.prototype.getSplitSeparator=function(){return new RegExp("".concat(this.get("separator"),"(?![^\\(]*\\))"))},r.prototype.__upProperties=function(e,t){if(t===void 0&&(t={}),!(t.__up||t.__clearIn)){var s=this.__getParentProp();if(s)return s.__upProperties(this,t);this.__upTargetsStyleProps(t,e)}},r.prototype.__upTargetsStyleProps=function(e,t){var s;e===void 0&&(e={});var o=this.getStyleFromProps();if(this.isDetached()&&t){var i=t.getName();o=(s={},s[i]=o[i],s)}this.__upTargetsStyle(o,e)},r.prototype._up=function(e,t){return t===void 0&&(t={}),this.__setProperties(this.__getSplitValue(e.value),t),ys.prototype._up.call(this,e,t),this},r.prototype.getStyle=function(e){return this.getStyleFromProps(e)},r.prototype.__getFullValue=function(e){if(e===void 0&&(e={}),this.isDetached()||e.__clear)return"";var t=this.getStyleFromProps()[this.getName()]||"";return rC(t)},r.prototype.__getJoin=function(){var e=this.get("join");return(0,Ce.isString)(e)?e:this.get("separator")},r.prototype.__styleHasProps=function(e){e===void 0&&(e={});var t=this.getName(),s=this.getProperties(),o=s.map(function(l){return l.getName()}),i=N_([t],o,!0);return i.some(function(l){return!(0,Ce.isUndefined)(e[l])&&e[l]!==""})},r.prototype.__splitValue=function(e,t){return rC(e).split(t).map(function(s){return s.trim()}).filter(Boolean)},r.prototype.__splitStyleName=function(e,t,s){var o=e[t];return this.__splitValue(o||"",s)},r.prototype.__getSplitValue=function(e,t){e===void 0&&(e="");var s=t===void 0?{}:t,o=s.byName,i=this.getProperties(),l=i.length===4&&i.every(function(h){return WO(h.getType())}),c=this.__splitValue(e,this.getSplitSeparator()),d={};return i.forEach(function(h,m){var y=c[m],x=(0,Ce.isUndefined)(y)?"":y;if(l){var b=c.length;x=c[m]||c[m%b+(b!=1&&b%2?1:0)]||x}var v=o?h.getName():h.getId();d[v]=x||""}),d},r.prototype.__getPropsFromStyle=function(e,t){if(e===void 0&&(e={}),t===void 0&&(t={}),!this.__styleHasProps(e))return null;var s=t.byName,o=this.getName(),i=this.getProperties(),l=this.getSplitSeparator(),c=this.get("fromStyle"),d=c?c(e,{property:this,name:o,separator:l}):{};if(!c){var h=e[o];d=this.__getSplitValue(h||"",{byName:s}),i.forEach(function(m){var y=e[m.getName()],x=s?m.getName():m.getId();!(0,Ce.isUndefined)(y)&&y!==""&&(d[x]=y)})}return d},r.prototype.__setProperties=function(e,t){e===void 0&&(e={}),t===void 0&&(t={}),this.getProperties().forEach(function(o){var i=e[o.getId()];o.__getFullValue()!==i&&o.upValue(i,t)});var s=(0,Ce.keys)(e).map(function(o){return e[o]}).join(" ");this.set("value",s,{silent:!0})},r.prototype.clear=function(){var e=this;return this.getProperties().map(function(t){return t.clear({__clearIn:!e.isDetached()})}),ys.prototype.clear.call(this),this},r.prototype.hasValue=function(e){return this.getProperties().some(function(t){return t.hasValue(e)})},r.prototype.getFullValue=function(){return this.__getFullValue()},r.prototype.__canClearProp=function(e){return this.isDetached()&&e.hasValue({noParent:!0})},r})(ys);const fh=gZ;var yZ=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),ji=function(){return ji=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},ji.apply(this,arguments)},xZ=function(a,r){var e={};for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&r.indexOf(t)<0&&(e[t]=a[t]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(a);s<t.length;s++)r.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(a,t[s])&&(e[t[s]]=a[t[s]]);return e},vZ=/,(?![^\(]*\))/,bZ=/\s(?![^(]*\))/,wZ=(function(a){yZ(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.defaults=function(){return ji(ji({},fh.getDefaults()),{layers:[],emptyValue:"unset",layerSeparator:", ",layerJoin:"",prepend:0,preview:!1,layerLabel:null,selectedLayer:null})},r.prototype.initialize=function(e,t){e===void 0&&(e={}),t===void 0&&(t={}),fh.callParentInit(fh,this,e,t);var s=this.get("layers"),o=new W0(s,{prop:this});o.property=this,o.properties=this.get("properties"),this.set("layers",o,{silent:!0}),this.on("change:selectedLayer",this.__upSelected),this.listenTo(o,"add remove",this.__upLayers),fh.callInit(this,e,t)},Object.defineProperty(r.prototype,"layers",{get:function(){return this.get("layers")},enumerable:!1,configurable:!0}),r.prototype.getLayers=function(){return this.layers.models},r.prototype.hasLayers=function(){return this.getLayers().length>0},r.prototype.getLayer=function(e){return e===void 0&&(e=0),this.layers.at(e)||void 0},r.prototype.getSelectedLayer=function(){var e=this.get("selectedLayer");return e&&e.getIndex()>=0?e:void 0},r.prototype.selectLayer=function(e){return this.set("selectedLayer",e,{__select:!0})},r.prototype.selectLayerAt=function(e){e===void 0&&(e=0);var t=this.getLayer(e);return t&&this.selectLayer(t)},r.prototype.moveLayer=function(e,t){t===void 0&&(t=0);var s=this.layers,o=e?e.getIndex():-1;o>=0&&(0,Ce.isNumber)(t)&&t>=0&&t<s.length&&o!==t&&(this.removeLayer(e),s.add(e,{at:t}))},r.prototype.addLayer=function(e,t){e===void 0&&(e={}),t===void 0&&(t={});var s={};this.getProperties().forEach(function(i){var l=i.getId(),c=e[l];s[l]=(0,Ce.isUndefined)(c)?i.getDefaultValue():c});var o=this.layers.push({values:s},t);return o},r.prototype.removeLayer=function(e){return this.layers.remove(e)},r.prototype.removeLayerAt=function(e){e===void 0&&(e=0);var t=this.getLayer(e);return t?this.removeLayer(t):null},r.prototype.getLayerLabel=function(e){var t="";if(e){var s=this.get("layerLabel"),o=e.getValues(),i=e.getIndex();if(s)t=s(e,{index:i,values:o,property:this});else{var l=[];this.getProperties().map(function(c){l.push(o[c.getId()])}),t=l.filter(Boolean).join(" ")}}return t},r.prototype.getStyleFromLayer=function(e,t){var s;t===void 0&&(t={});var o=this.__getJoin(),i=this.__getJoinLayers(),l=this.get("toStyle"),c=this.getName(),d=e.getValues(),h;if(l)h=l(d,{join:o,joinLayers:i,name:c,layer:e,property:this});else{var m=this.getProperties().map(function(y){var x=y.getName(),b=d[y.getId()],v=(0,Ce.isUndefined)(b)?y.getDefaultValue():b;if(t.number&&WO(y.getType())){var j=y.parseValue(b,t.number);v="".concat(j.value).concat(j.unit)}return{name:x,value:v}});h=this.isDetached()?m.reduce(function(y,x){return y[x.name]=x.value,y},{}):(s={},s[this.getName()]=m.map(function(y){return y.value}).join(o),s)}return t.camelCase?Object.keys(h).reduce(function(y,x){return y[(0,Zt.camelCase)(x)]=h[x],y},{}):h},r.prototype.getStylePreview=function(e,t){t===void 0&&(t={});var s={},o=this.get("preview");return o&&(s=this.getStyleFromLayer(e,t)),s},r.prototype.getLayerSeparator=function(){var e=this.get("layerSeparator");return(0,Ce.isString)(e)?new RegExp("".concat(e,"(?![^\\(]*\\))")):e},r.prototype.hasEmptyValue=function(){return!this.hasLayers()&&!!this.attributes.isEmptyValue},r.prototype.__upProperties=function(e,t){var s;t===void 0&&(t={});var o=this.getSelectedLayer();o&&(o.upValues((s={},s[e.getId()]=e.__getFullValue(),s)),!t.__up&&this.__upTargetsStyleProps(t))},r.prototype.__upLayers=function(e,t,s){this.__upTargetsStyleProps(s||t)},r.prototype.__upTargets=function(e,t){if(t===void 0&&(t={}),!t.__select)return ys.prototype.__upTargets.call(this,e,t)},r.prototype.__upTargetsStyleProps=function(e){e===void 0&&(e={}),this.__upTargetsStyle(this.getStyleFromLayers(e),e)},r.prototype.__upTargetsStyle=function(e,t){return ys.prototype.__upTargetsStyle.call(this,e,t)},r.prototype.__upSelected=function(e,t){var s=e===void 0?{}:e,o=s.noEvent;t===void 0&&(t={});var i=this.em.Styles,l=this.getSelectedLayer(),c=l?.getValues();c&&this.getProperties().forEach(function(d){var h,m=(h=c[d.getId()])!==null&&h!==void 0?h:"";d.__getFullValue()!==m&&d.upValue(m,ji(ji({},t),{__up:!0}))}),!o&&i.__trgEv(i.events.layerSelect,{property:this})},r.prototype._up=function(e,t){t===void 0&&(t={});var s=e.__layers,o=s===void 0?[]:s,i=xZ(e,["__layers"]);return!this.isDetached()&&this.__setLayers(o),this.__upSelected({noEvent:!0},t),ys.prototype._up.call(this,i,t),this},r.prototype.__setLayers=function(e,t){e===void 0&&(e=[]),t===void 0&&(t={});var s=this.layers,o=e.map(function(i){return{values:i}});s.length===o.length?o.map(function(i,l){var c;return(c=s.at(l))===null||c===void 0?void 0:c.upValues(i.values)}):s.reset(o),this.set({isEmptyValue:!!t.isEmptyValue}),this.__upSelected({noEvent:!0})},r.prototype.__parseValue=function(e){var t=this,s=this.parseValue(e);return s.__layers=e.split(vZ).map(function(o){return o.trim()}).map(function(o){return t.__parseLayer(o)}).filter(Boolean),s},r.prototype.__parseLayer=function(e){var t=this.get("parseLayer"),s=e.split(bZ),o=this.getProperties();return t?t({value:e,values:s}):o.reduce(function(i,l,c){var d=s[c];return i[l.getId()]=(0,Ce.isUndefined)(d)?l.getDefaultValue():d,i},{})},r.prototype.__getLayersFromStyle=function(e){var t=this;if(e===void 0&&(e={}),!this.__styleHasProps(e))return null;if(this.isEmptyValueStyle(e))return[];var s=this.getName(),o=this.getProperties(),i=this.getLayerSeparator(),l=this.attributes.fromStyle,c=l?l(e,{property:this,name:s,separatorLayers:i}):[];if(!l){var d=this.__splitStyleName(e,s,i).map(function(h){return h.split(t.getSplitSeparator())}).map(function(h){var m={};return o.forEach(function(y,x){var b=h[x];m[y.getId()]=(0,Ce.isUndefined)(b)?y.getDefaultValue():b}),m});o.forEach(function(h){var m=h.getId();t.__splitStyleName(e,h.getName(),i).map(function(y){var x;return x={},x[m]=y||h.getDefaultValue(),x}).forEach(function(y,x){d[x]=d[x]?ji(ji({},d[x]),y):y})}),c=d}return(0,Ce.isArray)(c)?c:[c]},r.prototype.getStyle=function(e){return e===void 0&&(e={}),this.getStyleFromLayers(e)},r.prototype.getStyleFromLayers=function(e){var t=this;e===void 0&&(e={});var s={},o=this.getName(),i=this.getLayers(),l=this.getProperties(),c=i.map(function(h){return t.getStyleFromLayer(h,e)});if(c.forEach(function(h){(0,Ce.keys)(h).map(function(m){s[m]||(s[m]=[]),s[m].push(h[m])})}),(0,Ce.keys)(s).map(function(h){s[h]=s[h].join(t.__getJoinLayers())}),this.isDetached())s[o]="",!i.length&&l.map(function(h){s[h.getName()]=""});else{var d=l.reduce(function(h,m){return h[m.getName()]="",h},{});s[o]=s[o]||"",s=ji(ji({},s),d)}return ji(ji({},s),e.__clear?{}:this.getEmptyValueStyle())},r.prototype.isEmptyValueStyle=function(e){e===void 0&&(e={});var t=this.getEmptyValueStyle({force:!0}),s=(0,Ce.keys)(t);return!!s.length&&s.every(function(o){return t[o]===e[o]})},r.prototype.getEmptyValueStyle=function(e){e===void 0&&(e={});var t=this.attributes.emptyValue;if(t&&(!this.hasLayers()||e.force)){var s=this.getName(),o=this.getProperties(),i=(0,Ce.isString)(t)?t:t({property:this});if((0,Ce.isString)(i)){var l={};return this.isDetached()?o.map(function(c){l[c.getName()]=i}):l[s]=i,l}else return i}else return{}},r.prototype.__getJoinLayers=function(){var e=this.get("layerJoin"),t=this.get("layerSeparator");return e||((0,Ce.isString)(t)?t:e)},r.prototype.__getFullValue=function(){if(this.get("detached"))return"";var e=this.getStyleFromLayers();return rC(e[this.getName()])},r.prototype.hasValue=function(e){e===void 0&&(e={});var t=e.noParent,s=t&&this.getParentTarget();return(this.hasLayers()||this.hasEmptyValue())&&!s},r.prototype.clear=function(e){return e===void 0&&(e={}),this.layers.reset(),this.__upTargetsStyleProps(ji(ji({},e),{__clear:!0})),ys.prototype.clear.call(this),this},r.prototype.__canClearProp=function(){return!1},r.prototype.__getLayers=function(){return this.layers},r})(fh);const jZ=wZ;var CZ=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Xv=function(){return Xv=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Xv.apply(this,arguments)},SZ=function(a,r){var e={};for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&r.indexOf(t)<0&&(e[t]=a[t]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(a);s<t.length;s++)r.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(a,t[s])&&(e[t[s]]=a[t[s]]);return e},NZ=function(a,r,e){if(e||arguments.length===2)for(var t=0,s=r.length,o;t<s;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return a.concat(o||Array.prototype.slice.call(r))},r1="data-clear-style",kZ=(function(a){CZ(r,a);function r(e){e===void 0&&(e={});var t=a.call(this,e)||this;(0,Ce.bindAll)(t,"__change","__updateStyle");var s=e.config||{},o=s.em;t.config=s,t.em=o,t.pfx=s.stylePrefix||"",t.ppfx=s.pStylePrefix||"",t.__destroyFn=t.destroy?t.destroy.bind(t):function(){};var i=t.model;i.view=t,t.onValueChange=(0,Ce.debounce)(t.onValueChange.bind(t),10),t.updateStatus=(0,Ce.debounce)(t.updateStatus.bind(t),0),t.listenTo(i,"destroy remove",t.remove),t.listenTo(i,"change:visible",t.updateVisibility),t.listenTo(i,"change:name change:className change:full",t.render),t.listenTo(i,"change:value",t.onValueChange),t.listenTo(i,"change:parentTarget",t.updateStatus),t.listenTo(o,"change:device",t.onValueChange);var l=t.init&&t.init.bind(t);return l&&l(),t}return r.prototype.events=function(){var e;return e={change:"inputValueChanged"},e["click [".concat(r1,"]")]="clear",e},r.prototype.template=function(e){var t=this,s=t.pfx,o=t.ppfx;return`
      <div class="`.concat(s,`label" data-sm-label></div>
      <div class="`).concat(o,`fields" data-sm-fields></div>
    `)},r.prototype.templateLabel=function(e){var t=this,s=t.pfx,o=t.em,i=e.parent,l=e.attributes,c=l.icon,d=c===void 0?"":c,h=l.info,m=h===void 0?"":h,y=o?.getConfig().icons,x=y?.close||"";return`
      <span class="`.concat(s,"icon ").concat(d,'" title="').concat(m,`">
        `).concat(e.getLabel(),`
      </span>
      `).concat(i?"":'<div class="'.concat(s,'clear" style="display: none" ').concat(r1,">").concat(x,"</div>"),`
    `)},r.prototype.templateInput=function(e){return`
      <div class="`.concat(this.ppfx,`field">
        <input placeholder="`).concat(e.getDefaultValue(),`"/>
      </div>
    `)},r.prototype.remove=function(){var e=this;return Sr.Ss.prototype.remove.apply(this,arguments),["em","input","$input","view"].forEach(function(t){return e[t]=null}),this.__destroyFn(this._getClbOpts()),this},r.prototype.updateStatus=function(){var e,t=this,s=t.model,o=t.pfx,i=t.ppfx,l=t.config,c="".concat(i,"four-color"),d="".concat(i,"color-warn"),h=this.$el.children(".".concat(o,"label")),m=this.getClearEl(),y=m?m.style:{};h.removeClass("".concat(c," ").concat(d)),y.display="none",s.hasValue({noParent:!0})&&l.highlightChanged?(h.addClass(c),l.clearProperties&&(y.display="")):s.hasValue()&&l.highlightComputed&&h.addClass(d),(e=this.parent)===null||e===void 0||e.updateStatus()},r.prototype.clear=function(e){e&&e.stopPropagation(),this.model.clear()},r.prototype.getClearEl=function(){return this.clearEl||(this.clearEl=this.el.querySelector("[".concat(r1,"]"))),this.clearEl},r.prototype.inputValueChanged=function(e){e&&e.stopPropagation(),!this.emit&&this.model.upValue(e.target.value)},r.prototype.onValueChange=function(e,t,s){this.setValue(this.model.getFullValue(void 0,{skipImportant:!0})),this.updateStatus()},r.prototype.setValue=function(e){var t=this.model,s=(0,Ce.isUndefined)(e)||e===""?t.getDefaultValue():e;if(this.update)return this.__update(s);this.__setValueInput(s)},r.prototype.__setValueInput=function(e){var t=this.getInputEl();t&&(t.value=e)},r.prototype.getInputEl=function(){return this.input||(this.input=this.el.querySelector("input")),this.input},r.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},r.prototype.clearCached=function(){delete this.clearEl,delete this.input,delete this.$input},r.prototype.__unset=function(){var e=this.unset&&this.unset.bind(this);e&&e(this._getClbOpts())},r.prototype.__update=function(e){var t=this.update&&this.update.bind(this);t&&t(Xv(Xv({},this._getClbOpts()),{value:e}))},r.prototype.__change=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var s=this.emit&&this.emit.bind(this);s&&s.apply(void 0,NZ([this._getClbOpts()],e,!1))},r.prototype.__updateStyle=function(e,t){t===void 0&&(t={});var s=t.complete,o=t.partial;SZ(t,["complete","partial"]);var i=this.model,l=s!==!1&&o!==!0;(0,Zt.isObject)(e)?i.__upTargetsStyle(e,{avoidStore:!l}):i.upValue(e,{partial:!l})},r.prototype._getClbOpts=function(){var e=this,t=e.model,s=e.el,o=e.createdEl;return{el:s,createdEl:o,property:t,props:t.attributes,change:this.__change,updateStyle:this.__updateStyle}},r.prototype.render=function(){this.clearCached();var e=this,t=e.pfx,s=e.model,o=e.el,i=e.$el,l=s.getName(),c=s.getType(),d=s.get("className")||"",h="".concat(t,"property"),m=c==="number"?"".concat(t).concat(c," ").concat(t,"integer"):"".concat(t).concat(c);this.createdEl&&this.__destroyFn(this._getClbOpts()),i.empty().append(this.template(s)),i.find("[data-sm-label]").append(this.templateLabel(s));var y=this.create&&this.create.bind(this);this.createdEl=y&&y(this._getClbOpts()),i.find("[data-sm-fields]").append(this.createdEl||this.templateInput(s)),o.className="".concat(h," ").concat(m," ").concat(h,"__").concat(l," ").concat(d).trim(),o.className+=s.isFull()?" ".concat(h,"--full"):"";var x=this.onRender&&this.onRender.bind(this);return x&&x(),this.setValue(s.getValue()),this},r.prototype.onRender=function(){},r})(Sr.Ss);const Ld=kZ;var _Z=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),EZ=(function(a){_Z(r,a);function r(e){var t=a.call(this,e)||this;t.config=e.config||{},t.pfx=t.config.stylePrefix||"",t.properties=[],t.parent=e.parent;var s=t.collection;return t.listenTo(s,"add",t.addTo),t.listenTo(s,"reset",t.render),t}return r.prototype.addTo=function(e,t,s){this.add(e,null,s)},r.prototype.add=function(e,t,s){s===void 0&&(s={});var o=this,i=o.parent,l=o.config,c=t||this.el,d=new e.typeView({model:e,config:l});i&&(d.parent=i),d.render();var h=d.el;this.properties.push(d),(0,Ir.Sc)(c,h,s.at)},r.prototype.remove=function(){return Sr.Ss.prototype.remove.apply(this,arguments),this.clearItems(),this},r.prototype.clearItems=function(){this.properties.forEach(function(e){return e.remove()}),this.properties=[]},r.prototype.render=function(){var e=this,t=this,s=t.$el,o=t.pfx;this.clearItems();var i=document.createDocumentFragment();return this.collection.forEach(function(l){return e.add(l,i)}),s.empty(),s.append(i),s.attr("class","".concat(o,"properties")),this},r})(Sr.Ss);const HS=EZ;var TZ=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Qv=function(){return Qv=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Qv.apply(this,arguments)},OZ=(function(a){TZ(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.templateInput=function(){var e=this.pfx;return`
      <div class="`.concat(e,"field ").concat(e,`composite">
        <span id="`).concat(e,`input-holder"></span>
      </div>
    `)},r.prototype.remove=function(){var e;return(e=this.props)===null||e===void 0||e.remove(),Ld.prototype.remove.apply(this,arguments),this},r.prototype.onValueChange=function(){},r.prototype.onRender=function(){var e=this.pfx,t=this.model,s=t.get("properties");if(s.length&&!this.props){var o=t.isDetached(),i=new HS({config:Qv(Qv({},this.config),{highlightComputed:o,highlightChanged:o}),collection:s,parent:this});i.render(),this.$el.find("#".concat(e,"input-holder")).append(i.el),this.props=i}},r.prototype.clearCached=function(){Ld.prototype.clearCached.apply(this,arguments),delete this.props},r})(Ld);const Vg=OZ;var PZ=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),AZ=(function(a){PZ(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.events=function(){return{click:"select","click [data-close-layer]":"removeItem","mousedown [data-move-layer]":"initSorter","touchstart [data-move-layer]":"initSorter"}},r.prototype.template=function(){var e=this,t=e.pfx,s=e.ppfx,o=e.em,i=o?.getConfig().icons,l=i?.close||"",c=i?.move||"";return`
      <div class="`.concat(t,`label-wrp">
        <div id="`).concat(t,'move" class="').concat(s,`no-touch-actions" data-move-layer>
          `).concat(c,`
        </div>
        <div id="`).concat(t,`label" data-label></div>
        <div id="`).concat(t,'preview-box" class="').concat(t,`layer-preview" style="display: none" data-preview-box>
          <div id="`).concat(t,'preview" class="').concat(t,`layer-preview-cnt" data-preview></div>
        </div>
        <div id="`).concat(t,'close-layer" class="').concat(t,`btn-close" data-close-layer>
          `).concat(l,`
        </div>
      </div>
      <div id="`).concat(t,`inputs" data-properties></div>
    `)},r.prototype.initialize=function(e){e===void 0&&(e={});var t=this.model,s=e.config||{};this.em=s.em,this.config=s,this.sorter=e.sorter,this.pfx=s.stylePrefix||"",this.ppfx=s.pStylePrefix||"",this.propertyView=e.propertyView;var o=this.propertyView.model;this.listenTo(t,"destroy remove",this.remove),this.listenTo(t,"change:values",this.updateLabel),this.listenTo(o,"change:selectedLayer",this.updateVisibility),t.view=this,t.set({droppable:0,draggable:1}),this.$el.data("model",t)},r.prototype.initSorter=function(){var e;(e=this.sorter)===null||e===void 0||e.startSort([{element:this.el}])},r.prototype.removeItem=function(e){e&&e.stopPropagation(),this.model.remove()},r.prototype.select=function(){this.model.select()},r.prototype.getPropertiesWrapper=function(){return this.propsWrapEl||(this.propsWrapEl=this.el.querySelector("[data-properties]")),this.propsWrapEl},r.prototype.getPreviewEl=function(){return this.previewEl||(this.previewEl=this.el.querySelector("[data-preview]")),this.previewEl},r.prototype.getLabelEl=function(){return this.labelEl||(this.labelEl=this.el.querySelector("[data-label]")),this.labelEl},r.prototype.updateLabel=function(){var e=this.model,t=e.getLabel();if(this.getLabelEl().innerHTML=t,e.hasPreview()){var s=this.getPreviewEl(),o=e.getStylePreview({number:{min:-3,max:3}}),i=(0,Ce.keys)(o).map(function(l){return"".concat(l,":").concat(o[l])}).join(";");s.setAttribute("style",i)}},r.prototype.updateVisibility=function(){var e,t=this,s=t.pfx,o=t.model,i=t.propertyView,l=this.getPropertiesWrapper(),c=o.isSelected();l.style.display=c?"":"none",this.$el[c?"addClass":"removeClass"]("".concat(s,"active")),c&&l.appendChild((e=i.props)===null||e===void 0?void 0:e.el)},r.prototype.render=function(){var e=this,t=e.el,s=e.pfx,o=e.model;return t.innerHTML=this.template(),t.className="".concat(s,"layer"),o.hasPreview()&&(t.querySelector("[data-preview-box]").style.display=""),this.updateLabel(),this.updateVisibility(),this},r})(Sr.Ss);const MZ=AZ;var IZ=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),RZ=(function(a){IZ(r,a);function r(e){var t=a.call(this,e)||this,s=t.collection,o=e.config||{},i=o.em,l=o.stylePrefix||"",c=o.pStylePrefix||"";t.config=o,t.pfx=l,t.ppfx=c,t.propertyView=e.propertyView,t.className="".concat(l,"layers ").concat(c,"field"),t.listenTo(s,"add",t.addTo),t.listenTo(s,"reset",t.reset),t.items=[];var d=t.createPlaceholder(o.pStylePrefix);t.$el.append(d);var h=i?.Utils;return t.sorter=h?new h.StyleManagerSorter({em:i,containerContext:{container:t.el,containerSel:".".concat(l,"layers"),itemSel:".".concat(l,"layer"),pfx:o.pStylePrefix,document,placeholderElement:d},dragBehavior:{dragDirection:ip.A.Vertical,nested:!1}}):void 0,s.view=t,t.$el.data("model",s),t.$el.data("collection",s),t}return r.prototype.addTo=function(e){var t=this.collection.indexOf(e);this.addToCollection(e,null,t)},r.prototype.addToCollection=function(e,t,s){var o=t||null,i=this,l=i.propertyView,c=i.config,d=i.sorter,h=i.$el,m=new MZ({model:e,config:c,sorter:d,propertyView:l}),y=m.render().el;if(this.items.push(m),o)o.appendChild(y);else if(typeof s<"u"){var x="before";h.children().length===s&&(s--,x="after"),s<0?h.append(y):h.children().eq(s)[x](y)}else h.append(y);return y},r.prototype.reset=function(e,t){this.clearItems(),this.render()},r.prototype.remove=function(){return this.clearItems(),Sr.Ss.prototype.remove.apply(this,arguments),this},r.prototype.clearItems=function(){this.items.forEach(function(e){return e.remove()}),this.items=[]},r.prototype.render=function(){var e=this,t=this.$el,s=document.createDocumentFragment();return t.empty(),this.collection.forEach(function(o){return e.addToCollection(o,s)}),t.append(s),t.attr("class",this.className),this},r.prototype.createPlaceholder=function(e){var t=document.createElement("div"),s=document.createElement("div");return this.el.parentNode,t.className=e+"placeholder",t.style.display="none",t.style.pointerEvents="none",s.className=e+"placeholder-int",t.appendChild(s),t},r})(Sr.Ss);const LZ=RZ;var DZ=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Th=function(){return Th=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Th.apply(this,arguments)},FZ=(function(a){DZ(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.events=function(){return Th(Th({},Vg.prototype.events()),{"click [data-add-layer]":"addLayer",change:""})},r.prototype.templateInput=function(){var e=this,t=e.pfx,s=e.em,o=s?.getConfig().icons,i=o?.plus||"+";return`
      <div class="`.concat(t,"field ").concat(t,`stack">
        <button type="button" id="`).concat(t,`add" data-add-layer>
          `).concat(i,`
        </button>
        <div data-layers-wrapper></div>
      </div>
    `)},r.prototype.init=function(){var e=this.model;this.listenTo(e.layers,"change reset",this.updateStatus),this.listenTo(e,"change:isEmptyValue",this.updateStatus)},r.prototype.addLayer=function(){this.model.addLayer({},{at:0})},r.prototype.setValue=function(){},r.prototype.remove=function(){var e;return(e=this.layersView)===null||e===void 0||e.remove(),Vg.prototype.remove.apply(this,arguments),this},r.prototype.clearCached=function(){Vg.prototype.clearCached.apply(this,arguments),delete this.layersView},r.prototype.onRender=function(){var e=this,t=e.model,s=e.el,o=e.config,i=t.get("properties");if(i.length&&!this.props){var l=new HS({config:Th(Th({},o),{highlightComputed:!1,highlightChanged:!1}),collection:i,parent:this});l.render();var c=new LZ({collection:t.layers,config:o,propertyView:this});c.render();var d=s.querySelector("[data-layers-wrapper]");d.appendChild(c.el),this.props=l,this.layersView=c}},r})(Vg);const BZ=FZ;var zZ=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Jv=function(){return Jv=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Jv.apply(this,arguments)},UZ=(function(a){zZ(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.events=function(){return Jv(Jv({},Ld.prototype.events()),{"click [data-clear-asset]":"clear","click [data-open-assets]":"openAssetManager"})},r.prototype.templateInput=function(){var e,t=this,s=t.pfx,o=t.em,i=(e=this.em)===null||e===void 0?void 0:e.getConfig().icons,l=i?.close;return`
      <div class="`.concat(s,"field ").concat(s,`file">
        <div id='`).concat(s,`input-holder'>
          <div class="`).concat(s,`btn-c">
            <button class="`).concat(s,'btn" id="').concat(s,`images" type="button" data-open-assets>
              `).concat(o.t("styleManager.fileButton"),`
            </button>
          </div>
          <div style="clear:both;"></div>
        </div>
        <div id="`).concat(s,'preview-box" class="').concat(s,`preview-file" data-preview-box>
          <div id="`).concat(s,'preview-file" class="').concat(s,`preview-file-cnt" data-preview></div>
          <div id="`).concat(s,'close" class="').concat(s,'preview-file-close" data-clear-asset>').concat(l,`</div>
        </div>
      </div>
    `)},r.prototype.__setValueInput=function(e){var t=this,s=t.model,o=t.el,i=s.getDefaultValue(),l=o.querySelector("[data-preview-box]"),c=o.querySelector("[data-preview]");l.style.display=!e||e===i?"none":"",c.style.backgroundImage=e||s.getDefaultValue()},r.prototype.openAssetManager=function(){var e=this,t,s=(t=this.em)===null||t===void 0?void 0:t.Assets;s?.open({select:function(o,i){var l=(0,Ce.isString)(o)?o:o.get("src");e.model.upValue(l,{partial:!i}),i&&s.close()},types:["image"],accept:"image/*"})},r})(Ld);const $Z=UZ;var VZ=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),WZ=(function(a){VZ(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.templateInput=function(e){return""},r.prototype.init=function(){var e=this.model;this.listenTo(e,"change:unit",this.onValueChange),this.listenTo(e,"change:units",this.render)},r.prototype.setValue=function(e){},r.prototype.onRender=function(){var e=this,t=e.ppfx,s=e.model,o=e.el;if(!this.inputInst){var i=s.input;i.ppfx=t,i.render();var l=o.querySelector(".".concat(t,"fields"));l.appendChild(i.el),this.input=i.inputEl.get(0),this.inputInst=i}},r.prototype.clearCached=function(){Ld.prototype.clearCached.apply(this,arguments),this.inputInst=null},r})(Ld);const Pd=WZ;var HZ=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),qZ=(function(a){HZ(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.setValue=function(e){var t;(t=this.inputInst)===null||t===void 0||t.setValue(e,{fromTarget:1,def:this.model.getDefaultValue()})},r.prototype.remove=function(){var e=this;Pd.prototype.remove.apply(this,arguments);var t=this.inputInst;return t&&t.remove&&t.remove(),["inputInst","$color"].forEach(function(s){return e[s]=null}),this},r.prototype.__handleChange=function(e,t){this.model.upValue(e,{partial:t})},r.prototype.onRender=function(){var e;if(!this.inputInst){this.__handleChange=this.__handleChange.bind(this);var t=this,s=t.ppfx,o=t.model,i=t.em,l=t.el,c=new gO({target:i,model:o,ppfx:s,onChange:this.__handleChange}),d=c.render();l.querySelector(".".concat(s,"fields")).appendChild(d.el),this.input=(e=d.inputEl)===null||e===void 0?void 0:e.get(0),this.inputInst=d}},r})(Pd);const GZ=qZ;var KZ=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),eb=function(){return eb=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},eb.apply(this,arguments)},k_=function(a,r,e){if(e||arguments.length===2)for(var t=0,s=r.length,o;t<s;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return a.concat(o||Array.prototype.slice.call(r))},YZ=(function(a){KZ(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.defaults=function(){return eb(eb({},ys.getDefaults()),{options:[],full:0})},r.prototype.getOptions=function(){var e=this.attributes,t=e.options,s=e.list;return(t&&t.length?t:s)||[]},r.prototype.getOption=function(e){var t=this,s=(0,Zt.isDef)(e)?e:this.getValue();return this.getOptions().filter(function(o){return t.getOptionId(o)===s})[0]||null},r.prototype.setOptions=function(e){return e===void 0&&(e=[]),this.set("options",e),this},r.prototype.addOption=function(e){if(e){var t=this.getOptions();this.setOptions(k_(k_([],t,!0),[e],!1))}return this},r.prototype.getOptionId=function(e){return(0,Zt.isDef)(e.id)?e.id:e.value},r.prototype.getOptionLabel=function(e,t){var s;t===void 0&&(t={});var o=t.locale,i=o===void 0?!0:o,l=((0,Ce.isString)(e)?this.getOption(e):e)||{},c=this.getOptionId(l),d=l.label||l.name||c,h=t.property||this.getId();return i&&((s=this.em)===null||s===void 0?void 0:s.t("styleManager.options.".concat(h,".").concat(c)))||d},r.prototype.initialize=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];ys.prototype.initialize.apply(this,e),this.listenTo(this,"change:options",this.__onOptionChange)},r.prototype.__onOptionChange=function(){this.set("list",this.get("options"))},r})(ys);const AC=YZ;var ZZ=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),XZ=(function(a){ZZ(r,a);function r(e){var t=a.call(this,e)||this;return t.listenTo(t.model,"change:options",t.updateOptions),t}return r.prototype.templateInput=function(){var e=this,t=e.pfx,s=e.ppfx;return`
      <div class="`.concat(s,"field ").concat(s,`select">
        <span id="`).concat(t,`input-holder"></span>
        <div class="`).concat(s,`sel-arrow">
          <div class="`).concat(s,`d-s-arrow"></div>
        </div>
      </div>
    `)},r.prototype.updateOptions=function(){delete this.input,this.onRender()},r.prototype.onRender=function(){var e=this.pfx,t=this.model,s=t.getOptions();if(!this.input){var o=[];s.forEach(function(l){var c=t.getOptionId(l),d=t.getOptionLabel(c),h=l.style?l.style.replace(/"/g,"&quot;"):"",m=h?'style="'.concat(h,'"'):"",y=c.replace(/"/g,"&quot;");o.push('<option value="'.concat(y,'" ').concat(m,">").concat(d,"</option>"))});var i=this.el.querySelector("#".concat(e,"input-holder"));i.innerHTML="<select>".concat(o.join(""),"</select>"),this.input=i.firstChild}},r.prototype.__setValueInput=function(e){var t=this.model,s=this.getInputEl(),o=t.getOptions()[0],i=o?t.getOptionId(o):"";s&&(s.value=e||i)},r})(Ld);const HO=XZ;var QZ=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),tb=function(){return tb=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},tb.apply(this,arguments)},JZ=(function(a){QZ(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.defaults=function(){return tb(tb({},AC.getDefaults()),{full:1})},r})(AC);const eX=JZ;var tX=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),rX=(function(a){tX(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.templateInput=function(){var e=this.ppfx;return'<div class="'.concat(e,"field ").concat(e,'field-radio"></div>')},r.prototype.onRender=function(){var e=this,t=e.pfx,s=e.ppfx,o=this.model,i="".concat(s,"radio-item-label"),l=o.getName(),c=o.getOptions(),d="".concat(t,"radio ").concat(t,"radio-").concat(l),h=o.cid;if(!this.input){var m=[];c.forEach(function(x){var b=x.className?"".concat(x.className," ").concat(t,"icon ").concat(i):"",v=o.getOptionId(x),j="".concat(l,"-").concat(v,"-").concat(h),S=b?"":o.getOptionLabel(v),k=x.title?'title="'.concat(x.title,'"'):"",N=o.getValue()===v?"checked":"";m.push(`
          <div class="`.concat(s,`radio-item">
            <input type="radio" class="`).concat(d,'" id="').concat(j,'" name="').concat(l,"-").concat(h,'" value="').concat(v,'" ').concat(N,`/>
            <label class="`).concat(b||i,'" ').concat(k,' for="').concat(j,'">').concat(S,`</label>
          </div>
        `))});var y=this.el.querySelector(".".concat(s,"field"));y.innerHTML='<div class="'.concat(s,'radio-items">').concat(m.join(""),"</div>"),this.input=y.firstChild}},r.prototype.__setValueInput=function(e){var t,s=this.model,o=e||s.getDefaultValue(),i=(t=this.getInputEl())===null||t===void 0?void 0:t.querySelector('[value="'.concat(o,'"]'));i&&(i.checked=!0)},r})(HO);const nX=rX;var aX=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Hf=function(){return Hf=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Hf.apply(this,arguments)},sX=(function(a){aX(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.defaults=function(){return Hf(Hf({},ys.getDefaults()),{units:[],unit:"",min:"",max:"",step:1})},r.prototype.getUnits=function(){return this.get("units")||[]},r.prototype.getUnit=function(){return this.get("unit")},r.prototype.getMin=function(){return this.get("min")},r.prototype.getMax=function(){return this.get("max")},r.prototype.getStep=function(){return this.get("step")},r.prototype.upUnit=function(e,t){return t===void 0&&(t={}),this._up({unit:e},t)},r.prototype.initialize=function(e,t){e===void 0&&(e={}),t===void 0&&(t={}),ys.callParentInit(ys,this,e,t);var s=this.get("unit"),o=this.getUnits();this.input=(0,Zt.hasWin)()?new xO({model:this}):void 0,o.length&&!s&&this.set("unit",o[0],{silent:!0}),ys.callInit(this,e,t)},r.prototype.__getClearProps=function(){return Hf(Hf({},ys.prototype.__getClearProps()),{unit:""})},r.prototype.parseValue=function(e,t){t===void 0&&(t={});var s=ys.prototype.parseValue.apply(this,arguments),o=this.input.validateInputValue(s.value,Hf({deepCheck:1},t)),i=o.value,l=o.unit;return s.value=i,s.unit=l,s},r.prototype.getFullValue=function(){var e=this.get("value"),t=this.get("unit"),s=(0,Ce.isUndefined)(e)?"":"".concat(e),o=!(0,Ce.isUndefined)(t)&&s?t:"",i="".concat(s).concat(o);return ys.prototype.getFullValue.apply(this,[i])},r})(ys);const rb=sX;var oX=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),nb=function(){return nb=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},nb.apply(this,arguments)},iX=(function(a){oX(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.defaults=function(){return nb(nb({},rb.getDefaults()),{showInput:1})},r})(rb);const lX=iX;var cX=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),ab=function(){return ab=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},ab.apply(this,arguments)},dX=(function(a){cX(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.events=function(){return ab(ab({},Pd.prototype.events()),{"change [type=range]":"inputValueChanged","input [type=range]":"inputValueChangedSoft",change:""})},r.prototype.templateInput=function(e){var t=this.ppfx;return`
      <div class="`.concat(t,"field ").concat(t,`field-range">
        <input type="range" min="`).concat(e.get("min"),'" max="').concat(e.get("max"),'" step="').concat(e.get("step"),`"/>
      </div>
    `)},r.prototype.getSliderEl=function(){return this.slider||(this.slider=this.el.querySelector("input[type=range]")),this.slider},r.prototype.inputValueChanged=function(e){e.stopPropagation(),this.model.upValue(this.getSliderEl().value)},r.prototype.inputValueChangedSoft=function(e){e.stopPropagation(),this.model.upValue(this.getSliderEl().value,{partial:!0})},r.prototype.setValue=function(e){var t=this.model,s=t.parseValue(e);this.getSliderEl().value=e===""?t.getDefaultValue():parseFloat(s.value),Pd.prototype.setValue.apply(this,arguments)},r.prototype.onRender=function(){Pd.prototype.onRender.apply(this,arguments),this.model.get("showInput")||(this.inputInst.el.style.display="none")},r.prototype.clearCached=function(){Pd.prototype.clearCached.apply(this,arguments),delete this.slider},r})(Pd);const uX=dX;var fX=Sr.pM.extend(kO),pX=fX.extend({extendViewApi:1,init:function(){var a=this,r=a.opts,e=a.em,t=r.module||e?.get("StyleManager");t&&(t.__listenAdd(this,t.events.propertyAdd),t.__listenRemove(this,t.events.propertyRemove))},types:[{id:"stack",model:jZ,view:BZ,isType:function(a){if(a&&a.type=="stack")return a}},{id:"composite",model:fh,view:Vg,isType:function(a){if(a&&a.type=="composite")return a}},{id:"file",model:ys,view:$Z,isType:function(a){if(a&&a.type=="file")return a}},{id:"color",model:ys,view:GZ,isType:function(a){if(a&&a.type=="color")return a}},{id:"select",model:AC,view:HO,isType:function(a){if(a&&a.type=="select")return a}},{id:"radio",model:eX,view:nX,isType:function(a){if(a&&a.type=="radio")return a}},{id:"slider",model:lX,view:uX,isType:function(a){if(a&&a.type=="slider")return a}},{id:"integer",model:rb,view:Pd,isType:function(a){if(a&&a.type=="integer")return a}},{id:"number",model:rb,view:Pd,isType:function(a){if(a&&a.type=="number")return a}},{id:"base",model:ys,view:Ld,isType:function(a){return a.type="base",a}}]});const qS=pX;var Tu=function(){return Tu=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Tu.apply(this,arguments)},hX=function(a,r){var e={};for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&r.indexOf(t)<0&&(e[t]=a[t]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(a);s<t.length;s++)r.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(a,t[s])&&(e[t[s]]=a[t[s]]);return e},Mf=function(a,r,e){if(e||arguments.length===2)for(var t=0,s=r.length,o;t<s;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return a.concat(o||Array.prototype.slice.call(r))},uo=function(a){return a.map(function(r){return{id:r}})},mX=(function(){function a(){this.props={},this.typeNumber="number",this.typeColor="color",this.typeRadio="radio",this.typeSelect="select",this.typeFile="file",this.typeSlider="slider",this.typeComposite="composite",this.typeStack="stack",this.unitsSize=["px","%","em","rem","vh","vw"],this.unitsSizeNoPerc=["px","em","rem","vh","vw"],this.unitsTime=["s","ms"],this.unitsAngle=["deg","rad","grad"],this.fixedValues=["initial","inherit","auto"];var r=", sans-serif",e=["flex-start","flex-end","center"],t=Mf(Mf([],e,!0),["baseline","stretch"],!1);this.optsBgSize=uo(["auto","cover","contain"]),this.optsBgAttach=uo(["scroll","fixed","local"]),this.optsBgRepeat=uo(["repeat","repeat-x","repeat-y","no-repeat"]),this.optsWrap=uo(["nowrap","wrap","wrap-reverse"]),this.optsOverflow=uo(["visible","hidden","scroll","auto"]),this.optsDir=uo(["row","row-reverse","column","column-reverse"]),this.opstDisplay=uo(["block","inline","inline-block","flex","none"]),this.optsTransitFn=uo(["linear","ease","ease-in","ease-out","ease-in-out"]),this.optsCursor=uo(["auto","pointer","copy","crosshair","grab","grabbing","help","move","text"]),this.optsFloat=uo(["none","left","right"]),this.optsPos=uo(["static","relative","absolute","fixed"]),this.optsTextAlign=uo(["left","center","right","justify"]),this.optsFlexAlign=uo(t),this.optsJustCont=uo(Mf(Mf([],e,!0),["space-between","space-around","space-evenly"],!1)),this.optsAlignCont=uo(Mf(Mf([],e,!0),["space-between","space-around","stretch"],!1)),this.optsAlignSelf=uo(Mf(["auto"],t,!0)),this.optsTransitProp=uo(["all","width","height","background-color","transform","box-shadow","opacity"]),this.optsBorderStyle=uo(["none","solid","dotted","dashed","double","groove","ridge","inset","outset"]),this.optsBgPos=uo(["left top","left center","left bottom","right top","right center","right bottom","center top","center center","center bottom"]),this.optsWeight=[{id:"100",label:"Thin"},{id:"200",label:"Extra-Light"},{id:"300",label:"Light"},{id:"400",label:"Normal"},{id:"500",label:"Medium"},{id:"600",label:"Semi-Bold"},{id:"700",label:"Bold"},{id:"800",label:"Extra-Bold"},{id:"900",label:"Ultra-Bold"}],this.optsShadowType=[{id:"",label:"Outside"},{id:"inset",label:"Inside"}],this.optsFonts=["Arial, Helvetica"+r,"Arial Black, Gadget"+r,"Brush Script MT"+r,"Comic Sans MS, cursive"+r,"Courier New, Courier, monospace","Georgia, serif","Helvetica"+r,"Impact, Charcoal"+r,"Lucida Sans Unicode, Lucida Grande"+r,"Tahoma, Geneva"+r,"Times New Roman, Times, serif","Trebuchet MS, Helvetica"+r,"Verdana, Geneva"+r].map(function(s){return{id:s,label:s.split(",")[0]}}),this.fixedFontSizes=["medium","xx-small","x-small","small","large","x-large","xx-large","smaller","larger","length","initial","inherit"],this.fixedLetSpace=["normal","initial","inherit"],this.requireFlex={display:["flex"]},this.init()}return a.prototype.__sub=function(r){var e=this;return function(){return r.map(function(t){if((0,Ce.isString)(t))return e.get(t);var s=t.extend,o=hX(t,["extend"]);return Tu(Tu({},e.get(s)),o)})}},a.prototype.init=function(){var r=this,e=this,t=e.fixedValues,s=e.requireFlex,o=e.typeNumber;this.props={};var i=[["text-shadow-h",{type:o,default:"0",units:this.unitsSizeNoPerc}],["top",{default:"auto",units:this.unitsSize,fixedValues:t},"text-shadow-h"],["right",{},"top"],["bottom",{},"top"],["left",{},"top"],["margin-top",{default:"0"},"top"],["margin-right",{},"margin-top"],["margin-bottom",{},"margin-top"],["margin-left",{},"margin-top"],["padding-top",{min:0},"margin-top"],["padding-right",{},"padding-top"],["padding-bottom",{},"padding-top"],["padding-left",{},"padding-top"],["width",{min:0},"top"],["min-width",{},"width"],["max-width",{},"width"],["height",{},"width"],["min-height",{},"width"],["max-height",{},"width"],["flex-basis",{requiresParent:s},"width"],["font-size",{default:"medium",fixedValues:this.fixedFontSizes},"width"],["letter-spacing",{default:"normal",fixedValues:this.fixedLetSpace},"top"],["line-height",{},"letter-spacing"],["text-shadow-v",{},"text-shadow-h"],["text-shadow-blur",{min:0},"text-shadow-h"],["border-radius-c",{property:"border-radius",fixedValues:void 0},"padding-top"],["border-top-left-radius",{},"border-radius-c"],["border-top-right-radius",{},"border-radius-c"],["border-bottom-left-radius",{},"border-radius-c"],["border-bottom-right-radius",{},"border-radius-c"],["border-width",{units:this.unitsSizeNoPerc},"border-radius-c"],["box-shadow-h",{},"text-shadow-h"],["box-shadow-v",{},"text-shadow-h"],["box-shadow-blur",{default:"5px"},"text-shadow-blur"],["box-shadow-spread",{},"text-shadow-h"],["transition-duration",{default:"2s",units:this.unitsTime},"border-radius-c"],["perspective",{},"border-radius-c"],["order",{type:o,default:"0",requiresParent:s}],["flex-grow",{},"order"],["flex-shrink",{default:"1"},"order"],["float",{type:this.typeRadio,default:"none",options:this.optsFloat}],["position",{default:"static",options:this.optsPos},"float"],["text-align",{default:"left",options:this.optsTextAlign},"float"],["color",{type:this.typeColor,default:"black",full:!0}],["text-shadow-color",{},"color"],["border-color",{},"color"],["box-shadow-color",{},"color"],["background-color",{default:"none"},"color"],["background-image",{type:this.typeFile,functionName:"url",default:"none",full:!0}],["opacity",{type:this.typeSlider,default:"1",min:0,max:1,step:.01,full:!0}],["display",{type:this.typeSelect,default:"block",options:this.opstDisplay}],["flex-direction",{default:"row",options:this.optsDir,requires:s},"display"],["flex-wrap",{default:"nowrap",options:this.optsWrap},"flex-direction"],["justify-content",{default:"flex-start",options:this.optsJustCont},"flex-wrap"],["align-items",{default:"stretch",options:this.optsFlexAlign},"flex-wrap"],["align-content",{options:this.optsAlignCont},"align-items"],["align-self",{default:"auto",options:this.optsAlignSelf,requiresParent:s},"display"],["font-family",{default:"Arial, Helvetica, sans-serif",options:this.optsFonts},"display"],["font-weight",{default:"400",options:this.optsWeight},"display"],["border-style",{default:"solid",options:this.optsBorderStyle},"display"],["box-shadow-type",{default:"",options:this.optsShadowType},"display"],["background-repeat",{default:"repeat",options:this.optsBgRepeat},"display"],["background-position",{default:"left top",options:this.optsBgPos},"display"],["background-attachment",{default:"scroll",options:this.optsBgAttach},"display"],["background-size",{default:"auto",options:this.optsBgSize},"display"],["transition-property",{default:"width",options:this.optsTransitProp},"display"],["transition-timing-function",{default:"ease",options:this.optsTransitFn},"display"],["cursor",{default:"auto",options:this.optsCursor},"display"],["overflow",{default:"visible",options:this.optsOverflow},"display"],["overflow-x",{},"overflow"],["overflow-y",{},"overflow"],["margin",{type:this.typeComposite,properties:this.__sub([{extend:"margin-top",id:"margin-top-sub"},{extend:"margin-right",id:"margin-right-sub"},{extend:"margin-bottom",id:"margin-bottom-sub"},{extend:"margin-left",id:"margin-left-sub"}])}],["padding",{properties:this.__sub([{extend:"padding-top",id:"padding-top-sub"},{extend:"padding-right",id:"padding-right-sub"},{extend:"padding-bottom",id:"padding-bottom-sub"},{extend:"padding-left",id:"padding-left-sub"}])},"margin"],["border",{properties:this.__sub([{extend:"border-width",id:"border-width-sub"},{extend:"border-style",id:"border-style-sub"},{extend:"border-color",id:"border-color-sub"}])},"margin"],["border-radius",{properties:this.__sub([{extend:"border-top-left-radius",id:"border-top-left-radius-sub"},{extend:"border-top-right-radius",id:"border-top-right-radius-sub"},{extend:"border-bottom-left-radius",id:"border-bottom-left-radius-sub"},{extend:"border-bottom-right-radius",id:"border-bottom-right-radius-sub"}])},"margin"],["transition",{type:this.typeStack,properties:this.__sub([{extend:"transition-property",id:"transition-property-sub"},{extend:"transition-duration",id:"transition-duration-sub"},{extend:"transition-timing-function",id:"transition-timing-function-sub"}])}],["box-shadow",{preview:!0,layerLabel:function(l,c){var d=c.values,h=d["box-shadow-h"],m=d["box-shadow-v"],y=d["box-shadow-blur"],x=d["box-shadow-spread"];return"".concat(h," ").concat(m," ").concat(y," ").concat(x)},properties:this.__sub(["box-shadow-h","box-shadow-v","box-shadow-blur","box-shadow-spread","box-shadow-color","box-shadow-type"])},"transition"],["text-shadow",{default:"none",layerLabel:function(l,c){var d=c.values,h=d["text-shadow-h"],m=d["text-shadow-v"],y=d["text-shadow-blur"];return"".concat(h," ").concat(m," ").concat(y)},properties:this.__sub(["text-shadow-h","text-shadow-v","text-shadow-blur","text-shadow-color"])},"box-shadow"],["background",{detached:!0,layerLabel:function(l,c){var d=c.values,h=d["background-repeat-sub"]||"",m=d["background-position-sub"]||"",y=d["background-attachment-sub"]||"",x=d["background-size-sub"]||"";return[h,m,y,x].join(" ")},properties:this.__sub([{extend:"background-image",id:"background-image-sub"},{extend:"background-repeat",id:"background-repeat-sub"},{extend:"background-position",id:"background-position-sub"},{extend:"background-attachment",id:"background-attachment-sub"},{extend:"background-size",id:"background-size-sub"}])},"box-shadow"],["transform",{type:"stack",layerSeparator:" ",fromStyle:function(l,c){var d=c.property,h=c.name,m=l[h]||"",y=d.getLayerSeparator();return m?m.split(y).map(function(x){var b=d.__parseFn(x),v=b.name,j=b.value;return{"transform-type":v,"transform-value":j}}):[]},toStyle:function(l,c){var d,h=c.name;return d={},d[h]="".concat(l["transform-type"],"(").concat(l["transform-value"],")"),d},properties:[{property:"transform-type",name:"Type",type:this.typeSelect,default:"rotateZ",full:!0,options:[{id:"scaleX",propValue:{units:[""],step:.01}},{id:"scaleY",propValue:{units:[""],step:.01}},{id:"scaleZ",propValue:{units:[""],step:.01}},{id:"rotateX",propValue:{units:this.unitsAngle,step:1}},{id:"rotateY",propValue:{units:this.unitsAngle,step:1}},{id:"rotateZ",propValue:{units:this.unitsAngle,step:1}},{id:"translateX",propValue:{units:this.unitsSize,step:1}},{id:"translateY",propValue:{units:this.unitsSize,step:1}}],onChange:function(l){var c=l.property,d=l.to;if(d.value){var h=c.getOption(),m=Tu({},h.propValue||{}),y=c.getParent().getProperty("transform-value"),x=y.getUnit();(!x||m?.units.indexOf(x)<0)&&(m.unit=m?.units[0]||""),y.up(m)}}},{property:"transform-value",type:this.typeNumber,default:"0",full:!0}]}]];return i.forEach(function(l){var c=l[0],d=l[1],h=l[2];r.add(c,d||{},{from:h})}),this},a.prototype.add=function(r,e,t){e===void 0&&(e={}),t===void 0&&(t={});var s=t.from||"",o=this.props[s||r]||{},i=Tu(Tu(Tu({},o),{property:r}),e);return i.properties&&(0,Ce.isFunction)(i.properties)&&(i.properties=i.properties()),this.props[r]=i,i},a.prototype.get=function(r){return this.props[r]},a.prototype.build=function(r){var e=this,t=[],s=(0,Ce.isString)(r)?[r]:r;return s.forEach(function(o){t.push(e.get(o)||{property:o})}),t},a})();const gX=mX;var yX=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),sb=function(){return sb=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},sb.apply(this,arguments)},xX=function(a,r){var e={};for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&r.indexOf(t)<0&&(e[t]=a[t]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(a);s<t.length;s++)r.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(a,t[s])&&(e[t[s]]=a[t[s]]);return e},vX=function(a,r,e){if(e||arguments.length===2)for(var t=0,s=r.length,o;t<s;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return a.concat(o||Array.prototype.slice.call(r))},bX=(function(a){yX(r,a);function r(e,t){t===void 0&&(t={});var s=a.call(this,e)||this,o=t.em;s.em=o;var i=e||{},l=s.buildProperties(i.buildProps),c=s.get("name")||"",d=[];!s.get("id")&&s.set("id",c.replace(/ /g,"_").toLowerCase()),l?d=s.extendProperties(l):d=s.get("properties").map(function(m){return(0,Ce.isString)(m)?s.buildProperties(m)[0]:m}).filter(Boolean),d=d.map(function(m){return s.checkExtend(m)});var h=new qS(d,{em:o});return h.sector=s,s.set("properties",h),s}return r.prototype.defaults=function(){return{id:"",name:"",open:!0,visible:!0,extendBuilded:!0,properties:[]}},Object.defineProperty(r.prototype,"properties",{get:function(){return this.get("properties")},enumerable:!1,configurable:!0}),r.prototype.getId=function(){return this.get("id")},r.prototype.getName=function(){var e,t=this.getId();return((e=this.em)===null||e===void 0?void 0:e.t("styleManager.sectors.".concat(t)))||this.get("name")},r.prototype.setName=function(e){return this.set("name",e)},r.prototype.isOpen=function(){return!!this.get("open")},r.prototype.setOpen=function(e){return this.set("open",e)},r.prototype.isVisible=function(){return!!this.get("visible")},r.prototype.getProperties=function(e){e===void 0&&(e={});var t=this.properties,s=t.models?vX([],t.models,!0):t;return s.filter(function(o){var i=!0;if(e.withValue&&(i=o.hasValue({noParent:!0})),e.withParentValue){var l=o.hasValue({noParent:!0});i=!l&&o.hasValue()}return i})},r.prototype.getProperty=function(e){return this.getProperties().filter(function(t){return t.get("id")===e})[0]||void 0},r.prototype.addProperty=function(e,t){return this.properties.add(this.checkExtend(e),t)},r.prototype.extendProperties=function(e,t,s){s===void 0&&(s=!1);for(var o=e.length,i=t||this.get("properties"),l=this.get("extendBuilded"),c=[],d=0,h=i.length;d<h;d++){for(var m=i[d],y=0,x=0;x<o;x++){var b=e[x];if(m.property==b.property||m.id==b.property){var v=m.properties;v&&v.length&&(m.properties=this.extendProperties(b.properties||[],v,1)),e[x]=l?(0,Ce.extend)(b,m):m,c[x]=e[x],y=1;continue}}y||(e.push(m),c.push(m))}return s?c.filter(function(j){return j}):e},r.prototype.checkExtend=function(e){var t=((0,Ce.isString)(e)?{extend:e}:e)||{},s=t.extend,o=xX(t,["extend"]);return s?sb(sb({},this.buildProperties([s])[0]||{}),o):e},r.prototype.buildProperties=function(e){var t,s=e||[];if(!s.length)return[];var o=(t=this.em)===null||t===void 0?void 0:t.Styles.builtIn;return o?.build(s)},r})(Sr.Kx);const qO=bX;var wX=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),ob=function(){return ob=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},ob.apply(this,arguments)},jX=(function(a){wX(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.initialize=function(e,t){t===void 0&&(t={});var s=t.module,o=t.em;this.em=o,this.module=s,this.listenTo(this,"reset",this.onReset)},r.prototype.model=function(e,t){t===void 0&&(t={});var s=t.collection.em;return new qO(e,ob(ob({},t),{em:s}))},r.prototype.onReset=function(e,t){t===void 0&&(t={});var s=t.previousModels||[];s.forEach(function(o){return o.get("properties").reset()})},r})(Sr.pM);const CX=jX;var ib;(function(a){a.sectorAdd="style:sector:add",a.sectorRemove="style:sector:remove",a.sectorUpdate="style:sector:update",a.propertyAdd="style:property:add",a.propertyRemove="style:property:remove",a.propertyUpdate="style:property:update",a.target="style:target",a.layerSelect="style:layer:select",a.custom="style:custom",a.all="style"})(ib||(ib={}));var SX=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),NX=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a},kX=(function(a){SX(r,a);function r(e){var t=a.call(this,e)||this,s=e.config||{},o=t.model,i=s.em;return t.config=s,t.em=i,t.pfx=s.stylePrefix||"",t.listenTo(o,"destroy remove",t.remove),t.listenTo(o,"change:open",t.updateOpen),t.listenTo(o,"change:visible",t.updateVisibility),t}return r.prototype.template=function(e){var t,s=e.pfx,o=e.label,i=(t=this.em)===null||t===void 0?void 0:t.getConfig().icons,l=i?.caret||"",c="".concat(s,"sector-");return Ni(__||(__=NX([`
      <div class="`,`title" data-sector-title>
        <div class="`,'caret">$',`</div>
        <div class="`,'label">',`</div>
      </div>
    `],[`
      <div class="`,`title" data-sector-title>
        <div class="`,'caret">$',`</div>
        <div class="`,'label">',`</div>
      </div>
    `])),c,c,l,c,o)},r.prototype.events=function(){return{"click [data-sector-title]":"toggle"}},r.prototype.updateOpen=function(){var e=this,t=e.$el,s=e.model,o=e.pfx,i=s.isOpen();t[i?"addClass":"removeClass"]("".concat(o,"open")),this.getPropertiesEl().style.display=i?"":"none"},r.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},r.prototype.getPropertiesEl=function(){var e=this,t=e.$el,s=e.pfx;return t.find(".".concat(s,"properties")).get(0)},r.prototype.toggle=function(){var e=this.model;e.setOpen(!e.get("open"))},r.prototype.renderProperties=function(){var e=this,t=e.model,s=e.config,o=t.get("properties");if(o){var i=new HS({collection:o,config:s});this.$el.append(i.render().el)}},r.prototype.render=function(){var e=this,t=e.pfx,s=e.model,o=e.$el,i=s.getId(),l=s.getName();return o.html(this.template({pfx:t,label:l})),this.renderProperties(),o.attr("class","".concat(t,"sector ").concat(t,"sector__").concat(i," no-select")),this.updateOpen(),this},r})(Sr.Ss);const _X=kX;var __,EX=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),TX=(function(a){EX(r,a);function r(e){e===void 0&&(e={});var t=a.call(this,e)||this,s=e.module,o=e.config,i=t.collection;return t.pfx=o?.stylePrefix||"",t.ppfx=o?.pStylePrefix||"",t.config=o,t.module=s,t.listenTo(i,"add",t.addTo),t.listenTo(i,"reset",t.render),t}return r.prototype.remove=function(){var e=this;return Sr.Ss.prototype.remove.apply(this,arguments),["config","module","em"].forEach(function(t){return e[t]={}}),this},r.prototype.addTo=function(e,t,s){s===void 0&&(s={}),this.addToCollection(e,null,s)},r.prototype.addToCollection=function(e,t,s){s===void 0&&(s={});var o=this,i=o.config,l=o.el,c=t||l,d=new _X({model:e,config:i}).render().el;return(0,Ir.Sc)(c,d,s.at),d},r.prototype.render=function(){var e=this,t=this,s=t.$el,o=t.pfx,i=t.ppfx;s.empty();var l=document.createDocumentFragment();return this.collection.each(function(c){return e.addToCollection(c,l)}),s.append(l),s.addClass("".concat(o,"sectors ").concat(i,"one-bg ").concat(i,"two-color")),this},r})(Sr.Ss);const OX=TX;var PX=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Ou=function(){return Ou=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Ou.apply(this,arguments)},E_=function(a,r,e){if(e||arguments.length===2)for(var t=0,s=r.length,o;t<s;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return a.concat(o||Array.prototype.slice.call(r))},T_=function(a){return a||a===0},AX=(function(a){PX(r,a);function r(e){var t=a.call(this,e,"StyleManager",new CX([],{em:e}),ib,fZ())||this;t.events=ib,t.Sector=qO,t.storageKey="",(0,Ce.bindAll)(t,"__clearStateTarget");var s=t.events,o=t.config,i=o.pStylePrefix;i&&(o.stylePrefix=i+o.stylePrefix),t.builtIn=new gX,t.properties=new qS([],{em:e,module:t}),t.sectors=t.all;var l=new Sr.Kx({targets:[]});t.model=l;var c=ja.I.update,d="component:toggled ".concat(c,":classes change:state change:device frame:resized selector:type");t.upAll=(0,Ce.debounce)(function(){return t.__upSel()},0),l.listenTo(e,d,t.upAll),l.listenTo(e,"component:toggled",t.__clearStateTarget);var h=(0,Ce.debounce)(function(){t.__upProps(),t.__trgCustom()},0);l.listenTo(e,"styleable:change undo redo",h);var m=(0,Ce.debounce)(function(){return t.__trgCustom()},0);return l.listenTo(e,"".concat(s.layerSelect," ").concat(s.target),m),l.on("change:lastTarget",function(){return e.trigger(s.target,t.getSelected())}),t}return r.prototype.__upSel=function(){this.select(this.em.getSelectedAll())},r.prototype.__trgCustom=function(e){e===void 0&&(e={}),this.__ctn=this.__ctn||e.container,this.em.trigger(this.events.custom,{container:this.__ctn})},r.prototype.__trgEv=function(e){for(var t,s=[],o=1;o<arguments.length;o++)s[o-1]=arguments[o];(t=this.em).trigger.apply(t,E_([e],s,!1))},r.prototype.__clearStateTarget=function(){var e=this,t=this.em,s=this.__getStateTarget();s&&t?.skip(function(){t.Css.remove(s),e.model.set({stateTarget:null})})},r.prototype.onLoad=function(){this.sectors.add(this.config.sectors,{silent:!0})},r.prototype.postRender=function(){this.__appendTo()},r.prototype.addSector=function(e,t,s){s===void 0&&(s={});var o=this.getSector(e);return o||(t.id=e,o=this.sectors.add(t,s)),o},r.prototype.getSector=function(e,t){t===void 0&&(t={});var s=this.sectors.where({id:e})[0];return!s&&t.warn&&this._logNoSector(e),s||null},r.prototype.getSectors=function(e){e===void 0&&(e={});var t=this.sectors,s=t&&t.models?e.array?E_([],t.models,!0):t:[];return e.visible?s.filter(function(o){return o.isVisible()}):s},r.prototype.removeSector=function(e){return this.getSectors().remove(this.getSector(e,{warn:!0}))},r.prototype.addProperty=function(e,t,s){s===void 0&&(s={});var o=this.getSector(e,{warn:!0}),i;return o&&(i=o.addProperty(t,s)),i},r.prototype.getProperty=function(e,t){var s=this.getSector(e,{warn:!0}),o;return s&&(o=s.properties.filter(function(i){return i.get("property")===t||i.get("id")===t})[0]),o},r.prototype.getProperties=function(e){var t,s=this.getSector(e,{warn:!0});return s&&(t=s.properties),t},r.prototype.removeProperty=function(e,t){var s=this.getProperties(e);return s?s.remove(this.getProperty(e,t)):null},r.prototype.select=function(e,t){var s=this;t===void 0&&(t={});var o=this.em,i=(0,Ce.isArray)(e)?e:[e],l=t.stylable,c=o.Css,d=[];i.filter(Boolean).forEach(function(v){var j=v;if((0,Ce.isString)(v)){var S=c.getRule(v)||c.setRule(v);!(0,Ce.isUndefined)(l)&&S.set({stylable:l}),j=S}d.push(j)});var h=t.component||d.filter(function(v){return(0,Zt.isComponent)(v)}).reverse()[0];d=d.map(function(v){return s.getModelToStyle(v)});var m=o.getState(),y=d.slice().reverse()[0],x=this.getParentRules(y,{state:m,component:h}),b=this.__getStateTarget();return o.skip(function(){var v;if(m&&(!((v=y?.getState)===null||v===void 0)&&v.call(y))){var j=y.getStyle();b?b.setStyle(j):b=c.getAll().add({selectors:"gjs-selected",style:j,shallow:!0,important:!0})}else b&&(c.remove(b),b=void 0)}),this.model.set({targets:d,lastTarget:y,lastTargetParents:x,stateTarget:b,component:h}),this.__upProps(t),d},r.prototype.getSelected=function(){return this.model.get("lastTarget")},r.prototype.getSelectedAll=function(){return this.model.get("targets")},r.prototype.getSelectedParents=function(){return this.model.get("lastTargetParents")||[]},r.prototype.__getStateTarget=function(){return this.model.get("stateTarget")},r.prototype.addStyleTargets=function(e,t){this.getSelectedAll().map(function(i){return i.addStyle(e,t)});var s=this.getSelected();s&&this.__emitCmpStyleUpdate(e);var o=this.__getStateTarget();s&&o?.setStyle(s.getStyle(),t)},r.prototype.getBuiltIn=function(e){return this.builtIn.get(e)},r.prototype.getBuiltInAll=function(){return this.builtIn.props},r.prototype.addBuiltIn=function(e,t){return this.builtIn.add(e,t)},r.prototype.getModelToStyle=function(e,t){t===void 0&&(t={});var s=this.em,o=t.skipAdd;if(s&&e?.toHTML){var i=s.getConfig(),l=s.UndoManager,c=s.Css,d=s.Selectors,h=d?d.getConfig():{},m=i.devicePreviewMode?"":s.get("state"),y=e.get("classes"),x=y.getStyleable(),b=x.length,v=!h.componentFirst||t.useClasses,j={noCount:1},S={state:m,addOpts:j};l.skip(function(){var k;if(b&&v){var N=s.getCurrentMedia();k=c.get(x,m,N),!k&&!o&&(k=c.add(x,m,N,{},j))}else if(i.avoidInlineStyle){var P=e.getId();k=c.getIdRule(P,S),!k&&!o&&(k=c.setIdRule(P,{},S)),e.is("wrapper")&&k.set("wrapper",1,j)}k&&(e=k)})}return e},r.prototype.getParentRules=function(e,t){var s=t===void 0?{}:t,o=s.state,i=s.component,l=this.em,c=[];if(l&&e){var d=i,h=l.Css,m=l.CodeManager.getGenerator("css"),y=e.toHTML?e:e.getComponent(),x={array:!0},b=[],v=[],j=[],S=[],k=[],N=function(H){return H.length?h.getRules().filter(function(V){var W=V.getSelectors().map(function(Z){return Z.getFullName()});return W.length===0?!1:W.every(function(Z){return H.indexOf(Z)>=0})}):[]},P=function(H){return H?h.getRules().filter(function(V){return V.selectorsToString()===H}):[]};if(y)b=h.getRules("#".concat(y.getId())),v=P(y.get("tagName")),S=d?N(d.getSelectors().getFullName(x)):[],k=S.concat(v).concat(b);else{b=d?h.getRules("#".concat(d.getId())):[],v=P(d?.get("tagName")||"");var R=d?.getSelectors().getFullName(x)||[],F=R.filter(function(H){return e.getSelectors().getFullName(x).findIndex(function(V){return V===H})===-1});j=N(F.concat(e.getSelectors().getFullName(x))),k=v.concat(b).concat(j)}var z=k.filter(function(H){return(0,Ce.isUndefined)(o)?1:H.get("state")===o}).sort(m.sortRules).reverse();c=z.slice(z.indexOf(e)+1)}return c},r.prototype.addType=function(e,t){this.properties.addType(e,t)},r.prototype.getType=function(e){return this.properties.getType(e)},r.prototype.getTypes=function(){return this.properties.getTypes()},r.prototype.createType=function(e,t){var s=t===void 0?{}:t,o=s.model,i=o===void 0?{}:o,l=s.view,c=l===void 0?{}:l,d=this.config,h=this.getType(e);if(h)return new h.view(Ou({model:new h.model(i),config:d},c))},r.prototype.render=function(){var e=this,t=e.config,s=e.em,o=e.SectView,i=o&&o.el;return this.SectView=new OX({el:i,em:s,config:t,module:this,collection:this.sectors}),this.SectView.render().el},r.prototype._logNoSector=function(e){var t=this.em;t&&t.logWarning("'".concat(e,"' sector not found"))},r.prototype.__emitCmpStyleUpdate=function(e,t){t===void 0&&(t={});var s=this.em;if(!e.__p){var o=this.getSelectedAll(),i=t.components||s.getSelectedAll(),l=Array.isArray(i)?i:[i],c=Ou({},e);delete c.__p,l.forEach(function(d){return!o.includes(d)&&d.__onStyleChange(c)})}},r.prototype.__upProps=function(e){var t=this;e===void 0&&(e={});var s=this.getSelected();if(s){var o=this.sectors,i=this.model.get("component"),l=this.getSelectedParents(),c=s.getStyle(),d=l.map(function(h){return{target:h,style:h.getStyle()}});o.map(function(h){h.getProperties().map(function(m){t.__upProp(m,c,d,e)})}),o.forEach(function(h){var m=h.getProperties();m.forEach(function(x){var b=x.__checkVisibility({target:s,sector:h,component:i,sectors:o.models});x.set("visible",b)});var y=m.some(function(x){return x.isVisible()});h.set("visible",y)})}},r.prototype.__upProp=function(e,t,s,o){var i=this,l=e.getName(),c=t[l],d=T_(c),h=e.getType()==="stack",m=e.getType()==="composite",y=Ou(Ou({},o),{__up:!0}),x=!m&&!h,b=e,v=e,j=h?b.__getLayersFromStyle(t):[],S=m?v.__getPropsFromStyle(t):{},k=d?c:null,N=null;if(h&&j===null||m&&S===null){var P=h?"__getLayersFromStyle":"__getPropsFromStyle",R=s.filter(function(W){return b[P](W.style)!==null})[0];if(R){k=R.style[l],N=R.target;var F=b[P](R.style);h?j=F:S=F}}else if(!d){k=null;var R=s.filter(function(Z){return T_(Z.style[l])})[0];R&&(k=R.style[l],N=R.target)}if(e.__setParentTarget(N),x&&e.__getFullValue()!==k&&e.upValue(k,y),h&&b.__setLayers(j||[],{isEmptyValue:b.isEmptyValueStyle(t)}),m){var z=v.getProperties();if(v.isDetached()){var H=v.__getPropsFromStyle(t,{byName:!0})||{},V=s.map(function(W){return Ou(Ou({},W),{style:v.__getPropsFromStyle(W.style,{byName:!0})||{}})});z.map(function(W){return i.__upProp(W,H,V,o)})}else v.__setProperties(S||{},y),v.getProperties().map(function(W){return W.__setParentTarget(N)})}},r.prototype.destroy=function(){var e;[this.properties,this.sectors].forEach(function(t){t.reset(),t.stopListening()}),(e=this.SectView)===null||e===void 0||e.remove(),this.model.stopListening(),this.upAll.cancel()},r})(qd);const MX=AX;var IX=function(){return{autoloadProviders:!1}};const RX=IX;var MC;(function(a){a.currentIndex="currentIndex",a.startIndex="startIndex",a.currentItem="currentItem",a.currentKey="currentKey",a.endIndex="endIndex",a.collectionId="collectionId",a.totalItems="totalItems",a.remainingItems="remainingItems"})(MC||(MC={}));var LX=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),lb=function(){return lb=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},lb.apply(this,arguments)},DX=(function(a){LX(r,a);function r(e,t){var s=a.call(this,e,t)||this;return s.em=t,s.model=function(o,i){return i===void 0&&(i={}),new H3(o,lb(lb({},i),{em:t}))},s}return r})(Sr.pM);const FX=DX;var BX=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),Oh=function(){return Oh=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Oh.apply(this,arguments)},zX=function(a,r,e,t){function s(o){return o instanceof e?o:new e(function(i){i(o)})}return new(e||(e=Promise))(function(o,i){function l(h){try{d(t.next(h))}catch(m){i(m)}}function c(h){try{d(t.throw(h))}catch(m){i(m)}}function d(h){h.done?o(h.value):s(h.value).then(l,c)}d((t=t.apply(a,r||[])).next())})},UX=function(a,r){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},t,s,o,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(d){return function(h){return c([d,h])}}function c(d){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,d[0]&&(e=0)),e;)try{if(t=1,s&&(o=d[0]&2?s.return:d[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,d[1])).done)return o;switch(s=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return e.label++,{value:d[1],done:!1};case 5:e.label++,s=d[1],d=[0];continue;case 7:d=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){e=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){e.label=d[1];break}if(d[0]===6&&e.label<o[1]){e.label=o[1],o=d;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(d);break}o[2]&&e.ops.pop(),e.trys.pop();continue}d=r.call(a,e)}catch(h){d=[6,h],s=0}finally{t=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},$X=function(a,r){var e={};for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&r.indexOf(t)<0&&(e[t]=a[t]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(a);s<t.length;s++)r.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(a,t[s])&&(e[t[s]]=a[t[s]]);return e},VX=function(a,r,e){if(e||arguments.length===2)for(var t=0,s=r.length,o;t<s;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return a.concat(o||Array.prototype.slice.call(r))},WX=(function(a){BX(r,a);function r(e){var t=a.call(this,e,"DataSources",new FX([],e),Rd,RX())||this;return t.storageKey="dataSources",t.events=Rd,t.dataComponentTypes=qs,t.dataCollectionKeys=gy,t.dataCollectionStateTypes=MC,t.dataOperationTypes={any:yy,boolean:Gf,number:Bc,string:hl},Object.assign(t,MS.Events),t}return r.prototype.destroy=function(){},r.prototype.add=function(e,t){t===void 0&&(t={});var s=this.all;return e.id=e.id||this._createId(),s.add(e,t)},r.prototype.get=function(e){return this.all.get(e)},r.prototype.getAll=function(){return VX([],this.all.models,!0)},r.prototype.getValue=function(e,t,s){return(0,Zt.get)(s?.context||this.getContext(),e,t)},r.prototype.setValue=function(e,t){var s=this.fromPath(e);s[0];var o=s[1],i=s[2];if(o&&(i||i==="")){var l=Oh({},o.attributes);if((0,Zt.set)(l,i||"",t))return o.set(l),!0}return!1},r.prototype.getContext=function(){return this.all.reduce(function(e,t){return e[t.id]=t.records.reduce(function(s,o,i){var l=o,c=Oh({},l.attributes);return delete c.__p,s[l.id||i]=c,s},{}),e},{})},r.prototype.remove=function(e,t){return this.__remove(e,t)},r.prototype.fromPath=function(e){var t=[],s=(0,Zt.stringToPath)(e||""),o=s[0],i=s[1],l=s.slice(2),c=this.get(o),d=c?.records.get(i);return c&&t.push(c),d&&(t.push(d),l.length&&t.push(l.join("."))),t},r.prototype.store=function(){var e,t=[];return this.all.forEach(function(s){var o=s.attributes,i=o.skipFromStorage;o.transformers;var l=o.records,c=o.schema,d=$X(o,["skipFromStorage","transformers","records","schema"]);i||t.push(Oh(Oh({},d),{id:d.id,schema:(0,Ce.isEmpty)(c)?void 0:c,records:d.provider?void 0:l}))}),e={},e[this.storageKey]=t,e},r.prototype.load=function(e){var t=this,s=this,o=s.config,i=s.all,l=s.events,c=s.em,d=this.loadProjectData(e);if(o.autoloadProviders){var h=i.filter(function(y){return y.hasProvider});if(h.length){var m=function(){return zX(t,void 0,void 0,function(){var y;return UX(this,function(x){switch(x.label){case 0:return c.trigger(l.providerLoadAllBefore),y=h.map(function(b){return b.loadProvider()}),[4,Promise.all(y)];case 1:return x.sent(),c.trigger(l.providerLoadAll),[2]}})})};m()}}return d},r.prototype.postLoad=function(){var e=this,t=e.em,s=e.all;t.listenTo(s,Sr.e2,function(o,i,l){var c=l||i;t.changesUp(c,{dataSource:o,options:c})}),this.em.UndoManager.add(s)},r})(qd);const GO=WX;var HX=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),wo=function(){return wo=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},wo.apply(this,arguments)},n1=function(a,r,e,t){function s(o){return o instanceof e?o:new e(function(i){i(o)})}return new(e||(e=Promise))(function(o,i){function l(h){try{d(t.next(h))}catch(m){i(m)}}function c(h){try{d(t.throw(h))}catch(m){i(m)}}function d(h){h.done?o(h.value):s(h.value).then(l,c)}d((t=t.apply(a,r||[])).next())})},a1=function(a,r){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},t,s,o,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(d){return function(h){return c([d,h])}}function c(d){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,d[0]&&(e=0)),e;)try{if(t=1,s&&(o=d[0]&2?s.return:d[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,d[1])).done)return o;switch(s=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return e.label++,{value:d[1],done:!1};case 5:e.label++,s=d[1],d=[0];continue;case 7:d=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){e=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){e.label=d[1];break}if(d[0]===6&&e.label<o[1]){e.label=o[1],o=d;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(d);break}o[2]&&e.ops.pop(),e.trys.pop();continue}d=r.call(a,e)}catch(h){d=[6,h],s=0}finally{t=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},qX=function(a,r){var e={};for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&r.indexOf(t)<0&&(e[t]=a[t]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(a);s<t.length;s++)r.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(a,t[s])&&(e[t[s]]=a[t[s]]);return e},GX=function(a,r,e){if(e||arguments.length===2)for(var t=0,s=r.length,o;t<s;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return a.concat(o||Array.prototype.slice.call(r))};WB().$=po.default;var KX=[_K,GG,WK,rZ,QH,OG,MH,MX,aO,tY,KY,NY,dZ,kq,Yq,GU,Uq,dH,GO],YX=[GO,xG,KW,zG,MW,aO];HB({$:po.default});var O_={debug:console.log,info:console.info,warning:console.warn,error:console.error},ZX=(function(a){HX(r,a);function r(e){e===void 0&&(e={});var t=a.call(this)||this;t.Model=Sr.Kx,t.Collection=Sr.pM,t.events=ai,t.__skip=!1,t.defaultRunning=!1,t.loadTriggered=!1,t.destroyed=!1,t._isStoring=!1,t._config=e;var s=t.config;t.set("Config",e),t.set("modules",[]),t.set("toLoad",[]),t.set("storables",[]),t.set("selected",new KB),t.set("dmode",s.dragMode);var o=s.el,i=s.log,l=i===!0?(0,Ce.keys)(O_):(0,Ce.isArray)(i)?i:[];return(0,Ce.bindAll)(t,"initBaseColorPicker"),o&&s.fromElement&&(s.components=o.innerHTML),t.attrsOrig=o?(0,Ce.toArray)(o.attributes).reduce(function(c,d){return c[d.nodeName]=d.nodeValue,c},{}):"",s.components&&!s.pageManager&&(s.pageManager={pages:[{component:s.components}]}),KX.forEach(function(c){return t.loadModule(c)}),YX.forEach(function(c){return t.loadStorableModule(c)}),t.on("change:componentHovered",t.componentHovered,t),t.on("change:changesCount",t.updateChanges,t),t.on("change:readyLoad change:readyCanvas",t._checkReady,t),l.forEach(function(c){return t.listenLog(c)}),[{from:"change:selectedComponent",to:"component:toggled"}].forEach(function(c){var d=c.from,h=c.to;t.listenTo(t,d,function(){for(var m=[],y=0;y<arguments.length;y++)m[y]=arguments[y];t.trigger.apply(t,GX([h],m,!1)),t.logWarning("The event '".concat(d,"' is deprecated, replace it with '").concat(h,"'"))})}),t}return r.prototype.defaults=function(){return{editing:0,selected:0,clipboard:null,dmode:0,componentHovered:null,previousModel:null,changesCount:0,storables:[],modules:[],toLoad:[],opened:{},device:""}},Object.defineProperty(r.prototype,"storables",{get:function(){return this.get("storables")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"modules",{get:function(){return this.get("modules")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"toLoad",{get:function(){return this.get("toLoad")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"selected",{get:function(){return this.get("selected")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"shallow",{get:function(){return this.get("shallow")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"I18n",{get:function(){return this.get("I18n")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Utils",{get:function(){return this.get("Utils")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Commands",{get:function(){return this.get("Commands")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Keymaps",{get:function(){return this.get("Keymaps")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Modal",{get:function(){return this.get("Modal")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Panels",{get:function(){return this.get("Panels")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"CodeManager",{get:function(){return this.get("CodeManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"UndoManager",{get:function(){return this.get("UndoManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"RichTextEditor",{get:function(){return this.get("RichTextEditor")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Canvas",{get:function(){return this.get("Canvas")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Editor",{get:function(){return this.get("Editor")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Components",{get:function(){return this.get("DomComponents")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Css",{get:function(){return this.get("CssComposer")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Blocks",{get:function(){return this.get("BlockManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Selectors",{get:function(){return this.get("SelectorManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Storage",{get:function(){return this.get("StorageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Traits",{get:function(){return this.get("TraitManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Parser",{get:function(){return this.get("Parser")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Layers",{get:function(){return this.get("LayerManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Assets",{get:function(){return this.get("AssetManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Devices",{get:function(){return this.get("DeviceManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Pages",{get:function(){return this.get("PageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Styles",{get:function(){return this.get("StyleManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"DataSources",{get:function(){return this.get("DataSources")},enumerable:!1,configurable:!0}),r.prototype._checkReady=function(){this.get("readyLoad")&&this.get("readyCanvas")&&!this.get("ready")&&this.set("ready",!0)},r.prototype.getContainer=function(){return this.config.el},r.prototype.listenLog=function(e){var t=this;this.listenTo(this,"log:".concat(e),function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];if(t.config.log){var i=O_[e];i?.apply(void 0,s)}})},Object.defineProperty(r.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){var e;return((e=this.config.grapesjs)===null||e===void 0?void 0:e.version)||""},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isHeadless",{get:function(){return!!this.config.headless},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isShallow",{get:function(){return!!this.get("isShallow")},enumerable:!1,configurable:!0}),r.prototype.initModules=function(){this.modules.forEach(function(e){return e.onInit()})},r.prototype.getConfig=function(e){var t=this.config;return(0,Ce.isUndefined)(e)?t:t[e]},r.prototype.loadOnStart=function(){var e=this,t=this.config,s=t.projectData,o=t.headless,i={initial:!0},l=this.Storage;this.toLoad.reverse().forEach(function(h){return h.onLoad()});var c=function(){e.modules.forEach(function(h){return h.postLoad&&h.postLoad(e)}),e.set("readyLoad",1)};o?(s&&this.loadData(s,i),c()):this._storageTimeout=setTimeout(function(){return n1(e,void 0,void 0,function(){var h;return a1(this,function(m){switch(m.label){case 0:return s?(this.loadData(s,i),[3,5]):[3,1];case 1:if(!l?.canAutoload())return[3,5];m.label=2;case 2:return m.trys.push([2,4,,5]),[4,this.load({},i)];case 3:return m.sent(),[3,5];case 4:return h=m.sent(),this.logError(h),[3,5];case 5:return c(),[2]}})})});var d=new r({noticeOnUnload:!1,storageManager:!1,undoManager:!1});d.set({isShallow:!0}),d.Pages.onLoad(),d.Canvas.postLoad(),this.set("shallow",d)},r.prototype.updateChanges=function(e,t,s){var o=this,i=this.Storage,l=this.getDirtyCount();s.isClear||(this.updateItr&&clearTimeout(this.updateItr),this.updateItr=setTimeout(function(){return o.trigger(ai.update)})),this.config.noticeOnUnload&&(window.onbeforeunload=l?function(){return!0}:null),i.isAutosave()&&l>=i.getStepsBeforeSave()&&this.store().catch(function(c){return o.logError(c)})},r.prototype.loadModule=function(e){var t=new e(this);return this.set(t.name,t),t.onLoad&&this.toLoad.push(t),this.modules.push(t),t},r.prototype.loadStorableModule=function(e){var t=this.loadModule(e);return this.storables.push(t),t},r.prototype.init=function(e,t){t===void 0&&(t={}),this.destroyed&&(this.initialize(t),this.destroyed=!1),this.set("Editor",e)},r.prototype.getEditor=function(){return this.get("Editor")},r.prototype.handleUpdates=function(e,t){var s=this;e===void 0&&(e={}),!(this.__skip||!this.loadTriggered||e.temporary||e.noCount||e.avoidStore||e.partial)&&(this.trigger(this.events.updateBefore,t),this.timedInterval&&clearTimeout(this.timedInterval),this.timedInterval=setTimeout(function(){var o=s.getDirtyCount()||0;e.unset;var i=qX(e,["unset"]);s.set("changesCount",o+1,i)},0))},r.prototype.changesUp=function(e,t){this.handleUpdates(e,t)},r.prototype.componentHovered=function(e,t,s){var o=this.previous("componentHovered");o&&this.trigger("component:unhovered",o,s),t&&this.trigger("component:hovered",t,s)},r.prototype.getSelected=function(){return this.selected.lastComponent()},r.prototype.getSelectedAll=function(){return this.selected.allComponents()},r.prototype.setSelected=function(e,t){var s=this;t===void 0&&(t={});var o=t.event,i=o&&(o.ctrlKey||o.metaKey),l=(o||{}).shiftKey,c=((0,Ce.isArray)(e)?e:[e]).map(function(y){var x,b;return((b=(x=y?.delegate)===null||x===void 0?void 0:x.select)===null||b===void 0?void 0:b.call(x,y))||y}).filter(Boolean),d=this.getSelectedAll(),h=this.getConfig().multipleSelection,m=(0,Ce.isArray)(e);(m||!e)&&this.removeSelected(d.filter(function(y){return!(0,Ce.contains)(c,y)})),c.forEach(function(y){if(y&&(s.trigger(ja.I.selectBefore,y,t),!y.get("selectable")||t.abort))if(t.useValid){for(var x=y.parent();x&&!x.get("selectable");)x=x.parent();y=x}else return;if(i&&h)return s.toggleSelected(y);if(l&&h){if(s.isEditing())return;s.clearSelection(s.Canvas.getWindow());var b=y.collection,v=y.index(),j,S;if(s.getSelectedAll().forEach(function(k){var N=k.collection,P=k.index();N===b&&(P<v?j=(0,Ce.isUndefined)(j)?P:Math.max(j,P):P>v&&(S=(0,Ce.isUndefined)(S)?P:Math.min(S,P)))}),!(0,Ce.isUndefined)(j))for(;j!==v;)s.addSelected(b.at(j),t),j++;if(!(0,Ce.isUndefined)(S))for(;S!==v;)s.addSelected(b.at(S),t),S--;return s.addSelected(y,t)}!m&&s.removeSelected(d.filter(function(k){return k!==y})),s.addSelected(y,t)})},r.prototype.addSelected=function(e,t){var s=this;t===void 0&&(t={});var o=(0,Ce.isArray)(e)?e:[e];o.forEach(function(i){var l=s.selected;if(!(!i||!i.get("selectable")||i.parents().some(function(h){return l.hasComponent(h)}))){t.forceChange&&s.removeSelected(i,t);var c=l.allComponents().filter(function(h){return(0,Ce.contains)(h.parents(),i)});if(c.forEach(function(h){return s.removeSelected(h,t)}),l.addComponent(i,t),s.trigger(ja.I.select,i,t),s.Canvas.addSpot({type:Cl.F.Select,component:i}),t.activate){var d=i.getView();d?.rendered?d.onActive(t.event):i.once(ja.I.render,function(h){var m=h.view;return m.onActive(t.event)})}}})},r.prototype.removeSelected=function(e,t){var s=this;t===void 0&&(t={}),this.selected.removeComponent(e,t);var o=(0,Ce.isArray)(e)?e:[e];o.forEach(function(i){return s.Canvas.removeSpots({type:Cl.F.Select,component:i})})},r.prototype.toggleSelected=function(e,t){var s=this;t===void 0&&(t={});var o=(0,Ce.isArray)(e)?e:[e];o.forEach(function(i){s.selected.hasComponent(i)?s.removeSelected(i,t):s.addSelected(i,t)})},r.prototype.setHovered=function(e,t){var s=this;t===void 0&&(t={});var o=function(c,d){var h=s,m=h.config,y=h.Canvas,x=s.getHovered(),b=s.getSelectedAll(),v=Cl.F.Hover,j=Cl.F.Spacing;s.set("componentHovered",c||null,d),x&&(y.removeSpots({type:v,component:x}),y.removeSpots({type:j,component:x})),c&&(y.addSpot({type:v,component:c}),(!b.includes(c)||m.showOffsetsSelected)&&y.addSpot({type:j,component:c}))};if(!e)return o();var i="component:hover";if(t.forceChange&&o(),this.trigger("".concat(i,":before"),e,t),!e.get("hoverable"))if(t.useValid&&!t.abort){for(var l=e.parent();l&&!l.get("hoverable");)l=l.parent();e=l}else return;t.abort||(o(e,t),this.trigger(i,e,t))},r.prototype.getHovered=function(){return this.get("componentHovered")},r.prototype.setComponents=function(e,t){return t===void 0&&(t={}),this.Components.setComponents(e,t)},r.prototype.getComponents=function(){var e=this.Components,t=this.CodeManager;if(!(!e||!t)){var s=e.getComponents();return t.getCode(s,"json")}},r.prototype.setStyle=function(e,t){t===void 0&&(t={});var s=this.Css;return s.clear(t),s.getAll().add(e,t),this},r.prototype.addStyle=function(e,t){t===void 0&&(t={});var s=this.getStyle().add(e,t);return(0,Ce.isArray)(s)?s:[s]},r.prototype.getStyle=function(){return this.Css.getAll()},r.prototype.setState=function(e){return this.set("state",e),this},r.prototype.getState=function(){return this.get("state")||""},r.prototype.getHtml=function(e){e===void 0&&(e={});var t=this.config,s=t.optsHtml,o=t.jsInHtml?this.getJs(e):"",i=e.component||this.Components.getComponent(),l=i?this.CodeManager.getCode(i,"html",wo(wo({},s),e)):"";return l+=o?"<script>".concat(o,"<\/script>"):"",l},r.prototype.getCss=function(e){e===void 0&&(e={});var t=this.config,s=t.optsCss,o=e.avoidProtected,i=(0,Ce.isUndefined)(e.keepUnusedStyles)?t.keepUnusedStyles:e.keepUnusedStyles,l=this.Css,c=e.component||this.Components.getComponent(),d=o?"":t.protectedCss||"",h=c&&this.CodeManager.getCode(c,"css",wo(wo({cssc:l,keepUnusedStyles:i},s),e));return c?e.json?h:d+h:""},r.prototype.getJs=function(e){e===void 0&&(e={});var t=e.component||this.Components.getWrapper();return t?this.CodeManager.getCode(t,"js").trim():""},r.prototype.store=function(e){return n1(this,void 0,void 0,function(){var t,s=this;return a1(this,function(o){switch(o.label){case 0:return this._isStoring?[2]:(this._isStoring=!0,setTimeout(function(){s.clearDirtyCount()},1),t=this.storeData(),[4,this.Storage.store(t,e)]);case 1:return o.sent(),setTimeout(function(){s._isStoring=!1},1),[2,t]}})})},r.prototype.load=function(e){return n1(this,arguments,void 0,function(t,s){var o;return s===void 0&&(s={}),a1(this,function(i){switch(i.label){case 0:return[4,this.Storage.load(t)];case 1:return o=i.sent(),this.loadData(o,s),[4,(0,Zt.wait)()];case 2:return i.sent(),s.clear&&(this.UndoManager.clear(),this.clearDirtyCount()),[2,o]}})})},r.prototype.storeData=function(){var e={},t=this.getEditing();t&&t.trigger("sync:content",{noCount:!0}),this.storables.forEach(function(o){e=wo(wo({},e),o.store(1))});var s=JSON.parse(JSON.stringify(e));return this.trigger(ai.projectGet,{project:s}),s},r.prototype.loadData=function(e,t){e===void 0&&(e={}),t===void 0&&(t={});var s={project:e,options:t,initial:!!t.initial},o=!1;return(0,Zt.isEmptyObj)(e)||(this.storables.forEach(function(i){return i.clear()}),this.storables.forEach(function(i){return i.load(e)}),o=!0),this.trigger(ai.projectLoad,wo(wo({},s),{loaded:o})),o&&this.trigger(ai.projectLoaded,s),e},r.prototype.getDeviceModel=function(){var e=this.get("device");return this.Devices.get(e)},r.prototype.runDefault=function(e){e===void 0&&(e={});var t=this.Commands.get(this.config.defaultCommand);!t||this.defaultRunning||(t.stop(this,this,e),t.run(this,this,e),this.defaultRunning=!0)},r.prototype.stopDefault=function(e){e===void 0&&(e={});var t=this.Commands;if(t){var s=t.get(this.config.defaultCommand);!s||!this.defaultRunning||(s.stop(this,this,e),this.defaultRunning=!1)}},r.prototype.refreshCanvas=function(e){e===void 0&&(e={}),this.Canvas.refresh({spots:e.tools})},r.prototype.clearSelection=function(e){var t,s=e||window;(t=s.getSelection())===null||t===void 0||t.removeAllRanges()},r.prototype.getCurrentMedia=function(){var e=this.config,t=this.getDeviceModel(),s=e.mediaCondition,o=e.devicePreviewMode,i=t&&t.get("widthMedia");return t&&i&&!o?"(".concat(s,": ").concat(i,")"):""},r.prototype.getWrapper=function(){return this.Components.getWrapper()},r.prototype.setCurrentFrame=function(e){return this.set("currentFrame",e)},r.prototype.getCurrentFrame=function(){return this.get("currentFrame")},r.prototype.getCurrentFrameModel=function(){var e;return(e=this.getCurrentFrame()||{})===null||e===void 0?void 0:e.model},r.prototype.getIcon=function(e){var t=this.config.icons||{};return t[e]||""},r.prototype.getDirtyCount=function(){return this.get("changesCount")},r.prototype.clearDirtyCount=function(){return this.set({changesCount:0},{isClear:!0})},r.prototype.getZoomDecimal=function(){return this.Canvas.getZoomDecimal()},r.prototype.getZoomMultiplier=function(){return this.Canvas.getZoomMultiplier()},r.prototype.setDragMode=function(e){return this.set("dmode",e)},r.prototype.getDragMode=function(e){var t=e?.getDragMode()||this.get("dmode");return t||""},r.prototype.t=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var s=this.get("I18n");return s?.t.apply(s,e)},r.prototype.inAbsoluteMode=function(e){return this.getDragMode(e)==="absolute"},r.prototype.destroyAll=function(){var e=this,t=this,s=t.config,o=t.view;this.trigger(ai.destroy);var i=this.getEditor(),l=(s.grapesjs||{}).editors,c=l===void 0?[]:l,d=this.get("shallow");this._storageTimeout&&clearTimeout(this._storageTimeout),d?.destroyAll(),this.stopListening(),this.stopDefault(),(this.modules||[]).slice().reverse().forEach(function(h){return h.destroy()}),o?.remove&&o.remove(),this.clear({silent:!0}),this.destroyed=!0,["_config","view","_previousAttributes","_events","_listeners"].forEach(function(h){return e[h]={}}),c.splice(c.indexOf(i),1),(0,Zt.hasWin)()&&(0,po.default)(s.el).empty().attr(this.attrsOrig),this.trigger(ai.destroyed)},r.prototype.getEditing=function(){var e=this.get("editing");return e&&e.model||void 0},r.prototype.setEditing=function(e){return this.set("editing",e),this},r.prototype.isEditing=function(){return!!this.get("editing")},r.prototype.log=function(e,t){t===void 0&&(t={});var s=ai.log,o=t.ns,i=t.level,l=i===void 0?"debug":i;if(this.trigger(s,e,t),l&&this.trigger("".concat(s,":").concat(l),e,t),o){var c="".concat(s,"-").concat(o);this.trigger(c,e,t),l&&this.trigger("".concat(c,":").concat(l),e,t)}},r.prototype.logInfo=function(e,t){this.log(e,wo(wo({},t),{level:"info"}))},r.prototype.logWarning=function(e,t){this.log(e,wo(wo({},t),{level:"warning"}))},r.prototype.logError=function(e,t){this.log(e,wo(wo({},t),{level:"error"}))},r.prototype.initBaseColorPicker=function(e,t){t===void 0&&(t={});var s=this.config,o=s.colorPicker,i=o===void 0?{}:o,l=s.el,c=s.stylePrefix;return(0,po.default)(e).spectrum(wo(wo({containerClassName:"".concat(c,"one-bg ").concat(c,"two-color"),appendTo:l||"body",maxSelectionSize:8,showPalette:!0,palette:[],showAlpha:!0,chooseText:"Ok",cancelText:""},t),i))},r.prototype.skip=function(e){this.__skip=!0;var t=this.UndoManager;t?t.skip(e):e(),this.__skip=!1},r.prototype.data=function(e,t,s){var o="_gjs-data";if(e[o]||(e[o]={}),(0,Ce.isUndefined)(s))return e[o][t];e[o][t]=s},r})(Sr.Kx);const XX=ZX;function QX(){return window.location.hostname}var JX=(function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}})(),eQ=function(a,r,e,t){function s(o){return o instanceof e?o:new e(function(i){i(o)})}return new(e||(e=Promise))(function(o,i){function l(h){try{d(t.next(h))}catch(m){i(m)}}function c(h){try{d(t.throw(h))}catch(m){i(m)}}function d(h){h.done?o(h.value):s(h.value).then(l,c)}d((t=t.apply(a,r||[])).next())})},tQ=function(a,r){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},t,s,o,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(d){return function(h){return c([d,h])}}function c(d){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,d[0]&&(e=0)),e;)try{if(t=1,s&&(o=d[0]&2?s.return:d[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,d[1])).done)return o;switch(s=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return e.label++,{value:d[1],done:!1};case 5:e.label++,s=d[1],d=[0];continue;case 7:d=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){e=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){e.label=d[1];break}if(d[0]===6&&e.label<o[1]){e.label=o[1],o=d;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(d);break}o[2]&&e.ops.pop(),e.trys.pop();continue}d=r.call(a,e)}catch(h){d=[6,h],s=0}finally{t=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},rQ=(function(a){JX(r,a);function r(e){var t=a.call(this,{model:e})||this,s=e.Panels,o=e.UndoManager;return e.view=t,e.once("change:ready",function(){s.active(),s.disableButtons(),e.getConfig().telemetry&&t.sendTelemetryData().catch(function(){}),setTimeout(function(){e.trigger(ai.load,e.Editor),e.loadTriggered=!0,o.clear(),e.clearDirtyCount()})}),t}return r.prototype.render=function(){var e=this,t=this,s=t.$el,o=t.model,i=o.Panels,l=o.Canvas,c=o.config,d=o.modules,h=c.stylePrefix,m=["".concat(h,"editor")];!c.customUI&&m.push("".concat(h,"one-bg ").concat(h,"two-color"));var y=(0,po.default)(c.el||"body ".concat(c.container));c.cssIcons&&(0,Zt.appendStyles)(c.cssIcons,{unique:!0,prepand:!0}),s.empty(),c.width&&y.css("width",c.width),c.height&&y.css("height",c.height),s.append(l.render()),s.append(i.render());var x=o.shallow,b=x.Canvas.render();return b.style.display="none",s.append(b),s.attr("class",m.join(" ")),y.addClass("".concat(h,"editor-cont")).empty().append(s),d.forEach(function(v){var j;return(j=v.postRender)===null||j===void 0?void 0:j.call(v,e)}),this},r.prototype.sendTelemetryData=function(){return eQ(this,void 0,void 0,function(){var e,t,s,o,i,l,c,d;return tQ(this,function(h){switch(h.label){case 0:return e=QX(),e==="localhost"||e.includes("localhost")?[2]:(t="gjs_telemetry_sent_",s=this.model.version,o="".concat(t).concat(s),sessionStorage.getItem(o)?[2]:(i="https://app.grapesjs.com",[4,fetch("".concat(i,"/api/gjs/telemetry/collect"),{method:"POST",body:JSON.stringify({domain:e,version:s})})]));case 1:return l=h.sent(),l.ok?[3,3]:(c=Error.bind,d="Failed to send telemetry data ".concat,[4,l.text()]);case 2:throw new(c.apply(Error,[void 0,d.apply("Failed to send telemetry data ",[h.sent()])]));case 3:return sessionStorage.setItem(o,"true"),Object.keys(sessionStorage).forEach(function(m){m.startsWith(t)&&m!==o&&sessionStorage.removeItem(m)}),this.trigger(ai.telemetryInit),[2]}})})},r})(Sr.Ss);const nQ=rQ;var oy=function(){return oy=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},oy.apply(this,arguments)},P_=function(a,r,e,t){function s(o){return o instanceof e?o:new e(function(i){i(o)})}return new(e||(e=Promise))(function(o,i){function l(h){try{d(t.next(h))}catch(m){i(m)}}function c(h){try{d(t.throw(h))}catch(m){i(m)}}function d(h){h.done?o(h.value):s(h.value).then(l,c)}d((t=t.apply(a,r||[])).next())})},A_=function(a,r){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},t,s,o,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(d){return function(h){return c([d,h])}}function c(d){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,d[0]&&(e=0)),e;)try{if(t=1,s&&(o=d[0]&2?s.return:d[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,d[1])).done)return o;switch(s=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return e.label++,{value:d[1],done:!1};case 5:e.label++,s=d[1],d=[0];continue;case 7:d=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){e=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){e.label=d[1];break}if(d[0]===6&&e.label<o[1]){e.label=o[1],o=d;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(d);break}o[2]&&e.ops.pop(),e.trys.pop();continue}d=r.call(a,e)}catch(h){d=[6,h],s=0}finally{t=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},aQ=function(a,r,e){if(e||arguments.length===2)for(var t=0,s=r.length,o;t<s;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return a.concat(o||Array.prototype.slice.call(r))},sQ=(function(){function a(r,e){r===void 0&&(r={}),e===void 0&&(e={});var t;this.events=ai,this.html=Ni;var s=VB();this.config=oy(oy(oy({},s),r),{pStylePrefix:(t=r.stylePrefix)!==null&&t!==void 0?t:s.stylePrefix}),this.em=new XX(this.config),this.$=e.$,this.em.init(this),this.editor=this.em}return Object.defineProperty(a.prototype,"Config",{get:function(){return this.em.config},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"I18n",{get:function(){return this.em.I18n},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Utils",{get:function(){return this.em.Utils},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Commands",{get:function(){return this.em.Commands},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Keymaps",{get:function(){return this.em.Keymaps},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Modal",{get:function(){return this.em.Modal},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Panels",{get:function(){return this.em.Panels},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Canvas",{get:function(){return this.em.Canvas},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Parser",{get:function(){return this.em.Parser},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"CodeManager",{get:function(){return this.em.CodeManager},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"UndoManager",{get:function(){return this.em.UndoManager},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"RichTextEditor",{get:function(){return this.em.RichTextEditor},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Pages",{get:function(){return this.em.Pages},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Components",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"DomComponents",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Layers",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"LayerManager",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Css",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"CssComposer",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Storage",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"StorageManager",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Assets",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"AssetManager",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Blocks",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"BlockManager",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Traits",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"TraitManager",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Selectors",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"SelectorManager",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Styles",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"StyleManager",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Devices",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"DeviceManager",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"DataSources",{get:function(){return this.em.DataSources},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"EditorModel",{get:function(){return this.em},enumerable:!1,configurable:!0}),a.prototype.getConfig=function(r){return this.em.getConfig(r)},a.prototype.getHtml=function(r){return this.em.getHtml(r)},a.prototype.getCss=function(r){return this.em.getCss(r)},a.prototype.getJs=function(r){return this.em.getJs(r)},a.prototype.getComponents=function(){return this.Components.getComponents()},a.prototype.getWrapper=function(){return this.Components.getWrapper()},a.prototype.setComponents=function(r,e){return e===void 0&&(e={}),this.em.setComponents(r,e),this},a.prototype.addComponents=function(r,e){return this.getWrapper().append(r,e)},a.prototype.getStyle=function(){return this.em.Css.getAll()},a.prototype.setStyle=function(r,e){return e===void 0&&(e={}),this.em.setStyle(r,e),this},a.prototype.addStyle=function(r,e){return e===void 0&&(e={}),this.em.addStyle(r,e)},a.prototype.getSelected=function(){return this.em.getSelected()},a.prototype.getSelectedAll=function(){return this.em.getSelectedAll()},a.prototype.getSelectedToStyle=function(){var r=this.em.getSelected();if(r)return this.StyleManager.getModelToStyle(r)},a.prototype.select=function(r,e){return this.em.setSelected(r,e),this},a.prototype.selectAdd=function(r){return this.em.addSelected(r),this},a.prototype.selectRemove=function(r){return this.em.removeSelected(r),this},a.prototype.selectToggle=function(r){return this.em.toggleSelected(r),this},a.prototype.getEditing=function(){return this.em.getEditing()},a.prototype.setDevice=function(r){return this.em.set("device",r),this},a.prototype.getDevice=function(){return this.em.get("device")},a.prototype.runCommand=function(r,e){return e===void 0&&(e={}),this.Commands.run(r,e)},a.prototype.stopCommand=function(r,e){return e===void 0&&(e={}),this.Commands.stop(r,e)},a.prototype.store=function(r){return P_(this,void 0,void 0,function(){return A_(this,function(e){switch(e.label){case 0:return[4,this.em.store(r)];case 1:return[2,e.sent()]}})})},a.prototype.load=function(r){return P_(this,arguments,void 0,function(e,t){return t===void 0&&(t={}),A_(this,function(s){switch(s.label){case 0:return[4,this.em.load(e,t)];case 1:return[2,s.sent()]}})})},a.prototype.getProjectData=function(){return this.em.storeData()},a.prototype.loadProjectData=function(r,e){return e===void 0&&(e={}),this.em.loadData(r,e)},a.prototype.storeData=function(){return this.em.storeData()},a.prototype.loadData=function(r){return this.em.loadData(r)},a.prototype.getContainer=function(){return this.config.el},a.prototype.getDirtyCount=function(){return this.em.getDirtyCount()},a.prototype.clearDirtyCount=function(){return this.em.clearDirtyCount()},a.prototype.refresh=function(r){this.em.refreshCanvas(r)},a.prototype.setCustomRte=function(r){this.RichTextEditor.customRte=r},a.prototype.setCustomParserCss=function(r){return this.Parser.getConfig().parserCss=r,this},a.prototype.setDragMode=function(r){return this.em.setDragMode(r),this},a.prototype.log=function(r,e){return e===void 0&&(e={}),this.em.log(r,e),this},a.prototype.t=function(){for(var r,e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(r=this.em).t.apply(r,e)},a.prototype.on=function(r,e){return this.em.on(r,e),this},a.prototype.once=function(r,e){return this.em.once(r,e),this},a.prototype.off=function(r,e){return this.em.off(r,e),this},a.prototype.trigger=function(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return this.em.trigger.apply(this.em,aQ([r],e,!0)),this},a.prototype.destroy=function(){this.em&&(this.em.destroyAll(),this.editorView=void 0)},a.prototype.getEl=function(){var r;return(r=this.editorView)===null||r===void 0?void 0:r.el},a.prototype.getModel=function(){return this.em},a.prototype.render=function(){var r;return(r=this.editorView)===null||r===void 0||r.remove(),this.editorView=new nQ(this.em),this.editorView.render().el},a.prototype.onReady=function(r){this.em.get("ready")?r(this):this.em.on("load",r)},a})();const oQ=sQ;var iQ=function(a,r){var e=r.get(a);if(!e){var t=(0,Zt.getGlobal)()[a];e=t?.default||t}return e},KO=function(a,r){return(0,Ce.isString)(a)?iQ(a,r):a?.default||a},YO=function(a,r){a.getModel().logWarning("Plugin ".concat(r," not found"),{context:"plugins",plugin:r})},lQ=(function(){function a(){this.plugins={}}return a.prototype.add=function(r,e){var t=this.get(r);return t||(this.plugins[r]=e,e)},a.prototype.get=function(r){return this.plugins[r]},a.prototype.getAll=function(){return this.plugins},a})();const cQ=lQ,dQ=(function(){var a=function(){for(var e,t=window.navigator.userAgent,s=[["edge",/Edge\/([0-9\._]+)/],["ie",/MSIE\s(7\.0)/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/]],o=0;o<s.length;o++){var i=s[o];if(e=i[1].exec(t),e)break}return!!e};if((0,Zt.hasWin)()&&a()){var r=DOMImplementation.prototype.createHTMLDocument;DOMImplementation.prototype.createHTMLDocument=function(e){return e||(e=""),r.apply(document.implementation,[e])}}});var cb=function(){return cb=Object.assign||function(a){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},cb.apply(this,arguments)};dQ();var IC=new cQ,M_=[],ZO=function(a,r){var e=KO(a,IC);return function(t){e?e(t,r||{}):YO(t,a)}},XO={$:po.default,editors:M_,plugins:IC,usePlugin:ZO,version:"0.22.14",init:function(a){a===void 0&&(a={});var r=a.headless,e=a.container;if(!e&&!r)throw new Error("'container' is required");var t=cb(cb({autorender:!0,plugins:[],pluginsOpts:{}},a),{grapesjs:this,el:r?void 0:(0,Ce.isElement)(e)?e:document.querySelector(e)}),s=new oQ(t,{$:po.default}),o=s.getModel();return o.initModules(),t.plugins.forEach(function(i){var l=KO(i,IC),c=t.pluginsOpts[i]||{};l?l(s,c):YO(s,i)}),o.loadOnStart(),t.autorender&&!r&&s.render(),M_.push(s),s}};const uQ=XO;var QO=Rb.Ay;Rb.I0;Rb.nu;const JO=Object.freeze(Object.defineProperty({__proto__:null,default:QO},Symbol.toStringTag,{value:"Module"})),eP=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),s1='<section style="padding: 60px 20px; min-height: 400px; background: #ffffff; position: relative; border: 2px dashed #d1d5db; border-radius: 4px; max-width: 1200px; margin: 60px auto;"><div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); display: flex; flex-direction: column; align-items: center; gap: 12px; color: #6b7280; font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;"><div style="display: flex; gap: 12px; align-items: center;"><span style="width: 40px; height: 40px; border-radius: 50%; background: #1e1e1e; display: inline-flex; align-items: center; justify-content: center; color: #fff; font-size: 18px;">+</span><span style="width: 40px; height: 40px; border-radius: 50%; background: #1e1e1e; display: inline-flex; align-items: center; justify-content: center; color: #fff; font-size: 18px;"></span></div><p style="margin: 0; font-size: 14px; font-weight: 500;">Start building your page</p><p style="margin: 0; font-size: 12px; opacity: 0.7;">Drag blocks from the sidebar or click to add content</p></div></section>',o1={Header:["header",".header","#header","[class*='header']","[id*='header']","nav",".navbar",".navigation"],"Hero section":[".hero-section",".hero","[class*='hero']","[id*='hero']",".banner","[class*='banner']",".jumbotron","[class*='jumbotron']"],"Logo banner":[".logo-banner","[class*='logo-banner']","[class*='logo']",".banner","[class*='banner']"],"Collection list: Grid":[".collection-grid","[class*='collection'][class*='grid']",".product-grid","[class*='product-grid']",".grid","[class*='collection-list']"],"Product highlight":[".product-highlight","[class*='product-highlight']",".featured-product","[class*='featured-product']",".highlight"],"Product card":[".product-card","[class*='product-card']","[class*='productCard']",".product-item","[class*='product-item']","[class*='productItem']",".product","[class*='product']:not([class*='product-grid']):not([class*='product-list'])","[data-product]",".card","[class*='card']","article","[role='article']",".item","[class*='item']"],"Featured collection":[".featured-collection","[class*='featured-collection']",".featured-products","[class*='featured-products']"],"Collection list: Carousel":[".collection-carousel","[class*='carousel']","[class*='slider']",".product-carousel","[class*='collection'][class*='carousel']"],Marquee:[".marquee","[class*='marquee']",".scrolling-text","[class*='scrolling']"],Footer:["footer",".footer","#footer","[class*='footer']","[id*='footer']"],Logo:[".logo","[class*='logo']","[id*='logo']","img[alt*='logo' i]","img[src*='logo' i]"]},fQ=()=>{const[a]=dS(),r=mr(),{activeStoreId:e}=fn(),{createTheme:t,updateTheme:s}=AS(),o=f.useRef(null),i=f.useRef(null),l=f.useRef(""),c=f.useRef([]),[d,h]=f.useState(!0),[m,y]=f.useState(null),[x,b]=f.useState(""),[v,j]=f.useState("desktop"),[S,k]=f.useState(null),[N,P]=f.useState(!1),[R,F]=f.useState(!0),[z,H]=f.useState(!1),[V,W]=f.useState(!1),[Z,A]=f.useState(!1),[q,I]=f.useState(!1),[K,D]=f.useState(!1),[Q,oe]=f.useState(""),[re,Te]=f.useState({header:!0,template:!0,footer:!0}),[G,Y]=f.useState([{id:"page-1",name:"Home",html:s1,css:""}]),Se=f.useRef([{id:"page-1",name:"Home",html:s1,css:""}]),[fe,Ee]=f.useState("page-1"),Ae=a.get("id")||a.get("themeId")||"",qe=a.get("type")||"",we=f.useCallback(async(se,Le,Ue,Ge)=>{const ie=[];try{const _e=new DOMParser,le=_e.parseFromString(Le,"text/html"),Xe=new Set;le.querySelectorAll("a[href]").forEach(Ze=>{const Nt=Ze.getAttribute("href");if(!Nt||/^(?:https?:|mailto:|tel:|javascript:|#|\/\/)/i.test(Nt))return;const Mt=Nt.split("?")[0].split("#")[0].trim();if(!Mt||Mt==="index.html"||Mt==="/")return;const vt=Mt.replace(/^\/+/,"");vt&&!Xe.has(vt)&&Xe.add(vt)}),console.log(` Discovered ${Xe.size} potential pages from hyperlinks:`,Array.from(Xe));const Fe=Ze=>{if(Ze.startsWith("http://")||Ze.startsWith("https://")||Ze.startsWith("//"))return Ze.startsWith("//")?"https:"+Ze:Ze;const Nt=se.endsWith("/")?se:`${se}/`;if(Ze.startsWith("/"))return`${Nt}${Ze.replace(/^\/+/,"")}`;try{return new URL(Ze,Nt).href}catch{return Nt+Ze}},dt=async Ze=>{try{const Nt=[];Ze.toLowerCase().endsWith(".html")?Nt.push(`${se}/${Ze}?v=${Date.now()}`):(Nt.push(`${se}/${Ze}/index.html?v=${Date.now()}`),Nt.push(`${se}/${Ze}.html?v=${Date.now()}`));let Mt=null;for(const Ut of Nt)try{const er=await fetch(Ut,{credentials:"include",headers:Ge()});if(er.ok){Mt=await er.text();break}}catch(er){console.warn(`Failed to fetch page from ${Ut}:`,er)}if(!Mt)return console.warn(`Could not fetch page: ${Ze}`),null;const vt=_e.parseFromString(Mt,"text/html"),wr=await(async Ut=>{const er=[],zr=Array.from(Ut.querySelectorAll('link[rel="stylesheet"]')).map(async Ur=>{const ar=Ur.getAttribute("href");if(!ar)return"";const br=Fe(ar);try{const pn=await fetch(br,{credentials:"include",headers:Ge()});return pn.ok?await pn.text()||"":`@import url('${br}');`}catch{return`@import url('${br}');`}}),rn=await Promise.all(zr);er.push(...rn.filter(Ur=>Ur.trim()));const _n=Array.from(Ut.querySelectorAll("style")).map(Ur=>Ur.textContent||"").filter(Ur=>Ur.trim());return er.push(..._n),er.join(`

`).trim()})(vt),Wt=Ue?wr?`${Ue}

/* Page-specific styles */
${wr}`:Ue:wr,ye=vt.body?vt.body.innerHTML:Mt,Be=Ze.replace(/\.html$/i,"").replace(/\/index$/i,"").replace(/\//g,"-").replace(/[^a-z0-9-]/gi,"-").toLowerCase()||`page-${Date.now()}`,wt=(Ze.replace(/\.html$/i,"").replace(/\/index$/i,"").split("/").pop()||"Page").split("-").map(Ut=>Ut.charAt(0).toUpperCase()+Ut.slice(1)).join(" ");return{id:Be,name:wt,html:ye||s1,css:Wt||""}}catch(Nt){return console.error(`Error fetching page ${Ze}:`,Nt),null}},lt=Array.from(Xe).map(Ze=>dt(Ze));(await Promise.all(lt)).forEach(Ze=>{Ze&&ie.push(Ze)}),console.log(` Successfully discovered and fetched ${ie.length} additional pages`)}catch(_e){console.error("Error discovering pages:",_e)}return ie},[]),Oe=f.useCallback(async se=>{try{const Le="https://backend.ziplofy.com/api",Ue=`?v=${Date.now()}`,Ge=()=>{try{const Er=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken");if(!Er)return null;const jr=Er.split(".");if(jr.length<2)return null;const ht=JSON.parse(atob(jr[1].replace(/-/g,"+").replace(/_/g,"/")));return String(ht.uid||ht.userId||ht.id||"")}catch{return null}},ie=()=>{const Er={},jr=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken")||localStorage.getItem("token")||sessionStorage.getItem("token");return jr&&(Er.Authorization=`Bearer ${jr}`),Er},_e=Ge(),le=Ae&&/^[0-9a-fA-F]{24}$/.test(Ae);let Xe="";if(qe==="installed"){const Er=e?`${Le}/themes/installed/${e}/${Ae}/unzippedTheme`:_e?`${Le}/themes/installed/${_e}/${Ae}/unzippedTheme`:null;if(Er)Xe=`${Er}/index.html${Ue}`,console.log(" Using installed theme:",Xe);else throw new Error("Store ID or User ID required for installed themes")}else le?(Xe=`${Le}/custom-themes/${Ae}/files/index.html${Ue}`,console.log(" Using custom theme:",Xe)):(Xe=`${Le}/themes/preview/${Ae}${Ue}`,console.log(" Using preview theme:",Xe));console.log("Fetching theme from:",Xe);const Fe=await fetch(Xe,{credentials:"include",headers:ie()});if(!Fe.ok){const Er=await Fe.text().catch(()=>"Unknown error");let jr=`Failed to load theme HTML: ${Fe.status} ${Fe.statusText}. ${Er}`;if(Fe.status===404)try{JSON.parse(Er).error?.includes("not found")&&(jr=`Theme not found. The theme with ID "${Ae}" does not exist in the database. Please create a new theme or use an existing theme ID.`)}catch{}else Fe.status===401&&(jr="Authentication failed. Please log in again and try loading the theme.");throw new Error(jr)}let dt=await Fe.text();const lt=Xe.substring(0,Xe.lastIndexOf("/")+1),ft=/<style[^>]*>([\s\S]*?)<\/style>/gi;let Ze="",Nt;for(;(Nt=ft.exec(dt))!==null;)Ze+=Nt[1]+`
`;const Mt=/<link[^>]*rel\s*=\s*["']stylesheet["'][^>]*>/gi,vt=[];let Jt;for(;(Jt=Mt.exec(dt))!==null;){const jr=Jt[0].match(/href\s*=\s*["']([^"']+)["']/i);if(jr&&jr[1]){let ht=jr[1];if(ht.startsWith("./")||ht.startsWith("../")||!ht.startsWith("http"))if(ht.startsWith("./"))ht=lt+ht.substring(2);else if(ht.startsWith("../")){const vr=lt.split("/").filter(bn=>bn),Rn=ht.split("/").filter(bn=>bn);for(const bn of Rn)bn===".."?vr.pop():bn!=="."&&vr.push(bn);ht=vr.join("/"),ht.startsWith("http")||(ht=lt.replace(/\/[^\/]*$/,"/")+ht)}else ht=lt+ht;vt.push(ht)}}c.current=vt;const wr=Er=>{try{const ht=new URL(Er).hostname.toLowerCase();return ht.includes("googleapis.com")||ht.includes("cdnjs.cloudflare.com")||ht.includes("stackpath.bootstrapcdn.com")||ht.includes("cdn.jsdelivr.net")||ht.includes("unpkg.com")||ht.includes("fonts.googleapis.com")||ht.includes("fonts.gstatic.com")}catch{return!1}},Wt=Er=>Er.startsWith("http://")||Er.startsWith("https://")||Er.startsWith("//")?Er.startsWith("//")?"https:"+Er:Er:lt+Er.replace(/^\.\//,"");let ye=Ze;const Be=vt.map(async Er=>{const jr=Wt(Er);if(wr(jr))return console.log(`Using @import for external CDN: ${jr}`),`@import url('${jr}');`;try{const ht=await fetch(jr,{credentials:"include",headers:ie()});if(ht.ok){const vr=await ht.text();return console.log(" Fetched external CSS:",jr,vr.length,"chars"),vr||""}else return console.warn(`Failed to fetch CSS from ${jr}:`,ht.status),`@import url('${jr}');`}catch(ht){return console.warn(`Error fetching CSS from ${jr}, using @import:`,ht),`@import url('${jr}');`}}),wt=(await Promise.all(Be)).filter(Er=>Er.trim()).join(`

`);wt&&(ye+=`

`+wt),l.current=ye,console.log(" Stored original theme CSS:",ye.length,"chars"),dt=dt.replace(/<script[^>]*>[\s\S]*?<\/script>/gi,""),dt=dt.replace(/<link[^>]*rel\s*=\s*["']stylesheet["'][^>]*>/gi,"");const Ut=dt.match(/<body[^>]*>([\s\S]*)<\/body>/i),er=Ut?Ut[1]:dt,zr=dt.match(/<html[^>]*>([\s\S]*)<\/html>/i),rn=er||(zr?zr[1]:dt),_n=await we(lt,dt,ye,ie),ar=[{id:"page-1",name:"Home",html:rn,css:ye},..._n];Y(ar),Se.current=ar,Ee("page-1"),console.log(` Loaded ${ar.length} pages:`,ar.map(Er=>({id:Er.id,name:Er.name}))),se.setComponents(rn);const br=()=>{try{const Er=se.Canvas;if(!Er)return console.warn("Canvas not available yet"),!1;const jr=Er.getFrameEl();if(!jr||!jr.contentDocument)return console.warn("Frame or frame document not available"),!1;const ht=jr.contentDocument,vr=ht.head||ht.getElementsByTagName("head")[0];if(!vr)return console.warn("Head element not found"),!1;if(vr.querySelectorAll("#ziplofy-theme-styles, style[data-ziplofy-theme], link[data-ziplofy-theme]").forEach(bn=>bn.remove()),Ze.trim()){const bn=ht.createElement("style");bn.id="ziplofy-theme-styles",bn.setAttribute("data-ziplofy-theme","true"),bn.textContent=Ze,vr.appendChild(bn),console.log(" Injected inline CSS")}if(vt.forEach((bn,En)=>{const Wr=ht.createElement("link");Wr.rel="stylesheet",Wr.href=bn,Wr.setAttribute("data-ziplofy-theme","true"),Wr.crossOrigin="anonymous",Wr.onerror=()=>{console.warn(`Failed to load stylesheet: ${bn}`)},Wr.onload=()=>{console.log(` Loaded stylesheet: ${bn}`)},vr.appendChild(Wr)}),Ze){const bn=Ze.matchAll(/@import\s+(?:url\()?['"]?([^'")]+)['"]?\)?/gi);for(const En of bn){let Wr=En[1];if(!Wr.startsWith("http")&&!Wr.startsWith("//"))if(Wr.startsWith("./")||Wr.startsWith("../")){const te=lt.split("/").filter(Re=>Re),je=Wr.split("/").filter(Re=>Re);for(const Re of je)Re===".."?te.pop():Re!=="."&&te.push(Re);Wr=te.join("/"),Wr.startsWith("http")||(Wr=lt.replace(/\/[^\/]*$/,"/")+Wr)}else Wr=lt+Wr;if(!Array.from(vr.querySelectorAll('link[rel="stylesheet"]')).find(te=>te.href===Wr||te.href.endsWith(Wr))&&Wr){const te=ht.createElement("link");te.rel="stylesheet",te.href=Wr,te.setAttribute("data-ziplofy-theme","true"),te.crossOrigin="anonymous",vr.appendChild(te),console.log(` Added @import stylesheet: ${Wr}`)}}}return!0}catch(Er){return console.error("Error injecting CSS:",Er),!1}};let pn=0;const In=15,on=()=>{if(br()){console.log(" CSS injection successful");return}if(pn++,pn<In)setTimeout(on,200);else if(console.error("Failed to inject CSS after multiple retries"),Ze.trim())try{se.setStyle(Ze),console.log(" Applied CSS via editor.setStyle fallback")}catch(Er){console.error("Failed to set CSS via editor.setStyle:",Er)}};setTimeout(on,100),setTimeout(on,300),setTimeout(on,500),setTimeout(on,800),setTimeout(on,1200),setTimeout(on,2e3),console.log(" Theme loaded into GrapesJS editor")}catch(Le){throw console.error("Failed to load theme:",Le),y(Le?.message||"Failed to load theme. Please check the console for details."),Le}},[Ae,qe,e]);f.useEffect(()=>{if(!Ae){y("No theme ID provided. Please select a theme to edit."),h(!1);return}return(async()=>{let Le=0;for(;!o.current&&Le<10;)await new Promise(Ue=>setTimeout(Ue,100)),Le++;if(!o.current){y("Editor container not found"),h(!1);return}try{h(!0),y(null);const Ue="https://backend.ziplofy.com/api",Ge=()=>{const lt={},ft=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken")||localStorage.getItem("token")||sessionStorage.getItem("token");return ft&&(lt.Authorization=`Bearer ${ft}`),lt};try{const lt=Ae&&/^[0-9a-fA-F]{24}$/.test(Ae);let ft="";lt&&qe!=="installed"?ft=`${Ue}/custom-themes/${Ae}`:ft=`${Ue}/themes/${Ae}`;const Ze=await fetch(ft,{credentials:"include",headers:Ge()});if(Ze.ok){const Nt=await Ze.json(),Mt=Nt?.data?.name||Nt?.name||"Theme";b(Mt)}}catch{}let ie=document.getElementById("style-panel-wrapper");ie||(ie=document.createElement("div"),ie.id="style-panel-wrapper",ie.className="style-panel-content-wrapper",ie.style.display="none",document.body.appendChild(ie),console.log(" Created style-panel-wrapper element for StyleManager"));const _e=QO.init({container:o.current,height:"100%",width:"100%",fromElement:!1,storageManager:!1,deviceManager:{devices:[{name:"Desktop",width:""},{name:"Tablet",width:"768px",widthMedia:"992px"},{name:"Mobile",width:"320px",widthMedia:"768px"}]},selectorManager:{componentFirst:!0},styleManager:{appendTo:"#style-panel-wrapper",sectors:[{name:"Layout",open:!0,buildProps:["width","height","min-width","min-height","max-width","max-height","padding","margin","display","position","top","right","bottom","left","z-index"]},{name:"Typography",open:!0,buildProps:["font-family","font-size","font-weight","font-style","text-decoration","text-align","color","line-height","letter-spacing"]},{name:"Background",open:!0,buildProps:["background-color","background-image","background-repeat","background-position","background-size"]},{name:"Border",open:!0,buildProps:["border","border-radius","box-shadow"]},{name:"Extra",open:!0,buildProps:["opacity","cursor","overflow","transition"]}],showComputed:!0},panels:{defaults:[]},canvas:{styles:[]}});i.current=_e,setTimeout(()=>{if(_e&&_e.setDevice){const ft={desktop:"Desktop",tablet:"Tablet",mobile:"Mobile"}[v]||v;_e.setDevice(ft),console.log(" Initial device set:",ft),setTimeout(()=>{const Ze=_e.Canvas;if(Ze){const Nt=Ze.getCanvasEl?Ze.getCanvasEl():document.querySelector(".gjs-cv-canvas"),Mt=Ze.getFrameEl();Nt&&(Nt.style.cssText=`
                    display: flex !important;
                    justify-content: center !important;
                    align-items: flex-start !important;
                    width: 100% !important;
                    height: 100% !important;
                    margin: 0 !important;
                    padding: 24px !important;
                    left: auto !important;
                    right: auto !important;
                  `),Mt&&(Mt.style.cssText=`
                    margin: 0 auto !important;
                    display: block !important;
                    left: auto !important;
                    right: auto !important;
                  `)}},200)}},100),_e.on("change:device",()=>{setTimeout(()=>{const lt=_e.Canvas;if(lt){const ft=lt.getCanvasEl?lt.getCanvasEl():document.querySelector(".gjs-cv-canvas"),Ze=lt.getFrameEl();ft&&(ft.style.cssText=`
                  display: flex !important;
                  justify-content: center !important;
                  align-items: flex-start !important;
                  width: 100% !important;
                  height: 100% !important;
                  margin: 0 !important;
                  padding: 24px !important;
                  left: auto !important;
                  right: auto !important;
                `),Ze&&(Ze.style.cssText=`
                  margin: 0 auto !important;
                  display: block !important;
                  left: auto !important;
                  right: auto !important;
                `)}},100)}),setTimeout(()=>{const lt=document.querySelector("#style-panel-wrapper");if(lt&&_e.StyleManager)try{const ft=_e.StyleManager;ft.setContainer?ft.setContainer(lt):ft.container&&(ft.container.el=lt,ft.container=lt),console.log(" StyleManager container configured:",{wrapperExists:!!lt,wrapperId:lt.id,hasSetContainer:typeof ft.setContainer=="function",hasContainer:!!ft.container})}catch(ft){console.warn("Could not update StyleManager container:",ft)}if(_e.StyleManager)try{const ft=_e.StyleManager.getSectors();console.log(" StyleManager available:",{sectors:ft?.length||0,sectorNames:ft?.map(Ze=>Ze.getName?Ze.getName():Ze.name||"Unknown")||[],wrapperExists:!!lt})}catch(ft){console.warn("StyleManager initialization check:",ft)}},500),_e.on("style:custom",()=>{});const le=()=>{const lt=_e.UndoManager;lt&&(H(lt.hasUndo()),W(lt.hasRedo()))};_e.on("update",le),_e.on("component:update",le),_e.on("style:update",le);const Xe=lt=>{try{lt&&lt.set&&(lt.set("draggable",!1),lt.set("droppable",!1),lt.set("resizable",!1))}catch{}};_e.on("component:add",lt=>{Xe(lt),lt.components&&lt.components().forEach(ft=>{Xe(ft)})}),_e.on("component:drag",lt=>(lt&&lt.stop&&lt.stop(),lt&&lt.preventDefault&&lt.preventDefault(),!1)),_e.on("component:drag:start",lt=>(lt&&lt.stop&&lt.stop(),lt&&lt.preventDefault&&lt.preventDefault(),!1)),setTimeout(()=>{const lt=_e.Canvas;if(lt){const ft=lt.getFrameEl();if(ft&&ft.contentDocument){const Ze=ft.contentDocument.createElement("style");Ze.setAttribute("data-ziplofy-disable-drag","true"),Ze.textContent=`
                * {
                  -webkit-user-drag: none !important;
                  -moz-user-drag: none !important;
                  -ms-user-drag: none !important;
                  user-drag: none !important;
                }
                .gjs-selected {
                  cursor: default !important;
                }
                .gjs-dashed * {
                  cursor: default !important;
                }
              `,ft.contentDocument.head.appendChild(Ze)}}},500),setTimeout(()=>{try{const lt=_e.getWrapper();if(lt){const ft=[],Ze=Nt=>{Nt&&(ft.push(Nt),(Nt.components?Nt.components():[]).forEach(vt=>Ze(vt)))};Ze(lt),ft.forEach(Nt=>{Xe(Nt)}),console.log(` Disabled drag on ${ft.length} components`)}}catch(lt){console.warn("Error disabling drag on components:",lt)}},1e3);const dt=lt=>{if(!lt)return null;const ft=lt.getEl();if(!ft)return null;const Ze=ft.tagName?.toLowerCase(),Nt=typeof ft.className=="string"?ft.className:ft.className?.baseVal||"",Mt=ft.id||"",vt=Nt.toLowerCase().split(/\s+/).filter(Jt=>Jt);for(const[Jt,wr]of Object.entries(o1))for(const Wt of wr)try{const ye=Wt.toLowerCase().trim();if(ye===Ze)return Jt;if(ye.startsWith(".")){const wt=ye.substring(1).toLowerCase();if(vt.includes(wt)||Nt.toLowerCase().includes(wt))return Jt}if(ye.startsWith("#")){const wt=ye.substring(1).toLowerCase();if(Mt.toLowerCase()===wt)return Jt}if(ye.includes("["))try{if(ft.matches&&ft.matches(Wt))return Jt}catch{}let Be=ft,tt=0;for(;Be&&tt<5;)try{if(Be.matches&&Be.matches(Wt))return Jt;const wt=Be.tagName?.toLowerCase(),Ut=(Be.className||"").toString().toLowerCase(),er=(Be.id||"").toLowerCase();if(ye===wt||ye.startsWith(".")&&Ut.includes(ye.substring(1))||ye.startsWith("#")&&er===ye.substring(1))return Jt;Be=Be.parentElement,tt++}catch{break}}catch{}return Ze==="header"||vt.some(Jt=>Jt.includes("header"))?"Header":Ze==="footer"||vt.some(Jt=>Jt.includes("footer"))?"Footer":Ze==="nav"||vt.some(Jt=>Jt.includes("nav"))?"Header":vt.some(Jt=>Jt.includes("hero"))?"Hero section":vt.some(Jt=>Jt.includes("product")&&Jt.includes("card"))?"Product card":vt.some(Jt=>Jt.includes("product")&&Jt.includes("highlight"))?"Product highlight":null};_e.on("component:selected",lt=>{console.log(" Component selected:",lt);const Ze=dt(lt)||lt.getName()||lt.get("tagName")||"Selected Element";k(Ze),F(!1),P(!0);const Nt=()=>{const Mt=document.querySelector(".style-editor-panel"),vt=Mt?.querySelector("#style-panel-wrapper"),Jt=document.getElementById("style-panel-wrapper");if(!vt){console.warn(" React wrapper not found, retrying..."),setTimeout(Nt,100);return}if(!_e.StyleManager){console.error(" StyleManager not available");return}Mt&&(Mt.style.display="flex",Mt.style.visibility="visible",Mt.style.opacity="1"),vt.style.display="block",vt.style.visibility="visible",vt.style.opacity="1",vt.style.width="100%",vt.style.height="100%";const wr=_e.StyleManager;if(wr.container?wr.container.el=vt:wr.container={el:vt},wr.config&&(wr.config.appendTo=vt),wr.view&&wr.view.container&&(wr.view.container=vt),Jt){const ye=Jt.querySelector(".gjs-sm");ye&&ye.parentElement===Jt&&(vt.innerHTML="",vt.appendChild(ye),console.log(" Moved StyleManager content to React panel"))}if(_e.select(lt),wr.setTarget)try{wr.setTarget(lt),console.log(" Set StyleManager target to component")}catch{console.warn("setTarget not available, using default behavior")}vt.innerHTML="";try{wr.render(),console.log(" StyleManager.render() called")}catch(ye){if(console.error(" Error rendering StyleManager:",ye),wr.view&&wr.view.render)try{wr.view.render(),wr.view.el&&wr.view.el.parentElement!==vt&&vt.appendChild(wr.view.el),console.log(" StyleManager view rendered")}catch(Be){console.error(" Error with alternative render:",Be)}}const Wt=(ye=0)=>{if(!vt.querySelector(".gjs-sm")&&Jt){const wt=Jt.querySelector(".gjs-sm");wt&&(vt.innerHTML="",vt.appendChild(wt),console.log(" Moved StyleManager from static wrapper"))}const tt=vt.querySelector(".gjs-sm");if(tt){const wt=tt.querySelectorAll(".gjs-sm-sector");wt.length>0?(wt.forEach(Ut=>{const er=Ut;er.classList.remove("gjs-sm-sector--closed"),er.classList.add("gjs-sm-sector--open");const zr=er.querySelector(".gjs-sm-sector-content");zr&&(zr.style.cssText="display: block !important; visibility: visible !important; opacity: 1 !important; max-height: none !important;"),er.querySelectorAll(".gjs-sm-properties").forEach(_n=>{_n.style.cssText="display: block !important; visibility: visible !important; opacity: 1 !important;"})}),console.log(" StyleManager ready with",wt.length,"sectors")):ye<3?setTimeout(()=>Wt(ye+1),100):(console.warn(" No sectors found after multiple attempts"),setTimeout(()=>{vt.innerHTML="",wr.render(),setTimeout(()=>Wt(0),200)},200))}else ye<3?setTimeout(()=>Wt(ye+1),100):console.error(" StyleManager element not found after multiple attempts")};setTimeout(()=>Wt(0),100),setTimeout(()=>Wt(0),300),setTimeout(()=>Wt(0),500)};requestAnimationFrame(()=>{setTimeout(Nt,150)})}),_e.on("component:deselected",()=>{console.log(" Component deselected"),P(!1),F(!0),k(null)}),_e.on("canvas:click",lt=>{console.log("Canvas clicked:",lt)}),_e.on("component:update",()=>{if(_e.getSelected()&&N&&(console.log("Component updated, ensuring StyleManager is rendered"),document.querySelector("#style-panel-wrapper")&&_e.StyleManager))try{_e.StyleManager.render()}catch(Ze){console.warn("Error re-rendering StyleManager on component update:",Ze)}}),_e.on("canvas:frame:load",()=>{console.log("Canvas frame loaded, ensuring CSS is injected"),setTimeout(()=>{const lt=_e.Canvas;if(lt){const ft=lt.getFrameEl();if(ft&&ft.contentDocument){const Nt=ft.contentDocument.head;Nt&&Nt.querySelectorAll("[data-ziplofy-theme]").length===0&&console.log("No CSS found, triggering re-injection...")}}},100)});try{await Oe(_e)}catch(lt){console.error("Failed to load theme:",lt),y(lt?.message||"Failed to load theme. Please check if the theme exists and you have access to it."),h(!1);return}h(!1)}catch(Ue){console.error("Failed to initialize editor:",Ue),y(Ue?.message||"Failed to initialize editor"),h(!1)}})(),()=>{i.current&&(i.current.destroy(),i.current=null)}},[Ae,Oe]);const ze=f.useCallback(()=>{const se=i.current;if(!se||typeof se.getHtml!="function")return;const Le=se.getHtml()||"";let Ue="";se.getCss&&(Ue=se.getCss()||""),Y(Ge=>{const ie=Ge.map(_e=>_e.id===fe?{..._e,html:Le,css:Ue}:_e);return Se.current=ie,ie})},[fe]),We=f.useCallback(async se=>{if(se===fe)return;const Le=i.current;if(!Le)return;ze();const Ue=Se.current.find(Ge=>Ge.id===se);if(!Ue){console.warn(`Page ${se} not found`);return}if(Ee(se),Le.setComponents(Ue.html),Ue.css)try{const Ge=Le.Canvas;if(Ge){const ie=Ge.getFrameEl();if(ie&&ie.contentDocument){const _e=ie.contentDocument,le=_e.head||_e.getElementsByTagName("head")[0];if(le){le.querySelectorAll("#ziplofy-theme-styles, style[data-ziplofy-theme]").forEach(dt=>dt.remove());const Fe=_e.createElement("style");Fe.id="ziplofy-theme-styles",Fe.setAttribute("data-ziplofy-theme","true"),Fe.textContent=Ue.css,le.appendChild(Fe)}}}}catch(Ge){console.error("Error injecting page CSS:",Ge)}P(!1),F(!0),k(null),console.log(` Switched to page: ${Ue.name}`)},[fe,ze]),pt=se=>{Te(Le=>({...Le,[se]:!Le[se]}))},Pt=se=>{const Le=i.current;if(!Le)return;k(se);const Ue=o1[se]||[],Ge=Le.getWrapper();if(Ge)for(const ie of Ue)try{const _e=Ge.find(ie)[0];if(_e){const le=Le.Canvas.getFrameEl();if(le&&le.contentWindow){const Xe=_e.getEl();Xe&&le.contentWindow.document.contains(Xe)&&Xe.scrollIntoView({behavior:"smooth",block:"center"})}break}}catch{continue}},ee=(se,Le)=>{Le.stopPropagation();const Ue=i.current;if(!Ue)return;k(se),P(!0),F(!1);const Ge=o1[se]||[],ie=Ue.getWrapper();if(ie)for(const _e of Ge)try{const le=ie.find(_e)[0];if(le){Ue.select(le);const Xe=Ue.Canvas.getFrameEl();if(Xe&&Xe.contentWindow){const Fe=le.getEl();Fe&&Xe.contentWindow.document.contains(Fe)&&Fe.scrollIntoView({behavior:"smooth",block:"center"})}break}}catch{continue}};f.useEffect(()=>{const se=i.current;if(!se){console.warn("Editor not available for device change");return}const Ue={desktop:"Desktop",tablet:"Tablet",mobile:"Mobile"}[v]||v;console.log(" Changing device to:",Ue);try{se.setDevice&&typeof se.setDevice=="function"?(se.setDevice(Ue),console.log(" Device set via API:",Ue),se.refresh&&se.refresh(),se.trigger&&se.trigger("canvas:frame:load"),setTimeout(()=>{const Ge=se.Canvas;if(!Ge){console.warn("Canvas not available");return}const ie=Ge.getFrameEl(),_e=document.querySelector(".gjs-cv-canvas");_e&&(_e.style.cssText=`
              display: flex !important;
              justify-content: center !important;
              align-items: flex-start !important;
              width: 100% !important;
              height: 100% !important;
              margin: 0 !important;
              padding: 24px !important;
              left: auto !important;
              right: auto !important;
            `),ie&&(ie.style.cssText=`
              margin: 0 auto !important;
              display: block !important;
              left: auto !important;
              right: auto !important;
            `);try{const le=se.getDevice?se.getDevice():null;le&&(console.log(" Device verification - Current:",le,"Expected:",Ue),le!==Ue&&(console.warn(" Device mismatch, retrying..."),setTimeout(()=>{se.setDevice(Ue),se.refresh&&se.refresh()},100)))}catch{console.log("Device verification skipped (getDevice not available)")}},100)):console.error(" setDevice method not available on editor")}catch(Ge){console.error(" Error setting device:",Ge)}},[v]),f.useEffect(()=>{if(N){const se=i.current;se&&se.StyleManager&&setTimeout(()=>{const Ue=document.querySelector("#style-panel-wrapper")||document.querySelector(".style-panel-content-wrapper");if(Ue)try{const Ge=se.getSelected();if(!Ge){console.warn("No component selected, cannot render StyleManager");return}const ie=document.querySelector(".style-editor-panel"),le=ie?.querySelector("#style-panel-wrapper")||Ue;ie&&(ie.style.display="flex",ie.style.visibility="visible",ie.style.opacity="1"),le.style.display="block",le.style.visibility="visible",le.style.opacity="1",le.style.width="100%",le.style.height="100%";const Xe=se.StyleManager;if(Xe.container?Xe.container.el=le:Xe.container={el:le},Xe.config&&(Xe.config.appendTo=le),Xe.view&&Xe.view.container&&(Xe.view.container=le),se.select(Ge),Xe.setTarget)try{Xe.setTarget(Ge),console.log(" Set StyleManager target to component")}catch{console.warn("setTarget not available, using default behavior")}le.innerHTML="";try{Xe.render(),console.log(" StyleManager.render() called in useEffect")}catch(dt){if(console.error(" Error rendering StyleManager:",dt),Xe.view&&Xe.view.render)try{Xe.view.render(),Xe.view.el&&Xe.view.el.parentElement!==le&&le.appendChild(Xe.view.el),console.log(" StyleManager view rendered")}catch(lt){console.error(" Error with alternative render:",lt)}}const Fe=(dt=0)=>{const lt=le.querySelector(".gjs-sm");if(lt){const ft=lt.querySelectorAll(".gjs-sm-sector");ft.length>0?(ft.forEach(Ze=>{const Nt=Ze;Nt.classList.remove("gjs-sm-sector--closed"),Nt.classList.add("gjs-sm-sector--open");const Mt=Nt.querySelector(".gjs-sm-sector-content");Mt&&(Mt.style.cssText="display: block !important; visibility: visible !important; opacity: 1 !important; max-height: none !important;"),Nt.querySelectorAll(".gjs-sm-properties").forEach(Jt=>{Jt.style.cssText="display: block !important; visibility: visible !important; opacity: 1 !important;"})}),console.log(" StyleManager ready with",ft.length,"sectors")):dt<3&&setTimeout(()=>Fe(dt+1),100)}else dt<3?setTimeout(()=>Fe(dt+1),100):(console.warn(" StyleManager element not found after multiple attempts, forcing re-render"),le.innerHTML="",Xe.render(),setTimeout(()=>Fe(0),200))};setTimeout(()=>Fe(0),100),setTimeout(()=>Fe(0),300),setTimeout(()=>Fe(0),500)}catch(Ge){console.error("Error rendering StyleManager:",Ge)}},100)}},[N]);const Ne=()=>{const se=i.current;se&&se.UndoManager.undo()},Ie=()=>{const se=i.current;se&&se.UndoManager.redo()},ne=f.useCallback(se=>new Promise(Le=>{const Ue=document.createElement("canvas");Ue.width=800,Ue.height=600;const Ge=Ue.getContext("2d");if(!Ge){const Fe=`<svg xmlns="http://www.w3.org/2000/svg" width="800" height="600">
          <defs>
            <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
              <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
            </linearGradient>
          </defs>
          <rect width="800" height="600" fill="url(#grad)"/>
          <text x="400" y="280" font-family="Arial, sans-serif" font-size="48" font-weight="bold" fill="white" text-anchor="middle">${se}</text>
          <text x="400" y="340" font-family="Arial, sans-serif" font-size="24" fill="rgba(255,255,255,0.9)" text-anchor="middle">Custom Theme</text>
        </svg>`,dt=new Blob([Fe],{type:"image/svg+xml"});Le(dt);return}const ie=Ge.createLinearGradient(0,0,Ue.width,Ue.height);ie.addColorStop(0,"#667eea"),ie.addColorStop(1,"#764ba2"),Ge.fillStyle=ie,Ge.fillRect(0,0,Ue.width,Ue.height),Ge.fillStyle="rgba(255, 255, 255, 0.1)",Ge.beginPath(),Ge.arc(100,100,60,0,Math.PI*2),Ge.fill(),Ge.beginPath(),Ge.arc(700,500,80,0,Math.PI*2),Ge.fill(),Ge.beginPath(),Ge.arc(650,100,40,0,Math.PI*2),Ge.fill(),Ge.fillStyle="#ffffff",Ge.font="bold 56px Arial, sans-serif",Ge.textAlign="center",Ge.textBaseline="middle";const _e=700;let le=56,Xe=Ge.measureText(se).width;Xe>_e&&(le=_e/Xe*le,Ge.font=`bold ${le}px Arial, sans-serif`),Ge.fillText(se,Ue.width/2,Ue.height/2-30),Ge.font="24px Arial, sans-serif",Ge.fillStyle="rgba(255, 255, 255, 0.9)",Ge.fillText("Custom Theme",Ue.width/2,Ue.height/2+40),Ue.toBlob(Fe=>{if(Fe)Le(Fe);else{const dt=`<svg xmlns="http://www.w3.org/2000/svg" width="800" height="600">
            <defs>
              <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
              </linearGradient>
            </defs>
            <rect width="800" height="600" fill="url(#grad)"/>
            <text x="400" y="280" font-family="Arial, sans-serif" font-size="48" font-weight="bold" fill="white" text-anchor="middle">${se}</text>
            <text x="400" y="340" font-family="Arial, sans-serif" font-size="24" fill="rgba(255,255,255,0.9)" text-anchor="middle">Custom Theme</text>
          </svg>`;Le(new Blob([dt],{type:"image/svg+xml"}))}},"image/png")}),[]),M=f.useCallback(se=>{try{return JSON.stringify(se).replace(/</g,"\\u003c").replace(/>/g,"\\u003e").replace(/&/g,"\\u0026")}catch(Le){return console.error("Error encoding pages data:",Le),"[]"}},[]),U=f.useCallback((se,Le,Ue)=>{const Ge=(Le||"Ziplofy Theme").replace(/</g,"&lt;").replace(/>/g,"&gt;"),ie=M(se);return`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>${Ge}</title>
  <style>
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      line-height: 1.6;
      color: #1e1e1e;
      background: #ffffff;
    }
    * {
      box-sizing: border-box;
    }
    .ziplofy-page {
      display: none;
      width: 100%;
      min-height: 100vh;
    }
    .ziplofy-page.active {
      display: block;
    }
    .ziplofy-page > .gjs-wrapper-body,
    .ziplofy-page.gjs-wrapper-body {
      width: 100%;
      min-height: 100vh;
    }
    ${Ue||""}
  </style>
</head>
<body>
  <div id="ziplofy-page-container"></div>
  <script id="ziplofy-pages-data" type="application/json">${ie}<\/script>
  <script>
    (function() {
      try {
        const container = document.getElementById('ziplofy-page-container');
        const dataEl = document.getElementById('ziplofy-pages-data');
        if (!container || !dataEl) return;
        const pagesText = dataEl.textContent || dataEl.innerText || '[]';
        const pages = JSON.parse(pagesText);
        const normalizeId = function(value) {
          if (value === null || value === undefined) return '';
          return String(value).replace(/^#/, '').trim();
        };
        const renderPages = function() {
          container.innerHTML = '';
          pages.forEach(function(page, index) {
            const wrapper = document.createElement('div');
            wrapper.className = 'ziplofy-page gjs-wrapper-body' + (index === 0 ? ' active' : '');
            wrapper.setAttribute('data-page-id', page.id || ('page-' + (index + 1)));
            wrapper.style.display = index === 0 ? 'block' : 'none';
            wrapper.innerHTML = page.html || '';
            container.appendChild(wrapper);
          });
        };
        const showPage = function(pageId) {
          const normalizedRequest = normalizeId(pageId);
          if (!normalizedRequest) return false;
          const pages = document.querySelectorAll('.ziplofy-page');
          let found = false;
          pages.forEach(function(pageEl) {
            const pageIdAttr = pageEl.getAttribute('data-page-id');
            const normalizedPageId = normalizeId(pageIdAttr);
            if (normalizedPageId === normalizedRequest) {
              pageEl.classList.add('active');
              pageEl.style.display = 'block';
              found = true;
            } else {
              pageEl.classList.remove('active');
              pageEl.style.display = 'none';
            }
          });
          return found;
        };
        renderPages();
        const hashChange = function() {
          const hash = window.location.hash.replace(/^#/, '');
          if (hash) {
            showPage(hash);
          } else {
            showPage(pages[0]?.id || 'page-1');
          }
        };
        window.addEventListener('hashchange', hashChange);
        hashChange();
      } catch (e) {
        console.error('Error initializing pages:', e);
      }
    })();
  <\/script>
</body>
</html>`},[M]);f.useCallback((se,Le,Ue)=>{const Ge=(Ue||"Ziplofy Theme").replace(/</g,"&lt;").replace(/>/g,"&gt;"),ie=Le.split(`
`),_e=[],le=[];ie.forEach(Fe=>{const dt=Fe.trim();dt.startsWith("@import")?_e.push(dt):le.push(Fe)});const Xe=_e.join(`
`)+(_e.length>0?`

`:"")+le.join(`
`);return`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>${Ge}</title>
  <style>
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      line-height: 1.6;
      color: #1e1e1e;
      background: #ffffff;
    }
    * {
      box-sizing: border-box;
    }
    ${Xe}
  </style>
</head>
<body>
  ${se}
</body>
</html>`},[]);const J=f.useCallback(async se=>{try{const Le=i.current;if(!Le){alert("Editor not ready");return}A(!0),await new Promise(Wt=>requestAnimationFrame(Wt)),await new Promise(Wt=>setTimeout(Wt,150)),Le.trigger&&Le.trigger("update");const Ue=Le.getWrapper();Ue&&Ue.view&&Ue.view.render?.();let Ge="";try{Ue?(Ge=Le.getHtml({component:Ue})||"",(!Ge||Ge.trim().length===0)&&(Ge=Le.getHtml()||"")):Ge=Le.getHtml()||"",(!Ge||Ge.trim().length===0)&&(console.warn(" No HTML from editor, using default"),Ge="<div>Empty Theme</div>")}catch(Wt){console.error("Error getting HTML from editor:",Wt),Ge=Le.getHtml()||"<div>Empty Theme</div>"}let ie="";const _e=[];try{if(Le.getCss){const Wt=Le.getCss()||"";Wt&&Wt.trim().length>0&&(_e.push(Wt),console.log(" Method 1 - Standard getCss():",Wt.length,"chars"))}}catch(Wt){console.warn("Error getting CSS from editor.getCss():",Wt)}try{if(Le.CssComposer){const Wt=Le.CssComposer.getAll();if(Wt&&Wt.length>0){const ye=Wt.map(Be=>{try{if(Be.toCSS)return Be.toCSS();const tt=Be.selectorsToString?Be.selectorsToString():Be.getSelectors?Be.getSelectors().join(", "):"",wt=Be.getStyle?Be.getStyle():{};if(tt&&wt&&Object.keys(wt).length>0){const Ut=Object.entries(wt).map(([er,zr])=>`  ${er}: ${zr};`).join(`
`);return`${tt} {
${Ut}
}`}return""}catch{return""}}).filter(Boolean).join(`

`);ye&&ye.trim().length>0&&(_e.push(ye),console.log(" Method 2 - CssComposer:",ye.length,"chars"))}}}catch(Wt){console.warn("Failed to get CSS from CssComposer:",Wt)}if(ie=_e.join(`

`),Ue){const Wt=Ue.getId();if(Wt&&ie.includes(`#${Wt}`)){console.log(` Converting wrapper ID selector #${Wt} to class .gjs-wrapper-body`);const ye=new RegExp(`#${Wt}(?![a-zA-Z0-9_-])`,"g");ie=ie.replace(ye,".gjs-wrapper-body"),console.log(" Converted wrapper selectors to class-based")}}try{if(Ue){const Wt=Ue.getStyle?Ue.getStyle():null;if(Wt&&Object.keys(Wt).length>0){const Be=`.gjs-wrapper-body {
${Object.entries(Wt).map(([tt,wt])=>`  ${tt}: ${wt};`).join(`
`)}
}`;ie.includes(".gjs-wrapper-body")?ie=ie.replace(/\.gjs-wrapper-body\s*\{[^}]*\}/g,Be):ie=Be+`

`+ie,console.log(" Method 3 - Wrapper styles:",Object.keys(Wt).length,"properties")}}}catch(Wt){console.warn("Failed to extract wrapper styles:",Wt)}try{const Wt=Le.Canvas;if(Wt){const ye=Wt.getFrameEl();if(ye&&ye.contentDocument){const Be=ye.contentDocument,tt=Be.querySelectorAll("style"),wt=[];tt.forEach(Ur=>{Ur.textContent&&Ur.textContent.trim()&&wt.push(Ur.textContent)}),wt.length>0&&(ie+=`

/* Canvas Frame Style Tags */
`+wt.join(`

`),console.log(" Method 4a - Canvas frame style tags:",tt.length));const Ut=Be.querySelectorAll('link[rel="stylesheet"]'),er=()=>{const Ur={},ar=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken")||localStorage.getItem("token")||sessionStorage.getItem("token");return ar&&(Ur.Authorization=`Bearer ${ar}`),Ur},zr=Array.from(Ut).map(async Ur=>{const br=Ur.href;if(br&&!br.startsWith("data:"))try{const pn=await fetch(br,{credentials:"include",headers:er()});if(pn.ok)return await pn.text()||""}catch(pn){return console.warn("Failed to fetch stylesheet:",br,pn),`@import url('${br}');`}return""}),_n=(await Promise.all(zr)).filter(Ur=>Ur.trim()).join(`

`);_n&&(ie+=`

/* Canvas Frame External Stylesheets */
`+_n,console.log(" Method 4b - Canvas frame stylesheets:",Ut.length));try{if(Be.body){const ar=Array.from(Be.styleSheets),br=[];ar.forEach(pn=>{try{pn.cssRules&&Array.from(pn.cssRules).forEach(In=>{In.cssText&&br.push(In.cssText)})}catch{}}),br.length>0&&(ie+=`

/* Computed Stylesheet Rules */
`+br.join(`

`),console.log(" Method 4c - Computed stylesheet rules:",br.length))}}catch(Ur){console.warn("Failed to extract computed stylesheet rules:",Ur)}}}}catch(Wt){console.warn("Failed to get CSS from canvas frame:",Wt)}if(l.current&&l.current.trim().length>0){const Wt=l.current.split(`
`),ye=[],Be=[];Wt.forEach(wt=>{const Ut=wt.trim();Ut.startsWith("@import")?ye.push(Ut):Be.push(wt)}),ie=ye.join(`
`)+(ye.length>0?`

`:"")+Be.join(`
`)+`

/* GrapesJS Editor Styles */
`+ie,ie=ie.replace(/color\s*:\s*#000000\s*;?/gi,"/* color removed - using original theme color */"),ie=ie.replace(/color\s*:\s*black\s*;?/gi,"/* color removed - using original theme color */"),ie=ie.replace(/color\s*:\s*rgb\(0,\s*0,\s*0\)\s*;?/gi,"/* color removed - using original theme color */"),console.log(" Method 5 - Original theme CSS:",l.current.length,"chars",{imports:ye.length,regularCss:Be.length})}if((!ie||ie.trim().length===0)&&(console.warn(" WARNING: No CSS found! Using original theme CSS if available."),ie=l.current||""),ie.trim().length===0)throw console.error(" ERROR: No CSS content to save!"),new Error("No CSS content found. Cannot save theme without CSS.");const le={totalLength:ie.length,hasOriginalCss:l.current&&l.current.length>0,originalCssLength:l.current?.length||0,hasImports:ie.includes("@import"),hasWrapperStyles:ie.includes(".gjs-wrapper-body"),hasBackgroundImages:ie.includes("background-image")||ie.includes("background:"),lineCount:ie.split(`
`).length,preview:ie.substring(0,500)};console.log(" Final CSS Statistics:",le),console.log(" Final CSS length:",ie.length,"chars"),ie.length<100&&console.warn(" WARNING: CSS content is very short. Theme may not display correctly.");const Xe=Wt=>{const ye=[],Be=/<img[^>]+src=["']([^"']+)["']/gi,tt=/srcset=["']([^"']+)["']/gi,wt=/background-image\s*:\s*url\(["']?([^"')]+)["']?\)/gi;let Ut;for(;(Ut=Be.exec(Wt))!==null;){const er=Ut[1];er&&!er.startsWith("http")&&!er.startsWith("data:")&&!er.startsWith("#")&&!er.startsWith("mailto:")&&ye.push(er)}for(;(Ut=tt.exec(Wt))!==null;)Ut[1].split(",").forEach(zr=>{const rn=zr.trim().split(/\s+/)[0];rn&&!rn.startsWith("http")&&!rn.startsWith("data:")&&!rn.startsWith("#")&&ye.push(rn)});for(;(Ut=wt.exec(Wt))!==null;){const er=Ut[1];er&&!er.startsWith("http")&&!er.startsWith("data:")&&!er.startsWith("#")&&ye.push(er)}return[...new Set(ye.map(er=>er.startsWith("/")?er.substring(1):er))]};ze();const Fe=Se.current.map(Wt=>Wt.id===fe?{...Wt,html:Ge,css:ie}:Wt),dt=Fe.map(Wt=>Wt.css||"").filter(Boolean).join(`

`),lt=U(Fe,x||"My Theme",dt),ft=lt.match(/<style[^>]*>([\s\S]*?)<\/style>/i),Ze=ft?ft[1].length:0;if(console.log(" Built export HTML:",{htmlLength:lt.length,cssLength:ie.length,embeddedCssLength:Ze,cssEmbedded:Ze>0,htmlPreview:lt.substring(0,300),cssPreview:ie.substring(0,200)}),Ze===0)throw console.error(" ERROR: CSS was not embedded in HTML document!"),new Error("CSS embedding failed. Cannot save theme without CSS.");Ze<ie.length*.9&&console.warn(" WARNING: CSS length mismatch. Some CSS may be missing from HTML.");const Nt=Xe(lt);console.log(" Found image references:",Nt);const Mt=await ne(x||"My Theme"),vt=Ae&&/^[0-9a-fA-F]{24}$/.test(Ae),Jt=qe==="installed";let wr=Ae||"";if(vt&&!Jt)try{const Wt=await s(Ae,x||"My Theme",lt,ie,Mt);if(Wt)wr=Wt._id;else{const ye=await t(x||"My Theme",lt,ie,Mt);if(ye){wr=ye._id;const Be=new URL(window.location.href);Be.searchParams.set("id",wr),Be.searchParams.delete("type"),window.history.replaceState({},"",Be.toString())}}}catch(Wt){if(Wt?.response?.status===404){const ye=await t(x||"My Theme",lt,ie,Mt);if(ye){wr=ye._id;const Be=new URL(window.location.href);Be.searchParams.set("id",wr),Be.searchParams.delete("type"),window.history.replaceState({},"",Be.toString())}}else throw Wt}else{console.log("Creating new theme...",{name:x||"My Theme",htmlLength:lt.length,cssLength:ie.length,hasThumbnail:!!Mt});const Wt=await t(x||"My Theme",lt,ie,Mt);if(!Wt)throw console.error("createTheme returned null - check console for error details"),new Error("Failed to create theme. Check console for details.");wr=Wt._id;const ye=new URL(window.location.href);ye.searchParams.set("id",wr),ye.searchParams.delete("type"),window.history.replaceState({},"",ye.toString())}A(!1),se&&(localStorage.setItem("ziplofy.appliedCustomThemeId",wr),I(!0),setTimeout(()=>I(!1),3e3))}catch(Le){A(!1),console.error("Error saving theme:",Le),console.error("Error details:",{message:Le?.message,response:Le?.response,status:Le?.response?.status,data:Le?.response?.data,code:Le?.code});let Ue="Failed to save theme";Le?.code==="ECONNABORTED"||Le?.message?.includes("timeout")?Ue="Upload timeout: The theme is very large. Please try again or reduce the theme size.":Le?.response?.status===400?(Ue=Le?.response?.data?.message||"Bad Request: Invalid theme data. Please check the console for details.",console.error("400 Bad Request details:",Le?.response?.data)):Le?.response?.status===500?Ue="Server error: The theme might be too large or there was a server issue. Please try again or reduce the theme size.":Le?.response?.status===413||Le?.message?.includes("File too large")||Le?.message?.includes("MulterError")?Ue="Theme too large: The theme exceeds the maximum size limit (500MB). Please reduce the size of your theme content.":Le?.response?.data?.message?Ue=Le.response.data.message:Le?.message&&(Ue=Le.message),alert(Ue)}},[Ae,qe,x,t,s,U,ne,ze,fe]),ce=()=>{J(!1)},ue=()=>{J(!0)},xe=f.useCallback(async()=>{try{const se=i.current;if(!se||typeof se.getHtml!="function"){alert("Editor not ready");return}se.trigger&&se.trigger("update");const Le=se.getWrapper();Le&&Le.view&&Le.view.render?.();let Ue="";try{Le?(Ue=se.getHtml({component:Le})||"",(!Ue||Ue.trim().length===0)&&(Ue=se.getHtml()||"")):Ue=se.getHtml()||"",(!Ue||Ue.trim().length===0)&&(console.warn(" No HTML from editor, using default"),Ue="<div>Empty Theme</div>")}catch(Fe){console.error("Error getting HTML from editor:",Fe),Ue=se.getHtml()||"<div>Empty Theme</div>"}let Ge="";const ie=[];try{if(se.getCss){const Fe=se.getCss()||"";Fe&&Fe.trim().length>0&&ie.push(Fe)}}catch(Fe){console.warn("Error getting CSS from editor.getCss():",Fe)}try{if(se.CssComposer){const Fe=se.CssComposer.getAll();if(Fe&&Fe.length>0){const dt=Fe.map(lt=>{try{if(lt.toCSS)return lt.toCSS();const ft=lt.selectorsToString?lt.selectorsToString():lt.getSelectors?lt.getSelectors().join(", "):"",Ze=lt.getStyle?lt.getStyle():{};if(ft&&Ze&&Object.keys(Ze).length>0){const Nt=Object.entries(Ze).map(([Mt,vt])=>`  ${Mt}: ${vt};`).join(`
`);return`${ft} {
${Nt}
}`}return""}catch{return""}}).filter(Boolean).join(`

`);dt&&dt.trim().length>0&&ie.push(dt)}}}catch(Fe){console.warn("Failed to get CSS from CssComposer:",Fe)}if(Ge=ie.join(`

`),Le){const Fe=Le.getId();if(Fe&&Ge.includes(`#${Fe}`)){const dt=new RegExp(`#${Fe}(?![a-zA-Z0-9_-])`,"g");Ge=Ge.replace(dt,".gjs-wrapper-body")}}try{if(Le){const Fe=Le.getStyle?Le.getStyle():null;if(Fe&&Object.keys(Fe).length>0){const lt=`.gjs-wrapper-body {
${Object.entries(Fe).map(([ft,Ze])=>`  ${ft}: ${Ze};`).join(`
`)}
}`;Ge.includes(".gjs-wrapper-body")?Ge=Ge.replace(/\.gjs-wrapper-body\s*\{[^}]*\}/g,lt):Ge=lt+`

`+Ge}}}catch(Fe){console.warn("Failed to extract wrapper styles:",Fe)}try{const Fe=se.Canvas;if(Fe){const dt=Fe.getFrameEl();if(dt&&dt.contentDocument){const lt=dt.contentDocument,ft=lt.querySelectorAll("style"),Ze=[];ft.forEach(Wt=>{Wt.textContent&&Wt.textContent.trim()&&Ze.push(Wt.textContent)}),Ze.length>0&&(Ge+=`

/* Canvas Frame Style Tags */
`+Ze.join(`

`));const Nt=lt.querySelectorAll('link[rel="stylesheet"]'),Mt=()=>{const Wt={},ye=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken")||localStorage.getItem("token")||sessionStorage.getItem("token");return ye&&(Wt.Authorization=`Bearer ${ye}`),Wt},vt=Array.from(Nt).map(async Wt=>{const Be=Wt.href;if(Be&&!Be.startsWith("data:"))try{const tt=await fetch(Be,{credentials:"include",headers:Mt()});if(tt.ok)return await tt.text()||""}catch(tt){return console.warn("Failed to fetch stylesheet:",Be,tt),`@import url('${Be}');`}return""}),wr=(await Promise.all(vt)).filter(Wt=>Wt.trim()).join(`

`);wr&&(Ge+=`

/* Canvas Frame External Stylesheets */
`+wr)}}}catch(Fe){console.warn("Failed to get CSS from canvas frame:",Fe)}if(l.current&&l.current.trim().length>0){const Fe=l.current.split(`
`),dt=[],lt=[];Fe.forEach(Ze=>{const Nt=Ze.trim();Nt.startsWith("@import")?dt.push(Nt):lt.push(Ze)}),Ge=dt.join(`
`)+(dt.length>0?`

`:"")+lt.join(`
`)+`

/* GrapesJS Editor Styles */
`+Ge}(!Ge||Ge.trim().length===0)&&(Ge=l.current||""),ze();const _e=Se.current.map(Fe=>Fe.id===fe?{...Fe,html:Ue,css:Ge}:Fe),le=_e.map(Fe=>Fe.css||"").filter(Boolean).join(`

`),Xe=U(_e,x||"Theme Preview",le);console.log(" Preview HTML built:",{htmlLength:Xe.length,cssLength:Ge.length,containsCss:Xe.includes("<style>")}),oe(""),setTimeout(()=>{oe(Xe),D(!0),setTimeout(()=>{const Fe=document.getElementById("basic-elementor-preview-iframe");Fe&&Fe.contentDocument&&Xe&&(Fe.contentDocument.open(),Fe.contentDocument.write(Xe),Fe.contentDocument.close(),console.log(" Forced iframe content update"))},100)},50)}catch(se){console.error("Preview error:",se),alert("Failed to preview theme")}},[x,U,l,fe,ze]),he=["Hero section","Logo banner","Collection list: Grid","Product highlight","Product card","Featured collection","Collection list: Carousel","Marquee"];return n.jsxs("div",{className:"basic-elementor-container",children:[n.jsxs("div",{className:"basic-elementor-toolbar",children:[n.jsxs("div",{className:"toolbar-left",children:[n.jsx("button",{onClick:()=>r("/themes/all-themes"),className:"back-button",children:" Back"}),n.jsx("div",{className:"theme-name",children:x||"Editing Theme"}),G.length>1&&n.jsx("div",{className:"page-dropdown-wrapper",children:n.jsx("select",{value:fe,onChange:se=>We(se.target.value),className:"page-dropdown",title:"Select page",children:G.map(se=>n.jsx("option",{value:se.id,children:se.name},se.id))})})]}),n.jsx("div",{className:"toolbar-center",children:n.jsxs("div",{className:"device-selector",children:[n.jsx("button",{className:`device-btn ${v==="desktop"?"active":""}`,onClick:se=>{se.preventDefault(),se.stopPropagation();const Le=se.nativeEvent;Le&&typeof Le.stopImmediatePropagation=="function"&&Le.stopImmediatePropagation(),console.log(" Desktop button clicked"),v!=="desktop"&&j("desktop")},title:"Desktop View",type:"button","aria-label":"Switch to Desktop View",children:n.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[n.jsx("rect",{x:"2",y:"3",width:"12",height:"9",rx:"1",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),n.jsx("path",{d:"M5 12h6",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}),n.jsx("button",{className:`device-btn ${v==="tablet"?"active":""}`,onClick:se=>{se.preventDefault(),se.stopPropagation();const Le=se.nativeEvent;Le&&typeof Le.stopImmediatePropagation=="function"&&Le.stopImmediatePropagation(),console.log(" Tablet button clicked"),v!=="tablet"&&j("tablet")},title:"Tablet View",type:"button","aria-label":"Switch to Tablet View",children:n.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:n.jsx("rect",{x:"4",y:"2",width:"8",height:"12",rx:"1",stroke:"currentColor",strokeWidth:"1.5",fill:"none"})})}),n.jsx("button",{className:`device-btn ${v==="mobile"?"active":""}`,onClick:se=>{se.preventDefault(),se.stopPropagation();const Le=se.nativeEvent;Le&&typeof Le.stopImmediatePropagation=="function"&&Le.stopImmediatePropagation(),console.log(" Mobile button clicked"),v!=="mobile"&&j("mobile")},title:"Mobile View",type:"button","aria-label":"Switch to Mobile View",children:n.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[n.jsx("rect",{x:"5",y:"1",width:"6",height:"14",rx:"1",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),n.jsx("circle",{cx:"8",cy:"13",r:"1",fill:"currentColor"})]})})]})}),n.jsxs("div",{className:"toolbar-right",children:[n.jsx("button",{onClick:Ne,className:"toolbar-btn",title:"Undo",children:n.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:n.jsx("path",{d:"M3 8h8M3 8l3-3M3 8l3 3",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),n.jsx("button",{onClick:Ie,className:"toolbar-btn",title:"Redo",children:n.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:n.jsx("path",{d:"M13 8H5M13 8l-3-3M13 8l-3 3",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),n.jsx("button",{onClick:xe,className:"preview-btn",title:"Preview Theme",children:"Preview"}),n.jsx("button",{onClick:ce,className:"save-btn",disabled:Z,children:Z?"Saving...":"Save"}),n.jsx("button",{onClick:ue,className:"publish-btn",disabled:Z,children:Z?q?"Published!":"Publishing...":q?"Published!":"Publish"}),q&&n.jsx("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"8px",padding:"8px 16px",background:"#008060",color:"white",borderRadius:"6px",fontSize:"13px",whiteSpace:"nowrap",zIndex:1e3},children:"Theme published successfully!"})]})]}),n.jsxs("div",{className:"basic-elementor-content",children:[R&&!N&&n.jsxs("div",{className:"basic-elementor-sidebar",children:[n.jsx("div",{className:"sidebar-section",children:n.jsx("div",{className:"sidebar-title",children:"Home page"})}),n.jsxs("div",{className:"sidebar-section",children:[n.jsxs("div",{className:"sidebar-section-header",onClick:()=>pt("header"),children:[n.jsx("span",{className:"section-title",children:"Header"}),n.jsx("span",{className:"section-toggle",children:re.header?"":""})]}),re.header&&n.jsxs("div",{className:"sidebar-section-content",children:[n.jsxs("div",{className:`section-item ${S==="Header"?"selected":""}`,onClick:()=>Pt("Header"),children:[n.jsx("span",{children:"Header"}),n.jsx("button",{className:"section-edit-btn",onClick:se=>ee("Header",se),title:"Edit styles",children:"Edit"})]}),n.jsx("button",{className:"add-section-btn",children:"Add section"})]})]}),n.jsxs("div",{className:"sidebar-section",children:[n.jsxs("div",{className:"sidebar-section-header",onClick:()=>pt("template"),children:[n.jsx("span",{className:"section-title",children:"Template"}),n.jsx("span",{className:"section-toggle",children:re.template?"":""})]}),re.template&&n.jsxs("div",{className:"sidebar-section-content",children:[he.map((se,Le)=>n.jsxs("div",{className:`section-item ${S===se?"selected":""}`,onClick:()=>Pt(se),children:[n.jsx("span",{children:se}),n.jsx("button",{className:"section-edit-btn",onClick:Ue=>ee(se,Ue),title:"Edit styles",children:"Edit"})]},Le)),n.jsx("button",{className:"add-section-btn",children:"Add section"})]})]}),n.jsxs("div",{className:"sidebar-section",children:[n.jsxs("div",{className:"sidebar-section-header",onClick:()=>pt("footer"),children:[n.jsx("span",{className:"section-title",children:"Footer"}),n.jsx("span",{className:"section-toggle",children:re.footer?"":""})]}),re.footer&&n.jsxs("div",{className:"sidebar-section-content",children:[n.jsxs("div",{className:`section-item ${S==="Footer"?"selected":""}`,onClick:()=>Pt("Footer"),children:[n.jsx("span",{children:"Footer"}),n.jsx("button",{className:"section-edit-btn",onClick:se=>ee("Footer",se),title:"Edit styles",children:"Edit"})]}),n.jsxs("div",{className:`section-item ${S==="Logo"?"selected":""}`,onClick:()=>Pt("Logo"),children:[n.jsx("span",{children:"Logo"}),n.jsx("button",{className:"section-edit-btn",onClick:se=>ee("Logo",se),title:"Edit styles",children:"Edit"})]}),n.jsx("button",{className:"add-section-btn",children:"Add section"})]})]})]}),N&&n.jsxs("div",{className:"style-editor-panel",children:[n.jsxs("div",{className:"style-panel-header",children:[n.jsx("button",{className:"back-to-structure-btn",onClick:()=>{P(!1),F(!0);const se=i.current;se&&se.select(null)},title:"Back to Structure",children:" Back"}),n.jsx("div",{children:n.jsxs("h3",{children:["Styles",S?`: ${S}`:""]})})]}),n.jsx("div",{className:"style-panel-content-wrapper",id:"style-panel-wrapper"})]}),n.jsxs("div",{className:"basic-elementor-preview",children:[d&&n.jsxs("div",{className:"loading-overlay",children:[n.jsx("div",{className:"loading-spinner"}),n.jsx("div",{children:"Loading theme..."})]}),m&&n.jsx("div",{className:"error-overlay",children:n.jsx("div",{children:m})}),n.jsx("div",{ref:o,id:"gjs-editor-container",style:{height:"100%",width:"100%",minHeight:0,position:"relative"}})]})]}),K&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e5,background:"rgba(0, 0, 0, 0.9)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},onClick:()=>D(!1),children:n.jsxs("div",{style:{width:"95%",height:"95%",background:"#fff",borderRadius:"8px",display:"flex",flexDirection:"column",position:"relative"},onClick:se=>se.stopPropagation(),children:[n.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",background:"#f9fafb",borderRadius:"8px 8px 0 0"},children:[n.jsx("h3",{style:{margin:0,fontSize:"16px",fontWeight:600,color:"#111827"},children:"Theme Preview"}),n.jsx("button",{onClick:()=>D(!1),style:{padding:"6px 12px",border:"1px solid #d1d5da",background:"#fff",color:"#111827",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Close"})]}),n.jsx("iframe",{id:"basic-elementor-preview-iframe",srcDoc:Q,style:{width:"100%",height:"100%",border:"none",background:"#fff",flex:1},title:"Theme Preview",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-presentation",onLoad:se=>{const Le=se.target;Le&&Le.contentDocument&&Q&&(Le.contentDocument.open(),Le.contentDocument.write(Q),Le.contentDocument.close())}},`preview-${Date.now()}-${Q.length}`)]})})]})},tP=f.createContext(void 0),pQ=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async()=>{try{s(!0),i(null);const m=await Ke.get("/categories/base"),{success:y,data:x}=m.data;y?e(x):i("Failed to fetch base categories")}catch(m){i(m?.response?.data?.message||"Failed to fetch base categories")}finally{s(!1)}},[]),c=f.useCallback(async m=>{try{s(!0),i(null);const y=await Ke.get(`/categories/parent/${m}`),{success:x,data:b}=y.data;x?e(b):i("Failed to fetch categories by parent")}catch(y){i(y?.response?.data?.message||"Failed to fetch categories by parent")}finally{s(!1)}},[]),d=f.useCallback(()=>{e([]),i(null),s(!1)},[]),h={categories:r,loading:t,error:o,fetchBaseCategories:l,fetchCategoriesByParentId:c,clearCategories:d};return n.jsx(tP.Provider,{value:h,children:a})},rP=()=>{const a=f.useContext(tP);if(!a)throw new Error("useCategories must be used within a CategoryProvider");return a},nP=f.createContext(void 0),hQ=({children:a})=>{const[r,e]=f.useState({}),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async(b,v,j=!1)=>{const S=`${b}:${v}`;if(!j&&r[S])return r[S];try{s(!0),i(null);const k=await Ke.get("/notification-overrides/exists",{params:{storeId:b,optionId:v}}),{success:N,data:P,message:R}=k.data;if(!N)throw new Error(R||"Failed to check override existence");const F={exists:!!P?.exists,override:P?.override??null};return e(z=>({...z,[S]:F})),F}catch(k){const N=k?.response?.data?.message||k?.message||"Failed to check override existence";throw i(N),new Error(N)}finally{s(!1)}},[r]),c=f.useCallback((b,v)=>{const j=`${b}:${v}`;e(S=>{const k={...S};return delete k[j],k})},[]),d=f.useCallback(()=>{e({}),i(null)},[]),h=f.useCallback(async b=>{try{s(!0),i(null);const v=await Ke.post("/notification-overrides",b),{success:j,data:S,message:k}=v.data;if(!j)throw new Error(k||"Failed to create notification override");const N=`${b.storeId}:${b.notificationOptionId}`;return e(P=>({...P,[N]:{exists:!0,override:{_id:S._id,storeId:S.storeId,notificationOptionId:S.notificationOptionId,notificationKey:S.notificationKey,emailSubject:S.emailSubject,emailBody:S.emailBody,smsData:S.smsData,enabled:S.enabled,createdAt:S.createdAt,updatedAt:S.updatedAt}}})),S}catch(v){const j=v?.response?.data?.message||v?.message||"Failed to create notification override";throw i(j),new Error(j)}finally{s(!1)}},[]),m=f.useCallback(async b=>{try{s(!0),i(null);const v=await Ke.delete(`/notification-overrides/${b}`),{success:j,data:S,message:k}=v.data;if(!j)throw new Error(k||"Failed to delete notification override");const N=`${S.storeId}:${S.notificationOptionId}`;return e(P=>({...P,[N]:{exists:!1,override:null}})),S}catch(v){const j=v?.response?.data?.message||v?.message||"Failed to delete notification override";throw i(j),new Error(j)}finally{s(!1)}},[]),y=f.useCallback(()=>{i(null)},[]),x=f.useMemo(()=>({cache:r,loading:t,error:o,checkExists:l,create:h,remove:m,clear:d,clearError:y,clearCacheEntry:c}),[r,t,o,l,h,m,d,y,c]);return n.jsx(nP.Provider,{value:x,children:a})},mQ=()=>{const a=f.useContext(nP);if(!a)throw new Error("useNotificationOverrides must be used within a NotificationOverridesProvider");return a},aP=f.createContext(void 0),gQ=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async()=>{try{s(!0),i(null);const m=await Ke.get("/permissions"),{success:y,data:x,message:b}=m.data;if(!y)throw new Error(b||"Failed to fetch permissions");const v=Array.isArray(x)?x:[];return e(v),v}catch(m){const y=m?.response?.data?.message||m?.message||"Failed to fetch permissions";throw i(y),new Error(y)}finally{s(!1)}},[]),c=f.useCallback(()=>{e([]),i(null)},[]),d=f.useCallback(()=>{i(null)},[]),h=f.useMemo(()=>({permissions:r,loading:t,error:o,fetchAll:l,clear:c,clearError:d}),[r,t,o,l,c,d]);return n.jsx(aP.Provider,{value:h,children:a})},sP=()=>{const a=f.useContext(aP);if(!a)throw new Error("usePermissions must be used within a PermissionsProvider");return a},oP=f.createContext(void 0);function yQ({children:a}){const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async y=>{s(!0),i(null);try{const{data:x}=await Ke.post("/purchase-orders",y),b=x.data.purchaseOrder;return e(v=>[b,...v]),b}catch(x){const b=x?.response?.data?.message||"Failed to create purchase order";throw i(b),x}finally{s(!1)}},[]),c=f.useCallback(async y=>{s(!0),i(null);try{const{data:x}=await Ke.get(`/purchase-orders/store/${y}`);e(x.data.purchaseOrders)}catch(x){const b=x?.response?.data?.message||"Failed to fetch purchase orders";throw i(b),x}finally{s(!1)}},[]),d=f.useCallback(async y=>{s(!0),i(null);try{await Ke.patch(`/purchase-orders/${y}/mark-ordered`);let x=null;return e(b=>b.map(v=>v._id===y?(x={...v,status:"ordered"},x):v)),x||(x={_id:y,status:"ordered"}),x}catch(x){const b=x?.response?.data?.message||"Failed to mark as ordered";throw i(b),x}finally{s(!1)}},[]),h=f.useCallback(async(y,x)=>{s(!0),i(null);try{const{data:b}=await Ke.post(`/purchase-orders/${y}/receive`,{entries:x}),v=b.data.status;return e(j=>j.map(S=>S._id===y?{...S,status:v}:S)),v}catch(b){const v=b?.response?.data?.message||"Failed to receive inventory";throw i(v),b}finally{s(!1)}},[]),m=f.useMemo(()=>({purchaseOrders:r,loading:t,error:o,createPurchaseOrder:l,fetchPurchaseOrdersByStore:c,markAsOrdered:d,receiveInventory:h}),[r,t,o,l,c,d,h]);return n.jsx(oP.Provider,{value:m,children:a})}function Bb(){const a=f.useContext(oP);if(!a)throw new Error("usePurchaseOrders must be used within a PurchaseOrderProvider");return a}const iP=f.createContext(void 0),xQ=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async b=>{try{s(!0),i(null);const v=await Ke.get("/store-roles",{params:{storeId:b}}),{success:j,data:S,message:k}=v.data;if(!j)throw new Error(k||"Failed to fetch roles");const N=Array.isArray(S)?S:[];return e(N),N}catch(v){const j=v?.response?.data?.message||v?.message||"Failed to fetch roles";throw i(j),new Error(j)}finally{s(!1)}},[]),c=f.useCallback(async b=>{try{s(!0),i(null);const v=await Ke.post("/store-roles",b),{success:j,data:S,message:k}=v.data;if(!j)throw new Error(k||"Failed to create role");return e(N=>[S,...N]),S}catch(v){const j=v?.response?.data?.message||v?.message||"Failed to create role";throw i(j),new Error(j)}finally{s(!1)}},[]),d=f.useCallback(async(b,v)=>{try{s(!0),i(null);const j=await Ke.patch(`/store-roles/${b}`,v),{success:S,data:k,message:N}=j.data;if(!S)throw new Error(N||"Failed to update role");return e(P=>P.map(R=>R._id===b?k:R)),k}catch(j){const S=j?.response?.data?.message||j?.message||"Failed to update role";throw i(S),new Error(S)}finally{s(!1)}},[]),h=f.useCallback(async b=>{try{s(!0),i(null);const v=await Ke.delete(`/store-roles/${b}`),{success:j,data:S,message:k}=v.data;if(!j)throw new Error(k||"Failed to delete role");return e(N=>N.filter(P=>P._id!==b)),S}catch(v){const j=v?.response?.data?.message||v?.message||"Failed to delete role";throw i(j),new Error(j)}finally{s(!1)}},[]),m=f.useCallback(()=>{e([]),i(null)},[]),y=f.useCallback(()=>{i(null)},[]),x=f.useMemo(()=>({roles:r,loading:t,error:o,fetchByStoreId:l,create:c,update:d,remove:h,clear:m,clearError:y}),[r,t,o,l,c,d,h,m,y]);return n.jsx(iP.Provider,{value:x,children:a})},GS=()=>{const a=f.useContext(iP);if(!a)throw new Error("useStoreRoles must be used within a StoreRolesProvider");return a},lP=f.createContext(void 0),vQ=({children:a})=>{const[r,e]=f.useState(null),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async x=>{try{s(!0),i(null);const b=await Ke.get(`/store-security-settings/${x}`),{success:v,data:j,message:S}=b.data;if(!v)throw new Error(S||"Failed to fetch security settings");return e(j),j}catch(b){const v=b?.response?.data?.message||b?.message||"Failed to fetch security settings";throw i(v),new Error(v)}finally{s(!1)}},[]),c=f.useCallback(async(x,b)=>{try{s(!0),i(null);const v=await Ke.patch(`/store-security-settings/${x}`,b),{success:j,data:S,message:k}=v.data;if(!j)throw new Error(k||"Failed to update security settings");return e(S),S}catch(v){const j=v?.response?.data?.message||v?.message||"Failed to update security settings";throw i(j),new Error(j)}finally{s(!1)}},[]),d=f.useCallback(async x=>{try{s(!0),i(null);const b=await Ke.get(`/store-security-settings/${x}/generateNewCode`),{success:v,data:j,message:S}=b.data;if(!v)throw new Error(S||"Failed to generate new security code");return e(j),j}catch(b){const v=b?.response?.data?.message||b?.message||"Failed to generate new security code";throw i(v),new Error(v)}finally{s(!1)}},[]),h=f.useCallback(()=>{e(null),i(null)},[]),m=f.useCallback(()=>{i(null)},[]),y=f.useMemo(()=>({settings:r,loading:t,error:o,fetchByStoreId:l,update:c,generateNewCode:d,clear:h,clearError:m}),[r,t,o,l,c,d,h,m]);return n.jsx(lP.Provider,{value:y,children:a})},bQ=()=>{const a=f.useContext(lP);if(!a)throw new Error("useStoreSecuritySettings must be used within a StoreSecuritySettingsProvider");return a},wQ=()=>n.jsx(pr,{children:n.jsx("div",{className:"min-h-screen",children:n.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 py-6",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Analytics"}),n.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"View your store's analytics and performance metrics"})]}),n.jsx(Z4,{})]})})});function jQ(){return n.jsx(n.Fragment,{children:n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Metaobjects"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{className:"cursor-pointer inline-flex items-center gap-1.5 px-3 py-1.5 border border-gray-200 text-sm text-gray-700 hover:bg-gray-50 transition-colors",type:"button",children:[n.jsx(hS,{className:"w-4 h-4"}),n.jsx("span",{children:"Manage"})]}),n.jsxs("button",{className:"cursor-pointer inline-flex items-center gap-1.5 px-3 py-1.5 text-sm bg-gray-900 text-white hover:bg-gray-800 transition-colors",type:"button",children:[n.jsx(na,{className:"w-4 h-4"}),n.jsx("span",{children:"Add definition"})]})]})]})})})}function CQ({title:a,description:r,empty:e}){return n.jsxs("div",{className:"border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-1.5",children:a}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:r}),n.jsx("div",{className:"flex items-center justify-center min-h-[300px] border border-dashed border-gray-200 bg-gray-50",children:n.jsx("p",{className:"text-xs text-gray-600 text-center px-4",children:e})})]})}function SQ({tabs:a,activeIndex:r}){return n.jsx(n.Fragment,{children:a.map((e,t)=>r===t?n.jsx(CQ,{title:e.title,description:e.description,empty:e.empty},e.label):null)})}function NQ({label:a,active:r,onClick:e}){return n.jsx("button",{role:"tab","aria-selected":r,onClick:e,className:`py-2 text-sm font-medium border-b transition-colors ${r?"border-gray-900 text-gray-900":"border-transparent text-gray-600 hover:text-gray-900"}`,children:a})}function kQ({tabs:a,activeIndex:r,onChange:e}){return n.jsx(n.Fragment,{children:a.map((t,s)=>{const o=r===s;return n.jsx(NQ,{label:t.label,active:o,onClick:()=>e(s)},t.label)})})}function _Q({tabs:a,activeIndex:r,onChange:e}){return n.jsx("div",{className:"flex gap-3",role:"tablist","aria-label":"Metaobjects tabs",children:n.jsx(kQ,{tabs:a,activeIndex:r,onChange:e})})}const I_=[{label:"All Definitions",title:"All Metaobject Definitions",description:"Manage all your metaobject definitions in one place.",empty:'No metaobject definitions found. Click "Add definition" to create one.'},{label:"Product References",title:"Product References",description:"Metaobjects that reference products in your store.",empty:"No product reference metaobjects found."},{label:"Content Blocks",title:"Content Blocks",description:"Reusable content blocks for your store.",empty:"No content block metaobjects found."}];function EQ(){const[a,r]=f.useState(0);return n.jsx(pr,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx(jQ,{}),n.jsx("div",{className:"max-w-7xl mx-auto px-4",children:n.jsx(_Q,{tabs:I_,activeIndex:a,onChange:r})}),n.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:n.jsx(SQ,{tabs:I_,activeIndex:a})})]})})}const ep=[{code:"AF",name:"Afghanistan"},{code:"AL",name:"Albania"},{code:"DZ",name:"Algeria"},{code:"AS",name:"American Samoa"},{code:"AD",name:"Andorra"},{code:"AO",name:"Angola"},{code:"AI",name:"Anguilla"},{code:"AQ",name:"Antarctica"},{code:"AG",name:"Antigua and Barbuda"},{code:"AR",name:"Argentina"},{code:"AM",name:"Armenia"},{code:"AW",name:"Aruba"},{code:"AU",name:"Australia"},{code:"AT",name:"Austria"},{code:"AZ",name:"Azerbaijan"},{code:"BS",name:"Bahamas"},{code:"BH",name:"Bahrain"},{code:"BD",name:"Bangladesh"},{code:"BB",name:"Barbados"},{code:"BY",name:"Belarus"},{code:"BE",name:"Belgium"},{code:"BZ",name:"Belize"},{code:"BJ",name:"Benin"},{code:"BM",name:"Bermuda"},{code:"BT",name:"Bhutan"},{code:"BO",name:"Bolivia"},{code:"BA",name:"Bosnia and Herzegovina"},{code:"BW",name:"Botswana"},{code:"BV",name:"Bouvet Island"},{code:"BR",name:"Brazil"},{code:"IO",name:"British Indian Ocean Territory"},{code:"BN",name:"Brunei Darussalam"},{code:"BG",name:"Bulgaria"},{code:"BF",name:"Burkina Faso"},{code:"BI",name:"Burundi"},{code:"KH",name:"Cambodia"},{code:"CM",name:"Cameroon"},{code:"CA",name:"Canada"},{code:"CV",name:"Cape Verde"},{code:"KY",name:"Cayman Islands"},{code:"CF",name:"Central African Republic"},{code:"TD",name:"Chad"},{code:"CL",name:"Chile"},{code:"CN",name:"China"},{code:"CX",name:"Christmas Island"},{code:"CC",name:"Cocos (Keeling) Islands"},{code:"CO",name:"Colombia"},{code:"KM",name:"Comoros"},{code:"CG",name:"Congo"},{code:"CD",name:"Congo, Democratic Republic of the"},{code:"CK",name:"Cook Islands"},{code:"CR",name:"Costa Rica"},{code:"CI",name:"Cte d'Ivoire"},{code:"HR",name:"Croatia"},{code:"CU",name:"Cuba"},{code:"CY",name:"Cyprus"},{code:"CZ",name:"Czech Republic"},{code:"DK",name:"Denmark"},{code:"DJ",name:"Djibouti"},{code:"DM",name:"Dominica"},{code:"DO",name:"Dominican Republic"},{code:"EC",name:"Ecuador"},{code:"EG",name:"Egypt"},{code:"SV",name:"El Salvador"},{code:"GQ",name:"Equatorial Guinea"},{code:"ER",name:"Eritrea"},{code:"EE",name:"Estonia"},{code:"ET",name:"Ethiopia"},{code:"FK",name:"Falkland Islands (Malvinas)"},{code:"FO",name:"Faroe Islands"},{code:"FJ",name:"Fiji"},{code:"FI",name:"Finland"},{code:"FR",name:"France"},{code:"GF",name:"French Guiana"},{code:"PF",name:"French Polynesia"},{code:"TF",name:"French Southern Territories"},{code:"GA",name:"Gabon"},{code:"GM",name:"Gambia"},{code:"GE",name:"Georgia"},{code:"DE",name:"Germany"},{code:"GH",name:"Ghana"},{code:"GI",name:"Gibraltar"},{code:"GR",name:"Greece"},{code:"GL",name:"Greenland"},{code:"GD",name:"Grenada"},{code:"GP",name:"Guadeloupe"},{code:"GU",name:"Guam"},{code:"GT",name:"Guatemala"},{code:"GG",name:"Guernsey"},{code:"GN",name:"Guinea"},{code:"GW",name:"Guinea-Bissau"},{code:"GY",name:"Guyana"},{code:"HT",name:"Haiti"},{code:"HM",name:"Heard Island and McDonald Islands"},{code:"VA",name:"Holy See (Vatican City State)"},{code:"HN",name:"Honduras"},{code:"HK",name:"Hong Kong"},{code:"HU",name:"Hungary"},{code:"IS",name:"Iceland"},{code:"IN",name:"India"},{code:"ID",name:"Indonesia"},{code:"IR",name:"Iran, Islamic Republic of"},{code:"IQ",name:"Iraq"},{code:"IE",name:"Ireland"},{code:"IM",name:"Isle of Man"},{code:"IL",name:"Israel"},{code:"IT",name:"Italy"},{code:"JM",name:"Jamaica"},{code:"JP",name:"Japan"},{code:"JE",name:"Jersey"},{code:"JO",name:"Jordan"},{code:"KZ",name:"Kazakhstan"},{code:"KE",name:"Kenya"},{code:"KI",name:"Kiribati"},{code:"KP",name:"Korea, Democratic People's Republic of"},{code:"KR",name:"Korea, Republic of"},{code:"KW",name:"Kuwait"},{code:"KG",name:"Kyrgyzstan"},{code:"LA",name:"Lao People's Democratic Republic"},{code:"LV",name:"Latvia"},{code:"LB",name:"Lebanon"},{code:"LS",name:"Lesotho"},{code:"LR",name:"Liberia"},{code:"LY",name:"Libya"},{code:"LI",name:"Liechtenstein"},{code:"LT",name:"Lithuania"},{code:"LU",name:"Luxembourg"},{code:"MO",name:"Macao"},{code:"MK",name:"Macedonia, the former Yugoslav Republic of"},{code:"MG",name:"Madagascar"},{code:"MW",name:"Malawi"},{code:"MY",name:"Malaysia"},{code:"MV",name:"Maldives"},{code:"ML",name:"Mali"},{code:"MT",name:"Malta"},{code:"MH",name:"Marshall Islands"},{code:"MQ",name:"Martinique"},{code:"MR",name:"Mauritania"},{code:"MU",name:"Mauritius"},{code:"YT",name:"Mayotte"},{code:"MX",name:"Mexico"},{code:"FM",name:"Micronesia, Federated States of"},{code:"MD",name:"Moldova, Republic of"},{code:"MC",name:"Monaco"},{code:"MN",name:"Mongolia"},{code:"ME",name:"Montenegro"},{code:"MS",name:"Montserrat"},{code:"MA",name:"Morocco"},{code:"MZ",name:"Mozambique"},{code:"MM",name:"Myanmar"},{code:"NA",name:"Namibia"},{code:"NR",name:"Nauru"},{code:"NP",name:"Nepal"},{code:"NL",name:"Netherlands"},{code:"NC",name:"New Caledonia"},{code:"NZ",name:"New Zealand"},{code:"NI",name:"Nicaragua"},{code:"NE",name:"Niger"},{code:"NG",name:"Nigeria"},{code:"NU",name:"Niue"},{code:"NF",name:"Norfolk Island"},{code:"MP",name:"Northern Mariana Islands"},{code:"NO",name:"Norway"},{code:"OM",name:"Oman"},{code:"PK",name:"Pakistan"},{code:"PW",name:"Palau"},{code:"PS",name:"Palestinian Territory, Occupied"},{code:"PA",name:"Panama"},{code:"PG",name:"Papua New Guinea"},{code:"PY",name:"Paraguay"},{code:"PE",name:"Peru"},{code:"PH",name:"Philippines"},{code:"PN",name:"Pitcairn"},{code:"PL",name:"Poland"},{code:"PT",name:"Portugal"},{code:"PR",name:"Puerto Rico"},{code:"QA",name:"Qatar"},{code:"RE",name:"Runion"},{code:"RO",name:"Romania"},{code:"RU",name:"Russian Federation"},{code:"RW",name:"Rwanda"},{code:"BL",name:"Saint Barthlemy"},{code:"SH",name:"Saint Helena, Ascension and Tristan da Cunha"},{code:"KN",name:"Saint Kitts and Nevis"},{code:"LC",name:"Saint Lucia"},{code:"MF",name:"Saint Martin (French part)"},{code:"PM",name:"Saint Pierre and Miquelon"},{code:"VC",name:"Saint Vincent and the Grenadines"},{code:"WS",name:"Samoa"},{code:"SM",name:"San Marino"},{code:"ST",name:"Sao Tome and Principe"},{code:"SA",name:"Saudi Arabia"},{code:"SN",name:"Senegal"},{code:"RS",name:"Serbia"},{code:"SC",name:"Seychelles"},{code:"SL",name:"Sierra Leone"},{code:"SG",name:"Singapore"},{code:"SX",name:"Sint Maarten (Dutch part)"},{code:"SK",name:"Slovakia"},{code:"SI",name:"Slovenia"},{code:"SB",name:"Solomon Islands"},{code:"SO",name:"Somalia"},{code:"ZA",name:"South Africa"},{code:"GS",name:"South Georgia and the South Sandwich Islands"},{code:"SS",name:"South Sudan"},{code:"ES",name:"Spain"},{code:"LK",name:"Sri Lanka"},{code:"SD",name:"Sudan"},{code:"SR",name:"Suriname"},{code:"SJ",name:"Svalbard and Jan Mayen"},{code:"SZ",name:"Swaziland"},{code:"SE",name:"Sweden"},{code:"CH",name:"Switzerland"},{code:"SY",name:"Syrian Arab Republic"},{code:"TW",name:"Taiwan, Province of China"},{code:"TJ",name:"Tajikistan"},{code:"TZ",name:"Tanzania, United Republic of"},{code:"TH",name:"Thailand"},{code:"TL",name:"Timor-Leste"},{code:"TG",name:"Togo"},{code:"TK",name:"Tokelau"},{code:"TO",name:"Tonga"},{code:"TT",name:"Trinidad and Tobago"},{code:"TN",name:"Tunisia"},{code:"TR",name:"Turkey"},{code:"TM",name:"Turkmenistan"},{code:"TC",name:"Turks and Caicos Islands"},{code:"TV",name:"Tuvalu"},{code:"UG",name:"Uganda"},{code:"UA",name:"Ukraine"},{code:"AE",name:"United Arab Emirates"},{code:"GB",name:"United Kingdom"},{code:"US",name:"United States"},{code:"UM",name:"United States Minor Outlying Islands"},{code:"UY",name:"Uruguay"},{code:"UZ",name:"Uzbekistan"},{code:"VU",name:"Vanuatu"},{code:"VE",name:"Venezuela, Bolivarian Republic of"},{code:"VN",name:"Viet Nam"},{code:"VG",name:"Virgin Islands, British"},{code:"VI",name:"Virgin Islands, U.S."},{code:"WF",name:"Wallis and Futuna"},{code:"EH",name:"Western Sahara"},{code:"YE",name:"Yemen"},{code:"ZM",name:"Zambia"},{code:"ZW",name:"Zimbabwe"}],R_=a=>{const r=ep.find(e=>e.code===a);return r?r.name:a},un=({open:a=!1,onClose:r,children:e,width:t,height:s,isCallModal:o=!1,title:i,maxWidth:l="sm",actions:c})=>{const[d,h]=f.useState(!1);if(f.useEffect(()=>(h(!0),()=>h(!1)),[]),f.useEffect(()=>(a&&d?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[a,d]),!a||!d)return null;const m={sm:"max-w-md",md:"max-w-lg",lg:"max-w-4xl"},y=t?`${t}px`:void 0,x=s?`${s}px`:void 0;return Cb.createPortal(n.jsx("div",{onClick:o?()=>{}:r,className:"z-5000 bg-black/20 w-screen h-screen fixed inset-0 flex items-center justify-center",children:n.jsxs("div",{onClick:b=>b.stopPropagation(),className:`relative bg-white border border-gray-200 w-full ${m[l]} ${x?"":"max-h-[calc(100vh-80px)]"} flex flex-col shadow-xl`,style:{width:y,height:x},children:[i&&n.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200",children:[typeof i=="string"?n.jsx("h2",{className:"text-base font-medium text-gray-900",children:i}):i,n.jsx("button",{onClick:r,className:"p-1 text-gray-600 hover:text-gray-900 transition-colors","aria-label":"Close",children:n.jsx(xs,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-4",children:e}),c&&n.jsx("div",{className:"px-4 py-3 border-t border-gray-200 flex justify-end gap-2",children:c})]})}),document.getElementById("modal-root"))},TQ=({isOpen:a,onClose:r,onSubmit:e,customerId:t})=>{const[s,o]=f.useState({addressType:"home",country:"",firstName:"",lastName:"",company:"",address:"",apartment:"",city:"",state:"",pinCode:"",phoneNumber:""}),i=f.useCallback((d,h)=>{o(m=>({...m,[d]:h}))},[]),l=f.useCallback(async()=>{if(!t)return;const d={customerId:t,addressType:s.addressType,country:s.country,firstName:s.firstName,lastName:s.lastName,company:s.company||void 0,address:s.address,apartment:s.apartment||void 0,city:s.city,state:s.state,pinCode:s.pinCode,phoneNumber:s.phoneNumber};await e(d),o({addressType:"home",country:"",firstName:"",lastName:"",company:"",address:"",apartment:"",city:"",state:"",pinCode:"",phoneNumber:""})},[t,s,e]),c=f.useCallback(()=>{o({addressType:"home",country:"",firstName:"",lastName:"",company:"",address:"",apartment:"",city:"",state:"",pinCode:"",phoneNumber:""}),r()},[r]);return f.useEffect(()=>{a&&o({addressType:"home",country:"",firstName:"",lastName:"",company:"",address:"",apartment:"",city:"",state:"",pinCode:"",phoneNumber:""})},[a]),n.jsx(un,{open:a,onClose:c,title:"Add Customer Address",maxWidth:"lg",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:c,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Close"}),n.jsx("button",{onClick:l,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Save Address"})]}),children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Address Type (home / office / other)"}),n.jsx("input",{type:"text",value:s.addressType,onChange:d=>i("addressType",d.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Country"}),n.jsxs("select",{value:s.country,onChange:d=>i("country",d.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors",children:[n.jsx("option",{value:"",children:"Select Country"}),ep.map(d=>n.jsx("option",{value:d.code,children:d.name},d.code))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Company"}),n.jsx("input",{type:"text",value:s.company,onChange:d=>i("company",d.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"First Name"}),n.jsx("input",{type:"text",value:s.firstName,onChange:d=>i("firstName",d.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Last Name"}),n.jsx("input",{type:"text",value:s.lastName,onChange:d=>i("lastName",d.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Address"}),n.jsx("input",{type:"text",value:s.address,onChange:d=>i("address",d.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Apartment, Suite, etc."}),n.jsx("input",{type:"text",value:s.apartment,onChange:d=>i("apartment",d.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"City"}),n.jsx("input",{type:"text",value:s.city,onChange:d=>i("city",d.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"State"}),n.jsx("input",{type:"text",value:s.state,onChange:d=>i("state",d.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Pin Code"}),n.jsx("input",{type:"text",value:s.pinCode,onChange:d=>i("pinCode",d.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Phone Number"}),n.jsx("input",{type:"text",value:s.phoneNumber,onChange:d=>i("phoneNumber",d.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]})})},cP=f.createContext(void 0),OQ=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async b=>{try{s(!0),i(null);const v=await Ke.get(`/customer-address/customer/${b}`);e(v.data.data)}catch(v){const j=v.response?.data?.message||v.message||"Failed to fetch customer addresses";throw i(j),v}finally{s(!1)}},[]),c=f.useCallback(async b=>{try{s(!0),i(null);const j=(await Ke.post("/customer-address",b)).data.data;return e(S=>[j,...S]),j}catch(v){const j=v.response?.data?.message||v.message||"Failed to create customer address";throw i(j),v}finally{s(!1)}},[]),d=f.useCallback(async(b,v)=>{try{s(!0),i(null);const S=(await Ke.put(`/customer-address/${b}`,v)).data.data;return e(k=>k.map(N=>N._id===b?S:N)),S}catch(j){const S=j.response?.data?.message||j.message||"Failed to update customer address";throw i(S),j}finally{s(!1)}},[]),h=f.useCallback(async b=>{try{s(!0),i(null),await Ke.delete(`/customer-address/${b}`),e(v=>v.filter(j=>j._id!==b))}catch(v){const j=v.response?.data?.message||v.message||"Failed to delete customer address";throw i(j),v}finally{s(!1)}},[]),m=f.useCallback(()=>i(null),[]),y=f.useCallback(()=>e([]),[]),x={addresses:r,loading:t,error:o,fetchCustomerAddressesByCustomerId:l,addCustomerAddress:c,updateCustomerAddress:d,deleteCustomerAddress:h,clearError:m,clearAddresses:y};return n.jsx(cP.Provider,{value:x,children:a})},dP=()=>{const a=f.useContext(cP);if(!a)throw new Error("useCustomerAddresses must be used within a CustomerAddressProvider");return a},PQ=({address:a,onUpdate:r,onDelete:e})=>n.jsxs("div",{className:"bg-white border border-gray-200 rounded p-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 capitalize",children:a.addressType||"home"}),n.jsxs("div",{className:"flex gap-1.5",children:[n.jsx("button",{onClick:()=>r(a),className:"px-2 py-1 text-xs font-medium text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:"Update"}),n.jsx("button",{onClick:()=>e(a._id),className:"px-2 py-1 text-xs font-medium text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:"Delete"})]})]}),n.jsxs("div",{className:"space-y-1 text-sm text-gray-700",children:[n.jsxs("p",{className:"font-medium text-gray-900",children:[a.firstName," ",a.lastName]}),n.jsxs("p",{className:"text-gray-600",children:[a.address,a.apartment?`, ${a.apartment}`:""]}),n.jsxs("p",{className:"text-gray-600",children:[a.city,", ",a.state," ",a.pinCode]}),n.jsx("p",{className:"text-gray-600",children:a.country}),n.jsx("p",{className:"text-gray-600",children:a.phoneNumber})]})]}),AQ=({addresses:a,onUpdate:r,onDelete:e})=>n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.map(t=>n.jsx(PQ,{address:t,onUpdate:r,onDelete:e},t._id))}),MQ=({isOpen:a,onClose:r,onConfirm:e})=>n.jsx(un,{open:a,onClose:r,title:"Delete Address",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"No"}),n.jsx("button",{onClick:e,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Yes"})]}),children:n.jsx("p",{className:"text-sm text-gray-700",children:"Do you really want to delete this address?"})}),IQ=({isOpen:a,addressForm:r,onAddressChange:e,onClose:t,onSubmit:s})=>n.jsx(un,{open:a,onClose:t,title:"Update Customer Address",maxWidth:"lg",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:t,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:s,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Update Address"})]}),children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Address Type (home / office / other)"}),n.jsx("input",{type:"text",value:r.addressType,onChange:o=>e("addressType",o.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Country"}),n.jsxs("select",{value:r.country,onChange:o=>e("country",o.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors",children:[n.jsx("option",{value:"",children:"Select Country"}),ep.map(o=>n.jsx("option",{value:o.code,children:o.name},o.code))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Company"}),n.jsx("input",{type:"text",value:r.company,onChange:o=>e("company",o.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"First Name"}),n.jsx("input",{type:"text",value:r.firstName,onChange:o=>e("firstName",o.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Last Name"}),n.jsx("input",{type:"text",value:r.lastName,onChange:o=>e("lastName",o.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Address"}),n.jsx("input",{type:"text",value:r.address,onChange:o=>e("address",o.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Apartment, Suite, etc."}),n.jsx("input",{type:"text",value:r.apartment,onChange:o=>e("apartment",o.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"City"}),n.jsx("input",{type:"text",value:r.city,onChange:o=>e("city",o.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"State"}),n.jsx("input",{type:"text",value:r.state,onChange:o=>e("state",o.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Pin Code"}),n.jsx("input",{type:"text",value:r.pinCode,onChange:o=>e("pinCode",o.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Phone Number"}),n.jsx("input",{type:"text",value:r.phoneNumber,onChange:o=>e("phoneNumber",o.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]})}),RQ=({customerId:a})=>{const{addresses:r,loading:e,error:t,fetchCustomerAddressesByCustomerId:s,updateCustomerAddress:o,deleteCustomerAddress:i}=dP(),[l,c]=f.useState(!1),[d,h]=f.useState(null),[m,y]=f.useState(!1),[x,b]=f.useState(null),[v,j]=f.useState({addressType:"home",country:"",firstName:"",lastName:"",company:"",address:"",apartment:"",city:"",state:"",pinCode:"",phoneNumber:""});f.useEffect(()=>{a&&s(a)},[a,s]);const S=f.useCallback((z,H)=>{j(V=>({...V,[z]:H}))},[]),k=f.useCallback(async()=>{!x||!a||(await o(x,{addressType:v.addressType,country:v.country,firstName:v.firstName,lastName:v.lastName,company:v.company||void 0,address:v.address,apartment:v.apartment||void 0,city:v.city,state:v.state,pinCode:v.pinCode,phoneNumber:v.phoneNumber}),y(!1),b(null),s(a))},[x,a,v,o,s]),N=f.useCallback(async()=>{!d||!a||(await i(d),c(!1),h(null),s(a))},[d,a,i,s]),P=f.useCallback(z=>{b(z._id),j({addressType:z.addressType||"home",country:z.country,firstName:z.firstName,lastName:z.lastName,company:z.company||"",address:z.address,apartment:z.apartment||"",city:z.city,state:z.state,pinCode:z.pinCode,phoneNumber:z.phoneNumber}),y(!0)},[]),R=f.useCallback(()=>{y(!1),b(null)},[]),F=f.useCallback(z=>{h(z),c(!0)},[]);return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Addresses"}),e?n.jsx("p",{className:"text-sm text-gray-600",children:"Loading addresses..."}):t?n.jsx("p",{className:"text-sm text-red-600",children:t}):r&&r.length>0?n.jsx(AQ,{addresses:r,onUpdate:P,onDelete:F}):n.jsx("p",{className:"text-sm text-gray-600",children:"Currently no address added."})]}),n.jsx(IQ,{isOpen:m,addressForm:v,onAddressChange:S,onClose:R,onSubmit:k}),n.jsx(MQ,{isOpen:l,onClose:()=>{c(!1),h(null)},onConfirm:N})]})},LQ=({agreedToMarketingEmails:a,agreedToSmsMarketing:r,notes:e})=>n.jsxs("div",{className:"pt-3 border-t border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Marketing Emails"}),n.jsx("p",{className:"text-sm",children:a?n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:"Agreed"}):n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-700",children:"Not Agreed"})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"SMS Marketing"}),n.jsx("p",{className:"text-sm",children:r?n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:"Agreed"}):n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-700",children:"Not Agreed"})})]})]}),e&&n.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Notes"}),n.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:e})]})]}),DQ=({firstName:a,lastName:r,email:e,phoneNumber:t})=>n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"First Name"}),n.jsx("p",{className:"text-sm text-gray-900",children:a})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Last Name"}),n.jsx("p",{className:"text-sm text-gray-900",children:r})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Email"}),n.jsx("p",{className:"text-sm text-gray-900",children:e})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Phone Number"}),n.jsx("p",{className:"text-sm text-gray-900",children:t})]})]}),FQ=({language:a,collectTax:r,storeId:e})=>n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Language"}),n.jsx("p",{className:"text-sm text-gray-900",children:a})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Collect Tax"}),n.jsx("p",{className:"text-sm text-gray-900 capitalize",children:r==="collect"?"Collect Tax":r==="dont_collect"?"Don't Collect Tax":"Collect Tax Unless Exempt"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Store ID"}),n.jsx("p",{className:"text-xs text-gray-700 font-mono",children:e})]})]}),BQ=({tags:a})=>n.jsxs("div",{className:"pt-3 border-t border-gray-200",children:[n.jsx("h3",{className:"text-xs text-gray-600 mb-2",children:"Tags"}),n.jsx("div",{className:"flex flex-wrap gap-1.5",children:Array.isArray(a)&&a.length>0?a.map(r=>n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-700",children:r.name||r},r._id||r)):n.jsx("span",{className:"text-xs text-gray-500",children:"No tags"})})]}),zQ=({comment:a,onCommentChange:r,onSubmit:e})=>{const t=s=>{s.key==="Enter"&&(s.ctrlKey||s.metaKey)&&e()};return n.jsxs("div",{className:"flex gap-2 items-start",children:[n.jsx("textarea",{value:a,onChange:s=>r(s.target.value),placeholder:"Leave a comment",rows:2,className:"flex-1 px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 resize-none",onKeyDown:t}),n.jsx("button",{onClick:e,disabled:!a.trim(),className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 rounded hover:bg-gray-800 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors whitespace-nowrap",children:"Post"})]})},UQ=({entry:a,onEdit:r,onDelete:e})=>n.jsxs("div",{className:"border border-gray-200 rounded p-3",children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap pr-2 flex-1",children:a.comment}),n.jsxs("div",{className:"flex gap-1 shrink-0",children:[n.jsx("button",{onClick:()=>r(a),className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors","aria-label":"edit timeline",children:n.jsx(oi,{className:"w-3.5 h-3.5"})}),n.jsx("button",{onClick:()=>e(a._id),className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors","aria-label":"delete timeline",children:n.jsx(Vs,{className:"w-3.5 h-3.5"})})]})]}),n.jsx("p",{className:"text-xs text-gray-600",children:new Date(a.createdAt).toLocaleDateString()})]}),$Q=({timeline:a,loading:r,error:e,onEdit:t,onDelete:s})=>n.jsx("div",{className:"mb-4 space-y-2",children:r?n.jsx("p",{className:"text-sm text-gray-600",children:"Loading timeline..."}):e?n.jsx("p",{className:"text-sm text-red-600",children:e}):a&&a.length>0?a.map(o=>n.jsx(UQ,{entry:o,onEdit:t,onDelete:s},o._id)):n.jsx("p",{className:"text-sm text-gray-600",children:"No timeline entries yet."})}),VQ=({isOpen:a,onClose:r,onConfirm:e})=>n.jsx(un,{open:a,onClose:r,title:"Delete Timeline Item",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"No"}),n.jsx("button",{onClick:e,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Yes"})]}),children:n.jsx("p",{className:"text-sm text-gray-700",children:"Do you really want to delete this timeline item?"})}),WQ=({isOpen:a,comment:r,onCommentChange:e,onClose:t,onSubmit:s})=>n.jsx(un,{open:a,onClose:t,title:"Edit Timeline Comment",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:t,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:s,disabled:!r.trim(),className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:"Submit"})]}),children:n.jsx("textarea",{value:r,onChange:o=>e(o.target.value),rows:3,className:"w-full px-3 py-2 text-base border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 resize-none transition-colors",placeholder:"Comment"})}),HQ=({customerId:a})=>{const{timeline:r,loading:e,error:t,createCustomerTimeline:s,updateCustomerTimeline:o,deleteCustomerTimeline:i,fetchCustomerTimelineByCustomerId:l}=hF(),[c,d]=f.useState(""),[h,m]=f.useState(!1),[y,x]=f.useState(null),[b,v]=f.useState(!1),[j,S]=f.useState(null),[k,N]=f.useState(""),P=f.useCallback(async()=>{!a||!c.trim()||(await s({customerId:a,comment:c.trim()}),d(""),l(a))},[a,c,s,l]),R=f.useCallback(async()=>{!j||!k.trim()||!a||(await o(j,{comment:k.trim()}),v(!1),S(null),N(""),l(a))},[j,k,a,o,l]),F=f.useCallback(async()=>{!y||!a||(await i(y),m(!1),x(null),l(a))},[y,a,i,l]),z=f.useCallback(H=>{S(H._id),N(H.comment),v(!0)},[]);return f.useEffect(()=>{a&&l(a)},[a,l]),n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Timeline"}),n.jsx($Q,{timeline:r,loading:e,error:t,onEdit:z,onDelete:H=>{x(H),m(!0)}}),n.jsx(zQ,{comment:c,onCommentChange:d,onSubmit:P})]}),n.jsx(VQ,{isOpen:h,onClose:()=>{m(!1),x(null)},onConfirm:F}),n.jsx(WQ,{isOpen:b,comment:k,onCommentChange:N,onClose:()=>{v(!1),S(null),N("")},onSubmit:R})]})},qQ=({createdAt:a,updatedAt:r})=>n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 pt-3 border-t border-gray-200",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Created At"}),n.jsx("p",{className:"text-sm text-gray-900",children:new Date(a).toLocaleDateString()})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Updated At"}),n.jsx("p",{className:"text-sm text-gray-900",children:new Date(r).toLocaleDateString()})]})]}),GQ=()=>{const{id:a}=qa(),r=mr(),{customers:e}=Hd(),{fetchCustomerAddressesByCustomerId:t,addCustomerAddress:s}=dP(),[o,i]=f.useState(!1),l=f.useMemo(()=>e.find(h=>h._id===a),[e,a]),c=f.useCallback(async h=>{a&&(await s(h),i(!1),t(a))},[a,s,t]),d=f.useCallback(()=>{i(!1)},[]);return n.jsx(pr,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-4",children:n.jsx("div",{className:"max-w-6xl mx-auto",children:n.jsxs("div",{className:"flex items-center justify-between gap-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:()=>r("/customers"),className:"flex items-center gap-1.5 px-3 py-1.5 text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:n.jsx(Hn,{className:"w-4 h-4"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:l?`${l.firstName} ${l.lastName}`:"Customer"}),n.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:"Customer details and information"})]})]}),n.jsx("button",{onClick:()=>i(!0),className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:"Add Customer Address"})]})})}),n.jsx("div",{className:"max-w-6xl mx-auto py-6 px-4",children:n.jsx("div",{children:l?n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Customer Information"}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(DQ,{firstName:l.firstName,lastName:l.lastName,email:l.email,phoneNumber:l.phoneNumber}),n.jsx(FQ,{language:l.language,collectTax:l.collectTax,storeId:l.storeId})]}),n.jsx(qQ,{createdAt:l.createdAt,updatedAt:l.updatedAt}),n.jsx(LQ,{agreedToMarketingEmails:l.agreedToMarketingEmails,agreedToSmsMarketing:l.agreedToSmsMarketing,notes:l.notes}),n.jsx(BQ,{tags:l.tagIds})]})]}),a&&n.jsx(RQ,{customerId:a}),a&&n.jsx(HQ,{customerId:a})]}):n.jsx("p",{className:"text-sm text-gray-600",children:"Customer not found in state."})})}),a&&n.jsx(TQ,{isOpen:o,onClose:d,onSubmit:c,customerId:a})]})})},KQ=({isOpen:a,onClose:r,selectedCustomerId:e,onCustomerChange:t,customers:s,canSave:o,onSave:i})=>n.jsx(un,{open:a,onClose:r,title:"Add customer to segment",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:i,disabled:!o,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Save"})]}),children:n.jsxs("div",{children:[n.jsx("label",{htmlFor:"customer-select",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Customer"}),n.jsxs("select",{id:"customer-select",value:e,onChange:t,className:"w-full px-3 py-1.5 text-base border border-gray-200 focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors bg-white",children:[n.jsx("option",{value:"",children:"Select a customer"}),s.map(l=>n.jsxs("option",{value:l._id,children:[`${l.firstName} ${l.lastName}`," - ",l.email]},l._id))]})]})}),YQ=({entry:a,onDelete:r})=>{const e=f.useCallback(s=>typeof s=="string"?s:s.fullName||`${s.firstName||""} ${s.lastName||""}`.trim(),[]),t=f.useCallback(()=>{r(a)},[a,r]);return n.jsxs("div",{className:"flex justify-between items-center py-2.5 px-3 hover:bg-gray-50 transition-colors group",children:[n.jsx("span",{className:"text-sm text-gray-900",children:e(a.customerId)}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-xs text-gray-600",children:new Date(a.createdAt).toLocaleDateString()}),n.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded transition-colors opacity-0 group-hover:opacity-100","aria-label":"delete",children:n.jsx(Vs,{className:"w-3.5 h-3.5 text-gray-500 hover:text-gray-700 transition-colors"})})]})]})},ZQ=({entries:a,onDelete:r})=>n.jsx("div",{className:"divide-y divide-gray-200",children:a.map(e=>n.jsx(YQ,{entry:e,onDelete:r},e._id))}),XQ=({isOpen:a,onClose:r,entry:e,onConfirm:t})=>{const s=f.useCallback(l=>typeof l=="string"?l:l.fullName||`${l.firstName||""} ${l.lastName||""}`.trim(),[]),o=f.useCallback(()=>{t(),r()},[t,r]);if(!a||!e)return null;const i=s(e.customerId);return n.jsx(un,{open:a,onClose:r,title:"Delete Customer",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"No"}),n.jsx("button",{onClick:o,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Yes"})]}),children:n.jsxs("p",{className:"text-sm text-gray-700",children:["Do you really want to delete ",n.jsx("span",{className:"font-medium",children:i})," from this segment?"]})})},uP=f.createContext(void 0),QQ=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async m=>{s(!0),i(null);try{const x=(await Ke.get(`/customer-segment-entries/segment/${m}`)).data?.data??[];return e(x),x}catch(y){const x=y?.response?.data?.message||y?.message||"Failed to fetch customer segment entries";throw i(x),new Error(x)}finally{s(!1)}},[]),c=f.useCallback(async(m,y)=>{s(!0),i(null);try{const b=(await Ke.post("/customer-segment-entries",{segmentId:m,customerId:y})).data.data;return e(v=>[b,...v]),b}catch(x){const b=x?.response?.data?.message||x?.message||"Failed to add customer to segment";throw i(b),new Error(b)}finally{s(!1)}},[]),d=f.useCallback(async m=>{s(!0),i(null);try{await Ke.delete(`/customer-segment-entries/${m}`),e(y=>y.filter(x=>x._id!==m))}catch(y){const x=y?.response?.data?.message||y?.message||"Failed to remove customer from segment";throw i(x),new Error(x)}finally{s(!1)}},[]),h=f.useMemo(()=>({entries:r,loading:t,error:o,createEntry:c,fetchEntriesBySegmentId:l,deleteEntry:d}),[r,t,o,c,l,d]);return n.jsx(uP.Provider,{value:h,children:a})},JQ=()=>{const a=f.useContext(uP);if(!a)throw new Error("useCustomerSegmentEntries must be used within a CustomerSegmentsEntryProvider");return a},fP=f.createContext(void 0),eJ=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async y=>{s(!0),i(null);try{const b=(await Ke.get(`/customer-segments/store/${y}`)).data?.data??[];return e(b),b}catch(x){const b=x?.response?.data?.message||x?.message||"Failed to fetch customer segments";throw i(b),new Error(b)}finally{s(!1)}},[]),c=f.useCallback(async(y,x)=>{s(!0),i(null);try{const v=(await Ke.post("/customer-segments",{storeId:y,name:x})).data.data;return e(j=>[v,...j]),v}catch(b){const v=b?.response?.data?.message||b?.message||"Failed to create customer segment";throw i(v),new Error(v)}finally{s(!1)}},[]),d=f.useCallback(async(y,x,b=1,v=10)=>{s(!0),i(null);try{const j=await Ke.get(`/customer-segments/search/${y}?q=${encodeURIComponent(x)}&page=${b}&limit=${v}`),{success:S,data:k,pagination:N}=j.data;if(!S)throw new Error("Failed to search customer segments");return e(k),{success:S,data:k,pagination:N}}catch(j){const S=j?.response?.data?.message||j?.message||"Failed to search customer segments";throw i(S),new Error(S)}finally{s(!1)}},[]),h=f.useCallback(async(y,x)=>{s(!0),i(null);try{const v=(await Ke.patch(`/customer-segments/${y}`,{name:x})).data.data;return e(j=>j.map(S=>S._id===v._id?v:S)),v}catch(b){const v=b?.response?.data?.message||b?.message||"Failed to update customer segment";throw i(v),new Error(v)}finally{s(!1)}},[]),m=f.useMemo(()=>({segments:r,loading:t,error:o,createCustomerSegment:c,fetchSegmentsByStoreId:l,searchCustomerSegments:d,updateCustomerSegmentName:h}),[r,t,o,c,l,d,h]);return n.jsx(fP.Provider,{value:m,children:a})},im=()=>{const a=f.useContext(fP);if(!a)throw new Error("useCustomerSegments must be used within a CustomerSegmentProvider");return a},tJ=()=>{const{id:a}=qa(),r=mr(),{entries:e,fetchEntriesBySegmentId:t,createEntry:s,deleteEntry:o,loading:i}=JQ(),{customers:l,fetchCustomersByStoreId:c}=Hd(),{segments:d,fetchSegmentsByStoreId:h}=im(),{activeStoreId:m}=fn(),[y,x]=f.useState(!1),[b,v]=f.useState(""),[j,S]=f.useState(!1),[k,N]=f.useState(null),P=f.useMemo(()=>!!b&&!!a,[b,a]),R=f.useMemo(()=>d.find(q=>q._id===a),[d,a]);f.useEffect(()=>{a&&t(a).catch(()=>{})},[a,t]),f.useEffect(()=>{m&&l.length===0&&c(m).catch(()=>{})},[m,l.length,c]),f.useEffect(()=>{m&&d.length===0&&h(m).catch(()=>{})},[m,d.length,h]);const F=f.useCallback(()=>{x(!0)},[]),z=f.useCallback(()=>{x(!1),v("")},[]),H=f.useCallback(q=>{v(q.target.value)},[]),V=f.useCallback(async()=>{if(!(!a||!b))try{await s(a,b),v(""),x(!1)}catch{}},[a,b,s]),W=f.useCallback(q=>{N(q),S(!0)},[]),Z=f.useCallback(()=>{S(!1),N(null)},[]),A=f.useCallback(async()=>{if(k)try{await o(k._id),S(!1),N(null)}catch{}},[k,o]);return n.jsxs(pr,{children:[n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>r("/customers/segments"),className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(Hn,{className:"w-4 h-4"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:R?.name||"Segment details"})]}),n.jsx("button",{onClick:F,className:"px-3 py-1.5 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 transition-colors",children:"Add Customer"})]})})}),n.jsx("div",{className:"max-w-7xl mx-auto py-4 px-4",children:i?n.jsx("div",{className:"py-6 text-center",children:n.jsx("p",{className:"text-sm text-gray-600",children:"Loading customers..."})}):e.length===0?n.jsx("div",{className:"py-6 text-center",children:n.jsx("p",{className:"text-sm text-gray-600",children:"No customers in this segment yet"})}):n.jsx("div",{className:"bg-white border border-gray-200",children:n.jsx(ZQ,{entries:e,onDelete:W})})})]}),n.jsx(KQ,{isOpen:y,onClose:z,selectedCustomerId:b,onCustomerChange:H,customers:l,canSave:P,onSave:V}),n.jsx(XQ,{isOpen:j,onClose:Z,entry:k,onConfirm:A})]})},rJ=()=>{const a=mr(),{activeStoreId:r}=fn(),{customers:e,loading:t,fetchCustomersByStoreId:s}=Hd();return f.useEffect(()=>{r&&s(r)},[r,s]),n.jsx(pr,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-4",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(o4,{className:"w-5 h-5 text-gray-600"}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Customers"})]}),e&&e.length>0&&n.jsxs("button",{onClick:()=>a("/customers/new"),className:"flex items-center gap-1.5 px-3 py-1.5 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 transition-colors",children:[n.jsx(Ak,{className:"w-4 h-4"}),"Add customer"]})]})})}),n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:!t&&(!e||e.length===0)?n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-6 text-center",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-2",children:"Everything customers-related in one place"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Manage customer details, see customer order history, and group customers into segments."}),n.jsxs("div",{className:"flex gap-2 justify-center flex-wrap",children:[n.jsxs("button",{onClick:()=>a("/customers/new"),className:"flex items-center gap-1.5 px-3 py-1.5 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 transition-colors",children:[n.jsx(Ak,{className:"w-4 h-4"}),"Add customer"]}),n.jsxs("button",{className:"flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:[n.jsx(uS,{className:"w-4 h-4"}),"Import customers"]})]})]}):n.jsxs("div",{className:"bg-white rounded border border-gray-200",children:[n.jsx("div",{className:"p-3 border-b border-gray-200 bg-gray-50",children:n.jsxs("h2",{className:"text-base font-medium text-gray-900",children:[e?.length||0," Customer",(e?.length||0)!==1?"s":""]})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Name"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Email"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Phone"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Tags"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Created"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t?n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"px-3 py-6 text-center text-sm text-gray-600",children:"Loading customers..."})}):e&&e.length>0?e.map(o=>n.jsxs("tr",{onClick:()=>a(`/customers/${o._id}`),className:"hover:bg-gray-50 cursor-pointer transition-colors",children:[n.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium text-gray-900",children:[o.firstName," ",o.lastName]}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-700",children:o.email}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-700",children:o.phoneNumber}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:Array.isArray(o.tagIds)&&o.tagIds.length>0?n.jsx("div",{className:"flex flex-wrap gap-1",children:o.tagIds.map(i=>n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-700",children:i.name||i},i._id||i))}):n.jsx("span",{className:"text-gray-400",children:""})}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-600",children:new Date(o.createdAt).toLocaleDateString()})]},o._id)):n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"px-3 py-6 text-center text-sm text-gray-600",children:"No customers found"})})})]})})]})})]})})},nJ=({isOpen:a,name:r,storeId:e,onNameChange:t,onClose:s,onCreate:o})=>{const i=f.useCallback(l=>{t(l.target.value)},[t]);return n.jsx(un,{open:a,onClose:s,title:"Create customer segment",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:s,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:o,disabled:!r.trim()||!e,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Create customer segment"})]}),children:n.jsxs("div",{children:[n.jsx("label",{htmlFor:"create-segment-name",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Name"}),n.jsx("input",{id:"create-segment-name",type:"text",value:r,onChange:i,className:"w-full px-3 py-1.5 text-base border border-gray-200 focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors",placeholder:"Enter segment name",autoFocus:!0})]})})},aJ=({segment:a,onSegmentClick:r,onEditClick:e})=>{const t=f.useCallback(()=>{r(a._id)},[a._id,r]),s=f.useCallback(o=>{e(o,a._id,a.name)},[a._id,a.name,e]);return n.jsxs("tr",{className:"cursor-pointer hover:bg-gray-50 transition-colors",onClick:t,children:[n.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:n.jsx("span",{className:"font-medium text-gray-900 text-sm",children:a.name})}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:n.jsx("span",{className:"text-sm text-gray-600",children:new Date(a.createdAt).toLocaleDateString()})}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-right",children:n.jsx("button",{className:"px-2 py-1 text-xs font-medium text-gray-700 hover:bg-gray-100 rounded transition-colors",onClick:s,children:"Edit"})})]})},sJ=({segments:a,sortOrder:r,onSortToggle:e,onSegmentClick:t,onEditClick:s})=>{const o=f.useCallback(()=>{e()},[e]);return n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Segment Name"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700 cursor-pointer hover:bg-gray-100 transition-colors",onClick:o,children:n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("span",{children:"Created"}),r==="asc"?n.jsx(Ih,{className:"w-3.5 h-3.5 text-gray-600"}):n.jsx(Mh,{className:"w-3.5 h-3.5 text-gray-600"})]})}),n.jsx("th",{className:"px-3 py-2 text-right text-sm font-medium text-gray-700",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(i=>n.jsx(aJ,{segment:i,onSegmentClick:t,onEditClick:s},i._id))})]})})},oJ=({isOpen:a,editName:r,onNameChange:e,onClose:t,onSave:s})=>{const o=f.useCallback(i=>{e(i.target.value)},[e]);return n.jsx(un,{open:a,onClose:t,title:"Edit customer segment",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:t,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:s,disabled:!r.trim(),className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Save"})]}),children:n.jsxs("div",{children:[n.jsx("label",{htmlFor:"edit-segment-name",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Name"}),n.jsx("input",{id:"edit-segment-name",type:"text",value:r,onChange:o,className:"w-full px-3 py-1.5 text-base border border-gray-200 focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors",placeholder:"Enter segment name",autoFocus:!0})]})})},iJ=()=>{const{segments:a,createCustomerSegment:r,fetchSegmentsByStoreId:e,updateCustomerSegmentName:t,loading:s}=im(),{activeStoreId:o}=fn(),[i,l]=f.useState(!1),[c,d]=f.useState(""),[h,m]=f.useState(!1),[y,x]=f.useState(""),[b,v]=f.useState(""),[j,S]=f.useState("desc"),k=mr(),N=f.useMemo(()=>o||"",[o]),P=f.useMemo(()=>[...a].sort((K,D)=>{const Q=new Date(K.createdAt).getTime(),oe=new Date(D.createdAt).getTime();return j==="asc"?Q-oe:oe-Q}),[a,j]);f.useEffect(()=>{N&&e(N).catch(()=>{})},[N,e]);const R=f.useCallback(async()=>{if(!(!c.trim()||!N))try{await r(N,c.trim()),d(""),l(!1)}catch{}},[c,N,r]),F=f.useCallback(async()=>{if(!(!y.trim()||!b))try{await t(b,y.trim()),m(!1)}catch{}},[y,b,t]),z=f.useCallback(()=>{l(!0)},[]),H=f.useCallback(()=>{l(!1)},[]),V=f.useCallback((I,K)=>{v(I),x(K),m(!0)},[]),W=f.useCallback(()=>{m(!1)},[]),Z=f.useCallback(I=>{k(`/customers/segments/${I}`)},[k]),A=f.useCallback((I,K,D)=>{I.stopPropagation(),V(K,D)},[V]),q=f.useCallback(()=>{S(I=>I==="asc"?"desc":"asc")},[]);return n.jsxs(pr,{children:[n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-4",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Customer segments"}),n.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:"Organize customers into groups"})]}),n.jsx("button",{onClick:z,className:"px-3 py-1.5 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 transition-colors",children:"Create customer segment"})]})})}),n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsx("div",{className:"bg-white rounded border border-gray-200 overflow-hidden",children:s?n.jsx("div",{className:"p-4",children:n.jsx("p",{className:"text-sm text-gray-600",children:"Loading..."})}):a.length===0?n.jsx("div",{className:"p-6 text-center",children:n.jsx("p",{className:"text-sm text-gray-600",children:"No customer segments"})}):n.jsx(sJ,{segments:P,sortOrder:j,onSortToggle:q,onSegmentClick:Z,onEditClick:A})})})]}),n.jsx(nJ,{isOpen:i,name:c,storeId:N,onNameChange:d,onClose:H,onCreate:R}),n.jsx(oJ,{isOpen:h,editName:y,onNameChange:x,onClose:W,onSave:F})]})},lJ=({discounts:a})=>{const r=mr(),e=f.useCallback(t=>{r(`/discounts/amount-off-order/${t}`)},[r]);return a.length===0?null:n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsx("div",{className:"bg-white border border-gray-200 overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Code / Title"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Method"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Value"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Eligibility"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Min Requirement"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Combinations"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Status"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Created"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(t=>{const s=t.method==="discount-code"?t.discountCode:t.title,o=t.valueType==="percentage"?`${t.percentage??0}%`:`${t.fixedAmount??0}`,i=t.minimumPurchase==="minimum-amount"?`Min Amount ${t.minimumAmount??0}`:t.minimumPurchase==="minimum-quantity"?`Min Qty ${t.minimumQuantity??0}`:"None",l=`P:${t.productDiscounts?"Y":"N"} / O:${t.orderDiscounts?"Y":"N"} / S:${t.shippingDiscounts?"Y":"N"}`;return n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>e(t._id),children:[n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:s||"-"}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t.method}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:o}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t.eligibility}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:i}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:l}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t.status||"active"}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t.createdAt?new Date(t.createdAt).toLocaleDateString():"-"})]},t._id)})})]})})})},cJ=({discounts:a})=>{const r=mr(),e=f.useCallback(s=>{r(`/discounts/${s}`)},[r]),t=f.useCallback(s=>s?"Yes":"No",[]);return a.length===0?null:n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsx("div",{className:"bg-white border border-gray-200 overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Code / Title"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Method"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Value"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Applies to"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Eligibility"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Min Purchase"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Min Qty"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Product Disc."}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Order Disc."}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Shipping Disc."}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Total Uses Limit"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Limit Total Uses"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Status"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Created"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(s=>{const o=s.valueType==="percentage"?`${s.percentage??0}%`:`${s.fixedAmount??0}`,i=s.method==="discount-code"?s.discountCode:s.title;return n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>e(s._id),children:[n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:i||"-"}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:s.method}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:o}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:s.appliesTo}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:s.eligibility}),n.jsxs("td",{className:"px-3 py-2 text-sm text-gray-900",children:[s.minimumPurchase||"-",s.minimumPurchase==="minimum-amount"&&s.minimumAmount!==void 0?` (${s.minimumAmount})`:""]}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:s.minimumQuantity??"-"}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t(s.productDiscounts)}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t(s.orderDiscounts)}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t(s.shippingDiscounts)}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:s.totalUsesLimit??"-"}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t(s.limitTotalUses)}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:s.status||"active"}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:new Date(s.createdAt).toLocaleDateString()})]},s._id)})})]})})})},dJ=({discounts:a})=>{const r=mr(),e=f.useCallback(t=>{r(`/discounts/pyxgety/${t}`)},[r]);return a.length===0?null:n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsx("div",{className:"bg-white border border-gray-200 overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Code / Title"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Method"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Customer Buys"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Any Items From"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Gets Qty"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Gets From"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Value"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Eligibility"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Status"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Created"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(t=>{const s=t.method==="discount-code"?t.discountCode:t.title,o=t.discountedValue==="percentage"?`${t.discountedPercentage??0}%`:t.discountedValue==="amount"?`${t.discountedAmount??0}`:"Free";return n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>e(t._id),children:[n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:s||"-"}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t.method}),n.jsxs("td",{className:"px-3 py-2 text-sm text-gray-900",children:[t.customerBuys,t.customerBuys==="minimum-quantity"&&t.quantity?` (${t.quantity})`:t.customerBuys==="minimum-amount"&&t.amount?` (${t.amount})`:""]}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t.anyItemsFrom}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t.customerGetsQuantity}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t.customerGetsAnyItemsFrom}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:o}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t.eligibility}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t.status||"active"}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t.createdAt?new Date(t.createdAt).toLocaleDateString():"-"})]},t._id)})})]})})})},uJ=({onExport:a,onCreateDiscount:r})=>n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Discounts"}),n.jsxs("div",{className:"flex gap-2",children:[a&&n.jsx("button",{onClick:a,className:"px-3 py-1.5 bg-white text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors text-sm font-medium",children:"Export"}),n.jsx("button",{onClick:r,className:"px-3 py-1.5 bg-gray-900 text-white rounded hover:bg-gray-800 transition-colors text-sm font-medium",children:"Create discount"})]})]}),fJ=({discounts:a})=>{const r=mr(),e=f.useCallback(t=>{r(`/discounts/free-shipping/${t}`)},[r]);return a.length===0?null:n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsx("div",{className:"bg-white border border-gray-200 overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Code / Title"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Method"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Country Selection"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Exclude Rates"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Rate Limit"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Eligibility"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Min Requirement"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Combinations"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Status"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Created"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(t=>{const s=t.method==="discount-code"?t.discountCode:t.title,o=t.minimumPurchase==="minimum-amount"?`Min Amount ${t.minimumAmount??0}`:t.minimumPurchase==="minimum-quantity"?`Min Qty ${t.minimumQuantity??0}`:"None",i=`P:${t.productDiscounts?"Y":"N"} / O:${t.orderDiscounts?"Y":"N"}`;return n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>e(t._id),children:[n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:s||"-"}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t.method}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t.countrySelection}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t.excludeShippingRates?"Yes":"No"}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t.excludeShippingRates?t.shippingRateLimit??"-":"-"}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t.eligibility}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:o}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:i}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t.status||"active"}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:t.createdAt?new Date(t.createdAt).toLocaleDateString():"-"})]},t._id)})})]})})})},pJ=({id:a,label:r,isActive:e,onClick:t})=>n.jsx("button",{onClick:()=>t(a),className:`px-3 py-1.5 text-sm font-medium transition-colors ${e?"text-gray-900 border-b-2 border-gray-900":"text-gray-600 hover:text-gray-900"}`,children:r}),KS=({tabs:a,activeTab:r,onTabChange:e})=>n.jsx("div",{className:"flex gap-1 border-b border-gray-200",children:a.map(t=>n.jsx(pJ,{id:t.id,label:t.label,isActive:r===t.id,onClick:e},t.id))}),pP=f.createContext(void 0),hJ=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),[l,c]=f.useState(null),d=f.useCallback(()=>i(null),[]),h=f.useCallback(async x=>{try{s(!0),i(null);const b=await Ke.post("/amount-off-order-discounts",x);return b.data?.success&&b.data?.data&&e(v=>[b.data.data,...v]),b.data}catch(b){const v=b?.response?.data?.error||b?.message||"Failed to create Amount Off Order discount";throw i(v),new Error(v)}finally{s(!1)}},[]),m=f.useCallback(async(x,b)=>{try{s(!0),i(null);const v=new URLSearchParams;b?.page&&v.append("page",String(b.page)),b?.limit&&v.append("limit",String(b.limit)),b?.status&&v.append("status",b.status),b?.method&&v.append("method",b.method);const j=await Ke.get(`/amount-off-order-discounts/store/${x}${v.toString()?`?${v.toString()}`:""}`);return j.data?.success&&(e(j.data.data||[]),c(j.data.pagination||null)),j.data}catch(v){const j=v?.response?.data?.error||v?.message||"Failed to fetch Amount Off Order discounts";throw i(j),new Error(j)}finally{s(!1)}},[]),y=f.useMemo(()=>({discounts:r,loading:t,error:o,pagination:l,createDiscount:h,fetchDiscountsByStoreId:m,clearError:d,setDiscounts:e}),[r,t,o,l,h,m,d]);return n.jsx(pP.Provider,{value:y,children:a})},YS=()=>{const a=f.useContext(pP);if(!a)throw new Error("useAmountOffOrderDiscount must be used within an AmountOffOrderDiscountProvider");return a},hP=f.createContext(void 0),mJ=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),[l,c]=f.useState(null),d=f.useCallback(()=>i(null),[]),h=f.useCallback(async x=>{try{s(!0),i(null);const b=await Ke.post("/buy-x-get-y-discounts",x);return b.data?.success&&b.data?.data&&e(v=>[b.data.data,...v]),b.data}catch(b){const v=b?.response?.data?.error||b?.message||"Failed to create Buy X Get Y discount";throw i(v),new Error(v)}finally{s(!1)}},[]),m=f.useCallback(async(x,b)=>{try{s(!0),i(null);const v=new URLSearchParams;b?.page&&v.append("page",String(b.page)),b?.limit&&v.append("limit",String(b.limit)),b?.status&&v.append("status",b.status),b?.method&&v.append("method",b.method);const j=await Ke.get(`/buy-x-get-y-discounts/store/${x}${v.toString()?`?${v.toString()}`:""}`);return j.data?.success&&(e(j.data.data||[]),c(j.data.pagination||null)),j.data}catch(v){const j=v?.response?.data?.error||v?.message||"Failed to fetch Buy X Get Y discounts";throw i(j),new Error(j)}finally{s(!1)}},[]),y=f.useMemo(()=>({discounts:r,loading:t,error:o,pagination:l,createDiscount:h,fetchDiscountsByStoreId:m,clearError:d,setDiscounts:e}),[r,t,o,l,h,m,d]);return n.jsx(hP.Provider,{value:y,children:a})},ZS=()=>{const a=f.useContext(hP);if(!a)throw new Error("useBuyXGetYDiscount must be used within a BuyXGetYDiscountProvider");return a},mP=f.createContext(void 0),gJ=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),[l,c]=f.useState(null),d=f.useCallback(()=>i(null),[]),h=f.useCallback(async x=>{try{s(!0),i(null);const b=await Ke.post("/free-shipping-discounts",x);return b.data?.success&&b.data?.data&&e(v=>[b.data.data,...v]),b.data}catch(b){const v=b?.response?.data?.error||b?.message||"Failed to create Free Shipping discount";throw i(v),new Error(v)}finally{s(!1)}},[]),m=f.useCallback(async(x,b)=>{try{s(!0),i(null);const v=new URLSearchParams;b?.page&&v.append("page",String(b.page)),b?.limit&&v.append("limit",String(b.limit)),b?.status&&v.append("status",b.status),b?.method&&v.append("method",b.method);const j=await Ke.get(`/free-shipping-discounts/store/${x}${v.toString()?`?${v.toString()}`:""}`);return j.data?.success&&(e(j.data.data||[]),c(j.data.pagination||null)),j.data}catch(v){const j=v?.response?.data?.error||v?.message||"Failed to fetch Free Shipping discounts";throw i(j),new Error(j)}finally{s(!1)}},[]),y=f.useMemo(()=>({discounts:r,loading:t,error:o,pagination:l,createDiscount:h,fetchDiscountsByStoreId:m,clearError:d,setDiscounts:e}),[r,t,o,l,h,m,d]);return n.jsx(mP.Provider,{value:y,children:a})},XS=()=>{const a=f.useContext(mP);if(!a)throw new Error("useFreeShippingDiscount must be used within a FreeShippingDiscountProvider");return a},yJ=()=>{const a=mr(),{discounts:r,error:e,fetchDiscountsByStoreId:t}=OS(),{discounts:s,loading:o,error:i,fetchDiscountsByStoreId:l}=ZS(),{discounts:c,loading:d,error:h,fetchDiscountsByStoreId:m}=YS(),{discounts:y,loading:x,error:b,fetchDiscountsByStoreId:v}=XS(),{activeStoreId:j}=fn(),[S,k]=f.useState("amount-off-products");f.useEffect(()=>{(async()=>{if(j)try{S==="amount-off-products"?await t(j,{page:1,limit:10}):S==="buy-x-get-y"?await l(j,{page:1,limit:10}):S==="amount-off-order"?await m(j,{page:1,limit:10}):S==="free-shipping"&&await v(j,{page:1,limit:10})}catch{}})()},[j,S,t,l,m,v]);const N=f.useCallback(()=>{a("/discounts/select-discount-to-create")},[a]),P=f.useCallback(F=>{k(F)},[]),R=[{id:"amount-off-products",label:"Amount off products"},{id:"buy-x-get-y",label:"Buy X Get Y"},{id:"amount-off-order",label:"Amount off order"},{id:"free-shipping",label:"Free shipping"}];return n.jsx(pr,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsx(uJ,{onCreateDiscount:N}),n.jsx("div",{className:"mt-3",children:n.jsx(KS,{tabs:R,activeTab:S,onTabChange:P})})]})}),S==="amount-off-products"&&e&&n.jsx("div",{className:"max-w-7xl mx-auto mt-3 px-4",children:n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-800 px-3 py-2 text-sm",children:e})}),S==="buy-x-get-y"&&i&&n.jsx("div",{className:"max-w-7xl mx-auto mt-3 px-4",children:n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-800 px-3 py-2 text-sm",children:i})}),S==="amount-off-order"&&h&&n.jsx("div",{className:"max-w-7xl mx-auto mt-3 px-4",children:n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-800 px-3 py-2 text-sm",children:h})}),S==="free-shipping"&&b&&n.jsx("div",{className:"max-w-7xl mx-auto mt-3 px-4",children:n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-800 px-3 py-2 text-sm",children:b})}),S==="amount-off-products"&&r.length>0&&n.jsx(cJ,{discounts:r}),S==="buy-x-get-y"&&s.length>0&&n.jsx(dJ,{discounts:s}),S==="amount-off-order"&&c.length>0&&n.jsx(lJ,{discounts:c}),S==="free-shipping"&&y.length>0&&n.jsx(fJ,{discounts:y}),S==="amount-off-products"&&r.length===0&&n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsx("p",{className:"text-sm text-gray-600",children:"No amount off products discount yet"})}),S==="buy-x-get-y"&&s.length===0&&n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsx("p",{className:"text-sm text-gray-600",children:"No buy x get y discounts yet"})}),S==="amount-off-order"&&c.length===0&&n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsx("p",{className:"text-sm text-gray-600",children:"No amount off order discounts yet"})}),S==="free-shipping"&&y.length===0&&n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsx("p",{className:"text-sm text-gray-600",children:"No free shipping discounts yet"})})]})})},xJ=({isOpen:a,isDeactivating:r,onCancel:e,onConfirm:t})=>n.jsx(un,{open:a,onClose:e,title:"Deactivate Gift Card",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:e,disabled:r,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors disabled:opacity-50",children:"No"}),n.jsx("button",{onClick:t,disabled:r,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Deactivating...":"Yes, Deactivate"})]}),children:n.jsx("p",{className:"text-sm text-gray-700",children:"Are you sure you want to deactivate this gift card? This action will make the gift card inactive and prevent further operations on it."})}),vJ=({isOpen:a,expirationOption:r,newExpirationDate:e,isUpdating:t,onClose:s,onExpirationOptionChange:o,onExpirationDateChange:i,onSave:l,hasChanges:c})=>n.jsxs(un,{open:a,onClose:s,title:"Edit Gift Card Expiration",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:s,disabled:t,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:l,disabled:!c()||t,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:t?"Updating...":"Done"})]}),children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Expiration Date Options"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center cursor-pointer",children:[n.jsx("input",{type:"radio",name:"expirationOption",value:"no-expiration",checked:r==="no-expiration",onChange:o,className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400 cursor-pointer"}),n.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"No expiration date"})]}),n.jsxs("label",{className:"flex items-center cursor-pointer",children:[n.jsx("input",{type:"radio",name:"expirationOption",value:"set-expiration",checked:r==="set-expiration",onChange:o,className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400 cursor-pointer"}),n.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Set expiration date"})]})]})]}),r==="set-expiration"&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{htmlFor:"expirationDate",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Expiration Date"}),n.jsx("input",{id:"expirationDate",type:"date",value:e,onChange:d=>i(d.target.value),min:new Date().toISOString().split("T")[0],className:"w-full px-3 py-1.5 border border-gray-200 rounded focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors text-sm"})]})]}),bJ=({onBack:a,onDeactivate:r,isActive:e})=>n.jsx("div",{className:"mb-6 border-b border-gray-200 pb-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:a,className:"flex items-center gap-1.5 px-3 py-1.5 text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:n.jsx(Hn,{className:"w-4 h-4"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Gift Card Details"}),n.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:"Manage and view gift card information"})]})]}),n.jsxs("button",{onClick:r,disabled:!e,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(Vs,{className:"w-4 h-4"}),"Deactivate"]})]})}),wJ=({giftCard:a,onEdit:r})=>n.jsx("div",{className:"md:col-span-4",children:n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-4 flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center mr-2",children:n.jsx(e4,{className:"w-4 h-4 text-gray-600"})}),n.jsx("h3",{className:"text-base font-medium text-gray-900",children:"Gift Card"})]}),a.isActive&&n.jsx("button",{onClick:r,className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors",children:n.jsx(oi,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Code"}),n.jsx("p",{className:"text-lg font-medium font-mono tracking-wide break-all text-gray-900",children:a.code})]}),n.jsxs("div",{className:"mb-4 flex items-center",children:[n.jsx(mS,{className:"w-5 h-5 mr-2 text-gray-600"}),n.jsxs("span",{className:"text-xl font-medium text-gray-900",children:["",a.initialValue]})]}),n.jsx("div",{className:"mt-auto pt-3 border-t border-gray-200",children:n.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${a.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.isActive?"Active":"Inactive"})})]})}),jJ=({giftCard:a})=>n.jsx("div",{className:"md:col-span-4",children:n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-4 h-full",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center mr-2",children:n.jsx(e4,{className:"w-4 h-4 text-gray-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Gift Card Information"}),n.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:"Detailed information about this gift card"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"pb-3 border-b border-gray-200",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Gift Card Code"}),n.jsx("p",{className:"text-sm font-medium font-mono tracking-wide text-gray-900",children:a.code})]}),n.jsxs("div",{className:"pb-3 border-b border-gray-200",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Initial Value"}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(mS,{className:"w-4 h-4 text-gray-600 mr-1.5"}),n.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",a.initialValue]})]})]}),n.jsxs("div",{className:"pb-3 border-b border-gray-200",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Status"}),n.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${a.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.isActive?"Active":"Inactive"})]}),n.jsxs("div",{className:"pb-3 border-b border-gray-200",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Created Date"}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(dj,{className:"w-3.5 h-3.5 text-gray-600 mr-1.5"}),n.jsx("span",{className:"text-sm text-gray-700",children:new Date(a.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]}),a.expirationDate&&n.jsxs("div",{className:"pb-3 border-b border-gray-200",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Expiration Date"}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(dj,{className:"w-3.5 h-3.5 text-gray-600 mr-1.5"}),n.jsx("span",{className:"text-sm text-gray-700",children:new Date(a.expirationDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Last Updated"}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(dj,{className:"w-3.5 h-3.5 text-gray-600 mr-1.5"}),n.jsx("span",{className:"text-sm text-gray-700",children:new Date(a.updatedAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]})]})]})}),CJ=({giftCard:a,isEditingNotes:r,editedNotes:e,isUpdatingNotes:t,onEditNotes:s,onCancelEditNotes:o,onSaveNotes:i,onNotesChange:l})=>n.jsx("div",{className:"md:col-span-4",children:n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-4 h-full",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center mr-2",children:n.jsx(oi,{className:"w-4 h-4 text-gray-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Notes"}),n.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:"Additional information about this gift card"})]})]}),!r&&a.isActive&&n.jsx("button",{onClick:s,className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors",children:n.jsx(oi,{className:"w-4 h-4"})})]}),r?n.jsxs("div",{children:[n.jsx("textarea",{value:e,onChange:c=>l(c.target.value),rows:4,placeholder:"Enter notes for this gift card...",className:"w-full px-3 py-2 border border-gray-200 rounded focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors resize-none mb-3 text-sm"}),n.jsxs("div",{className:"flex gap-2 justify-end",children:[n.jsx("button",{onClick:o,disabled:t,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:i,disabled:t,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 rounded hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Saving...":"Save"})]})]}):n.jsx("div",{className:"p-3 bg-gray-50 rounded border border-gray-200 min-h-[100px]",children:a.notes?n.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap leading-relaxed",children:a.notes}):n.jsx("p",{className:"text-sm text-gray-500 italic text-center py-6",children:"No notes available for this gift card"})})]})}),SJ=({isOpen:a,timelineLoading:r,onCancel:e,onConfirm:t})=>n.jsx(un,{open:a,onClose:e,title:"Delete Timeline Entry",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:e,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"No"}),n.jsx("button",{onClick:t,disabled:r,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Yes, Delete"})]}),children:n.jsx("p",{className:"text-sm text-gray-700",children:"Do you really want to delete this timeline comment? This action cannot be undone."})}),NJ=({comment:a,onCommentChange:r,onPostComment:e})=>n.jsx("div",{className:"mb-4",children:n.jsxs("div",{className:"relative",children:[n.jsx("textarea",{value:a,onChange:t=>r(t.target.value),rows:3,placeholder:"Add a comment to this gift card...",className:"w-full px-3 py-2 pr-20 border border-gray-200 rounded focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors resize-none text-sm"}),n.jsxs("button",{onClick:e,disabled:!a.trim(),className:"absolute bottom-2 right-2 flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium text-white bg-gray-900 rounded hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:[n.jsx(RD,{className:"w-3.5 h-3.5"}),"Post"]})]})}),kJ=({entry:a,editingTimelineId:r,editComment:e,onEditCommentChange:t,onEditTimeline:s,onDeleteTimeline:o,onCancelEdit:i,onSaveEdit:l})=>{const c=r===a._id;return n.jsxs("div",{className:`p-3 rounded border ${a.type==="event"?"bg-blue-50 border-blue-200":"bg-white border-gray-200"}`,children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${a.type==="event"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-700"}`,children:a.type==="event"?"Event":"Comment"}),n.jsx("span",{className:"text-xs text-gray-600",children:new Date(a.createdAt).toLocaleString()})]}),!c&&n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{onClick:()=>s(a._id,a.comment),className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors",children:n.jsx(oi,{className:"w-3.5 h-3.5"})}),n.jsx("button",{onClick:()=>o(a._id),className:"p-1 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded transition-colors",children:n.jsx(Vs,{className:"w-3.5 h-3.5"})})]})]}),c?n.jsxs("div",{children:[n.jsx("textarea",{value:e,onChange:d=>t(d.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-200 rounded focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors resize-none mb-3 text-sm"}),n.jsxs("div",{className:"flex gap-2 justify-end",children:[n.jsx("button",{onClick:i,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:l,disabled:!e.trim(),className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 rounded hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Save"})]})]}):n.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:a.comment})]})},_J=({timelineEntries:a,editingTimelineId:r,editComment:e,onEditCommentChange:t,onEditTimeline:s,onDeleteTimeline:o,onCancelEdit:i,onSaveEdit:l})=>n.jsx("div",{className:"flex flex-col gap-4",children:a.map(c=>n.jsx(kJ,{entry:c,editingTimelineId:r,editComment:e,onEditCommentChange:t,onEditTimeline:s,onDeleteTimeline:o,onCancelEdit:i,onSaveEdit:l},c._id))}),EJ=({comment:a,onCommentChange:r,onPostComment:e,timelineEntries:t,timelineLoading:s,timelineError:o,editingTimelineId:i,editComment:l,onEditCommentChange:c,onEditTimeline:d,onDeleteTimeline:h,onCancelEdit:m,onSaveEdit:y,deleteDialogOpen:x,onConfirmDelete:b,onCancelDelete:v})=>n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"mt-6",children:n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-4",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center mr-2",children:n.jsx(gS,{className:"w-4 h-4 text-gray-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Timeline"}),n.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:"Track gift card activities and comments"})]})]}),n.jsx(NJ,{comment:a,onCommentChange:r,onPostComment:e}),s?n.jsx("div",{className:"flex justify-center items-center py-6",children:n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-gray-900"})}):o?n.jsx("div",{className:"mb-3 bg-red-50 border border-red-200 text-red-700 px-3 py-2 rounded text-sm",children:o}):t.length===0?n.jsx("div",{className:"p-4 bg-gray-50 rounded border border-dashed border-gray-300",children:n.jsx("p",{className:"text-sm text-gray-500 text-center",children:"No timeline entries yet. Be the first to add a comment!"})}):n.jsx(_J,{timelineEntries:t,editingTimelineId:i,editComment:l,onEditCommentChange:c,onEditTimeline:d,onDeleteTimeline:h,onCancelEdit:m,onSaveEdit:y})]})}),n.jsx(SJ,{isOpen:x,timelineLoading:s,onCancel:v,onConfirm:b})]}),gP=f.createContext(void 0),TJ=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async b=>{try{s(!0),i(null);const v=await Ke.get(`/gift-card-timeline/gift-card/${b}`),{success:j,data:S}=v.data;j?e(S):i("Failed to fetch timeline entries")}catch(v){const j=v?.response?.data?.message||v?.message||"Failed to fetch timeline entries";i(j),console.error("Error fetching timeline entries:",v)}finally{s(!1)}},[]),c=f.useCallback(async b=>{try{s(!0),i(null);const v=await Ke.post("/gift-card-timeline",b),{success:j,data:S}=v.data;if(j)return e(k=>[S,...k]),S;throw new Error("Failed to create timeline entry")}catch(v){const j=v?.response?.data?.message||v?.message||"Failed to create timeline entry";throw i(j),console.error("Error creating timeline entry:",v),v}finally{s(!1)}},[]),d=f.useCallback(async(b,v)=>{try{s(!0),i(null);const j=await Ke.put(`/gift-card-timeline/${b}`,v),{success:S,data:k}=j.data;if(S)return e(N=>N.map(P=>P._id===b?k:P)),k;throw new Error("Failed to update timeline entry")}catch(j){const S=j?.response?.data?.message||j?.message||"Failed to update timeline entry";throw i(S),console.error("Error updating timeline entry:",j),j}finally{s(!1)}},[]),h=f.useCallback(async b=>{try{s(!0),i(null);const v=await Ke.delete(`/gift-card-timeline/${b}`),{success:j}=v.data;if(j)e(S=>S.filter(k=>k._id!==b));else throw new Error("Failed to delete timeline entry")}catch(v){const j=v?.response?.data?.message||v?.message||"Failed to delete timeline entry";throw i(j),console.error("Error deleting timeline entry:",v),v}finally{s(!1)}},[]),m=f.useCallback(()=>{i(null)},[]),y=f.useCallback(()=>{e([]),i(null),s(!1)},[]),x={timelineEntries:r,loading:t,error:o,getTimelineByGiftCardId:l,createTimelineEntry:c,updateTimelineEntry:d,deleteTimelineEntry:h,clearError:m,clearTimelineEntries:y};return n.jsx(gP.Provider,{value:x,children:a})},OJ=()=>{const a=f.useContext(gP);if(a===void 0)throw new Error("useGiftCardTimeline must be used within a GiftCardTimelineProvider");return a},yP=f.createContext(void 0),PJ=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async b=>{try{s(!0),i(null);const v=await Ke.get(`/gift-cards/store/${b}`),{success:j,data:S}=v.data;j?e(S):i("Failed to fetch gift cards")}catch(v){const j=v?.response?.data?.message||v?.message||"Failed to fetch gift cards";i(j),console.error("Error fetching gift cards:",v)}finally{s(!1)}},[]),c=f.useCallback(async b=>{try{s(!0),i(null);const v=await Ke.post("/gift-cards",b),{success:j,data:S}=v.data;if(j)return e(k=>[S,...k]),S;throw new Error("Failed to create gift card")}catch(v){const j=v?.response?.data?.message||v?.message||"Failed to create gift card";throw i(j),console.error("Error creating gift card:",v),v}finally{s(!1)}},[]),d=f.useCallback(async(b,v)=>{try{s(!0),i(null);const j=await Ke.put(`/gift-cards/${b}`,v),{success:S,data:k}=j.data;if(S)return e(N=>N.map(P=>P._id===b?k:P)),k;throw new Error("Failed to update gift card")}catch(j){const S=j?.response?.data?.message||j?.message||"Failed to update gift card";throw i(S),console.error("Error updating gift card:",j),j}finally{s(!1)}},[]),h=f.useCallback(async b=>{try{s(!0),i(null);const v=await Ke.delete(`/gift-cards/${b}`),{success:j}=v.data;if(j)e(S=>S.filter(k=>k._id!==b));else throw new Error("Failed to delete gift card")}catch(v){const j=v?.response?.data?.message||v?.message||"Failed to delete gift card";throw i(j),console.error("Error deleting gift card:",v),v}finally{s(!1)}},[]),m=f.useCallback(()=>{i(null)},[]),y=f.useCallback(()=>{e([]),i(null),s(!1)},[]),x={giftCards:r,loading:t,error:o,fetchGiftCardsByStoreId:l,createGiftCard:c,updateGiftCard:d,deleteGiftCard:h,clearError:m,clearGiftCards:y};return n.jsx(yP.Provider,{value:x,children:a})},QS=()=>{const a=f.useContext(yP);if(a===void 0)throw new Error("useGiftCards must be used within a GiftCardsProvider");return a},AJ=()=>{const{giftCardId:a}=qa(),r=mr(),{giftCards:e,loading:t,error:s,fetchGiftCardsByStoreId:o,updateGiftCard:i}=QS(),{activeStoreId:l}=fn(),{timelineEntries:c,loading:d,error:h,getTimelineByGiftCardId:m,deleteTimelineEntry:y,createTimelineEntry:x,updateTimelineEntry:b}=OJ(),v=f.useMemo(()=>e.find(Ue=>Ue._id===a),[e,a]),[j,S]=f.useState(""),[k,N]=f.useState(!1),[P,R]=f.useState(null),[F,z]=f.useState(null),[H,V]=f.useState(""),[W,Z]=f.useState(!1),[A,q]=f.useState("no-expiration"),[I,K]=f.useState(""),[D,Q]=f.useState(!1),[oe,re]=f.useState(!1),[Te,G]=f.useState(""),[Y,Se]=f.useState(!1),[fe,Ee]=f.useState(!1),[Ae,qe]=f.useState(!1);f.useEffect(()=>{l&&e.length===0&&o(l)},[l,e.length,o]),f.useEffect(()=>{a&&m(a)},[a,m]);const we=f.useCallback(()=>{r("/products/gift-cards")},[r]),Oe=f.useCallback(()=>{v?.expirationDate?(q("set-expiration"),K(v.expirationDate.split("T")[0])):(q("no-expiration"),K("")),Z(!0)},[v]),ze=f.useCallback(()=>{Ee(!0)},[]),We=f.useCallback(Ue=>{R(Ue),N(!0)},[]),pt=f.useCallback(async()=>{if(P)try{await y(P),N(!1),R(null)}catch(Ue){console.error("Error deleting timeline entry:",Ue)}},[P,y]),Pt=f.useCallback(()=>{N(!1),R(null)},[]),ee=f.useCallback(async()=>{if(!(!j.trim()||!a))try{await x({giftCardId:a,comment:j.trim()}),S("")}catch(Ue){console.error("Error posting comment:",Ue)}},[j,a,x]),Ne=f.useCallback((Ue,Ge)=>{z(Ue),V(Ge)},[]),Ie=f.useCallback(async()=>{if(!(!F||!H.trim()))try{await b(F,{comment:H.trim()}),z(null),V("")}catch(Ue){console.error("Error updating timeline entry:",Ue)}},[F,H,b]),ne=f.useCallback(()=>{z(null),V("")},[]),M=f.useCallback(()=>{Z(!1),q("no-expiration"),K(""),Q(!1)},[]),U=f.useCallback(Ue=>{q(Ue.target.value),Ue.target.value==="no-expiration"&&K("")},[]),J=f.useCallback(async()=>{if(v){Q(!0);try{let Ue={};A==="no-expiration"?Ue.expirationDate=void 0:I&&(Ue.expirationDate=new Date(I).toISOString()),(v.expirationDate?v.expirationDate.split("T")[0]:null)!==(A==="no-expiration"?null:I)&&await i(v._id,Ue),M()}catch(Ue){console.error("Error updating gift card:",Ue)}finally{Q(!1)}}},[v,A,I,i,M]),ce=f.useCallback(()=>v?(v.expirationDate?v.expirationDate.split("T")[0]:null)!==(A==="no-expiration"?null:I):!1,[v,A,I]),ue=f.useCallback(()=>{G(v?.notes||""),re(!0)},[v]),xe=f.useCallback(()=>{G(""),re(!1)},[]),he=f.useCallback(async()=>{if(v){Se(!0);try{await i(v._id,{notes:Te}),re(!1),G("")}catch(Ue){console.error("Error updating notes:",Ue)}finally{Se(!1)}}},[v,Te,i]),se=f.useCallback(()=>{Ee(!1)},[]),Le=f.useCallback(async()=>{if(v){qe(!0);try{await i(v._id,{isActive:!1}),Ee(!1)}catch(Ue){console.error("Error deactivating gift card:",Ue)}finally{qe(!1)}}},[v,i]);return t?n.jsx(pr,{children:n.jsx("div",{className:"min-h-screen p-4",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsx("div",{className:"flex justify-center items-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})})})})}):s?n.jsx(pr,{children:n.jsx("div",{className:"min-h-screen p-4",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 text-red-700 px-3 py-2 rounded text-sm",children:s}),n.jsx("button",{onClick:we,className:"mt-3 px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:"Back to Gift Cards"})]})})}):v?n.jsx(pr,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsxs("div",{className:"max-w-7xl mx-auto py-6 px-4",children:[n.jsx(bJ,{onBack:we,onDeactivate:ze,isActive:v.isActive}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6 mb-6",children:[n.jsx(wJ,{giftCard:v,onEdit:Oe}),n.jsx(jJ,{giftCard:v}),n.jsx(CJ,{giftCard:v,isEditingNotes:oe,editedNotes:Te,isUpdatingNotes:Y,onEditNotes:ue,onCancelEditNotes:xe,onSaveNotes:he,onNotesChange:G})]}),n.jsx(EJ,{comment:j,onCommentChange:S,onPostComment:ee,timelineEntries:c,timelineLoading:d,timelineError:h,editingTimelineId:F,editComment:H,onEditCommentChange:V,onEditTimeline:Ne,onDeleteTimeline:We,onCancelEdit:ne,onSaveEdit:Ie,deleteDialogOpen:k,onConfirmDelete:pt,onCancelDelete:Pt})]}),n.jsx(vJ,{isOpen:W,giftCard:v,expirationOption:A,newExpirationDate:I,isUpdating:D,onClose:M,onExpirationOptionChange:U,onExpirationDateChange:K,onSave:J,hasChanges:ce}),n.jsx(xJ,{isOpen:fe,isDeactivating:Ae,onCancel:se,onConfirm:Le})]})}):n.jsx(pr,{children:n.jsx("div",{className:"min-h-screen p-4",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsx("div",{className:"mt-4 bg-yellow-50 border border-yellow-200 text-yellow-700 px-3 py-2 rounded text-sm",children:"Gift card not found"}),n.jsx("button",{onClick:we,className:"mt-3 px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:"Back to Gift Cards"})]})})})},MJ=({giftCard:a,onClick:r})=>{const e=()=>{r(a._id)};return n.jsxs("tr",{onClick:e,className:"hover:bg-gray-50 cursor-pointer transition-colors",children:[n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium text-gray-900",children:n.jsx("div",{className:"font-mono",children:a.code})}),n.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-700",children:["",a.initialValue.toFixed(2)]}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:n.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${a.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.isActive?"Active":"Inactive"})}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-600",children:a.expirationDate?new Date(a.expirationDate).toLocaleDateString():""}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-600",children:new Date(a.createdAt).toLocaleDateString()})]})},IJ=({giftCards:a,onGiftCardClick:r,loading:e=!1,sortOrder:t,onSortToggle:s})=>n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Gift Card Code"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Initial Value"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Status"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Expiration Date"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:s?n.jsxs("button",{onClick:s,className:"flex items-center gap-1 hover:text-gray-900 transition-colors cursor-pointer",children:["Created Date",t&&n.jsx("span",{className:"inline-flex items-center",children:t==="asc"?n.jsx(Ih,{className:"w-3.5 h-3.5"}):n.jsx(Mh,{className:"w-3.5 h-3.5"})})]}):n.jsx("span",{children:"Created Date"})})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e?n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"px-3 py-6 text-center text-sm text-gray-600",children:"Loading gift cards..."})}):a.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"px-3 py-6 text-center text-sm text-gray-600",children:"No gift cards found"})}):a.map(o=>n.jsx(MJ,{giftCard:o,onClick:r},o._id))})]})}),RJ=()=>{const a=mr(),{giftCards:r,loading:e,error:t,fetchGiftCardsByStoreId:s}=QS(),{activeStoreId:o}=fn(),[i,l]=f.useState("desc"),c=f.useCallback(()=>{a("/products/gift-cards/new")},[a]),d=f.useCallback(y=>{a(`/products/gift-cards/${y}`)},[a]);f.useEffect(()=>{o&&s(o)},[o,s]);const h=f.useMemo(()=>[...r].sort((x,b)=>{const v=new Date(x.createdAt).getTime(),j=new Date(b.createdAt).getTime();return i==="asc"?v-j:j-v}),[r,i]),m=f.useCallback(()=>{l(y=>y==="asc"?"desc":"asc")},[]);return n.jsx(pr,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-4",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Gift Cards"}),n.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:"Manage your gift cards and create new ones"})]}),r.length>0&&n.jsxs("button",{onClick:c,className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 transition-colors",children:[n.jsx(na,{className:"w-4 h-4"}),"Create Gift Card"]})]})})}),n.jsxs("div",{className:"max-w-7xl mx-auto py-6 px-4",children:[e&&n.jsx("div",{className:"flex justify-center items-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}),t&&n.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-3 py-2 rounded text-sm",children:t}),!e&&!t&&n.jsx(n.Fragment,{children:r.length===0?n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-6 text-center",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-2",children:"No gift cards yet"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Create your first gift card to get started"}),n.jsxs("button",{onClick:c,className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 transition-colors",children:[n.jsx(na,{className:"w-4 h-4"}),"Create Gift Card"]})]}):n.jsxs("div",{className:"bg-white rounded border border-gray-200",children:[n.jsx("div",{className:"p-3 border-b border-gray-200 bg-gray-50",children:n.jsxs("h2",{className:"text-base font-medium text-gray-900",children:[r.length," Gift Card",r.length!==1?"s":""]})}),n.jsx(IJ,{giftCards:h,onGiftCardClick:d,sortOrder:i,onSortToggle:m})]})})]})]})})},LJ=({isOpen:a,options:r,selectedValue:e,onSelect:t,onClose:s})=>a?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:s}),n.jsxs("div",{className:"absolute top-full left-0 mt-1 w-56 bg-white border border-gray-200 shadow-lg z-20",children:[n.jsx("div",{className:"px-3 py-2 border-b border-gray-200",children:n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Attribution model"})}),r.map(o=>n.jsx("button",{onClick:()=>t(o),className:`w-full text-left px-3 py-1.5 text-sm hover:bg-gray-50 transition-colors ${e===o?"bg-gray-100 text-gray-900":"text-gray-700"}`,children:o},o)),n.jsx("div",{className:"px-3 py-2 border-t border-gray-200",children:n.jsxs("p",{className:"text-xs text-gray-600",children:["A 30-day attribution window applies."," ",n.jsx("button",{className:"text-gray-700 hover:text-gray-900 underline",children:"Learn more"})]})})]})]}):null,DJ=({onCreateCampaign:a,onLearnMore:r})=>n.jsxs("div",{className:"p-4 border border-gray-200 bg-white",children:[n.jsx("h2",{className:"text-base font-medium mb-2 text-gray-900",children:"Centralize your campaign tracking"}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Create campaigns to evaluate how marketing initiatives drive business goals, capture online and offline touch points, add campaign activities from multiple marketing channels, and monitor results."}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:a,className:"px-3 py-1.5 bg-gray-900 text-white rounded hover:bg-gray-800 transition-colors text-sm font-medium",children:"Create campaign"}),n.jsx("button",{onClick:r,className:"px-3 py-1.5 text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors text-sm font-medium",children:"Learn more"})]})]}),FJ=({onBrowseApps:a})=>n.jsxs("div",{className:"p-4 border border-gray-200 bg-white",children:[n.jsx("h2",{className:"text-base font-medium mb-2 text-gray-900",children:"Generate traffic with marketing apps"}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Grow your audience on social platforms, capture new leads with newsletters, signups, increase conversion with chat and more."}),n.jsx("button",{onClick:a,className:"px-3 py-1.5 bg-white text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors text-sm font-medium",children:"Browse marketing apps"})]}),Eg=({title:a,value:r=""})=>n.jsxs("div",{className:"p-3 border border-gray-200 bg-white",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:a}),n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:r})]}),BJ=({message:a="No data found for the date range selected. Please select a different period."})=>n.jsxs("div",{className:"p-4 border border-gray-200 bg-white",children:[n.jsx("h2",{className:"text-base font-medium mb-2 text-gray-900",children:"Top marketing channels"}),n.jsx("p",{className:"text-sm text-gray-600",children:a})]}),zJ=()=>{const[a,r]=f.useState(!1),[e,t]=f.useState("Last non-direct click"),[s,o]=f.useState("Last 30 days"),i=f.useCallback(()=>{r(m=>!m)},[]),l=f.useCallback(()=>{r(!1)},[]),c=f.useCallback(m=>{t(m),r(!1)},[]),d=f.useCallback(m=>{o(m)},[]),h=["Last non-direct click","Last click","First click","Any click","Linear"];return n.jsx(pr,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Marketing"}),n.jsxs("div",{className:"flex gap-2 items-center",children:[n.jsx("button",{className:`px-3 py-1.5 rounded text-sm font-medium transition-colors ${s==="Last 30 days"?"bg-gray-900 text-white hover:bg-gray-800":"bg-white text-gray-700 border border-gray-200 hover:bg-gray-50"}`,onClick:()=>d("Last 30 days"),children:"Last 30 days"}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{className:"flex items-center gap-1 px-3 py-1.5 rounded text-sm font-medium bg-white text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",onClick:i,children:[e,n.jsx(Is,{className:"w-3.5 h-3.5"})]}),n.jsx(LJ,{isOpen:a,options:h,selectedValue:e,onSelect:c,onClose:l})]})]})]})})}),n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:[n.jsx(Eg,{title:"Sessions",value:"12,450"}),n.jsx(Eg,{title:"Sales attributed to marketing",value:"$45,230"}),n.jsx(Eg,{title:"Orders attributed to marketing",value:"342"}),n.jsx(Eg,{title:"Conversion rate",value:"2.75%"}),n.jsx(Eg,{title:"AOV attributed to marketing",value:"$132.15"})]}),n.jsx(BJ,{}),n.jsx(DJ,{}),n.jsx(FJ,{})]})})]})})},UJ=({data:a,onChange:r})=>{const e=f.useCallback(t=>s=>{r(t,s.target.value)},[r]);return n.jsxs("div",{className:"bg-white p-4 rounded border border-gray-200",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:["First Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:a.firstName,onChange:e("firstName"),required:!0,className:"w-full px-3 py-1.5 text-base text-gray-900 border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:a.lastName,onChange:e("lastName"),required:!0,className:"w-full px-3 py-1.5 text-base text-gray-900 border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:["Email ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",value:a.email,onChange:e("email"),required:!0,className:"w-full px-3 py-1.5 text-base text-gray-900 border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:["Phone Number ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"tel",value:a.phoneNumber,onChange:e("phoneNumber"),required:!0,className:"w-full px-3 py-1.5 text-base text-gray-900 border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Language"}),n.jsxs("select",{value:a.language,onChange:e("language"),className:"w-full px-3 py-1.5 text-base text-gray-900 border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors",children:[n.jsx("option",{value:"en",children:"English"}),n.jsx("option",{value:"es",children:"Spanish"}),n.jsx("option",{value:"fr",children:"French"}),n.jsx("option",{value:"de",children:"German"})]})]})]})]})},$J=({notes:a,onChange:r})=>{const e=f.useCallback(t=>{r(t.target.value)},[r]);return n.jsxs("div",{className:"bg-white p-4 rounded border border-gray-200",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Notes"}),n.jsx("textarea",{value:a,onChange:e,placeholder:"Add any additional notes about this customer...",rows:4,className:"w-full px-3 py-2 text-base text-gray-900 border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors resize-none"})]})},VJ=({selectedTagIds:a,customerTags:r,onTagSelect:e,onTagRemove:t,onCreateTag:s})=>{const[o,i]=gr.useState(""),[l,c]=gr.useState(!1),[d,h]=gr.useState(""),m=f.useRef(null),y=f.useRef(null),x=f.useCallback(k=>{i(k.target.value),l||c(!0)},[l]),b=f.useCallback(k=>{e(k),i(""),c(!0)},[e]),v=f.useCallback(async()=>{d.trim()&&(await s(d),i(""),c(!0))},[d,s]);f.useEffect(()=>{const k=setTimeout(()=>h(o.trim()),250);return()=>clearTimeout(k)},[o]),f.useEffect(()=>{const k=N=>{m.current&&!m.current.contains(N.target)&&y.current&&!y.current.contains(N.target)&&c(!1)};return l&&document.addEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}},[l]);const j=f.useMemo(()=>{const k=d.toLowerCase();if(!k)return r.slice(0,10);const N=r.filter(R=>R.name.toLowerCase().startsWith(k)),P=r.filter(R=>!R.name.toLowerCase().startsWith(k)&&R.name.toLowerCase().includes(k)).sort((R,F)=>R.name.toLowerCase().indexOf(k)-F.name.toLowerCase().indexOf(k));return[...N,...P].slice(0,10)},[d,r]),S=f.useMemo(()=>{const k=d.trim();return k&&!r.some(N=>N.name.toLowerCase()===k.toLowerCase())},[d,r]);return n.jsxs("div",{className:"bg-white p-4 rounded border border-gray-200",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Customer Tags"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{ref:y,type:"text",value:o,placeholder:"Search or create customer tags",onChange:x,onFocus:()=>c(!0),className:"w-full px-3 py-1.5 text-base text-gray-900 border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"}),a.length>0&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[a.length," selected"]}),l&&(j.length>0||S)&&n.jsxs("div",{ref:m,className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded shadow-lg max-h-[300px] overflow-y-auto",onMouseDown:k=>k.preventDefault(),children:[j.map(k=>{const N=a.includes(k._id);return n.jsxs("div",{onClick:()=>b(k._id),className:"px-3 py-2 cursor-pointer flex items-center gap-2 hover:bg-gray-50 transition-colors",children:[n.jsx("input",{type:"checkbox",checked:N,readOnly:!0,className:"w-4 h-4 text-gray-900 border-gray-300 rounded focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:k.name})]},k._id)}),S&&n.jsx("div",{onClick:v,className:"px-3 py-2 cursor-pointer hover:bg-gray-50 transition-colors font-medium",children:n.jsxs("span",{className:"text-sm text-gray-700",children:["+ ",d]})})]})]}),a.length>0&&n.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:a.map(k=>{const N=r.find(P=>P._id===k);return n.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2 py-0.5 bg-gray-100 border border-gray-200 rounded text-sm text-gray-700",children:[n.jsx("span",{children:N?.name||"Unknown"}),n.jsx("button",{type:"button",onClick:()=>t(k),className:"p-0.5 hover:bg-gray-200 rounded transition-colors","aria-label":"Remove tag",children:n.jsx(xs,{className:"w-3.5 h-3.5 text-gray-500"})})]},k)})})]})},WJ=({data:a,onChange:r})=>{const e=f.useCallback(t=>s=>{r(t,s.target.checked)},[r]);return n.jsxs("div",{className:"bg-white p-4 rounded border border-gray-200",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Marketing Preferences"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:a.agreedToMarketingEmails,onChange:e("agreedToMarketingEmails"),className:"w-4 h-4 text-gray-900 border-gray-300 rounded focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Agreed to receive marketing emails"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:a.agreedToSmsMarketing,onChange:e("agreedToSmsMarketing"),className:"w-4 h-4 text-gray-900 border-gray-300 rounded focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Agreed to receive SMS marketing"})]})]})]})},HJ=({data:a,onChange:r})=>{const e=f.useCallback(t=>s=>{r("taxSettings.collectTax",t)},[r]);return n.jsxs("div",{className:"bg-white p-4 rounded border border-gray-200",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Tax Settings"}),n.jsxs("fieldset",{children:[n.jsx("legend",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax Collection"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"collectTax",value:"collect",checked:a.collectTax==="collect",onChange:e("collect"),className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Collect Tax"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"collectTax",value:"dont_collect",checked:a.collectTax==="dont_collect",onChange:e("dont_collect"),className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Don't collect tax"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"collectTax",value:"collect_unless_exempt",checked:a.collectTax==="collect_unless_exempt",onChange:e("collect_unless_exempt"),className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Collect tax unless exemptions apply"})]})]})]})]})},qJ=()=>{const a=mr(),{addCustomer:r,loading:e,error:t}=Hd(),{activeStoreId:s}=fn(),{customerTags:o,fetchCustomerTags:i,addCustomerTag:l}=J4(),[c,d]=f.useState([]),[h,m]=f.useState({firstName:"",lastName:"",email:"",phoneNumber:"",language:"en",agreedToMarketingEmails:!1,agreedToSmsMarketing:!1,taxSettings:{collectTax:"collect"},notes:"",tags:""}),y=f.useCallback((k,N)=>{if(k.includes(".")){const[P,R]=k.split(".");m(F=>({...F,[P]:{...F[P],[R]:N}}))}else m(P=>({...P,[k]:N}))},[]),x=f.useCallback(async k=>{k.preventDefault();try{if(!s)return;const N={storeId:s,firstName:h.firstName,lastName:h.lastName,language:h.language,email:h.email,phoneNumber:h.phoneNumber,agreedToMarketingEmails:h.agreedToMarketingEmails,agreedToSmsMarketing:h.agreedToSmsMarketing,collectTax:h.taxSettings.collectTax,notes:h.notes,tagIds:c};await r(N),a("/customers")}catch(N){console.error("Error creating customer:",N)}},[s,h,c,r,a]),b=f.useCallback(()=>{a("/customers")},[a]),v=f.useCallback(k=>{d(N=>N.includes(k)?N.filter(P=>P!==k):[...N,k])},[]),j=f.useCallback(async k=>{if(!(!s||!k.trim()))try{const N=await l(s,k);d(P=>[...new Set([...P,N._id])])}catch(N){throw console.error("Error creating tag:",N),N}},[s,l]),S=f.useCallback(k=>{d(N=>N.filter(P=>P!==k))},[]);return f.useEffect(()=>{s&&i(s)},[s,i]),n.jsx(pr,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-4",children:n.jsx("div",{className:"max-w-4xl mx-auto",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:b,className:"flex items-center gap-1.5 px-3 py-1.5 text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors","aria-label":"Go back",children:n.jsx(Hn,{className:"w-4 h-4"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Add New Customer"}),n.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:"Create a new customer for your store"})]})]})})}),n.jsx("div",{className:"max-w-4xl mx-auto py-6 px-4",children:n.jsxs("form",{className:"flex flex-col gap-4",onSubmit:x,children:[n.jsx(UJ,{data:{firstName:h.firstName,lastName:h.lastName,email:h.email,phoneNumber:h.phoneNumber,language:h.language},onChange:y}),n.jsx(WJ,{data:{agreedToMarketingEmails:h.agreedToMarketingEmails,agreedToSmsMarketing:h.agreedToSmsMarketing},onChange:y}),n.jsx(HJ,{data:{collectTax:h.taxSettings.collectTax},onChange:y}),n.jsx($J,{notes:h.notes,onChange:k=>y("notes",k)}),n.jsx(VJ,{selectedTagIds:c,customerTags:o,onTagSelect:v,onTagRemove:S,onCreateTag:j,activeStoreId:s||void 0}),t&&n.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded text-sm",children:n.jsx("p",{className:"text-sm text-red-600",children:t})}),n.jsxs("div",{className:"flex items-center justify-end gap-2 mt-4 pt-4 border-t border-gray-200",children:[n.jsx("button",{type:"button",onClick:b,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:e,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 rounded hover:bg-gray-800 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:e?n.jsxs(n.Fragment,{children:[n.jsxs("svg",{className:"animate-spin h-4 w-4 text-white inline mr-1.5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Customer..."]}):"Save Customer"})]})]})})]})})},GJ=()=>{const a=mr(),{createGiftCard:r,loading:e}=QS(),{activeStoreId:t}=fn(),[s,o]=f.useState({giftCardCode:"",initialValue:"",noExpirationDate:!1,setExpirationDate:!1,expirationDate:"",notes:""}),i=f.useCallback((m,y)=>{o(x=>({...x,[m]:y}))},[]),l=f.useCallback((m,y)=>{o(x=>({...x,[m]:y,...m==="setExpirationDate"&&y?{noExpirationDate:!1}:{},...m==="noExpirationDate"&&y?{setExpirationDate:!1}:{}}))},[]),c=f.useCallback(()=>{const m="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let y="";for(let x=0;x<12;x++)y+=m.charAt(Math.floor(Math.random()*m.length));i("giftCardCode",y)},[i]),d=f.useCallback(()=>{a("/products/gift-cards")},[a]),h=f.useCallback(async()=>{try{if(!s.giftCardCode.trim()){alert("Please enter a gift card code");return}if(!s.initialValue||parseFloat(s.initialValue)<=0){alert("Please enter a valid initial value");return}if(!t){alert("No active store selected");return}const m={storeId:t,code:s.giftCardCode.trim(),initialValue:parseFloat(s.initialValue),expirationDate:s.setExpirationDate&&s.expirationDate?s.expirationDate:void 0,notes:s.notes.trim()||void 0,isActive:!0};await r(m),a("/products/gift-cards")}catch(m){console.error("Error creating gift card:",m),alert("Failed to create gift card. Please try again.")}},[s,t,r,a]);return n.jsx(pr,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-4",children:n.jsx("div",{className:"max-w-4xl mx-auto",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:d,className:"flex items-center gap-1.5 px-3 py-1.5 text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:n.jsx(Hn,{className:"w-4 h-4"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Create Gift Card"}),n.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:"Create a new gift card for your store"})]})]})})}),n.jsxs("div",{className:"max-w-4xl mx-auto py-6 px-4",children:[n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-4 mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Gift Card Details"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"sm:col-span-1",children:[n.jsx("label",{htmlFor:"giftCardCode",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Gift Card Code"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{id:"giftCardCode",type:"text",value:s.giftCardCode,onChange:m=>i("giftCardCode",m.target.value),placeholder:"Enter gift card code",className:"w-full px-3 py-1.5 pr-10 border border-gray-200 rounded focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors text-base"}),n.jsx("button",{onClick:c,className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors",title:"Generate random code",type:"button",children:n.jsx(Hu,{className:"w-4 h-4"})})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Unique code for the gift card"})]}),n.jsxs("div",{className:"sm:col-span-1",children:[n.jsx("label",{htmlFor:"initialValue",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Initial Value"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-600 text-base",children:""}),n.jsx("input",{id:"initialValue",type:"number",value:s.initialValue,onChange:m=>i("initialValue",m.target.value),placeholder:"Enter initial value",className:"w-full pl-8 pr-3 py-1.5 border border-gray-200 rounded focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors text-base"})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Initial value in INR"})]})]})]}),n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-4 mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-2",children:"Expiration Date"}),n.jsx("p",{className:"text-xs text-gray-600 mb-4 italic",children:"Countries have different laws for gift card expiry dates. Check the laws for your country before starting this tutorial."}),n.jsx("div",{className:"mb-3",children:n.jsxs("label",{className:"flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:s.noExpirationDate,onChange:m=>l("noExpirationDate",m.target.checked),className:"w-4 h-4 text-gray-900 border-gray-300 rounded focus:ring-gray-400 cursor-pointer"}),n.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"No expiration date"})]})}),n.jsx("div",{className:"mb-3",children:n.jsxs("label",{className:"flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:s.setExpirationDate,onChange:m=>l("setExpirationDate",m.target.checked),className:"w-4 h-4 text-gray-900 border-gray-300 rounded focus:ring-gray-400 cursor-pointer"}),n.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Set expiration date"})]})}),s.setExpirationDate&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{htmlFor:"expirationDate",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Expiration Date"}),n.jsx("input",{id:"expirationDate",type:"date",value:s.expirationDate,onChange:m=>i("expirationDate",m.target.value),className:"w-full px-3 py-1.5 border border-gray-200 rounded focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Select the date when this gift card expires"})]})]}),n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-4 mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Notes"}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Notes"}),n.jsx("textarea",{id:"notes",rows:4,value:s.notes,onChange:m=>i("notes",m.target.value),placeholder:"Enter any additional notes for this gift card...",className:"w-full px-3 py-2 border border-gray-200 rounded focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors resize-none text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Optional: Add any notes or comments about this gift card"})]})]}),n.jsx("div",{className:"flex justify-center mt-4",children:n.jsx("button",{onClick:h,disabled:e,className:"px-4 py-2 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:e?n.jsxs("span",{className:"flex items-center justify-center gap-2",children:[n.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):"Create Gift Card"})})]})]})})},KJ=({category:a,onSelect:r})=>{const e=f.useCallback(()=>{r(a)},[a,r]);return n.jsxs("button",{onClick:e,className:"cursor-pointer w-full px-4 py-3 flex items-center justify-between hover:bg-gray-50 transition-colors text-left",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:a.name}),n.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:a.hasChildren?"Has subcategories":"Select this category"})]}),a.hasChildren&&n.jsx(R1,{className:"w-4 h-4 text-gray-400 flex-shrink-0 ml-2"})]})},YJ=({categories:a,onCategorySelect:r})=>n.jsx("div",{className:"divide-y divide-gray-200",children:a.map(e=>n.jsx(KJ,{category:e,onSelect:r},e._id))}),ZJ=({selectedCategory:a,onCategorySelect:r,storeId:e})=>{const{categories:t,loading:s,fetchBaseCategories:o,fetchCategoriesByParentId:i}=rP(),[l,c]=f.useState([]),[d,h]=f.useState(null),[m,y]=f.useState("");f.useEffect(()=>{o()},[o]);const x=f.useCallback(S=>{S.hasChildren?(c(k=>[...k,{id:S._id,name:S.name}]),h(S._id),i(S._id)):(r(S._id,S.name),y(S.name))},[r,i]),b=f.useCallback(()=>{if(l.length>0){const S=[...l];if(S.pop(),c(S),S.length===0)h(null),o();else{const k=S[S.length-1];h(k.id),i(k.id)}}},[l,o,i]),v=f.useCallback(()=>{c([]),h(null),o()},[o]),j=f.useCallback(()=>l.length===0?"Base Categories":l.map(S=>S.name).join(" > "),[l]);return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 max-h-96 overflow-hidden",children:[n.jsxs("div",{className:"p-4 border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-gray-600",children:j()}),n.jsxs("div",{className:"flex items-center gap-1",children:[l.length>0&&n.jsx("button",{onClick:b,title:"Go Back",className:"p-1.5 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsx(Hn,{className:"w-4 h-4"})}),n.jsx("button",{onClick:v,title:"Home",className:"p-1.5 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsx(t4,{className:"w-4 h-4"})})]})]}),m&&n.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 mt-2 text-xs font-medium text-gray-900 bg-gray-100 border border-gray-300 rounded-lg",children:["Selected: ",m]})]}),n.jsx("div",{className:"max-h-72 overflow-y-auto",children:s?n.jsx("div",{className:"flex justify-center items-center p-6",children:n.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 border-t-gray-900 rounded-full animate-spin"})}):t.length>0?n.jsx(YJ,{categories:t,onCategorySelect:x}):n.jsx("div",{className:"p-6 text-center",children:n.jsx("p",{className:"text-sm text-gray-500",children:"No categories found"})})})]})},XJ=({value:a,onChange:r,placeholder:e="Describe your product...",rows:t=4})=>n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),n.jsx("textarea",{value:a,onChange:s=>r(s.target.value),placeholder:e,rows:t,className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors resize-none"})]}),QJ=({value:a,onChange:r,required:e=!0})=>n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Product Title ",e&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:a,onChange:t=>r(t.target.value),placeholder:"Enter product title",required:e,className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),JJ=({title:a,category:r,description:e,activeStoreId:t,onTitleChange:s,onCategoryChange:o,onDescriptionChange:i})=>n.jsxs("div",{className:"mb-6 border border-gray-200 p-3 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(QJ,{value:a,onChange:s,required:!0}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),n.jsx(ZJ,{selectedCategory:r,onCategorySelect:(l,c)=>{o(l)},storeId:t||""})]}),n.jsx(XJ,{value:e,onChange:i})]})]}),eee=({imageUrl:a,index:r,onUpdateImage:e,onRemoveImage:t})=>{const s=f.useCallback(l=>{e(r,l.target.value)},[r,e]),o=f.useCallback(()=>{t(r)},[r,t]),i=f.useCallback(l=>{l.currentTarget.style.display="none"},[]);return n.jsxs("div",{className:"border border-gray-200 rounded p-3",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsxs("span",{className:"text-xs text-gray-600",children:["Image ",r+1]}),n.jsx("button",{type:"button",onClick:o,className:"p-1 text-gray-600 hover:bg-gray-100 rounded transition-colors",children:n.jsx(Vs,{className:"w-3.5 h-3.5"})})]}),n.jsx("input",{type:"text",placeholder:"Enter image URL",value:a,onChange:s,className:"w-full px-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors mb-2"}),a.trim()?n.jsx("img",{src:a,alt:`Preview ${r+1}`,className:"w-full h-32 object-cover rounded border border-gray-200",onError:i}):n.jsx("div",{className:"w-full h-32 border border-dashed border-gray-200 rounded flex items-center justify-center text-gray-500 text-xs",children:"No image preview"})]})},tee=({images:a,onUpdateImage:r,onRemoveImage:e})=>n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:a.map((t,s)=>n.jsx(eee,{imageUrl:t,index:s,onUpdateImage:r,onRemoveImage:e},s))}),ree=({images:a,onAddImage:r,onUpdateImage:e,onRemoveImage:t})=>n.jsxs("div",{className:"mt-6 border border-gray-200 p-3 bg-white/95",children:[n.jsx("h3",{className:"text-base font-medium text-gray-900 mb-4",children:"Product Images"}),n.jsxs("button",{type:"button",onClick:r,className:"flex items-center gap-1.5 px-3 py-1.5 border border-gray-200 rounded text-sm text-gray-700 hover:bg-gray-50 transition-colors mb-4",children:[n.jsx(na,{className:"w-4 h-4"}),"Add Image"]}),a.length>0?n.jsx(tee,{images:a,onUpdateImage:e,onRemoveImage:t}):n.jsx("div",{className:"text-center py-8 text-gray-600",children:'No images added yet. Click "Add Image" to get started.'})]}),nee=({inventoryTrackingEnabled:a,sku:r,barcode:e,continueSellingWhenOutOfStock:t,onInventoryTrackingEnabledChange:s,onSkuChange:o,onBarcodeChange:i,onContinueSellingWhenOutOfStockChange:l})=>{const c=f.useCallback(y=>{s(y.target.checked)},[s]),d=f.useCallback(y=>{o(y.target.value)},[o]),h=f.useCallback(y=>{i(y.target.value)},[i]),m=f.useCallback(y=>{l(y.target.checked)},[l]);return n.jsxs("div",{className:"mb-6 border border-gray-200 p-3 bg-white/95",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Inventory"}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:a,onChange:c,className:"w-3.5 h-3.5 text-gray-900 focus:ring-gray-400 rounded border-gray-300"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Inventory tracking enabled"})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"More Details"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SKU (Stock Keeping Unit)"}),n.jsx("input",{type:"text",value:r,onChange:d,placeholder:"Enter SKU",className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Barcode (ISBN, UPC, GTIN, etc.)"}),n.jsx("input",{type:"text",value:e,onChange:h,placeholder:"Enter barcode",className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]}),a&&n.jsx("div",{className:"mt-3",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:t,onChange:m,className:"w-3.5 h-3.5 text-gray-900 focus:ring-gray-400 rounded border-gray-300"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Continue selling when out of stock"})]})})]})]})},aee=({tag:a,selected:r,onSelect:e})=>{const t=f.useCallback(()=>{e(a._id)},[a._id,e]);return n.jsxs("div",{className:"px-4 py-2 cursor-pointer hover:bg-gray-100 transition-colors flex items-center gap-2",onClick:t,children:[n.jsx("input",{type:"checkbox",checked:r,readOnly:!0,className:"w-4 h-4 text-gray-900 focus:ring-gray-900"}),a.name]})},see=({tags:a,selectedTags:r,onTagSelect:e})=>n.jsx(n.Fragment,{children:a.map(t=>{const s=r.includes(t._id);return n.jsx(aee,{tag:t,selected:s,onSelect:e},t._id)})}),oee=({tags:a,selectedTags:r,debouncedQuery:e,queryExists:t,onTagSelect:s,onCreateTag:o})=>{const i=f.useCallback(l=>{l.preventDefault()},[]);return n.jsxs("div",{className:"absolute z-10 top-full left-0 right-0 bg-white border border-gray-200 rounded-lg mt-1 max-h-72 overflow-y-auto shadow-lg",onMouseDown:i,children:[n.jsx(see,{tags:a,selectedTags:r,onTagSelect:s}),e&&!t&&n.jsx("div",{className:"px-4 py-2 cursor-pointer hover:bg-gray-100 transition-colors font-medium",onClick:o,children:`+ ${e}`})]})},iee=({selectedTags:a,activeStoreId:r,onTagsChange:e})=>{const{productTags:t,fetchProductTags:s,addProductTag:o}=PS(),[i,l]=f.useState(""),[c,d]=f.useState(!1),[h,m]=f.useState("");f.useEffect(()=>{r&&s(r)},[r,s]),f.useEffect(()=>{const N=setTimeout(()=>m(i.trim()),250);return()=>clearTimeout(N)},[i]);const y=f.useMemo(()=>{const N=h.toLowerCase();if(!N)return t.slice(0,10);const P=t.filter(F=>F.name.toLowerCase().startsWith(N)),R=t.filter(F=>!F.name.toLowerCase().startsWith(N)&&F.name.toLowerCase().includes(N)).sort((F,z)=>F.name.toLowerCase().indexOf(N)-z.name.toLowerCase().indexOf(N));return[...P,...R].slice(0,10)},[h,t]),x=f.useCallback(N=>{a.includes(N)?e(a.filter(P=>P!==N)):e([...a,N]),l(""),d(!0)},[a,e]),b=f.useCallback(N=>{l(N.target.value),c||d(!0)},[c]),v=f.useCallback(()=>{d(!0)},[]),j=f.useCallback(()=>{setTimeout(()=>d(!1),150)},[]),S=f.useCallback(async()=>{if(!r)return;const N=await o(r,h);x(N._id)},[r,h,o,x]),k=f.useMemo(()=>t.some(N=>N.name.toLowerCase()===h.toLowerCase()),[h,t]);return n.jsxs("div",{className:"mt-4 relative",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Tags"}),n.jsx("input",{type:"text",value:i,placeholder:"Search or create tags",onChange:b,onFocus:v,onBlur:j,className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"}),a.length>0&&n.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:[a.length," selected"]}),c&&n.jsx(oee,{tags:y,selectedTags:a,debouncedQuery:h,queryExists:k,onTagSelect:x,onCreateTag:S})]})},lee=({productType:a,onSelect:r})=>{const e=f.useCallback(()=>{r(a)},[a,r]);return n.jsx("div",{className:"px-4 py-2 cursor-pointer hover:bg-gray-100 transition-colors",onClick:e,children:a.name})},cee=({productTypes:a,onProductTypeSelect:r})=>n.jsx(n.Fragment,{children:a.map(e=>n.jsx(lee,{productType:e,onSelect:r},e._id))}),dee=({productTypes:a,debouncedQuery:r,queryExists:e,onProductTypeSelect:t,onCreateProductType:s})=>{const o=f.useCallback(i=>{i.preventDefault()},[]);return n.jsxs("div",{className:"absolute z-10 top-full left-0 right-0 bg-white border border-gray-200 rounded-lg mt-1 max-h-72 overflow-y-auto shadow-lg",onMouseDown:o,children:[n.jsx(cee,{productTypes:a,onProductTypeSelect:t}),r&&!e&&n.jsx("div",{className:"px-4 py-2 cursor-pointer hover:bg-gray-100 transition-colors font-medium",onClick:s,children:`+ ${r}`})]})},uee=({selectedProductTypeId:a,activeStoreId:r,onProductTypeChange:e})=>{const{productTypes:t,getProductTypesByStoreId:s,createProductType:o}=s3(),[i,l]=f.useState(""),[c,d]=f.useState(!1),[h,m]=f.useState("");f.useEffect(()=>{r&&s(r)},[r,s]),f.useEffect(()=>{const N=setTimeout(()=>m(i.trim()),250);return()=>clearTimeout(N)},[i]);const y=f.useMemo(()=>{const N=h.toLowerCase();if(!N)return t.slice(0,10);const P=t.filter(F=>F.name.toLowerCase().startsWith(N)),R=t.filter(F=>!F.name.toLowerCase().startsWith(N)&&F.name.toLowerCase().includes(N)).sort((F,z)=>F.name.toLowerCase().indexOf(N)-z.name.toLowerCase().indexOf(N));return[...P,...R].slice(0,10)},[h,t]);f.useEffect(()=>{if(a){const N=t.find(P=>P._id===a);N&&l(N.name)}else l("")},[a,t]);const x=f.useCallback(N=>{e(N._id),l(N.name),d(!1)},[e]),b=f.useCallback(N=>{l(N.target.value),c||d(!0)},[c]),v=f.useCallback(()=>{d(!0)},[]),j=f.useCallback(()=>{setTimeout(()=>d(!1),150)},[]),S=f.useCallback(async()=>{if(!r)return;const N=await o({storeId:r,name:h});x(N)},[r,h,o,x]),k=f.useMemo(()=>t.some(N=>N.name.toLowerCase()===h.toLowerCase()),[h,t]);return n.jsxs("div",{className:"relative",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Type"}),n.jsx("input",{type:"text",value:i,placeholder:"Search or create a product type",onChange:b,onFocus:v,onBlur:j,className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"}),c&&n.jsx(dee,{productTypes:y,debouncedQuery:h,queryExists:k,onProductTypeSelect:x,onCreateProductType:S})]})},fee=({tagName:a,onRemove:r})=>{const e=f.useCallback(()=>{r()},[r]);return n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 border border-gray-200 rounded text-sm text-gray-700 bg-gray-50",children:[a||"Unknown",n.jsx("button",{type:"button",onClick:e,className:"text-gray-500 hover:text-gray-700",children:n.jsx(xs,{className:"w-3.5 h-3.5"})})]})},pee=({tagIds:a,productTags:r,onTagRemove:e})=>a.length===0?null:n.jsx("div",{className:"mt-3 flex gap-2 flex-wrap",children:a.map(t=>{const s=r.find(o=>o._id===t);return n.jsx(fee,{tagName:s?.name||"Unknown",onRemove:()=>e(t)},t)})}),hee=({vendor:a,onSelect:r})=>{const e=f.useCallback(()=>{r(a._id,a.name)},[a,r]);return n.jsx("div",{className:"px-4 py-2 cursor-pointer hover:bg-gray-100 transition-colors",onClick:e,children:a.name})},mee=({vendors:a,onVendorSelect:r})=>n.jsx(n.Fragment,{children:a.map(e=>n.jsx(hee,{vendor:e,onSelect:r},e._id))}),gee=({vendors:a,debouncedQuery:r,queryExists:e,onVendorSelect:t,onCreateVendor:s})=>{const o=f.useCallback(i=>{i.preventDefault()},[]);return n.jsxs("div",{className:"absolute z-10 top-full left-0 right-0 bg-white border border-gray-200 rounded-lg mt-1 max-h-72 overflow-y-auto shadow-lg",onMouseDown:o,children:[n.jsx(mee,{vendors:a,onVendorSelect:t}),r&&!e&&n.jsx("div",{className:"px-4 py-2 cursor-pointer hover:bg-gray-100 transition-colors font-medium",onClick:s,children:`+ ${r}`})]})},yee=({selectedVendorId:a,activeStoreId:r,onVendorChange:e})=>{const{vendors:t,fetchVendorsByStoreId:s,createVendor:o}=Mb(),[i,l]=f.useState(""),[c,d]=f.useState(!1),[h,m]=f.useState("");f.useEffect(()=>{r&&s(r)},[r,s]),f.useEffect(()=>{const N=setTimeout(()=>m(i.trim()),250);return()=>clearTimeout(N)},[i]);const y=f.useMemo(()=>{const N=h.toLowerCase();if(!N)return t.slice(0,10);const P=t.filter(F=>F.name.toLowerCase().startsWith(N)),R=t.filter(F=>!F.name.toLowerCase().startsWith(N)&&F.name.toLowerCase().includes(N)).sort((F,z)=>F.name.toLowerCase().indexOf(N)-z.name.toLowerCase().indexOf(N));return[...P,...R].slice(0,10)},[h,t]);f.useEffect(()=>{if(a){const N=t.find(P=>P._id===a);N&&l(N.name)}else l("")},[a,t]);const x=f.useCallback((N,P)=>{e(N),l(P),d(!1)},[e]),b=f.useCallback(N=>{l(N.target.value),c||d(!0)},[c]),v=f.useCallback(()=>{d(!0)},[]),j=f.useCallback(()=>{setTimeout(()=>d(!1),150)},[]),S=f.useCallback(async()=>{if(!r)return;const N=await o({storeId:r,name:h});x(N._id,N.name)},[r,h,o,x]),k=f.useMemo(()=>t.some(N=>N.name.toLowerCase()===h.toLowerCase()),[h,t]);return n.jsxs("div",{className:"relative",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vendor"}),n.jsx("input",{type:"text",value:i,placeholder:"Search or create a vendor",onChange:b,onFocus:v,onBlur:j,className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"}),c&&n.jsx(gee,{vendors:y,debouncedQuery:h,queryExists:k,onVendorSelect:x,onCreateVendor:S})]})},xee=({productType:a,vendor:r,tags:e,onProductTypeChange:t,onVendorChange:s,onTagsChange:o,activeStoreId:i})=>{const{productTags:l}=PS(),c=f.useCallback(d=>{o(e.filter(h=>h!==d))},[e,o]);return n.jsxs("div",{className:"mb-6 border border-gray-200 p-3 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Product Organization"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsx(uee,{selectedProductTypeId:a,activeStoreId:i,onProductTypeChange:t}),n.jsx(yee,{selectedVendorId:r,activeStoreId:i,onVendorChange:s})]}),n.jsx(iee,{selectedTags:e,activeStoreId:i,onTagsChange:o}),n.jsx(pee,{tagIds:e,productTags:l,onTagRemove:c})]})},vee=({value:a,onChange:r})=>{const e=f.useCallback(t=>{r(t.target.value)},[r]);return n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Compare at price"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-base",children:""}),n.jsx("input",{type:"number",value:a,onChange:e,placeholder:"0.00",className:"w-full pl-8 pr-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]})},bee=({checked:a,onChange:r})=>{const e=f.useCallback(t=>{r(t.target.checked)},[r]);return n.jsx("div",{className:"mt-3",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:a,onChange:e,className:"w-3.5 h-3.5 text-gray-900 focus:ring-gray-400 rounded border-gray-300"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Charge tax on this product"})]})})},L_={weight:["milligram","gram","kilogram"],volume:["milliliter","centiliter","liter","cubic meter"],size:["millimeter","centimeter","meter"],area:["square meter"],"per item":["item"]},wee=({unitPriceTotalAmount:a,unitPriceBaseMeasure:r,selectedUnit:e,selectedBaseMeasureUnit:t,onUnitPriceTotalAmountChange:s,onUnitPriceBaseMeasureChange:o,onSelectedUnitChange:i,onSelectedBaseMeasureUnitChange:l})=>{const[c,d]=f.useState(!1),h=f.useCallback(()=>{if(!e)return[];for(const[S,k]of Object.entries(L_))if(k.includes(e))return k;return[]},[e]),m=f.useCallback(S=>{i(S),l("")},[i,l]),y=f.useCallback(()=>{d(S=>!S)},[]),x=f.useCallback(S=>{s(S.target.value)},[s]),b=f.useCallback(S=>{m(S.target.value)},[m]),v=f.useCallback(S=>{o(S.target.value)},[o]),j=f.useCallback(S=>{l(S.target.value)},[l]);return n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between border border-gray-200 rounded px-3 py-1.5 cursor-pointer hover:border-gray-400 transition-colors",onClick:y,children:[n.jsx("span",{className:"text-base text-gray-600",children:"Unit price"}),c?n.jsx(pp,{className:"w-4 h-4 text-gray-500"}):n.jsx(Is,{className:"w-4 h-4 text-gray-500"})]}),c&&n.jsx("div",{className:"mt-2 p-3 border border-gray-200 rounded bg-gray-50",children:n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx("span",{className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-500 text-xs",children:""}),n.jsx("input",{type:"number",placeholder:"0.00",value:a,onChange:x,className:"w-full pl-7 pr-2 py-2 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("select",{value:e,onChange:b,className:"px-2 py-2 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors min-w-[100px]",children:[n.jsx("option",{value:"",disabled:!0,children:"Select unit"}),Object.entries(L_).map(([S,k])=>[n.jsx("optgroup",{label:S.charAt(0).toUpperCase()+S.slice(1),children:k.map(N=>n.jsx("option",{value:N,children:N},N))},S)])]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx("span",{className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-500 text-xs",children:""}),n.jsx("input",{type:"number",placeholder:"0.00",value:r,onChange:v,className:"w-full pl-7 pr-2 py-2 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("select",{value:t,onChange:j,disabled:!e,className:"px-2 py-2 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors min-w-[100px] disabled:bg-gray-100 disabled:cursor-not-allowed",children:[n.jsx("option",{value:"",disabled:!0,children:e?"Select unit":"Select total unit first"}),h().map(S=>n.jsx("option",{value:S,children:S},S))]})]})]})})]})},jee=({compareAtPrice:a,unitPriceTotalAmount:r,unitPriceBaseMeasure:e,selectedUnit:t,selectedBaseMeasureUnit:s,chargeTaxOnProduct:o,cost:i,profit:l,margin:c,onCompareAtPriceChange:d,onUnitPriceTotalAmountChange:h,onUnitPriceBaseMeasureChange:m,onSelectedUnitChange:y,onSelectedBaseMeasureUnitChange:x,onChargeTaxOnProductChange:b,onCostChange:v})=>{const j=f.useCallback(S=>{v(S.target.value)},[v]);return n.jsxs("div",{className:"mt-4",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-3",children:"Additional Display Prices"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsx(vee,{value:a,onChange:d}),n.jsx(wee,{unitPriceTotalAmount:r,unitPriceBaseMeasure:e,selectedUnit:t,selectedBaseMeasureUnit:s,onUnitPriceTotalAmountChange:h,onUnitPriceBaseMeasureChange:m,onSelectedUnitChange:y,onSelectedBaseMeasureUnitChange:x})]}),n.jsx(bee,{checked:o,onChange:b}),n.jsx("div",{className:"mt-4",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Cost"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-base",children:""}),n.jsx("input",{type:"number",value:i,onChange:j,placeholder:"0.00",className:"w-full pl-8 pr-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Profit"}),n.jsx("input",{type:"text",value:`${l.toFixed(2)}`,readOnly:!0,className:`w-full px-3 py-2 border border-gray-200 rounded text-base bg-gray-50 font-medium ${l>=0?"text-green-500":"text-red-500"}`})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Margin"}),n.jsx("input",{type:"text",value:`${c.toFixed(2)}%`,readOnly:!0,className:`w-full px-3 py-2 border border-gray-200 rounded text-base bg-gray-50 font-medium ${c>=0?"text-green-500":"text-red-500"}`})]})]})})]})},Cee=({price:a,compareAtPrice:r,unitPriceTotalAmount:e,unitPriceBaseMeasure:t,selectedUnit:s,selectedBaseMeasureUnit:o,chargeTaxOnProduct:i,cost:l,onPriceChange:c,onCompareAtPriceChange:d,onUnitPriceTotalAmountChange:h,onUnitPriceBaseMeasureChange:m,onSelectedUnitChange:y,onSelectedBaseMeasureUnitChange:x,onChargeTaxOnProductChange:b,onCostChange:v})=>{const{profit:j,margin:S}=f.useMemo(()=>{const N=parseFloat(a)||0,P=parseFloat(l)||0;if(N===0||P===0)return{profit:0,margin:0};const R=N-P,F=R/N*100;return{profit:R,margin:F}},[a,l]),k=f.useCallback(N=>{c(N.target.value)},[c]);return n.jsxs("div",{className:"mb-6 border border-gray-200 p-3 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Price"}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-base",children:""}),n.jsx("input",{type:"number",value:a,onChange:k,placeholder:"0.00",className:"w-full pl-8 pr-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]})}),n.jsx(jee,{compareAtPrice:r,unitPriceTotalAmount:e,unitPriceBaseMeasure:t,selectedUnit:s,selectedBaseMeasureUnit:o,chargeTaxOnProduct:i,cost:l,profit:j,margin:S,onCompareAtPriceChange:d,onUnitPriceTotalAmountChange:h,onUnitPriceBaseMeasureChange:m,onSelectedUnitChange:y,onSelectedBaseMeasureUnitChange:x,onChargeTaxOnProductChange:b,onCostChange:v})]})},See=({pageTitle:a,metaDescription:r,urlHandle:e,onPageTitleChange:t,onMetaDescriptionChange:s,onUrlHandleChange:o})=>{const i=f.useCallback(d=>{t(d.target.value)},[t]),l=f.useCallback(d=>{s(d.target.value)},[s]),c=f.useCallback(d=>{o(d.target.value)},[o]);return n.jsxs("div",{className:"mb-6 border border-gray-200 p-3 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-2",children:"Search Engine Listing"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Add a title and description to see how this product might appear in a search engine listing."}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Page Title"}),n.jsx("input",{type:"text",value:a,onChange:i,placeholder:"Enter page title",maxLength:70,className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"}),n.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:[a.length,"/70 characters"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta Description"}),n.jsx("textarea",{value:r,onChange:l,placeholder:"Enter meta description",maxLength:160,rows:3,className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors resize-none"}),n.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:[r.length,"/160 characters"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL Handle"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-base",children:"products/"}),n.jsx("input",{type:"text",value:e,onChange:c,placeholder:"Enter URL handle",className:"w-full pl-20 pr-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"This will be the URL for your product page"})]})]})]})},Nee=["lb","oz","kg","grams"],kee=["United States","Canada","United Kingdom","Germany","France","Italy","Spain","Netherlands","Belgium","Switzerland","Austria","Sweden","Norway","Denmark","Finland","Poland","Czech Republic","Hungary","Portugal","Greece","Ireland","Luxembourg","Slovakia","Slovenia","Croatia","Romania","Bulgaria","Lithuania","Latvia","Estonia","Malta","Cyprus","Japan","South Korea","China","India","Australia","New Zealand","Brazil","Argentina","Chile","Mexico","South Africa","Israel","Turkey","Russia","Ukraine","Thailand","Singapore","Malaysia","Indonesia","Philippines","Vietnam","Taiwan","Hong Kong","Saudi Arabia","United Arab Emirates","Egypt","Morocco","Nigeria","Kenya","Ghana","Ethiopia","Tanzania","Uganda","Rwanda","Senegal","Ivory Coast","Cameroon","Algeria","Tunisia","Libya","Sudan","Angola","Mozambique","Zambia","Zimbabwe","Botswana","Namibia","Lesotho","Swaziland","Madagascar","Mauritius","Seychelles","Comoros","Djibouti","Somalia","Eritrea","South Sudan","Central African Republic","Chad","Niger","Mali","Burkina Faso","Guinea","Sierra Leone","Liberia","Gambia","Guinea-Bissau","Cape Verde","So Tom and Prncipe","Equatorial Guinea","Gabon","Republic of the Congo","Democratic Republic of the Congo","Burundi","Malawi"],_ee=({physicalProduct:a,selectedPackage:r,productWeight:e,weightUnit:t,countryOfOrigin:s,hsCode:o,onPhysicalProductChange:i,onSelectedPackageChange:l,onProductWeightChange:c,onWeightUnitChange:d,onCountryOfOriginChange:h,onHsCodeChange:m,activeStoreId:y})=>{const{packagings:x,fetchPackagingsByStoreId:b}=Ab();f.useEffect(()=>{y&&b(y)},[y,b]);const v=f.useCallback(R=>{i(R.target.checked)},[i]),j=f.useCallback(R=>{l(R.target.value)},[l]),S=f.useCallback(R=>{c(R.target.value)},[c]),k=f.useCallback(R=>{d(R.target.value)},[d]),N=f.useCallback(R=>{h(R.target.value)},[h]),P=f.useCallback(R=>{m(R.target.value)},[m]);return n.jsxs("div",{className:"mb-6 border border-gray-200 p-3 bg-white/95",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Shipping"}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:a,onChange:v,className:"w-3.5 h-3.5 text-gray-900 focus:ring-gray-400 rounded border-gray-300"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Physical product"})]})]}),a&&n.jsxs("div",{children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Package"}),n.jsxs("select",{value:r,onChange:j,className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors",children:[n.jsx("option",{value:"",children:"Select a package"}),x.map(R=>n.jsxs("option",{value:R._id,children:[R.packageName," - ",R.length," x ",R.width," x ",R.height," ",R.dimensionsUnit,", ",R.weight," ",R.weightUnit]},R._id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product weight"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"number",value:e,onChange:S,placeholder:"0.00",className:"flex-1 px-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"}),n.jsxs("select",{value:t,onChange:k,className:"px-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors min-w-[100px]",children:[n.jsx("option",{value:"",disabled:!0,children:"Unit"}),Nee.map(R=>n.jsx("option",{value:R,children:R},R))]})]})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Customs Information"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country/Region of Origin"}),n.jsxs("select",{value:s,onChange:N,className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors",children:[n.jsx("option",{value:"",children:"Select a country"}),kee.map(R=>n.jsx("option",{value:R,children:R},R))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Harmonized System (HS) Code"}),n.jsx("input",{type:"text",value:o,onChange:P,placeholder:"Enter a six-digit code or search by keyword",className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Enter a six-digit code or search by keyword"})]})]})]})]})]})},Eee=({status:a,onChange:r})=>{const e=f.useCallback(t=>{r(t.target.value)},[r]);return n.jsxs("div",{className:"mb-6 border border-gray-200 p-3 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Status"}),n.jsxs("fieldset",{children:[n.jsx("legend",{className:"text-xs font-medium text-gray-600 mb-2",children:"Product Status"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",value:"active",checked:a==="active",onChange:e,className:"w-3.5 h-3.5 text-gray-900 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Active (visible to customers)"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",value:"draft",checked:a==="draft",onChange:e,className:"w-3.5 h-3.5 text-gray-900 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Draft (not visible to customers)"})]})]})]})]})},xP=f.createContext(void 0),Tee=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),[l,c]=f.useState([]),[d,h]=f.useState(null),m=f.useCallback(async F=>{try{s(!0),i(null);const z=await Ke.post("/products",F),{success:H,data:V}=z.data;if(!H)throw new Error("Failed to create product");return e(W=>[V,...W]),V}catch(z){const H=z?.response?.data?.message||z?.message||"Failed to create product";throw i(H),z}finally{s(!1)}},[]),y=f.useCallback(async F=>{try{s(!0),i(null);const z=await Ke.get(`/products/store/${F}`),{success:H,data:V}=z.data;if(!H)throw new Error("Failed to fetch products");e(V)}catch(z){const H=z?.response?.data?.message||z?.message||"Failed to fetch products";i(H)}finally{s(!1)}},[]),x=f.useCallback(()=>{e([]),i(null),s(!1)},[]),b=f.useCallback(async(F,z)=>{try{s(!0),i(null);const H=await Ke.post(`/products/${F}/variants`,{variants:z}),{success:V,data:W}=H.data;if(!V)throw new Error("Failed to add variants");return W}catch(H){const V=H?.response?.data?.message||H?.message||"Failed to add variants";throw i(V),H}finally{s(!1)}},[]),v=f.useCallback(async(F,z)=>{try{s(!0),i(null);const H=await Ke.delete(`/products/${F}/variants`,{data:{dimensionName:z}}),{success:V}=H.data;if(!V)throw new Error("Failed to delete variant dimension")}catch(H){const V=H?.response?.data?.message||H?.message||"Failed to delete variant dimension";throw i(V),H}finally{s(!1)}},[]),j=f.useCallback(async(F,z,H)=>{try{s(!0),i(null);const V=await Ke.post(`/products/${F}/variants/${z}/options`,{optionName:z,values:H}),{success:W,data:Z}=V.data;if(!W)throw new Error("Failed to add option values");return Z}catch(V){const W=V?.response?.data?.message||V?.message||"Failed to add option values";throw i(W),V}finally{s(!1)}},[]),S=f.useCallback(async F=>{const{storeId:z,q:H="",originLocationId:V,destinationLocationId:W,page:Z=1,limit:A=20}=F;try{s(!0),i(null);const q=await Ke.get("/products/search",{params:{storeId:z,q:H,originLocationId:V,destinationLocationId:W,page:Z,limit:A}});return c(q.data.data||[]),h(q.data.pagination||null),q.data}catch(q){const I=q?.response?.data?.message||q?.message||"Failed to search products";throw i(I),q}finally{s(!1)}},[]),k=f.useCallback(async F=>{const{q:z,storeId:H}=F;try{return s(!0),i(null),(await Ke.get("/products/search-basic",{params:{q:z,storeId:H}})).data.data||[]}catch(V){const W=V?.response?.data?.message||V?.message||"Failed to search products";throw i(W),V}finally{s(!1)}},[]),N=f.useCallback(async F=>{const{storeId:z,q:H="",page:V=1,limit:W=20}=F;try{return s(!0),i(null),(await Ke.get("/products/search-with-variants",{params:{storeId:z,q:H,page:V,limit:W}})).data}catch(Z){const A=Z?.response?.data?.message||Z?.message||"Failed to search products with variants";throw i(A),Z}finally{s(!1)}},[]),P=f.useCallback(async F=>{const{storeId:z,q:H="",destinationLocationId:V,page:W=1,limit:Z=20}=F;try{return s(!0),i(null),(await Ke.get("/products/search-product-with-variant-and-destination",{params:{storeId:z,q:H,destinationLocationId:V,page:W,limit:Z}})).data}catch(A){const q=A?.response?.data?.message||A?.message||"Failed to search products with destination availability";throw i(q),A}finally{s(!1)}},[]),R=f.useMemo(()=>({products:r,loading:t,error:o,transferProductSearchResult:l,transferProductSearchPagination:d,createProduct:m,fetchProductsByStoreId:y,clearProducts:x,addVariantsToProduct:b,deleteVariantFromProduct:v,addOptionToProduct:j,searchProductForTransfer:S,searchProductsWithVariants:N,searchBasic:k,searchProductWithVariantAndDestination:P}),[r,t,o,l,d,m,y,x,b,v,j,S,N,k,P]);return n.jsx(xP.Provider,{value:R,children:a})},dc=()=>{const a=f.useContext(xP);if(!a)throw new Error("useProducts must be used within a ProductProvider");return a},Oee=()=>{const{categories:a,fetchBaseCategories:r}=rP(),{createProduct:e,loading:t}=dc(),{activeStoreId:s}=fn(),o=mr(),[i,l]=f.useState({title:"",category:"",description:"",status:"draft",productType:"",vendor:"",tags:[],price:"",compareAtPrice:"",unitPriceTotalAmount:"",unitPriceBaseMeasure:"",selectedUnit:"",selectedBaseMeasureUnit:"",chargeTaxOnProduct:!1,cost:"",inventoryTrackingEnabled:!1,quantity:"",sku:"",barcode:"",continueSellingWhenOutOfStock:!1,physicalProduct:!1,selectedPackage:"",productWeight:"",weightUnit:"",countryOfOrigin:"",hsCode:"",variants:[],pageTitle:"",metaDescription:"",urlHandle:"",images:[]});f.useEffect(()=>{r()},[r]);const c=f.useCallback((N,P)=>{l(R=>({...R,[N]:P}))},[]),d=f.useCallback(async()=>{if(!s){alert("Please select a store first");return}try{const N=parseFloat(i.price)||0,P=parseFloat(i.cost)||0,R=N-P,F=N>0?R/N*100:0,z={title:i.title,description:i.description,category:i.category,price:N,compareAtPrice:i.compareAtPrice?parseFloat(i.compareAtPrice):void 0,chargeTax:i.chargeTaxOnProduct,cost:P,profit:R,marginPercent:F,storeId:s,unitPriceTotalAmount:i.unitPriceTotalAmount?parseFloat(i.unitPriceTotalAmount):void 0,unitPriceTotalAmountMetric:i.selectedUnit||void 0,unitPriceBaseMeasure:i.unitPriceBaseMeasure?parseFloat(i.unitPriceBaseMeasure):void 0,unitPriceBaseMeasureMetric:i.selectedBaseMeasureUnit||void 0,inventoryTrackingEnabled:i.inventoryTrackingEnabled,continueSellingWhenOutOfStock:i.continueSellingWhenOutOfStock,sku:i.sku,barcode:i.barcode,isPhysicalProduct:i.physicalProduct,package:i.physicalProduct?i.selectedPackage:void 0,productWeight:i.physicalProduct?parseFloat(i.productWeight):void 0,productWeightUnit:i.physicalProduct?i.weightUnit:void 0,countryOfOrigin:i.physicalProduct?i.countryOfOrigin:void 0,harmonizedSystemCode:i.physicalProduct?i.hsCode:void 0,variants:i.variants,pageTitle:i.pageTitle,metaDescription:i.metaDescription,urlHandle:i.urlHandle,status:i.status,onlineStorePublishing:!0,pointOfSalePublishing:!1,images:i.images.filter(H=>H.trim()!==""),productType:i.productType,vendor:i.vendor,tagIds:i.tags||[]};await e(z),setTimeout(()=>o("/products"),800),l({title:"",category:"",description:"",status:"draft",productType:"",vendor:"",tags:[],price:"",compareAtPrice:"",unitPriceTotalAmount:"",unitPriceBaseMeasure:"",selectedUnit:"",selectedBaseMeasureUnit:"",chargeTaxOnProduct:!1,cost:"",inventoryTrackingEnabled:!1,quantity:"",sku:"",barcode:"",continueSellingWhenOutOfStock:!1,physicalProduct:!1,selectedPackage:"",productWeight:"",weightUnit:"kg",countryOfOrigin:"",hsCode:"",variants:[],pageTitle:"",metaDescription:"",urlHandle:"",images:[]})}catch(N){console.error("Error creating product:",N),alert(`Error creating product: ${N.message||"Unknown error"}`),ra.error("Error creating product")}},[s,i,e,o]),h=f.useCallback(()=>{l(N=>({...N,images:[...N.images,""]}))},[]),m=f.useCallback((N,P)=>{l(R=>({...R,images:R.images.map((F,z)=>z===N?P:F)}))},[]),y=f.useCallback(N=>{l(P=>({...P,images:P.images.filter((R,F)=>F!==N)}))},[]),x=f.useCallback(()=>{l(N=>({...N,variants:[...N.variants,{optionName:"",values:[""]}]}))},[]),b=f.useCallback(N=>{l(P=>({...P,variants:P.variants.filter((R,F)=>F!==N)}))},[]),v=f.useCallback((N,P)=>{l(R=>({...R,variants:R.variants.map((F,z)=>z===N?{...F,optionName:P}:F)}))},[]),j=f.useCallback(N=>{l(P=>({...P,variants:P.variants.map((R,F)=>F===N?{...R,values:[...R.values,""]}:R)}))},[]),S=f.useCallback((N,P)=>{l(R=>({...R,variants:R.variants.map((F,z)=>z===N?{...F,values:F.values.filter((H,V)=>V!==P)}:F)}))},[]),k=f.useCallback((N,P,R)=>{l(F=>({...F,variants:F.variants.map((z,H)=>H===N?{...z,values:z.values.map((V,W)=>W===P?R:V)}:z)}))},[]);return n.jsx(pr,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsxs("div",{className:"max-w-7xl mx-auto pt-6 px-4 pb-6",children:[n.jsx(JJ,{title:i.title,category:i.category,description:i.description,activeStoreId:s,onTitleChange:N=>c("title",N),onCategoryChange:N=>c("category",N),onDescriptionChange:N=>c("description",N)}),n.jsx(ree,{images:i.images,onAddImage:h,onUpdateImage:m,onRemoveImage:y}),n.jsx("div",{className:"border-t border-gray-200 my-6"}),n.jsx(Eee,{status:i.status,onChange:N=>c("status",N)}),n.jsx("div",{className:"border-t border-gray-200 my-6"}),n.jsx(xee,{productType:i.productType,vendor:i.vendor,tags:i.tags,onProductTypeChange:N=>c("productType",N),onVendorChange:N=>c("vendor",N),onTagsChange:N=>c("tags",N),activeStoreId:s}),n.jsx("div",{className:"border-t border-gray-200 my-6"}),n.jsx(Cee,{price:i.price,compareAtPrice:i.compareAtPrice,unitPriceTotalAmount:i.unitPriceTotalAmount,unitPriceBaseMeasure:i.unitPriceBaseMeasure,selectedUnit:i.selectedUnit,selectedBaseMeasureUnit:i.selectedBaseMeasureUnit,chargeTaxOnProduct:i.chargeTaxOnProduct,cost:i.cost,onPriceChange:N=>c("price",N),onCompareAtPriceChange:N=>c("compareAtPrice",N),onUnitPriceTotalAmountChange:N=>c("unitPriceTotalAmount",N),onUnitPriceBaseMeasureChange:N=>c("unitPriceBaseMeasure",N),onSelectedUnitChange:N=>c("selectedUnit",N),onSelectedBaseMeasureUnitChange:N=>c("selectedBaseMeasureUnit",N),onChargeTaxOnProductChange:N=>c("chargeTaxOnProduct",N),onCostChange:N=>c("cost",N)}),n.jsx("div",{className:"border-t border-gray-200 my-6"}),n.jsx(nee,{inventoryTrackingEnabled:i.inventoryTrackingEnabled,sku:i.sku,barcode:i.barcode,continueSellingWhenOutOfStock:i.continueSellingWhenOutOfStock,onInventoryTrackingEnabledChange:N=>c("inventoryTrackingEnabled",N),onSkuChange:N=>c("sku",N),onBarcodeChange:N=>c("barcode",N),onContinueSellingWhenOutOfStockChange:N=>c("continueSellingWhenOutOfStock",N)}),n.jsx("div",{className:"border-t border-gray-200 my-6"}),n.jsx(_ee,{physicalProduct:i.physicalProduct,selectedPackage:i.selectedPackage,productWeight:i.productWeight,weightUnit:i.weightUnit,countryOfOrigin:i.countryOfOrigin,hsCode:i.hsCode,onPhysicalProductChange:N=>c("physicalProduct",N),onSelectedPackageChange:N=>c("selectedPackage",N),onProductWeightChange:N=>c("productWeight",N),onWeightUnitChange:N=>c("weightUnit",N),onCountryOfOriginChange:N=>c("countryOfOrigin",N),onHsCodeChange:N=>c("hsCode",N),activeStoreId:s}),n.jsx("div",{className:"border-t border-gray-200 my-6"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-3 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Variants"}),n.jsxs("button",{type:"button",onClick:x,className:"flex items-center gap-1.5 px-3 py-1.5 border border-gray-200 rounded text-sm text-gray-700 hover:bg-gray-50 transition-colors mb-4",children:[n.jsx(na,{className:"w-4 h-4"}),"Add options like size or color"]}),i.variants.map((N,P)=>n.jsxs("div",{className:"mb-3 p-4 border border-gray-200 rounded bg-gray-50",children:[n.jsxs("div",{className:"flex justify-between items-center mb-3",children:[n.jsxs("h4",{className:"text-sm font-medium text-gray-900",children:["Option ",P+1]}),n.jsx("button",{type:"button",onClick:()=>b(P),className:"p-1 text-gray-600 hover:bg-gray-100 rounded transition-colors",children:n.jsx(Vs,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1.5",children:"Option Name"}),n.jsx("input",{type:"text",value:N.optionName,onChange:R=>v(P,R.target.value),placeholder:"e.g., Size, Color, Material",className:"w-full px-3 py-1.5 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1.5",children:"Option Values"}),N.values.map((R,F)=>n.jsxs("div",{className:"flex gap-2 mb-2",children:[n.jsx("input",{type:"text",value:R,onChange:z=>k(P,F,z.target.value),placeholder:"Enter value",className:"flex-1 px-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"}),n.jsx("button",{type:"button",onClick:()=>S(P,F),disabled:N.values.length===1,className:"p-1.5 text-gray-600 hover:bg-gray-100 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n.jsx(Vs,{className:"w-3.5 h-3.5"})})]},F)),n.jsxs("button",{type:"button",onClick:()=>j(P),className:"flex items-center gap-1.5 text-xs text-gray-600 hover:text-gray-900 mt-2",children:[n.jsx(na,{className:"w-3.5 h-3.5"}),"Add another value"]})]})]})]},P))]}),n.jsx("div",{className:"border-t border-gray-200 my-6"}),n.jsx(See,{pageTitle:i.pageTitle,metaDescription:i.metaDescription,urlHandle:i.urlHandle,onPageTitleChange:N=>c("pageTitle",N),onMetaDescriptionChange:N=>c("metaDescription",N),onUrlHandleChange:N=>c("urlHandle",N)})]}),n.jsx("div",{className:"mt-6 flex justify-center",children:n.jsx("button",{type:"button",onClick:d,disabled:t||!s,className:"px-6 py-2.5 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Creating Product...":"Add Product"})})]})})},vP=f.createContext(void 0),Pee=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async b=>{s(!0),i(null);try{const{data:v}=await Ke.get(`/locations/store/${b}`);e(v.data)}catch(v){i(v?.response?.data?.message||"Failed to fetch locations")}finally{s(!1)}},[]),c=f.useCallback(async b=>{s(!0),i(null);try{const{data:v}=await Ke.post("/locations",b);return e(j=>[v.data,...j]),v.data}catch(v){throw i(v?.response?.data?.message||"Failed to create location"),v}finally{s(!1)}},[]),d=f.useCallback(async(b,v)=>{s(!0),i(null);try{const{data:j}=await Ke.put(`/locations/${b}`,v);return e(S=>S.map(k=>k._id===b?j.data:k)),j.data}catch(j){throw i(j?.response?.data?.message||"Failed to update location"),j}finally{s(!1)}},[]),h=f.useCallback(async b=>{s(!0),i(null);try{await Ke.delete(`/locations/${b}`),e(v=>v.filter(j=>j._id!==b))}catch(v){throw i(v?.response?.data?.message||"Failed to delete location"),v}finally{s(!1)}},[]),m=f.useCallback(()=>i(null),[]),y=f.useCallback(()=>{e([]),i(null),s(!1)},[]),x={locations:r,loading:t,error:o,fetchLocationsByStoreId:l,createLocation:c,updateLocation:d,deleteLocation:h,clearError:m,clearLocations:y};return n.jsx(vP.Provider,{value:x,children:a})},mp=()=>{const a=f.useContext(vP);if(!a)throw new Error("useLocations must be used within a LocationsProvider");return a},bP=f.createContext(void 0),Aee=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(()=>i(null),[]),c=f.useCallback(async b=>{try{s(!0),i(null);const v=await Ke.post("/transfers",b);if(!v.data.success)throw new Error("Failed to create transfer");const j=v.data.data;return e(S=>[j,...S]),j}catch(v){const j=v?.response?.data?.message||v?.message||"Failed to create transfer";throw i(j),v}finally{s(!1)}},[]),d=f.useCallback(async b=>{try{s(!0),i(null);const v=await Ke.get(`/transfers/store/${b}`);if(!v.data.success)throw new Error("Failed to fetch transfers");const j=v.data.data||[];return e(j),j}catch(v){const j=v?.response?.data?.message||v?.message||"Failed to fetch transfers";throw i(j),v}finally{s(!1)}},[]),h=f.useCallback(async(b,v)=>{try{s(!0),i(null);const j=await Ke.put(`/transfers/${b}`,v);if(!j.data.success)throw new Error("Failed to update transfer");return e(S=>S.map(k=>k._id===b?j.data.data:k)),j.data.data}catch(j){const S=j?.response?.data?.message||j?.message||"Failed to update transfer";throw i(S),j}finally{s(!1)}},[]),m=f.useCallback(async b=>{try{if(s(!0),i(null),!(await Ke.delete(`/transfers/${b}`)).data.success)throw new Error("Failed to delete transfer");e(j=>j.filter(S=>S._id!==b))}catch(v){const j=v?.response?.data?.message||v?.message||"Failed to delete transfer";throw i(j),v}finally{s(!1)}},[]),y=f.useCallback(async b=>{try{s(!0),i(null),await Ke.post(`/transfers/${b}/ready-to-ship`);let v=null;if(e(j=>j.map(S=>S._id===b?(v={...S,status:"ready_to_ship"},v):S)),!v)throw new Error("Transfer not found in local state");return v}catch(v){const j=v?.response?.data?.message||v?.message||"Failed to mark as ready to ship";throw i(j),v}finally{s(!1)}},[]),x={transfers:r,loading:t,error:o,createTransfer:c,fetchTransfersByStoreId:d,updateTransfer:h,deleteTransfer:m,markReadyToShip:y,setTransfers:e,clearError:l};return n.jsx(bP.Provider,{value:x,children:a})},JS=()=>{const a=f.useContext(bP);if(!a)throw new Error("useTransfers must be used within a TransferProvider");return a},Us=({label:a,value:r,options:e,onChange:t,placeholder:s="Select...",disabled:o=!1})=>{const[i,l]=f.useState(!1),c=f.useRef(null);f.useEffect(()=>{const y=x=>{c.current&&!c.current.contains(x.target)&&l(!1)};return document.addEventListener("mousedown",y),()=>{document.removeEventListener("mousedown",y)}},[]);const d=f.useCallback(()=>{o||l(!i)},[o,i]),h=f.useCallback(y=>{t(y),l(!1)},[t]),m=e.find(y=>y.value===r);return n.jsxs("div",{className:"relative",ref:c,children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:a}),n.jsxs("div",{onClick:d,className:`
          w-full min-h-[36px] px-3 py-1.5 text-sm border border-gray-200
          bg-white cursor-pointer flex items-center justify-between
          ${o?"bg-gray-50 cursor-not-allowed":"hover:border-gray-300"}
          ${i?"border-gray-400 ring-1 ring-gray-400":""}
        `,children:[n.jsx("span",{className:m?"text-gray-900":"text-gray-500",children:m?m.label:s}),n.jsx(Is,{className:`w-4 h-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]}),i&&!o&&n.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 shadow-lg max-h-60 overflow-auto",children:e.length===0?n.jsx("div",{className:"px-3 py-2 text-sm text-gray-600",children:"No options available"}):e.map(y=>{const x=r===y.value;return n.jsx("div",{onClick:()=>h(y.value),className:`
                    px-3 py-2 text-sm cursor-pointer hover:bg-gray-50
                    ${x?"bg-gray-100 text-gray-900":"text-gray-900"}
                  `,children:y.label},y.value)})})]})},Ao=({label:a,value:r,options:e,onChange:t,placeholder:s="Select...",disabled:o=!1,renderValue:i})=>{const[l,c]=f.useState(!1),d=f.useRef(null);f.useEffect(()=>{const b=v=>{d.current&&!d.current.contains(v.target)&&c(!1)};return document.addEventListener("mousedown",b),()=>{document.removeEventListener("mousedown",b)}},[]);const h=f.useCallback(()=>{o||c(!l)},[o,l]),m=f.useCallback(b=>{r.includes(b)?t(r.filter(v=>v!==b)):t([...r,b])},[r,t]),y=f.useCallback((b,v)=>{v.stopPropagation(),t(r.filter(j=>j!==b))},[r,t]),x=f.useCallback(()=>i?i(r):r.length===0?s:e.filter(v=>r.includes(v.value)).map(v=>v.label).join(", "),[r,e,s,i]);return n.jsxs("div",{className:"relative",ref:d,children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:a}),n.jsxs("div",{onClick:h,className:`
          w-full min-h-[36px] px-3 py-1.5 text-sm border border-gray-200
          bg-white cursor-pointer flex items-center justify-between
          ${o?"bg-gray-50 cursor-not-allowed":"hover:border-gray-300"}
          ${l?"border-gray-400 ring-1 ring-gray-400":""}
        `,children:[n.jsx("div",{className:"flex-1 flex flex-wrap gap-1",children:r.length===0?n.jsx("span",{className:"text-gray-500",children:s}):n.jsxs(n.Fragment,{children:[i?n.jsx("span",{className:"text-gray-900",children:x()}):r.slice(0,3).map(b=>{const v=e.find(j=>j.value===b);return v?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-gray-100 text-gray-700 text-xs",children:[v.label,n.jsx("button",{type:"button",onClick:j=>y(b,j),className:"hover:text-gray-900",children:n.jsx(xs,{className:"w-3 h-3"})})]},b):null}),r.length>3&&n.jsxs("span",{className:"text-gray-600 text-xs",children:["+",r.length-3," more"]})]})}),n.jsx(Is,{className:`w-4 h-4 text-gray-400 transition-transform ${l?"rotate-180":""}`})]}),l&&!o&&n.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 shadow-lg max-h-60 overflow-auto",children:e.length===0?n.jsx("div",{className:"px-3 py-2 text-sm text-gray-600",children:"No options available"}):e.map(b=>{const v=r.includes(b.value);return n.jsxs("div",{onClick:()=>m(b.value),className:`
                    px-3 py-2 text-sm cursor-pointer hover:bg-gray-50 flex items-center justify-between
                    ${v?"bg-gray-100":""}
                  `,children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-sm text-gray-900",children:b.label}),b.secondaryText&&n.jsx("div",{className:"text-xs text-gray-600",children:b.secondaryText})]}),v&&n.jsx("div",{className:"w-4 h-4 bg-gray-900 flex items-center justify-center",children:n.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},b.value)})})]})},Mee=()=>{const{activeStoreId:a}=fn(),{locations:r,fetchLocationsByStoreId:e}=mp(),{searchProductForTransfer:t,transferProductSearchResult:s,loading:o}=dc(),{tags:i,fetchByStore:l}=i3(),{createTransfer:c,loading:d}=JS(),h=mr(),[m,y]=f.useState(""),[x,b]=f.useState(""),[v,j]=f.useState(""),[S,k]=f.useState(""),[N,P]=f.useState(new Set),[R,F]=f.useState(""),[z,H]=f.useState(""),[V,W]=f.useState(""),[Z,A]=f.useState([]),q=f.useMemo(()=>i.map(Ae=>({value:Ae.name,label:Ae.name})),[i]),[I,K]=f.useState(!1),[D,Q]=f.useState([]),[oe,re]=f.useState({}),Te=Ae=>{P(qe=>{const we=new Set(qe);return we.delete(Ae),we}),Q(qe=>qe.filter(we=>we.variantId!==Ae)),re(qe=>{const{[Ae]:we,...Oe}=qe;return Oe})};f.useEffect(()=>{a&&e(a)},[a,e]),f.useEffect(()=>{a&&l(a)},[a,l]),f.useEffect(()=>{const Ae=setTimeout(()=>k(v.trim()),450);return()=>clearTimeout(Ae)},[v]),f.useEffect(()=>{a&&m&&x&&S.length>0&&(async()=>{try{await t({storeId:String(a),q:S,originLocationId:m,destinationLocationId:x,page:1,limit:20})}catch{}})()},[S,m,x,a,t]);const G=f.useMemo(()=>!!(m&&x),[m,x]),Y=N.size,Se=Ae=>{P(qe=>{const we=new Set(qe);return we.has(Ae)?we.delete(Ae):we.add(Ae),we})},fe=f.useMemo(()=>r.map(Ae=>({value:Ae._id,label:Ae.name})),[r]),Ee=f.useMemo(()=>r.map(Ae=>({value:Ae._id,label:Ae.name})),[r]);return n.jsx(pr,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-2",children:[n.jsx("button",{onClick:()=>h("/products/transfers"),className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(Hn,{className:"w-4 h-4"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Create Transfer"})]})}),n.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 space-y-4",children:[n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Origin and Destination"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[n.jsx(Us,{label:"Origin Location",value:m,options:fe,onChange:Ae=>{Ae!==x&&y(Ae)},placeholder:"Select origin location"}),n.jsx(Us,{label:"Destination Location",value:x,options:Ee,onChange:Ae=>{Ae!==m&&b(Ae)},placeholder:"Select destination location"})]})]}),n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Add Products"}),n.jsxs("div",{className:"relative mb-3",children:[n.jsx("input",{type:"text",placeholder:G?"Search products by title or SKU":"Select origin and destination to start searching",value:v,onChange:Ae=>j(Ae.target.value),disabled:!G,className:"w-full px-3 py-1.5 pl-10 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 disabled:bg-gray-50 disabled:text-gray-500"}),n.jsx(Ro,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"})]}),G&&n.jsxs("div",{className:"space-y-3 mt-3",children:[s.map(Ae=>{const qe=Ae.product.imageUrls?.[0];return n.jsxs("div",{className:"border border-gray-200 p-3",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[qe?n.jsx("img",{src:qe,alt:Ae.product.title,className:"w-12 h-12 object-cover"}):n.jsx("div",{className:"w-12 h-12 bg-gray-200"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:Ae.product.title}),n.jsxs("p",{className:"text-xs text-gray-600 font-mono",children:["SKU: ",Ae.product.sku]})]})]}),n.jsx("div",{className:"border border-gray-200 overflow-hidden",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-white",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 w-12"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-900",children:"Variant"}),n.jsx("th",{className:"px-3 py-2 text-right text-sm font-medium text-gray-900",children:"Available at Origin"}),n.jsx("th",{className:"px-3 py-2 text-right text-sm font-medium text-gray-900",children:"Available at Destination"})]})}),n.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[Ae.variants.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:4,className:"px-3 py-4 text-center text-sm text-gray-600",children:"No variants available"})}),Ae.variants.map(we=>{const Oe=Object.entries(we.optionValues||{}).map(([ze,We])=>String(We)).join(" / ");return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"checkbox",checked:N.has(we._id),onChange:()=>Se(we._id),className:"w-4 h-4 text-gray-900 border-gray-200 focus:ring-gray-400"})}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("p",{className:"text-sm text-gray-900",children:Oe||"Default"})}),n.jsx("td",{className:"px-3 py-2 text-right",children:n.jsx("p",{className:`text-sm font-medium ${(we.availability?.origin??0)>0?"text-gray-900":"text-gray-600"}`,children:we.availability?.origin??0})}),n.jsx("td",{className:"px-3 py-2 text-right",children:n.jsx("p",{className:`text-sm font-medium ${(we.availability?.destination??0)>0?"text-gray-900":"text-gray-600"}`,children:we.availability?.destination??0})})]},we._id)})]})]})})]},Ae.product._id)}),o&&n.jsx("div",{className:"text-center py-4",children:n.jsx("div",{className:"animate-spin rounded-full w-4 h-4 border-2 border-gray-300 border-t-gray-900 mx-auto"})}),!o&&G&&S&&s.length===0&&n.jsx("div",{className:"text-center py-4",children:n.jsx("p",{className:"text-sm text-gray-600",children:"No products found matching your search."})}),s.length>0&&n.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 border border-gray-200",children:[n.jsxs("p",{className:"text-sm text-gray-600",children:[Y," variant",Y===1?"":"s"," selected"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>P(new Set),className:"px-3 py-1.5 text-sm font-medium border border-gray-200 hover:bg-gray-50 transition-colors",children:"Clear Selection"}),n.jsxs("button",{disabled:Y===0,onClick:()=>{const Ae=[];s.forEach(we=>{const Oe=we.product.imageUrls?.[0];we.variants.forEach(ze=>{if(!N.has(ze._id))return;const We=Object.entries(ze.optionValues||{}).map(([pt,Pt])=>String(Pt)).join(" / ");Ae.push({variantId:ze._id,productTitle:we.product.title,productSku:we.product.sku,productImage:Oe,variantLabel:We||"Default",sku:ze.sku,originAvailable:ze.availability?.origin??0})})}),Q(Ae);const qe={};Ae.forEach(we=>{qe[we.variantId]=qe[we.variantId]??0}),re(qe),K(!0)},className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:["Add ",Y||0," Variant",Y===1?"":"s"," to Transfer"]})]})]})]})]}),I&&n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Selected Variants"}),n.jsx("div",{className:"border border-gray-200 overflow-hidden",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-white",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Product"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"SKU"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Available at Origin"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Transfer Quantity"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Actions"})]})}),n.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[D.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-sm text-gray-600",children:"No variants selected."})}),D.map(Ae=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[Ae.productImage?n.jsx("img",{src:Ae.productImage,alt:Ae.productTitle,className:"w-10 h-10 object-cover"}):n.jsx("div",{className:"w-10 h-10 bg-gray-200"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:Ae.productTitle}),n.jsx("p",{className:"text-xs text-gray-600",children:Ae.variantLabel})]})]})}),n.jsx("td",{className:"px-4 py-2",children:n.jsx("p",{className:"text-sm text-gray-900 font-mono",children:Ae.sku})}),n.jsx("td",{className:"px-4 py-2 text-right",children:n.jsx("p",{className:`text-sm font-medium ${Ae.originAvailable>0?"text-gray-900":"text-gray-600"}`,children:Ae.originAvailable})}),n.jsx("td",{className:"px-4 py-2 text-right",children:n.jsx("input",{type:"number",min:0,max:Ae.originAvailable,value:oe[Ae.variantId]??0,onChange:qe=>{const we=Math.max(0,Math.min(Number(qe.target.value||0),Ae.originAvailable));re(Oe=>({...Oe,[Ae.variantId]:we}))},className:"w-24 px-2 py-1 text-sm border border-gray-200 text-right focus:outline-none focus:ring-1 focus:ring-gray-400"})}),n.jsx("td",{className:"px-4 py-2 text-right",children:n.jsx("button",{onClick:()=>Te(Ae.variantId),className:"p-1 text-gray-600 hover:text-red-600 transition-colors",children:n.jsx(Vs,{className:"w-4 h-4"})})})]},Ae.variantId))]})]})})]}),n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Notes"}),n.jsx("textarea",{rows:4,placeholder:"Add any notes for this transfer...",value:R,onChange:Ae=>F(Ae.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 resize-y"})]}),n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Transfer Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Transfer Date"}),n.jsx("input",{type:"date",value:z,onChange:Ae=>H(Ae.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Reference Name"}),n.jsx("input",{type:"text",placeholder:"Optional reference name",value:V,onChange:Ae=>W(Ae.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]})]})]}),n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Tags"}),n.jsx(Ao,{label:"Select Tags",value:Z,options:q,onChange:A,placeholder:"No tags"})]}),n.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:n.jsx("button",{disabled:!m||!x||Object.values(oe).every(Ae=>(Ae||0)<=0)||d,onClick:async()=>{const Ae=Object.entries(oe).filter(([,we])=>(we||0)>0).map(([we,Oe])=>({variantId:we,quantity:Oe}));if(!a||!m||!x||Ae.length===0)return;const qe=Z.map(we=>i.find(Oe=>Oe.name===we)?._id).filter(Boolean);try{await c({storeId:String(a),originLocationId:m,destinationLocationId:x,referenceName:V,note:R,tags:qe,transferDate:z||void 0,entries:Ae}),h("/products/transfers")}catch{}},className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:d?"Creating Transfer":"Create Transfer"})})]})]})})},Iee=({fulfilledOrders:a=12,percentageChange:r=12.2,minWidth:e})=>n.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200 flex-1 min-w-64",style:e?{minWidth:e}:{},children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("h3",{className:"text-xs text-gray-600 font-normal mb-2",children:"Fulfilled orders over time"}),n.jsx("div",{className:"mb-3",children:n.jsx("span",{className:"text-2xl font-semibold text-gray-900",children:a})}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("svg",{className:"w-3 h-3 text-gray-600",fill:"currentColor",viewBox:"0 0 12 12",children:n.jsx("path",{d:"M6 0L10.392 8H1.608L6 0Z"})}),n.jsxs("span",{className:"text-xs text-gray-600",children:[r>0?"+":"",r,"% last week"]})]})]})}),Ree=({orderItems:a=15,percentageChange:r=18.2,minWidth:e})=>n.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200 flex-1 min-w-64",style:e?{minWidth:e}:{},children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("h3",{className:"text-xs text-gray-600 font-normal mb-2",children:"Order items over time"}),n.jsx("div",{className:"mb-3",children:n.jsx("span",{className:"text-2xl font-semibold text-gray-900",children:a})}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("svg",{className:"w-3 h-3 text-gray-600",fill:"currentColor",viewBox:"0 0 12 12",children:n.jsx("path",{d:"M6 0L10.392 8H1.608L6 0Z"})}),n.jsxs("span",{className:"text-xs text-gray-600",children:[r,"% last week"]})]})]})}),Lee=({order:a,isSelected:r=!1,onSelect:e,onView:t,onChat:s})=>{const o=l=>`$${l.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,i=l=>{const c=new Date(l),d=c.getDate(),h=c.toLocaleDateString("en-US",{month:"short"}),m=c.getFullYear();return`${d} ${h}, ${m}`};return n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[n.jsx("td",{className:"px-4 py-4",children:n.jsx("input",{type:"radio",checked:r,onChange:()=>e?.(a.orderId),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})}),n.jsx("td",{className:"px-4 py-4",children:n.jsx("button",{onClick:()=>t?.(a.orderId),className:"text-sm font-medium text-gray-900 hover:text-gray-700 hover:underline transition-colors cursor-pointer",children:a.orderId})}),n.jsx("td",{className:"px-4 py-4",children:n.jsx("span",{className:"text-sm text-gray-600",children:i(a.date)})}),n.jsx("td",{className:"px-4 py-4",children:n.jsx("span",{className:"text-sm text-gray-900",children:a.customer})}),n.jsx("td",{className:"px-4 py-4",children:n.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${a.paymentStatus==="pending"?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700"}`,children:[n.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${a.paymentStatus==="pending"?"bg-orange-500":"bg-green-500"}`}),a.paymentStatus==="pending"?"Pending":"Success"]})}),n.jsx("td",{className:"px-4 py-4",children:n.jsx("span",{className:"text-sm font-semibold text-gray-900",children:o(a.total)})}),n.jsx("td",{className:"px-4 py-4",children:n.jsx("span",{className:"text-sm text-gray-600",children:a.delivery})}),n.jsx("td",{className:"px-4 py-4",children:n.jsxs("span",{className:"text-sm text-gray-600",children:[a.items,"items"]})}),n.jsx("td",{className:"px-4 py-4",children:n.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${a.fulfillmentStatus==="unfulfilled"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:[n.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${a.fulfillmentStatus==="unfulfilled"?"bg-red-500":"bg-green-500"}`}),a.fulfillmentStatus==="unfulfilled"?"Unfulfilled":"Fulfilled"]})}),n.jsx("td",{className:"px-4 py-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:()=>t?.(a.orderId),className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors","aria-label":"View order",children:n.jsx(zd,{className:"w-5 h-5"})}),n.jsx("button",{onClick:()=>s?.(a.orderId),className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors","aria-label":"Chat",children:n.jsx(Df,{className:"w-5 h-5"})})]})})]})},Dee=({orders:a,selectedOrderId:r,onOrderSelect:e,onOrderView:t,onOrderChat:s})=>n.jsx("tbody",{className:"bg-white",children:a.length>0?a.map(o=>n.jsx(Lee,{order:o,isSelected:r===o.orderId,onSelect:e,onView:t,onChat:s},o.orderId)):n.jsx("tr",{children:n.jsx("td",{colSpan:9,className:"px-4 py-8 text-center text-sm text-gray-500",children:"No orders found"})})}),Fee=({orders:a=[{orderId:"#1002",date:"2024-02-11",customer:"Wade Warren",paymentStatus:"pending",total:20,delivery:"N/A",items:2,fulfillmentStatus:"unfulfilled"},{orderId:"#1003",date:"2024-02-11",customer:"Wade Warren",paymentStatus:"success",total:20,delivery:"N/A",items:2,fulfillmentStatus:"fulfilled"},{orderId:"#1004",date:"2024-02-11",customer:"Wade Warren",paymentStatus:"pending",total:20,delivery:"N/A",items:2,fulfillmentStatus:"unfulfilled"},{orderId:"#1005",date:"2024-02-11",customer:"Wade Warren",paymentStatus:"success",total:20,delivery:"N/A",items:2,fulfillmentStatus:"fulfilled"},{orderId:"#1006",date:"2024-02-11",customer:"Wade Warren",paymentStatus:"pending",total:20,delivery:"N/A",items:2,fulfillmentStatus:"unfulfilled"},{orderId:"#1007",date:"2024-02-11",customer:"Wade Warren",paymentStatus:"success",total:20,delivery:"N/A",items:2,fulfillmentStatus:"fulfilled"},{orderId:"#1008",date:"2024-02-11",customer:"Wade Warren",paymentStatus:"success",total:20,delivery:"N/A",items:2,fulfillmentStatus:"fulfilled"},{orderId:"#1009",date:"2024-02-11",customer:"Wade Warren",paymentStatus:"success",total:20,delivery:"N/A",items:2,fulfillmentStatus:"fulfilled"},{orderId:"#1010",date:"2024-02-11",customer:"Wade Warren",paymentStatus:"success",total:20,delivery:"N/A",items:2,fulfillmentStatus:"fulfilled"},{orderId:"#1011",date:"2024-02-11",customer:"Wade Warren",paymentStatus:"success",total:20,delivery:"N/A",items:2,fulfillmentStatus:"fulfilled"},{orderId:"#1012",date:"2024-02-11",customer:"Wade Warren",paymentStatus:"success",total:20,delivery:"N/A",items:2,fulfillmentStatus:"fulfilled"},{orderId:"#1013",date:"2024-02-11",customer:"Wade Warren",paymentStatus:"success",total:20,delivery:"N/A",items:2,fulfillmentStatus:"fulfilled"},{orderId:"#1014",date:"2024-02-11",customer:"Wade Warren",paymentStatus:"success",total:20,delivery:"N/A",items:2,fulfillmentStatus:"fulfilled"},{orderId:"#1015",date:"2024-02-11",customer:"Wade Warren",paymentStatus:"success",total:20,delivery:"N/A",items:2,fulfillmentStatus:"fulfilled"},{orderId:"#1016",date:"2024-02-11",customer:"Wade Warren",paymentStatus:"success",total:20,delivery:"N/A",items:2,fulfillmentStatus:"fulfilled"},{orderId:"#1017",date:"2024-02-11",customer:"Wade Warren",paymentStatus:"success",total:20,delivery:"N/A",items:2,fulfillmentStatus:"fulfilled"}],onAddOrder:r,onOrderSelect:e,onOrderView:t,onOrderChat:s})=>{const[o,i]=f.useState("all"),[l,c]=f.useState(null),d=f.useCallback(x=>{i(x)},[]),h=f.useCallback(()=>{r?r():console.log("Add order clicked")},[r]),m=f.useCallback(x=>{c(x),e&&e(x)},[e]),y=a.filter(x=>{switch(o){case"unfulfilled":return x.fulfillmentStatus==="unfulfilled";case"unpaid":return x.paymentStatus==="pending";case"open":return x.fulfillmentStatus==="unfulfilled"||x.paymentStatus==="pending";case"closed":return x.fulfillmentStatus==="fulfilled"&&x.paymentStatus==="success";default:return!0}});return n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between px-4 pt-4 pb-3 border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-0",children:[n.jsxs("button",{onClick:()=>d("all"),className:`px-3 py-1.5 text-xs font-medium transition-colors relative ${o==="all"?"text-gray-900":"text-gray-600 hover:text-gray-900"}`,children:["All",o==="all"&&n.jsx("span",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gray-900"})]}),n.jsxs("button",{onClick:()=>d("unfulfilled"),className:`px-3 py-1.5 text-xs font-medium transition-colors relative ${o==="unfulfilled"?"text-gray-900":"text-gray-600 hover:text-gray-900"}`,children:["Unfulfilled",o==="unfulfilled"&&n.jsx("span",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gray-900"})]}),n.jsxs("button",{onClick:()=>d("unpaid"),className:`px-3 py-1.5 text-xs font-medium transition-colors relative ${o==="unpaid"?"text-gray-900":"text-gray-600 hover:text-gray-900"}`,children:["Unpaid",o==="unpaid"&&n.jsx("span",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gray-900"})]}),n.jsxs("button",{onClick:()=>d("open"),className:`px-3 py-1.5 text-xs font-medium transition-colors relative ${o==="open"?"text-gray-900":"text-gray-600 hover:text-gray-900"}`,children:["Open",o==="open"&&n.jsx("span",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gray-900"})]}),n.jsxs("button",{onClick:()=>d("closed"),className:`px-3 py-1.5 text-xs font-medium transition-colors relative ${o==="closed"?"text-gray-900":"text-gray-600 hover:text-gray-900"}`,children:["Closed",o==="closed"&&n.jsx("span",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gray-900"})]})]}),n.jsxs("button",{onClick:h,className:"flex items-center gap-1.5 px-3 py-1.5 bg-gray-900 text-white text-xs font-medium rounded hover:bg-gray-800 transition-colors",children:[n.jsx(na,{className:"w-3.5 h-3.5"}),"Add"]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsx("div",{className:"relative max-h-[600px] overflow-y-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"sticky top-0 z-10 bg-gray-50",children:n.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[n.jsx("th",{className:"px-4 py-2 text-left bg-gray-50",children:n.jsx("input",{type:"radio",className:"w-3.5 h-3.5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-600 uppercase tracking-wider bg-gray-50",children:"Order"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-600 uppercase tracking-wider bg-gray-50",children:"Date"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-600 uppercase tracking-wider bg-gray-50",children:"Customer"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-600 uppercase tracking-wider bg-gray-50",children:"Payment"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-600 uppercase tracking-wider bg-gray-50",children:"Total"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-600 uppercase tracking-wider bg-gray-50",children:"Delivery"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-600 uppercase tracking-wider bg-gray-50",children:"Items"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-600 uppercase tracking-wider bg-gray-50",children:"Fulfillment"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-600 uppercase tracking-wider bg-gray-50",children:"Action"})]})}),n.jsx(Dee,{orders:y,selectedOrderId:l,onOrderSelect:m,onOrderView:t,onOrderChat:s})]})})})]})},Bee=({returnsOrders:a=0,percentageChange:r=-1.2,minWidth:e})=>n.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200 flex-1 min-w-64",style:e?{minWidth:e}:{},children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("h3",{className:"text-xs text-gray-600 font-normal mb-2",children:"Returns Orders"}),n.jsx("div",{className:"mb-3",children:n.jsx("span",{className:"text-2xl font-semibold text-gray-900",children:a})}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[r>=0?n.jsx("svg",{className:"w-3 h-3 text-gray-600",fill:"currentColor",viewBox:"0 0 12 12",children:n.jsx("path",{d:"M6 0L10.392 8H1.608L6 0Z"})}):n.jsx("svg",{className:"w-3 h-3 text-gray-600",fill:"currentColor",viewBox:"0 0 12 12",children:n.jsx("path",{d:"M6 12L1.608 4H10.392L6 12Z"})}),n.jsxs("span",{className:"text-xs text-gray-600",children:[r>0?"+":"",r,"% last week"]})]})]})}),zee=({totalOrders:a=21,percentageChange:r=25.2,minWidth:e})=>n.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200 flex-1 min-w-64",style:e?{minWidth:e}:{},children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("h3",{className:"text-xs text-gray-600 font-normal mb-2",children:"Total Orders"}),n.jsx("div",{className:"mb-3",children:n.jsx("span",{className:"text-2xl font-semibold text-gray-900",children:a})}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("svg",{className:"w-3 h-3 text-gray-600",fill:"currentColor",viewBox:"0 0 12 12",children:n.jsx("path",{d:"M6 0L10.392 8H1.608L6 0Z"})}),n.jsxs("span",{className:"text-xs text-gray-600",children:[r,"% last week"]})]})]})}),Uee=()=>{const a=mr(),[r,e]=f.useState(!1),[t,s]=f.useState(!1),o=f.useCallback(()=>{console.log("Export clicked")},[]),i=f.useCallback(()=>{a("/orders/create")},[a]),l=f.useCallback(()=>{console.log("Add order clicked")},[]),c=f.useCallback(x=>{console.log("Order selected:",x)},[]),d=f.useCallback(x=>{const b=x.startsWith("#")?x.slice(1):x;a(`/orders/${b}`)},[a]),h=f.useCallback(x=>{console.log("Chat with order:",x)},[]),m=f.useCallback(()=>{e(x=>!x)},[]),y=f.useCallback(()=>{s(x=>!x)},[]);return n.jsx(pr,{children:n.jsx("div",{className:"min-h-screen pt-3 px-4 pb-6 relative",style:{position:"relative",zIndex:1},children:n.jsxs("div",{className:"max-w-[1600px] mx-auto",children:[n.jsx("div",{className:"mb-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Orders"}),n.jsxs("button",{onClick:m,className:"flex items-center gap-1.5 px-2.5 py-1.5 border border-gray-200 rounded text-xs text-gray-600 bg-white hover:bg-gray-50 transition-colors",children:[n.jsx(fS,{className:"w-3.5 h-3.5 text-gray-500"}),n.jsx("span",{children:"Oct 1 - Oct 30, 2025"}),n.jsx(Is,{className:"w-3.5 h-3.5 text-gray-500"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:o,className:"flex items-center gap-1.5 px-3 py-1.5 border border-gray-200 rounded text-xs text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[n.jsx(uS,{className:"w-3.5 h-3.5"}),"Export"]}),n.jsxs("button",{onClick:y,className:"flex items-center gap-1.5 px-3 py-1.5 border border-gray-200 rounded text-xs text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:["More actions",n.jsx(Is,{className:"w-3.5 h-3.5"})]}),n.jsxs("button",{onClick:i,className:"flex items-center gap-1.5 px-3 py-1.5 bg-gray-900 text-white text-xs font-medium rounded hover:bg-gray-800 transition-colors",children:[n.jsx(na,{className:"w-3.5 h-3.5"}),"Create Order"]})]})]})}),n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{className:"flex gap-3",children:[n.jsx(zee,{totalOrders:21,percentageChange:25.2}),n.jsx(Ree,{orderItems:15,percentageChange:18.2}),n.jsx(Bee,{returnsOrders:0,percentageChange:-1.2}),n.jsx(Iee,{fulfilledOrders:12,percentageChange:12.2})]}),n.jsx(Fee,{onAddOrder:l,onOrderSelect:c,onOrderView:d,onOrderChat:h})]})]})})})},wP=f.createContext(void 0),$ee=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async v=>{try{s(!0),i(null);const j=await Ke.get(`/collections/store/${v}`),{success:S,data:k}=j.data;if(!S)throw new Error("Failed to fetch collections");e(k)}catch(j){i(j?.response?.data?.message||j?.message||"Failed to fetch collections")}finally{s(!1)}},[]),c=f.useCallback(async(v,j,S=1,k=10)=>{try{s(!0),i(null);const N=await Ke.get(`/collections/search/${v}?q=${encodeURIComponent(j)}&page=${S}&limit=${k}`),{success:P,data:R,pagination:F}=N.data;if(!P)throw new Error("Failed to search collections");return e(R),{success:P,data:R,pagination:F}}catch(N){const P=N?.response?.data?.message||N?.message||"Failed to search collections";throw i(P),new Error(P)}finally{s(!1)}},[]),d=f.useCallback(async(v,j,S=1,k=10)=>{try{s(!0),i(null);const N=await Ke.get(`/collections/${v}/products/search?q=${encodeURIComponent(j)}&page=${S}&limit=${k}`),{success:P,data:R,pagination:F}=N.data;if(!P)throw new Error("Failed to search products in collection");return{success:P,data:R,pagination:F}}catch(N){const P=N?.response?.data?.message||N?.message||"Failed to search products in collection";throw i(P),new Error(P)}finally{s(!1)}},[]),h=f.useCallback(async v=>{try{s(!0),i(null);const j=await Ke.post("/collections",v),{success:S,data:k}=j.data;if(!S)throw new Error("Failed to create collection");return e(N=>[k,...N]),k}catch(j){const S=j?.response?.data?.message||j?.message||"Failed to create collection";throw i(S),j}finally{s(!1)}},[]),m=f.useCallback(async(v,j)=>{try{s(!0),i(null);const S=await Ke.put(`/collections/${v}`,j),{success:k,data:N}=S.data;if(!k)throw new Error("Failed to update collection");return e(P=>P.map(R=>R._id===v?N:R)),N}catch(S){const k=S?.response?.data?.message||S?.message||"Failed to update collection";throw i(k),S}finally{s(!1)}},[]),y=f.useCallback(async v=>{try{s(!0),i(null);const j=await Ke.delete(`/collections/${v}`),{success:S,data:k}=j.data;if(!S)throw new Error("Failed to delete collection");return e(N=>N.filter(P=>P._id!==v)),k.deletedId}catch(j){const S=j?.response?.data?.message||j?.message||"Failed to delete collection";throw i(S),j}finally{s(!1)}},[]),x=f.useCallback(()=>{e([]),i(null),s(!1)},[]),b={collections:r,loading:t,error:o,fetchCollectionsByStoreId:l,searchCollections:c,searchProductsInCollection:d,createCollection:h,updateCollection:m,deleteCollection:y,clearCollections:x};return n.jsx(wP.Provider,{value:b,children:a})},gp=()=>{const a=f.useContext(wP);if(!a)throw new Error("useCollections must be used within a CollectionProvider");return a},Vee=()=>{const a=mr(),{createCollection:r}=gp(),{activeStoreId:e}=fn(),[t,s]=f.useState({title:"",description:"",pageTitle:"",metaDescription:"",urlHandle:"",status:"published"}),o=f.useCallback((c,d)=>{s(h=>({...h,[c]:d}))},[]),i=f.useCallback(()=>{a("/products/collections")},[a]),l=f.useCallback(async()=>{if(!e){a("/products/collections");return}try{await r({storeId:e,title:t.title,description:t.description,pageTitle:t.pageTitle,metaDescription:t.metaDescription,urlHandle:t.urlHandle,onlineStorePublishing:!0,pointOfSalePublishing:!1,status:t.status}),a("/products/collections")}catch{}},[e,t,r,a]);return n.jsx(pr,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-4",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:i,className:"p-1.5 hover:bg-gray-100 rounded transition-colors","aria-label":"Back",children:n.jsx(Hn,{className:"w-4 h-4"})}),n.jsx(Iy,{className:"w-5 h-5 text-gray-600"}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Create Collection"})]}),n.jsxs("button",{onClick:l,className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 transition-colors",children:[n.jsx(na,{className:"w-4 h-4"}),"Save Collection"]})]})})}),n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-4 mb-6",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Title and description"}),n.jsx("div",{className:"border-t border-gray-200 mb-3"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:["Title ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{id:"title",type:"text",value:t.title,onChange:c=>o("title",c.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors",placeholder:"Enter collection title"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),n.jsx("textarea",{id:"description",value:t.description,onChange:c=>o("description",c.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors resize-none",placeholder:"Enter collection description"})]})]})]}),n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-2",children:"Search engine listing"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Add a title and description to see how this collection might appear in a search engine listing."}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"pageTitle",className:"block text-sm font-medium text-gray-700 mb-2",children:"Page title"}),n.jsx("input",{id:"pageTitle",type:"text",value:t.pageTitle,onChange:c=>o("pageTitle",c.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors",placeholder:"Enter page title"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"metaDescription",className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta description"}),n.jsx("textarea",{id:"metaDescription",value:t.metaDescription,onChange:c=>o("metaDescription",c.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors resize-none",placeholder:"Enter meta description"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"urlHandle",className:"block text-sm font-medium text-gray-700 mb-2",children:"URL handle"}),n.jsx("input",{id:"urlHandle",type:"text",value:t.urlHandle,onChange:c=>o("urlHandle",c.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors",placeholder:"Enter URL handle"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Lowercase letters, numbers, and hyphens only"})]})]})]})]}),n.jsx("div",{className:"w-full md:w-[360px]",children:n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Status"}),n.jsx("div",{className:"border-t border-gray-200 mb-3"}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsxs("select",{id:"status",value:t.status,onChange:c=>o("status",c.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors bg-white",children:[n.jsx("option",{value:"draft",children:"Draft"}),n.jsx("option",{value:"published",children:"Published"})]})]})]})})]})})]})})},Wee=({searchQuery:a,filteredProducts:r,selectedProducts:e,onSearchChange:t,onProductSelect:s})=>{const o=a.trim()&&r.length>0;return n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-4 mb-6",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Add products into the collection"}),n.jsx("div",{className:"border-t border-gray-200 mb-3"}),n.jsxs("div",{className:"relative",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Ro,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search products by title, description, or SKU",value:a,onChange:t,className:"w-full pl-9 pr-3 py-2 text-base border border-gray-200 rounded focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors"})]}),o&&n.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded shadow-lg max-h-[300px] overflow-y-auto",children:r.slice(0,10).map(i=>{const l=e.some(c=>c?._id===i?._id);return n.jsxs("button",{onClick:()=>s(i),disabled:l,className:`w-full text-left px-3 py-2 flex items-center gap-2 hover:bg-gray-50 transition-colors ${l?"opacity-60 bg-gray-50 cursor-not-allowed":"cursor-pointer"}`,children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center shrink-0 ${l?"bg-green-500":"bg-gray-900"}`,children:i?.imageUrl?n.jsx("img",{src:i.imageUrl,alt:i.title||"Product",className:"w-full h-full rounded-full object-cover"}):n.jsx(Iy,{className:"w-4 h-4 text-white"})}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm font-medium text-gray-900 truncate",children:i?.title||"Untitled Product"}),l&&n.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:"Selected"})]})})]},i?._id||Math.random())})}),a.trim()&&r.length===0&&n.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded shadow-lg",children:n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No products found"})})]})]})},Hee=({collection:a,onEdit:r,onDelete:e})=>n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-4 mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Overview"}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("button",{onClick:r,className:"p-1.5 hover:bg-gray-100 rounded transition-colors","aria-label":"Edit collection",children:n.jsx(oi,{className:"w-4 h-4 text-gray-600"})}),n.jsx("button",{onClick:e,className:"p-1.5 hover:bg-gray-100 rounded transition-colors","aria-label":"Delete collection",children:n.jsx(Vs,{className:"w-4 h-4 text-gray-600"})})]})]}),n.jsx("div",{className:"border-t border-gray-200 mb-3"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:a.description||"No description"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Page title"}),n.jsx("p",{className:"text-sm text-gray-900",children:a.pageTitle||"-"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"URL handle"}),n.jsx("p",{className:"text-sm text-gray-900",children:a.urlHandle||"-"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Status"}),n.jsx("p",{className:"text-sm text-gray-900 capitalize",children:n.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${a.status==="published"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:a.status||"draft"})})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Meta description"}),n.jsx("p",{className:"text-sm text-gray-900",children:a.metaDescription||"-"})]})]}),n.jsx("div",{className:"border-t border-gray-200 my-3"}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Last updated: ",new Date(a.updatedAt).toLocaleDateString()]})]}),qee=({isOpen:a,collectionTitle:r,onClose:e,onConfirm:t})=>n.jsx(un,{open:a,onClose:e,title:"Delete collection",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:e,className:"px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-100 transition-colors",children:"No"}),n.jsx("button",{onClick:t,className:"px-3 py-1.5 text-sm font-medium text-white bg-red-600 hover:bg-red-700 transition-colors",children:"Yes"})]}),children:n.jsxs("p",{className:"text-sm text-gray-700",children:["Do you really want to delete"," ",r?`'${r}'`:"this collection","?"]})}),Gee=({isOpen:a,formData:r,onChange:e,onClose:t,onUpdate:s})=>n.jsx(un,{open:a,onClose:t,title:"Edit collection",maxWidth:"md",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:t,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:s,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Update"})]}),children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"edit-title",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Title"}),n.jsx("input",{id:"edit-title",type:"text",value:r.title,onChange:o=>e("title",o.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"edit-description",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Description"}),n.jsx("textarea",{id:"edit-description",value:r.description,onChange:o=>e("description",o.target.value),rows:3,className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors resize-none"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"edit-page-title",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Page title"}),n.jsx("input",{id:"edit-page-title",type:"text",value:r.pageTitle,onChange:o=>e("pageTitle",o.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"edit-meta-description",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Meta description"}),n.jsx("textarea",{id:"edit-meta-description",value:r.metaDescription,onChange:o=>e("metaDescription",o.target.value),rows:3,className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors resize-none"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"edit-url-handle",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"URL handle"}),n.jsx("input",{id:"edit-url-handle",type:"text",value:r.urlHandle,onChange:o=>e("urlHandle",o.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"edit-status",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Status"}),n.jsxs("select",{id:"edit-status",value:r.status,onChange:o=>e("status",o.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:ring-1 focus:ring-gray-400 focus:border-gray-400 outline-none transition-colors bg-white",children:[n.jsx("option",{value:"draft",children:"Draft"}),n.jsx("option",{value:"published",children:"Published"})]})]})]})}),Kee=({entry:a,onProductClick:r,onRemoveProduct:e})=>{const t=f.useCallback(()=>{a?.productId?._id&&r(a.productId._id)},[a?.productId?._id,r]),s=f.useCallback(o=>{e(o,a?._id)},[a?._id,e]);return n.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded bg-gray-50 hover:bg-gray-100 cursor-pointer transition-colors",onClick:t,children:[n.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-900 flex items-center justify-center shrink-0",children:a?.productId?.images?.[0]?n.jsx("img",{src:a.productId.images[0],alt:a?.productId?.title||"Product",className:"w-full h-full rounded-full object-cover"}):n.jsx(Iy,{className:"w-4 h-4 text-white"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:a?.productId?.title||"Untitled Product"}),n.jsxs("p",{className:"text-xs text-gray-600 mt-0.5 line-clamp-1",children:[a?.productId?.description?.substring(0,80)||"No description available","..."]}),n.jsxs("div",{className:"flex items-center gap-1.5 mt-1.5 flex-wrap",children:[n.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:["$",a?.productId?.price||0]}),n.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium border border-gray-200 text-gray-700",children:a?.productId?.sku||"No SKU"}),n.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium border border-gray-200 text-gray-700",children:a?.productId?.category?.name||"No Category"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[n.jsxs("p",{className:"text-xs text-gray-500 whitespace-nowrap",children:["Added"," ",a?.createdAt?new Date(a.createdAt).toLocaleDateString():"Unknown date"]}),n.jsx("button",{onClick:s,className:"p-1.5 hover:bg-gray-200 rounded transition-colors",children:n.jsx(Vs,{className:"w-4 h-4 text-gray-600"})})]})]})},Yee=({collectionEntries:a,onProductClick:r,onRemoveProduct:e})=>n.jsx("div",{className:"space-y-3",children:a.map(t=>n.jsx(Kee,{entry:t,onProductClick:r,onRemoveProduct:e},t?._id||Math.random()))}),Zee=({collectionEntries:a,loading:r=!1,onProductClick:e,onRemoveProduct:t})=>n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-4",children:[n.jsxs("h2",{className:"text-base font-medium text-gray-900 mb-3",children:["Products in this collection (",a.length,")"]}),n.jsx("div",{className:"border-t border-gray-200 mb-3"}),r?n.jsx("p",{className:"text-sm text-gray-600",children:"Loading products..."}):a.length>0?n.jsx(Yee,{collectionEntries:a,onProductClick:e,onRemoveProduct:t}):n.jsx("p",{className:"text-sm text-gray-600",children:"No products in this collection yet. Use the search above to add products."})]}),Xee=({selectedProducts:a,loading:r=!1,onRemoveProduct:e,onAddProducts:t,onClearAll:s})=>n.jsxs("div",{className:"bg-white rounded border border-gray-200 p-4 mb-6",children:[n.jsxs("h2",{className:"text-base font-medium text-gray-900 mb-3",children:["Products to add to collection (",a.length,")"]}),n.jsx("div",{className:"border-t border-gray-200 mb-3"}),a.length>0?n.jsxs("div",{className:"space-y-2",children:[a.map(o=>n.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded bg-gray-50",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-900 flex items-center justify-center shrink-0",children:o?.imageUrl?n.jsx("img",{src:o.imageUrl,alt:o.title||"Product",className:"w-full h-full rounded-full object-cover"}):n.jsx(Iy,{className:"w-4 h-4 text-white"})}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:o?.title||"Untitled Product"})]}),n.jsx("button",{onClick:()=>e(o?._id),className:"p-1.5 hover:bg-gray-200 rounded transition-colors",children:n.jsx(Vs,{className:"w-4 h-4 text-gray-600"})})]},o?._id||Math.random())),n.jsxs("div",{className:"flex gap-2 mt-3",children:[n.jsx("button",{onClick:t,disabled:a.length===0||r,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 rounded hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:r?"Adding products...":`Add ${a.length===1?"one product":a.length+" products"} to collection`}),n.jsx("button",{onClick:s,disabled:a.length===0,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Clear all"})]})]}):n.jsx("p",{className:"text-sm text-gray-600",children:"No products selected. Use the search above to add products to this collection."})]}),jP=f.createContext(void 0),Qee=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async m=>{s(!0),i(null);try{const x=(await Ke.post("/collection-entries",m)).data.data;return e(b=>[x,...b]),x}catch(y){const x=y?.response?.data?.message||y?.message||"Failed to create collection entry";throw i(x),new Error(x)}finally{s(!1)}},[]),c=f.useCallback(async m=>{s(!0),i(null);try{const x=(await Ke.get(`/collection-entries/collection/${m}`)).data?.data??[];return e(x),x}catch(y){const x=y?.response?.data?.message||y?.message||"Failed to fetch collection entries";throw i(x),new Error(x)}finally{s(!1)}},[]),d=f.useCallback(async m=>{s(!0),i(null);try{const y=await Ke.delete(`/collection-entries/${m}`);e(x=>x.filter(b=>b._id!==m))}catch(y){const x=y?.response?.data?.message||y?.message||"Failed to delete collection entry";throw i(x),new Error(x)}finally{s(!1)}},[]),h=f.useMemo(()=>({collectionEntries:r,loading:t,error:o,createCollectionEntry:l,fetchCollectionEntriesByCollectionId:c,deleteCollectionEntry:d}),[r,t,o,l,c,d]);return n.jsx(jP.Provider,{value:h,children:a})},Jee=()=>{const a=f.useContext(jP);if(!a)throw new Error("useCollectionEntries must be used within a CollectionEntriesProvider");return a},ete=()=>{const{id:a}=qa(),r=mr(),{collections:e,deleteCollection:t,updateCollection:s}=gp(),{fetchProductsByStoreId:o,searchBasic:i}=dc(),{createCollectionEntry:l,deleteCollectionEntry:c,fetchCollectionEntriesByCollectionId:d,collectionEntries:h,loading:m}=Jee(),[y,x]=f.useState(!1),[b,v]=f.useState(!1),[j,S]=f.useState(""),[k,N]=f.useState([]),[P,R]=f.useState([]),F=e.find(Oe=>Oe._id===a),z=f.useMemo(()=>({title:F?.title||"",description:F?.description||"",pageTitle:F?.pageTitle||"",metaDescription:F?.metaDescription||"",urlHandle:F?.urlHandle||"",status:F?.status||"published"}),[F]),[H,V]=f.useState(z);f.useEffect(()=>{V(z)},[z]),f.useEffect(()=>{F?.storeId&&o(F.storeId)},[F?.storeId,o]),f.useEffect(()=>{a&&d(a)},[a,d]),f.useEffect(()=>{let Oe=!1;const ze=async()=>{const pt=j.trim();if(!pt){N([]);return}try{const Pt=await i({q:pt,storeId:F?.storeId});Oe||N(Pt)}catch{Oe||N([])}},We=setTimeout(()=>{ze()},300);return()=>{Oe=!0,clearTimeout(We)}},[j,i,F?.storeId]);const W=f.useCallback(()=>{r("/products/collections")},[r]),Z=f.useCallback(Oe=>{const ze=Oe.target.value;S(ze)},[]),A=f.useCallback(()=>{S("")},[]),q=f.useCallback(Oe=>{P.some(We=>We._id===Oe._id)||R(We=>[...We,Oe]),A()},[P,A]),I=f.useCallback(Oe=>{R(ze=>ze.filter(We=>We._id!==Oe))},[]),K=f.useCallback(async()=>{if(!(!F?._id||P.length===0))try{const Oe=P.map(ze=>l({collectionId:F._id,productId:ze._id}));await Promise.all(Oe),R([]),console.log("Successfully added products to collection")}catch(Oe){console.error("Failed to add products to collection:",Oe)}},[F?._id,P,l]),D=f.useCallback(async Oe=>{try{await c(Oe),console.log("Successfully removed product from collection")}catch(ze){console.error("Failed to remove product from collection:",ze)}},[c]),Q=f.useCallback(async()=>{if(F?._id)try{await t(F._id)}finally{r("/products/collections")}else x(!1)},[F?._id,t,r]),oe=f.useCallback(async()=>{if(!F?._id){v(!1);return}try{await s(F._id,{title:H.title,description:H.description,pageTitle:H.pageTitle,metaDescription:H.metaDescription,urlHandle:H.urlHandle,status:H.status}),v(!1)}catch{}},[F?._id,H,s]),re=f.useCallback(()=>{v(!0)},[]),Te=f.useCallback(()=>{v(!1)},[]),G=f.useCallback(()=>{x(!0)},[]),Y=f.useCallback(()=>{x(!1)},[]),Se=f.useCallback(()=>{R([])},[]),fe=f.useCallback(Oe=>{q(Oe)},[q]),Ee=f.useCallback(Oe=>{I(Oe)},[I]),Ae=f.useCallback(Oe=>{Oe&&r(`/products/${Oe}`)},[r]),qe=f.useCallback((Oe,ze)=>{Oe.stopPropagation(),D(ze)},[D]),we=f.useCallback((Oe,ze)=>{V(We=>({...We,[Oe]:ze}))},[]);return j.trim()&&k.length>0,n.jsx(pr,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-4",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:W,className:"p-1.5 hover:bg-gray-100 rounded transition-colors","aria-label":"Back",children:n.jsx(Hn,{className:"w-4 h-4"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:F?.title||"Collection"})]})})}),n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:F?n.jsxs(n.Fragment,{children:[n.jsx(Hee,{collection:F,onEdit:re,onDelete:G}),n.jsx(Wee,{searchQuery:j,filteredProducts:k,selectedProducts:P,onSearchChange:Z,onProductSelect:fe}),n.jsx(Xee,{selectedProducts:P,loading:m,onRemoveProduct:Ee,onAddProducts:K,onClearAll:Se}),n.jsx(Zee,{collectionEntries:h,loading:m,onProductClick:Ae,onRemoveProduct:qe})]}):n.jsx("div",{className:"text-sm text-gray-600",children:"Collection not found in state."})}),n.jsx(Gee,{isOpen:b,formData:H,onChange:we,onClose:Te,onUpdate:oe}),n.jsx(qee,{isOpen:y,collectionTitle:F?.title,onClose:Y,onConfirm:Q})]})})},tte=({collection:a,onClick:r})=>{const e=f.useCallback(()=>{r(a._id)},[r,a._id]);return n.jsxs("tr",{onClick:e,className:"hover:bg-gray-50 cursor-pointer transition-colors",children:[n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium text-gray-900",children:a.title}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-700",children:a.pageTitle}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-700",children:a.urlHandle}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-700 capitalize",children:a.status}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-600",children:a.onlineStorePublishing?"Yes":"No"}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-600",children:a.pointOfSalePublishing?"Yes":"No"}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-600",children:new Date(a.updatedAt).toLocaleDateString()})]})},rte=({collections:a,onCollectionClick:r,sortOrder:e,onSortToggle:t})=>n.jsx("div",{className:"bg-white rounded border border-gray-200",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Title"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Page Title"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"URL Handle"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Status"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Online Store"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"POS"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:t?n.jsxs("button",{onClick:t,className:"flex items-center gap-1 hover:text-gray-900 transition-colors cursor-pointer",children:["Updated",e&&n.jsx("span",{className:"inline-flex items-center",children:e==="asc"?n.jsx(Ih,{className:"w-3.5 h-3.5"}):n.jsx(Mh,{className:"w-3.5 h-3.5"})})]}):n.jsx("span",{children:"Updated"})})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(s=>n.jsx(tte,{collection:s,onClick:r},s._id))})]})})}),nte=()=>{const{collections:a,fetchCollectionsByStoreId:r,loading:e}=gp(),{activeStoreId:t}=fn(),s=mr(),[o,i]=f.useState("desc");f.useEffect(()=>{t&&r(t)},[t,r]);const l=f.useCallback(()=>{s("/products/collections/new")},[s]),c=f.useCallback(m=>{s(`/products/collections/${m}`)},[s]),d=f.useMemo(()=>[...a].sort((y,x)=>{const b=new Date(y.updatedAt).getTime(),v=new Date(x.updatedAt).getTime();return o==="asc"?b-v:v-b}),[a,o]),h=f.useCallback(()=>{i(m=>m==="asc"?"desc":"asc")},[]);return n.jsx(pr,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-4",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Iy,{className:"w-5 h-5 text-gray-600"}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Collections"})]}),n.jsxs("button",{onClick:l,className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 transition-colors",children:[n.jsx(na,{className:"w-4 h-4"}),"Add Collection"]})]})})}),n.jsxs("div",{className:"max-w-7xl mx-auto py-6 px-4",children:[e&&n.jsx("div",{className:"flex justify-center items-center py-12",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}),!e&&a.length===0&&n.jsx("div",{className:"bg-white rounded border border-gray-200 p-6 text-center",children:n.jsx("p",{className:"text-sm text-gray-600",children:"No collections found for this store."})}),!e&&a.length>0&&n.jsx(rte,{collections:d,onCollectionClick:c,sortOrder:o,onSortToggle:h})]})]})})},ate=({isOpen:a,product:r,selectedOptionName:e,newOptionValues:t,submittingOption:s,onClose:o,onSubmit:i,onOptionNameChange:l,onUpdateNewOptionValue:c,onAddNewOptionValue:d,onRemoveNewOptionValue:h})=>n.jsx(un,{open:a,onClose:o,title:"Add Option Values",maxWidth:"md",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:o,disabled:s,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:i,disabled:!e||t.every(m=>!m.trim())||s,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Adding...":"Add Values"})]}),children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Add new values to an existing variant option. This will create new variants with the additional values."}),n.jsxs("select",{value:e,onChange:m=>l(m.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400",children:[n.jsx("option",{value:"",disabled:!0,children:"Select an option to add values to"}),r?.variants?.map((m,y)=>n.jsx("option",{value:m.optionName,children:m.optionName},y))]}),e&&n.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200",children:[n.jsxs("p",{className:"text-sm font-medium mb-2",children:['Current values for "',e,'":']}),n.jsx("div",{className:"flex gap-2 flex-wrap",children:r?.variants?.find(m=>m.optionName===e)?.values?.map((m,y)=>n.jsx("span",{className:"px-2 py-1 text-xs font-medium border border-gray-200 text-gray-700",children:m},y))})]}),n.jsx("p",{className:"text-sm font-medium",children:"New Option Values"}),t.map((m,y)=>n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",className:"flex-1 px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400",placeholder:"Enter new value",value:m,onChange:x=>c(y,x.target.value)}),n.jsx("button",{onClick:()=>h(y),disabled:t.length===1,className:"p-2 text-gray-600 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n.jsx(Vs,{className:"w-4 h-4"})})]},y)),n.jsxs("button",{onClick:d,className:"text-sm text-gray-700 hover:text-gray-900 font-medium mt-1 flex items-center gap-1 w-fit",children:[n.jsx(na,{className:"w-4 h-4"}),"Add another value"]})]})}),ste=({isOpen:a,variantsForm:r,submittingVariants:e,onClose:t,onSubmit:s,onAddVariantRow:o,onRemoveVariantRow:i,onUpdateVariantOptionName:l,onAddVariantValue:c,onRemoveVariantValue:d,onUpdateVariantValue:h})=>n.jsx(un,{open:a,onClose:t,title:"Add Product Variants",maxWidth:"md",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:t,disabled:e,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:s,disabled:e,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:e?"Saving...":"Save"})]}),children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Add options like size or color. Each option can have multiple values."}),n.jsxs("div",{className:"flex flex-col gap-4",children:[r.map((m,y)=>n.jsxs("div",{className:"p-3 border border-gray-200 bg-gray-50",children:[n.jsxs("div",{className:"flex justify-between items-center mb-3",children:[n.jsxs("p",{className:"text-sm font-medium",children:["Option ",y+1]}),n.jsx("button",{onClick:()=>i(y),className:"p-1 text-gray-600 hover:bg-gray-100 transition-colors",children:n.jsx(Vs,{className:"w-4 h-4"})})]}),n.jsx("input",{type:"text",className:"w-full px-3 py-1.5 text-sm border border-gray-200 mb-3 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400",placeholder:"e.g., Size, Color, Material",value:m.optionName,onChange:x=>l(y,x.target.value)}),n.jsx("p",{className:"text-sm font-medium mb-2",children:"Option Values"}),m.values.map((x,b)=>n.jsxs("div",{className:"flex gap-2 mb-2",children:[n.jsx("input",{type:"text",className:"flex-1 px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400",placeholder:"Enter value",value:x,onChange:v=>h(y,b,v.target.value)}),n.jsx("button",{onClick:()=>d(y,b),disabled:m.values.length===1,className:"p-2 text-gray-600 hover:bg-gray-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n.jsx(Vs,{className:"w-4 h-4"})})]},b)),n.jsxs("button",{onClick:()=>c(y),className:"text-sm text-gray-700 hover:text-gray-900 font-medium mt-1 flex items-center gap-1 w-fit",children:[n.jsx(na,{className:"w-4 h-4"}),"Add another value"]})]},y)),n.jsxs("button",{onClick:o,className:"w-full border border-gray-200 text-gray-700 px-4 py-2 text-sm font-medium hover:bg-gray-50 transition-colors flex items-center justify-center gap-2",children:[n.jsx(na,{className:"w-4 h-4"}),"Add options like size or color"]})]})]})}),ote=({isOpen:a,selectedDimension:r,deletingVariant:e,onClose:t,onConfirm:s})=>n.jsx(un,{open:a,onClose:t,title:n.jsx("span",{className:"text-red-600",children:" Confirm Deletion"}),maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:t,disabled:e,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:s,disabled:e,className:"px-3 py-1.5 text-sm font-medium text-white bg-red-600 hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:e?"Deleting...":"Delete Permanently"})]}),children:n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("p",{className:"text-sm text-gray-900",children:["Are you sure you want to delete the ",n.jsxs("strong",{children:['"',r,'"']})," dimension?"]}),n.jsx("p",{className:"text-sm text-red-600",children:" This action cannot be undone. All product variants containing this dimension will be permanently removed."}),n.jsx("p",{className:"text-sm text-gray-600",children:"If this is the only dimension, the product will revert to a single default variant."})]})}),ite=({isOpen:a,product:r,selectedDimension:e,onClose:t,onContinue:s,onDimensionChange:o})=>n.jsx(un,{open:a,onClose:t,title:"Delete Variant Dimension",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:t,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:s,disabled:!e,className:"px-3 py-1.5 text-sm font-medium text-white bg-red-600 hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Continue"})]}),children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Select the variant dimension you want to delete from this product. This action will remove all variants that contain this dimension."}),n.jsxs("select",{value:e,onChange:i=>o(i.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400",children:[n.jsx("option",{value:"",disabled:!0,children:"Select a dimension to delete"}),r?.variants?.map((i,l)=>n.jsx("option",{value:i.optionName,children:i.optionName},l))]})]})}),lte=({product:a})=>n.jsxs("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Category"}),n.jsx("p",{className:"text-sm text-gray-900",children:a.category?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"SKU"}),n.jsx("p",{className:"text-sm text-gray-900",children:a.sku})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Barcode"}),n.jsx("p",{className:"text-sm text-gray-900",children:a.barcode||"N/A"})]})]})]}),cte=({product:a,variantsCount:r,onAddVariants:e,onDeleteVariant:t,onAddOption:s})=>{const o=mr();return n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex items-center mb-4 justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>o("/products"),className:"p-1.5 hover:bg-gray-50 rounded transition-colors",children:n.jsx(Hn,{className:"w-4 h-4 text-gray-700"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:a.title})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:e,className:"bg-gray-900 text-white px-3 py-1.5 rounded text-sm font-medium hover:bg-gray-800 transition-colors",children:"Add Variants"}),n.jsx("button",{onClick:t,disabled:!a?.variants||a.variants.length===0,className:"border border-gray-200 text-gray-700 px-3 py-1.5 rounded text-sm font-medium hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Delete Variant"}),n.jsx("button",{onClick:s,disabled:!a?.variants||a.variants.length===0||r<=1,className:"border border-gray-200 text-gray-700 px-3 py-1.5 rounded text-sm font-medium hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Add Option"})]})]}),a.description&&n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:a.description}),n.jsxs("div",{className:"flex gap-2 flex-wrap",children:[n.jsx("span",{className:`px-2.5 py-1 rounded text-xs font-medium ${a.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:a.status}),a.onlineStorePublishing&&n.jsx("span",{className:"px-2.5 py-1 rounded text-xs font-medium border border-gray-200 text-gray-700",children:"Online"}),a.pointOfSalePublishing&&n.jsx("span",{className:"px-2.5 py-1 rounded text-xs font-medium border border-gray-200 text-gray-700",children:"POS"})]})]})},dte=({imageUrls:a})=>!Array.isArray(a)||a.length===0?null:n.jsxs("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Images"}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:a.map((r,e)=>n.jsx("div",{className:"relative rounded overflow-hidden border border-gray-200 aspect-square bg-gray-50",children:n.jsx("img",{src:r,alt:`Product image ${e+1}`,className:"w-full h-full object-cover block",onError:t=>{t.currentTarget.style.display="none"}})},`${r}-${e}`))})]}),CP=({onBack:a})=>{const r=mr(),e=()=>{a?a():r("/products")};return n.jsx("div",{className:"max-w-5xl mx-auto py-8",children:n.jsxs("div",{className:"bg-white p-12 text-center rounded-lg border border-gray-200",children:[n.jsx("div",{className:"bg-red-100 w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center",children:n.jsx(xs,{className:"w-8 h-8 text-red-600"})}),n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Product Not Found"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"The product you're looking for doesn't exist or has been removed."}),n.jsxs("button",{onClick:e,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 mx-auto",children:[n.jsx(Hn,{className:"w-5 h-5"}),"Back to Products"]})]})})},ute=({product:a})=>!a.variants||a.variants.length===0?null:n.jsxs("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Product Options"}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:a.variants.map(r=>n.jsxs("div",{className:"p-4 border border-gray-200 rounded",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:r.optionName}),n.jsx("div",{className:"flex gap-2 flex-wrap",children:r.values.map(e=>n.jsx("span",{className:"px-2.5 py-1 rounded text-xs font-medium border border-gray-200 text-gray-700",children:e},e))})]},r._id))})]}),fte=({product:a})=>n.jsxs("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Organization"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Product Type"}),n.jsx("p",{className:"text-sm text-gray-900",children:a.productType?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Vendor"}),n.jsx("p",{className:"text-sm text-gray-900",children:a.vendor?.name||"N/A"})]})]}),a.tagIds&&a.tagIds.length>0&&n.jsxs("div",{className:"mt-4",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Tags"}),n.jsx("div",{className:"flex gap-2 flex-wrap",children:a.tagIds.map(r=>n.jsx("span",{className:"px-2.5 py-1 rounded text-xs font-medium border border-gray-200 text-gray-700",children:r?.name||"N/A"},r._id))})]})]}),pte=({product:a})=>n.jsxs("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Pricing"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Price"}),n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["$",a.price.toFixed(2)]})]}),typeof a.compareAtPrice=="number"&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Compare At"}),n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["$",a.compareAtPrice.toFixed(2)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Cost"}),n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["$",a.cost?.toFixed(2)??"0.00"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Profit"}),n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["$",a.profit?.toFixed(2)??"0.00"," (",a.marginPercent?.toFixed(1)??"0.0","%)"]})]})]})]}),hte=({product:a})=>a.isPhysicalProduct?n.jsxs("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Shipping Information"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Package"}),n.jsx("p",{className:"text-sm text-gray-900",children:a.package?.packageName||"N/A"}),a.package&&n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[a.package.length,"  ",a.package.width,"  ",a.package.height," ",a.package.dimensionsUnit]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Weight"}),n.jsxs("p",{className:"text-sm text-gray-900",children:[a.productWeight," ",a.productWeightUnit]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Origin"}),n.jsx("p",{className:"text-sm text-gray-900",children:a.countryOfOrigin||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"HS Code"}),n.jsx("p",{className:"text-sm text-gray-900",children:a.harmonizedSystemCode||"N/A"})]})]})]}):null,mte=({product:a})=>n.jsxs("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Status & Details"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Status"}),n.jsx("span",{className:`inline-block px-2.5 py-1 rounded text-xs font-medium ${a.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:a.status})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Inventory Tracking"}),n.jsx("p",{className:"text-sm text-gray-900",children:a.inventoryTrackingEnabled?"Enabled":"Disabled"}),a.inventoryTrackingEnabled&&n.jsxs("p",{className:"text-sm text-gray-900 mt-1",children:["Quantity: ",a.quantity??0]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Continue Selling When Out of Stock"}),n.jsx("p",{className:"text-sm text-gray-900",children:a.continueSellingWhenOutOfStock?"Yes":"No"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Created"}),n.jsx("p",{className:"text-sm text-gray-900",children:new Date(a.createdAt).toLocaleDateString()})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Updated"}),n.jsx("p",{className:"text-sm text-gray-900",children:new Date(a.updatedAt).toLocaleDateString()})]})]})]}),gte=({variant:a,productId:r})=>{const e=mr(),t=()=>{e(`/products/${r}/variants/${a._id}`)};return n.jsxs("div",{className:"p-6 border border-gray-200 rounded-lg cursor-pointer transition-all hover:shadow-md hover:border-blue-500",onClick:t,children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("p",{className:"text-base font-medium",children:a.sku||"N/A"}),n.jsxs("p",{className:"text-base font-medium",children:["$",a.price?.toFixed(2)||"0.00"]})]}),n.jsx("div",{className:"flex gap-2 flex-wrap mb-4",children:a.optionValues&&Object.entries(a.optionValues).map(([s,o])=>n.jsxs("span",{className:"px-2 py-1 text-xs font-semibold rounded border border-gray-300 text-gray-700",children:[s,": ",o]},`${s}-${o}`))}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Inventory Tracking"}),n.jsx("p",{className:"text-base",children:a.isInventoryTrackingEnabled?"Enabled":"Disabled"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Weight"}),n.jsxs("p",{className:"text-base",children:[a.weightValue||0," ",a.weightUnit||"kg"]})]})]}),n.jsx("div",{className:"mt-4",children:n.jsxs("p",{className:"text-sm text-gray-600",children:["Continue selling: ",a.outOfStockContinueSelling?"Yes":"No"]})})]})},yte=({variants:a,productId:r,loading:e})=>n.jsxs("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:[n.jsxs("h2",{className:"text-base font-medium text-gray-900 mb-4",children:["Product Variants (",a.length,")"]}),e&&n.jsx("p",{className:"text-sm text-gray-600",children:"Loading variants..."}),!e&&a.length===0&&n.jsx("p",{className:"text-sm text-gray-600",children:"No variants available."}),!e&&a.length>0&&n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(t=>n.jsx(gte,{variant:t,productId:r},t._id))})]}),SP=f.createContext(void 0),xte=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async m=>{try{s(!0),i(null);const y=await Ke.get(`/product-variants/product/${m}`),{success:x,data:b}=y.data;if(!x)throw new Error("Failed to fetch variants");e(b)}catch(y){const x=y?.response?.data?.message||y?.message||"Failed to fetch variants";i(x)}finally{s(!1)}},[]),c=f.useCallback(async(m,y)=>{try{s(!0),i(null);const x=await Ke.put(`/product-variants/${m}`,y),{success:b,data:v}=x.data;if(!b||!v)throw new Error("Failed to update variant");return e(j=>j.map(S=>S._id===m?v:S)),v}catch(x){const b=x?.response?.data?.message||x?.message||"Failed to update variant";throw i(b),x}finally{s(!1)}},[]),d=f.useCallback(()=>{e([]),i(null),s(!1)},[]),h={variants:r,loading:t,error:o,fetchVariantsByProductId:l,updateVariant:c,clearVariants:d};return n.jsx(SP.Provider,{value:h,children:a})},NP=()=>{const a=f.useContext(SP);if(!a)throw new Error("useProductVariants must be used within a ProductVariantProvider");return a},vte=()=>{const{id:a}=qa();mr();const{products:r,addVariantsToProduct:e,deleteVariantFromProduct:t,addOptionToProduct:s}=dc(),{fetchVariantsByProductId:o,variants:i,loading:l}=NP(),c=f.useMemo(()=>r.find(Ne=>Ne._id===a),[r,a]),[d,h]=f.useState(!1),[m,y]=f.useState([{optionName:"",values:[""]}]),[x,b]=f.useState(!1),[v,j]=f.useState(!1),[S,k]=f.useState(""),[N,P]=f.useState(!1),[R,F]=f.useState(!1),[z,H]=f.useState(""),[V,W]=f.useState([""]),[Z,A]=f.useState(!1),q=f.useCallback(()=>{h(!0)},[]),I=f.useCallback(()=>{h(!1),y([{optionName:"",values:[""]}])},[]),K=f.useCallback(()=>{b(!0)},[]),D=f.useCallback(()=>{b(!1),k("")},[]),Q=f.useCallback(()=>{S&&(b(!1),j(!0))},[S]),oe=f.useCallback(()=>{j(!1),k("")},[]),re=f.useCallback(()=>{F(!0)},[]),Te=f.useCallback(()=>{F(!1),H(""),W([""])},[]),G=f.useCallback(async()=>{if(!(!c||!S))try{P(!0),await t(c._id,S),await o(c._id),oe()}catch(Ne){console.error("Failed to delete variant dimension:",Ne)}finally{P(!1)}},[c,S,t,o,oe]),Y=f.useCallback(()=>{y(Ne=>[...Ne,{optionName:"",values:[""]}])},[]),Se=f.useCallback(Ne=>{y(Ie=>Ie.filter((ne,M)=>M!==Ne))},[]),fe=f.useCallback((Ne,Ie)=>{y(ne=>ne.map((M,U)=>U===Ne?{...M,optionName:Ie}:M))},[]),Ee=f.useCallback(Ne=>{y(Ie=>Ie.map((ne,M)=>M===Ne?{...ne,values:[...ne.values,""]}:ne))},[]),Ae=f.useCallback((Ne,Ie)=>{y(ne=>ne.map((M,U)=>U===Ne?{...M,values:M.values.filter((J,ce)=>ce!==Ie)}:M))},[]),qe=f.useCallback((Ne,Ie,ne)=>{y(M=>M.map((U,J)=>J===Ne?{...U,values:U.values.map((ce,ue)=>ue===Ie?ne:ce)}:U))},[]),[we,Oe]=f.useState(!1),ze=f.useCallback(async()=>{if(!a)return;const Ne=m.map(Ie=>({optionName:Ie.optionName.trim(),values:Ie.values.map(ne=>ne.trim()).filter(Boolean)})).filter(Ie=>Ie.optionName&&Ie.values.length>0);if(Ne.length!==0)try{Oe(!0),await e(a,Ne),I(),o(a)}catch{}finally{Oe(!1)}},[a,m,e,o,I]),We=f.useCallback(async()=>{if(!a||!z)return;const Ne=V.filter(Ie=>Ie.trim().length>0);if(Ne.length!==0)try{A(!0),console.log("Calling addOptionToProduct with:",{productId:a,optionName:z,values:Ne}),await s(a,z,Ne),console.log("Successfully added option values"),Te(),o(a)}catch(Ie){console.error("Error adding option values:",Ie)}finally{A(!1)}},[a,z,V,s,o,Te]),pt=f.useCallback((Ne,Ie)=>{W(ne=>{const M=[...ne];return M[Ne]=Ie,M})},[]),Pt=f.useCallback(()=>{W(Ne=>[...Ne,""])},[]),ee=f.useCallback(Ne=>{W(Ie=>{const ne=Ie.filter((M,U)=>U!==Ne);return ne.length>0?ne:[""]})},[]);return f.useEffect(()=>{a&&o(a)},[a,o]),c?n.jsx(pr,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsxs("div",{className:"max-w-7xl mx-auto pt-6 px-4 pb-6",children:[n.jsx(cte,{product:c,variantsCount:i.length,onAddVariants:q,onDeleteVariant:K,onAddOption:re}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n.jsx(dte,{imageUrls:c.imageUrls||[]}),n.jsx(lte,{product:c}),n.jsx(pte,{product:c}),n.jsx(fte,{product:c}),n.jsx(hte,{product:c}),n.jsx(ute,{product:c}),n.jsx(yte,{variants:i,productId:a||"",loading:l})]}),n.jsx("div",{className:"lg:col-span-1",children:n.jsx(mte,{product:c})})]})]}),n.jsx(ste,{isOpen:d,variantsForm:m,submittingVariants:we,onClose:I,onSubmit:ze,onAddVariantRow:Y,onRemoveVariantRow:Se,onUpdateVariantOptionName:fe,onAddVariantValue:Ee,onRemoveVariantValue:Ae,onUpdateVariantValue:qe}),n.jsx(ite,{isOpen:x,product:c,selectedDimension:S,onClose:D,onContinue:Q,onDimensionChange:k}),n.jsx(ote,{isOpen:v,selectedDimension:S,deletingVariant:N,onClose:oe,onConfirm:G}),n.jsx(ate,{isOpen:R,product:c,selectedOptionName:z,newOptionValues:V,submittingOption:Z,onClose:Te,onSubmit:We,onOptionNameChange:H,onUpdateNewOptionValue:pt,onAddNewOptionValue:Pt,onRemoveNewOptionValue:ee})]})}):n.jsx(CP,{})},bte=({variant:a,formData:r,isEditing:e,onEdit:t,onSave:s,onCancel:o,onInputChange:i})=>n.jsxs("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Basic Information"}),e?n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{onClick:s,className:"p-1 text-gray-700 hover:bg-gray-50 rounded transition-colors",children:n.jsx(zc,{className:"w-4 h-4"})}),n.jsx("button",{onClick:o,className:"p-1 text-gray-700 hover:bg-gray-50 rounded transition-colors",children:n.jsx(xs,{className:"w-4 h-4"})})]}):n.jsx("button",{onClick:t,className:"p-1 text-gray-600 hover:bg-gray-50 rounded transition-colors",children:n.jsx(oi,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"SKU"}),e?n.jsx("input",{type:"text",className:"w-full px-3 py-1.5 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors",value:r.sku,onChange:l=>i("sku",l.target.value)}):n.jsx("p",{className:"text-sm font-medium text-gray-900",children:a.sku})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Barcode"}),e?n.jsx("input",{type:"text",className:"w-full px-3 py-1.5 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors",value:r.barcode,onChange:l=>i("barcode",l.target.value)}):n.jsx("p",{className:"text-sm text-gray-900",children:a.barcode||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Continue Selling When Out of Stock"}),e?n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsxs("div",{className:"relative inline-block w-10 h-5",children:[n.jsx("input",{type:"checkbox",checked:r.outOfStockContinueSelling,onChange:l=>i("outOfStockContinueSelling",l.target.checked),className:"sr-only peer"}),n.jsx("div",{className:"w-10 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-gray-400 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-gray-900"})]}),n.jsx("span",{className:"text-sm text-gray-900",children:r.outOfStockContinueSelling?"Yes":"No"})]}):n.jsx("p",{className:"text-sm text-gray-900",children:a.outOfStockContinueSelling?"Yes":"No"})]})]})]}),wte=({product:a,variant:r,productId:e})=>{const t=mr(),s=f.useCallback(()=>{t(`/products/${e}`)},[t,e]);return n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex items-center mb-2",children:[n.jsx("button",{onClick:s,className:"p-1.5 hover:bg-gray-50 rounded transition-colors mr-2",children:n.jsx(Hn,{className:"w-4 h-4 text-gray-700"})}),n.jsxs("h1",{className:"text-xl font-medium text-gray-900",children:[a.title," - ",r.sku]})]}),n.jsx("p",{className:"text-sm text-gray-600",children:"Variant Details"})]})},jte=({isPhysicalProduct:a,isInventoryTrackingEnabled:r,onIsPhysicalProductChange:e,onIsInventoryTrackingEnabledChange:t,onSaveChanges:s})=>n.jsx("div",{className:"bg-white border border-gray-200 p-4 mb-6 rounded-lg",children:n.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[n.jsxs("div",{className:"flex gap-6 flex-wrap items-center",children:[n.jsxs("label",{className:"flex items-center gap-2.5 cursor-pointer",children:[n.jsxs("div",{className:"relative inline-block w-10 h-5",children:[n.jsx("input",{type:"checkbox",checked:a,onChange:o=>e(o.target.checked),className:"sr-only peer"}),n.jsx("div",{className:"w-10 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-gray-400 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-gray-900"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Is Physical Product"}),n.jsx("p",{className:"text-xs text-gray-600",children:a?"This is a physical product":"This is a digital product"})]})]}),n.jsxs("label",{className:"flex items-center gap-2.5 cursor-pointer",children:[n.jsxs("div",{className:"relative inline-block w-10 h-5",children:[n.jsx("input",{type:"checkbox",checked:r,onChange:o=>t(o.target.checked),className:"sr-only peer"}),n.jsx("div",{className:"w-10 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-gray-400 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-gray-900"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Inventory Tracking"}),n.jsx("p",{className:"text-xs text-gray-600",children:r?"Track inventory for this variant":"Do not track inventory"})]})]})]}),n.jsx("button",{onClick:s,className:"bg-gray-900 text-white px-3 py-1.5 rounded text-sm font-medium hover:bg-gray-800 transition-colors",children:"Save Changes"})]})}),Cte=({productId:a,onBack:r})=>{const e=mr(),t=f.useCallback(()=>{r?r():e(a?`/products/${a}`:"/products")},[e,r,a]);return n.jsx("div",{className:"bg-white min-h-screen",children:n.jsx("div",{className:"max-w-5xl mx-auto py-8",children:n.jsxs("div",{className:"bg-white p-12 text-center rounded-lg border border-gray-200",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Variant Not Found"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"The variant you're looking for doesn't exist."}),n.jsxs("button",{onClick:t,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 mx-auto",children:[n.jsx(Hn,{className:"w-5 h-5"}),"Back to Product"]})]})})})},Ste=()=>{const{id:a,variantId:r}=qa();mr();const{products:e}=dc(),{fetchVariantsByProductId:t,variants:s,loading:o,updateVariant:i}=NP(),{packagings:l,loading:c,fetchPackagingsByStoreId:d}=Ab(),{activeStoreId:h}=fn(),m=f.useMemo(()=>e.find(A=>A._id===a),[e,a]),y=f.useMemo(()=>s.find(A=>A._id===r),[s,r]),[x,b]=f.useState({basic:!1,pricing:!1,inventory:!1,package:!1,images:!1}),[v,j]=f.useState({sku:"",barcode:"",price:0,compareAtPrice:0,cost:0,chargeTax:!1,unitPriceTotalAmount:0,unitPriceTotalAmountMetric:"item",unitPriceBaseMeasure:0,unitPriceBaseMeasureMetric:"item",weightValue:0,weightUnit:"kg",countryOfOrigin:"",hsCode:"",outOfStockContinueSelling:!1,packageId:"",isPhysicalProduct:!0,isInventoryTrackingEnabled:!1,images:[]}),S={weight:["milligram","gram","kilogram"],volume:["milliliter","centiliter","liter","cubic meter"],size:["millimeter","centimeter","meter"],area:["square meter"],"per item":["item"]},k=f.useCallback(()=>{if(!v.unitPriceTotalAmountMetric)return[];for(const[A,q]of Object.entries(S))if(q.includes(v.unitPriceTotalAmountMetric))return q;return[]},[v.unitPriceTotalAmountMetric]),N=f.useCallback(()=>{const A=v.price||0,q=v.cost||0,I=A-q,K=A>0?I/A*100:0;return{profit:I,marginPercent:K}},[v.price,v.cost]),P=f.useCallback(()=>{j(A=>({...A,images:[...A.images,""]}))},[]),R=f.useCallback((A,q)=>{j(I=>({...I,images:I.images.map((K,D)=>D===A?q:K)}))},[]),F=f.useCallback(A=>{j(q=>({...q,images:q.images.filter((I,K)=>K!==A)}))},[]);f.useEffect(()=>{y&&j({sku:y.sku||"",barcode:y.barcode||"",price:y.price||0,compareAtPrice:y.compareAtPrice||0,cost:y.cost||0,chargeTax:y.chargeTax||!1,unitPriceTotalAmount:y.unitPriceTotalAmount||0,unitPriceTotalAmountMetric:y.unitPriceTotalAmountMetric||"item",unitPriceBaseMeasure:y.unitPriceBaseMeasure||0,unitPriceBaseMeasureMetric:y.unitPriceBaseMeasureMetric||"item",weightValue:y.weightValue||0,weightUnit:y.weightUnit||"kg",countryOfOrigin:y.countryOfOrigin||"",hsCode:y.hsCode||"",outOfStockContinueSelling:y.outOfStockContinueSelling||!1,packageId:y.package?._id||"",isPhysicalProduct:y.isPhysicalProduct??!0,isInventoryTrackingEnabled:y.isInventoryTrackingEnabled||!1,images:y.images||[]})},[y]);const z=f.useCallback((A,q)=>{j(I=>{const K={...I,[A]:q};return A==="unitPriceTotalAmountMetric"&&(K.unitPriceBaseMeasureMetric=""),K})},[]),H=f.useCallback(A=>{b(q=>({...q,[A]:!0}))},[]),V=f.useCallback(async A=>{if(y)try{let q={};switch(A){case"basic":q={sku:v.sku,barcode:v.barcode,outOfStockContinueSelling:v.outOfStockContinueSelling};break;case"pricing":const{profit:I,marginPercent:K}=N();q={price:v.price,compareAtPrice:v.compareAtPrice,cost:v.cost,profit:I,marginPercent:K,unitPriceTotalAmount:v.unitPriceTotalAmount,unitPriceTotalAmountMetric:v.unitPriceTotalAmountMetric,unitPriceBaseMeasure:v.unitPriceBaseMeasure,unitPriceBaseMeasureMetric:v.unitPriceBaseMeasureMetric,chargeTax:v.chargeTax};break;case"package":q={package:v.packageId||null,countryOfOrigin:v.countryOfOrigin,hsCode:v.hsCode,weightValue:v.weightValue,weightUnit:v.weightUnit};break;case"images":q={images:v.images.filter(D=>D.trim()!=="")};break}await i(y._id,q),b(I=>({...I,[A]:!1}))}catch(q){console.error("Error updating variant:",q)}},[y,v,N,i]),W=f.useCallback(A=>{y&&j({sku:y.sku||"",barcode:y.barcode||"",price:y.price||0,compareAtPrice:y.compareAtPrice||0,cost:y.cost||0,chargeTax:y.chargeTax||!1,unitPriceTotalAmount:y.unitPriceTotalAmount||0,unitPriceTotalAmountMetric:y.unitPriceTotalAmountMetric||"item",unitPriceBaseMeasure:y.unitPriceBaseMeasure||0,unitPriceBaseMeasureMetric:y.unitPriceBaseMeasureMetric||"item",weightValue:y.weightValue||0,weightUnit:y.weightUnit||"kg",countryOfOrigin:y.countryOfOrigin||"",hsCode:y.hsCode||"",outOfStockContinueSelling:y.outOfStockContinueSelling||!1,packageId:y.package?._id||"",isPhysicalProduct:y.isPhysicalProduct??!0,isInventoryTrackingEnabled:y.isInventoryTrackingEnabled||!1,images:y.images||[]}),b(q=>({...q,[A]:!1}))},[y]),Z=f.useCallback(async()=>{if(y)try{await i(y._id,{isPhysicalProduct:v.isPhysicalProduct,isInventoryTrackingEnabled:v.isInventoryTrackingEnabled})}catch(A){console.error("Error updating variant:",A)}},[y,v.isPhysicalProduct,v.isInventoryTrackingEnabled,i]);return f.useEffect(()=>{a&&t(a)},[a,t]),f.useEffect(()=>{h&&d(h)},[h,d]),m?y?n.jsx(pr,{children:n.jsx("div",{className:"min-h-screen",children:n.jsxs("div",{className:"max-w-7xl mx-auto pt-6 px-4 pb-6",children:[n.jsx(wte,{product:m,variant:y,productId:a||""}),n.jsx(jte,{isPhysicalProduct:v.isPhysicalProduct,isInventoryTrackingEnabled:v.isInventoryTrackingEnabled,onIsPhysicalProductChange:A=>z("isPhysicalProduct",A),onIsInventoryTrackingEnabledChange:A=>z("isInventoryTrackingEnabled",A),onSaveChanges:Z}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n.jsx(bte,{variant:y,formData:{sku:v.sku,barcode:v.barcode,outOfStockContinueSelling:v.outOfStockContinueSelling},isEditing:x.basic,onEdit:()=>H("basic"),onSave:()=>V("basic"),onCancel:()=>W("basic"),onInputChange:z}),n.jsxs("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Pricing Information"}),x.pricing?n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{onClick:()=>V("pricing"),className:"p-1 text-gray-700 hover:bg-gray-50 rounded transition-colors",children:n.jsx(zc,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>W("pricing"),className:"p-1 text-gray-700 hover:bg-gray-50 rounded transition-colors",children:n.jsx(xs,{className:"w-4 h-4"})})]}):n.jsx("button",{onClick:()=>H("pricing"),className:"p-1 text-gray-600 hover:bg-gray-50 rounded transition-colors",children:n.jsx(oi,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Selling Price"}),x.pricing?n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm",children:"$"}),n.jsx("input",{type:"number",className:"w-full pl-6 pr-3 py-1.5 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors",value:v.price,onChange:A=>z("price",parseFloat(A.target.value)||0)})]}):n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["$",y.price.toFixed(2)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Compare At Price"}),x.pricing?n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm",children:"$"}),n.jsx("input",{type:"number",className:"w-full pl-6 pr-3 py-1.5 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors",value:v.compareAtPrice,onChange:A=>z("compareAtPrice",parseFloat(A.target.value)||0)})]}):n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["$",y.compareAtPrice?.toFixed(2)||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Cost"}),x.pricing?n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm",children:"$"}),n.jsx("input",{type:"number",className:"w-full pl-6 pr-3 py-1.5 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors",value:v.cost,onChange:A=>z("cost",parseFloat(A.target.value)||0)})]}):n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["$",y.cost?.toFixed(2)||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Profit"}),n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["$",x.pricing?N().profit.toFixed(2):y.profit?.toFixed(2)||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Margin Percentage"}),n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[x.pricing?N().marginPercent.toFixed(2):y.marginPercent?.toFixed(2)||"0.00","%"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Unit Price Total Amount"}),x.pricing?n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx("span",{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm",children:"$"}),n.jsx("input",{type:"number",className:"w-full pl-6 pr-3 py-1.5 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors",value:v.unitPriceTotalAmount,onChange:A=>z("unitPriceTotalAmount",parseFloat(A.target.value)||0)})]}),n.jsxs("select",{className:"px-3 py-1.5 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors min-w-[120px]",value:v.unitPriceTotalAmountMetric,onChange:A=>z("unitPriceTotalAmountMetric",A.target.value),children:[n.jsx("option",{value:"",disabled:!0,children:"Select unit"}),Object.entries(S).map(([A,q])=>n.jsx("optgroup",{label:A.charAt(0).toUpperCase()+A.slice(1),children:q.map(I=>n.jsx("option",{value:I,children:I},I))},A))]})]}):n.jsxs("p",{className:"text-sm text-gray-900",children:["$",y.unitPriceTotalAmount?.toFixed(2)||"N/A"," per ",y.unitPriceTotalAmountMetric||"item"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Unit Price Base Measure"}),x.pricing?n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"number",className:"flex-1 px-3 py-1.5 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors",value:v.unitPriceBaseMeasure,onChange:A=>z("unitPriceBaseMeasure",parseFloat(A.target.value)||0)}),n.jsxs("select",{className:"px-3 py-1.5 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors min-w-[120px] disabled:bg-gray-50 disabled:cursor-not-allowed",value:v.unitPriceBaseMeasureMetric,onChange:A=>z("unitPriceBaseMeasureMetric",A.target.value),disabled:!v.unitPriceTotalAmountMetric,children:[n.jsx("option",{value:"",disabled:!0,children:v.unitPriceTotalAmountMetric?"Select unit":"Select total unit first"}),k().map(A=>n.jsx("option",{value:A,children:A},A))]})]}):n.jsxs("p",{className:"text-sm text-gray-900",children:[y.unitPriceBaseMeasure||"N/A"," ",y.unitPriceBaseMeasureMetric||"item"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Charge Tax"}),x.pricing?n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsxs("div",{className:"relative inline-block w-10 h-5",children:[n.jsx("input",{type:"checkbox",checked:v.chargeTax,onChange:A=>z("chargeTax",A.target.checked),className:"sr-only peer"}),n.jsx("div",{className:"w-10 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-gray-400 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-gray-900"})]}),n.jsx("span",{className:"text-sm text-gray-900",children:v.chargeTax?"Yes":"No"})]}):n.jsx("p",{className:"text-sm text-gray-900",children:y.chargeTax?"Yes":"No"})]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Inventory & Status"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Inventory Tracking"}),n.jsx("p",{className:"text-sm text-gray-900",children:y.isInventoryTrackingEnabled?"Enabled":"Disabled"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Artificial Variant"}),n.jsx("p",{className:"text-sm text-gray-900",children:y.isSynthetic?"Yes":"No"})]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Option Values"}),n.jsx("div",{className:"flex gap-2 flex-wrap",children:Object.entries(y.optionValues||{}).map(([A,q])=>n.jsxs("span",{className:"px-2.5 py-1 rounded text-xs font-medium border border-gray-200 text-gray-700",children:[A,": ",q]},`${A}-${q}`))})]}),n.jsxs("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Images"}),x.images?n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{onClick:()=>V("images"),className:"p-1 text-gray-700 hover:bg-gray-50 rounded transition-colors",children:n.jsx(zc,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>W("images"),className:"p-1 text-gray-700 hover:bg-gray-50 rounded transition-colors",children:n.jsx(xs,{className:"w-4 h-4"})})]}):n.jsx("button",{onClick:()=>H("images"),className:"p-1 text-gray-600 hover:bg-gray-50 rounded transition-colors",children:n.jsx(oi,{className:"w-4 h-4"})})]}),x.images?n.jsxs("div",{children:[n.jsxs("button",{onClick:P,className:"border border-gray-200 text-gray-700 px-3 py-1.5 rounded text-sm font-medium hover:bg-gray-50 transition-colors flex items-center gap-1.5 mb-4",children:[n.jsx(na,{className:"w-4 h-4"}),"Add Image"]}),v.images.length>0?n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:v.images.map((A,q)=>n.jsxs("div",{className:"border border-gray-200 rounded p-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-3",children:[n.jsxs("p",{className:"text-xs text-gray-600",children:["Image ",q+1]}),n.jsx("button",{onClick:()=>F(q),className:"p-1 text-gray-600 hover:bg-gray-50 rounded transition-colors",children:n.jsx(Vs,{className:"w-4 h-4"})})]}),n.jsx("input",{type:"text",className:"w-full px-3 py-1.5 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors mb-3",placeholder:"Enter image URL",value:A,onChange:I=>R(q,I.target.value)}),A.trim()?n.jsx("img",{src:A,alt:`Preview ${q+1}`,className:"w-full h-36 object-cover rounded border border-gray-200",onError:I=>{I.currentTarget.style.display="none"}}):n.jsx("div",{className:"w-full h-36 border-2 border-dashed border-gray-300 rounded flex items-center justify-center text-gray-500",children:n.jsx("p",{className:"text-sm",children:"No image preview"})})]},q))}):n.jsx("div",{className:"text-center py-6",children:n.jsx("p",{className:"text-sm text-gray-600",children:'No images added yet. Click "Add Image" to get started.'})})]}):n.jsx("div",{children:y.images&&y.images.length>0?n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:y.images.map((A,q)=>n.jsx("div",{children:n.jsx("img",{src:A,alt:`Variant image ${q+1}`,className:"w-full h-40 object-cover rounded border border-gray-200",onError:I=>{I.currentTarget.style.display="none"}})},q))}):n.jsx("div",{className:"text-center py-6",children:n.jsx("p",{className:"text-sm text-gray-600",children:"No images for this variant yet."})})})]}),v.isPhysicalProduct&&n.jsxs("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Shipping Information"}),x.package?n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{onClick:()=>V("package"),className:"p-1 text-gray-700 hover:bg-gray-50 rounded transition-colors",children:n.jsx(zc,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>W("package"),className:"p-1 text-gray-700 hover:bg-gray-50 rounded transition-colors",children:n.jsx(xs,{className:"w-4 h-4"})})]}):n.jsx("button",{onClick:()=>H("package"),className:"p-1 text-gray-600 hover:bg-gray-50 rounded transition-colors",children:n.jsx(oi,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Package"}),x.package?n.jsxs("select",{className:"w-full px-3 py-1.5 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors",value:v.packageId||y.package?._id||"",onChange:A=>z("packageId",A.target.value),children:[n.jsx("option",{value:"",children:"No Package"}),l.map(A=>n.jsxs("option",{value:A._id,children:[A.packageName," (",A.packageType,") - ",A.length,"",A.width,"",A.height," ",A.dimensionsUnit]},A._id))]}):n.jsx("p",{className:"text-sm text-gray-900",children:y.package?`${y.package.packageName} (${y.package.packageType}) - ${y.package.length}${y.package.width}${y.package.height} ${y.package.dimensionsUnit}`:"No Package"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Country of Origin"}),x.package?n.jsx("input",{type:"text",className:"w-full px-3 py-1.5 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors",value:v.countryOfOrigin,onChange:A=>z("countryOfOrigin",A.target.value)}):n.jsx("p",{className:"text-sm text-gray-900",children:y.countryOfOrigin||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"HS Code"}),x.package?n.jsx("input",{type:"text",className:"w-full px-3 py-1.5 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors",value:v.hsCode,onChange:A=>z("hsCode",A.target.value)}):n.jsx("p",{className:"text-sm text-gray-900",children:y.hsCode||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Product Weight"}),x.package?n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"number",className:"flex-1 px-3 py-1.5 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors",value:v.weightValue,onChange:A=>z("weightValue",parseFloat(A.target.value)||0)}),n.jsxs("select",{className:"px-3 py-1.5 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors min-w-[80px]",value:v.weightUnit,onChange:A=>z("weightUnit",A.target.value),children:[n.jsx("option",{value:"kg",children:"kg"}),n.jsx("option",{value:"g",children:"g"}),n.jsx("option",{value:"lb",children:"lb"}),n.jsx("option",{value:"oz",children:"oz"})]})]}):n.jsxs("p",{className:"text-sm text-gray-900",children:[y.weightValue," ",y.weightUnit]})]})]})]})]}),n.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[n.jsxs("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Variant ID & References"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Variant ID"}),n.jsx("p",{className:"text-xs font-mono text-gray-900",children:y._id})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Product ID"}),n.jsx("p",{className:"text-xs font-mono text-gray-900",children:y.productId})]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Status & Flags"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Inventory Tracking"}),n.jsx("p",{className:"text-sm text-gray-900",children:y.isInventoryTrackingEnabled?"Enabled":"Disabled"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Artificial Variant"}),n.jsx("p",{className:"text-sm text-gray-900",children:y.isSynthetic?"Yes":"No"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Continue Selling When Out of Stock"}),n.jsx("p",{className:"text-sm text-gray-900",children:y.outOfStockContinueSelling?"Yes":"No"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Charge Tax"}),n.jsx("p",{className:"text-sm text-gray-900",children:y.chargeTax?"Yes":"No"})]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Financial Summary"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Selling Price"}),n.jsxs("p",{className:"text-base font-medium text-gray-900",children:["$",y.price.toFixed(2)]})]}),y.compareAtPrice&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Compare At Price"}),n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["$",y.compareAtPrice.toFixed(2)]})]}),y.cost&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Cost"}),n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["$",y.cost.toFixed(2)]})]}),y.profit&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Profit"}),n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["$",y.profit.toFixed(2)]})]}),y.marginPercent&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Margin"}),n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[y.marginPercent.toFixed(2),"%"]})]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Timeline"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Created"}),n.jsx("p",{className:"text-sm text-gray-900",children:new Date(y.createdAt).toLocaleDateString()}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:new Date(y.createdAt).toLocaleTimeString()})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:"Last Updated"}),n.jsx("p",{className:"text-sm text-gray-900",children:new Date(y.updatedAt).toLocaleDateString()}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:new Date(y.updatedAt).toLocaleTimeString()})]})]})]})]})]})]})})}):n.jsx(pr,{children:n.jsx(Cte,{productId:a})}):n.jsx(pr,{children:n.jsx(CP,{})})},kP=f.createContext(void 0),Nte=()=>{const a=f.useContext(kP);if(!a)throw new Error("useInventoryLevels must be used within InventoryLevelsProvider");return a},kte=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async y=>{try{s(!0),i(null);const{data:x}=await Ke.get(`/inventory-levels/location/${y}`);if(x?.success)e(x.data);else throw new Error(x?.message||"Failed to fetch inventory levels")}catch(x){const b=x?.response?.data?.message||x?.message||"Failed to fetch inventory levels";i(b)}finally{s(!1)}},[]),c=f.useCallback(async(y,x)=>{try{s(!0),i(null);const{data:b}=await Ke.put(`/inventory-levels/${y}`,x);if(b?.success){const v=b.data;e(j=>j.map(S=>S._id===v._id?v:S))}else throw new Error(b?.message||"Failed to update inventory level")}catch(b){const v=b?.response?.data?.message||b?.message||"Failed to update inventory level";i(v)}finally{s(!1)}},[]),m={inventoryLevels:r,loading:t,error:o,fetchByLocation:l,updateById:c,clear:()=>e([]),clearError:()=>i(null)};return n.jsx(kP.Provider,{value:m,children:a})},_te=()=>{const{activeStoreId:a}=fn(),{locations:r,fetchLocationsByStoreId:e}=mp(),{inventoryLevels:t,fetchByLocation:s,updateById:o,loading:i}=Nte(),[l,c]=f.useState(""),[d,h]=f.useState(""),[m,y]=f.useState(null),[x,b]=f.useState(null),[v,j]=f.useState(null),[S,k]=f.useState(!1),[N,P]=f.useState(null),[R,F]=f.useState(0),[z,H]=f.useState(!1),[V,W]=f.useState(null),[Z,A]=f.useState(0),[q,I]=f.useState(!1);f.useEffect(()=>{a&&e(a)},[a,e]),f.useEffect(()=>{l&&s(l)},[l,s]),f.useEffect(()=>{if(!l&&r&&r.length>0){const we=r.find(Oe=>Oe.isDefault)||r[0];we?._id&&c(we._id)}},[r,l]);const K=f.useMemo(()=>{if(!d.trim())return t;const we=d.toLowerCase();return t.filter(Oe=>Oe.variantId.sku.toLowerCase().includes(we)||(Oe.variantId.productId.title||"").toLowerCase().includes(we))},[d,t]),D=f.useCallback(we=>{c(we)},[]),Q=f.useCallback(()=>{l&&s(l)},[l,s]),oe=f.useCallback((we,Oe)=>{y(we.currentTarget),b(Oe);const ze=t.find(We=>We._id===Oe);j(ze?{...ze.unavailable}:{damaged:0,qualityControl:0,safetyStock:0,other:0})},[t]),re=f.useCallback(()=>{y(null),b(null),j(null)},[]),Te=f.useCallback((we,Oe)=>{const ze=Math.max(0,Number(Oe)||0);j(We=>We&&{...We,[we]:ze})},[]),G=f.useCallback(async()=>{if(!(!x||!v))try{k(!0);const we=t.find(Pt=>Pt._id===x),Oe=we?.committed??0,ze=we?.onHand??0,We=(v.damaged||0)+(v.qualityControl||0)+(v.safetyStock||0)+(v.other||0),pt=Math.max(0,ze-Oe-We);await o(x,{unavailable:v,available:pt}),re()}finally{k(!1)}},[x,v,t,o,re]),Y=f.useCallback((we,Oe)=>{P(we),F(Oe??0)},[]),Se=f.useCallback(()=>{P(null)},[]),fe=f.useCallback(async()=>{if(N)try{H(!0);const we=t.find(ee=>ee._id===N),Oe=we?.committed??0,ze=we?.unavailable||{damaged:0,qualityControl:0,safetyStock:0,other:0},We=(ze.damaged||0)+(ze.qualityControl||0)+(ze.safetyStock||0)+(ze.other||0),pt=Math.max(0,R||0),Pt=Math.max(0,pt+Oe+We);await o(N,{available:pt,onHand:Pt}),P(null)}finally{H(!1)}},[N,R,t,o]),Ee=f.useCallback((we,Oe)=>{W(we),A(Oe??0)},[]),Ae=f.useCallback(()=>{W(null)},[]),qe=f.useCallback(async()=>{if(V)try{I(!0);const we=t.find(ee=>ee._id===V),Oe=we?.committed??0,ze=we?.unavailable||{damaged:0,qualityControl:0,safetyStock:0,other:0},We=(ze.damaged||0)+(ze.qualityControl||0)+(ze.safetyStock||0)+(ze.other||0),pt=Math.max(0,Z||0),Pt=Math.max(0,pt-Oe-We);await o(V,{onHand:pt,available:Pt}),W(null)}finally{I(!1)}},[V,Z,t,o]);return n.jsx(pr,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-4",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Xc,{className:"w-5 h-5 text-gray-600"}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Inventory"})]}),n.jsx("div",{className:"flex gap-2",children:n.jsxs("button",{className:"px-3 py-1.5 border border-gray-200 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5 text-sm font-medium text-gray-700 transition-colors",onClick:Q,disabled:!l||i,children:[n.jsx(Hu,{className:"w-4 h-4"}),"Refresh"]})})]})})}),n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsxs("div",{className:"bg-white border border-gray-200 rounded p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Inventory by Location"}),n.jsx("div",{className:"flex gap-4 mb-4 items-center",children:n.jsxs("div",{className:"min-w-[200px]",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Location"}),n.jsxs("select",{value:l,onChange:we=>D(we.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors",children:[n.jsx("option",{value:"",children:"Select a location"}),r.map(we=>n.jsxs("option",{value:we._id,children:[we.name," - ",we.city,", ",we.state]},we._id))]})]})}),l&&n.jsxs("div",{className:"flex gap-2 mb-4",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:n.jsx(Ro,{className:"h-4 w-4 text-gray-400"})}),n.jsx("input",{type:"text",placeholder:"Search by SKU or product title...",value:d,onChange:we=>h(we.target.value),className:"w-full pl-9 pr-3 py-2 border border-gray-200 rounded text-base focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsx("button",{className:"p-2 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:n.jsx($h,{className:"w-4 h-4 text-gray-600"})})]}),l?i?n.jsx("div",{className:"text-center py-6",children:n.jsx("p",{className:"text-sm text-gray-600",children:"Loading inventory..."})}):K.length>0?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Product"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"SKU"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Unavailable"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Committed"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Incoming"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"Available"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:"On Hand"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:K.map(we=>{const Oe=we.unavailable.damaged+we.unavailable.qualityControl+we.unavailable.safetyStock+we.unavailable.other,ze=Object.values(we.variantId.optionValues||{}).join(" / ");return n.jsxs("tr",{className:"hover:bg-gray-50 group",children:[n.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("img",{src:we.variantId.productId.imageUrl||void 0,alt:we.variantId.productId.title,className:"w-6 h-6 rounded-full object-cover bg-gray-200",onError:We=>{We.target.style.display="none"}}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:we.variantId.productId.title}),n.jsx("p",{className:"text-xs text-gray-600",children:ze})]})]})}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:n.jsx("span",{className:"text-sm font-medium text-gray-700",children:we.variantId.sku})}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:n.jsxs("div",{className:"inline-flex items-center gap-1 relative",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:Oe}),n.jsx("button",{"aria-label":"unavailable details",onClick:We=>oe(We,we._id),className:"ml-1 opacity-0 group-hover:opacity-100 p-1 hover:bg-gray-200 rounded transition-colors",children:n.jsx($h,{className:"w-3.5 h-3.5 text-gray-600"})})]})}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:n.jsx("span",{className:"text-sm font-medium text-gray-700",children:we.committed})}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:n.jsx("span",{className:"text-sm font-medium text-gray-700",children:we.incoming??0})}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:N===we._id?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"number",min:"0",value:R,onChange:We=>F(Number(We.target.value)||0),className:"w-20 px-2 py-1 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"}),n.jsx("button",{className:"px-2 py-1 text-xs border border-gray-200 rounded hover:bg-gray-50 disabled:opacity-50 transition-colors",onClick:Se,disabled:z,children:"Cancel"}),n.jsx("button",{className:"px-2 py-1 text-xs bg-gray-900 text-white rounded hover:bg-gray-800 disabled:opacity-50 transition-colors",onClick:fe,disabled:z,children:z?"Saving...":"Save"})]}):n.jsxs("div",{className:"inline-flex items-center gap-2",children:[n.jsx("span",{className:`px-1.5 py-0.5 text-xs font-medium rounded ${we.available>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:we.available}),n.jsx("button",{className:"text-xs text-gray-600 hover:text-gray-900 transition-colors",onClick:()=>Y(we._id,we.available),children:"Edit"})]})}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:V===we._id?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"number",min:"0",value:Z,onChange:We=>A(Number(We.target.value)||0),className:"w-20 px-2 py-1 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"}),n.jsx("button",{className:"px-2 py-1 text-xs border border-gray-200 rounded hover:bg-gray-50 disabled:opacity-50 transition-colors",onClick:Ae,disabled:q,children:"Cancel"}),n.jsx("button",{className:"px-2 py-1 text-xs bg-gray-900 text-white rounded hover:bg-gray-800 disabled:opacity-50 transition-colors",onClick:qe,disabled:q,children:q?"Saving...":"Save"})]}):n.jsxs("div",{className:"inline-flex items-center gap-2",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:we.onHand}),n.jsx("button",{className:"text-xs text-gray-600 hover:text-gray-900 transition-colors",onClick:()=>Ee(we._id,we.onHand),children:"Edit"})]})})]},we._id)})})]})}),m&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-40",onClick:re}),n.jsxs("div",{className:"fixed z-50 mt-2 bg-white border border-gray-200 rounded shadow-lg",style:{top:m.getBoundingClientRect().bottom+window.scrollY+4,left:m.getBoundingClientRect().left+window.scrollX},onClick:we=>we.stopPropagation(),children:[n.jsx("div",{className:"px-3 pt-2 pb-2",children:n.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Unavailable inventory"})}),n.jsx("div",{className:"border-t border-gray-200"}),v&&n.jsxs("div",{className:"min-w-[240px] py-2",children:[n.jsxs("div",{className:"px-3 py-2 flex items-center justify-between gap-4 hover:bg-gray-50 transition-colors",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Damaged"}),n.jsx("input",{type:"number",min:"0",value:v.damaged,onChange:we=>Te("damaged",we.target.value),className:"w-20 px-2 py-1 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{className:"px-3 py-2 flex items-center justify-between gap-4 hover:bg-gray-50 transition-colors",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Quality Control"}),n.jsx("input",{type:"number",min:"0",value:v.qualityControl,onChange:we=>Te("qualityControl",we.target.value),className:"w-20 px-2 py-1 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{className:"px-3 py-2 flex items-center justify-between gap-4 hover:bg-gray-50 transition-colors",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Safety Stock"}),n.jsx("input",{type:"number",min:"0",value:v.safetyStock,onChange:we=>Te("safetyStock",we.target.value),className:"w-20 px-2 py-1 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{className:"px-3 py-2 flex items-center justify-between gap-4 hover:bg-gray-50 transition-colors",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Other"}),n.jsx("input",{type:"number",min:"0",value:v.other,onChange:we=>Te("other",we.target.value),className:"w-20 px-2 py-1 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsxs("div",{className:"flex justify-end gap-2 px-3 pb-2 pt-2",children:[n.jsx("button",{className:"px-2 py-1 text-xs border border-gray-200 rounded hover:bg-gray-50 disabled:opacity-50 transition-colors",onClick:re,disabled:S,children:"Cancel"}),n.jsx("button",{className:"px-2 py-1 text-xs bg-gray-900 text-white rounded hover:bg-gray-800 disabled:opacity-50 transition-colors",onClick:G,disabled:S,children:S?"Saving...":"Save"})]})]})]})]})]}):n.jsx("div",{className:"text-center py-6",children:n.jsx("p",{className:"text-sm text-gray-600",children:d?"No items match your search.":"No inventory found for this location."})}):n.jsxs("div",{className:"text-center py-6",children:[n.jsx(Xc,{className:"w-10 h-10 text-gray-400 mx-auto mb-3"}),n.jsx("h3",{className:"text-base font-medium text-gray-700 mb-1",children:"Select a location to view inventory"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Choose a location from the dropdown above to see inventory levels."})]})]})})]})})},Ete=()=>{const a=mr(),r=f.useCallback(()=>{a("/products/new")},[a]);return n.jsxs("div",{className:"flex flex-col items-center text-center max-w-2xl mx-auto py-8",children:[n.jsxs("div",{className:"relative w-64 h-40 mb-6",children:[n.jsx("div",{className:"absolute top-0 right-4 w-16 h-10 bg-blue-600 rounded-lg transform -rotate-12"}),n.jsx("div",{className:"absolute top-4 right-0 w-8 h-16 bg-green-500 rounded"}),n.jsx("div",{className:"absolute bottom-8 right-10 w-12 h-6 bg-yellow-500 rounded transform rotate-6"}),n.jsxs("div",{className:"absolute bottom-4 right-0 w-14 h-5 flex items-center gap-1 transform -rotate-12",children:[n.jsx("div",{className:"w-6 h-4 bg-gray-800 rounded-full"}),n.jsx("div",{className:"w-1 h-1 bg-gray-800 rounded"}),n.jsx("div",{className:"w-6 h-4 bg-gray-800 rounded-full"})]})]}),n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-1.5",children:"Add your products"}),n.jsx("p",{className:"mb-6 text-sm text-gray-600",children:"Start by stocking your store with products your customers will love"}),n.jsxs("div",{className:"flex gap-2 mb-8",children:[n.jsxs("button",{onClick:r,className:"flex items-center gap-1.5 px-4 py-2 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 transition-colors",children:[n.jsx(na,{className:"w-4 h-4"}),"Add product"]}),n.jsxs("button",{className:"flex items-center gap-1.5 px-4 py-2 border border-gray-200 text-gray-700 text-sm font-medium rounded hover:bg-gray-50 transition-colors",children:[n.jsx(PL,{className:"w-4 h-4"}),"Import"]})]}),n.jsx("div",{className:"w-full border-t border-gray-200 my-6"}),n.jsx("h3",{className:"text-base font-medium text-gray-900 mb-1.5",children:"Find products to sell"}),n.jsx("p",{className:"mb-6 text-sm text-gray-600 max-w-lg",children:"Have dropshipping or print on demand products shipped directly from the supplier to your customer, and only pay for what you sell."}),n.jsx("button",{className:"px-4 py-2 border border-gray-200 text-gray-700 text-sm font-medium rounded hover:bg-gray-50 transition-colors",children:"Browse product sourcing apps"})]})},Tte=()=>n.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-3",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"px-2.5 py-1 bg-gray-50 border border-gray-200 rounded text-xs font-medium text-gray-900",children:"All"}),n.jsx("button",{className:"p-1 text-gray-600 hover:bg-gray-50 rounded transition-colors",children:n.jsx(na,{className:"w-3.5 h-3.5"})})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Ro,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search products",className:"pl-9 pr-3 py-1.5 border border-gray-200 rounded text-sm w-[280px] focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),n.jsx("button",{className:"p-1 text-gray-600 hover:bg-gray-50 rounded transition-colors",children:n.jsx($h,{className:"w-4 h-4"})}),n.jsx("button",{className:"p-1 text-gray-600 hover:bg-gray-50 rounded transition-colors",children:n.jsx(vS,{className:"w-4 h-4"})})]})]})}),Ote=()=>{const a=mr(),r=f.useCallback(()=>{a("/products/new")},[a]);return n.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Xc,{className:"w-5 h-5 text-gray-600"}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Products"})]}),n.jsxs("button",{onClick:r,className:"flex items-center gap-1.5 px-3 py-1.5 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 transition-colors",children:[n.jsx(na,{className:"w-4 h-4"}),"Add Product"]})]})})},Pte=({product:a,onRowClick:r})=>{const e=f.useCallback(()=>{r(a._id)},[a._id,r]);return n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:e,children:[n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium text-gray-900",children:a.title}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-600",children:a.category&&typeof a.category=="object"?a.category.name:a.category}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-600",children:a.price}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-600",children:a.sku}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-600 capitalize",children:a.status}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-600",children:typeof a.quantity=="number"?a.quantity:0}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-600",children:new Date(a.updatedAt).toLocaleString()})]})},Ate=({products:a})=>{const r=mr(),[e,t]=f.useState(null),[s,o]=f.useState("asc"),i=f.useCallback(d=>{r(`/products/${d}`)},[r]),l=f.useCallback(d=>{e===d?o(h=>h==="asc"?"desc":"asc"):(t(d),o("asc"))},[e]),c=f.useMemo(()=>e?[...a].sort((d,h)=>{let m,y;return e==="price"?(m=d.price,y=h.price):e==="quantity"?(m=typeof d.quantity=="number"?d.quantity:0,y=typeof h.quantity=="number"?h.quantity:0):(m=new Date(d.updatedAt).getTime(),y=new Date(h.updatedAt).getTime()),m<y?s==="asc"?-1:1:m>y?s==="asc"?1:-1:0}):a,[a,e,s]);return n.jsx("div",{className:"bg-white rounded-lg border border-gray-200",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-600",children:"Title"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-600",children:"Category"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-600 cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>l("price"),children:n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("span",{children:"Price"}),e==="price"&&(s==="asc"?n.jsx(Ih,{className:"w-3.5 h-3.5 text-gray-900"}):n.jsx(Mh,{className:"w-3.5 h-3.5 text-gray-900"}))]})}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-600",children:"SKU"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-600",children:"Status"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-600 cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>l("quantity"),children:n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("span",{children:"Qty"}),e==="quantity"&&(s==="asc"?n.jsx(Ih,{className:"w-3.5 h-3.5 text-gray-900"}):n.jsx(Mh,{className:"w-3.5 h-3.5 text-gray-900"}))]})}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-600 cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>l("updatedAt"),children:n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("span",{children:"Updated"}),e==="updatedAt"&&(s==="asc"?n.jsx(Ih,{className:"w-3.5 h-3.5 text-gray-900"}):n.jsx(Mh,{className:"w-3.5 h-3.5 text-gray-900"}))]})})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(d=>n.jsx(Pte,{product:d,onRowClick:i},d._id))})]})})})},Mte=()=>{const{products:a,fetchProductsByStoreId:r}=dc(),{activeStoreId:e}=fn();return f.useEffect(()=>{e&&r(e)},[e,r]),n.jsx(pr,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx(Ote,{}),n.jsx(Tte,{}),n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:!a||a.length===0?n.jsx(Ete,{}):n.jsx(Ate,{products:a})})]})})},_P=f.createContext(void 0);function Ite({children:a}){const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async h=>{s(!0),i(null);try{const{data:m}=await Ke.get(`/purchase-order-entries/purchase-order/${h}`);e(m.data)}catch(m){const y=m?.response?.data?.message||"Failed to fetch purchase order entries";throw i(y),m}finally{s(!1)}},[]),c=f.useCallback(()=>{e([]),i(null),s(!1)},[]),d=f.useMemo(()=>({entries:r,loading:t,error:o,fetchEntriesByPurchaseOrderId:l,clearEntries:c}),[r,t,o,l,c]);return n.jsx(_P.Provider,{value:d,children:a})}function EP(){const a=f.useContext(_P);if(!a)throw new Error("usePurchaseOrderEntries must be used within a PurchaseOrderEntryProvider");return a}function Rte(){const{id:a}=qa(),r=mr(),{purchaseOrders:e,markAsOrdered:t}=Bb(),s=f.useMemo(()=>e.find(S=>S._id===a)||null,[e,a]),{entries:o,fetchEntriesByPurchaseOrderId:i,loading:l,error:c,clearEntries:d}=EP(),[h,m]=f.useState(!1),[y,x]=f.useState(!1),b=f.useRef(null);f.useEffect(()=>{const S=k=>{b.current&&!b.current.contains(k.target)&&m(!1)};return h&&document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[h]),f.useEffect(()=>{if(s?._id)return i(s._id).catch(()=>{}),()=>{d()}},[s?._id]);const v=f.useMemo(()=>s?typeof s.supplierId=="string"?s.supplierId:s.supplierId?.name||s.supplierId?._id:"-",[s]),j=f.useMemo(()=>s?typeof s.destinationLocationId=="string"?s.destinationLocationId:s.destinationLocationId?.name||s.destinationLocationId?._id:"-",[s]);return n.jsx(pr,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs("button",{onClick:()=>r("/products/purchase-orders"),className:"text-sm text-gray-600 hover:text-gray-900 transition-colors",children:[n.jsx(Hn,{className:"w-4 h-4 inline mr-1"}),"Purchase Orders"]})})})}),n.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[!s&&n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Purchase order not found in current view. Go back to the list and select one."}),n.jsx("button",{onClick:()=>r("/products/purchase-orders"),className:"w-fit px-3 py-1.5 text-sm font-medium border border-gray-200 hover:bg-gray-50 transition-colors",children:"Back to Purchase Orders"})]}),s&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Purchase Order Details"}),n.jsx("span",{className:`px-2 py-0.5 text-xs font-medium ${s.status==="ordered"?"bg-gray-900 text-white":"bg-gray-100 text-gray-700"}`,children:(s.status||"draft").replaceAll("_"," ")})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[s.status==="draft"&&n.jsx("button",{onClick:()=>x(!0),className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Mark as ordered"}),s.status!=="draft"&&n.jsx("button",{onClick:()=>r(`/products/purchase-orders/${s._id}/receive`),className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Receive Inventory"}),s.status==="draft"&&n.jsxs("div",{className:"relative",ref:b,children:[n.jsxs("button",{onClick:()=>m(!h),className:"px-3 py-1.5 text-sm font-medium border border-gray-200 hover:bg-gray-50 transition-colors flex items-center gap-1",children:["More actions",n.jsx(Is,{className:"w-4 h-4"})]}),h&&n.jsx("div",{className:"absolute right-0 mt-1 w-48 bg-white border border-gray-200 shadow-lg z-10",children:n.jsx("button",{onClick:()=>m(!1),className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-50 transition-colors",children:"Delete"})})]})]})]}),y&&n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-2",children:"Mark as ordered"}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"After marking as ordered, you will be able to receive incoming inventory from your supplier. The purchase order can't be turned into a draft again."}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{onClick:()=>x(!1),className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:async()=>{s&&(await t(s._id),x(!1))},className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Mark as ordered"})]})]}),n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Supplier"}),n.jsx("p",{className:"text-sm text-gray-900",children:v})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Destination"}),n.jsx("p",{className:"text-sm text-gray-900",children:j})]})]}),n.jsx("div",{className:"border-t border-gray-200 my-3"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Payment Terms"}),n.jsx("p",{className:"text-sm text-gray-900",children:s.paymentTerm||"-"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Supplier Currency"}),n.jsx("p",{className:"text-sm text-gray-900",children:s.supplierCurrency||"-"})]})]})]}),n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Shipment Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Estimated Arrival"}),n.jsx("p",{className:"text-sm text-gray-900",children:s.expectedArrivalDate?new Date(s.expectedArrivalDate).toLocaleDateString():"-"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Shipping Carrier"}),n.jsx("p",{className:"text-sm text-gray-900",children:s.shippingCarrier||"-"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Tracking Number"}),n.jsx("p",{className:"text-sm text-gray-900",children:s.trackingNumber||"-"})]})]})]}),n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Products"}),c&&n.jsx("p",{className:"text-sm text-red-600 mb-2",children:c}),n.jsx("div",{className:"border border-gray-200 overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-white",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Product"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Supplier SKU"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"RSKU"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Quantity"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Cost"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Tax %"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Total"})]})}),n.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[o.map(S=>{const k=S.variantId,N=k?.productId?.title||"-",P=k?.optionValues?Object.values(k.optionValues).join(" / "):"";return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-2",children:n.jsxs("div",{className:"space-y-0.5",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:N}),P&&n.jsx("p",{className:"text-xs text-gray-600",children:P}),n.jsxs("p",{className:"text-xs text-gray-600",children:["SKU: ",k?.sku||"-"]})]})}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:S.supplierSku||"-"}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:k?.sku||"-"}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 text-right",children:S.quantityOrdered}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 text-right",children:S.cost.toFixed(2)}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 text-right",children:(S.taxPercent??0).toFixed(0)}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 text-right",children:S.totalCost.toFixed(2)})]},S._id)}),!l&&o.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-sm text-gray-600",children:"No products"})})]})]})})})]}),n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Additional Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Reference Number"}),n.jsx("p",{className:"text-sm text-gray-900",children:s.referenceNumber||"-"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Note to Supplier"}),n.jsx("p",{className:"text-sm text-gray-900",children:s.noteToSupplier||"-"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Tax"}),n.jsx("p",{className:"text-sm text-gray-900",children:s.totalTax?.toFixed(2)??"-"})]})]})]}),n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Cost Summary"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"PO ID"}),n.jsx("p",{className:"text-sm text-gray-900",children:s._id})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Status"}),n.jsx("p",{className:"text-sm text-gray-900 capitalize",children:s.status.replaceAll("_"," ")})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Expected Arrival"}),n.jsx("p",{className:"text-sm text-gray-900",children:s.expectedArrivalDate?new Date(s.expectedArrivalDate).toLocaleDateString():"-"})]})]}),n.jsx("div",{className:"border-t border-gray-200 my-3"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Subtotal"}),n.jsx("p",{className:"text-sm text-gray-900",children:s.subtotalCost?.toFixed(2)??"-"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Taxes"}),n.jsx("p",{className:"text-sm text-gray-900",children:s.totalTax?.toFixed(2)??"-"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Total"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.totalCost?.toFixed(2)??"-"})]})]}),n.jsx("div",{className:"border-t border-gray-200 my-3"}),n.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Cost Adjustments"}),n.jsxs("div",{className:"space-y-1",children:[(s.costAdjustments??[]).length===0&&n.jsx("p",{className:"text-sm text-gray-600",children:"No adjustments"}),(s.costAdjustments??[]).map((S,k)=>n.jsxs("div",{className:"flex justify-between",children:[n.jsx("p",{className:"text-sm text-gray-900 capitalize",children:S.name}),n.jsxs("p",{className:"text-sm text-gray-900",children:[S.amount.toFixed(2),S.currency?` ${S.currency}`:""]})]},k))]}),n.jsx("div",{className:"border-t border-gray-200 my-3"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Converted Total"}),n.jsxs("p",{className:"text-sm text-gray-900",children:[s.totalCost?.toFixed(2)," ",s.supplierCurrency||""]})]})})]}),n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Timeline"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("textarea",{className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 resize-y min-h-[100px]",placeholder:"Leave a comment..."}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Post"})})]})]})]})]})]})})}const Lte=({productImage:a,productTitle:r})=>n.jsx("tr",{className:"bg-white",children:n.jsx("td",{colSpan:2,className:"px-4 py-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[a?n.jsx("img",{src:a,alt:r||"Product",className:"w-8 h-8 object-cover"}):n.jsx("div",{className:"w-8 h-8 bg-gray-200"}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:r||"Unnamed product"})]})})}),Dte=({variantId:a,variant:r,isSelected:e,onToggle:t})=>{const s=(()=>{const i=r.optionValues||{};return Object.values(i).map(c=>String(c)).join(" / ")})(),o=typeof r.availability=="number"?r.availability:0;return n.jsxs("tr",{onClick:()=>t(a),className:`cursor-pointer hover:bg-gray-50 ${e?"bg-gray-100":""}`,children:[n.jsx("td",{className:"px-4 py-2",children:n.jsx("span",{className:"text-sm text-gray-900",children:s})}),n.jsx("td",{className:"px-4 py-2 text-right text-sm text-gray-900",children:o})]},`var-${a}`)},Fte=({productId:a,productImage:r,productTitle:e,variants:t,selectedVariantIds:s,onVariantToggle:o})=>n.jsxs(gr.Fragment,{children:[n.jsx(Lte,{productImage:r,productTitle:e}),(t||[]).map(i=>n.jsx(Dte,{variantId:String(i._id),variant:i,isSelected:s.has(String(i._id)),onToggle:o},`var-${i._id}`))]},`prod-${a}`),Bte=({results:a,selectedVariantIds:r,onVariantToggle:e})=>n.jsx(n.Fragment,{children:a.map(t=>n.jsx(Fte,{productId:t.product?._id,productImage:t.product?.imageUrls?.[0],productTitle:t.product?.title||"Unnamed product",variants:t.variants||[],selectedVariantIds:r,onVariantToggle:e},`prod-${t.product?._id}`))}),zte=({searching:a,results:r,selectedVariantIds:e,onVariantToggle:t})=>n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-white",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Product / Variant"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Availability"})]})}),n.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[a&&n.jsx("tr",{children:n.jsx("td",{colSpan:2,className:"px-4 py-2 text-sm text-gray-600",children:"Searching..."})}),!a&&r.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:2,className:"px-4 py-2 text-sm text-gray-600",children:"No results"})}),!a&&n.jsx(Bte,{results:r,selectedVariantIds:e,onVariantToggle:t})]})]}),Ute=({item:a,index:r,onSupplierSkuChange:e,onQtyChange:t,onCostChange:s,onTaxPctChange:o,onRemove:i})=>{const l=(a.qty||0)*(a.cost||0)*(1+(a.taxPct||0)/100);return n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[a.productImage?n.jsx("img",{src:a.productImage,alt:a.productTitle,className:"w-8 h-8 object-cover"}):n.jsx("div",{className:"w-8 h-8 bg-gray-200"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:a.productTitle}),n.jsxs("div",{className:"text-xs text-gray-600",children:[a.variantLabel,"  ",a.variantSku||"-"]})]})]})}),n.jsx("td",{className:"px-4 py-2",children:n.jsx("input",{type:"text",placeholder:"Supplier SKU",value:a.supplierSku,onChange:c=>e(r,c.target.value),className:"px-2 py-1 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})}),n.jsx("td",{className:"px-4 py-2 text-right",children:n.jsx("input",{type:"number",min:1,value:a.qty,onChange:c=>t(r,Number(c.target.value)||1),className:"w-[90px] px-2 py-1 text-sm border border-gray-200 text-right focus:outline-none focus:ring-1 focus:ring-gray-400"})}),n.jsx("td",{className:"px-4 py-2 text-right",children:n.jsx("input",{type:"number",min:0,step:"0.01",value:a.cost,onChange:c=>s(r,Number(c.target.value)||0),className:"w-[110px] px-2 py-1 text-sm border border-gray-200 text-right focus:outline-none focus:ring-1 focus:ring-gray-400"})}),n.jsx("td",{className:"px-4 py-2 text-right",children:n.jsx("input",{type:"number",min:0,max:100,step:"0.01",value:a.taxPct,onChange:c=>o(r,Number(c.target.value)),className:"w-[100px] px-2 py-1 text-sm border border-gray-200 text-right focus:outline-none focus:ring-1 focus:ring-gray-400"})}),n.jsx("td",{className:"px-4 py-2 text-right text-sm text-gray-900",children:l.toFixed(2)}),n.jsx("td",{className:"px-4 py-2 text-right",children:n.jsx("button",{onClick:()=>i(r),className:"p-1 text-gray-600 hover:text-red-600 transition-colors","aria-label":"Remove",children:n.jsx(Vs,{className:"w-4 h-4"})})})]})},$te=({items:a,onSupplierSkuChange:r,onQtyChange:e,onCostChange:t,onTaxPctChange:s,onRemove:o})=>n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map((i,l)=>n.jsx(Ute,{item:i,index:l,onSupplierSkuChange:r,onQtyChange:e,onCostChange:t,onTaxPctChange:s,onRemove:o},i.variantId))}),Vte=({items:a,onSupplierSkuChange:r,onQtyChange:e,onCostChange:t,onTaxPctChange:s,onRemove:o})=>n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-white",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Product"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Supplier SKU"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Qty"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Cost"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Tax %"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Total"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900"})]})}),n.jsx($te,{items:a,onSupplierSkuChange:r,onQtyChange:e,onCostChange:t,onTaxPctChange:s,onRemove:o})]}),Wte=({search:a,onSearchChange:r,searching:e,results:t,selectedVariantIds:s,onVariantToggle:o,onAddSelected:i,items:l,onItemsChange:c})=>{const d=(b,v)=>{c(l.map((j,S)=>S===b?{...j,supplierSku:v}:j))},h=(b,v)=>{const j=Math.max(1,v||1);c(l.map((S,k)=>k===b?{...S,qty:j}:S))},m=(b,v)=>{const j=Math.max(0,v||0);c(l.map((S,k)=>k===b?{...S,cost:j}:S))},y=(b,v)=>{let j=v;isNaN(j)?j=0:j=Math.min(100,Math.max(0,j)),c(l.map((S,k)=>k===b?{...S,taxPct:j}:S))},x=b=>{c(l.filter((v,j)=>j!==b))};return n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Add products"}),n.jsx("input",{type:"text",placeholder:"Search products",value:a,onChange:b=>r(b.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 mb-3 focus:outline-none focus:ring-1 focus:ring-gray-400"}),n.jsx("div",{className:"flex justify-end mb-2",children:n.jsx("button",{onClick:i,disabled:s.size===0,className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:"Add selected"})}),n.jsx("div",{className:"border border-gray-200 overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsx(zte,{searching:e,results:t,selectedVariantIds:s,onVariantToggle:o})})}),l.length>0&&n.jsxs("div",{className:"mt-4",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Selected items"}),n.jsx("div",{className:"border border-gray-200 overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsx(Vte,{items:l,onSupplierSkuChange:d,onQtyChange:h,onCostChange:m,onTaxPctChange:y,onRemove:x})})})]})]})},Hte=({reference:a,onReferenceChange:r,tagIds:e,onTagIdsChange:t,note:s,onNoteChange:o,tagOptions:i,tagsLoading:l})=>n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Additional details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Reference number"}),n.jsx("input",{type:"text",value:a,onChange:c=>r(c.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]}),n.jsx("div",{className:"flex-1",children:n.jsx(Ao,{label:"Tags",value:e,options:i,onChange:t,placeholder:l?"Loading":"No tags",disabled:l&&i.length===0})})]}),n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Note to supplier"}),n.jsx("textarea",{value:s,onChange:c=>o(c.target.value),rows:3,className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]})]}),qte=({itemsCount:a,subtotal:r,taxAmount:e,adjustmentsTotal:t,adjustmentsRows:s,shippingCost:o,total:i,onManageClick:l,onCancel:c,onCreatePurchaseOrder:d,creatingPO:h,canCreate:m})=>n.jsxs("div",{className:"border border-gray-200 p-4 mb-24 bg-white/95",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Cost summary"}),n.jsx("button",{onClick:l,className:"px-3 py-1.5 text-sm font-medium border border-gray-200 hover:bg-gray-50 transition-colors",children:"Manage"})]}),n.jsxs("div",{className:"space-y-1 text-sm",children:[n.jsxs("div",{className:"text-sm text-gray-900",children:["Items: ",n.jsx("span",{className:"font-medium",children:a})]}),n.jsxs("div",{className:"text-sm text-gray-900",children:["Subtotal: ",n.jsx("span",{className:"font-medium",children:r.toFixed(2)})]}),n.jsxs("div",{className:"text-sm text-gray-900",children:["Tax: ",n.jsx("span",{className:"font-medium",children:e.toFixed(2)})]}),n.jsxs("div",{className:"text-sm text-gray-900",children:["Cost adjustments: ",n.jsx("span",{className:"font-medium",children:t.toFixed(2)})]}),s.length>0&&n.jsx("div",{className:"pl-3 space-y-0.5",children:s.map((y,x)=>{const b=y.type?y.type.replace(/_/g," "):"adjustment",v=y.type?.toLowerCase()==="discount"?-Math.abs(y.amount||0):y.amount||0;return n.jsxs("div",{className:"text-xs text-gray-600",children:[b,": ",v.toFixed(2)]},x)})}),n.jsxs("div",{className:"text-sm text-gray-900",children:["Shipping: ",n.jsx("span",{className:"font-medium",children:o.toFixed(2)})]}),n.jsx("div",{className:"border-t border-gray-200 my-2"}),n.jsxs("div",{className:"text-sm text-gray-900",children:["Total: ",n.jsx("span",{className:"font-medium",children:i.toFixed(2)})]})]}),n.jsxs("div",{className:"flex justify-end mt-4 gap-2",children:[n.jsx("button",{onClick:c,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:d,disabled:!m,className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:h?"Creating":"Create purchase order"})]})]}),Gte=({open:a,onClose:r,adjustmentsRows:e,onAdjustmentsRowsChange:t,adjustmentTypeOptions:s})=>{const o=(d,h)=>{t(e.map((m,y)=>y===d?{...m,type:h}:m))},i=(d,h)=>{const m=Number(h)||0;t(e.map((y,x)=>x===d?{...y,amount:m}:y))},l=d=>{t(e.filter((h,m)=>m!==d))},c=()=>{t([...e,{type:"discount",amount:0}])};return n.jsx(un,{open:a,onClose:r,title:"Manage cost summary",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Save"})]}),children:n.jsxs("div",{className:"space-y-3 mt-2",children:[e.map((d,h)=>n.jsxs("div",{className:"flex flex-col md:flex-row gap-3 items-center",children:[n.jsx("div",{className:"flex-1",children:n.jsx(Us,{label:"Adjustment",value:h===0?"shipping":d.type,options:s,onChange:m=>o(h,m),placeholder:"Select adjustment",disabled:h===0})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Amount"}),n.jsx("input",{type:"number",value:d.amount,onChange:m=>i(h,Number(m.target.value)),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]}),h!==0&&n.jsx("button",{onClick:()=>l(h),className:"p-1 text-gray-600 hover:text-red-600 transition-colors","aria-label":"Remove adjustment",children:n.jsx(Vs,{className:"w-4 h-4"})})]},h)),e.length<8&&n.jsx("button",{onClick:c,className:"w-full px-3 py-1.5 text-sm font-medium border border-gray-200 hover:bg-gray-50 transition-colors",children:"Add adjustment"})]})})},Kte=({eta:a,onEtaChange:r,carrier:e,onCarrierChange:t,tracking:s,onTrackingChange:o,carrierOptions:i})=>n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Shipment"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Estimated arrival"}),n.jsx("input",{type:"date",value:a,onChange:l=>r(l.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]}),n.jsx(Us,{label:"Shipping carrier",value:e,options:i,onChange:t,placeholder:"Select carrier"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Tracking number"}),n.jsx("input",{type:"text",placeholder:"Enter tracking",value:s,onChange:l=>o(l.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]})]})]}),Yte=({supplierId:a,onSupplierIdChange:r,destinationId:e,onDestinationIdChange:t,paymentTerms:s,onPaymentTermsChange:o,currency:i,onCurrencyChange:l,vendorOptions:c,locationOptions:d,paymentTermsOptions:h,currencyOptions:m})=>n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Supplier & Destination"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[n.jsx(Us,{label:"Supplier",value:a,options:c,onChange:r,placeholder:"Select supplier"}),n.jsx(Us,{label:"Destination",value:e,options:d,onChange:t,placeholder:"Select destination"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:[n.jsx(Us,{label:"Payment terms (optional)",value:s,options:h,onChange:o,placeholder:"Select payment terms"}),n.jsx(Us,{label:"Supplier currency",value:i,options:m,onChange:l,placeholder:"Select currency"})]})]}),TP=f.createContext(void 0),Zte=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),y={tags:r,loading:t,error:o,fetchTagsByStoreId:async x=>{try{s(!0),i(null);const b=await Ke.get(`/purchase-order-tags/store/${x}`);e(b.data.data)}catch(b){const v=b.response?.data?.message||b.message||"Failed to fetch purchase order tags";i(v),console.error("Error fetching purchase order tags:",b)}finally{s(!1)}},createTag:async(x,b)=>{try{s(!0),i(null);const j=(await Ke.post("/purchase-order-tags",{storeId:x,name:b.trim()})).data.data;return e(S=>[j,...S]),j}catch(v){const j=v.response?.data?.message||v.message||"Failed to create purchase order tag";throw i(j),console.error("Error creating purchase order tag:",v),v}finally{s(!1)}},deleteTag:async x=>{try{s(!0),i(null),await Ke.delete(`/purchase-order-tags/${x}`),e(b=>b.filter(v=>v._id!==x))}catch(b){const v=b.response?.data?.message||b.message||"Failed to delete purchase order tag";throw i(v),console.error("Error deleting purchase order tag:",b),b}finally{s(!1)}},clearError:()=>{i(null)},clearTags:()=>{e([])}};return n.jsx(TP.Provider,{value:y,children:a})},Xte=()=>{const a=f.useContext(TP);if(a===void 0)throw new Error("usePurchaseOrderTags must be used within a PurchaseOrderTagsProvider");return a},Qte=()=>{const[a,r]=f.useState(""),[e,t]=f.useState(""),[s,o]=f.useState(""),[i,l]=f.useState("INR"),[c,d]=f.useState(""),[h,m]=f.useState(""),[y,x]=f.useState(""),[b,v]=f.useState(""),[j,S]=f.useState([]),[k,N]=f.useState([]),[P,R]=f.useState(!1),F=f.useRef(0),z=f.useRef(k);f.useEffect(()=>{z.current=k},[k]);const[H,V]=f.useState(new Set),[W,Z]=f.useState(""),[A,q]=f.useState(""),[I,K]=f.useState([]),D=f.useMemo(()=>j.reduce((ie,_e)=>ie+_e.qty*_e.cost,0),[j]),Q=f.useMemo(()=>0,[D]),oe=0,[re,Te]=f.useState([]),[G,Y]=f.useState(!1),Se=f.useMemo(()=>re.reduce((ie,_e)=>ie+(_e.type?.toLowerCase()==="discount"?-Math.abs(_e.amount||0):_e.amount||0),0),[re]),fe=f.useMemo(()=>D+Q+oe+Se,[D,Q,oe,Se]),{activeStoreId:Ee}=fn(),{searchProductWithVariantAndDestination:Ae}=dc();f.useEffect(()=>{const ie=b.trim();if(!ie||!e){z.current.length>0&&N([]);return}const _e=++F.current,le=setTimeout(async()=>{R(!0);try{const Xe=await Ae({storeId:Ee,q:ie,destinationLocationId:e});_e===F.current&&N(Array.isArray(Xe)?Xe:Xe?.data||[])}finally{_e===F.current&&R(!1)}},400);return()=>{clearTimeout(le)}},[b,e,Ae,Ee]);const{vendors:qe,fetchVendorsByStoreId:we}=Mb(),{locations:Oe,fetchLocationsByStoreId:ze}=mp(),{tags:We,fetchTagsByStoreId:pt,loading:Pt}=Xte(),{createPurchaseOrder:ee,loading:Ne}=Bb(),Ie=mr();f.useEffect(()=>{Ee&&we?.(Ee)},[Ee,we]),f.useEffect(()=>{Ee&&ze?.(Ee)},[Ee,ze]),f.useEffect(()=>{Ee&&pt(Ee).catch(()=>{})},[Ee,pt]);const ne=f.useMemo(()=>[{value:"none",label:"None"},{value:"cash on delivery",label:"Cash on delivery"},{value:"payment on receipt",label:"Payment on receipt"},{value:"payment in advance",label:"Payment in advance"},{value:"net 7",label:"Net 7"},{value:"net 15",label:"Net 15"},{value:"net 30",label:"Net 30"},{value:"net 45",label:"Net 45"},{value:"net 60",label:"Net 60"}],[]),M=f.useMemo(()=>[{value:"INR",label:"INR"},{value:"USD",label:"USD"},{value:"EUR",label:"EUR"},{value:"GBP",label:"GBP"},{value:"JPY",label:"JPY"},{value:"AUD",label:"AUD"},{value:"CAD",label:"CAD"}],[]),U=f.useMemo(()=>["4PX-99 Minutos","Aeronet","ATS","Amazon","Amazon Logistics UK","AMM Speedreturn","AN Post","Anjun Logistics","Australia Post","Better Trucks","Bonshaw","Border Express","B Post","B Post International","Canada Post","Cargo Expresso GT","Cargo Expresso SV","Deliver It","Delivery"].map(ie=>({value:ie,label:ie})),[]),J=f.useMemo(()=>(qe||[]).map(ie=>({value:ie._id,label:ie.name||ie.title||"Unnamed vendor"})),[qe]),ce=f.useMemo(()=>(Oe||[]).map(ie=>({value:ie._id,label:ie.name})),[Oe]),ue=f.useMemo(()=>We.map(ie=>({value:ie._id,label:ie.name})),[We]),xe=f.useMemo(()=>[{value:"shipping",label:"Shipping"},{value:"discount",label:"Discount"},{value:"handling",label:"Handling"},{value:"insurance",label:"Insurance"},{value:"packaging",label:"Packaging"},{value:"surcharge",label:"Surcharge"},{value:"customs",label:"Customs"},{value:"duty",label:"Duty"},{value:"other",label:"Other"}],[]),he=f.useCallback(()=>{const ie=[],_e=new Set(H);for(const le of z.current)for(const Xe of le?.variants||[])if(_e.has(String(Xe._id))){const Fe=(()=>{const dt=Xe.optionValues||{};return Object.values(dt).map(ft=>String(ft)).join(" / ")})();ie.push({variantId:String(Xe._id),productTitle:le?.product?.title||"Unnamed product",productImage:le?.product?.imageUrls?.[0],variantLabel:Fe,variantSku:Xe.sku,supplierSku:"",qty:1,cost:0,taxPct:0})}S(le=>{const Xe=new Set(le.map(dt=>dt.variantId)),Fe=[...le];for(const dt of ie)Xe.has(dt.variantId)||Fe.push(dt);return Fe}),V(new Set)},[H]),se=f.useCallback(ie=>{V(_e=>{const le=new Set(_e),Xe=String(ie);return le.has(Xe)?le.delete(Xe):le.add(Xe),le})},[]),Le=f.useCallback(()=>{Te(ie=>{const le=ie.some(Fe=>(Fe.type||"").toLowerCase()==="shipping")?ie:[{type:"shipping",amount:0},...ie],Xe=le.findIndex(Fe=>(Fe.type||"").toLowerCase()==="shipping");if(Xe>0){const Fe=[...le],[dt]=Fe.splice(Xe,1);return Fe.unshift(dt),Fe}return le}),Y(!0)},[]),Ue=f.useCallback(async()=>{try{const ie={storeId:Ee,supplierId:a,destinationLocationId:e,referenceNumber:W||void 0,noteToSupplier:A||void 0,tags:I,paymentTerm:s||void 0,supplierCurrency:i||void 0,shippingCarrier:h||void 0,trackingNumber:y||void 0,expectedArrivalDate:c?new Date(c).toISOString():void 0,status:"draft",costAdjustments:re.map(_e=>({name:_e.type,amount:_e.amount})).concat([{name:"shipping",amount:0}]).reduce((_e,le)=>{const Xe=_e.findIndex(Fe=>Fe.name===le.name);return Xe===-1?_e.push(le):_e[Xe]={..._e[Xe],amount:_e[Xe].amount+le.amount},_e},[]),entries:j.map(_e=>({variantId:_e.variantId,supplierSku:_e.supplierSku||void 0,quantityOrdered:_e.qty,cost:_e.cost,taxPercent:_e.taxPct||void 0}))};await ee(ie),Ie("/products/purchase-orders")}catch{}},[Ee,a,e,W,A,I,s,i,h,y,c,re,j,ee,Ie]),Ge=f.useCallback(()=>{Ie("/products/purchase-orders")},[Ie]);return n.jsx(pr,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Create Purchase Order"})})}),n.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 space-y-4",children:[n.jsx(Yte,{supplierId:a,onSupplierIdChange:r,destinationId:e,onDestinationIdChange:t,paymentTerms:s,onPaymentTermsChange:o,currency:i,onCurrencyChange:l,vendorOptions:J,locationOptions:ce,paymentTermsOptions:ne,currencyOptions:M}),n.jsx(Kte,{eta:c,onEtaChange:d,carrier:h,onCarrierChange:m,tracking:y,onTrackingChange:x,carrierOptions:U}),n.jsx(Wte,{search:b,onSearchChange:v,searching:P,results:k,selectedVariantIds:H,onVariantToggle:se,onAddSelected:he,items:j,onItemsChange:S}),n.jsx(Hte,{reference:W,onReferenceChange:Z,tagIds:I,onTagIdsChange:K,note:A,onNoteChange:q,tagOptions:ue,tagsLoading:Pt}),n.jsx(qte,{itemsCount:j.length,subtotal:D,taxAmount:Q,adjustmentsTotal:Se,adjustmentsRows:re,shippingCost:oe,total:fe,onManageClick:Le,onCancel:Ge,onCreatePurchaseOrder:Ue,creatingPO:Ne,canCreate:!Ne&&!!Ee&&!!a&&!!e&&j.length>0}),n.jsx(Gte,{open:G,onClose:()=>Y(!1),adjustmentsRows:re,onAdjustmentsRowsChange:Te,adjustmentTypeOptions:xe})]})]})})};function Jte(){const{id:a}=qa(),r=mr(),{entries:e,fetchEntriesByPurchaseOrderId:t,loading:s,error:o,clearEntries:i}=EP(),{receiveInventory:l}=Bb(),[c,d]=f.useState({}),[h,m]=f.useState({});f.useEffect(()=>{if(a)return t(a).catch(()=>{}),()=>i()},[a]);const y=f.useMemo(()=>e.map(v=>{const j=v.variantId,S=j?.productId?.title||"-",k=j?.optionValues?Object.values(j.optionValues).join(" / "):"",N=j?.sku||"-";return{e:v,productTitle:S,optionText:k,rsku:N}}),[e]),x=(v,j)=>S=>{const k=Number(S.target.value||0),N=Math.max(0,Math.min(k,j)),P=h[v]??0,R=Math.max(0,j-N),F=Math.min(P,R);d(z=>({...z,[v]:N})),F!==P&&m(z=>({...z,[v]:F}))},b=(v,j)=>S=>{const k=Number(S.target.value||0),N=c[v]??0,P=Math.max(0,j-N),R=Math.max(0,Math.min(k,P));m(F=>({...F,[v]:R}))};return n.jsx(pr,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>r(`/products/purchase-orders/${a}`),className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(Hn,{className:"w-4 h-4"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Receive Inventory"})]}),n.jsx("button",{onClick:async()=>{if(!a)return;const v=e.map(j=>({entryId:j._id,accept:Number(c[j._id]??0)||0,reject:Number(h[j._id]??0)||0}));try{await l(a,v),r(`/products/purchase-orders/${a}`)}catch{}},className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Save"})]})}),n.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[o&&n.jsx("div",{className:"mb-4 px-3 py-2 border border-red-200 bg-red-50",children:n.jsx("p",{className:"text-sm text-red-600",children:o})}),s&&n.jsx("div",{className:"py-12 text-center",children:n.jsx("div",{className:"animate-spin rounded-full w-4 h-4 border-2 border-gray-300 border-t-gray-900 mx-auto"})}),!s&&n.jsx("div",{className:"border border-gray-200 p-4",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-white",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Product"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Supplier SKU"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"RSKU"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Ordered"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Received"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Accept"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Reject"})]})}),n.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[y.map(({e:v,productTitle:j,optionText:S,rsku:k})=>{const N=Math.max(0,(v.quantityOrdered||0)-(v.quantityReceived||0)),P=c[v._id]??0,R=h[v._id]??0,F=Math.max(0,N-R),z=Math.max(0,N-P);return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-2",children:n.jsxs("div",{className:"space-y-0.5",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:j}),S&&n.jsx("p",{className:"text-xs text-gray-600",children:S}),n.jsxs("p",{className:"text-xs text-gray-600",children:["SKU: ",k]})]})}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:v.supplierSku||"-"}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:k}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 text-right",children:v.quantityOrdered}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 text-right",children:v.quantityReceived}),n.jsx("td",{className:"px-4 py-2 text-right",children:n.jsx("input",{type:"number",min:0,max:F,value:P,onChange:x(v._id,N),className:"w-[140px] px-2 py-1 text-sm border border-gray-200 text-right focus:outline-none focus:ring-1 focus:ring-gray-400"})}),n.jsx("td",{className:"px-4 py-2 text-right",children:n.jsx("input",{type:"number",min:0,max:z,value:R,onChange:b(v._id,N),className:"w-[140px] px-2 py-1 text-sm border border-gray-200 text-right focus:outline-none focus:ring-1 focus:ring-gray-400"})})]},v._id)}),!s&&y.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-sm text-gray-600",children:"No entries"})})]})]})})})]})]})})}const ere=({purchaseOrder:a,onRowClick:r})=>{const e=typeof a.supplierId=="string"?a.supplierId:a.supplierId?.name||a.supplierId?._id,t=typeof a.destinationLocationId=="string"?a.destinationLocationId:a.destinationLocationId?.name||a.destinationLocationId?._id;return n.jsxs("tr",{onClick:()=>r(a._id),className:"hover:bg-gray-50 cursor-pointer transition-colors",children:[n.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:a._id}),n.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:e}),n.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:t}),n.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900 capitalize",children:a.status.replaceAll("_"," ")}),n.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900 text-right",children:a.totalCost?.toFixed(2)}),n.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:a.expectedArrivalDate?new Date(a.expectedArrivalDate).toLocaleDateString():"-"})]})},tre=({purchaseOrders:a,onRowClick:r})=>n.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[a.map(e=>n.jsx(ere,{purchaseOrder:e,onRowClick:r},e._id)),a.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-sm text-gray-600",children:"No purchase orders"})})]}),rre=({purchaseOrders:a,onRowClick:r})=>n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-white",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"PO ID"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Supplier"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Destination"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Status"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Total"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Expected Arrival"})]})}),n.jsx(tre,{purchaseOrders:a,onRowClick:r})]});function nre(){const{activeStoreId:a}=fn(),{purchaseOrders:r,fetchPurchaseOrdersByStore:e,loading:t,error:s}=Bb(),o=mr();f.useEffect(()=>{a&&e(a).catch(()=>{})},[a,e]);const i=f.useCallback(()=>{o("/products/purchase-orders/new")},[o]),l=f.useCallback(c=>{o(`/products/purchase-orders/${c}`)},[o]);return n.jsx(pr,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Purchase Orders"}),n.jsx("button",{onClick:i,className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Create purchase order"})]})}),n.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[t&&n.jsx("div",{className:"flex justify-center py-12",children:n.jsx("div",{className:"animate-spin rounded-full w-4 h-4 border-2 border-gray-300 border-t-gray-900"})}),s&&n.jsx("div",{className:"mb-4 px-3 py-2 border border-red-200 bg-red-50",children:n.jsx("p",{className:"text-sm text-red-600",children:s})}),!t&&n.jsx("div",{className:"border border-gray-200 overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsx(rre,{purchaseOrders:r,onRowClick:l})})})]})]})})}const jy={black:"#000",white:"#fff"},sh={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},oh={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},ih={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},lh={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},ch={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},Tg={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},are={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function Vd(a,...r){const e=new URL(`https://mui.com/production-error/?code=${a}`);return r.forEach(t=>e.searchParams.append("args[]",t)),`Minified MUI error #${a}; visit ${e} for the full message.`}const Wy="$$material";function db(){return db=Object.assign?Object.assign.bind():function(a){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var t in e)({}).hasOwnProperty.call(e,t)&&(a[t]=e[t])}return a},db.apply(null,arguments)}function sre(a){if(a.sheet)return a.sheet;for(var r=0;r<document.styleSheets.length;r++)if(document.styleSheets[r].ownerNode===a)return document.styleSheets[r]}function ore(a){var r=document.createElement("style");return r.setAttribute("data-emotion",a.key),a.nonce!==void 0&&r.setAttribute("nonce",a.nonce),r.appendChild(document.createTextNode("")),r.setAttribute("data-s",""),r}var ire=(function(){function a(e){var t=this;this._insertTag=function(s){var o;t.tags.length===0?t.insertionPoint?o=t.insertionPoint.nextSibling:t.prepend?o=t.container.firstChild:o=t.before:o=t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(s,o),t.tags.push(s)},this.isSpeedy=e.speedy===void 0?!0:e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var r=a.prototype;return r.hydrate=function(t){t.forEach(this._insertTag)},r.insert=function(t){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(ore(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var o=sre(s);try{o.insertRule(t,o.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(t));this.ctr++},r.flush=function(){this.tags.forEach(function(t){var s;return(s=t.parentNode)==null?void 0:s.removeChild(t)}),this.tags=[],this.ctr=0},a})(),Wo="-ms-",ub="-moz-",Ea="-webkit-",OP="comm",e2="rule",t2="decl",lre="@import",PP="@keyframes",cre="@layer",dre=Math.abs,zb=String.fromCharCode,ure=Object.assign;function fre(a,r){return Po(a,0)^45?(((r<<2^Po(a,0))<<2^Po(a,1))<<2^Po(a,2))<<2^Po(a,3):0}function AP(a){return a.trim()}function pre(a,r){return(a=r.exec(a))?a[0]:a}function Ta(a,r,e){return a.replace(r,e)}function RC(a,r){return a.indexOf(r)}function Po(a,r){return a.charCodeAt(r)|0}function Cy(a,r,e){return a.slice(r,e)}function $c(a){return a.length}function r2(a){return a.length}function j0(a,r){return r.push(a),a}function hre(a,r){return a.map(r).join("")}var Ub=1,Yh=1,MP=0,Oi=0,Js=0,lm="";function $b(a,r,e,t,s,o,i){return{value:a,root:r,parent:e,type:t,props:s,children:o,line:Ub,column:Yh,length:i,return:""}}function Og(a,r){return ure($b("",null,null,"",null,null,0),a,{length:-a.length},r)}function mre(){return Js}function gre(){return Js=Oi>0?Po(lm,--Oi):0,Yh--,Js===10&&(Yh=1,Ub--),Js}function Qi(){return Js=Oi<MP?Po(lm,Oi++):0,Yh++,Js===10&&(Yh=1,Ub++),Js}function Zc(){return Po(lm,Oi)}function H0(){return Oi}function Hy(a,r){return Cy(lm,a,r)}function Sy(a){switch(a){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function IP(a){return Ub=Yh=1,MP=$c(lm=a),Oi=0,[]}function RP(a){return lm="",a}function q0(a){return AP(Hy(Oi-1,LC(a===91?a+2:a===40?a+1:a)))}function yre(a){for(;(Js=Zc())&&Js<33;)Qi();return Sy(a)>2||Sy(Js)>3?"":" "}function xre(a,r){for(;--r&&Qi()&&!(Js<48||Js>102||Js>57&&Js<65||Js>70&&Js<97););return Hy(a,H0()+(r<6&&Zc()==32&&Qi()==32))}function LC(a){for(;Qi();)switch(Js){case a:return Oi;case 34:case 39:a!==34&&a!==39&&LC(Js);break;case 40:a===41&&LC(a);break;case 92:Qi();break}return Oi}function vre(a,r){for(;Qi()&&a+Js!==57;)if(a+Js===84&&Zc()===47)break;return"/*"+Hy(r,Oi-1)+"*"+zb(a===47?a:Qi())}function bre(a){for(;!Sy(Zc());)Qi();return Hy(a,Oi)}function wre(a){return RP(G0("",null,null,null,[""],a=IP(a),0,[0],a))}function G0(a,r,e,t,s,o,i,l,c){for(var d=0,h=0,m=i,y=0,x=0,b=0,v=1,j=1,S=1,k=0,N="",P=s,R=o,F=t,z=N;j;)switch(b=k,k=Qi()){case 40:if(b!=108&&Po(z,m-1)==58){RC(z+=Ta(q0(k),"&","&\f"),"&\f")!=-1&&(S=-1);break}case 34:case 39:case 91:z+=q0(k);break;case 9:case 10:case 13:case 32:z+=yre(b);break;case 92:z+=xre(H0()-1,7);continue;case 47:switch(Zc()){case 42:case 47:j0(jre(vre(Qi(),H0()),r,e),c);break;default:z+="/"}break;case 123*v:l[d++]=$c(z)*S;case 125*v:case 59:case 0:switch(k){case 0:case 125:j=0;case 59+h:S==-1&&(z=Ta(z,/\f/g,"")),x>0&&$c(z)-m&&j0(x>32?F_(z+";",t,e,m-1):F_(Ta(z," ","")+";",t,e,m-2),c);break;case 59:z+=";";default:if(j0(F=D_(z,r,e,d,h,s,l,N,P=[],R=[],m),o),k===123)if(h===0)G0(z,r,F,F,P,o,m,l,R);else switch(y===99&&Po(z,3)===110?100:y){case 100:case 108:case 109:case 115:G0(a,F,F,t&&j0(D_(a,F,F,0,0,s,l,N,s,P=[],m),R),s,R,m,l,t?P:R);break;default:G0(z,F,F,F,[""],R,0,l,R)}}d=h=x=0,v=S=1,N=z="",m=i;break;case 58:m=1+$c(z),x=b;default:if(v<1){if(k==123)--v;else if(k==125&&v++==0&&gre()==125)continue}switch(z+=zb(k),k*v){case 38:S=h>0?1:(z+="\f",-1);break;case 44:l[d++]=($c(z)-1)*S,S=1;break;case 64:Zc()===45&&(z+=q0(Qi())),y=Zc(),h=m=$c(N=z+=bre(H0())),k++;break;case 45:b===45&&$c(z)==2&&(v=0)}}return o}function D_(a,r,e,t,s,o,i,l,c,d,h){for(var m=s-1,y=s===0?o:[""],x=r2(y),b=0,v=0,j=0;b<t;++b)for(var S=0,k=Cy(a,m+1,m=dre(v=i[b])),N=a;S<x;++S)(N=AP(v>0?y[S]+" "+k:Ta(k,/&\f/g,y[S])))&&(c[j++]=N);return $b(a,r,e,s===0?e2:l,c,d,h)}function jre(a,r,e){return $b(a,r,e,OP,zb(mre()),Cy(a,2,-2),0)}function F_(a,r,e,t){return $b(a,r,e,t2,Cy(a,0,t),Cy(a,t+1,-1),t)}function Dh(a,r){for(var e="",t=r2(a),s=0;s<t;s++)e+=r(a[s],s,a,r)||"";return e}function Cre(a,r,e,t){switch(a.type){case cre:if(a.children.length)break;case lre:case t2:return a.return=a.return||a.value;case OP:return"";case PP:return a.return=a.value+"{"+Dh(a.children,t)+"}";case e2:a.value=a.props.join(",")}return $c(e=Dh(a.children,t))?a.return=a.value+"{"+e+"}":""}function Sre(a){var r=r2(a);return function(e,t,s,o){for(var i="",l=0;l<r;l++)i+=a[l](e,t,s,o)||"";return i}}function Nre(a){return function(r){r.root||(r=r.return)&&a(r)}}function LP(a){var r=Object.create(null);return function(e){return r[e]===void 0&&(r[e]=a(e)),r[e]}}var kre=function(r,e,t){for(var s=0,o=0;s=o,o=Zc(),s===38&&o===12&&(e[t]=1),!Sy(o);)Qi();return Hy(r,Oi)},_re=function(r,e){var t=-1,s=44;do switch(Sy(s)){case 0:s===38&&Zc()===12&&(e[t]=1),r[t]+=kre(Oi-1,e,t);break;case 2:r[t]+=q0(s);break;case 4:if(s===44){r[++t]=Zc()===58?"&\f":"",e[t]=r[t].length;break}default:r[t]+=zb(s)}while(s=Qi());return r},Ere=function(r,e){return RP(_re(IP(r),e))},B_=new WeakMap,Tre=function(r){if(!(r.type!=="rule"||!r.parent||r.length<1)){for(var e=r.value,t=r.parent,s=r.column===t.column&&r.line===t.line;t.type!=="rule";)if(t=t.parent,!t)return;if(!(r.props.length===1&&e.charCodeAt(0)!==58&&!B_.get(t))&&!s){B_.set(r,!0);for(var o=[],i=Ere(e,o),l=t.props,c=0,d=0;c<i.length;c++)for(var h=0;h<l.length;h++,d++)r.props[d]=o[c]?i[c].replace(/&\f/g,l[h]):l[h]+" "+i[c]}}},Ore=function(r){if(r.type==="decl"){var e=r.value;e.charCodeAt(0)===108&&e.charCodeAt(2)===98&&(r.return="",r.value="")}};function DP(a,r){switch(fre(a,r)){case 5103:return Ea+"print-"+a+a;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ea+a+a;case 5349:case 4246:case 4810:case 6968:case 2756:return Ea+a+ub+a+Wo+a+a;case 6828:case 4268:return Ea+a+Wo+a+a;case 6165:return Ea+a+Wo+"flex-"+a+a;case 5187:return Ea+a+Ta(a,/(\w+).+(:[^]+)/,Ea+"box-$1$2"+Wo+"flex-$1$2")+a;case 5443:return Ea+a+Wo+"flex-item-"+Ta(a,/flex-|-self/,"")+a;case 4675:return Ea+a+Wo+"flex-line-pack"+Ta(a,/align-content|flex-|-self/,"")+a;case 5548:return Ea+a+Wo+Ta(a,"shrink","negative")+a;case 5292:return Ea+a+Wo+Ta(a,"basis","preferred-size")+a;case 6060:return Ea+"box-"+Ta(a,"-grow","")+Ea+a+Wo+Ta(a,"grow","positive")+a;case 4554:return Ea+Ta(a,/([^-])(transform)/g,"$1"+Ea+"$2")+a;case 6187:return Ta(Ta(Ta(a,/(zoom-|grab)/,Ea+"$1"),/(image-set)/,Ea+"$1"),a,"")+a;case 5495:case 3959:return Ta(a,/(image-set\([^]*)/,Ea+"$1$`$1");case 4968:return Ta(Ta(a,/(.+:)(flex-)?(.*)/,Ea+"box-pack:$3"+Wo+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ea+a+a;case 4095:case 3583:case 4068:case 2532:return Ta(a,/(.+)-inline(.+)/,Ea+"$1$2")+a;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if($c(a)-1-r>6)switch(Po(a,r+1)){case 109:if(Po(a,r+4)!==45)break;case 102:return Ta(a,/(.+:)(.+)-([^]+)/,"$1"+Ea+"$2-$3$1"+ub+(Po(a,r+3)==108?"$3":"$2-$3"))+a;case 115:return~RC(a,"stretch")?DP(Ta(a,"stretch","fill-available"),r)+a:a}break;case 4949:if(Po(a,r+1)!==115)break;case 6444:switch(Po(a,$c(a)-3-(~RC(a,"!important")&&10))){case 107:return Ta(a,":",":"+Ea)+a;case 101:return Ta(a,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ea+(Po(a,14)===45?"inline-":"")+"box$3$1"+Ea+"$2$3$1"+Wo+"$2box$3")+a}break;case 5936:switch(Po(a,r+11)){case 114:return Ea+a+Wo+Ta(a,/[svh]\w+-[tblr]{2}/,"tb")+a;case 108:return Ea+a+Wo+Ta(a,/[svh]\w+-[tblr]{2}/,"tb-rl")+a;case 45:return Ea+a+Wo+Ta(a,/[svh]\w+-[tblr]{2}/,"lr")+a}return Ea+a+Wo+a+a}return a}var Pre=function(r,e,t,s){if(r.length>-1&&!r.return)switch(r.type){case t2:r.return=DP(r.value,r.length);break;case PP:return Dh([Og(r,{value:Ta(r.value,"@","@"+Ea)})],s);case e2:if(r.length)return hre(r.props,function(o){switch(pre(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Dh([Og(r,{props:[Ta(o,/:(read-\w+)/,":"+ub+"$1")]})],s);case"::placeholder":return Dh([Og(r,{props:[Ta(o,/:(plac\w+)/,":"+Ea+"input-$1")]}),Og(r,{props:[Ta(o,/:(plac\w+)/,":"+ub+"$1")]}),Og(r,{props:[Ta(o,/:(plac\w+)/,Wo+"input-$1")]})],s)}return""})}},Are=[Pre],Mre=function(r){var e=r.key;if(e==="css"){var t=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(t,function(v){var j=v.getAttribute("data-emotion");j.indexOf(" ")!==-1&&(document.head.appendChild(v),v.setAttribute("data-s",""))})}var s=r.stylisPlugins||Are,o={},i,l=[];i=r.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),function(v){for(var j=v.getAttribute("data-emotion").split(" "),S=1;S<j.length;S++)o[j[S]]=!0;l.push(v)});var c,d=[Tre,Ore];{var h,m=[Cre,Nre(function(v){h.insert(v)})],y=Sre(d.concat(s,m)),x=function(j){return Dh(wre(j),y)};c=function(j,S,k,N){h=k,x(j?j+"{"+S.styles+"}":S.styles),N&&(b.inserted[S.name]=!0)}}var b={key:e,sheet:new ire({key:e,container:i,nonce:r.nonce,speedy:r.speedy,prepend:r.prepend,insertionPoint:r.insertionPoint}),nonce:r.nonce,inserted:o,registered:{},insert:c};return b.sheet.hydrate(l),b},i1={exports:{}},Ra={};var z_;function Ire(){if(z_)return Ra;z_=1;var a=typeof Symbol=="function"&&Symbol.for,r=a?Symbol.for("react.element"):60103,e=a?Symbol.for("react.portal"):60106,t=a?Symbol.for("react.fragment"):60107,s=a?Symbol.for("react.strict_mode"):60108,o=a?Symbol.for("react.profiler"):60114,i=a?Symbol.for("react.provider"):60109,l=a?Symbol.for("react.context"):60110,c=a?Symbol.for("react.async_mode"):60111,d=a?Symbol.for("react.concurrent_mode"):60111,h=a?Symbol.for("react.forward_ref"):60112,m=a?Symbol.for("react.suspense"):60113,y=a?Symbol.for("react.suspense_list"):60120,x=a?Symbol.for("react.memo"):60115,b=a?Symbol.for("react.lazy"):60116,v=a?Symbol.for("react.block"):60121,j=a?Symbol.for("react.fundamental"):60117,S=a?Symbol.for("react.responder"):60118,k=a?Symbol.for("react.scope"):60119;function N(R){if(typeof R=="object"&&R!==null){var F=R.$$typeof;switch(F){case r:switch(R=R.type,R){case c:case d:case t:case o:case s:case m:return R;default:switch(R=R&&R.$$typeof,R){case l:case h:case b:case x:case i:return R;default:return F}}case e:return F}}}function P(R){return N(R)===d}return Ra.AsyncMode=c,Ra.ConcurrentMode=d,Ra.ContextConsumer=l,Ra.ContextProvider=i,Ra.Element=r,Ra.ForwardRef=h,Ra.Fragment=t,Ra.Lazy=b,Ra.Memo=x,Ra.Portal=e,Ra.Profiler=o,Ra.StrictMode=s,Ra.Suspense=m,Ra.isAsyncMode=function(R){return P(R)||N(R)===c},Ra.isConcurrentMode=P,Ra.isContextConsumer=function(R){return N(R)===l},Ra.isContextProvider=function(R){return N(R)===i},Ra.isElement=function(R){return typeof R=="object"&&R!==null&&R.$$typeof===r},Ra.isForwardRef=function(R){return N(R)===h},Ra.isFragment=function(R){return N(R)===t},Ra.isLazy=function(R){return N(R)===b},Ra.isMemo=function(R){return N(R)===x},Ra.isPortal=function(R){return N(R)===e},Ra.isProfiler=function(R){return N(R)===o},Ra.isStrictMode=function(R){return N(R)===s},Ra.isSuspense=function(R){return N(R)===m},Ra.isValidElementType=function(R){return typeof R=="string"||typeof R=="function"||R===t||R===d||R===o||R===s||R===m||R===y||typeof R=="object"&&R!==null&&(R.$$typeof===b||R.$$typeof===x||R.$$typeof===i||R.$$typeof===l||R.$$typeof===h||R.$$typeof===j||R.$$typeof===S||R.$$typeof===k||R.$$typeof===v)},Ra.typeOf=N,Ra}var U_;function Rre(){return U_||(U_=1,i1.exports=Ire()),i1.exports}var l1,$_;function Lre(){if($_)return l1;$_=1;var a=Rre(),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},e={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},t={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};o[a.ForwardRef]=t,o[a.Memo]=s;function i(b){return a.isMemo(b)?s:o[b.$$typeof]||r}var l=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,m=Object.getPrototypeOf,y=Object.prototype;function x(b,v,j){if(typeof v!="string"){if(y){var S=m(v);S&&S!==y&&x(b,S,j)}var k=c(v);d&&(k=k.concat(d(v)));for(var N=i(b),P=i(v),R=0;R<k.length;++R){var F=k[R];if(!e[F]&&!(j&&j[F])&&!(P&&P[F])&&!(N&&N[F])){var z=h(v,F);try{l(b,F,z)}catch{}}}}return b}return l1=x,l1}Lre();var Dre=!0;function FP(a,r,e){var t="";return e.split(" ").forEach(function(s){a[s]!==void 0?r.push(a[s]+";"):s&&(t+=s+" ")}),t}var n2=function(r,e,t){var s=r.key+"-"+e.name;(t===!1||Dre===!1)&&r.registered[s]===void 0&&(r.registered[s]=e.styles)},a2=function(r,e,t){n2(r,e,t);var s=r.key+"-"+e.name;if(r.inserted[e.name]===void 0){var o=e;do r.insert(e===o?"."+s:"",o,r.sheet,!0),o=o.next;while(o!==void 0)}};function Fre(a){for(var r=0,e,t=0,s=a.length;s>=4;++t,s-=4)e=a.charCodeAt(t)&255|(a.charCodeAt(++t)&255)<<8|(a.charCodeAt(++t)&255)<<16|(a.charCodeAt(++t)&255)<<24,e=(e&65535)*1540483477+((e>>>16)*59797<<16),e^=e>>>24,r=(e&65535)*1540483477+((e>>>16)*59797<<16)^(r&65535)*1540483477+((r>>>16)*59797<<16);switch(s){case 3:r^=(a.charCodeAt(t+2)&255)<<16;case 2:r^=(a.charCodeAt(t+1)&255)<<8;case 1:r^=a.charCodeAt(t)&255,r=(r&65535)*1540483477+((r>>>16)*59797<<16)}return r^=r>>>13,r=(r&65535)*1540483477+((r>>>16)*59797<<16),((r^r>>>15)>>>0).toString(36)}var Bre={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},zre=/[A-Z]|^ms/g,Ure=/_EMO_([^_]+?)_([^]*?)_EMO_/g,BP=function(r){return r.charCodeAt(1)===45},V_=function(r){return r!=null&&typeof r!="boolean"},c1=LP(function(a){return BP(a)?a:a.replace(zre,"-$&").toLowerCase()}),W_=function(r,e){switch(r){case"animation":case"animationName":if(typeof e=="string")return e.replace(Ure,function(t,s,o){return Vc={name:s,styles:o,next:Vc},s})}return Bre[r]!==1&&!BP(r)&&typeof e=="number"&&e!==0?e+"px":e};function Ny(a,r,e){if(e==null)return"";var t=e;if(t.__emotion_styles!==void 0)return t;switch(typeof e){case"boolean":return"";case"object":{var s=e;if(s.anim===1)return Vc={name:s.name,styles:s.styles,next:Vc},s.name;var o=e;if(o.styles!==void 0){var i=o.next;if(i!==void 0)for(;i!==void 0;)Vc={name:i.name,styles:i.styles,next:Vc},i=i.next;var l=o.styles+";";return l}return $re(a,r,e)}case"function":{if(a!==void 0){var c=Vc,d=e(a);return Vc=c,Ny(a,r,d)}break}}var h=e;if(r==null)return h;var m=r[h];return m!==void 0?m:h}function $re(a,r,e){var t="";if(Array.isArray(e))for(var s=0;s<e.length;s++)t+=Ny(a,r,e[s])+";";else for(var o in e){var i=e[o];if(typeof i!="object"){var l=i;r!=null&&r[l]!==void 0?t+=o+"{"+r[l]+"}":V_(l)&&(t+=c1(o)+":"+W_(o,l)+";")}else if(Array.isArray(i)&&typeof i[0]=="string"&&(r==null||r[i[0]]===void 0))for(var c=0;c<i.length;c++)V_(i[c])&&(t+=c1(o)+":"+W_(o,i[c])+";");else{var d=Ny(a,r,i);switch(o){case"animation":case"animationName":{t+=c1(o)+":"+d+";";break}default:t+=o+"{"+d+"}"}}}return t}var H_=/label:\s*([^\s;{]+)\s*(;|$)/g,Vc;function qy(a,r,e){if(a.length===1&&typeof a[0]=="object"&&a[0]!==null&&a[0].styles!==void 0)return a[0];var t=!0,s="";Vc=void 0;var o=a[0];if(o==null||o.raw===void 0)t=!1,s+=Ny(e,r,o);else{var i=o;s+=i[0]}for(var l=1;l<a.length;l++)if(s+=Ny(e,r,a[l]),t){var c=o;s+=c[l]}H_.lastIndex=0;for(var d="",h;(h=H_.exec(s))!==null;)d+="-"+h[1];var m=Fre(s)+d;return{name:m,styles:s,next:Vc}}var Vre=function(r){return r()},zP=Y0.useInsertionEffect?Y0.useInsertionEffect:!1,UP=zP||Vre,q_=zP||f.useLayoutEffect,$P=f.createContext(typeof HTMLElement<"u"?Mre({key:"css"}):null);$P.Provider;var s2=function(r){return f.forwardRef(function(e,t){var s=f.useContext($P);return r(e,s,t)})},Vb=f.createContext({}),o2={}.hasOwnProperty,DC="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Wre=function(r,e){var t={};for(var s in e)o2.call(e,s)&&(t[s]=e[s]);return t[DC]=r,t},Hre=function(r){var e=r.cache,t=r.serialized,s=r.isStringTag;return n2(e,t,s),UP(function(){return a2(e,t,s)}),null},qre=s2(function(a,r,e){var t=a.css;typeof t=="string"&&r.registered[t]!==void 0&&(t=r.registered[t]);var s=a[DC],o=[t],i="";typeof a.className=="string"?i=FP(r.registered,o,a.className):a.className!=null&&(i=a.className+" ");var l=qy(o,void 0,f.useContext(Vb));i+=r.key+"-"+l.name;var c={};for(var d in a)o2.call(a,d)&&d!=="css"&&d!==DC&&(c[d]=a[d]);return c.className=i,e&&(c.ref=e),f.createElement(f.Fragment,null,f.createElement(Hre,{cache:r,serialized:l,isStringTag:typeof s=="string"}),f.createElement(s,c))}),Gre=qre,G_=function(r,e){var t=arguments;if(e==null||!o2.call(e,"css"))return f.createElement.apply(void 0,t);var s=t.length,o=new Array(s);o[0]=Gre,o[1]=Wre(r,e);for(var i=2;i<s;i++)o[i]=t[i];return f.createElement.apply(null,o)};(function(a){var r;r||(r=a.JSX||(a.JSX={}))})(G_||(G_={}));var Kre=s2(function(a,r){var e=a.styles,t=qy([e],void 0,f.useContext(Vb)),s=f.useRef();return q_(function(){var o=r.key+"-global",i=new r.sheet.constructor({key:o,nonce:r.sheet.nonce,container:r.sheet.container,speedy:r.sheet.isSpeedy}),l=!1,c=document.querySelector('style[data-emotion="'+o+" "+t.name+'"]');return r.sheet.tags.length&&(i.before=r.sheet.tags[0]),c!==null&&(l=!0,c.setAttribute("data-emotion",o),i.hydrate([c])),s.current=[i,l],function(){i.flush()}},[r]),q_(function(){var o=s.current,i=o[0],l=o[1];if(l){o[1]=!1;return}if(t.next!==void 0&&a2(r,t.next,!0),i.tags.length){var c=i.tags[i.tags.length-1].nextElementSibling;i.before=c,i.flush()}r.insert("",t,i,!1)},[r,t.name]),null});function i2(){for(var a=arguments.length,r=new Array(a),e=0;e<a;e++)r[e]=arguments[e];return qy(r)}function Gy(){var a=i2.apply(void 0,arguments),r="animation-"+a.name;return{name:r,styles:"@keyframes "+r+"{"+a.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var Yre=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Zre=LP(function(a){return Yre.test(a)||a.charCodeAt(0)===111&&a.charCodeAt(1)===110&&a.charCodeAt(2)<91}),Xre=Zre,Qre=function(r){return r!=="theme"},K_=function(r){return typeof r=="string"&&r.charCodeAt(0)>96?Xre:Qre},Y_=function(r,e,t){var s;if(e){var o=e.shouldForwardProp;s=r.__emotion_forwardProp&&o?function(i){return r.__emotion_forwardProp(i)&&o(i)}:o}return typeof s!="function"&&t&&(s=r.__emotion_forwardProp),s},Jre=function(r){var e=r.cache,t=r.serialized,s=r.isStringTag;return n2(e,t,s),UP(function(){return a2(e,t,s)}),null},ene=function a(r,e){var t=r.__emotion_real===r,s=t&&r.__emotion_base||r,o,i;e!==void 0&&(o=e.label,i=e.target);var l=Y_(r,e,t),c=l||K_(s),d=!c("as");return function(){var h=arguments,m=t&&r.__emotion_styles!==void 0?r.__emotion_styles.slice(0):[];if(o!==void 0&&m.push("label:"+o+";"),h[0]==null||h[0].raw===void 0)m.push.apply(m,h);else{var y=h[0];m.push(y[0]);for(var x=h.length,b=1;b<x;b++)m.push(h[b],y[b])}var v=s2(function(j,S,k){var N=d&&j.as||s,P="",R=[],F=j;if(j.theme==null){F={};for(var z in j)F[z]=j[z];F.theme=f.useContext(Vb)}typeof j.className=="string"?P=FP(S.registered,R,j.className):j.className!=null&&(P=j.className+" ");var H=qy(m.concat(R),S.registered,F);P+=S.key+"-"+H.name,i!==void 0&&(P+=" "+i);var V=d&&l===void 0?K_(N):c,W={};for(var Z in j)d&&Z==="as"||V(Z)&&(W[Z]=j[Z]);return W.className=P,k&&(W.ref=k),f.createElement(f.Fragment,null,f.createElement(Jre,{cache:S,serialized:H,isStringTag:typeof N=="string"}),f.createElement(N,W))});return v.displayName=o!==void 0?o:"Styled("+(typeof s=="string"?s:s.displayName||s.name||"Component")+")",v.defaultProps=r.defaultProps,v.__emotion_real=v,v.__emotion_base=s,v.__emotion_styles=m,v.__emotion_forwardProp=l,Object.defineProperty(v,"toString",{value:function(){return"."+i}}),v.withComponent=function(j,S){var k=a(j,db({},e,S,{shouldForwardProp:Y_(v,S,!0)}));return k.apply(void 0,m)},v}},tne=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],FC=ene.bind(null);tne.forEach(function(a){FC[a]=FC(a)});function rne(a){return a==null||Object.keys(a).length===0}function nne(a){const{styles:r,defaultTheme:e={}}=a,t=typeof r=="function"?s=>r(rne(s)?e:s):r;return n.jsx(Kre,{styles:t})}function VP(a,r){return FC(a,r)}function ane(a,r){Array.isArray(a.__emotion_styles)&&(a.__emotion_styles=r(a.__emotion_styles))}const Z_=[];function Fu(a){return Z_[0]=a,qy(Z_)}var d1={exports:{}},Qa={};var X_;function sne(){if(X_)return Qa;X_=1;var a=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),t=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),i=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function b(v){if(typeof v=="object"&&v!==null){var j=v.$$typeof;switch(j){case a:switch(v=v.type,v){case e:case s:case t:case c:case d:case y:return v;default:switch(v=v&&v.$$typeof,v){case i:case l:case m:case h:return v;case o:return v;default:return j}}case r:return j}}}return Qa.ContextConsumer=o,Qa.ContextProvider=i,Qa.Element=a,Qa.ForwardRef=l,Qa.Fragment=e,Qa.Lazy=m,Qa.Memo=h,Qa.Portal=r,Qa.Profiler=s,Qa.StrictMode=t,Qa.Suspense=c,Qa.SuspenseList=d,Qa.isContextConsumer=function(v){return b(v)===o},Qa.isContextProvider=function(v){return b(v)===i},Qa.isElement=function(v){return typeof v=="object"&&v!==null&&v.$$typeof===a},Qa.isForwardRef=function(v){return b(v)===l},Qa.isFragment=function(v){return b(v)===e},Qa.isLazy=function(v){return b(v)===m},Qa.isMemo=function(v){return b(v)===h},Qa.isPortal=function(v){return b(v)===r},Qa.isProfiler=function(v){return b(v)===s},Qa.isStrictMode=function(v){return b(v)===t},Qa.isSuspense=function(v){return b(v)===c},Qa.isSuspenseList=function(v){return b(v)===d},Qa.isValidElementType=function(v){return typeof v=="string"||typeof v=="function"||v===e||v===s||v===t||v===c||v===d||typeof v=="object"&&v!==null&&(v.$$typeof===m||v.$$typeof===h||v.$$typeof===i||v.$$typeof===o||v.$$typeof===l||v.$$typeof===x||v.getModuleId!==void 0)},Qa.typeOf=b,Qa}var Q_;function one(){return Q_||(Q_=1,d1.exports=sne()),d1.exports}var WP=one();function qc(a){if(typeof a!="object"||a===null)return!1;const r=Object.getPrototypeOf(a);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)}function HP(a){if(f.isValidElement(a)||WP.isValidElementType(a)||!qc(a))return a;const r={};return Object.keys(a).forEach(e=>{r[e]=HP(a[e])}),r}function jo(a,r,e={clone:!0}){const t=e.clone?{...a}:a;return qc(a)&&qc(r)&&Object.keys(r).forEach(s=>{f.isValidElement(r[s])||WP.isValidElementType(r[s])?t[s]=r[s]:qc(r[s])&&Object.prototype.hasOwnProperty.call(a,s)&&qc(a[s])?t[s]=jo(a[s],r[s],e):e.clone?t[s]=qc(r[s])?HP(r[s]):r[s]:t[s]=r[s]}),t}const ine=a=>{const r=Object.keys(a).map(e=>({key:e,val:a[e]}))||[];return r.sort((e,t)=>e.val-t.val),r.reduce((e,t)=>({...e,[t.key]:t.val}),{})};function lne(a){const{values:r={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:e="px",step:t=5,...s}=a,o=ine(r),i=Object.keys(o);function l(y){return`@media (min-width:${typeof r[y]=="number"?r[y]:y}${e})`}function c(y){return`@media (max-width:${(typeof r[y]=="number"?r[y]:y)-t/100}${e})`}function d(y,x){const b=i.indexOf(x);return`@media (min-width:${typeof r[y]=="number"?r[y]:y}${e}) and (max-width:${(b!==-1&&typeof r[i[b]]=="number"?r[i[b]]:x)-t/100}${e})`}function h(y){return i.indexOf(y)+1<i.length?d(y,i[i.indexOf(y)+1]):l(y)}function m(y){const x=i.indexOf(y);return x===0?l(i[1]):x===i.length-1?c(i[x]):d(y,i[i.indexOf(y)+1]).replace("@media","@media not all and")}return{keys:i,values:o,up:l,down:c,between:d,only:h,not:m,unit:e,...s}}function J_(a,r){if(!a.containerQueries)return r;const e=Object.keys(r).filter(t=>t.startsWith("@container")).sort((t,s)=>{const o=/min-width:\s*([0-9.]+)/;return+(t.match(o)?.[1]||0)-+(s.match(o)?.[1]||0)});return e.length?e.reduce((t,s)=>{const o=r[s];return delete t[s],t[s]=o,t},{...r}):r}function cne(a,r){return r==="@"||r.startsWith("@")&&(a.some(e=>r.startsWith(`@${e}`))||!!r.match(/^@\d/))}function dne(a,r){const e=r.match(/^@([^/]+)?\/?(.+)?$/);if(!e)return null;const[,t,s]=e,o=Number.isNaN(+t)?t||0:+t;return a.containerQueries(s).up(o)}function une(a){const r=(o,i)=>o.replace("@media",i?`@container ${i}`:"@container");function e(o,i){o.up=(...l)=>r(a.breakpoints.up(...l),i),o.down=(...l)=>r(a.breakpoints.down(...l),i),o.between=(...l)=>r(a.breakpoints.between(...l),i),o.only=(...l)=>r(a.breakpoints.only(...l),i),o.not=(...l)=>{const c=r(a.breakpoints.not(...l),i);return c.includes("not all and")?c.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):c}}const t={},s=o=>(e(t,o),t);return e(s),{...a,containerQueries:s}}const fne={borderRadius:4};function iy(a,r){return r?jo(a,r,{clone:!1}):a}const Wb={xs:0,sm:600,md:900,lg:1200,xl:1536},eE={keys:["xs","sm","md","lg","xl"],up:a=>`@media (min-width:${Wb[a]}px)`},pne={containerQueries:a=>({up:r=>{let e=typeof r=="number"?r:Wb[r]||r;return typeof e=="number"&&(e=`${e}px`),a?`@container ${a} (min-width:${e})`:`@container (min-width:${e})`}})};function sc(a,r,e){const t=a.theme||{};if(Array.isArray(r)){const o=t.breakpoints||eE;return r.reduce((i,l,c)=>(i[o.up(o.keys[c])]=e(r[c]),i),{})}if(typeof r=="object"){const o=t.breakpoints||eE;return Object.keys(r).reduce((i,l)=>{if(cne(o.keys,l)){const c=dne(t.containerQueries?t:pne,l);c&&(i[c]=e(r[l],l))}else if(Object.keys(o.values||Wb).includes(l)){const c=o.up(l);i[c]=e(r[l],l)}else{const c=l;i[c]=r[c]}return i},{})}return e(r)}function qP(a={}){return a.keys?.reduce((e,t)=>{const s=a.up(t);return e[s]={},e},{})||{}}function BC(a,r){return a.reduce((e,t)=>{const s=e[t];return(!s||Object.keys(s).length===0)&&delete e[t],e},r)}function hne(a,...r){const e=qP(a),t=[e,...r].reduce((s,o)=>jo(s,o),{});return BC(Object.keys(e),t)}function mne(a,r){if(typeof a!="object")return{};const e={},t=Object.keys(r);return Array.isArray(a)?t.forEach((s,o)=>{o<a.length&&(e[s]=!0)}):t.forEach(s=>{a[s]!=null&&(e[s]=!0)}),e}function u1({values:a,breakpoints:r,base:e}){const t=e||mne(a,r),s=Object.keys(t);if(s.length===0)return a;let o;return s.reduce((i,l,c)=>(Array.isArray(a)?(i[l]=a[c]!=null?a[c]:a[o],o=c):typeof a=="object"?(i[l]=a[l]!=null?a[l]:a[o],o=l):i[l]=a,i),{})}function Yt(a){if(typeof a!="string")throw new Error(Vd(7));return a.charAt(0).toUpperCase()+a.slice(1)}function Wc(a,r,e=!0){if(!r||typeof r!="string")return null;if(a&&a.vars&&e){const t=`vars.${r}`.split(".").reduce((s,o)=>s&&s[o]?s[o]:null,a);if(t!=null)return t}return r.split(".").reduce((t,s)=>t&&t[s]!=null?t[s]:null,a)}function fb(a,r,e,t=e){let s;return typeof a=="function"?s=a(e):Array.isArray(a)?s=a[e]||t:s=Wc(a,e)||t,r&&(s=r(s,t,a)),s}function Ks(a){const{prop:r,cssProperty:e=a.prop,themeKey:t,transform:s}=a,o=i=>{if(i[r]==null)return null;const l=i[r],c=i.theme,d=Wc(c,t)||{};return sc(i,l,m=>{let y=fb(d,s,m);return m===y&&typeof m=="string"&&(y=fb(d,s,`${r}${m==="default"?"":Yt(m)}`,m)),e===!1?y:{[e]:y}})};return o.propTypes={},o.filterProps=[r],o}function gne(a){const r={};return e=>(r[e]===void 0&&(r[e]=a(e)),r[e])}const yne={m:"margin",p:"padding"},xne={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},tE={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},vne=gne(a=>{if(a.length>2)if(tE[a])a=tE[a];else return[a];const[r,e]=a.split(""),t=yne[r],s=xne[e]||"";return Array.isArray(s)?s.map(o=>t+o):[t+s]}),l2=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],c2=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...l2,...c2];function Ky(a,r,e,t){const s=Wc(a,r,!0)??e;return typeof s=="number"||typeof s=="string"?o=>typeof o=="string"?o:typeof s=="string"?s.startsWith("var(")&&o===0?0:s.startsWith("var(")&&o===1?s:`calc(${o} * ${s})`:s*o:Array.isArray(s)?o=>{if(typeof o=="string")return o;const i=Math.abs(o),l=s[i];return o>=0?l:typeof l=="number"?-l:typeof l=="string"&&l.startsWith("var(")?`calc(-1 * ${l})`:`-${l}`}:typeof s=="function"?s:()=>{}}function Hb(a){return Ky(a,"spacing",8)}function dp(a,r){return typeof r=="string"||r==null?r:a(r)}function bne(a,r){return e=>a.reduce((t,s)=>(t[s]=dp(r,e),t),{})}function wne(a,r,e,t){if(!r.includes(e))return null;const s=vne(e),o=bne(s,t),i=a[e];return sc(a,i,o)}function GP(a,r){const e=Hb(a.theme);return Object.keys(a).map(t=>wne(a,r,t,e)).reduce(iy,{})}function Fs(a){return GP(a,l2)}Fs.propTypes={};Fs.filterProps=l2;function Bs(a){return GP(a,c2)}Bs.propTypes={};Bs.filterProps=c2;function KP(a=8,r=Hb({spacing:a})){if(a.mui)return a;const e=(...t)=>(t.length===0?[1]:t).map(o=>{const i=r(o);return typeof i=="number"?`${i}px`:i}).join(" ");return e.mui=!0,e}function qb(...a){const r=a.reduce((t,s)=>(s.filterProps.forEach(o=>{t[o]=s}),t),{}),e=t=>Object.keys(t).reduce((s,o)=>r[o]?iy(s,r[o](t)):s,{});return e.propTypes={},e.filterProps=a.reduce((t,s)=>t.concat(s.filterProps),[]),e}function wl(a){return typeof a!="number"?a:`${a}px solid`}function El(a,r){return Ks({prop:a,themeKey:"borders",transform:r})}const jne=El("border",wl),Cne=El("borderTop",wl),Sne=El("borderRight",wl),Nne=El("borderBottom",wl),kne=El("borderLeft",wl),_ne=El("borderColor"),Ene=El("borderTopColor"),Tne=El("borderRightColor"),One=El("borderBottomColor"),Pne=El("borderLeftColor"),Ane=El("outline",wl),Mne=El("outlineColor"),Gb=a=>{if(a.borderRadius!==void 0&&a.borderRadius!==null){const r=Ky(a.theme,"shape.borderRadius",4),e=t=>({borderRadius:dp(r,t)});return sc(a,a.borderRadius,e)}return null};Gb.propTypes={};Gb.filterProps=["borderRadius"];qb(jne,Cne,Sne,Nne,kne,_ne,Ene,Tne,One,Pne,Gb,Ane,Mne);const Kb=a=>{if(a.gap!==void 0&&a.gap!==null){const r=Ky(a.theme,"spacing",8),e=t=>({gap:dp(r,t)});return sc(a,a.gap,e)}return null};Kb.propTypes={};Kb.filterProps=["gap"];const Yb=a=>{if(a.columnGap!==void 0&&a.columnGap!==null){const r=Ky(a.theme,"spacing",8),e=t=>({columnGap:dp(r,t)});return sc(a,a.columnGap,e)}return null};Yb.propTypes={};Yb.filterProps=["columnGap"];const Zb=a=>{if(a.rowGap!==void 0&&a.rowGap!==null){const r=Ky(a.theme,"spacing",8),e=t=>({rowGap:dp(r,t)});return sc(a,a.rowGap,e)}return null};Zb.propTypes={};Zb.filterProps=["rowGap"];const Ine=Ks({prop:"gridColumn"}),Rne=Ks({prop:"gridRow"}),Lne=Ks({prop:"gridAutoFlow"}),Dne=Ks({prop:"gridAutoColumns"}),Fne=Ks({prop:"gridAutoRows"}),Bne=Ks({prop:"gridTemplateColumns"}),zne=Ks({prop:"gridTemplateRows"}),Une=Ks({prop:"gridTemplateAreas"}),$ne=Ks({prop:"gridArea"});qb(Kb,Yb,Zb,Ine,Rne,Lne,Dne,Fne,Bne,zne,Une,$ne);function Fh(a,r){return r==="grey"?r:a}const Vne=Ks({prop:"color",themeKey:"palette",transform:Fh}),Wne=Ks({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Fh}),Hne=Ks({prop:"backgroundColor",themeKey:"palette",transform:Fh});qb(Vne,Wne,Hne);function Yi(a){return a<=1&&a!==0?`${a*100}%`:a}const qne=Ks({prop:"width",transform:Yi}),d2=a=>{if(a.maxWidth!==void 0&&a.maxWidth!==null){const r=e=>{const t=a.theme?.breakpoints?.values?.[e]||Wb[e];return t?a.theme?.breakpoints?.unit!=="px"?{maxWidth:`${t}${a.theme.breakpoints.unit}`}:{maxWidth:t}:{maxWidth:Yi(e)}};return sc(a,a.maxWidth,r)}return null};d2.filterProps=["maxWidth"];const Gne=Ks({prop:"minWidth",transform:Yi}),Kne=Ks({prop:"height",transform:Yi}),Yne=Ks({prop:"maxHeight",transform:Yi}),Zne=Ks({prop:"minHeight",transform:Yi});Ks({prop:"size",cssProperty:"width",transform:Yi});Ks({prop:"size",cssProperty:"height",transform:Yi});const Xne=Ks({prop:"boxSizing"});qb(qne,d2,Gne,Kne,Yne,Zne,Xne);const Yy={border:{themeKey:"borders",transform:wl},borderTop:{themeKey:"borders",transform:wl},borderRight:{themeKey:"borders",transform:wl},borderBottom:{themeKey:"borders",transform:wl},borderLeft:{themeKey:"borders",transform:wl},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:wl},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Gb},color:{themeKey:"palette",transform:Fh},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Fh},backgroundColor:{themeKey:"palette",transform:Fh},p:{style:Bs},pt:{style:Bs},pr:{style:Bs},pb:{style:Bs},pl:{style:Bs},px:{style:Bs},py:{style:Bs},padding:{style:Bs},paddingTop:{style:Bs},paddingRight:{style:Bs},paddingBottom:{style:Bs},paddingLeft:{style:Bs},paddingX:{style:Bs},paddingY:{style:Bs},paddingInline:{style:Bs},paddingInlineStart:{style:Bs},paddingInlineEnd:{style:Bs},paddingBlock:{style:Bs},paddingBlockStart:{style:Bs},paddingBlockEnd:{style:Bs},m:{style:Fs},mt:{style:Fs},mr:{style:Fs},mb:{style:Fs},ml:{style:Fs},mx:{style:Fs},my:{style:Fs},margin:{style:Fs},marginTop:{style:Fs},marginRight:{style:Fs},marginBottom:{style:Fs},marginLeft:{style:Fs},marginX:{style:Fs},marginY:{style:Fs},marginInline:{style:Fs},marginInlineStart:{style:Fs},marginInlineEnd:{style:Fs},marginBlock:{style:Fs},marginBlockStart:{style:Fs},marginBlockEnd:{style:Fs},displayPrint:{cssProperty:!1,transform:a=>({"@media print":{display:a}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Kb},rowGap:{style:Zb},columnGap:{style:Yb},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Yi},maxWidth:{style:d2},minWidth:{transform:Yi},height:{transform:Yi},maxHeight:{transform:Yi},minHeight:{transform:Yi},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function Qne(...a){const r=a.reduce((t,s)=>t.concat(Object.keys(s)),[]),e=new Set(r);return a.every(t=>e.size===Object.keys(t).length)}function Jne(a,r){return typeof a=="function"?a(r):a}function eae(){function a(e,t,s,o){const i={[e]:t,theme:s},l=o[e];if(!l)return{[e]:t};const{cssProperty:c=e,themeKey:d,transform:h,style:m}=l;if(t==null)return null;if(d==="typography"&&t==="inherit")return{[e]:t};const y=Wc(s,d)||{};return m?m(i):sc(i,t,b=>{let v=fb(y,h,b);return b===v&&typeof b=="string"&&(v=fb(y,h,`${e}${b==="default"?"":Yt(b)}`,b)),c===!1?v:{[c]:v}})}function r(e){const{sx:t,theme:s={},nested:o}=e||{};if(!t)return null;const i=s.unstable_sxConfig??Yy;function l(c){let d=c;if(typeof c=="function")d=c(s);else if(typeof c!="object")return c;if(!d)return null;const h=qP(s.breakpoints),m=Object.keys(h);let y=h;return Object.keys(d).forEach(x=>{const b=Jne(d[x],s);if(b!=null)if(typeof b=="object")if(i[x])y=iy(y,a(x,b,s,i));else{const v=sc({theme:s},b,j=>({[x]:j}));Qne(v,b)?y[x]=r({sx:b,theme:s,nested:!0}):y=iy(y,v)}else y=iy(y,a(x,b,s,i))}),!o&&s.modularCssLayers?{"@layer sx":J_(s,BC(m,y))}:J_(s,BC(m,y))}return Array.isArray(t)?t.map(l):l(t)}return r}const up=eae();up.filterProps=["sx"];function tae(a,r){const e=this;if(e.vars){if(!e.colorSchemes?.[a]||typeof e.getColorSchemeSelector!="function")return{};let t=e.getColorSchemeSelector(a);return t==="&"?r:((t.includes("data-")||t.includes("."))&&(t=`*:where(${t.replace(/\s*&$/,"")}) &`),{[t]:r})}return e.palette.mode===a?r:{}}function cm(a={},...r){const{breakpoints:e={},palette:t={},spacing:s,shape:o={},...i}=a,l=lne(e),c=KP(s);let d=jo({breakpoints:l,direction:"ltr",components:{},palette:{mode:"light",...t},spacing:c,shape:{...fne,...o}},i);return d=une(d),d.applyStyles=tae,d=r.reduce((h,m)=>jo(h,m),d),d.unstable_sxConfig={...Yy,...i?.unstable_sxConfig},d.unstable_sx=function(m){return up({sx:m,theme:this})},d}function rae(a){return Object.keys(a).length===0}function YP(a=null){const r=f.useContext(Vb);return!r||rae(r)?a:r}const nae=cm();function Zy(a=nae){return YP(a)}function f1(a){const r=Fu(a);return a!==r&&r.styles?(r.styles.match(/^@layer\s+[^{]*$/)||(r.styles=`@layer global{${r.styles}}`),r):a}function aae({styles:a,themeId:r,defaultTheme:e={}}){const t=Zy(e),s=r&&t[r]||t;let o=typeof a=="function"?a(s):a;return s.modularCssLayers&&(Array.isArray(o)?o=o.map(i=>f1(typeof i=="function"?i(s):i)):o=f1(o)),n.jsx(nne,{styles:o})}const sae=a=>{const r={systemProps:{},otherProps:{}},e=a?.theme?.unstable_sxConfig??Yy;return Object.keys(a).forEach(t=>{e[t]?r.systemProps[t]=a[t]:r.otherProps[t]=a[t]}),r};function Xb(a){const{sx:r,...e}=a,{systemProps:t,otherProps:s}=sae(e);let o;return Array.isArray(r)?o=[t,...r]:typeof r=="function"?o=(...i)=>{const l=r(...i);return qc(l)?{...t,...l}:t}:o={...t,...r},{...s,sx:o}}const rE=a=>a,oae=()=>{let a=rE;return{configure(r){a=r},generate(r){return a(r)},reset(){a=rE}}},ZP=oae();function XP(a){var r,e,t="";if(typeof a=="string"||typeof a=="number")t+=a;else if(typeof a=="object")if(Array.isArray(a)){var s=a.length;for(r=0;r<s;r++)a[r]&&(e=XP(a[r]))&&(t&&(t+=" "),t+=e)}else for(e in a)a[e]&&(t&&(t+=" "),t+=e);return t}function Tr(){for(var a,r,e=0,t="",s=arguments.length;e<s;e++)(a=arguments[e])&&(r=XP(a))&&(t&&(t+=" "),t+=r);return t}function iae(a={}){const{themeId:r,defaultTheme:e,defaultClassName:t="MuiBox-root",generateClassName:s}=a,o=VP("div",{shouldForwardProp:l=>l!=="theme"&&l!=="sx"&&l!=="as"})(up);return f.forwardRef(function(c,d){const h=Zy(e),{className:m,component:y="div",...x}=Xb(c);return n.jsx(o,{as:y,ref:d,className:Tr(m,s?s(t):t),theme:r&&h[r]||h,...x})})}const lae={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function an(a,r,e="Mui"){const t=lae[r];return t?`${e}-${t}`:`${ZP.generate(a)}-${r}`}function ln(a,r,e="Mui"){const t={};return r.forEach(s=>{t[s]=an(a,s,e)}),t}function QP(a){const{variants:r,...e}=a,t={variants:r,style:Fu(e),isProcessed:!0};return t.style===e||r&&r.forEach(s=>{typeof s.style!="function"&&(s.style=Fu(s.style))}),t}const cae=cm();function p1(a){return a!=="ownerState"&&a!=="theme"&&a!=="sx"&&a!=="as"}function Xf(a,r){return r&&a&&typeof a=="object"&&a.styles&&!a.styles.startsWith("@layer")&&(a.styles=`@layer ${r}{${String(a.styles)}}`),a}function dae(a){return a?(r,e)=>e[a]:null}function uae(a,r,e){a.theme=pae(a.theme)?e:a.theme[r]||a.theme}function K0(a,r,e){const t=typeof r=="function"?r(a):r;if(Array.isArray(t))return t.flatMap(s=>K0(a,s,e));if(Array.isArray(t?.variants)){let s;if(t.isProcessed)s=e?Xf(t.style,e):t.style;else{const{variants:o,...i}=t;s=e?Xf(Fu(i),e):i}return JP(a,t.variants,[s],e)}return t?.isProcessed?e?Xf(Fu(t.style),e):t.style:e?Xf(Fu(t),e):t}function JP(a,r,e=[],t=void 0){let s;e:for(let o=0;o<r.length;o+=1){const i=r[o];if(typeof i.props=="function"){if(s??={...a,...a.ownerState,ownerState:a.ownerState},!i.props(s))continue}else for(const l in i.props)if(a[l]!==i.props[l]&&a.ownerState?.[l]!==i.props[l])continue e;typeof i.style=="function"?(s??={...a,...a.ownerState,ownerState:a.ownerState},e.push(t?Xf(Fu(i.style(s)),t):i.style(s))):e.push(t?Xf(Fu(i.style),t):i.style)}return e}function eA(a={}){const{themeId:r,defaultTheme:e=cae,rootShouldForwardProp:t=p1,slotShouldForwardProp:s=p1}=a;function o(l){uae(l,r,e)}return(l,c={})=>{ane(l,F=>F.filter(z=>z!==up));const{name:d,slot:h,skipVariantsResolver:m,skipSx:y,overridesResolver:x=dae(mae(h)),...b}=c,v=d&&d.startsWith("Mui")||h?"components":"custom",j=m!==void 0?m:h&&h!=="Root"&&h!=="root"||!1,S=y||!1;let k=p1;h==="Root"||h==="root"?k=t:h?k=s:hae(l)&&(k=void 0);const N=VP(l,{shouldForwardProp:k,label:fae(),...b}),P=F=>{if(F.__emotion_real===F)return F;if(typeof F=="function")return function(H){return K0(H,F,H.theme.modularCssLayers?v:void 0)};if(qc(F)){const z=QP(F);return function(V){return z.variants?K0(V,z,V.theme.modularCssLayers?v:void 0):V.theme.modularCssLayers?Xf(z.style,v):z.style}}return F},R=(...F)=>{const z=[],H=F.map(P),V=[];if(z.push(o),d&&x&&V.push(function(q){const K=q.theme.components?.[d]?.styleOverrides;if(!K)return null;const D={};for(const Q in K)D[Q]=K0(q,K[Q],q.theme.modularCssLayers?"theme":void 0);return x(q,D)}),d&&!j&&V.push(function(q){const K=q.theme?.components?.[d]?.variants;return K?JP(q,K,[],q.theme.modularCssLayers?"theme":void 0):null}),S||V.push(up),Array.isArray(H[0])){const A=H.shift(),q=new Array(z.length).fill(""),I=new Array(V.length).fill("");let K;K=[...q,...A,...I],K.raw=[...q,...A.raw,...I],z.unshift(K)}const W=[...z,...H,...V],Z=N(...W);return l.muiName&&(Z.muiName=l.muiName),Z};return N.withConfig&&(R.withConfig=N.withConfig),R}}function fae(a,r){return void 0}function pae(a){for(const r in a)return!1;return!0}function hae(a){return typeof a=="string"&&a.charCodeAt(0)>96}function mae(a){return a&&a.charAt(0).toLowerCase()+a.slice(1)}const u2=eA();function ky(a,r,e=!1){const t={...r};for(const s in a)if(Object.prototype.hasOwnProperty.call(a,s)){const o=s;if(o==="components"||o==="slots")t[o]={...a[o],...t[o]};else if(o==="componentsProps"||o==="slotProps"){const i=a[o],l=r[o];if(!l)t[o]=i||{};else if(!i)t[o]=l;else{t[o]={...l};for(const c in i)if(Object.prototype.hasOwnProperty.call(i,c)){const d=c;t[o][d]=ky(i[d],l[d],e)}}}else o==="className"&&e&&r.className?t.className=Tr(a?.className,r?.className):o==="style"&&e&&r.style?t.style={...a?.style,...r?.style}:t[o]===void 0&&(t[o]=a[o])}return t}function tA(a){const{theme:r,name:e,props:t}=a;return!r||!r.components||!r.components[e]||!r.components[e].defaultProps?t:ky(r.components[e].defaultProps,t)}function f2({props:a,name:r,defaultTheme:e,themeId:t}){let s=Zy(e);return t&&(s=s[t]||s),tA({theme:s,name:r,props:a})}const Wd=typeof window<"u"?f.useLayoutEffect:f.useEffect;function gae(a,r,e,t,s){const[o,i]=f.useState(()=>s&&e?e(a).matches:t?t(a).matches:r);return Wd(()=>{if(!e)return;const l=e(a),c=()=>{i(l.matches)};return c(),l.addEventListener("change",c),()=>{l.removeEventListener("change",c)}},[a,e]),o}const yae={...Y0},rA=yae.useSyncExternalStore;function xae(a,r,e,t,s){const o=f.useCallback(()=>r,[r]),i=f.useMemo(()=>{if(s&&e)return()=>e(a).matches;if(t!==null){const{matches:h}=t(a);return()=>h}return o},[o,a,t,s,e]),[l,c]=f.useMemo(()=>{if(e===null)return[o,()=>()=>{}];const h=e(a);return[()=>h.matches,m=>(h.addEventListener("change",m),()=>{h.removeEventListener("change",m)})]},[o,e,a]);return rA(c,l,i)}function nA(a={}){const{themeId:r}=a;return function(t,s={}){let o=YP();o&&r&&(o=o[r]||o);const i=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:l=!1,matchMedia:c=i?window.matchMedia:null,ssrMatchMedia:d=null,noSsr:h=!1}=tA({name:"MuiUseMediaQuery",props:s,theme:o});let m=typeof t=="function"?t(o):t;return m=m.replace(/^@media( ?)/m,""),m.includes("print")&&console.warn(["MUI: You have provided a `print` query to the `useMediaQuery` hook.","Using the print media query to modify print styles can lead to unexpected results.","Consider using the `displayPrint` field in the `sx` prop instead.","More information about `displayPrint` on our docs: https://mui.com/system/display/#display-in-print."].join(`
`)),(rA!==void 0?xae:gae)(m,l,c,d,h)}}nA();function aA(a,r=Number.MIN_SAFE_INTEGER,e=Number.MAX_SAFE_INTEGER){return Math.max(r,Math.min(a,e))}function p2(a,r=0,e=1){return aA(a,r,e)}function vae(a){a=a.slice(1);const r=new RegExp(`.{1,${a.length>=6?2:1}}`,"g");let e=a.match(r);return e&&e[0].length===1&&(e=e.map(t=>t+t)),e?`rgb${e.length===4?"a":""}(${e.map((t,s)=>s<3?parseInt(t,16):Math.round(parseInt(t,16)/255*1e3)/1e3).join(", ")})`:""}function Uu(a){if(a.type)return a;if(a.charAt(0)==="#")return Uu(vae(a));const r=a.indexOf("("),e=a.substring(0,r);if(!["rgb","rgba","hsl","hsla","color"].includes(e))throw new Error(Vd(9,a));let t=a.substring(r+1,a.length-1),s;if(e==="color"){if(t=t.split(" "),s=t.shift(),t.length===4&&t[3].charAt(0)==="/"&&(t[3]=t[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(s))throw new Error(Vd(10,s))}else t=t.split(",");return t=t.map(o=>parseFloat(o)),{type:e,values:t,colorSpace:s}}const bae=a=>{const r=Uu(a);return r.values.slice(0,3).map((e,t)=>r.type.includes("hsl")&&t!==0?`${e}%`:e).join(" ")},Wg=(a,r)=>{try{return bae(a)}catch{return a}};function Qb(a){const{type:r,colorSpace:e}=a;let{values:t}=a;return r.includes("rgb")?t=t.map((s,o)=>o<3?parseInt(s,10):s):r.includes("hsl")&&(t[1]=`${t[1]}%`,t[2]=`${t[2]}%`),r.includes("color")?t=`${e} ${t.join(" ")}`:t=`${t.join(", ")}`,`${r}(${t})`}function sA(a){a=Uu(a);const{values:r}=a,e=r[0],t=r[1]/100,s=r[2]/100,o=t*Math.min(s,1-s),i=(d,h=(d+e/30)%12)=>s-o*Math.max(Math.min(h-3,9-h,1),-1);let l="rgb";const c=[Math.round(i(0)*255),Math.round(i(8)*255),Math.round(i(4)*255)];return a.type==="hsla"&&(l+="a",c.push(r[3])),Qb({type:l,values:c})}function zC(a){a=Uu(a);let r=a.type==="hsl"||a.type==="hsla"?Uu(sA(a)).values:a.values;return r=r.map(e=>(a.type!=="color"&&(e/=255),e<=.03928?e/12.92:((e+.055)/1.055)**2.4)),Number((.2126*r[0]+.7152*r[1]+.0722*r[2]).toFixed(3))}function wae(a,r){const e=zC(a),t=zC(r);return(Math.max(e,t)+.05)/(Math.min(e,t)+.05)}function _y(a,r){return a=Uu(a),r=p2(r),(a.type==="rgb"||a.type==="hsl")&&(a.type+="a"),a.type==="color"?a.values[3]=`/${r}`:a.values[3]=r,Qb(a)}function If(a,r,e){try{return _y(a,r)}catch{return a}}function Jb(a,r){if(a=Uu(a),r=p2(r),a.type.includes("hsl"))a.values[2]*=1-r;else if(a.type.includes("rgb")||a.type.includes("color"))for(let e=0;e<3;e+=1)a.values[e]*=1-r;return Qb(a)}function Va(a,r,e){try{return Jb(a,r)}catch{return a}}function ew(a,r){if(a=Uu(a),r=p2(r),a.type.includes("hsl"))a.values[2]+=(100-a.values[2])*r;else if(a.type.includes("rgb"))for(let e=0;e<3;e+=1)a.values[e]+=(255-a.values[e])*r;else if(a.type.includes("color"))for(let e=0;e<3;e+=1)a.values[e]+=(1-a.values[e])*r;return Qb(a)}function Wa(a,r,e){try{return ew(a,r)}catch{return a}}function UC(a,r=.15){return zC(a)>.5?Jb(a,r):ew(a,r)}function C0(a,r,e){try{return UC(a,r)}catch{return a}}const jae=f.createContext(),h2=()=>f.useContext(jae)??!1,Cae=f.createContext(void 0);function Sae(a){const{theme:r,name:e,props:t}=a;if(!r||!r.components||!r.components[e])return t;const s=r.components[e];return s.defaultProps?ky(s.defaultProps,t,r.components.mergeClassNameAndStyle):!s.styleOverrides&&!s.variants?ky(s,t,r.components.mergeClassNameAndStyle):t}function Nae({props:a,name:r}){const e=f.useContext(Cae);return Sae({props:a,name:r,theme:{components:e}})}let nE=0;function kae(a){const[r,e]=f.useState(a),t=a||r;return f.useEffect(()=>{r==null&&(nE+=1,e(`mui-${nE}`))},[r]),t}const _ae={...Y0},aE=_ae.useId;function qu(a){if(aE!==void 0){const r=aE();return a??r}return kae(a)}const sE={theme:void 0};function Eae(a){let r,e;return function(s){let o=r;return(o===void 0||s.theme!==e)&&(sE.theme=s.theme,o=QP(a(sE)),r=o,e=s.theme),o}}function Tae(a=""){function r(...t){if(!t.length)return"";const s=t[0];return typeof s=="string"&&!s.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${a?`${a}-`:""}${s}${r(...t.slice(1))})`:`, ${s}`}return(t,...s)=>`var(--${a?`${a}-`:""}${t}${r(...s)})`}const oE=(a,r,e,t=[])=>{let s=a;r.forEach((o,i)=>{i===r.length-1?Array.isArray(s)?s[Number(o)]=e:s&&typeof s=="object"&&(s[o]=e):s&&typeof s=="object"&&(s[o]||(s[o]=t.includes(o)?[]:{}),s=s[o])})},Oae=(a,r,e)=>{function t(s,o=[],i=[]){Object.entries(s).forEach(([l,c])=>{(!e||e&&!e([...o,l]))&&c!=null&&(typeof c=="object"&&Object.keys(c).length>0?t(c,[...o,l],Array.isArray(c)?[...i,l]:i):r([...o,l],c,i))})}t(a)},Pae=(a,r)=>typeof r=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(t=>a.includes(t))||a[a.length-1].toLowerCase().includes("opacity")?r:`${r}px`:r;function h1(a,r){const{prefix:e,shouldSkipGeneratingVar:t}=r||{},s={},o={},i={};return Oae(a,(l,c,d)=>{if((typeof c=="string"||typeof c=="number")&&(!t||!t(l,c))){const h=`--${e?`${e}-`:""}${l.join("-")}`,m=Pae(l,c);Object.assign(s,{[h]:m}),oE(o,l,`var(${h})`,d),oE(i,l,`var(${h}, ${m})`,d)}},l=>l[0]==="vars"),{css:s,vars:o,varsWithDefaults:i}}function Aae(a,r={}){const{getSelector:e=S,disableCssColorScheme:t,colorSchemeSelector:s,enableContrastVars:o}=r,{colorSchemes:i={},components:l,defaultColorScheme:c="light",...d}=a,{vars:h,css:m,varsWithDefaults:y}=h1(d,r);let x=y;const b={},{[c]:v,...j}=i;if(Object.entries(j||{}).forEach(([P,R])=>{const{vars:F,css:z,varsWithDefaults:H}=h1(R,r);x=jo(x,H),b[P]={css:z,vars:F}}),v){const{css:P,vars:R,varsWithDefaults:F}=h1(v,r);x=jo(x,F),b[c]={css:P,vars:R}}function S(P,R){let F=s;if(s==="class"&&(F=".%s"),s==="data"&&(F="[data-%s]"),s?.startsWith("data-")&&!s.includes("%s")&&(F=`[${s}="%s"]`),P){if(F==="media")return a.defaultColorScheme===P?":root":{[`@media (prefers-color-scheme: ${i[P]?.palette?.mode||P})`]:{":root":R}};if(F)return a.defaultColorScheme===P?`:root, ${F.replace("%s",String(P))}`:F.replace("%s",String(P))}return":root"}return{vars:x,generateThemeVars:()=>{let P={...h};return Object.entries(b).forEach(([,{vars:R}])=>{P=jo(P,R)}),P},generateStyleSheets:()=>{const P=[],R=a.defaultColorScheme||"light";function F(V,W){Object.keys(W).length&&P.push(typeof V=="string"?{[V]:{...W}}:V)}F(e(void 0,{...m}),m);const{[R]:z,...H}=b;if(z){const{css:V}=z,W=i[R]?.palette?.mode,Z=!t&&W?{colorScheme:W,...V}:{...V};F(e(R,{...Z}),Z)}return Object.entries(H).forEach(([V,{css:W}])=>{const Z=i[V]?.palette?.mode,A=!t&&Z?{colorScheme:Z,...W}:{...W};F(e(V,{...A}),A)}),o&&P.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),P}}}function Mae(a){return function(e){return a==="media"?`@media (prefers-color-scheme: ${e})`:a?a.startsWith("data-")&&!a.includes("%s")?`[${a}="${e}"] &`:a==="class"?`.${e} &`:a==="data"?`[data-${e}] &`:`${a.replace("%s",e)} &`:"&"}}function sn(a,r,e=void 0){const t={};for(const s in a){const o=a[s];let i="",l=!0;for(let c=0;c<o.length;c+=1){const d=o[c];d&&(i+=(l===!0?"":" ")+r(d),l=!1,e&&e[d]&&(i+=" "+e[d]))}t[s]=i}return t}const Iae=cm(),Rae=u2("div",{name:"MuiContainer",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.root,r[`maxWidth${Yt(String(e.maxWidth))}`],e.fixed&&r.fixed,e.disableGutters&&r.disableGutters]}}),Lae=a=>f2({props:a,name:"MuiContainer",defaultTheme:Iae}),Dae=(a,r)=>{const e=c=>an(r,c),{classes:t,fixed:s,disableGutters:o,maxWidth:i}=a,l={root:["root",i&&`maxWidth${Yt(String(i))}`,s&&"fixed",o&&"disableGutters"]};return sn(l,e,t)};function Fae(a={}){const{createStyledComponent:r=Rae,useThemeProps:e=Lae,componentName:t="MuiContainer"}=a,s=r(({theme:i,ownerState:l})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!l.disableGutters&&{paddingLeft:i.spacing(2),paddingRight:i.spacing(2),[i.breakpoints.up("sm")]:{paddingLeft:i.spacing(3),paddingRight:i.spacing(3)}}}),({theme:i,ownerState:l})=>l.fixed&&Object.keys(i.breakpoints.values).reduce((c,d)=>{const h=d,m=i.breakpoints.values[h];return m!==0&&(c[i.breakpoints.up(h)]={maxWidth:`${m}${i.breakpoints.unit}`}),c},{}),({theme:i,ownerState:l})=>({...l.maxWidth==="xs"&&{[i.breakpoints.up("xs")]:{maxWidth:Math.max(i.breakpoints.values.xs,444)}},...l.maxWidth&&l.maxWidth!=="xs"&&{[i.breakpoints.up(l.maxWidth)]:{maxWidth:`${i.breakpoints.values[l.maxWidth]}${i.breakpoints.unit}`}}}));return f.forwardRef(function(l,c){const d=e(l),{className:h,component:m="div",disableGutters:y=!1,fixed:x=!1,maxWidth:b="lg",classes:v,...j}=d,S={...d,component:m,disableGutters:y,fixed:x,maxWidth:b},k=Dae(S,t);return n.jsx(s,{as:m,ownerState:S,className:Tr(k.root,h),ref:c,...j})})}function ly(a,r){return f.isValidElement(a)&&r.indexOf(a.type.muiName??a.type?._payload?.value?.muiName)!==-1}const Bae=(a,r)=>a.filter(e=>r.includes(e)),dm=(a,r,e)=>{const t=a.keys[0];Array.isArray(r)?r.forEach((s,o)=>{e((i,l)=>{o<=a.keys.length-1&&(o===0?Object.assign(i,l):i[a.up(a.keys[o])]=l)},s)}):r&&typeof r=="object"?(Object.keys(r).length>a.keys.length?a.keys:Bae(a.keys,Object.keys(r))).forEach(o=>{if(a.keys.includes(o)){const i=r[o];i!==void 0&&e((l,c)=>{t===o?Object.assign(l,c):l[a.up(o)]=c},i)}}):(typeof r=="number"||typeof r=="string")&&e((s,o)=>{Object.assign(s,o)},r)};function pb(a){return`--Grid-${a}Spacing`}function tw(a){return`--Grid-parent-${a}Spacing`}const iE="--Grid-columns",Bh="--Grid-parent-columns",zae=({theme:a,ownerState:r})=>{const e={};return dm(a.breakpoints,r.size,(t,s)=>{let o={};s==="grow"&&(o={flexBasis:0,flexGrow:1,maxWidth:"100%"}),s==="auto"&&(o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof s=="number"&&(o={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${s} / var(${Bh}) - (var(${Bh}) - ${s}) * (var(${tw("column")}) / var(${Bh})))`}),t(e,o)}),e},Uae=({theme:a,ownerState:r})=>{const e={};return dm(a.breakpoints,r.offset,(t,s)=>{let o={};s==="auto"&&(o={marginLeft:"auto"}),typeof s=="number"&&(o={marginLeft:s===0?"0px":`calc(100% * ${s} / var(${Bh}) + var(${tw("column")}) * ${s} / var(${Bh}))`}),t(e,o)}),e},$ae=({theme:a,ownerState:r})=>{if(!r.container)return{};const e={[iE]:12};return dm(a.breakpoints,r.columns,(t,s)=>{const o=s??12;t(e,{[iE]:o,"> *":{[Bh]:o}})}),e},Vae=({theme:a,ownerState:r})=>{if(!r.container)return{};const e={};return dm(a.breakpoints,r.rowSpacing,(t,s)=>{const o=typeof s=="string"?s:a.spacing?.(s);t(e,{[pb("row")]:o,"> *":{[tw("row")]:o}})}),e},Wae=({theme:a,ownerState:r})=>{if(!r.container)return{};const e={};return dm(a.breakpoints,r.columnSpacing,(t,s)=>{const o=typeof s=="string"?s:a.spacing?.(s);t(e,{[pb("column")]:o,"> *":{[tw("column")]:o}})}),e},Hae=({theme:a,ownerState:r})=>{if(!r.container)return{};const e={};return dm(a.breakpoints,r.direction,(t,s)=>{t(e,{flexDirection:s})}),e},qae=({ownerState:a})=>({minWidth:0,boxSizing:"border-box",...a.container&&{display:"flex",flexWrap:"wrap",...a.wrap&&a.wrap!=="wrap"&&{flexWrap:a.wrap},gap:`var(${pb("row")}) var(${pb("column")})`}}),Gae=a=>{const r=[];return Object.entries(a).forEach(([e,t])=>{t!==!1&&t!==void 0&&r.push(`grid-${e}-${String(t)}`)}),r},Kae=(a,r="xs")=>{function e(t){return t===void 0?!1:typeof t=="string"&&!Number.isNaN(Number(t))||typeof t=="number"&&t>0}if(e(a))return[`spacing-${r}-${String(a)}`];if(typeof a=="object"&&!Array.isArray(a)){const t=[];return Object.entries(a).forEach(([s,o])=>{e(o)&&t.push(`spacing-${s}-${String(o)}`)}),t}return[]},Yae=a=>a===void 0?[]:typeof a=="object"?Object.entries(a).map(([r,e])=>`direction-${r}-${e}`):[`direction-xs-${String(a)}`];function Zae(a,r){a.item!==void 0&&delete a.item,a.zeroMinWidth!==void 0&&delete a.zeroMinWidth,r.keys.forEach(e=>{a[e]!==void 0&&delete a[e]})}const Xae=cm(),Qae=u2("div",{name:"MuiGrid",slot:"Root"});function Jae(a){return f2({props:a,name:"MuiGrid",defaultTheme:Xae})}function ese(a={}){const{createStyledComponent:r=Qae,useThemeProps:e=Jae,useTheme:t=Zy,componentName:s="MuiGrid"}=a,o=(d,h)=>{const{container:m,direction:y,spacing:x,wrap:b,size:v}=d,j={root:["root",m&&"container",b!=="wrap"&&`wrap-xs-${String(b)}`,...Yae(y),...Gae(v),...m?Kae(x,h.breakpoints.keys[0]):[]]};return sn(j,S=>an(s,S),{})};function i(d,h,m=()=>!0){const y={};return d===null||(Array.isArray(d)?d.forEach((x,b)=>{x!==null&&m(x)&&h.keys[b]&&(y[h.keys[b]]=x)}):typeof d=="object"?Object.keys(d).forEach(x=>{const b=d[x];b!=null&&m(b)&&(y[x]=b)}):y[h.keys[0]]=d),y}const l=r($ae,Wae,Vae,zae,Hae,qae,Uae),c=f.forwardRef(function(h,m){const y=t(),x=e(h),b=Xb(x);Zae(b,y.breakpoints);const{className:v,children:j,columns:S=12,container:k=!1,component:N="div",direction:P="row",wrap:R="wrap",size:F={},offset:z={},spacing:H=0,rowSpacing:V=H,columnSpacing:W=H,unstable_level:Z=0,...A}=b,q=i(F,y.breakpoints,G=>G!==!1),I=i(z,y.breakpoints),K=h.columns??(Z?void 0:S),D=h.spacing??(Z?void 0:H),Q=h.rowSpacing??h.spacing??(Z?void 0:V),oe=h.columnSpacing??h.spacing??(Z?void 0:W),re={...b,level:Z,columns:K,container:k,direction:P,wrap:R,spacing:D,rowSpacing:Q,columnSpacing:oe,size:q,offset:I},Te=o(re,y);return n.jsx(l,{ref:m,as:N,ownerState:re,className:Tr(Te.root,v),...A,children:f.Children.map(j,G=>f.isValidElement(G)&&ly(G,["Grid"])&&k&&G.props.container?f.cloneElement(G,{unstable_level:G.props?.unstable_level??Z+1}):G)})});return c.muiName="Grid",c}const tse=cm(),rse=u2("div",{name:"MuiStack",slot:"Root"});function nse(a){return f2({props:a,name:"MuiStack",defaultTheme:tse})}function ase(a,r){const e=f.Children.toArray(a).filter(Boolean);return e.reduce((t,s,o)=>(t.push(s),o<e.length-1&&t.push(f.cloneElement(r,{key:`separator-${o}`})),t),[])}const sse=a=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[a],ose=({ownerState:a,theme:r})=>{let e={display:"flex",flexDirection:"column",...sc({theme:r},u1({values:a.direction,breakpoints:r.breakpoints.values}),t=>({flexDirection:t}))};if(a.spacing){const t=Hb(r),s=Object.keys(r.breakpoints.values).reduce((c,d)=>((typeof a.spacing=="object"&&a.spacing[d]!=null||typeof a.direction=="object"&&a.direction[d]!=null)&&(c[d]=!0),c),{}),o=u1({values:a.direction,base:s}),i=u1({values:a.spacing,base:s});typeof o=="object"&&Object.keys(o).forEach((c,d,h)=>{if(!o[c]){const y=d>0?o[h[d-1]]:"column";o[c]=y}}),e=jo(e,sc({theme:r},i,(c,d)=>a.useFlexGap?{gap:dp(t,c)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${sse(d?o[d]:a.direction)}`]:dp(t,c)}}))}return e=hne(r.breakpoints,e),e};function ise(a={}){const{createStyledComponent:r=rse,useThemeProps:e=nse,componentName:t="MuiStack"}=a,s=()=>sn({root:["root"]},c=>an(t,c),{}),o=r(ose);return f.forwardRef(function(c,d){const h=e(c),m=Xb(h),{component:y="div",direction:x="column",spacing:b=0,divider:v,children:j,className:S,useFlexGap:k=!1,...N}=m,P={direction:x,spacing:b,useFlexGap:k},R=s();return n.jsx(o,{as:y,ownerState:P,ref:d,className:Tr(R.root,S),...N,children:v?ase(j,v):j})})}function oA(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:jy.white,default:jy.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const iA=oA();function lA(){return{text:{primary:jy.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:jy.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const $C=lA();function lE(a,r,e,t){const s=t.light||t,o=t.dark||t*1.5;a[r]||(a.hasOwnProperty(e)?a[r]=a[e]:r==="light"?a.light=ew(a.main,s):r==="dark"&&(a.dark=Jb(a.main,o)))}function cE(a,r,e,t,s){const o=s.light||s,i=s.dark||s*1.5;r[e]||(r.hasOwnProperty(t)?r[e]=r[t]:e==="light"?r.light=`color-mix(in ${a}, ${r.main}, #fff ${(o*100).toFixed(0)}%)`:e==="dark"&&(r.dark=`color-mix(in ${a}, ${r.main}, #000 ${(i*100).toFixed(0)}%)`))}function lse(a="light"){return a==="dark"?{main:ih[200],light:ih[50],dark:ih[400]}:{main:ih[700],light:ih[400],dark:ih[800]}}function cse(a="light"){return a==="dark"?{main:oh[200],light:oh[50],dark:oh[400]}:{main:oh[500],light:oh[300],dark:oh[700]}}function dse(a="light"){return a==="dark"?{main:sh[500],light:sh[300],dark:sh[700]}:{main:sh[700],light:sh[400],dark:sh[800]}}function use(a="light"){return a==="dark"?{main:lh[400],light:lh[300],dark:lh[700]}:{main:lh[700],light:lh[500],dark:lh[900]}}function fse(a="light"){return a==="dark"?{main:ch[400],light:ch[300],dark:ch[700]}:{main:ch[800],light:ch[500],dark:ch[900]}}function pse(a="light"){return a==="dark"?{main:Tg[400],light:Tg[300],dark:Tg[700]}:{main:"#ed6c02",light:Tg[500],dark:Tg[900]}}function hse(a){return`oklch(from ${a} var(--__l) 0 h / var(--__a))`}function m2(a){const{mode:r="light",contrastThreshold:e=3,tonalOffset:t=.2,colorSpace:s,...o}=a,i=a.primary||lse(r),l=a.secondary||cse(r),c=a.error||dse(r),d=a.info||use(r),h=a.success||fse(r),m=a.warning||pse(r);function y(j){return s?hse(j):wae(j,$C.text.primary)>=e?$C.text.primary:iA.text.primary}const x=({color:j,name:S,mainShade:k=500,lightShade:N=300,darkShade:P=700})=>{if(j={...j},!j.main&&j[k]&&(j.main=j[k]),!j.hasOwnProperty("main"))throw new Error(Vd(11,S?` (${S})`:"",k));if(typeof j.main!="string")throw new Error(Vd(12,S?` (${S})`:"",JSON.stringify(j.main)));return s?(cE(s,j,"light",N,t),cE(s,j,"dark",P,t)):(lE(j,"light",N,t),lE(j,"dark",P,t)),j.contrastText||(j.contrastText=y(j.main)),j};let b;return r==="light"?b=oA():r==="dark"&&(b=lA()),jo({common:{...jy},mode:r,primary:x({color:i,name:"primary"}),secondary:x({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:x({color:c,name:"error"}),warning:x({color:m,name:"warning"}),info:x({color:d,name:"info"}),success:x({color:h,name:"success"}),grey:are,contrastThreshold:e,getContrastText:y,augmentColor:x,tonalOffset:t,...b},o)}function mse(a){const r={};return Object.entries(a).forEach(t=>{const[s,o]=t;typeof o=="object"&&(r[s]=`${o.fontStyle?`${o.fontStyle} `:""}${o.fontVariant?`${o.fontVariant} `:""}${o.fontWeight?`${o.fontWeight} `:""}${o.fontStretch?`${o.fontStretch} `:""}${o.fontSize||""}${o.lineHeight?`/${o.lineHeight} `:""}${o.fontFamily||""}`)}),r}function gse(a,r){return{toolbar:{minHeight:56,[a.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[a.up("sm")]:{minHeight:64}},...r}}function yse(a){return Math.round(a*1e5)/1e5}const dE={textTransform:"uppercase"},uE='"Roboto", "Helvetica", "Arial", sans-serif';function xse(a,r){const{fontFamily:e=uE,fontSize:t=14,fontWeightLight:s=300,fontWeightRegular:o=400,fontWeightMedium:i=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:d,pxToRem:h,...m}=typeof r=="function"?r(a):r,y=t/14,x=h||(j=>`${j/c*y}rem`),b=(j,S,k,N,P)=>({fontFamily:e,fontWeight:j,fontSize:x(S),lineHeight:k,...e===uE?{letterSpacing:`${yse(N/S)}em`}:{},...P,...d}),v={h1:b(s,96,1.167,-1.5),h2:b(s,60,1.2,-.5),h3:b(o,48,1.167,0),h4:b(o,34,1.235,.25),h5:b(o,24,1.334,0),h6:b(i,20,1.6,.15),subtitle1:b(o,16,1.75,.15),subtitle2:b(i,14,1.57,.1),body1:b(o,16,1.5,.15),body2:b(o,14,1.43,.15),button:b(i,14,1.75,.4,dE),caption:b(o,12,1.66,.4),overline:b(o,12,2.66,1,dE),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return jo({htmlFontSize:c,pxToRem:x,fontFamily:e,fontSize:t,fontWeightLight:s,fontWeightRegular:o,fontWeightMedium:i,fontWeightBold:l,...v},m,{clone:!1})}const vse=.2,bse=.14,wse=.12;function Cs(...a){return[`${a[0]}px ${a[1]}px ${a[2]}px ${a[3]}px rgba(0,0,0,${vse})`,`${a[4]}px ${a[5]}px ${a[6]}px ${a[7]}px rgba(0,0,0,${bse})`,`${a[8]}px ${a[9]}px ${a[10]}px ${a[11]}px rgba(0,0,0,${wse})`].join(",")}const jse=["none",Cs(0,2,1,-1,0,1,1,0,0,1,3,0),Cs(0,3,1,-2,0,2,2,0,0,1,5,0),Cs(0,3,3,-2,0,3,4,0,0,1,8,0),Cs(0,2,4,-1,0,4,5,0,0,1,10,0),Cs(0,3,5,-1,0,5,8,0,0,1,14,0),Cs(0,3,5,-1,0,6,10,0,0,1,18,0),Cs(0,4,5,-2,0,7,10,1,0,2,16,1),Cs(0,5,5,-3,0,8,10,1,0,3,14,2),Cs(0,5,6,-3,0,9,12,1,0,3,16,2),Cs(0,6,6,-3,0,10,14,1,0,4,18,3),Cs(0,6,7,-4,0,11,15,1,0,4,20,3),Cs(0,7,8,-4,0,12,17,2,0,5,22,4),Cs(0,7,8,-4,0,13,19,2,0,5,24,4),Cs(0,7,9,-4,0,14,21,2,0,5,26,4),Cs(0,8,9,-5,0,15,22,2,0,6,28,5),Cs(0,8,10,-5,0,16,24,2,0,6,30,5),Cs(0,8,11,-5,0,17,26,2,0,6,32,5),Cs(0,9,11,-5,0,18,28,2,0,7,34,6),Cs(0,9,12,-6,0,19,29,2,0,7,36,6),Cs(0,10,13,-6,0,20,31,3,0,8,38,7),Cs(0,10,13,-6,0,21,33,3,0,8,40,7),Cs(0,10,14,-6,0,22,35,3,0,8,42,7),Cs(0,11,14,-7,0,23,36,3,0,9,44,8),Cs(0,11,15,-7,0,24,38,3,0,9,46,8)],Cse={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Sse={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function fE(a){return`${Math.round(a)}ms`}function Nse(a){if(!a)return 0;const r=a/36;return Math.min(Math.round((4+15*r**.25+r/5)*10),3e3)}function kse(a){const r={...Cse,...a.easing},e={...Sse,...a.duration};return{getAutoHeightDuration:Nse,create:(s=["all"],o={})=>{const{duration:i=e.standard,easing:l=r.easeInOut,delay:c=0,...d}=o;return(Array.isArray(s)?s:[s]).map(h=>`${h} ${typeof i=="string"?i:fE(i)} ${l} ${typeof c=="string"?c:fE(c)}`).join(",")},...a,easing:r,duration:e}}const _se={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Ese(a){return qc(a)||typeof a>"u"||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||Array.isArray(a)}function cA(a={}){const r={...a};function e(t){const s=Object.entries(t);for(let o=0;o<s.length;o++){const[i,l]=s[o];!Ese(l)||i.startsWith("unstable_")?delete t[i]:qc(l)&&(t[i]={...l},e(t[i]))}}return e(r),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(r,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function pE(a){return typeof a=="number"?`${(a*100).toFixed(0)}%`:`calc((${a}) * 100%)`}const Tse=a=>{if(!Number.isNaN(+a))return+a;const r=a.match(/\d*\.?\d+/g);if(!r)return 0;let e=0;for(let t=0;t<r.length;t+=1)e+=+r[t];return e};function Ose(a){Object.assign(a,{alpha(r,e){const t=this||a;return t.colorSpace?`oklch(from ${r} l c h / ${typeof e=="string"?`calc(${e})`:e})`:t.vars?`rgba(${r.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof e=="string"?`calc(${e})`:e})`:_y(r,Tse(e))},lighten(r,e){const t=this||a;return t.colorSpace?`color-mix(in ${t.colorSpace}, ${r}, #fff ${pE(e)})`:ew(r,e)},darken(r,e){const t=this||a;return t.colorSpace?`color-mix(in ${t.colorSpace}, ${r}, #000 ${pE(e)})`:Jb(r,e)}})}function VC(a={},...r){const{breakpoints:e,mixins:t={},spacing:s,palette:o={},transitions:i={},typography:l={},shape:c,colorSpace:d,...h}=a;if(a.vars&&a.generateThemeVars===void 0)throw new Error(Vd(20));const m=m2({...o,colorSpace:d}),y=cm(a);let x=jo(y,{mixins:gse(y.breakpoints,t),palette:m,shadows:jse.slice(),typography:xse(m,l),transitions:kse(i),zIndex:{..._se}});return x=jo(x,h),x=r.reduce((b,v)=>jo(b,v),x),x.unstable_sxConfig={...Yy,...h?.unstable_sxConfig},x.unstable_sx=function(v){return up({sx:v,theme:this})},x.toRuntimeSource=cA,Ose(x),x}function WC(a){let r;return a<1?r=5.11916*a**2:r=4.5*Math.log(a+1)+2,Math.round(r*10)/1e3}const Pse=[...Array(25)].map((a,r)=>{if(r===0)return"none";const e=WC(r);return`linear-gradient(rgba(255 255 255 / ${e}), rgba(255 255 255 / ${e}))`});function dA(a){return{inputPlaceholder:a==="dark"?.5:.42,inputUnderline:a==="dark"?.7:.42,switchTrackDisabled:a==="dark"?.2:.12,switchTrack:a==="dark"?.3:.38}}function uA(a){return a==="dark"?Pse:[]}function Ase(a){const{palette:r={mode:"light"},opacity:e,overlays:t,colorSpace:s,...o}=a,i=m2({...r,colorSpace:s});return{palette:i,opacity:{...dA(i.mode),...e},overlays:t||uA(i.mode),...o}}function Mse(a){return!!a[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!a[0].match(/sxConfig$/)||a[0]==="palette"&&!!a[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const Ise=a=>[...[...Array(25)].map((r,e)=>`--${a?`${a}-`:""}overlays-${e}`),`--${a?`${a}-`:""}palette-AppBar-darkBg`,`--${a?`${a}-`:""}palette-AppBar-darkColor`],Rse=a=>(r,e)=>{const t=a.rootSelector||":root",s=a.colorSchemeSelector;let o=s;if(s==="class"&&(o=".%s"),s==="data"&&(o="[data-%s]"),s?.startsWith("data-")&&!s.includes("%s")&&(o=`[${s}="%s"]`),a.defaultColorScheme===r){if(r==="dark"){const i={};return Ise(a.cssVarPrefix).forEach(l=>{i[l]=e[l],delete e[l]}),o==="media"?{[t]:e,"@media (prefers-color-scheme: dark)":{[t]:i}}:o?{[o.replace("%s",r)]:i,[`${t}, ${o.replace("%s",r)}`]:e}:{[t]:{...e,...i}}}if(o&&o!=="media")return`${t}, ${o.replace("%s",String(r))}`}else if(r){if(o==="media")return{[`@media (prefers-color-scheme: ${String(r)})`]:{[t]:e}};if(o)return o.replace("%s",String(r))}return t};function Lse(a,r){r.forEach(e=>{a[e]||(a[e]={})})}function rr(a,r,e){!a[r]&&e&&(a[r]=e)}function Hg(a){return typeof a!="string"||!a.startsWith("hsl")?a:sA(a)}function _d(a,r){`${r}Channel`in a||(a[`${r}Channel`]=Wg(Hg(a[r])))}function Dse(a){return typeof a=="number"?`${a}px`:typeof a=="string"||typeof a=="function"||Array.isArray(a)?a:"8px"}const Lc=a=>{try{return a()}catch{}},Fse=(a="mui")=>Tae(a);function m1(a,r,e,t,s){if(!e)return;e=e===!0?{}:e;const o=s==="dark"?"dark":"light";if(!t){r[s]=Ase({...e,palette:{mode:o,...e?.palette},colorSpace:a});return}const{palette:i,...l}=VC({...t,palette:{mode:o,...e?.palette},colorSpace:a});return r[s]={...e,palette:i,opacity:{...dA(o),...e?.opacity},overlays:e?.overlays||uA(o)},l}function Bse(a={},...r){const{colorSchemes:e={light:!0},defaultColorScheme:t,disableCssColorScheme:s=!1,cssVarPrefix:o="mui",nativeColor:i=!1,shouldSkipGeneratingVar:l=Mse,colorSchemeSelector:c=e.light&&e.dark?"media":void 0,rootSelector:d=":root",...h}=a,m=Object.keys(e)[0],y=t||(e.light&&m!=="light"?"light":m),x=Fse(o),{[y]:b,light:v,dark:j,...S}=e,k={...S};let N=b;if((y==="dark"&&!("dark"in e)||y==="light"&&!("light"in e))&&(N=!0),!N)throw new Error(Vd(21,y));let P;i&&(P="oklch");const R=m1(P,k,N,h,y);v&&!k.light&&m1(P,k,v,void 0,"light"),j&&!k.dark&&m1(P,k,j,void 0,"dark");let F={defaultColorScheme:y,...R,cssVarPrefix:o,colorSchemeSelector:c,rootSelector:d,getCssVar:x,colorSchemes:k,font:{...mse(R.typography),...R.font},spacing:Dse(h.spacing)};Object.keys(F.colorSchemes).forEach(Z=>{const A=F.colorSchemes[Z].palette,q=K=>{const D=K.split("-"),Q=D[1],oe=D[2];return x(K,A[Q][oe])};A.mode==="light"&&(rr(A.common,"background","#fff"),rr(A.common,"onBackground","#000")),A.mode==="dark"&&(rr(A.common,"background","#000"),rr(A.common,"onBackground","#fff"));function I(K,D,Q){if(P){let oe;return K===If&&(oe=`transparent ${((1-Q)*100).toFixed(0)}%`),K===Va&&(oe=`#000 ${(Q*100).toFixed(0)}%`),K===Wa&&(oe=`#fff ${(Q*100).toFixed(0)}%`),`color-mix(in ${P}, ${D}, ${oe})`}return K(D,Q)}if(Lse(A,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),A.mode==="light"){rr(A.Alert,"errorColor",I(Va,A.error.light,.6)),rr(A.Alert,"infoColor",I(Va,A.info.light,.6)),rr(A.Alert,"successColor",I(Va,A.success.light,.6)),rr(A.Alert,"warningColor",I(Va,A.warning.light,.6)),rr(A.Alert,"errorFilledBg",q("palette-error-main")),rr(A.Alert,"infoFilledBg",q("palette-info-main")),rr(A.Alert,"successFilledBg",q("palette-success-main")),rr(A.Alert,"warningFilledBg",q("palette-warning-main")),rr(A.Alert,"errorFilledColor",Lc(()=>A.getContrastText(A.error.main))),rr(A.Alert,"infoFilledColor",Lc(()=>A.getContrastText(A.info.main))),rr(A.Alert,"successFilledColor",Lc(()=>A.getContrastText(A.success.main))),rr(A.Alert,"warningFilledColor",Lc(()=>A.getContrastText(A.warning.main))),rr(A.Alert,"errorStandardBg",I(Wa,A.error.light,.9)),rr(A.Alert,"infoStandardBg",I(Wa,A.info.light,.9)),rr(A.Alert,"successStandardBg",I(Wa,A.success.light,.9)),rr(A.Alert,"warningStandardBg",I(Wa,A.warning.light,.9)),rr(A.Alert,"errorIconColor",q("palette-error-main")),rr(A.Alert,"infoIconColor",q("palette-info-main")),rr(A.Alert,"successIconColor",q("palette-success-main")),rr(A.Alert,"warningIconColor",q("palette-warning-main")),rr(A.AppBar,"defaultBg",q("palette-grey-100")),rr(A.Avatar,"defaultBg",q("palette-grey-400")),rr(A.Button,"inheritContainedBg",q("palette-grey-300")),rr(A.Button,"inheritContainedHoverBg",q("palette-grey-A100")),rr(A.Chip,"defaultBorder",q("palette-grey-400")),rr(A.Chip,"defaultAvatarColor",q("palette-grey-700")),rr(A.Chip,"defaultIconColor",q("palette-grey-700")),rr(A.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),rr(A.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),rr(A.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),rr(A.LinearProgress,"primaryBg",I(Wa,A.primary.main,.62)),rr(A.LinearProgress,"secondaryBg",I(Wa,A.secondary.main,.62)),rr(A.LinearProgress,"errorBg",I(Wa,A.error.main,.62)),rr(A.LinearProgress,"infoBg",I(Wa,A.info.main,.62)),rr(A.LinearProgress,"successBg",I(Wa,A.success.main,.62)),rr(A.LinearProgress,"warningBg",I(Wa,A.warning.main,.62)),rr(A.Skeleton,"bg",P?I(If,A.text.primary,.11):`rgba(${q("palette-text-primaryChannel")} / 0.11)`),rr(A.Slider,"primaryTrack",I(Wa,A.primary.main,.62)),rr(A.Slider,"secondaryTrack",I(Wa,A.secondary.main,.62)),rr(A.Slider,"errorTrack",I(Wa,A.error.main,.62)),rr(A.Slider,"infoTrack",I(Wa,A.info.main,.62)),rr(A.Slider,"successTrack",I(Wa,A.success.main,.62)),rr(A.Slider,"warningTrack",I(Wa,A.warning.main,.62));const K=P?I(Va,A.background.default,.6825):C0(A.background.default,.8);rr(A.SnackbarContent,"bg",K),rr(A.SnackbarContent,"color",Lc(()=>P?$C.text.primary:A.getContrastText(K))),rr(A.SpeedDialAction,"fabHoverBg",C0(A.background.paper,.15)),rr(A.StepConnector,"border",q("palette-grey-400")),rr(A.StepContent,"border",q("palette-grey-400")),rr(A.Switch,"defaultColor",q("palette-common-white")),rr(A.Switch,"defaultDisabledColor",q("palette-grey-100")),rr(A.Switch,"primaryDisabledColor",I(Wa,A.primary.main,.62)),rr(A.Switch,"secondaryDisabledColor",I(Wa,A.secondary.main,.62)),rr(A.Switch,"errorDisabledColor",I(Wa,A.error.main,.62)),rr(A.Switch,"infoDisabledColor",I(Wa,A.info.main,.62)),rr(A.Switch,"successDisabledColor",I(Wa,A.success.main,.62)),rr(A.Switch,"warningDisabledColor",I(Wa,A.warning.main,.62)),rr(A.TableCell,"border",I(Wa,I(If,A.divider,1),.88)),rr(A.Tooltip,"bg",I(If,A.grey[700],.92))}if(A.mode==="dark"){rr(A.Alert,"errorColor",I(Wa,A.error.light,.6)),rr(A.Alert,"infoColor",I(Wa,A.info.light,.6)),rr(A.Alert,"successColor",I(Wa,A.success.light,.6)),rr(A.Alert,"warningColor",I(Wa,A.warning.light,.6)),rr(A.Alert,"errorFilledBg",q("palette-error-dark")),rr(A.Alert,"infoFilledBg",q("palette-info-dark")),rr(A.Alert,"successFilledBg",q("palette-success-dark")),rr(A.Alert,"warningFilledBg",q("palette-warning-dark")),rr(A.Alert,"errorFilledColor",Lc(()=>A.getContrastText(A.error.dark))),rr(A.Alert,"infoFilledColor",Lc(()=>A.getContrastText(A.info.dark))),rr(A.Alert,"successFilledColor",Lc(()=>A.getContrastText(A.success.dark))),rr(A.Alert,"warningFilledColor",Lc(()=>A.getContrastText(A.warning.dark))),rr(A.Alert,"errorStandardBg",I(Va,A.error.light,.9)),rr(A.Alert,"infoStandardBg",I(Va,A.info.light,.9)),rr(A.Alert,"successStandardBg",I(Va,A.success.light,.9)),rr(A.Alert,"warningStandardBg",I(Va,A.warning.light,.9)),rr(A.Alert,"errorIconColor",q("palette-error-main")),rr(A.Alert,"infoIconColor",q("palette-info-main")),rr(A.Alert,"successIconColor",q("palette-success-main")),rr(A.Alert,"warningIconColor",q("palette-warning-main")),rr(A.AppBar,"defaultBg",q("palette-grey-900")),rr(A.AppBar,"darkBg",q("palette-background-paper")),rr(A.AppBar,"darkColor",q("palette-text-primary")),rr(A.Avatar,"defaultBg",q("palette-grey-600")),rr(A.Button,"inheritContainedBg",q("palette-grey-800")),rr(A.Button,"inheritContainedHoverBg",q("palette-grey-700")),rr(A.Chip,"defaultBorder",q("palette-grey-700")),rr(A.Chip,"defaultAvatarColor",q("palette-grey-300")),rr(A.Chip,"defaultIconColor",q("palette-grey-300")),rr(A.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),rr(A.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),rr(A.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),rr(A.LinearProgress,"primaryBg",I(Va,A.primary.main,.5)),rr(A.LinearProgress,"secondaryBg",I(Va,A.secondary.main,.5)),rr(A.LinearProgress,"errorBg",I(Va,A.error.main,.5)),rr(A.LinearProgress,"infoBg",I(Va,A.info.main,.5)),rr(A.LinearProgress,"successBg",I(Va,A.success.main,.5)),rr(A.LinearProgress,"warningBg",I(Va,A.warning.main,.5)),rr(A.Skeleton,"bg",P?I(If,A.text.primary,.13):`rgba(${q("palette-text-primaryChannel")} / 0.13)`),rr(A.Slider,"primaryTrack",I(Va,A.primary.main,.5)),rr(A.Slider,"secondaryTrack",I(Va,A.secondary.main,.5)),rr(A.Slider,"errorTrack",I(Va,A.error.main,.5)),rr(A.Slider,"infoTrack",I(Va,A.info.main,.5)),rr(A.Slider,"successTrack",I(Va,A.success.main,.5)),rr(A.Slider,"warningTrack",I(Va,A.warning.main,.5));const K=P?I(Wa,A.background.default,.985):C0(A.background.default,.98);rr(A.SnackbarContent,"bg",K),rr(A.SnackbarContent,"color",Lc(()=>P?iA.text.primary:A.getContrastText(K))),rr(A.SpeedDialAction,"fabHoverBg",C0(A.background.paper,.15)),rr(A.StepConnector,"border",q("palette-grey-600")),rr(A.StepContent,"border",q("palette-grey-600")),rr(A.Switch,"defaultColor",q("palette-grey-300")),rr(A.Switch,"defaultDisabledColor",q("palette-grey-600")),rr(A.Switch,"primaryDisabledColor",I(Va,A.primary.main,.55)),rr(A.Switch,"secondaryDisabledColor",I(Va,A.secondary.main,.55)),rr(A.Switch,"errorDisabledColor",I(Va,A.error.main,.55)),rr(A.Switch,"infoDisabledColor",I(Va,A.info.main,.55)),rr(A.Switch,"successDisabledColor",I(Va,A.success.main,.55)),rr(A.Switch,"warningDisabledColor",I(Va,A.warning.main,.55)),rr(A.TableCell,"border",I(Va,I(If,A.divider,1),.68)),rr(A.Tooltip,"bg",I(If,A.grey[700],.92))}_d(A.background,"default"),_d(A.background,"paper"),_d(A.common,"background"),_d(A.common,"onBackground"),_d(A,"divider"),Object.keys(A).forEach(K=>{const D=A[K];K!=="tonalOffset"&&D&&typeof D=="object"&&(D.main&&rr(A[K],"mainChannel",Wg(Hg(D.main))),D.light&&rr(A[K],"lightChannel",Wg(Hg(D.light))),D.dark&&rr(A[K],"darkChannel",Wg(Hg(D.dark))),D.contrastText&&rr(A[K],"contrastTextChannel",Wg(Hg(D.contrastText))),K==="text"&&(_d(A[K],"primary"),_d(A[K],"secondary")),K==="action"&&(D.active&&_d(A[K],"active"),D.selected&&_d(A[K],"selected")))})}),F=r.reduce((Z,A)=>jo(Z,A),F);const z={prefix:o,disableCssColorScheme:s,shouldSkipGeneratingVar:l,getSelector:Rse(F),enableContrastVars:i},{vars:H,generateThemeVars:V,generateStyleSheets:W}=Aae(F,z);return F.vars=H,Object.entries(F.colorSchemes[F.defaultColorScheme]).forEach(([Z,A])=>{F[Z]=A}),F.generateThemeVars=V,F.generateStyleSheets=W,F.generateSpacing=function(){return KP(h.spacing,Hb(this))},F.getColorSchemeSelector=Mae(c),F.spacing=F.generateSpacing(),F.shouldSkipGeneratingVar=l,F.unstable_sxConfig={...Yy,...h?.unstable_sxConfig},F.unstable_sx=function(A){return up({sx:A,theme:this})},F.toRuntimeSource=cA,F}function hE(a,r,e){a.colorSchemes&&e&&(a.colorSchemes[r]={...e!==!0&&e,palette:m2({...e===!0?{}:e.palette,mode:r})})}function fA(a={},...r){const{palette:e,cssVariables:t=!1,colorSchemes:s=e?void 0:{light:!0},defaultColorScheme:o=e?.mode,...i}=a,l=o||"light",c=s?.[l],d={...s,...e?{[l]:{...typeof c!="boolean"&&c,palette:e}}:void 0};if(t===!1){if(!("colorSchemes"in a))return VC(a,...r);let h=e;"palette"in a||d[l]&&(d[l]!==!0?h=d[l].palette:l==="dark"&&(h={mode:"dark"}));const m=VC({...a,palette:h},...r);return m.defaultColorScheme=l,m.colorSchemes=d,m.palette.mode==="light"&&(m.colorSchemes.light={...d.light!==!0&&d.light,palette:m.palette},hE(m,"dark",d.dark)),m.palette.mode==="dark"&&(m.colorSchemes.dark={...d.dark!==!0&&d.dark,palette:m.palette},hE(m,"light",d.light)),m}return!e&&!("light"in d)&&l==="light"&&(d.light=!0),Bse({...i,colorSchemes:d,defaultColorScheme:l,...typeof t!="boolean"&&t},...r)}const g2=fA();function uc(){const a=Zy(g2);return a[Wy]||a}function y2(a){return a!=="ownerState"&&a!=="theme"&&a!=="sx"&&a!=="as"}const Lo=a=>y2(a)&&a!=="classes",or=eA({themeId:Wy,defaultTheme:g2,rootShouldForwardProp:Lo});function HC(...a){return a.reduce((r,e)=>e==null?r:function(...s){r.apply(this,s),e.apply(this,s)},()=>{})}function zse(a){return n.jsx(aae,{...a,defaultTheme:g2,themeId:Wy})}function Use(a){return function(e){return n.jsx(zse,{styles:typeof a=="function"?t=>a({theme:t,...e}):a})}}function $se(){return Xb}const vn=Eae;function hn(a){return Nae(a)}function Vse(a){return an("MuiSvgIcon",a)}ln("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Wse=a=>{const{color:r,fontSize:e,classes:t}=a,s={root:["root",r!=="inherit"&&`color${Yt(r)}`,`fontSize${Yt(e)}`]};return sn(s,Vse,t)},Hse=or("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.root,e.color!=="inherit"&&r[`color${Yt(e.color)}`],r[`fontSize${Yt(e.fontSize)}`]]}})(vn(({theme:a})=>({userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:a.transitions?.create?.("fill",{duration:(a.vars??a).transitions?.duration?.shorter}),variants:[{props:r=>!r.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:a.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:a.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:a.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((a.vars??a).palette).filter(([,r])=>r&&r.main).map(([r])=>({props:{color:r},style:{color:(a.vars??a).palette?.[r]?.main}})),{props:{color:"action"},style:{color:(a.vars??a).palette?.action?.active}},{props:{color:"disabled"},style:{color:(a.vars??a).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}))),qC=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiSvgIcon"}),{children:s,className:o,color:i="inherit",component:l="svg",fontSize:c="medium",htmlColor:d,inheritViewBox:h=!1,titleAccess:m,viewBox:y="0 0 24 24",...x}=t,b=f.isValidElement(s)&&s.type==="svg",v={...t,color:i,component:l,fontSize:c,instanceFontSize:r.fontSize,inheritViewBox:h,viewBox:y,hasSvgAsChild:b},j={};h||(j.viewBox=y);const S=Wse(v);return n.jsxs(Hse,{as:l,className:Tr(S.root,o),focusable:"false",color:d,"aria-hidden":m?void 0:!0,role:m?"img":void 0,ref:e,...j,...x,...b&&s.props,ownerState:v,children:[b?s.props.children:s,m?n.jsx("title",{children:m}):null]})});qC.muiName="SvgIcon";function yn(a,r){function e(t,s){return n.jsx(qC,{"data-testid":void 0,ref:s,...t,children:a})}return e.muiName=qC.muiName,f.memo(f.forwardRef(e))}function x2(a,r=166){let e;function t(...s){const o=()=>{a.apply(this,s)};clearTimeout(e),e=setTimeout(o,r)}return t.clear=()=>{clearTimeout(e)},t}function oc(a){return a&&a.ownerDocument||document}function ic(a){return oc(a).defaultView||window}function mE(a,r){typeof a=="function"?a(r):a&&(a.current=r)}function Ey(a){const{controlled:r,default:e,name:t,state:s="value"}=a,{current:o}=f.useRef(r!==void 0),[i,l]=f.useState(e),c=o?r:i,d=f.useCallback(h=>{o||l(h)},[]);return[c,d]}function tp(a){const r=f.useRef(a);return Wd(()=>{r.current=a}),f.useRef((...e)=>(0,r.current)(...e)).current}function to(...a){const r=f.useRef(void 0),e=f.useCallback(t=>{const s=a.map(o=>{if(o==null)return null;if(typeof o=="function"){const i=o,l=i(t);return typeof l=="function"?l:()=>{i(null)}}return o.current=t,()=>{o.current=null}});return()=>{s.forEach(o=>o?.())}},a);return f.useMemo(()=>a.every(t=>t==null)?null:t=>{r.current&&(r.current(),r.current=void 0),t!=null&&(r.current=e(t))},a)}function qse(a,r){const e=a.charCodeAt(2);return a[0]==="o"&&a[1]==="n"&&e>=65&&e<=90&&typeof r=="function"}function v2(a,r){if(!a)return r;function e(i,l){const c={};return Object.keys(l).forEach(d=>{qse(d,l[d])&&typeof i[d]=="function"&&(c[d]=(...h)=>{i[d](...h),l[d](...h)})}),c}if(typeof a=="function"||typeof r=="function")return i=>{const l=typeof r=="function"?r(i):r,c=typeof a=="function"?a({...i,...l}):a,d=Tr(i?.className,l?.className,c?.className),h=e(c,l);return{...l,...c,...h,...!!d&&{className:d},...l?.style&&c?.style&&{style:{...l.style,...c.style}},...l?.sx&&c?.sx&&{sx:[...Array.isArray(l.sx)?l.sx:[l.sx],...Array.isArray(c.sx)?c.sx:[c.sx]]}}};const t=r,s=e(a,t),o=Tr(t?.className,a?.className);return{...r,...a,...s,...!!o&&{className:o},...t?.style&&a?.style&&{style:{...t.style,...a.style}},...t?.sx&&a?.sx&&{sx:[...Array.isArray(t.sx)?t.sx:[t.sx],...Array.isArray(a.sx)?a.sx:[a.sx]]}}}function pA(a,r){if(a==null)return{};var e={};for(var t in a)if({}.hasOwnProperty.call(a,t)){if(r.indexOf(t)!==-1)continue;e[t]=a[t]}return e}function GC(a,r){return GC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},GC(a,r)}function hA(a,r){a.prototype=Object.create(r.prototype),a.prototype.constructor=a,GC(a,r)}const gE={disabled:!1},hb=gr.createContext(null);var Gse=function(r){return r.scrollTop},qg="unmounted",Bf="exited",zf="entering",ph="entered",KC="exiting",fc=(function(a){hA(r,a);function r(t,s){var o;o=a.call(this,t,s)||this;var i=s,l=i&&!i.isMounting?t.enter:t.appear,c;return o.appearStatus=null,t.in?l?(c=Bf,o.appearStatus=zf):c=ph:t.unmountOnExit||t.mountOnEnter?c=qg:c=Bf,o.state={status:c},o.nextCallback=null,o}r.getDerivedStateFromProps=function(s,o){var i=s.in;return i&&o.status===qg?{status:Bf}:null};var e=r.prototype;return e.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},e.componentDidUpdate=function(s){var o=null;if(s!==this.props){var i=this.state.status;this.props.in?i!==zf&&i!==ph&&(o=zf):(i===zf||i===ph)&&(o=KC)}this.updateStatus(!1,o)},e.componentWillUnmount=function(){this.cancelNextCallback()},e.getTimeouts=function(){var s=this.props.timeout,o,i,l;return o=i=l=s,s!=null&&typeof s!="number"&&(o=s.exit,i=s.enter,l=s.appear!==void 0?s.appear:i),{exit:o,enter:i,appear:l}},e.updateStatus=function(s,o){if(s===void 0&&(s=!1),o!==null)if(this.cancelNextCallback(),o===zf){if(this.props.unmountOnExit||this.props.mountOnEnter){var i=this.props.nodeRef?this.props.nodeRef.current:s0.findDOMNode(this);i&&Gse(i)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Bf&&this.setState({status:qg})},e.performEnter=function(s){var o=this,i=this.props.enter,l=this.context?this.context.isMounting:s,c=this.props.nodeRef?[l]:[s0.findDOMNode(this),l],d=c[0],h=c[1],m=this.getTimeouts(),y=l?m.appear:m.enter;if(!s&&!i||gE.disabled){this.safeSetState({status:ph},function(){o.props.onEntered(d)});return}this.props.onEnter(d,h),this.safeSetState({status:zf},function(){o.props.onEntering(d,h),o.onTransitionEnd(y,function(){o.safeSetState({status:ph},function(){o.props.onEntered(d,h)})})})},e.performExit=function(){var s=this,o=this.props.exit,i=this.getTimeouts(),l=this.props.nodeRef?void 0:s0.findDOMNode(this);if(!o||gE.disabled){this.safeSetState({status:Bf},function(){s.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:KC},function(){s.props.onExiting(l),s.onTransitionEnd(i.exit,function(){s.safeSetState({status:Bf},function(){s.props.onExited(l)})})})},e.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},e.safeSetState=function(s,o){o=this.setNextCallback(o),this.setState(s,o)},e.setNextCallback=function(s){var o=this,i=!0;return this.nextCallback=function(l){i&&(i=!1,o.nextCallback=null,s(l))},this.nextCallback.cancel=function(){i=!1},this.nextCallback},e.onTransitionEnd=function(s,o){this.setNextCallback(o);var i=this.props.nodeRef?this.props.nodeRef.current:s0.findDOMNode(this),l=s==null&&!this.props.addEndListener;if(!i||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[i,this.nextCallback],d=c[0],h=c[1];this.props.addEndListener(d,h)}s!=null&&setTimeout(this.nextCallback,s)},e.render=function(){var s=this.state.status;if(s===qg)return null;var o=this.props,i=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var l=pA(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return gr.createElement(hb.Provider,{value:null},typeof i=="function"?i(s,l):gr.cloneElement(gr.Children.only(i),l))},r})(gr.Component);fc.contextType=hb;fc.propTypes={};function dh(){}fc.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:dh,onEntering:dh,onEntered:dh,onExit:dh,onExiting:dh,onExited:dh};fc.UNMOUNTED=qg;fc.EXITED=Bf;fc.ENTERING=zf;fc.ENTERED=ph;fc.EXITING=KC;function Kse(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function b2(a,r){var e=function(o){return r&&f.isValidElement(o)?r(o):o},t=Object.create(null);return a&&f.Children.map(a,function(s){return s}).forEach(function(s){t[s.key]=e(s)}),t}function Yse(a,r){a=a||{},r=r||{};function e(h){return h in r?r[h]:a[h]}var t=Object.create(null),s=[];for(var o in a)o in r?s.length&&(t[o]=s,s=[]):s.push(o);var i,l={};for(var c in r){if(t[c])for(i=0;i<t[c].length;i++){var d=t[c][i];l[t[c][i]]=e(d)}l[c]=e(c)}for(i=0;i<s.length;i++)l[s[i]]=e(s[i]);return l}function Qf(a,r,e){return e[r]!=null?e[r]:a.props[r]}function Zse(a,r){return b2(a.children,function(e){return f.cloneElement(e,{onExited:r.bind(null,e),in:!0,appear:Qf(e,"appear",a),enter:Qf(e,"enter",a),exit:Qf(e,"exit",a)})})}function Xse(a,r,e){var t=b2(a.children),s=Yse(r,t);return Object.keys(s).forEach(function(o){var i=s[o];if(f.isValidElement(i)){var l=o in r,c=o in t,d=r[o],h=f.isValidElement(d)&&!d.props.in;c&&(!l||h)?s[o]=f.cloneElement(i,{onExited:e.bind(null,i),in:!0,exit:Qf(i,"exit",a),enter:Qf(i,"enter",a)}):!c&&l&&!h?s[o]=f.cloneElement(i,{in:!1}):c&&l&&f.isValidElement(d)&&(s[o]=f.cloneElement(i,{onExited:e.bind(null,i),in:d.props.in,exit:Qf(i,"exit",a),enter:Qf(i,"enter",a)}))}}),s}var Qse=Object.values||function(a){return Object.keys(a).map(function(r){return a[r]})},Jse={component:"div",childFactory:function(r){return r}},w2=(function(a){hA(r,a);function r(t,s){var o;o=a.call(this,t,s)||this;var i=o.handleExited.bind(Kse(o));return o.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},o}var e=r.prototype;return e.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},e.componentWillUnmount=function(){this.mounted=!1},r.getDerivedStateFromProps=function(s,o){var i=o.children,l=o.handleExited,c=o.firstRender;return{children:c?Zse(s,l):Xse(s,i,l),firstRender:!1}},e.handleExited=function(s,o){var i=b2(this.props.children);s.key in i||(s.props.onExited&&s.props.onExited(o),this.mounted&&this.setState(function(l){var c=db({},l.children);return delete c[s.key],{children:c}}))},e.render=function(){var s=this.props,o=s.component,i=s.childFactory,l=pA(s,["component","childFactory"]),c=this.state.contextValue,d=Qse(this.state.children).map(i);return delete l.appear,delete l.enter,delete l.exit,o===null?gr.createElement(hb.Provider,{value:c},d):gr.createElement(hb.Provider,{value:c},gr.createElement(o,l,d))},r})(gr.Component);w2.propTypes={};w2.defaultProps=Jse;const yE={};function mA(a,r){const e=f.useRef(yE);return e.current===yE&&(e.current=a(r)),e}const eoe=[];function toe(a){f.useEffect(a,eoe)}class j2{static create(){return new j2}currentId=null;start(r,e){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,e()},r)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function gA(){const a=mA(j2.create).current;return toe(a.disposeEffect),a}const C2=a=>a.scrollTop;function Zh(a,r){const{timeout:e,easing:t,style:s={}}=a;return{duration:s.transitionDuration??(typeof e=="number"?e:e[r.mode]||0),easing:s.transitionTimingFunction??(typeof t=="object"?t[r.mode]:t),delay:s.transitionDelay}}function Xh(a){return typeof a=="string"}function yA(a,r,e){return a===void 0||Xh(a)?r:{...r,ownerState:{...r.ownerState,...e}}}function xA(a,r,e){return typeof a=="function"?a(r,e):a}function vA(a,r=[]){if(a===void 0)return{};const e={};return Object.keys(a).filter(t=>t.match(/^on[A-Z]/)&&typeof a[t]=="function"&&!r.includes(t)).forEach(t=>{e[t]=a[t]}),e}function xE(a){if(a===void 0)return{};const r={};return Object.keys(a).filter(e=>!(e.match(/^on[A-Z]/)&&typeof a[e]=="function")).forEach(e=>{r[e]=a[e]}),r}function bA(a){const{getSlotProps:r,additionalProps:e,externalSlotProps:t,externalForwardedProps:s,className:o}=a;if(!r){const x=Tr(e?.className,o,s?.className,t?.className),b={...e?.style,...s?.style,...t?.style},v={...e,...s,...t};return x.length>0&&(v.className=x),Object.keys(b).length>0&&(v.style=b),{props:v,internalRef:void 0}}const i=vA({...s,...t}),l=xE(t),c=xE(s),d=r(i),h=Tr(d?.className,e?.className,o,s?.className,t?.className),m={...d?.style,...e?.style,...s?.style,...t?.style},y={...d,...e,...c,...l};return h.length>0&&(y.className=h),Object.keys(m).length>0&&(y.style=m),{props:y,internalRef:d.ref}}function xn(a,r){const{className:e,elementType:t,ownerState:s,externalForwardedProps:o,internalForwardedProps:i,shouldForwardComponentProp:l=!1,...c}=r,{component:d,slots:h={[a]:void 0},slotProps:m={[a]:void 0},...y}=o,x=h[a]||t,b=xA(m[a],s),{props:{component:v,...j},internalRef:S}=bA({className:e,...c,externalForwardedProps:a==="root"?y:void 0,externalSlotProps:b}),k=to(S,b?.ref,r.ref),N=a==="root"?v||d:v,P=yA(x,{...a==="root"&&!d&&!h[a]&&i,...a!=="root"&&!h[a]&&i,...j,...N&&!l&&{as:N},...N&&l&&{component:N},ref:k},s);return[x,P]}function roe(a){return an("MuiPaper",a)}ln("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const noe=a=>{const{square:r,elevation:e,variant:t,classes:s}=a,o={root:["root",t,!r&&"rounded",t==="elevation"&&`elevation${e}`]};return sn(o,roe,s)},aoe=or("div",{name:"MuiPaper",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.root,r[e.variant],!e.square&&r.rounded,e.variant==="elevation"&&r[`elevation${e.elevation}`]]}})(vn(({theme:a})=>({backgroundColor:(a.vars||a).palette.background.paper,color:(a.vars||a).palette.text.primary,transition:a.transitions.create("box-shadow"),variants:[{props:({ownerState:r})=>!r.square,style:{borderRadius:a.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(a.vars||a).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),ta=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiPaper"}),s=uc(),{className:o,component:i="div",elevation:l=1,square:c=!1,variant:d="elevation",...h}=t,m={...t,component:i,elevation:l,square:c,variant:d},y=noe(m);return n.jsx(aoe,{as:i,ownerState:m,className:Tr(y.root,o),ref:e,...h,style:{...d==="elevation"&&{"--Paper-shadow":(s.vars||s).shadows[l],...s.vars&&{"--Paper-overlay":s.vars.overlays?.[l]},...!s.vars&&s.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${_y("#fff",WC(l))}, ${_y("#fff",WC(l))})`}},...h.style}})});function Qh(a){try{return a.matches(":focus-visible")}catch{}return!1}class mb{static create(){return new mb}static use(){const r=mA(mb.create).current,[e,t]=f.useState(!1);return r.shouldMount=e,r.setShouldMount=t,f.useEffect(r.mountEffect,[e]),r}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=ooe(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())};start(...r){this.mount().then(()=>this.ref.current?.start(...r))}stop(...r){this.mount().then(()=>this.ref.current?.stop(...r))}pulsate(...r){this.mount().then(()=>this.ref.current?.pulsate(...r))}}function soe(){return mb.use()}function ooe(){let a,r;const e=new Promise((t,s)=>{a=t,r=s});return e.resolve=a,e.reject=r,e}function ioe(a){const{className:r,classes:e,pulsate:t=!1,rippleX:s,rippleY:o,rippleSize:i,in:l,onExited:c,timeout:d}=a,[h,m]=f.useState(!1),y=Tr(r,e.ripple,e.rippleVisible,t&&e.ripplePulsate),x={width:i,height:i,top:-(i/2)+o,left:-(i/2)+s},b=Tr(e.child,h&&e.childLeaving,t&&e.childPulsate);return!l&&!h&&m(!0),f.useEffect(()=>{if(!l&&c!=null){const v=setTimeout(c,d);return()=>{clearTimeout(v)}}},[c,l,d]),n.jsx("span",{className:y,style:x,children:n.jsx("span",{className:b})})}const ml=ln("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),YC=550,loe=80,coe=Gy`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,doe=Gy`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,uoe=Gy`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,foe=or("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),poe=or(ioe,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${ml.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${coe};
    animation-duration: ${YC}ms;
    animation-timing-function: ${({theme:a})=>a.transitions.easing.easeInOut};
  }

  &.${ml.ripplePulsate} {
    animation-duration: ${({theme:a})=>a.transitions.duration.shorter}ms;
  }

  & .${ml.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${ml.childLeaving} {
    opacity: 0;
    animation-name: ${doe};
    animation-duration: ${YC}ms;
    animation-timing-function: ${({theme:a})=>a.transitions.easing.easeInOut};
  }

  & .${ml.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${uoe};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:a})=>a.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,hoe=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiTouchRipple"}),{center:s=!1,classes:o={},className:i,...l}=t,[c,d]=f.useState([]),h=f.useRef(0),m=f.useRef(null);f.useEffect(()=>{m.current&&(m.current(),m.current=null)},[c]);const y=f.useRef(!1),x=gA(),b=f.useRef(null),v=f.useRef(null),j=f.useCallback(P=>{const{pulsate:R,rippleX:F,rippleY:z,rippleSize:H,cb:V}=P;d(W=>[...W,n.jsx(poe,{classes:{ripple:Tr(o.ripple,ml.ripple),rippleVisible:Tr(o.rippleVisible,ml.rippleVisible),ripplePulsate:Tr(o.ripplePulsate,ml.ripplePulsate),child:Tr(o.child,ml.child),childLeaving:Tr(o.childLeaving,ml.childLeaving),childPulsate:Tr(o.childPulsate,ml.childPulsate)},timeout:YC,pulsate:R,rippleX:F,rippleY:z,rippleSize:H},h.current)]),h.current+=1,m.current=V},[o]),S=f.useCallback((P={},R={},F=()=>{})=>{const{pulsate:z=!1,center:H=s||R.pulsate,fakeElement:V=!1}=R;if(P?.type==="mousedown"&&y.current){y.current=!1;return}P?.type==="touchstart"&&(y.current=!0);const W=V?null:v.current,Z=W?W.getBoundingClientRect():{width:0,height:0,left:0,top:0};let A,q,I;if(H||P===void 0||P.clientX===0&&P.clientY===0||!P.clientX&&!P.touches)A=Math.round(Z.width/2),q=Math.round(Z.height/2);else{const{clientX:K,clientY:D}=P.touches&&P.touches.length>0?P.touches[0]:P;A=Math.round(K-Z.left),q=Math.round(D-Z.top)}if(H)I=Math.sqrt((2*Z.width**2+Z.height**2)/3),I%2===0&&(I+=1);else{const K=Math.max(Math.abs((W?W.clientWidth:0)-A),A)*2+2,D=Math.max(Math.abs((W?W.clientHeight:0)-q),q)*2+2;I=Math.sqrt(K**2+D**2)}P?.touches?b.current===null&&(b.current=()=>{j({pulsate:z,rippleX:A,rippleY:q,rippleSize:I,cb:F})},x.start(loe,()=>{b.current&&(b.current(),b.current=null)})):j({pulsate:z,rippleX:A,rippleY:q,rippleSize:I,cb:F})},[s,j,x]),k=f.useCallback(()=>{S({},{pulsate:!0})},[S]),N=f.useCallback((P,R)=>{if(x.clear(),P?.type==="touchend"&&b.current){b.current(),b.current=null,x.start(0,()=>{N(P,R)});return}b.current=null,d(F=>F.length>0?F.slice(1):F),m.current=R},[x]);return f.useImperativeHandle(e,()=>({pulsate:k,start:S,stop:N}),[k,S,N]),n.jsx(foe,{className:Tr(ml.root,o.root,i),ref:v,...l,children:n.jsx(w2,{component:null,exit:!0,children:c})})});function moe(a){return an("MuiButtonBase",a)}const goe=ln("MuiButtonBase",["root","disabled","focusVisible"]),yoe=a=>{const{disabled:r,focusVisible:e,focusVisibleClassName:t,classes:s}=a,i=sn({root:["root",r&&"disabled",e&&"focusVisible"]},moe,s);return e&&t&&(i.root+=` ${t}`),i},xoe=or("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${goe.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),$u=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiButtonBase"}),{action:s,centerRipple:o=!1,children:i,className:l,component:c="button",disabled:d=!1,disableRipple:h=!1,disableTouchRipple:m=!1,focusRipple:y=!1,focusVisibleClassName:x,LinkComponent:b="a",onBlur:v,onClick:j,onContextMenu:S,onDragLeave:k,onFocus:N,onFocusVisible:P,onKeyDown:R,onKeyUp:F,onMouseDown:z,onMouseLeave:H,onMouseUp:V,onTouchEnd:W,onTouchMove:Z,onTouchStart:A,tabIndex:q=0,TouchRippleProps:I,touchRippleRef:K,type:D,...Q}=t,oe=f.useRef(null),re=soe(),Te=to(re.ref,K),[G,Y]=f.useState(!1);d&&G&&Y(!1),f.useImperativeHandle(s,()=>({focusVisible:()=>{Y(!0),oe.current.focus()}}),[]);const Se=re.shouldMount&&!h&&!d;f.useEffect(()=>{G&&y&&!h&&re.pulsate()},[h,y,G,re]);const fe=Ed(re,"start",z,m),Ee=Ed(re,"stop",S,m),Ae=Ed(re,"stop",k,m),qe=Ed(re,"stop",V,m),we=Ed(re,"stop",ue=>{G&&ue.preventDefault(),H&&H(ue)},m),Oe=Ed(re,"start",A,m),ze=Ed(re,"stop",W,m),We=Ed(re,"stop",Z,m),pt=Ed(re,"stop",ue=>{Qh(ue.target)||Y(!1),v&&v(ue)},!1),Pt=tp(ue=>{oe.current||(oe.current=ue.currentTarget),Qh(ue.target)&&(Y(!0),P&&P(ue)),N&&N(ue)}),ee=()=>{const ue=oe.current;return c&&c!=="button"&&!(ue.tagName==="A"&&ue.href)},Ne=tp(ue=>{y&&!ue.repeat&&G&&ue.key===" "&&re.stop(ue,()=>{re.start(ue)}),ue.target===ue.currentTarget&&ee()&&ue.key===" "&&ue.preventDefault(),R&&R(ue),ue.target===ue.currentTarget&&ee()&&ue.key==="Enter"&&!d&&(ue.preventDefault(),j&&j(ue))}),Ie=tp(ue=>{y&&ue.key===" "&&G&&!ue.defaultPrevented&&re.stop(ue,()=>{re.pulsate(ue)}),F&&F(ue),j&&ue.target===ue.currentTarget&&ee()&&ue.key===" "&&!ue.defaultPrevented&&j(ue)});let ne=c;ne==="button"&&(Q.href||Q.to)&&(ne=b);const M={};if(ne==="button"){const ue=!!Q.formAction;M.type=D===void 0&&!ue?"button":D,M.disabled=d}else!Q.href&&!Q.to&&(M.role="button"),d&&(M["aria-disabled"]=d);const U=to(e,oe),J={...t,centerRipple:o,component:c,disabled:d,disableRipple:h,disableTouchRipple:m,focusRipple:y,tabIndex:q,focusVisible:G},ce=yoe(J);return n.jsxs(xoe,{as:ne,className:Tr(ce.root,l),ownerState:J,onBlur:pt,onClick:j,onContextMenu:Ee,onFocus:Pt,onKeyDown:Ne,onKeyUp:Ie,onMouseDown:fe,onMouseLeave:we,onMouseUp:qe,onDragLeave:Ae,onTouchEnd:ze,onTouchMove:We,onTouchStart:Oe,ref:U,tabIndex:d?-1:q,type:D,...M,...Q,children:[i,Se?n.jsx(hoe,{ref:Te,center:o,...I}):null]})});function Ed(a,r,e,t=!1){return tp(s=>(e&&e(s),t||a[r](s),!0))}function voe(a){return typeof a.main=="string"}function boe(a,r=[]){if(!voe(a))return!1;for(const e of r)if(!a.hasOwnProperty(e)||typeof a[e]!="string")return!1;return!0}function Ss(a=[]){return([,r])=>r&&boe(r,a)}function woe(a){return an("MuiAlert",a)}const vE=ln("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function joe(a){return an("MuiCircularProgress",a)}ln("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","track","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Yl=44,ZC=Gy`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,XC=Gy`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,Coe=typeof ZC!="string"?i2`
        animation: ${ZC} 1.4s linear infinite;
      `:null,Soe=typeof XC!="string"?i2`
        animation: ${XC} 1.4s ease-in-out infinite;
      `:null,Noe=a=>{const{classes:r,variant:e,color:t,disableShrink:s}=a,o={root:["root",e,`color${Yt(t)}`],svg:["svg"],track:["track"],circle:["circle",`circle${Yt(e)}`,s&&"circleDisableShrink"]};return sn(o,joe,r)},koe=or("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.root,r[e.variant],r[`color${Yt(e.color)}`]]}})(vn(({theme:a})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:a.transitions.create("transform")}},{props:{variant:"indeterminate"},style:Coe||{animation:`${ZC} 1.4s linear infinite`}},...Object.entries(a.palette).filter(Ss()).map(([r])=>({props:{color:r},style:{color:(a.vars||a).palette[r].main}}))]}))),_oe=or("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),Eoe=or("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.circle,r[`circle${Yt(e.variant)}`],e.disableShrink&&r.circleDisableShrink]}})(vn(({theme:a})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:a.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:r})=>r.variant==="indeterminate"&&!r.disableShrink,style:Soe||{animation:`${XC} 1.4s ease-in-out infinite`}}]}))),Toe=or("circle",{name:"MuiCircularProgress",slot:"Track"})(vn(({theme:a})=>({stroke:"currentColor",opacity:(a.vars||a).palette.action.activatedOpacity}))),Jh=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiCircularProgress"}),{className:s,color:o="primary",disableShrink:i=!1,enableTrackSlot:l=!1,size:c=40,style:d,thickness:h=3.6,value:m=0,variant:y="indeterminate",...x}=t,b={...t,color:o,disableShrink:i,size:c,thickness:h,value:m,variant:y,enableTrackSlot:l},v=Noe(b),j={},S={},k={};if(y==="determinate"){const N=2*Math.PI*((Yl-h)/2);j.strokeDasharray=N.toFixed(3),k["aria-valuenow"]=Math.round(m),j.strokeDashoffset=`${((100-m)/100*N).toFixed(3)}px`,S.transform="rotate(-90deg)"}return n.jsx(koe,{className:Tr(v.root,s),style:{width:c,height:c,...S,...d},ownerState:b,ref:e,role:"progressbar",...k,...x,children:n.jsxs(_oe,{className:v.svg,ownerState:b,viewBox:`${Yl/2} ${Yl/2} ${Yl} ${Yl}`,children:[l?n.jsx(Toe,{className:v.track,ownerState:b,cx:Yl,cy:Yl,r:(Yl-h)/2,fill:"none",strokeWidth:h,"aria-hidden":"true"}):null,n.jsx(Eoe,{className:v.circle,style:j,ownerState:b,cx:Yl,cy:Yl,r:(Yl-h)/2,fill:"none",strokeWidth:h})]})})});function Ooe(a){return an("MuiIconButton",a)}const bE=ln("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),Poe=a=>{const{classes:r,disabled:e,color:t,edge:s,size:o,loading:i}=a,l={root:["root",i&&"loading",e&&"disabled",t!=="default"&&`color${Yt(t)}`,s&&`edge${Yt(s)}`,`size${Yt(o)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return sn(l,Ooe,r)},Aoe=or($u,{name:"MuiIconButton",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.root,e.loading&&r.loading,e.color!=="default"&&r[`color${Yt(e.color)}`],e.edge&&r[`edge${Yt(e.edge)}`],r[`size${Yt(e.size)}`]]}})(vn(({theme:a})=>({textAlign:"center",flex:"0 0 auto",fontSize:a.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(a.vars||a).palette.action.active,transition:a.transitions.create("background-color",{duration:a.transitions.duration.shortest}),variants:[{props:r=>!r.disableRipple,style:{"--IconButton-hoverBg":a.alpha((a.vars||a).palette.action.active,(a.vars||a).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),vn(({theme:a})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(a.palette).filter(Ss()).map(([r])=>({props:{color:r},style:{color:(a.vars||a).palette[r].main}})),...Object.entries(a.palette).filter(Ss()).map(([r])=>({props:{color:r},style:{"--IconButton-hoverBg":a.alpha((a.vars||a).palette[r].main,(a.vars||a).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:a.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:a.typography.pxToRem(28)}}],[`&.${bE.disabled}`]:{backgroundColor:"transparent",color:(a.vars||a).palette.action.disabled},[`&.${bE.loading}`]:{color:"transparent"}}))),Moe=or("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:a})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(a.vars||a).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),$n=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiIconButton"}),{edge:s=!1,children:o,className:i,color:l="default",disabled:c=!1,disableFocusRipple:d=!1,size:h="medium",id:m,loading:y=null,loadingIndicator:x,...b}=t,v=qu(m),j=x??n.jsx(Jh,{"aria-labelledby":v,color:"inherit",size:16}),S={...t,edge:s,color:l,disabled:c,disableFocusRipple:d,loading:y,loadingIndicator:j,size:h},k=Poe(S);return n.jsxs(Aoe,{id:y?v:m,className:Tr(k.root,i),centerRipple:!0,focusRipple:!d,disabled:c||y,ref:e,...b,ownerState:S,children:[typeof y=="boolean"&&n.jsx("span",{className:k.loadingWrapper,style:{display:"contents"},children:n.jsx(Moe,{className:k.loadingIndicator,ownerState:S,children:y&&j})}),o]})}),Ioe=yn(n.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"})),Roe=yn(n.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"})),Loe=yn(n.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),Doe=yn(n.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"})),Foe=yn(n.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),Boe=a=>{const{variant:r,color:e,severity:t,classes:s}=a,o={root:["root",`color${Yt(e||t)}`,`${r}${Yt(e||t)}`,`${r}`],icon:["icon"],message:["message"],action:["action"]};return sn(o,woe,s)},zoe=or(ta,{name:"MuiAlert",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.root,r[e.variant],r[`${e.variant}${Yt(e.color||e.severity)}`]]}})(vn(({theme:a})=>{const r=a.palette.mode==="light"?a.darken:a.lighten,e=a.palette.mode==="light"?a.lighten:a.darken;return{...a.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(a.palette).filter(Ss(["light"])).map(([t])=>({props:{colorSeverity:t,variant:"standard"},style:{color:a.vars?a.vars.palette.Alert[`${t}Color`]:r(a.palette[t].light,.6),backgroundColor:a.vars?a.vars.palette.Alert[`${t}StandardBg`]:e(a.palette[t].light,.9),[`& .${vE.icon}`]:a.vars?{color:a.vars.palette.Alert[`${t}IconColor`]}:{color:a.palette[t].main}}})),...Object.entries(a.palette).filter(Ss(["light"])).map(([t])=>({props:{colorSeverity:t,variant:"outlined"},style:{color:a.vars?a.vars.palette.Alert[`${t}Color`]:r(a.palette[t].light,.6),border:`1px solid ${(a.vars||a).palette[t].light}`,[`& .${vE.icon}`]:a.vars?{color:a.vars.palette.Alert[`${t}IconColor`]}:{color:a.palette[t].main}}})),...Object.entries(a.palette).filter(Ss(["dark"])).map(([t])=>({props:{colorSeverity:t,variant:"filled"},style:{fontWeight:a.typography.fontWeightMedium,...a.vars?{color:a.vars.palette.Alert[`${t}FilledColor`],backgroundColor:a.vars.palette.Alert[`${t}FilledBg`]}:{backgroundColor:a.palette.mode==="dark"?a.palette[t].dark:a.palette[t].main,color:a.palette.getContrastText(a.palette[t].main)}}}))]}})),Uoe=or("div",{name:"MuiAlert",slot:"Icon"})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),$oe=or("div",{name:"MuiAlert",slot:"Message"})({padding:"8px 0",minWidth:0,overflow:"auto"}),Voe=or("div",{name:"MuiAlert",slot:"Action"})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),Woe={success:n.jsx(Ioe,{fontSize:"inherit"}),warning:n.jsx(Roe,{fontSize:"inherit"}),error:n.jsx(Loe,{fontSize:"inherit"}),info:n.jsx(Doe,{fontSize:"inherit"})},wA=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiAlert"}),{action:s,children:o,className:i,closeText:l="Close",color:c,components:d={},componentsProps:h={},icon:m,iconMapping:y=Woe,onClose:x,role:b="alert",severity:v="success",slotProps:j={},slots:S={},variant:k="standard",...N}=t,P={...t,color:c,severity:v,variant:k,colorSeverity:c||v},R=Boe(P),F={slots:{closeButton:d.CloseButton,closeIcon:d.CloseIcon,...S},slotProps:{...h,...j}},[z,H]=xn("root",{ref:e,shouldForwardComponentProp:!0,className:Tr(R.root,i),elementType:zoe,externalForwardedProps:{...F,...N},ownerState:P,additionalProps:{role:b,elevation:0}}),[V,W]=xn("icon",{className:R.icon,elementType:Uoe,externalForwardedProps:F,ownerState:P}),[Z,A]=xn("message",{className:R.message,elementType:$oe,externalForwardedProps:F,ownerState:P}),[q,I]=xn("action",{className:R.action,elementType:Voe,externalForwardedProps:F,ownerState:P}),[K,D]=xn("closeButton",{elementType:$n,externalForwardedProps:F,ownerState:P}),[Q,oe]=xn("closeIcon",{elementType:Foe,externalForwardedProps:F,ownerState:P});return n.jsxs(z,{...H,children:[m!==!1?n.jsx(V,{...W,children:m||y[v]}):null,n.jsx(Z,{...A,children:o}),s!=null?n.jsx(q,{...I,children:s}):null,s==null&&x?n.jsx(q,{...I,children:n.jsx(K,{size:"small","aria-label":l,title:l,color:"inherit",onClick:x,...D,children:n.jsx(Q,{fontSize:"small",...oe})})}):null]})});function Hoe(a){return an("MuiTypography",a)}const wE=ln("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),qoe={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},Goe=$se(),Koe=a=>{const{align:r,gutterBottom:e,noWrap:t,paragraph:s,variant:o,classes:i}=a,l={root:["root",o,a.align!=="inherit"&&`align${Yt(r)}`,e&&"gutterBottom",t&&"noWrap",s&&"paragraph"]};return sn(l,Hoe,i)},Yoe=or("span",{name:"MuiTypography",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.root,e.variant&&r[e.variant],e.align!=="inherit"&&r[`align${Yt(e.align)}`],e.noWrap&&r.noWrap,e.gutterBottom&&r.gutterBottom,e.paragraph&&r.paragraph]}})(vn(({theme:a})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(a.typography).filter(([r,e])=>r!=="inherit"&&e&&typeof e=="object").map(([r,e])=>({props:{variant:r},style:e})),...Object.entries(a.palette).filter(Ss()).map(([r])=>({props:{color:r},style:{color:(a.vars||a).palette[r].main}})),...Object.entries(a.palette?.text||{}).filter(([,r])=>typeof r=="string").map(([r])=>({props:{color:`text${Yt(r)}`},style:{color:(a.vars||a).palette.text[r]}})),{props:({ownerState:r})=>r.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:r})=>r.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:r})=>r.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:r})=>r.paragraph,style:{marginBottom:16}}]}))),jE={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},et=f.forwardRef(function(r,e){const{color:t,...s}=hn({props:r,name:"MuiTypography"}),o=!qoe[t],i=Goe({...s,...o&&{color:t}}),{align:l="inherit",className:c,component:d,gutterBottom:h=!1,noWrap:m=!1,paragraph:y=!1,variant:x="body1",variantMapping:b=jE,...v}=i,j={...i,align:l,color:t,className:c,component:d,gutterBottom:h,noWrap:m,paragraph:y,variant:x,variantMapping:b},S=d||(y?"p":b[x]||jE[x])||"span",k=Koe(j);return n.jsx(Yoe,{as:S,ref:e,className:Tr(k.root,c),...v,ownerState:j,style:{...l!=="inherit"&&{"--Typography-textAlign":l},...v.style}})});function Zoe(a){return an("MuiAppBar",a)}ln("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const Xoe=a=>{const{color:r,position:e,classes:t}=a,s={root:["root",`color${Yt(r)}`,`position${Yt(e)}`]};return sn(s,Zoe,t)},CE=(a,r)=>a?`${a?.replace(")","")}, ${r})`:r,Qoe=or(ta,{name:"MuiAppBar",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.root,r[`position${Yt(e.position)}`],r[`color${Yt(e.color)}`]]}})(vn(({theme:a})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(a.vars||a).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(a.vars||a).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(a.vars||a).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit",color:"var(--AppBar-color)"}},{props:{color:"default"},style:{"--AppBar-background":a.vars?a.vars.palette.AppBar.defaultBg:a.palette.grey[100],"--AppBar-color":a.vars?a.vars.palette.text.primary:a.palette.getContrastText(a.palette.grey[100]),...a.applyStyles("dark",{"--AppBar-background":a.vars?a.vars.palette.AppBar.defaultBg:a.palette.grey[900],"--AppBar-color":a.vars?a.vars.palette.text.primary:a.palette.getContrastText(a.palette.grey[900])})}},...Object.entries(a.palette).filter(Ss(["contrastText"])).map(([r])=>({props:{color:r},style:{"--AppBar-background":(a.vars??a).palette[r].main,"--AppBar-color":(a.vars??a).palette[r].contrastText}})),{props:r=>r.enableColorOnDark===!0&&!["inherit","transparent"].includes(r.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:r=>r.enableColorOnDark===!1&&!["inherit","transparent"].includes(r.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...a.applyStyles("dark",{backgroundColor:a.vars?CE(a.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:a.vars?CE(a.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...a.applyStyles("dark",{backgroundImage:"none"})}}]}))),Joe=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiAppBar"}),{className:s,color:o="primary",enableColorOnDark:i=!1,position:l="fixed",...c}=t,d={...t,color:o,position:l,enableColorOnDark:i},h=Xoe(d);return n.jsx(Qoe,{square:!0,component:"header",ownerState:d,elevation:4,className:Tr(h.root,s,l==="fixed"&&"mui-fixed"),ref:e,...c})});function jA(a){const r=f.useRef({});return f.useEffect(()=>{r.current=a}),r.current}function CA(a){const{elementType:r,externalSlotProps:e,ownerState:t,skipResolvingSlotProps:s=!1,...o}=a,i=s?{}:xA(e,t),{props:l,internalRef:c}=bA({...o,externalSlotProps:i}),d=to(c,i?.ref,a.additionalProps?.ref);return yA(r,{...l,ref:d},t)}function um(a){return parseInt(f.version,10)>=19?a?.props?.ref||null:a?.ref||null}function eie(a){return typeof a=="function"?a():a}const tie=f.forwardRef(function(r,e){const{children:t,container:s,disablePortal:o=!1}=r,[i,l]=f.useState(null),c=to(f.isValidElement(t)?um(t):null,e);if(Wd(()=>{o||l(eie(s)||document.body)},[s,o]),Wd(()=>{if(i&&!o)return mE(e,i),()=>{mE(e,null)}},[e,i,o]),o){if(f.isValidElement(t)){const d={ref:c};return f.cloneElement(t,d)}return t}return i&&Cb.createPortal(t,i)}),rie=yn(n.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}));function nie(a){return an("MuiChip",a)}const ca=ln("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),aie=a=>{const{classes:r,disabled:e,size:t,color:s,iconColor:o,onDelete:i,clickable:l,variant:c}=a,d={root:["root",c,e&&"disabled",`size${Yt(t)}`,`color${Yt(s)}`,l&&"clickable",l&&`clickableColor${Yt(s)}`,i&&"deletable",i&&`deletableColor${Yt(s)}`,`${c}${Yt(s)}`],label:["label",`label${Yt(t)}`],avatar:["avatar",`avatar${Yt(t)}`,`avatarColor${Yt(s)}`],icon:["icon",`icon${Yt(t)}`,`iconColor${Yt(o)}`],deleteIcon:["deleteIcon",`deleteIcon${Yt(t)}`,`deleteIconColor${Yt(s)}`,`deleteIcon${Yt(c)}Color${Yt(s)}`]};return sn(d,nie,r)},sie=or("div",{name:"MuiChip",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a,{color:t,iconColor:s,clickable:o,onDelete:i,size:l,variant:c}=e;return[{[`& .${ca.avatar}`]:r.avatar},{[`& .${ca.avatar}`]:r[`avatar${Yt(l)}`]},{[`& .${ca.avatar}`]:r[`avatarColor${Yt(t)}`]},{[`& .${ca.icon}`]:r.icon},{[`& .${ca.icon}`]:r[`icon${Yt(l)}`]},{[`& .${ca.icon}`]:r[`iconColor${Yt(s)}`]},{[`& .${ca.deleteIcon}`]:r.deleteIcon},{[`& .${ca.deleteIcon}`]:r[`deleteIcon${Yt(l)}`]},{[`& .${ca.deleteIcon}`]:r[`deleteIconColor${Yt(t)}`]},{[`& .${ca.deleteIcon}`]:r[`deleteIcon${Yt(c)}Color${Yt(t)}`]},r.root,r[`size${Yt(l)}`],r[`color${Yt(t)}`],o&&r.clickable,o&&t!=="default"&&r[`clickableColor${Yt(t)}`],i&&r.deletable,i&&t!=="default"&&r[`deletableColor${Yt(t)}`],r[c],r[`${c}${Yt(t)}`]]}})(vn(({theme:a})=>{const r=a.palette.mode==="light"?a.palette.grey[700]:a.palette.grey[300];return{maxWidth:"100%",fontFamily:a.typography.fontFamily,fontSize:a.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,lineHeight:1.5,color:(a.vars||a).palette.text.primary,backgroundColor:(a.vars||a).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:a.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${ca.disabled}`]:{opacity:(a.vars||a).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${ca.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:a.vars?a.vars.palette.Chip.defaultAvatarColor:r,fontSize:a.typography.pxToRem(12)},[`& .${ca.avatarColorPrimary}`]:{color:(a.vars||a).palette.primary.contrastText,backgroundColor:(a.vars||a).palette.primary.dark},[`& .${ca.avatarColorSecondary}`]:{color:(a.vars||a).palette.secondary.contrastText,backgroundColor:(a.vars||a).palette.secondary.dark},[`& .${ca.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:a.typography.pxToRem(10)},[`& .${ca.icon}`]:{marginLeft:5,marginRight:-6},[`& .${ca.deleteIcon}`]:{WebkitTapHighlightColor:"transparent",color:a.alpha((a.vars||a).palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:a.alpha((a.vars||a).palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,[`& .${ca.icon}`]:{fontSize:18,marginLeft:4,marginRight:-4},[`& .${ca.deleteIcon}`]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(a.palette).filter(Ss(["contrastText"])).map(([e])=>({props:{color:e},style:{backgroundColor:(a.vars||a).palette[e].main,color:(a.vars||a).palette[e].contrastText,[`& .${ca.deleteIcon}`]:{color:a.alpha((a.vars||a).palette[e].contrastText,.7),"&:hover, &:active":{color:(a.vars||a).palette[e].contrastText}}}})),{props:e=>e.iconColor===e.color,style:{[`& .${ca.icon}`]:{color:a.vars?a.vars.palette.Chip.defaultIconColor:r}}},{props:e=>e.iconColor===e.color&&e.color!=="default",style:{[`& .${ca.icon}`]:{color:"inherit"}}},{props:{onDelete:!0},style:{[`&.${ca.focusVisible}`]:{backgroundColor:a.alpha((a.vars||a).palette.action.selected,`${(a.vars||a).palette.action.selectedOpacity} + ${(a.vars||a).palette.action.focusOpacity}`)}}},...Object.entries(a.palette).filter(Ss(["dark"])).map(([e])=>({props:{color:e,onDelete:!0},style:{[`&.${ca.focusVisible}`]:{background:(a.vars||a).palette[e].dark}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:a.alpha((a.vars||a).palette.action.selected,`${(a.vars||a).palette.action.selectedOpacity} + ${(a.vars||a).palette.action.hoverOpacity}`)},[`&.${ca.focusVisible}`]:{backgroundColor:a.alpha((a.vars||a).palette.action.selected,`${(a.vars||a).palette.action.selectedOpacity} + ${(a.vars||a).palette.action.focusOpacity}`)},"&:active":{boxShadow:(a.vars||a).shadows[1]}}},...Object.entries(a.palette).filter(Ss(["dark"])).map(([e])=>({props:{color:e,clickable:!0},style:{[`&:hover, &.${ca.focusVisible}`]:{backgroundColor:(a.vars||a).palette[e].dark}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:a.vars?`1px solid ${a.vars.palette.Chip.defaultBorder}`:`1px solid ${a.palette.mode==="light"?a.palette.grey[400]:a.palette.grey[700]}`,[`&.${ca.clickable}:hover`]:{backgroundColor:(a.vars||a).palette.action.hover},[`&.${ca.focusVisible}`]:{backgroundColor:(a.vars||a).palette.action.focus},[`& .${ca.avatar}`]:{marginLeft:4},[`& .${ca.avatarSmall}`]:{marginLeft:2},[`& .${ca.icon}`]:{marginLeft:4},[`& .${ca.iconSmall}`]:{marginLeft:2},[`& .${ca.deleteIcon}`]:{marginRight:5},[`& .${ca.deleteIconSmall}`]:{marginRight:3}}},...Object.entries(a.palette).filter(Ss()).map(([e])=>({props:{variant:"outlined",color:e},style:{color:(a.vars||a).palette[e].main,border:`1px solid ${a.alpha((a.vars||a).palette[e].main,.7)}`,[`&.${ca.clickable}:hover`]:{backgroundColor:a.alpha((a.vars||a).palette[e].main,(a.vars||a).palette.action.hoverOpacity)},[`&.${ca.focusVisible}`]:{backgroundColor:a.alpha((a.vars||a).palette[e].main,(a.vars||a).palette.action.focusOpacity)},[`& .${ca.deleteIcon}`]:{color:a.alpha((a.vars||a).palette[e].main,.7),"&:hover, &:active":{color:(a.vars||a).palette[e].main}}}}))]}})),oie=or("span",{name:"MuiChip",slot:"Label",overridesResolver:(a,r)=>{const{ownerState:e}=a,{size:t}=e;return[r.label,r[`label${Yt(t)}`]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function SE(a){return a.key==="Backspace"||a.key==="Delete"}const os=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiChip"}),{avatar:s,className:o,clickable:i,color:l="default",component:c,deleteIcon:d,disabled:h=!1,icon:m,label:y,onClick:x,onDelete:b,onKeyDown:v,onKeyUp:j,size:S="medium",variant:k="filled",tabIndex:N,skipFocusWhenDisabled:P=!1,slots:R={},slotProps:F={},...z}=t,H=f.useRef(null),V=to(H,e),W=Ae=>{Ae.stopPropagation(),b&&b(Ae)},Z=Ae=>{Ae.currentTarget===Ae.target&&SE(Ae)&&Ae.preventDefault(),v&&v(Ae)},A=Ae=>{Ae.currentTarget===Ae.target&&b&&SE(Ae)&&b(Ae),j&&j(Ae)},q=i!==!1&&x?!0:i,I=q||b?$u:c||"div",K={...t,component:I,disabled:h,size:S,color:l,iconColor:f.isValidElement(m)&&m.props.color||l,onDelete:!!b,clickable:q,variant:k},D=aie(K),Q=I===$u?{component:c||"div",focusVisibleClassName:D.focusVisible,...b&&{disableRipple:!0}}:{};let oe=null;b&&(oe=d&&f.isValidElement(d)?f.cloneElement(d,{className:Tr(d.props.className,D.deleteIcon),onClick:W}):n.jsx(rie,{className:D.deleteIcon,onClick:W}));let re=null;s&&f.isValidElement(s)&&(re=f.cloneElement(s,{className:Tr(D.avatar,s.props.className)}));let Te=null;m&&f.isValidElement(m)&&(Te=f.cloneElement(m,{className:Tr(D.icon,m.props.className)}));const G={slots:R,slotProps:F},[Y,Se]=xn("root",{elementType:sie,externalForwardedProps:{...G,...z},ownerState:K,shouldForwardComponentProp:!0,ref:V,className:Tr(D.root,o),additionalProps:{disabled:q&&h?!0:void 0,tabIndex:P&&h?-1:N,...Q},getSlotProps:Ae=>({...Ae,onClick:qe=>{Ae.onClick?.(qe),x?.(qe)},onKeyDown:qe=>{Ae.onKeyDown?.(qe),Z(qe)},onKeyUp:qe=>{Ae.onKeyUp?.(qe),A(qe)}})}),[fe,Ee]=xn("label",{elementType:oie,externalForwardedProps:G,ownerState:K,className:D.label});return n.jsxs(Y,{as:I,...Se,children:[re||Te,n.jsx(fe,{...Ee,children:y}),oe]})});function S0(a){return parseInt(a,10)||0}const iie={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function lie(a){for(const r in a)return!1;return!0}function NE(a){return lie(a)||a.outerHeightStyle===0&&!a.overflowing}const cie=f.forwardRef(function(r,e){const{onChange:t,maxRows:s,minRows:o=1,style:i,value:l,...c}=r,{current:d}=f.useRef(l!=null),h=f.useRef(null),m=to(e,h),y=f.useRef(null),x=f.useRef(null),b=f.useCallback(()=>{const N=h.current,P=x.current;if(!N||!P)return;const F=ic(N).getComputedStyle(N);if(F.width==="0px")return{outerHeightStyle:0,overflowing:!1};P.style.width=F.width,P.value=N.value||r.placeholder||"x",P.value.slice(-1)===`
`&&(P.value+=" ");const z=F.boxSizing,H=S0(F.paddingBottom)+S0(F.paddingTop),V=S0(F.borderBottomWidth)+S0(F.borderTopWidth),W=P.scrollHeight;P.value="x";const Z=P.scrollHeight;let A=W;o&&(A=Math.max(Number(o)*Z,A)),s&&(A=Math.min(Number(s)*Z,A)),A=Math.max(A,Z);const q=A+(z==="border-box"?H+V:0),I=Math.abs(A-W)<=1;return{outerHeightStyle:q,overflowing:I}},[s,o,r.placeholder]),v=tp(()=>{const N=h.current,P=b();if(!N||!P||NE(P))return!1;const R=P.outerHeightStyle;return y.current!=null&&y.current!==R}),j=f.useCallback(()=>{const N=h.current,P=b();if(!N||!P||NE(P))return;const R=P.outerHeightStyle;y.current!==R&&(y.current=R,N.style.height=`${R}px`),N.style.overflow=P.overflowing?"hidden":""},[b]),S=f.useRef(-1);Wd(()=>{const N=x2(j),P=h?.current;if(!P)return;const R=ic(P);R.addEventListener("resize",N);let F;return typeof ResizeObserver<"u"&&(F=new ResizeObserver(()=>{v()&&(F.unobserve(P),cancelAnimationFrame(S.current),j(),S.current=requestAnimationFrame(()=>{F.observe(P)}))}),F.observe(P)),()=>{N.clear(),cancelAnimationFrame(S.current),R.removeEventListener("resize",N),F&&F.disconnect()}},[b,j,v]),Wd(()=>{j()});const k=N=>{d||j();const P=N.target,R=P.value.length,F=P.value.endsWith(`
`),z=P.selectionStart===R;F&&z&&P.setSelectionRange(R,R),t&&t(N)};return n.jsxs(f.Fragment,{children:[n.jsx("textarea",{value:l,onChange:k,ref:m,rows:o,style:i,...c}),n.jsx("textarea",{"aria-hidden":!0,className:r.className,readOnly:!0,ref:x,tabIndex:-1,style:{...iie.shadow,...i,paddingTop:0,paddingBottom:0}})]})});function Gu({props:a,states:r,muiFormControl:e}){return r.reduce((t,s)=>(t[s]=a[s],e&&typeof a[s]>"u"&&(t[s]=e[s]),t),{})}const rw=f.createContext(void 0);function pc(){return f.useContext(rw)}function kE(a){return a!=null&&!(Array.isArray(a)&&a.length===0)}function gb(a,r=!1){return a&&(kE(a.value)&&a.value!==""||r&&kE(a.defaultValue)&&a.defaultValue!=="")}function die(a){return a.startAdornment}function uie(a){return an("MuiInputBase",a)}const em=ln("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var _E;const nw=(a,r)=>{const{ownerState:e}=a;return[r.root,e.formControl&&r.formControl,e.startAdornment&&r.adornedStart,e.endAdornment&&r.adornedEnd,e.error&&r.error,e.size==="small"&&r.sizeSmall,e.multiline&&r.multiline,e.color&&r[`color${Yt(e.color)}`],e.fullWidth&&r.fullWidth,e.hiddenLabel&&r.hiddenLabel]},aw=(a,r)=>{const{ownerState:e}=a;return[r.input,e.size==="small"&&r.inputSizeSmall,e.multiline&&r.inputMultiline,e.type==="search"&&r.inputTypeSearch,e.startAdornment&&r.inputAdornedStart,e.endAdornment&&r.inputAdornedEnd,e.hiddenLabel&&r.inputHiddenLabel]},fie=a=>{const{classes:r,color:e,disabled:t,error:s,endAdornment:o,focused:i,formControl:l,fullWidth:c,hiddenLabel:d,multiline:h,readOnly:m,size:y,startAdornment:x,type:b}=a,v={root:["root",`color${Yt(e)}`,t&&"disabled",s&&"error",c&&"fullWidth",i&&"focused",l&&"formControl",y&&y!=="medium"&&`size${Yt(y)}`,h&&"multiline",x&&"adornedStart",o&&"adornedEnd",d&&"hiddenLabel",m&&"readOnly"],input:["input",t&&"disabled",b==="search"&&"inputTypeSearch",h&&"inputMultiline",y==="small"&&"inputSizeSmall",d&&"inputHiddenLabel",x&&"inputAdornedStart",o&&"inputAdornedEnd",m&&"readOnly"]};return sn(v,uie,r)},sw=or("div",{name:"MuiInputBase",slot:"Root",overridesResolver:nw})(vn(({theme:a})=>({...a.typography.body1,color:(a.vars||a).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${em.disabled}`]:{color:(a.vars||a).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:r})=>r.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:r,size:e})=>r.multiline&&e==="small",style:{paddingTop:1}},{props:({ownerState:r})=>r.fullWidth,style:{width:"100%"}}]}))),ow=or("input",{name:"MuiInputBase",slot:"Input",overridesResolver:aw})(vn(({theme:a})=>{const r=a.palette.mode==="light",e={color:"currentColor",...a.vars?{opacity:a.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5},transition:a.transitions.create("opacity",{duration:a.transitions.duration.shorter})},t={opacity:"0 !important"},s=a.vars?{opacity:a.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":e,"&::-moz-placeholder":e,"&::-ms-input-placeholder":e,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${em.formControl} &`]:{"&::-webkit-input-placeholder":t,"&::-moz-placeholder":t,"&::-ms-input-placeholder":t,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus::-ms-input-placeholder":s},[`&.${em.disabled}`]:{opacity:1,WebkitTextFillColor:(a.vars||a).palette.text.disabled},variants:[{props:({ownerState:o})=>!o.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:o})=>o.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),EE=Use({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),S2=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiInputBase"}),{"aria-describedby":s,autoComplete:o,autoFocus:i,className:l,color:c,components:d={},componentsProps:h={},defaultValue:m,disabled:y,disableInjectingGlobalStyles:x,endAdornment:b,error:v,fullWidth:j=!1,id:S,inputComponent:k="input",inputProps:N={},inputRef:P,margin:R,maxRows:F,minRows:z,multiline:H=!1,name:V,onBlur:W,onChange:Z,onClick:A,onFocus:q,onKeyDown:I,onKeyUp:K,placeholder:D,readOnly:Q,renderSuffix:oe,rows:re,size:Te,slotProps:G={},slots:Y={},startAdornment:Se,type:fe="text",value:Ee,...Ae}=t,qe=N.value!=null?N.value:Ee,{current:we}=f.useRef(qe!=null),Oe=f.useRef(),ze=f.useCallback(le=>{},[]),We=to(Oe,P,N.ref,ze),[pt,Pt]=f.useState(!1),ee=pc(),Ne=Gu({props:t,muiFormControl:ee,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Ne.focused=ee?ee.focused:pt,f.useEffect(()=>{!ee&&y&&pt&&(Pt(!1),W&&W())},[ee,y,pt,W]);const Ie=ee&&ee.onFilled,ne=ee&&ee.onEmpty,M=f.useCallback(le=>{gb(le)?Ie&&Ie():ne&&ne()},[Ie,ne]);Wd(()=>{we&&M({value:qe})},[qe,M,we]);const U=le=>{q&&q(le),N.onFocus&&N.onFocus(le),ee&&ee.onFocus?ee.onFocus(le):Pt(!0)},J=le=>{W&&W(le),N.onBlur&&N.onBlur(le),ee&&ee.onBlur?ee.onBlur(le):Pt(!1)},ce=(le,...Xe)=>{if(!we){const Fe=le.target||Oe.current;if(Fe==null)throw new Error(Vd(1));M({value:Fe.value})}N.onChange&&N.onChange(le,...Xe),Z&&Z(le,...Xe)};f.useEffect(()=>{M(Oe.current)},[]);const ue=le=>{Oe.current&&le.currentTarget===le.target&&Oe.current.focus(),A&&A(le)};let xe=k,he=N;H&&xe==="input"&&(re?he={type:void 0,minRows:re,maxRows:re,...he}:he={type:void 0,maxRows:F,minRows:z,...he},xe=cie);const se=le=>{M(le.animationName==="mui-auto-fill-cancel"?Oe.current:{value:"x"})};f.useEffect(()=>{ee&&ee.setAdornedStart(!!Se)},[ee,Se]);const Le={...t,color:Ne.color||"primary",disabled:Ne.disabled,endAdornment:b,error:Ne.error,focused:Ne.focused,formControl:ee,fullWidth:j,hiddenLabel:Ne.hiddenLabel,multiline:H,size:Ne.size,startAdornment:Se,type:fe},Ue=fie(Le),Ge=Y.root||d.Root||sw,ie=G.root||h.root||{},_e=Y.input||d.Input||ow;return he={...he,...G.input??h.input},n.jsxs(f.Fragment,{children:[!x&&typeof EE=="function"&&(_E||(_E=n.jsx(EE,{}))),n.jsxs(Ge,{...ie,ref:e,onClick:ue,...Ae,...!Xh(Ge)&&{ownerState:{...Le,...ie.ownerState}},className:Tr(Ue.root,ie.className,l,Q&&"MuiInputBase-readOnly"),children:[Se,n.jsx(rw.Provider,{value:null,children:n.jsx(_e,{"aria-invalid":Ne.error,"aria-describedby":s,autoComplete:o,autoFocus:i,defaultValue:m,disabled:Ne.disabled,id:S,onAnimationStart:se,name:V,placeholder:D,readOnly:Q,required:Ne.required,rows:re,value:qe,onKeyDown:I,onKeyUp:K,type:fe,...he,...!Xh(_e)&&{as:xe,ownerState:{...Le,...he.ownerState}},ref:We,className:Tr(Ue.input,he.className,Q&&"MuiInputBase-readOnly"),onBlur:J,onChange:ce,onFocus:U})}),b,oe?oe({...Ne,startAdornment:Se}):null]})]})});function pie(a){return an("MuiInput",a)}const Pg={...em,...ln("MuiInput",["root","underline","input"])};function hie(a){return an("MuiOutlinedInput",a)}const Dc={...em,...ln("MuiOutlinedInput",["root","notchedOutline","input"])};function mie(a){return an("MuiFilledInput",a)}const Rf={...em,...ln("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},gie=yn(n.jsx("path",{d:"M7 10l5 5 5-5z"})),yie=yn(n.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}));function xie(a){return an("MuiAvatar",a)}ln("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const vie=a=>{const{classes:r,variant:e,colorDefault:t}=a;return sn({root:["root",e,t&&"colorDefault"],img:["img"],fallback:["fallback"]},xie,r)},bie=or("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.root,r[e.variant],e.colorDefault&&r.colorDefault]}})(vn(({theme:a})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:a.typography.fontFamily,fontSize:a.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(a.vars||a).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(a.vars||a).palette.background.default,...a.vars?{backgroundColor:a.vars.palette.Avatar.defaultBg}:{backgroundColor:a.palette.grey[400],...a.applyStyles("dark",{backgroundColor:a.palette.grey[600]})}}}]}))),wie=or("img",{name:"MuiAvatar",slot:"Img"})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),jie=or(yie,{name:"MuiAvatar",slot:"Fallback"})({width:"75%",height:"75%"});function Cie({crossOrigin:a,referrerPolicy:r,src:e,srcSet:t}){const[s,o]=f.useState(!1);return f.useEffect(()=>{if(!e&&!t)return;o(!1);let i=!0;const l=new Image;return l.onload=()=>{i&&o("loaded")},l.onerror=()=>{i&&o("error")},l.crossOrigin=a,l.referrerPolicy=r,l.src=e,t&&(l.srcset=t),()=>{i=!1}},[a,r,e,t]),s}const rp=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiAvatar"}),{alt:s,children:o,className:i,component:l="div",slots:c={},slotProps:d={},imgProps:h,sizes:m,src:y,srcSet:x,variant:b="circular",...v}=t;let j=null;const S={...t,component:l,variant:b},k=Cie({...h,...typeof d.img=="function"?d.img(S):d.img,src:y,srcSet:x}),N=y||x,P=N&&k!=="error";S.colorDefault=!P,delete S.ownerState;const R=vie(S),[F,z]=xn("root",{ref:e,className:Tr(R.root,i),elementType:bie,externalForwardedProps:{slots:c,slotProps:d,component:l,...v},ownerState:S}),[H,V]=xn("img",{className:R.img,elementType:wie,externalForwardedProps:{slots:c,slotProps:{img:{...h,...d.img}}},additionalProps:{alt:s,src:y,srcSet:x,sizes:m},ownerState:S}),[W,Z]=xn("fallback",{className:R.fallback,elementType:jie,externalForwardedProps:{slots:c,slotProps:d},shouldForwardComponentProp:!0,ownerState:S});return P?j=n.jsx(H,{...V}):o||o===0?j=o:N&&s?j=s[0]:j=n.jsx(W,{...Z}),n.jsx(F,{...z,children:j})}),Sie={entering:{opacity:1},entered:{opacity:1}},jl=f.forwardRef(function(r,e){const t=uc(),s={enter:t.transitions.duration.enteringScreen,exit:t.transitions.duration.leavingScreen},{addEndListener:o,appear:i=!0,children:l,easing:c,in:d,onEnter:h,onEntered:m,onEntering:y,onExit:x,onExited:b,onExiting:v,style:j,timeout:S=s,TransitionComponent:k=fc,...N}=r,P=f.useRef(null),R=to(P,um(l),e),F=I=>K=>{if(I){const D=P.current;K===void 0?I(D):I(D,K)}},z=F(y),H=F((I,K)=>{C2(I);const D=Zh({style:j,timeout:S,easing:c},{mode:"enter"});I.style.webkitTransition=t.transitions.create("opacity",D),I.style.transition=t.transitions.create("opacity",D),h&&h(I,K)}),V=F(m),W=F(v),Z=F(I=>{const K=Zh({style:j,timeout:S,easing:c},{mode:"exit"});I.style.webkitTransition=t.transitions.create("opacity",K),I.style.transition=t.transitions.create("opacity",K),x&&x(I)}),A=F(b),q=I=>{o&&o(P.current,I)};return n.jsx(k,{appear:i,in:d,nodeRef:P,onEnter:H,onEntered:V,onEntering:z,onExit:Z,onExited:A,onExiting:W,addEndListener:q,timeout:S,...N,children:(I,{ownerState:K,...D})=>f.cloneElement(l,{style:{opacity:0,visibility:I==="exited"&&!d?"hidden":void 0,...Sie[I],...j,...l.props.style},ref:R,...D})})});function Nie(a){return an("MuiBackdrop",a)}ln("MuiBackdrop",["root","invisible"]);const kie=a=>{const{classes:r,invisible:e}=a;return sn({root:["root",e&&"invisible"]},Nie,r)},_ie=or("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.root,e.invisible&&r.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),SA=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiBackdrop"}),{children:s,className:o,component:i="div",invisible:l=!1,open:c,components:d={},componentsProps:h={},slotProps:m={},slots:y={},TransitionComponent:x,transitionDuration:b,...v}=t,j={...t,component:i,invisible:l},S=kie(j),k={transition:x,root:d.Root,...y},N={...h,...m},P={component:i,slots:k,slotProps:N},[R,F]=xn("root",{elementType:_ie,externalForwardedProps:P,className:Tr(S.root,o),ownerState:j}),[z,H]=xn("transition",{elementType:jl,externalForwardedProps:P,ownerState:j});return n.jsx(z,{in:c,timeout:b,...v,...H,children:n.jsx(R,{"aria-hidden":!0,...F,ref:e,children:s})})});function Eie(a){const{badgeContent:r,invisible:e=!1,max:t=99,showZero:s=!1}=a,o=jA({badgeContent:r,max:t});let i=e;e===!1&&r===0&&!s&&(i=!0);const{badgeContent:l,max:c=t}=i?o:a,d=l&&Number(l)>c?`${c}+`:l;return{badgeContent:l,invisible:i,max:c,displayValue:d}}function Tie(a){return an("MuiBadge",a)}const Nu=ln("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),g1=10,y1=4,Oie=a=>{const{color:r,anchorOrigin:e,invisible:t,overlap:s,variant:o,classes:i={}}=a,l={root:["root"],badge:["badge",o,t&&"invisible",`anchorOrigin${Yt(e.vertical)}${Yt(e.horizontal)}`,`anchorOrigin${Yt(e.vertical)}${Yt(e.horizontal)}${Yt(s)}`,`overlap${Yt(s)}`,r!=="default"&&`color${Yt(r)}`]};return sn(l,Tie,i)},Pie=or("span",{name:"MuiBadge",slot:"Root"})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),Aie=or("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.badge,r[e.variant],r[`anchorOrigin${Yt(e.anchorOrigin.vertical)}${Yt(e.anchorOrigin.horizontal)}${Yt(e.overlap)}`],e.color!=="default"&&r[`color${Yt(e.color)}`],e.invisible&&r.invisible]}})(vn(({theme:a})=>({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:a.typography.fontFamily,fontWeight:a.typography.fontWeightMedium,fontSize:a.typography.pxToRem(12),minWidth:g1*2,lineHeight:1,padding:"0 6px",height:g1*2,borderRadius:g1,zIndex:1,transition:a.transitions.create("transform",{easing:a.transitions.easing.easeInOut,duration:a.transitions.duration.enteringScreen}),variants:[...Object.entries(a.palette).filter(Ss(["contrastText"])).map(([r])=>({props:{color:r},style:{backgroundColor:(a.vars||a).palette[r].main,color:(a.vars||a).palette[r].contrastText}})),{props:{variant:"dot"},style:{borderRadius:y1,height:y1*2,minWidth:y1*2,padding:0}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="top"&&r.anchorOrigin.horizontal==="right"&&r.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${Nu.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="bottom"&&r.anchorOrigin.horizontal==="right"&&r.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${Nu.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="top"&&r.anchorOrigin.horizontal==="left"&&r.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${Nu.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="bottom"&&r.anchorOrigin.horizontal==="left"&&r.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${Nu.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="top"&&r.anchorOrigin.horizontal==="right"&&r.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${Nu.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="bottom"&&r.anchorOrigin.horizontal==="right"&&r.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${Nu.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="top"&&r.anchorOrigin.horizontal==="left"&&r.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${Nu.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="bottom"&&r.anchorOrigin.horizontal==="left"&&r.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${Nu.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:a.transitions.create("transform",{easing:a.transitions.easing.easeInOut,duration:a.transitions.duration.leavingScreen})}}]})));function TE(a){return{vertical:a?.vertical??"top",horizontal:a?.horizontal??"right"}}const Mie=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiBadge"}),{anchorOrigin:s,className:o,classes:i,component:l,components:c={},componentsProps:d={},children:h,overlap:m="rectangular",color:y="default",invisible:x=!1,max:b=99,badgeContent:v,slots:j,slotProps:S,showZero:k=!1,variant:N="standard",...P}=t,{badgeContent:R,invisible:F,max:z,displayValue:H}=Eie({max:b,invisible:x,badgeContent:v,showZero:k}),V=jA({anchorOrigin:TE(s),color:y,overlap:m,variant:N,badgeContent:v}),W=F||R==null&&N!=="dot",{color:Z=y,overlap:A=m,anchorOrigin:q,variant:I=N}=W?V:t,K=TE(q),D=I!=="dot"?H:void 0,Q={...t,badgeContent:R,invisible:W,max:z,displayValue:D,showZero:k,anchorOrigin:K,color:Z,overlap:A,variant:I},oe=Oie(Q),re={slots:{root:j?.root??c.Root,badge:j?.badge??c.Badge},slotProps:{root:S?.root??d.root,badge:S?.badge??d.badge}},[Te,G]=xn("root",{elementType:Pie,externalForwardedProps:{...re,...P},ownerState:Q,className:Tr(oe.root,o),ref:e,additionalProps:{as:l}}),[Y,Se]=xn("badge",{elementType:Aie,externalForwardedProps:re,ownerState:Q,className:oe.badge});return n.jsxs(Te,{...G,children:[h,n.jsx(Y,{...Se,children:D})]})}),Iie=ln("MuiBox",["root"]),Rie=fA(),Et=iae({themeId:Wy,defaultTheme:Rie,defaultClassName:Iie.root,generateClassName:ZP.generate}),Lie=yn(n.jsx("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})),Die=or($u,{name:"MuiBreadcrumbCollapsed"})(vn(({theme:a})=>({display:"flex",marginLeft:`calc(${a.spacing(1)} * 0.5)`,marginRight:`calc(${a.spacing(1)} * 0.5)`,...a.palette.mode==="light"?{backgroundColor:a.palette.grey[100],color:a.palette.grey[700]}:{backgroundColor:a.palette.grey[700],color:a.palette.grey[100]},borderRadius:2,"&:hover, &:focus":{...a.palette.mode==="light"?{backgroundColor:a.palette.grey[200]}:{backgroundColor:a.palette.grey[600]}},"&:active":{boxShadow:a.shadows[0],...a.palette.mode==="light"?{backgroundColor:UC(a.palette.grey[200],.12)}:{backgroundColor:UC(a.palette.grey[600],.12)}}}))),Fie=or(Lie)({width:24,height:16});function Bie(a){const{slots:r={},slotProps:e={},...t}=a,s=a;return n.jsx("li",{children:n.jsx(Die,{focusRipple:!0,...t,ownerState:s,children:n.jsx(Fie,{as:r.CollapsedIcon,ownerState:s,...e.collapsedIcon})})})}function zie(a){return an("MuiBreadcrumbs",a)}const Uie=ln("MuiBreadcrumbs",["root","ol","li","separator"]),$ie=a=>{const{classes:r}=a;return sn({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},zie,r)},Vie=or(et,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(a,r)=>[{[`& .${Uie.li}`]:r.li},r.root]})({}),Wie=or("ol",{name:"MuiBreadcrumbs",slot:"Ol"})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),Hie=or("li",{name:"MuiBreadcrumbs",slot:"Separator"})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function qie(a,r,e,t){return a.reduce((s,o,i)=>(i<a.length-1?s=s.concat(o,n.jsx(Hie,{"aria-hidden":!0,className:r,ownerState:t,children:e},`separator-${i}`)):s.push(o),s),[])}const N2=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiBreadcrumbs"}),{children:s,className:o,component:i="nav",slots:l={},slotProps:c={},expandText:d="Show path",itemsAfterCollapse:h=1,itemsBeforeCollapse:m=1,maxItems:y=8,separator:x="/",...b}=t,[v,j]=f.useState(!1),S={...t,component:i,expanded:v,expandText:d,itemsAfterCollapse:h,itemsBeforeCollapse:m,maxItems:y,separator:x},k=$ie(S),N=CA({elementType:l.CollapsedIcon,externalSlotProps:c.collapsedIcon,ownerState:S}),P=f.useRef(null),R=z=>{const H=()=>{j(!0);const V=P.current.querySelector("a[href],button,[tabindex]");V&&V.focus()};return m+h>=z.length?z:[...z.slice(0,m),n.jsx(Bie,{"aria-label":d,slots:{CollapsedIcon:l.CollapsedIcon},slotProps:{collapsedIcon:N},onClick:H},"ellipsis"),...z.slice(z.length-h,z.length)]},F=f.Children.toArray(s).filter(z=>f.isValidElement(z)).map((z,H)=>n.jsx("li",{className:k.li,children:z},`child-${H}`));return n.jsx(Vie,{ref:e,component:i,color:"textSecondary",className:Tr(k.root,o),ownerState:S,...b,children:n.jsx(Wie,{className:k.ol,ref:P,ownerState:S,children:qie(v||y&&F.length<=y?F:R(F),k.separator,x,S)})})});function Gie(a){return an("MuiButton",a)}const Lf=ln("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),Kie=f.createContext({}),Yie=f.createContext(void 0),Zie=a=>{const{color:r,disableElevation:e,fullWidth:t,size:s,variant:o,loading:i,loadingPosition:l,classes:c}=a,d={root:["root",i&&"loading",o,`${o}${Yt(r)}`,`size${Yt(s)}`,`${o}Size${Yt(s)}`,`color${Yt(r)}`,e&&"disableElevation",t&&"fullWidth",i&&`loadingPosition${Yt(l)}`],startIcon:["icon","startIcon",`iconSize${Yt(s)}`],endIcon:["icon","endIcon",`iconSize${Yt(s)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},h=sn(d,Gie,c);return{...c,...h}},NA=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],Xie=or($u,{shouldForwardProp:a=>Lo(a)||a==="classes",name:"MuiButton",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.root,r[e.variant],r[`${e.variant}${Yt(e.color)}`],r[`size${Yt(e.size)}`],r[`${e.variant}Size${Yt(e.size)}`],e.color==="inherit"&&r.colorInherit,e.disableElevation&&r.disableElevation,e.fullWidth&&r.fullWidth,e.loading&&r.loading]}})(vn(({theme:a})=>{const r=a.palette.mode==="light"?a.palette.grey[300]:a.palette.grey[800],e=a.palette.mode==="light"?a.palette.grey.A100:a.palette.grey[700];return{...a.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(a.vars||a).shape.borderRadius,transition:a.transitions.create(["background-color","box-shadow","border-color","color"],{duration:a.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${Lf.disabled}`]:{color:(a.vars||a).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(a.vars||a).shadows[2],"&:hover":{boxShadow:(a.vars||a).shadows[4],"@media (hover: none)":{boxShadow:(a.vars||a).shadows[2]}},"&:active":{boxShadow:(a.vars||a).shadows[8]},[`&.${Lf.focusVisible}`]:{boxShadow:(a.vars||a).shadows[6]},[`&.${Lf.disabled}`]:{color:(a.vars||a).palette.action.disabled,boxShadow:(a.vars||a).shadows[0],backgroundColor:(a.vars||a).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${Lf.disabled}`]:{border:`1px solid ${(a.vars||a).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(a.palette).filter(Ss()).map(([t])=>({props:{color:t},style:{"--variant-textColor":(a.vars||a).palette[t].main,"--variant-outlinedColor":(a.vars||a).palette[t].main,"--variant-outlinedBorder":a.alpha((a.vars||a).palette[t].main,.5),"--variant-containedColor":(a.vars||a).palette[t].contrastText,"--variant-containedBg":(a.vars||a).palette[t].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(a.vars||a).palette[t].dark,"--variant-textBg":a.alpha((a.vars||a).palette[t].main,(a.vars||a).palette.action.hoverOpacity),"--variant-outlinedBorder":(a.vars||a).palette[t].main,"--variant-outlinedBg":a.alpha((a.vars||a).palette[t].main,(a.vars||a).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":a.vars?a.vars.palette.Button.inheritContainedBg:r,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":a.vars?a.vars.palette.Button.inheritContainedHoverBg:e,"--variant-textBg":a.alpha((a.vars||a).palette.text.primary,(a.vars||a).palette.action.hoverOpacity),"--variant-outlinedBg":a.alpha((a.vars||a).palette.text.primary,(a.vars||a).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:a.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:a.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:a.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:a.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:a.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:a.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Lf.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Lf.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:a.transitions.create(["background-color","box-shadow","border-color"],{duration:a.transitions.duration.short}),[`&.${Lf.loading}`]:{color:"transparent"}}}]}})),Qie=or("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.startIcon,e.loading&&r.startIconLoadingStart,r[`iconSize${Yt(e.size)}`]]}})(({theme:a})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:a.transitions.create(["opacity"],{duration:a.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...NA]})),Jie=or("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.endIcon,e.loading&&r.endIconLoadingEnd,r[`iconSize${Yt(e.size)}`]]}})(({theme:a})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:a.transitions.create(["opacity"],{duration:a.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...NA]})),ele=or("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:a})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(a.vars||a).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),OE=or("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),$r=f.forwardRef(function(r,e){const t=f.useContext(Kie),s=f.useContext(Yie),o=ky(t,r),i=hn({props:o,name:"MuiButton"}),{children:l,color:c="primary",component:d="button",className:h,disabled:m=!1,disableElevation:y=!1,disableFocusRipple:x=!1,endIcon:b,focusVisibleClassName:v,fullWidth:j=!1,id:S,loading:k=null,loadingIndicator:N,loadingPosition:P="center",size:R="medium",startIcon:F,type:z,variant:H="text",...V}=i,W=qu(S),Z=N??n.jsx(Jh,{"aria-labelledby":W,color:"inherit",size:16}),A={...i,color:c,component:d,disabled:m,disableElevation:y,disableFocusRipple:x,fullWidth:j,loading:k,loadingIndicator:Z,loadingPosition:P,size:R,type:z,variant:H},q=Zie(A),I=(F||k&&P==="start")&&n.jsx(Qie,{className:q.startIcon,ownerState:A,children:F||n.jsx(OE,{className:q.loadingIconPlaceholder,ownerState:A})}),K=(b||k&&P==="end")&&n.jsx(Jie,{className:q.endIcon,ownerState:A,children:b||n.jsx(OE,{className:q.loadingIconPlaceholder,ownerState:A})}),D=s||"",Q=typeof k=="boolean"?n.jsx("span",{className:q.loadingWrapper,style:{display:"contents"},children:k&&n.jsx(ele,{className:q.loadingIndicator,ownerState:A,children:Z})}):null;return n.jsxs(Xie,{ownerState:A,className:Tr(t.className,q.root,h,D),component:d,disabled:m||k,focusRipple:!x,focusVisibleClassName:Tr(q.focusVisible,v),ref:e,type:z,id:k?W:S,...V,classes:q,children:[I,P!=="end"&&Q,l,P==="end"&&Q,K]})});function tle(a){return an("MuiCard",a)}ln("MuiCard",["root"]);const rle=a=>{const{classes:r}=a;return sn({root:["root"]},tle,r)},nle=or(ta,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),Vu=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiCard"}),{className:s,raised:o=!1,...i}=t,l={...t,raised:o},c=rle(l);return n.jsx(nle,{className:Tr(c.root,s),elevation:o?8:void 0,ref:e,ownerState:l,...i})});function ale(a){return an("MuiCardActionArea",a)}const x1=ln("MuiCardActionArea",["root","focusVisible","focusHighlight"]),sle=a=>{const{classes:r}=a;return sn({root:["root"],focusHighlight:["focusHighlight"]},ale,r)},ole=or($u,{name:"MuiCardActionArea",slot:"Root"})(vn(({theme:a})=>({display:"block",textAlign:"inherit",borderRadius:"inherit",width:"100%",[`&:hover .${x1.focusHighlight}`]:{opacity:(a.vars||a).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},[`&.${x1.focusVisible} .${x1.focusHighlight}`]:{opacity:(a.vars||a).palette.action.focusOpacity}}))),ile=or("span",{name:"MuiCardActionArea",slot:"FocusHighlight"})(vn(({theme:a})=>({overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:a.transitions.create("opacity",{duration:a.transitions.duration.short})}))),kA=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiCardActionArea"}),{children:s,className:o,focusVisibleClassName:i,slots:l={},slotProps:c={},...d}=t,h=t,m=sle(h),y={slots:l,slotProps:c},[x,b]=xn("root",{elementType:ole,externalForwardedProps:{...y,...d},shouldForwardComponentProp:!0,ownerState:h,ref:e,className:Tr(m.root,o),additionalProps:{focusVisibleClassName:Tr(i,m.focusVisible)}}),[v,j]=xn("focusHighlight",{elementType:ile,externalForwardedProps:y,ownerState:h,className:m.focusHighlight});return n.jsxs(x,{...b,children:[s,n.jsx(v,{...j})]})});function lle(a){return an("MuiCardContent",a)}ln("MuiCardContent",["root"]);const cle=a=>{const{classes:r}=a;return sn({root:["root"]},lle,r)},dle=or("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),fp=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiCardContent"}),{className:s,component:o="div",...i}=t,l={...t,component:o},c=cle(l);return n.jsx(dle,{as:o,className:Tr(c.root,s),ownerState:l,ref:e,...i})});function ule(a){return an("MuiCardMedia",a)}ln("MuiCardMedia",["root","media","img"]);const fle=a=>{const{classes:r,isMediaComponent:e,isImageComponent:t}=a;return sn({root:["root",e&&"media",t&&"img"]},ule,r)},ple=or("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a,{isMediaComponent:t,isImageComponent:s}=e;return[r.root,t&&r.media,s&&r.img]}})({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",variants:[{props:{isMediaComponent:!0},style:{width:"100%"}},{props:{isImageComponent:!0},style:{objectFit:"cover"}}]}),hle=["video","audio","picture","iframe","img"],mle=["picture","img"],_A=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiCardMedia"}),{children:s,className:o,component:i="div",image:l,src:c,style:d,...h}=t,m=hle.includes(i),y=!m&&l?{backgroundImage:`url("${l}")`,...d}:d,x={...t,component:i,isMediaComponent:m,isImageComponent:mle.includes(i)},b=fle(x);return n.jsx(ple,{className:Tr(b.root,o),as:i,role:!m&&l?"img":void 0,ref:e,style:y,ownerState:x,src:m?l||c:void 0,...h,children:s})});function gle(a){return an("PrivateSwitchBase",a)}ln("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const yle=a=>{const{classes:r,checked:e,disabled:t,edge:s}=a,o={root:["root",e&&"checked",t&&"disabled",s&&`edge${Yt(s)}`],input:["input"]};return sn(o,gle,r)},xle=or($u,{name:"MuiSwitchBase"})({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:a,ownerState:r})=>a==="start"&&r.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:a,ownerState:r})=>a==="end"&&r.size!=="small",style:{marginRight:-12}}]}),vle=or("input",{name:"MuiSwitchBase",shouldForwardProp:Lo})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),k2=f.forwardRef(function(r,e){const{autoFocus:t,checked:s,checkedIcon:o,defaultChecked:i,disabled:l,disableFocusRipple:c=!1,edge:d=!1,icon:h,id:m,inputProps:y,inputRef:x,name:b,onBlur:v,onChange:j,onFocus:S,readOnly:k,required:N=!1,tabIndex:P,type:R,value:F,slots:z={},slotProps:H={},...V}=r,[W,Z]=Ey({controlled:s,default:!!i,name:"SwitchBase",state:"checked"}),A=pc(),q=Ee=>{S&&S(Ee),A&&A.onFocus&&A.onFocus(Ee)},I=Ee=>{v&&v(Ee),A&&A.onBlur&&A.onBlur(Ee)},K=Ee=>{if(Ee.nativeEvent.defaultPrevented||k)return;const Ae=Ee.target.checked;Z(Ae),j&&j(Ee,Ae)};let D=l;A&&typeof D>"u"&&(D=A.disabled);const Q=R==="checkbox"||R==="radio",oe={...r,checked:W,disabled:D,disableFocusRipple:c,edge:d},re=yle(oe),Te={slots:z,slotProps:{input:y,...H}},[G,Y]=xn("root",{ref:e,elementType:xle,className:re.root,shouldForwardComponentProp:!0,externalForwardedProps:{...Te,component:"span",...V},getSlotProps:Ee=>({...Ee,onFocus:Ae=>{Ee.onFocus?.(Ae),q(Ae)},onBlur:Ae=>{Ee.onBlur?.(Ae),I(Ae)}}),ownerState:oe,additionalProps:{centerRipple:!0,focusRipple:!c,disabled:D,role:void 0,tabIndex:null}}),[Se,fe]=xn("input",{ref:x,elementType:vle,className:re.input,externalForwardedProps:Te,getSlotProps:Ee=>({...Ee,onChange:Ae=>{Ee.onChange?.(Ae),K(Ae)}}),ownerState:oe,additionalProps:{autoFocus:t,checked:s,defaultChecked:i,disabled:D,id:Q?m:void 0,name:b,readOnly:k,required:N,tabIndex:P,type:R,...R==="checkbox"&&F===void 0?{}:{value:F}}});return n.jsxs(G,{...Y,children:[n.jsx(Se,{...fe}),W?o:h]})}),ble=yn(n.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})),wle=yn(n.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})),jle=yn(n.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}));function Cle(a){return an("MuiCheckbox",a)}const v1=ln("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),Sle=a=>{const{classes:r,indeterminate:e,color:t,size:s}=a,o={root:["root",e&&"indeterminate",`color${Yt(t)}`,`size${Yt(s)}`]},i=sn(o,Cle,r);return{...r,...i}},Nle=or(k2,{shouldForwardProp:a=>Lo(a)||a==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.root,e.indeterminate&&r.indeterminate,r[`size${Yt(e.size)}`],e.color!=="default"&&r[`color${Yt(e.color)}`]]}})(vn(({theme:a})=>({color:(a.vars||a).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:a.alpha((a.vars||a).palette.action.active,(a.vars||a).palette.action.hoverOpacity)}}},...Object.entries(a.palette).filter(Ss()).map(([r])=>({props:{color:r,disableRipple:!1},style:{"&:hover":{backgroundColor:a.alpha((a.vars||a).palette[r].main,(a.vars||a).palette.action.hoverOpacity)}}})),...Object.entries(a.palette).filter(Ss()).map(([r])=>({props:{color:r},style:{[`&.${v1.checked}, &.${v1.indeterminate}`]:{color:(a.vars||a).palette[r].main},[`&.${v1.disabled}`]:{color:(a.vars||a).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),kle=n.jsx(wle,{}),_le=n.jsx(ble,{}),Ele=n.jsx(jle,{}),Tle=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiCheckbox"}),{checkedIcon:s=kle,color:o="primary",icon:i=_le,indeterminate:l=!1,indeterminateIcon:c=Ele,inputProps:d,size:h="medium",disableRipple:m=!1,className:y,slots:x={},slotProps:b={},...v}=t,j=l?c:i,S=l?c:s,k={...t,disableRipple:m,color:o,indeterminate:l,size:h},N=Sle(k),P=b.input??d,[R,F]=xn("root",{ref:e,elementType:Nle,className:Tr(N.root,y),shouldForwardComponentProp:!0,externalForwardedProps:{slots:x,slotProps:b,...v},ownerState:k,additionalProps:{type:"checkbox",icon:f.cloneElement(j,{fontSize:j.props.fontSize??h}),checkedIcon:f.cloneElement(S,{fontSize:S.props.fontSize??h}),disableRipple:m,slots:x,slotProps:{input:v2(typeof P=="function"?P(k):P,{"data-indeterminate":l})}}});return n.jsx(R,{...F,classes:N})}),Mo=Fae({createStyledComponent:or("div",{name:"MuiContainer",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.root,r[`maxWidth${Yt(String(e.maxWidth))}`],e.fixed&&r.fixed,e.disableGutters&&r.disableGutters]}}),useThemeProps:a=>hn({props:a,name:"MuiContainer"})});function EA(a=window){const r=a.document.documentElement.clientWidth;return a.innerWidth-r}function Ole(a){const r=oc(a);return r.body===a?ic(a).innerWidth>r.documentElement.clientWidth:a.scrollHeight>a.clientHeight}function cy(a,r){r?a.setAttribute("aria-hidden","true"):a.removeAttribute("aria-hidden")}function PE(a){return parseFloat(ic(a).getComputedStyle(a).paddingRight)||0}function Ple(a){const e=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(a.tagName),t=a.tagName==="INPUT"&&a.getAttribute("type")==="hidden";return e||t}function AE(a,r,e,t,s){const o=[r,e,...t];[].forEach.call(a.children,i=>{const l=!o.includes(i),c=!Ple(i);l&&c&&cy(i,s)})}function b1(a,r){let e=-1;return a.some((t,s)=>r(t)?(e=s,!0):!1),e}function Ale(a,r){const e=[],t=a.container;if(!r.disableScrollLock){if(Ole(t)){const i=EA(ic(t));e.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight=`${PE(t)+i}px`;const l=oc(t).querySelectorAll(".mui-fixed");[].forEach.call(l,c=>{e.push({value:c.style.paddingRight,property:"padding-right",el:c}),c.style.paddingRight=`${PE(c)+i}px`})}let o;if(t.parentNode instanceof DocumentFragment)o=oc(t).body;else{const i=t.parentElement,l=ic(t);o=i?.nodeName==="HTML"&&l.getComputedStyle(i).overflowY==="scroll"?i:t}e.push({value:o.style.overflow,property:"overflow",el:o},{value:o.style.overflowX,property:"overflow-x",el:o},{value:o.style.overflowY,property:"overflow-y",el:o}),o.style.overflow="hidden"}return()=>{e.forEach(({value:o,el:i,property:l})=>{o?i.style.setProperty(l,o):i.style.removeProperty(l)})}}function Mle(a){const r=[];return[].forEach.call(a.children,e=>{e.getAttribute("aria-hidden")==="true"&&r.push(e)}),r}class Ile{constructor(){this.modals=[],this.containers=[]}add(r,e){let t=this.modals.indexOf(r);if(t!==-1)return t;t=this.modals.length,this.modals.push(r),r.modalRef&&cy(r.modalRef,!1);const s=Mle(e);AE(e,r.mount,r.modalRef,s,!0);const o=b1(this.containers,i=>i.container===e);return o!==-1?(this.containers[o].modals.push(r),t):(this.containers.push({modals:[r],container:e,restore:null,hiddenSiblings:s}),t)}mount(r,e){const t=b1(this.containers,o=>o.modals.includes(r)),s=this.containers[t];s.restore||(s.restore=Ale(s,e))}remove(r,e=!0){const t=this.modals.indexOf(r);if(t===-1)return t;const s=b1(this.containers,i=>i.modals.includes(r)),o=this.containers[s];if(o.modals.splice(o.modals.indexOf(r),1),this.modals.splice(t,1),o.modals.length===0)o.restore&&o.restore(),r.modalRef&&cy(r.modalRef,e),AE(o.container,r.mount,r.modalRef,o.hiddenSiblings,!1),this.containers.splice(s,1);else{const i=o.modals[o.modals.length-1];i.modalRef&&cy(i.modalRef,!1)}return t}isTopModal(r){return this.modals.length>0&&this.modals[this.modals.length-1]===r}}function Gg(a){let r=a.activeElement;for(;r?.shadowRoot?.activeElement!=null;)r=r.shadowRoot.activeElement;return r}const Rle=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function Lle(a){const r=parseInt(a.getAttribute("tabindex")||"",10);return Number.isNaN(r)?a.contentEditable==="true"||(a.nodeName==="AUDIO"||a.nodeName==="VIDEO"||a.nodeName==="DETAILS")&&a.getAttribute("tabindex")===null?0:a.tabIndex:r}function Dle(a){if(a.tagName!=="INPUT"||a.type!=="radio"||!a.name)return!1;const r=t=>a.ownerDocument.querySelector(`input[type="radio"]${t}`);let e=r(`[name="${a.name}"]:checked`);return e||(e=r(`[name="${a.name}"]`)),e!==a}function Fle(a){return!(a.disabled||a.tagName==="INPUT"&&a.type==="hidden"||Dle(a))}function Ble(a){const r=[],e=[];return Array.from(a.querySelectorAll(Rle)).forEach((t,s)=>{const o=Lle(t);o===-1||!Fle(t)||(o===0?r.push(t):e.push({documentOrder:s,tabIndex:o,node:t}))}),e.sort((t,s)=>t.tabIndex===s.tabIndex?t.documentOrder-s.documentOrder:t.tabIndex-s.tabIndex).map(t=>t.node).concat(r)}function zle(){return!0}function Ule(a){const{children:r,disableAutoFocus:e=!1,disableEnforceFocus:t=!1,disableRestoreFocus:s=!1,getTabbable:o=Ble,isEnabled:i=zle,open:l}=a,c=f.useRef(!1),d=f.useRef(null),h=f.useRef(null),m=f.useRef(null),y=f.useRef(null),x=f.useRef(!1),b=f.useRef(null),v=to(um(r),b),j=f.useRef(null);f.useEffect(()=>{!l||!b.current||(x.current=!e)},[e,l]),f.useEffect(()=>{if(!l||!b.current)return;const N=oc(b.current),P=Gg(N);return b.current.contains(P)||(b.current.hasAttribute("tabIndex")||b.current.setAttribute("tabIndex","-1"),x.current&&b.current.focus()),()=>{s||(m.current&&m.current.focus&&(c.current=!0,m.current.focus()),m.current=null)}},[l]),f.useEffect(()=>{if(!l||!b.current)return;const N=oc(b.current),P=z=>{if(j.current=z,t||!i()||z.key!=="Tab")return;Gg(N)===b.current&&z.shiftKey&&(c.current=!0,h.current&&h.current.focus())},R=()=>{const z=b.current;if(z===null)return;const H=Gg(N);if(!N.hasFocus()||!i()||c.current){c.current=!1;return}if(z.contains(H)||t&&H!==d.current&&H!==h.current)return;if(H!==y.current)y.current=null;else if(y.current!==null)return;if(!x.current)return;let V=[];if((H===d.current||H===h.current)&&(V=o(b.current)),V.length>0){const W=!!(j.current?.shiftKey&&j.current?.key==="Tab"),Z=V[0],A=V[V.length-1];typeof Z!="string"&&typeof A!="string"&&(W?A.focus():Z.focus())}else z.focus()};N.addEventListener("focusin",R),N.addEventListener("keydown",P,!0);const F=setInterval(()=>{const z=Gg(N);z&&z.tagName==="BODY"&&R()},50);return()=>{clearInterval(F),N.removeEventListener("focusin",R),N.removeEventListener("keydown",P,!0)}},[e,t,s,i,l,o]);const S=N=>{m.current===null&&(m.current=N.relatedTarget),x.current=!0,y.current=N.target;const P=r.props.onFocus;P&&P(N)},k=N=>{m.current===null&&(m.current=N.relatedTarget),x.current=!0};return n.jsxs(f.Fragment,{children:[n.jsx("div",{tabIndex:l?0:-1,onFocus:k,ref:d,"data-testid":"sentinelStart"}),f.cloneElement(r,{ref:v,onFocus:S}),n.jsx("div",{tabIndex:l?0:-1,onFocus:k,ref:h,"data-testid":"sentinelEnd"})]})}function $le(a){return typeof a=="function"?a():a}function Vle(a){return a?a.props.hasOwnProperty("in"):!1}const ME=()=>{},N0=new Ile;function Wle(a){const{container:r,disableEscapeKeyDown:e=!1,disableScrollLock:t=!1,closeAfterTransition:s=!1,onTransitionEnter:o,onTransitionExited:i,children:l,onClose:c,open:d,rootRef:h}=a,m=f.useRef({}),y=f.useRef(null),x=f.useRef(null),b=to(x,h),[v,j]=f.useState(!d),S=Vle(l);let k=!0;(a["aria-hidden"]==="false"||a["aria-hidden"]===!1)&&(k=!1);const N=()=>oc(y.current),P=()=>(m.current.modalRef=x.current,m.current.mount=y.current,m.current),R=()=>{N0.mount(P(),{disableScrollLock:t}),x.current&&(x.current.scrollTop=0)},F=tp(()=>{const K=$le(r)||N().body;N0.add(P(),K),x.current&&R()}),z=()=>N0.isTopModal(P()),H=tp(K=>{y.current=K,K&&(d&&z()?R():x.current&&cy(x.current,k))}),V=f.useCallback(()=>{N0.remove(P(),k)},[k]);f.useEffect(()=>()=>{V()},[V]),f.useEffect(()=>{d?F():(!S||!s)&&V()},[d,V,S,s,F]);const W=K=>D=>{K.onKeyDown?.(D),!(D.key!=="Escape"||D.which===229||!z())&&(e||(D.stopPropagation(),c&&c(D,"escapeKeyDown")))},Z=K=>D=>{K.onClick?.(D),D.target===D.currentTarget&&c&&c(D,"backdropClick")};return{getRootProps:(K={})=>{const D=vA(a);delete D.onTransitionEnter,delete D.onTransitionExited;const Q={...D,...K};return{role:"presentation",...Q,onKeyDown:W(Q),ref:b}},getBackdropProps:(K={})=>{const D=K;return{"aria-hidden":!0,...D,onClick:Z(D),open:d}},getTransitionProps:()=>{const K=()=>{j(!1),o&&o()},D=()=>{j(!0),i&&i(),s&&V()};return{onEnter:HC(K,l?.props.onEnter??ME),onExited:HC(D,l?.props.onExited??ME)}},rootRef:b,portalRef:H,isTopModal:z,exited:v,hasTransition:S}}function Hle(a){return an("MuiModal",a)}ln("MuiModal",["root","hidden","backdrop"]);const qle=a=>{const{open:r,exited:e,classes:t}=a;return sn({root:["root",!r&&e&&"hidden"],backdrop:["backdrop"]},Hle,t)},Gle=or("div",{name:"MuiModal",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.root,!e.open&&e.exited&&r.hidden]}})(vn(({theme:a})=>({position:"fixed",zIndex:(a.vars||a).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:r})=>!r.open&&r.exited,style:{visibility:"hidden"}}]}))),Kle=or(SA,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),_2=f.forwardRef(function(r,e){const t=hn({name:"MuiModal",props:r}),{BackdropComponent:s=Kle,BackdropProps:o,classes:i,className:l,closeAfterTransition:c=!1,children:d,container:h,component:m,components:y={},componentsProps:x={},disableAutoFocus:b=!1,disableEnforceFocus:v=!1,disableEscapeKeyDown:j=!1,disablePortal:S=!1,disableRestoreFocus:k=!1,disableScrollLock:N=!1,hideBackdrop:P=!1,keepMounted:R=!1,onClose:F,onTransitionEnter:z,onTransitionExited:H,open:V,slotProps:W={},slots:Z={},theme:A,...q}=t,I={...t,closeAfterTransition:c,disableAutoFocus:b,disableEnforceFocus:v,disableEscapeKeyDown:j,disablePortal:S,disableRestoreFocus:k,disableScrollLock:N,hideBackdrop:P,keepMounted:R},{getRootProps:K,getBackdropProps:D,getTransitionProps:Q,portalRef:oe,isTopModal:re,exited:Te,hasTransition:G}=Wle({...I,rootRef:e}),Y={...I,exited:Te},Se=qle(Y),fe={};if(d.props.tabIndex===void 0&&(fe.tabIndex="-1"),G){const{onEnter:ze,onExited:We}=Q();fe.onEnter=ze,fe.onExited=We}const Ee={slots:{root:y.Root,backdrop:y.Backdrop,...Z},slotProps:{...x,...W}},[Ae,qe]=xn("root",{ref:e,elementType:Gle,externalForwardedProps:{...Ee,...q,component:m},getSlotProps:K,ownerState:Y,className:Tr(l,Se?.root,!Y.open&&Y.exited&&Se?.hidden)}),[we,Oe]=xn("backdrop",{ref:o?.ref,elementType:s,externalForwardedProps:Ee,shouldForwardComponentProp:!0,additionalProps:o,getSlotProps:ze=>D({...ze,onClick:We=>{ze?.onClick&&ze.onClick(We)}}),className:Tr(o?.className,Se?.backdrop),ownerState:Y});return!R&&!V&&(!G||Te)?null:n.jsx(tie,{ref:oe,container:h,disablePortal:S,children:n.jsxs(Ae,{...qe,children:[!P&&s?n.jsx(we,{...Oe}):null,n.jsx(Ule,{disableEnforceFocus:v,disableAutoFocus:b,disableRestoreFocus:k,isEnabled:re,open:V,children:f.cloneElement(d,fe)})]})})});function Yle(a){return an("MuiDialog",a)}const w1=ln("MuiDialog",["root","backdrop","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),TA=f.createContext({}),Zle=or(SA,{name:"MuiDialog",slot:"Backdrop"})({zIndex:-1}),Xle=a=>{const{classes:r,scroll:e,maxWidth:t,fullWidth:s,fullScreen:o}=a,i={root:["root"],backdrop:["backdrop"],container:["container",`scroll${Yt(e)}`],paper:["paper",`paperScroll${Yt(e)}`,`paperWidth${Yt(String(t))}`,s&&"paperFullWidth",o&&"paperFullScreen"]};return sn(i,Yle,r)},Qle=or(_2,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),Jle=or("div",{name:"MuiDialog",slot:"Container",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.container,r[`scroll${Yt(e.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),ece=or(ta,{name:"MuiDialog",slot:"Paper",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.paper,r[`scrollPaper${Yt(e.scroll)}`],r[`paperWidth${Yt(String(e.maxWidth))}`],e.fullWidth&&r.paperFullWidth,e.fullScreen&&r.paperFullScreen]}})(vn(({theme:a})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:r})=>!r.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:a.breakpoints.unit==="px"?Math.max(a.breakpoints.values.xs,444):`max(${a.breakpoints.values.xs}${a.breakpoints.unit}, 444px)`,[`&.${w1.paperScrollBody}`]:{[a.breakpoints.down(Math.max(a.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(a.breakpoints.values).filter(r=>r!=="xs").map(r=>({props:{maxWidth:r},style:{maxWidth:`${a.breakpoints.values[r]}${a.breakpoints.unit}`,[`&.${w1.paperScrollBody}`]:{[a.breakpoints.down(a.breakpoints.values[r]+64)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:r})=>r.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:r})=>r.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${w1.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),gl=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiDialog"}),s=uc(),o={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{"aria-describedby":i,"aria-labelledby":l,"aria-modal":c=!0,BackdropComponent:d,BackdropProps:h,children:m,className:y,disableEscapeKeyDown:x=!1,fullScreen:b=!1,fullWidth:v=!1,maxWidth:j="sm",onClick:S,onClose:k,open:N,PaperComponent:P=ta,PaperProps:R={},scroll:F="paper",slots:z={},slotProps:H={},TransitionComponent:V=jl,transitionDuration:W=o,TransitionProps:Z,...A}=t,q={...t,disableEscapeKeyDown:x,fullScreen:b,fullWidth:v,maxWidth:j,scroll:F},I=Xle(q),K=f.useRef(),D=Pt=>{K.current=Pt.target===Pt.currentTarget},Q=Pt=>{S&&S(Pt),K.current&&(K.current=null,k&&k(Pt,"backdropClick"))},oe=qu(l),re=f.useMemo(()=>({titleId:oe}),[oe]),Te={transition:V,...z},G={transition:Z,paper:R,backdrop:h,...H},Y={slots:Te,slotProps:G},[Se,fe]=xn("root",{elementType:Qle,shouldForwardComponentProp:!0,externalForwardedProps:Y,ownerState:q,className:Tr(I.root,y),ref:e}),[Ee,Ae]=xn("backdrop",{elementType:Zle,shouldForwardComponentProp:!0,externalForwardedProps:Y,ownerState:q,className:I.backdrop}),[qe,we]=xn("paper",{elementType:ece,shouldForwardComponentProp:!0,externalForwardedProps:Y,ownerState:q,className:Tr(I.paper,R.className)}),[Oe,ze]=xn("container",{elementType:Jle,externalForwardedProps:Y,ownerState:q,className:I.container}),[We,pt]=xn("transition",{elementType:jl,externalForwardedProps:Y,ownerState:q,additionalProps:{appear:!0,in:N,timeout:W,role:"presentation"}});return n.jsx(Se,{closeAfterTransition:!0,slots:{backdrop:Ee},slotProps:{backdrop:{transitionDuration:W,as:d,...Ae}},disableEscapeKeyDown:x,onClose:k,open:N,onClick:Q,...fe,...A,children:n.jsx(We,{...pt,children:n.jsx(Oe,{onMouseDown:D,...ze,children:n.jsx(qe,{as:P,elevation:24,role:"dialog","aria-describedby":i,"aria-labelledby":oe,"aria-modal":c,...we,children:n.jsx(TA.Provider,{value:re,children:m})})})})})});function tce(a){return an("MuiDialogActions",a)}ln("MuiDialogActions",["root","spacing"]);const rce=a=>{const{classes:r,disableSpacing:e}=a;return sn({root:["root",!e&&"spacing"]},tce,r)},nce=or("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.root,!e.disableSpacing&&r.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:a})=>!a.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),yl=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiDialogActions"}),{className:s,disableSpacing:o=!1,...i}=t,l={...t,disableSpacing:o},c=rce(l);return n.jsx(nce,{className:Tr(c.root,s),ownerState:l,ref:e,...i})});function ace(a){return an("MuiDialogContent",a)}ln("MuiDialogContent",["root","dividers"]);function sce(a){return an("MuiDialogTitle",a)}const oce=ln("MuiDialogTitle",["root"]),ice=a=>{const{classes:r,dividers:e}=a;return sn({root:["root",e&&"dividers"]},ace,r)},lce=or("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.root,e.dividers&&r.dividers]}})(vn(({theme:a})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:r})=>r.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(a.vars||a).palette.divider}`,borderBottom:`1px solid ${(a.vars||a).palette.divider}`}},{props:({ownerState:r})=>!r.dividers,style:{[`.${oce.root} + &`]:{paddingTop:0}}}]}))),xl=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiDialogContent"}),{className:s,dividers:o=!1,...i}=t,l={...t,dividers:o},c=ice(l);return n.jsx(lce,{className:Tr(c.root,s),ownerState:l,ref:e,...i})}),cce=a=>{const{classes:r}=a;return sn({root:["root"]},sce,r)},dce=or(et,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),vl=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiDialogTitle"}),{className:s,id:o,...i}=t,l=t,c=cce(l),{titleId:d=o}=f.useContext(TA);return n.jsx(dce,{component:"h2",className:Tr(c.root,s),ownerState:l,ref:e,variant:"h6",id:o??d,...i})});function uce(a){return an("MuiDivider",a)}const IE=ln("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),fce=a=>{const{absolute:r,children:e,classes:t,flexItem:s,light:o,orientation:i,textAlign:l,variant:c}=a;return sn({root:["root",r&&"absolute",c,o&&"light",i==="vertical"&&"vertical",s&&"flexItem",e&&"withChildren",e&&i==="vertical"&&"withChildrenVertical",l==="right"&&i!=="vertical"&&"textAlignRight",l==="left"&&i!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",i==="vertical"&&"wrapperVertical"]},uce,t)},pce=or("div",{name:"MuiDivider",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.root,e.absolute&&r.absolute,r[e.variant],e.light&&r.light,e.orientation==="vertical"&&r.vertical,e.flexItem&&r.flexItem,e.children&&r.withChildren,e.children&&e.orientation==="vertical"&&r.withChildrenVertical,e.textAlign==="right"&&e.orientation!=="vertical"&&r.textAlignRight,e.textAlign==="left"&&e.orientation!=="vertical"&&r.textAlignLeft]}})(vn(({theme:a})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(a.vars||a).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:a.alpha((a.vars||a).palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:a.spacing(2),marginRight:a.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:a.spacing(1),marginBottom:a.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:r})=>!!r.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:r})=>r.children&&r.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(a.vars||a).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:r})=>r.orientation==="vertical"&&r.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(a.vars||a).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:r})=>r.textAlign==="right"&&r.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:r})=>r.textAlign==="left"&&r.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),hce=or("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.wrapper,e.orientation==="vertical"&&r.wrapperVertical]}})(vn(({theme:a})=>({display:"inline-block",paddingLeft:`calc(${a.spacing(1)} * 1.2)`,paddingRight:`calc(${a.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${a.spacing(1)} * 1.2)`,paddingBottom:`calc(${a.spacing(1)} * 1.2)`}}]}))),Go=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiDivider"}),{absolute:s=!1,children:o,className:i,orientation:l="horizontal",component:c=o||l==="vertical"?"div":"hr",flexItem:d=!1,light:h=!1,role:m=c!=="hr"?"separator":void 0,textAlign:y="center",variant:x="fullWidth",...b}=t,v={...t,absolute:s,component:c,flexItem:d,light:h,orientation:l,role:m,textAlign:y,variant:x},j=fce(v);return n.jsx(pce,{as:c,className:Tr(j.root,i),role:m,ref:e,ownerState:v,"aria-orientation":m==="separator"&&(c!=="hr"||l==="vertical")?l:void 0,...b,children:o?n.jsx(hce,{className:j.wrapper,ownerState:v,children:o}):null})});Go&&(Go.muiSkipListHighlight=!0);function mce(a,r,e){const t=r.getBoundingClientRect(),s=e&&e.getBoundingClientRect(),o=ic(r);let i;if(r.fakeTransform)i=r.fakeTransform;else{const d=o.getComputedStyle(r);i=d.getPropertyValue("-webkit-transform")||d.getPropertyValue("transform")}let l=0,c=0;if(i&&i!=="none"&&typeof i=="string"){const d=i.split("(")[1].split(")")[0].split(",");l=parseInt(d[4],10),c=parseInt(d[5],10)}return a==="left"?s?`translateX(${s.right+l-t.left}px)`:`translateX(${o.innerWidth+l-t.left}px)`:a==="right"?s?`translateX(-${t.right-s.left-l}px)`:`translateX(-${t.left+t.width-l}px)`:a==="up"?s?`translateY(${s.bottom+c-t.top}px)`:`translateY(${o.innerHeight+c-t.top}px)`:s?`translateY(-${t.top-s.top+t.height-c}px)`:`translateY(-${t.top+t.height-c}px)`}function gce(a){return typeof a=="function"?a():a}function k0(a,r,e){const t=gce(e),s=mce(a,r,t);s&&(r.style.webkitTransform=s,r.style.transform=s)}const yb=f.forwardRef(function(r,e){const t=uc(),s={enter:t.transitions.easing.easeOut,exit:t.transitions.easing.sharp},o={enter:t.transitions.duration.enteringScreen,exit:t.transitions.duration.leavingScreen},{addEndListener:i,appear:l=!0,children:c,container:d,direction:h="down",easing:m=s,in:y,onEnter:x,onEntered:b,onEntering:v,onExit:j,onExited:S,onExiting:k,style:N,timeout:P=o,TransitionComponent:R=fc,...F}=r,z=f.useRef(null),H=to(um(c),z,e),V=oe=>re=>{oe&&(re===void 0?oe(z.current):oe(z.current,re))},W=V((oe,re)=>{k0(h,oe,d),C2(oe),x&&x(oe,re)}),Z=V((oe,re)=>{const Te=Zh({timeout:P,style:N,easing:m},{mode:"enter"});oe.style.webkitTransition=t.transitions.create("-webkit-transform",{...Te}),oe.style.transition=t.transitions.create("transform",{...Te}),oe.style.webkitTransform="none",oe.style.transform="none",v&&v(oe,re)}),A=V(b),q=V(k),I=V(oe=>{const re=Zh({timeout:P,style:N,easing:m},{mode:"exit"});oe.style.webkitTransition=t.transitions.create("-webkit-transform",re),oe.style.transition=t.transitions.create("transform",re),k0(h,oe,d),j&&j(oe)}),K=V(oe=>{oe.style.webkitTransition="",oe.style.transition="",S&&S(oe)}),D=oe=>{i&&i(z.current,oe)},Q=f.useCallback(()=>{z.current&&k0(h,z.current,d)},[h,d]);return f.useEffect(()=>{if(y||h==="down"||h==="right")return;const oe=x2(()=>{z.current&&k0(h,z.current,d)}),re=ic(z.current);return re.addEventListener("resize",oe),()=>{oe.clear(),re.removeEventListener("resize",oe)}},[h,y,d]),f.useEffect(()=>{y||Q()},[y,Q]),n.jsx(R,{nodeRef:z,onEnter:W,onEntered:A,onEntering:Z,onExit:I,onExited:K,onExiting:q,addEndListener:D,appear:l,in:y,timeout:P,...F,children:(oe,{ownerState:re,...Te})=>f.cloneElement(c,{ref:H,style:{visibility:oe==="exited"&&!y?"hidden":void 0,...N,...c.props.style},...Te})})});function yce(a){return an("MuiDrawer",a)}ln("MuiDrawer",["root","docked","paper","anchorLeft","anchorRight","anchorTop","anchorBottom","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const OA=(a,r)=>{const{ownerState:e}=a;return[r.root,(e.variant==="permanent"||e.variant==="persistent")&&r.docked,r.modal]},xce=a=>{const{classes:r,anchor:e,variant:t}=a,s={root:["root",`anchor${Yt(e)}`],docked:[(t==="permanent"||t==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${Yt(e)}`,t!=="temporary"&&`paperAnchorDocked${Yt(e)}`]};return sn(s,yce,r)},vce=or(_2,{name:"MuiDrawer",slot:"Root",overridesResolver:OA})(vn(({theme:a})=>({zIndex:(a.vars||a).zIndex.drawer}))),bce=or("div",{shouldForwardProp:Lo,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:OA})({flex:"0 0 auto"}),wce=or(ta,{name:"MuiDrawer",slot:"Paper",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.paper,r[`paperAnchor${Yt(e.anchor)}`],e.variant!=="temporary"&&r[`paperAnchorDocked${Yt(e.anchor)}`]]}})(vn(({theme:a})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(a.vars||a).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:({ownerState:r})=>r.anchor==="left"&&r.variant!=="temporary",style:{borderRight:`1px solid ${(a.vars||a).palette.divider}`}},{props:({ownerState:r})=>r.anchor==="top"&&r.variant!=="temporary",style:{borderBottom:`1px solid ${(a.vars||a).palette.divider}`}},{props:({ownerState:r})=>r.anchor==="right"&&r.variant!=="temporary",style:{borderLeft:`1px solid ${(a.vars||a).palette.divider}`}},{props:({ownerState:r})=>r.anchor==="bottom"&&r.variant!=="temporary",style:{borderTop:`1px solid ${(a.vars||a).palette.divider}`}}]}))),PA={left:"right",right:"left",top:"down",bottom:"up"};function jce(a){return["left","right"].includes(a)}function Cce({direction:a},r){return a==="rtl"&&jce(r)?PA[r]:r}const Sce=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiDrawer"}),s=uc(),o=h2(),i={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{anchor:l="left",BackdropProps:c,children:d,className:h,elevation:m=16,hideBackdrop:y=!1,ModalProps:{BackdropProps:x,...b}={},onClose:v,open:j=!1,PaperProps:S={},SlideProps:k,TransitionComponent:N,transitionDuration:P=i,variant:R="temporary",slots:F={},slotProps:z={},...H}=t,V=f.useRef(!1);f.useEffect(()=>{V.current=!0},[]);const W=Cce({direction:o?"rtl":"ltr"},l),A={...t,anchor:l,elevation:m,open:j,variant:R,...H},q=xce(A),I={slots:{transition:N,...F},slotProps:{paper:S,transition:k,...z,backdrop:v2(z.backdrop||{...c,...x},{transitionDuration:P})}},[K,D]=xn("root",{ref:e,elementType:vce,className:Tr(q.root,q.modal,h),shouldForwardComponentProp:!0,ownerState:A,externalForwardedProps:{...I,...H,...b},additionalProps:{open:j,onClose:v,hideBackdrop:y,slots:{backdrop:I.slots.backdrop},slotProps:{backdrop:I.slotProps.backdrop}}}),[Q,oe]=xn("paper",{elementType:wce,shouldForwardComponentProp:!0,className:Tr(q.paper,S.className),ownerState:A,externalForwardedProps:I,additionalProps:{elevation:R==="temporary"?m:0,square:!0,...R==="temporary"&&{role:"dialog","aria-modal":"true"}}}),[re,Te]=xn("docked",{elementType:bce,ref:e,className:Tr(q.root,q.docked,h),ownerState:A,externalForwardedProps:I,additionalProps:H}),[G,Y]=xn("transition",{elementType:yb,ownerState:A,externalForwardedProps:I,additionalProps:{in:j,direction:PA[W],timeout:P,appear:V.current}}),Se=n.jsx(Q,{...oe,children:d});if(R==="permanent")return n.jsx(re,{...Te,children:Se});const fe=n.jsx(G,{...Y,children:Se});return R==="persistent"?n.jsx(re,{...Te,children:fe}):n.jsx(K,{...D,children:fe})}),Nce=a=>{const{classes:r,disableUnderline:e,startAdornment:t,endAdornment:s,size:o,hiddenLabel:i,multiline:l}=a,c={root:["root",!e&&"underline",t&&"adornedStart",s&&"adornedEnd",o==="small"&&`size${Yt(o)}`,i&&"hiddenLabel",l&&"multiline"],input:["input"]},d=sn(c,mie,r);return{...r,...d}},kce=or(sw,{shouldForwardProp:a=>Lo(a)||a==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[...nw(a,r),!e.disableUnderline&&r.underline]}})(vn(({theme:a})=>{const r=a.palette.mode==="light",e=r?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",t=r?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",s=r?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",o=r?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:a.vars?a.vars.palette.FilledInput.bg:t,borderTopLeftRadius:(a.vars||a).shape.borderRadius,borderTopRightRadius:(a.vars||a).shape.borderRadius,transition:a.transitions.create("background-color",{duration:a.transitions.duration.shorter,easing:a.transitions.easing.easeOut}),"&:hover":{backgroundColor:a.vars?a.vars.palette.FilledInput.hoverBg:s,"@media (hover: none)":{backgroundColor:a.vars?a.vars.palette.FilledInput.bg:t}},[`&.${Rf.focused}`]:{backgroundColor:a.vars?a.vars.palette.FilledInput.bg:t},[`&.${Rf.disabled}`]:{backgroundColor:a.vars?a.vars.palette.FilledInput.disabledBg:o},variants:[{props:({ownerState:i})=>!i.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:a.transitions.create("transform",{duration:a.transitions.duration.shorter,easing:a.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Rf.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Rf.error}`]:{"&::before, &::after":{borderBottomColor:(a.vars||a).palette.error.main}},"&::before":{borderBottom:`1px solid ${a.vars?a.alpha(a.vars.palette.common.onBackground,a.vars.opacity.inputUnderline):e}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:a.transitions.create("border-bottom-color",{duration:a.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Rf.disabled}, .${Rf.error}):before`]:{borderBottom:`1px solid ${(a.vars||a).palette.text.primary}`},[`&.${Rf.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(a.palette).filter(Ss()).map(([i])=>({props:{disableUnderline:!1,color:i},style:{"&::after":{borderBottom:`2px solid ${(a.vars||a).palette[i]?.main}`}}})),{props:({ownerState:i})=>i.startAdornment,style:{paddingLeft:12}},{props:({ownerState:i})=>i.endAdornment,style:{paddingRight:12}},{props:({ownerState:i})=>i.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:i,size:l})=>i.multiline&&l==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:i})=>i.multiline&&i.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:i})=>i.multiline&&i.hiddenLabel&&i.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),_ce=or(ow,{name:"MuiFilledInput",slot:"Input",overridesResolver:aw})(vn(({theme:a})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!a.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:a.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:a.palette.mode==="light"?null:"#fff",caretColor:a.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...a.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[a.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:r})=>r.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:r})=>r.startAdornment,style:{paddingLeft:0}},{props:({ownerState:r})=>r.endAdornment,style:{paddingRight:0}},{props:({ownerState:r})=>r.hiddenLabel&&r.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:r})=>r.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),E2=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiFilledInput"}),{disableUnderline:s=!1,components:o={},componentsProps:i,fullWidth:l=!1,hiddenLabel:c,inputComponent:d="input",multiline:h=!1,slotProps:m,slots:y={},type:x="text",...b}=t,v={...t,disableUnderline:s,fullWidth:l,inputComponent:d,multiline:h,type:x},j=Nce(t),S={root:{ownerState:v},input:{ownerState:v}},k=m??i?jo(S,m??i):S,N=y.root??o.Root??kce,P=y.input??o.Input??_ce;return n.jsx(S2,{slots:{root:N,input:P},slotProps:k,fullWidth:l,inputComponent:d,multiline:h,ref:e,type:x,...b,classes:j})});E2.muiName="Input";function Ece(a){return an("MuiFormControl",a)}ln("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const Tce=a=>{const{classes:r,margin:e,fullWidth:t}=a,s={root:["root",e!=="none"&&`margin${Yt(e)}`,t&&"fullWidth"]};return sn(s,Ece,r)},Oce=or("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.root,r[`margin${Yt(e.margin)}`],e.fullWidth&&r.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),rc=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiFormControl"}),{children:s,className:o,color:i="primary",component:l="div",disabled:c=!1,error:d=!1,focused:h,fullWidth:m=!1,hiddenLabel:y=!1,margin:x="none",required:b=!1,size:v="medium",variant:j="outlined",...S}=t,k={...t,color:i,component:l,disabled:c,error:d,fullWidth:m,hiddenLabel:y,margin:x,required:b,size:v,variant:j},N=Tce(k),[P,R]=f.useState(()=>{let K=!1;return s&&f.Children.forEach(s,D=>{if(!ly(D,["Input","Select"]))return;const Q=ly(D,["Select"])?D.props.input:D;Q&&die(Q.props)&&(K=!0)}),K}),[F,z]=f.useState(()=>{let K=!1;return s&&f.Children.forEach(s,D=>{ly(D,["Input","Select"])&&(gb(D.props,!0)||gb(D.props.inputProps,!0))&&(K=!0)}),K}),[H,V]=f.useState(!1);c&&H&&V(!1);const W=h!==void 0&&!c?h:H;let Z;f.useRef(!1);const A=f.useCallback(()=>{z(!0)},[]),q=f.useCallback(()=>{z(!1)},[]),I=f.useMemo(()=>({adornedStart:P,setAdornedStart:R,color:i,disabled:c,error:d,filled:F,focused:W,fullWidth:m,hiddenLabel:y,size:v,onBlur:()=>{V(!1)},onFocus:()=>{V(!0)},onEmpty:q,onFilled:A,registerEffect:Z,required:b,variant:j}),[P,i,c,d,F,W,m,y,Z,q,A,b,v,j]);return n.jsx(rw.Provider,{value:I,children:n.jsx(Oce,{as:l,ownerState:k,className:Tr(N.root,o),ref:e,...S,children:s})})});function Pce(a){return an("MuiFormControlLabel",a)}const Kg=ln("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Ace=a=>{const{classes:r,disabled:e,labelPlacement:t,error:s,required:o}=a,i={root:["root",e&&"disabled",`labelPlacement${Yt(t)}`,s&&"error",o&&"required"],label:["label",e&&"disabled"],asterisk:["asterisk",s&&"error"]};return sn(i,Pce,r)},Mce=or("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[{[`& .${Kg.label}`]:r.label},r.root,r[`labelPlacement${Yt(e.labelPlacement)}`]]}})(vn(({theme:a})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Kg.disabled}`]:{cursor:"default"},[`& .${Kg.label}`]:{[`&.${Kg.disabled}`]:{color:(a.vars||a).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:r})=>r==="start"||r==="top"||r==="bottom",style:{marginLeft:16}}]}))),Ice=or("span",{name:"MuiFormControlLabel",slot:"Asterisk"})(vn(({theme:a})=>({[`&.${Kg.error}`]:{color:(a.vars||a).palette.error.main}}))),Ql=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiFormControlLabel"}),{checked:s,className:o,componentsProps:i={},control:l,disabled:c,disableTypography:d,inputRef:h,label:m,labelPlacement:y="end",name:x,onChange:b,required:v,slots:j={},slotProps:S={},value:k,...N}=t,P=pc(),R=c??l.props.disabled??P?.disabled,F=v??l.props.required,z={disabled:R,required:F};["checked","name","onChange","value","inputRef"].forEach(K=>{typeof l.props[K]>"u"&&typeof t[K]<"u"&&(z[K]=t[K])});const H=Gu({props:t,muiFormControl:P,states:["error"]}),V={...t,disabled:R,labelPlacement:y,required:F,error:H.error},W=Ace(V),Z={slots:j,slotProps:{...i,...S}},[A,q]=xn("typography",{elementType:et,externalForwardedProps:Z,ownerState:V});let I=m;return I!=null&&I.type!==et&&!d&&(I=n.jsx(A,{component:"span",...q,className:Tr(W.label,q?.className),children:I})),n.jsxs(Mce,{className:Tr(W.root,o),ownerState:V,ref:e,...N,children:[f.cloneElement(l,z),F?n.jsxs("div",{children:[I,n.jsxs(Ice,{ownerState:V,"aria-hidden":!0,className:W.asterisk,children:["","*"]})]}):I]})});function Rce(a){return an("MuiFormGroup",a)}ln("MuiFormGroup",["root","row","error"]);const Lce=a=>{const{classes:r,row:e,error:t}=a;return sn({root:["root",e&&"row",t&&"error"]},Rce,r)},Dce=or("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.root,e.row&&r.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),Fce=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiFormGroup"}),{className:s,row:o=!1,...i}=t,l=pc(),c=Gu({props:t,muiFormControl:l,states:["error"]}),d={...t,row:o,error:c.error},h=Lce(d);return n.jsx(Dce,{className:Tr(h.root,s),ownerState:d,ref:e,...i})});function Bce(a){return an("MuiFormHelperText",a)}const RE=ln("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var LE;const zce=a=>{const{classes:r,contained:e,size:t,disabled:s,error:o,filled:i,focused:l,required:c}=a,d={root:["root",s&&"disabled",o&&"error",t&&`size${Yt(t)}`,e&&"contained",l&&"focused",i&&"filled",c&&"required"]};return sn(d,Bce,r)},Uce=or("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.root,e.size&&r[`size${Yt(e.size)}`],e.contained&&r.contained,e.filled&&r.filled]}})(vn(({theme:a})=>({color:(a.vars||a).palette.text.secondary,...a.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${RE.disabled}`]:{color:(a.vars||a).palette.text.disabled},[`&.${RE.error}`]:{color:(a.vars||a).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:r})=>r.contained,style:{marginLeft:14,marginRight:14}}]}))),$ce=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiFormHelperText"}),{children:s,className:o,component:i="p",disabled:l,error:c,filled:d,focused:h,margin:m,required:y,variant:x,...b}=t,v=pc(),j=Gu({props:t,muiFormControl:v,states:["variant","size","disabled","error","filled","focused","required"]}),S={...t,component:i,contained:j.variant==="filled"||j.variant==="outlined",variant:j.variant,size:j.size,disabled:j.disabled,error:j.error,filled:j.filled,focused:j.focused,required:j.required};delete S.ownerState;const k=zce(S);return n.jsx(Uce,{as:i,className:Tr(k.root,o),ref:e,...b,ownerState:S,children:s===" "?LE||(LE=n.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):s})});function Vce(a){return an("MuiFormLabel",a)}const dy=ln("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),Wce=a=>{const{classes:r,color:e,focused:t,disabled:s,error:o,filled:i,required:l}=a,c={root:["root",`color${Yt(e)}`,s&&"disabled",o&&"error",i&&"filled",t&&"focused",l&&"required"],asterisk:["asterisk",o&&"error"]};return sn(c,Vce,r)},Hce=or("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.root,e.color==="secondary"&&r.colorSecondary,e.filled&&r.filled]}})(vn(({theme:a})=>({color:(a.vars||a).palette.text.secondary,...a.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(a.palette).filter(Ss()).map(([r])=>({props:{color:r},style:{[`&.${dy.focused}`]:{color:(a.vars||a).palette[r].main}}})),{props:{},style:{[`&.${dy.disabled}`]:{color:(a.vars||a).palette.text.disabled},[`&.${dy.error}`]:{color:(a.vars||a).palette.error.main}}}]}))),qce=or("span",{name:"MuiFormLabel",slot:"Asterisk"})(vn(({theme:a})=>({[`&.${dy.error}`]:{color:(a.vars||a).palette.error.main}}))),Gce=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiFormLabel"}),{children:s,className:o,color:i,component:l="label",disabled:c,error:d,filled:h,focused:m,required:y,...x}=t,b=pc(),v=Gu({props:t,muiFormControl:b,states:["color","required","focused","disabled","error","filled"]}),j={...t,color:v.color||"primary",component:l,disabled:v.disabled,error:v.error,filled:v.filled,focused:v.focused,required:v.required},S=Wce(j);return n.jsxs(Hce,{as:l,ownerState:j,className:Tr(S.root,o),ref:e,...x,children:[s,v.required&&n.jsxs(qce,{ownerState:j,"aria-hidden":!0,className:S.asterisk,children:["","*"]})]})}),Wi=ese({createStyledComponent:or("div",{name:"MuiGrid",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.root,e.container&&r.container]}}),componentName:"MuiGrid",useThemeProps:a=>hn({props:a,name:"MuiGrid"}),useTheme:uc});function QC(a){return`scale(${a}, ${a**2})`}const Kce={entering:{opacity:1,transform:QC(1)},entered:{opacity:1,transform:"none"}},j1=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),JC=f.forwardRef(function(r,e){const{addEndListener:t,appear:s=!0,children:o,easing:i,in:l,onEnter:c,onEntered:d,onEntering:h,onExit:m,onExited:y,onExiting:x,style:b,timeout:v="auto",TransitionComponent:j=fc,...S}=r,k=gA(),N=f.useRef(),P=uc(),R=f.useRef(null),F=to(R,um(o),e),z=K=>D=>{if(K){const Q=R.current;D===void 0?K(Q):K(Q,D)}},H=z(h),V=z((K,D)=>{C2(K);const{duration:Q,delay:oe,easing:re}=Zh({style:b,timeout:v,easing:i},{mode:"enter"});let Te;v==="auto"?(Te=P.transitions.getAutoHeightDuration(K.clientHeight),N.current=Te):Te=Q,K.style.transition=[P.transitions.create("opacity",{duration:Te,delay:oe}),P.transitions.create("transform",{duration:j1?Te:Te*.666,delay:oe,easing:re})].join(","),c&&c(K,D)}),W=z(d),Z=z(x),A=z(K=>{const{duration:D,delay:Q,easing:oe}=Zh({style:b,timeout:v,easing:i},{mode:"exit"});let re;v==="auto"?(re=P.transitions.getAutoHeightDuration(K.clientHeight),N.current=re):re=D,K.style.transition=[P.transitions.create("opacity",{duration:re,delay:Q}),P.transitions.create("transform",{duration:j1?re:re*.666,delay:j1?Q:Q||re*.333,easing:oe})].join(","),K.style.opacity=0,K.style.transform=QC(.75),m&&m(K)}),q=z(y),I=K=>{v==="auto"&&k.start(N.current||0,K),t&&t(R.current,K)};return n.jsx(j,{appear:s,in:l,nodeRef:R,onEnter:V,onEntered:W,onEntering:H,onExit:A,onExited:q,onExiting:Z,addEndListener:I,timeout:v==="auto"?null:v,...S,children:(K,{ownerState:D,...Q})=>f.cloneElement(o,{style:{opacity:0,transform:QC(.75),visibility:K==="exited"&&!l?"hidden":void 0,...Kce[K],...b,...o.props.style},ref:F,...Q})})});JC&&(JC.muiSupportAuto=!0);const Yce=a=>{const{classes:r,disableUnderline:e}=a,s=sn({root:["root",!e&&"underline"],input:["input"]},pie,r);return{...r,...s}},Zce=or(sw,{shouldForwardProp:a=>Lo(a)||a==="classes",name:"MuiInput",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[...nw(a,r),!e.disableUnderline&&r.underline]}})(vn(({theme:a})=>{let e=a.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return a.vars&&(e=a.alpha(a.vars.palette.common.onBackground,a.vars.opacity.inputUnderline)),{position:"relative",variants:[{props:({ownerState:t})=>t.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:t})=>!t.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:a.transitions.create("transform",{duration:a.transitions.duration.shorter,easing:a.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Pg.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Pg.error}`]:{"&::before, &::after":{borderBottomColor:(a.vars||a).palette.error.main}},"&::before":{borderBottom:`1px solid ${e}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:a.transitions.create("border-bottom-color",{duration:a.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Pg.disabled}, .${Pg.error}):before`]:{borderBottom:`2px solid ${(a.vars||a).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${e}`}},[`&.${Pg.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(a.palette).filter(Ss()).map(([t])=>({props:{color:t,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(a.vars||a).palette[t].main}`}}}))]}})),Xce=or(ow,{name:"MuiInput",slot:"Input",overridesResolver:aw})({}),T2=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiInput"}),{disableUnderline:s=!1,components:o={},componentsProps:i,fullWidth:l=!1,inputComponent:c="input",multiline:d=!1,slotProps:h,slots:m={},type:y="text",...x}=t,b=Yce(t),j={root:{ownerState:{disableUnderline:s}}},S=h??i?jo(h??i,j):j,k=m.root??o.Root??Zce,N=m.input??o.Input??Xce;return n.jsx(S2,{slots:{root:k,input:N},slotProps:S,fullWidth:l,inputComponent:c,multiline:d,ref:e,type:y,...x,classes:b})});T2.muiName="Input";function Qce(a){return an("MuiInputAdornment",a)}const DE=ln("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var FE;const Jce=(a,r)=>{const{ownerState:e}=a;return[r.root,r[`position${Yt(e.position)}`],e.disablePointerEvents===!0&&r.disablePointerEvents,r[e.variant]]},ede=a=>{const{classes:r,disablePointerEvents:e,hiddenLabel:t,position:s,size:o,variant:i}=a,l={root:["root",e&&"disablePointerEvents",s&&`position${Yt(s)}`,i,t&&"hiddenLabel",o&&`size${Yt(o)}`]};return sn(l,Qce,r)},tde=or("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:Jce})(vn(({theme:a})=>({display:"flex",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(a.vars||a).palette.action.active,variants:[{props:{variant:"filled"},style:{[`&.${DE.positionStart}&:not(.${DE.hiddenLabel})`]:{marginTop:16}}},{props:{position:"start"},style:{marginRight:8}},{props:{position:"end"},style:{marginLeft:8}},{props:{disablePointerEvents:!0},style:{pointerEvents:"none"}}]}))),Zi=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiInputAdornment"}),{children:s,className:o,component:i="div",disablePointerEvents:l=!1,disableTypography:c=!1,position:d,variant:h,...m}=t,y=pc()||{};let x=h;h&&y.variant,y&&!x&&(x=y.variant);const b={...t,hiddenLabel:y.hiddenLabel,size:y.size,disablePointerEvents:l,position:d,variant:x},v=ede(b);return n.jsx(rw.Provider,{value:null,children:n.jsx(tde,{as:i,ownerState:b,className:Tr(v.root,o),ref:e,...m,children:typeof s=="string"&&!c?n.jsx(et,{color:"textSecondary",children:s}):n.jsxs(f.Fragment,{children:[d==="start"?FE||(FE=n.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):null,s]})})})});function rde(a){return an("MuiInputLabel",a)}ln("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const nde=a=>{const{classes:r,formControl:e,size:t,shrink:s,disableAnimation:o,variant:i,required:l}=a,c={root:["root",e&&"formControl",!o&&"animated",s&&"shrink",t&&t!=="medium"&&`size${Yt(t)}`,i],asterisk:[l&&"asterisk"]},d=sn(c,rde,r);return{...r,...d}},ade=or(Gce,{shouldForwardProp:a=>Lo(a)||a==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[{[`& .${dy.asterisk}`]:r.asterisk},r.root,e.formControl&&r.formControl,e.size==="small"&&r.sizeSmall,e.shrink&&r.shrink,!e.disableAnimation&&r.animated,e.focused&&r.focused,r[e.variant]]}})(vn(({theme:a})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:r})=>r.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:r})=>r.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:r})=>!r.disableAnimation,style:{transition:a.transitions.create(["color","transform","max-width"],{duration:a.transitions.duration.shorter,easing:a.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:r,ownerState:e})=>r==="filled"&&e.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:r,ownerState:e,size:t})=>r==="filled"&&e.shrink&&t==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:r,ownerState:e})=>r==="outlined"&&e.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),Bu=f.forwardRef(function(r,e){const t=hn({name:"MuiInputLabel",props:r}),{disableAnimation:s=!1,margin:o,shrink:i,variant:l,className:c,...d}=t,h=pc();let m=i;typeof m>"u"&&h&&(m=h.filled||h.focused||h.adornedStart);const y=Gu({props:t,muiFormControl:h,states:["size","variant","required","focused"]}),x={...t,disableAnimation:s,formControl:h,shrink:m,size:y.size,variant:y.variant,required:y.required,focused:y.focused},b=nde(x);return n.jsx(ade,{"data-shrink":m,ref:e,className:Tr(b.root,c),...d,ownerState:x,classes:b})});function sde(a){return an("MuiLink",a)}const ode=ln("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),ide=({theme:a,ownerState:r})=>{const e=r.color;if("colorSpace"in a&&a.colorSpace){const o=Wc(a,`palette.${e}.main`)||Wc(a,`palette.${e}`)||r.color;return a.alpha(o,.4)}const t=Wc(a,`palette.${e}.main`,!1)||Wc(a,`palette.${e}`,!1)||r.color,s=Wc(a,`palette.${e}.mainChannel`)||Wc(a,`palette.${e}Channel`);return"vars"in a&&s?`rgba(${s} / 0.4)`:_y(t,.4)},BE={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},lde=a=>{const{classes:r,component:e,focusVisible:t,underline:s}=a,o={root:["root",`underline${Yt(s)}`,e==="button"&&"button",t&&"focusVisible"]};return sn(o,sde,r)},cde=or(et,{name:"MuiLink",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.root,r[`underline${Yt(e.underline)}`],e.component==="button"&&r.button]}})(vn(({theme:a})=>({variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:({underline:r,ownerState:e})=>r==="always"&&e.color!=="inherit",style:{textDecorationColor:"var(--Link-underlineColor)"}},{props:({underline:r,ownerState:e})=>r==="always"&&e.color==="inherit",style:a.colorSpace?{textDecorationColor:a.alpha("currentColor",.4)}:null},...Object.entries(a.palette).filter(Ss()).map(([r])=>({props:{underline:"always",color:r},style:{"--Link-underlineColor":a.alpha((a.vars||a).palette[r].main,.4)}})),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":a.alpha((a.vars||a).palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":a.alpha((a.vars||a).palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(a.vars||a).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${ode.focusVisible}`]:{outline:"auto"}}}]}))),Io=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiLink"}),s=uc(),{className:o,color:i="primary",component:l="a",onBlur:c,onFocus:d,TypographyClasses:h,underline:m="always",variant:y="inherit",sx:x,...b}=t,[v,j]=f.useState(!1),S=R=>{Qh(R.target)||j(!1),c&&c(R)},k=R=>{Qh(R.target)&&j(!0),d&&d(R)},N={...t,color:i,component:l,focusVisible:v,underline:m,variant:y},P=lde(N);return n.jsx(cde,{color:i,className:Tr(P.root,o),classes:h,component:l,onBlur:S,onFocus:k,ref:e,ownerState:N,variant:y,...b,sx:[...BE[i]===void 0?[{color:i}]:[],...Array.isArray(x)?x:[x]],style:{...b.style,...m==="always"&&i!=="inherit"&&!BE[i]&&{"--Link-underlineColor":ide({theme:s,ownerState:N})}}})}),Dd=f.createContext({});function dde(a){return an("MuiList",a)}ln("MuiList",["root","padding","dense","subheader"]);const ude=a=>{const{classes:r,disablePadding:e,dense:t,subheader:s}=a;return sn({root:["root",!e&&"padding",t&&"dense",s&&"subheader"]},dde,r)},fde=or("ul",{name:"MuiList",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.root,!e.disablePadding&&r.padding,e.dense&&r.dense,e.subheader&&r.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:a})=>!a.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:a})=>a.subheader,style:{paddingTop:0}}]}),AA=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiList"}),{children:s,className:o,component:i="ul",dense:l=!1,disablePadding:c=!1,subheader:d,...h}=t,m=f.useMemo(()=>({dense:l}),[l]),y={...t,component:i,dense:l,disablePadding:c},x=ude(y);return n.jsx(Dd.Provider,{value:m,children:n.jsxs(fde,{as:i,className:Tr(x.root,o),ref:e,ownerState:y,...h,children:[d,s]})})});function pde(a){return an("MuiListItem",a)}ln("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);const hde=ln("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function mde(a){return an("MuiListItemSecondaryAction",a)}ln("MuiListItemSecondaryAction",["root","disableGutters"]);const gde=a=>{const{disableGutters:r,classes:e}=a;return sn({root:["root",r&&"disableGutters"]},mde,e)},yde=or("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.root,e.disableGutters&&r.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:a})=>a.disableGutters,style:{right:0}}]}),O2=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiListItemSecondaryAction"}),{className:s,...o}=t,i=f.useContext(Dd),l={...t,disableGutters:i.disableGutters},c=gde(l);return n.jsx(yde,{className:Tr(c.root,s),ownerState:l,ref:e,...o})});O2.muiName="ListItemSecondaryAction";const xde=(a,r)=>{const{ownerState:e}=a;return[r.root,e.dense&&r.dense,e.alignItems==="flex-start"&&r.alignItemsFlexStart,e.divider&&r.divider,!e.disableGutters&&r.gutters,!e.disablePadding&&r.padding,e.hasSecondaryAction&&r.secondaryAction]},vde=a=>{const{alignItems:r,classes:e,dense:t,disableGutters:s,disablePadding:o,divider:i,hasSecondaryAction:l}=a;return sn({root:["root",t&&"dense",!s&&"gutters",!o&&"padding",i&&"divider",r==="flex-start"&&"alignItemsFlexStart",l&&"secondaryAction"],container:["container"],secondaryAction:["secondaryAction"]},pde,e)},bde=or("div",{name:"MuiListItem",slot:"Root",overridesResolver:xde})(vn(({theme:a})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:r})=>!r.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:r})=>!r.disablePadding&&r.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:r})=>!r.disablePadding&&!r.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:r})=>!r.disablePadding&&!!r.secondaryAction,style:{paddingRight:48}},{props:({ownerState:r})=>!!r.secondaryAction,style:{[`& > .${hde.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:r})=>r.divider,style:{borderBottom:`1px solid ${(a.vars||a).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:r})=>r.button,style:{transition:a.transitions.create("background-color",{duration:a.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(a.vars||a).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:r})=>r.hasSecondaryAction,style:{paddingRight:48}}]}))),wde=or("li",{name:"MuiListItem",slot:"Container"})({position:"relative"}),jde=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiListItem"}),{alignItems:s="center",children:o,className:i,component:l,components:c={},componentsProps:d={},ContainerComponent:h="li",ContainerProps:{className:m,...y}={},dense:x=!1,disableGutters:b=!1,disablePadding:v=!1,divider:j=!1,secondaryAction:S,slotProps:k={},slots:N={},...P}=t,R=f.useContext(Dd),F=f.useMemo(()=>({dense:x||R.dense||!1,alignItems:s,disableGutters:b}),[s,R.dense,x,b]),z=f.useRef(null),H=f.Children.toArray(o),V=H.length&&ly(H[H.length-1],["ListItemSecondaryAction"]),W={...t,alignItems:s,dense:F.dense,disableGutters:b,disablePadding:v,divider:j,hasSecondaryAction:V},Z=vde(W),A=to(z,e),q={slots:N,slotProps:k},[I,K]=xn("secondaryAction",{elementType:O2,externalForwardedProps:q,ownerState:W,className:Z.secondaryAction}),D=N.root||c.Root||bde,Q=k.root||d.root||{},oe={className:Tr(Z.root,Q.className,i),...P};let re=l||"li";return V?(re=!oe.component&&!l?"div":re,h==="li"&&(re==="li"?re="div":oe.component==="li"&&(oe.component="div")),n.jsx(Dd.Provider,{value:F,children:n.jsxs(wde,{as:h,className:Tr(Z.container,m),ref:A,ownerState:W,...y,children:[n.jsx(D,{...Q,...!Xh(D)&&{as:re,ownerState:{...W,...Q.ownerState}},...oe,children:H}),H.pop()]})})):n.jsx(Dd.Provider,{value:F,children:n.jsxs(D,{...Q,as:re,ref:A,...!Xh(D)&&{ownerState:{...W,...Q.ownerState}},...oe,children:[H,S&&n.jsx(I,{...K,children:S})]})})});function Cde(a){return an("MuiListItemIcon",a)}const zE=ln("MuiListItemIcon",["root","alignItemsFlexStart"]),Sde=a=>{const{alignItems:r,classes:e}=a;return sn({root:["root",r==="flex-start"&&"alignItemsFlexStart"]},Cde,e)},Nde=or("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.root,e.alignItems==="flex-start"&&r.alignItemsFlexStart]}})(vn(({theme:a})=>({minWidth:56,color:(a.vars||a).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}))),UE=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiListItemIcon"}),{className:s,...o}=t,i=f.useContext(Dd),l={...t,alignItems:i.alignItems},c=Sde(l);return n.jsx(Nde,{className:Tr(c.root,s),ownerState:l,ref:e,...o})});function kde(a){return an("MuiListItemText",a)}const Ph=ln("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),_de=a=>{const{classes:r,inset:e,primary:t,secondary:s,dense:o}=a;return sn({root:["root",e&&"inset",o&&"dense",t&&s&&"multiline"],primary:["primary"],secondary:["secondary"]},kde,r)},Ede=or("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[{[`& .${Ph.primary}`]:r.primary},{[`& .${Ph.secondary}`]:r.secondary},r.root,e.inset&&r.inset,e.primary&&e.secondary&&r.multiline,e.dense&&r.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${wE.root}:where(& .${Ph.primary})`]:{display:"block"},[`.${wE.root}:where(& .${Ph.secondary})`]:{display:"block"},variants:[{props:({ownerState:a})=>a.primary&&a.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:a})=>a.inset,style:{paddingLeft:56}}]}),eS=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiListItemText"}),{children:s,className:o,disableTypography:i=!1,inset:l=!1,primary:c,primaryTypographyProps:d,secondary:h,secondaryTypographyProps:m,slots:y={},slotProps:x={},...b}=t,{dense:v}=f.useContext(Dd);let j=c??s,S=h;const k={...t,disableTypography:i,inset:l,primary:!!j,secondary:!!S,dense:v},N=_de(k),P={slots:y,slotProps:{primary:d,secondary:m,...x}},[R,F]=xn("root",{className:Tr(N.root,o),elementType:Ede,externalForwardedProps:{...P,...b},ownerState:k,ref:e}),[z,H]=xn("primary",{className:N.primary,elementType:et,externalForwardedProps:P,ownerState:k}),[V,W]=xn("secondary",{className:N.secondary,elementType:et,externalForwardedProps:P,ownerState:k});return j!=null&&j.type!==et&&!i&&(j=n.jsx(z,{variant:v?"body2":"body1",component:H?.variant?void 0:"span",...H,children:j})),S!=null&&S.type!==et&&!i&&(S=n.jsx(V,{variant:"body2",color:"textSecondary",...W,children:S})),n.jsxs(R,{...F,children:[j,S]})});function C1(a,r,e){return a===r?a.firstChild:r&&r.nextElementSibling?r.nextElementSibling:e?null:a.firstChild}function $E(a,r,e){return a===r?e?a.firstChild:a.lastChild:r&&r.previousElementSibling?r.previousElementSibling:e?null:a.lastChild}function MA(a,r){if(r===void 0)return!0;let e=a.innerText;return e===void 0&&(e=a.textContent),e=e.trim().toLowerCase(),e.length===0?!1:r.repeating?e[0]===r.keys[0]:e.startsWith(r.keys.join(""))}function Ag(a,r,e,t,s,o){let i=!1,l=s(a,r,r?e:!1);for(;l;){if(l===a.firstChild){if(i)return!1;i=!0}const c=t?!1:l.disabled||l.getAttribute("aria-disabled")==="true";if(!l.hasAttribute("tabindex")||!MA(l,o)||c)l=s(a,l,e);else return l.focus(),!0}return!1}const Tde=f.forwardRef(function(r,e){const{actions:t,autoFocus:s=!1,autoFocusItem:o=!1,children:i,className:l,disabledItemsFocusable:c=!1,disableListWrap:d=!1,onKeyDown:h,variant:m="selectedMenu",...y}=r,x=f.useRef(null),b=f.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Wd(()=>{s&&x.current.focus()},[s]),f.useImperativeHandle(t,()=>({adjustStyleForScrollbar:(N,{direction:P})=>{const R=!x.current.style.width;if(N.clientHeight<x.current.clientHeight&&R){const F=`${EA(ic(N))}px`;x.current.style[P==="rtl"?"paddingLeft":"paddingRight"]=F,x.current.style.width=`calc(100% + ${F})`}return x.current}}),[]);const v=N=>{const P=x.current,R=N.key;if(N.ctrlKey||N.metaKey||N.altKey){h&&h(N);return}const z=Gg(oc(P));if(R==="ArrowDown")N.preventDefault(),Ag(P,z,d,c,C1);else if(R==="ArrowUp")N.preventDefault(),Ag(P,z,d,c,$E);else if(R==="Home")N.preventDefault(),Ag(P,null,d,c,C1);else if(R==="End")N.preventDefault(),Ag(P,null,d,c,$E);else if(R.length===1){const H=b.current,V=R.toLowerCase(),W=performance.now();H.keys.length>0&&(W-H.lastTime>500?(H.keys=[],H.repeating=!0,H.previousKeyMatched=!0):H.repeating&&V!==H.keys[0]&&(H.repeating=!1)),H.lastTime=W,H.keys.push(V);const Z=z&&!H.repeating&&MA(z,H);H.previousKeyMatched&&(Z||Ag(P,z,!1,c,C1,H))?N.preventDefault():H.previousKeyMatched=!1}h&&h(N)},j=to(x,e);let S=-1;f.Children.forEach(i,(N,P)=>{if(!f.isValidElement(N)){S===P&&(S+=1,S>=i.length&&(S=-1));return}N.props.disabled||(m==="selectedMenu"&&N.props.selected||S===-1)&&(S=P),S===P&&(N.props.disabled||N.props.muiSkipListHighlight||N.type.muiSkipListHighlight)&&(S+=1,S>=i.length&&(S=-1))});const k=f.Children.map(i,(N,P)=>{if(P===S){const R={};return o&&(R.autoFocus=!0),N.props.tabIndex===void 0&&m==="selectedMenu"&&(R.tabIndex=0),f.cloneElement(N,R)}return N});return n.jsx(AA,{role:"menu",ref:j,className:l,onKeyDown:v,tabIndex:s?0:-1,...y,children:k})});function Ode(a){return an("MuiPopover",a)}ln("MuiPopover",["root","paper"]);function VE(a,r){let e=0;return typeof r=="number"?e=r:r==="center"?e=a.height/2:r==="bottom"&&(e=a.height),e}function WE(a,r){let e=0;return typeof r=="number"?e=r:r==="center"?e=a.width/2:r==="right"&&(e=a.width),e}function HE(a){return[a.horizontal,a.vertical].map(r=>typeof r=="number"?`${r}px`:r).join(" ")}function _0(a){return typeof a=="function"?a():a}const Pde=a=>{const{classes:r}=a;return sn({root:["root"],paper:["paper"]},Ode,r)},Ade=or(_2,{name:"MuiPopover",slot:"Root"})({}),IA=or(ta,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Mde=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiPopover"}),{action:s,anchorEl:o,anchorOrigin:i={vertical:"top",horizontal:"left"},anchorPosition:l,anchorReference:c="anchorEl",children:d,className:h,container:m,elevation:y=8,marginThreshold:x=16,open:b,PaperProps:v={},slots:j={},slotProps:S={},transformOrigin:k={vertical:"top",horizontal:"left"},TransitionComponent:N,transitionDuration:P="auto",TransitionProps:R={},disableScrollLock:F=!1,...z}=t,H=f.useRef(),V={...t,anchorOrigin:i,anchorReference:c,elevation:y,marginThreshold:x,transformOrigin:k,TransitionComponent:N,transitionDuration:P,TransitionProps:R},W=Pde(V),Z=f.useCallback(()=>{if(c==="anchorPosition")return l;const ze=_0(o),pt=(ze&&ze.nodeType===1?ze:oc(H.current).body).getBoundingClientRect();return{top:pt.top+VE(pt,i.vertical),left:pt.left+WE(pt,i.horizontal)}},[o,i.horizontal,i.vertical,l,c]),A=f.useCallback(ze=>({vertical:VE(ze,k.vertical),horizontal:WE(ze,k.horizontal)}),[k.horizontal,k.vertical]),q=f.useCallback(ze=>{const We={width:ze.offsetWidth,height:ze.offsetHeight},pt=A(We);if(c==="none")return{top:null,left:null,transformOrigin:HE(pt)};const Pt=Z();let ee=Pt.top-pt.vertical,Ne=Pt.left-pt.horizontal;const Ie=ee+We.height,ne=Ne+We.width,M=ic(_0(o)),U=M.innerHeight-x,J=M.innerWidth-x;if(x!==null&&ee<x){const ce=ee-x;ee-=ce,pt.vertical+=ce}else if(x!==null&&Ie>U){const ce=Ie-U;ee-=ce,pt.vertical+=ce}if(x!==null&&Ne<x){const ce=Ne-x;Ne-=ce,pt.horizontal+=ce}else if(ne>J){const ce=ne-J;Ne-=ce,pt.horizontal+=ce}return{top:`${Math.round(ee)}px`,left:`${Math.round(Ne)}px`,transformOrigin:HE(pt)}},[o,c,Z,A,x]),[I,K]=f.useState(b),D=f.useCallback(()=>{const ze=H.current;if(!ze)return;const We=q(ze);We.top!==null&&ze.style.setProperty("top",We.top),We.left!==null&&(ze.style.left=We.left),ze.style.transformOrigin=We.transformOrigin,K(!0)},[q]);f.useEffect(()=>(F&&window.addEventListener("scroll",D),()=>window.removeEventListener("scroll",D)),[o,F,D]);const Q=()=>{D()},oe=()=>{K(!1)};f.useEffect(()=>{b&&D()}),f.useImperativeHandle(s,()=>b?{updatePosition:()=>{D()}}:null,[b,D]),f.useEffect(()=>{if(!b)return;const ze=x2(()=>{D()}),We=ic(_0(o));return We.addEventListener("resize",ze),()=>{ze.clear(),We.removeEventListener("resize",ze)}},[o,b,D]);let re=P;const Te={slots:{transition:N,...j},slotProps:{transition:R,paper:v,...S}},[G,Y]=xn("transition",{elementType:JC,externalForwardedProps:Te,ownerState:V,getSlotProps:ze=>({...ze,onEntering:(We,pt)=>{ze.onEntering?.(We,pt),Q()},onExited:We=>{ze.onExited?.(We),oe()}}),additionalProps:{appear:!0,in:b}});P==="auto"&&!G.muiSupportAuto&&(re=void 0);const Se=m||(o?oc(_0(o)).body:void 0),[fe,{slots:Ee,slotProps:Ae,...qe}]=xn("root",{ref:e,elementType:Ade,externalForwardedProps:{...Te,...z},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:j.backdrop},slotProps:{backdrop:v2(typeof S.backdrop=="function"?S.backdrop(V):S.backdrop,{invisible:!0})},container:Se,open:b},ownerState:V,className:Tr(W.root,h)}),[we,Oe]=xn("paper",{ref:H,className:W.paper,elementType:IA,externalForwardedProps:Te,shouldForwardComponentProp:!0,additionalProps:{elevation:y,style:I?void 0:{opacity:0}},ownerState:V});return n.jsx(fe,{...qe,...!Xh(fe)&&{slots:Ee,slotProps:Ae,disableScrollLock:F},children:n.jsx(G,{...Y,timeout:re,children:n.jsx(we,{...Oe,children:d})})})});function Ide(a){return an("MuiMenu",a)}ln("MuiMenu",["root","paper","list"]);const Rde={vertical:"top",horizontal:"right"},Lde={vertical:"top",horizontal:"left"},Dde=a=>{const{classes:r}=a;return sn({root:["root"],paper:["paper"],list:["list"]},Ide,r)},Fde=or(Mde,{shouldForwardProp:a=>Lo(a)||a==="classes",name:"MuiMenu",slot:"Root"})({}),Bde=or(IA,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),zde=or(Tde,{name:"MuiMenu",slot:"List"})({outline:0}),P2=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiMenu"}),{autoFocus:s=!0,children:o,className:i,disableAutoFocusItem:l=!1,MenuListProps:c={},onClose:d,open:h,PaperProps:m={},PopoverClasses:y,transitionDuration:x="auto",TransitionProps:{onEntering:b,...v}={},variant:j="selectedMenu",slots:S={},slotProps:k={},...N}=t,P=h2(),R={...t,autoFocus:s,disableAutoFocusItem:l,MenuListProps:c,onEntering:b,PaperProps:m,transitionDuration:x,TransitionProps:v,variant:j},F=Dde(R),z=s&&!l&&h,H=f.useRef(null),V=(re,Te)=>{H.current&&H.current.adjustStyleForScrollbar(re,{direction:P?"rtl":"ltr"}),b&&b(re,Te)},W=re=>{re.key==="Tab"&&(re.preventDefault(),d&&d(re,"tabKeyDown"))};let Z=-1;f.Children.map(o,(re,Te)=>{f.isValidElement(re)&&(re.props.disabled||(j==="selectedMenu"&&re.props.selected||Z===-1)&&(Z=Te))});const A={slots:S,slotProps:{list:c,transition:v,paper:m,...k}},q=CA({elementType:S.root,externalSlotProps:k.root,ownerState:R,className:[F.root,i]}),[I,K]=xn("paper",{className:F.paper,elementType:Bde,externalForwardedProps:A,shouldForwardComponentProp:!0,ownerState:R}),[D,Q]=xn("list",{className:Tr(F.list,c.className),elementType:zde,shouldForwardComponentProp:!0,externalForwardedProps:A,getSlotProps:re=>({...re,onKeyDown:Te=>{W(Te),re.onKeyDown?.(Te)}}),ownerState:R}),oe=typeof A.slotProps.transition=="function"?A.slotProps.transition(R):A.slotProps.transition;return n.jsx(Fde,{onClose:d,anchorOrigin:{vertical:"bottom",horizontal:P?"right":"left"},transformOrigin:P?Rde:Lde,slots:{root:S.root,paper:I,backdrop:S.backdrop,...S.transition&&{transition:S.transition}},slotProps:{root:q,paper:K,backdrop:typeof k.backdrop=="function"?k.backdrop(R):k.backdrop,transition:{...oe,onEntering:(...re)=>{V(...re),oe?.onEntering?.(...re)}}},open:h,ref:e,transitionDuration:x,ownerState:R,...N,classes:y,children:n.jsx(D,{actions:H,autoFocus:s&&(Z===-1||l),autoFocusItem:z,variant:j,...Q,children:o})})});function Ude(a){return an("MuiMenuItem",a)}const Mg=ln("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),$de=(a,r)=>{const{ownerState:e}=a;return[r.root,e.dense&&r.dense,e.divider&&r.divider,!e.disableGutters&&r.gutters]},Vde=a=>{const{disabled:r,dense:e,divider:t,disableGutters:s,selected:o,classes:i}=a,c=sn({root:["root",e&&"dense",r&&"disabled",!s&&"gutters",t&&"divider",o&&"selected"]},Ude,i);return{...i,...c}},Wde=or($u,{shouldForwardProp:a=>Lo(a)||a==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:$de})(vn(({theme:a})=>({...a.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(a.vars||a).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Mg.selected}`]:{backgroundColor:a.alpha((a.vars||a).palette.primary.main,(a.vars||a).palette.action.selectedOpacity),[`&.${Mg.focusVisible}`]:{backgroundColor:a.alpha((a.vars||a).palette.primary.main,`${(a.vars||a).palette.action.selectedOpacity} + ${(a.vars||a).palette.action.focusOpacity}`)}},[`&.${Mg.selected}:hover`]:{backgroundColor:a.alpha((a.vars||a).palette.primary.main,`${(a.vars||a).palette.action.selectedOpacity} + ${(a.vars||a).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:a.alpha((a.vars||a).palette.primary.main,(a.vars||a).palette.action.selectedOpacity)}},[`&.${Mg.focusVisible}`]:{backgroundColor:(a.vars||a).palette.action.focus},[`&.${Mg.disabled}`]:{opacity:(a.vars||a).palette.action.disabledOpacity},[`& + .${IE.root}`]:{marginTop:a.spacing(1),marginBottom:a.spacing(1)},[`& + .${IE.inset}`]:{marginLeft:52},[`& .${Ph.root}`]:{marginTop:0,marginBottom:0},[`& .${Ph.inset}`]:{paddingLeft:36},[`& .${zE.root}`]:{minWidth:36},variants:[{props:({ownerState:r})=>!r.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:r})=>r.divider,style:{borderBottom:`1px solid ${(a.vars||a).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:r})=>!r.dense,style:{[a.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:r})=>r.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...a.typography.body2,[`& .${zE.root} svg`]:{fontSize:"1.25rem"}}}]}))),ss=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiMenuItem"}),{autoFocus:s=!1,component:o="li",dense:i=!1,divider:l=!1,disableGutters:c=!1,focusVisibleClassName:d,role:h="menuitem",tabIndex:m,className:y,...x}=t,b=f.useContext(Dd),v=f.useMemo(()=>({dense:i||b.dense||!1,disableGutters:c}),[b.dense,i,c]),j=f.useRef(null);Wd(()=>{s&&j.current&&j.current.focus()},[s]);const S={...t,dense:v.dense,divider:l,disableGutters:c},k=Vde(t),N=to(j,e);let P;return t.disabled||(P=m!==void 0?m:-1),n.jsx(Dd.Provider,{value:v,children:n.jsx(Wde,{ref:N,role:h,tabIndex:P,component:o,focusVisibleClassName:Tr(k.focusVisible,d),className:Tr(k.root,y),...x,ownerState:S,classes:k})})});function Hde(a){return an("MuiNativeSelect",a)}const A2=ln("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),qde=a=>{const{classes:r,variant:e,disabled:t,multiple:s,open:o,error:i}=a,l={select:["select",e,t&&"disabled",s&&"multiple",i&&"error"],icon:["icon",`icon${Yt(e)}`,o&&"iconOpen",t&&"disabled"]};return sn(l,Hde,r)},RA=or("select",{name:"MuiNativeSelect"})(({theme:a})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${A2.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(a.vars||a).palette.background.paper},variants:[{props:({ownerState:r})=>r.variant!=="filled"&&r.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(a.vars||a).shape.borderRadius,"&:focus":{borderRadius:(a.vars||a).shape.borderRadius},"&&&":{paddingRight:32}}}]})),Gde=or(RA,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Lo,overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.select,r[e.variant],e.error&&r.error,{[`&.${A2.multiple}`]:r.multiple}]}})({}),LA=or("svg",{name:"MuiNativeSelect"})(({theme:a})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(a.vars||a).palette.action.active,[`&.${A2.disabled}`]:{color:(a.vars||a).palette.action.disabled},variants:[{props:({ownerState:r})=>r.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),Kde=or(LA,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.icon,e.variant&&r[`icon${Yt(e.variant)}`],e.open&&r.iconOpen]}})({}),Yde=f.forwardRef(function(r,e){const{className:t,disabled:s,error:o,IconComponent:i,inputRef:l,variant:c="standard",...d}=r,h={...r,disabled:s,variant:c,error:o},m=qde(h);return n.jsxs(f.Fragment,{children:[n.jsx(Gde,{ownerState:h,className:Tr(m.select,t),disabled:s,ref:l||e,...d}),r.multiple?null:n.jsx(Kde,{as:i,ownerState:h,className:m.icon})]})});var qE;const Zde=or("fieldset",{name:"MuiNotchedOutlined",shouldForwardProp:Lo})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Xde=or("legend",{name:"MuiNotchedOutlined",shouldForwardProp:Lo})(vn(({theme:a})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:r})=>!r.withLabel,style:{padding:0,lineHeight:"11px",transition:a.transitions.create("width",{duration:150,easing:a.transitions.easing.easeOut})}},{props:({ownerState:r})=>r.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:a.transitions.create("max-width",{duration:50,easing:a.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:r})=>r.withLabel&&r.notched,style:{maxWidth:"100%",transition:a.transitions.create("max-width",{duration:100,easing:a.transitions.easing.easeOut,delay:50})}}]})));function Qde(a){const{children:r,classes:e,className:t,label:s,notched:o,...i}=a,l=s!=null&&s!=="",c={...a,notched:o,withLabel:l};return n.jsx(Zde,{"aria-hidden":!0,className:t,ownerState:c,...i,children:n.jsx(Xde,{ownerState:c,children:l?n.jsx("span",{children:s}):qE||(qE=n.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}const Jde=a=>{const{classes:r}=a,t=sn({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},hie,r);return{...r,...t}},eue=or(sw,{shouldForwardProp:a=>Lo(a)||a==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:nw})(vn(({theme:a})=>{const r=a.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(a.vars||a).shape.borderRadius,[`&:hover .${Dc.notchedOutline}`]:{borderColor:(a.vars||a).palette.text.primary},"@media (hover: none)":{[`&:hover .${Dc.notchedOutline}`]:{borderColor:a.vars?a.alpha(a.vars.palette.common.onBackground,.23):r}},[`&.${Dc.focused} .${Dc.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(a.palette).filter(Ss()).map(([e])=>({props:{color:e},style:{[`&.${Dc.focused} .${Dc.notchedOutline}`]:{borderColor:(a.vars||a).palette[e].main}}})),{props:{},style:{[`&.${Dc.error} .${Dc.notchedOutline}`]:{borderColor:(a.vars||a).palette.error.main},[`&.${Dc.disabled} .${Dc.notchedOutline}`]:{borderColor:(a.vars||a).palette.action.disabled}}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:14}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:14}},{props:({ownerState:e})=>e.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:e,size:t})=>e.multiline&&t==="small",style:{padding:"8.5px 14px"}}]}})),tue=or(Qde,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(vn(({theme:a})=>{const r=a.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:a.vars?a.alpha(a.vars.palette.common.onBackground,.23):r}})),rue=or(ow,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:aw})(vn(({theme:a})=>({padding:"16.5px 14px",...!a.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:a.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:a.palette.mode==="light"?null:"#fff",caretColor:a.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...a.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[a.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:r})=>r.multiline,style:{padding:0}},{props:({ownerState:r})=>r.startAdornment,style:{paddingLeft:0}},{props:({ownerState:r})=>r.endAdornment,style:{paddingRight:0}}]}))),M2=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiOutlinedInput"}),{components:s={},fullWidth:o=!1,inputComponent:i="input",label:l,multiline:c=!1,notched:d,slots:h={},slotProps:m={},type:y="text",...x}=t,b=Jde(t),v=pc(),j=Gu({props:t,muiFormControl:v,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),S={...t,color:j.color||"primary",disabled:j.disabled,error:j.error,focused:j.focused,formControl:v,fullWidth:o,hiddenLabel:j.hiddenLabel,multiline:c,size:j.size,type:y},k=h.root??s.Root??eue,N=h.input??s.Input??rue,[P,R]=xn("notchedOutline",{elementType:tue,className:b.notchedOutline,shouldForwardComponentProp:!0,ownerState:S,externalForwardedProps:{slots:h,slotProps:m},additionalProps:{label:l!=null&&l!==""&&j.required?n.jsxs(f.Fragment,{children:[l,"","*"]}):l}});return n.jsx(S2,{slots:{root:k,input:N},slotProps:m,renderSuffix:F=>n.jsx(P,{...R,notched:typeof d<"u"?d:!!(F.startAdornment||F.filled||F.focused)}),fullWidth:o,inputComponent:i,multiline:c,ref:e,type:y,...x,classes:{...b,notchedOutline:null}})});M2.muiName="Input";const nue=yn(n.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),aue=yn(n.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"})),sue=or("span",{name:"MuiRadioButtonIcon",shouldForwardProp:Lo})({position:"relative",display:"flex"}),oue=or(nue,{name:"MuiRadioButtonIcon"})({transform:"scale(1)"}),iue=or(aue,{name:"MuiRadioButtonIcon"})(vn(({theme:a})=>({left:0,position:"absolute",transform:"scale(0)",transition:a.transitions.create("transform",{easing:a.transitions.easing.easeIn,duration:a.transitions.duration.shortest}),variants:[{props:{checked:!0},style:{transform:"scale(1)",transition:a.transitions.create("transform",{easing:a.transitions.easing.easeOut,duration:a.transitions.duration.shortest})}}]})));function DA(a){const{checked:r=!1,classes:e={},fontSize:t}=a,s={...a,checked:r};return n.jsxs(sue,{className:e.root,ownerState:s,children:[n.jsx(oue,{fontSize:t,className:e.background,ownerState:s}),n.jsx(iue,{fontSize:t,className:e.dot,ownerState:s})]})}const FA=f.createContext(void 0);function lue(){return f.useContext(FA)}function cue(a){return an("MuiRadio",a)}const GE=ln("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),due=a=>{const{classes:r,color:e,size:t}=a,s={root:["root",`color${Yt(e)}`,t!=="medium"&&`size${Yt(t)}`]};return{...r,...sn(s,cue,r)}},uue=or(k2,{shouldForwardProp:a=>Lo(a)||a==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.root,e.size!=="medium"&&r[`size${Yt(e.size)}`],r[`color${Yt(e.color)}`]]}})(vn(({theme:a})=>({color:(a.vars||a).palette.text.secondary,[`&.${GE.disabled}`]:{color:(a.vars||a).palette.action.disabled},variants:[{props:{color:"default",disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:a.alpha((a.vars||a).palette.action.active,(a.vars||a).palette.action.hoverOpacity)}}},...Object.entries(a.palette).filter(Ss()).map(([r])=>({props:{color:r,disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:a.alpha((a.vars||a).palette[r].main,(a.vars||a).palette.action.hoverOpacity)}}})),...Object.entries(a.palette).filter(Ss()).map(([r])=>({props:{color:r,disabled:!1},style:{[`&.${GE.checked}`]:{color:(a.vars||a).palette[r].main}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]})));function fue(a,r){return typeof r=="object"&&r!==null?a===r:String(a)===String(r)}const pue=n.jsx(DA,{checked:!0}),hue=n.jsx(DA,{}),ku=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiRadio"}),{checked:s,checkedIcon:o=pue,color:i="primary",icon:l=hue,name:c,onChange:d,size:h="medium",className:m,disabled:y,disableRipple:x=!1,slots:b={},slotProps:v={},inputProps:j,...S}=t,k=pc();let N=y;k&&typeof N>"u"&&(N=k.disabled),N??=!1;const P={...t,disabled:N,disableRipple:x,color:i,size:h},R=due(P),F=lue();let z=s;const H=HC(d,F&&F.onChange);let V=c;F&&(typeof z>"u"&&(z=fue(F.value,t.value)),typeof V>"u"&&(V=F.name));const W=v.input??j,[Z,A]=xn("root",{ref:e,elementType:uue,className:Tr(R.root,m),shouldForwardComponentProp:!0,externalForwardedProps:{slots:b,slotProps:v,...S},getSlotProps:q=>({...q,onChange:(I,...K)=>{q.onChange?.(I,...K),H(I,...K)}}),ownerState:P,additionalProps:{type:"radio",icon:f.cloneElement(l,{fontSize:l.props.fontSize??h}),checkedIcon:f.cloneElement(o,{fontSize:o.props.fontSize??h}),disabled:N,name:V,checked:z,slots:b,slotProps:{input:typeof W=="function"?W(P):W}}});return n.jsx(Z,{...A,classes:R})});function mue(a){return an("MuiRadioGroup",a)}ln("MuiRadioGroup",["root","row","error"]);const gue=a=>{const{classes:r,row:e,error:t}=a;return sn({root:["root",e&&"row",t&&"error"]},mue,r)},KE=f.forwardRef(function(r,e){const{actions:t,children:s,className:o,defaultValue:i,name:l,onChange:c,value:d,...h}=r,m=f.useRef(null),y=gue(r),[x,b]=Ey({controlled:d,default:i,name:"RadioGroup"});f.useImperativeHandle(t,()=>({focus:()=>{let k=m.current.querySelector("input:not(:disabled):checked");k||(k=m.current.querySelector("input:not(:disabled)")),k&&k.focus()}}),[]);const v=to(e,m),j=qu(l),S=f.useMemo(()=>({name:j,onChange(k){b(k.target.value),c&&c(k,k.target.value)},value:x}),[j,c,b,x]);return n.jsx(FA.Provider,{value:S,children:n.jsx(Fce,{role:"radiogroup",ref:v,className:Tr(y.root,o),...h,children:s})})}),yue={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"},xue=yn(n.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})),vue=yn(n.jsx("path",{d:"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"}));function bue(a){return an("MuiRating",a)}const Ig=ln("MuiRating",["root","sizeSmall","sizeMedium","sizeLarge","readOnly","disabled","focusVisible","visuallyHidden","pristine","label","labelEmptyValueActive","icon","iconEmpty","iconFilled","iconHover","iconFocus","iconActive","decimal"]);function wue(a){const r=a.toString().split(".")[1];return r?r.length:0}function S1(a,r){if(a==null)return a;const e=Math.round(a/r)*r;return Number(e.toFixed(wue(r)))}const jue=a=>{const{classes:r,size:e,readOnly:t,disabled:s,emptyValueFocused:o,focusVisible:i}=a,l={root:["root",`size${Yt(e)}`,s&&"disabled",i&&"focusVisible",t&&"readOnly"],label:["label","pristine"],labelEmptyValue:[o&&"labelEmptyValueActive"],icon:["icon"],iconEmpty:["iconEmpty"],iconFilled:["iconFilled"],iconHover:["iconHover"],iconFocus:["iconFocus"],iconActive:["iconActive"],decimal:["decimal"],visuallyHidden:["visuallyHidden"]};return sn(l,bue,r)},Cue=or("span",{name:"MuiRating",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[{[`& .${Ig.visuallyHidden}`]:r.visuallyHidden},r.root,r[`size${Yt(e.size)}`],e.readOnly&&r.readOnly]}})(vn(({theme:a})=>({display:"inline-flex",position:"relative",fontSize:a.typography.pxToRem(24),color:"#faaf00",cursor:"pointer",textAlign:"left",width:"min-content",WebkitTapHighlightColor:"transparent",[`&.${Ig.disabled}`]:{opacity:(a.vars||a).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${Ig.focusVisible} .${Ig.iconActive}`]:{outline:"1px solid #999"},[`& .${Ig.visuallyHidden}`]:yue,variants:[{props:{size:"small"},style:{fontSize:a.typography.pxToRem(18)}},{props:{size:"large"},style:{fontSize:a.typography.pxToRem(30)}},{props:({ownerState:r})=>r.readOnly,style:{pointerEvents:"none"}}]}))),BA=or("label",{name:"MuiRating",slot:"Label",overridesResolver:({ownerState:a},r)=>[r.label,a.emptyValueFocused&&r.labelEmptyValueActive]})({cursor:"inherit",variants:[{props:({ownerState:a})=>a.emptyValueFocused,style:{top:0,bottom:0,position:"absolute",outline:"1px solid #999",width:"100%"}}]}),Sue=or("span",{name:"MuiRating",slot:"Icon",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.icon,e.iconEmpty&&r.iconEmpty,e.iconFilled&&r.iconFilled,e.iconHover&&r.iconHover,e.iconFocus&&r.iconFocus,e.iconActive&&r.iconActive]}})(vn(({theme:a})=>({display:"flex",transition:a.transitions.create("transform",{duration:a.transitions.duration.shortest}),pointerEvents:"none",variants:[{props:({ownerState:r})=>r.iconActive,style:{transform:"scale(1.2)"}},{props:({ownerState:r})=>r.iconEmpty,style:{color:(a.vars||a).palette.action.disabled}}]}))),Nue=or("span",{name:"MuiRating",slot:"Decimal",shouldForwardProp:a=>y2(a)&&a!=="iconActive",overridesResolver:(a,r)=>{const{iconActive:e}=a;return[r.decimal,e&&r.iconActive]}})({position:"relative",variants:[{props:({iconActive:a})=>a,style:{transform:"scale(1.2)"}}]});function kue(a){const{value:r,...e}=a;return n.jsx("span",{...e})}function YE(a){const{classes:r,disabled:e,emptyIcon:t,focus:s,getLabelText:o,highlightSelectedOnly:i,hover:l,icon:c,IconContainerComponent:d,isActive:h,itemValue:m,labelProps:y,name:x,onBlur:b,onChange:v,onClick:j,onFocus:S,readOnly:k,ownerState:N,ratingValue:P,ratingValueRounded:R,slots:F={},slotProps:z={}}=a,H=i?m===P:m<=P,V=m<=l,W=m<=s,Z=m===R,A=`${x}-${qu()}`,q={slots:F,slotProps:z},[I,K]=xn("icon",{elementType:Sue,className:Tr(r.icon,H?r.iconFilled:r.iconEmpty,V&&r.iconHover,W&&r.iconFocus,h&&r.iconActive),externalForwardedProps:q,ownerState:{...N,iconEmpty:!H,iconFilled:H,iconHover:V,iconFocus:W,iconActive:h},additionalProps:{value:m},internalForwardedProps:{as:d}}),[D,Q]=xn("label",{elementType:BA,externalForwardedProps:q,ownerState:{...N,emptyValueFocused:void 0},additionalProps:{style:y?.style,htmlFor:A}}),oe=n.jsx(I,{...K,children:t&&!H?t:c});return k?n.jsx("span",{...y,children:oe}):n.jsxs(f.Fragment,{children:[n.jsxs(D,{...Q,children:[oe,n.jsx("span",{className:r.visuallyHidden,children:o(m)})]}),n.jsx("input",{className:r.visuallyHidden,onFocus:S,onBlur:b,onChange:v,onClick:j,disabled:e,value:m,id:A,type:"radio",name:x,checked:Z})]})}const _ue=n.jsx(xue,{fontSize:"inherit"}),Eue=n.jsx(vue,{fontSize:"inherit"});function Tue(a){return`${a||"0"} Star${a!==1?"s":""}`}const Oue=f.forwardRef(function(r,e){const t=hn({name:"MuiRating",props:r}),{component:s="span",className:o,defaultValue:i=null,disabled:l=!1,emptyIcon:c=Eue,emptyLabelText:d="Empty",getLabelText:h=Tue,highlightSelectedOnly:m=!1,icon:y=_ue,IconContainerComponent:x=kue,max:b=5,name:v,onChange:j,onChangeActive:S,onMouseLeave:k,onMouseMove:N,precision:P=1,readOnly:R=!1,size:F="medium",value:z,slots:H={},slotProps:V={},...W}=t,Z=qu(v),[A,q]=Ey({controlled:z,default:i,name:"Rating"}),I=S1(A,P),K=h2(),[{hover:D,focus:Q},oe]=f.useState({hover:-1,focus:-1});let re=I;D!==-1&&(re=D),Q!==-1&&(re=Q);const[Te,G]=f.useState(!1),Y=f.useRef(),Se=to(Y,e),fe=ce=>{N&&N(ce);const ue=Y.current,{right:xe,left:he,width:se}=ue.getBoundingClientRect();let Le;K?Le=(xe-ce.clientX)/se:Le=(ce.clientX-he)/se;let Ue=S1(b*Le+P/2,P);Ue=aA(Ue,P,b),oe(Ge=>Ge.hover===Ue&&Ge.focus===Ue?Ge:{hover:Ue,focus:Ue}),G(!1),S&&D!==Ue&&S(ce,Ue)},Ee=ce=>{k&&k(ce);const ue=-1;oe({hover:ue,focus:ue}),S&&D!==ue&&S(ce,ue)},Ae=ce=>{let ue=ce.target.value===""?null:parseFloat(ce.target.value);D!==-1&&(ue=D),q(ue),j&&j(ce,ue)},qe=ce=>{ce.clientX===0&&ce.clientY===0||(oe({hover:-1,focus:-1}),q(null),j&&parseFloat(ce.target.value)===I&&j(ce,null))},we=ce=>{Qh(ce.target)&&G(!0);const ue=parseFloat(ce.target.value);oe(xe=>({hover:xe.hover,focus:ue}))},Oe=ce=>{if(D!==-1)return;Qh(ce.target)||G(!1);const ue=-1;oe(xe=>({hover:xe.hover,focus:ue}))},[ze,We]=f.useState(!1),pt={...t,component:s,defaultValue:i,disabled:l,emptyIcon:c,emptyLabelText:d,emptyValueFocused:ze,focusVisible:Te,getLabelText:h,icon:y,IconContainerComponent:x,max:b,precision:P,readOnly:R,size:F},Pt=jue(pt),ee={slots:H,slotProps:V},[Ne,Ie]=xn("root",{ref:Se,className:Tr(Pt.root,o),elementType:Cue,externalForwardedProps:{...ee,...W,component:s},getSlotProps:ce=>({...ce,onMouseMove:ue=>{fe(ue),ce.onMouseMove?.(ue)},onMouseLeave:ue=>{Ee(ue),ce.onMouseLeave?.(ue)}}),ownerState:pt,additionalProps:{role:R?"img":null,"aria-label":R?h(re):null}}),[ne,M]=xn("label",{className:Tr(Pt.label,Pt.labelEmptyValue),elementType:BA,externalForwardedProps:ee,ownerState:pt}),[U,J]=xn("decimal",{className:Pt.decimal,elementType:Nue,externalForwardedProps:ee,ownerState:pt});return n.jsxs(Ne,{...Ie,children:[Array.from(new Array(b)).map((ce,ue)=>{const xe=ue+1,he={classes:Pt,disabled:l,emptyIcon:c,focus:Q,getLabelText:h,highlightSelectedOnly:m,hover:D,icon:y,IconContainerComponent:x,name:Z,onBlur:Oe,onChange:Ae,onClick:qe,onFocus:we,ratingValue:re,ratingValueRounded:I,readOnly:R,ownerState:pt,slots:H,slotProps:V},se=xe===Math.ceil(re)&&(D!==-1||Q!==-1);if(P<1){const Le=Array.from(new Array(1/P));return f.createElement(U,{...J,key:xe,className:Tr(J.className,se&&Pt.iconActive),iconActive:se},Le.map((Ue,Ge)=>{const ie=S1(xe-1+(Ge+1)*P,P);return n.jsx(YE,{...he,isActive:!1,itemValue:ie,labelProps:{style:Le.length-1===Ge?{}:{width:ie===re?`${(Ge+1)*P*100}%`:"0%",overflow:"hidden",position:"absolute"}}},ie)}))}return n.jsx(YE,{...he,isActive:se,itemValue:xe},xe)}),!R&&!l&&n.jsxs(ne,{...M,children:[n.jsx("input",{className:Pt.visuallyHidden,value:"",id:`${Z}-empty`,type:"radio",name:Z,checked:I==null,onFocus:()=>We(!0),onBlur:()=>We(!1),onChange:Ae}),n.jsx("span",{className:Pt.visuallyHidden,children:d})]})]})});function zA(a){return an("MuiSelect",a)}const Rg=ln("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var ZE;const Pue=or(RA,{name:"MuiSelect",slot:"Select",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[{[`&.${Rg.select}`]:r.select},{[`&.${Rg.select}`]:r[e.variant]},{[`&.${Rg.error}`]:r.error},{[`&.${Rg.multiple}`]:r.multiple}]}})({[`&.${Rg.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),Aue=or(LA,{name:"MuiSelect",slot:"Icon",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.icon,e.variant&&r[`icon${Yt(e.variant)}`],e.open&&r.iconOpen]}})({}),Mue=or("input",{shouldForwardProp:a=>y2(a)&&a!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function XE(a,r){return typeof r=="object"&&r!==null?a===r:String(a)===String(r)}function Iue(a){return a==null||typeof a=="string"&&!a.trim()}const Rue=a=>{const{classes:r,variant:e,disabled:t,multiple:s,open:o,error:i}=a,l={select:["select",e,t&&"disabled",s&&"multiple",i&&"error"],icon:["icon",`icon${Yt(e)}`,o&&"iconOpen",t&&"disabled"],nativeInput:["nativeInput"]};return sn(l,zA,r)},Lue=f.forwardRef(function(r,e){const{"aria-describedby":t,"aria-label":s,autoFocus:o,autoWidth:i,children:l,className:c,defaultOpen:d,defaultValue:h,disabled:m,displayEmpty:y,error:x=!1,IconComponent:b,inputRef:v,labelId:j,MenuProps:S={},multiple:k,name:N,onBlur:P,onChange:R,onClose:F,onFocus:z,onKeyDown:H,onMouseDown:V,onOpen:W,open:Z,readOnly:A,renderValue:q,required:I,SelectDisplayProps:K={},tabIndex:D,type:Q,value:oe,variant:re="standard",...Te}=r,[G,Y]=Ey({controlled:oe,default:h,name:"Select"}),[Se,fe]=Ey({controlled:Z,default:d,name:"Select"}),Ee=f.useRef(null),Ae=f.useRef(null),[qe,we]=f.useState(null),{current:Oe}=f.useRef(Z!=null),[ze,We]=f.useState(),pt=to(e,v),Pt=f.useCallback(Ze=>{Ae.current=Ze,Ze&&we(Ze)},[]),ee=qe?.parentNode;f.useImperativeHandle(pt,()=>({focus:()=>{Ae.current.focus()},node:Ee.current,value:G}),[G]);const Ne=qe!==null&&Se;f.useEffect(()=>{if(!Ne||!ee||i||typeof ResizeObserver>"u")return;const Ze=new ResizeObserver(()=>{We(ee.clientWidth)});return Ze.observe(ee),()=>{Ze.disconnect()}},[Ne,ee,i]),f.useEffect(()=>{d&&Se&&qe&&!Oe&&(We(i?null:ee.clientWidth),Ae.current.focus())},[qe,i]),f.useEffect(()=>{o&&Ae.current.focus()},[o]),f.useEffect(()=>{if(!j)return;const Ze=oc(Ae.current).getElementById(j);if(Ze){const Nt=()=>{getSelection().isCollapsed&&Ae.current.focus()};return Ze.addEventListener("click",Nt),()=>{Ze.removeEventListener("click",Nt)}}},[j]);const Ie=(Ze,Nt)=>{Ze?W&&W(Nt):F&&F(Nt),Oe||(We(i?null:ee.clientWidth),fe(Ze))},ne=Ze=>{V?.(Ze),Ze.button===0&&(Ze.preventDefault(),Ae.current.focus(),Ie(!0,Ze))},M=Ze=>{Ie(!1,Ze)},U=f.Children.toArray(l),J=Ze=>{const Nt=U.find(Mt=>Mt.props.value===Ze.target.value);Nt!==void 0&&(Y(Nt.props.value),R&&R(Ze,Nt))},ce=Ze=>Nt=>{let Mt;if(Nt.currentTarget.hasAttribute("tabindex")){if(k){Mt=Array.isArray(G)?G.slice():[];const vt=G.indexOf(Ze.props.value);vt===-1?Mt.push(Ze.props.value):Mt.splice(vt,1)}else Mt=Ze.props.value;if(Ze.props.onClick&&Ze.props.onClick(Nt),G!==Mt&&(Y(Mt),R)){const vt=Nt.nativeEvent||Nt,Jt=new vt.constructor(vt.type,vt);Object.defineProperty(Jt,"target",{writable:!0,value:{value:Mt,name:N}}),R(Jt,Ze)}k||Ie(!1,Nt)}},ue=Ze=>{A||([" ","ArrowUp","ArrowDown","Enter"].includes(Ze.key)&&(Ze.preventDefault(),Ie(!0,Ze)),H?.(Ze))},xe=Ze=>{!Ne&&P&&(Object.defineProperty(Ze,"target",{writable:!0,value:{value:G,name:N}}),P(Ze))};delete Te["aria-invalid"];let he,se;const Le=[];let Ue=!1;(gb({value:G})||y)&&(q?he=q(G):Ue=!0);const Ge=U.map(Ze=>{if(!f.isValidElement(Ze))return null;let Nt;if(k){if(!Array.isArray(G))throw new Error(Vd(2));Nt=G.some(Mt=>XE(Mt,Ze.props.value)),Nt&&Ue&&Le.push(Ze.props.children)}else Nt=XE(G,Ze.props.value),Nt&&Ue&&(se=Ze.props.children);return f.cloneElement(Ze,{"aria-selected":Nt?"true":"false",onClick:ce(Ze),onKeyUp:Mt=>{Mt.key===" "&&Mt.preventDefault(),Ze.props.onKeyUp&&Ze.props.onKeyUp(Mt)},role:"option",selected:Nt,value:void 0,"data-value":Ze.props.value})});Ue&&(k?Le.length===0?he=null:he=Le.reduce((Ze,Nt,Mt)=>(Ze.push(Nt),Mt<Le.length-1&&Ze.push(", "),Ze),[]):he=se);let ie=ze;!i&&Oe&&qe&&(ie=ee.clientWidth);let _e;typeof D<"u"?_e=D:_e=m?null:0;const le=K.id||(N?`mui-component-select-${N}`:void 0),Xe={...r,variant:re,value:G,open:Ne,error:x},Fe=Rue(Xe),dt={...S.PaperProps,...typeof S.slotProps?.paper=="function"?S.slotProps.paper(Xe):S.slotProps?.paper},lt={...S.MenuListProps,...typeof S.slotProps?.list=="function"?S.slotProps.list(Xe):S.slotProps?.list},ft=qu();return n.jsxs(f.Fragment,{children:[n.jsx(Pue,{as:"div",ref:Pt,tabIndex:_e,role:"combobox","aria-controls":Ne?ft:void 0,"aria-disabled":m?"true":void 0,"aria-expanded":Ne?"true":"false","aria-haspopup":"listbox","aria-label":s,"aria-labelledby":[j,le].filter(Boolean).join(" ")||void 0,"aria-describedby":t,"aria-required":I?"true":void 0,"aria-invalid":x?"true":void 0,onKeyDown:ue,onMouseDown:m||A?null:ne,onBlur:xe,onFocus:z,...K,ownerState:Xe,className:Tr(K.className,Fe.select,c),id:le,children:Iue(he)?ZE||(ZE=n.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):he}),n.jsx(Mue,{"aria-invalid":x,value:Array.isArray(G)?G.join(","):G,name:N,ref:Ee,"aria-hidden":!0,onChange:J,tabIndex:-1,disabled:m,className:Fe.nativeInput,autoFocus:o,required:I,...Te,ownerState:Xe}),n.jsx(Aue,{as:b,className:Fe.icon,ownerState:Xe}),n.jsx(P2,{id:`menu-${N||""}`,anchorEl:ee,open:Ne,onClose:M,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...S,slotProps:{...S.slotProps,list:{"aria-labelledby":j,role:"listbox","aria-multiselectable":k?"true":void 0,disableListWrap:!0,id:ft,...lt},paper:{...dt,style:{minWidth:ie,...dt!=null?dt.style:null}}},children:Ge})]})}),Due=a=>{const{classes:r}=a,t=sn({root:["root"]},zA,r);return{...r,...t}},I2={name:"MuiSelect",slot:"Root",shouldForwardProp:a=>Lo(a)&&a!=="variant"},Fue=or(T2,I2)(""),Bue=or(M2,I2)(""),zue=or(E2,I2)(""),Nl=f.forwardRef(function(r,e){const t=hn({name:"MuiSelect",props:r}),{autoWidth:s=!1,children:o,classes:i={},className:l,defaultOpen:c=!1,displayEmpty:d=!1,IconComponent:h=gie,id:m,input:y,inputProps:x,label:b,labelId:v,MenuProps:j,multiple:S=!1,native:k=!1,onClose:N,onOpen:P,open:R,renderValue:F,SelectDisplayProps:z,variant:H="outlined",...V}=t,W=k?Yde:Lue,Z=pc(),A=Gu({props:t,muiFormControl:Z,states:["variant","error"]}),q=A.variant||H,I={...t,variant:q,classes:i},K=Due(I),{root:D,...Q}=K,oe=y||{standard:n.jsx(Fue,{ownerState:I}),outlined:n.jsx(Bue,{label:b,ownerState:I}),filled:n.jsx(zue,{ownerState:I})}[q],re=to(e,um(oe));return n.jsx(f.Fragment,{children:f.cloneElement(oe,{inputComponent:W,inputProps:{children:o,error:A.error,IconComponent:h,variant:q,type:void 0,multiple:S,...k?{id:m}:{autoWidth:s,defaultOpen:c,displayEmpty:d,labelId:v,MenuProps:j,onClose:N,onOpen:P,open:R,renderValue:F,SelectDisplayProps:{id:m,...z}},...x,classes:x?jo(Q,x.classes):Q,...y?y.props.inputProps:{}},...(S&&k||d)&&q==="outlined"?{notched:!0}:{},ref:re,className:Tr(oe.props.className,l,K.root),...!y&&{variant:q},...V})})});Nl.muiName="Select";const _r=ise({createStyledComponent:or("div",{name:"MuiStack",slot:"Root"}),useThemeProps:a=>hn({props:a,name:"MuiStack"})});function Uue(a){return an("MuiSwitch",a)}const ei=ln("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),$ue=a=>{const{classes:r,edge:e,size:t,color:s,checked:o,disabled:i}=a,l={root:["root",e&&`edge${Yt(e)}`,`size${Yt(t)}`],switchBase:["switchBase",`color${Yt(s)}`,o&&"checked",i&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},c=sn(l,Uue,r);return{...r,...c}},Vue=or("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.root,e.edge&&r[`edge${Yt(e.edge)}`],r[`size${Yt(e.size)}`]]}})({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${ei.thumb}`]:{width:16,height:16},[`& .${ei.switchBase}`]:{padding:4,[`&.${ei.checked}`]:{transform:"translateX(16px)"}}}}]}),Wue=or(k2,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.switchBase,{[`& .${ei.input}`]:r.input},e.color!=="default"&&r[`color${Yt(e.color)}`]]}})(vn(({theme:a})=>({position:"absolute",top:0,left:0,zIndex:1,color:a.vars?a.vars.palette.Switch.defaultColor:`${a.palette.mode==="light"?a.palette.common.white:a.palette.grey[300]}`,transition:a.transitions.create(["left","transform"],{duration:a.transitions.duration.shortest}),[`&.${ei.checked}`]:{transform:"translateX(20px)"},[`&.${ei.disabled}`]:{color:a.vars?a.vars.palette.Switch.defaultDisabledColor:`${a.palette.mode==="light"?a.palette.grey[100]:a.palette.grey[600]}`},[`&.${ei.checked} + .${ei.track}`]:{opacity:.5},[`&.${ei.disabled} + .${ei.track}`]:{opacity:a.vars?a.vars.opacity.switchTrackDisabled:`${a.palette.mode==="light"?.12:.2}`},[`& .${ei.input}`]:{left:"-100%",width:"300%"}})),vn(({theme:a})=>({"&:hover":{backgroundColor:a.alpha((a.vars||a).palette.action.active,(a.vars||a).palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(a.palette).filter(Ss(["light"])).map(([r])=>({props:{color:r},style:{[`&.${ei.checked}`]:{color:(a.vars||a).palette[r].main,"&:hover":{backgroundColor:a.alpha((a.vars||a).palette[r].main,(a.vars||a).palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${ei.disabled}`]:{color:a.vars?a.vars.palette.Switch[`${r}DisabledColor`]:`${a.palette.mode==="light"?a.lighten(a.palette[r].main,.62):a.darken(a.palette[r].main,.55)}`}},[`&.${ei.checked} + .${ei.track}`]:{backgroundColor:(a.vars||a).palette[r].main}}}))]}))),Hue=or("span",{name:"MuiSwitch",slot:"Track"})(vn(({theme:a})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:a.transitions.create(["opacity","background-color"],{duration:a.transitions.duration.shortest}),backgroundColor:a.vars?a.vars.palette.common.onBackground:`${a.palette.mode==="light"?a.palette.common.black:a.palette.common.white}`,opacity:a.vars?a.vars.opacity.switchTrack:`${a.palette.mode==="light"?.38:.3}`}))),que=or("span",{name:"MuiSwitch",slot:"Thumb"})(vn(({theme:a})=>({boxShadow:(a.vars||a).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),xb=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiSwitch"}),{className:s,color:o="primary",edge:i=!1,size:l="medium",sx:c,slots:d={},slotProps:h={},...m}=t,y={...t,color:o,edge:i,size:l},x=$ue(y),b={slots:d,slotProps:h},[v,j]=xn("root",{className:Tr(x.root,s),elementType:Vue,externalForwardedProps:b,ownerState:y,additionalProps:{sx:c}}),[S,k]=xn("thumb",{className:x.thumb,elementType:que,externalForwardedProps:b,ownerState:y}),N=n.jsx(S,{...k}),[P,R]=xn("track",{className:x.track,elementType:Hue,externalForwardedProps:b,ownerState:y});return n.jsxs(v,{...j,children:[n.jsx(Wue,{type:"checkbox",icon:N,checkedIcon:N,ref:e,ownerState:y,...m,classes:{...x,root:x.switchBase},slots:{...d.switchBase&&{root:d.switchBase},...d.input&&{input:d.input}},slotProps:{...h.switchBase&&{root:typeof h.switchBase=="function"?h.switchBase(y):h.switchBase},input:{role:"switch"},...h.input&&{input:typeof h.input=="function"?h.input(y):h.input}}}),n.jsx(P,{...R})]})}),UA=f.createContext();function Gue(a){return an("MuiTable",a)}ln("MuiTable",["root","stickyHeader"]);const Kue=a=>{const{classes:r,stickyHeader:e}=a;return sn({root:["root",e&&"stickyHeader"]},Gue,r)},Yue=or("table",{name:"MuiTable",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.root,e.stickyHeader&&r.stickyHeader]}})(vn(({theme:a})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...a.typography.body2,padding:a.spacing(2),color:(a.vars||a).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:r})=>r.stickyHeader,style:{borderCollapse:"separate"}}]}))),QE="table",$A=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiTable"}),{className:s,component:o=QE,padding:i="normal",size:l="medium",stickyHeader:c=!1,...d}=t,h={...t,component:o,padding:i,size:l,stickyHeader:c},m=Kue(h),y=f.useMemo(()=>({padding:i,size:l,stickyHeader:c}),[i,l,c]);return n.jsx(UA.Provider,{value:y,children:n.jsx(Yue,{as:o,role:o===QE?null:"table",ref:e,className:Tr(m.root,s),ownerState:h,...d})})}),iw=f.createContext();function Zue(a){return an("MuiTableBody",a)}ln("MuiTableBody",["root"]);const Xue=a=>{const{classes:r}=a;return sn({root:["root"]},Zue,r)},Que=or("tbody",{name:"MuiTableBody",slot:"Root"})({display:"table-row-group"}),Jue={variant:"body"},JE="tbody",VA=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiTableBody"}),{className:s,component:o=JE,...i}=t,l={...t,component:o},c=Xue(l);return n.jsx(iw.Provider,{value:Jue,children:n.jsx(Que,{className:Tr(c.root,s),as:o,ref:e,role:o===JE?null:"rowgroup",ownerState:l,...i})})});function efe(a){return an("MuiTableCell",a)}const tfe=ln("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),rfe=a=>{const{classes:r,variant:e,align:t,padding:s,size:o,stickyHeader:i}=a,l={root:["root",e,i&&"stickyHeader",t!=="inherit"&&`align${Yt(t)}`,s!=="normal"&&`padding${Yt(s)}`,`size${Yt(o)}`]};return sn(l,efe,r)},nfe=or("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.root,r[e.variant],r[`size${Yt(e.size)}`],e.padding!=="normal"&&r[`padding${Yt(e.padding)}`],e.align!=="inherit"&&r[`align${Yt(e.align)}`],e.stickyHeader&&r.stickyHeader]}})(vn(({theme:a})=>({...a.typography.body2,display:"table-cell",verticalAlign:"inherit",borderBottom:a.vars?`1px solid ${a.vars.palette.TableCell.border}`:`1px solid
    ${a.palette.mode==="light"?a.lighten(a.alpha(a.palette.divider,1),.88):a.darken(a.alpha(a.palette.divider,1),.68)}`,textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(a.vars||a).palette.text.primary,lineHeight:a.typography.pxToRem(24),fontWeight:a.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(a.vars||a).palette.text.primary}},{props:{variant:"footer"},style:{color:(a.vars||a).palette.text.secondary,lineHeight:a.typography.pxToRem(21),fontSize:a.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",[`&.${tfe.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:({ownerState:r})=>r.stickyHeader,style:{position:"sticky",top:0,zIndex:2,backgroundColor:(a.vars||a).palette.background.default}}]}))),zs=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiTableCell"}),{align:s="inherit",className:o,component:i,padding:l,scope:c,size:d,sortDirection:h,variant:m,...y}=t,x=f.useContext(UA),b=f.useContext(iw),v=b&&b.variant==="head";let j;i?j=i:j=v?"th":"td";let S=c;j==="td"?S=void 0:!S&&v&&(S="col");const k=m||b&&b.variant,N={...t,align:s,component:j,padding:l||(x&&x.padding?x.padding:"normal"),size:d||(x&&x.size?x.size:"medium"),sortDirection:h,stickyHeader:k==="head"&&x&&x.stickyHeader,variant:k},P=rfe(N);let R=null;return h&&(R=h==="asc"?"ascending":"descending"),n.jsx(nfe,{as:j,ref:e,className:Tr(P.root,o),"aria-sort":R,scope:S,ownerState:N,...y})});function afe(a){return an("MuiTableContainer",a)}ln("MuiTableContainer",["root"]);const sfe=a=>{const{classes:r}=a;return sn({root:["root"]},afe,r)},ofe=or("div",{name:"MuiTableContainer",slot:"Root"})({width:"100%",overflowX:"auto"}),WA=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiTableContainer"}),{className:s,component:o="div",...i}=t,l={...t,component:o},c=sfe(l);return n.jsx(ofe,{ref:e,as:o,className:Tr(c.root,s),ownerState:l,...i})});function ife(a){return an("MuiTableHead",a)}ln("MuiTableHead",["root"]);const lfe=a=>{const{classes:r}=a;return sn({root:["root"]},ife,r)},cfe=or("thead",{name:"MuiTableHead",slot:"Root"})({display:"table-header-group"}),dfe={variant:"head"},eT="thead",HA=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiTableHead"}),{className:s,component:o=eT,...i}=t,l={...t,component:o},c=lfe(l);return n.jsx(iw.Provider,{value:dfe,children:n.jsx(cfe,{as:o,className:Tr(c.root,s),ref:e,role:o===eT?null:"rowgroup",ownerState:l,...i})})});function ufe(a){return an("MuiToolbar",a)}ln("MuiToolbar",["root","gutters","regular","dense"]);const ffe=a=>{const{classes:r,disableGutters:e,variant:t}=a;return sn({root:["root",!e&&"gutters",t]},ufe,r)},pfe=or("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.root,!e.disableGutters&&r.gutters,r[e.variant]]}})(vn(({theme:a})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:r})=>!r.disableGutters,style:{paddingLeft:a.spacing(2),paddingRight:a.spacing(2),[a.breakpoints.up("sm")]:{paddingLeft:a.spacing(3),paddingRight:a.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:a.mixins.toolbar}]}))),hfe=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiToolbar"}),{className:s,component:o="div",disableGutters:i=!1,variant:l="regular",...c}=t,d={...t,component:o,disableGutters:i,variant:l},h=ffe(d);return n.jsx(pfe,{as:o,className:Tr(h.root,s),ref:e,ownerState:d,...c})});function mfe(a){return an("MuiTableRow",a)}const tT=ln("MuiTableRow",["root","selected","hover","head","footer"]),gfe=a=>{const{classes:r,selected:e,hover:t,head:s,footer:o}=a;return sn({root:["root",e&&"selected",t&&"hover",s&&"head",o&&"footer"]},mfe,r)},yfe=or("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:e}=a;return[r.root,e.head&&r.head,e.footer&&r.footer]}})(vn(({theme:a})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${tT.hover}:hover`]:{backgroundColor:(a.vars||a).palette.action.hover},[`&.${tT.selected}`]:{backgroundColor:a.alpha((a.vars||a).palette.primary.main,(a.vars||a).palette.action.selectedOpacity),"&:hover":{backgroundColor:a.alpha((a.vars||a).palette.primary.main,`${(a.vars||a).palette.action.selectedOpacity} + ${(a.vars||a).palette.action.hoverOpacity}`)}}}))),rT="tr",Ah=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiTableRow"}),{className:s,component:o=rT,hover:i=!1,selected:l=!1,...c}=t,d=f.useContext(iw),h={...t,component:o,hover:i,selected:l,head:d&&d.variant==="head",footer:d&&d.variant==="footer"},m=gfe(h);return n.jsx(yfe,{as:o,ref:e,className:Tr(m.root,s),role:o===rT?null:"row",ownerState:h,...c})});function xfe(a){return an("MuiTextField",a)}ln("MuiTextField",["root"]);const vfe={standard:T2,filled:E2,outlined:M2},bfe=a=>{const{classes:r}=a;return sn({root:["root"]},xfe,r)},wfe=or(rc,{name:"MuiTextField",slot:"Root"})({}),Pn=f.forwardRef(function(r,e){const t=hn({props:r,name:"MuiTextField"}),{autoComplete:s,autoFocus:o=!1,children:i,className:l,color:c="primary",defaultValue:d,disabled:h=!1,error:m=!1,FormHelperTextProps:y,fullWidth:x=!1,helperText:b,id:v,InputLabelProps:j,inputProps:S,InputProps:k,inputRef:N,label:P,maxRows:R,minRows:F,multiline:z=!1,name:H,onBlur:V,onChange:W,onFocus:Z,placeholder:A,required:q=!1,rows:I,select:K=!1,SelectProps:D,slots:Q={},slotProps:oe={},type:re,value:Te,variant:G="outlined",...Y}=t,Se={...t,autoFocus:o,color:c,disabled:h,error:m,fullWidth:x,multiline:z,required:q,select:K,variant:G},fe=bfe(Se),Ee=qu(v),Ae=b&&Ee?`${Ee}-helper-text`:void 0,qe=P&&Ee?`${Ee}-label`:void 0,we=vfe[G],Oe={slots:Q,slotProps:{input:k,inputLabel:j,htmlInput:S,formHelperText:y,select:D,...oe}},ze={},We=Oe.slotProps.inputLabel;G==="outlined"&&(We&&typeof We.shrink<"u"&&(ze.notched=We.shrink),ze.label=P),K&&((!D||!D.native)&&(ze.id=void 0),ze["aria-describedby"]=void 0);const[pt,Pt]=xn("root",{elementType:wfe,shouldForwardComponentProp:!0,externalForwardedProps:{...Oe,...Y},ownerState:Se,className:Tr(fe.root,l),ref:e,additionalProps:{disabled:h,error:m,fullWidth:x,required:q,color:c,variant:G}}),[ee,Ne]=xn("input",{elementType:we,externalForwardedProps:Oe,additionalProps:ze,ownerState:Se}),[Ie,ne]=xn("inputLabel",{elementType:Bu,externalForwardedProps:Oe,ownerState:Se}),[M,U]=xn("htmlInput",{elementType:"input",externalForwardedProps:Oe,ownerState:Se}),[J,ce]=xn("formHelperText",{elementType:$ce,externalForwardedProps:Oe,ownerState:Se}),[ue,xe]=xn("select",{elementType:Nl,externalForwardedProps:Oe,ownerState:Se}),he=n.jsx(ee,{"aria-describedby":Ae,autoComplete:s,autoFocus:o,defaultValue:d,fullWidth:x,multiline:z,name:H,rows:I,maxRows:R,minRows:F,type:re,value:Te,id:Ee,inputRef:N,onBlur:V,onChange:W,onFocus:Z,placeholder:A,inputProps:U,slots:{input:Q.htmlInput?M:void 0},...Ne});return n.jsxs(pt,{...Pt,children:[P!=null&&P!==""&&n.jsx(Ie,{htmlFor:Ee,id:qe,...ne,children:P}),K?n.jsx(ue,{"aria-describedby":Ae,id:Ee,labelId:qe,value:Te,input:he,...xe,children:i}):he,b&&n.jsx(J,{id:Ae,...ce,children:b})]})}),R2=nA({themeId:Wy}),qA=f.createContext(void 0),jfe=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(()=>i(null),[]),c=f.useCallback(async v=>{try{s(!0),i(null);const{data:j}=await Ke.post("/shipments",v);if(!j.success)throw new Error(j.message||"Failed to create shipment");return e(S=>[j.data,...S.filter(k=>k._id!==j.data._id)]),j.data}catch(j){const S=j?.response?.data?.message||j?.message||"Failed to create shipment";throw i(S),j}finally{s(!1)}},[]),d=f.useCallback(async v=>{try{s(!0),i(null);const{data:j}=await Ke.get(`/shipments/transfer/${v}`);if(!j.success)throw new Error(j.message||"Failed to fetch shipment");const S=j.data||null;return S&&e(k=>k.some(P=>P._id===S._id)?k.map(P=>P._id===S._id?S:P):[S,...k]),S}catch(j){const S=j?.response?.data?.message||j?.message||"Failed to fetch shipment";throw i(S),j}finally{s(!1)}},[]),h=f.useCallback(async(v,j)=>{try{s(!0),i(null);const{data:S}=await Ke.put(`/shipments/${v}`,j);if(!S.success)throw new Error(S.message||"Failed to update shipment");return e(k=>k.map(N=>N._id===S.data._id?S.data:N)),S.data}catch(S){const k=S?.response?.data?.message||S?.message||"Failed to update shipment";throw i(k),S}finally{s(!1)}},[]),m=f.useCallback(async v=>{try{s(!0),i(null);const{data:j}=await Ke.delete(`/shipments/${v}`);if(!j.success)throw new Error(j.message||"Failed to delete shipment");e(S=>S.filter(k=>k._id!==v))}catch(j){const S=j?.response?.data?.message||j?.message||"Failed to delete shipment";throw i(S),j}finally{s(!1)}},[]),y=f.useCallback(async v=>{try{s(!0),i(null);const{data:j}=await Ke.get(`/shipments/${v}/in-transit`);if(!j.success)throw new Error(j.message||"Failed to mark shipment in transit");return e(S=>S.map(k=>k._id===v?{...k,status:"in_transit"}:k)),j.data}catch(j){const S=j?.response?.data?.message||j?.message||"Failed to mark shipment in transit";throw i(S),j}finally{s(!1)}},[]),x=f.useCallback(async(v,j)=>{try{s(!0),i(null);const{data:S}=await Ke.post(`/shipments/${v}/receive`,j);if(!S.success)throw new Error(S.message||"Failed to receive shipment");return e(k=>k.map(N=>N._id===v?{...N,status:"received",receivedDate:new Date().toISOString()}:N)),S.data}catch(S){const k=S?.response?.data?.message||S?.message||"Failed to receive shipment";throw i(k),S}finally{s(!1)}},[]),b={shipments:r,loading:t,error:o,createShipment:c,getShipmentByTransferId:d,updateShipment:h,deleteShipment:m,markShipmentInTransit:y,receiveShipment:x,clearError:l};return n.jsx(qA.Provider,{value:b,children:a})},L2=()=>{const a=f.useContext(qA);if(!a)throw new Error("useShipments must be used within a ShipmentProvider");return a},Cfe=["4PX-99","Minutos","Aeronet","AGS","Amazon","Amazon Logistics UK","AMM Expedition","ANpost","Anuj Logistics","Apple Express"],Sfe=()=>{const a=mr(),r=Pi(),s=qa().id||r.state?.transferId,o=r.state?.entries||[],{createShipment:i,loading:l}=L2(),[c,d]=f.useState(""),[h,m]=f.useState(""),[y,x]=f.useState(""),b=f.useMemo(()=>o.reduce((j,S)=>j+(S?.quantity||0),0),[o]),v=async()=>{!s||!c||!h||!y||(await i({transferId:s,estimatedArrivalDate:c,trackingNumber:h,carrier:y}),a(`/products/transfers/${s}`))};return n.jsx(pr,{children:n.jsx(Et,{sx:{width:"100%",color:"#000000",m:-3,p:3,minHeight:"100%"},children:n.jsxs(Et,{sx:{maxWidth:1200,mx:"auto"},children:[n.jsxs(ta,{elevation:0,sx:{p:4,mb:4,borderRadius:3,background:"linear-gradient(135deg, #0ea5e9 0%, #6366f1 100%)",color:"white"},children:[n.jsx(et,{variant:"h4",sx:{fontWeight:800,mb:1},children:"Create Shipment"}),n.jsxs(et,{variant:"body1",sx:{opacity:.9},children:["Transfer #",s?.slice(-8)||"","  ",b," units"]})]}),n.jsxs(_r,{spacing:3,children:[n.jsxs(ta,{elevation:0,sx:{p:3,borderRadius:3,border:"1px solid #e5e7eb",bgcolor:"white"},children:[n.jsx(et,{variant:"h6",sx:{fontWeight:700,mb:2},children:"Items to ship"}),n.jsxs(_r,{spacing:2,children:[o.map(j=>n.jsxs(Et,{sx:{display:"flex",alignItems:"center",gap:2,p:2,border:"1px solid #e5e7eb",borderRadius:2},children:[n.jsx(rp,{variant:"rounded",src:j.variantId?.images?.[0]||void 0,sx:{width:48,height:48}}),n.jsxs(Et,{sx:{flex:1,minWidth:0},children:[n.jsx(et,{variant:"subtitle1",sx:{fontWeight:700},children:j.variantId?.productName||"Unnamed product"}),!!j.variantId?.optionValues&&n.jsx(et,{variant:"body2",sx:{color:"#6b7280"},children:Object.entries(j.variantId.optionValues).map(([S,k])=>`${S}: ${k}`).join("  ")})]}),n.jsx(os,{label:`Qty: ${j.quantity}`})]},j._id)),o.length===0&&n.jsx(et,{variant:"body2",color:"text.secondary",children:"No entries found from transfer state."})]})]}),n.jsxs(ta,{elevation:0,sx:{p:3,borderRadius:3,border:"1px solid #e5e7eb",bgcolor:"white"},children:[n.jsx(et,{variant:"h6",sx:{fontWeight:700,mb:2},children:"Shipment details"}),n.jsxs(_r,{spacing:2,children:[n.jsx(Pn,{type:"date",label:"Estimated arrival date",InputLabelProps:{shrink:!0},value:c,onChange:j=>d(j.target.value)}),n.jsx(Pn,{label:"Tracking number",placeholder:"Enter tracking number",value:h,onChange:j=>m(j.target.value)}),n.jsxs(rc,{children:[n.jsx(Bu,{children:"Shipping carrier"}),n.jsx(Nl,{label:"Shipping carrier",value:y,onChange:j=>x(j.target.value),children:Cfe.map(j=>n.jsx(ss,{value:j,children:j},j))})]})]}),n.jsxs(Et,{sx:{display:"flex",justifyContent:"flex-end",mt:3,gap:1},children:[n.jsx($r,{variant:"text",onClick:()=>a(-1),children:"Back"}),n.jsx($r,{variant:"contained",disabled:!c||!h||!y||!s||l,onClick:v,children:l?"Creating...":"Create shipment"})]})]})]})]})})})},GA=f.createContext(void 0),Nfe=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(()=>e([]),[]),c=f.useCallback(()=>i(null),[]),d=f.useCallback(async m=>{try{s(!0),i(null);const y=await Ke.get(`/transfer-entries/transfer/${m}`);if(!y.data.success)throw new Error("Failed to fetch transfer entries");const x=y.data.data||[];return e(x),x}catch(y){const x=y?.response?.data?.message||y?.message||"Failed to fetch transfer entries";throw i(x),y}finally{s(!1)}},[]),h={entries:r,loading:t,error:o,fetchByTransferId:d,clear:l,clearError:c};return n.jsx(GA.Provider,{value:h,children:a})},KA=()=>{const a=f.useContext(GA);if(!a)throw new Error("useTransferEntries must be used within a TransferEntriesProvider");return a},kfe=()=>{const a=mr(),{id:r}=qa(),{shipmentId:e}=qa(),{entries:t,fetchByTransferId:s,loading:o}=KA(),{receiveShipment:i,loading:l}=L2();f.useEffect(()=>{r&&s(r).catch(()=>{})},[r,s]);const[c,d]=f.useState({}),[h,m]=f.useState({}),y=(v,j)=>S=>{const k=Number(S.target.value??0),N=Math.max(0,Math.min(j,isNaN(k)?0:k));d(P=>({...P,[v]:N})),m(P=>{const R=P[v]??0,F=Math.max(0,j-N),z=Math.max(0,Math.min(F,R));return z===R?P:{...P,[v]:z}})},x=(v,j)=>S=>{const k=Number(S.target.value??0),N=c[v]??0,P=Math.max(0,j-N),R=Math.max(0,Math.min(P,isNaN(k)?0:k));m(F=>({...F,[v]:R}))},b=async()=>{if(!e)return;const v=t.map(j=>({entryId:j._id,accept:Number(c[j._id]||0),reject:Number(h[j._id]||0)}));await i(e,v),a("/products/transfers")};return n.jsx(pr,{children:n.jsx(Et,{sx:{width:"100%",color:"#000000",m:-3,p:3,minHeight:"100%"},children:n.jsxs(Et,{sx:{maxWidth:1200,mx:"auto"},children:[n.jsxs(ta,{elevation:0,sx:{p:4,mb:4,borderRadius:3,background:"linear-gradient(135deg, #0ea5e9 0%, #6366f1 100%)",color:"white"},children:[n.jsx(et,{variant:"h4",sx:{fontWeight:800,mb:1},children:"Receive Shipment"}),n.jsx(et,{variant:"body1",sx:{opacity:.9},children:"Control how much you want to accept or reject per variant."})]}),n.jsxs(ta,{elevation:0,sx:{p:3,borderRadius:3,border:"1px solid #e5e7eb",bgcolor:"white"},children:[o?n.jsx(et,{variant:"body2",color:"text.secondary",children:"Loading entries..."}):n.jsx(WA,{children:n.jsxs($A,{size:"small",children:[n.jsx(HA,{children:n.jsxs(Ah,{children:[n.jsx(zs,{children:"Product"}),n.jsx(zs,{children:"Variant"}),n.jsx(zs,{align:"right",children:"Transferred Qty"}),n.jsx(zs,{align:"right",children:"Accept"}),n.jsx(zs,{align:"right",children:"Reject"})]})}),n.jsx(VA,{children:t.map(v=>n.jsxs(Ah,{hover:!0,children:[n.jsx(zs,{children:n.jsxs(_r,{direction:"row",spacing:1,alignItems:"center",children:[n.jsx(rp,{variant:"rounded",src:v.variantId.images?.[0]||void 0,sx:{width:36,height:36}}),n.jsx(et,{variant:"body2",fontWeight:700,children:v.variantId.productName||"Unnamed product"})]})}),n.jsx(zs,{children:n.jsx(et,{variant:"caption",color:"text.secondary",children:Object.entries(v.variantId.optionValues||{}).map(([j,S])=>`${j}: ${S}`).join("  ")})}),n.jsx(zs,{align:"right",sx:{fontWeight:700},children:v.quantity}),n.jsx(zs,{align:"right",sx:{minWidth:140},children:n.jsx(Pn,{size:"small",type:"number",inputProps:{min:0,max:v.quantity},value:c[v._id]??"",onChange:y(v._id,Number(v.quantity)||0)})}),n.jsx(zs,{align:"right",sx:{minWidth:140},children:n.jsx(Pn,{size:"small",type:"number",inputProps:{min:0,max:Math.max(0,(Number(v.quantity)||0)-(c[v._id]??0))},value:h[v._id]??"",onChange:x(v._id,Number(v.quantity)||0)})})]},v._id))})]})}),n.jsxs(Et,{sx:{display:"flex",justifyContent:"flex-end",gap:1,mt:3},children:[n.jsx($r,{variant:"text",onClick:()=>a(-1),children:"Cancel"}),n.jsx($r,{variant:"contained",onClick:b,disabled:l,children:"Save"})]})]})]})})})},_fe=({option:a,onClick:r})=>{const e=a.icon;return n.jsx("button",{onClick:()=>r(a.route),className:"bg-white rounded-lg border border-gray-200 p-4 hover:bg-gray-50 transition-colors text-left",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"shrink-0 w-8 h-8 bg-gray-100 rounded flex items-center justify-center",children:n.jsx(e,{className:"w-4 h-4 text-gray-600"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-0.5",children:a.name}),n.jsx("p",{className:"text-xs text-gray-600",children:a.description})]})]})})},Efe=()=>{const a=mr(),r=[{name:"Customer Tags",route:"customer-tags",icon:s4,description:"Manage tags for customers"},{name:"Product Tags",route:"product-tags",icon:ap,description:"Manage tags for products"},{name:"Product Types",route:"product-types",icon:Xc,description:"Manage product type tags"},{name:"Transfer Tags",route:"transfer-tags",icon:Hu,description:"Manage tags for transfers"},{name:"Purchase Order Tags",route:"purchase-order-tags",icon:zd,description:"Manage tags for purchase orders"}],e=f.useCallback(t=>{a(`/tag-management/${t}`)},[a]);return n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:r.map(t=>n.jsx(_fe,{option:t,onClick:e},t.route))})},Tfe=()=>n.jsx(pr,{children:n.jsx("div",{className:"min-h-screen",children:n.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 py-6",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Tag Management"}),n.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Select a tag type to manage"})]}),n.jsx(Efe,{})]})})}),Ofe=()=>{const{id:a}=qa(),r=mr(),{transfers:e,deleteTransfer:t,updateTransfer:s,markReadyToShip:o,setTransfers:i}=JS(),l=f.useMemo(()=>e.find(fe=>fe._id===a),[e,a]),[c,d]=f.useState(!1),[h,m]=f.useState(!1),[y,x]=f.useState(!1),{entries:b,loading:v,error:j,fetchByTransferId:S}=KA(),{getShipmentByTransferId:k,updateShipment:N,deleteShipment:P,shipments:R,loading:F,markShipmentInTransit:z}=L2(),H=f.useMemo(()=>l?._id&&R.find(fe=>fe.transferId===l._id)||null,[R,l?._id]),[V,W]=f.useState(!1),[Z,A]=f.useState(!1),[q,I]=f.useState(""),[K,D]=f.useState(""),[Q,oe]=f.useState(""),[re,Te]=f.useState(!1);f.useEffect(()=>{l?._id&&(S(l._id).catch(()=>{}),k(l._id).catch(()=>{}))},[l?._id,S,k]);const G=async()=>{if(l)try{await t(l._id),d(!1),r("/products/transfers")}catch(fe){console.error("Failed to delete transfer:",fe)}},Y=async()=>{if(l)try{await s(l._id,{status:"cancelled"}),m(!1)}catch(fe){console.error("Failed to cancel transfer:",fe)}},Se=async()=>{if(l)try{await o(l._id),x(!1)}catch(fe){console.error("Failed to mark ready to ship:",fe)}};return l?n.jsx(pr,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>r("/products/transfers"),className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(Hn,{className:"w-4 h-4"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-xl font-medium text-gray-900",children:["Transfer #",l._id.slice(-8)]}),n.jsxs("p",{className:"text-xs text-gray-600 mt-0.5",children:["Created ",new Date(l.createdAt).toLocaleString()]})]})]}),n.jsx(Pfe,{currentLabel:l.status.replace(/_/g," "),transferId:l._id,onDeleteClick:()=>d(!0),onCancelClick:()=>m(!0),isCancelled:l.status==="cancelled",status:l.status,onReadyClick:()=>x(!0),onCreateShipment:()=>r(`/products/transfers/${l._id}/shipment/new`,{state:{transferId:l._id,entries:b}}),hasShipment:!!H})]})}),n.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 space-y-4",children:[l.status==="cancelled"&&n.jsx("div",{className:"border border-red-200 bg-red-50 p-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Iu,{className:"w-5 h-5 text-red-600"}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-sm font-medium text-red-900 mb-0.5",children:"Transfer Cancelled"}),n.jsx("p",{className:"text-xs text-red-700",children:"This transfer has been cancelled and cannot be modified. You can view the details but no actions are available."})]})]})}),n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Shipment"}),F?n.jsx("p",{className:"text-sm text-gray-600",children:"Loading shipment..."}):H?n.jsxs("div",{className:"border border-gray-200 bg-gray-50 p-3",children:[n.jsxs("p",{className:"text-sm font-medium text-gray-900 mb-1",children:["Scheduled for ",H.carrier||""," delivery for ",H.estimatedArrivalDate?new Date(H.estimatedArrivalDate).toLocaleDateString():""]}),n.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Tracking number: ",n.jsx("span",{className:"font-medium",children:H.trackingNumber||""})]}),n.jsx("span",{className:"inline-block px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-700",children:H.status.replace("_"," ")}),n.jsx("div",{className:"flex gap-2 mt-3 flex-wrap",children:H.status==="in_transit"?n.jsx("button",{onClick:()=>r(`/products/transfers/${l._id}/shipment/${H._id}/receive`),className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Receive shipment"}):H.status==="received"?null:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>{I(H.trackingNumber||""),D(H.carrier||""),oe(H.estimatedArrivalDate?H.estimatedArrivalDate.slice(0,10):""),W(!0)},className:"px-3 py-1.5 text-sm font-medium border border-gray-200 hover:bg-gray-50 transition-colors",children:"Edit tracking"}),n.jsx("button",{onClick:()=>A(!0),className:"px-3 py-1.5 text-sm font-medium border border-gray-200 hover:bg-gray-50 transition-colors text-red-600",children:"Delete shipment"}),n.jsx("button",{onClick:()=>Te(!0),className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Mark as in transit"})]})})]}):n.jsx("div",{className:"text-center py-2",children:n.jsx("p",{className:"text-sm text-gray-600",children:"No shipment created yet."})})]}),n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Transfer Locations"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[n.jsxs("div",{className:"border border-gray-200 bg-gray-50 p-3",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Vh,{className:"w-4 h-4 text-gray-600"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Origin Location"})]}),n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:l.originLocationId?.name}),n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:l.originLocationId?.address}),n.jsxs("p",{className:"text-xs text-gray-600",children:[l.originLocationId?.city,", ",l.originLocationId?.state," ",l.originLocationId?.postalCode]})]}),n.jsxs("div",{className:"border border-gray-200 bg-gray-50 p-3",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Vh,{className:"w-4 h-4 text-gray-600"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Destination Location"})]}),n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:l.destinationLocationId?.name}),n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:l.destinationLocationId?.address}),n.jsxs("p",{className:"text-xs text-gray-600",children:[l.destinationLocationId?.city,", ",l.destinationLocationId?.state," ",l.destinationLocationId?.postalCode]})]})]})]}),n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Transfer Entries"}),n.jsxs("div",{className:"border border-gray-200 bg-gray-50 p-3",children:[v&&n.jsx("p",{className:"text-sm text-gray-600",children:"Loading entries..."}),j&&n.jsx("p",{className:"text-sm text-red-600",children:j}),!v&&!j&&(b.length?n.jsx("div",{className:"border border-gray-200 overflow-hidden",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-white",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Products"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"SKU"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"At origin"}),n.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-900",children:"Quantity"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(fe=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[fe.variantId.images?.[0]?n.jsx("img",{src:fe.variantId.images[0],alt:fe.variantId.productName||"Product",className:"w-10 h-10 object-cover"}):n.jsx("div",{className:"w-10 h-10 bg-gray-200"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:fe.variantId.productName||"Unnamed product"}),!!Object.keys(fe.variantId.optionValues||{}).length&&n.jsx("p",{className:"text-xs text-gray-600",children:Object.entries(fe.variantId.optionValues).map(([Ee,Ae])=>`${Ee}: ${Ae}`).join("  ")})]})]})}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:fe.variantId.sku}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:typeof fe.atOrigin=="number"?fe.atOrigin:0}),n.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-900 text-right",children:fe.quantity})]},fe._id))})]})}):n.jsxs("div",{className:"text-center py-3",children:[n.jsx(Xc,{className:"w-8 h-8 text-gray-400 mx-auto mb-1"}),n.jsx("p",{className:"text-sm text-gray-600",children:"No entries added to this transfer"})]}))]})]}),n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Transfer Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[n.jsxs("div",{className:"border border-gray-200 bg-gray-50 p-3",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[n.jsx(Q0,{className:"w-4 h-4 text-gray-600"}),n.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Reference Name"})]}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:l.referenceName||"No reference"})]}),n.jsxs("div",{className:"border border-gray-200 bg-gray-50 p-3",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[n.jsx(fS,{className:"w-4 h-4 text-gray-600"}),n.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Transfer Date"})]}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:l.transferDate?new Date(l.transferDate).toLocaleDateString():"Not set"}),l.transferDate&&n.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:new Date(l.transferDate).toLocaleTimeString()})]}),n.jsxs("div",{className:"border border-gray-200 bg-gray-50 p-3",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[n.jsx(Q0,{className:"w-4 h-4 text-gray-600"}),n.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Store ID"})]}),n.jsx("p",{className:"text-sm font-medium text-gray-900 font-mono",children:l.storeId})]})]})]}),n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Transfer Tags"}),n.jsx("div",{className:"border border-gray-200 bg-gray-50 p-3 min-h-[80px] flex items-center",children:l.tags?.length?n.jsx("div",{className:"flex flex-wrap gap-1",children:l.tags.map(fe=>n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-700",children:fe.name},fe._id))}):n.jsxs("div",{className:"text-center w-full",children:[n.jsx(ap,{className:"w-8 h-8 text-gray-400 mx-auto mb-1"}),n.jsx("p",{className:"text-sm text-gray-600",children:"No tags assigned to this transfer"})]})})]}),n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Transfer Notes"}),n.jsx("div",{className:"border border-gray-200 bg-gray-50 p-3 min-h-[100px]",children:l.note?n.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:l.note}):n.jsxs("div",{className:"text-center py-2",children:[n.jsx(zd,{className:"w-8 h-8 text-gray-400 mx-auto mb-1"}),n.jsx("p",{className:"text-sm text-gray-600",children:"No notes added to this transfer"})]})})]})]}),n.jsxs(un,{open:c,onClose:()=>d(!1),title:n.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[n.jsx(Iu,{className:"w-5 h-5"}),n.jsx("span",{children:"Delete Transfer"})]}),actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>d(!1),className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"No, Cancel"}),n.jsx("button",{onClick:G,className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Yes, Delete Transfer"})]}),children:[n.jsx("p",{className:"text-sm text-gray-900 mb-2",children:"Do you really want to delete this transfer?"}),n.jsx("div",{className:"p-2 bg-red-50 border border-red-200 mb-2",children:n.jsxs("p",{className:"text-xs text-red-600 font-medium",children:["Transfer ID: ",l?._id]})}),n.jsx("p",{className:"text-xs text-gray-600",children:"This action cannot be undone. The transfer and all its associated entries will be permanently deleted."})]}),n.jsxs(un,{open:h,onClose:()=>m(!1),title:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Iu,{className:"w-5 h-5 text-gray-600"}),n.jsx("span",{children:"Cancel Transfer"})]}),actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>m(!1),className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"No, Keep Transfer"}),n.jsx("button",{onClick:Y,className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Yes, Cancel Transfer"})]}),children:[n.jsx("p",{className:"text-sm text-gray-900 mb-2",children:"Are you sure you want to cancel this transfer?"}),n.jsx("div",{className:"p-2 bg-gray-50 border border-gray-200 mb-2",children:n.jsxs("p",{className:"text-xs text-gray-600 font-medium",children:["Transfer ID: ",l?._id]})}),n.jsx("p",{className:"text-xs text-gray-600",children:"Once cancelled, this transfer cannot be modified or reactivated. The transfer will remain in your records for reference."})]}),n.jsxs(un,{open:y,onClose:()=>x(!1),title:"Mark as Ready to Ship",maxWidth:"md",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>x(!1),className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:Se,className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Confirm"})]}),children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Mark as ready to ship"}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Marking the transfer as ready to ship will automatically reserve all inventory and stock all unavailable items at the shop location."}),n.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 mb-3",children:[n.jsxs("p",{className:"text-xs text-gray-600",children:["Origin: ",n.jsx("span",{className:"font-medium",children:l.originLocationId?.name})]}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Destination: ",n.jsx("span",{className:"font-medium",children:l.destinationLocationId?.name})]})]}),n.jsxs("div",{className:"p-3 bg-white border border-gray-200",children:[n.jsx("p",{className:"text-xs font-medium text-gray-900 mb-2",children:"What happens next"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs text-gray-600",children:[n.jsxs("li",{children:["We will ",n.jsx("span",{className:"font-medium",children:"reserve"})," the transfer quantities at the origin location so they cannot be sold."]}),n.jsxs("li",{children:["Origin inventory will be updated: ",n.jsx("span",{className:"font-medium",children:"unavailable increases"})," by the transfer quantity and ",n.jsx("span",{className:"font-medium",children:"available decreases"})," accordingly. On hand does not change."]}),n.jsx("li",{children:"No stock physically moves yet. Destination inventory remains unchanged until shipment is created and received."})]})]})]}),n.jsx(un,{open:V,onClose:()=>W(!1),title:"Edit shipment",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>W(!1),className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:async()=>{H&&(await N(H._id,{trackingNumber:q,carrier:K,estimatedArrivalDate:Q||void 0}),W(!1))},className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Save"})]}),children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Tracking number"}),n.jsx("input",{type:"text",value:q,onChange:fe=>I(fe.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Shipping carrier"}),n.jsx("input",{type:"text",value:K,onChange:fe=>D(fe.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Estimated arrival date"}),n.jsx("input",{type:"date",value:Q,onChange:fe=>oe(fe.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]})]})}),n.jsx(un,{open:Z,onClose:()=>A(!1),title:n.jsx("span",{className:"text-red-600",children:"Delete shipment"}),actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>A(!1),className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:async()=>{H&&(await P(H._id),A(!1))},className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Delete"})]}),children:n.jsx("p",{className:"text-sm text-gray-900",children:"Are you sure you want to delete this shipment?"})}),n.jsxs(un,{open:re,onClose:()=>Te(!1),title:"Mark shipment as in transit",maxWidth:"md",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>Te(!1),className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:async()=>{if(H)try{const fe=await z(H._id);i(Ee=>Ee.map(Ae=>Ae._id===fe.transferId?{...Ae,status:"in_progress"}:Ae)),Te(!1)}catch(fe){console.error("Failed to mark in transit",fe)}},className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Mark as in transit"})]}),children:[n.jsx("p",{className:"text-sm text-gray-900 mb-3",children:"Are you sure you want to mark this transfer as in transit? These units will be marked as incoming to the destination and allowed to be received."}),n.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 mb-3",children:[n.jsxs("p",{className:"text-xs text-gray-600",children:["Origin: ",n.jsx("span",{className:"font-medium",children:l.originLocationId?.name})]}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Destination: ",n.jsx("span",{className:"font-medium",children:l.destinationLocationId?.name})]}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Total units: ",n.jsx("span",{className:"font-medium",children:b.reduce((fe,Ee)=>fe+(Ee.quantity||0),0)})]})]}),n.jsxs("div",{className:"p-3 bg-white border border-gray-200",children:[n.jsx("p",{className:"text-xs font-medium text-gray-900 mb-2",children:"What happens next"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs text-gray-600",children:[n.jsx("li",{children:"Origin: unavailable decreases by the transfer quantity."}),n.jsx("li",{children:"Destination: incoming increases by the transfer quantity."}),n.jsxs("li",{children:["Transfer status changes to ",n.jsx("span",{className:"font-medium",children:"in progress"}),"."]}),n.jsxs("li",{children:["Shipment status changes to ",n.jsx("span",{className:"font-medium",children:"in transit"}),"."]})]})]})]})]})}):n.jsx(pr,{children:n.jsx("div",{className:"min-h-screen",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:n.jsxs("div",{className:"border border-gray-200 p-8 text-center",children:[n.jsx(Xc,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),n.jsx("h1",{className:"text-lg font-medium text-gray-900 mb-1",children:"Transfer Not Found"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"The transfer you're looking for doesn't exist or has been removed."}),n.jsx("button",{onClick:()=>r("/products/transfers"),className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Back to Transfers"})]})})})})},Pfe=({currentLabel:a,transferId:r,onDeleteClick:e,onCancelClick:t,onReadyClick:s,onCreateShipment:o,isCancelled:i,status:l,hasShipment:c})=>{const[d,h]=f.useState(!1),[m,y]=f.useState(!1),x=f.useRef(null),b=f.useRef(null);f.useEffect(()=>{const S=k=>{x.current&&!x.current.contains(k.target)&&h(!1),b.current&&!b.current.contains(k.target)&&y(!1)};return(d||m)&&document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[d,m]);const v=l==="draft",j=l==="ready_to_ship";return n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-700 capitalize",children:a}),j&&!c&&n.jsx("button",{onClick:o,className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Create shipment"}),v&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"relative",ref:x,children:[n.jsxs("button",{disabled:i,onClick:()=>h(!d),className:"px-3 py-1.5 text-sm font-medium border border-gray-200 hover:bg-gray-50 transition-colors disabled:bg-gray-50 disabled:text-gray-400 disabled:cursor-not-allowed flex items-center gap-1",children:["Mark as",n.jsx(Is,{className:"w-4 h-4"})]}),d&&n.jsxs("div",{className:"absolute right-0 mt-1 w-48 bg-white border border-gray-200 shadow-lg z-10",children:[v&&n.jsx("button",{onClick:()=>{h(!1),s()},className:"w-full text-left px-4 py-2 text-sm text-gray-900 hover:bg-gray-50 transition-colors",children:"Ready to ship"}),n.jsx("button",{onClick:()=>h(!1),className:"w-full text-left px-4 py-2 text-sm text-gray-900 hover:bg-gray-50 transition-colors",children:"In progress"}),n.jsx("button",{onClick:()=>h(!1),className:"w-full text-left px-4 py-2 text-sm text-gray-900 hover:bg-gray-50 transition-colors",children:"Transferred"})]})]}),n.jsxs("div",{className:"relative",ref:b,children:[n.jsxs("button",{disabled:i,onClick:()=>y(!m),className:"px-3 py-1.5 text-sm font-medium border border-gray-200 hover:bg-gray-50 transition-colors disabled:bg-gray-50 disabled:text-gray-400 disabled:cursor-not-allowed flex items-center gap-1",children:["More actions",n.jsx(Is,{className:"w-4 h-4"})]}),m&&n.jsxs("div",{className:"absolute right-0 mt-1 w-48 bg-white border border-gray-200 shadow-lg z-10",children:[!i&&n.jsx("button",{onClick:()=>{y(!1),t()},className:"w-full text-left px-4 py-2 text-sm text-gray-900 hover:bg-gray-50 transition-colors",children:"Cancel transfer"}),v&&!i&&!j&&n.jsxs("button",{onClick:()=>{y(!1),e()},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-50 transition-colors flex items-center gap-2",children:[n.jsx(Vs,{className:"w-4 h-4"}),"Delete transfer"]})]})]})]})]})},Afe=({onCreateTransfer:a})=>n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Transfers"}),n.jsx("button",{onClick:a,className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Create Transfer"})]})}),Mfe=()=>{const a=mr(),{fetchTransfersByStoreId:r,transfers:e,loading:t}=JS(),{activeStoreId:s}=fn();f.useEffect(()=>{s&&r(s).catch(()=>{})},[s,r]);const o=f.useCallback(c=>{a(`/products/transfers/${c}`)},[a]),i=f.useCallback(()=>{a("/products/transfers/new")},[a]),l=f.useCallback(c=>{switch(c){case"draft":return"bg-gray-100 text-gray-700";case"ready_to_ship":return"bg-gray-100 text-gray-700";case"in_progress":return"bg-gray-100 text-gray-700";case"transferred":return"bg-gray-100 text-gray-700";default:return"bg-gray-100 text-gray-700"}},[]);return n.jsx(pr,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx(Afe,{onCreateTransfer:i}),n.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[t&&n.jsx("div",{className:"py-12 text-center",children:n.jsx("div",{className:"animate-spin rounded-full w-4 h-4 border-2 border-gray-300 border-t-gray-900 mx-auto"})}),!t&&e.length===0&&n.jsxs("div",{className:"border border-gray-200 p-8 text-center",children:[n.jsx(Xc,{className:"w-8 h-8 text-gray-400 mb-2 mx-auto"}),n.jsx("h2",{className:"text-sm font-medium mb-1 text-gray-900",children:"No transfers yet"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3 max-w-md mx-auto",children:"Start by creating your first transfer to move products between locations and keep your inventory organized."}),n.jsx("button",{onClick:i,className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Create Your First Transfer"})]}),e.length>0&&n.jsx("div",{className:"border border-gray-200 overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-white",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Transfer ID"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Reference"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Origin"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Destination"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Transfer Date"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Tags"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Status"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Created"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Updated"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(c=>n.jsxs("tr",{onClick:()=>o(c._id),className:"cursor-pointer hover:bg-gray-50 transition-colors",children:[n.jsxs("td",{className:"px-4 py-2 font-medium text-gray-900 font-mono text-sm",children:["#",c._id.slice(-8)]}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:c.referenceName||"-"}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:c.originLocationId?.name||"-"}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:c.destinationLocationId?.name||"-"}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:c.transferDate?new Date(c.transferDate).toLocaleDateString():"-"}),n.jsx("td",{className:"px-4 py-2",children:c.tags&&c.tags.length>0?n.jsxs("div",{className:"flex flex-wrap gap-1",children:[c.tags.slice(0,2).map(d=>n.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 text-xs font-medium bg-gray-100 text-gray-700",children:d.name},d._id)),c.tags.length>2&&n.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 text-xs font-medium bg-gray-100 text-gray-600",children:["+",c.tags.length-2]})]}):n.jsx("span",{className:"text-xs text-gray-600",children:"No tags"})}),n.jsx("td",{className:"px-4 py-2 capitalize",children:n.jsx("span",{className:`inline-block px-2 py-0.5 text-xs font-medium ${l(c.status)}`,children:c.status.replace(/_/g," ")})}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:new Date(c.createdAt).toLocaleDateString()}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:c.updatedAt?new Date(c.updatedAt).toLocaleDateString():"Not available"})]},c._id))})]})})})]})]})})},Ife=({isOpen:a,onClose:r,vendorName:e,onVendorNameChange:t,onSubmit:s})=>n.jsx(un,{open:a,onClose:r,title:"Add Vendor",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:s,className:"px-3 py-1.5 bg-gray-900 text-white text-sm font-medium hover:bg-gray-800 transition-colors",children:"Submit"})]}),children:n.jsxs("div",{children:[n.jsx("label",{htmlFor:"vendor-name",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Enter vendor name"}),n.jsx("input",{id:"vendor-name",type:"text",autoFocus:!0,value:e,onChange:t,className:"w-full px-3 py-2 border border-gray-200 focus:ring-1 focus:ring-gray-400 focus:border-gray-300 outline-none transition-colors bg-white text-sm",placeholder:"Enter vendor name"})]})}),Rfe=({vendor:a})=>n.jsx("div",{className:"py-3 hover:bg-gray-50 transition-colors",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"font-medium text-gray-900 text-sm",children:a.name}),n.jsx("span",{className:"text-xs text-gray-500",children:new Date(a.updatedAt).toLocaleDateString()})]})}),Lfe=({vendors:a})=>n.jsx("div",{className:"divide-y divide-gray-200",children:a.map(r=>n.jsx(Rfe,{vendor:r},r._id))}),Dfe=()=>{const{vendors:a,fetchVendorsByStoreId:r,loading:e,createVendor:t}=Mb(),{activeStoreId:s}=fn(),[o,i]=f.useState(!1),[l,c]=f.useState("");f.useEffect(()=>{s&&r(s)},[s,r]);const d=f.useCallback(()=>{i(!0)},[]),h=f.useCallback(()=>{i(!1),c("")},[]),m=f.useCallback(x=>{c(x.target.value)},[]),y=f.useCallback(async()=>{if(!s||!l.trim()){i(!1);return}try{await t({storeId:s,name:l.trim()})}finally{c(""),i(!1)}},[s,l,t]);return n.jsx(pr,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Vendors"}),n.jsxs("button",{onClick:d,className:"cursor-pointer flex items-center gap-1.5 px-3 py-1.5 bg-gray-900 text-white text-sm font-medium hover:bg-gray-800 transition-colors",children:[n.jsx(na,{className:"w-4 h-4"}),"Add Vendor"]})]})}),n.jsx("div",{className:"px-4 py-6 bg-white",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsx("div",{className:"border border-gray-200",children:n.jsx("div",{className:"p-4",children:e?n.jsx("div",{className:"flex justify-center py-6",children:n.jsx("p",{className:"text-sm text-gray-600",children:"Loading..."})}):a.length===0?n.jsx("p",{className:"text-sm text-gray-600",children:"No vendors found for this store."}):n.jsx(Lfe,{vendors:a})})})})}),n.jsx(Ife,{isOpen:o,onClose:h,vendorName:l,onVendorNameChange:m,onSubmit:y})]})})},lw=()=>{const a=mr(),r=f.useCallback(()=>{a("/discounts")},[a]);return n.jsx("div",{className:"max-w-5xl mx-auto py-8 px-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Discount not found"}),n.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Back to discounts"})]})})},cw=({method:a,discountCode:r,title:e,value:t,status:s,onBack:o})=>n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsx("div",{className:"flex justify-between items-center",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:o,className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(Hn,{className:"w-4 h-4"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:a==="discount-code"?r||"-":e||"-"}),n.jsxs("p",{className:"text-xs text-gray-600 mt-0.5",children:[a,"  ",t,"  ",s||"active"]})]})]})})}),Ffe=({label:a})=>n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-700 border border-gray-200",children:a}),ec=({items:a})=>n.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(r=>n.jsx(Ffe,{label:r.label},r.key))}),Bfe=()=>{const{id:a}=qa(),r=mr(),{activeStoreId:e}=fn(),{discounts:t,fetchDiscountsByStoreId:s,loading:o,error:i}=YS(),l=t.find(v=>v._id===a);f.useEffect(()=>{e&&!t.length&&s(e)},[e,t.length,s]);const c=f.useCallback(()=>{r("/discounts")},[r]),d=f.useCallback(v=>v?"Yes":"No",[]),h=f.useCallback(v=>v?.name||v?._id,[]),m=f.useCallback(v=>`${v?.firstName||""} ${v?.lastName||""}`.trim()||v?.email||v?._id,[]);if(o)return n.jsx(pr,{children:n.jsx("div",{className:"flex justify-center py-8",children:n.jsx("div",{className:"w-6 h-6 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})})});if(i)return n.jsx(pr,{children:n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsx("div",{className:"p-3 bg-red-50 border border-red-200",children:n.jsx("p",{className:"text-sm text-red-800",children:i})})})});if(!l)return n.jsx(pr,{children:n.jsx(lw,{})});const y=l.targetCustomerSegmentDetails||[],x=l.targetCustomerDetails||[],b=l.valueType==="percentage"?`${l.percentage??0}%`:`${l.fixedAmount??0}`;return n.jsx(pr,{children:n.jsx("div",{className:"min-h-screen",children:n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx(cw,{method:l.method,discountCode:l.discountCode,title:l.title,value:b,status:l.status,onBack:c}),n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"General Information"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Method"}),n.jsx("p",{className:"text-sm text-gray-900",children:l.method})]}),l.method==="discount-code"&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Code"}),n.jsx("p",{className:"text-sm text-gray-900",children:l.discountCode})]}),l.method==="automatic"&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Title"}),n.jsx("p",{className:"text-sm text-gray-900",children:l.title})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Value Type"}),n.jsx("p",{className:"text-sm text-gray-900",children:l.valueType})]}),l.valueType==="percentage"&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Percentage"}),n.jsxs("p",{className:"text-sm text-gray-900",children:[l.percentage,"%"]})]}),l.valueType==="fixed-amount"&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Fixed Amount"}),n.jsxs("p",{className:"text-sm text-gray-900",children:["",l.fixedAmount]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Eligibility"}),n.jsx("p",{className:"text-sm text-gray-900",children:l.eligibility})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Status"}),n.jsx("p",{className:"text-sm text-gray-900",children:l.status})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Created At"}),n.jsx("p",{className:"text-sm text-gray-900",children:new Date(l.createdAt).toLocaleDateString()})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Last Updated"}),n.jsx("p",{className:"text-sm text-gray-900",children:new Date(l.updatedAt).toLocaleDateString()})]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Usage & Channel Limits"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Allow on Channels"}),n.jsx("p",{className:"text-sm text-gray-900",children:d(l.allowDiscountOnChannels)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Limit Total Uses"}),n.jsx("p",{className:"text-sm text-gray-900",children:d(l.limitTotalUses)})]}),l.limitTotalUses&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Total Uses Limit"}),n.jsx("p",{className:"text-sm text-gray-900",children:l.totalUsesLimit})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"One Use Per Customer"}),n.jsx("p",{className:"text-sm text-gray-900",children:d(l.limitOneUsePerCustomer)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Apply on POS Pro"}),n.jsx("p",{className:"text-sm text-gray-900",children:d(l.applyOnPOSPro)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Once Per Order"}),n.jsx("p",{className:"text-sm text-gray-900",children:d(l.oncePerOrder)})]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Minimum Purchase"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Requirement"}),n.jsx("p",{className:"text-sm text-gray-900",children:l.minimumPurchase})]}),l.minimumPurchase==="minimum-amount"&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Amount"}),n.jsxs("p",{className:"text-sm text-gray-900",children:["",l.minimumAmount]})]}),l.minimumPurchase==="minimum-quantity"&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Quantity"}),n.jsx("p",{className:"text-sm text-gray-900",children:l.minimumQuantity})]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Combinations"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Product Discounts"}),n.jsx("p",{className:"text-sm text-gray-900",children:d(l.productDiscounts)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Order Discounts"}),n.jsx("p",{className:"text-sm text-gray-900",children:d(l.orderDiscounts)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Shipping Discounts"}),n.jsx("p",{className:"text-sm text-gray-900",children:d(l.shippingDiscounts)})]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Active Dates"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Start Date"}),n.jsxs("p",{className:"text-sm text-gray-900",children:[l.startDate," ",l.startTime?`at ${l.startTime}`:""]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Set End Date"}),n.jsx("p",{className:"text-sm text-gray-900",children:d(l.setEndDate)})]}),l.setEndDate&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"End Date"}),n.jsxs("p",{className:"text-sm text-gray-900",children:[l.endDate," ",l.endTime?`at ${l.endTime}`:""]})]})]})]}),Array.isArray(y)&&y.length>0&&n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Target Customer Segments"}),n.jsx(ec,{items:y.map((v,j)=>({key:v?._id||j.toString(),label:h(v)}))})]}),Array.isArray(x)&&x.length>0&&n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Target Customers"}),n.jsx(ec,{items:x.map((v,j)=>({key:v?._id||j.toString(),label:m(v)}))})]})]})})})})},zfe=()=>{const a=mr(),{activeStoreId:r}=fn(),{segments:e,searchCustomerSegments:t,fetchSegmentsByStoreId:s,loading:o}=im(),{customers:i,searchCustomers:l,fetchCustomersByStoreId:c,loading:d}=Hd(),{createDiscount:h,loading:m,error:y}=YS(),[x,b]=f.useState({method:"discount-code",discountCode:"",title:"",valueType:"percentage",percentage:"",fixedAmount:"",eligibility:"all-customers",eligibilitySearchQuery:"",applyOnPOSPro:!1,minimumPurchase:"no-requirements",minimumAmount:"",minimumQuantity:"",productDiscounts:!1,orderDiscounts:!1,shippingDiscounts:!1,startDate:"",startTime:"",setEndDate:!1,endDate:"",endTime:"",allowDiscountOnChannels:!1,limitTotalUses:!1,totalUsesLimit:"",limitOneUsePerCustomer:!1}),[v,j]=f.useState([]),[S,k]=f.useState([]),[N,P]=f.useState(""),[R,F]=f.useState(""),z=f.useCallback((I,K)=>{b(D=>({...D,[I]:K}))},[]),H=f.useCallback((()=>{let I;return K=>{window.clearTimeout(I),I=window.setTimeout(async()=>{if(r)if(K.trim())try{await t(r,K)}catch{}else try{await s(r)}catch{}},300)}})(),[r,t,s]),V=f.useCallback((()=>{let I;return K=>{window.clearTimeout(I),I=window.setTimeout(async()=>{if(r)if(K.trim())try{await l(r,K)}catch{}else try{await c(r)}catch{}},300)}})(),[r,l,c]),W=f.useCallback(()=>{a("/discounts?createDiscountModal=open")},[a]),Z=f.useCallback(async I=>{if(I.preventDefault(),!!r)try{const K={storeId:r,method:x.method,...x.method==="discount-code"?{discountCode:x.discountCode}:{},...x.method==="automatic"?{title:x.title}:{},valueType:x.valueType,...x.valueType==="percentage"?{percentage:Number(x.percentage)||0}:{},...x.valueType==="fixed-amount"?{fixedAmount:Number(x.fixedAmount)||0}:{},eligibility:x.eligibility,applyOnPOSPro:x.applyOnPOSPro,minimumPurchase:x.minimumPurchase,...x.minimumPurchase==="minimum-amount"?{minimumAmount:Number(x.minimumAmount)||0}:{},...x.minimumPurchase==="minimum-quantity"?{minimumQuantity:Number(x.minimumQuantity)||0}:{},productDiscounts:x.productDiscounts,orderDiscounts:x.orderDiscounts,shippingDiscounts:x.shippingDiscounts,allowDiscountOnChannels:x.allowDiscountOnChannels,limitTotalUses:x.limitTotalUses,...x.limitTotalUses?{totalUsesLimit:Number(x.totalUsesLimit)||0}:{},limitOneUsePerCustomer:x.limitOneUsePerCustomer,startDate:x.startDate||void 0,startTime:x.startTime||void 0,setEndDate:x.setEndDate,endDate:x.endDate||void 0,endTime:x.endTime||void 0,status:"active",targetCustomerSegmentIds:v,targetCustomerIds:S};(await h(K)).success&&a("/discounts")}catch{}},[x,v,S,r,h,a]),A=e.map(I=>({value:I._id,label:I.name})),q=i.map(I=>({value:I._id,label:`${I.firstName} ${I.lastName}`.trim()||I.email,secondaryText:I.email}));return n.jsx(pr,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:W,className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(Hn,{className:"w-4 h-4"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Amount off order"})]})}),n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsxs("form",{onSubmit:Z,children:[y&&n.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 flex items-center justify-between",children:[n.jsx("p",{className:"text-sm text-red-800",children:y}),n.jsx("button",{type:"button",onClick:()=>{},className:"text-red-600 hover:text-red-800",children:n.jsx(xs,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Method"}),n.jsxs("fieldset",{className:"mb-3",children:[n.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Discount Method"}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"method",value:"discount-code",checked:x.method==="discount-code",onChange:I=>z("method",I.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Discount code"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"method",value:"automatic",checked:x.method==="automatic",onChange:I=>z("method",I.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Automatic discount"})]})]})]}),x.method==="discount-code"&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Discount code"}),n.jsx("input",{type:"text",value:x.discountCode,onChange:I=>z("discountCode",I.target.value),placeholder:"Enter discount code",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Customers will enter this code at checkout"})]}),x.method==="automatic"&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Title"}),n.jsx("input",{type:"text",value:x.title,onChange:I=>z("title",I.target.value),placeholder:"Enter discount title",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"This title will be shown to customers"})]})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Discount value"}),n.jsxs("fieldset",{className:"mb-3",children:[n.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Discount Type"}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"valueType",value:"percentage",checked:x.valueType==="percentage",onChange:I=>z("valueType",I.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Percentage"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"valueType",value:"fixed-amount",checked:x.valueType==="fixed-amount",onChange:I=>z("valueType",I.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Fixed amount"})]})]})]}),x.valueType==="percentage"&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Percentage"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",value:x.percentage,onChange:I=>z("percentage",I.target.value),placeholder:"Enter percentage",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 pr-8 text-base"}),n.jsx("span",{className:"absolute right-3 top-2 text-gray-500 text-sm",children:"%"})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the percentage discount to apply"})]}),x.valueType==="fixed-amount"&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Fixed amount"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-2 text-gray-500 text-sm",children:""}),n.jsx("input",{type:"number",value:x.fixedAmount,onChange:I=>z("fixedAmount",I.target.value),placeholder:"Enter amount",className:"w-full px-3 py-1.5 pl-8 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the fixed amount discount in rupees"})]})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-1 text-gray-900",children:"Eligibility"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Available on all sales channels"}),n.jsxs("fieldset",{className:"mb-3",children:[n.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Customer Eligibility"}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"eligibility",value:"all-customers",checked:x.eligibility==="all-customers",onChange:I=>z("eligibility",I.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"All customers"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"eligibility",value:"specific-customer-segments",checked:x.eligibility==="specific-customer-segments",onChange:I=>z("eligibility",I.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Specific customer segments"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"eligibility",value:"specific-customers",checked:x.eligibility==="specific-customers",onChange:I=>z("eligibility",I.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Specific customers"})]})]})]}),x.method==="automatic"&&x.eligibility==="all-customers"&&n.jsx("div",{className:"ml-2 mt-2",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:x.applyOnPOSPro,onChange:I=>z("applyOnPOSPro",I.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Apply on POS Pro locations"})]})}),(x.eligibility==="specific-customer-segments"||x.eligibility==="specific-customers")&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:x.eligibility==="specific-customer-segments"?"Search customer segments":"Search customers"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:x.eligibility==="specific-customer-segments"?N:R,onChange:I=>{const K=I.target.value;x.eligibility==="specific-customer-segments"?(P(K),H(K)):(F(K),V(K))},placeholder:x.eligibility==="specific-customer-segments"?"Search for customer segments...":"Search for customers...",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 pr-10 text-base"}),(x.eligibility==="specific-customer-segments"&&o||x.eligibility==="specific-customers"&&d)&&n.jsx("div",{className:"absolute right-3 top-2",children:n.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:x.eligibility==="specific-customer-segments"?"Search and select customer segments to apply the discount to":"Search and select customers to apply the discount to"}),x.eligibility==="specific-customer-segments"&&e.length>0&&n.jsxs("div",{className:"mt-3",children:[n.jsx(Ao,{label:"Choose Customer Segments",value:v,options:A,onChange:j,renderValue:I=>e.filter(K=>I.includes(K._id)).map(K=>K.name).join(", ")}),n.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[v.length," segment(s) selected"]})]}),x.eligibility==="specific-customers"&&i.length>0&&n.jsxs("div",{className:"mt-3",children:[n.jsx(Ao,{label:"Choose Customers",value:S,options:q,onChange:k,renderValue:I=>i.filter(K=>I.includes(K._id)).map(K=>`${K.firstName} ${K.lastName}`.trim()||K.email).join(", ")}),n.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[S.length," customer(s) selected"]})]})]})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Minimum purchase requirements"}),n.jsxs("fieldset",{className:"mb-3",children:[n.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Minimum Purchase Requirements"}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"minimumPurchase",value:"no-requirements",checked:x.minimumPurchase==="no-requirements",onChange:I=>z("minimumPurchase",I.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"No minimum requirements"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"minimumPurchase",value:"minimum-amount",checked:x.minimumPurchase==="minimum-amount",onChange:I=>z("minimumPurchase",I.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Minimum purchase amount"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"minimumPurchase",value:"minimum-quantity",checked:x.minimumPurchase==="minimum-quantity",onChange:I=>z("minimumPurchase",I.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Minimum quantity of items"})]})]})]}),x.minimumPurchase==="minimum-amount"&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Minimum purchase amount"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-2 text-gray-500 text-sm",children:""}),n.jsx("input",{type:"number",value:x.minimumAmount,onChange:I=>z("minimumAmount",I.target.value),placeholder:"Enter minimum amount",className:"w-full px-3 py-1.5 pl-8 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Applies to all products"})]}),x.minimumPurchase==="minimum-quantity"&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Minimum quantity of items"}),n.jsx("input",{type:"number",value:x.minimumQuantity,onChange:I=>z("minimumQuantity",I.target.value),placeholder:"Enter minimum quantity",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Applies to all products"})]})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Combinations"}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:x.productDiscounts,onChange:I=>z("productDiscounts",I.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Product Discounts"})]}),x.productDiscounts&&n.jsx("p",{className:"mt-1 ml-6 text-xs text-gray-600",children:"Eligible product discounts will apply first."})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:x.orderDiscounts,onChange:I=>z("orderDiscounts",I.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Order Discounts"})]}),x.orderDiscounts&&n.jsx("p",{className:"mt-1 ml-6 text-xs text-gray-600",children:"All eligible order discounts will apply."})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:x.shippingDiscounts,onChange:I=>z("shippingDiscounts",I.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Shipping Discounts"})]}),x.shippingDiscounts&&n.jsx("p",{className:"mt-1 ml-6 text-xs text-gray-600",children:"The largest eligible shipping discount will apply in addition to eligible order discounts."})]}),(x.productDiscounts||x.orderDiscounts||x.shippingDiscounts)&&n.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200",children:n.jsx("p",{className:"text-xs text-yellow-800 font-medium",children:"This discount won't combine with any other discount at checkout."})})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Active dates"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Start date"}),n.jsx("input",{type:"date",value:x.startDate,onChange:I=>z("startDate",I.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Start time (IST)"}),n.jsx("input",{type:"time",value:x.startTime,onChange:I=>z("startTime",I.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Indian Standard Time"})]})]}),n.jsx("div",{className:"mt-3",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:x.setEndDate,onChange:I=>z("setEndDate",I.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Set end date"})]})}),x.setEndDate&&n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mt-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"End date"}),n.jsx("input",{type:"date",value:x.endDate,onChange:I=>z("endDate",I.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"End time (IST)"}),n.jsx("input",{type:"time",value:x.endTime,onChange:I=>z("endTime",I.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Indian Standard Time"})]})]})]}),x.method==="discount-code"&&n.jsxs(n.Fragment,{children:[n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Sales channel access"}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:x.allowDiscountOnChannels,onChange:I=>z("allowDiscountOnChannels",I.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Allow discount to be featured on selected channels"})]})]})]}),x.method==="discount-code"&&n.jsxs(n.Fragment,{children:[n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Maximum discount uses"}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:x.limitTotalUses,onChange:I=>z("limitTotalUses",I.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Limit number of times this discount can be used in total"})]}),x.limitTotalUses&&n.jsxs("div",{className:"ml-6 mt-2",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Total uses limit"}),n.jsx("input",{type:"number",value:x.totalUsesLimit,onChange:I=>z("totalUsesLimit",I.target.value),placeholder:"Enter maximum number of uses",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the maximum number of times this discount can be used"})]})]}),n.jsx("div",{children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:x.limitOneUsePerCustomer,onChange:I=>z("limitOneUsePerCustomer",I.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Limit to one use per customer"})]})})]})]}),n.jsxs("div",{className:"flex gap-2 justify-end mt-4",children:[n.jsx("button",{type:"button",onClick:W,className:"px-3 py-1.5 text-sm text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors font-medium",children:"Cancel"}),n.jsxs("button",{type:"submit",disabled:m,className:"px-3 py-1.5 text-sm bg-gray-900 text-white hover:bg-gray-800 transition-colors font-medium disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:[m&&n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),m?"Creating...":"Create Discount"]})]})]})})]})})},Ufe=()=>{const a=mr(),{createDiscount:r,loading:e,error:t,clearError:s}=OS(),{products:o,fetchProductsByStoreId:i,searchBasic:l,loading:c}=dc(),{collections:d,fetchCollectionsByStoreId:h,searchCollections:m,loading:y}=gp(),{segments:x,fetchSegmentsByStoreId:b,searchCustomerSegments:v,loading:j}=im(),{customers:S,fetchCustomersByStoreId:k,searchCustomers:N,loading:P}=Hd(),{activeStoreId:R}=fn(),[F,z]=f.useState([]),[H,V]=f.useState([]),[W,Z]=f.useState([]),[A,q]=f.useState([]),[I,K]=f.useState(""),[D,Q]=f.useState(""),[oe,re]=f.useState(""),[Te,G]=f.useState(""),[Y,Se]=f.useState([]),fe=f.useCallback((()=>{let U;return J=>{clearTimeout(U),U=window.setTimeout(async()=>{if(J.trim()&&R)try{await m(R,J)}catch(ce){console.error("Error searching collections:",ce)}else R&&await h(R)},300)}})(),[R,m,h]),Ee=f.useCallback((()=>{let U;return J=>{clearTimeout(U),U=window.setTimeout(async()=>{if(J.trim()&&R)try{const ue=(await l({q:J,storeId:R})).map(xe=>({_id:xe._id,title:xe.title,price:0,description:"",imageUrl:xe.imageUrl}));Se(ue)}catch(ce){console.error("Error searching products:",ce)}else R&&(await i(R),Se([]))},300)}})(),[R,i,l]),Ae=f.useCallback((()=>{let U;return J=>{clearTimeout(U),U=window.setTimeout(async()=>{if(J.trim()&&R)try{await v(R,J)}catch(ce){console.error("Error searching customer segments:",ce)}else R&&await b(R)},300)}})(),[R,v,b]),qe=f.useCallback((()=>{let U;return J=>{clearTimeout(U),U=window.setTimeout(async()=>{if(J.trim()&&R)try{await N(R,J)}catch(ce){console.error("Error searching customers:",ce)}else R&&await k(R)},300)}})(),[R,N,k]),[we,Oe]=f.useState({method:"discount-code",discountCode:"",title:"",valueType:"percentage",percentage:"",fixedAmount:"",takeAmountOffEachItem:!1,appliesTo:"specific-collections",searchQuery:"",oncePerOrder:!1,eligibility:"all-customers",applyOnPOSPro:!1,eligibilitySearchQuery:"",minimumPurchase:"no-requirements",minimumAmount:"",minimumQuantity:"",productDiscounts:!1,orderDiscounts:!1,shippingDiscounts:!1,startDate:"",startTime:"",setEndDate:!1,endDate:"",endTime:"",allowDiscountOnChannels:!1,limitTotalUses:!1,totalUsesLimit:"",limitOneUsePerCustomer:!1});f.useEffect(()=>{(async()=>{if(R)try{await Promise.all([i(R),h(R),b(R),k(R)])}catch(J){console.error("Failed to fetch products, collections, segments, and customers:",J)}})()},[R,i,h,b,k]);const ze=f.useCallback((U,J)=>{Oe(ce=>({...ce,[U]:J}))},[]);f.useCallback((U,J)=>{z(J?ce=>[...ce,U]:ce=>ce.filter(ue=>ue!==U))},[]),f.useCallback((U,J)=>{V(J?ce=>[...ce,U]:ce=>ce.filter(ue=>ue!==U))},[]);const We=f.useCallback(()=>{a("/discounts?createDiscountModal=open")},[a]),pt=f.useCallback(async U=>{U.preventDefault(),s();try{const J={storeId:R,method:we.method,...we.method==="discount-code"&&{discountCode:we.discountCode},...we.method==="automatic"&&{title:we.title},allowDiscountOnChannels:we.allowDiscountOnChannels,limitTotalUses:we.limitTotalUses,totalUsesLimit:we.totalUsesLimit?Number(we.totalUsesLimit):void 0,limitOneUsePerCustomer:we.limitOneUsePerCustomer,valueType:we.valueType,...we.valueType==="percentage"&&{percentage:Number(we.percentage)},...we.valueType==="fixed-amount"&&{fixedAmount:Number(we.fixedAmount)},appliesTo:we.appliesTo,oncePerOrder:we.takeAmountOffEachItem,eligibility:we.eligibility,applyOnPOSPro:we.applyOnPOSPro,minimumPurchase:we.minimumPurchase,minimumAmount:we.minimumAmount?Number(we.minimumAmount):void 0,minimumQuantity:we.minimumQuantity?Number(we.minimumQuantity):void 0,productDiscounts:we.productDiscounts,orderDiscounts:we.orderDiscounts,shippingDiscounts:we.shippingDiscounts,startDate:we.startDate,startTime:we.startTime,setEndDate:we.setEndDate,endDate:we.endDate,endTime:we.endTime,status:"active",targetProductIds:F,targetCollectionIds:H,targetCustomerSegmentIds:W,targetCustomerIds:A};(await r(J)).success&&a("/discounts?createDiscountModal=open")}catch(J){console.error("Failed to create discount:",J)}},[we,F,H,W,A,R,r,a,s]),Pt=[{value:"specific-collections",label:"Specific collections"},{value:"specific-products",label:"Specific products"}],ee=Y.length>0?Y:o,Ne=ee.map(U=>({value:U._id,label:U.title,secondaryText:U.price>0?`(${U.price})`:void 0})),Ie=d.map(U=>({value:U._id,label:U.title,secondaryText:U.description})),ne=x.map(U=>({value:U._id,label:U.name})),M=S.map(U=>({value:U._id,label:`${U.firstName} ${U.lastName}`,secondaryText:U.email}));return n.jsx(pr,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:We,className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(Hn,{className:"w-4 h-4"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Amount off products"})]})}),n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsxs("form",{onSubmit:pt,children:[t&&n.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 flex items-center justify-between",children:[n.jsx("p",{className:"text-sm text-red-800",children:t}),n.jsx("button",{type:"button",onClick:s,className:"text-red-600 hover:text-red-800",children:n.jsx(xs,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Method"}),n.jsxs("fieldset",{className:"mb-3",children:[n.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Discount Method"}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"method",value:"discount-code",checked:we.method==="discount-code",onChange:U=>ze("method",U.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Discount code"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"method",value:"automatic",checked:we.method==="automatic",onChange:U=>ze("method",U.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Automatic discount"})]})]})]}),we.method==="discount-code"&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Discount code"}),n.jsx("input",{type:"text",value:we.discountCode,onChange:U=>ze("discountCode",U.target.value),placeholder:"Enter discount code",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Customers will enter this code at checkout"})]}),we.method==="automatic"&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Title"}),n.jsx("input",{type:"text",value:we.title,onChange:U=>ze("title",U.target.value),placeholder:"Enter discount title",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"This title will be shown to customers"})]})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Discount value"}),n.jsxs("fieldset",{className:"mb-3",children:[n.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Value Type"}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"valueType",value:"percentage",checked:we.valueType==="percentage",onChange:U=>ze("valueType",U.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Percentage"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"valueType",value:"fixed-amount",checked:we.valueType==="fixed-amount",onChange:U=>ze("valueType",U.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Fixed amount"})]})]})]}),we.valueType==="percentage"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Percentage"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",value:we.percentage,onChange:U=>ze("percentage",U.target.value),placeholder:"Enter percentage",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 pr-8 text-base"}),n.jsx("span",{className:"absolute right-3 top-2 text-gray-500 text-sm",children:"%"})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the percentage discount (e.g., 10 for 10%)"})]}),we.valueType==="fixed-amount"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Amount"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-2 text-gray-500 text-sm",children:""}),n.jsx("input",{type:"number",value:we.fixedAmount,onChange:U=>ze("fixedAmount",U.target.value),placeholder:"Enter amount",className:"w-full px-3 py-1.5 pl-8 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the fixed amount in rupees"})]}),n.jsxs("div",{className:"mt-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:we.takeAmountOffEachItem,onChange:U=>ze("takeAmountOffEachItem",U.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Once per order"})]}),n.jsx("p",{className:"mt-1 ml-6 text-xs text-gray-600",children:"If not selected, the amount will be taken off each eligible item in an order"})]})]})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Applies to"}),n.jsx("div",{className:"mb-3",children:n.jsx(Us,{label:"Applies to",value:we.appliesTo,options:Pt,onChange:U=>ze("appliesTo",U)})}),we.appliesTo==="specific-products"&&n.jsxs("div",{className:"mb-3",children:[n.jsx("h3",{className:"text-xs font-medium mb-1.5 text-gray-900",children:"Select Products"}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Search Products"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:D,onChange:U=>{const J=U.target.value;Q(J),Ee(J)},placeholder:"Type to search products...",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 pr-10 text-base"}),c&&n.jsx("div",{className:"absolute right-3 top-2",children:n.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})})]})]}),n.jsx(Ao,{label:"Choose Products",value:F,options:Ne,onChange:z,renderValue:U=>ee.filter(ce=>U.includes(ce._id)).map(ce=>ce.title).join(", ")}),n.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[F.length," product(s) selected"]})]}),we.appliesTo==="specific-collections"&&n.jsxs("div",{className:"mb-3",children:[n.jsx("h3",{className:"text-xs font-medium mb-1.5 text-gray-900",children:"Select Collections"}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Search Collections"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:I,onChange:U=>{const J=U.target.value;K(J),fe(J)},placeholder:"Type to search collections...",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 pr-10 text-base"}),y&&n.jsx("div",{className:"absolute right-3 top-2",children:n.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})})]})]}),n.jsx(Ao,{label:"Choose Collections",value:H,options:Ie,onChange:V,renderValue:U=>d.filter(ce=>U.includes(ce._id)).map(ce=>ce.title).join(", ")}),n.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[H.length," collection(s) selected"]})]})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-1 text-gray-900",children:"Eligibility"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Available on all sales channels"}),n.jsxs("fieldset",{className:"mb-3",children:[n.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Customer Eligibility"}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"eligibility",value:"all-customers",checked:we.eligibility==="all-customers",onChange:U=>ze("eligibility",U.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"All customers"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"eligibility",value:"specific-customer-segments",checked:we.eligibility==="specific-customer-segments",onChange:U=>ze("eligibility",U.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Specific customer segments"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"eligibility",value:"specific-customers",checked:we.eligibility==="specific-customers",onChange:U=>ze("eligibility",U.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Specific customers"})]})]})]}),we.eligibility==="all-customers"&&we.method==="automatic"&&n.jsx("div",{className:"ml-2 mt-2",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:we.applyOnPOSPro,onChange:U=>ze("applyOnPOSPro",U.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Apply on POS Pro locations"})]})}),(we.eligibility==="specific-customer-segments"||we.eligibility==="specific-customers")&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:we.eligibility==="specific-customer-segments"?"Search customer segments":"Search customers"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:we.eligibility==="specific-customer-segments"?oe:Te,onChange:U=>{if(we.eligibility==="specific-customer-segments"){const J=U.target.value;re(J),Ae(J)}else{const J=U.target.value;G(J),qe(J)}},placeholder:we.eligibility==="specific-customer-segments"?"Search for customer segments...":"Search for customers...",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 pr-10 text-base"}),(we.eligibility==="specific-customer-segments"&&j||we.eligibility==="specific-customers"&&P)&&n.jsx("div",{className:"absolute right-3 top-2",children:n.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:we.eligibility==="specific-customer-segments"?"Search and select customer segments to apply the discount to":"Search and select customers to apply the discount to"}),we.eligibility==="specific-customer-segments"&&x.length>0&&n.jsxs("div",{className:"mt-3",children:[n.jsx(Ao,{label:"Choose Customer Segments",value:W,options:ne,onChange:Z,renderValue:U=>x.filter(ce=>U.includes(ce._id)).map(ce=>ce.name).join(", ")}),n.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[W.length," segment(s) selected"]})]}),we.eligibility==="specific-customers"&&S.length>0&&n.jsxs("div",{className:"mt-3",children:[n.jsx(Ao,{label:"Choose Customers",value:A,options:M,onChange:q,renderValue:U=>S.filter(ce=>U.includes(ce._id)).map(ce=>`${ce.firstName} ${ce.lastName}`).join(", ")}),n.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[A.length," customer(s) selected"]})]})]})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Minimum purchase requirements"}),n.jsxs("fieldset",{className:"mb-3",children:[n.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Minimum Purchase Requirements"}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"minimumPurchase",value:"no-requirements",checked:we.minimumPurchase==="no-requirements",onChange:U=>ze("minimumPurchase",U.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"No minimum requirements"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"minimumPurchase",value:"minimum-amount",checked:we.minimumPurchase==="minimum-amount",onChange:U=>ze("minimumPurchase",U.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Minimum purchase amount"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"minimumPurchase",value:"minimum-quantity",checked:we.minimumPurchase==="minimum-quantity",onChange:U=>ze("minimumPurchase",U.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Minimum quantity of items"})]})]})]}),we.minimumPurchase==="minimum-amount"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Minimum purchase amount"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-2 text-gray-500 text-sm",children:""}),n.jsx("input",{type:"number",value:we.minimumAmount,onChange:U=>ze("minimumAmount",U.target.value),placeholder:"Enter minimum amount",className:"w-full px-3 py-1.5 pl-8 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the minimum purchase amount in rupees"}),n.jsx("p",{className:"mt-2 ml-2 text-xs text-gray-600",children:"Applies only to selected products"})]}),we.minimumPurchase==="minimum-quantity"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Minimum quantity of items"}),n.jsx("input",{type:"number",value:we.minimumQuantity,onChange:U=>ze("minimumQuantity",U.target.value),placeholder:"Enter minimum quantity",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the minimum quantity of items required"}),n.jsx("p",{className:"mt-2 ml-2 text-xs text-gray-600",children:"Applies only to selected products"})]})]}),n.jsx("hr",{className:"my-8 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Combinations"}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:we.productDiscounts,onChange:U=>ze("productDiscounts",U.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Product Discounts"})]}),we.productDiscounts&&n.jsx("p",{className:"mt-1 ml-6 text-xs text-gray-600",children:"Each eligible item in the cart may receive up to one product discount."})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:we.orderDiscounts,onChange:U=>ze("orderDiscounts",U.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Order Discounts"})]}),we.orderDiscounts&&n.jsx("p",{className:"mt-1 ml-6 text-xs text-gray-600",children:"All eligible order discounts will apply in addition to eligible product discounts."})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:we.shippingDiscounts,onChange:U=>ze("shippingDiscounts",U.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Shipping Discounts"})]}),we.shippingDiscounts&&n.jsx("p",{className:"mt-1 ml-6 text-xs text-gray-600",children:"The largest eligible shipping discount will apply in addition to eligible product discounts."})]}),(we.productDiscounts||we.orderDiscounts||we.shippingDiscounts)&&n.jsx("div",{className:"mt-3 p-3 bg-white/95 border border-gray-200",children:n.jsx("p",{className:"text-xs text-gray-600",children:"This discount won't combine with any other discount at checkout."})})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Active dates"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Start date"}),n.jsx("input",{type:"date",value:we.startDate,onChange:U=>ze("startDate",U.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Select the start date for the discount"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Start time (IST)"}),n.jsx("input",{type:"time",value:we.startTime,onChange:U=>ze("startTime",U.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Select the start time in Indian Standard Time"})]}),n.jsx("div",{className:"col-span-full",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:we.setEndDate,onChange:U=>ze("setEndDate",U.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Set end date"})]})}),we.setEndDate&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"End date"}),n.jsx("input",{type:"date",value:we.endDate,onChange:U=>ze("endDate",U.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Select the end date for the discount"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"End time (IST)"}),n.jsx("input",{type:"time",value:we.endTime,onChange:U=>ze("endTime",U.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Select the end time in Indian Standard Time"})]})]})]})]}),we.method==="discount-code"&&n.jsxs(n.Fragment,{children:[n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Sales channel access"}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:we.allowDiscountOnChannels,onChange:U=>ze("allowDiscountOnChannels",U.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Allow discount to be featured on selected channels"})]})]})]}),we.method==="discount-code"&&n.jsxs(n.Fragment,{children:[n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Maximum discount uses"}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:we.limitTotalUses,onChange:U=>ze("limitTotalUses",U.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Limit number of times this discount can be used in total"})]}),we.limitTotalUses&&n.jsxs("div",{className:"ml-6 mt-2 max-w-xs",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Total uses limit"}),n.jsx("input",{type:"number",value:we.totalUsesLimit,onChange:U=>ze("totalUsesLimit",U.target.value),placeholder:"Enter maximum number of uses",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the maximum number of times this discount can be used"})]})]}),n.jsx("div",{children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:we.limitOneUsePerCustomer,onChange:U=>ze("limitOneUsePerCustomer",U.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Limit to one use per customer"})]})})]})]}),n.jsxs("div",{className:"flex gap-2 justify-end mt-4",children:[n.jsx("button",{type:"button",onClick:We,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsxs("button",{type:"submit",disabled:e,className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:[e&&n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e?"Creating...":"Create Discount"]})]})]})})]})})},$fe=({customerBuys:a,quantity:r,amount:e,anyItemsFrom:t,customerGetsQuantity:s,customerGetsAnyItemsFrom:o,value:i,eligibility:l,allowDiscountOnChannels:c,limitTotalUses:d,totalUsesLimit:h,limitOneUsePerCustomer:m,productDiscounts:y,orderDiscounts:x,shippingDiscounts:b,startDate:v,startTime:j,setEndDate:S,endDate:k,endTime:N,createdAt:P,updatedAt:R})=>{const F=z=>z?"Yes":"No";return n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Summary"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Customer buys"}),n.jsxs("p",{className:"text-sm text-gray-900",children:[a,a==="minimum-quantity"&&r?` (${r})`:a==="minimum-amount"&&e?` (${e})`:""]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Any items from"}),n.jsx("p",{className:"text-sm text-gray-900",children:t})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Customer gets quantity"}),n.jsx("p",{className:"text-sm text-gray-900",children:s})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Gets from"}),n.jsx("p",{className:"text-sm text-gray-900",children:o})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Value"}),n.jsx("p",{className:"text-sm text-gray-900",children:i})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Eligibility"}),n.jsx("p",{className:"text-sm text-gray-900",children:l})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Allow discount on channels"}),n.jsx("p",{className:"text-sm text-gray-900",children:F(c)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Limit total uses"}),n.jsx("p",{className:"text-sm text-gray-900",children:d?`Yes (${h??"-"})`:"No"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Limit one use per customer"}),n.jsx("p",{className:"text-sm text-gray-900",children:F(m)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Combinations"}),n.jsxs("p",{className:"text-sm text-gray-900",children:["Product: ",F(y),"  Order: ",F(x),"  Shipping: ",F(b)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Active dates"}),n.jsxs("p",{className:"text-sm text-gray-900",children:[[v,j].filter(Boolean).join(" ")||"-","  ",S?[k,N].filter(Boolean).join(" ")||"-":"No end date"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Created / Updated"}),n.jsxs("p",{className:"text-sm text-gray-900",children:[P?new Date(P).toLocaleDateString():"-"," / ",R?new Date(R).toLocaleDateString():"-"]})]})]})]})},Vfe=({buysProducts:a,buysCollections:r,getsProducts:e,getsCollections:t,segments:s,customers:o})=>n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Targets"}),n.jsxs("div",{className:"mb-3",children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1.5",children:"Buys - Products"}),a.length>0?n.jsx(ec,{items:a.map(i=>({key:i._id,label:i.title}))}):n.jsx("p",{className:"text-xs text-gray-600",children:"None"})]}),n.jsx("hr",{className:"my-3 border-gray-200"}),n.jsxs("div",{className:"mb-3",children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1.5",children:"Buys - Collections"}),r.length>0?n.jsx(ec,{items:r.map(i=>({key:i._id,label:i.title}))}):n.jsx("p",{className:"text-xs text-gray-600",children:"None"})]}),n.jsx("hr",{className:"my-3 border-gray-200"}),n.jsxs("div",{className:"mb-3",children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1.5",children:"Gets - Products"}),e.length>0?n.jsx(ec,{items:e.map(i=>({key:i._id,label:i.title}))}):n.jsx("p",{className:"text-xs text-gray-600",children:"None"})]}),n.jsx("hr",{className:"my-3 border-gray-200"}),n.jsxs("div",{className:"mb-3",children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1.5",children:"Gets - Collections"}),t.length>0?n.jsx(ec,{items:t.map(i=>({key:i._id,label:i.title}))}):n.jsx("p",{className:"text-xs text-gray-600",children:"None"})]}),n.jsx("hr",{className:"my-3 border-gray-200"}),n.jsxs("div",{className:"mb-3",children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1.5",children:"Customer Segments"}),s.length>0?n.jsx(ec,{items:s.map(i=>({key:i._id,label:i.name}))}):n.jsx("p",{className:"text-xs text-gray-600",children:"None"})]}),n.jsx("hr",{className:"my-3 border-gray-200"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1.5",children:"Customers"}),o.length>0?n.jsx(ec,{items:o.map(i=>({key:i._id,label:i.name}))}):n.jsx("p",{className:"text-xs text-gray-600",children:"None"})]})]}),Wfe=()=>{const{id:a}=qa(),r=mr(),{discounts:e}=ZS(),t=f.useMemo(()=>e.find(y=>y._id===a),[e,a]),s=f.useCallback(()=>{r("/discounts")},[r]);if(!t)return n.jsx(pr,{children:n.jsx(lw,{})});const o=t.discountedValue==="percentage"?`${t.discountedPercentage??0}%`:t.discountedValue==="amount"?`${t.discountedAmount??0}`:"Free",i=(t.buysProductIds||[]).map(y=>typeof y=="string"?{_id:y,title:y}:{_id:y._id,title:y.title||y._id}),l=(t.buysCollectionIds||[]).map(y=>typeof y=="string"?{_id:y,title:y}:{_id:y._id,title:y.title||y._id}),c=(t.getsProductIds||[]).map(y=>typeof y=="string"?{_id:y,title:y}:{_id:y._id,title:y.title||y._id}),d=(t.getsCollectionIds||[]).map(y=>typeof y=="string"?{_id:y,title:y}:{_id:y._id,title:y.title||y._id}),h=(t.targetCustomerSegmentIds||[]).map(y=>typeof y=="string"?{_id:y,name:y}:{_id:y._id,name:y.name||y._id}),m=(t.targetCustomerIds||[]).map(y=>typeof y=="string"?{_id:y,name:y}:{_id:y._id,name:`${y.firstName||""} ${y.lastName||""}`.trim()||y.email||y._id});return n.jsx(pr,{children:n.jsx("div",{className:"min-h-screen",children:n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx(cw,{method:t.method,discountCode:t.discountCode,title:t.title,value:o,status:t.status,onBack:s}),n.jsx($fe,{customerBuys:t.customerBuys,quantity:t.quantity,amount:t.amount,anyItemsFrom:t.anyItemsFrom,customerGetsQuantity:t.customerGetsQuantity,customerGetsAnyItemsFrom:t.customerGetsAnyItemsFrom,value:o,eligibility:t.eligibility,allowDiscountOnChannels:t.allowDiscountOnChannels,limitTotalUses:t.limitTotalUses,totalUsesLimit:t.totalUsesLimit,limitOneUsePerCustomer:t.limitOneUsePerCustomer,productDiscounts:t.productDiscounts,orderDiscounts:t.orderDiscounts,shippingDiscounts:t.shippingDiscounts,startDate:t.startDate,startTime:t.startTime,setEndDate:t.setEndDate,endDate:t.endDate,endTime:t.endTime,createdAt:t.createdAt,updatedAt:t.updatedAt}),n.jsx(Vfe,{buysProducts:i,buysCollections:l,getsProducts:c,getsCollections:d,segments:h,customers:m})]})})})})},Hfe=()=>{const a=mr(),{activeStoreId:r}=fn(),{searchBasic:e,loading:t}=dc(),{searchCollections:s,loading:o,collections:i}=gp(),{segments:l,searchCustomerSegments:c,fetchSegmentsByStoreId:d,loading:h}=im(),{customers:m,searchCustomers:y,fetchCustomersByStoreId:x,loading:b}=Hd(),{createDiscount:v,loading:j,error:S}=ZS(),[k,N]=f.useState({method:"discount-code",discountCode:"",title:"",allowDiscountOnChannels:!1,customerBuys:"minimum-quantity",quantity:"",amount:"",anyItemsFrom:"specific-products",searchQuery:"",customerGetsQuantity:"",customerGetsAnyItemsFrom:"specific-products",customerGetsSearchQuery:"",discountedValue:"free",discountedAmount:"",discountedPercentage:"",setMaxUsersPerOrder:!1,maxUsersPerOrder:"",eligibility:"all-customers",eligibilitySearchQuery:"",applyOnPOSPro:!1,limitTotalUses:!1,totalUsesLimit:"",limitOneUsePerCustomer:!1,productDiscounts:!1,orderDiscounts:!1,shippingDiscounts:!1,startDate:"",startTime:"",setEndDate:!1,endDate:"",endTime:""}),[P,R]=f.useState([]),[F,z]=f.useState([]),[H,V]=f.useState([]),[W,Z]=f.useState([]),[A,q]=f.useState([]),[I,K]=f.useState([]),[D,Q]=f.useState([]),[oe,re]=f.useState([]),[Te,G]=f.useState(""),[Y,Se]=f.useState(""),fe=f.useCallback((M,U)=>{N(J=>({...J,[M]:U}))},[]),Ee=f.useCallback((()=>{let M;return async(U,J)=>{window.clearTimeout(M),M=window.setTimeout(async()=>{if(r){if(!U.trim()){J==="buy"?R([]):Z([]);return}try{const ue=(await e({q:U,storeId:r})).map(xe=>({_id:xe._id,title:xe.title,sku:xe.sku,imageUrl:xe.imageUrl}));J==="buy"?R(ue):Z(ue)}catch{}}},300)}})(),[r,e]),Ae=f.useCallback((()=>{let M;return async U=>{window.clearTimeout(M),M=window.setTimeout(async()=>{if(r)try{await s(r,U||"",1,10)}catch{}},300)}})(),[r,s]),qe=f.useCallback((()=>{let M;return async U=>{window.clearTimeout(M),M=window.setTimeout(async()=>{if(r)if(U.trim())try{await c(r,U)}catch{}else try{await d(r)}catch{}},300)}})(),[r,c,d]),we=f.useCallback((()=>{let M;return async U=>{window.clearTimeout(M),M=window.setTimeout(async()=>{if(r)if(U.trim())try{await y(r,U)}catch{}else try{await x(r)}catch{}},300)}})(),[r,y,x]),Oe=f.useCallback(()=>{a("/discounts?createDiscountModal=open")},[a]),ze=f.useCallback(async M=>{M.preventDefault();try{const U={storeId:r,method:k.method,...k.method==="discount-code"?{discountCode:k.discountCode}:{},...k.method==="automatic"?{title:k.title}:{},allowDiscountOnChannels:k.allowDiscountOnChannels,customerBuys:k.customerBuys,...k.customerBuys==="minimum-quantity"?{quantity:Number(k.quantity)||0}:{},...k.customerBuys==="minimum-amount"?{amount:Number(k.amount)||0}:{},anyItemsFrom:k.anyItemsFrom,customerGetsQuantity:Number(k.customerGetsQuantity)||1,customerGetsAnyItemsFrom:k.customerGetsAnyItemsFrom,discountedValue:k.discountedValue,...k.discountedValue==="amount"?{discountedAmount:Number(k.discountedAmount)||0}:{},...k.discountedValue==="percentage"?{discountedPercentage:Number(k.discountedPercentage)||0}:{},setMaxUsersPerOrder:k.setMaxUsersPerOrder,...k.setMaxUsersPerOrder?{maxUsersPerOrder:Number(k.maxUsersPerOrder)||0}:{},eligibility:k.eligibility,applyOnPOSPro:k.applyOnPOSPro,limitTotalUses:k.limitTotalUses,...k.limitTotalUses?{totalUsesLimit:Number(k.totalUsesLimit)||0}:{},limitOneUsePerCustomer:k.limitOneUsePerCustomer,productDiscounts:k.productDiscounts,orderDiscounts:k.orderDiscounts,shippingDiscounts:k.shippingDiscounts,startDate:k.startDate||void 0,startTime:k.startTime||void 0,setEndDate:k.setEndDate,endDate:k.endDate||void 0,endTime:k.endTime||void 0,status:"active",buysProductIds:F,buysCollectionIds:H,getsProductIds:A,getsCollectionIds:I,targetCustomerSegmentIds:D,targetCustomerIds:oe};(await v(U)).success&&a("/discounts")}catch{}},[k,F,H,A,I,D,oe,r,v,a]),We=[{value:"specific-products",label:"Specific products"},{value:"specific-collections",label:"Specific collections"}],pt=P.map(M=>({value:M._id,label:M.title})),Pt=i.map(M=>({value:M._id,label:M.title})),ee=W.map(M=>({value:M._id,label:M.title})),Ne=i.map(M=>({value:M._id,label:M.title})),Ie=l.map(M=>({value:M._id,label:M.name})),ne=m.map(M=>({value:M._id,label:`${M.firstName} ${M.lastName}`.trim()||M.email,secondaryText:M.email}));return n.jsx(pr,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:Oe,className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(Hn,{className:"w-4 h-4"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Buy X get Y"})]})}),n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsxs("form",{onSubmit:ze,children:[S&&n.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 flex items-center justify-between",children:[n.jsx("p",{className:"text-sm text-red-800",children:S}),n.jsx("button",{type:"button",onClick:()=>{},className:"text-red-600 hover:text-red-800",children:n.jsx(xs,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Method"}),n.jsxs("fieldset",{className:"mb-3",children:[n.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Discount Method"}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"method",value:"discount-code",checked:k.method==="discount-code",onChange:M=>fe("method",M.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Discount code"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"method",value:"automatic",checked:k.method==="automatic",onChange:M=>fe("method",M.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Automatic discount"})]})]})]}),k.method==="discount-code"&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Discount code"}),n.jsx("input",{type:"text",value:k.discountCode,onChange:M=>fe("discountCode",M.target.value),placeholder:"Enter discount code",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Customers will enter this code at checkout"})]}),k.method==="automatic"&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Title"}),n.jsx("input",{type:"text",value:k.title,onChange:M=>fe("title",M.target.value),placeholder:"Enter discount title",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"This title will be shown to customers"})]})]}),k.method==="discount-code"&&n.jsxs(n.Fragment,{children:[n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Sales channel access"}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:k.allowDiscountOnChannels,onChange:M=>fe("allowDiscountOnChannels",M.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Allow discount to be featured on selected channels"})]})]})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:k.customerBuys==="minimum-amount"?"Customer spends":"Customer buys"}),n.jsxs("fieldset",{className:"mb-3",children:[n.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:k.customerBuys==="minimum-amount"?"Customer spends":"Customer buys"}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"customerBuys",value:"minimum-quantity",checked:k.customerBuys==="minimum-quantity",onChange:M=>fe("customerBuys",M.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Minimum quantity of items"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"customerBuys",value:"minimum-amount",checked:k.customerBuys==="minimum-amount",onChange:M=>fe("customerBuys",M.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Minimum purchase amount"})]})]})]}),(k.customerBuys==="minimum-quantity"||k.customerBuys==="minimum-amount")&&n.jsx("div",{className:"mt-3",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:k.customerBuys==="minimum-quantity"?"Quantity":"Amount"}),k.customerBuys==="minimum-amount"?n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-2 text-gray-500 text-sm",children:""}),n.jsx("input",{type:"number",value:k.amount,onChange:M=>fe("amount",M.target.value),placeholder:"Enter minimum amount",className:"w-full px-3 py-1.5 pl-8 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"})]}):n.jsx("input",{type:"number",value:k.quantity,onChange:M=>fe("quantity",M.target.value),placeholder:"Enter minimum quantity",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:k.customerBuys==="minimum-quantity"?"Enter the minimum quantity of items required":"Enter the minimum purchase amount in rupees"})]}),n.jsx("div",{children:n.jsx(Us,{label:"Any items from",value:k.anyItemsFrom,options:We,onChange:M=>fe("anyItemsFrom",M)})}),n.jsxs("div",{className:"col-span-full",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:k.anyItemsFrom==="specific-products"?"Search products":"Search collections"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:k.searchQuery,onChange:M=>{const U=M.target.value;fe("searchQuery",U),k.anyItemsFrom==="specific-products"?Ee(U,"buy"):Ae(U)},placeholder:k.anyItemsFrom==="specific-products"?"Search for products...":"Search for collections...",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 pr-10 text-base"}),(k.anyItemsFrom==="specific-products"&&t||k.anyItemsFrom==="specific-collections"&&o)&&n.jsx("div",{className:"absolute right-3 top-2",children:n.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:k.anyItemsFrom==="specific-products"?"Search and select products to apply the discount to":"Search and select collections to apply the discount to"})]}),k.anyItemsFrom==="specific-products"&&n.jsxs("div",{className:"col-span-full",children:[n.jsx(Ao,{label:"Choose Products",value:F,options:pt,onChange:z,renderValue:M=>P.filter(J=>M.includes(J._id)).map(J=>J.title).join(", ")}),n.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[F.length," product(s) selected"]})]}),k.anyItemsFrom==="specific-collections"&&n.jsxs("div",{className:"col-span-full",children:[n.jsx(Ao,{label:"Choose Collections",value:H,options:Pt,onChange:V,renderValue:M=>i.filter(J=>M.includes(J._id)).map(J=>J.title).join(", ")}),n.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[H.length," collection(s) selected"]})]})]})})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Customer gets"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Quantity"}),n.jsx("input",{type:"number",value:k.customerGetsQuantity,onChange:M=>fe("customerGetsQuantity",M.target.value),placeholder:"Enter quantity",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the quantity of items customers will get"})]}),n.jsx("div",{children:n.jsx(Us,{label:"Any items from",value:k.customerGetsAnyItemsFrom,options:We,onChange:M=>fe("customerGetsAnyItemsFrom",M)})}),n.jsxs("div",{className:"col-span-full",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:k.customerGetsAnyItemsFrom==="specific-products"?"Search products":"Search collections"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:k.customerGetsSearchQuery,onChange:M=>{const U=M.target.value;fe("customerGetsSearchQuery",U),k.customerGetsAnyItemsFrom==="specific-products"?Ee(U,"get"):Ae(U)},placeholder:k.customerGetsAnyItemsFrom==="specific-products"?"Search for products...":"Search for collections...",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 pr-10 text-base"}),(k.customerGetsAnyItemsFrom==="specific-products"&&t||k.customerGetsAnyItemsFrom==="specific-collections"&&o)&&n.jsx("div",{className:"absolute right-3 top-2",children:n.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:k.customerGetsAnyItemsFrom==="specific-products"?"Search and select products to apply the discount to":"Search and select collections to apply the discount to"})]}),k.customerGetsAnyItemsFrom==="specific-products"&&n.jsxs("div",{className:"col-span-full",children:[n.jsx(Ao,{label:"Choose Products",value:A,options:ee,onChange:q,renderValue:M=>W.filter(J=>M.includes(J._id)).map(J=>J.title).join(", ")}),n.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[A.length," product(s) selected"]})]}),k.customerGetsAnyItemsFrom==="specific-collections"&&n.jsxs("div",{className:"col-span-full",children:[n.jsx(Ao,{label:"Choose Collections",value:I,options:Ne,onChange:K,renderValue:M=>i.filter(J=>M.includes(J._id)).map(J=>J.title).join(", ")}),n.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[I.length," collection(s) selected"]})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("h3",{className:"text-base font-medium mb-3 text-gray-900",children:"At a discounted value"}),n.jsxs("fieldset",{className:"mb-3",children:[n.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Discounted Value"}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"discountedValue",value:"free",checked:k.discountedValue==="free",onChange:M=>fe("discountedValue",M.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Free"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"discountedValue",value:"amount",checked:k.discountedValue==="amount",onChange:M=>fe("discountedValue",M.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Amount of each"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"discountedValue",value:"percentage",checked:k.discountedValue==="percentage",onChange:M=>fe("discountedValue",M.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Percentage"})]})]})]}),k.discountedValue==="amount"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Amount"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-2 text-gray-500 text-sm",children:""}),n.jsx("input",{type:"number",value:k.discountedAmount,onChange:M=>fe("discountedAmount",M.target.value),placeholder:"Enter amount",className:"w-full px-3 py-1.5 pl-8 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the amount in rupees"})]}),n.jsx("p",{className:"mt-2 text-xs text-gray-600",children:"For multiple quantities, the discount amount will be taken off each eligible item."})]}),k.discountedValue==="percentage"&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Percentage"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",value:k.discountedPercentage,onChange:M=>fe("discountedPercentage",M.target.value),placeholder:"Enter percentage",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 pr-8 text-base"}),n.jsx("span",{className:"absolute right-3 top-2 text-gray-500 text-sm",children:"%"})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the percentage discount"})]}),n.jsxs("div",{className:"mt-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:k.setMaxUsersPerOrder,onChange:M=>fe("setMaxUsersPerOrder",M.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Set a maximum number of users per order"})]}),k.setMaxUsersPerOrder&&n.jsxs("div",{className:"ml-6 mt-2",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Maximum number of users per order"}),n.jsx("input",{type:"number",value:k.maxUsersPerOrder,onChange:M=>fe("maxUsersPerOrder",M.target.value),placeholder:"Enter maximum number",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the maximum number of users per order"})]})]})]})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-1 text-gray-900",children:"Eligibility"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Available on all sales channels"}),n.jsxs("fieldset",{className:"mb-3",children:[n.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Customer Eligibility"}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"eligibility",value:"all-customers",checked:k.eligibility==="all-customers",onChange:M=>fe("eligibility",M.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"All customers"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"eligibility",value:"specific-customer-segments",checked:k.eligibility==="specific-customer-segments",onChange:M=>fe("eligibility",M.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Specific customer segments"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"eligibility",value:"specific-customers",checked:k.eligibility==="specific-customers",onChange:M=>fe("eligibility",M.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Specific customers"})]})]})]}),k.method==="automatic"&&k.eligibility==="all-customers"&&n.jsx("div",{className:"ml-2 mt-2",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:k.applyOnPOSPro,onChange:M=>fe("applyOnPOSPro",M.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Apply on POS Pro locations"})]})}),(k.eligibility==="specific-customer-segments"||k.eligibility==="specific-customers")&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:k.eligibility==="specific-customer-segments"?"Search customer segments":"Search customers"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:k.eligibility==="specific-customer-segments"?Te:Y,onChange:M=>{const U=M.target.value;k.eligibility==="specific-customer-segments"?(G(U),qe(U)):(Se(U),we(U))},placeholder:k.eligibility==="specific-customer-segments"?"Search for customer segments...":"Search for customers...",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 pr-10 text-base"}),(k.eligibility==="specific-customer-segments"&&h||k.eligibility==="specific-customers"&&b)&&n.jsx("div",{className:"absolute right-3 top-2",children:n.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:k.eligibility==="specific-customer-segments"?"Search and select customer segments to apply the discount to":"Search and select customers to apply the discount to"}),k.eligibility==="specific-customer-segments"&&l.length>0&&n.jsxs("div",{className:"mt-3",children:[n.jsx(Ao,{label:"Choose Customer Segments",value:D,options:Ie,onChange:Q,renderValue:M=>l.filter(U=>M.includes(U._id)).map(U=>U.name).join(", ")}),n.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[D.length," segment(s) selected"]})]}),k.eligibility==="specific-customers"&&m.length>0&&n.jsxs("div",{className:"mt-3",children:[n.jsx(Ao,{label:"Choose Customers",value:oe,options:ne,onChange:re,renderValue:M=>m.filter(U=>M.includes(U._id)).map(U=>`${U.firstName} ${U.lastName}`.trim()||U.email).join(", ")}),n.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[oe.length," customer(s) selected"]})]})]})]}),k.method==="discount-code"&&n.jsxs(n.Fragment,{children:[n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Maximum discount uses"}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:k.limitTotalUses,onChange:M=>fe("limitTotalUses",M.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Limit number of times this discount can be used in total"})]}),k.limitTotalUses&&n.jsxs("div",{className:"ml-6 mt-2",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Total uses limit"}),n.jsx("input",{type:"number",value:k.totalUsesLimit,onChange:M=>fe("totalUsesLimit",M.target.value),placeholder:"Enter maximum number of uses",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the maximum number of times this discount can be used"})]})]}),n.jsx("div",{children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:k.limitOneUsePerCustomer,onChange:M=>fe("limitOneUsePerCustomer",M.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Limit to one use per customer"})]})})]})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Combinations"}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:k.productDiscounts,onChange:M=>fe("productDiscounts",M.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Product Discounts"})]}),k.productDiscounts&&n.jsx("p",{className:"mt-1 ml-6 text-xs text-gray-600",children:"Each eligible item in the cart may receive up to one product discount."})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:k.orderDiscounts,onChange:M=>fe("orderDiscounts",M.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Order Discounts"})]}),k.orderDiscounts&&n.jsx("p",{className:"mt-1 ml-6 text-xs text-gray-600",children:"All eligible order discounts will apply in addition to eligible product discounts."})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:k.shippingDiscounts,onChange:M=>fe("shippingDiscounts",M.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Shipping Discounts"})]}),k.shippingDiscounts&&n.jsx("p",{className:"mt-1 ml-6 text-xs text-gray-600",children:"The largest eligible shipping discount will apply in addition to eligible product discounts."})]}),(k.productDiscounts||k.orderDiscounts||k.shippingDiscounts)&&n.jsx("div",{className:"mt-3 p-3 bg-white/95 border border-gray-200",children:n.jsx("p",{className:"text-xs text-gray-600",children:"This discount won't combine with any other discount at checkout."})})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Active dates"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Start date"}),n.jsx("input",{type:"date",value:k.startDate,onChange:M=>fe("startDate",M.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Start time (IST)"}),n.jsx("input",{type:"time",value:k.startTime,onChange:M=>fe("startTime",M.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Indian Standard Time"})]})]}),n.jsx("div",{className:"mt-3",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:k.setEndDate,onChange:M=>fe("setEndDate",M.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Set end date"})]})}),k.setEndDate&&n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mt-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"End date"}),n.jsx("input",{type:"date",value:k.endDate,onChange:M=>fe("endDate",M.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"End time (IST)"}),n.jsx("input",{type:"time",value:k.endTime,onChange:M=>fe("endTime",M.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Indian Standard Time"})]})]})]}),n.jsxs("div",{className:"flex gap-2 justify-end mt-4",children:[n.jsx("button",{type:"button",onClick:Oe,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsxs("button",{type:"submit",disabled:j,className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:[j&&n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),j?"Creating...":"Create Discount"]})]})]})})]})})},qfe=({appliesTo:a,eligibility:r,minimumPurchase:e,minimumQuantity:t})=>n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Summary"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Applies to"}),n.jsx("p",{className:"text-sm text-gray-900",children:a})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Eligibility"}),n.jsx("p",{className:"text-sm text-gray-900",children:r})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Minimum purchase"}),n.jsx("p",{className:"text-sm text-gray-900",children:e||"-"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Minimum quantity"}),n.jsx("p",{className:"text-sm text-gray-900",children:t??"-"})]})]})]}),Gfe=({valueType:a,value:r,oncePerOrder:e,allowDiscountOnChannels:t,limitTotalUses:s,totalUsesLimit:o,limitOneUsePerCustomer:i,productDiscounts:l,orderDiscounts:c,shippingDiscounts:d})=>{const h=m=>m?"Yes":"No";return n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Value & Limits"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Value type"}),n.jsx("p",{className:"text-sm text-gray-900",children:a})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Value"}),n.jsx("p",{className:"text-sm text-gray-900",children:r})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Once per order"}),n.jsx("p",{className:"text-sm text-gray-900",children:h(e)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Allow discount on channels"}),n.jsx("p",{className:"text-sm text-gray-900",children:h(t)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Limit total uses"}),n.jsx("p",{className:"text-sm text-gray-900",children:s?`Yes (${o??"-"})`:"No"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Limit one use per customer"}),n.jsx("p",{className:"text-sm text-gray-900",children:h(i)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Product discounts combinable"}),n.jsx("p",{className:"text-sm text-gray-900",children:h(l)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Order discounts combinable"}),n.jsx("p",{className:"text-sm text-gray-900",children:h(c)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Shipping discounts combinable"}),n.jsx("p",{className:"text-sm text-gray-900",children:h(d)})]})]})]})},Kfe=({startDate:a,startTime:r,setEndDate:e,endDate:t,endTime:s,createdAt:o,updatedAt:i})=>{const l=c=>c?new Date(c).toLocaleDateString():"-";return n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Active Dates"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Start"}),n.jsx("p",{className:"text-sm text-gray-900",children:[a,r].filter(Boolean).join(" ")||"-"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"End"}),n.jsx("p",{className:"text-sm text-gray-900",children:e?[t,s].filter(Boolean).join(" ")||"-":"No end date"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Created"}),n.jsx("p",{className:"text-sm text-gray-900",children:l(o)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Updated"}),n.jsx("p",{className:"text-sm text-gray-900",children:l(i)})]})]})]})},Yfe=({targetProductDetails:a,targetProductIds:r,targetCollectionDetails:e,targetCollectionIds:t,targetCustomerSegmentDetails:s,targetCustomerSegmentIds:o,targetCustomerDetails:i,targetCustomerIds:l})=>{const c=d=>n.jsx(ec,{items:d});return n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Targets"}),n.jsxs("div",{className:"mb-3",children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1.5",children:"Products"}),a&&a.length>0?c(a.map(d=>({key:d._id,label:d.title||d._id}))):r&&r.length>0?c(r.map(d=>({key:d,label:d}))):n.jsx("p",{className:"text-xs text-gray-600",children:"None"})]}),n.jsx("hr",{className:"my-3 border-gray-200"}),n.jsxs("div",{className:"mb-3",children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1.5",children:"Collections"}),e&&e.length>0?c(e.map(d=>({key:d._id,label:d.title||d._id}))):t&&t.length>0?c(t.map(d=>({key:d,label:d}))):n.jsx("p",{className:"text-xs text-gray-600",children:"None"})]}),n.jsx("hr",{className:"my-3 border-gray-200"}),n.jsxs("div",{className:"mb-3",children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1.5",children:"Customer Segments"}),s&&s.length>0?c(s.map(d=>({key:d._id,label:d.name||d._id}))):o&&o.length>0?c(o.map(d=>({key:d,label:d}))):n.jsx("p",{className:"text-xs text-gray-600",children:"None"})]}),n.jsx("hr",{className:"my-3 border-gray-200"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1.5",children:"Customers"}),i&&i.length>0?c(i.map(d=>({key:d._id,label:`${d.firstName||""} ${d.lastName||""}`.trim()||d.email||d._id}))):l&&l.length>0?c(l.map(d=>({key:d,label:d}))):n.jsx("p",{className:"text-xs text-gray-600",children:"None"})]})]})},Zfe=()=>{const{id:a}=qa(),r=mr(),{discounts:e}=OS(),t=f.useMemo(()=>e.find(i=>i._id===a),[e,a]),s=f.useCallback(()=>{r("/discounts")},[r]);if(!t)return n.jsx(pr,{children:n.jsx(lw,{})});const o=t.valueType==="percentage"?`${t.percentage??0}%`:`${t.fixedAmount??0}`;return n.jsx(pr,{children:n.jsx("div",{className:"min-h-screen",children:n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx(cw,{method:t.method,discountCode:t.discountCode,title:t.title,value:o,status:t.status,onBack:s}),n.jsx(qfe,{appliesTo:t.appliesTo,eligibility:t.eligibility,minimumPurchase:t.minimumPurchase,minimumQuantity:t.minimumQuantity}),n.jsx(Gfe,{valueType:t.valueType,value:o,oncePerOrder:t.oncePerOrder,allowDiscountOnChannels:t.allowDiscountOnChannels,limitTotalUses:t.limitTotalUses,totalUsesLimit:t.totalUsesLimit,limitOneUsePerCustomer:t.limitOneUsePerCustomer,productDiscounts:t.productDiscounts,orderDiscounts:t.orderDiscounts,shippingDiscounts:t.shippingDiscounts}),n.jsx(Kfe,{startDate:t.startDate,startTime:t.startTime,setEndDate:t.setEndDate,endDate:t.endDate,endTime:t.endTime,createdAt:t.createdAt,updatedAt:t.updatedAt}),n.jsx(Yfe,{targetProductDetails:t.targetProductDetails,targetProductIds:t.targetProductIds,targetCollectionDetails:t.targetCollectionDetails,targetCollectionIds:t.targetCollectionIds,targetCustomerSegmentDetails:t.targetCustomerSegmentDetails,targetCustomerSegmentIds:t.targetCustomerSegmentIds,targetCustomerDetails:t.targetCustomerDetails,targetCustomerIds:t.targetCustomerIds})]})})})})},Xfe=({method:a,discountCode:r,title:e,eligibility:t,applyOnPOSPro:s,status:o,createdAt:i,updatedAt:l})=>{const c=d=>d?"Yes":"No";return n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"General Information"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Method"}),n.jsx("p",{className:"text-sm text-gray-900",children:a})]}),a==="discount-code"&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Code"}),n.jsx("p",{className:"text-sm text-gray-900",children:r})]}),a==="automatic"&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Title"}),n.jsx("p",{className:"text-sm text-gray-900",children:e})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Eligibility"}),n.jsx("p",{className:"text-sm text-gray-900",children:t})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Apply on POS Pro"}),n.jsx("p",{className:"text-sm text-gray-900",children:c(s)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Status"}),n.jsx("p",{className:"text-sm text-gray-900",children:o})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Created At"}),n.jsx("p",{className:"text-sm text-gray-900",children:i?new Date(i).toLocaleDateString():"-"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Last Updated"}),n.jsx("p",{className:"text-sm text-gray-900",children:l?new Date(l).toLocaleDateString():"-"})]})]})]})},Qfe=({countrySelection:a,selectedCountryCodes:r,excludeShippingRates:e,shippingRateLimit:t})=>{const s=o=>o?"Yes":"No";return n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Country & Rates"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Country Selection"}),n.jsx("p",{className:"text-sm text-gray-900",children:a})]}),a==="selected-countries"&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Selected Country Codes"}),n.jsx("p",{className:"text-sm text-gray-900",children:(r||[]).join(", ")||"-"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Exclude Shipping Rates"}),n.jsx("p",{className:"text-sm text-gray-900",children:s(e)})]}),e&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Shipping Rate Limit"}),n.jsx("p",{className:"text-sm text-gray-900",children:t})]})]})]})},Jfe=({minimumPurchase:a,minimumAmount:r,minimumQuantity:e})=>n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Minimum Purchase"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Requirement"}),n.jsx("p",{className:"text-sm text-gray-900",children:a})]}),a==="minimum-amount"&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Amount"}),n.jsxs("p",{className:"text-sm text-gray-900",children:["",r]})]}),a==="minimum-quantity"&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Quantity"}),n.jsx("p",{className:"text-sm text-gray-900",children:e})]})]})]}),epe=({allowDiscountOnChannels:a,limitTotalUses:r,totalUsesLimit:e,limitOneUsePerCustomer:t})=>{const s=o=>o?"Yes":"No";return n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Sales Channel & Limits"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Allow on Channels"}),n.jsx("p",{className:"text-sm text-gray-900",children:s(a)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Limit Total Uses"}),n.jsx("p",{className:"text-sm text-gray-900",children:s(r)})]}),r&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Total Uses Limit"}),n.jsx("p",{className:"text-sm text-gray-900",children:e})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"One Use Per Customer"}),n.jsx("p",{className:"text-sm text-gray-900",children:s(t)})]})]})]})},tpe=({productDiscounts:a,orderDiscounts:r})=>{const e=t=>t?"Yes":"No";return n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Combinations"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Product Discounts"}),n.jsx("p",{className:"text-sm text-gray-900",children:e(a)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Order Discounts"}),n.jsx("p",{className:"text-sm text-gray-900",children:e(r)})]})]})]})},rpe=({startDate:a,startTime:r,setEndDate:e,endDate:t,endTime:s})=>{const o=i=>i?"Yes":"No";return n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Active Dates"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Start Date"}),n.jsxs("p",{className:"text-sm text-gray-900",children:[a," ",r?`at ${r}`:""]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Set End Date"}),n.jsx("p",{className:"text-sm text-gray-900",children:o(e)})]}),e&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"End Date"}),n.jsxs("p",{className:"text-sm text-gray-900",children:[t," ",s?`at ${s}`:""]})]})]})]})},npe=({targetCustomerSegmentIds:a,segmentLabel:r})=>!a||a.length===0?null:n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Target Customer Segments"}),n.jsx(ec,{items:a.map((e,t)=>({key:e?._id||t.toString(),label:r(e)}))})]}),ape=({targetCustomerIds:a,customerLabel:r})=>!a||a.length===0?null:n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Target Customers"}),n.jsx(ec,{items:a.map((e,t)=>({key:e?._id||t.toString(),label:r(e)}))})]}),spe=()=>{const{id:a}=qa(),r=mr(),{activeStoreId:e}=fn(),{discounts:t,fetchDiscountsByStoreId:s,loading:o,error:i}=XS(),l=t.find(m=>m._id===a);f.useEffect(()=>{e&&!t.length&&s(e)},[e,t.length,s]);const c=f.useCallback(()=>{r("/discounts")},[r]);f.useCallback(m=>m?"Yes":"No",[]);const d=f.useCallback(m=>m?.name||m?._id,[]),h=f.useCallback(m=>`${m?.firstName||""} ${m?.lastName||""}`.trim()||m?.email||m?._id,[]);return o?n.jsx(pr,{children:n.jsx("div",{className:"flex justify-center py-8",children:n.jsx("div",{className:"w-6 h-6 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})})}):i?n.jsx(pr,{children:n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsx("div",{className:"p-3 bg-red-50 border border-red-200",children:n.jsx("p",{className:"text-sm text-red-800",children:i})})})}):l?n.jsx(pr,{children:n.jsx("div",{className:"min-h-screen",children:n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx(cw,{method:l.method,discountCode:l.discountCode,title:l.title,value:"Free Shipping",status:l.status,onBack:c}),n.jsx(Xfe,{method:l.method,discountCode:l.discountCode,title:l.title,eligibility:l.eligibility,applyOnPOSPro:l.applyOnPOSPro,status:l.status,createdAt:l.createdAt,updatedAt:l.updatedAt}),n.jsx(Qfe,{countrySelection:l.countrySelection,selectedCountryCodes:l.selectedCountryCodes,excludeShippingRates:l.excludeShippingRates,shippingRateLimit:l.shippingRateLimit}),n.jsx(Jfe,{minimumPurchase:l.minimumPurchase,minimumAmount:l.minimumAmount,minimumQuantity:l.minimumQuantity}),n.jsx(epe,{allowDiscountOnChannels:l.allowDiscountOnChannels,limitTotalUses:l.limitTotalUses,totalUsesLimit:l.totalUsesLimit,limitOneUsePerCustomer:l.limitOneUsePerCustomer}),n.jsx(tpe,{productDiscounts:l.productDiscounts,orderDiscounts:l.orderDiscounts}),n.jsx(rpe,{startDate:l.startDate,startTime:l.startTime,setEndDate:l.setEndDate,endDate:l.endDate,endTime:l.endTime}),l.targetCustomerSegmentIds&&l.targetCustomerSegmentIds.length>0&&n.jsx(npe,{targetCustomerSegmentIds:l.targetCustomerSegmentIds,segmentLabel:d}),l.targetCustomerIds&&l.targetCustomerIds.length>0&&n.jsx(ape,{targetCustomerIds:l.targetCustomerIds,customerLabel:h})]})})})}):n.jsx(pr,{children:n.jsx(lw,{})})},ope=()=>{const a=mr(),{createDiscount:r,loading:e,error:t}=XS(),{activeStoreId:s}=fn(),{segments:o,searchCustomerSegments:i,fetchSegmentsByStoreId:l,loading:c}=im(),{customers:d,searchCustomers:h,fetchCustomersByStoreId:m,loading:y}=Hd(),[x,b]=f.useState({method:"discount-code",discountCode:"",title:"",countrySelection:"all-countries",countrySearchQuery:"",excludeShippingRates:!1,shippingRateLimit:"",eligibility:"all-customers",eligibilitySearchQuery:"",applyOnPOSPro:!1,minimumPurchase:"no-requirements",minimumAmount:"",minimumQuantity:"",allowDiscountOnChannels:!1,limitTotalUses:!1,totalUsesLimit:"",limitOneUsePerCustomer:!1,productDiscounts:!1,orderDiscounts:!1,startDate:"",startTime:"",setEndDate:!1,endDate:"",endTime:""}),[v,j]=f.useState(""),[S,k]=f.useState(""),[N,P]=f.useState([]),[R,F]=f.useState([]),[z,H]=f.useState([]),[V,W]=f.useState(ep),Z=f.useCallback((()=>{let G;return Y=>{window.clearTimeout(G),G=window.setTimeout(async()=>{if(s)if(Y.trim())try{await i(s,Y)}catch{}else try{await l(s)}catch{}},300)}})(),[s,i,l]),A=f.useCallback((()=>{let G;return Y=>{window.clearTimeout(G),G=window.setTimeout(async()=>{if(s)if(Y.trim())try{await h(s,Y)}catch{}else try{await m(s)}catch{}},300)}})(),[s,h,m]),q=f.useCallback((G,Y)=>{b(Se=>({...Se,[G]:Y}))},[]),I=f.useCallback(G=>{if(q("countrySearchQuery",G),G.trim()==="")W(ep);else{const Y=ep.filter(Se=>Se.name.toLowerCase().includes(G.toLowerCase()));W(Y)}},[q]);f.useCallback(G=>{z.includes(G)||H(Y=>[...Y,G])},[]);const K=f.useCallback(G=>{H(Y=>Y.filter(Se=>Se!==G))},[]),D=f.useCallback(()=>{a("/discounts?createDiscountModal=open")},[a]),Q=f.useCallback(async G=>{if(G.preventDefault(),!s)return;const Y={storeId:s,method:x.method,discountCode:x.method==="discount-code"&&x.discountCode||void 0,title:x.method==="automatic"&&x.title||void 0,countrySelection:x.countrySelection,selectedCountryCodes:x.countrySelection==="selected-countries"?z:void 0,excludeShippingRates:!!x.excludeShippingRates,shippingRateLimit:x.excludeShippingRates&&x.shippingRateLimit!==""?Number(x.shippingRateLimit):void 0,eligibility:x.eligibility,applyOnPOSPro:!!x.applyOnPOSPro,minimumPurchase:x.minimumPurchase,minimumAmount:x.minimumPurchase==="minimum-amount"&&x.minimumAmount!==""?Number(x.minimumAmount):void 0,minimumQuantity:x.minimumPurchase==="minimum-quantity"&&x.minimumQuantity!==""?Number(x.minimumQuantity):void 0,allowDiscountOnChannels:!!x.allowDiscountOnChannels,limitTotalUses:!!x.limitTotalUses,totalUsesLimit:x.limitTotalUses&&x.totalUsesLimit!==""?Number(x.totalUsesLimit):void 0,limitOneUsePerCustomer:!!x.limitOneUsePerCustomer,productDiscounts:!!x.productDiscounts,orderDiscounts:!!x.orderDiscounts,startDate:x.startDate||void 0,startTime:x.startTime||void 0,setEndDate:!!x.setEndDate,endDate:x.setEndDate&&x.endDate||void 0,endTime:x.setEndDate&&x.endTime||void 0,targetCustomerSegmentIds:N.length?N:void 0,targetCustomerIds:R.length?R:void 0};try{(await r(Y)).success&&a("/discounts")}catch{}},[x,z,N,R,s,r,a]);f.useEffect(()=>{j(""),k(""),P([]),F([])},[x.eligibility]);const oe=V.map(G=>({value:G.code,label:`${G.name} (${G.code})`})),re=o.map(G=>({value:G._id,label:G.name})),Te=d.map(G=>({value:G._id,label:`${G.firstName||""} ${G.lastName||""}`.trim()||G.email,secondaryText:G.email}));return n.jsx(pr,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:D,className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(Hn,{className:"w-4 h-4"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Free shipping"})]})}),n.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:n.jsxs("form",{onSubmit:Q,children:[t&&n.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 flex items-center justify-between",children:[n.jsx("p",{className:"text-sm text-red-800",children:t}),n.jsx("button",{type:"button",onClick:()=>{},className:"text-red-600 hover:text-red-800",children:n.jsx(xs,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Method"}),n.jsxs("fieldset",{className:"mb-3",children:[n.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Discount Method"}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"method",value:"discount-code",checked:x.method==="discount-code",onChange:G=>q("method",G.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Discount code"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"method",value:"automatic",checked:x.method==="automatic",onChange:G=>q("method",G.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Automatic discount"})]})]})]}),x.method==="discount-code"&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Discount code"}),n.jsx("input",{type:"text",value:x.discountCode,onChange:G=>q("discountCode",G.target.value),placeholder:"Enter discount code",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Customers will enter this code at checkout"})]}),x.method==="automatic"&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Title"}),n.jsx("input",{type:"text",value:x.title,onChange:G=>q("title",G.target.value),placeholder:"Enter discount title",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"This title will be shown to customers"})]})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Country"}),n.jsxs("fieldset",{className:"mb-3",children:[n.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Country Selection"}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"countrySelection",value:"all-countries",checked:x.countrySelection==="all-countries",onChange:G=>q("countrySelection",G.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"All Countries"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"countrySelection",value:"selected-countries",checked:x.countrySelection==="selected-countries",onChange:G=>q("countrySelection",G.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Selected Countries"})]})]})]}),x.countrySelection==="selected-countries"&&n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Search Countries"}),n.jsx("input",{type:"text",value:x.countrySearchQuery,onChange:G=>I(G.target.value),placeholder:"Search for countries...",className:"w-full max-w-md px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Search and select countries to apply the discount to"}),z.length>0&&n.jsxs("div",{className:"mt-3",children:[n.jsxs("p",{className:"text-xs text-gray-600 mb-1.5",children:["Selected Countries (",z.length,"):"]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:z.map(G=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-gray-100 text-gray-700 border border-gray-200 text-xs",children:[R_(G),n.jsx("button",{type:"button",onClick:()=>K(G),className:"hover:text-gray-900",children:n.jsx(xs,{className:"w-3.5 h-3.5"})})]},G))})]}),n.jsxs("div",{className:"mt-3",children:[n.jsx(Ao,{label:"Select Countries",value:z,options:oe,onChange:H,renderValue:G=>G.length===0?"":G.length===1?R_(G[0]):`${G.length} countries selected`}),n.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[z.length," country(ies) selected"]})]})]}),n.jsx("h3",{className:"text-base font-medium mb-3 mt-4 text-gray-900",children:"Shipping Rates"}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:x.excludeShippingRates,onChange:G=>q("excludeShippingRates",G.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Exclude Shipping Rates over a certain amount"})]}),x.excludeShippingRates&&n.jsxs("div",{className:"ml-6 mt-2",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Shipping rate limit"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-2 text-gray-500 text-sm",children:""}),n.jsx("input",{type:"number",value:x.shippingRateLimit,onChange:G=>q("shippingRateLimit",G.target.value),placeholder:"Enter amount",className:"w-full px-3 py-1.5 pl-8 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the maximum shipping rate amount in rupees"})]})]})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-1 text-gray-900",children:"Eligibility"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Available on all sales channels"}),n.jsxs("fieldset",{className:"mb-3",children:[n.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Customer Eligibility"}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"eligibility",value:"all-customers",checked:x.eligibility==="all-customers",onChange:G=>q("eligibility",G.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"All customers"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"eligibility",value:"specific-customer-segments",checked:x.eligibility==="specific-customer-segments",onChange:G=>q("eligibility",G.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Specific customer segments"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"eligibility",value:"specific-customers",checked:x.eligibility==="specific-customers",onChange:G=>q("eligibility",G.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Specific customers"})]})]})]}),x.method==="automatic"&&x.eligibility==="all-customers"&&n.jsx("div",{className:"ml-2 mt-2",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:x.applyOnPOSPro,onChange:G=>q("applyOnPOSPro",G.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Apply on POS Pro locations"})]})}),x.eligibility==="specific-customer-segments"&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Search customer segments"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:v,onChange:G=>{const Y=G.target.value;j(Y),Z(Y)},placeholder:"Search for customer segments...",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 pr-10 text-base"}),c&&n.jsx("div",{className:"absolute right-3 top-2",children:n.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Search and select customer segments to apply the discount to"}),o.length>0&&n.jsxs("div",{className:"mt-3",children:[n.jsx(Ao,{label:"Choose Customer Segments",value:N,options:re,onChange:P,renderValue:G=>o.filter(Y=>G.includes(Y._id)).map(Y=>Y.name).join(", ")}),n.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[N.length," segment(s) selected"]})]})]}),x.eligibility==="specific-customers"&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Search customers"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:S,onChange:G=>{const Y=G.target.value;k(Y),A(Y)},placeholder:"Search for customers...",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 pr-10 text-base"}),y&&n.jsx("div",{className:"absolute right-3 top-2",children:n.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Search and select customers to apply the discount to"}),d.length>0&&n.jsxs("div",{className:"mt-3",children:[n.jsx(Ao,{label:"Choose Customers",value:R,options:Te,onChange:F,renderValue:G=>d.filter(Y=>G.includes(Y._id)).map(Y=>`${Y.firstName||""} ${Y.lastName||""}`.trim()||Y.email).join(", ")}),n.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[R.length," customer(s) selected"]})]})]})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Minimum purchase requirements"}),n.jsxs("fieldset",{className:"mb-3",children:[n.jsx("legend",{className:"text-xs text-gray-600 mb-1.5",children:"Minimum Purchase Requirements"}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"minimumPurchase",value:"no-requirements",checked:x.minimumPurchase==="no-requirements",onChange:G=>q("minimumPurchase",G.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"No minimum requirements"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"minimumPurchase",value:"minimum-amount",checked:x.minimumPurchase==="minimum-amount",onChange:G=>q("minimumPurchase",G.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Minimum purchase amount"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"minimumPurchase",value:"minimum-quantity",checked:x.minimumPurchase==="minimum-quantity",onChange:G=>q("minimumPurchase",G.target.value),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Minimum quantity of items"})]})]})]}),x.minimumPurchase==="minimum-amount"&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Minimum purchase amount"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-2 text-gray-500 text-sm",children:""}),n.jsx("input",{type:"number",value:x.minimumAmount,onChange:G=>q("minimumAmount",G.target.value),placeholder:"Enter minimum amount",className:"w-full px-3 py-1.5 pl-8 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Applies to all products"})]}),x.minimumPurchase==="minimum-quantity"&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Minimum quantity of items"}),n.jsx("input",{type:"number",value:x.minimumQuantity,onChange:G=>q("minimumQuantity",G.target.value),placeholder:"Enter minimum quantity",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Applies to all products"})]})]}),x.method==="discount-code"&&n.jsxs(n.Fragment,{children:[n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Sales channel access"}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:x.allowDiscountOnChannels,onChange:G=>q("allowDiscountOnChannels",G.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Allow discount to be featured on selected channels"})]})]})]}),x.method==="discount-code"&&n.jsxs(n.Fragment,{children:[n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Maximum discount uses"}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:x.limitTotalUses,onChange:G=>q("limitTotalUses",G.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Limit number of times this discount can be used in total"})]}),x.limitTotalUses&&n.jsxs("div",{className:"ml-6 mt-2",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Total uses limit"}),n.jsx("input",{type:"number",value:x.totalUsesLimit,onChange:G=>q("totalUsesLimit",G.target.value),placeholder:"Enter maximum number of uses",className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Enter the maximum number of times this discount can be used"})]})]}),n.jsx("div",{children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:x.limitOneUsePerCustomer,onChange:G=>q("limitOneUsePerCustomer",G.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Limit to one use per customer"})]})})]})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Combinations"}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:x.productDiscounts,onChange:G=>q("productDiscounts",G.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Product Discounts"})]}),x.productDiscounts&&n.jsx("p",{className:"mt-1 ml-6 text-xs text-gray-600",children:"Each eligible item in the cart may receive up to one product discount."})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:x.orderDiscounts,onChange:G=>q("orderDiscounts",G.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Order Discounts"})]}),x.orderDiscounts&&n.jsx("p",{className:"mt-1 ml-6 text-xs text-gray-600",children:"All eligible order discounts will apply in addition to eligible product discounts."})]}),(x.productDiscounts||x.orderDiscounts)&&n.jsx("div",{className:"mt-3 p-3 bg-white/95 border border-gray-200",children:n.jsx("p",{className:"text-xs text-gray-600",children:"This discount won't combine with any other discount at checkout."})})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{className:"mb-6 border border-gray-200 p-4 bg-white/95",children:[n.jsx("h2",{className:"text-base font-medium mb-3 text-gray-900",children:"Active dates"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Start date"}),n.jsx("input",{type:"date",value:x.startDate,onChange:G=>q("startDate",G.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"Start time (IST)"}),n.jsx("input",{type:"time",value:x.startTime,onChange:G=>q("startTime",G.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Indian Standard Time"})]})]}),n.jsx("div",{className:"mt-3",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:x.setEndDate,onChange:G=>q("setEndDate",G.target.checked),className:"w-4 h-4 text-gray-900"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Set end date"})]})}),x.setEndDate&&n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mt-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"End date"}),n.jsx("input",{type:"date",value:x.endDate,onChange:G=>q("endDate",G.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1.5",children:"End time (IST)"}),n.jsx("input",{type:"time",value:x.endTime,onChange:G=>q("endTime",G.target.value),className:"w-full px-3 py-1.5 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 text-base"}),n.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Indian Standard Time"})]})]})]}),n.jsxs("div",{className:"flex gap-2 justify-end mt-4",children:[n.jsx("button",{type:"button",onClick:D,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsxs("button",{type:"submit",disabled:e||!s,className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:[e&&n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e?"Creating...":"Create Discount"]})]})]})})]})})},ipe=({onBack:a})=>{const r=f.useCallback(()=>{a()},[a]);return n.jsxs("div",{className:"flex flex-row items-center gap-3 mb-4 border-b border-gray-200 pb-4",children:[n.jsx("button",{onClick:r,className:"cursor-pointer p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(Hn,{className:"w-5 h-5"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Charges"})]})},lpe=({cell:a,index:r})=>n.jsx("td",{className:`py-3 px-3 text-sm text-gray-900 border-b border-gray-100 ${r===4?"font-medium":""}`,children:a}),cpe=({rowData:a})=>n.jsx("tr",{children:a.map((r,e)=>n.jsx(lpe,{cell:r,index:e},`${r}-${e}`))}),dpe=({header:a})=>n.jsx("th",{className:"text-left py-2 px-3 text-xs font-medium text-gray-700 border-b border-gray-200",children:a}),upe=({headers:a})=>n.jsx("tr",{children:a.map(r=>n.jsx(dpe,{header:r},r))}),fpe=()=>{const a=["Bill number","Date","Charge type","Source","Amount"],r=["#446589948","Nov 17, 2025","Subscription charges","-","0.00"];return n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full border-collapse",children:[n.jsx("thead",{className:"bg-white",children:n.jsx(upe,{headers:a})}),n.jsx("tbody",{children:n.jsx(cpe,{rowData:r})})]})})},ppe=()=>{const a=f.useCallback(()=>{window.history.back()},[]);return n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsx(ipe,{onBack:a}),n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4 mb-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row gap-3 justify-between items-start md:items-center mb-4 border-b border-gray-200 pb-4",children:[n.jsx("div",{className:"flex flex-row gap-2 flex-wrap",children:["Date","Bill number","Charge type"].map(r=>n.jsx("span",{className:"px-2 py-1 border border-gray-200 text-xs font-medium text-gray-700",children:r},r))}),n.jsx("button",{className:"cursor-pointer px-3 py-1.5 bg-gray-900 text-white text-sm hover:bg-gray-800 transition-colors",children:"Export"})]}),n.jsx(fpe,{}),n.jsxs("div",{className:"flex justify-between items-center mt-4 pt-4 border-t border-gray-200",children:[n.jsx("p",{className:"text-xs text-gray-600",children:"Showing 1 result"}),n.jsxs("div",{className:"flex flex-row gap-1",children:[n.jsx("button",{className:"min-w-[32px] px-2 py-1 border border-gray-200 text-xs text-gray-400 cursor-not-allowed",disabled:!0,children:""}),n.jsx("button",{className:"min-w-[32px] px-2 py-1 border border-gray-200 text-xs text-gray-400 cursor-not-allowed",disabled:!0,children:""})]})]})]})]})})},hpe=({open:a,onClose:r,paymentType:e,onPaymentTypeChange:t,country:s,onCountryChange:o,state:i,onStateChange:l,consent:c,onConsentChange:d})=>n.jsx(un,{open:a,onClose:r,title:"Add credit card",maxWidth:"md",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{disabled:!c,className:`px-3 py-1.5 text-sm font-medium text-white transition-colors ${c?"bg-gray-900 hover:bg-gray-800":"bg-gray-400 cursor-not-allowed"}`,children:"Save card"})]}),children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Payment method type"}),n.jsxs("select",{value:e,onChange:t,className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400",children:[n.jsx("option",{value:"Credit card",children:"Credit card"}),n.jsx("option",{value:"Debit card",children:"Debit card"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Card number"}),n.jsx("input",{type:"text",className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Expires"}),n.jsx("input",{type:"text",placeholder:"MM / YY",className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"CVV"}),n.jsx("input",{type:"text",className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]})]}),n.jsx("h3",{className:"text-sm font-medium text-gray-700 mt-2",children:"Billing address"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Country/region"}),n.jsxs("select",{value:s,onChange:o,className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400",children:[n.jsx("option",{value:"India",children:"India"}),n.jsx("option",{value:"United States",children:"United States"})]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"First name"}),n.jsx("input",{type:"text",className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Last name"}),n.jsx("input",{type:"text",className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Address"}),n.jsxs("div",{className:"relative",children:[n.jsx(Ro,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),n.jsx("input",{type:"text",className:"w-full pl-10 pr-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Apartment, suite, etc"}),n.jsx("input",{type:"text",className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"City"}),n.jsx("input",{type:"text",className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"State"}),n.jsxs("select",{value:i,onChange:l,className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400",children:[n.jsx("option",{value:"Andaman and Nicobar Islands",children:"Andaman and Nicobar Islands"}),n.jsx("option",{value:"Delhi",children:"Delhi"}),n.jsx("option",{value:"Maharashtra",children:"Maharashtra"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"PIN code"}),n.jsx("input",{type:"text",className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Phone"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-sm",children:" +91"}),n.jsx("input",{type:"text",className:"w-full pl-16 pr-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Email"}),n.jsx("input",{type:"email",className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx("input",{type:"checkbox",id:"consent",checked:c,onChange:d,className:"mt-1 w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400"}),n.jsx("label",{htmlFor:"consent",className:"text-sm text-gray-900 font-medium",children:"I consent to having my card saved securely for future payments"})]}),c&&n.jsx("div",{className:"bg-blue-50 p-3 border border-blue-200 text-blue-900 text-sm",children:"You will be redirected to Razorpay to finish authentication and may be requested for a one-time mandate for 15,000. This will allow Ziplofy to automatically charge future bills below the mandate amount."})]})}),mpe=({onManage:a})=>{const r=f.useCallback(t=>{a(t)},[a]),e=[{label:"Store address",value:"India",managePath:"/settings/general"},{label:"Currency",value:"INR (Indian Rupee)",managePath:void 0}];return n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Address and currency"}),n.jsx(Oa,{className:"w-4 h-4 text-gray-500"})]}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"The options for your billing currency are determined by your billing address."}),e.map(t=>n.jsxs("div",{className:"border border-gray-200 p-3 mb-3 flex justify-between items-center last:mb-0",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:t.label}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.value})]}),n.jsx("button",{onClick:()=>r(t.managePath),className:"px-3 py-1.5 border border-gray-200 text-xs text-gray-700 hover:bg-gray-50 transition-colors",children:"Manage"})]},t.label))]})},gpe=({onAddPayment:a})=>{const r=f.useCallback(()=>{a()},[a]);return n.jsxs("div",{className:"border border-gray-200 bg-white/95 mb-4 p-4",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-1",children:"Payment methods"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"For purchases and bills in Ziplofy"}),n.jsx("button",{onClick:r,className:"w-full px-3 py-2 border border-gray-200 text-sm text-gray-700 hover:bg-gray-50 transition-colors flex items-center justify-start",children:"+ Add payment method"})]})},ype=({onBack:a})=>{const r=f.useCallback(()=>{a()},[a]);return n.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b border-gray-200 pb-4",children:[n.jsx("button",{onClick:r,className:"cursor-pointer p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(Hn,{className:"w-5 h-5"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Billing profile"})]})},xpe=({onAddGstin:a})=>{const r=f.useCallback(()=>{a()},[a]);return n.jsxs("div",{className:"border border-gray-200 bg-white/95 mb-4 p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Tax ID"}),n.jsx(Oa,{className:"w-4 h-4 text-gray-500"})]}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Ziplofy is required to charge Goods and Services Tax (GST) in India. Your bills may be exempt from Indian GST if you are GST registered in India and enter a valid GSTIN."}),n.jsx("button",{onClick:r,className:"w-full px-3 py-2 border border-gray-200 text-sm text-gray-700 hover:bg-gray-50 transition-colors flex items-center justify-start",children:"+ Add GSTIN"})]})},vpe=({open:a,onClose:r,gstin:e,onGstinChange:t})=>n.jsx(un,{open:a,onClose:r,title:"Add tax info",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{disabled:e.trim().length!==15,className:`px-3 py-1.5 text-sm font-medium text-white transition-colors ${e.trim().length===15?"bg-gray-900 hover:bg-gray-800":"bg-gray-400 cursor-not-allowed"}`,children:"Add GSTIN"})]}),children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Your Ziplofy bills may be exempt from Indian GST if you are GST registered in India and enter a valid GSTIN."}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"GSTIN"}),n.jsx("input",{type:"text",placeholder:"15 digit identifier",value:e,onChange:t,className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]})]})}),bpe=()=>{const a=mr(),r=Pi(),[e,t]=f.useState(!1),[s,o]=f.useState("Credit card"),[i,l]=f.useState("India"),[c,d]=f.useState("Andaman and Nicobar Islands"),[h,m]=f.useState(!1),[y,x]=f.useState(!1),[b,v]=f.useState("");f.useEffect(()=>{new URLSearchParams(r.search).get("showAddPaymentModal")==="true"&&t(!0)},[r.search]);const j=f.useCallback(()=>{a("/settings/billing")},[a]),S=f.useCallback(()=>{t(!0)},[]),k=f.useCallback(()=>{t(!1)},[]),N=f.useCallback(Z=>{o(Z.target.value)},[]),P=f.useCallback(Z=>{l(Z.target.value)},[]),R=f.useCallback(Z=>{d(Z.target.value)},[]),F=f.useCallback(Z=>{m(Z.target.checked)},[]),z=f.useCallback(()=>{x(!0)},[]),H=f.useCallback(()=>{x(!1)},[]),V=f.useCallback(Z=>{v(Z.target.value)},[]),W=f.useCallback(Z=>{Z&&a(Z)},[a]);return n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsx(ype,{onBack:j}),n.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Your payment methods, tax ID, billing currency and store address"}),n.jsx(gpe,{onAddPayment:S}),n.jsx(xpe,{onAddGstin:z}),n.jsx(mpe,{onManage:W}),n.jsx(hpe,{open:e,onClose:k,paymentType:s,onPaymentTypeChange:N,country:i,onCountryChange:P,state:c,onStateChange:R,consent:h,onConsentChange:F}),n.jsx(vpe,{open:y,onClose:H,gstin:b,onGstinChange:V})]})})},wpe=({onNavigateToProfile:a})=>{const r=f.useCallback(()=>{a()},[a]);return n.jsxs("div",{className:"flex flex-row justify-between items-center mb-4 border-b border-gray-200 pb-4",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Billing"}),n.jsx("button",{className:"cursor-pointer px-3 py-1.5 border border-gray-200 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:r,children:"Billing profile"})]})},jpe=({onViewCharges:a})=>{const[r,e]=f.useState("all"),[t,s]=f.useState(!1),o=f.useRef(null),i=f.useRef(null),l=f.useCallback(()=>{s(b=>!b)},[]),c=f.useCallback(()=>{s(!1)},[]),d=f.useCallback(()=>{c(),a()},[c,a]),h=f.useCallback(b=>{e(b)},[]),m=f.useCallback(()=>{h("all")},[h]),y=f.useCallback(()=>{h("paid")},[h]),x=f.useCallback(()=>{h("unpaid")},[h]);return f.useEffect(()=>{const b=v=>{o.current&&!o.current.contains(v.target)&&i.current&&!i.current.contains(v.target)&&c()};return t&&document.addEventListener("mousedown",b),()=>{document.removeEventListener("mousedown",b)}},[t,c]),n.jsxs("div",{className:"border border-gray-200 bg-white/95",children:[n.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between relative",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Past bills"}),n.jsxs("div",{className:"relative",children:[n.jsx("button",{ref:i,className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-50 transition-colors",onClick:l,children:n.jsx(Ud,{className:"w-4 h-4"})}),t&&n.jsx("div",{ref:o,className:"absolute right-0 top-full mt-1 bg-white border border-gray-200 z-10 min-w-[180px]",children:n.jsx("button",{className:"w-full px-3 py-2 text-left text-xs text-gray-700 hover:bg-gray-50 transition-colors",onClick:d,children:"View in charge table"})})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between px-4 py-3 gap-3 border-b border-gray-200",children:[n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{className:`px-2 py-1 text-xs font-medium transition-colors ${r==="all"?"bg-gray-100 text-gray-900":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,onClick:m,children:"All"}),n.jsx("button",{className:`px-2 py-1 text-xs font-medium transition-colors ${r==="paid"?"bg-gray-100 text-gray-900":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,onClick:y,children:"Paid"}),n.jsx("button",{className:`px-2 py-1 text-xs font-medium transition-colors ${r==="unpaid"?"bg-gray-100 text-gray-900":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,onClick:x,children:"Unpaid"})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{className:"p-1.5 border border-gray-200 hover:bg-gray-50 transition-colors",children:n.jsx(Ro,{className:"w-3.5 h-3.5 text-gray-600"})}),n.jsx("button",{className:"p-1.5 border border-gray-200 hover:bg-gray-50 transition-colors",children:n.jsx($h,{className:"w-3.5 h-3.5 text-gray-600"})}),n.jsx("button",{className:"p-1.5 border border-gray-200 hover:bg-gray-50 transition-colors",children:n.jsx(Hu,{className:"w-3.5 h-3.5 text-gray-600"})})]})]}),n.jsx("div",{className:"border border-gray-200 mx-4 my-4 h-[200px] flex items-center justify-center bg-gray-50",children:n.jsx("p",{className:"text-xs text-gray-600",children:"Your past bills will appear here."})}),n.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-t border-gray-200",children:[n.jsx("p",{className:"text-xs text-gray-600",children:"Showing 0 results"}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{className:"min-w-[32px] px-2 py-1 border border-gray-200 text-xs text-gray-400 cursor-not-allowed",disabled:!0,children:""}),n.jsx("button",{className:"min-w-[32px] px-2 py-1 border border-gray-200 text-xs text-gray-400 cursor-not-allowed",disabled:!0,children:""})]})]})]})},Cpe=({onViewBill:a,onAddPayment:r,handleVisitPlanSettings:e})=>{const t=f.useCallback(()=>{a()},[a]),s=f.useCallback(()=>{r()},[r]);return n.jsxs("div",{className:"border border-gray-200 bg-white/95 mb-4",children:[n.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Upcoming bill"}),n.jsxs("div",{className:"text-2xl font-medium text-gray-900",children:["0.00 ",n.jsx("span",{className:"text-base",children:"INR"})]}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Next bill will be charged today"})]}),n.jsx("button",{className:"cursor-pointer text-sm text-gray-700 hover:underline",onClick:t,children:"View bill"})]}),n.jsx("div",{className:"p-4 border-b border-gray-200",children:n.jsx("button",{className:"w-full px-3 py-2 border border-gray-200 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",onClick:s,children:"+ Add payment method"})}),n.jsx("div",{className:"p-4",children:n.jsxs("p",{className:"text-xs text-gray-600",children:["To make changes to your plan,"," ",n.jsx("span",{onClick:e,className:"text-gray-700 cursor-pointer hover:underline",children:"visit plan settings"})]})})]})},Spe=()=>{const a=mr(),r=f.useCallback(()=>{a("/settings/billing/profile")},[a]),e=f.useCallback(()=>{a("/settings/billing/upcoming")},[a]),t=f.useCallback(()=>{a("/settings/billing/profile?showAddPaymentModal=true")},[a]),s=f.useCallback(()=>{a("/settings/billing/charges")},[a]),o=f.useCallback(()=>{a("/settings/plan")},[]);return n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsx(wpe,{onNavigateToProfile:r}),n.jsxs("div",{className:"border border-gray-200 bg-gray-50 p-3 flex items-start gap-3 mb-4",children:[n.jsx(Oa,{className:"w-4 h-4 text-gray-600 mt-0.5 shrink-0"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Ensure your billing address meets India payment requirements"}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Indian payment regulations require specific address formatting."," ",n.jsx("span",{className:"text-gray-700 cursor-pointer hover:underline",children:"View address guidelines"})," ","to see the requirements, or"," ",n.jsx("span",{className:"text-gray-700 cursor-pointer hover:underline",children:"click here"})," ","to update your address now."]})]})]}),n.jsx(Cpe,{onViewBill:e,onAddPayment:t,handleVisitPlanSettings:o}),n.jsx(jpe,{onViewCharges:s})]})})},Npe=({onViewCharges:a})=>{const r=f.useCallback(()=>{a()},[a]),e=[{label:"Subtotal",value:"0.00"},{label:"Running total",value:"0.00"}];return n.jsxs("div",{className:"border border-gray-200 bg-white/95",children:[n.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Details"}),n.jsx("button",{className:"cursor-pointer px-3 py-1.5 border border-gray-200 text-xs text-gray-700 hover:bg-gray-50 transition-colors",onClick:r,children:"View in charge table"})]}),e.map(t=>n.jsxs("div",{className:"flex justify-between px-4 py-3 border-t border-gray-200",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.label}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.value})]},t.label))]})},kpe=({onVisitPlanSettings:a})=>{const r=f.useCallback(()=>{a()},[a]);return n.jsxs("div",{className:"border border-gray-200 bg-white/95 mb-4",children:[n.jsxs("div",{className:"p-4",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-1",children:"Upcoming bill"}),n.jsxs("h3",{className:"text-2xl font-medium text-gray-900",children:["0.00 ",n.jsx("span",{className:"text-base",children:"INR"})]}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Next bill in 30 days or when your ~5,330 INR threshold is reached. You have 5,330 remaining."})]}),n.jsx("div",{className:"px-4 py-3 border-t border-gray-200",children:n.jsxs("p",{className:"text-xs text-gray-600",children:["To make changes to your plan,"," ",n.jsx("span",{onClick:r,className:"text-gray-700 cursor-pointer hover:text-gray-900 transition-colors",children:"visit plan settings"})]})})]})},_pe=({onBack:a})=>{const r=f.useCallback(()=>{a()},[a]);return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4 pb-4 border-b border-gray-200",children:[n.jsx("button",{onClick:r,className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(Hn,{className:"w-5 h-5"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Upcoming bill"})]}),n.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"My Store has charges on this bill"})]})},Epe=()=>{const a=mr(),r=f.useCallback(()=>{a("/settings/billing")},[a]),e=f.useCallback(()=>{a("/settings/billing/charges")},[a]),t=f.useCallback(()=>{a("/settings/plan")},[a]);return n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsx(_pe,{onBack:r}),n.jsx(kpe,{onVisitPlanSettings:t}),n.jsx(Npe,{onViewCharges:e})]})})},Tpe=()=>n.jsxs("div",{children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 uppercase tracking-wide mb-2",children:"ADDITIONAL"}),n.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Used by some apps and social media channels"}),n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{className:"p-3 border border-gray-200 bg-white/95 flex items-center gap-3 cursor-pointer hover:bg-gray-50/95 transition-colors",children:[n.jsx("div",{className:"w-10 h-10 border border-gray-200 flex items-center justify-center bg-gray-50",children:n.jsx(Uc,{className:"w-5 h-5 text-gray-600"})}),n.jsx("p",{className:"text-sm text-gray-900",children:"Cover Image"})]}),n.jsxs("div",{className:"p-3 border border-gray-200 bg-white/95 flex items-center gap-3 cursor-pointer hover:bg-gray-50/95 transition-colors",children:[n.jsx("div",{className:"w-10 h-10 border border-gray-200 flex items-center justify-center bg-gray-50",children:n.jsx(J0,{className:"w-5 h-5 text-gray-600"})}),n.jsx("p",{className:"text-sm text-gray-900",children:"Slogan"})]}),n.jsxs("div",{className:"p-3 border border-gray-200 bg-white/95 flex items-center gap-3 cursor-pointer hover:bg-gray-50/95 transition-colors",children:[n.jsx("div",{className:"w-10 h-10 border border-gray-200 flex items-center justify-center bg-gray-50",children:n.jsx(zd,{className:"w-5 h-5 text-gray-600"})}),n.jsx("p",{className:"text-sm text-gray-900",children:"Short Description"})]}),n.jsxs("div",{className:"p-3 border border-gray-200 bg-white/95 flex items-center gap-3 cursor-pointer hover:bg-gray-50/95 transition-colors",children:[n.jsx("div",{className:"w-10 h-10 border border-gray-200 flex items-center justify-center bg-gray-50",children:n.jsx(KD,{className:"w-5 h-5 text-gray-600"})}),n.jsx("p",{className:"text-sm text-gray-900",children:"Social links"})]})]})]}),Ope=({coverImageUrl:a,coverImageError:r,onCoverImageUrlChange:e,onCoverImageErrorChange:t,onMarkDirty:s})=>{const o=gr.useCallback(l=>{s(),e(l.target.value),t(!1)},[s,e,t]),i=gr.useCallback(()=>{t(!0)},[t]);return n.jsx("div",{className:"p-4 mb-8 border border-gray-200 bg-white/95",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Cover Image"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Key image that shows off your brand in profile pages and apps"}),n.jsxs("div",{className:"relative mb-3",children:[n.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-600",children:n.jsx(Uc,{className:"w-4 h-4"})}),n.jsx("input",{type:"text",placeholder:"Enter cover image URL",value:a,onChange:o,className:"w-full pl-10 pr-3 py-2 text-sm border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),a&&n.jsx("div",{className:"border border-gray-200 p-3 mb-3 flex items-center justify-center min-h-[160px] bg-gray-50",children:r?n.jsxs("div",{className:"text-center",children:[n.jsx(Uc,{className:"w-8 h-8 text-gray-400 mx-auto mb-1"}),n.jsx("p",{className:"text-xs text-gray-400",children:"Failed to load image"})]}):n.jsx("img",{src:a,alt:"Cover image preview",onError:i,className:"max-w-full max-h-[300px] object-contain"})}),!a&&n.jsxs("div",{className:"border border-dashed border-gray-300 p-6 flex flex-col items-center justify-center min-h-[160px] bg-gray-50",children:[n.jsx(Uc,{className:"w-8 h-8 text-gray-400 mb-2"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Add a cover image"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"HEIC, WEBP, SVG, PNG, or JPG. Recommended: 1920x1080 pixels minimum."})]}),n.jsx("button",{className:"ml-4 w-9 h-9 bg-gray-900 text-white hover:bg-gray-800 transition-colors flex items-center justify-center",children:n.jsx(na,{className:"w-4 h-4"})})]})})},Ppe=()=>n.jsxs("div",{className:"mb-8",children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 uppercase tracking-wide mb-2",children:"ESSENTIAL"}),n.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Common brand assets used across apps and channels"}),n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{className:"p-3 border border-gray-200 bg-white/95 flex items-center gap-3 cursor-pointer hover:bg-gray-50/95 transition-colors",children:[n.jsx("div",{className:"w-10 h-10 border border-gray-200 flex items-center justify-center bg-gray-50",children:n.jsx("div",{className:"w-5 h-5 rounded-full bg-gray-300"})}),n.jsx("p",{className:"text-sm text-gray-900",children:"Default Logo"})]}),n.jsxs("div",{className:"p-3 border border-gray-200 bg-white/95 flex items-center gap-3 cursor-pointer hover:bg-gray-50/95 transition-colors",children:[n.jsx("div",{className:"w-10 h-10 border border-gray-200 flex items-center justify-center bg-gray-50",children:n.jsx("div",{className:"w-5 h-5 rounded-full bg-gray-300"})}),n.jsx("p",{className:"text-sm text-gray-900",children:"Square Logo"})]}),n.jsxs("div",{className:"p-3 border border-gray-200 bg-white/95 flex items-center gap-3 cursor-pointer hover:bg-gray-50/95 transition-colors",children:[n.jsx("div",{className:"w-10 h-10 border border-gray-200 flex items-center justify-center bg-gray-50",children:n.jsx(Ad,{className:"w-5 h-5 text-gray-600"})}),n.jsx("p",{className:"text-sm text-gray-900",children:"Colors"})]})]})]}),Ape=({defaultLogoUrl:a,squareLogoUrl:r,defaultLogoError:e,squareLogoError:t,onDefaultLogoUrlChange:s,onSquareLogoUrlChange:o,onDefaultLogoError:i,onSquareLogoError:l,markDirty:c})=>n.jsxs("div",{className:"p-4 mb-8 border border-gray-200 bg-white/95 mt-8",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-6",children:"Logos"}),n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:"Default"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Used for most common logo applications"}),n.jsxs("div",{className:"relative mb-3",children:[n.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-600",children:n.jsx(Uc,{className:"w-4 h-4"})}),n.jsx("input",{type:"text",placeholder:"Enter logo URL",value:a,onChange:d=>{c(),s(d.target.value),i(!1)},className:"w-full pl-10 pr-3 py-2 text-sm border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),a&&n.jsx("div",{className:"border border-gray-200 p-3 mb-3 flex items-center justify-center min-h-[120px] bg-gray-50",children:e?n.jsxs("div",{className:"text-center",children:[n.jsx(Uc,{className:"w-8 h-8 text-gray-400 mx-auto mb-1"}),n.jsx("p",{className:"text-xs text-gray-400",children:"Failed to load image"})]}):n.jsx("img",{src:a,alt:"Default logo preview",onError:()=>i(!0),className:"max-w-full max-h-[120px] object-contain"})}),!a&&n.jsxs("div",{className:"border border-dashed border-gray-300 p-6 flex flex-col items-center justify-center min-h-[120px] bg-gray-50",children:[n.jsx(Uc,{className:"w-8 h-8 text-gray-400 mb-2"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Add a default logo"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"HEIC, WEBP, SVG, PNG, or JPG. Recommended width: 512 pixels minimum."})]}),n.jsx("button",{className:"ml-4 w-9 h-9 bg-gray-900 text-white hover:bg-gray-800 transition-colors flex items-center justify-center",children:n.jsx(na,{className:"w-4 h-4"})})]})}),n.jsx("div",{children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:"Square"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Used by some social media channels. May be cropped into a circle."}),n.jsxs("div",{className:"relative mb-3",children:[n.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-600",children:n.jsx(Uc,{className:"w-4 h-4"})}),n.jsx("input",{type:"text",placeholder:"Enter logo URL",value:r,onChange:d=>{c(),o(d.target.value),l(!1)},className:"w-full pl-10 pr-3 py-2 text-sm border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),r&&n.jsx("div",{className:"border border-gray-200 p-3 mb-3 flex items-center justify-center min-h-[120px] bg-gray-50",children:t?n.jsxs("div",{className:"text-center",children:[n.jsx(Uc,{className:"w-8 h-8 text-gray-400 mx-auto mb-1"}),n.jsx("p",{className:"text-xs text-gray-400",children:"Failed to load image"})]}):n.jsx("img",{src:r,alt:"Square logo preview",onError:()=>l(!0),className:"max-w-full max-h-[120px] object-contain"})}),!r&&n.jsxs("div",{className:"border border-dashed border-gray-300 p-6 flex flex-col items-center justify-center min-h-[120px] bg-gray-50",children:[n.jsx(Uc,{className:"w-8 h-8 text-gray-400 mb-2"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Add a square logo"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"HEIC, WEBP, SVG, PNG, or JPG. Recommended: 512x512 pixels minimum."})]}),n.jsx("button",{className:"ml-4 w-9 h-9 bg-gray-900 text-white hover:bg-gray-800 transition-colors flex items-center justify-center",children:n.jsx(na,{className:"w-4 h-4"})})]})}),n.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 flex items-center gap-2",children:[n.jsx("div",{className:"w-5 h-5 rounded-full bg-gradient-to-br from-yellow-400 via-red-500 to-cyan-400 flex items-center justify-center",children:n.jsx("span",{className:"text-xs",children:""})}),n.jsxs("p",{className:"text-xs text-gray-600",children:["No logo?"," ",n.jsx("a",{href:"https://hatchful.shopify.com",target:"_blank",rel:"noopener noreferrer",className:"text-gray-700 hover:text-gray-900 transition-colors",children:"Create one with Hatchful"})]})]})]}),Mpe=({primaryColor:a,contrastColor:r,primaryColorPickerAnchor:e,contrastColorPickerAnchor:t,primaryColorPickerRef:s,contrastColorPickerRef:o,onOpenPrimaryColorPicker:i,onClosePrimaryColorPicker:l,onOpenContrastColorPicker:c,onCloseContrastColorPicker:d,onPrimaryColorChange:h,onContrastColorChange:m,getPopoverPosition:y})=>n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:"Primary"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"The brand colors that appear on your store, social media, and more"}),a?n.jsx("div",{className:"mb-3",children:n.jsxs("div",{className:"flex items-center justify-between gap-3 p-3 border border-gray-200 bg-gray-50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 border border-gray-200",style:{backgroundColor:a}}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:"Primary color"}),n.jsx("p",{className:"text-sm text-gray-900",children:a.toUpperCase()})]})]}),n.jsx("button",{onClick:i,className:"p-1.5 text-gray-600 hover:bg-gray-100 transition-colors",children:n.jsx(Ad,{className:"w-4 h-4"})})]})}):n.jsxs("div",{className:"border border-dashed border-gray-300 p-4 flex items-center gap-3 bg-gray-50 mb-3",children:[n.jsx("div",{className:"w-10 h-10 border border-dashed border-gray-300 flex items-center justify-center bg-white",children:n.jsx(Ad,{className:"w-5 h-5 text-gray-400"})}),n.jsx("p",{className:"text-sm text-gray-600",children:"Add a primary color"})]}),a&&n.jsxs("div",{className:"mt-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Contrast"}),r?n.jsxs("div",{className:"flex items-center justify-between gap-3 p-3 border border-gray-200 bg-gray-50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 border border-gray-200",style:{backgroundColor:r}}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:"Contrast color"}),n.jsx("p",{className:"text-sm text-gray-900",children:r.toUpperCase()})]})]}),n.jsx("button",{onClick:c,className:"p-1.5 text-gray-600 hover:bg-gray-100 transition-colors",children:n.jsx(Ad,{className:"w-4 h-4"})})]}):n.jsxs("div",{onClick:c,className:"border border-dashed border-gray-300 p-3 flex items-center gap-3 bg-gray-50 cursor-pointer hover:border-gray-400 hover:bg-gray-100 transition-colors",children:[n.jsx("div",{className:"w-10 h-10 border border-dashed border-gray-300 flex items-center justify-center bg-white",children:n.jsx(Ad,{className:"w-5 h-5 text-gray-400"})}),n.jsx("p",{className:"text-sm text-gray-600",children:"Add a contrast color"})]})]})]}),n.jsx("button",{onClick:i,className:"ml-4 w-9 h-9 bg-gray-900 text-white hover:bg-gray-800 transition-colors flex items-center justify-center",children:n.jsx(na,{className:"w-4 h-4"})})]}),e&&n.jsxs("div",{ref:s,className:"absolute z-50 bg-white border border-gray-200 shadow-lg p-4 min-w-[280px]",style:y(e),children:[n.jsx("h4",{className:"text-sm font-medium mb-3",children:"Select Primary Color"}),n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"color",value:a||"#000000",onChange:x=>h(x.target.value),className:"w-[50px] h-[50px] border border-gray-200 cursor-pointer"}),n.jsxs("div",{className:"flex-1 relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-600 text-sm",children:"#"}),n.jsx("input",{type:"text",placeholder:"000000",value:a?a.replace("#",""):"",onChange:x=>{const b=x.target.value.replace(/[^0-9A-Fa-f]/g,"").slice(0,6);b.length<=6&&h(`#${b}`)},className:"w-full pl-7 pr-3 py-2 text-sm border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]})]}),n.jsx("button",{onClick:l,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Done"})]})]}),t&&n.jsxs("div",{ref:o,className:"absolute z-50 bg-white border border-gray-200 shadow-lg p-4 min-w-[280px]",style:y(t),children:[n.jsx("h4",{className:"text-sm font-medium mb-3",children:"Select Contrast Color"}),n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"color",value:r||"#ffffff",onChange:x=>m(x.target.value),className:"w-[50px] h-[50px] border border-gray-200 cursor-pointer"}),n.jsxs("div",{className:"flex-1 relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-600 text-sm",children:"#"}),n.jsx("input",{type:"text",placeholder:"ffffff",value:r?r.replace("#",""):"",onChange:x=>{const b=x.target.value.replace(/[^0-9A-Fa-f]/g,"").slice(0,6);b.length<=6&&m(`#${b}`)},className:"w-full pl-7 pr-3 py-2 text-sm border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]})]}),n.jsx("button",{onClick:d,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Done"})]})]})]}),Ipe=({secondaryColors:a,secondaryContrastColor:r,editingSecondaryColorIndex:e,tempSecondaryColor:t,secondaryColorPickerAnchor:s,secondaryContrastColorPickerAnchor:o,secondaryColorPickerRef:i,secondaryContrastColorPickerRef:l,onOpenSecondaryColorPicker:c,onCloseSecondaryColorPicker:d,onOpenSecondaryContrastColorPicker:h,onCloseSecondaryContrastColorPicker:m,onAddSecondaryColor:y,onRemoveSecondaryColor:x,onSecondaryContrastColorChange:b,onTempSecondaryColorChange:v,getPopoverPosition:j})=>n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:"Secondary"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Supporting colors used for accents and additional detail"}),a.length>0&&n.jsx("div",{className:"mb-3 flex flex-col gap-3",children:a.map((S,k)=>n.jsxs("div",{className:"flex items-center justify-between gap-3 p-3 border border-gray-200 bg-gray-50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 border border-gray-200",style:{backgroundColor:S}}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-xs text-gray-600",children:["Secondary color ",k+1]}),n.jsx("p",{className:"text-sm text-gray-900",children:S.toUpperCase()})]})]}),n.jsxs("div",{className:"flex gap-1.5",children:[n.jsx("button",{onClick:N=>c(N,k),className:"p-1.5 text-gray-600 hover:bg-gray-100 transition-colors",children:n.jsx(Ad,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>x(k),className:"p-1.5 text-gray-600 hover:bg-gray-100 transition-colors",children:n.jsx(Vs,{className:"w-4 h-4"})})]})]},k))}),a.length<2&&n.jsxs("div",{onClick:S=>c(S),className:`border border-dashed border-gray-300 p-4 flex items-center gap-3 bg-gray-50 cursor-pointer hover:border-gray-400 hover:bg-gray-100 transition-colors ${a.length>0?"mb-3":""}`,children:[n.jsx("div",{className:"w-10 h-10 border border-dashed border-gray-300 flex items-center justify-center bg-white",children:n.jsx(Ad,{className:"w-5 h-5 text-gray-400"})}),n.jsx("p",{className:"text-sm text-gray-600",children:"Add a secondary color"})]}),a.length>0&&n.jsxs("div",{className:"mt-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Contrasting color"}),r?n.jsxs("div",{className:"flex items-center justify-between gap-3 p-3 border border-gray-200 bg-gray-50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 border border-gray-200",style:{backgroundColor:r}}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:"Contrasting color"}),n.jsx("p",{className:"text-sm text-gray-900",children:r.toUpperCase()})]})]}),n.jsx("button",{onClick:h,className:"p-1.5 text-gray-600 hover:bg-gray-100 transition-colors",children:n.jsx(Ad,{className:"w-4 h-4"})})]}):n.jsxs("div",{onClick:h,className:"border border-dashed border-gray-300 p-3 flex items-center gap-3 bg-gray-50 cursor-pointer hover:border-gray-400 hover:bg-gray-100 transition-colors",children:[n.jsx("div",{className:"w-10 h-10 border border-dashed border-gray-300 flex items-center justify-center bg-white",children:n.jsx(Ad,{className:"w-5 h-5 text-gray-400"})}),n.jsx("p",{className:"text-sm text-gray-600",children:"Add a contrasting color"})]})]})]}),n.jsx("button",{onClick:S=>c(S),disabled:a.length>=2&&e===null,className:`ml-4 w-9 h-9 transition-colors flex items-center justify-center ${a.length>=2&&e===null?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gray-900 text-white hover:bg-gray-800"}`,children:n.jsx(na,{className:"w-4 h-4"})})]}),s&&n.jsxs("div",{ref:i,className:"absolute z-50 bg-white border border-gray-200 shadow-lg p-4 min-w-[280px]",style:j(s),children:[n.jsx("h4",{className:"text-sm font-medium mb-3",children:e!==null?"Edit Secondary Color":"Select Secondary Color"}),n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"color",value:t,onChange:S=>v(S.target.value),className:"w-[50px] h-[50px] border border-gray-200 cursor-pointer"}),n.jsxs("div",{className:"flex-1 relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-600 text-sm",children:"#"}),n.jsx("input",{type:"text",placeholder:"000000",value:t.replace("#",""),onChange:S=>{const k=S.target.value.replace(/[^0-9A-Fa-f]/g,"").slice(0,6);k.length<=6&&v(`#${k}`)},className:"w-full pl-7 pr-3 py-2 text-sm border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]})]}),n.jsx("button",{onClick:y,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Done"})]})]}),o&&n.jsxs("div",{ref:l,className:"absolute z-50 bg-white border border-gray-200 shadow-lg p-4 min-w-[280px]",style:j(o),children:[n.jsx("h4",{className:"text-sm font-medium mb-3",children:"Select Contrasting Color"}),n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"color",value:r||"#ffffff",onChange:S=>b(S.target.value),className:"w-[50px] h-[50px] border border-gray-200 cursor-pointer"}),n.jsxs("div",{className:"flex-1 relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-600 text-sm",children:"#"}),n.jsx("input",{type:"text",placeholder:"ffffff",value:r?r.replace("#",""):"",onChange:S=>{const k=S.target.value.replace(/[^0-9A-Fa-f]/g,"").slice(0,6);k.length<=6&&b(`#${k}`)},className:"w-full pl-7 pr-3 py-2 text-sm border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]})]}),n.jsx("button",{onClick:m,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Done"})]})]})]}),Rpe=({slogan:a,showSloganInput:r,onSloganChange:e,onShowSloganInputChange:t,onMarkDirty:s})=>{const o=gr.useCallback(l=>{const c=l.target.value;c.length<=80&&(s(),e(c))},[s,e]),i=gr.useCallback(()=>{!r&&!a&&t(!0)},[r,a,t]);return n.jsx("div",{className:"p-4 mb-8 border border-gray-200 bg-white/95",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Slogan"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Brand statement or tagline often used along with your logo"}),r||a?n.jsxs("div",{className:"mb-4",children:[n.jsx("input",{type:"text",placeholder:"Enter your slogan",value:a,onChange:o,maxLength:80,className:"w-full px-3 py-2 text-sm border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[a.length,"/80 characters"]})]}):n.jsxs("div",{className:"border border-dashed border-gray-300 p-4 flex items-center gap-3 bg-gray-50",children:[n.jsx("div",{className:"w-10 h-10 border border-dashed border-gray-300 flex items-center justify-center bg-white",children:n.jsx(J0,{className:"w-5 h-5 text-gray-400"})}),n.jsx("p",{className:"text-sm text-gray-600",children:"Add a slogan"})]})]}),n.jsx("button",{onClick:i,className:"ml-4 w-9 h-9 bg-gray-900 text-white hover:bg-gray-800 transition-colors flex items-center justify-center",children:n.jsx(na,{className:"w-4 h-4"})})]})})},Lpe=()=>n.jsx("div",{className:"p-6 mb-8 bg-gray-100 min-h-[300px] flex items-center justify-center relative",children:n.jsxs("div",{className:"flex items-center justify-center gap-6 w-full h-full",children:[n.jsxs("div",{className:"w-[240px] h-[160px] bg-gray-300 p-3 relative z-10",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-3",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gray-400"}),n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gray-400"}),n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gray-400"})]}),n.jsx("div",{className:"w-full h-6 bg-gray-200 mb-2"}),n.jsx("div",{className:"w-4/5 h-6 bg-gray-200"})]}),n.jsxs("div",{className:"w-[140px] h-[220px] bg-gray-300 p-3 relative z-20 -ml-6",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 mx-auto mb-3"}),n.jsx("div",{className:"w-full h-4 bg-gray-200 mb-2"}),n.jsx("div",{className:"w-[70%] h-4 bg-gray-200"})]})]})}),YA=f.createContext(void 0),Dpe=({children:a})=>{const[r,e]=f.useState(null),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async x=>{try{s(!0),i(null);const b=await Ke.get(`/store-branding/store/${x}`),{success:v,data:j,message:S}=b.data;if(!v)throw new Error(S||"Failed to fetch store branding");return e(j||null),j||null}catch(b){const v=b?.response?.data?.message||b?.message||"Failed to fetch store branding";throw i(v),new Error(v)}finally{s(!1)}},[]),c=f.useCallback(async x=>{try{s(!0),i(null);const b=await Ke.post("/store-branding",x),{success:v,data:j,message:S}=b.data;if(!v)throw new Error(S||"Failed to create store branding");return e(j),j}catch(b){const v=b?.response?.data?.message||b?.message||"Failed to create store branding";throw i(v),new Error(v)}finally{s(!1)}},[]),d=f.useCallback(async(x,b)=>{try{s(!0),i(null);const v=await Ke.put(`/store-branding/${x}`,b),{success:j,data:S,message:k}=v.data;if(!j)throw new Error(k||"Failed to update store branding");return e(S),S}catch(v){const j=v?.response?.data?.message||v?.message||"Failed to update store branding";throw i(j),new Error(j)}finally{s(!1)}},[]),h=f.useCallback(()=>{e(null),i(null)},[]),m=f.useCallback(()=>{i(null)},[]),y={branding:r,loading:t,error:o,getByStoreId:l,create:c,update:d,clear:h,clearError:m};return n.jsx(YA.Provider,{value:y,children:a})},Fpe=()=>{const a=f.useContext(YA);if(!a)throw new Error("useStoreBranding must be used within a StoreBrandingProvider");return a},Bpe=()=>{const a=mr(),{activeStoreId:r}=fn(),{branding:e,loading:t,getByStoreId:s,create:o,update:i}=Fpe(),[l,c]=f.useState(null),[d,h]=f.useState([]),[m,y]=f.useState({}),[x,b]=f.useState(""),[v,j]=f.useState(""),[S,k]=f.useState(!1),[N,P]=f.useState(!1),[R,F]=f.useState(""),[z,H]=f.useState(!1),[V,W]=f.useState(""),[Z,A]=f.useState(!1),[q,I]=f.useState(""),[K,D]=f.useState(!1),[Q,oe]=f.useState(""),[re,Te]=f.useState(""),[G,Y]=f.useState(null),[Se,fe]=f.useState(null),[Ee,Ae]=f.useState([]),[qe,we]=f.useState(""),[Oe,ze]=f.useState(null),[We,pt]=f.useState(null),[Pt,ee]=f.useState(null),[Ne,Ie]=f.useState("#000000"),[ne,M]=f.useState(!1),[U,J]=f.useState(!1),[ce,ue]=f.useState(!1),xe=f.useRef(null),he=f.useRef(null),se=f.useRef(null),Le=f.useRef(null),Ue=f.useRef(null),Ge=f.useCallback(()=>{U&&M(!0)},[U]),ie=f.useCallback(ar=>{c(ar.currentTarget)},[]),_e=f.useCallback(()=>{c(null)},[]),le=f.useCallback(ar=>{d.includes(ar)||(h([...d,ar]),y({...m,[ar]:""}),Ge()),_e()},[d,m,Ge,_e]),Xe=f.useCallback(ar=>{h(d.filter(pn=>pn!==ar));const br={...m};delete br[ar],y(br),Ge()},[d,m,Ge]),Fe=f.useCallback((ar,br)=>{y({...m,[ar]:br}),Ge()},[m,Ge]),dt=f.useCallback(ar=>ft.find(pn=>pn.name===ar)?.icon||n.jsx(Oo,{className:"w-5 h-5"}),[]),lt=f.useCallback(ar=>({Facebook:"https://facebook.com/shopify",X:"https://x.com/shopify",Pinterest:"https://pinterest.com/shopify",Instagram:"https://instagram.com/shopify",TikTok:"https://tiktok.com/@shopify",Tumblr:"https://tumblr.com/shopify",Snapchat:"https://snapchat.com/add/shopify",YouTube:"https://youtube.com/shopify",Vimeo:"https://vimeo.com/shopify",LinkedIn:"https://linkedin.com/company/shopify",Spotify:"https://open.spotify.com/artist/shopify",WhatsApp:"https://wa.me/shopify",Threads:"https://threads.net/@shopify",KakaoTalk:"https://kakaotalk.com/shopify",LINE:"https://line.me/shopify",Discord:"https://discord.gg/shopify",Twitch:"https://twitch.tv/shopify",Weibo:"https://weibo.com/shopify",WeChat:"https://wechat.com/shopify","Shopify Inbox":"https://shopify.com/inbox"})[ar]||`https://${ar.toLowerCase()}.com/shopify`,[]),ft=[{name:"Facebook",icon:n.jsx(Oo,{className:"w-5 h-5"})},{name:"X",icon:n.jsx(Oo,{className:"w-5 h-5"})},{name:"Pinterest",icon:n.jsx(Oo,{className:"w-5 h-5"})},{name:"Instagram",icon:n.jsx(Oo,{className:"w-5 h-5"})},{name:"TikTok",icon:n.jsx(Pk,{className:"w-5 h-5"})},{name:"Tumblr",icon:n.jsx(Oo,{className:"w-5 h-5"})},{name:"Snapchat",icon:n.jsx(Df,{className:"w-5 h-5"})},{name:"YouTube",icon:n.jsx(uj,{className:"w-5 h-5"})},{name:"Vimeo",icon:n.jsx(uj,{className:"w-5 h-5"})},{name:"LinkedIn",icon:n.jsx(Oo,{className:"w-5 h-5"})},{name:"Spotify",icon:n.jsx(Pk,{className:"w-5 h-5"})},{name:"WhatsApp",icon:n.jsx(Df,{className:"w-5 h-5"})},{name:"Threads",icon:n.jsx(Oo,{className:"w-5 h-5"})},{name:"KakaoTalk",icon:n.jsx(Df,{className:"w-5 h-5"})},{name:"LINE",icon:n.jsx(Df,{className:"w-5 h-5"})},{name:"Discord",icon:n.jsx(Df,{className:"w-5 h-5"})},{name:"Twitch",icon:n.jsx(uj,{className:"w-5 h-5"})},{name:"Weibo",icon:n.jsx(Oo,{className:"w-5 h-5"})},{name:"WeChat",icon:n.jsx(Df,{className:"w-5 h-5"})},{name:"Shopify Inbox",icon:n.jsx(a4,{className:"w-5 h-5"})}],Ze=ft.filter(ar=>!d.includes(ar.name)),Nt=f.useCallback(ar=>{Y(ar.currentTarget)},[]),Mt=f.useCallback(()=>{Y(null)},[]),vt=f.useCallback(ar=>{fe(ar.currentTarget)},[]),Jt=f.useCallback(()=>{fe(null)},[]),wr=f.useCallback(ar=>{oe(ar),Ge()},[Ge]),Wt=f.useCallback(ar=>{Te(ar),Ge()},[Ge]),ye=f.useCallback((ar,br)=>{br===void 0&&Ee.length>=2||(br!==void 0?(pt(br),Ie(Ee[br]||"#000000")):(pt(null),Ie("#000000")),ze(ar.currentTarget))},[Ee]),Be=f.useCallback(()=>{ze(null),pt(null),Ie("#000000")},[]),tt=f.useCallback(ar=>{ee(ar.currentTarget)},[]),wt=f.useCallback(()=>{ee(null)},[]),Ut=f.useCallback(()=>{if(We!==null){const ar=[...Ee];ar[We]=Ne,Ae(ar)}else Ee.length<2&&Ae([...Ee,Ne]);Be(),Ge()},[We,Ee,Ne,Be,Ge]),er=f.useCallback(ar=>{Ae(Ee.filter((br,pn)=>pn!==ar)),Ge()},[Ee,Ge]),zr=f.useCallback(ar=>{we(ar),Ge()},[Ge]),rn=f.useCallback(async()=>{if(!r){yr.error("No store selected. Please select a store to save branding.");return}const ar=d.reduce((pn,In)=>(m[In]!==void 0&&(pn[In]=m[In]),pn),{}),br={defaultLogoUrl:x,squareLogoUrl:v,primaryColor:Q,contrastColor:re,secondaryColors:Ee,secondaryContrastColor:qe,coverImageUrl:R,slogan:V,shortDescription:q,socialLinks:ar};ue(!0);try{e&&e._id?(await i(e._id,br),yr.success("Branding updated successfully")):(await o({storeId:r,...br}),yr.success("Branding saved successfully")),M(!1)}catch(pn){const In=pn?.response?.data?.message||pn?.message||"Failed to save branding";yr.error(In)}finally{ue(!1)}},[r,d,e,re,R,o,x,Q,Ee,qe,q,V,m,v,i]);f.useEffect(()=>{r&&(J(!1),s(r).catch(()=>{}))},[r,s]),f.useEffect(()=>{if(!t){if(J(!1),e){b(e.defaultLogoUrl??""),j(e.squareLogoUrl??""),oe(e.primaryColor??""),Te(e.contrastColor??""),Ae(e.secondaryColors?[...e.secondaryColors]:[]),we(e.secondaryContrastColor??""),F(e.coverImageUrl??"");const ar=e.slogan??"";W(ar),A(!!e.slogan);const br=e.shortDescription??"";I(br),D(!!e.shortDescription);const pn=e.socialLinks?{...e.socialLinks}:{};h(Object.keys(pn)),y(pn)}else b(""),j(""),oe(""),Te(""),Ae([]),we(""),F(""),W(""),A(!1),I(""),D(!1),h([]),y({});k(!1),P(!1),H(!1),Ie("#000000"),M(!1),J(!0)}},[e,t]),f.useEffect(()=>{const ar=br=>{xe.current&&!xe.current.contains(br.target)&&l&&_e(),he.current&&!he.current.contains(br.target)&&G&&Mt(),se.current&&!se.current.contains(br.target)&&Se&&Jt(),Le.current&&!Le.current.contains(br.target)&&Oe&&Be(),Ue.current&&!Ue.current.contains(br.target)&&Pt&&wt()};return document.addEventListener("mousedown",ar),()=>{document.removeEventListener("mousedown",ar)}},[l,G,Se,Oe,Pt,_e,Mt,Jt,Be,wt]);const _n=ar=>{if(!ar)return{top:0,left:0};const br=ar.getBoundingClientRect();return{top:br.bottom+window.scrollY+4,left:br.left+window.scrollX}},Ur=f.useCallback(()=>{a("/settings/general")},[a]);return n.jsx(pr,{children:n.jsxs("div",{className:"max-w-[1200px] mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:Ur,className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(Hn,{className:"w-5 h-5"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Brand"})]}),U&&ne&&n.jsx("button",{onClick:rn,disabled:ce||t,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:ce?"Saving...":"Save"})]}),n.jsx(Lpe,{}),n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-6",children:"What should you add?"}),n.jsx(Ppe,{}),n.jsx(Tpe,{})]}),n.jsx(Ape,{defaultLogoUrl:x,squareLogoUrl:v,defaultLogoError:S,squareLogoError:N,onDefaultLogoUrlChange:b,onSquareLogoUrlChange:j,onDefaultLogoError:k,onSquareLogoError:P,markDirty:Ge}),n.jsxs("div",{className:"p-4 mb-8 border border-gray-200 bg-white/95",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-6",children:"Colors"}),n.jsx(Mpe,{primaryColor:Q,contrastColor:re,primaryColorPickerAnchor:G,contrastColorPickerAnchor:Se,primaryColorPickerRef:he,contrastColorPickerRef:se,onOpenPrimaryColorPicker:Nt,onClosePrimaryColorPicker:Mt,onOpenContrastColorPicker:vt,onCloseContrastColorPicker:Jt,onPrimaryColorChange:wr,onContrastColorChange:Wt,getPopoverPosition:_n}),n.jsx(Ipe,{secondaryColors:Ee,secondaryContrastColor:qe,editingSecondaryColorIndex:We,tempSecondaryColor:Ne,secondaryColorPickerAnchor:Oe,secondaryContrastColorPickerAnchor:Pt,secondaryColorPickerRef:Le,secondaryContrastColorPickerRef:Ue,onOpenSecondaryColorPicker:ye,onCloseSecondaryColorPicker:Be,onOpenSecondaryContrastColorPicker:tt,onCloseSecondaryContrastColorPicker:wt,onAddSecondaryColor:Ut,onRemoveSecondaryColor:er,onSecondaryContrastColorChange:zr,onTempSecondaryColorChange:Ie,getPopoverPosition:_n})]}),n.jsx(Ope,{coverImageUrl:R,coverImageError:z,onCoverImageUrlChange:F,onCoverImageErrorChange:H,onMarkDirty:Ge}),n.jsx(Rpe,{slogan:V,showSloganInput:Z,onSloganChange:W,onShowSloganInputChange:A,onMarkDirty:Ge}),n.jsx("div",{className:"p-4 mb-8 border border-gray-200 bg-white/95",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Short description"}),n.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Description of your business often used in bios and listings"}),K||q?n.jsxs("div",{className:"mb-4",children:[n.jsx("textarea",{placeholder:"Enter your short description",value:q,onChange:ar=>{const br=ar.target.value;br.length<=150&&(Ge(),I(br))},maxLength:150,rows:3,className:"w-full px-3 py-2 text-sm border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 resize-none"}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[q.length,"/150 characters"]})]}):n.jsxs("div",{className:"border border-dashed border-gray-300 p-4 flex items-center gap-3 bg-gray-50",children:[n.jsx("div",{className:"w-10 h-10 border border-dashed border-gray-300 flex items-center justify-center bg-white",children:n.jsx(zd,{className:"w-5 h-5 text-gray-400"})}),n.jsx("p",{className:"text-sm text-gray-600",children:"Add a short description"})]})]}),n.jsx("button",{onClick:()=>{!K&&!q&&D(!0)},className:"ml-4 w-9 h-9 bg-gray-900 text-white hover:bg-gray-800 transition-colors flex items-center justify-center",children:n.jsx(na,{className:"w-4 h-4"})})]})}),n.jsx("div",{className:"p-4 mb-8 border border-gray-200 bg-white/95",children:n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Social links"}),n.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Social links for your business, often used in the theme footer"}),n.jsxs("div",{className:"relative inline-block mb-6",children:[n.jsxs("button",{onClick:ie,disabled:Ze.length===0,className:"flex items-center gap-2 px-3 py-1.5 text-sm border border-gray-300 text-gray-900 hover:border-gray-400 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[n.jsx("span",{children:"Add social link"}),n.jsx(Is,{className:"w-4 h-4"})]}),l&&n.jsx("div",{ref:xe,className:"absolute z-50 mt-1 bg-white border border-gray-200 shadow-lg max-h-96 overflow-y-auto w-[250px]",style:{top:l.getBoundingClientRect().bottom+window.scrollY+4,left:l.getBoundingClientRect().left+window.scrollX},children:Ze.map(ar=>n.jsxs("button",{onClick:()=>le(ar.name),className:"w-full px-3 py-2 flex items-center gap-3 hover:bg-gray-50 transition-colors text-left",children:[n.jsx("div",{className:"text-gray-600",children:ar.icon}),n.jsx("span",{className:"text-sm text-gray-900",children:ar.name})]},ar.name))})]}),d.length>0&&n.jsx("div",{className:"flex flex-col gap-6",children:d.map(ar=>n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:ar}),n.jsxs("div",{className:"flex gap-3 items-start",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-600",children:dt(ar)}),n.jsx("input",{type:"text",placeholder:"Link",value:m[ar]||"",onChange:br=>Fe(ar,br.target.value),className:"w-full pl-10 pr-3 py-2 text-sm border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsx("button",{onClick:()=>Xe(ar),className:"px-3 py-2 text-sm text-gray-600 hover:text-gray-900 transition-colors",children:"Remove"})]}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:lt(ar)})]},ar))})]})}),n.jsx("div",{className:"text-center mt-6",children:n.jsx("a",{href:"#",className:"text-sm text-gray-600 hover:text-gray-900 transition-colors",children:"Learn more about managing your brand settings"})})]})})},fo=({checked:a,onChange:r,disabled:e=!1,label:t})=>{const s=f.useCallback(()=>{e||r(!a)},[a,r,e]);return n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t&&n.jsx("span",{className:"text-sm text-gray-700",children:t}),n.jsx("button",{type:"button",onClick:s,disabled:e,className:`cursor-pointer relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-2 ${a?"bg-gray-900":"bg-gray-300"} ${e?"opacity-50 cursor-not-allowed":""}`,children:n.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${a?"translate-x-6":"translate-x-1"}`})})]})},ZA=f.createContext(void 0),zpe=({children:a})=>{const[r,e]=f.useState(null),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async h=>{try{s(!0),i(null);const{data:m}=await Ke.get(`/checkout-settings/store/${h}`),y=m.data;return e(y),y}catch(m){const y=m?.response?.data?.message||m?.message||"Failed to load checkout settings";throw i(y),new Error(y)}finally{s(!1)}},[]),c=f.useCallback(async(h,m)=>{try{s(!0),i(null);const{data:y}=await Ke.put(`/checkout-settings/${h}`,m),x=y.data;return e(x),x}catch(y){const x=y?.response?.data?.message||y?.message||"Failed to update checkout settings";throw i(x),new Error(x)}finally{s(!1)}},[]),d={settings:r,loading:t,error:o,fetchByStoreId:l,update:c};return n.jsx(ZA.Provider,{value:d,children:a})},Upe=()=>{const a=f.useContext(ZA);if(!a)throw new Error("useCheckoutSettings must be used within CheckoutSettingsProvider");return a},XA=f.createContext(void 0),$pe=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(0),[o,i]=f.useState(1),[l,c]=f.useState(50),[d,h]=f.useState(!1),[m,y]=f.useState(null),x=f.useCallback(async(v={})=>{try{h(!0),y(null);const j=new URLSearchParams;v.q&&j.set("q",v.q),v.page&&j.set("page",String(v.page)),v.limit&&j.set("limit",String(v.limit));const S=await Ke.get(`/countries?${j.toString()}`),{success:k,data:N,message:P,meta:R}=S.data;if(!k)throw new Error(P||"Failed to fetch countries");return e(N||[]),R&&(s(R.total),i(R.page),c(R.limit)),N||[]}catch(j){const S=j?.response?.data?.message||j?.message||"Failed to fetch countries";throw y(S),new Error(S)}finally{h(!1)}},[]),b={countries:r,total:t,page:o,limit:l,loading:d,error:m,getCountries:x};return n.jsx(XA.Provider,{value:b,children:a})},dw=()=>{const a=f.useContext(XA);if(!a)throw new Error("useCountries must be used within a CountryProvider");return a},Vpe=()=>{const{countries:a,total:r,loading:e,getCountries:t}=dw(),{activeStoreId:s}=fn(),{settings:o,fetchByStoreId:i,loading:l,update:c}=Upe(),[d,h]=f.useState("phone_or_email"),[m,y]=f.useState(!0),[x,b]=f.useState(!1),[v,j]=f.useState(!0),[S,k]=f.useState("last_name"),[N,P]=f.useState("dont_include"),[R,F]=f.useState(!0),[z,H]=f.useState("optional"),[V,W]=f.useState(!0),[Z,A]=f.useState("dont_include"),[q,I]=f.useState(!0),[K,D]=f.useState("ziplofy_recommended"),[Q,oe]=f.useState(!0),[re,Te]=f.useState(!1),[G,Y]=f.useState("all"),[Se,fe]=f.useState(""),[Ee,Ae]=f.useState([]),[qe,we]=f.useState(!1),[Oe,ze]=f.useState(!1),[We,pt]=f.useState(!0),Pt=f.useRef(""),ee=["US"],Ne=f.useCallback(ht=>JSON.stringify({contactMethod:ht.contactMethod,showOrderTracking:ht.showOrderTracking,requireSignIn:ht.requireSignIn,emailMarketing:ht.emailMarketing,emailRegionOption:ht.emailRegionOption,smsMarketing:ht.smsMarketing,selectedRegions:[...ht.selectedRegions??[]].sort(),showTipping:ht.showTipping,presets:ht.presets.map(vr=>String(vr??"").trim()),hideTippingUntilChosen:ht.hideTippingUntilChosen,useShippingAsBilling:ht.useShippingAsBilling,addToCartLimit:ht.addToCartLimit,cartLimit:ht.cartLimit===null||ht.cartLimit===void 0?"":String(ht.cartLimit).trim(),useRecommendedLimit:ht.useRecommendedLimit,fullNameOption:ht.fullNameOption,companyNameOption:ht.companyNameOption,addressLine2Option:ht.addressLine2Option,shippingPhoneOption:ht.shippingPhoneOption}),[]);f.useEffect(()=>{re&&t({limit:1e3,q:Se||void 0})},[re,t,Se]),f.useEffect(()=>{s&&i(s).catch(ht=>{yr.dismiss(),yr.error(ht.message||"Failed to load checkout settings")})},[s,i]);const[Ie,ne]=f.useState(!0),[M,U]=f.useState("10"),[J,ce]=f.useState("15"),[ue,xe]=f.useState("20"),[he,se]=f.useState(!1),[Le,Ue]=f.useState(!0),[Ge,ie]=f.useState(!1),[_e,le]=f.useState("5"),[Xe,Fe]=f.useState(!1),[dt,lt]=f.useState(!1),[ft,Ze]=f.useState(!0);f.useEffect(()=>{if(!o)return;pt(!0);const ht=o.contactMethod??"phone_or_email",vr=o.orderTracking?.enabled??!0,Rn=o.requireSignIn??!1,bn=o.marketing?.email?.enabled??!0,En=o.marketing?.email?.regionMode??"ziplofy_recommended",Wr=o.marketing?.sms?.enabled??!1,Bn=o.tipping?.enabled??!1,te=o.tipping?.presets??[],je=o.tipping?.hideUntilSelected??!1,Re=o.addToCartLimit?.enabled??!1,Ye=o.addToCartLimit?.limit!==void 0&&o.addToCartLimit?.limit!==null?o.addToCartLimit?.limit:"",at=o.addToCartLimit?.useRecommended??!0,jt=o.addressCollection?.useShippingAsBilling??!0,Qe=o.emailSelectedRegionIds??[];h(ht),y(vr),b(Rn),j(Rn),I(bn),D(En),oe(Wr),Ae(Qe),ne(Bn),U(te[0]!==void 0?String(te[0]):"10"),ce(te[1]!==void 0?String(te[1]):"15"),xe(te[2]!==void 0?String(te[2]):"20"),se(je),Ze(jt),Ue(Re),le(Ye===""?"":typeof Ye=="number"?String(Ye):Ye),Fe(at);const $e=Ne({contactMethod:ht,showOrderTracking:vr,requireSignIn:Rn,emailMarketing:bn,emailRegionOption:En,smsMarketing:Wr,selectedRegions:Qe,showTipping:Bn,presets:te,hideTippingUntilChosen:je,useShippingAsBilling:jt,addToCartLimit:Re,cartLimit:Ye,useRecommendedLimit:at,fullNameOption:S,companyNameOption:N,addressLine2Option:z,shippingPhoneOption:Z});Pt.current=$e,we(!1);const ve=window.setTimeout(()=>{pt(!1)},0);return()=>{window.clearTimeout(ve)}},[o,Ne,S,N,z,Z]);const Nt=f.useCallback(async()=>{if(!o||!o._id)return;const ht=Wr=>{const Bn=Wr.trim();if(!Bn)return 0;const te=Number(Bn);return Number.isNaN(te)||te<0?0:te},vr=[M,J,ue].map(ht),Rn=Number(_e),bn=_e.trim()===""||Number.isNaN(Rn)?null:Rn,En={contactMethod:d,orderTracking:{enabled:m},requireSignIn:x,marketing:{email:{enabled:q,regionMode:K},sms:{enabled:Q}},tipping:{enabled:Ie,presets:vr,hideUntilSelected:he},checkoutLanguage:o.checkoutLanguage??"English",addressCollection:{useShippingAsBilling:ft},addToCartLimit:{enabled:Le,limit:bn,useRecommended:Xe},emailSelectedRegionIds:Ee};try{ze(!0),yr.dismiss(),await c(o._id,En),yr.dismiss(),yr.success("Checkout settings saved"),Pt.current=Ne({contactMethod:d,showOrderTracking:m,requireSignIn:x,emailMarketing:q,emailRegionOption:K,smsMarketing:Q,selectedRegions:Ee,showTipping:Ie,presets:vr,hideTippingUntilChosen:he,useShippingAsBilling:ft,addToCartLimit:Le,cartLimit:bn,useRecommendedLimit:Xe,fullNameOption:S,companyNameOption:N,addressLine2Option:z,shippingPhoneOption:Z}),we(!1)}catch(Wr){const Bn=Wr?.response?.data?.message||Wr?.message||"Failed to save checkout settings";yr.dismiss(),yr.error(Bn)}finally{ze(!1)}},[o,d,m,x,q,K,Q,Ie,he,ft,Le,_e,Xe,Ee,M,J,ue,c,Ne,S,N,z,Z]);f.useEffect(()=>{if(We)return;const ht=Ne({contactMethod:d,showOrderTracking:m,requireSignIn:x,emailMarketing:q,emailRegionOption:K,smsMarketing:Q,selectedRegions:Ee,showTipping:Ie,presets:[M,J,ue],hideTippingUntilChosen:he,useShippingAsBilling:ft,addToCartLimit:Le,cartLimit:_e,useRecommendedLimit:Xe,fullNameOption:S,companyNameOption:N,addressLine2Option:z,shippingPhoneOption:Z});we(ht!==Pt.current)},[Ne,We,d,m,x,q,K,Q,Ee,Ie,M,J,ue,he,ft,Le,_e,Xe,S,N,z,Z]);const Mt=f.useCallback(ht=>{h(ht)},[]),vt=f.useCallback(ht=>{y(ht)},[]),Jt=f.useCallback(ht=>{b(ht),ht&&j(!0)},[]),wr=f.useCallback(ht=>{k(ht)},[]),Wt=f.useCallback(ht=>{P(ht),ht==="required"&&F(!0)},[]),ye=f.useCallback(ht=>{H(ht),ht==="required"&&W(!0)},[]),Be=f.useCallback(ht=>{A(ht)},[]),tt=f.useCallback(ht=>{I(ht)},[]),wt=f.useCallback(ht=>{D(ht)},[]),Ut=f.useCallback(ht=>{oe(ht)},[]),er=f.useCallback(ht=>{ne(ht)},[]),zr=f.useCallback(ht=>{se(ht)},[]),rn=f.useCallback(ht=>{Ue(ht)},[]),_n=f.useCallback(ht=>{Ze(ht)},[]),Ur=f.useCallback(ht=>{Fe(ht)},[]),ar=f.useCallback(ht=>{Y(ht)},[]),br=f.useCallback(ht=>{Ae(ht?a.map(vr=>vr._id):[])},[a]),pn=f.useCallback((ht,vr)=>{Ae(vr?Rn=>[...Rn,ht]:Rn=>Rn.filter(bn=>bn!==ht))},[]),In=f.useMemo(()=>[{id:"all",label:"All"},{id:"recommended",label:"Recommended"}],[]),on=f.useMemo(()=>a.filter(ht=>!(G==="recommended"&&!ee.includes(ht.iso2))),[a,G,ee]),Er=f.useMemo(()=>a.length>0&&Ee.length===a.length,[a.length,Ee.length]),jr=f.useMemo(()=>Ee.length>0&&Ee.length<a.length,[Ee.length,a.length]);return n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 border-b border-gray-200 pb-4",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Checkout settings"}),qe&&n.jsx("button",{onClick:Nt,disabled:Oe||l||!o,className:"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:Oe?"Saving...":"Save"})]}),n.jsxs("div",{className:"p-4 mb-4 border border-gray-200 bg-white/95",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Customer contact method"}),n.jsx(Oa,{className:"w-4 h-4 text-gray-500"})]}),n.jsxs("p",{className:"text-xs text-gray-600 mb-4",children:["The contact method customers enter at checkout will receive order and shipping"," ",n.jsx("button",{className:"text-gray-700 cursor-pointer underline hover:no-underline",children:"notifications"}),"."]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"contactMethod",value:"phone_or_email",checked:d==="phone_or_email",onChange:ht=>Mt(ht.target.value),className:"mt-1 w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-900"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Phone number or email"}),d==="phone_or_email"&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["An"," ",n.jsx("button",{className:"text-gray-700 cursor-pointer underline hover:no-underline",children:"SMS App"})," ","is required to send SMS updates"]})]})]}),n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"contactMethod",value:"email",checked:d==="email",onChange:ht=>Mt(ht.target.value),className:"mt-1 w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Email"})]})]}),n.jsx("div",{className:"my-6 border-t border-gray-200"}),n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:m,onChange:ht=>vt(ht.target.checked),className:"mt-1 w-4 h-4 text-gray-900 border-gray-300 rounded focus:ring-gray-900"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["Show a link for customers to track their order with"," ",n.jsx("button",{className:"text-gray-700 cursor-pointer underline hover:no-underline",children:"Ziplofy"})]}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Customers will be able to download the app from the order status page"})]})]}),n.jsx("div",{className:"my-4 border-t border-gray-200"}),n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:x,onChange:ht=>Jt(ht.target.checked),className:"mt-1 w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Require customers to sign in to their account before checkout"}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Customers can only use email when sign-in is required"})]})]}),x&&v&&n.jsx("div",{className:"mt-4 p-3 bg-gray-50 border border-gray-200",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Iu,{className:"w-4 h-4 text-gray-600 shrink-0 mt-0.5"}),n.jsx("div",{className:"flex-1",children:n.jsxs("p",{className:"text-xs text-gray-700",children:["Requiring a sign-in may discourage some customers from checking out and reduce your store's total orders. To manage the current sign-in experience, go to"," ",n.jsx("button",{className:"text-gray-700 cursor-pointer underline hover:no-underline font-medium",children:"customer accounts settings"}),"."]})}),n.jsx("button",{onClick:()=>j(!1),className:"text-gray-600 hover:text-gray-900",children:n.jsx(xs,{className:"w-4 h-4"})})]})})]}),n.jsxs("div",{className:"p-4 mb-4 border border-gray-200 bg-white/95",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-4",children:"Customer information"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-2 font-medium",children:"Full name"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"fullNameOption",value:"last_name",checked:S==="last_name",onChange:ht=>wr(ht.target.value),className:"w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400"}),n.jsx("p",{className:"text-sm text-gray-900",children:"Only require last name"})]}),n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"fullNameOption",value:"first_last",checked:S==="first_last",onChange:ht=>wr(ht.target.value),className:"w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400"}),n.jsx("p",{className:"text-sm text-gray-900",children:"Require first and last name"})]})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-2 font-medium",children:"Company name"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"companyNameOption",value:"dont_include",checked:N==="dont_include",onChange:ht=>Wt(ht.target.value),className:"w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-sm text-gray-900",children:"Don't include"}),n.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-700 text-xs font-medium border border-gray-200 h-5 flex items-center",children:"Recommended"})]})]}),n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"companyNameOption",value:"optional",checked:N==="optional",onChange:ht=>Wt(ht.target.value),className:"w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400"}),n.jsx("p",{className:"text-sm text-gray-900",children:"Optional"})]}),n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"companyNameOption",value:"required",checked:N==="required",onChange:ht=>Wt(ht.target.value),className:"w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400"}),n.jsx("p",{className:"text-sm text-gray-900",children:"Required"})]})]}),N==="required"&&R&&n.jsx("div",{className:"mt-3 p-3 bg-gray-50 border border-gray-200",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Iu,{className:"w-4 h-4 text-gray-600 shrink-0 mt-0.5"}),n.jsx("div",{className:"flex-1",children:n.jsx("p",{className:"text-xs text-gray-700",children:"Requiring a company name may prevent some customers from checking out and reduce your store's total orders"})}),n.jsx("button",{onClick:()=>F(!1),className:"text-gray-600 hover:text-gray-900",children:n.jsx(xs,{className:"w-4 h-4"})})]})})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-2 font-medium",children:"Address line 2 (apartment, unit, etc.)"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"addressLine2Option",value:"dont_include",checked:z==="dont_include",onChange:ht=>ye(ht.target.value),className:"w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400"}),n.jsx("p",{className:"text-sm text-gray-900",children:"Don't include"})]}),n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"addressLine2Option",value:"optional",checked:z==="optional",onChange:ht=>ye(ht.target.value),className:"w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-sm text-gray-900",children:"Optional"}),n.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-700 text-xs font-medium border border-gray-200 h-5 flex items-center",children:"Recommended"})]})]}),n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"addressLine2Option",value:"required",checked:z==="required",onChange:ht=>ye(ht.target.value),className:"w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400"}),n.jsx("p",{className:"text-sm text-gray-900",children:"Required"})]})]}),z==="required"&&V&&n.jsx("div",{className:"mt-3 p-3 bg-gray-50 border border-gray-200",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Iu,{className:"w-4 h-4 text-gray-600 shrink-0 mt-0.5"}),n.jsx("div",{className:"flex-1",children:n.jsx("p",{className:"text-xs text-gray-700",children:"Requiring an address line 2 may prevent some customers from checking out and reduce your store's total orders"})}),n.jsx("button",{onClick:()=>W(!1),className:"text-gray-600 hover:text-gray-900",children:n.jsx(xs,{className:"w-4 h-4"})})]})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-2 font-medium",children:"Shipping address phone number"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"shippingPhoneOption",value:"dont_include",checked:Z==="dont_include",onChange:ht=>Be(ht.target.value),className:"w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400"}),n.jsx("p",{className:"text-sm text-gray-900",children:"Don't include"})]}),n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"shippingPhoneOption",value:"optional",checked:Z==="optional",onChange:ht=>Be(ht.target.value),className:"w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400"}),n.jsx("p",{className:"text-sm text-gray-900",children:"Optional"})]}),n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"shippingPhoneOption",value:"required",checked:Z==="required",onChange:ht=>Be(ht.target.value),className:"w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400"}),n.jsx("p",{className:"text-sm text-gray-900",children:"Required"})]})]})]})]}),n.jsxs("div",{className:"p-4 mb-4 border border-gray-200 bg-white/95",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Marketing options"}),n.jsx(Oa,{className:"w-4 h-4 text-gray-500"})]}),n.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Display a checkbox for customers to sign up for email or SMS marketing"}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(JT,{className:"w-4 h-4 text-gray-500"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Email"})]}),n.jsx(fo,{checked:q,onChange:tt})]}),q&&n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"You can choose to display a preselected checkbox in certain regions."}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("div",{onClick:()=>wt("ziplofy_recommended"),className:`flex-1 p-3 border cursor-pointer transition-colors ${K==="ziplofy_recommended"?"border-gray-900":"border-gray-200 hover:border-gray-300"}`,children:n.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"emailRegionOption",value:"ziplofy_recommended",checked:K==="ziplofy_recommended",onChange:ht=>wt(ht.target.value),className:"mt-1 w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Regions recommended by Ziplofy"}),n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"United States only"}),n.jsx("span",{className:"inline-block px-2 py-0.5 bg-gray-100 text-gray-700 text-xs font-medium border border-gray-200 h-5",children:"Automated"})]})]})}),n.jsx("div",{onClick:()=>wt("custom"),className:`flex-1 p-3 border cursor-pointer transition-colors ${K==="custom"?"border-gray-900":"border-gray-200 hover:border-gray-300"}`,children:n.jsxs("label",{className:"flex items-start gap-2 cursor-pointer w-full",children:[n.jsx("input",{type:"radio",name:"emailRegionOption",value:"custom",checked:K==="custom",onChange:ht=>wt(ht.target.value),className:"mt-1 w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Regions you choose"}),n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:Ee.length===0?"None selected":`${Ee.length} selected`}),n.jsx("button",{onClick:ht=>{ht.stopPropagation(),Te(!0)},className:"text-xs text-gray-700 cursor-pointer underline hover:no-underline",children:"Edit"})]})]})})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(FD,{className:"w-4 h-4 text-gray-500"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"SMS"})]}),n.jsx(fo,{checked:Q,onChange:Ut})]}),Q&&n.jsxs("p",{className:"text-xs text-gray-600",children:["To launch SMS campaigns, you need to install an"," ",n.jsx("button",{className:"text-gray-700 cursor-pointer underline hover:no-underline",children:"SMS App"}),"."]})]})]}),n.jsxs("div",{className:"p-4 mb-4 border border-gray-200 bg-white/95",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Tipping"}),n.jsx(Oa,{className:"w-4 h-4 text-gray-500"})]}),n.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Customers can choose between 3 presets or enter a custom amount"}),n.jsxs("label",{className:`flex items-center gap-3 cursor-pointer ${Ie?"mb-4":""}`,children:[n.jsx("input",{type:"checkbox",checked:Ie,onChange:ht=>er(ht.target.checked),className:"w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Show tipping options at checkout"})]}),Ie&&n.jsx("div",{className:"mb-4",children:n.jsxs("div",{className:"flex gap-3 items-center",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Preset 1"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:M,onChange:ht=>U(ht.target.value),className:"w-full px-3 py-2 pr-8 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 text-sm"}),n.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"%"})]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Preset 2"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:J,onChange:ht=>ce(ht.target.value),className:"w-full px-3 py-2 pr-8 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 text-sm"}),n.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"%"})]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Preset 3"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:ue,onChange:ht=>xe(ht.target.value),className:"w-full px-3 py-2 pr-8 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 text-sm"}),n.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"%"})]})]})]})}),Ie&&n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:he,onChange:ht=>zr(ht.target.checked),className:"w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Hide tipping options until customers choose to add a tip"})]})]}),n.jsxs("div",{className:"p-4 mb-4 border border-gray-200 bg-white/95",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-3",children:"Checkout language"}),n.jsx("div",{className:"p-3 border border-gray-200",children:n.jsx("input",{type:"text",value:"English",disabled:!0,className:"w-full px-3 py-2 border border-gray-200 bg-gray-50 text-gray-500 cursor-not-allowed text-sm"})})]}),n.jsxs("div",{className:"p-4 mb-4 border border-gray-200 bg-white/95",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-4",children:"Advanced preferences"}),n.jsx("div",{onClick:()=>lt(!0),className:"p-3 border border-gray-200 mb-3 cursor-pointer hover:bg-gray-50 transition-colors",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[n.jsx(Vh,{className:"w-5 h-5 text-gray-500"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Address collection"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Manage how you collect shipping and billing addresses"})]})]}),n.jsx(Pa,{className:"w-4 h-4 text-gray-500"})]})}),n.jsx("div",{onClick:()=>ie(!0),className:"p-3 border border-gray-200 cursor-pointer hover:bg-gray-50 transition-colors",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[n.jsx(Sb,{className:"w-5 h-5 text-gray-500"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Add-to-cart limit"}),n.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-700 text-xs font-medium border border-gray-200 h-5 flex items-center",children:"Recommended"})]}),n.jsx("p",{className:"text-xs text-gray-600",children:"Protects your available inventory quantities from being revealed"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(fo,{checked:Le,onChange:rn}),n.jsx(Pa,{className:"w-4 h-4 text-gray-500"})]})]})})]}),n.jsxs("div",{className:"p-4 border border-gray-200 bg-white/95",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Checkout rules"}),n.jsx(Oa,{className:"w-4 h-4 text-gray-500"})]}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Rules set parameters for how the cart or checkout responds to different customer scenarios. You can set product limits, perform age verification and more."}),n.jsxs("p",{className:"text-xs text-gray-600",children:["There are no apps installed with rules for checkout or cart. Visit the"," ",n.jsx("button",{className:"text-gray-700 cursor-pointer underline hover:no-underline",children:"Ziplofy App Store"})," ","to install one."]})]}),n.jsx(un,{open:Ge,onClose:()=>ie(!1),maxWidth:"sm",title:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Add-to-cart limit"}),n.jsx(Oa,{className:"w-[18px] h-[18px] text-gray-500"})]}),actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>ie(!1),className:"px-4 py-2 text-gray-900 rounded-lg hover:bg-gray-100 transition-colors",children:"Cancel"}),n.jsx("button",{disabled:!0,className:"px-4 py-2 bg-gray-400 text-white rounded-lg cursor-not-allowed",children:"Done"})]}),children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("p",{className:"text-base text-gray-900",children:"Set a maximum quantity per item that can be added to a cart."}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-500 text-xs font-medium rounded h-5 flex items-center",children:"Recommended"}),n.jsx(fo,{checked:Xe,onChange:Ur})]})]}),n.jsx("p",{className:"text-sm text-gray-500",children:"Protects your available inventory quantities from being revealed whenever they are higher than this limit."})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-2 font-medium",children:"Limit"}),n.jsx("input",{type:"text",value:_e,onChange:ht=>le(ht.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),n.jsx("p",{className:"text-sm text-gray-500",children:"Your store's recommended limit is 50"})]})}),n.jsx(un,{open:dt,onClose:()=>lt(!1),maxWidth:"sm",title:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Address collection"}),n.jsx(Oa,{className:"w-[18px] h-[18px] text-gray-500"})]}),actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>lt(!1),className:"px-4 py-2 text-gray-900 rounded-lg hover:bg-gray-100 transition-colors",children:"Cancel"}),n.jsx("button",{disabled:!0,className:"px-4 py-2 bg-gray-400 text-white rounded-lg cursor-not-allowed",children:"Done"})]}),children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:ft,onChange:ht=>_n(ht.target.checked),className:"mt-1 w-4 h-4 text-gray-900 border-gray-300 rounded focus:ring-gray-900"}),n.jsx("p",{className:"text-base font-medium text-gray-900",children:"Use the shipping address as the billing address by default"})]}),n.jsx("p",{className:"text-sm text-gray-500 ml-7",children:"The billing address can still be edited"})]})}),n.jsx(un,{open:re,onClose:()=>Te(!1),maxWidth:"sm",title:n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Edit regions"}),actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>Te(!1),className:"px-4 py-2 text-gray-900 rounded-lg hover:bg-gray-100 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:()=>Te(!1),className:"px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors",children:"Done"})]}),children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Regions"}),n.jsxs("p",{className:"text-sm text-gray-500",children:[Ee.length," of ",r||a.length," selected"]})]}),n.jsx(KS,{tabs:In,activeTab:G,onTabChange:ar}),n.jsxs("div",{className:"relative",children:[n.jsx(Ro,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),n.jsx("input",{type:"text",placeholder:"Search",value:Se,onChange:ht=>fe(ht.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),n.jsx("div",{className:"max-h-[400px] overflow-y-auto border border-gray-200 rounded",children:e?n.jsx("div",{className:"p-6 text-center",children:n.jsx("p",{className:"text-sm text-gray-500",children:"Loading countries..."})}):n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-200",children:[n.jsx("input",{type:"checkbox",checked:Er,ref:ht=>{ht&&(ht.indeterminate=jr&&!Er)},onChange:ht=>br(ht.target.checked),className:"w-4 h-4 text-gray-900 border-gray-300 rounded focus:ring-gray-900"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Regions"}),n.jsxs("p",{className:"text-xs text-gray-500",children:[Ee.length,"/",a.length||r]})]})]}),on.map(ht=>{const vr=ee.includes(ht.iso2);return n.jsxs("div",{className:"flex items-center gap-3 p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-200 last:border-b-0",children:[n.jsx("input",{type:"checkbox",checked:Ee.includes(ht._id),onChange:Rn=>pn(ht._id,Rn.target.checked),className:"w-4 h-4 text-gray-900 border-gray-300 rounded focus:ring-gray-900"}),n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xl",children:ht.flagEmoji||""}),n.jsxs("p",{className:"text-sm text-gray-900",children:[ht.iso2," ",ht.name]}),vr&&n.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-500 text-xs font-medium rounded h-5 flex items-center",children:"Recommended"})]})})]},ht._id)})]})})]})})]})})},D2=yn(n.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"})),QA=f.createContext(void 0),Wpe=({children:a})=>{const[r,e]=f.useState(null),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async m=>{try{s(!0),i(null);const y=await Ke.get(`/return-rules/store/${m}`),{success:x,data:b,message:v}=y.data;if(!x)throw new Error(v||"Failed to fetch return rules");return e(b||null),b||null}catch(y){const x=y?.response?.data?.message||y?.message||"Failed to fetch return rules";throw i(x),new Error(x)}finally{s(!1)}},[]),c=f.useCallback(async m=>{try{s(!0),i(null);const y=await Ke.post("/return-rules",m),{success:x,data:b,message:v}=y.data;if(!x)throw new Error(v||"Failed to create return rules");return e(b),b}catch(y){const x=y?.response?.data?.message||y?.message||"Failed to create return rules";throw i(x),new Error(x)}finally{s(!1)}},[]),d=f.useCallback(async(m,y)=>{try{s(!0),i(null);const x=await Ke.put(`/return-rules/${m}`,y),{success:b,data:v,message:j}=x.data;if(!b)throw new Error(j||"Failed to update return rules");return e(v),v}catch(x){const b=x?.response?.data?.message||x?.message||"Failed to update return rules";throw i(b),new Error(b)}finally{s(!1)}},[]),h={rules:r,loading:t,error:o,getByStoreId:l,createRules:c,updateRules:d};return n.jsx(QA.Provider,{value:h,children:a})},F2=()=>{const a=f.useContext(QA);if(!a)throw new Error("useReturnRules must be used within a ReturnRulesProvider");return a},Hpe=()=>{const a=mr(),{activeStoreId:r}=fn(),{createRules:e,loading:t}=F2(),[s,o]=gr.useState(!1),[i,l]=gr.useState("30"),[c,d]=gr.useState(""),[h,m]=gr.useState("free"),[y,x]=gr.useState(""),[b,v]=gr.useState(!1),[j,S]=gr.useState(""),k=async()=>{r&&(await e({storeId:r,enabled:s,returnWindow:i==="custom"?c||"0":i,returnShippingCost:h==="customer"?"customer provides return shipping":h==="flat"?"flat rate return shipping":"free return shipping",flatRate:h==="flat"?Number(y||0):void 0,chargeRestockingFree:b,restockingFee:b?Number(j||0):void 0}),a("/settings/policies"))};return n.jsxs(Et,{children:[n.jsxs(Et,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[n.jsxs(Et,{sx:{display:"flex",alignItems:"center",gap:1},children:[n.jsx($n,{onClick:()=>a(-1),size:"small",children:n.jsx(D2,{})}),n.jsx(et,{variant:"h4",sx:{fontWeight:700},children:"Create return rules"})]}),n.jsx($r,{variant:s?"outlined":"contained",onClick:()=>o(N=>!N),children:s?"Turn off":"Turn on"})]}),n.jsxs(ta,{elevation:0,sx:{p:3,mb:3,border:"1px solid #e5e7eb"},children:[n.jsx(et,{variant:"subtitle1",sx:{fontWeight:700,mb:1},children:"Return window"}),n.jsxs(KE,{value:i,onChange:N=>l(N.target.value),children:[n.jsx(Ql,{value:"14",control:n.jsx(ku,{}),label:"14 days"}),n.jsx(Ql,{value:"30",control:n.jsx(ku,{}),label:"30 days"}),n.jsx(Ql,{value:"90",control:n.jsx(ku,{}),label:"90 days"}),n.jsx(Ql,{value:"unlimited",control:n.jsx(ku,{}),label:"Unlimited"}),n.jsx(Ql,{value:"custom",control:n.jsx(ku,{}),label:"Custom days"})]}),i==="custom"&&n.jsx(Pn,{size:"small",label:"Number of days",value:c,onChange:N=>d(N.target.value),sx:{mt:1,maxWidth:220}}),n.jsx(Go,{sx:{my:3}}),n.jsx(et,{variant:"subtitle1",sx:{fontWeight:700,mb:.5},children:"Return shipping cost"}),n.jsxs(KE,{value:h,onChange:N=>m(N.target.value),children:[n.jsx(Ql,{value:"customer",control:n.jsx(ku,{}),label:"Customer provides return shipping"}),n.jsx(Ql,{value:"free",control:n.jsx(ku,{}),label:"Free return shipping"}),n.jsx(Ql,{value:"flat",control:n.jsx(ku,{}),label:"Flat rate return shipping"})]}),h==="flat"&&n.jsx(Pn,{size:"small",type:"number",label:"Flat rate",placeholder:"0.00",value:y,onChange:N=>x(N.target.value),sx:{mt:1,maxWidth:220},InputProps:{startAdornment:n.jsx(Et,{component:"span",sx:{mr:1},children:""})}}),n.jsx(Go,{sx:{my:3}}),n.jsx(et,{variant:"subtitle1",sx:{fontWeight:700,mb:1},children:"Restocking fee"}),n.jsx(Ql,{control:n.jsx(Tle,{checked:b,onChange:N=>v(N.target.checked)}),label:"Charge restocking fee"}),b&&n.jsx(Pn,{size:"small",type:"number",label:"Restocking fee (%)",placeholder:"0",value:j,onChange:N=>S(N.target.value),sx:{mt:1,maxWidth:220}})]}),n.jsx(Et,{sx:{display:"flex",justifyContent:"flex-end"},children:n.jsx($r,{variant:"contained",onClick:k,disabled:t||!r,children:"Create"})})]})},JA=f.createContext(void 0),qpe=({children:a})=>{const[r,e]=f.useState(null),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async y=>{try{s(!0),i(null);const x=await Ke.get(`/customer-account-settings/store/${y}`),{success:b,data:v,message:j}=x.data;if(!b)throw new Error(j||"Failed to fetch customer account settings");return e(v),v}catch(x){const b=x?.response?.data?.message||x?.message||"Failed to fetch customer account settings";throw i(b),new Error(b)}finally{s(!1)}},[]),c=f.useCallback(async(y,x)=>{try{s(!0),i(null);const b=await Ke.put(`/customer-account-settings/${y}`,x),{success:v,data:j,message:S}=b.data;if(!v)throw new Error(S||"Failed to update customer account settings");return e(j),j}catch(b){const v=b?.response?.data?.message||b?.message||"Failed to update customer account settings";throw i(v),new Error(v)}finally{s(!1)}},[]),d=f.useCallback(()=>{e(null),i(null)},[]),h=f.useCallback(()=>{i(null)},[]),m=f.useMemo(()=>({settings:r,loading:t,error:o,fetchByStoreId:l,update:c,clear:d,clearError:h}),[r,t,o,l,c,d,h]);return n.jsx(JA.Provider,{value:m,children:a})},uw=()=>{const a=f.useContext(JA);if(!a)throw new Error("useCustomerAccountSettings must be used within a CustomerAccountSettingsProvider");return a},Gpe=()=>{const a=mr(),{activeStoreId:r}=fn(),{settings:e,loading:t,error:s,fetchByStoreId:o,update:i}=uw(),[l,c]=f.useState(null),[d,h]=f.useState(!0),[m,y]=f.useState(!1),[x,b]=f.useState(!1),v=f.useRef(null),j=f.useRef(null);f.useEffect(()=>{r&&o(r).catch(()=>{})},[r,o]),f.useEffect(()=>{if(!e){h(!0),y(!1);return}h(!!e.shopAuth?.enabled),y(!1)},[e]),f.useEffect(()=>{if(!e){y(!1);return}y(!!e.shopAuth?.enabled!==d)},[d,e]),f.useEffect(()=>{const H=V=>{v.current&&!v.current.contains(V.target)&&j.current&&!j.current.contains(V.target)&&N()};return l&&document.addEventListener("mousedown",H),()=>{document.removeEventListener("mousedown",H)}},[l]);const S=()=>{a("/settings/customer-accounts")},k=(H,V)=>{c({element:H.currentTarget,id:V})},N=()=>{c(null)},P=()=>{h(!1),N()},R=()=>{h(!0),N()},F=async()=>{if(e?._id)try{b(!0),await i(e._id,{shopAuth:{enabled:d}}),y(!1)}catch{}finally{b(!1)}},z=t||x||!e;return n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 border-b border-gray-200 pb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:S,className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(Hn,{className:"w-5 h-5"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Authentication"})]}),e&&n.jsx("button",{onClick:F,disabled:!m||z,className:"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-700 min-w-[100px] disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:x?"Saving...":"Save"})]}),n.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Manage sign-in options and account access"}),s&&n.jsx("div",{className:"bg-gray-50 border border-gray-200 text-gray-700 px-4 py-3 mb-4 text-xs",children:s}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-4",children:"Sign-in options"}),n.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-purple-600 flex items-center justify-center",children:n.jsx("div",{className:`w-4 h-4 border-2 border-white border-t-transparent border-r-transparent rounded-full ${d?"animate-spin":""}`})}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Shop"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[d?n.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-700 text-xs font-medium border border-gray-200",children:"On"}):n.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-500 text-xs font-medium border border-gray-200",children:"Off"}),n.jsxs("div",{className:"relative",children:[n.jsx("button",{ref:j,onClick:H=>k(H,"shop"),className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-50 transition-colors",disabled:z,children:n.jsx(Ud,{className:"w-4 h-4"})}),l?.id==="shop"&&n.jsx("div",{ref:v,className:"absolute right-0 top-full mt-1 bg-white border border-gray-200 z-10 min-w-[120px]",children:d?n.jsx("button",{onClick:P,disabled:z,className:"w-full px-3 py-2 text-left text-xs text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Turn off"}):n.jsx("button",{onClick:R,disabled:z,className:"w-full px-3 py-2 text-left text-xs text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Turn on"})})]})]})]})]}),n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-4",children:"Available connections"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("img",{src:"https://www.google.com/favicon.ico",alt:"Google",className:"w-5 h-5",onError:H=>{const V=H.target;V.style.display="none"}}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Google"})]}),n.jsx("button",{onClick:()=>a("/settings/customer-accounts/authentication/google"),className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Connect"})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-5 h-5 bg-blue-600 rounded-full flex items-center justify-center text-white text-xs font-bold",children:"f"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Facebook"})]}),n.jsx("button",{onClick:()=>a("/settings/customer-accounts/authentication/facebook"),className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Connect"})]})]})]})]})]})})},Kpe=yn(n.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6m0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20"})),Yg=yn(n.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})),e6=yn(n.jsx("path",{d:"M17.77 3.77 16 2 6 12l10 10 1.77-1.77L9.54 12z"})),t6=yn(n.jsx("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"})),nT=yn(n.jsx("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 18H4V8h16z"})),Ype=yn(n.jsx("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"})),tS=yn(n.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})),_u=yn(n.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),zh=yn(n.jsx("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"})),uy=yn(n.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),Zpe=yn(n.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8zm7.5-5-1-1h-5l-1 1H5v2h14V4z"})),aT=yn([n.jsx("path",{d:"M12.79 21 3 11.21v2c0 .53.21 1.04.59 1.41l7.79 7.79c.78.78 2.05.78 2.83 0l6.21-6.21c.78-.78.78-2.05 0-2.83z"},"0"),n.jsx("path",{d:"M11.38 17.41c.78.78 2.05.78 2.83 0l6.21-6.21c.78-.78.78-2.05 0-2.83L12.63.58C12.25.21 11.74 0 11.21 0H5C3.9 0 3 .9 3 2v6.21c0 .53.21 1.04.59 1.41zM7.25 3c.69 0 1.25.56 1.25 1.25S7.94 5.5 7.25 5.5 6 4.94 6 4.25 6.56 3 7.25 3"},"1")]),Xpe=yn(n.jsx("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"})),Uh=yn(n.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"})),Qpe=yn([n.jsx("path",{d:"M13.95 13H9V8.05l5.61-5.61C13.78 2.16 12.9 2 12 2c-4.2 0-8 3.22-8 8.2 0 3.32 2.67 7.25 8 11.8 5.33-4.55 8-8.48 8-11.8 0-1.01-.16-1.94-.45-2.8z"},"0"),n.jsx("path",{d:"M11 11h2.12l6.16-6.16-2.12-2.12L11 8.88zm9.71-9L20 1.29c-.2-.19-.45-.29-.71-.29-.13 0-.48.07-.71.29l-.72.72 2.12 2.12.72-.72c.4-.39.4-1.02.01-1.41"},"1")]),Jpe=yn(n.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"})),sT=yn(n.jsx("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"})),ehe=yn(n.jsx("path",{d:"M10 18h4v-2h-4zM3 6v2h18V6zm3 7h12v-2H6z"})),r6=yn(n.jsx("path",{d:"M12.545,10.239v3.821h5.445c-0.712,2.315-2.647,3.972-5.445,3.972c-3.332,0-6.033-2.701-6.033-6.032s2.701-6.032,6.033-6.032c1.498,0,2.866,0.549,3.921,1.453l2.814-2.814C17.503,2.988,15.139,2,12.545,2C7.021,2,2.543,6.477,2.543,12s4.478,10,10.002,10c8.396,0,10.249-7.85,9.426-11.748L12.545,10.239z"})),the=yn(n.jsx("path",{fillRule:"evenodd",d:"M3 3v8h8V3zm6 6H5V5h4zm-6 4v8h8v-8zm6 6H5v-4h4zm4-16v8h8V3zm6 6h-4V5h4zm-6 4v8h8v-8zm6 6h-4v-4h4z"})),oT=yn(n.jsx("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"})),iT=yn(n.jsx("path",{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m13.5-9 1.96 2.5H17V9.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"})),lT=yn(n.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"})),rhe=yn(n.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2M9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9zm9 14H6V10h12zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2"})),nhe=yn(n.jsx("path",{d:"M11 7 9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5zm9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8z"})),ahe=yn(n.jsx("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"})),n6=yn(n.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"})),B2=yn(n.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),she=yn(n.jsx("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),ohe=yn(n.jsx("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02z"})),z2=yn(n.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"})),ihe=yn(n.jsx("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11z"})),lhe=yn(n.jsx("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92"})),U2=yn(n.jsx("path",{d:"M18 6h-2c0-2.21-1.79-4-4-4S8 3.79 8 6H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m-8 4c0 .55-.45 1-1 1s-1-.45-1-1V8h2zm2-6c1.1 0 2 .9 2 2h-4c0-1.1.9-2 2-2m4 6c0 .55-.45 1-1 1s-1-.45-1-1V8h2z"})),a6=yn(n.jsx("path",{d:"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2M1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2"})),Hc=yn(n.jsx("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})),che=yn(n.jsx("path",{d:"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28z"})),dhe=yn(n.jsx("path",{d:"m21.9 8.89-1.05-4.37c-.22-.9-1-1.52-1.91-1.52H5.05c-.9 0-1.69.63-1.9 1.52L2.1 8.89c-.24 1.02-.02 2.06.62 2.88.08.11.19.19.28.29V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-6.94c.09-.09.2-.18.28-.28.64-.82.87-1.87.62-2.89m-2.99-3.9 1.05 4.37c.1.42.01.84-.25 1.17-.14.18-.44.47-.94.47-.61 0-1.14-.49-1.21-1.14L16.98 5zM13 5h1.96l.54 4.52c.05.39-.07.78-.33 1.07-.22.26-.54.41-.95.41-.67 0-1.22-.59-1.22-1.31zM8.49 9.52 9.04 5H11v4.69c0 .72-.55 1.31-1.29 1.31-.34 0-.65-.15-.89-.41-.25-.29-.37-.68-.33-1.07m-4.45-.16L5.05 5h1.97l-.58 4.86c-.08.65-.6 1.14-1.21 1.14-.49 0-.8-.29-.93-.47-.27-.32-.36-.75-.26-1.17M5 19v-6.03c.08.01.15.03.23.03.87 0 1.66-.36 2.24-.95.6.6 1.4.95 2.31.95.87 0 1.65-.36 2.23-.93.59.57 1.39.93 2.29.93.84 0 1.64-.35 2.24-.95.58.59 1.37.95 2.24.95.08 0 .15-.02.23-.03V19z"})),uhe=yn([n.jsx("path",{d:"M21 12.22C21 6.73 16.74 3 12 3c-4.69 0-9 3.65-9 9.28-.6.34-1 .98-1 1.72v2c0 1.1.9 2 2 2h1v-6.1c0-3.87 3.13-7 7-7s7 3.13 7 7V19h-8v2h8c1.1 0 2-.9 2-2v-1.22c.59-.31 1-.92 1-1.64v-2.3c0-.7-.41-1.31-1-1.62"},"0"),n.jsx("circle",{cx:"9",cy:"13",r:"1"},"1"),n.jsx("circle",{cx:"15",cy:"13",r:"1"},"2"),n.jsx("path",{d:"M18 11.03C17.52 8.18 15.04 6 12.05 6c-3.03 0-6.29 2.51-6.03 6.45 2.47-1.01 4.33-3.21 4.86-5.89 1.31 2.63 4 4.44 7.12 4.47"},"3")]),fhe=yn(n.jsx("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"})),phe=yn(n.jsx("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm-2 16-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9z"})),hhe=yn(n.jsx("path",{d:"M3 14h4v-4H3zm0 5h4v-4H3zM3 9h4V5H3zm5 5h13v-4H8zm0 5h13v-4H8zM8 5v4h13V5z"})),N1=yn(n.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"})),cT={p:3,borderRadius:2,border:"1px solid #e5e7eb",backgroundColor:"#fff"},k1=["https://shopify.com","https://example.myshopify.com"],_1=["https://shopify.com/authentication/placeholder/social/facebook/callback","https://example.myshopify.com/authentication/social/facebook/callback"],E1=["https://shopify.com/authentication/placeholder/social/facebook/revoke","https://example.myshopify.com/authentication/social/facebook/revoke"],mhe=()=>{const a=mr(),{activeStoreId:r}=fn(),{settings:e,loading:t,error:s,fetchByStoreId:o,update:i}=uw(),[l,c]=f.useState(!1),[d,h]=f.useState(""),[m,y]=f.useState(""),[x,b]=f.useState(k1),[v,j]=f.useState(_1),[S,k]=f.useState(E1),[N,P]=f.useState(!1),[R,F]=f.useState(!1),z=()=>{a("/settings/customer-accounts/authentication")},H=Z=>navigator.clipboard.writeText(Z);f.useEffect(()=>{r&&o(r).catch(()=>{})},[r,o]),f.useEffect(()=>{if(!e?.facebookAuth){c(!1),h(""),y(""),b(k1),j(_1),k(E1),P(!1);return}c(!!e.facebookAuth.enabled),h(e.facebookAuth.appId||""),y(e.facebookAuth.appSecret||""),b(e.facebookAuth.domains?.length?e.facebookAuth.domains:k1),j(e.facebookAuth.redirectURLs?.length?e.facebookAuth.redirectURLs:_1),k(e.facebookAuth.deauthorizeCallbackURLs?.length?e.facebookAuth.deauthorizeCallbackURLs:E1),P(!1)},[e]),f.useEffect(()=>{if(!e){P(!1);return}const Z=!!e.facebookAuth?.enabled,A=e.facebookAuth?.appId||"",q=e.facebookAuth?.appSecret||"",I=l!==Z||d.trim()!==A||m.trim()!==q;P(I)},[l,d,m,e]);const V=async()=>{if(e?._id)try{F(!0),await i(e._id,{facebookAuth:{enabled:l,appId:d.trim(),appSecret:m.trim(),domains:x,redirectURLs:v,deauthorizeCallbackURLs:S}}),P(!1)}catch{}finally{F(!1)}},W=t||R||!e;return n.jsxs(Et,{sx:{maxWidth:960,mx:"auto",py:4},children:[n.jsxs(_r,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:2},children:[n.jsx($n,{onClick:z,size:"small",sx:{border:"1px solid rgba(17, 24, 39, 0.1)",backgroundColor:"#fff"},children:n.jsx(D2,{fontSize:"small"})}),n.jsx(B2,{sx:{color:"#374151",fontSize:20}}),n.jsx(t6,{sx:{color:"#9ca3af",fontSize:16}}),n.jsx(et,{variant:"h4",sx:{fontWeight:600,color:"#111827",flexGrow:1},children:"Sign in with Facebook"}),e&&n.jsx($r,{variant:"contained",color:"primary",onClick:V,disabled:!N||W,sx:{textTransform:"none",fontWeight:600,borderRadius:1.5,minWidth:120},children:R?"Saving...":"Save"}),n.jsx(xb,{checked:l,onChange:Z=>c(Z.target.checked),disabled:W,sx:{ml:2,"& .MuiSwitch-switchBase.Mui-checked":{color:"#111827"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#111827"}}}),n.jsx(et,{variant:"body2",sx:{color:"#6b7280"},children:l?"On":"Off"})]}),n.jsx(et,{variant:"body1",sx:{color:"#6b7280",mb:4},children:"Enable customers to sign in using their Facebook account"}),s&&n.jsx(ta,{elevation:0,sx:{mb:3,p:2,borderRadius:1.5,border:"1px solid #fecaca",backgroundColor:"#fef2f2",color:"#b91c1c"},children:s}),n.jsxs(_r,{spacing:3,children:[n.jsxs(ta,{elevation:0,sx:cT,children:[n.jsx(et,{variant:"h6",sx:{fontWeight:600,color:"#111827",mb:2},children:"Setup instructions"}),n.jsxs(et,{variant:"body2",sx:{color:"#4b5563",mb:3},children:["In the"," ",n.jsx(Io,{href:"https://developers.facebook.com",target:"_blank",rel:"noopener noreferrer",sx:{color:"#2563eb",textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"Meta for Developers"})," ",'console, create a new App and add "Facebook Login" using the instructions provided in the'," ",n.jsx(Io,{href:"#",sx:{color:"#2563eb",textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"help documentation"})," ","and the following configuration."]}),n.jsxs(Et,{sx:{mb:3},children:[n.jsx(et,{variant:"subtitle2",sx:{fontWeight:600,color:"#111827",mb:1},children:"Domains"}),n.jsx(_r,{spacing:1.5,children:x.map((Z,A)=>n.jsx(Pn,{fullWidth:!0,value:Z,InputProps:{readOnly:!0,endAdornment:n.jsx(Zi,{position:"end",children:n.jsx($n,{size:"small",onClick:()=>H(Z),sx:{color:"#6b7280"},children:n.jsx(zh,{fontSize:"small"})})}),sx:{borderRadius:1.5,backgroundColor:"#f9fafb","& .MuiOutlinedInput-notchedOutline":{borderColor:"#e5e7eb"}}},size:"small"},A))})]}),n.jsxs(Et,{sx:{mb:3},children:[n.jsx(et,{variant:"subtitle2",sx:{fontWeight:600,color:"#111827",mb:1},children:"Redirect URLs"}),n.jsx(_r,{spacing:1.5,children:v.map((Z,A)=>n.jsx(Pn,{fullWidth:!0,value:Z,InputProps:{readOnly:!0,endAdornment:n.jsx(Zi,{position:"end",children:n.jsx($n,{size:"small",onClick:()=>H(Z),sx:{color:"#6b7280"},children:n.jsx(zh,{fontSize:"small"})})}),sx:{borderRadius:1.5,backgroundColor:"#f9fafb","& .MuiOutlinedInput-notchedOutline":{borderColor:"#e5e7eb"}}},size:"small"},A))})]}),n.jsxs(Et,{children:[n.jsx(et,{variant:"subtitle2",sx:{fontWeight:600,color:"#111827",mb:1},children:"Deauthorize callback URLs"}),n.jsx(_r,{spacing:1.5,children:S.map((Z,A)=>n.jsx(Pn,{fullWidth:!0,value:Z,InputProps:{readOnly:!0,endAdornment:n.jsx(Zi,{position:"end",children:n.jsx($n,{size:"small",onClick:()=>H(Z),sx:{color:"#6b7280"},children:n.jsx(zh,{fontSize:"small"})})}),sx:{borderRadius:1.5,backgroundColor:"#f9fafb","& .MuiOutlinedInput-notchedOutline":{borderColor:"#e5e7eb"}}},size:"small"},A))})]})]}),n.jsxs(ta,{elevation:0,sx:cT,children:[n.jsx(et,{variant:"h6",sx:{fontWeight:600,color:"#111827",mb:2},children:"Credentials"}),n.jsx(et,{variant:"body2",sx:{color:"#4b5563",mb:3},children:"Once created, copy the App ID and App Secret shown by Facebook and paste them below."}),n.jsxs(_r,{spacing:2,children:[n.jsxs(Et,{children:[n.jsx(Pn,{fullWidth:!0,label:"App ID",required:!0,placeholder:"From Facebook Developers portal",value:d,onChange:Z=>h(Z.target.value),disabled:W,sx:{"& .MuiOutlinedInput-root":{borderRadius:1.5}}}),n.jsx(et,{variant:"caption",sx:{color:"#6b7280",mt:.5,display:"block"},children:"From Facebook Developers portal"})]}),n.jsxs(Et,{children:[n.jsx(Pn,{fullWidth:!0,label:"App Secret",required:!0,placeholder:"From Facebook Developers portal",value:m,onChange:Z=>y(Z.target.value),type:"password",disabled:W,sx:{"& .MuiOutlinedInput-root":{borderRadius:1.5}}}),n.jsx(et,{variant:"caption",sx:{color:"#6b7280",mt:.5,display:"block"},children:"From Facebook Developers portal"})]})]})]})]})]})},dT={p:3,borderRadius:2,border:"1px solid #e5e7eb",backgroundColor:"#fff"},ghe=()=>{const a=mr(),{activeStoreId:r}=fn(),{settings:e,loading:t,error:s,fetchByStoreId:o,update:i}=uw(),[l,c]=f.useState(!1),[d,h]=f.useState(""),[m,y]=f.useState(""),[x,b]=f.useState([]),[v,j]=f.useState([]),[S,k]=f.useState([]),[N,P]=f.useState(!1),[R,F]=f.useState(!1),z=()=>{a("/settings/customer-accounts/authentication")},H=I=>{navigator.clipboard.writeText(I)},V=f.useMemo(()=>["https://shopify.com","https://example.myshopify.com"],[]),W=f.useMemo(()=>["https://shopify.com/authentication/placeholder/social/google/callback","https://example.myshopify.com/authentication/social/google/callback"],[]),Z=f.useMemo(()=>["https://shopify.com/authentication/placeholder/social/google/revoke","https://example.myshopify.com/authentication/social/google/revoke"],[]);f.useEffect(()=>{r&&o(r).catch(()=>{})},[r,o]),f.useEffect(()=>{if(!e?.googleAuth){c(!1),h(""),y(""),b(V),j(W),k(Z),P(!1);return}c(!!e.googleAuth.enabled),h(e.googleAuth.clientId||""),y(e.googleAuth.clientSecret||""),b(e.googleAuth.authorizedJavaScriptOrigins?.length?e.googleAuth.authorizedJavaScriptOrigins:V.slice()),j(e.googleAuth.authorizedRedirectURIs?.length?e.googleAuth.authorizedRedirectURIs:W.slice()),k(e.googleAuth.deauthorizeCallbackURIs?.length?e.googleAuth.deauthorizeCallbackURIs:Z.slice()),P(!1)},[e,V,W,Z]),f.useEffect(()=>{if(!e?.googleAuth){P(!1);return}const I=l!==!!e.googleAuth.enabled||d.trim()!==(e.googleAuth.clientId||"")||m.trim()!==(e.googleAuth.clientSecret||"");P(I)},[l,d,m,e]);const A=async()=>{if(e?._id)try{F(!0),await i(e._id,{googleAuth:{enabled:l,clientId:d.trim(),clientSecret:m.trim(),authorizedJavaScriptOrigins:x,authorizedRedirectURIs:v,deauthorizeCallbackURIs:S}}),P(!1)}catch{}finally{F(!1)}},q=t||R||!e;return n.jsxs(Et,{sx:{maxWidth:960,mx:"auto",py:4},children:[n.jsxs(_r,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:2},children:[n.jsx($n,{onClick:z,size:"small",sx:{border:"1px solid rgba(17, 24, 39, 0.1)",backgroundColor:"#fff"},children:n.jsx(D2,{fontSize:"small"})}),n.jsx(B2,{sx:{color:"#374151",fontSize:20}}),n.jsx(t6,{sx:{color:"#9ca3af",fontSize:16}}),n.jsx(et,{variant:"h4",sx:{fontWeight:600,color:"#111827",flexGrow:1},children:"Sign in with Google"}),e&&n.jsx($r,{variant:"contained",onClick:A,disabled:!N||q,sx:{textTransform:"none",fontWeight:600,borderRadius:1.5,minWidth:120},children:R?"Saving...":"Save"}),n.jsx(xb,{checked:l,onChange:I=>c(I.target.checked),disabled:q,sx:{ml:2,"& .MuiSwitch-switchBase.Mui-checked":{color:"#111827"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#111827"}}}),n.jsx(et,{variant:"body2",sx:{color:"#6b7280"},children:l?"On":"Off"})]}),n.jsx(et,{variant:"body1",sx:{color:"#6b7280",mb:4},children:"Enable customers to sign in using their Google account"}),s&&n.jsx(ta,{elevation:0,sx:{mb:3,p:2,borderRadius:1.5,border:"1px solid #fecaca",backgroundColor:"#fef2f2",color:"#b91c1c"},children:s}),n.jsxs(_r,{spacing:3,children:[n.jsxs(ta,{elevation:0,sx:dT,children:[n.jsx(et,{variant:"h6",sx:{fontWeight:600,color:"#111827",mb:2},children:"Setup instructions"}),n.jsx(et,{variant:"body2",sx:{color:"#4b5563",mb:3},children:"In the Google Cloud Console, create or select a project using the instructions provided in the help documentation and the following configuration."}),n.jsxs(Et,{sx:{mb:3},children:[n.jsx(et,{variant:"subtitle2",sx:{fontWeight:600,color:"#111827",mb:1},children:"Application type"}),n.jsx(Pn,{fullWidth:!0,value:"Web application",InputProps:{readOnly:!0,sx:{borderRadius:1.5,backgroundColor:"#f9fafb","& .MuiOutlinedInput-notchedOutline":{borderColor:"#e5e7eb"}}},size:"small"})]}),n.jsxs(Et,{sx:{mb:3},children:[n.jsx(et,{variant:"subtitle2",sx:{fontWeight:600,color:"#111827",mb:1},children:"Authorized JavaScript origins"}),n.jsx(_r,{spacing:1.5,children:x.map((I,K)=>n.jsx(Pn,{fullWidth:!0,value:I,InputProps:{readOnly:!0,endAdornment:n.jsx(Zi,{position:"end",children:n.jsx($n,{size:"small",onClick:()=>H(I),sx:{color:"#6b7280"},children:n.jsx(zh,{fontSize:"small"})})}),sx:{borderRadius:1.5,backgroundColor:"#f9fafb","& .MuiOutlinedInput-notchedOutline":{borderColor:"#e5e7eb"}}},size:"small"},K))})]}),n.jsxs(Et,{sx:{mb:3},children:[n.jsx(et,{variant:"subtitle2",sx:{fontWeight:600,color:"#111827",mb:1},children:"Authorized redirect URIs"}),n.jsx(_r,{spacing:1.5,children:v.map((I,K)=>n.jsx(Pn,{fullWidth:!0,value:I,InputProps:{readOnly:!0,endAdornment:n.jsx(Zi,{position:"end",children:n.jsx($n,{size:"small",onClick:()=>H(I),sx:{color:"#6b7280"},children:n.jsx(zh,{fontSize:"small"})})}),sx:{borderRadius:1.5,backgroundColor:"#f9fafb","& .MuiOutlinedInput-notchedOutline":{borderColor:"#e5e7eb"}}},size:"small"},K))})]}),n.jsxs(Et,{children:[n.jsx(et,{variant:"subtitle2",sx:{fontWeight:600,color:"#111827",mb:1},children:"Deauthorize callback URIs"}),n.jsx(_r,{spacing:1.5,children:S.map((I,K)=>n.jsx(Pn,{fullWidth:!0,value:I,InputProps:{readOnly:!0,endAdornment:n.jsx(Zi,{position:"end",children:n.jsx($n,{size:"small",onClick:()=>H(I),sx:{color:"#6b7280"},children:n.jsx(zh,{fontSize:"small"})})}),sx:{borderRadius:1.5,backgroundColor:"#f9fafb","& .MuiOutlinedInput-notchedOutline":{borderColor:"#e5e7eb"}}},size:"small"},K))})]})]}),n.jsxs(ta,{elevation:0,sx:dT,children:[n.jsx(et,{variant:"h6",sx:{fontWeight:600,color:"#111827",mb:2},children:"Credentials"}),n.jsx(et,{variant:"body2",sx:{color:"#4b5563",mb:3},children:"Once the project is created, copy the Client ID and Client Secret shown by Google and paste them below."}),n.jsxs(_r,{spacing:2,children:[n.jsx(Pn,{fullWidth:!0,label:"Client ID",required:!0,placeholder:"From Google Console",value:d,onChange:I=>h(I.target.value),disabled:q,sx:{"& .MuiOutlinedInput-root":{borderRadius:1.5}}}),n.jsx(Pn,{fullWidth:!0,label:"Client Secret",required:!0,placeholder:"From Google Console",value:m,onChange:I=>y(I.target.value),type:"password",disabled:q,sx:{"& .MuiOutlinedInput-root":{borderRadius:1.5}}})]})]})]})]})},yhe=({accountUrl:a,onNavigateToAuthentication:r,onNavigateToDomains:e,selfServeReturns:t,onSelfServeReturnsChange:s,storeCredit:o,onStoreCreditChange:i,isControlsDisabled:l})=>n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Customer accounts"}),n.jsxs("div",{className:"group relative",children:[n.jsx(Oa,{className:"w-4 h-4 text-gray-500 cursor-help"}),n.jsx("div",{className:"absolute left-0 bottom-full mb-2 hidden group-hover:block z-10 w-64 p-2 bg-gray-900 text-white text-xs border border-gray-200",children:"Manage sign-in methods and account access"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Authentication"}),n.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:"Manage sign-in methods and account access"})]}),n.jsxs("button",{onClick:r,className:"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors flex items-center gap-2 self-start sm:self-center",children:["Manage",n.jsx(R1,{className:"w-4 h-4"})]})]}),n.jsx("div",{className:"border-t border-gray-200"}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Self-serve returns"}),n.jsxs("p",{className:"text-xs text-gray-600 mt-0.5",children:["Allow customers to request and manage returns. Customize what your customers can return with"," ",n.jsx("button",{className:"text-gray-700 hover:underline",children:"return rules"})]})]}),n.jsx(fo,{checked:t,onChange:s,disabled:l})]}),n.jsx("div",{className:"border-t border-gray-200"}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Store credit"}),n.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:"Allow customers to see and spend store credit"})]}),n.jsx(fo,{checked:o,onChange:i,disabled:l})]}),n.jsx("div",{className:"border-t border-gray-200"}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"URL"}),n.jsx("p",{className:"text-xs text-gray-600 mt-0.5 mb-2",children:"Use this URL anywhere you'd like customers to access customer accounts"}),n.jsx("input",{type:"text",value:a||"",readOnly:!0,className:"w-full px-3 py-2 border border-gray-200 bg-gray-50 text-sm text-gray-900 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("button",{onClick:e,className:"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors flex items-center gap-2 self-start sm:self-center",children:["Manage",n.jsx(R1,{className:"w-4 h-4"})]})]})]})]}),xhe=({showSignInLinks:a,onShowSignInLinksChange:r,accountVersion:e,onAccountVersionChange:t,isControlsDisabled:s})=>n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Sign-in links"}),n.jsxs("div",{className:"group relative",children:[n.jsx(Oa,{className:"w-4 h-4 text-gray-500 cursor-help"}),n.jsx("div",{className:"absolute left-0 bottom-full mb-2 hidden group-hover:block z-10 w-64 p-2 bg-gray-900 text-white text-xs border border-gray-200",children:"Show sign-in links in the header of online store and at checkout"})]})]}),n.jsx("p",{className:"text-xs text-gray-600",children:"Show sign-in links in the header of online store and at checkout"})]}),n.jsx(fo,{checked:a,onChange:r,disabled:s})]}),a?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-gray-50 border border-gray-200 p-3 mb-4 flex items-start gap-2",children:[n.jsx(Oa,{className:"w-4 h-4 shrink-0 mt-0.5 text-gray-600"}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Customers are required to sign in before checking out. To change this, go to"," ",n.jsx("button",{className:"text-gray-700 font-medium cursor-pointer hover:underline",children:"checkout settings"}),"."]})]}),n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Choose which version of customer accounts to link to"}),n.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[n.jsxs("div",{onClick:()=>!s&&t("recommended"),className:`flex-1 p-3 border transition-all cursor-pointer flex items-start gap-3 ${e==="recommended"?"border-gray-900":"border-gray-200"} ${s?"opacity-50 cursor-not-allowed":"hover:border-gray-300"}`,children:[n.jsx("div",{className:"mt-0.5",children:n.jsx("input",{type:"radio",value:"recommended",checked:e==="recommended",onChange:()=>t("recommended"),disabled:s,className:"w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400 focus:ring-1"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Customer accounts"}),n.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-700 text-xs font-medium border border-gray-200",children:"Recommended"})]}),n.jsx("p",{className:"text-xs text-gray-600",children:"Customers sign in with a one-time code sent to their email (no passwords)"})]})]}),n.jsxs("div",{onClick:()=>!s&&t("legacy"),className:`flex-1 p-3 border transition-all cursor-pointer flex items-start gap-3 ${e==="legacy"?"border-gray-900":"border-gray-200"} ${s?"opacity-50 cursor-not-allowed":"hover:border-gray-300"}`,children:[n.jsx("div",{className:"mt-0.5",children:n.jsx("input",{type:"radio",value:"legacy",checked:e==="legacy",onChange:()=>t("legacy"),disabled:s,className:"w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-400 focus:ring-1"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:"Legacy"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Customers create an account and sign in with email and password"})]})]})]})]}):n.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"Both versions are still accessible by URL"})]}),vhe=({open:a,onClose:r,onConfirm:e})=>n.jsx(un,{open:a,onClose:r,title:"Turn off self-serve returns?",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"px-4 py-2 border border-gray-300 text-gray-900 rounded-md hover:bg-gray-50 hover:border-gray-400 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition-colors",children:"Turn off self-serve returns"})]}),children:n.jsx("p",{className:"text-sm text-gray-600",children:"Customers will no longer be able to request returns from their accounts. You can still process any return requests that need your review."})}),bhe=()=>{const a=mr(),{activeStoreId:r,stores:e}=fn(),{settings:t,loading:s,error:o,fetchByStoreId:i,update:l}=uw(),[c,d]=f.useState(!1),[h,m]=f.useState("recommended"),[y,x]=f.useState(!1),[b,v]=f.useState(!1),[j,S]=f.useState(!1),[k,N]=f.useState(!1),[P,R]=f.useState(""),[F,z]=f.useState(!1),[H,V]=f.useState(!1),W=f.useMemo(()=>e.find(G=>G._id===r)||null,[e,r]);f.useEffect(()=>{r&&i(r).catch(()=>{})},[r,i]),f.useEffect(()=>{if(!t){R("");return}d(!!t.showSignInLinks),m(t.accountVersion),x(!!t.selfServeReturns),v(!!t.storeCredit);const Y=`https://ziplofy.com/${W?.storeName?W.storeName.toLowerCase().replace(/[^a-z0-9]+/g,"-"):"store"}/account`;R(t.customAccountUrl||Y)},[t,W]),f.useEffect(()=>{if(!t){z(!1);return}const G=c!==t.showSignInLinks||h!==t.accountVersion||y!==t.selfServeReturns||b!==t.storeCredit;z(G)},[t,c,h,y,b]);const Z=s||!t||H,A=f.useCallback(async()=>{if(t?._id)try{V(!0),await l(t._id,{showSignInLinks:c,accountVersion:h,selfServeReturns:y,storeCredit:b}),z(!1)}catch{}finally{V(!1)}},[t,c,h,y,b,l]),q=f.useCallback(G=>{d(G)},[]),I=f.useCallback(G=>{m(G)},[]),K=f.useCallback(G=>{y&&!G?(N(G),S(!0)):x(G)},[y]),D=f.useCallback(G=>{v(G)},[]),Q=f.useCallback(()=>{S(!1)},[]),oe=f.useCallback(()=>{x(k),S(!1)},[k]),re=f.useCallback(()=>{a("/settings/customer-accounts/authentication")},[a]),Te=f.useCallback(()=>{a("/settings/domains")},[a]);return n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4 border-b border-gray-200 pb-4",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Customer accounts"}),t&&n.jsx("button",{onClick:A,disabled:!F||Z,className:"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-700 min-w-[100px] disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:H?"Saving...":"Save"})]}),o&&n.jsx("div",{className:"bg-gray-50 border border-gray-200 text-gray-700 px-4 py-3 mb-4 text-xs",children:o}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(xhe,{showSignInLinks:c,onShowSignInLinksChange:q,accountVersion:h,onAccountVersionChange:I,isControlsDisabled:Z}),n.jsx(yhe,{accountUrl:P,onNavigateToAuthentication:re,onNavigateToDomains:Te,selfServeReturns:y,onSelfServeReturnsChange:K,storeCredit:b,onStoreCreditChange:D,isControlsDisabled:Z})]}),n.jsx(vhe,{open:j,onClose:Q,onConfirm:oe})]})})},s6=f.createContext(void 0),whe=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async m=>{try{s(!0),i(null);const y=await Ke.get("/notification-options",{params:{categoryId:m}}),{success:x,data:b,message:v}=y.data;if(!x)throw new Error(v||"Failed to fetch notification options");return e(Array.isArray(b)?b:[]),Array.isArray(b)?b:[]}catch(y){const x=y?.response?.data?.message||y?.message||"Failed to fetch notification options";throw i(x),new Error(x)}finally{s(!1)}},[]),c=f.useCallback(()=>{e([]),i(null)},[]),d=f.useCallback(()=>{i(null)},[]),h={options:r,loading:t,error:o,fetchByCategoryId:l,clear:c,clearError:d};return n.jsx(s6.Provider,{value:h,children:a})},$2=()=>{const a=f.useContext(s6);if(!a)throw new Error("useNotificationOptions must be used within a NotificationOptionsProvider");return a},o6=f.createContext(void 0),jhe=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async()=>{try{s(!0),i(null);const m=await Ke.get("/notification-categories"),{success:y,data:x,message:b}=m.data;if(!y)throw new Error(b||"Failed to fetch notification categories");return e(Array.isArray(x)?x:[]),Array.isArray(x)?x:[]}catch(m){const y=m?.response?.data?.message||m?.message||"Failed to fetch notification categories";throw i(y),new Error(y)}finally{s(!1)}},[]),c=f.useCallback(()=>{e([]),i(null)},[]),d=f.useCallback(()=>{i(null)},[]),h={categories:r,loading:t,error:o,fetchAll:l,clear:c,clearError:d};return n.jsx(o6.Provider,{value:h,children:a})},fw=()=>{const a=f.useContext(o6);if(!a)throw new Error("useNotificationCategories must be used within a NotificationCategoriesProvider");return a},Che=()=>{const a=mr(),{categoryId:r,categorySlug:e}=qa(),{options:t,loading:s,fetchByCategoryId:o}=$2(),{categories:i,fetchAll:l,loading:c}=fw(),[d,h]=f.useState({}),m=e?.includes("customer");f.useEffect(()=>{i.length===0&&!c&&l().catch(()=>{})},[i.length,c,l]),f.useEffect(()=>{r&&o(r).catch(()=>{})},[r,o]),f.useEffect(()=>{if(!m)return;const S={};new Set(t.map(N=>N.segment).filter(Boolean)).forEach(N=>{N&&(S[N]=!0)}),h(S)},[t,m]);const y=f.useMemo(()=>{if(!r)return"Notifications";const S=i.find(k=>k._id===r);return S?.name?S.name:e?e.split("-").map(k=>k.charAt(0).toUpperCase()+k.slice(1)).join(" "):"Notifications"},[i,r,e]),x=f.useMemo(()=>{if(!m)return[];const S=new Map;t.forEach(N=>{const P=N.segment||"other";S.has(P)||S.set(P,[]),S.get(P).push(N)});const k={orders:"Order processing",localpickup:"Local pick up",localdelivery:"Local delivery",giftcards:"Gift cards",storecredit:"Store credit",orderexceptions:"Order exceptions",payments:"Payments",shippingupdated:"Shipping updated",returns:"Returns",accounts_and_outreach:"Accounts and outreach",other:"Other"};return Array.from(S.entries()).map(([N,P])=>{let R=k[N]||N;return k[N]||(R=N.replace(/_/g," "),/[A-Z]/.test(R)&&(R=R.split(/(?=[A-Z])/).map(F=>F.charAt(0).toUpperCase()+F.slice(1).toLowerCase()).join(" ")),R=R.split(" ").map(F=>F.charAt(0).toUpperCase()+F.slice(1).toLowerCase()).join(" ")),{title:R,items:P.sort((F,z)=>F.optionName.localeCompare(z.optionName))}})},[t,m]),b=f.useMemo(()=>m?[]:[...t].sort((S,k)=>S.optionName.localeCompare(k.optionName)),[t,m]),v=f.useCallback(S=>{h(k=>({...k,[S]:!k[S]}))},[]),j=S=>!r||!e?"/settings/notifications":`/settings/notifications/${r}/${e}/${S._id}`;return r?s?n.jsx(pr,{children:n.jsx("div",{className:"max-w-7xl mx-auto py-8 px-4",children:n.jsx("div",{className:"flex justify-center mt-8",children:n.jsx("div",{className:"w-6 h-6 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})})})}):n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 border-b border-gray-200 pb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:()=>a("/settings/notifications"),className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(My,{className:"w-5 h-5"})}),n.jsx(Pa,{className:"w-4 h-4 text-gray-500"}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:y})]}),m&&n.jsx("button",{onClick:()=>{a("/settings/notifications/customer/templates")},className:"px-3 py-1.5 border border-gray-200 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"Customize email templates"})]}),m?x.length>0?n.jsx("div",{className:"border border-gray-200 p-4 bg-white/95",children:x.map((S,k)=>{const N=S.title.toLowerCase().replace(/\s+/g,""),P=d[N]??!0;return n.jsxs("div",{className:k<x.length-1?"mb-4 pb-4 border-b border-gray-200":"",children:[n.jsxs("button",{onClick:()=>v(N),className:"w-full flex items-center justify-between py-2 hover:bg-transparent transition-colors",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 flex-1 text-left",children:S.title}),P?n.jsx(pp,{className:"w-4 h-4 text-gray-500"}):n.jsx(Is,{className:"w-4 h-4 text-gray-500"})]}),n.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${P?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,children:n.jsx("div",{className:"pl-0 mt-2",children:S.items.map((R,F)=>n.jsx("div",{className:F<S.items.length-1?"mb-1 pb-1 border-b border-gray-100":"",children:n.jsxs("button",{onClick:()=>a(j(R)),className:"w-full flex items-center justify-between py-2 hover:bg-gray-50 transition-colors",children:[n.jsxs("div",{className:"flex-1 text-left",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-0.5",children:R.optionName}),R.optionDesc&&n.jsx("p",{className:"text-xs text-gray-600",children:R.optionDesc})]}),n.jsx(Pa,{className:"w-4 h-4 text-gray-500 ml-3 shrink-0"})]})},R._id))})})]},k)})}):n.jsx("div",{className:"border border-gray-200 p-4 bg-white/95",children:n.jsx("p",{className:"text-xs text-gray-600",children:"No notification options found."})}):n.jsx("div",{className:"border border-gray-200 p-4 bg-white/95",children:b.length>0?b.map((S,k)=>n.jsxs(gr.Fragment,{children:[n.jsxs("button",{onClick:()=>a(j(S)),className:"w-full flex items-center justify-between py-2 hover:bg-gray-50 transition-colors",children:[n.jsxs("div",{className:"flex-1 text-left",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-0.5",children:S.optionName}),S.optionDesc&&n.jsx("p",{className:"text-xs text-gray-600",children:S.optionDesc})]}),n.jsx(Pa,{className:"w-4 h-4 text-gray-500 ml-3 shrink-0"})]}),k<b.length-1&&n.jsx("div",{className:"h-px bg-gray-200 my-2"})]},S._id)):n.jsx("p",{className:"text-xs text-gray-600",children:"No notification options found."})})]})}):n.jsx(pr,{children:n.jsx("div",{className:"max-w-7xl mx-auto py-8 px-4",children:n.jsx("p",{className:"text-sm text-gray-900",children:"Notification category not found."})})})},She=()=>{const a=mr(),[r,e]=f.useState(!0),[t,s]=f.useState(!1),o=()=>{s(!0)},i=()=>{s(!1)},l=()=>{e(!1),s(!1)};return n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(yS,{className:"w-5 h-5 text-gray-900"}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Customer privacy"})]}),n.jsxs("div",{className:"border border-gray-200 bg-white p-4 mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Privacy settings"}),n.jsxs("button",{className:"w-full flex items-center gap-3 px-2 py-2 hover:bg-gray-50 transition-colors text-left mb-1",children:[n.jsx("div",{className:"w-8 h-8 bg-gray-100 flex items-center justify-center shrink-0",children:n.jsx("span",{className:"text-sm font-medium text-gray-900",children:"P"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm text-gray-900",children:"Privacy policy"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Published on your online store"})]}),n.jsxs("div",{className:"flex items-center gap-1 mr-1",children:[n.jsx("div",{className:"w-2 h-2 bg-gray-600 rounded-full"}),n.jsx("span",{className:"text-xs text-gray-600",children:"Automated"})]}),n.jsx(Pa,{className:"w-4 h-4 text-gray-400"})]}),n.jsx("hr",{className:"my-2 border-gray-200"}),n.jsxs("button",{className:"w-full flex items-center gap-3 px-2 py-2 hover:bg-gray-50 transition-colors text-left mb-1",children:[n.jsx("div",{className:"w-8 h-8 bg-gray-100 flex items-center justify-center shrink-0",children:n.jsx("span",{className:"text-sm font-medium text-gray-900",children:"C"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm text-gray-900",children:"Cookie banner"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Not required for regions you're selling in"})]}),n.jsxs("div",{className:"flex items-center gap-1 mr-1",children:[n.jsx("div",{className:"w-2 h-2 bg-gray-600 rounded-full"}),n.jsx("span",{className:"text-xs text-gray-600",children:"Automated"})]}),n.jsx(Pa,{className:"w-4 h-4 text-gray-400"})]}),n.jsx("hr",{className:"my-2 border-gray-200"}),n.jsxs("button",{onClick:()=>a("/settings/customer-privacy/dns"),className:"w-full flex items-center gap-3 px-2 py-2 hover:bg-gray-50 transition-colors text-left",children:[n.jsx(Hu,{className:"w-5 h-5 text-gray-600 shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm text-gray-900",children:"Data sharing opt out page"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Not required for regions you're selling in"})]}),n.jsxs("div",{className:"flex items-center gap-1 mr-1",children:[n.jsx("div",{className:"w-2 h-2 bg-gray-600 rounded-full"}),n.jsx("span",{className:"text-xs text-gray-600",children:"Automated"})]}),n.jsx(Pa,{className:"w-4 h-4 text-gray-400"})]})]}),n.jsxs("div",{className:"border border-gray-200 bg-white p-4 mb-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(xS,{className:"w-5 h-5 text-gray-900"}),n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Ziplofy Network Intelligence"})]}),r&&n.jsx("button",{onClick:o,className:"px-3 py-1.5 text-sm border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Disable"})]}),r&&n.jsxs("div",{className:"flex items-center gap-1 mb-3",children:[n.jsx("div",{className:"w-2 h-2 bg-gray-600 rounded-full"}),n.jsx("span",{className:"text-xs text-gray-600",children:"Enabled"})]}),n.jsxs("p",{className:"text-xs text-gray-600 leading-relaxed",children:["Your customer data is securely used with other Ziplofy data to improve products, ad targeting, and personalization for your store as described in the"," ",n.jsx("a",{href:"#",className:"text-gray-700 hover:underline",children:"Additional Services Terms"}),". No other merchant can see your data."]})]}),n.jsxs("div",{className:"border border-gray-200 bg-white p-4 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-3",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Marketing settings"}),n.jsx("button",{className:"p-0.5 text-gray-600 hover:text-gray-700",children:n.jsx(Oa,{className:"w-4 h-4"})})]}),n.jsxs("button",{onClick:()=>a("/settings/checkout"),className:"w-full flex items-center gap-3 px-2 py-2 hover:bg-gray-50 transition-colors text-left mb-1",children:[n.jsx(JT,{className:"w-5 h-5 text-gray-600 shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm text-gray-900",children:"E-mail and SMS marketing in checkout"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Ask your customers for their marketing preferences"})]}),n.jsx(Pa,{className:"w-4 h-4 text-gray-400"})]}),n.jsx("hr",{className:"my-2 border-gray-200"}),n.jsxs("button",{onClick:()=>a("/settings/notifications"),className:"w-full flex items-center gap-3 px-2 py-2 hover:bg-gray-50 transition-colors text-left",children:[n.jsx(ZL,{className:"w-5 h-5 text-gray-600 shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm text-gray-900",children:"Double opt-in for marketing"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Ask your customers to confirm their contact details"})]}),n.jsx(Pa,{className:"w-4 h-4 text-gray-400"})]})]}),n.jsxs("div",{className:"border border-gray-200 bg-white p-4",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-3",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Data storage hosting location"}),n.jsx("button",{className:"p-0.5 text-gray-600 hover:text-gray-700",children:n.jsx(Oa,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-2xl",children:""}),n.jsx("p",{className:"text-sm text-gray-900",children:"United States"})]})]}),n.jsx(un,{open:t,onClose:i,title:"Turn off Ziplofy Network Intelligence",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:i,className:"px-3 py-1.5 text-sm border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:l,className:"px-3 py-1.5 text-sm text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Turn off"})]}),children:n.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:"This means your customer data is no longer securely used with other Ziplofy data to improve products. This restricts your access or ability to customize all apps and features that require this data."})})]})})},Nhe=()=>{const a=mr(),[r,e]=f.useState(!1),[t,s]=f.useState("footer"),[o,i]=f.useState(!1),l=f.useRef(null),c=()=>{i(!o)},d=()=>{i(!1)},h=()=>{a("/settings/customer-privacy")};return n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3 border-b border-gray-200 pb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("button",{onClick:h,className:"p-1 hover:bg-gray-50 transition-colors",children:n.jsx(Hn,{className:"w-5 h-5 text-gray-600"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Data sharing opt-out page"})]}),n.jsx("p",{className:"text-xs text-gray-600 ml-7",children:"Data sharing opt-out allows customers in specific regions to opt out of data sharing."})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{ref:l,onClick:c,className:"flex items-center gap-1 px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:["More actions",n.jsx(Is,{className:"w-4 h-4"})]}),o&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:d}),n.jsxs("div",{className:"absolute right-0 mt-1 w-48 border border-gray-200 bg-white shadow-sm z-20",children:[n.jsx("button",{onClick:d,className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"Option 1"}),n.jsx("button",{onClick:d,className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors border-t border-gray-200",children:"Option 2"})]})]})]})]}),n.jsxs("div",{className:"border border-gray-200 p-3 mb-3 bg-white/95",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-3",children:"Regions and content"}),n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-0.5",children:"Use automated settings"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Keep regions and content in sync with latest Ziplofy recommendations"})]}),n.jsx(fo,{checked:r,onChange:e})]}),!r&&n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-0.5",children:"Regions"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Not active in any region"})]}),n.jsx("button",{onClick:m=>{m.preventDefault()},className:"text-xs font-medium text-gray-700 hover:underline",children:"Edit"})]}),!r&&n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-0.5",children:"Content"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Customize default page content"})]}),n.jsx("button",{onClick:m=>{m.preventDefault()},className:"text-xs font-medium text-gray-700 hover:underline",children:"Edit"})]})]}),n.jsxs("div",{className:"border border-gray-200 p-3 mb-3 bg-white/95",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-2",children:"Navigation"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Link to the page from your store menu, so that your visitors can easily access it."}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Menu"}),n.jsxs("select",{value:t,onChange:m=>s(m.target.value),className:"w-full px-2.5 py-1.5 text-sm text-gray-900 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400",children:[n.jsx("option",{value:"main",children:"Main menu"}),n.jsx("option",{value:"footer",children:"Footer menu (recommended)"}),n.jsx("option",{value:"customer-account",children:"Customer account main menu"})]})]})]}),n.jsxs("p",{className:"text-xs text-gray-600 text-center mt-4",children:["Recommended privacy settings are for your convenience. Compliance with laws and regulations is your responsibility."," ",n.jsx("button",{onClick:m=>{m.preventDefault()},className:"text-gray-700 hover:underline",children:"Learn more"})]})]})})},khe=()=>{const[a,r]=f.useState(!1),e=f.useRef(null),t=f.useCallback(()=>{r(!a)},[a]),s=f.useCallback(()=>{r(!1)},[]),o=[{id:"1",domain:"00yj51-t0.ziplofy.com",type:"Online Store",isPrimary:!0,status:"connected"}];return n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 border-b border-gray-200 pb-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Oo,{className:"w-5 h-5 text-gray-600"}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Domains"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"relative",children:[n.jsxs("button",{ref:e,onClick:t,className:"flex items-center gap-1 px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:["Connect existing",n.jsx(Is,{className:"w-4 h-4"})]}),a&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:s}),n.jsxs("div",{className:"absolute right-0 mt-1 w-48 border border-gray-200 bg-white shadow-sm z-20",children:[n.jsx("button",{onClick:s,className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"Connect domain"}),n.jsx("button",{onClick:s,className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors border-t border-gray-200",children:"Transfer domain"})]})]})]}),n.jsx("button",{className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Buy new domain"})]})]}),n.jsxs("div",{className:"mb-4 p-3 bg-white/95 border border-gray-200 flex items-start gap-2",children:[n.jsx(Oa,{className:"w-4 h-4 text-gray-600 shrink-0 mt-0.5"}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Connect or buy a custom domain below and get a $20 USD subscription discount on your next bill."," ",n.jsx("button",{onClick:i=>{i.preventDefault()},className:"text-gray-700 hover:underline",children:"Terms apply"}),"."]})]}),n.jsx("div",{className:"border border-gray-200 p-4 mb-4 bg-white/95",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-1",children:"Change to a new ziplofy.com domain"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Update your current Ziplofy subdomain for free to better match your brand. You can also buy or connect a custom domain."}),n.jsx("button",{className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-white transition-colors",children:"Change ziplofy.com domain"})]}),n.jsxs("div",{className:"hidden md:flex items-center justify-center relative w-48 h-32",children:[n.jsx("div",{className:"absolute w-24 h-20 border border-gray-200 bg-white flex items-center justify-center z-10",children:n.jsx(Oo,{className:"w-8 h-8 text-gray-500"})}),n.jsx("div",{className:"absolute top-4 right-0 w-24 h-20 border border-gray-200 bg-gray-100 flex items-center justify-center z-0",children:n.jsx(Oo,{className:"w-7 h-7 text-gray-400"})})]})]})}),n.jsxs("div",{className:"border border-gray-200 bg-white/95",children:[n.jsx("div",{className:"px-3 py-2 border-b border-gray-200 bg-white/95",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Domain"}),n.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Status"})]})}),n.jsx("div",{className:"p-2",children:o.map(i=>n.jsxs("div",{className:"flex justify-between items-center py-2 px-1 hover:bg-gray-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Oo,{className:"w-4 h-4 text-gray-500"}),n.jsx("p",{className:"text-sm text-gray-900",children:i.domain}),i.isPrimary&&n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium text-gray-700 bg-gray-100 border border-gray-200",children:"Primary"})]}),n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium text-gray-700 bg-gray-50 border border-gray-200",children:i.status.charAt(0).toUpperCase()+i.status.slice(1)})]},i.id))})]})]})})},_he=()=>{const{categoryId:a,categorySlug:r,optionId:e}=qa(),t=mr(),{options:s,fetchByCategoryId:o}=$2(),{categories:i,fetchAll:l}=fw(),[c,d]=f.useState(null),[h,m]=f.useState(""),[y,x]=f.useState(""),[b,v]=f.useState(!1),j=r?.includes("customer"),S=a&&r?`/settings/notifications/${a}/${r}`:"/settings/notifications",k=f.useMemo(()=>{if(!a)return"Notifications";const V=i.find(W=>W._id===a);return V?.name?V.name:r?r.split("-").map(W=>W.charAt(0).toUpperCase()+W.slice(1)).join(" "):"Notifications"},[i,a,r]);f.useEffect(()=>{i.length===0&&l().catch(()=>{})},[i.length,l]),f.useEffect(()=>{if(e&&s.length>0){const V=s.find(W=>W._id===e);V&&(d(V),m(V.emailSubject||""),x(V.emailBody||""),v(!1))}},[e,s]),f.useEffect(()=>{!a||s.length>0||o(a).catch(()=>{})},[a,s.length,o]);const N=V=>{m(V.target.value),v(!0)},P=V=>{x(V.target.value),v(!0)},R=()=>{console.log("Localize")},F=()=>{!e||!a||!r||t(`/settings/notifications/${a}/${r}/${e}`,{state:{categoryId:a,parentPath:S,categoryName:k}})},z=()=>{c&&(m(c.emailSubject||""),x(c.emailBody||""),v(!1),yr.success("Reverted to default values"))},H=async()=>{if(c)try{await new Promise(V=>setTimeout(V,1e3)),yr.success("Email template updated successfully"),v(!1)}catch(V){yr.error(V?.message||"Failed to update email template")}};return!a||!r?n.jsx(Et,{sx:{maxWidth:1200,mx:"auto",py:4},children:n.jsx(et,{children:"Notification category not found."})}):c?n.jsxs(Et,{sx:{maxWidth:1200,mx:"auto",py:4},children:[n.jsxs(N2,{separator:n.jsx(tS,{sx:{fontSize:16}}),sx:{mb:3},children:[n.jsx(Io,{component:"button",variant:"body2",onClick:()=>t("/settings/notifications"),sx:{color:"#666",textDecoration:"none","&:hover":{textDecoration:"underline"},cursor:"pointer"},children:"Notifications"}),n.jsx(Io,{component:"button",variant:"body2",onClick:()=>{a&&r?t(S,{state:{categoryId:a}}):t("/settings/notifications")},sx:{color:"#666",textDecoration:"none","&:hover":{textDecoration:"underline"},cursor:"pointer"},children:k}),n.jsx(Io,{component:"button",variant:"body2",onClick:()=>{!e||!a||!r||t(`/settings/notifications/${a}/${r}/${e}`,{state:{categoryId:a,parentPath:S,categoryName:k}})},sx:{color:"#666",textDecoration:"none","&:hover":{textDecoration:"underline"},cursor:"pointer"},children:c.optionName}),n.jsxs(et,{variant:"body2",sx:{color:"#111"},children:["Edit ",c.optionName]})]}),n.jsxs(Et,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[n.jsxs(et,{variant:"h4",sx:{fontWeight:600,color:"#111"},children:["Edit ",c.optionName]}),n.jsxs(Et,{sx:{display:"flex",gap:1},children:[n.jsx($r,{variant:"outlined",onClick:R,sx:{textTransform:"none",color:"#111",borderColor:"#ddd","&:hover":{borderColor:"#999",backgroundColor:"#f5f5f5"}},children:"Localize"}),n.jsx($r,{variant:"outlined",onClick:F,sx:{textTransform:"none",color:"#111",borderColor:"#ddd","&:hover":{borderColor:"#999",backgroundColor:"#f5f5f5"}},children:"Preview"})]})]}),n.jsxs(ta,{sx:{p:3,borderRadius:2,boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",mb:3},children:[n.jsx(et,{variant:"h6",sx:{fontWeight:600,color:"#111",mb:2},children:"Liquid variables"}),n.jsxs(et,{variant:"body2",sx:{color:"#666",mb:1},children:["You can use"," ",n.jsx(Io,{href:"#",sx:{color:"#1976d2",textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"liquid variables"})," ","to customize your templates. Learn more about liquid variables."]}),n.jsxs(et,{variant:"body2",sx:{color:"#666"},children:["You can customize the look and feel across all email notifications from the"," ",n.jsx(Io,{href:"#",onClick:V=>{V.preventDefault(),j&&t("/settings/notifications/customer/templates")},sx:{color:"#1976d2",textDecoration:"none","&:hover":{textDecoration:"underline"},cursor:"pointer"},children:"Customize email templates"})," ","page."]})]}),n.jsxs(ta,{sx:{p:3,borderRadius:2,boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",mb:3},children:[n.jsx(et,{variant:"h6",sx:{fontWeight:600,color:"#111",mb:2},children:"Email subject"}),n.jsx(Pn,{fullWidth:!0,value:h,onChange:N,placeholder:"Enter email subject",variant:"outlined",sx:{"& .MuiOutlinedInput-root":{backgroundColor:"#fff"}}})]}),n.jsxs(ta,{sx:{p:3,borderRadius:2,boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",mb:3},children:[n.jsx(et,{variant:"h6",sx:{fontWeight:600,color:"#111",mb:2},children:"Email body (HTML)"}),n.jsx(Pn,{fullWidth:!0,multiline:!0,rows:20,value:y,onChange:P,placeholder:"Enter email body HTML",variant:"outlined",sx:{"& .MuiOutlinedInput-root":{backgroundColor:"#fff",fontFamily:"monospace",fontSize:"0.875rem"}}})]}),n.jsxs(Et,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx($r,{variant:"outlined",onClick:z,sx:{textTransform:"none",color:"#111",borderColor:"#ddd","&:hover":{borderColor:"#999",backgroundColor:"#f5f5f5"}},children:"Revert to default"}),b&&n.jsx($r,{variant:"contained",onClick:H,sx:{textTransform:"none",backgroundColor:"#111",color:"#fff","&:hover":{backgroundColor:"#333"}},children:"Save"})]})]}):n.jsx(Et,{sx:{maxWidth:1200,mx:"auto",py:4},children:n.jsx(et,{children:"Loading..."})})};function Ehe({open:a,onClose:r,onSave:e,saving:t,legalBusinessName:s,country:o,address:i,apartment:l,city:c,state:d,pinCode:h,initialValues:m,countries:y,onLegalBusinessNameChange:x,onCountryChange:b,onAddressChange:v,onApartmentChange:j,onCityChange:S,onStateChange:k,onPinCodeChange:N}){const P=s!==m.legalBusinessName||o!==m.country||i!==m.address||l!==m.apartment||c!==m.city||d!==m.state||h!==m.pinCode,R=t||!P;return n.jsxs(un,{open:a,onClose:r,title:n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Billing information"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Your customers could see this information."})]}),maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-900 border border-gray-300 rounded hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:e,disabled:R,className:`px-4 py-2 text-sm font-medium text-white rounded transition-colors ${P&&!t?"bg-gray-900 hover:bg-gray-800":"bg-gray-300 cursor-not-allowed"}`,children:t?"Saving...":"Save"})]}),children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{htmlFor:"legal-business-name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Legal business name"}),n.jsx("input",{id:"legal-business-name",type:"text",value:s,onChange:x,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{htmlFor:"country-label",className:"block text-sm font-medium text-gray-700 mb-1",children:"Country/region"}),n.jsx("select",{id:"country-label",value:o,onChange:b,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:y.length>0?y.map(F=>n.jsx("option",{value:F.name,children:F.flagEmoji?`${F.flagEmoji} ${F.name}`:F.name},F._id)):n.jsx("option",{value:"India",children:" India"})})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:n.jsx(Ro,{className:"w-4 h-4"})}),n.jsx("input",{id:"address",type:"text",value:i,onChange:v,className:"w-full rounded-md border border-gray-300 pl-10 pr-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{htmlFor:"apartment",className:"block text-sm font-medium text-gray-700 mb-1",children:"Apartment, suite, etc."}),n.jsx("input",{id:"apartment",type:"text",value:l,onChange:j,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("div",{className:"flex gap-4 mb-6",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),n.jsx("input",{id:"city",type:"text",value:c,onChange:S,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{htmlFor:"state-label",className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),n.jsxs("select",{id:"state-label",value:d,onChange:k,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"",children:"Select a state"}),n.jsx("option",{value:"Delhi",children:"Delhi"}),n.jsx("option",{value:"Maharashtra",children:"Maharashtra"}),n.jsx("option",{value:"Karnataka",children:"Karnataka"}),n.jsx("option",{value:"Tamil Nadu",children:"Tamil Nadu"}),n.jsx("option",{value:"West Bengal",children:"West Bengal"}),n.jsx("option",{value:"Gujarat",children:"Gujarat"}),n.jsx("option",{value:"Rajasthan",children:"Rajasthan"}),n.jsx("option",{value:"Uttar Pradesh",children:"Uttar Pradesh"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"pin-code",className:"block text-sm font-medium text-gray-700 mb-1",children:"PIN code"}),n.jsx("input",{id:"pin-code",type:"text",value:h,onChange:N,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})}function The({open:a,onClose:r,onSave:e,saving:t,storeName:s,storeEmail:o,storePhone:i,initialValues:l,onStoreNameChange:c,onStoreEmailChange:d,onStorePhoneChange:h}){const m=s!==l.storeName||o!==l.storeEmail||i!==l.storePhone,y=t||!m;return n.jsxs(un,{open:a,onClose:r,title:"Edit profile",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-900 border border-gray-300 rounded hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:e,disabled:y,className:`px-4 py-2 text-sm font-medium text-white rounded transition-colors ${m?"bg-gray-900 hover:bg-gray-800":"bg-gray-300 cursor-not-allowed"}`,children:t?"Saving...":"Save"})]}),children:[n.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"These details could be publicly available. Do not use your personal information."}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{htmlFor:"store-name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Store name"}),n.jsx("input",{id:"store-name",type:"text",value:s,onChange:c,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 mb-1"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Appears on your website"})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{htmlFor:"store-email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Store email"}),n.jsx("input",{id:"store-email",type:"email",value:o,onChange:d,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 mb-1"}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Receives messages about your store. For sender email, go to"," ",n.jsx("a",{href:"/settings/notifications",className:"text-blue-600 hover:underline",children:"notification settings"}),"."]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"store-phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Store phone"}),n.jsx("input",{id:"store-phone",type:"tel",value:i,onChange:h,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})}function Ohe({onSave:a,saving:r,disabled:e}){return n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[n.jsxs("p",{className:"text-xs text-gray-600",children:["To change your user level time zone and language visit your"," ",n.jsx("a",{href:"#",className:"text-gray-700 hover:underline",children:"account settings"}),"."]}),n.jsx("button",{onClick:a,disabled:e,className:"cursor-pointer px-3 py-1.5 bg-gray-900 text-white text-sm font-medium hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:r?"Saving...":"Save"})]})}const Phe=({label:a})=>n.jsx("span",{className:"inline-block min-w-[28px] px-2 py-0.5 rounded-md border border-gray-300 bg-gray-50 font-semibold text-[13px] text-center text-gray-900 leading-[1.4]",children:a}),Ahe=({action:a,keys:r})=>n.jsxs("div",{className:"flex items-center justify-between gap-4",children:[n.jsx("p",{className:"text-sm text-gray-600 flex-1",children:a}),n.jsx("div",{className:"flex gap-1.5 flex-wrap justify-end",children:r.map((e,t)=>n.jsx(Phe,{label:e},`${a}-${e}-${t}`))})]}),E0=[{title:"General shortcuts",shortcuts:[{action:"Keyboard help",keys:["?"]},{action:"Focus search bar or save bar",keys:["S"]},{action:"Focus filter bar",keys:["F"]},{action:"Open app",keys:["O","A"]},{action:"Open sales channel",keys:["O","S"]},{action:"Open store",keys:["O","T"]},{action:"Your profile",keys:["M","E"]},{action:"Log out",keys:["B","Y","E"]}]},{title:"Adding items to your store",shortcuts:[{action:"Add product",keys:["A","P"]},{action:"Add collection",keys:["A","C"]},{action:"Add discount",keys:["A","D"]},{action:"Add order",keys:["A","O"]},{action:"Add customer",keys:["A","U"]},{action:"Add blog post",keys:["A","B"]},{action:"Add blog",keys:["A","L"]},{action:"Add page",keys:["A","G"]}]},{title:"Navigating your admin panel",shortcuts:[{action:"Go to Home",keys:["G","H"]},{action:"Go to Orders",keys:["G","O"]},{action:"Go to Products",keys:["G","P"]},{action:"Go to Customers",keys:["G","C"]},{action:"Go to Content",keys:["G","G","C"]},{action:"Go to Analytics",keys:["G","N"]},{action:"Go to Marketing",keys:["G","M"]},{action:"Go to Discounts",keys:["G","D"]},{action:"Go to Abandoned carts",keys:["G","B","C"]},{action:"Go to Products: Transfers",keys:["G","P","T"]},{action:"Go to Products: Inventory",keys:["G","P","I"]},{action:"Go to Products: Purchase orders",keys:["G","P","O"]},{action:"Go to Products: Collections",keys:["G","P","C"]},{action:"Go to Products: Gift cards",keys:["G","P","G"]},{action:"Go to Online Store: Overview",keys:["G","W","O"]},{action:"Go to Online Store: Blog posts",keys:["G","W","B"]},{action:"Go to Online Store: Pages",keys:["G","W","P"]},{action:"Go to Online Store: Themes",keys:["G","W","T"]},{action:"Go to Online Store: Navigation",keys:["G","W","N"]},{action:"Go to Online Store: Domains",keys:["G","W","D"]},{action:"Go to Point of Sale: Overview",keys:["G","T","O"]},{action:"Go to Ziplofy Capital",keys:["G","T","C"]}]},{title:"Navigating settings",shortcuts:[{action:"Go to Settings",keys:["G","S"]},{action:"Go to Settings: Apps and sales channels",keys:["G","S","A"]},{action:"Go to Settings: Customer accounts",keys:["G","T","A"]},{action:"Go to Settings: Locations",keys:["G","T","L"]},{action:"Go to Settings: General",keys:["G","S","G"]},{action:"Go to Settings: Payments",keys:["G","S","P"]},{action:"Go to Settings: Checkout",keys:["G","S","C"]},{action:"Go to Settings: Customer events",keys:["G","S","E"]},{action:"Go to Settings: Shipping",keys:["G","S","S"]},{action:"Go to Settings: Taxes",keys:["G","S","X"]},{action:"Go to Settings: Notifications",keys:["G","S","N"]},{action:"Go to Settings: Gift cards",keys:["G","S","K"]},{action:"Go to Content: Files",keys:["G","C","F"]},{action:"Go to Settings: Account",keys:["G","S","A","C"]},{action:"Go to Settings: Online Store",keys:["G","S","W"]},{action:"Go to Settings: Point of Sale",keys:["G","S","T"]},{action:"Go to Settings: Billing",keys:["G","S","B"]},{action:"Go to Settings: Plan",keys:["G","S","L"]},{action:"Go to Settings: Metafields",keys:["G","S","M"]}]}],Mhe=[[E0[0],E0[1]],[E0[2]],[E0[3]]];function Ihe({open:a,onClose:r}){return n.jsx(un,{open:a,onClose:r,title:"Keyboard Shortcuts",maxWidth:"lg",children:n.jsx("div",{className:"bg-gray-50 -mx-6 -my-4 px-6 py-4",children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8",children:Mhe.map((e,t)=>n.jsx("div",{className:`flex flex-col gap-6 ${t>0?"md:border-l md:border-gray-200 md:pl-6":""}`,children:e.map(s=>n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-1",children:s.title}),n.jsx("div",{className:"flex flex-col gap-2 bg-white rounded-lg border border-gray-200 p-4",children:s.shortcuts.map(o=>n.jsx(Ahe,{...o},`${s.title}-${o.action}`))})]},s.title))},`column-${t}`))})})})}function Rhe({orderIdPrefix:a,orderIdSuffix:r,onPrefixChange:e,onSuffixChange:t}){return n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-2",children:"Order ID"}),n.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Shown on the order page, customer pages, and customer order notifications to identify order"}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{htmlFor:"order-id-prefix",className:"block text-xs text-gray-600 mb-1",children:"Prefix"}),n.jsx("input",{id:"order-id-prefix",type:"text",value:a,onChange:e,className:"w-full border border-gray-200 px-3 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{htmlFor:"order-id-suffix",className:"block text-xs text-gray-600 mb-1",children:"Suffix"}),n.jsx("input",{id:"order-id-suffix",type:"text",value:r,onChange:t,className:"w-full border border-gray-200 px-3 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]})]}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Your order ID will appear as ",a,"1001",r,", ",a,"1002",r,", ",a,"1003",r," ..."]})]})}function Lhe({fulfillmentOption:a,notifyCustomers:r,fulfillHighRiskOrders:e,autoArchive:t,onFulfillmentOptionChange:s,onNotifyCustomersChange:o,onFulfillHighRiskOrdersChange:i,onAutoArchiveChange:l}){return n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsxs("div",{className:"flex items-center mb-3",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Order processing"}),n.jsx("div",{className:"ml-2 group relative",children:n.jsx("button",{className:"p-1 text-gray-600 hover:text-gray-700",title:"Order processing settings","aria-label":"Order processing settings",children:n.jsx(Oa,{className:"w-4 h-4"})})})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"After an order has been paid"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"fulfillment-option",value:"fulfill_all",checked:a==="fulfill_all",onChange:s,className:"w-4 h-4 text-gray-900 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900",children:"Automatically fulfill the order's line items"})]}),a==="fulfill_all"&&n.jsxs("div",{className:"ml-6 mt-2 space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:r,onChange:o,className:"w-4 h-4 text-gray-900 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900",children:"Notify customers of their shipment"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:e,onChange:i,className:"w-4 h-4 text-gray-900 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900",children:"Automatically fulfill all orders, even those with a high risk of fraud"})]})]})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"fulfillment-option",value:"fulfill_gift_cards",checked:a==="fulfill_gift_cards",onChange:s,className:"w-4 h-4 text-gray-900 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900",children:"Automatically fulfill only the gift cards of the order"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"fulfillment-option",value:"dont_fulfill",checked:a==="dont_fulfill",onChange:s,className:"w-4 h-4 text-gray-900 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900",children:"Don't fulfill any of the order's line items automatically"})]})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"After an order has been fulfilled and paid, or when all items have been refunded"}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:t,onChange:l,className:"w-4 h-4 text-gray-900 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900",children:"Automatically archive the order"})]}),n.jsx("p",{className:"text-xs text-gray-600 mt-1 ml-6",children:"The order will be removed from your list of open orders."})]})]})}function Dhe({onOpenShortcutsModal:a}){const r=mr();return n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Resources"}),n.jsx("div",{className:"mb-2",children:n.jsxs("div",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 transition-colors",children:[n.jsx(_D,{className:"w-4 h-4 text-gray-600 shrink-0"}),n.jsx("div",{className:"flex-1",children:n.jsx("p",{className:"text-sm text-gray-900",children:"Change log"})}),n.jsx("button",{className:"px-3 py-1.5 text-sm text-gray-900 border border-gray-200 hover:bg-gray-100 transition-colors",children:"View change log"})]})}),n.jsx("hr",{className:"my-2 border-gray-200"}),n.jsx("div",{className:"mb-2",children:n.jsxs("div",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 transition-colors",children:[n.jsx(n4,{className:"w-4 h-4 text-gray-600 shrink-0"}),n.jsx("div",{className:"flex-1",children:n.jsx("p",{className:"text-sm text-gray-900",children:"Ziplofy Help Center"})}),n.jsx("button",{className:"px-3 py-1.5 text-sm text-gray-900 border border-gray-200 hover:bg-gray-100 transition-colors",children:"Get help"})]})}),n.jsx("hr",{className:"my-2 border-gray-200"}),n.jsx("div",{className:"mb-2",children:n.jsxs("div",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 transition-colors",children:[n.jsx(pS,{className:"w-4 h-4 text-gray-600 shrink-0"}),n.jsx("div",{className:"flex-1",children:n.jsx("p",{className:"text-sm text-gray-900",children:"Hire a Ziplofy Partner"})}),n.jsx("button",{className:"px-3 py-1.5 text-sm text-gray-900 border border-gray-200 hover:bg-gray-100 transition-colors",children:"Hire a Partner"})]})}),n.jsx("hr",{className:"my-2 border-gray-200"}),n.jsx("div",{className:"mb-2",children:n.jsxs("button",{onClick:a,className:"w-full flex items-center gap-3 p-2 hover:bg-gray-50 transition-colors text-left",children:[n.jsx("svg",{className:"w-4 h-4 text-gray-600 shrink-0",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 6.75h.75m-.75 3h.75m-.75 3h.75m3-6H18m0 0h.75m-.75 3h.75m-.75 3h.75M9.813 15v4.687c0 .414.336.75.75.75h4.125a.75.75 0 00.75-.75V15m0 0h-3.375M9.813 15h3.375m0 0H21M9.813 9.813H5.25a2.25 2.25 0 00-2.25 2.25v7.5c0 1.036.84 1.875 1.875 1.875h15.75c1.035 0 1.875-.84 1.875-1.875v-7.5a2.25 2.25 0 00-2.25-2.25h-4.563zM12.375 9.813V8.625c0-1.036-.84-1.875-1.875-1.875h-1.5c-1.036 0-1.875.84-1.875 1.875v1.188m7.5 0V8.625c0-1.036.84-1.875 1.875-1.875h1.5c1.035 0 1.875.84 1.875 1.875v1.188m-7.5 0h7.5"})}),n.jsx("div",{className:"flex-1",children:n.jsx("p",{className:"text-sm text-gray-900",children:"Keyboard shortcuts"})}),n.jsx(Pa,{className:"w-4 h-4 text-gray-600 shrink-0"})]})}),n.jsx("hr",{className:"my-2 border-gray-200"}),n.jsx("div",{children:n.jsxs("button",{onClick:()=>r("/settings/general/activity"),className:"w-full flex items-center gap-3 p-2 hover:bg-gray-50 transition-colors text-left",children:[n.jsx(oD,{className:"w-4 h-4 text-gray-600 shrink-0"}),n.jsx("div",{className:"flex-1",children:n.jsx("p",{className:"text-sm text-gray-900",children:"Store activity log"})}),n.jsx(Pa,{className:"w-4 h-4 text-gray-600 shrink-0"})]})})]})}function Fhe(){const a=mr();return n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Store assets"}),n.jsx("div",{className:"mb-2",children:n.jsxs("button",{onClick:()=>a("/settings/general/metafields"),className:"w-full flex items-center gap-3 p-2 hover:bg-gray-50 transition-colors text-left",children:[n.jsx(ap,{className:"w-4 h-4 text-gray-600 shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm text-gray-900",children:"Metafields"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Available in themes and configurable for Storefront API"})]}),n.jsx(Pa,{className:"w-4 h-4 text-gray-600 shrink-0"})]})}),n.jsx("hr",{className:"my-2 border-gray-200"}),n.jsx("div",{children:n.jsxs("button",{onClick:()=>a("/settings/general/branding"),className:"w-full flex items-center gap-3 p-2 hover:bg-gray-50 transition-colors text-left",children:[n.jsx(ap,{className:"w-4 h-4 text-gray-600 shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm text-gray-900",children:"Brand"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Integrate brand assets across sales channels, themes and apps"})]}),n.jsx(Pa,{className:"w-4 h-4 text-gray-600 shrink-0"})]})})]})}function Bhe({backupRegion:a,unitSystem:r,weightUnit:e,timeZone:t,timeZones:s,onBackupRegionChange:o,onUnitSystemChange:i,onWeightUnitChange:l,onTimeZoneChange:c}){return n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Store defaults"}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{htmlFor:"currency-label",className:"block text-xs text-gray-600 mb-1",children:"Currency display"}),n.jsx("select",{id:"currency-label",value:"INR",disabled:!0,className:"w-full border border-gray-200 px-3 py-1.5 text-sm bg-gray-100 text-gray-500 cursor-not-allowed",children:n.jsx("option",{value:"INR",children:"Indian Rupee (INR )"})}),n.jsxs("p",{className:"text-xs text-gray-600 mt-2",children:["To manage the currencies customers see, go to"," ",n.jsx("a",{href:"/settings/markets",className:"text-gray-700 hover:underline",children:"Markets"})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{htmlFor:"backup-region-label",className:"block text-xs text-gray-600 mb-1",children:"Backup Region"}),n.jsxs("select",{id:"backup-region-label",value:a,onChange:o,className:"w-full border border-gray-200 px-3 py-1.5 text-sm bg-white focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400",children:[n.jsx("option",{value:"India",children:"India"}),n.jsx("option",{value:"United States",children:"United States"}),n.jsx("option",{value:"United Kingdom",children:"United Kingdom"}),n.jsx("option",{value:"Canada",children:"Canada"})]}),n.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"Determines settings for customers outside of your markets."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{htmlFor:"unit-system-label",className:"block text-xs text-gray-600 mb-1",children:"Unit system"}),n.jsxs("select",{id:"unit-system-label",value:r,onChange:i,className:"w-full border border-gray-200 px-3 py-1.5 text-sm bg-white focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400",children:[n.jsx("option",{value:"metric",children:"Metric system"}),n.jsx("option",{value:"imperial",children:"Imperial system"})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{htmlFor:"weight-unit-label",className:"block text-xs text-gray-600 mb-1",children:"Default weight unit"}),n.jsxs("select",{id:"weight-unit-label",value:e,onChange:l,className:"w-full border border-gray-200 px-3 py-1.5 text-sm bg-white focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400",children:[n.jsx("option",{value:"kg",children:"Kilogram (kg)"}),n.jsx("option",{value:"g",children:"Gram (g)"}),n.jsx("option",{value:"lb",children:"Pound (lb)"}),n.jsx("option",{value:"oz",children:"Ounce (oz)"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"timezone-label",className:"block text-xs text-gray-600 mb-1",children:"Time zone"}),n.jsx("select",{id:"timezone-label",value:t,onChange:c,className:"w-full border border-gray-200 px-3 py-1.5 text-sm bg-white focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400",children:s.map(d=>n.jsx("option",{value:d.value,children:d.label},d.value))}),n.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"Sets the time for when orders and analytics are recorded."})]})]})}function zhe({settings:a,activeStore:r,loggedInUser:e,info:t,billingAddress:s,onEditProfile:o,onEditBilling:i}){return n.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Store details"}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("p",{className:"text-xs text-gray-600",children:"My Store"}),n.jsx("button",{onClick:o,className:"p-1 text-gray-600 hover:bg-gray-100 transition-colors","aria-label":"Edit profile",children:n.jsx(oi,{className:"w-4 h-4"})})]}),n.jsx("p",{className:"text-sm text-gray-900 mb-1",children:a?.storeName||r?.storeName||"My Store"}),n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:a?.storeEmail||e?.email||"developer200419@gmail.com"}),n.jsx("p",{className:"text-xs text-gray-600",children:a?.storePhone&&a.storePhone.trim()?a.storePhone:t?.contactInfo&&t.contactInfo.trim()?t.contactInfo:"No phone number"})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("p",{className:"text-xs text-gray-600",children:"Billing address"}),n.jsx("button",{onClick:i,className:"p-1 text-gray-600 hover:bg-gray-100 transition-colors","aria-label":"Edit billing address",children:n.jsx(oi,{className:"w-4 h-4"})})]}),n.jsx("p",{className:"text-sm text-gray-900",children:s?.country||"India"})]})]})}const i6=f.createContext(void 0),Uhe=({children:a})=>{const[r,e]=f.useState(null),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async y=>{try{s(!0),i(null);const x=await Ke.get(`/general-settings/store/${y}`),{success:b,data:v,message:j}=x.data;if(!b)throw new Error(j||"Failed to fetch general settings");return e(v||null),v||null}catch(x){const b=x?.response?.data?.message||x?.message||"Failed to fetch general settings";throw i(b),new Error(b)}finally{s(!1)}},[]),c=f.useCallback(async(y,x)=>{try{s(!0),i(null);const b=await Ke.put(`/general-settings/${y}`,x),{success:v,data:j,message:S}=b.data;if(!v)throw new Error(S||"Failed to update general settings");return e(j),j}catch(b){const v=b?.response?.data?.message||b?.message||"Failed to update general settings";throw i(v),new Error(v)}finally{s(!1)}},[]),d=f.useCallback(()=>{e(null),i(null)},[]),h=f.useCallback(()=>{i(null)},[]),m={settings:r,loading:t,error:o,getByStoreId:l,update:c,clear:d,clearError:h};return n.jsx(i6.Provider,{value:m,children:a})},l6=()=>{const a=f.useContext(i6);if(!a)throw new Error("useGeneralSettings must be used within a GeneralSettingsProvider");return a},c6=f.createContext(void 0),$he=({children:a})=>{const[r,e]=f.useState(null),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async m=>{try{s(!0),i(null);const y=await Ke.get(`/store-contact-info/store/${m}`),{success:x,data:b,message:v}=y.data;if(!x)throw new Error(v||"Failed to fetch contact info");return e(b||null),b||null}catch(y){const x=y?.response?.data?.message||y?.message||"Failed to fetch contact info";throw i(x),new Error(x)}finally{s(!1)}},[]),c=f.useCallback(async m=>{try{s(!0),i(null);const y=await Ke.post("/store-contact-info",m),{success:x,data:b,message:v}=y.data;if(!x)throw new Error(v||"Failed to create contact info");return e(b),b}catch(y){const x=y?.response?.data?.message||y?.message||"Failed to create contact info";throw i(x),new Error(x)}finally{s(!1)}},[]),d=f.useCallback(async(m,y)=>{try{s(!0),i(null);const x=await Ke.put(`/store-contact-info/${m}`,y),{success:b,data:v,message:j}=x.data;if(!b)throw new Error(j||"Failed to update contact info");return e(v),v}catch(x){const b=x?.response?.data?.message||x?.message||"Failed to update contact info";throw i(b),new Error(b)}finally{s(!1)}},[]),h={info:r,loading:t,error:o,getByStoreId:l,createInfo:c,updateInfo:d};return n.jsx(c6.Provider,{value:h,children:a})},d6=()=>{const a=f.useContext(c6);if(!a)throw new Error("useStoreContactInfo must be used within a StoreContactInfoProvider");return a},u6=f.createContext(void 0),Vhe=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async b=>{try{s(!0),i(null);const v=await Ke.get(`/store-billing-address/store/${b}`);e(v.data.data)}catch(v){const j=v.response?.data?.message||v.message||"Failed to fetch billing addresses";throw i(j),v}finally{s(!1)}},[]),c=f.useCallback(async b=>{try{s(!0),i(null);const j=(await Ke.post("/store-billing-address",b)).data.data;return e(S=>[j,...S]),j}catch(v){const j=v.response?.data?.message||v.message||"Failed to create billing address";throw i(j),v}finally{s(!1)}},[]),d=f.useCallback(async(b,v)=>{try{s(!0),i(null);const S=(await Ke.put(`/store-billing-address/${b}`,v)).data.data;return e(k=>k.map(N=>N._id===b?S:N)),S}catch(j){const S=j.response?.data?.message||j.message||"Failed to update billing address";throw i(S),j}finally{s(!1)}},[]),h=f.useCallback(async b=>{try{s(!0),i(null),await Ke.delete(`/store-billing-address/${b}`),e(v=>v.filter(j=>j._id!==b))}catch(v){const j=v.response?.data?.message||v.message||"Failed to delete billing address";throw i(j),v}finally{s(!1)}},[]),m=f.useCallback(()=>i(null),[]),y=f.useCallback(()=>e([]),[]),x={addresses:r,loading:t,error:o,fetchByStoreId:l,createAddress:c,updateAddress:d,deleteAddress:h,clearError:m,clear:y};return n.jsx(u6.Provider,{value:x,children:a})},Whe=()=>{const a=f.useContext(u6);if(!a)throw new Error("useStoreBillingAddress must be used within a StoreBillingAddressProvider");return a},Hhe=()=>{const{stores:a,activeStoreId:r,setStores:e}=fn(),{loggedInUser:t}=TS(),{addresses:s,fetchByStoreId:o}=Whe(),{info:i,getByStoreId:l}=d6(),{settings:c,loading:d,getByStoreId:h,update:m}=l6(),[y,x]=f.useState("India"),[b,v]=f.useState("metric"),[j,S]=f.useState("kg"),[k,N]=f.useState("Asia/Kolkata"),[P,R]=f.useState("#"),[F,z]=f.useState(""),[H,V]=f.useState("dont_fulfill"),[W,Z]=f.useState(!1),[A,q]=f.useState(!1),[I,K]=f.useState(!0),[D,Q]=f.useState(!1),[oe,re]=f.useState(""),[Te,G]=f.useState(""),[Y,Se]=f.useState(""),[fe,Ee]=f.useState(!1),[Ae,qe]=f.useState(!1),[we,Oe]=f.useState({storeName:"",storeEmail:"",storePhone:""}),[ze,We]=f.useState(!1),[pt,Pt]=f.useState(""),[ee,Ne]=f.useState("India"),[Ie,ne]=f.useState(""),[M,U]=f.useState(""),[J,ce]=f.useState(""),[ue,xe]=f.useState(""),[he,se]=f.useState(""),[Le,Ue]=f.useState(!1),[Ge,ie]=f.useState(!1),[_e,le]=f.useState({legalBusinessName:"",country:"India",address:"",apartment:"",city:"",state:"",pinCode:""}),[Xe,Fe]=f.useState(!1),[dt,lt]=f.useState(!1),[ft,Ze]=f.useState(!1),[Nt,Mt]=f.useState(!1),vt=f.useCallback(()=>{dt&&Fe(!0)},[dt]),Jt=f.useCallback(()=>{Mt(!0)},[]),wr=f.useCallback(()=>{Mt(!1)},[]),{getCountries:Wt,countries:ye}=dw(),Be=a.find($e=>$e._id===r),tt=s.length>0?s[0]:null;f.useEffect(()=>{Wt({limit:250})},[Wt]),f.useEffect(()=>{if(D){const $e=c?.storeName??Be?.storeName??"My Store",ve=c?.storeEmail??t?.email??"developer200419@gmail.com",Ve=c?.storePhone??(i?.contactInfo&&i.contactInfo.trim()?i.contactInfo:"");re($e),G(ve),Se(Ve),Oe({storeName:$e,storeEmail:ve,storePhone:Ve}),Ee(!1)}},[D,c,Be,t,i]),f.useEffect(()=>{if(!ze)return;let $e="",ve="India",Ve="",st="",Ot="",de="",ke="";c?($e=c.legalBusinessName??"",ve=c.billingCountry??"India",Ve=c.billingAddress??"",st=c.billingApartment??"",Ot=c.billingCity??"",de=c.billingState??"",ke=c.billingPinCode??""):tt&&($e=tt.legalBusinessName||"",ve=tt.country||"India",Ve=tt.address||"",st=tt.apartment||"",Ot=tt.city||"",de=tt.state||"",ke=tt.pinCode||""),Pt($e),Ne(ve),ne(Ve),U(st),ce(Ot),xe(de),se(ke),le({legalBusinessName:$e,country:ve,address:Ve,apartment:st,city:Ot,state:de,pinCode:ke}),Ue(!1)},[ze,c,tt]),f.useEffect(()=>{d||(c?(x(c.backupRegion??"India"),v(c.unitSystem??"metric"),S(c.weightUnit??"kg"),N(c.timeZone??"Asia/Kolkata"),R(c.orderIdPrefix??"#"),z(c.orderIdSuffix??""),V(c.fulfillmentOption??"dont_fulfill"),Z(!!c.notifyCustomers),q(!!c.fulfillHighRiskOrders),K(c.autoArchive!==void 0?c.autoArchive:!0),re(c.storeName??Be?.storeName??"My Store"),G(c.storeEmail??t?.email??""),Se(c.storePhone??(i?.contactInfo&&i.contactInfo.trim()?i.contactInfo:"")),Pt(c.legalBusinessName??""),Ne(c.billingCountry??"India"),ne(c.billingAddress??""),U(c.billingApartment??""),ce(c.billingCity??""),xe(c.billingState??""),se(c.billingPinCode??"")):(x("India"),v("metric"),S("kg"),N("Asia/Kolkata"),R("#"),z(""),V("dont_fulfill"),Z(!1),q(!1),K(!0),re(Be?.storeName||"My Store"),G(t?.email||"developer200419@gmail.com"),Se(i?.contactInfo&&i.contactInfo.trim()?i.contactInfo:""),Pt(tt?.legalBusinessName||""),Ne(tt?.country||"India"),ne(tt?.address||""),U(tt?.apartment||""),ce(tt?.city||""),xe(tt?.state||""),se(tt?.pinCode||"")),Fe(!1),lt(!0))},[c,d,Be,t,i,tt]);const wt=f.useCallback(()=>{Q(!0)},[]),Ut=f.useCallback(()=>{Q(!1)},[]),er=f.useCallback(async()=>{if(!c||!c._id){yr.error("General settings not found. Please refresh the page.");return}if(!(oe!==we.storeName||Te!==we.storeEmail||Y!==we.storePhone)){Ut();return}if(!r){yr.error("No store selected. Please select a store to save settings.");return}qe(!0);try{const ve=st=>st.trim()||void 0;await m(c._id,{storeId:r,storeName:ve(oe),storeEmail:ve(Te),storePhone:ve(Y)});const Ve=oe.trim()||oe||"My Store";e(st=>st.map(Ot=>Ot._id===r?{...Ot,storeName:Ve}:Ot)),Oe({storeName:oe,storeEmail:Te,storePhone:Y}),yr.success("Store profile updated successfully"),vt(),Ut()}catch(ve){const Ve=ve?.response?.data?.message||ve?.message||"Failed to update store profile";yr.error(Ve)}finally{qe(!1)}},[c,oe,Te,Y,we,r,m,e,vt,Ut]),zr=f.useCallback(()=>{We(!0)},[]),rn=f.useCallback(()=>{We(!1)},[]),_n=f.useCallback(async()=>{if(!c||!c._id){yr.error("General settings not found. Please refresh the page.");return}if(!r){yr.error("No store selected. Please select a store to save settings.");return}if(!(pt!==_e.legalBusinessName||ee!==_e.country||Ie!==_e.address||M!==_e.apartment||J!==_e.city||ue!==_e.state||he!==_e.pinCode)){rn();return}ie(!0);try{const ve=Ve=>Ve.trim()||void 0;await m(c._id,{storeId:r,legalBusinessName:ve(pt),billingCountry:ee,billingAddress:ve(Ie),billingApartment:ve(M),billingCity:ve(J),billingState:ve(ue),billingPinCode:ve(he)}),yr.success("Billing information updated successfully"),vt(),rn()}catch(ve){const Ve=ve?.response?.data?.message||ve?.message||"Failed to update billing information";yr.error(Ve)}finally{ie(!1)}},[c,r,pt,ee,Ie,M,J,ue,he,_e,m,vt,rn]),Ur=f.useCallback(async()=>{if(!r){yr.error("No store selected. Please select a store to save settings.");return}const $e=Ve=>Ve.trim()||void 0,ve={storeId:r,backupRegion:y,unitSystem:b,weightUnit:j,timeZone:k,orderIdPrefix:P,orderIdSuffix:F,fulfillmentOption:H,notifyCustomers:W,fulfillHighRiskOrders:A,autoArchive:I,storeName:$e(oe),storeEmail:$e(Te),storePhone:$e(Y),legalBusinessName:$e(pt),billingCountry:ee,billingAddress:$e(Ie),billingApartment:$e(M),billingCity:$e(J),billingState:$e(ue),billingPinCode:$e(he)};if(!c||!c._id){yr.error("General settings not found. Please refresh the page.");return}Ze(!0);try{await m(c._id,ve),yr.success("General settings updated successfully"),Fe(!1)}catch(Ve){const st=Ve?.response?.data?.message||Ve?.message||"Failed to save general settings";yr.error(st)}finally{Ze(!1)}},[r,y,b,j,k,P,F,H,W,A,I,oe,Te,Y,pt,ee,Ie,M,J,ue,he,c,m]);f.useEffect(()=>{r&&(o(r),l(r),lt(!1),h(r).catch(()=>{}))},[r,o,l,h]);const ar=[{value:"Asia/Kolkata",label:"(GMT+05:30) Chennai, Kolkata, Mumbai, New Delhi"},{value:"America/New_York",label:"(GMT-05:00) Eastern Time (US & Canada)"},{value:"America/Los_Angeles",label:"(GMT-08:00) Pacific Time (US & Canada)"},{value:"Europe/London",label:"(GMT+00:00) Greenwich Mean Time"}],br=f.useCallback($e=>{x($e.target.value),vt()},[vt]),pn=f.useCallback($e=>{v($e.target.value),vt()},[vt]),In=f.useCallback($e=>{S($e.target.value),vt()},[vt]),on=f.useCallback($e=>{N($e.target.value),vt()},[vt]),Er=f.useCallback($e=>{R($e.target.value),vt()},[vt]),jr=f.useCallback($e=>{z($e.target.value),vt()},[vt]),ht=f.useCallback($e=>{V($e.target.value),vt()},[vt]),vr=f.useCallback($e=>{Z($e.target.checked),vt()},[vt]),Rn=f.useCallback($e=>{q($e.target.checked),vt()},[vt]),bn=f.useCallback($e=>{K($e.target.checked),vt()},[vt]),En=f.useCallback($e=>{re($e.target.value),Ee(!0)},[]),Wr=f.useCallback($e=>{G($e.target.value),Ee(!0)},[]),Bn=f.useCallback($e=>{Se($e.target.value),Ee(!0)},[]),te=f.useCallback($e=>{Pt($e.target.value),Ue(!0)},[]),je=f.useCallback($e=>{Ne($e.target.value),Ue(!0)},[]),Re=f.useCallback($e=>{ne($e.target.value),Ue(!0)},[]),Ye=f.useCallback($e=>{U($e.target.value),Ue(!0)},[]),at=f.useCallback($e=>{ce($e.target.value),Ue(!0)},[]),jt=f.useCallback($e=>{xe($e.target.value),Ue(!0)},[]),Qe=f.useCallback($e=>{se($e.target.value),Ue(!0)},[]);return n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto w-full flex flex-col gap-4 py-8 px-4",children:[n.jsx(zhe,{settings:c,activeStore:Be,loggedInUser:t,info:i,billingAddress:tt,onEditProfile:wt,onEditBilling:zr}),n.jsx(Bhe,{backupRegion:y,unitSystem:b,weightUnit:j,timeZone:k,timeZones:ar,onBackupRegionChange:br,onUnitSystemChange:pn,onWeightUnitChange:In,onTimeZoneChange:on}),n.jsx(Rhe,{orderIdPrefix:P,orderIdSuffix:F,onPrefixChange:Er,onSuffixChange:jr}),n.jsx(Lhe,{fulfillmentOption:H,notifyCustomers:W,fulfillHighRiskOrders:A,autoArchive:I,onFulfillmentOptionChange:ht,onNotifyCustomersChange:vr,onFulfillHighRiskOrdersChange:Rn,onAutoArchiveChange:bn}),n.jsx(Fhe,{}),n.jsx(Dhe,{onOpenShortcutsModal:Jt}),n.jsx(Ohe,{onSave:Ur,saving:ft,disabled:!dt||!Xe||ft||d}),n.jsx(The,{open:D,onClose:Ut,onSave:er,saving:Ae,storeName:oe,storeEmail:Te,storePhone:Y,initialValues:we,onStoreNameChange:En,onStoreEmailChange:Wr,onStorePhoneChange:Bn}),n.jsx(Ehe,{open:ze,onClose:rn,onSave:_n,saving:Ge,legalBusinessName:pt,country:ee,address:Ie,apartment:M,city:J,state:ue,pinCode:he,initialValues:_e,countries:ye,onLegalBusinessNameChange:te,onCountryChange:je,onAddressChange:Re,onApartmentChange:Ye,onCityChange:at,onStateChange:jt,onPinCodeChange:Qe}),n.jsx(Ihe,{open:Nt,onClose:wr})]})})},f6=f.createContext(void 0),qhe=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState({}),[o,i]=f.useState(0),[l,c]=f.useState(1),[d,h]=f.useState(50),[m,y]=f.useState(!1),[x,b]=f.useState(null),v=f.useCallback(async(N={})=>{try{y(!0),b(null);const P=new URLSearchParams;N.countryId&&P.set("countryId",N.countryId),N.countryIso2&&P.set("countryIso2",N.countryIso2),N.q&&P.set("q",N.q),N.page&&P.set("page",String(N.page)),N.limit&&P.set("limit",String(N.limit));const R=P.toString(),F=R?`/states?${R}`:"/states",z=await Ke.get(F),{success:H,data:V,message:W,meta:Z}=z.data;if(!H)throw new Error(W||"Failed to fetch states");const A=V||[];return e(A),N.countryId&&A.length&&s(q=>({...q,[N.countryId]:A})),Z?(i(Z.total??A.length),c(Z.page??1),h((Z.limit??A.length)||50)):i(A.length),A}catch(P){const R=P?.response?.data?.message||P?.message||"Failed to fetch states";throw b(R),new Error(R)}finally{y(!1)}},[]),j=f.useCallback(async(N,P=!1)=>{if(!N)throw new Error("countryId is required");if(!P&&t[N])return t[N];try{y(!0),b(null);const R=await Ke.get(`/states/country/${N}`),{success:F,data:z,message:H,meta:V}=R.data;if(!F)throw new Error(H||"Failed to fetch states");const W=z||[];return e(W),s(Z=>({...Z,[N]:W})),V?.total!=null?i(V.total):i(W.length),c(1),h(W.length||50),W}catch(R){const F=R?.response?.data?.message||R?.message||"Failed to fetch states";throw b(F),new Error(F)}finally{y(!1)}},[t]),S=f.useCallback(N=>{if(!N){s({});return}s(P=>{const{[N]:R,...F}=P;return F})},[]),k=f.useMemo(()=>({states:r,statesByCountry:t,loading:m,error:x,total:o,page:l,limit:d,getStates:v,getStatesByCountryId:j,clearStatesByCountry:S}),[r,t,m,x,o,l,d,v,j,S]);return n.jsx(f6.Provider,{value:k,children:a})},p6=()=>{const a=f.useContext(f6);if(!a)throw new Error("useStates must be used within a StateProvider");return a},h6=f.createContext(void 0),Ghe=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async(y,x)=>{try{s(!0),i(null);const b=new URLSearchParams;x&&b.set("storeId",x);const v=b.toString(),j=`/tax-defaults/country/${y}${v?`?${v}`:""}`,S=await Ke.get(j),{success:k,data:N,message:P}=S.data;if(!k)throw new Error(P||"Failed to fetch tax defaults");return e(N||[]),N||[]}catch(b){const v=b?.response?.data?.message||b?.message||"Failed to fetch tax defaults";throw i(v),new Error(v)}finally{s(!1)}},[]),c=f.useCallback(async(y,x)=>{try{s(!0),i(null);const b=`/tax-defaults/country/${y}/state/${x}`,v=await Ke.get(b),{success:j,data:S,message:k}=v.data;if(!j)throw new Error(k||"Failed to fetch tax default");return S}catch(b){const v=b?.response?.data?.message||b?.message||"Failed to fetch tax default";throw i(v),new Error(v)}finally{s(!1)}},[]),d=f.useCallback(async y=>{try{s(!0),i(null);const x=await Ke.get(`/tax-defaults/${y}`),{success:b,data:v,message:j}=x.data;if(!b)throw new Error(j||"Failed to fetch tax default");return v}catch(x){const b=x?.response?.data?.message||x?.message||"Failed to fetch tax default";throw i(b),new Error(b)}finally{s(!1)}},[]),h=f.useCallback(()=>{e([]),i(null),s(!1)},[]),m={taxDefaults:r,loading:t,error:o,getTaxDefaultsByCountryId:l,getTaxDefaultByCountryAndState:c,getTaxDefaultById:d,clearTaxDefaults:h};return n.jsx(h6.Provider,{value:m,children:a})},Khe=()=>{const a=f.useContext(h6);if(!a)throw new Error("useTaxRateDefaults must be used within a TaxRateDefaultProvider");return a},m6=f.createContext(void 0),Yhe=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async S=>{try{s(!0),i(null);const k=await Ke.post("/tax-rates",S),{success:N,data:P,message:R}=k.data;if(!N)throw new Error(R||"Failed to create tax rate");return e(F=>[P,...F]),P}catch(k){const N=k?.response?.data?.message||k?.message||"Failed to create tax rate";throw i(N),new Error(N)}finally{s(!1)}},[]),c=f.useCallback(async(S,k)=>{try{s(!0),i(null);const N=new URLSearchParams;k?.countryId&&N.set("countryId",k.countryId),k?.stateId!==void 0&&N.set("stateId",k.stateId===null?"null":k.stateId);const P=N.toString(),R=`/tax-rates/store/${S}${P?`?${P}`:""}`,F=await Ke.get(R),{success:z,data:H,message:V}=F.data;if(!z)throw new Error(V||"Failed to fetch tax rates");return e(H||[]),H||[]}catch(N){const P=N?.response?.data?.message||N?.message||"Failed to fetch tax rates";throw i(P),new Error(P)}finally{s(!1)}},[]),d=f.useCallback(async(S,k,N)=>{try{s(!0),i(null);const P=new URLSearchParams;N&&P.set("countryId",N);const R=P.toString(),F=`/tax-rates/store/${S}/state/${k}${R?`?${R}`:""}`,z=await Ke.get(F),{success:H,data:V,message:W}=z.data;if(!H)throw new Error(W||"Failed to fetch tax rate");return V}catch(P){const R=P?.response?.data?.message||P?.message||"Failed to fetch tax rate";throw i(R),new Error(R)}finally{s(!1)}},[]),h=f.useCallback(async(S,k)=>{try{s(!0),i(null);const N=await Ke.put(`/tax-rates/${S}`,k),{success:P,data:R,message:F}=N.data;if(!P)throw new Error(F||"Failed to update tax rate");return e(z=>z.map(H=>H._id===S?R:H)),R}catch(N){const P=N?.response?.data?.message||N?.message||"Failed to update tax rate";throw i(P),new Error(P)}finally{s(!1)}},[]),m=f.useCallback(async S=>{try{s(!0),i(null);const k=await Ke.delete(`/tax-rates/${S}`),{success:N,message:P}=k.data;if(!N)throw new Error(P||"Failed to delete tax rate");e(R=>R.filter(F=>F._id!==S))}catch(k){const N=k?.response?.data?.message||k?.message||"Failed to delete tax rate";throw i(N),new Error(N)}finally{s(!1)}},[]),y=f.useCallback(async S=>{try{s(!0),i(null);const k=await Ke.get(`/tax-rates/${S}`),{success:N,data:P,message:R}=k.data;if(!N)throw new Error(R||"Failed to fetch tax rate");return P}catch(k){const N=k?.response?.data?.message||k?.message||"Failed to fetch tax rate";throw i(N),new Error(N)}finally{s(!1)}},[]),x=f.useCallback(async(S,k)=>{try{s(!0),i(null);const N=await Ke.get(`/tax-rates/store/${S}/country/${k}/states`),{success:P,data:R,message:F}=N.data;if(!P)throw new Error(F||"Failed to fetch states with tax details");return R}catch(N){const P=N?.response?.data?.message||N?.message||"Failed to fetch states with tax details";throw i(P),new Error(P)}finally{s(!1)}},[]),b=f.useCallback(async(S,k)=>{try{s(!0),i(null);const N=await Ke.delete(`/tax-rates/store/${S}/country/${k}`),{success:P,data:R,message:F}=N.data;if(!P)throw new Error(F||"Failed to delete tax overrides");return e(z=>z.filter(H=>{const V=typeof H.storeId=="object"?H.storeId._id:H.storeId,W=typeof H.countryId=="object"?H.countryId._id:H.countryId;return V!==S||W!==k})),{deletedCount:R.deletedCount}}catch(N){const P=N?.response?.data?.message||N?.message||"Failed to delete tax overrides";throw i(P),new Error(P)}finally{s(!1)}},[]),v=f.useCallback(()=>{e([]),i(null),s(!1)},[]),j={taxRates:r,loading:t,error:o,createTaxRate:l,getTaxRatesByStoreId:c,getTaxRateByStoreAndState:d,updateTaxRate:h,deleteTaxRate:m,getTaxRateById:y,getStatesWithTaxDetails:x,deleteTaxOverridesByStoreAndCountry:b,clearTaxRates:v};return n.jsx(m6.Provider,{value:j,children:a})},Zhe=()=>{const a=f.useContext(m6);if(!a)throw new Error("useTaxRateOverrides must be used within a TaxRateOverrideProvider");return a},g6=f.createContext(void 0),Xhe=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async b=>{try{s(!0),i(null);const v=await Ke.post("/shipping-overrides",b),{success:j,data:S,message:k}=v.data;if(!j)throw new Error(k||"Failed to create shipping override");return e(N=>[S,...N]),S}catch(v){const j=v?.response?.data?.message||v?.message||"Failed to create shipping override";throw i(j),new Error(j)}finally{s(!1)}},[]),c=f.useCallback(async(b,v)=>{try{s(!0),i(null);const j=await Ke.get(`/shipping-overrides/store/${b}/country/${v}`),{success:S,data:k,message:N}=j.data;if(!S)throw new Error(N||"Failed to fetch shipping overrides");return e(k||[]),k||[]}catch(j){const S=j?.response?.data?.message||j?.message||"Failed to fetch shipping overrides";throw i(S),new Error(S)}finally{s(!1)}},[]),d=f.useCallback(async b=>{try{s(!0),i(null);const v=await Ke.get(`/shipping-overrides/${b}`),{success:j,data:S,message:k}=v.data;if(!j)throw new Error(k||"Failed to fetch shipping override");return S}catch(v){const j=v?.response?.data?.message||v?.message||"Failed to fetch shipping override";throw i(j),new Error(j)}finally{s(!1)}},[]),h=f.useCallback(async(b,v)=>{try{s(!0),i(null);const j=await Ke.put(`/shipping-overrides/${b}`,v),{success:S,data:k,message:N}=j.data;if(!S)throw new Error(N||"Failed to update shipping override");return e(P=>P.map(R=>R._id===b?k:R)),k}catch(j){const S=j?.response?.data?.message||j?.message||"Failed to update shipping override";throw i(S),new Error(S)}finally{s(!1)}},[]),m=f.useCallback(async b=>{try{s(!0),i(null);const v=await Ke.delete(`/shipping-overrides/${b}`),{success:j,message:S}=v.data;if(!j)throw new Error(S||"Failed to delete shipping override");e(k=>k.filter(N=>N._id!==b))}catch(v){const j=v?.response?.data?.message||v?.message||"Failed to delete shipping override";throw i(j),new Error(j)}finally{s(!1)}},[]),y=f.useCallback(()=>{e([]),i(null),s(!1)},[]),x={shippingOverrides:r,loading:t,error:o,createShippingOverride:l,getShippingOverridesByStoreAndCountry:c,getShippingOverrideById:d,updateShippingOverride:h,deleteShippingOverride:m,clearShippingOverrides:y};return n.jsx(g6.Provider,{value:x,children:a})},Qhe=()=>{const a=f.useContext(g6);if(!a)throw new Error("useShippingOverrides must be used within a ShippingOverrideProvider");return a},y6=f.createContext(void 0),Jhe=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async b=>{try{s(!0),i(null);const v=await Ke.post("/product-overrides",b),{success:j,data:S,message:k}=v.data;if(!j)throw new Error(k||"Failed to create product override");return e(N=>[S,...N]),S}catch(v){const j=v?.response?.data?.message||v?.message||"Failed to create product override";throw i(j),new Error(j)}finally{s(!1)}},[]),c=f.useCallback(async(b,v)=>{try{s(!0),i(null);const j=await Ke.get(`/product-overrides/store/${b}/country/${v}`),{success:S,data:k,message:N}=j.data;if(!S)throw new Error(N||"Failed to fetch product overrides");return e(k||[]),k||[]}catch(j){const S=j?.response?.data?.message||j?.message||"Failed to fetch product overrides";throw i(S),new Error(S)}finally{s(!1)}},[]),d=f.useCallback(async b=>{try{s(!0),i(null);const v=await Ke.get(`/product-overrides/${b}`),{success:j,data:S,message:k}=v.data;if(!j)throw new Error(k||"Failed to fetch product override");return S}catch(v){const j=v?.response?.data?.message||v?.message||"Failed to fetch product override";throw i(j),new Error(j)}finally{s(!1)}},[]),h=f.useCallback(async(b,v)=>{try{s(!0),i(null);const j=await Ke.put(`/product-overrides/${b}`,v),{success:S,data:k,message:N}=j.data;if(!S)throw new Error(N||"Failed to update product override");return e(P=>P.map(R=>R._id===b?k:R)),k}catch(j){const S=j?.response?.data?.message||j?.message||"Failed to update product override";throw i(S),new Error(S)}finally{s(!1)}},[]),m=f.useCallback(async b=>{try{s(!0),i(null);const v=await Ke.delete(`/product-overrides/${b}`),{success:j,message:S}=v.data;if(!j)throw new Error(S||"Failed to delete product override");e(k=>k.filter(N=>N._id!==b))}catch(v){const j=v?.response?.data?.message||v?.message||"Failed to delete product override";throw i(j),new Error(j)}finally{s(!1)}},[]),y=f.useCallback(()=>{e([]),i(null),s(!1)},[]),x={productOverrides:r,loading:t,error:o,createProductOverride:l,getProductOverridesByStoreAndCountry:c,getProductOverrideById:d,updateProductOverride:h,deleteProductOverride:m,clearProductOverrides:y};return n.jsx(y6.Provider,{value:x,children:a})},eme=()=>{const a=f.useContext(y6);if(!a)throw new Error("useProductOverrides must be used within a ProductOverrideProvider");return a},x6=f.createContext(void 0),tme=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async y=>{try{s(!0),i(null);const x=await Ke.post("/product-override-entries",y),{success:b,data:v,message:j}=x.data;if(!b)throw new Error(j||"Failed to create product override entry");return e(S=>[v,...S]),v}catch(x){const b=x?.response?.data?.error||x?.response?.data?.message||x?.message||"Failed to create product override entry";throw i(b),new Error(b)}finally{s(!1)}},[]),c=f.useCallback(async y=>{try{s(!0),i(null);const x=await Ke.get(`/product-override-entries/product-override/${y}`),{success:b,data:v,message:j}=x.data;if(!b)throw new Error(j||"Failed to fetch product override entries");return e(v||[]),v||[]}catch(x){const b=x?.response?.data?.error||x?.response?.data?.message||x?.message||"Failed to fetch product override entries";throw i(b),new Error(b)}finally{s(!1)}},[]),d=f.useCallback(async y=>{try{s(!0),i(null);const x=await Ke.delete(`/product-override-entries/${y}`),{success:b,message:v}=x.data;if(!b)throw new Error(v||"Failed to delete product override entry");e(j=>j.filter(S=>S._id!==y))}catch(x){const b=x?.response?.data?.error||x?.response?.data?.message||x?.message||"Failed to delete product override entry";throw i(b),new Error(b)}finally{s(!1)}},[]),h=f.useCallback(()=>{e([]),i(null),s(!1)},[]),m={productOverrideEntries:r,loading:t,error:o,createProductOverrideEntry:l,getProductOverrideEntriesByProductOverrideId:c,deleteProductOverrideEntry:d,clearProductOverrideEntries:h};return n.jsx(x6.Provider,{value:m,children:a})},rme=()=>{const a=f.useContext(x6);if(!a)throw new Error("useProductOverrideEntries must be used within a ProductOverrideEntryProvider");return a},v6=f.createContext(void 0),nme=({children:a})=>{const[r,e]=f.useState(null),[t,s]=f.useState({}),[o,i]=f.useState(!1),[l,c]=f.useState(null),d=f.useCallback(async(y,x)=>{const b=t[y];if(b&&!x?.force)return e(b),b;try{i(!0),c(null);const v=await Ke.get(`/country-taxes/${y}`),{success:j,data:S,message:k}=v.data;if(!j)throw new Error(k||"Failed to fetch country tax");return e(S),s(N=>({...N,[y]:S})),S}catch(v){const j=v?.response?.data?.error||v?.response?.data?.message||v?.message||"Failed to fetch country tax";throw c(j),new Error(j)}finally{i(!1)}},[t]),h=f.useCallback(y=>{y?(s(x=>{const b={...x};return delete b[y],b}),e(x=>x&&((typeof x.countryId=="string"?x.countryId:x.countryId?._id??"")===y?null:x))):(e(null),s({})),c(null),i(!1)},[]),m={countryTax:r,countryTaxMap:t,loading:o,error:l,getCountryTaxByCountryId:d,clearCountryTax:h};return n.jsx(v6.Provider,{value:m,children:a})},ame=()=>{const a=f.useContext(v6);if(!a)throw new Error("useCountryTax must be used within a CountryTaxProvider");return a},b6=f.createContext(void 0),sme=({children:a})=>{const[r,e]=f.useState(null),[t,s]=f.useState({}),[o,i]=f.useState(!1),[l,c]=f.useState(null),d=f.useRef({});f.useEffect(()=>{d.current=t},[t]);const h=f.useCallback(async j=>{try{i(!0),c(null);const S=await Ke.post("/country-tax-overrides",j),{success:k,data:N,message:P}=S.data;if(!k)throw new Error(P||"Failed to create country tax override");const R=`${j.storeId}-${j.countryId}`;return e(N),s(F=>{const z={...F,[R]:N};return d.current=z,z}),N}catch(S){const k=S?.response?.data?.error||S?.response?.data?.message||S?.message||"Failed to create country tax override";throw c(k),new Error(k)}finally{i(!1)}},[]),m=f.useCallback(async(j,S,k)=>{const N=`${j}-${S}`,P=d.current[N];if(P&&!k?.force)return e(P),P;try{i(!0),c(null);const R=await Ke.get(`/country-tax-overrides/store/${j}/country/${S}`),{success:F,data:z,message:H}=R.data;if(!F)throw new Error(H||"Failed to fetch country tax override");return z?(e(z),s(V=>{const W={...V,[N]:z};return d.current=W,W}),z):null}catch(R){if(R?.response?.status===404)return e(null),s(z=>{const H={...z};return delete H[N],d.current=H,H}),null;const F=R?.response?.data?.error||R?.response?.data?.message||R?.message||"Failed to fetch country tax override";throw c(F),new Error(F)}finally{i(!1)}},[]),y=f.useCallback(async(j,S,k)=>{try{i(!0),c(null);const N=await Ke.put(`/country-tax-overrides/store/${j}/country/${S}`,k),{success:P,data:R,message:F}=N.data;if(!P)throw new Error(F||"Failed to update country tax override");const z=`${j}-${S}`;return e(R),s(H=>{const V={...H,[z]:R};return d.current=V,V}),R}catch(N){const P=N?.response?.data?.error||N?.response?.data?.message||N?.message||"Failed to update country tax override";throw c(P),new Error(P)}finally{i(!1)}},[]),x=f.useCallback(async(j,S)=>{try{i(!0),c(null);const k=await Ke.delete(`/country-tax-overrides/store/${j}/country/${S}`),{success:N,message:P}=k.data;if(!N)throw new Error(P||"Failed to delete country tax override");const R=`${j}-${S}`;s(F=>{const z={...F};return delete z[R],d.current=z,z}),e(F=>{if(!F)return null;const z=typeof F.storeId=="string"?F.storeId:F.storeId?._id??"",H=typeof F.countryId=="string"?F.countryId:F.countryId?._id??"";return z===j&&H===S?null:F})}catch(k){const N=k?.response?.data?.error||k?.response?.data?.message||k?.message||"Failed to delete country tax override";throw c(N),new Error(N)}finally{i(!1)}},[]),b=f.useCallback((j,S)=>{if(j&&S){const k=`${j}-${S}`;s(N=>{const P={...N};return delete P[k],P}),e(N=>{if(!N)return null;const P=typeof N.storeId=="string"?N.storeId:N.storeId?._id??"",R=typeof N.countryId=="string"?N.countryId:N.countryId?._id??"";return P===j&&R===S?null:N})}else e(null),s({});c(null),i(!1)},[]),v={countryTaxOverride:r,countryTaxOverrideMap:t,loading:o,error:l,createCountryTaxOverride:h,getCountryTaxOverrideByStoreAndCountry:m,updateCountryTaxOverrideByStoreAndCountry:y,deleteCountryTaxOverrideByStoreAndCountry:x,clearCountryTaxOverride:b};return n.jsx(b6.Provider,{value:v,children:a})},ome=()=>{const a=f.useContext(b6);if(!a)throw new Error("useCountryTaxOverride must be used within a CountryTaxOverrideProvider");return a},ime=()=>{const{countryId:a}=qa(),{countries:r,getCountries:e}=dw(),{getStatesByCountryId:t,statesByCountry:s,loading:o}=p6(),{taxDefaults:i,loading:l,getTaxDefaultsByCountryId:c}=Khe(),{createTaxRate:d,updateTaxRate:h,deleteTaxRate:m,deleteTaxOverridesByStoreAndCountry:y,getTaxRatesByStoreId:x}=Zhe(),{getShippingOverridesByStoreAndCountry:b,createShippingOverride:v,updateShippingOverride:j,deleteShippingOverride:S}=Qhe(),{getProductOverridesByStoreAndCountry:k,createProductOverride:N,deleteProductOverride:P}=eme(),{createProductOverrideEntry:R,getProductOverrideEntriesByProductOverrideId:F,deleteProductOverrideEntry:z}=rme(),{getCountryTaxByCountryId:H,countryTaxMap:V}=ame(),{createCountryTaxOverride:W,getCountryTaxOverrideByStoreAndCountry:Z,updateCountryTaxOverrideByStoreAndCountry:A,deleteCountryTaxOverrideByStoreAndCountry:q,countryTaxOverrideMap:I}=ome(),{activeStoreId:K}=fn(),{searchCollections:D}=gp(),[Q,oe]=f.useState(null),[re,Te]=f.useState(!1),[G,Y]=f.useState(!1),[Se,fe]=f.useState(!1),[Ee,Ae]=f.useState("products"),[qe,we]=f.useState(""),[Oe,ze]=f.useState(""),[We,pt]=f.useState(null),[Pt,ee]=f.useState(""),[Ne,Ie]=f.useState([]),[ne,M]=f.useState(!1),[U,J]=f.useState(1),[ce,ue]=f.useState(null),[xe,he]=f.useState("india"),[se,Le]=f.useState(9),[Ue,Ge]=f.useState(null),[ie,_e]=f.useState([]),[le,Xe]=f.useState([]),[Fe,dt]=f.useState(null),[lt,ft]=f.useState({anchorEl:null,overrideId:null,collectionName:""}),[Ze,Nt]=f.useState([]),[Mt,vt]=f.useState({}),[Jt,wr]=f.useState(0),[Wt,ye]=f.useState(!1),[Be,tt]=f.useState(null),[wt,Ut]=f.useState(""),[er,zr]=f.useState(""),[rn,_n]=f.useState(!1),[Ur,ar]=f.useState(!1),[br,pn]=f.useState(null),[In,on]=f.useState(!1),[Er,jr]=f.useState(null),[ht,vr]=f.useState(0),[Rn,bn]=f.useState(!1),[En,Wr]=f.useState(0),[Bn,te]=f.useState(!1),[je,Re]=f.useState({taxRate:0,taxLabel:"",calculationMethod:"instead"});f.useEffect(()=>{e({limit:1e3})},[e]),f.useEffect(()=>{if(r.length>0&&a){const mt=r.find(nr=>nr._id===a);mt&&(oe(mt),t(mt._id))}},[r,a,t]),f.useEffect(()=>{a&&H(a)},[a,H]),f.useEffect(()=>{a&&K&&Z(K,a)},[a,K]),f.useEffect(()=>{Q&&Q._id&&c(Q._id,K||void 0)},[Q,K,c]),f.useEffect(()=>{(async()=>{if(Q&&Q._id&&K)try{const nr=typeof Q._id=="string"?Q._id:Q._id.toString(),Ar=await k(K,nr);Xe(Ar)}catch(nr){console.error("Failed to fetch product overrides:",nr)}})()},[Q,K,k]),f.useEffect(()=>{(async()=>{if(le.length>0)try{const nr={};await Promise.all(le.map(async Ar=>{try{const Rr=await F(Ar._id);nr[Ar._id]=Rr}catch(Rr){console.error(`Failed to fetch entries for product override ${Ar._id}:`,Rr),nr[Ar._id]=[]}})),vt(nr)}catch(nr){console.error("Failed to fetch product override entries:",nr)}else vt({})})()},[le,F]),f.useEffect(()=>{(async()=>{if(Q&&Q._id&&K)try{const nr=typeof Q._id=="string"?Q._id:Q._id.toString(),Ar=await b(K,nr);Nt(Ar)}catch(nr){console.error("Failed to fetch shipping overrides:",nr)}})()},[Q,K,b]);const Ye=f.useMemo(()=>{if(!a)return 0;const mt=K?I[`${K}-${a}`]:null,nr=V[a];return mt?mt.taxRate:nr?nr.taxRate:0},[a,K,I,V]),at=f.useRef(null);f.useEffect(()=>{if(!(!K||!ne))return at.current&&clearTimeout(at.current),at.current=setTimeout(async()=>{try{const mt=await D(K,Pt||"",U,10);Ie(mt.data),ue(mt.pagination)}catch(mt){console.error("Failed to search collections:",mt),Ie([])}},300),()=>{at.current&&clearTimeout(at.current)}},[Pt,U,ne,K,D]),f.useEffect(()=>{ne&&K&&(async()=>{try{const nr=await D(K,"",1,10);Ie(nr.data),ue(nr.pagination)}catch(nr){console.error("Failed to search collections:",nr),Ie([])}})()},[ne,K,D]);const jt=mt=>{we(mt._id),ze(mt.title),M(!1),ee(""),dt(null)},Qe=()=>{ft({anchorEl:null,overrideId:null,collectionName:""})},$e=mt=>{J(mt)},ve=(mt,nr,Ar,Rr)=>{tt(mt),Ut(nr),zr(Rr||""),_n(Ar),ye(!0)},Ve=async()=>{if(Be)try{if(Ur&&br){await z(Be);const mt=await F(br);if(vt(nr=>({...nr,[br]:mt})),Q&&Q._id&&K){const nr=typeof Q._id=="string"?Q._id:Q._id.toString(),Ar=await k(K,nr);Xe(Ar)}}else if(rn){if(await S(Be),Q&&Q._id&&K){const mt=typeof Q._id=="string"?Q._id:Q._id.toString(),nr=await b(K,mt);Nt(nr)}}else if(await P(Be),Q&&Q._id&&K){const mt=typeof Q._id=="string"?Q._id:Q._id.toString(),nr=await k(K,mt);Xe(nr)}ye(!1),tt(null),Ut(""),zr(""),_n(!1),ar(!1),pn(null)}catch(mt){console.error("Failed to delete override:",mt)}},st=()=>{ye(!1),tt(null),Ut(""),zr(""),_n(!1),ar(!1),pn(null)},Ot=mt=>{jr(mt),vr(mt.taxRate),on(!0)},de=async()=>{if(!(!Er||!Q||!Q._id||!K))try{await j(Er._id,{taxRate:ht});const mt=typeof Q._id=="string"?Q._id:Q._id.toString(),nr=await b(K,mt);Nt(nr),on(!1),jr(null),vr(0)}catch(mt){console.error("Failed to update shipping override:",mt)}},ke=()=>{on(!1),jr(null),vr(0)},ct=()=>{if(!a||!K)return;const mt=K&&I[`${K}-${a}`]?.taxRate||V[a]?.taxRate||0;Wr(mt),bn(!0)},bt=()=>{bn(!1),Wr(0)},Ft=async()=>{if(!(!a||!K)){if(En<0||En>100){alert("Tax rate must be between 0 and 100");return}try{I[`${K}-${a}`]?await A(K,a,{taxRate:En}):await W({storeId:K,countryId:a,taxRate:En}),await Z(K,a,{force:!0}),bt()}catch(mt){console.error("Failed to update country tax override:",mt);const nr=mt?.response?.data?.message||mt?.message||"Failed to update country tax override";alert(nr)}}},cr=()=>{te(!0)},Br=()=>{te(!1)},kt=async()=>{if(!(!a||!K))try{await q(K,a),await Z(K,a,{force:!0}),Br()}catch(mt){console.error("Failed to reset country tax override:",mt);const nr=mt?.response?.data?.message||mt?.message||"Failed to reset country tax override";alert(nr)}},Yr=mt=>{if(!mt.stateId)return"India";if(typeof mt.stateId=="object"&&mt.stateId.name)return mt.stateId.name;if(Q&&s[Q._id]){const nr=s[Q._id].find(Ar=>Ar._id===mt.stateId);return nr?nr.name:"Unknown"}return"Unknown"},Xr=mt=>{if(!mt||mt==="india")return"India";if(Q&&s[Q._id]){const nr=s[Q._id].find(Ar=>Ar._id===mt);return nr?nr.name:"Unknown"}return"Unknown"},ma=mt=>{Ge(mt),Re({taxRate:mt.taxRate,taxLabel:mt.taxLabel||"IGST",calculationMethod:mt.calculationMethod||"instead"}),Te(!0)},Jn=()=>{Te(!1),Ge(null),Re({taxRate:0,taxLabel:"",calculationMethod:"instead"})},fa=async()=>{if(!(!Ue||!Q||!K))try{const mt=typeof Q._id=="string"?Q._id:Q._id.toString(),nr=Ue.stateId?typeof Ue.stateId=="object"&&Ue.stateId?._id?Ue.stateId._id:typeof Ue.stateId=="string"?Ue.stateId:null:null,Ar=Ue.isOverride===!0||Ue.overrideId,kn=nr!=null?je.calculationMethod:null;Ar&&Ue.overrideId?await h(Ue.overrideId,{taxRate:je.taxRate,taxLabel:je.taxLabel,calculationMethod:kn}):await d({storeId:K,countryId:mt,stateId:nr,taxRate:je.taxRate,taxLabel:je.taxLabel,calculationMethod:kn}),await c(mt,K),Jn()}catch(mt){console.error("Failed to save tax override:",mt);const nr=mt?.response?.data?.message||mt?.response?.data?.error||mt?.message||"Failed to save tax override. Please try again.";alert(nr)}},Ns=(mt,nr)=>{const Ar=nr.toFixed(3);switch(mt){case"added":return`Added to ${Ar}% federal tax`;case"instead":return`Instead of ${Ar}% federal tax`;case"compounded":return`Compounded on top of ${Ar}% federal tax`;default:return""}},Ja=()=>{Y(!0)},Aa=()=>{Y(!1)},fs=async()=>{if(!(!Q||!Q._id||!K))try{const mt=typeof Q._id=="string"?Q._id:Q._id.toString();await y(K,mt);const nr=await c(mt,K);Aa()}catch(mt){console.error("Failed to reset tax rates:",mt)}},Lr=mt=>{if(!mt)return"";if(typeof mt=="object"&&"name"in mt)return mt.name;if(Q&&s[Q._id]){const nr=s[Q._id].find(Ar=>Ar._id===mt);return nr?nr.name:""}return""},kr=i.filter(mt=>mt.stateId&&mt.stateId!==null).map(mt=>({...mt,stateName:Lr(mt.stateId)})).sort((mt,nr)=>{const Ar=mt.stateName.toLowerCase(),Rr=nr.stateName.toLowerCase();return Ar.localeCompare(Rr)});return n.jsxs(Et,{sx:{maxWidth:1200,mx:"auto",py:4},children:[n.jsxs(N2,{sx:{mb:2},separator:n.jsx(tS,{fontSize:"small"}),children:[n.jsxs(Io,{component:Kc,to:"/settings/taxes-and-duties",sx:{display:"flex",alignItems:"center",color:"#6b7280",textDecoration:"none","&:hover":{color:"#111827"}},children:[n.jsx(U2,{sx:{mr:.5,fontSize:20}}),"Taxes and duties"]}),n.jsx(et,{color:"text.primary",sx:{fontWeight:500},children:Q?.name||"Loading..."})]}),n.jsx(et,{variant:"h4",sx:{fontWeight:700,color:"#111827",mb:3},children:Q?.name||"Loading..."}),a&&(V[a]||K&&I[`${K}-${a}`])&&n.jsx(ta,{elevation:0,sx:{p:3,mb:3,borderRadius:2,border:"1px solid #e5e7eb",backgroundColor:"#fff"},children:n.jsxs(_r,{direction:"row",alignItems:"center",spacing:2,children:[n.jsx(et,{sx:{minWidth:120,color:"#111827",fontWeight:500},children:Q?.name||"Loading..."}),n.jsxs(et,{sx:{color:"#111827",fontWeight:500},children:[(K&&I[`${K}-${a}`]?.taxRate||V[a]?.taxRate||0).toFixed(2),"%"]}),K&&I[`${K}-${a}`]&&n.jsx(os,{label:"Overridden",size:"small",sx:{backgroundColor:"#fef3c7",color:"#92400e",fontWeight:500,fontSize:"0.75rem",height:24}}),n.jsx(Et,{sx:{flex:1}}),K&&I[`${K}-${a}`]&&n.jsx($r,{variant:"outlined",size:"small",onClick:cr,sx:{textTransform:"none",borderColor:"#d1d5db",color:"#111827",fontSize:"0.75rem",px:2,"&:hover":{borderColor:"#9ca3af",backgroundColor:"#f3f4f6"}},children:"Reset to default"}),n.jsx($n,{size:"small",onClick:ct,sx:{color:"#6b7280","&:hover":{backgroundColor:"#f3f4f6",color:"#111827"}},children:n.jsx(Uh,{fontSize:"small"})})]})}),n.jsxs(ta,{elevation:0,sx:{p:3,borderRadius:2,border:"1px solid #e5e7eb",backgroundColor:"#fff"},children:[n.jsxs(_r,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:3},children:[n.jsx(et,{variant:"h6",sx:{fontWeight:600,color:"#111827"},children:"Base taxes"}),n.jsx($r,{variant:"outlined",onClick:Ja,sx:{textTransform:"none",borderColor:"#d1d5db",color:"#111827","&:hover":{borderColor:"#9ca3af",backgroundColor:"#f3f4f6"}},children:"Reset to default tax rates"})]}),n.jsx(et,{variant:"body1",sx:{fontWeight:600,color:"#111827",mb:2},children:"Regions"}),n.jsx(WA,{children:n.jsxs($A,{children:[n.jsx(HA,{children:n.jsxs(Ah,{children:[n.jsx(zs,{sx:{fontWeight:600,color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Region"}),n.jsx(zs,{sx:{fontWeight:600,color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Tax rate"}),n.jsx(zs,{sx:{fontWeight:600,color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Tax type"}),n.jsx(zs,{sx:{fontWeight:600,color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Federal tax override"}),n.jsx(zs,{sx:{fontWeight:600,color:"#6b7280",borderBottom:"1px solid #e5e7eb",width:80},children:"Actions"})]})}),n.jsx(VA,{children:o||l?n.jsx(Ah,{children:n.jsx(zs,{colSpan:5,sx:{textAlign:"center",py:4,color:"#6b7280"},children:"Loading tax defaults..."})}):kr.length===0?n.jsx(Ah,{children:n.jsx(zs,{colSpan:5,sx:{textAlign:"center",py:4,color:"#6b7280"},children:"No tax defaults found"})}):kr.map(mt=>{const nr=mt.stateName||Lr(mt.stateId),Ar=mt.calculationMethod||"instead";return n.jsxs(Ah,{children:[n.jsx(zs,{sx:{borderBottom:"1px solid #f3f4f6",color:"#111827"},children:nr}),n.jsxs(zs,{sx:{borderBottom:"1px solid #f3f4f6",color:"#111827"},children:[mt.taxRate.toFixed(3),"%"]}),n.jsx(zs,{sx:{borderBottom:"1px solid #f3f4f6",color:"#111827"},children:mt.taxLabel||"IGST"}),n.jsx(zs,{sx:{borderBottom:"1px solid #f3f4f6",color:"#111827"},children:Ns(Ar,Ye)}),n.jsx(zs,{sx:{borderBottom:"1px solid #f3f4f6"},children:n.jsx($n,{size:"small",onClick:()=>ma(mt),sx:{color:"#6b7280","&:hover":{backgroundColor:"#f3f4f6",color:"#111827"}},children:n.jsx(Uh,{fontSize:"small"})})})]},mt._id)})})]})})]}),n.jsxs(Et,{sx:{mt:4},children:[n.jsx(et,{variant:"h6",sx:{fontWeight:600,color:"#111827",mb:2},children:"Tax rates and exemptions"}),n.jsxs(ta,{elevation:0,sx:{p:3,mb:3,borderRadius:2,border:"1px solid #e5e7eb",backgroundColor:"#fff"},children:[n.jsxs(Et,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[n.jsx(et,{variant:"body1",sx:{fontWeight:600,color:"#111827"},children:"Shipping overrides"}),n.jsx($n,{size:"small",onClick:()=>{Ae("shipping"),fe(!0),dt(null)},sx:{border:"1px solid #e5e7eb",borderRadius:1,color:"#111827","&:hover":{backgroundColor:"#f3f4f6",borderColor:"#d1d5db"}},"aria-label":"add shipping override",children:n.jsx(Yg,{fontSize:"small"})})]}),Ze.length===0?n.jsx(et,{variant:"body2",sx:{color:"#6b7280",mb:2},children:"No shipping overrides"}):n.jsx(_r,{spacing:2,sx:{mb:2},children:Ze.map(mt=>{const Ar=Yr(mt);return n.jsxs(_r,{direction:"row",alignItems:"center",spacing:2,sx:{p:2,border:"1px solid #f3f4f6",borderRadius:1,backgroundColor:"#fafafa"},children:[n.jsx(et,{sx:{minWidth:120,color:"#111827",fontWeight:500},children:Ar}),n.jsxs(et,{sx:{color:"#111827",fontWeight:500},children:[mt.taxRate,"%"]}),n.jsxs(et,{sx:{color:"#6b7280",flex:1},children:["instead of ",Ye.toFixed(3),"% federal tax"]}),n.jsx($n,{size:"small",onClick:()=>Ot(mt),sx:{color:"#6b7280","&:hover":{color:"#2563eb",backgroundColor:"#eff6ff"}},children:n.jsx(Uh,{fontSize:"small"})}),n.jsx($n,{size:"small",onClick:()=>ve(mt._id,Ar,!0),sx:{color:"#6b7280","&:hover":{color:"#dc2626",backgroundColor:"#fee2e2"}},children:n.jsx(uy,{fontSize:"small"})})]},mt._id)})}),n.jsxs(Et,{onClick:()=>{Ae("shipping"),pt(null),fe(!0),dt(null),he("india"),Le(9)},sx:{display:"flex",alignItems:"center",gap:1,border:"1px solid #e5e7eb",borderRadius:1.5,px:2,py:1.25,cursor:"pointer",color:"#111827","&:hover":{backgroundColor:"#f9fafb",borderColor:"#d1d5db"}},children:[n.jsx(Yg,{sx:{fontSize:20}}),n.jsx(et,{sx:{fontWeight:500},children:"Add override"})]})]}),n.jsxs(P2,{anchorEl:lt.anchorEl,open:!!lt.anchorEl,onClose:Qe,children:[n.jsxs(ss,{onClick:()=>{const mt=le.find(nr=>(typeof nr.collectionId=="object"?nr.collectionId.title:nr.collectionId||"")===lt.collectionName);mt&&(pt(lt.collectionName||null),we(mt._id)),Ae("shipping"),fe(!0),dt(null),he("india"),Le(9),Qe()},children:[n.jsx(UE,{children:n.jsx(Yg,{fontSize:"small"})}),n.jsx(eS,{primary:"Add override"})]}),n.jsxs(ss,{onClick:()=>{lt.overrideId&&(ve(lt.overrideId,"",!1,lt.collectionName),Qe())},children:[n.jsx(UE,{children:n.jsx(uy,{fontSize:"small"})}),n.jsx(eS,{primary:"Delete override"})]})]}),n.jsxs(ta,{elevation:0,sx:{p:3,mb:3,borderRadius:2,border:"1px solid #e5e7eb",backgroundColor:"#fff"},children:[n.jsxs(Et,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[n.jsx(et,{variant:"body1",sx:{fontWeight:600,color:"#111827"},children:"Product overrides"}),n.jsx($n,{size:"small",onClick:()=>{Ae("products"),pt(null),fe(!0),dt(null)},sx:{border:"1px solid #e5e7eb",borderRadius:1,color:"#111827","&:hover":{backgroundColor:"#f3f4f6",borderColor:"#d1d5db"}},"aria-label":"add product override",children:n.jsx(Yg,{fontSize:"small"})})]}),le.length===0?n.jsx(et,{variant:"body2",sx:{color:"#6b7280",mb:2},children:"No product overrides"}):n.jsx(_r,{spacing:1.5,sx:{mb:2},children:le.map(mt=>{const nr=typeof mt.collectionId=="object"?mt.collectionId.title:mt.collectionId||"Unknown Collection",Ar=Mt[mt._id]||[];return n.jsxs(Et,{sx:{border:"1px solid #e5e7eb",borderRadius:1.5,overflow:"hidden"},children:[n.jsxs(Et,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:2,py:1.5,backgroundColor:"#f9fafb"},children:[n.jsx(et,{component:"span",sx:{color:"#2563eb",fontWeight:600,cursor:"pointer","&:hover":{textDecoration:"underline"}},children:nr}),n.jsx(_r,{direction:"row",alignItems:"center",spacing:1,children:n.jsx($n,{size:"small",sx:{color:"#6b7280"},"aria-label":"more actions",onClick:Rr=>ft({anchorEl:Rr.currentTarget,overrideId:mt._id,collectionName:nr}),children:n.jsx(n6,{fontSize:"small"})})})]}),Ar.length>0&&n.jsx(Et,{sx:{p:2,pt:1},children:n.jsx(_r,{spacing:1.5,children:Ar.map(Rr=>{const kn=Rr.stateId?typeof Rr.stateId=="object"&&Rr.stateId.name?Rr.stateId.name:"Unknown State":"India";return n.jsxs(_r,{direction:"row",alignItems:"center",spacing:2,sx:{p:2,border:"1px solid #f3f4f6",borderRadius:1,backgroundColor:"#fafafa"},children:[n.jsx(et,{sx:{minWidth:120,color:"#111827",fontWeight:500},children:kn}),n.jsxs(et,{sx:{color:"#111827",fontWeight:500},children:[Rr.taxRate,"%"]}),n.jsxs(et,{sx:{color:"#6b7280",flex:1},children:["instead of ",Ye.toFixed(3),"% federal tax"]}),n.jsx($n,{size:"small",onClick:()=>{tt(Rr._id),Ut(kn),ar(!0),pn(mt._id),ye(!0)},sx:{color:"#6b7280","&:hover":{color:"#dc2626",backgroundColor:"#fee2e2"}},children:n.jsx(uy,{fontSize:"small"})})]},Rr._id)})})})]},mt._id)})})]}),n.jsx(Et,{sx:{textAlign:"center",mt:3},children:n.jsx(Io,{href:"#",underline:"hover",sx:{color:"#6b7280",fontSize:"0.875rem","&:hover":{color:"#111827"}},children:"Learn more about sales tax"})})]}),n.jsxs(gl,{open:re,onClose:Jn,maxWidth:"sm",fullWidth:!0,children:[n.jsxs(vl,{sx:{m:0,p:3,pb:2,fontWeight:600,color:"#111827"},children:["Edit Tax Default",n.jsx($n,{"aria-label":"close",onClick:Jn,sx:{position:"absolute",right:16,top:16,color:"#6b7280","&:hover":{backgroundColor:"#f3f4f6"}},children:n.jsx(_u,{})})]}),n.jsx(xl,{sx:{px:3,pt:2,pb:2},children:n.jsxs(_r,{spacing:3,children:[n.jsxs(Et,{children:[n.jsx(et,{variant:"body2",sx:{color:"#6b7280",mb:1,fontWeight:500},children:"Region"}),n.jsx(et,{variant:"body1",sx:{color:"#111827",fontWeight:500},children:Ue&&(Ue.stateName||(Ue.stateId===null?"India":Lr(Ue.stateId)))})]}),n.jsx(Pn,{label:"Tax rate",type:"number",value:je.taxRate,onChange:mt=>Re({...je,taxRate:parseFloat(mt.target.value)||0}),InputProps:{endAdornment:n.jsx(Zi,{position:"end",children:n.jsx(et,{sx:{color:"#6b7280"},children:"%"})})},inputProps:{step:.001,min:0,max:100},fullWidth:!0,size:"small"}),n.jsx(Pn,{label:"Tax type",value:je.taxLabel,onChange:mt=>Re({...je,taxLabel:mt.target.value}),fullWidth:!0,size:"small",disabled:Ue&&(!Ue.stateId||Ue.stateId===null)}),Ue&&Ue.stateId&&Ue.stateId!==null&&n.jsxs(rc,{fullWidth:!0,size:"small",children:[n.jsx(et,{variant:"body2",sx:{color:"#6b7280",mb:1,fontWeight:500},children:"Federal tax override"}),n.jsxs(Nl,{value:je.calculationMethod||"instead",onChange:mt=>Re({...je,calculationMethod:mt.target.value}),displayEmpty:!0,children:[n.jsxs(ss,{value:"added",children:["Added to ",Ye.toFixed(3),"% federal tax"]}),n.jsxs(ss,{value:"instead",children:["Instead of ",Ye.toFixed(3),"% federal tax"]}),n.jsxs(ss,{value:"compounded",children:["Compounded on top of ",Ye.toFixed(3),"% federal tax"]})]})]})]})}),n.jsxs(yl,{sx:{p:3,pt:2},children:[n.jsx($r,{onClick:Jn,sx:{textTransform:"none",color:"#6b7280","&:hover":{backgroundColor:"#f3f4f6"}},children:"Cancel"}),n.jsx($r,{variant:"contained",onClick:fa,sx:{textTransform:"none",backgroundColor:"#6b7280",color:"#fff","&:hover":{backgroundColor:"#4b5563"}},children:"Save changes"})]})]}),n.jsxs(gl,{open:G,onClose:Aa,maxWidth:"sm",fullWidth:!0,children:[n.jsxs(vl,{sx:{m:0,p:3,pb:2,fontWeight:600,color:"#111827"},children:["Reset to default tax rates",n.jsx($n,{"aria-label":"close",onClick:Aa,sx:{position:"absolute",right:16,top:16,color:"#6b7280","&:hover":{backgroundColor:"#f3f4f6"}},children:n.jsx(_u,{})})]}),n.jsx(xl,{sx:{px:3,pt:2,pb:2},children:n.jsx(et,{variant:"body1",sx:{color:"#111827"},children:"Are you sure you want to reset all your taxes for India? This will set both the country tax and all region taxes to their current default values."})}),n.jsxs(yl,{sx:{p:3,pt:2},children:[n.jsx($r,{onClick:Aa,sx:{textTransform:"none",color:"#6b7280","&:hover":{backgroundColor:"#f3f4f6"}},children:"Cancel"}),n.jsx($r,{variant:"contained",onClick:fs,sx:{textTransform:"none",backgroundColor:"#dc2626",color:"#fff","&:hover":{backgroundColor:"#b91c1c"}},children:"Reset tax rates"})]})]}),n.jsxs(gl,{open:Se,onClose:()=>fe(!1),maxWidth:"sm",fullWidth:!0,children:[n.jsxs(vl,{sx:{m:0,p:3,pb:2,fontWeight:600,color:"#111827"},children:[Ee==="shipping"?We?`Add region to override for ${We}`:"Add region to override for Shipping":"Add tax override for India",n.jsx($n,{"aria-label":"close",onClick:()=>{fe(!1),Ae("products"),we(""),ze(""),ee(""),M(!1),J(1),he("india"),Le(9),dt(null),pt(null)},sx:{position:"absolute",right:16,top:16,color:"#6b7280","&:hover":{backgroundColor:"#f3f4f6"}},children:n.jsx(_u,{})})]}),n.jsx(xl,{sx:{px:3,pt:2,pb:2},children:n.jsxs(_r,{spacing:3,children:[Ee==="products"&&n.jsxs(Et,{sx:{position:"relative"},children:[n.jsxs(et,{variant:"body2",sx:{color:"#6b7280",mb:1.5,fontWeight:400},children:["Select a collection to apply the tax override to. You can also"," ",n.jsx(Io,{component:Kc,to:"http://admin.localhost:5173/products/collections/new",target:"_blank",sx:{color:"#2563eb",textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"create a new collection"}),"."]}),n.jsx(rc,{fullWidth:!0,size:"small",sx:{mt:1},children:n.jsxs(Nl,{value:qe,onOpen:()=>{M(!0),J(1)},onClose:()=>{M(!1),ee("")},displayEmpty:!0,renderValue:()=>Oe||"Select collection",sx:{backgroundColor:"#fff","& .MuiOutlinedInput-notchedOutline":{borderColor:"#d1d5db"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#9ca3af"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#2563eb"}},MenuProps:{PaperProps:{sx:{maxHeight:400,mt:.5}}},children:[n.jsx(Et,{sx:{p:1,borderBottom:"1px solid #e5e7eb"},children:n.jsx(Pn,{fullWidth:!0,size:"small",placeholder:"Search collections",value:Pt,onChange:mt=>{ee(mt.target.value),J(1)},onClick:mt=>mt.stopPropagation(),onKeyDown:mt=>mt.stopPropagation(),InputProps:{startAdornment:n.jsx(Zi,{position:"start",children:n.jsx(z2,{sx:{color:"#6b7280",fontSize:20}})})},sx:{"& .MuiOutlinedInput-root":{backgroundColor:"#fff","& fieldset":{borderColor:"#2563eb"},"&:hover fieldset":{borderColor:"#2563eb"},"&.Mui-focused fieldset":{borderColor:"#2563eb"}}}})}),Ne.length===0?n.jsx(ss,{disabled:!0,sx:{justifyContent:"center",py:2},children:n.jsx(et,{sx:{color:"#6b7280"},children:"No collections found"})}):n.jsxs(n.Fragment,{children:[Ne.map(mt=>n.jsx(ss,{value:mt._id,onClick:()=>jt(mt),selected:qe===mt._id,sx:{"&.Mui-selected":{backgroundColor:"#f3f4f6","&:hover":{backgroundColor:"#e5e7eb"}}},children:mt.title},mt._id)),ce&&ce.totalPages>1&&n.jsxs(Et,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",px:1,py:.5,borderTop:"1px solid #e5e7eb"},children:[n.jsx($n,{size:"small",disabled:U===1,onClick:mt=>{mt.stopPropagation(),$e(U-1)},sx:{color:"#6b7280","&:disabled":{color:"#d1d5db"}},children:n.jsx(Ype,{})}),n.jsxs(et,{variant:"body2",sx:{color:"#6b7280"},children:["Page ",U," of ",ce.totalPages]}),n.jsx($n,{size:"small",disabled:U===ce.totalPages,onClick:mt=>{mt.stopPropagation(),$e(U+1)},sx:{color:"#6b7280","&:disabled":{color:"#d1d5db"}},children:n.jsx(tS,{})})]})]})]})}),Fe&&n.jsx(et,{variant:"body2",sx:{color:"#dc2626",mt:1},children:Fe})]}),Ee==="shipping"&&Fe&&n.jsx(Et,{children:n.jsx(et,{variant:"body2",sx:{color:"#dc2626",mt:1},children:Fe})}),Ee==="shipping"&&n.jsxs(_r,{direction:"row",spacing:2,children:[n.jsxs(Et,{sx:{flex:1},children:[n.jsx(et,{variant:"body2",sx:{color:"#6b7280",mb:1,fontWeight:500},children:"Location"}),n.jsx(rc,{fullWidth:!0,size:"small",children:n.jsxs(Nl,{value:xe,onChange:mt=>{he(mt.target.value),dt(null)},sx:{backgroundColor:"#fff","& .MuiOutlinedInput-notchedOutline":{borderColor:"#d1d5db"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#9ca3af"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#2563eb"}},children:[n.jsx(ss,{value:"india",children:"India"}),Q&&s[Q._id]&&s[Q._id].map(mt=>n.jsx(ss,{value:mt._id,children:mt.name},mt._id))]})})]}),n.jsxs(Et,{sx:{flex:1},children:[n.jsx(et,{variant:"body2",sx:{color:"#6b7280",mb:1,fontWeight:500},children:"Tax rate"}),n.jsx(Pn,{type:"number",value:se,onChange:mt=>Le(parseFloat(mt.target.value)||0),InputProps:{endAdornment:n.jsx(Zi,{position:"end",children:n.jsx(et,{sx:{color:"#6b7280"},children:"%"})})},inputProps:{step:.001,min:0,max:100},fullWidth:!0,size:"small",sx:{"& .MuiOutlinedInput-root":{backgroundColor:"#fff","& fieldset":{borderColor:"#d1d5db"},"&:hover fieldset":{borderColor:"#9ca3af"},"&.Mui-focused fieldset":{borderColor:"#2563eb"}}}})]})]}),Ee==="products"&&n.jsx(et,{variant:"body2",sx:{color:"#6b7280"},children:"The selected collection will use the default India tax rates. No extra inputs needed."})]})}),n.jsxs(yl,{sx:{p:3,pt:2},children:[n.jsx($r,{onClick:()=>{fe(!1),Ae("products"),we(""),ze(""),ee(""),M(!1),J(1),he("india"),Le(9),dt(null)},sx:{textTransform:"none",color:"#6b7280","&:hover":{backgroundColor:"#f3f4f6"}},children:"Cancel"}),n.jsx($r,{variant:"contained",disabled:Ee==="products"&&!qe,onClick:async()=>{if(!(!Q||!Q._id||!K))try{const mt=typeof Q._id=="string"?Q._id:Q._id.toString();if(Ee==="shipping"){const nr=xe==="india"?null:xe;if(We&&qe){if((Mt[qe]||[]).some(Vn=>{const zn=typeof Vn.stateId=="object"&&Vn.stateId!==null?Vn.stateId._id:Vn.stateId;return nr===null?zn==null:zn===nr})){const Vn=nr===null||nr==="india"?"India":Xr(nr);dt(`A product override entry already exists for ${Vn}. You cannot add the same state twice for this product override.`);return}await R({productOverrideId:qe,stateId:nr,taxRate:se,isActive:!0});const kn=await F(qe);vt(Vn=>({...Vn,[qe]:kn}));const Sn=await k(K,mt);Xe(Sn)}else{if(Ze.some(kn=>{const Sn=typeof kn.stateId=="object"&&kn.stateId!==null?kn.stateId._id:kn.stateId;return nr===null?Sn==null:Sn===nr})){const kn=nr===null||nr==="india"?"India":Xr(nr);dt(`A shipping override already exists for ${kn}. You cannot add the same state twice for this store and country.`);return}await v({storeId:K,countryId:mt,stateId:nr,taxRate:se,isActive:!0});const Rr=await b(K,mt);Nt(Rr)}}else{if(le.some(Rr=>(typeof Rr.collectionId=="object"?Rr.collectionId._id:Rr.collectionId)===qe)){dt("This collection already has a product override for India.");return}await N({storeId:K,countryId:mt,collectionId:qe});const Ar=await k(K,mt);Xe(Ar)}fe(!1),Ae("products"),we(""),ze(""),ee(""),M(!1),J(1),he("india"),Le(9),dt(null),pt(null)}catch(mt){console.error("Failed to create override:",mt);const nr=mt?.response?.data?.error||mt?.message||"Failed to create override. Please try again.";dt(nr)}},sx:{textTransform:"none",backgroundColor:Ee==="products"&&!qe?"#d1d5db":"#111827",color:"#fff","&:hover":{backgroundColor:Ee==="products"&&!qe?"#d1d5db":"#000000"},"&.Mui-disabled":{backgroundColor:"#d1d5db",color:"#9ca3af"}},children:Ee==="shipping"?"Add region to override":"Add override"})]})]}),n.jsxs(gl,{open:Wt,onClose:st,maxWidth:"sm",fullWidth:!0,children:[n.jsxs(vl,{sx:{m:0,p:3,pb:2,fontWeight:600,color:"#111827"},children:[rn||Ur?"Delete region from override":"Delete entire override",n.jsx($n,{"aria-label":"close",onClick:st,sx:{position:"absolute",right:16,top:16,color:"#6b7280","&:hover":{backgroundColor:"#f3f4f6"}},children:n.jsx(_u,{})})]}),n.jsx(xl,{sx:{px:3,pt:2,pb:2},children:n.jsx(et,{variant:"body1",sx:{color:"#111827"},children:rn||Ur?n.jsxs(n.Fragment,{children:["Are you sure you want to remove ",n.jsx("strong",{children:wt})," from the list of regions this override applies to? This action cannot be reversed."]}):n.jsxs(n.Fragment,{children:["Are you sure you want to remove ",n.jsx("strong",{children:er}),"? This action cannot be reversed."]})})}),n.jsxs(yl,{sx:{p:3,pt:2},children:[n.jsx($r,{onClick:st,sx:{textTransform:"none",color:"#6b7280",border:"1px solid #d1d5db","&:hover":{backgroundColor:"#f3f4f6"}},children:"Cancel"}),n.jsx($r,{variant:"contained",onClick:Ve,sx:{textTransform:"none",backgroundColor:"#dc2626",color:"#fff","&:hover":{backgroundColor:"#b91c1c"}},children:"Delete"})]})]}),n.jsxs(gl,{open:In,onClose:ke,maxWidth:"sm",fullWidth:!0,children:[n.jsxs(vl,{sx:{m:0,p:3,pb:2,fontWeight:600,color:"#111827"},children:["Edit shipping override",n.jsx($n,{"aria-label":"close",onClick:ke,sx:{position:"absolute",right:16,top:16,color:"#6b7280","&:hover":{backgroundColor:"#f3f4f6"}},children:n.jsx(_u,{})})]}),n.jsx(xl,{sx:{px:3,pt:2,pb:2},children:Er&&n.jsxs(_r,{spacing:3,children:[n.jsxs(Et,{children:[n.jsx(et,{variant:"body2",sx:{color:"#6b7280",mb:1},children:"Location"}),n.jsx(et,{variant:"body1",sx:{color:"#111827",fontWeight:500},children:Yr(Er)})]}),n.jsxs(Et,{children:[n.jsx(et,{variant:"body2",sx:{color:"#6b7280",mb:1},children:"Tax rate"}),n.jsx(Pn,{type:"number",value:ht,onChange:mt=>vr(parseFloat(mt.target.value)||0),fullWidth:!0,InputProps:{endAdornment:n.jsx(Zi,{position:"end",children:n.jsx(et,{sx:{color:"#6b7280"},children:"%"})})},inputProps:{step:.001,min:0,max:100},sx:{"& .MuiOutlinedInput-root":{backgroundColor:"#fff"}}})]})]})}),n.jsxs(yl,{sx:{p:3,pt:2},children:[n.jsx($r,{onClick:ke,sx:{textTransform:"none",color:"#6b7280","&:hover":{backgroundColor:"#f3f4f6"}},children:"Cancel"}),n.jsx($r,{variant:"contained",onClick:de,sx:{textTransform:"none",backgroundColor:"#2563eb",color:"#fff","&:hover":{backgroundColor:"#1d4ed8"}},children:"Done"})]})]}),n.jsxs(gl,{open:Rn,onClose:bt,maxWidth:"sm",fullWidth:!0,children:[n.jsxs(vl,{sx:{m:0,p:3,pb:2,fontWeight:600,color:"#111827"},children:["Edit country tax",n.jsx($n,{"aria-label":"close",onClick:bt,sx:{position:"absolute",right:16,top:16,color:"#6b7280","&:hover":{backgroundColor:"#f3f4f6"}},children:n.jsx(_u,{})})]}),n.jsx(xl,{sx:{px:3,pt:2,pb:2},children:n.jsxs(_r,{spacing:3,children:[n.jsxs(Et,{children:[n.jsx(et,{variant:"body2",sx:{color:"#6b7280",mb:1},children:"Country"}),n.jsx(et,{variant:"body1",sx:{color:"#111827",fontWeight:500},children:Q?.name||"Loading..."})]}),n.jsxs(Et,{children:[n.jsx(et,{variant:"body2",sx:{color:"#6b7280",mb:1},children:"Tax rate"}),n.jsx(Pn,{type:"number",value:En,onChange:mt=>Wr(parseFloat(mt.target.value)||0),fullWidth:!0,InputProps:{endAdornment:n.jsx(Zi,{position:"end",children:n.jsx(et,{sx:{color:"#6b7280"},children:"%"})})},inputProps:{step:.01,min:0,max:100},sx:{"& .MuiOutlinedInput-root":{backgroundColor:"#fff"}}})]})]})}),n.jsxs(yl,{sx:{p:3,pt:2},children:[n.jsx($r,{onClick:bt,sx:{textTransform:"none",color:"#6b7280","&:hover":{backgroundColor:"#f3f4f6"}},children:"Cancel"}),n.jsx($r,{variant:"contained",onClick:Ft,sx:{textTransform:"none",backgroundColor:"#2563eb",color:"#fff","&:hover":{backgroundColor:"#1d4ed8"}},children:"Save"})]})]}),n.jsxs(gl,{open:Bn,onClose:Br,maxWidth:"sm",fullWidth:!0,children:[n.jsxs(vl,{sx:{m:0,p:3,pb:2,fontWeight:600,color:"#111827"},children:["Reset to default",n.jsx($n,{"aria-label":"close",onClick:Br,sx:{position:"absolute",right:16,top:16,color:"#6b7280","&:hover":{backgroundColor:"#f3f4f6"}},children:n.jsx(_u,{})})]}),n.jsx(xl,{sx:{px:3,pt:2,pb:2},children:n.jsx(et,{variant:"body1",sx:{color:"#111827"},children:"Are you sure you want to reset the country tax to default? This will delete your overridden value and the default value will be used."})}),n.jsxs(yl,{sx:{p:3,pt:2},children:[n.jsx($r,{onClick:Br,sx:{textTransform:"none",color:"#6b7280",border:"1px solid #d1d5db","&:hover":{backgroundColor:"#f3f4f6"}},children:"Cancel"}),n.jsx($r,{variant:"contained",onClick:kt,sx:{textTransform:"none",backgroundColor:"#dc2626",color:"#fff","&:hover":{backgroundColor:"#b91c1c"}},children:"Reset to default"})]})]})]})},w6=f.createContext(void 0),lme=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async h=>{s(!0),i(null);try{const{data:m}=await Ke.get(`/local-delivery-location-entries/local-delivery/${h}`);return e(m.data),m.data}catch(m){const y=m?.response?.data?.message||"Failed to fetch local delivery location entries";throw i(y),m}finally{s(!1)}},[]),c=f.useCallback(()=>{e([]),i(null),s(!1)},[]),d=f.useMemo(()=>({entries:r,loading:t,error:o,fetchEntriesByLocalDeliveryId:l,clearEntries:c}),[r,t,o,l,c]);return n.jsx(w6.Provider,{value:d,children:a})},cme=()=>{const a=f.useContext(w6);if(!a)throw new Error("useLocalDeliveryLocationEntries must be used within a LocalDeliveryLocationEntriesProvider");return a},dme=()=>{const a=mr(),{localDeliveryId:r}=qa(),{entries:e,fetchEntriesByLocalDeliveryId:t,loading:s}=cme();f.useEffect(()=>{r&&t(r)},[r,t]);const o=e,i=!r,l=s&&!i;return n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3 border-b border-gray-200 pb-4",children:[n.jsx("button",{onClick:()=>a("/settings/shipping-and-delivery"),className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(Hn,{className:"w-5 h-5"})}),n.jsx(hp,{className:"w-5 h-5 text-gray-700"}),n.jsx(Pa,{className:"w-4 h-4 text-gray-500"}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Local delivery"})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Deliver orders to customers directly from your locations"}),n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-3",children:"Your locations"}),i?n.jsx("p",{className:"text-sm text-gray-600 py-3",children:"Local delivery identifier missing. Please navigate via the Manage button."}):l?n.jsx("div",{className:"py-8 text-center",children:n.jsx("div",{className:"inline-block w-6 h-6 border-2 border-gray-300 border-t-gray-900 rounded-full animate-spin"})}):o.length===0?n.jsx("p",{className:"text-sm text-gray-600 py-3",children:"No locations found."}):n.jsx("div",{className:"space-y-2",children:o.map((c,d)=>{const h=typeof c.locationId=="string"||!c.locationId?null:c.locationId,m=typeof c.locationId=="string"?c.locationId:c.locationId?._id;return m?n.jsxs("div",{onClick:()=>{r&&a(`/settings/shipping-and-delivery/local_deliveries/${r}/locations/${m}`)},className:`flex items-center justify-between py-2 ${d!==o.length-1?"border-b border-gray-100":""} cursor-pointer hover:bg-gray-50 transition-colors`,children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[n.jsx(Vh,{className:"w-5 h-5 text-gray-600 shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:h?.name||"Unknown location"}),n.jsx("p",{className:"text-xs text-gray-600",children:h?.countryRegion||"No country specified"})]})]}),n.jsx("span",{className:`px-2 py-0.5 text-xs font-medium ${c.canLocalDeliver?"bg-green-50 text-green-700":"bg-gray-100 text-gray-600"}`,children:c.canLocalDeliver?"Offers delivery":"Doesn't offer delivery"})]},m):null})})]})]})})},ume=()=>{const a=mr(),{localDeliveryId:r,locationId:e}=qa(),{locations:t,fetchLocationsByStoreId:s,updateLocation:o,loading:i}=mp(),{activeStoreId:l}=fn(),[c,d]=f.useState(!1),[h,m]=f.useState("radius"),[y,x]=f.useState(!1),[b,v]=f.useState("km"),[j,S]=f.useState(null),[k,N]=f.useState(null),[P,R]=f.useState(!1),[F,z]=f.useState(null),[H,V]=f.useState("Local Delivery"),[W,Z]=f.useState(""),[A,q]=f.useState("0"),[I,K]=f.useState("0"),[D,Q]=f.useState(""),[oe,re]=f.useState(!1),[Te,G]=f.useState("0"),[Y,Se]=f.useState(""),[fe,Ee]=f.useState("0"),[Ae,qe]=f.useState(!1),[we,Oe]=f.useState(null),ze=t.find(ne=>ne._id===e),We=[{id:"1",name:"Local Delivery",radius:10,unit:"km",postalCodes:0,minOrder:null,price:0,hasDeliveryInfo:!1}],pt=()=>{V("Local Delivery"),Z(""),q("0"),K("0"),Q(""),re(!1),G("0"),Se(""),Ee("0")},Pt=ne=>{ne?(z(ne),V(ne.name),Z(String(ne.radius)),q(ne.minOrder?String(ne.minOrder):"0"),K(String(ne.price)),re(!1),G("0"),Se(""),Ee("0")):(z(null),pt()),R(!0)},ee=()=>{R(!1),z(null),pt()},Ne=()=>{ee()};f.useEffect(()=>{if(l&&e){const ne=t.some(M=>M._id===e);(!t.length||!ne)&&s(l)}},[l,e,t,s]),f.useEffect(()=>{ze&&d(ze.canLocalDeliver)},[ze]);const Ie=async ne=>{const M=ne.target.checked;if(d(M),e)try{await o(e,{canLocalDeliver:M})}catch{d(!M)}};return ze?n.jsxs(pr,{children:[n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b border-gray-200 pb-4",children:[n.jsx("button",{onClick:()=>a(r?`/settings/shipping-and-delivery/local_deliveries/${r}`:"/settings/shipping-and-delivery"),className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(Hn,{className:"w-5 h-5"})}),n.jsx(hp,{className:"w-5 h-5 text-gray-700"}),n.jsx(Pa,{className:"w-4 h-4 text-gray-500"}),n.jsxs("h1",{className:"text-xl font-medium text-gray-900",children:["Local delivery for ",ze.name]})]}),n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4 mb-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-1",children:"Location status"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Deliver orders to customers directly from this location."})]}),n.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:c,onChange:Ie,className:"sr-only peer"}),n.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-gray-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gray-900"})]})]}),n.jsx("div",{className:"border border-gray-200 p-3 bg-gray-50 mb-3",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Vh,{className:"w-5 h-5 text-gray-600 shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:ze.name}),n.jsx("p",{className:"text-xs text-gray-600",children:ze.countryRegion||"No country specified"})]})]})}),c&&n.jsx("div",{className:"mt-3",children:n.jsxs("p",{className:"text-sm text-gray-600",children:["Delivery prices for this location are in Indian rupees (INR)."," ",n.jsx("button",{onClick:ne=>{ne.preventDefault()},className:"text-xs text-gray-600 hover:text-gray-900 underline",children:"Change Currency"})]})})]}),c&&n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4 mb-4",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-4",children:"Delivery zones"}),n.jsxs("div",{className:"space-y-3 mb-4",children:[n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",value:"pin-codes",checked:h==="pin-codes",onChange:ne=>m(ne.target.value),className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Use PIN codes"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Choose specific areas that you deliver to"})]})]}),n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",value:"radius",checked:h==="radius",onChange:ne=>m(ne.target.value),className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Set a delivery radius"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Set a distance around your location that you deliver to"})]})]})]}),h==="radius"&&n.jsxs("div",{className:"mb-4 ml-7",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mb-3",children:[n.jsx("input",{type:"checkbox",checked:y,onChange:ne=>x(ne.target.checked),className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Include neighboring states or regions"})]}),n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Measure radius in"}),n.jsxs("div",{className:"flex gap-6",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",value:"km",checked:b==="km",onChange:ne=>v(ne.target.value),className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:"km"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",value:"mi",checked:b==="mi",onChange:ne=>v(ne.target.value),className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:"mi"})]})]})]}),n.jsx("div",{className:"space-y-3 mb-4",children:We.map(ne=>n.jsx("div",{className:"border border-gray-200 p-3 bg-gray-50",children:n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:ne.name}),n.jsx("p",{className:"text-xs text-gray-600 mb-2",children:h==="pin-codes"?`${ne.postalCodes} postal codes  ${ne.hasDeliveryInfo?"Has delivery information":"No delivery information"}`:`Up to ${ne.radius}${ne.unit}  ${ne.hasDeliveryInfo?"Has delivery information":"No delivery information"}`}),h==="pin-codes"&&ne.postalCodes===0&&n.jsxs("div",{className:"mt-2 bg-red-50 border border-red-200 text-red-700 px-3 py-2 text-xs flex items-start gap-2",children:[n.jsx(yD,{className:"w-4 h-4 mt-0.5 shrink-0"}),n.jsx("span",{children:"Postal codes required to activate this delivery zone"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-xs text-gray-600",children:ne.minOrder?`Minimum order: ${ne.minOrder}`:"No minimum order"}),ne.price===0&&n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-600",children:"Free"}),n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:M=>{S(M.currentTarget),N(ne)},className:"p-1 text-gray-500 hover:text-gray-700 transition-colors",children:n.jsx(Ud,{className:"w-5 h-5"})}),j&&k?.id===ne.id&&n.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white border border-gray-200 z-10 min-w-[150px]",children:[n.jsx("button",{onClick:()=>{k&&Pt(k),S(null),N(null)},className:"w-full px-3 py-2 text-left text-xs text-gray-700 hover:bg-gray-50 transition-colors",children:"Edit zone"}),n.jsx("button",{onClick:()=>{k&&(Oe(k),qe(!0)),S(null),N(null)},className:"w-full px-3 py-2 text-left text-xs text-red-600 hover:bg-gray-50 transition-colors",children:"Delete zone"})]})]})]})]})},ne.id))}),n.jsxs("button",{onClick:()=>Pt(),className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors flex items-center gap-2",children:[n.jsx(na,{className:"w-4 h-4"}),"Add zone"]})]}),n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-1",children:"Manage local deliveries"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Get an optimized route or plan the order of delivery stops yourself. With local delivery apps, you and your staff can view routes, contact customers, update delivery statuses, and more."}),n.jsxs("div",{className:"border border-gray-200 p-3 bg-gray-50 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(vS,{className:"w-5 h-5 text-gray-600 shrink-0"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Recommended local delivery apps"})]}),n.jsx("button",{className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-white transition-colors",children:"View apps"})]})]})]}),n.jsx(un,{open:P,onClose:ee,maxWidth:"sm",title:F?"Edit zone":"Add zone",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:ee,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:Ne,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:F?"Save changes":"Save"})]}),children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Zone name"}),n.jsx("input",{type:"text",value:H,placeholder:"Local Delivery",maxLength:50,onChange:ne=>V(ne.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"}),n.jsxs("p",{className:"text-xs text-gray-600 text-right mt-1",children:[H.length,"/50"]})]}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-gray-900 mb-2",children:["Delivery radius from ",n.jsx("strong",{children:"10"})," ",b," up to"]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",value:W,onChange:ne=>Z(ne.target.value),className:"w-full px-3 py-1.5 pr-12 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"}),n.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-sm text-gray-600",children:b})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Minimum order price"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-sm text-gray-600",children:""}),n.jsx("input",{type:"number",value:A,onChange:ne=>q(ne.target.value),className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Delivery price"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-sm text-gray-600",children:""}),n.jsx("input",{type:oe?"text":"number",disabled:oe,value:oe?"":I,onChange:ne=>K(ne.target.value),placeholder:oe?"Conditional":void 0,className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 disabled:opacity-50 disabled:cursor-not-allowed"})]}),!oe&&Number(I||0)===0&&n.jsx("span",{className:"inline-block mt-1 px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-600",children:"Free"})]})]}),oe?n.jsxs("div",{className:"space-y-3",children:[n.jsx("button",{onClick:()=>{re(!1),G("0"),Se(""),Ee("0")},className:"text-xs text-gray-600 hover:text-gray-900 underline",children:"Remove conditional pricing"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Orders from 0.00 up to"}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-sm text-gray-600",children:""}),n.jsx("input",{type:"number",value:Te,onChange:ne=>G(ne.target.value),className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]}),n.jsxs("div",{className:"relative flex-1",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-sm text-gray-600",children:""}),n.jsx("input",{type:"number",value:Y,onChange:ne=>Se(ne.target.value),placeholder:"No limit",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]})]})]}),n.jsx("div",{className:"flex gap-3",children:n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Delivery price"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-sm text-gray-600",children:""}),n.jsx("input",{type:"number",value:fe,onChange:ne=>Ee(ne.target.value),className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]}),Number(fe||0)===0&&n.jsx("span",{className:"inline-block mt-1 px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-600",children:"Free"})]})})]}):n.jsx("button",{onClick:()=>re(!0),className:"text-xs text-gray-600 hover:text-gray-900 underline",children:"Add conditional pricing"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Delivery information"}),n.jsx("textarea",{value:D,onChange:ne=>Q(ne.target.value),maxLength:255,placeholder:"This message will appear at checkout...",rows:4,className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 resize-none"}),n.jsxs("p",{className:"text-xs text-gray-600 text-right mt-1",children:[D.length,"/255"]}),n.jsxs("p",{className:"text-xs text-gray-600 mt-2",children:["This message will appear at checkout and in the"," ",n.jsx("button",{onClick:ne=>ne.preventDefault(),className:"text-xs text-gray-600 hover:text-gray-900 underline",children:"order confirmation notification"}),"."]})]})]})}),n.jsx(un,{open:Ae,onClose:()=>qe(!1),maxWidth:"sm",title:"Delete zone",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>qe(!1),className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"No"}),n.jsx("button",{onClick:()=>{qe(!1),Oe(null)},className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-red-600 hover:bg-red-50 transition-colors",children:"Yes"})]}),children:n.jsxs("p",{className:"text-sm text-gray-900",children:["Are you sure you want to delete"," ",n.jsx("strong",{children:we?.name??"this zone"}),"?"]})})]}):n.jsx(pr,{children:n.jsx("div",{className:"max-w-7xl mx-auto py-8 px-4",children:n.jsx("p",{className:"text-sm text-gray-900",children:"Location not found"})})})},fme=()=>{const{locations:a,updateLocation:r}=mp(),{activeStoreId:e,stores:t}=fn(),s=Pi(),o=mr(),[i,l]=gr.useState(!1),[c,d]=gr.useState(!1),[h,m]=gr.useState(!1),[y,x]=gr.useState(!1),b=s.pathname.split("/").pop(),v=a.find(z=>z._id===b),j=gr.useMemo(()=>t.find(H=>H._id===e)?.defaultLocation===v?._id,[t,e,v]);gr.useEffect(()=>{v&&(l(j?!0:v.isFulfillmentAllowed),d(v.canShip),m(v.canLocalDeliver),x(v.canPickup))},[v,j]);const S=f.useCallback(()=>{o("/settings/locations")},[o]),k=f.useCallback(async z=>{const H=z;l(H);try{if(!v)return;H?await r(v._id,{isFulfillmentAllowed:!0}):(d(!1),m(!1),x(!1),await r(v._id,{isFulfillmentAllowed:!1,canShip:!1,canLocalDeliver:!1,canPickup:!1}))}catch{l(V=>!V)}},[v,r]),N=f.useCallback(async z=>{const H=z;d(H);try{await r(v._id,{canShip:H})}catch{d(V=>!V)}},[v,r]),P=f.useCallback(async z=>{const H=z;m(H);try{await r(v._id,{canLocalDeliver:H})}catch{m(V=>!V)}},[v,r]),R=f.useCallback(async z=>{const H=z;x(H);try{await r(v._id,{canPickup:H})}catch{x(V=>!V)}},[v,r]);if(!v)return n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Location not found"}),n.jsx("button",{onClick:S,className:"mt-3 px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Back"})]})});const F=[v.address,v.apartment,v.city,v.state,v.postalCode,v.countryRegion].filter(Boolean).join(", ");return n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3 border-b border-gray-200 pb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:S,className:"p-1 hover:bg-gray-50 transition-colors",children:n.jsx(Hn,{className:"w-5 h-5 text-gray-600"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Location"})]}),n.jsx("span",{className:`px-2 py-0.5 text-xs font-medium ${v.isActive?"bg-gray-100 text-gray-700":"bg-gray-100 text-gray-500"}`,children:v.isActive?"Active":"Inactive"})]}),n.jsxs("div",{className:"bg-white/95 p-3 border border-gray-200 mb-3",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-1",children:v.name}),n.jsx("p",{className:"text-xs text-gray-500",children:F})]}),n.jsxs("div",{className:"bg-white/95 p-3 border border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Fulfillment"}),n.jsx(fo,{checked:i,onChange:k,disabled:j,label:j?"Enable (Default location locked)":"Enable"})]}),j&&n.jsx("p",{className:"text-xs text-gray-500 mb-3 block",children:"This is your default location. To change whether you fulfill online orders from this location, select another default location first."}),(j||i)&&n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[n.jsx("div",{children:n.jsx(fo,{checked:c,onChange:N,label:"Allow Shipping"})}),n.jsx("div",{children:n.jsx(fo,{checked:h,onChange:P,label:"Allow Local Delivery"})}),n.jsx("div",{children:n.jsx(fo,{checked:y,onChange:R,label:"Allow Pickup In-Store"})})]})]})]})})},V2=({anchorEl:a,open:r,onClose:e,children:t})=>{const s=f.useRef(null);if(gr.useEffect(()=>{const l=c=>{s.current&&!s.current.contains(c.target)&&a&&!a.contains(c.target)&&e()};if(r)return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[r,e,a]),!r||!a)return null;const o=a.getBoundingClientRect(),i={position:"fixed",top:`${o.bottom+4}px`,right:`${window.innerWidth-o.right}px`,zIndex:1300};return n.jsx("div",{ref:s,className:"bg-white rounded-lg shadow-lg border border-gray-200 py-1 min-w-[200px]",style:i,children:t})},np=({onClick:a,disabled:r=!1,children:e})=>{const t=f.useCallback(()=>{!r&&a&&a()},[r,a]);return n.jsx("div",{onClick:t,className:`px-4 py-2 text-sm text-gray-900 cursor-pointer hover:bg-gray-100 ${r?"opacity-50 cursor-not-allowed":""}`,children:e})},pme=({location:a,onSelect:r})=>{const e=[a.address,a.apartment,a.city].filter(Boolean).join(", ");return n.jsx(np,{onClick:()=>r(a._id),children:n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-gray-900",children:a.name}),n.jsx("p",{className:"text-xs text-gray-500",children:e})]})})},hme=({otherLocations:a,onSelect:r})=>{const[e,t]=f.useState(null),s=!!e,o=f.useCallback(c=>{t(c.currentTarget)},[]),i=f.useCallback(()=>{t(null)},[]),l=f.useCallback(c=>{r(c),i()},[r,i]);return n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium text-gray-700 bg-gray-100",children:"Default"}),n.jsx("button",{onClick:o,className:"cursor-pointer px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Change"}),n.jsx(V2,{anchorEl:e,open:s,onClose:i,children:a.length===0?n.jsx(np,{disabled:!0,children:"No other locations"}):a.map(c=>n.jsx(pme,{location:c,onSelect:l},c._id))})]})},mme=({name:a,addressLine:r,locations:e,currentStoreId:t,defaultLocationId:s})=>{const{updateStore:o}=fn(),i=f.useCallback(async c=>{if(c!==s)try{await o(t,{defaultLocation:c})}catch(d){console.error("Failed to update default location:",d)}},[s,t,o]),l=e.filter(c=>c._id!==s);return n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:a}),n.jsx("p",{className:"text-xs text-gray-600",children:r})]}),n.jsx(hme,{otherLocations:l,onSelect:i})]})},gme=({location:a,isDefault:r,onLocationClick:e})=>{const t=f.useCallback(()=>{e(a._id)},[a._id,e]),s=[a.address,a.apartment,a.city,a.state,a.postalCode,a.countryRegion].filter(Boolean).join(", ");return n.jsxs("div",{onClick:t,className:"flex justify-between items-center py-2 border-b border-gray-200 cursor-pointer hover:bg-gray-50 transition-colors last:border-b-0",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:a.name}),r&&n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium text-gray-700 bg-gray-100",children:"Default"})]}),n.jsx("p",{className:"text-xs text-gray-600",children:s})]}),n.jsx("span",{className:`px-2 py-0.5 text-xs font-medium ${a.isActive?"bg-gray-100 text-gray-700":"bg-gray-100 text-gray-500"}`,children:a.isActive?"Active":"Inactive"})]})},yme=({locations:a,defaultLocationId:r,onLocationClick:e})=>a.length===0?n.jsx("p",{className:"text-sm text-gray-500 py-3",children:"No locations found for this store."}):n.jsx("div",{children:a.map(t=>n.jsx(gme,{location:t,isDefault:r===t._id,onLocationClick:e},t._id))}),xme=({locations:a,defaultLocationId:r,onLocationClick:e})=>n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex justify-between py-2 px-0 border-b border-gray-200",children:[n.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Location"}),n.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Status"})]}),n.jsx(yme,{locations:a,defaultLocationId:r,onLocationClick:e})]}),vme=({locations:a,defaultLocationId:r,loading:e,error:t,onAddLocation:s,onLocationClick:o})=>n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Location Details"}),n.jsx("button",{onClick:s,className:"cursor-pointer px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Add Location"})]}),t&&n.jsx("div",{className:"mb-3 p-2 bg-gray-50 border border-gray-200 text-xs text-gray-700",children:t}),e?n.jsx("div",{className:"flex justify-center py-6",children:n.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-gray-400"})}):n.jsx(n.Fragment,{children:n.jsx(xme,{locations:a,defaultLocationId:r,onLocationClick:o})})]}),bme=()=>{const a=mr(),{fetchLocationsByStoreId:r,locations:e,loading:t,error:s}=mp(),{activeStoreId:o,stores:i}=fn();gr.useEffect(()=>{o&&r(o)},[o,r]);const l=i.find(x=>x._id===o),c=l?.defaultLocation||null,d=c?e.find(x=>x._id===c):void 0,h=d?[d.address,d.apartment,d.city,d.state,d.postalCode,d.countryRegion].filter(Boolean).join(", "):"",m=f.useCallback(()=>{a("/settings/locations/new")},[a]),y=f.useCallback(x=>{a(`/settings/locations/${x}`)},[a]);return n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900 mb-3 border-b border-gray-200 pb-3",children:"Locations"}),n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-3 mb-3",children:[n.jsx("h2",{className:"text-sm font-medium mb-1.5 text-gray-900",children:"Default Location"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"This location is used by Ziplofy and apps when no other location is specified."}),c&&d?n.jsx(mme,{name:d.name,addressLine:h,locations:e,currentStoreId:l._id,defaultLocationId:c}):n.jsx("p",{className:"text-xs text-gray-600",children:"No default location set."})]}),n.jsx(vme,{locations:e,defaultLocationId:c,loading:t,error:s,onAddLocation:m,onLocationClick:y})]})})},j6=f.createContext(void 0),wme=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async m=>{try{s(!0),i(null);const y=await Ke.get(`/final-sale-items/return-rules/${m}`),{success:x,data:b,message:v}=y.data;if(!x)throw new Error(v||"Failed to fetch final sale items");return e(b||[]),b||[]}catch(y){const x=y?.response?.data?.message||y?.message||"Failed to fetch final sale items";throw i(x),new Error(x)}finally{s(!1)}},[]),c=f.useCallback(async m=>{try{s(!0),i(null);const y=await Ke.post("/final-sale-items",m),{success:x,data:b,message:v}=y.data;if(!x)throw new Error(v||"Failed to create final sale item");return e(j=>[b,...j]),b}catch(y){const x=y?.response?.data?.message||y?.message||"Failed to create final sale item";throw i(x),new Error(x)}finally{s(!1)}},[]),d=f.useCallback(async m=>{try{s(!0),i(null);const y=await Ke.delete(`/final-sale-items/${m}`),{success:x,data:b,message:v}=y.data;if(!x)throw new Error(v||"Failed to delete final sale item");return e(j=>j.filter(S=>S._id!==b.deletedId)),b.deletedId}catch(y){const x=y?.response?.data?.message||y?.message||"Failed to delete final sale item";throw i(x),new Error(x)}finally{s(!1)}},[]),h={items:r,loading:t,error:o,getByReturnRulesId:l,createItem:c,deleteItem:d};return n.jsx(j6.Provider,{value:h,children:a})},jme=()=>{const a=f.useContext(j6);if(!a)throw new Error("useFinalSaleItems must be used within a FinalSaleItemProvider");return a},Cme=()=>{const a=mr(),[r,e]=gr.useState(!1),[t,s]=gr.useState("30"),[o,i]=gr.useState(""),[l,c]=gr.useState("free"),[d,h]=gr.useState(""),[m,y]=gr.useState(!1),[x,b]=gr.useState(""),[v,j]=gr.useState(!0),[S,k]=gr.useState(!1),[N,P]=gr.useState(""),[R,F]=gr.useState(""),[z,H]=gr.useState(""),[V,W]=gr.useState([]),[Z,A]=gr.useState({}),{searchCollections:q}=gp(),{activeStoreId:I}=fn(),[K,D]=gr.useState([]),[Q,oe]=gr.useState(!1),{searchProductsWithVariants:re}=dc(),[Te,G]=gr.useState([]),[Y,Se]=gr.useState(!1),{rules:fe,getByStoreId:Ee,updateRules:Ae,loading:qe}=F2(),{items:we,getByReturnRulesId:Oe,createItem:ze}=jme(),We=gr.useMemo(()=>({enabled:r,returnWindow:t==="custom"?o||"":t,returnShippingCost:l==="customer"?"customer provides return shipping":l==="flat"?"flat rate return shipping":"free return shipping",flatRate:l==="flat"?d?Number(d):0:void 0,chargeRestockingFree:m,restockingFee:m?x?Number(x):0:void 0,finalSaleSelection:v?"collections":S?"products":"collections"}),[r,t,o,l,d,m,x,v,S]),pt=gr.useMemo(()=>fe?{enabled:!!fe.enabled,returnWindow:String(fe.returnWindow||""),returnShippingCost:fe.returnShippingCost,flatRate:fe.flatRate!=null?Number(fe.flatRate):void 0,chargeRestockingFree:!!fe.chargeRestockingFree,restockingFee:fe.restockingFee!=null?Number(fe.restockingFee):void 0,finalSaleSelection:fe.finalSaleSelection||"collections"}:null,[fe]),Pt=gr.useMemo(()=>{if(!pt)return!1;const ne=We,M=pt;return ne.enabled!==M.enabled||ne.returnWindow!==M.returnWindow||ne.returnShippingCost!==M.returnShippingCost||(ne.flatRate??void 0)!==(M.flatRate??void 0)||ne.chargeRestockingFree!==M.chargeRestockingFree||(ne.restockingFee??void 0)!==(M.restockingFee??void 0)||ne.finalSaleSelection!==M.finalSaleSelection},[We,pt]);gr.useEffect(()=>{I&&Ee(I).catch(()=>{})},[I,Ee]),gr.useEffect(()=>{if(!fe)return;Oe(fe._id).catch(()=>{}),e(!!fe.enabled);const ne=String(fe.returnWindow||"").trim();["14","30","90","unlimited"].includes(ne)?(s(ne),i("")):ne&&(s("custom"),i(ne)),fe.returnShippingCost==="customer provides return shipping"?c("customer"):fe.returnShippingCost==="flat rate return shipping"?c("flat"):c("free"),h(fe.flatRate!=null?String(fe.flatRate):""),y(!!fe.chargeRestockingFree),b(fe.restockingFee!=null?String(fe.restockingFee):""),fe.finalSaleSelection==="collections"?(j(!0),k(!1),A({})):fe.finalSaleSelection==="products"?(j(!1),k(!0),W([])):(j(!0),k(!1),A({}))},[fe,Oe]),gr.useEffect(()=>{if(!v)return;const ne=N.trim();if(!ne||ne.length<2||!I){D([]);return}const M=setTimeout(async()=>{try{const U=await q(I,ne,1,10);D(U.data.map(J=>({id:J._id,title:J.title}))),oe(!0)}catch{D([]),oe(!1)}},300);return()=>clearTimeout(M)},[N,I,q,v]),gr.useEffect(()=>{if(!S||!I)return;const ne=z.trim();if(!ne||ne.length<2){G([]),Se(!1);return}const M=setTimeout(async()=>{try{const U=await re({storeId:I,q:ne,limit:5});G(U.data||[]),Se(!0)}catch{G([]),Se(!1)}},400);return()=>clearTimeout(M)},[z,I,re,S]);const ee=gr.useMemo(()=>v&&!S?"collections":S&&!v?"products":fe?.finalSaleSelection||"collections",[v,S,fe?.finalSaleSelection]),Ne=gr.useMemo(()=>we.filter(ne=>typeof ne.collectionId=="object"&&ne.collectionId!==null),[we]),Ie=gr.useMemo(()=>we.filter(ne=>typeof ne.productVariantId=="object"&&ne.productVariantId!==null),[we]);return n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>a(-1),className:"p-1 text-gray-600 hover:text-gray-700 hover:bg-gray-100 transition-colors",children:n.jsx(Hn,{className:"w-4 h-4"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Manage return rules"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[Pt&&fe&&n.jsx("button",{disabled:qe,onClick:async()=>{await Ae(fe._id,{enabled:We.enabled,returnWindow:We.returnWindow,returnShippingCost:We.returnShippingCost,flatRate:We.flatRate,chargeRestockingFree:We.chargeRestockingFree,restockingFee:We.restockingFee}),a("/settings/policies")},className:"px-3 py-1.5 text-sm text-white bg-gray-900 hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Save"}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("span",{className:"text-sm text-gray-900",children:r?"Return rules on":"Return rules off"}),n.jsx("button",{type:"button",className:`relative w-11 h-6 transition-colors ${r?"bg-gray-900":"bg-gray-300"}`,onClick:()=>e(ne=>!ne),children:n.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white transition-transform ${r?"translate-x-5":"translate-x-0"}`})})]})]})]}),n.jsxs("div",{className:"border border-gray-200 bg-white p-4 mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Return window"}),n.jsx("div",{className:"space-y-2 mb-4",children:["14","30","90","unlimited","custom"].map(ne=>n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"windowType",value:ne,checked:t===ne,onChange:M=>s(M.target.value),className:"w-4 h-4 text-gray-900 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900",children:ne==="custom"?"Custom days":ne==="unlimited"?"Unlimited":`${ne} days`})]},ne))}),t==="custom"&&n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Number of days"}),n.jsx("input",{type:"text",value:o,onChange:ne=>i(ne.target.value),className:"w-full max-w-[220px] border border-gray-200 px-3 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400",placeholder:"Number of days"})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-1",children:"Return shipping cost"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Does not apply to returns using Point of Sale"}),n.jsx("div",{className:"space-y-2 mb-4",children:["customer","free","flat"].map(ne=>n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"shippingCost",value:ne,checked:l===ne,onChange:M=>c(M.target.value),className:"w-4 h-4 text-gray-900 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900",children:ne==="customer"?"Customer provides return shipping":ne==="free"?"Free return shipping":"Flat rate return shipping"})]},ne))}),l==="flat"&&n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Flat rate"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm text-gray-700",children:""}),n.jsx("input",{type:"number",value:d,onChange:ne=>h(ne.target.value),placeholder:"0.00",className:"w-full max-w-[220px] border border-gray-200 px-3 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]})]}),n.jsx("hr",{className:"my-4 border-gray-200"}),n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Restocking fee"}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mb-3",children:[n.jsx("input",{type:"checkbox",checked:m,onChange:ne=>y(ne.target.checked),className:"w-4 h-4 text-gray-900 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900",children:"Charge restocking fee"})]}),m&&n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Restocking fee (%)"}),n.jsx("input",{type:"number",value:x,onChange:ne=>b(ne.target.value),placeholder:"0",className:"w-full max-w-[220px] border border-gray-200 px-3 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:n.jsx("p",{className:"text-xs text-gray-600",children:"Return rules will only apply to items purchased after the return rules were turned on or updated."})})]}),n.jsxs("div",{className:"border border-gray-200 bg-white p-4 mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-1",children:"Final sale items"}),n.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Customers can't request returns for products set as final sale"}),n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:v,onChange:ne=>{const M=ne.target.checked;j(M),M?(k(!1),A({})):W([])},className:"w-4 h-4 text-gray-900 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900",children:"Specific collections"})]}),v&&n.jsxs("div",{className:"flex gap-2 items-start flex-wrap relative",children:[n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",placeholder:"Search collections",value:N,onChange:ne=>{P(ne.target.value),R&&F("")},onFocus:()=>K.length&&oe(!0),className:"min-w-[280px] border border-gray-200 px-3 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"}),Q&&K.length>0&&n.jsx("div",{className:"absolute top-full left-0 mt-1 z-10 min-w-[280px] max-h-60 overflow-y-auto border border-gray-200 bg-white",children:K.map(ne=>n.jsx("div",{className:"px-3 py-2 cursor-pointer hover:bg-gray-50 transition-colors",onMouseDown:()=>{const M=V.some(J=>J.id===ne.id),U=Ne.some(J=>{const ce=J.collectionId,ue=typeof ce=="object"?ce?._id:ce;return ue&&ue.toString()===ne.id});M||U?F("This collection is already added to final sale."):(W(J=>[...J,ne]),F("")),P(""),oe(!1)},children:n.jsx("p",{className:"text-sm text-gray-900",children:ne.title})},ne.id))})]}),n.jsx("div",{className:"flex gap-2 flex-wrap",children:V.map(ne=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-xs bg-gray-100 text-gray-700 border border-gray-200",children:[ne.title,n.jsx("button",{onClick:()=>W(M=>M.filter(U=>U.id!==ne.id)),className:"hover:text-gray-900",children:n.jsx(xs,{className:"w-3 h-3"})})]},ne.id))}),R&&n.jsx("p",{className:"text-xs text-red-600",children:R})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:S,onChange:ne=>{const M=ne.target.checked;k(M),M?(j(!1),W([])):A({})},className:"w-4 h-4 text-gray-900 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900",children:"Specific products"})]}),S&&n.jsxs("div",{className:"flex flex-col gap-2 relative",children:[n.jsx("input",{type:"text",placeholder:"Search products",value:z,onChange:ne=>H(ne.target.value),onFocus:()=>Te.length&&Se(!0),className:"min-w-[280px] border border-gray-200 px-3 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"}),Y&&Te.length>0&&n.jsx("div",{className:"absolute top-full left-0 mt-1 z-10 min-w-[360px] max-h-[360px] overflow-y-auto border border-gray-200 bg-white p-2",children:Te.map(ne=>n.jsxs("div",{className:"mb-2 border border-gray-200 overflow-hidden",children:[n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-gray-50",children:[n.jsx("div",{className:"w-8 h-8 border border-gray-200 overflow-hidden bg-white",children:ne.product.imageUrl?n.jsx("img",{src:ne.product.imageUrl,alt:ne.product.title,className:"w-full h-full object-cover"}):n.jsx("div",{className:"w-full h-full bg-gray-200"})}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:ne.product.title})]}),n.jsx("div",{children:ne.variants.map(M=>{const U=Object.values(M.optionValues||{}).join(" / ")||M.sku||"Variant",J=!!Z[M._id];return n.jsxs("div",{className:`flex items-center justify-between px-3 py-2 border-t border-gray-100 cursor-pointer transition-colors ${J?"bg-gray-50":"bg-white"}`,onMouseDown:()=>{A(ce=>{const ue={...ce};return ue[M._id]?delete ue[M._id]:ue[M._id]={id:M._id,productTitle:ne.product.title,optionSummary:U,imageUrl:M.images&&M.images.length>0?M.images[0]:ne.product.imageUrl||null},ue})},children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer flex-1",children:[n.jsx("input",{type:"checkbox",checked:J,onChange:()=>{},className:"w-4 h-4 text-gray-900 focus:ring-gray-400"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:U}),n.jsx("p",{className:"text-xs text-gray-600",children:M.sku||"SKU N/A"})]})]}),n.jsxs("p",{className:"text-sm text-gray-600",children:["",M.price?.toFixed(2)??"0.00"]})]},M._id)})})]},ne.product._id))}),n.jsx("div",{className:"flex gap-2 flex-wrap mt-2",children:Object.values(Z).map(ne=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-xs bg-gray-100 text-gray-700 border border-gray-200",children:[ne.productTitle,"  ",ne.optionSummary,n.jsx("button",{onClick:()=>A(M=>{const U={...M};return delete U[ne.id],U}),className:"hover:text-gray-900",children:n.jsx(xs,{className:"w-3 h-3"})})]},ne.id))})]})]}),n.jsx("div",{className:"flex justify-end mt-4",children:(()=>{const ne=v&&V.length>0,M=S&&Object.keys(Z).length>0,U=v&&!S?"collections":S&&!v?"products":We.finalSaleSelection,J=pt&&U!==pt.finalSaleSelection,ce=!fe||!I||!ne&&!M&&!J;return n.jsx("button",{disabled:ce,onClick:async()=>{if(!fe||!I)return;const ue=[];if(ne)for(const xe of V)ue.push(ze({returnRulesId:fe._id,storeId:I,collectionId:xe.id}));M&&Object.values(Z).forEach(xe=>{ue.push(ze({returnRulesId:fe._id,storeId:I,productVariantId:xe.id}))}),ue.length>0&&await Promise.all(ue),J&&await Ae(fe._id,{finalSaleSelection:U}),a("/settings/policies")},className:"px-3 py-1.5 text-sm text-white bg-gray-900 hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Save"})})()})]}),n.jsxs("div",{className:"border border-gray-200 bg-white p-4 mb-4",children:[n.jsxs("h2",{className:"text-base font-medium text-gray-900 mb-3",children:["Current ",ee==="collections"?"final sale collections":"final sale products"]}),ee==="collections"?Ne.length>0?n.jsx("div",{className:"flex flex-col gap-2",children:Ne.map(ne=>{const M=ne.collectionId;return n.jsx("div",{className:"border border-gray-200 p-3 flex justify-between items-center",children:n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:M?.title||"Collection"}),n.jsxs("p",{className:"text-xs text-gray-600",children:["ID: ",M?._id||ne.collectionId]})]})},ne._id)})}):n.jsx("p",{className:"text-sm text-gray-600",children:"No collections added to final sale yet."}):Ie.length>0?n.jsx("div",{className:"flex flex-col gap-2",children:Ie.map(ne=>{const M=ne.productVariantId,U=Object.values(M?.optionValues||{}).join(" / ")||M?.sku||"Variant",J=M?.images&&M.images.length>0&&M.images[0]||M?.productId?.imageUrls&&M.productId.imageUrls.length>0&&M.productId.imageUrls[0]||null;return n.jsxs("div",{className:"border border-gray-200 p-3 flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 border border-gray-200 bg-gray-50 overflow-hidden",children:J?n.jsx("img",{src:J,alt:M?.sku||"",className:"w-full h-full object-cover"}):n.jsx("div",{className:"w-full h-full bg-gray-200"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:M?.productId?.title||"Product"}),n.jsx("p",{className:"text-xs text-gray-600",children:U}),n.jsxs("p",{className:"text-xs text-gray-500",children:["SKU: ",M?.sku||"N/A"]})]})]},ne._id)})}):n.jsx("p",{className:"text-sm text-gray-600",children:"No products added to final sale yet."})]}),n.jsx("div",{className:"flex justify-between items-center",children:n.jsxs("p",{className:"text-xs text-gray-600",children:["Learn more about ",n.jsx("a",{href:"#",className:"text-gray-700 hover:underline",children:"return rules"})]})})]})})},Sme=({canShip:a,canLocalDeliver:r,canPickup:e,onCanShipChange:t,onCanLocalDeliverChange:s,onCanPickupChange:o})=>n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[n.jsx("div",{children:n.jsx(fo,{checked:a,onChange:t,label:"Allow Shipping"})}),n.jsx("div",{children:n.jsx(fo,{checked:r,onChange:s,label:"Allow Local Delivery"})}),n.jsx("div",{children:n.jsx(fo,{checked:e,onChange:o,label:"Allow Pickup In-Store"})})]}),Nme=({fulfillmentEnabled:a,canShip:r,canLocalDeliver:e,canPickup:t,onFulfillmentToggle:s,onCanShipChange:o,onCanLocalDeliverChange:i,onCanPickupChange:l})=>n.jsxs("div",{className:"bg-white/95 p-3 border border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Fulfillment"}),n.jsx(fo,{checked:a,onChange:s,label:"Enable"})]}),a&&n.jsx(Sme,{canShip:r,canLocalDeliver:e,canPickup:t,onCanShipChange:o,onCanLocalDeliverChange:i,onCanPickupChange:l})]}),kme=({form:a,onChange:r})=>n.jsxs("div",{className:"bg-white/95 p-3 border border-gray-200 mb-3",children:[n.jsx("h2",{className:"text-sm font-medium mb-3 text-gray-900",children:"Location Details"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Location Name"}),n.jsx("input",{type:"text",value:a.name,onChange:e=>r("name",e.target.value),className:"w-full px-2.5 py-1.5 text-sm text-gray-900 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Country / Region"}),n.jsx("input",{type:"text",value:a.countryRegion,onChange:e=>r("countryRegion",e.target.value),className:"w-full px-2.5 py-1.5 text-sm text-gray-900 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Address"}),n.jsx("input",{type:"text",value:a.address,onChange:e=>r("address",e.target.value),className:"w-full px-2.5 py-1.5 text-sm text-gray-900 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Apartment, suite, etc. (optional)"}),n.jsx("input",{type:"text",value:a.apartment,onChange:e=>r("apartment",e.target.value),className:"w-full px-2.5 py-1.5 text-sm text-gray-900 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"City"}),n.jsx("input",{type:"text",value:a.city,onChange:e=>r("city",e.target.value),className:"w-full px-2.5 py-1.5 text-sm text-gray-900 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"State / Province"}),n.jsx("input",{type:"text",value:a.state,onChange:e=>r("state",e.target.value),className:"w-full px-2.5 py-1.5 text-sm text-gray-900 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"PIN / Postal Code"}),n.jsx("input",{type:"text",value:a.postalCode,onChange:e=>r("postalCode",e.target.value),className:"w-full px-2.5 py-1.5 text-sm text-gray-900 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Phone Number"}),n.jsx("input",{type:"text",value:a.phone,onChange:e=>r("phone",e.target.value),className:"w-full px-2.5 py-1.5 text-sm text-gray-900 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]})]})]}),_me=()=>{const a=mr(),{createLocation:r}=mp(),{activeStoreId:e}=fn(),[t,s]=f.useState(!1),[o,i]=f.useState({name:"",countryRegion:"",address:"",apartment:"",city:"",state:"",postalCode:"",phone:"",canShip:!1,canLocalDeliver:!1,canPickup:!1}),l=f.useCallback((y,x)=>{i(b=>({...b,[y]:x}))},[]),c=f.useCallback(async()=>{if(!e){a("/settings/locations");return}await r({storeId:e,name:o.name,countryRegion:o.countryRegion,address:o.address,apartment:o.apartment||void 0,city:o.city,state:o.state,postalCode:o.postalCode,phone:o.phone,canShip:t?o.canShip:!1,canLocalDeliver:t?o.canLocalDeliver:!1,canPickup:t?o.canPickup:!1,isDefault:!1,isFulfillmentAllowed:t,isActive:!0}),a("/settings/locations")},[e,o,t,r,a]),d=f.useCallback(()=>{a("/settings/locations")},[a]),h=f.useCallback(y=>{s(y)},[]),m=f.useCallback((y,x)=>{l(y,x)},[l]);return n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3 border-b border-gray-200 pb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:d,className:"p-1 hover:bg-gray-50 transition-colors",children:n.jsx(Hn,{className:"w-5 h-5 text-gray-600"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Add Location"})]}),n.jsx("button",{onClick:c,className:"cursor-pointer px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Add"})]}),n.jsx(kme,{form:o,onChange:l}),n.jsx(Nme,{fulfillmentEnabled:t,canShip:o.canShip,canLocalDeliver:o.canLocalDeliver,canPickup:o.canPickup,onFulfillmentToggle:h,onCanShipChange:y=>m("canShip",y),onCanLocalDeliverChange:y=>m("canLocalDeliver",y),onCanPickupChange:y=>m("canPickup",y)})]})})},Eme=()=>{const{permissions:a,loading:r,error:e,fetchAll:t}=sP(),{create:s}=GS(),{activeStoreId:o}=fn(),i=mr(),[l,c]=f.useState(""),[d,h]=f.useState(new Set),[m,y]=f.useState(new Set),[x,b]=f.useState(""),[v,j]=f.useState(""),[S,k]=f.useState(!1);f.useEffect(()=>{a.length===0&&!r&&t().catch(()=>{})},[]);const N=f.useMemo(()=>{const D=new Map;a.forEach(re=>{D.set(re.key,{key:re.key,name:re.name,isLeaf:re.isLeaf??!0,parentKey:re.parentKey??null,order:re.order,resource:re.resource,children:[]})});const Q=[];D.forEach(re=>{re.parentKey&&D.has(re.parentKey)?D.get(re.parentKey).children.push(re):Q.push(re)});const oe=re=>{re.sort((Te,G)=>(Te.order??0)-(G.order??0)||Te.name.localeCompare(G.name)),re.forEach(Te=>oe(Te.children))};return oe(Q),Q},[a]),P=f.useMemo(()=>{const D=[],Q=oe=>{oe.isLeaf||oe.children.length===0?D.push(oe.key):oe.children.forEach(Q)};return N.forEach(Q),D},[N]);f.useEffect(()=>{y(D=>{const Q=new Set(D);return Q.forEach(oe=>{P.includes(oe)||Q.delete(oe)}),Q})},[P]);const R=D=>{h(Q=>{const oe=new Set(Q);return oe.has(D)?oe.delete(D):oe.add(D),oe})},F=D=>D.isLeaf||D.children.length===0?[D.key]:D.children.flatMap(F),z=D=>{const Q=F(D),oe=Q.filter(re=>m.has(re));return{total:Q.length,selected:oe.length,checked:oe.length===Q.length&&Q.length>0,indeterminate:oe.length>0&&oe.length<Q.length}},H=D=>{const Q=F(D),oe=Q.every(re=>m.has(re));y(re=>{const Te=new Set(re);return oe?Q.forEach(G=>Te.delete(G)):Q.forEach(G=>Te.add(G)),Te})},V=()=>{m.size===P.length?y(new Set):y(new Set(P))},W=f.useMemo(()=>{const D=[],Q=oe=>{oe.children.length>0&&(D.push(oe.key),oe.children.forEach(Q))};return N.forEach(Q),D},[N]),Z=()=>{const D=W.every(Q=>d.has(Q));h(D?new Set:new Set(W))},A=f.useMemo(()=>{if(!l.trim())return N;const D=l.toLowerCase(),Q=oe=>{const re=oe.name.toLowerCase().includes(D)||oe.key.toLowerCase().includes(D),Te=oe.children.map(Q).filter(G=>!!G);return re||Te.length>0?{...oe,children:Te}:null};return N.map(Q).filter(oe=>!!oe)},[N,l]),q=x.trim().length>0&&v.trim().length>0&&m.size>0&&!!o,I=async()=>{if(!(!q||!o))try{k(!0),await s({storeId:o,name:x.trim(),description:v.trim(),permissions:Array.from(m)}),i("/settings/users/roles")}finally{k(!1)}},K=(D,Q=0)=>{const oe=D.children.length>0,re=z(D),Te=d.has(D.key)||!oe,G=Q*1.5;return n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center py-1.5",style:{paddingLeft:`${G}rem`},children:[oe?n.jsx("button",{onClick:()=>R(D.key),className:"p-0.5 text-gray-600 hover:text-gray-700 mr-1",children:Te?n.jsx(pp,{className:"w-4 h-4"}):n.jsx(Is,{className:"w-4 h-4"})}):n.jsx("div",{className:"w-6 mr-1"}),n.jsx("input",{type:"checkbox",ref:Y=>{Y&&(Y.indeterminate=!re.checked&&re.indeterminate)},checked:re.checked,onChange:()=>H(D),className:"w-4 h-4 text-gray-900 focus:ring-gray-400 mr-2"}),n.jsx("span",{className:"text-sm text-gray-900",children:D.name}),oe&&n.jsxs("span",{className:"text-xs text-gray-600 ml-auto mr-2",children:[re.selected,"/",re.total]})]}),oe&&n.jsx("div",{className:Te?"block":"hidden",children:D.children.map(Y=>K(Y,Q+1))})]},D.key)};return n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Create role"}),q&&n.jsx("button",{onClick:I,disabled:S,className:"px-3 py-1.5 text-sm text-white bg-gray-900 hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:S?"Saving...":"Save"})]}),n.jsx("div",{className:"border border-gray-200 bg-white p-4 mb-4",children:n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Name"}),n.jsx("input",{type:"text",placeholder:"Name",value:x,onChange:D=>b(D.target.value),className:"w-full border border-gray-200 px-3 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Description"}),n.jsx("textarea",{placeholder:"Description",rows:2,value:v,onChange:D=>j(D.target.value),className:"w-full border border-gray-200 px-3 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 resize-y"})]})]})}),n.jsxs("div",{className:"border border-gray-200 bg-white p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-1",children:"Permissions"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Role category determines available permissions."}),r&&n.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[n.jsx("div",{className:"w-4 h-4 border-2 border-gray-300 border-t-gray-900 rounded-full animate-spin"}),n.jsx("span",{className:"text-sm",children:"Loading permissions"})]}),e&&n.jsx("p",{className:"text-sm text-red-600",children:e}),!r&&!e&&n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Ro,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-600"}),n.jsx("input",{type:"text",placeholder:"Search",value:l,onChange:D=>c(D.target.value),className:"w-full border border-gray-200 bg-gray-50 pl-10 pr-3 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{className:"flex items-center justify-between px-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",ref:D=>{D&&(D.indeterminate=m.size>0&&m.size<P.length)},checked:m.size===P.length&&P.length>0,onChange:V,className:"w-4 h-4 text-gray-900 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900 font-medium",children:"Select all permissions"})]}),n.jsx("button",{onClick:Z,className:"text-xs text-gray-700 hover:underline",children:"Expand all"})]}),n.jsxs("div",{children:[A.map(D=>K(D)),A.length===0&&n.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"No permissions match your search."})]})]}),!r&&!e&&N.length===0&&n.jsx("p",{className:"text-sm text-gray-600",children:"No permissions found."})]})]})})},Tme=()=>{const{categoryId:a,categorySlug:r,optionId:e}=qa(),t=mr(),{options:s,fetchByCategoryId:o}=$2(),{categories:i,fetchAll:l}=fw(),{settings:c,getByStoreId:d}=l6(),{activeStoreId:h}=fn(),{checkExists:m,create:y,remove:x,clearCacheEntry:b}=mQ(),[v,j]=f.useState("English"),[S,k]=f.useState(null),[N,P]=f.useState(!1),[R,F]=f.useState(!1),[z,H]=f.useState(!1),[V,W]=f.useState("email"),[Z,A]=f.useState(null),[q,I]=f.useState(null),[K,D]=f.useState(null),[Q,oe]=f.useState(!1),[re,Te]=f.useState(""),[G,Y]=f.useState(""),Se=a&&r?`/settings/notifications/${a}/${r}`:"/settings/notifications",fe=f.useMemo(()=>{if(!a)return"Notifications";const J=i.find(ce=>ce._id===a);return J?.name?J.name:r?r.split("-").map(ce=>ce.charAt(0).toUpperCase()+ce.slice(1)).join(" "):"Notifications"},[i,a,r]);f.useEffect(()=>{i.length===0&&l().catch(()=>{})},[i.length,l]),f.useEffect(()=>{a&&o(a).catch(()=>{})},[a,o]),f.useEffect(()=>{if(e&&s.length>0){const J=s.find(ce=>ce._id===e);J?(k(J),H(J.toggle||!1),J.smsSupported&&!J.emailSupported?W("sms"):W("email")):k(null)}A(null),I(null),D(null),Ae(null),h&&e&&b(h,e)},[e,s,h,b]),f.useEffect(()=>{h&&d(h).catch(()=>{})},[h]);const[Ee,Ae]=f.useState(null);f.useEffect(()=>{if(!h||!e)return;const J=`${h}:${e}`;Ee!==J&&m(h,e,!0).then(ce=>{Ae(J),A(ce.exists),console.log("Override check result:",ce.exists),ce.exists&&ce.override?(I(ce.override._id),D({emailSubject:ce.override.emailSubject,emailBody:ce.override.emailBody,smsData:ce.override.smsData})):(I(null),D(null))}).catch(ce=>{console.error("Error checking override:",ce),A(!1),I(null),D(null)})},[h,e,m,Ee]);const qe=()=>{a&&r?t(Se,{state:{categoryId:a}}):t("/settings/notifications")},we=()=>{P(!0)},Oe=()=>{P(!1)},ze=async()=>{F(!0);try{await new Promise(J=>setTimeout(J,1e3)),yr.success("Test email sent successfully"),P(!1)}catch(J){yr.error(J?.message||"Failed to send test email")}finally{F(!1)}},We=c?.storeEmail||"developer200419@gmail.com",pt=async J=>{H(J);try{await new Promise(ce=>setTimeout(ce,500)),yr.success("Notification setting updated")}catch(ce){H(!J),yr.error(ce?.message||"Failed to update notification setting")}},Pt=()=>{if(S){const J=K?.emailSubject??S.emailSubject??"",ce=K?.emailBody??S.emailBody??"";Te(J),Y(ce),oe(!0)}},ee=()=>{oe(!1)},Ne=async()=>{if(!(!h||!e||!S))try{yr.dismiss(),oe(!1);const J=await y({storeId:h,notificationOptionId:e,emailSubject:re.trim()||void 0,emailBody:G.trim()||void 0,enabled:!0});I(J._id),D({emailSubject:J.emailSubject,emailBody:J.emailBody,smsData:J.smsData}),A(!0),yr.dismiss(),yr.success("Email template updated successfully")}catch(J){yr.dismiss(),yr.error(J?.message||"Failed to update email template"),oe(!0)}},Ie=async()=>{if(q)try{yr.dismiss(),await x(q),A(!1),I(null),D(null),h&&e&&b(h,e),yr.dismiss(),yr.success("Reverted to default notification template")}catch(J){yr.dismiss(),yr.error(J?.message||"Failed to revert to default template")}};if(!a||!r)return n.jsx(pr,{children:n.jsx("div",{className:"max-w-7xl mx-auto py-8 px-4",children:n.jsx("p",{className:"text-sm text-gray-900",children:"Notification category not found."})})});if(!S)return n.jsx(pr,{children:n.jsx("div",{className:"max-w-7xl mx-auto py-8 px-4",children:n.jsx("div",{className:"flex justify-center mt-8",children:n.jsx("div",{className:"w-6 h-6 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})})})});const ne=J=>J.replace(/\{\{customer_name\}\}/g,"John Doe").replace(/\{\{order_number\}\}/g,"#9999").replace(/\{\{store_name\}\}/g,"My Store").replace(/\{\{view_order_url\}\}/g,"#").replace(/\{\{store_url\}\}/g,"#").replace(/\{\{return_tracking_url\}\}/g,"#").replace(/\{\{return_label_url\}\}/g,"#").replace(/\{\{account_invite_url\}\}/g,"#").replace(/\{\{account_url\}\}/g,"#").replace(/\{\{password_reset_url\}\}/g,"#").replace(/\{\{new_email\}\}/g,"newemail@example.com").replace(/\{\{message_body\}\}/g,"Your message here").replace(/\{\{gift_card_code\}\}/g,"A1B2 3C4D 5E6F 7G8H").replace(/\{\{gift_card_amount\}\}/g,"Rs. 100.00").replace(/\{\{shipping_name\}\}/g,"Steve Shipper").replace(/\{\{shipping_address_line1\}\}/g,"123 Shipping Street").replace(/\{\{shipping_city\}\}/g,"Shippington").replace(/\{\{shipping_state\}\}/g,"Kentucky").replace(/\{\{shipping_zip\}\}/g,"40003").replace(/\{\{shipping_country\}\}/g,"United States").replace(/\{\{shipping_phone\}\}/g,"555-555-SHIP").replace(/\{\{shipping_method\}\}/g,"Generic Shipping").replace(/\{\{tracking_number\}\}/g,"None").replace(/\{\{customer_email\}\}/g,"jon@example.com"),M=()=>{const J=K?.emailBody??(S.emailBody||"<p>No email template available.</p>"),ce=ne(J);return n.jsx("div",{className:"border border-gray-200 p-3 bg-white max-w-[600px] overflow-auto",children:n.jsx("div",{dangerouslySetInnerHTML:{__html:ce},className:"[&_img]:max-w-full [&_img]:h-auto [&_img]:block [&_*]:box-border"})})},U=()=>{const J=K?.smsData??(S.smsData||"No SMS template available."),ce=ne(J);return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"border border-gray-200 p-3 bg-white max-w-[600px] mb-3",children:n.jsx("p",{className:"text-gray-900 whitespace-pre-wrap break-words text-sm leading-relaxed",children:ce})}),n.jsxs("div",{className:"p-3 border border-gray-200 bg-white/95 max-w-[600px]",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"SMS notifications"}),n.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Transactional SMS notifications can't be edited. Customer name, order number, and other specific details will automatically update with the correct information."}),n.jsx("button",{onClick:ue=>{ue.preventDefault()},className:"text-xs text-gray-700 hover:underline",children:"Learn more about SMS notifications."})]})]})};return n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-3 text-xs text-gray-600",children:[n.jsx("button",{onClick:()=>t("/settings/notifications"),className:"hover:underline",children:"Notifications"}),n.jsx(Pa,{className:"w-3 h-3"}),n.jsx("button",{onClick:qe,className:"hover:underline",children:fe}),n.jsx(Pa,{className:"w-3 h-3"}),n.jsx("span",{className:"text-gray-900",children:S.optionName})]}),n.jsxs("div",{className:"flex items-center justify-between mb-3 border-b border-gray-200 pb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("button",{onClick:qe,className:"p-1 hover:bg-gray-50 transition-colors",children:n.jsx(Hn,{className:"w-5 h-5 text-gray-600"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:S.optionName}),Z===!1&&n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium text-gray-700 bg-gray-100 border border-gray-200",children:"Default"}),Z===!0&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium text-gray-700 bg-gray-100 border border-gray-200",children:"Custom"}),n.jsx("button",{onClick:Ie,className:"px-2 py-0.5 text-xs font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Use default"})]})]}),S.toggle===!0&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs text-gray-600",children:"Enable this notification"}),n.jsx(fo,{checked:z,onChange:pt})]})]}),V==="email"&&n.jsx("button",{onClick:we,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Send test"})]}),n.jsxs("div",{className:"border border-gray-200 p-3 bg-white/95",children:[n.jsxs("div",{className:"flex justify-between items-center mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Preview"}),V==="email"&&S?.emailSupported&&n.jsx("button",{onClick:Pt,className:"p-1 text-gray-600 hover:text-gray-900 hover:bg-gray-50 transition-colors",children:n.jsx(oi,{className:"w-4 h-4"})})]}),n.jsxs("select",{value:v,onChange:J=>j(J.target.value),className:"px-2 py-1 text-xs border border-gray-200 bg-white focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400",children:[n.jsx("option",{value:"English",children:"English"}),n.jsx("option",{value:"Spanish",children:"Spanish"}),n.jsx("option",{value:"French",children:"French"})]})]}),(S.emailSupported||S.smsSupported)&&n.jsx("div",{className:"border-b border-gray-200 mb-3",children:n.jsxs("div",{className:"flex gap-4",children:[S.emailSupported&&n.jsx("button",{onClick:()=>W("email"),className:`pb-2 px-1 text-xs font-medium transition-colors ${V==="email"?"text-gray-900 border-b-2 border-gray-900":"text-gray-600 hover:text-gray-900"}`,children:"Email"}),S.smsSupported&&n.jsx("button",{onClick:()=>W("sms"),className:`pb-2 px-1 text-xs font-medium transition-colors ${V==="sms"?"text-gray-900 border-b-2 border-gray-900":"text-gray-600 hover:text-gray-900"}`,children:"SMS"})]})}),V==="email"&&S.emailSupported&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"mb-3",children:n.jsxs("p",{className:"text-xs text-gray-600 mb-1",children:["Subject: ",K?.emailSubject??(S.emailSubject||"No subject")]})}),M()]}),V==="sms"&&S.smsSupported&&n.jsx(n.Fragment,{children:U()})]}),n.jsx(un,{open:N,onClose:Oe,title:"Send test email",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:Oe,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:ze,disabled:R,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:R?"Sending...":"Send"})]}),children:n.jsxs("p",{className:"text-sm text-gray-600",children:["Email will be sent to ",We]})}),n.jsx(un,{open:Q,onClose:ee,title:"Edit email template",maxWidth:"md",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:ee,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:Ne,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Save"})]}),children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Subject"}),n.jsx("input",{type:"text",value:re,onChange:J=>Te(J.target.value),className:"w-full px-2.5 py-1.5 text-sm text-gray-900 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Body"}),n.jsx("textarea",{value:G,onChange:J=>Y(J.target.value),rows:10,className:"w-full px-2.5 py-1.5 text-sm text-gray-900 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 resize-y"})]})]})})]})})},Ome=({open:a,onClose:r,emailInput:e,onEmailInputChange:t,onSubmit:s,saving:o})=>{const i=l=>{l.key==="Enter"&&e.trim()&&!o&&s()};return n.jsxs(un,{open:a,onClose:r,title:"Add sender email",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,disabled:o,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Cancel"}),n.jsx("button",{onClick:s,disabled:!e.trim()||o,className:"px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 disabled:bg-gray-300 disabled:text-gray-500 disabled:cursor-not-allowed min-w-[100px] transition-colors",children:o?"Adding...":"Add email"})]}),children:[n.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"The email your store uses to send emails to your customers"}),n.jsx("input",{type:"email",value:e,onChange:t,placeholder:"example@email.com",autoFocus:!0,onKeyPress:i,className:"w-full px-4 py-2 border border-gray-300 rounded-md bg-white text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent"})]})},Pme=({icon:a,title:r,description:e,path:t,onNavigate:s,showDivider:o=!1})=>n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>{s(t)},className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition-colors",children:[n.jsx("div",{className:"shrink-0 w-8 flex items-center justify-center",children:a}),n.jsxs("div",{className:"flex-1 text-left",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:r}),e&&n.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:e})]}),n.jsx(Pa,{className:"w-4 h-4 text-gray-500 shrink-0"})]}),o&&n.jsx("div",{className:"h-px bg-gray-200 mx-4"})]}),Ame=({items:a,onNavigate:r})=>n.jsx("div",{className:"border border-gray-200 bg-white/95",children:a.map((e,t)=>n.jsx(Pme,{icon:e.icon,title:e.title,description:e.description,path:e.path,onNavigate:r,showDivider:t<a.length-1},e.path))}),Mme=({loading:a,storeNotificationEmail:r,onOpenAddEmailModal:e})=>n.jsxs("div",{className:"border border-gray-200 p-4 mb-4 bg-white/95",children:[n.jsx("h2",{className:"text-sm font-medium mb-1 text-gray-900",children:"Sender email"}),n.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"The email your store uses to send emails to your customers"}),a?n.jsx("p",{className:"text-xs text-gray-600 py-2",children:"Loading..."}):r?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("input",{type:"email",value:r.email,disabled:!0,className:"flex-1 px-3 py-2 border border-gray-200 bg-white text-sm text-gray-900 disabled:bg-gray-50 disabled:text-gray-500"}),n.jsx("span",{className:`px-2 py-1 text-xs font-medium h-8 flex items-center ${r.isVerified?"bg-gray-100 text-gray-700":"bg-gray-100 text-gray-600"}`,children:r.isVerified?"Verified":"Unverified"})]}),n.jsx("div",{className:"flex justify-between items-center",children:n.jsxs("p",{className:"text-xs text-gray-600",children:["Confirm you have access to this email."," ",n.jsx("button",{onClick:t=>{t.preventDefault(),yr.success("Verification email sent")},className:"text-gray-700 hover:underline",children:"Resend verification"})]})})]}):n.jsx("div",{className:"flex justify-end items-center mt-2",children:n.jsx("button",{onClick:e,className:"px-3 py-1.5 bg-gray-900 text-white text-sm hover:bg-gray-800 transition-colors",children:"Add email"})})]}),C6=f.createContext(void 0),Ime=({children:a})=>{const[r,e]=f.useState(null),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async x=>{try{s(!0),i(null);const b=await Ke.get(`/store-notification-email/store/${x}`),{success:v,data:j,message:S}=b.data;if(!v)throw new Error(S||"Failed to fetch store notification email");return e(j||null),j||null}catch(b){const v=b?.response?.data?.message||b?.message||"Failed to fetch store notification email";throw i(v),new Error(v)}finally{s(!1)}},[]),c=f.useCallback(async x=>{try{s(!0),i(null);const b=await Ke.post("/store-notification-email",x),{success:v,data:j,message:S}=b.data;if(!v)throw new Error(S||"Failed to create store notification email");return e(j),j}catch(b){const v=b?.response?.data?.message||b?.message||"Failed to create store notification email";throw i(v),new Error(v)}finally{s(!1)}},[]),d=f.useCallback(async(x,b)=>{try{s(!0),i(null);const v=await Ke.put(`/store-notification-email/${x}`,b),{success:j,data:S,message:k}=v.data;if(!j)throw new Error(k||"Failed to update store notification email");return e(S),S}catch(v){const j=v?.response?.data?.message||v?.message||"Failed to update store notification email";throw i(j),new Error(j)}finally{s(!1)}},[]),h=f.useCallback(()=>{e(null),i(null)},[]),m=f.useCallback(()=>{i(null)},[]),y={storeNotificationEmail:r,loading:t,error:o,getByStoreId:l,create:c,update:d,clear:h,clearError:m};return n.jsx(C6.Provider,{value:y,children:a})},Rme=()=>{const a=f.useContext(C6);if(!a)throw new Error("useStoreNotificationEmail must be used within a StoreNotificationEmailProvider");return a},Lme=()=>{const a=mr(),{activeStoreId:r}=fn(),{storeNotificationEmail:e,loading:t,getByStoreId:s,create:o,update:i}=Rme(),{categories:l,fetchAll:c,loading:d}=fw(),[h,m]=f.useState(!1),[y,x]=f.useState(""),[b,v]=f.useState(!1);f.useEffect(()=>{r&&s(r).catch(()=>{})},[r,s]),f.useEffect(()=>{l.length===0&&!d&&c().catch(()=>{})},[]);const j=f.useCallback(z=>{const H=z.toLowerCase(),V="w-5 h-5 text-gray-600";return H.includes("customer")?n.jsx(s4,{className:V}):H.includes("staff")?n.jsx(o4,{className:V}):H.includes("fulfillment")?n.jsx(Xc,{className:V}):n.jsx(My,{className:V})},[]),S=z=>{const H=z.toLowerCase();return H.includes("customer")?"customer":H.includes("staff")?"staff":H.includes("fulfillment")?"fulfillment-request-notification":H.replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")},k=(z,H)=>{const V=S(H);return`/settings/notifications/${z}/${V}`},N=f.useCallback(()=>{m(!0),x("")},[]),P=f.useCallback(()=>{m(!1),x("")},[]),R=f.useCallback(async()=>{if(!r){yr.error("No store selected. Please select a store.");return}if(!y.trim()){yr.error("Please enter an email address");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(y.trim())){yr.error("Please enter a valid email address");return}v(!0);try{await o({storeId:r,email:y.trim().toLowerCase(),isVerified:!1}),yr.success("Email added successfully"),P(),await s(r)}catch(H){const V=H?.response?.data?.message||H?.message||"Failed to add email";yr.error(V)}finally{v(!1)}},[r,y,o,s,P]),F=[...l.map(z=>({icon:j(z.name),title:z.name,description:z.description||"",path:k(z._id,z.name)})),{icon:n.jsx(pS,{className:"w-5 h-5 text-gray-600"}),title:"Webhooks",description:"Send XML or JSON notifications about store events to a URL",path:"/settings/notifications/webhooks"}];return n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsx("div",{className:"mb-4 border-b border-gray-200 pb-4",children:n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Notifications"})}),n.jsx(Mme,{loading:t,storeNotificationEmail:e,onOpenAddEmailModal:N}),n.jsx(Ome,{open:h,onClose:P,emailInput:y,onEmailInputChange:z=>x(z.target.value),onSubmit:R,saving:b}),n.jsx(Ame,{items:F,onNavigate:a})]})})},Dme=()=>{const[a,r]=f.useState("auto_checkout"),[e,t]=f.useState("never");return n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900 mb-4",children:"Payments"}),n.jsxs("div",{className:"border border-gray-200 bg-white p-4 mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-1",children:"Payment providers"}),n.jsxs("p",{className:"text-xs text-gray-600 mb-3",children:["Providers that enable you to accept payment methods at a rate set by the third-party. An additional fee will apply to new orders once you"," ",n.jsx("a",{href:"#",className:"text-gray-700 hover:underline",children:"select a plan"}),"."]}),n.jsx("button",{className:"px-3 py-1.5 text-sm border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Choose a provider"})]}),n.jsxs("div",{className:"border border-gray-200 bg-white p-4 mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-1",children:"Supported payment methods"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Payment methods that are available with one of Ziplofy's approved payment providers"}),n.jsxs("div",{className:"border border-gray-200 p-3 flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-8 bg-white border border-gray-200 flex items-center justify-center",children:n.jsx(L1,{className:"w-5 h-5 text-gray-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"PayPal"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Transaction fees vary by plan  Processing fees set by PayPal"})]})]}),n.jsx("button",{className:"px-3 py-1.5 text-sm border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Activate PayPal"})]}),n.jsxs("button",{className:"px-3 py-1.5 text-sm border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors flex items-center gap-1.5",children:[n.jsx(na,{className:"w-4 h-4"}),"Add payment method"]})]}),n.jsxs("div",{className:"border border-gray-200 bg-white p-4 mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-1",children:"Payment capture method"}),n.jsxs("p",{className:"text-xs text-gray-600 mb-3",children:["Payments are authorized when an order is placed. Select how to"," ",n.jsx("a",{href:"#",className:"text-gray-700 hover:underline",children:"capture payments"}),":"]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"captureMethod",value:"auto_checkout",checked:a==="auto_checkout",onChange:s=>r(s.target.value),className:"w-4 h-4 text-gray-900 focus:ring-gray-400 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-900",children:"Automatically at checkout"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Capture payment when an order is placed"})]})]}),n.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"captureMethod",value:"auto_fulfilled",checked:a==="auto_fulfilled",onChange:s=>r(s.target.value),className:"w-4 h-4 text-gray-900 focus:ring-gray-400 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-900",children:"Automatically when the entire order is fulfilled"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Authorize payment at checkout and capture once the entire order is fulfilled"})]})]}),n.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"captureMethod",value:"manual",checked:a==="manual",onChange:s=>r(s.target.value),className:"w-4 h-4 text-gray-900 focus:ring-gray-400 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-900",children:"Manually"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Authorize payment at checkout and capture manually"})]})]})]})]}),n.jsxs("div",{className:"border border-gray-200 bg-white p-4 mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-1",children:"Manual payment methods"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Payments made outside your online store. Orders paid manually must be approved before being fulfilled."}),n.jsxs("button",{className:"px-3 py-1.5 text-sm border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors flex items-center gap-1.5",children:[n.jsx(na,{className:"w-4 h-4"}),"Manual payment method"]})]}),n.jsxs("div",{className:"border border-gray-200 bg-white p-4 mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-1",children:"Payment method customizations"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Control how payment methods appear to your customers at checkout"}),n.jsx("button",{className:"px-3 py-1.5 text-sm border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"View payment method customization apps"})]}),n.jsxs("div",{className:"border border-gray-200 bg-white p-4 mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Gift card expiration"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"giftCardExpiration",value:"never",checked:e==="never",onChange:s=>t(s.target.value),className:"w-4 h-4 text-gray-900 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900",children:"Gift cards never expire"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"giftCardExpiration",value:"expires",checked:e==="expires",onChange:s=>t(s.target.value),className:"w-4 h-4 text-gray-900 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900",children:"Gift cards expire"})]})]})]}),n.jsx("div",{className:"border border-gray-200 bg-white p-4 mb-4",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-1",children:"Apple Wallet passes"}),n.jsx("p",{className:"text-xs text-gray-600 max-w-[540px]",children:"Give customers a digital Apple Wallet pass to use online or in your retail stores"})]}),n.jsx("button",{className:"px-3 py-1.5 text-sm border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Customize"})]})}),n.jsx("div",{className:"text-center text-xs text-gray-600 mt-4",children:"Learn more about payments"})]})})},uT=[{name:"Basic",description:"For solo entrepreneurs",oldPrice:"1,994",price:"20",unit:"INR/month for first 3 months",badge:"Most popular",features:[{label:"Full online store",emphasized:!0},{label:"Sell in person with a phone or card reader"},{label:"10 inventory locations",emphasized:!0},{label:"Easy shipping labels"}]},{name:"Grow",description:"For small teams",oldPrice:"7,447",price:"20",unit:"INR/month for first 3 months",features:[{label:"Full online store",emphasized:!0},{label:"Sell in person with a phone or card reader"},{label:"10 inventory locations",emphasized:!0},{label:"Shipping discounts + insurance"},{label:"5 staff accounts",emphasized:!0}]},{name:"Advanced",description:"As your business scales",oldPrice:"30,164",price:"20",unit:"INR/month for first 3 months",features:[{label:"Full online store",emphasized:!0},{label:"Sell in person with a phone or card reader"},{label:"10 inventory locations",emphasized:!0},{label:"Fully integrated shipping",secondary:!0},{label:"15 staff accounts",emphasized:!0},{label:"Theme customization per market"},{label:"Enhanced 24/7 chat support"}]},{name:"Plus",description:"For more complex businesses",price:"175,000",unit:"INR/month",features:[{label:"Full online store",emphasized:!0},{label:"Sell in person with POS Pro for up to 200 locations",emphasized:!0},{label:"200 inventory locations",emphasized:!0},{label:"Local storefronts by market"},{label:"Fully integrated shipping",secondary:!0},{label:"Unlimited staff accounts",emphasized:!0},{label:"Theme customization per market"},{label:"Priority 24/7 phone support",emphasized:!0}],extras:["Fully customizable checkout","Sell wholesale/B2B","Optimize ads with Audiences","9 free expansion stores"]}],Fme=[{title:"General",questions:["What is Ziplofy and how does it work?","How much does Ziplofy cost?","How long are your contracts?","Can I cancel my account at any time?","Can I change my plan later on?","Do you offer any discounts?","In what countries can I use Ziplofy?","Is Ziplofy PCI Compliant or PCI Certified?"]},{title:"Payment",questions:["Are there any transaction fees?","What is a third-party payment provider?","Are there any credit card fees?"]},{title:"Store setup",questions:["Is there a setup fee?","I'm looking to switch to Ziplofy. How do I get my data over?","Can I use my own domain name with Ziplofy?","Do I get free web hosting when I open an online store?","What are your bandwidth fees?"]}],Bme=()=>{const a=mr(),[r,e]=f.useState(!1),[t,s]=f.useState({}),o=(i,l)=>{const c=`${i}-${l}`;s(d=>({...d,[c]:!d[c]}))};return n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("button",{onClick:()=>a("/settings/plan"),className:"flex items-center gap-2 mb-4 px-3 py-1.5 text-sm text-gray-900 border border-gray-200 hover:bg-gray-50 transition-colors",children:[n.jsx(Hn,{className:"w-4 h-4"}),"Back"]}),n.jsx("h1",{className:"text-xl font-medium text-gray-900 mb-1",children:"Pick your plan"}),n.jsx("p",{className:"text-sm text-gray-600 mb-8",children:"Everything you need to run your business"}),n.jsxs("div",{className:"flex flex-col md:flex-row gap-3 justify-between mb-3 text-sm text-gray-700",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(zc,{className:"w-4 h-4"}),"World's best checkout"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(zc,{className:"w-4 h-4"}),"Sell online and in person"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(zc,{className:"w-4 h-4"}),"24/7 chat support"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(zc,{className:"w-4 h-4"}),"Over 13,000 apps"]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 mb-6",children:uT.map(i=>n.jsxs("div",{className:"border border-gray-200 bg-white p-4 flex flex-col relative",children:[i.badge&&n.jsx("span",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-900 border border-gray-200",children:i.badge}),n.jsx("h3",{className:"text-base font-medium text-gray-900 mb-1",children:i.name}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:i.description}),n.jsxs("div",{className:"mb-3",children:[i.oldPrice&&n.jsx("p",{className:"text-sm text-gray-400 line-through font-medium mb-1",children:i.oldPrice}),n.jsxs("div",{className:"flex items-baseline gap-1",children:[n.jsx("span",{className:"text-xl font-medium text-gray-900",children:i.price}),n.jsx("span",{className:"text-sm text-gray-900",children:i.unit})]})]}),n.jsxs("button",{className:"w-full px-3 py-1.5 text-sm text-white bg-gray-900 hover:bg-gray-800 transition-colors mb-3",children:["Select ",i.name]}),n.jsxs("div",{className:"flex-grow space-y-1",children:[i.features.map(l=>l.secondary?n.jsx("p",{className:"text-xs text-gray-700 font-medium underline underline-offset-2 mb-1",children:l.label},l.label):n.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-900",children:[n.jsx(zc,{className:"w-3 h-3 shrink-0"}),n.jsx("span",{className:l.emphasized?"font-medium":"",children:l.label})]},l.label)),i.extras&&n.jsx("div",{className:"mt-2 space-y-1",children:i.extras.map(l=>n.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-700 font-medium",children:[n.jsx(na,{className:"w-3 h-3 shrink-0"}),l]},l))})]})]},i.name))}),n.jsxs("div",{className:"mt-6",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Compare plans"}),n.jsxs("div",{className:"border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 border-b border-gray-200",children:[n.jsx("input",{type:"checkbox",id:"only-differences",checked:r,onChange:i=>e(i.target.checked),className:"w-4 h-4 text-gray-900 focus:ring-gray-400"}),n.jsx("label",{htmlFor:"only-differences",className:"text-sm text-gray-900 font-medium cursor-pointer",children:"Only show differences"})]}),n.jsxs("div",{className:"grid grid-cols-5",children:[n.jsx("div",{className:"border-r border-gray-200"}),uT.map(i=>n.jsxs("div",{className:"p-3 border-r border-gray-200 last:border-r-0 flex flex-col gap-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:i.name}),i.badge&&n.jsx("p",{className:"text-xs text-gray-500 font-medium",children:i.badge})]},`compare-header-${i.name}`))]}),n.jsxs("div",{className:"border-t border-gray-200",children:[n.jsx(fT,{label:"Pay monthly",values:["1,994 INR/mo","7,447 INR/mo","30,164 INR/mo","Starting at 175,000 INR/mo on a 3-year term"]}),n.jsx(fT,{label:"Pay yearly (Save up to 25%)",values:["1,499 INR/mo","5,599 INR/mo","22,680 INR/mo",""]})]}),n.jsx("div",{className:"text-center py-3 border-t border-gray-200",children:n.jsxs("button",{className:"inline-flex items-center gap-2 px-3 py-1.5 text-sm text-gray-900 border border-gray-200 hover:bg-gray-50 transition-colors",children:[n.jsx(na,{className:"w-4 h-4"}),"See all features"]})})]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"More ways to sell"}),n.jsxs("div",{className:"border border-gray-200 bg-white flex flex-col md:flex-row overflow-hidden",children:[n.jsxs("div",{className:"flex-1 p-4",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Retail"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"For selling at retail stores"}),n.jsx("p",{className:"text-sm text-gray-400 line-through font-medium mb-1",children:"7,000"}),n.jsxs("div",{className:"flex items-baseline gap-1 mb-3",children:[n.jsx("span",{className:"text-xl font-medium text-gray-900",children:"20"}),n.jsx("span",{className:"text-sm text-gray-900",children:"INR/month for first 3 months"})]}),n.jsx("button",{className:"px-3 py-1.5 text-sm text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Select Retail"})]}),n.jsxs("div",{className:"flex-1 p-4 border-t md:border-t-0 md:border-l border-gray-200",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Card rates starting at"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"2% 3rd-party payment providers"}),n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Standout features"}),["Sell in person with POS Pro (1 location included)","10 inventory locations","Unlimited POS staff with roles & permissions","Inventory management","Rich customer profiles and insights"].map(i=>n.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-900 mb-1",children:[n.jsx(zc,{className:"w-3 h-3 shrink-0"}),n.jsx("span",{className:i.includes("Unlimited")?"font-medium":"",children:i})]},i))]})]})]}),n.jsxs("div",{className:"mt-6 mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Frequently asked questions"}),Fme.map(i=>n.jsxs("div",{className:"border border-gray-200 bg-white mb-3 overflow-hidden",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 px-4 pt-3 pb-2",children:i.title}),i.questions.map((l,c)=>{const d=`${i.title}-${l}`,h=t[d];return n.jsxs("div",{className:`border-t ${c===0?"border-gray-100":"border-gray-200"}`,children:[n.jsxs("button",{onClick:()=>o(i.title,l),className:"w-full flex items-center justify-between px-4 py-2 text-left hover:bg-gray-50 transition-colors",children:[n.jsx("span",{className:"text-sm font-medium text-gray-900",children:l}),n.jsx(Is,{className:`w-4 h-4 text-gray-600 transition-transform ${h?"transform rotate-180":""}`})]}),h&&n.jsx("div",{className:"px-4 pb-3",children:n.jsx("p",{className:"text-xs text-gray-600",children:"This is placeholder text for the answer. You can update it with actual FAQ content later."})})]},l)})]},i.title))]})]})})},fT=({label:a,values:r})=>n.jsxs("div",{className:"grid grid-cols-5 border-b border-gray-200",children:[n.jsx("div",{className:"border-r border-gray-200 p-3 bg-gray-50 font-medium text-sm text-gray-900",children:a}),r.map((e,t)=>n.jsx("div",{className:`border-r border-gray-200 p-3 text-sm text-gray-900 font-medium ${t===r.length-1?"border-r-0":""}`,children:e},`${a}-${t}`))]}),zme=({open:a,onClose:r,acknowledged:e,onAcknowledgedChange:t})=>n.jsxs(un,{open:a,onClose:r,title:"Cancel trial",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm text-gray-900 hover:bg-gray-100 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:r,disabled:!e,className:`px-3 py-1.5 text-sm transition-colors ${e?"bg-gray-900 text-white hover:bg-gray-800":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:"Continue"})]}),children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Avoid unwanted charges"}),n.jsxs("ul",{className:"pl-5 mb-3 text-xs text-gray-600 list-disc space-y-1",children:[n.jsx("li",{children:"Cancel any app subscriptions you signed up for outside of Ziplofy"}),n.jsxs("li",{children:["Cancel additional"," ",n.jsx("a",{href:"#",className:"text-gray-700 hover:underline",children:"stores connected to your account"})]}),n.jsxs("li",{children:["Turn off automatic renewals for any"," ",n.jsx("a",{href:"#",className:"text-gray-700 hover:underline",children:"domains with Ziplofy"})]})]}),n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Domains"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Any domains connected to your account will be disconnected if you cancel your plan. As well, all auto renewals will be turned off for any domains bought through Ziplofy."}),n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Remember"}),n.jsxs("p",{className:"text-xs text-gray-600 mb-3",children:[n.jsx("a",{href:"#",className:"text-gray-700 hover:underline",children:"Review steps"})," ","to take before canceling, including exporting store data as CSV files."]}),n.jsx("div",{className:"bg-gray-100 border border-gray-200 p-3 mb-3",children:n.jsx("p",{className:"text-xs text-gray-900",children:n.jsx("a",{href:"#",className:"text-gray-700 hover:underline",children:"If you need help, contact support."})})}),n.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-900 mt-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:e,onChange:t,className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400"}),n.jsx("span",{children:"I've reviewed the information above"})]})]}),Ume=({onCancelTrial:a,onChoosePlan:r})=>n.jsxs("div",{className:"border border-gray-200 bg-white p-4 mb-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-3",children:"Plan details"}),n.jsxs("div",{className:"border border-gray-200 p-4 flex items-center justify-between gap-4 flex-wrap",children:[n.jsx("p",{className:"text-sm text-gray-900",children:"Trial"}),n.jsxs("div",{className:"flex gap-2 flex-wrap",children:[n.jsx("button",{onClick:a,className:"px-3 py-1.5 text-sm text-gray-700 border border-gray-200 bg-transparent hover:bg-gray-50 transition-colors",children:"Cancel trial"}),n.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Choose plan"})]})]}),n.jsxs("p",{className:"text-xs text-gray-600 mt-3",children:["View the"," ",n.jsx("a",{href:"#",className:"text-gray-700 hover:underline",children:"terms of service"})," ","and"," ",n.jsx("a",{href:"#",className:"text-gray-700 hover:underline",children:"privacy policy"})]})]}),$me=({onViewAllSubscriptions:a})=>n.jsxs("div",{className:"border border-gray-200 bg-white p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Subscriptions"}),n.jsx("p",{className:"text-xs text-gray-600 mt-2 mb-3",children:"Additional items you're billed for on a recurring basis"}),n.jsxs("div",{className:"border border-gray-200 p-3 flex items-center justify-between cursor-pointer transition-all hover:bg-gray-50",onClick:a,children:[n.jsx("p",{className:"text-sm text-gray-900",children:"View all subscriptions"}),n.jsx(Pa,{className:"w-4 h-4 text-gray-400"})]})]}),Vme=()=>{const a=mr(),[r,e]=f.useState(!1),[t,s]=f.useState(!1),o=f.useCallback(()=>{e(!0),s(!1)},[]),i=f.useCallback(()=>{e(!1)},[]),l=f.useCallback(h=>{s(h.target.checked)},[]),c=f.useCallback(()=>{a("/settings/subscribe/select-plan")},[a]),d=f.useCallback(()=>{a("/settings/plan/subscriptions")},[a]);return n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900 mb-4",children:"Plan"}),n.jsx(Ume,{onCancelTrial:o,onChoosePlan:c}),n.jsx($me,{onViewAllSubscriptions:d}),n.jsx(zme,{open:r,onClose:i,acknowledged:t,onAcknowledgedChange:l})]})})},Wme=({installedCount:a=0,onBrowseApps:r})=>n.jsxs("div",{className:"border border-gray-200 p-3 bg-gray-50",children:[n.jsxs("h2",{className:"text-base font-medium text-gray-900",children:["Paid app subscriptions (",a," installed)"]}),n.jsxs("div",{className:"mt-3 border border-gray-200 p-4 text-center bg-white",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"You don't have any paid app subscriptions"}),n.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"After you install an app that has recurring and/or usage charges, it will be shown here."}),n.jsx("button",{onClick:r,className:"px-3 py-1.5 bg-gray-900 text-white text-sm hover:bg-gray-800 transition-colors",children:"Browse apps"})]})]}),Hme=()=>n.jsxs("div",{className:"border border-gray-200 p-3 bg-gray-50",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Overview"}),n.jsx("div",{className:"mt-3 border border-gray-200 p-3 bg-white",children:n.jsx("p",{className:"text-sm text-gray-900",children:"Ziplofy subscription"})})]}),qme=()=>{const a=mr(),r=f.useCallback(()=>{a("/settings/plan")},[a]);return n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.jsxs("button",{onClick:r,className:"cursor-pointer flex items-center gap-2 px-3 py-1.5 border border-gray-200 bg-white text-gray-900 text-sm hover:bg-gray-50 transition-colors",children:[n.jsx(Hn,{className:"w-4 h-4"}),"Back"]}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Active subscriptions"})]}),n.jsxs("div",{className:"border border-gray-200 bg-white flex flex-col gap-4 p-4",children:[n.jsx(Hme,{}),n.jsx(Wme,{installedCount:0})]})]})})},Lg=({icon:a,label:r,right:e,onClick:t})=>n.jsxs("button",{onClick:t,className:"w-full px-4 py-2 flex items-center gap-3 hover:bg-gray-50 transition-colors text-left",children:[n.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-600 shrink-0",children:a}),n.jsx("span",{className:"flex-1 text-sm text-gray-900",children:r}),e]}),Dg=({variant:a="default"})=>a==="privacy"?n.jsxs("div",{className:"flex gap-1 border-b border-gray-200 p-2",children:[n.jsx("button",{className:"px-2 py-1 text-sm text-gray-700 hover:bg-gray-100 rounded",title:"Paragraph",children:"Paragraph"}),n.jsx("button",{className:"px-2 py-1 text-sm font-bold text-gray-700 hover:bg-gray-100 rounded",title:"Bold",children:"B"}),n.jsx("button",{className:"px-2 py-1 text-sm italic text-gray-700 hover:bg-gray-100 rounded",title:"Italic",children:"I"}),n.jsx("button",{className:"px-2 py-1 text-sm underline text-gray-700 hover:bg-gray-100 rounded",title:"Underline",children:"U"}),n.jsx("button",{className:"px-2 py-1 text-sm text-gray-700 hover:bg-gray-100 rounded",title:"Text color",children:"A"}),n.jsx("button",{className:"px-2 py-1 text-sm text-gray-700 hover:bg-gray-100 rounded",title:"List",children:""}),n.jsx("button",{className:"px-2 py-1 text-sm text-gray-700 hover:bg-gray-100 rounded",title:"Link",children:""}),n.jsx("button",{className:"px-2 py-1 text-sm text-gray-700 hover:bg-gray-100 rounded",title:"Insert image",children:""}),n.jsx("button",{className:"px-2 py-1 text-sm text-gray-700 hover:bg-gray-100 rounded",title:"Insert table",children:""}),n.jsx("button",{className:"px-2 py-1 text-sm text-gray-700 hover:bg-gray-100 rounded",title:"More options",children:""}),n.jsx("button",{className:"px-2 py-1 text-sm text-gray-700 hover:bg-gray-100 rounded",title:"View HTML",children:"</>"})]}):n.jsxs("div",{className:"flex gap-1 border-b border-gray-200 p-2",children:[n.jsx("button",{className:"px-2 py-1 text-sm font-bold text-gray-700 hover:bg-gray-100 rounded",title:"Bold",children:"B"}),n.jsx("button",{className:"px-2 py-1 text-sm italic text-gray-700 hover:bg-gray-100 rounded",title:"Italic",children:"I"}),n.jsx("button",{className:"px-2 py-1 text-sm underline text-gray-700 hover:bg-gray-100 rounded",title:"Underline",children:"U"}),n.jsx("button",{className:"px-2 py-1 text-sm text-gray-700 hover:bg-gray-100 rounded",title:"Bulleted list",children:""}),n.jsx("button",{className:"px-2 py-1 text-sm text-gray-700 hover:bg-gray-100 rounded",title:"Numbered list",children:"1."}),n.jsx("button",{className:"px-2 py-1 text-sm text-gray-700 hover:bg-gray-100 rounded",title:"Link",children:""}),n.jsx("button",{className:"px-2 py-1 text-sm text-gray-700 hover:bg-gray-100 rounded",title:"Insert table",children:""}),n.jsx("button",{className:"px-2 py-1 text-sm text-gray-700 hover:bg-gray-100 rounded",title:"More options",children:""})]}),S6=f.createContext(void 0),Gme=({children:a})=>{const[r,e]=f.useState(null),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async m=>{try{s(!0),i(null);const y=await Ke.get(`/store-privacy-policy/store/${m}`),{success:x,data:b,message:v}=y.data;if(!x)throw new Error(v||"Failed to fetch privacy policy");return e(b||null),b||null}catch(y){const x=y?.response?.data?.message||y?.message||"Failed to fetch privacy policy";throw i(x),new Error(x)}finally{s(!1)}},[]),c=f.useCallback(async m=>{try{s(!0),i(null);const y=await Ke.post("/store-privacy-policy",m),{success:x,data:b,message:v}=y.data;if(!x)throw new Error(v||"Failed to create privacy policy");return e(b),b}catch(y){const x=y?.response?.data?.message||y?.message||"Failed to create privacy policy";throw i(x),new Error(x)}finally{s(!1)}},[]),d=f.useCallback(async(m,y)=>{try{s(!0),i(null);const x=await Ke.put(`/store-privacy-policy/${m}`,y),{success:b,data:v,message:j}=x.data;if(!b)throw new Error(j||"Failed to update privacy policy");return e(v),v}catch(x){const b=x?.response?.data?.message||x?.message||"Failed to update privacy policy";throw i(b),new Error(b)}finally{s(!1)}},[]),h={policy:r,loading:t,error:o,getByStoreId:l,createPolicy:c,updatePolicy:d};return n.jsx(S6.Provider,{value:h,children:a})},Kme=()=>{const a=f.useContext(S6);if(!a)throw new Error("useStorePrivacyPolicy must be used within a StorePrivacyPolicyProvider");return a},N6=f.createContext(void 0),Yme=({children:a})=>{const[r,e]=f.useState(null),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async m=>{try{s(!0),i(null);const y=await Ke.get(`/store-return-refund-policy/store/${m}`),{success:x,data:b,message:v}=y.data;if(!x)throw new Error(v||"Failed to fetch return/refund policy");return e(b||null),b||null}catch(y){const x=y?.response?.data?.message||y?.message||"Failed to fetch return/refund policy";throw i(x),new Error(x)}finally{s(!1)}},[]),c=f.useCallback(async m=>{try{s(!0),i(null);const y=await Ke.post("/store-return-refund-policy",m),{success:x,data:b,message:v}=y.data;if(!x)throw new Error(v||"Failed to create return/refund policy");return e(b),b}catch(y){const x=y?.response?.data?.message||y?.message||"Failed to create return/refund policy";throw i(x),new Error(x)}finally{s(!1)}},[]),d=f.useCallback(async(m,y)=>{try{s(!0),i(null);const x=await Ke.put(`/store-return-refund-policy/${m}`,y),{success:b,data:v,message:j}=x.data;if(!b)throw new Error(j||"Failed to update return/refund policy");return e(v),v}catch(x){const b=x?.response?.data?.message||x?.message||"Failed to update return/refund policy";throw i(b),new Error(b)}finally{s(!1)}},[]),h={policy:r,loading:t,error:o,getByStoreId:l,createPolicy:c,updatePolicy:d};return n.jsx(N6.Provider,{value:h,children:a})},Zme=()=>{const a=f.useContext(N6);if(!a)throw new Error("useStoreReturnRefundPolicy must be used within a StoreReturnRefundPolicyProvider");return a},k6=f.createContext(void 0),Xme=({children:a})=>{const[r,e]=f.useState(null),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async m=>{try{s(!0),i(null);const y=await Ke.get(`/store-shipping-policy/store/${m}`),{success:x,data:b,message:v}=y.data;if(!x)throw new Error(v||"Failed to fetch shipping policy");return e(b||null),b||null}catch(y){const x=y?.response?.data?.message||y?.message||"Failed to fetch shipping policy";throw i(x),new Error(x)}finally{s(!1)}},[]),c=f.useCallback(async m=>{try{s(!0),i(null);const y=await Ke.post("/store-shipping-policy",m),{success:x,data:b,message:v}=y.data;if(!x)throw new Error(v||"Failed to create shipping policy");return e(b),b}catch(y){const x=y?.response?.data?.message||y?.message||"Failed to create shipping policy";throw i(x),new Error(x)}finally{s(!1)}},[]),d=f.useCallback(async(m,y)=>{try{s(!0),i(null);const x=await Ke.put(`/store-shipping-policy/${m}`,y),{success:b,data:v,message:j}=x.data;if(!b)throw new Error(j||"Failed to update shipping policy");return e(v),v}catch(x){const b=x?.response?.data?.message||x?.message||"Failed to update shipping policy";throw i(b),new Error(b)}finally{s(!1)}},[]),h={policy:r,loading:t,error:o,getByStoreId:l,createPolicy:c,updatePolicy:d};return n.jsx(k6.Provider,{value:h,children:a})},Qme=()=>{const a=f.useContext(k6);if(!a)throw new Error("useStoreShippingPolicy must be used within a StoreShippingPolicyProvider");return a},_6=f.createContext(void 0),Jme=({children:a})=>{const[r,e]=f.useState(null),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async m=>{try{s(!0),i(null);const y=await Ke.get(`/store-terms-policy/store/${m}`),{success:x,data:b,message:v}=y.data;if(!x)throw new Error(v||"Failed to fetch terms policy");return e(b||null),b||null}catch(y){const x=y?.response?.data?.message||y?.message||"Failed to fetch terms policy";throw i(x),new Error(x)}finally{s(!1)}},[]),c=f.useCallback(async m=>{try{s(!0),i(null);const y=await Ke.post("/store-terms-policy",m),{success:x,data:b,message:v}=y.data;if(!x)throw new Error(v||"Failed to create terms policy");return e(b),b}catch(y){const x=y?.response?.data?.message||y?.message||"Failed to create terms policy";throw i(x),new Error(x)}finally{s(!1)}},[]),d=f.useCallback(async(m,y)=>{try{s(!0),i(null);const x=await Ke.put(`/store-terms-policy/${m}`,y),{success:b,data:v,message:j}=x.data;if(!b)throw new Error(j||"Failed to update terms policy");return e(v),v}catch(x){const b=x?.response?.data?.message||x?.message||"Failed to update terms policy";throw i(b),new Error(b)}finally{s(!1)}},[]),h={policy:r,loading:t,error:o,getByStoreId:l,createPolicy:c,updatePolicy:d};return n.jsx(_6.Provider,{value:h,children:a})},ege=()=>{const a=f.useContext(_6);if(!a)throw new Error("useStoreTermsPolicy must be used within a StoreTermsPolicyProvider");return a},tge=()=>{const a=mr(),{rules:r,getByStoreId:e,loading:t}=F2(),{stores:s,activeStoreId:o}=fn(),{loggedInUser:i}=TS(),{info:l,getByStoreId:c,createInfo:d,updateInfo:h}=d6(),{policy:m,getByStoreId:y,createPolicy:x,updatePolicy:b}=Qme(),{policy:v,getByStoreId:j,createPolicy:S,updatePolicy:k}=ege(),{policy:N,getByStoreId:P,createPolicy:R,updatePolicy:F}=Kme(),{policy:z,getByStoreId:H,createPolicy:V,updatePolicy:W}=Zme(),[Z,A]=f.useState(!1),[q,I]=f.useState(""),[K,D]=f.useState(!1),[Q,oe]=f.useState(!1),[re,Te]=f.useState(""),[G,Y]=f.useState(!1),[Se,fe]=f.useState(""),[Ee,Ae]=f.useState(!1),[qe,we]=f.useState(!1),[Oe,ze]=f.useState(""),[We,pt]=f.useState(!1),[Pt,ee]=f.useState(!1),[Ne,Ie]=f.useState(!1),[ne,M]=f.useState(""),[U,J]=f.useState(!1);f.useEffect(()=>{o&&e(o),o&&c(o),o&&y(o),o&&j(o),o&&P(o),o&&H(o)},[o,e,c,y,j,P,H]);const ce=f.useCallback(()=>{M(`We have a 30-day return policy, which means you have 30 days after receiving your item to request a return.

To be eligible for a return, your item must be in the same condition that you received it, unworn or unused, with tags, and in its original packaging. You'll also need the receipt or proof of purchase.

To start a return, you can contact us at developer200419@gmail.com. Please note that returns will need to be sent to the following address: [INSERT RETURN ADDRESS]

If your return is accepted, we'll send you a return shipping label, as well as instructions on how and where to send your package. Items sent back to us without first requesting a return will not be accepted.

You can always contact us for any return question at developer200419@gmail.com.




Damages and issues
Please inspect your order upon reception and contact us immediately if the item is defective, damaged or if you receive the wrong item, so that we can evaluate the issue and make it right.




Exceptions / non-returnable items
Certain types of items cannot be returned, like perishable goods (such as food, flowers, or plants), custom products (such as special orders or personalized items), and personal care goods (such as beauty products). We also do not accept returns for hazardous materials, flammable liquids, or gases. Please get in touch if you have questions or concerns about your specific item.

Unfortunately, we cannot accept returns on sale items or gift cards.




Exchanges
The fastest way to ensure you get what you want is to return the item you have, and once the return is accepted, make a separate purchase for the new item.




European Union 14 day cooling off period
Notwithstanding the above, if the merchandise is being shipped into the European Union, you have the right to cancel or return your order within 14 days, for any reason and without a justification. As above, your item must be in the same condition that you received it, unworn or unused, with tags, and in its original packaging. You'll also need the receipt or proof of purchase.




Refunds
We will notify you once we've received and inspected your return, and let you know if the refund was approved or not. If approved, you'll be automatically refunded on your original payment method within 10 business days. Please remember it can take some time for your bank or credit card company to process and post the refund too.
If more than 15 business days have passed since we've approved your return, please contact us at developer200419@gmail.com.`)},[]),ue=f.useCallback(()=>{const he=s.find(Ue=>Ue._id===o)?.storeName||"My Store",se=i?.email||"",Le=`Trade name: ${he}

Phone number:

Email: ${se}

Physical address: legal name man, demo address, demo apartment, 201012 helo world city UP, India

VAT number:

Trade number:`;I(Le)},[s,o,i]),xe=f.useCallback(()=>{const he=s.find(Ge=>Ge._id===o)?.storeName||"My Store",se=i?.email||"support@example.com",Ue=`OVERVIEW
${`Welcome to ${he}! The terms "we", "us" and "our" refer to ${he}. ${he} operates this store and website, including all related information, content, features, tools, products and services in order to provide you, the customer, with a curated shopping experience (the "Services"). ${he} is powered by Shopify, which enables us to provide the Services to you.`}
The below terms and conditions, together with any policies referenced herein (these "Terms of Service" or "Terms") describe your rights and responsibilities when you use the Services.
Please read these Terms of Service carefully, as they include important information about your legal rights and cover areas such as warranty disclaimers and limitations of liability.
By visiting, interacting with or using our Services, you agree to be bound by these Terms of Service and our Privacy Policy [LINK]. If you do not agree to these Terms of Service or Privacy Policy, you should not use or access our Services.

SECTION 1 - ACCESS AND ACCOUNT
By agreeing to these Terms of Service, you represent that you are at least the age of majority in your state or province of residence, and you have given us your consent to allow any of your minor dependents to use the Services on devices you own, purchase or manage.
To use the Services, including accessing or browsing our online stores or purchasing any of the products or services we offer, you may be asked to provide certain information, such as your email address, billing, payment, and shipping information. You represent and warrant that all the information you provide in our stores is correct, current and complete and that you have all rights necessary to provide this information.
You are solely responsible for maintaining the security of your account credentials and for all of your account activity. You may not transfer, sell, assign, or license your account to any other person.

SECTION 2 - OUR PRODUCTS
We have made every effort to provide an accurate representation of our products and services in our online stores. However, please note that colors or product appearance may differ from how they may appear on your screen due to the type of device you use to access the store and your device settings and configuration.
We do not warrant that the appearance or quality of any products or services purchased by you will meet your expectations or be the same as depicted or rendered in our online stores.
All descriptions of products are subject to change at any time without notice at our sole discretion. We reserve the right to discontinue any product at any time and may limit the quantities of any products that we offer to any person, geographic region or jurisdiction, on a case-by-case basis.

SECTION 3 - ORDERS
When you place an order, you are making an offer to purchase. ${he} reserves the right to accept or decline your order for any reason at its discretion. Your order is not accepted until ${he} confirms acceptance. We must receive and process your payment before your order is accepted. Please review your order carefully before submitting, as ${he} may be unable to accommodate cancellation requests after an order is accepted. In the event that we do not accept, make a change to, or cancel an order, we will attempt to notify you by contacting the email, billing address, and/or phone number provided at the time the order was made.
Your purchases are subject to return or exchange solely in accordance with our Refund Policy [LINK].
You represent and warrant that your purchases are for your own personal or household use and not for commercial resale or export.

SECTION 4 - PRICES AND BILLING
Prices, discounts and promotions are subject to change without notice. The price charged for a product or service will be the price in effect at the time the order is placed and will be set out in your order confirmation email. Unless otherwise expressly stated, posted prices do not include taxes, shipping, handling, customs or import charges.
Prices posted in our online stores may be different from prices offered in physical stores or in online or other stores operated by third parties. We may offer, from time to time, promotions on the Services that may affect pricing and that are governed by terms and conditions separate from these Terms. If there is a conflict between the terms for a promotion and these Terms, the promotion terms will govern.
You agree to provide current, complete and accurate purchase, payment and account information for all purchases made at our stores. You agree to promptly update your account and other information, including your email address, credit card numbers and expiration dates, so that we can complete your transactions and contact you as needed.
You represent and warrant that (i) the credit card information you provide is true, correct, and complete, (ii) you are duly authorized to use such credit card for the purchase, (iii) charges incurred by you will be honored by your credit card company, and (iv) you will pay charges incurred by you at the posted prices, including shipping and handling charges and all applicable taxes, if any.

SECTION 5 - SHIPPING AND DELIVERY
We are not liable for shipping and delivery delays. All delivery times are estimates only and are not guaranteed. We are not responsible for delays caused by shipping carriers, customs processing, or events outside our control. Once we transfer products to the carrier, title and risk of loss passes to you.

SECTION 6 - INTELLECTUAL PROPERTY
Our Services, including but not limited to all trademarks, brands, text, displays, images, graphics, product reviews, video, and audio, and the design, selection, and arrangement thereof, are owned by ${he}, its affiliates or licensors and are protected by U.S. and foreign patent, copyright and other intellectual property laws.
These Terms permit you to use the Services for your personal, non-commercial use only. You must not reproduce, distribute, modify, create derivative works of, publicly display, publicly perform, republish, download, store, or transmit any of the material on the Services without our prior written consent. Except as expressly provided herein, nothing in these Terms grants or shall be construed as granting a license or other rights to you under any patent, trademark, copyright, or other intellectual property of ${he}, Shopify or any third party. Unauthorized use of the Services may be a violation of federal and state intellectual property laws. All rights not expressly granted herein are reserved by ${he}.
${he}'s names, logos, product and service names, designs, and slogans are trademarks of ${he} or its affiliates or licensors. You must not use such trademarks without the prior written permission of ${he}. Shopify's name, logo, product and service names, designs and slogans are trademarks of Shopify. All other names, logos, product and service names, designs, and slogans on the Services are the trademarks of their respective owners.

SECTION 7 - OPTIONAL TOOLS
You may be provided with access to customer tools offered by third parties as part of the Services, which we neither monitor nor have any control nor input.
You acknowledge and agree that we provide access to such tools "as is" and "as available" without any warranties, representations or conditions of any kind and without any endorsement. We shall have no liability whatsoever arising from or relating to your use of optional third-party tools.
Any use by you of the optional tools offered through the site is entirely at your own risk and discretion and you should ensure that you are familiar with and approve of the terms on which tools are provided by the relevant third-party provider(s).
We may also, in the future, offer new features through the Services (including the release of new tools and resources). Such new features shall also be deemed part of the Services and are subject to these Terms of Service.

SECTION 8 - THIRD-PARTY LINKS
The Services may contain materials and hyperlinks to websites provided or operated by third parties (including any embedded third party functionality). We are not responsible for examining or evaluating the content or accuracy of any third-party materials or websites you choose to access. If you decide to leave the Services to access these materials or third party sites, you do so at your own risk.
We are not liable for any harm or damages related to your access of any third-party websites, or your purchase or use of any products, services, resources, or content on any third-party websites. Please review carefully the third-party's policies and practices and make sure you understand them before you engage in any transaction. Complaints, claims, concerns, or questions regarding third-party products and services should be directed to the third-party.

SECTION 9 - RELATIONSHIP WITH SHOPIFY
[NOTE TO MERCHANT: This section accurately characterizes Shopify's relationship with your store and should not be removed or modified.]
${he} is powered by Shopify, which enables us to provide the Services to you. However, any sales and purchases you make in our Store are made directly with ${he}. By using the Services, you acknowledge and agree that Shopify is not responsible for any aspect of any sales between you and ${he}, including any injury, damage, or loss resulting from purchased products and services. You hereby expressly release Shopify and its affiliates from all claims, damages, and liabilities arising from or related to your purchases and transactions with ${he}.

SECTION 10 - PRIVACY POLICY
All personal information we collect through the Services is subject to our Privacy Policy, which can be viewed here [LINK], and certain personal information may be subject to Shopify's Privacy Policy, which can be viewed here. By using the Services, you acknowledge that you have read these privacy policies.
Because the Services are hosted by Shopify, Shopify collects and processes personal information about your access to and use of the Services in order to provide and improve the Services for you. Information you submit to the Services will be transmitted to and shared with Shopify as well as third parties that may be located in other countries than where you reside, in order to provide services to you. Review our privacy policy [LINK] for more details on how we, Shopify, and our partners use your personal information.

SECTION 11 - FEEDBACK
If you submit, upload, post, email, or otherwise transmit any ideas, suggestions, feedback, reviews, proposals, plans, or other content (collectively, "Feedback"), you grant us a perpetual, worldwide, sublicensable, royalty-free license to use, reproduce, modify, publish, distribute and display such Feedback in any medium for any purpose, including for commercial use. We may, for example, use our rights under this license to operate, provide, evaluate, enhance, improve and promote the Services and to perform our obligations and exercise our rights under the Terms of Service.
You also represent and warrant that: (i) you own or have all necessary rights to all Feedback; (ii) you have disclosed any compensation or incentives received in connection with your submission of Feedback; and (iii) your Feedback will comply with these Terms. We are and shall be under no obligation (1) to maintain your Feedback in confidence; (2) to pay compensation for your Feedback; or (3) to respond to your Feedback.
We may, but have no obligation to, monitor, edit or remove Feedback that we determine in our sole discretion to be unlawful, offensive, threatening, libelous, defamatory, pornographic, obscene or otherwise objectionable or violates any party's intellectual property or these Terms of Service.
You agree that your Feedback will not violate any right of any third-party, including copyright, trademark, privacy, personality or other personal or proprietary right. You further agree that your Feedback will not contain libelous or otherwise unlawful, abusive or obscene Feedback, or contain any computer virus or other malware that could in any way affect the operation of the Services or any related website. You may not use a false email address, pretend to be someone other than yourself, or otherwise mislead us or third-parties as to the origin of any Feedback. You are solely responsible for any Feedback you make and its accuracy. We take no responsibility and assume no liability for any Feedback posted by you or any third-party.

SECTION 12 - ERRORS, INACCURACIES AND OMISSIONS
Occasionally there may be information on or in the Services that contain typographical errors, inaccuracies or omissions that may relate to product descriptions, pricing, promotions, offers, product shipping charges, transit times and availability. We reserve the right to correct any errors, inaccuracies or omissions, and to change or update information or cancel orders if any information is inaccurate at any time without prior notice (including after you have submitted your order).

SECTION 13 - PROHIBITED USES
You may access and use the Services for lawful purposes only. You may not access or use the Services, directly or indirectly: (a) for any unlawful or malicious purpose; (b) to violate any international, federal, provincial or state regulations, rules, laws, or local ordinances; (c) to infringe upon or violate our intellectual property rights or the intellectual property rights of others; (d) to harass, abuse, insult, harm, defame, slander, disparage, intimidate, or harm any of our employees or any other person; (e) to transmit false or misleading information; (f) to send, knowingly receive, upload, download, use, or re-use any material that does not comply with the these Terms; (g) to transmit, or procure the sending of, any advertising or promotional material, including any "junk mail," "chain letter," "spam," or any other similar solicitation; (h) to impersonate or attempt to impersonate any other person or entity; or (i) to engage in any other conduct that restricts or inhibits anyone's use or enjoyment of the Services, or which, as determined by us, may harm ${he}, Shopify or users of the Services, or expose them to liability.
In addition, you agree not to: (a) upload or transmit viruses or any other type of malicious code that will or may be used in any way that will affect the functionality or operation of the Services; (b) reproduce, duplicate, copy, sell, resell or exploit any portion of the Services; (c) collect or track the personal information of others; (d) spam, phish, pharm, pretext, spider, crawl, or scrape; or (e) interfere with or circumvent the security features of the Services or any related website, other websites, or the Internet. We reserve the right to suspend, disable, or terminate your account at any time, without notice, if we determine that you have violated any part of these Terms.

SECTION 14 - TERMINATION
We may terminate this agreement or your access to the Services (or any part thereof) in our sole discretion at any time without notice, and you will remain liable for all amounts due up to and including the date of termination.
The following sections will continue to apply following any termination: Intellectual Property, Feedback, Termination, Disclaimer of Warranties, Limitation of Liability, Indemnification, Severability, Waiver; Entire Agreement, Assignment, Governing Law, Privacy Policy, and any other provisions that by their nature should survive termination.

SECTION 15 - DISCLAIMER OF WARRANTIES
The information presented on or through the Services is made available solely for general information purposes. We do not warrant the accuracy, completeness, or usefulness of this information. Any reliance you place on such information is strictly at your own risk. We disclaim all liability and responsibility arising from any reliance placed on such materials by you or any other visitor to the Services, or by anyone who may be informed of any of its contents.
EXCEPT AS EXPRESSLY STATED BY ${he}, THE SERVICES AND ALL PRODUCTS OFFERED THROUGH THE SERVICES ARE PROVIDED 'AS IS' AND 'AS AVAILABLE' FOR YOUR USE, WITHOUT ANY REPRESENTATION, WARRANTIES OR CONDITIONS OF ANY KIND, EITHER EXPRESS OR IMPLIED, INCLUDING ALL IMPLIED WARRANTIES OR CONDITIONS OF MERCHANTABILITY, MERCHANTABLE QUALITY, FITNESS FOR A PARTICULAR PURPOSE, DURABILITY, TITLE, AND NON-INFRINGEMENT. WE DO NOT GUARANTEE, REPRESENT OR WARRANT THAT YOUR USE OF THE SERVICES WILL BE UNINTERRUPTED, TIMELY, SECURE OR ERROR-FREE. SOME JURISDICTIONS LIMIT OR DO NOT ALLOW THE DISCLAIMER OF IMPLIED OR OTHER WARRANTIES SO THE ABOVE DISCLAIMER MAY NOT APPLY TO YOU.

SECTION 16 - LIMITATION OF LIABILITY
TO THE FULLEST EXTENT PROVIDED BY LAW, IN NO CASE SHALL ${he}, OUR PARTNERS, DIRECTORS, OFFICERS, EMPLOYEES, AFFILIATES, AGENTS, CONTRACTORS, SERVICE PROVIDERS OR LICENSORS, OR THOSE OF SHOPIFY AND ITS AFFILIATES, BE LIABLE FOR ANY INJURY, LOSS, CLAIM, OR ANY DIRECT, INDIRECT, INCIDENTAL, PUNITIVE, SPECIAL, OR CONSEQUENTIAL DAMAGES OF ANY KIND, INCLUDING, WITHOUT LIMITATION, LOST PROFITS, LOST REVENUE, LOST SAVINGS, LOSS OF DATA, REPLACEMENT COSTS, OR ANY SIMILAR DAMAGES, WHETHER BASED IN CONTRACT, TORT (INCLUDING NEGLIGENCE), STRICT LIABILITY OR OTHERWISE, ARISING FROM YOUR USE OF ANY OF THE SERVICES OR ANY PRODUCTS PROCURED USING THE SERVICES, OR FOR ANY OTHER CLAIM RELATED IN ANY WAY TO YOUR USE OF THE SERVICES OR ANY PRODUCT, INCLUDING, BUT NOT LIMITED TO, ANY ERRORS OR OMISSIONS IN ANY CONTENT, OR ANY LOSS OR DAMAGE OF ANY KIND INCURRED AS A RESULT OF THE USE OF THE SERVICES OR ANY CONTENT (OR PRODUCT) POSTED, TRANSMITTED, OR OTHERWISE MADE AVAILABLE VIA THE SERVICES, EVEN IF ADVISED OF THEIR POSSIBILITY.

SECTION 17 - INDEMNIFICATION
You agree to indemnify, defend and hold harmless ${he}, Shopify, and our affiliates, partners, officers, directors, employees, agents, contractors, licensors, and service providers from any losses, damages, liabilities or claims, including reasonable attorneys' fees, payable to any third party due to or arising out of (1) your breach of these Terms of Service or the documents they incorporate by reference, (2) your violation of any law or the rights of a third party, or (3) your access to and use of the Services.
We will notify you of any indemnifiable claim, provided that a failure to promptly notify will not relieve you of your obligations unless you are materially prejudiced. We may control the defense and settlement of such claim at your expense, including choice of counsel, but will not settle any claim requiring non-monetary obligations from you without your consent (not to be unreasonably withheld). You will cooperate in the defense of indemnified claims, including by providing relevant documents.

SECTION 18 - SEVERABILITY
In the event that any provision of these Terms of Service is determined to be unlawful, void or unenforceable, such provision shall nonetheless be enforceable to the fullest extent permitted by applicable law, and the unenforceable portion shall be deemed to be severed from these Terms of Service, such determination shall not affect the validity and enforceability of any other remaining provisions.

SECTION 19 - WAIVER; ENTIRE AGREEMENT
The failure of us to exercise or enforce any right or provision of these Terms of Service shall not constitute a waiver of such right or provision.
These Terms of Service and any policies or operating rules posted by us on this site or in respect to the Service constitutes the entire agreement and understanding between you and us and governs your use of the Service, superseding any prior or contemporaneous agreements, communications and proposals, whether oral or written, between you and us (including, but not limited to, any prior versions of the Terms of Service).
Any ambiguities in the interpretation of these Terms of Service shall not be construed against the drafting party.

SECTION 20 - ASSIGNMENT
You may not delegate, transfer or assign this Agreement or any of your rights or obligations under these Terms without our prior written consent, and any such attempt will be null and void. We may transfer, assign, or delegate these Terms and our rights and obligations without consent or notice to you.

SECTION 21 - GOVERNING LAW
These Terms of Service and any separate agreements whereby we provide you Services shall be governed by and construed in accordance with the federal and state or territorial courts in the jurisdiction where ${he} is headquartered. You and ${he} consent to venue and personal jurisdiction in such courts.

SECTION 22 - HEADINGS
The headings used in this agreement are included for convenience only and will not limit or otherwise affect these Terms.

SECTION 23 - CHANGES TO TERMS OF SERVICE
You can review the most current version of the Terms of Service at any time on this page.
We reserve the right, in our sole discretion, to update, change, or replace any part of these Terms of Service by posting updates and changes to our website. It is your responsibility to check our website periodically for changes. We will notify you of any material changes to these Terms in accordance with applicable law, and such changes will be effective on the date specified in the notice. Your continued use of or access to the Services following the posting of any changes to these Terms of Service constitutes acceptance of those changes.

SECTION 24 - CONTACT INFORMATION
Questions about the Terms of Service should be sent to us at ${se}.
Our contact information is posted below:
[INSERT TRADING NAME]
${se}
[INSERT BUSINESS ADDRESS]
[INSERT BUSINESS PHONE NUMBER]
[INSERT BUSINESS REGISTRATION NUMBER]
[INSERT VAT NUMBER]`;fe(Ue)},[s,o,i]);return n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900 mb-4",children:"Policies"}),n.jsx("div",{className:"bg-white border border-gray-200 p-4 mb-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-1",children:"Return rules"}),r&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:`inline-block px-2 py-0.5 text-xs font-medium mr-2 ${r.enabled,"bg-gray-100 text-gray-700"}`,children:r.enabled?"On":"Off"}),n.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"Enable return rules to simplify return management, set up return fees, return shipping and define final sale items"})]})]}),n.jsx("button",{className:"px-3 py-1.5 bg-gray-900 text-white text-sm hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:t,onClick:()=>a(r?"/settings/policies/manage-return-rules":"/settings/policies/manage-return-rules/new"),children:r?"Manage":"Create rule"})]})}),n.jsxs("div",{className:"bg-white border border-gray-200 mb-4",children:[n.jsxs("div",{className:"p-4 pb-3 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Written policies"}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Policies are linked in the footer of checkout and can be added to your online store menu"})]}),n.jsx("button",{className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-colors",children:n.jsx(Ud,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"border-t border-gray-200",children:[n.jsx(Lg,{icon:n.jsx(Hu,{className:"w-4 h-4"}),label:"Return and refund policy",right:z?void 0:n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-700",children:"No policy set"}),onClick:()=>{M(z?.returnRefundPolicy||""),Ie(!0)}}),n.jsx("div",{className:"border-t border-gray-200"}),n.jsx(Lg,{icon:n.jsx(yS,{className:"w-4 h-4"}),label:"Privacy policy",right:N?void 0:n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-700",children:"No policy set"}),onClick:()=>{ze(N?.privacyPolicy||""),we(!0)}}),n.jsx("div",{className:"border-t border-gray-200"}),n.jsx(Lg,{icon:n.jsx(qD,{className:"w-4 h-4"}),label:"Terms of service",right:v?void 0:n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-700",children:"No policy set"}),onClick:()=>{fe(v?.termsPolicy||""),Y(!0)}}),n.jsx("div",{className:"border-t border-gray-200"}),n.jsx(Lg,{icon:n.jsx(hp,{className:"w-4 h-4"}),label:"Shipping policy",right:m?void 0:n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-700",children:"No policy set"}),onClick:()=>{Te(m?.shippingPolicy||""),oe(!0)}}),n.jsx("div",{className:"border-t border-gray-200"}),n.jsx(Lg,{icon:n.jsx(r4,{className:"w-4 h-4"}),label:"Contact information",right:l?void 0:n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-700",children:"Required"}),onClick:()=>{I(l?.contactInfo||""),A(!0)}})]})]}),n.jsxs(un,{open:Ne,onClose:()=>Ie(!1),title:"Return and refund policy",maxWidth:"lg",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>Ie(!1),className:"px-3 py-1.5 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),z?n.jsx("button",{className:`px-3 py-1.5 text-sm text-white transition-colors ${!ne.trim()||ne===(z?.returnRefundPolicy||"")?"bg-gray-400 cursor-not-allowed":"bg-gray-900 hover:bg-gray-800"}`,disabled:!ne.trim()||ne===(z?.returnRefundPolicy||""),onClick:async()=>{z?._id&&(await W(z._id,{returnRefundPolicy:ne}),Ie(!1))},children:"Update"}):n.jsx("button",{className:`px-3 py-1.5 text-sm text-white transition-colors ${!ne.trim()||!o?"bg-gray-400 cursor-not-allowed":"bg-gray-900 hover:bg-gray-800"}`,disabled:!ne.trim()||!o,onClick:async()=>{o&&(await V({storeId:o,returnRefundPolicy:ne}),Ie(!1))},children:"Publish"})]}),children:[n.jsxs("div",{className:"border border-gray-200 p-3 mb-3",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("p",{className:"text-xs text-gray-600",children:["Templates aren't legal advice. By using policy templates, you agree that you've read and agree to the"," ",n.jsxs("button",{className:"text-gray-700 hover:underline cursor-pointer",onClick:()=>J(he=>!he),children:["disclaimer ",U?"":""]})]}),n.jsx("button",{className:"px-3 py-1.5 text-xs border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",onClick:ce,children:"Insert template"})]}),U&&n.jsxs("div",{className:"border border-gray-200 p-3 mt-3 bg-gray-50",children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-2",children:"Generated policies disclaimer"}),n.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"The materials below are for informational purposes only and do not constitute advertising, a solicitation or legal advice. Automated translations from the original English versions are available for convenience only."})]})]}),n.jsxs("div",{className:"border border-gray-200",children:[n.jsx(Dg,{}),n.jsx("div",{className:"p-3",children:n.jsx("textarea",{className:"w-full min-h-[200px] px-3 py-1.5 border border-gray-200 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 resize-y",placeholder:"Add your return and refund policy...",value:ne,onChange:he=>M(he.target.value),rows:8})})]})]}),n.jsxs(un,{open:Z,onClose:()=>A(!1),title:"Contact information",maxWidth:"lg",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>A(!1),className:"px-3 py-1.5 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),l?n.jsx("button",{className:`px-3 py-1.5 text-sm text-white transition-colors ${!q.trim()||q===(l?.contactInfo||"")?"bg-gray-400 cursor-not-allowed":"bg-gray-900 hover:bg-gray-800"}`,disabled:!q.trim()||q===(l?.contactInfo||""),onClick:async()=>{l?._id&&(await h(l._id,{contactInfo:q}),A(!1))},children:"Update"}):n.jsx("button",{className:`px-3 py-1.5 text-sm text-white transition-colors ${!q.trim()||!o?"bg-gray-400 cursor-not-allowed":"bg-gray-900 hover:bg-gray-800"}`,disabled:!q.trim()||!o,onClick:async()=>{o&&(await d({storeId:o,contactInfo:q}),A(!1))},children:"Publish"})]}),children:[n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Contact information is required on your website if you are selling into the European Union."}),n.jsxs("div",{className:"border border-gray-200 p-3 mb-3",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("p",{className:"text-xs text-gray-600",children:["Templates aren't legal advice. By using policy templates, you agree that you've read and agree to the"," ",n.jsxs("button",{className:"text-gray-700 hover:underline cursor-pointer",onClick:()=>D(he=>!he),children:["disclaimer ",K?"":""]})]}),n.jsx("button",{className:"px-3 py-1.5 text-xs border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",onClick:ue,children:"Insert template"})]}),K&&n.jsxs("div",{className:"border border-gray-200 p-3 mt-3 bg-gray-50",children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-2",children:"Generated policies disclaimer"}),n.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"The materials below are for informational purposes only and do not constitute advertising, a solicitation or legal advice. Automated translations from the original English versions are available for convenience only."}),n.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"You should consult independent legal advice in all regions where these materials will be used before publishing them. You are solely responsible for verifying the accuracy of all content, including any translated content, and should read the generated information with care and modify, delete or add all and any areas as necessary. Use of, access to or transmission of such materials and information or any of the links contained herein is not intended to create, and receipt thereof does not constitute formation of, an attorney-client relationship between Shopify and the user or browser."}),n.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"You should not rely upon this information for any purpose without seeking legal advice from a licensed attorney in the relevant regions. The information contained is provided only as general information and may or may not reflect the most current legal developments or an accurate translation; accordingly, information is not promised or guaranteed to be correct or complete. Shopify expressly disclaims all liability in respect of any actions taken or not taken based on any or all of the contents of this website, or any inaccuracies in any of the content."}),n.jsx("p",{className:"text-xs text-gray-600",children:"Further, Shopify does not necessarily endorse and is not responsible for any thirdparty content that may be accessed through this information."})]})]}),n.jsxs("div",{className:"border border-gray-200 mb-3",children:[n.jsx(Dg,{}),n.jsx("div",{className:"p-3",children:n.jsx("textarea",{className:"w-full min-h-[200px] px-3 py-1.5 border border-gray-200 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 resize-y",placeholder:"Add your contact information...",value:q,onChange:he=>I(he.target.value),rows:8})})]}),n.jsxs("div",{className:"border border-gray-200 p-3 flex items-center gap-3",children:[n.jsx("div",{className:"w-6 h-6 bg-gray-900 text-white flex items-center justify-center font-medium text-xs",children:"S"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm text-gray-900",children:"Shopify Inbox"}),n.jsx("p",{className:"text-xs text-gray-600",children:"4.7 "})]}),n.jsx("button",{className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-colors",children:n.jsx(Ud,{className:"w-4 h-4"})})]})]}),n.jsxs(un,{open:G,onClose:()=>Y(!1),title:"Terms of service",maxWidth:"lg",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>Y(!1),className:"px-3 py-1.5 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),v?n.jsx("button",{className:`px-3 py-1.5 text-sm text-white transition-colors ${!Se.trim()||Se===(v?.termsPolicy||"")?"bg-gray-400 cursor-not-allowed":"bg-gray-900 hover:bg-gray-800"}`,disabled:!Se.trim()||Se===(v?.termsPolicy||""),onClick:async()=>{v?._id&&(await k(v._id,{termsPolicy:Se}),Y(!1))},children:"Update"}):n.jsx("button",{className:`px-3 py-1.5 text-sm text-white transition-colors ${!Se.trim()||!o?"bg-gray-400 cursor-not-allowed":"bg-gray-900 hover:bg-gray-800"}`,disabled:!Se.trim()||!o,onClick:async()=>{o&&(await S({storeId:o,termsPolicy:Se}),Y(!1))},children:"Publish"})]}),children:[n.jsxs("div",{className:"border border-gray-200 p-3 mb-3",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("p",{className:"text-xs text-gray-600",children:["Templates aren't legal advice. By using policy templates, you agree that you've read and agree to the"," ",n.jsxs("button",{className:"text-gray-700 hover:underline cursor-pointer",onClick:()=>Ae(he=>!he),children:["disclaimer ",Ee?"":""]})]}),n.jsx("button",{className:"px-3 py-1.5 text-xs border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",onClick:xe,children:"Insert template"})]}),Ee&&n.jsxs("div",{className:"border border-gray-200 p-3 mt-3 bg-gray-50",children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-2",children:"Generated policies disclaimer"}),n.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"The materials below are for informational purposes only and do not constitute advertising, a solicitation or legal advice. Automated translations from the original English versions are available for convenience only."}),n.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"You should consult independent legal advice in all regions where these materials will be used before publishing them. You are solely responsible for verifying the accuracy of all content, including any translated content, and should read the generated information with care and modify, delete or add all and any areas as necessary. Use of, access to or transmission of such materials and information or any of the links contained herein is not intended to create, and receipt thereof does not constitute formation of, an attorney-client relationship between Shopify and the user or browser."}),n.jsx("p",{className:"text-xs text-gray-600",children:"Further, Shopify does not necessarily endorse and is not responsible for any thirdparty content that may be accessed through this information."})]})]}),n.jsxs("div",{className:"border border-gray-200 mb-3",children:[n.jsx(Dg,{}),n.jsx("div",{className:"p-3",children:n.jsx("textarea",{className:"w-full min-h-[200px] px-3 py-1.5 border border-gray-200 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 resize-y",placeholder:"Add your terms of service...",value:Se,onChange:he=>fe(he.target.value),rows:8})})]})]}),n.jsx(un,{open:Q,onClose:()=>oe(!1),title:"Shipping policy",maxWidth:"lg",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>oe(!1),className:"px-3 py-1.5 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),m?n.jsx("button",{className:`px-3 py-1.5 text-sm text-white transition-colors ${!re.trim()||re===(m?.shippingPolicy||"")?"bg-gray-400 cursor-not-allowed":"bg-gray-900 hover:bg-gray-800"}`,disabled:!re.trim()||re===(m?.shippingPolicy||""),onClick:async()=>{m?._id&&(await b(m._id,{shippingPolicy:re}),oe(!1))},children:"Update"}):n.jsx("button",{className:`px-3 py-1.5 text-sm text-white transition-colors ${!re.trim()||!o?"bg-gray-400 cursor-not-allowed":"bg-gray-900 hover:bg-gray-800"}`,disabled:!re.trim()||!o,onClick:async()=>{o&&(await x({storeId:o,shippingPolicy:re}),oe(!1))},children:"Publish"})]}),children:n.jsxs("div",{className:"border border-gray-200",children:[n.jsx(Dg,{}),n.jsx("div",{className:"p-3",children:n.jsx("textarea",{className:"w-full min-h-[200px] px-3 py-1.5 border border-gray-200 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 resize-y",placeholder:"Add your shipping policy...",value:re,onChange:he=>Te(he.target.value),rows:8})})]})}),n.jsxs(un,{open:qe,onClose:()=>we(!1),title:"Privacy policy",maxWidth:"lg",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>we(!1),className:"px-3 py-1.5 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),N?n.jsx("button",{className:`px-3 py-1.5 text-sm text-white transition-colors ${!Oe.trim()||Oe===(N?.privacyPolicy||"")?"bg-gray-400 cursor-not-allowed":"bg-gray-900 hover:bg-gray-800"}`,disabled:!Oe.trim()||Oe===(N?.privacyPolicy||""),onClick:async()=>{N?._id&&(await F(N._id,{privacyPolicy:Oe}),we(!1))},children:"Update"}):n.jsx("button",{className:`px-3 py-1.5 text-sm text-white transition-colors ${!Oe.trim()||!o?"bg-gray-400 cursor-not-allowed":"bg-gray-900 hover:bg-gray-800"}`,disabled:!Oe.trim()||!o,onClick:async()=>{o&&(await R({storeId:o,privacyPolicy:Oe}),we(!1))},children:"Publish"})]}),children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Use automated policy"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Keep policy content in sync with store settings and latest Shopify templates."})]}),n.jsx("div",{className:"flex items-center",children:n.jsx("button",{className:`relative w-11 h-6 transition-colors ${We?"bg-gray-900":"bg-gray-300"}`,onClick:()=>pt(!We),children:n.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white transition-transform ${We?"translate-x-5":"translate-x-0"}`})})})]}),n.jsxs("div",{className:"border border-gray-200 mb-3",children:[n.jsx(Dg,{variant:"privacy"}),n.jsx("div",{className:"p-3",children:n.jsx("textarea",{className:"w-full min-h-[300px] px-3 py-1.5 border-none text-sm focus:outline-none resize-y",placeholder:"Add your privacy policy...",value:Oe,onChange:he=>ze(he.target.value),rows:12})})]}),n.jsxs("p",{className:"text-xs text-gray-600 mb-3",children:["This Privacy Policy is not legal advice, and you are responsible for ensuring its accuracy and complying with applicable laws. By using this policy you agree that you've read and agree to the"," ",n.jsxs("button",{className:"text-gray-700 hover:underline cursor-pointer",onClick:()=>ee(he=>!he),children:["disclaimer ",Pt?"":""]})]}),Pt&&n.jsxs("div",{className:"border border-gray-200 p-3 bg-gray-50",children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-2",children:"Generated policies disclaimer"}),n.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"The materials below are for informational purposes only and do not constitute advertising, a solicitation or legal advice. Automated translations from the original English versions are available for convenience only."}),n.jsx("p",{className:"text-xs text-gray-600",children:"You should consult independent legal advice in all regions where these materials will be used before publishing them. You are solely responsible for verifying the accuracy of all content, including any translated content, and should read the generated information with care and modify, delete or add all and any areas as necessary."})]})]})]})})},rge=()=>{const{roleId:a}=qa(),r=mr(),{permissions:e,loading:t,error:s,fetchAll:o}=sP(),{roles:i,fetchByStoreId:l,update:c}=GS(),{activeStoreId:d}=fn(),h=f.useMemo(()=>i.find(re=>re._id===a),[i,a]);f.useEffect(()=>{e.length===0&&!t&&o().catch(()=>{})},[]),f.useEffect(()=>{!h&&d&&l(d).catch(()=>{})},[d,h]);const[m,y]=f.useState(""),[x,b]=f.useState(new Set),[v,j]=f.useState(new Set),[S,k]=f.useState(""),[N,P]=f.useState(""),[R,F]=f.useState(!1);f.useEffect(()=>{h&&(k(h.name||""),P(h.description||""),j(new Set(h.permissions||[])))},[h]);const z=f.useMemo(()=>{const re=new Map;e.forEach(Y=>{re.set(Y.key,{key:Y.key,name:Y.name,isLeaf:Y.isLeaf??!0,parentKey:Y.parentKey??null,order:Y.order,resource:Y.resource,children:[]})});const Te=[];re.forEach(Y=>{Y.parentKey&&re.has(Y.parentKey)?re.get(Y.parentKey).children.push(Y):Te.push(Y)});const G=Y=>{Y.sort((Se,fe)=>(Se.order??0)-(fe.order??0)||Se.name.localeCompare(fe.name)),Y.forEach(Se=>G(Se.children))};return G(Te),Te},[e]),H=f.useMemo(()=>{const re=[],Te=G=>{G.isLeaf||G.children.length===0?re.push(G.key):G.children.forEach(Te)};return z.forEach(Te),re},[z]);f.useEffect(()=>{if(!H.length)return;const re=new Set(H);j(Te=>{const G=new Set;return Te.forEach(Y=>{re.has(Y)&&G.add(Y)}),G})},[H]);const V=re=>{b(Te=>{const G=new Set(Te);return G.has(re)?G.delete(re):G.add(re),G})},W=re=>re.isLeaf||re.children.length===0?[re.key]:re.children.flatMap(W),Z=re=>{const Te=W(re),G=Te.filter(Y=>v.has(Y));return{total:Te.length,selected:G.length,checked:G.length===Te.length&&Te.length>0,indeterminate:G.length>0&&G.length<Te.length}},A=re=>{const Te=W(re);j(G=>{const Y=new Set(G);return Te.every(fe=>Y.has(fe))?Te.forEach(fe=>Y.delete(fe)):Te.forEach(fe=>Y.add(fe)),Y})},q=f.useMemo(()=>{const re=z;if(!m.trim())return re;const Te=m.toLowerCase(),G=Y=>{const Se=Y.name.toLowerCase().includes(Te)||Y.key.toLowerCase().includes(Te),fe=Y.children.map(G).filter(Ee=>!!Ee);return Se||fe.length>0?{...Y,children:fe}:null};return re.map(G).filter(Y=>!!Y)},[z,m]),I=f.useMemo(()=>Array.from(v).sort(),[v]),K=f.useMemo(()=>h?[...h.permissions||[]].sort():[],[h]),D=f.useMemo(()=>{if(!h)return!1;const re=S.trim()!==(h.name||""),Te=N.trim()!==(h.description||""),G=I.length!==K.length||I.some((Y,Se)=>Y!==K[Se]);return re||Te||G},[h,S,N,K,I]),Q=f.useCallback(async()=>{if(!h||!a)return;const re=S.trim(),Te=N.trim();if(!re){yr.dismiss(),yr.error("Role name is required");return}if(v.size===0){yr.dismiss(),yr.error("Select at least one permission");return}try{F(!0),yr.dismiss(),await c(a,{name:re,description:Te,permissions:Array.from(v)}),yr.dismiss(),yr.success("Role updated")}catch(G){const Y=G?.response?.data?.message||G?.message||"Failed to update role";yr.dismiss(),yr.error(Y)}finally{F(!1)}},[h,a,S,N,v,c]),oe=(re,Te=0)=>{const G=re.children.length>0,Y=Z(re),Se=x.has(re.key)||!G,fe=Te*1.5;return n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center py-1.5",style:{paddingLeft:`${fe}rem`},children:[G?n.jsx("button",{onClick:()=>V(re.key),className:"p-0.5 text-gray-600 hover:text-gray-700 mr-1",children:Se?n.jsx(pp,{className:"w-4 h-4"}):n.jsx(Is,{className:"w-4 h-4"})}):n.jsx("div",{className:"w-6 mr-1"}),n.jsx("input",{type:"checkbox",ref:Ee=>{Ee&&(Ee.indeterminate=!Y.checked&&Y.indeterminate)},checked:Y.checked,onChange:()=>A(re),className:"w-4 h-4 text-gray-900 focus:ring-gray-400 mr-2"}),n.jsx("span",{className:"text-sm text-gray-900",children:re.name}),G&&n.jsxs("span",{className:"text-xs text-gray-600 ml-auto mr-2",children:[Y.selected,"/",Y.total]})]}),G&&n.jsx("div",{className:Se?"block":"hidden",children:re.children.map(Ee=>oe(Ee,Te+1))})]},re.key)};return n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:S||"Role"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:()=>r("/settings/users/roles"),className:"px-3 py-1.5 text-sm border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors flex items-center gap-1.5",children:[n.jsx(Hn,{className:"w-4 h-4"}),"Back to roles"]}),n.jsx("button",{disabled:!D||v.size===0||!h||R,onClick:Q,className:"px-3 py-1.5 text-sm text-white bg-gray-900 hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:R?"Saving":"Save"})]})]}),n.jsx("div",{className:"border border-gray-200 bg-white p-4 mb-4",children:n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Name"}),n.jsx("input",{type:"text",value:S,onChange:re=>k(re.target.value),className:"w-full border border-gray-200 px-3 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Description"}),n.jsx("textarea",{rows:2,value:N,onChange:re=>P(re.target.value),className:"w-full border border-gray-200 px-3 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 resize-y"})]})]})}),n.jsxs("div",{className:"border border-gray-200 bg-white p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-1",children:"Permissions"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Selected permissions for this role."}),t&&n.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[n.jsx("div",{className:"w-4 h-4 border-2 border-gray-300 border-t-gray-900 rounded-full animate-spin"}),n.jsx("span",{className:"text-sm",children:"Loading permissions"})]}),s&&n.jsx("p",{className:"text-sm text-red-600",children:s}),!t&&!s&&n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Ro,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-600"}),n.jsx("input",{type:"text",placeholder:"Search",value:m,onChange:re=>y(re.target.value),className:"w-full border border-gray-200 bg-gray-50 pl-10 pr-3 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsx("div",{children:q.map(re=>oe(re))})]})]})]})})},nge=()=>{const a=mr(),{roles:r,loading:e,fetchByStoreId:t}=GS(),{activeStoreId:s}=fn(),o=gr.useMemo(()=>r.map(x=>({id:x._id,name:x.name,users:0})),[r]),[i,l]=gr.useState({});f.useEffect(()=>{s&&t(s).catch(()=>{})},[s]);const c=x=>{l(b=>({...b,[x]:!b[x]}))},d=()=>{const x=o.every(v=>i[v.id]),b={};o.forEach(v=>{b[v.id]=!x}),l(b)},h=o.filter(x=>i[x.id]).length,m=o.length>0&&h===o.length,y=o.length>0&&h>0&&h<o.length;return n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Roles"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{className:"px-3 py-1.5 text-sm border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors flex items-center gap-1.5",children:[n.jsx(uS,{className:"w-4 h-4"}),"Export"]}),n.jsxs("button",{onClick:()=>a("/settings/users/roles/new"),className:"px-3 py-1.5 text-sm text-white bg-gray-900 hover:bg-gray-800 transition-colors flex items-center gap-1.5",children:[n.jsx(na,{className:"w-4 h-4"}),"Add role"]})]})]}),n.jsxs("div",{className:"border border-gray-200 bg-white",children:[n.jsxs("div",{className:"flex items-center gap-2 p-3",children:[n.jsx("button",{className:"px-3 py-1 text-xs border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"All"}),n.jsx("div",{className:"flex-1"}),n.jsx("button",{className:"p-1 text-gray-600 hover:text-gray-700 hover:bg-gray-50 transition-colors",children:n.jsx(Ro,{className:"w-4 h-4"})}),n.jsx("button",{className:"p-1 text-gray-600 hover:text-gray-700 hover:bg-gray-50 transition-colors",children:n.jsx(XT,{className:"w-4 h-4"})})]}),n.jsx("hr",{className:"border-gray-200"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-white border-b border-gray-200",children:[n.jsx("th",{className:"w-12 px-3 py-2 text-left",children:n.jsx("input",{type:"checkbox",ref:x=>{x&&(x.indeterminate=y)},checked:m,onChange:d,className:"w-4 h-4 text-gray-900 focus:ring-gray-400","aria-label":"select all roles"})}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-900",children:"Name"}),n.jsx("th",{className:"px-3 py-2 text-right text-sm font-medium text-gray-900",children:"Users"})]})}),n.jsxs("tbody",{children:[e&&n.jsx("tr",{children:n.jsx("td",{colSpan:3,className:"px-3 py-4 text-sm text-gray-600 text-center",children:"Loading..."})}),!e&&o.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:3,className:"px-3 py-4 text-sm text-gray-600 text-center",children:"Currently you have no roles added."})}),!e&&o.length>0&&o.map(x=>n.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>a(`/settings/users/roles/${x.id}`),children:[n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"checkbox",checked:!!i[x.id],onChange:()=>c(x.id),onClick:b=>b.stopPropagation(),className:"w-4 h-4 text-gray-900 focus:ring-gray-400","aria-label":`select role ${x.name}`})}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:x.name}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900 text-right",children:x.users})]},x.id))]})]})}),n.jsx("div",{className:"p-3 text-center border-t border-gray-200",children:n.jsxs("p",{className:"text-xs text-gray-600",children:["Learn more about ",n.jsx("a",{href:"#",className:"text-gray-700 hover:underline",children:"roles"})]})})]})]})})};function age({onBack:a}){return n.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("button",{onClick:a,className:"cursor-pointer mr-2 p-1.5 text-gray-500 hover:bg-black/5 hover:text-gray-700 rounded transition-colors","aria-label":"Go back",children:n.jsx(Hn,{className:"w-4 h-4"})}),n.jsx("h2",{className:"text-sm font-medium text-gray-700",children:"Settings"})]})})}function sge({child:a,isActive:r,onChildClick:e}){return n.jsx("li",{children:n.jsx("button",{onClick:()=>e(a.path),className:`w-full flex items-center gap-2 px-3 py-1.5 pl-10 text-gray-600 hover:bg-gray-50 transition-colors text-left ${r?"bg-gray-50 text-gray-900":""}`,children:n.jsx("span",{className:"text-xs",children:a.text})})})}function oge({children:a,isActivePath:r,onChildClick:e}){return n.jsx("ul",{className:"p-0 m-0 list-none",children:a.map(t=>{const s=r(t.path);return n.jsx(sge,{child:t,isActive:s,onChildClick:e},t.path)})})}function ige({item:a,isCurrentPath:r,isExpanded:e,hasChildren:t,onItemClick:s,onChildClick:o,isActivePath:i}){const l=a.icon;return n.jsxs("li",{children:[n.jsxs("button",{onClick:()=>s(a),className:`w-full flex items-center gap-3 px-4 py-2.5 text-gray-700 hover:bg-gray-50 transition-colors text-left ${r?"bg-gray-50":""}`,children:[n.jsx(l,{className:"w-4 h-4 shrink-0"}),n.jsx("span",{className:"flex-1 text-sm font-medium",children:a.text}),t&&n.jsx("span",{className:"shrink-0",children:e?n.jsx(pp,{className:"w-4 h-4 text-gray-500"}):n.jsx(Is,{className:"w-4 h-4 text-gray-500"})})]}),t&&n.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${e?"max-h-[1000px] opacity-100":"max-h-0 opacity-0"}`,children:n.jsx(oge,{children:a.children,isActivePath:i,onChildClick:o})})]})}function lge({items:a,currentPath:r,expanded:e,isActivePath:t,onItemClick:s,onChildClick:o}){return n.jsx("ul",{className:"p-0 m-0 list-none",children:a.map(i=>{const l=Array.isArray(i.children)&&i.children.length>0,c=i.path||i.text,d=l?i.children.some(y=>t(y.path)):!1,h=l&&(d||!!i.path&&r.startsWith(`${i.path}/`))||t(i.path),m=l?e[c]??d:!1;return n.jsx(ige,{item:i,isCurrentPath:h,isExpanded:m,hasChildren:l,onItemClick:s,onChildClick:o,isActivePath:t},c)})})}const cge=240,pT=[{text:"General",icon:hS,path:"/settings/general"},{text:"Plan",icon:e9,path:"/settings/plan"},{text:"Billing",icon:L1,path:"/settings/billing"},{text:"Users",icon:py,path:"/settings/users",children:[{text:"Roles",icon:r4,path:"/settings/users/roles"},{text:"Security",icon:yS,path:"/settings/users/security"}]},{text:"Payments",icon:L1,path:"/settings/payments"},{text:"Checkout",icon:Sb,path:"/settings/checkout"},{text:"Customer Accounts",icon:o9,path:"/settings/customer-accounts"},{text:"Shipping and delivery",icon:hp,path:"/settings/shipping-and-delivery"},{text:"Taxes and duties",icon:zd,path:"/settings/taxes-and-duties"},{text:"Locations",icon:Vh,path:"/settings/locations"},{text:"Markets",icon:Oo,path:"/settings/markets"},{text:"Domains",icon:J0,path:"/settings/domains"},{text:"Customer Events",icon:fS,path:"/settings/customer-events"},{text:"Notifications",icon:My,path:"/settings/notifications"},{text:"Metafields and metaobjects",icon:pS,path:"/settings/metafields-and-metaobjects"},{text:"Languages",icon:J0,path:"/settings/languages"},{text:"Customer Privacy",icon:xS,path:"/settings/customer-privacy"},{text:"Policies",icon:zd,path:"/settings/policies"}];function dge({currentPath:a,onNavigate:r,onBack:e}){const t=f.useMemo(()=>{const h={};return pT.forEach(m=>{if(m.children){const y=m.children.some(b=>b.path===a),x=m.path&&a.startsWith(m.path);h[m.path||m.text]=y||!!x}}),h},[a]),[s,o]=f.useState(t);f.useEffect(()=>{o(t)},[t]);const i=f.useCallback(h=>!!h&&a===h,[a]),l=f.useCallback(h=>{o(m=>({...m,[h]:!m[h]}))},[]),c=f.useCallback(h=>{h.children&&h.children.length>0&&l(h.path||h.text),h.path&&r(h.path)},[l,r]),d=f.useCallback(h=>{h&&r(h)},[r]);return n.jsxs("aside",{className:"fixed bg-white border-r border-gray-200 left-0 top-[60px] h-[calc(100vh-60px)] w-[240px] flex flex-col shrink-0 z-50",style:{width:`${cge}px`},children:[n.jsx(age,{onBack:e}),n.jsx("nav",{className:"flex-1 overflow-y-auto",children:n.jsx(lge,{items:pT,currentPath:a,expanded:s,isActivePath:i,onItemClick:c,onChildClick:d})})]})}const uge=60,fge=()=>{const a=Pi(),r=mr(),e=a.pathname,t=f.useCallback(o=>{r(o)},[r]),s=f.useCallback(()=>{r("/")},[r]);return n.jsxs("div",{style:{minHeight:`calc(100vh - ${uge}px)`},children:[n.jsx(dge,{currentPath:e,onNavigate:t,onBack:s}),n.jsx("main",{className:"overflow-y-auto w-full",children:n.jsx(YR,{})})]})},E6=({title:a="Settings"})=>n.jsxs(Et,{sx:{p:3},children:[n.jsx(et,{variant:"h4",sx:{mb:3,fontWeight:600},children:a}),n.jsx(ta,{sx:{p:3},children:n.jsx(et,{variant:"body1",color:"text.secondary",children:"This settings section is not implemented yet."})})]}),pge=()=>n.jsx(E6,{title:"General"}),hge=({open:a,onClose:r,formData:e,onFormChange:t,onSubmit:s})=>{const o=[{value:"box",label:"Box"},{value:"envelope",label:"Envelope"},{value:"soft_package",label:"Soft Package"}],i=[{value:"cm",label:"Centimeters (cm)"},{value:"in",label:"Inches (in)"}],l=[{value:"g",label:"Grams (g)"},{value:"kg",label:"Kilograms (kg)"},{value:"oz",label:"Ounces (oz)"},{value:"lb",label:"Pounds (lb)"}];return n.jsx(un,{open:a,onClose:r,title:n.jsxs("div",{className:"flex justify-between items-center w-full",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Add New Package"}),n.jsx("button",{onClick:r,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:n.jsx(xs,{className:"w-5 h-5"})})]}),maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:s,className:"px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition-colors",children:"Add Package"})]}),children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Package Name"}),n.jsx("input",{type:"text",value:e.packageName,onChange:c=>t("packageName",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900",required:!0})]}),n.jsx("div",{children:n.jsx(Us,{label:"Package Type",value:e.packageType,options:o,onChange:c=>t("packageType",c),placeholder:"Select package type"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Dimensions"}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Length"}),n.jsx("input",{type:"number",value:e.length,onChange:c=>t("length",c.target.value),min:"0",step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Width"}),n.jsx("input",{type:"number",value:e.width,onChange:c=>t("width",c.target.value),min:"0",step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900",required:!0})]}),e.packageType!=="envelope"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Height"}),n.jsx("input",{type:"number",value:e.height,onChange:c=>t("height",c.target.value),min:"0",step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900",required:!0})]})]}),n.jsx("div",{className:"mt-4",children:n.jsx(Us,{label:"Unit",value:e.dimensionsUnit,options:i,onChange:c=>t("dimensionsUnit",c),placeholder:"Select unit"})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Weight"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Weight"}),n.jsx("input",{type:"number",value:e.weight,onChange:c=>t("weight",c.target.value),min:"0",step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900",required:!0})]}),n.jsx("div",{children:n.jsx(Us,{label:"Unit",value:e.weightUnit,options:l,onChange:c=>t("weightUnit",c),placeholder:"Select unit"})})]})]}),n.jsx("div",{children:n.jsx(fo,{checked:e.isDefault,onChange:c=>t("isDefault",c),label:"Set as default package"})})]})})},mge=({onAddClick:a})=>n.jsxs("div",{className:"bg-white/95 border border-gray-200 p-4 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Custom order fulfillment"}),n.jsx(Oa,{className:"w-4 h-4 text-gray-500"})]}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Add an email for a custom fulfillment service that fulfills orders for you"}),n.jsxs("button",{onClick:a,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 bg-gray-50 text-gray-700 hover:bg-gray-100 transition-colors flex items-center gap-2",children:[n.jsx(na,{className:"w-4 h-4"}),"Add fulfillment service"]})]}),gge=({open:a,onClose:r,onConfirm:e,packageName:t})=>n.jsx(un,{open:a,onClose:r,title:"Delete Package",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"No, Cancel"}),n.jsx("button",{onClick:e,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:"Yes, Delete"})]}),children:n.jsxs("div",{children:[n.jsxs("p",{className:"text-base text-gray-900",children:["Do you really want to delete this package ",n.jsxs("strong",{children:['"',t,'"']}),"?"]}),n.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"This action cannot be undone."})]})}),yge=({onAddClick:a})=>n.jsxs("div",{className:"bg-white/95 border border-gray-200 p-4 mb-4",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-1",children:"Delivery customizations"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Customizations control how delivery options appear to buyers at checkout. You can hide, reorder, and rename delivery options."})]}),n.jsxs("button",{onClick:a,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors flex items-center gap-2",children:[n.jsx(na,{className:"w-4 h-4"}),"Add delivery customization"]})]}),xge=({estimatedDeliveryMode:a,onEstimatedDeliveryClick:r,onShopPromiseClick:e})=>{const t=()=>a==="manual"?"Manual":"Off";return n.jsxs("div",{className:"bg-white/95 border border-gray-200 p-4 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Delivery expectations"}),n.jsx(Oa,{className:"w-4 h-4 text-gray-500"})]}),n.jsxs("div",{onClick:r,className:"flex justify-between items-center pb-4 cursor-pointer hover:bg-gray-50 transition-colors -mx-4 px-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Estimated delivery dates"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Increase conversion and build trust with delivery dates on your store."})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`px-2 py-0.5 text-xs font-medium border border-gray-200 ${a==="manual"?"bg-gray-100 text-gray-900":"bg-white text-gray-600"}`,children:t()}),n.jsx(Pa,{className:"w-4 h-4 text-gray-500"})]})]}),n.jsx("div",{className:"border-t border-gray-200"}),n.jsxs("div",{onClick:e,className:"flex justify-between items-center pt-4 cursor-pointer hover:bg-gray-50 transition-colors -mx-4 px-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Shop Promise"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Highlight that you're an exceptional shipper with dates backed by a badge and guarantee."})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-700 text-xs font-medium border border-gray-200",children:"Off"}),n.jsx(Pa,{className:"w-4 h-4 text-gray-500"})]})]})]})},vge=({open:a,onClose:r,formData:e,onFormChange:t,onSubmit:s})=>{const o=[{value:"box",label:"Box"},{value:"envelope",label:"Envelope"},{value:"soft_package",label:"Soft Package"}],i=[{value:"cm",label:"Centimeters (cm)"},{value:"in",label:"Inches (in)"}],l=[{value:"g",label:"Grams (g)"},{value:"kg",label:"Kilograms (kg)"},{value:"oz",label:"Ounces (oz)"},{value:"lb",label:"Pounds (lb)"}];return n.jsx(un,{open:a,onClose:r,title:n.jsxs("div",{className:"flex justify-between items-center w-full",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Edit Package"}),n.jsx("button",{onClick:r,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:n.jsx(xs,{className:"w-5 h-5"})})]}),maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:s,className:"px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition-colors",children:"Save Changes"})]}),children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Package Name"}),n.jsx("input",{type:"text",value:e.packageName,onChange:c=>t("packageName",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900",required:!0})]}),n.jsx("div",{children:n.jsx(Us,{label:"Package Type",value:e.packageType,options:o,onChange:c=>t("packageType",c),placeholder:"Select package type"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Dimensions"}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Length"}),n.jsx("input",{type:"number",value:e.length,onChange:c=>t("length",c.target.value),min:"0",step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Width"}),n.jsx("input",{type:"number",value:e.width,onChange:c=>t("width",c.target.value),min:"0",step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900",required:!0})]}),e.packageType!=="envelope"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Height"}),n.jsx("input",{type:"number",value:e.height,onChange:c=>t("height",c.target.value),min:"0",step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900",required:e.packageType!=="envelope"})]})]}),n.jsx("div",{className:"mt-4",children:n.jsx(Us,{label:"Unit",value:e.dimensionsUnit,options:i,onChange:c=>t("dimensionsUnit",c),placeholder:"Select unit"})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Weight"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Weight"}),n.jsx("input",{type:"number",value:e.weight,onChange:c=>t("weight",c.target.value),min:"0",step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900",required:!0})]}),n.jsx("div",{children:n.jsx(Us,{label:"Unit",value:e.weightUnit,options:l,onChange:c=>t("weightUnit",c),placeholder:"Select unit"})})]})]}),n.jsx("div",{children:n.jsx(fo,{checked:e.isDefault,onChange:c=>t("isDefault",c),label:"Set as default package"})})]})})},bge=({open:a,onClose:r,estimatedDeliveryMode:e,onEstimatedDeliveryModeChange:t,estimatedFulfillmentTime:s,onEstimatedFulfillmentTimeChange:o,estimatedCustomTime:i,onEstimatedCustomTimeChange:l,estimatedCustomUnit:c,onEstimatedCustomUnitChange:d,onSave:h})=>{const m=[{value:"same-business-day",label:"Same business day"},{value:"next-business-day",label:"Next business day"},{value:"two-business-days",label:"2 business days"},{value:"custom",label:"Custom"}],y=[{value:"business-days",label:"business days"},{value:"weeks",label:"weeks"}];return n.jsx(un,{open:a,onClose:r,title:"Estimated delivery dates",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-900 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:h,className:"px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition-colors",children:"Save"})]}),children:n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"border border-gray-200 rounded-lg p-5 mb-6",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",checked:!0,readOnly:!0,className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-900"}),n.jsx("span",{className:"text-base font-semibold text-gray-900",children:"Standard"})]}),n.jsx("p",{className:"text-sm text-gray-600 ml-7 mt-1",children:"Tuesday, May 27Friday, May 30"})]}),n.jsx("p",{className:"font-semibold text-gray-900",children:"10.00"})]})}),n.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",checked:e==="off",onChange:()=>t("off"),className:"mt-1 w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-900"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-base font-semibold text-gray-900",children:"Off"}),n.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Only shows transit time or custom descriptions based on your"," ",n.jsx("a",{href:"#",className:"text-blue-600 hover:underline",children:"shipping rates"})]})]})]}),n.jsx("div",{className:"border-t border-gray-200 my-2"}),n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",checked:e==="manual",onChange:()=>t("manual"),className:"mt-1 w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-900"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-base font-semibold text-gray-900",children:"Manual"}),n.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Shows a delivery date range by adding your fulfillment time to the"," ",n.jsx("a",{href:"#",className:"text-blue-600 hover:underline",children:"transit time"})]})]})]})]})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Fulfillment time"}),n.jsx(Us,{label:"",value:s,options:m,onChange:o,disabled:e!=="manual",placeholder:"Select fulfillment time"})]}),e==="manual"&&s==="custom"&&n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mt-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Custom time"}),n.jsx("input",{type:"text",value:i,onChange:x=>l(x.target.value.replace(/[^0-9]/g,"")),placeholder:"Enter number",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900"})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Unit"}),n.jsx(Us,{label:"",value:c,options:y,onChange:x=>d(x),placeholder:"Select unit"})]})]}),n.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"Used to calculate manual dates"})]})})},wge=({loading:a,creating:r,hasSettings:e,onButtonClick:t})=>{const s=()=>a||r?"Loading...":e?"Manage":"Set up";return n.jsx("div",{className:"bg-white/95 border border-gray-200 p-4 mb-4",children:n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Local delivery"}),n.jsx(Oa,{className:"w-4 h-4 text-gray-500"})]}),n.jsx("p",{className:"text-xs text-gray-600",children:"Deliver orders to customers directly from your locations"})]}),n.jsx("button",{disabled:a||r,onClick:t,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:s()})]})})},jge=({open:a,onClose:r,onConfirm:e,creating:t})=>{const s=()=>{t||r()};return n.jsx(un,{open:a,onClose:s,title:"Enable local delivery?",maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,disabled:t,className:"px-4 py-2 text-gray-700 rounded-md hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"No"}),n.jsx("button",{onClick:e,disabled:t,className:"px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Yes"})]}),children:n.jsx("p",{className:"text-base text-gray-900",children:"Do you really want to set up local delivery for this store?"})})},Cge=({activeRulesCount:a=3,onRoutingRulesClick:r})=>n.jsxs("div",{className:"bg-white/95 border border-gray-200 p-4 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Order routing"}),n.jsx(Oa,{className:"w-4 h-4 text-gray-500"})]}),n.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Manage how locations are assigned to new orders"}),n.jsxs("div",{onClick:r,className:"p-3 border border-gray-200 bg-white cursor-pointer hover:bg-gray-50 transition-colors flex justify-between items-center",children:[n.jsxs("p",{className:"text-sm text-gray-900 font-medium",children:[a," routing rules active"]}),n.jsx(Pa,{className:"w-4 h-4 text-gray-500"})]})]}),Sge=({anchorEl:a,open:r,onClose:e,onEdit:t,onDelete:s})=>n.jsxs(V2,{anchorEl:a,open:r,onClose:e,children:[n.jsx(np,{onClick:t,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(oi,{className:"w-4 h-5 text-gray-500"}),n.jsx("span",{children:"Edit"})]})}),n.jsx(np,{onClick:s,children:n.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[n.jsx(Vs,{className:"w-4 h-5"}),n.jsx("span",{children:"Delete"})]})})]}),Nge=({package:a,index:r,totalPackages:e,onMenuOpen:t})=>n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between py-4",children:[n.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[n.jsx(hp,{className:"w-6 h-6 text-gray-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-base font-medium text-gray-900 mb-1",children:a.packageName}),n.jsxs("p",{className:"text-sm text-gray-600",children:[a.length,"  ",a.width,"  ",a.height," ",a.dimensionsUnit,", ",a.weight," ",a.weightUnit]})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[a.isDefault&&n.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs font-normal rounded",children:"Store default"}),n.jsx("button",{onClick:s=>t(s,a._id),className:"p-1 text-gray-500 hover:bg-gray-100 rounded transition-colors",children:n.jsx(gS,{className:"w-5 h-5"})})]})]}),r<e-1&&n.jsx("div",{className:"border-t border-gray-200"})]}),kge=({packages:a,onMenuOpen:r})=>a.length===0?null:n.jsx("div",{children:a.map((e,t)=>n.jsx(Nge,{package:e,index:t,totalPackages:a.length,onMenuOpen:r},e._id))}),_ge=({packages:a,onMenuOpen:r,onAddPackage:e})=>a.length===0?null:n.jsxs("div",{children:[n.jsx(kge,{packages:a,onMenuOpen:r}),n.jsx("div",{className:"border-t border-gray-200 my-2"}),n.jsxs("button",{onClick:e,className:"flex items-center gap-2 py-3 text-blue-600 hover:bg-gray-50 rounded transition-colors w-full",children:[n.jsx(na,{className:"w-5 h-5"}),n.jsx("span",{className:"text-base font-normal",children:"Add package"})]})]}),Ege=({onSetUpClick:a})=>n.jsx("div",{className:"bg-white/95 border border-gray-200 p-4 mb-4",children:n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Pickup in store"}),n.jsx(Oa,{className:"w-4 h-4 text-gray-500"})]}),n.jsx("p",{className:"text-xs text-gray-600",children:"Let customers pick up their orders at your locations"})]}),n.jsx("button",{onClick:a,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Set up"})]})}),Tge=({open:a,onClose:r,rateShippingFrom:e,onRateShippingFromChange:t,rateShippingSearch:s,onRateShippingSearchChange:o,ratePackageId:i,onRatePackageIdChange:l,rateWeight:c,onRateWeightChange:d,rateWeightUnit:h,onRateWeightUnitChange:m,packagings:y})=>{const x=[{value:"shop-location",label:"Shop location"},{value:"custom-origin",label:"Custom origin"}],b=[{value:"lb",label:"lb"},{value:"kg",label:"kg"}],v=y.length===0?[{value:"",label:"No packages available"}]:y.map(j=>({value:j._id,label:`${j.packageName}  ${j.length}  ${j.width}  ${j.height} ${j.dimensionsUnit}, ${j.weight} ${j.weightUnit}`}));return n.jsx(un,{open:a,onClose:r,title:"Shipping rate calculator",maxWidth:"md",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-900 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{disabled:!0,className:"px-4 py-2 bg-gray-300 text-gray-500 rounded-md cursor-not-allowed",children:"Calculate discounted rates"})]}),children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[n.jsxs("div",{className:"flex-1 space-y-6",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Shipping from"}),n.jsx(Us,{label:"",value:e,options:x,onChange:t,placeholder:"Select origin"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Shipping to"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-lg",children:""}),n.jsx("input",{type:"text",value:s,onChange:j=>o(j.target.value),placeholder:"Search destination",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900"})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Package"}),n.jsx(Us,{label:"",value:i||"",options:v,onChange:l,placeholder:"Select package"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Total weight"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:c,onChange:j=>d(j.target.value.replace(/[^0-9.]/g,"")),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900"}),n.jsx(Us,{label:"",value:h,options:b,onChange:j=>m(j),placeholder:"Unit"})]})]})]}),n.jsx("div",{className:"flex-1 md:flex-[0.8] md:border-l md:border-gray-100 md:pl-6 flex items-center justify-center text-center text-gray-600",children:"Calculate how much you'll save when you buy labels at discounted rates from Ziplofy"})]})})},Oge=({onCustomizeStoreNameClick:a,onPackingSlipTemplateClick:r})=>n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4 mb-4",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-3",children:"Shipping documents"}),n.jsxs("div",{children:[n.jsxs("div",{onClick:a,className:"flex justify-between items-center py-2 cursor-pointer hover:bg-gray-50 transition-colors",children:[n.jsx("p",{className:"text-xs text-gray-900",children:"Customize store name on shipping labels"}),n.jsx(Pa,{className:"w-4 h-4 text-gray-500"})]}),n.jsx("div",{className:"border-t border-gray-200"}),n.jsxs("div",{onClick:r,className:"flex justify-between items-center py-2 cursor-pointer hover:bg-gray-50 transition-colors",children:[n.jsx("p",{className:"text-xs text-gray-900",children:"Packing slip template"}),n.jsx(Pa,{className:"w-4 h-4 text-gray-500"})]})]})]}),Pge=({onCalculateRatesClick:a})=>n.jsx("div",{className:"border border-gray-200 bg-white/95 p-4 mb-4",children:n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Shipping labels"}),n.jsx(Oa,{className:"w-4 h-4 text-gray-500"})]}),n.jsx("p",{className:"text-xs text-gray-600",children:"Buy labels with the lowest rates. Manage your carriers to fulfill orders faster."})]}),n.jsxs("button",{onClick:a,className:"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors flex items-center gap-2",children:[n.jsx(WL,{className:"w-4 h-4"}),"Calculate rates"]})]})}),Age=({profileId:a,profileName:r,onClick:e})=>n.jsxs("div",{onClick:e,className:"p-3 mb-3 border border-gray-200 cursor-pointer hover:bg-gray-50 transition-colors flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[n.jsx(ap,{className:"w-4 h-4 text-gray-500"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:r})]}),n.jsx(Pa,{className:"w-4 h-4 text-gray-500"})]},a),Mge=({profiles:a})=>{const r=mr();return a.length===0?null:n.jsx("div",{className:"mb-4",children:a.map(e=>n.jsx(Age,{profileId:e._id,profileName:e.profileName,onClick:()=>r(`/settings/shipping-and-delivery/profiles/${e._id}`)},e._id))})},Ige=({open:a,onClose:r,splitShipping:e,onSplitShippingChange:t,onSave:s})=>n.jsx(un,{open:a,onClose:r,title:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Split shipping in checkout"}),n.jsx(Oa,{className:"w-5 h-5 text-gray-400"})]}),maxWidth:"sm",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-900 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:s,className:"px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition-colors",children:"Save"})]}),children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:e,onChange:o=>t(o.target.checked),className:"mt-1 w-4 h-4 text-gray-900 border-gray-300 rounded focus:ring-gray-900"}),n.jsx("div",{children:n.jsx("p",{className:"text-base font-semibold text-gray-900",children:"Show split shipping in checkout"})})]}),n.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:"Shipping is split when products in an order are fulfilled from different locations or belong to separate shipping profiles. Customers will be able to select the shipping method for each shipment separately."})]})}),Rge=({splitShipping:a,onToggle:r,onManage:e})=>n.jsx("div",{className:"mt-4 border border-gray-200 bg-white/95 px-4 py-3",children:n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Split shipping"}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Show products from different profiles or locations as separate shipments in checkout."})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:r,className:`px-2 py-1 text-xs font-medium transition-colors border border-gray-200 ${a?"bg-gray-100 text-gray-900":"bg-white text-gray-600 hover:bg-gray-50"}`,children:a?"On":"Off"}),n.jsx("button",{onClick:t=>{t.preventDefault(),e()},className:"text-gray-700 hover:text-gray-900 text-xs transition-colors",children:"Manage"})]})]})}),Lge=({onUpgradeClick:a,onLearnMoreClick:r})=>n.jsx("div",{className:"bg-white/95 border border-gray-200 p-4 mb-4",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-1",children:"Enable third-party calculated rates at checkout"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Connect your existing shipping carrier account to use your own rates"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:a,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 bg-gray-50 text-gray-700 hover:bg-gray-100 transition-colors",children:"Upgrade your plan"}),n.jsx("a",{href:"#",onClick:e=>{r&&(e.preventDefault(),r())},className:"text-gray-700 hover:text-gray-900 text-xs transition-colors",children:"Learn more"})]})]}),n.jsx("div",{className:"ml-4 w-16 h-16 flex items-center justify-center shrink-0",children:n.jsx(hp,{className:"w-12 h-12 text-gray-400"})})]})}),T6=f.createContext(void 0),Dge=({children:a})=>{const[r,e]=f.useState(null),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async m=>{s(!0),i(null);try{const{data:y}=await Ke.get(`/local-delivery-settings/store/${m}`);return e(y.data),y.data}catch(y){const x=y?.response?.data?.message||"Failed to fetch local delivery settings";if(i(x),y?.response?.status===404)return e(null),null;throw y}finally{s(!1)}},[]),c=f.useCallback(async m=>{s(!0),i(null);try{const{data:y}=await Ke.post("/local-delivery-settings",m);return e(y.data),y.data}catch(y){const x=y?.response?.data?.message||"Failed to create local delivery settings";throw i(x),y}finally{s(!1)}},[]),d=f.useCallback(()=>{e(null),i(null),s(!1)},[]),h={settings:r,loading:t,error:o,fetchLocalDeliverySettingsByStoreId:l,createLocalDeliverySettings:c,clearState:d};return n.jsx(T6.Provider,{value:h,children:a})},Fge=()=>{const a=f.useContext(T6);if(!a)throw new Error("useLocalDeliverySettings must be used within a LocalDeliverySettingsProvider");return a},O6=f.createContext(void 0),Bge=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),[l,c]=f.useState(0),d=f.useCallback(async v=>{s(!0),i(null);try{const j=await Ke.post("/shipping-profiles",v);if(j.data.success){const S=j.data.data;return e(k=>[S,...k]),c(k=>k+1),S}else throw new Error(j.data.message||"Failed to create shipping profile")}catch(j){const S=j.response?.data?.message||j.message||"Failed to create shipping profile";throw i(S),new Error(S)}finally{s(!1)}},[]),h=f.useCallback(async v=>{s(!0),i(null);try{const j=await Ke.get(`/shipping-profiles/store/${v}`);if(j.data.success){const S=j.data.data;return e(S),c(j.data.meta?.total||S.length),S}else throw new Error(j.data.message||"Failed to fetch shipping profiles")}catch(j){const S=j.response?.data?.message||j.message||"Failed to fetch shipping profiles";throw i(S),e([]),c(0),new Error(S)}finally{s(!1)}},[]),m=f.useCallback(async(v,j)=>{s(!0),i(null);try{if(!j.profileName||!j.profileName.trim())throw new Error("profileName is required");const S=await Ke.put(`/shipping-profiles/${v}`,j);if(S.data.success){const k=S.data.data;return e(N=>N.map(P=>P._id===v?k:P)),k}else throw new Error(S.data.message||"Failed to update shipping profile")}catch(S){const k=S.response?.data?.message||S.message||"Failed to update shipping profile";throw i(k),new Error(k)}finally{s(!1)}},[]),y=f.useCallback(async v=>{s(!0),i(null);try{const j=await Ke.delete(`/shipping-profiles/${v}`);if(!j.data.success)throw new Error(j.data.message||"Failed to delete shipping profile");const S=j.data.data.deletedId;return e(k=>k.filter(N=>N._id!==S)),c(k=>Math.max(0,k-1)),S}catch(j){const S=j.response?.data?.message||j.message||"Failed to delete shipping profile";throw i(S),new Error(S)}finally{s(!1)}},[]),x=f.useCallback(()=>{e([]),c(0),i(null)},[]),b=f.useMemo(()=>({shippingProfiles:r,loading:t,error:o,total:l,createShippingProfile:d,updateShippingProfile:m,deleteShippingProfile:y,getShippingProfilesByStoreId:h,clearShippingProfiles:x}),[r,t,o,l,d,m,y,h,x]);return n.jsx(O6.Provider,{value:b,children:a})},W2=()=>{const a=f.useContext(O6);if(a===void 0)throw new Error("useShippingProfiles must be used within a ShippingProfileProvider");return a},zge=()=>{const a=mr(),{packagings:r,createPackaging:e,updatePackaging:t,deletePackaging:s}=Ab(),{activeStoreId:o}=fn(),{shippingProfiles:i,getShippingProfilesByStoreId:l}=W2(),{settings:c,fetchLocalDeliverySettingsByStoreId:d,loading:h,createLocalDeliverySettings:m}=Fge(),[y,x]=f.useState(!1),[b,v]=f.useState(!1),[j,S]=f.useState(null),[k,N]=f.useState(!1),[P,R]=f.useState(null),[F,z]=f.useState(!0),[H,V]=f.useState(null),[W,Z]=f.useState(null),[A,q]=f.useState(!1),[I,K]=f.useState(!1),[D,Q]=f.useState("shop-location"),[oe,re]=f.useState("IN"),[Te,G]=f.useState(""),[Y,Se]=f.useState(null),[fe,Ee]=f.useState("1"),[Ae,qe]=f.useState("lb"),[we,Oe]=f.useState(!1),[ze,We]=f.useState("manual"),[pt,Pt]=f.useState("next-business-day"),[ee,Ne]=f.useState(""),[Ie,ne]=f.useState("business-days"),[M,U]=f.useState(!1),[J,ce]=f.useState(!1),ue=f.useCallback(()=>{h||(c?._id?a(`/settings/shipping-and-delivery/local_deliveries/${c._id}`):U(!0))},[h,c,a]),xe=f.useCallback(async()=>{if(o)try{ce(!0),await m({storeId:o}),U(!1)}catch(vt){console.error("Failed to create local delivery settings:",vt)}finally{ce(!1)}},[o,m]),[he,se]=f.useState({packageName:"",packageType:"box",length:"",width:"",height:"",dimensionsUnit:"cm",weight:"",weightUnit:"kg",isDefault:!1}),Le=f.useCallback(()=>{x(!0),se({packageName:"",packageType:"box",length:"",width:"",height:"",dimensionsUnit:"cm",weight:"",weightUnit:"kg",isDefault:!1})},[]),Ue=f.useCallback(()=>x(!1),[]),Ge=f.useCallback((vt,Jt)=>{se(wr=>({...wr,[vt]:Jt}))},[]),ie=f.useCallback(async()=>{if(!o)return;const vt={storeId:o,packageName:he.packageName,packageType:he.packageType,length:parseFloat(he.length),width:parseFloat(he.width),height:he.packageType==="envelope"?0:parseFloat(he.height),dimensionsUnit:he.dimensionsUnit,weight:parseFloat(he.weight),weightUnit:he.weightUnit,isDefault:he.isDefault};await e(vt),x(!1)},[o,he,e]),_e=f.useCallback(vt=>{const Jt=r.find(wr=>wr._id===vt);Jt&&(S(vt),se({packageName:Jt.packageName,packageType:Jt.packageType,length:String(Jt.length),width:String(Jt.width),height:String(Jt.height),dimensionsUnit:Jt.dimensionsUnit,weight:String(Jt.weight),weightUnit:Jt.weightUnit,isDefault:Jt.isDefault}),v(!0))},[r]),le=f.useCallback(()=>{v(!1),S(null)},[]),Xe=f.useCallback(async()=>{if(!j)return;const vt={packageName:he.packageName,packageType:he.packageType,length:parseFloat(he.length),width:parseFloat(he.width),height:he.packageType==="envelope"?0:parseFloat(he.height),dimensionsUnit:he.dimensionsUnit,weight:parseFloat(he.weight),weightUnit:he.weightUnit,isDefault:he.isDefault};await t(j,vt),v(!1),S(null)},[j,he,t]),Fe=f.useCallback((vt,Jt)=>{R({id:vt,name:Jt}),N(!0)},[]),dt=f.useCallback(async()=>{P&&(await s(P.id),N(!1),R(null))},[P,s]),lt=f.useCallback(()=>{N(!1),R(null)},[]),ft=f.useCallback((vt,Jt)=>{V(vt.currentTarget),Z(Jt)},[]),Ze=f.useCallback(()=>{V(null),Z(null)},[]),Nt=f.useCallback(()=>{W&&(_e(W),Ze())},[W,_e,Ze]),Mt=f.useCallback(()=>{if(W){const vt=r.find(Jt=>Jt._id===W);vt&&(Fe(W,vt.packageName),Ze())}},[W,r,Fe,Ze]);return f.useEffect(()=>{o&&(l(o).catch(vt=>{console.error("Failed to fetch shipping profiles:",vt)}),d(o).catch(vt=>{console.error("Failed to fetch local delivery settings:",vt)}))},[o,l,d]),f.useEffect(()=>{r.length>0&&!Y&&Se(r[0]._id)},[r,Y]),n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900 mb-4 border-b border-gray-200 pb-4",children:"Shipping and Delivery Settings"}),n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Shipping"}),n.jsx(Oa,{className:"w-4 h-4 text-gray-500"})]}),n.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Manage where you ship and how much you charge"}),n.jsx(Mge,{profiles:i}),n.jsx(Kc,{to:"/settings/shipping-and-delivery/profiles/create",className:"text-gray-600 hover:text-gray-900 transition-colors text-xs block mb-4",children:"Create a custom profile to set different rates or restrict destinations for specific products"}),n.jsx(Rge,{splitShipping:F,onToggle:()=>z(vt=>!vt),onManage:()=>q(!0)})]}),n.jsx(Ige,{open:A,onClose:()=>q(!1),splitShipping:F,onSplitShippingChange:vt=>z(vt),onSave:()=>q(!1)}),n.jsx(bge,{open:we,onClose:()=>Oe(!1),estimatedDeliveryMode:ze,onEstimatedDeliveryModeChange:vt=>We(vt),estimatedFulfillmentTime:pt,onEstimatedFulfillmentTimeChange:vt=>Pt(vt),estimatedCustomTime:ee,onEstimatedCustomTimeChange:vt=>Ne(vt),estimatedCustomUnit:Ie,onEstimatedCustomUnitChange:vt=>ne(vt),onSave:()=>Oe(!1)}),n.jsx(Tge,{open:I,onClose:()=>K(!1),rateShippingFrom:D,onRateShippingFromChange:vt=>Q(vt),rateShippingSearch:Te,onRateShippingSearchChange:vt=>G(vt),ratePackageId:Y,onRatePackageIdChange:vt=>Se(vt),rateWeight:fe,onRateWeightChange:vt=>Ee(vt),rateWeightUnit:Ae,onRateWeightUnitChange:vt=>qe(vt),packagings:r}),n.jsx(Pge,{onCalculateRatesClick:()=>K(!0)}),n.jsx(xge,{estimatedDeliveryMode:ze,onEstimatedDeliveryClick:()=>Oe(!0)}),n.jsx(Cge,{}),n.jsx(wge,{loading:h,creating:J,hasSettings:!!c,onButtonClick:ue}),n.jsx(Ege,{}),n.jsx(yge,{}),n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Packages"}),n.jsx(Oa,{className:"w-4 h-4 text-gray-500"})]}),n.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Used to calculate shipping rates at checkout and pre-selected when buying labels"}),n.jsx(_ge,{packages:r,onMenuOpen:ft,onAddPackage:Le}),r.length===0&&n.jsxs("button",{onClick:Le,className:"flex items-center gap-2 py-2 text-gray-700 hover:bg-gray-50 transition-colors w-full text-sm",children:[n.jsx(na,{className:"w-4 h-4"}),n.jsx("span",{className:"font-medium",children:"Add package"})]})]}),n.jsx(Sge,{anchorEl:H,open:!!H,onClose:Ze,onEdit:Nt,onDelete:Mt}),n.jsx(Lge,{}),n.jsx(Oge,{}),n.jsx(mge,{}),n.jsx(hge,{open:y,onClose:Ue,formData:he,onFormChange:Ge,onSubmit:ie}),n.jsx(jge,{open:M,onClose:()=>U(!1),onConfirm:xe,creating:J}),n.jsx(vge,{open:b,onClose:le,formData:he,onFormChange:Ge,onSubmit:Xe}),n.jsx(gge,{open:k,onClose:lt,onConfirm:dt,packageName:P?.name})]})})},Uge=()=>{const a=mr(),r=f.useCallback(()=>{a("/settings/general")},[a]);return n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:r,className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(Hn,{className:"w-5 h-5"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Shop metafields"})]}),n.jsx("button",{className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"View definitions"})]}),n.jsxs("div",{className:"border border-gray-200 bg-white p-6 text-center",children:[n.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:"Add a custom field to your shop"}),n.jsx("p",{className:"text-sm text-gray-600 max-w-md mx-auto mb-4",children:"Create custom fields for information that applies to your entire store, such as global settings or configurations."}),n.jsx("button",{className:"px-4 py-2 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Add definition"})]}),n.jsx("div",{className:"text-center mt-6",children:n.jsxs("button",{className:"inline-flex items-center gap-1.5 text-sm text-gray-600 hover:text-gray-900 transition-colors",children:[n.jsx("span",{children:"Learn more about metafields"}),n.jsx(Pa,{className:"w-4 h-4"})]})})]})})},$ge=({entry:a,showDivider:r})=>n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"py-2.5",children:[n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[a.title,a.linkLabel&&n.jsxs(n.Fragment,{children:[": ",n.jsx("a",{href:a.linkHref,className:"text-gray-700 ml-0.5 hover:text-gray-900 transition-colors",children:a.linkLabel})]})]}),a.description&&!a.linkLabel&&n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:a.description}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:a.timestamp})]}),r&&n.jsx("hr",{className:"my-2 border-gray-200"})]}),Vge=({entries:a})=>n.jsx("div",{className:"border border-gray-200 bg-white p-4",children:a.map((r,e)=>n.jsx($ge,{entry:r,showDivider:e<a.length-1},r.id))}),Wge=[{id:"1",title:"My Store Admin accessed shop",timestamp:"November 17, 2025 at 11:17 AM GMT+5:30"},{id:"2",title:"My Store Admin accessed shop",timestamp:"November 17, 2025 at 10:32 AM GMT+5:30"},{id:"3",title:"My Store Admin accessed shop",timestamp:"November 14, 2025 at 5:28 PM GMT+5:30"},{id:"4",title:"My Store Admin accessed shop",timestamp:"November 14, 2025 at 2:46 PM GMT+5:30"},{id:"5",title:"You included a product on Point of Sale",description:"t-shirt",timestamp:"November 14, 2025 at 10:42 AM GMT+5:30",linkLabel:"t-shirt",linkHref:"#"},{id:"6",title:"You included a product on Online Store",timestamp:"November 14, 2025 at 10:42 AM GMT+5:30",linkLabel:"t-shirt",linkHref:"#"},{id:"7",title:"You created a new product",timestamp:"November 14, 2025 at 10:42 AM GMT+5:30",linkLabel:"t-shirt",linkHref:"#"},{id:"8",title:"Theme was published",timestamp:"November 14, 2025 at 10:40 AM GMT+5:30",linkLabel:"Horizon",linkHref:"#"},{id:"9",title:"My Store Admin accessed shop",timestamp:"November 14, 2025 at 10:39 AM GMT+5:30"},{id:"10",title:"Ziplofy added default retail role",timestamp:"November 14, 2025 at 10:39 AM GMT+5:30",description:"Associate"}],Hge=()=>{const a=mr(),r=f.useCallback(()=>{a("/settings/general")},[a]);return n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-4 border-b border-gray-200",children:[n.jsx("button",{onClick:r,className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(Hn,{className:"w-5 h-5"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Store activity log"})]}),n.jsx(Vge,{entries:Wge})]})})},P6=f.createContext(void 0),qge=({children:a})=>{const[r,e]=f.useState(null),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async y=>{try{s(!0),i(null);const x=await Ke.get(`/tax-and-duties-global-settings/store/${y}`),{success:b,data:v,message:j}=x.data;if(!b)throw new Error(j||"Failed to fetch tax and duties global settings");return e(v||null),v||null}catch(x){const b=x?.response?.data?.message||x?.message||"Failed to fetch tax and duties global settings";throw i(b),new Error(b)}finally{s(!1)}},[]),c=f.useCallback(async(y,x)=>{try{s(!0),i(null);const b=await Ke.put(`/tax-and-duties-global-settings/${y}`,x),{success:v,data:j,message:S}=b.data;if(!v)throw new Error(S||"Failed to update tax and duties global settings");return e(j),j}catch(b){const v=b?.response?.data?.message||b?.message||"Failed to update tax and duties global settings";throw i(v),new Error(v)}finally{s(!1)}},[]),d=f.useCallback(()=>{e(null),i(null)},[]),h=f.useCallback(()=>{i(null)},[]),m={settings:r,loading:t,error:o,getByStoreId:l,update:c,clear:d,clearError:h};return n.jsx(P6.Provider,{value:m,children:a})},Gge=()=>{const a=f.useContext(P6);if(!a)throw new Error("useTaxAndDutiesGlobalSettings must be used within a TaxAndDutiesGlobalSettingsProvider");return a},Kge=()=>{const a=mr(),{countries:r,loading:e,getCountries:t}=dw(),{activeStoreId:s}=fn(),{settings:o,loading:i,getByStoreId:l,update:c}=Gge(),[d,h]=f.useState(""),[m,y]=f.useState(1),x=10,[b,v]=f.useState(!1),[j,S]=f.useState(!1),[k,N]=f.useState(!1),P=f.useRef(null);f.useEffect(()=>{t({limit:1e3})},[t]),f.useEffect(()=>{s&&l(s).catch(W=>{console.error("Failed to fetch tax and duties global settings:",W)})},[s,l]),f.useEffect(()=>{o&&(v(o.includeSalesTaxInProductPriceAndShippingRate),S(o.chargeSalesTaxOnShipping),N(o.chargeVATOnDigitalGoods))},[o]);const R=f.useCallback(W=>{!o||!o._id||(P.current&&clearTimeout(P.current),P.current=setTimeout(async()=>{try{await c(o._id,W)}catch(Z){console.error("Failed to update tax and duties global settings:",Z)}},500))},[o,c]);f.useEffect(()=>()=>{P.current&&clearTimeout(P.current)},[]);const z=r.map(W=>({id:W._id,name:W.name,flag:W.flagEmoji||"",collecting:W.name.toLowerCase()==="india"?"Taxes":null,taxService:"Manual Tax"})).filter(W=>W.name.toLowerCase().includes(d.toLowerCase())),H=z.slice((m-1)*x,m*x),V=Math.ceil(z.length/x);return n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b border-gray-200 pb-4",children:[n.jsx(a4,{className:"w-5 h-5 text-gray-600"}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Taxes and duties"})]}),n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Tax regions"}),n.jsx(Oa,{className:"w-4 h-4 text-gray-500"})]}),n.jsxs("p",{className:"text-xs text-gray-600 mb-4",children:["Areas where your customers will pay tax, and where you will collect and remit. Create a"," ",n.jsx("button",{onClick:()=>a("/settings/shipping-and-delivery"),className:"text-gray-700 cursor-pointer hover:underline",children:"shipping zone"})," ","to add a new tax region. If you're unsure about your tax liability, check with a tax professional."]}),n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsxs("div",{className:"relative flex-1 max-w-[300px]",children:[n.jsx(Ro,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-500"}),n.jsx("input",{type:"text",placeholder:"Search",value:d,onChange:W=>{h(W.target.value),y(1)},className:"w-full pl-10 pr-3 py-2 border border-gray-200 text-sm text-gray-900 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),n.jsx("button",{className:"p-1.5 border border-gray-200 hover:bg-gray-50 transition-colors",children:n.jsx($h,{className:"w-4 h-4 text-gray-600"})}),n.jsx("button",{className:"p-1.5 border border-gray-200 hover:bg-gray-50 transition-colors",children:n.jsx(XT,{className:"w-4 h-4 text-gray-600"})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full border-collapse",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left py-2 px-3 text-xs font-medium text-gray-700 border-b border-gray-200",children:"Region"}),n.jsx("th",{className:"text-left py-2 px-3 text-xs font-medium text-gray-700 border-b border-gray-200",children:"Collecting"}),n.jsx("th",{className:"text-left py-2 px-3 text-xs font-medium text-gray-700 border-b border-gray-200",children:"Tax service"})]})}),n.jsx("tbody",{children:e?n.jsx("tr",{children:n.jsx("td",{colSpan:3,className:"text-center py-4 text-xs text-gray-600",children:"Loading countries..."})}):H.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:3,className:"text-center py-4 text-xs text-gray-600",children:"No countries found"})}):H.map(W=>n.jsxs("tr",{onClick:()=>a(`/settings/taxes-and-duties/${W.id}`),className:"cursor-pointer hover:bg-gray-50 transition-colors",children:[n.jsx("td",{className:"py-3 px-3 border-b border-gray-100",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-lg",children:W.flag}),n.jsx("span",{className:"text-sm text-gray-900 font-medium",children:W.name})]})}),n.jsx("td",{className:"py-3 px-3 border-b border-gray-100",children:W.collecting?n.jsx("span",{className:"inline-block px-2 py-0.5 bg-gray-100 text-xs font-medium text-gray-700",children:W.collecting}):n.jsx("span",{className:"text-sm text-gray-400",children:""})}),n.jsx("td",{className:"py-3 px-3 border-b border-gray-100 text-sm text-gray-600",children:W.taxService})]},W.id))})]})}),V>1&&n.jsxs("div",{className:"flex items-center gap-1 mt-4",children:[n.jsx("button",{disabled:m===1,onClick:()=>y(m-1),className:`p-1.5 border border-gray-200 transition-colors ${m===1?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-50"}`,children:n.jsx(eD,{className:"w-4 h-4"})}),n.jsx("button",{disabled:m===V,onClick:()=>y(m+1),className:`p-1.5 border border-gray-200 transition-colors ${m===V?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-50"}`,children:n.jsx(Pa,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Duties and import taxes"}),n.jsx(Oa,{className:"w-4 h-4 text-gray-500"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex justify-between items-start gap-4 mb-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-0.5",children:"Collect duties and import taxes at checkout"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Prevent surprise fees for international customers at delivery  0.5% transaction fee"})]}),n.jsx("button",{className:"px-3 py-1.5 border border-gray-200 text-sm text-gray-700 hover:bg-gray-50 transition-colors whitespace-nowrap",children:"Set up"})]}),n.jsxs("div",{className:"mt-3 p-3 bg-gray-50 border border-gray-200 flex items-start gap-2",children:[n.jsx(Oa,{className:"w-4 h-4 text-gray-600 shrink-0 mt-0.5"}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Ensure the carriers you use offer"," ",n.jsx("button",{className:"text-gray-700 cursor-pointer hover:underline",children:"Delivered duty paid (DDP) shipping labels"}),"."]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-3",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Customs information"}),n.jsx("button",{className:"p-1 text-gray-500 hover:bg-gray-50 transition-colors",children:n.jsx(gS,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-0.5",children:"Country of origin"}),n.jsx("p",{className:"text-xs text-gray-900",children:"No default set"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-0.5",children:"Harmonized System (HS) codes"}),n.jsx("p",{className:"text-xs text-gray-900",children:"No physical products available"})]})]})]}),n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-4",children:"Global settings"}),n.jsx("div",{className:"mb-4",children:n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:b,onChange:W=>{const Z=W.target.checked;v(Z),R({includeSalesTaxInProductPriceAndShippingRate:Z})},disabled:i||!o,className:"mt-0.5 w-4 h-4 border-gray-300 text-gray-600 focus:ring-gray-400"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-0.5",children:"Include sales tax in product price and shipping rate"}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Assumes a 9% tax rate, which is adjusted to local tax rates in markets with"," ",n.jsx("button",{className:"text-gray-700 cursor-pointer hover:underline",children:"dynamic tax inclusion"}),"."]})]})]})}),n.jsx("div",{className:"mb-4",children:n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:j,onChange:W=>{const Z=W.target.checked;S(Z),R({chargeSalesTaxOnShipping:Z})},disabled:i||!o,className:"mt-0.5 w-4 h-4 border-gray-300 text-gray-600 focus:ring-gray-400"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-0.5",children:"Charge sales tax on shipping"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Automatically calculated for Canada, European Union, and United States"})]})]})}),n.jsx("div",{children:n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:k,onChange:W=>{const Z=W.target.checked;N(Z),R({chargeVATOnDigitalGoods:Z})},disabled:i||!o,className:"mt-0.5 w-4 h-4 border-gray-300 text-gray-600 focus:ring-gray-400"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-0.5",children:"Charge VAT on digital goods"}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Creates a collection of digital goods that will be"," ",n.jsx("button",{className:"text-gray-700 cursor-pointer hover:underline",children:"charged VAT"})," ","at checkout (for European customers)"]})]})]})})]})]})})},Yge=()=>{const[a,r]=f.useState(new Set),e=[{_id:"1",email:"developer200419@gmail.com",status:"active",role:"Store owner"}],t=l=>{l.target.checked?r(new Set(e.map(c=>c._id))):r(new Set)},s=l=>{r(c=>{const d=new Set(c);return d.has(l)?d.delete(l):d.add(l),d})},o=e.length>0&&a.size===e.length,i=a.size>0&&a.size<e.length;return n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(py,{className:"w-5 h-5 text-gray-900"}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Users"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{className:"px-3 py-1.5 text-sm border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Export"}),n.jsx("button",{className:"px-3 py-1.5 text-sm text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Add users"})]})]}),n.jsx("div",{className:"border border-gray-200 bg-white overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-white border-b border-gray-200",children:[n.jsx("th",{className:"w-12 px-3 py-2 text-left",children:n.jsx("input",{type:"checkbox",ref:l=>{l&&(l.indeterminate=i)},checked:o,onChange:t,className:"w-4 h-4 text-gray-900 focus:ring-gray-400"})}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-900",children:"User"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-900",children:"Status"}),n.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-900",children:"Role"})]})}),n.jsx("tbody",{children:e.map(l=>n.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50 transition-colors",children:[n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"checkbox",checked:a.has(l._id),onChange:()=>s(l._id),className:"w-4 h-4 text-gray-900 focus:ring-gray-400"})}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("p",{className:"text-sm text-gray-900 truncate max-w-[300px]",children:l.email})}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("span",{className:"inline-block px-2 py-0.5 text-xs bg-gray-100 text-gray-700",children:l.status.charAt(0).toUpperCase()+l.status.slice(1)})}),n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(xS,{className:"w-4 h-4 text-gray-600"}),n.jsx("span",{className:"text-sm text-gray-900",children:l.role})]})})]},l._id))})]})})}),n.jsx("div",{className:"mt-3",children:n.jsx("a",{href:"#",onClick:l=>{l.preventDefault()},className:"text-xs text-gray-700 hover:underline",children:"Learn more about users"})})]})})},Zge=()=>{const{stores:a,activeStoreId:r}=fn(),{settings:e,loading:t,fetchByStoreId:s,update:o,generateNewCode:i}=bQ(),l=f.useMemo(()=>a.find(k=>k._id===r),[a,r]),[c,d]=f.useState(!1),[h,m]=f.useState(!1),[y,x]=f.useState(!1);f.useEffect(()=>{r&&s(r).catch(()=>{})},[r,s]),f.useEffect(()=>{d(e?e.requireCode:!1)},[e]);const b=f.useCallback(()=>{if(!e?.securityCode){yr.dismiss(),yr.error("No security code to copy");return}navigator.clipboard.writeText(e.securityCode).then(()=>{yr.dismiss(),yr.success("Security code copied")}).catch(()=>{yr.dismiss(),yr.error("Failed to copy code")})},[e]),v=f.useCallback(async()=>{if(!e?._id){yr.dismiss(),yr.error("Settings not available");return}x(!0);try{await i(e._id),yr.dismiss(),yr.success("New security code generated successfully")}catch(k){const N=k?.message||"Failed to generate new security code";yr.dismiss(),yr.error(N)}finally{x(!1)}},[e,i]),j=f.useCallback(async()=>{if(!r||!e){yr.dismiss(),yr.error("Settings not available");return}m(!0);try{await o(e._id,{requireCode:!1}),yr.dismiss(),yr.success("Security code requirement disabled"),d(!1)}catch(k){const N=k?.message||"Failed to disable security code requirement";yr.dismiss(),yr.error(N)}finally{m(!1)}},[r,e,o]),S=f.useCallback(async()=>{if(!r||!e){yr.dismiss(),yr.error("Settings not available");return}m(!0);try{await o(e._id,{requireCode:!0}),yr.dismiss(),yr.success("Security code requirement enabled"),d(!0)}catch(k){const N=k?.message||"Failed to enable security code requirement";yr.dismiss(),yr.error(N)}finally{m(!1)}},[r,e,o]);return n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[t&&n.jsx("div",{className:"flex justify-center py-4",children:n.jsx("div",{className:"w-5 h-5 border-2 border-gray-300 border-t-gray-900 rounded-full animate-spin"})}),!t&&e&&n.jsxs("div",{className:"border border-gray-200 bg-white p-4",children:[n.jsx("h2",{className:"text-base font-medium text-gray-900 mb-1",children:"Collaborators"}),n.jsxs("p",{className:"text-xs text-gray-600 mb-3",children:["Give designers, developers, and marketers access to this store. Collaborators don't count toward your staff limit. Learn more about"," ",n.jsx("a",{href:"#",className:"text-gray-700 hover:underline",children:"collaborators"}),"."]}),!e.requireCode&&n.jsx("div",{className:"border border-gray-200 p-3 bg-gray-50",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-start sm:items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"text-xs text-gray-600",children:["Anyone can send a collaborator request for ",l?.storeName||"My Store",". A code is not required."]}),n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["You'll still need to review and approve this request from"," ",n.jsx("a",{href:"#",className:"text-gray-700 hover:underline",children:"Users"}),"."]})]}),n.jsx("button",{onClick:S,disabled:h,className:"px-3 py-1.5 text-sm border border-gray-200 text-gray-700 bg-white hover:bg-gray-50 transition-colors disabled:bg-gray-100 disabled:cursor-not-allowed",children:"Require code"})]})}),e.requireCode&&n.jsx("div",{className:"border border-gray-200 p-3 bg-gray-50",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-start sm:items-center",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs text-gray-600 uppercase tracking-wide",children:"My Store"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:l?.storeName||"My Store"}),n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Share this code to allow someone to send you a collaborator request for this store. You'll still need to review and approve this request from"," ",n.jsx("a",{href:"#",className:"text-gray-700 hover:underline",children:"Users"}),"."]})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.securityCode&&n.jsx("button",{onClick:b,className:"px-3 py-1.5 text-sm border border-gray-200 text-gray-700 bg-white hover:bg-gray-50 transition-colors font-mono font-medium",children:n.jsxs("span",{className:"flex items-center gap-1.5",children:[n.jsx(aD,{className:"w-4 h-4"}),e.securityCode]})}),n.jsx("button",{onClick:v,disabled:y,className:"px-3 py-1.5 text-sm text-white bg-gray-900 hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:y?n.jsxs("span",{className:"flex items-center gap-1.5",children:[n.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Generating..."]}):"Generate new code"}),n.jsx("button",{onClick:j,disabled:h,className:"p-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n.jsx(Vs,{className:"w-4 h-4"})})]})]})})]})]})})},Xge=f.createContext(void 0),Qge=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async m=>{try{s(!0),i(null);const y=await Ke.get(`/storefront/cart/store/${m}`),{success:x,data:b}=y.data;x?e(b):i("Failed to fetch abandoned carts")}catch(y){console.error("Error fetching abandoned carts:",y);const x=y.response?.data?.message||y.message||"Failed to fetch abandoned carts";i(x)}finally{s(!1)}},[]),c=f.useCallback(()=>{i(null)},[]),d=f.useCallback(()=>{e([]),i(null),s(!1)},[]),h={abandonedCarts:r,loading:t,error:o,fetchAbandonedCartsByStoreId:l,clearError:c,clearAbandonedCarts:d};return n.jsx(Xge.Provider,{value:h,children:a})},Jge=f.createContext(void 0),eye=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async()=>{try{s(!0),i(null);const d=await Ke.get("/actions"),{success:h,data:m,message:y}=d.data;if(!h)throw new Error(y||"Failed to fetch actions");return e(m||[]),m||[]}catch(d){const h=d?.response?.data?.message||d?.message||"Failed to fetch actions";throw i(h),new Error(h)}finally{s(!1)}},[]),c={actions:r,loading:t,error:o,getAll:l};return n.jsx(Jge.Provider,{value:c,children:a})},tye=f.createContext(void 0),rye=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(()=>{e([]),i(null)},[]),c=f.useCallback(async h=>{try{s(!0),i(null);const m=await Ke.get(`/orders/store/${h}`);if(!m.data.success)throw new Error("Failed to fetch orders");return e(m.data.data||[]),m.data.data||[]}catch(m){const y=m?.response?.data?.message||m?.message||"Failed to fetch orders";throw i(y),m}finally{s(!1)}},[]),d=f.useMemo(()=>({orders:r,loading:t,error:o,getOrdersByStoreId:c,clear:l}),[r,t,o,c,l]);return n.jsx(tye.Provider,{value:d,children:a})},nye=f.createContext(void 0),aye=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async m=>{try{s(!0),i(null);const y=await Ke.get(`/automation-flows/${encodeURIComponent(m)}`),{success:x,data:b,message:v}=y.data;if(!x)throw new Error(v||"Failed to fetch automation flows");return e(b||[]),b||[]}catch(y){const x=y?.response?.data?.message||y?.message||"Failed to fetch automation flows";throw i(x),new Error(x)}finally{s(!1)}},[]),c=f.useCallback(async m=>{try{s(!0),i(null);const y=await Ke.post("/automation-flows",m),{success:x,data:b,message:v}=y.data;if(!x)throw new Error(v||"Failed to create automation flow");return e(j=>[b,...j]),ra.success("Automation flow created successfully"),b}catch(y){const x=y?.response?.data?.message||y?.message||"Failed to create automation flow";throw i(x),ra.error(x),new Error(x)}finally{s(!1)}},[]),d=f.useCallback(async(m,y)=>{try{s(!0),i(null);const x=await Ke.put(`/automation-flows/${encodeURIComponent(m)}`,y),{success:b,data:v,message:j}=x.data;if(!b)throw new Error(j||"Failed to update automation flow");return e(S=>S.map(k=>k._id===v._id?v:k)),ra.success("Automation flow updated successfully"),v}catch(x){const b=x?.response?.data?.message||x?.message||"Failed to update automation flow";throw i(b),ra.error(b),new Error(b)}finally{s(!1)}},[]),h={flows:r,loading:t,error:o,getByStoreId:l,create:c,update:d};return n.jsx(nye.Provider,{value:h,children:a})},sye=f.createContext(void 0),oye=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async m=>{try{s(!0),i(null);const y=await Ke.get(`/catalog-markets/catalog/${m}`),{success:x,data:b,message:v}=y.data;if(!x)throw new Error(v||"Failed to fetch catalog markets");return e(b||[]),b||[]}catch(y){const x=y?.response?.data?.message||y?.message||"Failed to fetch catalog markets";throw i(x),new Error(x)}finally{s(!1)}},[]),c=f.useCallback(async m=>{try{s(!0),i(null);const y=await Ke.post("/catalog-markets",m),{success:x,data:b,message:v}=y.data;if(!x)throw new Error(v||"Failed to add market to catalog");return e(j=>[b,...j]),b}catch(y){const x=y?.response?.data?.message||y?.message||"Failed to add market to catalog";throw i(x),new Error(x)}finally{s(!1)}},[]),d=f.useCallback(async m=>{try{s(!0),i(null);const y=await Ke.delete(`/catalog-markets/${m}`),{success:x,data:b,message:v}=y.data;if(!x)throw new Error(v||"Failed to delete catalog market");return e(j=>j.filter(S=>S._id!==b.deletedId)),b.deletedId}catch(y){const x=y?.response?.data?.message||y?.message||"Failed to delete catalog market";throw i(x),new Error(x)}finally{s(!1)}},[]),h={items:r,loading:t,error:o,getByCatalogId:l,createItem:c,deleteItem:d};return n.jsx(sye.Provider,{value:h,children:a})},iye=f.createContext(void 0),lye=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async y=>{try{s(!0),i(null);const x=await Ke.get(`/catalog-products/catalog/${y}`),{success:b,data:v,message:j}=x.data;if(!b)throw new Error(j||"Failed to fetch catalog products");return e(v||[]),v||[]}catch(x){const b=x?.response?.data?.message||x?.message||"Failed to fetch catalog products";throw i(b),new Error(b)}finally{s(!1)}},[]),c=f.useCallback(async y=>{try{s(!0),i(null);const x=await Ke.post("/catalog-products",y),{success:b,data:v,message:j}=x.data;if(!b)throw new Error(j||"Failed to add product to catalog");return e(S=>[v,...S]),v}catch(x){const b=x?.response?.data?.message||x?.message||"Failed to add product to catalog";throw i(b),new Error(b)}finally{s(!1)}},[]),d=f.useCallback(async y=>{try{s(!0),i(null);const x=await Ke.delete(`/catalog-products/${y}`),{success:b,data:v,message:j}=x.data;if(!b)throw new Error(j||"Failed to delete catalog product");return e(S=>S.filter(k=>k._id!==v.deletedId)),v.deletedId}catch(x){const b=x?.response?.data?.message||x?.message||"Failed to delete catalog product";throw i(b),new Error(b)}finally{s(!1)}},[]),h=f.useCallback(async(y,x,b)=>{try{s(!0),i(null);const v=await Ke.put(`/catalog-products/${y}`,b),{success:j,data:S,message:k}=v.data;if(!j)throw new Error(k||"Failed to update variant prices");return e(N=>N.map(P=>({...P,variants:P.variants.map(R=>R._id===x?{...R,price:S.price,compareAtPrice:S.compareAtPrice}:R)}))),S}catch(v){const j=v?.response?.data?.message||v?.message||"Failed to update variant prices";throw i(j),new Error(j)}finally{s(!1)}},[]),m={items:r,loading:t,error:o,getByCatalogId:l,createItem:c,deleteItem:d,updateVariantPrices:h};return n.jsx(iye.Provider,{value:m,children:a})},cye=f.createContext(void 0),dye=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async y=>{try{s(!0),i(null);const x=await Ke.get(`/catalogs/store/${y}`),{success:b,data:v,message:j}=x.data;if(!b)throw new Error(j||"Failed to fetch catalogs");return e(v||[]),v||[]}catch(x){const b=x?.response?.data?.message||x?.message||"Failed to fetch catalogs";throw i(b),new Error(b)}finally{s(!1)}},[]),c=f.useCallback(async y=>{try{s(!0),i(null);const x=await Ke.post("/catalogs",y),{success:b,data:v,message:j}=x.data;if(!b)throw new Error(j||"Failed to create catalog");return e(S=>[v,...S]),v}catch(x){const b=x?.response?.data?.message||x?.message||"Failed to create catalog";throw i(b),new Error(b)}finally{s(!1)}},[]),d=f.useCallback(async(y,x)=>{try{s(!0),i(null);const b=await Ke.put(`/catalogs/${y}`,x),{success:v,data:j,message:S}=b.data;if(!v)throw new Error(S||"Failed to update catalog");return e(k=>k.map(N=>N._id===y?j:N)),j}catch(b){const v=b?.response?.data?.message||b?.message||"Failed to update catalog";throw i(v),new Error(v)}finally{s(!1)}},[]),h=f.useCallback(async y=>{try{s(!0),i(null);const x=await Ke.delete(`/catalogs/${y}`),{success:b,data:v,message:j}=x.data;if(!b)throw new Error(j||"Failed to delete catalog");return e(S=>S.filter(k=>k._id!==v.deletedId)),v.deletedId}catch(x){const b=x?.response?.data?.message||x?.message||"Failed to delete catalog";throw i(b),new Error(b)}finally{s(!1)}},[]),m={catalogs:r,loading:t,error:o,getByStoreId:l,createCatalog:c,updateCatalog:d,deleteCatalog:h};return n.jsx(cye.Provider,{value:m,children:a})},uye=f.createContext(void 0),fye=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(0),[o,i]=f.useState(1),[l,c]=f.useState(50),[d,h]=f.useState(!1),[m,y]=f.useState(null),x=f.useCallback(async(v={})=>{try{h(!0),y(null);const j=new URLSearchParams;v.q&&j.set("q",v.q),typeof v.active=="boolean"&&j.set("active",String(v.active)),v.page&&j.set("page",String(v.page)),v.limit&&j.set("limit",String(v.limit));const S=await Ke.get(`/currencies?${j.toString()}`),{success:k,data:N,message:P,meta:R}=S.data;if(!k)throw new Error(P||"Failed to fetch currencies");return e(N||[]),R&&(s(R.total),i(R.page),c(R.limit)),N||[]}catch(j){const S=j?.response?.data?.message||j?.message||"Failed to fetch currencies";throw y(S),new Error(S)}finally{h(!1)}},[]),b={currencies:r,total:t,page:o,limit:l,loading:d,error:m,getCurrencies:x};return n.jsx(uye.Provider,{value:b,children:a})},A6=f.createContext(void 0),pye=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async m=>{s(!0),i(null);try{const{data:y}=await Ke.get(`/themes/installed?userId=${m}&storeId=${m}&_t=${Date.now()}`);e(y||[])}catch(y){i(y?.response?.data?.message||"Failed to fetch installed themes"),e([])}finally{s(!1)}},[]),c=f.useCallback(async(m,y)=>{s(!0),i(null);try{const{data:x}=await Ke.post("/themes/install",{userId:m,themeId:y,storeId:m});x.success&&(localStorage.removeItem("ziplofy.appliedCustomThemeId"),localStorage.removeItem("ziplofy.appliedCustomThemeStoreId"),await new Promise(b=>setTimeout(b,500)),await l(m))}catch(x){i(x?.response?.data?.message||"Failed to install theme")}finally{s(!1)}},[l]),d=f.useCallback(async m=>{s(!0),i(null);try{await Ke.delete("/themes/uninstall",{data:{installedThemeId:m}}),e(y=>y.filter(x=>x.installedThemeId!==m))}catch(y){i(y?.response?.data?.message||"Failed to uninstall theme")}finally{s(!1)}},[]),h=f.useMemo(()=>({installedThemes:r,loading:t,error:o,fetchByStoreId:l,installTheme:c,uninstallTheme:d}),[r,t,o,l,c,d]);return n.jsx(A6.Provider,{value:h,children:a})};function hye(){const a=f.useContext(A6);if(!a)throw new Error("useInstalledThemes must be used within InstalledThemesProvider");return a}const mye=f.createContext(void 0),gye=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async m=>{try{s(!0),i(null);const y=await Ke.get(`/market-includes/market/${m}`),{success:x,data:b,message:v}=y.data;if(!x)throw new Error(v||"Failed to fetch market includes");return e(b||[]),b||[]}catch(y){const x=y?.response?.data?.message||y?.message||"Failed to fetch market includes";throw i(x),new Error(x)}finally{s(!1)}},[]),c=f.useCallback(async m=>{try{s(!0),i(null);const y=await Ke.post("/market-includes",m),{success:x,data:b,message:v}=y.data;if(!x)throw new Error(v||"Failed to add country to market");return e(j=>[b,...j]),b}catch(y){const x=y?.response?.data?.message||y?.message||"Failed to add country to market";throw i(x),new Error(x)}finally{s(!1)}},[]),d=f.useCallback(async m=>{try{s(!0),i(null);const y=await Ke.delete(`/market-includes/${m}`),{success:x,data:b,message:v}=y.data;if(!x)throw new Error(v||"Failed to delete market include");return e(j=>j.filter(S=>S._id!==b.deletedId)),b.deletedId}catch(y){const x=y?.response?.data?.message||y?.message||"Failed to delete market include";throw i(x),new Error(x)}finally{s(!1)}},[]),h={items:r,loading:t,error:o,getByMarketId:l,createItem:c,deleteItem:d};return n.jsx(mye.Provider,{value:h,children:a})},M6=f.createContext(void 0),yye=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState([]),[o,i]=f.useState(!1),[l,c]=f.useState(null),d=f.useCallback(async v=>{try{i(!0),c(null);const j=await Ke.get(`/markets/store/${v}`),{success:S,data:k,message:N}=j.data;if(!S)throw new Error(N||"Failed to fetch markets");return e(k||[]),k||[]}catch(j){const S=j?.response?.data?.message||j?.message||"Failed to fetch markets";throw c(S),new Error(S)}finally{i(!1)}},[]),h=f.useCallback(async v=>{try{i(!0),c(null);const j=await Ke.get(`/markets/store/${v}/countries`),{success:S,data:k,message:N}=j.data;if(!S)throw new Error(N||"Failed to fetch market countries");return s(k||[]),k||[]}catch(j){const S=j?.response?.data?.message||j?.message||"Failed to fetch market countries";throw c(S),new Error(S)}finally{i(!1)}},[]),m=f.useCallback(async v=>{try{i(!0),c(null);const j=await Ke.post("/markets",v),{success:S,data:k,message:N}=j.data;if(!S)throw new Error(N||"Failed to create market");return e(P=>[k,...P]),k}catch(j){const S=j?.response?.data?.message||j?.message||"Failed to create market";throw c(S),new Error(S)}finally{i(!1)}},[]),y=f.useCallback(async(v,j)=>{try{i(!0),c(null);const S=await Ke.put(`/markets/${v}`,j),{success:k,data:N,message:P}=S.data;if(!k)throw new Error(P||"Failed to update market");return e(R=>R.map(F=>F._id===v?N:F)),N}catch(S){const k=S?.response?.data?.message||S?.message||"Failed to update market";throw c(k),new Error(k)}finally{i(!1)}},[]),x=f.useCallback(async v=>{try{i(!0),c(null);const j=await Ke.delete(`/markets/${v}`),{success:S,data:k,message:N}=j.data;if(!S)throw new Error(N||"Failed to delete market");return e(P=>P.filter(R=>R._id!==k.deletedId)),k.deletedId}catch(j){const S=j?.response?.data?.message||j?.message||"Failed to delete market";throw c(S),new Error(S)}finally{i(!1)}},[]),b={markets:r,storeCountries:t,loading:o,error:l,getByStoreId:d,getCountriesByStoreId:h,createMarket:m,updateMarket:y,deleteMarket:x};return n.jsx(M6.Provider,{value:b,children:a})},I6=()=>{const a=f.useContext(M6);if(!a)throw new Error("useMarkets must be used within a MarketProvider");return a},R6=f.createContext(void 0),xye=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async b=>{try{s(!0),i(null);const v=await Ke.get(`/pixels/store/${b}`),{success:j,data:S,message:k}=v.data;if(!j)throw new Error(k||"Failed to fetch pixels");return e(S||[]),S||[]}catch(v){const j=v?.response?.data?.message||v?.message||"Failed to fetch pixels";throw i(j),new Error(j)}finally{s(!1)}},[]),c=f.useCallback(async b=>{try{s(!0),i(null);const v=await Ke.post("/pixels",b),{success:j,data:S,message:k}=v.data;if(!j)throw new Error(k||"Failed to create pixel");return e(N=>[S,...N]),S}catch(v){const j=v?.response?.data?.message||v?.message||"Failed to create pixel";throw i(j),new Error(j)}finally{s(!1)}},[]),d=f.useCallback(async(b,v)=>{try{s(!0),i(null);const j=await Ke.put(`/pixels/${b}`,v),{success:S,data:k,message:N}=j.data;if(!S)throw new Error(N||"Failed to update pixel");return e(P=>P.map(R=>R._id===b?k:R)),k}catch(j){const S=j?.response?.data?.message||j?.message||"Failed to update pixel";throw i(S),new Error(S)}finally{s(!1)}},[]),h=f.useCallback(async b=>{try{s(!0),i(null);const v=await Ke.delete(`/pixels/${b}`),{success:j,data:S,message:k}=v.data;if(!j)throw new Error(k||"Failed to delete pixel");return e(N=>N.filter(P=>P._id!==b)),S}catch(v){const j=v?.response?.data?.message||v?.message||"Failed to delete pixel";throw i(j),new Error(j)}finally{s(!1)}},[]),m=f.useCallback(()=>{e([]),i(null)},[]),y=f.useCallback(()=>i(null),[]),x={pixels:r,loading:t,error:o,fetchByStoreId:l,create:c,update:d,remove:h,clear:m,clearError:y};return n.jsx(R6.Provider,{value:x,children:a})},L6=()=>{const a=f.useContext(R6);if(!a)throw new Error("usePixels must be used within a PixelProvider");return a},D6=f.createContext(void 0),vye=({children:a})=>{const[r,e]=f.useState({}),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async m=>{s(!0),i(null);try{const y=await Ke.get(`/shipping-profile-location-settings/${m}`);if(!y.data.success)throw new Error(y.data.message||"Failed to fetch location settings");const x=y.data.data||[];return e(b=>({...b,[m]:x})),x}catch(y){const x=y.response?.data?.message||y.message||"Failed to fetch location settings";throw i(x),new Error(x)}finally{s(!1)}},[]),c=f.useCallback(async(m,y,x)=>{s(!0),i(null);try{const b=await Ke.put(`/shipping-profile-location-settings/${m}/location/${y}`,x);if(!b.data.success)throw new Error(b.data.message||"Failed to update location setting");const v=b.data.data;return e(j=>{const k=(j[m]||[]).map(N=>N._id===v._id?{...N,...v}:N);return{...j,[m]:k}}),v}catch(b){const v=b.response?.data?.message||b.message||"Failed to update location setting";throw i(v),new Error(v)}finally{s(!1)}},[]),d=f.useCallback(()=>{e({}),i(null)},[]),h=f.useMemo(()=>({settingsByProfileId:r,loading:t,error:o,fetchByProfileId:l,updateLocationSetting:c,clear:d}),[r,t,o,l,c,d]);return n.jsx(D6.Provider,{value:h,children:a})},bye=()=>{const a=f.useContext(D6);if(a===void 0)throw new Error("useShippingProfileLocationSettings must be used within a ShippingProfileLocationSettingsProvider");return a},F6=f.createContext(void 0),wye=({children:a})=>{const[r,e]=f.useState({}),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async y=>{s(!0),i(null);try{const x=await Ke.get(`/shipping-profile-product-variants/${y}`);if(!x.data.success)throw new Error(x.data.message||"Failed to fetch product variants");const b=x.data.data||[];return e(v=>({...v,[y]:b})),b}catch(x){const b=x.response?.data?.message||x.message||"Failed to fetch product variants";throw i(b),new Error(b)}finally{s(!1)}},[]),c=f.useCallback(async(y,x)=>{s(!0),i(null);try{const b=await Ke.post(`/shipping-profile-product-variants/${y}`,x);if(!b.data.success)throw new Error(b.data.message||"Failed to add product variant");const v=b.data.data;return e(j=>({...j,[y]:[...j[y]||[],v]})),v}catch(b){const v=b.response?.data?.message||b.message||"Failed to add product variant";throw i(v),new Error(v)}finally{s(!1)}},[]),d=f.useCallback(async(y,x)=>{s(!0),i(null);try{const b=await Ke.delete(`/shipping-profile-product-variants/${y}`);if(!b.data.success)throw new Error(b.data.message||"Failed to remove product variant");const v=x||b.data.meta?.shippingProfileId;v&&e(j=>({...j,[v]:(j[v]||[]).filter(S=>S._id!==y)}))}catch(b){const v=b.response?.data?.message||b.message||"Failed to remove product variant";throw i(v),new Error(v)}finally{s(!1)}},[]),h=f.useCallback(()=>{e({}),i(null)},[]),m=f.useMemo(()=>({entriesByProfileId:r,loading:t,error:o,fetchByProfileId:l,addEntry:c,deleteEntry:d,clear:h}),[r,t,o,l,c,d,h]);return n.jsx(F6.Provider,{value:m,children:a})},jye=()=>{const a=f.useContext(F6);if(a===void 0)throw new Error("useShippingProfileProductVariants must be used within a ShippingProfileProductVariantsProvider");return a},B6=f.createContext(void 0),Cye=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(0),[o,i]=f.useState(!1),[l,c]=f.useState(null),d=f.useCallback(async v=>{try{i(!0),c(null);const j=await Ke.post("/shipping-zone-rates",v),{success:S,data:k,message:N}=j.data;if(!S)throw new Error(N||"Failed to create shipping zone rate");return e(P=>[k,...P]),s(P=>P+1),k}catch(j){const S=j?.response?.data?.message||j?.message||"Failed to create shipping zone rate";throw c(S),new Error(S)}finally{i(!1)}},[]),h=f.useCallback(async v=>{try{i(!0),c(null);const j=await Ke.get(`/shipping-zone-rates/zone/${v}`),{success:S,data:k,message:N,meta:P}=j.data;if(!S)throw new Error(N||"Failed to fetch shipping zone rates");const R=k||[];return e(R),P?.total!=null?s(P.total):s(R.length),R}catch(j){const S=j?.response?.data?.message||j?.message||"Failed to fetch shipping zone rates";throw c(S),new Error(S)}finally{i(!1)}},[]),m=f.useCallback(async(v,j)=>{try{i(!0),c(null);const S=await Ke.put(`/shipping-zone-rates/${v}`,j),{success:k,data:N,message:P}=S.data;if(!k)throw new Error(P||"Failed to update shipping zone rate");return e(R=>R.map(F=>F._id===v?N:F)),N}catch(S){const k=S?.response?.data?.message||S?.message||"Failed to update shipping zone rate";throw c(k),new Error(k)}finally{i(!1)}},[]),y=f.useCallback(async v=>{try{i(!0),c(null);const j=await Ke.delete(`/shipping-zone-rates/${v}`),{success:S,message:k}=j.data;if(!S)throw new Error(k||"Failed to delete shipping zone rate");e(N=>N.filter(P=>P._id!==v)),s(N=>Math.max(0,N-1))}catch(j){const S=j?.response?.data?.message||j?.message||"Failed to delete shipping zone rate";throw c(S),new Error(S)}finally{i(!1)}},[]),x=f.useCallback(()=>{e([]),s(0)},[]),b=f.useMemo(()=>({shippingZoneRates:r,loading:o,error:l,total:t,createShippingZoneRate:d,getShippingZoneRatesByZoneId:h,updateShippingZoneRate:m,deleteShippingZoneRate:y,clearShippingZoneRates:x}),[r,o,l,t,d,h,m,y,x]);return n.jsx(B6.Provider,{value:b,children:a})},Sye=()=>{const a=f.useContext(B6);if(!a)throw new Error("useShippingZoneRates must be used within a ShippingZoneRateProvider");return a},z6=f.createContext(void 0),Nye=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(0),[o,i]=f.useState(!1),[l,c]=f.useState(null),d=f.useCallback(async v=>{try{i(!0),c(null);const j=await Ke.post("/shipping-zones",v),{success:S,data:k,message:N}=j.data;if(!S)throw new Error(N||"Failed to create shipping zone");return e(P=>[k,...P]),s(P=>P+1),k}catch(j){const S=j?.response?.data?.message||j?.message||"Failed to create shipping zone";throw c(S),new Error(S)}finally{i(!1)}},[]),h=f.useCallback(async v=>{try{i(!0),c(null);const j=await Ke.get(`/shipping-zones/profile/${v}`),{success:S,data:k,message:N,meta:P}=j.data;if(!S)throw new Error(N||"Failed to fetch shipping zones");const R=k||[];return e(R),P?.total!=null?s(P.total):s(R.length),R}catch(j){const S=j?.response?.data?.message||j?.message||"Failed to fetch shipping zones";throw c(S),new Error(S)}finally{i(!1)}},[]),m=f.useCallback(async(v,j)=>{try{i(!0),c(null);const S=await Ke.put(`/shipping-zones/${v}`,j),{success:k,data:N,message:P}=S.data;if(!k)throw new Error(P||"Failed to update shipping zone");return e(R=>R.map(F=>F._id===v?N:F)),N}catch(S){const k=S?.response?.data?.message||S?.message||"Failed to update shipping zone";throw c(k),new Error(k)}finally{i(!1)}},[]),y=f.useCallback(async v=>{try{i(!0),c(null);const j=await Ke.delete(`/shipping-zones/${v}`),{success:S,message:k}=j.data;if(!S)throw new Error(k||"Failed to delete shipping zone");e(N=>N.filter(P=>P._id!==v)),s(N=>Math.max(N-1,0))}catch(j){const S=j?.response?.data?.message||j?.message||"Failed to delete shipping zone";throw c(S),new Error(S)}finally{i(!1)}},[]),x=f.useCallback(()=>{e([]),s(0)},[]),b=f.useMemo(()=>({shippingZones:r,loading:o,error:l,total:t,createShippingZone:d,getShippingZonesByShippingProfileId:h,updateShippingZone:m,deleteShippingZone:y,clearShippingZones:x}),[r,o,l,t,d,h,m,y,x]);return n.jsx(z6.Provider,{value:b,children:a})},kye=()=>{const a=f.useContext(z6);if(!a)throw new Error("useShippingZones must be used within a ShippingZoneProvider");return a},U6=f.createContext(void 0),_ye=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(0),[o,i]=f.useState(0),[l,c]=f.useState(!1),[d,h]=f.useState(null),m=f.useCallback(async(v,j,S)=>{try{c(!0),h(null);const k=await Ke.post("/storefront/discounts/amount-off-order/check",{storeId:v,customerId:j,cartItems:S});k.data.success?(e(k.data.data.eligibleDiscounts),s(k.data.data.cartTotal),i(k.data.data.totalQuantity)):h("Failed to fetch discounts")}catch(k){console.error("Error fetching amount off order discounts:",k),h(k.response?.data?.message||"Failed to fetch discounts"),e([]),s(0),i(0)}finally{c(!1)}},[]),y=f.useCallback(async(v,j,S,k)=>{try{c(!0),h(null);const N=await Ke.post("/storefront/discounts/amount-off-order/validate-code",{storeId:v,customerId:j,cartItems:S,discountCode:k});return N.data.success?N.data.data.discount:(h(N.data.message||"Invalid discount code"),null)}catch(N){return console.error("Error validating discount code:",N),h(N.response?.data?.message||"Failed to validate discount code"),null}finally{c(!1)}},[]),x=f.useCallback(()=>{e([]),s(0),i(0),h(null)},[]),b={eligibleDiscounts:r,cartTotal:t,totalQuantity:o,loading:l,error:d,fetchEligibleDiscounts:m,amountOffOrderDiscountCodeCheck:y,clearDiscounts:x};return n.jsx(U6.Provider,{value:b,children:a})},Eye=()=>{const a=f.useContext(U6);if(a===void 0)throw new Error("useAmountOffOrder must be used within an AmountOffOrderProvider");return a},$6=f.createContext(void 0),Tye=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async b=>{try{s(!0),i(null);const v=await Ke.get(`/customer-address/customer/${b}`);e(v.data.data)}catch(v){const j=v.response?.data?.message||v.message||"Failed to fetch customer addresses";throw i(j),v}finally{s(!1)}},[]),c=f.useCallback(async b=>{try{s(!0),i(null);const j=(await Ke.post("/customer-address",b)).data.data;return e(S=>[j,...S]),j}catch(v){const j=v.response?.data?.message||v.message||"Failed to create customer address";throw i(j),v}finally{s(!1)}},[]),d=f.useCallback(async(b,v)=>{try{s(!0),i(null);const S=(await Ke.put(`/customer-address/${b}`,v)).data.data;return e(k=>k.map(N=>N._id===b?S:N)),S}catch(j){const S=j.response?.data?.message||j.message||"Failed to update customer address";throw i(S),j}finally{s(!1)}},[]),h=f.useCallback(async b=>{try{s(!0),i(null),await Ke.delete(`/customer-address/${b}`),e(v=>v.filter(j=>j._id!==b))}catch(v){const j=v.response?.data?.message||v.message||"Failed to delete customer address";throw i(j),v}finally{s(!1)}},[]),m=f.useCallback(()=>i(null),[]),y=f.useCallback(()=>e([]),[]),x={addresses:r,loading:t,error:o,fetchCustomerAddressesByCustomerId:l,addCustomerAddress:c,updateCustomerAddress:d,deleteCustomerAddress:h,clearError:m,clearAddresses:y};return n.jsx($6.Provider,{value:x,children:a})},H2=()=>{const a=f.useContext($6);if(!a)throw new Error("useCustomerAddresses must be used within a CustomerAddressProvider");return a},V6=f.createContext(void 0),Oye=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(0),[o,i]=f.useState(!1),[l,c]=f.useState(null),d=f.useCallback(async y=>{try{i(!0),c(null);const x=await Ke.get(`/product-variants/public/product/${y}`);if(!x.data.success)throw new Error("Failed to fetch product variants");return e(x.data.data||[]),s(x.data.count||0),x.data.data||[]}catch(x){const b=x?.response?.data?.message||x?.message||"Failed to fetch product variants";return c(b),[]}finally{i(!1)}},[]),h=f.useCallback(()=>{e([]),s(0),c(null),i(!1)},[]),m={variants:r,count:t,loading:o,error:l,fetchVariantsByProductId:d,clear:h};return n.jsx(V6.Provider,{value:m,children:a})},Pye=()=>{const a=f.useContext(V6);if(!a)throw new Error("useStorefrontProductVariants must be used within a StorefrontProductVariantProvider");return a},W6=f.createContext(void 0),H6=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),[l,c]=f.useState(null),d=f.useCallback(async y=>{const{storeId:x,page:b=1,limit:v=10}=y;try{s(!0),i(null);const j=await Ke.get(`/products/public/store/${x}`,{params:{page:b,limit:v}});if(!j.data.success)throw new Error("Failed to fetch products");e(j.data.data||[]),c(j.data.pagination||null)}catch(j){const S=j?.response?.data?.message||j?.message||"Failed to fetch products";i(S)}finally{s(!1)}},[]),h=f.useCallback(()=>{e([]),c(null),i(null),s(!1)},[]),m={products:r,loading:t,error:o,pagination:l,fetchProductsByStoreId:d,clear:h};return n.jsx(W6.Provider,{value:m,children:a})},q6=()=>{const a=f.useContext(W6);if(!a)throw new Error("useStorefrontProducts must be used within a StorefrontProductProvider");return a},G6=f.createContext(void 0),Aye=({children:a})=>{const[r,e]=f.useState(!1),[t,s]=f.useState(!1),[o,i]=f.useState(null);f.useEffect(()=>{const c=window.location.hostname,d=c.split("."),h=d.length>1?d[0].toLowerCase():"",m=h==="admin";if(console.log("Storefront detection:",{hostname:c,parts:d,possibleSub:h,isAdmin:m}),!h||m){console.log("Admin mode detected, skipping storefront logic"),s(!0);return}(async()=>{try{const{data:y}=await Ke.get("/store-subdomain/check",{params:{subdomain:h}});y.success&&y.data&&(e(!0),i({name:y.data.name,description:y.data.description,storeId:y.data.storeId}))}catch{e(!1),i(null)}finally{s(!0)}})()},[]);const l={isStoreFront:r,storeFrontChecked:t,storeFrontMeta:o};return n.jsx(G6.Provider,{value:l,children:n.jsx(H6,{children:a})})},hc=()=>{const a=f.useContext(G6);if(!a)throw new Error("useStorefront must be used within a StorefrontProvider");return a},K6=f.createContext(void 0),Mye=({children:a})=>{const[r,e]=f.useState(null),[t,s]=f.useState(!1),[o,i]=f.useState(null);f.useEffect(()=>{const v=new URLSearchParams(window.location.search),j=v.get("accessToken");if(j){console.log("Token found in URL for storefront, setting in localStorage"),Au.setItem("accessToken",j),v.delete("accessToken");const S=`${window.location.pathname}${v.toString()?"?"+v.toString():""}`;window.history.replaceState({},"",S)}},[]);const l=f.useCallback(async v=>{try{s(!0),i(null);const j=await Ke.post("/storefront/auth/signup",v);if(!j.data.success)throw new Error("Signup failed");return e(j.data.data),Au.setItem("accessToken",j.data.token),ra.success(`Welcome, ${j.data.data.firstName}! Account created successfully.`),j.data.data}catch(j){let S="Signup failed";throw j?.response?.status===409?S="User with this email already exists":j?.response?.status===400?S=j?.response?.data?.message||"Invalid signup data":j?.response?.data?.message?S=j.response.data.message:j?.message&&(S=j.message),i(S),ra.error(S),j}finally{s(!1)}},[]),c=f.useCallback(async v=>{try{s(!0),i(null);const j=await Ke.post("/storefront/auth/login",v);if(!j.data.success)throw new Error("Login failed");return e(j.data.data),Au.setItem("accessToken",j.data.token),ra.success(`Welcome back, ${j.data.data.firstName}!`),j.data.data}catch(j){let S="Login failed";throw j?.response?.status===401?S="Invalid credentials. Please check your email and password.":j?.response?.status===404?S="User not found. Please check your email.":j?.response?.status===400?S=j?.response?.data?.message||"Invalid login data":j?.response?.data?.message?S=j.response.data.message:j?.message&&(S=j.message),i(S),ra.error(S),j}finally{s(!1)}},[]),d=f.useCallback(async()=>{Au.removeItem("accessToken"),e(null),ra.success("Logged out")},[]),h=f.useCallback(async()=>{try{s(!0),i(null);const v=await Ke.get("/storefront/auth/me");return v.data?.success&&v.data?.data?(e(v.data.data),ra.success(`Welcome back, ${v.data.data.firstName}!`),v.data.data):(e(null),null)}catch{return e(null),null}finally{s(!1)}},[]),m=f.useCallback(async v=>{try{if(s(!0),i(null),!(await Ke.post("/storefront/auth/forgot-password",v)).data.success)throw new Error("Forgot password failed");ra.success("Password reset link sent to your email! Check your inbox.")}catch(j){let S="Failed to send reset email";throw j?.response?.status===400?S=j?.response?.data?.message||"Invalid email address":j?.response?.data?.message?S=j.response.data.message:j?.message&&(S=j.message),i(S),ra.error(S),j}finally{s(!1)}},[]),y=f.useCallback(async v=>{try{if(s(!0),i(null),!(await Ke.post("/storefront/auth/reset-password",v)).data.success)throw new Error("Reset password failed");ra.success("Password reset successfully! You can now login with your new password.")}catch(j){let S="Failed to reset password";throw j?.response?.status===400?S=j?.response?.data?.message||"Invalid token or password":j?.response?.data?.message?S=j.response.data.message:j?.message&&(S=j.message),i(S),ra.error(S),j}finally{s(!1)}},[]),x=f.useCallback(async(v,j)=>{try{s(!0),i(null);const S=await Ke.patch(`/storefront/customer/${v}`,j);if(!S.data.success)throw new Error("Update failed");e(S.data.data),ra.success("Profile updated successfully!")}catch(S){let k="Failed to update profile";throw S?.response?.status===400?k=S?.response?.data?.message||"Invalid update data":S?.response?.status===404?k="Customer not found":S?.response?.data?.message?k=S.response.data.message:S?.message&&(k=S.message),i(k),ra.error(k),S}finally{s(!1)}},[]),b={user:r,loading:t,error:o,signup:l,login:c,logout:d,checkAuth:h,setUser:e,forgotPassword:m,resetPassword:y,updateUser:x};return n.jsx(K6.Provider,{value:b,children:a})},Ji=()=>{const a=f.useContext(K6);if(!a)throw new Error("useStorefrontAuth must be used within a StorefrontAuthProvider");return a},Y6=f.createContext(void 0),Iye=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async x=>{try{s(!0),i(null);const b=await Ke.post("/storefront/cart",x);if(!b.data.success)throw new Error("Create cart entry failed");const v=b.data.data;return e(j=>{const S=j.findIndex(k=>k._id===v._id);if(S>=0){const k=j.slice();return k[S]=v,k}return[v,...j]}),v}catch(b){const v=b?.response?.data?.message||b?.message||"Create cart entry failed";throw i(v),b}finally{s(!1)}},[]),c=f.useCallback(async x=>{try{s(!0),i(null);const b=await Ke.get(`/storefront/cart/customer/${x}`);if(!b.data.success)throw new Error("Fetch cart failed");return e(b.data.data||[]),b.data.data||[]}catch(b){const v=b?.response?.data?.message||b?.message||"Fetch cart failed";throw i(v),b}finally{s(!1)}},[]),d=f.useCallback(async x=>{try{s(!0),i(null);const b=await Ke.patch(`/storefront/cart/${x.id}`,{quantity:x.quantity});if(!b.data.success)throw new Error("Update cart entry failed");const v=b.data.data;return e(j=>j.map(S=>S._id===v._id?v:S)),v}catch(b){const v=b?.response?.data?.message||b?.message||"Update cart entry failed";throw i(v),b}finally{s(!1)}},[]),h=f.useCallback(async x=>{try{s(!0),i(null);const b=await Ke.delete(`/storefront/cart/${x}`);if(!b.data.success)throw new Error("Delete cart entry failed");const v=b.data.data;return e(j=>j.filter(S=>S._id!==v._id)),v}catch(b){const v=b?.response?.data?.message||b?.message||"Delete cart entry failed";throw i(v),b}finally{s(!1)}},[]),m=f.useCallback(()=>{e([]),i(null),s(!1)},[]),y={items:r,loading:t,error:o,createCartEntry:l,getCartByCustomerId:c,updateCartEntry:d,deleteCartEntry:h,setItems:e,clear:m};return n.jsx(Y6.Provider,{value:y,children:a})},pw=()=>{const a=f.useContext(Y6);if(!a)throw new Error("useStorefrontCart must be used within a StorefrontCartProvider");return a},Z6=f.createContext(void 0),Rye=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState([]),[o,i]=f.useState(!1),[l,c]=f.useState(null),d=f.useCallback(async x=>{try{i(!0),c(null);const v=(await Ke.get(`/storefront/collections/store/${x}`)).data?.data??[];return e(v),v}catch(b){const v=b?.response?.data?.message||b?.message||"Failed to fetch collections";throw c(v),b}finally{i(!1)}},[]),h=f.useCallback(async(x,b)=>{try{i(!0),c(null);const v=await Ke.get(`/storefront/collections/${x}/products`,{params:{page:b?.page,limit:b?.limit,q:b?.q}});s(v.data?.data??[])}catch(v){const j=v?.response?.data?.message||v?.message||"Failed to fetch products in collection";throw c(j),s([]),v}finally{i(!1)}},[]),m=f.useCallback(()=>{e([]),s([]),c(null)},[]),y={collections:r,products:t,loading:o,error:l,fetchCollectionsByStoreId:d,fetchProductsInCollection:h,clear:m};return n.jsx(Z6.Provider,{value:y,children:a})},X6=()=>{const a=f.useContext(Z6);if(!a)throw new Error("useStorefrontCollections must be used within a StorefrontCollectionsProvider");return a},Q6=f.createContext(void 0),Lye=()=>{const a=f.useContext(Q6);if(a===void 0)throw new Error("useFreeShipping must be used within a FreeShippingProvider");return a},Dye=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(null),[o,i]=f.useState(!1),[l,c]=f.useState(null),[d,h]=f.useState(!1),[m,y]=f.useState(null),S={eligibleDiscounts:r,discountCodeResult:t,loading:o,error:l,discountCodeLoading:d,discountCodeError:m,checkEligibleFreeShippingDiscounts:async k=>{try{i(!0),c(null);const N=await Ke.post("/storefront/discounts/free-shipping/check",k);N.data.success?e(N.data.data.eligibleDiscounts||[]):(c(N.data.message||"Failed to fetch eligible discounts"),e([]))}catch(N){const P=N.response?.data?.message||"Failed to fetch eligible discounts";c(P),e([]),console.error("Error checking eligible free shipping discounts:",N)}finally{i(!1)}},validateFreeShippingDiscountCode:async k=>{try{h(!0),y(null);const N=await Ke.post("/storefront/discounts/free-shipping/validate-code",k);N.data.success?s(N.data.data.discount):(y(N.data.message||"Invalid discount code"),s(null))}catch(N){const P=N.response?.data?.message||"Invalid discount code";y(P),s(null),console.error("Error validating free shipping discount code:",N)}finally{h(!1)}},clearDiscountCodeResult:()=>{s(null),y(null)},clearError:()=>{c(null)}};return n.jsx(Q6.Provider,{value:S,children:a})},J6=f.createContext(void 0),Fye=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async y=>{try{s(!0),i(null);const x=await Ke.post("/storefront/orders",y);if(!x.data.success)throw new Error("Create order failed");const b=x.data.data;return e(v=>[b,...v]),yr.success("Order placed successfully"),b}catch(x){const b=x?.response?.data?.message||x?.message||"Create order failed";throw i(b),x}finally{s(!1)}},[]),c=f.useCallback(async y=>{try{s(!0),i(null);const x=await Ke.get(`/storefront/orders/customer/${y}`);if(!x.data.success)throw new Error("Fetch orders failed");return e(x.data.data||[]),x.data.data||[]}catch(x){const b=x?.response?.data?.message||x?.message||"Fetch orders failed";throw i(b),x}finally{s(!1)}},[]),d=f.useCallback(()=>{e([]),i(null)},[]),h=f.useCallback(()=>{i(null)},[]),m={orders:r,loading:t,error:o,createOrder:l,getOrdersByCustomerId:c,clearOrders:d,clearError:h};return n.jsx(J6.Provider,{value:m,children:a})},q2=()=>{const a=f.useContext(J6);if(!a)throw new Error("useStorefrontOrder must be used within a StorefrontOrderProvider");return a},eM=f.createContext(void 0),Bye=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async()=>{s(!0),i(null);try{const{data:d}=await Ke.get("/themes/themesStatic");d.success?e(d.data||[]):e([])}catch(d){i(d?.response?.data?.message||"Failed to fetch themes"),e([])}finally{s(!1)}},[]),c=f.useMemo(()=>({themes:r,loading:t,error:o,fetchAll:l}),[r,t,o,l]);return n.jsx(eM.Provider,{value:c,children:a})};function zye(){const a=f.useContext(eM);if(!a)throw new Error("useThemes must be used within ThemesProvider");return a}const Uye=f.createContext(void 0),$ye=({children:a})=>{const[r,e]=f.useState([]),[t,s]=f.useState(!1),[o,i]=f.useState(null),l=f.useCallback(async()=>{try{s(!0),i(null);const d=await Ke.get("/triggers"),{success:h,data:m,message:y}=d.data;if(!h)throw new Error(y||"Failed to fetch triggers");return e(m||[]),m||[]}catch(d){const h=d?.response?.data?.message||d?.message||"Failed to fetch triggers";throw i(h),new Error(h)}finally{s(!1)}},[]),c={triggers:r,loading:t,error:o,getAll:l};return n.jsx(Uye.Provider,{value:c,children:a})},Vye=()=>n.jsx("div",{children:"LanguageSettingsPage"}),Wye=()=>n.jsx(pr,{children:n.jsx("div",{children:"MarketSettingsPage"})}),Hye=()=>n.jsx("div",{children:"MetafeildsAndMetaObjectsSettingsPage"}),qye=({open:a,onClose:r})=>{const{storeFrontMeta:e}=hc(),{user:t,checkAuth:s}=Ji(),{items:o,getCartByCustomerId:i,updateCartEntry:l,deleteCartEntry:c,clear:d}=pw(),{eligibleDiscounts:h,loading:m,error:y,fetchEligibleDiscounts:x,amountOffOrderDiscountCodeCheck:b}=Eye(),{eligibleDiscounts:v,discountCodeResult:j,loading:S,error:k,discountCodeLoading:N,discountCodeError:P,checkEligibleFreeShippingDiscounts:R,validateFreeShippingDiscountCode:F,clearDiscountCodeResult:z}=Lye(),{addresses:H,fetchCustomerAddressesByCustomerId:V,loading:W}=H2(),{createOrder:Z,loading:A}=q2(),[q,I]=gr.useState(null),[K,D]=gr.useState(""),[Q,oe]=gr.useState(null),[re,Te]=gr.useState(null),[G,Y]=gr.useState(!1),[Se,fe]=gr.useState(""),[Ee,Ae]=f.useState(!1),[qe,we]=f.useState(""),[Oe,ze]=f.useState(""),[We,pt]=f.useState("cod"),Pt=f.useRef(null),ee=f.useRef(null),Ne=f.useRef(null);f.useEffect(()=>{s()},[s]),f.useEffect(()=>{t?._id&&i(t._id).catch(()=>{})},[t?._id]),f.useEffect(()=>{Ne.current=null},[t?._id]),f.useEffect(()=>{if(t?._id&&e?.storeId&&o.length>0){const se=o.map(Ue=>{const Ge=typeof Ue.productVariantId=="object"?Ue.productVariantId:null;return{productId:Ge?._id||"",quantity:Ue.quantity,price:Ge?.price||0}});x(e.storeId,t._id,se);const Le=t?.defaultAddress?H.find(Ue=>Ue._id===t.defaultAddress):null;R({storeId:e.storeId,customerId:t._id,cartItems:se,shippingAddress:Le?{country:Le.country,state:Le.state,city:Le.city}:void 0,currentShippingRate:10})}},[t?._id,e?.storeId,o,x]);const Ie=f.useCallback(async se=>{if(!se.trim()||!t?._id||!e?.storeId||o.length===0){oe(null),Te(null);return}Y(!0),Te(null);try{const Le=o.map(Ge=>{const ie=typeof Ge.productVariantId=="object"?Ge.productVariantId:null;return{productId:ie?._id||"",quantity:Ge.quantity,price:ie?.price||0}}),Ue=await b(e.storeId,t._id,Le,se.trim());Ue?(oe(Ue),Te(null)):(oe(null),Te("Invalid discount code"))}catch{oe(null),Te("Failed to validate discount code")}finally{Y(!1)}},[t?._id,e?.storeId,o,b]),ne=f.useCallback(async se=>{if(!se.trim()||!t?._id||!e?.storeId||o.length===0){z();return}try{const Le=o.map(Ge=>{const ie=typeof Ge.productVariantId=="object"?Ge.productVariantId:null;return{productId:ie?._id||"",quantity:Ge.quantity,price:ie?.price||0}}),Ue=t?.defaultAddress?H.find(Ge=>Ge._id===t.defaultAddress):null;await F({storeId:e.storeId,customerId:t._id,cartItems:Le,discountCode:se.trim(),shippingAddress:Ue?{country:Ue.country,state:Ue.state,city:Ue.city}:void 0,currentShippingRate:10})}catch(Le){console.error("Error validating free shipping code:",Le)}},[t?._id,e?.storeId,o,F,z]);f.useCallback(se=>{D(se),Pt.current&&clearTimeout(Pt.current),Pt.current=window.setTimeout(()=>{Ie(se)},500)},[Ie]),f.useCallback(se=>{fe(se),ee.current&&clearTimeout(ee.current),ee.current=window.setTimeout(()=>{ne(se)},500)},[ne]),f.useEffect(()=>()=>{Pt.current&&clearTimeout(Pt.current),ee.current&&clearTimeout(ee.current)},[]);const M=gr.useMemo(()=>o.reduce((se,Le)=>{const Ge=(typeof Le.productVariantId=="object"?Le.productVariantId:null)?.price??0;return se+Ge*Le.quantity},0),[o]),U=gr.useMemo(()=>Q?Q.discountAmount||0:q&&q.discountAmount||0,[Q,q]),J=gr.useMemo(()=>Math.max(0,M-U),[M,U]),ce=0,ue=0,xe=()=>{if(!t){r();return}if(H.length===0){r();return}t.defaultAddress?we(t.defaultAddress):H.length>0&&we(H[0]._id),Ae(!0)},he=async()=>{if(!(!qe||!t?._id))try{const se=o.map(Ue=>{const ie=(typeof Ue.productVariantId=="object"?Ue.productVariantId:null)?.price??0;return{productVariantId:typeof Ue.productVariantId=="object"?Ue.productVariantId._id:Ue.productVariantId,quantity:Ue.quantity,price:ie,total:ie*Ue.quantity}});if(!e?.storeId)throw new Error("Store ID is required");const Le={storeId:e.storeId,shippingAddressId:qe,billingAddressId:Oe||void 0,items:se,paymentMethod:We,subtotal:M,tax:ue,shippingCost:ce,total:J+ce+ue};await Z(Le),Ae(!1),await Promise.all(o.map(Ue=>c(Ue._id).catch(()=>{}))),d()}catch(se){console.error("Failed to create order:",se)}};return n.jsx(n.Fragment,{children:n.jsxs(Sce,{anchor:"right",open:a,onClose:r,PaperProps:{sx:{width:{xs:"100%",sm:420},bgcolor:"#fff"}},children:[n.jsxs(Et,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:2,py:1.5,borderBottom:"1px solid #eee"},children:[n.jsx(et,{variant:"h6",fontWeight:800,children:"Your Cart"}),n.jsx($n,{onClick:r,children:n.jsx(_u,{})})]}),n.jsx(Et,{sx:{p:2,pb:3,display:"flex",flexDirection:"column",height:"100%"},children:o.length===0?n.jsxs(Et,{sx:{textAlign:"center",py:6},children:[n.jsx(et,{variant:"h6",color:"text.secondary",sx:{mb:2},children:"Your cart is empty"}),n.jsx($r,{variant:"contained",onClick:r,children:"Continue Shopping"})]}):n.jsxs(n.Fragment,{children:[n.jsx(_r,{flex:1,spacing:2,sx:{overflowY:"auto",pr:.5},children:o.map(se=>{const Le=typeof se.productVariantId=="object"?se.productVariantId:null,Ue=Le?.images?.[0],Ge=Le?.sku||"Product",ie=Le?.price??0;return n.jsx(Vu,{variant:"outlined",children:n.jsx(fp,{sx:{p:2},children:n.jsxs(_r,{direction:"row",spacing:2,alignItems:"center",children:[n.jsx(Et,{component:"img",src:Ue||"https://via.placeholder.com/96",alt:Ge,sx:{width:72,height:72,objectFit:"contain",borderRadius:1,bgcolor:"#eee",flexShrink:0}}),n.jsxs(Et,{sx:{flex:1,minWidth:0},children:[n.jsx(et,{variant:"subtitle1",fontWeight:700,noWrap:!0,title:Ge,sx:{color:"#111"},children:Ge}),Le?.optionValues&&n.jsx(et,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:Object.entries(Le.optionValues).map(([_e,le])=>`${_e}: ${le}`).join(", ")})]}),n.jsxs(_r,{spacing:1,alignItems:"flex-end",sx:{minWidth:140},children:[n.jsxs(et,{variant:"body1",fontWeight:700,sx:{color:"#111"},children:["$",(ie/100*se.quantity).toFixed(2)]}),n.jsxs(_r,{direction:"row",spacing:1,alignItems:"center",children:[n.jsx($r,{size:"small",variant:"outlined",onClick:()=>l({id:se._id,quantity:Math.max(1,se.quantity-1)}),children:"-"}),n.jsx(et,{variant:"body2",sx:{width:24,textAlign:"center"},children:se.quantity}),n.jsx($r,{size:"small",variant:"outlined",onClick:()=>l({id:se._id,quantity:se.quantity+1}),children:"+"})]}),n.jsx($n,{color:"error",onClick:()=>c(se._id),size:"small",children:n.jsx(Zpe,{})})]})]})})},se._id)})}),n.jsxs(Et,{sx:{mt:2},children:[n.jsxs(_r,{spacing:1,sx:{mb:1},children:[n.jsxs(_r,{direction:"row",justifyContent:"space-between",children:[n.jsx(et,{variant:"body2",color:"text.secondary",children:"Subtotal"}),n.jsxs(et,{variant:"body2",fontWeight:700,sx:{color:"#111"},children:["$",(M/100).toFixed(2)]})]}),n.jsxs(_r,{direction:"row",justifyContent:"space-between",children:[n.jsx(et,{variant:"body1",fontWeight:800,sx:{color:"#111"},children:"Total"}),n.jsxs(et,{variant:"body1",fontWeight:800,sx:{color:"#111"},children:["$",(J/100).toFixed(2)]})]})]}),n.jsx($r,{fullWidth:!0,variant:"contained",color:"primary",onClick:xe,disabled:o.length===0,children:"Pay Now"})]})]})}),n.jsxs(gl,{open:Ee,onClose:()=>Ae(!1),maxWidth:"md",fullWidth:!0,children:[n.jsx(vl,{children:n.jsx(et,{variant:"h6",fontWeight:700,children:"Checkout"})}),n.jsx(xl,{children:n.jsxs(_r,{spacing:3,sx:{mt:1},children:[n.jsxs(rc,{fullWidth:!0,required:!0,children:[n.jsx(Bu,{id:"shipping-address-label",children:"Shipping Address"}),n.jsx(Nl,{labelId:"shipping-address-label",label:"Shipping Address",value:qe,onChange:se=>we(se.target.value),children:H.map(se=>n.jsx(ss,{value:se._id,children:n.jsxs(Et,{children:[n.jsxs(et,{variant:"body2",fontWeight:500,children:[se.firstName," ",se.lastName]}),n.jsxs(et,{variant:"caption",color:"text.secondary",children:[se.address,", ",se.city,", ",se.state," ",se.pinCode]})]})},se._id))})]}),n.jsxs(rc,{fullWidth:!0,children:[n.jsx(Bu,{id:"billing-address-label",children:"Billing Address (Optional)"}),n.jsxs(Nl,{labelId:"billing-address-label",label:"Billing Address (Optional)",value:Oe,onChange:se=>ze(se.target.value),children:[n.jsx(ss,{value:"",children:n.jsx("em",{children:"Same as shipping address"})}),H.map(se=>n.jsx(ss,{value:se._id,children:n.jsxs(Et,{children:[n.jsxs(et,{variant:"body2",fontWeight:500,children:[se.firstName," ",se.lastName]}),n.jsxs(et,{variant:"caption",color:"text.secondary",children:[se.address,", ",se.city,", ",se.state," ",se.pinCode]})]})},se._id))]})]}),n.jsxs(rc,{fullWidth:!0,children:[n.jsx(Bu,{id:"payment-method-label",children:"Payment Method"}),n.jsxs(Nl,{labelId:"payment-method-label",label:"Payment Method",value:We,onChange:se=>pt(se.target.value),children:[n.jsx(ss,{value:"cod",children:"Cash on Delivery"}),n.jsx(ss,{value:"credit_card",children:"Credit Card"}),n.jsx(ss,{value:"paypal",children:"PayPal"}),n.jsx(ss,{value:"other",children:"Other"})]})]}),n.jsx(Go,{}),n.jsxs(Et,{children:[n.jsx(et,{variant:"subtitle2",fontWeight:600,sx:{mb:1},children:"Order Summary"}),n.jsxs(_r,{spacing:.5,children:[n.jsxs(Et,{sx:{display:"flex",justifyContent:"space-between"},children:[n.jsx(et,{variant:"body2",color:"text.secondary",children:"Subtotal"}),n.jsxs(et,{variant:"body2",children:["$",(M/100).toFixed(2)]})]}),U>0&&n.jsxs(Et,{sx:{display:"flex",justifyContent:"space-between"},children:[n.jsx(et,{variant:"body2",color:"text.secondary",children:"Discount"}),n.jsxs(et,{variant:"body2",color:"success.main",children:["-$",(U/100).toFixed(2)]})]}),n.jsxs(Et,{sx:{display:"flex",justifyContent:"space-between"},children:[n.jsx(et,{variant:"body2",color:"text.secondary",children:"Shipping"}),n.jsxs(et,{variant:"body2",children:["$",(ce/100).toFixed(2)]})]}),ue>0,n.jsx(Go,{sx:{my:.5}}),n.jsxs(Et,{sx:{display:"flex",justifyContent:"space-between"},children:[n.jsx(et,{variant:"body1",fontWeight:700,children:"Total"}),n.jsxs(et,{variant:"body1",fontWeight:700,children:["$",((J+ce+ue)/100).toFixed(2)]})]})]})]})]})}),n.jsxs(yl,{children:[n.jsx($r,{onClick:()=>Ae(!1),children:"Cancel"}),n.jsx($r,{variant:"contained",onClick:he,disabled:!qe||A,sx:{bgcolor:"#667eea","&:hover":{bgcolor:"#5568d3"}},children:A?"Placing Order...":"Place Order"})]})]})]})})},tm=({showBack:a,onBack:r,showSearch:e,searchValue:t,onSearchChange:s})=>{const o=mr(),i=uc(),l=R2(i.breakpoints.down("md")),{storeFrontMeta:c}=hc(),{items:d}=pw(),{user:h,logout:m}=Ji(),[y,x]=gr.useState(null),[b,v]=gr.useState(!1),[j,S]=gr.useState(!1),k=!!y;gr.useEffect(()=>{const R=setTimeout(()=>v(!0),100);return()=>clearTimeout(R)},[]);const N=R=>{x(R.currentTarget)},P=()=>x(null);return n.jsxs(n.Fragment,{children:[n.jsx(Joe,{position:"fixed",elevation:0,sx:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderBottom:"1px solid rgba(0, 0, 0, 0.08)",color:"text.primary",transition:"all 0.3s ease"},children:n.jsxs(hfe,{sx:{gap:2,py:1,minHeight:"64px !important"},children:[a&&n.jsx(yb,{direction:"right",in:b,timeout:300,children:n.jsx($n,{"aria-label":"back",onClick:()=>r?r():o(-1),sx:{bgcolor:"rgba(102, 126, 234, 0.1)",color:"#667eea","&:hover":{bgcolor:"rgba(102, 126, 234, 0.2)",transform:"scale(1.05)"},transition:"all 0.2s ease"},children:n.jsx(e6,{fontSize:"small"})})}),n.jsx(jl,{in:b,timeout:500,children:n.jsxs(Et,{sx:{display:"flex",alignItems:"center",gap:1.5,cursor:"pointer","&:hover":{opacity:.8},transition:"opacity 0.2s ease"},onClick:()=>o("/"),children:[n.jsx(Et,{sx:{width:40,height:40,borderRadius:2,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(102, 126, 234, 0.3)"},children:n.jsx(dhe,{sx:{color:"white",fontSize:20}})}),n.jsx(et,{variant:"h6",fontWeight:700,sx:{color:"text.primary",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:c?.name||"Store"})]})}),e&&n.jsx(jl,{in:b,timeout:700,children:n.jsx(Pn,{size:"small",placeholder:"Search products...",fullWidth:!0,sx:{maxWidth:l?200:400,ml:2,"& .MuiOutlinedInput-root":{borderRadius:3,backgroundColor:"rgba(0, 0, 0, 0.04)","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.08)"},"&.Mui-focused":{backgroundColor:"white",boxShadow:"0 0 0 2px rgba(102, 126, 234, 0.2)"}}},InputProps:{startAdornment:n.jsx(Zi,{position:"start",children:n.jsx(z2,{sx:{color:"#667eea",fontSize:20}})})},value:t||"",onChange:R=>s&&s(R.target.value)})}),n.jsx(Et,{sx:{flexGrow:1}}),n.jsx(jl,{in:b,timeout:900,children:n.jsx($n,{"aria-label":"cart",onClick:()=>S(!0),sx:{bgcolor:"rgba(102, 126, 234, 0.1)",color:"#667eea","&:hover":{bgcolor:"rgba(102, 126, 234, 0.2)",transform:"scale(1.05)"},transition:"all 0.2s ease"},children:n.jsx(Mie,{badgeContent:d.length,color:"error",sx:{"& .MuiBadge-badge":{fontSize:"0.75rem",fontWeight:600,background:"linear-gradient(135deg, #ff4757 0%, #ff3742 100%)",boxShadow:"0 2px 8px rgba(255, 71, 87, 0.3)"}},children:n.jsx(a6,{})})})}),h&&n.jsx(jl,{in:b,timeout:1100,children:n.jsx(os,{avatar:n.jsx(rp,{sx:{width:24,height:24,bgcolor:"#667eea",fontSize:"0.75rem",fontWeight:600},children:h.firstName?.charAt(0)?.toUpperCase()}),label:`Hello, ${h.firstName}`,variant:"outlined",sx:{borderColor:"rgba(102, 126, 234, 0.3)",color:"#667eea",fontWeight:500,"&:hover":{bgcolor:"rgba(102, 126, 234, 0.05)"}}})}),n.jsx(jl,{in:b,timeout:1300,children:n.jsx($n,{"aria-label":"account",onClick:N,sx:{bgcolor:h?"rgba(102, 126, 234, 0.1)":"rgba(0, 0, 0, 0.04)",color:h?"#667eea":"text.secondary","&:hover":{bgcolor:h?"rgba(102, 126, 234, 0.2)":"rgba(0, 0, 0, 0.08)",transform:"scale(1.05)"},transition:"all 0.2s ease"},children:n.jsx(Kpe,{})})}),n.jsx(P2,{anchorEl:y,open:k,onClose:P,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{borderRadius:3,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.12)",border:"1px solid rgba(0, 0, 0, 0.08)",mt:1}},children:h?[n.jsxs(ss,{sx:{color:"text.primary",fontWeight:500,py:1.5,px:2,"&:hover":{bgcolor:"rgba(102, 126, 234, 0.08)"}},onClick:()=>{P(),o("/profile")},children:[n.jsx(B2,{sx:{mr:1.5,fontSize:20,color:"#667eea"}}),"Profile"]},"profile"),n.jsxs(ss,{sx:{color:"text.primary",fontWeight:500,py:1.5,px:2,"&:hover":{bgcolor:"rgba(102, 126, 234, 0.08)"}},onClick:()=>{P(),o("/my-orders")},children:[n.jsx(U2,{sx:{mr:1.5,fontSize:20,color:"#667eea"}}),"My Orders"]},"my-orders"),n.jsxs(ss,{sx:{color:"error.main",fontWeight:500,py:1.5,px:2,"&:hover":{bgcolor:"rgba(244, 67, 54, 0.08)"}},onClick:()=>{P(),m()},children:[n.jsx(ahe,{sx:{mr:1.5,fontSize:20}}),"Logout"]},"logout")]:[n.jsxs(ss,{sx:{color:"text.primary",fontWeight:500,py:1.5,px:2,"&:hover":{bgcolor:"rgba(102, 126, 234, 0.08)"}},onClick:()=>{P(),o("/auth/login")},children:[n.jsx(nhe,{sx:{mr:1.5,fontSize:20,color:"#667eea"}}),"Login"]},"login"),n.jsxs(ss,{sx:{color:"text.primary",fontWeight:500,py:1.5,px:2,"&:hover":{bgcolor:"rgba(102, 126, 234, 0.08)"}},onClick:()=>{P(),o("/auth/signup")},children:[n.jsx(she,{sx:{mr:1.5,fontSize:20,color:"#667eea"}}),"Signup"]},"signup")]})]})}),n.jsx(qye,{open:j,onClose:()=>S(!1)})]})},Gye=()=>{const{storeFrontMeta:a}=hc(),{products:r,loading:e,error:t,pagination:s,fetchProductsByStoreId:o}=q6(),{user:i,logout:l,checkAuth:c}=Ji(),{items:d,getCartByCustomerId:h}=pw(),{collections:m,loading:y,error:x,fetchCollectionsByStoreId:b}=X6(),v=mr(),j=uc(),S=R2(j.breakpoints.down("md")),[k,N]=gr.useState(""),[P,R]=gr.useState(!1),[F,z]=gr.useState(!1);return f.useEffect(()=>{a?.storeId&&o({storeId:a.storeId,page:1,limit:12})},[a?.storeId]),f.useEffect(()=>{a?.storeId&&b(a.storeId)},[a?.storeId]),f.useEffect(()=>{c()},[c]),f.useEffect(()=>{i?._id&&h(i._id).catch(()=>{})},[i?._id]),f.useEffect(()=>{const H=setTimeout(()=>z(!0),300);return()=>clearTimeout(H)},[]),n.jsxs(Et,{sx:{bgcolor:"#fafafa",minHeight:"100vh",color:"text.primary"},children:[n.jsx(tm,{showSearch:!0,searchValue:k,onSearchChange:N}),n.jsxs(gl,{open:P,onClose:()=>R(!1),children:[n.jsx(vl,{children:"Logout"}),n.jsx(xl,{children:n.jsx(et,{variant:"body2",color:"text.secondary",children:"Are you sure you want to logout?"})}),n.jsxs(yl,{children:[n.jsx($r,{onClick:()=>R(!1),children:"No"}),n.jsx($r,{color:"error",variant:"contained",onClick:()=>{l(),R(!1)},children:"Yes"})]})]}),n.jsxs(Et,{sx:{position:"relative",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",overflow:"hidden",minHeight:"70vh",display:"flex",alignItems:"center"},children:[n.jsx(Et,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,background:'url("data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%23ffffff" fill-opacity="0.1"%3E%3Ccircle cx="30" cy="30" r="2"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")',opacity:.3}}),n.jsx(Mo,{maxWidth:"lg",sx:{position:"relative",zIndex:1},children:n.jsx(jl,{in:F,timeout:800,children:n.jsxs(Et,{children:[n.jsx(et,{variant:S?"h3":"h2",fontWeight:900,sx:{mb:2,background:"linear-gradient(45deg, #ffffff 30%, #f0f0f0 90%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:a?.name||"Our Store"}),n.jsx(et,{variant:S?"h6":"h5",sx:{opacity:.9,maxWidth:S?"100%":"70%",lineHeight:1.6},children:a?.description||"Discover amazing products at unbeatable prices"})]})})})]}),n.jsx(Et,{sx:{py:8,bgcolor:"#f8f9fa"},children:n.jsxs(Mo,{maxWidth:"lg",children:[n.jsxs(Et,{sx:{textAlign:"center",mb:6},children:[n.jsx(et,{variant:"h4",fontWeight:800,sx:{mb:2},children:"Shop by Collections"}),n.jsx(et,{variant:"body1",color:"text.secondary",sx:{maxWidth:600,mx:"auto"},children:"Discover our curated collections featuring the latest trends and timeless classics"})]}),y&&n.jsx(Et,{sx:{textAlign:"center",py:4},children:n.jsx(et,{variant:"body1",color:"text.secondary",children:"Loading collections..."})}),x&&n.jsx(Et,{sx:{textAlign:"center",py:4},children:n.jsx(et,{variant:"body1",color:"error",children:x})}),!y&&m.length>0&&n.jsx(Et,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)"},gap:3},children:m.map((H,V)=>n.jsx(yb,{direction:"up",in:F,timeout:600+V*100,children:n.jsx(Vu,{sx:{height:"100%",borderRadius:3,overflow:"hidden",transition:"all 0.3s ease","&:hover":{transform:"translateY(-8px)",boxShadow:"0 20px 40px rgba(0,0,0,0.1)"}},children:n.jsxs(kA,{sx:{height:"100%",p:0},onClick:()=>v(`/collections/${H._id}/${H.urlHandle}`),children:[n.jsxs(Et,{sx:{height:200,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[n.jsx(et,{variant:"h4",fontWeight:800,color:"white",sx:{opacity:.9},children:H.title.charAt(0)}),n.jsxs(Et,{sx:{position:"absolute",top:16,right:16,display:"flex",gap:1},children:[H.onlineStorePublishing&&n.jsx(os,{size:"small",label:"Online",sx:{bgcolor:"rgba(255,255,255,0.2)",color:"white"}}),H.pointOfSalePublishing&&n.jsx(os,{size:"small",label:"POS",sx:{bgcolor:"rgba(255,255,255,0.2)",color:"white"}})]})]}),n.jsxs(fp,{sx:{p:3},children:[n.jsx(et,{variant:"h6",fontWeight:700,sx:{mb:1},children:H.title}),n.jsx(et,{variant:"body2",color:"text.secondary",sx:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",mb:2},children:H.metaDescription||H.description}),n.jsx(os,{size:"small",variant:"outlined",label:H.urlHandle,sx:{fontSize:"0.75rem"}})]})]})})},H._id))})]})}),n.jsx(Et,{sx:{py:8,bgcolor:"white"},children:n.jsxs(Mo,{maxWidth:"lg",children:[n.jsxs(Et,{sx:{textAlign:"center",mb:6},children:[n.jsx(et,{variant:"h4",fontWeight:800,sx:{mb:2},children:"Featured Products"}),n.jsx(et,{variant:"body1",color:"text.secondary",sx:{maxWidth:600,mx:"auto"},children:"Handpicked products that our customers love"})]}),e&&n.jsx(Et,{sx:{textAlign:"center",py:4},children:n.jsx(et,{variant:"body1",color:"text.secondary",children:"Loading products..."})}),t&&n.jsx(Et,{sx:{textAlign:"center",py:4},children:n.jsx(et,{variant:"body1",color:"error",children:t})}),!e&&n.jsx(Et,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)"},gap:3},children:r.filter(H=>{if(!k)return!0;const V=k.toLowerCase(),W=H.title?.toLowerCase().includes(V),Z=(H.vendor?.name||"").toLowerCase().includes(V);return W||Z}).map((H,V)=>n.jsx(yb,{direction:"up",in:F,timeout:800+V*100,children:n.jsx(Et,{children:n.jsx(Kye,{product:H,onClick:()=>v(`/products/${H._id}`)})})},H._id))}),s?.hasNext&&n.jsx(Et,{sx:{textAlign:"center",mt:6},children:n.jsx($r,{variant:"outlined",size:"large",onClick:()=>a?.storeId&&o({storeId:a.storeId,page:(s?.page||1)+1,limit:s?.limit||12}),sx:{px:4,py:1.5,borderRadius:3,textTransform:"none",fontWeight:600},children:"Load More Products"})})]})}),n.jsx(Et,{component:"footer",sx:{background:"linear-gradient(135deg, #2c3e50 0%, #34495e 100%)",color:"white",py:6},children:n.jsxs(Mo,{maxWidth:"lg",children:[n.jsxs(Et,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"2fr 1fr 1fr 2fr"},gap:4},children:[n.jsxs(Et,{children:[n.jsx(et,{variant:"h6",fontWeight:700,sx:{mb:2},children:a?.name||"Our Store"}),n.jsx(et,{variant:"body2",sx:{opacity:.8,mb:2},children:a?.description||"Your trusted online shopping destination for quality products at great prices."}),n.jsxs(_r,{direction:"row",spacing:1,children:[n.jsx($n,{size:"small",sx:{color:"white",opacity:.8},children:n.jsx(fhe,{})}),n.jsx($n,{size:"small",sx:{color:"white",opacity:.8},children:n.jsx(a6,{})})]})]}),n.jsxs(Et,{children:[n.jsx(et,{variant:"subtitle1",fontWeight:600,sx:{mb:2},children:"Quick Links"}),n.jsxs(_r,{spacing:1,children:[n.jsx($r,{size:"small",sx:{color:"white",opacity:.8,justifyContent:"flex-start",p:0},children:"About Us"}),n.jsx($r,{size:"small",sx:{color:"white",opacity:.8,justifyContent:"flex-start",p:0},children:"Contact"}),n.jsx($r,{size:"small",sx:{color:"white",opacity:.8,justifyContent:"flex-start",p:0},children:"FAQ"})]})]}),n.jsxs(Et,{children:[n.jsx(et,{variant:"subtitle1",fontWeight:600,sx:{mb:2},children:"Support"}),n.jsxs(_r,{spacing:1,children:[n.jsx($r,{size:"small",sx:{color:"white",opacity:.8,justifyContent:"flex-start",p:0},children:"Help Center"}),n.jsx($r,{size:"small",sx:{color:"white",opacity:.8,justifyContent:"flex-start",p:0},children:"Shipping Info"}),n.jsx($r,{size:"small",sx:{color:"white",opacity:.8,justifyContent:"flex-start",p:0},children:"Returns"})]})]}),n.jsxs(Et,{children:[n.jsx(et,{variant:"subtitle1",fontWeight:600,sx:{mb:2},children:"Newsletter"}),n.jsx(et,{variant:"body2",sx:{opacity:.8,mb:2},children:"Subscribe to get updates on new products and exclusive offers."}),n.jsx(_r,{direction:"row",spacing:1,children:n.jsx($r,{variant:"outlined",size:"small",sx:{borderColor:"rgba(255,255,255,0.3)",color:"white","&:hover":{borderColor:"white"}},children:"Subscribe"})})]})]}),n.jsx(Et,{sx:{borderTop:"1px solid rgba(255,255,255,0.1)",mt:4,pt:3},children:n.jsxs(_r,{direction:{xs:"column",sm:"row"},alignItems:"center",justifyContent:"space-between",spacing:2,children:[n.jsxs(et,{variant:"body2",sx:{opacity:.8},children:[" ",new Date().getFullYear()," ",a?.name||"Our Store",". All rights reserved."]}),n.jsxs(_r,{direction:"row",spacing:2,children:[n.jsx($r,{size:"small",sx:{color:"white",opacity:.8},children:"Privacy Policy"}),n.jsx($r,{size:"small",sx:{color:"white",opacity:.8},children:"Terms of Service"})]})]})})]})})]})},Kye=({product:a,onClick:r})=>{const e=Array.isArray(a.imageUrls)&&a.imageUrls.length>0?a.imageUrls:["https://via.placeholder.com/600x400?text=Product"],[t,s]=gr.useState(0),[o,i]=gr.useState(!1);gr.useEffect(()=>{if(e.length<=1)return;const c=setInterval(()=>{s(d=>(d+1)%e.length)},3e3);return()=>clearInterval(c)},[e.length]);const l=a.compareAtPrice&&a.compareAtPrice>a.price?Math.round((a.compareAtPrice-a.price)/a.compareAtPrice*100):0;return n.jsx(Vu,{sx:{height:"100%",position:"relative",overflow:"hidden",cursor:"pointer",borderRadius:3,border:"1px solid #f0f0f0",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"translateY(-8px)",boxShadow:"0 20px 40px rgba(0,0,0,0.1)","& .product-image":{transform:"scale(1.05)"}}},onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:n.jsxs(kA,{onClick:r,sx:{height:"100%",display:"flex",flexDirection:"column",alignItems:"stretch",p:0},children:[n.jsxs(Et,{sx:{position:"relative",height:240,overflow:"hidden",background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)"},children:[e.map((c,d)=>n.jsx(Et,{component:"img",className:"product-image",src:c,alt:a.title,sx:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"contain",opacity:d===t?1:0,transition:"all 0.6s cubic-bezier(0.4, 0, 0.2, 1)"}},d)),l>0&&n.jsxs(Et,{sx:{position:"absolute",top:12,left:12,bgcolor:"#ff4757",color:"white",px:1.5,py:.5,borderRadius:2,fontSize:"0.75rem",fontWeight:700,zIndex:2},children:["-",l,"%"]}),n.jsx(Et,{sx:{position:"absolute",top:12,right:12,opacity:o?1:0,transition:"opacity 0.3s ease",zIndex:2},children:n.jsx($n,{size:"small",sx:{bgcolor:"rgba(255,255,255,0.9)","&:hover":{bgcolor:"white"}},children:n.jsx(Hc,{fontSize:"small"})})}),o&&n.jsx(Et,{sx:{position:"absolute",bottom:12,left:12,right:12,opacity:o?1:0,transition:"opacity 0.3s ease",zIndex:2},children:n.jsx($r,{variant:"contained",size:"small",fullWidth:!0,sx:{bgcolor:"rgba(0,0,0,0.8)",color:"white",borderRadius:2,textTransform:"none",fontWeight:600,"&:hover":{bgcolor:"rgba(0,0,0,0.9)"}},children:"Quick View"})})]}),n.jsxs(fp,{sx:{flexGrow:1,p:3},children:[n.jsx(et,{variant:"h6",fontWeight:700,sx:{mb:.5,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",lineHeight:1.3},children:a.title}),n.jsxs(et,{variant:"body2",color:"text.secondary",sx:{mb:1.5,display:"flex",alignItems:"center",gap:.5},children:[n.jsx(Et,{sx:{width:6,height:6,borderRadius:"50%",bgcolor:"#667eea"}}),a.vendor?.name||"Brand"]}),n.jsxs(_r,{direction:"row",spacing:1,alignItems:"center",sx:{mb:1},children:[n.jsxs(et,{variant:"h6",fontWeight:800,color:"primary",children:["$",(a.price/100).toFixed(2)]}),a.compareAtPrice&&a.compareAtPrice>a.price&&n.jsxs(et,{variant:"body2",color:"text.secondary",sx:{textDecoration:"line-through",opacity:.7},children:["$",(a.compareAtPrice/100).toFixed(2)]})]}),n.jsxs(_r,{direction:"row",alignItems:"center",spacing:.5,children:[n.jsx(Hc,{sx:{fontSize:16,color:"#ffc107"}}),n.jsx(Hc,{sx:{fontSize:16,color:"#ffc107"}}),n.jsx(Hc,{sx:{fontSize:16,color:"#ffc107"}}),n.jsx(Hc,{sx:{fontSize:16,color:"#ffc107"}}),n.jsx(Hc,{sx:{fontSize:16,color:"#e0e0e0"}}),n.jsx(et,{variant:"caption",color:"text.secondary",sx:{ml:.5},children:"(4.0)"})]})]})]})})},Yye=64,Zye=()=>{const a=mr(),{collectionId:r,urlHandle:e}=qa(),{storeFrontMeta:t}=hc(),{collections:s,products:o,fetchCollectionsByStoreId:i,fetchProductsInCollection:l,loading:c}=X6(),{user:d}=Ji();f.useEffect(()=>{t?.storeId&&s.length===0&&i(t.storeId).catch(()=>{})},[t?.storeId]),f.useEffect(()=>{r&&l(r).catch(()=>{})},[r,l]);const h=s.find(m=>m._id===r);return n.jsxs(Et,{sx:{bgcolor:"#fafafa",minHeight:"100vh",color:"text.primary"},children:[n.jsx(tm,{showBack:!0}),n.jsxs(Mo,{maxWidth:"lg",sx:{pt:`${Yye+16}px`,pb:6},children:[c&&n.jsx(et,{variant:"body1",color:"text.secondary",children:"Loading collection..."}),!c&&!h&&n.jsxs(_r,{spacing:2,alignItems:"center",sx:{py:6},children:[n.jsx(et,{variant:"h5",fontWeight:800,children:"Collection not found"}),n.jsx($r,{variant:"outlined",onClick:()=>a("/"),children:"Go to Home"})]}),h&&n.jsxs(Et,{children:[n.jsx(et,{variant:"h3",fontWeight:800,children:h.title}),n.jsxs(_r,{direction:"row",spacing:1,sx:{mt:1},children:[n.jsx(os,{label:e,size:"small",variant:"outlined"}),h.onlineStorePublishing&&n.jsx(os,{label:"Online",color:"primary",size:"small"}),h.pointOfSalePublishing&&n.jsx(os,{label:"POS",color:"success",size:"small"})]}),n.jsx(et,{variant:"body1",color:"text.secondary",sx:{mt:2},children:h.metaDescription||h.description}),n.jsxs(Et,{sx:{mt:4},children:[n.jsx(et,{variant:"h5",fontWeight:600,sx:{mb:3},children:"Products in this Collection"}),c&&n.jsx(et,{variant:"body1",color:"text.secondary",children:"Loading products..."}),!c&&o.length===0&&n.jsx(et,{variant:"body1",color:"text.secondary",children:"No products found in this collection."}),!c&&o.length>0&&n.jsx(Et,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)"},gap:3},children:o.map(m=>n.jsx(Et,{children:n.jsxs(Vu,{sx:{height:"100%",display:"flex",flexDirection:"column",cursor:"pointer",transition:"all 0.3s ease","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 25px rgba(0, 0, 0, 0.15)"}},onClick:()=>a(`/products/${m._id}`),children:[m.imageUrls&&m.imageUrls.length>0&&n.jsx(_A,{component:"img",height:"200",image:m.imageUrls[0],alt:m.title,sx:{objectFit:"contain"}}),n.jsxs(fp,{sx:{flexGrow:1},children:[n.jsx(et,{variant:"h6",fontWeight:600,noWrap:!0,children:m.title}),m.vendor&&n.jsxs(et,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:["by ",m.vendor.name]}),m.category&&n.jsx(os,{label:m.category.name,size:"small",variant:"outlined",sx:{mt:1}}),n.jsxs(_r,{direction:"row",spacing:1,sx:{mt:2},children:[n.jsxs(et,{variant:"h6",fontWeight:600,color:"primary",children:["$",m.price]}),m.compareAtPrice&&m.compareAtPrice>m.price&&n.jsxs(et,{variant:"body2",color:"text.secondary",sx:{textDecoration:"line-through"},children:["$",m.compareAtPrice]})]}),m.sku&&n.jsxs(et,{variant:"caption",color:"text.secondary",children:["SKU: ",m.sku]})]})]})},m._id))})]})]})]})]})},Xye=()=>{const a=mr(),{forgotPassword:r,loading:e}=Ji(),{storeFrontMeta:t}=hc(),[s,o]=f.useState(""),i=async l=>{if(l.preventDefault(),!(!s.trim()||!t?.storeId))try{await r({email:s.trim(),storeId:t.storeId})}catch{}};return n.jsx(Et,{sx:{bgcolor:"#fafafa",minHeight:"100vh",display:"flex",alignItems:"center",py:6},children:n.jsx(Mo,{maxWidth:"sm",children:n.jsxs(ta,{elevation:1,sx:{p:4},children:[n.jsx(et,{variant:"h5",fontWeight:800,children:"Forgot password"}),n.jsx(et,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:"Enter your email address and we'll send you a reset link."}),n.jsx("form",{onSubmit:i,children:n.jsxs(_r,{spacing:2,sx:{mt:3},children:[n.jsx(Pn,{label:"Email",type:"email",fullWidth:!0,value:s,onChange:l=>o(l.target.value),required:!0,disabled:e}),n.jsx($r,{variant:"contained",fullWidth:!0,type:"submit",disabled:e||!s.trim(),startIcon:e?n.jsx(Jh,{size:20}):null,children:e?"Sending...":"Send reset link"})]})}),n.jsxs(et,{variant:"body2",color:"text.secondary",align:"center",sx:{mt:2},children:["Remember your password? ",n.jsx(Io,{component:"button",onClick:()=>a("/auth/login"),children:"Back to login"})]})]})})})},Qye=["https://images.unsplash.com/photo-1556740758-90de374c12ad?w=400&h=400&fit=crop&crop=center","https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=400&h=400&fit=crop&crop=center","https://images.unsplash.com/photo-1563013544-824ae1b704d3?w=400&h=400&fit=crop&crop=center","https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=400&h=400&fit=crop&crop=center","https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=400&h=400&fit=crop&crop=center","https://images.unsplash.com/photo-1556740738-b6a63e27c4df?w=400&h=400&fit=crop&crop=center","https://images.unsplash.com/photo-1556155092-490a1ba16284?w=400&h=400&fit=crop&crop=center","https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400&h=400&fit=crop&crop=center","https://images.unsplash.com/photo-1564422296086-a0a72d0c1f5e?w=400&h=400&fit=crop&crop=center","https://images.unsplash.com/photo-1483985988355-763728e1935b?w=400&h=400&fit=crop&crop=center","https://images.unsplash.com/photo-1556740758-90de374c12ad?w=400&h=400&fit=crop&crop=center","https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=400&h=400&fit=crop&crop=center"],Jye=(a,r)=>{const e=a*.1,t=r.min+(Math.sin(e)*.5+.5)*(r.max-r.min),s=Math.cos(e*2)*20,o=Math.sin(e*3)*15,i=(Math.sin(e*4)*.5+.5)*80;return{rotation:t,translateX:s,translateY:o,marginTop:i}},tM=({children:a,images:r=Qye,rotationRange:e={min:-8,max:8},animationDuration:t=60})=>{const s=f.useMemo(()=>[...r,...r],[r]),o=f.useMemo(()=>s.map((m,y)=>Jye(y,e)),[s.length,e]),i=260,l=16,c=r.length*(i+l),d=c*2,h=`carousel-${c}`;return n.jsxs(n.Fragment,{children:[n.jsx("style",{children:`
        @keyframes ${h} {
          0% {
            transform: translateX(0);
          }
          100% {
            transform: translateX(-${c}px);
          }
        }
      `}),n.jsxs("div",{className:"relative min-h-screen w-full overflow-hidden bg-gray-50",children:[n.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",style:{width:"100%",height:"100%"},children:n.jsx("div",{className:"flex h-full items-center",style:{width:`${d}px`,willChange:"transform",animation:`${h} ${t}s linear infinite`},children:s.map((m,y)=>{const{rotation:x,translateX:b,translateY:v,marginTop:j}=o[y];return n.jsx("div",{className:"shrink-0 relative",style:{width:`${i}px`,height:`${i}px`,marginRight:y<s.length-1?`${l}px`:"0",marginTop:`${j}px`,transform:`rotate(${x}deg) translate(${b}px, ${v}px)`},children:n.jsx("img",{src:m,alt:`Carousel image ${y%r.length+1}`,className:"w-full h-full object-cover rounded-lg shadow-md border border-gray-200/50",style:{filter:"brightness(0.96) saturate(0.85)"},loading:"lazy",onError:S=>{S.target.src=`https://via.placeholder.com/${i}x${i}?text=Image+${y%r.length+1}`}})},`image-${y}`)})})}),n.jsx("div",{className:"relative z-10 min-h-screen flex items-center justify-center",children:n.jsx("div",{className:"relative w-full max-w-md mx-auto px-4 py-8",children:a})})]})]})},exe=()=>{const a=mr(),{storeFrontMeta:r}=hc(),{login:e,loading:t,user:s}=Ji();f.useEffect(()=>{s&&a("/")},[s]);const[o,i]=f.useState(""),[l,c]=f.useState("");return n.jsx(tM,{children:n.jsx(Mo,{maxWidth:"sm",children:n.jsxs(ta,{elevation:2,sx:{p:4,bgcolor:"rgba(255, 255, 255, 0.98)",backdropFilter:"blur(10px)"},children:[n.jsx(et,{variant:"h5",fontWeight:800,children:"Login"}),n.jsx(et,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:"Welcome back! Please sign in to continue."}),n.jsxs(_r,{spacing:2,sx:{mt:3},children:[n.jsx(Pn,{label:"Email",type:"email",fullWidth:!0,value:o,onChange:d=>i(d.target.value)}),n.jsx(Pn,{label:"Password",type:"password",fullWidth:!0,value:l,onChange:d=>c(d.target.value)}),n.jsx($r,{variant:"contained",fullWidth:!0,disabled:t,onClick:async()=>{r?.storeId&&await e({storeId:r.storeId,email:o,password:l})},children:"Sign in"}),n.jsx(Go,{children:"or"}),n.jsx($r,{variant:"outlined",startIcon:n.jsx(r6,{}),fullWidth:!0,children:"Continue with Google"}),n.jsx(et,{variant:"body2",color:"text.secondary",align:"center",children:n.jsx(Io,{component:"button",onClick:()=>a("/auth/forgot-password"),children:"Forgot password?"})}),n.jsxs(et,{variant:"body2",color:"text.secondary",align:"center",children:["Don't have an account? ",n.jsx(Io,{component:"button",onClick:()=>a("/auth/signup"),children:"Sign up"})]})]})]})})})},txe=64,rxe=()=>{const a=mr(),{user:r,checkAuth:e}=Ji(),{orders:t,loading:s,error:o,getOrdersByCustomerId:i}=q2();f.useEffect(()=>{e()},[e]),f.useEffect(()=>{r?._id&&i(r._id).catch(()=>{})},[r?._id,i]);const l=h=>{switch(h){case"pending":return"warning";case"paid":return"info";case"shipped":return"primary";case"delivered":return"success";case"cancelled":return"error";default:return"default"}},c=h=>new Date(h).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),d=h=>`$${(h/100).toFixed(2)}`;return n.jsxs(Et,{sx:{bgcolor:"#fafafa",color:"#111",minHeight:"100vh"},children:[n.jsx(tm,{}),n.jsxs(Mo,{maxWidth:"lg",sx:{pt:`${txe+16}px`,pb:4},children:[n.jsx(et,{variant:"h4",fontWeight:800,sx:{mb:2,color:"#111"},children:"My Orders"}),n.jsx(et,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"View and track all your orders."}),s&&n.jsx(Et,{sx:{display:"flex",justifyContent:"center",py:8},children:n.jsx(Jh,{})}),o&&n.jsx(wA,{severity:"error",sx:{mb:3},children:o}),!s&&!o&&t.length===0&&n.jsxs(Et,{sx:{textAlign:"center",py:8,px:2},children:[n.jsx(U2,{sx:{fontSize:80,color:"text.secondary",mb:2,opacity:.5}}),n.jsx(et,{variant:"h6",color:"text.secondary",sx:{mb:1},children:"No orders yet"}),n.jsx(et,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"You haven't placed any orders. Start shopping to see your orders here."}),n.jsx($r,{variant:"contained",onClick:()=>a("/"),sx:{bgcolor:"#667eea","&:hover":{bgcolor:"#5568d3"}},children:"Continue Shopping"})]}),!s&&!o&&t.length>0&&n.jsx(_r,{spacing:2,children:t.map(h=>n.jsx(Vu,{variant:"outlined",sx:{"&:hover":{boxShadow:2,transition:"box-shadow 0.2s ease"}},children:n.jsx(fp,{children:n.jsxs(_r,{spacing:2,children:[n.jsxs(Et,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:2},children:[n.jsxs(Et,{children:[n.jsxs(et,{variant:"subtitle2",color:"text.secondary",children:["Order #",h._id.slice(-8).toUpperCase()]}),n.jsxs(et,{variant:"body2",color:"text.secondary",children:["Placed on ",c(h.orderDate)]})]}),n.jsxs(Et,{sx:{display:"flex",gap:1,alignItems:"center"},children:[n.jsx(os,{label:h.status.charAt(0).toUpperCase()+h.status.slice(1),color:l(h.status),size:"small"}),n.jsx(os,{label:h.paymentStatus.charAt(0).toUpperCase()+h.paymentStatus.slice(1),color:h.paymentStatus==="paid"?"success":"default",size:"small",variant:"outlined"})]})]}),n.jsx(Go,{}),n.jsxs(Et,{children:[n.jsxs(et,{variant:"subtitle2",fontWeight:600,sx:{mb:1},children:["Items (",h.items.length,")"]}),n.jsx(_r,{spacing:1,children:h.items.map(m=>n.jsxs(Et,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",py:1,px:2,bgcolor:"#fafafa",borderRadius:1},children:[n.jsxs(Et,{sx:{flex:1},children:[n.jsx(et,{variant:"body2",fontWeight:500,children:typeof m.productVariantId=="object"&&m.productVariantId&&m.productVariantId.sku||"Product"}),typeof m.productVariantId=="object"&&m.productVariantId&&Object.keys(m.productVariantId.optionValues||{}).length>0&&n.jsx(et,{variant:"caption",color:"text.secondary",children:Object.entries(m.productVariantId.optionValues).map(([y,x])=>`${y}: ${x}`).join(", ")})]}),n.jsxs(et,{variant:"body2",color:"text.secondary",sx:{mr:2},children:["Qty: ",m.quantity]}),n.jsx(et,{variant:"body2",fontWeight:600,children:d(m.total)})]},m._id))})]}),n.jsx(Go,{}),n.jsxs(Et,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-end"},children:[n.jsx(Et,{children:h.shippingAddressId&&n.jsxs(et,{variant:"caption",color:"text.secondary",children:["Shipping to:"," ",h.shippingAddressId.city,", ",h.shippingAddressId.state]})}),n.jsxs(_r,{spacing:.5,sx:{textAlign:"right"},children:[n.jsxs(Et,{sx:{display:"flex",gap:2,justifyContent:"flex-end"},children:[n.jsx(et,{variant:"body2",color:"text.secondary",children:"Subtotal:"}),n.jsx(et,{variant:"body2",children:d(h.subtotal)})]}),h.tax>0&&n.jsxs(Et,{sx:{display:"flex",gap:2,justifyContent:"flex-end"},children:[n.jsx(et,{variant:"body2",color:"text.secondary",children:"Tax:"}),n.jsx(et,{variant:"body2",children:d(h.tax)})]}),h.shippingCost>0&&n.jsxs(Et,{sx:{display:"flex",gap:2,justifyContent:"flex-end"},children:[n.jsx(et,{variant:"body2",color:"text.secondary",children:"Shipping:"}),n.jsx(et,{variant:"body2",children:d(h.shippingCost)})]}),n.jsx(Go,{sx:{my:.5}}),n.jsxs(Et,{sx:{display:"flex",gap:2,justifyContent:"flex-end"},children:[n.jsx(et,{variant:"body1",fontWeight:700,children:"Total:"}),n.jsx(et,{variant:"body1",fontWeight:700,children:d(h.total)})]})]})]}),h.notes&&n.jsxs(n.Fragment,{children:[n.jsx(Go,{}),n.jsxs(et,{variant:"body2",color:"text.secondary",children:[n.jsx("strong",{children:"Note:"})," ",h.notes]})]})]})})},h._id))})]})]})},nxe=({open:a,onClose:r})=>{const e=mr(),t=()=>{r(),e("/auth/login")},s=()=>{r(),e("/auth/signup")};return n.jsxs(gl,{open:a,onClose:r,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2,p:1}},children:[n.jsx(vl,{children:n.jsx(et,{variant:"h6",fontWeight:600,align:"center",children:"Want to add items to cart?"})}),n.jsx(xl,{children:n.jsx(et,{variant:"body1",color:"text.secondary",align:"center",sx:{mb:2},children:"Please login or register with us to add items to your cart and continue shopping."})}),n.jsxs(yl,{sx:{justifyContent:"center",gap:2,p:3},children:[n.jsx($r,{variant:"outlined",onClick:t,sx:{minWidth:120},children:"Login"}),n.jsx($r,{variant:"contained",onClick:s,sx:{minWidth:120},children:"Sign Up"})]})]})},hT=64,axe=()=>{const{id:a}=qa(),r=mr(),e=uc();R2(e.breakpoints.down("md"));const{products:t}=q6(),{storeFrontMeta:s}=hc(),{variants:o,loading:i,fetchVariantsByProductId:l}=Pye(),{createCartEntry:c,items:d,getCartByCustomerId:h}=pw(),{user:m,checkAuth:y,logout:x}=Ji(),[b,v]=gr.useState(null),[j,S]=gr.useState({}),[k,N]=gr.useState(!1),[P,R]=gr.useState(0),[F,z]=gr.useState(!1),[H,V]=gr.useState(""),[W,Z]=gr.useState(!1),[A,q]=gr.useState(!1),{addresses:I,fetchCustomerAddressesByCustomerId:K}=H2(),{createOrder:D,loading:Q}=q2(),[oe,re]=gr.useState(""),[Te,G]=gr.useState("");gr.useEffect(()=>{const ze=setTimeout(()=>N(!0),200);return()=>clearTimeout(ze)},[]),f.useEffect(()=>{y()},[y]),f.useEffect(()=>{m?._id&&h(m._id).catch(()=>{})},[m?._id]);const Y=f.useMemo(()=>t.find(ze=>ze._id===a),[t,a]);gr.useEffect(()=>{Y?._id&&l(Y._id)},[Y?._id]),gr.useEffect(()=>{if(o&&o.length>0){const ze=o.find(Pt=>!Pt.isSynthetic)||o[0];v(ze._id);const We={},pt=ze.optionValues||{};Object.keys(pt).forEach(Pt=>{We[Pt]=pt[Pt]}),S(We)}else v(null),S({})},[o]);const Se=gr.useMemo(()=>{const ze=new Map;for(const We of o){const pt=We.optionValues||{};for(const[Pt,ee]of Object.entries(pt))ze.has(Pt)||ze.set(Pt,new Set),ze.get(Pt).add(String(ee))}return Array.from(ze.entries()).map(([We,pt])=>({name:We,values:Array.from(pt)}))},[o]),fe=(ze,We)=>{const pt={...j,[ze]:We};S(pt);const Pt=o.find(ee=>{const Ne=ee.optionValues||{};return Object.entries(pt).every(([Ie,ne])=>!Ne[Ie]||String(Ne[Ie])===String(ne))})||o.find(ee=>{const Ne=ee.optionValues||{};return Object.entries(pt).every(([Ie,ne])=>String(Ne[Ie])===String(ne))});Pt&&v(Pt._id)},Ee=async()=>{if(!(!s?.storeId||!b)){if(!m){Z(!0);return}try{await c({storeId:s.storeId,productVariantId:b,quantity:1})}catch{}}},Ae=async()=>{if(!(!s?.storeId||!b)){if(!m){Z(!0);return}try{await c({storeId:s.storeId,productVariantId:b,quantity:1}),m.defaultAddress?re(m.defaultAddress):I.length>0&&re(I[0]._id),q(!0)}catch{}}},qe=async()=>{if(!(!oe||!m?._id||!s?.storeId))try{const ze=d.map(We=>{const Pt=(typeof We.productVariantId=="object"?We.productVariantId:null)?.price??0;return{productVariantId:typeof We.productVariantId=="object"?We.productVariantId._id:We.productVariantId,quantity:We.quantity,price:Pt,total:Pt*We.quantity}});await D({storeId:s.storeId,shippingAddressId:oe,items:ze,paymentMethod:"cod",subtotal:ze.reduce((We,pt)=>We+pt.total,0),tax:0,shippingCost:0,total:ze.reduce((We,pt)=>We+pt.total,0)}),q(!1)}catch{}};if(!Y)return n.jsxs(Et,{sx:{bgcolor:"#fafafa",minHeight:"100vh",color:"text.primary"},children:[n.jsx(tm,{showBack:!0,showSearch:!0,searchValue:H,onSearchChange:V}),n.jsxs(Mo,{maxWidth:"md",sx:{pt:`${hT+32}px`,pb:6},children:[n.jsx(et,{variant:"h6",color:"text.secondary",align:"center",children:"Product not found"}),n.jsx(_r,{alignItems:"center",sx:{mt:2},children:n.jsx($r,{variant:"outlined",onClick:()=>r(-1),children:"Go back"})})]}),n.jsx(Et,{component:"footer",sx:{borderTop:"1px solid #eee",py:3,bgcolor:"#fff"},children:n.jsx(Mo,{maxWidth:"lg",children:n.jsxs(_r,{direction:{xs:"column",sm:"row"},alignItems:"center",justifyContent:"space-between",spacing:2,children:[n.jsxs(et,{variant:"body2",color:"text.secondary",children:[" ",new Date().getFullYear()," ",s?.name||"",". All rights reserved."]}),n.jsxs(_r,{direction:"row",spacing:2,children:[n.jsx($r,{size:"small",children:"Privacy"}),n.jsx($r,{size:"small",children:"Terms"}),n.jsx($r,{size:"small",children:"Contact"})]})]})})})]});const we=Array.isArray(Y.imageUrls)&&Y.imageUrls.length>0?Y.imageUrls:["https://via.placeholder.com/800x600?text=Product"],Oe=Y.compareAtPrice&&Y.compareAtPrice>Y.price?Math.round((Y.compareAtPrice-Y.price)/Y.compareAtPrice*100):0;return n.jsxs(Et,{sx:{bgcolor:"#fafafa",minHeight:"100vh",color:"text.primary"},children:[n.jsx(tm,{showBack:!0,showSearch:!0,searchValue:H,onSearchChange:V}),n.jsx(Mo,{maxWidth:"lg",sx:{pt:`${hT+16}px`},children:n.jsx(jl,{in:k,timeout:400,children:n.jsxs(N2,{sx:{mb:3},children:[n.jsx(Io,{underline:"hover",color:"inherit",href:"/",sx:{cursor:"pointer"},onClick:()=>r("/"),children:"Home"}),n.jsx(Io,{underline:"hover",color:"inherit",href:`/collections/${Y.category?._id}`,sx:{cursor:"pointer"},children:Y.category?.name||"Category"}),n.jsx(et,{color:"text.primary",children:Y.title})]})})}),n.jsx(Mo,{maxWidth:"lg",sx:{pb:6},children:n.jsxs(_r,{direction:{xs:"column",lg:"row"},spacing:4,children:[n.jsx(jl,{in:k,timeout:600,children:n.jsx(Et,{sx:{width:{xs:"100%",lg:"50%"},flexShrink:0},children:n.jsxs(Vu,{sx:{borderRadius:3,overflow:"hidden",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)",position:"relative"},children:[Oe>0&&n.jsxs(Et,{sx:{position:"absolute",top:16,left:16,bgcolor:"#ff4757",color:"white",px:2,py:.5,borderRadius:2,fontSize:"0.875rem",fontWeight:700,zIndex:2},children:["-",Oe,"%"]}),n.jsx($n,{sx:{position:"absolute",top:16,right:16,bgcolor:"rgba(255, 255, 255, 0.9)",zIndex:2,"&:hover":{bgcolor:"white"}},onClick:()=>z(!F),children:n.jsx(sT,{sx:{color:F?"#ff4757":"text.secondary"}})}),n.jsx(_A,{component:"img",image:we[P],alt:Y.title,sx:{objectFit:"contain",height:{xs:400,md:500},transition:"all 0.3s ease"}}),we.length>1&&n.jsx(Et,{sx:{display:"flex",gap:1,p:2,overflowX:"auto","&::-webkit-scrollbar":{display:"none"}},children:we.map((ze,We)=>n.jsx(Et,{component:"img",src:ze,alt:`${Y.title} ${We+1}`,sx:{width:60,height:60,objectFit:"contain",borderRadius:1,cursor:"pointer",border:P===We?"2px solid #667eea":"2px solid transparent",opacity:P===We?1:.7,transition:"all 0.2s ease","&:hover":{opacity:1}},onClick:()=>R(We)},We))})]})})}),n.jsx(jl,{in:k,timeout:800,children:n.jsx(Et,{sx:{flex:1},children:n.jsxs(ta,{elevation:0,sx:{p:4,borderRadius:3,border:"1px solid rgba(0, 0, 0, 0.08)",bgcolor:"white"},children:[n.jsx(et,{variant:"h4",fontWeight:800,sx:{mb:1},children:Y.title}),n.jsxs(_r,{direction:"row",alignItems:"center",spacing:2,sx:{mb:2},children:[n.jsx(Oue,{value:4.5,precision:.1,readOnly:!0,size:"small"}),n.jsx(et,{variant:"body2",color:"text.secondary",children:"(4.5)  128 reviews"})]}),n.jsxs(_r,{direction:"row",spacing:1,sx:{mb:3},children:[Y.vendor?.name&&n.jsx(os,{label:Y.vendor.name,size:"small",sx:{bgcolor:"rgba(102, 126, 234, 0.1)",color:"#667eea",fontWeight:500}}),Y.category?.name&&n.jsx(os,{label:Y.category.name,size:"small",variant:"outlined",sx:{fontWeight:500}}),Y.status&&n.jsx(os,{label:Y.status,size:"small",color:Y.status==="active"?"success":"default",sx:{fontWeight:500}})]}),n.jsxs(_r,{direction:"row",alignItems:"center",spacing:2,sx:{mb:3},children:[n.jsxs(et,{variant:"h4",fontWeight:800,color:"primary",children:["$",(Y.price/100).toFixed(2)]}),Y.compareAtPrice&&Y.compareAtPrice>Y.price&&n.jsxs(et,{variant:"h6",color:"text.secondary",sx:{textDecoration:"line-through",opacity:.7},children:["$",(Y.compareAtPrice/100).toFixed(2)]}),Oe>0&&n.jsx(os,{label:`Save ${Oe}%`,size:"small",sx:{bgcolor:"#ff4757",color:"white",fontWeight:600}})]}),!i&&(o.length===1&&o[0]?.isSynthetic?n.jsx(et,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"This product has no variants."}):n.jsx(Et,{sx:{mb:3},children:Se.map(ze=>n.jsxs(Et,{sx:{mb:2},children:[n.jsx(et,{variant:"subtitle1",fontWeight:600,sx:{mb:1},children:ze.name}),n.jsx(_r,{direction:"row",spacing:1,sx:{flexWrap:"wrap",gap:1},children:ze.values.map(We=>n.jsx(os,{label:We,onClick:()=>fe(ze.name,We),variant:j[ze.name]===We?"filled":"outlined",sx:{fontWeight:500,...j[ze.name]===We&&{bgcolor:"#667eea",color:"white","&:hover":{bgcolor:"#5a6fd8"}}}},We))})]},ze.name))})),n.jsx(et,{variant:"body1",color:"text.secondary",sx:{mb:4,lineHeight:1.6},children:Y.description}),n.jsxs(_r,{direction:{xs:"column",sm:"row"},spacing:2,sx:{mb:4},children:[n.jsx($r,{variant:"contained",size:"large",onClick:Ee,sx:{bgcolor:"#667eea",color:"white",fontWeight:600,px:4,py:1.5,borderRadius:3,textTransform:"none","&:hover":{bgcolor:"#5a6fd8",transform:"translateY(-2px)",boxShadow:"0 8px 25px rgba(102, 126, 234, 0.3)"},transition:"all 0.3s ease"},children:"Add to Cart"}),n.jsx($r,{variant:"contained",size:"large",onClick:Ae,sx:{bgcolor:"#2ea44f",color:"white",fontWeight:600,px:4,py:1.5,borderRadius:3,textTransform:"none","&:hover":{bgcolor:"#279a47",transform:"translateY(-2px)",boxShadow:"0 8px 25px rgba(46, 164, 79, 0.3)"},transition:"all 0.3s ease"},children:"Buy Now"}),n.jsx($r,{variant:"outlined",size:"large",onClick:()=>r("/cart"),sx:{borderColor:"#667eea",color:"#667eea",fontWeight:600,px:4,py:1.5,borderRadius:3,textTransform:"none","&:hover":{borderColor:"#5a6fd8",bgcolor:"rgba(102, 126, 234, 0.05)"}},children:"View Cart"})]}),n.jsxs(_r,{direction:"row",spacing:2,sx:{mb:3},children:[n.jsx($n,{sx:{color:"#667eea"},children:n.jsx(lhe,{})}),n.jsx($n,{sx:{color:F?"#ff4757":"#667eea"},onClick:()=>z(!F),children:n.jsx(sT,{})})]}),n.jsx(Go,{sx:{my:3}}),n.jsxs(Et,{sx:{mb:3},children:[n.jsx(et,{variant:"h6",fontWeight:600,sx:{mb:2},children:"Why Choose This Product?"}),n.jsxs(_r,{spacing:2,children:[n.jsxs(_r,{direction:"row",alignItems:"center",spacing:2,children:[n.jsx(rp,{sx:{bgcolor:"rgba(102, 126, 234, 0.1)",width:40,height:40},children:n.jsx(iT,{sx:{color:"#667eea",fontSize:20}})}),n.jsxs(Et,{children:[n.jsx(et,{variant:"subtitle2",fontWeight:600,children:"Free Shipping"}),n.jsx(et,{variant:"body2",color:"text.secondary",children:"On orders over $50"})]})]}),n.jsxs(_r,{direction:"row",alignItems:"center",spacing:2,children:[n.jsx(rp,{sx:{bgcolor:"rgba(102, 126, 234, 0.1)",width:40,height:40},children:n.jsx(ihe,{sx:{color:"#667eea",fontSize:20}})}),n.jsxs(Et,{children:[n.jsx(et,{variant:"subtitle2",fontWeight:600,children:"Secure Payment"}),n.jsx(et,{variant:"body2",color:"text.secondary",children:"Your data is protected"})]})]}),n.jsxs(_r,{direction:"row",alignItems:"center",spacing:2,children:[n.jsx(rp,{sx:{bgcolor:"rgba(102, 126, 234, 0.1)",width:40,height:40},children:n.jsx(uhe,{sx:{color:"#667eea",fontSize:20}})}),n.jsxs(Et,{children:[n.jsx(et,{variant:"subtitle2",fontWeight:600,children:"24/7 Support"}),n.jsx(et,{variant:"body2",color:"text.secondary",children:"We're here to help"})]})]})]})]})]})})})]})}),n.jsx(Et,{component:"footer",sx:{borderTop:"1px solid rgba(0, 0, 0, 0.08)",py:4,bgcolor:"white",mt:6},children:n.jsx(Mo,{maxWidth:"lg",children:n.jsxs(_r,{direction:{xs:"column",sm:"row"},alignItems:"center",justifyContent:"space-between",spacing:2,children:[n.jsxs(et,{variant:"body2",color:"text.secondary",children:[" ",new Date().getFullYear()," ",s?.name||"",". All rights reserved."]}),n.jsxs(_r,{direction:"row",spacing:2,children:[n.jsx($r,{size:"small",sx:{color:"#667eea",fontWeight:500},children:"Privacy"}),n.jsx($r,{size:"small",sx:{color:"#667eea",fontWeight:500},children:"Terms"}),n.jsx($r,{size:"small",sx:{color:"#667eea",fontWeight:500},children:"Contact"})]})]})})}),n.jsx(nxe,{open:W,onClose:()=>Z(!1)}),n.jsxs(gl,{open:A,onClose:()=>q(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3}},children:[n.jsx(vl,{sx:{p:0},children:n.jsxs(Et,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:2,py:1.5,borderBottom:"1px solid #eee"},children:[n.jsxs(_r,{direction:"row",spacing:1.5,alignItems:"center",children:[n.jsx($n,{size:"small",onClick:()=>q(!1),children:n.jsx(e6,{fontSize:"small"})}),n.jsx(et,{variant:"h6",fontWeight:800,sx:{letterSpacing:.5},children:s?.name||"Store"})]}),n.jsxs(_r,{direction:"row",spacing:1,alignItems:"center",children:[n.jsx(et,{variant:"caption",color:"text.secondary",children:"100% Secured Payment"}),n.jsx(rhe,{sx:{fontSize:16,color:"text.secondary"}})]})]})}),n.jsxs(xl,{sx:{p:0},children:[n.jsx(Et,{sx:{px:2,py:1.5,color:"text.secondary",fontWeight:700},children:"DELIVERY DETAILS"}),n.jsx(Et,{sx:{px:2,pb:1.5},children:n.jsx(ta,{variant:"outlined",sx:{p:2,borderRadius:2},children:n.jsxs(_r,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[n.jsxs(_r,{direction:"row",spacing:1.5,alignItems:"center",children:[n.jsx(iT,{sx:{color:"text.secondary"}}),n.jsxs(_r,{children:[n.jsx(et,{variant:"subtitle1",fontWeight:800,children:"Order Summary"}),n.jsx(os,{size:"small",label:`$${(Y.compareAtPrice||Y.price)>Y.price?((Y.compareAtPrice-Y.price)/100).toFixed(2):"0.00"} saved so far`,sx:{bgcolor:"#e8f5e8",color:"#2e7d32",width:"fit-content"}})]})]}),n.jsxs(_r,{alignItems:"flex-end",spacing:.5,children:[n.jsx(et,{variant:"body2",color:"text.secondary",children:"1 item"}),n.jsxs(_r,{direction:"row",spacing:1,alignItems:"center",children:[Y.compareAtPrice&&Y.compareAtPrice>Y.price&&n.jsxs(et,{variant:"body2",color:"text.secondary",sx:{textDecoration:"line-through"},children:["$",(Y.compareAtPrice/100).toFixed(2)]}),n.jsxs(et,{variant:"subtitle1",fontWeight:800,children:["$",(Y.price/100).toFixed(2)]})]})]})]})})}),n.jsx(Et,{sx:{px:2,pb:1.5},children:n.jsxs(ta,{variant:"outlined",sx:{p:2,borderRadius:2},children:[n.jsxs(_r,{direction:"row",justifyContent:"space-between",alignItems:"flex-start",children:[n.jsxs(_r,{spacing:.5,sx:{pr:2,minWidth:0},children:[n.jsxs(_r,{direction:"row",spacing:1,alignItems:"center",children:[n.jsx(Qpe,{sx:{color:"text.secondary"}}),n.jsxs(et,{variant:"subtitle1",fontWeight:800,children:["Deliver To ",m?.firstName||""]})]}),n.jsx(et,{variant:"body2",sx:{whiteSpace:"pre-wrap"},children:I.find(ze=>ze._id===oe)?.address||"Select a shipping address"}),m?.email&&n.jsx(et,{variant:"body2",color:"text.secondary",children:m.email})]}),n.jsxs(_r,{alignItems:"flex-end",spacing:1,children:[n.jsx($r,{variant:"outlined",size:"small",onClick:()=>{},sx:{borderRadius:2},children:"Change"}),n.jsx(os,{size:"small",label:"Tap To Edit Address",sx:{bgcolor:"#111",color:"#fff"}})]})]}),n.jsxs(rc,{fullWidth:!0,sx:{mt:1.5},children:[n.jsx(Bu,{id:"quick-addr",children:"Shipping Address"}),n.jsx(Nl,{labelId:"quick-addr",label:"Shipping Address",value:oe,onChange:ze=>re(ze.target.value),children:I.map(ze=>n.jsxs(ss,{value:ze._id,children:[ze.firstName," ",ze.lastName,"  ",ze.city]},ze._id))})]}),n.jsx(ta,{variant:"outlined",sx:{p:1.5,mt:1.5,borderRadius:2},children:n.jsxs(_r,{direction:{xs:"column",sm:"row"},spacing:1,alignItems:{sm:"center"},children:[n.jsx(et,{variant:"body2",fontWeight:700,children:"Free Shipping"}),n.jsx(et,{variant:"body2",color:"text.secondary",children:"Get it by 10 Nov, 9 AM"}),n.jsx(os,{size:"small",label:"Free",color:"success",sx:{height:22}})]})})]})}),n.jsxs(Et,{sx:{px:2,pb:2},children:[n.jsx(et,{variant:"subtitle1",fontWeight:800,color:"text.secondary",sx:{mb:1},children:"OFFERS & REWARDS"}),n.jsxs(ta,{variant:"outlined",sx:{borderRadius:2,mb:1},children:[n.jsx(Et,{sx:{bgcolor:"#e8f5e8",color:"#2e7d32",fontWeight:700,px:2,py:1,borderTopLeftRadius:8,borderTopRightRadius:8},children:"You saved $0.00"}),n.jsxs(Et,{sx:{p:2},children:[n.jsx(Pn,{fullWidth:!0,size:"small",placeholder:"Enter coupon code",value:Te,onChange:ze=>G(ze.target.value),InputProps:{startAdornment:n.jsx(Zi,{position:"start",children:n.jsx(aT,{sx:{color:"text.secondary"}})})}}),n.jsxs(_r,{direction:"row",justifyContent:"space-between",sx:{mt:1},children:[n.jsxs(_r,{direction:"row",spacing:1,alignItems:"center",children:[n.jsx($n,{size:"small",children:n.jsx(aT,{fontSize:"small"})}),n.jsx(et,{variant:"body2",children:"8 coupons available"})]}),n.jsx($r,{size:"small",children:"View All"})]})]})]})]})]}),n.jsxs(yl,{sx:{px:2,py:1.5},children:[n.jsx($r,{onClick:()=>q(!1),children:"Cancel"}),n.jsx($r,{variant:"contained",onClick:qe,disabled:!oe||Q,sx:{bgcolor:"#2ea44f","&:hover":{bgcolor:"#279a47"}},children:Q?"Processing...":"Pay Now"})]})]})]})},sxe=64,oxe=()=>{const a=mr(),{storeFrontMeta:r}=hc(),{user:e,checkAuth:t,updateUser:s,loading:o}=Ji(),{addresses:i,loading:l,error:c,fetchCustomerAddressesByCustomerId:d,addCustomerAddress:h,updateCustomerAddress:m,deleteCustomerAddress:y}=H2(),[x,b]=f.useState(!1),[v,j]=f.useState({firstName:"",lastName:""}),[S,k]=f.useState(!1),[N,P]=f.useState({agreedToMarketingEmails:!1,agreedToSmsMarketing:!1}),[R,F]=f.useState(!1),[z,H]=f.useState(null),[V,W]=f.useState({country:"",firstName:"",lastName:"",company:"",address:"",apartment:"",city:"",state:"",pinCode:"",phoneNumber:"",addressType:"home"}),[Z,A]=f.useState("");f.useEffect(()=>{e?._id?d(e._id):a("/auth/login")},[e?._id,d,a]),f.useEffect(()=>{e||a("/auth/login")},[e,a]),f.useEffect(()=>{e&&(W(Oe=>({...Oe,firstName:e.firstName,lastName:e.lastName})),j({firstName:e.firstName,lastName:e.lastName}),P({agreedToMarketingEmails:e.agreedToMarketingEmails,agreedToSmsMarketing:e.agreedToSmsMarketing}))},[e]);const q=Oe=>new Date(Oe).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),I=()=>{b(!0),j({firstName:e?.firstName||"",lastName:e?.lastName||""})},K=()=>{b(!1),j({firstName:e?.firstName||"",lastName:e?.lastName||""})},D=(Oe,ze)=>{j(We=>({...We,[Oe]:ze}))},Q=async()=>{if(e?._id)try{await s(e._id,{firstName:v.firstName,lastName:v.lastName}),b(!1)}catch(Oe){console.error("Failed to update name:",Oe)}},oe=()=>{k(!0),P({agreedToMarketingEmails:e?.agreedToMarketingEmails||!1,agreedToSmsMarketing:e?.agreedToSmsMarketing||!1})},re=()=>{k(!1),P({agreedToMarketingEmails:e?.agreedToMarketingEmails||!1,agreedToSmsMarketing:e?.agreedToSmsMarketing||!1})},Te=(Oe,ze)=>{P(We=>({...We,[Oe]:ze}))},G=async()=>{if(e?._id)try{await s(e._id,{agreedToMarketingEmails:N.agreedToMarketingEmails,agreedToSmsMarketing:N.agreedToSmsMarketing}),k(!1)}catch(Oe){console.error("Failed to update preferences:",Oe)}},Y=async Oe=>{if(e?._id)try{await s(e._id,{defaultAddress:Oe})}catch(ze){console.error("Failed to set default address:",ze)}},Se=()=>{H(null),W({country:"",firstName:e?.firstName||"",lastName:e?.lastName||"",company:"",address:"",apartment:"",city:"",state:"",pinCode:"",phoneNumber:"",addressType:"home"}),A(""),F(!0)},fe=Oe=>{H(Oe),W(Oe),Oe.addressType&&!["home","work","other"].includes(Oe.addressType)?(A(Oe.addressType),W(ze=>({...ze,addressType:"other"}))):A(""),F(!0)},Ee=async Oe=>{try{await y(Oe)}catch(ze){console.error("Failed to delete address:",ze)}},Ae=(Oe,ze)=>{W(We=>({...We,[Oe]:ze}))},qe=async()=>{if(e?._id)try{const Oe={...V,addressType:V.addressType==="other"&&Z.trim()?Z.trim():V.addressType};z?await m(z._id,Oe):await h({customerId:e._id,...Oe}),F(!1),H(null),A("")}catch(Oe){console.error("Failed to save address:",Oe)}},we=()=>{F(!1),H(null),A("")};return e?n.jsxs(Et,{sx:{bgcolor:"#fafafa",minHeight:"100vh",color:"text.primary"},children:[n.jsx(tm,{showBack:!0}),n.jsxs(Mo,{maxWidth:"md",sx:{pt:`${sxe+32}px`,pb:6},children:[n.jsxs(Et,{sx:{mb:4,textAlign:"center"},children:[n.jsxs(et,{variant:"h3",fontWeight:800,sx:{mb:2,background:"linear-gradient(45deg, #1976d2, #42a5f5)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:["Hello, ",e.firstName," "]}),n.jsx(et,{variant:"h6",color:"text.secondary",children:"Welcome to your profile"})]}),n.jsx(Vu,{elevation:2,sx:{borderRadius:3,overflow:"hidden"},children:n.jsx(fp,{sx:{p:4},children:n.jsxs(_r,{spacing:3,children:[n.jsxs(Et,{sx:{display:"flex",alignItems:"center",gap:3,mb:2},children:[n.jsxs(rp,{sx:{width:80,height:80,bgcolor:"primary.main",fontSize:"2rem",fontWeight:"bold"},children:[e.firstName.charAt(0).toUpperCase(),e.lastName.charAt(0).toUpperCase()]}),n.jsx(Et,{sx:{flex:1},children:x?n.jsxs(Et,{sx:{display:"flex",flexDirection:"column",gap:2},children:[n.jsxs(Et,{sx:{display:"flex",gap:2},children:[n.jsx(Pn,{label:"First Name",value:v.firstName,onChange:Oe=>D("firstName",Oe.target.value),size:"small",sx:{flex:1}}),n.jsx(Pn,{label:"Last Name",value:v.lastName,onChange:Oe=>D("lastName",Oe.target.value),size:"small",sx:{flex:1}})]}),n.jsxs(Et,{sx:{display:"flex",gap:1},children:[n.jsx($r,{variant:"contained",size:"small",onClick:Q,disabled:o||!v.firstName.trim()||!v.lastName.trim(),children:o?"Saving...":"Save"}),n.jsx($r,{variant:"outlined",size:"small",onClick:K,disabled:o,children:"Cancel"})]})]}):n.jsxs(Et,{children:[n.jsxs(Et,{sx:{display:"flex",alignItems:"center",gap:2},children:[n.jsxs(et,{variant:"h4",fontWeight:700,children:[e.firstName," ",e.lastName]}),n.jsx($n,{size:"small",onClick:I,sx:{bgcolor:"primary.50","&:hover":{bgcolor:"primary.100"}},children:n.jsx(Uh,{fontSize:"small"})})]}),n.jsxs(_r,{direction:"row",spacing:1,sx:{mt:1},children:[e.isVerified&&n.jsx(os,{icon:n.jsx(phe,{}),label:"Verified",color:"success",size:"small"}),n.jsx(os,{label:e.language,variant:"outlined",size:"small"})]})]})})]}),n.jsx(Go,{}),n.jsxs(Et,{children:[n.jsx(et,{variant:"h6",fontWeight:600,sx:{mb:2},children:"Contact Information"}),n.jsxs(_r,{spacing:2,children:[n.jsxs(Et,{sx:{display:"flex",alignItems:"center",gap:2},children:[n.jsx(Jpe,{color:"primary"}),n.jsxs(Et,{children:[n.jsx(et,{variant:"body2",color:"text.secondary",children:"Email Address"}),n.jsx(et,{variant:"body1",fontWeight:500,children:e.email})]})]}),e.phoneNumber&&n.jsxs(Et,{sx:{display:"flex",alignItems:"center",gap:2},children:[n.jsx(ohe,{color:"primary"}),n.jsxs(Et,{children:[n.jsx(et,{variant:"body2",color:"text.secondary",children:"Phone Number"}),n.jsx(et,{variant:"body1",fontWeight:500,children:e.phoneNumber})]})]})]})]}),n.jsx(Go,{}),n.jsxs(Et,{children:[n.jsx(et,{variant:"h6",fontWeight:600,sx:{mb:2},children:"Account Information"}),n.jsxs(_r,{spacing:2,children:[n.jsxs(Et,{sx:{display:"flex",alignItems:"center",gap:2},children:[n.jsx(nT,{color:"primary"}),n.jsxs(Et,{children:[n.jsx(et,{variant:"body2",color:"text.secondary",children:"Member Since"}),n.jsx(et,{variant:"body1",fontWeight:500,children:q(e.createdAt)})]})]}),n.jsxs(Et,{sx:{display:"flex",alignItems:"center",gap:2},children:[n.jsx(nT,{color:"primary"}),n.jsxs(Et,{children:[n.jsx(et,{variant:"body2",color:"text.secondary",children:"Last Updated"}),n.jsx(et,{variant:"body1",fontWeight:500,children:q(e.updatedAt)})]})]})]})]}),n.jsx(Go,{}),n.jsxs(Et,{children:[n.jsxs(Et,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[n.jsx(et,{variant:"h6",fontWeight:600,children:"Preferences"}),!S&&n.jsx($n,{size:"small",onClick:oe,sx:{bgcolor:"primary.50","&:hover":{bgcolor:"primary.100"}},children:n.jsx(Uh,{fontSize:"small"})})]}),S?n.jsxs(Et,{sx:{display:"flex",flexDirection:"column",gap:3},children:[n.jsx(Ql,{control:n.jsx(xb,{checked:N.agreedToMarketingEmails,onChange:Oe=>Te("agreedToMarketingEmails",Oe.target.checked),color:"primary"}),label:n.jsxs(Et,{children:[n.jsx(et,{variant:"body1",fontWeight:500,children:"Marketing Emails"}),n.jsx(et,{variant:"body2",color:"text.secondary",children:"Receive promotional emails and updates"})]}),labelPlacement:"start",sx:{justifyContent:"space-between",alignItems:"flex-start",margin:0,width:"100%"}}),n.jsx(Ql,{control:n.jsx(xb,{checked:N.agreedToSmsMarketing,onChange:Oe=>Te("agreedToSmsMarketing",Oe.target.checked),color:"primary"}),label:n.jsxs(Et,{children:[n.jsx(et,{variant:"body1",fontWeight:500,children:"SMS Marketing"}),n.jsx(et,{variant:"body2",color:"text.secondary",children:"Receive promotional text messages"})]}),labelPlacement:"start",sx:{justifyContent:"space-between",alignItems:"flex-start",margin:0,width:"100%"}}),n.jsxs(Et,{sx:{display:"flex",gap:1,mt:2},children:[n.jsx($r,{variant:"contained",size:"small",onClick:G,disabled:o,children:o?"Saving...":"Save Preferences"}),n.jsx($r,{variant:"outlined",size:"small",onClick:re,disabled:o,children:"Cancel"})]})]}):n.jsxs(_r,{spacing:1,children:[n.jsxs(Et,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx(et,{variant:"body2",color:"text.secondary",children:"Marketing Emails"}),n.jsx(os,{label:e.agreedToMarketingEmails?"Enabled":"Disabled",color:e.agreedToMarketingEmails?"success":"default",size:"small"})]}),n.jsxs(Et,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx(et,{variant:"body2",color:"text.secondary",children:"SMS Marketing"}),n.jsx(os,{label:e.agreedToSmsMarketing?"Enabled":"Disabled",color:e.agreedToSmsMarketing?"success":"default",size:"small"})]}),n.jsxs(Et,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx(et,{variant:"body2",color:"text.secondary",children:"Tax Collection"}),n.jsx(os,{label:e.collectTax.replace("_"," ").toUpperCase(),color:"info",size:"small"})]})]})]})]})})}),n.jsx(Vu,{elevation:2,sx:{borderRadius:3,overflow:"hidden",mt:3},children:n.jsxs(fp,{sx:{p:4},children:[n.jsxs(Et,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[n.jsxs(Et,{sx:{display:"flex",alignItems:"center",gap:2},children:[n.jsx(lT,{color:"primary"}),n.jsx(et,{variant:"h6",fontWeight:600,children:"Address Management"})]}),n.jsx($r,{variant:"contained",startIcon:n.jsx(Yg,{}),onClick:Se,sx:{borderRadius:2},children:"Add Address"})]}),c&&n.jsx(ta,{elevation:0,sx:{p:3,bgcolor:"error.50",borderRadius:2,border:"1px solid",borderColor:"error.200",mb:2},children:n.jsxs(et,{variant:"body2",color:"error.main",children:["Error loading addresses: ",c]})}),l?n.jsx(Et,{sx:{textAlign:"center",py:4},children:n.jsx(et,{variant:"body1",color:"text.secondary",children:"Loading addresses..."})}):i.length===0?n.jsxs(ta,{elevation:0,sx:{p:4,textAlign:"center",bgcolor:"grey.50",borderRadius:2,border:"2px dashed",borderColor:"grey.300"},children:[n.jsx(lT,{sx:{fontSize:48,color:"grey.400",mb:2}}),n.jsx(et,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No addresses saved"}),n.jsx(et,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Add your first address to get started"}),n.jsx($r,{variant:"outlined",onClick:Se,children:"Add Your First Address"})]}):n.jsx(AA,{children:i.map((Oe,ze)=>n.jsxs(jde,{sx:{border:"1px solid",borderColor:"grey.200",borderRadius:2,mb:2,bgcolor:"white"},children:[n.jsx(eS,{primary:n.jsxs(Et,{children:[n.jsxs(et,{variant:"h6",fontWeight:600,children:[Oe.firstName," ",Oe.lastName]}),n.jsx(os,{label:Oe.addressType?.toUpperCase()||"Home",size:"small",color:"primary",sx:{mt:1}})]}),secondary:n.jsxs(Et,{sx:{mt:1},children:[n.jsxs(et,{variant:"body2",color:"text.secondary",children:[Oe.company&&`${Oe.company}, `,Oe.address,Oe.apartment&&`, ${Oe.apartment}`]}),n.jsxs(et,{variant:"body2",color:"text.secondary",children:[Oe.city,", ",Oe.state," ",Oe.pinCode]}),n.jsx(et,{variant:"body2",color:"text.secondary",children:Oe.country}),n.jsxs(et,{variant:"body2",color:"text.secondary",sx:{mt:1},children:[" ",Oe.phoneNumber]})]})}),n.jsx(O2,{children:n.jsxs(_r,{direction:"row",spacing:1,children:[e.defaultAddress===Oe._id?n.jsx(os,{icon:n.jsx(Hc,{}),label:"Default",color:"primary",size:"small",sx:{mr:1}}):n.jsx($r,{size:"small",variant:"outlined",startIcon:n.jsx(che,{}),onClick:()=>Y(Oe._id),disabled:o,sx:{mr:1},children:"Make Default"}),n.jsx($n,{edge:"end",onClick:()=>fe(Oe),color:"primary",children:n.jsx(Uh,{})}),n.jsx($n,{edge:"end",onClick:()=>Ee(Oe._id),color:"error",children:n.jsx(uy,{})})]})})]},Oe._id))})]})}),n.jsxs(gl,{open:R,onClose:we,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:3}},children:[n.jsx(vl,{children:n.jsx(et,{variant:"h6",fontWeight:600,children:z?"Edit Address":"Add New Address"})}),n.jsx(xl,{children:n.jsxs(Wi,{container:!0,spacing:3,sx:{mt:1},children:[n.jsx(Wi,{item:!0,xs:12,children:n.jsxs(rc,{fullWidth:!0,children:[n.jsx(Bu,{children:"Address Type"}),n.jsxs(Nl,{value:V.addressType,onChange:Oe=>Ae("addressType",Oe.target.value),label:"Address Type",children:[n.jsx(ss,{value:"home",children:"Home"}),n.jsx(ss,{value:"work",children:"Work"}),n.jsx(ss,{value:"other",children:"Other"})]})]})}),V.addressType==="other"&&n.jsx(Wi,{item:!0,xs:12,children:n.jsx(Pn,{fullWidth:!0,label:"Custom Address Type",placeholder:"Enter address type (e.g., Vacation Home, Office, etc.)",value:Z,onChange:Oe=>A(Oe.target.value),required:!0,helperText:"Please specify the type of address"})}),n.jsx(Wi,{item:!0,xs:6,children:n.jsx(Pn,{fullWidth:!0,label:"First Name",value:V.firstName,onChange:Oe=>Ae("firstName",Oe.target.value),required:!0})}),n.jsx(Wi,{item:!0,xs:6,children:n.jsx(Pn,{fullWidth:!0,label:"Last Name",value:V.lastName,onChange:Oe=>Ae("lastName",Oe.target.value),required:!0})}),n.jsx(Wi,{item:!0,xs:12,children:n.jsx(Pn,{fullWidth:!0,label:"Company (Optional)",value:V.company,onChange:Oe=>Ae("company",Oe.target.value)})}),n.jsx(Wi,{item:!0,xs:12,children:n.jsx(Pn,{fullWidth:!0,label:"Address",value:V.address,onChange:Oe=>Ae("address",Oe.target.value),required:!0,multiline:!0,rows:2})}),n.jsx(Wi,{item:!0,xs:12,children:n.jsx(Pn,{fullWidth:!0,label:"Apartment, suite, etc. (Optional)",value:V.apartment,onChange:Oe=>Ae("apartment",Oe.target.value)})}),n.jsx(Wi,{item:!0,xs:6,children:n.jsx(Pn,{fullWidth:!0,label:"City",value:V.city,onChange:Oe=>Ae("city",Oe.target.value),required:!0})}),n.jsx(Wi,{item:!0,xs:6,children:n.jsx(Pn,{fullWidth:!0,label:"State/Province",value:V.state,onChange:Oe=>Ae("state",Oe.target.value),required:!0})}),n.jsx(Wi,{item:!0,xs:6,children:n.jsxs(rc,{fullWidth:!0,required:!0,children:[n.jsx(Bu,{children:"Country"}),n.jsx(Nl,{value:V.country,onChange:Oe=>Ae("country",Oe.target.value),label:"Country",sx:{minWidth:200},children:ep.map(Oe=>n.jsx(ss,{value:Oe.code,children:Oe.name},Oe.code))})]})}),n.jsx(Wi,{item:!0,xs:6,children:n.jsx(Pn,{fullWidth:!0,label:"Postal Code",value:V.pinCode,onChange:Oe=>Ae("pinCode",Oe.target.value),required:!0})}),n.jsx(Wi,{item:!0,xs:12,children:n.jsx(Pn,{fullWidth:!0,label:"Phone Number",value:V.phoneNumber,onChange:Oe=>Ae("phoneNumber",Oe.target.value),required:!0})})]})}),n.jsxs(yl,{sx:{p:3},children:[n.jsx($r,{onClick:we,children:"Cancel"}),n.jsx($r,{variant:"contained",onClick:qe,disabled:l||!V.firstName||!V.lastName||!V.address||!V.city||!V.state||!V.country||!V.pinCode||!V.phoneNumber||V.addressType==="other"&&!Z.trim(),children:l?"Saving...":z?"Update Address":"Save Address"})]})]})]})]}):null},ixe=()=>{const a=mr(),[r]=dS(),{resetPassword:e,loading:t}=Ji(),{storeFrontMeta:s}=hc(),[o,i]=f.useState(""),[l,c]=f.useState(""),[d,h]=f.useState(""),[m,y]=f.useState(null);f.useEffect(()=>{const b=r.get("reset-token");if(!b){a("/auth/login");return}y(b)},[r,a]);const x=async b=>{if(b.preventDefault(),!o.trim()){h("Password is required");return}if(o.length<6){h("Password must be at least 6 characters long");return}if(o!==l){h("Passwords do not match");return}if(!m){h("Invalid reset token");return}if(!s?.storeId){h("Store information not available");return}h("");try{await e({token:m,newPassword:o.trim(),storeId:s.storeId})}catch{}};return m?n.jsx(Et,{sx:{bgcolor:"#fafafa",minHeight:"100vh",display:"flex",alignItems:"center",py:6},children:n.jsx(Mo,{maxWidth:"sm",children:n.jsxs(ta,{elevation:1,sx:{p:4},children:[n.jsx(et,{variant:"h5",fontWeight:800,children:"Reset Password"}),n.jsx(et,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:"Enter your new password below."}),d&&n.jsx(wA,{severity:"error",sx:{mt:2},children:d}),n.jsx("form",{onSubmit:x,children:n.jsxs(_r,{spacing:2,sx:{mt:3},children:[n.jsx(Pn,{label:"New Password",type:"password",fullWidth:!0,value:o,onChange:b=>i(b.target.value),required:!0,disabled:t,helperText:"Password must be at least 6 characters long"}),n.jsx(Pn,{label:"Confirm New Password",type:"password",fullWidth:!0,value:l,onChange:b=>c(b.target.value),required:!0,disabled:t}),n.jsx($r,{variant:"contained",fullWidth:!0,type:"submit",disabled:t||!o.trim()||!l.trim(),startIcon:t?n.jsx(Jh,{size:20}):null,children:t?"Resetting...":"Reset Password"})]})}),n.jsxs(et,{variant:"body2",color:"text.secondary",align:"center",sx:{mt:2},children:["Remember your password? ",n.jsx(Io,{component:"button",onClick:()=>a("/auth/login"),children:"Back to login"})]})]})})}):n.jsx(Et,{sx:{bgcolor:"#fafafa",minHeight:"100vh",display:"flex",alignItems:"center",py:6},children:n.jsx(Mo,{maxWidth:"sm",children:n.jsxs(ta,{elevation:1,sx:{p:4,textAlign:"center"},children:[n.jsx(Jh,{}),n.jsx(et,{variant:"body2",color:"text.secondary",sx:{mt:2},children:"Validating reset token..."})]})})})},lxe=()=>{const a=mr(),{storeFrontMeta:r}=hc(),{signup:e,loading:t,user:s}=Ji(),[o,i]=f.useState(""),[l,c]=f.useState(""),[d,h]=f.useState(""),[m,y]=f.useState("");return f.useEffect(()=>{s&&a("/")},[s]),n.jsx(tM,{children:n.jsx(Mo,{maxWidth:"sm",children:n.jsxs(ta,{elevation:2,sx:{p:4,bgcolor:"rgba(255, 255, 255, 0.98)",backdropFilter:"blur(10px)"},children:[n.jsx(et,{variant:"h5",fontWeight:800,children:"Create account"}),n.jsx(et,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:"Join us and start shopping."}),n.jsxs(_r,{spacing:2,sx:{mt:3},children:[n.jsxs(_r,{direction:{xs:"column",sm:"row"},spacing:2,children:[n.jsx(Pn,{label:"First name",fullWidth:!0,value:o,onChange:x=>i(x.target.value)}),n.jsx(Pn,{label:"Last name",fullWidth:!0,value:l,onChange:x=>c(x.target.value)})]}),n.jsx(Pn,{label:"Email",type:"email",fullWidth:!0,value:d,onChange:x=>h(x.target.value)}),n.jsx(Pn,{label:"Password",type:"password",fullWidth:!0,value:m,onChange:x=>y(x.target.value)}),n.jsx($r,{variant:"contained",fullWidth:!0,disabled:t,onClick:async()=>{r?.storeId&&await e({storeId:r.storeId,firstName:o,lastName:l,email:d,password:m})},children:"Create account"}),n.jsx(Go,{children:"or"}),n.jsx($r,{variant:"outlined",startIcon:n.jsx(r6,{}),fullWidth:!0,children:"Sign up with Google"}),n.jsxs(et,{variant:"body2",color:"text.secondary",align:"center",children:["Already have an account? ",n.jsx(Io,{component:"button",onClick:()=>a("/auth/login"),children:"Sign in"})]})]})]})})})};function cxe({onCreateMarket:a,onGraphView:r}){return n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Markets"}),n.jsxs("div",{className:"flex items-center gap-2",children:[r&&n.jsxs("button",{type:"button",onClick:r,className:"cursor-pointer inline-flex items-center gap-1.5 px-3 py-1.5 rounded border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors text-sm font-medium",children:[n.jsx(QT,{className:"w-4 h-4"}),n.jsx("span",{children:"Graph view"})]}),n.jsxs("button",{type:"button",className:"cursor-pointer inline-flex items-center gap-1.5 px-3 py-1.5 rounded bg-gray-900 text-white transition-colors text-sm font-medium",onClick:a,children:[n.jsx(na,{className:"w-4 h-4"}),n.jsx("span",{children:"Create market"})]})]})]})}function dxe({id:a,name:r,status:e,onSelect:t}){const s=e==="active";return n.jsxs("button",{type:"button",onClick:()=>t(a),className:"cursor-pointer w-full text-left px-3 py-2 grid grid-cols-[2fr_1fr] hover:bg-gray-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Oo,{className:"w-4 h-4 text-gray-400"}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:r})]}),n.jsx("div",{className:"flex items-center",children:s?n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 text-xs font-medium rounded bg-green-50 text-green-700 border border-green-200",children:"Active"}):n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 text-xs font-medium rounded bg-gray-50 text-gray-700 border border-gray-200",children:"Draft"})})]})}function uxe({markets:a,onSelect:r}){return n.jsx(n.Fragment,{children:a.map((e,t)=>n.jsxs("div",{children:[n.jsx(dxe,{id:e._id,name:e.name,status:e.status,onSelect:r}),t<a.length-1&&n.jsx("div",{className:"border-t border-gray-200"})]},e._id))})}function fxe({markets:a,loading:r,onSelect:e}){return n.jsxs("div",{className:"bg-white border border-gray-200 rounded overflow-hidden",children:[n.jsxs("div",{className:"grid grid-cols-[2fr_1fr] px-3 py-2 text-xs font-medium text-gray-600 bg-gray-50",children:[n.jsx("div",{children:"Market Name"}),n.jsx("div",{children:"Status"})]}),n.jsx("div",{className:"border-t border-gray-200"}),n.jsxs("div",{children:[r&&n.jsx("div",{className:"px-3 py-3 text-sm text-gray-600",children:"Loading markets..."}),!r&&a.length===0&&n.jsx("div",{className:"px-3 py-3 text-sm text-gray-600",children:"No markets yet"}),!r&&n.jsx(uxe,{markets:a,onSelect:e})]})]})}const T1=()=>{};function pxe({searchValue:a="",onSearchChange:r=T1,onFilterClick:e=T1,onRefreshClick:t=T1}){return n.jsxs("div",{className:"bg-white border border-gray-200 rounded px-3 py-2 mb-4 flex items-center gap-2",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(Ro,{className:"w-4 h-4 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none"}),n.jsx("input",{type:"text",placeholder:"Search in all markets",value:a,onChange:s=>r(s.target.value),className:"w-full pl-9 pr-3 py-2 rounded border border-gray-200 focus:ring-1 focus:ring-gray-400 focus:border-gray-300 text-sm outline-none transition-colors"})]}),n.jsx("button",{type:"button",title:"Filters",onClick:e,className:"p-1.5 rounded hover:bg-gray-100 text-gray-600 transition-colors",children:n.jsx($h,{className:"w-4 h-4"})}),n.jsx("button",{type:"button",title:"Refresh",onClick:t,className:"p-1.5 rounded hover:bg-gray-100 text-gray-600 transition-colors",children:n.jsx(Hu,{className:"w-4 h-4"})})]})}const hxe=()=>{const a=mr(),{markets:r,loading:e,getByStoreId:t}=I6(),{activeStoreId:s}=fn(),[o,i]=f.useState("");f.useEffect(()=>{s&&t(s)},[s,t]);const l=f.useCallback(()=>{a("/markets/new")},[]),c=f.useCallback(d=>{i(d)},[]);return n.jsx(pr,{children:n.jsx("div",{className:"min-h-screen",children:n.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 py-6",children:[n.jsx(cxe,{onCreateMarket:l}),n.jsx(pxe,{searchValue:o,onSearchChange:c}),n.jsx(fxe,{markets:r,loading:e,onSelect:d=>a(`/markets/${d}`)})]})})})},mxe=()=>{const a=f.useCallback(()=>{console.log("More actions clicked")},[]),r=f.useCallback(()=>{console.log("Create draft order clicked")},[]);return n.jsx(pr,{children:n.jsx("div",{className:"min-h-screen",children:n.jsxs("div",{className:"max-w-7xl mx-auto pt-6 px-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(zd,{className:"w-5 h-5 text-gray-600"}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Drafts"})]}),n.jsxs("button",{onClick:a,className:"flex items-center gap-1.5 px-3 py-1.5 border border-gray-200 rounded text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:["More actions",n.jsx(Is,{className:"w-4 h-4"})]})]}),n.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mb-4",children:n.jsxs("div",{className:"flex flex-col items-center justify-center text-center min-h-[280px]",children:[n.jsxs("div",{className:"relative w-[200px] h-[150px] mb-6",children:[n.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 w-[180px] h-[90px] bg-blue-50 rounded-[100px/50px]"}),n.jsx("div",{className:"absolute top-[10px] left-1/2 transform -translate-x-1/2 -rotate-[4deg] w-[120px] h-[90px] bg-gray-50 rounded-lg"}),n.jsxs("div",{className:"absolute top-5 left-1/2 transform -translate-x-1/2 w-[140px] h-[105px] p-2 bg-white rounded-lg border border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[n.jsx("div",{className:"w-[18px] h-[18px] bg-green-500 rounded"}),n.jsx("div",{className:"flex-1 h-2 bg-slate-100 rounded"})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("div",{className:"h-1.5 bg-blue-50 rounded"}),n.jsx("div",{className:"h-1.5 bg-blue-50 rounded w-[85%]"}),n.jsx("div",{className:"h-1.5 bg-blue-50 rounded w-[70%]"})]})]})]}),n.jsx("h2",{className:"text-base font-medium mb-1.5",children:"Manually create orders and invoices"}),n.jsx("p",{className:"text-sm text-gray-600 max-w-[600px] mb-6 px-2",children:"Use draft orders to take orders over the phone, email invoices to customers, and collect payments."}),n.jsx("button",{onClick:r,className:"px-4 py-2 bg-gray-900 text-white rounded text-sm font-medium hover:bg-gray-800 transition-colors",children:"Create draft order"})]})}),n.jsx("div",{className:"text-center py-3",children:n.jsxs("p",{className:"text-sm text-gray-600",children:["Learn more about"," ",n.jsx("a",{href:"#",className:"text-gray-700 underline hover:text-gray-900",children:"creating draft orders"})]})})]})})})},gxe=({code:a,onCodeChange:r})=>n.jsxs("div",{className:"border border-gray-300 rounded-lg p-4 mt-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("h3",{className:"text-base font-semibold",children:"Code"}),n.jsx("div",{className:"relative group",children:n.jsx(Oa,{className:"w-5 h-5 text-gray-500 cursor-help",title:"Pixel code snippet"})})]}),n.jsx("textarea",{value:a,rows:8,onChange:e=>r(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md font-mono text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),yxe=({dataSale:a,onDataSaleChange:r})=>n.jsxs("div",{className:"border border-gray-300 rounded-lg p-4",children:[n.jsx("h3",{className:"text-base font-semibold mb-2",children:"Data sale"}),n.jsx("fieldset",{children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"dataSale",value:"qualifies_as_data_sale",checked:a==="qualifies_as_data_sale",onChange:e=>r(e.target.value),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),n.jsx("span",{className:"text-sm text-gray-900",children:"Data collected qualifies as data sale"})]}),n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"dataSale",value:"qualifies_as_data_sale_limited_use",checked:a==="qualifies_as_data_sale_limited_use",onChange:e=>r(e.target.value),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),n.jsx("span",{className:"text-sm text-gray-900",children:"Data collected qualifies as data sale and supports limited data use"})]}),n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"dataSale",value:"does_not_qualify_as_data_sale",checked:a==="does_not_qualify_as_data_sale",onChange:e=>r(e.target.value),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),n.jsx("span",{className:"text-sm text-gray-900",children:"Data collected does not qualify as data sale"})]})]})})]}),xxe=[{key:"marketing",label:"Marketing"},{key:"analytics",label:"Analytics"},{key:"preferences",label:"Preferences"}],vxe=({permission:a,purposes:r,onPermissionChange:e,onPurposeChange:t})=>n.jsxs("div",{className:"border border-gray-300 rounded-lg p-4",children:[n.jsx("h3",{className:"text-base font-semibold mb-2",children:"Permission"}),n.jsx("fieldset",{children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"permission",value:"required",checked:a==="required",onChange:s=>e(s.target.value),className:"mt-1 w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("span",{className:"text-sm text-gray-900",children:"Required"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1 mb-2",children:"The pixel will collect data when permission is granted for selected purposes."}),n.jsx("div",{className:"flex flex-col gap-2 ml-6 mb-3",children:xxe.map(({key:s,label:o})=>n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:r[s],onChange:()=>t(s),disabled:a!=="required",className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"}),n.jsx("span",{className:`text-sm ${a!=="required"?"text-gray-400":"text-gray-900"}`,children:o})]},s))})]})]}),n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"permission",value:"not_required",checked:a==="not_required",onChange:s=>e(s.target.value),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),n.jsx("span",{className:"text-sm text-gray-900",children:"Not required"})]})]})})]}),bxe=()=>{const a=mr(),{pixelId:r}=qa(),{activeStoreId:e}=fn(),{pixels:t,fetchByStoreId:s,loading:o,remove:i,update:l}=L6(),[c,d]=f.useState(null),[h,m]=f.useState(""),[y,x]=f.useState("required"),[b,v]=f.useState({marketing:!1,analytics:!1,preferences:!1}),[j,S]=f.useState("does_not_qualify_as_data_sale"),[k,N]=f.useState(""),P=f.useMemo(()=>t.find(K=>K._id===r),[t,r]);f.useEffect(()=>{e&&(P||s(e).catch(K=>{yr.error(K?.message||"Failed to fetch pixel details")}))},[e,P,s]),f.useEffect(()=>{P&&(m(P.pixelName??""),x(P.required?"required":"not_required"),v({marketing:!!P.marketing,analytics:!!P.analytics,preferences:!!P.preferences}),S(P.dataSale),N(P.code??""))},[P]);const R=f.useCallback(async()=>{if(P)try{await i(P._id),yr.success("Pixel deleted"),a("/settings/customer-events")}catch(K){yr.error(K?.message||"Failed to delete pixel")}},[P,i,a]),F=f.useCallback(K=>{d(K.currentTarget)},[]),z=f.useCallback(()=>{d(null)},[]),H=f.useCallback(K=>{v(D=>({...D,[K]:!D[K]}))},[]),V=f.useMemo(()=>{if(!P)return!1;const K=h.trim(),D=P.pixelName??"",Q=P.required?"required":"not_required",oe={marketing:!!P.marketing,analytics:!!P.analytics,preferences:!!P.preferences};return K!==D||y!==Q||oe.marketing!==b.marketing||oe.analytics!==b.analytics||oe.preferences!==b.preferences||j!==P.dataSale||k!==(P.code??"")},[P,h,y,b,j,k]),W=f.useCallback(async()=>{if(P)try{const K={pixelName:h.trim(),required:y==="required",notRequired:y==="not_required",marketing:y==="required"?b.marketing:!1,analytics:y==="required"?b.analytics:!1,preferences:y==="required"?b.preferences:!1,dataSale:j,code:k};await l(P._id,K),yr.success("Pixel updated")}catch(K){yr.error(K?.message||"Failed to update pixel")}},[P,h,y,b,j,k,l]),Z=f.useCallback(K=>{x(K),K==="not_required"&&v({marketing:!1,analytics:!1,preferences:!1})},[]),A=f.useCallback(K=>{S(K)},[]),q=f.useCallback(K=>{N(K)},[]),I=f.useCallback(()=>{a("/settings/customer-events")},[a]);return r?e?n.jsx(pr,{children:n.jsxs("div",{className:"max-w-[960px] mx-auto py-8 px-4",children:[n.jsxs("button",{onClick:I,className:"flex items-center gap-2 text-gray-700 hover:text-gray-900 mb-4 transition-colors",children:[n.jsx(Hn,{className:"w-5 h-5"}),n.jsx("span",{children:"Back to pixels"})]}),o&&!P?n.jsx("div",{className:"py-12 flex justify-center",children:n.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):P?n.jsxs("div",{children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-4",children:[n.jsxs("div",{className:"flex-1 w-full space-y-2",children:[n.jsx("input",{type:"text",value:h,onChange:K=>m(K.target.value),maxLength:50,placeholder:"Pixel name",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),n.jsxs("p",{className:"text-sm text-gray-600",children:["For enhanced security and stability, pixel access is sandboxed."," ",n.jsx(mT,{text:"Learn more",href:"#"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[V&&n.jsx("button",{onClick:W,disabled:o,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium transition-colors",children:"Save"}),n.jsx("button",{disabled:!0,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:"Test"}),n.jsx("button",{disabled:!0,className:"px-4 py-2 bg-blue-600 text-white rounded-md disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:"Connect"}),n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:F,className:"p-2 text-gray-700 hover:bg-gray-100 rounded-md transition-colors",children:n.jsx(Ud,{className:"w-5 h-5"})}),n.jsxs(V2,{anchorEl:c,open:!!c,onClose:z,children:[n.jsx(np,{disabled:!0,children:"Edit pixel name"}),n.jsx(np,{disabled:!0,children:"Hire a Shopify Partner"}),n.jsx(np,{onClick:()=>{z(),R()},children:n.jsx("span",{className:"text-red-600",children:"Delete pixel"})})]})]})]})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 text-blue-800 px-4 py-3 rounded-lg mt-6 flex items-start gap-2",children:[n.jsx(Oa,{className:"w-5 h-5 shrink-0 mt-0.5"}),n.jsx("p",{className:"text-sm",children:"For enhanced security and stability, pixel access is sandboxed."})]}),n.jsxs("div",{className:"border border-gray-300 rounded-xl mt-6 p-6",children:[n.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Customer privacy"}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(vxe,{permission:y,purposes:b,onPermissionChange:Z,onPurposeChange:H}),n.jsx(yxe,{dataSale:j,onDataSaleChange:A})]}),n.jsxs("p",{className:"text-sm text-gray-600 mt-4",children:["See how these settings apply to your store in"," ",n.jsx(mT,{text:"Customer privacy",href:"#"})]})]}),n.jsx(gxe,{code:k,onCodeChange:q})]}):n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 px-4 py-3 rounded-md",children:"Pixel not found or no longer exists."})]})}):n.jsx(pr,{children:n.jsx("div",{className:"max-w-[960px] mx-auto py-8 px-4",children:n.jsx("div",{className:"bg-blue-50 border border-blue-200 text-blue-800 px-4 py-3 rounded-md",children:"Select a store to view pixel details."})})}):n.jsx(pr,{children:n.jsx("div",{className:"max-w-[960px] mx-auto py-8 px-4",children:n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 px-4 py-3 rounded-md",children:"No pixel selected."})})})},mT=({text:a,href:r})=>n.jsx("a",{href:r,className:"text-blue-600 hover:text-blue-700 hover:underline",children:a});function wxe({title:a,titleId:r,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},e),a?f.createElement("title",{id:r},a):null,f.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"}))}const jxe=f.forwardRef(wxe),Cxe=({onClose:a,onCreate:r,isValid:e,loading:t})=>n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:a,className:"px-4 py-2 text-gray-700 hover:bg-gray-50 rounded-md transition-colors",children:"Cancel"}),n.jsx("button",{onClick:r,disabled:!e||t,className:"px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 disabled:bg-gray-300 disabled:text-gray-500 disabled:cursor-not-allowed transition-colors",children:"Add pixel"})]}),Sxe=({open:a,onClose:r,pixelName:e,onPixelNameChange:t,dataSale:s,onDataSaleChange:o,code:i,onCodeChange:l,isValid:c,loading:d,onCreate:h,maxName:m})=>n.jsxs(un,{open:a,onClose:r,title:"Add custom pixel",maxWidth:"sm",actions:n.jsx(Cxe,{onClose:r,onCreate:h,isValid:c,loading:d}),children:[n.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-md flex items-start gap-2",children:[n.jsx(jxe,{className:"w-5 h-5 text-blue-600 shrink-0 mt-0.5"}),n.jsxs("p",{className:"text-sm text-blue-900",children:["Did you check available apps first? Apps are the most secure option, with automatic updates, for integrating with third-party services."," ",n.jsx("a",{href:"#",className:"text-blue-600 hover:underline",children:"Explore pixels apps"})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Pixel name"}),n.jsx("input",{type:"text",value:e,onChange:y=>t(y.target.value.slice(0,m)),maxLength:m,className:"w-full px-4 py-2 border border-gray-300 rounded-md bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent"}),n.jsxs("p",{className:"text-xs text-gray-500 text-right mt-1",children:[e.length,"/",m]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Data sale"}),n.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:n.jsxs("fieldset",{className:"space-y-3",children:[n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"dataSale",value:"qualifies_as_data_sale",checked:s==="qualifies_as_data_sale",onChange:y=>o(y.target.value),className:"mt-1 w-4 h-4 text-gray-900 focus:ring-gray-900"}),n.jsx("span",{className:"text-sm text-gray-900",children:"Data collected qualifies as data sale"})]}),n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"dataSale",value:"qualifies_as_data_sale_limited_use",checked:s==="qualifies_as_data_sale_limited_use",onChange:y=>o(y.target.value),className:"mt-1 w-4 h-4 text-gray-900 focus:ring-gray-900"}),n.jsx("span",{className:"text-sm text-gray-900",children:"Data collected qualifies as data sale and supports limited data use"})]}),n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"dataSale",value:"does_not_qualify_as_data_sale",checked:s==="does_not_qualify_as_data_sale",onChange:y=>o(y.target.value),className:"mt-1 w-4 h-4 text-gray-900 focus:ring-gray-900"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("span",{className:"text-sm text-gray-900 block",children:"Data collected does not qualify as data sale"}),n.jsx("span",{className:"text-xs text-gray-600 block mt-1",children:"The pixel will collect data when the customers opts out of their data being sold."})]})]})]})})]}),n.jsx("div",{className:"h-px bg-gray-200 my-6"}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Code"}),n.jsx("span",{className:"text-xs text-gray-500",children:"i"})]}),n.jsx("textarea",{value:i,onChange:y=>l(y.target.value),rows:6,className:"w-full px-4 py-2 border border-gray-300 rounded-md bg-white text-gray-900 font-mono text-sm focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent resize-y"})]}),n.jsx("p",{className:"text-sm text-gray-600 mt-4",children:"This is an advanced feature that requires JavaScript knowledge. Ziplofy is not responsible for your use of pixels. Compliance with applicable laws, consents, code security, troubleshooting, and updates are your responsibility. Pixels are subject to the Terms of Service."})]}),Nxe=({onOpenModal:a})=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-1",children:"Pixels"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Enable third-party services to securely collect and use customer event data from your store"})]}),n.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[n.jsx("button",{className:"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Explore pixel apps"}),n.jsx("button",{onClick:a,className:"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Add custom pixel"})]})]}),kxe=({pixel:a,renderStatusChip:r,onRowClick:e})=>n.jsxs("tr",{onClick:()=>e(a._id),className:"border-b border-gray-200 hover:bg-gray-50 cursor-pointer transition-colors",children:[n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-6 h-6 bg-gray-100 border border-gray-200 text-gray-600 flex items-center justify-center shrink-0",children:n.jsx(vS,{className:"w-3.5 h-3.5"})}),n.jsx("span",{className:"text-sm font-medium capitalize text-gray-900",children:a.pixelName})]})}),n.jsx("td",{className:"px-3 py-2 text-sm capitalize text-gray-900",children:a.type}),n.jsx("td",{className:"px-3 py-2",children:r(a)}),n.jsx("td",{className:"px-3 py-2 text-right",children:n.jsx("button",{onClick:t=>{t.stopPropagation()},className:"p-1 text-gray-600 hover:text-gray-900 hover:bg-gray-50 transition-colors",children:n.jsx(Ud,{className:"w-4 h-4"})})})]}),_xe=({pixels:a,renderStatusChip:r,onRowClick:e})=>n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-gray-200 bg-white",children:[n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700",children:"Pixels"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700",children:"Type"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700",children:"Status"}),n.jsx("th",{className:"px-3 py-2 text-right",children:""})]})}),n.jsx("tbody",{children:a.map(t=>n.jsx(kxe,{pixel:t,renderStatusChip:r,onRowClick:e},t._id))})]})}),gT=30,yT=`// Step 1. Initialize the JavaScript pixel SDK (make sure to exclude HTML)

// Step 2. Subscribe to customer events with analytics.subscribe(), and add tracking
// analytics.subscribe("all_standard_events", function (event) {
//   console.log("Event data ", event?.data);
// });`,Exe={inactive:"Disconnected",disconnected:"Disconnected",active:"Connected"},Txe=()=>{const[a,r]=f.useState(!1),[e,t]=f.useState(""),[s,o]=f.useState("does_not_qualify_as_data_sale"),[i,l]=f.useState(yT),[c,d]=f.useState("all"),{activeStoreId:h}=fn(),{pixels:m,create:y,fetchByStoreId:x,loading:b}=L6(),v=mr();f.useEffect(()=>{h&&x(h).catch(Z=>{yr.error(Z?.message||"Failed to fetch pixels")})},[h,x]);const j=f.useMemo(()=>e.trim().length>0&&e.length<=gT,[e]),S=f.useMemo(()=>c==="app"?[]:c==="custom"?m.filter(Z=>Z.type.toLowerCase()==="custom"):m,[m,c]),k=S.length>0,N=f.useCallback(()=>{r(!1),t(""),o("does_not_qualify_as_data_sale"),l(yT)},[]),P=f.useCallback(async()=>{if(j){if(!h){yr.error("Select a store before creating a pixel");return}try{await y({storeId:h,pixelName:e.trim(),type:"custom",status:"inactive",required:!1,notRequired:!0,marketing:!1,analytics:!1,preferences:!1,dataSale:s,code:i}),yr.success("Pixel created"),N()}catch(Z){yr.error(Z?.message||"Failed to create pixel")}}},[j,h,e,s,i,y,N]),R=f.useCallback(Z=>{const A=Exe[Z.status?.toLowerCase()]||Z.status;return n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium text-gray-700 bg-gray-50 border border-gray-200 capitalize",children:A})},[]),F=f.useCallback(()=>{h&&x(h).catch(Z=>yr.error(Z?.message||"Failed to refresh pixels"))},[h,x]),z=f.useCallback(Z=>{d(Z)},[]),H=f.useCallback(()=>{r(!0)},[]),V=f.useCallback(Z=>{v(`/settings/customer-events/${Z}`)},[v]),W=f.useMemo(()=>[{id:"all",label:"All"},{id:"app",label:"App pixels"},{id:"custom",label:"Custom pixels"}],[]);return n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900 mb-4 border-b border-gray-200 pb-4",children:"Customer events"}),n.jsxs("div",{className:"border border-gray-200 p-4 bg-white/95",children:[n.jsx(Nxe,{onOpenModal:H}),n.jsxs("div",{className:"mt-4 border border-gray-200 bg-white/95",children:[n.jsx("div",{className:"px-3 pt-3",children:n.jsx(KS,{tabs:W,activeTab:c,onTabChange:z})}),n.jsx("div",{className:"h-px bg-gray-200"}),n.jsxs("div",{className:"px-3 py-2 flex justify-end gap-2",children:[n.jsx("button",{disabled:!0,className:"p-1.5 text-gray-400 cursor-not-allowed",children:n.jsx(Ro,{className:"w-4 h-4"})}),n.jsx("button",{onClick:F,className:"p-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-50 transition-colors",children:n.jsx(Hu,{className:"w-4 h-4"})})]}),n.jsx("div",{className:"h-px bg-gray-200"}),b?n.jsx("div",{className:"py-12 flex justify-center",children:n.jsx("div",{className:"w-6 h-6 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})}):k?n.jsx(_xe,{pixels:S,renderStatusChip:R,onRowClick:V}):n.jsx("div",{className:"py-12 text-center text-gray-600",children:n.jsx("p",{className:"text-xs",children:"No pixels found for this store."})})]}),n.jsxs("p",{className:"text-xs text-gray-600 mt-4",children:["This list only shows"," ",n.jsx("button",{className:"text-gray-700 hover:underline",children:"pixels"})," ","that use the applicable Shopify APIs, the supported pixel integration."]}),n.jsx("button",{className:"text-xs text-gray-700 mt-4 inline-flex items-center hover:underline",children:"Learn more about pixels"})]}),n.jsx(Sxe,{open:a,onClose:N,pixelName:e,onPixelNameChange:t,dataSale:s,onDataSaleChange:o,code:i,onCodeChange:l,isValid:j,loading:b,onCreate:P,maxName:gT})]})})},Oxe=()=>{const a=mr(),{activeStoreId:r}=fn(),{createShippingProfile:e,loading:t}=W2(),[s,o]=f.useState(""),[i,l]=f.useState(null),c=()=>{a("/settings/shipping-and-delivery")},d=async()=>{if(!r){l("Please select a store.");return}if(!s.trim()){l("Profile name is required.");return}try{l(null),await e({profileName:s.trim(),storeId:r}),a("/settings/shipping-and-delivery")}catch(h){l(h.message||"Failed to create shipping profile")}};return n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 border-b border-gray-200 pb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:c,className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(Hn,{className:"w-5 h-5"})}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Create shipping profile"})]}),n.jsx("button",{onClick:d,disabled:!s.trim()||t,className:"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-700 min-w-[100px] disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:t?"Saving...":"Save"})]}),n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4 max-w-2xl",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-1",children:"Profile name"}),n.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Customers won't see this"}),n.jsx("input",{type:"text",placeholder:"Fragile products",value:s,onChange:h=>o(h.target.value),className:"w-full px-3 py-2 border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 text-sm"}),i&&n.jsx("p",{className:"text-xs text-red-600 mt-2",children:i})]})]})})},Pxe=()=>{const a=mr(),{profileId:r}=qa(),{searchProductsWithVariants:e}=dc(),{activeStoreId:t}=fn(),{storeCountries:s,getCountriesByStoreId:o}=I6(),{statesByCountry:i,getStatesByCountryId:l}=p6(),{createShippingZone:c,updateShippingZone:d,deleteShippingZone:h,getShippingZonesByShippingProfileId:m,shippingZones:y,loading:x}=kye(),{createShippingZoneRate:b,getShippingZoneRatesByZoneId:v,updateShippingZoneRate:j,deleteShippingZoneRate:S,loading:k}=Sye(),{shippingProfiles:N,getShippingProfilesByStoreId:P,updateShippingProfile:R,deleteShippingProfile:F,loading:z}=W2(),{settingsByProfileId:H,fetchByProfileId:V,updateLocationSetting:W,loading:Z,error:A}=bye(),{entriesByProfileId:q,fetchByProfileId:I,addEntry:K,deleteEntry:D}=jye(),[Q,oe]=f.useState({}),[re,Te]=f.useState({}),[G,Y]=f.useState(!1),[Se,fe]=f.useState(!1),[Ee,Ae]=f.useState({}),[qe,we]=f.useState({}),[Oe,ze]=f.useState(new Set),We=()=>{a("/settings/shipping-and-delivery")},[pt,Pt]=f.useState({});f.useEffect(()=>{r&&(H[r]||V(r).catch(()=>{}))},[r,H,V]);const ee=f.useCallback(rt=>rt?[rt?.address,rt?.apartment,rt?.city,rt?.state,rt?.postalCode].filter(qt=>typeof qt=="string"&&qt.trim().length>0).map(qt=>String(qt).trim()).join(", "):"",[]),Ne=f.useMemo(()=>r?(H[r]||[]).reduce((Vt,qt)=>{const Qt=qt.location,xr=typeof qt.locationId=="string"?qt.locationId:qt.locationId?._id||qt.locationId,wn=xr?String(xr).trim():"";return wn&&Vt.push({id:wn,name:Qt?.name||"Untitled location",address:ee(Qt),country:Qt?.countryRegion||"",raw:Qt,contextSetting:{createNewRates:qt.createNewRates,removeRates:qt.removeRates}}),Vt},[]):[],[r,H,ee]),[Ie,ne]=f.useState(!1),[M,U]=f.useState(""),[J,ce]=f.useState(""),[ue,xe]=f.useState(!1),[he,se]=f.useState(null),[Le,Ue]=f.useState([]),[Ge,ie]=f.useState(null),[_e,le]=f.useState(new Set),[Xe,Fe]=f.useState(new Set),[dt,lt]=f.useState(null),[ft,Ze]=f.useState(!1),[Nt,Mt]=f.useState(""),[vt,Jt]=f.useState(!1),[wr,Wt]=f.useState(""),[ye,Be]=f.useState(""),[tt,wt]=f.useState(new Set),[Ut,er]=f.useState(new Set),[zr,rn]=f.useState(new Set),[_n,Ur]=f.useState(!1),[ar,br]=f.useState(null),[pn,In]=f.useState(null),[on,Er]=f.useState(new Set),jr=f.useRef(tt),[ht,vr]=f.useState(!1),[Rn,bn]=f.useState(null),[En,Wr]=f.useState("create"),Bn=f.useRef("create"),[te,je]=f.useState(null),[Re,Ye]=f.useState(null),[at,jt]=f.useState(!1),[Qe,$e]=f.useState(null),[ve,Ve]=f.useState(!1),[st,Ot]=f.useState(null),[de,ke]=f.useState(null),[ct,bt]=f.useState("flat"),[Ft,cr]=f.useState("custom"),[Br,kt]=f.useState(""),[Yr,Xr]=f.useState(""),[ma,Jn]=f.useState("0.00"),[fa,Ns]=f.useState(!1),[Ja,Aa]=f.useState("weight"),[fs,Lr]=f.useState("0"),[kr,mt]=f.useState(""),[nr,Ar]=f.useState("0.00"),[Rr,kn]=f.useState(""),[Sn,Vn]=f.useState(null),[zn,Kn]=f.useState(null),[ro,ps]=f.useState(!1),[Yn,qn]=f.useState(null),[Zn,ka]=f.useState(!1),[ks,La]=f.useState(!1),wa=["Tracking number provided","Made to order","Ships next day"],Xn=Qe?._id?String(Qe._id):null,{reservedStatesMap:Ma,reservedCountriesMap:es}=f.useMemo(()=>{const rt=new Map,Vt=new Map;return Array.isArray(y)&&y.forEach(qt=>{if(!qt||Xn&&String(qt._id)===Xn)return;const Qt=qt.zoneName||"Another zone";(qt.countries||[]).forEach(xr=>{if(!xr)return;const wn=xr.countryId?String(xr.countryId):"";wn&&(Array.isArray(xr.stateIds)&&xr.stateIds.length>0?xr.stateIds.forEach(Wn=>{Wn&&rt.set(String(Wn),Qt)}):Vt.set(wn,Qt))})}),{reservedStatesMap:rt,reservedCountriesMap:Vt}},[y,Xn]),qr=f.useMemo(()=>{const rt=s??[],Vt=ye.trim().toLowerCase();return Vt?rt.filter(qt=>[qt.name,qt.officialName,qt.iso2,qt.iso3,qt.numericCode].filter(Boolean).map(xr=>String(xr).toLowerCase()).some(xr=>xr.includes(Vt))).sort((qt,Qt)=>qt.name.localeCompare(Qt.name)):[...rt].sort((qt,Qt)=>qt.name.localeCompare(Qt.name))},[s,ye]),Gr=f.useCallback(async rt=>{if(!rt)return[];const Vt=i[rt];if(Vt)return Vt;Er(qt=>{const Qt=new Set(qt);return Qt.add(rt),Qt});try{return await l(rt)||[]}catch{return[]}finally{Er(qt=>{const Qt=new Set(qt);return Qt.delete(rt),Qt})}},[l,i]);f.useEffect(()=>{t&&(Y(!0),P(t).catch(rt=>{console.error("Failed to fetch shipping profiles:",rt)}).finally(()=>Y(!1)))},[t,P]),f.useEffect(()=>{r&&I(r).catch(()=>{})},[r,I]);const cn=f.useMemo(()=>{if(r)return N.find(rt=>rt._id===r)},[N,r]);f.useEffect(()=>{if(!Ie)return;const rt=setTimeout(()=>{ce(M)},300);return()=>clearTimeout(rt)},[Ie,M]),f.useEffect(()=>{jr.current=tt},[tt]),f.useEffect(()=>{if(!Ie)return;if(!J.trim()){Ue([]),ie(null),se(null);return}if(!t){se("Select a store to manage products."),Ue([]);return}let rt=!1;return(async()=>{try{xe(!0),se(null);const qt=await e({storeId:t,q:J,limit:50});if(rt)return;Ue(qt.data||[]),ie(qt.pagination||null)}catch(qt){if(rt)return;Ue([]);const Qt=qt?.message||"Failed to search products";se(Qt)}finally{rt||xe(!1)}})(),()=>{rt=!0}},[Ie,t,J,e]),f.useEffect(()=>{if(!vt)return;if(!t){br("Select a store to manage shipping zones."),Ur(!1);return}let rt=!1;return(async()=>{try{Ur(!0),br(null),await o(t)}catch(qt){if(rt)return;const Qt=qt?.message||"Failed to fetch countries";br(Qt)}finally{rt||Ur(!1)}})(),()=>{rt=!0}},[vt,t,o]),f.useEffect(()=>{r&&m(r).catch(rt=>{console.error("Failed to fetch shipping zones:",rt)})},[r,m]),f.useEffect(()=>{if(!y||y.length===0)return;(async()=>{for(const Vt of y)if(Vt._id){Te(qt=>qt[Vt._id]?qt:{...qt,[Vt._id]:!0});try{const qt=await v(Vt._id);oe(Qt=>Qt[Vt._id]?Qt:{...Qt,[Vt._id]:qt})}catch(qt){console.error(`Failed to fetch rates for zone ${Vt._id}:`,qt),oe(Qt=>Qt[Vt._id]?Qt:{...Qt,[Vt._id]:[]})}finally{Te(qt=>({...qt,[Vt._id]:!1}))}}})()},[y,v]);const tn=()=>{bt("flat"),cr("custom"),kt(""),Xr(""),Jn("0.00"),Ns(!1),Aa("weight"),Lr("0"),mt(""),Ar("0.00"),kn("")},Me=rt=>{bt(rt.rateType||"flat"),cr(rt.shippingRate||"custom"),kt(rt.customRateName||""),Xr(rt.customDeliveryDescription||"");const Vt=typeof rt.price=="number"?rt.price:parseFloat(String(rt.price??0));Jn(Number.isFinite(Vt)?Vt.toFixed(2):"0.00");const qt=!!rt.conditionalPricingEnabled;Ns(qt),Aa(qt&&rt.conditionalPricingBasis==="price"?"price":"weight"),Lr(rt.minWeight===null||rt.minWeight===void 0?"":String(rt.minWeight)),mt(rt.maxWeight===null||rt.maxWeight===void 0?"":String(rt.maxWeight)),Ar(rt.minPrice===null||rt.minPrice===void 0?"":String(rt.minPrice)),kn(rt.maxPrice===null||rt.maxPrice===void 0?"":String(rt.maxPrice))},ot=()=>{Ve(!1),Ot(null),ke(null),tn()},_t=rt=>{rt&&(tn(),Ot(rt),ke(null),Ve(!0))},It=()=>{if(!Sn)return;const rt=y.find(Vt=>Vt._id===Sn.zoneId)||{_id:Sn.zoneId};tn(),Me(Sn.rate),Ot(rt),ke(Sn.rate._id),Ve(!0),Vn(null)},At=async()=>{if(!Sn)return;const{zoneId:rt,zoneName:Vt,rate:qt}=Sn;Vn(null),Kn({zoneId:rt,zoneName:Vt,rate:qt})},sr=rt=>{qn(rt.currentTarget)},$t=()=>{qn(null)},Bt=async()=>{if(r){La(!0);try{await F(r),ka(!1),qn(null),a("/settings/shipping-and-delivery")}catch{}finally{La(!1)}}},Cr=async()=>{if(Re){jt(!0);try{await h(Re.id),Ye(null)}catch(rt){console.error("Failed to delete shipping zone:",rt)}finally{jt(!1)}}},Lt=async()=>{if(!zn)return;ps(!0);const{zoneId:rt,rate:Vt}=zn;try{await S(Vt._id),oe(qt=>{const Qt=qt[rt]||[];return{...qt,[rt]:Qt.filter(xr=>xr._id!==Vt._id)}}),Kn(null)}catch(qt){console.error("Failed to delete shipping zone rate:",qt)}finally{ps(!1)}},dr=async()=>{if(!st)return;const rt={rateType:ct,shippingRate:Ft||"custom",customRateName:Br.trim(),customDeliveryDescription:Yr.trim()||void 0,price:ma,conditionalPricingEnabled:fa,conditionalPricingBasis:fa?Ja:void 0,minWeight:fa&&Ja==="weight"&&fs||void 0,maxWeight:fa&&Ja==="weight"&&kr||void 0,minPrice:fa&&Ja==="price"&&nr||void 0,maxPrice:fa&&Ja==="price"&&Rr||void 0};try{if(de){const Vt=await j(de,rt);oe(qt=>{const Qt=st._id,xr=qt[Qt]||[];return{...qt,[Qt]:xr.map(wn=>wn._id===de?Vt:wn)}})}else{const Vt={...rt,shippingZoneId:st._id},qt=await b(Vt);st._id&&oe(Qt=>({...Qt,[st._id]:[qt,...Qt[st._id]||[]]}))}ot()}catch(Vt){console.error("Failed to save shipping zone rate:",Vt)}},Dr=()=>{ne(!0),U(""),ce(""),Ue([]),se(null)},Or=()=>{ne(!1)},Zr=async rt=>{if($e(null),Wt(""),wt(new Set),er(new Set),rn(new Set),Be(""),br(null),In(null),Er(new Set),Jt(!0),rt){$e(rt),Wt(rt.zoneName||"");const Vt=new Set,qt=new Set;if(rt.countries&&Array.isArray(rt.countries))for(const Qt of rt.countries){if(Vt.add(Qt.countryId),!i[Qt.countryId])try{await l(Qt.countryId)}catch(xr){console.error(`Failed to fetch states for country ${Qt.countryId}:`,xr)}Qt.stateIds&&Array.isArray(Qt.stateIds)&&Qt.stateIds.forEach(xr=>{qt.add(xr)})}wt(Vt),er(qt),rn(new Set)}},Kr=()=>{Jt(!1),$e(null),Wt(""),Be(""),wt(new Set),er(new Set),rn(new Set),In(null)},Cn=async()=>{if(!r){In("Shipping profile ID is required");return}if(!wr.trim()){In("Zone name is required");return}if(Mi===0){In("Please select at least one country or state");return}try{In(null);const rt=[];for(const Qt of tt){const wn=(i[Qt]||[]).filter(Wn=>Ut.has(Wn._id));wn.length>0?rt.push({countryId:Qt,stateIds:wn.map(Wn=>Wn._id)}):rt.push({countryId:Qt})}const Vt=new Map;Object.entries(i).forEach(([Qt,xr])=>{xr.forEach(wn=>{Vt.set(wn._id,Qt)})});const qt=[];for(const Qt of Ut){const xr=Vt.get(Qt);xr&&!tt.has(xr)&&qt.push(Qt)}if(qt.length>0){const Qt=new Map;qt.forEach(xr=>{const wn=Vt.get(xr);wn&&(Qt.has(wn)||Qt.set(wn,[]),Qt.get(wn).push(xr))}),Qt.forEach((xr,wn)=>{rt.push({countryId:wn,stateIds:xr})})}Qe?(await d(Qe._id,{zoneName:wr.trim(),countries:rt}),r&&await m(r)):(await c({zoneName:wr.trim(),shippingProfileId:r,countries:rt}),r&&await m(r)),Kr()}catch(rt){const Vt=rt?.message||"Failed to create shipping zone";In(Vt)}},Qr=rt=>{bn(rt);const Vt=String(rt.id).trim(),qt=pt[Vt]||rt.contextSetting;let Qt="create";qt&&(Qt=qt.removeRates?"remove":"create"),Bn.current=Qt,Wr(Qt),vr(!0)},Hr=()=>{vr(!1),bn(null)},Qn=async()=>{if(!Rn||!r)return;const rt=String(Rn.id).trim();if(!rt||rt.length===0){console.error("Invalid locationId:",Rn.id);return}const Vt=Bn.current,qt=Vt==="create",Qt=Vt==="remove";console.log("Saving location settings:",{locationId:rt,currentSelection:Vt,stateValue:En,refValue:Bn.current,createNewRates:qt,removeRates:Qt});const xr=pt[rt]||Rn.contextSetting,wn=xr?xr.createNewRates:!0,Wn=xr?xr.removeRates:!1;if(!(qt!==wn||Qt!==Wn)){vr(!1);return}try{await W(r,rt,{createNewRates:qt,removeRates:Qt}),Pt(sa=>({...sa,[rt]:{createNewRates:qt,removeRates:Qt}})),Ae(sa=>({...sa,[rt]:!0}))}catch(sa){console.error("Failed to update location setting:",sa)}finally{vr(!1)}},Jr=rt=>{const Vt=Object.values(rt.optionValues||{});return Vt.length===0?rt.sku:Vt.join(" / ")},is=()=>ue?n.jsx("div",{className:"flex justify-center py-12",children:n.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 border-t-gray-900 rounded-full animate-spin"})}):he?n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 text-xs",children:he}):Le.length?n.jsxs("div",{className:"border border-gray-200 overflow-hidden",children:[n.jsxs("div",{className:"flex items-center px-3 py-2 bg-gray-50 border-b border-gray-200",children:[n.jsx("p",{className:"flex-1 text-xs font-medium text-gray-600",children:"Product"}),n.jsx("p",{className:"w-40 text-right text-xs font-medium text-gray-600",children:"Profile"})]}),n.jsx("div",{children:Le.map(rt=>{const Vt=rt.variants.every(xr=>en.has(xr._id)),qt=!Vt&&rt.variants.some(xr=>en.has(xr._id)),Qt=Xe.has(rt.product._id);return n.jsxs("div",{className:"border-b border-gray-100",children:[n.jsxs("div",{className:"flex items-center gap-3 px-3 py-2",children:[n.jsx("input",{type:"checkbox",checked:Vt,ref:xr=>{xr&&(xr.indeterminate=qt)},onChange:()=>hs(rt,Vt),disabled:Qt,className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400 disabled:opacity-50"}),n.jsx("div",{className:"w-9 h-9 bg-gray-100 flex items-center justify-center text-xs font-medium text-gray-600 shrink-0",children:rt.product.imageUrl?n.jsx("img",{src:rt.product.imageUrl,alt:rt.product.title,className:"w-full h-full object-cover"}):rt.product.title?.charAt(0).toUpperCase()||"P"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:rt.product.title}),n.jsx("p",{className:"text-xs text-gray-600",children:rt.product.sku||"No SKU"})]}),n.jsx("p",{className:"w-40 text-right text-sm text-gray-600",children:"General shipping"})]}),rt.variants.map(xr=>{const wn=en.has(xr._id),Wn=_e.has(xr._id)||Qt;return n.jsxs("div",{className:"flex items-center gap-3 px-3 py-1 pl-12",children:[n.jsx("input",{type:"checkbox",checked:wn,onChange:()=>ga(xr),disabled:Wn,className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400 disabled:opacity-50"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm text-gray-900",children:Jr(xr)}),n.jsxs("p",{className:"text-xs text-gray-600",children:["SKU: ",xr.sku]})]}),n.jsx("p",{className:"w-40 text-right text-sm text-gray-600",children:"General shipping"})]},xr._id)})]},rt.product._id)})})]}):n.jsx("div",{className:"py-12 text-center",children:n.jsx("p",{className:"text-sm text-gray-600",children:"No products found."})}),Ln=f.useMemo(()=>r?q[r]||[]:[],[r,q]),Ko=Ln.length,en=f.useMemo(()=>{const rt=new Map;return Ln.forEach(Vt=>{const qt=typeof Vt.productVariantId=="string"?Vt.productVariantId:Vt.productVariantId?._id;qt&&rt.set(String(qt),Vt)}),rt},[Ln]),ga=async rt=>{if(!r)return;const Vt=rt._id;le(qt=>new Set(qt).add(Vt));try{const qt=en.get(Vt);qt?await D(qt._id,r):await K(r,{productVariantId:Vt})}catch(qt){console.error("Failed to toggle product variant entry:",qt)}finally{le(qt=>{const Qt=new Set(qt);return Qt.delete(Vt),Qt})}},hs=async(rt,Vt)=>{if(!r)return;const qt=rt.product._id;Fe(Qt=>new Set(Qt).add(qt));try{if(Vt){const Qt=rt.variants.map(xr=>en.get(xr._id)).filter(xr=>!!xr);for(const xr of Qt)await D(xr._id,r)}else{const Qt=rt.variants.filter(xr=>!en.has(xr._id));for(const xr of Qt)await K(r,{productVariantId:xr._id})}}catch(Qt){console.error("Failed to toggle product variants:",Qt)}finally{Fe(Qt=>{const xr=new Set(Qt);return xr.delete(qt),xr})}},aa=rt=>{const Vt=rt._id,qt=tt.has(Vt);if(wt(Qt=>{const xr=new Set(Qt);return qt?xr.delete(Vt):xr.add(Vt),xr}),qt){const Qt=i[Vt];Qt?.length&&er(xr=>{const wn=new Set(xr);return Qt.forEach(Wn=>wn.delete(Wn._id)),wn})}else{const Qt=i[Vt];Qt?.length?er(xr=>{const wn=new Set(xr);return Qt.forEach(Wn=>wn.add(Wn._id)),wn}):Gr(Vt).then(xr=>{xr?.length&&jr.current.has(Vt)&&er(wn=>{const Wn=new Set(wn);return xr.forEach(Fa=>Wn.add(Fa._id)),Wn})})}},Da=f.useCallback(rt=>{rn(Vt=>{const qt=new Set(Vt);return qt.has(rt._id)?qt.delete(rt._id):(qt.add(rt._id),Gr(rt._id)),qt})},[Gr]),Do=f.useCallback((rt,Vt)=>{er(qt=>{const Qt=new Set(qt);Qt.has(Vt._id)?Qt.delete(Vt._id):Qt.add(Vt._id);const xr=i[rt._id]||[];if(xr.length){const wn=xr.every(Wn=>Qt.has(Wn._id));wt(Wn=>{const Fa=new Set(Wn);return wn?Fa.add(rt._id):Fa.delete(rt._id),Fa})}return Qt})},[i]),Fo=rt=>{if(on.has(rt._id))return"Loading states...";const Vt=i[rt._id];if(Array.isArray(Vt)){const qt=Vt.length;return`${Vt.filter(wn=>Ut.has(wn._id)).length} of ${qt} ${qt===1?"state":"states"}`}return tt.has(rt._id)?"Selected":""},Ia=()=>qr.length?n.jsx("div",{className:"border border-gray-200 overflow-hidden",children:qr.map(rt=>{const Vt=String(rt._id??rt.countryId??rt.id??""),qt=tt.has(rt._id),Qt=Fo(rt),xr=rt.flagEmoji||rt.iso2?.toUpperCase()||"??",wn=i[rt._id],Wn=zr.has(rt._id),sa=!!(Vt&&es.get(Vt));return n.jsxs("div",{className:"border-b border-gray-100",children:[n.jsxs("div",{className:"flex items-center gap-3 px-3 py-2",children:[n.jsx("input",{type:"checkbox",checked:qt,onChange:()=>aa(rt),disabled:sa,className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400 disabled:opacity-50"}),n.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-base",children:xr}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:rt.name}),sa?n.jsx("p",{className:"text-xs text-gray-400 font-medium",children:"In another zone"}):Qt?n.jsx("p",{className:"text-xs text-gray-600",children:Qt}):null]}),n.jsx("button",{onClick:()=>Da(rt),className:"p-1 text-gray-500 hover:text-gray-700 transition-colors",children:Wn?n.jsx(pp,{className:"w-4 h-4"}):n.jsx(Is,{className:"w-4 h-4"})})]}),Wn&&n.jsx("div",{className:"pl-12 pr-3 pb-2",children:on.has(rt._id)?n.jsxs("div",{className:"flex items-center gap-2 py-2",children:[n.jsx("div",{className:"w-4 h-4 border-2 border-gray-300 border-t-gray-900 rounded-full animate-spin"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Loading states..."})]}):wn&&wn.length>0?n.jsx("div",{className:"space-y-1",children:wn.map(Ba=>{const Yo=String(Ba._id),Ys=Ut.has(Ba._id),ge=!!(es.get(Vt)||(Yo?Ma.get(Yo):void 0));return n.jsxs("div",{className:"flex items-center gap-2 py-1",children:[n.jsx("input",{type:"checkbox",checked:Ys&&!ge,onChange:()=>Do(rt,Ba),disabled:ge,className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400 disabled:opacity-50"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:`text-sm ${ge?"text-gray-400":"text-gray-900"}`,children:Ba.name}),!ge&&Ba.code&&n.jsx("p",{className:"text-xs text-gray-600",children:Ba.code})]}),ge&&n.jsx("p",{className:"text-xs text-gray-400 font-medium",children:"In another zone"})]},Ba._id)})}):n.jsx("p",{className:"text-xs text-gray-600 py-2",children:"No states available"})})]},rt._id)})}):n.jsx("div",{className:"border border-gray-200 py-12 text-center",children:n.jsx("p",{className:"text-sm text-gray-600",children:"No countries available. Add countries to your markets to see them here."})}),Mi=tt.size+Ut.size,li=cn?.profileName||"Shipping profile";f.useEffect(()=>{cn?.profileName!==void 0&&Mt(cn.profileName)},[cn?.profileName]);const Bo=f.useRef(!1),Jc=f.useRef(void 0),[Tl,mc]=f.useState(!1);f.useEffect(()=>{r!==Jc.current&&(Bo.current=!1,mc(!1),Jc.current=r)},[r]),f.useEffect(()=>{if(!(!cn||!r||G)&&!Bo.current&&!Tl){if(cn.locationSettings&&cn.locationSettings.length>0){const rt={};cn.locationSettings.forEach(Vt=>{const qt=String(Vt.locationId).trim();qt&&qt.length>0&&(rt[qt]={createNewRates:Vt.createNewRates,removeRates:Vt.removeRates})}),console.log("Populated locationSettings from profile:",rt),Pt(rt)}mc(!0)}},[r,cn,G]),f.useEffect(()=>{if(!cn||!r||G||Bo.current||!Tl)return;const rt=setTimeout(()=>{we({...pt}),ze(new Set(y.map(Vt=>Vt._id))),Bo.current=!0},100);return()=>clearTimeout(rt)},[r,cn,G,Tl,y.length]),f.useEffect(()=>{if(!Bo.current){Object.keys(pt).length===0&&y.length===0&&fe(!1);return}const rt=(()=>{const Qt=Object.keys(pt),xr=Object.keys(qe);if(Qt.length!==xr.length)return!0;for(const wn of Qt){const Wn=pt[wn],Fa=qe[wn];if(!Fa||Wn.createNewRates!==Fa.createNewRates||Wn.removeRates!==Fa.removeRates)return!0}for(const wn of xr)if(!pt[wn])return!0;return!1})(),Vt=y.length!==Oe.size||y.some(Qt=>!Oe.has(Qt._id))||Array.from(Oe).some(Qt=>!y.find(xr=>xr._id===Qt)),qt=Nt.trim()!==(cn?.profileName||"").trim();fe(qt||rt||Vt)},[pt,y,Nt,cn?.profileName,qe,Oe]);const gc=async()=>{if(!r)return;const rt=Nt.trim();if(!rt){Mt(cn?.profileName||"Shipping profile"),Ze(!1);return}try{await R(r,{profileName:rt}),fe(!1),Ze(!1)}catch(Vt){console.error("Failed to update shipping profile:",Vt)}};return r?G&&!cn?n.jsx(pr,{children:n.jsx("div",{className:"max-w-7xl mx-auto py-8 px-4",children:n.jsx("div",{className:"text-center py-12",children:n.jsx("div",{className:"inline-block w-6 h-6 border-2 border-gray-300 border-t-gray-900 rounded-full animate-spin"})})})}):cn?n.jsxs(pr,{children:[n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 border-b border-gray-200 pb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:We,className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(Hn,{className:"w-5 h-5"})}),ft?n.jsx("input",{type:"text",value:Nt,onChange:rt=>Mt(rt.target.value),autoFocus:!0,onBlur:()=>Ze(!1),onKeyDown:rt=>{rt.key==="Enter"&&(rt.preventDefault(),Ze(!1))},className:"text-xl font-medium text-gray-900 border-b border-gray-300 focus:outline-none focus:border-gray-900 min-w-[200px]"}):n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:Nt}),n.jsx("button",{onClick:()=>Ze(!0),className:"p-1 text-gray-500 hover:text-gray-700 transition-colors",children:n.jsx(oi,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:sr,className:"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors flex items-center gap-1",children:["Actions",n.jsx(Is,{className:"w-4 h-4"})]}),Yn&&n.jsx("div",{className:"absolute right-0 top-full mt-1 bg-white border border-gray-200 z-10 min-w-[150px]",children:n.jsx("button",{onClick:()=>{ka(!0),$t()},className:"w-full px-3 py-2 text-left text-xs text-red-600 hover:bg-gray-50 transition-colors font-medium",children:"Delete profile"})})]}),(Se||Nt.trim()!==(cn?.profileName||"").trim())&&n.jsx("button",{onClick:gc,disabled:z,className:"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-700 min-w-[100px] disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:z?"Saving...":"Save"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-3",children:"Products"}),n.jsxs("button",{onClick:Dr,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors flex items-center gap-2",children:[n.jsx(Q0,{className:"w-4 h-4"}),"Add products"]}),Ln.length===0?n.jsx("p",{className:"text-sm text-gray-600 mt-3",children:"No products selected yet."}):n.jsxs("div",{className:"mt-3 border border-gray-200 overflow-hidden",children:[n.jsx("div",{className:"bg-gray-50 border-b border-gray-200 px-3 py-2",children:n.jsxs("p",{className:"text-xs font-medium text-gray-700",children:["Selected (",Ko,")"]})}),n.jsx("div",{className:"p-3 space-y-2",children:Ln.map(rt=>{const Vt=typeof rt.productVariantId=="string"?{_id:rt.productVariantId}:rt.productVariantId,qt=Vt&&typeof Vt.productId=="object"?Vt.productId:null,Qt=Vt?.optionValues?Object.values(Vt.optionValues).filter(Boolean).join(" / "):Vt?.sku||"Variant",xr=qt?.imageUrls&&qt.imageUrls.length>0?qt.imageUrls[0]:void 0;return n.jsx("div",{children:n.jsxs("div",{className:"flex items-center gap-2 border border-gray-100 p-2",children:[n.jsx("div",{className:"w-8 h-8 bg-purple-50 flex items-center justify-center text-xs font-medium text-purple-900 shrink-0",children:xr?n.jsx("img",{src:xr,alt:qt?.title||"Product",className:"w-full h-full object-cover"}):Qt?.charAt(0).toUpperCase()||"P"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:qt?.title||"Product"}),n.jsx("p",{className:"text-xs text-gray-600 truncate",children:Qt})]}),n.jsx("button",{onClick:()=>lt(rt),className:"p-1 text-red-600 hover:text-red-700 transition-colors",children:n.jsx(Vs,{className:"w-4 h-4"})})]})},rt._id)})})]})]}),n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-3",children:"Fulfillment locations"}),Z?n.jsx("div",{className:"py-8 text-center",children:n.jsx("div",{className:"inline-block w-6 h-6 border-2 border-gray-300 border-t-gray-900 rounded-full animate-spin"})}):A?n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 text-xs",children:A}):Ne.length===0?n.jsx("p",{className:"text-sm text-gray-600",children:"No fulfillment locations available for this profile."}):n.jsx("div",{className:"space-y-3",children:Ne.map((rt,Vt)=>{const qt=String(rt.id).trim(),Qt=pt[qt]||rt.contextSetting,xr=Qt?Qt.createNewRates:!0;return n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-start gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:rt.name}),rt.country&&n.jsx("p",{className:"text-sm text-gray-600",children:rt.country}),rt.address&&n.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:rt.address}),n.jsx("div",{className:"mt-1",children:xr?n.jsx("span",{className:"inline-block px-2 py-0.5 text-xs font-medium bg-green-50 text-green-700",children:"Creating new rates"}):n.jsx("span",{className:"inline-block px-2 py-0.5 text-xs font-medium bg-red-50 text-red-700",children:"Rates removed for this profile"})})]}),n.jsx("button",{onClick:()=>Qr(rt),className:"px-2 py-1 text-xs font-medium text-gray-700 hover:text-gray-900 transition-colors",children:"Edit"})]}),Vt<Ne.length-1&&n.jsx("div",{className:"border-t border-gray-200 my-3"})]},rt.id)})}),n.jsxs("div",{className:"mt-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Shipping zones"}),n.jsx("button",{onClick:()=>Zr(),className:"text-xs text-gray-600 hover:text-gray-900 underline",children:"Add shipping zone"})]}),x?n.jsx("div",{className:"py-8 text-center",children:n.jsx("div",{className:"inline-block w-6 h-6 border-2 border-gray-300 border-t-gray-900 rounded-full animate-spin"})}):y.length===0?n.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 px-4 py-3 text-xs mb-3 flex items-start gap-2",children:[n.jsx(Iu,{className:"w-4 h-4 mt-0.5 shrink-0"}),n.jsx("span",{children:"Add a zone and rate to ship from these locations"})]}):n.jsx("div",{className:"space-y-3",children:y.map(rt=>{const Vt=rt.countries?.[0],qt=rt.countries?.length>1,Qt=Vt?.countryName||"Unknown",xr=Vt?.countryFlag||"",wn=Vt?.selectedStatesCount||0,Wn=Vt?.totalStatesCount||0,Fa=wn>0;return n.jsxs("div",{children:[n.jsx("div",{className:"border border-gray-200 p-3 hover:bg-gray-50 transition-colors",children:n.jsxs("div",{className:"flex items-center gap-3",children:[xr&&n.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-base",children:xr}),n.jsx("div",{className:"flex-1",children:n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[rt.zoneName,qt?n.jsxs("span",{className:"text-sm text-gray-600 ml-1",children:[" ",rt.countries.length," countries"]}):n.jsxs(n.Fragment,{children:[n.jsxs("span",{className:"text-sm text-gray-600 ml-1",children:[" ",Qt]}),Fa&&n.jsxs("span",{className:"text-sm text-gray-600 ml-1",children:["(",wn," of ",Wn," ",Wn===1?"state":"states",")"]})]})]})}),n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:sa=>je({element:sa.currentTarget,zoneId:rt._id}),className:"p-1 text-gray-500 hover:text-gray-700 transition-colors",children:n.jsx(Ud,{className:"w-5 h-5"})}),te?.zoneId===rt._id&&n.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white border border-gray-200 z-10 min-w-[120px]",children:[n.jsx("button",{onClick:()=>{const sa=y.find(Ba=>Ba._id===te?.zoneId);je(null),sa&&Zr(sa)},className:"w-full px-3 py-2 text-left text-xs text-gray-700 hover:bg-gray-50 transition-colors",children:"Edit"}),n.jsx("button",{onClick:()=>{const sa=te?.zoneId;if(je(null),!sa)return;const Ba=y.find(Yo=>Yo._id===sa);Ye({id:sa,name:Ba?.zoneName||"this"})},className:"w-full px-3 py-2 text-left text-xs text-red-600 hover:bg-gray-50 transition-colors",children:"Delete"})]})]})]})}),re[rt._id]?n.jsx("div",{className:"py-3 text-center",children:n.jsx("div",{className:"inline-block w-5 h-5 border-2 border-gray-300 border-t-gray-900 rounded-full animate-spin"})}):Q[rt._id]&&Q[rt._id].length>0?n.jsx("div",{className:"mt-2 space-y-1",children:Q[rt._id].map(sa=>{const Ba=typeof sa.price=="number"?sa.price:parseFloat(String(sa.price)),Yo=Number.isFinite(Ba)?Ba:0;return n.jsxs("div",{className:"border border-gray-200 p-2 flex items-center justify-between",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:sa.customRateName}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`px-2 py-0.5 text-xs font-medium ${Yo===0?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:Yo===0?"Free":`${Yo.toFixed(2)}`}),n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:Ys=>Vn({element:Ys.currentTarget,zoneId:rt._id,zoneName:rt.zoneName,rate:sa}),className:"p-1 text-gray-500 hover:text-gray-700 transition-colors",children:n.jsx(Ud,{className:"w-4 h-4"})}),Sn?.zoneId===rt._id&&Sn?.rate._id===sa._id&&n.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white border border-gray-200 z-10 min-w-[120px]",children:[n.jsx("button",{onClick:It,className:"w-full px-3 py-2 text-left text-xs text-gray-700 hover:bg-gray-50 transition-colors",children:"Edit rate"}),n.jsx("button",{onClick:At,className:"w-full px-3 py-2 text-left text-xs text-red-600 hover:bg-gray-50 transition-colors",children:"Delete"})]})]})]})]},sa._id)})}):n.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 px-4 py-3 text-xs mt-2 flex items-start gap-2",children:[n.jsx(Iu,{className:"w-4 h-4 mt-0.5 shrink-0"}),n.jsx("span",{children:"No rates. Customers in this zone won't be able to complete checkout."})]}),n.jsxs("button",{onClick:()=>_t(rt),className:"text-xs text-gray-600 hover:text-gray-900 mt-2 flex items-center gap-1",children:[n.jsx(hp,{className:"w-4 h-4"}),"Add rate"]})]},rt._id)})})]})]}),n.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Start shipping to more places"}),n.jsx("span",{className:"px-1.5 py-0.5 text-xs font-medium bg-gray-100 text-gray-900",children:"i"})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Add countries/regions to a market to start selling and manage localized settings, including shipping zones"}),n.jsx("button",{onClick:()=>a("/markets"),className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Go to Markets"}),n.jsx(Kc,{to:"/settings/markets",className:"block mt-3 text-xs text-gray-600 hover:text-gray-900",children:"233 countries/regions not in a market"})]})]})]}),n.jsx(un,{open:Ie,onClose:Or,maxWidth:"md",title:"Manage products",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:Or,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:Or,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Done"})]}),children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx("input",{type:"text",value:M,onChange:rt=>U(rt.target.value),placeholder:"Search products",className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"}),n.jsx(Ro,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]}),n.jsx("select",{value:"all",disabled:!0,className:"px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 w-[180px] bg-gray-50",children:n.jsx("option",{value:"all",children:"Search by All"})})]}),n.jsx("button",{disabled:!0,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-400 w-[120px] disabled:opacity-50 disabled:cursor-not-allowed",children:"Add filter +"}),Ge&&n.jsxs("p",{className:"text-xs text-gray-600",children:["Showing ",Le.length," of ",Ge.total," products"]}),is()]})}),n.jsx(un,{open:!!dt,onClose:()=>lt(null),maxWidth:"sm",title:"Remove Variant?",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>lt(null),className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"No"}),n.jsx("button",{onClick:()=>{dt&&r?D(dt._id,r).finally(()=>{lt(null)}):lt(null)},className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Yes"})]}),children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("p",{className:"text-sm text-gray-600",children:["Are you sure you want to delete this product variant from"," ",n.jsx("span",{className:"font-medium text-gray-900",children:li})," ","shipping profile?"]}),dt&&n.jsx("p",{className:"text-sm font-medium text-gray-900 mt-2",children:(()=>{const rt=typeof dt.productVariantId=="string"?null:dt.productVariantId;if(!rt)return String(dt.productVariantId);const Vt=rt&&typeof rt.productId=="object"?rt.productId:null,qt=rt.optionValues?Object.values(rt.optionValues).filter(Boolean).join(" / "):rt.sku;return`${Vt?.title||"Product"}  ${qt||"Variant"}`})()})]})}),n.jsx(un,{open:ht,onClose:Hr,maxWidth:"sm",title:`Manage rates for ${Rn?.name||"location"}`,actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:Hr,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:Qn,disabled:!En,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Done"})]}),children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Create new rates"}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",value:"create",checked:En==="create",onChange:rt=>{const Vt=rt.target.value;Bn.current=Vt,Wr(Vt)},className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400"}),n.jsxs("span",{className:"text-sm text-gray-700",children:["New rate for ",Rn?.name||"this location"]})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Remove rates"}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",value:"remove",checked:En==="remove",onChange:rt=>{const Vt=rt.target.value;Bn.current=Vt,Wr(Vt)},className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:"This location will no longer ship the products in this profile"})]})]})]})}),n.jsx(un,{open:vt,onClose:Kr,maxWidth:"md",title:Qe?"Edit shipping zone":"Create new shipping zone",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:Kr,disabled:x,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),pn&&n.jsx("span",{className:"text-xs text-red-600 mr-2",children:pn}),n.jsx("button",{onClick:Cn,disabled:!wr.trim()||Mi===0||x,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Creating...":"Done"})]}),children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Zone name"}),n.jsx("input",{type:"text",value:wr,onChange:rt=>Wt(rt.target.value),placeholder:"",className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 mt-1"}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Customers won't see this"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Shipping zones"}),n.jsxs("div",{className:"relative mb-3",children:[n.jsx("input",{type:"text",value:ye,onChange:rt=>Be(rt.target.value),placeholder:"Search countries and regions to ship to",className:"w-full px-3 py-1.5 pl-10 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"}),n.jsx(Ro,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]}),_n?n.jsx("div",{className:"border border-gray-200 py-12 text-center",children:n.jsx("div",{className:"inline-block w-6 h-6 border-2 border-gray-300 border-t-gray-900 rounded-full animate-spin"})}):ar?n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 text-xs",children:ar}):Ia(),n.jsx(Kc,{to:"/settings/markets",className:"inline-block mt-3 text-xs text-gray-600 hover:text-gray-900",children:"Add more countries/regions in Markets"})]})]})}),n.jsx(un,{open:ve,onClose:ot,maxWidth:"sm",title:de?"Edit rate":"Add rate",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:ot,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:dr,disabled:!Br.trim()||ct==="carrier"||k,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:k?"Saving...":de?"Save":"Done"})]}),children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Rate type"}),n.jsxs("select",{value:ct,onChange:rt=>bt(rt.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400",children:[n.jsx("option",{value:"flat",children:"Use flat rate"}),n.jsx("option",{value:"carrier",children:"Use carrier or app to calculate rates"})]}),ct==="carrier"&&n.jsxs("div",{className:"mt-2 bg-blue-50 border border-blue-200 text-blue-900 px-4 py-3 text-xs flex items-start justify-between gap-2",children:[n.jsx("span",{children:"There are no carriers or apps available for this zone. Change back to flat rate"}),n.jsx("button",{onClick:()=>bt("flat"),className:"text-blue-600 underline font-medium shrink-0",children:"Change back to flat rate"})]})]}),ct==="flat"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Shipping rate"}),n.jsx("select",{value:Ft,onChange:rt=>cr(rt.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400",children:n.jsx("option",{value:"custom",children:"Custom"})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Custom rate name"}),n.jsx("input",{type:"text",value:Br,onChange:rt=>kt(rt.target.value),placeholder:"",className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Custom delivery description (optional)"}),n.jsxs("select",{value:Yr,onChange:rt=>Xr(rt.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400",children:[n.jsx("option",{value:"",children:"None"}),wa.map(rt=>n.jsx("option",{value:rt,children:rt},rt))]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Price"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-sm text-gray-600",children:""}),n.jsx("input",{type:"text",value:ma,onChange:rt=>{const Vt=rt.target.value.replace(/[^0-9.]/g,"");Jn(Vt)},placeholder:"0.00",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]}),n.jsx("button",{onClick:()=>Jn("0.00"),className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors min-w-[80px]",children:"Free"})]})]}),fa?n.jsxs("div",{className:"mt-3",children:[n.jsx("button",{onClick:()=>{Ns(!1),Aa("weight"),Lr("0"),mt(""),Ar("0.00"),kn("")},className:"text-xs text-gray-600 hover:text-gray-900 underline mb-3 block",children:"Remove conditional pricing"}),n.jsxs("div",{className:"mb-3 flex gap-6",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",value:"weight",checked:Ja==="weight",onChange:rt=>Aa(rt.target.value),className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Based on item weight"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",value:"price",checked:Ja==="price",onChange:rt=>Aa(rt.target.value),className:"w-4 h-4 text-gray-900 border-gray-300 focus:ring-gray-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Based on order price"})]})]}),Ja==="weight"?n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Minimum weight"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:fs,onChange:rt=>{const Vt=rt.target.value.replace(/[^0-9.]/g,"");Lr(Vt)},placeholder:"0",className:"w-full px-3 py-1.5 pr-12 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"}),n.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-sm text-gray-600",children:"kg"})]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Maximum weight"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:kr,onChange:rt=>{const Vt=rt.target.value.replace(/[^0-9.]/g,"");mt(Vt)},placeholder:"No limit",className:"w-full px-3 py-1.5 pr-12 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"}),n.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-sm text-gray-600",children:"kg"})]})]})]}):n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Minimum price"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-sm text-gray-600",children:""}),n.jsx("input",{type:"text",value:nr,onChange:rt=>{const Vt=rt.target.value.replace(/[^0-9.]/g,"");Ar(Vt)},placeholder:"0.00",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Maximum price"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-sm text-gray-600",children:""}),n.jsx("input",{type:"text",value:Rr,onChange:rt=>{const Vt=rt.target.value.replace(/[^0-9.]/g,"");kn(Vt)},placeholder:"No limit",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400"})]})]})]})]}):n.jsx("button",{onClick:()=>Ns(!0),className:"text-xs text-gray-600 hover:text-gray-900 underline",children:"Add conditional pricing"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Checkout preview"}),n.jsx("div",{className:"border border-gray-200 p-3 bg-gray-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"radio",checked:!0,readOnly:!0,className:"w-4 h-4 text-gray-900 border-gray-300"}),n.jsx("p",{className:"text-sm text-gray-900",children:Br||"Rate name"})]}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:parseFloat(ma)===0?"FREE":` ${parseFloat(ma).toFixed(2)}`})]})})]})]})]})}),n.jsx(un,{open:Zn,onClose:()=>{ks||ka(!1)},maxWidth:"sm",title:"Delete shipping profile",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>{ks||ka(!1)},className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"No"}),n.jsx("button",{onClick:Bt,disabled:ks,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-red-600 hover:bg-red-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:ks?"Deleting...":"Yes"})]}),children:n.jsxs("p",{className:"text-sm text-gray-600 leading-relaxed",children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-medium text-gray-900",children:cn?.profileName||"this"})," ","shipping profile?"]})}),n.jsx(un,{open:!!Re,onClose:()=>{at||Ye(null)},maxWidth:"sm",title:"Delete shipping zone",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>{at||Ye(null)},className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"No"}),n.jsx("button",{onClick:Cr,disabled:at,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-red-600 hover:bg-red-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:at?"Deleting...":"Yes"})]}),children:n.jsxs("p",{className:"text-sm text-gray-600 leading-relaxed",children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-medium text-gray-900",children:Re?.name||"this"})," ","shipping zone?"]})}),n.jsx(un,{open:!!zn,onClose:()=>{ro||Kn(null)},maxWidth:"sm",title:"Delete shipping rate",actions:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>{ro||Kn(null)},className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"No"}),n.jsx("button",{onClick:Lt,disabled:ro,className:"px-3 py-1.5 text-xs font-medium border border-gray-200 text-red-600 hover:bg-red-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:ro?"Deleting...":"Yes"})]}),children:n.jsxs("p",{className:"text-sm text-gray-600 leading-relaxed",children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-medium text-gray-900",children:zn?.rate.customRateName||"this"})," ","shipping zone rate from"," ",n.jsx("span",{className:"font-medium text-gray-900",children:zn?.zoneName||"this"})," ","shipping zone?"]})})]}):n.jsx(pr,{children:n.jsx("div",{className:"max-w-7xl mx-auto py-8 px-4",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-3",children:"Shipping profile not found"}),n.jsx("button",{onClick:We,className:"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Back to shipping settings"})]})})}):n.jsx(pr,{children:n.jsx("div",{className:"max-w-7xl mx-auto py-8 px-4",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-3",children:"Invalid profile"}),n.jsx("button",{onClick:We,className:"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"Back to shipping settings"})]})})})},Axe=()=>{const a=mr(),r="bfad2685eaa342b6584e1a4b12c0735e6cc8f4343cb8b10626cef0c4dd00064d",e=f.useCallback(()=>{a("/settings/notifications")},[a]),t=f.useCallback(()=>{},[]);return n.jsx(pr,{children:n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b border-gray-200 pb-4",children:[n.jsx("button",{onClick:e,className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(My,{className:"w-5 h-5"})}),n.jsx(Pa,{className:"w-4 h-4 text-gray-500"}),n.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Webhooks"})]}),n.jsxs("div",{className:"border border-gray-200 p-4",children:[n.jsx("p",{className:"text-sm text-gray-900 mb-4",children:"Send XML or JSON notifications about store events to a URL"}),n.jsxs("button",{onClick:t,className:"w-full flex items-center justify-start border border-gray-200 text-sm text-gray-700 py-2 px-3 mb-4 hover:bg-gray-50 transition-colors",children:[n.jsx(na,{className:"w-4 h-4 mr-2"}),"Create webhook"]}),n.jsxs("div",{className:"p-3 bg-gray-50 flex items-center gap-2 border border-gray-200",children:[n.jsx(Oa,{className:"w-4 h-4 text-gray-600 shrink-0"}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Your webhooks will be signed with"," ",n.jsx("span",{className:"text-gray-700 font-mono",children:r})]})]})]})]})})};const rM=(...a)=>a.filter((r,e,t)=>!!r&&r.trim()!==""&&t.indexOf(r)===e).join(" ").trim();const Mxe=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const Ixe=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,e,t)=>t?t.toUpperCase():e.toLowerCase());const xT=a=>{const r=Ixe(a);return r.charAt(0).toUpperCase()+r.slice(1)};var Rxe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Lxe=a=>{for(const r in a)if(r.startsWith("aria-")||r==="role"||r==="title")return!0;return!1};const Dxe=f.forwardRef(({color:a="currentColor",size:r=24,strokeWidth:e=2,absoluteStrokeWidth:t,className:s="",children:o,iconNode:i,...l},c)=>f.createElement("svg",{ref:c,...Rxe,width:r,height:r,stroke:a,strokeWidth:t?Number(e)*24/Number(r):e,className:rM("lucide",s),...!o&&!Lxe(l)&&{"aria-hidden":"true"},...l},[...i.map(([d,h])=>f.createElement(d,h)),...Array.isArray(o)?o:[o]]));const hw=(a,r)=>{const e=f.forwardRef(({className:t,...s},o)=>f.createElement(Dxe,{ref:o,iconNode:r,className:rM(`lucide-${Mxe(xT(a))}`,`lucide-${a}`,t),...s}));return e.displayName=xT(a),e};const Fxe=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Bxe=hw("external-link",Fxe);const zxe=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],Uxe=hw("maximize-2",zxe);const $xe=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],Vxe=hw("minimize-2",$xe);const Wxe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Hxe=hw("x",Wxe),qxe=({isOpen:a,onClose:r,themeId:e,themeName:t,isInstalled:s=!1,isCustomTheme:o=!1})=>{const[i,l]=f.useState(!1),[c,d]=f.useState(!0),{activeStoreId:h}=fn(),m=f.useMemo(()=>{const j="https://backend.ziplofy.com/api",S=`?v=${Date.now()}`;if(o)if(e.startsWith("custom-")){const R=(()=>{try{const z=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken")||localStorage.getItem("token")||sessionStorage.getItem("token");if(!z)return null;const H=z.split(".");if(H.length<2)return null;const V=JSON.parse(atob(H[1].replace(/-/g,"+").replace(/_/g,"/")));return String(V.uid||V.userId||V.id||"")}catch{return null}})();if(h)return`${j}/themes/installed/${h}/${e}/unzippedTheme/index.html${S}`;if(R)return`${j}/themes/installed/${R}/${e}/unzippedTheme/index.html${S}`;const F=e.replace(/^custom-/,"");return`${j}/custom-themes/${F}/files/index.html${S}`}else return`${j}/custom-themes/${e}/files/index.html${S}`;if(!s)return`${j}/themes/preview/${e}${S}`;const N=(()=>{try{const P=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken")||localStorage.getItem("token")||sessionStorage.getItem("token");if(!P)return null;const R=P.split(".");if(R.length<2)return null;const F=JSON.parse(atob(R[1].replace(/-/g,"+").replace(/_/g,"/")));return String(F.uid||F.userId||F.id||"")}catch{return null}})();return h?`${j}/themes/installed/${h}/${e}/unzippedTheme/index.html${S}`:N?`${j}/themes/installed/${N}/${e}/unzippedTheme/index.html${S}`:`${j}/themes/preview/${e}${S}`},[e,s,o,h]);if(!a)return null;const y=m,x=()=>{window.open(y,"_blank","noopener,noreferrer")},b=()=>{l(!i)},v=()=>{d(!1)};return n.jsxs("div",{className:`theme-preview-modal ${i?"fullscreen":""}`,children:[n.jsx("div",{className:"modal-overlay",onClick:r}),n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("div",{className:"modal-title",children:[n.jsxs("h3",{children:["Theme Preview: ",t]}),n.jsx("span",{className:"preview-badge",children:"Live Demo"})]}),n.jsxs("div",{className:"modal-actions",children:[n.jsx("button",{className:"action-btn",onClick:b,title:i?"Exit Fullscreen":"Enter Fullscreen",children:i?n.jsx(Vxe,{size:16}):n.jsx(Uxe,{size:16})}),n.jsx("button",{className:"action-btn",onClick:x,title:"Open in New Tab",children:n.jsx(Bxe,{size:16})}),n.jsx("button",{className:"action-btn close-btn",onClick:r,title:"Close Preview",children:n.jsx(Hxe,{size:16})})]})]}),n.jsxs("div",{className:"modal-body",children:[c&&n.jsx("div",{className:"loading-overlay",children:n.jsxs("div",{className:"loading-spinner",children:[n.jsx("div",{className:"spinner"}),n.jsx("p",{children:"Loading theme preview..."})]})}),n.jsx("iframe",{src:y,className:"theme-preview-iframe",title:`${t} Preview`,onLoad:v,sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-presentation",loading:"lazy"})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("div",{className:"preview-info",children:n.jsx("p",{children:"This is a live preview of the theme. Interactive features may be limited in preview mode."})}),n.jsxs("div",{className:"preview-actions",children:[n.jsx("button",{className:"btn-secondary",onClick:r,children:"Close Preview"}),n.jsx("button",{className:"btn-primary",onClick:x,children:"Open in New Tab"})]})]})]})]})},Gxe=({isOpen:a,onClose:r,themeId:e})=>{if(!a)return null;const t=()=>{const i=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken"),l=localStorage.getItem("storeId")||sessionStorage.getItem("storeId");let c=`/themes/builder?id=${encodeURIComponent(e)}&type=installed`;i&&(c+=`&accessToken=${encodeURIComponent(i)}`),l&&(c+=`&storeId=${encodeURIComponent(l)}`),window.open(c,"_blank","noopener,noreferrer"),r()},s=()=>{window.open(`/themes/code/${e}`,"_blank","noopener,noreferrer"),r()},o=()=>{const i=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken"),l=localStorage.getItem("storeId")||sessionStorage.getItem("storeId");let c=`/themes/basic-elementor?id=${encodeURIComponent(e)}&type=installed`;i&&(c+=`&accessToken=${encodeURIComponent(i)}`),l&&(c+=`&storeId=${encodeURIComponent(l)}`),window.open(c,"_blank","noopener,noreferrer"),r()};return n.jsxs("div",{style:{position:"fixed",inset:0,zIndex:9999},children:[n.jsx("div",{onClick:r,style:{position:"absolute",inset:0,background:"rgba(0,0,0,0.4)"}}),n.jsxs("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",background:"#fff",color:"#000",width:420,borderRadius:8,boxShadow:"0 10px 30px rgba(0,0,0,0.2)"},children:[n.jsx("div",{style:{padding:16,borderBottom:"1px solid #e5e7eb",fontWeight:700},children:"Edit Theme"}),n.jsxs("div",{style:{padding:16,display:"flex",flexDirection:"column",gap:12},children:[n.jsxs("button",{onClick:t,style:{padding:"12px 14px",borderRadius:8,border:"1px solid #d1d5da",background:"#fff",cursor:"pointer",textAlign:"left",fontWeight:600},children:["Edit Layout (Visual)",n.jsx("div",{style:{fontSize:12,color:"#6b7280",fontWeight:400},children:"Open Elementor-style visual builder to modify layout and components"})]}),n.jsxs("button",{onClick:o,style:{padding:"12px 14px",borderRadius:8,border:"1px solid #d1d5da",background:"#fff",cursor:"pointer",textAlign:"left",fontWeight:600},children:["Edit with Basic Elementor",n.jsx("div",{style:{fontSize:12,color:"#6b7280",fontWeight:400},children:"Open basic Elementor editor"})]}),n.jsxs("button",{onClick:s,style:{padding:"12px 14px",borderRadius:8,border:"1px solid #d1d5da",background:"#fff",cursor:"pointer",textAlign:"left",fontWeight:600},children:["Edit Code (Advanced)",n.jsx("div",{style:{fontSize:12,color:"#6b7280",fontWeight:400},children:"Open code editor (Monaco) to edit HTML/CSS/JS"})]})]}),n.jsx("div",{style:{padding:12,borderTop:"1px solid #e5e7eb",display:"flex",justifyContent:"flex-end"},children:n.jsx("button",{onClick:r,style:{padding:"8px 12px",borderRadius:6,border:"1px solid #d1d5da",background:"#fff",cursor:"pointer"},children:"Close"})})]})]})},Kxe=()=>{const[a,r]=f.useState("grid"),[e,t]=f.useState(""),[s,o]=f.useState({isOpen:!1,themeId:"",themeName:"",isInstalled:!1,isCustomTheme:!1}),[i,l]=f.useState({isOpen:!1,themeId:"",isInstalled:!1}),{themes:c,loading:d,error:h,fetchAll:m}=zye(),{installedThemes:y,installTheme:x,uninstallTheme:b,fetchByStoreId:v}=hye(),{activeStoreId:j}=fn(),{customThemes:S,loading:k,fetchAll:N,deleteTheme:P,installTheme:R,uninstallTheme:F,updateTheme:z}=AS(),[H,V]=f.useState([]),[W,Z]=f.useState(!1),[A,q]=f.useState(!1),[I,K]=f.useState(new Set),[D,Q]=f.useState(null),[oe,re]=f.useState({isOpen:!1,themeId:"",themeName:""}),[Te,G]=f.useState(!1),[Y,Se]=f.useState({}),fe=async M=>{await b(M)},Ee=async M=>{j&&(await x(j,M),setTimeout(()=>{Ne()},500))},Ae=(M,U,J=!1,ce=!1)=>{o({isOpen:!0,themeId:M,themeName:U,isInstalled:J,isCustomTheme:ce})},qe=()=>{o({isOpen:!1,themeId:"",themeName:"",isInstalled:!1,isCustomTheme:!1})},we=M=>{const U="https://backend.ziplofy.com/api",J=`?v=${Date.now()}`,ue=(()=>{try{const xe=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken")||localStorage.getItem("token")||sessionStorage.getItem("token");if(!xe)return null;const he=xe.split(".");if(he.length<2)return null;const se=JSON.parse(atob(he[1].replace(/-/g,"+").replace(/_/g,"/")));return String(se.uid||se.userId||se.id||"")}catch{return null}})();return j?`${U}/themes/installed/${j}/${M}/unzippedTheme/index.html${J}`:ue?`${U}/themes/installed/${ue}/${M}/unzippedTheme/index.html${J}`:`${U}/themes/preview/${M}${J}`},Oe=(M,U=!1)=>{let J;if(U){const ce="https://backend.ziplofy.com/api",ue=`?v=${Date.now()}`;if(M.startsWith("custom-")){const he=(()=>{try{const se=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken")||localStorage.getItem("token")||sessionStorage.getItem("token");if(!se)return null;const Le=se.split(".");if(Le.length<2)return null;const Ue=JSON.parse(atob(Le[1].replace(/-/g,"+").replace(/_/g,"/")));return String(Ue.uid||Ue.userId||Ue.id||"")}catch{return null}})();if(j)J=`${ce}/themes/installed/${j}/${M}/unzippedTheme/index.html${ue}`;else if(he)J=`${ce}/themes/installed/${he}/${M}/unzippedTheme/index.html${ue}`;else{const se=M.replace(/^custom-/,"");J=`${ce}/custom-themes/${se}/files/index.html${ue}`}}else J=`${ce}/custom-themes/${M}/files/index.html${ue}`}else J=we(M);window.open(J,"_blank","noopener,noreferrer")},ze=(M,U=!1)=>{l({isOpen:!0,themeId:M,isInstalled:U})},We=async(M,U)=>{G(!0);let J=null;try{J=URL.createObjectURL(U),Se(se=>({...se,[M]:J}));const ce=await Ke.get(`/custom-themes/${M}`);if(!ce.data.success||!ce.data.data)throw new Error("Theme not found");const ue=ce.data.data,xe=new Blob([U],{type:U.type});await z(M,ue.name,ue.html||"",ue.css||"",xe)?(await N(),await new Promise(se=>setTimeout(se,500)),console.log("this is the domain section"),setTimeout(()=>{Se(se=>{const Le={...se};return delete Le[M],Le}),J&&URL.revokeObjectURL(J)},1e3),re({isOpen:!1,themeId:"",themeName:""}),Q(null)):(Se(se=>{const Le={...se};return delete Le[M],Le}),J&&URL.revokeObjectURL(J),alert("Failed to update thumbnail. Please try again."))}catch(ce){console.error("Error updating thumbnail:",ce),Se(xe=>{const he={...xe};return delete he[M],he}),J&&URL.revokeObjectURL(J);const ue=ce?.response?.data?.message||ce?.message||"Failed to update thumbnail. Please try again.";alert(ue)}finally{G(!1)}},pt=M=>{const U=M.target.files?.[0];if(U){if(!U.type.startsWith("image/")){alert("Please select an image file.");return}if(U.size>5*1024*1024){alert("Image size should be less than 5MB.");return}oe.themeId&&We(oe.themeId,U),M.target.value=""}},Pt=async M=>{if(!/^[0-9a-fA-F]{24}$/.test(M)){alert("Invalid theme ID. This theme may have been created with an old format. It cannot be deleted through the API.");return}if(!window.confirm("Are you sure you want to delete this theme? This action cannot be undone."))return;await P(M)?localStorage.getItem("ziplofy.appliedCustomThemeId")===M&&localStorage.removeItem("ziplofy.appliedCustomThemeId"):alert("Failed to delete theme. Please try again.")},ee=M=>y.some(U=>U._id===M);f.useEffect(()=>{m()},[m]);const Ne=async()=>{Z(!0);try{const U=await fetch("https://backend.ziplofy.com/api/themes/recent");if(U.ok){const J=await U.json();V(J||[])}}catch(M){console.error("Error fetching recent installations:",M),V([])}finally{Z(!1)}};f.useEffect(()=>{Ne()},[]);const Ie=async()=>{if(I.size===0){alert("Please select at least one theme to delete");return}if(confirm(`Are you sure you want to delete ${I.size} theme(s) from history?`))try{const U=await fetch("https://backend.ziplofy.com/api/themes/recent/delete",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({themeIds:Array.from(I)})});if(U.ok)V(J=>J.filter(ce=>{const ue=ce.recentId||ce._id;return!I.has(ue)})),K(new Set),q(!1);else{const J=await U.json();alert(J.message||"Failed to delete themes from history")}}catch(M){console.error("Error deleting recent installations:",M),alert("Failed to delete themes from history")}};f.useEffect(()=>{j&&v(j)},[j,v]),f.useEffect(()=>{const M=U=>{D&&!U.target.closest(".theme-card-menu")&&Q(null)};if(D)return document.addEventListener("mousedown",M),()=>{document.removeEventListener("mousedown",M)}},[D]),f.useEffect(()=>{S.length>0&&Object.keys(Y).length>0},[S]),f.useEffect(()=>{N();const M=localStorage.getItem("ziplofy.appliedCustomThemeId");M&&(/^[0-9a-fA-F]{24}$/.test(M)||(localStorage.removeItem("ziplofy.appliedCustomThemeId"),console.warn("Removed invalid custom theme ID from localStorage")))},[N]);const ne=c.filter(M=>M.name.toLowerCase().includes(e.toLowerCase())||(M.description||"").toLowerCase().includes(e.toLowerCase()));return n.jsxs("div",{className:"themes-container",children:[n.jsx("div",{className:"themes-header",children:n.jsxs("div",{className:"header-content",children:[n.jsx("h1",{className:"themes-title",children:"Themes"}),n.jsx("p",{className:"themes-subtitle",children:"Discover professionally designed themes to make your store stand out"})]})}),n.jsxs("div",{className:"themes-controls",children:[n.jsx("div",{className:"search-section",children:n.jsxs("div",{className:"search-input-wrapper",children:[n.jsx(z2,{className:"search-icon",fontSize:"small"}),n.jsx("input",{type:"text",placeholder:"Search themes...",className:"search-input",value:e,onChange:M=>t(M.target.value)})]})}),n.jsxs("div",{className:"filter-view-controls",children:[n.jsxs("button",{className:"filter-btn",children:[n.jsx(ehe,{fontSize:"small"}),n.jsx("span",{children:"Filter"})]}),n.jsxs("div",{className:"view-toggle",children:[n.jsx("button",{className:`view-btn ${a==="grid"?"active":""}`,onClick:()=>r("grid"),children:n.jsx(the,{fontSize:"small"})}),n.jsx("button",{className:`view-btn ${a==="list"?"active":""}`,onClick:()=>r("list"),children:n.jsx(hhe,{fontSize:"small"})})]})]})]}),Array.isArray(y)&&y.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("h2",{style:{margin:"24px 0 16px 0",color:"black",fontSize:"28px",fontWeight:"700"},children:"Installed themes"}),n.jsx("div",{style:{marginBottom:"2rem"},className:`themes-layout ${a}`,children:y.map(M=>{const U=M,J=U.isCustomTheme||U._id?.startsWith("custom-"),ce=J&&U.customThemeId?U.customThemeId:U._id;return n.jsxs("div",{className:"theme-card",children:[n.jsxs("div",{className:"theme-thumbnail",children:[U.thumbnailUrl?n.jsx("img",{src:U.thumbnailUrl,alt:U.name||"",className:"theme-image",onError:ue=>{ue.currentTarget.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="300" height="200" viewBox="0 0 300 200"><rect width="300" height="200" fill="%23f3f4f6"/><text x="150" y="100" text-anchor="middle" fill="%236b7280" font-family="Arial" font-size="14">No Preview</text></svg>'}}):n.jsx("div",{className:"theme-image-placeholder",children:n.jsx("span",{children:"No Preview"})}),n.jsx("div",{className:"theme-overlay",children:n.jsxs("button",{className:"overlay-btn preview-btn",onClick:()=>Ae(U._id,U.name,!0,J),children:[n.jsx(N1,{fontSize:"small"}),n.jsx("span",{children:"Preview"})]})})]}),n.jsxs("div",{className:"theme-info",children:[n.jsxs("div",{className:"theme-header-info",children:[n.jsx("h3",{className:"theme-name",children:U.name}),n.jsxs("div",{className:"theme-rating",children:[n.jsx("div",{className:"stars",children:[...Array(5)].map((ue,xe)=>n.jsx(Hc,{fontSize:"inherit",className:"star filled"},xe))}),n.jsx("span",{className:"rating-text",children:Number(U.rating?.average||0).toFixed(1)})]})]}),U.description&&n.jsx("p",{className:"theme-description",children:U.description}),n.jsxs("div",{className:"theme-meta",children:[n.jsx("span",{className:"theme-category",children:U.category}),n.jsx("span",{className:"theme-price",children:"Free"})]}),n.jsxs("div",{className:"theme-actions",children:[n.jsx("button",{className:"action-btn primary",onClick:()=>Oe(U._id,J),children:"Open"}),J?n.jsx("button",{className:"action-btn secondary",onClick:()=>{ce&&window.open(`/themes/builder?themeId=${ce}`,"_blank","noopener,noreferrer")},children:"Edit"}):n.jsx("button",{className:"action-btn secondary",onClick:()=>ze(U._id,!0),children:"Edit"}),n.jsx("button",{className:"action-btn secondary",onClick:J?async()=>{if(!j){alert("Please select a store first.");return}await F(ce,j)&&await v(j)}:()=>fe(M.installedThemeId),children:"Uninstall"})]})]})]},M._id)})})]}),H.length>0&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"24px",marginBottom:"16px"},children:[n.jsx("h2",{style:{margin:0,color:"black",fontSize:"28px",fontWeight:"700"},children:"Recently Installed"}),n.jsxs("div",{style:{display:"flex",gap:"10px"},children:[A&&n.jsx("button",{onClick:()=>{q(!1),K(new Set)},style:{backgroundColor:"#6b7280",color:"#ffffff",border:"none",padding:"10px 20px",borderRadius:"6px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:M=>{M.currentTarget.style.backgroundColor="#4b5563"},onMouseLeave:M=>{M.currentTarget.style.backgroundColor="#6b7280"},children:"Cancel"}),n.jsx("button",{onClick:()=>{A?Ie():q(!0)},style:{backgroundColor:A?"#dc2626":"#6b7280",color:"#ffffff",border:"none",padding:"10px 20px",borderRadius:"6px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:M=>{M.currentTarget.style.backgroundColor=A?"#b91c1c":"#4b5563"},onMouseLeave:M=>{M.currentTarget.style.backgroundColor=A?"#dc2626":"#6b7280"},children:"Delete Selected"})]})]}),A&&n.jsx("div",{style:{marginBottom:"12px",color:"#6b7280",fontSize:"14px"},children:"Select themes to delete from history"}),n.jsx("div",{style:{marginBottom:"2rem"},className:`themes-layout ${a}`,children:H.map(M=>((M.isCustomTheme||M._id?.startsWith("custom-"))&&M.customThemeId?M.customThemeId:M._id,n.jsxs("div",{className:"theme-card",style:{position:"relative"},children:[A&&n.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",zIndex:10},children:n.jsx("input",{type:"checkbox",checked:I.has(M.recentId||M._id),onChange:J=>{const ce=new Set(I),ue=M.recentId||M._id;J.target.checked?ce.add(ue):ce.delete(ue),K(ce)},style:{width:"20px",height:"20px",cursor:"pointer",accentColor:"#16a34a"}})}),n.jsx("div",{className:"theme-thumbnail",children:M.thumbnailUrl?n.jsx("img",{src:M.thumbnailUrl,alt:M.name||"",className:"theme-image",onError:J=>{J.currentTarget.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="300" height="200" viewBox="0 0 300 200"><rect width="300" height="200" fill="%23f3f4f6"/><text x="150" y="100" text-anchor="middle" fill="%236b7280" font-family="Arial" font-size="14">No Preview</text></svg>'}}):n.jsx("div",{className:"theme-image-placeholder",children:n.jsx("span",{children:M.name})})}),n.jsxs("div",{className:"theme-info",children:[n.jsxs("div",{className:"theme-header-info",children:[n.jsx("h3",{className:"theme-name",children:M.name}),n.jsxs("div",{className:"theme-rating",children:[n.jsx("div",{className:"stars",children:[...Array(5)].map((J,ce)=>n.jsx(Hc,{fontSize:"inherit",className:"star filled"},ce))}),n.jsx("span",{className:"rating-text",children:"0.0"})]})]}),M.description&&n.jsx("p",{className:"theme-description",children:M.description}),n.jsxs("div",{className:"theme-meta",children:[n.jsx("span",{className:"theme-category",children:M.category||"Custom"}),n.jsx("span",{className:"theme-price",children:"Free"})]})]})]},M._id)))})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"24px",marginBottom:"16px"},children:[n.jsx("h2",{style:{margin:0,color:"black",fontSize:"28px",fontWeight:"700"},children:"Your creations"}),n.jsxs("button",{onClick:()=>window.open("/themes/builder","_blank","noopener,noreferrer"),style:{backgroundColor:"#16a34a",border:"none",color:"#ffffff",padding:"10px 20px",fontSize:"14px",fontWeight:"600",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",transition:"all 0.2s ease"},onMouseEnter:M=>{M.currentTarget.style.backgroundColor="#15803d",M.currentTarget.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.15)",M.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:M=>{M.currentTarget.style.backgroundColor="#16a34a",M.currentTarget.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)",M.currentTarget.style.transform="translateY(0)"},children:[n.jsx("span",{children:""}),n.jsx("span",{children:"Create your Own"})]})]}),S.length>0&&n.jsx(n.Fragment,{children:n.jsx("div",{style:{marginBottom:"2rem"},className:`themes-layout ${a}`,children:S.map(M=>{const U=/^[0-9a-fA-F]{24}$/.test(M._id),J=y.some(ce=>{const ue=ce.isCustomTheme||ce._id?.startsWith("custom-"),xe=ue&&ce.customThemeId?ce.customThemeId:null;return ue&&xe===M._id});return n.jsxs("div",{className:"theme-card",style:{position:"relative"},children:[U&&n.jsxs("div",{className:"theme-card-menu",children:[n.jsx("button",{className:"theme-card-menu-button",onClick:ce=>{ce.stopPropagation(),Q(D===M._id?null:M._id)},"aria-label":"Theme options",children:n.jsx(n6,{fontSize:"small"})}),D===M._id&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"theme-card-menu-overlay",onClick:()=>Q(null)}),n.jsx("div",{className:"theme-card-menu-dropdown",children:n.jsxs("button",{className:"theme-card-menu-item",onClick:ce=>{ce.stopPropagation(),re({isOpen:!0,themeId:M._id,themeName:M.name}),Q(null)},children:[n.jsx(oT,{fontSize:"small",style:{marginRight:"8px"}}),"Update Thumbnail"]})})]})]}),n.jsxs("div",{className:"theme-thumbnail",children:[(()=>{const ce=Y[M._id],ue=M.thumbnailUrl,xe=ce||(ue?`${ue}${ue.includes("?")?"&":"?"}v=${Date.now()}`:null);return xe?n.jsx("img",{src:xe,alt:M.name||"",className:"theme-image",onLoad:()=>{},onError:he=>{he.currentTarget.style.display="none";const se=he.currentTarget.nextElementSibling;se&&(se.style.display="flex")}},`${M._id}-${ce?"preview":"server"}`):null})(),n.jsx("div",{className:"theme-image-placeholder",style:{display:Y[M._id]||M.thumbnailUrl?"none":"flex"},children:n.jsx("span",{children:M.name})}),U&&n.jsx("div",{className:"theme-overlay",children:n.jsxs("button",{className:"overlay-btn preview-btn",onClick:()=>Ae(M._id,M.name,!1,!0),children:[n.jsx(N1,{fontSize:"small"}),n.jsx("span",{children:"Preview"})]})})]}),n.jsxs("div",{className:"theme-info",children:[n.jsx("div",{className:"theme-header-info",children:n.jsx("h3",{className:"theme-name",children:M.name})}),n.jsxs("div",{className:"theme-actions",children:[n.jsx("button",{className:"action-btn primary",onClick:()=>{if(!U){alert("Invalid theme ID. This theme may have been created with an old format. Please delete and recreate it.");return}window.open(`/themes/builder?id=${encodeURIComponent(M._id)}`,"_blank","noopener,noreferrer")},children:"Edit"}),J?n.jsx("button",{className:"action-btn secondary",disabled:!0,style:{backgroundColor:"#16a34a",color:"#ffffff",border:"1px solid #16a34a",cursor:"not-allowed",opacity:.9},children:"Installed"}):n.jsx("button",{className:"action-btn secondary",onClick:async()=>{if(!U){alert("Invalid theme ID. Please recreate this theme.");return}if(!j){alert("Please select a store first.");return}await R(M._id,j)&&(await new Promise(ue=>setTimeout(ue,500)),await v(j),Ne())},children:"Apply theme"}),n.jsxs("button",{className:"action-btn secondary",onClick:()=>Pt(M._id),style:{backgroundColor:"#dc2626",color:"#ffffff",border:"1px solid #dc2626"},onMouseEnter:ce=>{ce.currentTarget.style.backgroundColor="#b91c1c",ce.currentTarget.style.borderColor="#b91c1c"},onMouseLeave:ce=>{ce.currentTarget.style.backgroundColor="#dc2626",ce.currentTarget.style.borderColor="#dc2626"},children:[n.jsx(uy,{fontSize:"small",style:{marginRight:"4px"}}),"Delete"]})]})]})]},M._id)})})}),n.jsx("h2",{style:{margin:"24px 0 16px 0",color:"black",fontSize:"28px",fontWeight:"700"},children:"All themes"}),n.jsxs("div",{className:`themes-layout ${a}`,children:[d&&n.jsx("div",{className:"no-results",children:n.jsx("div",{className:"no-results-content",children:n.jsx("h3",{children:"Loading themes..."})})}),h&&n.jsx("div",{className:"no-results",children:n.jsx("div",{className:"no-results-content",children:n.jsx("h3",{children:h})})}),ne.map(M=>n.jsxs("div",{className:"theme-card",children:[n.jsxs("div",{className:"theme-thumbnail",children:[n.jsx("img",{src:M.thumbnailUrl||"",alt:M.name,className:"theme-image",onError:U=>{U.currentTarget.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="300" height="200" viewBox="0 0 300 200"><rect width="300" height="200" fill="%23f3f4f6"/><text x="150" y="100" text-anchor="middle" fill="%236b7280" font-family="Arial" font-size="14">No Preview</text></svg>'}}),n.jsxs("div",{className:"theme-overlay",children:[n.jsxs("button",{className:"overlay-btn preview-btn",onClick:()=>Ae(M._id,M.name),children:[n.jsx(N1,{fontSize:"small"}),n.jsx("span",{children:"Preview"})]}),n.jsxs("button",{className:"overlay-btn download-btn",children:[n.jsx(Xpe,{fontSize:"small"}),n.jsx("span",{children:"View Details"})]})]})]}),n.jsxs("div",{className:"theme-info",children:[n.jsxs("div",{className:"theme-header-info",children:[n.jsx("h3",{className:"theme-name",children:M.name}),n.jsxs("div",{className:"theme-rating",children:[n.jsx("div",{className:"stars",children:[...Array(5)].map((U,J)=>n.jsx(Hc,{fontSize:"inherit",className:"star filled"},J))}),n.jsx("span",{className:"rating-text",children:Number(M.rating?.average||0).toFixed(1)})]})]}),M.description&&n.jsx("p",{className:"theme-description",children:M.description}),n.jsxs("div",{className:"theme-meta",children:[n.jsx("span",{className:"theme-category",children:M.category}),n.jsx("span",{className:"theme-price",children:"Free"})]}),n.jsxs("div",{className:"theme-actions",children:[ee(M._id)?n.jsx("button",{className:"action-btn installed",disabled:!0,children:"Installed"}):n.jsx("button",{className:"action-btn primary",onClick:()=>Ee(M._id),children:"Try theme"}),n.jsx("button",{className:"action-btn secondary",onClick:()=>Ae(M._id,M.name),children:"View demo"})]})]})]},M._id))]}),ne.length===0&&n.jsx("div",{className:"no-results",children:n.jsxs("div",{className:"no-results-content",children:[n.jsx("h3",{children:"No themes found"}),n.jsx("p",{children:"Try adjusting your search or filter criteria"})]})}),n.jsx(qxe,{isOpen:s.isOpen,onClose:qe,themeId:s.themeId,themeName:s.themeName,isInstalled:s.isInstalled,isCustomTheme:s.isCustomTheme}),n.jsx(Gxe,{isOpen:i.isOpen,onClose:()=>l({isOpen:!1,themeId:""}),themeId:i.themeId}),oe.isOpen&&n.jsx("div",{className:"thumbnail-update-modal-overlay",onClick:()=>!Te&&re({isOpen:!1,themeId:"",themeName:""}),children:n.jsxs("div",{className:"thumbnail-update-modal",onClick:M=>M.stopPropagation(),children:[n.jsxs("div",{className:"thumbnail-update-modal-header",children:[n.jsx("h2",{children:"Update Thumbnail"}),n.jsx("button",{className:"thumbnail-update-modal-close",onClick:()=>!Te&&re({isOpen:!1,themeId:"",themeName:""}),disabled:Te,children:""})]}),n.jsxs("div",{className:"thumbnail-update-modal-content",children:[n.jsxs("p",{children:["Select an image to update the thumbnail for ",n.jsx("strong",{children:oe.themeName})]}),n.jsxs("div",{className:"thumbnail-update-modal-upload",children:[n.jsx("input",{type:"file",id:"thumbnail-upload-input",accept:"image/*",onChange:pt,disabled:Te,style:{display:"none"}}),n.jsx("label",{htmlFor:"thumbnail-upload-input",className:`thumbnail-upload-label ${Te?"disabled":""}`,children:Te?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"thumbnail-upload-spinner"}),n.jsx("span",{children:"Uploading..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(oT,{fontSize:"large"}),n.jsx("span",{children:"Choose Image"}),n.jsx("span",{className:"thumbnail-upload-hint",children:"PNG, JPG, or GIF (max 5MB)"})]})})]})]})]})})]})},T0=({children:a})=>{const{user:r}=Ji(),e=mr();return gr.useEffect(()=>{r&&e("/")},[r,e]),r?null:n.jsx(n.Fragment,{children:a})},Yxe=()=>{const a=mr();return gr.useEffect(()=>{a("/",{replace:!0})},[a]),null},vT=48,bT=240,Zxe=()=>{const a=Pi(),r=a.pathname.startsWith("/themes/code-fullscreen/"),e=a.pathname.startsWith("/themes/builder"),t=a.pathname.startsWith("/themes/basic-elementor"),s=r||e||t;return n.jsxs(Et,{sx:{display:"flex",flexDirection:"column",height:"100vh"},children:[!s&&n.jsx(CF,{}),n.jsxs(Et,{sx:{display:"flex",flexGrow:1,overflow:"hidden",position:"relative"},children:[!s&&n.jsx(dF,{}),n.jsx(Et,{component:"main",sx:{flexGrow:1,p:s?0:3,overflow:"auto",marginTop:s?0:`${vT}px`,marginLeft:s?0:`${bT}px`,width:s?"100%":`calc(100% - ${bT}px)`,height:s?"100vh":`calc(100vh - ${vT}px)`,backgroundColor:s?"transparent":"#fff",color:"#000",transition:"margin-left 0.3s ease"},children:n.jsxs(HT,{children:[n.jsx(fr,{path:"/",element:n.jsx(lF,{})}),n.jsx(fr,{path:"/orders",element:n.jsx(Uee,{})}),n.jsx(fr,{path:"/products",element:n.jsx(Mte,{})}),n.jsx(fr,{path:"/products/:id",element:n.jsx(vte,{})}),n.jsx(fr,{path:"/products/:id/variants/:variantId",element:n.jsx(Ste,{})}),n.jsx(fr,{path:"/products/new",element:n.jsx(Oee,{})}),n.jsx(fr,{path:"/products/inventory",element:n.jsx(_te,{})}),n.jsx(fr,{path:"/products/purchase-orders",element:n.jsx(nre,{})}),n.jsx(fr,{path:"/products/purchase-orders/:id",element:n.jsx(Rte,{})}),n.jsx(fr,{path:"/products/purchase-orders/:id/receive",element:n.jsx(Jte,{})}),n.jsx(fr,{path:"/products/purchase-orders/new",element:n.jsx(Qte,{})}),n.jsx(fr,{path:"/products/collections",element:n.jsx(nte,{})}),n.jsx(fr,{path:"/products/collections/:id",element:n.jsx(ete,{})}),n.jsx(fr,{path:"/products/collections/new",element:n.jsx(Vee,{})}),n.jsx(fr,{path:"/products/gift-cards",element:n.jsx(RJ,{})}),n.jsx(fr,{path:"/products/gift-cards/new",element:n.jsx(GJ,{})}),n.jsx(fr,{path:"/products/gift-cards/:giftCardId",element:n.jsx(AJ,{})}),n.jsx(fr,{path:"/products/transfers",element:n.jsx(Mfe,{})}),n.jsx(fr,{path:"/products/transfers/:id",element:n.jsx(Ofe,{})}),n.jsx(fr,{path:"/products/transfers/new",element:n.jsx(Mee,{})}),n.jsx(fr,{path:"/products/transfers/:id/shipment/new",element:n.jsx(Sfe,{})}),n.jsx(fr,{path:"/products/transfers/:id/shipment/:shipmentId/receive",element:n.jsx(kfe,{})}),n.jsx(fr,{path:"/customers",element:n.jsx(rJ,{})}),n.jsx(fr,{path:"/customers/segments",element:n.jsx(iJ,{})}),n.jsx(fr,{path:"/customers/segments/:id",element:n.jsx(tJ,{})}),n.jsx(fr,{path:"/customers/new",element:n.jsx(qJ,{})}),n.jsx(fr,{path:"/customers/:id",element:n.jsx(GQ,{})}),n.jsx(fr,{path:"/marketing",element:n.jsx(zJ,{})}),n.jsx(fr,{path:"/discounts",element:n.jsx(yJ,{})}),n.jsx(fr,{path:"/discounts/:id",element:n.jsx(Zfe,{})}),n.jsx(fr,{path:"/discounts/pyxgety/:id",element:n.jsx(Wfe,{})}),n.jsx(fr,{path:"/discounts/amount-off-order/:id",element:n.jsx(Bfe,{})}),n.jsx(fr,{path:"/discounts/free-shipping/:id",element:n.jsx(spe,{})}),n.jsx(fr,{path:"/discounts/new/amount-off-products",element:n.jsx(Ufe,{})}),n.jsx(fr,{path:"/discounts/new/buy-x-get-y",element:n.jsx(Hfe,{})}),n.jsx(fr,{path:"/discounts/new/amount-off-order",element:n.jsx(zfe,{})}),n.jsx(fr,{path:"/discounts/new/free-shipping",element:n.jsx(ope,{})}),n.jsx(fr,{path:"/content",element:n.jsx(EQ,{})}),n.jsx(fr,{path:"/markets",element:n.jsx(hxe,{})}),n.jsx(fr,{path:"/analytics",element:n.jsx(wQ,{})}),n.jsx(fr,{path:"/tag-management",element:n.jsx(Tfe,{})}),n.jsx(fr,{path:"/vendors",element:n.jsx(Dfe,{})}),n.jsxs(fr,{path:"/settings",element:n.jsx(fge,{}),children:[n.jsx(fr,{index:!0,element:n.jsx(pge,{})}),n.jsx(fr,{path:"general",element:n.jsx(Hhe,{})}),n.jsx(fr,{path:"general/metafields",element:n.jsx(Uge,{})}),n.jsx(fr,{path:"general/activity",element:n.jsx(Hge,{})}),n.jsx(fr,{path:"general/branding",element:n.jsx(Bpe,{})}),n.jsx(fr,{path:"plan",element:n.jsx(Vme,{})}),n.jsx(fr,{path:"plan/subscriptions",element:n.jsx(qme,{})}),n.jsx(fr,{path:"subscribe/select-plan",element:n.jsx(Bme,{})}),n.jsx(fr,{path:"billing",element:n.jsx(Spe,{})}),n.jsx(fr,{path:"billing/charges",element:n.jsx(ppe,{})}),n.jsx(fr,{path:"billing/upcoming",element:n.jsx(Epe,{})}),n.jsx(fr,{path:"billing/profile",element:n.jsx(bpe,{})}),n.jsx(fr,{path:"users",element:n.jsx(Yge,{})}),n.jsx(fr,{path:"users/roles",element:n.jsx(nge,{})}),n.jsx(fr,{path:"users/roles/:roleId",element:n.jsx(rge,{})}),n.jsx(fr,{path:"users/roles/new",element:n.jsx(Eme,{})}),n.jsx(fr,{path:"users/security",element:n.jsx(Zge,{})}),n.jsx(fr,{path:"payments",element:n.jsx(Dme,{})}),n.jsx(fr,{path:"checkout",element:n.jsx(Vpe,{})}),n.jsx(fr,{path:"customer-accounts",element:n.jsx(bhe,{})}),n.jsx(fr,{path:"customer-accounts/authentication",element:n.jsx(Gpe,{})}),n.jsx(fr,{path:"customer-accounts/authentication/google",element:n.jsx(ghe,{})}),n.jsx(fr,{path:"customer-accounts/authentication/facebook",element:n.jsx(mhe,{})}),n.jsx(fr,{path:"shipping-and-delivery",element:n.jsx(zge,{})}),n.jsx(fr,{path:"shipping-and-delivery/local_deliveries/:localDeliveryId",element:n.jsx(dme,{})}),n.jsx(fr,{path:"shipping-and-delivery/local_deliveries/:localDeliveryId/locations/:locationId",element:n.jsx(ume,{})}),n.jsx(fr,{path:"shipping-and-delivery/profiles/create",element:n.jsx(Oxe,{})}),n.jsx(fr,{path:"shipping-and-delivery/profiles/:profileId",element:n.jsx(Pxe,{})}),n.jsx(fr,{path:"taxes-and-duties",element:n.jsx(Kge,{})}),n.jsx(fr,{path:"taxes-and-duties/:countryId",element:n.jsx(ime,{})}),n.jsx(fr,{path:"locations",element:n.jsx(bme,{})}),n.jsx(fr,{path:"locations/new",element:n.jsx(_me,{})}),n.jsx(fr,{path:"locations/:locationId",element:n.jsx(fme,{})}),n.jsx(fr,{path:"markets",element:n.jsx(Wye,{})}),n.jsx(fr,{path:"apps-and-sales-channels",element:n.jsx(E6,{title:"Apps and Sales Channels"})}),n.jsx(fr,{path:"domains",element:n.jsx(khe,{})}),n.jsx(fr,{path:"customer-events",element:n.jsx(Txe,{})}),n.jsx(fr,{path:"customer-events/:pixelId",element:n.jsx(bxe,{})}),n.jsx(fr,{path:"notifications",element:n.jsx(Lme,{})}),n.jsx(fr,{path:"notifications/:categoryId/:categorySlug",element:n.jsx(Che,{})}),n.jsx(fr,{path:"notifications/:categoryId/:categorySlug/:optionId",element:n.jsx(Tme,{})}),n.jsx(fr,{path:"notifications/:categoryId/:categorySlug/:optionId/edit",element:n.jsx(_he,{})}),n.jsx(fr,{path:"notifications/webhooks",element:n.jsx(Axe,{})}),n.jsx(fr,{path:"metafields-and-metaobjects",element:n.jsx(Hye,{})}),n.jsx(fr,{path:"languages",element:n.jsx(Vye,{})}),n.jsx(fr,{path:"customer-privacy",element:n.jsx(She,{})}),n.jsx(fr,{path:"customer-privacy/dns",element:n.jsx(Nhe,{})}),n.jsx(fr,{path:"policies",element:n.jsx(tge,{})}),n.jsx(fr,{path:"policies/manage-return-rules",element:n.jsx(Cme,{})}),n.jsx(fr,{path:"policies/manage-return-rules/new",element:n.jsx(Hpe,{})})]}),n.jsx(fr,{path:"/orders/drafts",element:n.jsx(mxe,{})}),n.jsx(fr,{path:"/themes/all-themes",element:n.jsx(Kxe,{})}),n.jsx(fr,{path:"/themes/builder",element:n.jsx(zB,{})}),n.jsx(fr,{path:"/themes/basic-elementor",element:n.jsx(fQ,{})}),n.jsx(fr,{path:"/themes/edit/:themeId",element:n.jsx(a5,{})}),n.jsx(fr,{path:"/themes/layout/:themeId",element:n.jsx(a5,{})}),n.jsx(fr,{path:"/themes/code/:themeId",element:n.jsx(y3,{})}),n.jsx(fr,{path:"/themes/code-fullscreen/:themeId",element:n.jsx(RB,{})})]})})]})]})},Xxe=()=>{const{checkAuth:a}=Ji();return gr.useEffect(()=>{},[]),n.jsx(H6,{children:n.jsx(Oye,{children:n.jsx(Iye,{children:n.jsx(Fye,{children:n.jsx(Tye,{children:n.jsx(Rye,{children:n.jsx(_ye,{children:n.jsx(Dye,{children:n.jsx(KT,{children:n.jsxs(HT,{children:[n.jsx(fr,{path:"/",element:n.jsx(Gye,{})}),n.jsx(fr,{path:"/products/:id",element:n.jsx(axe,{})}),n.jsx(fr,{path:"/auth/login",element:n.jsx(T0,{children:n.jsx(exe,{})})}),n.jsx(fr,{path:"/auth/signup",element:n.jsx(T0,{children:n.jsx(lxe,{})})}),n.jsx(fr,{path:"/auth/forgot-password",element:n.jsx(T0,{children:n.jsx(Xye,{})})}),n.jsx(fr,{path:"/auth/reset-password",element:n.jsx(T0,{children:n.jsx(ixe,{})})}),n.jsx(fr,{path:"/profile",element:n.jsx(oxe,{})}),n.jsx(fr,{path:"/my-orders",element:n.jsx(rxe,{})}),n.jsx(fr,{path:"/collections/:collectionId/:urlHandle",element:n.jsx(Zye,{})}),n.jsx(fr,{path:"*",element:n.jsx(Yxe,{})})]})})})})})})})})})})},Qxe=()=>{const{isStoreFront:a,storeFrontChecked:r}=hc();return r?r&&a?n.jsx(Mye,{children:n.jsx(Xxe,{})}):n.jsx(H8,{children:n.jsx(pye,{children:n.jsx(uF,{children:n.jsx(pQ,{children:n.jsx(vF,{children:n.jsx(pF,{children:n.jsx(OQ,{children:n.jsx(q8,{children:n.jsx(Bye,{children:n.jsx(FB,{children:n.jsx(jF,{children:n.jsx($ee,{children:n.jsx(fF,{children:n.jsx(gF,{children:n.jsx(mF,{children:n.jsx(m7,{children:n.jsx(Tee,{children:n.jsx(xte,{children:n.jsx(Qee,{children:n.jsx(bF,{children:n.jsx(PJ,{children:n.jsx(TJ,{children:n.jsx(Pee,{children:n.jsx(Dge,{children:n.jsx(lme,{children:n.jsx(kte,{children:n.jsx(wF,{children:n.jsx(Aee,{children:n.jsx(Nfe,{children:n.jsx(jfe,{children:n.jsx(Zte,{children:n.jsx(yQ,{children:n.jsx(Ite,{children:n.jsx(eJ,{children:n.jsx(QQ,{children:n.jsx(mJ,{children:n.jsx(hJ,{children:n.jsx(gJ,{children:n.jsx(G8,{children:n.jsx(Qge,{children:n.jsx(Vhe,{children:n.jsx(Dpe,{children:n.jsx(Uhe,{children:n.jsx(qpe,{children:n.jsx(Wpe,{children:n.jsx(wme,{children:n.jsx($he,{children:n.jsx(Ime,{children:n.jsx(Xme,{children:n.jsx(Jme,{children:n.jsx(Gme,{children:n.jsx(Yme,{children:n.jsx(dye,{children:n.jsx(fye,{children:n.jsx(lye,{children:n.jsx(oye,{children:n.jsx(yye,{children:n.jsx(gye,{children:n.jsx($pe,{children:n.jsx(qhe,{children:n.jsx(Nye,{children:n.jsx(Cye,{children:n.jsx($ye,{children:n.jsx(eye,{children:n.jsx(aye,{children:n.jsx(xye,{children:n.jsx(rye,{children:n.jsx(jhe,{children:n.jsx(whe,{children:n.jsx(hQ,{children:n.jsx(gQ,{children:n.jsx(xQ,{children:n.jsx(vQ,{children:n.jsx(zpe,{children:n.jsx(Bge,{children:n.jsx(vye,{children:n.jsx(wye,{children:n.jsx(Ghe,{children:n.jsx(nme,{children:n.jsx(Yhe,{children:n.jsx(Xhe,{children:n.jsx(Jhe,{children:n.jsx(tme,{children:n.jsx(sme,{children:n.jsx(qge,{children:n.jsxs(KT,{children:[n.jsx(XI,{position:"top-center",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"}}}),n.jsx(Zxe,{})]})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})}):null},Jxe=()=>n.jsx(Aye,{children:n.jsx(Qxe,{})}),wT=document.getElementById("root");wT&&cI.createRoot(wT).render(n.jsx(f.StrictMode,{children:n.jsx(Jxe,{})}));export{rS as g};
