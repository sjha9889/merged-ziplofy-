import{r as t,u as A,Z as E,b as P,ad as D,j as e,g as $}from"./index-C7S6h9OR.js";import{G as L}from"./GridBackgroundWrapper-Du1VLjut.js";import{F as O}from"./ShoppingBagIcon-C8KO76LJ.js";import{F as b}from"./InformationCircleIcon-B4YRJG0O.js";import{F as V}from"./FunnelIcon-C0EmTLgY.js";import{F as I}from"./ArrowsUpDownIcon-s_tpXzWy.js";import{F as G}from"./ChevronRightIcon-CVun6pAX.js";import{F as B}from"./EllipsisVerticalIcon-BmYIkkbK.js";function M({title:l,titleId:c,...d},o){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":c},d),l?t.createElement("title",{id:c},l):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const U=t.forwardRef(M),X=()=>{const l=A(),{countries:c,loading:d,getCountries:o}=E(),{activeStoreId:x}=P(),{settings:a,loading:m,getByStoreId:y,update:f}=D(),[j,k]=t.useState(""),[i,g]=t.useState(1),h=10,[T,N]=t.useState(!1),[R,w]=t.useState(!1),[F,v]=t.useState(!1),n=t.useRef(null);t.useEffect(()=>{o({limit:1e3})},[o]),t.useEffect(()=>{x&&y(x).catch(s=>{console.error("Failed to fetch tax and duties global settings:",s)})},[x,y]),t.useEffect(()=>{a&&(N(a.includeSalesTaxInProductPriceAndShippingRate),w(a.chargeSalesTaxOnShipping),v(a.chargeVATOnDigitalGoods))},[a]);const u=t.useCallback(s=>{!a||!a._id||(n.current&&clearTimeout(n.current),n.current=setTimeout(async()=>{try{await f(a._id,s)}catch(r){console.error("Failed to update tax and duties global settings:",r)}},500))},[a,f]);t.useEffect(()=>()=>{n.current&&clearTimeout(n.current)},[]);const S=c.map(s=>({id:s._id,name:s.name,flag:s.flagEmoji||"ðŸ³ï¸",collecting:s.name.toLowerCase()==="india"?"Taxes":null,taxService:"Manual Tax"})).filter(s=>s.name.toLowerCase().includes(j.toLowerCase())),C=S.slice((i-1)*h,i*h),p=Math.ceil(S.length/h);return e.jsx(L,{children:e.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b border-gray-200 pb-4",children:[e.jsx(O,{className:"w-5 h-5 text-gray-600"}),e.jsx("h1",{className:"text-xl font-medium text-gray-900",children:"Taxes and duties"})]}),e.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Tax regions"}),e.jsx(b,{className:"w-4 h-4 text-gray-500"})]}),e.jsxs("p",{className:"text-xs text-gray-600 mb-4",children:["Areas where your customers will pay tax, and where you will collect and remit. Create a"," ",e.jsx("button",{onClick:()=>l("/settings/shipping-and-delivery"),className:"text-gray-700 cursor-pointer hover:underline",children:"shipping zone"})," ","to add a new tax region. If you're unsure about your tax liability, check with a tax professional."]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsxs("div",{className:"relative flex-1 max-w-[300px]",children:[e.jsx($,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search",value:j,onChange:s=>{k(s.target.value),g(1)},className:"w-full pl-10 pr-3 py-2 border border-gray-200 text-sm text-gray-900 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]}),e.jsx("button",{className:"p-1.5 border border-gray-200 hover:bg-gray-50 transition-colors",children:e.jsx(V,{className:"w-4 h-4 text-gray-600"})}),e.jsx("button",{className:"p-1.5 border border-gray-200 hover:bg-gray-50 transition-colors",children:e.jsx(I,{className:"w-4 h-4 text-gray-600"})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-2 px-3 text-xs font-medium text-gray-700 border-b border-gray-200",children:"Region"}),e.jsx("th",{className:"text-left py-2 px-3 text-xs font-medium text-gray-700 border-b border-gray-200",children:"Collecting"}),e.jsx("th",{className:"text-left py-2 px-3 text-xs font-medium text-gray-700 border-b border-gray-200",children:"Tax service"})]})}),e.jsx("tbody",{children:d?e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"text-center py-4 text-xs text-gray-600",children:"Loading countries..."})}):C.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"text-center py-4 text-xs text-gray-600",children:"No countries found"})}):C.map(s=>e.jsxs("tr",{onClick:()=>l(`/settings/taxes-and-duties/${s.id}`),className:"cursor-pointer hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"py-3 px-3 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:s.flag}),e.jsx("span",{className:"text-sm text-gray-900 font-medium",children:s.name})]})}),e.jsx("td",{className:"py-3 px-3 border-b border-gray-100",children:s.collecting?e.jsx("span",{className:"inline-block px-2 py-0.5 bg-gray-100 text-xs font-medium text-gray-700",children:s.collecting}):e.jsx("span",{className:"text-sm text-gray-400",children:"â€”"})}),e.jsx("td",{className:"py-3 px-3 border-b border-gray-100 text-sm text-gray-600",children:s.taxService})]},s.id))})]})}),p>1&&e.jsxs("div",{className:"flex items-center gap-1 mt-4",children:[e.jsx("button",{disabled:i===1,onClick:()=>g(i-1),className:`p-1.5 border border-gray-200 transition-colors ${i===1?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-50"}`,children:e.jsx(U,{className:"w-4 h-4"})}),e.jsx("button",{disabled:i===p,onClick:()=>g(i+1),className:`p-1.5 border border-gray-200 transition-colors ${i===p?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-50"}`,children:e.jsx(G,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Duties and import taxes"}),e.jsx(b,{className:"w-4 h-4 text-gray-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between items-start gap-4 mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-0.5",children:"Collect duties and import taxes at checkout"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Prevent surprise fees for international customers at delivery â€¢ 0.5% transaction fee"})]}),e.jsx("button",{className:"px-3 py-1.5 border border-gray-200 text-sm text-gray-700 hover:bg-gray-50 transition-colors whitespace-nowrap",children:"Set up"})]}),e.jsxs("div",{className:"mt-3 p-3 bg-gray-50 border border-gray-200 flex items-start gap-2",children:[e.jsx(b,{className:"w-4 h-4 text-gray-600 shrink-0 mt-0.5"}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Ensure the carriers you use offer"," ",e.jsx("button",{className:"text-gray-700 cursor-pointer hover:underline",children:"Delivered duty paid (DDP) shipping labels"}),"."]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Customs information"}),e.jsx("button",{className:"p-1 text-gray-500 hover:bg-gray-50 transition-colors",children:e.jsx(B,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-0.5",children:"Country of origin"}),e.jsx("p",{className:"text-xs text-gray-900",children:"No default set"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-0.5",children:"Harmonized System (HS) codes"}),e.jsx("p",{className:"text-xs text-gray-900",children:"No physical products available"})]})]})]}),e.jsxs("div",{className:"border border-gray-200 bg-white/95 p-4",children:[e.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-4",children:"Global settings"}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:T,onChange:s=>{const r=s.target.checked;N(r),u({includeSalesTaxInProductPriceAndShippingRate:r})},disabled:m||!a,className:"mt-0.5 w-4 h-4 border-gray-300 text-gray-600 focus:ring-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-0.5",children:"Include sales tax in product price and shipping rate"}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Assumes a 9% tax rate, which is adjusted to local tax rates in markets with"," ",e.jsx("button",{className:"text-gray-700 cursor-pointer hover:underline",children:"dynamic tax inclusion"}),"."]})]})]})}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:R,onChange:s=>{const r=s.target.checked;w(r),u({chargeSalesTaxOnShipping:r})},disabled:m||!a,className:"mt-0.5 w-4 h-4 border-gray-300 text-gray-600 focus:ring-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-0.5",children:"Charge sales tax on shipping"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Automatically calculated for Canada, European Union, and United States"})]})]})}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:F,onChange:s=>{const r=s.target.checked;v(r),u({chargeVATOnDigitalGoods:r})},disabled:m||!a,className:"mt-0.5 w-4 h-4 border-gray-300 text-gray-600 focus:ring-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-0.5",children:"Charge VAT on digital goods"}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Creates a collection of digital goods that will be"," ",e.jsx("button",{className:"text-gray-700 cursor-pointer hover:underline",children:"charged VAT"})," ","at checkout (for European customers)"]})]})]})})]})]})})};export{X as default};
