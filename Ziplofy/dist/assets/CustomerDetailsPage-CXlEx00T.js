import{r as l,j as e,aW as S,aX as M,p as O,u as F,C as L}from"./index-C7S6h9OR.js";import{C as D}from"./countries--eOPoqDg.js";import{M as w}from"./Modal-DsfhGJdg.js";import{F as U}from"./PencilIcon-MufFKs4H.js";import{F as P}from"./TrashIcon-B2-WJkmb.js";import{F as _}from"./ArrowLeftIcon-C1qOxHB_.js";import"./index-CCB_rw4P.js";const I=({isOpen:s,onClose:t,onSubmit:r,customerId:d})=>{const[a,n]=l.useState({addressType:"home",country:"",firstName:"",lastName:"",company:"",address:"",apartment:"",city:"",state:"",pinCode:"",phoneNumber:""}),c=l.useCallback((o,g)=>{n(p=>({...p,[o]:g}))},[]),i=l.useCallback(async()=>{if(!d)return;const o={customerId:d,addressType:a.addressType,country:a.country,firstName:a.firstName,lastName:a.lastName,company:a.company||void 0,address:a.address,apartment:a.apartment||void 0,city:a.city,state:a.state,pinCode:a.pinCode,phoneNumber:a.phoneNumber};await r(o),n({addressType:"home",country:"",firstName:"",lastName:"",company:"",address:"",apartment:"",city:"",state:"",pinCode:"",phoneNumber:""})},[d,a,r]),u=l.useCallback(()=>{n({addressType:"home",country:"",firstName:"",lastName:"",company:"",address:"",apartment:"",city:"",state:"",pinCode:"",phoneNumber:""}),t()},[t]);return l.useEffect(()=>{s&&n({addressType:"home",country:"",firstName:"",lastName:"",company:"",address:"",apartment:"",city:"",state:"",pinCode:"",phoneNumber:""})},[s]),e.jsx(w,{open:s,onClose:u,title:"Add Customer Address",maxWidth:"lg",actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:u,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Close"}),e.jsx("button",{onClick:i,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Save Address"})]}),children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Address Type (home / office / other)"}),e.jsx("input",{type:"text",value:a.addressType,onChange:o=>c("addressType",o.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Country"}),e.jsxs("select",{value:a.country,onChange:o=>c("country",o.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors",children:[e.jsx("option",{value:"",children:"Select Country"}),D.map(o=>e.jsx("option",{value:o.code,children:o.name},o.code))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Company"}),e.jsx("input",{type:"text",value:a.company,onChange:o=>c("company",o.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"First Name"}),e.jsx("input",{type:"text",value:a.firstName,onChange:o=>c("firstName",o.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Last Name"}),e.jsx("input",{type:"text",value:a.lastName,onChange:o=>c("lastName",o.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Address"}),e.jsx("input",{type:"text",value:a.address,onChange:o=>c("address",o.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Apartment, Suite, etc."}),e.jsx("input",{type:"text",value:a.apartment,onChange:o=>c("apartment",o.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"City"}),e.jsx("input",{type:"text",value:a.city,onChange:o=>c("city",o.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"State"}),e.jsx("input",{type:"text",value:a.state,onChange:o=>c("state",o.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Pin Code"}),e.jsx("input",{type:"text",value:a.pinCode,onChange:o=>c("pinCode",o.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Phone Number"}),e.jsx("input",{type:"text",value:a.phoneNumber,onChange:o=>c("phoneNumber",o.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]})})},W=({address:s,onUpdate:t,onDelete:r})=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 capitalize",children:s.addressType||"home"}),e.jsxs("div",{className:"flex gap-1.5",children:[e.jsx("button",{onClick:()=>t(s),className:"px-2 py-1 text-xs font-medium text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:"Update"}),e.jsx("button",{onClick:()=>r(s._id),className:"px-2 py-1 text-xs font-medium text-gray-700 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:"Delete"})]})]}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-700",children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[s.firstName," ",s.lastName]}),e.jsxs("p",{className:"text-gray-600",children:[s.address,s.apartment?`, ${s.apartment}`:""]}),e.jsxs("p",{className:"text-gray-600",children:[s.city,", ",s.state," ",s.pinCode]}),e.jsx("p",{className:"text-gray-600",children:s.country}),e.jsx("p",{className:"text-gray-600",children:s.phoneNumber})]})]}),R=({addresses:s,onUpdate:t,onDelete:r})=>e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map(d=>e.jsx(W,{address:d,onUpdate:t,onDelete:r},d._id))}),$=({isOpen:s,onClose:t,onConfirm:r})=>e.jsx(w,{open:s,onClose:t,title:"Delete Address",maxWidth:"sm",actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:t,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"No"}),e.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Yes"})]}),children:e.jsx("p",{className:"text-sm text-gray-700",children:"Do you really want to delete this address?"})}),z=({isOpen:s,addressForm:t,onAddressChange:r,onClose:d,onSubmit:a})=>e.jsx(w,{open:s,onClose:d,title:"Update Customer Address",maxWidth:"lg",actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:d,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:a,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Update Address"})]}),children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Address Type (home / office / other)"}),e.jsx("input",{type:"text",value:t.addressType,onChange:n=>r("addressType",n.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Country"}),e.jsxs("select",{value:t.country,onChange:n=>r("country",n.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors",children:[e.jsx("option",{value:"",children:"Select Country"}),D.map(n=>e.jsx("option",{value:n.code,children:n.name},n.code))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Company"}),e.jsx("input",{type:"text",value:t.company,onChange:n=>r("company",n.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"First Name"}),e.jsx("input",{type:"text",value:t.firstName,onChange:n=>r("firstName",n.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Last Name"}),e.jsx("input",{type:"text",value:t.lastName,onChange:n=>r("lastName",n.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Address"}),e.jsx("input",{type:"text",value:t.address,onChange:n=>r("address",n.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Apartment, Suite, etc."}),e.jsx("input",{type:"text",value:t.apartment,onChange:n=>r("apartment",n.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"City"}),e.jsx("input",{type:"text",value:t.city,onChange:n=>r("city",n.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"State"}),e.jsx("input",{type:"text",value:t.state,onChange:n=>r("state",n.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Pin Code"}),e.jsx("input",{type:"text",value:t.pinCode,onChange:n=>r("pinCode",n.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Phone Number"}),e.jsx("input",{type:"text",value:t.phoneNumber,onChange:n=>r("phoneNumber",n.target.value),className:"w-full px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 transition-colors"})]})]})}),B=({customerId:s})=>{const{addresses:t,loading:r,error:d,fetchCustomerAddressesByCustomerId:a,updateCustomerAddress:n,deleteCustomerAddress:c}=S(),[i,u]=l.useState(!1),[o,g]=l.useState(null),[p,y]=l.useState(!1),[b,v]=l.useState(null),[x,h]=l.useState({addressType:"home",country:"",firstName:"",lastName:"",company:"",address:"",apartment:"",city:"",state:"",pinCode:"",phoneNumber:""});l.useEffect(()=>{s&&a(s)},[s,a]);const C=l.useCallback((m,j)=>{h(E=>({...E,[m]:j}))},[]),f=l.useCallback(async()=>{!b||!s||(await n(b,{addressType:x.addressType,country:x.country,firstName:x.firstName,lastName:x.lastName,company:x.company||void 0,address:x.address,apartment:x.apartment||void 0,city:x.city,state:x.state,pinCode:x.pinCode,phoneNumber:x.phoneNumber}),y(!1),v(null),a(s))},[b,s,x,n,a]),N=l.useCallback(async()=>{!o||!s||(await c(o),u(!1),g(null),a(s))},[o,s,c,a]),k=l.useCallback(m=>{v(m._id),h({addressType:m.addressType||"home",country:m.country,firstName:m.firstName,lastName:m.lastName,company:m.company||"",address:m.address,apartment:m.apartment||"",city:m.city,state:m.state,pinCode:m.pinCode,phoneNumber:m.phoneNumber}),y(!0)},[]),T=l.useCallback(()=>{y(!1),v(null)},[]),A=l.useCallback(m=>{g(m),u(!0)},[]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200/80 p-6 shadow-sm",children:[e.jsx("h2",{className:"text-base font-semibold text-gray-900 mb-4",children:"Addresses"}),r?e.jsx("p",{className:"text-sm text-gray-600",children:"Loading addresses..."}):d?e.jsx("p",{className:"text-sm text-red-600",children:d}):t&&t.length>0?e.jsx(R,{addresses:t,onUpdate:k,onDelete:A}):e.jsx("p",{className:"text-sm text-gray-600",children:"Currently no address added."})]}),e.jsx(z,{isOpen:p,addressForm:x,onAddressChange:C,onClose:T,onSubmit:f}),e.jsx($,{isOpen:i,onClose:()=>{u(!1),g(null)},onConfirm:N})]})},K=({agreedToMarketingEmails:s,agreedToSmsMarketing:t,notes:r})=>e.jsxs("div",{className:"pt-3 border-t border-gray-200",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Marketing Emails"}),e.jsx("p",{className:"text-sm",children:s?e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:"Agreed"}):e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-700",children:"Not Agreed"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"SMS Marketing"}),e.jsx("p",{className:"text-sm",children:t?e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:"Agreed"}):e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-700",children:"Not Agreed"})})]})]}),r&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Notes"}),e.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:r})]})]}),Y=({firstName:s,lastName:t,email:r,phoneNumber:d})=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"First Name"}),e.jsx("p",{className:"text-sm text-gray-900",children:s})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Last Name"}),e.jsx("p",{className:"text-sm text-gray-900",children:t})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Email"}),e.jsx("p",{className:"text-sm text-gray-900",children:r})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Phone Number"}),e.jsx("p",{className:"text-sm text-gray-900",children:d})]})]}),X=({language:s,collectTax:t,storeId:r})=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Language"}),e.jsx("p",{className:"text-sm text-gray-900",children:s})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Collect Tax"}),e.jsx("p",{className:"text-sm text-gray-900 capitalize",children:t==="collect"?"Collect Tax":t==="dont_collect"?"Don't Collect Tax":"Collect Tax Unless Exempt"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Store ID"}),e.jsx("p",{className:"text-xs text-gray-700 font-mono",children:r})]})]}),q=({tags:s})=>e.jsxs("div",{className:"pt-3 border-t border-gray-200",children:[e.jsx("h3",{className:"text-xs text-gray-600 mb-2",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:Array.isArray(s)&&s.length>0?s.map(t=>e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-700",children:t.name||t},t._id||t)):e.jsx("span",{className:"text-xs text-gray-500",children:"No tags"})})]}),G=({comment:s,onCommentChange:t,onSubmit:r})=>{const d=a=>{a.key==="Enter"&&(a.ctrlKey||a.metaKey)&&r()};return e.jsxs("div",{className:"flex gap-2 items-start",children:[e.jsx("textarea",{value:s,onChange:a=>t(a.target.value),placeholder:"Leave a comment",rows:2,className:"flex-1 px-3 py-1.5 text-base border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 resize-none",onKeyDown:d}),e.jsx("button",{onClick:r,disabled:!s.trim(),className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 rounded hover:bg-gray-800 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors whitespace-nowrap",children:"Post"})]})},H=({entry:s,onEdit:t,onDelete:r})=>e.jsxs("div",{className:"border border-gray-200 rounded p-3",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap pr-2 flex-1",children:s.comment}),e.jsxs("div",{className:"flex gap-1 shrink-0",children:[e.jsx("button",{onClick:()=>t(s),className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors","aria-label":"edit timeline",children:e.jsx(U,{className:"w-3.5 h-3.5"})}),e.jsx("button",{onClick:()=>r(s._id),className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors","aria-label":"delete timeline",children:e.jsx(P,{className:"w-3.5 h-3.5"})})]})]}),e.jsx("p",{className:"text-xs text-gray-600",children:new Date(s.createdAt).toLocaleDateString()})]}),J=({timeline:s,loading:t,error:r,onEdit:d,onDelete:a})=>e.jsx("div",{className:"mb-4 space-y-2",children:t?e.jsx("p",{className:"text-sm text-gray-600",children:"Loading timeline..."}):r?e.jsx("p",{className:"text-sm text-red-600",children:r}):s&&s.length>0?s.map(n=>e.jsx(H,{entry:n,onEdit:d,onDelete:a},n._id)):e.jsx("p",{className:"text-sm text-gray-600",children:"No timeline entries yet."})}),Q=({isOpen:s,onClose:t,onConfirm:r})=>e.jsx(w,{open:s,onClose:t,title:"Delete Timeline Item",maxWidth:"sm",actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:t,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"No"}),e.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Yes"})]}),children:e.jsx("p",{className:"text-sm text-gray-700",children:"Do you really want to delete this timeline item?"})}),V=({isOpen:s,comment:t,onCommentChange:r,onClose:d,onSubmit:a})=>e.jsx(w,{open:s,onClose:d,title:"Edit Timeline Comment",maxWidth:"sm",actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:d,className:"px-3 py-1.5 text-sm font-medium text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:a,disabled:!t.trim(),className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:"Submit"})]}),children:e.jsx("textarea",{value:t,onChange:n=>r(n.target.value),rows:3,className:"w-full px-3 py-2 text-base border border-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 resize-none transition-colors",placeholder:"Comment"})}),Z=({customerId:s})=>{const{timeline:t,loading:r,error:d,createCustomerTimeline:a,updateCustomerTimeline:n,deleteCustomerTimeline:c,fetchCustomerTimelineByCustomerId:i}=M(),[u,o]=l.useState(""),[g,p]=l.useState(!1),[y,b]=l.useState(null),[v,x]=l.useState(!1),[h,C]=l.useState(null),[f,N]=l.useState(""),k=l.useCallback(async()=>{!s||!u.trim()||(await a({customerId:s,comment:u.trim()}),o(""),i(s))},[s,u,a,i]),T=l.useCallback(async()=>{!h||!f.trim()||!s||(await n(h,{comment:f.trim()}),x(!1),C(null),N(""),i(s))},[h,f,s,n,i]),A=l.useCallback(async()=>{!y||!s||(await c(y),p(!1),b(null),i(s))},[y,s,c,i]),m=l.useCallback(j=>{C(j._id),N(j.comment),x(!0)},[]);return l.useEffect(()=>{s&&i(s)},[s,i]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200/80 p-6 shadow-sm",children:[e.jsx("h2",{className:"text-base font-semibold text-gray-900 mb-4",children:"Timeline"}),e.jsx(J,{timeline:t,loading:r,error:d,onEdit:m,onDelete:j=>{b(j),p(!0)}}),e.jsx(G,{comment:u,onCommentChange:o,onSubmit:k})]}),e.jsx(Q,{isOpen:g,onClose:()=>{p(!1),b(null)},onConfirm:A}),e.jsx(V,{isOpen:v,comment:f,onCommentChange:N,onClose:()=>{x(!1),C(null),N("")},onSubmit:T})]})},ee=({createdAt:s,updatedAt:t})=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 pt-3 border-t border-gray-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Created At"}),e.jsx("p",{className:"text-sm text-gray-900",children:new Date(s).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Updated At"}),e.jsx("p",{className:"text-sm text-gray-900",children:new Date(t).toLocaleDateString()})]})]}),ie=()=>{const{id:s}=O(),t=F(),{customers:r}=L(),{fetchCustomerAddressesByCustomerId:d,addCustomerAddress:a}=S(),[n,c]=l.useState(!1),i=l.useMemo(()=>r.find(g=>g._id===s),[r,s]),u=l.useCallback(async g=>{s&&(await a(g),c(!1),d(s))},[s,a,d]),o=l.useCallback(()=>{c(!1)},[]);return e.jsx("div",{className:"min-h-screen bg-page-background-color",children:e.jsxs("div",{className:"max-w-[1400px] mx-auto px-3 sm:px-4 py-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>t("/customers"),className:"inline-flex items-center gap-2 text-sm font-medium text-blue-600 hover:text-blue-700 mb-2 transition-colors",children:[e.jsx(_,{className:"w-4 h-4"}),"Back to customers"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:i?`${i.firstName} ${i.lastName}`:"Customer"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Customer details and information"})]}),e.jsx("button",{onClick:()=>c(!0),className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",children:"Add Address"})]})]}),e.jsx("div",{className:"max-w-6xl",children:i?e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200/80 p-6 shadow-sm",children:[e.jsx("h2",{className:"text-base font-semibold text-gray-900 mb-4",children:"Customer Information"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(Y,{firstName:i.firstName,lastName:i.lastName,email:i.email,phoneNumber:i.phoneNumber}),e.jsx(X,{language:i.language,collectTax:i.collectTax,storeId:i.storeId})]}),e.jsx(ee,{createdAt:i.createdAt,updatedAt:i.updatedAt}),e.jsx(K,{agreedToMarketingEmails:i.agreedToMarketingEmails,agreedToSmsMarketing:i.agreedToSmsMarketing,notes:i.notes}),e.jsx(q,{tags:i.tagIds})]})]}),s&&e.jsx(B,{customerId:s}),s&&e.jsx(Z,{customerId:s})]}):e.jsx("p",{className:"text-sm text-gray-600",children:"Customer not found in state."})}),s&&e.jsx(I,{isOpen:n,onClose:o,onSubmit:u,customerId:s})]})})};export{ie as default};
